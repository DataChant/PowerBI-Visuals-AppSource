
var globalPowerbi = powerbi;
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="assets",n(n.s=6)}([function(e,t){e.exports=!1},function(e,t,n){(function(t){
/*!
 * Globalize v1.4.2 2019-03-07T13:47Z Released under the MIT license
 * http://git.io/TrdQbw
 */var r;r=function(e){var t=function(e,t){return e=e.replace(/{[0-9a-zA-Z-_. ]+}/g,(function(e){return e=e.replace(/^{([^}]*)}$/,"$1"),"string"==typeof(n=t[e])?n:"number"==typeof n?""+n:JSON.stringify(n);var n}))},n=function(){var e=arguments[0],t=[].slice.call(arguments,1);return t.forEach((function(t){var n;for(n in t)e[n]=t[n]})),e},r=function(e,r,i){var a;return r=e+(r?": "+t(r,i):""),(a=new Error(r)).code=e,n(a,i),a},i=function(e){return JSON.stringify(e,(function(e,t){return t&&t.runtimeKey?t.runtimeKey:t}))},a=function(e,t,n,i){if(!n)throw r(e,t,i)},o=function(e){return Array.isArray(e)?e:e?[e]:[]},u=function(e,t,n){var r;r=o((n=n||{}).skip).some((function(t){return t.test(e)})),a("E_MISSING_CLDR","Missing required CLDR content `{path}`.",t||r,{path:e})},s=function(e,t){a("E_MISSING_PARAMETER","Missing required parameter `{name}`.",void 0!==e,{name:t})},l=function(e,t,n,r){a("E_INVALID_PAR_TYPE","Invalid `{name}` parameter ({value}). {expected} expected.",n,{expected:r,name:t,value:e})},c=function(t,n){l(t,n,void 0===t||"string"==typeof t||t instanceof e,"String or Cldr instance")},f=function(e){return null!==e&&""+e=="[object Object]"},d=function(t){return t instanceof e?t:new e(t)};function h(e){e.once("get",u),e.get("supplemental/likelySubtags")}function p(e){if(!(this instanceof p))return new p(e);s(e,"locale"),c(e,"locale"),this.cldr=d(e),h(this.cldr)}return p.load=function(){e.load.apply(e,arguments)},p.locale=function(e){return c(e,"locale"),arguments.length&&(this.cldr=d(e),h(this.cldr)),this.cldr},p._alwaysArray=o,p._createError=r,p._formatMessage=t,p._isPlainObject=f,p._objectExtend=n,p._regexpEscape=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},p._runtimeBind=function(e,t,n,r){var a=i(e),o=function(e){if(void 0!==e.name)return e.name;var t=/^function\s+([\w\$]+)\s*\(/.exec(e.toString());return t&&t.length>0?t[1]:void 0}(n),u=t.locale;return o?(n.runtimeKey=function(e,t,n,r){var a,o;return r=r||i(n),o=e+t+r,(a=[].reduce.call(o,(function(e,t){return 0|(e=(e<<5)-e+t.charCodeAt(0))}),0))>0?"a"+a:"b"+Math.abs(a)}(o,u,null,a),n.generatorString=function(){return'Globalize("'+u+'").'+o+"("+a.slice(1,-1)+")"},n.runtimeArgs=r,n):n},p._stringPad=function(e,t,n){var r;for("string"!=typeof e&&(e=String(e)),r=e.length;r<t;r+=1)e=n?e+"0":"0"+e;return e},p._validate=a,p._validateCldr=u,p._validateDefaultLocale=function(e){a("E_DEFAULT_LOCALE_NOT_DEFINED","Default locale has not been defined.",void 0!==e,{})},p._validateParameterPresence=s,p._validateParameterRange=function(e,t,n,r){a("E_PAR_OUT_OF_RANGE","Parameter `{name}` has value `{value}` out of range [{minimum}, {maximum}].",void 0===e||e>=n&&e<=r,{maximum:r,minimum:n,name:t,value:e})},p._validateParameterTypePlainObject=function(e,t){l(e,t,void 0===e||f(e),"Plain Object")},p._validateParameterType=l,p},"function"==typeof t&&t.amd?t(["cldr","cldr/event"],r):e.exports=r(n(2))}).call(this,n(0))},function(e,t,n){
/*!
 * CLDR JavaScript Library v0.5.1 2019-01-21T13:43Z MIT license © Rafael Xavier
 * http://git.io/h4lmVg
 */
e.exports=n(4),n(16),n(17),n(18)},function(e,t){e.exports=Function("return this")()},function(e,t,n){(function(t){
/*!
 * CLDR JavaScript Library v0.5.1 2019-01-21T13:43Z MIT license © Rafael Xavier
 * http://git.io/h4lmVg
 */var n,r;n=this,r=function(){var e,t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(e,n){if(t(e)&&(e=e.join("/")),"string"!=typeof e)throw new Error('invalid path "'+e+'"');return(e=(e=e.replace(/^\//,"").replace(/^cldr\//,"")).replace(/{[a-zA-Z]+}/g,(function(e){return e=e.replace(/^{([^}]*)}$/,"$1"),n[e]}))).split("/")},r=function(e,t){var n,r;if(e.some)return e.some(t);for(n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return!0;return!1},i=function(e,t,n,i){var a,o=n[0],u=n[1],s=e.localeSep,l=n[2],c=n.slice(3,4);return i=i||{},"und"!==o&&"Zzzz"!==u&&"ZZ"!==l?[o,u,l].concat(c):void 0!==t.get("supplemental/likelySubtags")?r([[o,u,l],[o,l],[o,u],[o],["und",u]],(function(e){return a=!/\b(Zzzz|ZZ)\b/.test(e.join(s))&&t.get(["supplemental/likelySubtags",e.join(s)])}))?(a=a.split(s),["und"!==o?o:a[0],"Zzzz"!==u?u:a[1],"ZZ"!==l?l:a[2]].concat(c)):i.force?t.get("supplemental/likelySubtags/und").split(s):void 0:void 0},a=function(e,t,n){var a,o=n[0],u=n[1],s=n[2],l=n[3];return r([[[o,"Zzzz","ZZ"],[o]],[[o,"Zzzz",s],[o,s]],[[o,u,"ZZ"],[o,u]]],(function(r){var o=i(e,t,r[0]);return a=r[1],o&&o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]}))?(l&&a.push(l),a):n},o=function(e){var t,n=[];return(t=(e=e.replace(/_/,"-")).split("-u-"))[1]&&(t[1]=t[1].split("-t-"),e=t[0]+(t[1][1]?"-t-"+t[1][1]:""),n[4]=t[1][0]),null===(t=e.split("-t-")[0].match(/^(([a-z]{2,3})(-([A-Z][a-z]{3}))?(-([A-Z]{2}|[0-9]{3}))?)((-([a-zA-Z0-9]{5,8}|[0-9][a-zA-Z0-9]{3}))*)$|^(root)$/))?["und","Zzzz","ZZ"]:(n[0]=t[10]||t[2]||"und",n[1]=t[4]||"Zzzz",n[2]=t[6]||"ZZ",t[7]&&t[7].length&&(n[3]=t[7].slice(1)),n)},u=function(e,t){var n,r;if(e.forEach)return e.forEach(t);for(n=0,r=e.length;n<r;n++)t(e[n],n,e)},s=function(e,t,n){var r=e._availableBundleMap,s=e._availableBundleMapQueue;return s.length&&(u(s,(function(n){var u,s,l,c;c=o(n),s=i(e,t,c),l=(l=a(e,t,s)).join(e.localeSep),(u=r[l])&&u.length<n.length||(r[l]=n)})),e._availableBundleMapQueue=[]),r[n]||null},l=function(e,t){var n,r;return r=e+(t&&JSON?": "+JSON.stringify(t):""),(n=new Error(r)).code=e,u(function(e){var t,n=[];if(Object.keys)return Object.keys(e);for(t in e)n.push(t);return n}(t),(function(e){n[e]=t[e]})),n},c=function(e,t,n){if(!t)throw l(e,n)},f=function(e,t){c("E_MISSING_PARAMETER",void 0!==e,{name:t})},d=function(e,t,n,r){c("E_INVALID_PAR_TYPE",n,{expected:r,name:t,value:e})},h=function(e,n){d(e,n,"string"==typeof e||t(e),"String or Array")},p=function(e,t){var n;d(e,t,void 0===e||null!==(n=e)&&""+n=="[object Object]","Plain Object")},x=function(e,t){var n,r=e,i=t.length;for(n=0;n<i-1;n++)if(!(r=r[t[n]]))return;return r[t[n]]},g=function(e,t){var n,r=e._availableBundleMapQueue,i=x(t,["main"]);if(i)for(n in i)i.hasOwnProperty(n)&&"root"!==n&&-1===r.indexOf(n)&&r.push(n)},m=function(e){return t(e)?e:[e]},v=e=function(){var n={},r=[].slice.call(arguments,0);return u(r,(function(r){var i;for(i in r)i in n&&"object"==typeof n[i]&&!t(n[i])?n[i]=e(n[i],r[i]):n[i]=r[i]})),n},_=function(e,t,n){var r,i,a;for(f(n[0],"json"),r=0;r<n.length;r++)for(a=m(n[r]),i=0;i<a.length;i++)p(a[i],"json"),t=v(t,a[i]),g(e,a[i]);return t},y=function(e,t,r){var i=n(t,r);return x(e._resolved,i)},b=function(e){this.init(e)};return b._alwaysArray=m,b._coreLoad=_,b._createError=l,b._itemGetResolved=y,b._jsonMerge=v,b._pathNormalize=n,b._resourceGet=x,b._validatePresence=f,b._validateType=d,b._validateTypePath=h,b._validateTypePlainObject=p,b._availableBundleMap={},b._availableBundleMapQueue=[],b._resolved={},b.localeSep="-",b.load=function(){b._resolved=_(b,b._resolved,arguments)},b.prototype.init=function(e){var t,n,r,u,l,c,h,p,x,g=b.localeSep,m="";f(e,"locale"),function(e,t){d(e,t,"string"==typeof e,"a string")}(e,"locale"),5===(c=o(e)).length&&(m=g+"u"+g+(p=c.pop()),c[3]||c.pop()),x=c[3],n=(r=i(b,this,c,{force:!0})||c)[0],l=r[1],h=r[2],u=a(b,this,r).join(g),this.attributes=t={bundle:s(b,this,u),minLanguageId:u+m,maxLanguageId:r.join(g)+m,language:n,script:l,territory:h,region:h,variant:x},p&&("-"+p).replace(/-[a-z]{3,8}|(-[a-z]{2})-([a-z]{3,8})/g,(function(e,n,r){n?t["u"+n]=r:t["u"+e]=!0})),this.locale=e},b.prototype.get=function(e){return f(e,"path"),h(e,"path"),y(b,e,this.attributes)},b.prototype.main=function(e){return f(e,"path"),h(e,"path"),c("E_MISSING_BUNDLE",null!==this.attributes.bundle,{locale:this.locale}),e=m(e),this.get(["main/{bundle}"].concat(e))},b},"function"==typeof t&&t.amd?t(r):"object"==typeof e.exports?e.exports=r():n.Cldr=r()}).call(this,n(0))},function(e,t,n){(function(t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof t&&(n=t)}e.exports=n}).call(this,n(3))},function(module,exports,__webpack_require__){(function(window,define,global,Buffer,module){var require,require,powerbi=window.powerbi,powerbi,powerbi,powerbi,powerbi,powerbi,powerbi;function storageAvailable(e){try{var t=window[e];return t.setItem("__storage_test__","__storage_test__"),t.removeItem("__storage_test__"),!0}catch(e){return!1}}function gup(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null===t?"":t[1]}function dateToYMDString(e){return printf("%04d-%02d-%02d",e.getFullYear(),e.getMonth()+1,e.getDate())}function LoadFavicon(e){var t=document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function MostraEsconde(e){e.style.display="none"===e.style.display?"":"none"}function CpyClip(theField){var tempval=eval(theField);if(tempval.style.display="",tempval.focus(),tempval.select(),document.all){var therange=tempval.createTextRange();therange.execCommand("Copy"),window.status="Dados copiados para a �rea de transfer�ncia!",setTimeout("window.status=''",2400)}tempval.style.display="none"}function SelHoje(e){var t=new Date,n=t.getYear();500>n&&(n=n-100+2e3),e.value=t.getDate()+"/"+(t.getMonth()+1)+"/"+n}function ObtemPonto(e){window.objeto=e,window.open("../comum/obtem_nponto.php","_blank","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,top=20,left=20,screenY=500,screenX=680,width=600,height=350")}function ObtemPontoAnaParaMVA(e){window.objeto=e,window.open("../comum/obtem_nponto.php?tpPto=A&Tipos=6,7","_blank","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,top=20,left=20,screenY=500,screenX=680,width=600,height=350")}function ObtemPontoAna(e){window.objeto=e,window.open("../comum/obtem_nponto.php?tpPto=A","_blank","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,top=20,left=20,screenY=500,screenX=680,width=600,height=350")}function ObtemPontoDig(e){window.objeto=e,window.open("../comum/obtem_nponto.php?tpPto=D","_blank","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,top=20,left=20,screenY=500,screenX=680,width=600,height=350")}function ToggleTreeNode(e){"none"===e.nextSibling.style.display?(0<e.childNodes.length&&"IMG"===e.childNodes.item(0).nodeName&&(e.childNodes.item(0).src="../comum/minus.gif"),e.nextSibling.style.display="block"):(0<e.childNodes.length&&"IMG"===e.childNodes.item(0).nodeName&&(e.childNodes.item(0).src="../comum/plus.gif"),e.nextSibling.style.display="none")}function leftTrim(e){if(null==e)return"";for(;" "==e.charAt(0)||10==e.charCodeAt(0);)e=e.substring(1,e.length);return e}function isInt(e){var t=parseInt(e);return!isNaN(t)&&(t=t.toString())==e}function printf(e){var t=Math.round,n=Math.abs,r=function(e,t,r){for(var i="",a=0;a<n(r);a++)i+=t;return 0<r?e+i:i+e},i=function(e,t,n,i){var a=function(e,t,n){return 0<=t?0<=e.indexOf(" ")?n=" "+n:0<=e.indexOf("+")&&(n="+"+n):n="-"+n,n},o=parseInt(t,10);if("0"==t.charAt(0)){var u=0;return(0<=e.indexOf(" ")||0<=e.indexOf("+"))&&u++,n.length<o-u&&(n=r(n,"0",n.length-(o-u))),a(e,i,n)}return(n=a(e,i,n)).length<o&&(n=0>e.indexOf("-")?r(n," ",n.length-o):r(n," ",o-n.length)),n},a=[];a.c=function(e,t,n,r){var i=String.fromCharCode;return"number"==typeof r?i(r):"string"==typeof r?r.charAt(0):""},a.d=function(e,t,n,r){return a.i(e,t,n,r)},a.u=function(e,t,r,i){return a.i(e,t,r,n(i))},a.i=function(e,t,a,o){var u=parseInt(a),s=n(o).toString().split(".")[0];return s.length<u&&(s=r(s," ",u-s.length)),i(e,t,s,o)},a.E=function(e,t,n,r){return a.e(e,t,n,r).toUpperCase()},a.e=function(e,t,r,a){return iPrecision=parseInt(r),isNaN(iPrecision)&&(iPrecision=6),rs=n(a).toExponential(iPrecision),0>rs.indexOf(".")&&0<=e.indexOf("#")&&(rs=rs.replace(/^(.*)(e.*)$/,"$1.$2")),i(e,t,rs,a)},a.f=function(e,t,r,a){return iPrecision=parseInt(r),isNaN(iPrecision)&&(iPrecision=6),rs=n(a).toFixed(iPrecision),0>rs.indexOf(".")&&0<=e.indexOf("#")&&(rs+="."),i(e,t,rs,a)},a.G=function(e,t,n,r){return a.g(e,t,n,r).toUpperCase()},a.g=function(e,t,r,a){return iPrecision=parseInt(r),absArg=n(a),rse=absArg.toExponential(),rsf=absArg.toFixed(6),isNaN(iPrecision)||(rsep=absArg.toExponential(iPrecision),rse=rsep.length<rse.length?rsep:rse,rsfp=absArg.toFixed(iPrecision),rsf=rsfp.length<rsf.length?rsfp:rsf),0>rse.indexOf(".")&&0<=e.indexOf("#")&&(rse=rse.replace(/^(.*)(e.*)$/,"$1.$2")),0>rsf.indexOf(".")&&0<=e.indexOf("#")&&(rsf+="."),rs=rse.length<rsf.length?rse:rsf,i(e,t,rs,a)},a.o=function(e,a,o,u){var s=parseInt(o),l=t(n(u)).toString(8);return l.length<s&&(l=r(l," ",s-l.length)),0<=e.indexOf("#")&&(l="0"+l),i(e,a,l,u)},a.X=function(e,t,n,r){return a.x(e,t,n,r).toUpperCase()},a.x=function(e,a,o,u){var s=parseInt(o);u=n(u);var l=t(u).toString(16);return l.length<s&&(l=r(l," ",s-l.length)),0<=e.indexOf("#")&&(l="0x"+l),i(e,a,l,u)},a.s=function(e,t,n,r){var a=parseInt(n),o=r;return o.length>a&&(o=o.substring(0,a)),i(e,t,o,0)},farr=e.split("%"),retstr=farr[0],fpRE=/^([-+ #]*)(\d*)\.?(\d*)([cdieEfFgGosuxX])(.*)$/;for(var o=1;o<farr.length;o++)fps=fpRE.exec(farr[o]),fps&&(null!=arguments[o]&&(retstr+=a[fps[4]](fps[1],fps[2],fps[3],arguments[o])),retstr+=fps[5]);return retstr}function createCookie(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="; expires="+r.toGMTString()}else i="";document.cookie=e+"="+t+i+"; path=/"}function readCookie(e){for(var t,n=e+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(t=r[i];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}!function(e){!function(e){!function(e){!function(e){!function(e){function t(e,t){e.grouped=t?function(){return t}:function(){return n(e)}}function n(e){for(var t,n=[],r=0,i=e.length;r<i;r++){var a=e[r];if(!t||t.identity!==a.identity){if(t={values:[]},a.identity){t.identity=a.identity;var o=a.source;void 0!==o.groupName?t.name=o.groupName:o.displayName&&(t.name=o.displayName)}n.push(t)}t.values.push(a)}return n}e.createValueColumns=function(e,n,r){void 0===e&&(e=[]);var i=e;return t(i),n&&(i.identityFields=n),r&&(i.source=r),i},e.setGrouped=t,e.groupValues=n}(e.DataViewTransform||(e.DataViewTransform={}))}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={})),function(e){!function(e){!function(e){!function(e){!function(e){function t(e,t){var n=e.roles;return n&&n[t]}e.getMeasureIndexOfRole=function(e,n){if(!e||!e.length)return-1;var r=e[0];if(r.values&&r.values.length>0)for(var i=0,a=r.values.length;i<a;++i){var o=r.values[i];if(o&&o.source&&t(o.source,n))return i}return-1},e.getCategoryIndexOfRole=function(e,n){if(e&&e.length)for(var r=0,i=e.length;r<i;r++)if(t(e[r].source,n))return r;return-1},e.hasRole=t,e.hasRoleInDataView=function(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&e.metadata.columns.some((function(e){return e.roles&&void 0!==e.roles[t]}))},e.hasRoleInValueColumn=function(e,t){return e&&e.source&&e.source.roles&&!0===e.source.roles[t]}}(e.DataRoleHelper||(e.DataRoleHelper={}))}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={})),function(e){!function(e){!function(e){!function(e){!function(e){function t(e,t,n){if(!e)return n;var r=e[t];return void 0===r?n:r}e.getValue=t,e.getFillColorByPropertyName=function(e,n,r){var i=t(e,n);return i&&i.solid?i.solid.color:r}}(e.DataViewObject||(e.DataViewObject={}))}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={})),function(e){!function(e){!function(e){!function(e){!function(t){function n(t,n,r){return t?e.DataViewObject.getValue(t[n.objectName],n.propertyName,r):r}t.getValue=n,t.getObject=function(e,t,n){return e&&e[t]?e[t]:n},t.getFillColor=function(e,t,r){var i=n(e,t);return i&&i.solid?i.solid.color:r},t.getCommonValue=function(e,t,r){var i=n(e,t,r);return i&&i.solid?i.solid.color:null==i||"object"==typeof i&&!i.solid?r:i}}(e.DataViewObjects||(e.DataViewObjects={}))}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={})),function(e){!function(t){!function(t){!function(t){var n=e.extensibility.utils.dataview.DataRoleHelper;!function(e){function t(e){var t=r(e);return null!=t&&!0===t.imageUrl}function r(e){return e&&e.type&&e.type.misc}e.categoryIsAlsoSeriesRole=function(e,t,r){if(e.categories&&e.categories.length>0){var i=e.categories[0];return i.source&&n.hasRole(i.source,t)&&n.hasRole(i.source,r)}return!1},e.getSeriesName=function(e){return void 0!==e.groupName?e.groupName:e.queryName},e.isImageUrlColumn=t,e.isWebUrlColumn=function(e){var t=r(e);return null!=t&&!0===t.webUrl},e.getMiscellaneousTypeDescriptor=r,e.hasImageUrlColumn=function(e){return!!(e&&e.metadata&&e.metadata.columns&&e.metadata.columns.length)&&e.metadata.columns.some((function(e){return!0===t(e)}))}}(t.converterHelper||(t.converterHelper={}))}(t.dataview||(t.dataview={}))}(t.utils||(t.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={})),function(e){!function(e){!function(e){!function(e){var t=function(){function t(){}return t.getDefault=function(){return new this},t.createPropertyIdentifier=function(e,t){return{objectName:e,propertyName:t}},t.parse=function(t){var n,r=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return r;for(var i in n=r.getProperties())for(var a in n[i]){var o=r[i][a];r[i][a]=e.DataViewObjects.getCommonValue(t.metadata.objects,n[i][a],o)}return r},t.isPropertyEnumerable=function(e){return!t.InnumerablePropertyPrefix.test(e)},t.enumerateObjectInstances=function(e,t){var n=e&&e[t.objectName];if(!n)return[];var r={objectName:t.objectName,selector:null,properties:{}};for(var i in n)n.hasOwnProperty(i)&&(r.properties[i]=n[i]);return{instances:[r]}},t.prototype.getProperties=function(){var e=this,n={};return Object.keys(this).forEach((function(r){if(t.isPropertyEnumerable(r)){var i=Object.keys(e[r]);n[r]={},i.forEach((function(e){t.isPropertyEnumerable(r)&&(n[r][e]=t.createPropertyIdentifier(r,e))}))}})),n},t}();t.InnumerablePropertyPrefix=/^_/,e.DataViewObjectsParser=t}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={})),function(){var e=Math.SQRT2,t=Math.abs,n=Math.floor,r=Math.LN2,i=Math.tan,a=Math.PI,o=Math.atan,u=Math.ceil,s=Math.LN10,l=Math.log,c=Math.min,f=Math.max,d=Math.pow,h=Math.sqrt,p=Math.atan2,x=Math.cos,g=Math.round,m=Math.sin,v=Math.exp,_=Math.asin,y=Math.acos;function b(e){return e&&(e.ownerDocument||e.document||e).documentElement}function w(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function S(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function k(e){return null===e?NaN:+e}function E(e){return!isNaN(e)}function A(e){return{left:function(t,n,r,i){for(3>arguments.length&&(r=0),4>arguments.length&&(i=t.length);r<i;){var a=r+i>>>1;0>e(t[a],n)?r=a+1:i=a}return r},right:function(t,n,r,i){for(3>arguments.length&&(r=0),4>arguments.length&&(i=t.length);r<i;){var a=r+i>>>1;0<e(t[a],n)?i=a:r=a+1}return r}}}function T(e){return e.length}function C(e){for(var t=1;e*t%1;)t*=10;return t}function D(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function N(){this._=Object.create(null)}function F(e){return"__proto__"==(e+="")||"\0"===e[0]?"\0"+e:e}function O(e){return"\0"===(e+="")[0]?e.slice(1):e}function M(e){return F(e)in this._}function L(e){return(e=F(e))in this._&&delete this._[e]}function P(){var e=[];for(var t in this._)e.push(O(t));return e}function z(){var e=0;for(var t in this._)++e;return e}function I(){for(var e in this._)return!1;return!0}function R(){this._=Object.create(null)}function G(e){return e}function j(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function W(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n,r=0,i=Wa.length;r<i;++r)if((n=Wa[r]+t)in e)return n}function B(){}function U(){}function V(e){function t(){for(var t,r=n,i=-1,a=r.length;++i<a;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new N;return t.on=function(t,i){var a,o=r.get(t);return 2>arguments.length?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function q(){Na.event.preventDefault()}function H(){for(var e,t=Na.event;e=t.sourceEvent;)t=e;return t}function $(e){for(var t=new U,n=0,r=arguments.length;++n<r;)t[arguments[n]]=V(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=Na.event;i.target=e,Na.event=i,t[i.type].apply(n,r)}finally{Na.event=a}}},t}function Y(e){return Ua(e,$a),e}function X(e){return"function"==typeof e?e:function(){return Va(e,this)}}function Z(e){return"function"==typeof e?e:function(){return qa(e,this)}}function J(e,t){return e=Na.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function K(e){return e.trim().replace(/\s+/g," ")}function Q(e){return new RegExp("(?:^|\\s+)"+Na.requote(e)+"(?:\\s+|$)","g")}function ee(e){return(e+"").trim().split(/^|\s+/)}function te(e,t){var n=(e=ee(e).map(ne)).length;return"function"==typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function ne(e){var t=Q(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,!t.test(i)&&n.setAttribute("class",K(i+" "+e))):n.setAttribute("class",K(i.replace(t," ")))}}function re(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function ie(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function ae(e){return"function"==typeof e?e:(e=Na.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===n&&"http://www.w3.org/1999/xhtml"===t.documentElement.namespaceURI?t.createElement(e):t.createElementNS(n,e)}}function oe(){var e=this.parentNode;e&&e.removeChild(this)}function ue(e){return{__data__:e}}function se(e){return function(){return Ha(this,e)}}function le(e){return arguments.length||(e=S),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function ce(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,u=a.length;o<u;o++)(i=a[o])&&t(i,o,n);return e}function fe(e){return Ua(e,Xa),e}function de(e){var t,n;return function(r,i,a){var o,u=e[a].update,s=u.length;for(a!=n&&(n=a,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<s;);return o}}function he(e,t,n){function r(){var t=this[i];t&&(this.removeEventListener(e,t,t.$),delete this[i])}var i="__on"+e,a=e.indexOf("."),o=pe;0<a&&(e=e.slice(0,a));var u=Za.get(e);return u&&(e=u,o=xe),a?t?function(){var a=o(t,Oa(arguments));r.call(this),this.addEventListener(e,this[i]=a,a.$=n),a._=t}:r:t?B:function(){var t,n=new RegExp("^__on([^.]+)"+Na.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}}function pe(e,t){return function(n){var r=Na.event;Na.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{Na.event=r}}}function xe(e,t){var n=pe(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function ge(e){var t=".dragsuppress-"+ ++Ka,n="click"+t,r=Na.select(w(e)).on("touchmove"+t,q).on("dragstart"+t,q).on("selectstart"+t,q);if(null==Ja&&(Ja=!("onselectstart"in e)&&W(e.style,"userSelect")),Ja){var i=b(e).style,a=i[Ja];i[Ja]="none"}return function(e){if(r.on(t,null),Ja&&(i[Ja]=a),e){var o=function(){r.on(n,null)};r.on(n,(function(){q(),o()}),!0),setTimeout(o,0)}}}function me(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Qa){var i=w(e);if(i.scrollX||i.scrollY){var a=(n=Na.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Qa=!(a.f||a.e),n.remove()}}return Qa?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}function ve(){return Na.event.changedTouches[0].identifier}function _e(e){return 0<e?1:0>e?-1:0}function ye(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function be(e){return 1<e?0:-1>e?no:y(e)}function we(e){return 1<e?io:-1>e?-io:_(e)}function Se(e){return((e=v(e))+1/e)/2}function ke(e){return(e=m(e/2))*e}function Ee(){}function Ae(e,t,n){return this instanceof Ae?(this.h=+e,this.s=+t,void(this.l=+n)):2>arguments.length?e instanceof Ae?new Ae(e.h,e.s,e.l):je(""+e,We,Ae):new Ae(e,t,n)}function Te(e,t,n){function r(e){return g(255*function(e){return 360<e?e-=360:0>e&&(e+=360),60>e?i+(a-i)*e/60:180>e?a:240>e?i+(a-i)*(240-e)/60:i}(e))}var i,a;return e=isNaN(e)?0:0>(e%=360)?e+360:e,t=isNaN(t)?0:0>t?0:1<t?1:t,i=2*(n=0>n?0:1<n?1:n)-(a=.5>=n?n*(1+t):n+t-n*t),new ze(r(e+120),r(e),r(e-120))}function Ce(e,t,n){return this instanceof Ce?(this.h=+e,this.c=+t,void(this.l=+n)):2>arguments.length?e instanceof Ce?new Ce(e.h,e.c,e.l):Oe(e instanceof Ne?e.l:(e=Be((e=Na.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ce(e,t,n)}function De(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ne(n,x(e*=ao)*t,m(e)*t)}function Ne(e,t,n){return this instanceof Ne?(this.l=+e,this.a=+t,void(this.b=+n)):2>arguments.length?e instanceof Ne?new Ne(e.l,e.a,e.b):e instanceof Ce?De(e.h,e.c,e.l):Be((e=ze(e)).r,e.g,e.b):new Ne(e,t,n)}function Fe(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return new ze(Pe(3.2404542*(i=Me(i)*xo)-1.5371385*(r=1*Me(r))-.4985314*(a=Me(a)*go)),Pe(-.969266*i+1.8760108*r+.041556*a),Pe(.0556434*i-.2040259*r+1.0572252*a))}function Oe(e,t,n){return 0<e?new Ce(p(n,t)*oo,h(t*t+n*n),e):new Ce(NaN,NaN,e)}function Me(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function Le(e){return.008856<e?d(e,1/3):7.787037*e+4/29}function Pe(e){return g(255*(.00304>=e?12.92*e:1.055*d(e,1/2.4)-.055))}function ze(e,t,n){return this instanceof ze?(this.r=~~e,this.g=~~t,void(this.b=~~n)):2>arguments.length?e instanceof ze?new ze(e.r,e.g,e.b):je(""+e,ze,Te):new ze(e,t,n)}function Ie(e){return new ze(e>>16,255&e>>8,255&e)}function Re(e){return Ie(e)+""}function Ge(e){return 16>e?"0"+f(0,e).toString(16):c(255,e).toString(16)}function je(e,t,n){var r,i,a,o=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Ve(i[0]),Ve(i[1]),Ve(i[2]))}return(a=_o.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,u=240&a,u|=u>>4,s=15&a,s|=s<<4):7===e.length&&(o=(16711680&a)>>16,u=(65280&a)>>8,s=255&a)),t(o,u,s))}function We(e,t,n){var r,i,a=c(e/=255,t/=255,n/=255),o=f(e,t,n),u=o-a,s=(o+a)/2;return u?(i=.5>s?u/(o+a):u/(2-o-a),r=e==o?(t-n)/u+(t<n?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=NaN,i=0<s&&1>s?0:r),new Ae(r,i,s)}function Be(e,t,n){var r=Le((.4124564*(e=Ue(e))+.3575761*(t=Ue(t))+.1804375*(n=Ue(n)))/xo),i=Le((.2126729*e+.7151522*t+.072175*n)/1);return Ne(116*i-16,500*(r-i),200*(i-Le((.0193339*e+.119192*t+.9503041*n)/go)))}function Ue(e){return.04045>=(e/=255)?e/12.92:d((e+.055)/1.055,2.4)}function Ve(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?g(2.55*t):t}function qe(e){return"function"==typeof e?e:function(){return e}}function He(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),$e(t,n,e,r)}}function $e(e,t,n,r){function i(){var e,t=s.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(s)||200<=t&&300>t||304===t){try{e=n.call(a,s)}catch(e){return void o.error.call(a,e)}o.load.call(a,e)}else o.error.call(a,s)}var a={},o=Na.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,l=null;return this.XDomainRequest&&!("withCredentials"in s)&&/^(http(s)?:)?\/\//.test(e)&&(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=i:s.onreadystatechange=function(){3<s.readyState&&i()},s.onprogress=function(e){var t=Na.event;Na.event=e;try{o.progress.call(a,s)}finally{Na.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),2>arguments.length?u[e]:(null==t?delete u[e]:u[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(l=e,a):l},a.response=function(e){return n=e,a},["get","post"].forEach((function(e){a[e]=function(){return a.send.apply(a,[e].concat(Oa(arguments)))}})),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),s.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),s.setRequestHeader)for(var c in u)s.setRequestHeader(c,u[c]);return null!=t&&s.overrideMimeType&&s.overrideMimeType(t),null!=l&&(s.responseType=l),null!=i&&a.on("error",i).on("load",(function(e){i(null,e)})),o.beforesend.call(a,s),s.send(null==r?null:r),a},a.abort=function(){return s.abort(),a},Na.rebind(a,o,"on"),null==r?a:a.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(r))}function Ye(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,a={c:e,t:i,n:null};return bo?bo.n=a:yo=a,bo=a,wo||(So=clearTimeout(So),wo=1,ko(Xe)),a}function Xe(){var e=Ze(),t=Je()-e;24<t?(isFinite(t)&&(clearTimeout(So),So=setTimeout(Xe,t)),wo=0):(wo=1,ko(Xe))}function Ze(){for(var e=Date.now(),t=yo;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Je(){for(var e,t=yo,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:yo=t.n;return bo=e,n}function Ke(e,t){return t-(e?u(l(e)/s):1)}function Qe(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,a=r&&n?function(e,t){for(var i=e.length,a=[],o=0,u=r[0],s=0;0<i&&0<u&&(s+u+1>t&&(u=f(1,t-s)),a.push(e.substring(i-=u,i+u)),!((s+=u+1)>t));)u=r[o=(o+1)%r.length];return a.reverse().join(n)}:G;return function(e){var n=Ao.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"-",s=n[4]||"",l=n[5],d=+n[6],h=n[7],p=n[8],x=n[9],g=1,m="",v="",_=!1,y=!0;switch(p&&(p=+p.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),x){case"n":h=!0,x="g";break;case"%":g=100,v="%",x="f";break;case"p":g=100,v="%",x="r";break;case"b":case"o":case"x":case"X":"#"===s&&(m="0"+x.toLowerCase());case"c":y=!1;case"d":_=!0,p=0;break;case"s":g=-1,x="r"}"$"===s&&(m=i[0],v=i[1]),"r"!=x||p||(x="g"),null!=p&&("g"==x?p=f(1,c(21,p)):("e"==x||"f"==x)&&(p=f(0,c(20,p)))),x=To.get(x)||et;var b=l&&h;return function(e){var n=v;if(_&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===u?"":u;if(0>g){var s=Na.formatPrefix(e,p);e=s.scale(e),n=s.symbol+v}else e*=g;var c,f,w=(e=x(e,p)).lastIndexOf(".");if(0>w){var S=y?e.lastIndexOf("e"):-1;0>S?(c=e,f=""):(c=e.substring(0,S),f=e.substring(S))}else c=e.substring(0,w),f=t+e.substring(w+1);!l&&h&&(c=a(c,1/0));var k=m.length+c.length+f.length+(b?0:i.length),E=k<d?Array(k=d-k+1).join(r):"";return b&&(c=a(E+c,E.length?d-f.length:1/0)),i+=m,e=c+f,("<"===o?i+e+E:">"===o?E+i+e:"^"===o?E.substring(0,k>>=1)+i+e+E.substring(k):i+(b?e:E+e))+n}}}function et(e){return e+""}function tt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function nt(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new Do(n-1)),1),n}function a(e,n){return t(e=new Do(+e),n),e}function o(e,r,a){var o=i(e),u=[];if(1<a)for(;o<r;)n(o)%a||u.push(new Date(+o)),t(o,1);else for(;o<r;)u.push(new Date(+o)),t(o,1);return u}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var u=e.utc=rt(e);return u.floor=u,u.round=rt(r),u.ceil=rt(i),u.offset=rt(a),u.range=function(e,t,n){try{Do=tt;var r=new tt;return r._=e,o(r,t,n)}finally{Do=Date}},e}function rt(e){return function(t,n){try{Do=tt;var r=new tt;return r._=t,e(r,n)._}finally{Do=Date}}}function it(e){function t(e){function t(t){for(var n,i,a,o=[],u=-1,s=0;++u<r;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(i=Fo[n=e.charAt(++u)])&&(n=e.charAt(++u)),(a=y[n])&&(n=a(t,null==i?"e"===n?" ":"0":i)),o.push(n),s=u+1);return o.push(e.slice(s,u)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(r,e,t,0)!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&Do!==tt,a=new(i?tt:Do);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?(!("w"in r)&&(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(0|r.Z/100),r.M+r.Z%100,r.S,r.L),i?a._:a},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,a,o,u=0,s=t.length,l=n.length;u<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(u++))){if(o=t.charAt(u++),!(a=b[o in Fo?t.charAt(u++):o])||0>(r=a(e,n,r)))return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var r=e.dateTime,i=e.date,a=e.time,o=e.periods,u=e.days,s=e.shortDays,l=e.months,c=e.shortMonths;t.utc=function(e){function n(e){try{var t=new(Do=tt);return t._=e,r(t)}finally{Do=Date}}var r=t(e);return n.parse=function(e){try{Do=tt;var t=r.parse(e);return t&&t._}finally{Do=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=St;var f=Na.map(),d=ot(u),h=ut(u),p=ot(s),x=ut(s),g=ot(l),m=ut(l),v=ot(c),_=ut(c);o.forEach((function(e,t){f.set(e.toLowerCase(),t)}));var y={a:function(e){return s[e.getDay()]},A:function(e){return u[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:t(r),d:function(e,t){return at(e.getDate(),t,2)},e:function(e,t){return at(e.getDate(),t,2)},H:function(e,t){return at(e.getHours(),t,2)},I:function(e,t){return at(e.getHours()%12||12,t,2)},j:function(e,t){return at(1+Co.dayOfYear(e),t,3)},L:function(e,t){return at(e.getMilliseconds(),t,3)},m:function(e,t){return at(e.getMonth()+1,t,2)},M:function(e,t){return at(e.getMinutes(),t,2)},p:function(e){return o[+(12<=e.getHours())]},S:function(e,t){return at(e.getSeconds(),t,2)},U:function(e,t){return at(Co.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return at(Co.mondayOfYear(e),t,2)},x:t(i),X:t(a),y:function(e,t){return at(e.getFullYear()%100,t,2)},Y:function(e,t){return at(e.getFullYear()%1e4,t,4)},Z:bt,"%":function(){return"%"}},b={a:function(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){d.lastIndex=0;var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,r){return n(e,y.c.toString(),t,r)},d:xt,e:xt,H:mt,I:mt,j:gt,L:yt,m:pt,M:vt,p:function(e,t,n){var r=f.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:_t,U:lt,w:st,W:ct,x:function(e,t,r){return n(e,y.x.toString(),t,r)},X:function(e,t,r){return n(e,y.X.toString(),t,r)},y:dt,Y:ft,Z:ht,"%":wt};return t}function at(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?Array(n-a+1).join(t)+i:i)}function ot(e){return new RegExp("^(?:"+e.map(Na.requote).join("|")+")","i")}function ut(e){for(var t=new N,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function st(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function lt(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function ct(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function ft(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dt(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+2));return r?(e.y=function(e){return e+(68<e?1900:2e3)}(+r[0]),n+r[0].length):-1}function ht(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function pt(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function xt(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function gt(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function mt(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function vt(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function _t(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function yt(e,t,n){Oo.lastIndex=0;var r=Oo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function bt(e){var t=e.getTimezoneOffset(),n=0<t?"-":"+",r=0|ja(t)/60,i=ja(t)%60;return n+at(r,"0",2)+at(i,"0",2)}function wt(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function St(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function kt(){}function Et(e,t,n){var r=n.s=e+t,i=r-e;n.t=e-(r-i)+(t-i)}function At(e,t){e&&Io.hasOwnProperty(e.type)&&Io[e.type](e,t)}function Tt(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ct(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Tt(e[n],t,1);t.polygonEnd()}function Dt(){function e(e,t){var n=(e*=ao)-r,o=0<=n?1:-1,u=o*n,s=x(t=t*ao/2+no/4),l=m(t),c=a*l,f=i*s+c*x(u),d=c*o*m(u);Go.add(p(d,f)),r=e,i=s,a=l}var t,n,r,i,a;jo.point=function(o,u){jo.point=e,r=(t=o)*ao,i=x(u=(n=u)*ao/2+no/4),a=m(u)},jo.lineEnd=function(){e(t,n)}}function Nt(e){var t=e[0],n=e[1],r=x(n);return[r*x(t),r*m(t),m(n)]}function Ft(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ot(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Mt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Lt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Pt(e){var t=h(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function zt(e){return[p(e[1],e[0]),we(e[2])]}function It(e,t){return ja(e[0]-t[0])<eo&&ja(e[1]-t[1])<eo}function Rt(e,t){e*=ao;var n=x(t*=ao);Gt(n*x(e),n*m(e),m(t))}function Gt(e,t,n){++Wo,Uo+=(e-Uo)/Wo,Vo+=(t-Vo)/Wo,qo+=(n-qo)/Wo}function jt(){function e(e,i){e*=ao;var a=x(i*=ao),o=a*x(e),u=a*m(e),s=m(i),l=p(h((l=n*s-r*u)*l+(l=r*o-t*s)*l+(l=t*u-n*o)*l),t*o+n*u+r*s);Bo+=l,Ho+=l*(t+(t=o)),$o+=l*(n+(n=u)),Yo+=l*(r+(r=s)),Gt(t,n,r)}var t,n,r;Ko.point=function(i,a){i*=ao;var o=x(a*=ao);t=o*x(i),n=o*m(i),r=m(a),Ko.point=e,Gt(t,n,r)}}function Wt(){Ko.point=Rt}function Bt(){function e(e,t){e*=ao;var n=x(t*=ao),o=n*x(e),u=n*m(e),s=m(t),l=i*s-a*u,c=a*o-r*s,f=r*u-i*o,d=h(l*l+c*c+f*f),g=r*o+i*u+a*s,v=d&&-be(g)/d,_=p(d,g);Xo+=v*l,Zo+=v*c,Jo+=v*f,Bo+=_,Ho+=_*(r+(r=o)),$o+=_*(i+(i=u)),Yo+=_*(a+(a=s)),Gt(r,i,a)}var t,n,r,i,a;Ko.point=function(o,u){t=o,n=u,Ko.point=e,o*=ao;var s=x(u*=ao);r=s*x(o),i=s*m(o),a=m(u),Gt(r,i,a)},Ko.lineEnd=function(){e(t,n),Ko.lineEnd=Wt,Ko.point=Rt}}function Ut(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Vt(){return!0}function qt(e,t,n,r,i){var a=[],o=[];if(e.forEach((function(e){if(!(0>=(t=e.length-1))){var t,n=e[0],r=e[t];if(It(n,r)){i.lineStart();for(var u=0;u<t;++u)i.point((n=e[u])[0],n[1]);return void i.lineEnd()}var s=new $t(n,e,null,!0),l=new $t(n,null,s,!1);s.o=l,a.push(s),o.push(l),s=new $t(r,e,null,!1),l=new $t(r,null,s,!0),s.o=l,a.push(s),o.push(l)}})),o.sort(t),Ht(a),Ht(o),a.length){for(var u=0,s=n,l=o.length;u<l;++u)o[u].e=s=!s;for(var c,f,d=a[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(u=0,l=c.length;u<l;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(u=(c=h.p.z).length-1;0<=u;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Ht(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function $t(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yt(e,t,n,r){return function(i,a){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function u(e,t){var n=i(e,t);g.point(n[0],n[1])}function s(){v.point=u,g.lineStart()}function l(){v.point=o,g.lineEnd()}function c(e,t){x.push([e,t]);var n=i(e,t);y.point(n[0],n[1])}function f(){y.lineStart(),x=[]}function d(){c(x[0][0],x[0][1]),y.lineEnd();var e,t=y.clean(),n=_.buffer(),r=n.length;if(x.pop(),p.push(x),x=null,r){if(1&t){var i,o=-1;if(0<(r=(e=n[0]).length-1)){for(b||(a.polygonStart(),b=!0),a.lineStart();++o<r;)a.point((i=e[o])[0],i[1]);a.lineEnd()}return}1<r&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Xt))}}var h,p,x,g=t(a),m=i.invert(r[0],r[1]),v={point:o,lineStart:s,lineEnd:l,polygonStart:function(){v.point=c,v.lineStart=f,v.lineEnd=d,h=[],p=[]},polygonEnd:function(){v.point=o,v.lineStart=s,v.lineEnd=l,h=Na.merge(h);var e=Kt(m,p);h.length?(!b&&(a.polygonStart(),b=!0),qt(h,Jt,e,n,a)):e&&(!b&&(a.polygonStart(),b=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),h=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},_=Zt(),y=t(_),b=!1;return v}}function Xt(e){return 1<e.length}function Zt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:B,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function Jt(e,t){return(0>(e=e.x)[0]?e[1]-io-eo:io-e[1])-(0>(t=t.x)[0]?t[1]-io-eo:io-t[1])}function Kt(e,t){var n=e[0],r=e[1],i=[m(n),-x(n),0],a=0,o=0;Go.reset();for(var u=0,s=t.length;u<s;++u){var l=t[u],c=l.length;if(c)for(var f=l[0],d=f[0],h=f[1]/2+no/4,g=m(h),v=x(h),_=1;;){_===c&&(_=0);var y=(e=l[_])[0],b=e[1]/2+no/4,w=m(b),S=x(b),k=y-d,E=0<=k?1:-1,A=E*k,T=A>no,C=g*w;if(Go.add(p(C*E*m(A),v*S+C*x(A))),a+=T?k+E*ro:k,T^d>=n^y>=n){var D=Ot(Nt(f),Nt(e));Pt(D);var N=Ot(i,D);Pt(N);var F=(T^0<=k?-1:1)*we(N[2]);(r>F||r===F&&(D[0]||D[1]))&&(o+=T^0<=k?1:-1)}if(!_++)break;d=y,g=w,v=S,f=e}}return(a<-eo||a<eo&&Go<-eo)^1&o}function Qt(e){function t(e,t){return x(e)*x(t)>i}function n(e,t,n){var r=[1,0,0],a=Ot(Nt(e),Nt(t)),o=Ft(a,a),u=a[0],s=o-u*u;if(!s)return!n&&e;var l=Ot(r,a),c=Lt(r,i*o/s);Mt(c,Lt(a,-i*u/s));var f=l,d=Ft(c,f),p=Ft(f,f),x=d*d-p*(Ft(c,c)-1);if(!(0>x)){var g=h(x),m=Lt(f,(-d-g)/p);if(Mt(m,c),m=zt(m),!n)return m;var v,_=e[0],y=t[0],b=e[1],w=t[1];y<_&&(v=_,_=y,y=v);var S=y-_,k=ja(S-no)<eo;if(!k&&w<b&&(v=b,b=w,w=v),k||S<eo?k?0<b+w^m[1]<(ja(m[0]-_)<eo?b:w):b<=m[1]&&m[1]<=w:S>no^(_<=m[0]&&m[0]<=y)){var E=Lt(f,(-d+g)/p);return Mt(E,c),[m,zt(E)]}}}function r(t,n){var r=a?e:no-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var i=x(e),a=0<i,o=ja(i)>eo;return Yt(t,(function(e){var i,u,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,d){var h,p=[f,d],x=t(f,d),g=a?x?0:r(f,d):x?r(f+(0>f?no:-no),d):0;if(!i&&(l=s=x)&&e.lineStart(),x!==s&&(h=n(i,p),(It(i,h)||It(p,h))&&(p[0]+=eo,p[1]+=eo,x=t(p[0],p[1]))),x!==s)c=0,x?(e.lineStart(),h=n(p,i),e.point(h[0],h[1])):(h=n(i,p),e.point(h[0],h[1]),e.lineEnd()),i=h;else if(o&&i&&a^x){var m;!(g&u)&&(m=n(p,i,!0))&&(c=0,a?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!x||i&&It(i,p)||e.point(p[0],p[1]),i=p,s=x,u=g},lineEnd:function(){s&&e.lineEnd(),i=null},clean:function(){return c|(l&&s)<<1}}}),An(e,6*ao),a?[0,-e]:[-no,e-no])}function en(e,t,n,r){return function(i){var a,o=i.a,u=i.b,s=o.x,l=o.y,c=0,f=1,d=u.x-s,h=u.y-l;if(a=e-s,d||!(0<a)){if(a/=d,0>d){if(a<c)return;a<f&&(f=a)}else if(0<d){if(a>f)return;a>c&&(c=a)}if(a=n-s,d||!(0>a)){if(a/=d,0>d){if(a>f)return;a>c&&(c=a)}else if(0<d){if(a<c)return;a<f&&(f=a)}if(a=t-l,h||!(0<a)){if(a/=h,0>h){if(a<c)return;a<f&&(f=a)}else if(0<h){if(a>f)return;a>c&&(c=a)}if(a=r-l,h||!(0>a)){if(a/=h,0>h){if(a>f)return;a>c&&(c=a)}else if(0<h){if(a<c)return;a<f&&(f=a)}return 0<c&&(i.a={x:s+c*d,y:l+c*h}),1>f&&(i.b={x:s+f*d,y:l+f*h}),i}}}}}}function tn(e,t,n,r){function i(r,i){return ja(r[0]-e)<eo?0<i?0:3:ja(r[0]-n)<eo?0<i?2:1:ja(r[1]-t)<eo?0<i?1:0:0<i?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n===r?0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]:n-r}return function(u){function s(a,u,s,l){var c=0,f=0;if(null==a||(c=i(a,s))!==(f=i(u,s))||0>o(a,u)^0<s)do{l.point(0===c||3===c?e:n,1<c?r:t)}while((c=(c+s+4)%4)!==f);else l.point(u[0],u[1])}function l(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function d(e,t){l(e,t)&&u.point(e,t)}function h(e,t){var n=l(e=f(-1e9,c(1e9,e)),t=f(-1e9,c(1e9,t)));if(x&&g.push([e,t]),S)m=e,v=t,_=n,S=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&w)u.point(e,t);else{var r={a:{x:y,y:b},b:{x:e,y:t}};T(r)?(!w&&(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),!n&&u.lineEnd(),k=!1):n&&(u.lineStart(),u.point(e,t),k=!1)}y=e,b=t,w=n}var p,x,g,m,v,_,y,b,w,S,k,E=u,A=Zt(),T=en(e,t,n,r),C={point:d,lineStart:function(){C.point=h,x&&x.push(g=[]),S=!0,w=!1,y=b=NaN},lineEnd:function(){p&&(h(m,v),_&&w&&A.rejoin(),p.push(A.buffer())),C.point=d,w&&u.lineEnd()},polygonStart:function(){u=A,p=[],x=[],k=!0},polygonEnd:function(){u=E,p=Na.merge(p);var t=function(e){for(var t=0,n=x.length,r=e[1],i=0;i<n;++i)for(var a,o=1,u=x[i],s=u.length,l=u[0];o<s;++o)a=u[o],l[1]<=r?a[1]>r&&0<ye(l,a,e)&&++t:a[1]<=r&&0>ye(l,a,e)&&--t,l=a;return 0!=t}([e,r]),n=k&&t,i=p.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),i&&qt(p,a,t,s,u),u.polygonEnd()),p=x=g=null}};return C}}function nn(e){var t=0,n=no/3,r=vn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*no/180,n=e[1]*no/180):[t/no*180,n/no*180]},i}function rn(e,t){function n(e,t){var n=h(a-2*i*m(t))/i;return[n*m(e*=i),o-n*x(e)]}var r=m(e),i=(r+m(t))/2,a=1+r*(2*i-r),o=h(a)/i;return n.invert=function(e,t){var n=o-t;return[p(e,n)/i,we((a-(e*e+n*n)*i*i)/(2*i))]},n}function an(){function e(e,t){tu+=i*e-r*t,r=e,i=t}var t,n,r,i;ou.point=function(a,o){ou.point=e,t=r=a,n=i=o},ou.lineEnd=function(){e(t,n)}}function on(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var a=un(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return a=un(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function un(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function sn(e,t){Uo+=e,Vo+=t,++qo}function ln(){function e(e,r){var i=e-t,a=r-n,o=h(i*i+a*a);Ho+=o*(t+e)/2,$o+=o*(n+r)/2,Yo+=o,sn(t=e,n=r)}var t,n;su.point=function(r,i){su.point=e,sn(t=r,n=i)}}function cn(){su.point=sn}function fn(){function e(e,t){var n=e-r,a=t-i,o=h(n*n+a*a);Ho+=o*(r+e)/2,$o+=o*(i+t)/2,Yo+=o,Xo+=(o=i*e-r*t)*(r+e),Zo+=o*(i+t),Jo+=3*o,sn(r=e,i=t)}var t,n,r,i;su.point=function(a,o){su.point=e,sn(t=r=a,n=i=o)},su.lineEnd=function(){e(t,n)}}function dn(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,ro)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function a(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=a},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:B};return u}function hn(e){function t(e){return(u?r:n)(e)}function n(t){return gn(t,(function(n,r){n=e(n,r),t.point(n[0],n[1])}))}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){v=NaN,S.point=a,t.lineStart()}function a(n,r){var a=Nt([n,r]),o=e(n,r);i(v,_,m,y,b,w,v=o[0],_=o[1],m=n,y=a[0],b=a[1],w=a[2],u,t),t.point(v,_)}function o(){S.point=n,t.lineEnd()}function s(){r(),S.point=l,S.lineEnd=c}function l(e,t){a(f=e,t),d=v,h=_,p=y,x=b,g=w,S.point=a}function c(){i(v,_,m,y,b,w,d,h,f,p,x,g,u,t),S.lineEnd=o,o()}var f,d,h,p,x,g,m,v,_,y,b,w,S={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=s},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function i(t,n,r,u,s,l,c,f,d,x,g,m,v,y){var b=c-t,w=f-n,S=b*b+w*w;if(S>4*a&&v--){var k=u+x,E=s+g,A=l+m,T=h(k*k+E*E+A*A),C=_(A/=T),D=ja(ja(A)-1)<eo||ja(r-d)<eo?(r+d)/2:p(E,k),N=e(D,C),F=N[0],O=N[1],M=F-t,L=O-n,P=w*M-b*L;(P*P/S>a||.3<ja((b*M+w*L)/S-.5)||u*x+s*g+l*m<o)&&(i(t,n,r,u,s,l,F,O,D,k/=T,E/=T,A,v,y),y.point(F,O),i(F,O,D,k,E,A,c,f,d,x,g,m,v,y))}}var a=.5,o=x(30*ao),u=16;return t.precision=function(e){return arguments.length?(u=0<(a=e*e)&&16,t):h(a)},t}function pn(e){var t=hn((function(t,n){return e([t*oo,n*oo])}));return function(e){return _n(t(e))}}function xn(e){this.stream=e}function gn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function mn(e){return vn((function(){return e}))()}function vn(e){function t(e){return[(e=u(e[0]*ao,e[1]*ao))[0]*d+s,l-e[1]*d]}function n(e){return(e=u.invert((e[0]-s)/d,(l-e[1])/d))&&[e[0]*oo,e[1]*oo]}function r(){u=Ut(o=wn(m,v,_),a);var e=a(x,g);return s=h-e[0]*d,l=p+e[1]*d,i()}function i(){return c&&(c.valid=!1,c=null),t}var a,o,u,s,l,c,f=hn((function(e,t){return[(e=a(e,t))[0]*d+s,l-e[1]*d]})),d=150,h=480,p=250,x=0,g=0,m=0,v=0,_=0,y=Qo,b=G,w=null,S=null;return t.stream=function(e){return c&&(c.valid=!1),(c=_n(y(o,f(b(e))))).valid=!0,c},t.clipAngle=function(e){return arguments.length?(y=null==e?(w=e,Qo):Qt((w=+e)*ao),i()):w},t.clipExtent=function(e){return arguments.length?(S=e,b=e?tn(e[0][0],e[0][1],e[1][0],e[1][1]):G,i()):S},t.scale=function(e){return arguments.length?(d=+e,r()):d},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],r()):[h,p]},t.center=function(e){return arguments.length?(x=e[0]%360*ao,g=e[1]%360*ao,r()):[x*oo,g*oo]},t.rotate=function(e){return arguments.length?(m=e[0]%360*ao,v=e[1]%360*ao,_=2<e.length?e[2]%360*ao:0,r()):[m*oo,v*oo,_*oo]},Na.rebind(t,f,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function _n(e){return gn(e,(function(t,n){e.point(t*ao,n*ao)}))}function yn(e,t){return[e,t]}function bn(e,t){return[e>no?e-ro:e<-no?e+ro:e,t]}function wn(e,t,n){return e?t||n?Ut(kn(e),En(t,n)):kn(e):t||n?En(t,n):bn}function Sn(e){return function(t,n){return[(t+=e)>no?t-ro:t<-no?t+ro:t,n]}}function kn(e){var t=Sn(e);return t.invert=Sn(-e),t}function En(e,t){function n(e,t){var n=x(t),u=x(e)*n,s=m(e)*n,l=m(t),c=l*r+u*i;return[p(s*a-c*o,u*r-l*i),we(c*a+s*o)]}var r=x(e),i=m(e),a=x(t),o=m(t);return n.invert=function(e,t){var n=x(t),u=x(e)*n,s=m(e)*n,l=m(t),c=l*a-s*o;return[p(s*a+l*o,u*r+c*i),we(c*r-u*i)]},n}function An(e,t){var n=x(e),r=m(e);return function(i,a,o,u){var s=o*t;null==i?(i=e+o*ro,a=e-.5*s):(i=Tn(n,i),a=Tn(n,a),(0<o?i<a:i>a)&&(i+=o*ro));for(var l,c=i;0<o?c>a:c<a;c-=s)u.point((l=zt([n,-r*x(c),-r*m(c)]))[0],l[1])}}function Tn(e,t){var n=Nt(t);n[0]-=e,Pt(n);var r=be(-n[1]);return((0>-n[2]?-r:r)+2*a-eo)%(2*a)}function Cn(e,t,n){var r=Na.range(e,t-eo,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Dn(e,t,n){var r=Na.range(e,t-eo,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Nn(e){return e.source}function Fn(e){return e.target}function On(e,t){function n(t,n){var r=x(t),i=x(n),a=e(r*i);return[a*i*m(t),a*m(n)]}return n.invert=function(e,n){var r=h(e*e+n*n),i=t(r),a=m(i),o=x(i);return[p(e*a,r*o),_(r&&n*a/r)]},n}function Mn(e,t){function n(e,t){0<s?t<-io+eo&&(t=-io+eo):t>io-eo&&(t=io-eo);var n=s/d(a(t),u);return[n*m(u*e),s-n*x(u*e)]}var r=x(e),a=function(e){return i(no/4+e/2)},u=e===t?m(e):l(r/x(t))/l(a(t)/a(e)),s=r*d(a(e),u)/u;return u?(n.invert=function(e,t){var n=s-t,r=_e(u)*h(e*e+n*n);return[p(e,n)/u,2*o(d(s/r,1/u))-io]},n):Pn}function Ln(e,t){function n(e,t){var n=a-t;return[n*m(i*e),a-n*x(i*e)]}var r=x(e),i=e===t?m(e):(r-x(t))/(t-e),a=r/i+e;return ja(i)<eo?yn:(n.invert=function(e,t){var n=a-t;return[p(e,n)/i,a-_e(i)*h(e*e+n*n)]},n)}function Pn(e,t){return[e,l(i(no/4+t/2))]}function zn(e){var t,n=mn(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o!==n)t&&(o=null);else if(t=null==e){var u=no*r(),s=i();a([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}return o},n.clipExtent(null)}function In(e,t){return[l(i(no/4+t/2)),-e]}function Rn(e){return e[0]}function Gn(e){return e[1]}function jn(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;1<r&&0>=ye(e[n[r-2]],e[n[r-1]],e[i]);)--r;n[r++]=i}return n.slice(0,r)}function Wn(e,t){return e[0]-t[0]||e[1]-t[1]}function Bn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Un(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,u=r[0]-a,s=e[1],l=n[1],c=t[1]-s,f=r[1]-l,d=(u*(s-l)-f*(i-a))/(f*o-u*c);return[i+d*o,s+d*c]}function Vn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function qn(){cr(this),this.edge=this.site=this.circle=null}function Hn(e){var t=wu.pop()||new qn;return t.site=e,t}function $n(e){nr(e),_u.remove(e),wu.push(e),cr(e)}function Yn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,u=[e];$n(e);for(var s=a;s.circle&&ja(n-s.circle.x)<eo&&ja(r-s.circle.cy)<eo;)a=s.P,u.unshift(s),$n(s),s=a;u.unshift(s),nr(s);for(var l=o;l.circle&&ja(n-l.circle.x)<eo&&ja(r-l.circle.cy)<eo;)o=l.N,u.push(l),$n(l),l=o;u.push(l),nr(l);var c,f=u.length;for(c=1;c<f;++c)l=u[c],s=u[c-1],ur(l.edge,s.site,l.site,i);s=u[0],(l=u[f-1]).edge=ar(s.site,l.site,null,i),tr(s),tr(l)}function Xn(e){for(var t,n,r,i,a=e.x,o=e.y,u=_u._;u;)if((r=Zn(u,o)-a)>eo)u=u.L;else{if(!((i=a-Jn(u,o))>eo)){r>-eo?(t=u.P,n=u):i>-eo?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var s=Hn(e);if(_u.insert(t,s),t||n){if(t===n)return nr(t),n=Hn(t.site),_u.insert(s,n),s.edge=n.edge=ar(t.site,s.site),tr(t),void tr(n);if(!n)return void(s.edge=ar(t.site,s.site));nr(t),nr(n);var l=t.site,c=l.x,f=l.y,d=e.x-c,h=e.y-f,p=n.site,x=p.x-c,g=p.y-f,m=2*(d*g-h*x),v=d*d+h*h,_=x*x+g*g,y={x:(g*v-h*_)/m+c,y:(d*_-x*v)/m+f};ur(n.edge,l,p,y),s.edge=ar(l,e,null,y),n.edge=ar(e,p,null,y),tr(t),tr(n)}}function Zn(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var u=(n=o.site).x,s=n.y,l=s-t;if(!l)return u;var c=u-r,f=1/a-1/l,d=c/l;return f?(-d+h(d*d-2*f*(c*c/(-2*l)-s+l/2+i-a/2)))/f+r:(r+u)/2}function Jn(e,t){var n=e.N;if(n)return Zn(n,t);var r=e.site;return r.y===t?r.x:1/0}function Kn(e){this.site=e,this.edges=[]}function Qn(e,t){return t.angle-e.angle}function er(){cr(this),this.x=this.y=this.arc=this.site=this.cy=null}function tr(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,u=i.y,s=r.x-o,l=r.y-u,c=a.x-o,f=2*(s*(m=a.y-u)-l*c);if(!(f>=-to)){var d=s*s+l*l,p=c*c+m*m,x=(m*d-l*p)/f,g=(s*p-c*d)/f,m=g+u,v=Su.pop()||new er;v.arc=e,v.site=i,v.x=x+o,v.y=m+h(x*x+g*g),v.cy=m,e.circle=v;for(var _=null,y=bu._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){_=y.P;break}y=y.L}else{if(!y.R){_=y;break}y=y.R}bu.insert(_,v),_||(yu=v)}}}}function nr(e){var t=e.circle;t&&(!t.P&&(yu=t.N),bu.remove(t),Su.push(t),cr(t),e.circle=null)}function rr(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],u=t[1][0],s=t[0][1],l=t[1][1],c=e.l,f=e.r,d=c.x,h=c.y,p=f.x,x=f.y,g=(d+p)/2;if(x===h){if(g<o||g>=u)return;if(d>p){if(a){if(a.y>=l)return}else a={x:g,y:s};n={x:g,y:l}}else{if(a){if(a.y<s)return}else a={x:g,y:l};n={x:g,y:s}}}else if(i=(h+x)/2-(r=(d-p)/(x-h))*g,-1>r||1<r)if(d>p){if(a){if(a.y>=l)return}else a={x:(s-i)/r,y:s};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<s)return}else a={x:(l-i)/r,y:l};n={x:(s-i)/r,y:s}}else if(h<x){if(a){if(a.x>=u)return}else a={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(a){if(a.x<o)return}else a={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function ir(e,t){this.l=e,this.r=t,this.a=this.b=null}function ar(e,t,n,r){var i=new ir(e,t);return mu.push(i),n&&ur(i,e,t,n),r&&ur(i,t,e,r),vu[e.i].edges.push(new sr(i,e,t)),vu[t.i].edges.push(new sr(i,t,e)),i}function or(e,t,n){var r=new ir(e,null);return r.a=t,r.b=n,mu.push(r),r}function ur(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function sr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?p(n.y-t.y,n.x-t.x):e.l===t?p(i.x-r.x,r.y-i.y):p(r.x-i.x,i.y-r.y)}function lr(){this._=null}function cr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function fr(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function dr(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function hr(e){for(;e.L;)e=e.L;return e}function pr(e,t){var n,r,i,a=e.sort(xr).pop();for(mu=[],vu=Array(e.length),_u=new lr,bu=new lr;;)if(i=yu,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))(a.x!==n||a.y!==r)&&(vu[a.i]=new Kn(a),Xn(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;Yn(i.arc)}t&&(function(e){for(var t,n=mu,r=en(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(!rr(t=n[i],e)||!r(t)||ja(t.a.x-t.b.x)<eo&&ja(t.a.y-t.b.y)<eo)&&(t.a=t.b=null,n.splice(i,1))}(t),function(e){for(var t,n,r,i,a,o,u,s,l,c,f=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],x=vu,g=x.length;g--;)if((a=x[g])&&a.prepare())for(s=(u=a.edges).length,o=0;o<s;)r=(c=u[o].end()).x,i=c.y,t=(l=u[++o%s].start()).x,n=l.y,(ja(r-t)>eo||ja(i-n)>eo)&&(u.splice(o,0,new sr(or(a.site,c,ja(r-f)<eo&&p-i>eo?{x:f,y:ja(t-f)<eo?n:p}:ja(i-p)<eo&&d-r>eo?{x:ja(n-p)<eo?t:d,y:p}:ja(r-d)<eo&&i-h>eo?{x:d,y:ja(t-d)<eo?n:h}:ja(i-h)<eo&&r-f>eo?{x:ja(n-h)<eo?t:f,y:h}:null),a.site,null)),++s)}(t));var o={cells:vu,edges:mu};return _u=bu=mu=vu=null,o}function xr(e,t){return t.y-e.y||t.x-e.x}function gr(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function mr(e){return e.x}function vr(e){return e.y}function _r(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),u=.5*(r+a),s=t.nodes;s[0]&&_r(e,s[0],n,r,o,u),s[1]&&_r(e,s[1],o,r,i,u),s[2]&&_r(e,s[2],n,u,o,a),s[3]&&_r(e,s[3],o,u,i,a)}}function yr(e,t,n,r,i,a,o){var u,s=1/0;return function e(l,c,f,d,p){if(!(c>a||f>o||d<r||p<i)){if(x=l.point){var x,g=t-l.x,m=n-l.y,v=g*g+m*m;if(v<s){var _=h(s=v);r=t-_,i=n-_,a=t+_,o=n+_,u=x}}for(var y=l.nodes,b=.5*(c+d),w=.5*(f+p),S=(n>=w)<<1|t>=b;void 0>S;++S)if(l=y[3&S])switch(3&S){case 0:e(l,c,f,b,w);break;case 1:e(l,b,f,d,w);break;case 2:e(l,c,w,b,p);break;case 3:e(l,b,w,d,p)}}}(e,r,i,a,o),u}function br(e,t){e=Na.rgb(e),t=Na.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+Ge(g(n+a*e))+Ge(g(r+o*e))+Ge(g(i+u*e))}}function wr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Er(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Sr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function kr(e,t){var n,r,i,a=Eu.lastIndex=Au.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=Eu.exec(e))&&(r=Au.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:Sr(n,r)})),a=Au.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),2>u.length?s[0]?(t=s[0].x,function(e){return t(e)+""}):function(){return t}:(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function Er(e,t){for(var n,r=Na.interpolators.length;0<=--r&&!(n=Na.interpolators[r](e,t)););return n}function Ar(e,t){var n,r=[],i=[],a=e.length,o=t.length,u=c(e.length,t.length);for(n=0;n<u;++n)r.push(Er(e[n],t[n]));for(;n<a;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<u;++n)i[n]=r[n](e);return i}}function Tr(e){return function(t){return 0>=t?0:1<=t?1:e(t)}}function Cr(e){return function(t){return 1-e(1-t)}}function Dr(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Nr(e){return e*e}function Fr(e){return e*e*e}function Or(e){if(0>=e)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Mr(e){return 1-x(e*io)}function Lr(e){return d(2,10*(e-1))}function Pr(e){return 1-h(1-e*e)}function zr(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ir(e,t){return t-=e,function(n){return g(e+t*n)}}function Rr(e){var t=[e.a,e.b],n=[e.c,e.d],r=jr(t),i=Gr(t,n),a=jr(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?p(t[1],t[0]):p(-n[0],n[1]))*oo,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?p(i,a)*oo:0}function Gr(e,t){return e[0]*t[0]+e[1]*t[1]}function jr(e){var t=h(Gr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Wr(e){return e.length?e.pop()+",":""}function Br(e,t){var n=[],r=[];return e=Na.transform(e),t=Na.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Sr(e[0],t[0])},{i:i-2,x:Sr(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,r),function(e,t,n,r){e===t?t&&n.push(Wr(n)+"rotate("+t+")"):(180<e-t?t+=360:180<t-e&&(e+=360),r.push({i:n.push(Wr(n)+"rotate(",null,")")-2,x:Sr(e,t)}))}(e.rotate,t.rotate,n,r),function(e,t,n,r){e===t?t&&n.push(Wr(n)+"skewX("+t+")"):r.push({i:n.push(Wr(n)+"skewX(",null,")")-2,x:Sr(e,t)})}(e.skew,t.skew,n,r),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Wr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Sr(e[0],t[0])},{i:i-2,x:Sr(e[1],t[1])})}else(1!==t[0]||1!==t[1])&&n.push(Wr(n)+"scale("+t+")")}(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,a=r.length;++i<a;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Ur(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Vr(e,t){return t=(t-=e=+e)||1/t,function(n){return f(0,c(1,(n-e)/t))}}function qr(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;for(var n=Hr(e),r=Hr(t),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Hr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function $r(e){e.fixed|=2}function Yr(e){e.fixed&=-7}function Xr(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Zr(e){e.fixed&=-5}function Jr(e,t){return Na.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ri,e}function Kr(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;0<=--r;)n.push(i[r])}function Qr(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function ei(e){return e.children}function ti(e){return e.value}function ni(e,t){return t.value-e.value}function ri(e){return Na.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}function ii(e){return e.x}function ai(e){return e.y}function oi(e,t,n){e.y0=t,e.y=n}function ui(e){return Na.range(e.length)}function si(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function li(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function ci(e){return e.reduce(fi,0)}function fi(e,t){return e+t[1]}function di(e,t){return hi(e,u(l(t.length)/r+1))}function hi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function pi(e){return[Na.min(e),Na.max(e)]}function xi(e,t){return e.value-t.value}function gi(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function mi(e,t){e._pack_next=t,t._pack_prev=e}function vi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function _i(e){function t(e){d=c(e.x-e.r,d),p=f(e.x+e.r,p),x=c(e.y-e.r,x),g=f(e.y+e.r,g)}if((n=e.children)&&(l=n.length)){var n,r,i,a,o,u,s,l,d=1/0,p=-1/0,x=1/0,g=-1/0;if(n.forEach(yi),(r=n[0]).x=-r.r,r.y=0,t(r),1<l&&((i=n[1]).x=i.r,i.y=0,t(i),2<l))for(wi(r,i,a=n[2]),t(a),gi(r,a),r._pack_prev=a,gi(a,i),i=r._pack_next,o=3;o<l;o++){wi(r,i,a=n[o]);var m=0,v=1,_=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(vi(u,a)){m=1;break}if(1==m)for(s=r._pack_prev;s!==u._pack_prev&&!vi(s,a);s=s._pack_prev,_++);m?(v<_||v==_&&i.r<r.r?mi(r,i=u):mi(r=s,i),o--):(gi(r,a),i=a,t(a))}var y=(d+p)/2,b=(x+g)/2,w=0;for(o=0;o<l;o++)(a=n[o]).x-=y,a.y-=b,w=f(w,a.r+h(a.x*a.x+a.y*a.y));e.r=w,n.forEach(bi)}}function yi(e){e._pack_next=e._pack_prev=e}function bi(e){delete e._pack_next,delete e._pack_prev}function wi(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,u=i*i+a*a,s=.5+((r*=r)-(o*=o))/(2*u),l=h(f(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+s*i+l*a,n.y=e.y+s*a-l*i}else n.x=e.x+r,n.y=e.y}function Si(e,t){return e.parent==t.parent?1:2}function ki(e){var t=e.children;return t.length?t[0]:e.t}function Ei(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ai(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ti(e,t,n){return e.a.parent===t.parent?e.a:n}function Ci(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Di(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Ni(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Fi(e){return e.rangeExtent?e.rangeExtent():Ni(e.range())}function Oi(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function Mi(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function Li(e){return e?{floor:function(t){return n(t/e)*e},ceil:function(t){return u(t/e)*e}}:Iu}function Pi(e,t,n,r){var i=[],a=[],o=0,u=c(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),a.push(r(t[o-1],t[o]));return function(t){var n=Na.bisect(e,t,1,u)-1;return a[n](i[n](t))}}function zi(e,t){return Na.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Ii(e,t){return Mi(e,Li(Ri(e,t)[2])),Mi(e,Li(Ri(e,t)[2])),e}function Ri(e,t){null==t&&(t=10);var r=Ni(e),i=r[1]-r[0],a=d(10,n(l(i/t)/s)),o=t/i*a;return.15>=o?a*=10:.35>=o?a*=5:.75>=o&&(a*=2),r[0]=u(r[0]/a)*a,r[1]=n(r[1]/a)*a+.5*a,r[2]=a,r}function Gi(e,t){return Na.range.apply(Na,Ri(e,t))}function ji(e,n,r){var i=Ri(e,n);if(r){var a=Ao.exec(r);if(a.shift(),"s"===a[8]){var o=Na.formatPrefix(f(ja(i[0]),ja(i[1])));return a[7]||(a[7]="."+Wi(o.scale(i[2]))),a[8]="f",r=Na.format(a.join("")),function(e){return r(o.scale(e))+o.symbol}}a[7]||(a[7]="."+function(e,n){var r=Wi(n[2]);return e in Ru?t(r-Wi(f(ja(n[0]),ja(n[1]))))+ +("e"!==e):r-2*("%"===e)}(a[8],i)),r=a.join("")}else r=",."+Wi(i[2])+"f";return Na.format(r)}function Wi(e){return-n(l(e)/s+.01)}function Bi(e){return function(t){return 0>t?-d(-t,e):d(t,e)}}function Ui(){return 0}function Vi(e){return e.innerRadius}function qi(e){return e.outerRadius}function Hi(e){return e.startAngle}function $i(e){return e.endAngle}function Yi(e){return e&&e.padAngle}function Xi(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function Zi(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],u=(i?r:-r)/h(a*a+o*o),s=u*o,l=-u*a,c=e[0]+s,d=e[1]+l,p=t[0]+s,x=t[1]+l,g=(c+p)/2,m=(d+x)/2,v=p-c,_=x-d,y=v*v+_*_,b=n-r,w=c*x-p*d,S=(0>_?-1:1)*h(f(0,b*b*y-w*w)),k=(w*_-v*S)/y,E=(-w*v-_*S)/y,A=(w*_+v*S)/y,T=(-w*v+_*S)/y,C=k-g,D=E-m,N=A-g,F=T-m;return C*C+D*D>N*N+F*F&&(k=A,E=T),[[k-s,E-l],[k*n/b,E*n/b]]}function Ji(e){function t(t){function o(){l.push("M",a(e(c),u))}for(var s,l=[],c=[],f=-1,d=t.length,h=qe(n),p=qe(r);++f<d;)i.call(this,s=t[f],f)?c.push([+h.call(this,s,f),+p.call(this,s,f)]):c.length&&(o(),c=[]);return c.length&&o(),l.length?l.join(""):null}var n=Rn,r=Gn,i=Vt,a=Ki,o=a.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Hu.get(e)||Ki).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function Ki(e){return 1<e.length?e.join("L"):e+"Z"}function Qi(e){return e.join("L")+"Z"}function ea(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function ta(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function na(e,t){if(1>t.length||e.length!=t.length&&e.length!=t.length+2)return Ki(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],u=o,s=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],s=2),1<t.length){u=t[1],a=e[s],s++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,s++)a=e[s],u=t[l],r+="S"+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1]}if(n){var c=e[s];r+="Q"+(a[0]+2*u[0]/3)+","+(a[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function ra(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],u=1,s=e.length;++u<s;)n=a,a=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function ia(e){if(3>e.length)return Ki(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],u=[a,a,a,r[1]],s=[i,",",a,"L",aa(Xu,o),",",aa(Xu,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),oa(s,o,u);return e.pop(),s.push("L",r),s.join("")}function aa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function oa(e,t,n){e.push("C",aa($u,t),",",aa($u,n),",",aa(Yu,t),",",aa(Yu,n),",",aa(Xu,t),",",aa(Xu,n))}function ua(e,t){return(t[1]-e[1])/(t[0]-e[0])}function sa(e){for(var t,n,r,i,a=[],o=function(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=ua(i,a);++t<n;)r[t]=(o+(o=ua(i=a,a=e[t+1])))/2;return r[t]=o,r}(e),u=-1,s=e.length-1;++u<s;)t=ua(e[u],e[u+1]),ja(t)<eo?o[u]=o[u+1]=0:9<(i=(n=o[u]/t)*n+(r=o[u+1]/t)*r)&&(i=3*t/h(i),o[u]=i*n,o[u+1]=i*r);for(u=-1;++u<=s;)i=(e[c(s,u+1)][0]-e[f(0,u-1)][0])/(6*(1+o[u]*o[u])),a.push([i||0,o[u]*i||0]);return a}function la(e){for(var t,n,r,i=-1,a=e.length;++i<a;)n=(t=e[i])[0],r=t[1]-io,t[0]=n*x(r),t[1]=n*m(r);return e}function ca(e){function t(t){function s(){x.push("M",u(e(m),f),c,l(e(g.reverse()),f),"Z")}for(var d,h,p,x=[],g=[],m=[],v=-1,_=t.length,y=qe(n),b=qe(i),w=n===r?function(){return h}:qe(r),S=i===a?function(){return p}:qe(a);++v<_;)o.call(this,d=t[v],v)?(g.push([h=+y.call(this,d,v),p=+b.call(this,d,v)]),m.push([+w.call(this,d,v),+S.call(this,d,v)])):g.length&&(s(),g=[],m=[]);return g.length&&s(),x.length?x.join(""):null}var n=Rn,r=Rn,i=0,a=Gn,o=Vt,u=Ki,s=u.key,l=u,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=a=e,t):a},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(s="function"==typeof e?u=e:(u=Hu.get(e)||Ki).key,l=u.reverse||u,c=u.closed?"M":"L",t):s},t.tension=function(e){return arguments.length?(f=e,t):f},t}function fa(e){return e.radius}function da(e){return[e.x,e.y]}function ha(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-io;return[n*x(r),n*m(r)]}}function pa(){return 64}function xa(){return"circle"}function ga(e){var t=h(e/no);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function ma(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function va(e,t,n){return Ua(e,ns),e.namespace=t,e.id=n,e}function _a(e,t,n,r){var i=e.id,a=e.namespace;return ce(e,"function"==typeof n?function(e,o,u){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,u)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function ya(e){return null==e&&(e=""),function(){this.textContent=e}}function ba(e){return null==e?"__transition__":"__transition_"+e+"__"}function wa(e,t,n,r,i){function a(n){var i=d.active,a=d[i];for(var p in a&&(a.timer.c=null,a.timer.t=NaN,--d.count,delete d[i],a.event&&a.event.interrupt.call(e,e.__data__,a.index)),d)if(+p<r){var x=d[p];x.timer.c=null,x.timer.t=NaN,--d.count,delete d[p]}s.c=o,Ye((function(){return s.c&&o(n||1)&&(s.c=null,s.t=NaN),1}),0,u),d.active=r,h.event&&h.event.start.call(e,e.__data__,t),f=[],h.tween.forEach((function(n,r){(r=r.call(e,e.__data__,t))&&f.push(r)})),c=h.ease,l=h.duration}function o(i){for(var a=i/l,o=c(a),u=f.length;0<u;)f[--u].call(e,o);if(1<=a)return h.event&&h.event.end.call(e,e.__data__,t),--d.count?delete d[r]:delete e[n],1}var u,s,l,c,f,d=e[n]||(e[n]={active:0,count:0}),h=d[r];h||(u=i.time,s=Ye((function(e){var t=h.delay;return s.t=t+u,t<=e?a(e-t):void(s.c=a)}),0,u),h=d[r]={tween:new N,time:u,timer:s,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++d.count)}function Sa(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"}))}function ka(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"}))}function Ea(e){return e.toISOString()}function Aa(e,t,n){function r(t){return e(t)}function i(e,n){var r=(e[1]-e[0])/n,i=Na.bisect(fs,r);return i==fs.length?[t.year,Ri(e.map((function(e){return e/31536e6})),n)[2]]:i?t[r/fs[i-1]<fs[i]/r?i-1:i]:[ps,Ri(e,n)[2]]}return r.invert=function(t){return Ta(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Ta)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Ta(+n+1),t).length}var a=r.domain(),o=Ni(a),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(Mi(a,1<t?{floor:function(t){for(;n(t=e.floor(t));)t=Ta(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Ta(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Ni(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],Ta(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Aa(e.copy(),t,n)},zi(r,e)}function Ta(e){return new Date(e)}function Ca(e){return JSON.parse(e.responseText)}function Da(e){var t=Ma.createRange();return t.selectNode(Ma.body),t.createContextualFragment(e.responseText)}var Na={version:"3.5.17"},Fa=[].slice,Oa=function(e){return Fa.call(e)},Ma=this.document;if(Ma)try{Oa(Ma.documentElement.childNodes)[0].nodeType}catch(w){Oa=function(e){for(var t=e.length,n=Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),Ma)try{Ma.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var La=this.Element.prototype,Pa=La.setAttribute,za=La.setAttributeNS,Ia=this.CSSStyleDeclaration.prototype,Ra=Ia.setProperty;La.setAttribute=function(e,t){Pa.call(this,e,t+"")},La.setAttributeNS=function(e,t,n){za.call(this,e,t,n+"")},Ia.setProperty=function(e,t,n){Ra.call(this,e,t+"",n)}}Na.ascending=S,Na.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},Na.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},Na.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},Na.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},Na.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)E(n=+e[a])&&(r+=n);else for(;++a<i;)E(n=+t.call(e,e[a],a))&&(r+=n);return r},Na.mean=function(e,t){var n,r=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)E(n=k(e[a]))?r+=n:--o;else for(;++a<i;)E(n=k(t.call(e,e[a],a)))?r+=n:--o;return o?r/o:void 0},Na.quantile=function(e,t){var r=(e.length-1)*t+1,i=n(r),a=+e[i-1],o=r-i;return o?a+o*(e[i]-a):a},Na.median=function(e,t){var n,r=[],i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)E(n=k(e[a]))&&r.push(n);else for(;++a<i;)E(n=k(t.call(e,e[a],a)))&&r.push(n);return r.length?Na.quantile(r.sort(S),.5):void 0},Na.variance=function(e,t){var n,r,i=e.length,a=0,o=0,u=-1,s=0;if(1===arguments.length)for(;++u<i;)E(n=k(e[u]))&&(o+=(r=n-a)*(n-(a+=r/++s)));else for(;++u<i;)E(n=k(t.call(e,e[u],u)))&&(o+=(r=n-a)*(n-(a+=r/++s)));return 1<s?o/(s-1):void 0},Na.deviation=function(){var e=Na.variance.apply(this,arguments);return e?h(e):e};var Ga=A(S);Na.bisectLeft=Ga.left,Na.bisect=Na.bisectRight=Ga.right,Na.bisector=function(e){return A(1===e.length?function(t,n){return S(e(t),n)}:e)},Na.shuffle=function(e,t,n){3>(a=arguments.length)&&(n=e.length,2>a&&(t=0));for(var r,i,a=n-t;a;)i=0|Math.random()*a--,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},Na.permute=function(e,t){for(var n=t.length,r=Array(n);n--;)r[n]=e[t[n]];return r},Na.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=Array(0>n?0:n);t<n;)i[t]=[r,r=e[++t]];return i},Na.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=Na.min(e,T),r=Array(n);++t<n;)for(var i,a=-1,o=r[t]=Array(i);++a<i;)o[a]=e[a][t];return r},Na.zip=function(){return Na.transpose(arguments)},Na.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Na.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Na.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Na.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=Array(o);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--o]=r[t];return n};var ja=t;Na.range=function(e,t,n){if(3>arguments.length&&(n=1,2>arguments.length&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],a=C(ja(n)),o=-1;if(e*=a,t*=a,0>(n*=a))for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},Na.map=function(e,t){var n=new N;if(e instanceof N)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n},D(N,{has:M,get:function(e){return this._[F(e)]},set:function(e,t){return this._[F(e)]=t},remove:L,keys:P,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:O(t),value:this._[t]});return e},size:z,empty:I,forEach:function(e){for(var t in this._)e.call(this,O(t),this._[t])}}),Na.nest=function(){function e(a,o,u){if(u>=i.length)return n?n.call(r,o):t?o.sort(t):o;for(var s,l,c,f,d=-1,h=o.length,p=i[u++],x=new N;++d<h;)(f=x.get(s=p(l=o[d])))?f.push(l):x.set(s,[l]);return a?(l=a(),c=function(t,n){l.set(t,e(a,n,u))}):(l={},c=function(t,n){l[t]=e(a,n,u)}),x.forEach(c),l}var t,n,r={},i=[],a=[];return r.map=function(t,n){return e(n,t,0)},r.entries=function(t){return function e(t,n){if(n>=i.length)return t;var r=[],o=a[n++];return t.forEach((function(t,i){r.push({key:t,values:e(i,n)})})),o?r.sort((function(e,t){return o(e.key,t.key)})):r}(e(Na.map,t,0),0)},r.key=function(e){return i.push(e),r},r.sortKeys=function(e){return a[i.length-1]=e,r},r.sortValues=function(e){return t=e,r},r.rollup=function(e){return n=e,r},r},Na.set=function(e){var t=new R;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},D(R,{has:M,add:function(e){return this._[F(e+="")]=!0,e},remove:L,values:P,size:z,empty:I,forEach:function(e){for(var t in this._)e.call(this,O(t))}}),Na.behavior={},Na.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=j(e,t,t[n]);return e};var Wa=["webkit","ms","moz","Moz","o","O"];Na.dispatch=function(){for(var e=new U,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=V(e);return e},U.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return 2>arguments.length?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},Na.event=null,Na.requote=function(e){return e.replace(Ba,"\\$&")};var Ba=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ua={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Va=function(e,t){return t.querySelector(e)},qa=function(e,t){return t.querySelectorAll(e)},Ha=function(e,t){var n=e.matches||e[W(e,"matchesSelector")];return(Ha=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(Va=function(e,t){return Sizzle(e,t)[0]||null},qa=Sizzle,Ha=Sizzle.matchesSelector),Na.selection=function(){return Na.select(Ma.documentElement)};var $a=Na.selection.prototype=[];$a.select=function(e){var t,n,r,i,a=[];e=X(e);for(var o=-1,u=this.length;++o<u;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var s=-1,l=r.length;++s<l;)(i=r[s])?(t.push(n=e.call(i,i.__data__,s,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return Y(a)},$a.selectAll=function(e){var t,n,r=[];e=Z(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,s=o.length;++u<s;)(n=o[u])&&(r.push(t=Oa(e.call(n,n.__data__,u,i))),t.parentNode=n);return Y(r)};var Ya={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Na.ns={prefix:Ya,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Ya.hasOwnProperty(n)?{space:Ya[n],local:e}:e}},$a.attr=function(e,t){if(2>arguments.length){if("string"==typeof e){var n=this.node();return(e=Na.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(J(t,e[t]));return this}return this.each(J(e,t))},$a.classed=function(e,t){if(2>arguments.length){if("string"==typeof e){var n=this.node(),r=(e=ee(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!Q(e[i]).test(t))return!1;return!0}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))},$a.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){for(n in 2>r&&(t=""),e)this.each(re(n,e[n],t));return this}if(2>r){var i=this.node();return w(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(re(e,t,n))},$a.property=function(e,t){if(2>arguments.length){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))},$a.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},$a.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},$a.append=function(e){return e=ae(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},$a.insert=function(e,t){return e=ae(e),t=X(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},$a.remove=function(){return this.each(oe)},$a.data=function(e,t){function n(e,n){var r,i,a,o=e.length,f=n.length,d=c(o,f),h=Array(f),p=Array(f),x=Array(o);if(t){var g,m=new N,v=Array(o);for(r=-1;++r<o;)(i=e[r])&&(m.has(g=t.call(i,i.__data__,r))?x[r]=i:m.set(g,i),v[r]=g);for(r=-1;++r<f;)(i=m.get(g=t.call(n,a=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=a):p[r]=ue(a),m.set(g,!0);for(r=-1;++r<o;)r in v&&!0!==m.get(v[r])&&(x[r]=e[r])}else{for(r=-1;++r<d;)i=e[r],a=n[r],i?(i.__data__=a,h[r]=i):p[r]=ue(a);for(;r<f;++r)p[r]=ue(n[r]);for(;r<o;++r)x[r]=e[r]}p.update=h,p.parentNode=h.parentNode=x.parentNode=e.parentNode,u.push(p),s.push(h),l.push(x)}var r,i,a=-1,o=this.length;if(!arguments.length){for(e=Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(e[a]=i.__data__);return e}var u=fe([]),s=Y([]),l=Y([]);if("function"==typeof e)for(;++a<o;)n(r=this[a],e.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],e);return s.enter=function(){return u},s.exit=function(){return l},s},$a.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},$a.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=se(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var u=0,s=n.length;u<s;u++)(r=n[u])&&e.call(r,r.__data__,u,a)&&t.push(r)}return Y(i)},$a.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];0<=--i;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},$a.sort=function(e){e=le.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},$a.each=function(e){return ce(this,(function(t,n,r){e.call(t,t.__data__,n,r)}))},$a.call=function(e){var t=Oa(arguments);return e.apply(t[0]=this,t),this},$a.empty=function(){return!this.node()},$a.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n,r=this[e],i=0,a=r.length;i<a;i++)if(n=r[i])return n;return null},$a.size=function(){var e=0;return ce(this,(function(){++e})),e};var Xa=[];Na.selection.enter=fe,Na.selection.enter.prototype=Xa,Xa.append=$a.append,Xa.empty=$a.empty,Xa.node=$a.node,Xa.call=$a.call,Xa.size=$a.size,Xa.select=function(e){for(var t,n,r,i,a,o=[],u=-1,s=this.length;++u<s;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(t.push(r[l]=n=e.call(i.parentNode,a.__data__,l,u)),n.__data__=a.__data__):t.push(null)}return Y(o)},Xa.insert=function(e,t){return 2>arguments.length&&(t=de(this)),$a.insert.call(this,e,t)},Na.select=function(e){var t;return"string"==typeof e?(t=[Va(e,Ma)]).parentNode=Ma.documentElement:(t=[e]).parentNode=b(e),Y([t])},Na.selectAll=function(e){var t;return"string"==typeof e?(t=Oa(qa(e,Ma))).parentNode=Ma.documentElement:(t=Oa(e)).parentNode=null,Y([t])},$a.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){for(n in 2>r&&(t=!1),e)this.each(he(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(he(e,t,n))};var Za=Na.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ma&&Za.forEach((function(e){"on"+e in Ma&&Za.remove(e)}));var Ja,Ka=0;Na.mouse=function(e){return me(e,H())};var Qa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Na.touch=function(e,t,n){if(3>arguments.length&&(n=t,t=H().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return me(e,r)},Na.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function t(e,t,i,a,o){return function(){function u(){var e,n,r=t(d,x);r&&(e=r[0]-_[0],n=r[1]-_[1],p|=e|n,_=r,h({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:e,dy:n}))}function s(){t(d,x)&&(m.on(a+g,null).on(o+g,null),v(p),h({type:"dragend"}))}var l,c=this,f=Na.event.target.correspondingElement||Na.event.target,d=c.parentNode,h=n.of(c,arguments),p=0,x=e(),g=".drag"+(null==x?"":"-"+x),m=Na.select(i(f)).on(a+g,u).on(o+g,s),v=ge(f),_=t(d,x);r?l=[(l=r.apply(c,arguments)).x-_[0],l.y-_[1]]:l=[0,0],h({type:"dragstart"})}}var n=$(e,"drag","dragstart","dragend"),r=null,i=t(B,Na.mouse,w,"mousemove","mouseup"),a=t(ve,Na.touch,G,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},Na.rebind(e,n,"on")},Na.touches=function(e,t){return 2>arguments.length&&(t=H().touches),t?Oa(t).map((function(t){var n=me(e,t);return n.identifier=t.identifier,n})):[]};var eo=1e-6,to=eo*eo,no=a,ro=2*no,io=no/2,ao=no/180,oo=180/no,uo=e;Na.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],c=t[2],f=u-i,d=s-a,p=f*f+d*d;if(p<to)r=l(c/o)/uo,n=function(e){return[i+e*f,a+e*d,o*v(uo*e*r)]};else{var x=h(p),g=(c*c-o*o+4*p)/(2*o*2*x),m=(c*c-o*o-4*p)/(2*c*2*x),_=l(h(g*g+1)-g),y=l(h(m*m+1)-m);r=(y-_)/uo,n=function(e){var t=e*r,n=Se(_),u=o/(2*x)*(n*function(e){return((e=v(2*e))-1)/(e+1)}(uo*t+_)-function(e){return((e=v(e))-1/e)/2}(_));return[i+u*f,a+u*d,o*n/Se(uo*t+_)]}}return n.duration=1e3*r,n},Na.behavior.zoom=function(){function e(e){e.on("mousedown.zoom",m).on(lo+".zoom",_).on("dblclick.zoom",y).on("touchstart.zoom",v)}function t(e){return[(e[0]-F.x)/F.k,(e[1]-F.y)/F.k]}function i(e){F.k=f(M[0],c(M[1],e))}function a(e,t){t=function(e){return[e[0]*F.k+F.x,e[1]*F.k+F.y]}(t),F.x+=e[0]-t[0],F.y+=e[1]-t[1]}function o(t,n,r,o){t.__chart__={x:F.x,y:F.y,k:F.k},i(d(2,o)),a(S=n,r),t=Na.select(t),0<L&&(t=t.transition().duration(L)),t.call(e.event)}function s(){C&&C.domain(T.range().map((function(e){return(e-F.x)/F.k})).map(T.invert)),N&&N.domain(D.range().map((function(e){return(e-F.y)/F.k})).map(D.invert))}function p(e){P++||e({type:"zoomstart"})}function x(e){s(),e({type:"zoom",scale:F.k,translate:[F.x,F.y]})}function g(e){--P||(e({type:"zoomend"}),S=null)}function m(){function e(){o.on("mousemove.zoom",null).on("mouseup.zoom",null),s(i),g(r)}var n=this,r=z.of(n,arguments),i=0,o=Na.select(w(n)).on("mousemove.zoom",(function(){i=1,a(Na.mouse(n),u),x(r)})).on("mouseup.zoom",e),u=t(Na.mouse(n)),s=ge(n);ts.call(n),p(r)}function v(){function e(){var e=Na.touches(d);return f=F.k,e.forEach((function(e){e.identifier in y&&(y[e.identifier]=t(e))})),e}function u(){var t=Na.event.target;Na.select(t).on(S,s).on(k,c),E.push(t);for(var i=Na.event.changedTouches,a=0,u=i.length;a<u;++a)y[i[a].identifier]=null;var f=e(),h=Date.now();if(1===f.length){if(500>h-A){var p=f[0];o(d,p,y[p.identifier],n(l(F.k)/r)+1),q()}A=h}else if(1<f.length){p=f[0];var x=f[1],g=p[0]-x[0],m=p[1]-x[1];b=g*g+m*m}}function s(){var e,t,n,r,o=Na.touches(d);ts.call(d);for(var u=0,s=o.length;u<s;++u,r=null)if(n=o[u],r=y[n.identifier]){if(t)break;e=n,t=r}if(r){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=b&&h(l/b);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(c*f)}A=null,a(e,t),x(_)}function c(){if(Na.event.touches.length){for(var t=Na.event.changedTouches,n=0,r=t.length;n<r;++n)delete y[t[n].identifier];for(var i in y)return void e()}Na.selectAll(E).on(w,null),T.on("mousedown.zoom",m).on("touchstart.zoom",v),C(),g(_)}var f,d=this,_=z.of(d,arguments),y={},b=0,w=".zoom-"+Na.event.changedTouches[0].identifier,S="touchmove"+w,k="touchend"+w,E=[],T=Na.select(d),C=ge(d);u(),p(_),T.on("mousedown.zoom",null).on("touchstart.zoom",u)}function _(){var e=z.of(this,arguments);E?clearTimeout(E):(ts.call(this),b=t(S=k||Na.mouse(this)),p(e)),E=setTimeout((function(){E=null,g(e)}),50),q(),i(d(2,.002*so())*F.k),a(S,b),x(e)}function y(){var e=Na.mouse(this),i=l(F.k)/r;o(this,e,t(e),Na.event.shiftKey?u(i)-1:n(i)+1)}var b,S,k,E,A,T,C,D,N,F={x:0,y:0,k:1},O=[960,500],M=co,L=250,P=0,z=$(e,"zoomstart","zoom","zoomend");return lo||(lo="onwheel"in Ma?(so=function(){return-Na.event.deltaY*(Na.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ma?(so=function(){return Na.event.wheelDelta},"mousewheel"):(so=function(){return-Na.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each((function(){var e=z.of(this,arguments),t=F;Qu?Na.select(this).transition().each("start.zoom",(function(){F=this.__chart__||{x:0,y:0,k:1},p(e)})).tween("zoom:zoom",(function(){var n=O[0],r=O[1],i=S?S[0]:n/2,a=S?S[1]:r/2,o=Na.interpolateZoom([(i-F.x)/F.k,(a-F.y)/F.k,n/F.k],[(i-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var r=o(t),u=n/r[2];this.__chart__=F={x:i-r[0]*u,y:a-r[1]*u,k:u},x(e)}})).each("interrupt.zoom",(function(){g(e)})).each("end.zoom",(function(){g(e)})):(this.__chart__=F,p(e),x(e),g(e))}))},e.translate=function(t){return arguments.length?(F={x:+t[0],y:+t[1],k:F.k},s(),e):[F.x,F.y]},e.scale=function(t){return arguments.length?(F={x:F.x,y:F.y,k:null},i(+t),s(),e):F.k},e.scaleExtent=function(t){return arguments.length?(M=null==t?co:[+t[0],+t[1]],e):M},e.center=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],e):k},e.size=function(t){return arguments.length?(O=t&&[+t[0],+t[1]],e):O},e.duration=function(t){return arguments.length?(L=+t,e):L},e.x=function(t){return arguments.length?(C=t,T=t.copy(),F={x:0,y:0,k:1},e):C},e.y=function(t){return arguments.length?(N=t,D=t.copy(),F={x:0,y:0,k:1},e):N},Na.rebind(e,z,"on")};var so,lo,co=[0,1/0];Na.color=Ee,Ee.prototype.toString=function(){return this.rgb()+""},Na.hsl=Ae;var fo=Ae.prototype=new Ee;fo.brighter=function(e){return e=d(.7,arguments.length?e:1),new Ae(this.h,this.s,this.l/e)},fo.darker=function(e){return e=d(.7,arguments.length?e:1),new Ae(this.h,this.s,e*this.l)},fo.rgb=function(){return Te(this.h,this.s,this.l)},Na.hcl=Ce;var ho=Ce.prototype=new Ee;ho.brighter=function(e){return new Ce(this.h,this.c,c(100,this.l+po*(arguments.length?e:1)))},ho.darker=function(e){return new Ce(this.h,this.c,f(0,this.l-po*(arguments.length?e:1)))},ho.rgb=function(){return De(this.h,this.c,this.l).rgb()},Na.lab=Ne;var po=18,xo=.95047,go=1.08883,mo=Ne.prototype=new Ee;mo.brighter=function(e){return new Ne(c(100,this.l+18*(arguments.length?e:1)),this.a,this.b)},mo.darker=function(e){return new Ne(f(0,this.l-18*(arguments.length?e:1)),this.a,this.b)},mo.rgb=function(){return Fe(this.l,this.a,this.b)},Na.rgb=ze;var vo=ze.prototype=new Ee;vo.brighter=function(e){e=d(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&30>t&&(t=30),n&&30>n&&(n=30),r&&30>r&&(r=30),new ze(c(255,t/e),c(255,n/e),c(255,r/e))):new ze(30,30,30)},vo.darker=function(e){return new ze((e=d(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},vo.hsl=function(){return We(this.r,this.g,this.b)},vo.toString=function(){return"#"+Ge(this.r)+Ge(this.g)+Ge(this.b)};var _o=Na.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});_o.forEach((function(e,t){_o.set(e,Ie(t))})),Na.functor=qe,Na.xhr=He(G),Na.dsv=function(e,t){function n(e,n,a){3>arguments.length&&(a=n,n=null);var o=$e(e,t,null==n?r:i(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return u.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n]"),s=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,(function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i}))},n.parseRows=function(e,t){function n(){if(c>=l)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return c=n+2,13===(r=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<l;){var r,u=1;if(10===(r=e.charCodeAt(c++)))i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++u);else if(r!==s)continue;return e.slice(t,c-u)}return e.slice(t)}for(var r,i,a={},o={},u=[],l=e.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();t&&null==(d=t(d,f++))||u.push(d)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new R,i=[];return t.forEach((function(e){for(var t in e)r.has(t)||i.push(r.add(t))})),[i.map(o).join(e)].concat(t.map((function(t){return i.map((function(e){return o(t[e])})).join(e)}))).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},Na.csv=Na.dsv(",","text/csv"),Na.tsv=Na.dsv("\t","text/tab-separated-values");var yo,bo,wo,So,ko=this[W(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};Na.timer=function(){Ye.apply(this,arguments)},Na.timer.flush=function(){Ze(),Je()},Na.round=function(e,t){return t?g(e*(t=d(10,t)))/t:g(e)};var Eo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map((function(e,t){var n=d(10,3*ja(8-t));return{scale:8<t?function(e){return e/n}:function(e){return e*n},symbol:e}}));Na.formatPrefix=function(e,t){var r=0;return(e=+e)&&(0>e&&(e*=-1),t&&(e=Na.round(e,Ke(e,t))),r=1+n(1e-12+l(e)/s),r=f(-24,c(24,3*n((r-1)/3)))),Eo[8+r/3]};var Ao=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,To=Na.map({b:function(e){return e.toString(2)},c:function(e){return(0,String.fromCharCode)(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=Na.round(e,Ke(e,t))).toFixed(f(0,c(20,Ke(e*(1+1e-15),t))))}}),Co=Na.time={},Do=Date;tt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){No.setUTCDate.apply(this._,arguments)},setDay:function(){No.setUTCDay.apply(this._,arguments)},setFullYear:function(){No.setUTCFullYear.apply(this._,arguments)},setHours:function(){No.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){No.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){No.setUTCMinutes.apply(this._,arguments)},setMonth:function(){No.setUTCMonth.apply(this._,arguments)},setSeconds:function(){No.setUTCSeconds.apply(this._,arguments)},setTime:function(){No.setTime.apply(this._,arguments)}};var No=Date.prototype;Co.year=nt((function(e){return(e=Co.day(e)).setMonth(0,1),e}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e){return e.getFullYear()})),Co.years=Co.year.range,Co.years.utc=Co.year.utc.range,Co.day=nt((function(e){var t=new Do(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e){return e.getDate()-1})),Co.days=Co.day.range,Co.days.utc=Co.day.utc.range,Co.dayOfYear=function(e){var t=Co.year(e);return n((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(e,t){t=7-t;var r=Co[e]=nt((function(e){return(e=Co.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e}),(function(e,t){e.setDate(e.getDate()+7*n(t))}),(function(e){var r=Co.year(e).getDay();return n((Co.dayOfYear(e)+(r+t)%7)/7)-(r!==t)}));Co[e+"s"]=r.range,Co[e+"s"].utc=r.utc.range,Co[e+"OfYear"]=function(e){var r=Co.year(e).getDay();return n((Co.dayOfYear(e)+(r+t)%7)/7)}})),Co.week=Co.sunday,Co.weeks=Co.sunday.range,Co.weeks.utc=Co.sunday.utc.range,Co.weekOfYear=Co.sundayOfYear;var Fo={"-":"",_:" ",0:"0"},Oo=/^\s*\d+/,Mo=/^%/;Na.locale=function(e){return{numberFormat:Qe(e),timeFormat:it(e)}};var Lo=Na.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Na.format=Lo.numberFormat,Na.geo={},kt.prototype={s:0,t:0,add:function(e){Et(e,this.t,Po),Et(Po.s,this.s,this),this.s?this.t+=Po.t:this.s=Po.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Po=new kt;Na.geo.stream=function(e,t){e&&zo.hasOwnProperty(e.type)?zo[e.type](e,t):At(e,t)};var zo={Feature:function(e,t){At(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)At(n[r].geometry,t)}},Io={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Tt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Tt(n[r],t,0)},Polygon:function(e,t){Ct(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ct(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)At(n[r],t)}};Na.geo.area=function(e){return Ro=0,Na.geo.stream(e,jo),Ro};var Ro,Go=new kt,jo={sphere:function(){Ro+=4*no},point:B,lineStart:B,lineEnd:B,polygonStart:function(){Go.reset(),jo.lineStart=Dt},polygonEnd:function(){var e=2*Go;Ro+=0>e?4*no+e:e,jo.lineStart=jo.lineEnd=jo.point=B}};Na.geo.bounds=function(){function e(e,t){_.push(y=[c=e,d=e]),t<f&&(f=t),t>h&&(h=t)}function t(t,n){var r=Nt([t*ao,n*ao]);if(m){var i=Ot(m,r),a=Ot([i[1],-i[0],0],i);Pt(a),a=zt(a);var o=t-p,s=0<o?1:-1,l=a[0]*oo*s,x=180<ja(o);if(x^(s*p<l&&l<s*t))(g=a[1]*oo)>h&&(h=g);else if(x^(s*p<(l=(l+360)%360-180)&&l<s*t)){var g;(g=-a[1]*oo)<f&&(f=g)}else n<f&&(f=n),n>h&&(h=n);x?t<p?u(c,t)>u(c,d)&&(d=t):u(t,d)>u(c,d)&&(c=t):d>=c?(t<c&&(c=t),t>d&&(d=t)):t>p?u(c,t)>u(c,d)&&(d=t):u(t,d)>u(c,d)&&(c=t)}else e(t,n);m=r,p=t}function n(){b.point=t}function r(){y[0]=c,y[1]=d,b.point=e,m=null}function i(e,n){if(m){var r=e-p;v+=180<ja(r)?r+(0<r?360:-360):r}else x=e,g=n;jo.point(e,n),t(e,n)}function a(){jo.lineStart()}function o(){i(x,g),jo.lineEnd(),ja(v)>eo&&(c=-(d=180)),y[0]=c,y[1]=d,m=null}function u(e,t){return 0>(t-=e)?t+360:t}function s(e,t){return e[0]-t[0]}function l(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,d,h,p,x,g,m,v,_,y,b={point:e,lineStart:n,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=a,b.lineEnd=o,v=0,jo.polygonStart()},polygonEnd:function(){jo.polygonEnd(),b.point=e,b.lineStart=n,b.lineEnd=r,0>Go?(c=-(d=180),f=-(h=90)):v>eo?h=90:v<-eo&&(f=-90),y[0]=c,y[1]=d}};return function(e){if(h=d=-(c=f=1/0),_=[],Na.geo.stream(e,b),r=_.length){_.sort(s);for(var t=1,n=[p=_[0]];t<r;++t)l((a=_[t])[0],p)||l(a[1],p)?(u(p[0],a[1])>u(p[0],p[1])&&(p[1]=a[1]),u(a[0],p[1])>u(p[0],p[1])&&(p[0]=a[0])):n.push(p=a);for(var r,i,a,o=-1/0,p=(t=0,n[r=n.length-1]);t<=r;p=a,++t)a=n[t],(i=u(p[1],a[0]))>o&&(o=i,c=a[0],d=p[1])}return _=y=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[d,h]]}}(),Na.geo.centroid=function(e){Wo=Bo=Uo=Vo=qo=Ho=$o=Yo=Xo=Zo=Jo=0,Na.geo.stream(e,Ko);var t=Xo,n=Zo,r=Jo,i=t*t+n*n+r*r;return i<to&&(t=Ho,n=$o,r=Yo,Bo<eo&&(t=Uo,n=Vo,r=qo),(i=t*t+n*n+r*r)<to)?[NaN,NaN]:[p(n,t)*oo,we(r/h(i))*oo]};var Wo,Bo,Uo,Vo,qo,Ho,$o,Yo,Xo,Zo,Jo,Ko={sphere:B,point:Rt,lineStart:jt,lineEnd:Wt,polygonStart:function(){Ko.lineStart=Bt},polygonEnd:function(){Ko.lineStart=jt}},Qo=Yt(Vt,(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,u){var s=0<a?no:-no,l=ja(a-n);ja(l-no)<eo?(e.point(n,r=0<(r+u)/2?io:-io),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&l>=no&&(ja(n-i)<eo&&(n-=i*eo),ja(a-s)<eo&&(a-=s*eo),r=function(e,t,n,r){var i,a,u=m(e-n);return ja(u)>eo?o((m(t)*(a=x(r))*m(n)-m(r)*(i=x(t))*m(e))/(i*a*u)):(t+r)/2}(n,r,a,u),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=u),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*io,r.point(-no,i),r.point(0,i),r.point(no,i),r.point(no,0),r.point(no,-i),r.point(0,-i),r.point(-no,-i),r.point(-no,0),r.point(-no,i);else if(ja(e[0]-t[0])>eo){var a=e[0]<t[0]?no:-no;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}),[-no,-no/2]);Na.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),(i=a(e)).valid=!0,i},extent:function(u){return arguments.length?(a=tn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(Na.geo.conicEqualArea=function(){return nn(rn)}).raw=rn,Na.geo.albers=function(){return Na.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Na.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(r(a,o),t)||i(a,o),t}var t,n,r,i,a=Na.geo.albers(),o=Na.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Na.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(.12<=i&&.234>i&&-.425<=r&&-.214>r?o:.166<=i&&.234>i&&-.214<=r&&-.115>r?u:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),u.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),u.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var l=a.scale(),c=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(s).point,r=o.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+eo,f+.12*l+eo],[c-.214*l-eo,f+.234*l-eo]]).stream(s).point,i=u.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+eo,f+.166*l+eo],[c-.115*l-eo,f+.234*l-eo]]).stream(s).point,e},e.scale(1070)};var eu,tu,nu,ru,iu,au,ou={point:B,lineStart:B,lineEnd:B,polygonStart:function(){tu=0,ou.lineStart=an},polygonEnd:function(){ou.lineStart=ou.lineEnd=ou.point=B,eu+=ja(tu/2)}},uu={point:function(e,t){e<nu&&(nu=e),e>iu&&(iu=e),t<ru&&(ru=t),t>au&&(au=t)},lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B},su={point:sn,lineStart:ln,lineEnd:cn,polygonStart:function(){su.lineStart=fn},polygonEnd:function(){su.point=sn,su.lineStart=ln,su.lineEnd=cn}};Na.geo.path=function(){function e(e){return e&&("function"==typeof u&&a.pointRadius(+u.apply(this,arguments)),(!o||!o.valid)&&(o=i(a)),Na.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,r,i,a,o,u=4.5;return e.area=function(e){return eu=0,Na.geo.stream(e,i(ou)),eu},e.centroid=function(e){return Uo=Vo=qo=Ho=$o=Yo=Xo=Zo=Jo=0,Na.geo.stream(e,i(su)),Jo?[Xo/Jo,Zo/Jo]:Yo?[Ho/Yo,$o/Yo]:qo?[Uo/qo,Vo/qo]:[NaN,NaN]},e.bounds=function(e){return iu=au=-(nu=ru=1/0),Na.geo.stream(e,i(uu)),[[nu,ru],[iu,au]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||pn(e):G,t()):n},e.context=function(e){return arguments.length?(a=null==(r=e)?new on:new dn(e),"function"!=typeof u&&a.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(a.pointRadius(+t),+t),e):u},e.projection(Na.geo.albersUsa()).context(null)},Na.geo.transform=function(e){return{stream:function(t){var n=new xn(t);for(var r in e)n[r]=e[r];return n}}},xn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Na.geo.projection=mn,Na.geo.projectionMutator=vn,(Na.geo.equirectangular=function(){return mn(yn)}).raw=yn.invert=yn,Na.geo.rotation=function(e){function t(t){return(t=e(t[0]*ao,t[1]*ao))[0]*=oo,t[1]*=oo,t}return e=wn(e[0]%360*ao,e[1]*ao,2<e.length?e[2]*ao:0),t.invert=function(t){return(t=e.invert(t[0]*ao,t[1]*ao))[0]*=oo,t[1]*=oo,t},t},bn.invert=yn,Na.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=wn(-e[0]*ao,-e[1]*ao,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=oo,e[1]*=oo}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=An((t=+r)*ao,i*ao),e):t},e.precision=function(r){return arguments.length?(n=An(t*ao,(i=+r)*ao),e):i},e.angle(90)},Na.geo.distance=function(e,t){var n,r=(t[0]-e[0])*ao,i=e[1]*ao,a=t[1]*ao,o=m(r),u=x(r),s=m(i),l=x(i),c=m(a),f=x(a);return p(h((n=f*o)*n+(n=l*c-s*f*u)*n),s*c+l*f*u)},Na.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Na.range(u(a/m)*m,i,m).map(h).concat(Na.range(u(c/v)*v,l,v).map(p)).concat(Na.range(u(r/x)*x,n,x).filter((function(e){return ja(e%m)>eo})).map(f)).concat(Na.range(u(s/g)*g,o,g).filter((function(e){return ja(e%v)>eo})).map(d))}var n,r,i,a,o,s,l,c,f,d,h,p,x=10,g=x,m=90,v=360,_=2.5;return e.lines=function(){return t().map((function(e){return{type:"LineString",coordinates:e}}))},e.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(p(l).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],c=+t[0][1],l=+t[1][1],a>i&&(t=a,a=i,i=t),c>l&&(t=c,c=l,l=t),e.precision(_)):[[a,c],[i,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(_)):[[r,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(x=+t[0],g=+t[1],e):[x,g]},e.precision=function(t){return arguments.length?(_=+t,f=Cn(s,o,90),d=Dn(r,n,_),h=Cn(c,l,90),p=Dn(a,i,_),e):_},e.majorExtent([[-180,-90+eo],[180,90-eo]]).minorExtent([[-180,-80-eo],[180,80+eo]])},Na.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=Nn,i=Fn;return e.distance=function(){return Na.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},Na.geo.interpolate=function(e,t){return function(e,t,n,r){var i=x(t),a=m(t),o=x(r),u=m(r),s=i*x(e),l=i*m(e),c=o*x(n),f=o*m(n),d=2*_(h(ke(r-t)+i*o*ke(n-e))),g=1/m(d),v=d?function(e){var t=m(e*=d)*g,n=m(d-e)*g,r=n*s+t*c,i=n*l+t*f;return[p(i,r)*oo,p(n*a+t*u,h(r*r+i*i))*oo]}:function(){return[e*oo,t*oo]};return v.distance=d,v}(e[0]*ao,e[1]*ao,t[0]*ao,t[1]*ao)},Na.geo.length=function(e){return lu=0,Na.geo.stream(e,cu),lu};var lu,cu={sphere:B,point:B,lineStart:function(){function e(e,i){var a=m(i*=ao),o=x(i),u=ja((e*=ao)-t),s=x(u);lu+=p(h((u=o*m(u))*u+(u=r*a-n*o*s)*u),n*a+r*o*s),t=e,n=a,r=o}var t,n,r;cu.point=function(i,a){t=i*ao,n=m(a*=ao),r=x(a),cu.point=e},cu.lineEnd=function(){cu.point=cu.lineEnd=B}},lineEnd:B,polygonStart:B,polygonEnd:B},fu=On((function(e){return h(2/(1+e))}),(function(e){return 2*_(e/2)}));(Na.geo.azimuthalEqualArea=function(){return mn(fu)}).raw=fu;var du=On((function(e){var t=y(e);return t&&t/m(t)}),G);(Na.geo.azimuthalEquidistant=function(){return mn(du)}).raw=du,(Na.geo.conicConformal=function(){return nn(Mn)}).raw=Mn,(Na.geo.conicEquidistant=function(){return nn(Ln)}).raw=Ln;var hu=On((function(e){return 1/e}),Math.atan);(Na.geo.gnomonic=function(){return mn(hu)}).raw=hu,Pn.invert=function(e,t){return[e,2*o(v(t))-io]},(Na.geo.mercator=function(){return zn(Pn)}).raw=Pn;var pu=On((function(){return 1}),Math.asin);(Na.geo.orthographic=function(){return mn(pu)}).raw=pu;var xu=On((function(e){return 1/(1+e)}),(function(e){return 2*o(e)}));(Na.geo.stereographic=function(){return mn(xu)}).raw=xu,In.invert=function(e,t){return[-t,2*o(v(e))-io]},(Na.geo.transverseMercator=function(){var e=zn(In),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=In,Na.geom={},Na.geom.hull=function(e){function t(e){if(3>e.length)return[];var t,i=qe(n),a=qe(r),o=e.length,u=[],s=[];for(t=0;t<o;t++)u.push([+i.call(this,e[t],t),+a.call(this,e[t],t),t]);for(u.sort(Wn),t=0;t<o;t++)s.push([u[t][0],-u[t][1]]);var l=jn(u),c=jn(s),f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],h=[];for(t=l.length-1;0<=t;--t)h.push(e[u[l[t]][2]]);for(t=+f;t<c.length-d;++t)h.push(e[u[c[t]][2]]);return h}var n=Rn,r=Gn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},Na.geom.polygon=function(e){return Ua(e,gu),e};var gu=Na.geom.polygon.prototype=[];gu.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},gu.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],a+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[a*e,o*e]},gu.clip=function(e){for(var t,n,r,i,a,o,u=Vn(e),s=-1,l=this.length-Vn(this),c=this[l-1];++s<l;){for(t=e.slice(),e.length=0,i=this[s],a=t[(r=t.length-u)-1],n=-1;++n<r;)Bn(o=t[n],c,i)?(!Bn(a,c,i)&&e.push(Un(a,o,c,i)),e.push(o)):Bn(a,c,i)&&e.push(Un(a,o,c,i)),a=o;u&&e.push(e[0]),c=i}return e};var mu,vu,_u,yu,bu,wu=[],Su=[];Kn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Qn),t.length},sr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},lr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=hr(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(fr(this,n),n=(e=n).U),n.C=!1,r.C=!0,dr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(dr(this,n),n=(e=n).U),n.C=!1,r.C=!0,fr(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?hr(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n===o?(n.U=i,i=n,e=n.R):(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,fr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,dr(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,fr(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,dr(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,fr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,dr(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},Na.geom.voronoi=function(e){function t(e){var t=Array(e.length),r=u[0][0],i=u[0][1],a=u[1][0],o=u[1][1];return pr(n(e),u).cells.forEach((function(n,u){var s=n.edges,l=n.site;(t[u]=s.length?s.map((function(e){var t=e.start();return[t.x,t.y]})):l.x>=r&&l.x<=a&&l.y>=i&&l.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[]).point=e[u]})),t}function n(e){return e.map((function(e,t){return{x:g(a(e,t)/eo)*eo,y:g(o(e,t)/eo)*eo,i:t}}))}var r=Rn,i=Gn,a=r,o=i,u=ku;return e?t(e):(t.links=function(e){return pr(n(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},t.triangles=function(e){var t=[];return pr(n(e)).cells.forEach((function(n,r){for(var i,a=n.site,o=n.edges.sort(Qn),u=-1,s=o.length,l=o[s-1].edge,c=l.l===a?l.r:l.l;++u<s;)l,i=c,c=(l=o[u].edge).l===a?l.r:l.l,r<i.i&&r<c.i&&0>gr(a,i,c)&&t.push([e[r],e[i.i],e[c.i]])})),t},t.x=function(e){return arguments.length?(a=qe(r=e),t):r},t.y=function(e){return arguments.length?(o=qe(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?ku:e,t):u===ku?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===ku?null:u&&u[1]},t)};var ku=[[-1e6,-1e6],[1e6,1e6]];Na.geom.delaunay=function(e){return Na.geom.voronoi().triangles(e)},Na.geom.quadtree=function(e,t,n,r,i){function a(e){function a(e,t,n,r,i,a,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var s=e.x,c=e.y;if(null==s)e.x=n,e.y=r,e.point=t;else if(.01>ja(s-n)+ja(c-r))l(e,t,n,r,i,a,o,u);else{var f=e.point;e.x=e.y=e.point=null,l(e,f,s,c,i,a,o,u),l(e,t,n,r,i,a,o,u)}}else l(e,t,n,r,i,a,o,u)}function l(e,t,n,r,i,o,u,s){var l=.5*(i+u),c=.5*(o+s),f=n>=l,d=r>=c,h=d<<1|f;e.leaf=!1,f?i=l:u=l,d?o=c:s=c,a(e=e.nodes[h]||(e.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,i,o,u,s)}var c,f,d,h,p,x,g,m,v,_=qe(u),y=qe(s);if(null!=t)x=t,g=n,m=r,v=i;else if(m=v=-(x=g=1/0),f=[],d=[],p=e.length,o)for(h=0;h<p;++h)(c=e[h]).x<x&&(x=c.x),c.y<g&&(g=c.y),c.x>m&&(m=c.x),c.y>v&&(v=c.y),f.push(c.x),d.push(c.y);else for(h=0;h<p;++h){var b=+_(c=e[h],h),w=+y(c,h);b<x&&(x=b),w<g&&(g=w),b>m&&(m=b),w>v&&(v=w),f.push(b),d.push(w)}var S=m-x,k=v-g;S>k?v=g+S:m=x+k;var E={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){a(E,e,+_(e,++h),+y(e,h),x,g,m,v)},visit:function(e){_r(e,E,x,g,m,v)},find:function(e){return yr(E,e[0],e[1],x,g,m,v)}};if(h=-1,null==t){for(;++h<p;)a(E,e[h],f[h],d[h],x,g,m,v);--h}else e.forEach(E.add);return f=d=e=c=null,E}var o,u=Rn,s=Gn;return(o=arguments.length)?(u=mr,s=vr,3===o&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(u=e,a):u},a.y=function(e){return arguments.length?(s=e,a):s},a.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):null==t?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):null==t?null:[r-t,i-n]},a)},Na.interpolateRgb=br,Na.interpolateObject=wr,Na.interpolateNumber=Sr,Na.interpolateString=kr;var Eu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Au=new RegExp(Eu.source,"g");Na.interpolate=Er,Na.interpolators=[function(e,t){var n=typeof t;return("string"==n?_o.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?br:kr:t instanceof Ee?br:Array.isArray(t)?Ar:"object"==n&&isNaN(t)?wr:Sr)(e,t)}],Na.interpolateArray=Ar;var Tu=function(){return G},Cu=Na.map({linear:Tu,poly:function(e){return function(t){return d(t,e)}},quad:function(){return Nr},cubic:function(){return Fr},sin:function(){return Mr},exp:function(){return Lr},circle:function(){return Pr},elastic:function(e,t){var n;return 2>arguments.length&&(t=.45),arguments.length?n=t/ro*_(1/e):(e=1,n=t/4),function(r){return 1+e*d(2,-10*r)*m((r-n)*ro/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return zr}}),Du=Na.map({in:G,out:Cr,"in-out":Dr,"out-in":function(e){return Dr(Cr(e))}});Na.ease=function(e){var t=e.indexOf("-"),n=0<=t?e.slice(0,t):e,r=0<=t?e.slice(t+1):"in";return n=Cu.get(n)||Tu,Tr((r=Du.get(r)||G)(n.apply(null,Fa.call(arguments,1))))},Na.interpolateHcl=function(e,t){e=Na.hcl(e),t=Na.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):180<a?a-=360:-180>a&&(a+=360),function(e){return De(n+a*e,r+o*e,i+u*e)+""}},Na.interpolateHsl=function(e,t){e=Na.hsl(e),t=Na.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):180<a?a-=360:-180>a&&(a+=360),function(e){return Te(n+a*e,r+o*e,i+u*e)+""}},Na.interpolateLab=function(e,t){e=Na.lab(e),t=Na.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,u=t.b-i;return function(e){return Fe(n+a*e,r+o*e,i+u*e)+""}},Na.interpolateRound=Ir,Na.transform=function(e){var t=Ma.createElementNS(Na.ns.prefix.svg,"g");return(Na.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Rr(n?n.matrix:Nu)})(e)},Rr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Nu={a:1,b:0,c:0,d:1,e:0,f:0};Na.interpolateTransform=Br,Na.layout={},Na.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(qr(e[n]));return t}},Na.layout.chord=function(){function e(){var e,l,f,d,h,p={},x=[],g=Na.range(a),m=[];for(n=[],r=[],e=0,d=-1;++d<a;){for(l=0,h=-1;++h<a;)l+=i[d][h];x.push(l),m.push(Na.range(a)),e+=l}for(o&&g.sort((function(e,t){return o(x[e],x[t])})),u&&m.forEach((function(e,t){e.sort((function(e,n){return u(i[t][e],i[t][n])}))})),e=(ro-c*a)/e,l=0,d=-1;++d<a;){for(f=l,h=-1;++h<a;){var v=g[d],_=m[v][h],y=i[v][_],b=l,w=l+=y*e;p[v+"-"+_]={index:v,subindex:_,startAngle:b,endAngle:w,value:y}}r[v]={index:v,startAngle:f,endAngle:l,value:x[v]},l+=c}for(d=-1;++d<a;)for(h=d-1;++h<a;){var S=p[d+"-"+h],k=p[h+"-"+d];(S.value||k.value)&&n.push(S.value<k.value?{source:k,target:S}:{source:S,target:k})}s&&t()}function t(){n.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}var n,r,i,a,o,u,s,l={},c=0;return l.matrix=function(e){return arguments.length?(a=(i=e)&&i.length,n=r=null,l):i},l.padding=function(e){return arguments.length?(c=e,n=r=null,l):c},l.sortGroups=function(e){return arguments.length?(o=e,n=r=null,l):o},l.sortSubgroups=function(e){return arguments.length?(u=e,n=null,l):u},l.sortChords=function(e){return arguments.length?(s=e,n&&t(),l):s},l.chords=function(){return n||e(),n},l.groups=function(){return r||e(),r},l},Na.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,u=i-n,s=a*a+o*o;if(u*u/v<s){if(s<g){var l=t.charge/s;e.px-=a*l,e.py-=o*l}return!0}if(t.point&&s&&s<g){l=t.pointCharge/s;e.px-=a*l,e.py-=o*l}}return!t.charge}}function t(e){e.px=Na.event.x,e.py=Na.event.y,s.resume()}var n,r,i,a,o,u,s={},l=Na.dispatch("start","tick","end"),c=[1,1],f=.9,d=Fu,p=Ou,x=-30,g=Mu,m=.1,v=.64,_=[],y=[];return s.tick=function(){if(.005>(i*=.99))return n=null,l.end({type:"end",alpha:i=0}),!0;var t,r,s,d,p,g,v,b,w,S=_.length,k=y.length;for(r=0;r<k;++r)d=(s=y[r]).source,(g=(b=(p=s.target).x-d.x)*b+(w=p.y-d.y)*w)&&(b*=g=i*o[r]*((g=h(g))-a[r])/g,w*=g,p.x-=b*(v=d.weight+p.weight?d.weight/(d.weight+p.weight):.5),p.y-=w*v,d.x+=b*(v=1-v),d.y+=w*v);if((v=i*m)&&(b=c[0]/2,w=c[1]/2,r=-1,v))for(;++r<S;)(s=_[r]).x+=(b-s.x)*v,s.y+=(w-s.y)*v;if(x)for(function e(t,n,r){var i=0,a=0;if(t.charge=0,!t.leaf)for(var o,u=t.nodes,s=u.length,l=-1;++l<s;)null==(o=u[l])||(e(o,n,r),t.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=n*r[t.point.index];t.charge+=t.pointCharge=c,i+=c*t.point.x,a+=c*t.point.y}t.cx=i/t.charge,t.cy=a/t.charge}(t=Na.geom.quadtree(_),i,u),r=-1;++r<S;)(s=_[r]).fixed||t.visit(e(s));for(r=-1;++r<S;)(s=_[r]).fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*f,s.y-=(s.py-(s.py=s.y))*f);l.tick({type:"tick",alpha:i})},s.nodes=function(e){return arguments.length?(_=e,s):_},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.friction=function(e){return arguments.length?(f=+e,s):f},s.charge=function(e){return arguments.length?(x="function"==typeof e?e:+e,s):x},s.chargeDistance=function(e){return arguments.length?(g=e*e,s):h(g)},s.gravity=function(e){return arguments.length?(m=+e,s):m},s.theta=function(e){return arguments.length?(v=e*e,s):h(v)},s.alpha=function(e){return arguments.length?(e=+e,i?0<e?i=e:(n.c=null,n.t=NaN,n=null,l.end({type:"end",alpha:i=0})):0<e&&(l.start({type:"start",alpha:i=e}),n=Ye(s.tick)),s):i},s.start=function(){function e(e,r){if(!n){for(n=Array(i),s=0;s<i;++s)n[s]=[];for(s=0;s<l;++s){var a=y[s];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,u=n[t],s=-1,c=u.length;++s<c;)if(!isNaN(o=u[s][e]))return o;return Math.random()*r}var t,n,r,i=_.length,l=y.length,f=c[0],h=c[1];for(t=0;t<i;++t)(r=_[t]).index=t,r.weight=0;for(t=0;t<l;++t)"number"==typeof(r=y[t]).source&&(r.source=_[r.source]),"number"==typeof r.target&&(r.target=_[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<i;++t)r=_[t],isNaN(r.x)&&(r.x=e("x",f)),isNaN(r.y)&&(r.y=e("y",h)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof d)for(t=0;t<l;++t)a[t]=+d.call(this,y[t],t);else for(t=0;t<l;++t)a[t]=d;if(o=[],"function"==typeof p)for(t=0;t<l;++t)o[t]=+p.call(this,y[t],t);else for(t=0;t<l;++t)o[t]=p;if(u=[],"function"==typeof x)for(t=0;t<i;++t)u[t]=+x.call(this,_[t],t);else for(t=0;t<i;++t)u[t]=x;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return r||(r=Na.behavior.drag().origin(G).on("dragstart.force",$r).on("drag.force",t).on("dragend.force",Yr)),arguments.length?void this.on("mouseover.force",Xr).on("mouseout.force",Zr).call(r):r},Na.rebind(s,l,"on")};var Fu=20,Ou=1,Mu=1/0;Na.layout.hierarchy=function(){function e(i){var a,o=[i],u=[];for(i.depth=0;null!=(a=o.pop());)if(u.push(a),(l=n.call(e,a,a.depth))&&(s=l.length)){for(var s,l,c;0<=--s;)o.push(c=l[s]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=l}else r&&(a.value=+r.call(e,a,a.depth)||0),delete a.children;return Qr(i,(function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)})),u}var t=ni,n=ei,r=ti;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(Kr(t,(function(e){e.children&&(e.value=0)})),Qr(t,(function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)}))),t},e},Na.layout.partition=function(){function e(e,r){var i=t.call(this,e,r);return function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,u,s,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(u=a[l],n,s=u.value*r,i),n+=s}}(i[0],0,n[0],n[1]/function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=f(r,e(n[a]));return 1+r}(i[0])),i}var t=Na.layout.hierarchy(),n=[1,1];return e.size=function(t){return arguments.length?(n=t,e):n},Jr(e,t)},Na.layout.pie=function(){function e(u){var s,l=u.length,f=u.map((function(t,r){return+n.call(e,t,r)})),d=+("function"==typeof i?i.apply(this,arguments):i),h=("function"==typeof a?a.apply(this,arguments):a)-d,p=c(t(h)/l,+("function"==typeof o?o.apply(this,arguments):o)),x=p*(0>h?-1:1),g=Na.sum(f),m=g?(h-l*x)/g:0,v=Na.range(l),_=[];return null!=r&&v.sort(r===Lu?function(e,t){return f[t]-f[e]}:function(e,t){return r(u[e],u[t])}),v.forEach((function(e){_[e]={data:u[e],value:s=f[e],startAngle:d,endAngle:d+=s*m+x,padAngle:p}})),_}var n=Number,r=Lu,i=0,a=ro,o=0;return e.value=function(t){return arguments.length?(n=t,e):n},e.sort=function(t){return arguments.length?(r=t,e):r},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(a=t,e):a},e.padAngle=function(t){return arguments.length?(o=t,e):o},e};var Lu={};Na.layout.stack=function(){function e(u,s){if(!(d=u.length))return u;var l=u.map((function(n,r){return t.call(e,n,r)})),c=l.map((function(t){return t.map((function(t,n){return[a.call(e,t,n),o.call(e,t,n)]}))})),f=n.call(e,c,s);l=Na.permute(l,f),c=Na.permute(c,f);var d,h,p,x,g=r.call(e,c,s),m=l[0].length;for(p=0;p<m;++p)for(i.call(e,l[0][p],x=g[p],c[0][p][1]),h=1;h<d;++h)i.call(e,l[h][p],x+=c[h-1][p][1],c[h][p][1]);return u}var t=G,n=ui,r=si,i=oi,a=ii,o=ai;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Pu.get(t)||ui,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:zu.get(t)||si,e):r},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var Pu=Na.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(li),a=e.map(ci),o=Na.range(r).sort((function(e,t){return i[e]-i[t]})),u=0,s=0,l=[],c=[];for(t=0;t<r;++t)n=o[t],u<s?(u+=a[n],l.push(n)):(s+=a[n],c.push(n));return c.reverse().concat(l)},reverse:function(e){return Na.range(e.length).reverse()},default:ui}),zu=Na.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],u=0,s=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;n<a;++n)s[n]=(u-o[n])/2;return s},wiggle:function(e){var t,n,r,i,a,o,u,s,l,c=e.length,f=e[0],d=f.length,h=[];for(h[0]=s=l=0,n=1;n<d;++n){for(t=0,i=0;t<c;++t)i+=e[t][n][1];for(t=0,a=0,u=f[n][0]-f[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;a+=o*e[t][n][1]}h[n]=s-=i?a/i*u:0,s<l&&(l=s)}for(n=0;n<d;++n)h[n]-=l;return h},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=1/i}for(n=0;n<a;++n)o[n]=0;return o},zero:si});Na.layout.histogram=function(){function e(e,a){for(var o,u,s=[],l=e.map(n,this),c=r.call(this,l,a),f=i.call(this,c,l,a),d=(a=-1,l.length),h=f.length-1,p=t?1:1/d;++a<h;)(o=s[a]=[]).dx=f[a+1]-(o.x=f[a]),o.y=0;if(0<h)for(a=-1;++a<d;)(u=l[a])>=c[0]&&u<=c[1]&&((o=s[Na.bisect(f,u,1,h)-1]).y+=p,o.push(e[a]));return s}var t=!0,n=Number,r=pi,i=di;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=qe(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return hi(e,t)}:qe(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},Na.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),u=o[0],s=i[0],l=i[1],c=null==t?h:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,Qr(u,(function(e){e.r=+c(e.value)})),Qr(u,_i),r){var d=r*(t?1:f(2*u.r/s,2*u.r/l))/2;Qr(u,(function(e){e.r+=d})),Qr(u,_i),Qr(u,(function(e){e.r-=d}))}return function e(t,n,r,i){var a=t.children;if(t.x=n+=i*t.x,t.y=r+=i*t.y,t.r*=i,a)for(var o=-1,u=a.length;++o<u;)e(a[o],n,r,i)}(u,s/2,l/2,t?1:1/f(2*u.r/s,2*u.r/l)),o}var t,n=Na.layout.hierarchy().sort(xi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},Jr(e,n)},Na.layout.tree=function(){function e(e,s){var l=i.call(this,e,s),c=l[0],f=function(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,o=0,u=a.length;o<u;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(c);if(Qr(f,t),f.parent.m=-f.z,Kr(f,n),u)Kr(c,r);else{var d=c,h=c,p=c;Kr(c,(function(e){e.x<d.x&&(d=e),e.x>h.x&&(h=e),e.depth>p.depth&&(p=e)}));var x=a(d,h)/2-d.x,g=o[0]/(h.x+a(h,d)/2+x),m=o[1]/(p.depth||1);Kr(c,(function(e){e.x=(e.x+x)*g,e.y=e.depth*m}))}return l}function t(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;0<=--a;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var i=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+a(e._,r._),e.m=e.z-i):e.z=i}else r&&(e.z=r.z+a(e._,r._));e.parent.A=function(e,t,n){if(t){for(var r,i=e,o=e,u=t,s=i.parent.children[0],l=i.m,c=o.m,f=u.m,d=s.m;u=Ei(u),i=ki(i),u&&i;)s=ki(s),(o=Ei(o)).a=e,0<(r=u.z+f-i.z-l+a(u._,i._))&&(Ai(Ti(u,e,n),e,r),l+=r,c+=r),f+=u.m,l+=i.m,d+=s.m,c+=o.m;u&&!Ei(o)&&(o.t=u,o.m+=f-c),i&&!ki(s)&&(s.t=i,s.m+=l-d,n=e)}return n}(e,r,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e){e.x*=o[0],e.y=e.depth*o[1]}var i=Na.layout.hierarchy().sort(null).value(null),a=Si,o=[1,1],u=null;return e.separation=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(u=null==(o=t)?r:null,e):u?null:o},e.nodeSize=function(t){return arguments.length?(u=null==(o=t)?null:r,e):u?o:null},Jr(e,i)},Na.layout.cluster=function(){function e(e,a){var o,u=t.call(this,e,a),s=u[0],l=0;Qr(s,(function(e){var t=e.children;t&&t.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(t),e.y=function(e){return 1+Na.max(e,(function(e){return e.y}))}(t)):(e.x=o?l+=n(e,o):0,e.y=0,o=e)}));var c=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(s),f=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(s),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return Qr(s,i?function(e){e.x=(e.x-s.x)*r[0],e.y=(s.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(h-d)*r[0],e.y=(1-(s.y?e.y/s.y:1))*r[1]}),u}var t=Na.layout.hierarchy().sort(null).value(null),n=Si,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},Jr(e,t)},Na.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var a=n.children;if(a&&a.length){var o,u,s,l=p(n),f=[],d=a.slice(),h=1/0,x="slice"===m?l.dx:"dice"===m?l.dy:"slice-dice"===m?1&n.depth?l.dy:l.dx:c(l.dx,l.dy);for(e(d,l.dx*l.dy/n.value),f.area=0;0<(s=d.length);)f.push(o=d[s-1]),f.area+=o.area,"squarify"!==m||(u=r(f,x))<=h?(d.pop(),h=u):(f.area-=f.pop().area,i(f,x,l,!1),x=c(l.dx,l.dy),f.length=f.area=0,h=1/0);f.length&&(i(f,x,l,!0),f.length=f.area=0),a.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var a,o=p(t),u=r.slice(),s=[];for(e(u,o.dx*o.dy/t.value),s.area=0;a=u.pop();)s.push(a),s.area+=a.area,null!=a.z&&(i(s,a.z?o.dx:o.dy,o,!u.length),s.length=s.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(n<a&&(a=n),n>i&&(i=n));return t*=t,(r*=r)?f(t*i*v/r,r/(t*a*v)):1/0}function i(e,t,n,r){var i,a=-1,o=e.length,u=n.x,l=n.y,f=t?s(e.area/t):0;if(t==n.dx){for((r||f>n.dy)&&(f=n.dy);++a<o;)(i=e[a]).x=u,i.y=l,i.dy=f,u+=i.dx=c(n.x+n.dx-u,f?s(i.area/f):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=f,n.dy-=f}else{for((r||f>n.dx)&&(f=n.dx);++a<o;)(i=e[a]).x=u,i.y=l,i.dx=f,l+=i.dy=c(n.y+n.dy-l,f?s(i.area/f):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=f,n.dx-=f}}function a(r){var i=o||u(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=l[0],a.dy=l[1]):a.dx=a.dy=0,o&&u.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),x&&(o=i),i}var o,u=Na.layout.hierarchy(),s=g,l=[1,1],d=null,p=Ci,x=!1,m="squarify",v=.5*(1+h(5));return a.size=function(e){return arguments.length?(l=e,a):l},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Ci(t):Di(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Di(t,e)}return arguments.length?(p=null==(d=e)?Ci:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,a):d;var r},a.round=function(e){return arguments.length?(s=e?g:Number,a):s!=Number},a.sticky=function(e){return arguments.length?(x=e,o=null,a):x},a.ratio=function(e){return arguments.length?(v=e,a):v},a.mode=function(e){return arguments.length?(m=e+"",a):m},Jr(a,u)},Na.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||1<i);return e+t*n*h(-2*l(i)/i)}},logNormal:function(){var e=Na.random.normal.apply(Na,arguments);return function(){return v(e())}},bates:function(e){var t=Na.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},Na.scale={};var Iu={floor:G,ceil:G};Na.scale.linear=function(){return function e(t,n,r,i){function a(){var e=2<c(t.length,n.length)?Pi:Oi,a=i?Vr:Ur;return u=e(t,n,a,r),s=e(n,t,a,Er),o}function o(e){return u(e)}var u,s;return o.invert=function(e){return s(e)},o.domain=function(e){return arguments.length?(t=e.map(Number),a()):t},o.range=function(e){return arguments.length?(n=e,a()):n},o.rangeRound=function(e){return o.range(e).interpolate(Ir)},o.clamp=function(e){return arguments.length?(i=e,a()):i},o.interpolate=function(e){return arguments.length?(r=e,a()):r},o.ticks=function(e){return Gi(t,e)},o.tickFormat=function(e,n){return ji(t,e,n)},o.nice=function(e){return Ii(t,e),a()},o.copy=function(){return e(t,n,r,i)},a()}([0,1],[0,1],Er,!1)};var Ru={s:1,g:1,p:1,r:1,e:1};Na.scale.log=function(){return function e(t,r,i,a){function o(e){return(i?l(0>e?0:e):-l(0<e?0:-e))/l(r)}function s(e){return i?d(r,e):-d(r,-e)}function c(e){return t(o(e))}return c.invert=function(e){return s(t.invert(e))},c.domain=function(e){return arguments.length?(i=0<=e[0],t.domain((a=e.map(Number)).map(o)),c):a},c.base=function(e){return arguments.length?(r=+e,t.domain(a.map(o)),c):r},c.nice=function(){var e=Mi(a.map(o),i?Math:ju);return t.domain(e),a=e.map(s),c},c.ticks=function(){var e=Ni(a),t=[],l=e[0],c=e[1],f=n(o(l)),d=u(o(c)),h=r%1?2:r;if(isFinite(d-f)){if(i){for(;f<d;f++)for(var p=1;p<h;p++)t.push(s(f)*p);t.push(s(f))}else for(t.push(s(f));f++<d;)for(p=h-1;0<p;p--)t.push(s(f)*p);for(f=0;t[f]<l;f++);for(d=t.length;t[d-1]>c;d--);t=t.slice(f,d)}return t},c.tickFormat=function(e,t){if(!arguments.length)return Gu;2>arguments.length?t=Gu:"function"!=typeof t&&(t=Na.format(t));var n=f(1,r*e/c.ticks().length);return function(e){var i=e/s(g(o(e)));return i*r<r-.5&&(i*=r),i<=n?t(e):""}},c.copy=function(){return e(t.copy(),r,i,a)},zi(c,t)}(Na.scale.linear().domain([0,1]),10,!0,[1,10])};var Gu=Na.format(".0e"),ju={floor:function(e){return-u(-e)},ceil:function(e){return-n(-e)}};Na.scale.pow=function(){return function e(t,n,r){function i(e){return t(a(e))}var a=Bi(n),o=Bi(1/n);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(a)),i):r},i.ticks=function(e){return Gi(r,e)},i.tickFormat=function(e,t){return ji(r,e,t)},i.nice=function(e){return i.domain(Ii(r,e))},i.exponent=function(e){return arguments.length?(a=Bi(n=e),o=Bi(1/n),t.domain(r.map(a)),i):n},i.copy=function(){return e(t.copy(),n,r)},zi(i,t)}(Na.scale.linear(),1,[0,1])},Na.scale.sqrt=function(){return Na.scale.pow().exponent(.5)},Na.scale.ordinal=function(){return function e(t,r){function i(e){return u[((o.get(e)||("range"===r.t?o.set(e,t.push(e)):NaN))-1)%u.length]}function a(e,n){return Na.range(t.length).map((function(t){return e+n*t}))}var o,u,s;return i.domain=function(e){if(!arguments.length)return t;t=[],o=new N;for(var n,a=-1,u=e.length;++a<u;)o.has(n=e[a])||o.set(n,t.push(n));return i[r.t].apply(i,r.a)},i.range=function(e){return arguments.length?(u=e,s=0,r={t:"range",a:arguments},i):u},i.rangePoints=function(e,n){2>arguments.length&&(n=0);var o=e[0],l=e[1],c=2>t.length?(o=(o+l)/2,0):(l-o)/(t.length-1+n);return u=a(o+c*n/2,c),s=0,r={t:"rangePoints",a:arguments},i},i.rangeRoundPoints=function(e,n){2>arguments.length&&(n=0);var o=e[0],l=e[1],c=2>t.length?(o=l=g((o+l)/2),0):0|(l-o)/(t.length-1+n);return u=a(o+g(c*n/2+(l-o-(t.length-1+n)*c)/2),c),s=0,r={t:"rangeRoundPoints",a:arguments},i},i.rangeBands=function(e,n,o){2>arguments.length&&(n=0),3>arguments.length&&(o=n);var l=e[1]<e[0],c=e[l-0],f=e[1-l],d=(f-c)/(t.length-n+2*o);return u=a(c+d*o,d),l&&u.reverse(),s=d*(1-n),r={t:"rangeBands",a:arguments},i},i.rangeRoundBands=function(e,o,l){2>arguments.length&&(o=0),3>arguments.length&&(l=o);var c=e[1]<e[0],f=e[c-0],d=e[1-c],h=n((d-f)/(t.length-o+2*l));return u=a(f+g((d-f-(t.length-o)*h)/2),h),c&&u.reverse(),s=g(h*(1-o)),r={t:"rangeRoundBands",a:arguments},i},i.rangeBand=function(){return s},i.rangeExtent=function(){return Ni(r.a[0])},i.copy=function(){return e(t,r)},i.domain(t)}([],{t:"range",a:[[]]})},Na.scale.category10=function(){return Na.scale.ordinal().range(Wu)},Na.scale.category20=function(){return Na.scale.ordinal().range(Bu)},Na.scale.category20b=function(){return Na.scale.ordinal().range(Uu)},Na.scale.category20c=function(){return Na.scale.ordinal().range(Vu)};var Wu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Re),Bu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Re),Uu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Re),Vu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Re);Na.scale.quantile=function(){return function e(t,n){function r(){var e=0,r=n.length;for(a=[];++e<r;)a[e-1]=Na.quantile(t,e/r);return i}function i(e){if(!isNaN(e=+e))return n[Na.bisect(a,e)]}var a;return i.domain=function(e){return arguments.length?(t=e.map(k).filter(E).sort(S),r()):t},i.range=function(e){return arguments.length?(n=e,r()):n},i.quantiles=function(){return a},i.invertExtent=function(e){return 0>(e=n.indexOf(e))?[NaN,NaN]:[0<e?a[e-1]:t[0],e<a.length?a[e]:t[t.length-1]]},i.copy=function(){return e(t,n)},r()}([],[])},Na.scale.quantize=function(){return function e(t,r,i){function a(e){return i[f(0,c(s,n(u*(e-t))))]}function o(){return u=i.length/(r-t),s=i.length-1,a}var u,s;return a.domain=function(e){return arguments.length?(t=+e[0],r=+e[e.length-1],o()):[t,r]},a.range=function(e){return arguments.length?(i=e,o()):i},a.invertExtent=function(e){return[e=0>(e=i.indexOf(e))?NaN:e/u+t,e+1/u]},a.copy=function(){return e(t,r,i)},o()}(0,1,[0,1])},Na.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[Na.bisect(t,e)]}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(e){return arguments.length?(n=e,r):n},r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},r.copy=function(){return e(t,n)},r}([.5],[0,1])},Na.scale.identity=function(){return function e(t){function n(e){return+e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(e){return Gi(t,e)},n.tickFormat=function(e,n){return ji(t,e,n)},n.copy=function(){return e(t)},n}([0,1])},Na.svg={},Na.svg.arc=function(){function e(){var e=f(0,+r.apply(this,arguments)),d=f(0,+i.apply(this,arguments)),p=u.apply(this,arguments)-io,g=s.apply(this,arguments)-io,v=t(g-p),_=p>g?0:1;if(d<e&&(b=d,d=e,e=b),v>=ro-eo)return n(d,_)+(e?n(e,1-_):"")+"Z";var b,w,S,k,E,A,T,C,D,N,F,O,M=0,L=0,P=[];if((k=(+l.apply(this,arguments)||0)/2)&&(S=o===qu?h(e*e+d*d):+o.apply(this,arguments),!_&&(L*=-1),d&&(L=we(S/d*m(k))),e&&(M=we(S/e*m(k)))),d){E=d*x(p+L),A=d*m(p+L),T=d*x(g-L),C=d*m(g-L);var z=t(g-p-2*L)<=no?0:1;if(L&&Xi(E,A,T,C)===_^z){var I=(p+g)/2;E=d*x(I),A=d*m(I),T=C=null}}else E=A=0;if(e){D=e*x(g-M),N=e*m(g-M),F=e*x(p+M),O=e*m(p+M);var R=t(p-g+2*M)<=no?0:1;if(M&&Xi(D,N,F,O)===1-_^R){var G=(p+g)/2;D=e*x(G),N=e*m(G),F=O=null}}else D=N=0;if(v>eo&&.001<(b=c(t(d-e)/2,+a.apply(this,arguments)))){w=e<d^_?0:1;var j=b,W=b;if(v<no){var B=null==F?[D,N]:null==T?[E,A]:Un([E,A],[F,O],[T,C],[D,N]),U=E-B[0],V=A-B[1],q=T-B[0],H=C-B[1],$=1/m(y((U*q+V*H)/(h(U*U+V*V)*h(q*q+H*H)))/2),Y=h(B[0]*B[0]+B[1]*B[1]);W=c(b,(e-Y)/($-1)),j=c(b,(d-Y)/($+1))}if(null!=T){var X=Zi(null==F?[D,N]:[F,O],[E,A],d,j,_),Z=Zi([T,C],[D,N],d,j,_);b===j?P.push("M",X[0],"A",j,",",j," 0 0,",w," ",X[1],"A",d,",",d," 0 ",1-_^Xi(X[1][0],X[1][1],Z[1][0],Z[1][1]),",",_," ",Z[1],"A",j,",",j," 0 0,",w," ",Z[0]):P.push("M",X[0],"A",j,",",j," 0 1,",w," ",Z[0])}else P.push("M",E,",",A);if(null!=F){var J=Zi([E,A],[F,O],e,-W,_),K=Zi([D,N],null==T?[E,A]:[T,C],e,-W,_);b===W?P.push("L",K[0],"A",W,",",W," 0 0,",w," ",K[1],"A",e,",",e," 0 ",_^Xi(K[1][0],K[1][1],J[1][0],J[1][1]),",",1-_," ",J[1],"A",W,",",W," 0 0,",w," ",J[0]):P.push("L",K[0],"A",W,",",W," 0 0,",w," ",J[0])}else P.push("L",D,",",N)}else P.push("M",E,",",A),null!=T&&P.push("A",d,",",d," 0 ",z,",",_," ",T,",",C),P.push("L",D,",",N),null!=F&&P.push("A",e,",",e," 0 ",R,",",1-_," ",F,",",O);return P.push("Z"),P.join("")}function n(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var r=Vi,i=qi,a=Ui,o=qu,u=Hi,s=$i,l=Yi;return e.innerRadius=function(t){return arguments.length?(r=qe(t),e):r},e.outerRadius=function(t){return arguments.length?(i=qe(t),e):i},e.cornerRadius=function(t){return arguments.length?(a=qe(t),e):a},e.padRadius=function(t){return arguments.length?(o=t==qu?qu:qe(t),e):o},e.startAngle=function(t){return arguments.length?(u=qe(t),e):u},e.endAngle=function(t){return arguments.length?(s=qe(t),e):s},e.padAngle=function(t){return arguments.length?(l=qe(t),e):l},e.centroid=function(){var e=(+r.apply(this,arguments)+ +i.apply(this,arguments))/2,t=(+u.apply(this,arguments)+ +s.apply(this,arguments))/2-io;return[x(t)*e,m(t)*e]},e};var qu="auto";Na.svg.line=function(){return Ji(G)};var Hu=Na.map({linear:Ki,"linear-closed":Qi,step:function(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return 1<n&&i.push("H",r[0]),i.join("")},"step-before":ea,"step-after":ta,basis:ia,"basis-open":function(e){if(4>e.length)return Ki(e);for(var t,n=[],r=-1,i=e.length,a=[0],o=[0];3>++r;)t=e[r],a.push(t[0]),o.push(t[1]);for(n.push(aa(Xu,a)+","+aa(Xu,o)),--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),oa(n,a,o);return n.join("")},"basis-closed":function(e){for(var t,n,r=-1,i=e.length,a=i+4,o=[],u=[];4>++r;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[aa(Xu,o),",",aa(Xu,u)],--r;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),oa(t,o,u);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],u=e[n][0]-a,s=e[n][1]-o,l=-1;++l<=n;)i=l/n,(r=e[l])[0]=t*r[0]+(1-t)*(a+i*u),r[1]=t*r[1]+(1-t)*(o+i*s);return ia(e)},cardinal:function(e,t){return 3>e.length?Ki(e):e[0]+na(e,ra(e,t))},"cardinal-open":function(e,t){return 4>e.length?Ki(e):e[1]+na(e.slice(1,-1),ra(e,t))},"cardinal-closed":function(e,t){return 3>e.length?Qi(e):e[0]+na((e.push(e[0]),e),ra([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return 3>e.length?Ki(e):e[0]+na(e,sa(e))}});Hu.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var $u=[0,2/3,1/3,0],Yu=[0,1/3,2/3,0],Xu=[0,1/6,2/3,1/6];Na.svg.line.radial=function(){var e=Ji(la);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ea.reverse=ta,ta.reverse=ea,Na.svg.area=function(){return ca(G)},Na.svg.area.radial=function(){var e=ca(la);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},Na.svg.chord=function(){function e(e,o){var u=t(this,i,e,o),s=t(this,a,e,o);return"M"+u.p0+n(u.r,u.p1,u.a1-u.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(u,s)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,s.r,s.p0)+n(s.r,s.p1,s.a1-s.a0)+r(s.r,s.p1,u.r,u.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),a=o.call(e,i,r),l=u.call(e,i,r)-io,c=s.call(e,i,r)-io;return{r:a,a0:l,a1:c,p0:[a*x(l),a*m(l)],p1:[a*x(c),a*m(c)]}}function n(e,t,n){return"A"+e+","+e+" 0 "+ +(n>no)+",1 "+t}function r(e,t,n,r){return"Q 0,0 "+r}var i=Nn,a=Fn,o=fa,u=Hi,s=$i;return e.radius=function(t){return arguments.length?(o=qe(t),e):o},e.source=function(t){return arguments.length?(i=qe(t),e):i},e.target=function(t){return arguments.length?(a=qe(t),e):a},e.startAngle=function(t){return arguments.length?(u=qe(t),e):u},e.endAngle=function(t){return arguments.length?(s=qe(t),e):s},e},Na.svg.diagonal=function(){function e(e,i){var a=t.call(this,e,i),o=n.call(this,e,i),u=(a.y+o.y)/2,s=[a,{x:a.x,y:u},{x:o.x,y:u},o];return"M"+(s=s.map(r))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var t=Nn,n=Fn,r=da;return e.source=function(n){return arguments.length?(t=qe(n),e):t},e.target=function(t){return arguments.length?(n=qe(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},Na.svg.diagonal.radial=function(){var e=Na.svg.diagonal(),t=da,n=e.projection;return e.projection=function(e){return arguments.length?n(ha(t=e)):t},e},Na.svg.symbol=function(){function e(e,r){return(Zu.get(t.call(this,e,r))||ga)(n.call(this,e,r))}var t=xa,n=pa;return e.type=function(n){return arguments.length?(t=qe(n),e):t},e.size=function(t){return arguments.length?(n=qe(t),e):n},e};var Zu=Na.map({circle:ga,cross:function(e){var t=h(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=h(e/(2*Ku)),n=t*Ku;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=h(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=h(e/Ju),n=t*Ju/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=h(e/Ju),n=t*Ju/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});Na.svg.symbolTypes=Zu.keys();var Ju=h(3),Ku=i(30*ao);$a.transition=function(e){for(var t,n,r=Qu||++rs,i=ba(e),a=[],o=es||{time:Date.now(),ease:Or,delay:0,duration:250},u=-1,s=this.length;++u<s;){a.push(t=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(n=l[c])&&wa(n,c,i,r,o),t.push(n)}return va(a,i,r)},$a.interrupt=function(e){return this.each(null==e?ts:ma(ba(e)))};var Qu,es,ts=ma(ba()),ns=[],rs=0;ns.call=$a.call,ns.empty=$a.empty,ns.node=$a.node,ns.size=$a.size,Na.transition=function(e,t){return e&&e.transition?Qu?e.transition(t):e:Na.selection().transition(e)},Na.transition.prototype=ns,ns.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=X(e);for(var u=-1,s=this.length;++u<s;){o.push(t=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=e.call(r,r.__data__,c,u))?("__data__"in r&&(n.__data__=r.__data__),wa(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return va(o,a,i)},ns.selectAll=function(e){var t,n,r,i,a,o=this.id,u=this.namespace,s=[];e=Z(e);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],d=-1,h=f.length;++d<h;)if(r=f[d]){a=r[u][o],n=e.call(r,r.__data__,d,l),s.push(t=[]);for(var p=-1,x=n.length;++p<x;)(i=n[p])&&wa(i,p,u,o,a),t.push(i)}return va(s,u,o)},ns.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=se(e));for(var i=0,a=this.length;i<a;i++){r.push(t=[]);for(var o,u=0,s=(o=this[i]).length;u<s;u++)(n=o[u])&&e.call(n,n.__data__,u,i)&&t.push(n)}return va(r,this.namespace,this.id)},ns.tween=function(e,t){var n=this.id,r=this.namespace;return 2>arguments.length?this.node()[r][n].tween.get(e):ce(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},ns.attr=function(e,t){function n(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}if(2>arguments.length){for(t in e)this.attr(t,e[t]);return this}var i="transform"==e?Br:Er,a=Na.ns.qualify(e);return _a(this,"attr."+e,t,a.local?function(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(a.space,a.local);return n!==e&&(t=i(n,e),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}:function(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(a);return n!==e&&(t=i(n,e),function(e){this.setAttribute(a,t(e))})})})},ns.attrTween=function(e,t){var n=Na.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},ns.style=function(e,t,n){function r(){this.style.removeProperty(e)}var i=arguments.length;if(3>i){if("string"!=typeof e){for(n in 2>i&&(t=""),e)this.style(n,e[n],t);return this}n=""}return _a(this,"style."+e,t,(function(t){return null==t?r:(t+="",function(){var r,i=w(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=Er(i,t),function(t){this.style.setProperty(e,r(t),n)})})}))},ns.styleTween=function(e,t,n){return 3>arguments.length&&(n=""),this.tween("style."+e,(function(r,i){var a=t.call(this,r,i,w(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}))},ns.text=function(e){return _a(this,"text",e,ya)},ns.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;2>this[e].count&&(t=this.parentNode)&&t.removeChild(this)}))},ns.ease=function(e){var t=this.id,n=this.namespace;return 1>arguments.length?this.node()[n][t].ease:("function"!=typeof e&&(e=Na.ease.apply(Na,arguments)),ce(this,(function(r){r[n][t].ease=e})))},ns.delay=function(e){var t=this.id,n=this.namespace;return 1>arguments.length?this.node()[n][t].delay:ce(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},ns.duration=function(e){var t=this.id,n=this.namespace;return 1>arguments.length?this.node()[n][t].duration:ce(this,"function"==typeof e?function(r,i,a){r[n][t].duration=f(1,e.call(r,r.__data__,i,a))}:(e=f(1,e),function(r){r[n][t].duration=e}))},ns.each=function(e,t){var n=this.id,r=this.namespace;if(2>arguments.length){var i=es,a=Qu;try{Qu=n,ce(this,(function(t,i,a){es=t[r][n],e.call(t,t.__data__,i,a)}))}finally{es=i,Qu=a}}else ce(this,(function(i){var a=i[r][n];(a.event||(a.event=Na.dispatch("start","end","interrupt"))).on(e,t)}));return this},ns.transition=function(){for(var e,t,n,r=this.id,i=++rs,a=this.namespace,o=[],u=0,s=this.length;u<s;u++){o.push(e=[]);for(var l,c=0,f=(l=this[u]).length;c<f;c++)(t=l[c])&&wa(t,c,a,i,{time:(n=t[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return va(o,a,i)},Na.svg.axis=function(){function e(e){e.each((function(){var e,l=Na.select(this),c=this.__chart__||n,d=this.__chart__=n.copy(),h=null==s?d.ticks?d.ticks.apply(d,u):d.domain():s,p=null==t?d.tickFormat?d.tickFormat.apply(d,u):G:t,x=l.selectAll(".tick").data(h,d),g=x.enter().insert("g",".domain").attr("class","tick").style("opacity",eo),m=Na.transition(x.exit()).style("opacity",eo).remove(),v=Na.transition(x.order()).style("opacity",1),_=f(i,0)+o,y=Fi(d),b=l.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),Na.transition(b));g.append("line"),g.append("text");var S,k,E,A,T=g.select("line"),C=v.select("line"),D=x.select("text").text(p),N=g.select("text"),F=v.select("text"),O="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=Sa,S="x",E="y",k="x2",A="y2",D.attr("dy",0>O?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+O*a+"V0H"+y[1]+"V"+O*a)):(e=ka,S="y",E="x",k="y2",A="x2",D.attr("dy",".32em").style("text-anchor",0>O?"end":"start"),w.attr("d","M"+O*a+","+y[0]+"H0V"+y[1]+"H"+O*a)),T.attr(A,O*i),N.attr(E,O*_),C.attr(k,0).attr(A,O*i),F.attr(S,0).attr(E,O*_),d.rangeBand){var M=d,L=M.rangeBand()/2;c=d=function(e){return M(e)+L}}else c.rangeBand?c=d:m.call(e,d,c);g.call(e,c,d),v.call(e,d,d)}))}var t,n=Na.scale.linear(),r=is,i=6,a=6,o=3,u=[10],s=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in as?t+"":is,e):r},e.ticks=function(){return arguments.length?(u=Oa(arguments),e):u},e.tickValues=function(t){return arguments.length?(s=t,e):s},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,a=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var is="bottom",as={top:1,right:1,bottom:1,left:1};Na.svg.brush=function(){function e(a){a.each((function(){var a=Na.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=a.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=a.selectAll(".resize").data(g,G);u.exit().remove(),u.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return os[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var c,f=Na.transition(a),d=Na.transition(o);s&&(c=Fi(s),d.attr("x",c[0]).attr("width",c[1]-c[0]),n(f)),l&&(c=Fi(l),d.attr("y",c[0]).attr("height",c[1]-c[0]),r(f)),t(f)}))}function t(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+d[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"}))}function n(e){e.select(".extent").attr("x",d[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",d[1]-d[0])}function r(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==Na.event.keyCode&&(!N&&(y=null,O[0]-=d[1],O[1]-=h[1],N=2),q())}function g(){32==Na.event.keyCode&&2==N&&(O[0]+=d[1],O[1]+=h[1],N=0,q())}function m(){var e=Na.mouse(S),i=!1;b&&(e[0]+=b[0],e[1]+=b[1]),N||(Na.event.altKey?(!y&&(y=[(d[0]+d[1])/2,(h[0]+h[1])/2]),O[0]=d[+(e[0]<y[0])],O[1]=h[+(e[1]<y[1])]):y=null),C&&v(e,s,0)&&(n(A),i=!0),D&&v(e,l,1)&&(r(A),i=!0),i&&(t(A),E({type:"brush",mode:N?"move":"resize"}))}function v(e,t,n){var r,i,u=Fi(t),s=u[0],l=u[1],g=O[n],m=n?h:d,v=m[1]-m[0];if(N&&(s-=g,l-=v+g),r=(n?x:p)?f(s,c(l,e[n])):e[n],N?i=(r+=g)+v:(y&&(g=f(s,c(l,2*y[n]-r))),g<r?(i=r,r=g):i=g),m[0]!=r||m[1]!=i)return n?o=null:a=null,m[0]=r,m[1]=i,!0}function _(){m(),A.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),Na.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),F(),E({type:"brushend"})}var y,b,S=this,k=Na.select(Na.event.target),E=u.of(S,arguments),A=Na.select(S),T=k.datum(),C=!/^(n|s)$/.test(T)&&s,D=!/^(e|w)$/.test(T)&&l,N=k.classed("extent"),F=ge(S),O=Na.mouse(S),M=Na.select(w(S)).on("keydown.brush",i).on("keyup.brush",g);if(Na.event.changedTouches?M.on("touchmove.brush",m).on("touchend.brush",_):M.on("mousemove.brush",m).on("mouseup.brush",_),A.interrupt().selectAll("*").interrupt(),N)O[0]=d[0]-O[0],O[1]=h[0]-O[1];else if(T){var L=+/w$/.test(T),P=+/^n/.test(T);b=[d[1-L]-O[0],h[1-P]-O[1]],O[0]=d[L],O[1]=h[P]}else Na.event.altKey&&(y=O.slice());A.style("pointer-events","none").selectAll(".resize").style("display",null),Na.select("body").style("cursor",k.style("cursor")),E({type:"brushstart"}),m()}var a,o,u=$(e,"brushstart","brush","brushend"),s=null,l=null,d=[0,0],h=[0,0],p=!0,x=!0,g=us[0];return e.event=function(e){e.each((function(){var e=u.of(this,arguments),t={x:d,y:h,i:a,j:o},n=this.__chart__||t;this.__chart__=t,Qu?Na.select(this).transition().each("start.brush",(function(){a=n.i,o=n.j,d=n.x,h=n.y,e({type:"brushstart"})})).tween("brush:brush",(function(){var n=Ar(d,t.x),r=Ar(h,t.y);return a=o=null,function(i){d=t.x=n(i),h=t.y=r(i),e({type:"brush",mode:"resize"})}})).each("end.brush",(function(){a=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})})):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))}))},e.x=function(t){return arguments.length?(g=us[!(s=t)<<1|!l],e):s},e.y=function(t){return arguments.length?(g=us[!s<<1|!(l=t)],e):l},e.clamp=function(t){return arguments.length?(s&&l?(p=!!t[0],x=!!t[1]):s?p=!!t:l&&(x=!!t),e):s&&l?[p,x]:s?p:l?x:null},e.extent=function(t){var n,r,i,u,c;return arguments.length?(s&&(n=t[0],r=t[1],l&&(n=n[0],r=r[0]),a=[n,r],s.invert&&(n=s(n),r=s(r)),r<n&&(c=n,n=r,r=c),(n!=d[0]||r!=d[1])&&(d=[n,r])),l&&(i=t[0],u=t[1],s&&(i=i[1],u=u[1]),o=[i,u],l.invert&&(i=l(i),u=l(u)),u<i&&(c=i,i=u,u=c),(i!=h[0]||u!=h[1])&&(h=[i,u])),e):(s&&(a?(n=a[0],r=a[1]):(n=d[0],r=d[1],s.invert&&(n=s.invert(n),r=s.invert(r)),r<n&&(c=n,n=r,r=c))),l&&(o?(i=o[0],u=o[1]):(i=h[0],u=h[1],l.invert&&(i=l.invert(i),u=l.invert(u)),u<i&&(c=i,i=u,u=c))),s&&l?[[n,i],[r,u]]:s?[n,r]:l&&[i,u])},e.clear=function(){return e.empty()||(d=[0,0],h=[0,0],a=o=null),e},e.empty=function(){return!!s&&d[0]==d[1]||!!l&&h[0]==h[1]},Na.rebind(e,u,"on")};var os={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},us=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],ss=Co.format=Lo.timeFormat,ls=ss.utc,cs=ls("%Y-%m-%dT%H:%M:%S.%LZ");ss.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ea:cs,Ea.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ea.toString=cs.toString,Co.second=nt((function(e){return new Do(1e3*n(e/1e3))}),(function(e,t){e.setTime(e.getTime()+1e3*n(t))}),(function(e){return e.getSeconds()})),Co.seconds=Co.second.range,Co.seconds.utc=Co.second.utc.range,Co.minute=nt((function(e){return new Do(6e4*n(e/6e4))}),(function(e,t){e.setTime(e.getTime()+6e4*n(t))}),(function(e){return e.getMinutes()})),Co.minutes=Co.minute.range,Co.minutes.utc=Co.minute.utc.range,Co.hour=nt((function(e){var t=e.getTimezoneOffset()/60;return new Do(36e5*(n(e/36e5-t)+t))}),(function(e,t){e.setTime(e.getTime()+36e5*n(t))}),(function(e){return e.getHours()})),Co.hours=Co.hour.range,Co.hours.utc=Co.hour.utc.range,Co.month=nt((function(e){return(e=Co.day(e)).setDate(1),e}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e){return e.getMonth()})),Co.months=Co.month.range,Co.months.utc=Co.month.utc.range;var fs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ds=[[Co.second,1],[Co.second,5],[Co.second,15],[Co.second,30],[Co.minute,1],[Co.minute,5],[Co.minute,15],[Co.minute,30],[Co.hour,1],[Co.hour,3],[Co.hour,6],[Co.hour,12],[Co.day,1],[Co.day,2],[Co.week,1],[Co.month,1],[Co.month,3],[Co.year,1]],hs=ss.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Vt]]),ps={range:function(e,t,n){return Na.range(u(e/n)*n,+t,n).map(Ta)},floor:G,ceil:G};ds.year=Co.year,Co.scale=function(){return Aa(Na.scale.linear(),ds,hs)};var xs=ds.map((function(e){return[e[0].utc,e[1]]})),gs=ls.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Vt]]);xs.year=Co.year.utc,Co.scale.utc=function(){return Aa(Na.scale.linear(),xs,gs)},Na.text=He((function(e){return e.responseText})),Na.json=function(e,t){return $e(e,"application/json",Ca,t)},Na.html=function(e,t){return $e(e,"text/html",Da,t)},Na.xml=He((function(e){return e.responseXML})),"function"==typeof define&&define.amd?(this.d3=Na,define(Na)):module.exports?module.exports=Na:this.d3=Na,this.d3=Na}(),function(e){var t,n,r="0.5.0",i="hasOwnProperty",a=/[\.\/]/,o=/\s*,\s*/,u=function(e,t){return e-t},s={n:{}},l=function(){for(var e=0,t=this.length;t>e;e++)if(void 0!==this[e])return this[e]},c=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},f=Object.prototype.toString,d=String,h=Array.isArray||function(e){return e instanceof Array||"[object Array]"==f.call(e)};eve=function(e,r){var i,a=n,o=Array.prototype.slice.call(arguments,2),s=eve.listeners(e),f=0,d=[],h={},p=[],x=t;p.firstDefined=l,p.lastDefined=c,t=e,n=0;for(var g=0,m=s.length;m>g;g++)"zIndex"in s[g]&&(d.push(s[g].zIndex),s[g].zIndex<0&&(h[s[g].zIndex]=s[g]));for(d.sort(u);d[f]<0;)if(i=h[d[f++]],p.push(i.apply(r,o)),n)return n=a,p;for(g=0;m>g;g++)if("zIndex"in(i=s[g]))if(i.zIndex==d[f]){if(p.push(i.apply(r,o)),n)break;do{if((i=h[d[++f]])&&p.push(i.apply(r,o)),n)break}while(i)}else h[i.zIndex]=i;else if(p.push(i.apply(r,o)),n)break;return n=a,t=x,p},eve._events=s,eve.listeners=function(e){var t,n,r,i,o,u,l,c,f=h(e)?e:e.split(a),d=s,p=[d],x=[];for(i=0,o=f.length;o>i;i++){for(c=[],u=0,l=p.length;l>u;u++)for(n=[(d=p[u].n)[f[i]],d["*"]],r=2;r--;)(t=n[r])&&(c.push(t),x=x.concat(t.f||[]));p=c}return x},eve.separator=function(e){e?(e="["+(e=d(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",a=new RegExp(e)):a=/[\.\/]/},eve.on=function(e,t){if("function"!=typeof t)return function(){};for(var n=h(e)?h(e[0])?e:[e]:d(e).split(o),r=0,i=n.length;i>r;r++)!function(e){for(var n,r=h(e)?e:d(e).split(a),i=s,o=0,u=r.length;u>o;o++)i=(i=i.n).hasOwnProperty(r[o])&&i[r[o]]||(i[r[o]]={n:{}});for(i.f=i.f||[],o=0,u=i.f.length;u>o;o++)if(i.f[o]==t){n=!0;break}!n&&i.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},eve.f=function(e){var t=[].slice.call(arguments,1);return function(){eve.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},eve.stop=function(){n=1},eve.nt=function(e){var n=h(t)?t.join("."):t;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(n):n},eve.nts=function(){return h(t)?t:t.split(a)},eve.off=eve.unbind=function(e,t){if(e){var n=h(e)?h(e[0])?e:[e]:d(e).split(o);if(n.length>1)for(var r=0,u=n.length;u>r;r++)eve.off(n[r],t);else{n=h(e)?e:d(e).split(a);var l,c,f,p,x,g=[s],m=[];for(r=0,u=n.length;u>r;r++)for(p=0;p<g.length;p+=f.length-2){if(f=[p,1],l=g[p].n,"*"!=n[r])l[n[r]]&&(f.push(l[n[r]]),m.unshift({n:l,name:n[r]}));else for(c in l)l[i](c)&&(f.push(l[c]),m.unshift({n:l,name:c}));g.splice.apply(g,f)}for(r=0,u=g.length;u>r;r++)for(l=g[r];l.n;){if(t){if(l.f){for(p=0,x=l.f.length;x>p;p++)if(l.f[p]==t){l.f.splice(p,1);break}!l.f.length&&delete l.f}for(c in l.n)if(l.n[i](c)&&l.n[c].f){var v=l.n[c].f;for(p=0,x=v.length;x>p;p++)if(v[p]==t){v.splice(p,1);break}!v.length&&delete l.n[c].f}}else for(c in delete l.f,l.n)l.n[i](c)&&l.n[c].f&&delete l.n[c].f;l=l.n}e:for(r=0,u=m.length;u>r;r++){for(c in(l=m[r]).n[l.name].f)continue e;for(c in l.n[l.name].n)continue e;delete l.n[l.name]}}}else eve._events=s={n:{}}},eve.once=function(e,t){var n=function(){return eve.off(e,n),t.apply(this,arguments)};return eve.on(e,n)},eve.version=r,eve.toString=function(){return"You are running Eve "+r},module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],(function(){return eve})):e.eve=eve}(this),function(e,t){if("function"==typeof define&&define.amd)define(["eve"],(function(n){return t(e,n)}));else{var n=__webpack_require__(12);module.exports=t(e,n)}}(window||this,(function(e,t){var n=function(t){var n,r={},i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,16,(new Date).getTime()),!0},a=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},o=0,u="M"+(+new Date).toString(36),s=function(){return u+(o++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var n=t.s-e;t.b+=t.dur*n,t.B+=t.dur*n,t.s=e},f=function(e){return null==e?this.spd:void(this.spd=e)},d=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},h=function(){var e=this;delete r[e.id],e.update(),t("mina.stop."+e.id,e)},p=function(){var e=this;e.pdif||(delete r[e.id],e.update(),e.pdif=e.get()-e.b)},x=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,r[e.id]=e,m())},g=function(){var e,t=this;if(a(t.start)){e=[];for(var n=0,r=t.start.length;r>n;n++)e[n]=+t.start[n]+(t.end[n]-t.start[n])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},m=function(e){if(e){var a=0;for(var o in r)if(r.hasOwnProperty(o)){var u=r[o],s=u.get();a++,u.s=(s-u.b)/(u.dur/u.spd),u.s>=1&&(delete r[o],u.s=1,a--,function(e){setTimeout((function(){t("mina.finish."+e.id,e)}))}(u)),u.update()}n=!!a&&i(m)}else n||(n=i(m))},v=function(e,t,n,i,a,o,u){var l={id:s(),start:e,end:t,b:n,s:0,dur:i-n,spd:1,get:a,set:o,easing:u||v.linear,status:c,speed:f,duration:d,stop:h,pause:p,resume:x,update:g};r[l.id]=l;var _,y=0;for(_ in r)if(r.hasOwnProperty(_)&&2==++y)break;return 1==y&&m(),l};return v.time=l,v.getById=function(e){return r[e]||null},v.linear=function(e){return e},v.easeout=function(e){return Math.pow(e,1.7)},v.easein=function(e){return Math.pow(e,.48)},v.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,n=Math.sqrt(.1734+t*t),r=n-t,i=-n-t,a=Math.pow(Math.abs(r),1/3)*(0>r?-1:1)+Math.pow(Math.abs(i),1/3)*(0>i?-1:1)+.5;return 3*(1-a)*a*a+a*a*a},v.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},v.backout=function(e){if(0==e)return 0;var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},v.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},v.bounce=function(e){var t,n=7.5625,r=2.75;return 1/r>e?t=n*e*e:2/r>e?t=n*(e-=1.5/r)*e+.75:2.5/r>e?t=n*(e-=2.25/r)*e+.9375:t=n*(e-=2.625/r)*e+.984375,t},e.mina=v,v}(void 0===t?function(){}:t),r=function(e){function n(e,t){if(e){if(e.nodeType)return p(e);if(i(e,"array")&&n.set)return n.set.apply(n,e);if(e instanceof c)return e;if(null==t)return p(e=x.doc.querySelector(String(e)))}return new h(e=null==e?"100%":e,t=null==t?"100%":t)}function r(e,t){if(t){if("#text"==e&&(e=x.doc.createTextNode(t.text||t["#text"]||"")),"#comment"==e&&(e=x.doc.createComment(t.text||t["#text"]||"")),"string"==typeof e&&(e=r(e)),"string"==typeof t)return 1==e.nodeType?"xlink:"==t.substring(0,6)?e.getAttributeNS(I,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(R,t.substring(4)):e.getAttribute(t):"text"==t?e.nodeValue:null;if(1==e.nodeType){for(var n in t)if(t[m](n)){var i=v(t[n]);i?"xlink:"==n.substring(0,6)?e.setAttributeNS(I,n.substring(6),i):"xml:"==n.substring(0,4)?e.setAttributeNS(R,n.substring(4),i):e.setAttribute(n,i):e.removeAttribute(n)}}else"text"in t&&(e.nodeValue=t.text)}else e=x.doc.createElementNS(R,e);return e}function i(e,t){return"finite"==(t=v.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||T.call(e).slice(8,-1).toLowerCase()==t)}function a(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function o(e,t,n){return function r(){var i=Array.prototype.slice.call(arguments,0),o=i.join("␀"),u=r.cache=r.cache||{},s=r.count=r.count||[];return u[m](o)?(a(s,o),n?n(u[o]):u[o]):(s.length>=1e3&&delete u[s.shift()],s.push(o),u[o]=e.apply(t,i),n?n(u[o]):u[o])}}function u(e){return e%360*E/180}function s(e){return e.node.ownerSVGElement&&p(e.node.ownerSVGElement)||n.select("svg")}function l(e){i(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,n=0,r=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach((function(e){r.appendChild(e.node)})):r.appendChild(e[t].node);var a=r.childNodes;for(t=0;t<a.length;t++)this[n++]=p(a[t]);return this}function c(e){if(e.snap in G)return G[e.snap];var t;try{t=e.ownerSVGElement}catch(e){}this.node=e,t&&(this.paper=new h(t)),this.type=e.tagName||e.nodeName;var n=this.id=z(this);if(this.anims={},this._={transform:[]},e.snap=n,G[n]=this,"g"==this.type&&(this.add=l),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var r in h.prototype)h.prototype[m](r)&&(this[r]=h.prototype[r])}function f(e){this.node=e}function d(e,t){var n=r(e);return t.appendChild(n),p(n)}function h(e,t){var n,i,a,o=h.prototype;if(e&&e.tagName&&"svg"==e.tagName.toLowerCase()){if(e.snap in G)return G[e.snap];var u=e.ownerDocument;for(var s in n=new c(e),i=e.getElementsByTagName("desc")[0],a=e.getElementsByTagName("defs")[0],i||((i=r("desc")).appendChild(u.createTextNode("Created with Snap")),n.node.appendChild(i)),a||(a=r("defs"),n.node.appendChild(a)),n.defs=a,o)o[m](s)&&(n[s]=o[s]);n.paper=n.root=n}else r((n=d("svg",x.doc.body)).node,{height:t,version:1.1,width:e,xmlns:R});return n}function p(e){return e?e instanceof c||e instanceof f?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new h(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new h(e.contentDocument.getElementsByTagName("svg")[0]):new c(e):e}n.version="0.5.1",n.toString=function(){return"Snap v"+this.version},n._={};var x={win:e.window,doc:e.window.document};n._.glob=x;var m="hasOwnProperty",v=String,_=parseFloat,y=parseInt,b=Math,w=b.max,S=b.min,k=b.abs,E=(b.pow,b.PI),A=(b.round,""),T=Object.prototype.toString,C=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,D=(n._.separator=/[,\s]+/,/[\s]*,[\s]*/),N={hs:1,rg:1},F=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,O=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,M=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,L=0,P="S"+(+new Date).toString(36),z=function(e){return(e&&e.type?e.type:A)+P+(L++).toString(36)},I="http://www.w3.org/1999/xlink",R="http://www.w3.org/2000/svg",G={};n.url=function(e){return"url('#"+e+"')"},n._.$=r,n._.id=z,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,(function(e,t,n,r,a){t=t||r,i&&(t in i&&(i=i[t]),"function"==typeof i&&a&&(i=i()))})),i=(null==i||i==r?e:i)+""};return function(t,r){return v(t).replace(e,(function(e,t){return n(e,t,r)}))}}(),n._.clone=function e(t){if("function"==typeof t||Object(t)!==t)return t;var n=new t.constructor;for(var r in t)t[m](r)&&(n[r]=e(t[r]));return n},n._.cacher=o,n.rad=u,n.deg=function(e){return 180*e/E%360},n.sin=function(e){return b.sin(n.rad(e))},n.tan=function(e){return b.tan(n.rad(e))},n.cos=function(e){return b.cos(n.rad(e))},n.asin=function(e){return n.deg(b.asin(e))},n.acos=function(e){return n.deg(b.acos(e))},n.atan=function(e){return n.deg(b.atan(e))},n.atan2=function(e){return n.deg(b.atan2(e))},n.angle=function e(t,n,r,i,a,o){if(null==a){var u=t-r,s=n-i;return u||s?(180+180*b.atan2(-s,-u)/E+360)%360:0}return e(t,n,a,o)-e(r,i,a,o)},n.len=function(e,t,r,i){return Math.sqrt(n.len2(e,t,r,i))},n.len2=function(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)},n.closestPoint=function(e,t,n){function r(e){var r=e.x-t,i=e.y-n;return r*r+i*i}for(var i,a,o,u,s=e.node,l=s.getTotalLength(),c=l/s.pathSegList.numberOfItems*.125,f=1/0,d=0;l>=d;d+=c)(u=r(o=s.getPointAtLength(d)))<f&&(i=o,a=d,f=u);for(c*=.5;c>.5;){var h,p,x,g,m,v;(x=a-c)>=0&&(m=r(h=s.getPointAtLength(x)))<f?(i=h,a=x,f=m):(g=a+c)<=l&&(v=r(p=s.getPointAtLength(g)))<f?(i=p,a=g,f=v):c*=.5}return{x:i.x,y:i.y,length:a,distance:Math.sqrt(f)}},n.is=i,n.snapTo=function(e,t,n){if(n=i(n,"finite")?n:10,i(e,"array")){for(var r=e.length;r--;)if(k(e[r]-t)<=n)return e[r]}else{var a=t%(e=+e);if(n>a)return t-a;if(a>e-n)return t-a+e}return t},n.getRGB=o((function(e){if(!e||(e=v(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:U};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:U};if(!(N[m](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=j(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:U};var t,r,a,o,u,s,l=e.match(C);return l?(l[2]&&(a=y(l[2].substring(5),16),r=y(l[2].substring(3,5),16),t=y(l[2].substring(1,3),16)),l[3]&&(a=y((u=l[3].charAt(3))+u,16),r=y((u=l[3].charAt(2))+u,16),t=y((u=l[3].charAt(1))+u,16)),l[4]&&(s=l[4].split(D),t=_(s[0]),"%"==s[0].slice(-1)&&(t*=2.55),r=_(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),a=_(s[2]),"%"==s[2].slice(-1)&&(a*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(o=_(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100)),l[5]?(s=l[5].split(D),t=_(s[0]),"%"==s[0].slice(-1)&&(t/=100),r=_(s[1]),"%"==s[1].slice(-1)&&(r/=100),a=_(s[2]),"%"==s[2].slice(-1)&&(a/=100),("deg"==s[0].slice(-3)||"°"==s[0].slice(-1))&&(t/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(o=_(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100),n.hsb2rgb(t,r,a,o)):l[6]?(s=l[6].split(D),t=_(s[0]),"%"==s[0].slice(-1)&&(t/=100),r=_(s[1]),"%"==s[1].slice(-1)&&(r/=100),a=_(s[2]),"%"==s[2].slice(-1)&&(a/=100),("deg"==s[0].slice(-3)||"°"==s[0].slice(-1))&&(t/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(o=_(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100),n.hsl2rgb(t,r,a,o)):(t=S(b.round(t),255),r=S(b.round(r),255),a=S(b.round(a),255),o=S(w(o,0),1),(l={r:t,g:r,b:a,toString:U}).hex="#"+(16777216|a|r<<8|t<<16).toString(16).slice(1),l.opacity=i(o,"finite")?o:1,l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:U}}),n),n.hsb=o((function(e,t,r){return n.hsb2rgb(e,t,r).hex})),n.hsl=o((function(e,t,r){return n.hsl2rgb(e,t,r).hex})),n.rgb=o((function(e,t,n,r){if(i(r,"finite")){var a=b.round;return"rgba("+[a(e),a(t),a(n),+r.toFixed(2)]+")"}return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)}));var j=function(e){var t=x.doc.getElementsByTagName("head")[0]||x.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return(j=o((function(e){if("red"==e.toLowerCase())return n;t.style.color=n,t.style.color=e;var r=x.doc.defaultView.getComputedStyle(t,A).getPropertyValue("color");return r==n?null:r})))(e)},W=function(){return"hsb("+[this.h,this.s,this.b]+")"},B=function(){return"hsl("+[this.h,this.s,this.l]+")"},U=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},V=function(e,t,r){if(null==t&&i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&i(e,string)){var a=n.getRGB(e);e=a.r,t=a.g,r=a.b}return(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255),[e,t,r]},q=function(e,t,r,a){var o={r:e=b.round(255*e),g:t=b.round(255*t),b:r=b.round(255*r),opacity:i(a,"finite")?a:1,hex:n.rgb(e,t,r),toString:U};return i(a,"finite")&&(o.opacity=a),o};n.color=function(e){var t;return i(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):i(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(i(e,"string")&&(e=n.getRGB(e)),i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):((e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=U,e},n.hsb2rgb=function(e,t,n,r){var a,o,u,s,l;return i(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,r=e.o,e=e.h),s=(l=n*t)*(1-k((e=(e*=360)%360/60)%2-1)),a=o=u=n-l,q(a+=[l,s,0,0,s,l][e=~~e],o+=[s,l,l,s,0,0][e],u+=[0,0,s,l,l,s][e],r)},n.hsl2rgb=function(e,t,n,r){var a,o,u,s,l;return i(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),s=(l=2*t*(.5>n?n:1-n))*(1-k((e=(e*=360)%360/60)%2-1)),a=o=u=n-l/2,q(a+=[l,s,0,0,s,l][e=~~e],o+=[s,l,l,s,0,0][e],u+=[0,0,s,l,l,s][e],r)},n.rgb2hsb=function(e,t,n){var r,i;return e=(n=V(e,t,n))[0],t=n[1],n=n[2],{h:((0==(i=(r=w(e,t,n))-S(e,t,n))?null:r==e?(t-n)/i:r==t?(n-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/r,b:r,toString:W}},n.rgb2hsl=function(e,t,n){var r,i,a,o;return e=(n=V(e,t,n))[0],t=n[1],n=n[2],r=((i=w(e,t,n))+(a=S(e,t,n)))/2,{h:((0==(o=i-a)?null:i==e?(t-n)/o:i==t?(n-e)/o+2:(e-t)/o+4)+360)%6*60/360,s:0==o?0:.5>r?o/(2*r):o/(2-2*r),l:r,toString:B}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[];return i(e,"array")&&i(e[0],"array")&&(a=n.path.clone(e)),a.length||v(e).replace(F,(function(e,t,n){var i=[],o=t.toLowerCase();if(n.replace(M,(function(e,t){t&&i.push(+t)})),"m"==o&&i.length>2&&(a.push([t].concat(i.splice(0,2))),o="l",t="m"==t?"l":"L"),"o"==o&&1==i.length&&a.push([t,i[0]]),"r"==o)a.push([t].concat(i));else for(;i.length>=r[o]&&(a.push([t].concat(i.splice(0,r[o]))),r[o]););})),a.toString=n.path.toString,t.arr=n.path.clone(a),a};var H=n.parseTransformString=function(e){if(!e)return null;var t=[];return i(e,"array")&&i(e[0],"array")&&(t=n.path.clone(e)),t.length||v(e).replace(O,(function(e,n,r){var i=[];n.toLowerCase(),r.replace(M,(function(e,t){t&&i.push(+t)})),t.push([n].concat(i))})),t.toString=n.path.toString,t};n._.svgTransform2string=function(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,(function(e,n,r){return r=r.split(/\s*,\s*|\s+/),"rotate"==n&&1==r.length&&r.push(0,0),"scale"==n&&(r.length>2?r=r.slice(0,2):2==r.length&&r.push(0,0),1==r.length&&r.push(r[0],0,0)),"skewX"==n?t.push(["m",1,0,b.tan(u(r[0])),1,0,0]):"skewY"==n?t.push(["m",1,b.tan(u(r[0])),0,1,0,0]):t.push([n.charAt(0)].concat(r)),e})),t},n._.rgTransform=/^[a-z][\s]*-?\.?\d/i,n._.transform2matrix=function(e,t){var r=H(e),i=new n.Matrix;if(r)for(var a=0,o=r.length;o>a;a++){var u,s,l,c,f,d=r[a],h=d.length,p=v(d[0]).toLowerCase(),x=d[0]!=p,g=x?i.invert():0;"t"==p&&2==h?i.translate(d[1],0):"t"==p&&3==h?x?(u=g.x(0,0),s=g.y(0,0),l=g.x(d[1],d[2]),c=g.y(d[1],d[2]),i.translate(l-u,c-s)):i.translate(d[1],d[2]):"r"==p?2==h?(f=f||t,i.rotate(d[1],f.x+f.width/2,f.y+f.height/2)):4==h&&(x?(l=g.x(d[2],d[3]),c=g.y(d[2],d[3]),i.rotate(d[1],l,c)):i.rotate(d[1],d[2],d[3])):"s"==p?2==h||3==h?(f=f||t,i.scale(d[1],d[h-1],f.x+f.width/2,f.y+f.height/2)):4==h?x?(l=g.x(d[2],d[3]),c=g.y(d[2],d[3]),i.scale(d[1],d[1],l,c)):i.scale(d[1],d[1],d[2],d[3]):5==h&&(x?(l=g.x(d[3],d[4]),c=g.y(d[3],d[4]),i.scale(d[1],d[2],l,c)):i.scale(d[1],d[2],d[3],d[4])):"m"==p&&7==h&&i.add(d[1],d[2],d[3],d[4],d[5],d[6])}return i},n._unit2px=function(e,t,n){function i(e){if(null==e)return A;if(e==+e)return e;r(c,{width:e});try{return c.getBBox().width}catch(e){return 0}}function a(e){if(null==e)return A;if(e==+e)return e;r(c,{height:e});try{return c.getBBox().height}catch(e){return 0}}function o(r,i){null==t?l[r]=i(e.attr(r)||0):r==t&&(l=i(null==n?e.attr(r)||0:n))}var u=s(e).node,l={},c=u.querySelector(".svg---mgr");switch(c||(c=r("rect"),r(c,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),u.appendChild(c)),e.type){case"rect":o("rx",i),o("ry",a);case"image":o("width",i),o("height",a);case"text":o("x",i),o("y",a);break;case"circle":o("cx",i),o("cy",a),o("r",i);break;case"ellipse":o("cx",i),o("cy",a),o("rx",i),o("ry",a);break;case"line":o("x1",i),o("x2",i),o("y1",a),o("y2",a);break;case"marker":o("refX",i),o("markerWidth",i),o("refY",a),o("markerHeight",a);break;case"radialGradient":o("fx",i),o("fy",a);break;case"tspan":o("dx",i),o("dy",a);break;default:o(t,i)}return u.removeChild(c),l},x.doc.contains||x.doc.compareDocumentPosition,n._.getSomeDefs=function(e){var t=e.node.ownerSVGElement&&p(e.node.ownerSVGElement)||e.node.parentNode&&p(e.node.parentNode)||n.select("svg")||n(0,0),r=t.select("defs"),i=null!=r&&r.node;return i||(i=d("defs",t.node).node),i},n._.getSomeSVG=s,n.select=function(e){return e=v(e).replace(/([^\\]):/g,"$1\\:"),p(x.doc.querySelector(e))},n.selectAll=function(e){for(var t=x.doc.querySelectorAll(e),r=(n.set||Array)(),i=0;i<t.length;i++)r.push(p(t[i]));return r},setInterval((function(){for(var e in G)if(G[m](e)){var t=G[e],n=t.node;("svg"!=t.type&&!n.ownerSVGElement||"svg"==t.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete G[e]}}),1e4),c.prototype.attr=function(e,n){var r=this,a=r.node;if(!e){if(1!=a.nodeType)return{text:a.nodeValue};for(var o=a.attributes,u={},s=0,l=o.length;l>s;s++)u[o[s].nodeName]=o[s].nodeValue;return u}if(i(e,"string")){if(!(arguments.length>1))return t("snap.util.getattr."+e,r).firstDefined();var c={};c[e]=n,e=c}for(var f in e)e[m](f)&&t("snap.util.attr."+f,r,e[f]);return r},n.parse=function(e){var t=x.doc.createDocumentFragment(),n=!0,r=x.doc.createElement("div");if((e=v(e)).match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",n=!1),r.innerHTML=e,e=r.getElementsByTagName("svg")[0])if(n)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return new f(t)},n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=x.doc.createDocumentFragment(),r=0,i=e.length;i>r;r++){var a=e[r];a.node&&a.node.nodeType&&t.appendChild(a.node),a.nodeType&&t.appendChild(a),"string"==typeof a&&t.appendChild(n.parse(a).node)}return new f(t)},n._.make=d,n._.wrap=p,h.prototype.el=function(e,t){var n=d(e,this.node);return t&&n.attr(t),n},c.prototype.children=function(){for(var e=[],t=this.node.childNodes,r=0,i=t.length;i>r;r++)e[r]=n(t[r]);return e},c.prototype.toJSON=function(){var e=[];return function e(t,n){for(var r=0,i=t.length;i>r;r++){var a={type:t[r].type,attr:t[r].attr()},o=t[r].children();n.push(a),o.length&&e(o,a.childNodes=[])}}([this],e),e[0]},t.on("snap.util.getattr",(function(){var e=t.nt(),n=(e=e.substring(e.lastIndexOf(".")+1)).replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));return $[m](n)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(n):r(this.node,e)}));var $={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",(function(e){var n=t.nt(),i={};i[n=n.substring(n.lastIndexOf(".")+1)]=e;var a=n.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()})),o=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));$[m](o)?this.node.style[a]=null==e?A:e:r(this.node,i)})),h.prototype,n.ajax=function(e,n,r,a){var o=new XMLHttpRequest,u=z();if(o){if(i(n,"function"))a=r,r=n,n=null;else if(i(n,"object")){var s=[];for(var l in n)n.hasOwnProperty(l)&&s.push(encodeURIComponent(l)+"="+encodeURIComponent(n[l]));n=s.join("&")}return o.open(n?"POST":"GET",e,!0),n&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),r&&(t.once("snap.ajax."+u+".0",r),t.once("snap.ajax."+u+".200",r),t.once("snap.ajax."+u+".304",r)),o.onreadystatechange=function(){4==o.readyState&&t("snap.ajax."+u+"."+o.status,a,o)},4==o.readyState?o:(o.send(n),o)}},n.load=function(e,t,r){n.ajax(e,(function(e){var i=n.parse(e.responseText);r?t.call(r,i):t(i)}))};var Y=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,a=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0;return{y:t.top+(g.win.pageYOffset||i.scrollTop||r.scrollTop)-a,x:t.left+(g.win.pageXOffset||i.scrollLeft||r.scrollLeft)-o}};return n.getElementByPoint=function(e,t){var n=(this.canvas,x.doc.elementFromPoint(e,t));if(x.win.opera&&"svg"==n.tagName){var r=Y(n),i=n.createSVGRect();i.x=e-r.x,i.y=t-r.y,i.width=i.height=1;var a=n.getIntersectionList(i,null);a.length&&(n=a[a.length-1])}return n?p(n):null},n.plugin=function(e){e(n,c,h,x,f)},x.win.Snap=n,n}(e||this);return r.plugin((function(n,r,i,a,o){function u(e,t){if(null==t){var r=!0;if(!(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform")))return new n.Matrix;t=n._.svgTransform2string(t)}else t=n._.rgTransform.test(t)?f(t).replace(/\.{3}|\u2026/g,e._.transform||""):n._.svgTransform2string(t),c(t,"array")&&(t=n.path?n.path.toString.call(t):f(t)),e._.transform=t;var i=n._.transform2matrix(t,e.getBBox(1));return r?i:void(e.matrix=i)}function s(e){return function(){var t=e?"<"+this.type:"",n=this.node.attributes,r=this.node.childNodes;if(e)for(var i=0,a=n.length;a>i;i++)t+=" "+n[i].name+'="'+n[i].value.replace(/"/g,'\\"')+'"';if(r.length){for(e&&(t+=">"),i=0,a=r.length;a>i;i++)3==r[i].nodeType?t+=r[i].nodeValue:1==r[i].nodeType&&(t+=m(r[i]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}var l=r.prototype,c=n.is,f=String,d=n._unit2px,h=n._.$,p=n._.make,x=n._.getSomeDefs,g="hasOwnProperty",m=n._.wrap;l.getBBox=function(e){if("tspan"==this.type)return n._.box(this.node.getClientRects().item(0));if(!n.Matrix||!n.path)return this.node.getBBox();var t=this,r=new n.Matrix;if(t.removed)return n._.box();for(;"use"==t.type;)if(e||(r=r.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original)t=t.original;else{var i=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(i.substring(i.indexOf("#")+1))}var a=t._,o=n.path.get[t.type]||n.path.get.deflt;try{return e?(a.bboxwt=o?n.path.getBBox(t.realPath=o(t)):n._.box(t.node.getBBox()),n._.box(a.bboxwt)):(t.realPath=o(t),t.matrix=t.transform().localMatrix,a.bbox=n.path.getBBox(n.path.map(t.realPath,r.add(t.matrix))),n._.box(a.bbox))}catch(e){return n._.box()}};var v=function(){return this.string};l.transform=function(e){var t=this._;if(null==e){for(var r,i=this,a=new n.Matrix(this.node.getCTM()),o=u(this),s=[o],l=new n.Matrix,c=o.toTransformString(),d=f(o)==f(this.matrix)?f(t.transform):c;"svg"!=i.type&&(i=i.parent());)s.push(u(i));for(r=s.length;r--;)l.add(s[r]);return{string:d,globalMatrix:a,totalMatrix:l,localMatrix:o,diffMatrix:a.clone().add(o.invert()),global:a.toTransformString(),total:l.toTransformString(),local:c,toString:v}}return e instanceof n.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):u(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?h(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?h(this.node,{patternTransform:this.matrix}):h(this.node,{transform:this.matrix})),this},l.parent=function(){return m(this.node.parentNode)},l.append=l.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach((function(e){t.add(e)})),this}e=m(e),this.node.appendChild(e.node),e.paper=this.paper}return this},l.appendTo=function(e){return e&&(e=m(e)).append(this),this},l.prepend=function(e){if(e){if("set"==e.type){var t,n=this;return e.forEach((function(e){t?t.after(e):n.prepend(e),t=e})),this}var r=(e=m(e)).parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),r&&r.add()}return this},l.prependTo=function(e){return(e=m(e)).prepend(this),this},l.before=function(e){if("set"==e.type){var t=this;return e.forEach((function(e){var n=e.parent();t.node.parentNode.insertBefore(e.node,t.node),n&&n.add()})),this.parent().add(),this}var n=(e=m(e)).parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),e.paper=this.paper,this},l.after=function(e){var t=(e=m(e)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},l.insertBefore=function(e){e=m(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},l.insertAfter=function(e){e=m(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},l.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},l.select=function(e){return m(this.node.querySelector(e))},l.selectAll=function(e){for(var t=this.node.querySelectorAll(e),r=(n.set||Array)(),i=0;i<t.length;i++)r.push(m(t[i]));return r},l.asPX=function(e,t){return null==t&&(t=this.attr(e)),+d(this,e,t)},l.use=function(){var e,t=this.node.id;return t||(t=this.id,h(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?p(this.type,this.node.parentNode):p("use",this.node.parentNode),h(e.node,{"xlink:href":"#"+t}),e.original=this,e},l.clone=function(){var e=m(this.node.cloneNode(!0));return h(e.node,"id")&&h(e.node,{id:e.id}),function(e){function t(e,t){var r=h(e.node,t);(r=(r=r&&r.match(o))&&r[2])&&"#"==r.charAt()&&((r=r.substring(1))&&(s[r]=(s[r]||[]).concat((function(r){var i={};i[t]=n.url(r),h(e.node,i)}))))}function r(e){var t=h(e.node,"xlink:href");t&&"#"==t.charAt()&&((t=t.substring(1))&&(s[t]=(s[t]||[]).concat((function(t){e.attr("xlink:href","#"+t)}))))}for(var i,a=e.selectAll("*"),o=/^\s*url\(("|'|)(.*)\1\)\s*$/,u=[],s={},l=0,c=a.length;c>l;l++){t(i=a[l],"fill"),t(i,"stroke"),t(i,"filter"),t(i,"mask"),t(i,"clip-path"),r(i);var f=h(i.node,"id");f&&(h(i.node,{id:i.id}),u.push({old:f,id:i.id}))}for(l=0,c=u.length;c>l;l++){var d=s[u[l].old];if(d)for(var p=0,x=d.length;x>p;p++)d[p](u[l].id)}}(e),e.insertAfter(this),e},l.toDefs=function(){return x(this).appendChild(this.node),this},l.pattern=l.toPattern=function(e,t,n,r){var i=p("pattern",x(this));return null==e&&(e=this.getBBox()),c(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,e=e.x),h(i.node,{x:e,y:t,width:n,height:r,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,n,r].join(" ")}),i.node.appendChild(this.node),i},l.marker=function(e,t,n,r,i,a){var o=p("marker",x(this));return null==e&&(e=this.getBBox()),c(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,i=e.refX||e.cx,a=e.refY||e.cy,e=e.x),h(o.node,{viewBox:[e,t,n,r].join(" "),markerWidth:n,markerHeight:r,orient:"auto",refX:i||0,refY:a||0,id:o.id}),o.node.appendChild(this.node),o};var _={};l.data=function(e,r){var i=_[this.id]=_[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,i,null),i;if(1==arguments.length){if(n.is(e,"object")){for(var a in e)e[g](a)&&this.data(a,e[a]);return this}return t("snap.data.get."+this.id,this,i[e],e),i[e]}return i[e]=r,t("snap.data.set."+this.id,this,r,e),this},l.removeData=function(e){return null==e?_[this.id]={}:_[this.id]&&delete _[this.id][e],this},l.outerSVG=l.toString=s(1),l.innerSVG=s(),l.toDataURL=function(){if(e&&e.btoa){var t=this.getBBox(),r=n.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r)))}},o.prototype.select=l.select,o.prototype.selectAll=l.selectAll})),r.plugin((function(e,r,i,a,o){function u(e,t,n){return function(r){var i=r.slice(e,t);return 1==i.length&&(i=i[0]),n?n(i):i}}var s=r.prototype,l=e.is,c=String,f="hasOwnProperty",d=function(e,t,r,i){"function"!=typeof r||r.length||(i=r,r=n.linear),this.attr=e,this.dur=t,r&&(this.easing=r),i&&(this.callback=i)};e._.Animation=d,e.animation=function(e,t,n,r){return new d(e,t,n,r)},s.inAnim=function(){var e=this,t=[];for(var n in e.anims)e.anims[f](n)&&function(e){t.push({anim:new d(e._attrs,e.dur,e.easing,e._callback),mina:e,curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[n]);return t},e.animate=function(e,r,i,a,o,u){"function"!=typeof o||o.length||(u=o,o=n.linear);var s=n.time(),l=n(e,r,s,s+a,n.time,i,o);return u&&t.once("mina.finish."+l.id,u),l},s.stop=function(){for(var e=this.inAnim(),t=0,n=e.length;n>t;t++)e[t].stop();return this},s.animate=function(e,r,i,a){"function"!=typeof i||i.length||(a=i,i=n.linear),e instanceof d&&(a=e.callback,i=e.easing,r=e.dur,e=e.attr);var o,s,h,p,x=[],g=[],m={},v=this;for(var _ in e)if(e[f](_)){v.equal?(o=(p=v.equal(_,c(e[_]))).from,s=p.to,h=p.f):(o=+v.attr(_),s=+e[_]);var y=l(o,"array")?o.length:1;m[_]=u(x.length,x.length+y,h),x=x.concat(o),g=g.concat(s)}var b=n.time(),w=n(x,g,b,b+r,n.time,(function(e){var t={};for(var n in m)m[f](n)&&(t[n]=m[n](e));v.attr(t)}),i);return v.anims[w.id]=w,w._attrs=e,w._callback=a,t("snap.animcreated."+v.id,w),t.once("mina.finish."+w.id,(function(){t.off("mina.*."+w.id),delete v.anims[w.id],a&&a.call(v)})),t.once("mina.stop."+w.id,(function(){t.off("mina.*."+w.id),delete v.anims[w.id]})),v}})),r.plugin((function(e,t,n,r,i){function a(e,t,n,r,i,a){return null==t&&"[object SVGMatrix]"==o.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var o=Object.prototype.toString,u=String,s=Math;!function(t){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=s.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,n,r,i,o){if(e&&e instanceof a)return this.add(e.a,e.b,e.c,e.d,e.e,e.f);var u=e*this.a+t*this.c,s=e*this.b+t*this.d;return this.e+=i*this.a+o*this.c,this.f+=i*this.b+o*this.d,this.c=n*this.a+r*this.c,this.d=n*this.b+r*this.d,this.a=u,this.b=s,this},a.prototype.multLeft=function(e,t,n,r,i,o){if(e&&e instanceof a)return this.multLeft(e.a,e.b,e.c,e.d,e.e,e.f);var u=e*this.a+n*this.b,s=e*this.c+n*this.d,l=e*this.e+n*this.f+i;return this.b=t*this.a+r*this.b,this.d=t*this.c+r*this.d,this.f=t*this.e+r*this.f+o,this.a=u,this.c=s,this.e=l,this},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new a(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new a(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){return this.e+=e*this.a+t*this.c,this.f+=e*this.b+t*this.d,this},t.scale=function(e,t,n,r){return null==t&&(t=e),(n||r)&&this.translate(n,r),this.a*=e,this.b*=e,this.c*=t,this.d*=t,(n||r)&&this.translate(-n,-r),this},t.rotate=function(t,n,r){t=e.rad(t),n=n||0,r=r||0;var i=+s.cos(t).toFixed(9),a=+s.sin(t).toFixed(9);return this.add(i,a,-a,i,n,r),this.add(1,0,0,1,-n,-r)},t.skewX=function(e){return this.skew(e,0)},t.skewY=function(e){return this.skew(0,e)},t.skew=function(t,n){t=t||0,n=n||0,t=e.rad(t),n=e.rad(n);var r=s.tan(t).toFixed(9),i=s.tan(n).toFixed(9);return this.add(1,i,r,1,0,0)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[u.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.determinant=function(){return this.a*this.d-this.b*this.c},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.b],[this.c,this.d]];t.scalex=s.sqrt(n(i[0])),r(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=s.sqrt(n(i[1])),r(i[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var a=i[0][1],o=i[1][1];return 0>o?(t.rotate=e.deg(s.acos(o)),0>a&&(t.rotate=360-t.rotate)):t.rotate=e.deg(s.asin(a)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:"")+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:"")+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:""))}}(a.prototype),e.Matrix=a,e.matrix=function(e,t,n,r,i,o){return new a(e,t,n,r,i,o)}})),r.plugin((function(e,n,r,i,a){function o(r){return function(i){if(t.stop(),i instanceof a&&1==i.node.childNodes.length&&("radialGradient"==i.node.firstChild.tagName||"linearGradient"==i.node.firstChild.tagName||"pattern"==i.node.firstChild.tagName)&&(i=i.node.firstChild,d(this).appendChild(i),i=c(i)),i instanceof n)if("radialGradient"==i.type||"linearGradient"==i.type||"pattern"==i.type){i.node.id||p(i.node,{id:i.id});var o=x(i.node.id)}else o=i.attr(r);else if((o=e.color(i)).error){var u=e(d(this).ownerSVGElement).gradient(i);u?(u.node.id||p(u.node,{id:u.id}),o=x(u.node.id)):o=i}else o=g(o);var s={};s[r]=o,p(this.node,s),this.node.style[r]=v}}function u(e){t.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function s(){return t.stop(),this.node.style.fontSize}var l=e._.make,c=e._.wrap,f=e.is,d=e._.getSomeDefs,h=/^url\((['"]?)([^)]+)\1\)$/,p=e._.$,x=e.url,g=String,m=e._.separator,v="";e.deurl=function(e){var t=String(e).match(h);return t?t[2]:e},t.on("snap.util.attr.mask",(function(e){if(e instanceof n||e instanceof a){if(t.stop(),e instanceof a&&1==e.node.childNodes.length&&(e=e.node.firstChild,d(this).appendChild(e),e=c(e)),"mask"==e.type)var r=e;else(r=l("mask",d(this))).node.appendChild(e.node);!r.node.id&&p(r.node,{id:r.id}),p(this.node,{mask:x(r.id)})}})),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}((function(e){if(e instanceof n||e instanceof a){t.stop();for(var r,i=e.node;i;){if("clipPath"===i.nodeName){r=new n(i);break}if("svg"===i.nodeName){r=void 0;break}i=i.parentNode}r||((r=l("clipPath",d(this))).node.appendChild(e.node),!r.node.id&&p(r.node,{id:r.id})),p(this.node,{"clip-path":x(r.node.id||r.id)})}})),t.on("snap.util.attr.fill",o("fill")),t.on("snap.util.attr.stroke",o("stroke"));var _=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",(function(e){function t(e,t){for(var n=(t-u)/(e-s),r=s;e>r;r++)a[r].offset=+(+u+n*(r-s)).toFixed(2);s=e,u=t}var n=(e=g(e)).match(_);if(!n)return null;var r=n[1],i=n[2],a=n[3];1==(i=i.split(/\s*,\s*/).map((function(e){return+e==e?+e:e}))).length&&0==i[0]&&(i=[]);var o=(a=(a=a.split("-")).map((function(e){var t={color:(e=e.split(":"))[0]};return e[1]&&(t.offset=parseFloat(e[1])),t}))).length,u=0,s=0;o--;for(var l=0;o>l;l++)"offset"in a[l]&&t(l,a[l].offset);return a[o].offset=a[o].offset||100,t(o,a[o].offset),{type:r,params:i,stops:a}})),t.on("snap.util.attr.d",(function(n){t.stop(),f(n,"array")&&f(n[0],"array")&&(n=e.path.toString.call(n)),(n=g(n)).match(/[ruo]/i)&&(n=e.path.toAbsolute(n)),p(this.node,{d:n})}))(-1),t.on("snap.util.attr.#text",(function(e){t.stop(),e=g(e);for(var n=i.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(n)}))(-1),t.on("snap.util.attr.path",(function(e){t.stop(),this.attr({d:e})}))(-1),t.on("snap.util.attr.class",(function(e){t.stop(),this.node.className.baseVal=e}))(-1),t.on("snap.util.attr.viewBox",(function(e){var n;n=f(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):f(e,"array")?e.join(" "):e,p(this.node,{viewBox:n}),t.stop()}))(-1),t.on("snap.util.attr.transform",(function(e){this.transform(e),t.stop()}))(-1),t.on("snap.util.attr.r",(function(e){"rect"==this.type&&(t.stop(),p(this.node,{rx:e,ry:e}))}))(-1),t.on("snap.util.attr.textpath",(function(e){if(t.stop(),"text"==this.type){var r,i,a;if(!e&&this.textPath){for(i=this.textPath;i.node.firstChild;)this.node.appendChild(i.node.firstChild);return i.remove(),void delete this.textPath}if(f(e,"string")){var o=d(this),u=c(o.parentNode).path(e);o.appendChild(u.node),r=u.id,u.attr({id:r})}else(e=c(e))instanceof n&&((r=e.attr("id"))||(r=e.id,e.attr({id:r})));if(r)if(i=this.textPath,a=this.node,i)i.attr({"xlink:href":"#"+r});else{for(i=p("textPath",{"xlink:href":"#"+r});a.firstChild;)i.appendChild(a.firstChild);a.appendChild(i),this.textPath=c(i)}}}))(-1),t.on("snap.util.attr.text",(function(e){if("text"==this.type){for(var n=this.node,r=function(e){var t=p("tspan");if(f(e,"array"))for(var n=0;n<e.length;n++)t.appendChild(r(e[n]));else t.appendChild(i.doc.createTextNode(e));return t.normalize&&t.normalize(),t};n.firstChild;)n.removeChild(n.firstChild);for(var a=r(e);a.firstChild;)n.appendChild(a.firstChild)}t.stop()}))(-1),t.on("snap.util.attr.fontSize",u)(-1),t.on("snap.util.attr.font-size",u)(-1),t.on("snap.util.getattr.transform",(function(){return t.stop(),this.transform()}))(-1),t.on("snap.util.getattr.textpath",(function(){return t.stop(),this.textPath}))(-1),function(){function n(n){return function(){t.stop();var r=i.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+n);return"none"==r?r:e(i.doc.getElementById(r.match(h)[1]))}}function r(e){return function(n){t.stop();var r="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""!=n&&n){if("marker"==n.type){var i=n.node.id;return i||p(n.node,{id:n.id}),void(this.node.style[r]=x(i))}}else this.node.style[r]="none"}}t.on("snap.util.getattr.marker-end",n("end"))(-1),t.on("snap.util.getattr.markerEnd",n("end"))(-1),t.on("snap.util.getattr.marker-start",n("start"))(-1),t.on("snap.util.getattr.markerStart",n("start"))(-1),t.on("snap.util.getattr.marker-mid",n("mid"))(-1),t.on("snap.util.getattr.markerMid",n("mid"))(-1),t.on("snap.util.attr.marker-end",r("end"))(-1),t.on("snap.util.attr.markerEnd",r("end"))(-1),t.on("snap.util.attr.marker-start",r("start"))(-1),t.on("snap.util.attr.markerStart",r("start"))(-1),t.on("snap.util.attr.marker-mid",r("mid"))(-1),t.on("snap.util.attr.markerMid",r("mid"))(-1)}(),t.on("snap.util.getattr.r",(function(){return"rect"==this.type&&p(this.node,"rx")==p(this.node,"ry")?(t.stop(),p(this.node,"rx")):void 0}))(-1),t.on("snap.util.getattr.text",(function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=function e(t){for(var n=[],r=t.childNodes,i=0,a=r.length;a>i;i++){var o=r[i];3==o.nodeType&&n.push(o.nodeValue),"tspan"==o.tagName&&(1==o.childNodes.length&&3==o.firstChild.nodeType?n.push(o.firstChild.nodeValue):n.push(e(o)))}return n}(this.node);return 1==e.length?e[0]:e}}))(-1),t.on("snap.util.getattr.#text",(function(){return this.node.textContent}))(-1),t.on("snap.util.getattr.fill",(function(n){if(!n){t.stop();var r=t("snap.util.getattr.fill",this,!0).firstDefined();return e(e.deurl(r))||r}}))(-1),t.on("snap.util.getattr.stroke",(function(n){if(!n){t.stop();var r=t("snap.util.getattr.stroke",this,!0).firstDefined();return e(e.deurl(r))||r}}))(-1),t.on("snap.util.getattr.viewBox",(function(){t.stop();var n=p(this.node,"viewBox");return n?(n=n.split(m),e._.box(+n[0],+n[1],+n[2],+n[3])):void 0}))(-1),t.on("snap.util.getattr.points",(function(){var e=p(this.node,"points");return t.stop(),e?e.split(m):void 0}))(-1),t.on("snap.util.getattr.path",(function(){var e=p(this.node,"d");return t.stop(),e}))(-1),t.on("snap.util.getattr.class",(function(){return this.node.className.baseVal}))(-1),t.on("snap.util.getattr.fontSize",s)(-1),t.on("snap.util.getattr.font-size",s)(-1)})),r.plugin((function(e,t,n,r,i){var a=/\S+/g,o=String,u=t.prototype;u.addClass=function(e){var t,n,r,i=o(e||"").match(a)||[],u=this.node,s=u.className.baseVal,l=s.match(a)||[];if(i.length){for(t=0;n=i[t++];)~l.indexOf(n)||l.push(n);s!=(r=l.join(" "))&&(u.className.baseVal=r)}return this},u.removeClass=function(e){var t,n,r,i,u=o(e||"").match(a)||[],s=this.node,l=s.className.baseVal,c=l.match(a)||[];if(c.length){for(t=0;r=u[t++];)~(n=c.indexOf(r))&&c.splice(n,1);l!=(i=c.join(" "))&&(s.className.baseVal=i)}return this},u.hasClass=function(e){return!!~(this.node.className.baseVal.match(a)||[]).indexOf(e)},u.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);var n,r,i,o,u=(e||"").match(a)||[],s=this.node,l=s.className.baseVal,c=l.match(a)||[];for(n=0;i=u[n++];)~(r=c.indexOf(i))?c.splice(r,1):c.push(i);return l!=(o=c.join(" "))&&(s.className.baseVal=o),this}})),r.plugin((function(e,n,r,i,a){function o(e){return e}function u(e){return function(t){return+t.toFixed(3)+e}}var s={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},l=String,c=/[a-z]+$/i,f=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;t.on("snap.util.attr",(function(e){var n=l(e).match(f);if(n){var r=t.nt(),i=r.substring(r.lastIndexOf(".")+1),a=this.attr(i),o={};t.stop();var u=n[3]||"",d=a.match(c),h=s[n[1]];if(d&&d==u?e=h(parseFloat(a),+n[2]):(a=this.asPX(i),e=h(this.asPX(i),this.asPX(i,n[2]+u))),isNaN(a)||isNaN(e))return;o[i]=e,this.attr(o)}}))(-10),t.on("snap.util.equal",(function(e,n){var r=l(this.attr(e)||""),i=l(n).match(f);if(i){t.stop();var a=i[3]||"",d=r.match(c),h=s[i[1]];return d&&d==a?{from:parseFloat(r),to:h(parseFloat(r),+i[2]),f:u(d)}:{from:r=this.asPX(e),to:h(r,this.asPX(e,i[2]+a)),f:o}}}))(-10)})),r.plugin((function(n,r,i,a,o){var u=i.prototype,s=n.is;u.rect=function(e,t,n,r,i,a){var o;return null==a&&(a=i),s(e,"object")&&"[object Object]"==e?o=e:null!=e&&(o={x:e,y:t,width:n,height:r},null!=i&&(o.rx=i,o.ry=a)),this.el("rect",o)},u.circle=function(e,t,n){var r;return s(e,"object")&&"[object Object]"==e?r=e:null!=e&&(r={cx:e,cy:t,r:n}),this.el("circle",r)};var l=function(){function e(){this.parentNode.removeChild(this)}return function(t,n){var r=a.doc.createElement("img"),i=a.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){n.call(r),r.onload=r.onerror=null,i.removeChild(r)},r.onerror=e,i.appendChild(r),r.src=t}}();u.image=function(e,t,r,i,a){var o=this.el("image");if(s(e,"object")&&"src"in e)o.attr(e);else if(null!=e){var u={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=r&&(u.x=t,u.y=r),null!=i&&null!=a?(u.width=i,u.height=a):l(e,(function(){n._.$(o.node,{width:this.offsetWidth,height:this.offsetHeight})})),n._.$(o.node,u)}return o},u.ellipse=function(e,t,n,r){var i;return s(e,"object")&&"[object Object]"==e?i=e:null!=e&&(i={cx:e,cy:t,rx:n,ry:r}),this.el("ellipse",i)},u.path=function(e){var t;return s(e,"object")&&!s(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},u.group=u.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},u.svg=function(e,t,n,r,i,a,o,u){var l={};return s(e,"object")&&null==t?l=e:(null!=e&&(l.x=e),null!=t&&(l.y=t),null!=n&&(l.width=n),null!=r&&(l.height=r),null!=i&&null!=a&&null!=o&&null!=u&&(l.viewBox=[i,a,o,u])),this.el("svg",l)},u.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},u.ptrn=function(e,t,n,r,i,a,o,u){if(s(e,"object"))var l=e;else l={patternUnits:"userSpaceOnUse"},e&&(l.x=e),t&&(l.y=t),null!=n&&(l.width=n),null!=r&&(l.height=r),l.viewBox=null!=i&&null!=a&&null!=o&&null!=u?[i,a,o,u]:[e||0,t||0,n||0,r||0];return this.el("pattern",l)},u.use=function(e){return null!=e?(e instanceof r&&(e.attr("id")||e.attr({id:n._.id(e)}),e=e.attr("id")),"#"==String(e).charAt()&&(e=e.substring(1)),this.el("use",{"xlink:href":"#"+e})):r.prototype.use.call(this)},u.symbol=function(e,t,n,r){var i={};return null!=e&&null!=t&&null!=n&&null!=r&&(i.viewBox=[e,t,n,r]),this.el("symbol",i)},u.text=function(e,t,n){var r={};return s(e,"object")?r=e:null!=e&&(r={x:e,y:t,text:n||""}),this.el("text",r)},u.line=function(e,t,n,r){var i={};return s(e,"object")?i=e:null!=e&&(i={x1:e,x2:n,y1:t,y2:r}),this.el("line",i)},u.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return s(e,"object")&&!s(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},u.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return s(e,"object")&&!s(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){function r(){return this.selectAll("stop")}function i(e,t){var r=c("stop"),i={offset:+t+"%"};e=n.color(e),i["stop-color"]=e.hex,e.opacity<1&&(i["stop-opacity"]=e.opacity),c(r,i);for(var a,o=this.stops(),u=0;u<o.length;u++){if(parseFloat(o[u].attr("offset"))>t){this.node.insertBefore(r,o[u].node),a=!0;break}}return a||this.node.appendChild(r),this}function a(){if("linearGradient"==this.type){var e=c(this.node,"x1")||0,t=c(this.node,"x2")||1,r=c(this.node,"y1")||0,i=c(this.node,"y2")||0;return n._.box(e,r,math.abs(t-e),math.abs(i-r))}var a=this.node.cx||.5,o=this.node.cy||.5,u=this.node.r||0;return n._.box(a-u,o-u,2*u,2*u)}function o(e){var r=e,i=this.stops();if("string"==typeof e&&(r=t("snap.util.grad.parse",null,"l(0,0,0,1)"+e).firstDefined().stops),n.is(r,"array")){for(var a=0;a<i.length;a++)if(r[a]){var o=n.color(r[a].color),u={offset:r[a].offset+"%"};u["stop-color"]=o.hex,o.opacity<1&&(u["stop-opacity"]=o.opacity),i[a].attr(u)}else i[a].remove();for(a=i.length;a<r.length;a++)this.addStop(r[a].color,r[a].offset);return this}}function s(e,t,u,s,l){var f=n._.make("linearGradient",e);return f.stops=r,f.addStop=i,f.getBBox=a,f.setStops=o,null!=t&&c(f.node,{x1:t,y1:u,x2:s,y2:l}),f}function l(e,t,o,u,s,l){var f=n._.make("radialGradient",e);return f.stops=r,f.addStop=i,f.getBBox=a,null!=t&&c(f.node,{cx:t,cy:o,r:u}),null!=s&&null!=l&&c(f.node,{fx:s,fy:l}),f}var c=n._.$;u.gradient=function(e){return function(e,n){var r,i=t("snap.util.grad.parse",null,n).firstDefined();if(!i)return null;i.params.unshift(e),r="l"==i.type.toLowerCase()?s.apply(0,i.params):l.apply(0,i.params),i.type!=i.type.toLowerCase()&&c(r.node,{gradientUnits:"userSpaceOnUse"});for(var a=i.stops,o=a.length,u=0;o>u;u++){var f=a[u];r.addStop(f.color,f.offset)}return r}(this.defs,e)},u.gradientLinear=function(e,t,n,r){return s(this.defs,e,t,n,r)},u.gradientRadial=function(e,t,n,r,i){return l(this.defs,e,t,n,r,i)},u.toString=function(){var e,t=this.node.ownerDocument,r=t.createDocumentFragment(),i=t.createElement("div"),a=this.node.cloneNode(!0);return r.appendChild(i),i.appendChild(a),n._.$(a,{xmlns:"http://www.w3.org/2000/svg"}),e=i.innerHTML,r.removeChild(r.firstChild),e},u.toDataURL=function(){return e&&e.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},u.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):u.clear.call({node:t}),t=e}}()})),r.plugin((function(e,t,n,r){function i(e){var t=i.ps=i.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout((function(){for(var n in t)t[O](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])})),t[e]}function a(e,t,n,r){return null==e&&(e=t=n=r=0),null==t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:P.min(n,r)/2,r2:P.max(n,r)/2,r0:P.sqrt(n*n+r*r)/2,path:y(e,t,n,r),vb:[e,t,n,r].join(" ")}}function o(){return this.join(",").replace(M,"$1")}function u(e){var t=F(e);return t.toString=o,t}function s(e,t,n,r,i,a,o,u,s){return null==s?x(e,t,n,r,i,a,o,u):c(e,t,n,r,i,a,o,u,function(e,t,n,r,i,a,o,u,s){if(!(0>s||x(e,t,n,r,i,a,o,u)<s)){var l,c=.5,f=1-c;for(l=x(e,t,n,r,i,a,o,u,f);j(l-s)>.01;)l=x(e,t,n,r,i,a,o,u,f+=(s>l?1:-1)*(c/=2));return f}}(e,t,n,r,i,a,o,u,s))}function l(n,r){function i(e){return+(+e).toFixed(3)}return e._.cacher((function(e,a,o){e instanceof t&&(e=e.attr("d"));for(var u,l,f,d,h,p="",x={},g=0,m=0,v=(e=T(e)).length;v>m;m++){if("M"==(f=e[m])[0])u=+f[1],l=+f[2];else{if(g+(d=s(u,l,f[1],f[2],f[3],f[4],f[5],f[6]))>a){if(r&&!x.start){if(p+=["C"+i((h=s(u,l,f[1],f[2],f[3],f[4],f[5],f[6],a-g)).start.x),i(h.start.y),i(h.m.x),i(h.m.y),i(h.x),i(h.y)],o)return p;x.start=p,p=["M"+i(h.x),i(h.y)+"C"+i(h.n.x),i(h.n.y),i(h.end.x),i(h.end.y),i(f[5]),i(f[6])].join(),g+=d,u=+f[5],l=+f[6];continue}if(!n&&!r)return s(u,l,f[1],f[2],f[3],f[4],f[5],f[6],a-g)}g+=d,u=+f[5],l=+f[6]}p+=f.shift()+f}return x.end=p,n?g:r?x:c(u,l,f[0],f[1],f[2],f[3],f[4],f[5],1)}),null,e._.clone)}function c(e,t,n,r,i,a,o,u,s){var l=1-s,c=G(l,3),f=G(l,2),d=s*s,h=d*s,p=e+2*s*(n-e)+d*(i-2*n+e),x=t+2*s*(r-t)+d*(a-2*r+t),g=n+2*s*(i-n)+d*(o-2*i+n),m=r+2*s*(a-r)+d*(u-2*a+r);return{x:c*e+3*f*s*n+3*l*s*s*i+h*o,y:c*t+3*f*s*r+3*l*s*s*a+h*u,m:{x:p,y:x},n:{x:g,y:m},start:{x:l*e+s*n,y:l*t+s*r},end:{x:l*i+s*o,y:l*a+s*u},alpha:90-180*P.atan2(p-g,x-m)/z}}function f(t,n,r,i,o,u,s,l){e.is(t,"array")||(t=[t,n,r,i,o,u,s,l]);var c=A.apply(null,t);return a(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)}function d(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function h(e,t){return e=a(e),d(t=a(t),e.x,e.y)||d(t,e.x2,e.y)||d(t,e.x,e.y2)||d(t,e.x2,e.y2)||d(e,t.x,t.y)||d(e,t.x2,t.y)||d(e,t.x,t.y2)||d(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function p(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n}function x(e,t,n,r,i,a,o,u,s){null==s&&(s=1);for(var l=(s=s>1?1:0>s?0:s)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,h=0;12>h;h++){var x=l*c[h]+l,g=p(x,e,n,i,o),m=p(x,t,r,a,u),v=g*g+m*m;d+=f[h]*P.sqrt(v)}return l*d}function g(e,t,n,r,i,a,o,u){if(!(R(e,n)<I(i,o)||I(e,n)>R(i,o)||R(t,r)<I(a,u)||I(t,r)>R(a,u))){var s=(e-n)*(a-u)-(t-r)*(i-o);if(s){var l=((e*r-t*n)*(i-o)-(e-n)*(i*u-a*o))/s,c=((e*r-t*n)*(a-u)-(t-r)*(i*u-a*o))/s,f=+l.toFixed(2),d=+c.toFixed(2);if(!(f<+I(e,n).toFixed(2)||f>+R(e,n).toFixed(2)||f<+I(i,o).toFixed(2)||f>+R(i,o).toFixed(2)||d<+I(t,r).toFixed(2)||d>+R(t,r).toFixed(2)||d<+I(a,u).toFixed(2)||d>+R(a,u).toFixed(2)))return{x:l,y:c}}}}function m(e,t,n){if(!h(f(e),f(t)))return n?0:[];for(var r=~~(x.apply(0,e)/8),i=~~(x.apply(0,t)/8),a=[],o=[],u={},s=n?0:[],l=0;r+1>l;l++){var d=c.apply(0,e.concat(l/r));a.push({x:d.x,y:d.y,t:l/r})}for(l=0;i+1>l;l++)d=c.apply(0,t.concat(l/i)),o.push({x:d.x,y:d.y,t:l/i});for(l=0;r>l;l++)for(var p=0;i>p;p++){var m=a[l],v=a[l+1],_=o[p],y=o[p+1],b=j(v.x-m.x)<.001?"y":"x",w=j(y.x-_.x)<.001?"y":"x",S=g(m.x,m.y,v.x,v.y,_.x,_.y,y.x,y.y);if(S){if(u[S.x.toFixed(4)]==S.y.toFixed(4))continue;u[S.x.toFixed(4)]=S.y.toFixed(4);var k=m.t+j((S[b]-m[b])/(v[b]-m[b]))*(v.t-m.t),E=_.t+j((S[w]-_[w])/(y[w]-_[w]))*(y.t-_.t);k>=0&&1>=k&&E>=0&&1>=E&&(n?s++:s.push({x:S.x,y:S.y,t1:k,t2:E}))}}return s}function v(e,t,n){e=T(e),t=T(t);for(var r,i,a,o,u,s,l,c,f,d,h=n?0:[],p=0,x=e.length;x>p;p++){var g=e[p];if("M"==g[0])r=u=g[1],i=s=g[2];else{"C"==g[0]?(f=[r,i].concat(g.slice(1)),r=f[6],i=f[7]):(f=[r,i,r,i,u,s,u,s],r=u,i=s);for(var v=0,_=t.length;_>v;v++){var y=t[v];if("M"==y[0])a=l=y[1],o=c=y[2];else{"C"==y[0]?(d=[a,o].concat(y.slice(1)),a=d[6],o=d[7]):(d=[a,o,a,o,l,c,l,c],a=l,o=c);var b=m(f,d,n);if(n)h+=b;else{for(var w=0,S=b.length;S>w;w++)b[w].segment1=p,b[w].segment2=v,b[w].bez1=f,b[w].bez2=d;h=h.concat(b)}}}}}return h}function _(e){var t=i(e);if(t.bbox)return F(t.bbox);if(!e)return a();for(var n,r=0,o=0,u=[],s=[],l=0,c=(e=T(e)).length;c>l;l++)if("M"==(n=e[l])[0])r=n[1],o=n[2],u.push(r),s.push(o);else{var f=A(r,o,n[1],n[2],n[3],n[4],n[5],n[6]);u=u.concat(f.min.x,f.max.x),s=s.concat(f.min.y,f.max.y),r=n[5],o=n[6]}var d=I.apply(0,u),h=I.apply(0,s),p=a(d,h,R.apply(0,u)-d,R.apply(0,s)-h);return t.bbox=F(p),p}function y(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.toString=o,a}function b(e,t,n,r,i){if(null==i&&null==r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!=i)var a=Math.PI/180,u=e+n*Math.cos(-r*a),s=e+n*Math.cos(-i*a),l=[["M",u,t+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,s,t+n*Math.sin(-i*a)]];else l=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return l.toString=o,l}function w(t){var n=i(t);if(n.abs)return u(n.abs);if(N(t,"array")&&N(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r,a=[],s=0,l=0,c=0,f=0,d=0;"M"==t[0][0]&&(c=s=+t[0][1],f=l=+t[0][2],d++,a[0]=["M",s,l]);for(var h,p,x=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),g=d,m=t.length;m>g;g++){if(a.push(h=[]),(r=(p=t[g])[0])!=r.toUpperCase())switch(h[0]=r.toUpperCase(),h[0]){case"A":h[1]=p[1],h[2]=p[2],h[3]=p[3],h[4]=p[4],h[5]=p[5],h[6]=+p[6]+s,h[7]=+p[7]+l;break;case"V":h[1]=+p[1]+l;break;case"H":h[1]=+p[1]+s;break;case"R":for(var v=[s,l].concat(p.slice(1)),_=2,y=v.length;y>_;_++)v[_]=+v[_]+s,v[++_]=+v[_]+l;a.pop(),a=a.concat(C(v,x));break;case"O":a.pop(),(v=b(s,l,p[1],p[2])).push(v[0]),a=a.concat(v);break;case"U":a.pop(),a=a.concat(b(s,l,p[1],p[2],p[3])),h=["U"].concat(a[a.length-1].slice(-2));break;case"M":c=+p[1]+s,f=+p[2]+l;default:for(_=1,y=p.length;y>_;_++)h[_]=+p[_]+(_%2?s:l)}else if("R"==r)v=[s,l].concat(p.slice(1)),a.pop(),a=a.concat(C(v,x)),h=["R"].concat(p.slice(-2));else if("O"==r)a.pop(),(v=b(s,l,p[1],p[2])).push(v[0]),a=a.concat(v);else if("U"==r)a.pop(),a=a.concat(b(s,l,p[1],p[2],p[3])),h=["U"].concat(a[a.length-1].slice(-2));else for(var w=0,S=p.length;S>w;w++)h[w]=p[w];if("O"!=(r=r.toUpperCase()))switch(h[0]){case"Z":s=+c,l=+f;break;case"H":s=h[1];break;case"V":l=h[1];break;case"M":c=h[h.length-2],f=h[h.length-1];default:s=h[h.length-2],l=h[h.length-1]}}return a.toString=o,n.abs=u(a),a}function S(e,t,n,r){return[e,t,n,r,n,r]}function k(e,t,n,r,i,a){var o=1/3,u=2/3;return[o*e+u*n,o*t+u*r,o*i+u*n,o*a+u*r,i,a]}function E(t,n,r,i,a,o,u,s,l,c){var f,d=120*z/180,h=z/180*(+a||0),p=[],x=e._.cacher((function(e,t,n){return{x:e*P.cos(n)-t*P.sin(n),y:e*P.sin(n)+t*P.cos(n)}}));if(!r||!i)return[t,n,s,l,s,l];if(c)k=c[0],A=c[1],w=c[2],S=c[3];else{t=(f=x(t,n,-h)).x,n=f.y,s=(f=x(s,l,-h)).x,l=f.y;var g=(P.cos(z/180*a),P.sin(z/180*a),(t-s)/2),m=(n-l)/2,v=g*g/(r*r)+m*m/(i*i);v>1&&(r*=v=P.sqrt(v),i*=v);var _=r*r,y=i*i,b=(o==u?-1:1)*P.sqrt(j((_*y-_*m*m-y*g*g)/(_*m*m+y*g*g))),w=b*r*m/i+(t+s)/2,S=b*-i*g/r+(n+l)/2,k=P.asin(((n-S)/i).toFixed(9)),A=P.asin(((l-S)/i).toFixed(9));0>(k=w>t?z-k:k)&&(k=2*z+k),0>(A=w>s?z-A:A)&&(A=2*z+A),u&&k>A&&(k-=2*z),!u&&A>k&&(A-=2*z)}var T=A-k;if(j(T)>d){var C=A,D=s,N=l;A=k+d*(u&&A>k?1:-1),p=E(s=w+r*P.cos(A),l=S+i*P.sin(A),r,i,a,0,u,D,N,[A,C,w,S])}T=A-k;var F=P.cos(k),O=P.sin(k),M=P.cos(A),L=P.sin(A),I=P.tan(T/4),R=4/3*r*I,G=4/3*i*I,W=[t,n],B=[t+R*O,n-G*F],U=[s+R*L,l-G*M],V=[s,l];if(B[0]=2*W[0]-B[0],B[1]=2*W[1]-B[1],c)return[B,U,V].concat(p);for(var q=[],H=0,$=(p=[B,U,V].concat(p).join().split(",")).length;$>H;H++)q[H]=H%2?x(p[H-1],p[H],h).y:x(p[H],p[H+1],h).x;return q}function A(e,t,n,r,i,a,o,u){for(var s,l,c,f,d,h,p,x,g=[],m=[[],[]],v=0;2>v;++v)if(0==v?(l=6*e-12*n+6*i,s=-3*e+9*n-9*i+3*o,c=3*n-3*e):(l=6*t-12*r+6*a,s=-3*t+9*r-9*a+3*u,c=3*r-3*t),j(s)<1e-12){if(j(l)<1e-12)continue;(f=-c/l)>0&&1>f&&g.push(f)}else p=l*l-4*c*s,x=P.sqrt(p),0>p||((d=(-l+x)/(2*s))>0&&1>d&&g.push(d),(h=(-l-x)/(2*s))>0&&1>h&&g.push(h));for(var _,y=g.length,b=y;y--;)_=1-(f=g[y]),m[0][y]=_*_*_*e+3*_*_*f*n+3*_*f*f*i+f*f*f*o,m[1][y]=_*_*_*t+3*_*_*f*r+3*_*f*f*a+f*f*f*u;return m[0][b]=e,m[1][b]=t,m[0][b+1]=o,m[1][b+1]=u,m[0].length=m[1].length=b+2,{min:{x:I.apply(0,m[0]),y:I.apply(0,m[1])},max:{x:R.apply(0,m[0]),y:R.apply(0,m[1])}}}function T(e,t){var n=!t&&i(e);if(!t&&n.curve)return u(n.curve);for(var r=w(e),a=t&&w(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(E.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(k(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(k(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(S(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(S(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(S(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(S(t.x,t.y,t.X,t.Y))}return e},c=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)d[t]="A",a&&(h[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),m=R(r.length,a&&a.length||0)}},f=function(e,t,n,i,o){e&&t&&"M"==e[o][0]&&"M"!=t[o][0]&&(t.splice(o,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],m=R(r.length,a&&a.length||0))},d=[],h=[],p="",x="",g=0,m=R(r.length,a&&a.length||0);m>g;g++){r[g]&&(p=r[g][0]),"C"!=p&&(d[g]=p,g&&(x=d[g-1])),r[g]=l(r[g],o,x),"A"!=d[g]&&"C"==p&&(d[g]="C"),c(r,g),a&&(a[g]&&(p=a[g][0]),"C"!=p&&(h[g]=p,g&&(x=h[g-1])),a[g]=l(a[g],s,x),"A"!=h[g]&&"C"==p&&(h[g]="C"),c(a,g)),f(r,a,o,s,g),f(a,r,s,o,g);var v=r[g],_=a&&a[g],y=v.length,b=a&&_.length;o.x=v[y-2],o.y=v[y-1],o.bx=L(v[y-4])||o.x,o.by=L(v[y-3])||o.y,s.bx=a&&(L(_[b-4])||s.x),s.by=a&&(L(_[b-3])||s.y),s.x=a&&_[b-2],s.y=a&&_[b-1]}return a||(n.curve=u(r)),a?[r,a]:r}function C(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var a=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?a[3]={x:+e[0],y:+e[1]}:i-2==r&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?a[3]=a[2]:r||(a[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}var D=t.prototype,N=e.is,F=e._.clone,O="hasOwnProperty",M=/,?([a-z]),?/gi,L=parseFloat,P=Math,z=P.PI,I=P.min,R=P.max,G=P.pow,j=P.abs,W=l(1),B=l(),U=l(0,1),V=e._unit2px,q={path:function(e){return e.attr("path")},circle:function(e){var t=V(e);return b(t.cx,t.cy,t.r)},ellipse:function(e){var t=V(e);return b(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=V(e);return y(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=V(e);return y(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)}};e.path=i,e.path.getTotalLength=W,e.path.getPointAtLength=B,e.path.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return U(e,t).end;var r=U(e,n,1);return t?U(r,t).end:r},D.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},D.getPointAtLength=function(e){return B(this.attr("d"),e)},D.getSubpath=function(t,n){return e.path.getSubpath(this.attr("d"),t,n)},e._.box=a,e.path.findDotsAtSegment=c,e.path.bezierBBox=f,e.path.isPointInsideBBox=d,e.closest=function(t,n,r,i){for(var o=100,u=a(t-o/2,n-o/2,o,o),s=[],l=r[0].hasOwnProperty("x")?function(e){return{x:r[e].x,y:r[e].y}}:function(e){return{x:r[e],y:i[e]}},c=0;1e6>=o&&!c;){for(var f=0,h=r.length;h>f;f++){var p=l(f);if(d(u,p.x,p.y)){c++,s.push(p);break}}c||(u=a(t-(o*=2)/2,n-o/2,o,o))}if(1e6!=o){var x,g=1/0;for(f=0,h=s.length;h>f;f++){var m=e.len(t,n,s[f].x,s[f].y);g>m&&(g=m,s[f].len=m,x=s[f])}return x}},e.path.isBBoxIntersect=h,e.path.intersection=function(e,t){return v(e,t)},e.path.intersectionNumber=function(e,t){return v(e,t,1)},e.path.isPointInside=function(e,t,n){var r=_(e);return d(r,t,n)&&v(e,[["M",t,n],["H",r.x2+10]],1)%2==1},e.path.getBBox=_,e.path.get=q,e.path.toRelative=function(t){var n=i(t),r=String.prototype.toLowerCase;if(n.rel)return u(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var a=[],s=0,l=0,c=0,f=0,d=0;"M"==t[0][0]&&(c=s=t[0][1],f=l=t[0][2],d++,a.push(["M",s,l]));for(var h=d,p=t.length;p>h;h++){var x=a[h]=[],g=t[h];if(g[0]!=r.call(g[0]))switch(x[0]=r.call(g[0]),x[0]){case"a":x[1]=g[1],x[2]=g[2],x[3]=g[3],x[4]=g[4],x[5]=g[5],x[6]=+(g[6]-s).toFixed(3),x[7]=+(g[7]-l).toFixed(3);break;case"v":x[1]=+(g[1]-l).toFixed(3);break;case"m":c=g[1],f=g[2];default:for(var m=1,v=g.length;v>m;m++)x[m]=+(g[m]-(m%2?s:l)).toFixed(3)}else{x=a[h]=[],"m"==g[0]&&(c=g[1]+s,f=g[2]+l);for(var _=0,y=g.length;y>_;_++)a[h][_]=g[_]}var b=a[h].length;switch(a[h][0]){case"z":s=c,l=f;break;case"h":s+=+a[h][b-1];break;case"v":l+=+a[h][b-1];break;default:s+=+a[h][b-2],l+=+a[h][b-1]}}return a.toString=o,n.rel=u(a),a},e.path.toAbsolute=w,e.path.toCubic=T,e.path.map=function(e,t){if(!t)return e;var n,r,i,a,o,u,s;for(i=0,o=(e=T(e)).length;o>i;i++)for(a=1,u=(s=e[i]).length;u>a;a+=2)n=t.x(s[a],s[a+1]),r=t.y(s[a],s[a+1]),s[a]=n,s[a+1]=r;return e},e.path.toString=o,e.path.clone=u})),r.plugin((function(e,r,i,a){var o=Math.max,u=Math.min,s=function(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,n=e.length;n>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},l=s.prototype;l.push=function(){for(var e,t,n=0,r=arguments.length;r>n;n++)(e=arguments[n])&&(this[t=this.items.length]=this.items[t]=e,this.length++);return this},l.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},l.forEach=function(e,t){for(var n=0,r=this.items.length;r>n;n++)if(!1===e.call(t,this.items[n],n))return this;return this},l.animate=function(r,i,a,o){"function"!=typeof a||a.length||(o=a,a=n.linear),r instanceof e._.Animation&&(o=r.callback,a=r.easing,i=a.dur,r=r.attr);var u=arguments;if(e.is(r,"array")&&e.is(u[u.length-1],"array"))var s=!0;var l,c=function(){l?this.b=l:l=this.b},f=0,d=this,h=o&&function(){++f==d.length&&o.call(this)};return this.forEach((function(e,n){t.once("snap.animcreated."+e.id,c),s?u[n]&&e.animate.apply(e,u[n]):e.animate(r,i,a,h)}))},l.remove=function(){for(;this.length;)this.pop().remove();return this},l.bind=function(e,t,n){var r={};if("function"==typeof t)this.bindings[e]=t;else{var i=n||e;this.bindings[e]=function(e){r[i]=e,t.attr(r)}}return this},l.attr=function(e){var t={};for(var n in e)this.bindings[n]?this.bindings[n](e[n]):t[n]=e[n];for(var r=0,i=this.items.length;i>r;r++)this.items[r].attr(t);return this},l.clear=function(){for(;this.length;)this.pop()},l.splice=function(e,t,n){e=0>e?o(this.length+e,0):e,t=o(0,u(this.length-e,t));var r,i=[],a=[],l=[];for(r=2;r<arguments.length;r++)l.push(arguments[r]);for(r=0;t>r;r++)a.push(this[e+r]);for(;r<this.length-e;r++)i.push(this[e+r]);var c=l.length;for(r=0;r<c+i.length;r++)this.items[e+r]=this[e+r]=c>r?l[r]:i[r-c];for(r=this.items.length=this.length-=t-c;this[r];)delete this[r++];return new s(a)},l.exclude=function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},l.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},l.getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var a=this.items[i].getBBox();e.push(a.x),t.push(a.y),n.push(a.x+a.width),r.push(a.y+a.height)}return{x:e=u.apply(0,e),y:t=u.apply(0,t),x2:n=o.apply(0,n),y2:r=o.apply(0,r),width:n-e,height:r-t,cx:e+(n-e)/2,cy:t+(r-t)/2}},l.clone=function(e){e=new s;for(var t=0,n=this.items.length;n>t;t++)e.push(this.items[t].clone());return e},l.toString=function(){return"Snap‘s set"},l.type="set",e.Set=s,e.set=function(){var e=new s;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}})),r.plugin((function(e,n,r,i){function a(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function o(t,n,r){t=t||new e.Matrix,n=n||new e.Matrix,t=e.parseTransformString(t.toTransformString())||[],n=e.parseTransformString(n.toTransformString())||[];for(var i,o,u,s,l=Math.max(t.length,n.length),c=[],h=[],p=0;l>p;p++){if(u=t[p]||a(n[p]),s=n[p]||a(u),u[0]!=s[0]||"r"==u[0].toLowerCase()&&(u[2]!=s[2]||u[3]!=s[3])||"s"==u[0].toLowerCase()&&(u[3]!=s[3]||u[4]!=s[4])){t=e._.transform2matrix(t,r()),n=e._.transform2matrix(n,r()),c=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],h=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(c[p]=[],h[p]=[],i=0,o=Math.max(u.length,s.length);o>i;i++)i in u&&(c[p][i]=u[i]),i in s&&(h[p][i]=s[i])}return{from:d(c),to:d(h),f:f(c)}}function u(e){return e}function s(e){return function(t){return+t.toFixed(3)+e}}function l(e){return e.join(" ")}function c(t){return e.rgb(t[0],t[1],t[2],t[3])}function f(e){var t,n,r,i,a,o,u=0,s=[];for(t=0,n=e.length;n>t;t++){for(a="[",o=['"'+e[t][0]+'"'],r=1,i=e[t].length;i>r;r++)o[r]="val["+u+++"]";a+=o+"]",s[t]=a}return Function("val","return Snap.path.toString.call(["+s+"])")}function d(e){for(var t=[],n=0,r=e.length;r>n;n++)for(var i=1,a=e[n].length;a>i;i++)t.push(e[n][i]);return t}function h(e){return isFinite(e)}var p={},x=/[%a-z]+$/i,g=String;p.stroke=p.fill="colour",n.prototype.equal=function(e,n){return t("snap.util.equal",this,e,n).firstDefined()},t.on("snap.util.equal",(function(t,n){var r,i,a=g(this.attr(t)||""),m=this;if("colour"==p[t])return r=e.color(a),i=e.color(n),{from:[r.r,r.g,r.b,r.opacity],to:[i.r,i.g,i.b,i.opacity],f:c};if("viewBox"==t)return{from:r=this.attr(t).vb.split(" ").map(Number),to:i=n.split(" ").map(Number),f:l};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return"string"==typeof n&&(n=g(n).replace(/\.{3}|\u2026/g,a)),o(a=this.matrix,n=e._.rgTransform.test(n)?e._.transform2matrix(n,this.getBBox()):e._.transform2matrix(e._.svgTransform2string(n),this.getBBox()),(function(){return m.getBBox(1)}));if("d"==t||"path"==t)return{from:d((r=e.path.toCubic(a,n))[0]),to:d(r[1]),f:f(r[0])};if("points"==t)return{from:r=g(a).split(e._.separator),to:i=g(n).split(e._.separator),f:function(e){return e}};if(h(a)&&h(n))return{from:parseFloat(a),to:parseFloat(n),f:u};var v=a.match(x),_=g(n).match(x);return v&&function(t,n){return!(!e.is(t,"array")||!e.is(n,"array"))&&t.toString()==n.toString()}(v,_)?{from:parseFloat(a),to:parseFloat(n),f:s(v)}:{from:this.asPX(t),to:this.asPX(t,n),f:u}}))})),r.plugin((function(e,n,r,i){for(var a=n.prototype,o=("createTouch"in i.doc),u=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],s={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},l=function(e,t){var n="y"==e?"scrollTop":"scrollLeft",r=t&&t.node?t.node.ownerDocument:i.doc;return r[n in r.documentElement?"documentElement":"body"][n]},c=function(){return this.originalEvent.preventDefault()},f=function(){return this.originalEvent.stopPropagation()},d=function(e,t,n,r){var i=o&&s[t]?s[t]:t,a=function(i){var a=l("y",r),u=l("x",r);if(o&&s.hasOwnProperty(t))for(var d=0,h=i.targetTouches&&i.targetTouches.length;h>d;d++)if(i.targetTouches[d].target==e||e.contains(i.targetTouches[d].target)){var p=i;(i=i.targetTouches[d]).originalEvent=p,i.preventDefault=c,i.stopPropagation=f;break}var x=i.clientX+u,g=i.clientY+a;return n.call(r,i,x,g)};return t!==i&&e.addEventListener(t,a,!1),e.addEventListener(i,a,!1),function(){return t!==i&&e.removeEventListener(t,a,!1),e.removeEventListener(i,a,!1),!0}},h=[],p=function(e){for(var n,r=e.clientX,i=e.clientY,a=l("y"),u=l("x"),s=h.length;s--;){if(n=h[s],o){for(var c,f=e.touches&&e.touches.length;f--;)if((c=e.touches[f]).identifier==n.el._drag.id||n.el.node.contains(c.target)){r=c.clientX,i=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var d=n.el.node;d.nextSibling,d.parentNode,d.style.display,r+=u,i+=a,t("snap.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,e)}},x=function(n){e.unmousemove(p).unmouseup(x);for(var r,i=h.length;i--;)(r=h[i]).el._drag={},t("snap.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,n),t.off("snap.drag.*."+r.el.id);h=[]},g=u.length;g--;)!function(t){e[t]=a[t]=function(n,r){if(e.is(n,"function"))this.events=this.events||[],this.events.push({name:t,f:n,unbind:d(this.node||document,t,n,r||this)});else for(var i=0,a=this.events.length;a>i;i++)if(this.events[i].name==t)try{this.events[i].f.call(this)}catch(e){}return this},e["un"+t]=a["un"+t]=function(e){for(var n=this.events||[],r=n.length;r--;)if(n[r].name==t&&(n[r].f==e||!e))return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}}(u[g]);a.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},a.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var m=[];a.drag=function(n,r,i,a,o,u){function s(s,l,c){(s.originalEvent||s).preventDefault(),f._drag.x=l,f._drag.y=c,f._drag.id=s.identifier,!h.length&&e.mousemove(p).mouseup(x),h.push({el:f,move_scope:a,start_scope:o,end_scope:u}),r&&t.on("snap.drag.start."+f.id,r),n&&t.on("snap.drag.move."+f.id,n),i&&t.on("snap.drag.end."+f.id,i),t("snap.drag.start."+f.id,o||a||f,l,c,s)}function l(e,n,r){t("snap.draginit."+f.id,f,e,n,r)}var c,f=this;return arguments.length?(t.on("snap.draginit."+f.id,s),f._drag={},m.push({el:f,start:s,init:l}),f.mousedown(l),f):f.drag((function(e,t){this.attr({transform:c+(c?"T":"t")+[e,t]})}),(function(){c=this.transform().local}))},a.undrag=function(){for(var n=m.length;n--;)m[n].el==this&&(this.unmousedown(m[n].init),m.splice(n,1),t.unbind("snap.drag.*."+this.id),t.unbind("snap.draginit."+this.id));return!m.length&&e.unmousemove(p).unmouseup(x),this}})),r.plugin((function(e,n,r,i){var a=(n.prototype,r.prototype),o=/^\s*url\((.+)\)/,u=String,s=e._.$;e.filter={},a.filter=function(t){var r=this;"svg"!=r.type&&(r=r.paper);var i=e.parse(u(t)),a=e._.id(),o=(r.node.offsetWidth,r.node.offsetHeight,s("filter"));return s(o,{id:a,filterUnits:"userSpaceOnUse"}),o.appendChild(i.node),r.defs.appendChild(o),new n(o)},t.on("snap.util.getattr.filter",(function(){t.stop();var n=s(this.node,"filter");if(n){var r=u(n).match(o);return r&&e.select(r[1])}})),t.on("snap.util.attr.filter",(function(r){if(r instanceof n&&"filter"==r.type){t.stop();var i=r.node.id;i||(s(r.node,{id:r.id}),i=r.id),s(this.node,{filter:e.url(i)})}r&&"none"!=r||(t.stop(),this.node.removeAttribute("filter"))})),e.filter.blur=function(t,n){null==t&&(t=2);var r=null==n?t:[t,n];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,n,r,i,a){return null==a&&(null==i?(a=r,r=4,i="#000"):(a=i,i=r,r=4)),null==r&&(r=4),null==a&&(a=1),null==t&&(t=0,n=2),null==n&&(n=t),i=e.color(i),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:i,dx:t,dy:n,blur:r,opacity:a})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}})),r.plugin((function(e,t,n,r,i){var a=e._.box,o=e.is,u=/^[^a-z]*([tbmlrc])/i,s=function(){return"T"+this.dx+","+this.dy};t.prototype.getAlign=function(e,t){null==t&&o(e,"string")&&(t=e,e=null);var n=(e=e||this.paper).getBBox?e.getBBox():a(e),r=this.getBBox(),i={};switch(t=(t=t&&t.match(u))?t[1].toLowerCase():"c"){case"t":i.dx=0,i.dy=n.y-r.y;break;case"b":i.dx=0,i.dy=n.y2-r.y2;break;case"m":i.dx=0,i.dy=n.cy-r.cy;break;case"l":i.dx=n.x-r.x,i.dy=0;break;case"r":i.dx=n.x2-r.x2,i.dy=0;break;default:i.dx=n.cx-r.cx,i.dy=0}return i.toString=s,i},t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}})),r.plugin((function(t,n,r,i){function a(e){e=e.split(/(?=#)/);var t=new String(e[5]);return t[50]=e[0],t[100]=e[1],t[200]=e[2],t[300]=e[3],t[400]=e[4],t[500]=e[5],t[600]=e[6],t[700]=e[7],t[800]=e[8],t[900]=e[9],e[10]&&(t.A100=e[10],t.A200=e[11],t.A400=e[12],t.A700=e[13]),t}t.mui={},t.flat={},t.mui.red=a("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),t.mui.pink=a("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),t.mui.purple=a("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),t.mui.deeppurple=a("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),t.mui.indigo=a("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),t.mui.blue=a("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),t.mui.lightblue=a("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),t.mui.cyan=a("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),t.mui.teal=a("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),t.mui.green=a("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),t.mui.lightgreen=a("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),t.mui.lime=a("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),t.mui.yellow=a("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),t.mui.amber=a("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),t.mui.orange=a("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),t.mui.deeporange=a("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),t.mui.brown=a("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),t.mui.grey=a("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),t.mui.bluegrey=a("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),t.flat.turquoise="#1abc9c",t.flat.greensea="#16a085",t.flat.sunflower="#f1c40f",t.flat.orange="#f39c12",t.flat.emerland="#2ecc71",t.flat.nephritis="#27ae60",t.flat.carrot="#e67e22",t.flat.pumpkin="#d35400",t.flat.peterriver="#3498db",t.flat.belizehole="#2980b9",t.flat.alizarin="#e74c3c",t.flat.pomegranate="#c0392b",t.flat.amethyst="#9b59b6",t.flat.wisteria="#8e44ad",t.flat.clouds="#ecf0f1",t.flat.silver="#bdc3c7",t.flat.wetasphalt="#34495e",t.flat.midnightblue="#2c3e50",t.flat.concrete="#95a5a6",t.flat.asbestos="#7f8c8d",t.importMUIColors=function(){for(var n in t.mui)t.mui.hasOwnProperty(n)&&(e[n]=t.mui[n])}})),r})),
/*! jQuery v1.8.3 jquery.com | jquery.org/license */
function(e,t){function n(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(le,"-$1").toLowerCase();if("string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:se.test(r)?q.parseJSON(r):r)}catch(e){}q.data(e,n,r)}else r=t}return r}function r(e){var t;for(t in e)if(("data"!==t||!q.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function i(){return!1}function a(){return!0}function o(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function u(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function s(e,t,n){if(t=t||0,q.isFunction(t))return q.grep(e,(function(e,r){return!!t.call(e,r,e)===n}));if(t.nodeType)return q.grep(e,(function(e,r){return e===t===n}));if("string"==typeof t){var r=q.grep(e,(function(e){return 1===e.nodeType}));if(De.test(t))return q.filter(t,r,!n);t=q.filter(t,r)}return q.grep(e,(function(e,r){return q.inArray(e,t)>=0===n}))}function l(e){var t=Oe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function c(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function f(e,t){if(1===t.nodeType&&q.hasData(e)){var n,r,i,a=q._data(e),o=q._data(t,a),u=a.events;if(u)for(n in delete o.handle,o.events={},u)for(r=0,i=u[n].length;r<i;r++)q.event.add(t,n,u[n][r]);o.data&&(o.data=q.extend({},o.data))}}function d(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(n=t.nodeName.toLowerCase())?(t.parentNode&&(t.outerHTML=e.outerHTML),q.support.html5Clone&&e.innerHTML&&!q.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Be.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(q.expando))}function h(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function p(e){Be.test(e.type)&&(e.defaultChecked=e.checked)}function x(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=ct.length;i--;)if((t=ct[i]+n)in e)return t;return r}function g(e,t){return e=t||e,"none"===q.css(e,"display")||!q.contains(e.ownerDocument,e)}function m(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(n=e[a]).style&&(i[a]=q._data(n,"olddisplay"),t?(!i[a]&&"none"===n.style.display&&(n.style.display=""),""===n.style.display&&g(n)&&(i[a]=q._data(n,"olddisplay",b(n.nodeName)))):(r=Xe(n,"display"),!i[a]&&"none"!==r&&q._data(n,"olddisplay",r)));for(a=0;a<o;a++)(n=e[a]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?i[a]||"":"none"));return e}function v(e,t,n){var r=rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function _(e,t,n,r){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,a=0;i<4;i+=2)"margin"===n&&(a+=q.css(e,n+lt[i],!0)),r?("content"===n&&(a-=parseFloat(Xe(e,"padding"+lt[i]))||0),"margin"!==n&&(a-=parseFloat(Xe(e,"border"+lt[i]+"Width"))||0)):(a+=parseFloat(Xe(e,"padding"+lt[i]))||0,"padding"!==n&&(a+=parseFloat(Xe(e,"border"+lt[i]+"Width"))||0));return a}function y(e,t,n){var r="width"===t?e.offsetWidth:e.offsetHeight,i=!0,a=q.support.boxSizing&&"border-box"===q.css(e,"boxSizing");if(r<=0||null==r){if(((r=Xe(e,t))<0||null==r)&&(r=e.style[t]),it.test(r))return r;i=a&&(q.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+_(e,t,n||(a?"border":"content"),i)+"px"}function b(e){if(ot[e])return ot[e];var t=q("<"+e+">").appendTo(L.body),n=t.css("display");return t.remove(),"none"!==n&&""!==n||(Ze=L.body.appendChild(Ze||q.extend(L.createElement("iframe"),{frameBorder:0,width:0,height:0})),Je&&Ze.createElement||((Je=(Ze.contentWindow||Ze.contentDocument).document).write("<!doctype html><html><body>"),Je.close()),t=Je.body.appendChild(Je.createElement(e)),n=Xe(t,"display"),L.body.removeChild(Ze)),ot[e]=n,n}function w(e,t,n,r){var i;if(q.isArray(t))q.each(t,(function(t,i){n||ht.test(e)?r(e,i):w(e+"["+("object"==typeof i?t:"")+"]",i,n,r)}));else if(n||"object"!==q.type(t))r(e,t);else for(i in t)w(e+"["+i+"]",t[i],n,r)}function S(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i,a=t.toLowerCase().split(Y),o=0,u=a.length;if(q.isFunction(n))for(;o<u;o++)r=a[o],(i=/^\+/.test(r))&&(r=r.substr(1)||"*"),(e[r]=e[r]||[])[i?"unshift":"push"](n)}}function k(e,n,r,i,a,o){(o=o||{})[a=a||n.dataTypes[0]]=!0;for(var u,s=e[a],l=0,c=s?s.length:0,f=e===Ct;l<c&&(f||!u);l++)"string"==typeof(u=s[l](n,r,i))&&(!f||o[u]?u=t:(n.dataTypes.unshift(u),u=k(e,n,r,i,u,o)));return(f||!u)&&!o["*"]&&(u=k(e,n,r,i,"*",o)),u}function E(e,n){var r,i,a=q.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((a[r]?e:i||(i={}))[r]=n[r]);i&&q.extend(!0,e,i)}function A(){try{return new e.XMLHttpRequest}catch(e){}}function T(){return setTimeout((function(){Rt=t}),0),Rt=q.now()}function C(e,t,n){var r,i=0,a=Ut.length,o=q.Deferred().always((function(){delete u.elem})),u=function(){for(var t=Rt||T(),n=Math.max(0,s.startTime+s.duration-t),r=1-(n/s.duration||0),i=0,a=s.tweens.length;i<a;i++)s.tweens[i].run(r);return o.notifyWith(e,[s,r,n]),r<1&&a?n:(o.resolveWith(e,[s]),!1)},s=o.promise({elem:e,props:q.extend({},t),opts:q.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Rt||T(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=q.Tween(e,s.opts,t,n,s.opts.specialEasing[t]||s.opts.easing);return s.tweens.push(i),i},stop:function(t){for(var n=0,r=t?s.tweens.length:0;n<r;n++)s.tweens[n].run(1);return t?o.resolveWith(e,[s,t]):o.rejectWith(e,[s,t]),this}}),l=s.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(r=q.camelCase(n),i=t[r],a=e[n],q.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=q.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(l,s.opts.specialEasing);i<a;i++)if(r=Ut[i].call(s,e,l,s.opts))return r;return function(e,t){q.each(t,(function(t,n){for(var r=(Vt[t]||[]).concat(Vt["*"]),i=0,a=r.length;i<a;i++)if(r[i].call(e,t,n))return}))}(s,l),q.isFunction(s.opts.start)&&s.opts.start.call(e,s),q.fx.timer(q.extend(u,{anim:s,queue:s.opts.queue,elem:e})),s.progress(s.opts.progress).done(s.opts.done,s.opts.complete).fail(s.opts.fail).always(s.opts.always)}function D(e,t,n,r,i){return new D.prototype.init(e,t,n,r,i)}function N(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=lt[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e){return q.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var O,M,L=e.document,P=e.location,z=e.navigator,I=e.jQuery,R=e.$,G=Array.prototype.push,j=Array.prototype.slice,W=Array.prototype.indexOf,B=Object.prototype.toString,U=Object.prototype.hasOwnProperty,V=String.prototype.trim,q=function(e,t){return new q.fn.init(e,t,O)},H=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,$=/\S/,Y=/\s+/,X=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Z=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/^[\],:{}\s]*$/,Q=/(?:^|:|,)(?:\s*\[)+/g,ee=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,te=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ne=/^-ms-/,re=/-([\da-z])/gi,ie=function(e,t){return(t+"").toUpperCase()},ae=function(){L.addEventListener?(L.removeEventListener("DOMContentLoaded",ae,!1),q.ready()):"complete"===L.readyState&&(L.detachEvent("onreadystatechange",ae),q.ready())},oe={};q.fn=q.prototype={constructor:q,init:function(e,n,r){var i,a,o;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if((i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Z.exec(e))&&(i[1]||!n)){if(i[1])return o=(n=n instanceof q?n[0]:n)&&n.nodeType?n.ownerDocument||n:L,e=q.parseHTML(i[1],o,!0),J.test(i[1])&&q.isPlainObject(n)&&this.attr.call(e,n,!0),q.merge(this,e);if((a=L.getElementById(i[2]))&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=L,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return q.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),q.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return j.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=q.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return q.each(this,e,t)},ready:function(e){return q.ready.promise().done(e),this},eq:function(e){return-1===(e=+e)?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(j.apply(this,arguments),"slice",j.call(arguments).join(","))},map:function(e){return this.pushStack(q.map(this,(function(t,n){return e.call(t,n,t)})))},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:[].sort,splice:[].splice},q.fn.init.prototype=q.fn,q.extend=q.fn.extend=function(){var e,n,r,i,a,o,u=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof u&&(c=u,u=arguments[1]||{},s=2),"object"!=typeof u&&!q.isFunction(u)&&(u={}),l===s&&(u=this,--s);s<l;s++)if(null!=(e=arguments[s]))for(n in e)r=u[n],u!==(i=e[n])&&(c&&i&&(q.isPlainObject(i)||(a=q.isArray(i)))?(a?(a=!1,o=r&&q.isArray(r)?r:[]):o=r&&q.isPlainObject(r)?r:{},u[n]=q.extend(c,o,i)):i!==t&&(u[n]=i));return u},q.extend({noConflict:function(t){return e.$===q&&(e.$=R),t&&e.jQuery===q&&(e.jQuery=I),q},isReady:!1,readyWait:1,holdReady:function(e){e?q.readyWait++:q.ready(!0)},ready:function(e){if(!0===e?!--q.readyWait:!q.isReady){if(!L.body)return setTimeout(q.ready,1);q.isReady=!0,!0!==e&&--q.readyWait>0||(M.resolveWith(L,[q]),q.fn.trigger&&q(L).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===q.type(e)},isArray:Array.isArray||function(e){return"array"===q.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):oe[B.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==q.type(e)||e.nodeType||q.isWindow(e))return!1;try{if(e.constructor&&!U.call(e,"constructor")&&!U.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in e);return n===t||U.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||L,(r=J.exec(e))?[t.createElement(r[1])]:(r=q.buildFragment([e],t,n?null:[]),q.merge([],(r.cacheable?q.clone(r.fragment):r.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=q.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):K.test(t.replace(ee,"@").replace(te,"]").replace(Q,""))?new Function("return "+t)():void q.error("Invalid JSON: "+t)):null},parseXML:function(n){var r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?r=(new DOMParser).parseFromString(n,"text/xml"):((r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(n))}catch(e){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&q.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&$.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ne,"ms-").replace(re,ie)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,a=0,o=e.length,u=o===t||q.isFunction(e);if(r)if(u){for(i in e)if(!1===n.apply(e[i],r))break}else for(;a<o&&!1!==n.apply(e[a++],r););else if(u){for(i in e)if(!1===n.call(e[i],i,e[i]))break}else for(;a<o&&!1!==n.call(e[a],a,e[a++]););return e},trim:V&&!V.call("\ufeff ")?function(e){return null==e?"":V.call(e)}:function(e){return null==e?"":(e+"").replace(X,"")},makeArray:function(e,t){var n,r=t||[];return null!=e&&(n=q.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||q.isWindow(e)?G.call(r,e):q.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(W)return W.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,a=0;if("number"==typeof r)for(;a<r;a++)e[i++]=n[a];else for(;n[a]!==t;)e[i++]=n[a++];return e.length=i,e},grep:function(e,t,n){var r=[],i=0,a=e.length;for(n=!!n;i<a;i++)n!==!!t(e[i],i)&&r.push(e[i]);return r},map:function(e,n,r){var i,a,o=[],u=0,s=e.length;if(e instanceof q||s!==t&&"number"==typeof s&&(s>0&&e[0]&&e[s-1]||0===s||q.isArray(e)))for(;u<s;u++)null!=(i=n(e[u],u,r))&&(o[o.length]=i);else for(a in e)null!=(i=n(e[a],a,r))&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,a;return"string"==typeof n&&(r=e[n],n=e,e=r),q.isFunction(e)?(i=j.call(arguments,2),(a=function(){return e.apply(n,i.concat(j.call(arguments)))}).guid=e.guid=e.guid||q.guid++,a):t},access:function(e,n,r,i,a,o,u){var s,l=null==r,c=0,f=e.length;if(r&&"object"==typeof r){for(c in r)q.access(e,n,c,r[c],1,o,i);a=1}else if(i!==t){if(s=u===t&&q.isFunction(i),l&&(s?(s=n,n=function(e,t,n){return s.call(q(e),n)}):(n.call(e,i),n=null)),n)for(;c<f;c++)n(e[c],r,s?i.call(e[c],c,n(e[c],r)):i,u);a=1}return a?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),q.ready.promise=function(t){if(!M)if(M=q.Deferred(),"complete"===L.readyState)setTimeout(q.ready,1);else if(L.addEventListener)L.addEventListener("DOMContentLoaded",ae,!1),e.addEventListener("load",q.ready,!1);else{L.attachEvent("onreadystatechange",ae),e.attachEvent("onload",q.ready);var n=!1;try{n=null==e.frameElement&&L.documentElement}catch(e){}n&&n.doScroll&&function e(){if(!q.isReady){try{n.doScroll("left")}catch(t){return setTimeout(e,50)}q.ready()}}()}return M.promise(t)},q.each("Boolean Number String Function Array Date RegExp Object".split(" "),(function(e,t){oe["[object "+t+"]"]=t.toLowerCase()})),O=q(L);var ue={};q.Callbacks=function(e){e="string"==typeof e?ue[e]||function(e){var t=ue[e]={};return q.each(e.split(Y),(function(e,n){t[n]=!0})),t}(e):q.extend({},e);var n,r,i,a,o,u,s=[],l=!e.once&&[],c=function(t){for(n=e.memory&&t,r=!0,u=a||0,a=0,o=s.length,i=!0;s&&u<o;u++)if(!1===s[u].apply(t[0],t[1])&&e.stopOnFalse){n=!1;break}i=!1,s&&(l?l.length&&c(l.shift()):n?s=[]:f.disable())},f={add:function(){if(s){var t=s.length;(function t(n){q.each(n,(function(n,r){var i=q.type(r);"function"===i?(!e.unique||!f.has(r))&&s.push(r):r&&r.length&&"string"!==i&&t(r)}))})(arguments),i?o=s.length:n&&(a=t,c(n))}return this},remove:function(){return s&&q.each(arguments,(function(e,t){for(var n;(n=q.inArray(t,s,n))>-1;)s.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)})),this},has:function(e){return q.inArray(e,s)>-1},empty:function(){return s=[],this},disable:function(){return s=l=n=t,this},disabled:function(){return!s},lock:function(){return l=t,n||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=[e,(t=t||[]).slice?t.slice():t],s&&(!r||l)&&(i?l.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},q.extend({Deferred:function(e){var t=[["resolve","done",q.Callbacks("once memory"),"resolved"],["reject","fail",q.Callbacks("once memory"),"rejected"],["notify","progress",q.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return q.Deferred((function(n){q.each(t,(function(t,r){var a=r[0],o=e[t];i[r[1]](q.isFunction(o)?function(){var e=o.apply(this,arguments);e&&q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n:this,[e])}:n[a])})),e=null})).promise()},promise:function(e){return null!=e?q.extend(e,r):r}},i={};return r.pipe=r.then,q.each(t,(function(e,a){var o=a[2],u=a[3];r[a[1]]=o.add,u&&o.add((function(){n=u}),t[1^e][2].disable,t[2][2].lock),i[a[0]]=o.fire,i[a[0]+"With"]=o.fireWith})),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,a=j.call(arguments),o=a.length,u=1!==o||e&&q.isFunction(e.promise)?o:0,s=1===u?e:q.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?j.call(arguments):i,r===t?s.notifyWith(n,r):--u||s.resolveWith(n,r)}};if(o>1)for(t=new Array(o),n=new Array(o),r=new Array(o);i<o;i++)a[i]&&q.isFunction(a[i].promise)?a[i].promise().done(l(i,r,a)).fail(s.reject).progress(l(i,n,t)):--u;return u||s.resolveWith(r,a),s.promise()}}),q.support=function(){var t,n,r,i,a,o,u,s,l,c,f,d=L.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};a=(i=L.createElement("select")).appendChild(L.createElement("option")),o=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:"on"===o.value,optSelected:a.selected,getSetAttribute:"t"!==d.className,enctype:!!L.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==L.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===L.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!a.disabled;try{delete d.test}catch(e){t.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",f=function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick"),d.detachEvent("onclick",f)),(o=L.createElement("input")).value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),d.appendChild(o),(u=L.createDocumentFragment()).appendChild(d.lastChild),t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,u.removeChild(o),u.appendChild(d),d.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})(c=(s="on"+l)in d)||(d.setAttribute(s,"return;"),c="function"==typeof d[s]),t[l+"Bubbles"]=c;return q((function(){var n,r,i,a,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",u=L.getElementsByTagName("body")[0];u&&((n=L.createElement("div")).style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",u.insertBefore(n,u.firstChild),r=L.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(i=r.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=c&&0===i[0].offsetHeight,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===r.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(r,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(r,null)||{width:"4px"}).width,(a=L.createElement("div")).style.cssText=r.style.cssText=o,a.style.marginRight=a.style.width="0",r.style.width="1px",r.appendChild(a),t.reliableMarginRight=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),void 0!==r.style.zoom&&(r.innerHTML="",r.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===r.offsetWidth,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==r.offsetWidth,n.style.zoom=1),u.removeChild(n),n=r=i=a=null)})),u.removeChild(d),n=r=i=a=o=u=d=null,t}();var se=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,le=/([A-Z])/g;q.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(q.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?q.cache[e[q.expando]]:e[q.expando])&&!r(e)},data:function(e,n,r,i){if(q.acceptData(e)){var a,o,u=q.expando,s="string"==typeof n,l=e.nodeType,c=l?q.cache:e,f=l?e[u]:e[u]&&u;if(f&&c[f]&&(i||c[f].data)||!s||r!==t)return f||(l?e[u]=f=q.deletedIds.pop()||q.guid++:f=u),c[f]||(c[f]={},l||(c[f].toJSON=q.noop)),"object"!=typeof n&&"function"!=typeof n||(i?c[f]=q.extend(c[f],n):c[f].data=q.extend(c[f].data,n)),a=c[f],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[q.camelCase(n)]=r),s?null==(o=a[n])&&(o=a[q.camelCase(n)]):o=a,o}},removeData:function(e,t,n){if(q.acceptData(e)){var i,a,o,u=e.nodeType,s=u?q.cache:e,l=u?e[q.expando]:q.expando;if(s[l]){if(t&&(i=n?s[l]:s[l].data)){q.isArray(t)||(t in i?t=[t]:t=(t=q.camelCase(t))in i?[t]:t.split(" "));for(a=0,o=t.length;a<o;a++)delete i[t[a]];if(!(n?r:q.isEmptyObject)(i))return}(n||(delete s[l].data,r(s[l])))&&(u?q.cleanData([e],!0):q.support.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}},_data:function(e,t,n){return q.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&q.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),q.fn.extend({data:function(e,r){var i,a,o,u,s,l=this[0],c=0,f=null;if(e===t){if(this.length&&(f=q.data(l),1===l.nodeType&&!q._data(l,"parsedAttrs"))){for(s=(o=l.attributes).length;c<s;c++)(u=o[c].name).indexOf("data-")||(u=q.camelCase(u.substring(5)),n(l,u,f[u]));q._data(l,"parsedAttrs",!0)}return f}return"object"==typeof e?this.each((function(){q.data(this,e)})):((i=e.split(".",2))[1]=i[1]?"."+i[1]:"",a=i[1]+"!",q.access(this,(function(r){if(r===t)return(f=this.triggerHandler("getData"+a,[i[0]]))===t&&l&&(f=q.data(l,e),f=n(l,e,f)),f===t&&i[1]?this.data(i[0]):f;i[1]=r,this.each((function(){var t=q(this);t.triggerHandler("setData"+a,i),q.data(this,e,r),t.triggerHandler("changeData"+a,i)}))}),null,r,arguments.length>1,null,!1))},removeData:function(e){return this.each((function(){q.removeData(this,e)}))}}),q.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=q._data(e,t),n&&(!r||q.isArray(n)?r=q._data(e,t,q.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=q.queue(e,t),r=n.length,i=n.shift(),a=q._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,(function(){q.dequeue(e,t)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return q._data(e,n)||q._data(e,n,{empty:q.Callbacks("once memory").add((function(){q.removeData(e,t+"queue",!0),q.removeData(e,n,!0)}))})}}),q.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),arguments.length<r?q.queue(this[0],e):n===t?this:this.each((function(){var t=q.queue(this,e,n);q._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&q.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){q.dequeue(this,e)}))},delay:function(e,t){return e=q.fx&&q.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,a=q.Deferred(),o=this,u=this.length,s=function(){--i||a.resolveWith(o,[o])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";u--;)(r=q._data(o[u],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(s));return s(),a.promise(n)}});var ce,fe,de,he=/[\t\r\n]/g,pe=/\r/g,xe=/^(?:button|input)$/i,ge=/^(?:button|input|object|select|textarea)$/i,me=/^a(?:rea|)$/i,ve=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,_e=q.support.getSetAttribute;q.fn.extend({attr:function(e,t){return q.access(this,q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){q.removeAttr(this,e)}))},prop:function(e,t){return q.access(this,q.prop,e,t,arguments.length>1)},removeProp:function(e){return e=q.propFix[e]||e,this.each((function(){try{this[e]=t,delete this[e]}catch(e){}}))},addClass:function(e){var t,n,r,i,a,o,u;if(q.isFunction(e))return this.each((function(t){q(this).addClass(e.call(this,t,this.className))}));if(e&&"string"==typeof e)for(t=e.split(Y),n=0,r=this.length;n<r;n++)if(1===(i=this[n]).nodeType)if(i.className||1!==t.length){for(a=" "+i.className+" ",o=0,u=t.length;o<u;o++)a.indexOf(" "+t[o]+" ")<0&&(a+=t[o]+" ");i.className=q.trim(a)}else i.className=e;return this},removeClass:function(e){var n,r,i,a,o,u,s;if(q.isFunction(e))return this.each((function(t){q(this).removeClass(e.call(this,t,this.className))}));if(e&&"string"==typeof e||e===t)for(n=(e||"").split(Y),u=0,s=this.length;u<s;u++)if(1===(i=this[u]).nodeType&&i.className){for(r=(" "+i.className+" ").replace(he," "),a=0,o=n.length;a<o;a++)for(;r.indexOf(" "+n[a]+" ")>=0;)r=r.replace(" "+n[a]+" "," ");i.className=e?q.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return q.isFunction(e)?this.each((function(n){q(this).toggleClass(e.call(this,n,this.className,t),t)})):this.each((function(){if("string"===n)for(var i,a=0,o=q(this),u=t,s=e.split(Y);i=s[a++];)u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i);else"undefined"!==n&&"boolean"!==n||(this.className&&q._data(this,"__className__",this.className),this.className=this.className||!1===e?"":q._data(this,"__className__")||"")}))},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(he," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,a=this[0];return arguments.length?(i=q.isFunction(e),this.each((function(r){var a,o=q(this);1===this.nodeType&&(null==(a=i?e.call(this,r,o.val()):e)?a="":"number"==typeof a?a+="":q.isArray(a)&&(a=q.map(a,(function(e){return null==e?"":e+""}))),(n=q.valHooks[this.type]||q.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,a,"value")!==t||(this.value=a))}))):a?(n=q.valHooks[a.type]||q.valHooks[a.nodeName.toLowerCase()])&&"get"in n&&(r=n.get(a,"value"))!==t?r:"string"==typeof(r=a.value)?r.replace(pe,""):null==r?"":r:void 0}}),q.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,a="select-one"===e.type||i<0,o=a?null:[],u=a?i+1:r.length,s=i<0?u:a?i:0;s<u;s++)if(((n=r[s]).selected||s===i)&&(q.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!q.nodeName(n.parentNode,"optgroup"))){if(t=q(n).val(),a)return t;o.push(t)}return o},set:function(e,t){var n=q.makeArray(t);return q(e).find("option").each((function(){this.selected=q.inArray(q(this).val(),n)>=0})),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var a,o,u,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return i&&q.isFunction(q.fn[n])?q(e)[n](r):void 0===e.getAttribute?q.prop(e,n,r):((u=1!==s||!q.isXMLDoc(e))&&(n=n.toLowerCase(),o=q.attrHooks[n]||(ve.test(n)?fe:ce)),r!==t?null===r?void q.removeAttr(e,n):o&&"set"in o&&u&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+""),r):o&&"get"in o&&u&&null!==(a=o.get(e,n))?a:null===(a=e.getAttribute(n))?t:a)},removeAttr:function(e,t){var n,r,i,a,o=0;if(t&&1===e.nodeType)for(r=t.split(Y);o<r.length;o++)(i=r[o])&&(n=q.propFix[i]||i,(a=ve.test(i))||q.attr(e,i,""),e.removeAttribute(_e?i:n),a&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(xe.test(e.nodeName)&&e.parentNode)q.error("type property can't be changed");else if(!q.support.radioValue&&"radio"===t&&q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return ce&&q.nodeName(e,"button")?ce.get(e,t):t in e?e.value:null},set:function(e,t,n){if(ce&&q.nodeName(e,"button"))return ce.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!q.isXMLDoc(e))&&(n=q.propFix[n]||n,a=q.propHooks[n]),r!==t?a&&"set"in a&&(i=a.set(e,r,n))!==t?i:e[n]=r:a&&"get"in a&&null!==(i=a.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):ge.test(e.nodeName)||me.test(e.nodeName)&&e.href?0:t}}}}),fe={get:function(e,n){var r,i=q.prop(e,n);return!0===i||"boolean"!=typeof i&&(r=e.getAttributeNode(n))&&!1!==r.nodeValue?n.toLowerCase():t},set:function(e,t,n){var r;return!1===t?q.removeAttr(e,n):((r=q.propFix[n]||n)in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},_e||(de={name:!0,id:!0,coords:!0},ce=q.valHooks.button={get:function(e,n){var r;return(r=e.getAttributeNode(n))&&(de[n]?""!==r.value:r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=L.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},q.each(["width","height"],(function(e,t){q.attrHooks[t]=q.extend(q.attrHooks[t],{set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}})})),q.attrHooks.contenteditable={get:ce.get,set:function(e,t,n){""===t&&(t="false"),ce.set(e,t,n)}}),q.support.hrefNormalized||q.each(["href","src","width","height"],(function(e,n){q.attrHooks[n]=q.extend(q.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null===r?t:r}})})),q.support.style||(q.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),q.support.optSelected||(q.propHooks.selected=q.extend(q.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),q.support.enctype||(q.propFix.enctype="encoding"),q.support.checkOn||q.each(["radio","checkbox"],(function(){q.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}})),q.each(["radio","checkbox"],(function(){q.valHooks[this]=q.extend(q.valHooks[this],{set:function(e,t){if(q.isArray(t))return e.checked=q.inArray(q(e).val(),t)>=0}})}));var ye=/^(?:textarea|input|select)$/i,be=/^([^\.]*|)(?:\.(.+)|)$/,we=/(?:^|\s)hover(\.\S+|)\b/,Se=/^key/,ke=/^(?:mouse|contextmenu)|click/,Ee=/^(?:focusinfocus|focusoutblur)$/,Ae=function(e){return q.event.special.hover?e:e.replace(we,"mouseenter$1 mouseleave$1")};q.event={add:function(e,n,r,i,a){var o,u,s,l,c,f,d,h,p,x,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&r&&(o=q._data(e))){for(r.handler&&(r=(p=r).handler,a=p.selector),r.guid||(r.guid=q.guid++),(s=o.events)||(o.events=s={}),(u=o.handle)||(o.handle=u=function(e){return void 0===q||e&&q.event.triggered===e.type?t:q.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=q.trim(Ae(n)).split(" "),l=0;l<n.length;l++)f=(c=be.exec(n[l])||[])[1],d=(c[2]||"").split(".").sort(),g=q.event.special[f]||{},f=(a?g.delegateType:g.bindType)||f,g=q.event.special[f]||{},h=q.extend({type:f,origType:c[1],data:i,handler:r,guid:r.guid,selector:a,needsContext:a&&q.expr.match.needsContext.test(a),namespace:d.join(".")},p),(x=s[f])||((x=s[f]=[]).delegateCount=0,g.setup&&!1!==g.setup.call(e,i,d,u)||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),g.add&&(g.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),a?x.splice(x.delegateCount++,0,h):x.push(h),q.event.global[f]=!0;e=null}},global:{},remove:function(e,t,n,r,i){var a,o,u,s,l,c,f,d,h,p,x,g=q.hasData(e)&&q._data(e);if(g&&(d=g.events)){for(t=q.trim(Ae(t||"")).split(" "),a=0;a<t.length;a++)if(u=s=(o=be.exec(t[a])||[])[1],l=o[2],u){for(h=q.event.special[u]||{},c=(p=d[u=(r?h.delegateType:h.bindType)||u]||[]).length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f=0;f<p.length;f++)x=p[f],(i||s===x.origType)&&(!n||n.guid===x.guid)&&(!l||l.test(x.namespace))&&(!r||r===x.selector||"**"===r&&x.selector)&&(p.splice(f--,1),x.selector&&p.delegateCount--,h.remove&&h.remove.call(e,x));0===p.length&&c!==p.length&&((!h.teardown||!1===h.teardown.call(e,l,g.handle))&&q.removeEvent(e,u,g.handle),delete d[u])}else for(u in d)q.event.remove(e,u+t[a],n,r,!0);q.isEmptyObject(d)&&(delete g.handle,q.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,a){if(!i||3!==i.nodeType&&8!==i.nodeType){var o,u,s,l,c,f,d,h,p,x,g=n.type||n,m=[];if(Ee.test(g+q.event.triggered))return;if(g.indexOf("!")>=0&&(g=g.slice(0,-1),u=!0),g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),(!i||q.event.customEvent[g])&&!q.event.global[g])return;if((n="object"==typeof n?n[q.expando]?n:new q.Event(g,n):new q.Event(g)).type=g,n.isTrigger=!0,n.exclusive=u,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f=g.indexOf(":")<0?"on"+g:"",!i){for(s in o=q.cache)o[s].events&&o[s].events[g]&&q.event.trigger(n,r,o[s].handle.elem,!0);return}if(n.result=t,n.target||(n.target=i),(r=null!=r?q.makeArray(r):[]).unshift(n),(d=q.event.special[g]||{}).trigger&&!1===d.trigger.apply(i,r))return;if(p=[[i,d.bindType||g]],!a&&!d.noBubble&&!q.isWindow(i)){for(x=d.delegateType||g,l=Ee.test(x+g)?i:i.parentNode,c=i;l;l=l.parentNode)p.push([l,x]),c=l;c===(i.ownerDocument||L)&&p.push([c.defaultView||c.parentWindow||e,x])}for(s=0;s<p.length&&!n.isPropagationStopped();s++)l=p[s][0],n.type=p[s][1],(h=(q._data(l,"events")||{})[n.type]&&q._data(l,"handle"))&&h.apply(l,r),(h=f&&l[f])&&q.acceptData(l)&&h.apply&&!1===h.apply(l,r)&&n.preventDefault();return n.type=g,!a&&!n.isDefaultPrevented()&&(!d._default||!1===d._default.apply(i.ownerDocument,r))&&("click"!==g||!q.nodeName(i,"a"))&&q.acceptData(i)&&f&&i[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!q.isWindow(i)&&((c=i[f])&&(i[f]=null),q.event.triggered=g,i[g](),q.event.triggered=t,c&&(i[f]=c)),n.result}},dispatch:function(n){n=q.event.fix(n||e.event);var r,i,a,o,u,s,l,c,f,d=(q._data(this,"events")||{})[n.type]||[],h=d.delegateCount,p=j.call(arguments),x=!n.exclusive&&!n.namespace,g=q.event.special[n.type]||{},m=[];if(p[0]=n,n.delegateTarget=this,!g.preDispatch||!1!==g.preDispatch.call(this,n)){if(h&&(!n.button||"click"!==n.type))for(a=n.target;a!=this;a=a.parentNode||this)if(!0!==a.disabled||"click"!==n.type){for(u={},l=[],r=0;r<h;r++)u[f=(c=d[r]).selector]===t&&(u[f]=c.needsContext?q(f,this).index(a)>=0:q.find(f,this,null,[a]).length),u[f]&&l.push(c);l.length&&m.push({elem:a,matches:l})}for(d.length>h&&m.push({elem:this,matches:d.slice(h)}),r=0;r<m.length&&!n.isPropagationStopped();r++)for(s=m[r],n.currentTarget=s.elem,i=0;i<s.matches.length&&!n.isImmediatePropagationStopped();i++)c=s.matches[i],(x||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))&&(n.data=c.data,n.handleObj=c,(o=((q.event.special[c.origType]||{}).handle||c.handler).apply(s.elem,p))!==t&&(n.result=o,!1===o&&(n.preventDefault(),n.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,o=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=(r=e.target.ownerDocument||L).documentElement,a=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[q.expando])return e;var t,n,r=e,i=q.event.fixHooks[e.type]||{},a=i.props?this.props.concat(i.props):this.props;for(e=q.Event(r),t=a.length;t;)e[n=a[--t]]=r[n];return e.target||(e.target=r.srcElement||L),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){q.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=q.extend(new q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?q.event.trigger(i,null,t):q.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},q.event.handle=q.event.dispatch,q.removeEvent=L.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},q.Event=function(e,t){if(!(this instanceof q.Event))return new q.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?a:i):this.type=e,t&&q.extend(this,t),this.timeStamp=e&&e.timeStamp||q.now(),this[q.expando]=!0},q.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i},q.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(e,t){q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;a.selector;return i&&(i===r||q.contains(r,i))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),q.support.submitBubbles||(q.event.special.submit={setup:function(){if(q.nodeName(this,"form"))return!1;q.event.add(this,"click._submit keypress._submit",(function(e){var n=e.target,r=q.nodeName(n,"input")||q.nodeName(n,"button")?n.form:t;r&&!q._data(r,"_submit_attached")&&(q.event.add(r,"submit._submit",(function(e){e._submit_bubble=!0})),q._data(r,"_submit_attached",!0))}))},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&q.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(q.nodeName(this,"form"))return!1;q.event.remove(this,"._submit")}}),q.support.changeBubbles||(q.event.special.change={setup:function(){if(ye.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(q.event.add(this,"propertychange._change",(function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)})),q.event.add(this,"click._change",(function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),q.event.simulate("change",this,e,!0)}))),!1;q.event.add(this,"beforeactivate._change",(function(e){var t=e.target;ye.test(t.nodeName)&&!q._data(t,"_change_attached")&&(q.event.add(t,"change._change",(function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&q.event.simulate("change",this.parentNode,e,!0)})),q._data(t,"_change_attached",!0))}))},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return q.event.remove(this,"._change"),!ye.test(this.nodeName)}}),q.support.focusinBubbles||q.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=0,r=function(e){q.event.simulate(t,e.target,q.event.fix(e),!0)};q.event.special[t]={setup:function(){0==n++&&L.addEventListener(e,r,!0)},teardown:function(){0==--n&&L.removeEventListener(e,r,!0)}}})),q.fn.extend({on:function(e,n,r,a,o){var u,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=t),e)this.on(s,n,r,e[s],o);return this}if(null==r&&null==a?(a=n,r=n=t):null==a&&("string"==typeof n?(a=r,r=t):(a=r,r=n,n=t)),!1===a)a=i;else if(!a)return this;return 1===o&&(u=a,(a=function(e){return q().off(e),u.apply(this,arguments)}).guid=u.guid||(u.guid=q.guid++)),this.each((function(){q.event.add(this,e,a,r,n)}))},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var a,o;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,q(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return!1!==n&&"function"!=typeof n||(r=n,n=t),!1===r&&(r=i),this.each((function(){q.event.remove(this,e,r,n)}))},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return q(this.context).on(e,this.selector,t,n),this},die:function(e,t){return q(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each((function(){q.event.trigger(e,t,this)}))},triggerHandler:function(e,t){if(this[0])return q.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||q.guid++,r=0,i=function(n){var i=(q._data(this,"lastToggle"+e.guid)||0)%r;return q._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};for(i.guid=n;r<t.length;)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){q.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Se.test(t)&&(q.event.fixHooks[t]=q.event.keyHooks),ke.test(t)&&(q.event.fixHooks[t]=q.event.mouseHooks)})),function(e,t){function n(e,t,n,r){n=n||[];var i,a,o,u,s=(t=t||N).nodeType;if(!e||"string"!=typeof e)return n;if(1!==s&&9!==s)return[];if(!(o=y(t))&&!r&&(i=ee.exec(e)))if(u=i[1]){if(9===s){if(!(a=t.getElementById(u))||!a.parentNode)return n;if(a.id===u)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(u))&&b(t,a)&&a.id===u)return n.push(a),n}else{if(i[2])return P.apply(n,z.call(t.getElementsByTagName(e),0)),n;if((u=i[3])&&ce&&t.getElementsByClassName)return P.apply(n,z.call(t.getElementsByClassName(u),0)),n}return p(e.replace(Z,"$1"),t,n,r,o)}function r(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function i(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function a(e){return R((function(t){return t=+t,R((function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function o(e,t,n){if(e===t)return n;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}function u(e,t){var r,i,a,o,u,s,l,c=W[C][e+" "];if(c)return t?0:c.slice(0);for(u=e,s=[],l=v.preFilter;u;){for(o in r&&!(i=J.exec(u))||(i&&(u=u.slice(i[0].length)||u),s.push(a=[])),r=!1,(i=K.exec(u))&&(a.push(r=new D(i.shift())),u=u.slice(r.length),r.type=i[0].replace(Z," ")),v.filter)(i=ae[o].exec(u))&&(!l[o]||(i=l[o](i)))&&(a.push(r=new D(i.shift())),u=u.slice(r.length),r.type=o,r.matches=i);if(!r)break}return t?u.length:u?n.error(e):W(e,s).slice(0)}function s(e,t,n){var r=t.dir,i=n&&"parentNode"===t.dir,a=M++;return t.first?function(t,n,a){for(;t=t[r];)if(i||1===t.nodeType)return e(t,n,a)}:function(t,n,o){if(o){for(;t=t[r];)if((i||1===t.nodeType)&&e(t,n,o))return t}else for(var u,s=O+" "+a+" ",l=s+g;t=t[r];)if(i||1===t.nodeType){if((u=t[C])===l)return t.sizset;if("string"==typeof u&&0===u.indexOf(s)){if(t.sizset)return t}else{if(t[C]=l,e(t,n,o))return t.sizset=!0,t;t.sizset=!1}}}}function l(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function c(e,t,n,r,i){for(var a,o=[],u=0,s=e.length,l=null!=t;u<s;u++)(a=e[u])&&(n&&!n(a,r,i)||(o.push(a),l&&t.push(u)));return o}function f(e,t,r,i,a,o){return i&&!i[C]&&(i=f(i)),a&&!a[C]&&(a=f(a,o)),R((function(o,u,s,l){var f,d,h,p=[],x=[],g=u.length,m=o||function(e,t,r){for(var i=0,a=t.length;i<a;i++)n(e,t[i],r);return r}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?m:c(m,p,e,s,l),_=r?a||(o?e:g||i)?[]:u:v;if(r&&r(v,_,s,l),i)for(f=c(_,x),i(f,[],s,l),d=f.length;d--;)(h=f[d])&&(_[x[d]]=!(v[x[d]]=h));if(o){if(a||e){if(a){for(f=[],d=_.length;d--;)(h=_[d])&&f.push(v[d]=h);a(null,_=[],f,l)}for(d=_.length;d--;)(h=_[d])&&(f=a?I.call(o,h):p[d])>-1&&(o[f]=!(u[f]=h))}}else _=c(_===u?_.splice(g,_.length):_),a?a(null,u,_,l):P.apply(u,_)}))}function d(e){for(var t,n,r,i=e.length,a=v.relative[e[0].type],o=a||v.relative[" "],u=a?1:0,c=s((function(e){return e===t}),o,!0),h=s((function(e){return I.call(t,e)>-1}),o,!0),p=[function(e,n,r){return!a&&(r||n!==E)||((t=n).nodeType?c(e,n,r):h(e,n,r))}];u<i;u++)if(n=v.relative[e[u].type])p=[s(l(p),n)];else{if((n=v.filter[e[u].type].apply(null,e[u].matches))[C]){for(r=++u;r<i&&!v.relative[e[r].type];r++);return f(u>1&&l(p),u>1&&e.slice(0,u-1).join("").replace(Z,"$1"),n,u<r&&d(e.slice(u,r)),r<i&&d(e=e.slice(r)),r<i&&e.join(""))}p.push(n)}return l(p)}function h(e,t){var r=t.length>0,i=e.length>0,a=function(o,u,s,l,f){var d,h,p,x=[],m=0,_="0",y=o&&[],b=null!=f,w=E,S=o||i&&v.find.TAG("*",f&&u.parentNode||u),k=O+=null==w?1:Math.E;for(b&&(E=u!==N&&u,g=a.el);null!=(d=S[_]);_++){if(i&&d){for(h=0;p=e[h];h++)if(p(d,u,s)){l.push(d);break}b&&(O=k,g=++a.el)}r&&((d=!p&&d)&&m--,o&&y.push(d))}if(m+=_,r&&_!==m){for(h=0;p=t[h];h++)p(y,x,u,s);if(o){if(m>0)for(;_--;)!y[_]&&!x[_]&&(x[_]=L.call(l));x=c(x)}P.apply(l,x),b&&!o&&x.length>0&&m+t.length>1&&n.uniqueSort(l)}return b&&(O=k,E=w),y};return a.el=0,r?R(a):a}function p(e,t,n,r,i){var a,o,s,l,c,f=u(e);f.length;if(!r&&1===f.length){if((o=f[0]=f[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&9===t.nodeType&&!i&&v.relative[o[1].type]){if(!(t=v.find.ID(s.matches[0].replace(ie,""),t,i)[0]))return n;e=e.slice(o.shift().length)}for(a=ae.POS.test(e)?-1:o.length-1;a>=0&&(s=o[a],!v.relative[l=s.type]);a--)if((c=v.find[l])&&(r=c(s.matches[0].replace(ie,""),te.test(o[0].type)&&t.parentNode||t,i))){if(o.splice(a,1),!(e=r.length&&o.join("")))return P.apply(n,z.call(r,0)),n;break}}return w(e,f)(r,t,i,n,te.test(e)),n}function x(){}var g,m,v,_,y,b,w,S,k,E,A,T="undefined",C=("sizcache"+Math.random()).replace(".",""),D=String,N=e.document,F=N.documentElement,O=0,M=0,L=[].pop,P=[].push,z=[].slice,I=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},R=function(e,t){return e[C]=null==t||t,e},G=function(){var e={},t=[];return R((function(n,r){return t.push(n)>v.cacheLength&&delete e[t.shift()],e[n+" "]=r}),e)},j=G(),W=G(),B=G(),U="[\\x20\\t\\r\\n\\f]",V="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",H=V.replace("w","w#"),$="\\["+U+"*("+V+")"+U+"*(?:([*^$|!~]?=)"+U+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+H+")|)|)"+U+"*\\]",Y=":("+V+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+$+")|[^:]|\\\\.)*|.*))\\)|)",X=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),J=new RegExp("^"+U+"*,"+U+"*"),K=new RegExp("^"+U+"*([\\x20\\t\\r\\n\\f>+~])"+U+"*"),Q=new RegExp(Y),ee=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,te=/[\x20\t\r\n\f]*[+~]/,ne=/h\d/i,re=/input|select|textarea|button/i,ie=/\\(?!\\)/g,ae={ID:new RegExp("^#("+V+")"),CLASS:new RegExp("^\\.("+V+")"),NAME:new RegExp("^\\[name=['\"]?("+V+")['\"]?\\]"),TAG:new RegExp("^("+V.replace("w","w*")+")"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+Y),POS:new RegExp(X,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),needsContext:new RegExp("^"+U+"*[>+~]|"+X,"i")},oe=function(e){var t=N.createElement("div");try{return e(t)}catch(e){return!1}finally{t=null}},ue=oe((function(e){return e.appendChild(N.createComment("")),!e.getElementsByTagName("*").length})),se=oe((function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==T&&"#"===e.firstChild.getAttribute("href")})),le=oe((function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t})),ce=oe((function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)})),fe=oe((function(e){e.id=C+0,e.innerHTML="<a name='"+C+"'></a><div name='"+C+"'></div>",F.insertBefore(e,F.firstChild);var t=N.getElementsByName&&N.getElementsByName(C).length===2+N.getElementsByName(C+0).length;return m=!N.getElementById(C),F.removeChild(e),t}));try{z.call(F.childNodes,0)[0].nodeType}catch(e){z=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},_=n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=_(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=_(t);return n},y=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},b=n.contains=F.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&n.contains&&n.contains(r))}:F.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},n.attr=function(e,t){var n,r=y(e);return r||(t=t.toLowerCase()),(n=v.attrHandle[t])?n(e):r||le?e.getAttribute(t):(n=e.getAttributeNode(t))?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null},v=n.selectors={cacheLength:50,createPseudo:R,match:ae,attrHandle:se?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:m?function(e,t,n){if(typeof t.getElementById!==T&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,t,n){if(typeof t.getElementById!==T&&!n){var r=t.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==T&&r.getAttributeNode("id").value===e?[r]:void 0:[]}},TAG:ue?function(e,t){if(typeof t.getElementsByTagName!==T)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var r,i=[],a=0;r=n[a];a++)1===r.nodeType&&i.push(r);return i}return n},NAME:fe&&function(e,t){if(typeof t.getElementsByName!==T)return t.getElementsByName(name)},CLASS:ce&&function(e,t,n){if(typeof t.getElementsByClassName!==T&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,""),e[3]=(e[4]||e[5]||"").replace(ie,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;return ae.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(Q.test(t)&&(n=u(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:m?function(e){return e=e.replace(ie,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(ie,""),function(t){var n=typeof t.getAttributeNode!==T&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(ie,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=j[C][e+" "];return t||(t=new RegExp("(^|"+U+")"+e+"("+U+"|$)"))&&j(e,(function(e){return t.test(e.className||typeof e.getAttribute!==T&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(i,a){var o=n.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===r:"!="===t?o!==r:"^="===t?r&&0===o.indexOf(r):"*="===t?r&&o.indexOf(r)>-1:"$="===t?r&&o.substr(o.length-r.length)===r:"~="===t?(" "+o+" ").indexOf(r)>-1:"|="===t&&(o===r||o.substr(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r){return"nth"===e?function(e){var t,i,a=e.parentNode;if(1===n&&0===r)return!0;if(a)for(i=0,t=a.firstChild;t&&(1!==t.nodeType||(i++,e!==t));t=t.nextSibling);return(i-=r)===n||i%n==0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var r,i=v.pseudos[e]||v.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return i[C]?i(t):i.length>1?(r=[e,e,"",t],v.setFilters.hasOwnProperty(e.toLowerCase())?R((function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=I.call(e,a[o])]=!(n[r]=a[o])})):function(e){return i(e,0,r)}):i}},pseudos:{not:R((function(e){var t=[],n=[],r=w(e.replace(Z,"$1"));return r[C]?R((function(e,t,n,i){for(var a,o=r(e,null,i,[]),u=e.length;u--;)(a=o[u])&&(e[u]=!(t[u]=a))})):function(e,i,a){return t[0]=e,r(t,null,a,n),!n.pop()}})),has:R((function(e){return function(t){return n(e,t).length>0}})),contains:R((function(e){return function(t){return(t.textContent||t.innerText||_(t)).indexOf(e)>-1}})),enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!v.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return ne.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:r("radio"),checkbox:r("checkbox"),file:r("file"),password:r("password"),image:r("image"),submit:i("submit"),reset:i("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return re.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:a((function(){return[0]})),last:a((function(e,t){return[t-1]})),eq:a((function(e,t,n){return[n<0?n+t:n]})),even:a((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:a((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:a((function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e})),gt:a((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},S=F.compareDocumentPosition?function(e,t){return e===t?(k=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return k=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],a=[],u=e.parentNode,s=t.parentNode,l=u;if(u===s)return o(e,t);if(!u)return-1;if(!s)return 1;for(;l;)i.unshift(l),l=l.parentNode;for(l=s;l;)a.unshift(l),l=l.parentNode;n=i.length,r=a.length;for(var c=0;c<n&&c<r;c++)if(i[c]!==a[c])return o(i[c],a[c]);return c===n?o(e,a[c],-1):o(i[c],t,1)},[0,0].sort(S),A=!k,n.uniqueSort=function(e){var t,n=[],r=1,i=0;if(k=A,e.sort(S),k){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},w=n.compile=function(e,t){var n,r=[],i=[],a=B[C][e+" "];if(!a){for(t||(t=u(e)),n=t.length;n--;)(a=d(t[n]))[C]?r.push(a):i.push(a);a=B(e,h(i,r))}return a},N.querySelectorAll&&function(){var e,t=p,r=/'|\\/g,i=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,a=[":focus"],o=[":active"],s=F.matchesSelector||F.mozMatchesSelector||F.webkitMatchesSelector||F.oMatchesSelector||F.msMatchesSelector;oe((function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||a.push("\\["+U+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||a.push(":checked")})),oe((function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&a.push("[*^$]="+U+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||a.push(":enabled",":disabled")})),a=new RegExp(a.join("|")),p=function(e,n,i,o,s){if(!o&&!s&&!a.test(e)){var l,c,f=!0,d=C,h=n,p=9===n.nodeType&&e;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(l=u(e),(f=n.getAttribute("id"))?d=f.replace(r,"\\$&"):n.setAttribute("id",d),d="[id='"+d+"'] ",c=l.length;c--;)l[c]=d+l[c].join("");h=te.test(e)&&n.parentNode||n,p=l.join(",")}if(p)try{return P.apply(i,z.call(h.querySelectorAll(p),0)),i}catch(e){}finally{f||n.removeAttribute("id")}}return t(e,n,i,o,s)},s&&(oe((function(t){e=s.call(t,"div");try{s.call(t,"[test!='']:sizzle"),o.push("!=",Y)}catch(e){}})),o=new RegExp(o.join("|")),n.matchesSelector=function(t,r){if(r=r.replace(i,"='$1']"),!y(t)&&!o.test(r)&&!a.test(r))try{var u=s.call(t,r);if(u||e||t.document&&11!==t.document.nodeType)return u}catch(e){}return n(r,null,null,[t]).length>0})}(),v.pseudos.nth=v.pseudos.eq,v.filters=x.prototype=v.pseudos,v.setFilters=new x,n.attr=q.attr,q.find=n,q.expr=n.selectors,q.expr[":"]=q.expr.pseudos,q.unique=n.uniqueSort,q.text=n.getText,q.isXMLDoc=n.isXML,q.contains=n.contains}(e);var Te=/Until$/,Ce=/^(?:parents|prev(?:Until|All))/,De=/^.[^:#\[\.,]*$/,Ne=q.expr.match.needsContext,Fe={children:!0,contents:!0,next:!0,prev:!0};q.fn.extend({find:function(e){var t,n,r,i,a,o,u=this;if("string"!=typeof e)return q(e).filter((function(){for(t=0,n=u.length;t<n;t++)if(q.contains(u[t],this))return!0}));for(o=this.pushStack("","find",e),t=0,n=this.length;t<n;t++)if(r=o.length,q.find(e,this[t],o),t>0)for(i=r;i<o.length;i++)for(a=0;a<r;a++)if(o[a]===o[i]){o.splice(i--,1);break}return o},has:function(e){var t,n=q(e,this),r=n.length;return this.filter((function(){for(t=0;t<r;t++)if(q.contains(this,n[t]))return!0}))},not:function(e){return this.pushStack(s(this,e,!1),"not",e)},filter:function(e){return this.pushStack(s(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Ne.test(e)?q(e,this.context).index(this[0])>=0:q.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,i=this.length,a=[],o=Ne.test(e)||"string"!=typeof e?q(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(o?o.index(n)>-1:q.find.matchesSelector(n,e)){a.push(n);break}n=n.parentNode}return a=a.length>1?q.unique(a):a,this.pushStack(a,"closest",e)},index:function(e){return e?"string"==typeof e?q.inArray(this[0],q(e)):q.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?q(e,t):q.makeArray(e&&e.nodeType?[e]:e),r=q.merge(this.get(),n);return this.pushStack(o(n[0])||o(r[0])?r:q.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),q.fn.andSelf=q.fn.addBack,q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return q.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return q.dir(e,"nextSibling")},prevAll:function(e){return q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return q.dir(e,"previousSibling",n)},siblings:function(e){return q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return q.sibling(e.firstChild)},contents:function(e){return q.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:q.merge([],e.childNodes)}},(function(e,t){q.fn[e]=function(n,r){var i=q.map(this,t,n);return Te.test(e)||(r=n),r&&"string"==typeof r&&(i=q.filter(r,i)),i=this.length>1&&!Fe[e]?q.unique(i):i,this.length>1&&Ce.test(e)&&(i=i.reverse()),this.pushStack(i,e,j.call(arguments).join(","))}})),q.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?q.find.matchesSelector(t[0],e)?[t[0]]:[]:q.find.matches(e,t)},dir:function(e,n,r){for(var i=[],a=e[n];a&&9!==a.nodeType&&(r===t||1!==a.nodeType||!q(a).is(r));)1===a.nodeType&&i.push(a),a=a[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Oe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Me=/ jQuery\d+="(?:null|\d+)"/g,Le=/^\s+/,Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,Ie=/<tbody/i,Re=/<|&#?\w+;/,Ge=/<(?:script|style|link)/i,je=/<(?:script|object|embed|option|style)/i,We=new RegExp("<(?:"+Oe+")[\\s/>]","i"),Be=/^(?:checkbox|radio)$/,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/\/(java|ecma)script/i,qe=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,He={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},$e=l(L),Ye=$e.appendChild(L.createElement("div"));He.optgroup=He.option,He.tbody=He.tfoot=He.colgroup=He.caption=He.thead,He.th=He.td,q.support.htmlSerialize||(He._default=[1,"X<div>","</div>"]),q.fn.extend({text:function(e){return q.access(this,(function(e){return e===t?q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||L).createTextNode(e))}),null,e,arguments.length)},wrapAll:function(e){if(q.isFunction(e))return this.each((function(t){q(this).wrapAll(e.call(this,t))}));if(this[0]){var t=q(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e})).append(this)}return this},wrapInner:function(e){return q.isFunction(e)?this.each((function(t){q(this).wrapInner(e.call(this,t))})):this.each((function(){var t=q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=q.isFunction(e);return this.each((function(n){q(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){q.nodeName(this,"body")||q(this).replaceWith(this.childNodes)})).end()},append:function(){return this.domManip(arguments,!0,(function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)}))},prepend:function(){return this.domManip(arguments,!0,(function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)}))},before:function(){if(!o(this[0]))return this.domManip(arguments,!1,(function(e){this.parentNode.insertBefore(e,this)}));if(arguments.length){var e=q.clean(arguments);return this.pushStack(q.merge(e,this),"before",this.selector)}},after:function(){if(!o(this[0]))return this.domManip(arguments,!1,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}));if(arguments.length){var e=q.clean(arguments);return this.pushStack(q.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)e&&!q.filter(e,[n]).length||(!t&&1===n.nodeType&&(q.cleanData(n.getElementsByTagName("*")),q.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&q.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return q.clone(this,e,t)}))},html:function(e){return q.access(this,(function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Me,""):t;if("string"==typeof e&&!Ge.test(e)&&(q.support.htmlSerialize||!We.test(e))&&(q.support.leadingWhitespace||!Le.test(e))&&!He[(ze.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Pe,"<$1></$2>");try{for(;r<i;r++)1===(n=this[r]||{}).nodeType&&(q.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(e){}}n&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(e){return o(this[0])?this.length?this.pushStack(q(q.isFunction(e)?e():e),"replaceWith",e):this:q.isFunction(e)?this.each((function(t){var n=q(this),r=n.html();n.replaceWith(e.call(this,t,r))})):("string"!=typeof e&&(e=q(e).detach()),this.each((function(){var t=this.nextSibling,n=this.parentNode;q(this).remove(),t?q(t).before(e):q(n).append(e)})))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,a,o,u,s=0,l=(e=[].concat.apply([],e))[0],f=[],d=this.length;if(!q.support.checkClone&&d>1&&"string"==typeof l&&Ue.test(l))return this.each((function(){q(this).domManip(e,n,r)}));if(q.isFunction(l))return this.each((function(i){var a=q(this);e[0]=l.call(this,i,n?a.html():t),a.domManip(e,n,r)}));if(this[0]){if(a=(o=(i=q.buildFragment(e,this,f)).fragment).firstChild,1===o.childNodes.length&&(o=a),a)for(n=n&&q.nodeName(a,"tr"),u=i.cacheable||d-1;s<d;s++)r.call(n&&q.nodeName(this[s],"table")?c(this[s],"tbody"):this[s],s===u?o:q.clone(o,!0,!0));o=a=null,f.length&&q.each(f,(function(e,t){t.src?q.ajax?q.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):q.error("no ajax"):q.globalEval((t.text||t.textContent||t.innerHTML||"").replace(qe,"")),t.parentNode&&t.parentNode.removeChild(t)}))}return this}}),q.buildFragment=function(e,n,r){var i,a,o,u=e[0];return n=(n=!(n=n||L).nodeType&&n[0]||n).ownerDocument||n,1===e.length&&"string"==typeof u&&u.length<512&&n===L&&"<"===u.charAt(0)&&!je.test(u)&&(q.support.checkClone||!Ue.test(u))&&(q.support.html5Clone||!We.test(u))&&(a=!0,o=(i=q.fragments[u])!==t),i||(i=n.createDocumentFragment(),q.clean(e,n,i,r),a&&(q.fragments[u]=o&&i)),{fragment:i,cacheable:a}},q.fragments={},q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){q.fn[e]=function(n){var r,i=0,a=[],o=q(n),u=o.length,s=1===this.length&&this[0].parentNode;if((null==s||s&&11===s.nodeType&&1===s.childNodes.length)&&1===u)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),q(o[i])[t](r),a=a.concat(r);return this.pushStack(a,e,o.selector)}})),q.extend({clone:function(e,t,n){var r,i,a,o;if(q.support.html5Clone||q.isXMLDoc(e)||!We.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Ye.innerHTML=e.outerHTML,Ye.removeChild(o=Ye.firstChild)),!(q.support.noCloneEvent&&q.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||q.isXMLDoc(e)))for(d(e,o),r=h(e),i=h(o),a=0;r[a];++a)i[a]&&d(r[a],i[a]);if(t&&(f(e,o),n))for(r=h(e),i=h(o),a=0;r[a];++a)f(r[a],i[a]);return r=i=null,o},clean:function(e,t,n,r){var i,a,o,u,s,c,f,d,h,x,g,m=t===L&&$e,v=[];for(t&&void 0!==t.createDocumentFragment||(t=L),i=0;null!=(o=e[i]);i++)if("number"==typeof o&&(o+=""),o){if("string"==typeof o)if(Re.test(o)){for(m=m||l(t),f=t.createElement("div"),m.appendChild(f),o=o.replace(Pe,"<$1></$2>"),u=(ze.exec(o)||["",""])[1].toLowerCase(),c=(s=He[u]||He._default)[0],f.innerHTML=s[1]+o+s[2];c--;)f=f.lastChild;if(!q.support.tbody)for(d=Ie.test(o),a=(h="table"!==u||d?"<table>"!==s[1]||d?[]:f.childNodes:f.firstChild&&f.firstChild.childNodes).length-1;a>=0;--a)q.nodeName(h[a],"tbody")&&!h[a].childNodes.length&&h[a].parentNode.removeChild(h[a]);!q.support.leadingWhitespace&&Le.test(o)&&f.insertBefore(t.createTextNode(Le.exec(o)[0]),f.firstChild),o=f.childNodes,f.parentNode.removeChild(f)}else o=t.createTextNode(o);o.nodeType?v.push(o):q.merge(v,o)}if(f&&(o=f=m=null),!q.support.appendChecked)for(i=0;null!=(o=v[i]);i++)q.nodeName(o,"input")?p(o):void 0!==o.getElementsByTagName&&q.grep(o.getElementsByTagName("input"),p);if(n)for(x=function(e){if(!e.type||Ve.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)},i=0;null!=(o=v[i]);i++)q.nodeName(o,"script")&&x(o)||(n.appendChild(o),void 0!==o.getElementsByTagName&&(g=q.grep(q.merge([],o.getElementsByTagName("script")),x),v.splice.apply(v,[i+1,0].concat(g)),i+=g.length));return v},cleanData:function(e,t){for(var n,r,i,a,o=0,u=q.expando,s=q.cache,l=q.support.deleteExpando,c=q.event.special;null!=(i=e[o]);o++)if((t||q.acceptData(i))&&(n=(r=i[u])&&s[r])){if(n.events)for(a in n.events)c[a]?q.event.remove(i,a):q.removeEvent(i,a,n.handle);s[r]&&(delete s[r],l?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,q.deletedIds.push(r))}}}),function(){var e,t;q.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t={},(e=q.uaMatch(z.userAgent)).browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),q.browser=t,q.sub=function(){function e(t,n){return new e.fn.init(t,n)}q.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,r){return r&&r instanceof q&&!(r instanceof e)&&(r=e(r)),q.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(L);return e}}();var Xe,Ze,Je,Ke=/alpha\([^)]*\)/i,Qe=/opacity=([^)]*)/,et=/^(top|right|bottom|left)$/,tt=/^(none|table(?!-c[ea]).+)/,nt=/^margin/,rt=new RegExp("^("+H+")(.*)$","i"),it=new RegExp("^("+H+")(?!px)[a-z%]+$","i"),at=new RegExp("^([-+])=("+H+")","i"),ot={BODY:"block"},ut={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:0,fontWeight:400},lt=["Top","Right","Bottom","Left"],ct=["Webkit","O","Moz","ms"],ft=q.fn.toggle;q.fn.extend({css:function(e,n){return q.access(this,(function(e,n,r){return r!==t?q.style(e,n,r):q.css(e,n)}),e,n,arguments.length>1)},show:function(){return m(this,!0)},hide:function(){return m(this)},toggle:function(e,t){var n="boolean"==typeof e;return q.isFunction(e)&&q.isFunction(t)?ft.apply(this,arguments):this.each((function(){(n?e:g(this))?q(this).show():q(this).hide()}))}}),q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Xe(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:q.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,u,s=q.camelCase(n),l=e.style;if(n=q.cssProps[s]||(q.cssProps[s]=x(l,s)),u=q.cssHooks[n]||q.cssHooks[s],r===t)return u&&"get"in u&&(a=u.get(e,!1,i))!==t?a:l[n];if("string"===(o=typeof r)&&(a=at.exec(r))&&(r=(a[1]+1)*a[2]+parseFloat(q.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"===o&&!q.cssNumber[s]&&(r+="px"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{l[n]=r}catch(e){}}},css:function(e,n,r,i){var a,o,u,s=q.camelCase(n);return n=q.cssProps[s]||(q.cssProps[s]=x(e.style,s)),(u=q.cssHooks[n]||q.cssHooks[s])&&"get"in u&&(a=u.get(e,!0,i)),a===t&&(a=Xe(e,n)),"normal"===a&&n in st&&(a=st[n]),r||i!==t?(o=parseFloat(a),r||q.isNumeric(o)?o||0:a):a},swap:function(e,t,n){var r,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=a[i];return r}}),e.getComputedStyle?Xe=function(t,n){var r,i,a,o,u=e.getComputedStyle(t,null),s=t.style;return u&&(""===(r=u.getPropertyValue(n)||u[n])&&!q.contains(t.ownerDocument,t)&&(r=q.style(t,n)),it.test(r)&&nt.test(n)&&(i=s.width,a=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=u.width,s.width=i,s.minWidth=a,s.maxWidth=o)),r}:L.documentElement.currentStyle&&(Xe=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],a=e.style;return null==i&&a&&a[t]&&(i=a[t]),it.test(i)&&!et.test(t)&&(n=a.left,(r=e.runtimeStyle&&e.runtimeStyle.left)&&(e.runtimeStyle.left=e.currentStyle.left),a.left="fontSize"===t?"1em":i,i=a.pixelLeft+"px",a.left=n,r&&(e.runtimeStyle.left=r)),""===i?"auto":i}),q.each(["height","width"],(function(e,t){q.cssHooks[t]={get:function(e,n,r){if(n)return 0===e.offsetWidth&&tt.test(Xe(e,"display"))?q.swap(e,ut,(function(){return y(e,t,r)})):y(e,t,r)},set:function(e,n,r){return v(0,n,r?_(e,t,r,q.support.boxSizing&&"border-box"===q.css(e,"boxSizing")):0)}}})),q.support.opacity||(q.cssHooks.opacity={get:function(e,t){return Qe.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=q.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=r&&r.filter||n.filter||"";n.zoom=1,t>=1&&""===q.trim(a.replace(Ke,""))&&n.removeAttribute&&(n.removeAttribute("filter"),r&&!r.filter)||(n.filter=Ke.test(a)?a.replace(Ke,i):a+" "+i)}}),q((function(){q.support.reliableMarginRight||(q.cssHooks.marginRight={get:function(e,t){return q.swap(e,{display:"inline-block"},(function(){if(t)return Xe(e,"marginRight")}))}}),!q.support.pixelPosition&&q.fn.position&&q.each(["top","left"],(function(e,t){q.cssHooks[t]={get:function(e,n){if(n){var r=Xe(e,t);return it.test(r)?q(e).position()[t]+"px":r}}}}))})),q.expr&&q.expr.filters&&(q.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!q.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||Xe(e,"display"))},q.expr.filters.visible=function(e){return!q.expr.filters.hidden(e)}),q.each({margin:"",padding:"",border:"Width"},(function(e,t){q.cssHooks[e+t]={expand:function(n){var r,i="string"==typeof n?n.split(" "):[n],a={};for(r=0;r<4;r++)a[e+lt[r]+t]=i[r]||i[r-2]||i[0];return a}},nt.test(e)||(q.cssHooks[e+t].set=v)}));var dt=/%20/g,ht=/\[\]$/,pt=/\r?\n/g,xt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,gt=/^(?:select|textarea)/i;q.fn.extend({serialize:function(){return q.param(this.serializeArray())},serializeArray:function(){return this.map((function(){return this.elements?q.makeArray(this.elements):this})).filter((function(){return this.name&&!this.disabled&&(this.checked||gt.test(this.nodeName)||xt.test(this.type))})).map((function(e,t){var n=q(this).val();return null==n?null:q.isArray(n)?q.map(n,(function(e,n){return{name:t.name,value:e.replace(pt,"\r\n")}})):{name:t.name,value:n.replace(pt,"\r\n")}})).get()}}),q.param=function(e,n){var r,i=[],a=function(e,t){t=q.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=q.ajaxSettings&&q.ajaxSettings.traditional),q.isArray(e)||e.jquery&&!q.isPlainObject(e))q.each(e,(function(){a(this.name,this.value)}));else for(r in e)w(r,e[r],n,a);return i.join("&").replace(dt,"+")};var mt,vt,_t=/#.*$/,yt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,bt=/^(?:GET|HEAD)$/,wt=/^\/\//,St=/\?/,kt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Et=/([?&])_=[^&]*/,At=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Tt=q.fn.load,Ct={},Dt={},Nt=["*/"]+["*"];try{vt=P.href}catch(e){(vt=L.createElement("a")).href="",vt=vt.href}mt=At.exec(vt.toLowerCase())||[],q.fn.load=function(e,n,r){if("string"!=typeof e&&Tt)return Tt.apply(this,arguments);if(!this.length)return this;var i,a,o,u=this,s=e.indexOf(" ");return s>=0&&(i=e.slice(s,e.length),e=e.slice(0,s)),q.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),q.ajax({url:e,type:a,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done((function(e){o=arguments,u.html(i?q("<div>").append(e.replace(kt,"")).find(i):e)})),this},q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),(function(e,t){q.fn[t]=function(e){return this.on(t,e)}})),q.each(["get","post"],(function(e,n){q[n]=function(e,r,i,a){return q.isFunction(r)&&(a=a||i,i=r,r=t),q.ajax({type:n,url:e,data:r,success:i,dataType:a})}})),q.extend({getScript:function(e,n){return q.get(e,t,n,"script")},getJSON:function(e,t,n){return q.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?E(e,q.ajaxSettings):(t=e,e=q.ajaxSettings),E(e,t),e},ajaxSettings:{url:vt,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(mt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Nt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":q.parseJSON,"text xml":q.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:S(Ct),ajaxTransport:S(Dt),ajax:function(e,n){function r(e,n,r,o){var l,f,v,_,b,S=n;2!==y&&(y=2,s&&clearTimeout(s),u=t,a=o||"",w.readyState=e>0?4:0,r&&(_=function(e,n,r){var i,a,o,u,s=e.contents,l=e.dataTypes,c=e.responseFields;for(a in c)a in r&&(n[c[a]]=r[a]);for(;"*"===l[0];)l.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in r)o=l[0];else{for(a in r){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}u||(u=a)}o=o||u}if(o)return o!==l[0]&&l.unshift(o),r[o]}(d,w,r)),e>=200&&e<300||304===e?(d.ifModified&&((b=w.getResponseHeader("Last-Modified"))&&(q.lastModified[i]=b),(b=w.getResponseHeader("Etag"))&&(q.etag[i]=b)),304===e?(S="notmodified",l=!0):(S=(l=function(e,t){var n,r,i,a,o=e.dataTypes.slice(),u=o[0],s={},l=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),o[1])for(n in e.converters)s[n.toLowerCase()]=e.converters[n];for(;i=o[++l];)if("*"!==i){if("*"!==u&&u!==i){if(!(n=s[u+" "+i]||s["* "+i]))for(r in s)if((a=r.split(" "))[1]===i&&(n=s[u+" "+a[0]]||s["* "+a[0]])){!0===n?n=s[r]:!0!==s[r]&&(i=a[0],o.splice(l--,0,i));break}if(!0!==n)if(n&&e.throws)t=n(t);else try{t=n(t)}catch(e){return{state:"parsererror",error:n?e:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}(d,_)).state,f=l.data,l=!(v=l.error))):(v=S,S&&!e||(S="error",e<0&&(e=0))),w.status=e,w.statusText=(n||S)+"",l?x.resolveWith(h,[f,S,w]):x.rejectWith(h,[w,S,v]),w.statusCode(m),m=t,c&&p.trigger("ajax"+(l?"Success":"Error"),[w,d,l?f:v]),g.fireWith(h,[w,S]),c&&(p.trigger("ajaxComplete",[w,d]),--q.active||q.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,a,o,u,s,l,c,f,d=q.ajaxSetup({},n),h=d.context||d,p=h!==d&&(h.nodeType||h instanceof q)?q(h):q.event,x=q.Deferred(),g=q.Callbacks("once memory"),m=d.statusCode||{},v={},_={},y=0,b="canceled",w={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=_[n]=_[n]||e,v[e]=t}return this},getAllResponseHeaders:function(){return 2===y?a:null},getResponseHeader:function(e){var n;if(2===y){if(!o)for(o={};n=yt.exec(a);)o[n[1].toLowerCase()]=n[2];n=o[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(d.mimeType=e),this},abort:function(e){return e=e||b,u&&u.abort(e),r(0,e),this}};if(x.promise(w),w.success=w.done,w.error=w.fail,w.complete=g.add,w.statusCode=function(e){var t;if(e)if(y<2)for(t in e)m[t]=[m[t],e[t]];else t=e[w.status],w.always(t);return this},d.url=((e||d.url)+"").replace(_t,"").replace(wt,mt[1]+"//"),d.dataTypes=q.trim(d.dataType||"*").toLowerCase().split(Y),null==d.crossDomain&&(l=At.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===mt[1]&&l[2]===mt[2]&&(l[3]||("http:"===l[1]?80:443))==(mt[3]||("http:"===mt[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=q.param(d.data,d.traditional)),k(Ct,d,n,w),2===y)return w;if(c=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bt.test(d.type),c&&0==q.active++&&q.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(St.test(d.url)?"&":"?")+d.data,delete d.data),i=d.url,!1===d.cache)){var S=q.now(),E=d.url.replace(Et,"$1_="+S);d.url=E+(E===d.url?(St.test(d.url)?"&":"?")+"_="+S:"")}for(f in(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&w.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(i=i||d.url,q.lastModified[i]&&w.setRequestHeader("If-Modified-Since",q.lastModified[i]),q.etag[i]&&w.setRequestHeader("If-None-Match",q.etag[i])),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Nt+"; q=0.01":""):d.accepts["*"]),d.headers)w.setRequestHeader(f,d.headers[f]);if(!d.beforeSend||!1!==d.beforeSend.call(h,w,d)&&2!==y){for(f in b="abort",{success:1,error:1,complete:1})w[f](d[f]);if(u=k(Dt,d,n,w)){w.readyState=1,c&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout((function(){w.abort("timeout")}),d.timeout));try{y=1,u.send(v,r)}catch(e){if(!(y<2))throw e;r(-1,e)}}else r(-1,"No Transport");return w}return w.abort()},active:0,lastModified:{},etag:{}});var Ft=[],Ot=/\?/,Mt=/(=)\?(?=&|$)|\?\?/,Lt=q.now();q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||q.expando+"_"+Lt++;return this[e]=!0,e}}),q.ajaxPrefilter("json jsonp",(function(n,r,i){var a,o,u,s=n.data,l=n.url,c=!1!==n.jsonp,f=c&&Mt.test(l),d=c&&!f&&"string"==typeof s&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(s);if("jsonp"===n.dataTypes[0]||f||d)return a=n.jsonpCallback=q.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[a],f?n.url=l.replace(Mt,"$1"+a):d?n.data=s.replace(Mt,"$1"+a):c&&(n.url+=(Ot.test(l)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return u||q.error(a+" was not called"),u[0]},n.dataTypes[0]="json",e[a]=function(){u=arguments},i.always((function(){e[a]=o,n[a]&&(n.jsonpCallback=r.jsonpCallback,Ft.push(a)),u&&q.isFunction(o)&&o(u[0]),u=o=t})),"script"})),q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return q.globalEval(e),e}}}),q.ajaxPrefilter("script",(function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)})),q.ajaxTransport("script",(function(e){if(e.crossDomain){var n,r=L.head||L.getElementsByTagName("head")[0]||L.documentElement;return{send:function(i,a){(n=L.createElement("script")).async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){(i||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||a(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}}));var Pt,zt=!!e.ActiveXObject&&function(){for(var e in Pt)Pt[e](0,1)},It=0;q.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:A,function(e){q.extend(q.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(q.ajaxSettings.xhr()),q.support.ajax&&q.ajaxTransport((function(n){var r;if(!n.crossDomain||q.support.cors)return{send:function(i,a){var o,u,s=n.xhr();if(n.username?s.open(n.type,n.url,n.async,n.username,n.password):s.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)s[u]=n.xhrFields[u];n.mimeType&&s.overrideMimeType&&s.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)s.setRequestHeader(u,i[u])}catch(e){}s.send(n.hasContent&&n.data||null),r=function(e,i){var u,l,c,f,d;try{if(r&&(i||4===s.readyState))if(r=t,o&&(s.onreadystatechange=q.noop,zt&&delete Pt[o]),i)4!==s.readyState&&s.abort();else{u=s.status,c=s.getAllResponseHeaders(),f={},(d=s.responseXML)&&d.documentElement&&(f.xml=d);try{f.text=s.responseText}catch(e){}try{l=s.statusText}catch(e){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=f.text?200:404}}catch(e){i||a(-1,e)}f&&a(u,l,f,c)},n.async?4===s.readyState?setTimeout(r,0):(o=++It,zt&&(Pt||(Pt={},q(e).unload(zt)),Pt[o]=r),s.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}));var Rt,Gt,jt=/^(?:toggle|show|hide)$/,Wt=new RegExp("^(?:([-+])=|)("+H+")([a-z%]*)$","i"),Bt=/queueHooks$/,Ut=[function(e,t,n){var r,i,a,o,u,s,l,c,f,d=this,h=e.style,p={},x=[],m=e.nodeType&&g(e);for(r in n.queue||(null==(c=q._queueHooks(e,"fx")).unqueued&&(c.unqueued=0,f=c.empty.fire,c.empty.fire=function(){c.unqueued||f()}),c.unqueued++,d.always((function(){d.always((function(){c.unqueued--,q.queue(e,"fx").length||c.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===q.css(e,"display")&&"none"===q.css(e,"float")&&(q.support.inlineBlockNeedsLayout&&"inline"!==b(e.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",q.support.shrinkWrapBlocks||d.done((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),t)if(a=t[r],jt.exec(a)){if(delete t[r],s=s||"toggle"===a,a===(m?"hide":"show"))continue;x.push(r)}if(o=x.length){"hidden"in(u=q._data(e,"fxshow")||q._data(e,"fxshow",{}))&&(m=u.hidden),s&&(u.hidden=!m),m?q(e).show():d.done((function(){q(e).hide()})),d.done((function(){var t;for(t in q.removeData(e,"fxshow",!0),p)q.style(e,t,p[t])}));for(r=0;r<o;r++)i=x[r],l=d.createTween(i,m?u[i]:0),p[i]=u[i]||q.style(e,i),i in u||(u[i]=l.start,m&&(l.end=l.start,l.start="width"===i||"height"===i?1:0))}}],Vt={"*":[function(e,t){var n,r,i=this.createTween(e,t),a=Wt.exec(t),o=i.cur(),u=+o||0,s=1,l=20;if(a){if(n=+a[2],"px"!==(r=a[3]||(q.cssNumber[e]?"":"px"))&&u){u=q.css(i.elem,e,!0)||n||1;do{u/=s=s||".5",q.style(i.elem,e,u+r)}while(s!==(s=i.cur()/o)&&1!==s&&--l)}i.unit=r,i.start=u,i.end=a[1]?u+(a[1]+1)*n:n}return i}]};q.Animation=q.extend(C,{tweener:function(e,t){q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],Vt[n]=Vt[n]||[],Vt[n].unshift(t)},prefilter:function(e,t){t?Ut.unshift(e):Ut.push(e)}}),q.Tween=D,D.prototype={constructor:D,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(q.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.options.duration?this.pos=t=q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=q.css(e.elem,e.prop,!1,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){q.fx.step[e.prop]?q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[q.cssProps[e.prop]]||q.cssHooks[e.prop])?q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},q.each(["toggle","show","hide"],(function(e,t){var n=q.fn[t];q.fn[t]=function(r,i,a){return null==r||"boolean"==typeof r||!e&&q.isFunction(r)&&q.isFunction(i)?n.apply(this,arguments):this.animate(N(t,!0),r,i,a)}})),q.fn.extend({fadeTo:function(e,t,n,r){return this.filter(g).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=q.isEmptyObject(e),a=q.speed(t,n,r),o=function(){var t=C(this,q.extend({},e),a);i&&t.stop(!0)};return i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",a=q.timers,o=q._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Bt.test(n)&&i(o[n]);for(n=a.length;n--;)a[n].elem===this&&(null==e||a[n].queue===e)&&(a[n].anim.stop(r),t=!1,a.splice(n,1));(t||!r)&&q.dequeue(this,e)}))}}),q.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){q.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),q.speed=function(e,t,n){var r=e&&"object"==typeof e?q.extend({},e):{complete:n||!n&&t||q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!q.isFunction(t)&&t};return r.duration=q.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in q.fx.speeds?q.fx.speeds[r.duration]:q.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){q.isFunction(r.old)&&r.old.call(this),r.queue&&q.dequeue(this,r.queue)},r},q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},q.timers=[],q.fx=D.prototype.init,q.fx.tick=function(){var e,n=q.timers,r=0;for(Rt=q.now();r<n.length;r++)!(e=n[r])()&&n[r]===e&&n.splice(r--,1);n.length||q.fx.stop(),Rt=t},q.fx.timer=function(e){e()&&q.timers.push(e)&&!Gt&&(Gt=setInterval(q.fx.tick,q.fx.interval))},q.fx.interval=13,q.fx.stop=function(){clearInterval(Gt),Gt=null},q.fx.speeds={slow:600,fast:200,_default:400},q.fx.step={},q.expr&&q.expr.filters&&(q.expr.filters.animated=function(e){return q.grep(q.timers,(function(t){return e===t.elem})).length});var qt=/^(?:body|html)$/i;q.fn.offset=function(e){if(arguments.length)return e===t?this:this.each((function(t){q.offset.setOffset(this,e,t)}));var n,r,i,a,o,u,s,l={top:0,left:0},c=this[0],f=c&&c.ownerDocument;return f?(r=f.body)===c?q.offset.bodyOffset(c):(n=f.documentElement,q.contains(n,c)?(void 0!==c.getBoundingClientRect&&(l=c.getBoundingClientRect()),i=F(f),a=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,s=i.pageXOffset||n.scrollLeft,{top:l.top+u-a,left:l.left+s-o}):l):void 0},q.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return q.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(q.css(e,"marginTop"))||0,n+=parseFloat(q.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=q.css(e,"position");"static"===r&&(e.style.position="relative");var i,a,o=q(e),u=o.offset(),s=q.css(e,"top"),l=q.css(e,"left"),c={},f={};("absolute"===r||"fixed"===r)&&q.inArray("auto",[s,l])>-1?(i=(f=o.position()).top,a=f.left):(i=parseFloat(s)||0,a=parseFloat(l)||0),q.isFunction(t)&&(t=t.call(e,n,u)),null!=t.top&&(c.top=t.top-u.top+i),null!=t.left&&(c.left=t.left-u.left+a),"using"in t?t.using.call(e,c):o.css(c)}},q.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),r=qt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(q.css(e,"marginTop"))||0,n.left-=parseFloat(q.css(e,"marginLeft"))||0,r.top+=parseFloat(q.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(q.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||L.body;e&&!qt.test(e.nodeName)&&"static"===q.css(e,"position");)e=e.offsetParent;return e||L.body}))}}),q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,n){var r=/Y/.test(n);q.fn[e]=function(i){return q.access(this,(function(e,i,a){var o=F(e);if(a===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?q(o).scrollLeft():a,r?a:q(o).scrollTop()):e[i]=a}),e,i,arguments.length,null)}})),q.each({Height:"height",Width:"width"},(function(e,n){q.each({padding:"inner"+e,content:n,"":"outer"+e},(function(r,i){q.fn[i]=function(i,a){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(!0===i||!0===a?"margin":"border");return q.access(this,(function(n,r,i){var a;return q.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+e],a["scroll"+e],n.body["offset"+e],a["offset"+e],a["client"+e])):i===t?q.css(n,r,i,u):q.style(n,r,i,u)}),n,o?i:t,o,null)}}))})),e.jQuery=e.$=q,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],(function(){return q}))}(window),module.exports=function(){var e=Math.tan,t=Math.cos,n=Math.sin,r=Math.PI,i=Math.sqrt,a=Math.ceil,o=Math.log,u=Math.round,s=Math.pow,l=Math.min,c=Math.floor,f=Math.max,d=Math.abs;return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){if(!u&&"function"==typeof require&&require)return require(o,!0);if(a)return a(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return i(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){t.exports={version:"2.6.5",dataflow:e("vega-dataflow"),parse:e("./src/parse/"),scene:{Bounder:e("./src/scene/Bounder"),Builder:e("./src/scene/Builder"),Encoder:e("./src/scene/Encoder"),GroupBuilder:e("./src/scene/GroupBuilder"),visit:e("./src/scene/visit")},transforms:e("./src/transforms"),Transform:e("./src/transforms/Transform"),BatchTransform:e("./src/transforms/BatchTransform"),Parameter:e("./src/transforms/Parameter"),schema:e("./src/core/schema"),config:e("./src/core/config"),util:e("./src/util"),logging:e("vega-logging"),debug:e("vega-logging").debug}},{"./src/core/config":92,"./src/core/schema":93,"./src/parse/":98,"./src/scene/Bounder":110,"./src/scene/Builder":111,"./src/scene/Encoder":112,"./src/scene/GroupBuilder":113,"./src/scene/visit":118,"./src/transforms":146,"./src/transforms/BatchTransform":120,"./src/transforms/Parameter":136,"./src/transforms/Transform":141,"./src/util":149,"vega-dataflow":42,"vega-logging":49}],2:[function(){},{}],3:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3_dsv={})}(this,(function(e){"use strict";function t(e){return new r(e)}function n(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}")}function r(e){function t(t){return t.map(r).join(e)}function r(e){return i.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var i=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);this.parse=function(e,t){var r,i,a=this.parseRows(e,(function(e,a){return r?r(e,a-1):(i=e,void(r=t?function(e,t){var r=n(e);return function(n,i){return t(r(n),i,e)}}(e,t):n(e)))}));return a.columns=i,a},this.parseRows=function(e,t){function n(){if(c>=l)return u;if(i)return i=!1,o;var t,n=c;if(34===e.charCodeAt(n)){for(var r=n;r++<l;)if(34===e.charCodeAt(r)){if(34!==e.charCodeAt(r+1))break;++r}return c=r+2,13===(t=e.charCodeAt(r+1))?(i=!0,10===e.charCodeAt(r+2)&&++c):10===t&&(i=!0),e.slice(n+1,r).replace(/""/g,'"')}for(;c<l;){var s=1;if(10===(t=e.charCodeAt(c++)))i=!0;else if(13===t)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(t!==a)continue;return e.slice(n,c-s)}return e.slice(n)}for(var r,i,o={},u={},s=[],l=e.length,c=0,f=0;(r=n())!==u;){for(var d=[];r!==o&&r!==u;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s},this.format=function(t,n){return null==n&&(n=function(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}(t)),[n.map(r).join(e)].concat(t.map((function(t){return n.map((function(e){return r(t[e])})).join(e)}))).join("\n")},this.formatRows=function(e){return e.map(t).join("\n")}}t.prototype=r.prototype;var i=t(","),a=t("\t");e.version="0.1.14",e.dsv=t,e.csv=i,e.tsv=a}))},{}],4:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3_format={})}(this,(function(e){"use strict";function t(e,t){if(0>(n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e")))return null;var n,r=e.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return(e=t(d(e)))?e[1]:NaN}function r(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return 0>a?"0."+Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+Array(a-i.length+2).join("0")}function i(e){return new a(e)}function a(e){if(!(t=g.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],u=t[6]&&+t[6],s=!!t[7],l=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(s=!0,c="g"):!x[c]&&(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=u,this.comma=s,this.precision=l,this.type=c}function o(e){return e}function h(e){function t(e){var t=(e=i(e)).fill,n=e.align,o=e.sign,s=e.symbol,c=e.zero,d=e.width,h=e.comma,g=e.precision,v=e.type,_="$"===s?a[0]:"#"===s&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",y="$"===s?a[1]:/[%p]/.test(v)?"%":"",b=x[v],w=!v||/[defgprs%]/.test(v);return g=null==g?v?6:12:/[gprs]/.test(v)?f(1,l(21,g)):f(0,l(20,g)),function(e){var i=_,a=y;if("c"===v)a=b(e)+a,e="";else{var s,l=(0>(e=+e)||0>1/e)&&(e*=-1,!0);if(e=b(e,g),l){var f=-1,x=e.length;for(l=!1;++f<x;)if(48<(s=e.charCodeAt(f))&&58>s||"x"===v&&96<s&&103>s||"X"===v&&64<s&&71>s){l=!0;break}}if(i=(l?"("===o?o:"-":"-"===o||"("===o?"":o)+i,a=a+("s"===v?m[8+p/3]:"")+(l&&"("===o?")":""),w)for(f=-1,x=e.length;++f<x;)if(48>(s=e.charCodeAt(f))||57<s){a=(46===s?u+e.slice(f+1):e.slice(f))+a,e=e.slice(0,f);break}}h&&!c&&(e=r(e,1/0));var S=i.length+e.length+a.length,k=S<d?Array(d-S+1).join(t):"";return h&&c&&(e=r(k+e,k.length?d-a.length:1/0),k=""),"<"===n?i+e+a+k:"="===n?i+k+e+a:"^"===n?k.slice(0,S=k.length>>1)+i+e+a+k.slice(S):k+i+e+a}}var r=e.grouping&&e.thousands?function(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;0<i&&0<u&&(s+u+1>r&&(u=f(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}(e.grouping,e.thousands):o,a=e.currency,u=e.decimal;return{format:t,formatPrefix:function(e,r){var a=t(((e=i(e)).type="f",e)),o=3*f(-8,l(8,c(n(r)/3))),u=s(10,-o),d=m[8+o/3];return function(e){return a(u*e)+d}}}}var p,x={"":function(e,t){e:for(var n,r=(e=e.toPrecision(t)).length,i=1,a=-1;i<r;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:0<a&&(a=0)}return 0<a?e.slice(0,a)+e.slice(n+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return u(e).toString(2)},c:function(e){return e+""},d:function(e){return u(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return u(e).toString(8)},p:function(e,t){return r(100*e,t)},r:r,s:function(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1],o=a-(p=3*f(-8,l(8,c(a/3))))+1,u=i.length;return o===u?i:o>u?i+Array(o-u+1).join("0"):0<o?i.slice(0,o)+"."+i.slice(o):"0."+Array(1-o).join("0")+t(e,f(0,n+o-1))[0]},X:function(e){return u(e).toString(16).toUpperCase()},x:function(e){return u(e).toString(16)}},g=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":f(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+f(0,0|this.precision))+this.type};var m=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],v=h({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),_=h({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),y=h({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),b=h({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),w=h({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),S=h({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),k=h({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),E=h({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),A=h({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),T=h({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),C=h({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),D=h({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),N=h({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),F=h({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),O=h({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),M=h({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),L=h({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),P=h({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),z=h({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),I=h({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),R=h({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),G=h({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),j=h({decimal:".",thousands:",",grouping:[3],currency:["¥",""]}),W=v.format,B=v.formatPrefix;e.version="0.4.2",e.format=W,e.formatPrefix=B,e.locale=h,e.localeCaEs=_,e.localeCsCz=y,e.localeDeCh=b,e.localeDeDe=w,e.localeEnCa=S,e.localeEnGb=k,e.localeEnUs=v,e.localeEsEs=E,e.localeFiFi=A,e.localeFrCa=T,e.localeFrFr=C,e.localeHeIl=D,e.localeHuHu=N,e.localeItIt=F,e.localeJaJp=O,e.localeKoKr=M,e.localeMkMk=L,e.localeNlNl=P,e.localePlPl=z,e.localePtBr=I,e.localeRuRu=R,e.localeSvSe=G,e.localeZhCn=j,e.formatSpecifier=i,e.precisionFixed=function(e){return f(0,-n(d(e)))},e.precisionPrefix=function(e,t){return f(0,3*f(-8,l(8,c(n(t)/3)))-n(d(e)))},e.precisionRound=function(e,t){return e=d(e),t=d(t)-e,f(0,n(t)-n(e))+1}}))},{}],5:[function(e,t,n){!function(r,i){"object"==typeof n&&void 0!==t?i(n,e("d3-time")):i(r.d3_time_format={},r.d3_time)}(this,(function(e,t){"use strict";function n(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){function t(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null==(i=ee[r=e.charAt(++u)])?i="e"===r?" ":"0":r=e.charAt(++u),(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function a(e,t){return function(n){var a=i(1900);if(o(a,e,n+="",0)!=n.length)return null;if("p"in a&&(a.H=a.H%12+12*a.p),"W"in a||"U"in a){"w"in a||(a.w="W"in a?1:0);var u="Z"in a?r(i(a.y)).getUTCDay():t(i(a.y)).getDay();a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(u+5)%7:a.w+7*a.U-(u+6)%7}return"Z"in a?(a.H+=0|a.Z/100,a.M+=a.Z%100,r(a)):t(a)}}function o(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=_e[i in ee?t.charAt(o++):i])||0>(r=a(e,n,r)))return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var u=e.dateTime,Q=e.date,te=e.time,ne=e.periods,re=e.days,ie=e.shortDays,ae=e.months,oe=e.shortMonths,ue=s(ne),se=l(ne),le=s(re),ce=l(re),fe=s(ie),de=l(ie),he=s(ae),pe=l(ae),xe=s(oe),ge=l(oe),me={a:function(e){return ie[e.getDay()]},A:function(e){return re[e.getDay()]},b:function(e){return oe[e.getMonth()]},B:function(e){return ae[e.getMonth()]},c:null,d:k,e:k,H:E,I:A,j:T,L:C,m:D,M:N,p:function(e){return ne[+(12<=e.getHours())]},S:F,U:O,w:M,W:L,x:null,X:null,y:P,Y:z,Z:I,"%":K},ve={a:function(e){return ie[e.getUTCDay()]},A:function(e){return re[e.getUTCDay()]},b:function(e){return oe[e.getUTCMonth()]},B:function(e){return ae[e.getUTCMonth()]},c:null,d:R,e:R,H:G,I:j,j:W,L:B,m:U,M:V,p:function(e){return ne[+(12<=e.getUTCHours())]},S:q,U:H,w:$,W:Y,x:null,X:null,y:X,Y:Z,Z:J,"%":K},_e={a:function(e,t,n){var r=fe.exec(t.slice(n));return r?(e.w=de[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=le.exec(t.slice(n));return r?(e.w=ce[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=xe.exec(t.slice(n));return r?(e.m=ge[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=he.exec(t.slice(n));return r?(e.m=pe[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,t,n){return o(e,u,t,n)},d:m,e:m,H:_,I:_,j:v,L:w,m:g,M:y,p:function(e,t,n){var r=ue.exec(t.slice(n));return r?(e.p=se[r[0].toLowerCase()],n+r[0].length):-1},S:b,U:f,w:c,W:d,x:function(e,t,n){return o(e,Q,t,n)},X:function(e,t,n){return o(e,te,t,n)},y:p,Y:h,Z:x,"%":S};return me.x=t(Q,me),me.X=t(te,me),me.c=t(u,me),ve.x=t(Q,ve),ve.X=t(te,ve),ve.c=t(u,ve),{format:function(e){var r=t(e+="",me);return r.parse=a(e,n),r.toString=function(){return e},r},utcFormat:function(e){var n=t(e+="",ve);return n.parse=a(e,r),n.toString=function(){return e},n}}}function o(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?Array(n-a+1).join(t)+i:i)}function u(e){return e.replace(re,"\\$&")}function s(e){return new RegExp("^(?:"+e.map(u).join("|")+")","i")}function l(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function c(e,t,n){var r=te.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function f(e,t,n){var r=te.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function d(e,t,n){var r=te.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function h(e,t,n){var r=te.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function p(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function x(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function g(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function m(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function v(e,t,n){var r=te.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function y(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function b(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function w(e,t,n){var r=te.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function k(e,t){return o(e.getDate(),t,2)}function E(e,t){return o(e.getHours(),t,2)}function A(e,t){return o(e.getHours()%12||12,t,2)}function T(e,n){return o(1+t.day.count(t.year(e),e),n,3)}function C(e,t){return o(e.getMilliseconds(),t,3)}function D(e,t){return o(e.getMonth()+1,t,2)}function N(e,t){return o(e.getMinutes(),t,2)}function F(e,t){return o(e.getSeconds(),t,2)}function O(e,n){return o(t.sunday.count(t.year(e),e),n,2)}function M(e){return e.getDay()}function L(e,n){return o(t.monday.count(t.year(e),e),n,2)}function P(e,t){return o(e.getFullYear()%100,t,2)}function z(e,t){return o(e.getFullYear()%1e4,t,4)}function I(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+o(0|t/60,"0",2)+o(t%60,"0",2)}function R(e,t){return o(e.getUTCDate(),t,2)}function G(e,t){return o(e.getUTCHours(),t,2)}function j(e,t){return o(e.getUTCHours()%12||12,t,2)}function W(e,n){return o(1+t.utcDay.count(t.utcYear(e),e),n,3)}function B(e,t){return o(e.getUTCMilliseconds(),t,3)}function U(e,t){return o(e.getUTCMonth()+1,t,2)}function V(e,t){return o(e.getUTCMinutes(),t,2)}function q(e,t){return o(e.getUTCSeconds(),t,2)}function H(e,n){return o(t.utcSunday.count(t.utcYear(e),e),n,2)}function $(e){return e.getUTCDay()}function Y(e,n){return o(t.utcMonday.count(t.utcYear(e),e),n,2)}function X(e,t){return o(e.getUTCFullYear()%100,t,2)}function Z(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function J(){return"+0000"}function K(){return"%"}function Q(e){return e.toISOString()}var ee={"-":"",_:" ",0:"0"},te=/^\s*\d+/,ne=/^%/,re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ie=a({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ae=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),oe=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),ue=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),se=a({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),le=a({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ce=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),fe=a({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),de=a({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),he=a({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),pe=a({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),xe=a({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),ge=a({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),me=a({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),ve=a({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4���","5월","6월","7월","8월","9월","10월","11월","12월"]}),_e=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),ye=a({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),be=a({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Pi��tek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),we=a({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),Se=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),ke=a({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),Ee=a({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]});Q.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Q.toString=function(){return"%Y-%m-%dT%H:%M:%S.%LZ"};var Ae=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Q:ie.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Te=ie.format,Ce=ie.utcFormat;e.version="0.2.1",e.format=Te,e.utcFormat=Ce,e.locale=a,e.localeCaEs=ae,e.localeDeCh=oe,e.localeDeDe=ue,e.localeEnCa=se,e.localeEnGb=le,e.localeEnUs=ie,e.localeEsEs=ce,e.localeFiFi=fe,e.localeFrCa=de,e.localeFrFr=he,e.localeHeIl=pe,e.localeHuHu=xe,e.localeItIt=ge,e.localeJaJp=me,e.localeKoKr=ve,e.localeMkMk=_e,e.localeNlNl=ye,e.localePlPl=be,e.localePtBr=we,e.localeRuRu=Se,e.localeSvSe=ke,e.localeZhCn=Ee,e.isoFormat=Ae}))},{"d3-time":6}],6:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3_time={})}(this,(function(e){"use strict";function t(e,n,r,o){function u(t){return e(t=new Date(+t)),t}return u.floor=u,u.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),t-r<i-t?r:i},u.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},u.offset=function(e,t){return n(e=new Date(+e),null==t?1:c(t)),e},u.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:c(i),!(t<r&&0<i))return a;for(n(t,1),e(t),t<r&&a.push(new Date(+t));n(t,i),e(t),t<r;)a.push(new Date(+t));return a},u.filter=function(r){return t((function(t){for(;e(t),!r(t);)t.setTime(t-1)}),(function(e,t){for(;0<=--t;)for(;n(e,1),!r(e););}))},r&&(u.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),c(r(i,a))},u.every=function(e){return e=c(e),isFinite(e)&&0<e?1<e?u.filter(o?function(t){return 0==o(t)%e}:function(t){return 0==u.count(0,t)%e}):u:null}),u}function n(e){return t((function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}function r(e){return t((function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}var i=new Date,a=new Date,o=t((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));o.every=function(e){return e=c(e),isFinite(e)&&0<e?1<e?t((function(t){t.setTime(c(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):o:null};var u=t((function(e){e.setMilliseconds(0)}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getSeconds()})),s=t((function(e){e.setSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()})),l=t((function(e){e.setMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()})),f=t((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1})),d=n(0),h=n(1),p=n(2),x=n(3),g=n(4),m=n(5),v=n(6),_=t((function(e){e.setHours(0,0,0,0),e.setDate(1)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),y=t((function(e){e.setHours(0,0,0,0),e.setMonth(0,1)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})),b=t((function(e){e.setUTCMilliseconds(0)}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()})),w=t((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getUTCMinutes()})),S=t((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()})),k=t((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1})),E=r(0),A=r(1),T=r(2),C=r(3),D=r(4),N=r(5),F=r(6),O=t((function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),M=t((function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})),L=o.range,P=u.range,z=s.range,I=l.range,R=f.range,G=d.range,j=h.range,W=p.range,B=x.range,U=g.range,V=m.range,q=v.range,H=d.range,$=_.range,Y=y.range,X=b.range,Z=w.range,J=S.range,K=k.range,Q=E.range,ee=A.range,te=T.range,ne=C.range,re=D.range,ie=N.range,ae=F.range,oe=E.range,ue=O.range,se=M.range;e.version="0.1.1",e.milliseconds=L,e.seconds=P,e.minutes=z,e.hours=I,e.days=R,e.sundays=G,e.mondays=j,e.tuesdays=W,e.wednesdays=B,e.thursdays=U,e.fridays=V,e.saturdays=q,e.weeks=H,e.months=$,e.years=Y,e.utcMillisecond=o,e.utcMilliseconds=L,e.utcSeconds=X,e.utcMinutes=Z,e.utcHours=J,e.utcDays=K,e.utcSundays=Q,e.utcMondays=ee,e.utcTuesdays=te,e.utcWednesdays=ne,e.utcThursdays=re,e.utcFridays=ie,e.utcSaturdays=ae,e.utcWeeks=oe,e.utcMonths=ue,e.utcYears=se,e.millisecond=o,e.second=u,e.minute=s,e.hour=l,e.day=f,e.sunday=d,e.monday=h,e.tuesday=p,e.wednesday=x,e.thursday=g,e.friday=m,e.saturday=v,e.week=d,e.month=_,e.year=y,e.utcSecond=b,e.utcMinute=w,e.utcHour=S,e.utcDay=k,e.utcSunday=E,e.utcMonday=A,e.utcTuesday=T,e.utcWednesday=C,e.utcThursday=D,e.utcFriday=N,e.utcSaturday=F,e.utcWeek=E,e.utcMonth=O,e.utcYear=M,e.interval=t}))},{}],7:[function(e,t){t.exports={_args:[[{raw:"datalib@^1.7.1",scope:null,escapedName:"datalib",name:"datalib",rawSpec:"^1.7.1",spec:">=1.7.1 <2.0.0",type:"range"},"/Users/arvind/Research/vega2/vega3-2"]],_from:"datalib@>=1.7.1 <2.0.0",_id:"datalib@1.7.3",_inCache:!0,_installable:!0,_location:"/datalib",_nodeVersion:"0.12.7",_npmOperationalInternal:{host:"packages-16-east.internal.npmjs.com",tmp:"tmp/datalib-1.7.3.tgz_1476399375564_0.8775846140924841"},_npmUser:{name:"jheer",email:"jeffrey.heer@gmail.com"},_npmVersion:"2.12.1",_phantomChildren:{},_requested:{raw:"datalib@^1.7.1",scope:null,escapedName:"datalib",name:"datalib",rawSpec:"^1.7.1",spec:">=1.7.1 <2.0.0",type:"range"},_requiredBy:["/","/vega-dataflow","/vega-scenegraph"],_resolved:"https://registry.npmjs.org/datalib/-/datalib-1.7.3.tgz",_shasum:"4722715bb91f5a2411cf42bf984932cc403eba48",_shrinkwrap:null,_spec:"datalib@^1.7.1",_where:"/Users/arvind/Research/vega2/vega3-2",author:{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},browser:{buffer:!1,fs:!1,http:!1,request:!1,"sync-request":!1,url:!1},bugs:{url:"https://github.com/vega/datalib/issues"},contributors:[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],dependencies:{"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",request:"^2.67.0","sync-request":"^2.1.0",topojson:"^1.6.19"},description:"JavaScript utilites for loading, summarizing and working with data.",devDependencies:{browserify:"^12.0.1",chai:"^3.4.1",istanbul:"latest",jshint:"^2.9.1-rc1",mocha:"^2.3.4","uglify-js":"^2.6.1"},directories:{},dist:{shasum:"4722715bb91f5a2411cf42bf984932cc403eba48",tarball:"https://registry.npmjs.org/datalib/-/datalib-1.7.3.tgz"},gitHead:"0087f0a1e9e9f819bffb309fa10b4ac3c9292486",homepage:"https://github.com/vega/datalib#readme",keywords:["data","table","statistics","parse","csv","tsv","json","utility"],license:"BSD-3-Clause",main:"src/index.js",maintainers:[{name:"jheer",email:"jeffrey.heer@gmail.com"}],name:"datalib",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/vega/datalib.git"},scripts:{build:"browserify src/index.js -d -s dl -o datalib.js",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/"},version:"1.7.3"}},{}],8:[function(e,t){var n=e("./util"),r=e("./time"),i=r.utc,a=t.exports;a.$year=n.$func("year",r.year.unit),a.$month=n.$func("month",r.months.unit),a.$date=n.$func("date",r.dates.unit),a.$day=n.$func("day",r.weekdays.unit),a.$hour=n.$func("hour",r.hours.unit),a.$minute=n.$func("minute",r.minutes.unit),a.$second=n.$func("second",r.seconds.unit),a.$utcYear=n.$func("utcYear",i.year.unit),a.$utcMonth=n.$func("utcMonth",i.months.unit),a.$utcDate=n.$func("utcDate",i.dates.unit),a.$utcDay=n.$func("utcDay",i.weekdays.unit),a.$utcHour=n.$func("utcHour",i.hours.unit),a.$utcMinute=n.$func("utcMinute",i.minutes.unit),a.$utcSecond=n.$func("utcSecond",i.seconds.unit)},{"./time":30,"./util":31}],9:[function(e,t){function n(){this._cells={},this._aggr=[],this._stream=!1}var r=e("../util"),i=e("./measures"),a=e("./collector"),o=n.Flags={ADD_CELL:1,MOD_CELL:2},u=n.prototype;u.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},u.key=function(e){return null==e?this._key:(this._key=r.$(e),this)},u.groupby=function(e){return this._dims=r.array(e).map((function(e,t){if(null==(e=r.isString(e)?{name:e,get:r.$(e)}:r.isFunction(e)?{name:r.name(e)||e.name||"_"+t,get:e}:e.name&&r.isFunction(e.get)?e:null))throw"Invalid groupby argument: "+e;return e})),this.clear()},u.summarize=function(e){e=function(e){if(r.isArray(e))return e;if(null==e)return[];var t,n,i=[];for(t in e)n=r.array(e[t]),i.push({name:t,ops:n});return i}(e),this._count=!0;var t,n,a,o,u,s,l,c=this._aggr=[];for(a=0;a<e.length;++a){for(o=0,t=[],n=e[a];o<n.ops.length;++o)"count"!==(u=n.ops[o])&&(this._count=!1),s=n.as&&n.as[o]||u+("*"===n.name?"":"_"+n.name),t.push(i[u](s));l=n.get&&r.$(n.get)||("*"===n.name?r.identity:r.$(n.name)),c.push({name:n.name,measures:i.create(t,this._stream,l,this._assign)})}return this.clear()},u.count=function(){return this.summarize({"*":"count"})},u._assign=function(e,t,n){e[t]=n},u.clear=function(){return this._cells={},this},u._cellkey=function(e){var t,n=this._dims,r=n.length,i=n[0].get(e)+"";for(t=1;t<r;++t)i+="|"+n[t].get(e);return i},u._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))},u._newcell=function(e,t){var n,r={num:0,tuple:this._newtuple(e,t),flag:o.ADD_CELL,aggs:{}},i=this._aggr;for(n=0;n<i.length;++n)r.aggs[i[n].name]=new i[n].measures(r,r.tuple);return r.collect&&(r.data=new a(this._key)),r},u._newtuple=function(e){var t,n,r=this._dims,i={};for(t=0,n=r.length;t<n;++t)i[r[t].name]=r[t].get(e);return this._ingest(i)},u._ingest=r.identity,u._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=o.MOD_CELL,this._on_add&&this._on_add(e,n)},u._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=o.MOD_CELL,this._on_rem&&this._on_rem(e,n)},u._mod=function(e,t){var n,i=this._cell(t),a=this._cell(e),u=this._aggr;for(i===a?i.collect&&!r.isObject(e)&&(i.data.rem(t),i.data.add(e)):(i.num-=1,a.num+=1,i.collect&&i.data.rem(t),a.collect&&a.data.add(e)),n=0;n<u.length;++n)i.aggs[u[n].name].rem(t),a.aggs[u[n].name].add(e);i.flag|=o.MOD_CELL,a.flag|=o.MOD_CELL,this._on_mod&&this._on_mod(e,t,i,a)},u._markMod=function(e){this._cell(e).flag|=o.MOD_CELL},u.result=function(){var e,t,n,r=[],i=this._aggr;for(n in this._cells){if(0<(e=this._cells[n]).num){for(e.collect&&e.data.values(),t=0;t<i.length;++t)e.aggs[i[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},u.changes=function(e){var t,n,r,i,a=e||{add:[],rem:[],mod:[]},u=this._aggr;for(i in this._cells){for(n=(t=this._cells[i]).flag,t.collect&&t.data.values(),r=0;r<u.length;++r)t.aggs[u[r].name].set();0>=t.num?(a.rem.push(t.tuple),delete this._cells[i],this._on_drop&&this._on_drop(t)):(this._on_keep&&this._on_keep(t),n&o.ADD_CELL?a.add.push(t.tuple):n&o.MOD_CELL&&a.mod.push(t.tuple)),t.flag=0}return this._rems=!1,a},u.execute=function(e){return this.clear().insert(e).result()},u.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},u.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},u._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}},t.exports=n},{"../util":31,"./collector":10,"./measures":12}],10:[function(e,t){function n(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}var r=e("../util"),i=e("../stats"),a=n.prototype;a.add=function(e){this._add.push(e)},a.rem=function(e){this._rem.push(e)},a.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,a,o=this._add,u=this._rem,s=this._key,l=Array(o.length-u.length);if(r.isObject(u[0]))if(s)for(a=r.toMap(u,s),e=0,t=0,n=o.length;e<n;++e)a.hasOwnProperty(s(o[e]))||(l[t++]=o[e]);else{for(e=0,n=u.length;e<n;++e)u[e].__dl_rem__=1;for(e=0,t=0,n=o.length;e<n;++e)o[e].__dl_rem__||(l[t++]=o[e]);for(e=0,n=u.length;e<n;++e)delete u[e].__dl_rem__}else for(a=i.count.map(u),e=0,t=0,n=o.length;e<n;++e)0<a[o[e]]?a[o[e]]-=1:l[t++]=o[e];return this._rem=[],this._add=l},a.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=i.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},a.argmin=function(e){return this.extent(e)[0]},a.argmax=function(e){return this.extent(e)[1]},a.min=function(e){var t=this.extent(e)[0];return null==t?1/0:e(t)},a.max=function(e){var t=this.extent(e)[1];return null==t?-1/0:e(t)},a.quartile=function(e){return this._get===e&&this._q||(this._q=i.quartile(this.values(),e),this._get=e),this._q},a.q1=function(e){return this.quartile(e)[0]},a.q2=function(e){return this.quartile(e)[1]},a.q3=function(e){return this.quartile(e)[2]},t.exports=n},{"../stats":28,"../util":31}],11:[function(e,t){var n=e("../util"),r=e("./aggregator");t.exports=function(){var e=[].reduce.call(arguments,(function(e,t){return e.concat(n.array(t))}),[]);return(new r).groupby(e).summarize({"*":"values"})}},{"../util":31,"./aggregator":9}],12:[function(e,t){function n(e){return function(t){var n=i.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function r(e,t){var n=e.reduce((function e(n,r){function i(t){n[t]||e(n,n[t]=a[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n}),e.reduce((function(e,t){return e[t.name]=t,e}),{}));return i.vals(n).sort((function(e,t){return e.idx-t.idx}))}var i=e("../util"),a={values:n({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:n({name:"count",set:"cell.num"}),missing:n({name:"missing",set:"this.missing"}),valid:n({name:"valid",set:"this.valid"}),sum:n({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:n({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:n({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:n({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:n({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:n({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:n({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:n({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:n({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:n({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:n({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:n({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:n({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:n({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:n({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:n({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:n({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5}),create:function(t,n,a,o){var u=r(t,n),s="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",l="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",c="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",f="var t = this.tuple; var cell = this.cell;";return u.forEach((function(e){0>e.idx?(s=e.init+s,l=e.add+l,c=e.rem+c):(s+=e.init,l+=e.add,c+=e.rem)})),t.slice().sort((function(e,t){return e.idx-t.idx})).forEach((function(e){f+="this.assign(t,'"+e.out+"',"+e.set+");"})),f+="return t;",(s=Function("cell","t",s)).prototype.assign=o,s.prototype.add=Function("t","var v = this.get(t);"+l),s.prototype.rem=Function("t","var v = this.get(t);"+c),s.prototype.set=Function(f),s.prototype.get=a,s.prototype.distinct=e("../stats").count.distinct,s.prototype.isValid=i.isValid,s.fields=t.map(i.$("out")),s}};t.exports=a},{"../stats":28,"../util":31}],13:[function(e,t){function n(e){if(!e)throw Error("Missing binning options.");var t,n,h,p,x,g,m,v=e.maxbins||15,_=e.base||10,y=o(_),b=e.div||[5,2],w=e.min,S=e.max,k=S-w;if(e.step)t=e.step;else if(e.steps)t=e.steps[l(e.steps.length-1,r(e.steps,k/v,0,e.steps.length))];else{for(n=a(o(v)/y),h=e.minstep||0,t=f(h,s(_,u(o(k)/y)-n));a(k/t)>v;)t*=_;for(g=0;g<b.length;++g)(x=t/b[g])>=h&&k/x<=v&&(t=x)}return x=o(t),m=s(_,-(p=0<=x?0:1+~~(-x/y))-1),{start:w=l(w,c(w/t+m)*t),stop:S=a(S/t)*t,step:t,unit:{precision:p},value:i,index:d}}function r(e,t,n,r){for(;n<r;){var i=n+r>>>1;0>x.cmp(e[i],t)?n=i+1:r=i}return n}function i(e){return this.step*c(e/this.step+m)}function d(e){return c((e-this.start)/this.step+m)}function h(e){return this.unit.date(i.call(this,e))}function p(e){return d.call(this,this.unit.unit(e))}var x=e("../util"),g=e("../time"),m=1e-15;n.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?g.utc:g,r=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,u=e.unit?t[e.unit]:t.find(+i-+r,o,a),s=n({min:null==u.min?u.unit(r):u.min,max:null==u.max?u.unit(i):u.max,maxbins:a,minstep:u.minstep,steps:u.step});return s.unit=u,s.index=p,e.raw||(s.value=h),s},t.exports=n},{"../time":30,"../util":31}],14:[function(e,t){function n(e){var t=e.type,n=null;return(null==t||c[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?a.date(e):a(e)),n}function r(){var e=arguments,t=0,n=s.isArray(e[t])?e[t++]:null,r=s.isFunction(e[t])||s.isString(e[t])?s.$(e[t++]):null,i=s.extend({},e[t]);if(n&&(i.type=i.type||u(n,r),c[i.type])){var a=l.extent(n,r);i=s.extend({min:a[0],max:a[1]},i)}return r&&(i.accessor=r),i}function i(e,t,n){for(var r,i,a=o.range(n.start,n.stop+n.step/2,n.step).map((function(e){return{value:n.value(e),count:0}})),u=0;u<e.length;++u)if(r=t?t(e[u]):e[u],s.isValid(r)){if(0>(i=n.index(r))||i>=a.length||!isFinite(i))continue;a[i].count+=1}return a.bins=n,a}var a=e("./bins"),o=e("../generate"),u=e("../import/type"),s=e("../util"),l=e("../stats"),c={integer:1,number:1,date:1};t.exports={$bin:function(e,t,i){var a=n(i=r(e,t,i));return a?s.$func("bin",a.unit.unit?function(e){return a.value(a.unit.unit(e))}:function(e){return a.value(e)})(i.accessor):i.accessor||s.identity},histogram:function(e,t,a){var o=n(a=r(e,t,a));return o?i(e,a.accessor,o):function(e,t,n){var r=l.unique(e,t),i=l.count.map(e,t);return r.map((function(e){return{value:e,count:i[e]}})).sort(s.comparator(n?"-count":"+value"))}(e,a.accessor,a&&a.sort)}}},{"../generate":17,"../import/type":26,"../stats":28,"../util":31,"./bins":13}],15:[function(e,t){function n(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function r(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,r=i.keys(n).sort((function(e,t){return n[t]-n[e]})).slice(0,6).map((function(e){return" '"+e+"' ("+n[e]+")"}));return t.concat(r).join("\n")}var i=e("./util"),a=e("./import/type"),o=e("./stats"),u=e("./template");t.exports={table:function(e,t){var n=(t=i.extend({separator:" ",minwidth:8,maxwidth:15},t)).fields||i.keys(e[0]),r=a.all(e);if(t.start||t.limit){var d=t.start||0,h=t.limit?d+t.limit:e.length;e=e.slice(d,h)}var p=n.map((function(n){var i=s[r[n]]||"",a=u("{{"+n+i+"}}"),c=o.max(e,(function(e){return a(e).length}));return c=f(l(n.length,t.minwidth),c),0<t.maxwidth?l(c,t.maxwidth):c})),x=n.map((function(e,t){return i.truncate(i.pad(e,p[t],"center"),p[t])})).join(t.separator),g=u(n.map((function(e,t){return"{{"+e+(s[r[e]]||"")+"|pad:"+p[t]+","+(c[r[e]]||"right")+"|truncate:"+p[t]+"}}"})).join(t.separator));return x+"\n"+e.map(g).join("\n")},summary:function(e){var t,i,a=[];for(t=0,i=(e=e?e.__summary__?e:o.summary(e):this).length;t<i;++t)a.push("-- "+e[t].field+" --"),"string"===e[t].type||10>e[t].distinct?a.push(r(e[t])):a.push(n(e[t])),a.push("");return a.join("\n")}};var s={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},c={number:"left",integer:"left"}},{"./import/type":26,"./stats":28,"./template":29,"./util":31}],16:[function(e,t){function n(e){return 4<e.length&&"locale"+(e[0].toUpperCase()+e[1].toLowerCase()+e[3].toUpperCase()+e[4].toLowerCase())}function r(e){var t=g.isString(e)?_[n(e)]:_.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);y=t}function u(e){var t=g.isString(e)?v[n(e)]:v.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);b=t,l=h=p=x=null}var l,h,p,x,g=e("./util"),m=e("d3-time"),v=e("d3-time-format"),_=e("d3-format"),y=_,b=v,w=new Date(2e3,0,1);t.exports={numberLocale:r,number:function(e){return y.format(e)},numberPrefix:function(e,t){return y.formatPrefix(e,t)},timeLocale:u,time:function(e){return b.format(e)},utc:function(e){return b.utcFormat(e)},locale:function(e){r(e),u(e)},auto:{number:function(e){var t=y.format(".1f")(1)[1];switch(null==e&&(e=","),null==(e=_.formatSpecifier(e)).precision&&(e.precision=12),e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return function(e,t){return function(n){var r=e(n),i=r.indexOf(t);if(0>i)return r;for(var a=function(e,t){var n,r=e.lastIndexOf("e");if(0<r)return r;for(r=e.length;--r>t;)if(48<=(n=e.charCodeAt(r))&&57>=n)return r+1}(r,i),o=a<r.length?r.slice(a):"";--a>i;)if("0"!==r[a]){++a;break}return r.slice(0,a)+o}}(y.format(e),t)},linear:function(e,t,n){var r=function(e,t){var n=Math.LN10;e.length||(e=[0]),null==t&&(t=10);var r=e[0],i=e[e.length-1];i<r&&(f=i,i=r,r=f);var u=i-r||(t=1,r||i||1),l=s(10,c(o(u/t)/n)),f=u/t/l;return f>=S?l*=10:f>=k?l*=5:f>=E&&(l*=2),[a(r/l)*l,c(i/l)*l+l/2,l]}(e,t);switch(null==n&&(n=",f"),(n=_.formatSpecifier(n)).type){case"s":var i=f(d(r[0]),d(r[1]));return null==n.precision&&(n.precision=_.precisionPrefix(r[2],i)),y.formatPrefix(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=_.precisionRound(r[2],f(d(r[0]),d(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=_.precisionFixed(r[2])-2*("%"===n.type))}return y.format(n)},time:function(){return function(){var e=b.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),u=e("%B"),s=e("%Y");return function(e){var l=+e;return(m.second(e)<l?t:m.minute(e)<l?n:m.hour(e)<l?r:m.day(e)<l?i:m.month(e)<l?m.week(e)<l?a:o:m.year(e)<l?u:s)(e)}}()},utc:function(){return function(){var e=b.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),u=e("%B"),s=e("%Y");return function(e){var l=+e;return(m.utcSecond(e)<l?t:m.utcMinute(e)<l?n:m.utcHour(e)<l?r:m.utcDay(e)<l?i:m.utcMonth(e)<l?m.utcWeek(e)<l?a:o:m.utcYear(e)<l?u:s)(e)}}()}},month:function(e,t){var n=t?h||(h=b.format("%b")):l||(l=b.format("%B"));return w.setMonth(e),n(w)},day:function(e,t){var n=t?x||(x=b.format("%a")):p||(p=b.format("%A"));return w.setMonth(0),w.setDate(2+e),n(w)},quarter:function(e){return c(e.getMonth()/3)+1},utcQuarter:function(e){return c(e.getUTCMonth()/3)+1}};var S=i(50),k=i(10),E=i(2)},{"./util":31,"d3-format":4,"d3-time":6,"d3-time-format":5}],17:[function(e,t){var n=e("./util"),a=t.exports;a.repeat=function(e,t){var n,r=Array(t);for(n=0;n<t;++n)r[n]=e;return r},a.zeros=function(e){return a.repeat(0,e)},a.range=function(e,t,n){if(3>arguments.length&&(n=1,2>arguments.length&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(0>n)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},a.random={},a.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,r=function(){return e+n*Math.random()};return r.samples=function(e){return a.zeros(e).map(r)},r.pdf=function(r){return r>=e&&r<=t?1/n:0},r.cdf=function(r){return r<e?0:r>t?1:(r-e)/n},r.icdf=function(t){return 0<=t&&1>=t?e+t*n:NaN},r},a.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,r=function(){return e+c(n*Math.random())};return r.samples=function(e){return a.zeros(e).map(r)},r.pdf=function(r){return r===c(r)&&r>=e&&r<t?1/n:0},r.cdf=function(r){var i=c(r);return i<e?0:i>=t?1:(i-e+1)/n},r.icdf=function(t){return 0<=t&&1>=t?e-1+c(t*n):NaN},r},a.random.normal=function(e,t){var n=Math.exp;e=e||0,t=t||1;var u,l=function(){var n,r,a=0,s=0;if(void 0!==u)return a=u,u=void 0,a;do{n=(a=2*Math.random()-1)*a+(s=2*Math.random()-1)*s}while(0===n||1<n);return r=i(-2*o(n)/n),u=e+s*r*t,e+a*r*t};return l.samples=function(e){return a.zeros(e).map(l)},l.pdf=function(a){var o=n(s(a-e,2)/(-2*s(t,2)));return 1/(t*i(2*r))*o},l.cdf=function(r){var i,a=(r-e)/t,o=d(a);if(37<o)i=0;else{var u=n(-o*o/2);7.07106781186547>o?(i=u*((((((.0352624965998911*o+.700383064443688)*o+6.37396220353165)*o+33.912866078383)*o+112.079291497871)*o+221.213596169931)*o+220.206867912376),i/=((((((.0883883476483184*o+1.75566716318264)*o+16.064177579207)*o+86.7807322029461)*o+296.564248779674)*o+637.333633378831)*o+793.826512519948)*o+440.413735824752):i=u/(o+1/(o+2/(o+3/(o+4/(o+.65)))))/2.506628274631}return 0<a?1-i:i},l.icdf=function(n){var a=Math.SQRT2;if(0>=n||1<=n)return NaN;var u=2*n-1,l=8*(r-3)/(3*r*(4-r)),c=2/(r*l)+o(1-s(u,2))/2,f=o(1-u*u)/l,d=(0<u?1:-1)*i(i(c*c-f)-c);return e+t*a*d},l},a.random.bootstrap=function(e,t){var r=e.filter(n.isValid),i=r.length,o=t?a.random.normal(0,t):null,u=function(){return r[~~(Math.random()*i)]+(o?o():0)};return u.samples=function(e){return a.zeros(e).map(u)},u}},{"./util":31}],18:[function(e,t){function n(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return i.dsv(t.delimiter).parse(e)}var r=e("../../util"),i=e("d3-dsv");n.delimiter=function(e){var t={delimiter:e};return function(e,i){return n(e,i?r.extend(i,t):t)}},t.exports=n},{"../../util":31,"d3-dsv":3}],19:[function(e,t){var n=e("./dsv");t.exports={json:e("./json"),topojson:e("./topojson"),treejson:e("./treejson"),dsv:n,csv:n.delimiter(","),tsv:n.delimiter("\t")}},{"./dsv":18,"./json":20,"./topojson":21,"./treejson":22}],20:[function(e,t){var n=e("../../util");t.exports=function(e,t){var r=n.isObject(e)&&!n.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(r=n.accessor(t.property)(r)),r}},{"../../util":31}],21:[function(e,t){var n=e("./json"),r=function(e,t){var i=r.topojson;if(null==i)throw Error("TopoJSON library not loaded.");var a,o=n(e,t);if(t&&t.feature){if(a=o.objects[t.feature])return i.feature(o,a).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(a=o.objects[t.mesh])return[i.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};r.topojson=e("topojson"),t.exports=r},{"./json":20,topojson:32}],22:[function(e,t){var n=e("./json");t.exports=function(e,t){return function(e,t){var n=t&&t.children||"children",r=t&&t.parent||"parent",i=[];return function e(t,a){t[r]=a,i.push(t);var o=t[n];if(o)for(var u=0;u<o.length;++u)e(o[u],t)}(e,null),i.root=e,i}(n(e,t),t)}},{"./json":20}],23:[function(e,t){function n(e,t){return n.loader(e,t)}function r(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function i(e,t){return null!=e&&0===e.lastIndexOf(t,0)}var a=e("../util"),o=/^([A-Za-z]+:)?\/\//;n.loader=function(e,t){var r,a=t||function(e){throw e};try{r=n.sanitizeUrl(e)}catch(e){return void a(e)}return r?n.useXHR?n.xhr(r,e,t):i(r,"file://")?n.file(r.slice(7),e,t):0>r.indexOf("://")?n.file(r,e,t):n.http(r,e,t):void a("Invalid URL: "+e.url)},n.sanitizeUrl=function(t){var r=t.url;if(!r&&t.file)return"file://"+t.file;if(t.baseURL&&!o.test(r)&&(!i(r,"/")&&"/"!==t.baseURL[t.baseURL.length-1]&&(r="/"+r),r=t.baseURL+r),!n.useXHR&&i(r,"//")&&(r=(t.defaultProtocol||"http")+":"+r),t.domainWhiteList){var a,u;if(n.useXHR){var s=document.createElement("a");s.href=r,""===s.host&&(s.href=s.href),a=s.hostname.toLowerCase(),u=window.location.hostname}else{var l=e("url").parse(r);a=l.hostname,u=null}if(u!==a&&!t.domainWhiteList.some((function(e){var t=a.length-e.length;return e===a||1<t&&"."===a[t-1]&&a.lastIndexOf(e)===t})))throw"URL is not whitelisted: "+r}return r},n.xhr=function(e,t,i){function o(){var e=s.status;!e&&r(s)||200<=e&&300>e||304===e?i(null,s.responseText):i(s,null)}var u=!!i,s=new XMLHttpRequest;if("undefined"!=typeof XDomainRequest&&!("withCredentials"in s)&&/^(http(s)?:)?\/\//.test(e)&&(s=new XDomainRequest),u&&("onload"in s?s.onload=s.onerror=o:s.onreadystatechange=function(){3<s.readyState&&o()}),s.open("GET",e,u),s.setRequestHeader){var l=a.extend({},n.headers,t.headers);for(var c in l)s.setRequestHeader(c,l[c])}return s.send(),!u&&r(s)?s.responseText:void 0},n.file=function(t,n,r){var i=e("fs");return r?void i.readFile(t,r):i.readFileSync(t,"utf8")},n.http=function(t,r,i){var o={url:t,encoding:null,gzip:!0,headers:a.extend({},n.headers,r.headers)};return i?void e("request")(o,(function(e,t,n){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",i(e,null)):i(null,n)})):e("sync-request")("GET",t,o).getBody()},n.useXHR="undefined"!=typeof XMLHttpRequest,n.headers={},t.exports=n},{"../util":31,fs:2,request:2,"sync-request":2,url:2}],24:[function(e,t){function n(e,t){var n=t&&t.type||"json";return e=a[n](e,t),t&&t.parse&&function(e,t){var n,a,u,s,l,c,f=e.length;for(t="auto"===t?i.inferAll(e):r.duplicate(t),n=r.keys(t),a=n.map((function(e){var n=t[e];if(n&&0===n.indexOf("date:")){var r=n.split(/:(.+)?/,2)[1];if(!("'"===r[0]&&"'"===r[r.length-1]||'"'===r[0]&&'"'===r[r.length-1]))throw Error("Format pattern must be quoted: "+r);return r=r.slice(1,-1),r=o(r),function(e){return r.parse(e)}}if(!i.parsers[n])throw Error("Illegal format pattern: "+e+":"+n);return i.parsers[n]})),s=0,c=n.length;s<f;++s)for(u=e[s],l=0;l<c;++l)u[n[l]]=a[l](u[n[l]]);i.annotation(e,t)}(e,t.parse),e}var r=e("../util"),i=e("./type"),a=e("./formats"),o=e("../format").time;n.formats=a,t.exports=n},{"../format":16,"../util":31,"./formats":19,"./type":26}],25:[function(e,t){var n=e("../util"),r=e("./load"),i=e("./read");t.exports=n.keys(i.formats).reduce((function(e,t){return e[t]=function(e,a,o){n.isString(e)&&(e={url:e}),2===arguments.length&&n.isFunction(a)&&(o=a,a=void 0),(a=n.extend({parse:"auto"},a)).type=t;var u=r(e,o?function(e,t){if(e)o(e,null);else try{t=i(t,a),o(null,t)}catch(t){o(t,null)}}:void 0);if(!o)return i(u,a)},e}),{})},{"../util":31,"./load":23,"./read":24}],26:[function(e,t){function n(e){return o.keys(e)}function r(e){return"["+e+"]"}function i(e,t){var n,r,i;if(e=o.array(e),t=o.$(t),e.__types__&&(n=t(e.__types__),o.isString(n)))return n;for(r=0,i=e.length;!o.isValid(n)&&r<i;++r)n=t?t(e[r]):e[r];return o.isDate(n)?"date":o.isNumber(n)?"number":o.isBoolean(n)?"boolean":o.isString(n)?"string":null}function a(e,t){e=o.array(e),t=o.$(t);var n,r,i,a=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(i=t?t(e[n]):e[n],r=0;r<a.length;++r)o.isValid(i)&&!s[a[r]](i)&&(a.splice(r,1),r-=1);if(0===a.length)return"string"}return a[0]}var o=e("../util"),u={boolean:o.boolean,integer:o.number,number:o.number,date:o.date,string:function(e){return null==e||""===e?null:e+""}},s={boolean:function(e){return"true"===e||"false"===e||o.isBoolean(e)},integer:function(e){return s.number(e)&&(e=+e)==~~e},number:function(e){return!isNaN(+e)&&!o.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};i.annotation=function(e,t){return t?void(e.__types__=t):e&&e.__types__||null},i.all=function(e,t){if(e.length){var a=t?o.identity:(t=n(e[0]),r);return t.reduce((function(t,n){return t[n]=i(e,a(n)),t}),{})}},i.infer=a,i.inferAll=function(e,t){var i=t?o.identity:(t=n(e[0]),r);return t.reduce((function(t,n){return t[n]=a(e,i(n)),t}),{})},i.parsers=u,t.exports=i},{"../util":31}],27:[function(e,t){var n=e("./util"),r={version:e("../package.json").version,load:e("./import/load"),read:e("./import/read"),type:e("./import/type"),Aggregator:e("./aggregate/aggregator"),groupby:e("./aggregate/groupby"),bins:e("./bins/bins"),$bin:e("./bins/histogram").$bin,histogram:e("./bins/histogram").histogram,format:e("./format"),template:e("./template"),time:e("./time")};n.extend(r,n),n.extend(r,e("./accessor")),n.extend(r,e("./generate")),n.extend(r,e("./stats")),n.extend(r,e("./import/readers")),n.extend(r.format,e("./format-tables")),r.print={table:r.format.table,summary:r.format.summary},t.exports=r},{"../package.json":7,"./accessor":8,"./aggregate/aggregator":9,"./aggregate/groupby":11,"./bins/bins":13,"./bins/histogram":14,"./format":16,"./format-tables":15,"./generate":17,"./import/load":23,"./import/read":24,"./import/readers":25,"./import/type":26,"./stats":28,"./template":29,"./time":30,"./util":31}],28:[function(e,t){var n=Math.LN2;function r(e,t,n){var r=e&&e.nullh||0,a=h.random.normal(0,1),o=p.mean(t,n),u=p.stdev(t,n)/i(p.count.valid(t,n));return 0==u?0==o-r?1:0:2*a.cdf(-d((o-r)/u))}function a(e,t,n,r){var i,a=r?t.map(l.$(n)):t,o=r?t.map(l.$(r)):n,u=p.count(a),s=[];if(u!==p.count(o))throw Error("Array lengths must match.");for(i=0;i<u;++i)l.isValid(a[i])&&l.isValid(o[i])&&s.push(a[i]-o[i]);return p.z.test(s,e&&e.nullh||0)}function u(e,t,n,r){var a=r?t.map(l.$(n)):t,o=r?t.map(l.$(r)):n,u=p.count.valid(a),s=p.count.valid(o),c=h.random.normal(0,1),f=p.mean(a)-p.mean(o)-(e&&e.nullh||0),x=i(p.variance(a)/u+p.variance(o)/s);return 0===x?0==f?1:0:2*c.cdf(-d(f/x))}var l=e("./util"),f=e("./import/type"),h=e("./generate"),p=t.exports;p.unique=function(e,t,n){t=l.$(t),n=n||[];var r,i,a,o={};for(i=0,a=e.length;i<a;++i)(r=t?t(e[i]):e[i])in o||(o[r]=1,n.push(r));return n},p.count=function(e){return e&&e.length||0},p.count.valid=function(e,t){t=l.$(t);var n,r,i,a=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],l.isValid(n)&&(a+=1);return a},p.count.missing=function(e,t){t=l.$(t);var n,r,i=0;for(n=0,r=e.length;n<r;++n)null==(t?t(e[n]):e[n])&&(i+=1);return i},p.count.distinct=function(e,t){t=l.$(t);var n,r,i,a={},o=0;for(r=0,i=e.length;r<i;++r)(n=t?t(e[r]):e[r])in a||(a[n]=1,o+=1);return o},p.count.map=function(e,t){t=l.$(t);var n,r,i,a={};for(r=0,i=e.length;r<i;++r)a[n=t?t(e[r]):e[r]]=n in a?a[n]+1:1;return a},p.median=function(e,t){return t&&(e=e.map(l.$(t))),e=e.filter(l.isValid).sort(l.cmp),p.quantile(e,.5)},p.quartile=function(e,t){t&&(e=e.map(l.$(t))),e=e.filter(l.isValid).sort(l.cmp);var n=p.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},p.quantile=function(e,t,n){void 0===n&&(n=t,t=l.identity),t=l.$(t);var r=(e.length-1)*n+1,i=c(r),a=+t(e[i-1]),o=r-i;return o?a+o*(t(e[i])-a):a},p.sum=function(e,t){t=l.$(t);for(var n,r=0,i=0,a=e.length;i<a;++i)n=t?t(e[i]):e[i],l.isValid(n)&&(r+=n);return r},p.mean=function(e,t){t=l.$(t);var n,r,i,a,o=0;for(n=0,i=0,r=e.length;n<r;++n)a=t?t(e[n]):e[n],l.isValid(a)&&(o+=(a-o)/++i);return o},p.mean.geometric=function(e,t){t=l.$(t);var n,r,i,a,o=1;for(a=0,n=0,r=e.length;a<r;++a)if(i=t?t(e[a]):e[a],l.isValid(i)){if(0>=i)throw Error("Geometric mean only defined for positive values.");o*=i,++n}return o=0<n?s(o,1/n):0},p.mean.harmonic=function(e,t){t=l.$(t);var n,r,i,a,o=0;for(a=0,n=0,r=e.length;a<r;++a)i=t?t(e[a]):e[a],l.isValid(i)&&(o+=1/i,++n);return n/o},p.variance=function(e,t){if(t=l.$(t),!l.isArray(e)||2>e.length)return 0;var n,r,i,a,o=0,u=0;for(r=0,i=0;r<e.length;++r)a=t?t(e[r]):e[r],l.isValid(a)&&(u+=(n=a-o)*(a-(o+=n/++i)));return u/=i-1},p.stdev=function(e,t){return i(p.variance(e,t))},p.modeskew=function(e,t){var n=p.mean(e,t),r=p.median(e,t),i=p.stdev(e,t);return 0===i?0:(n-r)/i},p.min=function(e,t){return p.extent(e,t)[0]},p.max=function(e,t){return p.extent(e,t)[1]},p.extent=function(e,t){t=l.$(t);var n,r,i,a,o=e.length;for(a=0;a<o;++a)if(i=t?t(e[a]):e[a],l.isValid(i)){n=r=i;break}for(;a<o;++a)i=t?t(e[a]):e[a],l.isValid(i)&&(i<n&&(n=i),i>r&&(r=i));return[n,r]},p.extent.index=function(e,t){t=l.$(t);var n,r,i,a,o=-1,u=-1,s=e.length;for(a=0;a<s;++a)if(i=t?t(e[a]):e[a],l.isValid(i)){n=r=i,o=u=a;break}for(;a<s;++a)i=t?t(e[a]):e[a],l.isValid(i)&&(i<n&&(n=i,o=a),i>r&&(r=i,u=a));return[o,u]},p.dot=function(e,t,n){var r,i,a=0;if(n)for(t=l.$(t),n=l.$(n),r=0;r<e.length;++r)(i=t(e[r])*n(e[r]))==i&&(a+=i);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(r=0;r<e.length;++r)(i=e[r]*t[r])==i&&(a+=i)}return a},p.dist=function(e,t,n,r){var a,o,u=l.isFunction(n)||l.isString(n),c=e,f=u?e:t,h=u?r:n,p=2===h||null==h,x=e.length,g=0;for(u&&(t=l.$(t),n=l.$(n)),o=0;o<x;++o)a=u?t(c[o])-n(f[o]):c[o]-f[o],g+=p?a*a:s(d(a),h);return p?i(g):s(g,1/h)},p.cohensd=function(e,t,n){var r=n?e.map(l.$(t)):e,a=n?e.map(l.$(n)):t,o=p.mean(r),u=p.mean(a),s=p.count.valid(r),c=p.count.valid(a);if(0>=s+c-2)return 0;var f=p.variance(r),d=p.variance(a),h=i(((s-1)*f+(c-1)*d)/(s+c-2));return 0===h?0:(o-u)/h},p.covariance=function(e,t,n){var r,i,a,o,u,s=n?e.map(l.$(t)):e,c=n?e.map(l.$(n)):t,f=s.length,d=p.mean(s),h=p.mean(c),x=0,g=0;if(f!==c.length)throw Error("Input lengths must match.");for(r=0;r<f;++r)if(i=s[r],o=l.isValid(i),a=c[r],u=l.isValid(a),o&&u)x+=(i-d)*(a-h),++g;else if(o||u)throw Error("Valid values must align.");return x/(g-1)},p.rank=function(e,t){t=l.$(t)||l.identity;var n,r,i,a=e.map((function(e,n){return{idx:n,val:t(e)}})).sort(l.comparator("val")),o=e.length,u=Array(o),s=-1,c={};for(n=0;n<o;++n){if(r=a[n].val,0>s&&c===r)s=n-1;else if(-1<s&&c!==r){for(i=1+(n-1+s)/2;s<n;++s)u[a[s].idx]=i;s=-1}u[a[n].idx]=n+1,c=r}if(-1<s)for(i=1+(o-1+s)/2;s<o;++s)u[a[s].idx]=i;return u},p.cor=function(e,t,n){var r=n;n=r?e.map(l.$(n)):t,t=r?e.map(l.$(t)):e;var i=p.dot(t,n),a=p.mean(t),o=p.mean(n),u=p.stdev(t),s=p.stdev(n),c=e.length;return(i-c*a*o)/((c-1)*u*s)},p.cor.rank=function(e,t,n){var r,i,a,o=n?p.rank(e,t):p.rank(e),u=n?p.rank(e,n):p.rank(t),s=e.length;for(r=0,i=0;r<s;++r)i+=(a=o[r]-u[r])*a;return 1-6*i/(s*(s*s-1))},p.cor.dist=function(e,t,n){var r,a,o,u,s=n?e.map(l.$(t)):e,c=n?e.map(l.$(n)):t,f=p.dist.mat(s),d=p.dist.mat(c),h=f.length;for(r=0,a=0,o=0,u=0;r<h;++r)a+=f[r]*f[r],o+=d[r]*d[r],u+=f[r]*d[r];return i(u/i(a*o))},p.linearRegression=function(e,t,n){var r,i,a=n?e.map(l.$(t)):e,o=n?e.map(l.$(n)):t,u=a.length,s=p.covariance(a,o),c=p.stdev(a),f=p.stdev(o),d=s/(c*c),h=p.mean(o)-d*p.mean(a),x={slope:d,intercept:h,R:s/(c*f),rss:0};for(i=0;i<u;++i)l.isValid(a[i])&&l.isValid(o[i])&&(r=d*a[i]+h-o[i],x.rss+=r*r);return x},p.bootstrap={},p.bootstrap.ci=function(e,t,n,r,i){var a,o,u,s,c,f,d;for(l.isFunction(t)||l.isString(t)?(a=e.map(l.$(t)),o=n,u=r,s=i):(a=e,o=t,u=n,s=r),o=o?+o:1e3,u=u||.05,c=h.random.bootstrap(a,s),d=0,f=Array(o);d<o;++d)f[d]=p.mean(c.samples(a.length));return f.sort(l.numcmp),[p.quantile(f,u/2),p.quantile(f,1-u/2)]},p.z={},p.z.ci=function(e,t,n){var r=e,a=t;(l.isFunction(t)||l.isString(t))&&(r=e.map(l.$(t)),a=n);var o=.05===(a=a||.05)?1.96:h.random.normal(0,1).icdf(1-a/2),u=p.mean(r),s=p.stdev(r)/i(p.count.valid(r));return[u-o*s,u+o*s]},p.z.test=function(e,t,n,i){return l.isFunction(n)||l.isString(n)?(i&&i.paired?a:u)(i,e,t,n):l.isArray(t)?(n&&n.paired?a:u)(n,e,t):l.isFunction(t)||l.isString(t)?r(n,e,t):r(t,e)},p.dist.mat=function(e){var t,n,r,i=e.length,a=i*i,o=Array(a),u=h.zeros(i),s=0;for(n=0;n<i;++n)for(o[n*i+n]=0,r=n+1;r<i;++r)o[n*i+r]=t=d(e[n]-e[r]),o[r*i+n]=t,u[n]+=t,u[r]+=t;for(n=0;n<i;++n)s+=u[n],u[n]/=i;for(s/=a,n=0;n<i;++n)for(r=n;r<i;++r)o[n*i+r]+=s-u[n]-u[r],o[r*i+n]=o[n*i+r];return o},p.entropy=function(e,t){t=l.$(t);var r,i,a=0,u=0,s=e.length;for(r=0;r<s;++r)a+=t?t(e[r]):e[r];if(0===a)return 0;for(r=0;r<s;++r)(i=(t?t(e[r]):e[r])/a)&&(u+=i*o(i));return-u/n},p.mutual=function(e,t,r,i){var a,u,s,c=i?e.map(l.$(t)):e,f=i?e.map(l.$(r)):t,d=i?e.map(l.$(i)):r,h={},p={},x=d.length,g=0,m=0,v=0;for(s=0;s<x;++s)h[c[s]]=0,p[f[s]]=0;for(s=0;s<x;++s)h[c[s]]+=d[s],p[f[s]]+=d[s],g+=d[s];for(u=1/(g*n),s=0;s<x;++s)0!==d[s]&&(a=g*d[s]/(h[c[s]]*p[f[s]]),m+=d[s]*u*o(a),v+=d[s]*u*o(d[s]/g));return[m,1+m/v]},p.mutual.info=function(e,t,n,r){return p.mutual(e,t,n,r)[0]},p.mutual.dist=function(e,t,n,r){return p.mutual(e,t,n,r)[1]},p.profile=function(e,t){var n,r,a,o,u,s=0,c=0,d=0,h=0,x=null,g=null,m=0,v=[],_={};for(a=0;a<e.length;++a)_[o=t?t(e[a]):e[a]]=o in _?_[o]+1:(h+=1,1),null==o?++d:l.isValid(o)&&(u="string"==typeof o?o.length:o,(null==x||u<x)&&(x=u),(null==g||u>g)&&(g=u),m+=(n=u-s)*(u-(s+=n/++c)),v.push(u));return r=i(m/=c-1),v.sort(l.cmp),{type:f(e,t),unique:_,count:e.length,valid:c,missing:d,distinct:h,min:x,max:g,mean:s,stdev:r,median:o=p.quantile(v,.5),q1:p.quantile(v,.25),q3:p.quantile(v,.75),modeskew:0===r?0:(s-o)/r}},p.summary=function(e,t){var n=(t=t||l.keys(e[0])).map((function(t){var n=p.profile(e,l.$(t));return n.field=t,n}));return n.__summary__=!0,n}},{"./generate":17,"./import/type":26,"./util":31}],29:[function(e,t){function n(e){var t=r(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(l)}function r(e,t,n){t=t||"obj";var r=0,o="'";return e.replace(c,(function(u,s,l){return o+=e.slice(r,l).replace(p,a),r=l+u.length,s&&(o+="'\n+((__t=("+i(s,t,n)+"))==null?'':__t)+\n'"),u})),o+"'"}function i(e,t,r){function i(e){return e=e||"",c?(c=!1,h="String("+h+")"+e):h+=e,h}function a(e){var t=_[0];if(!("'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]))throw Error("Format pattern must be quoted: "+t);t=t.slice(1,-1),g=o(t,e),c=!1,h="this.formats["+g+"]("+("number"===e?h:"(typeof "+h+'==="number"?new Date('+h+"):"+h+")")+")"}var s=e.match(f),l=s.shift().trim(),c=!0;r&&(r[l]=1);for(var h=n.property(t,l),p=0;p<s.length;++p){var x,g,m,v=s[p],_=null;switch(0<(x=v.indexOf(":"))&&(v=v.slice(0,x),_=s[p].slice(x+1).match(d).map((function(e){return e.trim()}))),v=v.trim()){case"length":i(".length");break;case"lower":i(".toLowerCase()");break;case"upper":i(".toUpperCase()");break;case"lower-locale":i(".toLocaleLowerCase()");break;case"upper-locale":i(".toLocaleUpperCase()");break;case"trim":i(".trim()");break;case"left":i(".slice(0,"+(g=u.number(_[0]))+")");break;case"right":i(".slice(-"+(g=u.number(_[0]))+")");break;case"mid":m=(g=u.number(_[0]))+u.number(_[1]),i(".slice(+"+g+","+m+")");break;case"slice":i(".slice("+(g=u.number(_[0]))+(1<_.length?","+u.number(_[1]):"")+")");break;case"truncate":g=u.number(_[0]),m="left"!==(m=_[1])&&"middle"!==m&&"center"!==m?"right":m,h="this.truncate("+i()+","+g+",'"+m+"')";break;case"pad":g=u.number(_[0]),m="left"!==(m=_[1])&&"middle"!==m&&"center"!==m?"right":m,h="this.pad("+i()+","+g+",'"+m+"')";break;case"number":a("number");break;case"time":a("time");break;case"time-utc":a("utc");break;case"month":h="this.month("+h+")";break;case"month-abbrev":h="this.month("+h+",true)";break;case"day":h="this.day("+h+")";break;case"day-abbrev":h="this.day("+h+",true)";break;case"quarter":h="this.quarter("+h+")";break;case"quarter-utc":h="this.utcQuarter("+h+")";break;default:throw Error("Unrecognized template filter: "+v)}}return h}function a(e){return"\\"+h[e]}function o(e,t){var n=t+":"+e;if(null==l.format_map[n]){var r=s[t](e),i=l.formats.length;return l.formats.push(r),l.format_map[n]=i,i}return l.format_map[n]}var u=e("./util"),s=e("./format"),l={formats:[],format_map:{},truncate:u.truncate,pad:u.pad,day:s.day,month:s.month,quarter:s.quarter,utcQuarter:s.utcQuarter};n.source=r,n.context=l,n.format=function(e,t){return l.formats[o(e,t)]},t.exports=n,n.clearFormatCache=function(){l.formats=[],l.format_map={}},n.property=function(e,t){return e+"["+u.field(t).map(u.str).join("][")+"]"};var c=/\{\{(.+?)\}\}|$/g,f=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,d=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,h={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},p=/\\|'|\r|\n|\u2028|\u2029/g},{"./format":16,"./util":31}],30:[function(e,t){function n(e){return u.setTime(+e),u}function r(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function i(e,t,n,i,a,o){return r(e,(function(e){return t.offset(n,e)}),(function(e){return t.count(n,e)}),i,a,o)}function a(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return function(e,t,n,r){var i,a,o,u=d[0];for(i=1,a=d.length;i<a;++i)if(t>(u=d[i])[0]){if((o=t/u[0])>r)return e[d[i-1][1]];if(o>=n)return e[u[1]]}return e[d[a-1][1]]}(e,t,n,r)},r}var o=e("d3-time"),u=new Date,s=new Date(0,0,1).setFullYear(0),l=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),c=[i("second",o.second,s),i("minute",o.minute,s),i("hour",o.hour,s),i("day",o.day,s,[1,7]),i("month",o.month,s,[1,3,6]),i("year",o.year,s),r("seconds",(function(e){return new Date(1970,0,1,0,0,e)}),(function(e){return n(e).getSeconds()}),null,0,59),r("minutes",(function(e){return new Date(1970,0,1,0,e)}),(function(e){return n(e).getMinutes()}),null,0,59),r("hours",(function(e){return new Date(1970,0,1,e)}),(function(e){return n(e).getHours()}),null,0,23),r("weekdays",(function(e){return new Date(1970,0,4+e)}),(function(e){return n(e).getDay()}),[1],0,6),r("dates",(function(e){return new Date(1970,0,e)}),(function(e){return n(e).getDate()}),[1],1,31),r("months",(function(e){return new Date(1970,e%12,1)}),(function(e){return n(e).getMonth()}),[1],0,11)],f=[i("second",o.utcSecond,l),i("minute",o.utcMinute,l),i("hour",o.utcHour,l),i("day",o.utcDay,l,[1,7]),i("month",o.utcMonth,l,[1,3,6]),i("year",o.utcYear,l),r("seconds",(function(e){return new Date(Date.UTC(1970,0,1,0,0,e))}),(function(e){return n(e).getUTCSeconds()}),null,0,59),r("minutes",(function(e){return new Date(Date.UTC(1970,0,1,0,e))}),(function(e){return n(e).getUTCMinutes()}),null,0,59),r("hours",(function(e){return new Date(Date.UTC(1970,0,1,e))}),(function(e){return n(e).getUTCHours()}),null,0,23),r("weekdays",(function(e){return new Date(Date.UTC(1970,0,4+e))}),(function(e){return n(e).getUTCDay()}),[1],0,6),r("dates",(function(e){return new Date(Date.UTC(1970,0,e))}),(function(e){return n(e).getUTCDate()}),[1],1,31),r("months",(function(e){return new Date(Date.UTC(1970,e%12,1))}),(function(e){return n(e).getUTCMonth()}),[1],0,11)],d=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=a(c),t.exports.utc=a(f)},{"d3-time":6}],31:[function(e,t){(function(e){function n(e,t){var n,r="";for(n=0;n<e;++n)r+=t;return r}function r(e,t,n){var r=0,i=e.split(s);return(e=n?(i=i.reverse()).filter((function(e){return(r+=e.length)<=t})).reverse():i.filter((function(e){return(r+=e.length)<=t}))).length?e.join("").trim():i[0].slice(0,t)}var i=t.exports;i.namedfunc=function(e,t){return t.__name__=e,t},i.name=function(e){return null==e?null:e.__name__},i.identity=function(e){return e},i.true=i.namedfunc("true",(function(){return!0})),i.false=i.namedfunc("false",(function(){return!1})),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.toMap=function(e,t){return(t=i.$(t))?e.reduce((function(e,n){return e[t(n)]=1,e}),{}):e.reduce((function(e,t){return e[t]=1,e}),{})},i.keystr=function(e){var t=e.length;if(!t)return"";for(var n=e[0]+"",r=1;r<t;++r)n+="|"+e[r];return n};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e==e},i.isBuffer="function"==typeof e&&e.isBuffer||i.false,i.number=function(e){return null==e||""===e?null:+e},i.boolean=function(e){return null==e||""===e?null:"false"!=e&&!!e},i.date=function(e,t){var n=t||Date;return null==e||""===e?null:n.parse(e)},i.array=function(e){return null==e?[]:i.isArray(e)?e:[e]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var u=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return(e+"").match(u).map((function(e){return"["===e[0]?"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1"):e}))},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var t;return i.isString(e)&&1<(t=i.field(e)).length?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},i.$func=function(e,t){return function(n){n=i.$(n)||i.identity;var r=e+(i.name(n)?"_"+i.name(n):"");return i.namedfunc(r,(function(e){return t(n(e))}))}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,t){e=i.$(e);var n=i.isArray(t)?i.toMap(t):t;return function(t){return!!n[e(t)]}},i.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=i.array(e).map((function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),i.accessor(e)})),function(n,r){var a,o,u,s;for(a=0,o=e.length;a<o;++a)if(u=e[a],s=i.cmp(u(n),u(r)))return s*t[a];return 0}},i.cmp=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0)},i.numcmp=function(e,t){return e-t},i.stablesort=function(e,t,n){var r=e.reduce((function(e,t,r){return e[n(t)]=r,e}),{});return e.sort((function(e,i){var a=t(e),o=t(i);return a<o?-1:a>o?1:r[n(e)]-r[n(i)]})),e},i.permute=function(e){for(var t,n,r=e.length;r;)n=c(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},i.pad=function(e,t,r,i){i=i||" ";var o=t-e.length;return 0>=o?e:"left"===r?n(o,i)+e:"middle"===r||"center"===r?n(c(o/2),i)+e+n(a(o/2),i):e+n(o,i)},i.truncate=function(e,t,n,i,o){var u=e.length;if(u<=t)return e;var s=f(0,t-(o=void 0===o?"…":o+"").length);switch(n){case"left":return o+(i?r(e,s,1):e.slice(u-s));case"middle":case"center":var l=a(s/2),d=c(s/2);return(i?r(e,l):e.slice(0,l))+o+(i?r(e,d,1):e.slice(u-d));default:return(i?r(e,s):e.slice(0,s))+o}};var s=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:2}],32:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.topojson=e.topojson||{})}(this,(function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],u=e.translate[1];return function(e,t){t||(n=r=0),e[0]=(n+=e[0])*i+o,e[1]=(r+=e[1])*a+u}}function r(e){if(!e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0);var l=u((e[0]-o)/i),c=u((e[1]-s)/a);e[0]=l-n,e[1]=c-r,n=l,r=c}}function i(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function a(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:o(e,t)};return null==t.id&&delete n.id,n}function o(e,t){function r(e,t){t.length&&t.pop();for(var n,r=l[0>e?~e:e],i=0,a=r.length;i<a;++i)t.push(n=r[i].slice()),s(n,i);0>e&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function i(e){return e=e.slice(),s(e,0),e}function a(e){for(var t=[],n=0,i=e.length;n<i;++n)r(e[n],t);return 2>t.length&&t.push(t[0].slice()),t}function o(e){for(var t=a(e);4>t.length;)t.push(t[0].slice());return t}function u(e){return e.map(o)}var s=n(e.transform),l=e.arcs,c={Point:function(e){return i(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(i)},LineString:function(e){return a(e.arcs)},MultiLineString:function(e){return e.arcs.map(a)},Polygon:function(e){return u(e.arcs)},MultiPolygon:function(e){return e.arcs.map(u)}};return function e(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(e)}:n in c?{type:n,coordinates:c[n](t)}:null}(t)}function s(e,t){function n(t){var n,r=e.arcs[0>t?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1],0>t?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach((function(e){i[0>e?~e:e]=1})),u.push(r)}}var i={},a={},o={},u=[],s=-1;return t.forEach((function(n,r){var i,a=e.arcs[0>n?~n:n];!(3>a.length)||a[1][0]||a[1][1]||(i=t[++s],t[s]=n,t[r]=i)})),t.forEach((function(e){var t,r,i=n(e),u=i[0],s=i[1];if(t=o[u])if(delete o[t.end],t.push(e),t.end=s,r=a[s]){delete a[r.start];var l=r===t?t:t.concat(r);a[l.start=t.start]=o[l.end=r.end]=l}else a[t.start]=o[t.end]=t;else if(t=a[s])if(delete a[t.start],t.unshift(e),t.start=u,r=o[u]){delete o[r.end];var c=r===t?t:r.concat(t);a[c.start=r.start]=o[c.end=t.end]=c}else a[t.start]=o[t.end]=t;else a[(t=[e]).start=u]=o[t.end=s]=t})),r(o,a),r(a,o),t.forEach((function(e){i[0>e?~e:e]||u.push([e])})),u}function l(e,t,n){function r(e){var t=0>e?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){"GeometryCollection"===e.type?e.geometries.forEach(o):e.type in f&&(l=e,f[e.type](e.arcs))}var u=[];if(1<arguments.length){var l,c=[],f={LineString:i,MultiLineString:a,Polygon:a,MultiPolygon:function(e){e.forEach(a)}};o(t),c.forEach(3>arguments.length?function(e){u.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&u.push(e[0].i)})}else for(var d=0,h=e.arcs.length;d<h;++d)u.push(d);return{type:"MultiLineString",arcs:s(e,u)}}function c(e){var t=e[0],n=e[1],r=e[2];return d((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function f(e,t){function n(e){e.forEach((function(t){t.forEach((function(t){(i[t=0>t?~t:t]||(i[t]=[])).push(e)}))})),a.push(e)}function r(t){return d(function(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return a/2}(o(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}var i={},a=[],u=[];return t.forEach((function(e){"Polygon"===e.type?n(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(n)})),a.forEach((function(e){if(!e._){var t=[],n=[e];for(e._=1,u.push(t);e=n.pop();)t.push(e),e.forEach((function(e){e.forEach((function(e){i[0>e?~e:e].forEach((function(e){e._||(e._=1,n.push(e))}))}))}))}})),a.forEach((function(e){delete e._})),{type:"MultiPolygon",arcs:u.map((function(t){var n,a=[];if(t.forEach((function(e){e.forEach((function(e){e.forEach((function(e){2>i[0>e?~e:e].length&&a.push(e)}))}))})),1<(n=(a=s(e,a)).length))for(var o,u,l=1,c=r(a[0]);l<n;++l)(o=r(a[l]))>c&&(u=a[0],a[0]=a[l],a[l]=u,c=o);return a}))}}function h(e,t){return e[1][2]-t[1][2]}e.version="1.6.27",e.mesh=function(e){return o(e,l.apply(this,arguments))},e.meshArcs=l,e.merge=function(e){return o(e,f.apply(this,arguments))},e.mergeArcs=f,e.feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return a(e,t)}))}:a(e,t)},e.neighbors=function(e){function t(e,t){e.forEach((function(e){0>e&&(e=~e);var n=r[e];n?n.push(t):r[e]=[t]}))}function n(e,n){e.forEach((function(e){t(e,n)}))}var r={},a=e.map((function(){return[]})),o={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach((function(e){n(e,t)}))}};for(var u in e.forEach((function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach((function(t){e(t,n)})):t.type in o&&o[t.type](t.arcs,n)})),r)for(var s=r[u],l=s.length,c=0;c<l;++c)for(var f=c+1;f<l;++f){var d,h=s[c],p=s[f];(d=a[h])[u=i(d,p)]!==p&&d.splice(u,0,p),(d=a[p])[u=i(d,h)]!==h&&d.splice(u,0,h)}return a},e.presimplify=function(e,t){function i(e){u.remove(e),e[1][2]=t(e),u.push(e)}var a=n(e.transform),o=r(e.transform),u=function(){function e(e,t){for(;0<t;){var n=(t+1>>1)-1,i=r[n];if(0<=h(e,i))break;r[i._=t]=i,r[e._=t=n]=e}}function t(e,t){for(;;){var n=t+1<<1,a=n-1,o=t,u=r[o];if(a<i&&0>h(r[a],u)&&(u=r[o=a]),n<i&&0>h(r[n],u)&&(u=r[o=n]),o===t)break;r[u._=t]=u,r[e._=t=o]=e}}var n={},r=[],i=0;return n.push=function(t){return e(r[t._=i]=t,i++),i},n.pop=function(){if(!(0>=i)){var e,n=r[0];return 0<--i&&(e=r[i],t(r[e._=0]=e,0)),n}},n.remove=function(n){var a,o=n._;if(r[o]===n)return o!==--i&&(0>h(a=r[i],n)?e:t)(r[a._=o]=a,o),o},n}();return t||(t=c),e.arcs.forEach((function(e){var n,r,s,l,c=[],f=0;for(r=0,s=e.length;r<s;++r)l=e[r],a(e[r]=[l[0],l[1],1/0],r);for(r=1,s=e.length-1;r<s;++r)(n=e.slice(r-1,r+2))[1][2]=t(n),c.push(n),u.push(n);for(r=0,s=c.length;r<s;++r)(n=c[r]).previous=c[r-1],n.next=c[r+1];for(;n=u.pop();){var d=n.previous,h=n.next;n[1][2]<f?n[1][2]=f:f=n[1][2],d&&(d.next=h,d[2]=n[2],i(d)),h&&(h.previous=d,h[0]=n[0],i(h))}e.forEach(o)})),e},Object.defineProperty(e,"__esModule",{value:!0})}))},{}],33:[function(e,t){function n(e,t){t.stamp=e?e.stamp:0,t.sort=e?e.sort:null,t.facet=e?e.facet:null,t.trans=e?e.trans:null,t.dirty=e?e.dirty:[],t.request=e?e.request:null;for(var n,i=0,a=r.length;i<a;++i)t[n=r[i]]=e?e[n]:{}}var r=e("./Dependencies").ALL;t.exports={create:function(e,t){var r={};return n(e,r),r.add=[],r.mod=[],r.rem=[],r.reflow=t,r},copy:n}},{"./Dependencies":36}],34:[function(e,t){function n(e){a.init.call(this,e),this._data=[],this.router(!0).collector(!0)}var r=e("vega-logging"),i=e("./Tuple"),a=e("./Node").prototype,o=e("./ChangeSet"),u=n.prototype=Object.create(a);u.constructor=n,u.data=function(){return this._data},u.evaluate=function(e){r.debug(e,["collecting"]);var t=o.create(e);return e.rem.length&&(this._data=i.idFilter(this._data,e.rem),t.rem=e.rem.slice(0)),e.add.length&&(this._data=this._data.concat(e.add),t.add=e.add.slice(0)),e.mod.length&&(t.mod=e.mod.slice(0)),e.sort&&this._data.sort(e.sort),e.reflow&&(t.mod=t.mod.concat(i.idFilter(this._data,t.add,t.mod,t.rem)),t.reflow=!1),t},t.exports=n},{"./ChangeSet":33,"./Node":39,"./Tuple":41,"vega-logging":49}],35:[function(e,t){function n(e,t,n){this._graph=e,this._name=t,this._data=[],this._source=null,this._facet=n,this._input=u.create(),this._output=null,this._indexes={},this._indexFields=[],this._inputNode=null,this._outputNode=null,this._pipeline=null,this._collector=null,this._mutates=!1}function r(e){var t=new c(e._graph).router(!0).collector(!0);return t.data=function(){return e._data},t.evaluate=function(t){o.debug(t,["input",e._name]);var n,r=e._input,i=u.create(t);for(n in r.fields)i.fields[n]=1;return r.rem.length&&(e._data=l.idFilter(e._data,r.rem)),r.add.length&&(e._data=e._data.concat(r.add)),r.sort&&e._data.sort(r.sort),t.reflow&&(r.mod=r.mod.concat(l.idFilter(e._data,r.add,r.mod,r.rem))),e._input=u.create(),i.add=r.add,i.mod=r.mod,i.rem=r.rem,i.facet=e._facet,i},t}function i(e){var t=new c(e._graph).router(!0).reflows(!0).collector(!0);return t.data=function(){return e._collector?e._collector.data():e._data},t.evaluate=function(t){o.debug(t,["output",e._name]),function(t){var n,r,i,o,u,s,c=e._indexFields;for(n=0;n<c.length;++n){for(o=c[n],u=e._indexes[o],i=a.$(o),r=0;r<t.add.length;++r)s=i(t.add[r]),l.prev_init(t.add[r]),u[s]=(u[s]||0)+1;for(r=0;r<t.rem.length;++r)u[s=i(t.rem[r])]=(u[s]||0)-1;for(r=0;r<t.mod.length;++r)u[s=i(t.mod[r]._prev)]=(u[s]||0)-1,u[s=i(t.mod[r])]=(u[s]||0)+1}}(t);var n=u.create(t,!0);return e._facet&&(e._facet.values=e.values(),t.facet=null),e._output=t,n.data[e._name]=1,n},t}var a=e("datalib"),o=e("vega-logging"),u=e("./ChangeSet"),s=e("./Collector"),l=e("./Tuple"),c=e("./Node"),f=n.prototype;f.name=function(e){return arguments.length?(this._name=e,this):this._name},f.source=function(e){return arguments.length?this._source=this._graph.data(e):this._source},f.insert=function(e){return this._input.add=this._input.add.concat(e.map(l.ingest)),this},f.remove=function(e){var t=this._data.filter(e);return this._input.rem=this._input.rem.concat(t),this},f.update=function(e,t,n){var r=this._input.mod,i=l.idMap(r);return this._input.fields[t]=1,this._data.filter(e).forEach((function(e){var a=e[t],o=n(e);a!==o&&(l.set(e,t,o),1!==i[e._id]&&(r.push(e),i[e._id]=1))})),this},f.values=function(e){return arguments.length?(this._input.rem=this._data.slice(),e&&this.insert(e),this):this._collector.data()},f.mutates=function(e){return arguments.length?(this._mutates=this._mutates||e,this):this._mutates},f.last=function(){return this._output},f.fire=function(e){return e&&(this._input=e),this._graph.propagate(this._input,this._pipeline[0]),this},f.pipeline=function(e){if(!arguments.length)return this._pipeline;var t,n=this._graph;return e.unshift(this._inputNode=r(this)),(t=n.preprocess(e)).router&&e.push(t.collector=new s(n)),e.push(this._outputNode=i(this)),this._collector=t.collector,this._mutates=!!t.mutates,n.connect(this._pipeline=e),this},f.synchronize=function(){return this._graph.synchronize(this._pipeline),this},f.getIndex=function(e){var t,n,r,i,o=this.values(),u=this._indexes,s=this._indexFields,c=a.$(e);if(!u[e])for(u[e]=t={},s.push(e),n=0,r=o.length;n<r;++n)t[i=c(o[n])]=(t[i]||0)+1,l.prev_init(o[n]);return u[e]},f.listener=function(){return function(e){var t=new c(e._graph).router(!0);return t.evaluate=function(t){if(e.mutates()){var n=e._srcMap||(e._srcMap={}),r=u.create(t);return r.add=t.add.map((function(e){return n[e._id]=l.derive(e)})),r.mod=t.mod.map((function(e){return l.rederive(e,n[e._id])})),r.rem=t.rem.map((function(e){var t=n[e._id];return n[e._id]=null,t})),e._input=r}return e._input=t},t}(this).addListener(this._inputNode)},f.addListener=function(e){return e instanceof n?this._collector.addListener(e.listener()):this._outputNode.addListener(e),this},f.removeListener=function(e){this._outputNode.removeListener(e)},f.listeners=function(e){return(e?this._collector:this._outputNode).listeners()},t.exports=n},{"./ChangeSet":33,"./Collector":34,"./Node":39,"./Tuple":41,datalib:27,"vega-logging":49}],36:[function(e,t){var n=t.exports={ALL:["data","fields","scales","signals"]};n.ALL.forEach((function(e){n[e.toUpperCase()]=e}))},{}],37:[function(e,t){function n(){}var r=e("datalib"),i=e("vega-logging"),a=e("./Heap"),o=e("./ChangeSet"),u=e("./DataSource"),s=e("./Collector"),l=e("./Tuple"),c=e("./Signal"),f=e("./Dependencies"),d=n.prototype;d.init=function(){this._stamp=0,this._rank=0,this._data={},this._signals={},this._requestedIndexes={},this.doNotPropagate={}},d.rank=function(){return++this._rank},d.values=function(e,t,n){var i,a,o=e===f.SIGNALS?this._signals:this._data,u=void 0===t?r.keys(o):t;if(Array.isArray(u)){for(i=n||{},a=0;a<u.length;++a)i[u[a]]=o[u[a]].values();return i}return o[u].values()},d.dataValues=function(e){return this.values(f.DATA,e)},d.signalValues=function(e){return this.values(f.SIGNALS,e)},d.data=function(e,t,n){var r=this._data;if(!arguments.length){var i,a=[];for(i in r)a.push(r[i]);return a}return 1===arguments.length?r[e]:r[e]=new u(this,e,n).pipeline(t)},d.signal=function(e,t){if(1===arguments.length){var n=this;return Array.isArray(e)?e.map((function(e){return n._signals[e]})):this._signals[e]}return this._signals[e]=new c(this,e,t)},d.signalRef=function(e){Array.isArray(e)||(e=r.field(e));var t=this.signal(e[0]).value();if(1<e.length)for(var n=1,i=e.length;n<i;++n)t=t[e[n]];return t},d.requestIndex=function(e,t){var n=this._requestedIndexes;return(n[e]||(n[e]={}))[t]=!0,this},d.buildIndexes=function(){var e,t,n,i,a,o,u,s,l=this._requestedIndexes,c=r.keys(l);for(e=0,t=c.length;e<t;++e){if(!(o=this.data(a=c[e])))throw Error("Data source "+r.str(a)+" does not exist.");for(n=0,i=(u=r.keys(l[a])).length;n<i;++n)null!==(s=u[n])&&(o.getIndex(s),l[a][s]=null)}return this},d.propagate=function(e,t,n,r){var i,u,s,l,f,d,h,p,x={},g=new a((function(e,t){return e._qrank-t._qrank}));if(e.stamp)throw Error("Pulse already has a non-zero stamp.");for(e.stamp=n||++this._stamp,x[t._id]=e,g.push(t.qrank(!0));0<g.size();)if(p=(t=g.peek())instanceof c,e=x[t._id],t.rank()!==t.qrank())g.replace(t.qrank(!0));else if(g.pop(),x[t._id]=null,i=t._listeners,p&&(!p||r)||(e=this.evaluate(e,t)),e!==this.doNotPropagate)for(!e.reflow&&t.reflows()&&(e=o.create(e,!0)),d=0,h=i.length;d<h;++d)if(void 0!==(s=x[(u=i[d])._id])){if(null===s)throw Error("Already propagated to node.");if(s===e)continue;if(l=e.add.length||e.mod.length||e.rem.length,f=s.add.length||s.mod.length||s.rem.length,l&&f)throw Error("Multiple changeset pulses to same node");x[u._id]=l?e:s,x[u._id].reflow=e.reflow||s.reflow}else g.push(u.qrank(!0)),x[u._id]=e;return this.done(e)},d.done=function(e){for(var t in i.debug(e,["bookkeeping"]),e.data)this.data(t).synchronize();return this},d.preprocess=function(e){for(var t,n,r,i,a=0,o=0;o<e.length;++o)(t=e[o]).batch()&&!t._collector&&(n||!r?(t=new s(this),e.splice(o,0,t),n=!1):t._collector=r),(i=t.collector())&&(r=t),n=n||t.router()&&!i,a=a||t.mutates(),t.produces()&&(e.splice(o+1,0,new s(this)),n=!1);return{router:n,collector:r,mutates:a}},d.connect=function(e){var t,n,i,a,o,u,s,l,c,d;for(o=0,u=e.length;o<u;++o){for((n=e[o]).collector()&&(t=n),s=0,l=(i=n.dependency(f.DATA)).length;s<l;++s){if(!(c=this.data(d=i[s])))throw new Error("Unknown data source "+r.str(d));c.addListener(t)}for(s=0,l=(a=n.dependency(f.SIGNALS)).length;s<l;++s){if(!(c=this.signal(d=a[s])))throw new Error("Unknown signal "+r.str(d));c.addListener(t)}0<o&&e[o-1].addListener(n)}return e},d.disconnect=function(e){var t,n,r,i,a,o,u,s;for(a=0,o=e.length;a<o;++a){for((n=e[a]).collector()&&(t=n),u=0,s=(r=n.dependency(f.DATA)).length;u<s;++u)this.data(r[u]).removeListener(t);for(u=0,s=(i=n.dependency(f.SIGNALS)).length;u<s;++u)this.signal(i[u]).removeListener(t);n.disconnect()}return e},d.synchronize=function(e){var t,n,r,i,a,o,u,s,c={};for(r=0,i=e.length;r<i;++r)if((t=e[r]).collector())for(a=0,o=(n=t.data()).length;a<o;++a)c[s=(u=n[a])._id]||(l.prev_update(u),c[s]=1);return this},d.reevaluate=function(e,t){var n=e.reflow&&t.last()>=e.stamp;return t.router()||e.add.length||e.rem.length||!n||t.reevaluate(e)},d.evaluate=function(e,t){return this.reevaluate(e,t)?(e=t.evaluate(e),t.last(e.stamp),e):e},t.exports=n},{"./ChangeSet":33,"./Collector":34,"./DataSource":35,"./Dependencies":36,"./Heap":38,"./Signal":40,"./Tuple":41,datalib:27,"vega-logging":49}],38:[function(e,t){function n(e){this.cmp=e,this.nodes=[]}function r(e,t,n,r){var i,a,o;for(i=e[n];n>t&&0>r(i,a=e[o=n-1>>1]);)e[n]=a,n=o;return e[n]=i}function i(e,t,n){for(var i,a=t,o=e.length,u=e[t],s=2*t+1;s<o;)(i=s+1)<o&&0<=n(e[s],e[i])&&(s=i),e[t]=e[s],s=2*(t=s)+1;return e[t]=u,r(e,a,t,n)}var a=n.prototype;a.size=function(){return this.nodes.length},a.clear=function(){return this.nodes=[],this},a.peek=function(){return this.nodes[0]},a.push=function(e){var t=this.nodes;return t.push(e),r(t,0,t.length-1,this.cmp)},a.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,i(t,0,this.cmp)):e=n,e},a.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,i(t,0,this.cmp),n},a.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&0>this.cmp(n,e)&&(t[0]=e,e=n,i(t,0,this.cmp)),e},t.exports=n},{}],39:[function(e,t){function n(e){e&&this.init(e)}var r=e("./Dependencies").ALL,i=0,a=n.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32},o=n.prototype;o.init=function(e){this._id=++i,this._graph=e,this._rank=e.rank(),this._qrank=null,this._stamp=0,this._listeners=[],this._listeners._ids={},this._deps={};for(var t=0,n=r.length;t<n;++t)this._deps[r[t]]=[];return this._flags=0,this},o.rank=function(){return this._rank},o.rerank=function(){for(var e,t=this._graph,n=[this];n.length;)(e=n.shift())._rank=t.rank(),n.unshift.apply(n,e.listeners());return this},o.qrank=function(){return arguments.length?(this._qrank=this._rank,this):this._qrank},o.last=function(e){return arguments.length?(this._stamp=e,this):this._stamp},o._setf=function(e,t){return t?this._flags|=e:this._flags&=~e,this},o.router=function(e){return arguments.length?this._setf(a.Router,e):this._flags&a.Router},o.collector=function(e){return arguments.length?this._setf(a.Collector,e):this._flags&a.Collector},o.produces=function(e){return arguments.length?this._setf(a.Produces,e):this._flags&a.Produces},o.mutates=function(e){return arguments.length?this._setf(a.Mutates,e):this._flags&a.Mutates},o.reflows=function(e){return arguments.length?this._setf(a.Reflows,e):this._flags&a.Reflows},o.batch=function(e){return arguments.length?this._setf(a.Batch,e):this._flags&a.Batch},o.dependency=function(e,t){var n=this._deps[e],r=n._names||(n._names={});if(1===arguments.length)return n;if(null===t)n.splice(0,n.length),n._names={};else if(Array.isArray(t))for(var i,a=0,o=t.length;a<o;++a)r[i=t[a]]||(n.push(i),r[i]=1);else{if(r[t])return this;n.push(t),r[t]=1}return this},o.listeners=function(){return this._listeners},o.addListener=function(e){if(!(e instanceof n))throw Error("Listener is not a Node");return this._listeners._ids[e._id]?this:(this._listeners.push(e),this._listeners._ids[e._id]=1,this._rank>e._rank&&e.rerank(),this)},o.removeListener=function(e){if(!this._listeners._ids[e._id])return!1;var t=this._listeners.indexOf(e),n=0<=t;return n&&(this._listeners.splice(t,1),this._listeners._ids[e._id]=null),n},o.disconnect=function(){this._listeners=[],this._listeners._ids={}},o.evaluate=function(e){return e},o.reevaluate=function(e){var t,n,i,a,o,u;for(i=0,a=r.length;i<a;++i)for(t=r[i],o=0,u=(n=this._deps[t]).length;o<u;++o)if(e[t][n[o]])return!0;return!1},n.reset=function(){i=0},t.exports=n},{"./Dependencies":36}],40:[function(e,t){function n(e,t,n){return a.init.call(this,e),this._name=t,this._value=n,this._verbose=!1,this._handlers=[],this}var r=e("./ChangeSet"),i=e("./Node"),a=i.prototype,o=n.prototype=Object.create(a);o.constructor=n,o.name=function(){return this._name},o.value=function(e){return arguments.length?(this._value=e,this):this._value},o.values=o.value,o.verbose=function(e){return arguments.length?(this._verbose=!!e,this):this._verbose},o.evaluate=function(e){return e.signals[this._name]?e:this._graph.doNotPropagate},o.fire=function(e){e||(e=r.create(null,!0)),e.signals[this._name]=1,this._graph.propagate(e,this)},o.on=function(e){var t=this,n=new i(this._graph);return n.evaluate=function(n){return e(t.name(),t.value()),n},this._handlers.push({handler:e,node:n}),this.addListener(n)},o.off=function(e){var t,n,r=this._handlers;for(t=r.length;0<=--t;)e&&r[t].handler!==e||(n=r.splice(t,1)[0],this.removeListener(n.node));return this},t.exports=n},{"./ChangeSet":33,"./Node":39}],41:[function(e,t){function n(e){return(e=e===Object(e)?e:{data:e})._id=++a,e._prev&&(e._prev=null),e}function r(e,t){t=t||{};for(var n=0,r=e.length;n<r;++n)t[e[n]._id]=1;return t}function i(e,t){for(var n in t=t||{},e)"_prev"!==n&&"_id"!==n&&(t[n]=e[n]);return t}var a=0;t.exports={ingest:n,idMap:r,derive:function(e){return n(i(e))},rederive:function(e,t){return i(e,t)},set:function(e,t,n){return e[t]===n?0:(e[t]=n,1)},prev:function(e){return e._prev||e},prev_init:function(e){e._prev||(e._prev={_id:e._id})},prev_update:function(e){var t,n,r=e._prev;if(r)for(t in e)"_prev"!==t&&"_id"!==t&&(r[t]=(n=e[t])instanceof Object&&n._prev?n._prev:n)},reset:function(){a=0},idFilter:function(e){for(var t={},n=arguments.length;0<--n;)r(arguments[n],t);return e.filter((function(e){return!t[e._id]}))}}},{}],42:[function(e,t){t.exports={ChangeSet:e("./ChangeSet"),Collector:e("./Collector"),DataSource:e("./DataSource"),Dependencies:e("./Dependencies"),Graph:e("./Graph"),Node:e("./Node"),Signal:e("./Signal"),Tuple:e("./Tuple"),debug:e("vega-logging").debug}},{"./ChangeSet":33,"./Collector":34,"./DataSource":35,"./Dependencies":36,"./Graph":37,"./Node":39,"./Signal":40,"./Tuple":41,"vega-logging":49}],43:[function(e,t){t.exports=function(){"use strict";function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){function n(e){var n,r,i=De[e];if(i)return i;for(n=e-1;!De[n];)n--;for(i={line:(i=De[n]).line,column:i.column,seenCR:i.seenCR};n<e;)"\n"===(r=t.charAt(n))?(!i.seenCR&&i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return De[e]=i,i}function r(e,t){var r=n(e),i=n(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}}}function i(e){Ce<Ne||(Ce>Ne&&(Ne=Ce,Fe=[]),Fe.push(e))}function a(){return o()}function o(){var e,n,r,a;return e=Ce,(n=u())===_?(Ce=e,e=_):g()===_?(Ce=e,e=_):(44===t.charCodeAt(Ce)?(r=",",Ce++):(r=_,i(w)),r===_?(Ce=e,e=_):g()===_?(Ce=e,e=_):(a=o())===_?(Ce=e,e=_):e=n=S(n,a)),e===_&&(e=Ce,(n=u())!==_&&(n=k(n)),e=n),e}function u(){var e,n,r,a,o,l,c,f;return e=Ce,91===t.charCodeAt(Ce)?(n="[",Ce++):(n=_,i(E)),n===_?(Ce=e,e=_):g()===_?(Ce=e,e=_):(r=s())===_?(Ce=e,e=_):g()===_?(Ce=e,e=_):(44===t.charCodeAt(Ce)?(a=",",Ce++):(a=_,i(w)),a===_?(Ce=e,e=_):g()===_?(Ce=e,e=_):(o=s())===_?(Ce=e,e=_):g()===_?(Ce=e,e=_):(93===t.charCodeAt(Ce)?(l="]",Ce++):(l=_,i(A)),l===_?(Ce=e,e=_):g()===_?(Ce=e,e=_):(62===t.charCodeAt(Ce)?(c=">",Ce++):(c=_,i(T)),c===_?(Ce=e,e=_):g()===_?(Ce=e,e=_):(f=u())===_?(Ce=e,e=_):e=n=C(r,o,f)))),e===_&&(e=s()),e}function s(){var e,t,n,r;if(e=Ce,(t=l())!==_){if(n=[],(r=d())!==_)for(;r!==_;)n.push(r),r=d();else n=_;n===_?(Ce=e,e=_):e=t=D(t,n)}else Ce=e,e=_;return e===_&&(e=Ce,(t=l())!==_&&(t=N(t)),e=t),e}function l(){var e,n,r,a,u;return e=Ce,40===t.charCodeAt(Ce)?(n="(",Ce++):(n=_,i(F)),n===_?(Ce=e,e=_):(r=o())===_?(Ce=e,e=_):(41===t.charCodeAt(Ce)?(a=")",Ce++):(a=_,i(O)),a===_?(Ce=e,e=_):e=n=M(r)),e===_&&(e=Ce,64===t.charCodeAt(Ce)?(n="@",Ce++):(n=_,i(L)),n===_?(Ce=e,e=_):(r=h())===_?(Ce=e,e=_):(58===t.charCodeAt(Ce)?(a=":",Ce++):(a=_,i(P)),a===_?(Ce=e,e=_):(u=f())===_?(Ce=e,e=_):e=n=z(r,u)),e===_&&(e=Ce,(n=c())===_?(Ce=e,e=_):(58===t.charCodeAt(Ce)?(r=":",Ce++):(r=_,i(P)),r===_?(Ce=e,e=_):(a=f())===_?(Ce=e,e=_):e=n=I(n,a)),e===_&&(e=Ce,(n=p())===_?(Ce=e,e=_):(58===t.charCodeAt(Ce)?(r=":",Ce++):(r=_,i(P)),r===_?(Ce=e,e=_):(a=f())===_?(Ce=e,e=_):e=n=R(n,a)),e===_&&(e=Ce,(n=f())!==_&&(n=G(n)),(e=n)===_&&(e=Ce,(n=h())!==_&&(n=j(n)),e=n))))),e}function c(){var e;return"rect"===t.substr(Ce,4)?(e="rect",Ce+=4):(e=_,i(W)),e===_&&("symbol"===t.substr(Ce,6)?(e="symbol",Ce+=6):(e=_,i(B)),e===_&&("path"===t.substr(Ce,4)?(e="path",Ce+=4):(e=_,i(U)),e===_&&("arc"===t.substr(Ce,3)?(e="arc",Ce+=3):(e=_,i(V)),e===_&&("area"===t.substr(Ce,4)?(e="area",Ce+=4):(e=_,i(q)),e===_&&("line"===t.substr(Ce,4)?(e="line",Ce+=4):(e=_,i(H)),e===_&&("rule"===t.substr(Ce,4)?(e="rule",Ce+=4):(e=_,i($)),e===_&&("image"===t.substr(Ce,5)?(e="image",Ce+=5):(e=_,i(Y)),e===_&&("text"===t.substr(Ce,4)?(e="text",Ce+=4):(e=_,i(X)),e===_&&("group"===t.substr(Ce,5)?(e="group",Ce+=5):(e=_,i(Z))))))))))),e}function f(){var e;return"mousedown"===t.substr(Ce,9)?(e="mousedown",Ce+=9):(e=_,i(J)),e===_&&("mouseup"===t.substr(Ce,7)?(e="mouseup",Ce+=7):(e=_,i(K)),e===_&&("click"===t.substr(Ce,5)?(e="click",Ce+=5):(e=_,i(Q)),e===_&&("dblclick"===t.substr(Ce,8)?(e="dblclick",Ce+=8):(e=_,i(ee)),e===_&&("wheel"===t.substr(Ce,5)?(e="wheel",Ce+=5):(e=_,i(te)),e===_&&("keydown"===t.substr(Ce,7)?(e="keydown",Ce+=7):(e=_,i(ne)),e===_&&("keypress"===t.substr(Ce,8)?(e="keypress",Ce+=8):(e=_,i(re)),e===_&&("keyup"===t.substr(Ce,5)?(e="keyup",Ce+=5):(e=_,i(ie)),e===_&&("mousewheel"===t.substr(Ce,10)?(e="mousewheel",Ce+=10):(e=_,i(ae)),e===_&&("mousemove"===t.substr(Ce,9)?(e="mousemove",Ce+=9):(e=_,i(oe)),e===_&&("mouseout"===t.substr(Ce,8)?(e="mouseout",Ce+=8):(e=_,i(ue)),e===_&&("mouseover"===t.substr(Ce,9)?(e="mouseover",Ce+=9):(e=_,i(se)),e===_&&("mouseenter"===t.substr(Ce,10)?(e="mouseenter",Ce+=10):(e=_,i(le)),e===_&&("touchstart"===t.substr(Ce,10)?(e="touchstart",Ce+=10):(e=_,i(ce)),e===_&&("touchmove"===t.substr(Ce,9)?(e="touchmove",Ce+=9):(e=_,i(fe)),e===_&&("touchend"===t.substr(Ce,8)?(e="touchend",Ce+=8):(e=_,i(de)),e===_&&("dragenter"===t.substr(Ce,9)?(e="dragenter",Ce+=9):(e=_,i(he)),e===_&&("dragover"===t.substr(Ce,8)?(e="dragover",Ce+=8):(e=_,i(pe)),e===_&&("dragleave"===t.substr(Ce,9)?(e="dragleave",Ce+=9):(e=_,i(xe)))))))))))))))))))),e}function d(){var e,n,r,a;return e=Ce,91===t.charCodeAt(Ce)?(n="[",Ce++):(n=_,i(E)),n===_?(Ce=e,e=_):(r=x())===_?(Ce=e,e=_):(93===t.charCodeAt(Ce)?(a="]",Ce++):(a=_,i(A)),a===_?(Ce=e,e=_):e=n=ge(r)),e}function h(){var e,n;if(Ce,e=[],me.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=_,i(ve)),n!==_)for(;n!==_;)e.push(n),me.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=_,i(ve));else e=_;return e!==_&&(e=_e(e)),e}function p(){var e,n;if(Ce,e=[],ye.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=_,i(be)),n!==_)for(;n!==_;)e.push(n),ye.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=_,i(be));else e=_;return e!==_&&(e=we(e)),e}function x(){var e,n;if(Ce,e=[],Se.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=_,i(ke)),n!==_)for(;n!==_;)e.push(n),Se.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=_,i(ke));else e=_;return e!==_&&(e=Ee(e)),e}function g(){var e,n;for(e=[],Ae.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=_,i(Te));n!==_;)e.push(n),Ae.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=_,i(Te));return e}var m,v=1<arguments.length?arguments[1]:{},_={},y={start:a},b=a,w={type:"literal",value:",",description:'","'},S=function(e,t){return[e].concat(t)},k=function(e){return[e]},E={type:"literal",value:"[",description:'"["'},A={type:"literal",value:"]",description:'"]"'},T={type:"literal",value:">",description:'">"'},C=function(e,t,n){return{start:e,middle:n,end:t,str:"["+e.str+", "+t.str+"] > "+n.str}},D=function(e,t){return e.filters=t,e.str+=t.map((function(e){return"["+e+"]"})).join(""),e},N=function(e){return e},F={type:"literal",value:"(",description:'"("'},O={type:"literal",value:")",description:'")"'},M=function(e){return{stream:e,str:"("+e.map((function(e){return e.str})).join(", ")+")"}},L={type:"literal",value:"@",description:'"@"'},P={type:"literal",value:":",description:'":"'},z=function(e,t){return{event:t,name:e,str:"@"+e+":"+t}},I=function(e,t){return{event:t,mark:e,str:e+":"+t}},R=function(e,t){return{event:t,target:e,str:e+":"+t}},G=function(e){return{event:e,str:e}},j=function(e){return{signal:e,str:e}},W={type:"literal",value:"rect",description:'"rect"'},B={type:"literal",value:"symbol",description:'"symbol"'},U={type:"literal",value:"path",description:'"path"'},V={type:"literal",value:"arc",description:'"arc"'},q={type:"literal",value:"area",description:'"area"'},H={type:"literal",value:"line",description:'"line"'},$={type:"literal",value:"rule",description:'"rule"'},Y={type:"literal",value:"image",description:'"image"'},X={type:"literal",value:"text",description:'"text"'},Z={type:"literal",value:"group",description:'"group"'},J={type:"literal",value:"mousedown",description:'"mousedown"'},K={type:"literal",value:"mouseup",description:'"mouseup"'},Q={type:"literal",value:"click",description:'"click"'},ee={type:"literal",value:"dblclick",description:'"dblclick"'},te={type:"literal",value:"wheel",description:'"wheel"'},ne={type:"literal",value:"keydown",description:'"keydown"'},re={type:"literal",value:"keypress",description:'"keypress"'},ie={type:"literal",value:"keyup",description:'"keyup"'},ae={type:"literal",value:"mousewheel",description:'"mousewheel"'},oe={type:"literal",value:"mousemove",description:'"mousemove"'},ue={type:"literal",value:"mouseout",description:'"mouseout"'},se={type:"literal",value:"mouseover",description:'"mouseover"'},le={type:"literal",value:"mouseenter",description:'"mouseenter"'},ce={type:"literal",value:"touchstart",description:'"touchstart"'},fe={type:"literal",value:"touchmove",description:'"touchmove"'},de={type:"literal",value:"touchend",description:'"touchend"'},he={type:"literal",value:"dragenter",description:'"dragenter"'},pe={type:"literal",value:"dragover",description:'"dragover"'},xe={type:"literal",value:"dragleave",description:'"dragleave"'},ge=function(e){return e},me=/^[a-zA-Z0-9_\-]/,ve={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},_e=function(e){return e.join("")},ye=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,be={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},we=function(e){return e.join("")},Se=/^['"a-zA-Z0-9_().><=! \t-&|~]/,ke={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},Ee=function(e){return e.join("")},Ae=/^[ \t\r\n]/,Te={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},Ce=0,De=[{line:1,column:1,seenCR:!1}],Ne=0,Fe=[];if("startRule"in v){if(!(v.startRule in y))throw new Error("Can't start parsing from rule \""+v.startRule+'".');b=y[v.startRule]}if((m=b())!==_&&Ce===t.length)return m;throw m!==_&&Ce<t.length&&i({type:"end",description:"end of input"}),function(t,n,r,i){return null!==n&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(function(e,t){var n,r=Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(1<e.length?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(n,r),n,r,i)}(0,Fe,Ne<t.length?t.charAt(Ne):null,Ne<t.length?r(Ne,Ne+1):r(Ne,Ne))}}}()},{}],44:[function(e,t){function n(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t]]=1;return r}function r(e){var t,n=[];for(t in e)n.push(t);return n}t.exports=function(t){function i(e){var t={code:a(e),globals:r(p),fields:r(x),dataSources:r(g),defs:s};return p={},x={},g={},t}function a(e){if("string"==typeof e)return e;var t=v[e.type];if(null==t)throw new Error("Unsupported type: "+e.type);return t(e)}var o=(t=t||{}).constants||e("./constants"),u=(t.functions||e("./functions"))(a),s=t.functionDefs?t.functionDefs(a):{},l=t.idWhiteList?n(t.idWhiteList):null,c=t.idBlackList?n(t.idBlackList):null,f=0,d=t.fieldVar||"datum",h=t.globalVar||"signals",p={},x={},g={},m="function"==typeof h?h:function(e){return h+'["'+e+'"]'},v={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;if(0<f)return t;if(o.hasOwnProperty(t))return o[t];if(l)return l.hasOwnProperty(t)?t:(p[t]=1,m(t));if(c&&c.hasOwnProperty(t))throw new Error("Illegal identifier: "+t);return t},Program:function(e){return e.body.map(a).join("\n")},MemberExpression:function(e){var t=!e.computed,n=a(e.object);t&&(f+=1);var r=a(e.property);return n===d&&(x[r]=1),t&&(f-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if("Identifier"!==e.callee.type)throw new Error("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=u.hasOwnProperty(t)&&u[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n,p,x,g):r+"("+n.map(a).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(a).join(",")+"]"},BinaryExpression:function(e){return"("+a(e.left)+e.operator+a(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+a(e.argument)+")"},ConditionalExpression:function(e){return"("+a(e.test)+"?"+a(e.consequent)+":"+a(e.alternate)+")"},LogicalExpression:function(e){return"("+a(e.left)+e.operator+a(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(a).join(",")+"}"},Property:function(e){f+=1;var t=a(e.key);return f-=1,t+":"+a(e.value)},ExpressionStatement:function(e){return a(e.expression)}};return i.functions=u,i.functionDefs=s,i.constants=o,i}},{"./constants":45,"./functions":46}],45:[function(e,t){t.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],46:[function(e,t){t.exports=function(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(3>t.length)throw new Error("Missing arguments to clamp function.");if(3<t.length)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:"new Date",date:n("getDate","new Date",0),day:n("getDay","new Date",0),year:n("getFullYear","new Date",0),month:n("getMonth","new Date",0),hours:n("getHours","new Date",0),minutes:n("getMinutes","new Date",0),seconds:n("getSeconds","new Date",0),milliseconds:n("getMilliseconds","new Date",0),time:n("getTime","new Date",0),timezoneoffset:n("getTimezoneOffset","new Date",0),utcdate:n("getUTCDate","new Date",0),utcday:n("getUTCDay","new Date",0),utcyear:n("getUTCFullYear","new Date",0),utcmonth:n("getUTCMonth","new Date",0),utchours:n("getUTCHours","new Date",0),utcminutes:n("getUTCMinutes","new Date",0),utcseconds:n("getUTCSeconds","new Date",0),utcmilliseconds:n("getUTCMilliseconds","new Date",0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase","String",0),lower:n("toLowerCase","String",0),slice:n("slice","String"),substring:n("substring","String"),replace:n("replace","String"),regexp:"RegExp",test:n("test","RegExp"),if:function(t){if(3>t.length)throw new Error("Missing arguments to if function.");if(3<t.length)throw new Error("Too many arguments to if function.");var n=t.map(e);return n[0]+"?"+n[1]+":"+n[2]}}}},{}],47:[function(e,t){var n=e("./parser"),r=e("./codegen"),i=t.exports={parse:function(e,t){return n.parse("("+e+")",t)},code:function(e){return r(e)},compiler:function(e,t){e=e.slice();var n=r(t),a=e.length,o=function(t){var r=n(i.parse(t));e[a]='"use strict"; return ('+r.code+");";var o=Function.apply(null,e);return r.fn=8<e.length?function(){return o.apply(r,arguments)}:function(e,t,n,i,a,u,s){return o.call(r,e,t,n,i,a,u,s)},r};return o.codegen=n,o},functions:e("./functions"),constants:e("./constants")}},{"./codegen":44,"./constants":45,"./functions":46,"./parser":48}],48:[function(e,t){t.exports=function(){"use strict";var e,t,n,r,i,a,o,u,s,l,c,f,d,h,p,x=String.fromCharCode;function g(e,t){if(!e)throw new Error("ASSERT: "+t)}function m(e){return 48<=e&&57>=e}function v(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function _(e){return 0<="01234567".indexOf(e)}function y(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)}function b(e){return 10===e||13===e||8232===e||8233===e}function w(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||92===e||128<=e&&a.NonAsciiIdentifierStart.test(x(e))}function S(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||48<=e&&57>=e||92===e||128<=e&&a.NonAsciiIdentifierPart.test(x(e))}function k(e){return!("implements"!==e&&"interface"!==e&&"package"!==e&&"private"!==e&&"protected"!==e&&"public"!==e&&"static"!==e&&"yield"!==e&&"let"!==e)}function E(){for(var e;s<f;)if(y(e=o.charCodeAt(s)))++s;else{if(!b(e))break;++s,13===e&&10===o.charCodeAt(s)&&++s,++l,c=s}}function A(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(s<f&&v(o[s])))return"";r=o[s++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())}return x(i)}function T(){var e,t;for(t=0,"}"===(e=o[s])&&H({},i.UnexpectedToken,"ILLEGAL");s<f&&v(e=o[s++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(1114111<t||"}"!==e)&&H({},i.UnexpectedToken,"ILLEGAL"),65535>=t?x(t):x(55296+(t-65536>>10),56320+(1023&t-65536))}function C(){var e,t;for(e=o.charCodeAt(s++),t=x(e),92===e&&(117!==o.charCodeAt(s)&&H({},i.UnexpectedToken,"ILLEGAL"),++s,(!(e=A("u"))||"\\"===e||!w(e.charCodeAt(0)))&&H({},i.UnexpectedToken,"ILLEGAL"),t=e);s<f&&S(e=o.charCodeAt(s));)++s,t+=x(e),92===e&&(t=t.substr(0,t.length-1),117!==o.charCodeAt(s)&&H({},i.UnexpectedToken,"ILLEGAL"),++s,(!(e=A("u"))||"\\"===e||!S(e.charCodeAt(0)))&&H({},i.UnexpectedToken,"ILLEGAL"),t+=e);return t}function D(){var t,n;return t=s,{type:1===(n=92===o.charCodeAt(s)?C():function(){var e,t;for(e=s++;s<f;){if(92===(t=o.charCodeAt(s)))return s=e,C();if(!S(t))break;++s}return o.slice(e,s)}()).length?e.Identifier:function(e){if(u&&k(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(n)?e.Keyword:"null"===n?e.NullLiteral:"true"===n||"false"===n?e.BooleanLiteral:e.Identifier,value:n,lineNumber:l,lineStart:c,start:t,end:s}}function N(){var t,n,r,a,u=s,f=o.charCodeAt(s),d=o[s];switch(f){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++s,p.tokenize&&(40===f?p.openParenToken=p.tokens.length:123===f&&(p.openCurlyToken=p.tokens.length)),{type:e.Punctuator,value:x(f),lineNumber:l,lineStart:c,start:u,end:s};default:if(61===(t=o.charCodeAt(s+1)))switch(f){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return s+=2,{type:e.Punctuator,value:x(f)+x(t),lineNumber:l,lineStart:c,start:u,end:s};case 33:case 61:return s+=2,61===o.charCodeAt(s)&&++s,{type:e.Punctuator,value:o.slice(u,s),lineNumber:l,lineStart:c,start:u,end:s}}}return">>>="===(a=o.substr(s,4))?(s+=4,{type:e.Punctuator,value:a,lineNumber:l,lineStart:c,start:u,end:s}):">>>"===(r=a.substr(0,3))||"<<="===r||">>="===r?(s+=3,{type:e.Punctuator,value:r,lineNumber:l,lineStart:c,start:u,end:s}):d===(n=r.substr(0,2))[1]&&0<="+-<>&|".indexOf(d)||"=>"===n?(s+=2,{type:e.Punctuator,value:n,lineNumber:l,lineStart:c,start:u,end:s}):0<="<>=!+-*%&|^/".indexOf(d)?(++s,{type:e.Punctuator,value:d,lineNumber:l,lineStart:c,start:u,end:s}):void H({},i.UnexpectedToken,"ILLEGAL")}function F(t){for(var n="";s<f&&v(o[s]);)n+=o[s++];return 0===n.length&&H({},i.UnexpectedToken,"ILLEGAL"),w(o.charCodeAt(s))&&H({},i.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:l,lineStart:c,start:t,end:s}}function O(){var t,n,r;if(g(m((r=o[s]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=s,t="","."!==r){if(t=o[s++],r=o[s],"0"===t){if("x"===r||"X"===r)return++s,F(n);if(_(r))return function(t){for(var n="0"+o[s++];s<f&&_(o[s]);)n+=o[s++];return(w(o.charCodeAt(s))||m(o.charCodeAt(s)))&&H({},i.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:l,lineStart:c,start:t,end:s}}(n);r&&m(r.charCodeAt(0))&&H({},i.UnexpectedToken,"ILLEGAL")}for(;m(o.charCodeAt(s));)t+=o[s++];r=o[s]}if("."===r){for(t+=o[s++];m(o.charCodeAt(s));)t+=o[s++];r=o[s]}if("e"===r||"E"===r)if(t+=o[s++],("+"===(r=o[s])||"-"===r)&&(t+=o[s++]),m(o.charCodeAt(s)))for(;m(o.charCodeAt(s));)t+=o[s++];else H({},i.UnexpectedToken,"ILLEGAL");return w(o.charCodeAt(s))&&H({},i.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseFloat(t),lineNumber:l,lineStart:c,start:n,end:s}}function M(){var t,n,r,a,u,d,h,p,m="",v=!1;for(h=l,p=c,g("'"===(t=o[s])||'"'===t,"String literal must starts with a quote"),n=s,++s;s<f;){if((r=o[s++])===t){t="";break}if("\\"===r)(r=o[s++])&&b(r.charCodeAt(0))?(++l,"\r"===r&&"\n"===o[s]&&++s,c=s):"u"===r||"x"===r?"{"===o[s]?(++s,m+=T()):(d=s,(u=A(r))?m+=u:(s=d,m+=r)):"n"===r?m+="\n":"r"===r?m+="\r":"t"===r?m+="\t":"b"===r?m+="\b":"f"===r?m+="\f":"v"===r?m+="\v":_(r)?(0!==(a="01234567".indexOf(r))&&(v=!0),s<f&&_(o[s])&&(v=!0,a=8*a+"01234567".indexOf(o[s++]),0<="0123".indexOf(r)&&s<f&&_(o[s])&&(a=8*a+"01234567".indexOf(o[s++]))),m+=x(a)):m+=r;else{if(b(r.charCodeAt(0)))break;m+=r}}return""!==t&&H({},i.UnexpectedToken,"ILLEGAL"),{type:e.StringLiteral,value:m,octal:v,startLineNumber:h,startLineStart:p,lineNumber:l,lineStart:c,start:n,end:s}}function L(){var e,t,n,r;for(g("/"===(e=o[s]),"Regular expression literal must start with a slash"),t=o[s++],n=!1,r=!1;s<f;)if(t+=e=o[s++],"\\"===e)b((e=o[s++]).charCodeAt(0))&&H({},i.UnterminatedRegExp),t+=e;else if(b(e.charCodeAt(0)))H({},i.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||H({},i.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}function P(){var t,n,r,a;return d=null,E(),t=s,n=L(),r=function(){var e,t,n,r;for(t="",n="";s<f&&S((e=o[s]).charCodeAt(0));)if(++s,"\\"===e&&s<f)if("u"===(e=o[s])){if(r=++s,e=A("u"))for(n+=e,t+="\\u";r<s;++r)t+=o[r];else s=r,n+="u",t+="\\u";$({},i.UnexpectedToken,"ILLEGAL")}else t+="\\",$({},i.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}(),a=function(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){return 1114111>=parseInt(t,16)?"x":void H({},i.InvalidRegExp)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(t){H({},i.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}}(n.value,r.value),p.tokenize?{type:e.RegularExpression,value:a,regex:{pattern:n.value,flags:r.value},lineNumber:l,lineStart:c,start:t,end:s}:{literal:n.literal+r.literal,value:a,regex:{pattern:n.value,flags:r.value},start:t,end:s}}function z(){var e,t,n,r;return E(),e=s,t={start:{line:l,column:s-c}},n=P(),t.end={line:l,column:s-c},p.tokenize||(0<p.tokens.length&&(r=p.tokens[p.tokens.length-1]).range[0]===e&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&p.tokens.pop(),p.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,s],loc:t})),n}function I(){var t;return E(),s>=f?{type:e.EOF,lineNumber:l,lineStart:c,start:s,end:s}:w(t=o.charCodeAt(s))?D():40===t||41===t||59===t?N():39===t||34===t?M():46===t?m(o.charCodeAt(s+1))?O():N():m(t)?O():p.tokenize&&47===t?function(){var e,t;if(!(e=p.tokens[p.tokens.length-1]))return z();if("Punctuator"===e.type){if("]"===e.value)return N();if(")"===e.value)return!(t=p.tokens[p.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?N():z();if("}"===e.value){if(p.tokens[p.openCurlyToken-3]&&"Keyword"===p.tokens[p.openCurlyToken-3].type){if(!(t=p.tokens[p.openCurlyToken-4]))return N()}else{if(!p.tokens[p.openCurlyToken-4]||"Keyword"!==p.tokens[p.openCurlyToken-4].type)return N();if(!(t=p.tokens[p.openCurlyToken-5]))return z()}return N()}return z()}return"Keyword"===e.type&&"this"!==e.value?z():N()}():N()}function R(){var n,r,i,a;return E(),n={start:{line:l,column:s-c}},r=I(),n.end={line:l,column:s-c},r.type!==e.EOF&&(i=o.slice(r.start,r.end),a={type:t[r.type],value:i,range:[r.start,r.end],loc:n},r.regex&&(a.regex={pattern:r.regex.pattern,flags:r.regex.flags}),p.tokens.push(a)),r}function G(){var e;return s=(e=d).end,l=e.lineNumber,c=e.lineStart,d=void 0===p.tokens?I():R(),s=e.end,l=e.lineNumber,c=e.lineStart,e}function j(){var e,t,n;e=s,t=l,n=c,d=void 0===p.tokens?I():R(),s=e,l=t,c=n}function W(){this.line=l,this.column=s-c}function B(){this.start=new W,this.end=null}function U(t){this.start=t.type===e.StringLiteral?{line:t.startLineNumber,column:t.start-t.startLineStart}:{line:t.lineNumber,column:t.start-t.lineStart},this.end=null}function V(){s=d.start,d.type===e.StringLiteral?(l=d.startLineNumber,c=d.startLineStart):(l=d.lineNumber,c=d.lineStart),p.range&&(this.range=[s,0]),p.loc&&(this.loc=new B)}function q(e){p.range&&(this.range=[e.start,0]),p.loc&&(this.loc=new U(e))}function H(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(function(e,t){return g(t<r.length,"Message reference must be in range"),r[t]}));throw"number"==typeof e.lineNumber?((n=new Error("Line "+e.lineNumber+": "+i)).index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-c+1):((n=new Error("Line "+l+": "+i)).index=s,n.lineNumber=l,n.column=s-c+1),n.description=i,n}function $(){try{H.apply(null,arguments)}catch(e){if(!p.errors)throw e;p.errors.push(e)}}function Y(t){if(t.type===e.EOF&&H(t,i.UnexpectedEOS),t.type===e.NumericLiteral&&H(t,i.UnexpectedNumber),t.type===e.StringLiteral&&H(t,i.UnexpectedString),t.type===e.Identifier&&H(t,i.UnexpectedIdentifier),t.type===e.Keyword){if(function(e){return!("class"!==e&&"enum"!==e&&"export"!==e&&"extends"!==e&&"import"!==e&&"super"!==e)}(t.value))H(t,i.UnexpectedReserved);else if(u&&k(t.value))return void $(t,i.StrictReservedWord);H(t,i.UnexpectedToken,t.value)}H(t,i.UnexpectedToken,t.value)}function X(t){var n=G();(n.type!==e.Punctuator||n.value!==t)&&Y(n)}function Z(t){if(p.errors){var n=d;n.type!==e.Punctuator&&n.value!==t?$(n,i.UnexpectedToken,n.value):G()}else X(t)}function J(t){return d.type===e.Punctuator&&d.value===t}function K(t){return d.type===e.Keyword&&d.value===t}function Q(){var t;59===o.charCodeAt(s)||J(";")?G():(t=l,E(),l===t&&(d.type===e.EOF||J("}")||Y(d)))}function ee(){var t,n=new V;return(t=G()).type===e.StringLiteral||t.type===e.NumericLiteral?(u&&t.octal&&$(t,i.StrictOctalLiteral),n.finishLiteral(t)):n.finishIdentifier(t.value)}function te(){var t,n,r,i,a=new V;return(t=d).type===e.Identifier?(r=ee(),X(":"),i=ce(),a.finishProperty("init",r,i)):t.type===e.EOF||t.type===e.Punctuator?void Y(t):(n=ee(),X(":"),i=ce(),a.finishProperty("init",n,i))}function ne(){var t,a,o,s;if(J("("))return function(){var e;return X("("),++h.parenthesisCount,e=fe(),X(")"),e}();if(J("["))return function(){var e=[],t=new V;for(X("[");!J("]");)J(",")?(G(),e.push(null)):(e.push(ce()),J("]")||X(","));return G(),t.finishArrayExpression(e)}();if(J("{"))return function(){var e,t,a,o,s=[],l={},c=String,f=new V;for(X("{");!J("}");)t=(e=te()).key.type===n.Identifier?e.key.name:c(e.key.value),o="init"===e.kind?r.Data:"get"===e.kind?r.Get:r.Set,a="$"+t,Object.prototype.hasOwnProperty.call(l,a)?(l[a]===r.Data?u&&o===r.Data?$({},i.StrictDuplicateProperty):o!==r.Data&&$({},i.AccessorDataProperty):o===r.Data?$({},i.AccessorDataProperty):l[a]&o&&$({},i.AccessorGetSet),l[a]|=o):l[a]=o,s.push(e),J("}")||Z(",");return X("}"),f.finishObjectExpression(s)}();if(t=d.type,s=new V,t===e.Identifier||ge[d.value])o=s.finishIdentifier(G().value);else if(t===e.StringLiteral||t===e.NumericLiteral)u&&d.octal&&$(d,i.StrictOctalLiteral),o=s.finishLiteral(G());else{if(t===e.Keyword)throw new Error("Disabled.");t===e.BooleanLiteral?((a=G()).value="true"===a.value,o=s.finishLiteral(a)):t===e.NullLiteral?((a=G()).value=null,o=s.finishLiteral(a)):J("/")||J("/=")?(o=void 0===p.tokens?s.finishLiteral(P()):s.finishLiteral(z()),j()):Y(G())}return o}function re(){var e=[];if(X("("),!J(")"))for(;s<f&&(e.push(ce()),!J(")"));)Z(",");return X(")"),e}function ie(){var t,n=new V;return function(t){return t.type===e.Identifier||t.type===e.Keyword||t.type===e.BooleanLiteral||t.type===e.NullLiteral}(t=G())||Y(t),n.finishIdentifier(t.value)}function ae(){var e;return X("["),e=fe(),X("]"),e}function oe(){var t=function(){var e,t,n,r,i=h.allowIn;for(r=d,h.allowIn=!0,e=ne();;)if(J("."))X("."),n=ie(),e=new q(r).finishMemberExpression(".",e,n);else if(J("("))t=re(),e=new q(r).finishCallExpression(e,t);else{if(!J("["))break;n=ae(),e=new q(r).finishMemberExpression("[",e,n)}return h.allowIn=i,e}();if(d.type===e.Punctuator&&(J("++")||J("--"))&&!function(){var e,t,n,r;return e=s,t=l,n=c,E(),r=l!==t,s=e,l=t,c=n,r}())throw new Error("Disabled.");return t}function ue(){var t,n,r;if(d.type!==e.Punctuator&&d.type!==e.Keyword)n=oe();else{if(J("++")||J("--"))throw new Error("Disabled.");if(J("+")||J("-")||J("~")||J("!"))r=d,t=G(),n=ue(),n=new q(r).finishUnaryExpression(t.value,n);else{if(K("delete")||K("void")||K("typeof"))throw new Error("Disabled.");n=oe()}}return n}function se(t,n){var r=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function le(){var e,t,n,r,i;return i=d,e=function(){var e,t,n,r,i,a,o,u,s,l;if(e=d,s=ue(),0===(i=se(r=d,h.allowIn)))return s;for(r.prec=i,G(),t=[e,d],a=[s,r,o=ue()];0<(i=se(d,h.allowIn));){for(;2<a.length&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=new q(t[t.length-1]).finishBinaryExpression(u,s,o),a.push(n);(r=G()).prec=i,a.push(r),t.push(d),n=ue(),a.push(n)}for(n=a[l=a.length-1],t.pop();1<l;)n=new q(t.pop()).finishBinaryExpression(a[l-1].value,a[l-2],n),l-=2;return n}(),J("?")&&(G(),t=h.allowIn,h.allowIn=!0,n=ce(),h.allowIn=t,X(":"),r=ce(),e=new q(i).finishConditionalExpression(e,n,r)),e}function ce(){return h.parenthesisCount,le()}function fe(){var e=ce();if(J(","))throw new Error("Disabled.");return e}function de(){var t,n,r=d.type;if(r===e.EOF&&Y(d),r===e.Punctuator&&"{"===d.value)throw new Error("Disabled.");if(n=new V,r===e.Punctuator)switch(d.value){case";":throw new Error("Disabled.");case"(":return function(e){var t=fe();return Q(),e.finishExpressionStatement(t)}(n)}else if(r===e.Keyword)throw new Error("Disabled.");return t=fe(),Q(),n.finishExpressionStatement(t)}function he(){if(d.type===e.Keyword)switch(d.value){case"const":case"let":case"function":throw new Error("Disabled.");default:return de()}return d.type===e.EOF?void 0:de()}function pe(){var t,r;return E(),j(),r=new V,u=!0,t=function(){for(var t,r,a,l=[];s<f&&(r=d).type===e.StringLiteral&&(t=he(),l.push(t),t.expression.type===n.Literal);)"use strict"===o.slice(r.start+1,r.end-1)?(u=!0,a&&$(a,i.StrictOctalLiteral)):!a&&r.octal&&(a=r);for(;s<f&&void 0!==(t=he());)l.push(t);return l}(),r.finishProgram(t)}function xe(){var e,t,n,r=[];for(e=0;e<p.tokens.length;++e)n={type:(t=p.tokens[e]).type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),p.range&&(n.range=t.range),p.loc&&(n.loc=t.loc),r.push(n);p.tokens=r}(t={})[(e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",t[e.EOF]="<end>",t[e.Identifier]="Identifier",t[e.Keyword]="Keyword",t[e.NullLiteral]="Null",t[e.NumericLiteral]="Numeric",t[e.Punctuator]="Punctuator",t[e.StringLiteral]="String",t[e.RegularExpression]="RegularExpression",n={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},r={Data:1,Get:2,Set:4},i={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},a={NonAsciiIdentifierStart:/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,NonAsciiIdentifierPart:/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/},q.prototype=V.prototype={finish:function(){p.range&&(this.range[1]=s),p.loc&&(this.loc.end=new W,p.source&&(this.loc.source=p.source))},finishArrayExpression:function(e){return this.type=n.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,r){return this.type=n.AssignmentExpression,this.operator=e,this.left=t,this.right=r,this.finish(),this},finishBinaryExpression:function(e,t,r){return this.type="||"===e||"&&"===e?n.LogicalExpression:n.BinaryExpression,this.operator=e,this.left=t,this.right=r,this.finish(),this},finishCallExpression:function(e,t){return this.type=n.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,r){return this.type=n.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r,this.finish(),this},finishExpressionStatement:function(e){return this.type=n.ExpressionStatement,this.expression=e,this.finish(),this},finishIdentifier:function(e){return this.type=n.Identifier,this.name=e,this.finish(),this},finishLiteral:function(e){return this.type=n.Literal,this.value=e.value,this.raw=o.slice(e.start,e.end),e.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,r){return this.type=n.MemberExpression,this.computed="["===e,this.object=t,this.property=r,this.finish(),this},finishObjectExpression:function(e){return this.type=n.ObjectExpression,this.properties=e,this.finish(),this},finishProgram:function(e){return this.type=n.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,r){return this.type=n.Property,this.key=t,this.value=r,this.kind=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type=n.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this}};var ge={if:1,this:1};return{tokenize:function(t,n){var r;"string"==typeof t||t instanceof String||(t=String(t)),s=0,l=0<(o=t).length?1:0,c=0,f=o.length,d=null,h={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},p={},(n=n||{}).tokens=!0,p.tokens=[],p.tokenize=!0,p.openParenToken=-1,p.openCurlyToken=-1,p.range="boolean"==typeof n.range&&n.range,p.loc="boolean"==typeof n.loc&&n.loc,"boolean"==typeof n.tolerant&&n.tolerant&&(p.errors=[]);try{if(j(),d.type===e.EOF)return p.tokens;for(G();d.type!==e.EOF;)try{G()}catch(t){if(p.errors){p.errors.push(t);break}throw t}xe(),r=p.tokens,void 0!==p.errors&&(r.errors=p.errors)}catch(n){throw n}finally{p={}}return r},parse:function(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),s=0,l=0<(o=e).length?1:0,c=0,f=o.length,d=null,h={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},p={},void 0!==t&&(p.range="boolean"==typeof t.range&&t.range,p.loc="boolean"==typeof t.loc&&t.loc,p.loc&&null!==t.source&&void 0!==t.source&&(p.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(p.tokens=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(p.errors=[]));try{n=pe(),void 0!==p.tokens&&(xe(),n.tokens=p.tokens),void 0!==p.errors&&(n.errors=p.errors)}catch(t){throw t}finally{p={}}return n}}}()},{}],49:[function(e,t){function n(e,t){if(n.enable){var i=Function.prototype.bind.call(console.log,console),a={prevTime:Date.now()-r,stamp:e.stamp};e.add&&(a.add=e.add.length,a.mod=e.mod.length,a.rem=e.rem.length,a.reflow=!!e.reflow),i.apply(console,(t.push(JSON.stringify(a)),t)),r=Date.now()}}var r=Date.now();t.exports={log:function(e){console.log("[Vega Log]",e)},error:function(e){console.error("[Vega Err]",e)},debug:(n.enable=!1,n)}},{}],50:[function(e,t){t.exports={path:e("./path"),render:e("./render"),Item:e("./util/Item"),bound:e("./util/bound"),Bounds:e("./util/Bounds"),canvas:e("./util/canvas"),Gradient:e("./util/Gradient"),toJSON:e("./util/scene").toJSON,fromJSON:e("./util/scene").fromJSON}},{"./path":52,"./render":72,"./util/Bounds":78,"./util/Gradient":80,"./util/Item":82,"./util/bound":83,"./util/canvas":84,"./util/scene":86}],51:[function(e,o){var u={},s={},l=[].join;o.exports={segments:function(e,o,s,c,f,h,p,x,g){var m=Math.atan2,v=l.call(arguments);if(u[v])return u[v];var _=p*(r/180),y=n(_),b=t(_),w=b*(x-e)*.5+y*(g-o)*.5,S=b*(g-o)*.5-y*(x-e)*.5,k=w*w/((s=d(s))*s)+S*S/((c=d(c))*c);1<k&&(s*=k=i(k),c*=k);var E=b/s,A=y/s,T=-y/c,C=b/c,D=E*x+A*g,N=T*x+C*g,F=E*e+A*o,O=T*e+C*o,M=1/((F-D)*(F-D)+(O-N)*(O-N))-.25;0>M&&(M=0);var L=i(M);h==f&&(L=-L);var P=.5*(D+F)-L*(O-N),z=.5*(N+O)+L*(F-D),I=m(N-z,D-P),R=m(O-z,F-P),G=R-I;0>G&&1===h?G+=2*r:0<G&&0==h&&(G-=2*r);for(var j=a(d(G/(.5*r+.001))),W=[],B=0;B<j;++B){var U=I+B*G/j,V=I+(B+1)*G/j;W[B]=[P,z,U,V,s,c,y,b]}return u[v]=W},bezier:function(e){var r=l.call(e);if(s[r])return s[r];var i=e[0],a=e[1],o=e[2],u=e[3],c=e[4],f=e[5],d=e[6],h=e[7],p=h*c,x=-d*f,g=d*c,m=h*f,v=t(o),_=n(o),y=t(u),b=n(u),w=.5*(u-o),S=n(.5*w),k=8/3*S*S/n(w),E=i+v-k*_,A=a+_+k*v,T=i+y,C=a+b,D=T+k*b,N=C-k*y;return s[r]=[p*E+x*A,g*E+m*A,p*D+x*N,g*D+m*N,p*T+x*C,g*T+m*C]},cache:{segments:u,bezier:s}}},{}],52:[function(e,t){t.exports={parse:e("./parse"),render:e("./render")}},{"./parse":53,"./render":54}],53:[function(e,t){var n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},r=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];t.exports=function(e){var t,i,a,o,u,s,l,c,f,d,h,p=[];for(c=0,d=(t=e.slice().replace(r[0],"###$1").split(r[1]).slice(1)).length;c<d;++c){for(a=(i=t[c]).slice(1).trim().replace(r[2],"$1###$2").split(r[3]),o=[s=i.charAt(0)],f=0,h=a.length;f<h;++f)(u=+a[f])===u&&o.push(u);if(l=n[s.toLowerCase()],o.length-1>l)for(f=1,h=o.length;f<h;f+=l)p.push([s].concat(o.slice(f,f+l)));else p.push(o)}return p}},{}],54:[function(e,t){function n(e,t,n,i){for(var a,o=r.segments(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n),u=0;u<o.length;++u)a=r.bezier(o[u]),e.bezierCurveTo.apply(e,a)}var r=e("./arc");t.exports=function(e,t,r,i){var a,o,u,s,l,c=null,f=0,d=0,h=0,p=0;null==r&&(r=0),null==i&&(i=0),e.beginPath();for(var x=0,g=t.length;x<g;++x){switch((a=t[x])[0]){case"l":f+=a[1],d+=a[2],e.lineTo(f+r,d+i);break;case"L":f=a[1],d=a[2],e.lineTo(f+r,d+i);break;case"h":f+=a[1],e.lineTo(f+r,d+i);break;case"H":f=a[1],e.lineTo(f+r,d+i);break;case"v":d+=a[1],e.lineTo(f+r,d+i);break;case"V":d=a[1],e.lineTo(f+r,d+i);break;case"m":f+=a[1],d+=a[2],e.moveTo(f+r,d+i);break;case"M":f=a[1],d=a[2],e.moveTo(f+r,d+i);break;case"c":o=f+a[5],u=d+a[6],h=f+a[3],p=d+a[4],e.bezierCurveTo(f+a[1]+r,d+a[2]+i,h+r,p+i,o+r,u+i),f=o,d=u;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+r,a[2]+i,h+r,p+i,f+r,d+i);break;case"s":o=f+a[3],u=d+a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+r,p+i,f+a[1]+r,d+a[2]+i,o+r,u+i),h=f+a[1],p=d+a[2],f=o,d=u;break;case"S":o=a[3],u=a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+r,p+i,a[1]+r,a[2]+i,o+r,u+i),f=o,d=u,h=a[1],p=a[2];break;case"q":o=f+a[3],u=d+a[4],h=f+a[1],p=d+a[2],e.quadraticCurveTo(h+r,p+i,o+r,u+i),f=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+r,a[2]+i,o+r,u+i),f=o,d=u,h=a[1],p=a[2];break;case"t":o=f+a[1],u=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-s,p=2*d-l):"q"===c[0]&&(h=2*f-h,p=2*d-p),s=h,l=p,e.quadraticCurveTo(h+r,p+i,o+r,u+i),d=u,h=(f=o)+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*f-h,p=2*d-p,e.quadraticCurveTo(h+r,p+i,o+r,u+i),f=o,d=u;break;case"a":n(e,f+r,d+i,[a[1],a[2],a[3],a[4],a[5],a[6]+f+r,a[7]+d+i]),f+=a[6],d+=a[7];break;case"A":n(e,f+r,d+i,[a[1],a[2],a[3],a[4],a[5],a[6]+r,a[7]+i]),f=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}}},{"./arc":51}],55:[function(e,t){function n(){this._active=null,this._handlers={}}var r=n.prototype;r.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.padding(t)},r.element=function(){return this._el},r.padding=function(e){return this._padding=e||{top:0,left:0,bottom:0,right:0},this},r.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},r.on=function(){},r.off=function(){},r.handlers=function(){var e,t=this._handlers,n=[];for(e in t)n.push.apply(n,t[e]);return n},r.eventName=function(e){var t=e.indexOf(".");return 0>t?e:e.slice(0,t)},t.exports=n},{}],56:[function(e,t){function n(){this._el=null,this._bgcolor=null}var r=n.prototype;r.initialize=function(e,t,n,r){return this._el=e,this.resize(t,n,r)},r.element=function(){return this._el},r.scene=function(){return this._el&&this._el.firstChild},r.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},r.resize=function(e,t,n){return this._width=e,this._height=t,this._padding=n||{top:0,left:0,bottom:0,right:0},this},r.render=function(){return this},t.exports=n},{}],57:[function(e,t){function n(){o.call(this),this._down=null,this._touch=null,this._first=!0}function r(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function i(e){return function(t){this.fire(e,t),this._active=null}}var a=e("../../util/dom"),o=e("../Handler"),u=e("./marks"),s=o.prototype,l=n.prototype=Object.create(s);l.constructor=n,l.initialize=function(e,t,n){var r=this._canvas=a.find(e,"canvas");if(r){var i=this;this.events.forEach((function(e){r.addEventListener(e,(function(t){l[e]?l[e].call(i,t):i.fire(e,t)}))}))}return s.initialize.call(this,e,t,n)},l.canvas=function(){return this._canvas},l.context=function(){return this._canvas.getContext("2d")},l.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],l.DOMMouseScroll=function(e){this.fire("mousewheel",e)},l.mousemove=r("mousemove","mouseover","mouseout"),l.dragover=r("dragover","dragenter","dragleave"),l.mouseout=i("mouseout"),l.dragleave=i("dragleave"),l.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},l.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},l.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},l.touchmove=function(e){this.fire("touchmove",e,!0)},l.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},l.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(o)for(t.vegaType=e,r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},l.on=function(e,t){var n=this.eventName(e),r=this._handlers;return(r[n]||(r[n]=[])).push({type:e,handler:t}),this},l.off=function(e,t){var n,r=this.eventName(e),i=this._handlers[r];if(i){for(n=i.length;0<=--n;)i[n].type===e&&(t&&i[n].handler!==t||i.splice(n,1));return this}},l.pickEvent=function(e){var t,n,r=this._canvas.getBoundingClientRect(),i=this._padding;return this.pick(this._scene,t=e.clientX-r.left,n=e.clientY-r.top,t-i.left,n-i.top)},l.pick=function(e,t,n,r,i){var a=this.context();return u[e.marktype].pick.call(this,a,e,t,n,r,i)},t.exports=n},{"../../util/dom":85,"../Handler":55,"./marks":64}],58:[function(e,t){function n(e){l.call(this),this._loader=new u(e)}function r(e,t){if(!t)return null;var n,r,a,u,s,l=new o;for(n=0,r=t.length;n<r;++n)s=(u=(a=t[n]).mark).group,a=c[u.marktype].nested?u:a,l.union(i(a.bounds,s)),a["bounds:prev"]&&l.union(i(a["bounds:prev"],s));return l.round(),e.beginPath(),e.rect(l.x1,l.y1,l.width(),l.height()),e.clip(),l}function i(e,t){if(null==t)return e;for(var n=e.clone();null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}var a=e("../../util/dom"),o=e("../../util/Bounds"),u=e("../../util/ImageLoader"),s=e("../../util/canvas"),l=e("../Renderer"),c=e("./marks");n.RETINA=!0;var f=l.prototype,d=n.prototype=Object.create(f);d.constructor=n,d.initialize=function(e,t,n,r){return this._canvas=s.instance(t,n),e&&(a.clear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),f.initialize.call(this,e,t,n,r)},d.resize=function(e,t,r){return f.resize.call(this,e,t,r),s.resize(this._canvas,this._width,this._height,this._padding,n.RETINA),this},d.canvas=function(){return this._canvas},d.context=function(){return this._canvas?this._canvas.getContext("2d"):null},d.pendingImages=function(){return this._loader.pending()},d.render=function(e,t){var n,i=this.context(),a=this._padding,o=this._width+a.left+a.right,u=this._height+a.top+a.bottom;return this._scene=e,i.save(),n=r(i,t),this.clear(-a.left,-a.top,o,u),this.draw(i,e,n),i.restore(),this._scene=null,this},d.draw=function(e,t,n){c[t.marktype].draw.call(this,e,t,n)},d.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))},d.loadImage=function(e){var t=this,n=this._scene;return this._loader.loadImage(e,(function(){t.renderAsync(n)}))},d.renderAsync=function(e){var t=this;t._async_id&&clearTimeout(t._async_id),t._async_id=setTimeout((function(){t.render(e),delete t._async_id}),10)},t.exports=n},{"../../util/Bounds":78,"../../util/ImageLoader":81,"../../util/canvas":84,"../../util/dom":85,"../Renderer":56,"./marks":64}],59:[function(e,t){t.exports={Handler:e("./CanvasHandler"),Renderer:e("./CanvasRenderer")}},{"./CanvasHandler":57,"./CanvasRenderer":58}],60:[function(e,t){function n(e,t){var n=t.x||0,r=t.y||0,i=t.innerRadius||0,o=t.outerRadius||0,u=(t.startAngle||0)-a,s=(t.endAngle||0)-a;e.beginPath(),0===i?e.moveTo(n,r):e.arc(n,r,i,u,s,0),e.arc(n,r,o,s,u,1),e.closePath()}var i=e("./util"),a=r/2;t.exports={draw:i.drawAll(n),pick:i.pickPath(n)}},{"./util":71}],61:[function(e,t){function n(e,t){var n=t[0],r=n.pathCache||(n.pathCache=i(o(t)));a(e,r)}var r=e("./util"),i=e("../../../path/parse"),a=e("../../../path/render"),o=e("../../../util/svg").path.area,u=r.testPath(n);t.exports={draw:r.drawOne(n),pick:function(e,t,n,r,i,a){var o=t.items,s=t.bounds;return o&&o.length&&(!s||s.contains(i,a))?(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),u(e,o,n,r)?o[0]:null):null},nested:!0}},{"../../../path/parse":53,"../../../path/render":54,"../../../util/svg":87,"./util":71}],62:[function(e,t){var n=e("./util"),r=[];t.exports={draw:function(e,t,i){if(t.items&&t.items.length){var a,o,u,s,l,c,f,d,h,p,x,g,m,v=t.items,_=this;for(p=0,x=v.length;p<x;++p){for(u=(a=v[p]).axisItems||r,o=a.items||r,s=a.legendItems||r,l=a.x||0,c=a.y||0,f=a.width||0,d=a.height||0,(a.stroke||a.fill)&&0<(h=null==a.opacity?1:a.opacity)&&(a.fill&&n.fill(e,a,h)&&e.fillRect(l,c,f,d),a.stroke&&n.stroke(e,a,h)&&e.strokeRect(l,c,f,d)),e.save(),e.translate(l,c),a.clip&&(e.beginPath(),e.rect(0,0,f,d),e.clip()),i&&i.translate(-l,-c),g=0,m=u.length;g<m;++g)"back"===u[g].layer&&_.draw(e,u[g],i);for(g=0,m=o.length;g<m;++g)_.draw(e,o[g],i);for(g=0,m=u.length;g<m;++g)"back"!==u[g].layer&&_.draw(e,u[g],i);for(g=0,m=s.length;g<m;++g)_.draw(e,s[g],i);i&&i.translate(l,c),e.restore()}}},pick:function(e,t,n,i,a,o){if(t.bounds&&!t.bounds.contains(a,o))return null;var u,s,l,c,f,d,h,p,x,g,m,v=t.items||r;for(x=v.length;0<=--x;)if(!(m=(s=v[x]).bounds)||m.contains(a,o)){for(l=s.axisItems||r,c=s.items||r,f=s.legendItems||r,h=s.x||0,p=s.y||0,e.save(),e.translate(h,p),h=a-h,p=o-p,g=f.length;0<=--g;)if(!1!==(u=f[g]).interactive&&(d=this.pick(u,n,i,h,p)))return e.restore(),d;for(g=l.length;0<=--g;)if(!1!==(u=l[g]).interactive&&"back"!==u.layer&&(d=this.pick(u,n,i,h,p)))return e.restore(),d;for(g=c.length;0<=--g;)if(!1!==(u=c[g]).interactive&&(d=this.pick(u,n,i,h,p)))return e.restore(),d;for(g=l.length;0<=--g;)if(!1!==(u=l[g]).interative&&"back"===u.layer&&(d=this.pick(u,n,i,h,p)))return e.restore(),d;if(e.restore(),!1!==t.interactive&&(s.fill||s.stroke)&&0<=h&&h<=s.width&&0<=p&&p<=s.height)return s}return null}}},{"./util":71}],63:[function(e,t){var n=e("./util");t.exports={draw:function(e,t,n){if(t.items&&t.items.length){var r,i=t.items,a=0;for(i.length;void 0>a;++a)if(r=i[a],!n||n.intersects(r.bounds)){r.image&&r.image.url===r.url||(r.image=this.loadImage(r.url),r.image.url=r.url);var o,u=r.x||0,s=r.y||0,l=r.width||r.image&&r.image.width||0,c=r.height||r.image&&r.image.height||0;u-="center"===r.align?l/2:"right"===r.align?l:0,s-="middle"===r.baseline?c/2:"bottom"===r.baseline?c:0,r.image.loaded&&(e.globalAlpha=null==(o=r.opacity)?1:o,e.drawImage(r.image,u,s,l,c))}}},pick:n.pick()}},{"./util":71}],64:[function(e,t){t.exports={arc:e("./arc"),area:e("./area"),group:e("./group"),image:e("./image"),line:e("./line"),path:e("./path"),rect:e("./rect"),rule:e("./rule"),symbol:e("./symbol"),text:e("./text")}},{"./arc":60,"./area":61,"./group":62,"./image":63,"./line":65,"./path":66,"./rect":67,"./rule":68,"./symbol":69,"./text":70}],65:[function(e,t){function n(e,t){var n=t[0],r=n.pathCache||(n.pathCache=i(o(t)));a(e,r)}var r=e("./util"),i=e("../../../path/parse"),a=e("../../../path/render"),o=e("../../../util/svg").path.line,u=r.testPath(n,!1);t.exports={draw:r.drawOne(n),pick:function(e,t,n,r,i,a){var o=t.items,s=t.bounds;return o&&o.length&&(!s||s.contains(i,a))?(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),u(e,o,n,r)?o[0]:null):null},nested:!0}},{"../../../path/parse":53,"../../../path/render":54,"../../../util/svg":87,"./util":71}],66:[function(e,t){function n(e,t){if(null==t.path)return!0;var n=t.pathCache||(t.pathCache=i(t.path));a(e,n,t.x,t.y)}var r=e("./util"),i=e("../../../path/parse"),a=e("../../../path/render");t.exports={draw:r.drawAll(n),pick:r.pickPath(n)}},{"../../../path/parse":53,"../../../path/render":54,"./util":71}],67:[function(e,t){var n=e("./util");t.exports={draw:function(e,t,r){if(t.items&&t.items.length){var i,a,o,u,s,l,c=t.items,f=0;for(c.length;void 0>f;++f)i=c[f],r&&!r.intersects(i.bounds)||0!==(a=null==i.opacity?1:i.opacity)&&(o=i.x||0,u=i.y||0,s=i.width||0,l=i.height||0,i.fill&&n.fill(e,i,a)&&e.fillRect(o,u,s,l),i.stroke&&n.stroke(e,i,a)&&e.strokeRect(o,u,s,l))}},pick:n.pick()}},{"./util":71}],68:[function(e,t){var n=e("./util");t.exports={draw:function(e,t,r){if(t.items&&t.items.length){var i,a,o,u,s,l,c=t.items,f=0;for(c.length;void 0>f;++f)i=c[f],r&&!r.intersects(i.bounds)||0!==(a=null==i.opacity?1:i.opacity)&&(o=i.x||0,u=i.y||0,s=null==i.x2?o:i.x2,l=null==i.y2?u:i.y2,i.stroke&&n.stroke(e,i,a)&&(e.beginPath(),e.moveTo(o,u),e.lineTo(s,l),e.stroke()))}},pick:n.pick((function(e,t,n,r){return!!e.isPointInStroke&&(function(e,t){var n=t.x||0,r=t.y||0,i=null==t.x2?n:t.x2,a=null==t.y2?r:t.y2,o=t.strokeWidth,u=t.strokeCap;e.lineWidth=null==o?1:o,e.lineCap=null==u?"butt":u,e.beginPath(),e.moveTo(n,r),e.lineTo(i,a)}(e,t),e.isPointInStroke(n,r))}))}},{"./util":71}],69:[function(t,n){function a(e,t){var n,a,o,f,d=null==t.size?100:t.size,h=t.x,p=t.y;if(e.beginPath(),null==t.shape||"circle"===t.shape)return n=i(d/r),e.arc(h,p,n,0,2*r,0),void e.closePath();switch(t.shape){case"cross":a=3*(n=i(d/5)/2),e.moveTo(h-a,p-n),e.lineTo(h-n,p-n),e.lineTo(h-n,p-a),e.lineTo(h+n,p-a),e.lineTo(h+n,p-n),e.lineTo(h+a,p-n),e.lineTo(h+a,p+n),e.lineTo(h+n,p+n),e.lineTo(h+n,p+a),e.lineTo(h-n,p+a),e.lineTo(h-n,p+n),e.lineTo(h-a,p+n);break;case"diamond":o=(f=i(d/(2*c)))*c,e.moveTo(h,p-f),e.lineTo(h+o,p),e.lineTo(h,p+f),e.lineTo(h-o,p);break;case"square":n=(a=i(d))/2,e.rect(h-n,p-n,a,a);break;case"triangle-down":f=(o=i(d/l))*l/2,e.moveTo(h,p+f),e.lineTo(h+o,p-f),e.lineTo(h-o,p-f);break;case"triangle-up":f=(o=i(d/l))*l/2,e.moveTo(h,p-f),e.lineTo(h+o,p+f),e.lineTo(h-o,p+f);break;default:var x=function(e,t){var n,r,a,o,u,s=i(t);for(n=0,r=e.length;n<r;++n)for(u=e[n],a=1,o=u.length;a<o;++a)u[a]*=s;return e}(u(t.shape),d);s(e,x,h,p)}e.closePath()}var o=t("./util"),u=t("../../../path/parse"),s=t("../../../path/render"),l=i(3),c=e(30*r/180);n.exports={draw:o.drawAll(a),pick:o.pickPath(a)}},{"../../../path/parse":53,"../../../path/render":54,"./util":71}],70:[function(e,i){var a=e("../../../util/Bounds"),o=e("../../../util/bound").text,u=e("../../../util/text"),s=e("./util"),l=new a;i.exports={draw:function(e,i,a){if(i.items&&i.items.length){var o,l,c,f,d,h,p,x=i.items,g=0;for(x.length;void 0>g;++g)o=x[g],a&&!a.intersects(o.bounds)||(p=u.value(o.text))&&0!==(l=null==o.opacity?1:o.opacity)&&(e.font=u.font(o),e.textAlign=o.align||"left",c=o.x||0,f=o.y||0,(d=o.radius)&&(h=(o.theta||0)-r/2,c+=d*t(h),f+=d*n(h)),o.angle&&(e.save(),e.translate(c,f),e.rotate(o.angle*r/180),c=f=0),c+=o.dx||0,f+=(o.dy||0)+u.offset(o),o.fill&&s.fill(e,o,l)&&e.fillText(p,c,f),o.stroke&&s.stroke(e,o,l)&&e.strokeText(p,c,f),o.angle&&e.restore())}},pick:s.pick((function(e,i,a,u,s,c){if(0>=i.fontSize)return!1;if(!i.angle)return!0;var f=o(i,l,!0),d=-i.angle*r/180,h=t(d),p=n(d),x=i.x,g=i.y;return f.contains(h*s-p*c+(x-x*h+g*p),p*s+h*c+(g-x*p-g*h))}))}},{"../../../util/Bounds":78,"../../../util/bound":83,"../../../util/text":88,"./util":71}],71:[function(e,t){function n(e,t,n,r){if(!e(t,r)){var i=null==n.opacity?1:n.opacity;0===i||(n.fill&&o(t,n,i)&&t.fill(),n.stroke&&u(t,n,i)&&t.stroke())}}function r(e,t,r,i){var a,o,u;for(a=0,o=r.items.length;a<o;++a)u=r.items[a],(!i||i.intersects(u.bounds))&&n(e,t,u,u)}function i(e){return e||(e=c),function(t,n,r,i,a,o){if(!n.items.length)return null;var u,s,l;for(null!=t.pixelratio&&1!==t.pixelratio&&(r*=t.pixelratio,i*=t.pixelratio),l=n.items.length;0<=--l;)if((!(s=(u=n.items[l]).bounds)||s.contains(a,o))&&s&&e(t,u,r,i,a,o))return u;return null}}function a(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,l=null==t?s.fill:t,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null==o?1:o,n.lineCap=null==u?"butt":u),!e(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function o(e,t,n){return!!(0<(n*=null==t.fillOpacity?1:t.fillOpacity))&&(e.globalAlpha=n,e.fillStyle=s(e,t,t.fill),!0)}function u(e,t,n){var r,i=null==(i=t.strokeWidth)?1:i;return!(0>=i||(n*=null==t.strokeOpacity?1:t.strokeOpacity,!(0<n)||(e.globalAlpha=n,e.strokeStyle=s(e,t,t.stroke),e.lineWidth=i,e.lineCap=null==(r=t.strokeCap)?"butt":r,e.vgLineDash(t.strokeDash||null),e.vgLineDashOffset(t.strokeDashOffset||0),0)))}function s(e,t,n){return n.id?l(e,n,t.bounds):n}function l(e,t,n){var r,i,a=n.width(),o=n.height(),u=n.x1+t.x1*a,s=n.y1+t.y1*o,l=n.x1+t.x2*a,c=n.y1+t.y2*o,f=e.createLinearGradient(u,s,l,c),d=t.stops;for(r=0,i=d.length;r<i;++r)f.addColorStop(d[r].offset,d[r].color);return f}var c=function(){return!0};t.exports={drawOne:function(e){return function(t,r,i){r.items.length&&(i&&!i.intersects(r.bounds)||n(e,t,r.items[0],r.items))}},drawAll:function(e){return function(t,n,i){r(e,t,n,i)}},pick:i,pickPath:function(e){return i(a(e))},testPath:a,stroke:u,fill:o,color:s,gradient:l}},{}],72:[function(e,t){t.exports={canvas:e("./canvas"),svg:e("./svg")}},{"./canvas":59,"./svg":76}],73:[function(e,t){function n(){i.call(this)}var r=e("../../util/dom"),i=e("../Handler"),a=i.prototype,o=n.prototype=Object.create(a);o.constructor=n,o.initialize=function(e,t,n){return this._svg=r.find(e,"svg"),a.initialize.call(this,e,t,n)},o.svg=function(){return this._svg},o.listener=function(e){var t=this;return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}},o.on=function(e,t){var n=this.eventName(e),r=this._svg,i=this._handlers,a={type:e,handler:t,listener:this.listener(t)};return(i[n]||(i[n]=[])).push(a),r.addEventListener(n,a.listener),this},o.off=function(e,t){var n,r=this.eventName(e),i=this._svg,a=this._handlers[r];if(a){for(n=a.length;0<=--n;)(a[n].type!==e||t)&&a[n].handler!==t||(i.removeEventListener(r,a[n].listener),a.splice(n,1));return this}},t.exports=n},{"../../util/dom":85,"../Handler":55}],74:[function(e,t){function n(e){l.call(this),this._loader=new s(e),this._dirtyID=0}function r(e,t,n){var r,i,a;for((e=f.child(e,n,"linearGradient",h)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)(a=f.child(e,r,"stop",h)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);f.clear(e,r)}function i(e,t,n){var r;(e=f.child(e,n,"clipPath",h)).setAttribute("id",t.id),(r=f.child(e,0,"rect",h)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)}function a(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function o(e,t,n,r,i){var a=f.child(e,r,t.tag,h,null,i);return a.__data__=n,a.__values__={fill:"default"},"g"===t.tag&&(f.child(a,0,"rect",h,"background").__data__=n),n._svg=a}function u(e,t,n){t===v[e]||(null==t?n?m.removeAttributeNS(n,e):m.removeAttribute(e):n?m.setAttributeNS(n,e,t):m.setAttribute(e,t),v[e]=t)}var s=e("../../util/ImageLoader"),l=e("../Renderer"),c=e("../../util/text"),f=e("../../util/dom"),d=e("../../util/svg"),h=d.metadata.xmlns,p=e("./marks"),x=l.prototype,g=n.prototype=Object.create(x);g.constructor=n,g.initialize=function(e,t,n,r){return e&&(this._svg=f.child(e,0,"svg",h,"marks"),f.clear(e,1),this._root=f.child(this._svg,0,"g",h),f.clear(this._svg,1)),this._defs={clip_id:1,gradient:{},clipping:{}},this.background(this._bgcolor),x.initialize.call(this,e,t,n,r)},g.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),x.background.apply(this,arguments)},g.resize=function(e,t,n){if(x.resize.call(this,e,t,n),this._svg){var r=this._width,i=this._height,a=this._padding;this._svg.setAttribute("width",r+a.left+a.right),this._svg.setAttribute("height",i+a.top+a.bottom),this._root.setAttribute("transform","translate("+a.left+","+a.top+")")}return this},g.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var t in d.metadata)e[t]=d.metadata[t];return f.openTag("svg",e)+this._svg.innerHTML+f.closeTag("svg")},g.imageURL=function(e){return this._loader.imageURL(e)},g.render=function(e,t){return this._dirtyCheck(t)&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e,-1),f.clear(this._root,1)),this.updateDefs(),this},g.draw=function(e,t,n){this.drawMark(e,t,n,p[t.marktype])},g.updateDefs=function(){var e,t=this._svg,n=this._defs,a=n.el,o=0;for(e in n.gradient)a||(a=n.el=f.child(t,0,"defs",h)),r(a,n.gradient[e],o++);for(e in n.clipping)a||(a=n.el=f.child(t,0,"defs",h)),i(a,n.clipping[e],o++);a&&(0==o?(t.removeChild(a),n.el=null):f.clear(a,o))},g._resetDefs=function(){var e=this._defs;e.clip_id=1,e.gradient={},e.clipping={}},g.isDirty=function(e){return this._dirtyAll||e.dirty===this._dirtyID},g._dirtyCheck=function(e){if(this._dirtyAll=!0,!e)return!0;var t,n,r,i,o,u,s,l=++this._dirtyID;for(o=0,u=e.length;o<u;++o)(n=(t=e[o]).mark).marktype!==r&&(r=n.marktype,i=p[r]),"exit"!==t.status?(t=i.nest?n.items[0]:t)._update!==l&&(t._svg?this._update(i,t._svg,t):(this._dirtyAll=!1,a(t,l)),t._update=l):t._svg&&(i.nest&&t.mark.items.length?(this._update(i,t._svg,t.mark.items[0]),(s=t.mark.items[0])._svg=t._svg,s._update=l):f.remove(t._svg),t._svg=null);return!this._dirtyAll},g.drawMark=function(e,t,n,r){if(this.isDirty(t)){var i,a,u,s,l,c,d=r.nest?t.items&&t.items.length?[t.items[0]]:[]:t.items||[],p=!1===t.interactive?"none":null,x="g"===r.tag,g=f.cssClass(t);for((i=f.child(e,n+1,"g",h,g)).setAttribute("class",g),t._svg=i,!x&&p&&i.style.setProperty("pointer-events",p),a=0,u=d.length;a<u;++a)this.isDirty(l=d[a])&&(s=o(i,r,l,a,c=!(this._dirtyAll||l._svg)),this._update(r,s,l),x&&(c&&(this._dirtyAll=!0),this._recurse(s,l),c&&(this._dirtyAll=!1)));return f.clear(i,a),i}},g._recurse=function(e,t){var n,r,i=t.items||[],a=t.legendItems||[],o=t.axisItems||[],u=0;for(n=0,r=o.length;n<r;++n)"back"===o[n].layer&&this.drawMark(e,o[n],u++,p.group);for(n=0,r=i.length;n<r;++n)this.draw(e,i[n],u++);for(n=0,r=o.length;n<r;++n)"back"!==o[n].layer&&this.drawMark(e,o[n],u++,p.group);for(n=0,r=a.length;n<r;++n)this.drawMark(e,a[n],u++,p.group);f.clear(e,1+u)};var m=null,v=null,_={group:function(e,t,n){m=t.childNodes[0],v=t.__values__,e.background(u,n,this);var r=!1===n.mark.interactive?"none":null;r!==v.events&&(m.style.setProperty("pointer-events",r),v.events=r)},text:function(e,t,n){var r=c.value(n.text);r!==v.text&&(t.textContent=r,v.text=r),(r=c.font(n))!==v.font&&(t.style.setProperty("font",r),v.font=r)}};g._update=function(e,t,n){m=t,v=t.__values__,e.attr(u,n,this);var r=_[e.type];r&&r(e,t,n),this.style(m,n)},g.style=function(e,t){var n,r,i,a,o;if(null!=t)for(n=0,r=d.styleProperties.length;n<r;++n)(o=t[i=d.styleProperties[n]])===v[i]||(a=d.styles[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+(void 0===window?"":window.location.href)+"#"+o.id+")"),e.style.setProperty(a,o+"")),v[i]=o)},t.exports=n},{"../../util/ImageLoader":81,"../../util/dom":85,"../../util/svg":87,"../../util/text":88,"../Renderer":56,"./marks":77}],75:[function(e,t){function n(e){u.call(this),this._loader=new s(e),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={clip_id:1,gradient:{},clipping:{}}}function r(e,t,n,r){o[r||e]=t}function i(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&!1===t.interactive&&(f+="pointer-events: none;"),"text"===n&&(f+="font: "+c.font(e)+";"),i=0,a=l.styleProperties.length;i<a;++i)o=l.styleProperties[i],u=l.styles[o],null==(s=e[o])?"fill"===u&&(f+=(f.length?" ":"")+"fill: none;"):(s.id&&(r.gradient[s.id]=s,s="url(#"+s.id+")"),f+=(f.length?" ":"")+u+": "+s+";");return f?'style="'+f+'"':null}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var o,u=e("../Renderer"),s=e("../../util/ImageLoader"),l=e("../../util/svg"),c=e("../../util/text"),f=e("../../util/dom"),d=f.openTag,h=f.closeTag,p=e("./marks"),x=u.prototype,g=n.prototype=Object.create(x);g.constructor=n,g.resize=function(e,t,n){x.resize.call(this,e,t,n);var r=this._padding,i=this._text,a={class:"marks",width:this._width+r.left+r.right,height:this._height+r.top+r.bottom};for(var o in l.metadata)a[o]=l.metadata[o];return i.head=d("svg",a),i.root=d("g",{transform:"translate("+r.left+","+r.top+")"}),i.foot=h("g")+h("svg"),this},g.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot},g.render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},g.reset=function(){return this._defs.clip_id=0,this},g.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(r=(n=i.gradient[t]).stops,a+=d("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=d("stop",{offset:r[e].offset,"stop-color":r[e].color})+h("stop");a+=h("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=d("clipPath",{id:t}),a+=d("rect",{x:0,y:0,width:n.width,height:n.height})+h("rect"),a+=h("clipPath");return 0<a.length?d("defs")+a+h("defs"):""},g.imageURL=function(e){return this._loader.imageURL(e)},g.attributes=function(e,t){return o={},e(r,t,this),o},g.mark=function(e){var t,n,r,o=p[e.marktype],u=o.tag,s=o.attr,l=o.nest?e.items&&e.items.length?[e.items[0]]:[]:e.items||[],x=this._defs,g="";for("g"!==u&&!1===e.interactive&&(t='style="pointer-events: none;"'),g+=d("g",{class:f.cssClass(e)},t),n=0;n<l.length;++n)r=l[n],t="g"===u?null:i(r,e,u,x),g+=d(u,this.attributes(s,r),t),"text"===u?g+=a(c.value(r.text)):"g"===u&&(g+=d("rect",this.attributes(o.background,r),i(r,e,"bgrect",x))+h("rect"),g+=this.markGroup(r)),g+=h(u);return g+h("g")},g.markGroup=function(e){var t,n,r="",i=e.axisItems||[],a=e.items||[],o=e.legendItems||[];for(t=0,n=i.length;t<n;++t)"back"===i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=a.length;t<n;++t)r+=this.mark(a[t]);for(t=0,n=i.length;t<n;++t)"back"!==i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=o.length;t<n;++t)r+=this.mark(o[t]);return r},t.exports=n},{"../../util/ImageLoader":81,"../../util/dom":85,"../../util/svg":87,"../../util/text":88,"../Renderer":56,"./marks":77}],76:[function(e,t){t.exports={Handler:e("./SVGHandler"),Renderer:e("./SVGRenderer"),string:{Renderer:e("./SVGStringRenderer")}}},{"./SVGHandler":73,"./SVGRenderer":74,"./SVGStringRenderer":75}],77:[function(e,i){function a(e){return o(e.x||0,e.y||0)}function o(e,t){return"translate("+e+","+t+")"}var u=e("../../util/text"),s=e("../../util/svg"),l=s.symbolTypes,c=s.textAlign,f=s.path;i.exports={arc:{tag:"path",type:"arc",attr:function(e,t){e("transform",a(t)),e("d",f.arc(t))}},area:{tag:"path",type:"area",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",f.area(n))}},group:{tag:"g",type:"group",attr:function(e,t,n){var r,i,o=null;e("transform",a(t)),t.clip&&(r=n._defs,o=t.clip_id||(t.clip_id="clip"+r.clip_id++),(i=r.clipping[o]||(r.clipping[o]={id:o})).width=t.width||0,i.height=t.height||0),e("clip-path",o?"url(#"+o+")":null)},background:function(e,t){e("class","background"),e("width",t.width||0),e("height",t.height||0)}},image:{tag:"image",type:"image",attr:function(e,t,n){var r=t.x||0,i=t.y||0,a=t.width||0,u=t.height||0,s=n.imageURL(t.url);r-="center"===t.align?a/2:"right"===t.align?a:0,i-="middle"===t.baseline?u/2:"bottom"===t.baseline?u:0,e("href",s,"http://www.w3.org/1999/xlink","xlink:href"),e("transform",o(r,i)),e("width",a),e("height",u)}},line:{tag:"path",type:"line",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",f.line(n))}},path:{tag:"path",type:"path",attr:function(e,t){e("transform",a(t)),e("d",t.path)}},rect:{tag:"rect",type:"rect",nest:!1,attr:function(e,t){e("transform",a(t)),e("width",t.width||0),e("height",t.height||0)}},rule:{tag:"line",type:"rule",attr:function(e,t){e("transform",a(t)),e("x2",null==t.x2?0:t.x2-(t.x||0)),e("y2",null==t.y2?0:t.y2-(t.y||0))}},symbol:{tag:"path",type:"symbol",attr:function(e,t){var n=!t.shape||l[t.shape]?f.symbol(t):f.resize(t.shape,t.size);e("transform",a(t)),e("d",n)}},text:{tag:"text",type:"text",nest:!1,attr:function(e,i){var a,s=i.dx||0,l=(i.dy||0)+u.offset(i),f=i.x||0,d=i.y||0,h=i.angle||0,p=i.radius||0;p&&(a=(i.theta||0)-r/2,f+=p*t(a),d+=p*n(a)),e("text-anchor",c[i.align]||"start"),h?(a=o(f,d)+" rotate("+h+")",(s||l)&&(a+=" "+o(s,l))):a=o(f+s,d+l),e("transform",a)}}}},{"../../util/svg":87,"../../util/text":88}],78:[function(e,r){function i(e){this.clear(),e&&this.union(e)}var o=i.prototype;o.clone=function(){return new i(this)},o.clear=function(){var e=Number.MAX_VALUE;return this.x1=+e,this.y1=+e,this.x2=-e,this.y2=-e,this},o.set=function(e,t,n,r){return this.x1=e,this.y1=t,this.x2=n,this.y2=r,this},o.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},o.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},o.round=function(){return this.x1=c(this.x1),this.y1=c(this.y1),this.x2=a(this.x2),this.y2=a(this.y2),this},o.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},o.rotate=function(e,r,i){var a=t(e),o=n(e),u=r-r*a+i*o,s=i-r*o-i*a,l=this.x1,c=this.x2,f=this.y1,d=this.y2;return this.clear().add(a*l-o*f+u,o*l+a*f+s).add(a*l-o*d+u,o*l+a*d+s).add(a*c-o*f+u,o*c+a*f+s).add(a*c-o*d+u,o*c+a*d+s)},o.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},o.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},o.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},o.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},o.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},o.width=function(){return this.x2-this.x1},o.height=function(){return this.y2-this.y1},r.exports=i},{}],79:[function(e,t){t.exports=function(e){function t(){}function n(t,n){e.add(t,n)}return{bounds:function(t){return arguments.length?(e=t,this):e},beginPath:t,closePath:t,moveTo:n,lineTo:n,quadraticCurveTo:function(t,n,r,i){e.add(t,n),e.add(r,i)},bezierCurveTo:function(t,n,r,i,a,o){e.add(t,n),e.add(r,i),e.add(a,o)}}}},{}],80:[function(e,t){function n(e){this.id="gradient_"+r++,this.type=e||"linear",this.stops=[],this.x1=0,this.x2=1,this.y1=0,this.y2=0}var r=0;n.prototype.stop=function(e,t){return this.stops.push({offset:e,color:t}),this},t.exports=n},{}],81:[function(e,t){(function(n){function r(e){this._pending=0,this._config=e||r.Config}function i(e,t){var n=o.sanitizeUrl(this.params(e));if(!n)return t&&t(e,null),null;var r=this,i=new Image;return r._pending+=1,i.onload=function(){r._pending-=1,i.loaded=!0,t&&t(null,i)},i.src=n,i}function a(e,t){var r=this,i=new(void 0===window?void 0===n?null:n.canvas:window.canvas).Image;return r._pending+=1,o(this.params(e),(function(e,n){return r._pending-=1,e?(t&&t(e,null),null):(i.src=n,i.loaded=!0,void(t&&t(null,i)))})),i}var o=e("datalib/src/import/load");r.Config=null;var u=r.prototype;u.pending=function(){return this._pending},u.params=function(e){var t,n={url:e};for(t in this._config)n[t]=this._config[t];return n},u.imageURL=function(e){return o.sanitizeUrl(this.params(e))},u.loadImage=function(e,t){return o.useXHR?i.call(this,e,t):a.call(this,e,t)},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"datalib/src/import/load":23}],82:[function(e,t){function n(e){this.mark=e}var r=n.prototype;r.hasPropertySet=function(e){var t=this.mark.def.properties;return t&&null!=t[e]},r.cousin=function(e,t){if(0===e)return this;e=e||-1;var n=this.mark,r=n.group,i=null==t?n.items.indexOf(this):t,a=r.items.indexOf(n)+e;return r.items[a].items[i]},r.sibling=function(e){if(0===e)return this;e=e||-1;var t=this.mark,n=t.items.indexOf(this)+e;return t.items[n]},r.remove=function(){var e=this,t=e.mark.items,n=t.indexOf(e);return 0<=n&&(n===t.length-1?t.pop():t.splice(n,1)),e},r.touch=function(){this.pathCache&&(this.pathCache=null)},t.exports=n},{}],83:[function(a,o){function s(){return D||(D=v.instance(1,1).getContext("2d"))}function c(e,t){return e.stroke&&0!==e.opacity&&0!==e.stokeOpacity&&t.expand(null==e.strokeWidth?1:e.strokeWidth),t}function d(e,t,n,r,i){return null==t?n.set(0,0,0,0):(S(N.bounds(n),t,r,i),c(e,n)),n}function h(e,i,a){var o,l,c=s(),f=y.size(e),d=e.align,h=e.radius||0,p=e.x||0,x=e.y||0,g=e.dx||0,m=(e.dy||0)+y.offset(e)-u(.8*f);return h&&(l=(e.theta||0)-r/2,p+=h*t(l),x+=h*n(l)),c.font=y.font(e),o=c.measureText(y.value(e.text)).width,"center"===d?g-=o/2:"right"===d&&(g-=o),i.set(g+=p,m+=x,g+o,m+f),e.angle&&!a&&i.rotate(e.angle*r/180,p,x),i.expand(a?0:1)}function p(e,t,n){var r,i,a=e.axisItems||[],o=e.items||[],u=e.legendItems||[];if(!e.clip){for(r=0,i=a.length;r<i;++r)t.union(a[r].bounds);for(r=0,i=o.length;r<i;++r)o[r].bounds&&t.union(o[r].bounds);if(n)for(r=0,i=u.length;r<i;++r)t.union(u[r].bounds)}return(e.clip||e.width||e.height)&&c(e,t.add(0,0).add(e.width||0,e.height||0)),t.translate(e.x||0,e.y||0)}function x(e,t,n){var r=e.mark.marktype;(t=t||F[r]).nest&&(e=e.mark);var i=e.bounds,a=e["bounds:prev"]||(e["bounds:prev"]=new m);return i?(a.clear().union(i),i.clear()):e.bounds=new m,t(e,e.bounds,n),i||a.clear().union(e.bounds),e.bounds}var g=a("./BoundsContext"),m=a("./Bounds"),v=a("./canvas"),_=a("./svg"),y=a("./text"),b=a("../path"),w=b.parse,S=b.render,k=_.path.area,E=_.path.line,A=r/2,T=i(3),C=e(30*r/180),D=null,N=g(),F={group:p,symbol:function(e,t){var n,a,o,u,s=null==e.size?100:e.size,l=e.x||0,f=e.y||0;switch(e.shape){case"cross":a=3*i(s/5)/2,t.set(l-a,f-a,l+a,f+a);break;case"diamond":o=(u=i(s/(2*C)))*C,t.set(l-o,f-u,l+o,f+u);break;case"square":n=(a=i(s))/2,t.set(l-n,f-n,l+n,f+n);break;case"triangle-down":case"triangle-up":u=(o=i(s/T))*T/2,t.set(l-o,f-u,l+o,f+u);break;default:n=i(s/r),t.set(l-n,f-n,l+n,f+n)}return c(e,t)},image:function(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return n-="center"===e.align?i/2:"right"===e.align?i:0,r-="middle"===e.baseline?a/2:"bottom"===e.baseline?a:0,t.set(n,r,n+i,r+a)},rect:function(e,t){var n,r;return c(e,t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0))},rule:function(e,t){var n,r;return c(e,t.set(n=e.x||0,r=e.y||0,null==e.x2?n:e.x2,null==e.y2?r:e.y2))},arc:function(e,r){var i,a,o,u,s,d,h,p,x,g=e.x||0,m=e.y||0,v=e.innerRadius||0,_=e.outerRadius||0,y=(e.startAngle||0)-A,b=(e.endAngle||0)-A,w=1/0,S=-1/0,k=1/0,E=-1/0,T=[y,b],C=y-y%A;for(a=0;4>a&&C<b;++a,C+=A)T.push(C);for(a=0,o=T.length;a<o;++a)i=T[a],d=v*(u=t(i)),p=_*u,h=v*(s=n(i)),x=_*s,w=l(w,d,p),S=f(S,d,p),k=l(k,h,x),E=f(E,h,x);return c(e,r.set(g+w,m+k,g+S,m+E))},text:h,path:function(e,t){var n=e.path?e.pathCache||(e.pathCache=w(e.path)):null;return d(e,n,t,e.x,e.y)},area:function(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=w(k(n)));return d(r,i,t)},line:function(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=w(E(n)));return d(r,i,t)}};F.area.nest=!0,F.line.nest=!0;var O={mark:null};o.exports={mark:function(e,t,n){var r,i,a,o=e.marktype,u=F[o],s=e.items,l=s&&s.length;if(u.nest)return a=x(l?s[0]:(O.mark=e,O),u,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new m,l)for(r=0,i=s.length;r<i;++r)t.union(x(s[r],u,n));return e.bounds=t},item:x,text:h,group:p}},{"../path":52,"./Bounds":78,"./BoundsContext":79,"./canvas":84,"./svg":87,"./text":88}],84:[function(e,t){(function(e){function n(e){var t=e.getContext("2d");if(!t.vgLineDash){var n=function(){},r=[];return t.setLineDash?(t.vgLineDash=function(e){this.setLineDash(e||r)},t.vgLineDashOffset=function(e){this.lineDashOffset=e}):void 0===t.webkitLineDash?void 0===t.mozDash?(t.vgLineDash=n,t.vgLineDashOffset=n):(t.vgLineDash=function(e){this.mozDash=e},t.vgLineDashOffset=n):(t.vgLineDash=function(e){this.webkitLineDash=e||r},t.vgLineDashOffset=function(e){this.webkitLineDashOffset=e}),e}}t.exports={instance:function(t,r){var i;if(t=t||1,r=r||1,"undefined"!=typeof document&&document.createElement)(i=document.createElement("canvas")).width=t,i.height=r;else{var a=void 0===window?void 0===e?null:e.canvas:window.canvas;if(!a.prototype)return null;i=new a(t,r)}return n(i)},resize:function(e,t,n,r,i){var a=this._ctx=e.getContext("2d"),o=1;return e.width=t+r.left+r.right,e.height=n+r.top+r.bottom,i&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&(a.pixelratio=o=function(e){var t=e.getContext("2d"),n=window&&window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=n/r;if(n!==r){var a=e.width,o=e.height;e.width=a*i,e.height=o*i,e.style.width=a+"px",e.style.height=o+"px"}return i}(e)||1),a.setTransform(o,0,0,o,o*r.left,o*r.top),e},lineDash:n}}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{}],85:[function(e,t){t.exports={find:function(e,t){t=t.toLowerCase();for(var n=0,r=e.childNodes.length;n<r;++n)if(e.childNodes[n].tagName.toLowerCase()===t)return e.childNodes[n]},child:function(e,t,n,r,i,a){var o,u;return(!(o=u=e.childNodes[t])||a||o.tagName.toLowerCase()!==n.toLowerCase()||i&&o.getAttribute("class")!=i)&&(o=function(e,t,n){return n?e.createElementNS(n,t):e.createElement(t)}(e.ownerDocument,n,r),e.insertBefore(o,u||null),i&&o.setAttribute("class",i)),o},clear:function(e,t){for(var n=e.childNodes.length;n>t;)e.removeChild(e.childNodes[--n]);return e},remove:function e(t){if(t){var n=t.parentNode;n&&(n.removeChild(t),(!n.childNodes||!n.childNodes.length)&&e(n))}},cssClass:function(e){return"mark-"+e.marktype+(e.name?" "+e.name:"")},openTag:function(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"},closeTag:function(e){return"</"+e+">"}}},{}],86:[function(e,t){var n=e("../util/bound"),r=["items","axisItems","legendItems"],i=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];t.exports={toJSON:function(e,t){return JSON.stringify(e,i,t)},fromJSON:function(e){return function e(t){var i,a,o,u,s,l=t.marktype;for(o=0,u=r.length;o<u;++o)if(s=t[r[o]])for(i=0,a=s.length;i<a;++i)s[i][l?"mark":"group"]=t,l&&"group"!==l||e(s[i]);return l&&n.mark(t),t}("string"==typeof e?JSON.parse(e):e)}}},{"../util/bound":83}],87:[function(e,t){(function(n){function r(e){return e.x||0}function a(e){return e.y||0}var o=e("datalib"),u=(void 0===window?void 0===n?null:n.d3:window.d3).svg,s=e("../path/parse"),l=u.area().x(r).y1(a).y0((function(e){return(e.y||0)+(e.height||0)})),c=u.area().y(a).x1(r).x0((function(e){return(e.x||0)+(e.width||0)})),f=u.line().x(r).y(a);t.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:u.arc(),symbol:u.symbol().type((function(e){return e.shape||"circle"})).size((function(e){return null==e.size?100:e.size})),area:function(e){var t=e[0];return("horizontal"===t.orient?c:l).interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},line:function(e){var t=e[0];return f.interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},resize:function(e,t){var n,r,a,o,u,l,c,f=s(e),d="";for(t=i(t),o=0,u=f.length;o<u;++o)for(l=0,c=(n=f[o]).length;l<c&&"Z"!==n[l];++l)(r=+n[l])===r&&(a=e.indexOf(r),d+=e.substring(0,a)+r*t,e=e.substring(a+(r+"").length));return d+"Z"}},symbolTypes:o.toMap(u.symbolTypes),textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"../path/parse":53,datalib:27}],88:[function(e,t){function n(e){return null==e.fontSize?11:e.fontSize}t.exports={size:n,value:function(e){return null==e?"":e+""},font:function(e,t){var r=e.font;return t&&r&&(r=(r+"").replace(/\"/g,"'")),(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+n(e)+"px "+(r||"sans-serif")},offset:function(e){var t=e.baseline,r=n(e);return u("top"===t?.93*r:"middle"===t?.3*r:"bottom"===t?-.21*r:0)}}},{}],89:[function(e,t){function n(e,t,n){o.call(this,e,t,n),this._type="canvas",this._renderers={canvas:i,svg:a}}var r=e("vega-scenegraph").render,i=r.canvas,a=r.svg.string,o=e("./View"),u=n.prototype=new o;u.renderer=function(e){return e&&(this._type=e),o.prototype.renderer.apply(this,arguments)},u.canvas=function(){return"canvas"===this._type?this._renderer.canvas():null},u.canvasAsync=function(e){var t=this._renderer,n=this;return"canvas"===this._type?void(0<t.pendingImages()?function r(){0===t.pendingImages()?(n.render(),e(n.canvas())):setTimeout(r,10)}():e(this.canvas())):null},u.svg=function(){return"svg"===this._type?this._renderer.svg():null},u.initialize=function(){var e=this._width,t=this._height,n=this._bgcolor,r=this._padding,i=this.model().config();return this._viewport&&(e=this._viewport[0]-(r?r.left+r.right:0),t=this._viewport[1]-(r?r.top+r.bottom:0)),this._renderer=(this._renderer||new this._io.Renderer(i.load)).initialize(null,e,t,r).background(n),this._repaint=!0,this},t.exports=n},{"./View":91,"vega-scenegraph":50}],90:[function(e,t){function n(e){this._defs={},this._predicates={},this._scene=null,this._groups=null,this._node=null,this._builder=null,this._reset={axes:!1,legends:!1},this.config(e),this.expr=f(this),u.init.call(this)}function r(e){var t=this,n={};return i.isArray(e)?(e.forEach((function(e){n[e]=t._predicates[e]})),n):this._predicates[e]}var i=e("datalib"),a=e("vega-dataflow"),o=a.ChangeSet,u=a.Graph.prototype,s=a.Node,l=e("../scene/GroupBuilder"),c=e("../scene/visit"),f=e("../parse/expr"),d=e("./config"),h=n.prototype=Object.create(u);h.constructor=n,h.defs=function(e){return arguments.length?(this._defs=e,this):this._defs},h.config=function(e){if(!arguments.length)return this._config;for(var t in this._config=Object.create(d),e){var n=e[t],r=this._config[t];this._config[t]=i.isObject(n)&&i.isObject(r)?i.extend({},r,n):n}return this},h.width=function(e){return this._defs&&(this._defs.width=e),this._defs&&this._defs.marks&&(this._defs.marks.width=e),this._scene&&(this._scene.items[0].width=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},h.height=function(e){return this._defs&&(this._defs.height=e),this._defs&&this._defs.marks&&(this._defs.marks.height=e),this._scene&&(this._scene.items[0].height=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},h.node=function(){return this._node||(this._node=new s(this))},h.data=function(){var e=u.data.apply(this,arguments);return 1<arguments.length&&this.node().addListener(e.pipeline()[0]),e},h.predicate=function(e,t){return 1===arguments.length?r.call(this,e):this._predicates[e]=t},h.predicates=function(){return this._predicates},h.scene=function(e){if(!arguments.length)return this._scene;this._builder&&(this.node().removeListener(this._builder),this._builder._groupBuilder.disconnect());var t=this,n=this._builder=new s(this);return n.evaluate=function(r){if(n._groupBuilder)return r;var i=n._groupBuilder=new l(t,t._defs.marks,t._scene={}),a=i.pipeline();return t._groups={},this.addListener(i.connect()),a[a.length-1].addListener(e),r},this.addListener(n),this},h.group=function(e,t){var n=this._groups;return 1===arguments.length?n[e]:(n[e]=t,this)},h.reset=function(){return this._scene&&this._reset.axes&&(c(this._scene,(function(e){e.axes&&e.axes.forEach((function(e){e.reset()}))})),this._reset.axes=!1),this._scene&&this._reset.legends&&(c(this._scene,(function(e){e.legends&&e.legends.forEach((function(e){e.reset()}))})),this._reset.legends=!1),this},h.addListener=function(e){this.node().addListener(e)},h.removeListener=function(e){this.node().removeListener(e)},h.fire=function(e){e||(e=o.create()),this.propagate(e,this.node())},t.exports=n},{"../parse/expr":97,"../scene/GroupBuilder":113,"../scene/visit":118,"./config":92,datalib:27,"vega-dataflow":42}],91:[function(e,t){(function(n){function r(e,t,n){this._el=null,this._model=null,this._width=this.__width=t||500,this._height=this.__height=n||300,this._bgcolor=null,this._cursor=!0,this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._viewport=null,this._renderer=null,this._handler=null,this._streamer=null,this._skipSignals=!1,this._changeset=null,this._repaint=!0,this._renderers=p,this._io=null,this._api={}}function i(e){var t=this,n=this._model.data(e);if(!n)return g.error('Data source "'+e+'" is not defined.');var r=n.pipeline()[0],i=this._streamer,a={};return this._api[e]?this._api[e]:(a.insert=function(o){return n.insert(c.duplicate(o)),i.addListener(r),t._changeset.data[e]=1,a},a.update=function(){return i.addListener(r),t._changeset.data[e]=1,n.update.apply(n,arguments),a},a.remove=function(){return i.addListener(r),t._changeset.data[e]=1,n.remove.apply(n,arguments),a},a.values=function(){return n.values()},this._api[e]=a)}function o(e,t){var n=this._changeset,r=this._model.signal(e);return r?(this._streamer.addListener(r.value(t)),n.signals[e]=1,void(n.reflow=!0)):g.error('Signal "'+e+'" is not defined.')}function u(){var e,t,n=this.model().scene(),r=n.items[0].legendItems,i=0,a=r.length;if(this._strict){for(e=x.mark(n,null,!1);i<a;++i)t=r[i].bounds,e.add(t.x1,0).add(t.x2,0);return e}return n.bounds}function s(){var e=this;return e._renderNode=new d.Node(e._model).router(!0),e._renderNode.evaluate=function(t){g.debug(t,["rendering"]);var n=e._model.scene(),r=e._handler;return r&&r.scene&&r.scene(n),t.trans?t.trans.start((function(t){e._renderer.render(n,t)})):e._repaint?e._renderer.render(n):t.dirty.length&&e._renderer.render(n,t.dirty),t.dirty.length&&(t.dirty.forEach((function(e){e._dirty=!1})),n.items[0]._dirty=!1),e._repaint=e._skipSignals=!1,t},e._model.scene(e._renderNode),!0}var l=void 0===window?void 0===n?null:n.d3:window.d3,c=e("datalib"),d=e("vega-dataflow"),h=e("vega-scenegraph"),p=h.render,x=h.bound,g=e("vega-logging"),m=d.Dependencies,v=e("../parse/streams"),_=e("../scene/Encoder"),y=e("../scene/Transition"),b=r.prototype;b.model=function(e){return arguments.length?(this._model!==e&&(this._model=e,this._streamer=new d.Node(e),this._streamer._rank=-1,this._changeset=d.ChangeSet.create(),this._handler&&this._handler.model(e)),this):this._model},b.data=function(e){var t=this;return arguments.length?c.isString(e)?i.call(t,e):(c.isObject(e)&&c.keys(e).forEach((function(n){var r=i.call(t,n);e[n](r)})),this):t._model.values()};var w=c.toMap(["width","height","padding"]);b.signal=function(e,t,n){var r,i,a=this._model;if(!arguments.length)return a.values(m.SIGNALS);if(1===arguments.length&&c.isString(e))return a.values(m.SIGNALS,e);for(r in c.isObject(e)?(i=e,n=t):(i={})[e]=t,i)w[r]?this[r](i[r]):o.call(this,r,i[r]);return this._skipSignals=n,this},b.width=function(e){return arguments.length?(this.__width!==e&&(this._width=this.__width=e,this.model().width(e),this.initialize(),this._strict&&(this._autopad=1),o.call(this,"width",e)),this):this.__width},b.height=function(e){return arguments.length?(this.__height!==e&&(this._height=this.__height=e,this.model().height(e),this.initialize(),this._strict&&(this._autopad=1),o.call(this,"height",e)),this):this.__height},b.background=function(e){return arguments.length?(this._bgcolor!==e&&(this._bgcolor=e,this.initialize()),this):this._bgcolor},b.padding=function(e){return arguments.length?(this._padding!==e&&(c.isString(e)?(this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._strict="strict"===e):(this._autopad=0,this._padding=e,this._strict=!1),this._renderer&&this._renderer.resize(this._width,this._height,this._padding),this._handler&&this._handler.padding(this._padding),o.call(this,"padding",this._padding)),this._repaint=!0,this):this._padding},b.autopad=function(e){if(1>this._autopad)return this;this._autopad=0;var t=u.call(this),n=this._padding,r=this.model().config().autopadInset,i=0>t.x1?a(-t.x1)+r:0,s=0>t.y1?a(-t.y1)+r:0,l=t.x2>this._width?a(+t.x2-this._width)+r:0;return n={left:i,top:s,right:l,bottom:t=t.y2>this._height?a(+t.y2-this._height)+r:0},this._strict?(this._autopad=0,this._padding=n,this._width=f(0,this.__width-(i+l)),this._height=f(0,this.__height-(s+t)),this._model.width(this._width).height(this._height).reset(),o.call(this,"width",this._width),o.call(this,"height",this._height),o.call(this,"padding",n),this.initialize().update({props:"enter"}).update({props:"update"})):this.padding(n).update(e),this},b.viewport=function(e){return arguments.length?(this._viewport!==e&&(this._viewport=e,this.initialize()),this):this._viewport},b.renderer=function(e){if(!arguments.length)return this._renderer;if(this._renderers[e])e=this._renderers[e];else{if(c.isString(e))throw new Error("Unknown renderer: "+e);if(!e)throw new Error("No renderer specified")}return this._io!==e&&(this._io=e,this._renderer=null,this.initialize(),this._build&&this.render()),this},b.initialize=function(e){var t,n=this,r=n._width,i=n._height,a=n._padding,o=n._bgcolor,u=this.model().config();return arguments.length&&null!==e||(e=this._el?this._el.parentNode:null)?(l.select(e).select("div.vega").remove(),this._el=e=l.select(e).append("div").attr("class","vega").style("position","relative").node(),n._viewport&&l.select(e).style("width",(n._viewport[0]||r)+"px").style("height",(n._viewport[1]||i)+"px").style("overflow","auto"),p.canvas.Renderer.RETINA=u.render.retina,n._renderer=(n._renderer||new this._io.Renderer(u.load)).initialize(e,r,i,a).background(o),t=n._handler,n._handler=(new this._io.Handler).initialize(e,a,n),t?t.handlers().forEach((function(e){n._handler.on(e.type,e.handler)})):n._detach=v(this),this._repaint=!0,this):this},b.destroy=function(){this._detach&&this._detach()},b.update=function(e){e=e||{};var t=this,n=this._model,r=this._streamer,i=this._changeset,a=e.duration?new y(e.duration,e.ease):null;if(a&&(i.trans=a),void 0!==e.props){if(0<c.keys(i.data).length)throw Error("New data values are not reflected in the visualization. Please call view.update() before updating a specified property set.");i.reflow=!0,i.request=e.props}var o=t._build;return t._build=t._build||s.call(this),e.items&&o?(_.update(n,e.trans,e.props,e.items,i.dirty),t._renderNode.evaluate(i)):r.listeners().length&&o?(this._repaint&&r.addListener(n.node()),n.propagate(i,r,null,this._skipSignals),r.disconnect()):n.fire(i),t._changeset=d.ChangeSet.create(),t.autopad(e)},b.toImageURL=function(e){var t,n=this;switch(e||"png"){case"canvas":case"png":t=p.canvas.Renderer;break;case"svg":t=p.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+e)}var r=p.canvas.Renderer.RETINA;p.canvas.Renderer.RETINA=!1;var i=new t(n._model.config.load).initialize(null,n._width,n._height,n._padding).background(n._bgcolor).render(n._model.scene());if(p.canvas.Renderer.RETINA=r,"svg"===e){var a=new Blob([i.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(a)}return i.canvas().toDataURL("image/png")},b.render=function(e){return this._renderer.render(this._model.scene(),e),this},b.on=function(){return this._handler.on.apply(this._handler,arguments),this},b.onSignal=function(e,t){var n=this._model.signal(e);return n?n.on(t):g.error('Signal "'+e+'" is not defined.'),this},b.off=function(){return this._handler.off.apply(this._handler,arguments),this},b.offSignal=function(e,t){var n=this._model.signal(e);return n?n.off(t):g.error('Signal "'+e+'" is not defined.'),this},r.factory=function(t){var n=e("./HeadlessView");return function(e){e=e||{};var i=t.defs(),a=(e.el?new r:new n).model(t).renderer(e.renderer||"canvas").width(i.width).height(i.height).background(i.background).padding(i.padding).viewport(i.viewport).initialize(e.el);return e.data&&a.data(e.data),e.el&&(!1!==e.hover&&a.on("mouseover",(function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"hover",items:t})})).on("mouseout",(function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"update",items:t})})),!1!==e.cursor&&a.onSignal("cursor",(function(e,t){var n=l.select("body");c.isString(t)?(a._cursor="default"===t,n.style("cursor",t)):c.isObject(t)&&a._cursor&&n.style("cursor",t.default)}))),a}},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"../parse/streams":108,"../scene/Encoder":112,"../scene/Transition":115,"./HeadlessView":89,datalib:27,"vega-dataflow":42,"vega-logging":49,"vega-scenegraph":50}],92:[function(e,t){(function(e){var n=void 0===window?void 0===e?null:e.d3:window.d3,r={load:{baseURL:"",domainWhiteList:!1},autopadInset:5};r.scale={time:n.time.scale,utc:n.time.scale.utc},r.render={retina:!0},r.scene={fill:void 0,fillOpacity:void 0,stroke:void 0,strokeOpacity:void 0,strokeWidth:void 0,strokeDash:void 0,strokeDashOffset:void 0},r.axis={layer:"back",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1e4,titleOffsetAutoMargin:4},r.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"},r.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]},r.range={category10:n.scale.category10().range(),category20:n.scale.category20().range(),category20b:n.scale.category20b().range(),category20c:n.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{}],93:[function(e,t){function n(e,t,n){var i=e.schema;i&&(i.refs&&r.extend(n.refs,i.refs),i.defs&&r.extend(n.defs,i.defs))}var r=e("datalib"),i=e("../parse"),a=e("../scene/Scale"),o=e("./config");t.exports=function(e){var t=null;return(e=e||{}).url?t=r.json(r.extend({url:e.url},o.load)):(t={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"},r.keys(i).forEach((function(e){n(i[e],0,t)})),n(a,0,t)),e.properties&&r.keys(e.properties).forEach((function(n){t.defs.propset.properties[n]={$ref:"#/refs/"+e.properties[n]+"Value"}})),e.propertySets&&r.keys(e.propertySets).forEach((function(e){t.defs.mark.properties.properties.properties[e]={$ref:"#/defs/propset"}})),t}},{"../parse":98,"../scene/Scale":114,"./config":92,datalib:27}],94:[function(e,t){function n(e,t,n,r,a){var s;void 0!==t.scale&&r.scale(s=a.scale(t.scale));var l=e.grid;i.isObject(l)&&(e.grid=void 0===l[s.type]?l.default:l[s.type]),r.orient(o(t,e,"orient",u[t.type])),r.offset(o(t,e,"offset",0)),r.layer(o(t,e,"layer","front")),r.grid(o(t,e,"grid",!1)),r.title(t.title||null),r.titleOffset(o(t,e,"titleOffset")),r.tickValues(t.values||null),r.tickFormat(t.format||null),r.tickFormatType(t.formatType||null),r.tickSubdivide(t.subdivide||0),r.tickPadding(o(t,e,"tickPadding",e.padding));var c=o(t,e,"tickSize"),f=[c,c,c];f[0]=o(t,e,"tickSizeMajor",f[0]),f[1]=o(t,e,"tickSizeMinor",f[1]),f[2]=o(t,e,"tickSizeEnd",f[2]),f.length&&r.tickSize.apply(r,f),r.tickCount(o(t,e,"ticks"));var d=t.properties;d&&d.ticks?(r.majorTickProperties(d.majorTicks?i.extend({},d.ticks,d.majorTicks):d.ticks),r.minorTickProperties(d.minorTicks?i.extend({},d.ticks,d.minorTicks):d.ticks)):(r.majorTickProperties(d&&d.majorTicks||{}),r.minorTickProperties(d&&d.minorTicks||{})),r.tickLabelProperties(d&&d.labels||{}),r.titleProperties(d&&d.title||{}),r.gridLineProperties(d&&d.grid||{}),r.domainProperties(d&&d.axis||{})}function r(e){var t=e.config(),n=t.axis;return{x:i.extend(i.duplicate(n),t.axis_x),y:i.extend(i.duplicate(n),t.axis_y)}}var i=e("datalib"),a=e("../scene/axis"),o=e("../util/theme-val"),u={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};t.exports=function(e,t,i,o){var u=r(e);(t||[]).forEach((function(t,r){i[r]=i[r]||a(e,u[t.type]),n(u[t.type],t,0,i[r],o)}))}},{"../scene/axis":116,"../util/theme-val":150,datalib:27}],95:[function(e,t){(function(e){var n=void 0===window?void 0===e?null:e.d3:window.d3;t.exports=function(e){return null==e?null:n.rgb(e)+""}}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{}],96:[function(e,t){function n(e,t,a){function o(e,t){i.error("PARSE DATA FAILED: "+t.name+" "+e),s=-1,a(e)}var u=e.config(),s=0;return(t||[]).forEach((function(t){t.url&&(s+=1,r.load(r.extend({url:t.url},u.load),function(t){return function(n,i){if(n)o(n,t);else if(0<s)try{e.data(t.name).values(r.read(i,t.format)),0==--s&&a()}catch(e){o(e,t)}}}(t)));try{n.datasource(e,t)}catch(e){o(e,t)}})),0==s&&setTimeout(a,1),t}var r=e("datalib"),i=e("vega-logging"),a=e("./transforms"),o=e("./modify");n.datasource=function(e,t){var n=(t.transform||[]).map((function(t){return a(e,t)})),i=(t.modify||[]).map((function(n){return o(e,n,t)})),u=e.data(t.name,i.concat(n));return t.values?u.values(r.read(t.values,t.format)):t.source&&(u.source(t.source).addListener(u),e.removeListener(u.pipeline()[0])),u},t.exports=n},{"./modify":102,"./transforms":109,datalib:27,"vega-logging":49}],97:[function(e,t){function n(e,t,n){if(void 0===window||!window||!window.open)throw Error("Open function can only be invoked in a browser.");var r=d.extend({type:"open",url:t,name:n},e.config().load),i=d.load.sanitizeUrl(r);if(!i)throw Error("Invalid URL: "+r.url);window.open(i,n)}function r(e,t){return function(n){var r=(n=n.map(e)).length;if(2>r||3<r)throw Error("scale takes exactly 2 or 3 arguments.");return"this.defs.scale(this.model, "+t+", "+n[0]+","+n[1]+(2<r?","+n[2]:"")+")"}}function i(e,t,n,r,i){if(i&&i.scale||(i=i&&i.mark?i.mark.group:e.scene().items[0]),e.group(i._id)!==i)throw Error('Scope for scale "'+n+'" is not a valid group item.');var a=i.scale(n);return a?t?a.invert(r):a(r):r}function a(e,t,n,r){var i=t,a=n;return t>n&&(i=n,a=t),r?i<e&&a>e:i<=e&&a>=e}function o(e){return function(t,n,r,i){var a;if(3!==t.length)throw Error("indata takes 3 arguments.");if("Literal"!==t[0].type)throw Error("Data source name must be a literal for indata.");return i[a=t[0].value]=1,"Literal"===t[2].type&&o.model.requestIndex(a,t[2].value),"this.defs.indata(this.model,"+(t=t.map(e))[0]+","+t[1]+","+t[2]+")"}}function u(e,t,n,r){return 0<e.data(t).getIndex(r)[n]}function s(e,t){return h.format(e,"number")(t)}function l(e,t){return h.format(e,"time")(t)}function c(e,t){return h.format(e,"utc")(t)}function f(e){return function(t){o.model=e;var n=g(t);return n.model=e,n.sig=e?e._signals:{},n}}var d=e("datalib"),h=d.template,p=e("vega-expression"),x=["datum","parent","event","signals"],g=p.compiler(x,{idWhiteList:x,fieldVar:x[0],globalVar:function(e){return"this.sig["+d.str(e)+"]._value"},functions:function(e){var t=p.functions(e);return t.eventItem="event.vg.getItem",t.eventGroup="event.vg.getGroup",t.eventX="event.vg.getX",t.eventY="event.vg.getY",t.open=function(e){return function(t){var n=(t=t.map(e)).length;if(1>n||2<n)throw Error("open takes exactly 1 or 2 arguments.");return"this.defs.open(this.model, "+t[0]+(1<n?","+t[1]:"")+")"}}(e),t.scale=r(e,!1),t.iscale=r(e,!0),t.inrange="this.defs.inrange",t.indata=o(e),t.format="this.defs.format",t.timeFormat="this.defs.timeFormat",t.utcFormat="this.defs.utcFormat",t},functionDefs:function(){return{scale:i,inrange:a,indata:u,format:s,timeFormat:l,utcFormat:c,open:n}}});f.scale=i,f.codegen=g.codegen,t.exports=f},{datalib:27,"vega-expression":47}],98:[function(e,t){t.exports={axes:e("./axes"),background:e("./background"),data:e("./data"),events:e("vega-event-selector"),expr:e("./expr"),legends:e("./legends"),mark:e("./mark"),marks:e("./marks"),modify:e("./modify"),padding:e("./padding"),predicates:e("./predicates"),properties:e("./properties"),signals:e("./signals"),spec:e("./spec"),streams:e("./streams"),transforms:e("./transforms")}},{"./axes":94,"./background":95,"./data":96,"./expr":97,"./legends":99,"./mark":100,"./marks":101,"./modify":102,"./padding":103,"./predicates":104,"./properties":105,"./signals":106,"./spec":107,"./streams":108,"./transforms":109,"vega-event-selector":43}],99:[function(e,t){var n=e("../scene/legend");t.exports=function(e,t,r,i){(t||[]).forEach((function(t,a){r[a]=r[a]||n(e),function(e,t,n,r){n.size(e.size?r.scale(e.size):null),n.shape(e.shape?r.scale(e.shape):null),n.fill(e.fill?r.scale(e.fill):null),n.stroke(e.stroke?r.scale(e.stroke):null),n.opacity(e.opacity?r.scale(e.opacity):null),e.orient&&n.orient(e.orient),null!=e.offset&&n.offset(e.offset),n.title(e.title||null),n.values(e.values||null),n.format(void 0===e.format?null:e.format),n.formatType(e.formatType||null);var i=e.properties;n.titleProperties(i&&i.title||{}),n.labelProperties(i&&i.labels||{}),n.legendProperties(i&&i.legend||{}),n.symbolProperties(i&&i.symbols||{}),n.gradientProperties(i&&i.gradient||{})}(t,0,r[a],i)}))}},{"../scene/legend":117}],100:[function(e,t){var n=e("datalib"),r=e("./properties");t.exports=function e(t,i,a){var o=i.properties||a&&(i.properties={}),u=o.enter||a&&(o.enter={}),s=i.marks,l=t.config().marks||{};if(a){"symbol"===i.type&&!u.size&&l.symbolSize&&(u.size={value:l.symbolSize});var c={arc:"fill",area:"fill",rect:"fill",symbol:"fill",text:"fill",line:"stroke",path:"stroke",rule:"stroke"}[i.type];!u[c]&&l.color&&(u[c]={value:l.color})}return n.keys(o).forEach((function(e){o[e]=r(t,i.type,o[e])})),i.delay&&(i.delay=r(t,i.type,{delay:i.delay})),s&&(i.marks=s.map((function(n){return e(t,n,!0)}))),i}},{"./properties":105,datalib:27}],101:[function(e,t){function n(e,t){var n,r,o,u,s,l=t.config().scene,c={};for(n=0,r=o=a.length;n<r;++n)void 0===(s=e[u=a[n]])?l[u]?c[u]={value:l[u]}:--o:c[u]=s.signal?s:{value:s};return o?{update:i(t,"group",c)}:{}}var r=e("./mark"),i=e("./properties"),a=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];t.exports=function(e,t,i,a){return{type:"group",width:i,height:a,properties:n(t.scene||{},e),scales:t.scales||[],axes:t.axes||[],legends:t.legends||[],marks:(t.marks||[]).map((function(t){return r(e,t,!0)}))}}},{"./mark":100,"./properties":105}],102:[function(e,t){function n(e,t,n,r){var i,a,o,u,s=!0,l=e.length;for(i=n.length-1;0<=i;--i){for(a=0;a<l;++a)if(o=e[a],u=t&&o(t)||t,o(n[i])!==u){s=!1;break}s&&r.push.apply(r,n.splice(i,1)),s=!0}}function r(e,t,n){var r=s.ingest(t);e.add.push(r),n._data.push(r)}var i=e("datalib"),a=e("vega-logging"),o=e("vega-dataflow"),u=o.Node,s=o.Tuple,l=o.Dependencies,c="insert",f="remove",d="upsert",h="toggle",p="clear",x=[];t.exports=function(e,t,o){var g=t.signal?i.field(t.signal):null,m=g?g[0]:null,v=t.predicate?e.predicate(t.predicate.name||t.predicate):null,_=t.test?e.expr(t.test):null,y=null===v&&null===_,b=t.type===p,w=i.array(t.field||"data"),S=w.map(i.accessor),k=w.map(i.mutator),E=new u(e).router(b);return E.evaluate=function(u){var E,A;if(null!==v&&(E=e.values(l.DATA,v.data||x),A=e.values(l.SIGNALS,v.signals||x),y=v.call(v,{},E,A,e._predicates)),null!==_&&(A=e.values(l.SIGNALS,_.globals||x),y=_.fn()),a.debug(u,[t.type+"ing",y]),!y||!b&&!u.signals[m])return u;var T,C=g?e.signalRef(t.signal):null,D=e.data(o.name),N=null,F=[],O=[],M=0;return i.isObject(C)?(T=C,!t.field&&(w=i.keys(T),S=w.map(i.accessor),k=w.map(i.mutator))):(T={},k.forEach((function(e){e(T,C)}))),t.type===c?r(u,T,D):t.type===f?(n(S,C,u.mod,u.rem),n(S,C,u.add,O),n(S,C,D._data,O)):t.type===d?(u.mod.forEach((function(e){S.every((function(t){return t(e)===t(T)}))&&(i.extend(e,T),M+=1)})),0==M&&r(u,T,D)):t.type===h?(n(S,C,u.mod,O),u.rem.push.apply(u.rem,O),n(S,C,u.add,F),F.length||O.length?D._data=D._data.filter((function(e){return 0>O.indexOf(e)&&0>F.indexOf(e)})):(u.add.push(N=s.ingest(T)),D._data.push(N))):t.type===p&&(u.rem.push.apply(u.rem,u.mod.splice(0)),u.add.splice(0),D._data.splice(0)),w.forEach((function(e){u.fields[e]=1})),u},m&&E.dependency(l.SIGNALS,m),v&&(E.dependency(l.DATA,v.data),E.dependency(l.SIGNALS,v.signals)),_&&(E.dependency(l.SIGNALS,_.globals),E.dependency(l.DATA,_.dataSources)),E}},{datalib:27,"vega-dataflow":42,"vega-logging":49}],103:[function(e,t){var n=e("datalib");t.exports=function(e){return null==e?"auto":n.isObject(e)?e:n.isNumber(e)?{top:e,left:e,right:e,bottom:e}:"strict"===e?e:"auto"}},{datalib:27}],104:[function(e,t){function n(e,t){var n=o.field(e),r="signals["+n.map(o.str).join("][")+"]";return t[n[0]]=1,r}function r(e,t){function r(e){s[e]=1}function i(e){l[e]=1}var a=[],u=[],s={},l={};return o.array(t).forEach((function(t,l){var c="o"+l,f="";if(void 0!==t.value)f=o.str(t.value);else if(t.arg)f="args["+o.str(t.arg)+"]";else if(t.signal)f=n(t.signal,s);else if(t.predicate){var d=t.predicate,h=d&&(d.name||d),p=e.predicate(h),x="predicates["+o.str(h)+"]";p.signals.forEach(r),p.data.forEach(i),o.isObject(d)&&o.keys(d).forEach((function(e){if("name"!==e){var t=d[e];f+="args["+o.str(e)+"] = ",t.signal?f+=n(t.signal,s):t.arg&&(f+="args["+o.str(t.arg)+"]"),f+=", "}})),f+=x+".call("+x+", args, db, signals, predicates)"}a.push(c),u.push(c+"=("+f+")")})),{code:"var "+a.join(", ")+";\n"+u.join(";\n")+";\n",signals:o.keys(s),data:o.keys(l)}}function i(e,t){var n=r(e,t.operands);return"="===t.type&&(t.type="=="),n.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\no1 = o1 instanceof Date ? o1.getTime() : o1;\n",{code:n.code+"return "+["o0","o1"].join(t.type)+";",signals:n.signals,data:n.data}}function a(e,t){for(var n=r(e,t.operands),i=[],a=0,o=t.operands.length;i.push("o"+a++)<o;);return"and"===t.type?t.type="&&":"or"===t.type&&(t.type="||"),{code:n.code+"return "+i.join(t.type)+";",signals:n.signals,data:n.data}}var o=e("datalib"),u={"=":i,"==":i,"!=":i,">":i,">=":i,"<":i,"<=":i,and:a,"&&":a,or:a,"||":a,in:function(e,t){var n=[t.item],i="";t.range&&n.push.apply(n,t.range),t.scale&&(i=function(e,t){var n="var scale = ",r=t.length;return o.isString(e)?(t.push({value:e}),n+="this.root().scale(o"+r+")"):e.arg?(t.push(e),n+="o"+r):e.name&&(t.push(o.isString(e.name)?{value:e.name}:e.name),n+="(this.isFunction(o"+r+") ? o"+r+" : ",e.scope?(t.push(e.scope),n+="((o"+(r+1)+".scale || this.root().scale)(o"+r+") || this.nullScale)"):n+="this.root().scale(o"+r+")",n+=")"),!0===e.invert&&(n+=".invert"),n+";\n"}(t.scale,n));var a=r(e,n);return i=a.code+i+"\n  var ordSet = null;\n",t.data?(i+="var where = function(d) { return d["+o.field(t.field).map(o.str).join("][")+"] == o0 };\n",i+="return db["+o.str(t.data)+"].filter(where).length > 0;"):t.range&&(t.scale&&(i+="if (scale.length == 2) {\n  ordSet = scale(o1, o2);\n} else {\n  o1 = scale(o1);\no2 = scale(o2);\n}"),i+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;"),{code:i,signals:a.signals,data:a.data.concat(t.data?[t.data]:[])}}},s=function(){return 0};s.invert=s,t.exports=function(e,t){return(t||[]).forEach((function(t){var n=u[t.type](e,t),r=Function("args","db","signals","predicates",n.code);r.root=function(){return e.scene().items[0]},r.nullScale=s,r.isFunction=o.isFunction,r.signals=n.signals,r.data=n.data,e.predicate(t.name,r)})),t}},{datalib:27}],105:[function(e,t){(function(n){function r(e,t){return c.isObject(e)||(e={reflow:!1,nested:[]},h.forEach((function(t){e[t]=[]}))),c.isObject(t)&&(e.reflow=e.reflow||t.reflow,e.nested.push.apply(e.nested,t.nested),h.forEach((function(n){e[n].push.apply(e[n],t[n])}))),e}function i(e,t,n){var r,i,a=n.shape,o=0;if(a&&(r=a.value)){for(t.shape&&t.shape[r]&&(r=t.shape[r]),a="";null!==(i=p.exec(r));)a+=r.substring(o,i.index),a+=e.expr(i[1]).fn(),o=p.lastIndex;n.shape.value=a+r.substring(o)}}function a(e,t,n,i){var a=e.config(),u=r(),s=[],l="";return(n||[]).forEach((function(f,d){var h=o(a,t,f);if(r(u,h),f.test){var p=e.expr(f.test);u.signals.push.apply(u.signals,p.globals),u.data.push.apply(u.data,p.dataSources),l+="if (exprs["+i.length+"](item.datum, item.mark.group.datum, null)) {\n    d += set(o, "+c.str(t)+", "+h.val+");",l+=n[d+1]?"\n  } else ":"  }",i.push(p.fn)}else{var x=f.predicate,g=x&&(x.name||x),m=e.predicate(g),v="predicates["+c.str(g)+"]",_=[],y=t+"_arg"+d;c.isObject(x)&&c.keys(x).forEach((function(e){if("name"!==e){var t=o(a,d,x[e],!0);_.push(c.str(e)+": "+t.val),r(u,t)}})),g?(u.signals.push.apply(u.signals,m.signals),u.data.push.apply(u.data,m.data),s.push(y+" = {\n    "+_.join(",\n    ")+"\n  }"),l+="if ("+v+".call("+v+","+y+", db, signals, predicates)) {\n    d += set(o, "+c.str(t)+", "+h.val+");",l+=n[d+1]?"\n  } else ":"  }"):l+="{\n    d += set(o, "+c.str(t)+", "+h.val+");\n  }\n"}})),s.length&&(l="var "+s.join(",\n      ")+";\n  "+l),u.code=l,u}function o(e,t,n,i){if(null==n)return null;if("fill"===t||"stroke"===t){if(n.c)return u(e,"hcl",n.h,n.c,n.l);if(n.h||n.s)return u(e,"hsl",n.h,n.s,n.l);if(n.l||n.a)return u(e,"lab",n.l,n.a,n.b);if(n.r||n.g||n.b)return u(e,"rgb",n.r,n.g,n.b)}var a=null,o=null,l=r(),f=null,d=null,h=null,p={};return void 0!==n.template&&(a=c.template.source(n.template,"tmpl",p),c.keys(p).forEach((function(e){var t=c.field(e),n=t.shift();"parent"===n||"group"===n?l.nested.push({parent:"parent"===n,group:"group"===n,level:1}):"datum"===n?l.fields.push(t[0]):l.signals.push(n)}))),void 0!==n.value&&(a=c.str(n.value)),void 0!==n.signal&&(a="signals["+(f=c.field(n.signal)).map(c.str).join("][")+"]",l.signals.push(f.shift())),void 0!==n.field&&(n.field=c.isString(n.field)?{datum:n.field}:n.field,a=(d=s(n.field)).val,r(l,d)),void 0!==n.scale&&(o=(h=function(e){var t=null,n=null,i=r();return t="(item.mark._scaleRefs["+(t=c.isString(e)?c.str(e):e.name?c.isString(e.name)?c.str(e.name):(n=s(e.name)).val:(n=s(e)).val)+"] = 1, group.scale("+t+"))",e.invert&&(t+=".invert"),n&&n.nested.forEach((function(e){e.scale=!0})),n?(n.val=t,n):(i.val=t,i)}(n.scale)).val,r(l,h),l.scales.push(n.scale.name||n.scale),null!==a||n.band||n.mult||n.offset||!i?a=o+(n.band?".rangeBand()":"("+(null===a?"item.datum.data":a)+")"):i&&(a=o)),a="("+(n.mult?c.number(n.mult)+" * ":"")+a+")"+(n.offset?" + "+c.number(n.offset):""),l.val=a,l}function u(e,t,n,i,a){var u=n?o(e,"",n):e.color[t][0],s=i?o(e,"",i):e.color[t][1],l=a?o(e,"",a):e.color[t][2],f=r();[u,s,l].forEach((function(e){c.isArray||r(f,e)}));var d="(this.d3."+t+"("+[u.val,s.val,l.val].join(",")+') + "")';return f.val=d,f}function s(e){if(c.isString(e))return{val:c.field(e).map(c.str).join("][")};var t=e.level||1,n=(e.group||e.parent)&&t?Array(t).join("group.mark."):"",i=s(e.datum||e.group||e.parent||e.signal),a=i.val,o=r(null,i);return e.datum?(a="item.datum["+a+"]",o.fields.push(e.datum)):e.group?(a=n+"group["+a+"]",o.nested.push({level:t,group:!0})):e.parent?(a=n+"group.datum["+a+"]",o.nested.push({level:t,parent:!0})):e.signal&&(a="signals["+a+"]",o.signals.push(c.field(e.signal)[0]),o.reflow=!0),o.val=a,o}var l=void 0===window?void 0===n?null:n.d3:window.d3,c=e("datalib"),f=e("vega-logging"),d=e("vega-dataflow").Tuple,h=["signals","scales","data","fields"],p=/{{(.*?)}}/g;t.exports=function(e,t,n){function r(e){if(null!=g[e]){var t,n,r=c.array(g[e]);for(t=0,n=r.length;t<n;++t)w[e][r[t]]=1}}function u(e){var t=(e.parent?"parent_":"group_")+e.level;w._nRefs[t]=e}var s,p,x,g,m=e.config(),v="",_=c.keys(n),y=[],b={},w={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:!1};for(v+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\ntmpl.datum  = item.datum;\ntmpl.group  = group;\ntmpl.parent = group.datum;\n",i(e,m,n),s=0,p=_.length;s<p;++s)v+=0<s?"\n  ":"  ",(g=n[x=_[s]]).rule?v+="\n  "+(g=a(e,x,g.rule,y)).code:c.isArray(g)?v+="\n  "+(g=a(e,x,g,y)).code:(g=o(m,x,g),v+="d += set(o, "+c.str(x)+", "+g.val+");"),b[x]=!0,h.forEach(r),w.reflow=w.reflow||g.reflow,g.nested.length&&g.nested.forEach(u);c.keys(w._nRefs).forEach((function(e){w.nested.push(w._nRefs[e])})),w.nested.sort((function(e,t){return(e=e.level)<(t=t.level)?-1:e>t?1:e>=t?0:NaN})),b.x2&&(b.x?(v+="\n  if (o.x > o.x2) { \n    t = o.x;\n    d += set(o, 'x', o.x2);\n    d += set(o, 'x2', t); \n  };",v+="\n  d += set(o, 'width', (o.x2 - o.x));"):b.width?v+="\n  d += set(o, 'x', (o.x2 - o.width));":v+="\n  d += set(o, 'x', o.x2);"),b.xc&&(b.width?v+="\n  d += set(o, 'x', (o.xc - o.width/2));":v+="\n  d += set(o, 'x', o.xc);"),b.y2&&(b.y?(v+="\n  if (o.y > o.y2) { \n    t = o.y;\n    d += set(o, 'y', o.y2);\n    d += set(o, 'y2', t);\n  };",v+="\n  d += set(o, 'height', (o.y2 - o.y));"):b.height?v+="\n  d += set(o, 'y', (o.y2 - o.height));":v+="\n  d += set(o, 'y', o.y2);"),b.yc&&(b.height?v+="\n  d += set(o, 'y', (o.yc - o.height/2));":v+="\n  d += set(o, 'y', o.yc);"),function(e,t){return t.path||("area"===e||"line"===e)&&(t.x||t.x2||t.width||t.y||t.y2||t.height||t.tension||t.interpolate)}(t,b)&&(v+="\n  d += (item.touch(), 1);"),v+="\n  if (trans) trans.interpolate(item, o);",v+="\n  return d > 0;";try{var S=Function("item","group","trans","db","signals","predicates",v);return S.tpl=d,S.exprs=y,S.util=c,S.d3=l,c.extend(S,c.template.context),{encode:S,signals:c.keys(w.signals),scales:c.keys(w.scales),data:c.keys(w.data),fields:c.keys(w.fields),nested:w.nested,reflow:w.reflow}}catch(t){f.error(t),f.log(v)}}}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{datalib:27,"vega-dataflow":42,"vega-logging":49}],106:[function(e,t){function n(e,t){return(t||[]).forEach((function(t){if(-1!==u.indexOf(t.name))throw Error('Signal name "'+t.name+'" is a reserved keyword ('+u.join(", ")+").");var n=e.signal(t.name,t.init).verbose(t.verbose);t.init&&t.init.expr&&(t.init.expr=e.expr(t.init.expr),n.value(r(e,t.init))),t.expr&&(t.expr=e.expr(t.expr),n.evaluate=function(i){var a=r(e,t),o=i.signals;return(a!==n.value()||n.verbose())&&(n.value(a),o[t.name]=1),o[t.name]?i:e.doNotPropagate},n.dependency(o,t.expr.globals),t.expr.globals.forEach((function(t){e.signal(t).addListener(n)})))})),t}function r(e,t){var r=t.expr.fn();return t.scale?n.scale(e,t,r):r}var i=e("datalib"),a=e("./expr"),o=e("vega-dataflow").Dependencies.SIGNALS,u=["datum","event","signals","width","height","padding"].concat(i.keys(a.codegen.functions));n.scale=function(e,t,n,r,o){var u=t.scale,s=u.name||u.signal||u,l=u.scope;return l&&(l.signal?l=e.signalRef(l.signal):i.isString(l)&&(l=(u._expr=u._expr||e.expr(l)).fn(r,o))),a.scale(e,u.invert,s,n,l)},t.exports=n},{"./expr":97,datalib:27,"vega-dataflow":42}],107:[function(e,t){var n=e("datalib"),r=e("vega-logging"),i=e("../util/theme-val"),a=e("../core/Model"),o=e("../core/View");t.exports=function(t){function u(t){try{t=n.duplicate(t);var r=e("./"),a=i(t,c,"width",500),o=i(t,c,"height",500),u=r.padding(i(t,c,"padding")),f=i(t,c,"background");p.signal("width",a),p.signal("height",o),p.signal("padding",u),s(t),p.defs({width:a,height:o,padding:u,viewport:t.viewport||null,background:r.background(f),signals:r.signals(p,t.signals),predicates:r.predicates(p,t.predicates),marks:r.marks(p,t,a,o),data:r.data(p,t.data,l)})}catch(e){l(e)}}function s(e){var t,n=e.signals||(e.signals=[]);n.some((function(e){return"cursor"===e.name&&(t=e,!0)})),t||n.push(t={name:"cursor",streams:[]}),t.init=t.init||{},t.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}function l(e){var t;e?r.error(e):t=x(p.buildIndexes()),h&&(1<h.length?h(e,t):!e&&h(t),h=null)}var c,f=arguments.length,d=2,h=arguments[f-1],p=new a,x=o.factory;if(f>d&&n.isFunction(arguments[f-d])&&(x=arguments[f-d],++d),f>d&&n.isObject(arguments[f-d])&&p.config(arguments[f-d]),c=p.config(),n.isObject(t))u(t);else if(n.isString(t)){var g=n.extend({url:t},c.load);n.json(g,(function(e,t){e?l("SPECIFICATION LOAD FAILED: "+e):u(t)}))}else l("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}},{"../core/Model":90,"../core/View":91,"../util/theme-val":150,"./":98,datalib:27,"vega-logging":49}],108:[function(e,t){(function(n){var r=void 0===window?void 0===n?null:n.d3:window.d3,i=e("datalib"),a=e("vega-dataflow"),o=e("vega-event-selector"),u=e("./signals"),s={getItem:function(){return this.item},getGroup:function(e){var t=e?this.name[e]:this.group,n=t&&t.mark;return n&&(n.interactive||void 0===n.interactive)?t:{}},getXY:function(e){var t={x:this.x,y:this.y};for("string"==typeof e&&(e=this.name[e]);e;e=e.mark&&e.mark.group)t.x-=e.x||0,t.y-=e.y||0;return t},getX:function(e){return this.getXY(e).x},getY:function(e){return this.getXY(e).y}};t.exports=function(e){function t(t,n){var i,a,o,u=r.mouse((r.event=t,e.renderer().scene())),l=e.padding(),c={};if(n)for(a="group"===(i=n.mark).marktype?n:i.group,o=n;null!=o;o=o.mark.group)o.mark.def.name&&(c[o.mark.def.name]=o);c.root=e.model().scene().items[0],t.vg=Object.create(s),t.vg.group=a,t.vg.item=n||{},t.vg.name=c,t.vg.x=u[0]-l.left,t.vg.y=u[1]-l.top}function n(e,t,n,r,i){function o(e){return!e.fn(n,r,i)}var s,l,f,d,h=e.handlers[t],p=e.nodes[t],x=a.ChangeSet.create(null,!0);for(l=0,f=h.length;l<f;++l)(d=h[l]).filters.some(o)||(s=d.exp.fn(n,r,i),d.spec.scale&&(s=u.scale(c,d.spec,s,n,i)),(s!==d.signal.value()||d.signal.verbose())&&(d.signal.value(s),x.signals[d.signal.name()]=1));c.propagate(x,p)}function l(e,t,n,r){t.forEach((function(t){t.event?function(e,t,n,r){var o=t.event,u=t.name,s=t.mark,l=t.target,f=i.array(t.filters),d=l?g:x,h=l?l+":"+o:o,p=d.nodes[h]||(d.nodes[h]=new a.Node(c)),m=d.handlers[h]||(d.handlers[h]=[]);u?f.push('!!event.vg.name["'+u+'"]'):s&&f.push("event.vg.item.mark && event.vg.item.mark.marktype==="+i.str(s)),m.push({signal:e,exp:n,spec:r,filters:f.map((function(e){return c.expr(e)}))}),p.addListener(e)}(e,t,n,r):t.signal?function(e,t,n,r){var i=e.name(),o=c.signal(i+"_vgEVALUATOR",null);o.evaluate=function(a){if(!a.signals[t.signal])return c.doNotPropagate;var o=n.fn();return r.scale&&(o=u.scale(c,r,o)),(o!==e.value()||e.verbose())&&(e.value(o),a.signals[i]=1,a.reflow=!0),a},o.dependency(a.Dependencies.SIGNALS,t.signal),o.addListener(e),c.signal(t.signal).addListener(o)}(e,t,n,r):t.start?function(e,t,n,r){var i=e.name()+"_vgGATEKEEPER",a=t.middle,o=a.filters||(a.filters=[]),u=c.signal(i)||c.signal(i,!1);l(u,[t.start],f,{}),l(u,[t.end],d,{}),o.push(u.name()),l(e,[t.middle],n,r)}(e,t,n,r):t.stream&&(t.filters&&t.stream.forEach((function(e){e.filters=i.array(e.filters).concat(t.filters)})),l(e,t.stream,n,r))}))}var c=e.model(),f=c.expr("true"),d=c.expr("false"),h=c.defs().signals,p={handlers:{},nodes:{}},x=i.duplicate(p),g=i.duplicate(p);return i.array(h).forEach((function(e){var t=c.signal(e.name);e.expr||i.array(e.streams).forEach((function(e){var n=o.parse(e.type),r=c.expr(e.expr);l(t,n,r,e)}))})),i.keys(x.handlers).forEach((function(r){e.on(r,(function(e,i){e.preventDefault(),t(e,i),n(x,r,i&&i.datum||{},i&&i.mark&&i.mark.group&&i.mark.group.datum||{},e)}))})),i.keys(g.handlers).forEach((function(e){function i(i){t(i),n(g,e,r.select(this).datum(),this.parentNode&&r.select(this.parentNode).datum(),i)}if(void 0!==window){for(var a=g.handlers[e],o=e.split(":"),u="window"===o[0]?[window]:window.document.querySelectorAll(o[0]),s=0;s<u.length;++s)u[s].addEventListener(o[1],i);a.elements=u,a.listener=i}})),g.detach=function(){i.keys(g.handlers).forEach((function(e){for(var t=g.handlers[e],n=e.split(":"),r=i.array(t.elements),a=0;a<r.length;++a)r[a].removeEventListener(n[1],t.listener)}))},g.detach}}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./signals":106,datalib:27,"vega-dataflow":42,"vega-event-selector":43}],109:[function(e,t){var n=e("datalib"),r=e("../transforms/index");t.exports=function(e,t){var i,a=r[t.type];if(!a)throw new Error('"'+t.type+'" is not a valid transformation');return i=new a(e),t.output&&i.output(t.output),n.keys(t).forEach((function(e){"type"===e||"output"===e||i.param(e,t[e])})),i}},{"../transforms/index":146,datalib:27}],110:[function(e,t){function n(e,t){return this._mark=t,o.prototype.init.call(this,e).router(!0).reflows(!0).mutates(!0)}var r=e("datalib"),i=e("vega-dataflow"),a=e("vega-scenegraph"),o=i.Node,u=e("vega-logging"),s=a.bound,l=a.Bounds,c=e("./Encoder");(n.prototype=new o).evaluate=function(e){u.debug(e,["bounds",this._mark.marktype]);var t,n,a,o,f,d,h=this._mark,p=h.marktype,x="group"===p,g=h.items,m=0<r.array(h.def.legends).length,v=h.bounds,_=!v||e.rem.length;if("line"===p||"area"===p)s.mark(h,null,x&&!m);else if(e.add.forEach((function(e){s.item(e),_=_||v&&!v.encloses(e.bounds)})),e.mod.forEach((function(e){_=_||v&&v.alignsWith(e.bounds),s.item(e)})),_)for(v=h.bounds&&h.bounds.clear()||(h.bounds=new l),t=0,n=g.length;t<n;++t)v.union(g[t].bounds);if(x&&m){for(t=0,n=g.length;t<n;++t)for((f=g[t])._legendPositions=null,a=0,o=f.legendItems.length;a<o;++a)d=f.legendItems[a],c.update(this._graph,e.trans,"legendPosition",d.items,e.dirty),s.mark(d,null,!1);s.mark(h,null,!0)}return i.ChangeSet.create(e,!0)},t.exports=n},{"./Encoder":112,datalib:27,"vega-dataflow":42,"vega-logging":49,"vega-scenegraph":50}],111:[function(e,t){function n(){return arguments.length?this.init.apply(this,arguments):this}function r(){var e,t,n,r,i,a,o,u=this._def.from,s=u.mark;if(s)e=(r=this.sibling(s))._isSuper?r:r._bounder,n={name:t=["vg",this._parent_id,s,e.listeners(!0).length].join("_"),transform:u.transform,modify:u.modify};else{if(!(e=this._graph.data(this._from)))throw Error('Data source "'+this._from+'" is not defined.');n={name:t=["vg",this._from,this._def.type,e.listeners(!0).length].join("_"),source:this._from,transform:u.transform,modify:u.modify}}this._from=t,this._ds=v.datasource(this._graph,n),s?((o=new f(this._graph).addListener(this._ds.listener())).evaluate=function(e){var t=p.create(e),n=r._output;return t.add=n.add,t.mod=n.mod,t.rem=n.rem,t},e.addListener(o)):(i=this._ds.source().last(),(a=p.create(i)).add=i.add,a.mod=i.mod,a.rem=i.rem,a.stamp=null,this._graph.propagate(a,this._ds.listener(),i.stamp))}function i(){var e=h.ingest(new l(this._mark));return this._def.width&&h.set(e,"width",this._def.width),this._def.height&&h.set(e,"height",this._def.height),e}function a(e,t,n,r,a){var u,s,l,c,f,d,p,x=o(this._def.key||(r?"_id":null)),g=this._mark.items||[],m=r?e.rem:g,v=h.idMap(!r||a?n:e.mod),y=[];for(u=0,l=m.length;u<l;++u)(c=m[u]===g[u]?g[u]:x?this._map[x(m[u])]:m[u]).status=_.EXIT;for(u=0,l=n.length;u<l;++u)f=n[u],d=!(c=x?this._map[s=x(f)]:g[u])&&(c=i.call(this),!0),c.status=d?_.ENTER:_.UPDATE,p=!d&&c.datum!==f,c.datum=f,x&&(h.set(c,"key",s),this._map[s]=c),d?t.add.push(c):(p||v[f._id])&&t.mod.push(c),y.push(c);for(u=0,l=m.length;u<l;++u)(c=m[u]===g[u]?g[u]:x?this._map[s=x(m[u])]:m[u]).status===_.EXIT&&(c._dirty=!0,e.dirty.push(c),y.push(c),t.rem.push(c),x&&(this._map[s]=null));return this._mark.items=y,t}function o(e){if(null==e)return null;var t=u.array(e).map(u.accessor);return function(e){for(var n="",r=0,i=t.length;r<i;++r)0<r&&(n+="|"),n+=t[r](e)+"";return n}}var u=e("datalib"),s=e("vega-logging"),l=e("vega-scenegraph").Item,c=e("vega-dataflow"),f=c.Node,d=c.Dependencies,h=c.Tuple,p=c.ChangeSet,x={},g=e("./Encoder"),m=e("./Bounder"),v=e("../parse/data"),_=n.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"},y=n.prototype=new f;y.init=function(e,t,n,i,a,o){return f.prototype.init.call(this,e).router(!0).collector(!0),this._def=t,this._mark=n,this._from=(t.from?t.from.data:null)||o,this._ds=u.isString(this._from)?e.data(this._from):null,this._map={},this._status=null,n.def=t,n.marktype=t.type,n.interactive=!1!==t.interactive,n.items=[],u.isValid(t.name)&&(n.name=t.name),this._parent=i,this._parent_id=a,t.from&&(t.from.mark||t.from.transform||t.from.modify)&&r.call(this),this._isSuper="group"!==this._def.type,this._encoder=new g(this._graph,this._mark,this),this._bounder=new m(this._graph,this._mark),this._output=null,this._ds&&this._encoder.dependency(d.DATA,this._from),this.dependency(d.DATA,this._encoder.dependency(d.DATA)),this.dependency(d.SCALES,this._encoder.dependency(d.SCALES)),this.dependency(d.SIGNALS,this._encoder.dependency(d.SIGNALS)),this},y.ds=function(){return this._ds},y.parent=function(){return this._parent},y.encoder=function(){return this._encoder},y.pipeline=function(){return[this]},y.connect=function(){var e=this;return this._graph.connect(this.pipeline()),this._encoder._scales.forEach((function(t){(t=e._parent.scale(t))&&t.addListener(e)})),this._parent&&(this._isSuper?this.addListener(this._parent._collector):this._bounder.addListener(this._parent._collector)),this._status=1,this},y.disconnect=function(){function e(e){for(var n,r=0,i=e.length;r<i;++r)(n=t._parent.scale(e[r]))&&n.removeListener(t)}var t=this;return this._listeners.length?(f.prototype.disconnect.call(this),this._graph.disconnect(this.pipeline()),e(this._encoder._scales),e(u.keys(this._mark._scaleRefs)),this._status=2,this):this},y.sibling=function(e){return this._parent.child(e,this._parent_id)},y.evaluate=function(e){s.debug(e,["building",this._from||this._def.from,this._def.type]);var t,n,r,i,o=this,l=(this._mark.def.properties||{}).update||{},c=p.create(e);if(this._ds){if(r=c.data[i=this._ds.name()],c.data[i]=null,t=this._encoder.reevaluate(c),c.data[i]=r,!(n=this._ds.last()))throw Error("Builder evaluated before backing DataSource.");n.stamp>this._stamp?a.call(this,n,c,this._ds.values(),!0,t):t&&(c.mod=this._mark.items.slice())}else r=u.isFunction(this._def.from)?this._def.from():[x],a.call(this,e,c,r);return this._output=c=this._graph.evaluate(c,this._encoder),l.nested&&l.nested.length&&1===this._status&&u.keys(this._mark._scaleRefs).forEach((function(e){var t=o._parent.scale(e);t&&(t.addListener(o),o.dependency(d.SCALES,e),o._encoder.dependency(d.SCALES,e))})),this._isSuper&&(c.mod=c.mod.filter((function(e){return e._dirty})),c=this._graph.evaluate(c,this._bounder)),c},t.exports=n},{"../parse/data":96,"./Bounder":110,"./Encoder":112,datalib:27,"vega-dataflow":42,"vega-logging":49,"vega-scenegraph":50}],112:[function(e,t){function n(e,t,n){var r=t.def.properties||{},i=r.enter,a=r.update,o=r.exit;l.prototype.init.call(this,e),this._mark=t,this._builder=n;var u=this._scales=[];return i&&u.push.apply(u,i.scales),a&&(this.dependency(c.DATA,a.data),this.dependency(c.SIGNALS,a.signals),this.dependency(c.FIELDS,a.fields),this.dependency(c.SCALES,a.scales),u.push.apply(u,a.scales)),o&&u.push.apply(u,o.scales),this.mutates(!0)}function r(e,t,n,r){var i,a,o,u=n.add.length;return(i=r.enter)&&(a=i[e]).length&&u&&(o=t.values(e,a,o=o||{})),(i=r.exit)&&(a=i[e]).length&&n.rem.length&&(o=t.values(e,a,o=o||{})),(i=r.update)&&(a=i[e]).length&&(u||n.mod.length)&&(o=t.values(e,a,o=o||{})),o||d}function i(e,t,n,r,i,a,o){var u=e.encode,s=t._dirty,l=u.call(u,t,t.mark.group||t,n,r,i,a);t._dirty=l||s,l&&!s&&o.push(t)}function a(){for(var e,t,n=this._mark.def.properties.update.nested,r=this._builder,i=0,a=0,o=n.length;a<o;++a)if(!(e=n[a]).scale){for(;i<e.level;++i)t=(r=r.parent()).ds();if((e.group?r.encoder():t.last())._stamp>this._stamp)return!0}return!1}var o=e("datalib"),u=e("vega-logging"),s=e("vega-dataflow"),l=s.Node,c=s.Dependencies,f=e("vega-scenegraph").bound,d={},h=n.prototype=new l;h.evaluate=function(t){u.debug(t,["encoding",this._mark.def.type]);var n,a,o,s,l=this._graph,f=this._mark.def.properties||{},h=this._mark.items,p=f.enter,x=f.update,g=f.exit,m=t.dirty,v=l.predicates(),_=t.request,y=this._mark.group,b=y&&(y.mark.axis||y.mark.legend),w=d,S=d;if(_&&!b){if((s=f[_])&&t.mod.length)for(w=s.data?l.values(c.DATA,s.data):null,S=s.signals?l.values(c.SIGNALS,s.signals):null,n=0,a=t.mod.length;n<a;++n)o=t.mod[n],i.call(this,s,o,t.trans,w,S,v,m);return t}for(w=r(c.DATA,l,t,f),S=r(c.SIGNALS,l,t,f),n=0,a=t.rem.length;n<a;++n)o=t.rem[n],g&&i.call(this,g,o,t.trans,w,S,v,m),t.trans&&!g?t.trans.interpolate(o,d):!t.trans&&h.pop();var k=e("./Builder").STATUS.UPDATE;for(n=0,a=t.add.length;n<a;++n)o=t.add[n],p&&i.call(this,p,o,t.trans,w,S,v,m),x&&i.call(this,x,o,t.trans,w,S,v,m),o.status=k;if(x)for(n=0,a=t.mod.length;n<a;++n)o=t.mod[n],i.call(this,x,o,t.trans,w,S,v,m);return t},h.reevaluate=function(e){var t=this._mark.def,n=t.properties||{};return o.isFunction(t.from)||t.orient||e.request||l.prototype.reevaluate.call(this,e)||!!n.update&&a.call(this)},n.update=function(e,t,n,r,a){r=o.array(r);var u,s,l,d,h,p=e.predicates(),x=e.values(c.DATA),g=e.values(c.SIGNALS);for(u=0,s=r.length;u<s;++u)(h=(d=(l=r[u]).mark.def.properties)&&d[n])&&(i.call(null,h,l,t,x,g,p,a),f.item(l))},t.exports=n},{"./Builder":111,datalib:27,"vega-dataflow":42,"vega-logging":49,"vega-scenegraph":50}],113:[function(e,t){function n(){return this._children={},this._scaler=null,this._recursor=null,this._scales={},this.scale=i.bind(this),arguments.length?this.init.apply(this,arguments):this}function r(e){function t(e){e.type!=y.MARK||e.inline||void 0===g._graph.data(e.from)||g._recursor.removeListener(e.builder)}function n(t){var n=t.scale();e.scales[n.scaleName]&&t.reset().def()}function r(t){var n=t.size()||t.shape()||t.fill()||t.stroke()||t.opacity();e.scales[n.scaleName]&&t.reset().def()}function i(e){g._recursor.removeListener(e.builder),e.builder.disconnect()}var a,c,f,d,h,p,x,g=this,m=0<l.array(this._def.marks).length,v=0<l.array(this._def.axes).length,_=0<l.array(this._def.legends).length,b=!1;for(a=0,d=e.add.length;a<d;++a)h=e.add[a],m&&o.call(this,e,h),v&&u.call(this,e,h),_&&s.call(this,e,h);for(a=e.add.length-1;0<=a;--a)for(h=e.add[a],c=this._children[h._id].length-1;0<=c;--c)(f=this._children[h._id][c]).builder.connect(),p=f.builder.pipeline(),b=(b=(b=(b=(x=f.builder._def).type!==y.GROUP)&&void 0!==this._graph.data(f.from))&&1===p[p.length-1].listeners().length)&&x.from&&!x.from.mark,f.inline=b,b?this._graph.evaluate(e,f.builder):this._recursor.addListener(f.builder);for(a=0,d=e.mod.length;a<d;++a)h=e.mod[a],m&&g._children[h._id].forEach(t),v&&h.axes.forEach(n),_&&h.legends.forEach(r);for(a=0,d=e.rem.length;a<d;++a)h=e.rem[a],g._children[h._id].forEach(i),delete g._children[h._id];return e}function i(e,t){var n=this,r=null;if(2===arguments.length)return n._scales[e]=t,t;for(;null==r&&(r=n._scales[e],n=n.mark?n.mark.group:n._parent););return r}function a(e,t){x.debug(e,["building group",t._id]),t._scales=t._scales||{},t.scale=i.bind(t),t.items=t.items||[],this._children[t._id]=this._children[t._id]||[],t.axes=t.axes||[],t.axisItems=t.axisItems||[],t.legends=t.legends||[],t.legendItems=t.legendItems||[],this._graph.group(t._id,t)}function o(e,t){x.debug(e,["building children marks #"+t._id]);var r,i,a,o,u,s,l=this._def.marks;for(o=0,u=l.length;o<u;++o)i=(r=l[o]).from||{},a=t.datum._facetID,t.items[o]={group:t,_scaleRefs:{}},(s=r.type===y.GROUP?new n:new g).init(this._graph,r,t.items[o],this,t._id,a),this._children[t._id].push({builder:s,from:i.data||(i.mark?"vg_"+t._id+"_"+i.mark:a),type:y.MARK})}function u(e,t){var r=t.axes,i=t.axisItems,a=this;v(this._graph,this._def.axes,r,t),r.forEach((function(e,r){var o=a._def.axes[r].scale,u=e.def(),s=null;i[r]={group:t,axis:e,layer:u.layer},(s=u.type===y.GROUP?new n:new g).init(a._graph,u,i[r],a).dependency(d.SCALES,o),a._children[t._id].push({builder:s,type:y.AXIS,scale:o})}))}function s(e,t){var r=t.legends,i=t.legendItems,a=this;_(this._graph,this._def.legends,r,t),r.forEach((function(e,r){var o=e.size()||e.shape()||e.fill()||e.stroke()||e.opacity(),u=e.def(),s=null;i[r]={group:t,legend:e},(s=u.type===y.GROUP?new n:new g).init(a._graph,u,i[r],a).dependency(d.SCALES,o),a._children[t._id].push({builder:s,type:y.LEGEND,scale:o})}))}var l=e("datalib"),c=e("vega-dataflow"),f=c.Node,d=c.Dependencies,h=c.Tuple,p=c.Collector,x=e("vega-logging"),g=e("./Builder"),m=e("./Scale"),v=e("../parse/axes"),_=e("../parse/legends"),y=n.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"},b=n.prototype=new g;b.init=function(e,t){var n,i=this;this._scaler=new f(e),(t.scales||[]).forEach((function(t){t=i.scale(n=t.name,new m(e,t,i)),i.scale(n+":prev",t),i._scaler.addListener(t)})),this._recursor=new f(e),this._recursor.evaluate=r.bind(this);var a=(t.axes||[]).reduce((function(e,t){return e[t.scale]=1,e}),{});return a=(t.legends||[]).reduce((function(e,t){return e[t.size||t.shape||t.fill||t.stroke||t.opacity]=1,e}),a),this._recursor.dependency(d.SCALES,l.keys(a)),this._collector=new p(e),g.prototype.init.apply(this,arguments)},b.evaluate=function(){var e=g.prototype.evaluate.apply(this,arguments),t=this._graph,n=this,r=this._scales,i=this._mark.items;if(e.mod.length<i.length){var o=l.keys(r).some((function(t){return r[t].reevaluate(e)}));!o&&this._def.axes&&(o=this._def.axes.reduce((function(t,n){return t||e.scales[n.scale]}),!1)),!o&&this._def.legends&&(o=this._def.legends.reduce((function(t,n){return t||e.scales[n.size||n.shape||n.fill||n.stroke]}),!1)),o&&(e.mod=e.mod.concat(h.idFilter(i,e.mod,e.add,e.rem)))}return e.add.forEach((function(t){a.call(n,e,t)})),e.rem.forEach((function(e){t.group(e._id,null)})),e},b.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]},b.disconnect=function(){var e=this;return l.keys(e._children).forEach((function(t){e._children[t].forEach((function(t){e._recursor.removeListener(t.builder),t.builder.disconnect()}))})),e._children={},g.prototype.disconnect.call(this)},b.child=function(e,t){for(var n,r=this._children[t],i=0,a=r.length;i<a&&((n=r[i]).type!=y.MARK||n.builder._def.name!=e);++i);return n.builder},t.exports=n},{"../parse/axes":94,"../parse/legends":99,"./Builder":111,"./Scale":114,datalib:27,"vega-dataflow":42,"vega-logging":49}],114:[function(e,t){(function(n){function r(e,t,n){return this._def=t,this._parent=n,this._updated=!1,k.prototype.init.call(this,e).reflows(!0)}function i(e){var t=this._def.name,n=t+":prev",r=a.call(this,e.scale(t)),i=r.type===C.ORDINAL?o:u,s=_.call(this,e);return i.call(this,r,s,e),e.scale(t,r),e.scale(n,e.scale(n)||r),r}function a(e){var t=this._graph.config(),n=this._def.type||C.LINEAR;if(!e||n!==e.type){var r=t.scale[n]||y.scale[n];if(!r)throw Error("Unrecognized scale type: "+n);(e=r()).type=e.type||n,e.scaleName=this._def.name,e._prev={}}return e}function o(e,t,n){var r,i=this._def,a=e._prev,o=!1,u=m.call(this,i.padding)||0,s=null==i.outerPadding?u:m.call(this,i.outerPadding),l=i.points&&m.call(this,i.points),c=m.call(this,i.round)||null==i.round,f=!0;if(b.isObject(i.range)&&!b.isArray(i.range)&&(o=!0,t=g.call(this,D.RANGE,i.range,e,n)),(r=g.call(this,D.DOMAIN,i.domain,e,n))&&!b.equal(a.domain,r)&&(e.domain(r),a.domain=r,this._updated=!0),!b.equal(a.range,t)){if(i.bandSize){var d,h=m.call(this,i.bandSize),p=r.length,x=i.points?u*h:u*h*(p-1)+2*s;t=t[0]>t[1]?[(d=t[1]||0)+(h*p+x),d]:[d=t[0]||0,d+(h*p+x)],i.reverse&&(t=t.reverse())}"string"==typeof t[0]||2<t.length||1===t.length||o?(e.range(t),f=!1):l&&c?e.rangeRoundPoints(t,u):l?e.rangePoints(t,u):c?e.rangeRoundBands(t,u,s):e.rangeBands(t,u,s),a.range=t,this._updated=!0}!e.invert&&f&&function(e){e.invert=function(t,n){var r=e.range(),i=r[0]<r[1],a=i?O:M;if(1===arguments.length){if(!b.isNumber(t))throw Error("Ordinal scale inversion is only supported for numeric input ("+t+").");return e.domain()[a(r,t)]}if(2===arguments.length){if(!b.isNumber(t)||!b.isNumber(n))throw Error("Extents to ordinal invert are not numbers ("+t+", "+n+").");var o=e.domain(),u=a(r,t),s=a(r,n),l=r.length-1;return s<u&&(s=u=s),0>u&&(u=0),s>l&&(s=l),(i?b.range(u,s+1):b.range(s,u-1,-1)).map((function(e){return o[e]}))}}}(e)}function u(e,t,n){var r,i,a=this._def,o=e._prev,u=m.call(this,a.round),s=m.call(this,a.exponent),l=m.call(this,a.clamp),c=m.call(this,a.nice);(r=a.type===C.QUANTILE?g.call(this,D.DOMAIN,a.domain,e,n):v.call(this,e,n))&&!b.equal(o.domain,r)&&(e.domain(r),o.domain=r,this._updated=!0),"height"===m.call(this,a.range)&&(t=t.reverse()),t&&!b.equal(o.range,t)&&(e[u&&e.rangeRound?"rangeRound":"range"](t),o.range=t,this._updated=!0),s&&a.type===C.POWER&&e.exponent(s),l&&e.clamp(!0),c&&(a.type===C.TIME?(!(i=y.time[c])&&S.error("Unrecognized interval: "+i),e.nice(i)):e.nice())}function s(e){return e.type===C.ORDINAL||e.type===C.QUANTILE}function c(e){return e.fields||b.array(e)}function d(e){return e.some((function(e){return!e.data||e.data&&b.array(e.field).some((function(e){return e.parent}))}))}function h(e,t){return b.array(e.field).map((function(e){return e.parent?b.accessor(e.parent)(t.datum):e}))}function p(e,t){var n=c(e);return 1==n.length&&1==b.array(n[0].field).length?A.TYPES.TUPLE:s(t)&&b.isObject(e.sort)?A.TYPES.MULTI:A.TYPES.VALUE}function x(e,t,n,r){var i=c(t),a=d(i),o=p(t,n),u=s(n),l=t.sort,f="_"+e,x=h(i[0],r);if(n[f]||this[f])return n[f]||this[f];var g,m,v=new A(this._graph).type(o);return a?n[f]=v:this[f]=v,u?o===A.TYPES.VALUE?(g=[{name:D.GROUPBY,get:b.identity}],m={"*":D.COUNT}):o===A.TYPES.TUPLE?(g=[{name:D.GROUPBY,get:b.$(x[0])}],m=b.isObject(l)?[{field:D.VALUE,get:b.$(l.field),ops:[l.op]}]:{"*":D.COUNT}):(g=D.GROUPBY,m=[{field:D.VALUE,ops:[l.op]}]):(g=[],m=[{field:D.VALUE,get:o==A.TYPES.TUPLE?b.$(x[0]):b.identity,ops:[D.MIN,D.MAX],as:[D.MIN,D.MAX]}]),v.param("groupby",g).param("summarize",m),v._lastUpdate=-1,v}function g(e,t,n,r){function i(e){S.dependency(E.SIGNALS,e)}if(null==t)return[];if(b.isArray(t))return t.map(m.bind(this));var a,o,u,l,f,g,v,_,y,w,S=this,k=this._graph,T=c(t),C=d(T),N=p(t,n),F=x.apply(this,arguments),O=t.sort,M=s(n);if(C||!C&&F._lastUpdate<this._stamp){for(a=0,o=T.length;a<o;++a)if(y=(f=T[a]).data||r.datum._facetID,!((_=k.data(y).last()).stamp<=this._stamp)){for(u=0,l=(g=h(f,r)).length;u<l;++u)v=g[u],N===A.TYPES.VALUE?F.accessors(null,v):N===A.TYPES.MULTI&&F.accessors(v,f.sort||O.field),F.evaluate(_);this.dependency(E.DATA,y),F.dependency(E.SIGNALS).forEach(i)}F._lastUpdate=this._stamp,_=F.aggr().result(),M?(b.isObject(O)?(w=O.op+"_"+D.VALUE,w=b.comparator(w)):!0===O&&(w=b.comparator(D.GROUPBY)),w&&(_=_.sort(w)),F._values=_.map((function(e){return e[D.GROUPBY]}))):(_=_[0],F._values=b.isValid(_)?[_[D.MIN],_[D.MAX]]:[])}return F._values}function m(e){if(!e||!e.signal)return e;var t,n=e.signal;return this.dependency(E.SIGNALS,(t=b.field(n))[0]),this._graph.signalRef(t)}function v(e,t){var n,r,i=this._def,a=[null,null];return void 0!==i.domain&&(a=b.isObject(i.domain)?g.call(this,D.DOMAIN,i.domain,e,t):a),r=a.length-1,void 0!==i.domainMin&&(b.isObject(i.domainMin)?i.domainMin.signal?a[0]=b.isValid(n=m.call(this,i.domainMin))?n:a[0]:a[0]=g.call(this,D.DOMAIN+D.MIN,i.domainMin,e,t)[0]:a[0]=i.domainMin),void 0!==i.domainMax&&(b.isObject(i.domainMax)?i.domainMax.signal?a[r]=b.isValid(n=m.call(this,i.domainMax))?n:a[r]:a[r]=g.call(this,D.DOMAIN+D.MAX,i.domainMax,e,t)[1]:a[r]=i.domainMax),i.type!==C.LOG&&i.type!==C.TIME&&i.type!==C.TIME_UTC&&(i.zero||void 0===i.zero)&&(a[0]=l(0,a[0]),a[r]=f(0,a[r])),a}function _(e){var t=this._def,n=this._graph.config(),r=m.call(this,t.range),i=[null,null];if(void 0!==r)if("string"==typeof r)if(T[r])i=[0,e[r]];else{if(!n.range[r])return S.error("Unrecogized range: "+r),i;i=n.range[r]}else if(b.isArray(r))i=b.duplicate(r).map(m.bind(this));else{if(b.isObject(r))return null;i=[0,r]}if(void 0!==t.rangeMin&&(i[0]=t.rangeMin.signal?m.call(this,t.rangeMin):t.rangeMin),void 0!==t.rangeMax&&(i[i.length-1]=t.rangeMax.signal?m.call(this,t.rangeMax):t.rangeMax),void 0!==t.reverse){var a=m.call(this,t.reverse);b.isObject(a)&&(a=b.accessor(a.field)(e.datum)),a&&(i=i.reverse())}var o=i[0],u=i[i.length-1];return(null===o&&null!==u||null!==o&&null===u)&&S.error('Range is underspecified. Please ensure either the "range" property or both "rangeMin" and "rangeMax" are specified.'),i}var y=void 0===window?void 0===n?null:n.d3:window.d3,b=e("datalib"),w=e("vega-dataflow"),S=e("vega-logging"),k=w.Node,E=w.Dependencies,A=e("../transforms/Aggregate"),T={width:1,height:1},C={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"},D={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"},N=r.prototype=new k;N.evaluate=function(e){var t=this,n=function(e){i.call(t,e)};return this._updated=!1,e.add.forEach(n),e.mod.forEach(n),this._updated&&(e.scales[this._def.name]=1,S.debug(e,["scale",this._def.name])),w.ChangeSet.create(e,!0)},N.dependency=function(e,t){if(2==arguments.length)for(var n=e===E.DATA?"data":"signal",r=0,i=(t=b.array(t)).length;r<i;++r)this._graph[n](t[r]).addListener(this._parent);return k.prototype.dependency.call(this,e,t)};var F=y.bisector(b.numcmp).right,O=function(e,t){return F(e,t)-1},M=y.bisector((function(e,t){return-1*b.numcmp(e,t)})).left;t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"../transforms/Aggregate":119,datalib:27,"vega-dataflow":42,"vega-logging":49}],115:[function(e,t){(function(n){function r(e,t){this.duration=e||500,this.ease=t&&a.ease(t)||a.ease("cubic-in-out"),this.updates={next:null}}function i(e){for(var t,n,r,i,a,u=this.updates,l=u.next,c=this.duration,f=!0;null!=l;l=(u=l).next)if(0>(n=(e-((t=l.item).delay||0))/c))f=!1;else{for(1<n&&(n=1),r=l.ease(n),i=0,a=l.length;i<a;++i)t[l[i].property]=l[i](r);t.touch(),o.item(t),1===n?(l.remove&&(t.status=s.EXIT,t.remove()),u.next=l.next,l=u):f=!1}return this.callback(),f}var a=void 0===window?void 0===n?null:n.d3:window.d3,o=e("vega-scenegraph").bound,u=e("vega-dataflow").Tuple,s=e("./Builder").STATUS,l=r.prototype,c={text:1,url:1};l.interpolate=function(e,t){var n,r,i,o,l=null;for(n in t)(r=e[n])!==(i=t[n])&&(c[n]||void 0===r?u.set(e,n,i):"number"!=typeof r||isFinite(r)?((o=a.interpolate(r,i)).property=n,(l||(l=[])).push(o)):u.set(e,n,i));return null===l&&e.status===s.EXIT&&(l=[]),null!=l&&(l.item=e,l.ease=e.mark.ease||this.ease,l.next=this.updates.next,this.updates.next=l),this},l.start=function(e){for(var t=this,n=t.updates,r=n.next;null!=r;r=(n=r).next)r.item.status===s.EXIT&&(r.item.status=s.UPDATE,r.remove=!0);t.callback=e,a.timer((function(e){return i.call(t,e)}))},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./Builder":111,"vega-dataflow":42,"vega-scenegraph":50}],116:[function(e,t){function n(e,t,n){var i=[];if(n&&1<t.length){for(var a,o,u=r(e.domain()),s=-1,l=t.length,c=(t[1]-t[0])/++n;++s<l;)for(a=n;0<--a;)(o=+t[s]-a*c)>=u[0]&&i.push(o);for(--s,a=0;++a<n&&(o=+t[s]+a*c)<u[1];)i.push(o)}return i}function r(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function i(e){return e.rangeExtent?e.rangeExtent():r(e.range())}function a(e,t,n,r,i,a){i=f(i,0)+a,("left"===e||"top"===e)&&(i*=-1),"top"===e||"bottom"===e?(c.extend(t.properties.enter,{x:n,y:{value:i}}),c.extend(t.properties.update,{x:r,y:{value:i},align:{value:"center"},baseline:{value:v[e]}})):(c.extend(t.properties.enter,{x:{value:i},y:n}),c.extend(t.properties.update,{x:{value:i},y:r,align:{value:m[e]},baseline:{value:"middle"}}))}function o(e,t,n,r,i,a,o,u){var s="left"===e||"top"===e?-1:1;if(i=i===1/0?"top"===e||"bottom"===e?{field:{group:"height",level:2},mult:-s,offset:u*-s}:{field:{group:"width",level:2},mult:-s,offset:u*-s}:{value:s*i,offset:u},"between"===o.tickPlacement&&"ordinal"===a.type){var l=a.range(),f=.5+(a.rangeBand()||(l[1]-l[0])/2);(r=n=c.duplicate(r)).offset=n.offset=f}"top"===e||"bottom"===e?(c.extend(t.properties.enter,{x:n,y:{value:0},y2:i}),c.extend(t.properties.update,{x:r,y:{value:0},y2:i}),c.extend(t.properties.exit,{x:r})):(c.extend(t.properties.enter,{x:{value:0},x2:i,y:n}),c.extend(t.properties.update,{x:{value:0},x2:i,y:r}),c.extend(t.properties.exit,{y:r}))}function u(e,t,n){var r=n?{}:e,i=e.mark.def.offset,a=e.mark.def.orient,o=t.width,u=t.height;if(c.isArray(i)){var s=i[0],l=i[1];switch(a){case"left":d.set(r,"x",-s),d.set(r,"y",l);break;case"right":d.set(r,"x",o+s),d.set(r,"y",l);break;case"bottom":d.set(r,"x",s),d.set(r,"y",u+l);break;case"top":d.set(r,"x",s),d.set(r,"y",-l);break;default:d.set(r,"x",s),d.set(r,"y",l)}}else switch(c.isObject(i)&&(i=-t.scale(i.scale)(i.value)),a){case"left":d.set(r,"x",-i),d.set(r,"y",0);break;case"right":d.set(r,"x",o+i),d.set(r,"y",0);break;case"bottom":d.set(r,"x",0),d.set(r,"y",u+i);break;case"top":d.set(r,"x",0),d.set(r,"y",-i);break;default:d.set(r,"x",0),d.set(r,"y",0)}return n&&n.interpolate(e,r),!0}function s(e){return{type:"rule",interactive:!1,key:"data",properties:{enter:{stroke:{value:e.tickColor},strokeWidth:{value:e.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}var c=e("datalib"),d=e("vega-dataflow").Tuple,h=e("../parse/mark"),p=e("../util"),x=new(e("vega-scenegraph").Bounds),g={top:1,right:1,bottom:1,left:1},m={bottom:"center",top:"center",left:"right",right:"left"},v={bottom:"top",top:"bottom",left:"middle",right:"middle"};t.exports=function(e,t){function r(){E.type=null}function m(e){return{data:e}}function v(e){var t=M||(b.ticks?b.ticks(I):b.domain()),r=n(b,t,z).map(m);return[t=t.map((function(t){return(t=m(t)).label=e(t.data),t})),r]}function _(e){var n=e.orient,r=e.marks[5].properties.update,i=r.encode,a=t.titleOffsetAutoMin,o=t.titleOffsetAutoMax,u=t.titleOffsetAutoMargin;r.encode=function(e,t,r,s,c,h){var p=i.call(i,e,t,r,s,c,h),g="bottom"===n||"top"===n?"y":"x";if(null!=B[g])return p;x.clear().union(t.items[3].bounds).union(t.items[4].bounds);var m=r?{}:e,v="top"===n||"left"===n?-1:1,_=~~(x["left"===n||"right"===n?"width":"height"]()+e.fontSize/2+u);return d.set(m,g,v*l(f(a,_),o)),r&&r.interpolate(e,m),!0}}function y(n){var r,l,f;"ordinal"===n.type?l=r={scale:n.scaleName,offset:.5+n.rangeBand()/2}:(r={scale:n.scaleName,offset:.5},l={scale:n.scaleName+":prev",offset:.5}),f=i(n),c.extend(V.gridLines,s(t)),c.extend(V.majorTicks,s(t)),c.extend(V.minorTicks,s(t)),c.extend(V.tickLabels,function(e){return{type:"text",interactive:!0,key:"data",properties:{enter:{fill:{value:e.tickLabelColor},font:{value:e.tickLabelFont},fontSize:{value:e.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}(t)),c.extend(V.domain,function(e){return{type:"path",interactive:!1,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:e.axisColor},strokeWidth:{value:e.axisWidth}},update:{}}}}(t)),c.extend(V.title,function(e){return{type:"text",interactive:!0,properties:{enter:{font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},fill:{value:e.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}(t)),V.gridLines.properties.enter.stroke={value:t.gridColor},V.gridLines.properties.enter.strokeOpacity={value:t.gridOpacity},V.gridLines.properties.enter.strokeWidth={value:t.gridWidth},V.gridLines.properties.enter.strokeDash={value:t.gridDash},o(w,V.gridLines,l,r,1/0,n,t,S),o(w,V.majorTicks,l,r,D,n,t),o(w,V.minorTicks,l,r,N,n,t),a(w,V.tickLabels,l,r,D,O),function(e,t,n,r){var i;("top"===e||"left"===e)&&(r*=-1),i="bottom"===e||"top"===e?"M"+n[0]+","+r+"V0H"+n[1]+"V"+r:"M"+r+","+n[0]+"H0V"+n[1]+"H"+r,t.properties.update.path={value:i}}(w,V.domain,f,F),function(e,t,n,r){var i=t.properties.update,a=~~((n[0]+n[1])/2),o="top"===e||"left"===e?-1:1;"bottom"===e||"top"===e?(i.x={value:a},i.angle={value:0},0<=r&&(i.y={value:o*r})):(i.y={value:a},i.angle={value:"left"===e?-90:90},0<=r&&(i.x={value:o*r}))}(w,V.title,f,+k||-1),c.extend(V.gridLines.properties.update,R),c.extend(V.majorTicks.properties.update,j),c.extend(V.minorTicks.properties.update,W),c.extend(V.tickLabels.properties.update,G),c.extend(V.domain.properties.update,U),c.extend(V.title.properties.update,B);var d=[V.gridLines,V.majorTicks,V.minorTicks,V.tickLabels,V.domain,V.title];c.extend(E,{type:"group",interactive:!1,properties:{enter:{encode:u,scales:[n.scaleName],signals:[],data:[]},update:{encode:u,scales:[n.scaleName],signals:[],data:[]}}}),E.marks=d.map((function(t){return h(e,t)}))}var b,w=t.orient,S=0,k=t.titleOffset,E={},A="front",T=!1,C=null,D=t.tickSize,N=t.tickSize,F=t.tickSize,O=t.tickPadding||t.padding,M=null,L=null,P=null,z=0,I=t.ticks,R={},G={},j={},W={},B={},U={},V={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}},q={def:function(){E.type||y(b);var e=v(p.getTickFormat(b,I,P,L)),t=C?[C].map(m):[];return E.marks[0].from=function(){return T?e[0]:[]},E.marks[1].from=function(){return e[0]},E.marks[2].from=function(){return e[1]},E.marks[3].from=E.marks[1].from,E.marks[4].from=function(){return[1]},E.marks[5].from=function(){return t},E.offset=S,E.orient=w,E.layer=A,"auto"===k&&_(E),E},scale:function(e){return arguments.length?(b!==e&&(b=e,r()),q):b},orient:function(e){return arguments.length?(w!==e&&(w=e in g?e+"":t.orient,r()),q):w},title:function(e){return arguments.length?(C!==e&&(C=e,r()),q):C},tickCount:function(e){return arguments.length?(I=e,q):I},tickValues:function(e){return arguments.length?(M=e,q):M},tickFormat:function(e){return arguments.length?(L!==e&&(L=e,r()),q):L},tickFormatType:function(e){return arguments.length?(P!==e&&(P=e,r()),q):P},tickSize:function(e,t){if(!arguments.length)return D;var n=arguments.length-1,i=+e,a=1<n?+t:D,o=0<n?+arguments[n]:D;return(D!==i||N!==a||F!==o)&&r(),D=i,N=a,F=o,q},tickSubdivide:function(e){return arguments.length?(z=+e,q):z},offset:function(e){return arguments.length?(S=c.isObject(e)?e:+e,q):S},tickPadding:function(e){return arguments.length?(O!==+e&&(O=+e,r()),q):O},titleOffset:function(e){return arguments.length?(k!==e&&(k=e,r()),q):k},layer:function(e){return arguments.length?(A!==e&&(A=e,r()),q):A},grid:function(e){return arguments.length?(T!==e&&(T=e,r()),q):T},gridLineProperties:function(e){return arguments.length?(R!==e&&(R=e),q):R},majorTickProperties:function(e){return arguments.length?(j!==e&&(j=e),q):j},minorTickProperties:function(e){return arguments.length?(W!==e&&(W=e),q):W},tickLabelProperties:function(e){return arguments.length?(G!==e&&(G=e),q):G},titleProperties:function(e){return arguments.length?(B!==e&&(B=e),q):B},domainProperties:function(e){return arguments.length?(U!==e&&(U=e),q):U},reset:function(){return r(),q}};return q}},{"../parse/mark":100,"../util":149,datalib:27,"vega-dataflow":42,"vega-scenegraph":50}],117:[function(e,t){(function(n){function r(e,t,n,r,i,a,o){var u,s=r?{}:t,l=t.mark.def,c=l.offset,h=l.orient,p=2*l.padding,g="left"===h?0:n.width,m=~~t.bounds.width()+(t.width?0:p),v=~~t.bounds.height()+(t.height?0:p),_=n._legendPositions||(n._legendPositions={right:.5,left:.5});if(s.x=.5,s.y=.5,s.width=m,s.height=v,"left"===h||"right"===h){s.y=_[h],_[h]+=v+l.margin;var y=n.axes,b=n.axisItems,w=x[h];for(u=0;u<y.length;++u)y[u].orient()===h&&(g=f(g,d(b[u].bounds[w])))}"left"===h?s.x-=g+c+m:"right"===h?s.x+=g+c:"top-left"===h?(s.x+=c,s.y+=c):"top-right"===h?(s.x+=n.width-m-c,s.y+=c):"bottom-left"===h?(s.x+=c,s.y+=n.height-v-c):"bottom-right"===h&&(s.x+=n.width-m-c,s.y+=n.height-v-c);var S=e.baseline,k=0;for(u=0;u<n.legendItems.length;u++)k+=n.legendItems[u].bounds.height()+(t.height?0:p);"middle"===S?s.y+=c+n.height/2-k/2:"bottom"===S&&(s.y+=c+n.height-k),r&&r.interpolate(t,s);var E=t.mark.def.properties.enter.encode;return E.call(E,t,n,r,i,a,o),!0}function a(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:e.titleColor},font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}var o=void 0===window?void 0===n?null:n.d3:window.d3,s=e("datalib"),l=e("vega-scenegraph").Gradient,c=e("../parse/properties"),h=e("../parse/mark"),p=e("../util"),x={left:"x1",right:"x2","top-left":"x1","top-right":"x2","bottom-left":"x1","bottom-right":"x2"};t.exports=function(e){function t(){R.type=null}function n(e,t){return{data:e,index:t}}function f(t,n,i,o,u){var l=s.extend(z.titles,a(A)),f=s.extend(z.symbols,function(e){return{type:"symbol",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:e.symbolShape},size:{value:e.symbolSize},stroke:{value:e.symbolColor},strokeWidth:{value:e.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}(A)),d=s.extend(z.labels,function(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{value:e.labelAlign},baseline:{value:e.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}(A));return function(e,t,n,r,i,a){var o=e.properties.enter,u=e.properties.update;t&&(o.size=u.size={scale:t.scaleName,field:"data"}),n&&(o.shape=u.shape={scale:n.scaleName,field:"data"}),r&&(o.fill=u.fill={scale:r.scaleName,field:"data"}),i&&(o.stroke=u.stroke={scale:i.scaleName,field:"data"}),a&&(u.opacity={scale:a.scaleName,field:"data"})}(f,t,n,i,o,u),s.extend(l.properties.update,L),s.extend(f.properties.update,O),s.extend(d.properties.update,P),l.properties.enter.x.value+=D,l.properties.enter.y.value+=D,d.properties.enter.x.offset+=D+1,f.properties.enter.x.offset=D+1,d.properties.update.x.offset+=D+1,f.properties.update.x.offset=D+1,s.extend(R,{type:"group",interactive:!1,properties:{enter:c(e,"group",F),legendPosition:{encode:r.bind(null,A),signals:[],scales:[],data:[],fields:[]}}}),R.marks=[l,f,d].map((function(t){return h(e,t)})),R}function d(t){var n=s.extend(z.titles,a(A)),i=s.extend(z.gradient,function(e){return{type:"rect",interactive:!1,properties:{enter:{x:{value:0},y:{value:0},width:{value:e.gradientWidth},height:{value:e.gradientHeight},stroke:{value:e.gradientStrokeColor},strokeWidth:{value:e.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}(A)),o=s.extend(z.labels,function(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}(A)),u=new l,f=t.domain(),d=f[0],p=f[f.length-1],x=t.copy().domain([d,p]).range([0,1]),g="linear"!==t.type&&t.ticks?t.ticks.call(t,15):f;d!==g[0]&&g.unshift(d),p!==g[g.length-1]&&g.push(p);for(var m=0,v=g.length;m<v;++m)u.stop(x(g[m]),t(g[m]));i.properties.enter.fill={value:u},s.extend(n.properties.update,L),s.extend(i.properties.update,M),s.extend(o.properties.update,P);var _=i.properties,y=M.height,b=y&&y.value||_.enter.height.value;if(o.properties.enter.y.value=b,o.properties.update.y.value=b,E){var w=n.properties,S=L.fontSize,k=4+(S&&S.value||w.enter.fontSize.value);i.properties.enter.y.value+=k,o.properties.enter.y.value+=k,i.properties.update.y.value+=k,o.properties.update.y.value+=k}return n.properties.enter.x.value+=D,n.properties.enter.y.value+=D,i.properties.enter.x.value+=D,i.properties.enter.y.value+=D,o.properties.enter.y.value+=D,i.properties.update.x.value+=D,i.properties.update.y.value+=D,o.properties.update.y.value+=D,s.extend(R,{type:"group",interactive:!1,properties:{enter:c(e,"group",F),legendPosition:{encode:r.bind(null,A),signals:[],scales:[],data:[],fields:[]}}}),R.marks=[n,i,o].map((function(t){return h(e,t)})),R}var g=null,m=null,v=null,_=null,y=null,b=null,w=null,S=null,k=null,E=null,A=e.config().legend,T=A.orient,C=A.offset,D=A.padding,N=[5],F={},O={},M={},L={},P={},z={titles:{},symbols:{},labels:{},gradient:{}},I={},R={};return I.def=function(){var e=g||m||v||_||y;return R.type||(R=e!=v&&e!=_||function(e){return"ordinal"===e||"quantize"===e||"quantile"===e||"threshold"===e}(e.type)?function(e){var t,r,a,l=f(g,m,v,_,y),c=(null==w?e.ticks?e.ticks.apply(e,N):e.domain():w).map(n),d=p.getTickFormat(e,c.length,k,S),h=o.range(c.length);g?(r=c.map((function(e){return i(g(e.data))})),a=o.max(r),r=r.reduce((function(e,t,n,r){return 0<n&&(e[n]=e[n-1]+r[n-1]/2+5),e[n]+=t/2,e}),[0]).map(Math.round)):(a=u(i(A.symbolSize)),r=b||(t=P.fontSize)&&t.value+5||A.labelFontSize+5,r=h.map((function(e,t){return u(a/2+t*r)})));var x,T=D;E&&(T+=5+((x=L.fontSize)&&x.value||A.titleFontSize));for(var C=0,F=r.length;C<F;++C)r[C]+=T;l.scales=l.scales||[{}],s.extend(l.scales[0],{name:"legend",type:"ordinal",points:!0,domain:h,range:r});var O=(E?[E]:[]).map(n);return c.forEach((function(e){e.label=d(e.data),e.offset=a})),l.marks[0].from=function(){return O},l.marks[1].from=function(){return c},l.marks[2].from=l.marks[1].from,l}(e):function(e){var t=d(e),r=e.domain(),i=(null==w?r:w).map(n),a=M.width&&M.width.value||A.gradientWidth,o=p.getTickFormat(e,i.length,k,S);t.scales=t.scales||[{}];var u=s.extend(t.scales[0],{name:"legend",type:e.type,round:!0,zero:!1,domain:[r[0],r[r.length-1]],range:[D,a+D]});"pow"===e.type&&(u.exponent=e.exponent());var l=(E?[E]:[]).map(n);return i.forEach((function(e,t){e.label=o(e.data),e.align=t==i.length-1?"right":0===t?"left":"center"})),t.marks[0].from=function(){return l},t.marks[1].from=function(){return[1]},t.marks[2].from=function(){return i},t}(e)),R.orient=T,R.offset=C,R.padding=D,R.margin=A.margin,R},I.size=function(e){return arguments.length?(g!==e&&(g=e,t()),I):g},I.shape=function(e){return arguments.length?(m!==e&&(m=e,t()),I):m},I.fill=function(e){return arguments.length?(v!==e&&(v=e,t()),I):v},I.stroke=function(e){return arguments.length?(_!==e&&(_=e,t()),I):_},I.opacity=function(e){return arguments.length?(y!==e&&(y=e,t()),I):y},I.title=function(e){return arguments.length?(E!==e&&(E=e,t()),I):E},I.format=function(e){return arguments.length?(S!==e&&(S=e,t()),I):S},I.formatType=function(e){return arguments.length?(k!==e&&(k=e,t()),I):k},I.spacing=function(e){return arguments.length?(b!==+e&&(b=+e,t()),I):b},I.orient=function(e){return arguments.length?(T=e in x?e+"":A.orient,I):T},I.offset=function(e){return arguments.length?(C=+e,I):C},I.values=function(e){return arguments.length?(w=e,I):w},I.legendProperties=function(e){return arguments.length?(F=e,I):F},I.symbolProperties=function(e){return arguments.length?(O=e,I):O},I.gradientProperties=function(e){return arguments.length?(M=e,I):M},I.labelProperties=function(e){return arguments.length?(P=e,I):P},I.titleProperties=function(e){return arguments.length?(L=e,I):L},I.reset=function(){return t(),I},I}}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"../parse/mark":100,"../parse/properties":105,"../util":149,datalib:27,"vega-scenegraph":50}],118:[function(e,t){t.exports=function e(t,n){var r,i,a,o,u;if(n(t))return!0;var s=["items","axisItems","legendItems"];for(a=0,o=s.length;a<o;++a)if(u=t[s[a]])for(r=0,i=u.length;r<i;++r)if(e(u[r],n))return!0}},{}],119:[function(e,t){function n(e){return l.prototype.init.call(this,e),l.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(e){function t(e){e.signal&&(c[e.signal]=1)}var n,i,a,o,u,l,c={},f=this._transform;if(!r.isArray(o=e))for(u in o=[],e)l=r.array(e[u]),o.push({field:u,ops:l});for(n=0,i=o.length;n<i;++n)(a=o[n]).field.signal&&(c[a.field.signal]=1),r.array(a.ops).forEach(t),r.array(a.as).forEach(t);return f._fields=o,f._aggr=null,f.dependency(s.SIGNALS,r.keys(c)),f}}}),this._aggr=null,this._input=null,this._args=null,this._fields=[],this._out=[],this._type=d.TUPLE,this._acc={groupby:r.true,value:r.true},this.router(!0).produces(!0)}var r=e("datalib"),i=e("vega-dataflow"),a=e("vega-logging"),o=i.ChangeSet,u=i.Tuple,s=i.Dependencies,l=e("./Transform"),c=e("./Facetor"),f=n.prototype=Object.create(l.prototype);f.constructor=n;var d=n.TYPES={VALUE:1,TUPLE:2,MULTI:3};n.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"],f.type=function(e){return this._type=e,this},f.accessors=function(e,t){var n=this._acc;n.groupby=r.$(e)||r.true,n.value=r.$(t)||r.true},f.aggr=function(){if(this._aggr)return this._aggr;var e=this._graph,t=!1,n=[],i=this.param("groupby").field,a=function(t){return t.signal?e.signalRef(t.signal):t},o=this._fields.map((function(e){var i={name:a(e.field),as:r.array(e.as),ops:r.array(a(e.ops)).map(a),get:e.get};return t=t||null!=i.get,n.push(i.name),i}));i.forEach((function(e){e.get&&(t=!0),n.push(e.name||e)})),this._args=t||!o.length?null:n,o.length||(o={"*":"values"});var u=this._aggr=(new c).groupby(i).stream(!0).summarize(o);return this._out=function(e){var t,n,r,i,a,o,u,s=[];for(t=0,n=(a=e._dims).length;t<n;++t)s.push(a[t].name);for(t=0,n=(o=e._aggr).length;t<n;++t)for(r=0,i=(u=o[t].measures.fields).length;r<i;++r)s.push(u[r]);return s}(u),this._type!==d.VALUE&&u.key("_id"),u},f.transform=function(e,t){a.debug(e,["aggregate"]);var n,r,i,s,l,c=o.create(e),f=this.aggr(),h=this._out,p=this._args,x=!0,g=u.prev;if(t&&(c.rem.push.apply(c.rem,f.result()),f.clear(),this._aggr=null,f=this.aggr()),this._type===d.TUPLE)n=function(e){f._add(e),u.prev_init(e)},r=function(e){f._rem(g(e))},i=function(e){f._mod(e,g(e))},s=function(e){f._markMod(e,g(e))};else{var m=this._acc.groupby,v=this._acc.value,_=this._type===d.VALUE?v:function(e){return{_id:e._id,groupby:m(e),value:v(e)}};n=function(e){f._add(_(e)),u.prev_init(e)},r=function(e){f._rem(_(g(e)))},i=function(e){f._mod(_(e),_(g(e)))},s=function(e){f._mark(_(e),_(g(e)))}}if(e.add.forEach(n),t)e.mod.forEach(n);else{if(e.rem.forEach(r),p)for(l=0,x=!1;l<p.length;++l)if(e.fields[p[l]]){x=!0;break}e.mod.forEach(x?i:s)}for(l=0;l<h.length;++l)c.fields[h[l]]=1;return f._input=e,f.changes(c)},t.exports=n},{"./Facetor":125,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],120:[function(e,t){function n(){this._collector=null}var r=e("./Transform").prototype,i=n.prototype=Object.create(r);i.constructor=n,i.init=function(e){return r.init.call(this,e),this.batch(!0)},i.transform=function(e,t){return this.batchTransform(e,this._collector.data(),t)},i.batchTransform=function(){},t.exports=n},{"./Transform":141}],121:[function(e,t){function n(e){return u.prototype.init.call(this,e),o.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value",default:10},maxbins:{type:"value",default:20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>",default:[5,2]}}),this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"},this.mutates(!0)}var r=e("datalib"),i=e("vega-dataflow").Tuple,a=e("vega-logging"),o=e("./Transform"),u=e("./BatchTransform"),s=n.prototype=Object.create(u.prototype);s.constructor=n,s.extent=function(e){var t,n=[this.param("min"),this.param("max")];return(null==n[0]||null==n[1])&&(t=r.extent(e,this.param("field").accessor),null==n[0]&&(n[0]=t[0]),null==n[1]&&(n[1]=t[1])),n},s.batchTransform=function(e,t){function n(e){var t=f(e);t=null==t?null:h.start+p*~~((t-h.start)/p),i.set(e,u.start,t),i.set(e,u.end,t+p),i.set(e,u.mid,t+p/2)}a.debug(e,["binning"]);var o=this.extent(t),u=this._output,s=this.param("step"),l=this.param("steps"),c=this.param("minstep"),f=this.param("field").accessor,d={min:o[0],max:o[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};s&&(d.step=s),l&&(d.steps=l),c&&(d.minstep=c);var h=r.bins(d),p=h.step;return e.add.forEach(n),e.mod.forEach(n),e.rem.forEach(n),e.fields[u.start]=1,e.fields[u.end]=1,e.fields[u.mid]=1,e},t.exports=n},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],122:[function(e,t){function n(e){return o.prototype.init.call(this,e),o.addParameters(this,{field:{type:"field",default:"data"},pattern:{type:"value",default:"[\\w']+"},case:{type:"value",default:"lower"},stopwords:{type:"value",default:""}}),this._output={text:"text",count:"count"},this.router(!0).produces(!0)}var r=e("vega-dataflow"),i=r.Tuple,a=e("vega-logging"),o=e("./Transform"),u=n.prototype=Object.create(o.prototype);u.constructor=n,u.transform=function(e,t){function n(e){return i.prev_init(e),o(e)}function r(e){return o(i.prev(e))}a.debug(e,["countpattern"]);var o=this.param("field").accessor,u=this.param("pattern"),s=this.param("stopwords"),l=!1;return this._stop!==s&&(this._stop=s,this._stop_re=new RegExp("^"+s+"$","i"),t=!0),this._pattern!==u&&(this._pattern=u,this._match=new RegExp(this._pattern,"g"),t=!0),t&&(this._counts={}),this._add(e.add,n),t||this._rem(e.rem,r),(t||(l=e.fields[o.field]))&&(l&&this._rem(e.mod,r),this._add(e.mod,n)),this._changeset(e)},u._changeset=function(e){var t,n,a,o=this._counts,u=this._tuples||(this._tuples={}),s=r.ChangeSet.create(e),l=this._output;for(t in o)n=u[t],a=o[t]||0,!n&&a?(u[t]=n=i.ingest({}),n[l.text]=t,n[l.count]=a,s.add.push(n)):0===a?(n&&s.rem.push(n),delete o[t],delete u[t]):n[l.count]!==a&&(i.set(n,l.count,a),s.mod.push(n));return s},u._tokenize=function(e){switch(this.param("case")){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(this._match)},u._add=function(e,t){var n,r,i,a,o=this._counts,u=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)u.test(a=n[r])||(o[a]=1+(o[a]||0))},u._rem=function(e,t){var n,r,i,a,o=this._counts,u=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)u.test(a=n[r])||(o[a]-=1)},t.exports=n},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],123:[function(e,t){function n(e){return x.prototype.init.call(this,e),p.addParameters(this,{with:{type:"data"},diagonal:{type:"value",default:"true"},filter:{type:"expr"}}),this._output={left:"a",right:"b"},this._lastWith=null,this._cids={},this._cache={},this.router(!0).produces(!0)}function r(e,t){var n=this._cache;(n[e._id]||(n[e._id]={c:[],f:!1})).c.push(t)}function i(e,t,n){return e?t._id+"_"+n._id:n._id+"_"+t._id}function a(e,t,n,a,o,u,s){for(var l,c,f=this._output,h=this._cache,p=this._cids,x=e.add,g=!1,m=0,v=n.length,_={};m<v;++m)p[c=i(t,s,l=n[m])]||s._id===l._id&&!a||(d.set(_,f.left,t?s:l),d.set(_,f.right,t?l:s),!o||o(_)?(x.push(_=d.ingest(_)),r.call(this,s,_),s._id!==l._id&&r.call(this,l,_),u[_._id]=1,p[c]=!0,_={}):(h[l._id]&&(h[l._id].f=!0),g=!0));h[s._id]&&(h[s._id].f=g)}function o(e,t,n,r,o,u,s,l){var c,f,d,h,p,x=this._output,g=this._cache,m=this._cids,v=g[l._id],_=v&&v.c,y=!v||v.f,b=e.mod,w=e.rem;if(_)for(c=_.length-1;0<=c;--c)if(p=i(h=l===(f=_[c])[x.left],l,d=h?f[x.right]:f[x.left]),g[d._id])if(!o||o(f)){if(u[f._id])continue;b.push(f),u[f._id]=1}else s[f._id]||w.push.apply(w,_.splice(c,1)),s[f._id]=1,m[p]=!1,v.f=!0;else m[p]=!1,_.splice(c,1);o&&y&&a.call(this,e,t,n,r,o,u,l)}function u(e,t,n,r){var a,o,u,s,l=this._output,c=this._cache[r._id],f=this._cids,d=e.rem;if(c){for(a=0,o=c.c.length;a<o;++a)f[i(s=r===(u=c.c[a])[l.left],r,s?u[l.right]:u[l.left])]=!1,n[u._id]||(d.push(u),n[u._id]=1);this._cache[r._id]=null}}function s(e,t){var n,r,i,a,o,u,s=this._cache,c=l.keys(s),f=e.rem;for(n=0,r=c.length;n<r;++n)for(i=0,a=(o=s[c[n]]).c.length;i<a;++i)t[(u=o.c[i])._id]||(f.push(u),t[u._id]=1);this._cache={},this._cids={},this._lastWith=null}var l=e("datalib"),c=e("vega-dataflow"),f=c.ChangeSet,d=c.Tuple,h=e("vega-logging"),p=e("./Transform"),x=e("./BatchTransform"),g=n.prototype=Object.create(x.prototype);g.constructor=n,g.batchTransform=function(e,t,n){h.debug(e,["crossing"]);var r=this.param("with"),i=this.param("diagonal"),l=this._output,c=this.param("filter")||null,d=!r.name,p=d?e:r.source.last(),x=d?t:r.source.values(),g=f.create(e),m={},v={};return n?(s.call(this,g,v),t.forEach(a.bind(this,g,!0,x,i,c,m)),this._lastWith=p.stamp):(e.rem.forEach(u.bind(this,g,!0,v)),e.add.forEach(a.bind(this,g,!0,x,i,c,m)),p.stamp>this._lastWith&&(p.rem.forEach(u.bind(this,g,!1,v)),p.add.forEach(a.bind(this,g,!1,t,i,c,m)),p.mod.forEach(o.bind(this,g,!1,t,i,c,m,v)),this._lastWith=p.stamp),e.mod.forEach(o.bind(this,g,!0,x,i,c,m,v))),g.fields[l.left]=1,g.fields[l.right]=1,g},t.exports=n},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],124:[function(e,t){function n(t){return r.addParameters(this,{transform:{type:"custom",set:function(e){return this._transform._pipeline=e,this._transform},get:function(){var t=e("../parse/transforms"),n=this._transform;return n._pipeline.map((function(e){return t(n._graph,e)}))}}}),this._pipeline=[],i.call(this,t)}var r=e("./Transform"),i=e("./Aggregate"),a=n.prototype=Object.create(i.prototype);a.constructor=n,a.aggr=function(){return i.prototype.aggr.call(this).facet(this)},a.transform=function(e,t){var n=i.prototype.transform.call(this,e,t);return e.add.length&&this.listeners()[0].rerank(),n},t.exports=n},{"../parse/transforms":109,"./Aggregate":119,"./Transform":141}],125:[function(e,t){function n(){i.call(this),this._facet=null,this._facetID=++l}function r(e){s.debug({},["disconnecting cell",this.tuple._id]);var t=this.ds.pipeline();e.removeListener(t[0]),e._graph.removeListener(t[0]),e._graph.disconnect(t)}var i=e("datalib").Aggregator,a=i.prototype,o=e("vega-dataflow"),u=o.Tuple,s=e("vega-logging"),l=0,c=n.prototype=Object.create(a);c.constructor=n,c.facet=function(e){return arguments.length?(this._facet=e,this):this._facet},c._ingest=function(e){return u.ingest(e,null)},c._assign=u.set,c._newcell=function(e,t){var n=a._newcell.call(this,e,t),i=this._facet;if(i){var o=i._graph,u=n.tuple,s=i.param("transform");n.ds=o.data(u._facetID,s,u),n.disconnect=r,i.addListener(s[0])}return n},c._newtuple=function(e,t){var n=a._newtuple.call(this,e);return this._facet&&(u.set(n,"key",t),u.set(n,"_facetID",this._facetID+"_"+t)),n},c.clear=function(){if(this._facet)for(var e in this._cells)this._cells[e].disconnect(this._facet);return a.clear.call(this)},c._on_add=function(e,t){this._facet&&t.ds._input.add.push(e)},c._on_rem=function(e,t){this._facet&&t.ds._input.rem.push(e)},c._on_mod=function(e,t,n,r){this._facet&&(n===r?n.ds._input.mod.push(e):(n.ds._input.rem.push(e),r.ds._input.add.push(e)))},c._on_drop=function(e){this._facet&&e.disconnect(this._facet)},c._on_keep=function(e){this._facet&&o.ChangeSet.copy(this._input,e.ds._input)},t.exports=n},{datalib:27,"vega-dataflow":42,"vega-logging":49}],126:[function(e,t){function n(e){return a.prototype.init.call(this,e),a.addParameters(this,{test:{type:"expr"}}),this._skip={},this.router(!0)}var r=e("vega-dataflow"),i=e("vega-logging"),a=e("./Transform"),o=n.prototype=Object.create(a.prototype);o.constructor=n,o.transform=function(e){i.debug(e,["filtering"]);var t=r.ChangeSet.create(e),n=this._skip,a=this.param("test");return e.rem.forEach((function(e){1===n[e._id]?n[e._id]=0:t.rem.push(e)})),e.add.forEach((function(e){a(e)?t.add.push(e):n[e._id]=1})),e.mod.forEach((function(e){var r=a(e),i=1===n[e._id];r&&i?(n[e._id]=0,t.add.push(e)):r&&!i?t.mod.push(e):!r&&i||(t.rem.push(e),n[e._id]=1)})),t},t.exports=n},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],127:[function(e,t){function n(e){return o.prototype.init.call(this,e),o.addParameters(this,{fields:{type:"array<field>"}}),this._output={key:"key",value:"value"},this._cache={},this.router(!0).produces(!0)}var r=e("vega-dataflow"),i=r.Tuple,a=e("vega-logging"),o=e("./Transform"),u=n.prototype=Object.create(o.prototype);u.constructor=n,u._reset=function(e,t){for(var n in this._cache)t.rem.push.apply(t.rem,this._cache[n]);this._cache={}},u._tuple=function(e,t,n){var r=this._cache[e._id]||(this._cache[e._id]=Array(n));return r[t]?i.rederive(e,r[t]):r[t]=i.derive(e)},u._fn=function(e,t,n){var r,a,o,u,s,l;for(r=0,o=e.length;r<o;++r)for(s=e[r],a=0,u=t.field.length;a<u;++a)l=this._tuple(s,a,u),i.set(l,this._output.key,t.field[a]),i.set(l,this._output.value,t.accessor[a](s)),n.push(l)},u.transform=function(e,t){a.debug(e,["folding"]);var n=this,i=this.param("fields"),o=r.ChangeSet.create(e);return t&&this._reset(e,o),this._fn(e.add,i,o.add),this._fn(e.mod,i,t?o.add:o.mod),e.rem.forEach((function(e){o.rem.push.apply(o.rem,n._cache[e._id]),n._cache[e._id]=null})),(e.add.length||e.rem.length||i.field.some((function(t){return!!e.fields[t]})))&&(o.fields[this._output.key]=1,o.fields[this._output.value]=1),o},t.exports=n},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],128:[function(e,t){(function(n){function r(t){return c.prototype.init.call(this,t),this._prev=null,this._interactive=!1,this._setup=!0,this._nodes=[],this._links=[],this._layout=i.layout.force(),c.addParameters(this,{size:{type:"array<value>",default:e("./screen").size},bound:{type:"value",default:!0},links:{type:"data"},linkStrength:{type:"value",default:1},linkDistance:{type:"value",default:20},charge:{type:"value",default:-30},chargeDistance:{type:"value",default:1/0},friction:{type:"value",default:.9},theta:{type:"value",default:.8},gravity:{type:"value",default:.1},alpha:{type:"value",default:.1},iterations:{type:"value",default:500},interactive:{type:"value",default:this._interactive},active:{type:"value",default:this._prev},fixed:{type:"data"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var i=void 0===window?void 0===n?null:n.d3:window.d3,a=e("vega-dataflow"),o=a.Tuple,u=a.ChangeSet,s=e("vega-logging"),c=e("./Transform"),d=r.prototype=Object.create(c.prototype);d.constructor=r,d.transform=function(e,t){s.debug(e,["force"]),t-=e.signals.active?1:0;var n=this.param("interactive"),r=this.param("links").source.last(),i=this.param("active"),a=this._output,u=this._layout,l=this._nodes,c=this._links;if(r.stamp<e.stamp&&(r=null),this.configure(e,r,n,t),!n){for(var f=this.param("iterations"),d=0;d<f;++d)u.tick();u.stop()}return this.update(i),(t||i!==this._prev&&i&&i.update)&&u.alpha(this.param("alpha")),i!==this._prev&&(this._prev=i),e.rem.length&&u.nodes(this._nodes=o.idFilter(l,e.rem)),r&&r.rem.length&&u.links(this._links=o.idFilter(c,r.rem)),e.fields[a.x]=1,e.fields[a.y]=1,e},d.configure=function(e,t,n,r){var i=this._layout,a=this._setup||e.add.length||t&&t.add.length||n!==this._interactive||this.param("charge")!==i.charge()||this.param("linkStrength")!==i.linkStrength()||this.param("linkDistance")!==i.linkDistance();if((a||r)&&i.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction")),a){this._setup=!1,this._interactive=n;var o,s,l=this,c=this._graph,f=this._nodes,d=this._links;for(o=e.add,s=0;s<o.length;++s)f.push({tuple:o[s]});if(t)for(o=t.add,s=0;s<o.length;++s)d.push({tuple:o[s],source:f[o[s].source],target:f[o[s].target]});var h=n?function(){c.propagate(u.create(null,!0),l)}:null;i.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(f).links(d).on("tick",h).start().alpha(this.param("alpha"))}},d.update=function(e){var t,n,r,i,a,u,s=this._output,c=this.param("bound"),d=this.param("fixed"),h=this.param("size"),p=this._nodes,x={};if(d&&d.source)for(n=0,r=(d=d.source.values()).length;n<r;++n)x[d[n].id]=1;for(n=0;n<p.length;++n)t=(i=(r=p[n]).tuple)._id,e&&e.id===t?(r.fixed=1,e.update&&(r.x=r.px=e.x,r.y=r.py=e.y)):r.fixed=x[t]||0,a=c?f(0,l(r.x,h[0])):r.x,u=c?f(0,l(r.y,h[1])):r.y,o.set(i,s.x,a),o.set(i,s.y,u)},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./Transform":141,"./screen":147,"vega-dataflow":42,"vega-logging":49}],129:[function(e,t){function n(e){return a.prototype.init.call(this,e),a.addParameters(this,{field:{type:"value"},expr:{type:"expr"}}),this.mutates(!0)}var r=e("vega-dataflow").Tuple,i=e("vega-logging"),a=e("./Transform"),o=n.prototype=Object.create(a.prototype);o.constructor=n,o.transform=function(e){function t(e){r.set(e,n,a(e)),o=!0}i.debug(e,["formulating"]);var n=this.param("field"),a=this.param("expr"),o=!1;return e.add.forEach(t),this.reevaluate(e)&&e.mod.forEach(t),o&&(e.fields[n]=1),e},t.exports=n},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],130:[function(e,t){(function(n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,r.Parameters),s.addParameters(this,{lon:{type:"field"},lat:{type:"field"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var i=void 0===window?void 0===n?null:n.d3:window.d3,a=e("datalib"),o=e("vega-dataflow").Tuple,u=e("vega-logging"),s=e("./Transform");r.Parameters={projection:{type:"value",default:"mercator"},center:{type:"array<value>"},translate:{type:"array<value>",default:e("./screen").center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}},r.d3Projection=function(){var e,t,n,o=this.param("projection"),u=r.Parameters;for(t in o!==this._mode&&(this._mode=o,this._projection=i.geo[o]()),e=this._projection,u)if("projection"!==t&&e[t]){if(void 0===(n=this.param(t))||a.isArray(n)&&0===n.length)continue;n!==e[t]()&&e[t](n)}return e};var l=r.prototype=Object.create(s.prototype);l.constructor=r,l.transform=function(e){function t(e){var t=[i(e),a(e)],r=s(t)||[null,null];o.set(e,n.x,r[0]),o.set(e,n.y,r[1])}u.debug(e,["geo"]);var n=this._output,i=this.param("lon").accessor,a=this.param("lat").accessor,s=r.d3Projection.call(this);return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.x]=1,e.fields[n.y]=1,e},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./Transform":141,"./screen":147,datalib:27,"vega-dataflow":42,"vega-logging":49}],131:[function(e,t){(function(n){function r(e){return l.prototype.init.call(this,e),l.addParameters(this,s.Parameters),l.addParameters(this,{field:{type:"field",default:null}}),this._output={path:"layout_path"},this.mutates(!0)}var i=void 0===window?void 0===n?null:n.d3:window.d3,a=e("datalib"),o=e("vega-dataflow").Tuple,u=e("vega-logging"),s=e("./Geo"),l=e("./Transform"),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.transform=function(e){function t(e){o.set(e,n.path,c(r(e)))}u.debug(e,["geopath"]);var n=this._output,r=this.param("field").accessor||a.identity,l=s.d3Projection.call(this),c=i.geo.path().projection(l);return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.path]=1,e},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./Geo":130,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],132:[function(e,t){(function(n){function r(t){return l.prototype.init.call(this,t),s.addParameters(this,{sort:{type:"array<field>",default:null},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"value",default:null},mode:{type:"value",default:"tidy"},size:{type:"array<value>",default:e("./screen").size},nodesize:{type:"array<value>",default:null},orient:{type:"value",default:"cartesian"}}),this._mode=null,this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var i=void 0===window?void 0===n?null:n.d3:window.d3,a=e("datalib"),o=e("vega-dataflow").Tuple,u=e("vega-logging"),s=e("./Transform"),l=e("./BatchTransform"),c={cartesian:function(e,t){return e.parent===t.parent?1:2},radial:function(e,t){return(e.parent===t.parent?1:2)/e.depth}},f=r.prototype=Object.create(l.prototype);f.constructor=r,f.batchTransform=function(e,t){u.debug(e,["hierarchy layout"]);var n=this._layout,r=this._output,s=this.param("mode"),l=this.param("sort"),f=this.param("nodesize"),d=this.param("parent").accessor,h=t.filter((function(e){return null===d(e)}))[0];return s!==this._mode&&(this._mode=s,"tidy"===s&&(s="tree"),n=this._layout=i.layout[s]()),e.fields[r.x]=1,e.fields[r.y]=1,e.fields[r.depth]=1,"partition"===s?(e.fields[r.width]=1,e.fields[r.height]=1,n.value(this.param("field").accessor)):n.separation(c[this.param("orient")]),f.length&&"partition"!==s?n.nodeSize(f):n.size(this.param("size")),n.sort(l.field.length?a.comparator(l.field):null).children(this.param("children").accessor).nodes(h),t.forEach((function(e){o.set(e,r.x,e.x),o.set(e,r.y,e.y),o.set(e,r.depth,e.depth),"partition"===s&&(o.set(e,r.width,e.dx),o.set(e,r.height,e.dy))})),e},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./BatchTransform":120,"./Transform":141,"./screen":147,datalib:27,"vega-dataflow":42,"vega-logging":49}],133:[function(e,t){function n(e){return s.prototype.init.call(this,e),u.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value",default:"value"},value:{type:"value",default:0}}),this.router(!0).produces(!0)}function r(e,t,n,r){var i,a={_imputed:!0};for(i=0;i<t.length;++i)a[e[i]]=t[i];for(i=0;i<r.length;++i)a[n[i]]=r[i];return o.ingest(a)}var i=e("datalib"),a=e("vega-logging"),o=e("vega-dataflow").Tuple,u=e("./Transform"),s=e("./BatchTransform"),l=n.prototype=Object.create(s.prototype);l.constructor=n,l.batchTransform=function(e,t){function n(e){return null==e?null:m(e)}a.debug(e,["imputing"]);var o,u,s,l,c,f,d=this.param("groupby"),h=this.param("orderby"),p=this.param("method"),x=this.param("value"),g=this.param("field"),m=g.accessor,v=g.field,_=this._imputed||[],y=[],b=function(e,t,n){var r,a,o,u,s,l,c,f=[],d=function(e){return e(o)},h=function(e){return o=e,n.map(d)};for(c=(s=f.domain=i.unique(e,h)).length,l=s.reduce((function(e,t,n){return e[t]={value:t,index:n},e}),{}),r={},a=0;a<e.length;++a)o=e[a],(r[u=null==t?[]:t.map(d)]||(f.push(r[u]=Array(c)),r[u].values=u,r[u]))[l[h(o)].index]=o;return f}(t,d.accessor,h.accessor),w=b.domain;for(s=0,c=b.length;s<c;++s)for(o=b[s],"value"!==p&&(x=i[p](o,n)),u=0,l=o.length;u<l;++u)null==o[u]&&((f=r(d.field,o.values,h.field,w[u]))[v]=x,y.push(f));for(u=0,l=y.length;u<l;++u)e.add.push(y[u]);for(u=0,l=_.length;u<l;++u)e.rem.push(_[u]);return this._imputed=y,e},t.exports=n},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],134:[function(e,i){function a(e){return s.prototype.init.call(this,e),s.addParameters(this,{sourceX:{type:"field",default:"_source.layout_x"},sourceY:{type:"field",default:"_source.layout_y"},targetX:{type:"field",default:"_target.layout_x"},targetY:{type:"field",default:"_target.layout_y"},tension:{type:"value",default:.2},shape:{type:"value",default:"line"}}),this._output={path:"layout_path"},this.mutates(!0)}var o=e("vega-dataflow").Tuple,u=e("vega-logging"),s=e("./Transform"),l=a.prototype=Object.create(s.prototype);l.constructor=a;var c={line:function(e,t,n,r){return"M"+e+","+t+"L"+n+","+r},curve:function(e,t,n,r,i){var a=n-e,o=r-t,u=i*(a+o),s=i*(o-a);return"M"+e+","+t+"C"+(e+u)+","+(t+s)+" "+(n+s)+","+(r-u)+" "+n+","+r},cornerX:function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},cornerY:function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},cornerR:function(e,i,a,o){var u=t(e),s=n(e),l=t(a),c=n(a);return"M"+i*u+","+i*s+"A"+i+","+i+" 0 0,"+((d(a-e)>r?a<=e:a>e)?1:0)+" "+i*l+","+i*c+"L"+o*l+","+o*c},diagonalX:function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},diagonalY:function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},diagonalR:function(e,r,i,a){var o=t(e),u=n(e),s=t(i),l=n(i),c=(r+a)/2;return"M"+r*o+","+r*u+"C"+c*o+","+c*u+" "+c*s+","+c*l+" "+a*s+","+a*l}};l.transform=function(e){function t(e){var t=r(i(e),a(e),s(e),l(e),f);o.set(e,n.path,t)}u.debug(e,["linkpath"]);var n=this._output,r=c[this.param("shape")]||c.line,i=this.param("sourceX").accessor,a=this.param("sourceY").accessor,s=this.param("targetX").accessor,l=this.param("targetY").accessor,f=this.param("tension");return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.path]=1,e},i.exports=a},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],135:[function(e,t){function n(e){return a.prototype.init.call(this,e),a.addParameters(this,{on:{type:"data"},onKey:{type:"field",default:null},as:{type:"array<value>"},keys:{type:"array<field>",default:["data"]},default:{type:"value"}}),this.mutates(!0)}var r=e("vega-dataflow").Tuple,i=e("vega-logging"),a=e("./Transform"),o=n.prototype=Object.create(a.prototype);o.constructor=n,o.transform=function(e,t){function n(e){for(var t,n=0;n<h.length;++n)t=g[h[n](e)]||x,r.set(e,p[n],t)}i.debug(e,["lookup"]);var a,o,u=this.param("on"),s=u.source.last(),l=u.source.values(),c=this.param("onKey"),f=c.field,d=this.param("keys"),h=d.accessor,p=this.param("as"),x=this.param("default"),g=this._lut;if(null==g||this._on!==f||f&&s.fields[f]||s.add.length||s.rem.length){if(f)for(c=c.accessor,g={},a=0;a<l.length;++a)g[c(o=l[a])]=o;else g=l;this._lut=g,this._on=f,t=!0}return e.add.forEach(n),(d.field.some((function(t){return e.fields[t]}))||t)&&(e.mod.forEach(n),e.rem.forEach(n)),p.forEach((function(t){e.fields[t]=1})),e},t.exports=n},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],136:[function(e,t){function n(e,t,n){this._name=e,this._type=t,this._transform=n,this._value=[],this._accessors=[],this._resolution=!1,this._signals=[]}function r(){var e=o.test(this._type),t=u.test(this._type),n=s.test(this._type),r=e?this._value:this._value[0],a=e?this._accessors:this._accessors[0];return!i.isValid(a)&&c.test(this._type)?r:t?{name:r,source:a}:n?{field:r,accessor:a}:r}var i=e("datalib"),a=e("vega-dataflow").Dependencies,o=/array/i,u=/data/i,s=/field/i,l=/expr/i,c=/value/i,f=n.prototype;f.get=function(){var e,t,n,a,o,l=this._transform._graph,c=u.test(this._type),f=s.test(this._type);if(!this._resolution)return r.call(this);if(c)return this._accessors=this._value.map((function(e){return l.data(e)})),r.call(this);for(e=0,t=this._signals.length;e<t;++e)a=(n=this._signals[e]).index,o=n.value(l),f&&(this._accessors[a]=this._value[a]==o?this._accessors[a]:i.accessor(o)),this._value[a]=o;return r.call(this)},f.set=function(e){var t=this,n=t._transform._graph,r=l.test(this._type),o=u.test(this._type),c=s.test(this._type);return t._signals=[],this._value=i.array(e).map((function(e,u){var s;return i.isString(e)?r?(s=n.expr(e),t._transform.dependency(a.FIELDS,s.fields),t._transform.dependency(a.SIGNALS,s.globals),t._transform.dependency(a.DATA,s.dataSources),s.fn):(c?(t._accessors[u]=i.accessor(e),t._transform.dependency(a.FIELDS,i.field(e))):o&&(t._resolution=!0,t._transform.dependency(a.DATA,e)),e):void 0===e.value?void 0===e.field?void 0===e.signal?void 0===e.expr?e:(t._resolution=!0,s=n.expr(e.expr),t._transform.dependency(a.SIGNALS,s.globals),t._signals.push({index:u,value:function(){return s.fn()}}),e.expr):(t._resolution=!0,t._transform.dependency(a.SIGNALS,i.field(e.signal)[0]),t._signals.push({index:u,value:function(t){return t.signalRef(e.signal)}}),e.signal):(t._accessors[u]=i.accessor(e.field),t._transform.dependency(a.FIELDS,i.field(e.field)),e.field):e.value})),t._transform},t.exports=n},{datalib:27,"vega-dataflow":42}],137:[function(e,t){function n(e){return l.prototype.init.call(this,e),s.addParameters(this,{field:{type:"field",default:null},startAngle:{type:"value",default:0},endAngle:{type:"value",default:2*r},sort:{type:"value",default:!1}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function i(){return 1}var a=e("datalib"),o=e("vega-dataflow").Tuple,u=e("vega-logging"),s=e("./Transform"),l=e("./BatchTransform"),c=n.prototype=Object.create(l.prototype);c.constructor=n,c.batchTransform=function(e,t){u.debug(e,["pie"]);var n,r,s,l=this._output,c=this.param("field").accessor||i,f=this.param("startAngle"),d=this.param("endAngle"),h=this.param("sort"),p=t.map(c),x=f,g=(d-f)/a.sum(p),m=a.range(t.length);for(h&&m.sort((function(e,t){return p[e]-p[t]})),n=0;n<m.length;++n)r=t[m[n]],s=p[m[n]],o.set(r,l.start,x),o.set(r,l.mid,x+.5*s*g),o.set(r,l.end,x+=s*g);return e.fields[l.start]=1,e.fields[l.end]=1,e.fields[l.mid]=1,e},t.exports=n},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],138:[function(e,t){function n(e){return o.prototype.init.call(this,e),a.addParameters(this,{field:{type:"field",default:null},normalize:{type:"value",default:!1}}),this._output={rank:"rank"},this.mutates(!0)}var r=e("vega-dataflow").Tuple,i=e("vega-logging"),a=e("./Transform"),o=e("./BatchTransform"),u=n.prototype=Object.create(o.prototype);u.constructor=n,u.batchTransform=function(e,t){i.debug(e,["rank"]);var n,a,o,u,s=this._output.rank,l=this.param("normalize"),c=this.param("field").accessor,f={},d=t.length;if(c)for(n=0,a=0;n<d;++n)f[u=c(o=t[n])]=f[u]||(f[u]=++a);for(n=0;n<d&&(o=t[n]);++n)c&&(u=c(o))?r.set(o,s,l?f[u]/a:f[u]):r.set(o,s,l?(n+1)/d:n+1);return e.fields[s]=1,e},t.exports=n},{"./BatchTransform":120,"./Transform":141,"vega-dataflow":42,"vega-logging":49}],139:[function(e,t){function n(e){a.prototype.init.call(this,e),a.addParameters(this,{by:{type:"array<field>"}}),this.router(!0)}var r=e("datalib"),i=e("vega-logging"),a=e("./Transform"),o=n.prototype=Object.create(a.prototype);o.constructor=n,o.transform=function(e){return i.debug(e,["sorting"]),(e.add.length||e.mod.length||e.rem.length)&&(e.sort=r.comparator(this.param("by").field)),e},t.exports=n},{"./Transform":141,datalib:27,"vega-logging":49}],140:[function(e,t){function n(e){return u.prototype.init.call(this,e),o.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value",default:"zero"}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}var r=e("datalib"),i=e("vega-dataflow").Tuple,a=e("vega-logging"),o=e("./Transform"),u=e("./BatchTransform"),s=n.prototype=Object.create(u.prototype);s.constructor=n,s.batchTransform=function(e,t){a.debug(e,["stacking"]);for(var n=this.param("groupby").accessor,o=r.comparator(this.param("sortby").field),u=this.param("field").accessor,s=this.param("offset"),l=this._output,c=function(e,t,n,r){var i,a,o,u,s,l,c,f=[],d=function(e){return e(o)};if(null==t)f.push(e.slice());else for(i={},a=0;a<e.length;++a)o=e[a],(s=i[u=t.map(d)]||(f.push(i[u]=[]),i[u])).push(o);for(u=0,c=0;u<f.length;++u){for(s=f[u],a=0,l=0;a<s.length;++a)l+=r(s[a]);s.sum=l,l>c&&(c=l),null!=n&&s.sort(n)}return f.max=c,f}(t,n,o,u),f=0,d=c.max;f<c.length;++f){var h,p,x,g=c[f],m=g.sum,v="center"===s?(d-m)/2:0,_="normalize"===s?1/m:1,y=v,b=0;for(h=0;h<g.length;++h)x=y,y=_*(b+=u(p=g[h]))+v,i.set(p,l.start,x),i.set(p,l.end,y),i.set(p,l.mid,.5*(x+y))}return e.fields[l.start]=1,e.fields[l.end]=1,e.fields[l.mid]=1,e},t.exports=n},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],141:[function(e,t){function n(e){e&&i.init.call(this,e)}var r=e("vega-dataflow"),i=r.Node.prototype,a=r.Dependencies,o=e("./Parameter");n.addParameters=function(e,t){for(var n in e._parameters=e._parameters||{},t){var r=t[n],i=new o(n,r.type,e);e._parameters[n]=i,"custom"===r.type&&(r.set&&(i.set=r.set.bind(i)),r.get&&(i.get=r.get.bind(i))),r.hasOwnProperty("default")&&i.set(r.default)}};var u=n.prototype=Object.create(i);u.constructor=n,u.param=function(e,t){var n=this._parameters[e];return void 0===n?this:1===arguments.length?n.get():n.set(t)},u.transform=function(e){return e},u.evaluate=function(e){var t=this._stamp<e.stamp&&this.dependency(a.SIGNALS).reduce((function(t,n){return t+(e.signals[n]?1:0)}),0);return this.transform(e,t)},u.output=function(e){for(var t in this._output)void 0!==e[t]&&(this._output[t]=e[t]);return this},t.exports=n},{"./Parameter":136,"vega-dataflow":42}],142:[function(e,t){function n(e){return u.prototype.init.call(this,e),o.addParameters(this,{groupby:{type:"array<field>"}}),this._output={children:"children",parent:"parent"},this.router(!0).produces(!0)}var r=e("datalib"),i=e("vega-dataflow").Tuple,a=e("vega-logging"),o=e("./Transform"),u=e("./BatchTransform"),s=n.prototype=Object.create(u.prototype);s.constructor=n,s.batchTransform=function(e,t){a.debug(e,["treeifying"]);var n,o,u=this.param("groupby").field,s=this._output.children,l=this._output.parent,c=[{name:"*",ops:["values"],as:[s]}],f=u.map((function(e){return r.groupby(e).summarize(c)})),d=this._internal||[],h=[],p=i.ingest({});for(p[l]=null,h.push(p),function e(t,n,r){var a=f[t].execute(r);n[s]=a,a.forEach((function(r){r[l]=n,h.push(i.ingest(r)),t+1<u.length?e(t+1,r,r[s]):r[s].forEach((function(e){e[l]=r}))}))}(0,p,t),n=0,o=h.length;n<o;++n)e.add.push(h[n]);for(n=0,o=d.length;n<o;++n)e.rem.push(d[n]);return this._internal=h,e},t.exports=n},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],143:[function(e,t){(function(n){function r(t){return c.prototype.init.call(this,t),l.addParameters(this,{sort:{type:"array<field>",default:["-value"]},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"field",default:"value"},size:{type:"array<value>",default:e("./screen").size},round:{type:"value",default:!0},sticky:{type:"value",default:!1},ratio:{type:"value",default:f},padding:{type:"value",default:null},mode:{type:"value",default:"squarify"}}),this._layout=a.layout.treemap(),this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var a=void 0===window?void 0===n?null:n.d3:window.d3,o=e("datalib"),u=e("vega-dataflow").Tuple,s=e("vega-logging"),l=e("./Transform"),c=e("./BatchTransform"),f=.5*(1+i(5)),d=r.prototype=Object.create(c.prototype);d.constructor=r,d.batchTransform=function(e,t){s.debug(e,["treemap"]);var n=this._layout,r=this._output,i=this.param("sticky"),a=this.param("parent").accessor,l=t.filter((function(e){return null===a(e)}))[0];return n.sticky()!==i&&n.sticky(i),n.sort(o.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(l),t.forEach((function(e){u.set(e,r.x,e.x),u.set(e,r.y,e.y),u.set(e,r.width,e.dx),u.set(e,r.height,e.dy),u.set(e,r.depth,e.depth)})),e.fields[r.x]=1,e.fields[r.y]=1,e.fields[r.width]=1,e.fields[r.height]=1,e.fields[r.depth]=1,e},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./BatchTransform":120,"./Transform":141,"./screen":147,datalib:27,"vega-dataflow":42,"vega-logging":49}],144:[function(e,t){(function(n){function r(t){return s.prototype.init.call(this,t),u.addParameters(this,{clipExtent:{type:"array<value>",default:e("./screen").extent},x:{type:"field",default:"layout_x"},y:{type:"field",default:"layout_y"}}),this._layout=i.geom.voronoi(),this._output={path:"layout_path"},this.mutates(!0)}var i=void 0===window?void 0===n?null:n.d3:window.d3,a=e("vega-dataflow/src/Tuple"),o=e("vega-logging"),u=e("./Transform"),s=e("./BatchTransform"),l=r.prototype=Object.create(s.prototype);l.constructor=r,l.batchTransform=function(e,t){o.debug(e,["voronoi"]);for(var n=this._output.path,r=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(t),i=0;i<t.length;++i)r[i]&&a.set(t[i],n,"M"+r[i].join("L")+"Z");return e.fields[n]=1,e},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./BatchTransform":120,"./Transform":141,"./screen":147,"vega-dataflow/src/Tuple":41,"vega-logging":49}],145:[function(e,t){(function(n){function r(t){return h.prototype.init.call(this,t),d.addParameters(this,{size:{type:"array<value>",default:e("./screen").size},text:{type:"field",default:"data"},rotate:{type:"field|value",default:0},font:{type:"field|value",default:{value:"sans-serif"}},fontSize:{type:"field|value",default:14},fontStyle:{type:"field|value",default:{value:"normal"}},fontWeight:{type:"field|value",default:{value:"normal"}},fontScale:{type:"array<value>",default:[10,50]},padding:{type:"value",default:1},spiral:{type:"value",default:"archimedean"}}),this._layout=s().canvas(l.instance),this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"},this.mutates(!0)}function i(e){return e&&e.accessor||e}function a(e){var t=Object.create(e);return t._tuple=e,t}var o=e("datalib"),u=void 0===window?void 0===n?null:n.d3:window.d3,s=void 0===window?void 0===n?null:n.d3.layout.cloud:window.d3.layout.cloud,l=e("vega-scenegraph").canvas,c=e("vega-dataflow/src/Tuple"),f=e("vega-logging"),d=e("./Transform"),h=e("./BatchTransform"),p=r.prototype=Object.create(h.prototype);p.constructor=r,p.batchTransform=function(e,t){f.debug(e,["wordcloud"]);var n,r,s=this._layout,l=this._output,d=this.param("fontSize"),h=d.accessor&&this.param("fontScale");for(var p in d=d.accessor||u.functor(d),h.length&&(r=u.scale.sqrt().domain(o.extent(t,n=d)).range(h),d=function(e){return r(n(e))}),s.size(this.param("size")).text(i(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(i(this.param("rotate"))).font(i(this.param("font"))).fontStyle(i(this.param("fontStyle"))).fontWeight(i(this.param("fontWeight"))).fontSize(d).words(t.map(a)).on("end",(function(e){var t,n,r,i,a=s.size(),o=a[0]>>1,u=a[1]>>1;for(r=0,i=e.length;r<i;++r)n=(t=e[r])._tuple,c.set(n,l.x,t.x+o),c.set(n,l.y,t.y+u),c.set(n,l.font,t.font),c.set(n,l.fontSize,t.size),c.set(n,l.fontStyle,t.style),c.set(n,l.fontWeight,t.weight),c.set(n,l.rotate,t.rotate)})).start(),l)e.fields[l[p]]=1;return e},t.exports=r}).call(this,void 0===global?"undefined"==typeof self?void 0===window?{}:window:self:global)},{"./BatchTransform":120,"./Transform":141,"./screen":147,datalib:27,"vega-dataflow/src/Tuple":41,"vega-logging":49,"vega-scenegraph":50}],146:[function(e,t){t.exports={aggregate:e("./Aggregate"),bin:e("./Bin"),cross:e("./Cross"),countpattern:e("./CountPattern"),linkpath:e("./LinkPath"),facet:e("./Facet"),filter:e("./Filter"),fold:e("./Fold"),force:e("./Force"),formula:e("./Formula"),geo:e("./Geo"),geopath:e("./GeoPath"),hierarchy:e("./Hierarchy"),impute:e("./Impute"),lookup:e("./Lookup"),pie:e("./Pie"),rank:e("./Rank"),sort:e("./Sort"),stack:e("./Stack"),treeify:e("./Treeify"),treemap:e("./Treemap"),voronoi:e("./Voronoi"),wordcloud:e("./Wordcloud")}},{"./Aggregate":119,"./Bin":121,"./CountPattern":122,"./Cross":123,"./Facet":124,"./Filter":126,"./Fold":127,"./Force":128,"./Formula":129,"./Geo":130,"./GeoPath":131,"./Hierarchy":132,"./Impute":133,"./LinkPath":134,"./Lookup":135,"./Pie":137,"./Rank":138,"./Sort":139,"./Stack":140,"./Treeify":142,"./Treemap":143,"./Voronoi":144,"./Wordcloud":145}],147:[function(e,t){t.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},{}],148:[function(e,t){function n(e,t,n,r){if(null==n)return r;var i,u=e.base(),f=l(u,e.ticks().length/n),d=0<t[0]?(i=1e-12,a):(i=-1e-12,c);return function(e){return function(e){return 0>t[0]?-s(u,-e):s(u,e)}(d(function(e){return(0>t[0]?-o(0<e?0:-e):o(0>e?0:e))/o(u)}(e)+i))/e>=f?r(e):""}}function r(e,t,r,a){var o,u=i.format,s="log"===e.type;return"number"===r?(o=e.domain(),s?n(e,o,t,u.auto.number(a||null)):u.auto.linear(o,t,a||null)):"time"===r?(a?u:u.auto).time(a):"utc"===r?(a?u:u.auto).utc(a):String}var i=e("datalib");t.exports={getTickFormat:function(e,t,n,i){return r(e,t,n||function(e){switch(e.type){case"time":return"time";case"utc":return"utc";case"ordinal":return"string";default:return"number"}}(e),i)}}},{datalib:27}],149:[function(e,t){var n=e("datalib"),r={};n.extend(r,e("./format")),t.exports=n.extend(r,n)},{"./format":148,datalib:27}],150:[function(e,t){t.exports=function(e,t,n,r){return void 0!==e[n]?e[n]:void 0!==t&&void 0!==t[n]?t[n]:void 0===r?void 0:r}},{}]},{},[1])(1)}(),function(e){"use strict";var t=Math.tan,n=Number.MAX_VALUE,r=String.fromCharCode,i=Math.LN2,a=Math.E,o=Math.atan,u=Math.atan2,s=Math.cos,l=Math.sin,c=Math.asin,f=Math.acos,d=Math.SQRT2,h=Math.PI,p=Math.min,x=Math.sqrt,g=Math.LN10,m=Math.abs,v=Math.round,_=Math.floor,y=Math.max,b=Math.ceil,w=Math.sign,S=Math.pow,k=Math.log,E=Math.exp;function A(e,t,n){return e.fields=t||[],e.fname=n,e}function T(e){return null==e?null:e.fname}function C(e){return null==e?null:e.fields}function D(e){throw Error(e)}function N(e){function t(){a.push(l+e.substring(n,r)),l="",n=r+1}var n,r,i,a=[],o=null,u=0,s=e.length,l="";for(e+="",n=r=0;r<s;++r)if("\\"===(i=e[r]))l+=e.substring(n,r),n=++r;else if(i===o)t(),o=null,u=-1;else{if(o)continue;n===u&&'"'===i?(n=r+1,o=i):n===u&&"'"===i?(n=r+1,o=i):"."!==i||u?"["===i?(r>n&&t(),u=n=r+1):"]"===i&&(u||D("Access path missing open bracket: "+e),0<u&&t(),u=0,n=r+1):r>n?t():n=r+1}return u&&D("Access path missing closing bracket: "+e),o&&D("Access path missing closing quote: "+e),r>n&&(r++,t()),a}function F(e){return e===Object(e)}function O(e){return"string"==typeof e}function M(e){return v_(e)?"["+e.map(M)+"]":F(e)||O(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function L(e,t){var n=N(e),r="return _["+n.map(M).join("][")+"];";return A(Function("_",r),[e=1===n.length?n[0]:e],t||e)}function P(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function z(e){var t=e||0;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return 1<=t&&P("error","ERROR",arguments),this},warn:function(){return 2<=t&&P("warn","WARN",arguments),this},info:function(){return 3<=t&&P("log","INFO",arguments),this},debug:function(){return 4<=t&&P("log","DEBUG",arguments),this}}}function I(e){return e[e.length-1]}function R(e){return null==e||""===e?null:+e}function G(e){return function(t){return e*E(t)}}function j(e){return function(t){return k(e*t)}}function W(e){return function(t){return 0>t?-S(-t,e):S(t,e)}}function B(e,t,n,r){var i=n(e[0]),a=n(I(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function U(e,t){return B(e,t,R,b_)}function V(e,t){var n=w(e[0]);return B(e,t,j(n),G(n))}function q(e,t,n){return B(e,t,W(n),W(1/n))}function H(e,t,n,r,i){var a=r(e[0]),o=r(I(e)),u=null==t?(a+o)/2:r(t);return[i(u+(a-u)*n),i(u+(o-u)*n)]}function $(e,t,n){return H(e,t,n,R,b_)}function Y(e,t,n){var r=w(e[0]);return H(e,t,n,j(r),G(r))}function X(e,t,n,r){return H(e,t,n,W(r),W(1/r))}function Z(e){return null==e?[]:v_(e)?e:[e]}function J(e){return"function"==typeof e}function K(e,t){var n,r,i,a,o,u,s,l,c,f=[],d=(e=Z(e)).map((function(e,t){return null==e?null:(f.push(t),J(e)?e:N(e).map(M).join("]["))})),h=f.length-1,p=Z(t),x="var u,v;return ";if(0>h)return null;for(r=0;r<=h;++r)J(i=d[n=f[r]])?(a="(u=this."+(u="f"+n)+"(a))",o="(v=this."+u+"(b))",(s=s||{})[u]=i):(a="(u=a["+i+"])",o="(v=b["+i+"])"),u="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"===p[n]?(c=-1,l=1):(c=1,l=-1),x+="("+a+"<"+o+"||u==null)&&v!=null?"+l+":(u>v||v==null)&&u!=null?"+c+":"+u+"!==u&&v===v?"+l+":v!==v&&u===u?"+c+(n<h?":":":0");return i=Function("a","b",x+";"),s&&(i=i.bind(s)),e=e.reduce((function(e,t){return J(t)?(C(t)||[]).forEach((function(t){e[t]=1})):null!=t&&(e[t+""]=1),e}),{}),A(i,Object.keys(e))}function Q(e){return J(e)?e:function(){return e}}function ee(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function te(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e}function ne(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(null!=(r=e[u])&&r>=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=e[u])&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(null!=(r=t(e[u],u,e))&&r>=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=t(e[u],u,e))&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function re(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==A_}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===A_&&--n.empty),i[e]=r,this},delete:function(e){return t(e)&&(--n.size,++n.empty,i[e]=A_),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)(t=i[e])===A_||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach((function(t){n.set(t,e[t])})),n}function ie(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function ae(e){return"boolean"==typeof e}function oe(e){return"[object Date]"===Object.prototype.toString.call(e)}function ue(e){return"number"==typeof e}function se(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function le(e,t){return e&&(e=t?Z(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):Z(e)),A(e&&e.length?Function("_","return ''+"+e.map((function(e){return"_["+(t?M(e):N(e).map(M).join("]["))+"]"})).join("+'|'+")+";"):function(){return""},e,"key")}function ce(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,l=0;u<i&&s<a;++l)o[l]=0<e(t[u],n[s])?n[s++]:t[u++];for(;u<i;++u,++l)o[l]=t[u];for(;s<a;++s,++l)o[l]=n[s];return o}function fe(e,t){for(var n="";0<=--t;)n+=e;return n}function de(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return 0>=o?a:"left"===r?fe(i,o)+a:"center"===r?fe(i,~~(o/2))+a+fe(i,b(o/2)):a+fe(i,o)}function he(e){return null==e||""===e?null:!(!e||"false"==e||"0"==e||!e)}function pe(e){return ue(e)?e:oe(e)?e:Date.parse(e)}function xe(e,t){return t=t||pe,null==e||""===e?null:t(e)}function ge(e){return null==e||""===e?null:e+""}function me(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function ve(e,t,n,r){var i=null==r?"…":r,a=e+"",o=a.length,u=y(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,b(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function _e(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function ye(e){var t=e||b_,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0,0<=(i=n.indexOf(e))&&n.splice(i,1)),n},n}function be(e){return!(!e||!we(e))}function we(e){return e[T_]}function Se(e,t){return e[T_]=t,e}function ke(e){var t=e===Object(e)?e:{data:e};return we(t)?t:Se(t,C_++)}function Ee(e){return Ae(e,ke({}))}function Ae(e,t){for(var n in e)t[n]=e[n];return t}function Te(e,t){return Se(t,we(e))}function Ce(e){return e&&e.constructor===De}function De(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:De,insert:function(t){for(var n=Z(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=J(e)?r:t,i=Z(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:Q(r)};return J(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return J(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(g[we(e)]=e)}var l,c,f,d,h,p,x={},g={};for(l=0,c=u.length;l<c;++l)x[we(u[l])]=1;for(l=0,c=t.length;l<c;++l)x[we(h=t[l])]=-1;for(l=0,c=r.length;l<c;++l)d=r[l],u.forEach((function(e){d(e)&&(x[we(e)]=-1)}));for(l=0,c=e.length;l<c;++l)p=we(h=e[l]),x[p]?x[p]=1:o.add.push(ke(e[l]));for(l=0,c=u.length;l<c;++l)h=u[l],0>x[we(h)]&&o.rem.push(h);for(l=0,c=n.length;l<c;++l)h=(f=n[l]).tuple,d=f.field,0<(p=x[we(h)])&&(s(h,d,f.value),o.modifies(d));for(l=0,c=i.length;l<c;++l)f=i[l],d=f.filter,u.forEach((function(e){d(e)&&0<x[we(e)]&&s(e,f.field,f.value)})),o.modifies(f.field);if(a)o.mod=t.length||r.length?u.filter((function(e){return 0<x[we(e)]})):u.slice();else for(p in g)o.mod.push(g[p]);return o}}}function Ne(){Object.defineProperty(this,"_:mod:_",{writable:!0,value:{}})}function Fe(e,t,n,r){this.id=++N_,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Oe(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function Me(e,t,n){this.id=++M_,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Le(e,t,n){return new Me(e,t,n)}function Pe(e){return{options:e||{},sanitize:Ie,load:ze,file:Ge,http:Re}}function ze(e,t){var n=this;return n.sanitize(e,t).then((function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)}))}function Ie(e,t){return t=te({},this.options,t),new Promise((function(n,r){var i,a,o,u,s={href:null};return null==e||"string"!=typeof e?void r("Sanitize failure, invalid URI: "+M(e)):(a=P_.test(e),(u=t.baseURL)&&!a&&(!We(e,"/")&&"/"!==u[u.length-1]&&(e="/"+e),e=u+e),o=(i=We(e,"file://"))||"file"===t.mode||"http"!==t.mode&&!a&&je(),i?e=e.slice(7):We(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),void n(s))}))}function Re(e,t){return function(e,t){var n="function"==typeof fetch?fetch:__webpack_require__(13);return n?n(e,t):Promise.reject("No fetch method available.")}(e,te({},this.options.http,t)).then((function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()}))}function Ge(e){return new Promise((function(t,n){var r=je();r?r.readFile(e,(function(e,r){e?n(e):t(r)})):n("No file system access for "+e)}))}function je(){return!!J((!0).readFile)||null}function We(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function Be(e,t){if(!e||!e.length)return"unknown";var n,r,i,a=0,o=e.length,u=I_.length,s=I_.map((function(e,t){return t+1}));for(r=0,o=e.length;r<o;++r)for(n=t?e[r][t]:e[r],i=0;i<u;++i)if(s[i]&&Ve(n)&&!I_[i](n)&&(s[i]=0,++a===I_.length))return"string";return a=s.reduce((function(e,t){return 0===e?t:e}),0)-1,R_[a]}function Ue(e,t){return t.reduce((function(t,n){return t[n]=Be(e,n),t}),{})}function Ve(e){return null!=e&&e==e}function qe(e){return!(isNaN(+e)||e instanceof Date)}function He(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}")}function $e(e){function t(e,t){function n(){if(l)return j_;if(c)return c=!1,G_;var t,n,r=u;if(34===e.charCodeAt(r)){for(;u++<o&&34!==e.charCodeAt(u)||34===e.charCodeAt(++u););return(t=u)>=o?l=!0:10===(n=e.charCodeAt(u++))?c=!0:13===n&&(c=!0,10===e.charCodeAt(u)&&++u),e.slice(r+1,t-1).replace(/""/g,'"')}for(;u<o;){if(10===(n=e.charCodeAt(t=u++)))c=!0;else if(13===n)c=!0,10===e.charCodeAt(u)&&++u;else if(n!==a)continue;return e.slice(r,t)}return l=!0,e.slice(r,o)}var r,i=[],o=e.length,u=0,s=0,l=0>=o,c=!1;for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=n())!==j_;){for(var f=[];r!==G_&&r!==j_;)f.push(r),r=n();t&&null==(f=t(f,s++))||i.push(f)}return i}function n(t){return t.map(r).join(e)}function r(e){return null==e?"":i.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var i=new RegExp('["'+e+"\n\r]"),a=e.charCodeAt(0);return{parse:function(e,n){var r,i,a=t(e,(function(e,t){return r?r(e,t-1):(i=e,void(r=n?function(e,t){var n=He(e);return function(r,i){return t(n(r),i,e)}}(e,n):He(e)))}));return a.columns=i||[],a},parseRows:t,format:function(t,n){return null==n&&(n=function(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}(t)),[n.map(r).join(e)].concat(t.map((function(t){return n.map((function(e){return r(t[e])})).join(e)}))).join("\n")},formatRows:function(e){return e.map(n).join("\n")}}}function Ye(e){return function(t,n){var r={delimiter:e};return Xe(t,n?te(n,r):r)}}function Xe(e,t){return t.header&&(e=t.header.map(M).join(t.delimiter)+"\n"+e),$e(t.delimiter).parse(e+"")}function Ze(e,t){var n=t&&t.property?L(t.property):b_;return F(e)&&!function(e){return!("function"!=typeof Buffer||!J(Buffer.isBuffer))&&Buffer.isBuffer(e)}(e)?function(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e)):n(JSON.parse(e))}function Je(e){return e}function Ke(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return Qe(e,t)}))}:Qe(e,t)}function Qe(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=et(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function et(e,t){function n(e,t){t.length&&t.pop();for(var n=s[0>e?~e:e],r=0,i=n.length;r<i;++r)t.push(u(n[r],r));0>e&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,i)}function r(e){return u(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return 2>t.length&&t.push(t[0]),t}function a(e){for(var t=i(e);4>t.length;)t.push(t[0]);return t}function o(e){return e.map(a)}var u=function(e){if(null==e)return Je;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,l=e.length,c=Array(l);for(c[0]=(t+=e[0])*r+a,c[1]=(n+=e[1])*i+o;s<l;)c[s]=e[s],++s;return c}}(e.transform),s=e.arcs;return function e(t){var n,a=t.type;switch(a){case"GeometryCollection":return{type:a,geometries:t.geometries.map(e)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=i(t.arcs);break;case"MultiLineString":n=t.arcs.map(i);break;case"Polygon":n=o(t.arcs);break;case"MultiPolygon":n=t.arcs.map(o);break;default:return null}return{type:a,coordinates:n}}(t)}function tt(e,t){function n(t){var n,r=e.arcs[0>t?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1],0>t?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach((function(e){i[0>e?~e:e]=1})),u.push(r)}}var i={},a={},o={},u=[],s=-1;return t.forEach((function(n,r){var i,a=e.arcs[0>n?~n:n];!(3>a.length)||a[1][0]||a[1][1]||(i=t[++s],t[s]=n,t[r]=i)})),t.forEach((function(e){var t,r,i=n(e),u=i[0],s=i[1];if(t=o[u])if(delete o[t.end],t.push(e),t.end=s,r=a[s]){delete a[r.start];var l=r===t?t:t.concat(r);a[l.start=t.start]=o[l.end=r.end]=l}else a[t.start]=o[t.end]=t;else if(t=a[s])if(delete a[t.start],t.unshift(e),t.start=u,r=o[u]){delete o[r.end];var c=r===t?t:r.concat(t);a[c.start=r.start]=o[c.end=t.end]=c}else a[t.start]=o[t.end]=t;else a[(t=[e]).start=u]=o[t.end=s]=t})),r(o,a),r(a,o),t.forEach((function(e){i[0>e?~e:e]||u.push([e])})),u}function nt(e){return et(e,rt.apply(this,arguments))}function rt(e,t,n){var r,i,a;if(1<arguments.length)r=it(0,t,n);else for(i=0,r=Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:tt(e,r)}}function it(e,t,n){function r(e){var t=0>e?~e:e;(s[t]||(s[t]=[])).push({i:e,g:o})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}var o,u=[],s=[];return function e(t){switch(o=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":a(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(a)}(t.arcs)}}(t),s.forEach(null==n?function(e){u.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}function at(e,t){return 1<arguments.length?(W_[e]=t,this):W_.hasOwnProperty(e)?W_[e]:null}function ot(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:_(n)),e},i.range=function(n,r,a){var o,u=[];if(n=i.ceil(n),a=null==a?1:_(a),!(n<r&&0<a))return u;do{u.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return u},i.filter=function(n){return ot((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(0>r)for(;0>=++r;)for(;t(e,-1),!n(e););else for(;0<=--r;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return B_.setTime(+t),U_.setTime(+r),e(B_),e(U_),_(n(B_,U_))},i.every=function(e){return e=_(e),isFinite(e)&&0<e?1<e?i.filter(r?function(t){return 0==r(t)%e}:function(t){return 0==i.count(0,t)%e}):i:null}),i}function ut(e){return ot((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}function st(e){return ot((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}function lt(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ct(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ft(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function dt(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?Array(n-a+1).join(t)+i:i)}function ht(e){return e.replace(gy,"\\$&")}function pt(e){return new RegExp("^(?:"+e.map(ht).join("|")+")","i")}function xt(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function gt(e,t,n){var r=py.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function mt(e,t,n){var r=py.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function vt(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function _t(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function yt(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function bt(e,t,n){var r=py.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function wt(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function St(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kt(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Et(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function At(e,t,n){var r=py.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Tt(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Ct(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Dt(e,t,n){var r=py.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Nt(e,t,n){var r=py.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ft(e,t,n){var r=py.exec(t.slice(n,n+6));return r?(e.L=_(r[0]/1e3),n+r[0].length):-1}function Ot(e,t,n){var r=xy.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Mt(e,t,n){var r=py.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Lt(e,t,n){var r=py.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function Pt(e,t){return dt(e.getDate(),t,2)}function zt(e,t){return dt(e.getHours(),t,2)}function It(e,t){return dt(e.getHours()%12||12,t,2)}function Rt(e,t){return dt(1+Y_.count(Q_(e),e),t,3)}function Gt(e,t){return dt(e.getMilliseconds(),t,3)}function jt(e,t){return Gt(e,t)+"000"}function Wt(e,t){return dt(e.getMonth()+1,t,2)}function Bt(e,t){return dt(e.getMinutes(),t,2)}function Ut(e,t){return dt(e.getSeconds(),t,2)}function Vt(e){var t=e.getDay();return 0===t?7:t}function qt(e,t){return dt(X_.count(Q_(e),e),t,2)}function Ht(e,t){var n=e.getDay();return e=4<=n||0===n?J_(e):J_.ceil(e),dt(J_.count(Q_(e),e)+(4===Q_(e).getDay()),t,2)}function $t(e){return e.getDay()}function Yt(e,t){return dt(Z_.count(Q_(e),e),t,2)}function Xt(e,t){return dt(e.getFullYear()%100,t,2)}function Zt(e,t){return dt(e.getFullYear()%1e4,t,4)}function Jt(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+dt(0|t/60,"0",2)+dt(t%60,"0",2)}function Kt(e,t){return dt(e.getUTCDate(),t,2)}function Qt(e,t){return dt(e.getUTCHours(),t,2)}function en(e,t){return dt(e.getUTCHours()%12||12,t,2)}function tn(e,t){return dt(1+ny.count(uy(e),e),t,3)}function nn(e,t){return dt(e.getUTCMilliseconds(),t,3)}function rn(e,t){return nn(e,t)+"000"}function an(e,t){return dt(e.getUTCMonth()+1,t,2)}function on(e,t){return dt(e.getUTCMinutes(),t,2)}function un(e,t){return dt(e.getUTCSeconds(),t,2)}function sn(e){var t=e.getUTCDay();return 0===t?7:t}function ln(e,t){return dt(ry.count(uy(e),e),t,2)}function cn(e,t){var n=e.getUTCDay();return e=4<=n||0===n?ay(e):ay.ceil(e),dt(ay.count(uy(e),e)+(4===uy(e).getUTCDay()),t,2)}function fn(e){return e.getUTCDay()}function dn(e,t){return dt(iy.count(uy(e),e),t,2)}function hn(e,t){return dt(e.getUTCFullYear()%100,t,2)}function pn(e,t){return dt(e.getUTCFullYear()%1e4,t,4)}function xn(){return"+0000"}function gn(){return"%"}function mn(e){return+e}function vn(e){return _(+e/1e3)}function _n(e){return sy=function(e){function t(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null==(i=hy[r=e.charAt(++u)])?i="e"===r?" ":"0":r=e.charAt(++u),(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function n(e,t){return function(n){var i,a,o=ft(1900);if(r(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(1>o.V||53<o.V)return null;"w"in o||(o.w=1),"Z"in o?(a=(i=ct(ft(o.y))).getUTCDay(),i=4<a||0===a?iy.ceil(i):iy(i),i=ny.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(a=(i=t(ft(o.y))).getDay(),i=4<a||0===a?Z_.ceil(i):Z_(i),i=Y_.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?ct(ft(o.y)).getUTCDay():t(ft(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=0|o.Z/100,o.M+=o.Z%100,ct(o)):t(o)}}function r(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=k[i in hy?t.charAt(o++):i])||0>(r=a(e,n,r)))return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var i=e.dateTime,a=e.date,o=e.time,u=e.periods,s=e.days,l=e.shortDays,c=e.months,f=e.shortMonths,d=pt(u),h=xt(u),p=pt(s),x=xt(s),g=pt(l),m=xt(l),v=pt(c),_=xt(c),y=pt(f),b=xt(f),w={a:function(e){return l[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return f[e.getMonth()]},B:function(e){return c[e.getMonth()]},c:null,d:Pt,e:Pt,f:jt,H:zt,I:It,j:Rt,L:Gt,m:Wt,M:Bt,p:function(e){return u[+(12<=e.getHours())]},Q:mn,s:vn,S:Ut,u:Vt,U:qt,V:Ht,w:$t,W:Yt,x:null,X:null,y:Xt,Y:Zt,Z:Jt,"%":gn},S={a:function(e){return l[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return f[e.getUTCMonth()]},B:function(e){return c[e.getUTCMonth()]},c:null,d:Kt,e:Kt,f:rn,H:Qt,I:en,j:tn,L:nn,m:an,M:on,p:function(e){return u[+(12<=e.getUTCHours())]},Q:mn,s:vn,S:un,u:sn,U:ln,V:cn,w:fn,W:dn,x:null,X:null,y:hn,Y:pn,Z:xn,"%":gn},k={a:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.w=m[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=x[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=b[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=_[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,t,n){return r(e,i,t,n)},d:Et,e:Et,f:Ft,H:Tt,I:Tt,j:At,L:Nt,m:kt,M:Ct,p:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.p=h[r[0].toLowerCase()],n+r[0].length):-1},Q:Mt,s:Lt,S:Dt,u:mt,U:vt,V:_t,w:gt,W:yt,x:function(e,t,n){return r(e,a,t,n)},X:function(e,t,n){return r(e,o,t,n)},y:wt,Y:bt,Z:St,"%":Ot};return w.x=t(a,w),w.X=t(o,w),w.c=t(i,w),S.x=t(a,S),S.X=t(o,S),S.c=t(i,S),{format:function(e){var n=t(e+="",w);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",lt);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",S);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,ct);return t.toString=function(){return e},t}}}(e),ly=sy.format,cy=sy.parse,fy=sy.utcFormat,dy=sy.utcParse,sy}function yn(e,t,n){var r=at((t=t||{}).type||"json");return r||D("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function(e,t,n){if(e.length){n=n||cy;var r,i,a,o,u,s,l,c=e.columns||Object.keys(e[0]);for("auto"===t&&(t=Ue(e,c)),c=Object.keys(t),r=c.map((function(e){var r,i,a=t[e];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?dy(i):n(i);if(!z_[a])throw Error("Illegal format pattern: "+e+":"+a);return z_[a]})),o=0,s=e.length,l=c.length;o<s;++o)for(i=e[o],u=0;u<l;++u)a=c[u],i[a]=r[u](i[a])}}(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function bn(e,t,n,r,i,a){var o,u,s=te({},a,my);J(n)||(n=Q(n)),void 0===r?o=function(t){e.touch(n(t))}:J(r)?(u=new Fe(null,r,i,!1),o=function(t){var r,i=n(t);u.evaluate(t),Ce(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function wn(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=J(r)?r:Q(r),(u=new Fe(null,r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,i,!1)).modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function Sn(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function kn(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function En(e,t){var n=[];return _e(e,t,(function(e){n.push(e)})),n}function An(e,t){var n={};return e.visit(t,(function(e){n[we(e)]=1})),function(e){return n[we(e)]?null:e}}function Tn(e,t,n,r){var i,a,o,u,s,l=this,c=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,o=0,u=n.length;o<u;++o)if((i=n[o]).stamp===t){if(i.fields)for(s in a=l.fields||(l.fields={}),i.fields)a[s]=1;i.changed(l.ADD)&&(c|=l.ADD),i.changed(l.REM)&&(c|=l.REM),i.changed(l.MOD)&&(c|=l.MOD)}this.changes=c}function Cn(e,t){try{t(e)}catch(t){e.error(t)}}function Dn(e){this.cmp=e,this.nodes=[]}function Nn(e,t,n,r){var i,a,o;for(i=e[n];n>t&&0>r(i,a=e[o=n-1>>1]);)e[n]=a,n=o;return e[n]=i}function Fn(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)(r=u+1)<a&&0<=n(e[u],e[r])&&(u=r),e[t]=e[u],u=2*(t=u)+1;return e[t]=o,Nn(e,i,t,n)}function On(){this._log=z(),this.logLevel(1),this._clock=0,this._rank=0;try{this._loader=Pe()}catch(e){}this._touched=ye(y_),this._pulses={},this._pulse=null,this._heap=new Dn((function(e,t){return e.qrank-t.qrank})),this._postrun=[]}function Mn(e){return function(){return this._log[e].apply(this,arguments)}}function Ln(e,t){Fe.call(this,e,null,t)}function Pn(e){var t=zn(e);return t&&t.Definition||null}function zn(e){return e=e&&e.toLowerCase(),Ey.hasOwnProperty(e)?Ey[e]:null}function In(e){return e&&e.length?1===e.length?e[0]:function(e){return function(t){for(var n=e.length,r=1,i=e[0](t)+"";r<n;++r)i+="|"+e[r](t);return i}}(e):function(){return""}}function Rn(e,t,n){return n||e+(t?"_"+t:"")}function Gn(e,t){return Ay[e](t)}function jn(e){return function(t){var n=te({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function Wn(e,t){return e.idx-t.idx}function Bn(e,t){var n=function(e,t){var n,r=e.reduce((function e(n,r){function i(t){n[t]||e(n,n[t]=Ay[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n}),e.reduce((function(e,t){return e[t.name]=t,e}),{})),i=[];for(n in r)i.push(r[n]);return i.sort(Wn)}(e,!0),r="var cell = this.cell; this.valid = 0; this.missing = 0;",i="this.cell = cell; this.init();",a="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",o="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",u="var cell = this.cell;";return n.forEach((function(e){r+=e.init,a+=e.add,o+=e.rem})),e.slice().sort(Wn).forEach((function(e){u+="t['"+e.out+"']="+e.set+";"})),u+="return t;",(i=Function("cell",i)).prototype.init=Function(r),i.prototype.add=Function("v","t",a),i.prototype.rem=Function("v","t",o),i.prototype.set=Function("t",u),i.prototype.get=t||b_,i.fields=e.map((function(e){return e.out})),i}function Un(e){var t,n,r,i,a,o,u,s=e.maxbins||20,l=e.base||10,c=k(l),f=e.divide||[5,2],d=e.extent[0],h=e.extent[1],p=h-d;if(e.step)t=e.step;else if(e.steps){for(i=p/s,a=0,o=e.steps.length;a<o&&e.steps[a]<i;++a);t=e.steps[y(0,a-1)]}else{for(n=b(k(s)/c),r=e.minstep||0,t=y(r,S(l,v(k(p)/c)-n));b(p/t)>s;)t*=l;for(a=0,o=f.length;a<o;++a)(i=t/f[a])>=r&&p/i<=s&&(t=i)}return i=k(t),u=S(l,-(0<=i?0:1+~~(-i/c))-1),(e.nice||void 0===e.nice)&&(d=d<(i=_(d/t+u)*t)?i-t:i,h=b(h/t)*t),{start:d,stop:h,step:t}}function Vn(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=qn(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=qn(t(e[a],a,e)))||r.push(n);return r}function qn(e){return null===e?NaN:+e}function Hn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $n(e){return 1===e.length&&(e=function(e){return function(t,n){return Hn(e(t),n)}}(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;0>e(t[a],n)?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;0<e(t[a],n)?i=a:r=a+1}return r}}}function Yn(e,t){let n,r;if(void 0===t)for(let t of e)null!=t&&t>=t&&(void 0===n?n=r=t:(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let a of e)null!=(a=t(a,++i,e))&&a>=a&&(void 0===n?n=r=a:(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}function Xn(e,t,n){e=+e,t=+t,n=2>(i=arguments.length)?(t=e,e=0,1):3>i?1:+n;for(var r=-1,i=0|y(0,b((t-e)/n)),a=Array(i);++r<i;)a[r]=e+r*n;return a}function Zn(e){return null===e?NaN:+e}function Jn(e,t,n=Zn){if(r=e.length){if(0>=(t=+t)||2>r)return+n(e[0],0,e);if(1<=t)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=_(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function Kn(e,t,n=0,r=e.length-1,i=Hn){for(;r>n;){if(600<r-n){const a=r-n+1,o=t-n+1,u=k(a),s=.5*E(2*u/3),l=.5*x(u*s*(a-s)/a)*(0>o-a/2?-1:1);Kn(e,t,y(n,_(t-o*s/a+l)),p(r,_(t+(a-o)*s/a+l)),i)}const a=e[t];let o=n,u=r;for(Qn(e,n,t),0<i(e[r],a)&&Qn(e,n,r);o<u;){for(Qn(e,o,u),++o,--u;0>i(e[o],a);)++o;for(;0<i(e[u],a);)--u}0===i(e[n],a)?Qn(e,n,u):(++u,Qn(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Qn(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function er(t,n,r,i){if(!t.length)return[void 0,void 0];var a,o,u,s,l=Vn(t,i),c=l.length,f=n;for(u=0,s=Array(f);u<f;++u){for(a=0,o=0;o<c;++o)a+=l[~~(e.random()*c)];s[u]=a/c}return[Jn(s.sort(Hn),r/2),Jn(s,1-r/2)]}function tr(e,t){var n=Vn(e,t);return[Jn(n.sort(Hn),.25),Jn(n,.5),Jn(n,.75)]}function nr(t,n){var r,i,a=NaN,o={mean:function(e){return arguments.length?(r=e||0,a=NaN,o):r},stdev:function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},sample:function(){var t,n,o=0,u=0;if(a==a)return o=a,a=NaN,o;do{t=(o=2*e.random()-1)*o+(u=2*e.random()-1)*u}while(0===t||1<t);return n=x(-2*k(t)/t),a=r+u*n*i,r+o*n*i},pdf:function(e){var t=E(S(e-r,2)/(-2*S(i,2)));return 1/(i*x(2*h))*t},cdf:function(e){var t,n=(e-r)/i,a=m(n);if(37<a)t=0;else{var o=E(-a*a/2);7.07106781186547>a?(t=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),t/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):t=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return 0<n?1-t:t},icdf:function(e){if(0>=e||1<=e)return NaN;var t=2*e-1,n=8*(h-3)/(3*h*(4-h)),a=2/(h*n)+k(1-S(t,2))/2,o=k(1-t*t)/n,u=(0<t?1:-1)*x(x(a*a-o)-a);return r+i*d*u}};return o.mean(t).stdev(n)}function rr(t,n){var r=nr(),i={},a=0;return i.data=function(e){return arguments.length?(t=e,a=e?e.length:0,i.bandwidth(n)):t},i.bandwidth=function(e){return arguments.length?(!(n=e)&&t&&(n=ir(t)),i):n},i.sample=function(){return t[~~(e.random()*a)]+n*r.sample()},i.pdf=function(e){for(var i=0,o=0;o<a;++o)i+=r.pdf((e-t[o])/n);return i/n/a},i.cdf=function(e){for(var i=0,o=0;o<a;++o)i+=r.cdf((e-t[o])/n);return i/a},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(t)}function ir(e){var t=e.length,n=tr(e),r=(n[2]-n[0])/1.34;return 1.06*p(x(function(e,t){let n,r=0,i=0,a=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(n=t-i,i+=n/++r,a+=n*(t-i));else{let o=-1;for(let u of e)null!=(u=t(u,++o,e))&&(u=+u)>=u&&(n=u-i,i+=n/++r,a+=n*(u-i))}return 1<r?a/(r-1):void 0}(e)),r)*S(t,-.2)}function ar(t,n){function r(e){var t,n=[],r=0;for(t=0;t<o;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<o;++t)n[t]/=r;return n}var i,a={},o=0;return a.weights=function(e){return arguments.length?(i=r(n=e||[]),a):n},a.distributions=function(e){return arguments.length?(e?(o=e.length,t=e):(o=0,t=[]),a.weights(n)):t},a.sample=function(){for(var n=e.random(),r=t[o-1],a=i[0],u=0;u<o-1;a+=i[++u])if(n<a){r=t[u];break}return r.sample()},a.pdf=function(e){for(var n=0,r=0;r<o;++r)n+=i[r]*t[r].pdf(e);return n},a.cdf=function(e){for(var n=0,r=0;r<o;++r)n+=i[r]*t[r].cdf(e);return n},a.icdf=function(){throw Error("Mixture icdf not supported.")},a.distributions(t).weights(n)}function or(t,n){null==n&&(n=null==t?1:t,t=0);var r,i,a,o={min:function(e){return arguments.length?(a=i-(r=e||0),o):r},max:function(e){return arguments.length?(a=(i=e||0)-r,o):i},sample:function(){return r+a*e.random()},pdf:function(e){return e>=r&&e<=i?1/a:0},cdf:function(e){return e<r?0:e>i?1:(e-r)/a},icdf:function(e){return 0<=e&&1>=e?r+e*a:NaN}};return o.min(t).max(n)}function ur(e){this._key=e?L(e):we,this.reset()}function sr(e){Ln.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function lr(e){Ln.call(this,null,e)}function cr(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter((function(e){return!o[r(e)]})),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?ce(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function fr(e){Ln.call(this,[],e)}function dr(e){Fe.call(this,null,hr,e)}function hr(e){return this.value&&!e.modified()?this.value:K(e.fields,e.orders)}function pr(e){Ln.call(this,null,e)}function xr(e){Ln.call(this,null,e)}function gr(e){Ln.call(this,null,e)}function mr(e){Fe.call(this,null,vr,e),this.modified(!0)}function vr(e){var t=e.expr;return this.value&&!e.modified("expr")?this.value:A((function(n){return t(n,e)}),C(t),T(t))}function _r(e){Ln.call(this,[void 0,void 0],e)}function yr(e,t){Fe.call(this,e),this.parent=t}function br(e){Ln.call(this,{},e),this._keys=re();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function wr(e){Fe.call(this,null,Sr,e)}function Sr(e){return this.value&&!e.modified()?this.value:v_(e.name)?Z(e.name).map((function(e){return L(e)})):L(e.name,e.as)}function kr(e){Ln.call(this,re(),e)}function Er(e,t){return e?e.map((function(e,n){return t[n]||T(e)})):null}function Ar(e){Ln.call(this,[],e)}function Tr(e){Ln.call(this,[],e)}function Cr(e){Ln.call(this,null,e)}function Dr(e){Ln.call(this,[],e)}function Nr(e){Ln.call(this,[],e)}function Fr(e){var t,n=e.method||By.value;return null==By[n]?void D("Unrecognized imputation method: "+n):n===By.value?(t=void 0===e.value?0:e.value,function(){return t}):By[n]}function Or(e){sr.call(this,e)}function Mr(e){Fe.call(this,null,Lr,e)}function Lr(e){return this.value&&!e.modified()?this.value:le(e.fields,e.flat)}function Pr(e){Ln.call(this,null,e)}function zr(e){Ln.call(this,{},e)}function Ir(e){Fe.call(this,null,Rr,e)}function Rr(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,a=-1/0,o=e.extents;for(t=0,n=o.length;t<n;++t)(r=o[t])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function Gr(e){Fe.call(this,null,jr,e)}function jr(e){return this.value&&!e.modified()?this.value:e.values.reduce((function(e,t){return e.concat(t)}),[])}function Wr(e){Ln.call(this,null,e)}function Br(e){sr.call(this,e)}function Ur(e,t){var n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",a=C(n).concat(C(r)),o=function(e,t,n){var r={},i=[];return n.visit(n.SOURCE,(function(t){var n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort((function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0)})),t?i.slice(0,t):i}(n,e.limit||0,t);return{key:e.key,groupby:e.groupby,ops:o.map((function(){return i})),fields:o.map((function(e){return Vr(e,n,r,a)})),as:o.map((function(e){return e+""})),modified:e.modified.bind(e)}}function Vr(e,t,n,r){return A((function(r){return t(r)===e?n(r):NaN}),r,e+"")}function qr(e){br.call(this,e)}function Hr(e){Ln.call(this,null,e)}function $r(e){Ln.call(this,null,e)}function Yr(e){Ln.call(this,null,e)}function Xr(e){Ln.call(this,[],e),this.count=0}function Zr(e){Ln.call(this,null,e)}function Jr(e){Ln.call(this,null,e),this.modified(!0)}function Kr(e){Ln.call(this,re(),e)}function Qr(e){Ln.call(this,null,e)}function ei(e){function t(e){Z(C(e)).forEach((function(e){l[e]=1}))}var n=this,r=Z(e.ops),i=Z(e.fields),a=Z(e.params),o=Z(e.as),u=n.outputs=[],s=n.windows=[],l={},c={},f=!0,d=[],h=[];t(e.sort),r.forEach((function(e,n){var r=i[n],l=T(r),p=Rn(e,l,o[n]);if(t(r),u.push(p),Hy.hasOwnProperty(e))s.push(function(e,t,n,r){var i=Hy[e](t,n);return{init:i.init||w_,update:function(e,t){t[r]=i.next(e)}}}(e,i[n],a[n],p));else{if(null==r&&"count"!==e&&D("Null aggregate field specified."),"count"===e)return void d.push(p);f=!1;var x=c[l];x||((x=c[l]=[]).field=r,h.push(x)),x.push(Gn(e,p))}})),(d.length||h.length)&&(n.cell=function(e,t,n){e=e.map((function(e){return Bn(e,e.field)}));var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new ur;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}(h,d,f)),n.inputs=Object.keys(l)}function ti(e){Ln.call(this,{},e),this._mlen=0,this._mods=[]}function ni(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,a=n.frame||[null,0],o=e.data(r),u=o.length,s=0,l=i?$n(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||Q(-1)};for(t.init();s<u;++s)ri(c,a,s,u),i&&ii(c,l),t.update(c,o[s])}function ri(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:y(0,n-m(t[0])),e.i1=null==t[1]?r:p(r,n+m(t[1])+1),e.index=n}function ii(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;0<n&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function ai(e){this.clear(),e&&this.union(e)}function oi(e,t){var n,r=[];return n={id:"gradient_"+Qy++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function ui(e){this.mark=e,this.bounds=this.bounds||new ai}function si(e){ui.call(this,e),this.items=this.items||[]}function li(e,t){return function(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}(e,t)||function(e,t){if(Ky)try{return new Ky(e,t)}catch(t){}return null}(e,t)||null}function ci(){return("undefined"==typeof Image?null:Image)||Ky&&Ky.Image||null}function fi(e){this._pending=0,this._loader=e||Pe()}function di(e){e._pending+=1}function hi(e){e._pending-=1}function pi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function xi(){return new pi}function gi(e){return function(){return e}}function mi(e){return 1<e?0:-1>e?db:f(e)}function vi(e){return 1<=e?hb:-1>=e?-hb:c(e)}function _i(e){return e.innerRadius}function yi(e){return e.outerRadius}function bi(e){return e.startAngle}function wi(e){return e.endAngle}function Si(e){return e&&e.padAngle}function ki(e,t,n,r,i,a,o,u){var s=n-e,l=r-t,c=o-i,f=u-a,d=(c*(t-a)-f*(e-i))/(f*s-c*l);return[e+d*s,t+d*l]}function Ei(e,t,n,r,i,a,o){var u=e-n,s=t-r,l=(o?a:-a)/cb(u*u+s*s),c=l*s,f=-l*u,d=e+c,h=t+f,p=n+c,x=r+f,g=(d+p)/2,m=(h+x)/2,v=p-d,_=x-h,y=v*v+_*_,b=i-a,w=d*x-p*h,S=(0>_?-1:1)*cb(ub(0,b*b*y-w*w)),k=(w*_-v*S)/y,E=(-w*v-_*S)/y,A=(w*_+v*S)/y,T=(-w*v+_*S)/y,C=k-g,D=E-m,N=A-g,F=T-m;return C*C+D*D>N*N+F*F&&(k=A,E=T),{cx:k,cy:E,x01:-c,y01:-f,x11:k*(i/b-1),y11:E*(i/b-1)}}function Ai(e){this._context=e}function Ti(e){return new Ai(e)}function Ci(e){return e[0]}function Di(e){return e[1]}function Ni(){function e(e){var u,s,l,c=e.length,f=!1;for(null==i&&(o=a(l=xi())),u=0;u<=c;++u)!(u<c&&r(s=e[u],u,e))==f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(s,u,e),+n(s,u,e));if(l)return o=null,l+""||null}var t=Ci,n=Di,r=gi(!0),i=null,a=Ti,o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:gi(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:gi(+t),e):n},e.defined=function(t){return arguments.length?(r="function"==typeof t?t:gi(!!t),e):r},e.curve=function(t){return arguments.length?(a=t,null!=i&&(o=a(i)),e):a},e.context=function(t){return arguments.length?(null==t?i=o=null:o=a(i=t),e):i},e}function Fi(){function e(e){var t,c,f,d,h,p=e.length,x=!1,g=Array(p),m=Array(p);for(null==u&&(l=s(h=xi())),t=0;t<=p;++t){if(!(t<p&&o(d=e[t],t,e))==x)if(x=!x)c=t,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),f=t-1;f>=c;--f)l.point(g[f],m[f]);l.lineEnd(),l.areaEnd()}x&&(g[t]=+n(d,t,e),m[t]=+i(d,t,e),l.point(r?+r(d,t,e):g[t],a?+a(d,t,e):m[t]))}if(h)return l=null,h+""||null}function t(){return Ni().defined(o).curve(s).context(u)}var n=Ci,r=null,i=gi(0),a=Di,o=gi(!0),u=null,s=Ti,l=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:gi(+t),r=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:gi(+t),e):n},e.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:gi(+t),e):r},e.y=function(t){return arguments.length?(i="function"==typeof t?t:gi(+t),a=null,e):i},e.y0=function(t){return arguments.length?(i="function"==typeof t?t:gi(+t),e):i},e.y1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:gi(+t),e):a},e.lineX0=e.lineY0=function(){return t().x(n).y(i)},e.lineY1=function(){return t().x(n).y(a)},e.lineX1=function(){return t().x(r).y(i)},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:gi(!!t),e):o},e.curve=function(t){return arguments.length?(s=t,null!=u&&(l=s(u)),e):s},e.context=function(t){return arguments.length?(null==t?u=l=null:l=s(u=t),e):u},e}function Oi(){}function Mi(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Li(e){this._context=e}function Pi(e){this._context=e}function zi(e){this._context=e}function Ii(e,t){this._basis=new Li(e),this._beta=t}function Ri(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Gi(e,t){this._context=e,this._k=(1-t)/6}function ji(e,t){this._context=e,this._k=(1-t)/6}function Wi(e,t){this._context=e,this._k=(1-t)/6}function Bi(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>fb){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>fb){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Ui(e,t){this._context=e,this._alpha=t}function Vi(e,t){this._context=e,this._alpha=t}function qi(e,t){this._context=e,this._alpha=t}function Hi(e){this._context=e}function $i(e){return 0>e?-1:1}function Yi(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||void 0),o=(n-e._y1)/(i||void 0);return($i(a)+$i(o))*p(m(a),m(o),.5*m((a*i+o*r)/(r+i)))||0}function Xi(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Zi(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function Ji(e){this._context=e}function Ki(e){this._context=new Qi(e)}function Qi(e){this._context=e}function ea(e){this._context=e}function ta(e){var t,n,r=e.length-1,i=Array(r),a=Array(r),o=Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;0<=t;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function na(e,t){this._context=e,this._t=t}function ra(e,t,n){var r=kb.hasOwnProperty(e)&&kb[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function ia(e){var t,n,r,i,a,o,u,s,l,c,f,d=[];for(s=0,c=(t=e.slice().replace(Ab[0],"###$1").split(Ab[1]).slice(1)).length;s<c;++s){for(r=(n=t[s]).slice(1).trim().replace(Ab[2],"$1###$2").split(Ab[3]),i=[o=n.charAt(0)],l=0,f=r.length;l<f;++l)(a=+r[l])===a&&i.push(a);if(u=Eb[o.toLowerCase()],i.length-1>u)for(l=1,f=i.length;l<f;l+=u)d.push([o].concat(i.slice(l,l+u)));else d.push(i)}return d}function aa(e){var t=Db.call(e);if(Cb[t])return Cb[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=e[6],f=e[7],d=f*o,h=-c*u,p=c*o,x=f*u,g=s(i),m=l(i),v=s(a),_=l(a),y=.5*(a-i),b=l(.5*y),w=8/3*b*b/l(y),S=n+g-w*m,k=r+m+w*g,E=n+v,A=r+_,T=E+w*_,C=A-w*v;return Cb[t]=[d*S+h*k,p*S+x*k,d*T+h*C,p*T+x*C,d*E+h*A,p*E+x*A]}function oa(e,t){var n=Nb[0]=e[0];if("a"===n||"A"===n)Nb[1]=t*e[1],Nb[2]=t*e[2],Nb[3]=e[3],Nb[4]=e[4],Nb[5]=e[5],Nb[6]=t*e[6],Nb[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)Nb[r]=t*e[r];return Nb}function ua(e,t,n,r,i){var a,o,u,s,l,c=null,f=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var x=0,g=t.length;x<g;++x){switch(a=t[x],1!==i&&(a=oa(a,i)),a[0]){case"l":f+=a[1],d+=a[2],e.lineTo(f+n,d+r);break;case"L":f=a[1],d=a[2],e.lineTo(f+n,d+r);break;case"h":f+=a[1],e.lineTo(f+n,d+r);break;case"H":f=a[1],e.lineTo(f+n,d+r);break;case"v":d+=a[1],e.lineTo(f+n,d+r);break;case"V":d=a[1],e.lineTo(f+n,d+r);break;case"m":f+=a[1],d+=a[2],e.moveTo(f+n,d+r);break;case"M":f=a[1],d=a[2],e.moveTo(f+n,d+r);break;case"c":o=f+a[5],u=d+a[6],h=f+a[3],p=d+a[4],e.bezierCurveTo(f+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),f=o,d=u;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,f+n,d+r);break;case"s":o=f+a[3],u=d+a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,f+a[1]+n,d+a[2]+r,o+n,u+r),h=f+a[1],p=d+a[2],f=o,d=u;break;case"S":o=a[3],u=a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),f=o,d=u,h=a[1],p=a[2];break;case"q":o=f+a[3],u=d+a[4],h=f+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),f=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),f=o,d=u,h=a[1],p=a[2];break;case"t":o=f+a[1],u=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-s,p=2*d-l):"q"===c[0]&&(h=2*f-h,p=2*d-p),s=h,l=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),d=u,h=(f=o)+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*f-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),f=o,d=u;break;case"a":sa(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+r]),f+=a[6],d+=a[7];break;case"A":sa(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}}function sa(e,t,n,r){for(var i,a=function(e,t,n,r,i,a,o,c,f){var d=Db.call(arguments);if(Tb[d])return Tb[d];var p=o*(h/180),g=l(p),v=s(p),_=v*(c-e)*.5+g*(f-t)*.5,y=v*(f-t)*.5-g*(c-e)*.5,w=_*_/((n=m(n))*n)+y*y/((r=m(r))*r);1<w&&(n*=w=x(w),r*=w);var S=v/n,k=g/n,E=-g/r,A=v/r,T=S*c+k*f,C=E*c+A*f,D=S*e+k*t,N=E*e+A*t,F=1/((D-T)*(D-T)+(N-C)*(N-C))-.25;0>F&&(F=0);var O=x(F);a==i&&(O=-O);var M=.5*(T+D)-O*(N-C),L=.5*(C+N)+O*(D-T),P=u(C-L,T-M),z=u(N-L,D-M),I=z-P;0>I&&1===a?I+=2*h:0<I&&0==a&&(I-=2*h);for(var R=b(m(I/(.5*h+.001))),G=[],j=0;j<R;++j){var W=P+j*I/R,B=P+(j+1)*I/R;G[j]=[M,L,W,B,n,r,g,v]}return Tb[d]=G}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),o=0;o<a.length;++o)i=aa(a[o]),e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}function la(e){return Ob.hasOwnProperty(e)?Ob[e]:function(e){if(!Mb.hasOwnProperty(e)){var t=ia(e);Mb[e]={draw:function(e,n){ua(e,t,0,0,x(n)/2)}}}return Mb[e]}(e)}function ca(e){return e.x}function fa(e){return e.y}function da(e){return e.width}function ha(e){return e.height}function pa(e){return function(){return e}}function xa(){function e(e,u,s){var l,c=null==u?+t.call(this,e):u,f=null==s?+n.call(this,e):s,d=+r.call(this,e),h=+i.call(this,e),p=+a.call(this,e);if(o||(o=l=xi()),0>=p)o.rect(c,f,d,h);else{var x=c+d,g=f+h;o.moveTo(c+p,f),o.lineTo(x-p,f),o.quadraticCurveTo(x,f,x,f+p),o.lineTo(x,g-p),o.quadraticCurveTo(x,g,x-p,g),o.lineTo(c+p,g),o.quadraticCurveTo(c,g,c,g-p),o.lineTo(c,f+p),o.quadraticCurveTo(c,f,c+p,f),o.closePath()}return l?(o=null,l+""||null):void 0}var t=ca,n=fa,r=da,i=ha,a=pa(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:pa(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:pa(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:pa(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:pa(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:pa(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function ga(){function e(e,t,n){var r=n/2;if(o){var i=l-t,a=e-s;if(i||a){var d=x(i*i+a*a),h=(i/=d)*c,p=(a/=d)*c,g=u(a,i);f.moveTo(s-h,l-p),f.lineTo(e-i*r,t-a*r),f.arc(e,t,r,g-Lb,g),f.lineTo(s+h,l+p),f.arc(s,l,c,g,g+Lb)}else f.arc(e,t,r,0,2*Lb);f.closePath()}else o=1;s=e,l=t,c=r}function t(t){var u,s,l,c=t.length,d=!1;for(null==f&&(f=l=xi()),u=0;u<=c;++u)!(u<c&&a(s=t[u],u,t))==d&&(d=!d)&&(o=0),d&&e(+n(s,u,t),+r(s,u,t),+i(s,u,t));if(l)return f=null,l+""||null}var n,r,i,a,o,s,l,c,f=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(f=null==e?null:e,t):f},t}function ma(e){return e.x||0}function va(e){return e.y||0}function _a(e){return e.cornerRadius||0}function ya(e){return!1!==e.defined}function ba(e,t,n,r){return Gb.context(e)(t,n,r)}function wa(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null==t.strokeWidth?1:+t.strokeWidth),e}function Sa(e){return Sb=e,Sa}function ka(){}function Ea(e,t){Sb.add(e,t)}function Aa(e,t,n){return n.id?function(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,l=t.stops,c=0,f=l.length,d=e.createLinearGradient(a,o,u,s);c<f;++c)d.addColorStop(l[c].offset,l[c].color);return d}(e,n,t.bounds):n}function Ta(e,t,n){return!!(0<(n*=null==t.fillOpacity?1:t.fillOpacity))&&(e.globalAlpha=n,e.fillStyle=Aa(e,t,t.fill),!0)}function Ca(e,t,n){var r=null==(r=t.strokeWidth)?1:r;return!(0>=r||(n*=null==t.strokeOpacity?1:t.strokeOpacity,!(0<n)||(e.globalAlpha=n,e.strokeStyle=Aa(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Hb),e.lineDashOffset=t.strokeDashOffset||0),0)))}function Da(e,t){return e.zindex-t.zindex||e.index-t.index}function Na(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(Da)}function Fa(e,t){var n,r,i=e.items;if(i&&i.length){var a=Na(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function Oa(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=Na(e);for(a&&a.length&&(i=a),r=i.length;0<=--r;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;0<=--r;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function Ma(e){return function(t,n,r){Fa(n,(function(n){(!r||r.intersects(n.bounds))&&Pa(e,t,n,n)}))}}function La(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&Pa(e,t,n.items[0],n.items)}}function Pa(e,t,n,r){var i=null==n.opacity?1:n.opacity;0===i||e(t,r)||(n.fill&&Ta(t,n,i)&&t.fill(),n.stroke&&Ca(t,n,i)&&t.stroke())}function za(e){return e||(e=$b),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,Oa(n,(function(n){var u=n.bounds;return u&&!u.contains(a,o)||!u?void 0:e(t,n,r,i,a,o)?n:void 0}))}}function Ia(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,l=null==t?s.fill:t,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null==o?1:o,n.lineCap=null==u?"butt":u),!e(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function Ra(e){return za(Ia(e))}function Ga(e,t){return"translate("+e+","+t+")"}function ja(e){return Ga(e.x||0,e.y||0)}function Wa(e,t){function n(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",ja(n)),e("d",t(null,n))},bound:function(e,n){return t(Sa(e),n),wa(e,n).translate(n.x||0,n.y||0)},draw:Ma(n),pick:Ra(n)}}function Ba(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var i=Ia(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(Sa(e),r),wa(e,r[0]))},draw:La(r),pick:function(e,t,n,r,a,o){var u=t.items,s=t.bounds;return u&&u.length&&(!s||s.contains(a,o))?(n*=e.pixelRatio,r*=e.pixelRatio,i(e,u,n,r)?u[0]:null):null},tip:n}}function Ua(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+Zb++),o=i.clipping[a]||(i.clipping[a]={id:a});return J(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function Va(e,t){var n=t.stroke?Jb:0;e.beginPath(),ba(e,t,n,n)}function qa(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function Ha(e,t){return"center"===e?t/2:"right"===e?t:0}function $a(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function Ya(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=ia(n)).path=n),ua(e,r,t.x,t.y)}function Xa(e,t){e.beginPath(),ba(e,t)}function Za(e,t,n){var r,i,a,o;return!(!t.stroke||!Ca(e,t,n)||(r=t.x||0,i=t.y||0,a=null==t.x2?r:t.x2,o=null==t.y2?i:t.y2,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),0))}function Ja(e){return qb=to(e),Ka(ro(e))}function Ka(e){return~~(.8*e.length*qb)}function Qa(e){return Vb.font=ao(e),eo(ro(e))}function eo(e){return Vb.measureText(e).width}function to(e){return null==e.fontSize?11:e.fontSize}function no(e){Vb=e&&(Vb=li(1,1))?Vb.getContext("2d"):null,ow.width=Vb?Qa:Ja}function ro(e){var t=e.text;return null==t?"":0<e.limit?function(e){var t,n=+e.limit,r=e.text+"";if(Vb?(Vb.font=ao(e),t=eo):(qb=to(e),t=Ka),t(r)<n)return r;var i,a=e.ellipsis||"…",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}(e):t+""}function io(e,t){var n=e.font;return(t&&n?(n+"").replace(/"/g,"'"):n)||"sans-serif"}function ao(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+to(e)+"px "+io(e,t)}function oo(e){var t=e.baseline,n=to(e);return v("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function uo(e,t,n){var r,i,a=ow.height(t),o=t.align,u=t.radius||0,c=t.x||0,f=t.y||0,d=t.dx||0,p=(t.dy||0)+oo(t)-v(.8*a);return u&&(i=(t.theta||0)-h/2,c+=u*s(i),f+=u*l(i)),r=ow.width(t),"center"===o?d-=r/2:"right"===o&&(d-=r),e.set(d+=c,p+=f,d+r,p+a),t.angle&&!n&&e.rotate(t.angle*h/180,c,f),e.expand(n||!r?0:1)}function so(e,t,n){var r=fw[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new ai),e,n)}function lo(e,t,n){var r,i,a,o,u=fw[e.marktype],s=u.bound,l=e.items,c=l&&l.length;if(u.nested)return c?a=l[0]:(dw.mark=e,a=dw),o=so(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new ai,c)for(r=0,i=l.length;r<i;++r)t.union(so(l[r],s,n));return e.bounds=t}function co(e,t){return JSON.stringify(e,hw,t)}function fo(e){return function e(t){var n,r,i,a=t.marktype,o=t.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=t,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&e(o[r]);return a&&lo(t),t}("string"==typeof e?JSON.parse(e):e)}function ho(e){arguments.length?this.root=fo(e):(this.root=po({marktype:"group",name:"root",role:"frame"}),this.root.items=[new si(this.root)])}function po(e,t){return{bounds:new ai,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function xo(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function go(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function mo(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=xo(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function vo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function _o(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function yo(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function bo(e,t){this._active=null,this._handlers={},this._loader=e||Pe(),this._tooltip=t||wo}function wo(e,t,n,r){e.element().setAttribute("title",r||"")}function So(e){this._el=null,this._bgcolor=null,this._loader=new fi(e)}function ko(e,t){bo.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function Eo(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function Ao(e){return function(t){this.fire(e,t),this._active=null}}function To(e){So.call(this,e),this._redraw=!1,this._dirty=new ai}function Co(e,t){bo.call(this,e,t);var n=this;n._hrefHandler=Do(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=Do(n,(function(e,t){n.handleTooltip(e,t,"mouseout"!==e.type)}))}function Do(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function No(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function Fo(e){return"</"+e+">"}function Oo(e){So.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Mo(e,t,n){var r,i,a;for((e=mo(e,n,"linearGradient",Aw)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)(a=mo(e,r,"stop",Aw)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);vo(e,r)}function Lo(e,t,n){var r;(e=mo(e,n,"clipPath",Aw)).setAttribute("id",t.id),t.path?(r=mo(e,0,"path",Aw)).setAttribute("d",t.path):((r=mo(e,0,"rect",Aw)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function Po(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function zo(e,t,n,r,i){var a,o=e._svg;if(!o&&(o=xo(a=t.ownerDocument,r,Aw),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=xo(a,"path",Aw);u.setAttribute("class","background"),o.appendChild(u),u.__data__=e;var s=xo(a,"g",Aw);o.appendChild(s),s.__data__=e}return(o.ownerSVGElement!==i||function(e){var t=e.mark||e.group;return t&&1<t.items.length}(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Io(e,t,n){n!==Nw[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Nw[t]=n)}function Ro(e,t,n){t===Nw[e]||(null==t?n?Dw.removeAttributeNS(n,e):Dw.removeAttribute(e):n?Dw.setAttributeNS(n,e,t):Dw.setAttribute(e,t),Nw[e]=t)}function Go(){var e;return void 0===window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function jo(e){So.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function Wo(e,t,n,r){Ow[r||e]=t}function Bo(e,t,n,r){if(null==e)return"";var i,a,o,u,s,l="";for("bgrect"===n&&!1===t.interactive&&(l+="pointer-events: none; "),"text"===n&&(l+="font-family: "+io(e)+"; ",l+="font-size: "+to(e)+"px; ",e.fontStyle&&(l+="font-style: "+e.fontStyle+"; "),e.fontVariant&&(l+="font-variant: "+e.fontVariant+"; "),e.fontWeight&&(l+="font-weight: "+e.fontWeight+"; ")),i=0,a=Ew.length;i<a;++i)o=Ew[i],u=kw[o],null==(s=e[o])?"fill"===u&&(l+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(r.gradient[s.id]=s,s="url(#"+s.id+")"),l+=u+": "+s+"; "):l+=u+": none; ";return l?'style="'+l.trim()+'"':null}function Uo(e,t){return e=((e||"")+"").toLowerCase(),1<arguments.length?(zw[e]=t,this):zw[e]}function Vo(e){var t=e.clip;if(J(t))t(Sa(Iw.clear()));else{if(!t)return;Iw.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(Iw)}function qo(e,t,n){return!(e!==t)||("path"===n?Ho(e,t):e instanceof Date&&t instanceof Date?+e==+t:ue(e)&&ue(t)?m(e-t)<=Rw:e&&t&&(F(e)||F(t))?null!=e&&null!=t&&function(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;0<=r;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;0<=r;r--)if(n=i[r],!qo(e[n],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function Ho(e,t){return qo(ia(e),ia(t))}function $o(e){Ln.call(this,null,e)}function Yo(e,t,n){return t(e.bounds.clear(),e,n)}function Xo(e){Ln.call(this,0,e)}function Zo(e){Ln.call(this,null,e)}function Jo(e){Ln.call(this,null,e)}function Ko(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function Qo(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(Ko(i,t=e[n].bounds))return!0}function eu(e){var t=e.bounds;return 1<t.width()&&1<t.height()}function tu(e){return e.forEach((function(e){e.opacity=1})),e}function nu(e,t){return e.reflow(t.modified()).modifies("opacity")}function ru(e){Ln.call(this,null,e)}function iu(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function au(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function ou(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function uu(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function su(e,t){return e.bounds[t]}function lu(e,t,n){var r=F(e)?e[t]:e;return null==r?void 0===n?0:n:r}function cu(e){return 0>e?b(-e):0}function fu(e,t,n){function r(e,t){return _(p(e,t))}function i(e,t){return b(y(e,t))}var a,o,u,s,l,c,f,d,h,x,g,m,v=function(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(n=(t=r[a]).items,"group"===t.marktype)switch(t.role){case"axis":case"legend":break;case"row-header":iu(n,o.rowheaders);break;case"row-footer":iu(n,o.rowfooters);break;case"column-header":iu(n,o.colheaders);break;case"column-footer":iu(n,o.colfooters);break;case"row-title":o.rowtitle=n[0];break;case"column-title":o.coltitle=n[0];break;default:iu(n,o.marks)}return o}(t),w=v.marks,S="flush"===n.bounds,k=S?au:ou,E=new ai(0,0,0,0),A=lu(n.align,"column"),T=lu(n.align,"row"),C=lu(n.padding,"column"),D=lu(n.padding,"row"),N=n.offset,F=t.columns||n.columns||w.length,O=0>F?1:b(w.length/F),M=[],L=[],P=0,z=[],I=[],R=0,G=w.length;for(o=0;o<F;++o)L[o]=0;for(o=0;o<O;++o)I[o]=0;for(o=0;o<G;++o)l=k(w[o]),u=o%F,s=~~(o/F),f=b(k(w[o]).x2),d=b(k(w[o]).y2),P=y(P,f),R=y(R,d),L[u]=y(L[u],f),I[s]=y(I[s],d),M.push(C+cu(l.x1)),z.push(D+cu(l.y1)),e.dirty(w[o]);for(o=0;o<G;++o)0==o%F&&(M[o]=0),o<F&&(z[o]=0);if("each"===A)for(u=1;u<F;++u){for(m=0,o=u;o<G;o+=F)m<M[o]&&(m=M[o]);for(o=u;o<G;o+=F)M[o]=m+L[u-1]}else if("all"===A){for(m=0,o=0;o<G;++o)o%F&&m<M[o]&&(m=M[o]);for(o=0;o<G;++o)o%F&&(M[o]=m+P)}else for(A=!1,u=1;u<F;++u)for(o=u;o<G;o+=F)M[o]+=L[u-1];if("each"===T)for(s=1;s<O;++s){for(m=0,a=(o=s*F)+F;o<a;++o)m<z[o]&&(m=z[o]);for(o=s*F;o<a;++o)z[o]=m+I[s-1]}else if("all"===T){for(m=0,o=F;o<G;++o)m<z[o]&&(m=z[o]);for(o=F;o<G;++o)z[o]=m+R}else for(T=!1,s=1;s<O;++s)for(a=(o=s*F)+F;o<a;++o)z[o]+=I[s-1];for(h=0,o=0;o<G;++o)f=(c=w[o]).x||0,c.x=h=M[o]+(o%F?h:0),c.bounds.translate(h-f,0);for(u=0;u<F;++u)for(x=0,o=u;o<G;o+=F)d=(c=w[o]).y||0,c.y=x+=z[o],c.bounds.translate(0,x-d);if(lu(n.center,"column")&&1<O&&A)for(o=0;o<G;++o)c=w[o],0<(h=(l="all"===A?P:L[o%F])-k(c).x2)&&(c.x+=f=h/2,c.bounds.translate(f,0));if(lu(n.center,"row")&&1!==F&&T)for(o=0;o<G;++o)c=w[o],0<(x=(l="all"===T?R:I[~~(o/F)])-k(c).y2)&&(c.y+=d=x/2,c.bounds.translate(0,d));for(o=0;o<G;++o)w[o].mark.bounds.clear();for(o=0;o<G;++o)c=w[o],e.dirty(c),E.union(c.mark.bounds.union(c.bounds));k=S?uu:su,g=lu(n.headerBand,"row",null),h=du(e,v.rowheaders,w,0,O,-lu(N,"rowHeader"),r,0,k,"x1",0,F,1,g),g=lu(n.headerBand,"column",null),x=du(e,v.colheaders,w,0,F,-lu(N,"columnHeader"),r,1,k,"y1",0,1,F,g),g=lu(n.footerBand,"row",null),du(e,v.rowfooters,w,0,O,lu(N,"rowFooter"),i,0,k,"x2",F-1,F,1,g),g=lu(n.footerBand,"column",null),du(e,v.colfooters,w,0,F,lu(N,"columnFooter"),i,1,k,"y2",O*F-F,1,F,g),v.rowtitle&&(m=h-lu(N,"rowTitle"),g=lu(n.titleBand,"row",.5),hu(e,v.rowtitle,m,0,E,g)),v.coltitle&&(m=x-lu(N,"columnTitle"),g=lu(n.titleBand,"column",.5),hu(e,v.coltitle,m,1,E,g))}function du(e,t,n,r,i,a,o,u,s,l,c,f,d,h){var p,x,g,m,_,y,b,w,S,k=n.length,E=0,A=0;if(!k)return E;for(p=c;p<k;p+=f)n[p]&&(E=o(E,s(n[p],l)));if(!t.length)return E;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),E+=a,x=0,m=t.length;x<m;++x)e.dirty(t[x]),t[x].mark.bounds.clear();for(p=c,x=0,m=t.length;x<m;++x,p+=f){for(_=(y=t[x]).mark.bounds,g=p;0<=g&&null==(b=n[g]);g-=d);u?(w=null==h?b.x:v(b.bounds.x1+h*b.bounds.width()),S=E):(w=E,S=null==h?b.y:v(b.bounds.y1+h*b.bounds.height())),_.union(y.bounds.translate(w-(y.x||0),S-(y.y||0))),y.x=w,y.y=S,e.dirty(y),A=o(A,_[l])}return A}function hu(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=v(i.x1+a*i.width()):u=v(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function pu(e){Ln.call(this,null,e)}function xu(e,t,n){var r,i,a,o,u,s,l=t.items,c=y(0,t.width||0),f=y(0,t.height||0),d=(new ai).set(0,0,c,f),h=d.clone(),p=d.clone(),x=[];for(u=0,s=l.length;u<s;++u)switch(i=l[u],i.role){case"axis":(o=mu(i)?h:p).union(vu(e,i,c,f));break;case"title":r=i;break;case"legend":x.push(i);break;case"frame":case"scope":case"row-header":case"row-footer":case"row-title":case"column-header":case"column-footer":case"column-title":h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(x.length)for(a={leftWidth:yu(e,x),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=x.length;u<s;++u)if(o=bu(e,x[u],a,h,p,c,f),n.autosize&&"fit"===n.autosize.type){var g=x[u].items[0].datum.orient;"left"===g||"right"===g?d.add(o.x1,0).add(o.x2,0):("top"===g||"bottom"===g)&&d.add(0,o.y1).add(0,o.y2)}else d.union(o);d.union(h).union(p),r&&d.union(function(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,l=o.anchor,c=o.offset,f=o.bounds,d=0,h="left"===u||"right"===u?r:n,p=0,x=0;return"group"===s?"left"===u&&(d=r,h=0):"left"===u?(d=i.y2,h=i.y1):"right"===u?(d=i.y1,h=i.y2):(d=i.x1,h=i.x2),a="start"===l?d:"end"===l?h:(d+h)/2,Bw.clear().union(f),"top"===u?(p=a,x=i.y1-c):"left"===u?(p=i.x1-c,x=a):"right"===u?(p=i.x2+c,x=a):"bottom"===u?(p=a,x=i.y2+c):(p=o.x,x=o.y),f.translate(p-o.x,x-o.y),gu(o,"x",p)|gu(o,"y",x)&&(o.bounds=Bw,e.dirty(o),o.bounds=f,e.dirty(o)),t.bounds.clear().union(f)}(e,r,c,f,d)),function(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(1>e._autosize)&&a){var l=y(0,t.width||0),c=y(0,b(-n.x1)),f=y(0,b(n.x2-l)),d=y(0,t.height||0),h=y(0,b(-n.y1)),p=y(0,b(n.y2-d));"padding"===i.contains&&(o-=s.left+s.right,u-=s.top+s.bottom),"none"===a?(c=0,h=0,l=o,d=u):"fit"===a?(l=y(0,o-c-f),d=y(0,u-h-p)):"fit-x"===a?(l=y(0,o-c-f),u=d+h+p):"fit-y"===a?(o=l+c+f,d=y(0,u-h-p)):"pad"===a&&(o=l+c+f,u=d+h+p),e._resizeView(o,u,l,d,[c,h],i.resize)}}(e,t,d,n)}function gu(e,t,n){return e[t]===n?0:(e[t]=n,1)}function mu(e){var t=e.items[0].datum.orient;return"left"===t||"right"===t}function vu(e,t,n,r){var i,a,o=t.items[0],u=o.datum,s=u.orient,l=function(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(u),c=o.range,f=o.offset,d=o.position,h=o.minExtent,x=o.maxExtent,g=u.title&&o.items[l[2]].items[0],m=o.titlePadding,v=o.bounds,_=0,b=0;return Bw.clear().union(v),v.clear(),-1<(i=l[0])&&v.union(o.items[i].bounds),-1<(i=l[1])&&v.union(o.items[i].bounds),"top"===s?(_=d||0,b=-f,a=y(h,p(x,-v.y1)),g&&(a=_u(g,a,m,0,-1,v)),v.add(0,-a).add(c,0)):"left"===s?(_=-f,b=d||0,a=y(h,p(x,-v.x1)),g&&(a=_u(g,a,m,1,-1,v)),v.add(-a,0).add(0,c)):"right"===s?(_=n+f,b=d||0,a=y(h,p(x,v.x2)),g&&(a=_u(g,a,m,1,1,v)),v.add(0,0).add(a,c)):"bottom"===s?(_=d||0,b=r+f,a=y(h,p(x,v.y2)),g&&(a=_u(g,a,m,0,1,v)),v.add(0,0).add(c,a)):(_=o.x,b=o.y),wa(v.translate(_,b),o),gu(o,"x",_+Ww)|gu(o,"y",b+Ww)&&(o.bounds=Bw,e.dirty(o),o.bounds=v,e.dirty(o)),o.mark.bounds.clear().union(v)}function _u(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function yu(e,t){return t.reduce((function(t,n){var r=n.items[0];if(function(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}(e,r,r.items[0].items[0]),"left"===r.datum.orient){var i=Bw.clear();r.items.forEach((function(e){i.union(e.bounds)})),t=y(t,b(i.width()+2*r.padding-1))}return t}),0)}function bu(e,t,n,r,i,a,o){var u,s,l,c=t.items[0],f=c.datum,d=f.orient,h=c.offset,p=c.bounds,x=0,g=0;return"top"===d||"bottom"===d?(l=i,x=n[d]):("left"===d||"right"===d)&&(l=r,g=n[d]),Bw.clear().union(p),p.clear(),c.items.forEach((function(e){p.union(e.bounds)})),u=2*c.padding-1,s=2*c.padding-1,p.empty()||(u=b(p.width()+u),s=b(p.height()+s)),"symbol"===f.type&&function(e){var t=e.reduce((function(e,t){return e[t.column]=y(t.bounds.x2-t.x,e[t.column]||0),e}),{});e.forEach((function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(c.items[0].items[0].items[0].items),"left"===d?(x-=n.leftWidth+h-_(l.x1),n.left+=s+n.margin):"right"===d?(x+=h+b(l.x2),n.right+=s+n.margin):"top"===d?(g-=s+h-_(l.y1),n.top+=u+n.margin):"bottom"===d?(g+=h+b(l.y2),n.bottom+=u+n.margin):"top-left"===d?(x+=h,g+=h):"top-right"===d?(x+=a-u-h,g+=h):"bottom-left"===d?(x+=h,g+=o-s-h):"bottom-right"===d?(x+=a-u-h,g+=o-s-h):(x=c.x,g=c.y),wa(p.set(x,g,x+u,g+s),c),gu(c,"x",x)|gu(c,"width",u)|gu(c,"y",g)|gu(c,"height",s)&&(c.bounds=Bw,e.dirty(c),c.bounds=p,e.dirty(c)),c.mark.bounds.clear().union(p)}function wu(e,t,n){var r=e-t+2*n;return e?0<r?r:1:0}function Su(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ku(e){return 1===e.length&&(e=function(e){return function(t,n){return Su(e(t),n)}}(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;0>e(t[a],n)?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;0<e(t[a],n)?i=a:r=a+1}return r}}}function Eu(e){return null===e?NaN:+e}function Au(e,t,n){var r,i,a,o,u=-1;if(n=+n,(e=+e)==(t=+t)&&0<n)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=Tu(e,t,n))||!isFinite(o))return[];if(0<o)for(e=b(e/o),t=_(t/o),a=Array(i=b(t-e+1));++u<i;)a[u]=(e+u)*o;else for(e=_(e*o),t=b(t*o),a=Array(i=b(e-t+1));++u<i;)a[u]=(e-u)/o;return r&&a.reverse(),a}function Tu(e,t,n){var r=(t-e)/y(0,n),i=_(k(r)/g),a=r/S(10,i);return 0<=i?(a>=qw?10:a>=Hw?5:a>=$w?2:1)*S(10,i):-S(10,-i)/(a>=qw?10:a>=Hw?5:a>=$w?2:1)}function Cu(e,t,n){var r=m(t-e)/y(0,n),i=S(10,_(k(r)/g)),a=r/i;return a>=qw?i*=10:a>=Hw?i*=5:a>=$w&&(i*=2),t<e?-i:i}function Du(e,t,n){if(null==n&&(n=Eu),r=e.length){if(0>=(t=+t)||2>r)return+n(e[0],0,e);if(1<=t)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=_(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function Nu(){}function Fu(e,t){var n=new Nu;if(e instanceof Nu)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function Ou(){function e(r,a,o,u){if(a>=i.length)return null!=t&&r.sort(t),null==n?r:n(r);for(var s,l,c,f=-1,d=r.length,h=i[a++],p=Fu(),x=o();++f<d;)(c=p.get(s=h(l=r[f])+""))?c.push(l):p.set(s,[l]);return p.each((function(t,n){u(x,n,e(t,a,o,u))})),x}var t,n,r,i=[],a=[];return r={object:function(t){return e(t,0,Mu,Lu)},map:function(t){return e(t,0,Pu,zu)},entries:function(t){return function e(t,r){if(++r>i.length)return t;var o,u=a[r-1];return null!=n&&r>=i.length?o=t.entries():(o=[],t.each((function(t,n){o.push({key:n,values:e(t,r)})}))),null==u?o:o.sort((function(e,t){return u(e.key,t.key)}))}(e(t,0,Pu,zu),0)},key:function(e){return i.push(e),r},sortKeys:function(e){return a[i.length-1]=e,r},sortValues:function(e){return t=e,r},rollup:function(e){return n=e,r}}}function Mu(){return{}}function Lu(e,t,n){e[t]=n}function Pu(){return Fu()}function zu(e,t,n){e.set(t,n)}function Iu(){}function Ru(e){function t(t){var a=t+"",o=n.get(a);if(!o){if(i!==Kw)return i;n.set(a,o=r.push(t))}return e[(o-1)%e.length]}var n=Fu(),r=[],i=Kw;return e=null==e?[]:Jw.call(e),t.domain=function(e){if(!arguments.length)return r.slice();r=[],n=Fu();for(var i,a,o=-1,u=e.length;++o<u;)n.has(a=(i=e[o])+"")||n.set(a,r.push(i));return t},t.range=function(n){return arguments.length?(e=Jw.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(i=e,t):i},t.copy=function(){return Ru().domain(r).range(e).unknown(i)},t}function Gu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ju(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Wu(){}function Bu(e){var t;return e=(e+"").trim().toLowerCase(),(t=eS.exec(e))?new $u(15&(t=parseInt(t[1],16))>>8|240&t>>4,15&t>>4|240&t,(15&t)<<4|15&t,1):(t=tS.exec(e))?Uu(parseInt(t[1],16)):(t=nS.exec(e))?new $u(t[1],t[2],t[3],1):(t=rS.exec(e))?new $u(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=iS.exec(e))?Vu(t[1],t[2],t[3],t[4]):(t=aS.exec(e))?Vu(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=oS.exec(e))?Xu(t[1],t[2]/100,t[3]/100,1):(t=uS.exec(e))?Xu(t[1],t[2]/100,t[3]/100,t[4]):sS.hasOwnProperty(e)?Uu(sS[e]):"transparent"===e?new $u(NaN,NaN,NaN,0):null}function Uu(e){return new $u(255&e>>16,255&e>>8,255&e,1)}function Vu(e,t,n,r){return 0>=r&&(e=t=n=NaN),new $u(e,t,n,r)}function qu(e){return e instanceof Wu||(e=Bu(e)),e?new $u((e=e.rgb()).r,e.g,e.b,e.opacity):new $u}function Hu(e,t,n,r){return 1===arguments.length?qu(e):new $u(e,t,n,null==r?1:r)}function $u(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Yu(e){return(16>(e=y(0,p(255,v(e)||0)))?"0":"")+e.toString(16)}function Xu(e,t,n,r){return 0>=r?e=t=n=NaN:0>=n||1<=n?e=t=NaN:0>=t&&(e=NaN),new Ku(e,t,n,r)}function Zu(e){if(e instanceof Ku)return new Ku(e.h,e.s,e.l,e.opacity);if(e instanceof Wu||(e=Bu(e)),!e)return new Ku;if(e instanceof Ku)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=p(t,n,r),a=y(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=.5>s?a+i:2-a-i,o*=60):u=0<s&&1>s?0:o,new Ku(o,u,s,e.opacity)}function Ju(e,t,n,r){return 1===arguments.length?Zu(e):new Ku(e,t,n,null==r?1:r)}function Ku(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Qu(e,t,n){return 255*(60>e?t+(n-t)*e/60:180>e?n:240>e?t+(n-t)*(240-e)/60:t)}function es(e){if(e instanceof ns)return new ns(e.l,e.a,e.b,e.opacity);if(e instanceof ls){if(isNaN(e.h))return new ns(e.l,0,0,e.opacity);var t=e.h*lS;return new ns(e.l,s(t)*e.c,l(t)*e.c,e.opacity)}e instanceof $u||(e=qu(e));var n,r,i=os(e.r),a=os(e.g),o=os(e.b),u=rs((.2225045*i+.7168786*a+.0606169*o)/1);return i===a&&a===o?n=r=u:(n=rs((.4360747*i+.3850649*a+.1430804*o)/fS),r=rs((.0139322*i+.0971045*a+.7141733*o)/dS)),new ns(116*u-16,500*(n-u),200*(u-r),e.opacity)}function ts(e,t,n,r){return 1===arguments.length?es(e):new ns(e,t,n,null==r?1:r)}function ns(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function rs(e){return e>gS?S(e,1/3):e/xS+hS}function is(e){return e>pS?e*e*e:xS*(e-hS)}function as(e){return 255*(.0031308>=e?12.92*e:1.055*S(e,1/2.4)-.055)}function os(e){return.04045>=(e/=255)?e/12.92:S((e+.055)/1.055,2.4)}function us(e){if(e instanceof ls)return new ls(e.h,e.c,e.l,e.opacity);if(e instanceof ns||(e=es(e)),0===e.a&&0===e.b)return new ls(NaN,0,e.l,e.opacity);var t=u(e.b,e.a)*cS;return new ls(0>t?t+360:t,x(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ss(e,t,n,r){return 1===arguments.length?us(e):new ls(e,t,n,null==r?1:r)}function ls(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function cs(e){if(e instanceof ds)return new ds(e.h,e.s,e.l,e.opacity);e instanceof $u||(e=qu(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(SS*r+bS*t-wS*n)/(SS+bS-wS),a=r-i,o=(yS*(n-i)-vS*a)/_S,s=x(o*o+a*a)/(yS*i*(1-i)),l=s?u(o,a)*cS-120:NaN;return new ds(0>l?l+360:l,s,i,e.opacity)}function fs(e,t,n,r){return 1===arguments.length?cs(e):new ds(e,t,n,null==r?1:r)}function ds(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function hs(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function ps(e){var t=e.length-1;return function(n){var r=0>=n?n=0:1<=n?(n=1,t-1):_(n*t),i=e[r],a=e[r+1],o=0<r?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return hs((n-r/t)*t,o,i,a,u)}}function xs(e){var t=e.length;return function(n){var r=_((0>(n%=1)?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return hs((n-r/t)*t,i,a,o,u)}}function gs(e){return function(){return e}}function ms(e,t){return function(n){return e+n*t}}function vs(e,t){var n=t-e;return n?ms(e,180<n||-180>n?n-360*v(n/360):n):gs(isNaN(e)?t:e)}function _s(e){return 1==(e=+e)?ys:function(t,n){return n-t?function(e,t,n){return e=S(e,n),t=S(t,n)-e,n=1/n,function(r){return S(e+r*t,n)}}(t,n,e):gs(isNaN(t)?n:t)}}function ys(e,t){var n=t-e;return n?ms(e,n):gs(isNaN(e)?t:e)}function bs(e){return function(t){var n,r,i=t.length,a=Array(i),o=Array(i),u=Array(i);for(n=0;n<i;++n)r=Hu(t[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=e(a),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=u(e),r+""}}}function ws(e,t){var n,r=t?t.length:0,i=e?p(r,e.length):0,a=Array(i),o=Array(r);for(n=0;n<i;++n)a[n]=Ts(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Ss(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}function ks(e,t){return t-=e=+e,function(n){return e+t*n}}function Es(e,t){var n,r={},i={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?r[n]=Ts(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function As(e,t){var n,r,i,a=FS.lastIndex=OS.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=FS.exec(e))&&(r=OS.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:ks(n,r)})),a=OS.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),2>u.length?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function Ts(e,t){var n,r=typeof t;return null==t||"boolean"==r?gs(t):("number"==r?ks:"string"==r?(n=Bu(t))?(t=n,CS):As:t instanceof Bu?CS:t instanceof Date?Ss:Array.isArray(t)?ws:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Es:ks)(e,t)}function Cs(e,t){return t-=e=+e,function(n){return v(e+t*n)}}function Ds(e,t,n,r,i,a){var s,l,c;return(s=x(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=x(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:a,rotate:u(t,e)*MS,skewX:o(c)*MS,scaleX:s,scaleY:l}}function Ns(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function a(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:ks(e,i)},{i:s-2,x:ks(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}function o(e,t,n,a){e===t?t&&n.push(i(n)+"rotate("+t+r):(180<e-t?t+=360:180<t-e&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:ks(e,t)}))}function u(e,t,n,a){e===t?t&&n.push(i(n)+"skewX("+t+r):a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:ks(e,t)})}function s(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:ks(e,n)},{i:u-2,x:ks(t,r)})}else(1!==n||1!==r)&&a.push(i(a)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),u(t.skewX,n.skewX,r,i),s(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,a=i.length;++n<a;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}function Fs(e){return((e=E(e))+1/e)/2}function Os(e){return function(t,n){var r=e((t=Ju(t)).h,(n=Ju(n)).h),i=ys(t.s,n.s),a=ys(t.l,n.l),o=ys(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function Ms(e){return function(t,n){var r=e((t=ss(t)).h,(n=ss(n)).h),i=ys(t.c,n.c),a=ys(t.l,n.l),o=ys(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function Ls(e){return function t(n){function r(t,r){var i=e((t=fs(t)).h,(r=fs(r)).h),a=ys(t.s,r.s),o=ys(t.l,r.l),u=ys(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(S(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}function Ps(e){return function(){return e}}function zs(e){return+e}function Is(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ps(t)}function Rs(e,t,n,r){var i=e[0],a=e[1],o=t[0],u=t[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(e){return o(i(e))}}function Gs(e,t,n,r){var i=p(e.length,t.length)-1,a=Array(i),o=Array(i),u=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<i;)a[u]=n(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(t){var n=Vw(e,t,1,i)-1;return o[n](a[n](t))}}function js(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Ws(e,t){function n(){return i=2<p(u.length,s.length)?Gs:Rs,a=o=null,r}function r(t){return(a||(a=i(u,s,c?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,l)))(+t)}var i,a,o,u=HS,s=HS,l=Ts,c=!1;return r.invert=function(e){return(o||(o=i(s,u,Is,c?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return 0>=e?t:1<=e?n:r(e)}}}(t):t)))(+e)},r.domain=function(e){return arguments.length?(u=Zw.call(e,zs),n()):u.slice()},r.range=function(e){return arguments.length?(s=Jw.call(e),n()):s.slice()},r.rangeRound=function(e){return s=Jw.call(e),l=Cs,n()},r.clamp=function(e){return arguments.length?(c=!!e,n()):c},r.interpolate=function(e){return arguments.length?(l=e,n()):l},n()}function Bs(e,t){if(0>(n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e")))return null;var n,r=e.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+e.slice(n+1)]}function Us(e){return(e=Bs(m(e)))?e[1]:NaN}function Vs(e){return new qs(e)}function qs(e){if(!(t=$S.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function Hs(e,t){var n=Bs(e,t);if(!n)return e+"";var r=n[0],i=n[1];return 0>i?"0."+Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+Array(i-r.length+2).join("0")}function $s(e){return e}function Ys(e){function t(e){function t(e){var t,r,o,c=_,p=b;if("c"===v)p=w(e)+p,e="";else{var y=0>(e=+e);if(e=w(m(e),x),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(0<i){if(!+e[r])break e;i=0}}return 0<i?e.slice(0,i)+e.slice(t+1):e}(e)),y&&0==+e&&(y=!1),c=(y?"("===l?l:"-":"-"===l||"("===l?"":l)+c,p=("s"===v?QS[8+YS/3]:"")+p+(y&&"("===l?")":""),S)for(t=-1,r=e.length;++t<r;)if(48>(o=e.charCodeAt(t))||57<o){p=(46===o?i+e.slice(t+1):e.slice(t))+p,e=e.slice(0,t);break}}h&&!f&&(e=n(e,1/0));var k=c.length+e.length+p.length,E=k<d?Array(d-k+1).join(u):"";switch(h&&f&&(e=n(E+e,E.length?d-p.length:1/0),E=""),s){case"<":e=c+e+p+E;break;case"=":e=c+E+e+p;break;case"^":e=E.slice(0,k=E.length>>1)+c+e+p+E.slice(k);break;default:e=E+c+e+p}return a(e)}var u=(e=Vs(e)).fill,s=e.align,l=e.sign,c=e.symbol,f=e.zero,d=e.width,h=e.comma,x=e.precision,g=e.trim,v=e.type;"n"===v?(h=!0,v="g"):!KS[v]&&(null==x&&(x=12),g=!0,v="g"),(f||"0"===u&&"="===s)&&(f=!0,u="0",s="=");var _="$"===c?r[0]:"#"===c&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===c?r[1]:/[%p]/.test(v)?o:"",w=KS[v],S=/[defgprs%]/.test(v);return x=null==x?6:/[gprs]/.test(v)?y(1,p(21,x)):y(0,p(20,x)),t.toString=function(){return e+""},t}var n=e.grouping&&e.thousands?function(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;0<i&&0<u&&(s+u+1>r&&(u=y(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}(e.grouping,e.thousands):$s,r=e.currency,i=e.decimal,a=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(e.numerals):$s,o=e.percent||"%";return{format:t,formatPrefix:function(e,n){var r=t(((e=Vs(e)).type="f",e)),i=3*y(-8,p(8,_(Us(n)/3))),a=S(10,-i),o=QS[8+i/3];return function(e){return r(a*e)+o}}}}function Xs(e){return XS=Ys(e),ZS=XS.format,JS=XS.formatPrefix,XS}function Zs(e,t,n){var r,i=e[0],a=e[e.length-1],o=Cu(i,a,null==t?10:t);switch((n=Vs(null==n?",f":n)).type){case"s":var u=y(m(i),m(a));return null!=n.precision||isNaN(r=function(e,t){return y(0,3*y(-8,p(8,_(Us(t)/3)))-Us(m(e)))}(o,u))||(n.precision=r),JS(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(e,t){return e=m(e),t=m(t)-e,y(0,Us(t)-Us(e))+1}(o,y(m(i),m(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(e){return y(0,-Us(m(e)))}(o))||(n.precision=r-2*("%"===n.type))}return ZS(n)}function Js(e){var t=e.domain;return e.ticks=function(e){var n=t();return Au(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Zs(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,u=i[a],s=i[o];return s<u&&(r=u,u=s,s=r,r=a,a=o,o=r),0<(r=Tu(u,s,n))?r=Tu(u=_(u/r)*r,s=b(s/r)*r,n):0>r&&(r=Tu(u=b(u*r)/r,s=_(s*r)/r,n)),0<r?(i[a]=_(u/r)*r,i[o]=b(s/r)*r,t(i)):0>r&&(i[a]=b(u*r)/r,i[o]=_(s*r)/r,t(i)),e},e}function Ks(){var e=Ws(Is,ks);return e.copy=function(){return js(e,Ks())},Js(e)}function Qs(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function el(e,t){return(t=k(t/e))?function(n){return k(n/e)/t}:Ps(t)}function tl(e,t){return 0>e?function(n){return-S(-t,n)*S(-e,1-n)}:function(n){return S(t,n)*S(e,1-n)}}function nl(e){return isFinite(e)?+("1e"+e):0>e?0:e}function rl(e){return 10===e?nl:e===a?E:function(t){return S(e,t)}}function il(e){return e===a?k:10===e&&Math.log10||2===e&&Math.log2||(e=k(e),function(t){return k(t)/e})}function al(e){return function(t){return-e(-t)}}function ol(e,t){return 0>e?-S(-e,t):S(e,t)}function ul(){var e=1,t=Ws((function(t,n){return(n=ol(n,e)-(t=ol(t,e)))?function(r){return(ol(r,e)-t)/n}:Ps(n)}),(function(t,n){return n=ol(n,e)-(t=ol(t,e)),function(r){return ol(t+n*r,1/e)}})),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return js(t,ul().exponent(e))},Js(t)}function sl(e){return new Date(e)}function ll(e){return e instanceof Date?+e:+new Date(+e)}function cl(e,t,n,r,i,a,o,u,s){function l(u){return(o(u)<u?p:a(u)<u?x:i(u)<u?g:r(u)<u?v:t(u)<u?n(u)<u?_:b:e(u)<u?w:S)(u)}function c(t,n,r,i){if(null==t&&(t=10),"number"==typeof t){var a=m(r-n)/t,o=ku((function(e){return e[2]})).right(k,a);o===k.length?(i=Cu(n/31536e6,r/31536e6,t),t=e):o?(i=(o=k[a/k[o-1][2]<k[o][2]/a?o-1:o])[1],t=o[0]):(i=y(Cu(n,r,t),1),t=u)}return null==i?t:t.every(i)}var f=Ws(Is,ks),d=f.invert,h=f.domain,p=s(".%L"),x=s(":%S"),g=s("%I:%M"),v=s("%I %p"),_=s("%a %d"),b=s("%b %d"),w=s("%B"),S=s("%Y"),k=[[o,1,1e3],[o,5,5e3],[o,15,15e3],[o,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];return f.invert=function(e){return new Date(d(e))},f.domain=function(e){return arguments.length?h(Zw.call(e,ll)):h().map(sl)},f.ticks=function(e,t){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=c(e,i,a,t))?n.range(i,a+1):[],o?n.reverse():n},f.tickFormat=function(e,t){return null==t?l:s(t)},f.nice=function(e,t){var n=h();return(e=c(e,n[0],n[n.length-1],t))?h(Qs(n,e)):f},f.copy=function(){return js(f,cl(e,t,n,r,i,a,o,u,s))},f}function fl(){function e(){var e=i().length,r=o[1]<o[0],f=o[r-0],d=o[1-r],h=wu(e,s,l);t=(d-f)/(h||1),u&&(t=_(t)),f+=(d-f-t*(e-s))*c,n=t*(1-s),u&&(f=v(f),n=v(n));var p=Xn(e).map((function(e){return f+t*e}));return a(r?p.reverse():p)}var t,n,r=Ru().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,l=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(l=y(0,p(1,t)),s=l,e()):s},r.paddingInner=function(t){return arguments.length?(s=y(0,p(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(l=y(0,p(1,t)),e()):l},r.align=function(t){return arguments.length?(c=y(0,p(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],l=+e[1],c=o[1]<o[0],f=c?a().reverse():a(),d=f.length-1;if(s==s&&l==l)return l<s&&(u=s,s=l,l=u),l<f[0]||s>o[1-c]?void 0:(t=y(0,Dy(f,s)-1),r=s==l?t:Dy(f,l)-1,s-f[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),t>r?void 0:i().slice(t,r+1))}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return fl().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(l).align(c)},e()}function dl(e){return ek.call(e,(function(e){return+e}))}function hl(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],l=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(0>l&&(l=i),n=i);if(!(0>l))return u=e.invertExtent(o[l]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n}}function pl(e,t){return 1<arguments.length?(nk[e]=hl(e,t),this):nk.hasOwnProperty(e)?nk[e]:void 0}function xl(e,t){var n=t[0],r=I(t)-n;return function(t){return e(n+t*r)}}function gl(e,t,n){var r=n-t;return r&&isFinite(r)?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(ml):Q(0)}function ml(e,t){return function(n){return e+n*(t-e)}}function vl(e,t){var n=qS[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function _l(e){for(var t=0|e.length/6,n=Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function yl(e){for(var t=0|e.length/6,n=Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function bl(e){return DS(e[e.length-1])}function wl(e){(0>e||1<e)&&(e-=_(e));var t=m(e-.5);return wE.h=360*e-100,wE.s=1.5-1.5*t,wE.l=.8-.9*t,wE+""}function Sl(e){var t;return e=(.5-e)*h,SE.r=255*(t=l(e))*t,SE.g=255*(t=l(e+kE))*t,SE.b=255*(t=l(e+EE))*t,SE+""}function kl(e){var t=e.length;return function(n){return e[y(0,p(t-1,_(n*t)))]}}function El(e,t){OE[e]=NE["interpolate"+t],FE[e]=NE["scheme"+t]}function Al(e,t){if(1<arguments.length)return OE[e]=t,this;var n=e.split("-");return e=n[0],(n=+n[1]+1)&&FE.hasOwnProperty(e)?FE[e][n-1]:!n&&OE.hasOwnProperty(e)?OE[e]:void 0}function Tl(e){return ME.hasOwnProperty(e)&&ME[e]}function Cl(e){return LE.hasOwnProperty(e)&&LE[e]}function Dl(e,t){var n;return F(t)&&(n=t.step,t=t.interval),O(t)&&(t="time"===e.type?Tl(t):"utc"===e.type?Cl(t):D("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Nl(e,t,n){var r=e.range(),i=r[0],a=I(r);if(i>a&&(r=a,a=i,i=r),t=t.filter((function(t){return!((t=e(t))<i||t>a)})),0<n&&1<t.length){for(var o=[t[0],I(t)];t.length>n&&3<=t.length;)t=t.filter((function(e,t){return!(t%2)}));3>t.length&&(t=o)}return t}function Fl(e,t){return e.ticks?e.ticks(t):e.domain()}function Ol(e,t,n){var r=e.tickFormat?e.tickFormat(t,n):n?ZS(n):String;return"log"===e.type?function(e,t){return function(n){return e(n)?t(n):""}}(r,function(e){var t=Vs(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return function(e,t){return function(n){var r,i,a=e(n),o=a.indexOf(t);if(0>o)return a;for(i=(r=function(e,t){var n,r=e.lastIndexOf("e");if(0<r)return r;for(r=e.length;--r>t;)if(48<=(n=e.charCodeAt(r))&&57>=n)return r+1}(a,o))<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}(ZS(t),ZS(".1f")(1)[1])}return ZS(t)}(n)):r}function Ml(e){Ln.call(this,null,e)}function Ll(e){Ln.call(this,null,e)}function Pl(){return ke({})}function zl(e){return e.exit}function Il(e){Ln.call(this,null,e)}function Rl(e,t,n){return"symbol"===n&&PE[e.type]?function(e){return function(t,n,r){var i=r[n+1]||r.max||1/0,a=Gl(t,e),o=Gl(i,e);return a&&o?a+"–"+o:o?"< "+o:"≥ "+a}}(t):"discrete"===n?function(e){return function(t,n){return n?e(t):null}}(t):function(e){return function(t){return e(t)}}(t)}function Gl(e,t){return isFinite(e)?t(e):null}function jl(e){Ln.call(this,[],e)}function Wl(e){return e.source.x}function Bl(e){return e.source.y}function Ul(e){return e.target.x}function Vl(e){return e.target.y}function ql(e){Ln.call(this,{},e)}function Hl(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function $l(e,t,n,r){var i=n-e,a=r-t,o=x(i*i+a*a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*u(a,i)/h+" 0 1 "+n+","+r}function Yl(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function Xl(e){Ln.call(this,null,e)}function Zl(e){Ln.call(this,null,e),this.modified(!0)}function Jl(e,t,n){var r=function(e,t,n){return t?(e.domain(Kl(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(-1<r)return r;var i,a,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&IE[u];return o?(RE[u]&&t.padding&&o[0]!==I(o)&&(o=function(e,t,n,r,i){var a=m(I(n)-n[0]),o=a/(a-2*r),u="log"===e?Y(t,null,o):"sqrt"===e?X(t,null,o,.5):"pow"===e?X(t,null,o,i):$(t,null,o);return(t=t.slice())[0]=u[0],t[t.length-1]=u[1],t}(u,o,t.range,t.padding,t.exponent)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(o=o.slice()).length-1||1,s&&(0<o[0]&&(o[0]=0),0>o[i]&&(o[i]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[i]=t.domainMax),null!=t.domainMid&&(((a=t.domainMid)<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a))),e.domain(Kl(u,o,n)),"ordinal"===u&&e.unknown(t.domainImplicit?Kw:void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&Dl(e,t.nice)||null),o.length):0}function Kl(e,t,n){return"log"===e&&m(t.reduce((function(e,t){return e+(0>t?-1:0<t?1:0)}),0))!==t.length&&n.warn("Log scale domain includes zero: "+M(t)),t}function Ql(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){"band"!==e&&"point"!==e&&D("Only band and point scales support rangeStep.");var r=(null==t.paddingOuter?t.padding:t.paddingOuter)||0,i="point"===e?1:(null==t.paddingInner?t.padding:t.paddingInner)||0;return[0,t.rangeStep*wu(n,i,r)]}(e.type,t,n);else if(t.scheme){if(i=function(e,t,n){var r,i=t.scheme.toLowerCase(),a=Al(i),o=t.schemeExtent;return a||D("Unrecognized scheme name: "+t.scheme),n="threshold"===e?n+1:"bin-ordinal"===e?n-1:"quantile"===e||"quantize"===e?+t.schemeCount||5:n,"sequential"===e?ec(a,o,t.reverse):!o&&(r=Al(i+"-"+n))?r:J(a)?function(e,t){for(var n=Array(t),r=0;r<t;)n[r]=e(++r/(t+1));return n}(ec(a,o),n):"ordinal"===e?a:a.slice(0,n)}(e.type,t,n),J(i))return e.interpolator(i)}else if(i&&"sequential"===e.type)return e.interpolator(DS(tc(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(vl(t.interpolate,t.interpolateGamma)):J(e.round)?e.round(r):J(e.rangeRound)&&e.interpolate(r?Cs:Ts),i&&e.range(tc(i,t.reverse))}function ec(e,t,n){return J(e)&&(t||n)?xl(e,tc(t||[0,1],n)):e}function tc(e,t){return t?e.slice().reverse():e}function nc(e){Ln.call(this,null,e)}function rc(e){Ln.call(this,null,e)}function ic(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(a=e[s])[r]=o,a[i]=o+=m(n(a))}function ac(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,l=0,c=0;l<s;++l)(a=e[l])[r]=u,a[i]=u=o*(c+=m(n(a)))}function oc(e,t,n,r,i){for(var a,o,u=0,s=0,l=e.length,c=0;c<l;++c)0>(a=n(o=e[c]))?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function uc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sc(e,t,n){e=+e,t=+t,n=2>(i=arguments.length)?(t=e,e=0,1):3>i?1:+n;for(var r=-1,i=0|y(0,b((t-e)/n)),a=Array(i);++r<i;)a[r]=e+r*n;return a}function lc(e,t,n){var r=m(t-e)/y(0,n),i=S(10,_(k(r)/g)),a=r/i;return a>=BE?i*=10:a>=UE?i*=5:a>=VE&&(i*=2),t<e?-i:i}function cc(e){return b(k(e.length)/i)+1}function fc(e,t){return e-t}function dc(e){return function(){return e}}function hc(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=pc(e,t[r]))return n;return 0}function pc(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,u=o-1;a<o;u=a++){var s=e[a],l=s[0],c=s[1],f=e[u],d=f[0],h=f[1];if(xc(s,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function xc(e,t,n){var r;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[r=+(e[0]===t[0])],n[r],t[r])}function gc(){}function mc(){function e(e){var n=u(e);if(Array.isArray(n))n=n.slice().sort(fc);else{var r=function(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}(e),i=r[0],a=r[1];n=lc(i,a,n),n=sc(_(i/n)*n,_(a/n)*n,n)}return n.map((function(n){return t(e,n)}))}function t(e,t){var r=[],i=[];return n(e,t,(function(n){s(n,e,t),0<function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(n)?r.push([n]):i.push(n)})),i.forEach((function(e){for(var t,n=0,i=r.length;n<i;++n)if(-1!==hc((t=r[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:t,coordinates:r}}function n(e,t,n){function i(e){var t,i,a=[e[0][0]+u,e[0][1]+s],o=[e[1][0]+u,e[1][1]+s],l=r(a),c=r(o);(t=p[l])?(i=h[c])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(o),n(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(o),p[t.end=c]=t):(t=h[c])?(i=p[l])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(o),n(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(a),h[t.start=l]=t):h[l]=p[c]={start:l,end:c,ring:[a,o]}}var u,s,l,c,f,d,h=[],p=[];for(u=s=-1,c=e[0]>=t,HE[c<<1].forEach(i);++u<a-1;)l=c,c=e[u+1]>=t,HE[l|c<<1].forEach(i);for(HE[c<<0].forEach(i);++s<o-1;){for(u=-1,c=e[s*a+a]>=t,f=e[s*a]>=t,HE[c<<1|f<<2].forEach(i);++u<a-1;)l=c,c=e[s*a+a+u+1]>=t,d=f,f=e[s*a+u+1]>=t,HE[l|c<<1|f<<2|d<<3].forEach(i);HE[c|f<<3].forEach(i)}for(u=-1,f=e[s*a]>=t,HE[f<<2].forEach(i);++u<a-1;)d=f,f=e[s*a+u+1]>=t,HE[f<<2|d<<3].forEach(i);HE[f<<3].forEach(i)}function r(e){return 2*e[0]+e[1]*(a+1)*4}function i(e,t,n){e.forEach((function(e){var r,i=e[0],u=e[1],s=0|i,l=0|u,c=t[l*a+s];0<i&&i<a&&s===i&&(r=t[l*a+s-1],e[0]=i+(n-r)/(c-r)-.5),0<u&&u<o&&l===u&&(r=t[(l-1)*a+s],e[1]=u+(n-r)/(c-r)-.5)}))}var a=1,o=1,u=cc,s=i;return e.contour=t,e.size=function(t){if(!arguments.length)return[a,o];var n=b(t[0]),r=b(t[1]);if(!(0<n&&0<r))throw new Error("invalid size");return a=n,o=r,e},e.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:Array.isArray(t)?dc(qE.call(t)):dc(t),e):u},e.smooth=function(t){return arguments.length?(s=t?i:gc,e):s===i},e}function vc(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),u>=n&&(u>=a&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/p(u+1,r-1+a-u,a))}function _c(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),u>=n&&(u>=a&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/p(u+1,i-1+a-u,a))}function yc(e){return e[0]}function bc(e){return e[1]}function wc(){return 1}function Sc(e){Ln.call(this,null,e)}function kc(e){Ln.call(this,null,e)}function Ec(){return new Ac}function Ac(){this.reset()}function Tc(e,t,n){var r=e.s=t+n,i=r-t;e.t=t-(r-i)+(n-i)}function Cc(e){return 1<e?0:-1>e?DA:f(e)}function Dc(e){return 1<e?NA:-1>e?-NA:c(e)}function Nc(){}function Fc(e,t){e&&YA.hasOwnProperty(e.type)&&YA[e.type](e,t)}function Oc(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Mc(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Oc(e[n],t,1);t.polygonEnd()}function Lc(e,t){e&&$A.hasOwnProperty(e.type)?$A[e.type](e,t):Fc(e,t)}function Pc(){JA.point=Ic}function zc(){Rc(XE,ZE)}function Ic(e,t){JA.point=Rc,XE=e,ZE=t,JE=e*=LA,KE=RA(t=(t*=LA)/2+FA),QE=UA(t)}function Rc(e,t){var n=(e*=LA)-JE,r=0<=n?1:-1,i=r*n,a=RA(t=(t*=LA)/2+FA),o=UA(t),u=QE*o,s=KE*a+u*RA(i),l=u*r*UA(i);XA.add(IA(l,s)),JE=e,KE=a,QE=o}function Gc(e){return[IA(e[1],e[0]),Dc(e[2])]}function jc(e){var t=e[0],n=e[1],r=RA(n);return[r*RA(t),r*UA(t),UA(n)]}function Wc(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Uc(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Vc(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function qc(e){var t=qA(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Hc(e,t){sA.push(lA=[eA=e,nA=e]),t<tA&&(tA=t),t>rA&&(rA=t)}function $c(e,t){var n=jc([e*LA,t*LA]);if(uA){var r=Bc(uA,n),i=Bc([r[1],-r[0],0],r);qc(i),i=Gc(i);var a,o=e-iA,u=0<o?1:-1,s=i[0]*MA*u,l=180<PA(o);l^(u*iA<s&&s<u*e)?(a=i[1]*MA)>rA&&(rA=a):l^(u*iA<(s=(s+360)%360-180)&&s<u*e)?(a=-i[1]*MA)<tA&&(tA=a):(t<tA&&(tA=t),t>rA&&(rA=t)),l?e<iA?Qc(eA,e)>Qc(eA,nA)&&(nA=e):Qc(e,nA)>Qc(eA,nA)&&(eA=e):nA>=eA?(e<eA&&(eA=e),e>nA&&(nA=e)):e>iA?Qc(eA,e)>Qc(eA,nA)&&(nA=e):Qc(e,nA)>Qc(eA,nA)&&(eA=e)}else sA.push(lA=[eA=e,nA=e]);t<tA&&(tA=t),t>rA&&(rA=t),uA=n,iA=e}function Yc(){QA.point=$c}function Xc(){lA[0]=eA,lA[1]=nA,QA.point=Hc,uA=null}function Zc(e,t){if(uA){var n=e-iA;KA.add(180<PA(n)?n+(0<n?360:-360):n)}else aA=e,oA=t;JA.point(e,t),$c(e,t)}function Jc(){JA.lineStart()}function Kc(){Zc(aA,oA),JA.lineEnd(),PA(KA)>TA&&(eA=-(nA=180)),lA[0]=eA,lA[1]=nA,uA=null}function Qc(e,t){return 0>(t-=e)?t+360:t}function ef(e,t){return e[0]-t[0]}function tf(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function nf(e,t){e*=LA;var n=RA(t*=LA);rf(n*RA(e),n*UA(e),UA(t))}function rf(e,t,n){++cA,dA+=(e-dA)/cA,hA+=(t-hA)/cA,pA+=(n-pA)/cA}function af(){eT.point=of}function of(e,t){e*=LA;var n=RA(t*=LA);SA=n*RA(e),kA=n*UA(e),EA=UA(t),eT.point=uf,rf(SA,kA,EA)}function uf(e,t){e*=LA;var n=RA(t*=LA),r=n*RA(e),i=n*UA(e),a=UA(t),o=IA(qA((o=kA*a-EA*i)*o+(o=EA*r-SA*a)*o+(o=SA*i-kA*r)*o),SA*r+kA*i+EA*a);fA+=o,xA+=o*(SA+(SA=r)),gA+=o*(kA+(kA=i)),mA+=o*(EA+(EA=a)),rf(SA,kA,EA)}function sf(){eT.point=nf}function lf(){eT.point=ff}function cf(){df(bA,wA),eT.point=nf}function ff(e,t){bA=e,wA=t,e*=LA,t*=LA,eT.point=df;var n=RA(t);SA=n*RA(e),kA=n*UA(e),EA=UA(t),rf(SA,kA,EA)}function df(e,t){e*=LA;var n=RA(t*=LA),r=n*RA(e),i=n*UA(e),a=UA(t),o=kA*a-EA*i,u=EA*r-SA*a,s=SA*i-kA*r,l=qA(o*o+u*u+s*s),c=Dc(l),f=l&&-c/l;vA+=f*o,_A+=f*u,yA+=f*s,fA+=c,xA+=c*(SA+(SA=r)),gA+=c*(kA+(kA=i)),mA+=c*(EA+(EA=a)),rf(SA,kA,EA)}function hf(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function pf(e,t){return[PA(e)>DA?e+v(-e/OA)*OA:e,t]}function xf(e,t,n){return(e%=OA)?t||n?hf(mf(e),vf(t,n)):mf(e):t||n?vf(t,n):pf}function gf(e){return function(t,n){return[(t+=e)>DA?t-OA:t<-DA?t+OA:t,n]}}function mf(e){var t=gf(e);return t.invert=gf(-e),t}function vf(e,t){function n(e,t){var n=RA(t),u=RA(e)*n,s=UA(e)*n,l=UA(t),c=l*r+u*i;return[IA(s*a-c*o,u*r-l*i),Dc(c*a+s*o)]}var r=RA(e),i=UA(e),a=RA(t),o=UA(t);return n.invert=function(e,t){var n=RA(t),u=RA(e)*n,s=UA(e)*n,l=UA(t),c=l*a-s*o;return[IA(s*a+l*o,u*r+c*i),Dc(c*r-u*i)]},n}function _f(e,t){(t=jc(t))[0]-=e,qc(t);var n=Cc(-t[1]);return((0>-t[2]?-n:n)+OA-TA)%OA}function yf(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:Nc,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function bf(e,t){return PA(e[0]-t[0])<TA&&PA(e[1]-t[1])<TA}function wf(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Sf(e,t,n,r,i){var a,o,u=[],s=[];if(e.forEach((function(e){if(!(0>=(t=e.length-1))){var t,n,r=e[0],o=e[t];if(bf(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);return void i.lineEnd()}u.push(n=new wf(r,e,null,!0)),s.push(n.o=new wf(r,null,n,!1)),u.push(n=new wf(o,e,null,!1)),s.push(n.o=new wf(o,null,n,!0))}})),u.length){for(s.sort(t),kf(u),kf(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var l,c,f=u[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=l.length;a<o;++a)i.point((c=l[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,a=l.length-1;0<=a;--a)i.point((c=l[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function kf(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Ef(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Af(e,t,n){e=+e,t=+t,n=2>(i=arguments.length)?(t=e,e=0,1):3>i?1:+n;for(var r=-1,i=0|y(0,b((t-e)/n)),a=Array(i);++r<i;)a[r]=e+r*n;return a}function Tf(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=Array(o);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--o]=r[t];return n}function Cf(e,t,n,r){return function(i){function a(t,n){e(t,n)&&i.point(t,n)}function o(e,t){x.point(e,t)}function u(){_.point=o,x.lineStart()}function s(){_.point=a,x.lineEnd()}function l(e,t){p.push([e,t]),m.point(e,t)}function c(){m.lineStart(),p=[]}function f(){l(p[0][0],p[0][1]),m.lineEnd();var e,t,n,r,a=m.clean(),o=g.result(),u=o.length;if(p.pop(),d.push(p),p=null,u){if(1&a){if(0<(t=(n=o[0]).length-1)){for(v||(i.polygonStart(),v=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}return}1<u&&2&a&&o.push(o.pop().concat(o.shift())),h.push(o.filter(Df))}}var d,h,p,x=t(i),g=yf(),m=t(g),v=!1,_={point:a,lineStart:u,lineEnd:s,polygonStart:function(){_.point=l,_.lineStart=c,_.lineEnd=f,h=[],d=[]},polygonEnd:function(){_.point=a,_.lineStart=u,_.lineEnd=s,h=Tf(h);var e=function(e,t){var n=t[0],r=t[1],i=UA(r),a=[UA(n),-RA(n),0],o=0,u=0;lT.reset(),1===i?r=NA+TA:-1===i&&(r=-NA-TA);for(var s=0,l=e.length;s<l;++s)if(f=(c=e[s]).length)for(var c,f,d=c[f-1],h=d[0],p=d[1]/2+FA,x=UA(p),g=RA(p),m=0;m<f;++m,h=_,x=b,g=w,d=v){var v=c[m],_=v[0],y=v[1]/2+FA,b=UA(y),w=RA(y),S=_-h,k=0<=S?1:-1,E=k*S,A=E>DA,T=x*b;if(lT.add(IA(T*k*UA(E),g*w+T*RA(E))),o+=A?S+k*OA:S,A^h>=n^_>=n){var C=Bc(jc(d),jc(v));qc(C);var D=Bc(a,C);qc(D);var N=(A^0<=S?-1:1)*Dc(D[2]);(r>N||r===N&&(C[0]||C[1]))&&(u+=A^0<=S?1:-1)}}return(o<-TA||o<TA&&lT<-TA)^1&u}(d,r);h.length?(!v&&(i.polygonStart(),v=!0),Sf(h,Nf,e,n,i)):e&&(!v&&(i.polygonStart(),v=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),v&&(i.polygonEnd(),v=!1),h=d=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return _}}function Df(e){return 1<e.length}function Nf(e,t){return(0>(e=e.x)[0]?e[1]-NA-TA:NA-e[1])-(0>(t=t.x)[0]?t[1]-NA-TA:NA-t[1])}function Ff(e){function t(e,t){return RA(e)*RA(t)>i}function n(e,t,n){var r=[1,0,0],a=Bc(jc(e),jc(t)),o=Wc(a,a),u=a[0],s=o-u*u;if(!s)return!n&&e;var l=Bc(r,a),c=Vc(r,i*o/s);Uc(c,Vc(a,-i*u/s));var f=l,d=Wc(c,f),h=Wc(f,f),p=d*d-h*(Wc(c,c)-1);if(!(0>p)){var x=qA(p),g=Vc(f,(-d-x)/h);if(Uc(g,c),g=Gc(g),!n)return g;var m,v=e[0],_=t[0],y=e[1],b=t[1];_<v&&(m=v,v=_,_=m);var w=_-v,S=PA(w-DA)<TA;if(!S&&b<y&&(m=y,y=b,b=m),S||w<TA?S?0<y+b^g[1]<(PA(g[0]-v)<TA?y:b):y<=g[1]&&g[1]<=b:w>DA^(v<=g[0]&&g[0]<=_)){var k=Vc(f,(-d+x)/h);return Uc(k,c),[g,Gc(k)]}}}function r(t,n){var r=a?e:DA-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var i=RA(e),a=0<i,o=PA(i)>TA;return Cf(t,(function(e){var i,u,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,d){var h,p=[f,d],x=t(f,d),g=a?x?0:r(f,d):x?r(f+(0>f?DA:-DA),d):0;if(!i&&(l=s=x)&&e.lineStart(),x!==s&&(!(h=n(i,p))||bf(i,h)||bf(p,h))&&(p[0]+=TA,p[1]+=TA,x=t(p[0],p[1])),x!==s)c=0,x?(e.lineStart(),h=n(p,i),e.point(h[0],h[1])):(h=n(i,p),e.point(h[0],h[1]),e.lineEnd()),i=h;else if(o&&i&&a^x){var m;!(g&u)&&(m=n(p,i,!0))&&(c=0,a?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!x||i&&bf(i,p)||e.point(p[0],p[1]),i=p,s=x,u=g},lineEnd:function(){s&&e.lineEnd(),i=null},clean:function(){return c|(l&&s)<<1}}}),(function(t,n,r,i){!function(e,t,n,r,i,a){if(n){var o=RA(t),u=UA(t),s=r*n;null==i?(i=t+r*OA,a=t-s/2):(i=_f(o,i),a=_f(o,a),(0<r?i<a:i>a)&&(i+=r*OA));for(var l,c=i;0<r?c>a:c<a;c-=s)l=Gc([o,-u*RA(c),-u*UA(c)]),e.point(l[0],l[1])}}(i,e,6*LA,r,t,n)}),a?[0,-e]:[-DA,e-DA])}function Of(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function a(i,a,u,l){var c=0,f=0;if(null==i||(c=o(i,u))!==(f=o(a,u))||0>s(i,a)^0<u)do{l.point(0===c||3===c?e:n,1<c?r:t)}while((c=(c+u+4)%4)!==f);else l.point(a[0],a[1])}function o(r,i){return PA(r[0]-e)<TA?0<i?0:3:PA(r[0]-n)<TA?0<i?2:1:PA(r[1]-t)<TA?0<i?1:0:0<i?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n===r?0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]:n-r}return function(o){function s(e,t){i(e,t)&&k.point(e,t)}function l(){for(var t=0,n=0,i=d.length;n<i;++n)for(var a,o,u=d[n],s=1,l=u.length,c=u[0],f=c[0],h=c[1];s<l;++s)a=f,o=h,f=(c=u[s])[0],h=c[1],o<=r?h>r&&(f-a)*(r-o)>(h-o)*(e-a)&&++t:h<=r&&(f-a)*(r-o)<(h-o)*(e-a)&&--t;return t}function c(a,o){var u=i(a,o);if(d&&h.push([a,o]),w)x=a,g=o,m=u,w=!1,u&&(k.lineStart(),k.point(a,o));else if(u&&b)k.point(a,o);else{var s=[v=y(-1e9,p(1e9,v)),_=y(-1e9,p(1e9,_))],l=[a=y(-1e9,p(1e9,a)),o=y(-1e9,p(1e9,o))];!function(e,t,n,r,i,a){var o,u=e[0],s=e[1],l=0,c=1,f=t[0]-u,d=t[1]-s;if(o=n-u,f||!(0<o)){if(o/=f,0>f){if(o<l)return;o<c&&(c=o)}else if(0<f){if(o>c)return;o>l&&(l=o)}if(o=i-u,f||!(0>o)){if(o/=f,0>f){if(o>c)return;o>l&&(l=o)}else if(0<f){if(o<l)return;o<c&&(c=o)}if(o=r-s,d||!(0<o)){if(o/=d,0>d){if(o<l)return;o<c&&(c=o)}else if(0<d){if(o>c)return;o>l&&(l=o)}if(o=a-s,d||!(0>o)){if(o/=d,0>d){if(o>c)return;o>l&&(l=o)}else if(0<d){if(o<l)return;o<c&&(c=o)}return 0<l&&(e[0]=u+l*f,e[1]=s+l*d),1>c&&(t[0]=u+c*f,t[1]=s+c*d),!0}}}}}(s,l,e,t,n,r)?u&&(k.lineStart(),k.point(a,o),S=!1):(!b&&(k.lineStart(),k.point(s[0],s[1])),k.point(l[0],l[1]),!u&&k.lineEnd(),S=!1)}v=a,_=o,b=u}var f,d,h,x,g,m,v,_,b,w,S,k=o,E=yf(),A={point:s,lineStart:function(){A.point=c,d&&d.push(h=[]),w=!0,b=!1,v=_=NaN},lineEnd:function(){f&&(c(x,g),m&&b&&E.rejoin(),f.push(E.result())),A.point=s,b&&k.lineEnd()},polygonStart:function(){k=E,f=[],d=[],S=!0},polygonEnd:function(){var e=l(),t=S&&e,n=(f=Tf(f)).length;(t||n)&&(o.polygonStart(),t&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),n&&Sf(f,u,e,a,o),o.polygonEnd()),k=o,f=d=h=null}};return A}}function Mf(e,t,n){var r=Af(e,t-TA,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Lf(e,t,n){var r=Af(e,t-TA,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Pf(e){return e}function zf(){hT.point=If}function If(e,t){hT.point=Rf,tT=rT=e,nT=iT=t}function Rf(e,t){dT.add(iT*e-rT*t),rT=e,iT=t}function Gf(){Rf(tT,nT)}function jf(e,t){_T+=e,yT+=t,++bT}function Wf(){CT.point=Bf}function Bf(e,t){CT.point=Uf,jf(uT=e,sT=t)}function Uf(e,t){var n=e-uT,r=t-sT,i=qA(n*n+r*r);wT+=i*(uT+e)/2,ST+=i*(sT+t)/2,kT+=i,jf(uT=e,sT=t)}function Vf(){CT.point=jf}function qf(){CT.point=$f}function Hf(){Yf(aT,oT)}function $f(e,t){CT.point=Yf,jf(aT=uT=e,oT=sT=t)}function Yf(e,t){var n=e-uT,r=t-sT,i=qA(n*n+r*r);wT+=i*(uT+e)/2,ST+=i*(sT+t)/2,kT+=i,ET+=(i=sT*e-uT*t)*(uT+e),AT+=i*(sT+t),TT+=3*i,jf(uT=e,sT=t)}function Xf(e){this._context=e}function Zf(e,t){PT.point=Jf,NT=OT=e,FT=MT=t}function Jf(e,t){OT-=e,MT-=t,LT.add(qA(OT*OT+MT*MT)),OT=e,MT=t}function Kf(){this._string=[]}function Qf(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function ed(e,t){function n(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),Lc(e,r(i))),i.result()}var r,i,a=4.5;return n.area=function(e){return Lc(e,r(hT)),hT.result()},n.measure=function(e){return Lc(e,r(PT)),PT.result()},n.bounds=function(e){return Lc(e,r(vT)),vT.result()},n.centroid=function(e){return Lc(e,r(CT)),CT.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,Pf):(e=t).stream,n):e},n.context=function(e){return arguments.length?(i=null==e?(t=null,new Kf):new Xf(t=e),"function"!=typeof a&&i.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),n):a},n.projection(e).context(t)}function td(e){return function(t){var n=new nd;for(var r in e)n[r]=e[r];return n.stream=t,n}}function nd(){}function rd(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Lc(n,e.stream(vT)),t(vT.result()),null!=r&&e.clipExtent(r),e}function id(e,t,n){return rd(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=p(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,u])}),n)}function ad(e,t,n){return id(e,[[0,0],t],n)}function od(e,t,n){return rd(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])}),n)}function ud(e,t,n){return rd(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])}),n)}function sd(e,t){return+t?function(e,t){function n(r,i,a,o,u,s,l,c,f,d,h,p,x,g){var m=l-r,v=c-i,_=m*m+v*v;if(_>4*t&&x--){var y=o+d,b=u+h,w=s+p,S=qA(y*y+b*b+w*w),k=Dc(w/=S),E=PA(PA(w)-1)<TA||PA(a-f)<TA?(a+f)/2:IA(b,y),A=e(E,k),T=A[0],C=A[1],D=T-r,N=C-i,F=v*D-m*N;(F*F/_>t||.3<PA((m*D+v*N)/_-.5)||o*d+u*h+s*p<zT)&&(n(r,i,a,o,u,s,T,C,E,y/=S,b/=S,w,x,g),g.point(T,C),n(T,C,E,y,b,w,l,c,f,d,h,p,x,g))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){m=NaN,w.point=a,t.lineStart()}function a(r,i){var a=jc([r,i]),o=e(r,i);n(m,v,g,_,y,b,m=o[0],v=o[1],g=r,_=a[0],y=a[1],b=a[2],16,t),t.point(m,v)}function o(){w.point=r,t.lineEnd()}function u(){i(),w.point=s,w.lineEnd=l}function s(e,t){a(c=e,t),f=m,d=v,h=_,p=y,x=b,w.point=a}function l(){n(m,v,g,_,y,b,f,d,c,h,p,x,16,t),w.lineEnd=o,o()}var c,f,d,h,p,x,g,m,v,_,y,b,w={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),w.lineStart=u},polygonEnd:function(){t.polygonEnd(),w.lineStart=i}};return w}}(e,t):function(e){return td({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}function ld(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r}function cd(e,t,n,r){function i(e,r){return[u*e-s*r+t,n-s*e-u*r]}var a=RA(r),o=UA(r),u=a*e,s=o*e,l=a/e,c=o/e;return i.invert=function(r,i){return[l*r-c*i+(o*n-a*t)/e,(o*t+a*n)/e-c*r-l*i]},i}function fd(e){return dd((function(){return e}))()}function dd(e){function t(e){return d(e[0]*LA,e[1]*LA)}function n(e){return(e=d.invert(e[0],e[1]))&&[e[0]*MA,e[1]*MA]}function r(){var e=cd(x,0,0,S).apply(null,a(v,_)),t=(S?cd:ld)(x,g-e[0],m-e[1],S);return o=xf(y,b,w),f=hf(a,t),d=hf(o,f),c=sd(f,C),i()}function i(){return h=p=null,t}var a,o,u,s,l,c,f,d,h,p,x=150,g=480,m=250,v=0,_=0,y=0,b=0,w=0,S=0,k=null,E=cT,A=null,T=Pf,C=.5;return t.stream=function(e){return h&&p===e?h:h=IT(function(e){return td({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(o)(E(c(T(p=e)))))},t.preclip=function(e){return arguments.length?(E=e,k=void 0,i()):E},t.postclip=function(e){return arguments.length?(T=e,A=u=s=l=null,i()):T},t.clipAngle=function(e){return arguments.length?(E=+e?Ff(k=e*LA):(k=null,cT),i()):k*MA},t.clipExtent=function(e){return arguments.length?(T=null==e?(A=u=s=l=null,Pf):Of(A=+e[0][0],u=+e[0][1],s=+e[1][0],l=+e[1][1]),i()):null==A?null:[[A,u],[s,l]]},t.scale=function(e){return arguments.length?(x=+e,r()):x},t.translate=function(e){return arguments.length?(g=+e[0],m=+e[1],r()):[g,m]},t.center=function(e){return arguments.length?(v=e[0]%360*LA,_=e[1]%360*LA,r()):[v*MA,_*MA]},t.rotate=function(e){return arguments.length?(y=e[0]%360*LA,b=e[1]%360*LA,w=2<e.length?e[2]%360*LA:0,r()):[y*MA,b*MA,w*MA]},t.angle=function(e){return arguments.length?(S=e%360*LA,r()):S*MA},t.precision=function(e){return arguments.length?(c=sd(f,C=e*e),i()):qA(C)},t.fitExtent=function(e,n){return id(t,e,n)},t.fitSize=function(e,n){return ad(t,e,n)},t.fitWidth=function(e,n){return od(t,e,n)},t.fitHeight=function(e,n){return ud(t,e,n)},function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function hd(e){var t=0,n=DA/3,r=dd(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*LA,n=e[1]*LA):[t*MA,n*MA]},i}function pd(e,t){function n(e,t){var n=qA(a-2*i*UA(t))/i;return[n*UA(e*=i),o-n*RA(e)]}var r=UA(e),i=(r+UA(t))/2;if(PA(i)<TA)return function(e){function t(e,t){return[e*n,UA(t)/n]}var n=RA(e);return t.invert=function(e,t){return[e/n,Dc(t*n)]},t}(e);var a=1+r*(2*i-r),o=qA(a)/i;return n.invert=function(e,t){var n=o-t;return[IA(e,PA(n))/i*VA(n),Dc((a-(e*e+n*n)*i*i)/(2*i))]},n}function xd(){return hd(pd).scale(155.424).center([0,33.6442])}function gd(){return xd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function md(e){return function(t,n){var r=RA(t),i=RA(n),a=e(r*i);return[a*i*UA(t),a*UA(n)]}}function vd(e){return function(t,n){var r=qA(t*t+n*n),i=e(r),a=UA(i),o=RA(i);return[IA(t*a,r*o),Dc(r&&n*a/r)]}}function _d(e,t){return[e,WA(HA((NA+t)/2))]}function yd(e){function t(){var t=DA*u(),o=a(function(e){function t(t){return(t=e(t[0]*LA,t[1]*LA))[0]*=MA,t[1]*=MA,t}return e=xf(e[0]*LA,e[1]*LA,2<e.length?e[2]*LA:0),t.invert=function(t){return(t=e.invert(t[0]*LA,t[1]*LA))[0]*=MA,t[1]*=MA,t},t}(a.rotate()).invert([0,0]));return l(null==c?[[o[0]-t,o[1]-t],[o[0]+t,o[1]+t]]:e===_d?[[y(o[0]-t,c),n],[p(o[0]+t,r),i]]:[[c,y(o[1]-t,n)],[r,p(o[1]+t,i)]])}var n,r,i,a=fd(e),o=a.center,u=a.scale,s=a.translate,l=a.clipExtent,c=null;return a.scale=function(e){return arguments.length?(u(e),t()):u()},a.translate=function(e){return arguments.length?(s(e),t()):s()},a.center=function(e){return arguments.length?(o(e),t()):o()},a.clipExtent=function(e){return arguments.length?(null==e?c=n=r=i=null:(c=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),t()):null==c?null:[[c,n],[r,i]]},t()}function bd(e){return HA((NA+e)/2)}function wd(e,t){function n(e,t){0<a?t<-NA+TA&&(t=-NA+TA):t>NA-TA&&(t=NA-TA);var n=a/BA(bd(t),i);return[n*UA(i*e),a-n*RA(i*e)]}var r=RA(e),i=e===t?UA(e):WA(r/RA(t))/WA(bd(t)/bd(e)),a=r*BA(bd(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=VA(i)*qA(e*e+n*n);return[IA(e,PA(n))/i*VA(n),2*zA(BA(a/r,1/i))-NA]},n):_d}function Sd(e,t){return[e,t]}function kd(e,t){function n(e,t){var n=a-t,r=i*e;return[n*UA(r),a-n*RA(r)]}var r=RA(e),i=e===t?UA(e):(r-RA(t))/(t-e),a=r/i+e;return PA(i)<TA?Sd:(n.invert=function(e,t){var n=a-t;return[IA(e,PA(n))/i*VA(n),a-VA(i)*qA(e*e+n*n)]},n)}function Ed(e,t){var n=RA(t),r=RA(e)*n;return[n*UA(e)/r,UA(t)/r]}function Ad(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?Pf:td({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function Td(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Cd(e,t){return[RA(t)*UA(e),UA(t)]}function Dd(e,t){var n=RA(t),r=1+RA(e)*n;return[n*UA(e)/r,UA(t)/r]}function Nd(e,t){return[WA(HA((NA+t)/2)),-e]}function Fd(e,t){return function n(){var r=t();return r.type=e,r.path=ed().projection(r),r.copy=r.copy||function(){var e=n();return WT.forEach((function(t){r.hasOwnProperty(t)&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function Od(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),1<arguments.length?(BT[e]=Fd(e,t),this):BT.hasOwnProperty(e)?BT[e]:null}function Md(e){return e&&e.path||jT}function Ld(e){Ln.call(this,null,e)}function Pd(e){Ln.call(this,null,e)}function zd(e){Ln.call(this,null,e)}function Id(e){Ln.call(this,[],e),this.generator=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Af(GA(a/g)*g,i,g).map(d).concat(Af(GA(l/m)*m,s,m).map(h)).concat(Af(GA(r/p)*p,n,p).filter((function(e){return PA(e%g)>TA})).map(c)).concat(Af(GA(u/x)*x,o,x).filter((function(e){return PA(e%m)>TA})).map(f))}var n,r,i,a,o,u,s,l,c,f,d,h,p=10,x=p,g=90,m=360,v=2.5;return e.lines=function(){return t().map((function(e){return{type:"LineString",coordinates:e}}))},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(s).slice(1),d(i).reverse().slice(1),h(l).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],l=+t[0][1],s=+t[1][1],a>i&&(t=a,a=i,i=t),l>s&&(t=l,l=s,s=t),e.precision(v)):[[a,l],[i,s]]},e.extentMinor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(v)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(g=+t[0],m=+t[1],e):[g,m]},e.stepMinor=function(t){return arguments.length?(p=+t[0],x=+t[1],e):[p,x]},e.precision=function(t){return arguments.length?(v=+t,c=Mf(u,o,90),f=Lf(r,n,v),d=Mf(l,s,90),h=Lf(a,i,v),e):v},e.extentMajor([[-180,-90+TA],[180,90-TA]]).extentMinor([[-180,-80-TA],[180,80+TA]])}()}function Rd(e){Ln.call(this,null,e),this.modified(!0)}function Gd(e,t){var n=function(e){return 1===(e=Z(e)).length?e[0]:{type:"FeatureCollection",features:e.reduce((function(e,t){return t&&"FeatureCollection"===t.type?e.push.apply(e,t.features):v_(t)?e.push.apply(e,t):e.push(t),e}),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function jd(e,t,n){J(e[t])&&e[t](n)}function Wd(e){return function(){return e}}function Bd(){return 1e-6*(Math.random()-.5)}function Ud(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,u,s,l,c,f,d,h=e._root,p={data:r},x=e._x0,g=e._y0,m=e._x1,v=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((l=t>=(a=(x+m)/2))?x=a:m=a,(c=n>=(o=(g+v)/2))?g=o:v=o,i=h,!(h=h[f=c<<1|l]))return i[f]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=[,,,,]:e._root=[,,,,],(l=t>=(a=(x+m)/2))?x=a:m=a,(c=n>=(o=(g+v)/2))?g=o:v=o}while((f=c<<1|l)==(d=(s>=o)<<1|u>=a));return i[d]=h,i[f]=p,e}function Vd(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function qd(e){return e[0]}function Hd(e){return e[1]}function $d(e,t,n){var r=new Yd(null==t?qd:t,null==n?Hd:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Yd(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Xd(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function Zd(e){return e.x+e.vx}function Jd(e){return e.y+e.vy}function Kd(e){return e.index}function Qd(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function eh(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new th(r)}function th(e){this._=e}function nh(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(0<=r&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function rh(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function ih(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=HT,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function ah(){return QT||(nC(oh),QT=tC.now()+eC)}function oh(){QT=0}function uh(){this._call=this._time=this._next=null}function sh(e,t,n){var r=new uh;return r.restart(e,t,n),r}function lh(){QT=(KT=tC.now())+eC,XT=ZT=0;try{!function(){ah(),++XT;for(var e,t=$T;t;)0<=(e=QT-t._time)&&t._call.call(null,e),t=t._next;--XT}()}finally{XT=0,function(){for(var e,t,n=$T,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:$T=t);YT=e,fh(r)}(),QT=0}}function ch(){var e=tC.now(),t=e-KT;t>1e3&&(eC-=t,KT=e)}function fh(e){XT||(ZT&&(ZT=clearTimeout(ZT)),24<e-QT?(e<1/0&&(ZT=setTimeout(lh,e-tC.now()-eC)),JT&&(JT=clearInterval(JT))):(!JT&&(KT=tC.now(),JT=setInterval(ch,1e3)),XT=1,nC(lh)))}function dh(e){return e.x}function hh(e){return e.y}function ph(e){Ln.call(this,null,e)}function xh(e,t){var n=function(e){function t(){n(),g.call("tick",a),o<u&&(p.stop(),g.call("end",a))}function n(){var t,n,r=e.length;for(o+=(f-o)*c,h.each((function(e){e(o)})),t=0;t<r;++t)null==(n=e[t]).fx?n.x+=n.vx*=d:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=d:(n.y=n.fy,n.vy=0)}function r(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,isNaN(t.x)||isNaN(t.y)){var i=10*x(n),a=n*rC;t.x=i*s(a),t.y=i*l(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function i(t){return t.initialize&&t.initialize(e),t}var a,o=1,u=.001,c=1-S(u,1/300),f=0,d=.6,h=Fu(),p=sh(t),g=eh("tick","end");return null==e&&(e=[]),r(),a={tick:n,restart:function(){return p.restart(t),a},stop:function(){return p.stop(),a},nodes:function(t){return arguments.length?(e=t,r(),h.each(i),a):e},alpha:function(e){return arguments.length?(o=+e,a):o},alphaMin:function(e){return arguments.length?(u=+e,a):u},alphaDecay:function(e){return arguments.length?(c=+e,a):+c},alphaTarget:function(e){return arguments.length?(f=+e,a):f},velocityDecay:function(e){return arguments.length?(d=1-e,a):1-d},force:function(e,t){return 1<arguments.length?(null==t?h.remove(e):h.set(e,i(t)),a):h.get(e)},find:function(t,n,r){var i,a,o,u,s,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=t-(u=e[l]).x)*i+(a=n-u.y)*a)<r&&(s=u,r=o);return s},on:function(e,t){return 1<arguments.length?(g.on(e,t),a):g.on(e)}}}(e),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},gh(n,t,!0).on("end",(function(){r=!0}))}function gh(e,t,n,r){var i,a,o,u,s=Z(t.forces);for(i=0,a=aC.length;i<a;++i)"forces"!==(o=aC[i])&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u="forces"+i,(o=n||t.modified("forces",i)?vh(s[i]):r&&mh(s[i],r)?e.force(u):null)&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force("forces"+i,null);return e.numForces=s.length,e}function mh(e,t){var n,r;for(n in e)if(J(r=e[n])&&t.modified(C(r)))return 1;return 0}function vh(e){var t,n;for(n in iC.hasOwnProperty(e.force)||D("Unrecognized force: "+e.force),t=iC[e.force](),e)J(t[n])&&_h(t[n],e[n],e);return t}function _h(e,t,n){e(J(t)?function(e){return t(e,n)}:t)}function yh(e,t,n){var r={};return e.each((function(e){var i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e}function bh(e,t){return e.parent===t.parent?1:2}function wh(e,t){return e+t.x}function Sh(e,t){return y(e,t.y)}function kh(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;0<=--r;)t+=n[r].value;else t=1;e.value=t}function Eh(e,t){var n,r,i,a,o,u=new Dh(e),s=+e.value&&(u.value=e.value),l=[u];for(null==t&&(t=Ah);n=l.pop();)if(s&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=Array(o),a=o-1;0<=a;--a)l.push(r=n.children[a]=new Dh(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(Ch)}function Ah(e){return e.children}function Th(e){e.data=e.data.data}function Ch(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Dh(e){this.data=e,this.depth=this.height=0,this.parent=null}function Nh(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=0|Math.random()*r--,t=e[r],e[r]=e[n],e[n]=t;return e}(cC.call(e))).length,a=[];r<i;)t=e[r],n&&Mh(n,t)?++r:(n=Ph(a=Fh(a,t)),r=0);return n}function Fh(e,t){var n,r;if(Lh(t,e))return[t];for(n=0;n<e.length;++n)if(Oh(t,e[n])&&Lh(zh(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Oh(zh(e[n],e[r]),t)&&Oh(zh(e[n],t),e[r])&&Oh(zh(e[r],t),e[n])&&Lh(Ih(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Oh(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return 0>n||n*n<r*r+i*i}function Mh(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return 0<n&&n*n>r*r+i*i}function Lh(e,t){for(var n=0;n<t.length;++n)if(!Mh(e,t[n]))return!1;return!0}function Ph(e){switch(e.length){case 1:return function(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return zh(e[0],e[1]);case 3:return Ih(e[0],e[1],e[2])}}function zh(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,u=t.r,s=a-n,l=o-r,c=u-i,f=x(s*s+l*l);return{x:(n+a+s/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+u)/2}}function Ih(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,u=t.y,s=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-u,g=i-c,m=s-a,v=f-a,_=r*r+i*i-a*a,y=_-o*o-u*u+s*s,b=_-l*l-c*c+f*f,w=h*p-d*g,S=(p*b-g*y)/(2*w)-r,k=(g*m-p*v)/w,E=(h*y-d*b)/(2*w)-i,A=(d*v-h*m)/w,T=k*k+A*A-1,C=2*(a+S*k+E*A),D=S*S+E*E-a*a,N=-(T?(C+x(C*C-4*T*D))/(2*T):D/C);return{x:r+S+k*N,y:i+E+A*N,r:N}}function Rh(e,t,n){var r,i,a,o,u=e.x-t.x,s=e.y-t.y,l=u*u+s*s;l?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(a=x(y(0,o/l-(r=(l+o-i)/(2*l))*r)),n.x=e.x-r*u-a*s,n.y=e.y-r*s+a*u):(a=x(y(0,i/l-(r=(l+i-o)/(2*l))*r)),n.x=t.x+r*u-a*s,n.y=t.y+r*s+a*u)):(n.x=t.x+n.r,n.y=t.y)}function Gh(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return 0<n&&n*n>r*r+i*i}function jh(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function Wh(e){this._=e,this.next=null,this.previous=null}function Bh(e){return null==e?null:Uh(e)}function Uh(e){if("function"!=typeof e)throw new Error;return e}function Vh(){return 0}function qh(e){return function(){return e}}function Hh(e){return x(e.value)}function $h(e){return function(t){t.children||(t.r=y(0,+e(t)||0))}}function Yh(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=function(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,u,s,l,c,f;if((t=e[0]).x=0,t.y=0,!(1<i))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(2<i))return t.r+n.r;Rh(n,t,r=e[2]),t=new Wh(t),n=new Wh(n),r=new Wh(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<i;++u){Rh(t._,n._,r=e[u]),r=new Wh(r),s=n.next,l=t.previous,c=n._.r,f=t._.r;do{if(c<=f){if(Gh(s._,r._)){n=s,t.next=n,n.previous=t,--u;continue e}c+=s._.r,s=s.next}else{if(Gh(l._,r._)){(t=l).next=n,n.previous=t,--u;continue e}f+=l._.r,l=l.previous}}while(s!==l.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=jh(t);(r=r.next)!==n;)(o=jh(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=Nh(t),u=0;u<i;++u)(t=e[u]).x-=r.x,t.y-=r.y;return r.r}(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function Xh(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Zh(e){e.x0=v(e.x0),e.y0=v(e.y0),e.x1=v(e.x1),e.y1=v(e.y1)}function Jh(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,l=e.value&&(r-t)/e.value;++u<s;)(a=o[u]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function Kh(e){return e.id}function Qh(e){return e.parentId}function ep(){function e(e){var r,i,a,o,u,s,l,c=e.length,f=Array(c),d={};for(i=0;i<c;++i)r=e[i],u=f[i]=new Dh(r),null!=(s=t(r,i,e))&&(s+="")&&(d[l="$"+(u.id=s)]=l in d?dC:u);for(i=0;i<c;++i)if(u=f[i],null!=(s=n(e[i],i,e))&&(s+="")){if(!(o=d["$"+s]))throw new Error("missing: "+s);if(o===dC)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=fC,a.eachBefore((function(e){e.depth=e.parent.depth+1,--c})).eachBefore(Ch),a.parent=null,0<c)throw new Error("cycle");return a}var t=Kh,n=Qh;return e.id=function(n){return arguments.length?(t=Uh(n),e):t},e.parentId=function(t){return arguments.length?(n=Uh(t),e):n},e}function tp(e,t){return e.parent===t.parent?1:2}function np(e){var t=e.children;return t?t[0]:e.t}function rp(e){var t=e.children;return t?t[t.length-1]:e.t}function ip(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ap(e,t,n){return e.a.parent===t.parent?e.a:n}function op(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function up(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,l=e.value&&(i-n)/e.value;++u<s;)(a=o[u]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}function sp(e,t,n,r,i,a){for(var o,u,s,l,c,f,d,h,p,x,g,m=[],v=t.children,_=0,b=0,w=v.length,S=t.value;_<w;){s=i-n,l=a-r;do{c=v[b++].value}while(!c&&b<w);for(f=d=c,x=y(l/s,s/l)/(S*e),p=y(d/(g=c*c*x),g/f);b<w;++b){if(c+=u=v[b].value,u<f&&(f=u),u>d&&(d=u),(h=y(d/(g=c*c*x),g/f))>p){c-=u;break}p=h}m.push(o={value:c,dice:s<l,children:v.slice(_,b)}),o.dice?Jh(o,n,r,i,S?r+=l*c/S:a):up(o,n,r,S?n+=s*c/S:i,a),S-=c,_=b}return m}function lp(e){Ln.call(this,null,e)}function cp(e){return e.values}function fp(e){Ln.call(this,null,e)}function dp(e,t){return e.parent===t.parent?1:2}function hp(e){fp.call(this,e)}function pp(e){fp.call(this,e)}function xp(e){Ln.call(this,null,e)}function gp(e){fp.call(this,e)}function mp(e){Ln.call(this,[],e)}function vp(e){fp.call(this,e)}function _p(e){return function(){return e}}function yp(e){return e[0]}function bp(e){return e[1]}function wp(){this._=null}function Sp(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function kp(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ep(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ap(e){for(;e.L;)e=e.L;return e}function Tp(e,t,n,r){var i=[null,null],a=FC.push(i)-1;return i.left=e,i.right=t,n&&Dp(i,e,t,n),r&&Dp(i,t,e,r),DC[e.index].halfedges.push(a),DC[t.index].halfedges.push(a),i}function Cp(e,t,n){var r=[t,n];return r.left=e,r}function Dp(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function Np(e,t,n,r,i){var a,o=e[0],u=e[1],s=o[0],l=o[1],c=0,f=1,d=u[0]-s,h=u[1]-l;if(a=t-s,d||!(0<a)){if(a/=d,0>d){if(a<c)return;a<f&&(f=a)}else if(0<d){if(a>f)return;a>c&&(c=a)}if(a=r-s,d||!(0>a)){if(a/=d,0>d){if(a>f)return;a>c&&(c=a)}else if(0<d){if(a<c)return;a<f&&(f=a)}if(a=n-l,h||!(0<a)){if(a/=h,0>h){if(a<c)return;a<f&&(f=a)}else if(0<h){if(a>f)return;a>c&&(c=a)}if(a=i-l,h||!(0>a)){if(a/=h,0>h){if(a>f)return;a>c&&(c=a)}else if(0<h){if(a<c)return;a<f&&(f=a)}return!(0<c||1>f)||(0<c&&(e[0]=[s+c*d,l+c*h]),1>f&&(e[1]=[s+f*d,l+f*h]),!0)}}}}}function Fp(e,t,n,r,i){var a=e[1];if(a)return!0;var o,u,s=e[0],l=e.left,c=e.right,f=l[0],d=l[1],h=c[0],p=c[1],x=(f+h)/2;if(p===d){if(x<t||x>=r)return;if(f>h){if(s){if(s[1]>=i)return}else s=[x,n];a=[x,i]}else{if(s){if(s[1]<n)return}else s=[x,i];a=[x,n]}}else if(u=(d+p)/2-(o=(f-h)/(p-d))*x,-1>o||1<o)if(f>h){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(d<p){if(s){if(s[0]>=r)return}else s=[t,o*t+u];a=[r,o*r+u]}else{if(s){if(s[0]<t)return}else s=[r,o*r+u];a=[t,o*t+u]}return e[0]=s,e[1]=a,!0}function Op(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?u(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),u(r[0]-i[0],i[1]-r[1]))}function Mp(e,t){return t[+(t.left!==e.site)]}function Lp(e,t){return t[+(t.left===e.site)]}function Pp(){Sp(this),this.x=this.y=this.arc=this.site=this.cy=null}function zp(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,l=r[1]-u,c=a[0]-o,f=a[1]-u,d=2*(s*f-l*c);if(!(d>=-PC)){var h=s*s+l*l,p=c*c+f*f,g=(f*h-l*p)/d,m=(s*p-c*h)/d,v=OC.pop()||new Pp;v.arc=e,v.site=i,v.x=g+o,v.y=(v.cy=m+u)+x(g*g+m*m),e.circle=v;for(var _=null,y=NC._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){_=y.P;break}y=y.L}else{if(!y.R){_=y;break}y=y.R}NC.insert(_,v),_||(TC=v)}}}}function Ip(e){var t=e.circle;t&&(!t.P&&(TC=t.N),NC.remove(t),OC.push(t),Sp(t),e.circle=null)}function Rp(){Sp(this),this.edge=this.site=this.circle=null}function Gp(e){var t=MC.pop()||new Rp;return t.site=e,t}function jp(e){Ip(e),CC.remove(e),MC.push(e),Sp(e)}function Wp(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,u=[e];jp(e);for(var s=a;s.circle&&m(n-s.circle.x)<LC&&m(r-s.circle.cy)<LC;)a=s.P,u.unshift(s),jp(s),s=a;u.unshift(s),Ip(s);for(var l=o;l.circle&&m(n-l.circle.x)<LC&&m(r-l.circle.cy)<LC;)o=l.N,u.push(l),jp(l),l=o;u.push(l),Ip(l);var c,f=u.length;for(c=1;c<f;++c)l=u[c],s=u[c-1],Dp(l.edge,s.site,l.site,i);s=u[0],(l=u[f-1]).edge=Tp(s.site,l.site,null,i),zp(s),zp(l)}function Bp(e){for(var t,n,r,i,a=e[0],o=e[1],u=CC._;u;)if((r=Up(u,o)-a)>LC)u=u.L;else{if(!((i=a-Vp(u,o))>LC)){r>-LC?(t=u.P,n=u):i>-LC?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}!function(e){DC[e.index]={site:e,halfedges:[]}}(e);var s=Gp(e);if(CC.insert(t,s),t||n){if(t===n)return Ip(t),n=Gp(t.site),CC.insert(s,n),s.edge=n.edge=Tp(t.site,s.site),zp(t),void zp(n);if(!n)return void(s.edge=Tp(t.site,s.site));Ip(t),Ip(n);var l=t.site,c=l[0],f=l[1],d=e[0]-c,h=e[1]-f,p=n.site,x=p[0]-c,g=p[1]-f,m=2*(d*g-h*x),v=d*d+h*h,_=x*x+g*g,y=[(g*v-h*_)/m+c,(d*_-x*v)/m+f];Dp(n.edge,l,p,y),s.edge=Tp(l,e,null,y),n.edge=Tp(e,p,null,y),zp(t),zp(n)}}function Up(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var u=(n=o.site)[0],s=n[1],l=s-t;if(!l)return u;var c=u-r,f=1/a-1/l,d=c/l;return f?(-d+x(d*d-2*f*(c*c/(-2*l)-s+l/2+i-a/2)))/f+r:(r+u)/2}function Vp(e,t){var n=e.N;if(n)return Up(n,t);var r=e.site;return r[1]===t?r[0]:1/0}function qp(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function Hp(e,t){return t[1]-e[1]||t[0]-e[0]}function $p(e,t){var n,r,i,a=e.sort(Hp).pop();for(FC=[],DC=Array(e.length),CC=new wp,NC=new wp;;)if(i=TC,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))(a[0]!==n||a[1]!==r)&&(Bp(a),n=a[0],r=a[1]),a=e.pop();else{if(!i)break;Wp(i.arc)}if(function(){for(var e,t,n,r,i=0,a=DC.length;i<a;++i)if((e=DC[i])&&(r=(t=e.halfedges).length)){var o=Array(r),u=Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=Op(e,FC[t[n]]);for(o.sort((function(e,t){return u[t]-u[e]})),n=0;n<r;++n)u[n]=t[o[n]];for(n=0;n<r;++n)t[n]=u[n]}}(),t){var o=+t[0][0],u=+t[0][1],s=+t[1][0],l=+t[1][1];(function(e,t,n,r){for(var i,a=FC.length;a--;)Fp(i=FC[a],e,t,n,r)&&Np(i,e,t,n,r)&&(m(i[0][0]-i[1][0])>LC||m(i[0][1]-i[1][1])>LC)||delete FC[a]})(o,u,s,l),function(e,t,n,r){var i,a,o,u,s,l,c,f,d,h,p,x,g=DC.length,v=!0;for(i=0;i<g;++i)if(a=DC[i]){for(o=a.site,u=(s=a.halfedges).length;u--;)FC[s[u]]||s.splice(u,1);for(u=0,l=s.length;u<l;)p=(h=Lp(a,FC[s[u]]))[0],x=h[1],f=(c=Mp(a,FC[s[++u%l]]))[0],d=c[1],(m(p-f)>LC||m(x-d)>LC)&&(s.splice(u,0,FC.push(Cp(o,h,m(p-e)<LC&&r-x>LC?[e,m(f-e)<LC?d:r]:m(x-r)<LC&&n-p>LC?[m(d-r)<LC?f:n,r]:m(p-n)<LC&&x-t>LC?[n,m(f-n)<LC?d:t]:m(x-t)<LC&&p-e>LC?[m(d-t)<LC?f:e,t]:null))-1),++l);l&&(v=!1)}if(v){var _,y,b,w=1/0;for(i=0,v=null;i<g;++i)(a=DC[i])&&(b=(_=(o=a.site)[0]-e)*_+(y=o[1]-t)*y)<w&&(w=b,v=a);if(v){var S=[e,t],k=[e,r],E=[n,r],A=[n,t];v.halfedges.push(FC.push(Cp(o=v.site,S,k))-1,FC.push(Cp(o,k,E))-1,FC.push(Cp(o,E,A))-1,FC.push(Cp(o,A,S))-1)}}for(i=0;i<g;++i)(a=DC[i])&&(a.halfedges.length||delete DC[i])}(o,u,s,l)}this.edges=FC,this.cells=DC,CC=NC=FC=DC=null}function Yp(e){Ln.call(this,null,e)}function Xp(){function e(e,t,n){for(var r,i,a,o=t.x,u=t.y,c=x(s[0]*s[0]+s[1]*s[1]),d=l(s),h=.5>f()?1:-1,g=-h;(r=d(g+=h))&&(i=~~r[0],a=~~r[1],!(p(m(i),m(a))>=c));)if(t.x=o+i,t.y=u+a,!(0>t.x+t.x0||0>t.y+t.y0||t.x+t.x1>s[0]||t.y+t.y1>s[1])&&(!n||!Jp(t,e,s[0]))&&(!n||Qp(t,n))){for(var v,_=t.sprite,y=t.width>>5,b=s[0]>>5,w=t.x-(y<<4),S=127&w,k=t.y1-t.y0,E=(t.y+t.y0)*b+(w>>5),A=0;A<k;A++){v=0;for(var T=0;T<=y;T++)e[E+T]|=v<<32-S|(T<y?(v=_[A*y+T])>>>S:0);E+=b}return t.sprite=null,!0}return!1}var t,n,r,i,a,o,u,s=[256,256],l=ex,c=[],f=Math.random,d={layout:function(){for(var l,d=function(e){e.width=e.height=1;var t=x(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=2048/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(li()),h=function(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),p=null,g=c.length,m=-1,v=[],_=c.map((function(e){return{text:t(e),font:n(e),style:i(e),weight:a(e),rotate:o(e),size:~~r(e),padding:u(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}})).sort((function(e,t){return t.size-e.size}));++m<g;)(l=_[m]).x=s[0]*(f()+.5)>>1,l.y=s[1]*(f()+.5)>>1,Zp(d,l,_,m),l.hasText&&e(h,l,p)&&(v.push(l),p?Kp(p,l):p=[{x:l.x+l.x0,y:l.y+l.y0},{x:l.x+l.x1,y:l.y+l.y1}],l.x-=s[0]>>1,l.y-=s[1]>>1);return v},words:function(e){return arguments.length?(c=e,d):c},size:function(e){return arguments.length?(s=[+e[0],+e[1]],d):s},font:function(e){return arguments.length?(n=tx(e),d):n},fontStyle:function(e){return arguments.length?(i=tx(e),d):i},fontWeight:function(e){return arguments.length?(a=tx(e),d):a},rotate:function(e){return arguments.length?(o=tx(e),d):o},text:function(e){return arguments.length?(t=tx(e),d):t},spiral:function(e){return arguments.length?(l=jC[e]||e,d):l},fontSize:function(e){return arguments.length?(r=tx(e),d):r},padding:function(e){return arguments.length?(u=tx(e),d):u},random:function(e){return arguments.length?(f=e,d):f}};return d}function Zp(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,2048/a,2048/a);var o,u,c,f,d,h=0,p=0,x=0,g=n.length;for(--r;++r<g;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,c=t.size<<1,t.rotate){var v=l(t.rotate*GC),_=s(t.rotate*GC),b=o*_,w=o*v,S=c*_,k=c*v;o=y(m(b+k),m(b-k))+31>>5<<5,c=~~y(m(w+S),m(w-S))}else o=o+31>>5<<5;if(c>x&&(x=c),2048<=h+o&&(h=0,p+=x,x=0),2048<=p+c)break;i.translate((h+(o>>1))/a,(p+(c>>1))/a),t.rotate&&i.rotate(t.rotate*GC),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=c,t.xoff=h,t.yoff=p,t.x1=o>>1,t.y1=c>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,h+=o}for(var E=i.getImageData(0,0,2048/a,2048/a).data,A=[];0<=--r;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,c=t.y1-t.y0,f=0;f<c*u;f++)A[f]=0;if(null==(h=t.xoff))return;p=t.yoff;var T=0,C=-1;for(d=0;d<c;d++){for(f=0;f<o;f++){var D=u*d+(f>>5),N=E[2048*(p+d)+(h+f)<<2]?1<<31-f%32:0;A[D]|=N,T|=N}T?C=d:(t.y0++,c--,d--,p++)}t.y1=t.y0+C,t.sprite=A.slice(0,(t.y1-t.y0)*u)}}}function Jp(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c=0;c<s;c++){r=0;for(var f=0;f<=a;f++)if((r<<32-u|(f<a?(r=i[c*a+f])>>>u:0))&t[l+f])return!0;l+=n}return!1}function Kp(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Qp(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function ex(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*s(e),e*l(e)]}}function tx(e){return"function"==typeof e?e:function(){return e}}function nx(e){Ln.call(this,Xp(),e)}function rx(e){return new Uint8Array(e)}function ix(e){return new Uint16Array(e)}function ax(e){return new Uint32Array(e)}function ox(e,t,n){var r=(257>t?rx:65537>t?ix:ax)(e);return n&&r.set(n),r}function ux(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this,a=i.bisect(i.range,e.value),o=e.index,u=a[0],s=a[1],l=o.length;for(n=0;n<u;++n)t[o[n]]|=r;for(n=s;n<l;++n)t[o[n]]|=r;return i}}}function sx(){var e=ax(0),t=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,u,s,l=n,c=i.length,f=Array(c),d=ax(c);for(s=0;s<c;++s)f[s]=r(i[s]),d[s]=s;if(f=function(e,t){return e.sort.call(t,(function(t,n){var r=e[t],i=e[n];return r<i?-1:r>i?1:0})),function(e,t){for(var n=t.length,r=Array(n);n--;)r[n]=e[t[n]];return r}(e,t)}(f,d),l)o=t,u=e,t=Array(l+c),e=ax(l+c),function(e,t,n,r,i,a,o,u,s){var l,c=0,f=0;for(l=0;c<r&&f<o;++l)t[c]<i[f]?(u[l]=t[c],s[l]=n[c++]):(u[l]=i[f],s[l]=a[f++]+e);for(;c<r;++c,++l)u[l]=t[c],s[l]=n[c];for(;f<o;++f,++l)u[l]=i[f],s[l]=a[f]+e}(a,o,u,l,f,d,c,t,e);else{if(0<a)for(s=0;s<c;++s)d[s]+=a;t=f,e=d}return n=l+c,{index:d,value:f}},remove:function(r,i){var a,o,u,s=n;for(o=0;!i[e[o]]&&o<s;++o);for(u=o;o<s;++o)i[a=e[o]]||(e[u]=a,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var i;return r?i=r.length:(r=t,i=n),[Ny(r,e[0],0,i),Dy(r,e[1],0,i)]},reindex:function(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function lx(e){Ln.call(this,function(){var e=8,t=[],n=ax(0),r=ox(0,e),i=ox(0,e);return{data:function(){return t},seen:function(){return n=function(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length)},add:function(e){for(var n,r=0,i=t.length,a=e.length;r<a;++r)(n=e[r])._index=i++,t.push(n)},remove:function(e,n){var a,o,u,s=t.length,l=Array(s-e),c=t;for(o=0;!n[o]&&o<s;++o)l[o]=t[o],c[o]=o;for(u=o;o<s;++o)a=t[o],n[o]?c[o]=-1:(c[o]=u,r[u]=r[o],i[u]=i[o],l[u]=a,a._index=u++),r[o]=0;return t=l,c},size:function(){return t.length},curr:function(){return r},prev:function(){return i},reset:function(e){i[e]=r[e]},all:function(){return 257>e?255:65537>e?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=y(n,e),r=ox(t,e,r),i=ox(t,e))}}}(),e),this._indices=null,this._dims=null}function cx(e){Ln.call(this,null,e)}function fx(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:"default",item:null})),e.on(e.events("view","mousemove"),t,(function(e,n){var r=t.value,i=r?O(r)?r:r.user:"default",a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}})),e.add(null,(function(e){var t=e.cursor,n=this.value;return O(t)||(n=t.item,t=t.user),function(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}(t&&"default"!==t?t:n||t),n}),{cursor:t})}function dx(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||D("Unrecognized data set: "+t),n[t]}function hx(e,t){Ce(t)||D("Second argument to changes must be a changeset.");var n=dx(this,e);return n.modified=!0,this.pulse(n.input,t)}function px(e){var t=e.padding();return y(0,e._viewWidth+t.left+t.right)}function xx(e){var t=e.padding();return y(0,e._viewHeight+t.top+t.bottom)}function gx(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function mx(e,t,n){var r,i,a=e._renderer.canvas();return a&&(i=gx(e),(r=yo(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.vega=function(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;O(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:Q(e),item:Q(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}(e,n,r),t.item=n,t}function vx(e){return e.item}function _x(e){var t=e.item.mark.source;return t.source||t}function yx(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function bx(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function wx(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=ee(r.debounce,i.update))),function(e,t,n,r){var i=bx("div",{class:"vega-bind"});i.appendChild(bx("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(i);var a=Sx;switch(n.input){case"checkbox":a=kx;break;case"select":a=Ex;break;case"radio":a=Ax;break;case"range":a=Tx}a(e,i,n,r)}(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,(function(){i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0),i}}function Sx(e,t,n,r){var i=bx("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(function(){e.update(i.value)})),e.elements=[i],e.set=function(e){i.value=e}}function kx(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=bx("input",i);t.appendChild(a),a.addEventListener("change",(function(){e.update(a.checked)})),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function Ex(e,t,n,r){var i=bx("select",{name:n.signal});n.options.forEach((function(e){var t={value:e};Cx(e,r)&&(t.selected=!0),i.appendChild(bx("option",t,e+""))})),t.appendChild(i),i.addEventListener("change",(function(){e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(Cx(n.options[t],e))return void(i.selectedIndex=t)}}function Ax(e,t,n,r){var i=bx("span",{class:"vega-bind-radio"});t.appendChild(i),e.elements=n.options.map((function(t){var a="vega-option-"+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};Cx(t,r)&&(o.checked=!0);var u=bx("input",o);return u.addEventListener("change",(function(){e.update(t)})),i.appendChild(u),i.appendChild(bx("label",{for:a},t+"")),u})),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)Cx(n[r].value,t)&&(n[r].checked=!0)}}function Tx(e,t,n,r){function i(){l.textContent=s.value,e.update(+s.value)}r=void 0===r?(+n.max+ +n.min)/2:r;var a=n.min||p(0,+r)||0,o=n.max||y(100,+r)||100,u=n.step||function(e,t,n){var r=m(t-e)/y(0,n),i=S(10,_(k(r)/g)),a=r/i;return a>=Fy?i*=10:a>=Oy?i*=5:a>=My&&(i*=2),t<e?-i:i}(a,o,100),s=bx("input",{type:"range",name:n.signal,min:a,max:o,step:u});s.value=r;var l=bx("label",{},+r);t.appendChild(s),t.appendChild(l),s.addEventListener("input",i),s.addEventListener("change",i),e.elements=[s],e.set=function(e){s.value=e,l.textContent=e}}function Cx(e,t){return e===t||e+""==t+""}function Dx(e,t,n,r,i){return(t=t||new r(e.loader())).initialize(n,px(e),xx(e),gx(e),i).background(e._background)}function Nx(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function Fx(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function Ox(e,t,n){var r=Uo(t),i=r&&r.headless;return i?e.runAsync().then((function(){return Dx(e,null,null,i,n).renderAsync(e._scenegraph.root)})):Promise.reject("Unrecognized renderer type: "+t)}function Mx(e){return+e||0}function Lx(e,t){D(e+' for "outer" push: '+M(t))}function Px(e,t){var n=e.name;if("outer"===e.push)t.signals[n]||Lx("No prior signal definition",n),KC.forEach((function(t){void 0!==e[t]&&Lx("Invalid property ",t)}));else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function zx(e){this.type=e}function Ix(e,t){if(!e)throw new Error("ASSERT: "+t)}function Rx(e){return 48<=e&&57>=e}function Gx(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function jx(e){return 0<="01234567".indexOf(e)}function Wx(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)}function Bx(e){return 10===e||13===e||8232===e||8233===e}function Ux(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||92===e||128<=e&&QC.test(r(e))}function Vx(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||48<=e&&57>=e||92===e||128<=e&&eD.test(r(e))}function qx(){for(var e;$C<YC&&(Wx(e=HC.charCodeAt($C))||Bx(e));)++$C}function Hx(e){var t,n,i,a=0;for(n="u"===e?4:2,t=0;t<n;++t)$C<YC&&Gx(HC[$C])?(i=HC[$C++],a=16*a+"0123456789abcdef".indexOf(i.toLowerCase())):sg({},"Unexpected token %0","ILLEGAL");return r(a)}function $x(){var e,t;for(t=0,"}"===(e=HC[$C])&&sg({},"Unexpected token %0","ILLEGAL");$C<YC&&Gx(e=HC[$C++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(1114111<t||"}"!==e)&&sg({},"Unexpected token %0","ILLEGAL"),65535>=t?r(t):r(55296+(t-65536>>10),56320+(1023&t-65536))}function Yx(){var e,t;for(e=HC.charCodeAt($C++),t=r(e),92===e&&(117!==HC.charCodeAt($C)&&sg({},"Unexpected token %0","ILLEGAL"),++$C,(!(e=Hx("u"))||"\\"===e||!Ux(e.charCodeAt(0)))&&sg({},"Unexpected token %0","ILLEGAL"),t=e);$C<YC&&Vx(e=HC.charCodeAt($C));)++$C,t+=r(e),92===e&&(t=t.substr(0,t.length-1),117!==HC.charCodeAt($C)&&sg({},"Unexpected token %0","ILLEGAL"),++$C,(!(e=Hx("u"))||"\\"===e||!Vx(e.charCodeAt(0)))&&sg({},"Unexpected token %0","ILLEGAL"),t+=e);return t}function Xx(){var e,t;return e=$C,{type:1===(t=92===HC.charCodeAt($C)?Yx():function(){var e,t;for(e=$C++;$C<YC;){if(92===(t=HC.charCodeAt($C)))return $C=e,Yx();if(!Vx(t))break;++$C}return HC.slice(e,$C)}()).length?3:tD.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:$C}}function Zx(){var e,t,n,i,a=$C,o=HC.charCodeAt($C),u=HC[$C];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$C,{type:7,value:r(o),start:a,end:$C};default:if(61===(e=HC.charCodeAt($C+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $C+=2,{type:7,value:r(o)+r(e),start:a,end:$C};case 33:case 61:return $C+=2,61===HC.charCodeAt($C)&&++$C,{type:7,value:HC.slice(a,$C),start:a,end:$C}}}return">>>="===(i=HC.substr($C,4))?{type:7,value:i,start:a,end:$C+=4}:">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:$C+=3}:u===(t=n.substr(0,2))[1]&&0<="+-<>&|".indexOf(u)||"=>"===t?{type:7,value:t,start:a,end:$C+=2}:0<="<>=!+-*%&|^/".indexOf(u)?{type:7,value:u,start:a,end:++$C}:void sg({},"Unexpected token %0","ILLEGAL")}function Jx(){var e,t,n;if(Ix(Rx((n=HC[$C]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=$C,e="","."!==n){if(e=HC[$C++],n=HC[$C],"0"===e){if("x"===n||"X"===n)return++$C,function(e){for(var t="";$C<YC&&Gx(HC[$C]);)t+=HC[$C++];return 0===t.length&&sg({},"Unexpected token %0","ILLEGAL"),Ux(HC.charCodeAt($C))&&sg({},"Unexpected token %0","ILLEGAL"),{type:6,value:parseInt("0x"+t,16),start:e,end:$C}}(t);if(jx(n))return function(e){for(var t="0"+HC[$C++];$C<YC&&jx(HC[$C]);)t+=HC[$C++];return(Ux(HC.charCodeAt($C))||Rx(HC.charCodeAt($C)))&&sg({},"Unexpected token %0","ILLEGAL"),{type:6,value:parseInt(t,8),octal:!0,start:e,end:$C}}(t);n&&Rx(n.charCodeAt(0))&&sg({},"Unexpected token %0","ILLEGAL")}for(;Rx(HC.charCodeAt($C));)e+=HC[$C++];n=HC[$C]}if("."===n){for(e+=HC[$C++];Rx(HC.charCodeAt($C));)e+=HC[$C++];n=HC[$C]}if("e"===n||"E"===n)if(e+=HC[$C++],("+"===(n=HC[$C])||"-"===n)&&(e+=HC[$C++]),Rx(HC.charCodeAt($C)))for(;Rx(HC.charCodeAt($C));)e+=HC[$C++];else sg({},"Unexpected token %0","ILLEGAL");return Ux(HC.charCodeAt($C))&&sg({},"Unexpected token %0","ILLEGAL"),{type:6,value:parseFloat(e),start:t,end:$C}}function Kx(){var e,t,n,r;return XC=null,qx(),e=$C,t=function(){var e,t,n,r;for(Ix("/"===(e=HC[$C]),"Regular expression literal must start with a slash"),t=HC[$C++],n=!1,r=!1;$C<YC;)if(t+=e=HC[$C++],"\\"===e)Bx((e=HC[$C++]).charCodeAt(0))&&sg({},"Invalid regular expression: missing /"),t+=e;else if(Bx(e.charCodeAt(0)))sg({},"Invalid regular expression: missing /");else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||sg({},"Invalid regular expression: missing /"),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";$C<YC&&Vx((e=HC[$C]).charCodeAt(0));)++$C,"\\"===e&&$C<YC?sg({},"Unexpected token %0","ILLEGAL"):(n+=e,t+=e);return 0<=n.search(/[^gimuy]/g)&&sg({},"Invalid regular expression",n),{value:n,literal:t}}(),r=function(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){return 1114111>=parseInt(t,16)?"x":void sg({},"Invalid regular expression")})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$C}}function Qx(){var e;return qx(),$C>=YC?{type:2,start:$C,end:$C}:Ux(e=HC.charCodeAt($C))?Xx():40===e||41===e||59===e?Zx():39===e||34===e?function(){var e,t,n,i,a="",o=!1;for(Ix("'"===(e=HC[$C])||'"'===e,"String literal must starts with a quote"),t=$C,++$C;$C<YC;){if((n=HC[$C++])===e){e="";break}if("\\"===n)(n=HC[$C++])&&Bx(n.charCodeAt(0))?"\r"===n&&"\n"===HC[$C]&&++$C:"u"===n||"x"===n?"{"===HC[$C]?(++$C,a+=$x()):a+=Hx(n):"n"===n?a+="\n":"r"===n?a+="\r":"t"===n?a+="\t":"b"===n?a+="\b":"f"===n?a+="\f":"v"===n?a+="\v":jx(n)?(0!==(i="01234567".indexOf(n))&&(o=!0),$C<YC&&jx(HC[$C])&&(o=!0,i=8*i+"01234567".indexOf(HC[$C++]),0<="0123".indexOf(n)&&$C<YC&&jx(HC[$C])&&(i=8*i+"01234567".indexOf(HC[$C++]))),a+=r(i)):a+=n;else{if(Bx(n.charCodeAt(0)))break;a+=n}}return""!==e&&sg({},"Unexpected token %0","ILLEGAL"),{type:8,value:a,octal:o,start:t,end:$C}}():46===e?Rx(HC.charCodeAt($C+1))?Jx():Zx():Rx(e)?Jx():Zx()}function eg(){var e;return $C=(e=XC).end,XC=Qx(),$C=e.end,e}function tg(){var e;e=$C,XC=Qx(),$C=e}function ng(e,t,n){var r=new zx("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function rg(e,t){var n=new zx("CallExpression");return n.callee=e,n.arguments=t,n}function ig(e){var t=new zx("Identifier");return t.name=e,t}function ag(e){var t=new zx("Literal");return t.value=e.value,t.raw=HC.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function og(e,t,n){var r=new zx("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function ug(e,t,n){var r=new zx("Property");return r.key=t,r.value=n,r.kind=e,r}function sg(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(function(e,t){return Ix(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(i)).index=$C,n.description=i,n}function lg(e){2===e.type&&sg(e,"Unexpected end of input"),6===e.type&&sg(e,"Unexpected number"),8===e.type&&sg(e,"Unexpected string"),3===e.type&&sg(e,"Unexpected identifier"),4===e.type&&sg(e,"Unexpected reserved word"),sg(e,"Unexpected token %0",e.value)}function cg(e){var t=eg();(7!==t.type||t.value!==e)&&lg(t)}function fg(e){return 7===XC.type&&XC.value===e}function dg(e){return 4===XC.type&&XC.value===e}function hg(){var e=[];for($C=XC.start,cg("[");!fg("]");)fg(",")?(eg(),e.push(null)):(e.push(kg()),fg("]")||cg(","));return eg(),function(e){var t=new zx("ArrayExpression");return t.elements=e,t}(e)}function pg(){var e;return $C=XC.start,8===(e=eg()).type||6===e.type?(e.octal&&sg(e,"Octal literals are not allowed in strict mode."),ag(e)):ig(e.value)}function xg(){var e,t,n;return $C=XC.start,3===(e=XC).type?(n=pg(),cg(":"),ug("init",n,kg())):2===e.type||7===e.type?void lg(e):(t=pg(),cg(":"),ug("init",t,kg()))}function gg(){var e,t,n=[],r={},i=String;for($C=XC.start,cg("{");!fg("}");)t="$"+("Identifier"===(e=xg()).key.type?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?sg({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),fg("}")||cg(",");return cg("}"),function(e){var t=new zx("ObjectExpression");return t.properties=e,t}(n)}function mg(){var e,t,n;if(fg("("))return function(){var e;return cg("("),e=Eg(),cg(")"),e}();if(fg("["))return hg();if(fg("{"))return gg();if(e=XC.type,$C=XC.start,3===e||nD[XC.value])n=ig(eg().value);else if(8===e||6===e)XC.octal&&sg(XC,"Octal literals are not allowed in strict mode."),n=ag(eg());else{if(4===e)throw new Error("Disabled.");1===e?((t=eg()).value="true"===t.value,n=ag(t)):5===e?((t=eg()).value=null,n=ag(t)):fg("/")||fg("/=")?(n=ag(Kx()),tg()):lg(eg())}return n}function vg(){var e=[];if(cg("("),!fg(")"))for(;$C<YC&&(e.push(kg()),!fg(")"));)cg(",");return cg(")"),e}function _g(){return cg("."),function(){var e;return $C=XC.start,function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e=eg())||lg(e),ig(e.value)}()}function yg(){var e;return cg("["),e=Eg(),cg("]"),e}function bg(){var e=function(){var e;for(e=mg();;)if(fg("."))e=og(".",e,_g());else if(fg("("))e=rg(e,vg());else{if(!fg("["))break;e=og("[",e,yg())}return e}();if(7===XC.type&&(fg("++")||fg("--")))throw new Error("Disabled.");return e}function wg(){var e,t;if(7!==XC.type&&4!==XC.type)t=bg();else{if(fg("++")||fg("--"))throw new Error("Disabled.");if(fg("+")||fg("-")||fg("~")||fg("!"))e=eg(),t=wg(),t=function(e,t){var n=new zx("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(dg("delete")||dg("void")||dg("typeof"))throw new Error("Disabled.");t=bg()}}return t}function Sg(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function kg(){var e,t;return e=function(){var e,t,n,r,i,a,o,u,s,l;if(e=XC,s=wg(),0===(i=Sg(r=XC)))return s;for(r.prec=i,eg(),t=[e,XC],a=[s,r,o=wg()];0<(i=Sg(XC));){for(;2<a.length&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=ng(u,s,o),a.push(n);(r=eg()).prec=i,a.push(r),t.push(XC),n=wg(),a.push(n)}for(n=a[l=a.length-1],t.pop();1<l;)t.pop(),n=ng(a[l-1].value,a[l-2],n),l-=2;return n}(),fg("?")&&(eg(),t=kg(),cg(":"),e=function(e,t,n){var r=new zx("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,kg())),e}function Eg(){var e=kg();if(fg(","))throw new Error("Disabled.");return e}function Ag(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){3>t.length&&D("Missing arguments to clamp function."),3<t.length&&D("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:"new Date",date:n("getDate","new Date",0),day:n("getDay","new Date",0),year:n("getFullYear","new Date",0),month:n("getMonth","new Date",0),hours:n("getHours","new Date",0),minutes:n("getMinutes","new Date",0),seconds:n("getSeconds","new Date",0),milliseconds:n("getMilliseconds","new Date",0),time:n("getTime","new Date",0),timezoneoffset:n("getTimezoneOffset","new Date",0),utcdate:n("getUTCDate","new Date",0),utcday:n("getUTCDay","new Date",0),utcyear:n("getUTCFullYear","new Date",0),utcmonth:n("getUTCMonth","new Date",0),utchours:n("getUTCHours","new Date",0),utcminutes:n("getUTCMinutes","new Date",0),utcseconds:n("getUTCSeconds","new Date",0),utcmilliseconds:n("getUTCMilliseconds","new Date",0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase","String",0),lower:n("toLowerCase","String",0),substring:n("substring","String"),split:n("split","String"),replace:n("replace","String"),regexp:"RegExp",test:n("test","RegExp"),if:function(t){3>t.length&&D("Missing arguments to if function."),3<t.length&&D("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function Tg(e,t,n){var r=e+":"+n,i=iD[r];return i&&i[0]===t||(iD[r]=i=[t,t(n)]),i[1]}function Cg(e,t){return Tg("timeFormat",ly,t)(e)}function Dg(e,t,n){return aD.setMonth(e),aD.setDate(t),Cg(aD,n)}function Ng(e,t,n,r){var i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)}function Fg(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function Og(e,t){var n;return J(e)?e:O(e)?(n=t.scales[e])&&n.value:void 0}function Mg(e,t,n){var r="%"+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}function Lg(e,t,n,r){if("Literal"===t[0].type)Mg(n,r,t[0].value);else if("Identifier"===t[0].type)for(e in n.scales)Mg(n,r,e)}function Pg(e,t){return function(n,r,i){if(n){var a=Og(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function zg(e){var t=this.context.data[e];return t?t.values.value:[]}function Ig(e,t,n,r){"Literal"!==t[0].type&&D("First argument to data functions must be a string literal.");var i=t[0].value,a=":"+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function Rg(e){return e.data}function Gg(e,t){var n=zg.call(t,e);return n.root&&n.root.lookup||cD}function jg(e,t){return!(e!==t&&(e==e||t==t))||!(!v_(e)||!v_(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!jg(e[n],t[n]))return!1;return!0}(e,t)}function Wg(e){return function(t){for(var n in e)if(!jg(t[n],e[n]))return!1;return!0}}function Bg(e,t){for(var n,r,i=t.fields,a=t.values,o=i.length,u=0;u<o;++u)if((r=i[u]).getter=L.getter||L(r.field),oe(n=r.getter(e))&&(n=R(n)),oe(a[u])&&(a[u]=R(a[u])),oe(a[u][0])&&(a[u]=a[u].map(R)),"E"===r.type){if(v_(a[u])?0>a[u].indexOf(n):n!==a[u])return!1}else if("R"===r.type){if(!Ng(n,a[u]))return!1}else if("R-RE"===r.type){if(!Ng(n,a[u],!0,!1))return!1}else if("R-E"===r.type){if(!Ng(n,a[u],!1,!1))return!1}else if("R-LE"===r.type&&!Ng(n,a[u],!1,!0))return!1;return!0}function Ug(e,t,n,r){"Literal"!==t[0].type&&D("First argument to indata must be a string literal.");var i=t[0].value;"intersect"!==(2<=t.length&&t[t.length-1].value)||r.hasOwnProperty("@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),Ig(0,t,n,r)}function Vg(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||L(r[u]),oe(n=a[u](e))&&(n=R(n)),oe(i[u])&&(i[u]=R(i[u])),t["bin_"+r[u]]){if(oe(i[u][0])&&(i[u]=i[u].map(R)),!Ng(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function qg(e,t){for(var n,r,i=t.intervals,a=i.length,o=0;o<a;++o){if(n=i[o].extent,r=(i[o].getter||(i[o].getter=L(i[o].field)))(e),!n||n[0]===n[1])return!1;if(oe(r)&&(r=R(r)),oe(n[0])&&(n=i[o].extent=n.map(R)),ue(n[0])&&!Ng(r,n))return!1;if(O(n[0])&&0>n.indexOf(r))return!1}return!0}function Hg(e,t,n,r){for(var i,a,o,u,s,l=this.context.data[e],c=l?l.values.value:[],f=l?l["index:unit"]&&l["index:unit"].value:void 0,d="intersect"===n,h=c.length,p=0;p<h;++p)if(i=c[p],f&&d){if(-1===(o=(a=a||{})[u=i.unit]||0))continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===f.size)return!0;if(!s&&o===f.get(u).count)return!1}else if(d^(s=r(t,i)))return s;return h&&d}function $g(e,t,n){return Hg.call(this,e,t,n,Vg)}function Yg(e,t,n,r){"Literal"!==t[0].type&&D("First argument to indata must be a string literal.");var i=t[0].value;"intersect"!==(2<=t.length&&t[t.length-1].value)||r.hasOwnProperty("@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),Ig(0,t,n,r)}function Xg(e,t,n,r){var i,a,o,u,s,l=this.context.data[e],c=l?l.values.value:[],f=l?l["index:unit"]&&l["index:unit"].value:void 0,d=c[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d["bin_"+d.fields[h]];break}return f&&1===f.size&&(r="union"),f&&"intersect"===r?(s=c.reduce((function(e,t){return(e[t.unit]||(e[t.unit]=[])).push({unit:t.unit,value:t.values[a]}),e}),{}),o=Object.keys(s).map((function(e){return{unit:e,value:u?Jg(s[e],"union"):Zg(s[e],"union")}}))):o=c.map((function(e){return{unit:e.unit,value:e.values[a]}})),u?Jg(o,r):Zg(o,r)}}function Zg(e,t){for(var n,r,i,a,o={},u=0,s={},l=[],c=0,f=e.length;c<f;++c)r=(n=e[c]).unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],"intersect"===t&&i.count!==u||l.push(i.value);return l.length?l:void 0}function Jg(e,t){for(var n,r,i,a,o="intersect"===t?Qg:Kg,u=0,s=e.length;u<s;++u)oe((n=e[u].value)[0])&&(n=n.map(R)),(i=n[0])>(a=n[1])&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function Kg(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function Qg(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function em(e,t,n){return 1===arguments.length?dD[e]:(dD[e]=t,n&&(pD[e]=n),vD&&(vD.functions[e]="this."+e),this)}function tm(e,t,n){var r,i,a={};try{r=function(e){$C=0,YC=(HC=e).length,XC=null,tg();var t=Eg();if(2!==XC.type)throw new Error("Unexpect token after expression.");return t}(e=O(e)?e:M(e)+"")}catch(t){D("Expression parse error: "+e)}return r.visit((function(e){if("CallExpression"===e.type){var n=e.callee.name,r=mD.visitors[n];r&&r(n,e.arguments,t,a)}})),(i=vD(r)).globals.forEach((function(e){var n="$"+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))})),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function nm(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function rm(e,t,n,r){return new nm(e,t,n,r)}function im(e,t){return rm("operator",e,t)}function am(e){var t={$ref:e.id};return 0>e.id&&(e.refs=e.refs||[]).push(t),t}function om(e,t){return t?{$field:e,$name:t}:{$field:e}}function um(e,t){return{$compare:e,$order:t}}function sm(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function lm(e){return e&&e.signal}function cm(e){if(lm(e))return!0;if(F(e))for(var t in e)if(cm(e[t]))return!0;return!1}function fm(e,t){return null==e?t:e}function dm(e){return e&&e.signal||e}function hm(e,t){return(e.merge?pm:e.stream?xm:e.type?gm:D("Invalid stream specification: "+M(e)))(e,t)}function pm(e,t){var n=mm({merge:e.merge.map((function(e){return hm(e,t)}))},e,t);return t.addStream(n).id}function xm(e,t){var n=mm({stream:hm(e.stream,t)},e,t);return t.addStream(n).id}function gm(e,t){var n,r;return"timer"===e.type?(n=t.event("timer",e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function(e){return"scope"===e?"view":e||"view"}(e.source),e.type),r=mm({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function mm(e,t,n){var r=t.between;return r&&(2!==r.length&&D('Stream "between" parameter must have 2 entries: '+M(t)),e.between=[hm(r[0],n),hm(r[1],n)]),r=t.filter?Z(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){return"event.item"+(e&&"*"!==e?"&&event.item.mark.marktype==='"+e+"'":"")+(n?"&&event.item.mark.role==='"+n+"'":"")+(t?"&&event.item.mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),"scope"===t.source&&r.push("inScope(event.item)"),r.length&&(e.filter=tm("("+r.join(")&&(")+")").$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function vm(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&0<=i.indexOf(a)?--o:r&&0<=r.indexOf(a)&&++o}return t}function _m(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=vm(e,i,",","[{","]}"),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function ym(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=vm(e,i,"]","[","]"))===r)throw"Empty between selector: "+e;if(2!==(t=_m(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(i+1).trim())[0])throw"Expected '>' after between selector: "+e;return t=t.map(ym),(n=ym(e.slice(1).trim())).between?{between:t,stream:n}:(n.between=t,n)}(e):function(e){var t,n,r={source:xD},i=[],a=[0,0],o=0,u=0,s=e.length,l=0;if("}"===e[s-1]){if(!(0<=(l=e.lastIndexOf("{"))))throw"Unmatched right brace: "+e;try{a=function(e){var t=e.split(",");if(!e.length||2<t.length)throw e;return t.map((function(t){var n=+t;if(n!=n)throw e;return n}))}(e.substring(l+1,s-1))}catch(r){throw"Invalid throttle specification: "+e}e=e.slice(0,l).trim(),s=e.length,l=0}if(!s)throw e;if("@"===e[0]&&(o=++l),(t=vm(e,l,":"))<s&&(i.push(e.substring(u,t).trim()),u=l=++t),(l=vm(e,l,"["))===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,l).trim()),n=[],(u=++l)===s)throw"Unmatched left bracket: "+e;for(;l<s;){if((l=vm(e,l,"]"))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,l).trim()),l<s-1&&"["!==e[++l])throw"Expected left bracket: "+e;u=++l}if(!(s=i.length)||wD.test(i[s-1]))throw"Invalid event selector: "+e;return 1<s?(r.type=i[1],o?r.markname=i[0].slice(1):function(e){return gD.hasOwnProperty(e)}(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}(e)}function bm(e,t,n){var r,i,a=e.events,o=e.update,u=e.encode,s=[];a||D("Signal update missing events specification."),O(a)&&(a=function(e,t,n){return xD=t||bD,gD=n||SD,_m(e.trim()).map(ym)}(a,t.isSubscope()?"scope":"view")),(a=Z(a).filter((function(e){return e.signal||e.scale?(s.push(e),0):1}))).length&&s.push(1<a.length?{merge:a}:a[0]),null!=u&&(o&&D("Signal encode and update are mutually exclusive."),o="encode(item(),"+M(u)+")"),r=O(o)?tm(o,t,"var datum=event.item&&event.item.datum;"):null==o.expr?null==o.value?null==o.signal?D("Invalid signal update specification."):{$expr:"_.value",$params:{value:t.signalRef(o.signal)}}:o.value:tm(o.expr,t,"var datum=event.item&&event.item.datum;"),i={target:n,update:r},e.force&&(i.options={force:!0}),s.forEach((function(e){t.addUpdate(te(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):hm(e,t)}}(e,t),i))}))}function wm(e){return function(t,n,r){return rm(e,n,t||void 0,r)}}function Sm(e){return rN.hasOwnProperty(e)}function km(e){return tN.hasOwnProperty(e)}function Em(e){return"quantile"===e}function Am(e,t){var n,r=t.getScale(e.name).params;for(n in r.domain=Dm(e.domain,e,t),null!=e.range&&(r.range=function e(t,n,r){var i=t.range,a=n.config.range;if(i.signal)return n.signalRef(i.signal);if(O(i)){if(a&&a.hasOwnProperty(i))return t=te({},t,{range:a[i]}),e(t,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=Sm(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:D("Unrecognized scale range value: "+M(i))}else{if(i.scheme)return r.scheme=Tm(i.scheme,n),i.extent&&(r.schemeExtent=function(e,t){return e.signal?t.signalRef(e.signal):e.map((function(e){return Tm(e,t)}))}(i.extent,n)),void(i.count&&(r.schemeCount=Tm(i.count,n)));if(i.step)return void(r.rangeStep=Tm(i.step,n));if(Sm(t.type)&&!v_(i))return Dm(i,t,n);v_(i)||D("Unsupported range type: "+M(i))}return i.map((function(e){return Tm(e,n)}))}(e,t,r)),null!=e.interpolate&&function(e,t){t.interpolate=Tm(e.type||e),null!=e.gamma&&(t.interpolateGamma=Tm(e.gamma))}(e.interpolate,r),null!=e.nice&&function(e,t){t.nice=F(e)?{interval:Tm(e.interval),step:Tm(e.step)}:Tm(e)}(e.nice,r),e)r.hasOwnProperty(n)||"name"===n||(r[n]=Tm(e[n],t))}function Tm(e,t){return F(e)?e.signal?t.signalRef(e.signal):D("Unsupported object: "+M(e)):e}function Cm(e){D("Can not find data set: "+M(e))}function Dm(e,t,n){return e?e.signal?n.signalRef(e.signal):(v_(e)?Nm:e.fields?Om:Fm)(e,t,n):void((null!=t.domainMin||null!=t.domainMax)&&D("No scale domain defined for domainMin/domainMax to override."))}function Nm(e,t,n){return e.map((function(e){return Tm(e,n)}))}function Fm(e,t,n){var r=n.getData(e.data);return r||Cm(e.data),Sm(t.type)?r.valuesRef(n,e.field,Lm(e.sort,!1)):Em(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Om(e,t,n){var r=e.data,i=e.fields.reduce((function(e,t){return t=O(t)?{data:r,field:t}:v_(t)||t.signal?function(e,t){var n="_:vega:_"+KD++,r=TD({});if(v_(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+M(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,YD({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e}),[]);return(Sm(t.type)?Mm:Em(t.type)?Pm:zm)(e,n,i)}function Mm(e,t,n){var r,i,a,o;return r=n.map((function(e){var n=t.getData(e.data);return n||Cm(e.data),n.countsRef(t,e.field)})),i=t.add(kD({groupby:yD,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(TD({pulse:am(i)})),o=t.add(JD({field:yD,sort:t.sortRef(Lm(e.sort,!0)),pulse:am(a)})),am(o)}function Lm(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?D("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&D("Multiple domain scales support op count only."):D("No field provided for sort aggregate op: "+e.op):F(e)?e.field="key":e={field:"key"}),e}function Pm(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||Cm(e.data),n.domainRef(t,e.field)}));return am(t.add(GD({values:r})))}function zm(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||Cm(e.data),n.extentRef(t,e.field)}));return am(t.add(RD({extents:r})))}function Im(e,t,n){return v_(e)?e.map((function(e){return Im(e,t,n)})):F(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:D("Unsupported parameter object: "+M(e)):e}function Rm(e,t,n,r){var i=tm(e,t);return i.$fields.forEach((function(e){r[e]=1})),te(n,i.$params),i.$expr}function Gm(e,t,n,r){return function e(t,n,r,i){var a,o,u;if(t.signal)a="datum",u=Rm(t.signal,n,r,i);else if(t.group||t.parent){for(o=y(1,t.level||1),a="item";0<o--;)a+=".mark.group";t.parent?(u=t.parent,a+=".datum"):u=t.group}else t.datum?(a="datum",u=t.datum):D("Invalid field reference: "+M(t));return t.signal||(O(u)?(i[u]=1,u=N(u).map(M).join("][")):u=e(u,n,r,i)),a+"["+u+"]"}(F(e)?e:{datum:e},t,n,r)}function jm(e,t,n,r,i){var a,o,u,s=Wm(e.scale,n,r,i);return null==e.range?(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=function(e,t){if(!O(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(a=(o=s+".bandwidth")+"()"+(1==(a=+e.band)?"":"*"+a),0>u&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")):(o=s+".range()",t=0==(a=+e.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"),t}function Wm(e,t,n,r){if(O(e))i="%"+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=M(i);else{for(var i in t.scales)n["%"+i]=t.scaleRef(i);i=M("%")+"+"+(e.signal?"("+Rm(e.signal,t,n,r)+")":Gm(e,t,n,r))}return"_["+i+"]"}function Bm(e,t,n,r){return F(e)?"("+Um(0,e,t,n,r)+")":e}function Um(e,t,n,r,i){if(null!=t.gradient)return function(e,t,n,r){return"this.gradient("+Wm(e.gradient,t,n,r)+","+M(e.start)+","+M(e.stop)+","+M(e.count)+")"}(t,n,r,i);var a=t.signal?Rm(t.signal,n,r,i):t.color?function(e,t,n,r){function i(e,i,a,o){return"this."+e+"("+[Um(0,i,t,n,r),Um(0,a,t,n,r),Um(0,o,t,n,r)].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}(t.color,n,r,i):null==t.field?void 0===t.value?void 0:M(t.value):Gm(t.field,n,r,i);return null!=t.scale&&(a=jm(t,a,n,r,i)),void 0===a&&(a=null),null!=t.exponent&&(a="Math.pow("+a+","+Bm(t.exponent,n,r,i)+")"),null!=t.mult&&(a+="*"+Bm(t.mult,n,r,i)),null!=t.offset&&(a+="+"+Bm(t.offset,n,r,i)),t.round&&(a="Math.round("+a+")"),a}function Vm(e,t,n){return e+"["+M(t)+"]="+n+";"}function qm(e,t,n,r,i){var a="";return t.forEach((function(e){var t=Um(0,e,n,r,i);a+=e.test?Rm(e.test,n,r,i)+"?"+t+":":t})),":"===I(a)&&(a+="null"),Vm("o",e,a)}function Hm(e,t,n,r){var i,a,o={},u="var o=item,datum=o.datum,$;";for(i in e)a=e[i],v_(a)?u+=qm(i,a,r,n,o):u+=Vm("o",i,Um(0,a,r,n,o));return u+=function(e,t){var n="";return oN[t]?n:(e.x2&&(e.x?(uN[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(uN[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)}(e,t),{$expr:u+="return 1;",$fields:Object.keys(o),$output:Object.keys(e)}}function $m(e){return F(e)?te({},e):{value:e}}function Ym(e,t,n,r){return null==n?0:(F(n)&&!v_(n)?e.update[t]=n:e[r||"enter"][t]={value:n},1)}function Xm(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=te(e[r]||{},t[r]));return e}function Zm(e,t,n,r,i,a){var o,u;for(u in(a=a||{}).encoders={$encode:o={}},e=function(e,t,n,r,i){var a,o,u={};for(a in("legend"==n||0===(n+"").indexOf("axis"))&&(n=null),o="frame"===n?i.group:"mark"===n?te({},i.mark,i[t]):null)Km(a,e)||("fill"===a||"stroke"===a)&&(Km("fill",e)||Km("stroke",e))||(u[a]=Jm(o[a]));return Z(r).forEach((function(t){var n=i.style&&i.style[t];for(var r in n)Km(r,e)||(u[r]=Jm(n[r]))})),(e=te({},e)).enter=te(u,e.enter),e}(e,t,n,r,i.config))o[u]=Hm(e[u],t,a,i);return a}function Jm(e){return e&&e.signal?{signal:e.signal}:{value:e}}function Km(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function Qm(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:Xm(a,o,aN)}}function ev(e,t,n){return fm(t[e],n[e])}function tv(e,t){return"vertical"===fm(e.direction,t)}function nv(e,t){return fm(e.gradientLength,t.gradientLength||t.gradientWidth)}function rv(e,t){return fm(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function iv(e,t){return fm(e.columns,fm(t.columns,+tv(e,t.symbolDirection)))}function av(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function ov(e,t,n,r){var i,a,o,u,s,l,c={value:0},f=tv(e,n.gradientDirection),d=rv(e,n),h=nv(e,n);return f?(o=[0,1],u=[0,0],s=d,l=h):(o=[0,0],u=[1,0],s=h,l=d),Ym(i={enter:a={opacity:c,x:c,y:c,width:$m(s),height:$m(l)},update:te({},a,{opacity:{value:1},fill:{gradient:t,start:o,stop:u}}),exit:{opacity:c}},"stroke",ev("gradientStrokeColor",e,n)),Ym(i,"strokeWidth",ev("gradientStrokeWidth",e,n)),Ym(i,"opacity",ev("gradientOpacity",e,n),"update"),Qm("rect","legend-gradient",null,void 0,void 0,i,r)}function uv(e,t,n,r,i){var a,o,u,s,l,c,f={value:0},d=tv(e,n.gradientDirection),h=rv(e,n),p=nv(e,n),x="";return d?(u="y",l="y2",s="x",c="width",x="1-"):(u="x",l="x2",s="y",c="height"),(o={opacity:f,fill:{scale:t,field:"value"}})[u]={signal:x+"datum.perc",mult:p},o[s]=f,o[l]={signal:x+"datum.perc2",mult:p},o[c]=$m(h),Ym(a={enter:o,update:te({},o,{opacity:{value:1}}),exit:{opacity:f}},"stroke",ev("gradientStrokeColor",e,n)),Ym(a,"strokeWidth",ev("gradientStrokeWidth",e,n)),Ym(a,"opacity",ev("gradientOpacity",e,n),"update"),Qm("rect","legend-band",null,"value",i,a,r)}function sv(e,t,n,r){var i,a,o,u,s,l={value:0},c=tv(e,t.gradientDirection),f=$m(rv(e,t)),d=nv(e,t),h=ev("labelOverlap",e,t),p="";return Ym(i={enter:a={opacity:l},update:o={opacity:{value:1},text:{field:"label"}},exit:{opacity:l}},"fill",ev("labelColor",e,t)),Ym(i,"font",ev("labelFont",e,t)),Ym(i,"fontSize",ev("labelFontSize",e,t)),Ym(i,"fontWeight",ev("labelFontWeight",e,t)),Ym(i,"fillOpacity",ev("labelOpacity",e,t)),Ym(i,"limit",fm(e.labelLimit,t.gradientLabelLimit)),c?(a.align={value:"left"},a.baseline=o.baseline={signal:'datum.perc<=0?"bottom":datum.perc>=1?"top":"middle"'},u="y",s="x",p="1-"):(a.align=o.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},a.baseline={value:"top"},u="x",s="y"),a[u]=o[u]={signal:p+"datum.perc",mult:d},a[s]=o[s]=f,f.offset=fm(e.labelOffset,t.gradientLabelOffset)||0,e=Qm("text","legend-label","guide-label","value",r,i,n),h&&(e.overlap={method:h,order:"datum.index"}),e}function lv(e,t,n,r,i,a,o,u){return{type:"group",name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function cv(e,t,n,r,i){var a,o,u,s,l,c,f,d=n.entries,h=!(!d||!d.interactive),p=d?d.name:void 0,x=ev("clipHeight",e,t),g=ev("symbolOffset",e,t),m={data:"value"},v={},_=i+"?datum.offset:datum.size",y=x?$m(x):{field:"size"},b="max(1,"+i+")";return y.mult=.5,v={enter:a={opacity:sN,x:{signal:_,mult:.5,offset:g},y:y},update:o={opacity:{value:1},x:a.x,y:a.y},exit:{opacity:sN}},e.fill||(Ym(v,"fill",t.symbolBaseFillColor),Ym(v,"stroke",t.symbolBaseStrokeColor)),Ym(v,"shape",ev("symbolType",e,t)),Ym(v,"size",ev("symbolSize",e,t)),Ym(v,"strokeWidth",ev("symbolStrokeWidth",e,t)),Ym(v,"fill",ev("symbolFillColor",e,t)),Ym(v,"stroke",ev("symbolStrokeColor",e,t)),Ym(v,"opacity",ev("symbolOpacity",e,t),"update"),iN.forEach((function(t){e[t]&&(o[t]=a[t]={scale:e[t],field:"value"})})),s=Qm("symbol","legend-symbol",null,"value",m,v,n.symbols),x&&(s.clip=!0),(u=$m(g)).offset=ev("labelOffset",e,t),Ym(v={enter:a={opacity:sN,x:{signal:_,offset:u},y:y},update:o={opacity:{value:1},text:{field:"label"},x:a.x,y:a.y},exit:{opacity:sN}},"align",ev("labelAlign",e,t)),Ym(v,"baseline",ev("labelBaseline",e,t)),Ym(v,"fill",ev("labelColor",e,t)),Ym(v,"font",ev("labelFont",e,t)),Ym(v,"fontSize",ev("labelFontSize",e,t)),Ym(v,"fontWeight",ev("labelFontWeight",e,t)),Ym(v,"limit",ev("labelLimit",e,t)),Ym(v,"fillOpacity",ev("labelOpacity",e,t)),l=Qm("text","legend-label","guide-label","value",m,v,n.labels),v={enter:{noBound:{value:!0},width:sN,height:x?$m(x):sN,opacity:sN},exit:{opacity:sN},update:o={opacity:{value:1},row:{signal:null},column:{signal:null}}},tv(e,t.symbolDirection)?(c="ceil(item.mark.items.length/"+b+")",o.row.signal="datum.index%"+c,o.column.signal="floor(datum.index/"+c+")",f={field:["row","datum.index"]}):(o.row.signal="floor(datum.index/"+b+")",o.column.signal="datum.index%"+b,f={field:"datum.index"}),o.column.signal=i+"?"+o.column.signal+":datum.index",(e=lv("scope",null,p,r={facet:{data:r,name:"value",groupby:"index"}},h,Xm(v,d,aN),[s,l])).sort=f,e}function fv(e,t){var n;return F(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+dv(e.path)+")":e.sphere&&(n="geoShape("+dv(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function dv(e){return F(e)&&e.signal?e.signal:M(e)}function hv(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?"group"===e.type?"scope":t||"mark":t}function pv(e){return{marktype:e.type,name:e.name||void 0,role:e.role||hv(e),zindex:+e.zindex||void 0}}function xv(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function gv(e,t){var n=Pn(e.type);n||D("Unrecognized transform type: "+M(e.type));var r=rm(n.type.toLowerCase(),null,mv(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function mv(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)o[(r=e.params[i]).name]=vv(r,t,n);return o}function vv(e,t,n){var r=e.type,i=t[e.name];return"index"===r?function(e,t,n){return O(t.from)||D('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0===i?void(e.required&&D("Missing required "+M(t.type)+" parameter: "+M(e.name))):"param"===r?function(e,t,n){var r=t[e.name];return e.array?(v_(r)||D("Expected an array of sub-parameters. Instead: "+M(r)),r.map((function(t){return yv(e,t,n)}))):yv(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!lm(i)?i.map((function(t){return _v(e,t,n)})):_v(e,i,n)}function _v(e,t,n){var r=e.type;if(lm(t))return bv(r)?D("Expression references can not be signals."):wv(r)?n.fieldRef(t):Sv(r)?n.compareRef(t):n.signalRef(t.signal);var i=e.expr||wv(r);return i&&function(e){return e&&e.expr}(t)?n.exprRef(t.expr,t.as):i&&function(e){return e&&e.field}(t)?om(t.field,t.as):bv(r)?tm(t,n):function(e){return"data"===e}(r)?am(n.getData(t).values):wv(r)?om(t):Sv(r)?n.compareRef(t):t}function yv(e,t,n){var r,i,a,o,u;for(o=0,u=e.params.length;o<u;++o){for(a in(i=e.params[o]).key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||D("Unsupported parameter: "+M(t)),r=te(mv(i,t,n),i.key),am(n.add(WD(r)))}function bv(e){return"expr"===e}function wv(e){return"field"===e}function Sv(e){return"compare"===e}function kv(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:am(t.getData(e.data).output)}function Ev(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Av(e){return O(e)?e:null}function Tv(e,t,n){var r,i=sm(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function Cv(e,t,n,r,i,a,o){var u,s,l=t[n]||(t[n]={}),c=function(e){return F(e)?("descending"===e.order?"-":"+")+sm(e.op,e.field):""}(a),f=Av(i);if(null!=f&&(e=t.scope,u=l[f+=c?"|"+c:""]),!u){var d=a?{field:yD,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:am(t.output)};c&&(d.sort=e.sortRef(a)),s=e.add(rm(r,void 0,d)),o&&(t.index[i]=s),u=am(s),null!=f&&(l[f]=u)}return u}function Dv(e,t,n){var r,i,a,o,u=e.from.facet,s=u.name,l=kv(u,t);u.name||D("Facet must have a name: "+M(u)),u.data||D("Facet must reference a data set: "+M(u)),u.field?o=t.add(BD({field:t.fieldRef(u.field),pulse:l})):u.groupby?o=t.add(OD({key:t.keyRef(u.groupby),group:am(t.proxy(n.parent)),pulse:l})):D("Facet must specify groupby or field: "+M(u)),i=(r=t.fork()).add(TD()),a=r.add(YD({pulse:am(i)})),r.addData(s,new Ev(r,i,i,a)),r.addSignal("parent",null),o.params.subflow={$subflow:Wv(e,r).toRuntime()}}function Nv(e,t,n){var r,i=e.remove,a=e.insert,o=e.toggle,u=e.modify,s=e.values,l=t.add(im());r=tm("if("+e.trigger+',modify("'+n+'",'+[a,i,o,u,s].map((function(e){return null==e?"null":e})).join(",")+"),0)",t),l.update=r.$expr,l.params=r.$params}function Fv(e,t){var n,r,i,a,o,u,s,l,c,f,d,h,p,x=hv(e),g="group"===e.type,m=e.from&&e.from.facet,v=e.layout||"scope"===x||"frame"===x,_="mark"===x||v||m,y=e.overlap;i=function(e,t,n){var r,i,a,o,u;return e?(r=e.facet)&&(!t&&D("Only group marks can be faceted."),null==r.field?(e.data?u=am(n.getData(e.data).aggregate):((a=gv(te({type:"aggregate",groupby:Z(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),a.params.pulse=kv(r,n),o=u=am(n.add(a))),i=n.keyRef(r.groupby,!0)):o=u=kv(r,n)):o=am(n.add(TD(null,[{}]))),o||(o=kv(e,n)),{key:i,pulse:o,parent:u}}(e.from,g,t),c=am(r=t.add(DD({key:i.key||(e.key?om(e.key):void 0),pulse:i.pulse,clean:!g}))),r=a=t.add(TD({pulse:c})),r=t.add(ID({markdef:pv(e),interactive:xv(e.interactive,t),clip:fv(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:am(r)})),f=am(r),(r=t.add(ND(Zm(e.encode,e.type,x,e.style,t,{pulse:f})))).params.parent=t.encode(),e.transform&&e.transform.forEach((function(e){var n=gv(e,t);(n.metadata.generates||n.metadata.changes)&&D("Mark transforms should not generate new data."),n.params.pulse=am(r),t.add(r=n)})),e.sort&&(r=t.add(XD({sort:t.compareRef(e.sort,!0),pulse:am(r)}))),d=am(r),(m||v)&&(h=am(v=t.add(ZD({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:f,pulse:d})))),p=am(o=t.add(AD({mark:f,pulse:h||d}))),g&&(_&&((n=t.operators).pop(),v&&n.pop()),t.pushState(d,h||p,c),m?Dv(e,t,i):_?function(e,t,n){var r=t.add(BD({pulse:n.pulse})),i=t.fork();i.add(YD()),i.addSignal("parent",null),r.params.subflow={$subflow:Wv(e,i).toRuntime()}}(e,t,i):Wv(e,t),t.popState(),_&&(v&&n.push(v),n.push(o))),y&&(p=function(e,t,n){var r,i=e.method,a=e.bound,o={method:lm(i)?n.signalRef(i.signal):i,pulse:t};return e.order&&(o.sort=n.compareRef({field:e.order})),a&&(r=a.tolerance,o.boundTolerance=lm(r)?n.signalRef(r.signal):+r,o.boundScale=n.scaleRef(a.scale),o.boundOrient=a.orient),am(n.add(jD(o)))}(y,p,t)),u=t.add(HD({pulse:p})),s=t.add(YD({pulse:am(u)},void 0,t.parent())),null!=e.name&&(l=e.name,t.addData(l,new Ev(t,a,u,s)),e.on&&e.on.forEach((function(e){(e.insert||e.remove||e.toggle)&&D("Marks only support modify triggers."),Nv(e,t,l)})))}function Ov(e,t){var n,r,i,a,o,u,s,l,c,f=t.config.legend,d=e.encode||{},h=d.legend||{},p=h.name||void 0,x=h.interactive,g=h.style,m=iN.reduce((function(t,n){return t||e[n]}),0);return m||D("Missing valid scale for legend."),o=function(e,t){var n=e.type||"symbol";return!e.type&&1===function(e){return iN.reduce((function(t,n){return t+(e[n]?1:0)}),0)}(e)&&(e.fill||e.stroke)&&(n=function(e){return nN.hasOwnProperty(e)}(t)?"gradient":km(t)?"discrete":"symbol"),"gradient"===n?km(t)?"discrete":"gradient":n}(e,t.scaleType(m)),u={orient:ev("orient",e,f),title:null!=e.title,type:o},s=am(t.add(TD(null,[u]))),h=Xm(function(e,t){var n={enter:{},update:{}};return Ym(n,"offset",ev("offset",e,t)),Ym(n,"padding",ev("padding",e,t)),Ym(n,"titlePadding",ev("titlePadding",e,t)),Ym(n,"fill",ev("fillColor",e,t)),Ym(n,"stroke",ev("strokeColor",e,t)),Ym(n,"strokeWidth",ev("strokeWidth",e,t)),Ym(n,"cornerRadius",ev("cornerRadius",e,t)),Ym(n,"strokeDash",t.strokeDash),n}(e,f),h,aN),n={enter:{x:{value:0},y:{value:0}}},l=am(t.add(PD(i={type:o,scale:t.scaleRef(m),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),"gradient"===o?(a=[ov(e,m,f,d.gradient),sv(e,f,d.labels,l)],i.count=i.count||t.signalRef("max(2,2*floor(("+dm(nv(e,f))+")/100))")):"discrete"===o?a=[uv(e,m,f,d.gradient,l),sv(e,f,d.labels,l)]:(r=function(e,t){return{align:ev("gridAlign",e,t),center:{row:!0,column:!1},columns:iv(e,t),padding:{row:ev("rowPadding",e,t),column:ev("columnPadding",e,t)}}}(e,f),a=[cv(e,f,d,l,dm(r.columns))],i.size=function(e,t,n){var r,i,a;return a=av("strokeWidth",n[0].encode),i=e.size?'scale("'+e.size+'",datum)':av("size",n[0].encode),r=function(e,t,n){return av("fontSize",e)||function(e,t,n){var r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,"guide-label"),tm("max(ceil(sqrt("+dm(i)+")+"+dm(a)+"),"+dm(r)+")",t)}(e,t,a[0].marks)),a=[lv("legend-entry",null,null,s,x,n,a,r)],u.title&&a.push(function(e,t,n,r){var i,a,o={value:0};return Ym(i={enter:a={opacity:o,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},update:{opacity:{value:1},text:$m(e.title),x:a.x,y:a.y},exit:{opacity:o}},"align",ev("titleAlign",e,t)),Ym(i,"baseline",ev("titleBaseline",e,t)),Ym(i,"fill",ev("titleColor",e,t)),Ym(i,"font",ev("titleFont",e,t)),Ym(i,"fontSize",ev("titleFontSize",e,t)),Ym(i,"fontWeight",ev("titleFontWeight",e,t)),Ym(i,"limit",ev("titleLimit",e,t)),Ym(i,"fillOpacity",ev("titleOpacity",e,t)),Qm("text","legend-title","guide-title",null,r,i,n)}(e,f,d.title,s)),c=lv("legend",g,p,s,x,h,a),e.zindex&&(c.zindex=e.zindex),Fv(c,t)}function Mv(e,t,n){return'item.anchor==="start"?'+e+':item.anchor==="end"?'+t+":"+n}function Lv(e,t){e=O(e)?{text:e}:e;var n,r,i,a=t.config.title,o=te({},e.encode);return n={orient:ev("orient",e,a)},r=am(t.add(TD(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=function(e,t,n,r){var i,a,o,u,s,l={value:0},c=e.text,f=ev("orient",e,t),d=ev("anchor",e,t),h="left"===f||"top"===f?-1:1,p="top"===f||"bottom"===f,x={group:p?"width":"height"};return u={field:x,mult:{signal:fN}},s=0>h?l:p?{field:{group:"height"}}:{field:{group:"width"}},i={enter:a={opacity:l},update:o={opacity:{value:1},text:$m(c),anchor:$m(d),orient:$m(f),extent:{field:x},align:{signal:cN}},exit:{opacity:l}},p?(o.x=u,o.y=s,a.angle=l,a.baseline={value:"top"===f?"bottom":"top"}):(o.x=s,o.y=u,a.angle={value:90*h},a.baseline={value:"bottom"}),Ym(i,"align",ev("align",e,t),"update"),Ym(i,"angle",ev("angle",e,t)),Ym(i,"baseline",ev("baseline",e,t)),Ym(i,"fill",ev("color",e,t)),Ym(i,"font",ev("font",e,t)),Ym(i,"fontSize",ev("fontSize",e,t)),Ym(i,"fontWeight",ev("fontWeight",e,t)),Ym(i,"frame",ev("frame",e,t)),Ym(i,"limit",ev("limit",e,t)),Ym(i,"offset",ev("offset",e,t)||0),Qm("text","title",e.style||"group-title",null,r,i,n)}(e,a,o,r),e.zindex&&(i.zindex=e.zindex),Fv(i,t)}function Pv(e,t){var n=[];e.transform&&e.transform.forEach((function(e){n.push(gv(e,t))})),e.on&&e.on.forEach((function(n){Nv(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){var r,i,a,o,u,s=[],l=null,c=!1,f=!1;for(e.values?s.push(l=zv({$ingest:e.values,$format:e.format})):e.url?(l=cm(e.url)||cm(e.format)?{$load:am(t.add(Iv(t,e)))}:{$request:e.url,$format:e.format},s.push(l=zv(l))):e.source&&(l=r=Z(e.source).map((function(e){return am(t.getData(e).output)})),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,l||u.source||s.push(l=zv()),s.push(o),u.generates&&(f=!0),u.modifies&&!f&&(c=!0),u.source?l=o:u.changes&&(l=null);return r&&(a=r.length-1,s[0]=qD({derive:c,pulse:a?r:r[0]}),(c||a)&&s.splice(1,0,zv())),l||s.push(zv()),s.push(YD({})),s}(e,t,n))}function zv(e){var t=TD({},e);return t.metadata={source:!0},t}function Iv(e,t){return zD({url:e.property(t.url),format:e.objectProperty(t.format)})}function Rv(e,t){return{scale:e.scale,range:t}}function Gv(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function jv(e,t){var n,r,i,a,o,u,s=function(e,t){var n=t.config,r=e.orient,i="top"===r||"bottom"===r?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===t.scaleType(e.scale)&&n.axisBand;return i||a||o?te({},n.axis,i,a,o):n.axis}(e,t),l=e.encode||{},c=l.axis||{},f=c.name||void 0,d=c.interactive,h=c.style;return n={orient:e.orient,ticks:!!ev("ticks",e,s),labels:!!ev("labels",e,s),grid:!!ev("grid",e,s),domain:!!ev("domain",e,s),title:!!fm(e.title,!1)},r=am(t.add(TD({},[n]))),c=Xm({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:$m(fm(e.offset,0)),position:$m(fm(e.position,0)),titlePadding:$m(ev("titlePadding",e,s)),minExtent:$m(ev("minExtent",e,s)),maxExtent:$m(ev("maxExtent",e,s))}},l.axis,aN),i=am(t.add(ED({scale:t.scaleRef(e.scale),extra:t.property(ev("tickExtra",e,s)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push(function(e,t,n,r){var i,a,o,u,s,l,c,f,d,h=e.orient,p=e.gridScale,x="left"===h||"top"===h?1:-1,g=x*e.offset||0,m={value:0};return Ym(i={enter:a={opacity:m},update:u={opacity:{value:1}},exit:o={opacity:m}},"stroke",ev("gridColor",e,t)),Ym(i,"strokeDash",ev("gridDash",e,t)),Ym(i,"strokeOpacity",ev("gridOpacity",e,t)),Ym(i,"strokeWidth",ev("gridWidth",e,t)),s={scale:e.scale,field:"value",band:ev("bandPosition",e,t),round:ev("tickRound",e,t),extra:ev("tickExtra",e,t),offset:ev("tickOffset",e,t)},"top"===h||"bottom"===h?(l="x",c="y",d="height"):(l="y",c="x",d="width"),f=c+"2",u[l]=a[l]=o[l]=s,p?(a[c]={scale:p,range:0,mult:x,offset:g},u[f]=a[f]={scale:p,range:1,mult:x,offset:g}):(a[c]={value:g},u[f]=a[f]={signal:d,mult:x,offset:g}),Qm("rule","axis-grid",null,"value",r,i,n)}(e,s,l.grid,i)),n.ticks&&(a=ev("tickSize",e,s),u.push(function(e,t,n,r,i){var a,o,u,s,l,c,f=e.orient,d="left"===f||"top"===f?-1:1,h={value:0};return Ym(a={enter:o={opacity:h},update:s={opacity:{value:1}},exit:u={opacity:h}},"stroke",ev("tickColor",e,t)),Ym(a,"strokeOpacity",ev("tickOpacity",e,t)),Ym(a,"strokeWidth",ev("tickWidth",e,t)),(l=$m(i)).mult=d,c={scale:e.scale,field:"value",band:ev("bandPosition",e,t),round:ev("tickRound",e,t),extra:ev("tickExtra",e,t),offset:ev("tickOffset",e,t)},"top"===f||"bottom"===f?(s.y=o.y=h,s.y2=o.y2=l,s.x=o.x=u.x=c):(s.x=o.x=h,s.x2=o.x2=l,s.y=o.y=u.y=c),Qm("rule","axis-tick",null,"value",r,a,n)}(e,s,l.ticks,i,a))),n.labels&&(a=n.ticks?a:0,u.push(function(e,t,n,r,i){var a,o,u,s,l,c,f,d,h,p=e.orient,x="left"===p||"top"===p?-1:1,g="top"===p||"bottom"===p,m=e.scale,v=dm(ev("labelFlush",e,t)),_=dm(ev("labelFlushOffset",e,t)),y=0===v||!!v,b=ev("labelAlign",e,t),w=ev("labelBaseline",e,t),S={value:0};return(u=$m(i)).mult=x,u.offset=$m(ev("labelPadding",e,t)||0),u.offset.mult=x,s={scale:m,field:"value",band:.5,offset:ev("tickOffset",e,t)},g?(l=b||(y?Gv(m,v,'"left"','"right"','"center"'):"center"),c=w||("top"===p?"bottom":"top"),f=!b):(l=b||("right"===p?"left":"right"),c=w||(y?Gv(m,v,'"top"','"bottom"','"middle"'):"middle"),f=!w),f=f&&y&&_?Gv(m,v,"-"+_,_,0):null,Ym(a={enter:o={opacity:S,x:g?s:u,y:g?u:s},update:{opacity:{value:1},text:{field:"label"},x:o.x,y:o.y},exit:{opacity:S,x:o.x,y:o.y}},g?"dx":"dy",f),Ym(a,"align",l),Ym(a,"baseline",c),Ym(a,"angle",ev("labelAngle",e,t)),Ym(a,"fill",ev("labelColor",e,t)),Ym(a,"font",ev("labelFont",e,t)),Ym(a,"fontSize",ev("labelFontSize",e,t)),Ym(a,"fontWeight",ev("labelFontWeight",e,t)),Ym(a,"limit",ev("labelLimit",e,t)),Ym(a,"fillOpacity",ev("labelOpacity",e,t)),d=ev("labelBound",e,t),h=ev("labelOverlap",e,t),e=Qm("text","axis-label","guide-label","value",r,a,n),(h||d)&&(e.overlap={method:h,order:"datum.index",bound:d?{scale:m,orient:p,tolerance:d}:null}),e}(e,s,l.labels,i,a))),n.domain&&u.push(function(e,t,n,r){var i,a,o,u,s,l,c=e.orient,f={value:0};return Ym(i={enter:a={opacity:f},update:o={opacity:{value:1}},exit:{opacity:f}},"stroke",ev("domainColor",e,t)),Ym(i,"strokeWidth",ev("domainWidth",e,t)),Ym(i,"strokeOpacity",ev("domainOpacity",e,t)),"top"===c||"bottom"===c?(u="x",l="y"):(u="y",l="x"),s=u+"2",a[l]=f,o[u]=a[u]=Rv(e,0),o[s]=a[s]=Rv(e,1),Qm("rule","axis-domain",null,null,r,i,n)}(e,s,l.domain,r)),n.title&&u.push(function(e,t,n,r){var i,a,o,u,s=e.orient,l="left"===s||"top"===s?-1:1,c="top"===s||"bottom"===s,f={value:0};return i={enter:a={opacity:f},update:o={opacity:{value:1},text:$m(e.title)},exit:{opacity:f}},u={scale:e.scale,range:.5},c?(o.x=u,a.angle={value:0},a.baseline={value:"top"===s?"bottom":"top"}):(o.y=u,a.angle={value:90*l},a.baseline={value:"bottom"}),Ym(i,"align",ev("titleAlign",e,t)),Ym(i,"angle",ev("titleAngle",e,t)),Ym(i,"baseline",ev("titleBaseline",e,t)),Ym(i,"fill",ev("titleColor",e,t)),Ym(i,"font",ev("titleFont",e,t)),Ym(i,"fontSize",ev("titleFontSize",e,t)),Ym(i,"fontWeight",ev("titleFontWeight",e,t)),Ym(i,"limit",ev("titleLimit",e,t)),Ym(i,"fillOpacity",ev("titleOpacity",e,t)),Ym(i,"x",ev("titleX",e,t),"update")||!c||Km("x",n)||(i.enter.auto={value:!0}),Ym(i,"y",ev("titleY",e,t),"update")||c||Km("y",n)||(i.enter.auto={value:!0}),Qm("text","axis-title","guide-title",null,r,i,n)}(e,s,l.title,r)),o=lv("axis",h,f,r,d,c,u),e.zindex&&(o.zindex=e.zindex),Fv(o,t)}function Wv(e,t,n){var r=Z(e.signals),i=Z(e.scales);return n||r.forEach((function(e){Px(e,t)})),Z(e.projections).forEach((function(e){!function(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=Im(e[r],r,t));t.addProjection(e.name,n)}(e,t)})),i.forEach((function(e){!function(e,t){var n=e.type||"linear";eN.hasOwnProperty(n)||D("Unrecognized scale type: "+M(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t)})),Z(e.data).forEach((function(e){Pv(e,t)})),i.forEach((function(e){Am(e,t)})),r.forEach((function(e){!function(e,t){var n=t.getSignal(e.name),r=e.update;e.init&&(r?D("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=tm(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((function(e){bm(e,t,n.id)}))}(e,t)})),Z(e.axes).forEach((function(e){jv(e,t)})),Z(e.marks).forEach((function(e){Fv(e,t)})),Z(e.legends).forEach((function(e){Ov(e,t)})),e.title&&Lv(e.title,t),t.parseLambdas(),t}function Bv(e,t){var n,r,i,a,o,u=t.config;return t.background=e.background||u.background,t.eventConfig=u.events,o=am(t.root=t.add(im())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",function(e,t){return F(e=e||t.padding)?{top:Mx(e.top),bottom:Mx(e.bottom),left:Mx(e.left),right:Mx(e.right)}:function(e){return{top:e,bottom:e,left:e,right:e}}(Mx(e))}(e.padding,u)),t.addSignal("autosize",function(e,t){return F(e=e||t.autosize)?e:{type:e=e||"pad"}}(e.autosize,u)),Z(e.signals).forEach((function(e){dN[e.name]||Px(e,t)})),r=t.add(TD()),i=Xm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(ND(Zm(i,"group","frame",e.style,t,{pulse:am(r)}))),a=t.add(ZD({layout:t.objectProperty(e.layout),legendMargin:u.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:am(i)})),t.operators.pop(),t.pushState(am(i),am(a),null),Wv(e,t,!0),t.operators.push(a),n=t.add(AD({mark:o,pulse:am(a)})),n=t.add(HD({pulse:am(n)})),n=t.add(YD({pulse:am(n)})),t.addData("root",new Ev(t,r,r,n)),t}function Uv(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Vv(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function qv(e){return(v_(e)?Hv:$v)(e)}function Hv(e){for(var t,n="[",r=0,i=e.length;r<i;++r)n+=(0<r?",":"")+(F(t=e[r])?t.signal||qv(t):M(t));return n+"]"}function $v(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(1<++i?",":"")+M(t)+":"+(F(n)?n.signal||qv(n):M(n));return r+"}"}function Yv(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function Xv(e,t){return Yv(["event"],e,t)}function Zv(e,t){return Yv(["item","_"],e,t)}function Jv(e,t,n){var r,i;for(r in n=n||{},e)i=e[r],n[r]=v_(i)?i.map((function(e){return Kv(e,t,n)})):Kv(i,t,n);return n}function Kv(e,t,n){if(!e||!F(e))return e;for(var r,i=0,a=pN.length;i<a;++i)if(r=pN[i],e.hasOwnProperty(r.key))return r.parse(e,t,n);return e}function Qv(e){return(e+"").toLowerCase()}function e_(e,t){!function(e){return"operator"===Qv(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?function(e,t){return Yv(["_"],e,t)}(e.update,t):null)}function t_(e,t){var n,r,i=F(i=e.source)?i.$ref:i,a=t.get(i),o=e.update;a||D("Source not defined: "+e.source),n=e.target&&e.target.$expr?Xv(e.target.$expr,t):t.get(e.target),o&&o.$expr&&(o.$params&&(r=Jv(o.$params,t)),o=function(e,t){return Yv(["_","event"],e,t)}(o.$expr,t)),t.update(e,a,n,o,r)}function n_(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach((function(e){e_(e,t)})),n.forEach((function(e){!function(e,t){if(e.params){var n=t.get(e.id);n||D("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(Jv(e.params,t),e.react,e.initonly))}}(e,t)})),(e.streams||[]).forEach((function(e){!function(e,t){var n,r=null==e.filter?void 0:Xv(e.filter,t),i=null==e.stream?void 0:t.get(e.stream);e.source?i=t.events(e.source,e.type,r):e.merge&&(i=(n=e.merge.map(t.get.bind(t)))[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&D("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}(e,t)})),(e.updates||[]).forEach((function(e){t_(e,t)})),t.resolve()}function r_(e,t,n){return new i_(e,t,n)}function i_(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function a_(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function o_(e,t){var n=e.autosize(),r=e.padding();return t-(n&&"padding"===n.contains?r.left+r.right:0)}function u_(e,t){var n=e.autosize(),r=e.padding();return t-(n&&"padding"===n.contains?r.top+r.bottom:0)}function s_(e,t){return t.modified&&v_(t.input.value)&&e.indexOf("_:vega:_")}function l_(e,t){return!("parent"===e||t instanceof Ey.proxy)}function c_(e,t,n,r){var i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":v_(e)?f_(e):F(e)&&!oe(e)?function(e){return Object.keys(e).map((function(t){var n=e[t];return t+": "+(v_(n)?f_(n):d_(n))})).join("\n")}(e):e+""}(r))}function f_(e){return"["+e.map(d_).join(", ")+"]"}function d_(e){return v_(e)?"[…]":F(e)&&!oe(e)?"{…}":e}function h_(e,t){var n=this;t=t||{},On.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||Pw.Canvas,n._scenegraph=new ho;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||c_,n._redraw=!0,n._handler=(new ko).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i=function(e,t,n){return n_(t,r_(e,Ey,n||dD))}(n,e,t.functions);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((function(e){return{state:null,param:te({},e)}})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._background=i.background||null,n._eventConfig=function(e){var t=(e=te({},e)).defaults;return t&&(v_(t.prevent)&&(t.prevent=me(t.prevent)),v_(t.allow)&&(t.allow=me(t.allow))),e}(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=o_(n,n._width),n._viewHeight=u_(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n.width,i=n.height,a=n.padding;e._resizeWidth=e.add(null,(function(n){e._width=n.size,e._viewWidth=o_(e,n.size),t()}),{size:r}),e._resizeHeight=e.add(null,(function(n){e._height=n.size,e._viewHeight=u_(e,n.size),t()}),{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}(n),fx(n)}function p_(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:D("Unrecognized signal name: "+M(t))}function x_(e,t){var n=(e._targets||[]).filter((function(e){var n=e._update;return n&&n.handler===t}));return n.length?n[0]:null}function g_(e,t,n,r){var i=x_(n,r);return i||((i=Nx(this,(function(){r(t,n.value)}))).handler=r,e.on(n,null,i)),e}function m_(e,t,n){var r=x_(t,n);return r&&t._targets.remove(r),e}var v_=Array.isArray,__=[],y_=L("id"),b_=A((function(e){return e}),__,"identity"),w_=A((function(){return 0}),__,"zero"),S_=A((function(){return 1}),__,"one"),k_=A((function(){return!0}),__,"true"),E_=A((function(){return!1}),__,"false"),A_={},T_=Symbol("vega_id"),C_=1,D_=Ne.prototype;D_.set=function(e,t,n,r){var i=this,a=i[e],o=i["_:mod:_"];return null!=t&&0<=t?(a[t]!==n||r)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||r)&&(i[e]=n,o[e]=v_(n)?1+n.length:-1),i},D_.modified=function(e,t){var n,r=this["_:mod:_"];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(v_(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&0<=t?t+1<r[e]||!!r[t+":"+e]:!!r[e]},D_.clear=function(){return this["_:mod:_"]={},this};var N_=0,F_=new Ne,O_=Fe.prototype;O_.targets=function(){return this._targets||(this._targets=ye(y_))},O_.set=function(e){return this.value===e?0:(this.value=e,1)},O_.skip=Oe(1),O_.modified=Oe(2),O_.parameters=function(e,t,n){function r(e,n,r){r instanceof Fe?(r!==s&&(t&&r.targets().add(s),f.push(r)),c.push({op:r,name:e,index:n})):l.set(e,n,r)}t=!1!==t;var i,a,o,u,s=this,l=s._argval=s._argval||new Ne,c=s._argops=s._argops||[],f=[];for(i in e)if(a=e[i],"pulse"===i)Z(a).forEach((function(e){e instanceof Fe?e!==s&&(e.targets().add(s),f.push(e)):D("Pulse parameters must be operator instances.")})),s.source=a;else if(v_(a))for(l.set(i,-1,Array(o=a.length)),u=0;u<o;++u)r(i,u,a[u]);else r(i,-1,a);return this.marshall().clear(),n&&(c.initonly=!0),f},O_.marshall=function(e){var t,n,r,i,a,o=this._argval||F_,u=this._argops;if(u){for(n=0,r=u.length;n<r;++n)a=(i=(t=u[n]).op).modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);if(u.initonly){for(n=0;n<r;++n)(t=u[n]).op.targets().remove(this);this._argops=null,this._update=null}}return o},O_.evaluate=function(e){var t=this._update;if(t){var n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},O_.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t||e);var t};var M_=0,L_=Me.prototype;L_._filter=k_,L_._apply=b_,L_.targets=function(){return this._targets||(this._targets=ye(y_))},L_.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},L_.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},L_.filter=function(e){var t=Le(e);return this.targets().add(t),t},L_.apply=function(e){var t=Le(null,e);return this.targets().add(t),t},L_.merge=function(){var e=Le();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},L_.throttle=function(e){var t=-1;return this.filter((function(){var n=Date.now();return n-t>e?(t=n,1):0}))},L_.debounce=function(e){var t=Le();return this.targets().add(Le(null,null,ee(e,(function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},L_.between=function(e,t){var n=!1;return e.targets().add(Le(null,null,(function(){n=!0}))),t.targets().add(Le(null,null,(function(){n=!1}))),this.filter((function(){return n}))};var P_=/^([A-Za-z]+:)?\/\//,z_={boolean:he,integer:R,number:R,date:xe,string:ge,unknown:b_},I_=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return qe(e)&&(e=+e)==~~e},qe,function(e){return!isNaN(Date.parse(e))}],R_=["boolean","integer","number","date"],G_={},j_={},W_=($e(","),$e("\t"),{dsv:Xe,csv:Ye(","),tsv:Ye("\t"),json:Ze,topojson:function(e,t){var n,r,i;return e=Ze(e,t),n=t&&(i=t.feature)?Ke:t&&(i=t.mesh)?nt:D("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r):D("Invalid TopoJSON object: "+i))&&r.features||[r]}}),B_=new Date,U_=new Date,V_=ot((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));V_.every=function(e){return e=_(e),isFinite(e)&&0<e?1<e?ot((function(t){t.setTime(_(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):V_:null},V_.range;var q_=ot((function(e){e.setTime(1e3*_(e/1e3))}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()})),H_=(q_.range,ot((function(e){e.setTime(6e4*_(e/6e4))}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()}))),$_=(H_.range,ot((function(e){var t=6e4*e.getTimezoneOffset()%36e5;0>t&&(t+=36e5),e.setTime(36e5*_((+e-t)/36e5)+t)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()}))),Y_=($_.range,ot((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1}))),X_=(Y_.range,ut(0)),Z_=ut(1),J_=(ut(2),ut(3),ut(4)),K_=(ut(5),ut(6),X_.range,Z_.range,J_.range,ot((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),Q_=(K_.range,ot((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Q_.every=function(e){return isFinite(e=_(e))&&0<e?ot((function(t){t.setFullYear(_(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null},Q_.range;var ey=ot((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getUTCMinutes()})),ty=(ey.range,ot((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()}))),ny=(ty.range,ot((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1}))),ry=(ny.range,st(0)),iy=st(1),ay=(st(2),st(3),st(4)),oy=(st(5),st(6),ry.range,iy.range,ay.range,ot((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),uy=(oy.range,ot((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));uy.every=function(e){return isFinite(e=_(e))&&0<e?ot((function(t){t.setUTCFullYear(_(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null},uy.range;var sy,ly,cy,fy,dy,hy={"-":"",_:" ",0:"0"},py=/^\s*\d+/,xy=/^%/,gy=/[\\^$*+?|[\]().{}]/g;_n({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||fy("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||dy("%Y-%m-%dT%H:%M:%S.%LZ");var my={skip:!0},vy={},_y=Sn.prototype;_y.StopPropagation=vy,_y.ADD=1,_y.REM=2,_y.MOD=4,_y.ADD_REM=3,_y.ADD_MOD=5,_y.ALL=7,_y.REFLOW=8,_y.SOURCE=16,_y.NO_SOURCE=32,_y.NO_FIELDS=64,_y.fork=function(e){return new Sn(this.dataflow).init(this,e)},_y.clone=function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},_y.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?((e=new Sn(this.dataflow).init(this)).add=e.source,e):e},_y.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(64&t)&&(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},_y.runAfter=function(e){this.dataflow.runAfter(e)},_y.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},_y.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,An(this,1))),this},_y.modifies=function(e){var t=Z(e),n=this.fields||(this.fields={});return t.forEach((function(e){n[e]=!0})),this},_y.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?v_(e)?e.some((function(e){return t[e]})):t[e]:!!t)},_y.filter=function(e,t){var n=this;return 1&e&&(n.addF=kn(n.addF,t)),2&e&&(n.remF=kn(n.remF,t)),4&e&&(n.modF=kn(n.modF,t)),16&e&&(n.srcF=kn(n.srcF,t)),n},_y.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=En(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=En(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=En(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},_y.visit=function(e,t){var n,r,i=this,a=t;return 16&e?(_e(i.source,i.srcF,a),i):(1&e&&_e(i.add,i.addF,a),2&e&&_e(i.rem,i.remF,a),4&e&&_e(i.mod,i.modF,a),8&e&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||_e(n,r?An(i,5):i.srcF,a)),i)};var yy=ie(Tn,Sn);yy.fork=function(e){var t=new Sn(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(function(e){return t.add.push(e)})),e&t.REM&&this.visit(t.REM,(function(e){return t.rem.push(e)})),e&t.MOD&&this.visit(t.MOD,(function(e){return t.mod.push(e)}))),t},yy.changed=function(e){return this.changes&e},yy.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?v_(e)?e.some((function(e){return n[e]})):n[e]:0},yy.filter=function(){D("MultiPulse does not support filtering.")},yy.materialize=function(){D("MultiPulse does not support materialization.")},yy.visit=function(e,t){var n=this,r=n.pulses,i=r.length,a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n};var by={skip:!1,force:!1},wy=Dn.prototype;wy.size=function(){return this.nodes.length},wy.clear=function(){return this.nodes=[],this},wy.peek=function(){return this.nodes[0]},wy.push=function(e){var t=this.nodes;return t.push(e),Nn(t,0,t.length-1,this.cmp)},wy.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,Fn(t,0,this.cmp)):e=n,e},wy.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,Fn(t,0,this.cmp),n},wy.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&0>this.cmp(n,e)&&(t[0]=e,e=n,Fn(t,0,this.cmp)),e};var Sy=On.prototype;Sy.stamp=function(){return this._clock},Sy.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},Sy.cleanThreshold=1e4,Sy.add=function(e,t,n,r){var i,a=1;return e instanceof Fe?i=e:e&&e.prototype instanceof Fe?i=new e:J(e)?i=new Fe(null,e):(a=0,i=new Fe(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},Sy.connect=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)},Sy.rank=function(e){e.rank=++this._rank},Sy.rerank=function(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;0<=--r;)i.push(t=n[r]),t===e&&D("Cycle detected in dataflow graph.")},Sy.pulse=function(e,t,n){this.touch(e,n||by);var r=new Sn(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this},Sy.touch=function(e,t){return this._pulse?this._enqueue(e):this._touched.add(e),(t||by).skip&&e.skip(!0),this},Sy.update=function(e,t,n){var r=n||by;return(e.set(t)||r.force)&&this.touch(e,r),this},Sy.changeset=De,Sy.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(yn(t,n)))},Sy.request=function(e,t,n){var r=this,i=0,a=r._pending||function(e){var t,n,r=new Promise((function(r,i){t=function(){r(e)},n=i}));return r.requests=0,r.done=function(){0==--r.requests&&e.runAfter((function(){e._pending=null;try{e.run(),e._pending?e._pending.then(t):t()}catch(e){n(e)}}))},e._pending=r}(r);return a.requests+=1,r.loader().load(t,{context:"dataflow"}).then((function(e){return yn(e,n)}),(function(e){i=-1,r.error("Loading failed",t,e)})).catch((function(e){i=-2,r.error("Data ingestion failed",t,e)})).then((function(t){return r.pulse(e,r.changeset().remove(k_).insert(t||[])),a.done(),i}))},Sy.events=function(e,t,n,r){for(var i,a=this,o=Le(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(e){a.error(e)}finally{a.run()}},s=0,l=(i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):Z(e)).length;s<l;++s)i[s].addEventListener(t,u);return o},Sy.on=function(e,t,n,r,i){return(e instanceof Fe?wn:bn)(this,e,t,n,r,i),this},Sy.run=function(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new Sn(a,++a._clock,e),3<=u&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach((function(e){a._enqueue(e,!0)})),a._touched=ye(y_);try{for(;0<a._heap.size();)(t=a._heap.pop()).rank===t.qrank?(n=t.run(a._getPulse(t,e)),4<=u&&a.debug(t.id,n===vy?"STOP":n,t),n!==vy&&(a._pulse=n,t._targets&&t._targets.forEach((function(e){a._enqueue(e)}))),++o):a._enqueue(t,!0)}catch(e){i=e}if(a._pulses={},a._pulse=null,3<=u&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(e){a.error(e)}if(a._postrun.length){var s=a._postrun;a._postrun=[],s.sort((function(e,t){return t.priority-e.priority})).forEach((function(e){Cn(a,e.callback)}))}return this},Sy.runAsync=function(){return this._pending||this.run()&&this._pending||Promise.resolve(this)},Sy.runAfter=function(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):Cn(this,e)},Sy._enqueue=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},Sy._getPulse=function(e,t){var n,r=e.source,i=this._clock;return r&&v_(r)?new Tn(this,i,n=r.map((function(e){return e.pulse})),t):(n=this._pulses[e.id],r&&((r=r.pulse)&&r!==vy?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)},Sy.error=Mn("error"),Sy.warn=Mn("warn"),Sy.info=Mn("info"),Sy.debug=Mn("debug"),Sy.logLevel=Mn("level");var ky=ie(Ln,Fe);ky.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e)!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t);var t},ky.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},ky.transform=function(){};var Ey={},Ay={values:jn({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:jn({name:"count",set:"cell.num"}),__count__:jn({name:"count",set:"this.missing + this.valid"}),missing:jn({name:"missing",set:"this.missing"}),valid:jn({name:"valid",set:"this.valid"}),sum:jn({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),mean:jn({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:jn({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:jn({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:jn({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:jn({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:jn({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:jn({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:jn({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:jn({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:jn({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:jn({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:jn({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:jn({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:jn({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:jn({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:jn({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:jn({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Ty=Object.keys(Ay);e.random=Math.random;var Cy=$n(Hn),Dy=Cy.right,Ny=Cy.left,Fy=x(50),Oy=x(10),My=x(2),Ly=ur.prototype;Ly.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ly.add=function(e){this._add.push(e)},Ly.rem=function(e){this._rem.push(e)},Ly.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),l={};for(e=0;e<u;++e)l[a(i[e])]=1;for(e=0,t=0;e<o;++e)l[a(n=r[e])]?l[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},Ly.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;0<=--r;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},Ly.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=ne(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Ly.argmin=function(e){return this.extent(e)[0]||{}},Ly.argmax=function(e){return this.extent(e)[1]||{}},Ly.min=function(e){var t=this.extent(e)[0];return null==t?void 0:e(t)},Ly.max=function(e){var t=this.extent(e)[1];return null==t?void 0:e(t)},Ly.quartile=function(e){return this._get===e&&this._q||(this._q=tr(this.values(),e),this._get=e),this._q},Ly.q1=function(e){return this.quartile(e)[0]},Ly.q2=function(e){return this.quartile(e)[1]},Ly.q3=function(e){return this.quartile(e)[2]},Ly.ci=function(e){return this._get===e&&this._ci||(this._ci=er(this.values(),1e3,.05,e),this._get=e),this._ci},Ly.ci0=function(e){return this.ci(e)[0]},Ly.ci1=function(e){return this.ci(e)[1]},sr.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ty},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Py=ie(sr,Ln);Py.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,(function(e){r.add(e)}))):(this.value=this.value||this.init(e),t.visit(t.REM,(function(e){r.rem(e)})),t.visit(t.ADD,(function(e){r.add(e)}))),i.modifies(this._outputs),r._drop=!1!==e.drop,e.cross&&1<r._dims.length&&(r._drop=!1,this.cross()),r.changes(i)},Py.cross=function(){function e(e){var t,n,o,u;for(t in e)for(o=e[t].tuple,n=0;n<a;++n)i[n][u=o[r[n]]]=u}var t=this,n=t.value,r=t._dnames,i=r.map((function(){return{}})),a=r.length;e(t._prev),e(n),function e(o,u,s){var l,c,f=r[s],d=i[s++];for(l in d)u[f]=d[l],c=o?o+"|"+l:l,s<a?e(c,u,s):!n[c]&&t.cell(c,u)}("",{},0)},Py.init=function(e){function t(e){for(var t,r=Z(C(e)),a=0,o=r.length;a<o;++a)i[t=r[a]]||(i[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],i={};this._dims=Z(e.groupby),this._dnames=this._dims.map((function(e){var n=T(e);return t(e),r.push(n),n})),this.cellkey=e.key?e.key:In(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,s,l,c,f=e.fields||[null],d=e.ops||["count"],h=e.as||[],p=f.length,x={};for(p!==d.length&&D("Unmatched number of fields and aggregate ops."),c=0;c<p;++c)a=f[c],o=d[c],null==a&&"count"!==o&&D("Null aggregate field specified."),l=Rn(o,s=T(a),h[c]),r.push(l),"count"!==o?((u=x[s])||(t(a),(u=x[s]=[]).field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(Gn(o,l))):this._counts.push(l);return this._measures=this._measures.map((function(e){return Bn(e,e.field)})),{}},Py.cellkey=In(),Py.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},Py.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new ur),n},Py.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?Te(t.tuple,o):ke(o)},Py.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},Py.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},Py.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},Py.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,l=e.add,c=e.rem,f=e.mod;if(u)for(n in u)t=u[n],(!s||t.num)&&c.push(t.tuple);for(r=0,i=this._alen;r<i;++r)l.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=o[r]).num&&s?c:f).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},lr.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var zy=ie(lr,Ln);zy.transform=function(e,t){var n,r=this._bins(e),i=r.start,a=r.step,o=e.as||["bin0","bin1"],u=o[0],s=o[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(C(e.field))?t.ADD_MOD:t.ADD,t.visit(n,(function(e){var t=r(e);e[u]=t,e[s]=null==t?null:i+a*(1+(t-i)/a)})),t.modifies(o)},zy._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,i=Un(e),a=i.start,o=i.stop,u=i.step;null!=(t=e.anchor)&&(n=t-(a+u*_((t-a)/u)),a+=n,o+=n);var s=function(e){var t=r(e);return null==t?null:(t=y(a,p(+t,o-u)),a+u*_((t-a)/u))};return s.start=a,s.stop=o,s.step=u,this.value=A(s,C(r),e.name||"bin_"+T(r))},fr.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},ie(fr,Ln).transform=function(e,t){var n=t.fork(t.ALL),r=cr(we,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},ie(dr,Fe),pr.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Iy=ie(pr,Ln);Iy.transform=function(e,t){function n(t){return function(n){for(var r,i=function(e,t,n){return"upper"===t?e=e.toUpperCase():"lower"===t&&(e=e.toLowerCase()),e.match(n)}(u(n),e.case,a)||[],s=0,l=i.length;s<l;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],l=n((function(e){i[e]=1+(i[e]||0)})),c=n((function(e){i[e]-=1}));return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,s)},Iy._parameterCheck=function(e,t){var n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Iy._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],l=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=ke({}),r[u]=n,r[s]=i,l.add.push(r)):0===i?(r&&l.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,l.mod.push(r));return l.modifies(t)},xr.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},ie(xr,Ln).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1];return!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,a,o=[],u={},s=e.length,l=0;l<s;++l)for(u[t]=a=e[l],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(ke(u)),(u={})[t]=a);return o}(r,a,o,e.filter||k_)):n.mod=r,n.source=this.value,n.modifies(i)};var Ry={kde:rr,mixture:ar,normal:nr,uniform:or},Gy=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];gr.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Gy.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Gy},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},ie(gr,Ln).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=function e(t,n){var r=t.function;Ry.hasOwnProperty(r)||D("Unknown distribution function: "+r);var i=Ry[r]();for(var a in t)"field"===a?i.data((t.from||n()).map(t[a])):"distributions"===a?i[a](t[a].map((function(t){return e(t,n)}))):"function"==typeof i[a]&&i[a](t[a]);return i}(e.distribution,function(e){return function(){return e.materialize(e.SOURCE).source}}(t)),i=e.method||"pdf";"pdf"!==i&&"cdf"!==i&&D("Invalid density method: "+i),e.extent||r.data||D("Missing density extent parameter."),i=r[i];var a=e.as||["value","density"],o=e.extent||Yn(r.data()),u=(o[1]-o[0])/(e.steps||100),s=Xn(o[0],o[1]+u/2,u).map((function(e){var t={};return t[a[0]]=e,t[a[1]]=i(e),ke(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n},ie(mr,Fe),_r.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},ie(_r,Ln).transform=function(e,t){var n,r=this.value,i=e.field,a=r[0],o=r[1];((n=t.changed()||t.modified(i.fields)||e.modified("field"))||null==a)&&(a=1/0,o=-1/0),t.visit(n?t.SOURCE:t.ADD,(function(e){var t=i(e);null!=t&&((t=+t)<a&&(a=t),t>o&&(o=t))})),isFinite(a)&&isFinite(o)||(a=o=void 0),this.value=[a,o]};var jy=ie(yr,Fe);jy.connect=function(e){return this.targets().add(e),e.source=this},jy.add=function(e){this.value.add.push(e)},jy.rem=function(e){this.value.rem.push(e)},jy.mod=function(e){this.value.mod.push(e)},jy.init=function(e){this.value.init(e,e.NO_SOURCE)},jy.evaluate=function(){return this.value};var Wy=ie(br,Ln);Wy.activate=function(e){this._targets[this._targets.active++]=e},Wy.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,u=(i=n.dataflow).add(new yr(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},Wy.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,(function(e){var t=we(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))})),t.visit(t.ADD,(function(e){var t=a(e);u.set(we(e),t),n(t).add(e)})),s||t.modified(a.fields)?t.visit(t.MOD,(function(e){var t=we(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(function(e){n(u.get(we(e))).mod(e)})),s&&t.visit(t.REFLOW,(function(e){var t=we(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))})),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},ie(wr,Fe),kr.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},ie(kr,Ln).transform=function(e,t){function n(t){var n=we(t),r=l(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?c&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,l=e.expr,c=!0;return t.visit(t.REM,(function(e){var t=we(e);i.has(t)?i.delete(t):u.push(e)})),t.visit(t.ADD,(function(t){l(t,e)?o.push(t):i.set(we(t),1)})),t.visit(t.MOD,n),e.modified()&&(c=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},Ar.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},ie(Ar,Ln).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=Er(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,o,u,s=r.map((function(t){return t(e)})),l=s.reduce((function(e,t){return y(e,t.length)}),0),c=0;c<l;++c){for(o=Ee(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][c])?null:u;n.add.push(o)}})),this.value=n.source=n.add,n.modifies(i)},Tr.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},ie(Tr,Ln).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(T),a=e.as||["key","value"],o=a[0],u=a[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,a=0;a<s;++a)(t=Ee(e))[o]=i[a],t[u]=r[a](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(a)},Cr.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},ie(Cr,Ln).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,(function(t){t[r]=n(t,e)}))},ie(Dr,Ln).transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(0<u){for(n=[];0<=--u;)n.push(i=ke(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var By={value:"value",median:function(e,t){if((e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,t))).length){const t=e.length,n=t>>1;return Kn(e,n-1,0),0==(1&t)&&Kn(e,n,n),Jn(e,.5)}},mean:function(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let a of e)null!=(a=t(a,++i,e))&&(a=+a)>=a&&(++n,r+=a)}return n?r/n:void 0},min:function(e,t){let n;if(void 0===t)for(let t of e)null!=t&&t>=t&&(void 0===n||n>t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&i>=i&&(void 0===n||n>i)&&(n=i)}return n},max:function(e,t){let n;if(void 0===t)for(let t of e)null!=t&&t>=t&&(void 0===n||n<t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&i>=i&&(void 0===n||n<i)&&(n=i)}return n}},Uy=[];Nr.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},ie(Nr,Ln).transform=function(e,t){var n,r,i,a,o,u,s,l,c,f,d=t.fork(t.ALL),h=Fr(e),p=function(e){var t=e.field;return function(e){return e?t(e):NaN}}(e),x=T(e.field),g=T(e.key),m=(e.groupby||[]).map(T),v=function(e,t,n,r){var i,a,o,u,s,l,c,f,d=function(e){return e(f)},h=[],p=r?r.slice():[],x={},g={};for(p.forEach((function(e,t){x[e]=t+1})),u=0,c=e.length;u<c;++u)l=n(f=e[u]),s=x[l]||(x[l]=p.push(l)),(o=g[a=(i=t?t.map(d):Uy)+""])||(o=g[a]=[],h.push(o),o.values=i),o[s-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),_=[],y=this.value,b=v.domain.length;for(o=0,l=v.length;o<l;++o)for(i=(n=v[o]).values,r=NaN,s=0;s<b;++s)if(null==n[s]){for(a=v.domain[s],f={_impute:!0},u=0,c=i.length;u<c;++u)f[m[u]]=i[u];f[g]=a,f[x]=isNaN(r)?r=h(n,p):r,_.push(ke(f))}return _.length&&(d.add=d.materialize(d.ADD).add.concat(_)),y.length&&(d.rem=d.materialize(d.REM).rem.concat(y)),this.value=_,d},Or.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Ty},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Vy=ie(Or,sr);Vy.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,(function(e){r.add(e)}))):(n=r.value=r.value||this.init(e),t.visit(t.REM,(function(e){r.rem(e)})),t.visit(t.ADD,(function(e){r.add(e)}))),r.changes(),t.visit(t.SOURCE,(function(e){te(e,n[r.cellkey(e)].tuple)})),t.reflow(i).modifies(this._outputs)},Vy.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},ie(Mr,Fe),ie(Pr,Ln).transform=function(e,t){t.dataflow.request(this.target,e.url,e.format)},zr.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},ie(zr,Ln).transform=function(e,t){var n,r,i=t,a=e.as,o=e.fields,u=e.index,s=e.values,l=null==e.default?null:e.default,c=e.modified(),f=c?t.SOURCE:t.ADD,d=o.length;return s?(r=s.length,1<d&&!a&&D('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*r&&D('The "as" parameter has too few output field names.'),a=a||s.map(T),n=function(e){for(var t,n,i=0,c=0;i<d;++i)if(null==(n=u.get(o[i](e))))for(t=0;t<r;++t,++c)e[a[c]]=l;else for(t=0;t<r;++t,++c)e[a[c]]=s[t](n)}):(!a&&D("Missing output field names."),n=function(e){for(var t,n=0;n<d;++n)t=u.get(o[n](e)),e[a[n]]=null==t?l:t}),c?i=t.reflow(!0):f|=o.some((function(e){return t.modified(e.fields)}))?t.MOD:0,t.visit(f,n),i.modifies(a)},ie(Ir,Fe),ie(Gr,Fe),ie(Wr,Ln),Wr.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},Br.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Ty,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var qy=ie(Br,sr);qy._transform=qy.transform,qy.transform=function(e,t){return this._transform(Ur(e,t),t)},ie(qr,br).transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(C(i)))&&D("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,(function(e){var a=n.subflow(we(e),r,t,e);i?i(e).forEach((function(e){a.mod(e)})):a.mod(e)})),t.visit(t.ADD,(function(e){var a=n.subflow(we(e),r,t,e);i?i(e).forEach((function(e){a.add(ke(e))})):a.add(e)})),t.visit(t.REM,(function(e){var a=n.subflow(we(e),r,t,e);i?i(e).forEach((function(e){a.rem(e)})):a.rem(e)})),t},Hr.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},ie(Hr,Ln).transform=function(e,t){var n,r,i=e.fields,a=Er(e.fields,e.as||[]),o=i?function(e,t){return function(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,i,a)}:Ae;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=we(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=o(e,ke({}));r[we(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){n.mod.push(o(e,r[we(e)]))})),n},ie($r,Ln).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},ie(Yr,Ln).transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=we(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=Ee(e);r[we(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){n.mod.push(Ae(e,r[we(e)]))}))),n},Xr.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},ie(Xr,Ln).transform=function(t,n){function r(t){var n,r;u.length<o?u.push(t):(r=~~((s+1)*e.random()))<u.length&&r>=l&&(n=u[r],c[we(n)]&&i.rem.push(n),u[r]=t),++s}var i=n.fork(n.NO_SOURCE),a=t.modified("size"),o=t.size,u=this.value,s=this.count,l=0,c=u.reduce((function(e,t){return e[we(t)]=1,e}),{});if(n.rem.length&&(n.visit(n.REM,(function(e){var t=we(e);c[t]&&(c[t]=-1,i.rem.push(e)),--s})),u=u.filter((function(e){return-1!==c[we(e)]}))),(n.rem.length||a)&&u.length<o&&n.source&&(l=s=u.length,n.visit(n.SOURCE,(function(e){c[we(e)]||r(e)})),l=-1),a&&u.length>o){for(var f=0,d=u.length-o;f<d;++f)c[we(u[f])]=-1,i.rem.push(u[f]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,(function(e){c[we(e)]&&i.mod.push(e)})),n.add.length&&n.visit(n.ADD,r),(n.add.length||0>l)&&(i.add=u.filter((function(e){return!c[we(e)]}))),this.count=s,this.value=i.source=u,i},Zr.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},ie(Zr,Ln).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Xn(e.start,e.stop,e.step||1).map((function(e){var t={};return t[r]=e,ke(t)})),n.add=t.add.concat(this.value),n}},ie(Jr,Ln).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},ie(Kr,Ln).transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,(function(e){a.delete(i(e))})),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()},ie(Qr,Ln).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var Hy={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=Hy.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){0<(t=+t)||D("ntile num must be greater than zero.");var n=Hy.cume_dist(),r=n.next;return{init:n.init,next:function(e){return b(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return 0<=r?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return 0<(t=+t)||D("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},$y=Object.keys(Hy),Yy=ei.prototype;Yy.init=function(){this.windows.forEach((function(e){e.init()})),this.cell&&this.cell.init()},Yy.update=function(e,t){var n,r=this.cell,i=this.windows,a=e.data,o=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(a[n]);for(n=e.p1;n<e.i1;++n)r.add(a[n]);r.set(t)}for(n=0;n<o;++n)i[n].update(e,t)},ti.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:$y.concat(Ty)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Xy=ie(ti,Ln);Xy.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,(!o||u)&&(o=a.state=new ei(e));var s=In(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,(function(e){n(e).add(e)}))):(t.visit(t.REM,(function(e){n(e).remove(e)})),t.visit(t.ADD,(function(e){n(e).add(e)}))),r=0,i=a._mlen;r<i;++r)ni(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},Xy.group=function(e){var t=this,n=t.value[e];return n||((n=t.value[e]=cr(we)).stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var Zy=Object.freeze({aggregate:sr,bin:lr,collect:fr,compare:dr,countpattern:pr,cross:xr,density:gr,expression:mr,extent:_r,facet:br,field:wr,filter:kr,flatten:Ar,fold:Tr,formula:Cr,generate:Dr,impute:Nr,joinaggregate:Or,key:Mr,load:Pr,lookup:zr,multiextent:Ir,multivalues:Gr,params:Wr,pivot:Br,prefacet:qr,project:Hr,proxy:$r,relay:Yr,sample:Xr,sequence:Zr,sieve:Jr,subflow:yr,tupleindex:Kr,values:Qr,window:ti}),Jy=ai.prototype;Jy.clone=function(){return new ai(this)},Jy.clear=function(){return this.x1=+n,this.y1=+n,this.x2=-n,this.y2=-n,this},Jy.empty=function(){return this.x1===+n&&this.y1===+n&&this.x2===-n&&this.y2===-n},Jy.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},Jy.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},Jy.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},Jy.round=function(){return this.x1=_(this.x1),this.y1=_(this.y1),this.x2=b(this.x2),this.y2=b(this.y2),this},Jy.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},Jy.rotate=function(e,t,n){var r=s(e),i=l(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,c=this.x2,f=this.y1,d=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*d+a,i*u+r*d+o).add(r*c-i*f+a,i*c+r*f+o).add(r*c-i*d+a,i*c+r*d+o)},Jy.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},Jy.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},Jy.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},Jy.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},Jy.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},Jy.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},Jy.width=function(){return this.x2-this.x1},Jy.height=function(){return this.y2-this.y1};var Ky,Qy=0;ie(si,ui),["canvas","canvas-prebuilt"].some((function(e){try{"function"!=typeof(Ky=__webpack_require__(14)(e))&&(Ky=null)}catch(e){Ky=null}return Ky}));var eb=fi.prototype;eb.pending=function(){return this._pending},eb.sanitizeURL=function(e){var t=this;return di(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return hi(t),e})).catch((function(){return hi(t),null}))},eb.loadImage=function(e){var t=this,n=ci();return di(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){hi(t),i.loaded=!0},i.onerror=function(){hi(t),i.loaded=!1},i.src=r,i})).catch((function(e){return hi(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}}))},eb.ready=function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))};var tb=h,nb=2*tb,rb=1e-6;pi.prototype=xi.prototype={constructor:pi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,n,r,i,a){e=+e,n=+n,r=+r,i=+i,a=+a;var o=this._x1,u=this._y1,s=r-e,l=i-n,c=o-e,d=u-n,h=c*c+d*d;if(0>a)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(h>rb)if(m(d*s-l*c)>rb&&a){var p=r-o,g=i-u,v=s*s+l*l,_=x(v),y=x(h),b=a*t((tb-f((v+h-(p*p+g*g))/(2*_*y)))/2),w=b/y,S=b/_;m(w-1)>rb&&(this._+="L"+(e+w*c)+","+(n+w*d)),this._+="A"+a+","+a+",0,0,"+ +(d*p>c*g)+","+(this._x1=e+S*s)+","+(this._y1=n+S*l)}else this._+="L"+(this._x1=e)+","+(this._y1=n)},arc:function(e,t,n,r,i,a){e=+e,t=+t;var o=(n=+n)*s(r),u=n*l(r),c=e+o,f=t+u,d=1^a,h=a?r-i:i-r;if(0>n)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+f:(m(this._x1-c)>rb||m(this._y1-f)>rb)&&(this._+="L"+c+","+f),n&&(0>h&&(h=h%nb+nb),h>nb-rb?this._+="A"+n+","+n+",0,1,"+d+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=f):h>rb&&(this._+="A"+n+","+n+",0,"+ +(h>=tb)+","+d+","+(this._x1=e+n*s(i))+","+(this._y1=t+n*l(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ib=m,ab=u,ob=s,ub=y,sb=p,lb=l,cb=x,fb=1e-12,db=h,hb=db/2,pb=2*db;Ai.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var xb={draw:function(e,t){var n=x(t/db);e.moveTo(n,0),e.arc(0,0,n,0,pb)}};Li.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mi(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mi(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Pi.prototype={areaStart:Oi,areaEnd:Oi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mi(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},zi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Mi(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ii.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(0<n)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+r*o),this._beta*t[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var gb=function e(t){function n(e){return 1===t?new Li(e):new Ii(e,t)}return n.beta=function(t){return e(+t)},n}(.85);Gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ri(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ri(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var mb=function e(t){function n(e){return new Gi(e,t)}return n.tension=function(t){return e(+t)},n}(0);ji.prototype={areaStart:Oi,areaEnd:Oi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ri(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var vb=function e(t){function n(e){return new ji(e,t)}return n.tension=function(t){return e(+t)},n}(0);Wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ri(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var _b=function e(t){function n(e){return new Wi(e,t)}return n.tension=function(t){return e(+t)},n}(0);Ui.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=x(this._l23_2a=S(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Bi(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var yb=function e(t){function n(e){return t?new Ui(e,t):new Gi(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);Vi.prototype={areaStart:Oi,areaEnd:Oi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=x(this._l23_2a=S(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Bi(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var bb=function e(t){function n(e){return t?new Vi(e,t):new ji(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);qi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=x(this._l23_2a=S(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Bi(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var wb=function e(t){function n(e){return t?new qi(e,t):new Wi(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);Hi.prototype={areaStart:Oi,areaEnd:Oi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Ji.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zi(this,this._t0,Xi(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Zi(this,Xi(this,n=Yi(this,e,t)),n);break;default:Zi(this,this._t0,n=Yi(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Ki.prototype=Object.create(Ji.prototype)).point=function(e,t){Ji.prototype.point.call(this,t,e)},Qi.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=ta(e),i=ta(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Sb,kb={basis:{curve:function(e){return new Li(e)}},"basis-closed":{curve:function(e){return new Pi(e)}},"basis-open":{curve:function(e){return new zi(e)}},bundle:{curve:gb,tension:"beta",value:.85},cardinal:{curve:mb,tension:"tension",value:0},"cardinal-open":{curve:_b,tension:"tension",value:0},"cardinal-closed":{curve:vb,tension:"tension",value:0},"catmull-rom":{curve:yb,tension:"alpha",value:.5},"catmull-rom-closed":{curve:bb,tension:"alpha",value:.5},"catmull-rom-open":{curve:wb,tension:"alpha",value:.5},linear:{curve:Ti},"linear-closed":{curve:function(e){return new Hi(e)}},monotone:{horizontal:function(e){return new Ki(e)},vertical:function(e){return new Ji(e)}},natural:{curve:function(e){return new ea(e)}},step:{curve:function(e){return new na(e,.5)}},"step-after":{curve:function(e){return new na(e,1)}},"step-before":{curve:function(e){return new na(e,0)}}},Eb={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Ab=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],Tb={},Cb={},Db=[].join,Nb=["l",0,0,0,0,0,0,0],Fb=x(3)/2,Ob={circle:{draw:function(e,t){var n=x(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,2*h)}},cross:{draw:function(e,t){var n=x(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=x(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=x(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=x(t)/2,r=Fb*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=x(t)/2,r=Fb*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=x(t)/2,r=Fb*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=x(t)/2,r=Fb*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},Mb={},Lb=h,Pb=function(){function e(){var e,l,c=+t.apply(this,arguments),f=+n.apply(this,arguments),d=a.apply(this,arguments)-hb,h=o.apply(this,arguments)-hb,p=ib(h-d),x=h>d;if(s||(s=e=xi()),f<c&&(l=f,f=c,c=l),f>fb)if(p>pb-fb)s.moveTo(f*ob(d),f*lb(d)),s.arc(0,0,f,d,h,!x),c>fb&&(s.moveTo(c*ob(h),c*lb(h)),s.arc(0,0,c,h,d,x));else{var g,m,v=d,_=h,y=d,b=h,w=p,S=p,k=u.apply(this,arguments)/2,E=k>fb&&(i?+i.apply(this,arguments):cb(c*c+f*f)),A=sb(ib(f-c)/2,+r.apply(this,arguments)),T=A,C=A;if(E>fb){var D=vi(E/c*lb(k)),N=vi(E/f*lb(k));(w-=2*D)>fb?(y+=D*=x?1:-1,b-=D):(w=0,y=b=(d+h)/2),(S-=2*N)>fb?(v+=N*=x?1:-1,_-=N):(S=0,v=_=(d+h)/2)}var F=f*ob(v),O=f*lb(v),M=c*ob(b),L=c*lb(b);if(A>fb){var P=f*ob(_),z=f*lb(_),I=c*ob(y),R=c*lb(y);if(p<db){var G=w>fb?ki(F,O,I,R,P,z,M,L):[M,L],j=F-G[0],W=O-G[1],B=P-G[0],U=z-G[1],V=1/lb(mi((j*B+W*U)/(cb(j*j+W*W)*cb(B*B+U*U)))/2),q=cb(G[0]*G[0]+G[1]*G[1]);T=sb(A,(c-q)/(V-1)),C=sb(A,(f-q)/(V+1))}}S>fb?C>fb?(g=Ei(I,R,F,O,f,C,x),m=Ei(P,z,M,L,f,C,x),s.moveTo(g.cx+g.x01,g.cy+g.y01),C<A?s.arc(g.cx,g.cy,C,ab(g.y01,g.x01),ab(m.y01,m.x01),!x):(s.arc(g.cx,g.cy,C,ab(g.y01,g.x01),ab(g.y11,g.x11),!x),s.arc(0,0,f,ab(g.cy+g.y11,g.cx+g.x11),ab(m.cy+m.y11,m.cx+m.x11),!x),s.arc(m.cx,m.cy,C,ab(m.y11,m.x11),ab(m.y01,m.x01),!x))):(s.moveTo(F,O),s.arc(0,0,f,v,_,!x)):s.moveTo(F,O),c>fb&&w>fb?T>fb?(g=Ei(M,L,P,z,c,-T,x),m=Ei(F,O,I,R,c,-T,x),s.lineTo(g.cx+g.x01,g.cy+g.y01),T<A?s.arc(g.cx,g.cy,T,ab(g.y01,g.x01),ab(m.y01,m.x01),!x):(s.arc(g.cx,g.cy,T,ab(g.y01,g.x01),ab(g.y11,g.x11),!x),s.arc(0,0,c,ab(g.cy+g.y11,g.cx+g.x11),ab(m.cy+m.y11,m.cx+m.x11),x),s.arc(m.cx,m.cy,T,ab(m.y11,m.x11),ab(m.y01,m.x01),!x))):s.arc(0,0,c,b,y,x):s.lineTo(M,L)}else s.moveTo(0,0);return s.closePath(),e?(s=null,e+""||null):void 0}var t=_i,n=yi,r=gi(0),i=null,a=bi,o=wi,u=Si,s=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-db/2;return[ob(r)*e,lb(r)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:gi(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:gi(+t),e):n},e.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:gi(+t),e):r},e.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:gi(+t),e):i},e.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:gi(+t),e):a},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:gi(+t),e):o},e.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:gi(+t),e):u},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius(_a),zb=Fi().x(ma).y1(va).y0((function(e){return(e.y||0)+(e.height||0)})).defined(ya),Ib=Fi().y(va).x1(ma).x0((function(e){return(e.x||0)+(e.width||0)})).defined(ya),Rb=Ni().x(ma).y(va).defined(ya),Gb=xa().x(ma).y(va).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius(_a),jb=function(){function e(){var e;if(r||(r=e=xi()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}var t=gi(xb),n=gi(64),r=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:gi(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:gi(+t),e):n},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e}().type((function(e){return la(e.shape||"circle")})).size((function(e){return null==e.size?64:e.size})),Wb=ga().x(ma).y(va).defined(ya).size((function(e){return e.size||1})),Bb=2*h,Ub=Bb/4;Sa.beginPath=ka,Sa.closePath=ka,Sa.moveTo=Ea,Sa.lineTo=Ea,Sa.rect=function(e,t,n,r){Ea(e,t),Ea(e+n,t+r)},Sa.quadraticCurveTo=function(e,t,n,r){Ea(e,t),Ea(n,r)},Sa.bezierCurveTo=function(e,t,n,r,i,a){Ea(e,t),Ea(n,r),Ea(i,a)},Sa.arc=function(e,t,n,r,i,a){function o(e){f=n*s(e),d=n*l(e),f<h&&(h=f),f>p&&(p=f),d<x&&(x=d),d>g&&(g=d)}if(m(i-r)>Bb-1e-8)return Ea(e-n,t-n),void Ea(e+n,t+n);var u,c,f,d,h=1/0,p=-1/0,x=1/0,g=-1/0;if(o(r),o(i),i!==r)if(0>(r%=Bb)&&(r+=Bb),0>(i%=Bb)&&(i+=Bb),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=Bb,u=r-r%Ub,c=0;4>c&&u>i;++c,u-=Ub)o(u);else for(u=r-r%Ub+Ub,c=0;4>c&&u<i;++c,u+=Ub)o(u);Ea(e+h,t+x),Ea(e+p,t+g)};var Vb,qb,Hb=[],$b=function(){return!0},Yb=Wa("arc",(function(e,t){return Pb.context(e)(t)})),Xb=Ba("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Ib:zb).curve(ra(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],a="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;0<=--o;)!1!==e[o].defined&&(r=m(e[o][a]-i))<u&&(u=r,n=e[o]);return n})),Zb=1,Jb=.5,Kb=Ia(Va),Qb={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=qa(t,n),i=t.x||0,a=t.y||0,o=(null==t.width?r.width:t.width)||0,u=(null==t.height?r.height:t.height)||0,s=!1===t.aspect?"none":"xMidYMid";i-=Ha(t.align,o),a-=$a(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",Ga(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)},bound:function(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null==t.width?n&&n.width:t.width)||0,o=(null==t.height?n&&n.height:t.height)||0;return r-=Ha(t.align,a),i-=$a(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function(e,t,n){var r=this;Fa(t,(function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=qa(t,r),l=t.x||0,c=t.y||0,f=(null==t.width?s.width:t.width)||0,d=(null==t.height?s.height:t.height)||0;l-=Ha(t.align,f),c-=$a(t.baseline,d),!1!==t.aspect&&(a=s.width/s.height,o=t.width/t.height,a==a&&o==o&&a!=o&&(o<a?(c+=(d-(u=f/a))/2,d=u):(l+=(f-(u=d*a))/2,f=u))),s.loaded&&(e.globalAlpha=null==(i=t.opacity)?1:i,e.drawImage(s,l,c,f,d))}}))},pick:za(),get:qa,xOffset:Ha,yOffset:$a},ew=Ba("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return Rb.curve(ra(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=S(e[0].strokeWidth||1,2),a=e.length;0<=--a;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null})),tw={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",ja(t)),e("d",t.path)},bound:function(e,t){return Ya(Sa(e),t)?e.set(0,0,0,0):wa(e,t)},draw:Ma(Ya),pick:Ra(Ya)},nw={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",ba(null,t))},bound:function(e,t){var n,r;return wa(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:Ma(Xa),pick:Ra(Xa)},rw={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",ja(t)),e("x2",null==t.x2?0:t.x2-(t.x||0)),e("y2",null==t.y2?0:t.y2-(t.y||0))},bound:function(e,t){var n,r;return wa(e.set(n=t.x||0,r=t.y||0,null==t.x2?n:t.x2,null==t.y2?r:t.y2),t)},draw:function(e,t,n){Fa(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&Za(e,t,r)&&e.stroke()}}))},pick:za((function(e,t,n,r){return!!e.isPointInStroke&&Za(e,t,1)&&e.isPointInStroke(n,r)}))},iw=Wa("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),aw=Wa("symbol",(function(e,t){return jb.context(e)(t)})),ow={height:to,measureWidth:Qa,estimateWidth:Ja,width:Ja,canvas:no};no(!0);var uw={left:"start",center:"middle",right:"end"},sw=new ai,lw={type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+oo(t),a=t.x||0,o=t.y||0,u=t.angle||0,c=t.radius||0;c&&(n=(t.theta||0)-h/2,a+=c*s(n),o+=c*l(n)),e("text-anchor",uw[t.align]||"start"),u?(n=Ga(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+Ga(r,i))):n=Ga(a+r,o+i),e("transform",n)},bound:uo,draw:function(e,t,n){Fa(t,(function(t){var r,i,a,o,u,c;(!n||n.intersects(t.bounds))&&(c=ro(t))&&(0===(r=null==t.opacity?1:t.opacity)||(e.font=ao(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-h/2,i+=o*s(u),a+=o*l(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*h/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+oo(t),t.fill&&Ta(e,t,r)&&e.fillText(c,i,a),t.stroke&&Ca(e,t,r)&&e.strokeText(c,i,a),t.angle&&e.restore()))}))},pick:za((function(e,t,n,r,i,a){if(0>=t.fontSize)return!1;if(!t.angle)return!0;var o=uo(sw,t,!0),u=-t.angle*h/180,c=s(u),f=l(u),d=t.x,p=t.y;return o.contains(c*i-f*a+(d-d*c+p*f),f*i+c*a+(p-d*f-p*c))}))},cw=Ba("trail",(function(e,t){return Wb.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;0<=--i;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null})),fw={arc:Yb,area:Xb,group:{type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",ja(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),wa(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;Fa(t,(function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&0<(i=null==t.opacity?1:t.opacity)&&(Va(e,t),t.fill&&Ta(e,t,i)&&e.fill(),t.stroke&&Ca(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),Fa(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,o),e.restore()}))},pick:function(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return Oa(t,(function(l){var c,f,d,h;if(!(h=l.bounds)||h.contains(i,a))return f=l.x||0,d=l.y||0,e.save(),e.translate(f,d),f=i-f,d=a-d,!(c=Oa(l,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&!1!==t.interactive&&(l.fill||l.stroke)&&Kb(e,l,u,s)&&(c=l),e.restore(),c||null}))},background:function(e,t){var n=t.stroke?Jb:0;e("class","background"),e("d",ba(null,t,n,n))},foreground:function(e,t,n){e("clip-path",t.clip?Ua(n,t,t):null)}},image:Qb,line:ew,path:tw,rect:nw,rule:rw,shape:iw,symbol:aw,text:lw,trail:cw},dw={mark:null},hw=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],pw=ho.prototype;pw.toJSON=function(e){return co(this.root,e||0)},pw.mark=function(e,t,n){var r=po(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var xw=bo.prototype;xw.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},xw.element=function(){return this._el},xw.canvas=function(){return this._el&&this._el.firstChild},xw.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},xw.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},xw.on=function(){},xw.off=function(){},xw._handlerIndex=function(e,t,n){for(var r=e?e.length:0;0<=--r;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},xw.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},xw.eventName=function(e){var t=e.indexOf(".");return 0>t?e:e.slice(0,t)},xw.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=xo(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)})).catch((function(){}))},xw.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=fw[o.marktype]).tip){for((a=yo(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},xw.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var gw=So.prototype;gw.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},gw.element=function(){return this._el},gw.canvas=function(){return this._el&&this._el.firstChild},gw.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},gw.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},gw.dirty=function(){},gw.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},gw._render=function(){},gw.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},gw._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(e){e&&i(),n._ready=null}))}return r},gw.sanitizeURL=function(e){return this._load("sanitizeURL",e)},gw.loadImage=function(e){return this._load("loadImage",e)};var mw=ie(ko,bo);mw.initialize=function(e,t,n){var r=this._canvas=e&&go(e,"canvas");if(r){var i=this;this.events.forEach((function(e){r.addEventListener(e,(function(t){mw[e]?mw[e].call(i,t):i.fire(e,t)}))}))}return bo.prototype.initialize.call(this,e,t,n)},mw.canvas=function(){return this._canvas},mw.context=function(){return this._canvas.getContext("2d")},mw.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],mw.DOMMouseScroll=function(e){this.fire("mousewheel",e)},mw.mousemove=Eo("mousemove","mouseover","mouseout"),mw.dragover=Eo("dragover","dragenter","dragleave"),mw.mouseout=Ao("mouseout"),mw.dragleave=Ao("dragleave"),mw.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},mw.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},mw.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},mw.touchmove=function(e){this.fire("touchmove",e,!0)},mw.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},mw.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,"click"===e&&a&&a.href?this.handleHref(t,a,a.href):("mousemove"==e||"mouseout"==e)&&this.handleTooltip(t,a,"mouseout"!=e),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},mw.on=function(e,t){var n=this.eventName(e),r=this._handlers;return 0>this._handlerIndex(r[n],e,t)&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},mw.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&r.splice(i,1),this},mw.pickEvent=function(e){var t=yo(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},mw.pick=function(e,t,n,r,i){var a=this.context();return fw[e.marktype].pick.call(this,a,e,t,n,r,i)};var vw=void 0===window?1:window.devicePixelRatio||1,_w=ie(To,So),yw=So.prototype,bw=new ai;_w.initialize=function(e,t,n,r,i){return this._canvas=li(1,1),e&&(vo(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),yw.initialize.call(this,e,t,n,r,i)},_w.resize=function(e,t,n,r){return yw.resize.call(this,e,t,n,r),function(e,t,n,r,i){var a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),u=a?vw:i;e.width=t*u,e.height=n*u,a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=u,o.setTransform(u,0,0,u,u*r[0],u*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this},_w.canvas=function(){return this._canvas},_w.context=function(){return this._canvas?this._canvas.getContext("2d"):null},_w.dirty=function(e){var t=function(e,t){if(null==t)return e;for(var n=bw.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},_w._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function(e,t,n){return t.expand(1).round(),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},_w.draw=function(e,t,n){var r=fw[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),J(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},_w.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var ww=ie(Co,bo);ww.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener("mouseout",this._tooltipHandler)),this._svg=r=e&&go(e,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener("mouseout",this._tooltipHandler)),bo.prototype.initialize.call(this,e,t,n)},ww.canvas=function(){return this._svg},ww.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(0>this._handlerIndex(r[n],e,t)){var i={type:e,handler:t,listener:Do(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},ww.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var Sw={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},kw={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Ew=Object.keys(kw),Aw=Sw.xmlns,Tw=ie(Oo,So),Cw=So.prototype;Tw.initialize=function(e,t,n,r){return e&&(this._svg=mo(e,0,"svg",Aw),this._svg.setAttribute("class","marks"),vo(e,1),this._root=mo(this._svg,0,"g",Aw),vo(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Cw.initialize.call(this,e,t,n,r)},Tw.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Cw.background.apply(this,arguments)},Tw.resize=function(e,t,n,r){return Cw.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Tw.canvas=function(){return this._svg},Tw.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in Sw)e[t]=Sw[t];var n=this._bgcolor?No("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Fo("rect"):"";return No("svg",e)+n+this._svg.innerHTML+Fo("svg")},Tw._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),vo(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Tw.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=mo(t,0,"defs",Aw)),Mo(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=mo(t,0,"defs",Aw)),Lo(r,n.clipping[e],i++);r&&(0==i?(t.removeChild(r),n.el=null):vo(r,i))},Tw._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},Tw.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},Tw.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},Tw._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)if((n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=fw[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,Po(t,s),n.items.forEach((function(e){e.dirty=s}))),!n.zdirty){if(t.exit){i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null;continue}(t=i.nested?n.items[0]:t)._update===s||(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,Po(t,s)),t._update=s)}return!this._dirtyAll},Tw.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=zo(e,i,c,u.tag,o);t&&(a._update(u,n,e),l&&function(e,t,n){t=t.lastChild;var r,i=0;Fa(n,(function(n){r=e.draw(t,n,r),++i})),vo(t,1+i)}(a,n,e)),c=n,++f}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=fw[t.marktype],s=!1===t.interactive?"none":null,l="g"===u.tag,c=null,f=0;return(i=zo(t,e,n,"g",o)).setAttribute("class",_o(t)),l||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",Ua(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):Fa(t,r),vo(i,f),i};var Dw=null,Nw=null,Fw={group:function(e,t,n){Nw=t.__values__,Dw=t.childNodes[1],e.foreground(Ro,n,this),Dw=t.childNodes[0],e.background(Ro,n,this);var r=!1===n.mark.interactive?"none":null;r!==Nw.events&&(Dw.style.setProperty("pointer-events",r),Nw.events=r)},text:function(e,t,n){var r;(r=ro(n))!==Nw.text&&(t.textContent=r,Nw.text=r),Io(t,"font-family",io(n)),Io(t,"font-size",to(n)+"px"),Io(t,"font-style",n.fontStyle),Io(t,"font-variant",n.fontVariant),Io(t,"font-weight",n.fontWeight)}};Tw._update=function(e,t,n){Dw=t,Nw=t.__values__,e.attr(Ro,n,this);var r=Fw[e.type];r&&r.call(this,e,t,n),this.style(Dw,n)},Tw.style=function(e,t){var n,r,i,a,o;if(null!=t)for(n=0,r=Ew.length;n<r;++n)o=t[i=Ew[n]],"font"===i&&(o=io(t)),o===Nw[i]||(a=kw[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+Go()+"#"+o.id+")"),e.style.setProperty(a,o+"")),Nw[i]=o)};var Ow,Mw=ie(jo,So),Lw=So.prototype;Mw.resize=function(e,t,n,r){Lw.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in Sw)o[u]=Sw[u];a.head=No("svg",o);var s=this._bgcolor;return("transparent"===s||"none"===s)&&(s=null),a.bg=s?No("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+Fo("rect"):"",a.root=No("g",{transform:"translate("+i+")"}),a.foot=Fo("g")+Fo("svg"),this},Mw.background=function(){var e=Lw.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},Mw.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},Mw._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},Mw.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(r=(n=i.gradient[t]).stops,a+=No("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=No("stop",{offset:r[e].offset,"stop-color":r[e].color})+Fo("stop");a+=Fo("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=No("clipPath",{id:t}),a+=n.path?No("path",{d:n.path})+Fo("path"):No("rect",{x:0,y:0,width:n.width,height:n.height})+Fo("rect"),a+=Fo("clipPath");return 0<a.length?No("defs")+a+Fo("defs"):""},Mw.attributes=function(e,t){return Ow={},e(Wo,t,this),Ow},Mw.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},Mw.mark=function(e){function t(t){var s=r.href(t);s&&(u+=No("a",s)),n="g"===a?null:Bo(t,e,a,o),u+=No(a,r.attributes(i.attr,t),n),"text"===a?u+=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(ro(t)):"g"===a&&(u+=No("path",r.attributes(i.background,t),Bo(t,e,"bgrect",o))+Fo("path"),u+=No("g",r.attributes(i.foreground,t))+r.markGroup(t)+Fo("g")),u+=Fo(a),s&&(u+=Fo("a"))}var n,r=this,i=fw[e.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&!1===e.interactive&&(n='style="pointer-events: none;"'),u+=No("g",{class:_o(e),"clip-path":e.clip?Ua(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):Fa(e,t),u+Fo("g")},Mw.markGroup=function(e){var t=this,n="";return Fa(e,(function(e){n+=t.mark(e)})),n};var Pw={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},zw={};zw.canvas=zw.png={renderer:To,headless:To,handler:ko},zw.svg={renderer:Oo,headless:jo,handler:Co},zw.none={};var Iw=new ai,Rw=1e-9;ie($o,Ln).transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=fw[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=Yo(i,u),i.items.forEach((function(e){e.bounds.clear().union(s)}))):"group"===a||e.modified()?(t.visit(t.MOD,(function(e){r.dirty(e)})),s.clear(),i.items.forEach((function(e){s.union(Yo(e,u))})),"legend"===i.role&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,(function(e){s.union(Yo(e,u))})),t.visit(t.MOD,(function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(Yo(e,u))})),n&&(s.clear(),i.items.forEach((function(e){s.union(e.bounds)})))),Vo(i),t.modifies("bounds")},Xo.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},ie(Xo,Ln).transform=function(e,t){var n=function(e){var t=e._signals[":vega_identifier:"];return t||(e._signals[":vega_identifier:"]=t=e.add(0)),t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,(function(e){e[i]||(e[i]=++r)})),n.set(this.value=r),t},ie(Zo,Ln).transform=function(e,t){var n=this.value;n||((n=t.dataflow.scenegraph().mark(e.markdef,function(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index)).group.context=e.context,!e.context.group&&(e.context.group=n.group),n.source=this,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r="group"===n.marktype?si:ui;return t.visit(t.ADD,(function(e){r.call(e,n)})),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t};var Gw=ie(Jo,Ln),jw={parity:function(e){return e.filter((function(e,t){return t%2?e.opacity=0:1}))},greedy:function(e){var t;return e.filter((function(e,n){return n&&Ko(t.bounds,e.bounds)?e.opacity=0:(t=e,1)}))}};Gw.transform=function(e,t){var n,r,i=jw[e.method]||jw.parity,a=t.materialize(t.SOURCE).source;if(a){if(!e.method)return e.modified("method")&&(tu(a),t=nu(t,e)),t;if(e.sort&&(a=a.slice().sort(e.sort)),"greedy"===e.method&&(a=a.filter(eu)),n=tu(a),t=nu(t,e),3<=n.length&&Qo(n)){do{n=i(n)}while(3<=n.length&&Qo(n));3>n.length&&!I(a).opacity&&(1<n.length&&(I(n).opacity=0),I(a).opacity=1)}return e.boundScale&&0<=e.boundTolerance&&(r=function(e,t,n){var r=e.range(),i=new ai;return"top"===t||"bottom"===t?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}(e.boundScale,e.boundOrient,+e.boundTolerance),a.forEach((function(e){r(e)||(e.opacity=0)}))),t}},ie(ru,Ln).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,(function(e){n.dirty(e)})),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var Ww=.5,Bw=new ai;ie(pu,Ln).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach((function(t){e.layout&&fu(n,t,e.layout),xu(n,t,e)})),e.modified()&&t.reflow(),t};var Uw=Object.freeze({bound:$o,identifier:Xo,mark:Zo,overlap:Jo,render:ru,viewlayout:pu}),Vw=ku(Su).right,qw=x(50),Hw=x(10),$w=x(2);Nu.prototype=Fu.prototype={constructor:Nu,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var Yw=Fu.prototype;Iu.prototype=function(e,t){var n=new Iu;if(e instanceof Iu)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}.prototype={constructor:Iu,has:Yw.has,add:function(e){return this["$"+(e+="")]=e,this},remove:Yw.remove,clear:Yw.clear,values:Yw.keys,size:Yw.size,empty:Yw.empty,each:Yw.each};var Xw=Array.prototype,Zw=Xw.map,Jw=Xw.slice,Kw={name:"implicit"},Qw=1/.7,eS=/^#([0-9a-f]{3})$/,tS=/^#([0-9a-f]{6})$/,nS=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,rS=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,iS=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,aS=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,oS=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,uS=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,sS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gu(Wu,Bu,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Gu($u,Hu,ju(Wu,{brighter:function(e){return e=null==e?Qw:S(Qw,e),new $u(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:S(.7,e),new $u(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+Yu(this.r)+Yu(this.g)+Yu(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:y(0,p(1,e)))?"rgb(":"rgba(")+y(0,p(255,v(this.r)||0))+", "+y(0,p(255,v(this.g)||0))+", "+y(0,p(255,v(this.b)||0))+(1===e?")":", "+e+")")}})),Gu(Ku,Ju,ju(Wu,{brighter:function(e){return e=null==e?Qw:S(Qw,e),new Ku(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:S(.7,e),new Ku(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(0>this.h),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(.5>n?n:1-n)*t,i=2*n-r;return new $u(Qu(240<=e?e-240:e+120,i,r),Qu(e,i,r),Qu(120>e?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var lS=h/180,cS=180/h,fS=.96422,dS=.82521,hS=4/29,pS=6/29,xS=3*pS*pS,gS=pS*pS*pS;Gu(ns,ts,ju(Wu,{brighter:function(e){return new ns(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new ns(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new $u(as(3.1338561*(t=fS*is(t))-1.6168667*(e=1*is(e))-.4906146*(n=dS*is(n))),as(-.9787684*t+1.9161415*e+.033454*n),as(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Gu(ls,ss,ju(Wu,{brighter:function(e){return new ls(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new ls(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return es(this).rgb()}}));var mS=1.78277,vS=-.29227,_S=-.90649,yS=1.97294,bS=yS*_S,wS=yS*mS,SS=mS*vS- -.14861*_S;Gu(ds,fs,ju(Wu,{brighter:function(e){return e=null==e?Qw:S(Qw,e),new ds(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:S(.7,e),new ds(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*lS,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=s(e),i=l(e);return new $u(255*(t+n*(-.14861*r+mS*i)),255*(t+n*(vS*r+_S*i)),255*(t+n*(yS*r)),this.opacity)}}));var kS,ES,AS,TS,CS=function e(t){function n(e,t){var n=r((e=Hu(e)).r,(t=Hu(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=ys(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}var r=_s(t);return n.gamma=e,n}(1),DS=bs(ps),NS=bs(xs),FS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,OS=new RegExp(FS.source,"g"),MS=180/h,LS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},PS=Ns((function(e){return"none"===e?LS:(kS||(kS=document.createElement("DIV"),ES=document.documentElement,AS=document.defaultView),kS.style.transform=e,e=AS.getComputedStyle(ES.appendChild(kS),null).getPropertyValue("transform"),ES.removeChild(kS),Ds(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),zS=Ns((function(e){return null==e?LS:(TS||(TS=document.createElementNS("http://www.w3.org/2000/svg","g")),TS.setAttribute("transform",e),(e=TS.transform.baseVal.consolidate())?Ds((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):LS)}),", ",")",")"),IS=d,RS=1e-12,GS=Os(vs),jS=Os(ys),WS=Ms(vs),BS=Ms(ys),US=Ls(vs),VS=Ls(ys),qS=Object.freeze({interpolate:Ts,interpolateArray:ws,interpolateBasis:ps,interpolateBasisClosed:xs,interpolateDate:Ss,interpolateDiscrete:function(e){var t=e.length;return function(n){return e[y(0,p(t-1,_(n*t)))]}},interpolateHue:function(e,t){var n=vs(+e,+t);return function(e){var t=n(e);return t-360*_(t/360)}},interpolateNumber:ks,interpolateObject:Es,interpolateRound:Cs,interpolateString:As,interpolateTransformCss:PS,interpolateTransformSvg:zS,interpolateZoom:function(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],l=t[2],c=u-i,f=s-a,d=c*c+f*f;if(d<RS)r=k(l/o)/IS,n=function(e){return[i+e*c,a+e*f,o*E(IS*e*r)]};else{var h=x(d),p=(l*l-o*o+4*d)/(2*o*2*h),g=(l*l-o*o-4*d)/(2*l*2*h),m=k(x(p*p+1)-p),v=k(x(g*g+1)-g);r=(v-m)/IS,n=function(e){var t=e*r,n=Fs(m),u=o/(2*h)*(n*function(e){return((e=E(2*e))-1)/(e+1)}(IS*t+m)-function(e){return((e=E(e))-1/e)/2}(m));return[i+u*c,a+u*f,o*n/Fs(IS*t+m)]}}return n.duration=1e3*r,n},interpolateRgb:CS,interpolateRgbBasis:DS,interpolateRgbBasisClosed:NS,interpolateHsl:GS,interpolateHslLong:jS,interpolateLab:function(e,t){var n=ys((e=ts(e)).l,(t=ts(t)).l),r=ys(e.a,t.a),i=ys(e.b,t.b),a=ys(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}},interpolateHcl:WS,interpolateHclLong:BS,interpolateCubehelix:US,interpolateCubehelixLong:VS,piecewise:function(e,t){for(var n=0,r=t.length-1,i=t[0],a=Array(0>r?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=y(0,p(r-1,_(e*=r)));return a[t](e-t)}},quantize:function(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}}),HS=[0,1],$S=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Vs.prototype=qs.prototype,qs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":y(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+y(0,0|this.precision))+(this.trim?"~":"")+this.type};var YS,XS,ZS,JS,KS={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return v(e).toString(2)},c:function(e){return e+""},d:function(e){return v(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return v(e).toString(8)},p:function(e,t){return Hs(100*e,t)},r:Hs,s:function(e,t){var n=Bs(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(YS=3*y(-8,p(8,_(i/3))))+1,o=r.length;return a===o?r:a>o?r+Array(a-o+1).join("0"):0<a?r.slice(0,a)+"."+r.slice(a):"0."+Array(1-a).join("0")+Bs(e,y(0,t+a-1))[0]},X:function(e){return v(e).toString(16).toUpperCase()},x:function(e){return v(e).toString(16)}},QS=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Xs({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var ek=Array.prototype.map,tk=Array.prototype.slice,nk={identity:function e(){function t(e){return+e}var n=[0,1];return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=Zw.call(e,zs),t):n.slice()},t.copy=function(){return e().domain(n)},Js(t)},linear:Ks,log:function e(){function t(){return a=il(i),o=rl(i),0>r()[0]&&(a=al(a),o=al(o)),n}var n=Ws(el,tl).domain([1,10]),r=n.domain,i=10,a=il(10),o=rl(10);return n.base=function(e){return arguments.length?(i=+e,t()):i},n.domain=function(e){return arguments.length?(r(e),t()):r()},n.ticks=function(e){var t,n=r(),u=n[0],s=n[n.length-1];(t=s<u)&&(d=u,u=s,s=d);var l,c,f,d=a(u),h=a(s),x=null==e?10:+e,g=[];if(i%1||!(h-d<x))g=Au(d,h,p(h-d,x)).map(o);else if(d=v(d)-1,h=v(h)+1,0<u){for(;d<h;++d)for(c=1,l=o(d);c<i;++c)if(!((f=l*c)<u)){if(f>s)break;g.push(f)}}else for(;d<h;++d)for(c=i-1,l=o(d);1<=c;--c)if(!((f=l*c)<u)){if(f>s)break;g.push(f)}return t?g.reverse():g},n.tickFormat=function(e,t){if(null==t&&(t=10==i?".0e":","),"function"!=typeof t&&(t=ZS(t)),e===1/0)return t;null==e&&(e=10);var r=y(1,i*e/n.ticks().length);return function(e){var n=e/o(v(a(e)));return n*i<i-.5&&(n*=i),n<=r?t(e):""}},n.nice=function(){return r(Qs(r(),{floor:function(e){return o(_(a(e)))},ceil:function(e){return o(b(a(e)))}}))},n.copy=function(){return js(n,e().base(i))},n},ordinal:Ru,pow:ul,sqrt:function(){return ul().exponent(.5)},quantile:function e(){function t(){var e=0,t=y(1,i.length);for(a=Array(t-1);++e<t;)a[e-1]=Du(r,e/t);return n}function n(e){if(!isNaN(e=+e))return i[Vw(a,e)]}var r=[],i=[],a=[];return n.invertExtent=function(e){var t=i.indexOf(e);return 0>t?[NaN,NaN]:[0<t?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},n.domain=function(e){if(!arguments.length)return r.slice();r=[];for(var n,i=0,a=e.length;i<a;++i)null!=(n=e[i])&&!isNaN(n=+n)&&r.push(n);return r.sort(Su),t()},n.range=function(e){return arguments.length?(i=Jw.call(e),t()):i.slice()},n.quantiles=function(){return a.slice()},n.copy=function(){return e().domain(r).range(i)},n},quantize:function e(){function t(e){if(e<=e)return u[Vw(o,e,0,a)]}function n(){var e=-1;for(o=Array(a);++e<a;)o[e]=((e+1)*i-(e-a)*r)/(a+1);return t}var r=0,i=1,a=1,o=[.5],u=[0,1];return t.domain=function(e){return arguments.length?(r=+e[0],i=+e[1],n()):[r,i]},t.range=function(e){return arguments.length?(a=(u=Jw.call(e)).length-1,n()):u.slice()},t.invertExtent=function(e){var t=u.indexOf(e);return 0>t?[NaN,NaN]:1>t?[r,o[0]]:t>=a?[o[a-1],i]:[o[t-1],o[t]]},t.copy=function(){return e().domain([r,i]).range(u)},Js(t)},threshold:function e(){function t(e){if(e<=e)return r[Vw(n,e,0,i)]}var n=[.5],r=[0,1],i=1;return t.domain=function(e){return arguments.length?(n=Jw.call(e),i=p(n.length,r.length-1),t):n.slice()},t.range=function(e){return arguments.length?(r=Jw.call(e),i=p(n.length,r.length-1),t):r.slice()},t.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},t.copy=function(){return e().domain(n).range(r)},t},time:function(){return cl(Q_,K_,X_,Y_,$_,H_,q_,V_,ly).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return cl(uy,oy,ry,ny,ty,ey,q_,V_,fy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:fl,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(fl().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=I(e)-a}function r(e){var n=(e-a)/o;return t(u?y(0,p(1,n)):n)}var i=Ks(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return r(e)}function n(e){i=dl(e),r.domain([i[0],I(i)])}var r=Ks(),i=[];return t.domain=function(e){return arguments.length?(n(e),t):i.slice()},t.range=function(e){return arguments.length?(r.range(e),t):r.range()},t.rangeRound=function(e){return arguments.length?(r.rangeRound(e),t):r.rangeRound()},t.interpolate=function(e){return arguments.length?(r.interpolate(e),t):r.interpolate()},t.invert=function(e){return r.invert(e)},t.ticks=function(e){var n=i.length,r=~~(n/(e||n));return 2>r?t.domain():i.filter((function(e,t){return!(t%r)}))},t.tickFormat=function(){return r.tickFormat.apply(r,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(Dy(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=dl(e),t):n.slice()},t.range=function(e){return arguments.length?(r=tk.call(e),t):r.slice()},t.tickFormat=function(){var e=Ks().domain([n[0],I(n)]);return e.tickFormat.apply(e,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var rk in nk)pl(rk,nk[rk]);var ik=_l("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),ak=_l("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),ok=_l("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),uk=_l("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),sk=_l("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),lk=[,,,].concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(_l),ck=yl("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),fk=yl("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),dk=yl("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),hk=yl("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),pk=yl("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),xk=yl("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),gk=yl("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),mk=yl("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),vk=yl("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),_k=[,,,].concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(yl),yk=bl(_k),bk=[,,,].concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(yl),wk=bl(bk),Sk=[,,,].concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(yl),kk=bl(Sk),Ek=[,,,].concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(yl),Ak=bl(Ek),Tk=[,,,].concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(yl),Ck=bl(Tk),Dk=[,,,].concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(yl),Nk=bl(Dk),Fk=[,,,].concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(yl),Ok=bl(Fk),Mk=[,,,].concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(yl),Lk=bl(Mk),Pk=[,,,].concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(yl),zk=bl(Pk),Ik=[,,,].concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(yl),Rk=bl(Ik),Gk=[,,,].concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(yl),jk=bl(Gk),Wk=[,,,].concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(yl),Bk=bl(Wk),Uk=[,,,].concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(yl),Vk=bl(Uk),qk=[,,,].concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(yl),Hk=bl(qk),$k=[,,,].concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(yl),Yk=bl($k),Xk=[,,,].concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(yl),Zk=bl(Xk),Jk=[,,,].concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(yl),Kk=bl(Jk),Qk=[,,,].concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(yl),eE=bl(Qk),tE=[,,,].concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(yl),nE=bl(tE),rE=[,,,].concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(yl),iE=bl(rE),aE=[,,,].concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(yl),oE=bl(aE),uE=[,,,].concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(yl),sE=bl(uE),lE=[,,,].concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(yl),cE=bl(lE),fE=[,,,].concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(yl),dE=bl(fE),hE=[,,,].concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(yl),pE=bl(hE),xE=[,,,].concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(yl),gE=bl(xE),mE=[,,,].concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(yl),vE=bl(mE),_E=VS(fs(300,.5,0),fs(-240,.5,1)),yE=VS(fs(-100,.75,.35),fs(80,1.5,.8)),bE=VS(fs(260,.75,.35),fs(80,1.5,.8)),wE=fs(),SE=Hu(),kE=h/3,EE=2*h/3,AE=kl(yl("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),TE=kl(yl("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),CE=kl(yl("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),DE=kl(yl("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),NE=Object.freeze({schemeCategory10:ck,schemeAccent:fk,schemeDark2:dk,schemePaired:hk,schemePastel1:pk,schemePastel2:xk,schemeSet1:gk,schemeSet2:mk,schemeSet3:vk,interpolateBrBG:yk,schemeBrBG:_k,interpolatePRGn:wk,schemePRGn:bk,interpolatePiYG:kk,schemePiYG:Sk,interpolatePuOr:Ak,schemePuOr:Ek,interpolateRdBu:Ck,schemeRdBu:Tk,interpolateRdGy:Nk,schemeRdGy:Dk,interpolateRdYlBu:Ok,schemeRdYlBu:Fk,interpolateRdYlGn:Lk,schemeRdYlGn:Mk,interpolateSpectral:zk,schemeSpectral:Pk,interpolateBuGn:Rk,schemeBuGn:Ik,interpolateBuPu:jk,schemeBuPu:Gk,interpolateGnBu:Bk,schemeGnBu:Wk,interpolateOrRd:Vk,schemeOrRd:Uk,interpolatePuBuGn:Hk,schemePuBuGn:qk,interpolatePuBu:Yk,schemePuBu:$k,interpolatePuRd:Zk,schemePuRd:Xk,interpolateRdPu:Kk,schemeRdPu:Jk,interpolateYlGnBu:eE,schemeYlGnBu:Qk,interpolateYlGn:nE,schemeYlGn:tE,interpolateYlOrBr:iE,schemeYlOrBr:rE,interpolateYlOrRd:oE,schemeYlOrRd:aE,interpolateBlues:sE,schemeBlues:uE,interpolateGreens:cE,schemeGreens:lE,interpolateGreys:dE,schemeGreys:fE,interpolatePurples:pE,schemePurples:hE,interpolateReds:gE,schemeReds:xE,interpolateOranges:vE,schemeOranges:mE,interpolateCubehelixDefault:_E,interpolateRainbow:wl,interpolateWarm:yE,interpolateCool:bE,interpolateSinebow:Sl,interpolateViridis:AE,interpolateMagma:TE,interpolateInferno:CE,interpolatePlasma:DE}),FE={blueorange:lk},OE={category10:ck,accent:fk,dark2:dk,paired:hk,pastel1:pk,pastel2:xk,set1:gk,set2:mk,set3:vk,category20:ik,category20b:ak,category20c:ok,tableau10:uk,tableau20:sk,viridis:AE,magma:TE,inferno:CE,plasma:DE,rainbow:wl,sinebow:Sl,blueorange:DS(I(lk))};El("blues","Blues"),El("greens","Greens"),El("greys","Greys"),El("purples","Purples"),El("reds","Reds"),El("oranges","Oranges"),El("brownbluegreen","BrBG"),El("purplegreen","PRGn"),El("pinkyellowgreen","PiYG"),El("purpleorange","PuOr"),El("redblue","RdBu"),El("redgrey","RdGy"),El("redyellowblue","RdYlBu"),El("redyellowgreen","RdYlGn"),El("spectral","Spectral"),El("bluegreen","BuGn"),El("bluepurple","BuPu"),El("greenblue","GnBu"),El("orangered","OrRd"),El("purplebluegreen","PuBuGn"),El("purpleblue","PuBu"),El("purplered","PuRd"),El("redpurple","RdPu"),El("yellowgreenblue","YlGnBu"),El("yellowgreen","YlGn"),El("yelloworangebrown","YlOrBr"),El("yelloworangered","YlOrRd");var ME={millisecond:V_,second:q_,minute:H_,hour:$_,day:Y_,week:X_,month:K_,year:Q_},LE={millisecond:V_,second:q_,minute:ey,hour:ty,day:ny,week:ry,month:oy,year:uy};ie(Ml,Ln).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:Dl(i,e.count),o=e.format||Ol(i,a,e.formatSpecifier),u=e.values?Nl(i,e.values,a):Fl(i,a);return r&&(n.rem=r),r=u.map((function(e,t){return ke({index:t/(u.length-1),value:e,label:o(e)})})),e.extra&&r.length&&r.push(ke({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},ie(Ll,Ln).transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Pl,a=e.key||we,o=this.value;return v_(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(a))&&D("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=re().test(zl),o.lookup=function(e){return o.get(a(e))}),t.visit(t.ADD,(function(e){var t=a(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(function(e){var t=a(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(function(e){var t=a(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},ie(Il,Ln).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(v_(i)){if(!n.changed()&&!i.every((function(e){return r[e]})))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||E_,u=r.enter||E_,s=r.exit||E_,l=(i&&!a?r[i]:o)||E_;if(t.changed(t.ADD)&&(t.visit(t.ADD,(function(t){u(t,e),o(t,e),l!==E_&&l!==o&&l(t,e)})),n.modifies(u.output),n.modifies(o.output),l!==E_&&l!==o&&n.modifies(l.output)),t.changed(t.REM)&&s!==E_&&(t.visit(t.REM,(function(t){s(t,e)})),n.modifies(s.output)),a||l!==E_){var c=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(c,(function(t){var r=u(t,e);(l(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(u.output)):t.visit(c,(function(t){l(t,e)&&n.mod.push(t)})),n.mod.length&&n.modifies(l.output)}return n.changed()?n:t.StopPropagation};var PE={quantile:function(e){var t=[-1/0].concat(e.quantiles());return t.max=1/0,t},quantize:function(e){var t=e.domain(),n=t[0],r=I(t),i=e.range().length,a=Array(i),o=0;for(a[0]=-1/0;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=1/0,a},threshold:function(e){var t=[-1/0].concat(e.domain());return t.max=1/0,t}};PE["bin-linear"]=PE["bin-ordinal"]=function(e){var t=e.domain();return t.max=t.pop(),t},ie(jl,Ln).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=this.value,s=e.type||"symbol",l=e.scale,c=null==e.count?5:Dl(l,e.count),f=e.format||Ol(l,c,e.formatSpecifier),d=e.values||function(e,t){var n=PE[e.type];return n?n(e):Fl(e,t)}(l,c);return f=Rl(l,f,s),u&&(o.rem=u),"symbol"===s?(J(i=e.size)?(!e.values&&0===l(d[0])&&(d=d.slice(1)),a=d.reduce((function(t,n){return y(t,i(n,e))}),0)):i=Q(a=i||8),u=d.map((function(t,n){return ke({index:n,label:f(t,n,d),value:t,offset:a,size:i(t,e)})}))):"gradient"===s?(n=l.domain(),r=gl(l,n[0],I(n)),3>d.length&&!e.values&&n[0]!==I(n)&&(d=[n[0],I(n)]),u=d.map((function(e,t){return ke({index:t,label:f(e,t,d),value:e,perc:r(e)})}))):(i=d.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+I(t),a=i-r;if("threshold"===e.type){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(e){return(e-r)/a}}(l),u=d.map((function(e,t){return ke({index:t,label:f(e,t,d),value:e,perc:t?r(e):0,perc2:t===i?1:r(d[t+1])})}))),o.source=u,o.add=u,this.value=u,o};var zE=re({line:Hl,"line-radial":function(e,t,n,r){return Hl(t*s(e),t*l(e),r*s(n),r*l(n))},arc:$l,"arc-radial":function(e,t,n,r){return $l(t*s(e),t*l(e),r*s(n),r*l(n))},curve:Yl,"curve-radial":function(e,t,n,r){return Yl(t*s(e),t*l(e),r*s(n),r*l(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var i=s(e),a=l(e),o=s(n),u=l(n);return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+((m(n-e)>h?n<=e:n>e)?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var i=s(e),a=l(e),o=s(n),u=l(n),c=(t+r)/2;return"M"+t*i+","+t*a+"C"+c*i+","+c*a+" "+c*o+","+c*u+" "+r*o+","+r*u}});ql.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},ie(ql,Ln).transform=function(e,t){var n=e.sourceX||Wl,r=e.sourceY||Bl,i=e.targetX||Ul,a=e.targetY||Vl,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",l=zE.get(s+"-"+u)||zE.get(s);return l||D("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(function(e){e[o]=l(n(e),r(e),i(e),a(e))})),t.reflow(e.modified()).modifies(o)},Xl.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},ie(Xl,Ln).transform=function(e,t){var n,r,i,a=e.as||["startAngle","endAngle"],o=a[0],u=a[1],s=e.field||S_,l=e.startAngle||0,c=null==e.endAngle?2*h:e.endAngle,f=t.source,d=f.map(s),p=d.length,x=l,g=(c-l)/function(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}(d),m=Xn(p);for(e.sort&&m.sort((function(e,t){return d[e]-d[t]})),n=0;n<p;++n)i=d[m[n]],(r=f[m[n]])[o]=x,r[u]=x+=i*g;return this.value=d,t.reflow(e.modified()).modifies(a)};var IE=me(["linear","pow","sqrt"]),RE=me(["linear","log","pow","sqrt","time","utc"]),GE=me(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);ie(Zl,Ln).transform=function(e,t){var n,r=t.dataflow,i=this.value;for(n in(!i||e.modified("type"))&&(this.value=i=pl((e.type||"linear").toLowerCase())()),e)if(!GE[n]){if("padding"===n&&RE[i.type])continue;J(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return Ql(i,e,Jl(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)},ie(nc,Ln).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var jE=["y0","y1"];rc.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:jE}]},ie(rc,Ln).transform=function(e,t){var n,r,i,a,o=e.as||jE,u=o[0],s=o[1],l=e.field||S_,c="center"===e.offset?ic:"normalize"===e.offset?ac:oc;for(n=function(e,t,n,r){var i,a,o,u,s,l,c,f,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],(c=i[l=t.map(p)])||(i[l]=c=[],h.push(c)),c.push(s);for(l=0,d=0,u=h.length;l<u;++l){for(a=0,f=0,o=(c=h[l]).length;a<o;++a)f+=m(r(c[a]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,e.sort,l),r=0,i=n.length,a=n.max;r<i;++r)c(n[r],a,l,u,s);return t.reflow(e.modified()).modifies(o)};var WE=Object.freeze({axisticks:Ml,datajoin:Ll,encode:Il,legendentries:jl,linkpath:ql,pie:Xl,scale:Zl,sortitems:nc,stack:rc,validTicks:Nl}),BE=(function(e){1===e.length&&(e=function(e){return function(t,n){return uc(e(t),n)}}(e))}(uc),x(50)),UE=x(10),VE=x(2),qE=Array.prototype.slice,HE=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],$E=["size","smooth"],YE=["x","y","weight","size","cellSize","bandwidth"];Sc.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},ie(Sc,Ln).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=e.count||10;return e.values?(n=mc(),r=$E,a=e.values):(n=function(){function e(e){var n=new Float32Array(g*m),r=new Float32Array(g*m);e.forEach((function(e,t,r){var i=+u(e,t,r)+p>>h,a=+s(e,t,r)+p>>h,o=+l(e,t,r);0<=i&&i<g&&0<=a&&a<m&&(n[i+a*g]+=o)})),vc({width:g,height:m,data:n},{width:g,height:m,data:r},d>>h),_c({width:g,height:m,data:r},{width:g,height:m,data:n},d>>h),vc({width:g,height:m,data:n},{width:g,height:m,data:r},d>>h),_c({width:g,height:m,data:r},{width:g,height:m,data:n},d>>h),vc({width:g,height:m,data:n},{width:g,height:m,data:r},d>>h),_c({width:g,height:m,data:r},{width:g,height:m,data:n},d>>h);var i=y(n);if(!Array.isArray(i)){var a=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r}(n);i=lc(0,a,i),(i=sc(0,_(a/i)*i,i)).shift()}return mc().thresholds(i).size([g,m])(n).map(t)}function t(e){return e.value*=S(2,-2*h),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(a)}function a(e){e[0]=e[0]*S(2,h)-p,e[1]=e[1]*S(2,h)-p}function o(){return g=c+2*(p=3*d)>>h,m=f+2*p>>h,e}var u=yc,s=bc,l=wc,c=960,f=500,d=20,h=2,p=3*d,g=c+2*p>>h,m=f+2*p>>h,y=dc(20);return e.x=function(t){return arguments.length?(u="function"==typeof t?t:dc(+t),e):u},e.y=function(t){return arguments.length?(s="function"==typeof t?t:dc(+t),e):s},e.weight=function(t){return arguments.length?(l="function"==typeof t?t:dc(+t),e):l},e.size=function(e){if(!arguments.length)return[c,f];var t=b(e[0]),n=b(e[1]);if(!(0<=t||0<=t))throw new Error("invalid size");return c=t,f=n,o()},e.cellSize=function(e){if(!arguments.length)return 1<<h;if(!(1<=(e=+e)))throw new Error("invalid cell size");return h=_(k(e)/i),o()},e.thresholds=function(t){return arguments.length?(y="function"==typeof t?t:Array.isArray(t)?dc(qE.call(t)):dc(t),e):y},e.bandwidth=function(e){if(!arguments.length)return x(d*(d+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return d=v((x(4*e*e+1)-1)/2),o()},e}(),r=YE,a=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?u:function(e){return function(t){for(var n=Yn(t),r=n[0],i=n[1]-r,a=[],o=1;o<=e;++o)a.push(r+i*o/(e+1));return a}}(u))),r.forEach((function(t){null!=e[t]&&n[t](e[t])})),this.value&&(o.rem=this.value),a=a&&a.length?n(a).map(ke):[],this.value=o.source=o.add=a,o},kc.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},ie(kc,Ln).transform=function(e,t){var n,r=this._features,i=this._points,a=e.fields,o=a&&a[0],u=a&&a[1],s=e.geojson,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(C(s))||o&&t.modified(C(o))||u&&t.modified(C(u)),(!this.value||n)&&(l=t.SOURCE,this._features=r=[],this._points=i=[]),s&&t.visit(l,(function(e){r.push(s(e))})),o&&u&&(t.visit(l,(function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:"FeatureCollection",features:r}},Ac.prototype={constructor:Ac,reset:function(){this.s=this.t=0},add:function(e){Tc(AA,e,this.t),Tc(this,AA.s,this.s),this.s?this.t+=AA.t:this.s=AA.t},valueOf:function(){return this.s}};var XE,ZE,JE,KE,QE,eA,tA,nA,rA,iA,aA,oA,uA,sA,lA,cA,fA,dA,hA,pA,xA,gA,mA,vA,_A,yA,bA,wA,SA,kA,EA,AA=new Ac,TA=1e-6,CA=1e-12,DA=h,NA=DA/2,FA=DA/4,OA=2*DA,MA=180/DA,LA=DA/180,PA=m,zA=o,IA=u,RA=s,GA=b,jA=E,WA=k,BA=S,UA=l,VA=w||function(e){return 0<e?1:0>e?-1:0},qA=x,HA=t,$A={Feature:function(e,t){Fc(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Fc(n[r].geometry,t)}},YA={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Oc(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Oc(n[r],t,0)},Polygon:function(e,t){Mc(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mc(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Fc(n[r],t)}},XA=Ec(),ZA=Ec(),JA={point:Nc,lineStart:Nc,lineEnd:Nc,polygonStart:function(){XA.reset(),JA.lineStart=Pc,JA.lineEnd=zc},polygonEnd:function(){var e=+XA;ZA.add(0>e?OA+e:e),this.lineStart=this.lineEnd=this.point=Nc},sphere:function(){ZA.add(OA)}},KA=Ec(),QA={point:Hc,lineStart:Yc,lineEnd:Xc,polygonStart:function(){QA.point=Zc,QA.lineStart=Jc,QA.lineEnd=Kc,KA.reset(),JA.polygonStart()},polygonEnd:function(){JA.polygonEnd(),QA.point=Hc,QA.lineStart=Yc,QA.lineEnd=Xc,0>XA?(eA=-(nA=180),tA=-(rA=90)):KA>TA?rA=90:KA<-TA&&(tA=-90),lA[0]=eA,lA[1]=nA}},eT={sphere:Nc,point:nf,lineStart:af,lineEnd:sf,polygonStart:function(){eT.lineStart=lf,eT.lineEnd=cf},polygonEnd:function(){eT.lineStart=af,eT.lineEnd=sf}};pf.invert=pf;var tT,nT,rT,iT,aT,oT,uT,sT,lT=Ec(),cT=(function(e){1===e.length&&(e=function(e){return function(t,n){return Ef(e(t),n)}}(e))}(Ef),Cf((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var u=0<a?DA:-DA,s=PA(a-n);PA(s-DA)<TA?(e.point(n,r=0<(r+o)/2?NA:-NA),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(a,r),t=0):i!==u&&s>=DA&&(PA(n-i)<TA&&(n-=i*TA),PA(a-u)<TA&&(a-=u*TA),r=function(e,t,n,r){var i,a,o=UA(e-n);return PA(o)>TA?zA((UA(t)*(a=RA(r))*UA(n)-UA(r)*(i=RA(t))*UA(e))/(i*a*o)):(t+r)/2}(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=a,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*NA,r.point(-DA,i),r.point(0,i),r.point(DA,i),r.point(DA,0),r.point(DA,-i),r.point(0,-i),r.point(-DA,-i),r.point(-DA,0),r.point(-DA,i);else if(PA(e[0]-t[0])>TA){var a=e[0]<t[0]?DA:-DA;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}),[-DA,-NA])),fT=(Ec(),Ec()),dT=Ec(),hT={point:Nc,lineStart:Nc,lineEnd:Nc,polygonStart:function(){hT.lineStart=zf,hT.lineEnd=Gf},polygonEnd:function(){hT.lineStart=hT.lineEnd=hT.point=Nc,fT.add(PA(dT)),dT.reset()},result:function(){return fT.reset(),fT/2}},pT=1/0,xT=pT,gT=-pT,mT=gT,vT={point:function(e,t){e<pT&&(pT=e),e>gT&&(gT=e),t<xT&&(xT=t),t>mT&&(mT=t)},lineStart:Nc,lineEnd:Nc,polygonStart:Nc,polygonEnd:Nc,result:function(){var e=[[pT,xT],[gT,mT]];return gT=mT=-(xT=pT=1/0),e}},_T=0,yT=0,bT=0,wT=0,ST=0,kT=0,ET=0,AT=0,TT=0,CT={point:jf,lineStart:Wf,lineEnd:Vf,polygonStart:function(){CT.lineStart=qf,CT.lineEnd=Hf},polygonEnd:function(){CT.point=jf,CT.lineStart=Wf,CT.lineEnd=Vf},result:function(){var e=TT?[ET/TT,AT/TT]:kT?[wT/kT,ST/kT]:bT?[_T/bT,yT/bT]:[NaN,NaN];return _T=yT=bT=wT=ST=kT=ET=AT=TT=0,e}};Xf.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,OA)}},result:Nc};var DT,NT,FT,OT,MT,LT=Ec(),PT={point:Nc,lineStart:function(){PT.point=Zf},lineEnd:function(){DT&&Jf(NT,FT),PT.point=Nc},polygonStart:function(){DT=!0},polygonEnd:function(){DT=null},result:function(){return LT.reset(),+LT}};Kf.prototype={_radius:4.5,_circle:Qf(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Qf(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},nd.prototype={constructor:nd,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var zT=RA(30*LA),IT=td({point:function(e,t){this.stream.point(e*LA,t*LA)}}),RT=md((function(e){return qA(2/(1+e))}));RT.invert=vd((function(e){return 2*Dc(e/2)}));var GT=md((function(e){return(e=Cc(e))&&e/UA(e)}));GT.invert=vd((function(e){return e})),_d.invert=function(e,t){return[e,2*zA(jA(t))-NA]},Sd.invert=Sd,Ed.invert=vd(zA),Td.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-11*.005916*o)))}while(PA(n)>TA&&0<--i);return[e/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},Cd.invert=vd(Dc),Dd.invert=vd((function(e){return 2*zA(e)})),Nd.invert=function(e,t){return[-t,2*zA(jA(e))-NA]};var jT=ed(),WT=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],BT={albers:gd,albersusa:function(){function e(e){var t=e[0],n=e[1];return u=null,i.point(t,n),u||(a.point(t,n),u)||(o.point(t,n),u)}function t(){return n=r=null,e}var n,r,i,a,o,u,s=gd(),l=xd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=xd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(e,t){u=[e,t]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(.12<=i&&.234>i&&-.425<=r&&-.214>r?l:.166<=i&&.234>i&&-.214<=r&&-.115>r?c:s).invert(e)},e.stream=function(e){return n&&r===e?n:n=function(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([s.stream(r=e),l.stream(e),c.stream(e)])},e.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),c.precision(e),t()):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),l.scale(.35*t),c.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),r=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(f),a=l.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+TA,u+.12*n+TA],[r-.214*n-TA,u+.234*n-TA]]).stream(f),o=c.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+TA,u+.166*n+TA],[r-.115*n-TA,u+.234*n-TA]]).stream(f),t()},e.fitExtent=function(t,n){return id(e,t,n)},e.fitSize=function(t,n){return ad(e,t,n)},e.fitWidth=function(t,n){return od(e,t,n)},e.fitHeight=function(t,n){return ud(e,t,n)},e.scale(1070)},azimuthalequalarea:function(){return fd(RT).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return fd(GT).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return hd(wd).scale(109.5).parallels([30,30])},conicequalarea:xd,conicequidistant:function(){return hd(kd).scale(131.154).center([0,13.9389])},equirectangular:function(){return fd(Sd).scale(152.63)},gnomonic:function(){return fd(Ed).scale(144.049).clipAngle(60)},identity:function(){function e(){return i=a=null,o}var t,n,r,i,a,o,u=1,s=0,l=0,c=1,f=1,d=Pf,h=null,p=Pf;return o={stream:function(e){return i&&a===e?i:i=d(p(a=e))},postclip:function(i){return arguments.length?(p=i,h=t=n=r=null,e()):p},clipExtent:function(i){return arguments.length?(p=null==i?(h=t=n=r=null,Pf):Of(h=+i[0][0],t=+i[0][1],n=+i[1][0],r=+i[1][1]),e()):null==h?null:[[h,t],[n,r]]},scale:function(t){return arguments.length?(d=Ad((u=+t)*c,u*f,s,l),e()):u},translate:function(t){return arguments.length?(d=Ad(u*c,u*f,s=+t[0],l=+t[1]),e()):[s,l]},reflectX:function(t){return arguments.length?(d=Ad(u*(c=t?-1:1),u*f,s,l),e()):0>c},reflectY:function(t){return arguments.length?(d=Ad(u*c,u*(f=t?-1:1),s,l),e()):0>f},fitExtent:function(e,t){return id(o,e,t)},fitSize:function(e,t){return ad(o,e,t)},fitWidth:function(e,t){return od(o,e,t)},fitHeight:function(e,t){return ud(o,e,t)}}},mercator:function(){return yd(_d).scale(961/OA)},naturalEarth1:function(){return fd(Td).scale(175.295)},orthographic:function(){return fd(Cd).scale(249.5).clipAngle(90+TA)},stereographic:function(){return fd(Dd).scale(250).clipAngle(142)},transversemercator:function(){var e=yd(Nd),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var UT in BT)Od(UT,BT[UT]);Ld.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},ie(Ld,Ln).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||b_,a=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=Md(e.projection),n.materialize().reflow()):o=i===b_||t.modified(i.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(r,e.pointRadius);return n.visit(o,(function(e){e[a]=r(i(e))})),r.pointRadius(u),n.modifies(a)},Pd.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},ie(Pd,Ln).transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[l]=t[1]):(e[s]=void 0,e[l]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],l=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},zd.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},ie(zd,Ln).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||L("datum"),a=e.as||"shape",o=n.ADD_MOD;return(!r||e.modified())&&(this.value=r=function(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=function(t){return e.context(t),r},r}(Md(e.projection),i,e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(function(e){e[a]=r})),n.modifies(a)},Id.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},ie(Id,Ln).transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)J(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(Te(r[0],n)):t.add.push(ke(n)),r[0]=n,t},ie(Rd,Ln).transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=function(e){var t=Od((e||"mercator").toLowerCase());return t||D("Unrecognized projection type: "+e),t()}(e.type),WT.forEach((function(t){null!=e[t]&&jd(n,t,e[t])}))):WT.forEach((function(t){e.modified(t)&&jd(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&Gd(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var VT=Object.freeze({contour:Sc,geojson:kc,geopath:Ld,geopoint:Pd,geoshape:zd,graticule:Id,projection:Rd}),qT=$d.prototype=Yd.prototype;qT.copy=function(){var e,t,n=new Yd(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Xd(r),n;for(e=[{source:r,target:n._root=[,,,,]}];r=e.pop();)for(var i=0;4>i;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=[,,,,]}):r.target[i]=Xd(t));return n},qT.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Ud(this.cover(t,n),t,n,e)},qT.addAll=function(e){var t,n,r,i,a=e.length,o=Array(a),u=Array(a),s=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,u[n]=i,r<s&&(s=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));for(c<s&&(s=this._x0,c=this._x1),f<l&&(l=this._y0,f=this._y1),this.cover(s,l).cover(c,f),n=0;n<a;++n)Ud(this,o[n],u[n],e[n]);return this},qT.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=_(e))+1,a=(r=_(t))+1;else{if(!(n>e||e>i||r>t||t>a))return this;var o,u,s=i-n,l=this._root;switch(u=(t<(r+a)/2)<<1|e<(n+i)/2){case 0:do{(o=[,,,,])[u]=l,l=o}while(a=r+(s*=2),e>(i=n+s)||t>a);break;case 1:do{(o=[,,,,])[u]=l,l=o}while(a=r+(s*=2),(n=i-s)>e||t>a);break;case 2:do{(o=[,,,,])[u]=l,l=o}while(r=a-(s*=2),e>(i=n+s)||r>t);break;case 3:do{(o=[,,,,])[u]=l,l=o}while(r=a-(s*=2),(n=i-s)>e||r>t)}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},qT.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},qT.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},qT.find=function(e,t,n){var r,i,a,o,u,s,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new Vd(g,c,f,d,h)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,h=t+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>d||(a=s.y0)>h||(o=s.x1)<c||(u=s.y1)<f))if(g.length){var m=(i+o)/2,v=(a+u)/2;p.push(new Vd(g[3],m,v,o,u),new Vd(g[2],i,v,m,u),new Vd(g[1],m,a,o,v),new Vd(g[0],i,a,m,v)),(l=(t>=v)<<1|e>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=s)}else{var _=e-+this._x.call(null,g.data),y=t-+this._y.call(null,g.data),b=_*_+y*y;if(b<n){var w=x(n=b);c=e-w,f=t-w,d=e+w,h=t+w,r=g.data}}return r},qT.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,u,s,l,c,f,d,h=this._root,p=this._x0,x=this._y0,g=this._x1,m=this._y1;if(!h)return this;if(h.length)for(;;){if((l=a>=(u=(p+g)/2))?p=u:g=u,(c=o>=(s=(x+m)/2))?x=s:m=s,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[3&f+1]||t[3&f+2]||t[3&f+3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},qT.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},qT.root=function(){return this._root},qT.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},qT.visit=function(e){var t,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new Vd(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&s.length){var l=(r+a)/2,c=(i+o)/2;(n=s[3])&&u.push(new Vd(n,l,c,a,o)),(n=s[2])&&u.push(new Vd(n,r,c,l,o)),(n=s[1])&&u.push(new Vd(n,l,i,a,c)),(n=s[0])&&u.push(new Vd(n,r,i,l,c))}return this},qT.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Vd(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,u=t.y0,s=t.x1,l=t.y1,c=(o+s)/2,f=(u+l)/2;(a=i[0])&&n.push(new Vd(a,o,u,c,f)),(a=i[1])&&n.push(new Vd(a,c,u,s,f)),(a=i[2])&&n.push(new Vd(a,o,f,c,l)),(a=i[3])&&n.push(new Vd(a,c,f,s,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},qT.x=function(e){return arguments.length?(this._x=e,this):this._x},qT.y=function(e){return arguments.length?(this._y=e,this):this._y};var HT={value:function(){}};th.prototype=eh.prototype={constructor:th,on:function(e,t){var n,r=this._,i=nh(e+"",r),a=-1,o=i.length;if(!(2>arguments.length)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=ih(r[n],e.name,t);else if(null==t)for(n in r)r[n]=ih(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=rh(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new th(e)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,i=Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var $T,YT,XT=0,ZT=0,JT=0,KT=0,QT=0,eC=0,tC="object"==typeof performance&&performance.now?performance:Date,nC="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};uh.prototype=sh.prototype={constructor:uh,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ah():+n)+(null==t?0:+t),this._next||YT===this||(YT?YT._next=this:$T=this,YT=this),this._call=e,this._time=n,fh()},stop:function(){this._call&&(this._call=null,this._time=1/0,fh())}};var rC=h*(3-x(5)),iC={center:function(e,t){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)o+=(i=r[n]).x,u+=i.y;for(o=o/a-e,u=u/a-t,n=0;n<a;++n)(i=r[n]).x-=o,i.y-=u}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},collide:function(e){function t(){function e(e,t,n,r,i){var a=e.data,u=e.r,h=f+u;if(!a)return t>l+h||r<l-h||n>c+h||i<c-h;if(a.index>s.index){var p=l-a.x-a.vx,g=c-a.y-a.vy,m=p*p+g*g;m<h*h&&(0===p&&(m+=(p=Bd())*p),0===g&&(m+=(g=Bd())*g),m=(h-(m=x(m)))/m*o,s.vx+=(p*=m)*(h=(u*=u)/(d+u)),s.vy+=(g*=m)*h,a.vx-=p*(h=1-h),a.vy-=g*h)}}for(var t,r,s,l,c,f,d,h=i.length,p=0;p<u;++p)for(r=$d(i,Zd,Jd).visitAfter(n),t=0;t<h;++t)s=i[t],f=a[s.index],d=f*f,l=s.x+s.vx,c=s.y+s.vy,r.visit(e)}function n(e){if(e.data)return e.r=a[e.data.index];for(var t=e.r=0;4>t;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function r(){if(i){var t,n,r=i.length;for(a=Array(r),t=0;t<r;++t)n=i[t],a[n.index]=+e(n,t,i)}}var i,a,o=1,u=1;return"function"!=typeof e&&(e=Wd(null==e?1:+e)),t.initialize=function(e){i=e,r()},t.iterations=function(e){return arguments.length?(u=+e,t):u},t.strength=function(e){return arguments.length?(o=+e,t):o},t.radius=function(n){return arguments.length?(e="function"==typeof n?n:Wd(+n),r(),t):e},t},nbody:function(){function e(e){var t,u=i.length,s=$d(i,dh,hh).visitAfter(n);for(o=e,t=0;t<u;++t)a=i[t],s.visit(r)}function t(){if(i){var e,t,n=i.length;for(u=Array(n),e=0;e<n;++e)t=i[e],u[t.index]=+s(t,e,i)}}function n(e){var t,n,r,i,a,o=0,s=0;if(e.length){for(r=i=a=0;4>a;++a)(t=e[a])&&(n=m(t.value))&&(o+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{(t=e).x=t.data.x,t.y=t.data.y;do{o+=u[t.data.index]}while(t=t.next)}e.value=o}function r(e,t,n,r){if(!e.value)return!0;var i=e.x-a.x,s=e.y-a.y,d=r-t,h=i*i+s*s;if(d*d/f<h)return h<c&&(0===i&&(h+=(i=Bd())*i),0===s&&(h+=(s=Bd())*s),h<l&&(h=x(l*h)),a.vx+=i*e.value*o/h,a.vy+=s*e.value*o/h),!0;if(!(e.length||h>=c)){(e.data!==a||e.next)&&(0===i&&(h+=(i=Bd())*i),0===s&&(h+=(s=Bd())*s),h<l&&(h=x(l*h)));do{e.data!==a&&(d=u[e.data.index]*o/h,a.vx+=i*d,a.vy+=s*d)}while(e=e.next)}}var i,a,o,u,s=Wd(-30),l=1,c=1/0,f=.81;return e.initialize=function(e){i=e,t()},e.strength=function(n){return arguments.length?(s="function"==typeof n?n:Wd(+n),t(),e):s},e.distanceMin=function(t){return arguments.length?(l=t*t,e):x(l)},e.distanceMax=function(t){return arguments.length?(c=t*t,e):x(c)},e.theta=function(t){return arguments.length?(f=t*t,e):x(f)},e},link:function(e){function t(t){for(var n=0,r=e.length;n<h;++n)for(var i,u,s,c,f,d,p,g=0;g<r;++g)u=(i=e[g]).source,c=(s=i.target).x+s.vx-u.x-u.vx||Bd(),f=s.y+s.vy-u.y-u.vy||Bd(),c*=d=((d=x(c*c+f*f))-o[g])/d*t*a[g],f*=d,s.vx-=c*(p=l[g]),s.vy-=f*p,u.vx+=c*(p=1-p),u.vy+=f*p}function n(){if(u){var t,n,f=u.length,d=e.length,h=Fu(u,c);for(t=0,s=Array(f);t<d;++t)(n=e[t]).index=t,"object"!=typeof n.source&&(n.source=Qd(h,n.source)),"object"!=typeof n.target&&(n.target=Qd(h,n.target)),s[n.source.index]=(s[n.source.index]||0)+1,s[n.target.index]=(s[n.target.index]||0)+1;for(t=0,l=Array(d);t<d;++t)n=e[t],l[t]=s[n.source.index]/(s[n.source.index]+s[n.target.index]);a=Array(d),r(),o=Array(d),i()}}function r(){if(u)for(var t=0,n=e.length;t<n;++t)a[t]=+f(e[t],t,e)}function i(){if(u)for(var t=0,n=e.length;t<n;++t)o[t]=+d(e[t],t,e)}var a,o,u,s,l,c=Kd,f=function(e){return 1/p(s[e.source.index],s[e.target.index])},d=Wd(30),h=1;return null==e&&(e=[]),t.initialize=function(e){u=e,n()},t.links=function(r){return arguments.length?(e=r,n(),t):e},t.id=function(e){return arguments.length?(c=e,t):c},t.iterations=function(e){return arguments.length?(h=+e,t):h},t.strength=function(e){return arguments.length?(f="function"==typeof e?e:Wd(+e),r(),t):f},t.distance=function(e){return arguments.length?(d="function"==typeof e?e:Wd(+e),i(),t):d},t},x:function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)(t=r[n]).vx+=(a[n]-t.x)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=Array(n),a=Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=Wd(.1);return"function"!=typeof e&&(e=Wd(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:Wd(+e),n(),t):o},t.x=function(r){return arguments.length?(e="function"==typeof r?r:Wd(+r),n(),t):e},t},y:function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)(t=r[n]).vy+=(a[n]-t.y)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=Array(n),a=Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=Wd(.1);return"function"!=typeof e&&(e=Wd(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:Wd(+e),n(),t):o},t.y=function(r){return arguments.length?(e="function"==typeof r?r:Wd(+r),n(),t):e},t}},aC=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],oC=["static","iterations"],uC=["x","y","vx","vy"];ph.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:uC}]};var sC=ie(ph,Ln);sC.transform=function(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(aC),a=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&gh(n,e,0,t)):(this.value=n=xh(t.source,e),n.on("tick",function(e,t){return function(){e.touch(t).run()}}(t.dataflow,this)),!e.static&&(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(oC)||t.changed()&&e.restart)if(n.alpha(y(n.alpha(),e.alpha||1)).alphaDecay(1-S(n.alphaMin(),1/a)),e.static)for(n.stop();0<=--a;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},sC.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if("forces"===(n=i[a]).name&&"link"===n.op._argval.force)for(var u,s=n.op._argops,l=0,c=s.length;l<c;++l)if("links"===s[l].name&&(u=s[l].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(uC)};var lC=Object.freeze({force:ph});Dh.prototype=Eh.prototype={constructor:Dh,count:function(){return this.eachAfter(kh)},each:function(e){var t,n,r,i,a=this,o=[a];do{for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;0<=n;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;0<=--i;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Eh(this).eachBefore(Th)}};var cC=Array.prototype.slice,fC={depth:-1},dC={};op.prototype=Object.create(Dh.prototype);var hC=(1+x(5))/2,pC=function e(t){function n(e,n,r,i,a){sp(t,e,n,r,i,a)}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(hC),xC=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,l,c,f=-1,d=o.length,h=e.value;++f<d;){for(s=(u=o[f]).children,l=u.value=0,c=s.length;l<c;++l)u.value+=s[l].value;u.dice?Jh(u,n,r,i,r+=(a-r)*u.value/h):up(u,n,r,n+=(i-n)*u.value/h,a),h-=u.value}else e._squarify=o=sp(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(hC);lp.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},ie(lp,Ln).transform=function(e,t){t.source||D("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each((function(e){e.children&&be(e.data)&&i.rem.push(e.data)})),this.value=a=Eh({values:Z(e.keys).reduce((function(e,t){return e.key(t),e}),Ou()).entries(i.source)},cp),n&&a.each((function(e){e.children&&(e=ke(e.data),i.add.push(e),i.source.push(e))})),yh(a,we,we)),i.source.root=a,i},ie(fp,Ln).transform=function(e,t){t.source&&t.source.root||D(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),function(e,t,n){for(var r,i=0,a=t.length;i<a;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1===e.separation?S_:dp);try{this.value=n(i)}catch(e){D(e)}return i.each((function(e){!function(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,a)})),t.reflow(e.modified()).modifies(a).modifies("leaf")};var gC=["x","y","r","depth","children"];hp.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gC.length,default:gC}]};var mC=ie(hp,fp);mC.layout=function(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore($h(t)).eachAfter(Yh(i,.5)).eachBefore(Xh(1)):e.eachBefore($h(Hh)).eachAfter(Yh(Vh,1)).eachAfter(Yh(i,e.r/p(n,r))).eachBefore(Xh(p(n,r)/(2*e.r))),e}var t=null,n=1,r=1,i=Vh;return e.radius=function(n){return arguments.length?(t=Bh(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:qh(+t),e):i},e},mC.params=["size","padding"],mC.fields=gC;var vC=["x0","y0","x1","y1","depth","children"];pp.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:vC.length,default:vC}]};var _C=ie(pp,fp);_C.layout=function(){function e(e){var a=e.height+1;return e.x0=e.y0=r,e.x1=t,e.y1=n/a,e.eachBefore(function(e,t){return function(n){n.children&&Jh(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var i=n.x0,a=n.y0,o=n.x1-r,u=n.y1-r;o<i&&(i=o=(i+o)/2),u<a&&(a=u=(a+u)/2),n.x0=i,n.y0=a,n.x1=o,n.y1=u}}(n,a)),i&&e.eachBefore(Zh),e}var t=1,n=1,r=0,i=!1;return e.round=function(t){return arguments.length?(i=!!t,e):i},e.size=function(r){return arguments.length?(t=+r[0],n=+r[1],e):[t,n]},e.padding=function(t){return arguments.length?(r=+t,e):r},e},_C.params=["size","round","padding"],_C.fields=vC,xp.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},ie(xp,Ln).transform=function(e,t){t.source||D("Stratify transform requires an upstream data source.");var n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),a=!this.value||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?yh(ep().id(e.key).parentId(e.parentKey)(i.source),e.key,k_):yh(ep()([{}]),e.key,e.key)),i.source.root=this.value=n,i};var yC={tidy:function(){function e(e){var s=function(e){for(var t,n,r,i,a,o=new op(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=Array(a=r.length),i=a-1;0<=i;--i)u.push(n=t.children[i]=new op(r[i],i)),n.parent=t;return(o.parent=new op(null,0)).children=[o],o}(e);if(s.eachAfter(t),s.parent.m=-s.z,s.eachBefore(n),u)e.eachBefore(r);else{var l=e,c=e,f=e;e.eachBefore((function(e){e.x<l.x&&(l=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)}));var d=l===c?1:i(l,c)/2,h=d-l.x,p=a/(c.x+d+h),x=o/(f.depth||1);e.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*x}))}return e}function t(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;0<=--a;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+i(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+i(e._,r._));e.parent.A=function(e,t,n){if(t){for(var r,a=e,o=e,u=t,s=a.parent.children[0],l=a.m,c=o.m,f=u.m,d=s.m;u=rp(u),a=np(a),u&&a;)s=np(s),(o=rp(o)).a=e,0<(r=u.z+f-a.z-l+i(u._,a._))&&(ip(ap(u,e,n),e,r),l+=r,c+=r),f+=u.m,l+=a.m,d+=s.m,c+=o.m;u&&!rp(o)&&(o.t=u,o.m+=f-c),a&&!np(s)&&(s.t=a,s.m+=l-d,n=e)}return n}(e,r,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e){e.x*=a,e.y=e.depth*o}var i=tp,a=1,o=1,u=null;return e.separation=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(u=!1,a=+t[0],o=+t[1],e):u?null:[a,o]},e.nodeSize=function(t){return arguments.length?(u=!0,a=+t[0],o=+t[1],e):u?[a,o]:null},e},cluster:function(){function e(e){var a,o=0;e.eachAfter((function(e){var n=e.children;n?(e.x=function(e){return e.reduce(wh,0)/e.length}(n),e.y=function(e){return 1+e.reduce(Sh,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var u=function(e){for(var t;t=e.children;)e=t[0];return e}(e),s=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(e),l=u.x-t(u,s)/2,c=s.x+t(s,u)/2;return e.eachAfter(i?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*r}:function(t){t.x=(t.x-l)/(c-l)*n,t.y=(1-(e.y?t.y/e.y:1))*r})}var t=bh,n=1,r=1,i=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(i=!1,n=+t[0],r=+t[1],e):i?null:[n,r]},e.nodeSize=function(t){return arguments.length?(i=!0,n=+t[0],r=+t[1],e):i?[n,r]:null},e}},bC=["x","y","depth","children"];gp.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:bC.length,default:bC}]};var wC=ie(gp,fp);wC.layout=function(e){var t=e||"tidy";return yC.hasOwnProperty(t)?yC[t]():void D("Unrecognized Tree layout method: "+t)},wC.params=["size","nodeSize"],wC.fields=bC,mp.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},ie(mp,Ln).transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||D("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(function(e){a[we(e)]=1})),r.each((function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[we(t)]&&a[we(n)]&&i.add.push(ke({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(function(e){a[we(e)]=1})),n.forEach((function(e){(a[we(e.source)]||a[we(e.target)])&&i.mod.push(e)}))),i};var SC={binary:function(e,t,n,r,i){var a,o,u=e.children,s=u.length,l=Array(s+1);for(l[0]=o=a=0;a<s;++a)l[a+1]=o+=u[a].value;!function e(t,n,r,i,a,o,s){if(t>=n-1){var c=u[t];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=s)}for(var f=l[t],d=r/2+f,h=t+1,p=n-1;h<p;){var x=h+p>>>1;l[x]<d?h=x+1:p=x}d-l[h-1]<l[h]-d&&t+1<h&&--h;var g=l[h]-f,m=r-g;if(o-i>s-a){var v=(i*m+o*g)/r;e(t,h,g,i,a,v,s),e(h,n,m,v,a,o,s)}else{var _=(a*m+s*g)/r;e(t,h,g,i,a,o,_),e(h,n,m,i,_,o,s)}}(0,s,e.value,t,n,r,i)},dice:Jh,slice:up,slicedice:function(e,t,n,r,i){(1&e.depth?up:Jh)(e,t,n,r,i)},squarify:pC,resquarify:xC},kC=["x0","y0","x1","y1","depth","children"];vp.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kC.length,default:kC}]};var EC=ie(vp,fp);EC.layout=function(){var e=function(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=a,e.eachBefore(t),o=[0],r&&e.eachBefore(Zh),e}function t(e){var t=o[e.depth],r=e.x0+t,i=e.y0+t,a=e.x1-t,d=e.y1-t;a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),e.x0=r,e.y0=i,e.x1=a,e.y1=d,e.children&&(t=o[e.depth+1]=u(e)/2,r+=f(e)-t,i+=s(e)-t,(a-=l(e)-t)<r&&(r=a=(r+a)/2),(d-=c(e)-t)<i&&(i=d=(i+d)/2),n(e,r,i,a,d))}var n=pC,r=!1,i=1,a=1,o=[0],u=Vh,s=Vh,l=Vh,c=Vh,f=Vh;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(i=+t[0],a=+t[1],e):[i,a]},e.tile=function(t){return arguments.length?(n=Uh(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:qh(+t),e):u},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:qh(+t),e):s},e.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:qh(+t),e):l},e.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:qh(+t),e):c},e.paddingLeft=function(t){return arguments.length?(f="function"==typeof t?t:qh(+t),e):f},e}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){SC.hasOwnProperty(t)?e.tile(SC[t]):D("Unrecognized Treemap layout method: "+t)},e},EC.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],EC.fields=kC;var AC=Object.freeze({nest:lp,pack:hp,partition:pp,stratify:xp,tree:gp,treelinks:mp,treemap:vp});wp.prototype={constructor:wp,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Ap(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(kp(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ep(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Ep(this,n),n=(e=n).U),n.C=!1,r.C=!0,kp(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?Ap(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n===o?(n.U=i,i=n,e=n.R):(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,kp(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ep(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,kp(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Ep(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,kp(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Ep(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var TC,CC,DC,NC,FC,OC=[],MC=[],LC=1e-6,PC=1e-12;$p.prototype={constructor:$p,polygons:function(){var e=this.edges;return this.cells.map((function(t){var n=t.halfedges.map((function(n){return Mp(t,e[n])}));return n.data=t.site.data,n}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u=n.site,s=-1,l=t[i[a-1]],c=l.left===u?l.right:l.left;++s<a;)o=c,c=(l=t[i[s]]).left===u?l.right:l.left,o&&c&&r<o.index&&r<c.index&&0>qp(u,o,c)&&e.push([u.data,o.data,c.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;var s=e-i.site[0],l=t-i.site[1],c=s*s+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=e-u[0],l=t-u[1],f=s*s+l*l;f<c&&(c=f,o=u.index)}}))}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}},Yp.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var zC=ie(Yp,Ln),IC=[[-1e5,-1e5],[1e5,1e5]];zC.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=function(){function e(e){return new $p(e.map((function(r,i){var a=[v(t(r,i,e)/LC)*LC,v(n(r,i,e)/LC)*LC];return a.index=i,a.data=r,a})),r)}var t=yp,n=bp,r=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:_p(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:_p(+t),e):n},e.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},e.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],e):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},e}().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||IC),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var RC=Object.freeze({voronoi:Yp}),GC=h/180,jC={archimedean:ex,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=0>e?-1:1;switch(3&x(1+4*i*e)-i){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},WC=["x","y","font","fontSize","fontStyle","fontWeight","angle"],BC=["text","font","rotate","fontSize","fontStyle","fontWeight"];nx.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:WC}]},ie(nx,Ln).transform=function(t,n){var r=t.modified();if(r||n.changed(n.ADD_REM)||BC.some((function(e){var r=t[e];return J(r)&&n.modified(r.fields)}))){var i,a=n.materialize(n.SOURCE).source,o=this.value,u=t.as||WC,s=t.fontSize||14;if(J(s)?i=t.fontSizeRange:s=Q(s),i){var l=s,c=pl("sqrt")().domain(function(e,t){for(var n,r=1/0,i=-1/0,a=0,o=t.length;a<o;++a)(n=e(t[a]))<r&&(r=n),n>i&&(i=n);return[r,i]}(l,a)).range(i);s=function(e){return c(l(e))}}a.forEach((function(e){e[u[0]]=NaN,e[u[1]]=NaN,e[u[3]]=0}));for(var f,d,h=o.words(a).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(s).random(e.random).layout(),p=o.size(),x=p[0]>>1,g=p[1]>>1,m=0,v=h.length;m<v;++m)(d=(f=h[m]).datum)[u[0]]=f.x+x,d[u[1]]=f.y+g,d[u[2]]=f.font,d[u[3]]=f.size,d[u[4]]=f.style,d[u[5]]=f.weight,d[u[6]]=f.rotate;return n.reflow(r).modifies(u)}};var UC=Object.freeze({wordcloud:nx});lx.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var VC=ie(lx,Ln);VC.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some((function(e){return t.modified(e.fields)}))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},VC.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,l=0;l<s;++l)r=o[n=i[l].fname]||(o[n]=sx()),u.push(ux(r,l,a[l]));return this.eval(e,t)},VC.reinit=function(e,t){var n,r,i,a,o,u,s,l,c,f=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,x=this._dims,g=this.value,m=g.curr(),v=g.prev(),_=g.all(),y=f.rem=f.add,b=f.mod,w=h.length,S={};if(v.set(m),t.rem.length&&(o=this.remove(e,t,f)),t.add.length&&g.add(t.add),t.mod.length)for(u={},s=0,l=(a=t.mod).length;s<l;++s)u[a[s]._index]=1;for(s=0;s<w;++s)c=d[s],(!x[s]||e.modified("fields",s)||t.modified(c.fields))&&(!(n=S[i=c.fname])&&(p[i]=r=sx(),S[i]=n=r.insert(c,t.source,0)),x[s]=ux(r,s,h[s]).onAdd(n,m));for(s=0,l=g.data().length;s<l;++s)o[s]||(v[s]===m[s]?u[s]&&m[s]!==_&&b.push(s):y.push(s));return g.mask=(1<<w)-1,f},VC.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},VC.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,l=this._indices,c=e.fields,f={},d=n.add,h=u.size(),p=h+o.length,x=s.length;u.resize(p,x),u.add(o);var g=u.curr(),m=u.prev(),v=u.all();for(r=0;r<x;++r)a=f[i=c[r].fname]||(f[i]=l[i].insert(c[r],o,h)),s[r].onAdd(a,g);for(;h<p;++h)m[h]=v,g[h]!==v&&d.push(h)},VC.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),l=e.mod;for(n=0,r=l.length;n<r;++n)u[i=l[n]._index]!==s&&a.push(i)},VC.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,l=s.curr(),c=s.prev(),f=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)d[a=p[r]._index]=1,c[a]=o=l[a],l[a]=f,o!==f&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},VC.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter((function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)}))},VC.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,l=0;for(n.filters=0,i=0;i<s;++i)e.modified("query",i)&&(r=i,++l);if(1===l)l=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,l=0;i<s;++i)e.modified("query",i)&&(l|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return l},VC.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),l=u.curr(),c=u.prev(),f=e.index(),d=e.bisect(e.range),h=e.bisect(t),x=h[0],g=h[1],m=d[0],v=d[1],_=e.one;if(x<m)for(i=x,a=p(m,g);i<a;++i)s[o=f[i]]!==n&&(c[o]=l[o],s[o]=n,r.push(o)),l[o]^=_;else if(x>m)for(i=m,a=p(x,v);i<a;++i)s[o=f[i]]!==n&&(c[o]=l[o],s[o]=n,r.push(o)),l[o]^=_;if(g>v)for(i=y(x,v),a=g;i<a;++i)s[o=f[i]]!==n&&(c[o]=l[o],s[o]=n,r.push(o)),l[o]^=_;else if(g<v)for(i=y(m,g),a=v;i<a;++i)s[o=f[i]]!==n&&(c[o]=l[o],s[o]=n,r.push(o)),l[o]^=_;e.range=t.slice()},VC.incrementOne=function(e,t,n,r){var i,a,o,u=this.value.curr(),s=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],x=l[1],g=e.one;if(f<h)for(i=f,a=p(h,d);i<a;++i)u[o=s[i]]^=g,n.push(o);else if(f>h)for(i=h,a=p(f,x);i<a;++i)u[o=s[i]]^=g,r.push(o);if(d>x)for(i=y(f,x),a=d;i<a;++i)u[o=s[i]]^=g,n.push(o);else if(d<x)for(i=y(h,d),a=x;i<a;++i)u[o=s[i]]^=g,r.push(o);e.range=t.slice()},cx.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},ie(cx,Ln).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),l=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,l),i&i-1?(a.filter(a.ADD,(function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null})),a.filter(a.REM,(function(e){var t=u[e]&n;return!t||t^t^s[e]&n?null:o[e]}))):(a.filter(a.ADD,l),a.filter(a.REM,(function(e){return(u[e]&n)===i?o[e]:null}))),a.filter(a.SOURCE,(function(e){return l(e._index)}))};var qC,HC,$C,YC,XC,ZC=Object.freeze({crossfilter:lx,resolvefilter:cx}),JC={trap:!1},KC=["value","update","init","react","bind"];zx.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1},(qC={})[1]="Boolean",qC[2]="<end>",qC[3]="Identifier",qC[4]="Keyword",qC[5]="Null",qC[6]="Numeric",qC[7]="Punctuator",qC[8]="String",qC[9]="RegularExpression";var QC=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,eD=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,tD={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},nD={if:1,this:1},rD={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},iD={},aD=new Date(2e3,0,1),oD=void 0!==window&&window||null,uD=Pg("area",(function(e){return ZA.reset(),Lc(e,JA),2*ZA})),sD=Pg("bounds",(function(e){var t,n,r,i,a,o,u;if(rA=nA=-(eA=tA=1/0),sA=[],Lc(e,QA),n=sA.length){for(sA.sort(ef),t=1,a=[r=sA[0]];t<n;++t)tf(r,(i=sA[t])[0])||tf(r,i[1])?(Qc(r[0],i[1])>Qc(r[0],r[1])&&(r[1]=i[1]),Qc(i[0],r[1])>Qc(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)i=a[t],(u=Qc(r[1],i[0]))>o&&(o=u,eA=i[0],nA=r[1])}return sA=lA=null,eA===1/0||tA==1/0?[[NaN,NaN],[NaN,NaN]]:[[eA,tA],[nA,rA]]})),lD=Pg("centroid",(function(e){cA=fA=dA=hA=pA=xA=gA=mA=vA=_A=yA=0,Lc(e,eT);var t=vA,n=_A,r=yA,i=t*t+n*n+r*r;return i<CA&&(t=xA,n=gA,r=mA,fA<TA&&(t=dA,n=hA,r=pA),(i=t*t+n*n+r*r)<CA)?[NaN,NaN]:[IA(n,t)*MA,Dc(r/qA(i))*MA]})),cD={},fD={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)0>e.indexOf(t[n])&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((function(e){return 0<=t.indexOf(e)})):t},R_union:function(e,t){var n=R(t[0]),r=R(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=R(t[0]),r=R(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}},dD={random:function(){return e.random()},isArray:v_,isBoolean:ae,isDate:oe,isNumber:ue,isObject:F,isRegExp:se,isString:O,isTuple:be,toBoolean:he,toDate:xe,toNumber:R,toString:ge,pad:de,peek:I,truncate:ve,rgb:Hu,lab:ts,hcl:ss,hsl:Ju,sequence:Xn,format:function(e,t){return Tg("format",ZS,t)(e)},utcFormat:function(e,t){return Tg("utcFormat",fy,t)(e)},utcParse:function(e,t){return Tg("utcParse",dy,t)(e)},timeFormat:Cg,timeParse:function(e,t){return Tg("timeParse",cy,t)(e)},monthFormat:function(e){return Dg(e,1,"%B")},monthAbbrevFormat:function(e){return Dg(e,1,"%b")},dayFormat:function(e){return Dg(0,2+e,"%A")},dayAbbrevFormat:function(e){return Dg(0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},warn:function(){return Fg(this.context.dataflow,"warn",arguments)},info:function(){return Fg(this.context.dataflow,"info",arguments)},debug:function(){return Fg(this.context.dataflow,"debug",arguments)},extent:function(e){var t,n,r,i,a=0;if(e&&(t=e.length)){for(n=e[a];null==n||n!=n;n=e[++a]);for(r=i=n;a<t;++a)null!=(n=e[a])&&(n<r&&(r=n),n>i&&(i=n))}return[r,i]},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},clampRange:function(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-t?[t,n]:[i=p(y(i,t),n-r),i+r]},pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return x(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return u(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){return oD?oD.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return oD?[oD.innerWidth,oD.innerHeight]:[void 0,void 0]},span:function(e){return e[e.length-1]-e[0]||0},merge:function(){var e=[].slice.call(arguments);return e.unshift({}),te.apply(null,e)},flush:function(e,t,n,r,i,a){if(!n&&0!==n)return a;var o,u,s=e[0],l=I(e),c=+n;return l<s&&(o=s,s=l,l=o),(o=m(t-s))<(u=m(l-t))&&o<=c?r:u<=c?i:a},bandspace:function(e,t,n){return wu(e||0,t||0,n||0)},inrange:Ng,setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(k_).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?ua(n,t=t||ia(e)):e}},panLinear:U,panLog:V,panPow:q,zoomLinear:$,zoomLog:Y,zoomPow:X,encode:function(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0===n?e:n},modify:function(e,t,n,r,i,a){var o,u,s=this.context.dataflow,l=this.context.data[e],c=l.input,f=l.changes,d=s.stamp();if(!1===s._trigger||!(c.value.length||t||r))return 0;if((!f||f.stamp<d)&&(l.changes=f=s.changeset(),f.stamp=d,s.runAfter((function(){l.modified=!0,s.pulse(c,f).run()}),!0,1)),n&&(o=!0===n?k_:v_(n)||be(n)?n:Wg(n),f.remove(o)),t&&f.insert(t),r&&(o=Wg(r),c.value.some(o)?f.remove(o):f.insert(r)),i)for(u in a)f.modify(i,u,a[u]);return 1}},hD=["view","item","group","xy","x","y"],pD={};em("bandwidth",(function(e,t){var n=Og(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),Lg),em("copy",(function(e,t){var n=Og(e,(t||this).context);return n?n.copy():void 0}),Lg),em("domain",(function(e,t){var n=Og(e,(t||this).context);return n?n.domain():[]}),Lg),em("range",(function(e,t){var n=Og(e,(t||this).context);return n&&n.range?n.range():[]}),Lg),em("invert",(function(e,t,n){var r=Og(e,(n||this).context);return r?v_(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),Lg),em("scale",(function(e,t,n){var r=Og(e,(n||this).context);return r?r(t):void 0}),Lg),em("gradient",(function(e,t,n,r,i){e=Og(e,(i||this).context);var a=oi(t,n),o=e.domain(),u=o[0],s=I(o),l=gl(e,u,s);e.ticks&&(u!==(o=e.ticks(+r||15))[0]&&o.unshift(u),s!==I(o)&&o.push(s));for(var c=0,f=o.length;c<f;++c)a.stop(l(o[c]),e(o[c]));return a}),Lg),em("geoArea",uD,Lg),em("geoBounds",sD,Lg),em("geoCentroid",lD,Lg),em("geoShape",(function(e,t,n){var r=Og(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),Lg),em("indata",(function(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){"Literal"!==t[0].type&&D("First argument to indata must be a string literal."),"Literal"!==t[1].type&&D("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,o="@"+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))})),em("data",zg,Ig),em("treePath",(function(e,t,n){var r=Gg(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(Rg):void 0}),Ig),em("treeAncestors",(function(e,t){var n=Gg(e,this)[t];return n?n.ancestors().map(Rg):void 0}),Ig),em("vlSelectionTest",(function(e,t,n){for(var r,i,a,o,u,s=this.context.data[e],l=s?s.values.value:[],c=s?s["index:unit"]&&s["index:unit"].value:void 0,f="intersect"===n,d=l.length,h=0;h<d;++h)if(r=l[h],c&&f){if(-1===(a=(i=i||{})[o=r.unit]||0))continue;if(u=Bg(t,r),i[o]=u?-1:++a,u&&1===c.size)return!0;if(!u&&a===c.get(o).count)return!1}else if(f^(u=Bg(t,r)))return u;return d&&f}),Ug),em("vlSelectionResolve",(function(e,t){for(var n,r,i,a,o,u,s,l,c,f,d,h=this.context.data[e],p=h?h.values.value:[],x={},g={},m=p.length,v=0;v<m;++v)for(a=(n=p[v]).unit,r=n.fields,i=n.values,f=0,d=r.length;f<d;++f)o=r[f],s=(u=x[o.field]||(x[o.field]={}))[a]||(u[a]=[]),g[o.field]=l=o.type.charAt(0),c=fD[l+"_union"],u[a]=c(s,Z(i[f]));return t=t||"union",Object.keys(x).forEach((function(e){x[e]=Object.keys(x[e]).map((function(t){return x[e][t]})).reduce((function(n,r){return void 0===n?r:fD[g[e]+"_"+t](n,r)}))})),x}),Ug),em("vlSingle",$g,Ig),em("vlSingleDomain",Xg,Ig),em("vlMulti",$g,Yg),em("vlMultiDomain",Xg,Yg),em("vlInterval",(function(e,t,n){return Hg.call(this,e,t,n,qg)}),Ig),em("vlIntervalDomain",(function(e,t,n,r){var i,a,o,u,s,l=this.context.data[e],c=l?l.values.value:[],f=c[0],d=0;if(f){for(i=f.intervals.length;d<i;++d)if(a=f.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=2<a.extent.length;break}return u=c.reduce((function(e,t){var n=t.intervals[o].extent,r=s?n.map((function(e){return{unit:t.unit,value:e}})):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e}),[]),s?Zg(u,r):Jg(u,r)}}),Ig);var xD,gD,mD={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+M("$"+e)+"]"},functions:function(e){var t=Ag(e);for(var n in hD.forEach((function(e){t[e]="event.vega."+e})),dD)t[n]="this."+n;return t},constants:rD,visitors:pD},vD=function(e){function t(e){if(O(e))return e;var t=h[e.type];return null==t&&D("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},n}var r=(e=e||{}).whitelist?me(e.whitelist):{},i=e.blacklist?me(e.blacklist):{},a=e.constants||rD,o=(e.functions||Ag)(t),u=e.globalvar,s=e.fieldvar,l={},c={},f=0,d=J(u)?u:function(e){return u+'["'+e+'"]'},h={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return 0<f?t:i.hasOwnProperty(t)?D("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(l[t]=1,d(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(f+=1);var i=t(e.property);return r===s&&(c[i]=1),n&&(f-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&D("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=o.hasOwnProperty(n)&&o[n];return i||D("Unrecognized function: "+n),J(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){f+=1;var n=t(e.key);return f-=1,n+":"+t(e.value)}};return n.functions=o,n.constants=a,n}(mD),_D={$tupleid:1,toString:function(){return":_tupleid_:"}},yD=om("key"),bD="view",wD=/[[\]{}]/,SD={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},kD=wm("aggregate"),ED=wm("axisticks"),AD=wm("bound"),TD=wm("collect"),CD=wm("compare"),DD=wm("datajoin"),ND=wm("encode"),FD=wm("expression"),OD=wm("facet"),MD=wm("field"),LD=wm("key"),PD=wm("legendentries"),zD=wm("load"),ID=wm("mark"),RD=wm("multiextent"),GD=wm("multivalues"),jD=wm("overlap"),WD=wm("params"),BD=wm("prefacet"),UD=wm("projection"),VD=wm("proxy"),qD=wm("relay"),HD=wm("render"),$D=wm("scale"),YD=wm("sieve"),XD=wm("sortitems"),ZD=wm("viewlayout"),JD=wm("values"),KD=0,QD=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],eN=me(QD),tN=me(QD.slice(4,9)),nN=me(QD.slice(9)),rN=me(QD.slice(1,6)),iN=["size","shape","fill","stroke","strokeDash","opacity"],aN={name:1,interactive:1},oN=me(["rule"]),uN=me(["group","image","rect"]),sN={value:0};Ev.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=am(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new Ev(e,i,o,a,u)};var lN=Ev.prototype;lN.countsRef=function(e,t,n){var r,i,a,o=this,u=o.counts||(o.counts={}),s=Av(t);return null!=s&&(e=o.scope,r=u[s]),r?n&&n.field&&Tv(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:am(o.output)},n&&n.field&&Tv(e,a,n),i=e.add(kD(a)),r=e.add(TD({pulse:am(i)})),r={agg:i,ref:am(r)},null!=s&&(u[s]=r)),r.ref},lN.tuplesRef=function(){return am(this.values)},lN.extentRef=function(e,t){return Cv(e,this,"extent","extent",t,!1)},lN.domainRef=function(e,t){return Cv(e,this,"domain","values",t,!1)},lN.valuesRef=function(e,t,n){return Cv(e,this,"vals","values",t,n||!0)},lN.lookupRef=function(e,t){return Cv(e,this,"lookup","tupleindex",t,!1)},lN.indataRef=function(e,t){return Cv(e,this,"indata","tupleindex",t,!0,!0)};var cN=Mv(M("left"),M("right"),M("center")),fN=Mv('+(item.orient==="right")','+(item.orient!=="left")',"0.5"),dN=me(["width","height","padding","autosize"]),hN=Uv.prototype=Vv.prototype;hN.fork=function(){return new Vv(this)},hN.isSubscope=function(){return 0<this._subid},hN.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},hN.id=function(){return(this._subid?this._subid+":":0)+this._id++},hN.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((function(t){t.$ref=e.id})),e.refs=null),e},hN.proxy=function(e){var t=e instanceof nm?am(e):e;return this.add(VD({value:t}))},hN.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},hN.addUpdate=function(e){return this.updates.push(e),e},hN.finish=function(){function e(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data)for(var r in e((n=this.data[t]).input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[r],t,"index:"+r);return this},hN.pushState=function(e,t,n){this._encode.push(am(this.add(YD({pulse:e})))),this._parent.push(t),this._lookup.push(n?am(this.proxy(n)):null),this._markpath.push(-1)},hN.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},hN.parent=function(){return I(this._parent)},hN.encode=function(){return I(this._encode)},hN.lookup=function(){return I(this._lookup)},hN.markpath=function(){var e=this._markpath;return++e[e.length-1]},hN.fieldRef=function(e,t){if(O(e))return om(e,t);e.signal||D("Unsupported field reference: "+M(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=am(this.add(MD(n)))),i},hN.compareRef=function(e,t){function n(e){return lm(e)?(i=!0,r.signalRef(e.signal)):e}var r=this,i=!1,a=Z(e.field).map(n),o=Z(e.order).map(n);return t&&a.push(_D),i?am(this.add(CD({fields:a,orders:o}))):um(a,o)},hN.keyRef=function(e,t){var n=this.signals,r=!1;return e=Z(e).map((function(e){return lm(e)?(r=!0,am(n[e.signal])):e})),r?am(this.add(LD({fields:e,flat:t}))):function(e,t){var n={$key:e};return t&&(n.$flat=!0),n}(e,t)},hN.sortRef=function(e){if(!e)return e;var t=[sm(e.op,e.field),_D],n=e.order||"ascending";return n.signal?am(this.add(CD({fields:t,orders:[n=this.signalRef(n.signal),n]}))):um(t,[n,n])},hN.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hN.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&D("Duplicate signal name: "+M(e));var n=t instanceof nm?t:this.add(im(t));return this.signals[e]=n},hN.getSignal=function(e){return this.signals[e]||D("Unrecognized signal name: "+M(e)),this.signals[e]},hN.signalRef=function(e){return this.signals[e]?am(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(im(null))),am(this.lambdas[e]))},hN.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=tm(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},hN.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},hN.objectProperty=function(e){return e&&F(e)?this.signalRef(e.signal||qv(e)):e},hN.exprRef=function(e,t){var n={expr:tm(e,this)};return t&&(n.expr.$name=t),am(this.add(FD(n)))},hN.addBinding=function(e,t){this.bindings||D("Nested signals do not support binding: "+M(e)),this.bindings.push(te({signal:e},t))},hN.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&D("Duplicate scale or projection name: "+M(e)),this.scales[e]=this.add(t)},hN.addScale=function(e,t){this.addScaleProj(e,$D(t))},hN.addProjection=function(e,t){this.addScaleProj(e,UD(t))},hN.getScale=function(e){return this.scales[e]||D("Unrecognized scale name: "+M(e)),this.scales[e]},hN.projectionRef=hN.scaleRef=function(e){return am(this.getScale(e))},hN.projectionType=hN.scaleType=function(e){return this.getScale(e).params.type},hN.addData=function(e,t){return this.data.hasOwnProperty(e)&&D("Duplicate data set name: "+M(e)),this.data[e]=t},hN.getData=function(e){return this.data[e]||D("Undefined data set name: "+M(e)),this.data[e]},hN.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&D("Duplicate data set name: "+M(e)),this.addData(e,Ev.fromEntries(this,t))};var pN=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||D("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=le(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t,n){e.$params&&Jv(e.$params,t,n);var r="e:"+e.$expr+"_"+e.$name;return t.fn[r]||(t.fn[r]=A(function(e,t){return Yv(["datum","_"],e,t)}(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=L(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n,r,i=e.$encode,a={};for(n in i)r=i[n],a[n]=A(Zv(r.$expr,t),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=Z(e.$compare).map((function(e){return e&&e.$tupleid?we:e}));return t.fn[n]||(t.fn[n]=K(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,i){var a=n_(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}},{key:"$tupleid",parse:function(){return we}}],xN={skip:!0};i_.prototype=a_.prototype={fork:function(){var e=new a_(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),function(e){return"collect"===Qv(e)}(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$load?r.get(n.$load.$ref).target=t:n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push((function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)}))}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach((function(e){n[e]=t}))},resolve:function(){return(this.unresolved||[]).forEach((function(e){e()})),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[Qv(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((function(t){return t.getState(e)}))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((function(e){n.update(t.signals[e],i[e],xN)})),Object.keys(r||{}).forEach((function(e){n.pulse(t.data[e].input,n.changeset().remove(k_).insert(r[e]))})),(e.subcontext||[]).forEach((function(e,n){var r=t.subcontext[n];r&&r.setState(e)}))}};var gN={skip:!0},mN=ie(h_,On);mN.run=function(e){if(On.prototype.run.call(this,e),this._pending)this.resize();else if(this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},mN.render=function(){return this._renderer&&(this._resize&&(this._resize=0,function(e){var t=gx(e),n=px(e),r=xx(e);e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach((function(t){try{t(n,r)}catch(t){e.error(t)}}))}(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},mN.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},mN.container=function(){return this._el},mN.scenegraph=function(){return this._scenegraph},mN.origin=function(){return this._origin.slice()},mN.signal=function(e,t,n){var r=p_(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},mN.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},mN.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},mN.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},mN.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},mN.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},mN.renderer=function(e){return arguments.length?(Uo(e)||D("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},mN.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},mN.loader=function(e){return arguments.length?(e!==this._loader&&(On.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},mN.resize=function(){return this._autosize=1,this.touch(p_(this,"autosize"))},mN._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},mN._resizeView=function(e,t,n,r,i,a){this.runAfter((function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal("width",n,gN),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal("height",r,gN),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter((function(){o.resize()}))}),!1,1)},mN.addEventListener=function(e,t,n){var r=t;return n&&!1===n.trap||((r=Nx(this,t)).raw=t),this._handler.on(e,r),this},mN.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;0<=--a;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},mN.addResizeListener=function(e){var t=this._resizeListeners;return 0>t.indexOf(e)&&t.push(e),this},mN.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return 0<=n&&t.splice(n,1),this},mN.addSignalListener=function(e,t){return g_(this,e,p_(this,e),t)},mN.removeSignalListener=function(e,t){return m_(this,p_(this,e),t)},mN.addDataListener=function(e,t){return g_(this,e,dx(this,e).values,t)},mN.removeDataListener=function(e,t){return m_(this,dx(this,e).values,t)},mN.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},mN.timer=function(e,t){this._timers.push(function(e,t,n){var r=new uh,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?ah():+n,r.restart((function a(o){o+=i,r.restart(a,i+=t,n),e(o)}),t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},mN.events=function(e,t,n){var r,i=this,a=new Me(n),o=function(n,r){"view"===e&&function(e,t){var n=e._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return!1!==r&&!0!==i&&(!(!0!==r&&!1!==i)||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault();try{a.receive(mx(i,n,r))}catch(r){i.error(r)}finally{i.run()}};if("timer"===e)i.timer(o,t);else if("view"===e)i.addEventListener(t,o,JC);else if("window"===e?void 0!==window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a},mN.finalize=function(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;0<=--e;)i[e].stop();for(e=a.length;0<=--e;)for(t=(n=a[e]).sources.length;0<=--t;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},mN.hover=function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",vx),_x,yx(e)),this.on(this.events("view","mouseout",vx),_x,yx(t)),this},mN.data=function(e){return dx(this,e).values.value},mN.change=hx,mN.insert=function(e,t){return hx.call(this,e,De().insert(t))},mN.remove=function(e,t){return hx.call(this,e,De().remove(t))},mN.scale=function(e){var t=this._runtime.scales;return t.hasOwnProperty(e)||D("Unrecognized scale or projection: "+e),t[e].value},mN.initialize=function(e,t){var n,r,i=this,a=i._renderType,o=Uo(a);return e=i._el=e?Fx(i,e):null,o||i.error("Unrecognized renderer type: "+a),n=o.handler||ko,r=e?o.renderer:o.headless,i._renderer=r?Dx(i,i._renderer,e,r):null,i._handler=function(e,t,n,r){var i=new r(e.loader(),Nx(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,gx(e),e);return t&&t.handlers().forEach((function(e){i.on(e.type,e.handler)})),i}(i,i._handler,e,n),i._redraw=!0,e&&(t=t?Fx(i,t):e.appendChild(bx("div",{class:"vega-bindings"})),i._bind.forEach((function(e){e.param.element&&(e.element=Fx(i,e.param.element))})),i._bind.forEach((function(e){wx(i,e.element||t,e)}))),i},mN.toImageURL=function(e,t){return e!==Pw.Canvas&&e!==Pw.SVG&&e!==Pw.PNG?Promise.reject("Unrecognized image type: "+e):Ox(this,e,t).then((function(t){return e===Pw.SVG?function(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")}))},mN.toCanvas=function(e){return Ox(this,Pw.Canvas,e).then((function(e){return e.canvas()}))},mN.toSVG=function(e){return Ox(this,Pw.SVG,e).then((function(e){return e.svg()}))},mN.getState=function(e){return this._runtime.getState(e||{data:s_,signals:l_,recurse:!0})},mN.setState=function(e){var t=this;return t.runAfter((function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter((function(){t._trigger=!0}))})),this},te(Ey,Zy,Uw,WE,VT,lC,AC,RC,UC,ZC),e.version="4.4.0",e.Dataflow=On,e.EventStream=Me,e.Parameters=Ne,e.Pulse=Sn,e.MultiPulse=Tn,e.Operator=Fe,e.Transform=Ln,e.changeset=De,e.ingest=ke,e.isTuple=be,e.definition=Pn,e.transform=zn,e.transforms=Ey,e.tupleid=we,e.scale=pl,e.scheme=Al,e.schemeDiscretized=function(e,t,n){return 1<arguments.length?(FE[e]=t,OE[e]=n||DS(I(t)),this):FE.hasOwnProperty(e)?FE[e]:void 0},e.interpolate=vl,e.interpolateRange=xl,e.timeInterval=Tl,e.utcInterval=Cl,e.projection=Od,e.View=h_,e.parse=function(e,t){return F(e)||D("Input Vega specification must be an object."),Bv(e,new Uv(function(e){var t={padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};return(e||[]).forEach((function(e){var n,r,i;if(e)for(n in e)if("style"===n)for(n in i=t.style||(t.style={}),e.style)i[n]=te(i[n]||{},e.style[n]);else r=e[n],t[n]=F(r)&&!v_(r)?te(F(t[n])?t[n]:{},r):r})),t}([t,e.config]))).toRuntime()},e.expressionFunction=em,e.formatLocale=Xs,e.timeFormatLocale=_n,e.runtime=n_,e.runtimeContext=r_,e.bin=Un,e.bootstrapCI=er,e.quartiles=tr,e.setRandom=function(t){e.random=t},e.randomInteger=function(t,n){null==n&&(n=t,t=0);var r,i,a,o={min:function(e){return arguments.length?(a=i-(r=e||0),o):r},max:function(e){return arguments.length?(a=(i=e||0)-r,o):i},sample:function(){return r+_(a*e.random())},pdf:function(e){return e===_(e)&&e>=r&&e<i?1/a:0},cdf:function(e){var t=_(e);return t<r?0:t>=i?1:(t-r+1)/a},icdf:function(e){return 0<=e&&1>=e?r-1+_(e*a):NaN}};return o.min(t).max(n)},e.randomKDE=rr,e.randomMixture=ar,e.randomNormal=nr,e.randomUniform=or,e.accessor=A,e.accessorName=T,e.accessorFields=C,e.id=y_,e.identity=b_,e.zero=w_,e.one=S_,e.truthy=k_,e.falsy=E_,e.logger=z,e.None=0,e.Error=1,e.Warn=2,e.Info=3,e.Debug=4,e.panLinear=U,e.panLog=V,e.panPow=q,e.zoomLinear=$,e.zoomLog=Y,e.zoomPow=X,e.array=Z,e.compare=K,e.constant=Q,e.debounce=ee,e.error=D,e.extend=te,e.extentIndex=ne,e.fastmap=re,e.field=L,e.inherits=ie,e.isArray=v_,e.isBoolean=ae,e.isDate=oe,e.isFunction=J,e.isNumber=ue,e.isObject=F,e.isRegExp=se,e.isString=O,e.key=le,e.merge=ce,e.pad=de,e.peek=I,e.repeat=fe,e.splitAccessPath=N,e.stringValue=M,e.toBoolean=he,e.toDate=xe,e.toNumber=R,e.toString=ge,e.toSet=me,e.truncate=ve,e.visitArray=_e,e.loader=Pe,e.read=yn,e.inferType=Be,e.inferTypes=Ue,e.typeParsers=z_,e.format=W_,e.formats=at,e.Bounds=ai,e.Gradient=oi,e.GroupItem=si,e.ResourceLoader=fi,e.Item=ui,e.Scenegraph=ho,e.Handler=bo,e.Renderer=So,e.CanvasHandler=ko,e.CanvasRenderer=To,e.SVGHandler=Co,e.SVGRenderer=Oo,e.SVGStringRenderer=jo,e.RenderType=Pw,e.renderModule=Uo,e.Marks=fw,e.boundClip=Vo,e.boundContext=Sa,e.boundStroke=wa,e.boundItem=so,e.boundMark=lo,e.pathCurves=ra,e.pathSymbols=la,e.pathRectangle=xa,e.pathTrail=ga,e.pathParse=ia,e.pathRender=ua,e.point=yo,e.domCreate=xo,e.domFind=go,e.domChild=mo,e.domClear=vo,e.openTag=No,e.closeTag=Fo,e.font=ao,e.fontFamily=io,e.fontSize=to,e.textMetrics=ow,e.resetSVGClipId=function(){Zb=1},e.sceneEqual=qo,e.pathEqual=Ho,e.sceneToJSON=co,e.sceneFromJSON=fo,e.sceneZOrder=Na,e.sceneVisit=Fa,e.scenePickVisit=Oa,Object.defineProperty(e,"__esModule",{value:!0})}(exports),function(e){"use strict";function t(e,t,n){return e.fields=t||[],e.fname=n,e}function n(e){throw Error(e)}function r(e){var t,r,i,a=[],o=null,u=0,s=e.length,l="";function c(){a.push(l+e.substring(t,r)),l="",t=r+1}for(e+="",t=r=0;r<s;++r)if("\\"===(i=e[r]))l+=e.substring(t,r),t=++r;else if(i===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===i?(t=r+1,o=i):t===u&&"'"===i?(t=r+1,o=i):"."!==i||u?"["===i?(t<r&&c(),u=t=r+1):"]"===i&&(u||n("Access path missing open bracket: "+e),0<u&&c(),u=0,t=r+1):t<r?c():t=r+1}return u&&n("Access path missing closing bracket: "+e),o&&n("Access path missing closing quote: "+e),t<r&&(r++,c()),a}var i=Array.isArray;function a(e){return e===Object(e)}function o(e){return"string"==typeof e}function u(e){return i(e)?"["+e.map(u)+"]":a(e)||o(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var s,l,c,f=[];function d(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function h(e){return"boolean"==typeof e}function p(e){return"number"==typeof e}function x(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}l=r(s="id"),c="return _["+l.map(u).join("][")+"];",t(Function("_",c),[s=1===l.length?l[0]:s],s),t((function(e){return e}),f,"identity"),t((function(){return 0}),f,"zero"),t((function(){return 1}),f,"one"),t((function(){return!0}),f,"true"),t((function(){return!1}),f,"false");var g,m,v,_,y={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},b=function(e){throw{name:"SyntaxError",message:e,at:g,text:v}},w=function(e){return e&&e!==m&&b("Expected '"+e+"' instead of '"+m+"'"),m=v.charAt(g),g+=1,m},S=function(){var e,t="";for("-"===m&&w(t="-");"0"<=m&&m<="9";)t+=m,w();if("."===m)for(t+=".";w()&&"0"<=m&&m<="9";)t+=m;if("e"===m||"E"===m)for(t+=m,w(),"-"!==m&&"+"!==m||(t+=m,w());"0"<=m&&m<="9";)t+=m,w();if(e=+t,isFinite(e))return e;b("Bad number")},k=function(){var e,t,n,r="";if('"'===m)for(;w();){if('"'===m)return w(),r;if("\\"===m)if(w(),"u"===m){for(t=n=0;t<4&&(e=parseInt(w(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof y[m])break;r+=y[m]}else r+=m}b("Bad string")},E=function(){for(;m&&m<=" ";)w()};_=function(){switch(E(),m){case"{":return function(){var e,t={};if("{"===m){if(w("{"),E(),"}"===m)return w("}"),t;for(;m;){if(e=k(),E(),w(":"),Object.hasOwnProperty.call(t,e)&&b('Duplicate key "'+e+'"'),t[e]=_(),E(),"}"===m)return w("}"),t;w(","),E()}}b("Bad object")}();case"[":return function(){var e=[];if("["===m){if(w("["),E(),"]"===m)return w("]"),e;for(;m;){if(e.push(_()),E(),"]"===m)return w("]"),e;w(","),E()}}b("Bad array")}();case'"':return k();case"-":return S();default:return"0"<=m&&m<="9"?S():function(){switch(m){case"t":return w("t"),w("r"),w("u"),w("e"),!0;case"f":return w("f"),w("a"),w("l"),w("s"),w("e"),!1;case"n":return w("n"),w("u"),w("l"),w("l"),null}b("Unexpected '"+m+"'")}()}};var A,T,C,D=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,N={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function F(e){return D.lastIndex=0,D.test(e)?'"'+e.replace(D,(function(e){var t=N[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}var O="undefined"!=typeof JSON?JSON:{parse:function(e,t){var n;return v=e,g=0,m=" ",n=_(),E(),m&&b("Syntax error"),"function"==typeof t?function e(n,r){var i,a,o=n[r];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(void 0!==(a=e(o,i))?o[i]=a:delete o[i]);return t.call(n,r,o)}({"":n},""):n},stringify:function(e,t,n){var r;if(T=A="","number"==typeof n)for(r=0;r<n;r+=1)T+=" ";else"string"==typeof n&&(T=n);if((C=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,n){var r,i,a,o,u,s=A,l=n[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof C&&(l=C.call(n,t,l)),typeof l){case"string":return F(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(A+=T,u=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,r=0;r<o;r+=1)u[r]=e(r,l)||"null";return a=0===u.length?"[]":A?"[\n"+A+u.join(",\n"+A)+"\n"+s+"]":"["+u.join(",")+"]",A=s,a}if(C&&"object"==typeof C)for(o=C.length,r=0;r<o;r+=1)"string"==typeof(i=C[r])&&(a=e(i,l))&&u.push(F(i)+(A?": ":":")+a);else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a=e(i,l))&&u.push(F(i)+(A?": ":":")+a);return a=0===u.length?"{}":A?"{\n"+A+u.join(",\n"+A)+"\n"+s+"}":"{"+u.join(",")+"}",A=s,a}}("",{"":e})}},M=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},L=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n};function P(e){return!!e.or}function z(e){return!!e.and}function I(e){return!!e.not}var R=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var r,i="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(e,t){return t},o=t.cmp&&(r=t.cmp,function(e){return function(t,n){var i={key:t,value:e[t]},a={key:n,value:e[n]};return r(i,a)}}),u=[];return function e(t,r,s,l){var c=n?"\n"+new Array(l+1).join(n):"",f=n?": ":":";if(s&&s.toJSON&&"function"==typeof s.toJSON&&(s=s.toJSON()),void 0!==(s=a.call(t,r,s))){if("object"!=typeof s||null===s)return O.stringify(s);if(M(s)){for(var d=[],h=0;h<s.length;h++){var p=e(s,h,s[h],l+1)||O.stringify(null);d.push(c+n+p)}return"["+d.join(",")+c+"]"}if(-1!==u.indexOf(s)){if(i)return O.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(s);var x=L(s).sort(o&&o(s));for(d=[],h=0;h<x.length;h++){var g=e(s,r=x[h],s[r],l+1);if(g){var m=O.stringify(r)+f+g;d.push(c+n+m)}}return u.splice(u.indexOf(s),1),"{"+d.join(",")+c+"}"}}({"":e},"",e,0)},G=R;function j(e){if(p(e))return e;var t=o(e)?e:R(e);if(t.length<100)return t;for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n&=n;return n}function W(e,t){return-1<e.indexOf(t)}function B(e,t){return e.filter((function(e){return!W(t,e)}))}function U(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1}function V(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0}function q(e){return[].concat.apply([],e)}function H(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)e=$(e,i[r]);return e}function $(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||i(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=H(i(t[n].constructor)?[]:{},t[n]):H(e[n],t[n]));return e}function Y(e,t){for(var n,r=[],i={},a=0,o=e;a<o.length;a++){var u=o[a];(n=t(u))in i||(i[n]=1,r.push(u))}return r}function X(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1}function Z(e,t){for(var n in e)if(n in t)return!0;return!1}var J=Object.keys;function K(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function Q(e){return J(e)}function ee(e){return JSON.parse(JSON.stringify(e))}function te(e){return!0===e||!1===e}function ne(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function re(e,t){return I(e)?"!("+re(e.not,t)+")":z(e)?"("+e.and.map((function(e){return re(e,t)})).join(") && (")+")":P(e)?"("+e.or.map((function(e){return re(e,t)})).join(") || (")+")":t(e)}function ie(e,t){if(0===t.length)return!0;var n=t.shift();return ie(e[n],t)&&delete e[n],0===Object.keys(e).length}function ae(e){return e.charAt(0).toUpperCase()+e.substr(1)}function oe(e,t){void 0===t&&(t="datum");for(var n=r(e),i=[],a=1;a<=n.length;a++){var o="["+n.slice(0,a).map(u).join("][")+"]";i.push(""+t+o)}return i.join(" && ")}function ue(e,t){return void 0===t&&(t="datum"),t+"["+u(r(e).join("."))+"]"}function se(e){return""+r(e).map((function(e){return e.replace(".","\\.")})).join("\\.")}function le(e){return""+r(e).join(".")}function ce(e){return r(e).length}var fe=Object.freeze({pick:function(e,t){for(var n={},r=0,i=t;r<i.length;r++){var a=i[r];e.hasOwnProperty(a)&&(n[a]=e[a])}return n},omit:function(e,t){for(var n=ee(e),r=0,i=t;r<i.length;r++)delete n[i[r]];return n},stringify:G,hash:j,contains:W,without:B,union:function(e,t){return e.concat(B(t,e))},some:U,every:V,flatten:q,mergeDeep:H,unique:Y,differ:X,hasIntersection:Z,isNumeric:function(e){return!isNaN(e)},differArray:function(e,t){if(e.length!==t.length)return!0;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!0;return!1},keys:J,vals:K,flagKeys:Q,duplicate:ee,isBoolean:te,varName:ne,logicalExpr:re,deleteNestedProperty:ie,titlecase:ae,accessPathWithDatum:oe,flatAccessWithDatum:ue,replacePathInField:se,removePathFromField:le,accessPathDepth:ce}),de={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},he=Q(de);function pe(e){return!!de[e]}var xe=["count","valid","missing","distinct"];function ge(e){return e&&W(xe,e)}var me=["count","sum","distinct","valid","missing"],ve=["mean","average","median","q1","q3","min","max"],_e=x(ve),ye=Object.freeze({AGGREGATE_OPS:he,isAggregateOp:pe,COUNTING_OPS:xe,isCountingAggregateOp:ge,SUM_OPS:me,SHARED_DOMAIN_OPS:ve,SHARED_DOMAIN_OP_INDEX:_e}),be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function we(e,t){function n(){this.constructor=e}be(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function ke(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}var Ee=["domain","grid","labels","ticks","title"],Ae={grid:"grid",gridScale:"grid",domain:"main",labels:"main",labelFlush:"main",labelOverlap:"main",minExtent:"main",maxExtent:"main",offset:"main",ticks:"main",title:"main",values:"both",scale:"both",zindex:"both"},Te={orient:1,domain:1,format:1,grid:1,labelBound:1,labelFlush:1,labelPadding:1,labels:1,labelOverlap:1,maxExtent:1,minExtent:1,offset:1,position:1,tickCount:1,ticks:1,tickSize:1,title:1,titlePadding:1,values:1,zindex:1},Ce=Se({},Te,{encoding:1,labelAngle:1,titleMaxLength:1});function De(e){return!!Ce[e]}var Ne,Fe,Oe=Q(Se({scale:1},Te,{gridScale:1,encode:1})),Me=Q(Ce),Le=Object.freeze({AXIS_PARTS:Ee,AXIS_PROPERTY_TYPE:Ae,isAxisProperty:De,VG_AXIS_PROPERTIES:Oe,AXIS_PROPERTIES:Me});(Fe=Ne||(Ne={})).ROW="row",Fe.COLUMN="column",Fe.X="x",Fe.Y="y",Fe.X2="x2",Fe.Y2="y2",Fe.LATITUDE="latitude",Fe.LONGITUDE="longitude",Fe.LATITUDE2="latitude2",Fe.LONGITUDE2="longitude2",Fe.COLOR="color",Fe.FILL="fill",Fe.STROKE="stroke",Fe.SHAPE="shape",Fe.SIZE="size",Fe.OPACITY="opacity",Fe.TEXT="text",Fe.ORDER="order",Fe.DETAIL="detail",Fe.KEY="key",Fe.TOOLTIP="tooltip",Fe.HREF="href";var Pe=Ne.X,ze=Ne.Y,Ie=Ne.X2,Re=Ne.Y2,Ge=Ne.LATITUDE,je=Ne.LATITUDE2,We=Ne.LONGITUDE,Be=Ne.LONGITUDE2,Ue=Ne.ROW,Ve=Ne.COLUMN,qe=Ne.SHAPE,He=Ne.SIZE,$e=Ne.COLOR,Ye=Ne.FILL,Xe=Ne.STROKE,Ze=Ne.TEXT,Je=Ne.DETAIL,Ke=Ne.KEY,Qe=Ne.ORDER,et=Ne.OPACITY,tt=Ne.TOOLTIP,nt=Ne.HREF,rt={longitude:1,longitude2:1,latitude:1,latitude2:1},it=Q(rt),at=Se({x:1,y:1,x2:1,y2:1},rt,{color:1,fill:1,stroke:1,opacity:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1});function ot(e){return"color"===e||"fill"===e||"stroke"===e}var ut=Se({},at,{row:1,column:1}),st=Q(ut),lt=(ut.order,ut.detail,Q(ke(ut,["order","detail"])));function ct(e){return!!ut[e]}var ft=Q(at),dt=(at.x,at.y,at.x2,at.y2,at.latitude,at.longitude,at.latitude2,at.longitude2,ke(at,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"])),ht=Q(dt),pt={x:1,y:1},xt=Q(pt),gt=ke(dt,["text","tooltip","href","detail","key","order"]),mt=Q(gt),vt=Se({},pt,gt),_t=Q(vt);function yt(e){return!!vt[e]}function bt(e,t){return t in wt(e)}function wt(e){switch(e){case $e:case Ye:case Xe:case Je:case Ke:case tt:case nt:case Qe:case et:case Ue:case Ve:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,trail:!0,area:!0,text:!0,geoshape:!0};case Pe:case ze:case Ge:case We:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,trail:!0,area:!0,text:!0};case Ie:case Re:case je:case Be:return{rule:!0,bar:!0,rect:!0,area:!0};case He:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0,trail:!0};case qe:return{point:!0,geoshape:!0};case Ze:return{text:!0}}}function St(e){switch(e){case Pe:case ze:case He:case et:case Ie:case Re:return"continuous";case Ue:case Ve:case qe:case Ze:case tt:case nt:return"discrete";case $e:case Ye:case Xe:return"flexible";case Ge:case We:case je:case Be:case Je:case Ke:case Qe:return}throw new Error("rangeType not implemented for "+e)}var kt=Object.freeze({get Channel(){return Ne},X:Pe,Y:ze,X2:Ie,Y2:Re,LATITUDE:Ge,LATITUDE2:je,LONGITUDE:We,LONGITUDE2:Be,ROW:Ue,COLUMN:Ve,SHAPE:qe,SIZE:He,COLOR:$e,FILL:Ye,STROKE:Xe,TEXT:Ze,DETAIL:Je,KEY:Ke,ORDER:Qe,OPACITY:et,TOOLTIP:tt,HREF:nt,GEOPOSITION_CHANNEL_INDEX:rt,GEOPOSITION_CHANNELS:it,isColorChannel:ot,CHANNELS:st,SINGLE_DEF_CHANNELS:lt,isChannel:ct,UNIT_CHANNELS:ft,NONPOSITION_CHANNELS:ht,POSITION_SCALE_CHANNELS:xt,NONPOSITION_SCALE_CHANNELS:mt,SCALE_CHANNELS:_t,isScaleChannel:yt,supportMark:bt,getSupportedMark:wt,rangeType:St});function Et(e){return h(e)?"bin":"bin"+J(e).map((function(t){return ne("_"+t+"_"+e[t])})).join("")}function At(e){return e&&!h(e)}function Tt(e){switch(e){case Ue:case Ve:case He:case $e:case Ye:case Xe:case et:case qe:return 6;default:return 10}}var Ct,Dt,Nt=Object.freeze({binToString:Et,isBinParams:At,autoMaxBins:Tt});(Dt=Ct||(Ct={})).AREA="area",Dt.BAR="bar",Dt.LINE="line",Dt.POINT="point",Dt.RECT="rect",Dt.RULE="rule",Dt.TEXT="text",Dt.TICK="tick",Dt.TRAIL="trail",Dt.CIRCLE="circle",Dt.SQUARE="square",Dt.GEOSHAPE="geoshape";var Ft=Ct.AREA,Ot=Ct.BAR,Mt=Ct.LINE,Lt=Ct.POINT,Pt=Ct.TEXT,zt=Ct.TICK,It=Ct.TRAIL,Rt=Ct.RECT,Gt=Ct.RULE,jt=Ct.GEOSHAPE,Wt=Ct.CIRCLE,Bt=Ct.SQUARE,Ut={area:1,bar:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function Vt(e){return W(["line","area","trail"],e)}var qt=Q(Ut);function Ht(e){return e.type}var $t=x(qt);function Yt(e){return(Ht(e)?e.type:e)in $t}var Xt,Zt,Jt,Kt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],Qt=["fill","fillOpacity"],en=[].concat(Kt,Qt),tn=["filled","color"],nn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},rn={color:"#4c78a8"},an={binSpacing:1,continuousBandSize:5},on={thickness:1},un=Object.freeze({get Mark(){return Ct},AREA:Ft,BAR:Ot,LINE:Mt,POINT:Lt,TEXT:Pt,TICK:zt,TRAIL:It,RECT:Rt,RULE:Gt,GEOSHAPE:jt,CIRCLE:Wt,SQUARE:Bt,isMark:function(e){return!!Ut[e]},isPathMark:Vt,PRIMITIVE_MARKS:qt,isMarkDef:Ht,isPrimitiveMark:Yt,STROKE_CONFIG:Kt,FILL_CONFIG:Qt,FILL_STROKE_CONFIG:en,VL_ONLY_MARK_CONFIG_PROPERTIES:tn,VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX:nn,defaultMarkConfig:rn,defaultBarConfig:an,defaultTickConfig:on}),sn=(Xt=2,{level:function(e){return arguments.length?(Xt=+e,this):Xt},error:function(){return 1<=Xt&&d("error","ERROR",arguments),this},warn:function(){return 2<=Xt&&d("warn","WARN",arguments),this},info:function(){return 3<=Xt&&d("log","INFO",arguments),this},debug:function(){return 4<=Xt&&d("log","DEBUG",arguments),this}}),ln=sn;function cn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ln.warn.apply(ln,arguments)}function fn(e){return!(!e||!(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds))}(Jt=Zt||(Zt={})).INVALID_SPEC="Invalid spec",Jt.FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.',Jt.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".',Jt.cannotProjectOnChannelWithoutField=function(e){return'Cannot project a selection on encoding channel "'+e+'", which has no field.'},Jt.nearestNotSupportForContinuous=function(e){return'The "nearest" transform is not supported for '+e+" marks."},Jt.selectionNotFound=function(e){return'Cannot find a selection named "'+e+'"'},Jt.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Jt.noSuchRepeatedValue=function(e){return'Unknown repeated value "'+e+'".'},Jt.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",Jt.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.",Jt.cannotSetTitleAnchor=function(e){return'Cannot set title "anchor" for a '+e+" spec"},Jt.unrecognizedParse=function(e){return'Unrecognized parse "'+e+'".'},Jt.differentParse=function(e,t,n){return'An ancestor parsed field "'+e+'" as '+n+" but a child wants to parse the field as "+t+"."},Jt.invalidTransformIgnored=function(e){return"Ignoring an invalid transform: "+G(e)+"."},Jt.NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.',Jt.encodingOverridden=function(e){return"Layer's shared "+e.join(",")+" channel "+(1===e.length?"is":"are")+" overriden"},Jt.projectionOverridden=function(e){var t=e.parentProjection,n=e.projection;return"Layer's shared projection "+G(t)+" is overridden by a child projection "+G(n)+"."},Jt.primitiveChannelDef=function(e,t,n){return"Channel "+e+" is a "+t+". Converted to {value: "+G(n)+"}."},Jt.invalidFieldType=function(e){return'Invalid field type "'+e+'"'},Jt.nonZeroScaleUsedWithLengthMark=function(e,t,n){return"A "+(n.scaleType?n.scaleType+" scale":n.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero")+" is used with "+e+" mark. This can be misleading as the "+("x"===t?"width":"height")+" of the "+e+" can be arbitrary based on the scale domain. You may want to use point mark instead."},Jt.invalidFieldTypeForCountAggregate=function(e,t){return'Invalid field type "'+e+'" for aggregate: "'+t+'", using "quantitative" instead.'},Jt.invalidAggregate=function(e){return'Invalid aggregation operator "'+e+'"'},Jt.emptyOrInvalidFieldType=function(e,t,n){return'Invalid field type "'+e+'" for channel "'+t+'", using "'+n+'" instead.'},Jt.droppingColor=function(e,t){var n=t.fill,r=t.stroke;return"Dropping color "+e+" as the plot also has "+(n&&r?"fill and stroke":n?"fill":"stroke")},Jt.emptyFieldDef=function(e,t){return"Dropping "+G(e)+' from channel "'+t+'" since it does not contain data field or value.'},Jt.latLongDeprecated=function(e,t,n){return e+"-encoding with type "+t+" is deprecated. Replacing with "+n+"-encoding."},Jt.LINE_WITH_VARYING_SIZE="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.",Jt.incompatibleChannel=function(e,t,n){return e+' dropped as it is incompatible with "'+t+'"'+(n?" when "+n:"")+"."},Jt.invalidEncodingChannel=function(e){return e+"-encoding is dropped as "+e+" is not a valid encoding channel."},Jt.facetChannelShouldBeDiscrete=function(e){return e+" encoding should be discrete (ordinal / nominal / binned)."},Jt.discreteChannelCannotEncode=function(e,t){return'Using discrete channel "'+e+'" to encode "'+t+'" field can be misleading as it does not encode '+("ordinal"===t?"order":"magnitude")+"."},Jt.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",Jt.lineWithRange=function(e,t){return"Line mark is for continuous lines and thus cannot be used with "+(e&&t?"x2 and y2":e?"x2":"y2")+". We will use the rule mark (line segments) instead."},Jt.unclearOrientContinuous=function(e){return'Cannot clearly determine orientation for "'+e+'" since both x and y channel encode continuous fields. In this case, we use vertical by default'},Jt.unclearOrientDiscreteOrEmpty=function(e){return'Cannot clearly determine orientation for "'+e+'" since both x and y channel encode discrete or empty fields.'},Jt.orientOverridden=function(e,t){return'Specified orient "'+e+'" overridden with "'+t+'"'},Jt.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",Jt.cannotUseScalePropertyWithNonColor=function(e){return'Cannot use the scale property "'+e+'" with non-color channel.'},Jt.unaggregateDomainHasNoEffectForRawField=function(e){return"Using unaggregated domain with raw field has no effect ("+G(e)+")."},Jt.unaggregateDomainWithNonSharedDomainOp=function(e){return'Unaggregated domain not applicable for "'+e+'" since it produces values outside the origin domain of the source data.'},Jt.unaggregatedDomainWithLogScale=function(e){return"Unaggregated domain is currently unsupported for log scale ("+G(e)+")."},Jt.cannotUseSizeFieldWithBandSize=function(e){return"Using size field when "+e+"-channel has a band scale is not supported."},Jt.cannotApplySizeToNonOrientedMark=function(e){return'Cannot apply size to non-oriented mark "'+e+'".'},Jt.rangeStepDropped=function(e){return'rangeStep for "'+e+'" is dropped as top-level '+("x"===e?"width":"height")+" is provided."},Jt.scaleTypeNotWorkWithChannel=function(e,t,n){return'Channel "'+e+'" does not work with "'+t+'" scale. We are using "'+n+'" scale instead.'},Jt.scaleTypeNotWorkWithFieldDef=function(e,t){return'FieldDef does not work with "'+e+'" scale. We are using "'+t+'" scale instead.'},Jt.scalePropertyNotWorkWithScaleType=function(e,t,n){return n+"-scale's \""+t+'" is dropped as it does not work with '+e+" scale."},Jt.scaleTypeNotWorkWithMark=function(e,t){return'Scale type "'+t+'" does not work with mark "'+e+'".'},Jt.mergeConflictingProperty=function(e,t,n,r){return"Conflicting "+t+' property "'+e+'" ('+G(n)+" and "+G(r)+").  Using "+G(n)+"."},Jt.independentScaleMeansIndependentGuide=function(e){return'Setting the scale to be independent for "'+e+'" means we also have to set the guide (axis or legend) to be independent.'},Jt.domainSortDropped=function(e){return"Dropping sort property "+G(e)+" as unioned domains only support boolean or op 'count'."},Jt.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",Jt.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Jt.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",Jt.cannotStackRangedMark=function(e){return'Cannot stack "'+e+'" if there is already "'+e+'2"'},Jt.cannotStackNonLinearScale=function(e){return"Cannot stack non-linear scale ("+e+")"},Jt.stackNonSummativeAggregate=function(e){return'Stacking is applied even though the aggregate function is non-summative ("'+e+'")'},Jt.invalidTimeUnit=function(e,t){return"Invalid "+e+": "+G(t)},Jt.dayReplacedWithDate=function(e){return'Time unit "'+e+'" is not supported. We are replacing it with '+e.replace("day","date")+"."},Jt.droppedDay=function(e){return"Dropping day from datetime "+G(e)+" as day cannot be combined with other units."};var dn=["january","february","march","april","may","june","july","august","september","october","november","december"],hn=dn.map((function(e){return e.substr(0,3)})),pn=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],xn=pn.map((function(e){return e.substr(0,3)}));function gn(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day&&1<J(e).length&&(cn(Zt.droppedDay(e)),delete(e=ee(e)).day),void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(2006):n.push(0),void 0!==e.month){var r=t?function(e){if(p(e))return e-1+"";var t=e.toLowerCase(),n=dn.indexOf(t);if(-1!==n)return n+"";var r=t.substr(0,3),i=hn.indexOf(r);if(-1!==i)return i+"";throw new Error(Zt.invalidTimeUnit("month",e))}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){var i=t?function(e){if(p(e))return 4<e&&cn(Zt.invalidTimeUnit("quarter",e)),e-1+"";throw new Error(Zt.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(i+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var a=t?function(e){if(p(e))return e%7+"";var t=e.toLowerCase(),n=pn.indexOf(t);if(-1!==n)return n+"";var r=t.substr(0,3),i=xn.indexOf(r);if(-1!==i)return i+"";throw new Error(Zt.invalidTimeUnit("day",e))}(e.day):e.day;n.push(a+"+1")}else n.push(1);for(var o=0,u=["hours","minutes","seconds","milliseconds"];o<u.length;o++){var s=u[o];void 0!==e[s]?n.push(e[s]):n.push(0)}return e.utc?"utc("+n.join(", ")+")":"datetime("+n.join(", ")+")"}var mn,vn,_n=Object.freeze({isDateTime:fn,MONTHS:dn,SHORT_MONTHS:hn,DAYS:pn,SHORT_DAYS:xn,dateTimeExpr:gn});(vn=mn||(mn={})).YEAR="year",vn.MONTH="month",vn.DAY="day",vn.DATE="date",vn.HOURS="hours",vn.MINUTES="minutes",vn.SECONDS="seconds",vn.MILLISECONDS="milliseconds",vn.YEARMONTH="yearmonth",vn.YEARMONTHDATE="yearmonthdate",vn.YEARMONTHDATEHOURS="yearmonthdatehours",vn.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",vn.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",vn.MONTHDATE="monthdate",vn.HOURSMINUTES="hoursminutes",vn.HOURSMINUTESSECONDS="hoursminutesseconds",vn.MINUTESSECONDS="minutesseconds",vn.SECONDSMILLISECONDS="secondsmilliseconds",vn.QUARTER="quarter",vn.YEARQUARTER="yearquarter",vn.QUARTERMONTH="quartermonth",vn.YEARQUARTERMONTH="yearquartermonth",vn.UTCYEAR="utcyear",vn.UTCMONTH="utcmonth",vn.UTCDAY="utcday",vn.UTCDATE="utcdate",vn.UTCHOURS="utchours",vn.UTCMINUTES="utcminutes",vn.UTCSECONDS="utcseconds",vn.UTCMILLISECONDS="utcmilliseconds",vn.UTCYEARMONTH="utcyearmonth",vn.UTCYEARMONTHDATE="utcyearmonthdate",vn.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",vn.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",vn.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",vn.UTCMONTHDATE="utcmonthdate",vn.UTCHOURSMINUTES="utchoursminutes",vn.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",vn.UTCMINUTESSECONDS="utcminutesseconds",vn.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",vn.UTCQUARTER="utcquarter",vn.UTCYEARQUARTER="utcyearquarter",vn.UTCQUARTERMONTH="utcquartermonth",vn.UTCYEARQUARTERMONTH="utcyearquartermonth";var yn={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},bn=Q(yn);function wn(e){return!!yn[e]}var Sn={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};function kn(e){return!!Sn[e]}var En={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},An=Se({},Sn,En);function Tn(e){return!!An[e]}function Cn(e){return e.substr(3)}var Dn=Se({},yn,Sn,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},En),Nn=Q(Dn),Fn={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};function On(e,t){var n=Fn[e];return{setDateMethod:t?"setUTC"+n.substr(3):n,getDateMethod:"get"+(t?"UTC":"")+n.substr(3)}}function Mn(e){return bn.reduce((function(t,n){return Ln(e,n)?t.concat(n):t}),[])}function Ln(e,t){var n=e.indexOf(t);return-1<n&&(t!==mn.SECONDS||0===n||"i"!==e.charAt(n-1))}function Pn(e,t){var n=oe(t),r=Tn(e)?"utc":"";return gn(bn.reduce((function(t,i){var a;return Ln(e,i)&&(t[i]=(a=i)===mn.QUARTER?"("+r+"quarter("+n+")-1)":""+r+a+"("+n+")"),t}),{}))}function zn(e,t,n,r){if(e){var i=[],a="",o=Ln(e,mn.YEAR);Ln(e,mn.QUARTER)&&(a="'Q' + quarter("+t+")"),Ln(e,mn.MONTH)&&i.push(!1!==n?"%b":"%B"),Ln(e,mn.DAY)?i.push(n?"%a":"%A"):Ln(e,mn.DATE)&&i.push("%d"+(o?",":"")),o&&i.push(n?"%y":"%Y");var u=[];Ln(e,mn.HOURS)&&u.push("%H"),Ln(e,mn.MINUTES)&&u.push("%M"),Ln(e,mn.SECONDS)&&u.push("%S"),Ln(e,mn.MILLISECONDS)&&u.push("%L");var s=[];return 0<i.length&&s.push(i.join(" ")),0<u.length&&s.push(u.join(":")),0<s.length&&(a&&(a+=" + ' ' + "),a+=r?"utcFormat("+t+", '"+s.join(" ")+"')":"timeFormat("+t+", '"+s.join(" ")+"')"),a||void 0}}function In(e){return"day"!==e&&0<=e.indexOf("day")?(cn(Zt.dayReplacedWithDate(e)),e.replace("day","date")):e}var Rn,Gn,jn=Object.freeze({get TimeUnit(){return mn},TIMEUNIT_PARTS:bn,isLocalSingleTimeUnit:wn,isUtcSingleTimeUnit:kn,isUTCTimeUnit:Tn,getLocalTimeUnit:Cn,TIMEUNITS:Nn,isTimeUnit:function(e){return!!Dn[e]},convert:function(e,t){for(var n=Tn(e),r=n?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0),i=0,a=bn;i<a.length;i++){var o=a[i];if(Ln(e,o))switch(o){case mn.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case mn.QUARTER:var u=On("month",n),s=u.getDateMethod;r[u.setDateMethod](3*Math.floor(t[s]()/3));break;default:var l=On(o,n),c=l.getDateMethod;r[l.setDateMethod](t[c]())}}return r},getTimeUnitParts:Mn,containsTimeUnit:Ln,fieldExpr:Pn,formatExpression:zn,normalizeTimeUnit:In});(Gn=Rn||(Rn={})).QUANTITATIVE="quantitative",Gn.ORDINAL="ordinal",Gn.TEMPORAL="temporal",Gn.NOMINAL="nominal",Gn.LATITUDE="latitude",Gn.LONGITUDE="longitude",Gn.GEOJSON="geojson";var Wn={quantitative:1,ordinal:1,temporal:1,nominal:1,latitude:1,longitude:1,geojson:1},Bn=Rn.QUANTITATIVE,Un=Rn.ORDINAL,Vn=Rn.TEMPORAL,qn=Rn.NOMINAL,Hn=Rn.GEOJSON;function $n(e){if(e)switch(e=e.toLowerCase()){case"q":case Bn:return"quantitative";case"t":case Vn:return"temporal";case"o":case Un:return"ordinal";case"n":case qn:return"nominal";case Rn.LATITUDE:return"latitude";case Rn.LONGITUDE:return"longitude";case Hn:return"geojson"}}var Yn=Object.freeze({get Type(){return Rn},isType:function(e){return!!Wn[e]},QUANTITATIVE:Bn,ORDINAL:Un,TEMPORAL:Vn,NOMINAL:qn,GEOJSON:Hn,getFullName:$n});function Xn(e){return e.selection}function Zn(e){return e&&!o(e)&&"repeat"in e}function Jn(e){var t=e.field,n=e.timeUnit,r=e.bin,i=e.aggregate;return Se({},n?{timeUnit:n}:{},r?{bin:r}:{},i?{aggregate:i}:{},{field:t})}function Kn(e){return!!e&&!!e.condition}function Qn(e){return!!e&&!!e.condition&&!i(e.condition)&&tr(e.condition)}function er(e){return!!e&&!!e.condition&&(i(e.condition)||rr(e.condition))}function tr(e){return!(!e||!e.field&&"count"!==e.aggregate)}function nr(e){return tr(e)&&o(e.field)}function rr(e){return e&&"value"in e&&void 0!==e.value}function ir(e){return!(!e||!e.scale&&!e.sort)}function ar(e,t){void 0===t&&(t={});var n=e.field,r=t.prefix,i=t.suffix;if(sr(e))n="count_*";else{var a=void 0;t.nofn||(e.bin?(a=Et(e.bin),i=t.binSuffix||""):e.aggregate?a=String(t.aggregate||e.aggregate):e.timeUnit&&(a=String(e.timeUnit))),a&&(n=a+"_"+n)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),t.expr?ue(n,t.expr):se(n)}function or(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!e.bin;case"latitude":case"longitude":case"temporal":return!1}throw new Error(Zt.invalidFieldType(e.type))}function ur(e){return!or(e)}function sr(e){return"count"===e.aggregate}function lr(e,t){var n=e.field,r=e.bin,i=e.timeUnit,a=e.aggregate;return"count"===a?t.countTitle:r?n+" (binned)":i?n+" ("+Mn(i).join("-")+")":a?ae(a)+" of "+n:n}function cr(e,t){var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toUpperCase()+"("+e.field+")":e.field}var fr=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return cr(e);default:return lr(e,t)}},dr=fr;function hr(e){dr=e}function pr(){hr(fr)}function xr(e,t){return dr(e,t)}function gr(e,t){if(e.timeUnit)return"temporal";if(e.bin)return"quantitative";switch(St(t)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}function mr(e){return tr(e)?e:Qn(e)?e.condition:void 0}function vr(e,t){if(o(e)||p(e)||h(e)){var n=o(e)?"string":p(e)?"number":"boolean";return cn(Zt.primitiveChannelDef(t,n,e)),{value:e}}return tr(e)?_r(e,t):Qn(e)?Se({},e,{condition:_r(e.condition,t)}):e}function _r(e,t){if(e.aggregate&&!pe(e.aggregate)){e.aggregate;var n=ke(e,["aggregate"]);cn(Zt.invalidAggregate(e.aggregate)),e=n}if(e.timeUnit&&(e=Se({},e,{timeUnit:In(e.timeUnit)})),e.bin&&(e=Se({},e,{bin:yr(e.bin,t)})),e.type){var r=$n(e.type);e.type!==r&&(e=Se({},e,{type:r})),"quantitative"!==e.type&&ge(e.aggregate)&&(cn(Zt.invalidFieldTypeForCountAggregate(e.type,e.aggregate)),e=Se({},e,{type:"quantitative"}))}else{var i=gr(e,t);cn(Zt.emptyOrInvalidFieldType(e.type,t,i)),e=Se({},e,{type:i})}var a=wr(e,t),o=a.compatible,u=a.warning;return o||cn(u),e}function yr(e,t){return h(e)?{maxbins:Tt(t)}:e.maxbins||e.step?e:Se({},e,{maxbins:Tt(t)})}var br={compatible:!0};function wr(e,t){switch(t){case"row":case"column":return ur(e)&&!e.timeUnit?{compatible:!1,warning:Zt.facetChannelShouldBeDiscrete(t)}:br;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return br;case"longitude":case"longitude2":case"latitude":case"latitude2":return e.type!==Bn?{compatible:!1,warning:"Channel "+t+" should not be used with "+e.type+" field."}:br;case"opacity":case"size":case"x2":case"y2":return or(e)&&!e.bin?{compatible:!1,warning:"Channel "+t+" should not be used with discrete field."}:br;case"shape":return"nominal"!==e.type&&"geojson"!==e.type?{compatible:!1,warning:"Shape channel should be used with nominal data or geojson only"}:br;case"order":return"nominal"===e.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:br}throw new Error("channelCompatability not implemented for channel "+t)}function Sr(e){return"quantitative"===e.type||!!e.bin}function kr(e){return"temporal"===e.type||!!e.timeUnit}var Er=Object.freeze({isConditionalSelection:Xn,isRepeatRef:Zn,toFieldDefBase:Jn,isConditionalDef:Kn,hasConditionalFieldDef:Qn,hasConditionalValueDef:er,isFieldDef:tr,isStringFieldDef:nr,isValueDef:rr,isScaleFieldDef:ir,vgField:ar,isDiscrete:or,isContinuous:ur,isCount:sr,verbalTitleFormatter:lr,functionalTitleFormatter:cr,defaultTitleFormatter:fr,setTitleFormatter:hr,resetTitleFormatter:pr,title:xr,defaultType:gr,getFieldDef:mr,normalize:vr,normalizeFieldDef:_r,normalizeBin:yr,channelCompatibility:wr,isNumberFieldDef:Sr,isTimeFieldDef:kr});function Ar(e,t){var n=e&&e[t];return!!n&&(i(n)?U(n,(function(e){return!!e.field})):tr(n)||Qn(n))}function Tr(e){return U(st,(function(t){if(Ar(e,t)){var n=e[t];if(i(n))return U(n,(function(e){return!!e.aggregate}));var r=mr(n);return r&&!!r.aggregate}return!1}))}function Cr(e,t){return J(e).reduce((function(n,r){if(!ct(r))return cn(Zt.invalidEncodingChannel(r)),n;if(!bt(r,t))return cn(Zt.incompatibleChannel(r,t)),n;if("size"===r&&"line"===t&&(u=mr(e[r]))&&u.aggregate)return cn(Zt.LINE_WITH_VARYING_SIZE),n;if("color"===r&&("fill"in e||"stroke"in e))return cn(Zt.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),n;var a,o=e[r];if("detail"===r||"order"===r&&!i(o)&&!rr(o)||"tooltip"===r&&i(o))o&&(n[r]=(i(o)?o:[o]).reduce((function(e,t){return tr(t)?e.push(_r(t,r)):cn(Zt.emptyFieldDef(t,r)),e}),[]));else{var u;if((u=mr(e[r]))&&W([Rn.LATITUDE,Rn.LONGITUDE],u.type)){var s=r,l=(n[s],ke(n,["symbol"==typeof s?s:s+""])),c="x"===r?"longitude":"y"===r?"latitude":"x2"===r?"longitude2":"y2"===r?"latitude2":void 0;return cn(Zt.latLongDeprecated(r,u.type,c)),Se({},l,((a={})[c]=Se({},vr(u,r),{type:"quantitative"}),a))}if(!tr(o)&&!rr(o)&&!Kn(o))return cn(Zt.emptyFieldDef(o,r)),n;n[r]=vr(o,r)}return n}),{})}function Dr(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}function Nr(e){var t=[];return st.forEach((function(n){if(Ar(e,n)){var r=e[n];(i(r)?r:[r]).forEach((function(e){tr(e)?t.push(e):Qn(e)&&t.push(e.condition)}))}})),t}function Fr(e,t,n){if(e)for(var r=function(r){i(e[r])?e[r].forEach((function(e){t.call(n,e,r)})):t.call(n,e[r],r)},a=0,o=J(e);a<o.length;a++)r(o[a])}function Or(e,t,n,r){return e?J(e).reduce((function(n,a){var o=e[a];return i(o)?o.reduce((function(e,n){return t.call(r,e,n,a)}),n):t.call(r,n,o,a)}),n):n}var Mr=Object.freeze({channelHasField:Ar,isAggregate:Tr,normalizeEncoding:Cr,isRanged:Dr,fieldDefs:Nr,forEach:Fr,reduce:Or});function Lr(e,t){var n,r=e[t];return void 0!==r?((n={})[t]={value:r},n):{}}var Pr="box-plot";function zr(e){return!!e.type}var Ir=["x","y","color","detail","opacity","size"],Rr={};function Gr(e,t){Rr[e]=t}var jr=["boxWhisker","box","boxMid"],Wr=Se({},{box:["size","color","extent"],boxWhisker:["color"],boxMid:["color"]});function Br(e,t){var n=Ht(e.mark)?e.mark.type:e.mark,r=Rr[n];if(r)return r(e,t);throw new Error('Invalid mark type "'+n+'"')}Gr(Pr,(function(e,t){var n,r=(e=Se({},n=e,{encoding:Or(n.encoding,(function(e,t,n){return-1<Ir.indexOf(n)?e[n]=t:cn(Zt.incompatibleChannel(n,Pr)),e}),{})})).mark,i=(e.encoding,e.selection),a=(e.projection,ke(e,["mark","encoding","selection","projection"])),o=void 0;p(t.box.extent)&&(o=t.box.extent),zr(r)&&r.extent&&"min-max"===r.extent&&(o=void 0);var u,s,l,c,f=function(e,t,n){var r=function(e,t){e.mark;var n,r,i=e.encoding;if(e.projection,ke(e,["mark","encoding","projection"]),"vertical"===t?(r="y",n=i.y):(r="x",n=i.x),n&&n.aggregate){var a=n.aggregate,o=ke(n,["aggregate"]);a!==Pr&&cn("Continuous axis should not have customized aggregation function "+a),n=o}return{continuousAxisChannelDef:n,continuousAxis:r}}(e,t),i=r.continuousAxisChannelDef,a=r.continuousAxis,o=e.encoding,u=void 0===n,s=[{op:"q1",field:i.field,as:"lower_box_"+i.field},{op:"q3",field:i.field,as:"upper_box_"+i.field},{op:"median",field:i.field,as:"mid_box_"+i.field}],l=[];s.push({op:"min",field:i.field,as:(u?"lower_whisker_":"min_")+i.field}),s.push({op:"max",field:i.field,as:(u?"upper_whisker_":"max_")+i.field}),u||(l=[{calculate:"datum.upper_box_"+i.field+" - datum.lower_box_"+i.field,as:"iqr_"+i.field},{calculate:"min(datum.upper_box_"+i.field+" + datum.iqr_"+i.field+" * "+n+", datum.max_"+i.field+")",as:"upper_whisker_"+i.field},{calculate:"max(datum.lower_box_"+i.field+" - datum.iqr_"+i.field+" * "+n+", datum.min_"+i.field+")",as:"lower_whisker_"+i.field}]);var c=[],f=[],d=[],h={};return Fr(o,(function(e,t){if(t!==a)if(tr(e)){if(e.aggregate&&e.aggregate!==Pr)s.push({op:e.aggregate,field:e.field,as:ar(e)});else if(void 0===e.aggregate){var n=ar(e),r=e.bin;if(r){var i=e.field;f.push({bin:r,field:i,as:n})}else if(e.timeUnit){var u=e.timeUnit;i=e.field,d.push({timeUnit:u,field:i,as:n})}c.push(n)}h[t]={field:ar(e),type:e.type}}else h[t]=o[t]})),{transform:[].concat(f,d,[{aggregate:s,groupby:c}],l),continuousAxisChannelDef:i,continuousAxis:a,encodingWithoutContinuousAxis:h}}(e,function(e){var t=e.mark,n=e.encoding;if(e.projection,ke(e,["mark","encoding","projection"]),tr(n.x)&&ur(n.x)){if(tr(n.y)&&ur(n.y)){if(void 0===n.x.aggregate&&n.y.aggregate===Pr)return"vertical";if(void 0===n.y.aggregate&&n.x.aggregate===Pr)return"horizontal";if(n.x.aggregate===Pr&&n.y.aggregate===Pr)throw new Error("Both x and y cannot have aggregate");return zr(t)&&t.orient?t.orient:"vertical"}return"horizontal"}if(tr(n.y)&&ur(n.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}(e),o),d=f.transform,h=f.continuousAxisChannelDef,x=f.continuousAxis,g=f.encodingWithoutContinuousAxis,m=g.size,v=ke(g,["color","size"]),_=m?{size:m}:Lr(t.box,"size"),y={};return h.scale&&(y.scale=h.scale),h.axis&&(y.axis=h.axis),Se({},a,{transform:d,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:Se((u={},u[x]=Se({field:"lower_whisker_"+h.field,type:h.type},y),u[x+"2"]={field:"lower_box_"+h.field,type:h.type},u),v,Lr(t.boxWhisker,"color"))},{mark:{type:"rule",style:"boxWhisker"},encoding:Se((s={},s[x]={field:"upper_box_"+h.field,type:h.type},s[x+"2"]={field:"upper_whisker_"+h.field,type:h.type},s),v,Lr(t.boxWhisker,"color"))},Se({},i?{selection:i}:{},{mark:{type:"bar",style:"box"},encoding:Se((l={},l[x]={field:"lower_box_"+h.field,type:h.type},l[x+"2"]={field:"upper_box_"+h.field,type:h.type},l),g,g.color?{}:Lr(t.box,"color"),_)}),{mark:{type:"tick",style:"boxMid"},encoding:Se((c={},c[x]={field:"mid_box_"+h.field,type:h.type},c),v,Lr(t.boxMid,"color"),_)}]})})),Gr("error-bar",(function(e){e.mark,e.selection,e.projection;var t=e.encoding,n=ke(e,["mark","selection","projection","encoding"]),r=(t.size,ke(t,["size"])),i=(t.x2,t.y2,ke(t,["x2","y2"])),a=ke(i,["x","y"]);if(!t.x2&&!t.y2)throw new Error("Neither x2 or y2 provided");return Se({},n,{layer:[{mark:"rule",encoding:r},{mark:"tick",encoding:i},{mark:"tick",encoding:t.x2?Se({x:t.x2,y:t.y},a):Se({x:t.x,y:t.y2},a)}]})}));var Ur,Vr,qr=Object.freeze({add:Gr,remove:function(e){delete Rr[e]},COMPOSITE_MARK_STYLES:jr,VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX:Wr,normalize:Br}),Hr=["shortTimeLabels"],$r={},Yr={entryPadding:1,format:1,offset:1,orient:1,padding:1,tickCount:1,title:1,type:1,values:1,zindex:1},Xr=Se({},Yr,{opacity:1,shape:1,stroke:1,fill:1,size:1,encode:1}),Zr=Q(Yr),Jr=Q(Xr),Kr=Object.freeze({defaultLegendConfig:$r,LEGEND_PROPERTIES:Zr,VG_LEGEND_PROPERTIES:Jr});(Vr=Ur||(Ur={})).LINEAR="linear",Vr.BIN_LINEAR="bin-linear",Vr.LOG="log",Vr.POW="pow",Vr.SQRT="sqrt",Vr.TIME="time",Vr.UTC="utc",Vr.SEQUENTIAL="sequential",Vr.QUANTILE="quantile",Vr.QUANTIZE="quantize",Vr.THRESHOLD="threshold",Vr.ORDINAL="ordinal",Vr.BIN_ORDINAL="bin-ordinal",Vr.POINT="point",Vr.BAND="band";var Qr={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"},ei=J(Qr);function ti(e,t){var n=Qr[e],r=Qr[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}var ni={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};function ri(e){return ni[e]}var ii=["linear","bin-linear","log","pow","sqrt","time","utc"],ai=x(ii),oi=ii.concat(["sequential"]),ui=x(oi),si=["ordinal","bin-ordinal","point","band"],li=x(si),ci=x(["bin-linear","bin-ordinal"]);function fi(e){return e in li}function di(e){return e in ci}function hi(e){return e in ui}function pi(e){return e in ai}var xi={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4};function gi(e){return e&&!!e.name}function mi(e){return e&&e.selection}var vi={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},_i=Q(vi),yi=Q(ke(vi,["type","domain","range","rangeStep","scheme"]));function bi(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return W(["sequential","ordinal","bin-ordinal","quantile","quantize"],e);case"interpolate":return W(["linear","bin-linear","pow","log","sqrt","utc","time"],e);case"round":return pi(e)||"band"===e||"point"===e;case"padding":return pi(e)||W(["point","band"],e);case"paddingOuter":case"rangeStep":return W(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return pi(e)||"sequential"===e;case"nice":return pi(e)||"sequential"===e||"quantize"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"zero":return hi(e)&&!W(["log","time","utc","bin-linear","threshold","quantile"],e)}throw new Error("Invalid scale property "+t+".")}function wi(e,t){switch(t){case"interpolate":case"scheme":return ot(e)?void 0:Zt.cannotUseScalePropertyWithNonColor(e);case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}throw new Error('Invalid scale property "'+t+'".')}function Si(e,t){switch(e){case Ne.X:case Ne.Y:case Ne.SIZE:case Ne.OPACITY:return pi(t)||W(["band","point"],t);case Ne.COLOR:case Ne.FILL:case Ne.STROKE:return"band"!==t;case Ne.SHAPE:return"ordinal"===t}return!1}var ki=Object.freeze({get ScaleType(){return Ur},SCALE_TYPES:ei,scaleCompatible:ti,scaleTypePrecedence:ri,CONTINUOUS_TO_CONTINUOUS_SCALES:ii,CONTINUOUS_DOMAIN_SCALES:oi,DISCRETE_DOMAIN_SCALES:si,TIME_SCALE_TYPES:["time","utc"],hasDiscreteDomain:fi,isBinScale:di,hasContinuousDomain:hi,isContinuousToContinuous:pi,defaultScaleConfig:xi,isExtendedScheme:gi,isSelectionDomain:mi,SCALE_PROPERTIES:_i,NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES:yi,scaleTypeSupportProperty:bi,channelScalePropertyIncompatability:wi,channelSupportScaleType:Si}),Ei="_vgsid_";function Ai(e){var t=e.anchor,n=e.offset,r=e.orient,i=e.color,a=ke(e,["anchor","offset","orient","color"]);return{mark:Se({},a,i?{fill:i}:{}),nonMark:Se({},t?{anchor:t}:{},n?{offset:n}:{},r?{orient:r}:{})}}var Ti={width:200,height:200},Ci={padding:5,timeFormat:"%b %d, %Y",countTitle:"Number of Records",invalidValues:"filter",view:Ti,mark:rn,area:{},bar:an,circle:{},geoshape:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:on,trail:{},box:{size:14,extent:1.5},boxWhisker:{},boxMid:{color:"white"},scale:xi,projection:{},axis:{},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:$r,selection:{single:{on:"click",fields:[Ei],resolve:"global",empty:"all"},multi:{on:"click",fields:[Ei],toggle:"event.shiftKey",resolve:"global",empty:"all"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global"}},style:{},title:{}};function Di(e){return H(ee(Ci),e)}var Ni=["view"].concat(qt,jr),Fi=["padding","numberFormat","timeFormat","countTitle","stack","scale","selection","invalidValues","overlay"],Oi=Se({view:["width","height"]},nn,Wr);function Mi(e){e=ee(e);for(var t=0,n=Fi;t<n.length;t++)delete e[o=n[t]];if(e.axis)for(var r=0,i=Hr;r<i.length;r++){var o=i[r];delete e.axis[o]}if(e.legend)for(var u=0,s=Hr;u<s.length;u++)o=s[u],delete e.legend[o];if(e.mark)for(var l=0,c=tn;l<c.length;l++)o=c[l],delete e.mark[o];for(var f=0,d=Ni;f<d.length;f++){for(var h=d[f],p=0,x=tn;p<x.length;p++)o=x[p],delete e[h][o];var g=Oi[h];if(g)for(var m=0,v=g;m<v.length;m++)o=v[m],delete e[h][o];Li(e,h)}for(var o in Li(e,"title","group-title"),e)a(e[o])&&0===J(e[o]).length&&delete e[o];return 0<J(e).length?e:void 0}function Li(e,t,n){var r="title"===t?Ai(e.title).mark:e[t];"view"===t&&(n="cell");var i=Se({},r,e.style[t]);0<J(i).length&&(e.style[n||t]=i),delete e[t]}var Pi=Object.freeze({defaultViewConfig:Ti,defaultConfig:Ci,initConfig:Di,stripAndRedirectConfig:Mi}),zi={zero:1,center:1,normalize:1};function Ii(e){return!!zi[e]}var Ri=[Ot,Ft,Gt,Lt,Wt,Bt,Mt,Pt,zt],Gi=[Ot,Ft];function ji(e,t,n){var r=Ht(e)?e.type:e;if(!W(Ri,r))return null;var a=function(e){var t=e.x,n=e.y;if(tr(t)&&tr(n))if("quantitative"===t.type&&"quantitative"===n.type){if(t.stack)return"x";if(n.stack)return"y";if(!!t.aggregate!=!!n.aggregate)return t.aggregate?"x":"y"}else{if("quantitative"===t.type)return"x";if("quantitative"===n.type)return"y"}else{if(tr(t)&&"quantitative"===t.type)return"x";if(tr(n)&&"quantitative"===n.type)return"y"}}(t);if(!a)return null;var o,u=t[a],s=nr(u)?ar(u,{}):void 0,l="x"===a?"y":"x",c=t[l],f=nr(c)?ar(c,{}):void 0,d=ht.reduce((function(e,n){if(Ar(t,n)){var r=t[n];(i(r)?r:[r]).forEach((function(t){var r=mr(t);if(!r.aggregate){var i=nr(r)?ar(r,{}):void 0;(!i||i!==f&&i!==s)&&e.push({channel:n,fieldDef:r})}}))}return e}),[]);return 0===d.length?null:(o=void 0!==u.stack?u.stack:W(Gi,r)&&void 0===n?"zero":n)&&Ii(o)?(u.scale&&u.scale.type&&u.scale.type!==Ur.LINEAR&&cn(Zt.cannotStackNonLinearScale(u.scale.type)),Ar(t,a===Pe?Ie:Re)?(cn(Zt.cannotStackRangedMark(a)),null):(u.aggregate&&!W(me,u.aggregate)&&cn(Zt.stackNonSummativeAggregate(u.aggregate)),{groupbyChannel:c?l:void 0,fieldChannel:a,impute:Vt(r),stackBy:d,offset:o})):null}var Wi=Object.freeze({isStackOffset:Ii,STACKABLE_MARKS:Ri,STACK_BY_DEFAULT_MARKS:Gi,stack:ji});function Bi(e){return void 0!==e.facet}function Ui(e){return!!e.mark}function Vi(e){return void 0!==e.layer}function qi(e){return void 0!==e.repeat}function Hi(e){return $i(e)||Yi(e)}function $i(e){return void 0!==e.vconcat}function Yi(e){return void 0!==e.hconcat}function Xi(e,t){if(Bi(e))return r=t,i=(n=e).spec,a=ke(n,["spec"]),Se({},a,{spec:Xi(i,r)});var n,r,i,a,o,u,s,l,c,f,d,h,p,x,g,m,v,_,y,b,w,S,k,E,A,T,C,D;if(Vi(e))return function e(t,n,r,i){var a=t.layer,o=t.encoding,u=t.projection,s=ke(t,["layer","encoding","projection"]),l=Zi({parentEncoding:r,encoding:o}),c=Ji({parentProjection:i,projection:u});return Se({},s,{layer:a.map((function(t){return Vi(t)?e(t,n,l,c):Ki(t,n,l,c)}))})}(e,t);if(qi(e))return u=t,s=(o=e).spec,l=ke(o,["spec"]),Se({},l,{spec:Xi(s,u)});if($i(e))return f=t,d=(c=e).vconcat,h=ke(c,["vconcat"]),Se({},h,{vconcat:d.map((function(e){return Xi(e,f)}))});if(Yi(e))return x=t,g=(p=e).hconcat,m=ke(p,["hconcat"]),Se({},m,{hconcat:g.map((function(e){return Xi(e,x)}))});if(Ui(e)){var N=Ar(e.encoding,Ue),F=Ar(e.encoding,Ve);return N||F?(_=t,b=(y=(v=e).encoding).row,w=y.column,S=ke(y,["row","column"]),k=v.mark,E=v.width,A=v.projection,T=v.height,C=v.selection,v.encoding,D=ke(v,["mark","width","projection","height","selection","encoding"]),Se({},D,{facet:Se({},b?{row:b}:{},w?{column:w}:{}),spec:Ki(Se({},A?{projection:A}:{},{mark:k},E?{width:E}:{},T?{height:T}:{},{encoding:S},C?{selection:C}:{}),_)})):Ki(e,t)}throw new Error(Zt.INVALID_SPEC)}function Zi(e){var t=e.parentEncoding,n=e.encoding;if(t&&n){var r=J(t).reduce((function(e,t){return n[t]&&e.push(t),e}),[]);0<r.length&&cn(Zt.encodingOverridden(r))}var i=Se({},t||{},n||{});return 0<J(i).length?i:void 0}function Ji(e){var t=e.parentProjection,n=e.projection;return t&&n&&cn(Zt.projectionOverridden({parentProjection:t,projection:n})),n||t}function Ki(e,t,n,r){var i=e.encoding,o=e.projection,u=Ht(e.mark)?e.mark.type:e.mark;if(n||r){var s=Ji({parentProjection:r,projection:o}),l=Zi({parentEncoding:n,encoding:i});return Ki(Se({},e,s?{projection:s}:{},l?{encoding:l}:{}),t)}return Yt(e.mark)?Dr(i)?function(e){var t=Ar(e.encoding,Pe),n=Ar(e.encoding,ze),r=Ar(e.encoding,Ie),i=Ar(e.encoding,Re);if(r&&!t||i&&!n){var a=ee(e);return r&&!t&&(a.encoding.x=a.encoding.x2,delete a.encoding.x2),i&&!n&&(a.encoding.y=a.encoding.y2,delete a.encoding.y2),a}return e}(e):"line"===u&&(i.x2||i.y2)?(cn(Zt.lineWithRange(!!i.x2,!!i.y2)),Ki(Se({mark:"rule"},e),t,n,r)):Vt(u)?function(e,t){void 0===t&&(t={});var n,r,i,o,u,s=e.selection,l=e.projection,c=e.encoding,f=e.mark,d=ke(e,["selection","projection","encoding","mark"]),h=Ht(f)?f:{type:f},p=(i=h,o=t[h.type],u=c,"transparent"===i.point?{opacity:0}:i.point?a(i.point)?i.point:{}:void 0!==i.point?null:o.point||u.shape?a(o.point)?o.point:{}:null),x="area"===h.type&&(n=h,r=t[h.type],n.line?!0===n.line?{}:n.line:void 0!==n.line?null:r.line?!0===r.line?{}:r.line:null);if(!p&&!x)return Se({},e,{mark:Qi(h)});var g,m=[{mark:Qi(Se({},h,"area"===h.type?{opacity:.7}:{})),encoding:c}],v=ji(h,c,t?t.stack:void 0),_=c;if(v){var y=v.fieldChannel,b=v.offset;_=Se({},c,((g={})[y]=Se({},c[y],b?{stack:b}:{}),g))}return x&&m.push(Se({},l?{projection:l}:{},{mark:Se({type:"line"},x)},s?{selection:s}:{},{encoding:_})),p&&m.push(Se({},l?{projection:l}:{},{mark:Se({type:"point",opacity:1,filled:!0},p)},s?{selection:s}:{},{encoding:_})),Se({},d,{layer:m})}(e,t):e:Br(e,t)}function Qi(e){e.point,e.line;var t=ke(e,["point","line"]);return 1<J(t).length?t:t.type}function ea(e,t){return t.forEach((function(t){var n=j(["field","type","value","timeUnit","bin","aggregate"].reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{}));e[n]=e[n]||t})),e}var ta=Object.freeze({isFacetSpec:Bi,isUnitSpec:Ui,isLayerSpec:Vi,isRepeatSpec:qi,isConcatSpec:Hi,isVConcatSpec:$i,isHConcatSpec:Yi,normalize:Xi,fieldDefs:function(e){return K(function e(t,n){return void 0===n&&(n={}),Vi(t)?t.layer.forEach((function(t){Ui(t)?ea(n,Nr(t.encoding)):e(t,n)})):Bi(t)?(ea(n,Nr(t.facet)),e(t.spec,n)):qi(t)?e(t.spec,n):Hi(t)?($i(t)?t.vconcat:t.hconcat).forEach((function(t){return e(t,n)})):ea(n,Nr(t.encoding)),n}(e))},isStacked:function(e,t){return t=t||e.config,!!Yt(e.mark)&&null!==ji(e.mark,e.encoding,t?t.stack:void 0)}});function na(e){return o(e)?{type:e}:e||{}}var ra=["background","padding","datasets"];function ia(e){return ra.reduce((function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t}),{})}function aa(e){return!!e.url}function oa(e){return!!e.values}function ua(e){return!!e.name}var sa="main",la="raw",ca=Object.freeze({isUrlData:aa,isInlineData:oa,isNamedData:ua,MAIN:sa,RAW:la});function fa(e,t,n){return da=t||pa,ha=n||ga,va(e.trim()).map(_a)}var da,ha,pa="view",xa=/[[\]{}]/,ga={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function ma(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&0<=i.indexOf(a)?--o:r&&0<=r.indexOf(a)&&++o}return t}function va(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=ma(e,i,",","[{","]}"),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function _a(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=ma(e,i,"]","[","]"))===r)throw"Empty between selector: "+e;if(2!==(t=va(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(i+1).trim())[0])throw"Expected '>' after between selector: "+e;return t=t.map(_a),(n=_a(e.slice(1).trim())).between?{between:t,stream:n}:(n.between=t,n)}(e):function(e){var t,n,r,i={source:da},a=[],o=[0,0],u=0,s=0,l=e.length,c=0;if("}"===e[l-1]){if(!(0<=(c=e.lastIndexOf("{"))))throw"Unmatched right brace: "+e;try{o=function(e){var t=e.split(",");if(!e.length||2<t.length)throw e;return t.map((function(t){var n=+t;if(n!=n)throw e;return n}))}(e.substring(c+1,l-1))}catch(t){throw"Invalid throttle specification: "+e}l=(e=e.slice(0,c).trim()).length,c=0}if(!l)throw e;if("@"===e[0]&&(u=++c),(t=ma(e,c,":"))<l&&(a.push(e.substring(s,t).trim()),s=c=++t),(c=ma(e,c,"["))===l)a.push(e.substring(s,l).trim());else if(a.push(e.substring(s,c).trim()),n=[],(s=++c)===l)throw"Unmatched left bracket: "+e;for(;c<l;){if((c=ma(e,c,"]"))===l)throw"Unmatched left bracket: "+e;if(n.push(e.substring(s,c).trim()),c<l-1&&"["!==e[++c])throw"Expected left bracket: "+e;s=++c}if(!(l=a.length)||xa.test(a[l-1]))throw"Invalid event selector: "+e;return 1<l?(i.type=a[1],u?i.markname=a[0].slice(1):(r=a[0],ha.hasOwnProperty(r)?i.marktype=a[0]:i.source=a[0])):i.type=a[0],"!"===i.type.slice(-1)&&(i.consume=!0,i.type=i.type.slice(0,-1)),null!=n&&(i.filter=n),o[0]&&(i.throttle=o[0]),o[1]&&(i.debounce=o[1]),i}(e)}function ya(e){return void 0!==e.filter}function ba(e){return void 0!==e.lookup}function wa(e){return void 0!==e.window}function Sa(e){return void 0!==e.calculate}function ka(e){return!!e.bin}function Ea(e){return void 0!==e.timeUnit}function Aa(e){return void 0!==e.aggregate}function Ta(e){return e.map((function(e){return ya(e)?{filter:function e(t,n){return I(t)?{not:e(t.not,n)}:z(t)?{and:t.and.map((function(t){return e(t,n)}))}:P(t)?{or:t.or.map((function(t){return e(t,n)}))}:n(t)}(e.filter,xs)}:e}))}var Ca=Object.freeze({isFilter:ya,isLookup:ba,isWindow:wa,isCalculate:Sa,isBin:ka,isTimeUnit:Ea,isAggregate:Aa,normalizeTransform:Ta});function Da(e){return!!e.signal}function Na(e){return!!e.step}function Fa(e){return!i(e)&&"field"in e&&"data"in e}var Oa=Q({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,limit:1,dx:1,dy:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,cursor:1,href:1});function Ma(e,t,n,r){void 0===r&&(r={header:!1});var a=e.combine(),o=a.orient,u=a.scale,s=a.title,l=a.zindex,c=ke(a,["orient","scale","title","zindex"]);if(J(c).forEach((function(e){var n=Ae[e];n&&n!==t&&"both"!==n&&delete c[e]})),"grid"===t){if(!c.grid)return;if(c.encode){var f=c.encode.grid;c.encode=Se({},f?{grid:f}:{}),0===J(c.encode).length&&delete c.encode}return Se({scale:u,orient:o},c,{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:void 0!==l?l:0})}if(r.header||!e.mainExtracted){if(c.encode){for(var d=0,h=Ee;d<h.length;d++){var p=h[d];e.hasAxisPart(p)||delete c.encode[p]}0===J(c.encode).length&&delete c.encode}var x,g,m=(g=n,i(x=s)?x.map((function(e){return xr(e,g)})).join(", "):x);return Se({scale:u,orient:o},m?{title:m}:{},c,{zindex:void 0!==l?l:1})}}function La(e){return[].concat(e.type,e.style||[])}function Pa(e,t,n){var r=n.mark[e],i=n[t.type];void 0!==i[e]&&(r=i[e]);for(var a=0,o=La(t);a<o.length;a++){var u=o[a],s=n.style[u],l=e;s&&void 0!==s[l]&&(r=s[l])}return r}function za(e,t,n,r){var i=Ra(e,t,r);if(e.bin)return{signal:Wa(ar(e,{expr:n}),ar(e,{expr:n,binSuffix:"end"}),i,r)};if("quantitative"===e.type)return{signal:""+Ga(ar(e,{expr:n,binSuffix:"range"}),i)};if(kr(e)){var a=ir(e)&&e.scale&&e.scale.type===Ur.UTC;return{signal:Ba(ar(e,{expr:n}),e.timeUnit,t,r.text.shortTimeLabels,r.timeFormat,a)}}return{signal:"''+"+ar(e,{expr:n})}}function Ia(e,t){return void 0!==e?e:t}function Ra(e,t,n){if(e.type===Bn)return t||n.numberFormat}function Ga(e,t){return"format("+e+', "'+(t||"")+'")'}function ja(e,t,n){return Ga(e,t||n.numberFormat)}function Wa(e,t,n,r){return e+" === null || isNaN("+e+') ? "null" : '+ja(e,n,r)+' + " - " + '+ja(t,n,r)}function Ba(e,t,n,r,i,a){if(!t||n){var o=n||i;return a?"utcFormat("+e+", '"+o+"')":"timeFormat("+e+", '"+o+"')"}return zn(t,e,r,a)}function Ua(e,t){return(i(e)?e:[e]).reduce((function(e,n){return e.field.push(ar(n,t)),e.order.push(n.sort||"ascending"),e}),{field:[],order:[]})}function Va(e,t){var n=e.slice();return t.forEach((function(e){for(var t=0,r=n;t<r.length;t++){var i=r[t];if(G(i)===G(e))return}n.push(e)})),n}function qa(e,t){if(i(e.value)&&i(t.value))return{explicit:e.explicit,value:Va(e.value,t.value)};if(!i(e.value)&&!i(t.value))return{explicit:e.explicit,value:e.value===t.value?e.value:e.value+", "+t.value};throw new Error("It should never reach here")}function Ha(e,t){return e.bin?yt(t)&&W(["ordinal","nominal"],e.type):(console.warn("Only use this method with binned field defs"),!1)}var $a=["row","column"],Ya=["header","footer"];function Xa(e,t){for(var n=e.component.layoutHeaders[t],r=[],i=0,a=Ya;i<a.length;i++){var o=a[i];if(n[o])for(var u=0,s=n[o];u<s.length;u++){var l=s[u];r.push(Za(e,t,o,n,l))}}return r}function Za(e,t,n,r,i){if(i){var a=null,o=r.facetFieldDef;if(o&&i.labels){var u=o.header,s=void 0===u?{}:u,l=s.format,c=s.labelAngle,f=Se({},void 0!==c?{angle:{value:c}}:{},(90+(g=((g=c)%360+360)%360))%180==0?{}:g<90||270<g?{align:{value:"right"}}:135<=g&&g<225?{align:{value:"left"}}:{},45<=(x=((x=c)%360+360)%360)&&x<=135?{baseline:{value:"top"}}:{});a=Se({text:za(o,l,"parent",e.config),offset:10,orient:"row"===t?"left":"top",style:"guide-label"},0<J(f).length?{encode:{update:f}}:{})}var d=i.axes,h=d&&0<d.length;if(a||h){var p="row"===t?"height":"width";return Se({name:e.getName(t+"_"+n),type:"group",role:t+"-"+n},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:{field:ar(o,{expr:"datum"}),order:o.sort||"ascending"}}:{},a?{title:a}:{},i.sizeSignal?{encode:{update:(m={},m[p]=i.sizeSignal,m)}}:{},h?{axes:d}:{})}}var x,g,m;return null}function Ja(e){return[].concat(Ka(e,"width"),Ka(e,"height"))}function Ka(e,t){var n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];var i=e.getSizeSignalRef(t).signal;if("range-step"===r){var a=e.getScaleComponent(n);if(a){var o=a.get("type"),u=a.get("range");if(fi(o)&&Na(u)){var s=e.scaleName(n);return Su(e.parent)&&"independent"===e.parent.component.resolve.scale[n]?[Qa(s,u)]:[Qa(s,u),{name:i,update:eo(s,a,"domain('"+s+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}return[{name:i,value:r}]}function Qa(e,t){return{name:e+"_step",value:t.step}}function eo(e,t,n){var r=t.get("type"),i=t.get("padding"),a=t.get("paddingOuter");a=void 0!==a?a:i;var o=t.get("paddingInner");return"bandspace("+n+", "+(o="band"===r?void 0!==o?o:i:1)+", "+a+") * "+e+"_step"}function to(e,t){var n=e.scale[t],r=W(xt,t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&cn(Zt.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var no=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.explicit=e,this.implicit=t}return e.prototype.clone=function(){return new e(ee(this.explicit),ee(this.implicit))},e.prototype.combine=function(){return Se({},this.explicit,this.implicit)},e.prototype.get=function(e){return void 0!==this.explicit[e]?this.explicit[e]:this.implicit[e]},e.prototype.getWithExplicit=function(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}},e.prototype.setWithExplicit=function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)},e.prototype.set=function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this},e.prototype.copyKeyFromSplit=function(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)},e.prototype.copyKeyFromObject=function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)},e}();function ro(e){return{explicit:!0,value:e}}function io(e){return{explicit:!1,value:e}}function ao(e){return function(t,n,r,i){var a=e(t.value,n.value);return 0<a?t:a<0?n:oo(t,n,r,i)}}function oo(e,t,n,r){return e.explicit&&t.explicit&&cn(Zt.mergeConflictingProperty(n,r,e.value,t.value)),e}function uo(e,t,n,r,i){return void 0===i&&(i=oo),void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:G(e.value)===G(t.value)?e:i(e,t,n,r)}var so=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return we(t,e),t}(no);function lo(e,t,n,r){return co(e,t,{binSuffix:"start"===n?void 0:"end"},r?{offset:r}:{})}function co(e,t,n,r){var i=Se({},t?{scale:t}:{},{field:ar(e,n)});return r?Se({},i,r):i}function fo(e,t){return void 0===t&&(t=!0),{scale:e,band:t}}function ho(e,t,n,r,i,a){if(t){if(tr(t)){if(t.bin)return W([Pe,ze],e)&&t.type===Bn?i&&i.impute?co(t,n,{binSuffix:"mid"}):{signal:'(scale("'+(s=n)+'", '+ar(u=t,{expr:"datum"})+') + scale("'+s+'", '+ar(u,{binSuffix:"end",expr:"datum"})+"))/2"}:co(t,n,Ha(t,e)?{binSuffix:"range"}:{});if(r){var o=r.get("type");if(fi(o))return"band"===o?co(t,n,{binSuffix:"range"},{band:.5}):co(t,n,{binSuffix:"range"})}return co(t,n,{})}if(rr(t))return{value:t.value}}var u,s;return a}function po(e,t){if(e){if(tr(e))return za(e,e.format,"datum",t);if(rr(e))return{value:e.value}}}function xo(e){return Se({},e,{mult:.5})}function go(e,t,n,r,a){if(o(e)){if(n){var u=r.get("type");if(W([Ur.LOG,Ur.TIME,Ur.UTC],u))"bar"!==a&&"area"!==a||cn(Zt.nonZeroScaleUsedWithLengthMark(a,t,{scaleType:u}));else{if(function(e){if(!1!==e.get("zero"))return!0;var t=e.domains;return!!i(t)&&U(t,(function(e){return i(e)&&2===e.length&&e[0]<=0&&0<=e[1]}))}(r))return{scale:n,value:0};"bar"!==a&&"area"!==a||cn(Zt.nonZeroScaleUsedWithLengthMark(a,t,{zeroFalse:!1===r.explicit.zero}))}}return"zeroOrMin"===e?"x"===t?{value:0}:{field:{group:"height"}}:"x"===t?{field:{group:"width"}}:{value:0}}return e}function mo(e,t){void 0===t&&(t={valueOnly:!1});var n,r,i=e.markDef,a=e.encoding,o=e.config,u=i.filled,s=i.type,l={fill:Pa("fill",i,o),stroke:Pa("stroke",i,o),color:Pa("color",i,o)},c=W(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,f={fill:i.fill||l.fill||c,stroke:i.stroke||l.stroke},d=u?"fill":"stroke",h=Se({},f.fill?{fill:{value:f.fill}}:{},f.stroke?{stroke:{value:f.stroke}}:{});return a.fill||a.stroke?(i.color&&cn(Zt.droppingColor("property",{fill:"fill"in a,stroke:"stroke"in a})),Se({},bo("fill",e,{defaultValue:f.fill||c}),bo("stroke",e,{defaultValue:f.stroke}))):a.color?Se({},h,bo("color",e,{vgChannel:d,defaultValue:i[d]||i.color||l[d]||l.color||(u?c:void 0)})):i.fill||i.stroke?(i.color&&cn(Zt.droppingColor("property",{fill:"fill"in i,stroke:"stroke"in i})),h):i.color?Se({},h,((n={})[d]={value:i.color},n)):l.fill||l.stroke?h:l.color?Se({},c?{fill:{value:"transparent"}}:{},((r={})[d]={value:l.color},r)):{}}function vo(e,t){return Se({},(n=e.markDef,r=t,Oa.reduce((function(e,t){return void 0!==n[t]&&"ignore"!==r[t]&&(e[t]={value:n[t]}),e}),{})),mo(e),bo("opacity",e),function(e){var t="tooltip",n=e.encoding[t];return i(n)?{tooltip:{signal:"{"+n.map((function(t){return'"'+(void 0!==t.title?t.title:ar(t,{binSuffix:"range"}))+'": '+po(t,e.config).signal})).join(", ")+"}"}}:ko(e,t,n)}(e),So(e,"href"));var n,r}function _o(e){return e+" !== null && !isNaN("+e+")"}function yo(e){if("filter"===e.config.invalidValues){var t=["x","y"].map((function(t){var n=e.getScaleComponent(t);if(n&&hi(n.get("type")))return e.vgField(t,{expr:"datum"})})).filter((function(e){return!!e})).map(_o);if(0<t.length)return{defined:{signal:t.join(" && ")}}}return{}}function bo(e,t,n){void 0===n&&(n={});var r=n.defaultValue,i=n.vgChannel,a=n.defaultRef||(void 0!==r?{value:r}:void 0),o=t.encoding[e];return wo(t,o,i||e,(function(n){return ho(e,n,t.scaleName(e),t.getScaleComponent(e),null,a)}))}function wo(e,t,n,r){var a,o,u=t&&t.condition,s=r(t);if(u){var l=(i(u)?u:[u]).map((function(t){var n=r(t),i=Xn(t)?ts(e,t.selection):hs(e,t.test);return Se({test:i},n)}));return(a={})[n]=l.concat(void 0!==s?[s]:[]),a}return void 0!==s?((o={})[n]=s,o):{}}function So(e,t){return void 0===t&&(t="text"),ko(e,t,e.encoding[t])}function ko(e,t,n){return wo(e,n,t,(function(t){return po(t,e.config)}))}function Eo(e,t,n){var r,i,a,o=n.scaleName(t),u="x"===t?"width":"height";if(n.encoding.size||void 0!==n.markDef.size)if(n.markDef.orient){var s=((r={})[t+"c"]=co(e,o,{},{band:.5}),r);if(mr(n.encoding.size))cn(Zt.cannotUseSizeFieldWithBandSize(t));else{if(rr(n.encoding.size))return Se({},s,bo("size",n,{vgChannel:u}));if(void 0!==n.markDef.size)return Se({},s,((i={})[u]={value:n.markDef.size},i))}}else cn(Zt.cannotApplySizeToNonOrientedMark(n.markDef.type));return(a={})[t]=co(e,o,{binSuffix:"range"}),a[u]=fo(o),a}function Ao(e,t,n,r){var i="x"===e?"width":"height";return Se({},Co(e,t,n,"x"===e?"xc":"yc"),bo("size",t,{defaultRef:r,vgChannel:i}))}function To(e,t,n,r,i){return"x"===t?{x2:lo(e,n,"start",i?0:r),x:lo(e,n,"end",i?r:0)}:{y2:lo(e,n,"start",i?r:0),y:lo(e,n,"end",i?0:r)}}function Co(e,t,n,r){var i,a,o,u,s,l,c,f=t.encoding,d=t.mark,h=t.stack,p=f[e],x=t.scaleName(e),g=t.getScaleComponent(e),m=p||!f.latitude&&!f.longitude?(a=f[i=e],s=h,l=go(n,e,o=x,u=g,d),tr(a)&&s&&i===s.fieldChannel?co(a,o,{suffix:"end"}):ho(i,a,o,u,s,l)):{field:t.getName(e)};return(c={})[r||e]=m,c}function Do(e,t,n){var r,i,a,o,u,s,l,c,f=e.encoding,d=e.mark,h=e.markDef,p=e.stack,x="x2"===(n=n||("horizontal"===h.orient?"x2":"y2"))?"x":"y",g=f[x],m=e.scaleName(x),v=e.getScaleComponent(x),_=g||!f.latitude&&!f.longitude?(i=g,a=f[r=n],s=p,l=go(t,x,o=m,u=v,d),tr(i)&&s&&r.charAt(0)===s.fieldChannel.charAt(0)?co(i,o,{suffix:"start"}):ho(r,a,o,u,s,l)):{field:e.getName(n)};return(c={})[n]=_,c}function No(e){return Oo(e,(function(e,t){return Math.max(e,t.value)}))}function Fo(e){return Oo(e,(function(e,t){return void 0!==e?e:t.value}))}function Oo(e,t){return er(e)?(i(e.condition)?e.condition:[e.condition]).reduce(t,e.value):rr(e)?e.value:void 0}var Mo=Object.freeze({symbols:function(e,t,n,r,a){if("gradient"!==a){var o=Se({},function(e,t,n){for(var r=0,i=n;r<i.length;r++){var a=i[r],o=Pa(a,t.markDef,t.config);void 0!==o&&(e[a]={value:o})}return e}({},n,en),mo(n));switch(n.mark){case Ot:case zt:case Pt:o.shape={value:"square"};break;case Wt:case Bt:o.shape={value:n.mark}}var u=n.markDef,s=n.encoding,l=u.filled;if(o.fill)if("fill"===r||l&&r===$e)delete o.fill;else if(o.fill.field)delete o.fill;else if(i(o.fill)){var c=Fo(s.fill||s.color)||u.fill||l&&u.color;c&&(o.fill={value:c})}if(o.stroke)if("stroke"===r||!l&&r===$e)delete o.stroke;else if(o.stroke.field)delete o.stroke;else if(i(o.stroke)){var f=Fo(s.stroke||s.color)||u.stroke||!l&&u.color;f&&(o.stroke={value:f})}if(o.fill&&"transparent"!==o.fill.value&&!o.stroke&&(o.stroke={value:"transparent"}),r!==qe){var d=Fo(s.shape)||u.shape;d&&(o.shape={value:d})}if(r!==et){var h=No(s.opacity)||u.opacity;h&&(o.opacity={value:h})}return o=Se({},o,t),0<J(o).length?o:void 0}},gradient:function(e,t,n,r,i){var a={};if("gradient"===i){var o=No(n.encoding.opacity)||n.markDef.opacity;o&&(a.opacity={value:o})}return a=Se({},a,t),0<J(a).length?a:void 0},labels:function(e,t,n,r,i){var a=n.legend(r),o=n.config,u={};if(kr(e)){var s=n.getScaleComponent(r).get("type")===Ur.UTC;t=Se({text:{signal:Ba("datum.value",e.timeUnit,a.format,o.legend.shortTimeLabels,o.timeFormat,s)}},t)}return u=Se({},u,t),0<J(u).length?u:void 0}});function Lo(e,t){if(!e)return t.clone();var n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(!n.explicit||!r.explicit||n.value===r.value){for(var i=!1,a=function(n){var r=uo(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",(function(e,t){switch(n){case"title":return qa(e,t);case"type":return i=!0,io("symbol")}return oo(e,t,n,"legend")}));e.setWithExplicit(n,r)},o=0,u=Jr;o<u.length;o++)a(u[o]);return i&&(((e.implicit||{}).encode||{}).gradient&&ie(e.implicit,["encode","gradient"]),((e.explicit||{}).encode||{}).gradient&&ie(e.explicit,["encode","gradient"])),e}}function Po(e){for(var t=e.component.legends,n={},r=0,i=J(t);r<i.length;r++){var a=i[r],o=e.getScaleComponent(a),u=G(o.domains);if(n[u])for(var s=0,l=n[u];s<l.length;s++)Lo(l[s],t[a])||n[u].push(t[a]);else n[u]=[t[a].clone()]}return q(K(n)).map((function(e){return e.combine()}))}function zo(e){var t=e.component.projection;if(!t||t.merged)return[];var n=t.combine(),r=n.name,i=ke(n,["name"]),a={signal:"["+t.size.map((function(e){return e.signal})).join(", ")+"]"},o=t.data.reduce((function(t,n){var r=Da(n)?n.signal:"data('"+e.lookupDataSource(n)+"')";return W(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Se({name:r,size:a,fit:{signal:1<o.length?"["+o.join(", ")+"]":o[0]}},i)]}var Io=["type","clipAngle","clipExtent","center","rotate","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],Ro=function(e){function t(t,n,r,i){var a=e.call(this,Se({},n),{name:t})||this;return a.specifiedProjection=n,a.size=r,a.data=i,a.merged=!1,a}return we(t,e),t}(no);function Go(e){return!(!e||"count"!==e.op&&!e.field||!e.op)}function jo(e){return!!e&&i(e)&&e.every((function(e){return o(e)}))}var Wo=Object.freeze({isSortField:Go,isSortArray:jo}),Bo=function(){function e(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}return e.prototype.clone=function(){throw new Error("Cannot clone node")},e.prototype.producedFields=function(){return{}},e.prototype.dependentFields=function(){return{}},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(e){(this._parent=e).addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return this._children.length},e.prototype.addChild=function(e){this._children.push(e)},e.prototype.removeChild=function(e){this._children.splice(this._children.indexOf(e),1)},e.prototype.remove=function(){for(var e=0,t=this._children;e<t.length;e++)t[e].parent=this._parent;this._parent.removeChild(this)},e.prototype.insertAsParentOf=function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this},e.prototype.swapWithParent=function(){for(var e=this._parent,t=e.parent,n=0,r=this._children;n<r.length;n++)r[n].parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this},e}(),Uo=function(e){function t(t,n,r,i){var a=e.call(this,t,n)||this;return a.type=r,a.refCounts=i,a._source=a._name=n,!a.refCounts||a._name in a.refCounts||(a.refCounts[a._name]=0),a}return we(t,e),t.prototype.clone=function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e},t.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},t.prototype.isRequired=function(){return!!this.refCounts[this._name]},t.prototype.setSource=function(e){this._source=e},t}(Bo),Vo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.transform=n,r}return we(t,e),t.prototype.clone=function(){return new t(null,ee(this.transform))},t.parseAllForSortIndex=function(e,n){return n.forEachFieldDef((function(r,i){if(ir(r)&&jo(r.sort)){var a={calculate:t.calculateExpressionFromSortField(r.field,r.sort),as:qo(n,i)};e=new t(e,a)}})),e},t.calculateExpressionFromSortField=function(e,t){var n,r="";for(n=0;n<t.length;n++)r+="datum."+e+" === '"+t[n]+"' ? "+n+" : ";return r+n},t.prototype.producedFields=function(){var e={};return e[this.transform.as]=!0,e},t.prototype.assemble=function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}},t}(Bo);function qo(e,t){return t+"_"+ar(e.fieldDef(t))+"_sort_index"}var Ho=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dimensions=n,i.measures=r,i}return we(t,e),t.prototype.clone=function(){return new t(null,Se({},this.dimensions),ee(this.measures))},t.makeFromEncoding=function(e,n){var r=!1;n.forEachFieldDef((function(e){e.aggregate&&(r=!0)}));var i={},a={};return r?(n.forEachFieldDef((function(e,t){var r,o,u;e.aggregate?"count"===e.aggregate?(i["*"]=i["*"]||{},i["*"].count=ar(e,{aggregate:"count"})):(i[e.field]=i[e.field]||{},i[e.field][e.aggregate]=ar(e),yt(t)&&"unaggregated"===n.scaleDomain(t)&&(i[e.field].min=ar(e,{aggregate:"min"}),i[e.field].max=ar(e,{aggregate:"max"}))):(r=a,o=t,(u=e).bin?(r[ar(u,{})]=!0,r[ar(u,{binSuffix:"end"})]=!0,Ha(u,o)&&(r[ar(u,{binSuffix:"range"})]=!0)):r[ar(u)]=!0)})),J(a).length+J(i).length===0?null:new t(e,a,i)):null},t.makeFromTransform=function(e,n){for(var r={},i={},a=0,o=n.aggregate;a<o.length;a++)(l=o[a]).op&&("count"===l.op?(i["*"]=i["*"]||{},i["*"].count=l.as||ar(l)):(i[l.field]=i[l.field]||{},i[l.field][l.op]=l.as||ar(l)));for(var u=0,s=n.groupby||[];u<s.length;u++){var l;r[l=s[u]]=!0}return J(r).length+J(i).length===0?null:new t(e,r,i)},t.prototype.merge=function(e){X(this.dimensions,e.dimensions)?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ln.debug.apply(ln,arguments)}("different dimensions, cannot merge"):(function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&(n in e?e[n][i]=r[i]:e[n]={op:r[i]})}}(this.measures,e.measures),e.remove())},t.prototype.addDimensions=function(e){var t=this;e.forEach((function(e){return t.dimensions[e]=!0}))},t.prototype.dependentFields=function(){var e={};return J(this.dimensions).forEach((function(t){return e[t]=!0})),J(this.measures).forEach((function(t){return e[t]=!0})),e},t.prototype.producedFields=function(){var e=this,t={};return J(this.measures).forEach((function(n){J(e.measures[n]).forEach((function(e){t[e+"_"+n]=!0}))})),t},t.prototype.assemble=function(){for(var e=[],t=[],n=[],r=0,i=J(this.measures);r<i.length;r++)for(var a=i[r],o=0,u=J(this.measures[a]);o<u.length;o++){var s=u[o];n.push(this.measures[a][s]),e.push(s),t.push(a)}return{type:"aggregate",groupby:J(this.dimensions),ops:e,fields:t,as:n}},t}(Bo),$o=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.model=n,a.name=r,a.data=i,n.facet.column&&(a.columnFields=[n.vgField(Ve)],a.columnName=n.getName("column_domain"),n.fieldDef(Ve).bin&&a.columnFields.push(n.vgField(Ve,{binSuffix:"end"}))),n.facet.row&&(a.rowFields=[n.vgField(Ue)],a.rowName=n.getName("row_domain"),n.fieldDef(Ue).bin&&a.rowFields.push(n.vgField(Ue,{binSuffix:"end"}))),a.childModel=n.child,a}return we(t,e),Object.defineProperty(t.prototype,"fields",{get:function(){var e=[];return this.columnFields&&(e=e.concat(this.columnFields)),this.rowFields&&(e=e.concat(this.rowFields)),e},enumerable:!0,configurable:!0}),t.prototype.getSource=function(){return this.name},t.prototype.getChildIndependentFieldsWithStep=function(){for(var e={},t=0,n=["x","y"];t<n.length;t++){var r=n[t],i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),o=i.get("range");if(fi(a)&&Na(o)){var u=lu(cu(this.childModel,r));u?e[r]=u:cn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e},t.prototype.assembleRowColumnData=function(e,t,n){var r={},i="row"===e?"y":"x";return n[i]&&(r=t?{fields:["distinct_"+n[i]],ops:["max"],as:["distinct_"+n[i]]}:{fields:[n[i]],ops:["distinct"]}),{name:"row"===e?this.rowName:this.columnName,source:t||this.data,transform:[Se({type:"aggregate",groupby:"row"===e?this.rowFields:this.columnFields},r)]}},t.prototype.assemble=function(){var e=[],t=null,n=this.getChildIndependentFieldsWithStep();if(this.columnName&&this.rowName&&(n.x||n.y)){t="cross_"+this.columnName+"_"+this.rowName;var r=[].concat(n.x?[n.x]:[],n.y?[n.y]:[]),i=r.map((function(){return"distinct"}));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.columnFields.concat(this.rowFields),fields:r,ops:i}]})}return this.columnName&&e.push(this.assembleRowColumnData("column",t,n)),this.rowName&&e.push(this.assembleRowColumnData("row",t,n)),e},t}(Bo),Yo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.fieldDefs=n,r}return we(t,e),t.prototype.clone=function(){return new t(null,Se({},this.fieldDefs))},t.make=function(e,n){var r=n.config,i=n.mark;if("filter"!==r.invalidValues)return null;var a=n.reduceFieldDef((function(e,t,r){var a=yt(r)&&n.getScaleComponent(r);return a&&(!hi(a.get("type"))||t.aggregate||Vt(i)||(e[t.field]=t)),e}),{});return J(a).length?new t(e,a):null},Object.defineProperty(t.prototype,"filter",{get:function(){return this.fieldDefs},enumerable:!0,configurable:!0}),t.prototype.assemble=function(){var e=this,t=J(this.filter).reduce((function(t,n){var r=e.fieldDefs[n],i=ar(r,{expr:"datum"});return null!==r&&(t.push(i+" !== null"),t.push("!isNaN("+i+")")),t}),[]);return 0<t.length?{type:"filter",expr:t.join(" && ")}:null},t}(Bo),Xo=function(e){function t(t,n){var r=e.call(this,t)||this;return r._parse={},r._parse=n,r}return we(t,e),t.prototype.clone=function(){return new t(null,ee(this.parse))},t.make=function(e,n){var r={},i={};(n.transforms||[]).forEach((function(e){Sa(e)?i[e.as]=!0:ya(e)&&function e(t,n){if(I(t))e(t.not,n);else if(z(t))for(var r=0,i=t.and;r<i.length;r++)e(i[r],n);else if(P(t))for(var a=0,o=t.or;a<o.length;a++)e(o[a],n);else n(t)}(e.filter,(function(e){ds(e)&&e.timeUnit&&(r[e.field]="date")}))}),{}),(wu(n)||Su(n))&&n.forEachFieldDef((function(e){if(kr(e))r[e.field]="date";else if(Sr(e)){if(i[e.field]||ge(e.aggregate))return;r[e.field]="number"}else 1<ce(e.field)&&(r[e.field]="flatten")}));var a=n.data;if(a&&a.format&&a.format.parse){var o=a.format.parse;J(o).forEach((function(e){r[e]=o[e]}))}var u=n.component.data.ancestorParse;return J(u).forEach((function(e){r[e]!==u[e]?cn(Zt.differentParse(e,r[e],u[e])):delete r[e]})),0===J(r).length?null:new t(e,r)},Object.defineProperty(t.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){this._parse=Se({},this._parse,e.parse),e.remove()},t.prototype.assembleFormatParse=function(){for(var e={},t=0,n=J(this._parse);t<n.length;t++){var r=n[t];1===ce(r)&&(e[r]=this._parse[r])}return e},t.prototype.producedFields=function(){return x(J(this.parse))},t.prototype.dependentFields=function(){return x(J(this.parse))},t.prototype.assembleTransforms=function(e){var t=this;return void 0===e&&(e=!1),J(this._parse).filter((function(t){return!e||1<ce(t)})).map((function(e){var n,r,i,a=(n=e,r=t._parse[e],i=oe(n),"number"===r?"toNumber("+i+")":"boolean"===r?"toBoolean("+i+")":"string"===r?"toString("+i+")":"date"===r?"toDate("+i+")":"flatten"===r?i:0===r.indexOf("date:")?"timeParse("+i+","+r.slice(5,r.length)+")":0===r.indexOf("utc:")?"utcParse("+i+","+r.slice(4,r.length)+")":(cn(Zt.unrecognizedParse(r)),null));return a?{type:"formula",expr:a,as:le(e)}:null})).filter((function(e){return null!==e}))},t}(Bo),Zo=function(e){function t(t){var n=e.call(this,null)||this;if(oa(t=t||{name:"source"}))n._data={values:t.values};else if(aa(t)){if(n._data={url:t.url},t.format||(t.format={}),!t.format||!t.format.type){var r=/(?:\.([^.]+))?$/.exec(t.url)[1];W(["json","csv","tsv","topojson"],r)||(r="json"),t.format.type=r}}else ua(t)&&(n._name=t.name,n._data={});if(!ua(t)&&t.format){var i=t.format,a=(i.parse,ke(i,["parse"]));n._data.format=a}return n}return we(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.hasName=function(){return!!this._name},Object.defineProperty(t.prototype,"dataName",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{set:function(e){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),t.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},t.prototype.hash=function(){return oa(this._data)?(this._hash||(this._hash=j(this._data)),this._hash):aa(this._data)?j([this._data.url,this._data.format]):this._name},t.prototype.assemble=function(){return Se({name:this._name},this._data,{transform:[]})},t}(Bo),Jo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.formula=n,r}return we(t,e),t.prototype.clone=function(){return new t(null,ee(this.formula))},t.makeFromEncoding=function(e,n){var r=n.reduceFieldDef((function(e,t){if(t.timeUnit){var n=ar(t);e[n]={as:n,timeUnit:t.timeUnit,field:t.field}}return e}),{});return 0===J(r).length?null:new t(e,r)},t.makeFromTransform=function(e,n){return new t(e,((r={})[n.field]={as:n.as,timeUnit:n.timeUnit,field:n.field},r));var r},t.prototype.merge=function(e){this.formula=Se({},this.formula,e.formula),e.remove()},t.prototype.producedFields=function(){var e={};return K(this.formula).forEach((function(t){e[t.as]=!0})),e},t.prototype.dependentFields=function(){var e={};return K(this.formula).forEach((function(t){e[t.field]=!0})),e},t.prototype.assemble=function(){return K(this.formula).map((function(e){return{type:"formula",as:e.as,expr:Pn(e.timeUnit,e.field)}}))},t}(Bo);function Ko(e){return function t(n){if(!(n instanceof Zo)){var r=n.parent;e(n)&&t(r)}}}function Qo(e){var t=e.parent;if(e instanceof Xo){if(t instanceof Zo)return!1;if(1<t.numChildren())return!0;if(t instanceof Xo)t.merge(e);else{if(Z(t.producedFields(),e.dependentFields()))return!0;e.swapWithParent()}}return!0}function eu(e){return!(e instanceof Uo||0<e.numChildren()||e instanceof $o||(e.remove(),0))}function tu(e){var t={};return Ko((function(e){if(e instanceof Jo){var n=e.producedFields();J(n).every((function(e){return!!t[e]}))?e.remove():t=Se({},t,n)}return!0}))(e)}var nu=function(e){function t(t,n){var r=e.call(this,t)||this;return r._stack=n,r}return we(t,e),t.prototype.clone=function(){return new t(null,ee(this._stack))},t.make=function(e,n){var r,a=n.stack;if(!a)return null;a.groupbyChannel&&(r=n.fieldDef(a.groupbyChannel));var o,u=n.stack.stackBy.reduce((function(e,t){var n=ar(t.fieldDef);return n&&e.push(n),e}),[]),s=n.encoding.order;return o=i(s)||tr(s)?Ua(s):u.reduce((function(e,t){return e.field.push(t),e.order.push("descending"),e}),{field:[],order:[]}),new t(e,{dimensionFieldDef:r,field:n.vgField(a.fieldChannel),facetby:[],stackby:u,sort:o,offset:a.offset,impute:a.impute})},Object.defineProperty(t.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),t.prototype.addDimensions=function(e){this._stack.facetby=this._stack.facetby.concat(e)},t.prototype.dependentFields=function(){var e={};e[this._stack.field]=!0,this.getGroupbyFields().forEach((function(t){return e[t]=!0})),this._stack.facetby.forEach((function(t){return e[t]=!0}));var t=this._stack.sort.field;return i(t)?t.forEach((function(t){return e[t]=!0})):e[t]=!0,e},t.prototype.producedFields=function(){var e={};return e[this._stack.field+"_start"]=!0,e[this._stack.field+"_end"]=!0,e},t.prototype.getGroupbyFields=function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute;return t?t.bin?n?[ar(t,{binSuffix:"mid"})]:[ar(t,{}),ar(t,{binSuffix:"end"})]:[ar(t)]:[]},t.prototype.assemble=function(){var e=[],t=this._stack,n=t.facetby,r=t.field,i=t.dimensionFieldDef,a=t.impute,o=t.offset,u=t.sort,s=t.stackby;if(a&&i){var l=i?ar(i,{binSuffix:"mid"}):void 0;i.bin&&e.push({type:"formula",expr:"("+ar(i,{expr:"datum"})+"+"+ar(i,{expr:"datum",binSuffix:"end"})+")/2",as:l}),e.push({type:"impute",field:r,groupby:s,key:l,method:"value",value:0})}return e.push({type:"stack",groupby:this.getGroupbyFields().concat(n),field:r,sort:u,as:[r+"_start",r+"_end"],offset:o}),e},t}(Bo),ru="scale_";function iu(e){if(e instanceof $o)if(1!==e.numChildren()||e.children[0]instanceof Uo)!function e(t){if(t instanceof Uo&&t.type===sa&&1===t.numChildren()){var n=t.children[0];n instanceof $o||(n.swapWithParent(),e(t))}}(e.model.component.data.main),q(e.children.map((n=e,function e(t){if(!(t instanceof $o)){var r=t.clone();if(r instanceof Uo){var i=ru+r.getSource();r.setSource(i),n.model.component.data.outputNodes[i]=r}else(r instanceof Ho||r instanceof nu)&&r.addDimensions(n.fields);return q(t.children.map(e)).forEach((function(e){return e.parent=r})),[r]}return q(t.children.map(e))}))).forEach((function(t){return t.parent=e.model.component.data.main}));else{var t=e.children[0];(t instanceof Ho||t instanceof nu)&&t.addDimensions(e.fields),t.swapWithParent(),iu(e)}else e.children.forEach(iu);var n}function au(e){e instanceof Yo&&V(K(e.filter),(function(e){return null===e}))&&e.remove(),e instanceof Uo&&!e.isRequired()&&e.remove(),e.children.forEach(au)}function ou(e){var t=[];return e.forEach((function e(n){0===n.numChildren()?t.push(n):n.children.forEach(e)})),t}function uu(e,t,n,r){var i=n.fieldDef(r);if(t&&"unaggregated"!==t&&!mi(t))return fn(t[0])?t.map((function(e){return{signal:"{data: "+gn(e,!0)+"}"}})):[t];var a=n.stack;if(a&&r===a.fieldChannel)return"normalize"===a.offset?[[0,1]]:[{data:o=n.requestDataName(sa),field:n.vgField(r,{suffix:"start"})},{data:o,field:n.vgField(r,{suffix:"end"})}];var o,u=yt(r)?function(e,t,n){if(fi(n)){var r=e.sort(t);return jo(r)?{op:"min",field:qo(e,t),order:"ascending"}:Go(r)?r:"descending"===r?{op:"min",field:e.vgField(t),order:"descending"}:!!W(["ascending",void 0],r)||void 0}}(n,r,e):void 0;if("unaggregated"===t)return[{data:o=n.requestDataName(sa),field:n.vgField(r,{aggregate:"min"})},{data:o,field:n.vgField(r,{aggregate:"max"})}];if(!i.bin)return u?[{data:te(u)?n.requestDataName(sa):n.requestDataName(la),field:n.vgField(r),sort:u}]:[{data:n.requestDataName(sa),field:n.vgField(r)}];if(di(e)){var s=n.getName(Et(i.bin)+"_"+i.field+"_bins");return[{signal:"sequence("+s+".start, "+s+".stop + "+s+".step, "+s+".step)"}]}return fi(e)?[{data:te(u)?n.requestDataName(sa):n.requestDataName(la),field:n.vgField(r,Ha(i,r)?{binSuffix:"range"}:{}),sort:!0!==u&&Go(u)?u:{field:n.vgField(r,{}),op:"min"}}]:"x"!==r&&"y"!==r?[{data:n.requestDataName(sa),field:n.vgField(r,{})}]:At(i.bin)&&i.bin.extent?[i.bin.extent]:[{data:o=n.requestDataName(sa),field:n.vgField(r,{})},{data:o,field:n.vgField(r,{binSuffix:"end"})}]}function su(e,t){return e.aggregate?_e[e.aggregate]?"quantitative"===e.type&&"log"===t?{valid:!1,reason:Zt.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:Zt.unaggregateDomainWithNonSharedDomainOp(e.aggregate)}:{valid:!1,reason:Zt.unaggregateDomainHasNoEffectForRawField(e)}}function lu(e){if(Fa(e)&&o(e.field))return e.field;if(!i(s=e)&&"fields"in s&&!("data"in s)){for(var t=void 0,n=0,r=e.fields;n<r.length;n++){var a=r[n];if(Fa(a)&&o(a.field))if(t){if(t!==a.field)return cn("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),t}else t=a.field}return cn("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),t}var u,s;return!i(u=e)&&"fields"in u&&"data"in u?(cn("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect."),o(t=e.fields[0])?t:void 0):void 0}function cu(e,t){return function(e){var t=Y(e.map((function(e){return Fa(e)?(e.sort,ke(e,["sort"])):e})),j),n=Y(e.map((function(e){if(Fa(e)){var t=e.sort;return void 0===t||te(t)||("count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((function(e){return void 0!==e})),j);if(1===t.length){if(Fa(o=e[0])&&0<n.length){var r=n[0];return 1<n.length&&(cn(Zt.MORE_THAN_ONE_SORT),r=!0),Se({},o,{sort:r})}return o}var i=Y(n.map((function(e){return!0===e?e:"count"===e.op?e:(cn(Zt.domainSortDropped(e)),!0)})),j),a=void 0;1===i.length?a=i[0]:1<i.length&&(cn(Zt.MORE_THAN_ONE_SORT),a=!0);var o,u=Y(e.map((function(e){return Fa(e)?e.data:null})),(function(e){return e}));return 1===u.length&&null!==u[0]?o=Se({data:u[0],fields:t.map((function(e){return e.field}))},a?{sort:a}:{}):Se({fields:t},a?{sort:a}:{})}(e.component.scales[t].domains.map((function(t){return Fa(t)&&(t.data=e.lookupDataSource(t.data)),t})))}function fu(e){return J(e.component.scales).reduce((function(t,n){var r=e.component.scales[n];if(r.merged)return t;var a=r.combine(),o=a.domainRaw,s=a.range,l=a.name,c=a.type,f=(a.domainRaw,a.range,ke(a,["name","type","domainRaw","range"]));return s=function(e,t,n,r){if("x"===r||"y"===r){if(Na(e))return{step:{signal:t+"_step"}};if(i(e)&&2===e.length){var a=e[0],o=e[1];if(0===a&&Da(o))return[0,{signal:n.getSizeName(o.signal)}];if(Da(a)&&0===o)return[{signal:n.getSizeName(a.signal)},0]}}return e}(s,l,e,n),o&&0<=o.signal.indexOf(Qu)&&(o=function(e,t){var n=JSON.parse(t.signal.replace(Qu,"")),r=ne(n.selection),i=e.component.selection&&e.component.selection[r];return i?(cn('Use "bind": "scales" to setup a binding for scales and selections within the same view.'),{signal:"null"}):(i=e.getSelectionComponent(r,n.selection),n.encoding||n.field||(n.field=i.project[0].field,1<i.project.length&&cn('A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": '+u(n.field)+".")),{signal:rs(i.type).scaleDomain+"("+u(r+Ju)+", "+u(n.encoding||null)+", "+u(n.field||null)+("global"===i.resolve?")":", "+u(i.resolve)+")")})}(e,o)),t.push(Se({name:l,type:c,domain:cu(e,n)},o?{domainRaw:o}:{},{range:s},f)),t}),[])}var du=function(e){function t(t,n){var r=e.call(this,{},{name:t})||this;return r.merged=!1,r.domains=[],r.setWithExplicit("type",n),r}return we(t,e),t}(no),hu=["range","rangeStep","scheme"];function pu(e){var t,n;wu(e)?(n=(t=e).component.scales,_t.forEach((function(e){var r=n[e];if(r){var i=t.getScaleComponent(e),a=t.specifiedScales[e],o=t.fieldDef(e),u="x"===e?"width":"y"===e?"height":void 0,s=u?!!t.component.layoutSize.get(u):void 0,l=i.get("type"),c=W(["point","band"],l)||!!a.rangeStep;u&&t.fit&&!s&&c&&(cn(Zt.CANNOT_FIX_RANGE_STEP_WITH_FIT),s=!0);var f=function(e){var t=[],n=e.getScaleComponent("x"),r=n&&n.get("range");r&&Na(r)&&p(r.step)&&t.push(r.step);var i=e.getScaleComponent("y"),a=i&&i.get("range");return a&&Na(a)&&p(a.step)&&t.push(a.step),t}(t),d=function(e,t,n,r,i,a,o,u,s,l){for(var c=u||null===r.rangeStep,f=0,d=hu;f<d.length;f++){var h=d[f];if(void 0!==r[h]){var p=bi(t,h),x=wi(e,h);if(p)if(x)cn(x);else switch(h){case"range":return ro(r[h]);case"scheme":return ro(xu(r[h]));case"rangeStep":var g=r[h];if(null!==g){if(!u)return ro({step:g});cn(Zt.rangeStepDropped(e))}}else cn(Zt.scalePropertyNotWorkWithScaleType(t,h,e))}}return io(function(e,t,n,r,i,a,o,u,s){switch(e){case Pe:case ze:if(W(["point","band"],t)&&!s)if(e===Pe&&"text"===a){if(r.scale.textXRangeStep)return{step:r.scale.textXRangeStep}}else if(r.scale.rangeStep)return{step:r.scale.rangeStep};return e===ze&&hi(t)?[{signal:o},0]:[0,{signal:o}];case He:return[function(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Zt.incompatibleChannel("size",e))}(a,i,r),function(e,t,n){var r=n.scale;switch(e){case"bar":case"tick":return void 0!==n.scale.maxBandSize?n.scale.maxBandSize:gu(t,n.scale)-1;case"line":case"trail":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var i=gu(t,r);return(i-2)*(i-2)}throw new Error(Zt.incompatibleChannel("size",e))}(a,u,r)];case qe:return"symbol";case $e:case Ye:case Xe:return"ordinal"===t?"nominal"===n?"category":"ordinal":"rect"===a||"geoshape"===a?"heatmap":"ramp";case et:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel "+e)}(e,t,n,i,a,o,s,l,c))}(e,l,o.type,a,t.config,r.get("zero"),t.mark,s,t.getName(u),f);r.setWithExplicit("range",d)}}))):vu(e,"range")}function xu(e){if(gi(e)){var t={scheme:e.name};return e.count&&(t.count=e.count),e.extent&&(t.extent=e.extent),t}return{scheme:e}}function gu(e,t){return 0<e.length?Math.min.apply(null,e):t.rangeStep?t.rangeStep:21}function mu(e,t){var n,r,i;wu(e)?(r=t,i=(n=e).component.scales,J(i).forEach((function(e){var t=n.specifiedScales[e],a=i[e],o=n.getScaleComponent(e),u=n.fieldDef(e),s=n.sort(e),l=n.config,c=t[r],f=o.get("type"),d=bi(f,r),h=wi(e,r);if(void 0!==c&&(d?h&&cn(h):cn(Zt.scalePropertyNotWorkWithScaleType(f,r,e))),d&&void 0===h)if(void 0!==c)a.copyKeyFromObject(r,t);else{var p=function(e,t,n,r,i,a,o,u,s,l){var c=l.scale;switch(e){case"nice":return function(e,t,n){if(!n.bin&&!W([Ur.TIME,Ur.UTC],e))return W([Pe,ze],t)}(i,t,n);case"padding":return function(e,t,n,r,i,a){if(W([Pe,ze],e)){if(pi(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=i.type,u=i.orient;if("bar"===o&&!r.bin&&("vertical"===u&&"x"===e||"horizontal"===u&&"y"===e))return a.continuousBandSize}if(t===Ur.POINT)return n.pointPadding}}(t,i,c,n,s,l.bar);case"paddingInner":return function(e,t,n){if(void 0===e)return W([Pe,ze],t)?n.bandPaddingInner:void 0}(a,t,c);case"paddingOuter":return function(e,t,n,r,i){if(void 0===e)return W([Pe,ze],t)&&n===Ur.BAND?void 0!==i.bandPaddingOuter?i.bandPaddingOuter:r/2:void 0}(a,t,i,o,c);case"reverse":return function(e,t){if(hi(e)&&"descending"===t)return!0}(i,r);case"zero":return function(e,t,n,r){if(n&&"unaggregated"!==n)return!1;if("size"===e&&"quantitative"===t.type)return!0;if(!t.bin&&W([Pe,ze],e)){var i=r.orient;return!W(["bar","area","line","trail"],r.type)||!("horizontal"===i&&"y"===e||"vertical"===i&&"x"===e)}return!1}(t,n,u,s)}return c[e]}(r,e,u,s,o.get("type"),o.get("padding"),o.get("paddingInner"),t.domain,n.markDef,l);void 0!==p&&a.set(r,p,!1)}}))):vu(e,t)}function vu(e,t){for(var n=e.component.scales,r=0,i=e.children;r<i.length;r++){var a=i[r];"range"===t?pu(a):mu(a,t)}J(n).forEach((function(r){for(var i,a=0,o=e.children;a<o.length;a++){var u=o[a].component.scales[r];u&&(i=uo(i,u.getWithExplicit(t),t,"scale",ao((function(e,n){switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0}))))}n[r].setWithExplicit(t,i)}))}function _u(e){var t,n,r,i;wu(e)?e.component.scales=(n=(t=e).encoding,r=t.config,i=t.mark,_t.reduce((function(e,a){var o,u=void 0,s=n[a];if(tr(s)&&i===jt&&a===qe&&s.type===Hn)return e;if(tr(s)?u=(o=s).scale:Qn(s)?(o=s.condition,u=s.condition.scale):a===Pe?o=mr(n.x2):a===ze&&(o=mr(n.y2)),o&&null!==u&&!1!==u){var l=(u=u||{}).type,c=function(e,t,n,r,i){var a=function(e,t,n,r){switch(t.type){case"nominal":case"ordinal":if(ot(e)||"discrete"===St(e))return"shape"===e&&"ordinal"===t.type&&cn(Zt.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(W(["x","y"],e)){if(W(["rect","bar","rule"],n))return"band";if("bar"===n)return"band"}return"point";case"temporal":return ot(e)?"sequential":"discrete"===St(e)?(cn(Zt.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":return ot(e)?t.bin?"bin-ordinal":"sequential":"discrete"===St(e)?(cn(Zt.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):t.bin&&"x"!==e&&"y"!==e?"bin-linear":"linear";case"latitude":case"longitude":case"geojson":return}throw new Error(Zt.invalidFieldType(t.type))}(t,n,r);return yt(t)?void 0!==e?Si(t,e)?function(e,t){var n=t.type;return W([Rn.ORDINAL,Rn.NOMINAL],n)?void 0===e||fi(e):n===Rn.TEMPORAL?W([Ur.TIME,Ur.UTC,Ur.SEQUENTIAL,void 0],e):n!==Rn.QUANTITATIVE||(t.bin?W([Ur.BIN_LINEAR,Ur.BIN_ORDINAL,Ur.LINEAR],e):W([Ur.LOG,Ur.POW,Ur.SQRT,Ur.QUANTILE,Ur.QUANTIZE,Ur.LINEAR,Ur.SEQUENTIAL,void 0],e))}(e,n)?e:(cn(Zt.scaleTypeNotWorkWithFieldDef(e,a)),a):(cn(Zt.scaleTypeNotWorkWithChannel(t,e,a)),a):a:null}(u.type,a,o,i,r.scale);e[a]=new du(t.scaleName(a+"",!0),{value:c,explicit:l===c})}return e}),{})):e.component.scales=function(e){for(var t=e.component.scales={},n={},r=e.component.resolve,i=function(t){_u(t),J(t.component.scales).forEach((function(i){if(r.scale[i]=r.scale[i]||function(e,t){if(Au(t)||Su(t))return"shared";if(Eu(t)||ku(t))return W(xt,e)?"independent":"shared";throw new Error("invalid model type for resolve")}(i,e),"shared"===r.scale[i]){var a=n[i],o=t.component.scales[i].getWithExplicit("type");a?ti(a.value,o.value)?n[i]=uo(a,o,"type","scale",yu):(r.scale[i]="independent",delete n[i]):n[i]=o}}))},a=0,o=e.children;a<o.length;a++)i(o[a]);return J(n).forEach((function(r){var i=e.scaleName(r,!0),a=n[r];t[r]=new du(i,a);for(var o=0,u=e.children;o<u.length;o++){var s=u[o],l=s.component.scales[r];l&&(s.renameScale(l.get("name"),i),l.merged=!0)}})),t}(e)}var yu=ao((function(e,t){return ri(e)-ri(t)})),bu=function(){function e(){this.nameMap={}}return e.prototype.rename=function(e,t){this.nameMap[e]=t},e.prototype.has=function(e){return void 0!==this.nameMap[e]},e.prototype.get=function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e},e}();function wu(e){return e&&"unit"===e.type}function Su(e){return e&&"facet"===e.type}function ku(e){return e&&"repeat"===e.type}function Eu(e){return e&&"concat"===e.type}function Au(e){return e&&"layer"===e.type}var Tu=function(){function e(e,t,n,r,i,a){var u=this;this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=u.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=u.lookupDataSource(e.from.facet.data)),e},this.parent=t,this.config=r,this.repeater=i,this.name=e.name||n,this.title=o(e.title)?{text:e.title}:e.title,this.scaleNameMap=t?t.scaleNameMap:new bu,this.projectionNameMap=t?t.projectionNameMap:new bu,this.layoutSizeNameMap=t?t.layoutSizeNameMap:new bu,this.data=e.data,this.description=e.description,this.transforms=Ta(e.transform||[]),this.component={data:{sources:t?t.component.data.sources:{},outputNodes:t?t.component.data.outputNodes:{},outputNodeRefCounts:t?t.component.data.outputNodeRefCounts:{},ancestorParse:t?Se({},t.component.data.ancestorParse):{},isFaceted:Bi(e)||t&&t.component.data.isFaceted&&!e.data},layoutSize:new no,layoutHeaders:{row:{},column:{}},mark:null,resolve:Se({scale:{},axis:{},legend:{}},a||{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),e.prototype.initSize=function(e){var t=e.width,n=e.height;t&&this.component.layoutSize.set("width",t,!0),n&&this.component.layoutSize.set("height",n,!0)},e.prototype.parse=function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseProjection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},e.prototype.parseScale=function(){!function(e){_u(e),function e(t){var n,r,i;wu(t)?(r=(n=t).specifiedScales,i=n.component.scales,J(i).forEach((function(e){var t,a,o,u,s=r[e],l=s?s.domain:void 0,c=(a=e,o=(t=n).getScaleComponent(a).get("type"),(u=function(e,t,n,r){if("unaggregated"===e){var i=su(t,n),a=i.valid,o=i.reason;if(!a)return void cn(o)}else if(void 0===e&&r.useUnaggregatedDomain&&(a=su(t,n).valid))return"unaggregated";return e}(t.scaleDomain(a),t.fieldDef(a),o,t.config.scale))!==t.scaleDomain(a)&&(t.specifiedScales[a]=Se({},t.specifiedScales[a],{domain:u})),"x"===a&&t.channelHasField("x2")?t.channelHasField("x")?uu(o,u,t,"x").concat(uu(o,u,t,"x2")):uu(o,u,t,"x2"):"y"===a&&t.channelHasField("y2")?t.channelHasField("y")?uu(o,u,t,"y").concat(uu(o,u,t,"y2")):uu(o,u,t,"y2"):uu(o,u,t,a)),f=i[e];if(f.domains=c,mi(l)&&f.set("domainRaw",{signal:Qu+j(l)},!0),n.component.data.isFaceted){for(var d=n;!Su(d)&&d.parent;)d=d.parent;if("shared"===d.component.resolve.scale[e])for(var h=0,p=c;h<p.length;h++){var x=p[h];Fa(x)&&(x.data=ru+x.data.replace(ru,""))}}}))):function(t){for(var n=0,r=t.children;n<r.length;n++)e(r[n]);var i=t.component.scales;J(i).forEach((function(e){for(var n,r=null,a=0,o=t.children;a<o.length;a++){var u=o[a].component.scales[e];if(u){n=void 0===n?u.domains:n.concat(u.domains);var s=u.get("domainRaw");r&&s&&r.signal!==s.signal&&cn("The same selection must be used to override scale domains in a layered view."),r=s}}i[e].domains=n,r&&i[e].set("domainRaw",r,!0)}))}(t)}(e);for(var t=0,n=yi;t<n.length;t++)mu(e,n[t]);pu(e)}(this)},e.prototype.parseProjection=function(){!function e(t){wu(t)?t.component.projection=function(e){var t=e.specifiedProjection,n=e.markDef,r=e.config,i=e.encoding,a=n&&n.type===jt,o=i&&it.some((function(e){return tr(i[e])}));if(a||o){var u=[];return[[We,Ge],[Be,je]].forEach((function(t){(e.channelHasField(t[0])||e.channelHasField(t[1]))&&u.push({signal:e.getName("geojson_"+u.length)})})),e.channelHasField(qe)&&e.fieldDef(qe).type===Hn&&u.push({signal:e.getName("geojson_"+u.length)}),0===u.length&&u.push(e.requestDataName(sa)),new Ro(e.projectionName(!0),Se({},r.projection||{},t||{}),[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")],u)}}(t):t.component.projection=function(t){if(0!==t.children.length){var n,r=V(t.children,(function(t){e(t);var r=t.component.projection;if(r){if(n){var i=function(e,t){var n=V(Io,(function(n){return!e.explicit.hasOwnProperty(n)&&!t.explicit.hasOwnProperty(n)||!(!e.explicit.hasOwnProperty(n)||!t.explicit.hasOwnProperty(n)||G(e.get(n))!==G(t.get(n)))}));if(G(e.size)===G(t.size)){if(n)return e;if(G(e.explicit)===G({}))return t;if(G(t.explicit)===G({}))return e}return null}(n,r);return i&&(n=i),!!i}return n=r,!0}return!0}));if(n&&r){var i=t.projectionName(!0),a=new Ro(i,n.specifiedProjection,n.size,ee(n.data));return t.children.forEach((function(e){e.component.projection&&(a.data=a.data.concat(e.component.projection.data),e.renameProjection(e.component.projection.get("name"),i),e.component.projection.merged=!0)})),a}}}(t)}(this)},e.prototype.renameTopLevelLayoutSize=function(){"width"!==this.getName("width")&&this.renameLayoutSize(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameLayoutSize(this.getName("height"),"height")},e.prototype.parseLegend=function(){!function e(t){var n,r;wu(t)?t.component.legends=(r=(n=t).encoding,[$e,Ye,Xe,He,qe,et].reduce((function(e,t){var i=r[t];return!n.legend(t)||!n.getScaleComponent(t)||tr(i)&&t===qe&&i.type===Hn||(e[t]=function(e,t){var n=e.fieldDef(t),r=e.legend(t),i=new so({},function(e,t){switch(t){case $e:var n=e.scaleName($e);return e.markDef.filled?{fill:n}:{stroke:n};case Ye:case Xe:case He:case qe:case et:return(r={})[t]=e.scaleName(t),r}var r}(e,t));Zr.forEach((function(n){var a=function(e,t,n,r){var i,a=r.fieldDef(n);switch(e){case"format":return Ra(a,t.format,r.config);case"title":return Ia(void 0!==a.title?a.title:t.title||(void 0===t.title?void 0:null),xr(a,r.config))||void 0;case"values":return(i=t.values)&&fn(i[0])?i.map((function(e){return{signal:gn(e,!0)}})):i;case"type":return Ia(t.type,function(e,t,n){if(ot(t)&&("quantitative"===e&&!di(n)||"temporal"===e&&W(["time","utc"],n)))return"gradient"}(a.type,n,r.getScaleComponent(n).get("type")))}return t[e]}(n,r,t,e);if(void 0!==a){var o="values"===n?!!r.values:a===r[n];(o||void 0===e.config.legend[n])&&i.set(n,a,o)}}));var a=r.encoding||{},o=["labels","legend","title","symbols","gradient"].reduce((function(r,o){var u=Mo[o]?Mo[o](n,a[o],e,t,i.get("type")):a[o];return void 0!==u&&0<J(u).length&&(r[o]={update:u}),r}),{});return 0<J(o).length&&i.set("encode",o,!!r.encoding),i}(n,t)),e}),{})):t.component.legends=function(t){for(var n=t.component,r=n.legends,i=n.resolve,a=function(n){e(n),J(n.component.legends).forEach((function(e){i.legend[e]=to(t.component.resolve,e),"shared"===i.legend[e]&&(r[e]=Lo(r[e],n.component.legends[e]),r[e]||(i.legend[e]="independent",delete r[e]))}))},o=0,u=t.children;o<u.length;o++)a(u[o]);return J(r).forEach((function(e){for(var n=0,r=t.children;n<r.length;n++){var a=r[n];a.component.legends[e]&&"shared"===i.legend[e]&&delete a.component.legends[e]}})),r}(t)}(this)},e.prototype.assembleGroupStyle=function(){if("unit"===this.type||"layer"===this.type)return"cell"},e.prototype.assembleLayoutSize=function(){if("unit"===this.type||"layer"===this.type)return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},e.prototype.assembleHeaderMarks=function(){for(var e,t,n,r=this.component.layoutHeaders,i=[],a=0,o=$a;a<o.length;a++)r[l=o[a]].title&&i.push((e=l,t=this.component.layoutHeaders[e].title,n=Se({align:{value:"center"},text:{value:t}},"vertical"===("row"===e?"vertical":void 0)?{angle:{value:270}}:{}),{name:this.getName(e+"_title"),role:e+"-title",type:"group",marks:[Se({type:"text",role:e+"-title-text",style:"guide-title"},0<J(n).length?{encode:{update:n}}:{})]}));for(var u=0,s=$a;u<s.length;u++){var l=s[u];i=i.concat(Xa(this,l))}return i},e.prototype.assembleAxes=function(){return e=this.component.axes,t=this.config,r=void 0===(n=e.x)?[]:n,a=void 0===(i=e.y)?[]:i,r.map((function(e){return Ma(e,"main",t)})).concat(r.map((function(e){return Ma(e,"grid",t)})),a.map((function(e){return Ma(e,"main",t)})),a.map((function(e){return Ma(e,"grid",t)}))).filter((function(e){return e}));var e,t,n,r,i,a},e.prototype.assembleLegends=function(){return Po(this)},e.prototype.assembleProjections=function(){return function(e){return Au(e)||Eu(e)||ku(e)?(t=e).children.reduce((function(e,t){return e.concat(t.assembleProjections())}),zo(t)):zo(e);var t}(this)},e.prototype.assembleTitle=function(){var e=Se({},Ai(this.config.title).nonMark,this.title);if(e.text)return W(["unit","layer"],this.type)||(e.anchor&&"start"!==e.anchor&&cn(Zt.cannotSetTitleAnchor(this.type)),e.anchor="start"),0<J(e).length?e:void 0},e.prototype.assembleGroup=function(e){void 0===e&&(e=[]);var t={};0<(e=e.concat(this.assembleSelectionSignals())).length&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||Su(this.parent)?function e(t){return Au(t)||Eu(t)||ku(t)?t.children.reduce((function(t,n){return t.concat(e(n))}),fu(t)):fu(t)}(this):[];0<r.length&&(t.scales=r);var i=this.assembleAxes();0<i.length&&(t.axes=i);var a=this.assembleLegends();return 0<a.length&&(t.legends=a),t},e.prototype.hasDescendantWithFieldOnChannel=function(e){for(var t=0,n=this.children;t<n.length;t++){var r=n[t];if(wu(r)){if(r.channelHasField(e))return!0}else if(r.hasDescendantWithFieldOnChannel(e))return!0}return!1},e.prototype.getName=function(e){return ne((this.name?this.name+"_":"")+e)},e.prototype.requestDataName=function(e){var t=this.getName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t},e.prototype.getSizeSignalRef=function(e){if(Su(this.parent)){var t="width"===e?"x":"y",n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(fi(r)&&Na(i)){var a=n.get("name"),o=lu(cu(this,t));return o?{signal:eo(a,n,ar({aggregate:"distinct",field:o},{expr:"datum"}))}:(cn("Unknown field for ${channel}.  Cannot calculate view size."),null)}}}return{signal:this.layoutSizeNameMap.get(this.getName(e))}},e.prototype.lookupDataSource=function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e},e.prototype.getSizeName=function(e){return this.layoutSizeNameMap.get(e)},e.prototype.renameLayoutSize=function(e,t){this.layoutSizeNameMap.rename(e,t)},e.prototype.renameScale=function(e,t){this.scaleNameMap.rename(e,t)},e.prototype.renameProjection=function(e,t){this.projectionNameMap.rename(e,t)},e.prototype.scaleName=function(e,t){return t?this.getName(e):ct(e)&&yt(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0},e.prototype.projectionName=function(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0},e.prototype.getScaleComponent=function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0},e.prototype.getSelectionComponent=function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(Zt.selectionNotFound(t));return n},e}(),Cu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return we(t,e),t.prototype.vgField=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);if(n)return ar(n,t)},t.prototype.reduceFieldDef=function(e,t,n){return Or(this.getMapping(),(function(t,n,r){var i=mr(n);return i?e(t,i,r):t}),t,n)},t.prototype.forEachFieldDef=function(e,t){Fr(this.getMapping(),(function(t,n){var r=mr(t);r&&e(r,n)}),t)},t}(Tu),Du={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t,n){var r=n.scales=[];n.project.forEach((function(t){var i=t.channel,a=e.getScaleComponent(i),o=a?a.get("type"):void 0;a&&hi(o)&&!di(o)?(a.set("domainRaw",{signal:us(n,i,"data")},!0),r.push(i),e.repeater&&e.repeater.row===e.repeater.column&&e.getScaleComponent(i===Pe?ze:Pe).set("domainRaw",{signal:us(n,i,"data")},!0)):cn(Zt.SCALE_BINDINGS_CONTINUOUS)}))},topLevelSignals:function(e,t,n){if(!e.parent)return n;var r=t.scales.filter((function(e){return!n.filter((function(n){return n.name===us(t,e,"data")})).length}));return n.concat(r.map((function(e){return{name:us(t,e,"data")}})))},signals:function(e,t,n){return e.parent&&t.scales.forEach((function(e){var r=n.filter((function(n){return n.name===us(t,e,"data")}))[0];r.push="outer",delete r.value,delete r.update})),n}};function Nu(e,t){return"domain("+u(e.scaleName(t))+")"}var Fu="_brush",Ou="_scale_trigger",Mu={predicate:"vlInterval",scaleDomain:"vlIntervalDomain",signals:function(e,t){var n=t.name,r=Du.has(t),i=[],a=[],o=[],s=[];if(t.translate&&!r){var l="!event.item || event.item.mark.name !== "+u(n+Fu);Lu(t,(function(e,t){var n=t.between[0].filter||(t.between[0].filter=[]);n.indexOf(l)<0&&n.push(l)}))}return t.project.forEach((function(n){var r=n.channel;if(r===Pe||r===ze){var l,c,f,d,h,p,x,g,m,v,_,y,b=(l=e,d=us(c=t,f=r,"visual"),h=us(c,f,"data"),p=Du.has(c),x=u(l.scaleName(f)),m=(g=l.getScaleComponent(f))?g.get("type"):void 0,v=l.getSizeSignalRef(f===Pe?"width":"height").signal,_=f+"(unit)",(y=Lu(c,(function(e,t){return e.concat({events:t.between[0],update:"["+_+", "+_+"]"},{events:t,update:"["+d+"[0], clamp("+_+", 0, "+v+")]"})}))).push({events:{signal:c.name+Ou},update:hi(m)&&!di(m)?"[scale("+x+", "+h+"[0]), scale("+x+", "+h+"[1])]":"[0, 0]"}),p?[{name:h,on:[]}]:[{name:d,value:[],on:y},{name:h,on:[{events:{signal:d},update:d+"[0] === "+d+"[1] ? null : invert("+x+", "+d+")"}]}]),w=us(t,r,"data"),S=us(t,r,"visual"),k=u(e.scaleName(r)),E=hi(e.getScaleComponent(r).get("type"))?"+":"";i.push.apply(i,b),o.push(w),a.push("{encoding: "+u(r)+", field: "+u(n.field)+", extent: "+w+"}"),s.push({scaleName:e.scaleName(r),expr:"(!isArray("+w+") || ("+E+"invert("+k+", "+S+")[0] === "+E+w+"[0] && "+E+"invert("+k+", "+S+")[1] === "+E+w+"[1]))"})}else cn("Interval selections only support x and y encoding channels.")})),r||i.push({name:n+Ou,update:s.map((function(e){return e.expr})).join(" && ")+" ? "+(n+Ou)+" : {}"}),i.concat({name:n+Ku,on:[{events:o.map((function(e){return{signal:e}})),update:o.join(" && ")+" ? {unit: "+as(e)+", intervals: ["+a.join(", ")+"]} : null"}]})},modifyExpr:function(e,t){return t.name+Ku+", "+("global"===t.resolve?"true":"{unit: "+as(e)+"}")},marks:function(e,t,n){var r=t.name,i=ss(t),a=i.xi,o=i.yi,s="data("+u(t.name+Ju)+")";if(Du.has(t))return n;var l={x:null!==a?{signal:r+"_x[0]"}:{value:0},y:null!==o?{signal:r+"_y[0]"}:{value:0},x2:null!==a?{signal:r+"_x[1]"}:{field:{group:"width"}},y2:null!==o?{signal:r+"_y[1]"}:{field:{group:"height"}}};if("global"===t.resolve)for(var c=0,f=J(l);c<f.length;c++){var d=f[c];l[d]=[Se({test:s+".length && "+s+"[0].unit === "+as(e)},l[d]),{value:0}]}var h=t.mark,p=h.fill,x=h.fillOpacity,g=ke(h,["fill","fillOpacity"]),m=J(g).reduce((function(e,t){return e[t]=[{test:[null!==a&&r+"_x[0] !== "+r+"_x[1]",null!=o&&r+"_y[0] !== "+r+"_y[1]"].filter((function(e){return e})).join(" && "),value:g[t]},{value:null}],e}),{});return[{name:r+Fu+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:p},fillOpacity:{value:x}},update:l}}].concat(n,{name:r+Fu,type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:Se({},l,m)}})}};function Lu(e,t){return e.events.reduce((function(e,n){return n.between?t(e,n):(cn(n+" is not an ordered event stream for interval selections"),e)}),[])}var Pu="voronoi",zu={has:function(e){return"interval"!==e.type&&e.nearest},marks:function(e,t,n){var r=ss(t),i=r.x,a=r.y,o=e.mark;if(Vt(o))return cn(Zt.nearestNotSupportForContinuous(o)),n;var u={name:e.getName(Pu),type:"path",from:{data:e.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:{expr:i||!i&&!a?"datum.datum.x || 0":"0"},y:{expr:a||!i&&!a?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,l=!1;return n.forEach((function(t,n){var r=t.name||"";r===e.component.mark[0].name?s=n:0<=r.indexOf(Pu)&&(l=!0)})),l||n.splice(s+1,0,u),n}};function Iu(e,t){var n=t.project,r=zu.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum",i=[],a=n.map((function(e){return u(e.channel)})).filter((function(e){return e})).join(", "),o=n.map((function(e){return u(e.field)})).join(", "),s=n.map((function(t){var n=t.channel,a=e.fieldDef(n);return a&&a.bin?(i.push(t.field),"["+oe(e.vgField(n,{}),r)+", "+oe(e.vgField(n,{binSuffix:"end"}),r)+"]"):""+oe(t.field,r)})).join(", ");return[{name:t.name+Ku,value:{},on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? {unit: "+as(e)+", encodings: ["+a+"], fields: ["+o+"], values: ["+s+"]"+(i.length?", "+i.map((function(e){return u("bin_"+e)+": 1"})).join(", "):"")+"} : null",force:!0}]}]}var Ru={predicate:"vlMulti",scaleDomain:"vlMultiDomain",signals:Iu,modifyExpr:function(e,t){return t.name+Ku+", "+("global"===t.resolve?"null":"{unit: "+as(e)+"}")}},Gu={predicate:"vlSingle",scaleDomain:"vlSingleDomain",signals:Iu,topLevelSignals:function(e,t,n){var r=n.filter((function(e){return e.name===t.name})),i="data("+u(t.name+Ju)+")",a=i+"[0].values";return r.length?n:n.concat({name:t.name,update:i+".length && {"+t.project.map((function(e,t){return e.field+": "+a+"["+t+"]"})).join(", ")+"}"})},modifyExpr:function(e,t){return t.name+Ku+", "+("global"===t.resolve?"true":"{unit: "+as(e)+"}")}},ju="_toggle",Wu="_translate_anchor",Bu="_translate_delta",Uu={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var r=t.name,i=Du.has(t),a=r+Wu,o=ss(t),u=o.x,s=o.y,l=fa(t.translate,"scope");return i||(l=l.map((function(e){return e.between[0].markname=r+Fu,e}))),n.push({name:a,value:{},on:[{events:l.map((function(e){return e.between[0]})),update:"{x: x(unit), y: y(unit)"+(null!==u?", extent_x: "+(i?Nu(e,Pe):"slice("+us(t,"x","visual")+")"):"")+(null!==s?", extent_y: "+(i?Nu(e,ze):"slice("+us(t,"y","visual")+")"):"")+"}"}]},{name:r+Bu,value:{},on:[{events:l,update:"{x: "+a+".x - x(unit), y: "+a+".y - y(unit)}"}]}),null!==u&&Vu(e,t,Pe,"width",n),null!==s&&Vu(e,t,ze,"height",n),n}};function Vu(e,t,n,r,i){var a=t.name,o=Du.has(t),u=i.filter((function(e){return e.name===us(t,n,o?"data":"visual")}))[0],s=a+Wu,l=a+Bu,c=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(n),d=f.get("type"),h=s+".extent_"+n,p=(o?"log"===d?"panLog":"pow"===d?"panPow":"panLinear":"panLinear")+"("+h+", "+(o&&n===Pe?"-":"")+l+"."+n+" / "+(o?""+c:"span("+h+")")+(o&&"pow"===d?", "+(f.get("exponent")||1):"")+")";u.on.push({events:{signal:l},update:o?p:"clampRange("+p+", 0, "+c+")"})}var qu="_zoom_anchor",Hu="_zoom_delta",$u={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var r=t.name,i=Du.has(t),a=r+Hu,o=ss(t),s=o.x,l=o.y,c=u(e.scaleName(Pe)),f=u(e.scaleName(ze)),d=fa(t.zoom,"scope");return i||(d=d.map((function(e){return e.markname=r+Fu,e}))),n.push({name:r+qu,on:[{events:d,update:i?"{"+[c?"x: invert("+c+", x(unit))":"",f?"y: invert("+f+", y(unit))":""].filter((function(e){return!!e})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),null!==s&&Yu(e,t,"x","width",n),null!==l&&Yu(e,t,"y","height",n),n}};function Yu(e,t,n,r,i){var a=t.name,o=Du.has(t),u=i.filter((function(e){return e.name===us(t,n,o?"data":"visual")}))[0],s=e.getSizeSignalRef(r).signal,l=e.getScaleComponent(n),c=l.get("type"),f=o?Nu(e,n):u.name,d=a+Hu,h=(o?"log"===c?"zoomLog":"pow"===c?"zoomPow":"zoomLinear":"zoomLinear")+"("+f+", "+a+qu+"."+n+", "+d+(o&&"pow"===c?", "+(l.get("exponent")||1):"")+")";u.on.push({events:{signal:d},update:o?h:"clampRange("+h+", 0, "+s+")"})}var Xu={project:{has:function(e){var t=e;return void 0!==t.fields||void 0!==t.encodings},parse:function(e,t,n){var r={},i={};(t.fields||[]).forEach((function(e){return r[e]=null})),(t.encodings||[]).forEach((function(t){var n=e.fieldDef(t);if(n)if(n.timeUnit){var a=e.vgField(t);r[a]=t,i[a]={as:a,field:n.field,timeUnit:n.timeUnit}}else r[n.field]=t;else cn(Zt.cannotProjectOnChannelWithoutField(t))}));var a=n.project||(n.project=[]);for(var o in r)r.hasOwnProperty(o)&&a.push({field:o,channel:r[o]});var u=n.fields||(n.fields={});a.filter((function(e){return e.channel})).forEach((function(e){return u[e.channel]=e.field})),J(i).length&&(n.timeUnit=new Jo(null,i))}},toggle:{has:function(e){return"multi"===e.type&&e.toggle},signals:function(e,t,n){return n.concat({name:t.name+ju,value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t,n){var r=t.name+Ku,i=t.name+ju;return i+" ? null : "+r+", "+("global"===t.resolve?i+" ? null : true, ":i+" ? null : {unit: "+as(e)+"}, ")+i+" ? "+r+" : null"}},scales:Du,translate:Uu,zoom:$u,inputs:{has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind},topLevelSignals:function(e,t,n){var r=t.name,i=t.project,a=t.bind,o=zu.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.forEach((function(e){var i=ne(r+"_"+e.field);n.filter((function(e){return e.name===i})).length||n.unshift({name:i,value:"",on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? "+oe(e.field,o)+" : null"}],bind:a[e.field]||a[e.channel]||a})})),n},signals:function(e,t,n){var r=t.name,i=t.project,a=n.filter((function(e){return e.name===r+Ku}))[0],o=i.map((function(e){return u(e.field)})).join(", "),s=i.map((function(e){return ne(r+"_"+e.field)}));return s.length&&(a.update=s.join(" && ")+" ? {fields: ["+o+"], values: ["+s.join(", ")+"]} : null"),delete a.value,delete a.on,n}},nearest:zu};function Zu(e,t){for(var n in Xu)Xu[n].has(e)&&t(Xu[n])}var Ju="_store",Ku="_tuple",Qu="_selection_domain_";function es(e,t){return ns(e,(function(n,r){t=r.marks?r.marks(e,n,t):t,Zu(n,(function(r){r.marks&&(t=r.marks(e,n,t))}))})),t}function ts(e,t,n){var r=[],i=re(t,(function(t){var i=ne(t),a=e.getSelectionComponent(i,t),o=u(i+Ju);if(a.timeUnit){var s=n||e.component.data.raw,l=a.timeUnit.clone();s.parent?l.insertAsParentOf(s):s.parent=l}return"none"!==a.empty&&r.push(o),rs(a.type).predicate+"("+o+", datum"+("global"===a.resolve?")":", "+u(a.resolve)+")")}));return(r.length?"!("+r.map((function(e){return"length(data("+e+"))"})).join(" || ")+") || ":"")+"("+i+")"}function ns(e,t){var n=e.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];t(i,rs(i.type))}}function rs(e){switch(e){case"single":return Gu;case"multi":return Ru;case"interval":return Mu}return null}function is(e){for(var t=e.parent;t&&!Su(t);)t=t.parent;return t}function as(e){var t=u(e.name),n=is(e);return n&&(t+=(n.facet.row?" + '_' + ("+oe(n.vgField("row"),"facet")+")":"")+(n.facet.column?" + '_' + ("+oe(n.vgField("column"),"facet")+")":"")),t}function os(e){var t=!1;return ns(e,(function(e){t=t||e.project.some((function(e){return e.field===Ei}))})),t}function us(e,t,n){var r=e._signalNames||(e._signalNames={});if(r[t]&&r[t][n])return r[t][n];r[t]=r[t]||{};for(var i=ne(e.name+"_"+("visual"===n?t:e.fields[t])),a=i,o=1;r[a];)a=i+"_"+o++;return r[a]=r[t][n]=a}function ss(e){var t=null,n=null,r=null,i=null;return e.project.forEach((function(e,a){e.channel===Pe?(t=e,n=a):e.channel===ze&&(r=e,i=a)})),{x:t,xi:n,y:r,yi:i}}function ls(e){return e&&!!e.field&&void 0!==e.equal}function cs(e){return!!(e&&e.field&&i(e.range)&&2===e.range.length)}function fs(e){return e&&!!e.field&&(i(e.oneOf)||i(e.in))}function ds(e){return fs(e)||ls(e)||cs(e)}function hs(e,t,n){return re(t,(function(t){return o(t)?t:(r=t)&&r.selection?ts(e,t.selection,n):function(e,t){void 0===t&&(t=!0);var n=e.timeUnit?"time("+Pn(e.timeUnit,e.field)+")":ar(e,{expr:"datum"});if(ls(e))return n+"==="+ps(e.equal,e.timeUnit);if(fs(e))return"indexof(["+(e.oneOf||e.in).map((function(t){return ps(t,e.timeUnit)})).join(",")+"], "+n+") !== -1";if(cs(e)){var r=e.range[0],i=e.range[1];if(null!==r&&null!==i&&t)return"inrange("+n+", ["+ps(r,e.timeUnit)+", "+ps(i,e.timeUnit)+"])";var a=[];return null!==r&&a.push(n+" >= "+ps(r,e.timeUnit)),null!==i&&a.push(n+" <= "+ps(i,e.timeUnit)),0<a.length?a.join(" && "):"true"}throw new Error("Invalid field predicate: "+JSON.stringify(e))}(t);var r}))}function ps(e,t){if(fn(e))return"time("+gn(e,!0)+")";if(wn(t)){var n={};return n[t]=e,"time("+gn(n,!0)+")"}return kn(t)?ps(e,Cn(t)):JSON.stringify(e)}function xs(e){return ds(e)&&e.timeUnit?Se({},e,{timeUnit:In(e.timeUnit)}):e}function gs(e,t){var n;n="as"in e?[e.as,e.as+"_end"]:[ar(e,{}),ar(e,{binSuffix:"end"})];var r,i,a,o,u=yr(e.bin,void 0)||{},s=(r=u,i=e.field,Et(r)+"_"+i),l=(o=s,{signal:(a=t).getName(o+"_bins"),extentSignal:a.getName(o+"_extent")}),c=l.signal,f=l.extentSignal;return{key:s,binComponent:Se({bin:u,field:e.field,as:n},c?{signal:c}:{},f?{extentSignal:f}:{})}}var ms=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bins=n,r}return we(t,e),t.prototype.clone=function(){return new t(null,ee(this.bins))},t.makeFromEncoding=function(e,n){var r=n.reduceFieldDef((function(e,t,r){if(t.bin){var i=gs(t,n),a=i.key,o=i.binComponent;e[a]=Se({},o,e[a],function(e,t,n,r){if(Ha(t,n)){var i=wu(e)&&(e.axis(n)||e.legend(n))||{},a=ar(t,{expr:"datum"}),o=ar(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ar(t,{binSuffix:"range"}),formula:Wa(a,o,i.format,r)}}return{}}(n,t,r,n.config))}return e}),{});return 0===J(r).length?null:new t(e,r)},t.makeFromTransform=function(e,n,r){var i,a=gs(n,r),o=a.key,u=a.binComponent;return new t(e,((i={})[o]=u,i))},t.prototype.merge=function(e){this.bins=Se({},this.bins,e.bins),e.remove()},t.prototype.producedFields=function(){var e={};return K(this.bins).forEach((function(t){t.as.forEach((function(t){return e[t]=!0}))})),e},t.prototype.dependentFields=function(){var e={};return K(this.bins).forEach((function(t){e[t.field]=!0})),e},t.prototype.assemble=function(){return q(K(this.bins).map((function(e){var t=[],n=Se({type:"bin",field:e.field,as:e.as,signal:e.signal},e.bin);return!e.bin.extent&&e.extentSignal&&(t.push({type:"extent",field:e.field,signal:e.extentSignal}),n.extent={signal:e.extentSignal}),t.push(n),e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t})))},t}(Bo),vs=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.model=n,i.filter=r,i.expr=hs(i.model,i.filter,i),i}return we(t,e),t.prototype.clone=function(){return new t(null,this.model,ee(this.filter))},t.prototype.assemble=function(){return{type:"filter",expr:this.expr}},t}(Bo),_s=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.fields=n,a.geojson=r,a.signal=i,a}return we(t,e),t.prototype.clone=function(){return new t(null,ee(this.fields),this.geojson,this.signal)},t.parseAll=function(e,n){var r=0;if([[We,Ge],[Be,je]].forEach((function(i){var a=i.map((function(e){return n.channelHasField(e)?n.fieldDef(e).field:void 0}));(a[0]||a[1])&&(e=new t(e,a,null,n.getName("geojson_"+r++)))})),n.channelHasField(qe)){var i=n.fieldDef(qe);i.type===Hn&&(e=new t(e,null,i.field,n.getName("geojson_"+r++)))}return e},t.prototype.assemble=function(){return Se({type:"geojson"},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})},t}(Bo),ys=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.projection=n,a.fields=r,a.as=i,a}return we(t,e),t.prototype.clone=function(){return new t(null,this.projection,ee(this.fields),ee(this.as))},t.parseAll=function(e,n){return n.projectionName()&&[[We,Ge],[Be,je]].forEach((function(r){var i=r.map((function(e){return n.channelHasField(e)?n.fieldDef(e).field:void 0})),a=r[0]===Be?"2":"";(i[0]||i[1])&&(e=new t(e,n.projectionName(),i,[n.getName("x"+a),n.getName("y"+a)]))})),e},t.prototype.assemble=function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}},t}(Bo),bs=function(e){function t(t){return e.call(this,t)||this}return we(t,e),t.prototype.clone=function(){return new t(null)},t.prototype.producedFields=function(){return(e={})[Ei]=!0,e;var e},t.prototype.assemble=function(){return{type:"identifier",as:Ei}},t}(Bo),ws=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.transform=n,i.secondary=r,i}return we(t,e),t.make=function(e,n,r,i){var a=n.component.data.sources,o=new Zo(r.from.data),u=a[o.hash()];u||(u=a[o.hash()]=o);var s=n.getName("lookup_"+i),l=new Uo(u,s,"lookup",n.component.data.outputNodeRefCounts);return new t(e,r,(n.component.data.outputNodes[s]=l).getSource())},t.prototype.producedFields=function(){return x(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},t.prototype.assemble=function(){var e;if(this.transform.from.fields)e=Se({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var t=this.transform.as;o(t)||(cn(Zt.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return Se({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e,this.transform.default?{default:this.transform.default}:{})},t}(Bo),Ss=function(e){function t(t,n){var r=e.call(this,t)||this;return r.transform=n,r}return we(t,e),t.prototype.clone=function(){return new t(this.parent,ee(this.transform))},t.prototype.producedFields=function(){var e=this,t={};return this.transform.window.forEach((function(n){t[e.getDefaultName(n)]=!0})),t},t.prototype.getDefaultName=function(e){return void 0===e.as?String(e.op)+"_field":e.as},t.prototype.assemble=function(){for(var e=[],t=[],n=[],r=[],i=0,a=this.transform.window;i<a.length;i++){var o=a[i];t.push(o.op),n.push(this.getDefaultName(o)),r.push(void 0===o.param?null:o.param),e.push(void 0===o.field?null:o.field)}var u=this.transform.frame,s=this.transform.groupby,l=[],c=[];if(void 0!==this.transform.sort)for(var f=0,d=this.transform.sort;f<d.length;f++){var h=d[f];l.push(h.field),c.push(void 0===h.order?null:h.order)}var p={field:l,order:c},x=this.transform.ignorePeers,g={type:"window",params:r,as:n,ops:t,fields:e,sort:p};return void 0!==x&&(g.ignorePeers=x),void 0!==s&&(g.groupby=s),void 0!==u&&(g.frame=u),g},t}(Bo);function ks(e){var t=function(e,t){if(e.data||!e.parent){var n=new Zo(e.data),r=n.hash();return r in t?t[r]:t[r]=n}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources),n=e.component.data.outputNodes,r=e.component.data.outputNodeRefCounts;os(e)&&(wu(e)||Au(e))&&(t=new bs(t));var i,a,u,s=e.parent&&Au(e.parent);(wu(e)||Su(e))&&s&&(t=ms.makeFromEncoding(t,e)||t),0<e.transforms.length&&(i=t,u=0,(a=e).transforms.forEach((function(e){if(Sa(e))i=new Vo(i,e);else if(ya(e)){var t={},n=e.filter,r=null;ls(n)?r=n.equal:cs(n)?r=n.range[0]:fs(n)&&(r=(n.oneOf||n.in)[0]),r&&(fn(r)?t[n.field]="date":p(r)?t[n.field]="number":o(r)&&(t[n.field]="string")),0<J(t).length&&(i=new Xo(i,t)),i=new vs(i,a,e.filter)}else if(ka(e))i=ms.makeFromTransform(i,e,a);else if(Ea(e))i=Jo.makeFromTransform(i,e);else if(Aa(e))i=Ho.makeFromTransform(i,e),os(a)&&(i=new bs(i));else if(ba(e))i=ws.make(i,a,e,u++);else{if(!wa(e))return void cn(Zt.invalidTransformIgnored(e));i=new Ss(i,e)}})),t=i);var l=Xo.make(t,e);l&&(t=l),wu(e)&&(t=_s.parseAll(t,e),t=ys.parseAll(t,e)),(wu(e)||Su(e))&&(s||(t=ms.makeFromEncoding(t,e)||t),t=Jo.makeFromEncoding(t,e)||t,t=Vo.parseAllForSortIndex(t,e));var c=e.getName(la),f=new Uo(t,c,la,r);if(t=n[c]=f,wu(e)){var d=Ho.makeFromEncoding(t,e);d&&(t=d,os(e)&&(t=new bs(t))),t=nu.make(t,e)||t}wu(e)&&(t=Yo.make(t,e)||t);var h=e.getName(sa),x=new Uo(t,h,sa,r);t=n[h]=x;var g=null;if(Su(e)){var m=e.getName("facet");g=new $o(t,e,m,x.getSource()),t=n[m]=g}var v=Se({},e.component.data.ancestorParse,l?l.parse:{});return Se({},e.component.data,{outputNodes:n,outputNodeRefCounts:r,raw:f,main:x,facetRoot:g,ancestorParse:v})}var Es=function(e){function t(t,n,r,i,a,o){return e.call(this,t,n,r,i,a,o)||this}return we(t,e),t.prototype.parseData=function(){this.component.data=ks(this),this.children.forEach((function(e){e.parseData()}))},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),J(t.component.selection).forEach((function(n){e.component.selection[n]=t.component.selection[n]}))},n=0,r=this.children;n<r.length;n++)t(r[n])},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children;e<t.length;e++)t[e].parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){for(var e=0,t=this.children;e<t.length;e++)t[e].parseAxisAndHeader()},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)},t.prototype.assembleSelectionSignals=function(){return this.children.forEach((function(e){return e.assembleSelectionSignals()})),[]},t.prototype.assembleLayoutSignals=function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLayoutSignals())}),Ja(this))},t.prototype.assembleSelectionData=function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)},t.prototype.assembleMarks=function(){return this.children.map((function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleLayoutSize();return Se({type:"group",name:e.getName("group")},t?{title:t}:{},n?{style:n}:{},r?{encode:{update:r}}:{},e.assembleGroup())}))},t}(Tu);function As(e){Cs(e);var t=e.component.layoutSize;t.setWithExplicit("width",Ds(e,"width")),t.setWithExplicit("height",Ds(e,"height"))}var Ts=As;function Cs(e){for(var t=0,n=e.children;t<n.length;t++)n[t].parseLayoutSize()}function Ds(e,t){for(var n,r="width"===t?"x":"y",i=e.component.resolve,a=0,o=e.children;a<o.length;a++){var u=(f=o[a]).component.layoutSize.getWithExplicit(t),s=i.scale[r];if("independent"===s&&"range-step"===u.value){n=void 0;break}if(n){if("independent"===s&&n.value!==u.value){n=void 0;break}n=uo(n,u,t,"")}else n=u}if(n){for(var l=0,c=e.children;l<c.length;l++){var f=c[l];e.renameLayoutSize(f.getName(t),e.getName(t)),f.component.layoutSize.set(t,"merged",!1)}return n}return{explicit:!1,value:void 0}}function Ns(e,t){var n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){var a=i.get("type"),o=i.get("range");return fi(a)&&Na(o)?"range-step":r.view[t]}return"width"===t&&"text"===e.mark?r.scale.textXRangeStep:r.scale.rangeStep||xi.rangeStep}var Fs=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,a,i,t.resolve)||this;return o.type="concat",t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&cn(Zt.CONCAT_CANNOT_SHARE_AXIS),o.isVConcat=$i(t),o.children=($i(t)?t.vconcat:t.hconcat).map((function(e,t){return Ks(e,o,o.getName("concat_"+t),void 0,i,a,!1)})),o}return we(t,e),t.prototype.parseLayoutSize=function(){!function(e){Cs(e);var t=e.component.layoutSize,n=e.isVConcat?"width":"height";t.setWithExplicit(n,Ds(e,n))}(this)},t.prototype.parseAxisGroup=function(){return null},t.prototype.assembleLayout=function(){return Se({padding:{row:10,column:10},offset:10},this.isVConcat?{columns:1}:{},{bounds:"full",align:"each"})},t}(Es);function Os(e){var t=0;return function n(r,i){if(r instanceof Zo&&(aa(r.data)||(e.push(i),i={name:null,source:i.name,transform:[]})),r instanceof Xo&&(r.parent instanceof Zo&&!i.source?(i.format=Se({},i.format||{},{parse:r.assembleFormatParse()}),i.transform=i.transform.concat(r.assembleTransforms(!0))):i.transform=i.transform.concat(r.assembleTransforms())),r instanceof $o)return i.name||(i.name="data_"+t++),!i.source||0<i.transform.length?(e.push(i),r.data=i.name):r.data=i.source,void r.assemble().forEach((function(t){return e.push(t)}));switch((r instanceof vs||r instanceof Vo||r instanceof ys||r instanceof _s||r instanceof Ho||r instanceof ws||r instanceof Ss||r instanceof bs)&&i.transform.push(r.assemble()),(r instanceof Yo||r instanceof ms||r instanceof Jo||r instanceof nu)&&(i.transform=i.transform.concat(r.assemble())),r instanceof Ho&&(i.name||(i.name="data_"+t++)),r instanceof Uo&&(i.source&&0===i.transform.length?r.setSource(i.source):r.parent instanceof Uo?r.setSource(i.name):(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Uo&&(!i.source||0<i.transform.length)&&e.push(i);break;case 1:n(r.children[0],i);break;default:i.name||(i.name="data_"+t++);var a=i.name;!i.source||0<i.transform.length?e.push(i):a=i.source,r.children.forEach((function(e){n(e,{name:null,source:a,transform:[]})}))}}}function Ms(e,t){return Zn(e.field)?e.field.repeat in t?Se({},e,{field:t[e.field.repeat]}):void cn(Zt.noSuchRepeatedValue(e.field.repeat)):e}function Ls(e,t){if(void 0!==(e=Ms(e,t))){if(e.sort&&Go(e.sort)){var n=Ms(e.sort,t);e=Se({},e,n?{sort:n}:{})}return e}}function Ps(e,t){return tr(e)?(n=Ls(e,t))?n:Kn(e)?{condition:e.condition}:void 0:Qn(e)?(n=Ls(e.condition,t))?Se({},e,{condition:n}):(e.condition,ke(e,["condition"])):e;var n}function zs(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];if(i(a))n[r]=a.map((function(e){return Ps(e,t)})).filter((function(e){return e}));else{var o=Ps(a,t);o&&(n[r]=o)}}return n}var Is=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,a,i,t.resolve)||this;o.type="facet",o.child=Ks(t.spec,o,o.getName("child"),void 0,i,a,!1),o.children=[o.child];var u=zs(t.facet,i);return o.facet=o.initFacet(u),o}return we(t,e),t.prototype.initFacet=function(e){return Or(e,(function(e,t,n){return W([Ue,Ve],n)?void 0===t.field?cn(Zt.emptyFieldDef(t,n)):e[n]=vr(t,n):cn(Zt.incompatibleChannel(n,"facet")),e}),{})},t.prototype.channelHasField=function(e){return!!this.facet[e]},t.prototype.fieldDef=function(e){return this.facet[e]},t.prototype.parseData=function(){this.component.data=ks(this),this.child.parseData()},t.prototype.parseLayoutSize=function(){Cs(this)},t.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},t.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader("column"),this.parseHeader("row"),this.mergeChildAxis("x"),this.mergeChildAxis("y")},t.prototype.parseHeader=function(e){if(this.channelHasField(e)){var t=this.facet[e],n=t.header||{},r=void 0!==t.title?t.title:void 0!==n.title?n.title:xr(t,this.config);this.child.component.layoutHeaders[e].title&&(r+=" / "+this.child.component.layoutHeaders[e].title,this.child.component.layoutHeaders[e].title=null),this.component.layoutHeaders[e]={title:r,facetFieldDef:t,header:[this.makeHeaderComponent(e,!0)]}}},t.prototype.makeHeaderComponent=function(e,t){var n="row"===e?"height":"width";return{labels:t,sizeSignal:this.child.component.layoutSize.get(n)?this.child.getSizeSignalRef(n):void 0,axes:[]}},t.prototype.mergeChildAxis=function(e){var t,n=this.child;if(n.component.axes[e]){var r=this.component,i=r.layoutHeaders,a=r.resolve;if(a.axis[e]=to(a,e),"shared"===a.axis[e])for(var o="x"===e?"column":"row",u=i[o],s=0,l=n.component.axes[e];s<l.length;s++){var c=l[s],f="top"===(t=c.get("orient"))||"left"===t?"header":"footer";u[f]=u[f]||[this.makeHeaderComponent(o,!1)];var d=Ma(c,"main",this.config,{header:!0});u[f][0].axes.push(d),c.mainExtracted=!0}}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.child.assembleSelectionTopLevelSignals(e)},t.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},t.prototype.assembleSelectionData=function(e){return this.child.assembleSelectionData(e)},t.prototype.getLayoutBandMixins=function(e){for(var t={},n="header"===e?"headerBand":"footerBand",r=0,i=["row","column"];r<i.length;r++){var a=i[r],o=this.component.layoutHeaders[a][e];if(o&&o[0]){var u="row"===a?"height":"width";this.child.component.layoutSize.get(u)||(t[n]=t[n]||{},t[n][a]=.5)}}return t},t.prototype.assembleLayout=function(){var e=this.channelHasField("column")?this.columnDistinctSignal():1;return Se({padding:{row:10,column:10}},this.getLayoutBandMixins("header"),this.getLayoutBandMixins("footer"),{offset:10,columns:e,bounds:"full",align:"all"})},t.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},t.prototype.columnDistinctSignal=function(){if(!(this.parent&&this.parent instanceof t))return{signal:"length(data('"+this.getName("column_domain")+"'))"}},t.prototype.assembleGroup=function(n){return this.parent&&this.parent instanceof t?Se({},this.channelHasField("column")?{encode:{update:{columns:{field:ar(this.facet.column,{prefix:"distinct"})}}}}:{},e.prototype.assembleGroup.call(this,n)):e.prototype.assembleGroup.call(this,n)},t.prototype.getCardinalityAggregateForChild=function(){var e=[],n=[];if(this.child instanceof t)this.child.channelHasField("column")&&(e.push(ar(this.child.facet.column)),n.push("distinct"));else for(var r=0,i=["x","y"];r<i.length;r++){var a=i[r],o=this.child.component.scales[a];if(o&&!o.merged){var u=o.get("type"),s=o.get("range");if(fi(u)&&Na(s)){var l=lu(cu(this.child,a));l?(e.push(l),n.push("distinct")):cn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e.length?{fields:e,ops:n}:void 0},t.prototype.assembleMarks=function(){var e,t,n,r=this.child,i=this.facet,a=this.component.data.facetRoot,o=(e=a,n=Os(t=[]),e.children.forEach((function(t){return n(t,{source:e.name,name:null,transform:[]})})),t),u=this.channelHasField(Ue),s=this.channelHasField(Ve),l=r.assembleLayoutSize(),c={};u&&s&&(c.aggregate={cross:!0});var f=this.getCardinalityAggregateForChild();f&&(c.aggregate=Se({},c.aggregate,f));var d=r.assembleTitle(),h=r.assembleGroupStyle();return[Se({name:this.getName("cell"),type:"group"},d?{title:d}:{},h?{style:h}:{},{from:{facet:Se({name:a.name,data:a.data,groupby:[].concat(u?[this.vgField(Ue)]:[],s?[this.vgField(Ve)]:[])},c)},sort:{field:[].concat(u?[this.vgField(Ue,{expr:"datum"})]:[],s?[this.vgField(Ve,{expr:"datum"})]:[]),order:[].concat(u?[i.row.sort||"ascending"]:[],s?[i.column.sort||"ascending"]:[])}},0<o.length?{data:o}:{},l?{encode:{update:l}}:{},r.assembleGroup())]},t.prototype.getMapping=function(){return this.facet},t}(Cu),Rs=function(e){function t(t,n,r){void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r=!1);var i=e.call(this)||this;return i.explicit=t,i.implicit=n,i.mainExtracted=r,i}return we(t,e),t.prototype.clone=function(){return new t(ee(this.explicit),ee(this.implicit),this.mainExtracted)},t.prototype.hasAxisPart=function(e){return!("axis"!==e&&("grid"===e||"title"===e?!this.get(e):!1===(t=this.get(e))||null===t));var t},t}(no);function Gs(e,t,n,r,i){void 0===r&&(r="");for(var a=0,o=("band"===i?["axisBand"]:[]).concat(["x"===n?"axisX":"axisY","axis"+r.substr(0,1).toUpperCase()+r.substr(1),"axis"]);a<o.length;a++){var u=o[a];if(t[u]&&void 0!==t[u][e])return t[u][e]}}function js(e){return xt.reduce((function(t,n){return e.component.scales[n]&&e.axis(n)&&(t[n]=[function(e,t){var n=t.axis(e),r=new Rs;Oe.forEach((function(i){var a=function(e,t,n,r){var i,a,o,u,s,l,c,f=r.fieldDef(n);switch(e){case"scale":return r.scaleName(n);case"gridScale":return function(e,t){var n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(r,n);case"format":return Ra(f,t.format,r.config);case"grid":var d=r.getScaleComponent(n).get("type");return Ia(t.grid,(c=f,!fi(d)&&!c.bin));case"labelFlush":return u=f,s=n,void 0!==(l=t).labelFlush?l.labelFlush:!("x"!==s||!W(["quantitative","temporal"],u.type))||void 0;case"labelOverlap":return i=f,o=d=r.getScaleComponent(n).get("type"),void 0!==(a=t).labelOverlap?a.labelOverlap:"nominal"!==i.type?"log"!==o||"greedy":void 0;case"orient":return Ia(t.orient,function(e){switch(e){case Pe:return"bottom";case ze:return"left"}throw new Error(Zt.INVALID_CHANNEL_FOR_AXIS)}(n));case"tickCount":d=r.getScaleComponent(n).get("type");var h="x"===n?"width":"y"===n?"height":void 0,p=h?r.getSizeSignalRef(h):void 0;return Ia(t.tickCount,function(e,t,n,r){if(!fi(n)&&"log"!==n&&!W(["month","hours","day","quarter"],t.timeUnit))return t.bin?{signal:"ceil("+r.signal+"/20)"}:{signal:"ceil("+r.signal+"/40)"}}(0,f,d,p));case"title":var x="x"===n?"x2":"y2",g=r.fieldDef(x);return Ia(void 0!==f.title?f.title:void 0===t.title?void 0:t.title,Va([Jn(f)],g?[Jn(g)]:[]));case"values":return function(e,t,n,r){var i=e.values;if(e.values&&fn(i[0]))return i.map((function(e){return{signal:gn(e,!0)}}));if(!i&&n.bin&&n.type===Bn){var a=t.scaleDomain(r);if(a&&"unaggregated"!==a&&!mi(a))return i;var o=t.getName(Et(n.bin)+"_"+n.field+"_bins");return{signal:"sequence("+o+".start, "+o+".stop + "+o+".step, "+o+".step)"}}return i}(t,r,f,n)}return De(e)?t[e]:void 0}(i,n,e,t);if(void 0!==a){var o="values"===i?!!n.values:"encode"===i?!!n.encoding||!!n.labelAngle:a===n[i],u=Gs(i,t.config,e,r.get("orient"),t.getScaleComponent(e).get("type"));(o||void 0===u)&&r.set(i,a,o)}}));var i=n.encoding||{},a=Ee.reduce((function(n,a){if(!r.hasAxisPart(a))return n;var o="labels"===a?function(e,t,n,r){var i=e.fieldDef(t)||("x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0),a=e.axis(t),o=e.config,u={};if(kr(i)){var s=e.getScaleComponent(t).get("type")===Ur.UTC;u.text={signal:Ba("datum.value",i.timeUnit,a.format,o.axis.shortTimeLabels,o.timeFormat,s)}}var l,c,f,d,h=Gs("labelAngle",e.config,t,r,e.getScaleComponent(t).get("type"));if(void 0===h&&(h=function(e,t,n){return void 0!==e.labelAngle?(e.labelAngle%360+360)%360:t===Pe&&W([qn,Un],n.type)?270:void 0}(a,t,i))&&(u.angle={value:h}),void 0!==h){var p=(f=((f=h)%360+360)%360,"top"===(d=r)||"bottom"===d?f%180==0?"center":0<f&&f<180?"top"===d?"right":"left":"top"===d?"left":"right":(f+90)%180==0?"center":90<=f&&f<270?"left"===d?"left":"right":"left"===d?"right":"left");p&&(u.align={value:p}),u.baseline=(l=h,"top"===(c=r)||"bottom"===c?l<=45||315<=l?{value:"top"===c?"bottom":"top"}:135<=l&&l<=225?{value:"top"===c?"top":"bottom"}:{value:"middle"}:l<=45||315<=l||135<=l&&l<=225?{value:"middle"}:45<=l&&l<=135?{value:"left"===c?"top":"bottom"}:{value:"left"===c?"bottom":"top"})}return u=Se({},u,n),0===J(u).length?void 0:u}(t,e,i.labels||{},r.get("orient")):i[a]||{};return void 0!==o&&0<J(o).length&&(n[a]={update:o}),n}),{});return 0<J(a).length&&r.set("encode",a,!!n.encoding||void 0!==n.labelAngle),r}(n,e)]),t}),{})}var Ws={bottom:"top",top:"bottom",left:"right",right:"left"};function Bs(e,t){if(!e)return t.map((function(e){return e.clone()}));if(e.length===t.length){for(var n=e.length,r=0;r<n;r++){var i=e[r],a=t[r];if(!!i!=!!a)return;if(i&&a){var o=i.getWithExplicit("orient"),u=a.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;e[r]=Us(i,a)}}return e}}function Us(e,t){for(var n=function(n){var r=uo(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(function(e,t){switch(n){case"title":return qa(e,t);case"gridScale":return{explicit:e.explicit,value:e.value||t.value}}return oo(e,t,n,"axis")}));e.setWithExplicit(n,r)},r=0,i=Oe;r<i.length;r++)n(i[r]);return e}function Vs(e,t,n,r){if(void 0!==e.size)return{value:e.size};if(r.bar.discreteBandSize)return{value:r.bar.discreteBandSize};if(n){var i=n.get("type");if(i!==Ur.POINT)return i===Ur.BAND?fo(t):{value:r.bar.continuousBandSize};var a=n.get("range");if(Na(a)&&p(a.step))return{value:a.step-1};cn(Zt.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}else if(r.scale.rangeStep&&null!==r.scale.rangeStep)return{value:r.scale.rangeStep-1};return{value:20}}function qs(e,t){var n=e.config,r=e.width,i=e.height;return Se({},vo(e,{size:"include",orient:"ignore"}),Co("x",e,xo(r)),Co("y",e,xo(i)),bo("size",e),function(e,t,n){return n?{shape:{value:n}}:bo("shape",e,{defaultValue:Pa("shape",e.markDef,t)})}(e,n,t))}var Hs={area:{vgMark:"area",encodeEntry:function(e){return Se({},vo(e,{size:"ignore",orient:"include"}),Co("x",e,"zeroOrMin"),Co("y",e,"zeroOrMin"),Do(e,"zeroOrMin"),yo(e))}},bar:{vgMark:"rect",encodeEntry:function(e){return Se({},vo(e,{size:"ignore",orient:"ignore"}),function(e){var t=e.config,n=e.encoding,r=e.markDef,i=e.width,a=r.orient,o=n.size,u=n.x,s=e.scaleName(Pe),l=e.getScaleComponent(Pe);if("horizontal"===a)return Se({},Co("x",e,"zeroOrMin"),Do(e,"zeroOrMin"));if(tr(u)){var c=l.get("type");if(u.bin&&!o&&!fi(c))return To(u,"x",e.scaleName("x"),void 0===r.binSpacing?t.bar.binSpacing:r.binSpacing,l.get("reverse"));if(c===Ur.BAND)return Eo(u,"x",e)}return Ao("x",e,Se({},xo(i)),Vs(r,s,l,t))}(e),function(e){var t=e.config,n=e.encoding,r=e.height,i=e.markDef,a=i.orient,o=n.size,u=n.y,s=e.scaleName(ze),l=e.getScaleComponent(ze);if("vertical"===a)return Se({},Co("y",e,"zeroOrMin"),Do(e,"zeroOrMin"));if(tr(u)){var c=l.get("type");if(u.bin&&!o&&!fi(c))return To(u,"y",e.scaleName("y"),void 0===i.binSpacing?t.bar.binSpacing:i.binSpacing,l.get("reverse"));if(c===Ur.BAND)return Eo(u,"y",e)}return Ao("y",e,xo(r),Vs(i,s,l,t))}(e))}},circle:{vgMark:"symbol",encodeEntry:function(e){return qs(e,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(e){return Se({},vo(e,{size:"ignore",orient:"ignore"}))},postEncodingTransform:function(e){var t=e.encoding.shape;return[Se({type:"geoshape",projection:e.projectionName()},t&&tr(t)&&t.type===Hn?{field:ar(t,{expr:"datum"})}:{})]}},line:{vgMark:"line",encodeEntry:function(e){var t=e.width,n=e.height;return Se({},vo(e,{size:"ignore",orient:"ignore"}),Co("x",e,xo(t)),Co("y",e,xo(n)),bo("size",e,{vgChannel:"strokeWidth"}),yo(e))}},point:{vgMark:"symbol",encodeEntry:function(e){return qs(e)}},rect:{vgMark:"rect",encodeEntry:function(e){return Se({},vo(e,{size:"ignore",orient:"ignore"}),function(e){var t=e.encoding.x,n=e.encoding.x2,r=e.getScaleComponent(Pe),i=r?r.get("type"):void 0;if(tr(t)&&t.bin&&!n)return To(t,"x",e.scaleName("x"),0,r.get("reverse"));if(tr(t)&&r&&fi(i)){if(i===Ur.BAND)return Eo(t,"x",e);throw new Error(Zt.scaleTypeNotWorkWithMark(Rt,i))}return Se({},Co("x",e,"zeroOrMax"),Do(e,"zeroOrMin","x2"))}(e),function(e){var t=e.encoding.y,n=e.encoding.y2,r=e.getScaleComponent(ze),i=r?r.get("type"):void 0;if(tr(t)&&t.bin&&!n)return To(t,"y",e.scaleName("y"),0,r.get("reverse"));if(tr(t)&&r&&fi(i)){if(i===Ur.BAND)return Eo(t,"y",e);throw new Error(Zt.scaleTypeNotWorkWithMark(Rt,i))}return Se({},Co("y",e,"zeroOrMax"),Do(e,"zeroOrMin","y2"))}(e))}},rule:{vgMark:"rule",encodeEntry:function(e){e.config;var t=e.markDef,n=e.width,r=e.height,i=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Se({},vo(e,{size:"ignore",orient:"ignore"}),Co("x",e,"horizontal"===i?"zeroOrMin":xo(n)),Co("y",e,"vertical"===i?"zeroOrMin":xo(r)),"vertical"!==i?Do(e,"zeroOrMax","x2"):{},"horizontal"!==i?Do(e,"zeroOrMax","y2"):{},bo("size",e,{vgChannel:"strokeWidth",defaultValue:t.size})):{}}},square:{vgMark:"symbol",encodeEntry:function(e){return qs(e,"square")}},text:{vgMark:"text",encodeEntry:function(e){var t=e.config,n=e.encoding,r=e.height,i=e.markDef,a=n.text;return Se({},vo(e,{size:"ignore",orient:"ignore"}),Co("x",e,function(e,t){return tr(t)&&t.type===Bn?{field:{group:"width"},offset:-5}:{value:e.scale.textXRangeStep/2}}(t,a)),Co("y",e,xo(r)),So(e),bo("size",e,Se({},i.size?{defaultValue:i.size}:{},{vgChannel:"fontSize"})),function(e,t){if(void 0!==t)return(n={}).align={value:t},n;var n}(0,function(e,t,n){if(void 0===(e.align||Pa("align",e,n)))return Ar(t,Pe)||Ar(t,We)?"center":"right"}(e.markDef,n,t)))}},tick:{vgMark:"rect",encodeEntry:function(e){var t,n=e.config,r=e.markDef,i=e.width,a=e.height,o=r.orient,u="horizontal"===o?"width":"height",s="horizontal"===o?"height":"width";return Se({},vo(e,{size:"ignore",orient:"ignore"}),Co("x",e,xo(i),"xc"),Co("y",e,xo(a),"yc"),bo("size",e,{defaultValue:function(e){var t=e.config,n=e.markDef,r=n.orient,i=e.getScaleComponent("horizontal"===r?"x":"y");if(void 0!==n.size)return n.size;if(void 0!==t.tick.bandSize)return t.tick.bandSize;var a=i?i.get("range"):void 0,o=a&&Na(a)?a.step:t.scale.rangeStep;if("number"!=typeof o)throw new Error("Function does not handle non-numeric rangeStep");return o/1.5}(e),vgChannel:u}),((t={})[s]={value:n.tick.thickness},t))}},trail:{vgMark:"trail",encodeEntry:function(e){var t=e.width,n=e.height;return Se({},vo(e,{size:"include",orient:"ignore"}),Co("x",e,xo(t)),Co("y",e,xo(n)),bo("size",e),yo(e))}}},$s="faceted_path_";function Ys(e,t){void 0===t&&(t={fromPrefix:""});var n,r,a,o=e.mark,u=void 0!==e.markDef.clip?!!e.markDef.clip:(r=(n=e).getScaleComponent("x"),a=n.getScaleComponent("y"),!!(r&&r.get("domainRaw")||a&&a.get("domainRaw"))),s=La(e.markDef),l=e.encoding.key,c=function(e){var t=e.encoding.order;if(i(t)||!rr(t)){if((i(t)||tr(t))&&!e.stack)return Ua(t,{expr:"datum"});if(Vt(e.mark)){var n="horizontal"===e.markDef.orient?"y":"x",r=e.sort(n),a=Go(r)?ar({aggregate:Tr(e.encoding)?r.op:void 0,field:r.field},{expr:"datum"}):e.vgField(n,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"});return a?{field:a,order:"descending"}:void 0}}}(e),f=Hs[o].postEncodingTransform?Hs[o].postEncodingTransform(e):null;return[Se({name:e.getName("marks"),type:Hs[o].vgMark},u?{clip:!0}:{},s?{style:s}:{},l?{key:{field:l.field}}:{},c?{sort:c}:{},{from:{data:t.fromPrefix+e.requestDataName(sa)},encode:{update:Hs[o].encodeEntry(e)}},f?{transform:f}:{})]}var Xs=function(e){function t(t,n,r,i,a,o,u){void 0===i&&(i={});var s=e.call(this,t,n,r,o,a,void 0)||this;s.fit=u,s.type="unit",s.specifiedScales={},s.specifiedAxes={},s.specifiedLegends={},s.specifiedProjection={},s.selection={},s.children=[],s.initSize(Se({},i,t.width?{width:t.width}:{},t.height?{height:t.height}:{}));var l=Ht(t.mark)?t.mark.type:t.mark,c=s.encoding=Cr(zs(t.encoding||{},a),l);return s.markDef=function(e,t,n){var r,i,a,o=Ht(e)?Se({},e):{type:e},u=o.orient||Pa("orient",o,n);return o.orient=function(e,t,n){switch(e){case Lt:case Wt:case Bt:case Pt:case Rt:return}var r=t.y2,i=t.x2;switch(e){case Gt:if(i&&r)return;case Ot:case Ft:if(r)return"vertical";if(i)return"horizontal";if(e===Gt){if(t.x&&!t.y)return"vertical";if(t.y&&!t.x)return"horizontal"}case Mt:case zt:var a=tr(t.x)&&ur(t.x),o=tr(t.y)&&ur(t.y);if(a&&!o)return"tick"!==e?"horizontal":"vertical";if(!a&&o)return"tick"!==e?"vertical":"horizontal";if(a&&o){var u=t.x,s=t.y,l=u.type===Vn,c=s.type===Vn;return l&&!c?"tick"!==e?"vertical":"horizontal":!l&&c?"tick"!==e?"horizontal":"vertical":!u.aggregate&&s.aggregate?"tick"!==e?"vertical":"horizontal":u.aggregate&&!s.aggregate?"tick"!==e?"horizontal":"vertical":n||(e===Mt&&t.order||cn(Zt.unclearOrientContinuous(e)),"vertical")}return void cn(Zt.unclearOrientDiscreteOrEmpty(e))}return"vertical"}(o.type,t,u),void 0!==u&&u!==o.orient&&cn(Zt.orientOverridden(o.orient,u)),void 0===(void 0!==o.opacity?o.opacity:Pa("opacity",o,n))&&(o.opacity=function(e,t){if(W([Lt,zt,Wt,Bt],e)&&!Tr(t))return.7}(o.type,t)),void 0===o.filled&&(o.filled=(i=Pa("filled",r=o,n),a=r.type,void 0!==i?i:a!==Lt&&a!==Mt&&a!==Gt)),o}(t.mark,c,o),s.stack=ji(l,c,s.config.stack),s.specifiedScales=s.initScales(l,c),s.specifiedAxes=s.initAxes(c),s.specifiedLegends=s.initLegend(c),s.specifiedProjection=t.projection,s.selection=t.selection,s}return we(t,e),t.prototype.scaleDomain=function(e){var t=this.specifiedScales[e];return t?t.domain:void 0},t.prototype.sort=function(e){return(this.getMapping()[e]||{}).sort},t.prototype.axis=function(e){return this.specifiedAxes[e]},t.prototype.legend=function(e){return this.specifiedLegends[e]},t.prototype.initScales=function(e,t){return _t.reduce((function(e,n){var r,i,a=t[n];return tr(a)?i=(r=a).scale:Qn(a)?(r=a.condition,i=a.condition.scale):"x"===n?r=mr(t.x2):"y"===n&&(r=mr(t.y2)),r&&(e[n]=i||{}),e}),{})},t.prototype.initAxes=function(e){return[Pe,ze].reduce((function(t,n){var r=e[n];if(tr(r)||n===Pe&&tr(e.x2)||n===ze&&tr(e.y2)){var i=tr(r)?r.axis:null;null!==i&&!1!==i&&(t[n]=Se({},i))}return t}),{})},t.prototype.initLegend=function(e){return mt.reduce((function(t,n){var r=e[n];if(r){var i=tr(r)?r.legend:Qn(r)?r.condition.legend:null;null!==i&&!1!==i&&(t[n]=Se({},i))}return t}),{})},t.prototype.parseData=function(){this.component.data=ks(this)},t.prototype.parseLayoutSize=function(){!function(e){var t=e.component.layoutSize;if(!t.explicit.width){var n=Ns(e,"width");t.set("width",n,!1)}if(!t.explicit.height){var r=Ns(e,"height");t.set("height",r,!1)}}(this)},t.prototype.parseSelection=function(){this.component.selection=function(e,t){var n={},r=e.config.selection,i=function(i){if(!t.hasOwnProperty(i))return"continue";var a=t[i],u=r[a.type];for(var s in u)"encodings"===s&&a.fields||"fields"===s&&a.encodings||("mark"===s&&(a[s]=Se({},u[s],a[s])),void 0!==a[s]&&!0!==a[s]||(a[s]=u[s]||a[s]));i=ne(i);var l=n[i]=Se({},a,{name:i,events:o(a.on)?fa(a.on,"scope"):a.on});Zu(l,(function(t){t.parse&&t.parse(e,a,l)}))};for(var a in t)i(a);return n}(this,this.selection)},t.prototype.parseMarkGroup=function(){this.component.mark=function(e){return W([Mt,Ft,It],e.mark)?(a=(t=e).mark,o=t.encoding,n=J(o).reduce((function(e,t){switch(t){case"x":case"y":case"order":case"tooltip":case"href":case"x2":case"y2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":return e;case"detail":case"key":var n=o[t];return n&&(i(n)?n:[n]).forEach((function(t){t.aggregate||e.push(ar(t,{}))})),e;case"size":if("trail"===a)return e;case"color":case"fill":case"stroke":case"opacity":var r=mr(o[t]);return r&&!r.aggregate&&e.push(ar(r,{})),e;default:throw new Error("Bug: Channel "+t+" unimplemented for line mark")}}),[]),r=Ys(t,{fromPrefix:0<n.length?$s:""}),0<n.length?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:$s+t.requestDataName(sa),data:t.requestDataName(sa),groupby:n}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:r}]:r):Ys(e);var t,n,r,a,o}(this)},t.prototype.parseAxisAndHeader=function(){this.component.axes=js(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return n=e,r=!1,ns(t=this,(function(e,i){i.topLevelSignals&&(n=i.topLevelSignals(t,e,n)),Zu(e,(function(r){r.topLevelSignals&&(n=r.topLevelSignals(t,e,n))})),r=!0})),r&&(n.filter((function(e){return"unit"===e.name})).length||n.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})),n;var t,n,r},t.prototype.assembleSelectionSignals=function(){return function(e,t){ns(e,(function(n,r){var i=n.name,a=r.modifyExpr(e,n);t.push.apply(t,r.signals(e,n)),Zu(n,(function(r){r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(a=r.modifyExpr(e,n,a))})),t.push({name:i+"_modify",on:[{events:{signal:i+Ku},update:"modify("+u(n.name+Ju)+", "+a+")"}]})}));var n=is(e);if(t.length&&n){var r=u(n.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:fa("mousemove","scope"),update:"isTuple(facet) ? facet : group("+r+").datum"}]})}return t}(this,[])},t.prototype.assembleSelectionData=function(e){return t=e,ns(this,(function(e){t.filter((function(t){return t.name===e.name+Ju})).length||t.push({name:e.name+Ju})})),t;var t},t.prototype.assembleLayout=function(){return null},t.prototype.assembleLayoutSignals=function(){return Ja(this)},t.prototype.assembleMarks=function(){var e=this.component.mark||[];return this.parent&&Au(this.parent)||(e=es(this,e)),e.map(this.correctDataNames)},t.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},t.prototype.getMapping=function(){return this.encoding},t.prototype.toSpec=function(e,t){var n,r=ee(this.encoding);return n={mark:this.markDef,encoding:r},e||(n.config=ee(this.config)),t||(n.data=ee(this.data)),n},Object.defineProperty(t.prototype,"mark",{get:function(){return this.markDef.type},enumerable:!0,configurable:!0}),t.prototype.channelHasField=function(e){return Ar(this.encoding,e)},t.prototype.fieldDef=function(e){return mr(this.encoding[e])},t}(Cu),Zs=function(e){function t(n,r,i,a,o,u,s){var l=e.call(this,n,r,i,u,o,n.resolve)||this;l.type="layer";var c=Se({},a,n.width?{width:n.width}:{},n.height?{height:n.height}:{});return l.initSize(c),l.children=n.layer.map((function(e,n){if(Vi(e))return new t(e,l,l.getName("layer_"+n),c,o,u,s);if(Ui(e))return new Xs(e,l,l.getName("layer_"+n),c,o,u,s);throw new Error(Zt.INVALID_SPEC)})),l}return we(t,e),t.prototype.parseData=function(){this.component.data=ks(this);for(var e=0,t=this.children;e<t.length;e++)t[e].parseData()},t.prototype.parseLayoutSize=function(){As(this)},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),J(t.component.selection).forEach((function(n){e.component.selection[n]=t.component.selection[n]}))},n=0,r=this.children;n<r.length;n++)t(r[n])},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children;e<t.length;e++)t[e].parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){!function(e){for(var t=e.component,n=t.axes,r=t.resolve,i={top:0,bottom:0,right:0,left:0},a=0,o=e.children;a<o.length;a++){(p=o[a]).parseAxisAndHeader();for(var u=0,s=J(p.component.axes);u<s.length;u++){var l=s[u];r.axis[l]=to(e.component.resolve,l),"shared"===r.axis[l]&&(n[l]=Bs(n[l],p.component.axes[l]),n[l]||(r.axis[l]="independent",delete n[l]))}}for(var c=0,f=[Pe,ze];c<f.length;c++){l=f[c];for(var d=0,h=e.children;d<h.length;d++){var p;if((p=h[d]).component.axes[l]){if("independent"===r.axis[l]){n[l]=(n[l]||[]).concat(p.component.axes[l]);for(var x=0,g=p.component.axes[l];x<g.length;x++){var m=g[x],v=m.getWithExplicit("orient"),_=v.value,y=v.explicit;if(0<i[_]&&!y){var b=Ws[_];i[_]>i[b]&&m.set("orient",b,!1)}i[_]++}}delete p.component.axes[l]}}}}(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)},t.prototype.assembleSelectionSignals=function(){return this.children.reduce((function(e,t){return e.concat(t.assembleSelectionSignals())}),[])},t.prototype.assembleLayoutSignals=function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLayoutSignals())}),Ja(this))},t.prototype.assembleSelectionData=function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)},t.prototype.assembleTitle=function(){var t=e.prototype.assembleTitle.call(this);if(t)return t;for(var n=0,r=this.children;n<r.length;n++)if(t=r[n].assembleTitle())return t},t.prototype.assembleLayout=function(){return null},t.prototype.assembleMarks=function(){return t=q((e=this).children.map((function(e){return e.assembleMarks()}))),e.children.forEach((function(e){wu(e)&&(t=es(e,t))})),t;var e,t},t.prototype.assembleLegends=function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLegends())}),Po(this))},t}(Tu),Js=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,a,i,t.resolve)||this;return o.type="repeat",t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&cn(Zt.REPEAT_CANNOT_SHARE_AXIS),o.repeat=t.repeat,o.children=o._initChildren(t,o.repeat,i,a),o}return we(t,e),t.prototype._initChildren=function(e,t,n,r){for(var i=[],a=t.row||[n?n.row:null],o=t.column||[n?n.column:null],u=0,s=a;u<s.length;u++)for(var l=s[u],c=0,f=o;c<f.length;c++){var d=f[c],h=(l?"_"+l:"")+(d?"_"+d:""),p={row:l,column:d};i.push(Ks(e.spec,this,this.getName("child"+h),void 0,p,r,!1))}return i},t.prototype.parseLayoutSize=function(){Ts(this)},t.prototype.assembleLayout=function(){return{padding:{row:10,column:10},offset:10,columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:"full",align:"all"}},t}(Es);function Ks(e,t,n,r,i,a,o){if(Bi(e))return new Is(e,t,n,i,a);if(Vi(e))return new Zs(e,t,n,r,i,a,o);if(Ui(e))return new Xs(e,t,n,r,i,a,o);if(qi(e))return new Js(e,t,n,i,a);if(Hi(e))return new Fs(e,t,n,i,a);throw new Error(Zt.INVALID_SPEC)}var Qs=Object.freeze({}),el={text:["text"],line:["x","y"],trail:["x","y"],area:["x","y"]},tl={bar:x(["row","column","x","y","size","color","fill","stroke","detail"]),line:x(["row","column","x","y","color","fill","stroke","color","detail"]),trail:x(["row","column","x","y","color","fill","stroke","color","detail","size"]),area:x(["row","column","x","y","color","fill","stroke","detail"]),tick:x(["row","column","x","y","color","fill","stroke","detail"]),circle:x(["row","column","x","y","color","fill","stroke","size","detail"]),square:x(["row","column","x","y","color","fill","stroke","size","detail"]),point:x(["row","column","x","y","color","fill","stroke","size","detail","shape"]),geoshape:x(["row","column","color","fill","stroke","detail","shape"]),text:x(["row","column","size","color","fill","stroke","text"])},nl=Object.freeze({DEFAULT_REQUIRED_CHANNEL_MAP:el,DEFAULT_SUPPORTED_CHANNEL_TYPE:tl,getEncodingMappingError:function(e,t,n){void 0===t&&(t=el),void 0===n&&(n=tl);var r=Ht(e.mark)?e.mark.type:e.mark,i=e.encoding,a=t[r],o=n[r];for(var u in a)if(!(a[u]in i))return'Missing encoding channel "'+a[u]+'" for mark "'+r+'"';for(var s in i)if(!o[s])return'Encoding channel "'+s+'" is not supported by mark type "'+r+'"';return r!==Ot||i.x||i.y?null:"Missing both x and y for bar"}});e.aggregate=ye,e.axis=Le,e.bin=Nt,e.channel=kt,e.compositeMark=qr,e.config=Pi,e.data=ca,e.datetime=_n,e.encoding=Mr,e.facet=Qs,e.fieldDef=Er,e.legend=Kr,e.mark=un,e.scale=ki,e.sort=Wo,e.spec=ta,e.stack=Wi,e.timeUnit=jn,e.transform=Ca,e.type=Yn,e.util=fe,e.validate=nl,e.compile=function(e,t){var n,r,i,a,o,u;void 0===t&&(t={}),t.logger&&(n=t.logger,ln=n),t.fieldTitle&&hr(t.fieldTitle);try{var s=Di(H({},t.config,e.config)),l=Xi(e,s),c=function(e,t,n){void 0===n&&(n=!0);var r=Se({type:"pad"},na(t),na(e));return"fit"===r.type&&(n||(cn(Zt.FIT_NON_SINGLE),r.type="pad")),r}(e.autosize,s.autosize,Vi(l)||Ui(l)),f=Ks(l,null,"",void 0,void 0,s,"fit"===c.type);return f.parse(),(u=K((o=f.component.data).sources)).forEach(au),ou(u=u.filter((function(e){return 0<e.numChildren()}))).forEach(Ko(eu)),ou(u=u.filter((function(e){return 0<e.numChildren()}))).forEach(Ko(Qo)),ou(u).forEach(tu),u.forEach(iu),J(o.sources).forEach((function(e){0===o.sources[e].numChildren()&&delete o.sources[e]})),function(e,t){var n=e.config?Mi(e.config):void 0,r=[].concat(e.assembleSelectionData([]),function(e,t){var n=K(e.sources),r=[],i=Os(r),a=0;n.forEach((function(e){e.hasName()||(e.dataName="source_"+a++);var t=e.assemble();i(e,t)})),r.forEach((function(e){0===e.transform.length&&delete e.transform}));for(var o=0,u=0;u<r.length;u++)0!==((x=r[u]).transform||[]).length||x.source||r.splice(o++,0,r.splice(u,1)[0]);for(var s=0,l=r;s<l.length;s++)for(var c=0,f=(x=l[s]).transform||[];c<f.length;c++){var d=f[c];"lookup"===d.type&&(d.from=e.outputNodes[d.from].getSource())}for(var h=0,p=r;h<p.length;h++){var x;(x=p[h]).name in t&&(x.values=t[x.name])}return r}(e.component.data,t.datasets||{}));delete t.datasets;var i=e.assembleProjections(),a=e.assembleTitle(),o=e.assembleGroupStyle(),u=e.assembleLayoutSignals();return u=u.filter((function(e){return"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)})),{spec:Se({$schema:"https://vega.github.io/schema/vega/v3.0.json"},e.description?{description:e.description}:{},t,a?{title:a}:{},o?{style:o}:{},{data:r},0<i.length?{projections:i}:{},e.assembleGroup(u.concat(e.assembleSelectionTopLevelSignals([]))),n?{config:n}:{})}}(f,(r=e,i=s,Se({autosize:1===J(a=c).length&&a.type?a.type:a},ia(i),ia(r))))}finally{t.logger&&(ln=sn),t.fieldTitle&&pr()}},e.version="2.4.3",Object.defineProperty(e,"__esModule",{value:!0})}(exports),function(){var e,t,n,r,i,a,o,u,s,l,c,f,d,h,p,x,g,m,v,_,y,b,w,S,k,E,A,T,C,D,N,F,O,M,L,P,z,I,R,G,j,W,B,U,V,q,H,$,Y,X,Z,J,K,Q,ee,te,ne,re,ie,ae,oe,ue,se,le,ce,fe,de,he,pe,xe,ge,ve,_e,ye,be,we,Se,ke,Ee,Ae,Te=[].slice;we=function(){var e,t,n,r,i;for(e={},r=0,t=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;r<t;r++)n=i[r],e["[object "+n+"]"]=n.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),H=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),e>n&&(e=n),e},Se=function(e){return e.length>=3?[].slice.call(e):e[0]},y=function(e){var t,n;for(e._clipped=!1,e._unclipped=e.slice(0),t=n=0;n<3;t=++n)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e._clipped||delete e._unclipped,e},r=Math.PI,ge=Math.round,w=Math.cos,T=Math.floor,ee=Math.pow,$=Math.log,_e=Math.sin,ye=Math.sqrt,h=Math.atan2,Z=Math.max,d=Math.abs,o=2*r,i=r/3,t=r/180,a=180/r,(_=function(){return arguments[0]instanceof e?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,arguments,(function(){}))}).default=_,f=[],null!==module&&null!=module.exports&&(module.exports=_),"function"==typeof define&&define.amd?define([],(function(){return _})):(null!==exports?exports:this).chroma=_,_.version="1.3.4",c={},s=[],l=!1,e=function(){function e(){var e,t,n,r,i,a,o,u,f;for(a=this,t=[],u=0,r=arguments.length;u<r;u++)null!=(e=arguments[u])&&t.push(e);if(t.length>1&&(o=t[t.length-1]),null!=c[o])a._rgb=y(c[o](Se(t.slice(0,-1))));else{for(l||(s=s.sort((function(e,t){return t.p-e.p})),l=!0),f=0,i=s.length;f<i&&!(o=(n=s[f]).test.apply(n,t));f++);o&&(a._rgb=y(c[o].apply(c,t)))}null==a._rgb&&console.warn("unknown format: "+t),null==a._rgb&&(a._rgb=[0,0,0]),3===a._rgb.length&&a._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e.prototype.clone=function(){return _(me._rgb)},e}(),_._input=c,_.brewer=m={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],m)t.push(m[e.toLowerCase()]=m[e])}(),_.colors=ke={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},W=function(){var e,t,r,i,a,o,u;return i=(t=Se(arguments))[0],e=t[1],r=t[2],o=(i+16)/116,a=isNaN(e)?o:o+e/500,u=isNaN(r)?o:o-r/200,o=n.Yn*B(o),a=n.Xn*B(a),u=n.Zn*B(u),[Ae(3.2404542*a-1.5371385*o-.4985314*u),Ae(-.969266*a+1.8760108*o+.041556*u),r=Ae(.0556434*a-.2040259*o+1.0572252*u),t.length>3?t[3]:1]},Ae=function(e){return 255*(e<=.00304?12.92*e:1.055*ee(e,1/2.4)-.055)},B=function(e){return e>n.t1?e*e*e:n.t2*(e-n.t0)},n={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},se=function(){var e,t,n,r,i,a,o;return n=(r=Se(arguments))[0],t=r[1],e=r[2],a=(i=he(n,t,e))[0],[116*(o=i[1])-16,500*(a-o),200*(o-i[2])]},pe=function(e){return(e/=255)<=.04045?e/12.92:ee((e+.055)/1.055,2.4)},Ee=function(e){return e>n.t3?ee(e,1/3):e/n.t2+n.t0},he=function(){var e,t,r,i;return r=(i=Se(arguments))[0],t=i[1],e=i[2],r=pe(r),t=pe(t),e=pe(e),[Ee((.4124564*r+.3575761*t+.1804375*e)/n.Xn),Ee((.2126729*r+.7151522*t+.072175*e)/n.Yn),Ee((.0193339*r+.119192*t+.9503041*e)/n.Zn)]},_.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["lab"]),(function(){}))},c.lab=W,e.prototype.lab=function(){return se(this._rgb)},p=function(e){var t,n,r,i,a,o,u,s,l,c,f;return 2===(e=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(_(i));return r}()).length?(l=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),a=l[0],o=l[1],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push(a[t]+e*(o[t]-a[t]));return r}(),_.lab.apply(_,n)}):3===e.length?(c=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),a=c[0],o=c[1],u=c[2],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*a[t]+2*(1-e)*e*o[t]+e*e*u[t]);return r}(),_.lab.apply(_,n)}):4===e.length?(f=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),a=f[0],o=f[1],u=f[2],s=f[3],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*(1-e)*a[t]+3*(1-e)*(1-e)*e*o[t]+3*(1-e)*e*e*u[t]+e*e*e*s[t]);return r}(),_.lab.apply(_,n)}):5===e.length&&(n=p(e.slice(0,3)),r=p(e.slice(2,5)),t=function(e){return e<.5?n(2*e):r(2*(e-.5))}),t},_.bezier=function(e){var t;return(t=p(e)).scale=function(){return _.scale(t)},t},_.cubehelix=function(e,t,n,r,i){var a,u,s;return null==e&&(e=300),null==t&&(t=-1.5),null==n&&(n=1),null==r&&(r=1),null==i&&(i=[0,1]),a=0,"array"===we(i)?u=i[1]-i[0]:(u=0,i=[i,i]),(s=function(s){var l,c,f,d,h;return l=o*((e+120)/360+t*s),d=ee(i[0]+u*s,r),c=(0!==a?n[0]+s*a:n)*d*(1-d)/2,f=w(l),h=_e(l),_(y([255*(d+c*(-.14861*f+1.78277*h)),255*(d+c*(-.29227*f-.90649*h)),255*(d+c*(1.97294*f))]))}).start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:("array"===we(n=e)?0==(a=n[1]-n[0])&&(n=n[1]):a=0,s)},s.lightness=function(e){return null==e?i:("array"===we(e)?(i=e,u=e[1]-e[0]):(i=[e,e],u=0),s)},s.scale=function(){return _.scale(s)},s.hue(n),s},_.random=function(){var t,n;for("0123456789abcdef",t="#",n=0;n<6;++n)t+="0123456789abcdef".charAt(T(16*Math.random()));return new e(t)},f=[],L=function(e,t,n,r){var i,a,o,u;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==we(e)&&(e=_(e)),"object"!==we(t)&&(t=_(t)),o=0,a=f.length;o<a;o++)if(r===(i=f[o])[0]){u=i[1](e,t,n,r);break}if(null==u)throw"color mode "+r+" is not supported";return u.alpha(e.alpha()+n*(t.alpha()-e.alpha()))},_.interpolate=L,e.prototype.interpolate=function(e,t,n){return L(this,e,t,n)},_.mix=L,e.prototype.mix=e.prototype.interpolate,c.rgb=function(){var e,t,n,r;for(e in n=[],t=Se(arguments))r=t[e],n.push(r);return n},_.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["rgb"]),(function(){}))},e.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},e.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},s.push({p:3,test:function(e){var t;return t=Se(arguments),"array"===we(t)&&3===t.length?"rgb":4===t.length&&"number"===we(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),c.lrgb=c.rgb,I=function(t,n,r,i){var a,o;return a=t._rgb,o=n._rgb,new e(ye(ee(a[0],2)*(1-r)+ee(o[0],2)*r),ye(ee(a[1],2)*(1-r)+ee(o[1],2)*r),ye(ee(a[2],2)*(1-r)+ee(o[2],2)*r),i)},u=function(t){var n,r,i,a,o;for(n=1/t.length,o=[0,0,0,0],i=0,r=t.length;i<r;i++)a=t[i]._rgb,o[0]+=ee(a[0],2)*n,o[1]+=ee(a[1],2)*n,o[2]+=ee(a[2],2)*n,o[3]+=a[3]*n;return o[0]=ye(o[0]),o[1]=ye(o[1]),o[2]=ye(o[2]),new e(o)},f.push(["lrgb",I]),_.average=function(e,t){var n,i,a,o,s,l,c,f,d,p,x,g,m;if(null==t&&(t="rgb"),d=e.length,c=(e=e.map((function(e){return _(e)}))).splice(0,1)[0],"lrgb"===t)return u(e);for(f in o=[],s=0,l=0,g=c.get(t))g[f]=g[f]||0,o.push(isNaN(g[f])?0:1),"h"!==t.charAt(f)||isNaN(g[f])||(n=g[f]/180*r,s+=w(n),l+=_e(n));for(i=c.alpha(),x=0,p=e.length;x<p;x++)for(f in m=(a=e[x]).get(t),i+=a.alpha(),g)isNaN(m[f])||(g[f]+=m[f],o[f]+=1,"h"===t.charAt(f)&&(n=g[f]/180*r,s+=w(n),l+=_e(n)));for(f in g)if(g[f]=g[f]/o[f],"h"===t.charAt(f)){for(n=h(l/o[f],s/o[f])/r*180;n<0;)n+=360;for(;n>=360;)n-=360;g[f]=n}return _(g,t).alpha(i/d)},D=function(e){var t,n;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(n=parseInt(e,16))>>16,n>>8&255,255&n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(n=parseInt(e,16))>>24&255,n>>16&255,n>>8&255,ge((255&n)/255*100)/100];if(null!=c.css&&(t=c.css(e)))return t;throw"unknown color: "+e},ie=function(e,t){var n,r,i,a,o,u;return null==t&&(t="rgb"),o=e[0],i=e[1],r=e[2],n=e[3],o=Math.round(o),i=Math.round(i),r=Math.round(r),u=(u="000000"+(o<<16|i<<8|r).toString(16)).substr(u.length-6),a=(a="0"+ge(255*n).toString(16)).substr(a.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return u+a;case"argb":return a+u;default:return u}}()},c.hex=function(e){return D(e)},_.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["hex"]),(function(){}))},e.prototype.hex=function(e){return null==e&&(e="rgb"),ie(this._rgb,e)},s.push({p:4,test:function(e){if(1===arguments.length&&"string"===we(e))return"hex"}}),O=function(){var e,t,n,r,i,a,o,u,s,l,c,f,d,h;if(i=(e=Se(arguments))[0],c=e[1],o=e[2],0===c)s=r=t=255*o;else{for(n=[0,0,0],f=2*o-(d=o<.5?o*(1+c):o+c-o*c),(h=[0,0,0])[0]=(i/=360)+1/3,h[1]=i,h[2]=i-1/3,a=u=0;u<=2;a=++u)h[a]<0&&(h[a]+=1),h[a]>1&&(h[a]-=1),6*h[a]<1?n[a]=f+6*(d-f)*h[a]:2*h[a]<1?n[a]=d:3*h[a]<2?n[a]=f+(d-f)*(2/3-h[a])*6:n[a]=f;s=(l=[ge(255*n[0]),ge(255*n[1]),ge(255*n[2])])[0],r=l[1],t=l[2]}return e.length>3?[s,r,t,e[3]]:[s,r,t]},oe=function(e,t,n){var r,i,a,o,u;return void 0!==e&&e.length>=3&&(e=(o=e)[0],t=o[1],n=o[2]),e/=255,t/=255,n/=255,a=Math.min(e,t,n),i=((Z=Math.max(e,t,n))+a)/2,Z===a?(u=0,r=Number.NaN):u=i<.5?(Z-a)/(Z+a):(Z-a)/(2-Z-a),e===Z?r=(t-n)/(Z-a):t===Z?r=2+(n-e)/(Z-a):n===Z&&(r=4+(e-t)/(Z-a)),(r*=60)<0&&(r+=360),[r,u,i]},_.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["hsl"]),(function(){}))},c.hsl=O,e.prototype.hsl=function(){return oe(this._rgb)},M=function(){var e,t,n,r,i,a,o,u,s,l,c,f,d,h,p,x,g,m;if(i=(e=Se(arguments))[0],x=e[1],m=e[2],m*=255,0===x)s=r=t=m;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),i/=60,a=T(i),n=i-a,o=m*(1-x),u=m*(1-x*n),g=m*(1-x*(1-n)),a){case 0:s=(l=[m,g,o])[0],r=l[1],t=l[2];break;case 1:s=(c=[u,m,o])[0],r=c[1],t=c[2];break;case 2:s=(f=[o,m,g])[0],r=f[1],t=f[2];break;case 3:s=(d=[o,u,m])[0],r=d[1],t=d[2];break;case 4:s=(h=[g,o,m])[0],r=h[1],t=h[2];break;case 5:s=(p=[m,o,u])[0],r=p[1],t=p[2]}return[s,r,t,e.length>3?e[3]:1]},ue=function(){var e,t,n,r,i,a,o,u,s;return a=(o=Se(arguments))[0],n=o[1],e=o[2],i=Math.min(a,n,e),t=(Z=Math.max(a,n,e))-i,s=Z/255,0===Z?(r=Number.NaN,u=0):(u=t/Z,a===Z&&(r=(n-e)/t),n===Z&&(r=2+(e-a)/t),e===Z&&(r=4+(a-n)/t),(r*=60)<0&&(r+=360)),[r,u,s]},_.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["hsv"]),(function(){}))},c.hsv=M,e.prototype.hsv=function(){return ue(this._rgb)},K=function(e){return"number"===we(e)&&e>=0&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},fe=function(){var e;return((e=Se(arguments))[0]<<16)+(e[1]<<8)+e[2]},_.num=function(t){return new e(t,"num")},e.prototype.num=function(e){return null==e&&(e="rgb"),fe(this._rgb,e)},c.num=K,s.push({p:1,test:function(e){if(1===arguments.length&&"number"===we(e)&&e>=0&&e<=16777215)return"num"}}),C=function(){var e,t,n,r,i,a,o,u,s,l,c,f,d,h,p,x,g,m,v,_;if(u=(n=Se(arguments))[0],i=n[1],t=n[2],o=o/100*255,e=255*(i/=100),0===i)f=o=r=t;else switch(360===u&&(u=0),u>360&&(u-=360),u<0&&(u+=360),u/=60,s=T(u),a=u-s,l=t*(1-i),c=l+e*(1-a),v=l+e*a,_=l+e,s){case 0:f=(d=[_,v,l])[0],o=d[1],r=d[2];break;case 1:f=(h=[c,_,l])[0],o=h[1],r=h[2];break;case 2:f=(p=[l,_,v])[0],o=p[1],r=p[2];break;case 3:f=(x=[l,c,_])[0],o=x[1],r=x[2];break;case 4:f=(g=[v,l,_])[0],o=g[1],r=g[2];break;case 5:f=(m=[_,l,c])[0],o=m[1],r=m[2]}return[f,o,r,n.length>3?n[3]:1]},re=function(){var e,t,n,r,i,a,o,u,s;return u=(s=Se(arguments))[0],i=s[1],t=s[2],o=Math.min(u,i,t),n=100*(r=(Z=Math.max(u,i,t))-o)/255,e=o/(255-r)*100,0===r?a=Number.NaN:(u===Z&&(a=(i-t)/r),i===Z&&(a=2+(t-u)/r),t===Z&&(a=4+(u-i)/r),(a*=60)<0&&(a+=360)),[a,n,e]},_.hcg=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["hcg"]),(function(){}))},c.hcg=C,e.prototype.hcg=function(){return re(this._rgb)},S=function(e){var t,n,r,i,a,o,u,s;if(e=e.toLowerCase(),null!=_.colors&&_.colors[e])return D(_.colors[e]);if(a=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(u=a.slice(1,4),i=o=0;o<=2;i=++o)u[i]=+u[i];u[3]=1}else if(a=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(u=a.slice(1,5),i=s=0;s<=3;i=++s)u[i]=+u[i];else if(a=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(u=a.slice(1,4),i=t=0;t<=2;i=++t)u[i]=ge(2.55*u[i]);u[3]=1}else if(a=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(u=a.slice(1,5),i=n=0;n<=2;i=++n)u[i]=ge(2.55*u[i]);u[3]=+u[3]}else(a=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((r=a.slice(1,4))[1]*=.01,r[2]*=.01,(u=O(r))[3]=1):(a=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((r=a.slice(1,4))[1]*=.01,r[2]*=.01,(u=O(r))[3]=+a[4]);return u},ne=function(e){var t;return"rgb"===(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(ge).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(ge).join(",")+","+e[3]+")":void 0},xe=function(e){return ge(100*e)/100},F=function(e,t){var n;return n=t<1?"hsla":"hsl",e[0]=xe(e[0]||0),e[1]=xe(100*e[1])+"%",e[2]=xe(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},c.css=function(e){return S(e)},_.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["css"]),(function(){}))},e.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?ne(this._rgb):"hsl"===e.slice(0,3)?F(this.hsl(),this.alpha()):void 0},c.named=function(e){return D(ke[e])},s.push({p:5,test:function(e){if(1===arguments.length&&null!=ke[e])return"named"}}),e.prototype.name=function(e){var t,n;for(n in arguments.length&&(ke[e]&&(this._rgb=D(ke[e])),this._rgb[3]=1),t=this.hex(),ke)if(t===ke[n])return n;return t},U=function(){var e,n,r,i;return r=(i=Se(arguments))[0],e=i[1],n=i[2],[r,w(n*=t)*e,_e(n)*e]},V=function(){var e,t,n,r,i,a,o,u,s;return o=(n=Se(arguments))[0],i=n[1],a=n[2],e=(u=U(o,i,a))[0],t=u[1],r=u[2],[(s=W(e,t,r))[0],s[1],r=s[2],n.length>3?n[3]:1]},j=function(){var e,t,n,r,i,o;return i=(o=Se(arguments))[0],e=o[1],t=o[2],n=ye(e*e+t*t),r=(h(t,e)*a+360)%360,0===ge(1e4*n)&&(r=Number.NaN),[i,n,r]},le=function(){var e,t,n,r,i,a,o;return i=(a=Se(arguments))[0],n=a[1],t=a[2],r=(o=se(i,n,t))[0],e=o[1],t=o[2],j(r,e,t)},_.lch=function(){var t;return t=Se(arguments),new e(t,"lch")},_.hcl=function(){var t;return t=Se(arguments),new e(t,"hcl")},c.lch=V,c.hcl=function(){var e,t,n,r;return t=(r=Se(arguments))[0],e=r[1],n=r[2],V([n,e,t])},e.prototype.lch=function(){return le(this._rgb)},e.prototype.hcl=function(){return le(this._rgb).reverse()},te=function(e){var t,n,r,i,a,o;return null==e&&(e="rgb"),a=(o=Se(arguments))[0],r=o[1],t=o[2],r/=255,t/=255,[(1-(a/=255)-(i=1-Math.max(a,Math.max(r,t))))*(n=i<1?1/(1-i):0),(1-r-i)*n,(1-t-i)*n,i]},b=function(){var e,t,n,r,i,a;return n=(t=Se(arguments))[0],i=t[1],a=t[2],r=t[3],e=t.length>4?t[4]:1,1===r?[0,0,0,e]:[n>=1?0:255*(1-n)*(1-r),i>=1?0:255*(1-i)*(1-r),a>=1?0:255*(1-a)*(1-r),e]},c.cmyk=function(){return b(Se(arguments))},_.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["cmyk"]),(function(){}))},e.prototype.cmyk=function(){return te(this._rgb)},c.gl=function(){var e,t,n,r,i;for(r=function(){var e,n;for(t in n=[],e=Se(arguments))i=e[t],n.push(i);return n}.apply(this,arguments),e=n=0;n<=2;e=++n)r[e]*=255;return r},_.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["gl"]),(function(){}))},e.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},ce=function(e,t,n){var r;return e=(r=Se(arguments))[0],t=r[1],n=r[2],.2126*(e=Y(e))+.7152*(t=Y(t))+.0722*(n=Y(n))},Y=function(e){return(e/=255)<=.03928?e/12.92:ee((e+.055)/1.055,2.4)},G=function(t,n,r,i){var a,o;return a=t._rgb,o=n._rgb,new e(a[0]+r*(o[0]-a[0]),a[1]+r*(o[1]-a[1]),a[2]+r*(o[2]-a[2]),i)},f.push(["rgb",G]),e.prototype.luminance=function(e,t){var n,r,i,a;return null==t&&(t="rgb"),arguments.length?(0===e?this._rgb=[0,0,0,this._rgb[3]]:1===e?this._rgb=[255,255,255,this._rgb[3]]:(r=1e-7,i=20,a=function(n,o){var u,s;return u=(s=n.interpolate(o,.5,t)).luminance(),Math.abs(e-u)<r||!i--?s:u>e?a(n,s):a(s,o)},n=ce(this._rgb),this._rgb=(n>e?a(_("black"),this):a(this,_("white"))).rgba()),this):ce(this._rgb)},be=function(e){var t,n,r,i;return(i=e/100)<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*$(n),t=i<20?0:.8274096064007395*(t=i-10)-254.76935184120902+115.67994401066147*$(t)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*$(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*$(n),t=255),[r,n,t]},de=function(){var e,t,n,r,i,a,o,u;for(i=(a=Se(arguments))[0],a[1],e=a[2],r=1e3,n=4e4,t=.4;n-r>t;)(o=be(u=.5*(n+r)))[2]/o[0]>=e/i?n=u:r=u;return ge(u)},_.temperature=_.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["temperature"]),(function(){}))},c.temperature=c.kelvin=c.K=be,e.prototype.temperature=function(){return de(this._rgb)},e.prototype.kelvin=e.prototype.temperature,_.contrast=function(t,n){var r,i,a,o;return"string"!==(a=we(t))&&"number"!==a||(t=new e(t)),"string"!==(o=we(n))&&"number"!==o||(n=new e(n)),(r=t.luminance())>(i=n.luminance())?(r+.05)/(i+.05):(i+.05)/(r+.05)},_.distance=function(t,n,r){var i,a,o,u,s,l,c;for(a in null==r&&(r="lab"),"string"!==(s=we(t))&&"number"!==s||(t=new e(t)),"string"!==(l=we(n))&&"number"!==l||(n=new e(n)),o=t.get(r),u=n.get(r),c=0,o)c+=(i=(o[a]||0)-(u[a]||0))*i;return Math.sqrt(c)},_.deltaE=function(t,n,i,a){var o,u,s,l,c,f,p,x,g,m,v,_,y,b,S,k,E,A,T,C,D,N,F,O;for(null==i&&(i=1),null==a&&(a=1),"string"!==(S=we(t))&&"number"!==S||(t=new e(t)),"string"!==(k=we(n))&&"number"!==k||(n=new e(n)),o=(E=t.lab())[0],s=E[1],c=E[2],u=(A=n.lab())[0],l=A[1],f=A[2],p=ye(s*s+c*c),x=ye(l*l+f*f),C=o<16?.511:.040975*o/(1+.01765*o),T=.0638*p/(1+.0131*p)+.638,b=p<1e-6?0:180*h(c,s)/r;b<0;)b+=360;for(;b>=360;)b-=360;return D=b>=164&&b<=345?.56+d(.2*w(r*(b+168)/180)):.36+d(.4*w(r*(b+35)/180)),y=ye((g=p*p*p*p)/(g+1900)),ye((N=(o-u)/(i*C))*N+(F=(_=p-x)/(a*T))*F+((m=s-l)*m+(v=c-f)*v-_*_)/((O=T*(y*D+1-y))*O))},e.prototype.get=function(e){var t,n,r,i,a;return this,r=(i=e.split("."))[0],t=i[1],a=this[r](),t?(n=r.indexOf(t))>-1?a[n]:console.warn("unknown channel "+t+" in mode "+r):a},e.prototype.set=function(e,t){var n,r,i,a,o;if(this,i=(a=e.split("."))[0],n=a[1])if(o=this[i](),(r=i.indexOf(n))>-1)if("string"===we(t))switch(t.charAt(0)){case"+":case"-":o[r]+=+t;break;case"*":o[r]*=+t.substr(1);break;case"/":o[r]/=+t.substr(1);break;default:o[r]=+t}else o[r]=t;else console.warn("unknown channel "+n+" in mode "+i);else o=t;return _(o,i).alpha(this.alpha())},e.prototype.clipped=function(){return this._rgb._clipped||!1},e.prototype.alpha=function(e){return arguments.length?_.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},e.prototype.darken=function(e){var t;return null==e&&(e=1),this,(t=this.lab())[0]-=n.Kn*e,_.lab(t).alpha(this.alpha())},e.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},e.prototype.darker=e.prototype.darken,e.prototype.brighter=e.prototype.brighten,e.prototype.saturate=function(e){var t;return null==e&&(e=1),this,(t=this.lch())[1]+=e*n.Kn,t[1]<0&&(t[1]=0),_.lch(t).alpha(this.alpha())},e.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},e.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),_(t[0]*e,t[1]*e,t[2]*e,e)},J=function(e,t){return e*t/255},k=function(e,t){return e>t?t:e},q=function(e,t){return e>t?e:t},ve=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},Q=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},v=function(e,t){return 255*(1-(1-t/255)/(e/255))},E=function(e,t){return 255===e?255:(e=t/255*255/(1-e/255))>255?255:e},(x=function(e,t,n){if(!x[n])throw"unknown blend mode "+n;return x[n](e,t)}).normal=(g=function(e){return function(t,n){var r,i;return r=_(n).rgb(),i=_(t).rgb(),_(e(r,i),"rgb")}})((A=function(e){return function(t,n){var r,i,a;for(a=[],r=i=0;i<=3;r=++i)a[r]=e(t[r],n[r]);return a}})((function(e,t){return e}))),x.multiply=g(A(J)),x.screen=g(A(ve)),x.overlay=g(A(Q)),x.darken=g(A(k)),x.lighten=g(A(q)),x.dodge=g(A(E)),x.burn=g(A(v)),_.blend=x,_.analyze=function(e){var t,n,r,i;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;n<t;n++)null==(i=e[n])||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return _.limits(r,e,t)},r},_.scale=function(e,t){var n,r,i,a,o,u,s,l,c,f,d,h,p,x,g,m,v,y,b,w;return l="rgb",c=_("#ccc"),p=0,o=[0,1],h=[],d=[0,0],n=!1,i=[],f=!1,s=0,u=1,a=!1,r={},x=!0,b=function(e){var t,n,r,a,o,u;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===we(e)&&null!=_.brewer&&(e=_.brewer[e]||_.brewer[e.toLowerCase()]||e),"array"===we(e)){for(t=r=0,a=(e=e.slice(0)).length-1;0<=a?r<=a:r>=a;t=0<=a?++r:--r)n=e[t],"string"===we(n)&&(e[t]=_(n));for(h.length=0,t=u=0,o=e.length-1;0<=o?u<=o:u>=o;t=0<=o?++u:--u)h.push(t/(e.length-1))}return y(),i=e},m=function(e){var t,r;if(null!=n){for(r=n.length-1,t=0;t<r&&e>=n[t];)t++;return t-1}return 0},w=function(e){return e},v=function(e,t){var a,o,f,p,g,v,y;if(null==t&&(t=!1),isNaN(e))return c;if(t?y=e:n&&n.length>2?(y=m(e)/(n.length-2),y=d[0]+y*(1-d[0]-d[1])):u!==s?(y=(e-s)/(u-s),y=d[0]+y*(1-d[0]-d[1]),y=Math.min(1,Math.max(0,y))):y=1,t||(y=w(y)),f=Math.floor(1e4*y),x&&r[f])a=r[f];else{if("array"===we(i))for(o=p=0,v=h.length-1;0<=v?p<=v:p>=v;o=0<=v?++p:--p){if(y<=(g=h[o])){a=i[o];break}if(y>=g&&o===h.length-1){a=i[o];break}if(y>g&&y<h[o+1]){y=(y-g)/(h[o+1]-g),a=_.interpolate(i[o],i[o+1],y,l);break}}else"function"===we(i)&&(a=i(y));x&&(r[f]=a)}return a},y=function(){return r={}},b(e),(g=function(e){var t;return t=_(v(e)),f&&t[f]?t[f]():t}).classes=function(e){var t;return null!=e?("array"===we(e)?(n=e,o=[e[0],e[e.length-1]]):(t=_.analyze(o),n=0===e?[t.min,t.max]:_.limits(t,"e",e)),g):n},g.domain=function(e){var t,n,r,a,l,c,f;if(!arguments.length)return o;if(s=e[0],u=e[e.length-1],h=[],r=i.length,e.length===r&&s!==u)for(l=0,a=e.length;l<a;l++)n=e[l],h.push((n-s)/(u-s));else for(t=f=0,c=r-1;0<=c?f<=c:f>=c;t=0<=c?++f:--f)h.push(t/(r-1));return o=[s,u],g},g.mode=function(e){return arguments.length?(l=e,y(),g):l},g.range=function(e,t){return b(e),g},g.out=function(e){return f=e,g},g.spread=function(e){return arguments.length?(p=e,g):p},g.correctLightness=function(e){return null==e&&(e=!0),a=e,y(),w=a?function(e){var t,n,r,i,a,o,u,s,l;for(t=v(0,!0).lab()[0],n=v(1,!0).lab()[0],u=t>n,r=v(e,!0).lab()[0],i=r-(a=t+(n-t)*e),s=0,l=1,o=20;Math.abs(i)>.01&&o-- >0;)u&&(i*=-1),i<0?(s=e,e+=.5*(l-e)):(l=e,e+=.5*(s-e)),r=v(e,!0).lab()[0],i=r-a;return e}:function(e){return e},g},g.padding=function(e){return null!=e?("number"===we(e)&&(e=[e,e]),d=e,g):d},g.colors=function(t,r){var a,u,s,l,c,f,d,h;if(arguments.length<2&&(r="hex"),c=[],0===arguments.length)c=i.slice(0);else if(1===t)c=[g(.5)];else if(t>1)u=o[0],a=o[1]-u,c=function(){f=[];for(var e=0;0<=t?e<t:e>t;0<=t?e++:e--)f.push(e);return f}.apply(this).map((function(e){return g(u+e/(t-1)*a)}));else{if(e=[],d=[],n&&n.length>2)for(s=h=1,l=n.length;1<=l?h<l:h>l;s=1<=l?++h:--h)d.push(.5*(n[s-1]+n[s]));else d=o;c=d.map((function(e){return g(e)}))}return _[r]&&(c=c.map((function(e){return e[r]()}))),c},g.cache=function(e){return null!=e?x=e:x},g},null==_.scales&&(_.scales={}),_.scales.cool=function(){return _.scale([_.hsl(180,1,.9),_.hsl(250,.7,.4)])},_.scales.hot=function(){return _.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},_.analyze=function(e,t,n){var r,i,a,o,u,s;if(u={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(e){null==e||isNaN(e)||(u.values.push(e),u.sum+=e,e<u.min&&(u.min=e),e>u.max&&(u.max=e),u.count+=1)},s=function(e,i){if(n(e,i))return r(null!=t&&"function"===we(t)?t(e):null!=t&&"string"===we(t)||"number"===we(t)?e[t]:e)},"array"===we(e))for(o=0,a=e.length;o<a;o++)s(e[o]);else for(i in e)s(e[i],i);return u.domain=[u.min,u.max],u.limits=function(e,t){return _.limits(u,e,t)},u},_.limits=function(e,t,n){var r,i,a,o,u,s,l,c,f,h,p,x,g,m,v,y,b,w,S,k,E,A,C,D,N,F,O,M,L,P,z,I,R,G,j,W,B,U,V,q,H,Y,X,J,K,Q,te,ne,re,ie,ae,oe,ue,se,le;if(null==t&&(t="equal"),null==n&&(n=7),"array"===we(e)&&(e=_.analyze(e)),N=e.min,Z=e.max,e.sum,se=e.values.sort((function(e,t){return e-t})),1===n)return[N,Z];if(C=[],"c"===t.substr(0,1)&&(C.push(N),C.push(Z)),"e"===t.substr(0,1)){for(C.push(N),k=z=1,j=n-1;1<=j?z<=j:z>=j;k=1<=j?++z:--z)C.push(N+k/n*(Z-N));C.push(Z)}else if("l"===t.substr(0,1)){if(N<=0)throw"Logarithmic scales are only possible for values > 0";for(F=Math.LOG10E*$(N),D=Math.LOG10E*$(Z),C.push(N),k=le=1,W=n-1;1<=W?le<=W:le>=W;k=1<=W?++le:--le)C.push(ee(10,F+k/n*(D-F)));C.push(Z)}else if("q"===t.substr(0,1)){for(C.push(N),k=r=1,Y=n-1;1<=Y?r<=Y:r>=Y;k=1<=Y?++r:--r)I=(se.length-1)*k/n,(R=T(I))===I?C.push(se[R]):(G=I-R,C.push(se[R]*(1-G)+se[R+1]*G));C.push(Z)}else if("k"===t.substr(0,1)){for(M=se.length,m=new Array(M),w=new Array(n),ie=!0,L=0,y=null,(y=[]).push(N),k=i=1,X=n-1;1<=X?i<=X:i>=X;k=1<=X?++i:--i)y.push(N+k/n*(Z-N));for(y.push(Z);ie;){for(E=a=0,J=n-1;0<=J?a<=J:a>=J;E=0<=J?++a:--a)w[E]=0;for(k=o=0,K=M-1;0<=K?o<=K:o>=K;k=0<=K?++o:--o){for(ue=se[k],O=Number.MAX_VALUE,E=u=0,Q=n-1;0<=Q?u<=Q:u>=Q;E=0<=Q?++u:--u)(S=d(y[E]-ue))<O&&(O=S,v=E);w[v]++,m[k]=v}for(P=new Array(n),E=s=0,te=n-1;0<=te?s<=te:s>=te;E=0<=te?++s:--s)P[E]=null;for(k=l=0,ne=M-1;0<=ne?l<=ne:l>=ne;k=0<=ne?++l:--l)null===P[b=m[k]]?P[b]=se[k]:P[b]+=se[k];for(E=c=0,re=n-1;0<=re?c<=re:c>=re;E=0<=re?++c:--c)P[E]*=1/w[E];for(ie=!1,E=f=0,B=n-1;0<=B?f<=B:f>=B;E=0<=B?++f:--f)if(P[E]!==y[k]){ie=!0;break}y=P,++L>200&&(ie=!1)}for(A={},E=h=0,U=n-1;0<=U?h<=U:h>=U;E=0<=U?++h:--h)A[E]=[];for(k=p=0,V=M-1;0<=V?p<=V:p>=V;k=0<=V?++p:--p)A[b=m[k]].push(se[k]);for(ae=[],E=x=0,q=n-1;0<=q?x<=q:x>=q;E=0<=q?++x:--x)ae.push(A[E][0]),ae.push(A[E][A[E].length-1]);for(ae=ae.sort((function(e,t){return e-t})),C.push(ae[0]),k=g=1,H=ae.length-1;g<=H;k=g+=2)oe=ae[k],isNaN(oe)||-1!==C.indexOf(oe)||C.push(oe)}return C},N=function(e,t,n){var r,a,u,s;return e=(r=Se(arguments))[0],t=r[1],n=r[2],isNaN(e)&&(e=0),(e/=360)<1/3?u=1-((a=(1-t)/3)+(s=(1+t*w(o*e)/w(i-o*e))/3)):e<2/3?a=1-((s=(1-t)/3)+(u=(1+t*w(o*(e-=1/3))/w(i-o*e))/3)):s=1-((u=(1-t)/3)+(a=(1+t*w(o*(e-=2/3))/w(i-o*e))/3)),[255*(s=H(n*s*3)),255*(u=H(n*u*3)),255*(a=H(n*a*3)),r.length>3?r[3]:1]},ae=function(){var e,t,n,r,i,a,u;return i=(a=Se(arguments))[0],t=a[1],e=a[2],o=2*Math.PI,i/=255,t/=255,e/=255,0===(u=1-Math.min(i,t,e)/(r=(i+t+e)/3))?n=0:(n=(i-t+(i-e))/2,n/=Math.sqrt((i-t)*(i-t)+(i-e)*(t-e)),n=Math.acos(n),e>t&&(n=o-n),n/=o),[360*n,u,r]},_.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e,Te.call(arguments).concat(["hsi"]),(function(){}))},c.hsi=N,e.prototype.hsi=function(){return ae(this._rgb)},P=function(e,t,n,r){var i,a,o,u,s,l,c,f,d,h;return"hsl"===r?(d=e.hsl(),h=t.hsl()):"hsv"===r?(d=e.hsv(),h=t.hsv()):"hcg"===r?(d=e.hcg(),h=t.hcg()):"hsi"===r?(d=e.hsi(),h=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",d=e.hcl(),h=t.hcl()),"h"===r.substr(0,1)&&(a=d[0],c=d[1],u=d[2],o=h[0],f=h[1],s=h[2]),isNaN(a)||isNaN(o)?isNaN(a)?isNaN(o)?i=Number.NaN:(i=o,1!==u&&0!==u||"hsv"===r||(l=f)):(i=a,1!==s&&0!==s||"hsv"===r||(l=c)):i=a+n*(o>a&&o-a>180?o-(a+360):o<a&&a-o>180?o+360-a:o-a),null==l&&(l=c+n*(f-c)),_[r](i,l,u+n*(s-u))},R=function(e,t,n,r){var i,a;return i=e.num(),a=t.num(),_.num(i+(a-i)*n,"num")},(f=f.concat(function(){var e,t,n,r;for(r=[],t=0,e=(n=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)X=n[t],r.push([X,P]);return r}())).push(["num",R]),z=function(t,n,r,i){var a,o;return a=t.lab(),o=n.lab(),new e(a[0]+r*(o[0]-a[0]),a[1]+r*(o[1]-a[1]),a[2]+r*(o[2]-a[2]),i)},f.push(["lab",z])}.call(this),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=Math.max,r=(new Date).getTime(),i=n(0,16-(r-e)),a=window.setTimeout((function(){t(r+i)}),i);return e=r+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!=n.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);return-1==t?void 0:parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();var RadarChart={defaultConfig:{containerClass:"radar-chart",w:600,h:600,factor:.95,factorLegend:1,levels:3,levelTick:!1,TickLength:10,maxValue:0,minValue:0,radians:2*Math.PI,color:d3.scale.category10(),axisLine:!0,axisText:!0,circles:!0,radius:5,open:!1,backgroundTooltipColor:"#555",backgroundTooltipOpacity:"0.7",tooltipColor:"white",axisJoin:function(e,t){return e.className||t},tooltipFormatValue:function(e){return e},tooltipFormatClass:function(e){return e},transitionDuration:300},chart:function(){function e(e,t){if(!1===t||null==t)e.classed("visible",0),e.select("rect").classed("visible",0);else{e.classed("visible",1);var r=e.node().parentNode,i=d3.mouse(r);e.select("text").classed("visible",1).style("fill",n.tooltipColor);var a=e.select("text").text(t).node().getBBox();e.select("rect").classed("visible",1).attr("x",0).attr("x",a.x-5).attr("y",a.y-5).attr("width",a.width+10).attr("height",a.height+10).attr("rx","5").attr("ry","5").style("fill",n.backgroundTooltipColor).style("opacity",n.backgroundTooltipOpacity),e.attr("transform","translate("+(i[0]+10)+","+(i[1]-10)+")")}}function t(t){t.each((function(t){var r=Math.sin,i=Math.cos,a=Math.min,o=Math.max;function u(e,t,r,i){return t*(1-(r=void 0===r?1:r)*i(e*n.radians/x))}function s(e,t,n){return u(e,t,n,Math.sin)}function l(e,t,n){return u(e,t,n,Math.cos)}var c=d3.select(this),f=c.selectAll("g.tooltip").data([t[0]]),d=f.enter().append("g").classed("tooltip",!0);d.append("rect").classed("tooltip",!0),d.append("text").classed("tooltip",!0),t=t.map((function(e){return e instanceof Array&&(e={axes:e}),e}));var h=o(n.maxValue,d3.max(t,(function(e){return d3.max(e.axes,(function(e){return e.value}))})));h-=n.minValue;var p=t[0].axes.map((function(e){return{name:e.axis,xOffset:e.xOffset?e.xOffset:0,yOffset:e.yOffset?e.yOffset:0}})),x=p.length,g=n.factor*a(n.w/2,n.h/2),m=a(n.w/2,n.h/2);c.classed(n.containerClass,1);var v=d3.range(0,n.levels).map((function(e){return g*((e+1)/n.levels)})),_=c.selectAll("g.level-group").data(v);_.enter().append("g"),_.exit().remove(),_.attr("class",(function(e,t){return"level-group level-group-"+t}));var y=_.selectAll(".level").data((function(e){return d3.range(0,x).map((function(){return e}))}));if(y.enter().append("line"),y.exit().remove(),n.levelTick?y.attr("class","level").attr("x1",(function(e,t){return g==e?s(t,e):s(t,e)+n.TickLength/2*i(t*n.radians/x)})).attr("y1",(function(e,t){return g==e?l(t,e):l(t,e)-n.TickLength/2*r(t*n.radians/x)})).attr("x2",(function(e,t){return g==e?s(t+1,e):s(t,e)-n.TickLength/2*i(t*n.radians/x)})).attr("y2",(function(e,t){return g==e?l(t+1,e):l(t,e)+n.TickLength/2*r(t*n.radians/x)})).attr("transform",(function(e){return"translate("+(n.w/2-e)+", "+(n.h/2-e)+")"})):y.attr("class","level").attr("x1",(function(e,t){return s(t,e)})).attr("y1",(function(e,t){return l(t,e)})).attr("x2",(function(e,t){return s(t+1,e)})).attr("y2",(function(e,t){return l(t+1,e)})).attr("transform",(function(e){return"translate("+(n.w/2-e)+", "+(n.h/2-e)+")"})),n.axisLine||n.axisText){var b=c.selectAll(".axis").data(p),w=b.enter().append("g");n.axisLine&&w.append("line"),n.axisText&&w.append("text"),b.exit().remove(),b.attr("class","axis"),n.axisLine&&b.select("line").attr("x1",n.w/2).attr("y1",n.h/2).attr("x2",(function(e,t){return n.w/2-m+s(t,m,n.factor)})).attr("y2",(function(e,t){return n.h/2-m+l(t,m,n.factor)})),n.axisText&&b.select("text").attr("class",(function(e,t){var n=s(t,.5);return"legend "+(.4>n?"left":.6<n?"right":"middle")})).attr("dy",(function(e,t){var n=l(t,.5);return.1>n?"1em":.9<n?"0":"0.5em"})).text((function(e){return e.name})).attr("x",(function(e,t){return e.xOffset+(n.w/2-m)+s(t,m,n.factorLegend)})).attr("y",(function(e,t){return e.yOffset+(n.h/2-m)+l(t,m,n.factorLegend)}))}t.forEach((function(e){e.axes.forEach((function(e,t){e.x=n.w/2-m+s(t,m,parseFloat(o(e.value-n.minValue,0))/h*n.factor),e.y=n.h/2-m+l(t,m,parseFloat(o(e.value-n.minValue,0))/h*n.factor)}))}));var S=c.selectAll(".area").data(t,n.axisJoin),k="polygon";if(n.open&&(k="polyline"),S.enter().append(k).classed({area:1,"d3-enter":1}).on("mouseover",(function(t){d3.event.stopPropagation(),c.classed("focus",1),d3.select(this).classed("focused",1),e(f,n.tooltipFormatClass(t.className))})).on("mouseout",(function(){d3.event.stopPropagation(),c.classed("focus",0),d3.select(this).classed("focused",0),e(f,!1)})),S.exit().classed("d3-exit",1).transition().duration(n.transitionDuration).remove(),S.each((function(e,t){var n={"d3-exit":0};n["radar-chart-serie"+t]=1,e.className&&(n[e.className]=1),d3.select(this).classed(n)})).style("stroke",(function(e,t){return n.color(t)})).style("fill",(function(e,t){return n.color(t)})).transition().duration(n.transitionDuration).attr("points",(function(e){return e.axes.map((function(e){return[e.x,e.y].join(",")})).join(" ")})).each("start",(function(){d3.select(this).classed("d3-enter",0)})),n.circles&&n.radius){var E=c.selectAll("g.circle-group").data(t,n.axisJoin);E.enter().append("g").classed({"circle-group":1,"d3-enter":1}),E.exit().classed("d3-exit",1).transition().duration(n.transitionDuration).remove(),E.each((function(e){var t={"d3-exit":0};e.className&&(t[e.className]=1),d3.select(this).classed(t)})).transition().duration(n.transitionDuration).each("start",(function(){d3.select(this).classed("d3-enter",0)}));var A=E.selectAll(".circle").data((function(e,t){return e.axes.map((function(e){return[e,t]}))}));A.enter().append("circle").classed({circle:1,"d3-enter":1}).on("mouseover",(function(t){d3.event.stopPropagation(),e(f,n.tooltipFormatValue(t[0].value))})).on("mouseout",(function(){d3.event.stopPropagation(),e(f,!1),c.classed("focus",0)})),A.exit().classed("d3-exit",1).transition().duration(n.transitionDuration).remove(),A.each((function(e){var t={"d3-exit":0};t["radar-chart-serie"+e[1]]=1,d3.select(this).classed(t)})).style("fill",(function(e){return n.color(e[1])})).transition().duration(n.transitionDuration).attr("r",n.radius).attr("cx",(function(e){return e[0].x})).attr("cy",(function(e){return e[0].y})).each("start",(function(){d3.select(this).classed("d3-enter",0)}));var T=S.node();T.parentNode.appendChild(T);var C=E.node();C.parentNode.appendChild(C);var D=f.node();D.parentNode.appendChild(D)}}))}var n=Object.create(RadarChart.defaultConfig);return t.config=function(e){return arguments.length?(1<arguments.length?n[arguments[0]]=arguments[1]:d3.entries(e||{}).forEach((function(e){n[e.key]=e.value})),t):n},t},draw:function(e,t,n){var r=RadarChart.chart().config(n),i=r.config();d3.select(e).select("svg").remove(),d3.select(e).append("svg").attr("width",i.w).attr("height",i.h).datum(t).call(r)}},Core={};document.addEventListener?(Core.addEventListener=function(e,t,n){e.addEventListener(t,n,!1)},Core.removeEventListener=function(e,t,n){e.removeEventListener(t,n,!1)},Core.preventDefault=function(e){e.preventDefault()},Core.stopPropagation=function(e){e.stopPropagation()}):document.attachEvent&&(Core.addEventListener=function(e,t,n){if(-1==Core._findListener(e,t,n)){var r=function(){var t=window.event;Function.prototype.call?n.call(e,t):(e._currentListener=n,e._currentListener(t),e._currentListener=null)};e.attachEvent("on"+t,r);var i=(e.document||e).parentWindow,a="l"+Core._listenerCounter++;i._allListeners||(i._allListeners={}),i._allListeners[a]={target:e,type:t,listener:n,listener2:r},e._listeners||(e._listeners=[]),e._listeners[e._listeners.length]=a,i._unloadListenerAdded||(i._unloadListenerAdded=!0,i.attachEvent("onunload",Core._removeAllListeners))}},Core.removeEventListener=function(e,t,n){var r=Core._findListener(e,t,n);if(-1!=r){var i=(e.document||e).parentWindow,a=e._listeners[r],o=i._allListeners[a];e.detachEvent("on"+t,o.listener2),e._listeners.splice(r,1),delete i._allListeners[a]}},Core.preventDefault=function(e){e.returnValue=!1},Core.stopPropagation=function(e){e.cancelBubble=!0},Core._findListener=function(e,t,n){var r=e._listeners;if(!r)return-1;for(var i=(e.document||e).parentWindow,a=r.length-1;0<=a;a--){var o=r[a],u=i._allListeners[o];if(u.type==t&&u.listener==n)return a}return-1},Core._removeAllListeners=function(){var e=this;for(id in e._allListeners){var t=e._allListeners[id];t.target.detachEvent("on"+t.type,t.listener2),delete e._allListeners[id]}},Core._listenerCounter=0),Core.addClass=function(e,t){Core.hasClass(e,t)||(""==e.className?e.className=t:e.className+=" "+t)},Core.getElementsByClass=function(e){var t;t=void 0===document.all?document.getElementsByTagName("*"):document.all;for(var n=[],r=new RegExp("(^| )"+e+"( |$)"),i=0;i<t.length;i++)r.test(t[i].className)&&(n[n.length]=t[i]);return n},Core.hasClass=function(e,t){return!!new RegExp("(^| )"+t+"( |$)").test(e.className)},Core.removeClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");e.className=e.className.replace(n,"$1"),e.className=e.className.replace(/ $/,"")},Core.getComputedStyle=function(e,t){return(void 0===e.currentStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle)[t]},Core.start=function(e){Core.addEventListener(window,"load",e.init)};var _0x167b=["random","OmniWeb","RectFundo","select","tooltipText","vertical","0.5em","onunload","#CCCCCC","_blank","dta","collapse","initialize","zoomLevel","inkscape:version","g.circle-group","temPaiGrupo","cssText","fill","axisLine","setMinutes","timespan","Value: ","idb","zoom","#E0E0E0","inverse","mix","thisobj=evt.currentTarget;","noTrace","metaKey","vega4-json","factor","=([^&#]*)","allowblink","oldAngle","-cor-medfal","!EVAL","fill-opacity:0.5;","#DCDCEE","hideWatermark","Copy","_height","key","createElement","transitionDuration","loadURL","setLtVk","parameters","WebSAGE","DigitalAlarmTextAppendFalse","HighAlarmLimit","#bardiv","ZPH","crimson","document","getComponentState","green","#exec","popup","textContent","exec_once","keydown","create","(^| )","#ECECEE",".area"," rotate(","attachEvent","bool","khaki","animateTransform","cscript","getScript","name","enableMouse","attributes","jsondatasimul.php?KEYS=","platform","silver","innerHTML","FALSE","lightsteelblue","setGroupDistrib","40px","status","execCommand","source","g_loadtime","cfill","enableValueChangeAnimation","mouseup","d3-enter","appVersion","legend ","tagName","message","#vega-lite","initstroke","clientY","all","#radar","blinkSeAlarmado","mouse","toLowerCase","#vega4","title","transform-center-y","vega-lite","_unloadListenerAdded","left",";window.WebSAGE.g_zpY = ","initheight","groupDistribType","http://www.w3.org/1999/xlink","browser","escondeDestaqPonto","MOUSEY","http://www.w3.org/2000/svg","remove","_d3arc","ZPX","animate","goldenrod",");histdata","getScreenCTM","nextSibling","g_sha1ant_dig","-clr-failed","factorLegend","');histdata","tooltipFormatValue","createElementFromHTML","radians","g_data_ant","PLAY","change","getBay","Source Sans Pro,calibri,consolas,arial,helvetica","_findListener","_width","hsl","tooltip","class","Value","zoomlevel","identity",";window.WebSAGE.g_zpW = ","opac","TRUE","acrescentaPontoLista","initMouseEvent","toGMTString","block","#exec_once","preventDefault","quality","#svgdiv","hasActiveTooltip","onmouseclick","selectAll","LocationLevel1","_d3arc_duration","whitesmoke","g_sha1ant_ana","_d3arc_innerRadius","Mozilla","background-color: ","transform","translate(","#AAAAAA","d3-exit","removeClass","flipOut","g_zpX","inline","getJSONData","listener","blockPopup","currentStyle","translate( ","SafariRenderBugRedraw","bgColor","new:","g_seltela","vgTableName","an unknown OS","MSIE","#505050","fmTELA","Linux","getTagsList","http://www.inkscape.org/namespaces/inkscape","getFullYear","getAttributeNS","toUpperCase","charCodeAt","getComponentVersion","attrTween",'"); ',"Version","bar","drgMouseOffsetY","onreadystatechange","addClass","toString","mousedown","listaDestacaveis","ZPW","#FD625E","grafico","preprocessaTela","moveobj","children","IDPREFIX","link","DCR#","#PAUSE_ID","g_timeshift","g_zpW","cattrib","moz","originalEvent","timemachinecontrols","ROWS","#TIMEMACHINE_ID","div","drgY","cursor","clone","darkgreen","inkscape:transform-center-y","setPreview","temAnimacao","#vega3","getVk","object","prototype","vg_","idalt2","readyfordata","../comum/obtem_nponto.php?tpPto=A","maxValue","../comum/minus.gif","visibility","../comum/obtem_nponto.php?tpPto=D","replace","ltvkobj","showValsSVG","_listeners","startAngle","overflowX","setInterval","_defs","drawSVG","mouseout",' scrolling="no" ',"middle","mousemove","points","sandbox-host","timeStamp"," translate(","tooltipTitle","Camino","#set_filter","interpolate","-35px",",0) ","#vega-json","vgInitData","stroke:rgb(60%,0%,71%);stroke-width:2;stroke-opacity:1;","polygon","vendor","lastVal","altKey","firstChild","InkSage","userAgent","endElement","fromCharCode","getBBox","TimeStamp","Tag: ","currentTarget",'$.getScript( WebSAGE.g_timePntServer + "?P=',"appendChild","lightseagreen","formatoC","getServerStatus","#exec_on_update","&B=histdata(","getApiKey","g_pass","TranslateColorsVega","valores","HIDETB","_d3arc_tag","duration","#PLAY_ID","1.0","valueRanges","tag","$1.$2","runAfter","valorTagueado","none","format","stroke","g_zpH","<div id='SVTEXT'></div>","getInfLim","update","vega-json","g_win_cmd","orange","join","parent","onSuccess","addEventListener","2018-2019 Ricardo Olsen / DSC Systems. All rights reserved.","TickLength","preview:","location",'var thisobj=document.getElementById("',"-pbi-selected","get","pnts","MOUSEX","setAttribute","SP_STATUS","then","idalt1","getElementsByTagName","_listenerCounter","outerRadius","stroke-width:4;stroke:rgb(0%,85%,0%);","black","onclick","substring","type","histCalls","transition","svg","ordinal","mostraDestaqPonto","iPad","_model","&U=","datum","firstElementChild","txtOFFON","yOffset","indexOf","#SP_STATUS","processInvalidTagInElement","postMessage","click","open","complete","darkcyan","vega4","prompt","run","g_timeOutFalha","Win"," translate(0 ","SUB#","setValue","each","html > head","spec","panEnabled","g_retnok","; path=/",":bop8JOECHEC&TCWSOTCB':)bop8","pegaTagClone","charAt","RequestAnimationFrame","listener2","substr","484848","ready","#01B8AA","_removeAllListeners","cstroke","inkscape:label","init","origin","OutOfRange","#vega_","2018-1019 Ricardo Olsen / DSC Systems. All rights reserved.","removeEventListener","slider","opacity","getDescription","top","html","searchVersion","getElementById",".circle","horizontal","vgFormat","svgdiv","g_hasRadar","drgBlock","!END","levels","iframeparams","start","TranslateColor","#333333","image/x-icon","red","#set_group_distribution","-pbi-","objeto","map","!STON","webkit","axisJoin","MouseEvents","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,top=20,left=20,screenY=500,screenX=680,width=600,height=350","#arc","resetobj","base","http://scadavis.io/synoptic/synoptic.html","-cor-","readyState"," [8]","src","radar-chart-serie","g_isInkscape","val","_allListeners","-clr-almini","splice"," .vega","setAttributeNS","rotate","zoomToOriginal","mouseover","_d3arc_min","_d3arc_max","outerHTML","[\\?&]","&D=00/00/0000&H=00:00:00&M=000&A=0&","#777777","An unknown browser","Alarmed","css","searchString","cookie","max","height","update_period","GET","changeset",'frameborder="0" height="250" width="250"',"hasOwnProperty","_data","loadingSVG","Pass","inkscape:current-layer","__storage_test__",";window.WebSAGE.zoomPan(10);evt.currentTarget.style.display='none';","exec","moveBy","dispatchEvent","groupDistribSpacing","clientX","-clr-tbr","stringify","#vega4-json","zoomobj","load","test","../comum/obtem_nponto.php?tpPto=A&Tipos=6,7","use strict","plum","container","POSITIVE_INFINITY","npts","updateValues","right","set","vgId","path","values","beginElement","&I=","iPhone","event",'<div id="svgdiv" style="visibility:hidden"></div>',"#VEGACHARTS","insert",";window.WebSAGE.g_zpH = ","domain","%04d-%02d-%02d","blue","#vg_","#copy_xsac_from","entries","loadScript","tan","createEvent","ZOOMOUT_ID","drgMouseOffsetX","cancelAnimationFrame","_currentListener","FLG#","!STVAL","#B0B0B0","window.status=''","polyline","animateMotion","insertAdjacentHTML","getComputedStyle","stroke-width:4;stroke:rgb(80%,80%,80%);","fill:rgb(60%,0%,71%);","lastXlate","getMonth","shiftKey","initfill","tooltipRelac","getJSONData_onSuccess","onload","createSVGPoint","style","!ALM","med","#HORA_ATU","svgurl"," scale(","&RAND=","inittransform","stroke:rgb(0%,85%,0%);stroke-width:2;stroke-opacity:1;","Firefox","requestAnimationFrame","resetData","!STOFF","containerClass","xdone","tspan","versionSearchString","split","loaded","fill:","enablekeyboardobj",":estado","call","<div id='","Ricardo Olsen","unxtime","!DCR","undefined","vals","url","vega","baseVal","'><div>","apikey","rtdata","<?xml"," scale(0, 1)","g_destaqList","focus","getDate","drgObject","append","cadetblue","list","Safari","script: ","window.open( '","<div id='VEGACHARTS' style='display:none'></div>","detachEvent","g_remoteServer","iPhone/iPod","svgobj","zoomPan","createElementNS","background-color","vega_","href","guidGenerator","fill:none; stroke:white; stroke-width: 2","data"," );","visible","getIframe","istag","toSVG","compile","ida","rncdcurnrkj3uegbg","npt","rtrim","enableKeyboard","hidden","endAngle","push","sin","stroke-width:4;stroke:rgb(60%,0%,71%);","onready","Desc","TagClientItem","selectedIndex","notrace","dataOS","WATERMARK","white","getTime","body","stopPropagation","length","value"," scale( ","rel","datas","forEach","drgDragging","keys","FLR#","strokeWidth","LowAlarmLimit","????","#BBBBBB","innerRadius"," translate( ","nodeName","LMS#","BlockingAnnotation","TAG#","focused","-pbi-bad","HIS#","screen","text","min","stroke:rgb(80%,80%,80%);stroke-width:2;stroke-opacity:1;","CancelAnimationFrame","matrixTransform","pointer","parse","toExponential","fill-opacity:0.1;","majorDimension","stack","zoomTo","View","getFlags","#484848","Explorer","wheat","item","rangey","componentloaded","g_idprefixes","drgX","le_inkscapeSAGETags","range","className","config","DESTAQ","crosshair","-clr-bgd","Descr: ","-pbi-minimum","valor","NEGATIVE_INFINITY","g_hidetoolbar","g_vega_num","oncontextmenu","target","hasClass","rangex","parentNode","log"," 0)","rect","float","dataini","screen.html?SELTELA=../svg/","label","null","_FALSE_","-clr-background","arc","-pbi-good","qualifs","display","steelblue","KDE","SetIniExtended","gray","versionSearch","-pbi-maximum","exit","setTime","level","callServer","circle","Netscape","ZPY","0px","stroke:red;","!ALR","g_timeoutFalhaID","ajax","enablemouseobj","anim","IMG","Mac","attrib: ","text/javascript","cattribval","shortcut icon","lightgray","statusText","PTELA","tagsList","PNT#","yellow","!TAG","POST","darkblue","axisText","hasTooltip","lstpnt","1.0.1","width","SVGDoc","!ILIM","&F=S","SetExeExtended","number","Windows","enabletoolsobj","isTrusted","setItem","-cor-tbr","DigitalAlarmTextAppendTrue","classed","insertBefore","#AA9E97","circles","getBoundingClientRect","#timemachinecontrols","bardiv","scale","bind","submit","toFixed","ltrim","alternate","( |$)","SCADAvis.io API: error loading SVG URL. ","param","xOffset","removeItem","setTimeout","#999999","viewBox","window","script","string","../comum/obtem_nponto.php","flipIn","g_blinkcnt","round","BAY#","interpretaFormatoC","transform-center-x","enableTools","cos","getYear",",toolbar=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no,modal=yes' );","TraduzCor","ellipse","XCBR","erro","g_indSelPonto","exec_on_update","send","g_zpY","backgroundTooltipColor","datafim","chart","iframe","autoTooltip","createTextNode","abs","-pbi-foreground","pontoPopup","radius","now","line",",width=","CancelRequestAnimationFrame","tooltips","cht","getSubstation","groupDistrib","hidewatermarkobj",".axis","tags","evt","ctrlKey","axis","reload","%1.1f","#888888","!TMP","minValue","inherit","attr","tooltipFormatClass","#almbox","node","bottom","LMI#","childNodes","descriptions","cornsilk","layer1","getValue","prop"," scale(1, 1)","removeChild","enter","responseText","getTimezoneOffset","levelTick","trim","g_timeOutRefresh","magenta","Opera","color","Dados copiados para a �rea de transfer�ncia!","-pbi-positive","!SLIM","fucsia","getSupLim","afterend","Chrome","#vega","axes"],_0x7adf81,_0x29e03d;_0x7adf81=_0x167b,_0x29e03d=148,function(e){for(;--e;)_0x7adf81.push(_0x7adf81.shift())}(++_0x29e03d);var _0x423d=function(e,t){return _0x167b[e-=0]};function storageAvailable(e){try{var t=window[e],n=_0x423d("0x13c");return t[_0x423d("0x250")](n,n),t[_0x423d("0x264")](n),!0}catch(e){return!1}}function gup(e){e=e[_0x423d("0x62")](/[\[]/,"\\[")[_0x423d("0x62")](/[\]]/,"\\]");var t=_0x423d("0x129")+e+_0x423d("0x2dd"),n=new RegExp(t).exec(window[_0x423d("0xaf")].href);return null===n?"":n[1]}function dateToYMDString(e){return printf(_0x423d("0x15e"),e[_0x423d("0x2d")](),e[_0x423d("0x175")]()+1,e[_0x423d("0x1a3")]())}function LoadFavicon(e){var t=document[_0x423d("0x2e8")](_0x423d("0x43"));t.type=_0x423d("0x108"),t[_0x423d("0x1d6")]=_0x423d("0x239"),t[_0x423d("0x1b4")]=e,document.getElementsByTagName("head")[0].appendChild(t)}function MostraEsconde(e){"none"===e[_0x423d("0x17c")][_0x423d("0x21f")]?e.style[_0x423d("0x21f")]="":e[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e")}function CpyClip(_0x4f06e2){var _0x129ad7=eval(_0x4f06e2);if(_0x129ad7[_0x423d("0x17c")][_0x423d("0x21f")]="",_0x129ad7.focus(),_0x129ad7[_0x423d("0x2bf")](),document[_0x423d("0x320")]){var _0x508a59=_0x129ad7.createTextRange();_0x508a59[_0x423d("0x312")](_0x423d("0x2e5")),window[_0x423d("0x311")]=_0x423d("0x2b3"),setTimeout(_0x423d("0x16d"),2400)}_0x129ad7[_0x423d("0x17c")][_0x423d("0x21f")]="none"}function SelHoje(e){var t=new Date,n=t[_0x423d("0x274")]();n<500&&(n=n-100+2e3),e.value=t[_0x423d("0x1a3")]()+"/"+(t.getMonth()+1)+"/"+n}function ObtemPonto(e){var t=_0x423d("0x26b"),n=_0x423d("0x2c5");window[_0x423d("0x10c")]=e,window[_0x423d("0xd2")](t,n,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,top=20,left=20,screenY=500,screenX=680,width=600,height=350")}function ObtemPontoAnaParaMVA(e){var t=_0x423d("0x149"),n=_0x423d("0x2c5");window[_0x423d("0x10c")]=e,window[_0x423d("0xd2")](t,n,_0x423d("0x112"))}function ObtemPontoAna(e){var t=_0x423d("0x5d"),n=_0x423d("0x2c5");window[_0x423d("0x10c")]=e,window.open(t,n,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,top=20,left=20,screenY=500,screenX=680,width=600,height=350")}function ObtemPontoDig(e){var t=_0x423d("0x61"),n=_0x423d("0x2c5");window[_0x423d("0x10c")]=e,window[_0x423d("0xd2")](t,n,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,top=20,left=20,screenY=500,screenX=680,width=600,height=350")}function ToggleTreeNode(e){e[_0x423d("0x33a")][_0x423d("0x17c")][_0x423d("0x21f")]===_0x423d("0x9e")?(e[_0x423d("0x2a2")].length>0&&e[_0x423d("0x2a2")].item(0)[_0x423d("0x1e2")]===_0x423d("0x234")&&(e[_0x423d("0x2a2")].item(0).src=_0x423d("0x5f")),e[_0x423d("0x33a")][_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x5")):(e[_0x423d("0x2a2")][_0x423d("0x1d3")]>0&&"IMG"===e[_0x423d("0x2a2")][_0x423d("0x1fb")](0)[_0x423d("0x1e2")]&&(e.childNodes.item(0).src="../comum/plus.gif"),e[_0x423d("0x33a")][_0x423d("0x17c")].display=_0x423d("0x9e"))}function leftTrim(e){if(null==e)return"";for(;" "==e[_0x423d("0xe5")](0)||10==e[_0x423d("0x30")](0);)e=e[_0x423d("0xbf")](1,e[_0x423d("0x1d3")]);return e}function isInt(e){var t=parseInt(e);return!isNaN(t)&&(t=t.toString())==e}function printf(e){var t=function(e,t,n){for(var r="",i=0;i<Math[_0x423d("0x284")](n);i++)r+=t;return n>0?e+r:r+e},n=function(e,n,r,i){var a=function(e,t,n){return t>=0?e[_0x423d("0xcd")](" ")>=0?n=" "+n:e.indexOf("+")>=0&&(n="+"+n):n="-"+n,n},o=parseInt(n,10);if("0"==n[_0x423d("0xe5")](0)){var u=0;return(e[_0x423d("0xcd")](" ")>=0||e[_0x423d("0xcd")]("+")>=0)&&u++,r.length<o-u&&(r=t(r,"0",r[_0x423d("0x1d3")]-(o-u))),a(e,i,r)}return(r=a(e,i,r))[_0x423d("0x1d3")]<o&&(r=e[_0x423d("0xcd")]("-")<0?t(r," ",r[_0x423d("0x1d3")]-o):t(r," ",o-r.length)),r},r=new Array;r.c=function(e,t,n,r){return typeof r==_0x423d("0x24c")?String[_0x423d("0x84")](r):"string"==typeof r?r[_0x423d("0xe5")](0):""},r.d=function(e,t,n,i){return r.i(e,t,n,i)},r.u=function(e,t,n,i){return r.i(e,t,n,Math.abs(i))},r.i=function(e,r,i,a){var o=parseInt(i),u=Math[_0x423d("0x284")](a)[_0x423d("0x39")]()[_0x423d("0x18d")](".")[0];return u.length<o&&(u=t(u," ",o-u[_0x423d("0x1d3")])),n(e,r,u,a)},r.E=function(e,t,n,i){return r.e(e,t,n,i)[_0x423d("0x2f")]()},r.e=function(e,t,r,i){return iPrecision=parseInt(r),isNaN(iPrecision)&&(iPrecision=6),rs=Math[_0x423d("0x284")](i)[_0x423d("0x1f1")](iPrecision),rs[_0x423d("0xcd")](".")<0&&e.indexOf("#")>=0&&(rs=rs[_0x423d("0x62")](/^(.*)(e.*)$/,_0x423d("0x9b"))),n(e,t,rs,i)},r.f=function(e,t,r,i){return iPrecision=parseInt(r),isNaN(iPrecision)&&(iPrecision=6),rs=Math[_0x423d("0x284")](i)[_0x423d("0x25d")](iPrecision),rs.indexOf(".")<0&&e[_0x423d("0xcd")]("#")>=0&&(rs+="."),n(e,t,rs,i)},r.G=function(e,t,n,i){return r.g(e,t,n,i).toUpperCase()},r.g=function(e,t,r,i){return iPrecision=parseInt(r),absArg=Math[_0x423d("0x284")](i),rse=absArg[_0x423d("0x1f1")](),rsf=absArg[_0x423d("0x25d")](6),isNaN(iPrecision)||(rsep=absArg[_0x423d("0x1f1")](iPrecision),rse=rsep[_0x423d("0x1d3")]<rse[_0x423d("0x1d3")]?rsep:rse,rsfp=absArg[_0x423d("0x25d")](iPrecision),rsf=rsfp[_0x423d("0x1d3")]<rsf.length?rsfp:rsf),rse[_0x423d("0xcd")](".")<0&&e[_0x423d("0xcd")]("#")>=0&&(rse=rse.replace(/^(.*)(e.*)$/,_0x423d("0x9b"))),rsf[_0x423d("0xcd")](".")<0&&e[_0x423d("0xcd")]("#")>=0&&(rsf+="."),rs=rse[_0x423d("0x1d3")]<rsf[_0x423d("0x1d3")]?rse:rsf,n(e,t,rs,i)},r.o=function(e,r,i,a){var o=parseInt(i),u=Math[_0x423d("0x26e")](Math[_0x423d("0x284")](a)).toString(8);return u[_0x423d("0x1d3")]<o&&(u=t(u," ",o-u[_0x423d("0x1d3")])),e.indexOf("#")>=0&&(u="0"+u),n(e,r,u,a)},r.X=function(e,t,n,i){return r.x(e,t,n,i)[_0x423d("0x2f")]()},r.x=function(e,r,i,a){var o=parseInt(i);a=Math.abs(a);var u=Math[_0x423d("0x26e")](a).toString(16);return u.length<o&&(u=t(u," ",o-u[_0x423d("0x1d3")])),e[_0x423d("0xcd")]("#")>=0&&(u="0x"+u),n(e,r,u,a)},r.s=function(e,t,r,i){var a=parseInt(r),o=i;return o[_0x423d("0x1d3")]>a&&(o=o[_0x423d("0xbf")](0,a)),n(e,t,o,0)},farr=e[_0x423d("0x18d")]("%"),retstr=farr[0],fpRE=/^([-+ #]*)(\d*)\.?(\d*)([cdieEfFgGosuxX])(.*)$/;for(var i=1;i<farr.length;i++)fps=fpRE[_0x423d("0x13e")](farr[i]),fps&&(null!=arguments[i]&&(retstr+=r[fps[4]](fps[1],fps[2],fps[3],arguments[i])),retstr+=fps[5]);return retstr}function createCookie(e,t,n){if(n){var r=new Date;r[_0x423d("0x227")](r[_0x423d("0x1d0")]()+24*n*60*60*1e3);var i="; expires="+r[_0x423d("0x4")]()}else i="";document[_0x423d("0x130")]=e+"="+t+i+_0x423d("0xe2")}function readCookie(e){for(var t=e+"=",n=document.cookie[_0x423d("0x18d")](";"),r=0;r<n.length;r++){for(var i=n[r];" "==i[_0x423d("0xe5")](0);)i=i[_0x423d("0xbf")](1,i[_0x423d("0x1d3")]);if(0==i.indexOf(t))return i[_0x423d("0xbf")](t[_0x423d("0x1d3")],i[_0x423d("0x1d3")])}return null}function eraseCookie(e){createCookie(e,"",-1)}!function(){for(var e=0,t=["ms",_0x423d("0x49"),_0x423d("0x10f"),"o"],n=0;n<t[_0x423d("0x1d3")]&&!window[_0x423d("0x186")];++n)window.requestAnimationFrame=window[t[n]+_0x423d("0xe6")],window[_0x423d("0x168")]=window[t[n]+"CancelAnimationFrame"]||window[t[n]+_0x423d("0x28b")];window[_0x423d("0x186")]||(window[_0x423d("0x186")]=function(t,n){var r=(new Date)[_0x423d("0x1d0")](),i=Math[_0x423d("0x131")](0,16-(r-e)),a=window[_0x423d("0x265")]((function(){t(r+i)}),i);return e=r+i,a}),window.cancelAnimationFrame||(window[_0x423d("0x168")]=function(e){clearTimeout(e)})}(),String[_0x423d("0x59")].trim=function(){return this[_0x423d("0x62")](/^\s+|\s+$/g,"")},String[_0x423d("0x59")][_0x423d("0x25e")]=function(){return this[_0x423d("0x62")](/^\s+/,"")},String[_0x423d("0x59")][_0x423d("0x1c1")]=function(){return this[_0x423d("0x62")](/\s+$/,"")};var BrowserDetect={init:function(){this.browser=this[_0x423d("0x12f")](this.dataBrowser)||_0x423d("0x12c"),this.version=this[_0x423d("0xfa")](navigator.userAgent)||this[_0x423d("0xfa")](navigator[_0x423d("0x319")])||"an unknown version",this.OS=this.searchString(this[_0x423d("0x1cd")])||_0x423d("0x26")},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t][_0x423d("0x2a7")];if(this[_0x423d("0x18c")]=e[t][_0x423d("0x224")]||e[t][_0x423d("0x34e")],n){if(-1!=n[_0x423d("0xcd")](e[t].subString))return e[t][_0x423d("0x34e")]}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e[_0x423d("0xbf")](t+this[_0x423d("0x18c")][_0x423d("0x1d3")]+1))},dataBrowser:[{string:navigator[_0x423d("0x82")],subString:_0x423d("0x2b9"),identity:"Chrome"},{string:navigator[_0x423d("0x82")],subString:_0x423d("0x2bd"),versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator[_0x423d("0x7d")],subString:"Apple",identity:"Safari",versionSearch:_0x423d("0x34")},{prop:window.opera,identity:_0x423d("0x2b1")},{string:navigator[_0x423d("0x7d")],subString:"iCab",identity:"iCab"},{string:navigator[_0x423d("0x7d")],subString:_0x423d("0x221"),identity:"Konqueror"},{string:navigator[_0x423d("0x82")],subString:_0x423d("0x185"),identity:_0x423d("0x185")},{string:navigator.vendor,subString:_0x423d("0x74"),identity:"Camino"},{string:navigator[_0x423d("0x82")],subString:_0x423d("0x22b"),identity:_0x423d("0x22b")},{string:navigator[_0x423d("0x82")],subString:_0x423d("0x27"),identity:_0x423d("0x1f9"),versionSearch:_0x423d("0x27")},{string:navigator[_0x423d("0x82")],subString:"Gecko",identity:_0x423d("0x12"),versionSearch:"rv"},{string:navigator[_0x423d("0x82")],subString:_0x423d("0x12"),identity:_0x423d("0x22b"),versionSearch:"Mozilla"}],dataOS:[{string:navigator[_0x423d("0x30a")],subString:_0x423d("0xd9"),identity:_0x423d("0x24d")},{string:navigator[_0x423d("0x30a")],subString:_0x423d("0x235"),identity:_0x423d("0x235")},{string:navigator.userAgent,subString:_0x423d("0x157"),identity:_0x423d("0x1ae")},{string:navigator.userAgent,subString:_0x423d("0xc6"),identity:"iPad"},{string:navigator.platform,subString:_0x423d("0x2a"),identity:_0x423d("0x2a")}]};function _$TSA(e){function t(e,t){return e<<t|e>>>32-t}function n(e){var t,n="";for(t=7;t>=0;t--)n+=(e>>>4*t&15)[_0x423d("0x39")](16);return n}var r,i,a,o,u,s,l,c,f=new Array(80),d=1732584193,h=4023233417,p=2562383102,x=271733878,g=3285377520,m=(e=function(e){e=e[_0x423d("0x62")](/\r\n/g,"\n");for(var t="",n=0;n<e[_0x423d("0x1d3")];n++){var r=e[_0x423d("0x30")](n);r<128?t+=String[_0x423d("0x84")](r):r>127&&r<2048?(t+=String[_0x423d("0x84")](r>>6|192),t+=String[_0x423d("0x84")](63&r|128)):(t+=String[_0x423d("0x84")](r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String[_0x423d("0x84")](63&r|128))}return t}(e))[_0x423d("0x1d3")],v=new Array;for(i=0;i<m-3;i+=4)a=e[_0x423d("0x30")](i)<<24|e.charCodeAt(i+1)<<16|e[_0x423d("0x30")](i+2)<<8|e[_0x423d("0x30")](i+3),v[_0x423d("0x1c5")](a);switch(m%4){case 0:i=2147483648;break;case 1:i=e[_0x423d("0x30")](m-1)<<24|8388608;break;case 2:i=e.charCodeAt(m-2)<<24|e[_0x423d("0x30")](m-1)<<16|32768;break;case 3:i=e.charCodeAt(m-3)<<24|e[_0x423d("0x30")](m-2)<<16|e[_0x423d("0x30")](m-1)<<8|128}for(v.push(i);v[_0x423d("0x1d3")]%16!=14;)v[_0x423d("0x1c5")](0);for(v[_0x423d("0x1c5")](m>>>29),v[_0x423d("0x1c5")](m<<3&4294967295),r=0;r<v[_0x423d("0x1d3")];r+=16){for(i=0;i<16;i++)f[i]=v[r+i];for(i=16;i<=79;i++)f[i]=t(f[i-3]^f[i-8]^f[i-14]^f[i-16],1);for(o=d,u=h,s=p,l=x,c=g,i=0;i<=19;i++)_=t(o,5)+(u&s|~u&l)+c+f[i]+1518500249&4294967295,c=l,l=s,s=t(u,30),u=o,o=_;for(i=20;i<=39;i++)_=t(o,5)+(u^s^l)+c+f[i]+1859775393&4294967295,c=l,l=s,s=t(u,30),u=o,o=_;for(i=40;i<=59;i++)_=t(o,5)+(u&s|u&l|s&l)+c+f[i]+2400959708&4294967295,c=l,l=s,s=t(u,30),u=o,o=_;for(i=60;i<=79;i++)_=t(o,5)+(u^s^l)+c+f[i]+3395469782&4294967295,c=l,l=s,s=t(u,30),u=o,o=_;d=d+o&4294967295,h=h+u&4294967295,p=p+s&4294967295,x=x+l&4294967295,g=g+c&4294967295}var _=n(d)+n(h)+n(p)+n(x)+n(g);return _[_0x423d("0x324")]()}BrowserDetect[_0x423d("0xef")]();var Core={};document[_0x423d("0xab")]?(Core.addEventListener=function(e,t,n){e[_0x423d("0xab")](t,n,!1)},Core[_0x423d("0xf4")]=function(e,t,n){e.removeEventListener(t,n,!1)},Core[_0x423d("0x7")]=function(e){e.preventDefault()},Core[_0x423d("0x1d2")]=function(e){e.stopPropagation()}):document[_0x423d("0x300")]&&(Core[_0x423d("0xab")]=function(e,t,n){if(-1==Core[_0x423d("0x347")](e,t,n)){var r=function(){var t=window[_0x423d("0x158")];Function.prototype.call?n[_0x423d("0x192")](e,t):(e[_0x423d("0x169")]=n,e[_0x423d("0x169")](t),e[_0x423d("0x169")]=null)};e[_0x423d("0x300")]("on"+t,r);var i={target:e,type:t,listener:n,listener2:r},a=(e[_0x423d("0x2f3")]||e).parentWindow,o="l"+Core[_0x423d("0xba")]++;a[_0x423d("0x11e")]||(a._allListeners={}),a._allListeners[o]=i,e[_0x423d("0x65")]||(e[_0x423d("0x65")]=[]),e[_0x423d("0x65")][e[_0x423d("0x65")][_0x423d("0x1d3")]]=o,a[_0x423d("0x329")]||(a._unloadListenerAdded=!0,a[_0x423d("0x300")](_0x423d("0x2c3"),Core[_0x423d("0xec")]))}},Core[_0x423d("0xf4")]=function(e,t,n){var r=Core[_0x423d("0x347")](e,t,n);if(-1!=r){var i=(e[_0x423d("0x2f3")]||e).parentWindow,a=e[_0x423d("0x65")][r],o=i[_0x423d("0x11e")][a];e[_0x423d("0x1ac")]("on"+t,o[_0x423d("0xe7")]),e[_0x423d("0x65")][_0x423d("0x120")](r,1),delete i[_0x423d("0x11e")][a]}},Core.preventDefault=function(e){e.returnValue=!1},Core[_0x423d("0x1d2")]=function(e){e.cancelBubble=!0},Core[_0x423d("0x347")]=function(e,t,n){var r=e[_0x423d("0x65")];if(!r)return-1;for(var i=(e[_0x423d("0x2f3")]||e).parentWindow,a=r[_0x423d("0x1d3")]-1;a>=0;a--){var o=r[a],u=i[_0x423d("0x11e")][o];if(u[_0x423d("0xc0")]==t&&u[_0x423d("0x1d")]==n)return a}return-1},Core[_0x423d("0xec")]=function(){for(id in this[_0x423d("0x11e")]){var e=this._allListeners[id];e[_0x423d("0x20e")].detachEvent("on"+e[_0x423d("0xc0")],e.listener2),delete this[_0x423d("0x11e")][id]}},Core[_0x423d("0xba")]=0),Core[_0x423d("0x38")]=function(e,t){Core[_0x423d("0x20f")](e,t)||(""==e[_0x423d("0x202")]?e[_0x423d("0x202")]=t:e[_0x423d("0x202")]+=" "+t)},Core.getElementsByClass=function(e){var t=[];t=void 0!==document[_0x423d("0x320")]?document[_0x423d("0x320")]:document[_0x423d("0xb9")]("*");for(var n=[],r=new RegExp(_0x423d("0x2fc")+e+_0x423d("0x260")),i=0;i<t.length;i++)r[_0x423d("0x148")](t[i][_0x423d("0x202")])&&(n[n[_0x423d("0x1d3")]]=t[i]);return n},Core[_0x423d("0x20f")]=function(e,t){return!!new RegExp(_0x423d("0x2fc")+t+_0x423d("0x260"))[_0x423d("0x148")](e[_0x423d("0x202")])},Core[_0x423d("0x18")]=function(e,t){var n=new RegExp("(^| )"+t+_0x423d("0x260"));e[_0x423d("0x202")]=e[_0x423d("0x202")][_0x423d("0x62")](n,"$1"),e[_0x423d("0x202")]=e[_0x423d("0x202")][_0x423d("0x62")](/ $/,"")},Core.getComputedStyle=function(e,t){return(typeof e[_0x423d("0x1f")]!=_0x423d("0x197")?e[_0x423d("0x1f")]:document.defaultView[_0x423d("0x171")](e,null))[t]},Core[_0x423d("0x105")]=function(e){Core[_0x423d("0xab")](window,_0x423d("0x147"),e[_0x423d("0xef")])};var VisorTelas_DJ_Normal_Aberto_Borda=_0x423d("0x184"),VisorTelas_DJ_Normal_Aberto_Preen=_0x423d("0x1f2"),VisorTelas_DJ_Normal_Fechado_Borda=_0x423d("0x22e"),VisorTelas_DJ_Normal_Fechado_Preen="fill:red;",VisorTelas_DJ_Falha_Aberto_Borda=_0x423d("0x1ec"),VisorTelas_DJ_Falha_Aberto_Preen=_0x423d("0x2e2"),VisorTelas_DJ_Falha_Fechado_Borda="",VisorTelas_DJ_Falha_Fechado_Preen="fill:rgb(80%,80%,80%);",VisorTelas_DJ_Manual_Aberto_Borda=_0x423d("0x7b"),VisorTelas_DJ_Manual_Aberto_Preen=_0x423d("0x2e2"),VisorTelas_DJ_Manual_Fechado_Borda="",VisorTelas_DJ_Manual_Fechado_Preen=_0x423d("0x173"),VisorTelas_SC_Aberta=_0x423d("0xbc"),VisorTelas_SC_Fechada="stroke-width:4;stroke:red;",VisorTelas_SC_Falha=_0x423d("0x172"),VisorTelas_SC_Manual=_0x423d("0x1c7"),VisorTelas_Medidas_Cor_Falha="rgb(80%,80%,80%)",VisorTelas_CorAlarmeInibido="yellow",VisorTelas_BackgroundSVG=_0x423d("0xbd"),RadarChart={defaultConfig:{containerClass:"radar-chart",w:600,h:600,factor:.95,factorLegend:1,levels:3,levelTick:!1,TickLength:10,maxValue:0,minValue:0,radians:2*Math.PI,color:d3.scale.category10(),axisLine:!0,axisText:!0,circles:!0,radius:5,open:!1,backgroundTooltipColor:"#555",backgroundTooltipOpacity:"0.7",tooltipColor:_0x423d("0x1cf"),axisJoin:function(e,t){return e[_0x423d("0x202")]||t},tooltipFormatValue:function(e){return e},tooltipFormatClass:function(e){return e},transitionDuration:300},chart:function(){var e=Object[_0x423d("0x2fb")](RadarChart.defaultConfig);function t(t,n){if(!1===n||null==n)t[_0x423d("0x253")]("visible",0),t.select(_0x423d("0x214"))[_0x423d("0x253")](_0x423d("0x1b9"),0);else{t[_0x423d("0x253")](_0x423d("0x1b9"),1);var r=t[_0x423d("0x29f")]().parentNode,i=d3[_0x423d("0x323")](r);t.select(_0x423d("0x1ea"))[_0x423d("0x253")](_0x423d("0x1b9"),1)[_0x423d("0x17c")](_0x423d("0x2ce"),e.tooltipColor);var a=t.select("text").text(n).node()[_0x423d("0x85")]();t[_0x423d("0x2bf")]("rect").classed(_0x423d("0x1b9"),1).attr("x",0).attr("x",a.x-5)[_0x423d("0x29c")]("y",a.y-5)[_0x423d("0x29c")]("width",a[_0x423d("0x247")]+10)[_0x423d("0x29c")](_0x423d("0x132"),a[_0x423d("0x132")]+10).attr("rx","5")[_0x423d("0x29c")]("ry","5")[_0x423d("0x17c")]("fill",e[_0x423d("0x27e")]).style(_0x423d("0xf6"),e.backgroundTooltipOpacity),t[_0x423d("0x29c")](_0x423d("0x14"),_0x423d("0x15")+(i[0]+10)+","+(i[1]-10)+")")}}function n(n){n[_0x423d("0xdd")]((function(n){var r=d3[_0x423d("0x2bf")](this),i=r[_0x423d("0xc")]("g.tooltip")[_0x423d("0x1b7")]([n[0]]),a=i.enter()[_0x423d("0x1a5")]("g")[_0x423d("0x253")](_0x423d("0x34a"),!0);a[_0x423d("0x1a5")]("rect").classed(_0x423d("0x34a"),!0),a[_0x423d("0x1a5")](_0x423d("0x1ea"))[_0x423d("0x253")]("tooltip",!0),n=n[_0x423d("0x10d")]((function(e){return e instanceof Array&&(e={axes:e}),e}));var o=Math[_0x423d("0x131")](e[_0x423d("0x5e")],d3[_0x423d("0x131")](n,(function(e){return d3[_0x423d("0x131")](e.axes,(function(e){return e[_0x423d("0x1d4")]}))})));o-=e.minValue;var u=n[0][_0x423d("0x2bb")][_0x423d("0x10d")]((function(e,t){return{name:e[_0x423d("0x295")],xOffset:e[_0x423d("0x263")]?e[_0x423d("0x263")]:0,yOffset:e[_0x423d("0xcc")]?e[_0x423d("0xcc")]:0}})),s=u.length,l=e.factor*Math[_0x423d("0x1eb")](e.w/2,e.h/2),c=Math[_0x423d("0x1eb")](e.w/2,e.h/2);function f(t,n,r,i){return n*(1-(r=typeof r!==_0x423d("0x197")?r:1)*i(t*e[_0x423d("0x341")]/s))}function d(e,t,n){return f(e,t,n,Math[_0x423d("0x1c6")])}function h(e,t,n){return f(e,t,n,Math.cos)}r[_0x423d("0x253")](e[_0x423d("0x189")],1);var p=d3[_0x423d("0x201")](0,e[_0x423d("0x103")])[_0x423d("0x10d")]((function(t){return l*((t+1)/e[_0x423d("0x103")])})),x=r[_0x423d("0xc")]("g.level-group").data(p);x.enter()[_0x423d("0x1a5")]("g"),x[_0x423d("0x226")]()[_0x423d("0x333")](),x[_0x423d("0x29c")](_0x423d("0x34b"),(function(e,t){return"level-group level-group-"+t}));var g=x[_0x423d("0xc")](".level")[_0x423d("0x1b7")]((function(e){return d3[_0x423d("0x201")](0,s).map((function(){return e}))}));if(g[_0x423d("0x2aa")]()[_0x423d("0x1a5")](_0x423d("0x289")),g[_0x423d("0x226")]()[_0x423d("0x333")](),e[_0x423d("0x2ad")]?g[_0x423d("0x29c")](_0x423d("0x34b"),_0x423d("0x228")).attr("x1",(function(t,n){return l==t?d(n,t):d(n,t)+e[_0x423d("0xad")]/2*Math[_0x423d("0x273")](n*e[_0x423d("0x341")]/s)}))[_0x423d("0x29c")]("y1",(function(t,n){return l==t?h(n,t):h(n,t)-e[_0x423d("0xad")]/2*Math[_0x423d("0x1c6")](n*e[_0x423d("0x341")]/s)}))[_0x423d("0x29c")]("x2",(function(t,n){return l==t?d(n+1,t):d(n,t)-e[_0x423d("0xad")]/2*Math[_0x423d("0x273")](n*e.radians/s)}))[_0x423d("0x29c")]("y2",(function(t,n){return l==t?h(n+1,t):h(n,t)+e[_0x423d("0xad")]/2*Math[_0x423d("0x1c6")](n*e[_0x423d("0x341")]/s)}))[_0x423d("0x29c")](_0x423d("0x14"),(function(t){return _0x423d("0x15")+(e.w/2-t)+", "+(e.h/2-t)+")"})):g[_0x423d("0x29c")](_0x423d("0x34b"),_0x423d("0x228")).attr("x1",(function(e,t){return d(t,e)}))[_0x423d("0x29c")]("y1",(function(e,t){return h(t,e)}))[_0x423d("0x29c")]("x2",(function(e,t){return d(t+1,e)})).attr("y2",(function(e,t){return h(t+1,e)}))[_0x423d("0x29c")](_0x423d("0x14"),(function(t){return _0x423d("0x15")+(e.w/2-t)+", "+(e.h/2-t)+")"})),e.axisLine||e[_0x423d("0x243")]){var m=r.selectAll(_0x423d("0x291"))[_0x423d("0x1b7")](u),v=m.enter()[_0x423d("0x1a5")]("g");e[_0x423d("0x2cf")]&&v[_0x423d("0x1a5")](_0x423d("0x289")),e[_0x423d("0x243")]&&v.append("text"),m[_0x423d("0x226")]()[_0x423d("0x333")](),m.attr(_0x423d("0x34b"),_0x423d("0x295")),e[_0x423d("0x2cf")]&&m.select(_0x423d("0x289")).attr("x1",e.w/2)[_0x423d("0x29c")]("y1",e.h/2).attr("x2",(function(t,n){return e.w/2-c+d(n,c,e[_0x423d("0x2dc")])})).attr("y2",(function(t,n){return e.h/2-c+h(n,c,e[_0x423d("0x2dc")])})),e.axisText&&m[_0x423d("0x2bf")]("text").attr(_0x423d("0x34b"),(function(e,t){var n=d(t,.5);return _0x423d("0x31a")+_0x423d(n<.4?"0x32a":n>.6?"0x150":"0x6d")}))[_0x423d("0x29c")]("dy",(function(e,t){var n=h(t,.5);return n<.1?"1em":n>.9?"0":_0x423d("0x2c2")}))[_0x423d("0x1ea")]((function(e){return e.name})).attr("x",(function(t,n){return t[_0x423d("0x263")]+(e.w/2-c)+d(n,c,e[_0x423d("0x33d")])}))[_0x423d("0x29c")]("y",(function(t,n){return t.yOffset+(e.h/2-c)+h(n,c,e[_0x423d("0x33d")])}))}n.forEach((function(t){t[_0x423d("0x2bb")][_0x423d("0x1d8")]((function(t,n){t.x=e.w/2-c+d(n,c,parseFloat(Math[_0x423d("0x131")](t[_0x423d("0x1d4")]-e[_0x423d("0x29a")],0))/o*e[_0x423d("0x2dc")]),t.y=e.h/2-c+h(n,c,parseFloat(Math[_0x423d("0x131")](t[_0x423d("0x1d4")]-e.minValue,0))/o*e[_0x423d("0x2dc")])}))}));var _=r[_0x423d("0xc")](_0x423d("0x2fe"))[_0x423d("0x1b7")](n,e[_0x423d("0x110")]),y=_0x423d("0x7c");if(e[_0x423d("0xd2")]&&(y="polyline"),_[_0x423d("0x2aa")]().append(y).classed({area:1,"d3-enter":1}).on(_0x423d("0x125"),(function(n){d3[_0x423d("0x158")].stopPropagation(),r[_0x423d("0x253")]("focus",1),d3.select(this)[_0x423d("0x253")](_0x423d("0x1e6"),1),t(i,e[_0x423d("0x29d")](n[_0x423d("0x202")]))})).on(_0x423d("0x6b"),(function(){d3.event.stopPropagation(),r[_0x423d("0x253")]("focus",0),d3[_0x423d("0x2bf")](this)[_0x423d("0x253")](_0x423d("0x1e6"),0),t(i,!1)})),_.exit()[_0x423d("0x253")](_0x423d("0x17"),1)[_0x423d("0xc2")]().duration(e[_0x423d("0x2e9")])[_0x423d("0x333")](),_[_0x423d("0xdd")]((function(e,t){var n={"d3-exit":0};n[_0x423d("0x11b")+t]=1,e[_0x423d("0x202")]&&(n[e[_0x423d("0x202")]]=1),d3[_0x423d("0x2bf")](this).classed(n)})).style(_0x423d("0xa0"),(function(t,n){return e[_0x423d("0x2b2")](n)}))[_0x423d("0x17c")](_0x423d("0x2ce"),(function(t,n){return e[_0x423d("0x2b2")](n)}))[_0x423d("0xc2")]()[_0x423d("0x96")](e[_0x423d("0x2e9")])[_0x423d("0x29c")](_0x423d("0x6f"),(function(e){return e.axes[_0x423d("0x10d")]((function(e){return[e.x,e.y][_0x423d("0xa8")](",")}))[_0x423d("0xa8")](" ")}))[_0x423d("0xdd")]("start",(function(){d3[_0x423d("0x2bf")](this)[_0x423d("0x253")](_0x423d("0x318"),0)})),e[_0x423d("0x256")]&&e[_0x423d("0x287")]){var b=r.selectAll(_0x423d("0x2cb"))[_0x423d("0x1b7")](n,e.axisJoin);b[_0x423d("0x2aa")]()[_0x423d("0x1a5")]("g")[_0x423d("0x253")]({"circle-group":1,"d3-enter":1}),b[_0x423d("0x226")]()[_0x423d("0x253")](_0x423d("0x17"),1).transition()[_0x423d("0x96")](e[_0x423d("0x2e9")]).remove(),b[_0x423d("0xdd")]((function(e){var t={"d3-exit":0};e.className&&(t[e[_0x423d("0x202")]]=1),d3.select(this)[_0x423d("0x253")](t)})).transition().duration(e[_0x423d("0x2e9")])[_0x423d("0xdd")](_0x423d("0x105"),(function(){d3[_0x423d("0x2bf")](this)[_0x423d("0x253")]("d3-enter",0)}));var w=b.selectAll(_0x423d("0xfc")).data((function(e,t){return e.axes.map((function(e){return[e,t]}))}));w.enter()[_0x423d("0x1a5")]("circle")[_0x423d("0x253")]({circle:1,"d3-enter":1}).on("mouseover",(function(n){d3[_0x423d("0x158")].stopPropagation(),t(i,e[_0x423d("0x33f")](n[0][_0x423d("0x1d4")]))})).on(_0x423d("0x6b"),(function(e){d3[_0x423d("0x158")][_0x423d("0x1d2")](),t(i,!1),r.classed(_0x423d("0x1a2"),0)})),w[_0x423d("0x226")]()[_0x423d("0x253")]("d3-exit",1)[_0x423d("0xc2")]()[_0x423d("0x96")](e.transitionDuration)[_0x423d("0x333")](),w.each((function(e){var t={"d3-exit":0};t[_0x423d("0x11b")+e[1]]=1,d3[_0x423d("0x2bf")](this)[_0x423d("0x253")](t)}))[_0x423d("0x17c")](_0x423d("0x2ce"),(function(t){return e[_0x423d("0x2b2")](t[1])}))[_0x423d("0xc2")]()[_0x423d("0x96")](e[_0x423d("0x2e9")])[_0x423d("0x29c")]("r",e.radius).attr("cx",(function(e){return e[0].x}))[_0x423d("0x29c")]("cy",(function(e){return e[0].y})).each(_0x423d("0x105"),(function(){d3.select(this)[_0x423d("0x253")]("d3-enter",0)}));var S=_[_0x423d("0x29f")]();S[_0x423d("0x211")][_0x423d("0x8a")](S);var k=b[_0x423d("0x29f")]();k[_0x423d("0x211")][_0x423d("0x8a")](k);var E=i[_0x423d("0x29f")]();E[_0x423d("0x211")].appendChild(E)}}))}return n[_0x423d("0x203")]=function(t){return arguments[_0x423d("0x1d3")]?(arguments[_0x423d("0x1d3")]>1?e[arguments[0]]=arguments[1]:d3[_0x423d("0x162")](t||{})[_0x423d("0x1d8")]((function(t){e[t[_0x423d("0x2e7")]]=t[_0x423d("0x1d4")]})),n):e},n},draw:function(e,t,n){var r=RadarChart.chart().config(n),i=r[_0x423d("0x203")]();d3[_0x423d("0x2bf")](e)[_0x423d("0x2bf")](_0x423d("0xc3"))[_0x423d("0x333")](),d3[_0x423d("0x2bf")](e).append(_0x423d("0xc3"))[_0x423d("0x29c")](_0x423d("0x247"),i.w)[_0x423d("0x29c")](_0x423d("0x132"),i.h).datum(t)[_0x423d("0x192")](r)}},ColorOfPriority=[_0x423d("0x109"),_0x423d("0x23f"),_0x423d("0x337"),_0x423d("0x14b"),_0x423d("0x30b"),_0x423d("0x30b"),_0x423d("0x30b"),_0x423d("0x30b"),"silver",_0x423d("0x30b"),_0x423d("0x30b")],ColorOfSubstation=[_0x423d("0x1a6"),"brown",_0x423d("0x2f5"),_0x423d("0x2b0"),_0x423d("0xa7"),_0x423d("0xd4"),_0x423d("0x337"),"deepskyblue","indigo",_0x423d("0x8b")],EventsViewer_ToolbarColor=_0x423d("0x1df"),EventsViewer_Font=_0x423d("0x346"),EventsViewer_TableColor=_0x423d("0x2d5"),EventsViewer_GridColor="#F0F0F0",EventsViewer_AlmTxtColor=_0x423d("0x15f"),EventsViewer_FailTxtColor="white",EventsViewer_AckTxtColor=_0x423d("0x1f8"),EventsViewer_ElimTxtColor=_0x423d("0x16c"),EventsViewer_LineColor=_0x423d("0x2d5"),EventsViewer_LineColorHighight1=_0x423d("0x223"),EventsViewer_LineColorHighight2=_0x423d("0xbd"),EventsViewer_RefreshTime=15,EventsViewer_TimeGPSorLocal=2,EventsViewer_AllowFilter=1,EventsViewer_Notific=1;function EventsViewer_NotificationClick(e,t,n){window[_0x423d("0xd2")](_0x423d("0x217")+n+".svg",_0x423d("0x1e9"),"dependent=no,height=1000,width=800,toolbar=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no,modal=no")}var TabularViewer_ToolbarColor=_0x423d("0x255"),TabularViewer_Font=_0x423d("0x346"),TabularViewer_TableColor="#DCDCEE",TabularViewer_GridColor=_0x423d("0x2fd"),TabularViewer_AlmTxtColor=_0x423d("0x15f"),TabularViewer_FailTxtColor=_0x423d("0x1cf"),TabularViewer_AckTxtColor=_0x423d("0xe9"),TabularViewer_LineColor=_0x423d("0x2e3"),TabularViewer_LineColorDestaq1=_0x423d("0x223"),TabularViewer_LineColorDestaq2=_0x423d("0xbd"),TabularViewer_RefreshTime=7,ScreenViewer_RefreshTime=8,ScreenViewer_SVGMaxWidth=2400,ScreenViewer_SVGMaxHeight=1500,ScreenViewer_Background="#DDDDDD",ScreenViewer_ToolbarColor=_0x423d("0x9e"),ScreenViewer_RelationColor=_0x423d("0x109"),ScreenViewer_TagFillColor=_0x423d("0x23f"),ScreenViewer_TagStrokeColor=_0x423d("0x109"),ScreenViewer_TagInhAlmFillColor=_0x423d("0x302"),ScreenViewer_TagInhAlmStrokeColor=_0x423d("0x242"),ScreenViewer_DateColor=_0x423d("0x1cf"),ScreenViewer_TimeMachineDateColor=_0x423d("0xbd"),ScreenViewer_TimeMachineBgColor=_0x423d("0x2f5"),ScreenViewer_AlmBoxTableColor=_0x423d("0x2e3"),ScreenViewer_AlmBoxGridColor=_0x423d("0xf"),ScreenViewer_BarBreakerSwColor=_0x423d("0x220"),ScreenViewer_ShowScreenNameTB=1,ScreenViewer_ColorTable=new Array;ScreenViewer_ColorTable[0]=_0x423d("0x1cf"),ScreenViewer_ColorTable[1]=_0x423d("0x1cf"),ScreenViewer_ColorTable[2]=_0x423d("0x1cf"),ScreenViewer_ColorTable[3]=ScreenViewer_Background,ScreenViewer_ColorTable[4]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[5]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[6]=_0x423d("0x2a4"),ScreenViewer_ColorTable[7]=_0x423d("0x2a4"),ScreenViewer_ColorTable[8]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[9]=_0x423d("0x16"),ScreenViewer_ColorTable[10]=_0x423d("0x1a6"),ScreenViewer_ColorTable[11]=_0x423d("0x109"),ScreenViewer_ColorTable[12]=_0x423d("0x1cf"),ScreenViewer_ColorTable[13]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[14]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[15]=_0x423d("0x12b"),ScreenViewer_ColorTable[16]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[17]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[18]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[19]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[20]=_0x423d("0x1a6"),ScreenViewer_ColorTable[21]=_0x423d("0x1a6"),ScreenViewer_ColorTable[22]=_0x423d("0x1a6"),ScreenViewer_ColorTable[23]=_0x423d("0x1a6"),ScreenViewer_ColorTable[24]=_0x423d("0x1a6"),ScreenViewer_ColorTable[25]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[26]=_0x423d("0x223"),ScreenViewer_ColorTable[27]=_0x423d("0x223"),ScreenViewer_ColorTable[28]=_0x423d("0x52"),ScreenViewer_ColorTable[29]="darkred",ScreenViewer_ColorTable[30]=_0x423d("0x109"),ScreenViewer_ColorTable[31]=_0x423d("0x23a"),ScreenViewer_ColorTable[32]=_0x423d("0xbd"),ScreenViewer_ColorTable[33]="#D7D7D7",ScreenViewer_ColorTable[34]=_0x423d("0x223"),ScreenViewer_ColorTable[35]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[36]="mediumvioletred",ScreenViewer_ColorTable[37]=_0x423d("0x109"),ScreenViewer_ColorTable[38]=_0x423d("0x266"),ScreenViewer_ColorTable[39]="#DDE8DD",ScreenViewer_ColorTable[40]=_0x423d("0x23f"),ScreenViewer_ColorTable[41]="deepskyblue",ScreenViewer_ColorTable[42]=_0x423d("0x109"),ScreenViewer_ColorTable[43]=_0x423d("0x1a6"),ScreenViewer_ColorTable[44]=_0x423d("0x109"),ScreenViewer_ColorTable[45]=_0x423d("0x23f"),ScreenViewer_ColorTable[46]=_0x423d("0xa7"),ScreenViewer_ColorTable[47]=_0x423d("0x2b6"),ScreenViewer_ColorTable[48]=_0x423d("0x2c4"),ScreenViewer_ColorTable[49]=_0x423d("0x2c4"),ScreenViewer_ColorTable[50]=_0x423d("0x28"),ScreenViewer_ColorTable[51]=_0x423d("0x30e"),ScreenViewer_ColorTable[52]=_0x423d("0x164"),ScreenViewer_ColorTable[53]=_0x423d("0x298"),ScreenViewer_ColorTable[54]=_0x423d("0x109"),ScreenViewer_ColorTable[55]="lightsteelblue",ScreenViewer_ColorTable[56]=_0x423d("0x12b"),ScreenViewer_ColorTable[57]=ScreenViewer_BarBreakerSwColor,ScreenViewer_ColorTable[58]=_0x423d("0x2f2"),ScreenViewer_ColorTable[59]=_0x423d("0x2c4");var ScreenViewer_SlideShowInterval=10,ScreenViewer_EnableTimeMachine=1,CommandDialog_Background=_0x423d("0x1fa"),Viewers_AlmTxtHighlight1="OPERADO",Viewers_IDTxtHighlight2=_0x423d("0x278"),Viewers_DescrTxtHighlight2=_0x423d("0x191"),PNTServer="",TimePNTServer="",DocAnnotationServer="";_0x423d("0x14a");var L=[],V=[],F=[],T=[],TAGS=[],NPTS=[],SUBS=[],BAYS=[],DCRS=[],ANOTS=[],STONS=[],STOFS=[],Data="",NUM_VAR=0,HA_ALARMES=0,Sha1Ana="",Sha1Dig="",LIMSUPS=[],LIMINFS=[],INVTAGS={},LT="",VK="",HA_ALARMES_ANT=0,NUM_VAR_ANT=0,SVGDoc=null,NPTO=0,ID,ESTACAO,MODULO,DESC,ST_ON,ST_OFF,CNPTO,CID,CDESC,CST_ON,CST_OFF,LIMS,LIMI,HISTER,ALRIN,ANOT,VLNOR,ESTALM,UNIDADE,SIMULACAO=0,ComandoAck="",ANIMA=1,CLICK_POSX=0,CLICK_POSY=0,ComandoEnviado="";function LoadImage(e,t){e[_0x423d("0x122")](_0x423d("0x32e"),_0x423d("0x1b4"),t)}function RemoveAnimate(e){var t;if(null!==e)for(t=0;t<e[_0x423d("0x2a2")][_0x423d("0x1d3")];)e[_0x423d("0x2a2")][t][_0x423d("0x1e2")]==_0x423d("0x336")||e.childNodes.nodeName==_0x423d("0x303")||e[_0x423d("0x2a2")][_0x423d("0x1e2")]==_0x423d("0x16f")?(e[_0x423d("0x2a9")](e[_0x423d("0x2a2")][t]),t=0):t++}function Animate(e,t,n){var r,i;for(r in i=document[_0x423d("0x1b1")](_0x423d("0x332"),t),n)n[_0x423d("0x137")](r)&&i[_0x423d("0x122")](null,r,n[r]);setTimeout((function(){e[_0x423d("0x8a")](i),typeof i[_0x423d("0x155")]!=_0x423d("0x197")&&(i[_0x423d("0x83")](),i[_0x423d("0x155")]())}),100)}function ShowHideTranslate(e,t,n){var r,i;t=t||0,n=n||0,null!==(i=document.getElementById(_0x423d("0xff"))[_0x423d("0x41")][0])&&null!==(r=typeof e===_0x423d("0x58")?e:i[_0x423d("0xfb")](e))&&(r[_0x423d("0x17c")][_0x423d("0x21f")]===_0x423d("0x9e")?r[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x5"):r.style[_0x423d("0x21f")]="none",void 0===r[_0x423d("0x183")]&&(r[_0x423d("0x183")]=r[_0x423d("0x2e")](null,"transform")),null===r[_0x423d("0x183")]&&(r[_0x423d("0x183")]=""),0==t&&0==n||r[_0x423d("0x122")](null,"transform",r[_0x423d("0x183")]+" translate("+parseFloat(t)+" "+parseFloat(n)+")"))}function histdata(e,t){var n;if(new Date,typeof e!==_0x423d("0x197"))for(n in WebSAGE[_0x423d("0x81")][e][_0x423d("0x137")](_0x423d("0x93"))||(WebSAGE[_0x423d("0x81")][e][_0x423d("0x93")]=[],WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")]=[]),WebSAGE[_0x423d("0x81")][e][_0x423d("0x93")][t]=[],WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")][t]=[],WebSAGE.InkSage[e][_0x423d("0x93")][t][_0x423d("0x1d3")]=0,WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")][t][_0x423d("0x1d3")]=0,hvalues)hvalues[_0x423d("0x137")](n)&&(WebSAGE.InkSage[e][_0x423d("0x93")][t].push(hvalues[n][_0x423d("0x209")]),WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")][t][_0x423d("0x1c5")](hvalues[n][_0x423d("0x195")]))}window.requestAnimationFrame||function(){"use strict";var e=_0x423d("0xe6"),t=_0x423d("0x1ed"),n=_0x423d("0x10f"),r=Date[_0x423d("0x288")]||function(){return(new Date).getTime()},i=r(),a=i;window[_0x423d("0x186")]=window["moz"+e]||window[n+e]||function(e){var t=r(),n=Math[_0x423d("0x131")](0,16-(t-a));return a=t,setTimeout((function(){a=r(),e(a-i)}),n)},window[_0x423d("0x168")]=window["moz"+t]||window[n+t]||window[n+"CancelRequestAnimationFrame"]||function(e){clearTimeout(e)}}();var WebSAGE={RemoveAnimate:RemoveAnimate,Animate:Animate,ShowHideTranslate:ShowHideTranslate,LoadImage:LoadImage,g_remoteServer:PNTServer,g_timePntServer:TimePNTServer,g_docAnnotationServer:DocAnnotationServer,g_isInkscape:!1,g_DirTelas:"./",g_nponto_sup:0,g_win_cmd:{},g_win_1stdraw:0,g_wait_win:0,g_timerID:0,g_timeoutFalhaID:0,g_timeoutSlideID:0,g_data_ant:"",g_timeOutRefresh:1e3*ScreenViewer_RefreshTime,g_timeOutFalha:3e4,g_toutID:0,g_toutStatusID:0,g_blinktimerID:0,g_blinkperiod:1e3,g_blinkcnt:0,g_blinkList:[],g_blinkListAna:[],g_blinkListOld:[],g_blinkListAnaOld:[],C:[],T:[],Pass:0,g_showValsInterval:0,RectFundo:0,g_seltela:0,g_inicio:1,g_MostraQualAna:0,g_Evento:{},g_travaInfo:0,g_tminfoID:0,g_cntTentativaInfo:0,g_sha1ant_ana:"",g_sha1ant_dig:"",g_hidetoolbar:0,g_timeOutPreview:1500,g_timerPreviewID:0,g_hasRadar:!1,g_zpX:0,g_zpY:0,g_zpW:0,g_zpH:0,g_obj_onclick:"{ var pt=parseInt('PONTO'); if (isNaN(pt)) pt=window.NPTS['PONTO']; window.onmouseclick(evt, pt); }",g_titulo_janela:"",g_indSelPonto:-1,g_destaqList:[],g_loadtime:0,g_timeshift:0,g_idprefixes:[],lstpnt:"",InkSage:[],SetIniExtended:function(){},SetExeExtended:function(){},doNothing:function(){},getValue:function(e){return V[e]||V[NPTS[e]]||0},getFlags:function(e){var t=F[e]||F[NPTS[e]];return isNaN(t)?160|(0==WebSAGE[_0x423d("0x2a6")](e)?2:1):t},getInfLim:function(e){return LIMINFS[e]||LIMINFS[NPTS[e]]||0},getSupLim:function(e){return LIMSUPS[e]||LIMSUPS[NPTS[e]]||0},getSubstation:function(e){return SUBS[e]||SUBS[NPTS[e]]||""},getBay:function(e){return BAYS[e]||BAYS[NPTS[e]]||""},getDescription:function(e){return DCRS[e]||DCRS[NPTS[e]]||""},getTime:function(e){return T[e]||T[NPTS[e]]||0},init_svg:function(e){},lista_telas:function(e,t){},getScript:function(e,t,n){n=n||null,""!=(t=t||"")?$[_0x423d("0x231")]({url:e,dataType:_0x423d("0x1ea"),data:t,type:_0x423d("0x241"),success:WebSAGE[_0x423d("0xaa")],timeout:n}):$[_0x423d("0x231")]({url:e,dataType:_0x423d("0x1ea"),success:WebSAGE[_0x423d("0xaa")],timeout:n})},onSuccess:function(_0x50053c){eval(_0x50053c),_0x50053c=null},tooltipRelac:function(e,t){0==t||99999==t||99989==t||e.hasTooltip||setTimeout((function(){if(!e.hasTooltip&&!e[_0x423d("0x211")].hasTooltip){var n=t;isNaN(parseInt(t))&&(n=NPTS[t]);var r=document[_0x423d("0x1b1")](_0x423d("0x332"),_0x423d("0x326"));r[_0x423d("0x2f8")]=_0x423d("0x87")+TAGS[n]+"\nDescr: "+DCRS[n]+"\n"+_0x423d("0x2d2")+V[n],e[_0x423d("0x8a")](r),e[_0x423d("0x244")]=1,e[_0x423d("0x282")]=1}}),5e3)},atalhosTela:function(){},cmdWriteById:function(e,t,n){e.$("#"+t)[_0x423d("0x1ea")](n)},acrescentaPontoLista:function(e){if(0===(e=e[_0x423d("0x2ae")]()).indexOf("#")||0===e[_0x423d("0xcd")]("%")||""==e)return 0;if(0===e.indexOf(_0x423d("0x17d"))||0===e[_0x423d("0xcd")](_0x423d("0x299"))||0===e[_0x423d("0xcd")](_0x423d("0x22f"))||0===e.indexOf(_0x423d("0x22f"))||0===e[_0x423d("0xcd")](_0x423d("0x240"))||0===e[_0x423d("0xcd")](_0x423d("0x196"))?e=e[_0x423d("0xe8")](4)[_0x423d("0x2ae")]():0===e[_0x423d("0xcd")]("!SLIM")||0===e[_0x423d("0xcd")](_0x423d("0x249"))||0===e[_0x423d("0xcd")](_0x423d("0x10e"))?e=e[_0x423d("0xe8")](5)[_0x423d("0x2ae")]():0!==e[_0x423d("0xcd")](_0x423d("0x188"))&&0!==e[_0x423d("0xcd")]("!STVAL")||(e=e[_0x423d("0xe8")](6)[_0x423d("0x2ae")]()),isNaN(parseInt(e)))if(typeof NPTS[e]!==_0x423d("0x197"))e=NPTS[e];else if(0===e[_0x423d("0xcd")]("!")||0===e[_0x423d("0xcd")]("#"))return 0;return WebSAGE.lstpnt.indexOf(","+e+",")<0&&0!==WebSAGE[_0x423d("0x245")][_0x423d("0xcd")](e+",")&&(WebSAGE[_0x423d("0x245")]=WebSAGE[_0x423d("0x245")]+e+","),e},janelaInfo:function(e){},showValsInfo0:function(){},showValsInfo1:function(){},showValsInfo2:function(e){},prejanelaComando:function(e){},janelaComando:function(e){},showValsCmd1:function(){},showValsCmd2:function(){},directCommandExec:function(e,t){},executaComando:function(e){},ackComando:function(){},writeParams:function(){},writeAnnotDoc:function(){},tendencias:function(){},vis_trend:function(e){},curvas:function(){},tabular:function(){},writeValor:function(){},timerBlink:function(){},timerBlinkDraw:function(){},processInvalidTagInElement(e,t){INVTAGS[_0x423d("0x137")](e)||(INVTAGS[e]=0),t&&t[_0x423d("0x17c")][_0x423d("0x60")]!==_0x423d("0x2c7")&&(t[_0x423d("0x17c")][_0x423d("0x60")]="collapse")},valorTagueado:function(_0x282a2c,_0x5b5e48){var _0xd9fc41=_0x423d("0x1de"),_0x15edd8,_0x58097f;if(""==_0x282a2c||typeof _0x282a2c===_0x423d("0x197"))return _0xd9fc41;if(_0x15edd8=parseInt(_0x282a2c),!isNaN(_0x15edd8)){if(typeof V[_0x15edd8]===_0x423d("0x197"))return WebSAGE[_0x423d("0xcf")](_0x282a2c,_0x5b5e48),_0xd9fc41;if(typeof _0x5b5e48[_0x423d("0x282")]!==_0x423d("0x197")){var _0x563278=_0x5b5e48[_0x423d("0xb9")](_0x423d("0x326"));_0x563278[_0x423d("0x1d3")]>0&&(_0x563278[0][_0x423d("0x2f8")]=_0x423d("0x87")+TAGS[_0x15edd8]+"\n"+_0x423d("0x207")+DCRS[_0x15edd8]+"\n"+_0x423d("0x2d2")+V[_0x15edd8])}return V[_0x15edd8]}if(_0x282a2c=_0x282a2c[_0x423d("0x2ae")](),void 0!==NPTS[_0x282a2c]){if(_0x5b5e48&&_0x5b5e48[_0x423d("0x17c")][_0x423d("0x60")]===_0x423d("0x2c7")&&(_0x5b5e48[_0x423d("0x17c")][_0x423d("0x60")]=_0x423d("0x29b")),typeof _0x5b5e48.autoTooltip!==_0x423d("0x197")){var _0x563278=_0x5b5e48.getElementsByTagName(_0x423d("0x326"));_0x563278[_0x423d("0x1d3")]>0&&(_0x563278[0][_0x423d("0x2f8")]="Tag: "+_0x282a2c+"\nDescr: "+DCRS[NPTS[_0x282a2c]]+"\n"+_0x423d("0x2d2")+V[NPTS[_0x282a2c]])}return V[NPTS[_0x282a2c]]}if(_0x5b5e48&&_0x5b5e48.style.visibility===_0x423d("0x2c7")&&(_0x5b5e48[_0x423d("0x17c")][_0x423d("0x60")]=_0x423d("0x29b")),typeof V[_0x282a2c]!==_0x423d("0x197"))return V[_0x282a2c];if(0==_0x282a2c[_0x423d("0xcd")]("#")||0==_0x282a2c[_0x423d("0xcd")]("%"))return WebSAGE[_0x423d("0xe1")];if(_0x58097f=WebSAGE.getFlags(_0x15edd8),0===_0x282a2c[_0x423d("0xcd")](_0x423d("0x2b5")))return _0x15edd8=_0x282a2c[_0x423d("0xe8")](5)[_0x423d("0x2ae")](),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),typeof LIMSUPS[_0x15edd8]===_0x423d("0x197")?999999:LIMSUPS[_0x15edd8];if(0===_0x282a2c[_0x423d("0xcd")](_0x423d("0x249")))return _0x15edd8=_0x282a2c.substr(5).trim(),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),typeof LIMINFS[_0x15edd8]===_0x423d("0x197")?-999999:LIMINFS[_0x15edd8];if(0===_0x282a2c.indexOf(_0x423d("0x240")))return _0x15edd8=_0x282a2c[_0x423d("0xe8")](4)[_0x423d("0x2ae")](),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),typeof TAGS[_0x15edd8]===_0x423d("0x197")?"":TAGS[_0x15edd8];if(0===_0x282a2c[_0x423d("0xcd")](_0x423d("0x196")))return _0x15edd8=_0x282a2c[_0x423d("0xe8")](4)[_0x423d("0x2ae")](),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),typeof DCRS[_0x15edd8]===_0x423d("0x197")?"":DCRS[_0x15edd8];if(0===_0x282a2c.indexOf(_0x423d("0x10e")))return _0x15edd8=_0x282a2c[_0x423d("0xe8")](5)[_0x423d("0x2ae")](),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),typeof STONS[_0x15edd8]===_0x423d("0x197")?"":STONS[_0x15edd8];if(0===_0x282a2c[_0x423d("0xcd")]("!STOFF"))return _0x15edd8=_0x282a2c[_0x423d("0xe8")](6)[_0x423d("0x2ae")](),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),typeof STOFS[_0x15edd8]===_0x423d("0x197")?"":STOFS[_0x15edd8];if(0===_0x282a2c[_0x423d("0xcd")](_0x423d("0x16b"))){if(_0x15edd8=_0x282a2c[_0x423d("0xe8")](6)[_0x423d("0x2ae")](),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),2==(3&_0x58097f))return STONS[_0x15edd8];if(1==(3&_0x58097f))return STOFS[_0x15edd8];if(0==(3&_0x58097f))return"";if(3==(3&_0x58097f))return""}if(0===_0x282a2c[_0x423d("0xcd")](_0x423d("0x22f")))return _0x15edd8=_0x282a2c[_0x423d("0xe8")](4).trim(),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),void 0===_0x58097f?0:256&_0x58097f?1:0;if(0===_0x282a2c.indexOf(_0x423d("0x17d")))return _0x15edd8=_0x282a2c.substr(4)[_0x423d("0x2ae")](),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),typeof _0x58097f===_0x423d("0x197")?0:2048&_0x58097f||256&_0x58097f?1:0;if(0===_0x282a2c[_0x423d("0xcd")](_0x423d("0x299")))return _0x15edd8=_0x282a2c[_0x423d("0xe8")](4).trim(),isNaN(parseInt(_0x15edd8))&&(_0x15edd8=NPTS[_0x15edd8]),getTime(_0x15edd8);if(0===_0x282a2c[_0x423d("0xcd")](_0x423d("0x2e1"))){_0x15edd8=_0x282a2c[_0x423d("0xe8")](5)[_0x423d("0x2ae")]();try{return eval(_0x423d("0xb0")+_0x5b5e48.id+_0x423d("0x33")+_0x15edd8)}catch(e){return WebSAGE[_0x423d("0xcf")](_0x282a2c,_0x5b5e48),console[_0x423d("0x212")](e),_0xd9fc41}}return WebSAGE.processInvalidTagInElement(_0x282a2c,_0x5b5e48),_0xd9fc41},interpretaFormatoC:function(e,t,n){var r;if("????"===(r=WebSAGE[_0x423d("0x9d")](t,n)))return r;void 0===e&&(e=isNaN(parseFloat(r))?"%s":_0x423d("0x297"));var i=WebSAGE[_0x423d("0x1f7")](t);if(void 0!==i&&32&i&&e.search(/[udrla]\^/)>=0&&(e=(e=(e=(e=(e=e.replace("u^",String[_0x423d("0x84")](r>=0?8593:8595)))[_0x423d("0x62")]("d^",String[_0x423d("0x84")](r>=0?8595:8593)))[_0x423d("0x62")]("r^",String[_0x423d("0x84")](r>=0?8611:8610)))[_0x423d("0x62")]("l^",String[_0x423d("0x84")](r>=0?8610:8611)))[_0x423d("0x62")]("a^",""),r=Math[_0x423d("0x284")](r)),e.indexOf("%")<0){var a=e[_0x423d("0x18d")]("`");return a[0]=a[0][_0x423d("0x62")]("~","%"),d3[_0x423d("0x9f")](a[0])(r)+(a[_0x423d("0x1d3")]>1?a[1]:"")}return printf(e,r)},pegaTagClone:function(e,t){var n,r,i,a,o;if(typeof t[_0x423d("0x1a7")]!==_0x423d("0x197")){for(var u=0;u<t[_0x423d("0x1a7")].length;u++)if(void 0!==t.list[u][_0x423d("0x9a")]&&-1!==t[_0x423d("0x1a7")][u][_0x423d("0x9a")][_0x423d("0xcd")]("%")&&"g"===e.parentNode[_0x423d("0x1e2")])for(n=0;n<WebSAGE[_0x423d("0x81")][_0x423d("0x1d3")];n++)if(WebSAGE.InkSage[n][_0x423d("0xa9")].id===e[_0x423d("0x211")].id){for(typeof e[_0x423d("0x211")][_0x423d("0x2d9")]!==_0x423d("0x197")&&(e[_0x423d("0x2d9")]=e[_0x423d("0x211")][_0x423d("0x2d9")]),r=0;r<WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")].length;r++)i=WebSAGE.InkSage[n][_0x423d("0x10d")][r][_0x423d("0xcd")]("="),a=WebSAGE.InkSage[n].map[r][_0x423d("0xbf")](0,i),o=t.list[u].tag.indexOf("%"),a===t[_0x423d("0x1a7")][u][_0x423d("0x9a")][_0x423d("0xbf")](o,o+a[_0x423d("0x1d3")])&&(t[_0x423d("0x1a7")][u][_0x423d("0x9a")]=t[_0x423d("0x1a7")][u][_0x423d("0x9a")][_0x423d("0xbf")](0,o)+WebSAGE[_0x423d("0x81")][n].map[r][_0x423d("0xbf")](i+1)+t[_0x423d("0x1a7")][u][_0x423d("0x9a")].substring(o+a.length),t[_0x423d("0x9a")]=t[_0x423d("0x1a7")][u][_0x423d("0x9a")],WebSAGE[_0x423d("0x81")][n].tag=t[_0x423d("0x1a7")][u][_0x423d("0x9a")]);break}}else{if(typeof t[_0x423d("0x9a")]!==_0x423d("0x197")&&-1!==t[_0x423d("0x9a")][_0x423d("0xcd")]("%")&&"g"===e[_0x423d("0x211")][_0x423d("0x1e2")])for(typeof e[_0x423d("0x211")][_0x423d("0x2d9")]!==_0x423d("0x197")&&(e[_0x423d("0x2d9")]=e[_0x423d("0x211")].noTrace),n=0;n<WebSAGE.InkSage[_0x423d("0x1d3")];n++)if(WebSAGE[_0x423d("0x81")][n].parent.id===e.parentNode.id){for(r=0;r<WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")][_0x423d("0x1d3")];r++)i=WebSAGE[_0x423d("0x81")][n].map[r][_0x423d("0xcd")]("="),a=WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")][r].substring(0,i),o=t[_0x423d("0x9a")][_0x423d("0xcd")]("%"),a===t[_0x423d("0x9a")][_0x423d("0xbf")](o,o+a[_0x423d("0x1d3")])&&(t.tag=t.tag[_0x423d("0xbf")](0,o)+WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")][r][_0x423d("0xbf")](i+1)+t[_0x423d("0x9a")][_0x423d("0xbf")](o+a[_0x423d("0x1d3")]),e[_0x423d("0x2cc")]=1);break}if(typeof t[_0x423d("0x11a")]!==_0x423d("0x197")&&-1!==t[_0x423d("0x11a")].indexOf("%")&&"g"===e[_0x423d("0x211")].nodeName)for(typeof e.parentNode.noTrace!==_0x423d("0x197")&&(e[_0x423d("0x2d9")]=e[_0x423d("0x211")][_0x423d("0x2d9")]),n=0;n<WebSAGE[_0x423d("0x81")].length;n++)if(WebSAGE[_0x423d("0x81")][n].parent.id===e[_0x423d("0x211")].id){for(r=0;r<WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")].length;r++)i=WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")][r][_0x423d("0xcd")]("="),a=WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")][r].substring(0,i),o=t.src[_0x423d("0xcd")]("%"),a===t[_0x423d("0x11a")][_0x423d("0xbf")](o,o+a.length)&&(t[_0x423d("0x9a")]=t[_0x423d("0x11a")][_0x423d("0xbf")](0,o)+WebSAGE[_0x423d("0x81")][n].map[r][_0x423d("0xbf")](i+1)+t.src[_0x423d("0xbf")](o+a[_0x423d("0x1d3")]),t[_0x423d("0x11a")]=t[_0x423d("0x9a")],e.temPaiGrupo=1);break}if(t[_0x423d("0x29c")]===_0x423d("0x28c"))for(u=0;u<t[_0x423d("0x262")][_0x423d("0x1d3")];u++)if(-1!==t[_0x423d("0x262")][u][_0x423d("0xcd")](_0x423d("0x2e1"))&&-1!==t.param[u].indexOf("%")&&"g"===e.parentNode[_0x423d("0x1e2")])for(typeof e[_0x423d("0x211")].noTrace!==_0x423d("0x197")&&(e[_0x423d("0x2d9")]=e[_0x423d("0x211")][_0x423d("0x2d9")]),n=0;n<WebSAGE.InkSage[_0x423d("0x1d3")];n++)if(WebSAGE[_0x423d("0x81")][n][_0x423d("0xa9")].id===e[_0x423d("0x211")].id){for(r=0;r<WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")][_0x423d("0x1d3")];r++)i=WebSAGE[_0x423d("0x81")][n].map[r][_0x423d("0xcd")]("="),a=WebSAGE[_0x423d("0x81")][n][_0x423d("0x10d")][r][_0x423d("0xbf")](0,i),o=t.param[u].indexOf("%"),a===t[_0x423d("0x262")][u].substring(o,o+a[_0x423d("0x1d3")])&&(t[_0x423d("0x262")][u]=t[_0x423d("0x262")][u][_0x423d("0xbf")](0,o)+WebSAGE.InkSage[n][_0x423d("0x10d")][r][_0x423d("0xbf")](i+1)+t[_0x423d("0x262")][u].substring(o+a[_0x423d("0x1d3")]),e[_0x423d("0x2cc")]=1);break}}},setGroupDistrib:function(e){var t,n,r,i,a,o;for(t=0;t<e.children[_0x423d("0x1d3")];t++)t>0&&(typeof e.children[t][_0x423d("0x183")]===_0x423d("0x197")&&(e.children[t][_0x423d("0x183")]=e[_0x423d("0x41")][t][_0x423d("0x2e")](null,"transform")),r=e[_0x423d("0x41")][t][_0x423d("0x257")](),typeof e[_0x423d("0x41")][t].lastXlate===_0x423d("0x197")&&(e[_0x423d("0x41")][t][_0x423d("0x174")]=0),"vertical"===e[_0x423d("0x32d")]?(a=parseFloat(i-r[_0x423d("0xf8")]+e[_0x423d("0x141")])+e[_0x423d("0x41")][t].lastXlate,o=_0x423d("0xda")+a+")"):(a=parseFloat(n-r[_0x423d("0x32a")]+e[_0x423d("0x141")])+e.children[t][_0x423d("0x174")],o=_0x423d("0x72")+a+_0x423d("0x213")),e[_0x423d("0x41")][t][_0x423d("0x122")](null,_0x423d("0x14"),e[_0x423d("0x41")][t].inittransform+o),e[_0x423d("0x41")][t][_0x423d("0x174")]=a),n=(r=e.children[t][_0x423d("0x257")]())[_0x423d("0x150")],i=r[_0x423d("0x2a0")],e.children[t][_0x423d("0x28f")]=1},setPreview:function(e,t,n,r){},le_inkscapeSAGETags:function(_0x3b7eb8){var _0x352b5a=_0x3b7eb8.getAttributeNS(null,_0x423d("0xee"))||_0x3b7eb8[_0x423d("0x2e")](_0x423d("0x2c"),_0x423d("0x218")),_0x3c4e66,_0x3c4029,_0x5c6d4a,_0x30fba9,_0xbbfb80,_0x11fab5,_0x134107,_0x2b71c6,_0x394c54,_0x5ca1b0,_0x15aadb,_0x1cf62d,_0x113343,_0x1bf200,_0x155896,_0x3474d0,_0x31ab14,_0x57ca80,_0x259ffb,_0x2770fd,_0x54892a,_0x223cd2=[],_0x3d377e,_0x1a9131,_0x269b81;if(null!==_0x352b5a&&""!=_0x352b5a&&typeof _0x352b5a!=_0x423d("0x197")){try{for(;(_0x1a9131=_0x352b5a[_0x423d("0xcd")]("$$#"))>=0;)_0x269b81=_0x352b5a[_0x423d("0xe8")](_0x1a9131),_0x352b5a=_0x352b5a[_0x423d("0xe8")](0,_0x1a9131)+WebSAGE[_0x423d("0x1fe")][parseInt(_0x352b5a[_0x423d("0xe8")](_0x1a9131+3))-1]+_0x269b81[_0x423d("0xe8")](_0x269b81.indexOf("_")+1);_0x5c6d4a=JSON.parse("["+_0x352b5a+"]")}catch(e){return}for(_0x3c4e66=0;_0x3c4e66<_0x5c6d4a.length;_0x3c4e66++){switch(_0x5c6d4a[_0x3c4e66][_0x423d("0xa9")]=_0x3b7eb8,WebSAGE[_0x423d("0xe4")](_0x3b7eb8,_0x5c6d4a[_0x3c4e66]),typeof _0x5c6d4a[_0x3c4e66].tag!=_0x423d("0x197")&&(_0x3c4029=WebSAGE[_0x423d("0x2")](_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]),99999!==_0x3c4029&&0!==_0x3c4029&&void 0===_0x3b7eb8[_0x423d("0x1e")]&&null==_0x3b7eb8[_0x423d("0x286")]&&(WebSAGE.tooltipRelac(_0x3b7eb8,_0x3c4029),null!==_0x3b7eb8[_0x423d("0x17c")]&&(_0x3b7eb8[_0x423d("0x17c")][_0x423d("0x50")]="pointer"))),_0x5c6d4a[_0x3c4e66][_0x423d("0x29c")]){case _0x423d("0x151"):switch(_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]){case"#radar":if("rect"!==_0x3b7eb8.tagName)break;for(WebSAGE[_0x423d("0x100")]||(WebSAGE[_0x423d("0x100")]=!0),_0x3b7eb8[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e"),_0x3b7eb8[_0x423d("0x2c6")]=[{className:"radar",axes:[{axis:_0x423d("0x17e"),value:1},{axis:_0x423d("0x17e"),value:1},{axis:"med",value:1},{axis:_0x423d("0x17e"),value:1},{axis:_0x423d("0x17e"),value:1},{axis:"med",value:1},{axis:"med",value:1},{axis:"med",value:1},{axis:_0x423d("0x17e"),value:1},{axis:_0x423d("0x17e"),value:1},{axis:"med",value:1},{axis:"med",value:1},{axis:"med",value:1},{axis:_0x423d("0x17e"),value:1},{axis:_0x423d("0x17e"),value:1},{axis:_0x423d("0x17e"),value:1},{axis:_0x423d("0x17e"),value:1},{axis:"med",value:1},{axis:_0x423d("0x17e"),value:1},{axis:_0x423d("0x17e"),value:1},{axis:"med",value:1}]}],_0x3b7eb8.pnts=_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")][_0x423d("0x18d")](","),_0x30fba9=0;_0x30fba9<_0x3b7eb8[_0x423d("0xb3")][_0x423d("0x1d3")];_0x30fba9++)WebSAGE[_0x423d("0x2")](_0x3b7eb8[_0x423d("0xb3")][_0x30fba9]);_0x3b7eb8[_0x423d("0x2c6")][0][_0x423d("0x2bb")][_0x423d("0x120")](0,_0x3b7eb8[_0x423d("0x2c6")][0][_0x423d("0x2bb")].length-_0x3b7eb8[_0x423d("0xb3")].length),_0x3b7eb8.chart=RadarChart.chart();var _0x448a78={};""!==_0x5c6d4a[_0x3c4e66][_0x423d("0xd6")]&&(_0x448a78=JSON[_0x423d("0x1f0")](_0x5c6d4a[_0x3c4e66][_0x423d("0xd6")])),_0x448a78.w=_0x3b7eb8[_0x423d("0x2e")](null,_0x423d("0x247")),_0x448a78.h=_0x3b7eb8[_0x423d("0x2e")](null,_0x423d("0x132")),_0x448a78[_0x423d("0x2b2")]=d3[_0x423d("0x25a")][_0x423d("0xc4")]()[_0x423d("0x201")]([_0x3b7eb8[_0x423d("0x17c")][_0x423d("0x2ce")]]),_0x3b7eb8[_0x423d("0x280")].config(_0x448a78);var _0x54236b=d3[_0x423d("0x2bf")](SVGDoc);_0x3b7eb8[_0x423d("0x28d")]=_0x54236b.select("#"+SVGDoc[_0x423d("0xfb")](_0x3b7eb8.id)[_0x423d("0x211")].id)[_0x423d("0x1a5")]("g")[_0x423d("0xc9")](_0x3b7eb8[_0x423d("0x2c6")])[_0x423d("0x192")](_0x3b7eb8[_0x423d("0x280")]),_0x3b7eb8[_0x423d("0x28d")][0][0][_0x423d("0x122")](null,_0x423d("0x14"),(_0x3b7eb8[_0x423d("0x2e")](null,_0x423d("0x14"))||"")+_0x423d("0x72")+_0x3b7eb8[_0x423d("0x2e")](null,"x")+" "+_0x3b7eb8.getAttributeNS(null,"y")+") ");break;case _0x423d("0x6"):case _0x423d("0x2f6"):try{function _0x253056(_0x796ddd){var _0x310720=null;return eval(_0x796ddd)}_0x253056(_0x423d("0xb0")+_0x3b7eb8.id+_0x423d("0x33")+_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")])}catch(e){}break;case _0x423d("0x75"):break;case _0x423d("0x161"):if(""!=_0x5c6d4a[_0x3c4e66].src)for(_0x2b71c6=_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")][_0x423d("0x18d")](","),_0x30fba9=0;_0x30fba9<_0x2b71c6.length;_0x30fba9++)_0x3d377e=SVGDoc[_0x423d("0xfb")](_0x2b71c6[_0x30fba9]),null!==_0x3d377e&&(_0x394c54=_0x3d377e[_0x423d("0x2e")](null,_0x423d("0xee"))||_0x3d377e.getAttributeNS(_0x423d("0x2c"),_0x423d("0x218")),""!=_0x394c54&&(_0x3b7eb8[_0x423d("0xb5")](_0x423d("0xee"),_0x394c54),WebSAGE[_0x423d("0x200")](_0x3b7eb8)));break;case _0x423d("0x10a"):_0x2770fd=parseFloat(_0x5c6d4a[_0x3c4e66].src),isNaN(_0x2770fd)?_0x3b7eb8[_0x423d("0x141")]=0:_0x3b7eb8[_0x423d("0x141")]=_0x2770fd,_0x5c6d4a[_0x3c4e66].prompt===_0x423d("0x2c1")?_0x3b7eb8[_0x423d("0x32d")]=_0x423d("0x2c1"):_0x3b7eb8[_0x423d("0x32d")]=_0x423d("0xfd"),WebSAGE[_0x423d("0x30f")](_0x3b7eb8);break;default:WebSAGE[_0x423d("0x222")](_0x5c6d4a,_0x3c4e66,_0x3b7eb8)}break;case _0x423d("0x2f7"):0===_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")].indexOf(_0x423d("0xae"))?WebSAGE[_0x423d("0x54")](_0x3b7eb8,_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")][_0x423d("0xe8")](8),_0x5c6d4a[_0x3c4e66].width,_0x5c6d4a[_0x3c4e66].height):"block"===_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")]?(_0x3b7eb8[_0x423d("0x122")](null,_0x423d("0xbe"),null),null!=_0x3b7eb8[_0x423d("0x17c")]&&(_0x3b7eb8[_0x423d("0x17c")][_0x423d("0x50")]=""),_0x3b7eb8.blockPopup=1,_0x3b7eb8[_0x423d("0x2d9")]=1):_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")]===_0x423d("0x1cc")?_0x3b7eb8[_0x423d("0x2d9")]=1:(_0x3c4029=WebSAGE[_0x423d("0x2")](_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")]),WebSAGE[_0x423d("0x178")](_0x3b7eb8,_0x3c4029),null===_0x3b7eb8[_0x423d("0x17c")]&&typeof _0x3b7eb8[_0x423d("0x17c")]!==_0x423d("0x197")||(_0x3b7eb8[_0x423d("0x17c")].cursor=_0x423d("0x1ef")),_0x3b7eb8.pontoPopup=_0x3c4029);break;case _0x423d("0xb2"):_0x5c6d4a[_0x3c4e66][_0x423d("0xa9")][_0x423d("0xca")][_0x423d("0x2f8")].indexOf("|")>=0?_0x5c6d4a[_0x3c4e66][_0x423d("0xcb")]=_0x5c6d4a[_0x3c4e66][_0x423d("0xa9")][_0x423d("0xca")][_0x423d("0x2f8")][_0x423d("0x18d")]("|"):(_0x5c6d4a[_0x3c4e66][_0x423d("0x8c")]=_0x5c6d4a[_0x3c4e66][_0x423d("0xa9")][_0x423d("0xca")].textContent,_0x3c4029=_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]);break;case _0x423d("0x2b2"):for(null!==_0x3b7eb8[_0x423d("0x17c")]?(_0x5c6d4a[_0x3c4e66][_0x423d("0x177")]=_0x3b7eb8.style.fill,_0x5c6d4a[_0x3c4e66][_0x423d("0x31e")]=_0x3b7eb8[_0x423d("0x17c")][_0x423d("0xa0")]):(_0x5c6d4a[_0x3c4e66].initfill="",_0x5c6d4a[_0x3c4e66].initstroke=""),_0x30fba9=0;_0x30fba9<_0x5c6d4a[_0x3c4e66].list[_0x423d("0x1d3")];_0x30fba9++)_0x3c4029=WebSAGE[_0x423d("0x2")](_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x9a")]),_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x304")]="",_0x5c6d4a[_0x3c4e66].list[_0x30fba9].cfill="",_0x5c6d4a[_0x3c4e66].list[_0x30fba9].cstroke="",_0x5c6d4a[_0x3c4e66].list[_0x30fba9].cattrib="",_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x238")]="",0===_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9].param[_0x423d("0xcd")](_0x423d("0x236"))?(_0x223cd2=_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x262")][_0x423d("0xe8")](8)[_0x423d("0x18d")]("="),_0x223cd2[_0x423d("0x1d3")]>1&&(_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9].cattrib=_0x223cd2[0],_0x5c6d4a[_0x3c4e66].list[_0x30fba9].cattribval=_0x223cd2[1])):0===_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x262")][_0x423d("0xcd")](_0x423d("0x1a9"))?_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x304")]=_0x5c6d4a[_0x3c4e66].list[_0x30fba9][_0x423d("0x262")][_0x423d("0xe8")](8):(_0x5ca1b0=[],_0x5ca1b0=_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x262")].split("|"),_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x315")]=WebSAGE[_0x423d("0x276")](_0x5ca1b0[0]),_0x5ca1b0[_0x423d("0x1d3")]>1?_0x5c6d4a[_0x3c4e66].list[_0x30fba9].cstroke=WebSAGE[_0x423d("0x276")](_0x5ca1b0[1]):_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0xed")]=_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x30fba9][_0x423d("0x315")]),99999!=_0x3c4029&&typeof _0x3b7eb8[_0x423d("0x1e")]==_0x423d("0x197")&&void 0===_0x3b7eb8[_0x423d("0x286")]&&0===_0x30fba9&&(WebSAGE[_0x423d("0x178")](_0x3b7eb8,_0x3c4029),null!==_0x3b7eb8[_0x423d("0x17c")]&&(_0x3b7eb8[_0x423d("0x17c")][_0x423d("0x50")]=_0x423d("0x1ef")));break;case _0x423d("0x35"):_0x5c6d4a[_0x3c4e66][_0x423d("0x32c")]=_0x3b7eb8[_0x423d("0x2e")](null,_0x423d("0x132"));break;case _0x423d("0x0"):break;case _0x423d("0xd2"):if(0==_0x5c6d4a[_0x3c4e66][_0x423d("0x1bb")])0===_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")][_0x423d("0xcd")](_0x423d("0x23"))?(_0x3b7eb8.style[_0x423d("0x50")]=_0x423d("0x1ef"),_0x3b7eb8[_0x423d("0x122")](null,_0x423d("0xbe"),_0x423d("0x1aa")+_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")][_0x423d("0xe8")](4)+"','','dependent=yes,height="+_0x5c6d4a[_0x3c4e66][_0x423d("0x132")]+_0x423d("0x28a")+_0x5c6d4a[_0x3c4e66][_0x423d("0x247")]+_0x423d("0x275"))):0===_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")][_0x423d("0xcd")](_0x423d("0xae"))&&WebSAGE[_0x423d("0x54")](_0x3b7eb8,_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")][_0x423d("0xe8")](8),_0x5c6d4a[_0x3c4e66].width,_0x5c6d4a[_0x3c4e66][_0x423d("0x132")]);else if(_0x3b7eb8[_0x423d("0x31b")]===_0x423d("0x214")){if(_0x5c6d4a[_0x3c4e66][_0x423d("0x3e")]=document[_0x423d("0x1b1")]("http://www.w3.org/2000/svg","polyline"),_0x3b7eb8.parentNode[_0x423d("0x8a")](_0x5c6d4a[_0x3c4e66][_0x423d("0x3e")]),_0x5c6d4a[_0x3c4e66][_0x423d("0x3e")][_0x423d("0x122")](null,_0x423d("0x17c"),_0x423d("0x1b6")),_0x54892a=_0x3b7eb8.getAttributeNS(null,_0x423d("0x14")),null!=_0x54892a&&_0x5c6d4a[_0x3c4e66][_0x423d("0x3e")].setAttributeNS(null,"transform",_0x54892a),null!=_0x3b7eb8[_0x423d("0x17c")]&&(""!=_0x3b7eb8[_0x423d("0x17c")].strokeWidth&&(_0x5c6d4a[_0x3c4e66][_0x423d("0x3e")][_0x423d("0x17c")][_0x423d("0x1dc")]=_0x3b7eb8[_0x423d("0x17c")].strokeWidth),""!=_0x3b7eb8[_0x423d("0x17c")].stroke&&(_0x5c6d4a[_0x3c4e66].grafico[_0x423d("0x17c")][_0x423d("0xa0")]=_0x3b7eb8[_0x423d("0x17c")][_0x423d("0xa0")])),_0x134107=_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")][_0x423d("0x18d")]("|"),_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]=_0x134107[0],void 0!==_0x134107[1]&&""!=_0x134107[1].trim()&&_0x5c6d4a[_0x3c4e66][_0x423d("0x3e")][_0x423d("0x122")](null,_0x423d("0x17c"),_0x134107[1]),_0x5c6d4a[_0x3c4e66][_0x423d("0x93")]=[],_0x5c6d4a[_0x3c4e66][_0x423d("0x1d7")]=[],_0x5c6d4a[_0x3c4e66].bb=_0x3b7eb8[_0x423d("0x85")](),_0x5c6d4a[_0x3c4e66].bb[_0x423d("0x32a")]=_0x5c6d4a[_0x3c4e66].bb.x,_0x5c6d4a[_0x3c4e66].bb[_0x423d("0x150")]=_0x5c6d4a[_0x3c4e66].bb.x+_0x5c6d4a[_0x3c4e66].bb.width,_0x5c6d4a[_0x3c4e66].bb[_0x423d("0xf8")]=_0x5c6d4a[_0x3c4e66].bb.y,_0x5c6d4a[_0x3c4e66].bb[_0x423d("0x2a0")]=_0x5c6d4a[_0x3c4e66].bb.y+_0x5c6d4a[_0x3c4e66].bb[_0x423d("0x132")],_0x3c4029=WebSAGE[_0x423d("0x2")](_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]),void 0===_0x3b7eb8[_0x423d("0x1e")]&&null==_0x3b7eb8[_0x423d("0x286")]&&(WebSAGE.tooltipRelac(_0x3b7eb8,_0x3c4029),null!=_0x3b7eb8[_0x423d("0x17c")]&&(_0x3b7eb8[_0x423d("0x17c")][_0x423d("0x50")]="pointer")),_0x5c6d4a[_0x3c4e66][_0x423d("0x247")]>0)_0x5c6d4a[_0x3c4e66].dataini=(new Date)[_0x423d("0x1d0")]()-1e3*Math.abs(_0x5c6d4a[_0x3c4e66][_0x423d("0x247")]),_0x1cf62d=_0x423d("0x89")+_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]+"&U="+_0x5c6d4a[_0x3c4e66][_0x423d("0x216")]/1e3+_0x423d("0x156")+_0x5c6d4a[_0x3c4e66].x+_0x423d("0x24a")+_0x423d("0x8f")+WebSAGE.InkSage.length+",'"+_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]+_0x423d("0x33e")+'" );';else{var _0x372da0=new Date;_0x5c6d4a[_0x3c4e66][_0x423d("0x216")]=_0x372da0.getTime()-_0x372da0[_0x423d("0x1d0")]()%(1e3*Math[_0x423d("0x284")](_0x5c6d4a[_0x3c4e66][_0x423d("0x247")]))+60*_0x372da0[_0x423d("0x2ac")]()*1e3%(1e3*Math[_0x423d("0x284")](_0x5c6d4a[_0x3c4e66][_0x423d("0x247")])),_0x5c6d4a[_0x3c4e66][_0x423d("0x27f")]=_0x5c6d4a[_0x3c4e66][_0x423d("0x216")]+Math.abs(1e3*_0x5c6d4a[_0x3c4e66][_0x423d("0x247")]),_0x1cf62d='$.getScript( WebSAGE.g_timePntServer + "?P='+_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]+"&U="+_0x5c6d4a[_0x3c4e66].dataini/1e3+_0x423d("0x156")+_0x5c6d4a[_0x3c4e66].x+"&F=S"+_0x423d("0x8f")+WebSAGE[_0x423d("0x81")][_0x423d("0x1d3")]+",'"+_0x5c6d4a[_0x3c4e66].tag+_0x423d("0x33e")+'"'+_0x423d("0x1b8")}WebSAGE[_0x423d("0x46")]=WebSAGE.g_timeshift+2e3}break;case _0x423d("0x123"):null===_0x3b7eb8[_0x423d("0x2e")](null,"transform")?_0x5c6d4a[_0x3c4e66][_0x423d("0x183")]="":_0x5c6d4a[_0x3c4e66].inittransform=_0x3b7eb8[_0x423d("0x2e")](null,_0x423d("0x14"));break;case"tooltips":for(_0x1bf200="",_0x30fba9=0;_0x30fba9<_0x5c6d4a[_0x3c4e66][_0x423d("0x262")].length;_0x30fba9++)_0x30fba9>0&&(_0x1bf200+="\n"),_0x1bf200+=_0x5c6d4a[_0x3c4e66][_0x423d("0x262")][_0x30fba9];_0x113343=document[_0x423d("0x1b1")](_0x423d("0x332"),"title"),_0x155896=document[_0x423d("0x283")](_0x1bf200),_0x113343.appendChild(_0x155896),_0x3b7eb8[_0x423d("0x8a")](_0x113343),_0x3b7eb8[_0x423d("0x244")]=1,-1!==_0x1bf200.indexOf(_0x423d("0x2e1"))&&(_0x5c6d4a[_0x3c4e66][_0x423d("0xa")]=1,_0x5c6d4a[_0x3c4e66][_0x423d("0x73")]=_0x113343,_0x5c6d4a[_0x3c4e66][_0x423d("0x2c0")]=_0x1bf200);break;case _0x423d("0xf5"):for(null===_0x3b7eb8[_0x423d("0x2e")](null,_0x423d("0x14"))?_0x5c6d4a[_0x3c4e66].inittransform="":_0x5c6d4a[_0x3c4e66][_0x423d("0x183")]=_0x3b7eb8[_0x423d("0x2e")](null,_0x423d("0x14")),_0x5c6d4a[_0x3c4e66][_0x423d("0x1eb")]=parseFloat(_0x5c6d4a[_0x3c4e66].min),_0x5c6d4a[_0x3c4e66][_0x423d("0x131")]=parseFloat(_0x5c6d4a[_0x3c4e66][_0x423d("0x131")]),_0x3474d0=void 0,_0x31ab14=SVGDoc[_0x423d("0xb9")]("use"),_0xbbfb80=0;_0xbbfb80<_0x31ab14.length;_0xbbfb80++)if(_0x31ab14.item(_0xbbfb80)[_0x423d("0x2e")](_0x423d("0x32e"),"href")=="#"+_0x3b7eb8[_0x423d("0x2e")](null,"id")){_0x3474d0=_0x31ab14[_0x423d("0x1fb")](_0xbbfb80),_0x5c6d4a[_0x3c4e66][_0x423d("0x51")]=_0x3474d0;break}if(null!=_0x3474d0){_0x3474d0[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e");var _0x4c8520=_0x3474d0[_0x423d("0x2e")](null,_0x423d("0x14")),_0x122278=_0x4c8520[_0x423d("0xcd")]("("),_0x27b558=_0x4c8520[_0x423d("0xcd")](",");-1===_0x27b558&&(_0x27b558=_0x4c8520[_0x423d("0xcd")](" "));var _0x87b89c=_0x4c8520[_0x423d("0xcd")](")");-1==_0x27b558&&(_0x27b558=_0x87b89c),_0x5c6d4a[_0x3c4e66][_0x423d("0x210")]=parseFloat(_0x4c8520.substring(_0x122278+1,_0x27b558))||0,_0x5c6d4a[_0x3c4e66][_0x423d("0x1fc")]=parseFloat(_0x4c8520[_0x423d("0xbf")](_0x27b558+1,_0x87b89c))||0}break;case _0x423d("0x2d4"):_0x57ca80=_0x3b7eb8[_0x423d("0x257")](),_0x3b7eb8[_0x423d("0x122")](null,_0x423d("0xbe")," window.WebSAGE.g_zpX = "+_0x57ca80[_0x423d("0x32a")]+_0x423d("0x32b")+_0x57ca80.top+_0x423d("0x34f")+2*_0x57ca80.width+_0x423d("0x15c")+2*_0x57ca80[_0x423d("0x132")]+_0x423d("0x13d"));break;case _0x423d("0x269"):for(_0xbbfb80=0;_0xbbfb80<_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0x423d("0x1d3")];_0xbbfb80++)switch(_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0xbbfb80][_0x423d("0x293")]){case"mouseup":case"mousedown":case _0x423d("0x125"):case _0x423d("0x6b"):case _0x423d("0x6e"):case _0x423d("0x2fa"):_0x3b7eb8.$W=$W,_0x3b7eb8[_0x423d("0x122")](null,"on"+_0x5c6d4a[_0x3c4e66].list[_0xbbfb80].evt,_0x423d("0x2d8")+_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0xbbfb80].param),_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0xbbfb80][_0x423d("0x293")].indexOf(_0x423d("0x323"))>=0&&void 0===_0x3b7eb8[_0x423d("0x1e")]&&null!==_0x3b7eb8[_0x423d("0x17c")]&&(_0x3b7eb8[_0x423d("0x17c")][_0x423d("0x50")]="pointer");break;case _0x423d("0x2f9"):try{function _0x3dd3bf(_0x4808a1){var _0x3a48b6=null,_0x130ec3=null;return eval(_0x4808a1)}_0x3dd3bf('var thisobj=document.getElementById("'+_0x3b7eb8.id+_0x423d("0x33")+_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0xbbfb80][_0x423d("0x262")])}catch(e){$(_0x423d("0xce")).text(e[_0x423d("0x306")]+": "+e[_0x423d("0x31c")]+_0x423d("0x119")),document[_0x423d("0xfb")](_0x423d("0xb6"))[_0x423d("0x326")]=e[_0x423d("0x1f4")]}break;case _0x423d("0x27b"):break;case"vega":case _0x423d("0x328"):case _0x423d("0xd5"):_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]="#"+_0x5c6d4a[_0x3c4e66].list[_0xbbfb80][_0x423d("0x293")],_0x5c6d4a[_0x3c4e66][_0x423d("0x11a")]=_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0xbbfb80][_0x423d("0x262")][_0x423d("0x18d")]("\n")[0],_0x5c6d4a[_0x3c4e66][_0x423d("0xd6")]=_0x5c6d4a[_0x3c4e66].list[_0xbbfb80][_0x423d("0x262")][_0x423d("0xbf")](_0x5c6d4a[_0x3c4e66].list[_0xbbfb80].param.indexOf("\n")+1),WebSAGE.SetIniExtended(_0x5c6d4a,_0x3c4e66,_0x3b7eb8);break;case _0x423d("0xa5"):case _0x423d("0x2db"):_0x5c6d4a[_0x3c4e66][_0x423d("0x9a")]="#"+_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0xbbfb80][_0x423d("0x293")],_0x5c6d4a[_0x3c4e66][_0x423d("0xd6")]=_0x5c6d4a[_0x3c4e66][_0x423d("0x1a7")][_0xbbfb80][_0x423d("0x262")],WebSAGE[_0x423d("0x222")](_0x5c6d4a,_0x3c4e66,_0x3b7eb8)}break;case _0x423d("0x1ea"):case _0x423d("0x51"):}WebSAGE[_0x423d("0x81")][_0x423d("0x1c5")](_0x5c6d4a[_0x3c4e66])}}},preprocessaTela:function(){var e,t;function n(e,t){var n="";t||(t=6);for(var r=0;r<e[_0x423d("0x1d3")];++r)n+=String[_0x423d("0x84")](t^e[_0x423d("0x30")](r));return n}if(WebSAGE[_0x423d("0x81")]=[],null!==SVGDoc){for(e=SVGDoc[_0x423d("0xb9")]("g"),t=0;t<e[_0x423d("0x1d3")];t++)WebSAGE.le_inkscapeSAGETags(e[_0x423d("0x1fb")](t));e=SVGDoc[_0x423d("0xb9")](_0x423d("0x1ea"));try{for(t=0;t<e.length;t++)WebSAGE[_0x423d("0x200")](e.item(t))}catch(e){}var r;for(e=[],r=SVGDoc[_0x423d("0xb9")](_0x423d("0x214")),t=0;t<r.length;t++)e[_0x423d("0x1c5")](r.item(t));for(r=SVGDoc[_0x423d("0xb9")](_0x423d("0x277")),t=0;t<r.length;t++)e.push(r.item(t));for(r=SVGDoc[_0x423d("0xb9")](_0x423d("0x153")),t=0;t<r[_0x423d("0x1d3")];t++)e[_0x423d("0x1c5")](r[_0x423d("0x1fb")](t));for(r=SVGDoc.getElementsByTagName("image"),t=0;t<r.length;t++)e[_0x423d("0x1c5")](r[_0x423d("0x1fb")](t));for(r=SVGDoc[_0x423d("0xb9")](_0x423d("0x22a")),t=0;t<r[_0x423d("0x1d3")];t++)e[_0x423d("0x1c5")](r[_0x423d("0x1fb")](t));for(r=SVGDoc.getElementsByTagName(_0x423d("0x289")),t=0;t<r[_0x423d("0x1d3")];t++)e[_0x423d("0x1c5")](r[_0x423d("0x1fb")](t));for(r=SVGDoc[_0x423d("0xb9")](_0x423d("0x16e")),t=0;t<r[_0x423d("0x1d3")];t++)e[_0x423d("0x1c5")](r.item(t));for(r=SVGDoc.getElementsByTagName("polygon"),t=0;t<r[_0x423d("0x1d3")];t++)e[_0x423d("0x1c5")](r.item(t));for(r=SVGDoc[_0x423d("0xb9")]("use"),t=0;t<r[_0x423d("0x1d3")];t++)e[_0x423d("0x1c5")](r.item(t));for(t=0;t<e[_0x423d("0x1d3")];t++)if("g"!=e[t][_0x423d("0x1e2")]&&"text"!=e[t][_0x423d("0x1e2")])try{WebSAGE[_0x423d("0x200")](e[t])}catch(e){}if(10+WebSAGE.InkSage[_0x423d("0x1d3")]>45)if(_$TSA(LT+n(_0x423d("0x1bf")))!==VK){var i=document[_0x423d("0x2e8")]("div");i[_0x423d("0x30c")]=n(_0x423d("0xe3")),i.id="dvg1223gkhkk11",null===document[_0x423d("0xfb")](i.id)&&document[_0x423d("0xfb")](_0x423d("0x70"))[_0x423d("0x254")](i,document.getElementById("svgdiv"))}else document[_0x423d("0xfb")]("dvg1223gkhkk11")[_0x423d("0x128")]=""}},callServer:function(){},getServerStatus:function(){},cbf_Status:function(){},blinkSeAlarmado:function(e,t){},showValsSVG:function(){clearTimeout(WebSAGE[_0x423d("0x230")]),document[_0x423d("0x1c3")]?WebSAGE.drawSVG():requestAnimationFrame(WebSAGE[_0x423d("0x6a")])},drawSVG:function(){var _0x3c1b58,_0x457805,_0x263e7,_0x17037c,_0x57606e,_0xd1e542,_0x3781f6,_0x409175,_0x3c4cc5,_0x415805,_0x4b0e13,_0x12b50b,_0x496852,_0x37c3e3,_0x234acf,_0xcb1ce6=!0,_0x29c9c2=!0,_0x2c3496,_0x3dddb7,_0x36d6ec,_0x90ee4f;WebSAGE[_0x423d("0x10")]=Sha1Ana,WebSAGE[_0x423d("0x33b")]=Sha1Dig,1==WebSAGE[_0x423d("0x13a")]&&WebSAGE[_0x423d("0x3b")](),WebSAGE[_0x423d("0x342")]=Data;try{SVGDoc=document.getElementById(_0x423d("0xff"))[_0x423d("0x41")][0]}catch(e){return}if(_0xcb1ce6||_0x29c9c2){for(_0x37c3e3=0;_0x37c3e3<WebSAGE[_0x423d("0x81")].length;_0x37c3e3++)if(typeof WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x18a")]==_0x423d("0x197")&&(null!=WebSAGE.InkSage[_0x37c3e3][_0x423d("0x9a")]&&(_0x36d6ec=WebSAGE[_0x423d("0x81")][_0x37c3e3].tag,_0x90ee4f=WebSAGE[_0x423d("0x9d")](_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")])),"????"!=_0x90ee4f||WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x29c")]===_0x423d("0x2b2")||"set"===WebSAGE[_0x423d("0x81")][_0x37c3e3].attr||WebSAGE.InkSage[_0x37c3e3].attr===_0x423d("0x269")))switch(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x29c")]){case"set":switch(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x9a")]){case _0x423d("0x8e"):try{function _0x504477(_0x16a1b6){var _0x59289a,_0x326423,_0x339351,_0x2ae02f,_0x3d1b66,_0x13cba3=null;return eval(_0x16a1b6)}_0x504477('var thisobj=document.getElementById("'+WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")].id+_0x423d("0x33")+WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x11a")])}catch(e){}break;case _0x423d("0x321"):for(_0x234acf=0;_0x234acf<WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0xb3")].length;_0x234acf++)WebSAGE[_0x423d("0x81")][_0x37c3e3].parent[_0x423d("0x2c6")][0][_0x423d("0x2bb")][_0x234acf][_0x423d("0x1d4")]=WebSAGE[_0x423d("0x9d")](WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")].pnts[_0x234acf],WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")]),WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x2c6")][0].axes[_0x234acf][_0x423d("0x295")]=BAYS[WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0xb3")][_0x234acf]]||"";WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x28d")][_0x423d("0xc9")](WebSAGE[_0x423d("0x81")][_0x37c3e3].parent[_0x423d("0x2c6")])[_0x423d("0x192")](WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")].chart);break;default:WebSAGE.SetExeExtended(_0x37c3e3)}break;case _0x423d("0xd2"):if(1==WebSAGE.InkSage[_0x37c3e3][_0x423d("0x1bb")]&&WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x31b")]===_0x423d("0x214")){var _0x191926,_0x5d7380,_0x510133,_0x4935c5,_0x3dfc85="",_0x2ccadb=new Date;if(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x137")](_0x423d("0x93"))&&typeof WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x93")][_0x36d6ec]==_0x423d("0x197")&&(WebSAGE[_0x423d("0x81")][_0x37c3e3].valores[_0x36d6ec]=[],WebSAGE.InkSage[_0x37c3e3][_0x423d("0x1d7")][_0x36d6ec]=[]),WebSAGE.InkSage[_0x37c3e3][_0x423d("0x137")](_0x423d("0x93"))&&void 0!==WebSAGE[_0x423d("0x81")][_0x37c3e3].valores[_0x36d6ec]&&WebSAGE.InkSage[_0x37c3e3][_0x423d("0x93")][_0x36d6ec].length>0&&_0x90ee4f==WebSAGE.InkSage[_0x37c3e3].valores[_0x36d6ec][WebSAGE[_0x423d("0x81")][_0x37c3e3].valores[_0x36d6ec][_0x423d("0x1d3")]-1]&&(_0x2ccadb[_0x423d("0x1d0")]()-WebSAGE.InkSage[_0x37c3e3].datas[WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1d7")][_0x36d6ec][_0x423d("0x1d3")]-1])/1e3<30)break;if(WebSAGE.InkSage[_0x37c3e3].hasOwnProperty(_0x423d("0x93"))&&typeof WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x93")][_0x36d6ec]!=_0x423d("0x197")){if(WebSAGE.InkSage[_0x37c3e3][_0x423d("0x93")][_0x36d6ec][_0x423d("0x1c5")](_0x90ee4f),WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1d7")][_0x36d6ec][_0x423d("0x1c5")](_0x2ccadb[_0x423d("0x1d0")]()),_0x415805=WebSAGE[_0x423d("0x81")][_0x37c3e3].bb,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x247")]>0)for(_0x191926=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x93")][_0x36d6ec].length-1;_0x191926>=0;_0x191926--){var _0x49b1fe=(_0x2ccadb[_0x423d("0x1d0")]()-WebSAGE.InkSage[_0x37c3e3][_0x423d("0x1d7")][_0x36d6ec][_0x191926])/1e3;_0x49b1fe>Math[_0x423d("0x284")](WebSAGE.InkSage[_0x37c3e3][_0x423d("0x247")])?(WebSAGE.InkSage[_0x37c3e3][_0x423d("0x93")][_0x36d6ec][_0x423d("0x120")](_0x191926,1),WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1d7")][_0x36d6ec][_0x423d("0x120")](_0x191926,1)):(_0x5d7380=_0x415805[_0x423d("0x150")]-parseFloat(_0x49b1fe/Math.abs(WebSAGE.InkSage[_0x37c3e3][_0x423d("0x247")])*_0x415805[_0x423d("0x247")]),_0x510133=_0x415805[_0x423d("0x2a0")]-parseFloat((WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x93")][_0x36d6ec][_0x191926]-WebSAGE[_0x423d("0x81")][_0x37c3e3].y)/WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x132")]*_0x415805[_0x423d("0x132")]),_0x510133>_0x415805.bottom&&(_0x510133=_0x415805[_0x423d("0x2a0")]),_0x510133<_0x415805[_0x423d("0xf8")]&&(_0x510133=_0x415805.top),_0x4935c5=0===_0x191926?"":",",_0x3dfc85=_0x3dfc85+_0x5d7380[_0x423d("0x25d")](3)+" "+_0x510133[_0x423d("0x25d")](3)+_0x4935c5)}else for(_0x191926=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x93")][_0x36d6ec].length-1;_0x191926>=0;_0x191926--){var _0x49b1fe=(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1d7")][_0x36d6ec][_0x191926]-WebSAGE[_0x423d("0x81")][_0x37c3e3].dataini)/1e3;if(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1d7")][_0x36d6ec][_0x191926]>WebSAGE.InkSage[_0x37c3e3][_0x423d("0x27f")]){WebSAGE[_0x423d("0x81")][_0x37c3e3].valores[_0x36d6ec]=[],WebSAGE[_0x423d("0x81")][_0x37c3e3].datas[_0x36d6ec]=[];var _0x5c6335=new Date;WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x216")]=_0x5c6335[_0x423d("0x1d0")]()-_0x5c6335[_0x423d("0x1d0")]()%(1e3*Math.abs(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x247")]))+60*_0x5c6335[_0x423d("0x2ac")]()*1e3%(1e3*Math[_0x423d("0x284")](WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x247")])),WebSAGE.InkSage[_0x37c3e3].datafim=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x216")]+Math.abs(1e3*WebSAGE.InkSage[_0x37c3e3][_0x423d("0x247")])}else _0x5d7380=_0x415805[_0x423d("0x32a")]+parseFloat(_0x49b1fe/Math.abs(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x247")])*_0x415805[_0x423d("0x247")]),_0x510133=_0x415805.bottom-parseFloat((WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x93")][_0x36d6ec][_0x191926]-WebSAGE[_0x423d("0x81")][_0x37c3e3].y)/WebSAGE[_0x423d("0x81")][_0x37c3e3].height*_0x415805.height),_0x510133>_0x415805.bottom&&(_0x510133=_0x415805[_0x423d("0x2a0")]),_0x510133<_0x415805[_0x423d("0xf8")]&&(_0x510133=_0x415805[_0x423d("0xf8")]),_0x4935c5=0===_0x191926?"":",",_0x3dfc85=_0x3dfc85+_0x5d7380.toFixed(3)+" "+_0x510133[_0x423d("0x25d")](3)+_0x4935c5}","===_0x3dfc85[_0x423d("0xe5")](_0x3dfc85[_0x423d("0x1d3")]-1)&&(_0x3dfc85=_0x3dfc85.substring(0,_0x3dfc85[_0x423d("0x1d3")]-1)),WebSAGE.InkSage[_0x37c3e3][_0x423d("0x3e")][_0x423d("0x122")](null,_0x423d("0x6f"),_0x3dfc85)}}break;case _0x423d("0xb2"):_0x3dddb7=void 0!==WebSAGE.InkSage[_0x37c3e3].txtOFFON?0===WebSAGE.valorTagueado(_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")])?WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xcb")][1]:WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xcb")][0]:WebSAGE[_0x423d("0x270")](WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x8c")],_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")]),_0x3dddb7!=WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0xca")][_0x423d("0x2f8")]&&(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].firstElementChild.textContent=_0x3dddb7,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x28f")]&&WebSAGE[_0x423d("0x30f")](WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].parentNode),WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x7e")]=WebSAGE[_0x423d("0x2a6")](_0x36d6ec)),WebSAGE[_0x423d("0x322")](_0x36d6ec,WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")]);break;case _0x423d("0x2b2"):var _0x2fa6da="",_0x358de5;for(_0x263e7="",_0x17037c="",_0x57606e="",_0xd1e542="",_0x36d6ec="",_0x90ee4f=0,_0x234acf=0;_0x234acf<WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x423d("0x1d3")];_0x234acf++)if(_0x36d6ec!==WebSAGE[_0x423d("0x81")][_0x37c3e3].list[_0x234acf][_0x423d("0x9a")]&&(_0x36d6ec=WebSAGE[_0x423d("0x81")][_0x37c3e3].list[_0x234acf][_0x423d("0x9a")],_0x90ee4f=WebSAGE[_0x423d("0x9d")](_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")])),_0x4b0e13=typeof WebSAGE[_0x423d("0x1f7")](_0x36d6ec)===_0x423d("0x197")?_0x90ee4f===_0x423d("0x1de")?160:32:WebSAGE.getFlags(_0x36d6ec),_0x2c3496=0==(32&_0x4b0e13),_0x90ee4f!==_0x423d("0x1de")){var _0x58be32,_0x1c80cb,_0x431fad;if(_0x1494eb=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf].data,_0x2c3496)_0x3dddb7=parseInt(_0x1494eb),(!isNaN(_0x3dddb7)&&(3&_0x4b0e13)>=_0x3dddb7||!isNaN(_0x3dddb7)&&(131&_0x4b0e13)>=(128|_0x3dddb7)||"a"===_0x1494eb&&256&_0x4b0e13||"f"===_0x1494eb&&128&_0x4b0e13)&&(_0x263e7=WebSAGE[_0x423d("0x81")][_0x37c3e3].list[_0x234acf][_0x423d("0x315")],_0x17037c=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0xed")],_0x2fa6da=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0x304")],_0x57606e=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0x48")],_0xd1e542=WebSAGE[_0x423d("0x81")][_0x37c3e3].list[_0x234acf][_0x423d("0x238")]);else if(_0x3dddb7=parseFloat(_0x1494eb),"n"===_0x1494eb&&2048&_0x4b0e13||"c"===_0x1494eb&&4096&_0x4b0e13||"a"===_0x1494eb&&256&_0x4b0e13||"f"===_0x1494eb&&128&_0x4b0e13||!isNaN(_0x3dddb7)&&_0x90ee4f>=_0x3dddb7)typeof WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf+1]!=_0x423d("0x197")?(_0x58be32=WebSAGE.InkSage[_0x37c3e3].list[_0x234acf+1][_0x423d("0x315")],"@"===_0x58be32[0]?(_0x58be32=_0x58be32[_0x423d("0xbf")](1),_0x1c80cb=WebSAGE[_0x423d("0x81")][_0x37c3e3].list[_0x234acf][_0x423d("0x315")],"@"===_0x1c80cb[0]&&(_0x1c80cb=_0x1c80cb.substring(1)),_0x431fad=parseFloat(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf+1].data),_0x263e7=chroma[_0x423d("0x2d7")](_0x1c80cb,_0x58be32,(_0x90ee4f-_0x3dddb7)/(_0x431fad-_0x3dddb7),"hsl")[_0x423d("0x39")]()):_0x263e7=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0x315")],_0x58be32=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf+1].cstroke,"@"===_0x58be32[0]?(_0x58be32=_0x58be32.substring(1),_0x1c80cb=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0xed")],"@"===_0x1c80cb[0]&&(_0x1c80cb=_0x1c80cb[_0x423d("0xbf")](1)),_0x431fad=parseFloat(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf+1][_0x423d("0x1b7")]),_0x17037c=chroma.mix(_0x1c80cb,_0x58be32,(_0x90ee4f-_0x3dddb7)/(_0x431fad-_0x3dddb7),_0x423d("0x349"))[_0x423d("0x39")]()):_0x17037c=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0xed")]):(_0x263e7=WebSAGE[_0x423d("0x81")][_0x37c3e3].list[_0x234acf][_0x423d("0x315")],"@"===_0x263e7[0]&&(_0x263e7=_0x263e7[_0x423d("0xbf")](1)),_0x17037c=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0xed")],"@"===_0x17037c[0]&&(_0x17037c=_0x17037c.substring(1))),_0x2fa6da=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0x304")],_0x57606e=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0x48")],_0xd1e542=WebSAGE.InkSage[_0x37c3e3][_0x423d("0x1a7")][_0x234acf].cattribval;WebSAGE[_0x423d("0x322")](_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3].parent)}if(typeof WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x55")]!==_0x423d("0x197")&&WebSAGE[_0x423d("0x81")][_0x37c3e3].parent[_0x423d("0x55")]&&RemoveAnimate(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")]),""!==_0x57606e)WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x122")](null,_0x57606e,_0xd1e542);else if(""!==_0x2fa6da){WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].temAnimacao=1,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].style[_0x423d("0x2ce")]=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x177")],WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x17c")].stroke=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x31e")];try{function _0x6b40e3(_0x4e9748){var _0xa50ac1,_0x358d52,_0x5ed341,_0x3b6d8d,_0x4b08ea,_0x318dc9=null,_0x47aefb,_0x1a9631,_0x3b8dca,_0x38c01a,_0xa7de2c,_0x53a8af,_0x62fd95=null;return eval(_0x4e9748)}_0x6b40e3(_0x423d("0xb0")+WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")].id+_0x423d("0x33")+_0x2fa6da)}catch(e){}}else WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x17c")][_0x423d("0x2ce")]=""!==_0x263e7?_0x263e7:WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x177")],""!==_0x17037c?WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x17c")].stroke=_0x17037c:WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].style[_0x423d("0xa0")]=WebSAGE[_0x423d("0x81")][_0x37c3e3].initstroke;WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x28f")]&&WebSAGE[_0x423d("0x30f")](WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x211")]),99999==_0x36d6ec&&(WebSAGE[_0x423d("0x81")][_0x37c3e3].xdone=1);break;case _0x423d("0x35"):var _0x473296=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x32c")]*(_0x90ee4f-WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1eb")])/(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x131")]-WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1eb")]);_0x473296<0&&(_0x473296=0),_0x473296>WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x32c")]&&(_0x473296=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x32c")]),WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].setAttributeNS(null,_0x423d("0x132"),_0x473296),WebSAGE[_0x423d("0x322")](_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")]);break;case _0x423d("0x0"):WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x17c")][_0x423d("0xf6")]=(_0x90ee4f-WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1eb")])/(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x131")]-WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1eb")]),void 0===WebSAGE[_0x423d("0x1f7")](_0x36d6ec)?WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x2de")]=!1:0==(32&WebSAGE.getFlags(_0x36d6ec))&&1==WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x17c")][_0x423d("0xf6")]?WebSAGE[_0x423d("0x81")][_0x37c3e3].parent.allowblink=!0:WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x2de")]=!1,WebSAGE[_0x423d("0x322")](_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3].parent);break;case _0x423d("0x123"):_0x415805=WebSAGE[_0x423d("0x81")][_0x37c3e3].parent[_0x423d("0x85")]();var _0x27366d=parseFloat(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x2e")](null,"inkscape:transform-center-x")||WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x2e")](_0x423d("0x2c"),_0x423d("0x271"))),_0x56b99b=parseFloat(WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x2e")](null,_0x423d("0x53"))||WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x2e")](_0x423d("0x2c"),_0x423d("0x327")));isNaN(_0x27366d)&&(_0x27366d=0),isNaN(_0x56b99b)&&(_0x56b99b=0);var _0x5d42a3=_0x415805.x+_0x415805[_0x423d("0x247")]/2+_0x27366d,_0x5bbf9a=_0x415805.y+_0x415805[_0x423d("0x132")]/2-_0x56b99b,_0x271e4a=(_0x90ee4f-WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1eb")])/(WebSAGE.InkSage[_0x37c3e3][_0x423d("0x131")]-WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1eb")])*360;WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x122")](null,"transform",WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x183")]+_0x423d("0x2ff")+_0x271e4a+" "+_0x5d42a3+" "+_0x5bbf9a+") "),WebSAGE[_0x423d("0x322")](_0x36d6ec,WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")]);break;case"tooltips":if(typeof WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa")]!==_0x423d("0x197")&&1===WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa")]){var _0x2307df,_0x4ecf82,_0x4304b3,_0xd8bf76;_0xd8bf76=WebSAGE.InkSage[_0x37c3e3][_0x423d("0x2c0")];do{if(_0x2307df=_0xd8bf76[_0x423d("0xcd")]("!EVAL",0),_0x4ecf82=_0xd8bf76[_0x423d("0xcd")](_0x423d("0x102"),1),-1===_0x4ecf82&&(_0x4ecf82=9999999),-1!==_0x2307df){function _0x11f697(_0x3279be){var _0x266b2d,_0x1d06be,_0xdf2680,_0x4d24ec,_0x4f1d47,_0x57caa2=null,_0x56074d,_0x1ad867,_0x357cec,_0x40d9d6=null;return eval(_0x3279be)}_0x4304b3=_0x11f697(_0xd8bf76[_0x423d("0xbf")](_0x2307df+5,_0x4ecf82)),NaN!==Number(_0x4304b3)&&(_0x4304b3=printf("%1.3f",_0x4304b3)),_0xd8bf76=_0xd8bf76.substring(0,_0x2307df)+_0x4304b3+_0xd8bf76.substring(_0x4ecf82+4)}}while(-1!==_0x2307df);WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x73")][_0x423d("0x2f8")]=_0xd8bf76}break;case _0x423d("0xf5"):_0x90ee4f>WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x131")]&&(_0x90ee4f=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x131")]),_0x90ee4f<WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1eb")]&&(_0x90ee4f=WebSAGE[_0x423d("0x81")][_0x37c3e3].min);var _0x19d66b=(_0x90ee4f-WebSAGE.InkSage[_0x37c3e3][_0x423d("0x1eb")])/(WebSAGE[_0x423d("0x81")][_0x37c3e3].max-WebSAGE.InkSage[_0x37c3e3][_0x423d("0x1eb")]);WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")][_0x423d("0x122")](null,"transform",WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x183")]+_0x423d("0x72")+_0x19d66b*WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x210")]+" "+_0x19d66b*WebSAGE.InkSage[_0x37c3e3].rangey+") "),WebSAGE[_0x423d("0x322")](_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")]);break;case _0x423d("0x1ea"):_0x4b0e13=typeof WebSAGE[_0x423d("0x1f7")](_0x36d6ec)==_0x423d("0x197")?_0x90ee4f:WebSAGE[_0x423d("0x1f7")](_0x36d6ec),_0x2c3496=0==(32&_0x4b0e13);var _0x12f4de="",_0x1494eb;for(_0x234acf=0;_0x234acf<WebSAGE[_0x423d("0x81")][_0x37c3e3].map[_0x423d("0x1d3")];_0x234acf++){var _0x19b0b7=WebSAGE.InkSage[_0x37c3e3][_0x423d("0x10d")][_0x234acf].indexOf("=");_0x1494eb=WebSAGE.InkSage[_0x37c3e3][_0x423d("0x10d")][_0x234acf].substring(0,1),_0x2c3496?(_0x3dddb7=parseInt(WebSAGE[_0x423d("0x81")][_0x37c3e3].map[_0x234acf][_0x423d("0xbf")](0,_0x19b0b7)),((3&_0x4b0e13)>=_0x3dddb7||(131&_0x4b0e13)>=(128|_0x3dddb7)||"a"===_0x1494eb&&256&_0x4b0e13||"f"===_0x1494eb&&128&_0x4b0e13)&&(_0x12f4de=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x10d")][_0x234acf][_0x423d("0xbf")](_0x19b0b7+1))):(_0x3dddb7=parseFloat(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x10d")][_0x234acf][_0x423d("0xbf")](0,_0x19b0b7)),(_0x90ee4f>=_0x3dddb7||"a"===_0x1494eb&&256&_0x4b0e13||"f"===_0x1494eb&&128&_0x4b0e13)&&(_0x12f4de=WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x10d")][_0x234acf][_0x423d("0xbf")](_0x19b0b7+1)))}_0x12f4de!=WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x2f8")]&&(WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].firstChild&&WebSAGE.InkSage[_0x37c3e3][_0x423d("0xa9")][_0x423d("0x80")][_0x423d("0x31b")]===_0x423d("0x18b")?WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].firstChild[_0x423d("0x2f8")]=_0x12f4de:WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].textContent=_0x12f4de),WebSAGE.blinkSeAlarmado(_0x36d6ec,WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")]);break;case _0x423d("0x51"):break;case"script":for(_0x234acf=0;_0x234acf<WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0x1a7")][_0x423d("0x1d3")];_0x234acf++)switch(WebSAGE.InkSage[_0x37c3e3][_0x423d("0x1a7")][_0x234acf][_0x423d("0x293")]){case _0x423d("0x27b"):try{function _0x2eb8c4(_0x2f2fdf){var _0x384019,_0x41bc85,_0x5be613,_0x27436b,_0x451669,_0x54e1b2=null;return eval(_0x2f2fdf)}_0x2eb8c4(_0x423d("0xb0")+WebSAGE[_0x423d("0x81")][_0x37c3e3][_0x423d("0xa9")].id+_0x423d("0x33")+WebSAGE[_0x423d("0x81")][_0x37c3e3].list[_0x234acf].param)}catch(e){$(_0x423d("0xce"))[_0x423d("0x1ea")](e[_0x423d("0x306")]+": "+e[_0x423d("0x31c")]+_0x423d("0x119")),document[_0x423d("0xfb")](_0x423d("0xb6"))[_0x423d("0x326")]=e[_0x423d("0x1f4")]}break;case _0x423d("0x19a"):case"vega-lite":case _0x423d("0xa5"):case _0x423d("0xd5"):case _0x423d("0x2db"):WebSAGE[_0x423d("0x24b")](_0x37c3e3)}}void 0!==xPlain&&BrowserDetect[_0x423d("0x32f")]===_0x423d("0x2b9")&&(setTimeout((function(){var e=document[_0x423d("0x165")](_0x423d("0x111"));e[_0x423d("0x3")](_0x423d("0x3a"),!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,SVGDoc),void 0!==SVGDoc&&SVGDoc[_0x423d("0x140")](e)}),100),setTimeout((function(){var e=document.createEvent("MouseEvents");e[_0x423d("0x3")](_0x423d("0x317"),!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),void 0!==SVGDoc&&SVGDoc[_0x423d("0x140")](e)}),110))}try{WebSAGE[_0x423d("0xa6")]!==NPTO&&0!=NPTO&&(WebSAGE[_0x423d("0xa6")]&&typeof WebSAGE[_0x423d("0xa6")][_0x423d("0x268")]==_0x423d("0x58")&&null!==WebSAGE[_0x423d("0xa6")][_0x423d("0x268")]&&!WebSAGE.g_win_cmd[_0x423d("0x268")].closed||(WebSAGE[_0x423d("0x330")](NPTO),NPTO=0))}catch(e){WebSAGE[_0x423d("0x330")](NPTO),NPTO=0}$(_0x423d("0x17f"))[_0x423d("0x1ea")](Data),WebSAGE[_0x423d("0x26d")]=0,0==document[_0x423d("0xfb")](_0x423d("0xff"))[_0x423d("0x17c")][_0x423d("0xf6")]&&(document[_0x423d("0xfb")]("svgdiv").style.opacity=1)},doSilenciaBeep:function(){document.getElementById("SILENCIA_ID").style[_0x423d("0x21f")]=_0x423d("0x9e"),WebSAGE[_0x423d("0x305")](WebSAGE[_0x423d("0x1ad")]+"?Z=1")},produzDestaq:function(e,t){},produzEtiq:function(e,t){},visibEtiq:function(e){},produzRelac:function(e,t){},mostraescRelac:function(){},falhaTudo:function(){for(var e in F)F[e]|=128;Sha1Ana="",Sha1Dig="",WebSAGE[_0x423d("0x64")]()},hideShowBar:function(){document[_0x423d("0xfb")](_0x423d("0x4b"))[_0x423d("0x17c")][_0x423d("0x21f")]==_0x423d("0x9e")&&("0px"==document[_0x423d("0xfb")](_0x423d("0xff"))[_0x423d("0x17c")].top?(document.getElementById(_0x423d("0x259"))[_0x423d("0x17c")][_0x423d("0x21f")]="",$(_0x423d("0x2f0"))[_0x423d("0x336")]({top:_0x423d("0x22d")}),$(_0x423d("0x9"))[_0x423d("0x336")]({top:_0x423d("0x310")}),$("#almbox").animate({top:"0px"})):($(_0x423d("0x2f0")).animate({top:_0x423d("0x77")}),$(_0x423d("0x9")).animate({top:_0x423d("0x22d")}),$(_0x423d("0x29e"))[_0x423d("0x336")]({top:"-40px"})))},zoomPan:function(e,t){if(null!==SVGDoc){switch(void 0===t&&(t=1),e){case 0:case 2:WebSAGE[_0x423d("0x47")]=.9*WebSAGE.g_zpW,WebSAGE[_0x423d("0xa1")]=.9*WebSAGE[_0x423d("0xa1")],WebSAGE[_0x423d("0x1a")]=WebSAGE[_0x423d("0x1a")]+1;break;case 1:WebSAGE[_0x423d("0x27d")]=WebSAGE[_0x423d("0x27d")]+20*t*WebSAGE[_0x423d("0x47")]/ScreenViewer_SVGMaxWidth;break;case 3:WebSAGE[_0x423d("0x1a")]=WebSAGE[_0x423d("0x1a")]+30*t*WebSAGE[_0x423d("0x47")]/ScreenViewer_SVGMaxWidth;break;case 4:WebSAGE.g_zpX=0,WebSAGE.g_zpY=0,WebSAGE[_0x423d("0x47")]=ScreenViewer_SVGMaxWidth,WebSAGE[_0x423d("0xa1")]=ScreenViewer_SVGMaxHeight;break;case 5:WebSAGE[_0x423d("0x1a")]=WebSAGE.g_zpX-30*t*WebSAGE.g_zpW/ScreenViewer_SVGMaxWidth;break;case 6:case 8:WebSAGE[_0x423d("0x47")]=1.1*WebSAGE[_0x423d("0x47")],WebSAGE.g_zpH=1.1*WebSAGE[_0x423d("0xa1")],WebSAGE[_0x423d("0x1a")]=WebSAGE[_0x423d("0x1a")]+1;break;case 7:WebSAGE[_0x423d("0x27d")]=WebSAGE[_0x423d("0x27d")]-20*t*WebSAGE[_0x423d("0x47")]/ScreenViewer_SVGMaxWidth;break;case 9:WebSAGE[_0x423d("0x47")]=1.3*WebSAGE.g_zpW,WebSAGE[_0x423d("0xa1")]=1.3*WebSAGE.g_zpH,WebSAGE[_0x423d("0x1a")]=WebSAGE[_0x423d("0x1a")]+1}SVGDoc[_0x423d("0x122")](null,_0x423d("0x267"),WebSAGE.g_zpX+" "+WebSAGE[_0x423d("0x27d")]+" "+WebSAGE[_0x423d("0x47")]+" "+WebSAGE.g_zpH)}},anteTela:function(){WebSAGE[_0x423d("0x24")][_0x423d("0x1cb")]>1&&(WebSAGE[_0x423d("0x24")][_0x423d("0x1cb")]--,document[_0x423d("0x29")][_0x423d("0x25c")]())},proxTela:function(){WebSAGE[_0x423d("0x24")].selectedIndex<WebSAGE[_0x423d("0x24")][_0x423d("0x1d3")]-1&&(WebSAGE[_0x423d("0x24")].selectedIndex++,document[_0x423d("0x29")][_0x423d("0x25c")]())},playSlideshow:function(){WebSAGE[_0x423d("0x24")].selectedIndex<WebSAGE[_0x423d("0x24")].length-1?WebSAGE.g_seltela[_0x423d("0x1cb")]++:WebSAGE[_0x423d("0x24")][_0x423d("0x1cb")]=1,document[_0x423d("0xfb")]("PLAY").value=1,document[_0x423d("0xfb")](_0x423d("0x343"))[_0x423d("0x306")]="PLAY",document[_0x423d("0x29")][_0x423d("0x25c")]()},pauseSlideshow:function(){ScreenViewer_EnableTimeMachine&&$(_0x423d("0x4d"))[_0x423d("0x12e")](_0x423d("0x21f"),""),$(_0x423d("0x97"))[_0x423d("0x12e")](_0x423d("0x21f"),""),$(_0x423d("0x45"))[_0x423d("0x12e")](_0x423d("0x21f"),_0x423d("0x9e")),document.getElementById(_0x423d("0x343")).value=0,clearTimeout(WebSAGE.g_timeoutSlideID)},reload:function(e){if(e!==_0x423d("0xef"))if(0==NPTO){1==document.getElementById(_0x423d("0x343")).value&&(document.getElementById(_0x423d("0x343")).name=_0x423d("0x343")),""!=tela&&(document[_0x423d("0xfb")]("PTELA")[_0x423d("0x1d4")]=tela,document[_0x423d("0xfb")](_0x423d("0x23c"))[_0x423d("0x306")]="PTELA"),0!=WebSAGE.g_zpX&&(document[_0x423d("0xfb")]("ZPX")[_0x423d("0x1d4")]=WebSAGE[_0x423d("0x1a")],document[_0x423d("0xfb")](_0x423d("0x335"))[_0x423d("0x306")]="ZPX"),0!=WebSAGE[_0x423d("0x27d")]&&(document[_0x423d("0xfb")]("ZPY")[_0x423d("0x1d4")]=WebSAGE[_0x423d("0x27d")],document.getElementById("ZPY")[_0x423d("0x306")]=_0x423d("0x22c")),0!=WebSAGE.g_zpW&&(document[_0x423d("0xfb")](_0x423d("0x3c"))[_0x423d("0x1d4")]=WebSAGE.g_zpW,document[_0x423d("0xfb")](_0x423d("0x3c"))[_0x423d("0x306")]=_0x423d("0x3c")),0!=WebSAGE[_0x423d("0xa1")]&&(document[_0x423d("0xfb")](_0x423d("0x2f1"))[_0x423d("0x1d4")]=WebSAGE.g_zpH,document[_0x423d("0xfb")](_0x423d("0x2f1")).name="ZPH"),0!=WebSAGE[_0x423d("0x20b")]&&(document[_0x423d("0xfb")](_0x423d("0x94"))[_0x423d("0x1d4")]=WebSAGE[_0x423d("0x20b")],document[_0x423d("0xfb")]("HIDETB")[_0x423d("0x306")]=_0x423d("0x94"));for(var t=0;t<20;t++)typeof WebSAGE[_0x423d("0x1fe")][t]==_0x423d("0x26a")&&""!=WebSAGE[_0x423d("0x1fe")][t]&&(document.getElementById(_0x423d("0x42")+(t+1))[_0x423d("0x1d4")]=WebSAGE[_0x423d("0x1fe")][t]||"",document.getElementById("IDPREFIX"+(t+1)).name=_0x423d("0x42")+(t+1));fmTELA[_0x423d("0x25c")]()}else setTimeout(WebSAGE[_0x423d("0x296")],36e5);else{var n=new Date((new Date)[_0x423d("0x1d0")]()+864e5);n.setHours(4),n[_0x423d("0x2d0")](60*Math[_0x423d("0x2bc")]());var r=n-new Date;setTimeout(WebSAGE.reload,r)}},reconhece:function(e){256&WebSAGE[_0x423d("0x1f7")](e)&&WebSAGE[_0x423d("0x305")](WebSAGE[_0x423d("0x1ad")]+"?R="+e+_0x423d("0x12a")+"PS="+WebSAGE[_0x423d("0x91")]++)},setaCorFundo:function(e){if(e==_0x423d("0x9e")){var t=SVGDoc.getElementById(_0x423d("0x115"));if(!t)return;VisorTelas_BackgroundSVG=e=t[_0x423d("0x308")].pagecolor[_0x423d("0x1d4")]}SVGDoc[_0x423d("0x122")](null,"style",_0x423d("0x13")+e+";"),$(_0x423d("0x9"))[_0x423d("0x12e")]("background-color",e),WebSAGE[_0x423d("0x11c")]||typeof WebSAGE[_0x423d("0x2be")]==_0x423d("0x58")&&WebSAGE[_0x423d("0x2be")][_0x423d("0x122")](null,_0x423d("0x17c"),_0x423d("0x18f")+e),document[_0x423d("0x1d1")][_0x423d("0x22")]=e},mostraDestaqPonto:function(e){var t=SVGDoc[_0x423d("0xfb")](_0x423d("0x204")+e);null==t&&(t=SVGDoc[_0x423d("0xfb")](_0x423d("0x204")+TAGS[e])),null!=t&&(t[_0x423d("0x122")](null,_0x423d("0x21f"),_0x423d("0x1b")),typeof t[_0x423d("0x233")][_0x423d("0x155")]!=_0x423d("0x197")&&(t[_0x423d("0x233")][_0x423d("0x83")](),t.anim[_0x423d("0x155")]()))},escondeDestaqPonto:function(e){var t=SVGDoc[_0x423d("0xfb")](_0x423d("0x204")+e);null==t&&(t=SVGDoc.getElementById(_0x423d("0x204")+TAGS[e])),null!==t&&(t[_0x423d("0x122")](null,_0x423d("0x21f"),_0x423d("0x9e")),typeof t[_0x423d("0x233")]!==_0x423d("0x197")&&t[_0x423d("0x233")][_0x423d("0x83")]&&t[_0x423d("0x233")][_0x423d("0x83")]())},listaDestacaveis:function(){var e;for(e in V)null!=SVGDoc[_0x423d("0xfb")](_0x423d("0x204")+e)&&WebSAGE.g_destaqList[_0x423d("0x1c5")](e)},mostraDestaqSel:function(e,t){if(0==NPTO){var n=WebSAGE.g_indSelPonto+e;if(WebSAGE.escondeDestaqPonto(WebSAGE[_0x423d("0x1a1")][WebSAGE[_0x423d("0x27a")]]),n<0&&(n=WebSAGE[_0x423d("0x1a1")].length-1),n>=WebSAGE[_0x423d("0x1a1")][_0x423d("0x1d3")]&&(n=0),1==t){for(var r=-1,i=n;i<WebSAGE[_0x423d("0x1a1")][_0x423d("0x1d3")]&&i>=0;i+=e)if(16384&WebSAGE[_0x423d("0x1f7")](WebSAGE[_0x423d("0x1a1")][i])){r=i;break}n=r}WebSAGE[_0x423d("0x27a")]=n,-1!=n&&(WebSAGE[_0x423d("0xc5")](WebSAGE.g_destaqList[WebSAGE[_0x423d("0x27a")]]),setTimeout("WebSAGE.escondeDestaqPonto("+WebSAGE[_0x423d("0x1a1")][WebSAGE.g_indSelPonto]+")",5e3))}},setupTimeMachine:function(){},TraduzCor:function(e){var t;if(e[_0x423d("0xe8")](0,5)==_0x423d("0x117")||"-clr-"==e[_0x423d("0xe8")](0,5)||e[_0x423d("0xe8")](0,5)==_0x423d("0x10b"))switch(e){case"-pbi-background":e=PBIColorBackground;break;case _0x423d("0x285"):e=PBIColorForeground;break;case _0x423d("0x1e7"):case _0x423d("0x21d"):e=PBIColorBad;break;case _0x423d("0x225"):e=PBIColorMaximum;break;case _0x423d("0x208"):e=PBIColorMinimum;break;case _0x423d("0xb1"):e=PBIColorSelected;break;case"-pbi-negative":e=PBIColorNegative;break;case _0x423d("0x2b4"):e=PBIColorPositive;break;case _0x423d("0x21b"):case _0x423d("0x206"):case"-cor-bgd":e=VisorTelas_BackgroundSVG;break;case _0x423d("0x143"):case _0x423d("0x251"):e=ScreenViewer_ToolbarColor;break;case _0x423d("0x11f"):case"-cor-almini":e=VisorTelas_CorAlarmeInibido;break;case _0x423d("0x33c"):case _0x423d("0x2e0"):e=VisorTelas_Medidas_Cor_Falha;break;default:"-pbi-"==e.substr(0,5)?(t=parseInt(e[_0x423d("0xe8")](5,3),10),e=isNaN(t)?_0x423d("0x9e"):PBIColorTable[t=t>0?t-1:0][_0x423d("0x1d4")]):(t=parseInt(e[_0x423d("0xe8")](5,3),10),e=isNaN(t)?_0x423d("0x9e"):ScreenViewer_ColorTable[t])}return e},makeDraggable:function(e){e&&(e[_0x423d("0x17c")][_0x423d("0x50")]=_0x423d("0x205"),e[_0x423d("0x1d9")]=!1,e[_0x423d("0x1ff")]=0,e[_0x423d("0x4f")]=0,typeof e[_0x423d("0x183")]===_0x423d("0x197")&&(e.inittransform=e[_0x423d("0x2e")](null,_0x423d("0x14"))),null===e[_0x423d("0x183")]&&(e[_0x423d("0x183")]=""),$(e)[_0x423d("0x25b")](_0x423d("0x3a"),(function(t){if(e.style.display==_0x423d("0x9e"))return e[_0x423d("0x17c")][_0x423d("0x50")]=_0x423d("0x205"),e[_0x423d("0x1d9")]=!1,e[_0x423d("0x167")]=0,e[_0x423d("0x36")]=0,void(window.drgObject=null);e[_0x423d("0x17c")][_0x423d("0x50")]="move",e[_0x423d("0x1d9")]=!0,window[_0x423d("0x1a4")]=e;var n=SVGDoc.createSVGPoint();n.x=t[_0x423d("0x142")],n.y=t.clientY;e[_0x423d("0x211")].getScreenCTM();e[_0x423d("0x167")]=n.x-e[_0x423d("0x1ff")],e[_0x423d("0x36")]=n.y-e[_0x423d("0x4f")]})),$(e)[_0x423d("0x25b")](_0x423d("0x317"),(function(t){e[_0x423d("0x17c")][_0x423d("0x50")]="crosshair",e[_0x423d("0x1d9")]=!1,e[_0x423d("0x167")]=0,e[_0x423d("0x36")]=0,window[_0x423d("0x1a4")]=null})),$(e).bind("mousemove",(function(t){if(!0===e.drgDragging){var n=SVGDoc[_0x423d("0x17b")]();n.x=t[_0x423d("0x142")],n.y=t[_0x423d("0x31f")];var r=e.parentNode[_0x423d("0x339")]();n.x-=e.drgMouseOffsetX,n.y-=e[_0x423d("0x36")],window[_0x423d("0xb4")]=t[_0x423d("0x142")],window[_0x423d("0x331")]=t.clientY,e[_0x423d("0x1ff")]=n.x,e.drgY=n.y,r.e=r.f=0,n=n[_0x423d("0x1ee")](r[_0x423d("0x2d6")]()),e[_0x423d("0x122")](null,_0x423d("0x14"),_0x423d("0x15")+n.x+","+n.y+") "+e[_0x423d("0x183")]),t[_0x423d("0x1d2")]()}})))},init:function(){$||($=window.$),WebSAGE[_0x423d("0x314")]=new Date;try{if(null==(SVGDoc=document.getElementById(_0x423d("0xff")).firstElementChild)&&""!==tela)return;"iPad"!=BrowserDetect.OS||(ANIMA=0),WebSAGE[_0x423d("0x11c")]=""!=(SVGDoc.getAttributeNS(null,_0x423d("0x2ca"))||SVGDoc.getAttributeNS("http://www.inkscape.org/namespaces/inkscape","version")),WebSAGE.g_isInkscape&&(VisorTelas_BackgroundSVG=ScreenViewer_Background),null!=SVGDoc&&WebSAGE.setaCorFundo(VisorTelas_BackgroundSVG)}catch(e){return}document.oncontextmenu=function(){return!1},$(_0x423d("0xde"))[_0x423d("0x1a5")]("<style> body { user-select:none; -webkit-user-select:none; } </style>"),void 0!==SVGDoc&&null!=SVGDoc&&(SVGDoc[_0x423d("0x20d")]=function(){return!1}),document[_0x423d("0x1d1")][_0x423d("0x17c")][_0x423d("0x67")]="hidden",document.body[_0x423d("0x17c")].overflowY=_0x423d("0x1c3"),typeof SVGDoc!=_0x423d("0x197")&&null!=SVGDoc&&(SVGDoc[_0x423d("0x122")](null,_0x423d("0x247"),ScreenViewer_SVGMaxWidth),SVGDoc[_0x423d("0x122")](null,_0x423d("0x132"),ScreenViewer_SVGMaxHeight),SVGDoc.onselectstart=new Function("return false;")),WebSAGE[_0x423d("0x296")](_0x423d("0xef")),WebSAGE[_0x423d("0x47")]=ScreenViewer_SVGMaxWidth,WebSAGE[_0x423d("0xa1")]=ScreenViewer_SVGMaxHeight;try{WebSAGE[_0x423d("0x3f")]()}catch(e){}isNaN(parseInt(gup(_0x423d("0x335"))))&&isNaN(parseInt(gup(_0x423d("0x22c"))))&&isNaN(parseInt(gup(_0x423d("0x3c"))))&&isNaN(parseInt(gup(_0x423d("0x2f1"))))||(WebSAGE[_0x423d("0x1a")]=parseInt(gup(_0x423d("0x335"))||0),WebSAGE.g_zpY=parseInt(gup(_0x423d("0x22c"))||0),WebSAGE[_0x423d("0x47")]=parseInt(gup(_0x423d("0x3c"))||ScreenViewer_SVGMaxWidth),WebSAGE[_0x423d("0xa1")]=parseInt(gup("ZPH")||ScreenViewer_SVGMaxHeight),WebSAGE[_0x423d("0x1b0")](10)),$(SVGDoc)[_0x423d("0x25b")](_0x423d("0x3a"),(function(e){e[_0x423d("0x4a")][_0x423d("0x24f")]||80!==e[_0x423d("0x142")]||e[_0x423d("0x31f")]})),$(SVGDoc)[_0x423d("0x25b")](_0x423d("0x317"),(function(e){e.originalEvent[_0x423d("0x24f")]||80!==e.clientX||e.clientY}))}},$V=WebSAGE[_0x423d("0x2a6")],$F=WebSAGE[_0x423d("0x1f7")],$T=WebSAGE[_0x423d("0x1d0")],$W=WebSAGE;$W[_0x423d("0x106")]=$W[_0x423d("0x276")],_0x423d("0x14a"),WebSAGE[_0x423d("0x20c")]=0,WebSAGE.TranslateColorsVega=function(e){return e[_0x423d("0x62")](/-pbi-([0-9]+)/g,(function(e,t,n,r){var i=parseInt(e.substr(5,3),10);return(i=i>0?i-1:0)in PBIColorTable?PBIColorTable[i][_0x423d("0x1d4")]:i in ScreenViewer_ColorTable?ScreenViewer_ColorTable[i]:_0x423d("0x223")}))},WebSAGE[_0x423d("0x222")]=function(e,t,n){var r;function i(e){typeof e[_0x423d("0x1b7")][0].name!=_0x423d("0x197")?n[_0x423d("0x25")][0]=e[_0x423d("0x1b7")][0][_0x423d("0x306")]:n[_0x423d("0x25")][0]="table";vg[_0x423d("0x1f0")][_0x423d("0xdf")](e,(function(e,t){try{var r;WebSAGE[_0x423d("0x20c")]++,n[_0x423d("0x152")]=_0x423d("0x1b3")+WebSAGE.g_vega_num,$("#VEGACHARTS").append(_0x423d("0x193")+n[_0x423d("0x152")]+_0x423d("0x19c")),n.vw=t({el:_0x423d("0xf2")+WebSAGE[_0x423d("0x20c")],renderer:_0x423d("0xc3")})[_0x423d("0xa4")](),typeof n[_0x423d("0xfe")]!=_0x423d("0x197")&&(n.vw[_0x423d("0xc7")]._defs[_0x423d("0x1b7")][0][_0x423d("0x9f")]=n[_0x423d("0xfe")]);var i=_0x423d("0x2a5"),a=SVGDoc[_0x423d("0xfb")](_0x423d("0x115"));a&&(i=a.attributes[_0x423d("0x13b")][_0x423d("0x1d4")]),(r=d3[_0x423d("0x2bf")](SVGDoc))[_0x423d("0x2bf")](_0x423d("0x160")+n.id)[_0x423d("0x333")](),"g"==n[_0x423d("0x211")][_0x423d("0x1e2")]?n.vg=r[_0x423d("0x2bf")]("#"+n[_0x423d("0x211")].id)[_0x423d("0x1a5")]("g")[_0x423d("0xf9")]($(_0x423d("0xf2")+WebSAGE.g_vega_num+_0x423d("0x121"))[0][_0x423d("0x2a2")][0].childNodes[0][_0x423d("0x30c")]):n.vg=r[_0x423d("0x2bf")]("#"+i)[_0x423d("0x1a5")]("g").html($(_0x423d("0xf2")+WebSAGE[_0x423d("0x20c")]+_0x423d("0x121"))[0].childNodes[0].childNodes[0][_0x423d("0x30c")]),n.vg[0][0].id=_0x423d("0x5a")+n.id,n.vg[0][0][_0x423d("0x122")](null,_0x423d("0x14"),(n[_0x423d("0x2e")](null,_0x423d("0x14"))||"")+_0x423d("0x72")+n[_0x423d("0x2e")](null,"x")+" "+n[_0x423d("0x2e")](null,"y")+") "+_0x423d("0x181")+n[_0x423d("0x2e")](null,"width")/n.vw[_0x423d("0x348")]+" "+n[_0x423d("0x2e")](null,"height")/n.vw[_0x423d("0x2e6")]+") "),n[_0x423d("0x183")]=n.vg[0][0][_0x423d("0x2e")](null,_0x423d("0x14")),0==n.vw[_0x423d("0x1b7")](n.vgTableName[0])[_0x423d("0x154")]()[_0x423d("0x1d3")]?n.vgInitData=JSON[_0x423d("0x1f0")](JSON.stringify(n.vw[_0x423d("0xc7")]._data[_0x423d("0x313")][_0x423d("0x138")])):n[_0x423d("0x7a")]=JSON[_0x423d("0x1f0")](JSON[_0x423d("0x144")](n.vw[_0x423d("0x1b7")](n[_0x423d("0x25")][0])[_0x423d("0x154")]()))}catch(e){console.log(_0x423d("0x279")+e)}}))}function a(e){typeof e.data[0][_0x423d("0x306")]!=_0x423d("0x197")?n[_0x423d("0x25")][0]=e.data[0][_0x423d("0x306")]:n[_0x423d("0x25")][0]="table";var t,r=vega.parse(e);WebSAGE[_0x423d("0x20c")]++,n.vgId="vega_"+WebSAGE[_0x423d("0x20c")],$(_0x423d("0x15a"))[_0x423d("0x1a5")](_0x423d("0x193")+n[_0x423d("0x152")]+_0x423d("0x19c")),n.vw=new(vega[_0x423d("0x1f6")])(r,{renderer:_0x423d("0xc3")})[_0x423d("0x2c8")]()[_0x423d("0xd7")](),n.vw[_0x423d("0x9c")]((function(){n.vw.toSVG().then((function(e){typeof n[_0x423d("0xfe")]!=_0x423d("0x197")&&typeof n.vw._model!=_0x423d("0x197")&&(n.vw[_0x423d("0xc7")][_0x423d("0x69")][_0x423d("0x1b7")][0][_0x423d("0x9f")]=n[_0x423d("0xfe")]);var r=_0x423d("0x2a5"),i=SVGDoc[_0x423d("0xfb")](_0x423d("0x115"));i&&(r=i[_0x423d("0x308")][_0x423d("0x13b")][_0x423d("0x1d4")]),(t=d3[_0x423d("0x2bf")](SVGDoc))[_0x423d("0x2bf")](_0x423d("0x160")+n.id)[_0x423d("0x333")](),"g"==n[_0x423d("0x211")].nodeName?n.vg=t[_0x423d("0x2bf")]("#"+n[_0x423d("0x211")].id)[_0x423d("0x1a5")]("g")[_0x423d("0xf9")](e):n.vg=t.select("#"+r)[_0x423d("0x1a5")]("g")[_0x423d("0xf9")](e),n.vg[0][0].id="vg_"+n.id,n.vg[0][0][_0x423d("0x122")](null,_0x423d("0x14"),(n[_0x423d("0x2e")](null,_0x423d("0x14"))||"")+_0x423d("0x72")+n[_0x423d("0x2e")](null,"x")+" "+n[_0x423d("0x2e")](null,"y")+") "+_0x423d("0x181")+n[_0x423d("0x2e")](null,_0x423d("0x247"))/(n.vw._width||100)+" "+n.getAttributeNS(null,_0x423d("0x132"))/(n.vw._height||100)+") "),n[_0x423d("0x183")]=n.vg[0][0].getAttributeNS(null,_0x423d("0x14")),n[_0x423d("0x7a")]=JSON[_0x423d("0x1f0")](JSON.stringify(n.vw._runtime[_0x423d("0x1b7")][n[_0x423d("0x25")][0]][_0x423d("0x154")][_0x423d("0x1d4")]))}))}))}switch(e[t][_0x423d("0x9a")]){case _0x423d("0x113"):WebSAGE[_0x423d("0x2")](e[t][_0x423d("0x11a")]),n[_0x423d("0x95")]=e[t][_0x423d("0x11a")];var o=e[t].prompt[_0x423d("0x18d")](",");n[_0x423d("0x126")]=parseFloat(o[0]||0),n._d3arc_max=parseFloat(o[1]||100),n._d3arc_innerRadius=parseFloat(o[2]||0),n[_0x423d("0xe")]=parseFloat(o[3]||750);var u=d3[_0x423d("0xc3")][_0x423d("0x21c")]().innerRadius(n._d3arc_innerRadius)[_0x423d("0xbb")](100)[_0x423d("0x66")](0)[_0x423d("0x1c4")](0),s=window.d3[_0x423d("0x2bf")](n[_0x423d("0x211")])[_0x423d("0x1a5")](_0x423d("0x153"))[_0x423d("0x17c")](_0x423d("0x2ce"),"red")[_0x423d("0x29c")]("d",u);n[_0x423d("0x334")]=s,n._d3arc[_0x423d("0xc9")]({oldAngle:0}),s[0][0][_0x423d("0x17c")][_0x423d("0x2cd")]=n.style[_0x423d("0x2cd")];var l=n[_0x423d("0x85")]();s[0][0][_0x423d("0x122")](null,_0x423d("0x14"),n[_0x423d("0x2e")](null,_0x423d("0x14"))||""+_0x423d("0x1e1")+(l.x+l[_0x423d("0x247")]/2)+","+(l.y+l[_0x423d("0x132")]/2)+" ) "+_0x423d("0x1d5")+l.width/200+","+l[_0x423d("0x132")]/200+" ) "),n[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e");break;case _0x423d("0x31d"):{for(n[_0x423d("0x25")]=[],n[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e"),n[_0x423d("0xb3")]=e[t][_0x423d("0x11a")][_0x423d("0x18d")](","),r=0;r<n[_0x423d("0xb3")][_0x423d("0x1d3")];r++)WebSAGE[_0x423d("0x2")](n[_0x423d("0xb3")][r]);function c(e){var t;if(typeof(e=WebSAGE[_0x423d("0x92")](e))===_0x423d("0x58"))(t=vl[_0x423d("0x1bd")](e).spec).width=t[_0x423d("0x247")]||100,t.height=t.height||100;else{var r=JSON[_0x423d("0x1f0")](e);(t=vl.compile(r)[_0x423d("0xdf")])[_0x423d("0x247")]=t.width||r[_0x423d("0x247")]||100,t.height=t[_0x423d("0x132")]||r.height||100}void 0!==t[_0x423d("0x1b7")][0][_0x423d("0x9f")]&&(n[_0x423d("0xfe")]=t[_0x423d("0x1b7")][0][_0x423d("0x9f")],t[_0x423d("0x1b7")][0][_0x423d("0x9f")]={}),a(t)}0==e[t].prompt.indexOf("{")?c(e[t][_0x423d("0xd6")]):$[_0x423d("0xb2")](e[t].prompt+"?"+(new Date)[_0x423d("0x1d0")](),c)}break;case _0x423d("0x2ba"):if(n[_0x423d("0x25")]=[],n[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e"),(d=e[t][_0x423d("0x11a")][_0x423d("0x18d")]("|"))[_0x423d("0x1d3")]>1)0==(h=d[1][_0x423d("0x18d")](",")).length?n.timespan=n.width[_0x423d("0x19b")][_0x423d("0x1d4")]:n[_0x423d("0x2d1")]=h[0];else n.timespan=n[_0x423d("0x247")][_0x423d("0x19b")][_0x423d("0x1d4")];for(n[_0x423d("0xb3")]=d[0].split(","),r=0;r<n[_0x423d("0xb3")][_0x423d("0x1d3")];r++)WebSAGE[_0x423d("0x2")](n[_0x423d("0xb3")][r]);if(0==e[t].prompt[_0x423d("0xcd")]("{"))i(p=JSON[_0x423d("0x1f0")](WebSAGE[_0x423d("0x92")](e[t][_0x423d("0xd6")])));else $.get(e[t][_0x423d("0xd6")]+"?"+(new Date)[_0x423d("0x1d0")](),(function(e){i(typeof e===_0x423d("0x58")?e:JSON[_0x423d("0x1f0")](WebSAGE[_0x423d("0x92")](e)))}));break;case _0x423d("0x79"):{function f(e){var t;i(t=typeof e===_0x423d("0x58")?e:JSON[_0x423d("0x1f0")](WebSAGE.TranslateColorsVega(e))),t[_0x423d("0x1b7")][_0x423d("0x1d3")]>0&&typeof t.data[0].url!==_0x423d("0x197")&&typeof t[_0x423d("0x1b7")][0][_0x423d("0x133")]!=_0x423d("0x197")&&setInterval((function(){$[_0x423d("0xb2")](t[_0x423d("0x1b7")][0].url,(function(e){n.vw[_0x423d("0x1b7")](t[_0x423d("0x1b7")][0][_0x423d("0x306")])[_0x423d("0x333")]((function(e){return!0})),typeof e===_0x423d("0x26a")?n.vw.data(t[_0x423d("0x1b7")][0].name).insert(JSON[_0x423d("0x1f0")](WebSAGE[_0x423d("0x92")](e))):n.vw[_0x423d("0x1b7")](t.data[0][_0x423d("0x306")])[_0x423d("0x15b")](e),n.vw[_0x423d("0xa4")](),n.vg[_0x423d("0xf9")]($("#"+n.vgId+_0x423d("0x121"))[0][_0x423d("0x2a2")][0][_0x423d("0x2a2")][0].innerHTML)}))}),1e3*t[_0x423d("0x1b7")][0][_0x423d("0x133")]),t[_0x423d("0x1b7")][_0x423d("0x1d3")]>1&&typeof t[_0x423d("0x1b7")][1][_0x423d("0x199")]!==_0x423d("0x197")&&typeof t[_0x423d("0x1b7")][1].update_period!=_0x423d("0x197")&&setInterval((function(){$.get(t[_0x423d("0x1b7")][1][_0x423d("0x199")],(function(e){n.vw[_0x423d("0x1b7")](t[_0x423d("0x1b7")][1].name)[_0x423d("0x333")]((function(e){return!0})),"string"==typeof e?n.vw[_0x423d("0x1b7")](t[_0x423d("0x1b7")][0].name)[_0x423d("0x15b")](JSON[_0x423d("0x1f0")](WebSAGE[_0x423d("0x92")](e))):n.vw[_0x423d("0x1b7")](t[_0x423d("0x1b7")][0][_0x423d("0x306")])[_0x423d("0x15b")](e),n.vw[_0x423d("0xa4")](),n.vg[_0x423d("0xf9")]($("#"+n[_0x423d("0x152")]+_0x423d("0x121"))[0][_0x423d("0x2a2")][0][_0x423d("0x2a2")][0][_0x423d("0x30c")])}))}),1e3*t.data[1][_0x423d("0x133")])}n[_0x423d("0x25")]=[],n[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e"),0==e[t][_0x423d("0xd6")].indexOf("{")?f(e[t].prompt):$[_0x423d("0xb2")](e[t][_0x423d("0xd6")]+"?"+(new Date)[_0x423d("0x1d0")](),f)}break;case _0x423d("0x56"):case _0x423d("0x325"):var d,h,p;if(n[_0x423d("0x25")]=[],n[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e"),(d=e[t][_0x423d("0x11a")][_0x423d("0x18d")]("|"))[_0x423d("0x1d3")]>1)0==(h=d[1][_0x423d("0x18d")](","))[_0x423d("0x1d3")]?n[_0x423d("0x2d1")]=n[_0x423d("0x247")][_0x423d("0x19b")][_0x423d("0x1d4")]:n[_0x423d("0x2d1")]=h[0];else n.timespan=n[_0x423d("0x247")][_0x423d("0x19b")].value;for(n[_0x423d("0xb3")]=d[0][_0x423d("0x18d")](","),r=0;r<n[_0x423d("0xb3")][_0x423d("0x1d3")];r++)WebSAGE.acrescentaPontoLista(n[_0x423d("0xb3")][r]);if(0==e[t][_0x423d("0xd6")][_0x423d("0xcd")]("{"))(p=JSON.parse(WebSAGE[_0x423d("0x92")](e[t].prompt)))[_0x423d("0x247")]=p.width||100,p[_0x423d("0x132")]=p[_0x423d("0x132")]||100,a(p);else $[_0x423d("0xb2")](e[t][_0x423d("0xd6")]+"?"+(new Date).getTime(),(function(e){var t;(t="object"==typeof e?e:JSON[_0x423d("0x1f0")](WebSAGE[_0x423d("0x92")](e)))[_0x423d("0x247")]=t[_0x423d("0x247")]||100,t.height=t[_0x423d("0x132")]||100,a(t)}));break;case"#vega3-json":case _0x423d("0x145"):{function x(e){var t;a(t=typeof e===_0x423d("0x58")?e:JSON[_0x423d("0x1f0")](e)),t[_0x423d("0x1b7")][_0x423d("0x1d3")]>0&&void 0!==t[_0x423d("0x1b7")][0].url&&typeof t[_0x423d("0x1b7")][0].update_period!=_0x423d("0x197")&&setInterval((function(){$[_0x423d("0xb2")](t.data[0][_0x423d("0x199")],(function(e){typeof e===_0x423d("0x26a")?n.vw[_0x423d("0x344")](t[_0x423d("0x1b7")][0].name,vega[_0x423d("0x135")]()[_0x423d("0x333")]((function(e){return!0}))[_0x423d("0x15b")](JSON.parse(e)))[_0x423d("0xd7")]():n.vw[_0x423d("0x344")](t[_0x423d("0x1b7")][0][_0x423d("0x306")],vega[_0x423d("0x135")]()[_0x423d("0x333")]((function(e){return!0})).insert(e)).run(),n.vw[_0x423d("0x9c")]((function(){n.vw.toSVG()[_0x423d("0xb7")]((function(e){n.vg.html(e)}))}))}))}),1e3*t[_0x423d("0x1b7")][0][_0x423d("0x133")]),t[_0x423d("0x1b7")][_0x423d("0x1d3")]>1&&typeof t[_0x423d("0x1b7")][1].url!==_0x423d("0x197")&&typeof t[_0x423d("0x1b7")][1][_0x423d("0x133")]!=_0x423d("0x197")&&setInterval((function(){$[_0x423d("0xb2")](t.data[1].url,(function(e){typeof e===_0x423d("0x26a")?n.vw.change(t[_0x423d("0x1b7")][1][_0x423d("0x306")],vega[_0x423d("0x135")]()[_0x423d("0x333")]((function(e){return!0}))[_0x423d("0x15b")](JSON[_0x423d("0x1f0")](e)))[_0x423d("0xd7")]():n.vw[_0x423d("0x344")](t[_0x423d("0x1b7")][1].name,vega.changeset()[_0x423d("0x333")]((function(e){return!0}))[_0x423d("0x15b")](e)).run(),n.vw.runAfter((function(){n.vw[_0x423d("0x1bc")]()[_0x423d("0xb7")]((function(e){n.vg[_0x423d("0xf9")](e)}))}))}))}),1e3*t[_0x423d("0x1b7")][1][_0x423d("0x133")])}n[_0x423d("0x25")]=[],n[_0x423d("0x17c")].display=_0x423d("0x9e"),0==e[t].prompt.indexOf("{")?x(e[t][_0x423d("0xd6")]):$[_0x423d("0xb2")](e[t][_0x423d("0xd6")]+"?"+(new Date)[_0x423d("0x1d0")](),x)}}},WebSAGE[_0x423d("0x24b")]=function(e){var t,n,r;switch(WebSAGE[_0x423d("0x81")][e][_0x423d("0x9a")]){case _0x423d("0x113"):var i=(WebSAGE[_0x423d("0x9d")](WebSAGE[_0x423d("0x81")][e].parent._d3arc_tag,WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")])-WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")]._d3arc_min)/(WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x127")]-WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x126")]),a=d3[_0x423d("0xc3")][_0x423d("0x21c")]()[_0x423d("0x1e0")](WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0x11")]).outerRadius(100)[_0x423d("0x66")](0);WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x334")][_0x423d("0xc2")]().duration(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xe")])[_0x423d("0x32")]("d",(r=2*i*Math.PI,function(e){var t=d3[_0x423d("0x76")](e[_0x423d("0x2df")],r);return function(n){return e[_0x423d("0x1c4")]=t(n),a(e)}})).each("end",(function(){WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x334")].datum({oldAngle:2*i*Math.PI})}));break;case _0x423d("0x2ba"):typeof WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vw!=_0x423d("0x197")&&typeof WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0x7a")]!=_0x423d("0x197")&&""!=WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x7a")]&&(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vw[_0x423d("0x1b7")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vgTableName[0])[_0x423d("0x333")]((function(e){return!0})),n=JSON[_0x423d("0x1f0")](JSON.stringify(WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x7a")])));var o=new Date,u=0;WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x137")](_0x423d("0x7a"))&&$[_0x423d("0xdd")](WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x7a")],(function(r,i){$.each(i,(function(i,a){try{if(typeof a===_0x423d("0x26a")){if(a[_0x423d("0xcd")]("HIS#")>=0){u++;var s=WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1];if(1===u&&(n=[]),WebSAGE[_0x423d("0x81")][e][_0x423d("0x137")](_0x423d("0x93"))&&void 0!==WebSAGE.InkSage[e].valores[s]){for(t=0;t<WebSAGE[_0x423d("0x81")][e][_0x423d("0x93")][s].length;t++)n.push({pnt:""+s,x:WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")][s][t],y:WebSAGE[_0x423d("0x81")][e][_0x423d("0x93")][s][t]});WebSAGE[_0x423d("0x81")][e].valores[s].push(V[s]),WebSAGE[_0x423d("0x81")][e].datas[s][_0x423d("0x1c5")](o[_0x423d("0x1d0")]());for(var l=WebSAGE.InkSage[e][_0x423d("0x93")][s][_0x423d("0x1d3")]-1;l>=0;l--){(o[_0x423d("0x1d0")]()-WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")][s][l])/1e3>60*WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x2d1")]&&(WebSAGE[_0x423d("0x81")][e].valores[s][_0x423d("0x120")](l,1),WebSAGE.InkSage[e][_0x423d("0x1d7")][s][_0x423d("0x120")](l,1))}}else{var c=(new Date)[_0x423d("0x1d0")]()-60*WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x2d1")]*1e3;if(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].hasOwnProperty(_0x423d("0xc1"))||(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xc1")]=[]),!WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0xc1")][_0x423d("0x137")](s)){var f=_0x423d("0x89")+s+_0x423d("0xc8")+c/1e3+"&F=S&B=histdata("+e+","+s+_0x423d("0x338")+'" );';WebSAGE[_0x423d("0x46")]=WebSAGE.g_timeshift+2e3,setTimeout(f,WebSAGE.g_timeshift),WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xc1")][s]=!0}}}if(a[_0x423d("0xcd")](_0x423d("0x23e"))>=0)if(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")].length>a[_0x423d("0x18d")]("#")[1]-1)(d=WebSAGE.valorTagueado(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].pnts[a[_0x423d("0x18d")]("#")[1]-1],WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")]))!==_0x423d("0x1de")?n[r][i]=d:n[_0x423d("0x120")](-1,1);else n[_0x423d("0x120")](-1,1);else if(a.indexOf(_0x423d("0x1e5"))>=0){var d;if(WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0xb3")][_0x423d("0x1d3")]>a[_0x423d("0x18d")]("#")[1]-1)(d=WebSAGE.valorTagueado(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1],WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")]))!==_0x423d("0x1de")&&(n[r][i]=WebSAGE[_0x423d("0x81")][e].parent.pnts[a[_0x423d("0x18d")]("#")[1]-1]);else n[_0x423d("0x120")](-1,1)}else a[_0x423d("0xcd")]("FLG#")>=0?WebSAGE.InkSage[e].parent.pnts.length>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0x1f7")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].pnts[a[_0x423d("0x18d")]("#")[1]-1])):a[_0x423d("0xcd")](_0x423d("0x1db"))>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].pnts[_0x423d("0x1d3")]>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=128&WebSAGE[_0x423d("0x1f7")](WebSAGE.InkSage[e].parent.pnts[a[_0x423d("0x18d")]("#")[1]-1])?1:0):a.indexOf(_0x423d("0x2a1"))>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")].length>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0xa3")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1])):a[_0x423d("0xcd")](_0x423d("0x1e3"))>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][_0x423d("0x1d3")]>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0x2b7")](WebSAGE.InkSage[e][_0x423d("0xa9")].pnts[a[_0x423d("0x18d")]("#")[1]-1])):a[_0x423d("0xcd")](_0x423d("0x44"))>=0?WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0xb3")][_0x423d("0x1d3")]>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0xf7")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a.split("#")[1]-1])):a[_0x423d("0xcd")]("BAY#")>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")].length>a.split("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0x345")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1])):a[_0x423d("0xcd")]("SUB#")>=0&&WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0xb3")][_0x423d("0x1d3")]>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE.getSubstation(WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1]))}}catch(e){}}))})),typeof WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vw!=_0x423d("0x197")&&(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vw[_0x423d("0x1b7")](WebSAGE[_0x423d("0x81")][e].parent.vgTableName[0])[_0x423d("0x15b")](n),WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vw.update(),WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vg[_0x423d("0xf9")]($("#"+WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vgId+_0x423d("0x121"))[0].childNodes[0][_0x423d("0x2a2")][0][_0x423d("0x30c")]));break;case"#vega-lite":case _0x423d("0x56"):case _0x423d("0x325"):typeof WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vw!=_0x423d("0x197")&&typeof WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x7a")]!=_0x423d("0x197")&&""!=WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vgInitData&&(n=JSON[_0x423d("0x1f0")](JSON[_0x423d("0x144")](WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0x7a")])));o=new Date,u=0;WebSAGE.InkSage[e][_0x423d("0xa9")].hasOwnProperty(_0x423d("0x7a"))&&$[_0x423d("0xdd")](WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x7a")],(function(r,i){$[_0x423d("0xdd")](i,(function(i,a){try{if(typeof a===_0x423d("0x26a")){if(a.indexOf(_0x423d("0x1e8"))>=0){u++;var s=WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1];if(1===u&&(n=[]),WebSAGE[_0x423d("0x81")][e].hasOwnProperty(_0x423d("0x93"))&&typeof WebSAGE.InkSage[e][_0x423d("0x93")][s]!=_0x423d("0x197")){for(t=0;t<WebSAGE[_0x423d("0x81")][e].valores[s].length;t++)n[_0x423d("0x1c5")]({pnt:""+s,x:WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")][s][t],y:WebSAGE[_0x423d("0x81")][e][_0x423d("0x93")][s][t]});WebSAGE[_0x423d("0x81")][e].valores[s][_0x423d("0x1c5")](V[s]),WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")][s][_0x423d("0x1c5")](o[_0x423d("0x1d0")]());for(var l=WebSAGE[_0x423d("0x81")][e][_0x423d("0x93")][s][_0x423d("0x1d3")]-1;l>=0;l--){var c=(o[_0x423d("0x1d0")]()-WebSAGE[_0x423d("0x81")][e].datas[s][l])/1e3;WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].timespan>0?c>60*WebSAGE[_0x423d("0x81")][e].parent.timespan&&(WebSAGE[_0x423d("0x81")][e].valores[s][_0x423d("0x120")](l,1),WebSAGE[_0x423d("0x81")][e].datas[s][_0x423d("0x120")](l,1)):WebSAGE[_0x423d("0x81")][e][_0x423d("0x1d7")][s][l]>WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].datafim&&(WebSAGE[_0x423d("0x81")][e].valores[_0x423d("0x1d8")]((function(e,t,n){n[t]=[]})),WebSAGE[_0x423d("0x81")][e].datas[_0x423d("0x1d8")]((function(e,t,n){n[t]=[]})),WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0x216")]=(new Date)[_0x423d("0x1d0")]()-(new Date)[_0x423d("0x1d0")]()%(1e3*Math[_0x423d("0x284")](60*WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].timespan))+60*(new Date).getTimezoneOffset()*1e3%(1e3*Math[_0x423d("0x284")](60*WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x2d1")])),WebSAGE[_0x423d("0x81")][e].parent.datafim=WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0x216")]+Math.abs(60*WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x2d1")]*1e3))}}else{WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x2d1")]<0&&(WebSAGE.InkSage[e].parent[_0x423d("0x216")]=(new Date).getTime()-(new Date)[_0x423d("0x1d0")]()%(1e3*Math.abs(60*WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0x2d1")]))+60*(new Date)[_0x423d("0x2ac")]()*1e3%(1e3*Math[_0x423d("0x284")](60*WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x2d1")])),WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x27f")]=WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x216")]+Math[_0x423d("0x284")](60*WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x2d1")]*1e3));var f=WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0x216")];if(WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0x137")](_0x423d("0xc1"))||(WebSAGE.InkSage[e][_0x423d("0xa9")].histCalls=[]),!WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xc1")][_0x423d("0x137")](s)){var d=_0x423d("0x89")+s+"&U="+f/1e3+_0x423d("0x24a")+"&B=histdata("+e+","+s+_0x423d("0x338")+'"'+_0x423d("0x1b8");WebSAGE[_0x423d("0x46")]=WebSAGE[_0x423d("0x46")]+2e3,setTimeout(d,WebSAGE[_0x423d("0x46")]),WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xc1")][s]=!0}}}if(a[_0x423d("0xcd")]("PNT#")>=0)if(WebSAGE.InkSage[e][_0x423d("0xa9")].pnts[_0x423d("0x1d3")]>a.split("#")[1]-1)"????"!==(h=WebSAGE[_0x423d("0x9d")](WebSAGE[_0x423d("0x81")][e].parent[_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1],WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")]))?n[r][i]=h:n[_0x423d("0x120")](-1,1);else n.splice(-1,1);else if(a[_0x423d("0xcd")](_0x423d("0x1e5"))>=0){var h;if(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")].length>a[_0x423d("0x18d")]("#")[1]-1)(h=WebSAGE.valorTagueado(WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1],WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")]))!==_0x423d("0x1de")&&(n[r][i]=WebSAGE[_0x423d("0x81")][e].parent.pnts[a[_0x423d("0x18d")]("#")[1]-1]);else n[_0x423d("0x120")](-1,1)}else a[_0x423d("0xcd")](_0x423d("0x16a"))>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")].length>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0x1f7")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a.split("#")[1]-1])):a[_0x423d("0xcd")](_0x423d("0x1db"))>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][_0x423d("0x1d3")]>a.split("#")[1]-1&&(n[r][i]=128&WebSAGE[_0x423d("0x1f7")](WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1])?1:0):a[_0x423d("0xcd")](_0x423d("0x2a1"))>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].pnts.length>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE.getInfLim(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].pnts[a[_0x423d("0x18d")]("#")[1]-1])):a[_0x423d("0xcd")](_0x423d("0x1e3"))>=0?WebSAGE.InkSage[e][_0x423d("0xa9")].pnts[_0x423d("0x1d3")]>a.split("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0x2b7")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1])):a[_0x423d("0xcd")](_0x423d("0x44"))>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][_0x423d("0x1d3")]>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0xf7")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1])):a[_0x423d("0xcd")](_0x423d("0x26f"))>=0?WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")][_0x423d("0xb3")][_0x423d("0x1d3")]>a.split("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0x345")](WebSAGE.InkSage[e][_0x423d("0xa9")][_0x423d("0xb3")][a[_0x423d("0x18d")]("#")[1]-1])):a[_0x423d("0xcd")](_0x423d("0xdb"))>=0&&WebSAGE.InkSage[e][_0x423d("0xa9")].pnts[_0x423d("0x1d3")]>a[_0x423d("0x18d")]("#")[1]-1&&(n[r][i]=WebSAGE[_0x423d("0x28e")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].pnts[a.split("#")[1]-1]))}}catch(e){}}))})),typeof WebSAGE[_0x423d("0x81")][e].parent.vw!=_0x423d("0x197")&&(WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vw[_0x423d("0x344")](WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vgTableName[0],vega[_0x423d("0x135")]()[_0x423d("0x333")]((function(e){return!0}))[_0x423d("0x15b")](n))[_0x423d("0xd7")](),WebSAGE[_0x423d("0x81")][e].parent.vw[_0x423d("0x9c")]((function(){WebSAGE[_0x423d("0x81")][e][_0x423d("0xa9")].vw[_0x423d("0x1bc")]().then((function(t){WebSAGE[_0x423d("0x81")][e].parent.vg[_0x423d("0xf9")](t)}))})))}},WebSAGE[_0x423d("0x25f")]=function(e,t,n){WebSAGE[_0x423d("0xb8")]=t,WebSAGE[_0x423d("0x5b")]=n,window[_0x423d("0x265")]((function(e){window[_0x423d("0x2ed")][_0x423d("0x19")](e)}),500,n),window[_0x423d("0x68")]((function e(t,n){var r=e[_0x423d("0x1be")]||t;e[_0x423d("0x1be")]=e[_0x423d("0x2d3")]||n,e[_0x423d("0x2d3")]=r,window[_0x423d("0x2ed")][_0x423d("0x19")](e[_0x423d("0x2d3")]),window[_0x423d("0x2ed")][_0x423d("0x26c")](e.ida)}),e,t,n)},WebSAGE.flipOut=function(e){var t=window[_0x423d("0x248")][_0x423d("0xfb")](e);null!==t&&(void 0===t.inittransform&&(null===t[_0x423d("0x2e")](null,_0x423d("0x14"))?t[_0x423d("0x183")]="":t[_0x423d("0x183")]=t.getAttributeNS(null,"transform")),window.d3.select(t).transition()[_0x423d("0x96")](1250)[_0x423d("0x29c")](_0x423d("0x14"),_0x423d("0x20")+t[_0x423d("0x85")]().x+_0x423d("0x78")+t[_0x423d("0x183")]+_0x423d("0x1a0")))},WebSAGE[_0x423d("0x26c")]=function(e){var t=window[_0x423d("0x248")].getElementById(e);null!==t&&(void 0===t.inittransform&&(null===t[_0x423d("0x2e")](null,_0x423d("0x14"))?t[_0x423d("0x183")]="":t[_0x423d("0x183")]=t[_0x423d("0x2e")](null,_0x423d("0x14"))),window.d3[_0x423d("0x2bf")](t)[_0x423d("0xc2")]().duration(1250).attr(_0x423d("0x14"),t[_0x423d("0x183")]+_0x423d("0x2a8")))},_0x423d("0x14a"),WebSAGE[_0x423d("0x1c")]=function(){$[_0x423d("0x231")]({url:_0x423d("0x309")+WebSAGE.lstpnt+_0x423d("0x182")+Math[_0x423d("0x2bc")](),dataType:_0x423d("0x1ea"),success:WebSAGE.getJSONData_onSuccess,headers:{"Content-Type":"application/json"}})},WebSAGE[_0x423d("0x179")]=function(e){var t,n,r,i,a,o,u,s,l,c,f,d,h,p,x,g,m,v,_,y,b;new Array;if(typeof e===_0x423d("0x26a")?b=JSON.parse(e):typeof e===_0x423d("0x58")&&(b=e),b.hasOwnProperty(_0x423d("0x1b7"))&&(b=b.data),b[_0x423d("0x137")]("tags")){if(0==b.tags.length)return;for(t=0;t<b[_0x423d("0x292")].length;t++)o=(i=b[_0x423d("0x292")][t])[_0x423d("0x153")],i[_0x423d("0x137")](_0x423d("0xc0"))||(i.type=typeof i[_0x423d("0x11d")]==_0x423d("0x301")?"bool":_0x423d("0x215")),i[_0x423d("0x137")](_0x423d("0x8"))||(i[_0x423d("0x8")]=!0),i[_0x423d("0x137")](_0x423d("0x2ec"))||(i[_0x423d("0x2ec")]={}),i[_0x423d("0x2ec")].hasOwnProperty(_0x423d("0x34c"))||(i.parameters[_0x423d("0x34c")]={}),i[_0x423d("0x2ec")].hasOwnProperty(_0x423d("0x2ef"))||(i[_0x423d("0x2ec")][_0x423d("0x2ef")]={}),i[_0x423d("0x2ec")].hasOwnProperty(_0x423d("0x1dd"))||(i[_0x423d("0x2ec")].LowAlarmLimit={}),u=parseInt(i[_0x423d("0x2ec")][_0x423d("0x34c")][_0x423d("0x1ca")])||NaN,a=isNaN(u)||0===u?t+1:u,NPTS[o]=a,TAGS[a]=o,DCRS[a]=i[_0x423d("0x2ec")][_0x423d("0x34c")][_0x423d("0x1c9")]||o,SUBS[a]=i[_0x423d("0x2ec")][_0x423d("0x34c")].LocationLevel0||"",BAYS[a]=i[_0x423d("0x2ec")][_0x423d("0x34c")][_0x423d("0xd")]||"",T[a]=i.parameters[_0x423d("0x34c")][_0x423d("0x86")]||(new Date)[_0x423d("0x1d0")](),ANOTS[a]=i[_0x423d("0x2ec")][_0x423d("0x34c")][_0x423d("0x1e4")]||"",i[_0x423d("0xc0")]===_0x423d("0x215")?(LIMSUPS[a]=parseFloat(i.parameters.HighAlarmLimit.Value||Number[_0x423d("0x14d")]),LIMINFS[a]=parseFloat(i[_0x423d("0x2ec")][_0x423d("0x1dd")][_0x423d("0x34c")]||Number[_0x423d("0x20a")]),V[a]=i[_0x423d("0x1d4")],F[a]=i[_0x423d("0x8")]?32:160):"bool"===i[_0x423d("0xc0")]?(STONS[a]=i.parameters[_0x423d("0x34c")][_0x423d("0x252")]||"_TRUE_",STOFS[a]=i.parameters[_0x423d("0x34c")][_0x423d("0x2ee")]||_0x423d("0x21a"),F[a]=i[_0x423d("0x8")]?0:128,i[_0x423d("0x1d4")]?(V[a]=0,F[a]=2|F[a]):(V[a]=1,F[a]=1|F[a]),0!==(i[_0x423d("0x2ec")][_0x423d("0x34c")][_0x423d("0xf1")]||0)&&(V[a]=i.value?1:0,F[a]=F[a]|i[_0x423d("0x1d4")]?3:0)):i[_0x423d("0xc0")]===_0x423d("0x26a")&&(LIMSUPS[a]=parseFloat(i.parameters[_0x423d("0x2ef")][_0x423d("0x34c")]||Number.POSITIVE_INFINITY),LIMINFS[a]=parseFloat(i[_0x423d("0x2ec")][_0x423d("0x1dd")][_0x423d("0x34c")]||Number.NEGATIVE_INFINITY),V[a]=i.value,F[a]=i[_0x423d("0x8")]?0:128),F[a]=F[a]|(!1|i[_0x423d("0x2ec")].Value[_0x423d("0x12d")]?256:0);var w=new Date;return Data=w[_0x423d("0x39")](),Sha1Ana=Data,Sha1Dig=Data,void setTimeout((function(){WebSAGE.showValsSVG()}),50)}if(b.hasOwnProperty(_0x423d("0x99")))for(_=0,t=0;t<b.valueRanges[_0x423d("0x1d3")];t++)if(!(s=b[_0x423d("0x99")][t])[_0x423d("0x137")](_0x423d("0x1f3"))||s.majorDimension===_0x423d("0x4c"))for(n=0;n<s[_0x423d("0x154")][_0x423d("0x1d3")];n++){for(i=s[_0x423d("0x154")][n],x=null,g=!0,m=null,o=null,v=null,h=null,p=null,f=null,d=null,l=null,c=null,y=!1,r=0;r<i[_0x423d("0x1d3")];r++)switch(typeof i[r]){case"boolean":null!==f&&null===d&&(d=i[r]),null===f&&(f=i[r]);break;case _0x423d("0x24c"):null!==h&&null===p&&(p=i[r]),null===h&&(h=i[r]);break;case _0x423d("0x26a"):null!==l&&null===c&&(c=i[r]),null===l&&(l=i[r])}null!==h?(x=h,null!==l&&isNaN(parseFloat(l))?o=l:null!==c&&isNaN(parseFloat(c))&&(o=c)):isNaN(parseFloat(l))?isNaN(parseFloat(c))||(x=parseFloat(c),null!==l&&isNaN(parseFloat(l))&&(o=l)):(x=parseFloat(l),null!==c&&isNaN(parseFloat(c))&&(o=c)),null===x&&null!==f?(x=f?1:0,y=!0,null!==d&&(g=d)):(null!==f&&(g=f),null!==p&&(m=p)),null===o||""===o?o=i[_0x423d("0x201")]+"-"+(n+1):null!==c&&(v=c),a=++_,NPTS[o]=a,TAGS[a]=o,DCRS[a]=v||o,SUBS[a]=i[_0x423d("0x201")],BAYS[a]="",T[a]=m||(new Date)[_0x423d("0x1d0")](),ANOTS[a]="",y?(STONS[a]=_0x423d("0x1"),STOFS[a]="FALSE",F[a]=i.quality?32:160,x?(V[a]=0,F[a]=2|F[a]):(V[a]=1,F[a]=1|F[a])):(STONS[a]="TRUE",STOFS[a]=_0x423d("0x30d"),LIMSUPS[a]=999999999,LIMINFS[a]=-999999999,V[a]=x,F[a]=g?0:128)}if(b.hasOwnProperty(_0x423d("0xc0"))&&b[_0x423d("0xc0")]===_0x423d("0x1f5")){if(null===SVGDoc)return;WebSAGE[_0x423d("0x1a")]=0,WebSAGE[_0x423d("0x27d")]=0,WebSAGE[_0x423d("0x47")]=ScreenViewer_SVGMaxWidth,WebSAGE[_0x423d("0xa1")]=ScreenViewer_SVGMaxHeight;var S=0,k=0;typeof b[_0x423d("0x20e")]===_0x423d("0x26a")&&SVGDoc[_0x423d("0xfb")](b[_0x423d("0x20e")])?(S=SVGDoc.getElementById(b[_0x423d("0x20e")])[_0x423d("0x85")]().x+SVGDoc[_0x423d("0xfb")](b[_0x423d("0x20e")])[_0x423d("0x85")]()[_0x423d("0x247")]/2,k=SVGDoc[_0x423d("0xfb")](b[_0x423d("0x20e")]).getBBox().y+SVGDoc[_0x423d("0xfb")](b[_0x423d("0x20e")])[_0x423d("0x85")]()[_0x423d("0x132")]/2):typeof b[_0x423d("0x20e")]===_0x423d("0x58")&&(S=b[_0x423d("0x20e")].x||0,k=b.target.y||0);var E=WebSAGE[_0x423d("0x47")]/b[_0x423d("0x2c9")],A=WebSAGE[_0x423d("0xa1")]/b[_0x423d("0x2c9")],C=WebSAGE[_0x423d("0x1a")]-(E-WebSAGE[_0x423d("0x47")])*((S-WebSAGE[_0x423d("0x1a")])/WebSAGE[_0x423d("0x47")]),D=WebSAGE[_0x423d("0x27d")]-(A-WebSAGE.g_zpH)*((k-WebSAGE.g_zpY)/WebSAGE[_0x423d("0xa1")]);return WebSAGE[_0x423d("0x1a")]=C,WebSAGE[_0x423d("0x27d")]=D,WebSAGE[_0x423d("0x47")]=E,WebSAGE[_0x423d("0xa1")]=A,SVGDoc[_0x423d("0x122")](null,_0x423d("0x267"),WebSAGE[_0x423d("0x1a")]+" "+WebSAGE[_0x423d("0x27d")]+" "+WebSAGE[_0x423d("0x47")]+" "+WebSAGE[_0x423d("0xa1")]),void $(_0x423d("0x9"))[_0x423d("0x12e")](_0x423d("0x60"),_0x423d("0x1b9"))}if(b[_0x423d("0x137")](_0x423d("0xc0"))&&b[_0x423d("0xc0")]===_0x423d("0x13f")){if(null===SVGDoc)return;return WebSAGE.g_zpX+=b.dx,WebSAGE[_0x423d("0x27d")]+=b.dy,void SVGDoc[_0x423d("0x122")](null,_0x423d("0x267"),WebSAGE[_0x423d("0x1a")]+" "+WebSAGE[_0x423d("0x27d")]+" "+WebSAGE[_0x423d("0x47")]+" "+WebSAGE[_0x423d("0xa1")])}if(b[_0x423d("0x137")](_0x423d("0xc0"))&&b[_0x423d("0xc0")]===_0x423d("0x124")){if(null===SVGDoc)return;return WebSAGE[_0x423d("0x1a")]=0,WebSAGE[_0x423d("0x27d")]=0,WebSAGE[_0x423d("0x47")]=ScreenViewer_SVGMaxWidth,WebSAGE[_0x423d("0xa1")]=ScreenViewer_SVGMaxHeight,void SVGDoc.setAttributeNS(null,_0x423d("0x267"),WebSAGE[_0x423d("0x1a")]+" "+WebSAGE[_0x423d("0x27d")]+" "+WebSAGE[_0x423d("0x47")]+" "+WebSAGE[_0x423d("0xa1")])}if(b[_0x423d("0x137")](_0x423d("0xc0"))&&b[_0x423d("0xc0")]===_0x423d("0x272")){if(null===SVGDoc)return;document[_0x423d("0xfb")]("ZOOMIN_ID")[_0x423d("0x17c")][_0x423d("0x21f")]=b.zoomEnabled?"":"none",document[_0x423d("0xfb")](_0x423d("0x166"))[_0x423d("0x17c")][_0x423d("0x21f")]=b.zoomEnabled?"":_0x423d("0x9e"),document[_0x423d("0xfb")]("MOVE_ID")[_0x423d("0x17c")][_0x423d("0x21f")]=b[_0x423d("0xe0")]?"":_0x423d("0x9e")}if(b[_0x423d("0x137")](_0x423d("0xc0"))&&b[_0x423d("0xc0")]===_0x423d("0x307")&&(!1===b[_0x423d("0xe0")]?window[_0x423d("0x101")]=!0:delete window[_0x423d("0x101")]),!b[_0x423d("0x137")](_0x423d("0xc0"))||b.type!==_0x423d("0x1c2")||null!==SVGDoc){if(b.hasOwnProperty(_0x423d("0xc0"))&&b[_0x423d("0xc0")]===_0x423d("0x2e4")){if(null===SVGDoc)return;document[_0x423d("0xfb")](_0x423d("0x1ce"))[_0x423d("0x17c")][_0x423d("0x21f")]=_0x423d("0x9e")}if(b[_0x423d("0x137")]("type")&&b[_0x423d("0xc0")]===_0x423d("0x2eb")&&(LT=b.lt,VK=b.vk),b[_0x423d("0x137")](_0x423d("0xc0"))&&"resetData"===b[_0x423d("0xc0")]){if(null===SVGDoc)return;TAGS=[],NPTS=[],SUBS=[],BAYS=[],DCRS=[],ANOTS=[],STONS=[],STOFS=[],LIMSUPS=[],LIMINFS=[]}}},WebSAGE.callServer=function(){if($(_0x423d("0x258")).css(_0x423d("0x21f"))==_0x423d("0x9e")){Data="",WebSAGE[_0x423d("0x230")]=setTimeout(WebSAGE.falhaTudo,WebSAGE[_0x423d("0xd8")]),WebSAGE[_0x423d("0x1c")](),WebSAGE.g_toutStatusID=setTimeout(WebSAGE[_0x423d("0x8d")],WebSAGE[_0x423d("0x2af")]/2),WebSAGE.g_toutID=setTimeout(WebSAGE[_0x423d("0x229")],WebSAGE[_0x423d("0x2af")]),WebSAGE[_0x423d("0x13a")]++}},WebSAGE[_0x423d("0x8d")]=function(){BrowserDetect.browser==_0x423d("0x1a8")&&typeof WebSAGE[_0x423d("0x21")]==_0x423d("0x197")&&(WebSAGE[_0x423d("0x21")]=1,setTimeout((function(){var e=document[_0x423d("0x165")]("MouseEvents");e[_0x423d("0x3")](_0x423d("0x3a"),!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,SVGDoc),SVGDoc.dispatchEvent(e)}),100),setTimeout((function(){var e=document[_0x423d("0x165")](_0x423d("0x111"));e[_0x423d("0x3")](_0x423d("0x317"),!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),SVGDoc.dispatchEvent(e)}),110))};var PBIColorBad=_0x423d("0x109"),PBIColorGood=_0x423d("0x2f5"),PBIColorBackground=_0x423d("0x9e"),PBIColorForeground="#333333",PBIColorSelected=_0x423d("0x107"),PBIColorNegative="#E81123",PBIColorPositive="#3bb44a",PBIColorMaximum=_0x423d("0xeb"),PBIColorMinimum=_0x423d("0x3d"),PBIColorTable=new Array,ScreenViewer_Background=_0x423d("0x9e"),xPlain=!0,optval=[],opttxt=[],optfilt=[],optgroup=[],optionhtml="";function lista_telas(){}var tela="",indtela=0,hvalues=[],powerbi,powerbi;function scadavis(e,t,n){var r=this,i=_0x423d("0x246");_0x423d("0x6c");"object"==typeof e?(r.container=e[_0x423d("0x14c")]||"",r[_0x423d("0x19d")]=e[_0x423d("0x19d")]||"",r[_0x423d("0x104")]=e[_0x423d("0x104")]||_0x423d("0x136"),r[_0x423d("0x180")]=e[_0x423d("0x180")]||""):(r[_0x423d("0x14c")]=e||"",r[_0x423d("0x19d")]=apikey||"",r[_0x423d("0x104")]=t||_0x423d("0x136"),r[_0x423d("0x180")]=n||""),r.iframe=null,r[_0x423d("0x1fd")]=!1,r[_0x423d("0x5c")]=!1,r[_0x423d("0x15d")]="*",r[_0x423d("0x19e")]={data:{type:_0x423d("0x292"),tags:[]}},r[_0x423d("0x14e")]={},r[_0x423d("0x198")]={},r[_0x423d("0x21e")]={},r[_0x423d("0x2a3")]={},r[_0x423d("0x1c0")]=0,r[_0x423d("0x1af")]=null,r[_0x423d("0x146")]=null,r.moveobj=null,r[_0x423d("0x24e")]=null,r[_0x423d("0x190")]=null,r.hidewatermarkobj=null,r.resetobj=null,r[_0x423d("0x23d")]="",r[_0x423d("0x1c8")]=null,r[_0x423d("0xbe")]=null,r.ltvkobj=null,r[_0x423d("0x34d")]=1,r[_0x423d("0x139")]=0,r[_0x423d("0x1b5")]=function(){var e=function(){return(65536*(1+Math[_0x423d("0x2bc")]())|0)[_0x423d("0x39")](16)[_0x423d("0xbf")](1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},r[_0x423d("0x340")]=function(e){var t=document[_0x423d("0x2e8")](_0x423d("0x4e"));return t[_0x423d("0x30c")]=e[_0x423d("0x2ae")](),t[_0x423d("0x80")]},r[_0x423d("0x1b5")](),typeof r[_0x423d("0x14c")]===_0x423d("0x26a")&&(r[_0x423d("0x14c")]=document[_0x423d("0xfb")](r[_0x423d("0x14c")]),null===r.container&&(r[_0x423d("0x14c")]=document[_0x423d("0x1d1")])),r[_0x423d("0x104")][_0x423d("0xcd")]("scrolling"),r[_0x423d("0x163")]=function(e,t){var n,i,a;t==e[_0x423d("0x1d3")]-1?e[t]():(i=!1,(n=document[_0x423d("0x2e8")](_0x423d("0x269"))).type=_0x423d("0x237"),n[_0x423d("0x11a")]=e[t],n[_0x423d("0x17a")]=n[_0x423d("0x37")]=function(){i||this[_0x423d("0x118")]&&this.readyState!=_0x423d("0xd3")||(i=!0,r.loadScript(e,t+1))},(a=document[_0x423d("0xb9")](_0x423d("0x269"))[0])[_0x423d("0x211")][_0x423d("0x254")](n,a))},WebSAGE.reload=function(e){},WebSAGE.callServer=function(){},V[99999]=0,F[99999]=0,V[99989]=0,F[99989]=0;var a=_0x423d("0x159");void 0!==r[_0x423d("0x14c")][_0x423d("0x30c")]?r.container.appendChild(r[_0x423d("0x340")](a)):r[_0x423d("0x14c")].insertAdjacentHTML("afterend",a),r[_0x423d("0x281")]=document[_0x423d("0xfb")](_0x423d("0xff"));var o=_0x423d("0x1ab");void 0!==r[_0x423d("0x14c")][_0x423d("0x30c")]?r[_0x423d("0x14c")][_0x423d("0x8a")](r.createElementFromHTML(o)):r[_0x423d("0x14c")][_0x423d("0x170")]("afterend",o);var u=_0x423d("0xa2");void 0!==r[_0x423d("0x14c")][_0x423d("0x30c")]?r[_0x423d("0x14c")].appendChild(r[_0x423d("0x340")](u)):r.container[_0x423d("0x170")](_0x423d("0x2b8"),u),window[_0x423d("0xb")]=function(e,t){var n={data:{type:_0x423d("0xd1"),id:"3",attributes:{version:"1.0.1",event:{target:{id:e[_0x423d("0x20e")].id},currentTarget:{id:e[_0x423d("0x88")].id},clientX:e[_0x423d("0x142")],ClientY:e[_0x423d("0x31f")],ctrlKey:e[_0x423d("0x294")],altKey:e[_0x423d("0x7f")],shiftKey:e[_0x423d("0x176")],metaKey:e[_0x423d("0x2da")],which:e.which,timeStamp:e[_0x423d("0x71")]},tag:TAGS[t]},links:{self:"http://scadavis.io/synoptic/synoptic.html"}},meta:{copyright:"2018-1019 Ricardo Olsen / DSC Systems. All rights reserved.",authors:[_0x423d("0x194")]},jsonapi:{version:"1.0"}};window[_0x423d("0xd0")](n,"*")},window.addEventListener(_0x423d("0x31c"),(function(e){if(typeof e[_0x423d("0x1b7")]==_0x423d("0x26a")&&e[_0x423d("0x1b7")][_0x423d("0xcd")](_0x423d("0x19f"))>=0){var t=document[_0x423d("0xfb")]("svgdiv");t[_0x423d("0x30c")]=e.data,window.$(t[_0x423d("0xca")])[_0x423d("0x12e")](_0x423d("0x1b2"),VisorTelas_BackgroundSVG),t[_0x423d("0xca")].id="svgid",setTimeout((function(){WebSAGE[_0x423d("0xef")]();var e={data:{type:_0x423d("0xea"),id:"2",attributes:{version:_0x423d("0x246"),tagsList:$W[_0x423d("0x245")].slice(0,-1)},links:{self:"http://scadavis.io/synoptic/synoptic.html"}},meta:{copyright:_0x423d("0xac"),authors:[_0x423d("0x194")]},jsonapi:{version:_0x423d("0x98")}};setTimeout((function(){window[_0x423d("0xd0")](e,"*")}),610)}),600)}else"object"==typeof e[_0x423d("0x1b7")]&&WebSAGE[_0x423d("0x179")](e[_0x423d("0x1b7")])}),!1);var s={data:{type:_0x423d("0x18e"),id:"1",attributes:{version:_0x423d("0x246")},links:{self:_0x423d("0x116")}},meta:{copyright:_0x423d("0xf3"),authors:[_0x423d("0x194")]},jsonapi:{version:_0x423d("0x98")}};window[_0x423d("0xd0")](s,"*"),r[_0x423d("0x2ea")]=function(e){if(r.svgobj=null,r[_0x423d("0x5c")]=!1,r[_0x423d("0x180")]=e,""!==r[_0x423d("0x180")]&&0===r[_0x423d("0x139")]){r[_0x423d("0x139")]=1;var t=new XMLHttpRequest;t[_0x423d("0xd2")](_0x423d("0x134"),r[_0x423d("0x180")]),t.onload=function(){200===t.status&&(r[_0x423d("0x139")]=0,r.componentloaded?window[_0x423d("0xd0")](t.responseText,r.domain):r[_0x423d("0x1af")]=t[_0x423d("0x2ab")])},t.onreadystatechange=function(e){4===t[_0x423d("0x118")]&&(200===t[_0x423d("0x311")]||(r[_0x423d("0x139")]=0,console[_0x423d("0x212")](_0x423d("0x261")+t[_0x423d("0x23b")])))},t[_0x423d("0x27c")]()}},r.updateValues=function(e){if(r.readyfordata){typeof e===_0x423d("0x58")&&null!==e&&Object[_0x423d("0x1da")](e)[_0x423d("0x10d")]((function(t,n){var i;t in r[_0x423d("0x14e")]?i=r.npts[t]:(i=++r[_0x423d("0x1c0")],r[_0x423d("0x14e")][t]=i),r[_0x423d("0x198")][t]=e[t],r[_0x423d("0x21e")][t]=0}));var t={data:{type:"tags",tags:[]}};Object[_0x423d("0x1da")](r[_0x423d("0x14e")]).map((function(e,n){t[_0x423d("0x1b7")][_0x423d("0x292")][n]={},t.data[_0x423d("0x292")][n][_0x423d("0x153")]=e,t[_0x423d("0x1b7")].tags[n].value=r[_0x423d("0x198")][e],t.data[_0x423d("0x292")][n][_0x423d("0x8")]=!(128&r[_0x423d("0x21e")][e]),"number"==typeof r.vals[e]?t.data[_0x423d("0x292")][n][_0x423d("0xc0")]=_0x423d("0x215"):"boolean"==typeof r[_0x423d("0x198")][e]?t[_0x423d("0x1b7")][_0x423d("0x292")][n][_0x423d("0xc0")]="bool":t[_0x423d("0x1b7")][_0x423d("0x292")][n][_0x423d("0xc0")]=_0x423d("0x26a"),t[_0x423d("0x1b7")][_0x423d("0x292")][n][_0x423d("0x2ec")]={Value:{TagClientItem:r[_0x423d("0x14e")][e],Alarmed:256==(256&r[_0x423d("0x21e")][e]),Desc:r[_0x423d("0x2a3")][e]}}})),r.readyfordata&&window[_0x423d("0xd0")](t,r[_0x423d("0x15d")])}},r[_0x423d("0xdc")]=function(e,t,n,i,a){var o;if(n=n||!1,i=i||!1,a=a||e,e in r.npts?o=r[_0x423d("0x14e")][e]:(o=++r[_0x423d("0x1c0")],r[_0x423d("0x14e")][e]=o),r[_0x423d("0x198")][e]=t,r[_0x423d("0x21e")][e]=(n?128:0)|(i?256:0),r[_0x423d("0x2a3")][e]=a,r[_0x423d("0x5c")]){var u={data:{type:"tags",tags:[]}};u[_0x423d("0x1b7")][_0x423d("0x292")][0]={},u[_0x423d("0x1b7")][_0x423d("0x292")][0][_0x423d("0x153")]=e,u.data[_0x423d("0x292")][0][_0x423d("0x1d4")]=t,u.data[_0x423d("0x292")][0][_0x423d("0x8")]=!(128&r.qualifs[e]),"number"==typeof t?u[_0x423d("0x1b7")][_0x423d("0x292")][0][_0x423d("0xc0")]=_0x423d("0x215"):"boolean"==typeof t?u[_0x423d("0x1b7")][_0x423d("0x292")][0][_0x423d("0xc0")]=_0x423d("0x301"):u[_0x423d("0x1b7")].tags[0][_0x423d("0xc0")]=_0x423d("0x26a"),u[_0x423d("0x1b7")][_0x423d("0x292")][0][_0x423d("0x2ec")]={Value:{TagClientItem:o,Alarmed:256==(256&r[_0x423d("0x21e")][e]),Desc:r.descriptions[e]}},window[_0x423d("0xd0")](u,r[_0x423d("0x15d")])}return r[_0x423d("0x5c")]},r.storeValue=function(e,t,n,i,a){var o;return n=n||!1,i=i||!1,a=a||e,e in r[_0x423d("0x14e")]?o=r.npts[e]:(o=++r.npt,r[_0x423d("0x14e")][e]=o),r[_0x423d("0x198")][e]=t,r.qualifs[e]=(n?128:0)|(i?256:0),r[_0x423d("0x2a3")][e]=a,r.readyfordata},r[_0x423d("0x187")]=function(){r.npt=0,r[_0x423d("0x14e")]={},r[_0x423d("0x198")]={},r.qualifs={},r.descriptions={};var e={data:{type:"resetData"}};r[_0x423d("0x5c")]?window[_0x423d("0xd0")](e,r.domain):r[_0x423d("0x114")]=e},r.getValue=function(e){return e in r[_0x423d("0x198")]?r[_0x423d("0x198")][e]:null},r[_0x423d("0x90")]=function(){return r.apikey},r.getVersion=function(){return i},r[_0x423d("0x1ba")]=function(){return r[_0x423d("0x281")]},r[_0x423d("0x2f4")]=function(){return 0==r[_0x423d("0x1fd")]?0:0==r[_0x423d("0x5c")]?1:2},r[_0x423d("0x31")]=function(){return i},r[_0x423d("0x2b")]=function(){return r.tagsList},r.moveBy=function(e,t,n){var i={data:{type:"moveBy",dx:e=e||0,dy:t=t||0,animate:n=n||!1}};r[_0x423d("0x5c")]?window.postMessage(i,r[_0x423d("0x15d")]):r[_0x423d("0x40")]=i},r[_0x423d("0x1f5")]=function(e,t,n){e=e||1.1,this[_0x423d("0x34d")]=e,n=n||!1;var i={data:{type:_0x423d("0x1f5"),zoomLevel:e,target:t,animate:n}};r[_0x423d("0x5c")]?window[_0x423d("0xd0")](i,r[_0x423d("0x15d")]):r[_0x423d("0x146")]=i},r[_0x423d("0x124")]=function(e){this.zoomlevel=1,e=e||!1;var t={data:{type:_0x423d("0x124"),animate:e}};r[_0x423d("0x5c")]&&window[_0x423d("0xd0")](t,r[_0x423d("0x15d")])},r[_0x423d("0x272")]=function(e,t){(typeof e===_0x423d("0x197")||e)&&(e=!0),(typeof t===_0x423d("0x197")||t)&&(t=!0);var n={data:{type:_0x423d("0x272"),panEnabled:e,zoomEnabled:t}};r[_0x423d("0x5c")]?window[_0x423d("0xd0")](n,r[_0x423d("0x15d")]):r[_0x423d("0x24e")]=n},r[_0x423d("0x307")]=function(e,t){(typeof e===_0x423d("0x197")||e)&&(e=!0),(typeof t===_0x423d("0x197")||t)&&(t=!0);var n={data:{type:"enableMouse",panEnabled:e,zoomEnabled:t}};r.readyfordata?window.postMessage(n,r[_0x423d("0x15d")]):r[_0x423d("0x232")]=n},r[_0x423d("0x1c2")]=function(e){(typeof e===_0x423d("0x197")||e)&&(e=!0);var t={data:{type:_0x423d("0x1c2"),keyEnabled:e}};r[_0x423d("0x5c")]?window.postMessage(t,r[_0x423d("0x15d")]):r[_0x423d("0x190")]=t},r[_0x423d("0x2eb")]=function(e,t){LT=e,VK=t;var n={data:{type:"setLtVk",lt:e,vk:t}};r[_0x423d("0x5c")]?window[_0x423d("0xd0")](n,r[_0x423d("0x15d")]):r.ltvkobj=n},r.getLt=function(){return LT},r[_0x423d("0x57")]=function(){return VK},r[_0x423d("0x2e4")]=function(){var e={data:{type:_0x423d("0x2e4")}};r[_0x423d("0x5c")]?window[_0x423d("0xd0")](e,r.domain):r[_0x423d("0x290")]=e},r.on=function(e,t){var n=!1;switch(e){case _0x423d("0xea"):r[_0x423d("0x1c8")]=t,n=!0;break;case _0x423d("0xd1"):r[_0x423d("0xbe")]=t,n=!0}return n},r[_0x423d("0x1fd")]=!1,r[_0x423d("0x5c")]=!1,""!==r.svgurl&&r[_0x423d("0x2ea")](r[_0x423d("0x180")]),window.addEventListener(_0x423d("0x31c"),(function(e){if(typeof e[_0x423d("0x1b7")]===_0x423d("0x58")&&void 0!==e[_0x423d("0x1b7")][_0x423d("0x1b7")][_0x423d("0xc0")]&&"loaded"===e[_0x423d("0x1b7")].data[_0x423d("0xc0")]&&(r.componentloaded=!0,null!==r[_0x423d("0x1af")]?window[_0x423d("0xd0")](r.svgobj,"*"):""!==r[_0x423d("0x180")]&&r[_0x423d("0x2ea")](r[_0x423d("0x180")])),typeof e[_0x423d("0x1b7")]===_0x423d("0x58")&&void 0!==e[_0x423d("0x1b7")][_0x423d("0x1b7")].type&&"ready"===e[_0x423d("0x1b7")].data[_0x423d("0xc0")]){var t=e[_0x423d("0xf0")];e[_0x423d("0xf0")]==_0x423d("0x219")&&(t="*"),r[_0x423d("0x5c")]=!0,r[_0x423d("0x23d")]=e[_0x423d("0x1b7")][_0x423d("0x1b7")][_0x423d("0x308")][_0x423d("0x23d")],r[_0x423d("0x14f")](),r.zoomobj&&(e.source[_0x423d("0xd0")](r[_0x423d("0x146")],t),r[_0x423d("0x146")]=null),r.moveobj&&(window.postMessage(r.moveobj,t),r[_0x423d("0x40")]=null),r[_0x423d("0x24e")]&&(window[_0x423d("0xd0")](r[_0x423d("0x24e")],t),r.enabletoolsobj=null),r[_0x423d("0x232")]&&(window[_0x423d("0xd0")](r[_0x423d("0x232")],t),r.enablemouseobj=null),r[_0x423d("0x190")]&&(window[_0x423d("0xd0")](r[_0x423d("0x190")],t),r[_0x423d("0x190")]=null),r[_0x423d("0x63")]&&(window[_0x423d("0xd0")](r[_0x423d("0x63")],t),r[_0x423d("0x63")]=null),r.hidewatermarkobj&&(window.postMessage(r[_0x423d("0x290")],t),r.hidewatermarkobj=null),r.onready&&r[_0x423d("0x1c8")]()}"object"==typeof e[_0x423d("0x1b7")]&&void 0!==e[_0x423d("0x1b7")][_0x423d("0x1b7")].type&&e[_0x423d("0x1b7")][_0x423d("0x1b7")][_0x423d("0xc0")]===_0x423d("0xd1")&&r[_0x423d("0xbe")]&&r[_0x423d("0xbe")](e[_0x423d("0x1b7")][_0x423d("0x1b7")][_0x423d("0x308")][_0x423d("0x158")],e[_0x423d("0x1b7")][_0x423d("0x1b7")].attributes[_0x423d("0x9a")])}))}window[_0x423d("0x316")]=!1,function(e){!function(t){!function(t){"use strict";var n=e.extensibility.utils.dataview.DataViewObjectsParser;t.VisualSettings=class extends n{constructor(){super(...arguments),this.scadavis_settings=new r}};class r{constructor(){this.svgurl="",this.zoomlevel=1,this.licensetext="",this.validationkey=""}}t.scadavisSettings=r}(t.visual||(t.visual={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={})),function(e){!function(e){!function(e){"use strict";class t{constructor(e){this.tm=0,this.target=e.element,this.host=e.host,"undefined"!=typeof document&&(this.svgraph=new scadavis({container:this.target}),this.target.children[2].innerHTML='<div id="welcomediv" style="text-align:center;font-family:Segoe UI,arial,helvetica;font-size:15px;"><svg width="64px" height="64px" version="1.1" viewBox="0 0 354.33071 354.33071" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><g transform="translate(0 -698.03)"><g transform="translate(0 .71429)"><path d="m0.90434 696.62 63.865 61.536 230.07 0.10306 59.228-61.405c-137.07 0.38061-216.09 0.12678-353.17-0.23407z" fill="#555"/><path d="m105.74 799.33 45.813 45.344 16.048-0.0144v62.27l-20.229-0.24168-42.28 43.932c175.85-0.32139-19.684-0.21704 142.96-0.21713l-38.21-42.969-20.915-0.24865v-62.547l18.889-0.0179 44.034-45.06c-175.85 0.3214 16.982-0.23115-145.66-0.23115z" fill="#bbb"/><path d="m0.86814 1053.4 63.865-61.536 230.07-0.10304 59.228 61.405c-137.07-0.3807-216.09-0.1268-353.17 0.234z" fill="#555"/></g></g></svg>'+"<br>SCADAvis.io<br>Synoptic Visual<br>Version 1.0.3<br><a href='https://scadavis.io/powerbi' target='_blank'>https://scadavis.io/powerbi</a></div>",this.target.children[2].style.opacity=.7)}update(e){if(e&&e.dataViews&&e.dataViews[0]&&e.viewport){var n=this;this.visualSettings=t.parseSettings(e&&e.dataViews&&e.dataViews[0]);var r=document.getElementById("welcomediv");r&&(r.style.fontSize=8+e.viewport.width/30+"px");var i=!1,a=this.visualSettings.scadavis_settings.svgurl!=this.svgraph.svgurl;if(void 0!==e.dataViews[0].metadata.objects&&void 0!==e.dataViews[0].metadata.objects.svgurl&&!a||""!=this.visualSettings.scadavis_settings.svgurl){document.getElementById("svgdiv").style.display="";try{this.host.colorPalette.hasOwnProperty("colors")&&(PBIColorTable=this.host.colorPalette.colors.slice(),PBIColorBackground=this.host.colorPalette.background,PBIColorForeground=this.host.colorPalette.foreground,PBIColorBad=this.host.colorPalette.bad,PBIColorGood=this.host.colorPalette.good,PBIColorMaximum=this.host.colorPalette.maximum,PBIColorMinimum=this.host.colorPalette.minimum)}catch(e){}try{this.visualSettings.scadavis_settings.licensetext==this.svgraph.getLt()&&this.visualSettings.scadavis_settings.validationkey==this.svgraph.getVk()||(a=!0),this.svgraph.setLtVk(this.visualSettings.scadavis_settings.licensetext,this.visualSettings.scadavis_settings.validationkey)}catch(e){}a&&void 0!==this.visualSettings.scadavis_settings.svgurl&&(this.svgraph.resetData(),""!==this.visualSettings.scadavis_settings.svgurl&&(document.getElementById("SVTEXT").style.display="none",this.svgraph.loadURL(this.visualSettings.scadavis_settings.svgurl)),this.svgraph.enableMouse(!1,!1),i=!0);var o=this.svgraph.getIframe(),u=this.visualSettings.scadavis_settings.zoomlevel!==this.svgraph.zoomlevel;i||u?(0===this.visualSettings.scadavis_settings.zoomlevel&&(this.visualSettings.scadavis_settings.zoomlevel=1),o.width=e.viewport.width-5,o.height=e.viewport.height-5,this.tm&&clearTimeout(this.tm),this.tm=setTimeout((function(){n.svgraph.zoomTo(n.visualSettings.scadavis_settings.zoomlevel*(o.width<o.height?o.width/1e3:o.height/1e3))}),300)):o.width==e.viewport.width-5&&o.height==e.viewport.height-5||(o.width=e.viewport.width-5,o.height=e.viewport.height-5,this.tm&&clearTimeout(this.tm),setTimeout((function(){n.svgraph.zoomTo(n.visualSettings.scadavis_settings.zoomlevel*(o.width<o.height?o.width/1e3:o.height/1e3))}),600)),this.svgraph.resetData();var s={},l=0,c=0,f=0;if(void 0!==e.dataViews[0].categorical.values){for(f=0;f<e.dataViews[0].categorical.values.length;f++)for(l=0;l<e.dataViews[0].categorical.values[f].values.length;l++){var d="";if(d=void 0!==e.dataViews[0].categorical.categories?e.dataViews[0].categorical.categories[f].values[l].toString():e.dataViews[0].categorical.values[f].source.displayName.toString(),s.hasOwnProperty(d)?s[d]+=e.dataViews[0].categorical.values[f].values[l]:s[d]=e.dataViews[0].categorical.values[f].values[l],void 0!==e.dataViews[0].categorical.categories){var h="";for(c=0;c<e.dataViews[0].categorical.categories.length;c++)0!=c&&(h+="|"),h+=e.dataViews[0].categorical.categories[c].values[l].toString();this.svgraph.storeValue(h,e.dataViews[0].categorical.values[f].values[l],!1,!1,h)}else this.svgraph.storeValue(d,e.dataViews[0].categorical.values[f].values[l],!1,!1,d)}const t={};Object.keys(s).sort().forEach((function(e){t[e]=s[e]})),l=0;var p=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,g=0;for(var m in t)this.svgraph.storeValue("@"+(l+1),s[m],!1,!1,m),this.svgraph.storeValue(m,s[m],!1,!1,m),p=s[m]<p?s[m]:p,x=s[m]>x?s[m]:x,g+=s[m],l++;if(this.svgraph.storeValue("@min",p,!1,!1,"min"),this.svgraph.storeValue("@max",x,!1,!1,"max"),this.svgraph.storeValue("@total",g,!1,!1,e.dataViews[0].categorical.values[0].source.displayName),g=0,void 0!==e.dataViews[0].categorical.categories)for(l=0;l<e.dataViews[0].categorical.values[0].values.length;l++)this.svgraph.storeValue("@@"+(l+1),e.dataViews[0].categorical.values[0].values[l],!1,!1,e.dataViews[0].categorical.categories[e.dataViews[0].categorical.categories.length-1].values[l].toString()),g+=parseFloat(e.dataViews[0].categorical.values[0].values[l].toString());this.svgraph.storeValue("@@min",e.dataViews[0].categorical.values[0].minLocal,!1,!1,"min"),this.svgraph.storeValue("@@max",e.dataViews[0].categorical.values[0].maxLocal,!1,!1,"max"),this.svgraph.storeValue("@@total",g,!1,!1,e.dataViews[0].categorical.values[0].source.displayName),this.svgraph.storeValue("@zero",0,!1,!1,"Zero"),this.svgraph.updateValues()}else{for(f=0;f<e.dataViews[0].categorical.categories[0].values.length;f++)if(e.dataViews[0].categorical.categories.length>1)for(c=1;c<e.dataViews[0].categorical.categories.length;c++)1==c&&(this.svgraph.storeValue(e.dataViews[0].categorical.categories[0].values[f],e.dataViews[0].categorical.categories[c].values[f],!1,!1,e.dataViews[0].categorical.categories[0].values[f]),this.svgraph.storeValue("@"+(f+1),e.dataViews[0].categorical.categories[c].values[f],!1,!1,e.dataViews[0].categorical.categories[0].values[f])),this.svgraph.storeValue(e.dataViews[0].categorical.categories[0].values[f]+"|"+e.dataViews[0].categorical.categories[c].source.displayName,e.dataViews[0].categorical.categories[c].values[f],!1,!1,e.dataViews[0].categorical.categories[0].values[f]+"|"+e.dataViews[0].categorical.categories[c].source.displayName),this.svgraph.storeValue("@["+c+"]"+(f+1),e.dataViews[0].categorical.categories[c].values[f],!1,!1,e.dataViews[0].categorical.categories[0].values[f]+"|"+e.dataViews[0].categorical.categories[c].source.displayName);else this.svgraph.storeValue(e.dataViews[0].categorical.categories[0].values[f],e.dataViews[0].categorical.categories[0].values[f],!1,!1,e.dataViews[0].categorical.categories[0].values[f]),this.svgraph.storeValue("@"+(f+1),e.dataViews[0].categorical.categories[0].values[f],!1,!1,e.dataViews[0].categorical.categories[0].values[f]),this.svgraph.storeValue("@[1]"+(f+1),e.dataViews[0].categorical.categories[0].values[f],!1,!1,e.dataViews[0].categorical.categories[0].values[f]);this.svgraph.updateValues()}}else{document.getElementById("svgdiv").style.display="none",this.svgraph.resetData(),this.visualSettings.scadavis_settings.svgurl&&""!=this.svgraph.svgurl&&(this.svgraph.svgurl="");var v="";v=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&-1==navigator.userAgent.indexOf("Android")?"<br>Go to 'Format' tool | 'SVG Source' | 'URL'<br>Enter the URL or a Base64 URI for an SVG file.<br>Try: https://scadavis.io/powerbi/powerbi-scadavis-custom-visual.svg<br>OR<br>Convert a local file to a Base64 data URI like data:image/svg+xml;base64,...":"<br>Select a local file<br><input type='button' id='loadFile' value='Load File' onclick=\"document.getElementById('fileInput').click();\" /><input type='file' id='fileInput' accept='.svg' value='' style='display:none;'><br>OR<br>Go to 'Format' tool | 'SVG Source' | 'URL'<br>Enter the URL or a Base64 URI for an SVG file.<br>Try: https://scadavis.io/powerbi/powerbi-scadavis-custom-visual.svg";var _=8+e.viewport.width/100;this.target.children[2].innerHTML='<div id="welcomediv" style="text-align:center;font-family:Segoe UI,arial,helvetica;font-size:'+_+'px;"><svg width="64px" height="64px" version="1.1" viewBox="0 0 354.33071 354.33071" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><g transform="translate(0 -698.03)"><g transform="translate(0 .71429)"><path d="m0.90434 696.62 63.865 61.536 230.07 0.10306 59.228-61.405c-137.07 0.38061-216.09 0.12678-353.17-0.23407z" fill="#555"/><path d="m105.74 799.33 45.813 45.344 16.048-0.0144v62.27l-20.229-0.24168-42.28 43.932c175.85-0.32139-19.684-0.21704 142.96-0.21713l-38.21-42.969-20.915-0.24865v-62.547l18.889-0.0179 44.034-45.06c-175.85 0.3214 16.982-0.23115-145.66-0.23115z" fill="#bbb"/><path d="m0.86814 1053.4 63.865-61.536 230.07-0.10304 59.228 61.405c-137.07-0.3807-216.09-0.1268-353.17 0.234z" fill="#555"/></g></g></svg><br>SCADAvis.io Synoptic Visual<br>Version 1.0.3<br><a href=\'https://scadavis.io/powerbi\' target=\'_blank\'>https://scadavis.io/powerbi</a><br>'+v+"</div>",this.target.children[2].style.opacity=.7,this.target.children[2].style.display="";var y=document.getElementById("fileInput");y&&y.addEventListener("change",(function(e){var t=y.files[0];if("image/svg+xml"==t.type){var r=new FileReader;r.onload=function(e){n.host.persistProperties({replace:[{objectName:"scadavis_settings",selector:null,properties:{svgurl:r.result}}]})},r.readAsDataURL(t)}}))}}}static parseSettings(t){return e.VisualSettings.parse(t)}enumerateObjectInstances(t){const n=this.visualSettings||e.VisualSettings.getDefault();return e.VisualSettings.enumerateObjectInstances(n,t)}}e.Visual=t}(e.visual||(e.visual={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={})),powerbi.visuals=powerbi.visuals||{},powerbi.visuals.plugins=powerbi.visuals.plugins||{},powerbi.visuals.plugins.sCADAvisA1696DB7096B4CBBA3B7595D70A805AF={name:"sCADAvisA1696DB7096B4CBBA3B7595D70A805AF",displayName:"SCADAvis",class:"Visual",version:"1.0.3",apiVersion:"2.5.0",create:e=>new powerbi.extensibility.visual.Visual(e),custom:!0};var Globalize=Globalize||window.Globalize||__webpack_require__(15)}).call(this,__webpack_require__(3),__webpack_require__(0),__webpack_require__(5),__webpack_require__(7).Buffer,__webpack_require__(11)(module))},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(8),i=n(9),a=n(10);function o(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=u(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|h(t.length);return 0===(e=u(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?u(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=u(e,t<0?0:0|h(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return j(e).length;t=(""+t).toLowerCase(),r=!0}}function x(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var a,o=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<u;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===s)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+s>u&&(n=u-s),a=n;a>=0;a--){for(var f=!0,d=0;d<s;d++)if(l(e,a+d)!==l(t,d)){f=!1;break}if(f)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[n+o]=u}return o}function y(e,t,n,r){return B(j(t,e.length-n),e,n,r)}function b(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return b(e,t,n,r)}function S(e,t,n,r){return B(W(t),e,n,r)}function k(e,t,n,r){return B(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,u,s,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(s=(31&l)<<6|63&a)>127&&(c=s);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(s=(15&l)<<12|(63&a)<<6|63&o)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:a=e[i+1],o=e[i+2],u=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&u)&&(s=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&u)>65535&&s<1114112&&(c=s)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return l(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?u(e,t):void 0!==n?"string"==typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):x.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),u=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),f=0;f<u;++f)if(l[f]!==c[f]){a=l[f],o=c[f];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function D(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=G(e[a]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function F(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,a){return a||P(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,a){return a||P(e,0,n,8),i.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var i=t-e;n=new s(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||F(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||F(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||F(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||F(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=0,o=1,u=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=n-1,o=1,u=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=s.isBuffer(e)?e:j(new s(e,r).toString()),u=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%u]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function W(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(5))},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),o=r[0],u=r[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,u)),c=0,f=u>0?o-4:o;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;2===u&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,s[c++]=255&t);1===u&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,u=n-i;o<u;o+=16383)a.push(c(e,o,o+16383>u?u:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=o.length;u<s;++u)r[u]=o[u],i[o.charCodeAt(u)]=u;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,o=[],u=t;u<n;u+=3)i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,u=8*i-r-1,s=(1<<u)-1,l=s>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=u;c>0;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,u,s,l=8*a-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,x=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),(t+=o+f>=1?d/s:d*Math.pow(2,1-f))*s>=2&&(o++,s/=2),o+f>=c?(u=0,o=c):o+f>=1?(u=(t*s-1)*Math.pow(2,i),o+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&u,h+=p,u/=256,i-=8);for(o=o<<i|u,l+=i;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*x}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(t,n){!function(t){var r,i,a="hasOwnProperty",o=/[\.\/]/,u=/\s*,\s*/,s=function(e,t){return e-t},l={n:{}},c=function(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]},f=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},d=Object.prototype.toString,h=String,p=Array.isArray||function(e){return e instanceof Array||"[object Array]"==d.call(e)},x=function(e,t){var n,a=i,o=Array.prototype.slice.call(arguments,2),u=x.listeners(e),l=0,d=[],h={},p=[],g=r;p.firstDefined=c,p.lastDefined=f,r=e,i=0;for(var m=0,v=u.length;m<v;m++)"zIndex"in u[m]&&(d.push(u[m].zIndex),u[m].zIndex<0&&(h[u[m].zIndex]=u[m]));for(d.sort(s);d[l]<0;)if(n=h[d[l++]],p.push(n.apply(t,o)),i)return i=a,p;for(m=0;m<v;m++)if("zIndex"in(n=u[m]))if(n.zIndex==d[l]){if(p.push(n.apply(t,o)),i)break;do{if((n=h[d[++l]])&&p.push(n.apply(t,o)),i)break}while(n)}else h[n.zIndex]=n;else if(p.push(n.apply(t,o)),i)break;return i=a,r=g,p};x._events=l,x.listeners=function(e){var t,n,r,i,a,u,s,c,f=p(e)?e:e.split(o),d=l,h=[d],x=[];for(i=0,a=f.length;i<a;i++){for(c=[],u=0,s=h.length;u<s;u++)for(n=[(d=h[u].n)[f[i]],d["*"]],r=2;r--;)(t=n[r])&&(c.push(t),x=x.concat(t.f||[]));h=c}return x},x.separator=function(e){e?(e="["+(e=h(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",o=new RegExp(e)):o=/[\.\/]/},x.on=function(e,t){if("function"!=typeof t)return function(){};for(var n=p(e)?p(e[0])?e:[e]:h(e).split(u),r=0,i=n.length;r<i;r++)!function(e){for(var n,r=p(e)?e:h(e).split(o),i=l,a=0,u=r.length;a<u;a++)i=(i=i.n).hasOwnProperty(r[a])&&i[r[a]]||(i[r[a]]={n:{}});for(i.f=i.f||[],a=0,u=i.f.length;a<u;a++)if(i.f[a]==t){n=!0;break}!n&&i.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},x.f=function(e){var t=[].slice.call(arguments,1);return function(){x.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},x.stop=function(){i=1},x.nt=function(e){var t=p(r)?r.join("."):r;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},x.nts=function(){return p(r)?r:r.split(o)},x.off=x.unbind=function(e,t){if(e){var n=p(e)?p(e[0])?e:[e]:h(e).split(u);if(n.length>1)for(var r=0,i=n.length;r<i;r++)x.off(n[r],t);else{n=p(e)?e:h(e).split(o);var s,c,f,d,g,m=[l],v=[];for(r=0,i=n.length;r<i;r++)for(d=0;d<m.length;d+=f.length-2){if(f=[d,1],s=m[d].n,"*"!=n[r])s[n[r]]&&(f.push(s[n[r]]),v.unshift({n:s,name:n[r]}));else for(c in s)s[a](c)&&(f.push(s[c]),v.unshift({n:s,name:c}));m.splice.apply(m,f)}for(r=0,i=m.length;r<i;r++)for(s=m[r];s.n;){if(t){if(s.f){for(d=0,g=s.f.length;d<g;d++)if(s.f[d]==t){s.f.splice(d,1);break}!s.f.length&&delete s.f}for(c in s.n)if(s.n[a](c)&&s.n[c].f){var _=s.n[c].f;for(d=0,g=_.length;d<g;d++)if(_[d]==t){_.splice(d,1);break}!_.length&&delete s.n[c].f}}else for(c in delete s.f,s.n)s.n[a](c)&&s.n[c].f&&delete s.n[c].f;s=s.n}e:for(r=0,i=v.length;r<i;r++){for(c in(s=v[r]).n[s.name].f)continue e;for(c in s.n[s.name].n)continue e;delete s.n[s.name]}}}else x._events=l={n:{}}},x.once=function(e,t){var n=function(){return x.off(e,n),t.apply(this,arguments)};return x.on(e,n)},x.version="0.5.4",x.toString=function(){return"You are running Eve 0.5.4"},t.eve=x,e.exports?e.exports=x:"function"==typeof n&&n.amd?n("eve",[],(function(){return x})):t.eve=x}(void 0!==t?t:this)}).call(this,n(3),n(0))},function(e,t,n){"use strict";(function(n){var r=function(){if("undefined"!=typeof self)return self;if(void 0!==n)return n;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,t.default=r.fetch.bind(r),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response}).call(this,n(3))},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=14},function(e,t,n){
/*!
 * Globalize v1.4.2
 *
 * http://github.com/jquery/globalize
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2019-03-07T13:47Z
 */
e.exports=n(1),n(19),n(20),n(21),n(22),n(23),n(24),n(25)},function(e,t,n){(function(t){
/*!
 * CLDR JavaScript Library v0.5.1 2019-01-21T13:43Z MIT license © Rafael Xavier
 * http://git.io/h4lmVg
 */var r;r=function(e){var t,n=e._pathNormalize,r=e._validatePresence,i=e._validateType;
/*!
 * EventEmitter v4.2.7 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */t=function(){function e(){}var t=e.prototype,n={};function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}return t.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},t.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},t.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},t.addListener=function(e,t){var n,i=this.getListenersAsObject(e),a="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(a?t:{listener:t,once:!1});return this},t.on=i("addListener"),t.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},t.once=i("addOnceListener"),t.defineEvent=function(e){return this.getListeners(e),this},t.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},t.removeListener=function(e,t){var n,i,a=this.getListenersAsObject(e);for(i in a)a.hasOwnProperty(i)&&-1!==(n=r(a[i],t))&&a[i].splice(n,1);return this},t.off=i("removeListener"),t.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},t.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},t.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},t.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},t.removeAllListeners=i("removeEvent"),t.emitEvent=function(e,t){var n,r,i,a=this.getListenersAsObject(e);for(i in a)if(a.hasOwnProperty(i))for(r=a[i].length;r--;)!0===(n=a[i][r]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},t.trigger=i("emitEvent"),t.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},t.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},t._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},t._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=originalGlobalValue,e},e}();var a,o,u=function(e,t){i(e,t,void 0===e||"function"==typeof e,"Function")},s=new t;function l(e,t){i(e,t,"string"==typeof e||e instanceof RegExp,"String or RegExp")}function c(e,t){return function(n,i){return r(n,"event"),l(n,"event"),r(i,"listener"),u(i,"listener"),t[e].apply(t,arguments)}}function f(e){return c("off",e)}function d(e){return c("on",e)}function h(e){return c("once",e)}function p(){a=e.prototype.get,e.prototype.get=function(e){var t=a.apply(this,arguments);return e=n(e,this.attributes).join("/"),s.trigger("get",[e,t]),this.ee.trigger("get",[e,t]),t}}return e.off=f(s),e.on=d(s),e.once=h(s),o=e.prototype.init,e.prototype.init=function(){var e;this.ee=e=new t,this.off=f(e),this.on=d(e),this.once=h(e),o.apply(this,arguments)},e._eventInit=p,p(),e},"function"==typeof t&&t.amd?t(["../cldr"],r):"object"==typeof e.exports?e.exports=r(n(4)):r(Cldr)}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * CLDR JavaScript Library v0.5.1 2019-01-21T13:43Z MIT license © Rafael Xavier
 * http://git.io/h4lmVg
 */var r;r=function(e){var t=e._alwaysArray,n=function(e){var n,r;return(r=(n=function(n){return function(r){return r=t(r),e.get([n].concat(r))}})("supplemental")).weekData=n("supplemental/weekData"),r.weekData.firstDay=function(){return e.get("supplemental/weekData/firstDay/{territory}")||e.get("supplemental/weekData/firstDay/001")},r.weekData.minDays=function(){var t=e.get("supplemental/weekData/minDays/{territory}")||e.get("supplemental/weekData/minDays/001");return parseInt(t,10)},r.timeData=n("supplemental/timeData"),r.timeData.allowed=function(){return e.get("supplemental/timeData/{territory}/_allowed")||e.get("supplemental/timeData/001/_allowed")},r.timeData.preferred=function(){return e.get("supplemental/timeData/{territory}/_preferred")||e.get("supplemental/timeData/001/_preferred")},r},r=e.prototype.init;return e.prototype.init=function(){r.apply(this,arguments),this.supplemental=n(this)},e},"function"==typeof t&&t.amd?t(["../cldr"],r):"object"==typeof e.exports?e.exports=r(n(4)):r(Cldr)}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * CLDR JavaScript Library v0.5.1 2019-01-21T13:43Z MIT license © Rafael Xavier
 * http://git.io/h4lmVg
 */var r;r=function(e){var t,n=e._coreLoad,r=e._jsonMerge,i=e._pathNormalize,a=e._resourceGet,o=e._validatePresence,u=e._validateTypePath,s=t=function(e,n,o,u,s){var l,c,f;if(void 0!==n&&n!==s)return l=i(o,u),void 0!==(f=a(e._resolved,l))&&"object"!=typeof f?f:(void 0===(f=a(e._raw,l))&&(c=function(e,t){var n,r;if("root"!==t)return n=i(["supplemental/parentLocales/parentLocale",t]),(r=a(e._resolved,n)||a(e._raw,n))?r:(r=t.substr(0,t.lastIndexOf(e.localeSep)))||"root"}(e,n),f=t(e,c,o,r(u,{bundle:c}),n)),void 0!==f&&function(e,t,n){var r,i=e,a=t.length;for(r=0;r<a-1;r++)i[t[r]]||(i[t[r]]={}),i=i[t[r]];i[t[r]]=n}(e._resolved,l,f),f)};return e._raw={},e.load=function(){e._raw=n(e,e._raw,arguments)},e.prototype.get=function(t){return o(t,"path"),u(t,"path"),s(e,this.attributes&&this.attributes.bundle||"",t,this.attributes)},e._eventInit&&e._eventInit(),e},"function"==typeof t&&t.amd?t(["../cldr"],r):"object"==typeof e.exports?e.exports=r(n(4)):r(Cldr)}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * Globalize v1.4.2 2019-03-07T13:47Z Released under the MIT license
 * http://git.io/TrdQbw
 */var r;r=function(e,t){var n,r=t._alwaysArray,i=t._createError,a=t._isPlainObject,o=t._runtimeBind,u=t._validateDefaultLocale,s=t._validate,l=t._validateParameterPresence,c=t._validateParameterType,f=t._validateParameterTypePlainObject;n=function(){
/** @file messageformat.js - ICU PluralFormat + SelectFormat for JavaScript
 *  @author Alex Sexton - @SlexAxton
 *  @version 0.3.0-1
 *  @copyright 2012-2015 Alex Sexton, Eemeli Aro, and Contributors
 *  @license To use or fork, MIT. To contribute back, Dojo CLA  */
function e(e,t){if(/^[A-Z_$][0-9A-Z_$]*$/i.test(e))return t?t+"."+e:e;var n=JSON.stringify(e);return t?t+"["+n+"]":n}function t(e,t,n){if(this.lc=[e],this.runtime.pluralFuncs={},this.runtime.pluralFuncs[this.lc[0]]=t,this.runtime.fmt={},n)for(var r in n)this.runtime.fmt[r]=n[r]}return t._parse=function(){function e(e,t,n,r,i,a){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=a,this.name="SyntaxError"}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},i={},a={start:Ne},o=Ne,u=function(e){return{type:"messageFormatPattern",statements:e}},s=i,l="{",c={type:"literal",value:"{",description:'"{"'},f=null,d=",",h={type:"literal",value:",",description:'","'},p="}",x={type:"literal",value:"}",description:'"}"'},g=function(e,t){var n={type:"messageFormatElement",argumentIndex:e};return t&&t.length?n.elementFormat=t[1]:n.output=!0,n},m="plural",v={type:"literal",value:"plural",description:'"plural"'},_=function(e,t){return{type:"elementFormat",key:e,val:t}},y="selectordinal",b={type:"literal",value:"selectordinal",description:'"selectordinal"'},w="select",S={type:"literal",value:"select",description:'"select"'},k=function(e,t){return{type:"elementFormat",key:e,val:t}},E=function(e,t){return{type:"pluralFormatPattern",pluralForms:t,offset:e||0}},A="offset",T={type:"literal",value:"offset",description:'"offset"'},C=":",D={type:"literal",value:":",description:'":"'},N=function(e){return e},F=function(e,t){return{key:e,val:t}},O=function(e){return e},M="=",L={type:"literal",value:"=",description:'"="'},P=function(e){return{type:"selectFormatPattern",pluralForms:e}},z=function(e){return e},I="#",R={type:"literal",value:"#",description:'"#"'},G=function(){return{type:"octothorpe"}},j=function(e){return{type:"string",val:e.join("")}},W={type:"other",description:"identifier"},B=/^[0-9a-zA-Z$_]/,U={type:"class",value:"[0-9a-zA-Z$_]",description:"[0-9a-zA-Z$_]"},V=/^[^ \t\n\r,.+={}]/,q={type:"class",value:"[^ \\t\\n\\r,.+={}]",description:"[^ \\t\\n\\r,.+={}]"},H=function(e){return e},$=function(e){return e.join("")},Y=/^[^{}#\\\0-\x1F \t\n\r]/,X={type:"class",value:"[^{}#\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}#\\\\\\0-\\x1F \\t\\n\\r]"},Z=function(e){return e},J="\\\\",K={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},Q=function(){return"\\"},ee="\\#",te={type:"literal",value:"\\#",description:'"\\\\#"'},ne=function(){return"#"},re="\\{",ie={type:"literal",value:"\\{",description:'"\\\\{"'},ae=function(){return"{"},oe="\\}",ue={type:"literal",value:"\\}",description:'"\\\\}"'},se=function(){return"}"},le="\\u",ce={type:"literal",value:"\\u",description:'"\\\\u"'},fe=function(e,t,n,r){return String.fromCharCode(parseInt("0x"+e+t+n+r))},de=/^[0-9]/,he={type:"class",value:"[0-9]",description:"[0-9]"},pe=function(e){return parseInt(e.join(""),10)},xe=/^[0-9a-fA-F]/,ge={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},me={type:"other",description:"whitespace"},ve=function(e){return e.join("")},_e=/^[ \t\n\r]/,ye={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},be=0,we=0,Se={line:1,column:1,seenCR:!1},ke=0,Ee=[],Ae=0;if("startRule"in r){if(!(r.startRule in a))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=a[r.startRule]}function Te(e){return we!==e&&(we>e&&(we=0,Se={line:1,column:1,seenCR:!1}),function(e,n,r){var i,a;for(i=n;i<r;i++)"\n"===(a=t.charAt(i))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(Se,we,e),we=e),Se}function Ce(e){be<ke||(be>ke&&(ke=be,Ee=[]),Ee.push(e))}function De(n,r,i){var a=Te(i),o=i<t.length?t.charAt(i):null;return null!==r&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(r),new e(null!==n?n:function(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0180-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1080-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(r,o),r,o,i,a.line,a.column)}function Ne(){return Fe()}function Fe(){var e,t;for(be,e=[],(t=Oe())===i&&(t=Be())===i&&(t=We());t!==i;)e.push(t),(t=Oe())===i&&(t=Be())===i&&(t=We());return e!==i&&(e=u(e)),e}function Oe(){var e,n,r,a,o,u;return e=be,123===t.charCodeAt(be)?(n=l,be++):(n=i,0===Ae&&Ce(c)),n!==i&&Ye()!==i&&(r=Ue())!==i?(a=be,44===t.charCodeAt(be)?(o=d,be++):(o=i,0===Ae&&Ce(h)),o!==i&&(u=Me())!==i?a=o=[o,u]:(be=a,a=s),a===i&&(a=f),a!==i&&(o=Ye())!==i?(125===t.charCodeAt(be)?(u=p,be++):(u=i,0===Ae&&Ce(x)),u!==i?e=n=g(r,a):(be=e,e=s)):(be=e,e=s)):(be=e,e=s),e}function Me(){var e,n,r,a,o;if(e=be,Ye()!==i?(t.substr(be,6)===m?(n=m,be+=6):(n=i,0===Ae&&Ce(v)),n!==i&&(r=Ye())!==i?(44===t.charCodeAt(be)?(a=d,be++):(a=i,0===Ae&&Ce(h)),a!==i&&Ye()!==i&&(o=Le())!==i&&Ye()!==i?e=_(n,o):(be=e,e=s)):(be=e,e=s)):(be=e,e=s),e===i&&(e=be,Ye()!==i?(t.substr(be,13)===y?(n=y,be+=13):(n=i,0===Ae&&Ce(b)),n!==i&&(r=Ye())!==i?(44===t.charCodeAt(be)?(a=d,be++):(a=i,0===Ae&&Ce(h)),a!==i&&Ye()!==i&&(o=Le())!==i&&Ye()!==i?e=_(n,o):(be=e,e=s)):(be=e,e=s)):(be=e,e=s),e===i&&(e=be,Ye()!==i?(t.substr(be,6)===w?(n=w,be+=6):(n=i,0===Ae&&Ce(S)),n!==i&&(r=Ye())!==i?(44===t.charCodeAt(be)?(a=d,be++):(a=i,0===Ae&&Ce(h)),a!==i&&Ye()!==i&&(o=Re())!==i&&Ye()!==i?e=_(n,o):(be=e,e=s)):(be=e,e=s)):(be=e,e=s),e===i)))if(e=be,Ye()!==i)if((n=Ue())!==i){for(r=[],a=je();a!==i;)r.push(a),a=je();r!==i?e=k(n,r):(be=e,e=s)}else be=e,e=s;else be=e,e=s;return e}function Le(){var e,t,n,r;if(e=be,(t=Pe())===i&&(t=f),t!==i){if(n=[],(r=ze())!==i)for(;r!==i;)n.push(r),r=ze();else n=s;n!==i?e=t=E(t,n):(be=e,e=s)}else be=e,e=s;return e}function Pe(){var e,n,r,a;return e=be,Ye()!==i?(t.substr(be,6)===A?(n=A,be+=6):(n=i,0===Ae&&Ce(T)),n!==i&&Ye()!==i?(58===t.charCodeAt(be)?(r=C,be++):(r=i,0===Ae&&Ce(D)),r!==i&&Ye()!==i&&(a=He())!==i&&Ye()!==i?e=N(a):(be=e,e=s)):(be=e,e=s)):(be=e,e=s),e}function ze(){var e,n,r,a,o;return e=be,Ye()!==i&&(n=Ie())!==i&&Ye()!==i?(123===t.charCodeAt(be)?(r=l,be++):(r=i,0===Ae&&Ce(c)),r!==i&&Ye()!==i&&(a=Fe())!==i&&Ye()!==i?(125===t.charCodeAt(be)?(o=p,be++):(o=i,0===Ae&&Ce(x)),o!==i?e=F(n,a):(be=e,e=s)):(be=e,e=s)):(be=e,e=s),e}function Ie(){var e,n,r;return e=be,(n=Ue())!==i&&(n=O(n)),(e=n)===i&&(e=be,61===t.charCodeAt(be)?(n=M,be++):(n=i,0===Ae&&Ce(L)),n!==i&&(r=He())!==i?e=n=N(r):(be=e,e=s)),e}function Re(){var e,t;if(be,e=[],(t=Ge())!==i)for(;t!==i;)e.push(t),t=Ge();else e=s;return e!==i&&(e=P(e)),e}function Ge(){var e,n,r,a,o;return e=be,Ye()!==i&&(n=Ue())!==i&&Ye()!==i?(123===t.charCodeAt(be)?(r=l,be++):(r=i,0===Ae&&Ce(c)),r!==i&&Ye()!==i&&(a=Fe())!==i&&Ye()!==i?(125===t.charCodeAt(be)?(o=p,be++):(o=i,0===Ae&&Ce(x)),o!==i?e=F(n,a):(be=e,e=s)):(be=e,e=s)):(be=e,e=s),e}function je(){var e,n,r;return e=be,Ye()!==i?(44===t.charCodeAt(be)?(n=d,be++):(n=i,0===Ae&&Ce(h)),n!==i&&Ye()!==i&&(r=Ue())!==i&&Ye()!==i?e=z(r):(be=e,e=s)):(be=e,e=s),e}function We(){var e;return be,35===t.charCodeAt(be)?(e=I,be++):(e=i,0===Ae&&Ce(R)),e!==i&&(e=G()),e}function Be(){var e,t;if(be,e=[],(t=Ve())===i&&(t=Xe()),t!==i)for(;t!==i;)e.push(t),(t=Ve())===i&&(t=Xe());else e=s;return e!==i&&(e=j(e)),e}function Ue(){var e,n,r,a,o,u;if(Ae++,e=be,Ye()!==i){if(n=be,r=be,B.test(t.charAt(be))?(a=t.charAt(be),be++):(a=i,0===Ae&&Ce(U)),a!==i){for(o=[],V.test(t.charAt(be))?(u=t.charAt(be),be++):(u=i,0===Ae&&Ce(q));u!==i;)o.push(u),V.test(t.charAt(be))?(u=t.charAt(be),be++):(u=i,0===Ae&&Ce(q));o!==i?r=a=[a,o]:(be=r,r=s)}else be=r,r=s;r!==i&&(r=t.substring(n,be)),(n=r)!==i&&(r=Ye())!==i?e=H(n):(be=e,e=s)}else be=e,e=s;return Ae--,e===i&&0===Ae&&Ce(W),e}function Ve(){var e,t;if(be,e=[],(t=qe())!==i)for(;t!==i;)e.push(t),t=qe();else e=s;return e!==i&&(e=$(e)),e}function qe(){var e,n,r,a,o,u;return e=be,Y.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===Ae&&Ce(X)),n!==i&&(n=Z(n)),(e=n)===i&&(e=be,t.substr(be,2)===J?(n=J,be+=2):(n=i,0===Ae&&Ce(K)),n!==i&&(n=Q()),(e=n)===i&&(e=be,t.substr(be,2)===ee?(n=ee,be+=2):(n=i,0===Ae&&Ce(te)),n!==i&&(n=ne()),(e=n)===i&&(e=be,t.substr(be,2)===re?(n=re,be+=2):(n=i,0===Ae&&Ce(ie)),n!==i&&(n=ae()),(e=n)===i&&(e=be,t.substr(be,2)===oe?(n=oe,be+=2):(n=i,0===Ae&&Ce(ue)),n!==i&&(n=se()),(e=n)===i&&(e=be,t.substr(be,2)===le?(n=le,be+=2):(n=i,0===Ae&&Ce(ce)),n!==i&&(r=$e())!==i&&(a=$e())!==i&&(o=$e())!==i&&(u=$e())!==i?e=n=fe(r,a,o,u):(be=e,e=s)))))),e}function He(){var e,n;if(be,e=[],de.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===Ae&&Ce(he)),n!==i)for(;n!==i;)e.push(n),de.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===Ae&&Ce(he));else e=s;return e!==i&&(e=pe(e)),e}function $e(){var e;return xe.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===Ae&&Ce(ge)),e}function Ye(){var e,t,n;for(Ae++,e=be,t=[],n=Xe();n!==i;)t.push(n),n=Xe();return t!==i&&(t=ve(t)),Ae--,(e=t)===i&&(t=i,0===Ae&&Ce(me)),e}function Xe(){var e;return _e.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===Ae&&Ce(ye)),e}if((n=o())!==i&&be===t.length)return n;throw n!==i&&be<t.length&&Ce({type:"end",description:"end of input"}),De(null,Ee,ke)}}}().parse,t.plurals={},t.formatters={},t.prototype.runtime={number:function(e,t){if(isNaN(e))throw new Error("'"+e+"' isn't a number.");return e-(t||0)},plural:function(e,t,n,r,i){if({}.hasOwnProperty.call(r,e))return r[e]();t&&(e-=t);var a=n(e,i);return a in r?r[a]():r.other()},select:function(e,t){return{}.hasOwnProperty.call(t,e)?t[e]():t.other()},pluralFuncs:{},fmt:{},toString:function(){var t=function(n,r){if("object"!=typeof n){var i=n.toString().replace(/^(function )\w*/,"$1");return(u=/([ \t]*)\S.*$/.exec(i))?i.replace(new RegExp("^"+u[1],"mg"),""):i}var a=[];for(var o in n)"toString"!=o&&(0==r?a.push("var "+o+" = "+t(n[o],r+1)+";\n"):a.push(e(o)+": "+t(n[o],r+1)));if(0==r)return a.join("");if(0==a.length)return"{}";for(var u="  ";--r;)u+="  ";return"{\n"+a.join(",\n").replace(/^/gm,u)+"\n}"};return t(this,0)}},t.prototype._precompile=function(n,r){r=r||{keys:{},offset:{}};var i,a,o=[],u=[];switch(n.type){case"messageFormatPattern":for(i=0;i<n.statements.length;++i)o.push(this._precompile(n.statements[i],r));return a=o.join(" + ")||'""',r.pf_count?a:"function(d) { return "+a+"; }";case"messageFormatElement":return r.pf_count=r.pf_count||0,n.output?e(n.argumentIndex,"d"):(r.keys[r.pf_count]=n.argumentIndex,this._precompile(n.elementFormat,r));case"elementFormat":switch(u=[e(r.keys[r.pf_count],"d")],n.key){case"select":return u.push(this._precompile(n.val,r)),"select("+u.join(", ")+")";case"selectordinal":return"plural("+(u=u.concat([0,e(this.lc[0],"pluralFuncs"),this._precompile(n.val,r),1])).join(", ")+")";case"plural":return r.offset[r.pf_count||0]=n.val.offset||0,"plural("+(u=u.concat([r.offset[r.pf_count]||0,e(this.lc[0],"pluralFuncs"),this._precompile(n.val,r)])).join(", ")+")";default:return this.withIntlSupport&&!(n.key in this.runtime.fmt)&&n.key in t.formatters&&(a=t.formatters[n.key],this.runtime.fmt[n.key]="function"==typeof a(this)?a(this):a),u.push(JSON.stringify(this.lc)),n.val&&n.val.length&&u.push(JSON.stringify(1==n.val.length?n.val[0]:n.val)),"fmt."+n.key+"("+u.join(", ")+")"}case"pluralFormatPattern":case"selectFormatPattern":r.pf_count=r.pf_count||0,"selectFormatPattern"==n.type&&(r.offset[r.pf_count]=0);var s=!0;for(i=0;i<n.pluralForms.length;++i){var l=n.pluralForms[i].key;"other"===l&&(s=!1);var c=JSON.parse(JSON.stringify(r));c.pf_count++,o.push(e(l)+": function() { return "+this._precompile(n.pluralForms[i].val,c)+";}")}if(s)throw new Error("No 'other' form found in "+n.type+" "+r.pf_count);return"{ "+o.join(", ")+" }";case"string":return JSON.stringify(n.val||"");case"octothorpe":return r.pf_count?(u=[e(r.keys[r.pf_count-1],"d")],r.offset[r.pf_count-1]&&u.push(r.offset[r.pf_count-1]),"number("+u.join(", ")+")"):'"#"';default:throw new Error("Bad AST type: "+n.type)}},t.prototype.compile=function(n,r){var i={},a=this.lc,o=function(e,n){try{var r=t._parse(n);return e._precompile(r)}catch(e){throw new Error((r?"Precompiler":"Parser")+" error: "+e.toString())}},u=function(t,n){if(n||(n=0),"object"!=typeof t)return t;for(var r=[],i="",a=0;a<n;++a)i+="  ";for(var o in t)r.push("\n"+i+"  "+e(o)+": "+u(t[o],n+1));return"{"+r.join(",")+"\n"+i+"}"};if("string"==typeof n)return new Function("number, plural, select, pluralFuncs, fmt","return "+o(this,n))(this.runtime.number,this.runtime.plural,this.runtime.select,this.runtime.pluralFuncs,this.runtime.fmt);for(var s in r=r||{},n)if(r.locale&&(this.lc=r.locale[s]&&[].concat(r.locale[s])||a),"string"==typeof n[s])try{i[s]=o(this,n[s])}catch(e){throw e.message=e.message.replace(":"," with `"+s+"`:"),e}else for(var l in i[s]={},n[s])try{i[s][l]=o(this,n[s][l])}catch(e){throw e.message=e.message.replace(":"," with `"+l+"` in `"+s+"`:"),e}this.lc=a;var c=this.runtime.toString()+"\n";switch(r.global||""){case"exports":var f=[];for(var d in i)f.push(e(d,"exports")+" = "+u(i[d]));return new Function(c+f.join(";\n"));case"module.exports":return new Function(c+"module.exports = "+u(i));case"":return new Function(c+"return "+u(i));default:return new Function("G",c+e(r.global,"G")+" = "+u(i))}},t}();var d=function(){return i("E_MISSING_PLURAL_MODULE","Plural module not loaded.")},h=function(e){s("E_MISSING_MESSAGE_BUNDLE","Missing message bundle for locale `{locale}`.",e.attributes.bundle&&void 0!==e.get("globalize-messages/{bundle}"),{locale:e.locale})},p=function(e,t){e=e.join("/"),s("E_MISSING_MESSAGE","Missing required message content `{path}`.",void 0!==t,{path:e})},x=function(e,t){e=e.join("/"),s("E_INVALID_MESSAGE","Invalid message content `{path}`. {expected} expected.","string"==typeof t,{expected:"a string",path:e})},g=function(e,t){c(e,t,void 0===e||a(e)||Array.isArray(e),"Array or Plain Object")},m=function(e){return function(t){return"number"!=typeof t&&"string"!=typeof t||(t=[].slice.call(arguments,0)),g(t,"variables"),e(t)}},v=function(e,t){var n=e.locale,r=t.toString;return t.toString=function(){var e,i={};return e=r.call(t),/number\(/.test(e)&&(i.number="messageFormat.number"),/plural\(/.test(e)&&(i.plural="messageFormat.plural"),/select\(/.test(e)&&(i.select="messageFormat.select"),e.replace(/pluralFuncs(\[([^\]]+)\]|\.([a-zA-Z]+))/,(function(e){return i.pluralFuncs='{"'+n+'": Globalize("'+n+'").pluralGenerator()}',e})),"(function( "+Object.keys(i).join(", ")+" ) {\n  return "+e+"\n})("+Object.keys(i).map((function(e){return i[e]})).join(", ")+")"},t},_=[].slice;return t.loadMessages=function(t){var n,r={"globalize-messages":t,main:{}};for(n in l(t,"json"),f(t,"json"),t)t.hasOwnProperty(n)&&(r.main[n]={});e.load(r)},t.messageFormatter=t.prototype.messageFormatter=function(e){var t,i,a,s,f,g=_.call(arguments,0);return l(e,"path"),c(e,"path","string"==typeof e||Array.isArray(e),"a String nor an Array"),e=r(e),t=this.cldr,u(t),h(t),a=t.get(["globalize-messages/{bundle}"].concat(e)),p(e,a),Array.isArray(a)&&(a=a.join(" ")),x(e,a),s=void 0!==this.plural?this.pluralGenerator():d,i=new n(t.locale,s).compile(a),f=m(i),o(g,t,f,[v(t,i),s]),f},t.formatMessage=t.prototype.formatMessage=function(e){return this.messageFormatter(e).apply({},_.call(arguments,1))},t},"function"==typeof t&&t.amd?t(["cldr","../globalize","cldr/event"],r):e.exports=r(n(2),n(1))}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * Globalize v1.4.2 2019-03-07T13:47Z Released under the MIT license
 * http://git.io/TrdQbw
 */var r;r=function(e,t){var n=t._createError,r=t._regexpEscape,i=t._runtimeBind,a=t._stringPad,o=t._validateCldr,u=t._validateDefaultLocale,s=t._validateParameterPresence,l=t._validateParameterRange,c=t._validateParameterType,f=t._validateParameterTypePlainObject,d=function(e){return n("E_UNSUPPORTED","Unsupported {feature}.",{feature:e})},h=function(e,t){c(e,t,void 0===e||"number"==typeof e,"Number")},p=function(e,t){c(e,t,void 0===e||"string"==typeof e,"a string")},x=/^([^0]*)(0+)([^0]*)$/,g=function(e,t,n){var r;return r=Math.ceil(Math.log(Math.abs(e))/Math.log(10)),n(e,{exponent:r-=t})},m=/^(('([^']|'')*'|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,v=function(e){return e[0]+e[e.length-1]!=="''"?e:"''"===e?"":e.replace(/''/g,"'").slice(1,-1)},_=function(e,t,n){var r,i,o,u,s,l,c,f,h,p,m,_,y,b,w,S,k,E,A,T,C,D,N;return t[1],l=t[2],s=t[3],o=t[4],c=t[5],u=t[6],w=t[7],m=t[8],S=t[9],b=t[15],i=t[16],f=t[17],E=t[18],h=t[19],r=t[20],isNaN(e)?f:(e<0?(_=t[12],p=t[13],k=t[14]):(_=t[11],p=t[0],k=t[10]),isFinite(e)?(-1!==_.indexOf("%")?e*=100:-1!==_.indexOf("‰")&&(e*=1e3),r&&(D=Math.abs(Math.floor(e)).toString().length-1,(D=Math.min(D,r.maxExponent))>=3&&(A=r[D]&&r[D].other),"0"===A?A=null:A&&(C=D-(A.split("0").length-1-1),e/=Math.pow(10,C))),e=isNaN(c*u)?function(e,t,n,r,i,o){return e=r?i(e,o||{exponent:-r}):i(e),e=String(e),r&&/e-/.test(e)&&(e=(+e).toFixed(r).replace(/0+$/,"").replace(/\.$/,"")),n&&((e=e.split("."))[1]=a(e[1]||"",n,!0),e=e.join(".")),t&&((e=e.split("."))[0]=a(e[0],t),e=e.join(".")),e}(e,l,s,o,b,w):function(e,t,n,r){var i,o;if(t>n&&(n=t),e=(+(e=+(i=g(e,t,r))==+(o=g(e,n,r))?i:o)).toString(10),/e/.test(e))throw d({feature:"integers out of (1e21, 1e-7)"});return t-e.replace(/^0+|\./g,"").length>0&&((e=e.split("."))[1]=a(e[1]||"",t-e[0].replace(/^0+/,"").length,!0),e=e.join(".")),e}(e,c,u,b),r&&A&&(N=n?n(+e):"other",p+=(T=(A=r[D][N]||A).match(x))[1],k=T[3]+k),e=e.replace(/^-/,""),m&&(e=function(e,t,n){var r,i=t,a="",o=!!n;for(r=(e=String(e).split("."))[0].length;r>i;)a=e[0].slice(r-i,r)+(a.length?",":"")+a,r-=i,o&&(i=n,o=!1);return e[0]=e[0].slice(0,r)+(a.length?",":"")+a,e.join(".")}(e,m,S)),y=p,y+=e,(y+=k).replace(/('([^']|'')+'|'')|./g,(function(e,t){return t?v(t):(e=e.replace(/[.,\-+E%\u2030]/,(function(e){return E[e]})),h&&(e=e.replace(/[0-9]/,(function(e){return h[+e]}))),e)}))):p+i+k)},y=function(e,t){return function(n){return s(n,"value"),h(n,"value"),_(n,e,t)}},b=function(e){var t=e.attributes["u-nu"];return t?("traditio"===t&&(t="traditional"),-1!==["native","traditional","finance"].indexOf(t)?e.main(["numbers/otherNumberingSystems",t]):t):e.main("numbers/defaultNumberingSystem")},w=function(e){var t,n=b(e);if("latn"!==n){if("numeric"!==(t=e.supplemental(["numberingSystems",n]))._type)throw d("`"+t._type+"` numbering system");return t._digits}},S=function(e){var t,n,r,i,a,o,u,s,l,c,f,h,p,x,g,v,_,y;if(!(e=e.match(m)))throw new Error("Invalid pattern: "+e);if(h=e[1],f=e[4],i=e[5],_=e[9],g=e[10],y=e[11],_?_.replace(/(@+)(#*)/,(function(e,t,n){c=t.length,u=c+n.length})):(r=e[8],a=e[7],r?(r.replace(/[0-9]+/,(function(e){s=e})),s?(x=+("0."+s),s=s.length):s=0,o=r.length-1):(s=0,o=0),a.replace(/0+$/,(function(e){l=e.length}))),g)throw d({feature:"scientific notation (not implemented)"});if(f)throw d({feature:"padding (not implemented)"});return-1!==(t=i.lastIndexOf(","))&&(p=(n=i.split(".")[0]).length-t-1,-1!==(n=i.lastIndexOf(",",t-1))&&(v=t-1-n)),[h,f,l,s,o,c,u,x,p,v,y]},k=function(e,t){return t.main(["numbers/symbols-numberSystem-"+b(t),e])},E={".":"decimal",",":"group","%":"percentSign","+":"plusSign","-":"minusSign",E:"exponential","‰":"perMille"},A=function(e){var t,n={};for(t in E)n[t]=k(E[t],e);return n},T=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},C=function(e,t,n){var r,i,a,o,u,s,l,c;function f(e,t){e in n&&(l[t]=n[e])}return n=n||{},u=(e=e.split(";"))[0],r=e[1]||"-"+u,i=(a=S(r))[0],o=a[10],c="truncate"===(c=(c=n.round)||"round")?T:Math[c],(s=function(e,t){var n,r;if(e=+e,isNaN(e))return NaN;if("object"==typeof t&&t.exponent){if(r=1,0==(n=+t.exponent))return c(e);if("number"!=typeof n||n%1!=0)return NaN}else{if(1===(r=+t||1))return c(e);if(isNaN(r))return NaN;n=+(r=r.toExponential().split("e"))[1],r=+r[0]}return(e=e.toString().split("e"))[0]=+e[0]/r,e[1]=e[1]?+e[1]-n:-n,(e=(e=c(+(e[0]+"e"+e[1]))).toString().split("e"))[0]=+e[0]*r,e[1]=e[1]?+e[1]+n:n,+(e[0]+"e"+e[1])}).generatorString=function(){return"numberRound("+(n.round?'"'+n.round+'"':"")+")"},l=S(u).concat([u,i+u+o,i,o,s,k("infinity",t),k("nan",t),A(t),w(t)]),n.compact&&(l[2]=1,l[3]=0,l[4]=0,l[5]=l[6]=void 0,l[20]=function(e,t){var n=0,r=t.main(["numbers/decimalFormats-numberSystem-"+b(t),e,"decimalFormat"]);return(r=Object.keys(r).reduce((function(e,t){var i=t.split("0").length-1,a=t.split("-")[2];return e[i]=e[i]||{},e[i][a]=r[t],n=Math.max(i,n),e}),{})).maxExponent=n,r}(n.compact,t)),f("minimumIntegerDigits",2),f("minimumFractionDigits",3),f("maximumFractionDigits",4),f("minimumSignificantDigits",5),f("maximumSignificantDigits",6),!1===n.useGrouping&&(l[8]=null),"minimumFractionDigits"in n&&!("maximumFractionDigits"in n)?l[4]=Math.max(l[3],l[4]):!("minimumFractionDigits"in n)&&"maximumFractionDigits"in n&&(l[3]=Math.min(l[3],l[4])),l},D=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804\uDCBD|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/g,N=/[\-\u058A\u05BE\u1400\u1806\u2010-\u2015\u2E17\u2E1A\u2E3A\u2E3B\u2E40\u301C\u3030\u30A0\uFE31\uFE32\uFE58\uFE63\uFF0D\u2212]/g,F=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/g,O=function(e){return e.replace(D,"").replace(N,"-").replace(F," ")},M=function(e,t){var n,r,i,a,o,u,s,l,c;return n=[["nan"],["prefix","infinity","suffix"],["prefix","number","suffix"],["negativePrefix","infinity","negativeSuffix"],["negativePrefix","number","negativeSuffix"]],i=t[0],r=t[1]||{},c=t[2],!function(e,t){return t.some((function(t){var n=e;return t.every((function(e){return null!==n.match(c[e])&&(n=n.replace(c[e],function(e){return function(t){switch(t=t.split("").map((function(e){return i[e]||r[e]||e})).join(""),e){case"infinity":o=1/0;break;case"nan":o=NaN;break;case"number":t=t.replace(/,/g,""),o=+t;break;case"prefix":case"negativePrefix":u=t;break;case"suffix":l=t;break;case"negativeSuffix":l=t,a=!0;break;default:throw new Error("Internal error")}return""}}(e)),!0)}))&&!n.length}))}(e=O(e),n)||isNaN(o)?NaN:(-1!==(s=""+u+l).indexOf("%")?o/=100:-1!==s.indexOf("‰")&&(o/=1e3),a&&(o*=-1),o)},L=function(e,t){return Object.keys(e).map((function(n){return t([n,e[n]])})).reduce((function(e,t){return e[t[0]]=t[1],e}),{})},P=function(e,t,n){var i,a,o,u,s,l,c,f,d,h,p,x,g,m,_,y,b,w,S,A,T=C(e,t,n);return y=O(T[0]),f=T[4],h=T[5],d=T[6],b=T[8],w=T[9],S=O(T[10]),x=O(T[13]),g=O(T[14]),s=O(T[16]),p=O(T[17]),A=L(T[18],(function(e){return[e[0],O(e[1])]})),m=T[19],c=L(function(e){var t,n={};for(t in E)n[k(E[t],e)]=t;return n}(t),(function(e){return[O(e[0]),e[1]]})),o=m?"["+m+"]":"\\d",u=r(A[","]),a=r(A["."]),m&&(l=m.split("").reduce((function(e,t,n){return e[t]=String(n),e}),{})),i=[y,S,x,g].map((function(e){return e.replace(/('([^']|'')+'|'')|./g,(function(e,t){return t?v(t):e=e.replace(/[\-+E%\u2030]/,(function(e){return A[e]}))}))})),y=i[0],S=i[1],x=i[2],g=i[3],_=o+"+",b&&(_="("+(i=w?o+"{1,"+w+"}(("+u+o+"{"+w+"})*("+u+o+"{"+b+"}))":o+"{1,"+b+"}("+u+o+"{"+b+"})+")+"|"+_+")"),isNaN(h*d)&&!f||(_="("+(_=_+"("+(i=a+o+"+")+"|"+a+")?|("+_+")?"+i)+")"),[c,l,{infinity:new RegExp("^"+r(s)),nan:new RegExp("^"+r(p)),negativePrefix:new RegExp("^"+r(x)),negativeSuffix:new RegExp("^"+r(g)),number:new RegExp("^"+_),prefix:new RegExp("^"+r(y)),suffix:new RegExp("^"+r(S))}]},z=function(e,t){if("decimal"!==e&&"percent"!==e)throw new Error("Invalid style");return t.main(["numbers",e+"Formats-numberSystem-"+b(t),"standard"])};return t.numberFormatter=t.prototype.numberFormatter=function(e){var t,n,r,a,s,c;return f(e,"options"),e=e||{},n=this.cldr,t=[e],u(n),n.on("get",o),a=e.raw?e.raw:z(e.style||"decimal",n),r=[s=C(a,n,e)],n.off("get",o),function(e){var t=e[2],n=e[3],r=e[4],i=e[5],a=e[6];if(isNaN(i*a)){if(!isNaN(i)||!isNaN(a))throw new Error("Neither or both the minimum and maximum significant digits must be present");l(t,"minimumIntegerDigits",1,21),l(n,"minimumFractionDigits",0,20),l(r,"maximumFractionDigits",n,20)}else l(i,"minimumSignificantDigits",1,21),l(a,"maximumSignificantDigits",i,21)}(s),e.compact&&r.push(this.pluralGenerator()),c=y.apply(null,r),i(t,n,c,r),c},t.numberParser=t.prototype.numberParser=function(e){var t,n,r,a,l;if(f(e,"options"),e=e||{},n=this.cldr,t=[e],u(n),e.compact)throw d({feature:"compact number parsing (not implemented)"});return n.on("get",o),r=e.raw?e.raw:z(e.style||"decimal",n),a=P(r,n,e),n.off("get",o),l=function(e){return function(t){return s(t,"value"),p(t,"value"),M(t,e)}}(a),i(t,n,l,[a]),l},t.formatNumber=t.prototype.formatNumber=function(e,t){return s(e,"value"),h(e,"value"),this.numberFormatter(t)(e)},t.parseNumber=t.prototype.parseNumber=function(e,t){return s(e,"value"),p(e,"value"),this.numberParser(t)(e)},t._createErrorUnsupportedFeature=d,t._numberNumberingSystem=b,t._numberNumberingSystemDigitsMap=w,t._numberPattern=z,t._numberSymbol=k,t._looseMatching=O,t._removeLiteralQuotes=v,t._stringPad=a,t._validateParameterTypeNumber=h,t._validateParameterTypeString=p,t},"function"==typeof t&&t.amd?t(["cldr","../globalize","cldr/event","cldr/supplemental"],r):e.exports=r(n(2),n(1))}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * Globalize v1.4.2 2019-03-07T13:47Z Released under the MIT license
 * http://git.io/TrdQbw
 */var r;r=function(e,t){var n,r=t._runtimeBind,i=t._validateCldr,a=t._validateDefaultLocale,o=t._validateParameterPresence,u=t._validateParameterType,s=t._validateParameterTypePlainObject;n=function(){"use strict";var e=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(){t(this,e)}return n(e,[{key:"parse",value:function(e){var t=this;return"i = 0 or n = 1"===e?"n >= 0 && n <= 1":"i = 0,1"===e?"n >= 0 && n < 2":"i = 1 and v = 0"===e?(this.v0=1,"n == 1 && v0"):e.replace(/([tv]) (!?)= 0/g,(function(e,n,r){var i=n+"0";return t[i]=1,r?"!"+i:i})).replace(/\b[fintv]\b/g,(function(e){return t[e]=1,e})).replace(/([fin]) % (10+)/g,(function(e,n,r){var i=n+r;return t[i]=1,i})).replace(/n10+ = 0/g,"t0 && $&").replace(/(\w+ (!?)= )([0-9.]+,[0-9.,]+)/g,(function(e,t,n,r){return"n = 0,1"===e?"(n == 0 || n == 1)":n?t+r.split(",").join(" && "+t):"("+t+r.split(",").join(" || "+t)+")"})).replace(/(\w+) (!?)= ([0-9]+)\.\.([0-9]+)/g,(function(e,n,r,i,a){return Number(i)+1===Number(a)?r?n+" != "+i+" && "+n+" != "+a:"("+n+" == "+i+" || "+n+" == "+a+")":r?"("+n+" < "+i+" || "+n+" > "+a+")":"n"===n?(t.t0=1,"(t0 && n >= "+i+" && n <= "+a+")"):"("+n+" >= "+i+" && "+n+" <= "+a+")"})).replace(/ and /g," && ").replace(/ or /g," || ").replace(/ = /g," == ")}},{key:"vars",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=[];for(var t in this.i&&e.push("i = s[0]"),(this.f||this.v)&&e.push("f = s[1] || ''"),this.t&&e.push("t = (s[1] || '').replace(/0+$/, '')"),this.v&&e.push("v = f.length"),this.v0&&e.push("v0 = !s[1]"),(this.t0||this.n10||this.n100)&&e.push("t0 = Number(s[0]) == n"),this)if(/^.10+$/.test(t)){var n="n"===t[0]?"t0 && s[0]":t[0];e.push(t+" = "+n+".slice(-"+t.substr(2).length+")")}return e.length?"var "+["s = String(n).split('.')"].concat(e).join(", "):""}))}]),e}(),i=function(){function i(e){var n=void 0===arguments[1]?i:arguments[1],a=n.cardinals,o=n.ordinals;if(t(this,i),!a&&!o)throw new Error("At least one type of plural is required");return this.lc=e,this.categories={cardinal:[],ordinal:[]},this.parser=new r,this.fn=this.buildFunction(a,o),this.fn._obj=this,this.fn.categories=this.categories,this.fn.toString=this.fnToString.bind(this),this.fn}return n(i,[{key:"compile",value:function(t,n){var r,a=[],o=i.rules[t][this.lc];if(!o){if(n)throw new Error('Locale "'+this.lc+'" '+t+" rules not found");return this.categories[t]=["other"],"'other'"}for(var u in o){var s=o[u].trim().split(/\s*@\w*/),l=(r=s,Array.isArray(r)?r:Array.from(r)),c=l[0],f=(l.slice(1),u.replace("pluralRule-count-",""));c&&a.push([this.parser.parse(c),f])}return this.categories[t]=a.map((function(e){return e[1]})).concat("other"),1===a.length?"("+a[0][0]+") ? '"+a[0][1]+"' : 'other'":[].concat(e(a.map((function(e){return"("+e[0]+") ? '"+e[1]+"'"}))),["'other'"]).join("\n      : ")}},{key:"buildFunction",value:function(t,n){var r=this,i=function(e){return("  "+e+";").replace(/(.{1,78})(,|$) ?/g,"$1$2\n      ")},a=function(e){return("  "+e+";").replace(/(.{1,78}) (\|\| |$) ?/gm,"$1\n          $2")},o=[n&&["ordinal",!t],t&&["cardinal",!0]].map((function(t){return t?(t[1]?"return ":"if (ord) return ")+r.compile.apply(r,e(t)):""})).map(a),u=[i(this.parser.vars())].concat(e(o)).join("\n").replace(/\s+$/gm,"").replace(/^[\s;]*[\r\n]+/gm,"");return new Function(n&&t?"n, ord":"n",u)}},{key:"fnToString",value:function(e){return Function.prototype.toString.call(this.fn).replace(/^function( \w+)?/,e?"function "+e:"function").replace("\n/**/","")}}],[{key:"load",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((function(e){var t=e&&e.supplemental||null;if(!t)throw new Error("Data does not appear to be CLDR data");i.rules={cardinal:t["plurals-type-cardinal"]||i.rules.cardinal,ordinal:t["plurals-type-ordinal"]||i.rules.ordinal}})),i}}]),i}();return i.cardinals=!0,i.ordinals=!1,i.rules={cardinal:{},ordinal:{}},i}();var l=function(e,t){u(e,t,void 0===e||"number"==typeof e,"Number")};return t.plural=t.prototype.plural=function(e,t){return o(e,"value"),l(e,"value"),this.pluralGenerator(t)(e)},t.pluralGenerator=t.prototype.pluralGenerator=function(e){var t,c,f,d,h,p;return s(e,"options"),e=e||{},c=this.cldr,t=[e],p=e.type||"cardinal",function(e,t){u(e,t,void 0===e||"cardinal"===e||"ordinal"===e,'String "cardinal" or "ordinal"')}(e.type,"options.type"),a(c),f="ordinal"===p,c.on("get",i),c.supplemental(["plurals-type-"+p,"{language}"]),c.off("get",i),n.rules={},n.rules[p]=c.supplemental("plurals-type-"+p),h=function(e){return function(t){return o(t,"value"),l(t,"value"),e(t)}}(d=new n(c.attributes.language,{ordinals:f,cardinals:!f})),r(t,c,h,[d]),h},t},"function"==typeof t&&t.amd?t(["cldr","../globalize","cldr/event","cldr/supplemental"],r):e.exports=r(n(2),n(1))}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * Globalize v1.4.2
 *
 * http://github.com/jquery/globalize
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2019-03-07T13:47Z
 */var r;r=function(e,t){var n=t._alwaysArray,r=t._formatMessage,i=t._numberNumberingSystem,a=t._numberPattern,o=t._runtimeBind,u=t._stringPad,s=t._validateCldr,l=t._validateDefaultLocale,c=t._validateParameterPresence,f=t._validateParameterType,d=t._validateParameterTypeNumber,h=t._validateParameterTypePlainObject,p=function(e,t,n){var r,i="",a=n.supplemental(["currencyData/fractions",e])||n.supplemental("currencyData/fractions/DEFAULT");return(r=+a._digits)&&(i="."+u("0",r).slice(0,-1)+a._rounding),t.replace(/\.(#+|0*[0-9]|0+[0-9]?)/g,i)},x=function(e,t){var n,r={};for(n in e)t.test(n)&&(r[n]=e[n]);return r},g=function(e){return x(e.main(["numbers","currencyFormats-numberSystem-"+i(e)]),/^unitPattern/)},m=function(e,t){var n=a("decimal",t);return{currency:e,pattern:n=p(e,n,t),unitPatterns:g(t)}},v=function(e,t,n){return t&&n?function(i){return c(i,"value"),d(i,"value"),function(e,t,n){var i,a,o=n.displayNames||{},u=n.unitPatterns;return i=o["displayName-count-"+t]||o["displayName-count-other"]||o.displayName||n.currency,a=u["unitPattern-count-"+t]||u["unitPattern-count-other"],r(a,[e,i])}(e(i),t(i),n)}:function(t){return e(t)}},_=function(e,t){var n=m(e,t);return n.displayNames=x(t.main(["numbers/currencies",e]),/^displayName/),n},y=/[\0-#%-\*,-;\?-\]_a-\{\}\x7F-\xA1\xA7\xAA\xAB\xAD\xB2\xB3\xB5-\xB7\xB9-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376-\u0383\u0386-\u03F5\u03F7-\u0481\u0483-\u058C\u0590-\u0605\u0609\u060A\u060C\u060D\u0610-\u06DD\u06DF-\u06E8\u06EA-\u06FC\u06FF-\u07F5\u07F7-\u09F1\u09F4-\u09F9\u09FC-\u0AF0\u0AF2-\u0B6F\u0B71-\u0BF2\u0BFB-\u0C7E\u0C80-\u0D78\u0D7A-\u0E3E\u0E40-\u0F00\u0F04-\u0F12\u0F14\u0F18\u0F19\u0F20-\u0F33\u0F35\u0F37\u0F39-\u0FBD\u0FC6\u0FCD\u0FD0-\u0FD4\u0FD9-\u109D\u10A0-\u138F\u139A-\u17DA\u17DC-\u193F\u1941-\u19DD\u1A00-\u1B60\u1B6B-\u1B73\u1B7D-\u1FBC\u1FBE\u1FC2-\u1FCC\u1FD0-\u1FDC\u1FE0-\u1FEC\u1FF0-\u1FFC\u1FFF-\u2043\u2045-\u2051\u2053-\u2079\u207D-\u2089\u208D-\u209F\u20BE-\u20FF\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u218F\u2308-\u230B\u2329\u232A\u23FB-\u23FF\u2427-\u243F\u244B-\u249B\u24EA-\u24FF\u2768-\u2793\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2B74\u2B75\u2B96\u2B97\u2BBA-\u2BBC\u2BC9\u2BD2-\u2CE4\u2CEB-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u3003\u3005-\u3011\u3014-\u301F\u3021-\u3035\u3038-\u303D\u3040-\u309A\u309D-\u318F\u3192-\u3195\u31A0-\u31BF\u31E4-\u31FF\u321F-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u32FF\u3400-\u4DBF\u4E00-\uA48F\uA4C7-\uA6FF\uA717-\uA71F\uA722-\uA788\uA78B-\uA827\uA82C-\uA835\uA83A-\uAA76\uAA7A-\uAB5A\uAB5C-\uD7FF\uDC00-\uFB28\uFB2A-\uFBB1\uFBC2-\uFDFB\uFDFE-\uFE61\uFE63\uFE67\uFE68\uFE6A-\uFF03\uFF05-\uFF0A\uFF0C-\uFF1B\uFF1F-\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5F-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]|\uD800[\uDC00-\uDD36\uDD40-\uDD78\uDD8A\uDD8B\uDD8D-\uDD8F\uDD9C-\uDD9F\uDDA1-\uDDCF\uDDFD-\uDFFF]|[\uD801\uD803-\uD819\uD81B-\uD82E\uD830-\uD833\uD836-\uD83A\uD83F-\uDBFF][\uDC00-\uDFFF]|\uD802[\uDC00-\uDC76\uDC79-\uDEC7\uDEC9-\uDFFF]|\uD81A[\uDC00-\uDF3B\uDF40-\uDF44\uDF46-\uDFFF]|\uD82F[\uDC00-\uDC9B\uDC9D-\uDFFF]|\uD834[\uDCF6-\uDCFF\uDD27\uDD28\uDD65-\uDD69\uDD6D-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDDDE-\uDDFF\uDE42-\uDE44\uDE46-\uDEFF\uDF57-\uDFFF]|\uD835[\uDC00-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFFF]|\uD83B[\uDC00-\uDEEF\uDEF2-\uDFFF]|\uD83C[\uDC2C-\uDC2F\uDC94-\uDC9F\uDCAF\uDCB0\uDCC0\uDCD0\uDCF6-\uDD0F\uDD2F\uDD6C-\uDD6F\uDD9B-\uDDE5\uDE03-\uDE0F\uDE3B-\uDE3F\uDE49-\uDE4F\uDE52-\uDEFF\uDF2D-\uDF2F\uDF7E\uDF7F\uDFCF-\uDFD3\uDFF8-\uDFFF]|\uD83D[\uDCFF\uDD4B-\uDD4F\uDD7A\uDDA4\uDE43\uDE44\uDED0-\uDEDF\uDEED-\uDEEF\uDEF4-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDFFF]|[\uD800-\uDBFF]/,b=function(e,t,n){var r,a,o,u=["symbol"],s={"[:digit:]":/\d/,"[:^S:]":y};return"narrow"===n.symbolForm&&u.unshift("symbol-alt-narrow"),u.some((function(n){return o=t.main(["numbers/currencies",e,n])})),r=["beforeCurrency","afterCurrency"].map((function(e){return t.main(["numbers","currencyFormats-numberSystem-"+i(t),"currencySpacing",e])})),a=t.main(["numbers","currencyFormats-numberSystem-"+i(t),"accounting"===n.style?"accounting":"standard"]),{pattern:a=p(e,a,t).split(";").map((function(e){return e.split("¤").map((function(e,t){var n=s[r[t].currencyMatch],i=s[r[t].surroundingMatch],a="";return n=n.test(o.charAt(t?o.length-1:0)),i=i.test(e.charAt(t?0:e.length-1).replace(/[#@,.]/g,"0")),n&&e&&i&&(a=r[t].insertBetween),(t?a:"")+e+(t?"":a)})).join("'"+o+"'")})).join(";")}};function w(e,t){s(e,t,{skip:[/numbers\/currencies\/[^/]+\/symbol-alt-/,/supplemental\/currencyData\/fractions\/[A-Za-z]{3}$/]})}return t.currencyFormatter=t.prototype.currencyFormatter=function(e,t){var r,i,a,u,s,d,p;return c(e,"currency"),function(e,t){f(e,t,void 0===e||"string"==typeof e&&/^[A-Za-z]{3}$/.test(e),"3-letter currency code string as defined by ISO 4217")}(e,"currency"),h(t,"options"),i=this.cldr,r=[e,t=t||{}],p=t.style||"symbol",l(i),i.on("get",w),s={accounting:b,code:m,name:_,symbol:b}[p](e,i,t),i.off("get",w),(t=function(e,t){var r,i={};for(r in t=n(t),e)-1===t.indexOf(r)&&(i[r]=e[r]);return i}(t,"style")).raw=s.pattern,"symbol"===p||"accounting"===p?(a=this.numberFormatter(t),d=v(a),o(r,i,d,[a])):(a=this.numberFormatter(t),u=this.pluralGenerator(),d=v(a,u,s),o(r,i,d,[a,u,s])),d},t.currencyParser=t.prototype.currencyParser=function(){},t.formatCurrency=t.prototype.formatCurrency=function(e,t,n){return c(e,"value"),d(e,"value"),this.currencyFormatter(t,n)(e)},t.parseCurrency=t.prototype.parseCurrency=function(){},t},"function"==typeof t&&t.amd?t(["cldr","../globalize","./number","cldr/event","cldr/supplemental"],r):e.exports=r(n(2),n(1))}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * Globalize v1.4.2 2019-03-07T13:47Z Released under the MIT license
 * http://git.io/TrdQbw
 */var r;r=function(e,t){var n=t._createError,r=t._createErrorUnsupportedFeature,i=t._formatMessage,a=t._isPlainObject,o=t._looseMatching,u=t._numberNumberingSystemDigitsMap,s=t._numberSymbol,l=t._regexpEscape,c=t._removeLiteralQuotes,f=t._runtimeBind,d=t._stringPad,h=t._validate,p=t._validateCldr,x=t._validateDefaultLocale,g=t._validateParameterPresence,m=t._validateParameterType,v=t._validateParameterTypePlainObject,_=t._validateParameterTypeString,y=function(e,t){m(e,t,void 0===e||e instanceof Date,"Date")},b="GyYuUrQqMLlwWEecdDFghHKkmsSAzZOvVXx".split("").reduce((function(e,t,n){return e[t]=n,e}),{}),w=function(e,t){return t=t||function(e,t,n){return e[n]=t,e},Object.keys(e).reduce((function(n,r){return t(n,r,e[r])}),{})},S=w({e:"eEc",L:"ML"},(function(e,t,n){return n.split("").forEach((function(n){e[n]=t})),e})),k=function(e){return S[e]||e},E=/([a-z])\1*|'([^']|'')+'|''|./gi,A=function(e,t){var n,r="";for(n=0;n<t;n++)r+=e;return r},T=function(e,t,n){var r,i,a;return r=(i=e.match(/S/g))?i.length:0,-1!==(a=(t=function(e,t){var n,r,i,a,o,u,s,l,c=k;for(l=e.match(E),i=t.match(E),n=0;n<i.length;n++)for(a=i[n].charAt(0),o=i[n].length,r=0;r<l.length;r++)u=l[r].charAt(0),s=l[r].length,c(a)===c(u)&&o<s&&(i[n]=A(a,s));return i.join("")}(e.replace(/S/g,""),t)).lastIndexOf("s"))&&0!==r&&(t=t.slice(0,a+1)+n+A("S",r)+t.slice(a+1)),t},C=function(e,t){var n,r,i,a,o,u,s,l,c,f=k;if(e===t)return 0;if(e=e.match(E),t=t.match(E),e.length!==t.length)return-1;for(i=1,l=0;l<e.length;l++){for(u=f(n=e[l].charAt(0)),s=null,c=0;c<t.length&&u!==(s=f(r=t[c].charAt(0)));c++)s=null;if(null===s)return-1;a=e[l].length,o=t[c].length,i+=Math.abs(a-o),n!==r&&(i+=1),(a<3&&o>=3||a>=3&&o<3)&&(i+=20)}return i},D=function(e,t){var n,r,i,a,o,u="dates/calendars/gregorian/dateTimeFormats/availableFormats",l=T,c=C;if(i=e.main([u,t]),t&&!i){for(o in a=[],n=e.main([u]))a.push({skeleton:o,pattern:n[o],rate:c(t,o)});(a=a.filter((function(e){return e.rate>-1})).sort((function(e,t){return e.rate-t.rate}))).length&&(r=s("decimal",e),i=l(t,a[0].pattern,r))}return i},N=function(e,t){var r,a,o,u,s,l=D;function c(e,n,r){return i(t.main(["dates/calendars/gregorian/dateTimeFormats",e]),[r,n])}switch(!0){case"skeleton"in e:if(function(e){var t,r=b;e.replace(/[^GyYuUrQqMLlwWEecdDFghHKkmsSAzZOvVXx]/,(function(t){throw n("E_INVALID_OPTIONS","Invalid field `{invalidField}` of skeleton `{value}`",{invalidField:t,type:"skeleton",value:e})})),e.split("").every((function(i){if(r[i]<t)throw n("E_INVALID_OPTIONS","Invalid order `{invalidField}` of skeleton `{value}`",{invalidField:i,type:"skeleton",value:e});return t=r[i],!0}))}(o=(o=e.skeleton).replace(/j/g,(function(){return t.supplemental.timeData.preferred()}))),a=l(t,o))break;u=o.split(/[^hHKkmsSAzZOvVXx]/).slice(-1)[0],r=o.split(/[^GyYuUrQqMLlwWdDFgEec]/)[0],r=l(t,r),u=l(t,u),s=/(MMMM|LLLL).*[Ec]/.test(r)?"full":/MMMM|LLLL/.test(r)?"long":/MMM|LLL/.test(r)?"medium":"short",a=r&&u?c(s,r,u):r||u;break;case"date"in e:case"time"in e:a=t.main(["dates/calendars/gregorian","date"in e?"dateFormats":"timeFormats",e.date||e.time]);break;case"datetime"in e:a=c(e.datetime,t.main(["dates/calendars/gregorian/dateFormats",e.datetime]),t.main(["dates/calendars/gregorian/timeFormats",e.datetime]));break;case"raw"in e:a=e.raw;break;default:throw function(e,t){return n("E_INVALID_PAR_VALUE","Invalid `{name}` value ({value}).",{name:e,value:t})}({name:"options",value:e})}return a},F=["sun","mon","tue","wed","thu","fri","sat"],O=function(e){return F.indexOf(e.supplemental.weekData.firstDay())},M=function(e,t,n,r){var i,a;if(n)return(a=r.main(["dates/timeZoneNames/zone",n,e<4?"short":"long",t]))?a:(i=r.supplemental(["metaZones/metazoneInfo/timezone",n,0,"usesMetazone/_mzone"]),r.main(["dates/timeZoneNames/metazone",i,e<4?"short":"long",t]))},L=function(e){return e.split(";").map((function(e){return e.slice(0,e.indexOf("H")+1)})).join(";")},P=function(e,t){return e.split(";").map((function(e){var n=e.split(/H+/);return n.splice(1,0,t),n.join("")})).join(";")},z=function(e,t){var n=function(){return t};return n.dataCacheKey=e,n},I=function(){function e(e,t,n){Object.defineProperty(e,t,{value:n})}function t(e,t){for(var n=0,r=e.getTime();n<t.length-1&&r>=t[n];)n++;return n}function n(e){var t=this.getTimezoneOffset(),n=e();this.original.setTime(new Date(this.getTime()));var r=this.getTimezoneOffset();return r-t&&this.original.setMinutes(this.original.getMinutes()+r-t),n}var r=function(t,r){if(e(this,"original",new Date(t.getTime())),e(this,"local",new Date(t.getTime())),e(this,"timeZoneData",r),e(this,"setWrap",n),!(r.untils&&r.offsets&&r.isdsts))throw new Error("Invalid IANA data");this.setTime(this.local.getTime()-60*this.getTimezoneOffset()*1e3)};return r.prototype.clone=function(){return new r(this.original,this.timeZoneData)},["getFullYear","getMonth","getDate","getDay","getHours","getMinutes","getSeconds","getMilliseconds"].forEach((function(e){var t="getUTC"+e.substr(3);r.prototype[e]=function(){return this.local[t]()}})),r.prototype.valueOf=r.prototype.getTime=function(){return this.local.getTime()+60*this.getTimezoneOffset()*1e3},r.prototype.getTimezoneOffset=function(){var e=t(this.original,this.timeZoneData.untils);return this.timeZoneData.offsets[e]},["setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds"].forEach((function(e){var t="setUTC"+e.substr(3);r.prototype[e]=function(e){var n=this.local;return this.setWrap((function(){return n[t](e)}))}})),r.prototype.setTime=function(e){return this.local.setTime(e)},r.prototype.isDST=function(){var e=t(this.original,this.timeZoneData.untils);return Boolean(this.timeZoneData.isdsts[e])},r.prototype.inspect=function(){var e=t(this.original,this.timeZoneData.untils),n=this.timeZoneData.abbrs;return this.local.toISOString().replace(/Z$/,"")+" "+(n&&n[e]+" "||-1*this.getTimezoneOffset()+" ")+(this.isDST()?"(daylight savings)":"")},r.prototype.toDate=function(){return new Date(this.getTime())},["toISOString","toJSON","toUTCString"].forEach((function(e){r.prototype[e]=function(){return this.toDate()[e]()}})),r}(),R=function(e,t){switch(e=e instanceof I?e.clone():new Date(e.getTime()),t){case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0);case"hour":e.setMinutes(0);case"minute":e.setSeconds(0);case"second":e.setMilliseconds(0)}return e},G=function(e,t){var n=e.getDate();e.setDate(1),e.setMonth(t),function(e,t){var n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();e.setDate(t<1?1:t<n?t:n)}(e,n)},j=function(e,t,n){return e<t||e>n},W=function(e,t,n){var i,a,o,u,s,l,c,f,d,h=new Date,p=[];if(n.timeZoneData&&(h=new I(h,n.timeZoneData())),!t.length)return null;if(!t.every((function(e){var t,d,x;if("literal"===e.type)return!0;switch(t=e.type.charAt(0),x=e.type.length,"j"===t&&(t=n.preferredTimeData),t){case"G":p.push(0),s=+e.value;break;case"y":if(d=e.value,2===x){if(j(d,0,99))return!1;(d+=100*Math.floor(h.getFullYear()/100))>h.getFullYear()+20&&(d-=100)}h.setFullYear(d),p.push(0);break;case"Y":throw r({feature:"year pattern `"+t+"`"});case"Q":case"q":break;case"M":case"L":if(d=x<=2?e.value:+e.value,j(d,1,12))return!1;u=d,p.push(1);break;case"w":case"W":break;case"d":a=e.value,p.push(2);break;case"D":o=e.value,p.push(2);break;case"F":break;case"e":case"c":case"E":break;case"a":i=e.value;break;case"h":if(d=e.value,j(d,1,12))return!1;l=c=!0,h.setHours(12===d?0:d),p.push(3);break;case"K":if(d=e.value,j(d,0,11))return!1;l=c=!0,h.setHours(d),p.push(3);break;case"k":if(d=e.value,j(d,1,24))return!1;l=!0,h.setHours(24===d?0:d),p.push(3);break;case"H":if(d=e.value,j(d,0,23))return!1;l=!0,h.setHours(d),p.push(3);break;case"m":if(d=e.value,j(d,0,59))return!1;h.setMinutes(d),p.push(4);break;case"s":if(d=e.value,j(d,0,59))return!1;h.setSeconds(d),p.push(5);break;case"A":h.setHours(0),h.setMinutes(0),h.setSeconds(0);case"S":d=Math.round(e.value*Math.pow(10,3-x)),h.setMilliseconds(d),p.push(6);break;case"z":case"Z":case"O":case"v":case"V":case"X":case"x":"number"==typeof e.value&&(f=e.value)}return!0})))return null;if(l&&!(!i^c))return null;if(0===s&&h.setFullYear(-1*h.getFullYear()+1),void 0!==u&&G(h,u-1),void 0!==a){if(j(a,1,function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}(h)))return null;h.setDate(a)}else if(void 0!==o){if(j(o,1,(d=h.getFullYear(),1===new Date(d,1,29).getMonth()?366:365)))return null;h.setMonth(0),h.setDate(o)}return c&&"pm"===i&&h.setHours(h.getHours()+12),void 0!==f&&h.setMinutes(h.getMinutes()+f-h.getTimezoneOffset()),p=Math.max.apply(null,p),(h=R(h,["year","month","day","hour","minute","second","milliseconds"][p]))instanceof I&&(h=h.toDate()),h},B=function(e,t,n){return function(r){var i;return g(r,"value"),_(r,"value"),i=function(e,t,n){var r,i,a=[],u=["abbreviated","wide","narrow"];return r=n.digitsRe,e=o(e),i=n.pattern.match(E).every((function(i){var o,s,f,d,h={};function p(t,n){var r,i,a=e.match(t);return n=n||function(e){return+e},!!a&&(i=a[1],a.length<6?(r=i?1:3,h.value=60*n(a[r])):a.length<10?(r=i?[1,3]:[5,7],h.value=60*n(a[r[0]])+n(a[r[1]])):(r=i?[1,3,5]:[7,9,11],h.value=60*n(a[r[0]])+n(a[r[1]])+n(a[r[2]])/60),i&&(h.value*=-1),!0)}function x(){if(1===s)return f=!0,d=r}function g(){if(1===s||2===s)return f=!0,d=new RegExp("^("+r.source+"){1,2}")}function m(){if(2===s)return f=!0,d=new RegExp("^("+r.source+"){2}")}function v(t){var r=n[t.join("/")];return r?(r.some((function(t){if(t[1].test(e))return h.value=t[0],d=t[1],!0})),null):null}switch(h.type=i,o=i.charAt(0),s=i.length,"Z"===o&&(s<4?(o="x",s=4):s<5?(o="O",s=4):(o="X",s=5)),"z"===o&&n.standardOrDaylightTzName&&(h.value=null,d=n.standardOrDaylightTzName),"v"===o&&(n.genericTzName?(h.value=null,d=n.genericTzName):(o="V",s=4)),"V"===o&&n.timeZoneName&&(h.value=2===s?n.timeZoneName:null,d=n.timeZoneNameRe),o){case"G":v(["gregorian/eras",s<=3?"eraAbbr":4===s?"eraNames":"eraNarrow"]);break;case"y":case"Y":f=!0,d=1===s?new RegExp("^("+r.source+")+"):2===s?new RegExp("^("+r.source+"){1,2}"):new RegExp("^("+r.source+"){"+s+",}");break;case"Q":case"q":x()||m()||v(["gregorian/quarters","Q"===o?"format":"stand-alone",u[s-3]]);break;case"M":case"L":g()||v(["gregorian/months","M"===o?"format":"stand-alone",u[s-3]]);break;case"D":s<=3&&(f=!0,d=new RegExp("^("+r.source+"){"+s+",3}"));break;case"W":case"F":x();break;case"e":case"c":if(s<=2){x()||m();break}case"E":6===s?v(["gregorian/days",["c"===o?"stand-alone":"format"],"short"])||v(["gregorian/days",["c"===o?"stand-alone":"format"],"abbreviated"]):v(["gregorian/days",["c"===o?"stand-alone":"format"],u[s<3?0:s-3]]);break;case"a":v(["gregorian/dayPeriods/format/wide"]);break;case"w":(function(){if(1===s)return f=!0,d=new RegExp("^("+r.source+"){1,2}")})()||m();break;case"d":case"h":case"H":case"K":case"k":case"j":case"m":case"s":g();break;case"S":f=!0,d=new RegExp("^("+r.source+"){"+s+"}");break;case"A":f=!0,d=new RegExp("^("+r.source+"){"+(s+5)+"}");break;case"v":case"V":case"z":if(d&&d.test(e))break;if("V"===o&&2===s)break;case"O":if(e===n["timeZoneNames/gmtZeroFormat"])h.value=0,d=n["timeZoneNames/gmtZeroFormatRe"];else if(!n["timeZoneNames/hourFormat"].some((function(e){if(p(e,t))return d=e,!0})))return null;break;case"X":if("Z"===e){h.value=0,d=/^Z/;break}case"x":if(!n.x.some((function(e){if(p(e))return d=e,!0})))return null;break;case"'":h.type="literal",d=new RegExp("^"+l(c(i)));break;default:h.type="literal",d=new RegExp("^"+l(i))}return!(!d||(e=e.replace(d,(function(e){return h.lexeme=e,f&&(h.value=t(e)),""})),!h.lexeme||f&&isNaN(h.value)||(a.push(h),0)))})),""!==e&&(i=!1),i?a:[]}(r,e,n),W(0,i,t)||null}},U=function(e,t){return(e.getDay()-t+7)%7},V=function(e){return Math.floor((t=R(e,"year"),(e.getTime()-t.getTime())/864e5));var t},q=w({era:"G",year:"yY",quarter:"qQ",month:"ML",week:"wW",day:"dDF",weekday:"ecE",dayperiod:"a",hour:"hHkK",minute:"m",second:"sSA",zone:"zvVOxX"},(function(e,t,n){return n.split("").forEach((function(n){e[n]=t})),e})),H=function(e,t,n,r){var i,a=e.getTimezoneOffset();return i=Math.abs(a),r=r||{1:function(e){return d(e,1)},2:function(e){return d(e,2)}},t.split(";")[a>0?1:0].replace(":",n).replace(/HH?/,(function(e){return r[e.length](Math.floor(i/60))})).replace(/mm/,(function(){return r[2](Math.floor(i%60))})).replace(/ss/,(function(){return r[2](Math.floor(i%1*60))}))},$=function(e,t,n){var r=[],i=n.timeSeparator;return n.timeZoneData&&(e=new I(e,n.timeZoneData())),n.pattern.replace(E,(function(a){var o,u,s,l=a.charAt(0),f=a.length;switch("j"===l&&(l=n.preferredTime),"Z"===l&&(f<4?(l="x",f=4):f<5?(l="O",f=4):(l="X",f=5)),"z"===l&&(e.isDST&&(s=e.isDST()?n.daylightTzName:n.standardTzName),s||(l="O",f<4&&(f=1))),l){case"G":s=n.eras[e.getFullYear()<0?0:1];break;case"y":s=e.getFullYear(),2===f&&(s=+(s=String(s)).substr(s.length-2));break;case"Y":(s=new Date(e.getTime())).setDate(s.getDate()+7-U(e,n.firstDay)-n.firstDay-n.minDays),s=s.getFullYear(),2===f&&(s=+(s=String(s)).substr(s.length-2));break;case"Q":case"q":s=Math.ceil((e.getMonth()+1)/3),f>2&&(s=n.quarters[l][f][s]);break;case"M":case"L":s=e.getMonth()+1,f>2&&(s=n.months[l][f][s]);break;case"w":s=U(R(e,"year"),n.firstDay),s=Math.ceil((V(e)+s)/7)-(7-s>=n.minDays?0:1);break;case"W":s=U(R(e,"month"),n.firstDay),s=Math.ceil((e.getDate()+s)/7)-(7-s>=n.minDays?0:1);break;case"d":s=e.getDate();break;case"D":s=V(e)+1;break;case"F":s=Math.floor(e.getDate()/7)+1;break;case"e":case"c":if(f<=2){s=U(e,n.firstDay)+1;break}case"E":s=F[e.getDay()],s=n.days[l][f][s];break;case"a":s=n.dayPeriods[e.getHours()<12?"am":"pm"];break;case"h":s=e.getHours()%12||12;break;case"H":s=e.getHours();break;case"K":s=e.getHours()%12;break;case"k":s=e.getHours()||24;break;case"m":s=e.getMinutes();break;case"s":s=e.getSeconds();break;case"S":s=Math.round(e.getMilliseconds()*Math.pow(10,f-3));break;case"A":s=Math.round(function(e){return e-R(e,"day")}(e)*Math.pow(10,f-3));break;case"z":break;case"v":if(n.genericTzName){s=n.genericTzName;break}case"V":if(n.timeZoneName){s=n.timeZoneName;break}"v"===a&&(f=1);case"O":0===e.getTimezoneOffset()?s=n.gmtZeroFormat:(f<4?(o=e.getTimezoneOffset(),o=n.hourFormat[o%60-o%1==0?0:1]):o=n.hourFormat,s=H(e,o,i,t),s=n.gmtFormat.replace(/\{0\}/,s));break;case"X":if(0===e.getTimezoneOffset()){s="Z";break}case"x":o=e.getTimezoneOffset(),1===f&&o%60-o%1!=0&&(f+=1),4!==f&&5!==f||o%1!=0||(f-=2),s=H(e,s=["+HH;-HH","+HHmm;-HHmm","+HH:mm;-HH:mm","+HHmmss;-HHmmss","+HH:mm:ss;-HH:mm:ss"][f-1],":");break;case":":s=i;break;case"'":s=c(a);break;default:s=a}"number"==typeof s&&(s=t[f](s)),"literal"===(u=q[l]||"literal")&&r.length&&"literal"===r[r.length-1].type?r[r.length-1].value+=s:r.push({type:u,value:s})})),r};function Y(e){return void 0!==e.skeleton||void 0!==e.date||void 0!==e.time||void 0!==e.datetime||void 0!==e.raw}function X(e,t){p(e,t,{skip:[/dates\/calendars\/gregorian\/dateTimeFormats\/availableFormats/,/dates\/calendars\/gregorian\/days\/.*\/short/,/dates\/timeZoneNames\/zone/,/dates\/timeZoneNames\/metazone/,/globalize-iana/,/supplemental\/metaZones/,/supplemental\/timeData\/(?!001)/,/supplemental\/weekData\/(?!001)/]})}function Z(e){J("date",e),J("time",e),J("datetime",e)}function J(e,t){var n=t[e];h("E_INVALID_OPTIONS",'Invalid `{{type}: "{value}"}`.',void 0===n||-1!==["short","medium","long","full"].indexOf(n),{type:e,value:n})}function K(e,t){h("E_INVALID_OPTIONS",'Invalid `{skeleton: "{value}"}` based on provided CLDR.',void 0===t||"string"==typeof e&&e,{type:"skeleton",value:t})}function Q(e){return function(t,n){/globalize-iana/.test(t)&&h("E_MISSING_IANA_TZ","Missing required IANA timezone content for `{timeZone}`: `{path}`.",n,{path:t.replace(/globalize-iana\//,""),timeZone:e})}}return t.loadTimeZone=function(t){var n={"globalize-iana":t};g(t,"json"),v(t,"json"),e.load(n)},t.dateFormatter=t.prototype.dateFormatter=function(e){var t,n,r;return v(e,"options"),Y(e=e||{})||(e.skeleton="yMd"),t=[e],r=function(e){return function(t){return e(t).map((function(e){return e.value})).join("")}}(n=this.dateToPartsFormatter(e)),f(t,this.cldr,r,[n]),r},t.dateToPartsFormatter=t.prototype.dateToPartsFormatter=function(e){var t,n,a,o,u,l,c,h,p;for(o in v(e,"options"),n=this.cldr,Y(e=e||{})||(e.skeleton="yMd"),Z(e),x(n),h=e.timeZone,_(h,"options.timeZone"),t=[e],n.on("get",X),h&&(p=Q(h),n.on("get",p)),K(u=N(e,n),e.skeleton),l=function(e,t,n){var a={numberFormatters:{},pattern:e,timeSeparator:s("timeSeparator",t)},o=["abbreviated","wide","narrow"];function u(e){a.numberFormatters[e]=d("",e)}return n&&(a.timeZoneData=z("iana/"+n,{offsets:t.get(["globalize-iana/zoneData",n,"offsets"]),untils:t.get(["globalize-iana/zoneData",n,"untils"]),isdsts:t.get(["globalize-iana/zoneData",n,"isdsts"])})),e.replace(E,(function(s){var l,c,f,d,h,p,x;switch(c=s.charAt(0),p=s.length,"j"===c&&(a.preferredTime=c=t.supplemental.timeData.preferred()),"Z"===c&&4===p&&(c="O",p=4),"z"===c&&(x=M(p,"standard",n,t),f=M(p,"daylight",n,t),x&&(a.standardTzName=x),f&&(a.daylightTzName=f),x&&f||(c="O",p<4&&(p=1))),"v"===c&&((h=M(p,"generic",n,t))||(c="V",p=4)),c){case"G":a.eras=t.main(["dates/calendars/gregorian/eras",p<=3?"eraAbbr":4===p?"eraNames":"eraNarrow"]);break;case"y":d=!0;break;case"Y":a.firstDay=O(t),a.minDays=t.supplemental.weekData.minDays(),d=!0;break;case"u":case"U":throw r({feature:"year pattern `"+c+"`"});case"Q":case"q":p>2?(a.quarters||(a.quarters={}),a.quarters[c]||(a.quarters[c]={}),a.quarters[c][p]=t.main(["dates/calendars/gregorian/quarters","Q"===c?"format":"stand-alone",o[p-3]])):d=!0;break;case"M":case"L":p>2?(a.months||(a.months={}),a.months[c]||(a.months[c]={}),a.months[c][p]=t.main(["dates/calendars/gregorian/months","M"===c?"format":"stand-alone",o[p-3]])):d=!0;break;case"w":case"W":a.firstDay=O(t),a.minDays=t.supplemental.weekData.minDays(),d=!0;break;case"d":case"D":case"F":d=!0;break;case"g":throw r({feature:"Julian day pattern `g`"});case"e":case"c":if(p<=2){a.firstDay=O(t),d=!0;break}case"E":a.days||(a.days={}),a.days[c]||(a.days[c]={}),a.days[c][p]=6===p?t.main(["dates/calendars/gregorian/days","c"===c?"stand-alone":"format","short"])||t.main(["dates/calendars/gregorian/days","c"===c?"stand-alone":"format","abbreviated"]):t.main(["dates/calendars/gregorian/days","c"===c?"stand-alone":"format",o[p<3?0:p-3]]);break;case"a":a.dayPeriods={am:t.main("dates/calendars/gregorian/dayPeriods/format/wide/am"),pm:t.main("dates/calendars/gregorian/dayPeriods/format/wide/pm")};break;case"h":case"H":case"K":case"k":case"m":case"s":case"S":case"A":d=!0;break;case"v":if(1!==p&&4!==p)throw r({feature:"timezone pattern `"+e+"`"});a.genericTzName=h;break;case"V":if(1===p)throw r({feature:"timezone pattern `"+e+"`"});if(n){if(2===p){a.timeZoneName=n;break}var g,m=t.main(["dates/timeZoneNames/zone",n,"exemplarCity"]);if(3===p&&(m||(m=t.main(["dates/timeZoneNames/zone/Etc/Unknown/exemplarCity"])),g=m),m&&4===p&&(g=i(t.main("dates/timeZoneNames/regionFormat"),[m])),g){a.timeZoneName=g;break}}"v"===s&&(p=1);case"O":a.gmtFormat=t.main("dates/timeZoneNames/gmtFormat"),a.gmtZeroFormat=t.main("dates/timeZoneNames/gmtZeroFormat"),l=t.main("dates/timeZoneNames/hourFormat"),a.hourFormat=p<4?[L(l),P(l,"H")]:P(l,"HH");case"Z":case"X":case"x":u(1),u(2)}d&&u(p)})),a}(u,n,h),n.off("get",X),p&&n.off("get",p),a=l.numberFormatters,delete l.numberFormatters,a)a[o]=this.numberFormatter({raw:a[o]});return c=function(e,t){return function(n){return g(n,"value"),y(n,"value"),$(n,e,t)}}(a,l),f(t,n,c,[a,l]),c},t.dateParser=t.prototype.dateParser=function(e){var t,n,c,d,h,p,g,m;return v(e,"options"),n=this.cldr,Y(e=e||{})||(e.skeleton="yMd"),Z(e),x(n),g=e.timeZone,_(g,"options.timeZone"),t=[e],n.on("get",X),g&&n.on("get",Q(g)),K(h=N(e,n),e.skeleton),m=function(e,t,n){var c,f={pattern:o(e)},d=s("timeSeparator",t),h=["abbreviated","wide","narrow"];function p(e,t,n,r){var i;return n||(n="\\d"),t||(t="{0}"),i=e.replace("+","\\+").replace(/HH|mm|ss/g,"(("+n+"){2})").replace(/H|m/g,"(("+n+"){1,2})"),r&&(i=i.replace(/:/g,r)),i=i.split(";").map((function(e){return t.replace("{0}",e)})).join("|"),new RegExp("^"+i)}function x(e,t){/(timeZoneNames\/zone|supplemental\/metaZones|timeZoneNames\/metazone|timeZoneNames\/regionFormat|timeZoneNames\/gmtFormat)/.test(e)||t&&("gregorian/dayPeriods/format/wide"===(e=e.replace(/^.*\/dates\//,"").replace(/calendars\//,""))&&(t=function(e,t){var n,r={};for(n in e)t.test(n)&&(r[n]=e[n]);return r}(t,/^am|^pm/)),t=a(t)?Object.keys(t).map((function(e){return[e,new RegExp("^"+l(o(t[e])))]})).sort((function(e,t){return t[1].source.length-e[1].source.length})):o(t),f[e]=t)}return c=(c=u(t))?"["+c+"]":"\\d",f.digitsRe=new RegExp(c),t.on("get",x),e.match(E).forEach((function(a){var u,s,x,g,m,v;if(s=a.charAt(0),m=a.length,"Z"===s&&(m<5?(s="O",m=4):(s="X",m=5)),"z"===s&&(v=M(m,"standard",n,t),x=M(m,"daylight",n,t),v&&(v=l(o(v))),x&&(x=l(o(x))),(v||x)&&(f.standardOrDaylightTzName=new RegExp("^("+[v,x].filter((function(e){return e})).reduce((function(e,t){return e+"|"+t}))+")")),v&&x||(s="O",m<4&&(m=1))),"v"===s){if(1!==m&&4!==m)throw r({feature:"timezone pattern `"+e+"`"});var _=M(m,"generic",n,t);_?(f.genericTzName=new RegExp("^"+l(o(_))),s="O"):(s="V",m=4)}switch(s){case"G":t.main(["dates/calendars/gregorian/eras",m<=3?"eraAbbr":4===m?"eraNames":"eraNarrow"]);break;case"u":case"U":throw r({feature:"year pattern `"+s+"`"});case"Q":case"q":m>2&&t.main(["dates/calendars/gregorian/quarters","Q"===s?"format":"stand-alone",h[m-3]]);break;case"M":case"L":m>2&&t.main(["dates/calendars/gregorian/months","M"===s?"format":"stand-alone",h[m-3]]);break;case"g":throw r({feature:"Julian day pattern `g`"});case"e":case"c":if(m<=2)break;case"E":6===m?t.main(["dates/calendars/gregorian/days",["c"===s?"stand-alone":"format"],"short"])||t.main(["dates/calendars/gregorian/days",["c"===s?"stand-alone":"format"],"abbreviated"]):t.main(["dates/calendars/gregorian/days",["c"===s?"stand-alone":"format"],h[m<3?0:m-3]]);break;case"a":t.main("dates/calendars/gregorian/dayPeriods/format/wide");break;case"V":if(1===m)throw r({feature:"timezone pattern `"+e+"`"});if(n){if(2===m){f.timeZoneName=n,f.timeZoneNameRe=new RegExp("^"+l(n));break}var y,b=t.main(["dates/timeZoneNames/zone",n,"exemplarCity"]);3===m&&(b||(b=t.main(["dates/timeZoneNames/zone/Etc/Unknown/exemplarCity"])),y=b),b&&4===m&&(y=i(t.main("dates/timeZoneNames/regionFormat"),[b])),y&&(y=o(y),f.timeZoneName=y,f.timeZoneNameRe=new RegExp("^"+l(y)))}"v"===a&&(m=1);case"z":case"O":g=t.main("dates/timeZoneNames/gmtFormat"),t.main("dates/timeZoneNames/gmtZeroFormat"),t.main("dates/timeZoneNames/hourFormat"),f["timeZoneNames/gmtZeroFormatRe"]=new RegExp("^"+l(f["timeZoneNames/gmtZeroFormat"])),u=f["timeZoneNames/hourFormat"],f["timeZoneNames/hourFormat"]=(m<4?[P(u,"H"),L(u)]:[P(u,"HH")]).map((function(e){return p(e,g,c,d)}));case"X":case"x":f.x=[["+HHmm;-HHmm","+HH;-HH"],["+HHmm;-HHmm"],["+HH:mm;-HH:mm"],["+HHmmss;-HHmmss","+HHmm;-HHmm"],["+HH:mm:ss;-HH:mm:ss","+HH:mm;-HH:mm"]][m-1].map((function(e){return p(e)}))}})),t.off("get",x),f}(h,n,g),d=function(e,t){var n={preferredTimeData:e.supplemental.timeData.preferred()};return t&&(n.timeZoneData=z("iana/"+t,{offsets:e.get(["globalize-iana/zoneData",t,"offsets"]),untils:e.get(["globalize-iana/zoneData",t,"untils"]),isdsts:e.get(["globalize-iana/zoneData",t,"isdsts"])})),n}(n,g),n.off("get",X),g&&n.off("get",Q(g)),c=this.numberParser({raw:"0"}),p=B(c,d,m),f(t,n,p,[c,d,m]),p},t.formatDate=t.prototype.formatDate=function(e,t){return g(e,"value"),y(e,"value"),this.dateFormatter(t)(e)},t.formatDateToParts=t.prototype.formatDateToParts=function(e,t){return g(e,"value"),y(e,"value"),this.dateToPartsFormatter(t)(e)},t.parseDate=t.prototype.parseDate=function(e,t){return g(e,"value"),_(e,"value"),this.dateParser(t)(e)},t},"function"==typeof t&&t.amd?t(["cldr","../globalize","./number","cldr/event","cldr/supplemental"],r):e.exports=r(n(2),n(1))}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * Globalize v1.4.2 2019-03-07T13:47Z Released under the MIT license
 * http://git.io/TrdQbw
 */var r;r=function(e,t){var n=t._formatMessage,r=t._runtimeBind,i=t._validateCldr,a=t._validateDefaultLocale,o=t._validateParameterPresence,u=t._validateParameterTypeString,s=t._validateParameterTypeNumber,l=function(e,t,r){return function(i){return o(i,"value"),s(i,"value"),function(e,t,r,i){var a=i["relative-type-"+e];return a||(a=(e<=0?i["relativeTime-type-past"]:i["relativeTime-type-future"])["relativeTimePattern-count-"+r(e=Math.abs(e))],n(a,[t(e)]))}(i,e,t,r)}};return t.formatRelativeTime=t.prototype.formatRelativeTime=function(e,t,n){return o(e,"value"),s(e,"value"),this.relativeTimeFormatter(t,n)(e)},t.relativeTimeFormatter=t.prototype.relativeTimeFormatter=function(e,t){var n,s,c,f,d,h;return o(e,"unit"),u(e,"unit"),s=this.cldr,n=[e,t=t||{}],a(s),s.on("get",i),d=function(e,t,n){var r,i,a,o=n.form;for(a in o&&(e=e+"-"+o),i={"relativeTime-type-future":(r=t.main(["dates","fields",e]))["relativeTime-type-future"],"relativeTime-type-past":r["relativeTime-type-past"]},r)r.hasOwnProperty(a)&&/relative-type-(-?[0-9]+)/.exec(a)&&(i[a]=r[a]);return i}(e,s,t),s.off("get",i),c=this.numberFormatter(t),f=this.pluralGenerator(),h=l(c,f,d),r(n,s,h,[c,f,d]),h},t},"function"==typeof t&&t.amd?t(["cldr","../globalize","./number","./plural","cldr/event","cldr/supplemental"],r):e.exports=r(n(2),n(1))}).call(this,n(0))},function(e,t,n){(function(t){
/*!
 * Globalize v1.4.2 2019-03-07T13:47Z Released under the MIT license
 * http://git.io/TrdQbw
 */var r;r=function(e,t){var n=t._formatMessage,r=t._runtimeBind,i=t._validateParameterPresence,a=t._validateParameterTypePlainObject,o=t._validateParameterTypeNumber,u=t._validateParameterTypeString,s=function(e,t,r){return function(a){return i(a,"value"),o(a,"value"),function(e,t,r,i){var a,o,u,s,l,c,f,d,h=i.compoundUnitPattern;return i=i.unitProperties,u=t(e),f=r(e),i instanceof Array?(o=i[0],d=(l=i[1]).hasOwnProperty("one")?"one":"other",a=n(o[f],[u]),s=n(l[d],[""]).trim(),n(h,[a,s])):(c=i[f],n(c,[u]))}(a,e,t,r)}},l=["acceleration","angle","area","digital","duration","length","mass","power","pressure","speed","temperature","volume"],c=function(e,t,n){var r;if(e=e.replace(/\//,"-per-"),[""].concat(l).some((function(i){return r=n.main(["units",t,i.length?i+"-"+e:e])})),(r=function(e){var t,n;if(e)for(n in t={},e)t[n.replace(/unitPattern-count-/,"")]=e[n];return t}(r))||!/-per-/.test(e)||(e=e.split("-per-"),(r=e.map((function(e){return c(e,t,n)})))[0]&&r[1]))return r},f=c;return t.formatUnit=t.prototype.formatUnit=function(e,t,n){return i(e,"value"),o(e,"value"),this.unitFormatter(t,n)(e)},t.unitFormatter=t.prototype.unitFormatter=function(e,t){var n,o,l,c,d;return i(e,"unit"),u(e,"unit"),a(t,"options"),n=[e,t=t||{}],d=function(e,t,n){return{compoundUnitPattern:n.main(["units",t,"per/compoundUnitPattern"]),unitProperties:f(e,t,n)}}(e,t.form||"long",this.cldr),o=t.numberFormatter||this.numberFormatter(),l=this.pluralGenerator(),c=s(o,l,d),r(n,this.cldr,c,[o,l,d]),c},t},"function"==typeof t&&t.amd?t(["cldr","../globalize","./number","./plural"],r):e.exports=r(n(2),n(1))}).call(this,n(0))}]);
//# sourceMappingURL=visual.js.map