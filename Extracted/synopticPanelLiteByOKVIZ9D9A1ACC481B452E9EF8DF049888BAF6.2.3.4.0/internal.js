/*! For license information please see visual.js.LICENSE.txt */
var synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6;(()=>{var t={7728:(t,e,n)=>{"use strict";n.d(e,{BI:()=>R,BP:()=>Y,Ct:()=>Z,Et:()=>y,G8:()=>j,Gv:()=>g,I6:()=>D,Kg:()=>v,Ll:()=>at,Mu:()=>U,Nn:()=>tt,Om:()=>p,PT:()=>E,SL:()=>P,Tn:()=>b,Tq:()=>N,W2:()=>Q,YE:()=>et,Z3:()=>k,_4:()=>h,aj:()=>A,b0:()=>f,cC:()=>q,cM:()=>C,cy:()=>m,cz:()=>z,ep:()=>nt,ft:()=>M,hJ:()=>W,hg:()=>T,iQ:()=>X,jc:()=>V,l$:()=>$,l6:()=>ot,nB:()=>K,nF:()=>H,rB:()=>G,tB:()=>_,u0:()=>B,uD:()=>it,uU:()=>L,vy:()=>J,xD:()=>I,xi:()=>O,zk:()=>rt});var i="function",r="object",o="string",a="number",s="undefined",l=typeof window!==s,c=typeof document!==s&&document,u=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],h=1e-7,d={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function p(t,e,n,i){return(t*i+e*n)/(n+i)}function f(t){return typeof t===s}function g(t){return t&&typeof t===r}function m(t){return Array.isArray(t)}function v(t){return typeof t===o}function y(t){return typeof t===a}function b(t){return typeof t===i}function w(t,e,n,i,r){return S(t,e,n)?n:function(t,e,n,i,r){for(var o,a=function(n){var a=e[n].trim();if(a===t.close&&!S(t,e,n))return{value:n};var s=n,l=D(r,(function(t){return t.open===a}));if(l&&(s=w(l,e,n,i,r)),-1===s)return o=n,"break";o=n=s},s=n;s<i;++s){var l=a(s);if(s=o,"object"==typeof l)return l.value;if("break"===l)break}return-1}(t,e,n+1,i,r)}function S(t,e,n){if(!t.ignore)return null;var i=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(i)}function x(t,e){var n=v(e)?{separator:e}:e,i=n.separator,r=void 0===i?",":i,o=n.isSeparateFirst,a=n.isSeparateOnlyOpenClose,s=n.isSeparateOpenClose,l=void 0===s?a:s,c=n.openCloseCharacters,h=void 0===c?u:c,d=h.map((function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n})).join("|"),p=new RegExp("(\\s*"+r+"\\s*|"+d+"|\\s+)","g"),f=t.split(p).filter((function(t){return t&&"undefined"!==t})),g=f.length,m=[],y=[];function b(){return!!y.length&&(m.push(y.join("")),y=[],!0)}for(var k,C=function(e){var n=f[e].trim(),i=e,s=D(h,(function(t){return t.open===n})),c=D(h,(function(t){return t.close===n}));if(s){if(-1!==(i=w(s,f,e,g,h))&&l)return b()&&o?(k=e,"break"):(m.push(f.slice(e,i+1).join("")),e=i,o?(k=e,"break"):(k=e,"continue"))}else{if(c&&!S(c,f,e)){var u=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(h);return u.splice(h.indexOf(c),1),{value:x(t,{separator:r,isSeparateFirst:o,isSeparateOnlyOpenClose:a,isSeparateOpenClose:l,openCloseCharacters:u})}}if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(n,r)&&!a)return b(),o?(k=e,"break"):(k=e,"continue")}-1===i&&(i=g-1),y.push(f.slice(e,i+1).join("")),k=e=i},M=0;M<g;++M){var T=C(M);if(M=k,"object"==typeof T)return T.value;if("break"===T)break}return y.length&&m.push(y.join("")),m}function k(t){return x(t,"")}function C(t){return x(t,",")}function M(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function T(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],i=e[2];return{prefix:n,unit:e[3],value:parseFloat(i)}}function E(t){return t.replace(/[\s-_]+([^\s-_])/g,(function(t,e){return e.toUpperCase()}))}function A(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,n,i){return""+n+e+i.toLowerCase()}))}function _(){return Date.now?Date.now():(new Date).getTime()}function P(t,e,n){void 0===n&&(n=-1);for(var i=t.length,r=0;r<i;++r)if(e(t[r],r,t))return r;return n}function D(t,e,n){var i=P(t,e);return i>-1?t[i]:n}var O=function(){var t=_(),e=l&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var n=_();return setTimeout((function(){e(n-t)}),1e3/60)}}(),L=function(){var t=l&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function I(t){return Object.keys(t)}function R(t){return I(t).map((function(e){return t[e]}))}function V(t,e){var n=T(t),i=n.value,r=n.unit;if(g(e)){var o=e[r];if(o){if(b(o))return o(i);if(d[r])return d[r](i,o)}}else if("%"===r)return i*e/100;return d[r]?d[r](i):i}function N(t,e,n){return Math.max(e,Math.min(t,n))}function F(t,e,n,i){return void 0===i&&(i=t[0]/t[1]),[[H(e[0],h),H(e[0]/i,h)],[H(e[1]*i,h),H(e[1],h)]].filter((function(t){return t.every((function(t,i){var r=e[i],o=H(r,h);return n?t<=r||t<=o:t>=r||t>=o}))}))[0]||t}function B(t,e,n,i){if(!i)return t.map((function(t,i){return N(t,e[i],n[i])}));var r=t[0],o=t[1],a=!0===i?r/o:i,s=F(t,e,!1,a),l=s[0],c=s[1],u=F(t,n,!0,a),h=u[0],d=u[1];return r<l||o<c?(r=l,o=c):(r>h||o>d)&&(r=h,o=d),[r,o]}function z(t){for(var e=0,n=t.length-1;n>=0;--n)e+=t[n];return e}function j(t){for(var e=t.length,n=0,i=e-1;i>=0;--i)n+=t[i];return e?n/e:0}function U(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=Math.atan2(i,n);return r>=0?r:r+2*Math.PI}function G(t){var e=function(t){return[0,1].map((function(e){return j(t.map((function(t){return t[e]})))}))}(t),n=U(e,t[0]),i=U(e,t[1]);return n<i&&i-n<Math.PI||n>i&&i-n<-Math.PI?1:-1}function $(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function H(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function q(t,e){return t.forEach((function(n,i){t[i]=H(t[i],e)})),t}function W(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function Z(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function Y(t,e){-1===t.indexOf(e)&&t.push(e)}function K(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function X(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function J(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Q(t,e,n,i){t.addEventListener(e,n,i)}function tt(t,e,n,i){t.removeEventListener(e,n,i)}function et(t){return(null==t?void 0:t.ownerDocument)||c}function nt(t){return et(t).documentElement}function it(t){return et(t).body}function rt(t){var e;return(null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView)||window}function ot(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function at(t){return g(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}},24111:(t,e,n)=>{"use strict";function i(t,e){for(var n=t.length,i=0;i<n;++i)if(e(t[i],i))return!0;return!1}function r(t,e){for(var n=t.length,i=0;i<n;++i)if(e(t[i],i))return t[i];return null}function o(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function a(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function s(t){return t.replace(/_/g,".")}function l(t,e){var n=null,r="-1";return i(t,(function(t){var i=a("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!i||t.brand||(n=t,r=i[3]||"-1",t.versionAlias?r=t.versionAlias:t.versionTest&&(r=function(t,e){var n=a("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}(t.versionTest.toLowerCase(),e)||r),r=s(r),0))})),{preset:n,version:r}}function c(t,e){var n={brand:"",version:"-1"};return i(t,(function(t){var i=u(e,t);return!!i&&(n.brand=t.id,n.version=t.versionAlias||i.version,"-1"!==n.version)})),n}function u(t,e){return r(t,(function(t){var n=t.brand;return a(""+e.test,n.toLowerCase())}))}n.d(e,{Ay:()=>v});var h=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],d=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],p=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],f=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],g=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function m(t){return!!l(f,t).preset}const v=function(t){return void 0===t&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}()?function(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),a=t&&t.fullVersionList,l=e.mobile||!1,v=n[0],y=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),b={name:v.brand,version:v.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!c(f,n).brand||m(o())},w={name:"unknown",version:"-1",majorVersion:-1};b.webkit=!b.chromium&&i(p,(function(t){return u(n,t)}));var S=c(d,n);if(b.chromium=!!S.brand,b.chromiumVersion=S.version||"-1",!b.chromium){var x=c(p,n);b.webkit=!!x.brand,b.webkitVersion=x.version||"-1"}var k=r(g,(function(t){return new RegExp(""+t.test,"g").exec(y)}));if(w.name=k?k.id:"",t&&(w.version=t.platformVersion||"-1"),a&&a.length){var C=c(h,a);b.name=C.brand||b.name,b.version=C.version||b.version}else{var M=c(h,n);b.name=M.brand||b.name,b.version=M.brand&&t?t.uaFullVersion:M.version}return b.webkit&&(w.name=l?"ios":"mac"),"ios"===w.name&&b.webview&&(b.version="-1"),w.version=s(w.version),b.version=s(b.version),w.majorVersion=parseInt(w.version,10),b.majorVersion=parseInt(b.version,10),{browser:b,os:w,isMobile:l,isHints:!0}}():function(t){var e=o(t),n=!!/mobi/g.exec(e),i={name:"unknown",version:"-1",majorVersion:-1,webview:m(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},r={name:"unknown",version:"-1",majorVersion:-1},a=l(h,e),s=a.preset,c=a.version,u=l(g,e),f=u.preset,v=u.version,y=l(d,e);if(i.chromium=!!y.preset,i.chromiumVersion=y.version,!i.chromium){var b=l(p,e);i.webkit=!!b.preset,i.webkitVersion=b.version}return f&&(r.name=f.id,r.version=v,r.majorVersion=parseInt(v,10)),s&&(i.name=s.id,i.version=c,i.webview&&"ios"===r.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:r,isMobile:n,isHints:!1}}(t)}},41273:(t,e,n)=>{"use strict";n.d(e,{A:()=>l,U:()=>s});var i,r=n(79715),o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},a="function"==typeof Map?void 0:(i=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++i)});function s(t,e){return(0,r.U)(t,e,a)}const l=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,a)||this}return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(r.A)},79715:(t,e,n)=>{"use strict";n.d(e,{A:()=>c,U:()=>l});var i=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,i=this.values,r=n.indexOf(t),o=-1===r?n.length:r;n[o]=t,i[o]=e},t}(),r=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),o="function"==typeof Map,a=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}(),s=function(){function t(t,e,n,i,r,o,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=i,this.changed=r,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],i=[];return t.forEach((function(t){var e=t[0],r=t[1],o=new a;n[e]=o,i[r]=o})),n.forEach((function(t,e){t.connect(n[e-1])})),t.filter((function(t,n){return!e[n]})).map((function(t,e){var r=t[0],o=t[1];if(r===o)return[0,0];var a=n[r],s=i[o-1],l=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,n[0]),[l,a.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter((function(t,i){var r=t[0],o=t[1],a=e[i],s=a[0],l=a[1];if(r!==o)return n.push([s,l]),!0})),this.cachePureChanged=n},t}();function l(t,e,n){var a=o?Map:n?r:i,l=n||function(t){return t},c=[],u=[],h=[],d=t.map(l),p=e.map(l),f=new a,g=new a,m=[],v=[],y={},b=[],w=0,S=0;return d.forEach((function(t,e){f.set(t,e)})),p.forEach((function(t,e){g.set(t,e)})),d.forEach((function(t,e){var n=g.get(t);void 0===n?(++S,u.push(e)):y[n]=S})),p.forEach((function(t,e){var n=f.get(t);void 0===n?(c.push(e),++w):(h.push([n,e]),S=y[e]||0,m.push([n-S,e-w]),v.push(e===n),n!==e&&b.push([n,e]))})),u.reverse(),new s(t,e,c,u,b,h,m,v)}const c=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=l(this.list,e,this.findKeyCallback);return this.list=e,n},t}()},24072:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i,r=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return!(i=n)||"object"!=typeof i&&"function"!=typeof i?h(this):i}}function p(t,e,n){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}},p(t,e,n||t)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function y(t,e,n){return"*"===t||(t.length>0?-1!==t.indexOf(e):!n)}function b(t,e,n){var i,r=t=t||{},o=e=e||{};if(n)for(i=0;i<n.length;i++)r[n[i]]=o[n[i]];else for(i in o)r[i]=o[i];return t}function w(t){return"[object Number]"===Object.prototype.toString.call(t)}function S(t){return"string"==typeof t}function x(t){return"boolean"==typeof t}function k(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function C(t){return"[object Function]"===Object.prototype.toString.call(t)}function M(t){if(S(t))return""+t;if(x(t))return!!t;if(o=t,"[object Date]"===Object.prototype.toString.call(o))return new Date(t.getTime());if(C(t))return t;if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(M(t[n]));return e}if(k(t)){var i={};for(var r in t)i[r]=M(t[r]);return i}return t;var o}function T(t,e,n,i){var r,o,a={},s={};for(n=n||[],i=i||[],o=0;o<n.length;o++)a[n[o]]=!0;for(o=0;o<i.length;o++)s[i[o]]=!0;var l=M(t);for(o in e)if(null==l[o]||s[o])l[o]=e[o];else if(a[o])(r=[]).push.apply(r,Array.isArray(l[o])?l[o]:[l[o]]),r.push(e[o]),l[o]=r;else if(S(e[o])||x(e[o])||C(e[o])||w(e[o]))l[o]=e[o];else if(Array.isArray(e[o]))r=[],Array.isArray(l[o])&&r.push.apply(r,l[o]),r.push.apply(r,e[o]),l[o]=r;else if(k(e[o]))for(var c in k(l[o])||(l[o]={}),e[o])l[o][c]=e[o][c];return l}function E(t,e,n){for(var i=0;i<n.length;i++){var r=n[i][0][n[i][1]].apply(n[i][0],n[i][2]);if(r===e)return r}return t}function A(t,e){if(!t)return null;for(var n=0;n<t.length;n++)e(t[n])}function _(t,e){if(t)for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function P(t,e){var n=_(t,e);return-1===n?null:t[n]}function D(t,e){var n=null;return t.forEach((function(t){e(t)&&(n=t)})),n}function O(t,e){var n=_(t,e);return n>-1&&t.splice(n,1),-1!==n}function L(t){if(null!=Array.fromArray)return Array.from(t);var e=[];return Array.prototype.push.apply(e,t),e}function I(t,e){var n=t.indexOf(e);return n>-1&&t.splice(n,1),-1!==n}function R(t,e,n,i){var r=t[e];return null==r&&(r=[],t[e]=r),r[i?"unshift":"push"](n),r}function V(t,e,n){return-1===t.indexOf(e)&&(n?t.unshift(e):t.push(e),!0)}n.d(e,{NlZ:()=>Po,QHG:()=>ee,RSQ:()=>zr,SYk:()=>Oo,UIf:()=>ba});for(var N=[],F=0;F<256;F++)N[F]=(F<16?"0":"")+F.toString(16);function B(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return N[255&t]+N[t>>8&255]+N[t>>16&255]+N[t>>24&255]+"-"+N[255&e]+N[e>>8&255]+"-"+N[e>>16&15|64]+N[e>>24&255]+"-"+N[63&n|128]+N[n>>8&255]+"-"+N[n>>16&255]+N[n>>24&255]+N[255&i]+N[i>>8&255]+N[i>>16&255]+N[i>>24&255]}function z(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.cos(n/360*Math.PI*2),a=Math.sin(n/360*Math.PI*2);return{x:i*o-r*a+e.x,y:r*o+i*a+e.y,cr:o,sr:a}}function j(t){if(null==t)return null;for(var e=t.replace(/^\s\s*/,""),n=/\s/,i=e.length;n.test(e.charAt(--i)););return e.slice(0,i+1)}function U(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i]));return n}var G;function $(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("undefined"!=typeof console)try{var i=arguments[arguments.length-1];console.log(i)}catch(t){}}function H(t){return t<0?-1:t>0?1:0}function q(t,e,n){return function(){var i=null;try{null!=e&&(i=e.apply(this,arguments))}catch(t){$("jsPlumb function failed : "+t)}if(null!=t&&(null==n||i!==n))try{i=t.apply(this,arguments)}catch(t){$("wrapped function failed : "+t)}return i}}function W(t,e,n){return t.has(e)||t.set(e,n()),t.get(e)}function Z(t,e){for(var n=t.__proto__;null!=n;){if(n instanceof e)return!0;n=n.__proto__}return!1}function Y(t,e,n){for(var i=(n=n||t.parentNode).querySelectorAll(e),r=0;r<i.length;r++)if(i[r]===t)return!0;return!1}function K(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()}function X(t,e,n,i){if(i&&Y(t,e,n))return t;for(t=t.parentNode;null!=t&&t!==n;){if(Y(t,e))return t;t=t.parentNode}}function J(t){return t.srcElement||t.target}function Q(t){return null!=t.className?void 0===t.className.baseVal?t.className:t.className.baseVal:""}function tt(t,e,n){var i=null==e?[]:Array.isArray(e)?e:e.split(/\s+/),r=null==n?[]:Array.isArray(n)?n:n.split(/\s+/),o=Q(t).split(/\s+/),a=function(t,e){for(var n=0;n<e.length;n++)if(t)-1===o.indexOf(e[n])&&o.push(e[n]);else{var i=o.indexOf(e[n]);-1!==i&&o.splice(i,1)}};a(!0,i),a(!1,r),function(t,e,n){e=j(e),void 0!==t.className.baseVal?t.className.baseVal=e:t.className=e;try{var i=t.classList;if(null!=i){for(;i.length>0;)i.remove(i.item(0));for(var r=0;r<n.length;r++)n[r]&&i.add(n[r])}}catch(t){$("WARN: cannot set class list",t)}}(t,o.join(" "),o)}function et(t){return!S(t)&&!Array.isArray(t)&&null!=t.length&&null==t.documentElement&&null==t.nodeType}function nt(t,e){var n=function(t,e){null!=t&&null!=e&&e.length>0&&(t.classList?A(j(e).split(/\s+/),(function(e){t.classList.add(e)})):tt(t,e))};et(t)?A(t,(function(t){return n(t,e)})):n(t,e)}function it(t,e){var n=function(t,e){null!=t&&null!=e&&e.length>0&&(t.classList?j(e).split(/\s+/).forEach((function(e){t.classList.remove(e)})):tt(t,null,e))};et(t)?A(t,(function(t){return n(t,e)})):n(t,e)}function rt(t,e,n,i){return ot(null,t,e,n,i)}function ot(t,e,n,i,r){var o,a=null==t?document.createElement(e):document.createElementNS(t,e);for(o in n=n||{})a.style[o]=n[o];for(o in i&&(a.className=i),r=r||{})a.setAttribute(o,""+r[o]);return a}function at(t){var e=t.getBoundingClientRect(),n=document.body,i=document.documentElement,r=window.pageYOffset||i.scrollTop||n.scrollTop,o=window.pageXOffset||i.scrollLeft||n.scrollLeft,a=i.clientTop||n.clientTop||0,s=i.clientLeft||n.clientLeft||0,l=e.top+r-a,c=e.left+o-s;return{x:Math.round(c),y:Math.round(l)}}function st(t,e){var n=e.getContainer().getBoundingClientRect(),i=t.getBoundingClientRect(),r=e.currentZoom;return{x:(i.left-n.left)/r,y:(i.top-n.top)/r}}function lt(t,e){var n=t.getBoundingClientRect(),i=e.currentZoom;return{w:n.width/i,h:n.height/i}}function ct(t){return t instanceof SVGElement?G.SVG:G.HTML}function ut(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map((function(t){return"."+t})).join(",")}function ht(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map((function(t){return"["+t+"]"})).join(",")}!function(t){t.SVG="SVG",t.HTML="HTML"}(G||(G={}));var dt="source",pt="target",ft="block",gt="none",mt="absolute",vt="fixed",yt="data-jtk-group",bt="data-jtk-managed",wt="data-jtk-not-draggable",St="tabindex",xt="data-jtk-scope-",kt="checkCondition",Ct="jtk-connector",Mt="jtk-endpoint",Tt="jtk-floating-endpoint",Et="jtk-group-collapsed",At="jtk-group-expanded",_t="jtk-overlay",Pt="connection",Dt="internal.connection",Ot="connection:move",Lt="internal.endpoint:unregistered",It="internal.connection:detached",Rt="element:manage",Vt="maxConnections",Nt="element:unmanage",Ft="zoom",Bt="isDetachAllowed",zt="beforeDrop",jt="beforeDetach",Ut=ht(bt),Gt={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},$t="stroke-dasharray",Ht="dashstyle",qt="path",Wt="http://www.w3.org/2000/svg";function Zt(t,e){for(var n in e)t.setAttribute(n,""+e[n])}function Yt(t,e){return(e=e||{}).version="1.1",e.xmlns=Wt,ot(Wt,t,null,null,e)}function Kt(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"}function Xt(t,e,n){if(e.setAttribute("fill",n.fill?n.fill:gt),e.setAttribute("stroke",n.stroke?n.stroke:gt),n.strokeWidth&&e.setAttribute("stroke-width",n.strokeWidth),n[Ht]&&n.strokeWidth&&!n[$t]){var i=-1===n[Ht].indexOf(",")?" ":",",r=n[Ht].split(i),o="";A(r,(function(t){o+=Math.floor(t*n.strokeWidth)+i})),e.setAttribute($t,o)}else n[$t]&&e.setAttribute($t,n[$t]);for(var a in Gt)n[a]&&e.setAttribute(Gt[a],n[a])}function Jt(t,e,n){t.childNodes.length>n?t.insertBefore(e,t.childNodes[n]):t.appendChild(e)}function Qt(t,e,n){var i=[t,e];return n&&i.push(n),i.join(":")}var te,ee,ne="data-jtk-container",ie="data-jtk-enabled",re="data-jtk-scope",oe="endpoint",ae="element",se="connection",le="click",ce="contextmenu",ue="dblclick",he="dbltap",de="mousedown",pe="mouseenter",fe="mouseexit",ge="mousemove",me="mouseup",ve="mouseout",ye="mouseover",be="tap",we="revert",Se="connection:drag",xe=Qt(ae,le),ke=Qt(ae,ue),Ce=Qt(ae,he),Me=Qt(ae,ve),Te=Qt(ae,ye),Ee=Qt(ae,ge),Ae=Qt(ae,me),_e=Qt(ae,de),Pe=Qt(ae,ce),De=Qt(ae,be),Oe=Qt(oe,le),Le=Qt(oe,ue),Ie=(Qt(oe,he),Qt(oe,ve)),Re=Qt(oe,ye),Ve=Qt(oe,me),Ne=Qt(oe,de),Fe=(Qt(oe,be),Qt(se,le)),Be=Qt(se,ue),ze=Qt(se,he),je=Qt(se,ve),Ue=Qt(se,ye),Ge=Qt(se,me),$e=Qt(se,de),He=Qt(se,ce),qe=Qt(se,be),We="position",Ze=ut(Ct),Ye=ut(Mt),Ke=ht(yt),Xe=ht("data-jtk-group-content"),Je=ut(_t);!function(t){t.Circle="Circle",t.Ellipse="Ellipse",t.Triangle="Triangle",t.Diamond="Diamond",t.Rectangle="Rectangle",t.Square="Square"}(te||(te={})),function(t){t.Assign="Assign",t.AutoDefault="AutoDefault",t.Bottom="Bottom",t.BottomLeft="BottomLeft",t.BottomRight="BottomRight",t.Center="Center",t.Continuous="Continuous",t.ContinuousBottom="ContinuousBottom",t.ContinuousLeft="ContinuousLeft",t.ContinuousRight="ContinuousRight",t.ContinuousTop="ContinuousTop",t.ContinuousLeftRight="ContinuousLeftRight",t.ContinuousTopBottom="ContinuousTopBottom",t.Left="Left",t.Perimeter="Perimeter",t.Right="Right",t.Top="Top",t.TopLeft="TopLeft",t.TopRight="TopRight"}(ee||(ee={}));var Qe,tn,en=function(){function t(e){r(this,t),this.params=e,s(this,"x1",void 0),s(this,"x2",void 0),s(this,"y1",void 0),s(this,"y2",void 0),s(this,"extents",{xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}),s(this,"type",void 0),this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2}return a(t,[{key:"findClosestPointOnPath",value:function(t,e){return{d:1/0,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null}}},{key:"lineIntersection",value:function(t,e,n,i){return[]}},{key:"boxIntersection",value:function(t,e,n,i){var r=[];return r.push.apply(r,this.lineIntersection(t,e,t+n,e)),r.push.apply(r,this.lineIntersection(t+n,e,t+n,e+i)),r.push.apply(r,this.lineIntersection(t+n,e+i,t,e+i)),r.push.apply(r,this.lineIntersection(t,e+i,t,e)),r}},{key:"boundingBoxIntersection",value:function(t){return this.boxIntersection(t.x,t.y,t.w,t.h)}}]),t}(),nn="undefined",rn="default",on="true",an="false",sn="*";function ln(t,e,n){for(var i=(n=n||t.parentNode).querySelectorAll(e),r=0;r<i.length;r++)if(i[r]===t)return!0;return!1}function cn(t){return t.srcElement||t.target}function un(t,e,n,i){if(i){var r=t.composedPath?t.composedPath():t.path;if(void 0!==r&&r.indexOf)return{path:r,end:r.indexOf(n)};var o={path:[],end:-1};return function t(e){o.path.push(e),e===n?o.end=o.path.length-1:null!=e.parentNode&&t(e.parentNode)}(e),o}return{path:[e],end:1}}var hn=1;function dn(){return"ontouchstart"in document.documentElement||null!=navigator.maxTouchPoints&&navigator.maxTouchPoints>0}function pn(){return"onmousedown"in document.documentElement}var fn=(s(Qe={},de,"touchstart"),s(Qe,me,"touchend"),s(Qe,ge,"touchmove"),Qe);function gn(t,e){if(null==t)return{x:0,y:0};var n=function(t,e){return t.item?t.item(e):t[e]}(vn(t),0);return{x:n[e+"X"],y:n[e+"Y"]}}function mn(t){return gn(t,"page")}function vn(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]}function yn(t,e,n,i,r){if(Sn(t,e,n),i.__tauid=n.__tauid,t.addEventListener)t.addEventListener(e,n,!1,r);else if(t.attachEvent){var o=e+n.__tauid;t["e"+o]=n,t[o]=function(){t["e"+o]&&t["e"+o](window.event)},t.attachEvent("on"+e,t[o])}}function bn(t,e,n){var i=this;null!=n&&wn(t,(function(r){if(function(t,e,n){if(t.__ta&&t.__ta[e]&&delete t.__ta[e][n.__tauid],n.__taExtra){for(var i=0;i<n.__taExtra.length;i++)bn(t,n.__taExtra[i][0],n.__taExtra[i][1]);n.__taExtra.length=0}n.__taUnstore&&n.__taUnstore()}(r,e,n),null!=n.__tauid)if(r.removeEventListener)r.removeEventListener(e,n,!1),dn()&&fn[e]&&r.removeEventListener(fn[e],n,!1);else if(i.detachEvent){var o=e+n.__tauid;r[o]&&r.detachEvent("on"+e,r[o]),r[o]=null,r["e"+o]=null}n.__taTouchProxy&&bn(t,n.__taTouchProxy[1],n.__taTouchProxy[0])}))}function wn(t,e){if(null!=t)for(var n="string"==typeof t?document.querySelectorAll(t):null!=t.length?t:[t],i=0;i<n.length;i++)e(n[i])}function Sn(t,e,n){var i=hn++;return t.__ta=t.__ta||{},t.__ta[e]=t.__ta[e]||{},t.__ta[e][i]=n,n.__tauid=i,i}var xn=/:not\(([^)]+)\)/;function kn(t,e,n,i){if(null==t)return n;var r=t.split(","),o=[],a=[];A(r,(function(t){var e=t.match(xn);null!=e?a.push(e[1]):o.push(t)})),a.length>0&&0===o.length&&o.push(sn);var s=function i(r){i.__tauid=n.__tauid;var s=cn(r),l=!1,c=s,u=un(r,s,e,null!=t);if(-1!=u.end)for(var h=0;!l&&h<u.end;h++){c=u.path[h];for(var d=0;d<a.length;d++)if(ln(c,a[d],e))return;for(var p=0;!l&&p<o.length;p++)if(ln(c,o[p],e)){n.apply(c,[r,c]),l=!0;break}}};return function(t,e,n){t.__taExtra=t.__taExtra||[],t.__taExtra.push([e,n])}(n,i,s),s}var Cn=function(t,e,n,i,r){if(dn()&&fn[e]){var o=kn(i,t,n,fn[e]);yn(t,fn[e],o,n,r)}"focus"===e&&null==t.getAttribute(St)&&t.setAttribute(St,"1"),yn(t,e,kn(i,t,n,e),n,r)},Mn=(s(tn={},be,{touches:1,taps:1}),s(tn,he,{touches:1,taps:2}),s(tn,ce,{touches:2,taps:1}),tn);function Tn(t,e,n,i){for(var r in n.__tamee[t])n.__tamee[t].hasOwnProperty(r)&&n.__tamee[t][r].apply(i,[e])}var En=function(){function t(){r(this,t)}return a(t,null,[{key:"generate",value:function(t,e){return function(n,i,r,o){if(i==ce&&pn())Cn(n,i,r,o);else{if(null==n.__taTapHandler){var a=n.__taTapHandler={tap:[],dbltap:[],down:!1,taps:0,downSelectors:[]},s=function(i){for(var r=cn(i),s=un(i,r,n,null!=o),l=!1,h=0;h<s.end;h++){if(l)return;r=s.path[h];for(var d=0;d<a.downSelectors.length;d++)if(null==a.downSelectors[d]||ln(r,a.downSelectors[d],n)){a.down=!0,setTimeout(c,t),setTimeout(u,e),l=!0;break}}},l=function(t){if(a.down){var e,i,r=cn(t);a.taps++;var o=function(t){return vn(t).length}(t);for(var s in Mn)if(Mn.hasOwnProperty(s)){var l=Mn[s];if(l.touches===o&&(1===l.taps||l.taps===a.taps))for(var c=0;c<a[s].length;c++){i=un(t,r,n,null!=a[s][c][1]);for(var u=0;u<i.end;u++)if(e=i.path[u],null==a[s][c][1]||ln(e,a[s][c][1],n)){a[s][c][0].apply(e,[t,e]);break}}}}},c=function(){a.down=!1},u=function(){a.taps=0};n.__taTapHandler.downHandler=s,n.__taTapHandler.upHandler=l,Cn(n,de,s),Cn(n,me,l)}n.__taTapHandler.downSelectors.push(o),n.__taTapHandler[i].push([r,o]),r.__taUnstore=function(){null!=n.__taTapHandler&&(O(n.__taTapHandler.downSelectors,(function(t){return t===o})),function(t,e){var n,i=0;for(i=0,n=t.length;i<n&&t[i][0]!==e;i++);i<t.length&&t.splice(i,1)}(n.__taTapHandler[i],r),0===n.__taTapHandler.downSelectors.length&&(bn(n,de,n.__taTapHandler.downHandler),bn(n,me,n.__taTapHandler.upHandler),delete n.__taTapHandler))}}}}}]),t}(),An=function(){function t(){r(this,t)}return a(t,null,[{key:"generate",value:function(){var t=[];return function(e,n,i,r){if(!e.__tamee){e.__tamee={over:!1,mouseenter:[],mouseexit:[]};var o=function(n){var i=cn(n);(null==r&&i==e&&!e.__tamee.over||ln(i,r,e)&&(null==i.__tamee||!i.__tamee.over))&&(Tn(pe,n,e,i),i.__tamee=i.__tamee||{},i.__tamee.over=!0,t.push(i))},a=function(n){for(var i=cn(n),r=0;r<t.length;r++)i!=t[r]||ln(n.relatedTarget||n.toElement,"*",i)||(i.__tamee.over=!1,t.splice(r,1),Tn(fe,n,e,i))};yn(e,ye,kn(r,e,o,ye),o),yn(e,ve,kn(r,e,a,ve),a)}i.__taUnstore=function(){delete e.__tamee[n][i.__tauid]},Sn(e,n,i),e.__tamee[n][i.__tauid]=i}}}]),t}(),_n=function(){function t(e){r(this,t),s(this,"clickThreshold",void 0),s(this,"dblClickThreshold",void 0),s(this,"tapHandler",void 0),s(this,"mouseEnterExitHandler",void 0),e=e||{},this.clickThreshold=e.clickThreshold||250,this.dblClickThreshold=e.dblClickThreshold||450,this.mouseEnterExitHandler=An.generate(),this.tapHandler=En.generate(this.clickThreshold,this.dblClickThreshold)}return a(t,[{key:"_doBind",value:function(t,e,n,i,r){if(null!=n){var o=t;e===be||e===he||e===ce?this.tapHandler(o,e,n,i,r):e===pe||e==fe?this.mouseEnterExitHandler(o,e,n,i,r):Cn(o,e,n,i,r)}}},{key:"on",value:function(t,e,n,i,r){var o=null==i?null:n,a=null==i?n:i;return this._doBind(t,e,a,o,r),this}},{key:"off",value:function(t,e,n){return bn(t,e,n),this}},{key:"trigger",value:function(t,e,n,i,r){var o=pn()&&("undefined"==typeof MouseEvent||null==n||n.constructor===MouseEvent),a=dn()&&!pn()&&fn[e]?fn[e]:e,s=!(dn()&&!pn()&&fn[e]),l=mn(n),c=gn(n,"screen"),u=gn(n,"client");return wn(t,(function(t){var h;n=n||{screenX:c.x,screenY:c.y,clientX:u.x,clientY:u.y};var d={TouchEvent:function(e){var n,i,r,o,s,h,d,p=(n=t,i=l.x,r=l.y,o=c.x,s=c.y,h=u.x,d=u.y,function(){var t=[];return t.push.apply(t,arguments),t.item=function(t){return this[t]},t}(function(t,e,n,i,r,o,a){return new Touch({target:t,identifier:B(),pageX:e,pageY:n,screenX:i,screenY:r,clientX:o||i,clientY:a||r})}(n,i,r,o,s,h,d)));(e.initTouchEvent||e.initEvent)(a,!0,!0,window,null,c.x,c.y,u.x,u.y,!1,!1,!1,!1,p,p,p,1,0)},MouseEvents:function(e){e.initMouseEvent(a,!0,!0,window,null==r?1:r,c.x,c.y,u.x,u.y,!1,!1,!1,!1,1,t)}},p=!s&&!o&&dn()&&fn[e]?"TouchEvent":"MouseEvents";h=document.createEvent(p),d[p](h),i&&(h.payload=i),t.dispatchEvent(h)})),this}}]),t}(),Pn=[null,[1,-1],[1,1],[-1,1],[-1,-1]],Dn=[null,[-1,-1],[-1,1],[1,1],[1,-1]],On=2*Math.PI;function Ln(t,e){return e.x===t.x?e.y>t.y?1/0:-1/0:e.y===t.y?e.x>t.x?0:-0:(e.y-t.y)/(e.x-t.x)}function In(t,e){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Rn(t,e){return e.x>t.x||e.x==t.x?e.y>t.y?2:1:e.y>t.y?3:4}function Vn(t,e){var n=t.x,i=t.x+t.w,r=t.y,o=t.y+t.h,a=e.x,s=e.x+e.w,l=e.y,c=e.y+e.h;return n<=a&&a<=i&&r<=l&&l<=o||n<=s&&s<=i&&r<=l&&l<=o||n<=a&&a<=i&&r<=c&&c<=o||n<=s&&a<=i&&r<=c&&c<=o||a<=n&&n<=s&&l<=r&&r<=c||a<=i&&i<=s&&l<=r&&r<=c||a<=n&&n<=s&&l<=o&&o<=c||a<=i&&n<=s&&l<=o&&o<=c}function Nn(t,e,n){var i=Ln(t,e),r=Rn(t,e),o=n>0?Pn[r]:Dn[r],a=Math.atan(i),s=Math.abs(n*Math.sin(a))*o[1],l=Math.abs(n*Math.cos(a))*o[0];return{x:t.x+l,y:t.y+s}}function Fn(t,e,n){if(Y(e,n,t))return e;for(var i=e.parentNode;null!=i&&i!==t;){if(Y(i,n,t))return i;i=i.parentNode}}function Bn(t,e,n){var i=e.parentNode,r=t.getSize(i),o=t.getSize(e),a=n.x,s=a+o.w,l=n.y,c=l+o.h;return s>0&&a<r.w&&c>0&&l<r.h}var zn,jn="start",Un="beforeStart",Gn="drag",$n="stop",Hn=function(){return!0},qn=function(){return!1},Wn="katavorio-drag-no-select";!function(t){t.absolutePosition="absolutePosition",t.transform="transform",t.xyAttributes="xyAttributes"}(zn||(zn={}));var Zn=new Map;Zn.set(zn.absolutePosition,(function(t,e){t.style.left="".concat(e.x,"px"),t.style.top="".concat(e.y,"px")})),Zn.set(zn.xyAttributes,(function(t,e){t.setAttribute("x","".concat(e.x)),t.setAttribute("y","".concat(e.y))}));var Yn=new Map;Yn.set(zn.absolutePosition,(function(t){return{x:t.offsetLeft,y:t.offsetTop}})),Yn.set(zn.xyAttributes,(function(t){return{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y"))}}));var Kn=new Map;Kn.set(zn.absolutePosition,(function(t,e){t.style.width="".concat(e.w,"px"),t.style.height="".concat(e.h,"px")})),Kn.set(zn.xyAttributes,(function(t,e){t.setAttribute("width","".concat(e.w)),t.setAttribute("height","".concat(e.h))}));var Xn=new Map;Xn.set(zn.absolutePosition,(function(t){return{w:t.offsetWidth,h:t.offsetHeight}})),Xn.set(zn.xyAttributes,(function(t){return{w:parseFloat(t.getAttribute("width")),h:parseFloat(t.getAttribute("height"))}}));var Jn,Qn=[$n,jn,Gn,"drop","over","out",Un],ti=function(){},ei=function(t,e){if(null!=t){t=S(t)||null!=t.tagName||null==t.length?[t]:t;for(var n=0;n<t.length;n++)e.apply(t[n],[t[n]])}},ni=function(){function t(e,n){r(this,t),this.el=e,this.manager=n,s(this,"_class",void 0),s(this,"uuid",B()),s(this,"enabled",!0),s(this,"scopes",[]),s(this,"eventManager",void 0),this.eventManager=n.eventManager}return a(t,[{key:"setEnabled",value:function(t){this.enabled=t}},{key:"isEnabled",value:function(){return this.enabled}},{key:"toggleEnabled",value:function(){this.enabled=!this.enabled}},{key:"addScope",value:function(t){var e={};for(var n in ei(this.scopes,(function(t){e[t]=!0})),ei(t?t.split(/\s+/):[],(function(t){e[t]=!0})),this.scopes.length=0,e)this.scopes.push(n)}},{key:"removeScope",value:function(t){var e={};for(var n in ei(this.scopes,(function(t){e[t]=!0})),ei(t?t.split(/\s+/):[],(function(t){delete e[t]})),this.scopes.length=0,e)this.scopes.push(n)}},{key:"toggleScope",value:function(t){var e={};for(var n in ei(this.scopes,(function(t){e[t]=!0})),ei(t?t.split(/\s+/):[],(function(t){e[t]?delete e[t]:e[t]=!0})),this.scopes.length=0,e)this.scopes.push(n)}}]),t}();!function(t){t.notNegative="notNegative",t.parent="parent",t.parentEnclosed="parentEnclosed"}(Jn||(Jn={}));var ii,ri,oi,ai,si=function(t){l(n,t);var e=d(n);function n(t,i,o){var a;if(r(this,n),s(h(a=e.call(this,t,o)),"_class",void 0),s(h(a),"rightButtonCanDrag",void 0),s(h(a),"consumeStartEvent",void 0),s(h(a),"clone",void 0),s(h(a),"scroll",void 0),s(h(a),"trackScroll",void 0),s(h(a),"_downAt",void 0),s(h(a),"_posAtDown",void 0),s(h(a),"_pagePosAtDown",void 0),s(h(a),"_pageDelta",{x:0,y:0}),s(h(a),"_moving",void 0),s(h(a),"_lastPosition",void 0),s(h(a),"_lastScrollValues",{x:0,y:0}),s(h(a),"_initialScroll",{x:0,y:0}),s(h(a),"_size",void 0),s(h(a),"_currentParentPosition",void 0),s(h(a),"_ghostParentPosition",void 0),s(h(a),"_dragEl",void 0),s(h(a),"_multipleDrop",void 0),s(h(a),"_ghostProxyOffsets",void 0),s(h(a),"_ghostDx",void 0),s(h(a),"_ghostDy",void 0),s(h(a),"_isConstrained",!1),s(h(a),"_ghostProxyParent",void 0),s(h(a),"_useGhostProxy",void 0),s(h(a),"_ghostProxyFunction",void 0),s(h(a),"_activeSelectorParams",void 0),s(h(a),"_availableSelectors",[]),s(h(a),"_canDrag",void 0),s(h(a),"_consumeFilteredEvents",void 0),s(h(a),"_parent",void 0),s(h(a),"_ignoreZoom",void 0),s(h(a),"_filters",{}),s(h(a),"_constrainRect",void 0),s(h(a),"_elementToDrag",void 0),s(h(a),"downListener",void 0),s(h(a),"moveListener",void 0),s(h(a),"upListener",void 0),s(h(a),"scrollTracker",void 0),s(h(a),"listeners",{start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]}),a._class=a.manager.css.draggable,nt(a.el,a._class),a.downListener=a._downListener.bind(h(a)),a.upListener=a._upListener.bind(h(a)),a.moveListener=a._moveListener.bind(h(a)),a.rightButtonCanDrag=!0===i.rightButtonCanDrag,a.consumeStartEvent=!1!==i.consumeStartEvent,a._dragEl=a.el,a.clone=!0===i.clone,a.scroll=!0===i.scroll,a.trackScroll=!1!==i.trackScroll,a._multipleDrop=!1!==i.multipleDrop,a._canDrag=i.canDrag||Hn,a._consumeFilteredEvents=i.consumeFilteredEvents,a._parent=i.parent,a._ignoreZoom=!0===i.ignoreZoom,a._ghostProxyParent=i.ghostProxyParent,a.trackScroll&&(a.scrollTracker=a._trackScroll.bind(h(a)),document.addEventListener("scroll",a.scrollTracker)),!0===i.ghostProxy?a._useGhostProxy=Hn:i.ghostProxy&&"function"==typeof i.ghostProxy?a._useGhostProxy=i.ghostProxy:a._useGhostProxy=function(t,e){return!(!a._activeSelectorParams||!a._activeSelectorParams.useGhostProxy)&&a._activeSelectorParams.useGhostProxy(t,e)},i.makeGhostProxy?a._ghostProxyFunction=i.makeGhostProxy:a._ghostProxyFunction=function(t){return a._activeSelectorParams&&a._activeSelectorParams.makeGhostProxy?a._activeSelectorParams.makeGhostProxy(t):t.cloneNode(!0)},i.selector){var l=a.el.getAttribute("katavorio-draggable");null==l&&(l=""+(new Date).getTime(),a.el.setAttribute("katavorio-draggable",l)),a._availableSelectors.push(i)}return a.eventManager.on(a.el,de,a.downListener),a}return a(n,[{key:"_trackScroll",value:function(t){if(this._moving){var e={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},n=e.x-this._lastScrollValues.x,i=e.y-this._lastScrollValues.y,r={x:n+this._lastPosition.x,y:i+this._lastPosition.y},o=r.x-this._downAt.x,a=r.y-this._downAt.y,s=this._ignoreZoom?1:this.manager.getZoom();this._dragEl&&this._dragEl.parentNode&&(o+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,a+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),o/=s,a/=s,this.moveBy(o,a,t),this._lastPosition=r,this._lastScrollValues=e}}},{key:"on",value:function(t,e){this.listeners[t]&&this.listeners[t].push(e)}},{key:"off",value:function(t,e){if(this.listeners[t]){for(var n=[],i=0;i<this.listeners[t].length;i++)this.listeners[t][i]!==e&&n.push(this.listeners[t][i]);this.listeners[t]=n}}},{key:"_upListener",value:function(t){this._downAt&&(this._downAt=null,this.eventManager.off(document,ge,this.moveListener),this.eventManager.off(document,me,this.upListener),it(document.body,Wn),this.unmark(t),this.stop(t),this._moving=!1,this.clone?(this._dragEl&&this._dragEl.parentNode&&this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=null):this._activeSelectorParams&&this._activeSelectorParams.revertFunction&&!0===this._activeSelectorParams.revertFunction(this._dragEl,this.manager.getPosition(this._dragEl))&&(this.manager.setPosition(this._dragEl,this._posAtDown),this._dispatch(we,this._dragEl)))}},{key:"_downListener",value:function(t){if(!t.defaultPrevented&&(this.rightButtonCanDrag||3!==t.which&&2!==t.button)&&this.isEnabled()&&this._canDrag()){var e=this._testFilter(t)&&function(t,e,n){return!Y(t.srcElement||t.target,n.getInputFilterSelector(),e)}(t,this.el,this.manager);if(e){this._activeSelectorParams=null,this._elementToDrag=null,0===this._availableSelectors.length&&console.log("JSPLUMB: no available drag selectors");var n=t.target||t.srcElement,i=function(t,e,n){for(var i=null,r=e.getAttribute("katavorio-draggable"),o=null!=r?"[katavorio-draggable='"+r+"'] ":"",a=0;a<t.length;a++)if(null!=(i=Fn(e,n,o+t[a].selector))){if(t[a].filter){var s=Y(n,t[a].filter,i);if(!0===t[a].filterExclude&&!s||s)return null}return[t[a],i]}return null}(this._availableSelectors,this.el,n);if(null!=i&&(this._activeSelectorParams=i[0],this._elementToDrag=i[1]),null==this._activeSelectorParams||null==this._elementToDrag)return;var r=this._activeSelectorParams.dragInit?this._activeSelectorParams.dragInit(this._elementToDrag,t):null;if(null!=r&&(this._elementToDrag=r),this.clone)if(this._dragEl=this._elementToDrag.cloneNode(!0),nt(this._dragEl,"katavorio-clone-drag"),this._dragEl.setAttribute("id",null),this._dragEl.style.position="absolute",null!=this._parent){var o=this.manager.getPosition(this.el);this._dragEl.style.left=o.x+"px",this._dragEl.style.top=o.y+"px",this._parent.appendChild(this._dragEl)}else{var a=at(this._elementToDrag);this._dragEl.style.left=a.x+"px",this._dragEl.style.top=a.y+"px",document.body.appendChild(this._dragEl)}else this._dragEl=this._elementToDrag;this.consumeStartEvent&&K(t),this._downAt=mn(t),this._dragEl&&this._dragEl.parentNode&&(this._initialScroll={x:this._dragEl.parentNode.scrollLeft,y:this._dragEl.parentNode.scrollTop}),this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=at(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),this.eventManager.on(document,ge,this.moveListener),this.eventManager.on(document,me,this.upListener),nt(document.body,Wn),this._dispatch(Un,{el:this.el,pos:this._posAtDown,e:t,drag:this,size:this._size})}else this._consumeFilteredEvents&&K(t)}}},{key:"_moveListener",value:function(t){if(this._downAt){if(!this._moving){var e=this._dispatch(jn,{el:this.el,pos:this._posAtDown,e:t,drag:this,size:this._size});if(!1!==e){if(!this._downAt)return;this.mark(e),this._moving=!0}else this.abort()}if(this._downAt){var n=mn(t),i=n.x-this._downAt.x,r=n.y-this._downAt.y,o=this._ignoreZoom?1:this.manager.getZoom();this._lastPosition={x:n.x,y:n.y},this._lastScrollValues={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},this._dragEl&&this._dragEl.parentNode&&(i+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,r+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),i/=o,r/=o,this.moveBy(i,r,t)}}}},{key:"getDragDelta",value:function(){return null!=this._posAtDown&&null!=this._downAt?{x:this._downAt.x-this._posAtDown.x,y:this._downAt.y-this._posAtDown.y}:{x:0,y:0}}},{key:"mark",value:function(t){var e;this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=at(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),nt(this._dragEl,this.manager.css.drag),this._constrainRect={w:(e=this._dragEl).parentNode.offsetWidth+e.parentNode.scrollLeft,h:e.parentNode.offsetHeight+e.parentNode.scrollTop},this._ghostDx=0,this._ghostDy=0}},{key:"unmark",value:function(t){this._isConstrained&&this._useGhostProxy(this._elementToDrag,this._dragEl)?(this._ghostProxyOffsets={x:this._dragEl.offsetLeft-this._ghostDx,y:this._dragEl.offsetTop-this._ghostDy},this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag):this._ghostProxyOffsets=null,it(this._dragEl,this.manager.css.drag),this._isConstrained=!1}},{key:"moveBy",value:function(t,e,n){var i=this.toGrid({x:this._posAtDown.x+t,y:this._posAtDown.y+e}),r=this._doConstrain(i,this._dragEl,this._constrainRect,this._size,n);if(null!=r){if(this._useGhostProxy(this.el,this._dragEl))if(i.x!==r.x||i.y!==r.y){if(!this._isConstrained){var o=this._ghostProxyFunction(this._elementToDrag);nt(o,"katavorio-ghost-proxy"),this._ghostProxyParent?(this._ghostProxyParent.appendChild(o),this._currentParentPosition=at(this._elementToDrag.parentNode),this._ghostParentPosition=at(this._ghostProxyParent),this._ghostDx=this._currentParentPosition.x-this._ghostParentPosition.x,this._ghostDy=this._currentParentPosition.y-this._ghostParentPosition.y):this._elementToDrag.parentNode.appendChild(o),this._dragEl=o,this._isConstrained=!0}r=i}else this._isConstrained&&(this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag,this._isConstrained=!1,this._currentParentPosition=null,this._ghostParentPosition=null,this._ghostDx=0,this._ghostDy=0);this.manager.setPosition(this._dragEl,{x:r.x+this._ghostDx,y:r.y+this._ghostDy}),this._dispatch(Gn,{el:this.el,pos:r,e:n,drag:this,size:this._size,originalPos:this._posAtDown})}}},{key:"abort",value:function(){null!=this._downAt&&this._upListener()}},{key:"getDragElement",value:function(t){return t?this._elementToDrag||this.el:this._dragEl||this.el}},{key:"stop",value:function(t,e){if(e||this._moving){var n=[],i=this.manager.getPosition(this._dragEl);n.push([this._dragEl,i,this,this._size]),this._dispatch($n,{el:this._dragEl,pos:this._ghostProxyOffsets||i,finalPos:i,e:t,drag:this,selection:n,size:this._size,originalPos:{x:this._posAtDown.x,y:this._posAtDown.y}})}else this._moving||this._activeSelectorParams.dragAbort&&this._activeSelectorParams.dragAbort(this._elementToDrag)}},{key:"_dispatch",value:function(t,e){var n=null;if(this._activeSelectorParams&&this._activeSelectorParams[t])n=this._activeSelectorParams[t](e);else if(this.listeners[t])for(var i=0;i<this.listeners[t].length;i++)try{var r=this.listeners[t][i](e);null!=r&&(n=r)}catch(t){}return n}},{key:"resolveGrid",value:function(){var t={grid:null,thresholdX:5,thresholdY:5};return null!=this._activeSelectorParams&&null!=this._activeSelectorParams.grid&&(t.grid=this._activeSelectorParams.grid,null!=this._activeSelectorParams.snapThreshold&&(t.thresholdX=this._activeSelectorParams.snapThreshold,t.thresholdY=this._activeSelectorParams.snapThreshold)),t}},{key:"toGrid",value:function(t){var e=this.resolveGrid(),n=e.grid,i=e.thresholdX,r=e.thresholdY;return null==n?t:function(t,e,n,i){n=null==n?null==e.thresholdX?e.w/2:e.thresholdX:n,i=null==i?null==e.thresholdY?e.h/2:e.thresholdY:i;var r=Math.floor(t.x/e.w),o=e.w*r,a=o+e.w,s=Math.abs(t.x-o)<=n?o:Math.abs(a-t.x)<=n?a:t.x,l=Math.floor(t.y/e.h),c=e.h*l,u=c+e.h;return{x:s,y:Math.abs(t.y-c)<=i?c:Math.abs(u-t.y)<=i?u:t.y}}(t,n,n?n.w/2:i,n?n.h/2:r)}},{key:"setUseGhostProxy",value:function(t){this._useGhostProxy=t?Hn:qn}},{key:"_doConstrain",value:function(t,e,n,i,r){return null!=this._activeSelectorParams&&this._activeSelectorParams.constrainFunction&&"function"==typeof this._activeSelectorParams.constrainFunction?this._activeSelectorParams.constrainFunction(t,e,n,i,r):t}},{key:"_testFilter",value:function(t){for(var e in this._filters){var n=this._filters[e],i=n[0](t);if(n[1]&&(i=!i),!i)return!1}return!0}},{key:"addFilter",value:function(t,e){var n,i=this;if(t){var r="function"==typeof(n=t)?(n._katavorioId=B(),n._katavorioId):n;this._filters[r]=[function(e){var n,r=e.srcElement||e.target;return S(t)?n=Y(r,t,i.el):"function"==typeof t&&(n=t(e,i.el)),n},!1!==e]}}},{key:"removeFilter",value:function(t){var e="function"==typeof t?t._katavorioId:t;delete this._filters[e]}},{key:"clearAllFilters",value:function(){this._filters={}}},{key:"addSelector",value:function(t,e){t.selector&&(e?this._availableSelectors.unshift(t):this._availableSelectors.push(t))}},{key:"destroy",value:function(){this.eventManager.off(this.el,de,this.downListener),this.eventManager.off(document,ge,this.moveListener),this.eventManager.off(document,me,this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null,null!=this.scrollTracker&&document.removeEventListener("scroll",this.scrollTracker)}}]),n}(ni),li=["input","textarea","select","button","option"].join(","),ci=function(){function t(e){r(this,t),s(this,"eventManager",void 0),s(this,"zoom",1),s(this,"css",{}),s(this,"inputFilterSelector",void 0),s(this,"positioningStrategy",void 0),s(this,"_positionSetter",void 0),s(this,"_positionGetter",void 0),s(this,"_sizeSetter",void 0),s(this,"_sizeGetter",void 0),e=e||{},this.inputFilterSelector=e.inputFilterSelector||li,this.eventManager=new _n,this.zoom=e.zoom||1,this.positioningStrategy=e.positioningStrategy||zn.absolutePosition,this._positionGetter=Yn.get(this.positioningStrategy),this._positionSetter=Zn.get(this.positioningStrategy),this._sizeGetter=Xn.get(this.positioningStrategy),this._sizeSetter=Kn.get(this.positioningStrategy);var n=e.css||{};b(this.css,n)}return a(t,[{key:"getPosition",value:function(t){return this._positionGetter(t)}},{key:"setPosition",value:function(t,e){this._positionSetter(t,e)}},{key:"getSize",value:function(t){return this._sizeGetter(t)}},{key:"getZoom",value:function(){return this.zoom}},{key:"setZoom",value:function(t){this.zoom=t}},{key:"_prepareParams",value:function(t){t=t||{};var e,n={events:{}};for(e in t)n[e]=t[e];for(e=0;e<Qn.length;e++)n.events[Qn[e]]=t[Qn[e]]||ti;return n}},{key:"getInputFilterSelector",value:function(){return this.inputFilterSelector}},{key:"setInputFilterSelector",value:function(t){return this.inputFilterSelector=t,this}},{key:"draggable",value:function(t,e){if(null==t._katavorioDrag){var n=this._prepareParams(e),i=new si(t,n,this);return nt(t,"katavorio-delegated-draggable"),t._katavorioDrag=i,i}return t._katavorioDrag}},{key:"destroyDraggable",value:function(t){t._katavorioDrag&&(t._katavorioDrag.destroy(),delete t._katavorioDrag)}}]),t}(),ui="jtk-drag-selected",hi=function(){function t(e){r(this,t),this.instance=e,s(this,"_dragSelection",[]),s(this,"_dragSizes",new Map),s(this,"_dragElements",new Map),s(this,"_dragElementStartPositions",new Map),s(this,"_dragElementPositions",new Map),s(this,"__activeSet",void 0)}return a(t,[{key:"_activeSet",get:function(){return null==this.__activeSet?this._dragSelection:this.__activeSet}},{key:"length",get:function(){return this._dragSelection.length}},{key:"filterActiveSet",value:function(t){var e=this;this.__activeSet=[],A(this._dragSelection,(function(n){t(n)&&e.__activeSet.push(n)}))}},{key:"clear",value:function(){var t=this;this.reset(),A(this._dragSelection,(function(e){return t.instance.removeClass(e.jel,ui)})),this._dragSelection.length=0}},{key:"reset",value:function(){this._dragElementStartPositions.clear(),this._dragElementPositions.clear(),this._dragSizes.clear(),this._dragElements.clear(),this.__activeSet=null}},{key:"initialisePositions",value:function(){var t=this;A(this._activeSet,(function(e){var n=t.instance.viewport.getPosition(e.id),i={x:parseInt(""+e.jel.offsetLeft,10),y:parseInt(""+e.jel.offsetTop,10)};t._dragElementStartPositions.set(e.id,i),t._dragElementPositions.set(e.id,i),t._dragSizes.set(e.id,{w:n.w,h:n.h})}))}},{key:"updatePositions",value:function(t,e,n){var i=this,r=t.x-e.x,o=t.y-e.y;A(this._activeSet,(function(t){var e=i._dragElementStartPositions.get(t.id);if(e){var a=e.x+r,s=e.y+o,l=i._dragSizes.get(t.id),c={x:a,y:s,w:l.w,h:l.h};if(t.jel._jsPlumbParentGroup&&t.jel._jsPlumbParentGroup.constrain){var u={w:t.jel.parentNode.offsetWidth+t.jel.parentNode.scrollLeft,h:t.jel.parentNode.offsetHeight+t.jel.parentNode.scrollTop};c.x=Math.max(c.x,0),c.y=Math.max(c.y,0),c.x=Math.min(c.x,u.w-l.w),c.y=Math.min(c.y,u.h-l.h)}i._dragElementPositions.set(t.id,{x:a,y:s}),t.jel.style.left=c.x+"px",t.jel.style.top=c.y+"px",n(t.jel,t.id,l,c)}}))}},{key:"each",value:function(t){var e=this;A(this._activeSet,(function(n){var i=e._dragSizes.get(n.id),r=e._dragElementPositions.get(n.id),o=e._dragElementStartPositions.get(n.id);t(n.jel,n.id,r,i,o)}))}},{key:"add",value:function(t,e){var n=t;e=e||this.instance.getId(n),-1===_(this._dragSelection,(function(t){return t.id===e}))&&(this.instance.addClass(t,ui),this._dragSelection.push({id:e,jel:n}))}},{key:"remove",value:function(t){var e=this,n=t;this._dragSelection=this._dragSelection.filter((function(t){var i=t.jel!==n;return i||e.instance.removeClass(t.jel,ui),i}))}},{key:"toggle",value:function(t){var e=t;-1!==_(this._dragSelection,(function(t){return t.jel===e}))?this.remove(e):this.add(t)}}]),t}(),di="jtk-drag-active",pi="jtk-drag-hover",fi=function(){function t(e,n,i){var o=this;r(this,t),this.instance=e,this.dragSelection=n,s(this,"collicat",void 0),s(this,"drag",void 0),s(this,"_draggables",{}),s(this,"_dlist",[]),s(this,"_elementsWithEndpoints",{}),s(this,"_draggablesForElements",{}),s(this,"handlers",[]),s(this,"_trackScroll",void 0),s(this,"_filtersToAdd",[]),this.collicat=new ci({zoom:this.instance.currentZoom,css:{noSelect:this.instance.dragSelectClass,delegatedDraggable:"jtk-delegated-draggable",draggable:"jtk-draggable",drag:"jtk-drag",selected:ui,active:di,hover:pi,ghostProxy:"jtk-ghost-proxy"}}),this.instance.bind(Ft,(function(t){o.collicat.setZoom(t)})),i=i||{},this._trackScroll=!1!==i.trackScroll}return a(t,[{key:"addHandler",value:function(t,e){var n=this,i=b({selector:t.selector},e||{});i.start=q(i.start,(function(e){return t.onStart(e)}),!1),i.drag=q(i.drag,(function(e){return t.onDrag(e)})),i.stop=q(i.stop,(function(e){return t.onStop(e)}));var r=(t.onBeforeStart||function(t){}).bind(t);if(i.beforeStart=q(i.beforeStart,(function(t){return r(t)})),i.dragInit=function(e,n){return t.onDragInit(e,n)},i.dragAbort=function(e){return t.onDragAbort(e)},t.useGhostProxy&&(i.useGhostProxy=t.useGhostProxy,i.makeGhostProxy=t.makeGhostProxy),null==i.constrainFunction&&null!=i.containment)switch(i.containment){case Jn.notNegative:i.constrainFunction=function(t,e,n,i){return{x:Math.max(0,Math.min(t.x)),y:Math.max(0,Math.min(t.y))}};break;case Jn.parent:var o=i.containmentPadding||5;i.constrainFunction=function(t,e,n,i){return{x:t.x<0?0:t.x>n.w-o?n.w-o:t.x,y:t.y<0?0:t.y>n.h-o?n.h-o:t.y}};break;case Jn.parentEnclosed:i.constrainFunction=function(t,e,n,i){return{x:t.x<0?0:t.x+i.w>n.w?n.w-i.w:t.x,y:t.y<0?0:t.y+i.h>n.h?n.h-i.h:t.y}}}null==this.drag?(i.trackScroll=this._trackScroll,this.drag=this.collicat.draggable(this.instance.getContainer(),i),A(this._filtersToAdd,(function(t){return n.drag.addFilter(t[0],t[1])})),this.drag.on(we,(function(t){n.instance.revalidate(t)}))):this.drag.addSelector(i),this.handlers.push({handler:t,options:i}),t.init(this.drag)}},{key:"addSelector",value:function(t,e){this.drag&&this.drag.addSelector(t,e)}},{key:"addFilter",value:function(t,e){null==this.drag?this._filtersToAdd.push([t,!0===e]):this.drag.addFilter(t,e)}},{key:"removeFilter",value:function(t){null!=this.drag&&this.drag.removeFilter(t)}},{key:"setFilters",value:function(t){var e=this;A(t,(function(t){e.drag.addFilter(t[0],t[1])}))}},{key:"reset",value:function(){var t=[];if(A(this.handlers,(function(t){t.handler.reset()})),this.handlers.length=0,null!=this.drag){var e=this.drag._filters;for(var n in e)t.push([n,e[n][1]]);this.collicat.destroyDraggable(this.instance.getContainer())}return delete this.drag,t}},{key:"setOption",value:function(t,e){var n=P(this.handlers,(function(e){return e.handler===t}));null!=n&&b(n.options,e||{})}}]),t}(),gi=function(){function t(e,n){r(this,t),this.instance=e,this._dragSelection=n,s(this,"selector","> "+Ut+":not("+ut(_t)+")"),s(this,"_dragOffset",null),s(this,"_groupLocations",[]),s(this,"_intersectingGroups",[]),s(this,"_currentDragParentGroup",null),s(this,"_dragGroupByElementIdMap",{}),s(this,"_dragGroupMap",{}),s(this,"_currentDragGroup",null),s(this,"_currentDragGroupOffsets",new Map),s(this,"_currentDragGroupSizes",new Map),s(this,"_currentDragGroupOriginalPositions",new Map),s(this,"_dragPayload",null),s(this,"drag",void 0),s(this,"originalPosition",void 0)}return a(t,[{key:"onDragInit",value:function(t){return null}},{key:"onDragAbort",value:function(t){return null}},{key:"getDropGroup",value:function(){var t=null;if(this._intersectingGroups.length>0){var e=this._intersectingGroups[0].groupLoc.group,n=this._intersectingGroups[0].intersectingElement,i=n._jsPlumbParentGroup;i!==e&&(null!=i&&i.overrideDrop(n,e)||(t=this._intersectingGroups[0]))}return t}},{key:"onStop",value:function(t){var e,n=this,i=t.drag.getDragElement(),r=this.getDropGroup(),o=[];function a(t,e,n,i,a){var s=n.x,l=n.y;if(t._jsPlumbParentGroup&&t._jsPlumbParentGroup.constrain){var c={w:t.parentNode.offsetWidth+t.parentNode.scrollLeft,h:t.parentNode.offsetHeight+t.parentNode.scrollTop};s=Math.max(s,0),l=Math.max(l,0),s=Math.min(s,c.w-i.w),l=Math.min(l,c.h-i.h),n.x=s,n.y=l}o.push({el:t,id:e,pos:n,originalPos:a,originalGroup:t._jsPlumbParentGroup,redrawResult:null,reverted:!1,dropGroup:null==r?void 0:r.groupLoc.group})}if(o.push({el:i,id:this.instance.getId(i),pos:t.finalPos,originalGroup:i._jsPlumbParentGroup,redrawResult:null,originalPos:t.originalPos,reverted:!1,dropGroup:null!=r?r.groupLoc.group:null}),this._dragSelection.each((function(e,n,i,r,o){e!==t.el&&a(e,n,{x:i.x,y:i.y},r,o)})),null===(e=this._currentDragGroup)||void 0===e||e.members.forEach((function(e){if(e.el!==t.el){var i=n._currentDragGroupOffsets.get(e.elId),r=n._currentDragGroupSizes.get(e.elId),o={x:t.finalPos.x+i[0].x,y:t.finalPos.y+i[0].y};a(e.el,e.elId,o,r,n._currentDragGroupOriginalPositions.get(e.elId))}})),A(o,(function(t){var e=null!=t.originalGroup,i=e&&Bn(n.instance,t.el,t.pos),o={x:0,y:0};if(e&&!i){if(null==r){var a=n._pruneOrOrphan(t,!0,!0);null!=a.pos?t.pos=a.pos.pos:!a.pruned&&t.originalGroup.revert&&(t.pos=t.originalPos,t.reverted=!0)}}else e&&i&&(o=n._computeOffsetByParentGroup(t.originalGroup));null==r||i?t.dropGroup=null:n.instance.groupManager.addToGroup(r.groupLoc.group,!1,t.el),t.reverted&&n.instance.setPosition(t.el,t.pos),t.redrawResult=n.instance.setElementPosition(t.el,t.pos.x+o.x,t.pos.y+o.y),n.instance.removeClass(t.el,"jtk-dragged"),n.instance.select({source:t.el}).removeClass(n.instance.elementDraggingClass+" "+n.instance.sourceElementDraggingClass,!0),n.instance.select({target:t.el}).removeClass(n.instance.elementDraggingClass+" "+n.instance.targetElementDraggingClass,!0)})),null!=o[0].originalGroup){var s=i._jsPlumbParentGroup;if(s!==o[0].originalGroup){var l=t.drag.getDragElement(!0);if(o[0].originalGroup.ghost){var c=this.instance.getPosition(this.instance.getGroupContentArea(s)),u=this.instance.getPosition(this.instance.getGroupContentArea(o[0].originalGroup)),h={x:u.x+t.pos.x-c.x,y:u.y+t.pos.y-c.y};l.style.left=h.x+"px",l.style.top=h.y+"px",this.instance.revalidate(l)}}}this.instance.fire("drag:stop",{elements:o,e:t.e,el:i,payload:this._dragPayload}),this._cleanup()}},{key:"_cleanup",value:function(){var t=this;A(this._groupLocations,(function(e){t.instance.removeClass(e.el,di),t.instance.removeClass(e.el,pi)})),this._currentDragParentGroup=null,this._groupLocations.length=0,this.instance.hoverSuspended=!1,this._dragOffset=null,this._dragSelection.reset(),this._dragPayload=null,this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroupOriginalPositions.clear(),this._currentDragGroup=null}},{key:"reset",value:function(){}},{key:"init",value:function(t){this.drag=t}},{key:"onDrag",value:function(t){var e=this,n=t.drag.getDragElement(),i=this.instance.getId(n),r=t.pos,o=this.instance.viewport.getPosition(i),a={x:r.x,y:r.y};this._intersectingGroups.length=0,null!=this._dragOffset&&(a.x+=this._dragOffset.x,a.y+=this._dragOffset.y);var s=function(n,i,r){if(r){var o=new Set;A(e._groupLocations,(function(n){!o.has(n.group.id)&&Vn(i,n.r)?(n.group!==e._currentDragParentGroup&&e.instance.addClass(n.el,pi),e._intersectingGroups.push({groupLoc:n,intersectingElement:t.drag.getDragElement(!0),d:0}),A(e.instance.groupManager.getAncestors(n.group),(function(t){return o.add(t.id)}))):e.instance.removeClass(n.el,pi)}))}e.instance.setElementPosition(n,i.x,i.y),e.instance.fire("drag:move",{el:n,e:t.e,pos:{x:i.x,y:i.y},originalPosition:e.originalPosition,payload:e._dragPayload})},l={x:a.x,y:a.y,w:o.w,h:o.h};s(n,l,!0),this._dragSelection.updatePositions(r,this.originalPosition,(function(t,e,n,i){s(t,i,!1)})),this._currentDragGroupOffsets.forEach((function(t,n){var i=e._currentDragGroupSizes.get(n),r={x:l.x+t[0].x,y:l.y+t[0].y,w:i.w,h:i.h};t[1].style.left=r.x+"px",t[1].style.top=r.y+"px",s(t[1],r,!1)}))}},{key:"_computeOffsetByParentGroup",value:function(t){var e=this.instance.getPosition(t.el),n=t.contentArea;if(n!==t.el){var i=this.instance.getPosition(n);e.x+=i.x,e.y+=i.y}if(t.el._jsPlumbParentGroup){var r=this._computeOffsetByParentGroup(t.el._jsPlumbParentGroup);e.x+=r.x,e.y+=r.y}return e}},{key:"onStart",value:function(t){var e=this,n=t.drag.getDragElement(),i=this.instance.getPosition(n);this.originalPosition={x:t.pos.x,y:t.pos.y},n._jsPlumbParentGroup&&(this._dragOffset=this._computeOffsetByParentGroup(n._jsPlumbParentGroup),this._currentDragParentGroup=n._jsPlumbParentGroup);var r=!0,o=n.getAttribute(wt);if((!1===this.instance.elementsDraggable||null!=o&&o!==an)&&(r=!1),r){this._groupLocations.length=0,this._intersectingGroups.length=0,this.instance.hoverSuspended=!0;var a=t.drag.getDragElement(!0),s=a.querySelectorAll(Ut),l=function(t){for(var e=[],n=t._jsPlumbParentGroup;null!=n;)e.push(n.el),n=n.group;return e}(a),c=[];Array.prototype.push.apply(c,s),Array.prototype.push.apply(c,l),this._dragSelection.filterActiveSet((function(t){return-1===c.indexOf(t.jel)})),this._dragSelection.initialisePositions();var u=function(n,i,r){if(!n._isJsPlumbGroup||e.instance.allowNestedGroups){var o=!n._jsPlumbParentGroup,a=o||!0!==n._jsPlumbParentGroup.dropOverride,s=!o&&(n._jsPlumbParentGroup.ghost||!0!==n._jsPlumbParentGroup.constrain);(o||a&&s)&&(A(e.instance.groupManager.getGroups(),(function(t){var i=n._jsPlumbGroup;if(!1!==t.droppable&&!1!==t.enabled&&n._jsPlumbGroup!==t&&!e.instance.groupManager.isDescendant(t,i)){var r=t.el,o=e.instance.getId(r),a=e.instance.viewport.getPosition(o),s={el:r,r:{x:a.x,y:a.y,w:a.w,h:a.h},group:t};e._groupLocations.push(s),t!==e._currentDragParentGroup&&e.instance.addClass(r,di)}})),e._groupLocations.sort((function(t,n){return e.instance.groupManager.isDescendant(t.group,n.group)?-1:e.instance.groupManager.isAncestor(n.group,t.group)?1:0})))}return e.instance.select({source:n}).addClass(e.instance.elementDraggingClass+" "+e.instance.sourceElementDraggingClass,!0),e.instance.select({target:n}).addClass(e.instance.elementDraggingClass+" "+e.instance.targetElementDraggingClass,!0),e.instance.fire("drag:start",{el:n,e:t.e,originalPosition:e.originalPosition,pos:e.originalPosition,dragGroup:i,dragGroupMemberSpec:r})},h=this.instance.getId(n);this._currentDragGroup=this._dragGroupByElementIdMap[h],this._currentDragGroup&&!function(t,e){var n=D(t.members,(function(t){return t.el===e}));return null!==n&&!0===n.active}(this._currentDragGroup,n)&&(this._currentDragGroup=null);var d=u(n);if(!1===d)return this._cleanup(),!1;this._dragPayload=d,null!=this._currentDragGroup&&(this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroup.members.forEach((function(t){var n=e.instance.viewport.getPosition(t.elId);e._currentDragGroupOffsets.set(t.elId,[{x:n.x-i.x,y:n.y-i.y},t.el]),e._currentDragGroupSizes.set(t.elId,n),e._currentDragGroupOriginalPositions.set(t.elId,{x:n.x,y:n.y}),u(t.el,e._currentDragGroup,t)})))}return r}},{key:"addToDragGroup",value:function(t){var e=this,n=function(t,e){return S(e)?{id:e,active:!0}:{id:e.id,active:e.active}}(this.instance,t),i=this._dragGroupMap[n.id];null==i&&(i={id:n.id,members:new Set},this._dragGroupMap[n.id]=i);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];this.removeFromDragGroup.apply(this,o),A(o,(function(t){var r=e.instance.getId(t);i.members.add({elId:r,el:t,active:n.active}),e._dragGroupByElementIdMap[r]=i}))}},{key:"removeFromDragGroup",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];A(n,(function(e){var n=t.instance.getId(e),i=t._dragGroupByElementIdMap[n];if(null!=i){var r=new Set;i.members.forEach((function(t){t.el!==e&&r.add(t)})),i.members=r,delete t._dragGroupByElementIdMap[n]}}))}},{key:"setDragGroupState",value:function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];A(i.map((function(t){return e.instance.getId(t)})),(function(n){var i=e._dragGroupByElementIdMap[n];if(null!=i){var r=D(i.members,(function(t){return t.elId===n}));null!=r&&(r.active=t)}}))}},{key:"clearDragGroup",value:function(t){var e=this,n=this._dragGroupMap[t];null!=n&&(n.members.forEach((function(t){delete e._dragGroupByElementIdMap[t.elId]})),n.members.clear())}},{key:"_pruneOrOrphan",value:function(t,e,n){var i=t.el,r={pruned:!1,pos:null};if(n||!Bn(this.instance,i,t.pos)){var o=i._jsPlumbParentGroup;o.prune?(i._isJsPlumbGroup?this.instance.removeGroup(i._jsPlumbGroup):o.remove(t.el,!0),r.pruned=!0):o.orphan&&(r.pos=this.instance.groupManager.orphan(t.el,e),i._isJsPlumbGroup?o.removeGroup(i._jsPlumbGroup):o.remove(t.el))}return r}}]),t}(),mi={},vi={},yi={},bi={get:function(t,e,n){var i=mi[e];if(i)return new i(t,n);throw{message:"jsPlumb: unknown endpoint type '"+e+"'"}},clone:function(t){var e=yi[t.type];return bi.get(t.endpoint,t.type,e.getParams(t))},compute:function(t,e,n,i){var r=vi[t.type];if(null!=r)return r(t,e,n,i);$("jsPlumb: cannot find endpoint calculator for endpoint of type ",t.type)},registerHandler:function(t){yi[t.type]=t,mi[t.type]=t.cls,vi[t.type]=t.compute}},wi=function(){function t(e,n){r(this,t),this.endpoint=e,s(this,"typeId",void 0),s(this,"x",void 0),s(this,"y",void 0),s(this,"w",void 0),s(this,"h",void 0),s(this,"computedValue",void 0),s(this,"bounds",{xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}),s(this,"classes",[]),s(this,"instance",void 0),s(this,"type",void 0),n=n||{},this.instance=e.instance,e.cssClass&&this.classes.push(e.cssClass),n.cssClass&&this.classes.push(n.cssClass)}return a(t,[{key:"addClass",value:function(t){this.classes.push(t),this.instance.addEndpointClass(this.endpoint,t)}},{key:"removeClass",value:function(t){this.classes=this.classes.filter((function(e){return e!==t})),this.instance.removeEndpointClass(this.endpoint,t)}},{key:"compute",value:function(t,e,n){this.computedValue=bi.compute(this,t,e,n),this.bounds.xmin=this.x,this.bounds.ymin=this.y,this.bounds.xmax=this.x+this.w,this.bounds.ymax=this.y+this.h}},{key:"setVisible",value:function(t){this.instance.setEndpointVisible(this.endpoint,t)}}]),t}();!function(t){t.top="top",t.left="left",t.right="right",t.bottom="bottom"}(ai||(ai={}));var Si=ai.top,xi=ai.left,ki=ai.right,Ci=ai.bottom,Mi=[xi,ki],Ti=[Si,Ci],Ei=function(){function t(e,n,i){r(this,t),this.instance=e,this.element=n,s(this,"isFloating",!0),s(this,"isContinuous",void 0),s(this,"isDynamic",void 0),s(this,"locations",[]),s(this,"currentLocation",0),s(this,"locked",!1),s(this,"cssClass",""),s(this,"timestamp",null),s(this,"type","Floating"),s(this,"id",B()),s(this,"orientation",[0,0]),s(this,"size",void 0),this.size=e.viewport.getPosition(i),this.locations.push({x:.5,y:.5,ox:this.orientation[0],oy:this.orientation[1],offx:0,offy:0,iox:this.orientation[0],ioy:this.orientation[1],cls:""})}return a(t,[{key:"_updateOrientationInRouter",value:function(){this.instance.router.setAnchorOrientation(this,[this.locations[0].ox,this.locations[0].oy])}},{key:"over",value:function(t){this.orientation=this.instance.router.getEndpointOrientation(t),this.locations[0].ox=this.orientation[0],this.locations[0].oy=this.orientation[1],this._updateOrientationInRouter()}},{key:"out",value:function(){this.orientation=null,this.locations[0].ox=this.locations[0].iox,this.locations[0].oy=this.locations[0].ioy,this._updateOrientationInRouter()}}]),t}(),Ai=(s(ii={},Si,Ci),s(ii,ki,xi),s(ii,xi,ki),s(ii,Ci,Si),ii),_i=(s(ri={},Si,ki),s(ri,ki,Ci),s(ri,xi,Si),s(ri,Ci,xi),ri),Pi=(s(oi={},Si,xi),s(oi,ki,Si),s(oi,xi,Ci),s(oi,Ci,ki),oi);function Di(t){return 0===t.faces.length?Si:t.faces[0]}function Oi(t,e){return-1!==t.faces.indexOf(e)}function Li(t,e){return null==t.lockedAxis?null==t.lockedFace?!0===Oi(t,e):t.lockedFace===e:-1!==t.lockedAxis.indexOf(e)}var Ii={x:.5,y:0,ox:0,oy:-1,offx:0,offy:0},Ri={x:.5,y:1,ox:0,oy:1,offx:0,offy:0},Vi={x:0,y:.5,ox:-1,oy:0,offx:0,offy:0},Ni={x:1,y:.5,ox:1,oy:0,offx:0,offy:0},Fi={Top:[Ii],Bottom:[Ri],Left:[Vi],Right:[Ni],TopLeft:[{x:0,y:0,ox:0,oy:-1,offx:0,offy:0}],TopRight:[{x:1,y:0,ox:1,oy:-1,offx:0,offy:0}],BottomLeft:[{x:0,y:1,ox:0,oy:1,offx:0,offy:0}],BottomRight:[{x:1,y:1,ox:0,oy:1,offx:0,offy:0}],Center:[{x:.5,y:.5,ox:0,oy:0,offx:0,offy:0}],AutoDefault:[Ii,Vi,Ri,Ni]},Bi={Continuous:{faces:[Si,xi,Ci,ki]},ContinuousTop:{faces:[Si]},ContinuousRight:{faces:[ki]},ContinuousBottom:{faces:[Ci]},ContinuousLeft:{faces:[xi]},ContinuousLeftRight:{faces:[xi,ki]},ContinuousTopBottom:{faces:[Si,Ci]}};function zi(t,e){if(e=e||{},t===ee.Perimeter)return function(t){var e=(t=t||{}).anchorCount||60,n=t.shape;if(!n)throw new Error("no shape supplied to Perimeter Anchor type");if(!Zi.has(n))throw new Error("Shape ["+n+"] is unknown by Perimeter Anchor type");var i=Zi.get(n)(e);return t.rotation&&(i=function(t,e){for(var n=[],i=e/180*Math.PI,r=0;r<t.length;r++){var o=t[r].x-.5,a=t[r].y-.5;n.push({x:o*Math.cos(i)-a*Math.sin(i)+.5,y:o*Math.sin(i)+a*Math.cos(i)+.5,ox:t[r].ox,oy:t[r].oy,offx:0,offy:0,iox:0,ioy:0,cls:""})}return n}(i,t.rotation)),b(ji(ee.Perimeter,i,t),{shape:n})}(e);var n=Fi[t];if(null!=n)return ji(t,U(n,(function(t){return b({iox:t.ox,ioy:t.oy},t)})),e);if(null!=(n=Bi[t]))return function(t,e,n){var i={type:t,locations:[],currentLocation:0,locked:!1,id:B(),cssClass:n.cssClass||"",isFloating:!1,isContinuous:!0,timestamp:null,faces:n.faces||e,lockedFace:null,lockedAxis:null,clockwise:!(!1===n.clockwise),__currentFace:null};return Object.defineProperty(i,Ui,{get:function(){return this.__currentFace},set:function(t){this.__currentFace=function(t,e){if(Oi(t,e))return e;if(Oi(t,Ai[e]))return Ai[e];var n=function(t,e){return(t.clockwise?_i:Pi)[e]}(t,e);if(Oi(t,n))return n;var i=function(t,e){return(t.clockwise?Pi:_i)[e]}(t,e);return Oi(t,i)?i:e}(this,t)}}),i}(t,n.faces,e);throw{message:"jsPlumb: unknown anchor type '"+t+"'"}}function ji(t,e,n){return{type:t,locations:e,currentLocation:0,locked:!1,id:B(),isFloating:!1,isContinuous:!1,isDynamic:e.length>1,timestamp:null,cssClass:n.cssClass||""}}var Ui="currentFace";function Gi(t){return t.length<7&&t.every(w)||7===t.length&&t.slice(0,5).every(w)&&S(t[6])}function $i(t){if(S(t))return zi(t,null);if(Array.isArray(t)){if(Gi(t)){var e=t;return ji(null,[{x:e[0],y:e[1],ox:e[2],oy:e[3],offx:null==e[4]?0:e[4],offy:null==e[5]?0:e[5],iox:e[2],ioy:e[3],cls:e[6]||""}],{cssClass:e[6]||""})}return ji("Dynamic",U(t,(function(t){if(S(t)){var e=Fi[t];return null!=e?b({iox:e[0].ox,ioy:e[0].oy,cls:""},e[0]):null}if(Gi(t))return{x:t[0],y:t[1],ox:t[2],oy:t[3],offx:null==t[4]?0:t[4],offy:null==t[5]?0:t[5],iox:t[2],ioy:t[3],cls:t[6]||""}})).filter((function(t){return null!=t})),{})}var n=t;return zi(n.type,n.options)}function Hi(t){for(var e=.5,n=2*Math.PI/t,i=[],r=0,o=0;o<t;o++){var a=e+e*Math.sin(r),s=e+e*Math.cos(r);i.push({x:a,y:s,ox:0,oy:0,offx:0,offy:0,iox:0,ioy:0,cls:""}),r+=n}return i}function qi(t,e){for(var n=[],i=0;i<t.length;i++)n.push([t[i][0],t[i][1],t[i][2],t[i][3],1/t.length,t[i][4],t[i][5]]);return function(t,e){for(var n=e/t.length,i=[],r=function(t,r,o,a,s,l,c){for(var u=(o-t)/(n=e*s),h=(a-r)/n,d=0;d<n;d++)i.push({x:t+u*d,y:r+h*d,ox:null==l?0:l,oy:null==c?0:c,offx:0,offy:0,iox:0,ioy:0,cls:""})},o=0;o<t.length;o++)r.apply(null,t[o]);return i}(n,e)}function Wi(t){return qi([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]],t)}var Zi=new Map;Zi.set(te.Circle,Hi),Zi.set(te.Ellipse,Hi),Zi.set(te.Rectangle,Wi),Zi.set(te.Square,Wi),Zi.set(te.Diamond,(function(t){return qi([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]],t)})),Zi.set(te.Triangle,(function(t){return qi([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]],t)}));var Yi=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,t),this.selector=e,this.def=n,this.exclude=i,s(this,"id",void 0),s(this,"redrop",void 0),this.id=B(),this.redrop=n.def.redrop||Ki}return a(t,[{key:"setEnabled",value:function(t){this.def.enabled=t}},{key:"isEnabled",value:function(){return!1!==this.def.enabled}}]),t}(),Ki="strict";function Xi(t,e,n,i,r){for(var o=t.target||t.srcElement,a=!1,s=i.getSelector(e,n),l=0;l<s.length;l++)if(s[l]===o){a=!0;break}return r?!a:a}var Ji=ut(di,pi),Qi="sourceSelectorEndpoint",tr=function(){function t(e){r(this,t),this.instance=e,s(this,"jpc",void 0),s(this,"existingJpc",void 0),s(this,"_originalAnchorSpec",void 0),s(this,"ep",void 0),s(this,"endpointRepresentation",void 0),s(this,"canvasElement",void 0),s(this,"_activeDefinition",void 0),s(this,"placeholderInfo",{id:null,element:null}),s(this,"floatingIndex",void 0),s(this,"floatingId",void 0),s(this,"floatingElement",void 0),s(this,"floatingEndpoint",void 0),s(this,"floatingAnchor",void 0),s(this,"_stopped",void 0),s(this,"inPlaceCopy",void 0),s(this,"endpointDropTargets",[]),s(this,"currentDropTarget",null),s(this,"payload",void 0),s(this,"floatingConnections",{}),s(this,"_forceReattach",void 0),s(this,"_forceDetach",void 0),s(this,"mousedownHandler",void 0),s(this,"mouseupHandler",void 0),s(this,"selector",ut(Mt));var n=e.getContainer();this.mousedownHandler=this._mousedownHandler.bind(this),this.mouseupHandler=this._mouseupHandler.bind(this),e.on(n,de,Ut,this.mousedownHandler),e.on(n,me,[Ut,ut(Mt)].join(","),this.mouseupHandler)}return a(t,[{key:"_resolveDragParent",value:function(t,e){var n=this.instance.getContainer(),i=X(e,Ut,n,!0);if(null!=t.parentSelector){var r=X(e,t.parentSelector,n,!0);return null!=r&&(i=X(r.parentNode,Ut,n,!1)),r||i}return i}},{key:"_mousedownHandler",value:function(t){var e,n;if(3!==t.which&&2!==t.button){var i=t.target||t.srcElement;if((null==(n=this._getSourceDefinition(t))||null!=(e=this._resolveDragParent(n.def.def,i))&&e.getAttribute(ie)!==an)&&n){var r,o=t.currentTarget;if(i.getAttribute(ie)!==an){if(K(t),this._activeDefinition=n,null!=(r=n.def.def).canAcceptNewConnection&&!r.canAcceptNewConnection(e,t))return!1;var a=So(t,e,this.instance.currentZoom),s={element:e};if(b(s,r),s.isTemporarySource=!0,r.scope)s.scope=r.scope;else{var l=i.getAttribute(re);null!=l&&(s.scope=l)}if(null!=(s=T(s,r.parameterExtractor?r.parameterExtractor(e,i,t):{})).maxConnections&&s.maxConnections>=0&&this.instance.select({source:e}).length>=s.maxConnections)return K(t),r.onMaxConnections&&r.onMaxConnections({element:e,maxConnections:s.maxConnections},t),t.stopImmediatePropagation&&t.stopImmediatePropagation(),!1;if(r.anchorPositionFinder){var c=r.anchorPositionFinder(e,a,r,t);null!=c&&(s.anchor=c)}this._originalAnchorSpec=s.anchor||(this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors[0]:this.instance.defaults.anchor);var u=this.instance.router.prepareAnchor(this._originalAnchorSpec),h=[a.x,a.y,0,0];if(u.locations.length>0)h[2]=u.locations[0].ox,h[3]=u.locations[0].oy;else if(u.isContinuous){var d=a.x<.5?a.x:1-a.x,p=a.y<.5?a.y:1-a.y;h[2]=d<p?a.x<.5?-1:1:0,h[3]=p<d?a.y<.5?-1:1:0}s.anchor=h,s.deleteOnEmpty=!0,this.ep=this.instance._internal_newEndpoint(s);var f={};if(r.extract){for(var g in r.extract){var m=i.getAttribute(g);m&&(f[r.extract[g]]=m)}this.ep.mergeParameters(f)}if(s.uniqueEndpoint){var v=this.ep.elementId,y=this.instance.getManagedData(v,Qi,n.id);null==y?(this.instance.setManagedData(v,Qi,n.id,this.ep),this.ep.deleteOnEmpty=!1):this.ep.finalEndpoint=y}o._jsPlumbOrphanedEndpoints=o._jsPlumbOrphanedEndpoints||[],o._jsPlumbOrphanedEndpoints.push(this.ep),this.instance.trigger(this.ep.endpoint.canvas,de,t,f)}}}}},{key:"_mouseupHandler",value:function(t){var e=t.currentTarget||t.srcElement;e._jsPlumbOrphanedEndpoints&&(function(t,e){t=null==t.length||"string"==typeof t?[t]:t;for(var n=0;n<t.length;n++)e(t[n])}(e._jsPlumbOrphanedEndpoints,this.instance._maybePruneEndpoint.bind(this.instance)),e._jsPlumbOrphanedEndpoints.length=0),this._activeDefinition=null}},{key:"onDragInit",value:function(t){var e=st(t,this.instance),n=lt(t,this.instance);return this._makeDraggablePlaceholder(e,n),this.placeholderInfo.element.jtk=t.jtk,this.placeholderInfo.element}},{key:"onDragAbort",value:function(t){this._cleanupDraggablePlaceholder()}},{key:"_makeDraggablePlaceholder",value:function(t,e){this.placeholderInfo=this.placeholderInfo||{};var n=rt("div",{position:"absolute"});this.instance._appendElementToContainer(n);var i=this.instance.getId(n);return this.instance.setPosition(n,t),n.style.width=e.w+"px",n.style.height=e.h+"px",this.instance.manage(n),this.placeholderInfo.id=i,this.placeholderInfo.element=n,n}},{key:"_cleanupDraggablePlaceholder",value:function(){this.placeholderInfo.element&&(this.instance.unmanage(this.placeholderInfo.element,!0),delete this.placeholderInfo.element,delete this.placeholderInfo.id)}},{key:"reset",value:function(){var t=this.instance.getContainer();this.instance.off(t,me,this.mouseupHandler),this.instance.off(t,de,this.mousedownHandler)}},{key:"init",value:function(t){}},{key:"startNewConnectionDrag",value:function(t,e){this.jpc=this.instance._newConnection({sourceEndpoint:this.ep,targetEndpoint:this.floatingEndpoint,source:this.ep.element,target:this.placeholderInfo.element,paintStyle:this.ep.connectorStyle,hoverPaintStyle:this.ep.connectorHoverStyle,connector:this.ep.connector,overlays:this.ep.connectorOverlays,type:this.ep.edgeType,cssClass:this.ep.connectorClass,hoverClass:this.ep.connectorHoverClass,scope:t,data:e}),this.jpc.pending=!0,this.jpc.addClass(this.instance.draggingClass),this.ep.addClass(this.instance.draggingClass),this.instance.fire(Se,this.jpc)}},{key:"startExistingConnectionDrag",value:function(){this.existingJpc=!0,this.instance.setHover(this.jpc,!1);var t=this.jpc.endpoints[0].id===this.ep.id?0:1;this.ep.detachFromConnection(this.jpc,null,!0),this.floatingEndpoint.addConnection(this.jpc),this.instance.fire(Se,this.jpc),this.instance.sourceOrTargetChanged(this.jpc.endpoints[t].elementId,this.placeholderInfo.id,this.jpc,this.placeholderInfo.element,t),this.jpc.suspendedEndpoint=this.jpc.endpoints[t],this.jpc.suspendedElement=this.jpc.endpoints[t].element,this.jpc.suspendedElementId=this.jpc.endpoints[t].elementId,this.jpc.suspendedElementType=0===t?dt:pt,this.instance.setHover(this.jpc.suspendedEndpoint,!1),this.floatingEndpoint.referenceEndpoint=this.jpc.suspendedEndpoint,this.floatingEndpoint.mergeParameters(this.jpc.suspendedEndpoint.parameters),this.jpc.endpoints[t]=this.floatingEndpoint,this.jpc.addClass(this.instance.draggingClass),this.floatingId=this.placeholderInfo.id,this.floatingIndex=t,this.instance._refreshEndpoint(this.ep)}},{key:"_shouldStartDrag",value:function(){var t=!0;this.ep.enabled||(t=!1),null!=this.jpc||this.ep.isSource||this.ep.isTemporarySource||(t=!1),!this.ep.isSource||!this.ep.isFull()||null!=this.jpc&&this.ep.dragAllowedWhenFull||(t=!1),null==this.jpc||this.jpc.isDetachable(this.ep)||(this.ep.isFull()?t=!1:this.jpc=null);var e={},n=this.instance.checkCondition(null==this.jpc?"beforeDrag":"beforeStartDetach",{endpoint:this.ep,source:this.ep.element,sourceId:this.ep.elementId,connection:this.jpc});return!1===n?t=!1:"object"===i(n)?b(e=n,this.payload||{}):e=this.payload||{},[t,e]}},{key:"_createFloatingEndpoint",value:function(t){var e=this.ep.endpoint;null!=this.ep.edgeType&&(e=this.instance._deriveEndpointAndAnchorSpec(this.ep.edgeType).endpoints[1]),this.floatingEndpoint=function(t,e,n,i,r,o){var a=function(t,e,n){return new Ei(t,e,n)}(o,i,r),s={paintStyle:t.getPaintStyle(),preparedAnchor:a,element:i,scope:t.scope,cssClass:[Tt,t.cssClass].join(" ")};null!=e&&(Z(e,wi)?s.existingEndpoint=e:s.endpoint=e);var l=o._internal_newEndpoint(s);return o._paintEndpoint(l,{}),l}(this.ep,e,0,this.placeholderInfo.element,this.placeholderInfo.id,this.instance),this.floatingAnchor=this.floatingEndpoint._anchor,this.floatingEndpoint.deleteOnEmpty=!0,this.floatingElement=this.floatingEndpoint.endpoint.canvas,this.floatingId=this.instance.getId(this.floatingElement)}},{key:"_populateTargets",value:function(t,e){var n,i,r,o=this,a=this.jpc&&this.jpc.endpoints[0]===this.ep;if(A(this.instance.getContainer().querySelectorAll([".",Mt,"[",xt,this.ep.scope,"]:not(.",Tt,")"].join("")),(function(e){if(!(null==o.jpc&&e===t||e===o.floatingElement||null==o.jpc&&e.jtk.endpoint.isFull())&&(a&&e.jtk.endpoint.isSource||!a&&e.jtk.endpoint.isTarget)){var i=st(e,o.instance),r=lt(e,o.instance);n={x:i.x,y:i.y,w:r.w,h:r.h},o.endpointDropTargets.push({el:e,targetEl:e,r:n,endpoint:e.jtk.endpoint,def:null}),o.instance.addClass(e,di)}})),a){var s=P(this.instance.sourceSelectors,(function(t){return t.isEnabled()&&(null==t.def.def.scope||t.def.def.scope===o.ep.scope)}));null!=s&&A(this._findTargetZones(s),(function(t){if(t.getAttribute(ie)!==an){var e=t.getAttribute(re);if(null!=e&&e!==o.ep.scope)return;var n={r:null,el:t};n.targetEl=X(t,Ut,o.instance.getContainer(),!0);var i=st(n.el,o.instance),r=lt(n.el,o.instance);n.r={x:i.x,y:i.y,w:r.w,h:r.h},null!=s.def.def.rank&&(n.rank=s.def.def.rank),n.def=s.def,o.endpointDropTargets.push(n),o.instance.addClass(n.targetEl,di)}}))}else{var l=(r=function(t){var e=[];if(t)for(var n=0;n<t.length;n++)t[n].isEnabled()&&e.push(n);return e}(i=this.instance.targetSelectors),r.map((function(t){return i[t]})));l.forEach((function(t){A(o._findTargetZones(t),(function(n){if(n.getAttribute(ie)!==an){var i=n.getAttribute(re);if(null!=i&&i!==o.ep.scope)return;var r={r:null,el:n};if(null!=t.def.def.parentSelector&&(r.targetEl=X(n,t.def.def.parentSelector,o.instance.getContainer(),!0)),null==r.targetEl&&(r.targetEl=X(n,Ut,o.instance.getContainer(),!0)),(!1===t.def.def.allowLoopback||o._activeDefinition&&!1===o._activeDefinition.def.def.allowLoopback)&&r.targetEl===o.ep.element)return;if(null!=t.def.def.canAcceptNewConnection&&!t.def.def.canAcceptNewConnection(r.targetEl,e))return;var a=t.def.def.maxConnections;if(null!=a&&-1!==a&&o.instance.select({target:r.targetEl}).length>=a)return;var s=st(n,o.instance),l=lt(n,o.instance);r.r={x:s.x,y:s.y,w:l.w,h:l.h},r.def=t.def,null!=t.def.def.rank&&(r.rank=t.def.def.rank),o.endpointDropTargets.push(r),o.instance.addClass(r.targetEl,di)}}))}))}this.endpointDropTargets.sort((function(t,e){if(t.targetEl._isJsPlumbGroup&&!e.targetEl._isJsPlumbGroup)return 1;if(!t.targetEl._isJsPlumbGroup&&e.targetEl._isJsPlumbGroup)return-1;if(t.targetEl._isJsPlumbGroup&&e.targetEl._isJsPlumbGroup){if(o.instance.groupManager.isAncestor(t.targetEl._jsPlumbGroup,e.targetEl._jsPlumbGroup))return-1;if(o.instance.groupManager.isAncestor(e.targetEl._jsPlumbGroup,t.targetEl._jsPlumbGroup))return 1}else{if(null==t.rank||null==e.rank)return 0;if(t.rank>e.rank)return-1;if(t.rank<e.rank)return 1}}))}},{key:"_findTargetZones",value:function(t){var e;if("any"===t.redrop){var n=this.instance.targetSelectors.map((function(t){return t.selector}));n.push.apply(n,g(this.instance.sourceSelectors.map((function(t){return t.selector})))),n.push(Ut),e=n.join(",")}else if(t.redrop===Ki)e=t.selector;else if("anySource"===t.redrop)e=this.instance.sourceSelectors.map((function(t){return t.selector})).join(",");else if("anyTarget"===t.redrop)e=this.instance.targetSelectors.map((function(t){return t.selector})).join(",");else if("anySourceOrTarget"===t.redrop){var i=this.instance.targetSelectors.map((function(t){return t.selector}));i.push.apply(i,g(this.instance.sourceSelectors.map((function(t){return t.selector})))),e=i.join(",")}return this.instance.getContainer().querySelectorAll(e)}},{key:"onStart",value:function(t){this.endpointDropTargets.length=0,this.currentDropTarget=null,this._stopped=!1;var e=t.drag.getDragElement();if(this.ep=e.jtk.endpoint,!this.ep)return!1;this.endpointRepresentation=this.ep.endpoint,this.canvasElement=this.endpointRepresentation.canvas,this.jpc=this.ep.connectorSelector();var n=f(this._shouldStartDrag(),2),i=n[0],r=n[1];if(!1===i)return this._stopped=!0,!1;this.instance.setHover(this.ep,!1),this.instance.isConnectionBeingDragged=!0,this.jpc&&!this.ep.isFull()&&this.ep.isSource&&(this.jpc=null),this._createFloatingEndpoint(this.canvasElement),this._populateTargets(this.canvasElement,t.e),null==this.jpc?this.startNewConnectionDrag(this.ep.scope,r):this.startExistingConnectionDrag(),this._registerFloatingConnection(this.placeholderInfo,this.jpc),this.instance.currentlyDragging=!0}},{key:"onBeforeStart",value:function(t){this.payload=t.e.payload||{}}},{key:"onDrag",value:function(t){if(this._stopped)return!0;if(this.placeholderInfo.element){var e=lt(this.floatingElement,this.instance);this.instance.setElementPosition(this.placeholderInfo.element,t.pos.x,t.pos.y);for(var n,i,r={x:t.pos.x,y:t.pos.y,w:e.w,h:e.h},o=0;o<this.endpointDropTargets.length;o++)if(Vn(r,this.endpointDropTargets[o].r)){n=this.endpointDropTargets[o];break}n!==this.currentDropTarget&&null!=this.currentDropTarget&&(i=this._getFloatingAnchorIndex(),this.instance.removeClass(this.currentDropTarget.el,pi),this.currentDropTarget.endpoint&&(this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.out()),null!=n&&(this.instance.addClass(n.el,pi),i=this._getFloatingAnchorIndex(),null!=n.endpoint&&(n.endpoint.isSource&&0===i||n.endpoint.isTarget&&0!==i||this.jpc.suspendedEndpoint&&n.endpoint.referenceEndpoint&&n.endpoint.referenceEndpoint.id===this.jpc.suspendedEndpoint.id?(this.instance.checkCondition("checkDropAllowed",{sourceEndpoint:this.jpc.endpoints[i],targetEndpoint:n.endpoint.endpoint,connection:this.jpc})?(n.endpoint.endpoint.addClass(this.instance.endpointDropAllowedClass),n.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)):(n.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),n.endpoint.endpoint.addClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.over(n.endpoint),this.instance._paintConnection(this.jpc)):n=null)),this.currentDropTarget=n}}},{key:"_maybeCleanup",value:function(t){t._mtNew&&0===t.connections.length?this.instance.deleteEndpoint(t):delete t._mtNew}},{key:"_reattachOrDiscard",value:function(t){var e=null!=this.jpc.suspendedEndpoint,n=this._getFloatingAnchorIndex();return e&&this._shouldReattach()?(0===n?(this.jpc.source=this.jpc.suspendedElement,this.jpc.sourceId=this.jpc.suspendedElementId):(this.jpc.target=this.jpc.suspendedElement,this.jpc.targetId=this.jpc.suspendedElementId),this._doForceReattach(n),!0):(this._discard(n,t),!1)}},{key:"onStop",value:function(t){var e=this,n=t.e;this.instance.isConnectionBeingDragged=!1,this.instance.currentlyDragging=!1;var i=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.join(" ")}(pi,di);if(A(this.instance.getContainer().querySelectorAll(Ji),(function(t){e.instance.removeClass(t,i)})),this.jpc&&null!=this.jpc.endpoints){var r,o=null!=this.jpc.suspendedEndpoint,a=this._getFloatingAnchorIndex(),s=this.jpc.suspendedEndpoint;if(null!=this.currentDropTarget)if(null==(r=this._getDropEndpoint(t,this.jpc)))this._reattachOrDiscard(t.e);else if(s&&s.id===r.id)this._doForceReattach(a);else if(r.enabled)if(r.isFull())r.fire(Vt,{endpoint:this,connection:this.jpc,maxConnections:this.instance.defaults.maxConnections},n),this._reattachOrDiscard(t.e);else{0===a?(this.jpc.source=r.element,this.jpc.sourceId=r.elementId):(this.jpc.target=r.element,this.jpc.targetId=r.elementId);var l=!0;o&&this.jpc.suspendedEndpoint.id!==r.id&&(this.jpc.isDetachAllowed(this.jpc)&&this.jpc.endpoints[a].isDetachAllowed(this.jpc)&&this.jpc.suspendedEndpoint.isDetachAllowed(this.jpc)&&this.instance.checkCondition("beforeDetach",this.jpc)||(l=!1)),(l=l&&r.isDropAllowed(this.jpc.sourceId,this.jpc.targetId,this.jpc.scope,this.jpc,r))?this._drop(r,a,n,l):this._reattachOrDiscard(t.e)}else this._reattachOrDiscard(t.e);else this._reattachOrDiscard(t.e);this.instance._refreshEndpoint(this.ep),this.ep.removeClass(this.instance.draggingClass),this._cleanupDraggablePlaceholder(),this.jpc.removeClass(this.instance.draggingClass),delete this.jpc.suspendedEndpoint,delete this.jpc.suspendedElement,delete this.jpc.suspendedElementType,delete this.jpc.suspendedElementId,delete this.jpc.suspendedIndex,delete this.floatingId,delete this.floatingIndex,delete this.floatingElement,delete this.floatingEndpoint,delete this.floatingAnchor,delete this.jpc.pending,null!=r&&this._maybeCleanup(r)}}},{key:"_getSourceDefinition",value:function(t){for(var e,n=this.instance.getContainer(),i=0;i<this.instance.sourceSelectors.length;i++)if((e=this.instance.sourceSelectors[i]).isEnabled()&&!1!==Xi(t,n,e.selector,this.instance,e.exclude))return e}},{key:"_getDropEndpoint",value:function(t,e){var n;if(null==this.currentDropTarget.endpoint){var i=this.currentDropTarget.def,r=t.e.target||t.e.srcElement;if(null==i)return null;var o=this.currentDropTarget.targetEl,a=So(t.e,o,this.instance.currentZoom),s=this.instance._deriveEndpointAndAnchorSpec(e.getType().join(" "),!0),l=s.endpoints?b(t,{endpoint:i.def.endpoint||s.endpoints[1],cssClass:i.def.cssClass||"",source:!0===i.def.source,target:!0===i.def.target}):t,c=this.instance.validAnchorsSpec(s.anchors)?s.anchors:this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors:null,u=i.def.anchor,h=i.def.anchorPositionFinder?i.def.anchorPositionFinder(o,a,i.def,t.e):null,d=null!=h?h:null!=u?u:null!=c&&null!=c[1]?c[1]:null;if(null!=d&&(l=b(l,{anchor:d})),null!=i.def.portId&&(l.portId=i.def.portId),(l=T(l,i.def.parameterExtractor?i.def.parameterExtractor(this.currentDropTarget.el,r,t.e):{})).element=o,(n=this.instance._internal_newEndpoint(l))._mtNew=!0,n.deleteOnEmpty=!0,i.def.parameters&&n.mergeParameters(i.def.parameters),i.def.extract){var p={};for(var f in i.def.extract){var g=this.currentDropTarget.el.getAttribute(f);g&&(p[i.def.extract[f]]=g)}n.mergeParameters(p)}}else n=this.currentDropTarget.endpoint;return n&&(n.removeClass(this.instance.endpointDropAllowedClass),n.removeClass(this.instance.endpointDropForbiddenClass)),n}},{key:"_doForceReattach",value:function(t){this.floatingEndpoint.detachFromConnection(this.jpc,null,!0),this.jpc.endpoints[t]=this.jpc.suspendedEndpoint,this.instance.setHover(this.jpc,!1),this.jpc._forceDetach=!0,this.jpc.suspendedEndpoint.addConnection(this.jpc),this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.suspendedEndpoint.elementId,this.jpc,this.jpc.suspendedEndpoint.element,t),this.instance.deleteEndpoint(this.floatingEndpoint),this.instance.repaint(this.jpc.source),delete this.jpc._forceDetach}},{key:"_shouldReattach",value:function(){if(this.jpc.isReattach()||this.jpc._forceReattach)return!0;var t=this.jpc.suspendedEndpoint,e=this.jpc.suspendedElementType==dt?1:0,n=this.jpc.endpoints[e];return!E(!0,!1,[[t,Bt,[this.jpc]],[n,Bt,[this.jpc]],[this.jpc,Bt,[this.jpc]],[this.instance,kt,[jt,this.jpc]]])}},{key:"_discard",value:function(t,e){this.jpc.pending?this.instance.fire("connection:abort",this.jpc,e):(0===t?(this.jpc.source=this.jpc.suspendedEndpoint.element,this.jpc.sourceId=this.jpc.suspendedEndpoint.elementId):(this.jpc.target=this.jpc.suspendedEndpoint.element,this.jpc.targetId=this.jpc.suspendedEndpoint.elementId),this.jpc.endpoints[t]=this.jpc.suspendedEndpoint),this.floatingEndpoint&&this.floatingEndpoint.detachFromConnection(this.jpc),this.instance.deleteConnection(this.jpc,{originalEvent:e,force:!0})}},{key:"_drop",value:function(t,e,n,i){if(this.jpc.endpoints[e].detachFromConnection(this.jpc),this.jpc.suspendedEndpoint&&this.jpc.suspendedEndpoint.detachFromConnection(this.jpc),this.jpc.endpoints[e]=t,t.addConnection(this.jpc),this.jpc.suspendedEndpoint){var r=this.jpc.suspendedEndpoint.elementId;this.instance.fireMoveEvent({index:e,originalSourceId:0===e?r:this.jpc.sourceId,newSourceId:0===e?t.elementId:this.jpc.sourceId,originalTargetId:1===e?r:this.jpc.targetId,newTargetId:1===e?t.elementId:this.jpc.targetId,originalEndpoint:this.jpc.suspendedEndpoint,connection:this.jpc,newEndpoint:t},n)}1===e?this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.targetId,this.jpc,this.jpc.target,1):this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.sourceId,this.jpc,this.jpc.source,0),this.jpc.endpoints[0].finalEndpoint&&(this.jpc.endpoints[0].detachFromConnection(this.jpc),this.jpc.endpoints[0]=this.jpc.endpoints[0].finalEndpoint,this.jpc.endpoints[0].addConnection(this.jpc)),k(i)&&this.jpc.mergeData(i),this._originalAnchorSpec&&(this.jpc.endpoints[0].setAnchor(this._originalAnchorSpec),this._originalAnchorSpec=null),this.instance._finaliseConnection(this.jpc,null,n),this.instance.setHover(this.jpc,!1),this.instance.revalidate(this.jpc.endpoints[0].element)}},{key:"_registerFloatingConnection",value:function(t,e){this.floatingConnections[t.id]=e}},{key:"_getFloatingAnchorIndex",value:function(){return null==this.floatingIndex?1:this.floatingIndex}}]),t}(),er=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),(o=e.call(this,t,i)).instance=t,o.dragSelection=i,s(h(o),"selector",[">",Ke,Ut].join(" ")),s(h(o),"doRevalidate",void 0),o.doRevalidate=o._revalidate.bind(h(o)),o}return a(n,[{key:"reset",value:function(){this.drag.off(we,this.doRevalidate)}},{key:"_revalidate",value:function(t){this.instance.revalidate(t)}},{key:"init",value:function(t){this.drag=t,t.on(we,this.doRevalidate)}},{key:"useGhostProxy",value:function(t,e){var n=e._jsPlumbParentGroup;return null!=n&&!0===n.ghost}},{key:"makeGhostProxy",value:function(t){var e=t,n=e.cloneNode(!0);return n._jsPlumbParentGroup=e._jsPlumbParentGroup,n}}]),n}(gi),nr=function(){function t(e,n){r(this,t),this.instance=e,this.overlay=n,s(this,"htmlElementOverlay",void 0),this.htmlElementOverlay=n}return a(t,null,[{key:"getElement",value:function(t,e,n){if(null==t.canvas){if(n&&e){t.canvas=n(e);var i=t.instance.overlayClass+" "+(t.cssClass?t.cssClass:"");t.instance.addClass(t.canvas,i)}else t.canvas=rt("div",{},t.instance.overlayClass+" "+(t.cssClass?t.cssClass:""));for(var r in t.instance.setAttribute(t.canvas,"jtk-overlay-id",t.id),t.attributes)t.instance.setAttribute(t.canvas,r,t.attributes[r]);t.canvas.style.position=mt,t.instance._appendElement(t.canvas,t.instance.getContainer()),t.instance.getId(t.canvas);var o="translate(-50%, -50%)";t.canvas.style.webkitTransform=o,t.canvas.style.mozTransform=o,t.canvas.style.msTransform=o,t.canvas.style.oTransform=o,t.canvas.style.transform=o,t.isVisible()||(t.canvas.style.display=gt),t.canvas.jtk={overlay:t}}return t.canvas}},{key:"destroy",value:function(t){t.canvas&&t.canvas.parentNode&&t.canvas.parentNode.removeChild(t.canvas),delete t.canvas,delete t.cachedDimensions}},{key:"_getDimensions",value:function(t,e){return(null==t.cachedDimensions||e)&&(t.cachedDimensions={w:1,h:1}),t.cachedDimensions}}]),t}(),ir=function(){function t(){r(this,t),s(this,"_listeners",{}),s(this,"eventsSuspended",!1),s(this,"tick",!1),s(this,"eventsToDieOn",{ready:!0}),s(this,"queue",[])}return a(t,[{key:"fire",value:function(t,e,n){var i=null;if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var r=this._listeners[t].length,o=0,a=!1;if(!this.shouldFireEvent||this.shouldFireEvent(t,e,n))for(;!a&&o<r&&!1!==i;){if(this.eventsToDieOn[t])this._listeners[t][o](e,n);else try{i=this._listeners[t][o](e,n)}catch(e){$("jsPlumb: fire failed for event "+t+" : "+(e.message||e))}o++,null!=this._listeners&&null!=this._listeners[t]||(a=!0)}}this.tick=!1,this._drain()}return i}},{key:"_drain",value:function(){var t=this.queue.pop();t&&this.fire.apply(this,t)}},{key:"unbind",value:function(t,e){if(0===arguments.length)this._listeners={};else if(1===arguments.length){if("string"==typeof t)delete this._listeners[t];else if(t.__jsPlumb){var n;for(var i in t.__jsPlumb)n=t.__jsPlumb[i],I(this._listeners[n]||[],t)}}else 2===arguments.length&&I(this._listeners[t]||[],e);return this}},{key:"getListener",value:function(t){return this._listeners[t]||[]}},{key:"isSuspendEvents",value:function(){return this.eventsSuspended}},{key:"setSuspendEvents",value:function(t){this.eventsSuspended=t}},{key:"bind",value:function(t,e,n){var i=this,r=function(t){R(i._listeners,t,e,n),e.__jsPlumb=e.__jsPlumb||{},e.__jsPlumb[B()]=t};if("string"==typeof t)r(t);else if(null!=t.length)for(var o=0;o<t.length;o++)r(t[o]);return this}},{key:"silently",value:function(t){this.setSuspendEvents(!0);try{t()}catch(t){$("Cannot execute silent function "+t)}this.setSuspendEvents(!1)}}]),t}();function rr(t){var e=null;return(e=S(t)?{type:t,options:{}}:t).options.id=e.options.id||B(),e}!function(t){l(n,t);var e=d(n);function n(){return r(this,n),e.apply(this,arguments)}a(n,[{key:"shouldFireEvent",value:function(t,e,n){return!0}}])}(ir);var or=function(t){l(n,t);var e=d(n);function n(t,i,o){var a;for(var l in r(this,n),(a=e.call(this)).instance=t,a.component=i,s(h(a),"id",void 0),s(h(a),"type",void 0),s(h(a),"cssClass",void 0),s(h(a),"visible",!0),s(h(a),"location",void 0),s(h(a),"events",void 0),s(h(a),"attributes",void 0),o=o||{},a.id=o.id||B(),a.cssClass=o.cssClass||"",a.setLocation(o.location),a.events=o.events||{},a.attributes=o.attributes||{},a.events)a.bind(l,a.events[l]);return a}return a(n,[{key:"setLocation",value:function(t){var e=null==this.location?.5:this.location;if(null!=t)try{var n="string"==typeof t?parseFloat(t):t;isNaN(n)||(e=n)}catch(t){}this.location=e}},{key:"shouldFireEvent",value:function(t,e,n){return!0}},{key:"setVisible",value:function(t){this.visible=t,this.instance.setOverlayVisible(this,t)}},{key:"isVisible",value:function(){return this.visible}}]),n}(ir),ar={},sr=function(t,e,n,i){var r=ar[e];if(r)return new r(t,n,i);throw{message:"jsPlumb: unknown overlay type '"+e+"'"}},lr=function(t,e){ar[t]=e},cr=function(t){l(n,t);var e=d(n);function n(t,i,o){var a;return r(this,n),(a=e.call(this,t,i,o)).instance=t,a.component=i,s(h(a),"label",void 0),s(h(a),"labelText",void 0),s(h(a),"type",n.type),s(h(a),"cachedDimensions",void 0),o=o||{label:""},a.setLabel(o.label),a}return a(n,[{key:"getLabel",value:function(){return C(this.label)?this.label(this):this.labelText}},{key:"setLabel",value:function(t){this.label=t,this.labelText=null,this.instance.updateLabel(this)}},{key:"getDimensions",value:function(){return{w:1,h:1}}},{key:"updateFrom",value:function(t){null!=t.label&&this.setLabel(t.label),null!=t.location&&(this.setLocation(t.location),this.instance.updateLabel(this))}}]),n}(or);function ur(t){return t.type===cr.type}function hr(t){return null==t?null:t.split(" ").filter((function(t){return null!=t&&t.length>0}))}function dr(t,e,n){for(var i in e)t[i]=n}s(cr,"type","Label"),lr(cr.type,cr);var pr="__default",fr="__label",gr="overlay",mr="remove";function vr(t,e){if(t.getDefaultType){var n=t.getTypeDescriptor(),i={},r=t.getDefaultType(),o=b({},r);dr(i,r,pr),t._types.forEach((function(e){if(e!==pr){var r=t.instance.getType(e,n);if(null!=r){var a=new Set(["connector","anchor","anchors"]);if("override"===r.mergeStrategy)for(var s in r)a.add(s);o=T(o,r,["cssClass"],(l=[],a.forEach((function(t){l.push(t)})),l)),dr(i,r,e)}}var l})),e&&(a=e,s="_",o=function t(e){if(null!=e){if(S(e))return function(t){var e=t.match(/(\${.*?})/g);if(null!=e)for(var n=0;n<e.length;n++){var i=a[e[n].substring(2,e[n].length-1)]||"";null!=i&&(t=t.replace(e[n],i))}if(null!=(e=t.match(/({{.*?}})/g)))for(var r=0;r<e.length;r++){var o=a[e[r].substring(2,e[r].length-2)]||"";null!=o&&(t=t.replace(e[r],o))}return t}(e);if(!C(e)||l||null!=s&&0!==(e.name||"").indexOf(s)){if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++)n.push(t(e[i]));return n}if(k(e)){var r={};for(var o in e)r[o]=t(e[o]);return r}return e}return e(a)}}(o)),t.applyType(o,i)}var a,s,l}function yr(t,e){var n=t.instance.getType(e,t.getTypeDescriptor());null!=n&&n.cssClass&&t.removeClass(n.cssClass)}function br(t){if(t.paintStyle&&t.hoverPaintStyle){var e={};b(e,t.paintStyle),b(e,t.hoverPaintStyle),t.hoverPaintStyle=e}}var wr=function(t){l(n,t);var e=d(n);function n(t,i){var o;if(r(this,n),(o=e.call(this)).instance=t,s(h(o),"defaultLabelLocation",.5),s(h(o),"overlays",{}),s(h(o),"overlayPositions",{}),s(h(o),"overlayPlacements",{}),s(h(o),"clone",void 0),s(h(o),"deleted",void 0),s(h(o),"segment",void 0),s(h(o),"x",void 0),s(h(o),"y",void 0),s(h(o),"w",void 0),s(h(o),"h",void 0),s(h(o),"id",void 0),s(h(o),"visible",!0),s(h(o),"typeId",void 0),s(h(o),"params",{}),s(h(o),"paintStyle",void 0),s(h(o),"hoverPaintStyle",void 0),s(h(o),"paintStyleInUse",void 0),s(h(o),"_hover",!1),s(h(o),"lastPaintedAt",void 0),s(h(o),"data",void 0),s(h(o),"_defaultType",void 0),s(h(o),"events",void 0),s(h(o),"parameters",void 0),s(h(o),"_types",void 0),s(h(o),"_typeCache",void 0),s(h(o),"cssClass",void 0),s(h(o),"hoverClass",void 0),s(h(o),"beforeDetach",void 0),s(h(o),"beforeDrop",void 0),i=i||{},o.cssClass=i.cssClass||"",o.hoverClass=i.hoverClass||t.defaults.hoverClass,o.beforeDetach=i.beforeDetach,o.beforeDrop=i.beforeDrop,o._types=new Set,o._typeCache={},o.parameters=M(i.parameters||{}),o.id=i.id||o.getIdPrefix()+(new Date).getTime(),o._defaultType={parameters:o.parameters,scope:i.scope||o.instance.defaultScope,overlays:{}},i.events)for(var a in i.events)o.bind(a,i.events[a]);o.clone=function(){var e=Object.create(o.constructor.prototype);return o.constructor.apply(e,[t,i]),e},o.overlays={},o.overlayPositions={};var l=i.overlays||[],c={},u=o.getDefaultOverlayKey();if(u){var d=o.instance.defaults[u];d&&l.push.apply(l,g(d));for(var p=0;p<l.length;p++){var f=rr(l[p]);c[f.options.id]=f}}return o._defaultType.overlays=c,i.label&&(o.getDefaultType().overlays[fr]={type:cr.type,options:{label:i.label,location:i.labelLocation||o.defaultLabelLocation,id:fr,cssClass:"jtk-default-label"}}),o}return a(n,[{key:"isDetachAllowed",value:function(t){var e=!0;if(this.beforeDetach)try{e=this.beforeDetach(t)}catch(t){$("jsPlumb: beforeDetach callback failed",t)}return e}},{key:"isDropAllowed",value:function(t,e,n,i,r){var o,a={sourceId:t,targetId:e,scope:n,connection:i,dropEndpoint:r};if(this.beforeDrop)try{o=this.beforeDrop(a)}catch(t){$("jsPlumb: beforeDrop callback failed",t)}else o=this.instance.checkCondition(zt,a);return o}},{key:"getDefaultType",value:function(){return this._defaultType}},{key:"appendToDefaultType",value:function(t){for(var e in t)this._defaultType[e]=t[e]}},{key:"getId",value:function(){return this.id}},{key:"cacheTypeItem",value:function(t,e,n){this._typeCache[n]=this._typeCache[n]||{},this._typeCache[n][t]=e}},{key:"getCachedTypeItem",value:function(t,e){return this._typeCache[e]?this._typeCache[e][t]:null}},{key:"setType",value:function(t,e){this.clearTypes(),(hr(t)||[]).forEach(this._types.add,this._types),vr(this,e)}},{key:"getType",value:function(){return Array.from(this._types.keys())}},{key:"reapplyTypes",value:function(t){vr(this,t)}},{key:"hasType",value:function(t){return this._types.has(t)}},{key:"addType",value:function(t,e){var n=hr(t),i=!1;if(null!=n){for(var r=0,o=n.length;r<o;r++)this._types.has(n[r])||(this._types.add(n[r]),i=!0);i&&vr(this,e)}}},{key:"removeType",value:function(t,e){var n,i=this,r=hr(t),o=!1;if(null!=r){for(var a=0,s=r.length;a<s;a++)n=r[a],o=!!i._types.has(n)&&(yr(i,n),i._types.delete(n),!0)||o;o&&vr(this,e)}}},{key:"clearTypes",value:function(t){var e=this;this._types.forEach((function(t){yr(e,t)})),this._types.clear(),vr(this,t)}},{key:"toggleType",value:function(t,e){var n=hr(t);if(null!=n){for(var i=0,r=n.length;i<r;i++)this._types.has(n[i])?(yr(this,n[i]),this._types.delete(n[i])):this._types.add(n[i]);vr(this,e)}}},{key:"applyType",value:function(t,e){if(this.setPaintStyle(t.paintStyle),this.setHoverPaintStyle(t.hoverPaintStyle),this.mergeParameters(t.parameters),this.paintStyleInUse=this.getPaintStyle(),t.overlays){var n,i={};for(n in t.overlays){var r=this.overlays[t.overlays[n].options.id];if(r)r.updateFrom(t.overlays[n].options),i[t.overlays[n].options.id]=!0,this.instance.reattachOverlay(r,this);else{var o=this.getCachedTypeItem(gr,t.overlays[n].options.id);null!=o?(this.instance.reattachOverlay(o,this),o.setVisible(!0),o.updateFrom(t.overlays[n].options),this.overlays[o.id]=o):o=this.addOverlay(t.overlays[n]),i[o.id]=!0}}for(n in this.overlays)null==i[this.overlays[n].id]&&this.removeOverlay(this.overlays[n].id,!0)}}},{key:"setPaintStyle",value:function(t){this.paintStyle=t,this.paintStyleInUse=this.paintStyle,br(this)}},{key:"getPaintStyle",value:function(){return this.paintStyle}},{key:"setHoverPaintStyle",value:function(t){this.hoverPaintStyle=t,br(this)}},{key:"getHoverPaintStyle",value:function(){return this.hoverPaintStyle}},{key:"destroy",value:function(){for(var t in this.overlays)this.instance.destroyOverlay(this.overlays[t]);this.overlays={},this.overlayPositions={},this.unbind(),this.clone=null}},{key:"isHover",value:function(){return this._hover}},{key:"mergeParameters",value:function(t){null!=t&&b(this.parameters,t)}},{key:"setVisible",value:function(t){this.visible=t,t?this.showOverlays():this.hideOverlays()}},{key:"isVisible",value:function(){return this.visible}},{key:"setAbsoluteOverlayPosition",value:function(t,e){this.overlayPositions[t.id]=e}},{key:"getAbsoluteOverlayPosition",value:function(t){return this.overlayPositions?this.overlayPositions[t.id]:null}},{key:"_clazzManip",value:function(t,e){for(var n in this.overlays)"add"===t?this.instance.addOverlayClass(this.overlays[n],e):t===mr&&this.instance.removeOverlayClass(this.overlays[n],e)}},{key:"addClass",value:function(t,e){var n=(this.cssClass||"").split(" ");n.push(t),this.cssClass=n.join(" "),this._clazzManip("add",t)}},{key:"removeClass",value:function(t,e){var n=(this.cssClass||"").split(" ");this.cssClass=n.filter((function(e){return e!==t})).join(" "),this._clazzManip(mr,t)}},{key:"getClass",value:function(){return this.cssClass}},{key:"shouldFireEvent",value:function(t,e,n){return!0}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(t){this.data=t||{}}},{key:"mergeData",value:function(t){this.data=b(this.data,t)}},{key:"addOverlay",value:function(t){var e=function(t,e){var n=null;if(S(e))n=sr(t.instance,e,t,{});else if(null!=e.type&&null!=e.options){var i=e,r=b({},i.options);n=sr(t.instance,i.type,t,r)}else n=e;return n.id=n.id||B(),t.cacheTypeItem(gr,n,n.id),t.overlays[n.id]=n,n}(this,t);if(this.getData&&e.type===cr.type&&!S(t)){var n=this.getData(),i=t.options;if(n){var r=n[i.labelLocationAttribute||"labelLocation"];r&&(e.location=r)}}return e}},{key:"getOverlay",value:function(t){return this.overlays[t]}},{key:"getOverlays",value:function(){return this.overlays}},{key:"hideOverlay",value:function(t){var e=this.getOverlay(t);e&&e.setVisible(!1)}},{key:"hideOverlays",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i in e=e||[],this.overlays)0!==e.length&&-1===e.indexOf(i)||this.overlays[i].setVisible(!1)}},{key:"showOverlay",value:function(t){var e=this.getOverlay(t);e&&e.setVisible(!0)}},{key:"showOverlays",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i in e=e||[],this.overlays)0!==e.length&&-1===e.indexOf(i)||this.overlays[i].setVisible(!0)}},{key:"removeAllOverlays",value:function(){for(var t in this.overlays)this.instance.destroyOverlay(this.overlays[t]);this.overlays={},this.overlayPositions=null,this.overlayPlacements={}}},{key:"removeOverlay",value:function(t,e){var n=this.overlays[t];n&&(n.setVisible(!1),e||this.instance.destroyOverlay(n),delete this.overlays[t],this.overlayPositions&&delete this.overlayPositions[t],this.overlayPlacements&&delete this.overlayPlacements[t])}},{key:"removeOverlays",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,r=e.length;i<r;i++)this.removeOverlay(arguments[i])}},{key:"getLabel",value:function(){var t=this.getLabelOverlay();return null!=t?t.getLabel():null}},{key:"getLabelOverlay",value:function(){return this.getOverlay(fr)}},{key:"setLabel",value:function(t){var e,n,i,r=this.getLabelOverlay();if(r)if(S(t)||C(t))r.setLabel(t);else{var o=t;o.label&&r.setLabel(o.label),o.location&&(r.location=o.location)}else e=this,i=b({cssClass:(n=S(t)||C(t)?{label:t}:t).cssClass,id:fr,component:e},n),r=new cr(e.instance,e,i),this.overlays[fr]=r}}]),n}(ir),Sr=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],xr=function(t){l(n,t);var e=d(n);function n(t,i){var o;r(this,n),(o=e.call(this,t,i)).instance=t,s(h(o),"connections",[]),s(h(o),"endpoint",void 0),s(h(o),"element",void 0),s(h(o),"elementId",void 0),s(h(o),"dragAllowedWhenFull",!0),s(h(o),"timestamp",void 0),s(h(o),"portId",void 0),s(h(o),"maxConnections",void 0),s(h(o),"proxiedBy",void 0),s(h(o),"connectorClass",void 0),s(h(o),"connectorHoverClass",void 0),s(h(o),"finalEndpoint",void 0),s(h(o),"enabled",!0),s(h(o),"isSource",void 0),s(h(o),"isTarget",void 0),s(h(o),"isTemporarySource",void 0),s(h(o),"connectionCost",1),s(h(o),"connectionsDirected",void 0),s(h(o),"connectionsDetachable",void 0),s(h(o),"reattachConnections",void 0),s(h(o),"currentAnchorClass",void 0),s(h(o),"referenceEndpoint",void 0),s(h(o),"edgeType",void 0),s(h(o),"connector",void 0),s(h(o),"connectorOverlays",void 0),s(h(o),"connectorStyle",void 0),s(h(o),"connectorHoverStyle",void 0),s(h(o),"deleteOnEmpty",void 0),s(h(o),"uuid",void 0),s(h(o),"scope",void 0),s(h(o),"_anchor",void 0),s(h(o),"defaultLabelLocation",[.5,.5]),o.appendToDefaultType({edgeType:i.edgeType,maxConnections:null==i.maxConnections?o.instance.defaults.maxConnections:i.maxConnections,paintStyle:i.paintStyle||o.instance.defaults.endpointStyle,hoverPaintStyle:i.hoverPaintStyle||o.instance.defaults.endpointHoverStyle,connectorStyle:i.connectorStyle,connectorHoverStyle:i.connectorHoverStyle,connectorClass:i.connectorClass,connectorHoverClass:i.connectorHoverClass,connectorOverlays:i.connectorOverlays,connector:i.connector}),o.enabled=!(!1===i.enabled),o.visible=!0,o.element=i.element,o.uuid=i.uuid,o.portId=i.portId,o.elementId=i.elementId,o.connectionCost=null==i.connectionCost?1:i.connectionCost,o.connectionsDirected=i.connectionsDirected,o.currentAnchorClass="",o.events={},o.connectorOverlays=i.connectorOverlays,o.connectorStyle=i.connectorStyle,o.connectorHoverStyle=i.connectorHoverStyle,o.connector=i.connector,o.edgeType=i.edgeType,o.connectorClass=i.connectorClass,o.connectorHoverClass=i.connectorHoverClass,o.deleteOnEmpty=!0===i.deleteOnEmpty,o.isSource=i.source||!1,o.isTemporarySource=i.isTemporarySource||!1,o.isTarget=i.target||!1,o.connections=i.connections||[],o.scope=i.scope||t.defaultScope,o.timestamp=null,o.reattachConnections=i.reattachConnections||t.defaults.reattachConnections,o.connectionsDetachable=t.defaults.connectionsDetachable,!1===i.connectionsDetachable&&(o.connectionsDetachable=!1),o.dragAllowedWhenFull=!1!==i.dragAllowedWhenFull,i.onMaxConnections&&o.bind(Vt,i.onMaxConnections);var a=i.endpoint||i.existingEndpoint||t.defaults.endpoint;if(o.setEndpoint(a),null!=i.preparedAnchor)o.setPreparedAnchor(i.preparedAnchor);else{var l=i.anchor?i.anchor:i.anchors?i.anchors:t.defaults.anchor||ee.Top;o.setAnchor(l)}var c=[rn,i.type||""].join(" ");return o.addType(c,i.data),o}return a(n,[{key:"getIdPrefix",value:function(){return"_jsplumb_e"}},{key:"getTypeDescriptor",value:function(){return"endpoint"}},{key:"getXY",value:function(){return{x:this.endpoint.x,y:this.endpoint.y}}},{key:"getDefaultOverlayKey",value:function(){return"endpointOverlays"}},{key:"_updateAnchorClass",value:function(){var t=this._anchor&&this._anchor.cssClass;if(null!=t&&t.length>0){var e=this.instance.endpointAnchorClassPrefix+"-"+this.currentAnchorClass;this.currentAnchorClass=t;var n=this.instance.endpointAnchorClassPrefix+(this.currentAnchorClass?"-"+this.currentAnchorClass:"");e!==n&&(this.removeClass(e),this.addClass(n),this.instance.removeClass(this.element,e),this.instance.addClass(this.element,n))}}},{key:"setPreparedAnchor",value:function(t){return this.instance.router.setAnchor(this,t),this._updateAnchorClass(),this}},{key:"_anchorLocationChanged",value:function(t){this.fire("anchor:changed",{endpoint:this,anchor:t}),this._updateAnchorClass()}},{key:"setAnchor",value:function(t){var e=this.instance.router.prepareAnchor(t);return this.setPreparedAnchor(e),this}},{key:"addConnection",value:function(t){this.connections.push(t),this.instance._refreshEndpoint(this)}},{key:"detachFromConnection",value:function(t,e,n){(e=null==e?this.connections.indexOf(t):e)>=0&&(this.connections.splice(e,1),this.instance._refreshEndpoint(this)),!n&&this.deleteOnEmpty&&0===this.connections.length&&this.instance.deleteEndpoint(this)}},{key:"deleteEveryConnection",value:function(t){for(var e=this.connections.length,n=0;n<e;n++)this.instance.deleteConnection(this.connections[0],t)}},{key:"detachFrom",value:function(t){for(var e=[],n=0;n<this.connections.length;n++)this.connections[n].endpoints[1]!==t&&this.connections[n].endpoints[0]!==t||e.push(this.connections[n]);for(var i=0,r=e.length;i<r;i++)this.instance.deleteConnection(e[0]);return this}},{key:"setVisible",value:function(t,e,i){if(p(c(n.prototype),"setVisible",this).call(this,t),this.endpoint.setVisible(t),t?this.showOverlays():this.hideOverlays(),!e)for(var r=0;r<this.connections.length;r++)if(this.connections[r].setVisible(t),!i){var o=this===this.connections[r].endpoints[0]?1:0;1===this.connections[r].endpoints[o].connections.length&&this.connections[r].endpoints[o].setVisible(t,!0,!0)}}},{key:"applyType",value:function(t,e){p(c(n.prototype),"applyType",this).call(this,t,e),this.setPaintStyle(t.endpointStyle||t.paintStyle),this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle),this.connectorStyle=t.connectorStyle,this.connectorHoverStyle=t.connectorHoverStyle,this.connector=t.connector,this.connectorOverlays=t.connectorOverlays,this.edgeType=t.edgeType,null!=t.maxConnections&&(this.maxConnections=t.maxConnections),t.scope&&(this.scope=t.scope),b(t,Sr),this.instance.applyEndpointType(this,t)}},{key:"destroy",value:function(){p(c(n.prototype),"destroy",this).call(this),this.deleted=!0,null!=this.endpoint&&this.instance.destroyEndpoint(this)}},{key:"isFull",value:function(){return 0===this.maxConnections||!(this.isFloating()||this.maxConnections<0||this.connections.length<this.maxConnections)}},{key:"isFloating",value:function(){return this.instance.router.isFloating(this)}},{key:"isConnectedTo",value:function(t){var e=!1;if(t)for(var n=0;n<this.connections.length;n++)if(this.connections[n].endpoints[1]===t||this.connections[n].endpoints[0]===t){e=!0;break}return e}},{key:"setDragAllowedWhenFull",value:function(t){this.dragAllowedWhenFull=t}},{key:"getUuid",value:function(){return this.uuid}},{key:"connectorSelector",value:function(){return this.connections[0]}},{key:"prepareEndpoint",value:function(t,e){var n,i={cssClass:this.cssClass,endpoint:this};if(Z(t,wi)){var r=t;(n=bi.clone(r)).classes=i.cssClass.split(" ")}else if(S(t))n=bi.get(this,t,i);else{var o=t;b(i,o.options||{}),n=bi.get(this,o.type,i)}return n.typeId=e,n}},{key:"setEndpoint",value:function(t){var e=this.prepareEndpoint(t);this.setPreparedEndpoint(e)}},{key:"setPreparedEndpoint",value:function(t){null!=this.endpoint&&this.instance.destroyEndpoint(this),this.endpoint=t}},{key:"addClass",value:function(t,e){p(c(n.prototype),"addClass",this).call(this,t,e),null!=this.endpoint&&this.endpoint.addClass(t)}},{key:"removeClass",value:function(t,e){p(c(n.prototype),"removeClass",this).call(this,t,e),null!=this.endpoint&&this.endpoint.removeClass(t)}}]),n}(wr),kr="anchors",Cr="connector";function Mr(t,e,n,i,r,o,a){var s;if(e)t.endpoints[n]=e,e.addConnection(t);else{var l=a||t.endpointSpec||t.endpointsSpec[n]||t.instance.defaults.endpoints[n]||t.instance.defaults.endpoint,c=t.endpointStyles[n]||t.endpointStyle||t.instance.defaults.endpointStyles[n]||t.instance.defaults.endpointStyle;null==c.fill&&null!=t.paintStyle&&(c.fill=t.paintStyle.stroke),null==c.outlineStroke&&null!=t.paintStyle&&(c.outlineStroke=t.paintStyle.outlineStroke),null==c.outlineWidth&&null!=t.paintStyle&&(c.outlineWidth=t.paintStyle.outlineWidth);var u=t.endpointHoverStyles[n]||t.endpointHoverStyle||t.endpointHoverStyle||t.instance.defaults.endpointHoverStyles[n]||t.instance.defaults.endpointHoverStyle;null!=t.hoverPaintStyle&&(null==u&&(u={}),null==u.fill&&(u.fill=t.hoverPaintStyle.stroke));var h=t.uuids?t.uuids[n]:null;i=null!=i?i:null!=t.instance.defaults.anchors?t.instance.defaults.anchors[n]:t.instance.defaults.anchor,s=t.instance._internal_newEndpoint({paintStyle:c,hoverPaintStyle:u,endpoint:l,connections:[t],uuid:h,element:r,scope:t.scope,anchor:i,reattachConnections:t.reattach||t.instance.defaults.reattachConnections,connectionsDetachable:t.detachable||t.instance.defaults.connectionsDetachable}),t.instance._refreshEndpoint(s),null==e&&(s.deleteOnEmpty=!0),t.endpoints[n]=s}return s}var Tr=function(t){l(n,t);var e=d(n);function n(t,i){var o;r(this,n),(o=e.call(this,t,i)).instance=t,s(h(o),"connector",void 0),s(h(o),"defaultLabelLocation",.5),s(h(o),"scope",void 0),s(h(o),"typeId","_jsplumb_connection"),s(h(o),"previousConnection",void 0),s(h(o),"sourceId",void 0),s(h(o),"targetId",void 0),s(h(o),"source",void 0),s(h(o),"target",void 0),s(h(o),"detachable",!0),s(h(o),"reattach",!1),s(h(o),"uuids",void 0),s(h(o),"cost",1),s(h(o),"directed",void 0),s(h(o),"endpoints",[null,null]),s(h(o),"endpointStyles",void 0),s(h(o),"endpointSpec",void 0),s(h(o),"endpointsSpec",void 0),s(h(o),"endpointStyle",{}),s(h(o),"endpointHoverStyle",{}),s(h(o),"endpointHoverStyles",void 0),s(h(o),"suspendedEndpoint",void 0),s(h(o),"suspendedIndex",void 0),s(h(o),"suspendedElement",void 0),s(h(o),"suspendedElementId",void 0),s(h(o),"suspendedElementType",void 0),s(h(o),"_forceReattach",void 0),s(h(o),"_forceDetach",void 0),s(h(o),"proxies",[]),s(h(o),"pending",!1),o.id=i.id,o.previousConnection=i.previousConnection,o.source=i.source,o.target=i.target,i.sourceEndpoint?(o.source=i.sourceEndpoint.element,o.sourceId=i.sourceEndpoint.elementId):o.sourceId=t.getId(o.source),i.targetEndpoint?(o.target=i.targetEndpoint.element,o.targetId=i.targetEndpoint.elementId):o.targetId=t.getId(o.target),o.scope=i.scope;var a=i.anchors?i.anchors[0]:i.anchor,l=i.anchors?i.anchors[1]:i.anchor;t.manage(o.source),t.manage(o.target),o.visible=!0,o.params={cssClass:i.cssClass,hoverClass:i.hoverClass,"pointer-events":i["pointer-events"],overlays:i.overlays},o.lastPaintedAt=null,i.type&&(i.endpoints=i.endpoints||o.instance._deriveEndpointAndAnchorSpec(i.type).endpoints),o.endpointSpec=i.endpoint,o.endpointsSpec=i.endpoints||[null,null],o.endpointStyle=i.endpointStyle,o.endpointHoverStyle=i.endpointHoverStyle,o.endpointStyles=i.endpointStyles||[null,null],o.endpointHoverStyles=i.endpointHoverStyles||[null,null],o.paintStyle=i.paintStyle,o.hoverPaintStyle=i.hoverPaintStyle,o.uuids=i.uuids,o.makeEndpoint(!0,o.source,o.sourceId,a,i.sourceEndpoint),o.makeEndpoint(!1,o.target,o.targetId,l,i.targetEndpoint),o.scope||(o.scope=o.endpoints[0].scope),null!=i.deleteEndpointsOnEmpty&&(o.endpoints[0].deleteOnEmpty=i.deleteEndpointsOnEmpty,o.endpoints[1].deleteOnEmpty=i.deleteEndpointsOnEmpty);var c=o.instance.defaults.connectionsDetachable;!1===i.detachable&&(c=!1),!1===o.endpoints[0].connectionsDetachable&&(c=!1),!1===o.endpoints[1].connectionsDetachable&&(c=!1),o.endpointsSpec=i.endpoints||[null,null],o.endpointSpec=i.endpoint||null;var u=i.reattach||o.endpoints[0].reattachConnections||o.endpoints[1].reattachConnections||o.instance.defaults.reattachConnections,d=b({},o.endpoints[0].connectorStyle||o.endpoints[1].connectorStyle||i.paintStyle||o.instance.defaults.paintStyle);if(o.appendToDefaultType({detachable:c,reattach:u,paintStyle:d,hoverPaintStyle:b({},o.endpoints[0].connectorHoverStyle||o.endpoints[1].connectorHoverStyle||i.hoverPaintStyle||o.instance.defaults.hoverPaintStyle)}),i.outlineWidth&&(d.outlineWidth=i.outlineWidth),i.outlineColor&&(d.outlineStroke=i.outlineColor),i.lineWidth&&(d.strokeWidth=i.lineWidth),i.color&&(d.stroke=i.color),!o.instance._suspendDrawing){var p=o.instance._suspendedAt||B();o.instance._paintEndpoint(o.endpoints[0],{timestamp:p}),o.instance._paintEndpoint(o.endpoints[1],{timestamp:p})}o.cost=i.cost||o.endpoints[0].connectionCost,o.directed=i.directed,null==i.directed&&(o.directed=o.endpoints[0].connectionsDirected);var f=b({},o.endpoints[1].parameters);b(f,o.endpoints[0].parameters),b(f,o.parameters),o.parameters=f,o.paintStyleInUse=o.getPaintStyle()||{},o._setConnector(o.endpoints[0].connector||o.endpoints[1].connector||i.connector||o.instance.defaults.connector,!0);var g=null!=i.data&&k(i.data)?i.data:{};o.setData(g);var m=[rn,o.endpoints[0].edgeType,o.endpoints[1].edgeType,i.type].join(" ");return/[^\s]/.test(m)&&o.addType(m,i.data),o}return a(n,[{key:"getIdPrefix",value:function(){return"_jsPlumb_c"}},{key:"getDefaultOverlayKey",value:function(){return"connectionOverlays"}},{key:"getXY",value:function(){return{x:this.connector.x,y:this.connector.y}}},{key:"makeEndpoint",value:function(t,e,n,i,r){return n=n||this.instance.getId(e),Mr(this,r,t?0:1,i,e)}},{key:"getTypeDescriptor",value:function(){return n.type}},{key:"isDetachable",value:function(t){return!1!==this.detachable&&(null!=t?!0===t.connectionsDetachable:!0===this.detachable)}},{key:"setDetachable",value:function(t){this.detachable=!0===t}},{key:"isReattach",value:function(){return!0===this.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections}},{key:"setReattach",value:function(t){this.reattach=!0===t}},{key:"applyType",value:function(t,e){var i=null;null!=t.connector&&(null==(i=this.getCachedTypeItem(Cr,e.connector))&&(i=this.prepareConnector(t.connector,e.connector),this.cacheTypeItem(Cr,i,e.connector)),this.setPreparedConnector(i)),p(c(n.prototype),"applyType",this).call(this,t,e),null!=t.detachable&&this.setDetachable(t.detachable),null!=t.reattach&&this.setReattach(t.reattach),t.scope&&(this.scope=t.scope);var r=null;t.anchor?null==(r=this.getCachedTypeItem(kr,e.anchor))&&(r=[$i(t.anchor),$i(t.anchor)],this.cacheTypeItem(kr,r,e.anchor)):t.anchors&&null==(r=this.getCachedTypeItem(kr,e.anchors))&&(r=[$i(t.anchors[0]),$i(t.anchors[1])],this.cacheTypeItem(kr,r,e.anchors)),null!=r&&(this.instance.router.setConnectionAnchors(this,r),this.instance.router.isDynamicAnchor(this.endpoints[1])&&this.instance.repaint(this.endpoints[1].element)),this.instance.applyConnectorType(this.connector,t)}},{key:"addClass",value:function(t,e){p(c(n.prototype),"addClass",this).call(this,t),e&&(this.endpoints[0].addClass(t),this.endpoints[1].addClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(t)),this.connector&&this.instance.addConnectorClass(this.connector,t)}},{key:"removeClass",value:function(t,e){p(c(n.prototype),"removeClass",this).call(this,t),e&&(this.endpoints[0].removeClass(t),this.endpoints[1].removeClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(t)),this.connector&&this.instance.removeConnectorClass(this.connector,t)}},{key:"setVisible",value:function(t){p(c(n.prototype),"setVisible",this).call(this,t),this.connector&&this.instance.setConnectorVisible(this.connector,t),this.instance._paintConnection(this)}},{key:"destroy",value:function(){p(c(n.prototype),"destroy",this).call(this),this.endpoints=null,this.endpointStyles=null,this.source=null,this.target=null,this.instance.destroyConnector(this),this.connector=null,this.deleted=!0}},{key:"getUuids",value:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]}},{key:"prepareConnector",value:function(t,e){var n,i={cssClass:this.params.cssClass,hoverClass:this.params.hoverClass,"pointer-events":this.params["pointer-events"]};if(S(t))n=this.instance._makeConnector(this,t,i);else{var r=t;n=this.instance._makeConnector(this,r.type,T(r.options||{},i))}return null!=e&&(n.typeId=e),n}},{key:"setPreparedConnector",value:function(t,e,n,i){if(this.connector!==t){var r,o="";if(null!=this.connector&&(r=this.connector,o=this.instance.getConnectorClass(this.connector),this.instance.destroyConnector(this)),this.connector=t,i&&this.cacheTypeItem(Cr,t,i),this.addClass(o),null!=r){var a=this.getOverlays();for(var s in a)this.instance.reattachOverlay(a[s],this)}e||this.instance._paintConnection(this)}}},{key:"_setConnector",value:function(t,e,n,i){var r=this.prepareConnector(t,i);this.setPreparedConnector(r,e,n,i)}},{key:"replaceEndpoint",value:function(t,e){var n=this.endpoints[t],i=(n.elementId,this.instance.getEndpoints(n.element)),r=i.indexOf(n),o=Mr(this,null,t,null,n.element,0,e);this.endpoints[t]=o,i.splice(r,1,o),n.detachFromConnection(this),this.instance.deleteEndpoint(n),this.instance.fire("endpoint:replaced",{previous:n,current:o})}}]),n}(wr);function Er(t){if(null==t.path){var e=b({"jtk-overlay-id":t.id},t.attributes);t.path=Yt(qt,e);var n=t.instance.overlayClass+" "+(t.cssClass?t.cssClass:"");t.instance.addClass(t.path,n),t.path.jtk={overlay:t}}var i=t.path.parentNode;if(null==i){if(t.component instanceof Tr){var r=t.component.connector;i=null!=r?r.canvas:null}else if(t.component instanceof xr){var o=t.component.endpoint;i=null!=o?o.canvas:o}null!=i&&Jt(i,t.path,1)}return t.path}s(Tr,"type","connection"),function(t){l(n,t);var e=d(n);function n(){var t;r(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return s(h(t=e.call.apply(e,[this].concat(o))),"path",void 0),t}}(or);var Ar=function(){function t(){r(this,t)}return a(t,null,[{key:"paint",value:function(t,e,n,i){if(null!=n){var r=[t.x,t.y],o=[t.w,t.h];if(null!=i&&(i.xmin<0&&(r[0]+=i.xmin),i.ymin<0&&(r[1]+=i.ymin),o[0]=i.xmax+(i.xmin<0?-i.xmin:0),o[1]=i.ymax+(i.ymin<0?-i.ymin:0)),isFinite(o[0])&&isFinite(o[1])){var a={width:""+(o[0]||0),height:""+(o[1]||0)};e.containerType===G.HTML?Zt(t.canvas,b(a,{style:Kt([r[0],r[1]])})):Zt(t.canvas,b(a,{x:r[0],y:r[1]}))}}}}]),t}();var _r=function(){function t(){r(this,t)}return a(t,null,[{key:"getEndpointElement",value:function(t){if(null!=t.canvas)return t.canvas;var e=Yt("svg",{style:"",width:"0",height:"0","pointer-events":"all",position:mt});t.canvas=e;var n=t.classes.join(" ");t.instance.addClass(e,n);for(var i=t.endpoint.scope.split(/\s/),r=0;r<i.length;r++)t.instance.setAttribute(e,xt+i[r],on);return t.instance._appendElementToContainer(e),null!=t.cssClass&&t.instance.addClass(e,t.cssClass),t.instance.addClass(e,t.instance.endpointClass),e.jtk=e.jtk||{},e.jtk.endpoint=t.endpoint,e.style.display=!1!==t.endpoint.visible?ft:gt,e}},{key:"paint",value:function(t,e,n){if(!0!==t.endpoint.deleted){this.getEndpointElement(t),Ar.paint(t,t.instance,n);var i=b({},n);i.outlineStroke&&(i.stroke=i.outlineStroke),null==t.node?(t.node=e.makeNode(t,i),t.canvas.appendChild(t.node)):null!=e.updateNode&&e.updateNode(t,t.node),Xt(t.canvas,t.node,i)}}}]),t}(),Pr=function(){function t(e,n){r(this,t),this.connection=e,s(this,"type",void 0),s(this,"edited",!1),s(this,"stub",void 0),s(this,"sourceStub",void 0),s(this,"targetStub",void 0),s(this,"maxStub",void 0),s(this,"typeId",void 0),s(this,"gap",void 0),s(this,"sourceGap",void 0),s(this,"targetGap",void 0),s(this,"segments",[]),s(this,"totalLength",0),s(this,"segmentProportions",[]),s(this,"segmentProportionalLengths",[]),s(this,"paintInfo",null),s(this,"strokeWidth",void 0),s(this,"x",void 0),s(this,"y",void 0),s(this,"w",void 0),s(this,"h",void 0),s(this,"segment",void 0),s(this,"bounds",{xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}),s(this,"cssClass",void 0),s(this,"hoverClass",void 0),s(this,"geometry",void 0),this.stub=n.stub||this.getDefaultStubs(),this.sourceStub=Array.isArray(this.stub)?this.stub[0]:this.stub,this.targetStub=Array.isArray(this.stub)?this.stub[1]:this.stub,this.gap=n.gap||0,this.sourceGap=Array.isArray(this.gap)?this.gap[0]:this.gap,this.targetGap=Array.isArray(this.gap)?this.gap[1]:this.gap,this.maxStub=Math.max(this.sourceStub,this.targetStub),this.cssClass=n.cssClass||"",this.hoverClass=n.hoverClass||""}return a(t,[{key:"getTypeDescriptor",value:function(){return"connector"}},{key:"getIdPrefix",value:function(){return"_jsplumb_connector"}},{key:"setGeometry",value:function(t,e){this.geometry=t,this.edited=null!=t&&!e}},{key:"exportGeometry",value:function(){return this.geometry}},{key:"importGeometry",value:function(t){return this.geometry=t,!0}},{key:"resetGeometry",value:function(){this.geometry=null,this.edited=!1}},{key:"transformAnchorPlacement",value:function(t,e,n){return{x:t.x,y:t.y,ox:t.ox,oy:t.oy,curX:t.curX+e,curY:t.curY+n}}},{key:"resetBounds",value:function(){this.bounds={xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}}},{key:"findSegmentForPoint",value:function(t,e){for(var n={d:1/0,s:null,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null,index:null,connectorLocation:null},i=0;i<this.segments.length;i++){var r=this.segments[i].findClosestPointOnPath(t,e);r.d<n.d&&(n.d=r.d,n.l=r.l,n.x=r.x,n.y=r.y,n.s=this.segments[i],n.x1=r.x1,n.x2=r.x2,n.y1=r.y1,n.y2=r.y2,n.index=i,n.connectorLocation=this.segmentProportions[i][0]+r.l*(this.segmentProportions[i][1]-this.segmentProportions[i][0]))}return n}},{key:"lineIntersection",value:function(t,e,n,i){for(var r=[],o=0;o<this.segments.length;o++)r.push.apply(r,this.segments[o].lineIntersection(t,e,n,i));return r}},{key:"boxIntersection",value:function(t,e,n,i){for(var r=[],o=0;o<this.segments.length;o++)r.push.apply(r,this.segments[o].boxIntersection(t,e,n,i));return r}},{key:"boundingBoxIntersection",value:function(t){for(var e=[],n=0;n<this.segments.length;n++)e.push.apply(e,this.segments[n].boundingBoxIntersection(t));return e}},{key:"_updateSegmentProportions",value:function(){for(var t=0,e=0;e<this.segments.length;e++){var n=this.segments[e].getLength();this.segmentProportionalLengths[e]=n/this.totalLength,this.segmentProportions[e]=[t,t+=n/this.totalLength]}}},{key:"_findSegmentForLocation",value:function(t,e){var n,i,r;if(e&&(t=t>0?t/this.totalLength:(this.totalLength+t)/this.totalLength),1===t)n=this.segments.length-1,r=1;else if(0===t)r=0,n=0;else if(t>=.5){for(n=0,r=0,i=this.segmentProportions.length-1;i>-1;i--)if(this.segmentProportions[i][1]>=t&&this.segmentProportions[i][0]<=t){n=i,r=(t-this.segmentProportions[i][0])/this.segmentProportionalLengths[i];break}}else for(n=this.segmentProportions.length-1,r=1,i=0;i<this.segmentProportions.length;i++)if(this.segmentProportions[i][1]>=t){n=i,r=(t-this.segmentProportions[i][0])/this.segmentProportionalLengths[i];break}return{segment:this.segments[n],proportion:r,index:n}}},{key:"_addSegment",value:function(t,e){if(e.x1!==e.x2||e.y1!==e.y2){var n=new t(e);this.segments.push(n),this.totalLength+=n.getLength(),this.updateBounds(n)}}},{key:"_clearSegments",value:function(){this.totalLength=0,this.segments.length=0,this.segmentProportions.length=0,this.segmentProportionalLengths.length=0}},{key:"getLength",value:function(){return this.totalLength}},{key:"_prepareCompute",value:function(t){this.strokeWidth=t.strokeWidth;var e=t.sourcePos.curX,n=t.targetPos.curX,i=t.sourcePos.curY,r=t.targetPos.curY,o=Rn({x:e,y:i},{x:n,y:r}),a=n<e,s=r<i,l=[t.sourcePos.ox,t.sourcePos.oy],c=[t.targetPos.ox,t.targetPos.oy],u=a?n:e,h=s?r:i,d=Math.abs(n-e),p=Math.abs(r-i),f=0===l[0]&&0===l[1],g=0===c[0]&&0===c[1];if(f||g){var m=d>p?0:1,v=[1,0][m],y=0===m?e:i,b=0===m?n:r;f&&(l[m]=y>b?-1:1,l[v]=0),g&&(c[m]=y>b?1:-1,c[v]=0)}var w=a?d+this.sourceGap*l[0]:this.sourceGap*l[0],S=s?p+this.sourceGap*l[1]:this.sourceGap*l[1],x=a?this.targetGap*c[0]:d+this.targetGap*c[0],k=s?this.targetGap*c[1]:p+this.targetGap*c[1],C=l[0]*c[0]+l[1]*c[1],M={sx:w,sy:S,tx:x,ty:k,xSpan:Math.abs(x-w),ySpan:Math.abs(k-S),mx:(w+x)/2,my:(S+k)/2,so:l,to:c,x:u,y:h,w:d,h:p,segment:o,startStubX:w+l[0]*this.sourceStub,startStubY:S+l[1]*this.sourceStub,endStubX:x+c[0]*this.targetStub,endStubY:k+c[1]*this.targetStub,isXGreaterThanStubTimes2:Math.abs(w-x)>this.sourceStub+this.targetStub,isYGreaterThanStubTimes2:Math.abs(S-k)>this.sourceStub+this.targetStub,opposite:-1===C,perpendicular:0===C,orthogonal:1===C,sourceAxis:0===l[0]?"y":"x",points:[u,h,d,p,w,S,x,k],stubs:[this.sourceStub,this.targetStub]};return M.anchorOrientation=M.opposite?"opposite":M.orthogonal?"orthogonal":"perpendicular",M}},{key:"updateBounds",value:function(t){var e=t.extents;this.bounds.xmin=Math.min(this.bounds.xmin,e.xmin),this.bounds.xmax=Math.max(this.bounds.xmax,e.xmax),this.bounds.ymin=Math.min(this.bounds.ymin,e.ymin),this.bounds.ymax=Math.max(this.bounds.ymax,e.ymax)}},{key:"dumpSegmentsToConsole",value:function(){$("SEGMENTS:");for(var t=0;t<this.segments.length;t++)$(this.segments[t].type,""+this.segments[t].getLength(),""+this.segmentProportions[t])}},{key:"pointOnPath",value:function(t,e){var n=this._findSegmentForLocation(t,e);return n.segment&&n.segment.pointOnPath(n.proportion,!1)||{x:0,y:0}}},{key:"gradientAtPoint",value:function(t,e){var n=this._findSegmentForLocation(t,e);return n.segment&&n.segment.gradientAtPoint(n.proportion,!1)||0}},{key:"pointAlongPathFrom",value:function(t,e,n){var i=this._findSegmentForLocation(t,n);return i.segment&&i.segment.pointAlongPathFrom(i.proportion,e,!1)||{x:0,y:0}}},{key:"compute",value:function(t){this.paintInfo=this._prepareCompute(t),this._clearSegments(),this._compute(this.paintInfo,t),this.x=this.paintInfo.points[0],this.y=this.paintInfo.points[1],this.w=this.paintInfo.points[2],this.h=this.paintInfo.points[3],this.segment=this.paintInfo.segment,this._updateSegmentProportions()}},{key:"setAnchorOrientation",value:function(t,e){}}]),t}(),Dr=function(t){l(n,t);var e=d(n);function n(t,i,o){var a;return r(this,n),(a=e.call(this,t,i,o)).instance=t,a.component=i,s(h(a),"width",void 0),s(h(a),"length",void 0),s(h(a),"foldback",void 0),s(h(a),"direction",void 0),s(h(a),"location",.5),s(h(a),"paintStyle",void 0),s(h(a),"type",n.type),s(h(a),"cachedDimensions",void 0),o=o||{},a.width=o.width||20,a.length=o.length||20,a.direction=(o.direction||1)<0?-1:1,a.foldback=o.foldback||.623,a.paintStyle=o.paintStyle||{strokeWidth:1},a.location=null==o.location?a.location:Array.isArray(o.location)?o.location[0]:o.location,a}return a(n,[{key:"draw",value:function(t,e,n){if(t instanceof Pr){var i,r,o,a=t;if(this.location>1||this.location<0){var s=this.location<0?1:0;r=Nn(i=a.pointAlongPathFrom(s,this.location,!1),a.pointAlongPathFrom(s,this.location-this.direction*this.length/2,!1),this.length)}else if(1===this.location){if(r=Nn(i=a.pointOnPath(this.location),a.pointAlongPathFrom(this.location,-this.length),this.length),-1===this.direction){var l=r;r=i,i=l}}else if(0===this.location){if(i=Nn(r=a.pointOnPath(this.location),a.pointAlongPathFrom(this.location,this.length),this.length),-1===this.direction){var c=r;r=i,i=c}}else r=Nn(i=a.pointAlongPathFrom(this.location,this.direction*this.length/2),a.pointOnPath(this.location),this.length);var u={hxy:i,tail:o=function(t,e,n){var i=Ln(t,e),r=Math.atan(-1/i),o=n/2*Math.sin(r),a=n/2*Math.cos(r);return[{x:e.x+a,y:e.y+o},{x:e.x-a,y:e.y-o}]}(i,r,this.width),cxy:Nn(i,r,this.foldback*this.length)},h=this.paintStyle.stroke||e.stroke,d=this.paintStyle.fill||e.stroke;return{component:t,d:u,"stroke-width":this.paintStyle.strokeWidth||e.strokeWidth,stroke:h,fill:d,xmin:Math.min(i.x,o[0].x,o[1].x),xmax:Math.max(i.x,o[0].x,o[1].x),ymin:Math.min(i.y,o[0].y,o[1].y),ymax:Math.max(i.y,o[0].y,o[1].y)}}}},{key:"updateFrom",value:function(t){}}]),n}(or);function Or(t){return t.type===Dr.type}s(Dr,"type","Arrow"),lr(Dr.type,Dr);var Lr=function(t){l(n,t);var e=d(n);function n(t,i,o){var a;return r(this,n),(a=e.call(this,t,i,o)).instance=t,s(h(a),"type",n.type),a.length=a.length/2,a.foldback=2,a}return n}(Dr);function Ir(t){return t.type===Lr.type}s(Lr,"type","Diamond"),lr(Lr.type,Lr);var Rr=function(t){l(n,t);var e=d(n);function n(t,i,o){var a;return r(this,n),(a=e.call(this,t,i,o)).instance=t,s(h(a),"type",n.type),a.foldback=1,a}return n}(Dr);function Vr(t){return t.type===Rr.type}s(Rr,"type","PlainArrow"),lr("PlainArrow",Rr);var Nr=function(t){l(n,t);var e=d(n);function n(t,i,o){var a;return r(this,n),(a=e.call(this,t,i,o)).instance=t,a.component=i,s(h(a),"create",void 0),s(h(a),"type",n.type),a.create=o.create,a}return a(n,[{key:"updateFrom",value:function(t){}}]),n}(or);function Fr(t){return t.type===Nr.type}s(Nr,"type","Custom"),lr(Nr.type,Nr);var Br="paintStyle",zr=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),s(h(o=e.call(this,t,i)),"radius",void 0),s(h(o),"defaultOffset",void 0),s(h(o),"defaultInnerRadius",void 0),s(h(o),"type",n.type),i=i||{},o.radius=i.radius||5,o.defaultOffset=.5*o.radius,o.defaultInnerRadius=o.radius/3,o}return n}(wi);s(zr,"type","Dot");var jr={type:zr.type,cls:zr,compute:function(t,e,n,i){var r=e.curX-t.radius,o=e.curY-t.radius,a=2*t.radius,s=2*t.radius;if(i&&i.stroke){var l=i.strokeWidth||1;r-=l,o-=l,a+=2*l,s+=2*l}return t.x=r,t.y=o,t.w=a,t.h=s,[r,o,a,s,t.radius]},getParams:function(t){return{radius:t.radius}}},Ur=function t(e,n){r(this,t),this.instance=e,this.el=n,s(this,"group",void 0)},Gr=function(t){l(n,t);var e=d(n);function n(t,i,o){var a;r(this,n),(a=e.call(this,t,i)).instance=t,s(h(a),"children",[]),s(h(a),"collapsed",!1),s(h(a),"droppable",void 0),s(h(a),"enabled",void 0),s(h(a),"orphan",void 0),s(h(a),"constrain",void 0),s(h(a),"proxied",void 0),s(h(a),"ghost",void 0),s(h(a),"revert",void 0),s(h(a),"prune",void 0),s(h(a),"dropOverride",void 0),s(h(a),"anchor",void 0),s(h(a),"endpoint",void 0),s(h(a),"connections",{source:[],target:[],internal:[]}),s(h(a),"manager",void 0),s(h(a),"id",void 0),s(h(a),"elId",void 0);var l=a.el;return l._isJsPlumbGroup=!0,l._jsPlumbGroup=h(a),a.elId=t.getId(i),a.orphan=!0===o.orphan,a.revert=!0!==a.orphan&&!1!==o.revert,a.droppable=!1!==o.droppable,a.ghost=!0===o.ghost,a.enabled=!1!==o.enabled,a.prune=!0!==a.orphan&&!0===o.prune,a.constrain=a.ghost||!0===o.constrain,a.proxied=!1!==o.proxied,a.id=o.id||B(),a.dropOverride=!0===o.dropOverride,a.anchor=o.anchor,a.endpoint=o.endpoint,a.anchor=o.anchor,t.setAttribute(i,yt,""),a}return a(n,[{key:"contentArea",get:function(){return this.instance.getGroupContentArea(this)}},{key:"overrideDrop",value:function(t,e){return this.dropOverride&&(this.revert||this.prune||this.orphan)}},{key:"getAnchor",value:function(t,e){return this.anchor||"Continuous"}},{key:"getEndpoint",value:function(t,e){return this.endpoint||{type:zr.type,options:{radius:10}}}},{key:"add",value:function(t,e){var n=this.instance.getGroupContentArea(this),i=t;if(null!=i._jsPlumbParentGroup){if(i._jsPlumbParentGroup===this)return;i._jsPlumbParentGroup.remove(t,!0,e,!1)}i._jsPlumbParentGroup=this,this.children.push(new Ur(this.instance,t)),this.instance._appendElement(i,n),this.manager._updateConnectionsForGroup(this)}},{key:"resolveNode",value:function(t){return null==t?null:P(this.children,(function(e){return e.el===t}))}},{key:"remove",value:function(t,e,n,i,r){var o=this.resolveNode(t);null!=o&&this._doRemove(o,e,n,i,r)}},{key:"_doRemove",value:function(t,e,n,i,r){var o=t.el;if(delete o._jsPlumbParentGroup,O(this.children,(function(e){return e===t})),e)try{this.instance.getGroupContentArea(this).removeChild(o)}catch(t){$("Could not remove element from Group "+t)}if(!n){var a={group:this,el:o};r&&(a.targetGroup=r),this.instance.fire("group:member:removed",a)}i||this.manager._updateConnectionsForGroup(this)}},{key:"removeAll",value:function(t,e){for(var n=0,i=this.children.length;n<i;n++){var r=this.children[0];this._doRemove(r,t,e,!0),this.instance.unmanage(r.el,!0)}this.children.length=0,this.manager._updateConnectionsForGroup(this)}},{key:"orphanAll",value:function(){for(var t={},e=0;e<this.children.length;e++){var n=this.manager.orphan(this.children[e].el,!1);t[n.id]=n.pos}return this.children.length=0,t}},{key:"addGroup",value:function(t){if(this.instance.allowNestedGroups&&t!==this){if(this.instance.groupManager.isAncestor(this,t))return!1;null!=t.group&&t.group.removeGroup(t);var e=this.instance.getId(t.el);this.instance.getManagedElements()[e].group=this.elId;var n=this.instance.getOffsetRelativeToRoot(t.el),i=this.collapsed?this.instance.getOffsetRelativeToRoot(this.el):this.instance.getOffsetRelativeToRoot(this.instance.getGroupContentArea(this));t.el._jsPlumbParentGroup=this,this.children.push(t),this.instance._appendElementToGroup(this,t.el),t.group=this;var r={x:n.x-i.x,y:n.y-i.y};return this.instance.setPosition(t.el,r),this.instance.fire("group:nested:added",{parent:this,child:t}),!0}return!1}},{key:"removeGroup",value:function(t){if(t.group===this){var e=t.el,n=this.instance.getGroupContentArea(this);n===e.parentNode&&n.removeChild(t.el);var i=this.instance.getId(t.el),r=this.instance.getManagedElements()[i];r&&delete r.group,this.children=this.children.filter((function(e){return e.id!==t.id})),delete t.group,delete e._jsPlumbParentGroup,this.instance.fire("group:nested:removed",{parent:this,child:t})}}},{key:"getGroups",value:function(){return this.children.filter((function(t){return t.constructor===n}))}},{key:"getNodes",value:function(){return this.children.filter((function(t){return t.constructor===Ur}))}},{key:"collapseParent",get:function(){var t=null;if(null==this.group)return null;for(var e=this.group;null!=e;)e.collapsed&&(t=e),e=e.group;return t}}]),n}(Ur),$r=function(){function t(e){var n=this;r(this,t),this.instance=e,s(this,"groupMap",{}),s(this,"_connectionSourceMap",{}),s(this,"_connectionTargetMap",{}),e.bind(Dt,(function(t){var e=n.getGroupFor(t.source),i=n.getGroupFor(t.target);null!=e&&null!=i&&e===i?(n._connectionSourceMap[t.connection.id]=e,n._connectionTargetMap[t.connection.id]=e,V(e.connections.internal,t.connection)):(null!=e&&(t.target._jsPlumbGroup===e?V(e.connections.internal,t.connection):V(e.connections.source,t.connection),n._connectionSourceMap[t.connection.id]=e),null!=i&&(t.source._jsPlumbGroup===i?V(i.connections.internal,t.connection):V(i.connections.target,t.connection),n._connectionTargetMap[t.connection.id]=i))})),e.bind(It,(function(t){n._cleanupDetachedConnection(t.connection)})),e.bind(Ot,(function(t){var e=t.originalEndpoint.element,i=n.getGroupFor(e),r=t.connection.endpoints[t.index].element,o=n.getGroupFor(r),a=0===t.index?n._connectionSourceMap:n._connectionTargetMap,s=0===t.index?n._connectionTargetMap:n._connectionSourceMap;null!=o?(a[t.connection.id]=o,t.connection.source===t.connection.target&&(s[t.connection.id]=o)):(delete a[t.connection.id],t.connection.source===t.connection.target&&delete s[t.connection.id]),null!=i&&n._updateConnectionsForGroup(i),null!=o&&n._updateConnectionsForGroup(o)}))}return a(t,[{key:"_cleanupDetachedConnection",value:function(t){t.proxies.length=0;var e,n=this._connectionSourceMap[t.id];null!=n&&(e=function(e){return e.id===t.id},O(n.connections.source,e),O(n.connections.target,e),O(n.connections.internal,e),delete this._connectionSourceMap[t.id]),null!=(n=this._connectionTargetMap[t.id])&&(e=function(e){return e.id===t.id},O(n.connections.source,e),O(n.connections.target,e),O(n.connections.internal,e),delete this._connectionTargetMap[t.id])}},{key:"addGroup",value:function(t){var e=t.el;if(null!=this.groupMap[t.id])throw new Error("cannot create Group ["+t.id+"]; a Group with that ID exists");if(null!=e._isJsPlumbGroup)throw new Error("cannot create Group ["+t.id+"]; the given element is already a Group");var n=new Gr(this.instance,t.el,t);return this.groupMap[n.id]=n,t.collapsed&&this.collapseGroup(n),this.instance.manage(n.el),this.instance.addClass(n.el,At),n.manager=this,this._updateConnectionsForGroup(n),this.instance.fire("group:added",{group:n}),n}},{key:"getGroup",value:function(t){var e=t;if(S(t)&&null==(e=this.groupMap[t]))throw new Error("No such group ["+t+"]");return e}},{key:"getGroupFor",value:function(t){for(var e=t,n=this.instance.getContainer(),i=!1,r=null;!i;)null==e||e===n?i=!0:e._jsPlumbParentGroup?(r=e._jsPlumbParentGroup,i=!0):e=e.parentNode;return r}},{key:"getGroups",value:function(){var t=[];for(var e in this.groupMap)t.push(this.groupMap[e]);return t}},{key:"removeGroup",value:function(t,e,n,i){var r=this,o=this.getGroup(t);this.expandGroup(o,!0);var a={};return A(o.children,(function(t){var e=r.instance.getManagedElements()[r.instance.getId(t.el)];e&&delete e.group})),e?(A(o.getGroups(),(function(t){return r.removeGroup(t,e,n)})),o.removeAll(n,i)):(o.group&&A(o.children,(function(t){return o.group.add(t.el)})),a=o.orphanAll()),o.group&&o.group.removeGroup(o),this.instance.unmanage(o.el,!0),delete this.groupMap[o.id],this.instance.fire("group:removed",{group:o}),a}},{key:"removeAllGroups",value:function(t,e,n){for(var i in this.groupMap)this.removeGroup(this.groupMap[i],t,e,n)}},{key:"forEach",value:function(t){for(var e in this.groupMap)t(this.groupMap[e])}},{key:"orphan",value:function(t,e){var n=t;if(n._jsPlumbParentGroup){var i=n._jsPlumbParentGroup,r=this.instance.getId(n),o=this.instance.getOffset(t);return!0!==e&&i.group?this.instance._appendElementToGroup(i.group,t):this.instance._appendElementToContainer(t),this.instance.setPosition(t,o),delete n._jsPlumbParentGroup,{id:r,pos:o}}}},{key:"_updateConnectionsForGroup",value:function(t){var e=this;t.connections.source.length=0,t.connections.target.length=0,t.connections.internal.length=0;var n=t.children.slice().map((function(t){return t.el})),i=[];if(A(n,(function(t){Array.prototype.push.apply(i,e.instance.getSelector(t,Ut))})),Array.prototype.push.apply(n,i),n.length>0){var r,o,a=this.instance.getConnections({source:n,scope:sn},!0),s=this.instance.getConnections({target:n,scope:sn},!0),l={},c=function(n){for(var i=0;i<n.length;i++)l[n[i].id]||(l[n[i].id]=!0,r=e.getGroupFor(n[i].source),o=e.getGroupFor(n[i].target),n[i].source===t.el&&o===t||n[i].target===t.el&&r===t?t.connections.internal.push(n[i]):r===t?(o!==t?t.connections.source.push(n[i]):t.connections.internal.push(n[i]),e._connectionSourceMap[n[i].id]=t):o===t&&(t.connections.target.push(n[i]),e._connectionTargetMap[n[i].id]=t))};c(a),c(s)}}},{key:"_collapseConnection",value:function(t,e,n){var i=t.endpoints[0===e?1:0].element;if(i._jsPlumbParentGroup&&!i._jsPlumbParentGroup.proxied&&i._jsPlumbParentGroup.collapsed)return!1;var r=t.endpoints[0].element._jsPlumbParentGroup,o=null!=r?r.collapseParent||r:null,a=t.endpoints[1].element._jsPlumbParentGroup,s=null!=a?a.collapseParent||a:null;if(null==o||null==s||o.id!==s.id){var l=n.el;return this.instance.getId(l),this.instance.proxyConnection(t,e,l,(function(t,e){return n.getEndpoint(t,e)}),(function(t,e){return n.getAnchor(t,e)})),!0}return!1}},{key:"_expandConnection",value:function(t,e,n){this.instance.unproxyConnection(t,e)}},{key:"isElementDescendant",value:function(t,e){for(var n=this.instance.getContainer();;){if(null==t||t===n)return!1;if(t===e)return!0;t=t.parentNode}}},{key:"collapseGroup",value:function(t){var e=this,n=this.getGroup(t);if(null!=n&&!n.collapsed){var i=n.el;if(null==n.collapseParent){if(this.instance.setGroupVisible(n,!1),n.collapsed=!0,this.instance.removeClass(i,At),this.instance.addClass(i,Et),n.proxied){var r=new Set,o=function(t,i){for(var o=0;o<t.length;o++){var a=t[o];!0===e._collapseConnection(a,i,n)&&r.add(a.id)}};o(n.connections.source,0),o(n.connections.target,1),A(n.getGroups(),(function(t){e.cascadeCollapse(n,t,r)}))}this.instance.revalidate(i),this.repaintGroup(n),this.instance.fire("group:collapse",{group:n})}else n.collapsed=!0,this.instance.removeClass(i,At),this.instance.addClass(i,Et)}}},{key:"cascadeCollapse",value:function(t,e,n){var i=this;if(t.proxied){var r=function(e,r){for(var o=0;o<e.length;o++){var a=e[o];n.has(a.id)||!0===i._collapseConnection(a,r,t)&&n.add(a.id)}};r(e.connections.source,0),r(e.connections.target,1)}A(e.getGroups(),(function(e){i.cascadeCollapse(t,e,n)}))}},{key:"expandGroup",value:function(t,e){var n=this,i=this.getGroup(t);if(null!=i){var r=i.el;if(null==i.collapseParent){if(this.instance.setGroupVisible(i,!0),i.collapsed=!1,this.instance.addClass(r,At),this.instance.removeClass(r,Et),i.proxied){var o=function(t,e){for(var r=0;r<t.length;r++){var o=t[r];n._expandConnection(o,e,i)}};o(i.connections.source,0),o(i.connections.target,1),A(i.getGroups(),(function t(e,i){if(i||e.collapsed){var r=function(t,i){for(var r=0;r<t.length;r++){var o=t[r];n._collapseConnection(o,i,e.collapseParent||e)}};r(e.connections.source,0),r(e.connections.target,1),A(e.connections.internal,(function(t){return t.setVisible(!1)})),A(e.getGroups(),(function(e){return t(e,!0)}))}else n.expandGroup(e,!0)}))}this.instance.revalidate(r),this.repaintGroup(i),e||this.instance.fire("group:expand",{group:i})}else i.collapsed=!1,this.instance.addClass(r,At),this.instance.removeClass(r,Et)}}},{key:"toggleGroup",value:function(t){null!=(t=this.getGroup(t))&&(t.collapsed?this.expandGroup(t):this.collapseGroup(t))}},{key:"repaintGroup",value:function(t){for(var e=this.getGroup(t).children,n=0;n<e.length;n++)this.instance.revalidate(e[n].el)}},{key:"addToGroup",value:function(t,e){var n=this,i=this.getGroup(t);if(i){for(var r=i.el,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];A(a,(function(t){var o=t,a=null!=o._isJsPlumbGroup,s=o._jsPlumbGroup,l=o._jsPlumbParentGroup;if(l!==i){var c=n.instance.manage(t),u=n.instance.getOffset(t),h=i.collapsed?n.instance.getOffsetRelativeToRoot(r):n.instance.getOffset(n.instance.getGroupContentArea(i));c.group=i.elId,null!=l&&(l.remove(t,!1,e,!1,i),n._updateConnectionsForGroup(l)),a?i.addGroup(s):i.add(t,e);var d=function(t,e){var r=0===e?1:0;t.each((function(t){t.setVisible(!1),t.endpoints[r].element._jsPlumbGroup===i?(t.endpoints[r].setVisible(!1),n._expandConnection(t,r,i)):(t.endpoints[e].setVisible(!1),n._collapseConnection(t,e,i))}))};i.collapsed&&(d(n.instance.select({source:t}),0),d(n.instance.select({target:t}),1)),n.instance.getId(t);var p={x:u.x-h.x,y:u.y-h.y};if(n.instance.setPosition(t,p),n._updateConnectionsForGroup(i),n.instance.revalidate(t),!e){var f={group:i,el:t,pos:p};l&&(f.sourceGroup=l),n.instance.fire("group:member:added",f)}}}))}}},{key:"removeFromGroup",value:function(t,e){var n=this,i=this.getGroup(t);if(i){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];A(o,(function(t){if(i.collapsed){var r=function(e,r){for(var o=0;o<e.length;o++){var a=e[o];if(a.proxies)for(var s=0;s<a.proxies.length;s++)if(null!=a.proxies[s]){var l=a.proxies[s].originalEp.element;(l===t||n.isElementDescendant(l,t))&&n._expandConnection(a,r,i)}}};r(i.connections.source.slice(),0),r(i.connections.target.slice(),1)}i.remove(t,null,e);var o=n.instance.getManagedElements()[n.instance.getId(t)];o&&delete o.group}))}}},{key:"getAncestors",value:function(t){for(var e=[],n=t.group;null!=n;)e.push(n),n=n.group;return e}},{key:"isAncestor",value:function(t,e){return null!=t&&null!=e&&-1!==this.getAncestors(t).indexOf(e)}},{key:"getDescendants",value:function(t){var e=[];return function t(n){var i=n.getGroups();e.push.apply(e,g(i)),A(i,t)}(t),e}},{key:"isDescendant",value:function(t,e){return null!=t&&null!=e&&-1!==this.getDescendants(e).indexOf(t)}},{key:"reset",value:function(){this._connectionSourceMap={},this._connectionTargetMap={},this.groupMap={}}}]),t}(),Hr=function(){function t(e,n){r(this,t),this.instance=e,this.entries=n}return a(t,[{key:"length",get:function(){return this.entries.length}},{key:"each",value:function(t){return A(this.entries,(function(e){return t(e)})),this}},{key:"get",value:function(t){return this.entries[t]}},{key:"addClass",value:function(t,e){return this.each((function(n){return n.addClass(t,e)})),this}},{key:"removeClass",value:function(t,e){return this.each((function(n){return n.removeClass(t,e)})),this}},{key:"removeAllOverlays",value:function(){return this.each((function(t){return t.removeAllOverlays()})),this}},{key:"setLabel",value:function(t){return this.each((function(e){return e.setLabel(t)})),this}},{key:"clear",value:function(){return this.entries.length=0,this}},{key:"map",value:function(t){var e=[];return this.each((function(n){return e.push(t(n))})),e}},{key:"addOverlay",value:function(t){return this.each((function(e){return e.addOverlay(t)})),this}},{key:"removeOverlay",value:function(t){return this.each((function(e){return e.removeOverlay(t)})),this}},{key:"removeOverlays",value:function(){return this.each((function(t){return t.removeOverlays()})),this}},{key:"showOverlay",value:function(t){return this.each((function(e){return e.showOverlay(t)})),this}},{key:"hideOverlay",value:function(t){return this.each((function(e){return e.hideOverlay(t)})),this}},{key:"setPaintStyle",value:function(t){return this.each((function(e){return e.setPaintStyle(t)})),this}},{key:"setHoverPaintStyle",value:function(t){return this.each((function(e){return e.setHoverPaintStyle(t)})),this}},{key:"setSuspendEvents",value:function(t){return this.each((function(e){return e.setSuspendEvents(t)})),this}},{key:"setParameter",value:function(t,e){return this.each((function(n){return n.parameters[t]=e})),this}},{key:"setParameters",value:function(t){return this.each((function(e){return e.parameters=t})),this}},{key:"setVisible",value:function(t){return this.each((function(e){return e.setVisible(t)})),this}},{key:"addType",value:function(t){return this.each((function(e){return e.addType(t)})),this}},{key:"toggleType",value:function(t){return this.each((function(e){return e.toggleType(t)})),this}},{key:"removeType",value:function(t){return this.each((function(e){return e.removeType(t)})),this}},{key:"bind",value:function(t,e){return this.each((function(n){return n.bind(t,e)})),this}},{key:"unbind",value:function(t,e){return this.each((function(n){return n.unbind(t,e)})),this}},{key:"setHover",value:function(t){var e=this;return this.each((function(n){return e.instance.setHover(n,t)})),this}}]),t}(),qr=function(t){l(n,t);var e=d(n);function n(){return r(this,n),e.apply(this,arguments)}return a(n,[{key:"setEnabled",value:function(t){return this.each((function(e){return e.enabled=t})),this}},{key:"setAnchor",value:function(t){return this.each((function(e){return e.setAnchor(t)})),this}},{key:"deleteEveryConnection",value:function(){return this.each((function(t){return t.deleteEveryConnection()})),this}},{key:"deleteAll",value:function(){var t=this;return this.each((function(e){return t.instance.deleteEndpoint(e)})),this.clear(),this}}]),n}(Hr),Wr=function(t){l(n,t);var e=d(n);function n(){return r(this,n),e.apply(this,arguments)}return a(n,[{key:"setDetachable",value:function(t){return this.each((function(e){return e.setDetachable(t)})),this}},{key:"setReattach",value:function(t){return this.each((function(e){return e.setReattach(t)})),this}},{key:"setConnector",value:function(t){return this.each((function(e){return e._setConnector(t)})),this}},{key:"deleteAll",value:function(){var t=this;this.each((function(e){return t.instance.deleteConnection(e)})),this.clear()}},{key:"repaint",value:function(){var t=this;return this.each((function(e){return t.instance._paintConnection(e)})),this}}]),n}(Hr),Zr=function t(){r(this,t),s(this,"affectedElements",new Set)};function Yr(){return{x:0,y:0,w:0,h:0,r:0,c:{x:0,y:0},x2:0,y2:0,t:{x:0,y:0,c:{x:0,y:0},w:0,h:0,r:0,x2:0,y2:0,cr:0,sr:0},dirty:!0}}var Kr=function(t,e){var n=0;return e[1]>t[1]?n=-1:e[1]<t[1]&&(n=1),n},Xr=function(t,e){return-1*Kr(t,e)};function Jr(t,e,n,i){!function(t,e,n,i){if(0===e.length)e.push(t);else{for(var r=i?-1:1,o=0,a=e.length,s=Math.floor((o+a)/2);a>o;)n(t,e[s])*r<0?a=s:o=s+1,s=Math.floor((o+a)/2);e.splice(s,0,t)}}([t,e],n,Kr,i)}function Qr(t,e){var n=_(e,(function(e){return e[0]===t}));n>-1&&e.splice(n,1)}var to,eo=function(t){l(n,t);var e=d(n);function n(t){var i;return r(this,n),(i=e.call(this)).instance=t,s(h(i),"_currentTransaction",null),s(h(i),"_sortedElements",{xmin:[],xmax:[],ymin:[],ymax:[]}),s(h(i),"_elementMap",new Map),s(h(i),"_transformedElementMap",new Map),s(h(i),"_bounds",{minx:0,maxx:0,miny:0,maxy:0}),i}return a(n,[{key:"_updateBounds",value:function(t,e,n){null!=e&&(Qr(t,this._sortedElements.xmin),Qr(t,this._sortedElements.xmax),Qr(t,this._sortedElements.ymin),Qr(t,this._sortedElements.ymax),Jr(t,e.t.x,this._sortedElements.xmin,!1),Jr(t,e.t.x+e.t.w,this._sortedElements.xmax,!0),Jr(t,e.t.y,this._sortedElements.ymin,!1),Jr(t,e.t.y+e.t.h,this._sortedElements.ymax,!0),!0!==n&&this._recalculateBounds())}},{key:"_recalculateBounds",value:function(){this._bounds.minx=this._sortedElements.xmin.length>0?this._sortedElements.xmin[0][1]:0,this._bounds.maxx=this._sortedElements.xmax.length>0?this._sortedElements.xmax[0][1]:0,this._bounds.miny=this._sortedElements.ymin.length>0?this._sortedElements.ymin[0][1]:0,this._bounds.maxy=this._sortedElements.ymax.length>0?this._sortedElements.ymax[0][1]:0}},{key:"recomputeBounds",value:function(){var t=this;this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.forEach((function(e,n){t._sortedElements.xmin.push([n,e.t.x]),t._sortedElements.xmax.push([n,e.t.x+e.t.w]),t._sortedElements.ymin.push([n,e.t.y]),t._sortedElements.ymax.push([n,e.t.y+e.t.h])})),this._sortedElements.xmin.sort(Kr),this._sortedElements.ymin.sort(Kr),this._sortedElements.xmax.sort(Xr),this._sortedElements.ymax.sort(Xr),this._recalculateBounds()}},{key:"_finaliseUpdate",value:function(t,e,n){var i,r,o,a,s,l,c,u,h,d,p,f,g,m,v,y,b,w,S;e.t=(i=e.x,r=e.y,o=e.w,a=e.h,s=e.r,l=i+o/2,c=r+a/2,u=Math.cos(s/360*Math.PI*2),h=Math.sin(s/360*Math.PI*2),d=function(t,e){return{x:l+Math.round((t-l)*u-(e-c)*h),y:c+Math.round((e-c)*u-(t-l)*h)}},p=d(i,r),f=d(i+o,r),g=d(i+o,r+a),m=d(i,r+a),v=d(i+o/2,r+a/2),y=Math.min(p.x,f.x,g.x,m.x),b=Math.max(p.x,f.x,g.x,m.x),{x:y,y:w=Math.min(p.y,f.y,g.y,m.y),w:b-y,h:(S=Math.max(p.y,f.y,g.y,m.y))-w,c:v,r:s,x2:b,y2:S,cr:u,sr:h}),this._transformedElementMap.set(t,e.t),!0!==n&&this._updateBounds(t,e,n)}},{key:"shouldFireEvent",value:function(t,e,n){return!0}},{key:"startTransaction",value:function(){if(null!=this._currentTransaction)throw new Error("Viewport: cannot start transaction; a transaction is currently active.");this._currentTransaction=new Zr}},{key:"endTransaction",value:function(){var t=this;null!=this._currentTransaction&&(this._currentTransaction.affectedElements.forEach((function(e){var n=t.getPosition(e);t._finaliseUpdate(e,n,!0)})),this.recomputeBounds(),this._currentTransaction=null)}},{key:"updateElements",value:function(t){var e=this;A(t,(function(t){return e.updateElement(t.id,t.x,t.y,t.width,t.height,t.rotation)}))}},{key:"updateElement",value:function(t,e,n,i,r,o,a){var s=W(this._elementMap,t,Yr);return s.dirty=null==e&&null==s.x||null==n&&null==s.y||null==i&&null==s.w||null==r&&null==s.h,null!=e&&(s.x=e),null!=n&&(s.y=n),null!=i&&(s.w=i),null!=r&&(s.h=r),null!=o&&(s.r=o||0),s.c.x=s.x+s.w/2,s.c.y=s.y+s.h/2,s.x2=s.x+s.w,s.y2=s.y+s.h,null==this._currentTransaction?this._finaliseUpdate(t,s,a):this._currentTransaction.affectedElements.add(t),s}},{key:"refreshElement",value:function(t,e){var n=this.instance.getManagedElements(),i=n[t]?n[t].el:null;if(null!=i){var r=this.getSize(i),o=this.getOffset(i);return this.updateElement(t,o.x,o.y,r.w,r.h,null,e)}return null}},{key:"getSize",value:function(t){return this.instance.getSize(t)}},{key:"getOffset",value:function(t){return this.instance.getOffset(t)}},{key:"registerElement",value:function(t,e){return this.updateElement(t,0,0,0,0,0,e)}},{key:"addElement",value:function(t,e,n,i,r,o){return this.updateElement(t,e,n,i,r,o)}},{key:"rotateElement",value:function(t,e){var n=W(this._elementMap,t,Yr);return n.r=e||0,this._finaliseUpdate(t,n),n}},{key:"getBoundsWidth",value:function(){return this._bounds.maxx-this._bounds.minx}},{key:"getBoundsHeight",value:function(){return this._bounds.maxy-this._bounds.miny}},{key:"getX",value:function(){return this._bounds.minx}},{key:"getY",value:function(){return this._bounds.miny}},{key:"setSize",value:function(t,e,n){if(this._elementMap.has(t))return this.updateElement(t,null,null,e,n,null)}},{key:"setPosition",value:function(t,e,n){if(this._elementMap.has(t))return this.updateElement(t,e,n,null,null,null)}},{key:"reset",value:function(){this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.clear(),this._transformedElementMap.clear(),this._recalculateBounds()}},{key:"remove",value:function(t){Qr(t,this._sortedElements.xmin),Qr(t,this._sortedElements.xmax),Qr(t,this._sortedElements.ymin),Qr(t,this._sortedElements.ymax),this._elementMap.delete(t),this._transformedElementMap.delete(t),this._recalculateBounds()}},{key:"getPosition",value:function(t){return this._elementMap.get(t)}},{key:"getElements",value:function(){return this._elementMap}},{key:"isEmpty",value:function(){return 0===this._elementMap.size}}]),n}(ir);function no(t,e){return e.theta-t.theta}function io(t,e){return(t.theta<0?-Math.PI-t.theta:Math.PI-t.theta)-(e.theta<0?-Math.PI-e.theta:Math.PI-e.theta)}var ro=(s(to={},Si,io),s(to,ki,no),s(to,Ci,no),s(to,xi,io),to);function oo(t){return!0===t.isContinuous}function ao(t){return!0===t.isContinuous}function so(t){return t.locations.length>1}function lo(t){return[t.currentLocation,t.locations[t.currentLocation]]}var co=function(){function t(e){var n=this;r(this,t),this.instance=e,s(this,"anchorLists",new Map),s(this,"anchorLocations",new Map),e.bind(It,(function(t){t.sourceEndpoint._anchor.isContinuous&&n._removeEndpointFromAnchorLists(t.sourceEndpoint),t.targetEndpoint._anchor.isContinuous&&n._removeEndpointFromAnchorLists(t.targetEndpoint)})),e.bind(Lt,(function(t){n._removeEndpointFromAnchorLists(t)}))}return a(t,[{key:"getAnchorOrientation",value:function(t){var e=this.anchorLocations.get(t.id);return e?[e.ox,e.oy]:[0,0]}},{key:"_distance",value:function(t,e,n,i,r,o,a){var s=i.x+t.x*r.w,l=i.y+t.y*r.h,c=i.x+r.w/2,u=i.y+r.h/2;if(null!=o&&o.length>0){var h=this.instance._applyRotations([s,l,0,0],o);s=h.x,l=h.y}return Math.sqrt(Math.pow(e-s,2)+Math.pow(n-l,2))+Math.sqrt(Math.pow(c-s,2)+Math.pow(u-l,2))}},{key:"_anchorSelector",value:function(t,e,n,i,r,o,a){for(var s=n.x+i.w/2,l=n.y+i.h/2,c=-1,u=1/0,h=0;h<a.length;h++){var d=this._distance(a[h],s,l,t,e,r,o);d<u&&(c=h+0,u=d)}return[c,a[c]]}},{key:"_floatingAnchorCompute",value:function(t,e){var n=e.xy,i={curX:n.x+t.size.w/2,curY:n.y+t.size.h/2,x:0,y:0,ox:0,oy:0};return this._setComputedPosition(t,i)}},{key:"_setComputedPosition",value:function(t,e,n){return this.anchorLocations.set(t.id,e),t.computedPosition=e,n&&(t.timestamp=n),e}},{key:"_computeSingleLocation",value:function(t,e,n,i){var r,o=i.rotation,a={curX:e.x+t.x*n.w+t.offx,curY:e.y+t.y*n.h+t.offy,x:t.x,y:t.y,ox:0,oy:0};if(null!=o&&o.length>0){var s=[t.iox,t.ioy],l={x:a.curX,y:a.curY,cr:0,sr:0};A(o,(function(t){l=z(l,t.c,t.r);var e=[Math.round(s[0]*l.cr-s[1]*l.sr),Math.round(s[1]*l.cr+s[0]*l.sr)];s=e.slice()})),t.ox=s[0],t.oy=s[1],r={curX:l.x,curY:l.y,x:t.x,y:t.y,ox:s[0],oy:s[1]}}else t.ox=t.iox,t.oy=t.ioy,r=b({ox:t.iox,oy:t.ioy},a);return r}},{key:"_singleAnchorCompute",value:function(t,e){var n=e.xy,i=e.wh,r=e.timestamp,o=this.anchorLocations.get(t.id);if(null!=o&&r&&r===t.timestamp)return o;var a=f(lo(t),2);a[0];var s=a[1];return o=this._computeSingleLocation(s,n,i,e),this._setComputedPosition(t,o,r)}},{key:"_defaultAnchorCompute",value:function(t,e){var n;if(1===t.locations.length)return this._singleAnchorCompute(t,e);var i=e.xy,r=e.wh,o=e.txy,a=e.twh,s=f(lo(t),2),l=s[0],c=s[1];if(t.locked||null==o||null==a)n=this._computeSingleLocation(c,i,r,e);else{var u=f(this._anchorSelector(i,r,o,a,e.rotation,e.tRotation,t.locations),2),h=u[0],d=u[1];t.currentLocation=h,h!==l&&(t.cssClass=d.cls||t.cssClass,e.element._anchorLocationChanged(t)),n=this._computeSingleLocation(d,i,r,e)}return this._setComputedPosition(t,n,e.timestamp)}},{key:"_placeAnchors",value:function(t,e){var n=this,i=this.instance.viewport.getPosition(t),r=function(e,r,o,a,s,l){if(o.length>0)for(var c=o.sort(ro[e]),u=function(t,e,n,i,r){for(var o=n?t.w:t.h,a=n?t.h:t.w,s=[],l=o/(e.length+1),c=0;c<e.length;c++){var u=(c+1)*l,h=i*a;r&&(u=o-u);var d=n?u:h,p=t.x+d,f=d/t.w,g=n?h:u,m=t.y+g,v=g/t.h;if(0!==t.r&&null!=t.r){var y=z({x:p,y:m},t.c,t.r);p=y.x,m=y.y}s.push({x:p,y:m,xLoc:f,yLoc:v,c:e[c].c})}return s}(i,c,a,s,e===ki||e===Si),h=0;h<u.length;h++){var d=u[h].c,p=d.endpoints[0].elementId===t?d.endpoints[0]:d.endpoints[1];n._setComputedPosition(p._anchor,{curX:u[h].x,curY:u[h].y,x:u[h].xLoc,y:u[h].yLoc,ox:l[0],oy:l[1]})}};r(Ci,0,e.bottom,!0,1,[0,1]),r(Si,0,e.top,!0,0,[0,-1]),r(xi,0,e.left,!1,0,[-1,0]),r(ki,0,e.right,!1,1,[1,0])}},{key:"_updateAnchorList",value:function(t,e,n,i,r,o,a,s,l,c,u){var h,d=i.endpoints[a],p=d.id,f=[1,0][a],g={theta:e,order:n,c:i,b:r,elId:o,epId:p},m=t[l],v=d._continuousAnchorEdge?t[d._continuousAnchorEdge]:null;if(v){var y=_(v,(function(t){return t.epId===p}));if(-1!==y){v.splice(y,1);for(var b=0;b<v.length;b++)!0!==(h=v[b].c).placeholder&&c.add(h),u.add(v[b].c.endpoints[a]),u.add(v[b].c.endpoints[f])}}for(var w=0;w<m.length;w++)!0!==(h=m[w].c).placeholder&&c.add(h),u.add(m[w].c.endpoints[a]),u.add(m[w].c.endpoints[f]);var S=s?0:m.length;m.splice(S,0,g),d._continuousAnchorEdge=l}},{key:"_removeEndpointFromAnchorLists",value:function(t){var e=this.anchorLists.get(t.elementId),n=0;!function(t,e){if(t){var i=function(t){return t.epId===e};O(t.top,i),O(t.left,i),O(t.bottom,i),O(t.right,i),n+=t.top.length,n+=t.left.length,n+=t.bottom.length,n+=t.right.length}}(e,t.id),0===n&&this.anchorLists.delete(t.elementId),this.anchorLocations.delete(t._anchor.id)}},{key:"computeAnchorLocation",value:function(t,e){var n;return n=oo(t)?this.anchorLocations.get(t.id)||{curX:0,curY:0,x:0,y:0,ox:0,oy:0}:ao(t)?this._floatingAnchorCompute(t,e):this._defaultAnchorCompute(t,e),t.timestamp=e.timestamp,n}},{key:"computePath",value:function(t,e){var n=this.instance.viewport.getPosition(t.sourceId),i=this.instance.viewport.getPosition(t.targetId),r=t.endpoints[0],o=t.endpoints[1],a=this.getEndpointLocation(r,{xy:n,wh:n,element:r,timestamp:e,rotation:this.instance._getRotations(t.sourceId)}),s=this.getEndpointLocation(o,{xy:i,wh:i,element:o,timestamp:e,rotation:this.instance._getRotations(t.targetId)});t.connector.resetBounds(),t.connector.compute({sourcePos:a,targetPos:s,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1],strokeWidth:t.paintStyleInUse.strokeWidth,sourceInfo:n,targetInfo:i})}},{key:"getEndpointLocation",value:function(t,e){e=e||{};var n=t._anchor,i=this.anchorLocations.get(n.id);return(null==i||null!=e.timestamp&&n.timestamp!==e.timestamp)&&(i=this.computeAnchorLocation(n,e),this._setComputedPosition(n,i,e.timestamp)),i}},{key:"getEndpointOrientation",value:function(t){return t._anchor?this.getAnchorOrientation(t._anchor):[0,0]}},{key:"setAnchorOrientation",value:function(t,e){var n=this.anchorLocations.get(t.id);null!=n&&(n.ox=e[0],n.oy=e[1])}},{key:"isDynamicAnchor",value:function(t){return!!t._anchor&&!oo(t._anchor)&&t._anchor.locations.length>1}},{key:"isFloating",value:function(t){return!!t._anchor&&ao(t._anchor)}},{key:"prepareAnchor",value:function(t){return $i(t)}},{key:"redraw",value:function(t,e,n){var i=this,r=new Set,o=new Set,a=new Set;if(!this.instance._suspendDrawing){var s=this.instance.endpointsByElement[t]||[];e=e||B();for(var l,c,u={},h=0;h<s.length;h++)if(!1!==(c=s[h]).visible)if(o.add(c),l=c._anchor,0===c.connections.length)oo(l)&&(this.anchorLists.has(t)||this.anchorLists.set(t,{top:[],right:[],bottom:[],left:[]}),this._updateAnchorList(this.anchorLists.get(t),-Math.PI/2,0,{endpoints:[c,c],placeholder:!0},!1,t,0,!1,Di(l),r,o),a.add(t));else for(var d=0;d<c.connections.length;d++){var p=c.connections[d],f=p.sourceId,g=p.targetId,m=oo(p.endpoints[0]._anchor),v=oo(p.endpoints[1]._anchor);if(m||v){var y=[f,(p.endpoints[0]._anchor.faces||[]).join("-"),g,(p.endpoints[1]._anchor.faces||[]).join("-")].join("-"),b=u[y],w=p.sourceId===t?1:0;m&&!this.anchorLists.has(f)&&this.anchorLists.set(f,{top:[],right:[],bottom:[],left:[]}),v&&!this.anchorLists.has(g)&&this.anchorLists.set(g,{top:[],right:[],bottom:[],left:[]});var S=this.instance.viewport.getPosition(g),x=this.instance.viewport.getPosition(f);if(g===f&&(m||v))this._updateAnchorList(this.anchorLists.get(f),-Math.PI/2,0,p,!1,g,0,!1,Si,r,o),this._updateAnchorList(this.anchorLists.get(g),-Math.PI/2,0,p,!1,f,1,!1,Si,r,o);else{var k=this.instance._getRotations(f),C=this.instance._getRotations(g);b||(b=this._calculateOrientation(f,g,x,S,p.endpoints[0]._anchor,p.endpoints[1]._anchor,k,C),u[y]=b),m&&this._updateAnchorList(this.anchorLists.get(f),b.theta,0,p,!1,g,0,!1,b.a[0],r,o),v&&this._updateAnchorList(this.anchorLists.get(g),b.theta2,-1,p,!0,f,1,!0,b.a[1],r,o)}m&&a.add(f),v&&a.add(g),r.add(p),(m&&0===w||v&&1===w)&&o.add(p.endpoints[w])}else{var M=c.connections[d].endpoints[p.sourceId===t?1:0];if(so(M._anchor)){this.instance._paintEndpoint(M,{elementWithPrecedence:t,timestamp:e}),r.add(c.connections[d]);for(var T=0;T<M.connections.length;T++)M.connections[T]!==c.connections[d]&&r.add(M.connections[T])}else r.add(c.connections[d])}}a.forEach((function(t){i._placeAnchors(t,i.anchorLists.get(t))})),o.forEach((function(t){var n=i.instance.viewport.getPosition(t.elementId);i.instance._paintEndpoint(t,{timestamp:e,offset:n})})),r.forEach((function(t){i.instance._paintConnection(t,{timestamp:e})}))}return{c:r,e:o}}},{key:"reset",value:function(){this.anchorLocations.clear(),this.anchorLists.clear()}},{key:"setAnchor",value:function(t,e){null!=e&&(t._anchor=e)}},{key:"setConnectionAnchors",value:function(t,e){t.endpoints[0]._anchor=e[0],t.endpoints[1]._anchor=e[1]}},{key:"_calculateOrientation",value:function(t,e,n,i,r,o,a,l){var c=this;if(t===e)return{orientation:"identity",a:[Si,Si]};var u=Math.atan2(i.c.y-n.c.y,i.c.x-n.c.x),h=Math.atan2(n.c.y-i.c.y,n.c.x-i.c.x),d=[],p={};!function(t,e){for(var n=0;n<t.length;n++){var i;if(p[t[n]]=(s(i={},xi,{x:e[n][0].x,y:e[n][0].c.y}),s(i,ki,{x:e[n][0].x+e[n][0].w,y:e[n][0].c.y}),s(i,Si,{x:e[n][0].c.x,y:e[n][0].y}),s(i,Ci,{x:e[n][0].c.x,y:e[n][0].y+e[n][0].h}),i),null!=e[n][1]&&e[n][1].length>0)for(var r in p[t[n]])p[t[n]][r]=c.instance._applyRotationsXY(p[t[n]][r],e[n][1])}}([dt,pt],[[n,a],[i,l]]);for(var f=[Si,xi,ki,Ci],g=0;g<f.length;g++)for(var m=0;m<f.length;m++)d.push({source:f[g],target:f[m],dist:In(p.source[f[g]],p.target[f[m]])});d.sort((function(t,e){if(t.dist<e.dist)return-1;if(e.dist<t.dist)return 1;var n,i=(s(n={},xi,0),s(n,Si,1),s(n,ki,2),s(n,Ci,3),n),r=i[t.source],o=i[e.source],a=i[t.target],l=i[e.target];return r<o?-1:o<r?1:a<l?-1:l<a?1:0}));for(var v=d[0].source,y=d[0].target,b=0;b<d.length&&(v=oo(r)&&r.locked?r.currentFace:!r.isContinuous||Li(r,d[b].source)?d[b].source:null,y=o.isContinuous&&o.locked?o.currentFace:!o.isContinuous||Li(o,d[b].target)?d[b].target:null,null==v||null==y);b++);return r.isContinuous&&this.setCurrentFace(r,v),o.isContinuous&&this.setCurrentFace(o,y),{a:[v,y],theta:u,theta2:h}}},{key:"setCurrentFace",value:function(t,e,n){t.currentFace=e,n&&null!=t.lockedFace&&(t.lockedFace=t.currentFace)}},{key:"lock",value:function(t){t.locked=!0,oo(t)&&(t.lockedFace=t.currentFace)}},{key:"unlock",value:function(t){t.locked=!1,oo(t)&&(t.lockedFace=null)}},{key:"selectAnchorLocation",value:function(t,e){var n=_(t.locations,(function(t){return t.x===e.x&&t.y===e.y}));return-1!==n&&(t.currentLocation=n,!0)}},{key:"lockCurrentAxis",value:function(t){null!=t.currentFace&&(t.lockedAxis=t.currentFace===xi||t.currentFace===ki?Mi:Ti)}},{key:"unlockCurrentAxis",value:function(t){t.lockedAxis=null}},{key:"anchorsEqual",value:function(t,e){if(!t||!e)return!1;var n=t.locations[t.currentLocation],i=e.locations[e.currentLocation];return n.x===i.x&&n.y===i.y&&n.offx===i.offx&&n.offy===i.offy&&n.ox===i.ox&&n.oy===i.oy}}]),t}(),uo={},ho=function(t,e){uo[t]=e},po=function(t){l(n,t);var e=d(n);function n(t){var i;return r(this,n),s(h(i=e.call(this,t)),"length",void 0),s(h(i),"m",void 0),s(h(i),"m2",void 0),s(h(i),"type",n.segmentType),i._setCoordinates({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),i}return a(n,[{key:"getPath",value:function(t){return(t?"M "+this.x1+" "+this.y1+" ":"")+"L "+this.x2+" "+this.y2}},{key:"_recalc",value:function(){this.length=Math.sqrt(Math.pow(this.x2-this.x1,2)+Math.pow(this.y2-this.y1,2)),this.m=Ln({x:this.x1,y:this.y1},{x:this.x2,y:this.y2}),this.m2=-1/this.m,this.extents={xmin:Math.min(this.x1,this.x2),ymin:Math.min(this.y1,this.y2),xmax:Math.max(this.x1,this.x2),ymax:Math.max(this.y1,this.y2)}}},{key:"getLength",value:function(){return this.length}},{key:"getGradient",value:function(){return this.m}},{key:"_setCoordinates",value:function(t){this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this._recalc()}},{key:"pointOnPath",value:function(t,e){if(0!==t||e){if(1!==t||e){var n=e?t>0?t:this.length+t:t*this.length;return Nn({x:this.x1,y:this.y1},{x:this.x2,y:this.y2},n)}return{x:this.x2,y:this.y2}}return{x:this.x1,y:this.y1}}},{key:"gradientAtPoint",value:function(t,e){return this.m}},{key:"pointAlongPathFrom",value:function(t,e,n){var i=this.pointOnPath(t,n),r=e<=0?{x:this.x1,y:this.y1}:{x:this.x2,y:this.y2};return e<=0&&Math.abs(e)>1&&(e*=-1),Nn(i,r,e)}},{key:"within",value:function(t,e,n){return n>=Math.min(t,e)&&n<=Math.max(t,e)}},{key:"closest",value:function(t,e,n){return Math.abs(n-t)<Math.abs(n-e)?t:e}},{key:"findClosestPointOnPath",value:function(t,e){var n={d:1/0,x:null,y:null,l:null,x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};if(0===this.m)n.y=this.y1,n.x=this.within(this.x1,this.x2,t)?t:this.closest(this.x1,this.x2,t);else if(this.m===1/0||this.m===-1/0)n.x=this.x1,n.y=this.within(this.y1,this.y2,e)?e:this.closest(this.y1,this.y2,e);else{var i=this.y1-this.m*this.x1,r=(e-this.m2*t-i)/(this.m-this.m2),o=this.m*r+i;n.x=this.within(this.x1,this.x2,r)?r:this.closest(this.x1,this.x2,r),n.y=this.within(this.y1,this.y2,o)?o:this.closest(this.y1,this.y2,o)}var a=In({x:n.x,y:n.y},{x:this.x1,y:this.y1});return n.d=In({x:t,y:e},n),n.l=a/length,n}},{key:"_pointLiesBetween",value:function(t,e,n){return n>e?e<=t&&t<=n:e>=t&&t>=n}},{key:"lineIntersection",value:function(t,e,n,i){var r=Math.abs(Ln({x:t,y:e},{x:n,y:i})),o=Math.abs(this.m),a=o===1/0?this.x1:this.y1-o*this.x1,s=[],l=r===1/0?t:e-r*t;if(r!==o)if(r===1/0&&0===o)this._pointLiesBetween(t,this.x1,this.x2)&&this._pointLiesBetween(this.y1,e,i)&&s.push({x:t,y:this.y1});else if(0===r&&o===1/0)this._pointLiesBetween(e,this.y1,this.y2)&&this._pointLiesBetween(this.x1,t,n)&&s.push({x:this.x1,y:e});else{var c,u;r===1/0?(c=t,this._pointLiesBetween(c,this.x1,this.x2)&&(u=o*t+a,this._pointLiesBetween(u,e,i)&&s.push({x:c,y:u}))):0===r?(u=e,this._pointLiesBetween(u,this.y1,this.y2)&&(c=(e-a)/o,this._pointLiesBetween(c,t,n)&&s.push({x:c,y:u}))):(u=o*(c=(l-a)/(o-r))+a,this._pointLiesBetween(c,this.x1,this.x2)&&this._pointLiesBetween(u,this.y1,this.y2)&&s.push({x:c,y:u}))}return s}},{key:"boxIntersection",value:function(t,e,n,i){var r=[];return r.push.apply(r,this.lineIntersection(t,e,t+n,e)),r.push.apply(r,this.lineIntersection(t+n,e,t+n,e+i)),r.push.apply(r,this.lineIntersection(t+n,e+i,t,e+i)),r.push.apply(r,this.lineIntersection(t,e+i,t,e)),r}}]),n}(en);s(po,"segmentType","Straight");var fo=function(t){l(n,t);var e=d(n);function n(){var t;r(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return s(h(t=e.call.apply(e,[this].concat(o))),"type",n.type),t}return a(n,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(t,e){this._addSegment(po,{x1:t.sx,y1:t.sy,x2:t.startStubX,y2:t.startStubY}),this._addSegment(po,{x1:t.startStubX,y1:t.startStubY,x2:t.endStubX,y2:t.endStubY}),this._addSegment(po,{x1:t.endStubX,y1:t.endStubY,x2:t.tx,y2:t.ty}),this.geometry={source:e.sourcePos,target:e.targetPos}}},{key:"transformGeometry",value:function(t,e,n){return{source:this.transformAnchorPlacement(t.source,e,n),target:this.transformAnchorPlacement(t.target,e,n)}}}]),n}(Pr);function go(t,e,n){var i=[],r=function(e){return S(e)?e:t.getId(e)};if(e)if("string"==typeof e){if("*"===e)return e;i.push(e)}else{var o;n?i=e:null!=e.length?(o=i).push.apply(o,g(g(e).map(r))):i.push(r(e))}return i}function mo(t,e,n){null!=e&&(e.connections.push(t),1===e.connections.length&&t.instance.addClass(t.source,t.instance.connectedClass)),null!=n&&(null!=e&&t.sourceId===t.targetId||(n.connections.push(t),1===n.connections.length&&t.instance.addClass(t.target,t.instance.connectedClass)))}function vo(t,e,n){if(null!=e){var i=e.connections.length;O(e.connections,(function(e){return t.id===e.id})),i>0&&0===e.connections.length&&t.instance.removeClass(t.source,t.instance.connectedClass)}if(null!=n){var r=n.connections.length;null!=e&&t.sourceId===t.targetId||O(n.connections,(function(e){return t.id===e.id})),r>0&&0===n.connections.length&&t.instance.removeClass(t.target,t.instance.connectedClass)}}s(fo,"type","Straight");var yo=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),(o=e.call(this))._instanceIndex=t,s(h(o),"defaults",void 0),s(h(o),"_initialDefaults",{}),s(h(o),"isConnectionBeingDragged",!1),s(h(o),"currentlyDragging",!1),s(h(o),"hoverSuspended",!1),s(h(o),"_suspendDrawing",!1),s(h(o),"_suspendedAt",null),s(h(o),"connectorClass",Ct),s(h(o),"connectorOutlineClass","jtk-connector-outline"),s(h(o),"connectedClass","jtk-connected"),s(h(o),"endpointClass",Mt),s(h(o),"endpointConnectedClass","jtk-endpoint-connected"),s(h(o),"endpointFullClass","jtk-endpoint-full"),s(h(o),"endpointFloatingClass",Tt),s(h(o),"endpointDropAllowedClass","jtk-endpoint-drop-allowed"),s(h(o),"endpointDropForbiddenClass","jtk-endpoint-drop-forbidden"),s(h(o),"endpointAnchorClassPrefix","jtk-endpoint-anchor"),s(h(o),"overlayClass",_t),s(h(o),"connections",[]),s(h(o),"endpointsByElement",{}),s(h(o),"endpointsByUUID",new Map),s(h(o),"sourceSelectors",[]),s(h(o),"targetSelectors",[]),s(h(o),"allowNestedGroups",void 0),s(h(o),"_curIdStamp",1),s(h(o),"viewport",new eo(h(o))),s(h(o),"router",void 0),s(h(o),"groupManager",void 0),s(h(o),"_connectionTypes",new Map),s(h(o),"_endpointTypes",new Map),s(h(o),"_container",void 0),s(h(o),"_managedElements",{}),s(h(o),"DEFAULT_SCOPE",void 0),s(h(o),"_zoom",1),o.defaults={anchor:ee.Bottom,anchors:[null,null],connectionsDetachable:!0,connectionOverlays:[],connector:fo.type,container:null,endpoint:zr.type,endpointOverlays:[],endpoints:[null,null],endpointStyle:{fill:"#456"},endpointStyles:[null,null],endpointHoverStyle:null,endpointHoverStyles:[null,null],hoverPaintStyle:null,listStyle:{},maxConnections:1,paintStyle:{strokeWidth:2,stroke:"#456"},reattachConnections:!1,scope:"jsplumb_defaultscope",allowNestedGroups:!0},i&&b(o.defaults,i),b(o._initialDefaults,o.defaults),null!=o._initialDefaults[Br]&&(o._initialDefaults[Br].strokeWidth=o._initialDefaults[Br].strokeWidth||2),o.DEFAULT_SCOPE=o.defaults.scope,o.allowNestedGroups=!1!==o._initialDefaults.allowNestedGroups,o.router=new co(h(o)),o.groupManager=new $r(h(o)),o.setContainer(o._initialDefaults.container),o}return a(n,[{key:"defaultScope",get:function(){return this.DEFAULT_SCOPE}},{key:"currentZoom",get:function(){return this._zoom}},{key:"areDefaultAnchorsSet",value:function(){return this.validAnchorsSpec(this.defaults.anchors)}},{key:"validAnchorsSpec",value:function(t){return null!=t&&null!=t[0]&&null!=t[1]}},{key:"getContainer",value:function(){return this._container}},{key:"setZoom",value:function(t,e){return this._zoom=t,this.fire(Ft,this._zoom),e&&this.repaintEverything(),!0}},{key:"_idstamp",value:function(){return""+this._curIdStamp++}},{key:"checkCondition",value:function(t,e){var n=this.getListener(t),i=!0;if(n&&n.length>0){var r=Array.prototype.slice.call(arguments,1);try{for(var o=0,a=n.length;o<a;o++)i=i&&n[o].apply(n[o],r)}catch(e){$("cannot check condition ["+t+"]"+e)}}return i}},{key:"getId",value:function(t,e){if(null==t)return null;var n=this.getAttribute(t,bt);return n&&"undefined"!==n||(2===arguments.length&&void 0!==arguments[1]?n=e:(1===arguments.length||3===arguments.length&&!arguments[2])&&(n="jsplumb-"+this._instanceIndex+"-"+this._idstamp()),this.setAttribute(t,bt,n)),n}},{key:"getConnections",value:function(t,e){t?t.constructor===String&&(t={scope:t}):t={};for(var n=go(this,t.scope||this.defaultScope,!0),i=go(this,t.source),r=go(this,t.target),o=!e&&n.length>1?{}:[],a=function(t,i){if(!e&&n.length>1){var r=o[t];null==r&&(r=o[t]=[]),r.push(i)}else o.push(i)},s=0,l=this.connections.length;s<l;s++){var c=this.connections[s],u=c.proxies&&c.proxies[0]?c.proxies[0].originalEp.elementId:c.sourceId,h=c.proxies&&c.proxies[1]?c.proxies[1].originalEp.elementId:c.targetId;y(n,c.scope)&&y(i,u)&&y(r,h)&&a(c.scope,c)}return o}},{key:"select",value:function(t){return(t=t||{}).scope=t.scope||"*",new Wr(this,t.connections||this.getConnections(t,!0))}},{key:"selectEndpoints",value:function(t){(t=t||{}).scope=t.scope||sn;var e=!t.element&&!t.source&&!t.target,n=e?sn:go(this,t.element),i=e?sn:go(this,t.source),r=e?sn:go(this,t.target),o=go(this,t.scope,!0),a=[];for(var s in this.endpointsByElement){var l=y(n,s,!0),c=y(i,s,!0),u="*"!==i,h=y(r,s,!0),d="*"!==r;if(l||c||h)t:for(var p=0,f=this.endpointsByElement[s].length;p<f;p++){var g=this.endpointsByElement[s][p];if(y(o,g.scope,!0)){var m=u&&i.length>0&&!g.isSource,v=d&&r.length>0&&!g.isTarget;if(m||v)continue t;a.push(g)}}}return new qr(this,a)}},{key:"setContainer",value:function(t){this._container=t,this.fire("container:change",this._container)}},{key:"_set",value:function(t,e,n){var i,r,o=[{el:"source",elId:"sourceId"},{el:"target",elId:"targetId"}][n],a=t[o.elId],s=t.endpoints[n],l={index:n,originalEndpoint:s,originalSourceId:0===n?a:t.sourceId,newSourceId:t.sourceId,originalTargetId:1===n?a:t.targetId,newTargetId:t.targetId,connection:t,newEndpoint:s};return e instanceof xr?(i=e).addConnection(t):i=(r=this.getId(e))===t[o.elId]?null:t.makeEndpoint(0===n,e,r),null!=i&&(l.newEndpoint=i,s.detachFromConnection(t),t.endpoints[n]=i,t[o.el]=i.element,t[o.elId]=i.elementId,l[0===n?"newSourceId":"newTargetId"]=i.elementId,this.fireMoveEvent(l),this._paintConnection(t)),l}},{key:"setSource",value:function(t,e){vo(t,this._managedElements[t.sourceId]);var n=this._set(t,e,0);mo(t,this._managedElements[n.newSourceId])}},{key:"setTarget",value:function(t,e){vo(t,this._managedElements[t.targetId]);var n=this._set(t,e,1);mo(t,this._managedElements[n.newTargetId])}},{key:"setConnectionType",value:function(t,e,n){t.setType(e,n),this._paintConnection(t)}},{key:"isHoverSuspended",value:function(){return this.hoverSuspended}},{key:"setSuspendDrawing",value:function(t,e){var n=this._suspendDrawing;return this._suspendDrawing=t,t?this._suspendedAt=""+(new Date).getTime():(this._suspendedAt=null,this.viewport.recomputeBounds()),e&&this.repaintEverything(),n}},{key:"getSuspendedAt",value:function(){return this._suspendedAt}},{key:"batch",value:function(t,e){var n=!0===this._suspendDrawing;n||this.setSuspendDrawing(!0),t(),n||this.setSuspendDrawing(!1,!e)}},{key:"each",value:function(t,e){if(null!=t){if(null!=t.length)for(var n=0;n<t.length;n++)e(t[n]);else e(t);return this}}},{key:"updateOffset",value:function(t){var e=t.elId;return t.recalc?this.viewport.refreshElement(e):this.viewport.getPosition(e)}},{key:"deleteConnection",value:function(t,e){if(null!=t&&!0!==t.deleted&&((e=e||{}).force||E(!0,!1,[[t.endpoints[0],Bt,[t]],[t.endpoints[1],Bt,[t]],[t,Bt,[t]],[this,kt,[jt,t]]]))){vo(t,this._managedElements[t.sourceId],this._managedElements[t.targetId]),this.fireDetachEvent(t,!t.pending&&!1!==e.fireEvent,e.originalEvent);var n=t.endpoints[0],i=t.endpoints[1];return n!==e.endpointToIgnore&&n.detachFromConnection(t,null,!0),i!==e.endpointToIgnore&&i.detachFromConnection(t,null,!0),O(this.connections,(function(e){return t.id===e.id})),t.destroy(),n!==e.endpointToIgnore&&n.deleteOnEmpty&&0===n.connections.length&&this.deleteEndpoint(n),i!==e.endpointToIgnore&&i.deleteOnEmpty&&0===i.connections.length&&this.deleteEndpoint(i),!0}return!1}},{key:"deleteEveryConnection",value:function(t){var e=this;t=t||{};var n=this.connections.length,i=0;return this.batch((function(){for(var r=0;r<n;r++)i+=e.deleteConnection(e.connections[0],t)?1:0})),i}},{key:"deleteConnectionsForElement",value:function(t,e){var n=this.getId(t),i=this._managedElements[n];if(i)for(var r=i.connections.length,o=0;o<r;o++)this.deleteConnection(i.connections[0],e);return this}},{key:"fireDetachEvent",value:function(t,e,n){var i=null!=t.id?{connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]}:t;e&&this.fire("connection:detach",i,n),this.fire(It,i,n)}},{key:"fireMoveEvent",value:function(t,e){this.fire(Ot,t,e)}},{key:"manageAll",value:function(t,e){for(var n=S(t)?this.getSelector(this.getContainer(),t):t,i=0;i<n.length;i++)this.manage(n[i],null,e)}},{key:"manage",value:function(t,e,n){null==this.getAttribute(t,bt)&&(e=e||this.getAttribute(t,"id")||B(),this.setAttribute(t,bt,e));var i=this.getId(t);if(this._managedElements[i])n&&(this._managedElements[i].viewportElement=this.updateOffset({elId:i,timestamp:null,recalc:!0}));else{var r={el:t,endpoints:[],connections:[],rotation:0,data:{}};this._managedElements[i]=r,this._suspendDrawing?r.viewportElement=this.viewport.registerElement(i,!0):r.viewportElement=this.updateOffset({elId:i,recalc:!0}),this.fire(Rt,{el:t})}return this._managedElements[i]}},{key:"getManagedData",value:function(t,e,n){if(this._managedElements[t]){var i=this._managedElements[t].data[e];return null!=i?i[n]:null}}},{key:"setManagedData",value:function(t,e,n,i){this._managedElements[t]&&(this._managedElements[t].data[e]=this._managedElements[t].data[e]||{},this._managedElements[t].data[e][n]=i)}},{key:"getManagedElement",value:function(t){return this._managedElements[t]?this._managedElements[t].el:null}},{key:"unmanage",value:function(t,e){var n=this;this.removeAllEndpoints(t,!0);var i=function(t){var i=n.getId(t);n.removeAttribute(t,bt),delete n._managedElements[i],n.viewport.remove(i),n.fire(Nt,{el:t,id:i}),t&&e&&n._removeElement(t)};this._getAssociatedElements(t).map(i),i(t)}},{key:"rotate",value:function(t,e,n){var i=this.getId(t);return this._managedElements[i]&&(this._managedElements[i].rotation=e,this.viewport.rotateElement(i,e),!0!==n)?this.revalidate(t):{c:new Set,e:new Set}}},{key:"_getRotation",value:function(t){var e=this._managedElements[t];return null!=e&&e.rotation||0}},{key:"_getRotations",value:function(t){var e=this,n=[],i=this._managedElements[t];return null!=i&&(n.push({r:i.viewportElement.r||0,c:i.viewportElement.c}),function t(i){if(null!=i.group){var r=e._managedElements[i.group];null!=r&&(n.push({r:r.viewportElement.r,c:r.viewportElement.c}),t(r))}}(i)),n}},{key:"_applyRotations",value:function(t,e){var n=t.slice(),i={x:n[0],y:n[1],cr:0,sr:0};return A(e,(function(t){i=z(i,t.c,t.r)})),i}},{key:"_applyRotationsXY",value:function(t,e){return A(e,(function(e){t=z(t,e.c,e.r)})),t}},{key:"_internal_newEndpoint",value:function(t){var e=b({},t),n=this.manage(e.element);e.elementId=this.getId(e.element),e.id="ep_"+this._idstamp();var i=new xr(this,e);return function(t,e){null!=t&&t.endpoints.push(e)}(n,i),t.uuid&&this.endpointsByUUID.set(t.uuid,i),R(this.endpointsByElement,i.elementId,i),this._suspendDrawing||this._paintEndpoint(i,{timestamp:this._suspendedAt}),i}},{key:"_deriveEndpointAndAnchorSpec",value:function(t,e){for(var n=((e?"":"default ")+t).split(/[\s]/),i=null,r=null,o=null,a=null,s=0;s<n.length;s++){var l=this.getConnectionType(n[s]);l&&(l.endpoints&&(i=l.endpoints),l.endpoint&&(r=l.endpoint),l.anchors&&(a=l.anchors),l.anchor&&(o=l.anchor))}return{endpoints:i||[r,r],anchors:a||[o,o]}}},{key:"revalidate",value:function(t,e){var n=this.getId(t);return this.updateOffset({elId:n,recalc:!0,timestamp:e}),this.repaint(t)}},{key:"repaintEverything",value:function(){var t,e=B();for(t in this._managedElements)this.viewport.refreshElement(t,!0);for(t in this.viewport.recomputeBounds(),this._managedElements)this.repaint(this._managedElements[t].el,e,!0);return this}},{key:"setElementPosition",value:function(t,e,n){var i=this.getId(t);return this.viewport.setPosition(i,e,n),this.repaint(t)}},{key:"repaint",value:function(t,e,n){var i={c:new Set,e:new Set},r=function(t){t.c.forEach((function(t){return i.c.add(t)})),t.e.forEach((function(t){return i.e.add(t)}))};if(!this._suspendDrawing){var o=this.getId(t);if(null!=t){var a=this._getAssociatedElements(t);if(null==e&&(e=B()),!n)for(var s=0;s<a.length;s++)this.updateOffset({elId:this.getId(a[s]),recalc:!0,timestamp:e});if(r(this.router.redraw(o,e,null)),a.length>0)for(var l=0;l<a.length;l++)r(this.router.redraw(this.getId(a[l]),e,null))}}return i}},{key:"unregisterEndpoint",value:function(t){var e=t.getUuid();e&&this.endpointsByUUID.delete(e),function(t,e){null!=t&&O(t.endpoints,(function(t){return t===e}))}(this._managedElements[t.elementId],t);var n=this.endpointsByElement[t.elementId];null!=n&&(this.endpointsByElement[t.elementId]=n.filter((function(e){return e!==t}))),this.fire(Lt,t)}},{key:"_maybePruneEndpoint",value:function(t){return!(!t.deleteOnEmpty||0!==t.connections.length||(this.deleteEndpoint(t),0))}},{key:"deleteEndpoint",value:function(t){var e=this,n="string"==typeof t?this.endpointsByUUID.get(t):t;if(n){var i=n.proxiedBy,r=n.connections.slice();A(r,(function(t){n.detachFromConnection(t,null,!0)})),this.unregisterEndpoint(n),n.destroy(),A(r,(function(t){e.deleteConnection(t,{force:!0,endpointToIgnore:n})})),null!=i&&this.deleteEndpoint(i)}return this}},{key:"addEndpoint",value:function(t,e,n){var i=b({},n=n||{});b(i,e||{});var r=b({element:t},i);return this._internal_newEndpoint(r)}},{key:"addEndpoints",value:function(t,e,n){for(var i=[],r=0,o=e.length;r<o;r++)i.push(this.addEndpoint(t,e[r],n));return i}},{key:"reset",value:function(){var t=this;this.silently((function(){t.endpointsByElement={},t._managedElements={},t.endpointsByUUID.clear(),t.viewport.reset(),t.router.reset(),t.groupManager.reset(),t.connections.length=0}))}},{key:"destroy",value:function(){this.reset(),this.unbind(),this.sourceSelectors.length=0,this.targetSelectors.length=0,this._connectionTypes.clear(),this._endpointTypes.clear()}},{key:"getEndpoints",value:function(t){return this.endpointsByElement[this.getId(t)]||[]}},{key:"getEndpoint",value:function(t){return this.endpointsByUUID.get(t)}},{key:"setEndpointUuid",value:function(t,e){t.uuid&&this.endpointsByUUID.delete(t.uuid),t.uuid=e,this.endpointsByUUID.set(e,t)}},{key:"connect",value:function(t,e){try{var n=this._prepareConnectionParams(t,e),i=this._newConnection(n);return this._finaliseConnection(i,n),i}catch(t){return void $(t)}}},{key:"_prepareConnectionParams",value:function(t,e){var n=b({},t);e&&b(n,e);var i=n;if(i.source&&i.source.endpoint&&(i.sourceEndpoint=i.source),i.target&&i.target.endpoint&&(i.targetEndpoint=i.target),t.uuids&&(i.sourceEndpoint=this.getEndpoint(t.uuids[0]),i.targetEndpoint=this.getEndpoint(t.uuids[1])),null!=i.sourceEndpoint){if(i.sourceEndpoint.isFull())throw"Cannot establish connection: source endpoint is full";if(i.type||(i.type=i.sourceEndpoint.edgeType),i.sourceEndpoint.connectorOverlays){i.overlays=i.overlays||[];for(var r=0,o=i.sourceEndpoint.connectorOverlays.length;r<o;r++)i.overlays.push(i.sourceEndpoint.connectorOverlays[r])}i.sourceEndpoint.scope&&(i.scope=i.sourceEndpoint.scope)}else if(null==i.source)throw"Cannot establish connection: source does not exist";if(null!=i.targetEndpoint){if(i.targetEndpoint.isFull())throw"Cannot establish connection: target endpoint is full"}else if(null==i.target)throw"Cannot establish connection: target does not exist";if(i.sourceEndpoint&&i.targetEndpoint&&!function(t,e){for(var n=t.scope.split(/\s/),i=e.scope.split(/\s/),r=0;r<n.length;r++)for(var o=0;o<i.length;o++)if(i[o]===n[r])return!0;return!1}(i.sourceEndpoint,i.targetEndpoint))throw"Cannot establish connection: scopes do not match";return i}},{key:"_newConnection",value:function(t){t.id="con_"+this._idstamp();var e=new Tr(this,t);return mo(e,this._managedElements[e.sourceId],this._managedElements[e.targetId]),this._paintConnection(e),e}},{key:"_finaliseConnection",value:function(t,e,n){e=e||{},t.suspendedEndpoint||this.connections.push(t),t.pending=null,t.endpoints[0].isTemporarySource=!1,this.repaint(t.source);var i={connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]};this.fire(Dt,i,n),e.doNotFireConnectionEvent||!1===e.fireEvent||this.fire(Pt,i,n)}},{key:"removeAllEndpoints",value:function(t,e){var n=this,i=function(t){var e,i,r=n.getId(t),o=n.endpointsByElement[r];if(o)for(e=0,i=o.length;e<i;e++)n.deleteEndpoint(o[e]);delete n.endpointsByElement[r]};return e&&this._getAssociatedElements(t).map(i),i(t),this}},{key:"_createSourceDefinition",value:function(t,e){var n=b({},e);b(n,t),n.edgeType=n.edgeType||rn;var i=this._deriveEndpointAndAnchorSpec(n.edgeType);n.endpoint=n.endpoint||i.endpoints[0],n.anchor=n.anchor||i.anchors[0];var r=n.maxConnections||-1;return{def:b({},n),uniqueEndpoint:n.uniqueEndpoint,maxConnections:r,enabled:!0,endpoint:null}}},{key:"addSourceSelector",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._createSourceDefinition(e),r=new Yi(t,i,n);return this.sourceSelectors.push(r),r}},{key:"removeSourceSelector",value:function(t){O(this.sourceSelectors,(function(e){return e===t}))}},{key:"removeTargetSelector",value:function(t){O(this.targetSelectors,(function(e){return e===t}))}},{key:"addTargetSelector",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._createTargetDefinition(e),r=new Yi(t,i,n);return this.targetSelectors.push(r),r}},{key:"_createTargetDefinition",value:function(t,e){var n=b({},e);b(n,t),n.edgeType=n.edgeType||rn;var i=n.maxConnections||-1;return{def:b({},n),uniqueEndpoint:n.uniqueEndpoint,maxConnections:i,enabled:!0,endpoint:null}}},{key:"show",value:function(t,e){return this._setVisible(t,ft,e)}},{key:"hide",value:function(t,e){return this._setVisible(t,gt,e)}},{key:"_setVisible",value:function(t,e,n){var i=e===ft,r=null;n&&(r=function(t){t.setVisible(i,!0,!0)});var o=this.getId(t);return this._operation(t,(function(t){if(i&&n){var e=t.sourceId===o?1:0;t.endpoints[e].isVisible()&&t.setVisible(!0)}else t.setVisible(i)}),r),this}},{key:"toggleVisible",value:function(t,e){var n=null;e&&(n=function(t){var e=t.isVisible();t.setVisible(!e)}),this._operation(t,(function(t){var e=t.isVisible();t.setVisible(!e)}),n)}},{key:"_operation",value:function(t,e,n){var i=this.getId(t),r=this.endpointsByElement[i];if(r&&r.length)for(var o=0,a=r.length;o<a;o++){for(var s=0,l=r[o].connections.length;s<l;s++)if(e(r[o].connections[s]))return;n&&n(r[o])}}},{key:"registerConnectionType",value:function(t,e){if(this._connectionTypes.set(t,b({},e)),e.overlays){for(var n={},i=0;i<e.overlays.length;i++){var r=rr(e.overlays[i]);n[r.options.id]=r}this._connectionTypes.get(t).overlays=n}}},{key:"registerConnectionTypes",value:function(t){for(var e in t)this.registerConnectionType(e,t[e])}},{key:"registerEndpointType",value:function(t,e){if(this._endpointTypes.set(t,b({},e)),e.overlays){for(var n={},i=0;i<e.overlays.length;i++){var r=rr(e.overlays[i]);n[r.options.id]=r}this._endpointTypes.get(t).overlays=n}}},{key:"registerEndpointTypes",value:function(t){for(var e in t)this.registerEndpointType(e,t[e])}},{key:"getType",value:function(t,e){return"connection"===e?this.getConnectionType(t):this.getEndpointType(t)}},{key:"getConnectionType",value:function(t){return this._connectionTypes.get(t)}},{key:"getEndpointType",value:function(t){return this._endpointTypes.get(t)}},{key:"importDefaults",value:function(t){for(var e in t)this.defaults[e]=t[e];return null!=this.defaults[Br]&&(this.defaults[Br].strokeWidth=this.defaults[Br].strokeWidth||2),t.container&&this.setContainer(t.container),this}},{key:"restoreDefaults",value:function(){return this.defaults=b({},this._initialDefaults),this}},{key:"getManagedElements",value:function(){return this._managedElements}},{key:"proxyConnection",value:function(t,e,n,i,r){var o,a=null!=t.proxies[e],s=a?t.proxies[e].originalEp.elementId:t.endpoints[e].elementId,l=a?t.proxies[e].originalEp:t.endpoints[e],c=this.getId(n);t.proxies[e]?t.proxies[e].ep.elementId===c?o=t.proxies[e].ep:(t.proxies[e].ep.detachFromConnection(t,e),o=this._internal_newEndpoint({element:n,endpoint:i(t,e),anchor:r(t,e),parameters:{isProxyEndpoint:!0}})):o=this._internal_newEndpoint({element:n,endpoint:i(t,e),anchor:r(t,e),parameters:{isProxyEndpoint:!0}}),o.deleteOnEmpty=!0,t.proxies[e]={ep:o,originalEp:l},this.sourceOrTargetChanged(s,c,t,n,e),l.detachFromConnection(t,null,!0),o.connections=[t],t.endpoints[e]=o,l.proxiedBy=o,l.setVisible(!1),t.setVisible(!0),this.revalidate(n)}},{key:"unproxyConnection",value:function(t,e){if(null!=t.proxies&&null!=t.proxies[e]){var n=t.proxies[e].originalEp.element,i=t.proxies[e].originalEp.elementId,r=t.proxies[e].ep.elementId;t.endpoints[e]=t.proxies[e].originalEp,delete t.proxies[e].originalEp.proxiedBy,this.sourceOrTargetChanged(r,i,t,n,e),t.proxies[e].ep.detachFromConnection(t,null),t.proxies[e].originalEp.addConnection(t),t.isVisible()&&t.proxies[e].originalEp.setVisible(!0),t.proxies[e]=null,-1===_(t.proxies,(function(t){return null!=t}))&&(t.proxies.length=0)}}},{key:"sourceOrTargetChanged",value:function(t,e,n,i,r){t!==e&&(0===r?(n.sourceId=e,n.source=i):1===r&&(n.targetId=e,n.target=i),vo(n,this._managedElements[t]),mo(n,this._managedElements[e]))}},{key:"getGroup",value:function(t){return this.groupManager.getGroup(t)}},{key:"getGroupFor",value:function(t){return this.groupManager.getGroupFor(t)}},{key:"addGroup",value:function(t){return this.groupManager.addGroup(t)}},{key:"addToGroup",value:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=this.groupManager).addToGroup.apply(e,[t,!1].concat(i))}},{key:"collapseGroup",value:function(t){this.groupManager.collapseGroup(t)}},{key:"expandGroup",value:function(t){this.groupManager.expandGroup(t)}},{key:"toggleGroup",value:function(t){this.groupManager.toggleGroup(t)}},{key:"removeGroup",value:function(t,e,n,i){return this.groupManager.removeGroup(t,e,n,i)}},{key:"removeAllGroups",value:function(t,e){this.groupManager.removeAllGroups(t,e,!1)}},{key:"removeFromGroup",value:function(t,e,n){this.groupManager.removeFromGroup(t,n,e),this._appendElement(e,this.getContainer()),this.updateOffset({recalc:!0,elId:this.getId(e)})}},{key:"_paintEndpoint",value:function(t,e){var n=(e=e||{}).timestamp,i=!(!1===e.recalc);if(!n||t.timestamp!==n){var r=this.viewport.getPosition(t.elementId),o=e.offset?{x:e.offset.x,y:e.offset.y}:{x:r.x,y:r.y};if(null!=o){var a=e.anchorLoc;if(null==a){var s={xy:o,wh:r,element:t,timestamp:n};if(i&&this.router.isDynamicAnchor(t)&&t.connections.length>0){var l=function(t){var n=0;if(null!=e.elementWithPrecedence)for(var i=0;i<t.connections.length;i++)if(t.connections[i].sourceId===e.elementWithPrecedence||t.connections[i].targetId===e.elementWithPrecedence){n=i;break}return t.connections[n]}(t),c=l.endpoints[0]===t?1:0,u=0===c?l.sourceId:l.targetId,h=this.viewport.getPosition(u);s.index=0===c?1:0,s.connection=l,s.txy=h,s.twh=h,s.tElement=l.endpoints[c],s.tRotation=this._getRotations(u)}else t.connections.length>0&&(s.connection=t.connections[0]);s.rotation=this._getRotations(t.elementId),a=this.router.computeAnchorLocation(t._anchor,s)}for(var d in t.endpoint.compute(a,this.router.getEndpointOrientation(t),t.paintStyleInUse),this.renderEndpoint(t,t.paintStyleInUse),t.timestamp=n,t.overlays)if(t.overlays.hasOwnProperty(d)){var p=t.overlays[d];p.isVisible()&&(t.overlayPlacements[d]=this.drawOverlay(p,t.endpoint,t.paintStyleInUse,t.getAbsoluteOverlayPosition(p)),this._paintOverlay(p,t.overlayPlacements[d],{xmin:0,ymin:0}))}}}}},{key:"_paintConnection",value:function(t,e){if(!this._suspendDrawing&&!1!==t.visible){var n=(e=e||{}).timestamp;if(null!=n&&n===t.lastPaintedAt)return;if(null==n||n!==t.lastPaintedAt){this.router.computePath(t,n);var i={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};for(var r in t.overlays)if(t.overlays.hasOwnProperty(r)){var o=t.overlays[r];o.isVisible()&&(t.overlayPlacements[r]=this.drawOverlay(o,t.connector,t.paintStyleInUse,t.getAbsoluteOverlayPosition(o)),i.xmin=Math.min(i.xmin,t.overlayPlacements[r].xmin),i.xmax=Math.max(i.xmax,t.overlayPlacements[r].xmax),i.ymin=Math.min(i.ymin,t.overlayPlacements[r].ymin),i.ymax=Math.max(i.ymax,t.overlayPlacements[r].ymax))}var a=parseFloat(""+t.paintStyleInUse.strokeWidth||"1")/2,s=parseFloat(""+t.paintStyleInUse.strokeWidth||"0"),l={xmin:Math.min(t.connector.bounds.xmin-(a+s),i.xmin),ymin:Math.min(t.connector.bounds.ymin-(a+s),i.ymin),xmax:Math.max(t.connector.bounds.xmax+(a+s),i.xmax),ymax:Math.max(t.connector.bounds.ymax+(a+s),i.ymax)};for(var c in this.paintConnector(t.connector,t.paintStyleInUse,l),t.overlays)if(t.overlays.hasOwnProperty(c)){var u=t.overlays[c];u.isVisible()&&this._paintOverlay(u,t.overlayPlacements[c],l)}}t.lastPaintedAt=n}}},{key:"_refreshEndpoint",value:function(t){t._anchor.isFloating||(t.connections.length>0?this.addEndpointClass(t,this.endpointConnectedClass):this.removeEndpointClass(t,this.endpointConnectedClass),t.isFull()?this.addEndpointClass(t,this.endpointFullClass):this.removeEndpointClass(t,this.endpointFullClass))}},{key:"_makeConnector",value:function(t,e,n){return function(t,e,n){var i=uo[e];if(i)return new i(t,n);throw{message:"jsPlumb: unknown connector type '"+e+"'"}}(t,e,n)}},{key:"addOverlay",value:function(t,e,n){if(t.addOverlay(e),!n){var i=t instanceof xr?t.element:t.source;this.revalidate(i)}}},{key:"removeOverlay",value:function(t,e){t.removeOverlay(e);var n=t instanceof xr?t.element:t.source;this.revalidate(n)}},{key:"setOutlineColor",value:function(t,e){t.paintStyleInUse.outlineStroke=e,this._paintConnection(t)}},{key:"setOutlineWidth",value:function(t,e){t.paintStyleInUse.outlineWidth=e,this._paintConnection(t)}},{key:"setColor",value:function(t,e){t.paintStyleInUse.stroke=e,this._paintConnection(t)}},{key:"setLineWidth",value:function(t,e){t.paintStyleInUse.strokeWidth=e,this._paintConnection(t)}},{key:"setLineStyle",value:function(t,e){null!=e.lineWidth&&(t.paintStyleInUse.strokeWidth=e.lineWidth),null!=e.outlineWidth&&(t.paintStyleInUse.outlineWidth=e.outlineWidth),null!=e.color&&(t.paintStyleInUse.stroke=e.color),null!=e.outlineColor&&(t.paintStyleInUse.outlineStroke=e.outlineColor),this._paintConnection(t)}},{key:"getPathData",value:function(t){for(var e="",n=0;n<t.segments.length;n++)e+=t.segments[n].getPath(0===n),e+=" ";return e}}]),n}(ir),bo={};function wo(t,e){bo[t]=e}function So(t,e,n){var r=e,o=i(e.getBoundingClientRect)!==nn?e.getBoundingClientRect():{left:0,top:0,width:0,height:0},a=document.body,s=document.documentElement,l=window.pageYOffset||s.scrollTop||a.scrollTop,c=window.pageXOffset||s.scrollLeft||a.scrollLeft,u=s.clientTop||a.clientTop||0,h=s.clientLeft||a.clientLeft||0,d=o.top+l-u+0*n,p=o.left+c-h+0*n,f=mn(t),g=o.width||r.offsetWidth*n,m=o.height||r.offsetHeight*n;return{x:(f.x-p)/g,y:(f.y-d)/m}}function xo(t){return Or(t)||Ir(t)||Vr(t)}function ko(t,e){t.canvas&&(t.canvas.style.display=e?"block":"none")}function Co(t){t.canvas&&t.canvas.parentNode.removeChild(t.canvas),delete t.canvas}function Mo(t){return t.canvas}function To(t){return nr.getElement(t)}function Eo(t){return nr.getElement(t,t.component,(function(e){var n=t.create(e);return t.instance.addClass(n,t.instance.overlayClass),n}))}function Ao(t,e,n,i){var r=t.x,o=t.y;return e._jsPlumbParentGroup&&e._jsPlumbParentGroup.constrain&&(r=Math.max(t.x,0),o=Math.max(t.y,0),r=Math.min(r,n.w-i.w),o=Math.min(o,n.h-i.h)),{x:r,y:o}}var _o=function(t){l(n,t);var e=d(n);function n(t,i){var o;if(r(this,n),(o=e.call(this,t,i))._instanceIndex=t,s(h(o),"containerType",null),s(h(o),"dragSelection",void 0),s(h(o),"dragManager",void 0),s(h(o),"_connectorClick",void 0),s(h(o),"_connectorDblClick",void 0),s(h(o),"_connectorTap",void 0),s(h(o),"_connectorDblTap",void 0),s(h(o),"_endpointClick",void 0),s(h(o),"_endpointDblClick",void 0),s(h(o),"_overlayClick",void 0),s(h(o),"_overlayDblClick",void 0),s(h(o),"_overlayTap",void 0),s(h(o),"_overlayDblTap",void 0),s(h(o),"_connectorMouseover",void 0),s(h(o),"_connectorMouseout",void 0),s(h(o),"_endpointMouseover",void 0),s(h(o),"_endpointMouseout",void 0),s(h(o),"_connectorContextmenu",void 0),s(h(o),"_connectorMousedown",void 0),s(h(o),"_connectorMouseup",void 0),s(h(o),"_endpointMousedown",void 0),s(h(o),"_endpointMouseup",void 0),s(h(o),"_overlayMouseover",void 0),s(h(o),"_overlayMouseout",void 0),s(h(o),"_elementClick",void 0),s(h(o),"_elementTap",void 0),s(h(o),"_elementDblTap",void 0),s(h(o),"_elementMouseenter",void 0),s(h(o),"_elementMouseexit",void 0),s(h(o),"_elementMousemove",void 0),s(h(o),"_elementMouseup",void 0),s(h(o),"_elementMousedown",void 0),s(h(o),"_elementContextmenu",void 0),s(h(o),"_resizeObserver",void 0),s(h(o),"eventManager",void 0),s(h(o),"draggingClass","jtk-dragging"),s(h(o),"elementDraggingClass","jtk-element-dragging"),s(h(o),"hoverClass","jtk-hover"),s(h(o),"sourceElementDraggingClass","jtk-source-element-dragging"),s(h(o),"targetElementDraggingClass","jtk-target-element-dragging"),s(h(o),"hoverSourceClass","jtk-source-hover"),s(h(o),"hoverTargetClass","jtk-target-hover"),s(h(o),"dragSelectClass","jtk-drag-select"),s(h(o),"managedElementsSelector",void 0),s(h(o),"elementsDraggable",void 0),s(h(o),"elementDragHandler",void 0),s(h(o),"groupDragOptions",void 0),s(h(o),"elementDragOptions",void 0),s(h(o),"svg",{node:function(t,e){return Yt(t,e)},attr:function(t,e){return Zt(t,e)},pos:function(t){return Kt(t)}}),i=i||{},o.containerType=ct(o.getContainer()),o.elementsDraggable=i&&!1!==i.elementsDraggable,o.managedElementsSelector=i&&i.managedElementsSelector||Ut,o.eventManager=new _n,o.dragSelection=new hi(h(o)),o.dragManager=new fi(h(o),o.dragSelection),o.dragManager.addHandler(new tr(h(o))),o.groupDragOptions={constrainFunction:Ao},o.dragManager.addHandler(new er(h(o),o.dragSelection),o.groupDragOptions),o.elementDragHandler=new gi(h(o),o.dragSelection),o.elementDragOptions=i&&i.dragOptions||{},o.dragManager.addHandler(o.elementDragHandler,o.elementDragOptions),i&&i.dragOptions&&i.dragOptions.filter&&o.dragManager.addFilter(i.dragOptions.filter),o._createEventListeners(),o._attachEventDelegates(),!1!==i.resizeObserver)try{o._resizeObserver=new ResizeObserver((function(t){t.filter((function(t){var e=o.getAttribute(t.target,bt);if(null!=e){var n=o.viewport._elementMap.get(e);return!!n&&(n.w!==t.contentRect.width||n.h!==t.contentRect.height)}return!1})).forEach((function(t){return o.revalidate(t.target)}))}))}catch(t){$("WARN: ResizeObserver could not be attached.")}return o}return a(n,[{key:"fireOverlayMethod",value:function(t,e,n){var i=Qt(t.component instanceof Tr?se:oe,e);n._jsPlumbOverlay=t,t.fire(e,{e:n,overlay:t}),this.fire(i,t.component,n)}},{key:"addDragFilter",value:function(t,e){this.dragManager.addFilter(t,e)}},{key:"removeDragFilter",value:function(t){this.dragManager.removeFilter(t)}},{key:"setDragGrid",value:function(t){this.dragManager.setOption(this.elementDragHandler,{grid:t})}},{key:"setDragConstrainFunction",value:function(t){this.dragManager.setOption(this.elementDragHandler,{constrainFunction:t})}},{key:"_removeElement",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}},{key:"_appendElement",value:function(t,e){e&&e.appendChild(t)}},{key:"_appendElementToGroup",value:function(t,e){this.getGroupContentArea(t).appendChild(e)}},{key:"_appendElementToContainer",value:function(t){this._appendElement(t,this.getContainer())}},{key:"_getAssociatedElements",value:function(t){var e=[];if(3!==t.nodeType&&8!==t.nodeType){var n=t.querySelectorAll(Ut);Array.prototype.push.apply(e,n)}return e.filter((function(t){return 3!==t.nodeType&&8!==t.nodeType}))}},{key:"shouldFireEvent",value:function(t,e,n){return!0}},{key:"getClass",value:function(t){return function(t){return Q(t)}(t)}},{key:"addClass",value:function(t,e){nt(t,e)}},{key:"hasClass",value:function(t,e){return function(t,e){return t.classList?t.classList.contains(e):-1!==Q(t).indexOf(e)}(t,e)}},{key:"removeClass",value:function(t,e){it(t,e)}},{key:"toggleClass",value:function(t,e){!function(t,e){var n=this,i=function(t,e){null!=t&&null!=e&&e.length>0&&(t.classList?t.classList.toggle(e):n.hasClass(t,e)?n.removeClass(t,e):n.addClass(t,e))};et(t)?A(t,(function(t){return i(t,e)})):i(t,e)}(t,e)}},{key:"setAttribute",value:function(t,e,n){t.setAttribute(e,n)}},{key:"getAttribute",value:function(t,e){return t.getAttribute(e)}},{key:"setAttributes",value:function(t,e){for(var n in e)t.setAttribute(n,e[n])}},{key:"removeAttribute",value:function(t,e){t.removeAttribute&&t.removeAttribute(e)}},{key:"on",value:function(t,e,n,i){var r=this,o=function(t){null==i?r.eventManager.on(t,e,n):r.eventManager.on(t,e,n,i)};return et(t)?A(t,(function(t){return o(t)})):o(t),this}},{key:"off",value:function(t,e,n){var i=this;return et(t)?A(t,(function(t){return i.eventManager.off(t,e,n)})):this.eventManager.off(t,e,n),this}},{key:"trigger",value:function(t,e,n,i,r){this.eventManager.trigger(t,e,n,i,r)}},{key:"getOffsetRelativeToRoot",value:function(t){return at(t)}},{key:"getOffset",value:function(t){for(var e,n=t,i=this.getContainer(),r=this.getPosition(n),o=t!==i&&n.offsetParent!==i?n.offsetParent:null;null!=o;)r.x+=o.offsetLeft,r.y+=o.offsetTop,null!=(e=o)&&e!==document.body&&(e.scrollTop>0||e.scrollLeft>0)&&(r.x-=e.scrollLeft,r.y-=e.scrollTop),o=o.offsetParent===i?null:o.offsetParent;if(null!=i&&(i.scrollTop>0||i.scrollLeft>0)){var a=null!=n.offsetParent?this.getStyle(n.offsetParent,We):"static",s=this.getStyle(n,We);s!==mt&&s!==vt&&a!==mt&&a!==vt&&(r.x-=i.scrollLeft,r.y-=i.scrollTop)}return r}},{key:"getSize",value:function(t){var e=t;return null!=e.offsetWidth?function(t){return{w:t.offsetWidth,h:t.offsetHeight}}(t):e.width&&e.width.baseVal?function(t){try{return{w:parseFloat(t.width.baseVal.value),h:parseFloat(t.height.baseVal.value)}}catch(t){return{w:0,h:0}}}(e):void 0}},{key:"getPosition",value:function(t){var e=t;return null!=e.offsetLeft?{x:parseFloat(e.offsetLeft),y:parseFloat(e.offsetTop)}:e.x&&e.x.baseVal?function(t){try{return{x:parseFloat(t.x.baseVal.value),y:parseFloat(t.y.baseVal.value)}}catch(t){return{x:0,y:0}}}(e):void 0}},{key:"getStyle",value:function(t,e){return i(window.getComputedStyle)!==nn?getComputedStyle(t,null).getPropertyValue(e):t.currentStyle[e]}},{key:"getGroupContentArea",value:function(t){var e=this.getSelector(t.el,Xe);return e&&e.length>0?e[0]:t.el}},{key:"getSelector",value:function(t,e){var n=null;if(1===arguments.length){if(!S(t)){var i=document.createDocumentFragment();return i.appendChild(t),L(i.childNodes)}n=L(document.querySelectorAll(t))}else n=L(t.querySelectorAll(e));return n}},{key:"setPosition",value:function(t,e){var n=t;n.style.left=e.x+"px",n.style.top=e.y+"px"}},{key:"setDraggable",value:function(t,e){e?this.removeAttribute(t,wt):this.setAttribute(t,wt,on)}},{key:"isDraggable",value:function(t){var e=this.getAttribute(t,wt);return null==e||e===an}},{key:"toggleDraggable",value:function(t){var e=this.isDraggable(t);return this.setDraggable(t,!e),!e}},{key:"_createEventListeners",value:function(){var t=function(t,e){if(!e.defaultPrevented&&null==e._jsPlumbOverlay){var n=X(J(e),Ze,this.getContainer(),!0);this.fire(t,n.jtk.connector.connection,e)}};this._connectorClick=t.bind(this,Fe),this._connectorDblClick=t.bind(this,Be),this._connectorTap=t.bind(this,qe),this._connectorDblTap=t.bind(this,ze);var e=function(t,e){var n=J(e).parentNode;if(n.jtk&&n.jtk.connector){var i=n.jtk.connector,r=i.connection;this.setConnectorHover(i,t),t?(this.addClass(r.source,this.hoverSourceClass),this.addClass(r.target,this.hoverTargetClass)):(this.removeClass(r.source,this.hoverSourceClass),this.removeClass(r.target,this.hoverTargetClass)),this.fire(t?Ue:je,n.jtk.connector.connection,e)}};this._connectorMouseover=e.bind(this,!0),this._connectorMouseout=e.bind(this,!1);var n=function(t,e){var n=J(e).parentNode;n.jtk&&n.jtk.connector&&this.fire(t?Ge:$e,n.jtk.connector.connection,e)};this._connectorMouseup=n.bind(this,!0),this._connectorMousedown=n.bind(this,!1),this._connectorContextmenu=function(t){var e=J(t).parentNode;e.jtk&&e.jtk.connector&&this.fire(He,e.jtk.connector.connection,t)}.bind(this);var i=function(t,e,n){e.defaultPrevented||null!=e._jsPlumbOverlay||this.fire(t,n.jtk.endpoint,e)};this._endpointClick=i.bind(this,Oe),this._endpointDblClick=i.bind(this,Le);var r=function(t,e){var n=J(e);n.jtk&&n.jtk.endpoint&&(this.setEndpointHover(n.jtk.endpoint,t),this.fire(t?Re:Ie,n.jtk.endpoint,e))};this._endpointMouseover=r.bind(this,!0),this._endpointMouseout=r.bind(this,!1);var o=function(t,e){var n=J(e);n.jtk&&n.jtk.endpoint&&this.fire(t?Ve:Ne,n.jtk.endpoint,e)};this._endpointMouseup=o.bind(this,!0),this._endpointMousedown=o.bind(this,!1);var a=function(t,e){var n=X(J(e),Je,this.getContainer(),!0).jtk.overlay;n&&this.fireOverlayMethod(n,t,e)}.bind(this);this._overlayClick=a.bind(this,le),this._overlayDblClick=a.bind(this,ue),this._overlayTap=a.bind(this,be),this._overlayDblTap=a.bind(this,he);var s=function(t,e){var n=X(J(e),Je,this.getContainer(),!0).jtk.overlay;n&&this.setOverlayHover(n,t)};this._overlayMouseover=s.bind(this,!0),this._overlayMouseout=s.bind(this,!1),this._elementClick=function(t,e,n){e.defaultPrevented||this.fire(1===e.detail?xe:ke,n,e)}.bind(this,xe),this._elementTap=function(t,e,n){e.defaultPrevented||this.fire(De,n,e)}.bind(this,De),this._elementDblTap=function(t,e,n){e.defaultPrevented||this.fire(Ce,n,e)}.bind(this,Ce);var l=function(t,e){this.fire(t?Te:Me,J(e),e)};this._elementMouseenter=l.bind(this,!0),this._elementMouseexit=l.bind(this,!1),this._elementMousemove=function(t){this.fire(Ee,J(t),t)}.bind(this),this._elementMouseup=function(t){this.fire(Ae,J(t),t)}.bind(this),this._elementMousedown=function(t){this.fire(_e,J(t),t)}.bind(this),this._elementContextmenu=function(t){this.fire(Pe,J(t),t)}.bind(this)}},{key:"_attachEventDelegates",value:function(){var t=this.getContainer();this.eventManager.on(t,le,Je,this._overlayClick),this.eventManager.on(t,ue,Je,this._overlayDblClick),this.eventManager.on(t,be,Je,this._overlayTap),this.eventManager.on(t,he,Je,this._overlayDblTap),this.eventManager.on(t,le,Ze,this._connectorClick),this.eventManager.on(t,ue,Ze,this._connectorDblClick),this.eventManager.on(t,be,Ze,this._connectorTap),this.eventManager.on(t,he,Ze,this._connectorDblTap),this.eventManager.on(t,le,Ye,this._endpointClick),this.eventManager.on(t,ue,Ye,this._endpointDblClick),this.eventManager.on(t,le,this.managedElementsSelector,this._elementClick),this.eventManager.on(t,be,this.managedElementsSelector,this._elementTap),this.eventManager.on(t,he,this.managedElementsSelector,this._elementDblTap),this.eventManager.on(t,ye,Ze,this._connectorMouseover),this.eventManager.on(t,ve,Ze,this._connectorMouseout),this.eventManager.on(t,ce,Ze,this._connectorContextmenu),this.eventManager.on(t,me,Ze,this._connectorMouseup),this.eventManager.on(t,de,Ze,this._connectorMousedown),this.eventManager.on(t,ye,Ye,this._endpointMouseover),this.eventManager.on(t,ve,Ye,this._endpointMouseout),this.eventManager.on(t,me,Ye,this._endpointMouseup),this.eventManager.on(t,de,Ye,this._endpointMousedown),this.eventManager.on(t,ye,Je,this._overlayMouseover),this.eventManager.on(t,ve,Je,this._overlayMouseout),this.eventManager.on(t,ye,Ut,this._elementMouseenter),this.eventManager.on(t,ve,Ut,this._elementMouseexit),this.eventManager.on(t,ge,Ut,this._elementMousemove),this.eventManager.on(t,me,Ut,this._elementMouseup),this.eventManager.on(t,de,Ut,this._elementMousedown),this.eventManager.on(t,ce,Ut,this._elementContextmenu)}},{key:"_detachEventDelegates",value:function(){var t=this.getContainer();t&&(this.eventManager.off(t,le,this._connectorClick),this.eventManager.off(t,ue,this._connectorDblClick),this.eventManager.off(t,be,this._connectorTap),this.eventManager.off(t,he,this._connectorDblTap),this.eventManager.off(t,le,this._endpointClick),this.eventManager.off(t,ue,this._endpointDblClick),this.eventManager.off(t,le,this._overlayClick),this.eventManager.off(t,ue,this._overlayDblClick),this.eventManager.off(t,be,this._overlayTap),this.eventManager.off(t,he,this._overlayDblTap),this.eventManager.off(t,le,this._elementClick),this.eventManager.off(t,be,this._elementTap),this.eventManager.off(t,he,this._elementDblTap),this.eventManager.off(t,ye,this._connectorMouseover),this.eventManager.off(t,ve,this._connectorMouseout),this.eventManager.off(t,ce,this._connectorContextmenu),this.eventManager.off(t,me,this._connectorMouseup),this.eventManager.off(t,de,this._connectorMousedown),this.eventManager.off(t,ye,this._endpointMouseover),this.eventManager.off(t,ve,this._endpointMouseout),this.eventManager.off(t,me,this._endpointMouseup),this.eventManager.off(t,de,this._endpointMousedown),this.eventManager.off(t,ye,this._overlayMouseover),this.eventManager.off(t,ve,this._overlayMouseout),this.eventManager.off(t,pe,this._elementMouseenter),this.eventManager.off(t,fe,this._elementMouseexit),this.eventManager.off(t,ge,this._elementMousemove),this.eventManager.off(t,me,this._elementMouseup),this.eventManager.off(t,de,this._elementMousedown),this.eventManager.off(t,ce,this._elementContextmenu))}},{key:"setContainer",value:function(t){var e,i=this;if(t===document||t===document.body)throw new Error("Cannot set document or document.body as container element");this._detachEventDelegates(),null!=this.dragManager&&(e=this.dragManager.reset()),this.setAttribute(t,ne,B().replace("-",""));var r=this.getContainer();null!=r&&(r.removeAttribute(ne),A(L(r.childNodes).filter((function(t){return null!=t&&(i.hasClass(t,Ct)||i.hasClass(t,Mt)||i.hasClass(t,_t)||t.getAttribute&&null!=t.getAttribute(bt))})),(function(e){t.appendChild(e)}))),p(c(n.prototype),"setContainer",this).call(this,t),this.containerType=ct(t),null!=this.eventManager&&this._attachEventDelegates(),null!=this.dragManager&&(this.dragManager.addHandler(new tr(this)),this.dragManager.addHandler(new er(this,this.dragSelection),this.groupDragOptions),this.elementDragHandler=new gi(this,this.dragSelection),this.dragManager.addHandler(this.elementDragHandler,this.elementDragOptions),null!=e&&this.dragManager.setFilters(e))}},{key:"reset",value:function(){p(c(n.prototype),"reset",this).call(this),this._resizeObserver&&this._resizeObserver.disconnect(),A(this.getContainer().querySelectorAll([Ut,Ye,Ze,Je].join(",")),(function(t){return t.parentNode&&t.parentNode.removeChild(t)}))}},{key:"destroy",value:function(){this._detachEventDelegates(),null!=this.dragManager&&this.dragManager.reset(),this.clearDragSelection(),p(c(n.prototype),"destroy",this).call(this)}},{key:"unmanage",value:function(t,e){null!=this._resizeObserver&&this._resizeObserver.unobserve(t),this.removeFromDragSelection(t),p(c(n.prototype),"unmanage",this).call(this,t,e)}},{key:"addToDragSelection",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];A(n,(function(e){return t.dragSelection.add(e)}))}},{key:"clearDragSelection",value:function(){this.dragSelection.clear()}},{key:"removeFromDragSelection",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];A(n,(function(e){return t.dragSelection.remove(e)}))}},{key:"toggleDragSelection",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];A(n,(function(e){return t.dragSelection.toggle(e)}))}},{key:"addToDragGroup",value:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.elementDragHandler).addToDragGroup.apply(e,[t].concat(i))}},{key:"removeFromDragGroup",value:function(){var t;(t=this.elementDragHandler).removeFromDragGroup.apply(t,arguments)}},{key:"setDragGroupState",value:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.elementDragHandler).setDragGroupState.apply(e,[t].concat(i))}},{key:"clearDragGroup",value:function(t){this.elementDragHandler.clearDragGroup(t)}},{key:"consume",value:function(t,e){K(t,e)}},{key:"rotate",value:function(t,e,i){var r=this.getId(t);return this._managedElements[r]?(this._managedElements[r].el.style.transform="rotate("+e+"deg)",this._managedElements[r].el.style.transformOrigin="center center",p(c(n.prototype),"rotate",this).call(this,t,e,i)):{c:new Set,e:new Set}}},{key:"addOverlayClass",value:function(t,e){if(ur(t))t.instance.addClass(To(t),e);else if(xo(t))t.instance.addClass(Er(t),e);else{if(!Fr(t))throw"Could not add class to overlay of type ["+t.type+"]";t.instance.addClass(Eo(t),e)}}},{key:"removeOverlayClass",value:function(t,e){if(ur(t))t.instance.removeClass(To(t),e);else if(xo(t))t.instance.removeClass(Er(t),e);else{if(!Fr(t))throw"Could not remove class from overlay of type ["+t.type+"]";t.instance.removeClass(Eo(t),e)}}},{key:"_paintOverlay",value:function(t,e,n){if(ur(t)){To(t);var i=t.component.getXY();t.canvas.style.left=i.x+e.d.minx+"px",t.canvas.style.top=i.y+e.d.miny+"px"}else if(xo(t))!function(t,e,n,i){Er(t);var r=[0,0];i.xmin<0&&(r[0]=-i.xmin),i.ymin<0&&(r[1]=-i.ymin);var o={d:e,stroke:n.stroke?n.stroke:null,fill:n.fill?n.fill:null,transform:"translate("+r[0]+","+r[1]+")","pointer-events":"visibleStroke"};Zt(t.path,o)}(t,isNaN(e.d.cxy.x)||isNaN(e.d.cxy.y)?"M 0 0":"M"+e.d.hxy.x+","+e.d.hxy.y+" L"+e.d.tail[0].x+","+e.d.tail[0].y+" L"+e.d.cxy.x+","+e.d.cxy.y+" L"+e.d.tail[1].x+","+e.d.tail[1].y+" Z",e,n);else{if(!Fr(t))throw"Could not paint overlay of type ["+t.type+"]";Eo(t);var r=t.component.getXY();t.canvas.style.left=r.x+e.d.minx+"px",t.canvas.style.top=r.y+e.d.miny+"px"}}},{key:"setOverlayVisible",value:function(t,e){var n=e?"block":"none";function i(t){null!=t&&(t.style.display=n)}ur(t)?i(To(t)):Fr(t)?i(Eo(t)):xo(t)&&i(t.path)}},{key:"reattachOverlay",value:function(t,e){ur(t)?t.instance._appendElement(To(t),this.getContainer()):Fr(t)?t.instance._appendElement(Eo(t),this.getContainer()):xo(t)&&this._appendElement(Er(t),e.connector.canvas)}},{key:"setOverlayHover",value:function(t,e){var n;ur(t)?n=To(t):Fr(t)?n=Eo(t):xo(t)&&(n=Er(t)),null!=n&&(null!=this.hoverClass&&(e?this.addClass(n,this.hoverClass):this.removeClass(n,this.hoverClass)),this.setHover(t.component,e))}},{key:"destroyOverlay",value:function(t){if(ur(t)){var e=To(t);e.parentNode.removeChild(e),delete t.canvas,delete t.cachedDimensions}else if(Or(t)||Ir(t)||Vr(t))!function(t){var e=t;null!=e.path&&null!=e.path.parentNode&&e.path.parentNode.removeChild(e.path),null!=e.bgPath&&null!=e.bgPath.parentNode&&e.bgPath.parentNode.removeChild(e.bgPath),delete e.path,delete e.bgPath}(t);else if(Fr(t)){var n=Eo(t);n.parentNode.removeChild(n),delete t.canvas,delete t.cachedDimensions}}},{key:"drawOverlay",value:function(t,e,n,i){if(ur(t)||Fr(t)){var r=nr._getDimensions(t);if(null!=r&&null!=r.w&&null!=r.h){var o={x:0,y:0};if(i)o={x:i.x,y:i.y};else if(e instanceof wi){var a=Array.isArray(t.location)?t.location:[t.location,t.location];o={x:a[0]*e.w,y:a[1]*e.h}}else{var s=t.location,l=!1;(S(t.location)||t.location<0||t.location>1)&&(s=parseInt(""+t.location,10),l=!0),o=e.pointOnPath(s,l)}var c=o.x-r.w/2,u=o.y-r.h/2;return{component:t,d:{minx:c,miny:u,td:r,cxy:o},xmin:c,xmax:c+r.w,ymin:u,ymax:u+r.h}}return{xmin:0,xmax:0,ymin:0,ymax:0}}if(Or(t)||Ir(t)||Vr(t))return t.draw(e,n,i);throw"Could not draw overlay of type ["+t.type+"]"}},{key:"updateLabel",value:function(t){if(C(t.label)){var e=t.label(this);To(t).innerText=null!=e?e:""}else null==t.labelText&&(t.labelText=t.label,null!=t.labelText?To(t).innerText=t.labelText:To(t).innerText="")}},{key:"setHover",value:function(t,e){t._hover=e,t instanceof xr&&null!=t.endpoint?this.setEndpointHover(t,e,-1):t instanceof Tr&&null!=t.connector&&this.setConnectorHover(t.connector,e)}},{key:"paintConnector",value:function(t,e,n){!function(t,e,n,i){!function(t,e){if(null!=e.canvas)return e.canvas;var n=Yt("svg",{style:"",width:"0",height:"0","pointer-events":gt,position:mt});e.canvas=n,t._appendElement(e.canvas,t.getContainer()),null!=e.cssClass&&t.addClass(n,e.cssClass),t.addClass(n,t.connectorClass),n.jtk=n.jtk||{},n.jtk.connector=e}(t,e),Ar.paint(e,t,n,i);var r=[0,0];if(i.xmin<0&&(r[0]=-i.xmin),i.ymin<0&&(r[1]=-i.ymin),e.segments.length>0){var o={d:t.getPathData(e),transform:"translate("+r[0]+","+r[1]+")","pointer-events":"visibleStroke"},a=null;if(n.outlineStroke){var s=n.outlineWidth||1,l=n.strokeWidth+2*s;(a=b({},n)).stroke=n.outlineStroke,a.strokeWidth=l,null==e.bgPath?(e.bgPath=Yt(qt,o),t.addClass(e.bgPath,t.connectorOutlineClass),Jt(e.canvas,e.bgPath,0)):Zt(e.bgPath,o),Xt(e.canvas,e.bgPath,a)}var c=e;null==c.path?(c.path=Yt(qt,o),Jt(c.canvas,c.path,n.outlineStroke?1:0)):(c.path.parentNode!==c.canvas&&Jt(c.canvas,c.path,n.outlineStroke?1:0),Zt(e.path,o)),Xt(e.canvas,e.path,n)}}(this,t,e,n)}},{key:"setConnectorHover",value:function(t,e,n){if(!1===e||!this.currentlyDragging&&!this.isHoverSuspended()){var i=t.canvas;null!=i&&(null!=t.hoverClass&&(e?this.addClass(i,t.hoverClass):this.removeClass(i,t.hoverClass)),e?this.addClass(i,this.hoverClass):this.removeClass(i,this.hoverClass)),null!=t.connection.hoverPaintStyle&&(t.connection.paintStyleInUse=e?t.connection.hoverPaintStyle:t.connection.paintStyle,this._suspendDrawing||this._paintConnection(t.connection)),t.connection.endpoints[0]!==n&&this.setEndpointHover(t.connection.endpoints[0],e,0,!0),t.connection.endpoints[1]!==n&&this.setEndpointHover(t.connection.endpoints[1],e,1,!0)}}},{key:"destroyConnector",value:function(t){null!=t.connector&&Co(t.connector)}},{key:"addConnectorClass",value:function(t,e){t.canvas&&this.addClass(t.canvas,e)}},{key:"removeConnectorClass",value:function(t,e){t.canvas&&this.removeClass(t.canvas,e)}},{key:"getConnectorClass",value:function(t){return t.canvas?t.canvas.className.baseVal:""}},{key:"setConnectorVisible",value:function(t,e){ko(t,e)}},{key:"applyConnectorType",value:function(t,e){if(t.canvas&&e.cssClass){var n=Array.isArray(e.cssClass)?e.cssClass:[e.cssClass];this.addClass(t.canvas,n.join(" "))}}},{key:"addEndpointClass",value:function(t,e){var n=Mo(t.endpoint);null!=n&&this.addClass(n,e)}},{key:"applyEndpointType",value:function(t,e){if(e.cssClass){var n=Mo(t.endpoint);if(n){var i=Array.isArray(e.cssClass)?e.cssClass:[e.cssClass];this.addClass(n,i.join(" "))}}}},{key:"destroyEndpoint",value:function(t){var e=this.endpointAnchorClassPrefix+(t.currentAnchorClass?"-"+t.currentAnchorClass:"");this.removeClass(t.element,e),Co(t.endpoint)}},{key:"renderEndpoint",value:function(t,e){var n=bo[t.endpoint.type];null!=n?_r.paint(t.endpoint,n,e):$("jsPlumb: no endpoint renderer found for type ["+t.endpoint.type+"]")}},{key:"removeEndpointClass",value:function(t,e){var n=Mo(t.endpoint);null!=n&&this.removeClass(n,e)}},{key:"getEndpointClass",value:function(t){var e=Mo(t.endpoint);return null!=e?e.className:""}},{key:"setEndpointHover",value:function(t,e,n,i){if(null!=t&&(!1===e||!this.currentlyDragging&&!this.isHoverSuspended())){var r=Mo(t.endpoint);if(null!=r&&(null!=t.hoverClass&&(e?this.addClass(r,t.hoverClass):this.removeClass(r,t.hoverClass)),0===n||1===n)){var o=0===n?this.hoverSourceClass:this.hoverTargetClass;e?this.addClass(r,o):this.removeClass(r,o)}if(null!=t.hoverPaintStyle&&(t.paintStyleInUse=e?t.hoverPaintStyle:t.paintStyle,this._suspendDrawing||this.renderEndpoint(t,t.paintStyleInUse)),!i)for(var a=0;a<t.connections.length;a++)this.setConnectorHover(t.connections[a].connector,e,t)}}},{key:"setEndpointVisible",value:function(t,e){ko(t.endpoint,e)}},{key:"setGroupVisible",value:function(t,e){for(var n=t.el.querySelectorAll(Ut),i=0;i<n.length;i++)e?this.show(n[i],!0):this.hide(n[i],!0)}},{key:"deleteConnection",value:function(t,e){return null!=t&&!0!==t.deleted&&(!0!==t.endpoints[0].deleted&&this.setEndpointHover(t.endpoints[0],!1,0,!0),!0!==t.endpoints[1].deleted&&this.setEndpointHover(t.endpoints[1],!1,1,!0),p(c(n.prototype),"deleteConnection",this).call(this,t,e))}},{key:"addSourceSelector",value:function(t,e,i){return this.addDragFilter(t),p(c(n.prototype),"addSourceSelector",this).call(this,t,e,i)}},{key:"removeSourceSelector",value:function(t){this.removeDragFilter(t.selector),p(c(n.prototype),"removeSourceSelector",this).call(this,t)}},{key:"manage",value:function(t,e,i){if(this.containerType===G.SVG&&ct(t)!==G.SVG)throw new Error("ERROR: cannot manage non-svg element when container is an SVG element.");var r=p(c(n.prototype),"manage",this).call(this,t,e,i);return null!=r&&null!=this._resizeObserver&&this._resizeObserver.observe(r.el),r}}]),n}(yo),Po=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),s(h(o=e.call(this,t,i)),"width",void 0),s(h(o),"height",void 0),s(h(o),"type",n.type),i=i||{},o.width=i.width||10,o.height=i.height||10,o}return a(n,null,[{key:"_getParams",value:function(t){return{width:t.width,height:t.height}}}]),n}(wi);s(Po,"type","Rectangle");var Do={type:Po.type,cls:Po,compute:function(t,e,n,i){var r=i.width||t.width,o=i.height||t.height,a=e.curX-r/2,s=e.curY-o/2;return t.x=a,t.y=s,t.w=r,t.h=o,[a,s,r,o]},getParams:function(t){return{width:t.width,height:t.height}}},Oo=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),s(h(o=e.call(this,t,i)),"type",n.type),o}return n}(wi);s(Oo,"type","Blank");var Lo,Io={type:Oo.type,cls:Oo,compute:function(t,e,n,i){return t.x=e.curX,t.y=e.curY,t.w=10,t.h=0,[e.curX,e.curY,10,0]},getParams:function(t){return{}}},Ro={width:10,height:0,fill:"transparent",stroke:"transparent"};wo(zr.type,{makeNode:function(t,e){return Yt("circle",{cx:t.w/2,cy:t.h/2,r:t.radius})},updateNode:function(t,e){Zt(e,{cx:""+t.w/2,cy:""+t.h/2,r:""+t.radius})}}),wo(Oo.type,{makeNode:function(t,e){return Yt("rect",Ro)},updateNode:function(t,e){Zt(e,Ro)}}),wo(Po.type,{makeNode:function(t,e){return Yt("rect",{width:t.w,height:t.h})},updateNode:function(t,e){Zt(e,{width:t.w,height:t.h})}}),function(t){t[t.top=0]="top",t[t.bottom=1]="bottom"}(Lo||(Lo={}));var Vo=new Map;Vo.set(Lo.top,[ee.TopRight,ee.TopLeft]),Vo.set(Lo.bottom,[ee.BottomRight,ee.BottomLeft]);var No={deriveAnchor:function(t,e,n,i){return Vo.get(t)[e]}},Fo="jtk-scrollable-list",Bo=ht(Fo),zo="scroll",jo=(a((function t(e,n){var i=this;r(this,t),this.instance=e,s(this,"options",void 0),s(this,"count",void 0),s(this,"lists",void 0),this.count=0,this.lists={},this.options=n||{},this.instance.bind(Rt,(function(t){for(var e=i.instance.getSelector(t.el,Bo),n=0;n<e.length;n++)i.addList(e[n])})),this.instance.bind(Nt,(function(t){i.removeList(t.el)})),this.instance.bind(Pt,(function(t,e){if(null==e){var n=i.findParentList(t.target);null!=n&&n.newConnection(t.connection,t.target,1);var r=i.findParentList(t.source);null!=r&&r.newConnection(t.connection,t.source,0)}})),this.instance.bind(zt,(function(t){var e=t.dropEndpoint.element,n=i.findParentList(e);return null==n||e.offsetTop>=n.domElement.scrollTop&&e.offsetTop+e.offsetHeight<=n.domElement.scrollTop+n.domElement.offsetHeight}))}),[{key:"addList",value:function(t,e){var n=b({},No);b(n,this.options),e=b(n,e||{});var i=[this.instance._instanceIndex,this.count++].join("_");return this.lists[i]=new jo(this.instance,t,e,i),this.lists[i]}},{key:"getList",value:function(t){var e=this.instance.getAttribute(t,Fo);if(null!=e)return this.lists[e]}},{key:"removeList",value:function(t){var e=this.getList(t);e&&(e.destroy(),delete this.lists[e.id])}},{key:"findParentList",value:function(t){for(var e,n=t.parentNode,i=this.instance.getContainer();null!=n&&n!==i&&n!==document;){if(null!=(e=this.getList(n)))return e;n=n.parentNode}}}]),function(){function t(e,n,i,o){r(this,t),this.instance=e,this.el=n,this.options=i,this.id=o,s(this,"_scrollHandler",void 0),s(this,"domElement",void 0),s(this,"elId",void 0),this.domElement=n,this.elId=this.instance.getId(n),e.setAttribute(n,Fo,o),this._scrollHandler=this.scrollHandler.bind(this),this.domElement._jsPlumbScrollHandler=this._scrollHandler,e.on(n,zo,this._scrollHandler),this._scrollHandler()}return a(t,[{key:"deriveAnchor",value:function(t,e,n,i){return this.options.anchor?this.options.anchor:this.options.deriveAnchor(t,e,n,i)}},{key:"deriveEndpoint",value:function(t,e,n,i){return this.options.deriveEndpoint?this.options.deriveEndpoint(t,e,n,i):this.options.endpoint?this.options.endpoint:n.endpoint.type}},{key:"newConnection",value:function(t,e,n){e.offsetTop<this.el.scrollTop?this._proxyConnection(e,t,n,Lo.top):e.offsetTop+e.offsetHeight>this.el.scrollTop+this.domElement.offsetHeight&&this._proxyConnection(e,t,n,Lo.bottom)}},{key:"scrollHandler",value:function(){for(var t=this,e=this.instance.getSelector(this.el,Ut),n=function(n){if(e[n].offsetTop<t.el.scrollTop)e[n]._jsPlumbProxies=e[n]._jsPlumbProxies||[],t.instance.select({source:e[n]}).each((function(i){t._proxyConnection(e[n],i,0,Lo.top)})),t.instance.select({target:e[n]}).each((function(i){t._proxyConnection(e[n],i,1,Lo.top)}));else if(e[n].offsetTop+e[n].offsetHeight>t.el.scrollTop+t.domElement.offsetHeight)e[n]._jsPlumbProxies=e[n]._jsPlumbProxies||[],t.instance.select({source:e[n]}).each((function(i){t._proxyConnection(e[n],i,0,Lo.bottom)})),t.instance.select({target:e[n]}).each((function(i){t._proxyConnection(e[n],i,1,Lo.bottom)}));else if(e[n]._jsPlumbProxies){for(var i=0;i<e[n]._jsPlumbProxies.length;i++)t.instance.unproxyConnection(e[n]._jsPlumbProxies[i][0],e[n]._jsPlumbProxies[i][1]);delete e[n]._jsPlumbProxies}t.instance.revalidate(e[n])},i=0;i<e.length;i++)n(i)}},{key:"_proxyConnection",value:function(t,e,n,i){var r=this;this.instance.proxyConnection(e,n,this.domElement,(function(t,n){return r.deriveEndpoint(i,n,e.endpoints[n],e)}),(function(t,n){return r.deriveAnchor(i,n,e.endpoints[n],e)})),t._jsPlumbProxies=t._jsPlumbProxies||[],t._jsPlumbProxies.push([e,n])}},{key:"destroy",value:function(){this.instance.off(this.el,zo,this._scrollHandler),delete this.domElement._jsPlumbScrollHandler;for(var t=this.instance.getSelector(this.el,Ut),e=0;e<t.length;e++)if(t[e]._jsPlumbProxies){for(var n=0;n<t[e]._jsPlumbProxies.length;n++)this.instance.unproxyConnection(t[e]._jsPlumbProxies[n][0],t[e]._jsPlumbProxies[n][1]);delete t[e]._jsPlumbProxies}}}]),t}());function Uo(t){var e=Math.floor(t),n=Math.ceil(t);return t-e<1e-10?e:n-t<1e-10?n:t}var Go=function(t){l(n,t);var e=d(n);function n(t){var i;r(this,n),s(h(i=e.call(this,t)),"type",n.segmentType),s(h(i),"cx",void 0),s(h(i),"cy",void 0),s(h(i),"radius",void 0),s(h(i),"anticlockwise",void 0),s(h(i),"startAngle",void 0),s(h(i),"endAngle",void 0),s(h(i),"sweep",void 0),s(h(i),"length",void 0),s(h(i),"circumference",void 0),s(h(i),"frac",void 0),i.cx=t.cx,i.cy=t.cy,i.radius=t.r,i.anticlockwise=t.ac,t.startAngle&&t.endAngle?(i.startAngle=t.startAngle,i.endAngle=t.endAngle,i.x1=i.cx+i.radius*Math.cos(i.startAngle),i.y1=i.cy+i.radius*Math.sin(i.startAngle),i.x2=i.cx+i.radius*Math.cos(i.endAngle),i.y2=i.cy+i.radius*Math.sin(i.endAngle)):(i.startAngle=i._calcAngle(i.x1,i.y1),i.endAngle=i._calcAngle(i.x2,i.y2)),i.endAngle<0&&(i.endAngle+=On),i.startAngle<0&&(i.startAngle+=On);var o=i.endAngle<i.startAngle?i.endAngle+On:i.endAngle;return i.sweep=Math.abs(o-i.startAngle),i.anticlockwise&&(i.sweep=On-i.sweep),i.circumference=2*Math.PI*i.radius,i.frac=i.sweep/On,i.length=i.circumference*i.frac,i.extents={xmin:i.cx-i.radius,xmax:i.cx+i.radius,ymin:i.cy-i.radius,ymax:i.cy+i.radius},i}return a(n,[{key:"_calcAngle",value:function(t,e){return r=Ln(n={x:this.cx,y:this.cy},i={x:t,y:e}),o=Math.atan(r),4!=(a=Rn(n,i))&&3!=a||(o+=Math.PI),o<0&&(o+=2*Math.PI),o;var n,i,r,o,a}},{key:"_calcAngleForLocation",value:function(t,e){if(t.anticlockwise){var n=t.startAngle<t.endAngle?t.startAngle+On:t.startAngle;return n-Math.abs(n-t.endAngle)*e}var i=t.endAngle<t.startAngle?t.endAngle+On:t.endAngle,r=Math.abs(i-t.startAngle);return t.startAngle+r*e}},{key:"getPath",value:function(t){var e=this.sweep>Math.PI?1:0,n=this.anticlockwise?0:1;return(t?"M"+this.x1+" "+this.y1+" ":"")+"A "+this.radius+" "+this.radius+" 0 "+e+","+n+" "+this.x2+" "+this.y2}},{key:"getLength",value:function(){return this.length}},{key:"pointOnPath",value:function(t,e){if(0===t)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===t)return{x:this.x2,y:this.y2,theta:this.endAngle};e&&(t/=length);var n=this._calcAngleForLocation(this,t),i=this.cx+this.radius*Math.cos(n),r=this.cy+this.radius*Math.sin(n);return{x:Uo(i),y:Uo(r),theta:n}}},{key:"gradientAtPoint",value:function(t,e){var n=this.pointOnPath(t,e),i=-1/Ln({x:this.cx,y:this.cy},n);return this.anticlockwise||i!==1/0&&i!==-1/0||(i*=-1),i}},{key:"pointAlongPathFrom",value:function(t,e,n){var i=this.pointOnPath(t,n),r=e/this.circumference*2*Math.PI,o=this.anticlockwise?-1:1,a=i.theta+o*r;return{x:this.cx+this.radius*Math.cos(a),y:this.cy+this.radius*Math.sin(a)}}}]),n}(en);s(Go,"segmentType","Arc");var $o=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),(o=e.call(this,t,i)).connection=t,s(h(o),"showLoopback",void 0),s(h(o),"curviness",void 0),s(h(o),"margin",void 0),s(h(o),"proximityLimit",void 0),s(h(o),"orientation",void 0),s(h(o),"loopbackRadius",void 0),s(h(o),"clockwise",void 0),s(h(o),"isLoopbackCurrently",void 0),s(h(o),"geometry",null),i=i||{},o.showLoopback=!1!==i.showLoopback,o.curviness=i.curviness||10,o.margin=i.margin||5,o.proximityLimit=i.proximityLimit||80,o.clockwise=i.orientation&&"clockwise"===i.orientation,o.loopbackRadius=i.loopbackRadius||25,o.isLoopbackCurrently=!1,o}return a(n,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(t,e){var n=e.sourcePos,i=e.targetPos,r=Math.abs(n.curX-i.curX),o=Math.abs(n.curY-i.curY);if(this.showLoopback&&e.sourceEndpoint.elementId===e.targetEndpoint.elementId){this.isLoopbackCurrently=!0;var a=e.sourcePos.curX,s=e.sourcePos.curY-this.margin,l=a,c=s-this.loopbackRadius,u=l-this.loopbackRadius,h=c-this.loopbackRadius;r=2*this.loopbackRadius,o=2*this.loopbackRadius,t.points[0]=u,t.points[1]=h,t.points[2]=r,t.points[3]=o,this._addSegment(Go,{loopback:!0,x1:a-u+4,y1:s-h,startAngle:0,endAngle:2*Math.PI,r:this.loopbackRadius,ac:!this.clockwise,x2:a-u-4,y2:s-h,cx:l-u,cy:c-h})}else this.isLoopbackCurrently=!1,this._computeBezier(t,e,n,i,r,o)}},{key:"exportGeometry",value:function(){return null==this.geometry?null:{controlPoints:[b({},this.geometry.controlPoints[0]),b({},this.geometry.controlPoints[1])],source:b({},this.geometry.source),target:b({},this.geometry.target)}}},{key:"transformGeometry",value:function(t,e,n){return{controlPoints:[{x:t.controlPoints[0].x+e,y:t.controlPoints[0].y+n},{x:t.controlPoints[1].x+e,y:t.controlPoints[1].y+n}],source:this.transformAnchorPlacement(t.source,e,n),target:this.transformAnchorPlacement(t.target,e,n)}}},{key:"importGeometry",value:function(t){return!(null==t||(null==t.controlPoints||2!=t.controlPoints.length?($("jsPlumb Bezier: cannot import geometry; controlPoints missing or does not have length 2"),this.setGeometry(null,!0),1):null==t.controlPoints[0].x||null==t.controlPoints[0].y||null==t.controlPoints[1].x||null==t.controlPoints[1].y?($("jsPlumb Bezier: cannot import geometry; controlPoints malformed"),this.setGeometry(null,!0),1):null==t.source||null==t.source.curX||null==t.source.curY?($("jsPlumb Bezier: cannot import geometry; source missing or malformed"),this.setGeometry(null,!0),1):null==t.target||null==t.target.curX||null==t.target.curY?($("jsPlumb Bezier: cannot import geometry; target missing or malformed"),this.setGeometry(null,!0),1):(this.setGeometry(t,!1),0)))}}]),n}(Pr),Ho=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},qo=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Wo=function(t,e){return{x:t.x*e,y:t.y*e}},Zo=Math.pow(2,-65);function Yo(t,e){for(var n,i=[],r=function(t,e){for(var n=e.length-1,i=2*n-1,r=[],o=[],a=[],s=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],c=0;c<=n;c++)r[c]=Ho(e[c],t);for(var u=0;u<=n-1;u++)o[u]=Ho(e[u+1],e[u]),o[u]=Wo(o[u],3);for(var h=0;h<=n-1;h++)for(var d=0;d<=n;d++)a[h]||(a[h]=[]),a[h][d]=(p=o[h],f=r[d],p.x*f.x+p.y*f.y);for(var p,f,g=0;g<=i;g++)s[g]||(s[g]=[]),s[g].y=0,s[g].x=parseFloat(""+g)/i;for(var m=n,v=n-1,y=0;y<=m+v;y++)for(var b=Math.max(0,y-v),w=Math.min(y,m),S=b;S<=w;S++){var x=y-S;s[S+x].y+=a[x][S]*l[x][S]}return s}(t,e),o=e.length-1,a=Ko(r,2*o-1,i,0),s=Ho(t,e[0]),l=qo(s),c=0,u=0;u<a;u++)s=Ho(t,Xo(e,o,i[u],null,null)),(n=qo(s))<l&&(l=n,c=i[u]);return s=Ho(t,e[o]),(n=qo(s))<l&&(l=n,c=1),{location:c,distance:l}}function Ko(t,e,n,i){var r,o,a=[],s=[],l=[],c=[];switch(function(t,e){var n,i,r=0;n=i=H(t[0].y);for(var o=1;o<=e;o++)(n=H(t[o].y))!=i&&r++,i=n;return r}(t,e)){case 0:return 0;case 1:if(i>=64)return n[0]=(t[0].x+t[e].x)/2,1;if(function(t,e){var n,i,r,o,a,s,l,c,u;o=t[0].y-t[e].y,a=t[e].x-t[0].x,s=t[0].x*t[e].y-t[e].x*t[0].y,c=u=0;for(var h=1;h<e;h++){var d=o*t[h].x+a*t[h].y+s;d>c?c=d:d<u&&(u=d)}return n=(1*(s-c)-(l=a)*0)*(1/(0*l-1*o)),i=(1*(s-u)-0*(l=a))*(1/(0*l-1*o)),r=Math.min(n,i),Math.max(n,i)-r<Zo?1:0}(t,e))return n[0]=function(t,e){var n=t[e].x-t[0].x,i=t[e].y-t[0].y,r=t[0].x-0;return 0+1/(0*n-1*i)*(n*(t[0].y-0)-i*r)*1}(t,e),1}Xo(t,e,.5,a,s),r=Ko(a,e,l,i+1),o=Ko(s,e,c,i+1);for(var u=0;u<r;u++)n[u]=l[u];for(var h=0;h<o;h++)n[h+r]=c[h];return r+o}function Xo(t,e,n,i,r){for(var o=[[]],a=0;a<=e;a++)o[0][a]=t[a];for(var s=1;s<=e;s++)for(var l=0;l<=e-s;l++)o[s]||(o[s]=[]),o[s][l]||(o[s][l]={}),o[s][l].x=(1-n)*o[s-1][l].x+n*o[s-1][l+1].x,o[s][l].y=(1-n)*o[s-1][l].y+n*o[s-1][l+1].y;if(null!=i)for(var c=0;c<=e;c++)i[c]=o[c][0];if(null!=r)for(var u=0;u<=e;u++)r[u]=o[e-u][u];return o[e][0]}function Jo(t,e){var n={x:0,y:0};if(0===t)return e[0];var i=e.length-1;if(1===t)return e[i];var r=e,o=1-t;if(0===i)return e[0];if(1===i)return{x:o*r[0].x+t*r[1].x,y:o*r[0].y+t*r[1].y};if(4>i){var a,s,l,c=o*o,u=t*t,h=0;return 2===i?(r=[r[0],r[1],r[2],n],a=c,s=o*t*2,l=u):3===i&&(a=c*o,s=c*t*3,l=o*u*3,h=t*u),{x:a*r[0].x+s*r[1].x+l*r[2].x+h*r[3].x,y:a*r[0].y+s*r[1].y+l*r[2].y+h*r[3].y}}return n}var Qo=new Map;function ta(t,e){for(var n=function(t){var e=Qo.get(t);if(!e){var n=function(t){return function(e){return t}},i=function(t){return function(e){for(var n=1,i=0;i<t.length;i++)n*=t[i](e);return n}};(e=[]).push((function(e){return Math.pow(e,t)}));for(var r=1;r<t;r++){for(var o=[n(t)],a=0;a<t-r;a++)o.push((function(t){return t}));for(var s=0;s<r;s++)o.push((function(t){return 1-t}));e.push(i(o))}e.push((function(e){return Math.pow(1-e,t)})),Qo.set(t,e)}return e}(t.length-1),i=0,r=0,o=0;o<t.length;o++)i+=t[o].x*n[o](e),r+=t[o].y*n[o](e);return{x:i,y:r}}function ea(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function na(t){return t[0].x===t[1].x&&t[0].y===t[1].y}function ia(t,e,n){if(na(t))return{point:t[0],location:e};for(var i=ta(t,e),r=0,o=e,a=n>0?1:-1,s=null;r<Math.abs(n);)r+=ea(s=ta(t,o+=.005*a),i),i=s;return{point:s,location:o}}function ra(t,e,n,i,r){var o=i-e,a=t-n,s=t*(e-i)+e*(n-t),l=function(t){return[oa(t,"x"),oa(t,"y")]}(r),c=[o*l[0][0]+a*l[1][0],o*l[0][1]+a*l[1][1],o*l[0][2]+a*l[1][2],o*l[0][3]+a*l[1][3]+s],u=aa.apply(null,c),h=[];if(null!=u)for(var d=0;d<3;d++){var p,f=u[d],g=Math.pow(f,2),m=Math.pow(f,3),v={x:l[0][0]*m+l[0][1]*g+l[0][2]*f+l[0][3],y:l[1][0]*m+l[1][1]*g+l[1][2]*f+l[1][3]};p=n-t!=0?(v[0]-t)/(n-t):(v[1]-e)/(i-e),f>=0&&f<=1&&p>=0&&p<=1&&h.push(v)}return h}function oa(t,e){return[-t[0][e]+3*t[1][e]+-3*t[2][e]+t[3][e],3*t[0][e]-6*t[1][e]+3*t[2][e],-3*t[0][e]+3*t[1][e],t[0][e]]}function aa(t,e,n,i){var r,o,a=e/t,s=n/t,l=i/t,c=(3*s-Math.pow(a,2))/9,u=(9*a*s-27*l-2*Math.pow(a,3))/54,h=Math.pow(c,3)+Math.pow(u,2),d=[0,0,0];if(h>=0)r=H(u+Math.sqrt(h))*Math.pow(Math.abs(u+Math.sqrt(h)),1/3),o=H(u-Math.sqrt(h))*Math.pow(Math.abs(u-Math.sqrt(h)),1/3),d[0]=-a/3+(r+o),d[1]=-a/3-(r+o)/2,d[2]=-a/3-(r+o)/2,0!==Math.abs(Math.sqrt(3)*(r-o)/2)&&(d[1]=-1,d[2]=-1);else{var p=Math.acos(u/Math.sqrt(-Math.pow(c,3)));d[0]=2*Math.sqrt(-c)*Math.cos(p/3)-a/3,d[1]=2*Math.sqrt(-c)*Math.cos((p+2*Math.PI)/3)-a/3,d[2]=2*Math.sqrt(-c)*Math.cos((p+4*Math.PI)/3)-a/3}for(var f=0;f<3;f++)(d[f]<0||d[f]>1)&&(d[f]=-1);return d}var sa=function(t){l(n,t);var e=d(n);function n(t){var i;return r(this,n),s(h(i=e.call(this,t)),"curve",void 0),s(h(i),"cp1x",void 0),s(h(i),"cp1y",void 0),s(h(i),"cp2x",void 0),s(h(i),"cp2y",void 0),s(h(i),"length",0),s(h(i),"type",n.segmentType),i.cp1x=t.cp1x,i.cp1y=t.cp1y,i.cp2x=t.cp2x,i.cp2y=t.cp2y,i.x1=t.x1,i.x2=t.x2,i.y1=t.y1,i.y2=t.y2,i.curve=[{x:i.x1,y:i.y1},{x:i.cp1x,y:i.cp1y},{x:i.cp2x,y:i.cp2y},{x:i.x2,y:i.y2}],i.extents={xmin:Math.min(i.x1,i.x2,i.cp1x,i.cp2x),ymin:Math.min(i.y1,i.y2,i.cp1y,i.cp2y),xmax:Math.max(i.x1,i.x2,i.cp1x,i.cp2x),ymax:Math.max(i.y1,i.y2,i.cp1y,i.cp2y)},i}return a(n,[{key:"getPath",value:function(t){return(t?"M "+this.x2+" "+this.y2+" ":"")+"C "+this.cp2x+" "+this.cp2y+" "+this.cp1x+" "+this.cp1y+" "+this.x1+" "+this.y1}},{key:"pointOnPath",value:function(t,e){return t=n._translateLocation(this.curve,t,e),ta(this.curve,t)}},{key:"gradientAtPoint",value:function(t,e){return t=n._translateLocation(this.curve,t,e),function(t,e){var n=ta(t,e),i=ta(t.slice(0,t.length-1),e),r=i.y-n.y,o=i.x-n.x;return 0===r?1/0:Math.atan(r/o)}(this.curve,t)}},{key:"pointAlongPathFrom",value:function(t,e,i){return t=n._translateLocation(this.curve,t,i),function(t,e,n){return ia(t,e,n).point}(this.curve,t,e)}},{key:"getLength",value:function(){return null!=this.length&&0!==this.length||(this.length=function(t){var e=0;if(!na(t))for(var n=function(t,e){for(var n=[],i=0;i<=15;i++)n.push(Jo(i/15,e));return n}(0,t),i=0;i<15;i++)e+=ea(n[i],n[i+1]);return e}(this.curve)),this.length}},{key:"findClosestPointOnPath",value:function(t,e){var n,i,r=(i=Yo({x:t,y:e},n=this.curve),{point:Xo(n,n.length-1,i.location,null,null),location:i.location});return{d:Math.sqrt(Math.pow(r.point.x-t,2)+Math.pow(r.point.y-e,2)),x:r.point.x,y:r.point.y,l:1-r.location,s:this,x1:null,y1:null,x2:null,y2:null}}},{key:"lineIntersection",value:function(t,e,n,i){return ra(t,e,n,i,this.curve)}}],[{key:"_translateLocation",value:function(t,e,n){return n&&(e=function(t,e,n){return ia(t,e,n).location}(t,e>0?0:1,e)),e}}]),n}(en);s(sa,"segmentType","Bezier");var la=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),(o=e.call(this,t,i)).connection=t,s(h(o),"type",n.type),s(h(o),"majorAnchor",void 0),s(h(o),"minorAnchor",void 0),i=i||{},o.majorAnchor=i.curviness||150,o.minorAnchor=10,o}return a(n,[{key:"getCurviness",value:function(){return this.majorAnchor}},{key:"_findControlPoint",value:function(t,e,n,i,r){var o={x:0,y:0};return i[0]!==r[0]||i[1]===r[1]?(0===r[0]?o.x=n.curX<e.curX?t.x+this.minorAnchor:t.x-this.minorAnchor:o.x=t.x+this.majorAnchor*r[0],0===r[1]?o.y=n.curY<e.curY?t.y+this.minorAnchor:t.y-this.minorAnchor:o.y=t.y+this.majorAnchor*i[1]):(0===i[0]?o.x=e.curX<n.curX?t.x+this.minorAnchor:t.x-this.minorAnchor:o.x=t.x-this.majorAnchor*i[0],0===i[1]?o.y=e.curY<n.curY?t.y+this.minorAnchor:t.y-this.minorAnchor:o.y=t.y+this.majorAnchor*r[1]),o}},{key:"_computeBezier",value:function(t,e,n,i,r,o){var a,s,l=n.curX<i.curX?r:0,c=n.curY<i.curY?o:0,u=n.curX<i.curX?0:r,h=n.curY<i.curY?0:o;!0!==this.edited?(a=this._findControlPoint({x:l,y:c},n,i,t.so,t.to),s=this._findControlPoint({x:u,y:h},i,n,t.to,t.so)):(a=this.geometry.controlPoints[0],s=this.geometry.controlPoints[1]),this.geometry={controlPoints:[a,s],source:e.sourcePos,target:e.targetPos},this._addSegment(sa,{x1:l,y1:c,x2:u,y2:h,cp1x:a.x,cp1y:a.y,cp2x:s.x,cp2y:s.y})}}]),n}($o);s(la,"type","Bezier");var ca=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),(o=e.call(this,t,i)).connection=t,s(h(o),"type",n.type),s(h(o),"_controlPoint",void 0),o.curviness=i.curviness||10,o.margin=i.margin||5,o.proximityLimit=i.proximityLimit||80,o.clockwise=i.orientation&&"clockwise"===i.orientation,o}return a(n,[{key:"_computeBezier",value:function(t,e,n,i,r,o){var a,s,l,c,u,h,d,p,f=n.curX<i.curX?0:r,g=n.curY<i.curY?0:o,m=n.curX<i.curX?r:0,v=n.curY<i.curY?o:0;if(0===n.x&&(f-=this.margin),1===n.x&&(f+=this.margin),0===n.y&&(g-=this.margin),1===n.y&&(g+=this.margin),0===i.x&&(m-=this.margin),1===i.x&&(m+=this.margin),0===i.y&&(v-=this.margin),1===i.y&&(v+=this.margin),!0!==this.edited){var y=(f+m)/2,b=(g+v)/2,w=(s=g,c=v,(a=f)<=(l=m)&&c<=s?1:a<=l&&s<=c?2:l<=a&&c>=s?3:4),S=Math.sqrt(Math.pow(m-f,2)+Math.pow(v-g,2));this._controlPoint=function(t,e,n,i,r,o,a,s,l){return s<=l?{x:t,y:e}:1===n?i.curY<=0&&r.curY>=1?{x:t+(i.x<.5?-1*o:o),y:e}:i.curX>=1&&r.curX<=0?{x:t,y:e+(i.y<.5?-1*a:a)}:{x:t+-1*o,y:e+-1*a}:2===n?i.curY>=1&&r.curY<=0?{x:t+(i.x<.5?-1*o:o),y:e}:i.curX>=1&&r.curX<=0?{x:t,y:e+(i.y<.5?-1*a:a)}:{x:t+o,y:e+-1*a}:3===n?i.curY>=1&&r.curY<=0?{x:t+(i.x<.5?-1*o:o),y:e}:i.curX<=0&&r.curX>=1?{x:t,y:e+(i.y<.5?-1*a:a)}:{x:t+-1*o,y:e+-1*a}:4===n?i.curY<=0&&r.curY>=1?{x:t+(i.x<.5?-1*o:o),y:e}:i.curX<=0&&r.curX>=1?{x:t,y:e+(i.y<.5?-1*a:a)}:{x:t+o,y:e+-1*a}:void 0}(y,b,w,e.sourcePos,e.targetPos,this.curviness,this.curviness,S,this.proximityLimit)}else this._controlPoint=this.geometry.controlPoints[0];u=this._controlPoint.x,h=this._controlPoint.x,d=this._controlPoint.y,p=this._controlPoint.y,this.geometry={controlPoints:[this._controlPoint,this._controlPoint],source:e.sourcePos,target:e.targetPos},this._addSegment(sa,{x1:m,y1:v,x2:f,y2:g,cp1x:u,cp1y:d,cp2x:h,cp2y:p})}}]),n}($o);function ua(t){return t<0?-1:0===t?0:1}function ha(t){return[ua(t[2]-t[0]),ua(t[3]-t[1])]}function da(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))}function pa(t){var e=[];return e.push.apply(e,t),e}s(ca,"type","StateMachine"),ho(la.type,la),ho(ca.type,ca);var fa=function(t){l(n,t);var e=d(n);function n(t,i){var o;return r(this,n),(o=e.call(this,t,i)).connection=t,s(h(o),"type",n.type),s(h(o),"internalSegments",[]),s(h(o),"midpoint",void 0),s(h(o),"alwaysRespectStubs",void 0),s(h(o),"cornerRadius",void 0),s(h(o),"lastx",void 0),s(h(o),"lasty",void 0),s(h(o),"lastOrientation",void 0),s(h(o),"loopbackRadius",void 0),s(h(o),"isLoopbackCurrently",void 0),o.midpoint=null==i.midpoint||isNaN(i.midpoint)?.5:i.midpoint,o.cornerRadius=null!=i.cornerRadius?i.cornerRadius:0,o.alwaysRespectStubs=!0===i.alwaysRespectStubs,o.lastx=null,o.lasty=null,o.lastOrientation=null,o.loopbackRadius=i.loopbackRadius||25,o.isLoopbackCurrently=!1,o}return a(n,[{key:"getDefaultStubs",value:function(){return[30,30]}},{key:"addASegment",value:function(t,e,n){if(this.lastx!==t||this.lasty!==e){var i=null==this.lastx?n.sx:this.lastx,r=null==this.lasty?n.sy:this.lasty,o=i===t?"v":"h";this.lastx=t,this.lasty=e,this.internalSegments.push([i,r,t,e,o])}}},{key:"writeSegments",value:function(t){for(var e,n,i,r=null,o=0;o<this.internalSegments.length-1;o++){if(r=r||pa(this.internalSegments[o]),e=pa(this.internalSegments[o+1]),n=ha(r),i=ha(e),this.cornerRadius>0&&r[4]!==e[4]){var a=Math.min(da(r),da(e)),s=Math.min(this.cornerRadius,a/2);r[2]-=n[0]*s,r[3]-=n[1]*s,e[0]+=i[0]*s,e[1]+=i[1]*s;var l=n[1]===i[0]&&1===i[0]||n[1]===i[0]&&0===i[0]&&n[0]!==i[1]||n[1]===i[0]&&-1===i[0],c=(e[1]>r[3]?1:-1)==(e[0]>r[2]?1:-1),u=c&&l||!c&&!l?e[0]:r[2],h=c&&l||!c&&!l?r[3]:e[1];this._addSegment(po,{x1:r[0],y1:r[1],x2:r[2],y2:r[3]}),this._addSegment(Go,{r:s,x1:r[2],y1:r[3],x2:e[0],y2:e[1],cx:u,cy:h,ac:l})}else this._addSegment(po,{x1:r[0],y1:r[1],x2:r[2],y2:r[3]});r=e}null!=e&&this._addSegment(po,{x1:e[0],y1:e[1],x2:e[2],y2:e[3]})}},{key:"_compute",value:function(t,e){var n=this;this.internalSegments.length=0,this.lastx=null,this.lasty=null,this.lastOrientation=null;var i=function(e){return[t.startStubX,t.startStubY,t.endStubX,t.endStubY]},r={perpendicular:i,orthogonal:i,opposite:function(e){var i=t,r="x"===e?0:1,o={x:function(){return 1===i.so[r]&&(i.startStubX>i.endStubX&&i.tx>i.startStubX||i.sx>i.endStubX&&i.tx>i.sx)||-1===i.so[r]&&(i.startStubX<i.endStubX&&i.tx<i.startStubX||i.sx<i.endStubX&&i.tx<i.sx)},y:function(){return 1===i.so[r]&&(i.startStubY>i.endStubY&&i.ty>i.startStubY||i.sy>i.endStubY&&i.ty>i.sy)||-1===i.so[r]&&(i.startStubY<i.endStubY&&i.ty<i.startStubY||i.sy<i.endStubY&&i.ty<i.sy)}};return!n.alwaysRespectStubs&&o[e]()?{x:[(t.sx+t.tx)/2,t.startStubY,(t.sx+t.tx)/2,t.endStubY],y:[t.startStubX,(t.sy+t.ty)/2,t.endStubX,(t.sy+t.ty)/2]}[e]:[t.startStubX,t.startStubY,t.endStubX,t.endStubY]}},o=r[t.anchorOrientation](t.sourceAxis),a="x"===t.sourceAxis?0:1,s="x"===t.sourceAxis?1:0,l=o[a],c=o[s],u=o[a+2],h=o[s+2];this.addASegment(o[0],o[1],t);var d=t.startStubX+(t.endStubX-t.startStubX)*this.midpoint,p=t.startStubY+(t.endStubY-t.startStubY)*this.midpoint,f={x:[0,1],y:[1,0]},g={perpendicular:function(e,n,i,r,o){var a=t,s={x:[[a.startStubX,a.endStubX],null,[a.endStubX,a.startStubX]],y:[[a.startStubY,a.endStubY],null,[a.endStubY,a.startStubY]]},l={x:[[d,a.startStubY],[d,a.endStubY]],y:[[a.startStubX,p],[a.endStubX,p]]},c={x:[[a.endStubX,a.startStubY]],y:[[a.startStubX,a.endStubY]]},u={x:[[a.startStubX,a.endStubY],[a.endStubX,a.endStubY]],y:[[a.endStubX,a.startStubY],[a.endStubX,a.endStubY]]},h={x:[[a.startStubX,p],[a.endStubX,p],[a.endStubX,a.endStubY]],y:[[d,a.startStubY],[d,a.endStubY],[a.endStubX,a.endStubY]]},g={x:[a.startStubY,a.endStubY],y:[a.startStubX,a.endStubX]},m=f[e][0],v=f[e][1],y=a.so[m]+1,b=a.to[v]+1,w=-1===a.to[v]&&g[e][1]<g[e][0]||1===a.to[v]&&g[e][1]>g[e][0],S=s[e][y][0],x=s[e][y][1],k={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]}[e][y][b];return a.segment===k[3]||a.segment===k[2]&&w?l[e]:a.segment===k[2]&&x<S?c[e]:a.segment===k[2]&&x>=S||a.segment===k[1]&&!w?h[e]:a.segment===k[0]||a.segment===k[1]&&w?u[e]:void 0},orthogonal:function(e,n,i,r,o){var a=t,s={x:-1===a.so[0]?Math.min(n,r):Math.max(n,r),y:-1===a.so[1]?Math.min(n,r):Math.max(n,r)}[e];return{x:[[s,i],[s,o],[r,o]],y:[[i,s],[o,s],[o,r]]}[e]},opposite:function(i,r,o,s,l){var c=t,u={x:"y",y:"x"}[i],h={x:"h",y:"w"}[i],f=c["is"+i.toUpperCase()+"GreaterThanStubTimes2"];if(e.sourceEndpoint.elementId===e.targetEndpoint.elementId){var g=o+(1-e.sourceEndpoint._anchor.computedPosition[u])*e.sourceInfo[h]+n.maxStub;return{x:[[r,g],[s,g]],y:[[g,r],[g,s]]}[i]}return!f||1===c.so[a]&&r>s||-1===c.so[a]&&r<s?{x:[[r,p],[s,p]],y:[[d,r],[d,s]]}[i]:1===c.so[a]&&r<s||-1===c.so[a]&&r>s?{x:[[d,c.sy],[d,c.ty]],y:[[c.sx,p],[c.tx,p]]}[i]:void 0}},m=g[t.anchorOrientation](t.sourceAxis,l,c,u,h);if(m)for(var v=0;v<m.length;v++)this.addASegment(m[v][0],m[v][1],t);this.addASegment(o[2],o[3],t),this.addASegment(t.tx,t.ty,t),this.writeSegments(t)}},{key:"transformGeometry",value:function(t,e,n){return t}}]),n}(Pr);s(fa,"type","Flowchart"),ho(fa.type,fa),bi.registerHandler(jr),bi.registerHandler(Do),bi.registerHandler(Io),ho(fo.type,fo);for(var ga={clientX:5e4,clientY:5e4,screenX:5e4,screenY:5e4,pageX:5e4,pageY:5e4},ma=[],va=0;va<256;va++)ma[va]=(va<16?"0":"")+va.toString(16);a((function t(e,n,i){r(this,t),this._jsPlumb=e,this.ok=n,this.equal=i,s(this,"_divs",[]),s(this,"mottle",void 0),this.mottle=new _n}),[{key:"_t",value:function(t,e,n,i){this.mottle.trigger(t,e,{pageX:n,pageY:i,screenX:n,screenY:i,clientX:n,clientY:i})}},{key:"addDiv",value:function(t,e,n,i,r,o,a){var s=document.createElement("div");return s.style.position="absolute",s.innerHTML=t,e?e.appendChild(s):this._jsPlumb.getContainer().appendChild(s),s.setAttribute("id",t),s.style.left=(null!=i?i:Math.floor(1e3*Math.random()))+"px",s.style.top=(null!=r?r:Math.floor(1e3*Math.random()))+"px",n&&(s.className=n),o&&(s.style.width=o+"px"),a&&(s.style.height=a+"px"),this._divs.push(t),s}},{key:"addDivs",value:function(t,e){for(var n=0;n<t.length;n++)this.addDiv(t[n],e)}},{key:"assertEndpointCount",value:function(t,e){var n=this._jsPlumb.getEndpoints(t),i=n?n.length:0;this.equal(i,e,t.getAttribute("data-jtk-managed")+" has "+e+(e>1||0==e?" endpoints":" endpoint"))}},{key:"_assertManagedEndpointCount",value:function(t,e){var n=this._jsPlumb.getId(t),i=this._jsPlumb._managedElements[n];this.equal(i.endpoints.length,e,n+" has "+e+" endpoints in managed record")}},{key:"_assertManagedConnectionCount",value:function(t,e){var n=this._jsPlumb.getId(t),i=this._jsPlumb._managedElements[n];this.equal(i.connections.length,e,n+" has "+e+" connections in managed record")}},{key:"_registerDiv",value:function(t){this._divs.push(t)}},{key:"makeDragStartEvt",value:function(t){var e=this.makeEvent(t),n=this._jsPlumb.getContainer();return e.clientX+=n.offsetLeft,e.screenX+=n.offsetLeft,e.pageX+=n.offsetLeft,e.clientY+=n.offsetTop,e.screenY+=n.offsetTop,e.pageY+=n.offsetTop,e}},{key:"getAttribute",value:function(t,e){return t.getAttribute(e)}},{key:"dragNodeBy",value:function(t,e,n,i){(i=i||{}).before&&i.before();var r=this.makeEvent(t);this._jsPlumb.trigger(t,de,r),i.beforeMouseMove&&i.beforeMouseMove(),this._t(document,ge,r.pageX+e,r.pageY+n),i.beforeMouseUp&&i.beforeMouseUp(),this.mottle.trigger(document,me,null),i.after&&i.after()}},{key:"dragNodeTo",value:function(t,e,n,i){i=i||{};var r=this._jsPlumb.viewport.getPosition(this._jsPlumb.getId(t));i.before&&i.before();var o=this.makeEvent(t);this._jsPlumb.trigger(t,de,o);var a=this._jsPlumb.getContainer().getBoundingClientRect();i.beforeMouseMove&&i.beforeMouseMove(),this._t(document,ge,a.x+e+r.w/2,a.y+n+r.h/2),i.beforeMouseUp&&i.beforeMouseUp(),this.mottle.trigger(document,me,null),i.after&&i.after()}},{key:"dragToGroup",value:function(t,e,n){var i=this._jsPlumb.getGroup(e),r=this._jsPlumb.viewport.getPosition(i.elId),o=r.x+r.w/2,a=r.y+r.h/2;this.dragNodeTo(t,o,a,n)}},{key:"aSyncDragNodeBy",value:function(t,e,n,i){var r=this;(i=i||{}).before&&i.before();var o=this.makeEvent(t);this._jsPlumb.trigger(t,de,o),i.beforeMouseMove&&i.beforeMouseMove(),setTimeout((function(){r._t(document,ge,o.pageX+e,o.pageY+n),i.beforeMouseUp&&i.beforeMouseUp(),setTimeout((function(){r.mottle.trigger(document,me,null),i.after&&i.after()}),45)}),45)}},{key:"dragANodeAround",value:function(t,e,n){this._jsPlumb.trigger(t,de,this.makeEvent(t));for(var i,r,o=50*Math.random(),a=0;a<o;a++){var s={clientX:i=Math.floor(2e3*Math.random()),clientY:r=Math.floor(2e3*Math.random()),screenX:i,screenY:r,pageX:i,pageY:r};t.style.left=s.screenX+"px",t.style.top=s.screenY+"px",this._jsPlumb.trigger(document,ge,s)}e&&this.ok(e(),n||"while dragging assert"),this._jsPlumb.trigger(document,me,ga)}},{key:"dragConnection",value:function(t,e,n,i){var r=this.getCanvas(t),o=this.getCanvas(e),a=this.makeEvent(r),s=this.makeEvent(o);i=i||{};var l=this._jsPlumb.select().length;return this._jsPlumb.trigger(r,de,a),i.beforeMouseMove&&i.beforeMouseMove(),this._jsPlumb.trigger(n?o:document,ge,s),i.beforeMouseUp&&i.beforeMouseUp(),this._jsPlumb.trigger(n?o:document,me,s),this._jsPlumb.select().get(l)}},{key:"aSyncDragConnection",value:function(t,e,n){var i=this;n=n||{};var r=this.getCanvas(t),o=this.getCanvas(e),a=this.makeEvent(r),s=this.makeEvent(o),l=this._jsPlumb.select().length;this._jsPlumb.trigger(r,de,a),setTimeout((function(){n.beforeMouseMove&&n.beforeMouseMove(),i._jsPlumb.trigger(document,ge,s),setTimeout((function(){n.beforeMouseUp&&n.beforeMouseUp(),i._jsPlumb.trigger(o,me,s),n.after&&n.after(i._jsPlumb.select().get(l))}),5)}),5)}},{key:"dragAndAbortConnection",value:function(t){var e=this.getCanvas(t),n=this.makeEvent(e);this._jsPlumb.trigger(e,de,n),this._jsPlumb.trigger(document,ge,ga),this._jsPlumb.trigger(document,me,ga)}},{key:"detachConnection",value:function(t,e){e=e||{};var n=this.getEndpointCanvas(t),i=this.makeEvent(n);e.before&&e.before(),this._jsPlumb.trigger(n,de,i),e.beforeMouseMove&&e.beforeMouseMove(),this._jsPlumb.trigger(document,ge,ga),e.beforeMouseUp&&e.beforeMouseUp(),this._jsPlumb.trigger(document,me,ga),e.after&&e.after()}},{key:"detachAndReattachConnection",value:function(t,e){e=e||{};var n=this.getEndpointCanvas(t),i=this.makeEvent(n);e.before&&e.before(),this._jsPlumb.trigger(n,de,i),e.beforeMouseMove&&e.beforeMouseMove(),this._jsPlumb.trigger(document,ge,ga),this._jsPlumb.trigger(document,ge,i),e.beforeMouseUp&&e.beforeMouseUp(),this._jsPlumb.trigger(document,me,i),e.after&&e.after()}},{key:"detachConnectionByTarget",value:function(t,e){this.detachConnection(t.endpoints[1],e)}},{key:"relocateTarget",value:function(t,e,n){this.relocate(t,1,e,n)}},{key:"relocate",value:function(t,e,n,i){i=i||{},n=this.getCanvas(n);var r=this.getEndpointCanvas(t.endpoints[e]),o=this.makeEvent(r),a=this.makeEvent(n);i.before&&i.before(),this._jsPlumb.trigger(r,de,o),i.beforeMouseMove&&i.beforeMouseMove(),this._jsPlumb.trigger(document,ge,a),i.beforeMouseUp&&i.beforeMouseUp(),this._jsPlumb.trigger(n,me,a),i.after&&i.after()}},{key:"relocateSource",value:function(t,e,n){this.relocate(t,0,e,n)}},{key:"makeEvent",value:function(t){var e=t.getBoundingClientRect(),n=e.x+e.width/2,i=e.y+e.height/2;return{clientX:n,clientY:i,screenX:n,screenY:i,pageX:n,pageY:i}}},{key:"getCanvas",value:function(t){return t.endpoint?this.getEndpointCanvas(t):t}},{key:"getEndpointCanvas",value:function(t){return t.endpoint.canvas}},{key:"getConnectionCanvas",value:function(t){return t.connector.canvas}},{key:"getEndpointCanvasPosition",value:function(t){var e=this.getEndpointCanvas(t);return{x:parseInt(e.style.left,10),y:parseInt(e.style.top,10),w:e.getAttribute("width"),h:e.getAttribute("height")}}},{key:"within",value:function(t,e,n){this.ok(Math.abs(t-e)<1e-11,n+"[expected: "+e+" got "+t+"] [diff:"+Math.abs(t-e)+"]")}},{key:"assertManagedEndpointCount",value:function(t,e){var n=this._jsPlumb.getId(t),i=this._jsPlumb._managedElements[n];this.equal(i.endpoints.length,e,n+" has "+e+" endpoints in managed record")}},{key:"assertManagedConnectionCount",value:function(t,e){var n=this._jsPlumb.getId(t),i=this._jsPlumb._managedElements[n];this.equal(i.connections.length,e,n+" has "+e+" connections in managed record")}},{key:"fireEventOnEndpoint",value:function(t){for(var e=this.getEndpointCanvas(t),n=0;n<(arguments.length<=1?0:arguments.length-1);n++)this._jsPlumb.trigger(e,n+1<1||arguments.length<=n+1?void 0:arguments[n+1])}},{key:"fireEventOnElement",value:function(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++)this._jsPlumb.trigger(t,e+1<1||arguments.length<=e+1?void 0:arguments[e+1])}},{key:"fireEventOnConnection",value:function(t){for(var e=this.getConnectionCanvas(t),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.fireEventOnElement.apply(this,[e].concat(i))}},{key:"clickOnConnection",value:function(t){this.fireEventOnConnection(t,le)}},{key:"dblClickOnConnection",value:function(t){this.fireEventOnConnection(t,ue)}},{key:"tapOnConnection",value:function(t){this.fireEventOnConnection(t,de),this.fireEventOnConnection(t,me)}},{key:"dblTapOnConnection",value:function(t){this.fireEventOnConnection(t,de),this.fireEventOnConnection(t,me),this.fireEventOnConnection(t,de),this.fireEventOnConnection(t,me)}},{key:"clickOnElement",value:function(t,e){this._jsPlumb.trigger(t,le,null,null,null==e?1:e)}},{key:"dblClickOnElement",value:function(t){this._jsPlumb.trigger(t,ue)}},{key:"tapOnElement",value:function(t){this._jsPlumb.trigger(t,de),this._jsPlumb.trigger(t,me)}},{key:"dblTapOnElement",value:function(t){this._jsPlumb.trigger(t,de),this._jsPlumb.trigger(t,me),this._jsPlumb.trigger(t,de),this._jsPlumb.trigger(t,me)}},{key:"getOverlayCanvas",value:function(t){return t.canvas||t.path}},{key:"fireEventOnOverlay",value:function(t,e,n){var i=t.getOverlay(e),r=this.getOverlayCanvas(i);this._jsPlumb.trigger(r,n)}},{key:"clickOnOverlay",value:function(t,e){this.fireEventOnOverlay(t,e,le)}},{key:"dblClickOnOverlay",value:function(t,e){this.fireEventOnOverlay(t,e,ue)}},{key:"tapOnOverlay",value:function(t,e){this.fireEventOnOverlay(t,e,de),this.fireEventOnOverlay(t,e,me)}},{key:"dblTapOnOverlay",value:function(t,e){this.fireEventOnOverlay(t,e,de),this.fireEventOnOverlay(t,e,me),this.fireEventOnOverlay(t,e,de),this.fireEventOnOverlay(t,e,me)}},{key:"cleanup",value:function(){var t=this._jsPlumb.getContainer();for(var e in this._jsPlumb.destroy(),this._divs){var n=document.getElementById(this._divs[e]);n&&n.parentNode.removeChild(n)}this._divs.length=0;var i=this._jsPlumb.select().length,r=this._jsPlumb.selectEndpoints().length,o=t.querySelectorAll(".jtk-endpoint").length,a=t.querySelectorAll(".jtk-connector").length;for(var s in t.__ta)for(var l in t.__ta[s])throw"Container event bindings not empty for key "+s;if(i>0)throw"there are connections in the data model!";if(r>0)throw"there are endpoints in the data model!";if(o>0)throw"there are "+o+" endpoints left in the dom!";if(a>0)throw"there are "+a+" connections left in the dom!"}},{key:"makeContent",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}},{key:"length",value:function(t){var e=0;for(var n in t)t.hasOwnProperty(n)&&e++;return e}},{key:"head",value:function(t){for(var e in t)return t[e]}},{key:"uuid",value:function(){return B()}}]);var ya=0;function ba(t){return new _o(function(){var t=ya+1;return ya++,t}(),t)}},79021:(t,e,n)=>{"use strict";n.d(e,{q:()=>o});var i=n(4061),r=n(81807);class o{static id="OKVIZEditorDialog";static size={width:880,height:670};dialogHost;result;constructor(t,e){this.dialogHost=t.host,this.result={},t.element.classList.add("okviz-editor"),globalThis.thisVisual={element:t.element,host:new r.O50(e.sourceHost.colorPalette,e.sourceHost.locale),internalUpdate:!0},r.C7A.instance.status=e.updateOptions.diagnostics?r.cFy.Enabled:r.cFy.Disabled;const n=(0,r.tTh)(".okviz-editor-dialog",t.element),o=(0,r.tTh)(".okviz-editor-tabs.tabs",n),a=(0,r.tTh)(".okviz-editor-tab-content",n);let s=0;for(const t of Object.keys(e.pluginsOptions))if("function"==typeof i[t]){const l=e.activePlugin?e.activePlugin===t:!s,c=new i[t](e.pluginsOptions[t],e.updateOptions);c.on("save",(e=>{this.result.changedSettings||(this.result.changedSettings={}),this.result.changedSettings[t]=e,this.dialogHost.setResult(this.result)})),c.on("download",(t=>{this.result.download=t,this.dialogHost.close(1,this.result)})),c.on("close",(t=>{this.dialogHost.close(t,this.result)}));const u=(0,r.aHV)(t),h=(0,r.tTh)(`#${u}.tab-content`,a,{attr:{hidden:!l}});l&&c.draw(h),(0,r.tTh)(".tab"+(l?".active":""),o,{data:{content:`#${u}`,plugin:t},events:{click:t=>{t.preventDefault();const e=t.currentTarget;e.classList.contains("active")||((0,r.kOW)(".okviz-editor-tabs .tab",n).forEach((t=>t.classList.remove("active"))),(0,r.kOW)(".okviz-editor-tab-content .tab-content",n).forEach((t=>t.toggle(!1))),e.classList.add("active"),(0,r.VR4)(e.dataset.content,n).toggle(!0),this.result.activePlugin=e.dataset.plugin,this.dialogHost.setResult(this.result)),c.rendered||c.draw(h)}}},c.displayName),s++}}}globalThis.dialogRegistry=globalThis.dialogRegistry||{},globalThis.dialogRegistry[o.id]=o},93622:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(81807);class r extends i.T0G{options;pending={};get rendered(){return this._rendered}_rendered=!1;constructor(t,e){super(),this.options=t}draw(t){this._rendered=!0}save(){const t=[].concat(...Object.values(this.pending));this.trigger("save",t)}download(t){this.trigger("download",t)}close(t=1){this.trigger("close",t)}showError(t,e){i.s54.SHOW({id:"editor-error",text:t,icon:"alert",position:"top",hideAfter:10}),i.C7A.ERROR(t,e)}}},4061:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Calc:()=>r.m,ColorRulesEnumerator:()=>r.f9,ColorRulesManager:()=>r.AS,ColorScaleType:()=>r.Qo,Comparison:()=>r.Uf,ConditionMode:()=>r.LF,EditorPlugin:()=>i.Z,Operator:()=>r.XP,TemplateManager:()=>o.e$,TemplateType:()=>o.nY,colorScaleColor:()=>r.RQ,convertValue:()=>r.nf,defaultColorScale:()=>r.RU,defaultColorScaleCondition:()=>r.a3,defaultCondition:()=>r.P0,defaultRule:()=>r.e2,defaultRuleBaseColor:()=>r.Gy,defaultRuleLevel:()=>r.UA,extendTemplate:()=>o.Z3,fixColorScaleColor:()=>r.Ec,fixColorScaleLevel:()=>r.hz,fixDomain:()=>r.uC,generalizeTemplate:()=>o.di,generateTemplate:()=>o.Yx,getColorScaleDisplayCondition:()=>r.bk,getColorScaleGradient:()=>r.o5,getColorScaleRange:()=>r.fr,getColumnFromRuleField:()=>r.RY,getVisualObjectInstancesFromTemplate:()=>o.AA,mergeSettings:()=>o.ss,removeRuleDuplicates:()=>r.z1,ruleColorScaleIsValid:()=>r._Z,ruleConditionsAreValid:()=>r.FA,ruleIsValid:()=>r.Lw,ruleName:()=>r.oF});var i=n(93622),r=n(6950),o=n(12175)},76648:(t,e,n)=>{"use strict";n.d(e,{K:()=>o});var i=n(79021),r=n(81807);class o extends r.T0G{options;editControl;scale=1;editMode=!1;controlDisabled=!1;controlPinned=!1;updateOptions;constructor(t){super(),this.options=t,null==this.options.title&&(this.options.title="Color Rules & Templates"),this.options.icon||(this.options.icon="theme")}hasPlugin(t){return(0,r.cKq)(this.options.plugins,t)}get envSupported(){return thisVisual.host.hostCapabilities.allowModalDialog}update(t,e,n){this.envSupported&&Object.keys(this.options.plugins).length&&t&&t.dataViews&&t.dataViews[0]?(this.editMode=0!=t.viewMode,this.controlDisabled=(0,r.PLM)(t.dataViews[0].metadata.objects,"editor","hide",!1),this.controlPinned=this.editMode&&!this.controlDisabled&&(0,r.PLM)(t.dataViews[0].metadata.objects,"editor","pin",!1),this.updateOptions={visualUpdateOptions:t,settings:e,diagnostics:n},r.s54.UPDATE(t),this.scale=t.viewport.scale,this.toggleControl(this.editMode),1==t.editMode&&(this.show(),thisVisual.host.switchFocusModeState(!1))):this.toggleControl(!1)}toggleControl(t){this.envSupported&&this.editMode&&!this.options.hideEditControl&&(t&&!this.controlDisabled||this.controlPinned)?(this.editControl||(this.editControl=(0,r.tTh)(`.okviz-editor-btn.icon-${this.options.icon}.show-on-hover`,thisVisual.element,{attr:{title:this.options.title},events:{click:t=>{t.preventDefault(),this.show()}}})),this.editControl.toggleClass("pinned",this.controlPinned),this.editControl.style.transform=`scale(${1/this.scale})`):(this.editControl&&this.editControl.remove(),this.editControl=null)}show(){if(!this.envSupported)return;this.trigger("open");const t={locale:thisVisual.host.locale,colorPalette:thisVisual.host.colorPalette};thisVisual.host.openModalDialog(i.q.id,{title:"",actionButtons:[1,2],size:i.q.size},{activePlugin:this.options.activePlugin,pluginsOptions:this.options.plugins,updateOptions:this.updateOptions,sourceHost:t}).then((t=>{if(t){const e=t.resultState;if(this.trigger("close",t.actionId),e.activePlugin&&(this.options.activePlugin=e.activePlugin),1==t.actionId){if(e.changedSettings){const t=[],n="editor";for(const i of Object.keys(e.changedSettings))e.changedSettings[i].forEach((t=>{r.XI0.BATCH(t,n)})),t.push(i);this.trigger("beforeChange",{changedPlugins:t,batchId:n}),r.XI0.BATCH_SAVE(n,!1)}e.download&&thisVisual.host.downloadService.exportVisualsContent(e.download.content,e.download.fileName,e.download.fileType,e.download.fileDescription)}}})).catch((t=>{3==t.error&&r.s54.SHOW({id:"dialog-box-disabled-editor",icon:"alert",iconAlign:"top",title:"Dialogs are disabled",text:"It appears you have disabled dialogs in this session, so the editor cannot be displayed. Close and reopen the report to restore the previous behavior.",zIndex:99999999})}))}}},79953:(t,e,n)=>{"use strict";n.d(e,{KE:()=>i.K,f9:()=>r.ColorRulesEnumerator});var i=n(76648),r=n(4061)},18447:(t,e,n)=>{"use strict";n.d(e,{f:()=>a});var i=n(23515),r=n(34939),o=n(81807);class a{rules=[];columnsByRole={};get hasRules(){return this.rules&&this.rules.length}update(t,e){const n=t&&t.dataViews&&t.dataViews[0];n&&(this.columnsByRole=(0,o.JYz)(n.metadata.columns),n.metadata.objects&&(e&&Array.isArray(e)||(e=(0,o.PLM)(n.metadata.objects,"internal","colorRules",[])))),e&&Array.isArray(this.rules)||(e=[]),this.rules=e}getColor(t,e,n,o,a=i.UA){const s="string"==typeof n;let l=s?{solid:{color:n}}:n;if(this.rules.length)for(let n=0;n<this.rules.length;n++){const s=this.rules[n];if(s.enabled&&s.property==t&&!0===(0,r.Lw)(s,this.columnsByRole)){let t=!1;if("colorScale"==s.mode){const n=(0,r.RY)(s.colorScales.field,this.columnsByRole);if(n)for(const i of Object.keys(e))if(i==n.queryName){const n=this.getColorScaleColor(e[i],e,s,o,a);n&&n.solid&&n.solid.color&&(l=n),t=!0;break}}else if("conditions"==s.mode){if(void 0!==a&&s.conditions.level&&s.conditions.level!=i.UA&&s.conditions.level!=a)continue;t=s.conditions.operator==i.XP.And;for(const n of Object.keys(s.conditions.conditions)){const r=this.conditionApplies(e,s.conditions.conditions[n],o);if(r&&s.conditions.operator==i.XP.Or){t=!0;break}if(!r&&s.conditions.operator==i.XP.And){t=!1;break}}t&&s.conditions.color&&(l={solid:{color:s.conditions.color}})}if(t&&s.stop)break}}return l?s?l.solid.color:l:null}getColorScaleColor(t,e,n,o,a){n.colorScales.advanced||(a=i.UA);let s=o?t.highlightValue:t.value;if(null===s){if("ignore"==n.colorScales.blank)return null;if("color"==n.colorScales.blank)return n.colorScales.blankColor?{solid:{color:n.colorScales.blankColor}}:null;"zero"==n.colorScales.blank&&(s=0)}const l=n.colorScales.scalesByLevel[a],c={};for(const t of Object.keys(e))c[t]=(0,r.uC)(e[t].domain,n);const u=(0,r.fr)(l,n,(0,r.uC)(t.domain,n),c,this.columnsByRole);return s>u.max?{solid:{color:l.topColor}}:s<u.min?{solid:{color:l.bottomColor}}:(0,r.RQ)(s,u.min,(0,r.Ec)("min",l),u.max,(0,r.Ec)("max",l),u.center,l.center.color,n.colorScales.type==i.Qo.Logarithmic)}conditionApplies(t,e,n){let o=null;for(const i of Object.keys(t)){const a=(0,r.RY)(e.field,this.columnsByRole);if(a&&i==a.queryName){o=n?t[i].highlightValue:t[i].value;break}}let a=null;if(e.mode==i.LF.FieldValue||e.mode==i.LF.Calc){const o=(0,r.RY)(e.fieldValue,this.columnsByRole);if(o){for(const e of Object.keys(t))if(e==o.queryName){a=n?t[e].highlightValue:t[e].value;break}e.mode==i.LF.Calc&&(e.calc==i.m.Minus?a-=e.value:e.calc==i.m.Divide?a/=e.value:e.calc==i.m.Times?a*=e.value:a+=e.value)}}else a=e.value;return e.comparison==i.Uf.LessThan?o<a:e.comparison==i.Uf.LessThanOrEqualTo?o<=a:e.comparison==i.Uf.EqualTo?o==a:e.comparison==i.Uf.DifferentFrom?o!=a:e.comparison==i.Uf.GreaterThan?o>a:e.comparison==i.Uf.GreaterThanOrEqualTo?o>=a:e.comparison==i.Uf.Between?o>=a&&o<=e.value2:e.comparison==i.Uf.Blank?null===o:e.comparison==i.Uf.NotBlank&&null!==o}getLegendDataPoints(t=i.UA){const e=[];if(this.rules)for(let n=0;n<this.rules.length;n++){const i=this.rules[n];if(i.enabled&&i.legend&&!0===(0,r.Lw)(i,this.columnsByRole))if("colorScale"==i.mode){const n=(0,r.RY)(i.colorScales.field,this.columnsByRole);if(n){const o=thisVisual.host.createSelectionIdBuilder().withMeasure(n.queryName).createSelectionId(),a=i.colorScales.scalesByLevel[t];a.min.color&&e.push({label:a.max.color?"":i.displayName,color:a.min.color,selected:!1,identity:o}),a.center.color&&e.push({label:"",color:a.center.color,selected:!1,identity:o}),a.max.color&&e.push({label:i.displayName,color:a.max.color,selected:!1,identity:o}),a.bottomColor&&e.push({label:`${i.displayName}: < ${(0,r.bk)(a.min,n.format,this.columnsByRole)}`,color:a.bottomColor,selected:!1,identity:o}),a.topColor&&e.push({label:`${i.displayName}: > ${(0,r.bk)(a.max,n.format,this.columnsByRole)}`,color:a.topColor,selected:!1,identity:o})}}else if("conditions"==i.mode){const t=(0,r.RY)(i.conditions.conditions[0].field,this.columnsByRole);t&&e.push({label:i.displayName,color:i.conditions.color,selected:!1,identity:thisVisual.host.createSelectionIdBuilder().withMeasure(t.queryName).createSelectionId()})}}return e}getLegendItems(t=i.UA){const e=[];if(this.rules)for(let n=0;n<this.rules.length;n++){const i=this.rules[n];if(i.enabled&&i.legend&&!0===(0,r.Lw)(i,this.columnsByRole)){const n=`_rule_${i.id}`;if("colorScale"==i.mode){const o=(0,r.RY)(i.colorScales.field,this.columnsByRole);if(o){const a=i.colorScales.scalesByLevel[t];if(e.push({key:n,label:i.displayName,color:a.min.color||a.center.color||a.max.color,colorEnd:a.max.color||a.center.color,static:!0}),a.bottomColor){const t=(0,r.bk)(a.min,o.format,this.columnsByRole);t&&e.push({key:`${n}_b`,label:`${i.displayName}: < ${t}`,color:a.bottomColor,static:!0})}if(a.topColor){const t=(0,r.bk)(a.max,o.format,this.columnsByRole);t&&e.push({key:`${n}_t`,label:`${i.displayName}: > ${t}`,color:a.topColor,static:!0})}}}else"conditions"==i.mode&&(0,r.RY)(i.conditions.conditions[0].field,this.columnsByRole)&&e.push({key:n,label:i.displayName,color:i.conditions.color,static:!0})}}return e}}},6950:(t,e,n)=>{"use strict";n.d(e,{AS:()=>h,Ec:()=>c.Ec,FA:()=>c.FA,Gy:()=>l.Gy,LF:()=>l.LF,Lw:()=>c.Lw,P0:()=>l.P0,Qo:()=>l.Qo,RQ:()=>c.RQ,RU:()=>l.RU,RY:()=>c.RY,UA:()=>l.UA,Uf:()=>l.Uf,XP:()=>l.XP,_Z:()=>c._Z,a3:()=>l.a3,bk:()=>c.bk,e2:()=>l.e2,f9:()=>u.f,fr:()=>c.fr,hz:()=>c.hz,m:()=>l.m,nf:()=>c.nf,o5:()=>c.o5,oF:()=>c.oF,uC:()=>c.uC,z1:()=>c.z1});var i=n(10246),r=n(83124),o=n.n(r),a=n(93622),s=n(81807),l=n(23515),c=n(34939),u=n(18447);class h extends a.Z{options;updateOptions;rules=[];columnsByRole={};levels={};activeRule;activeLevel=l.UA;colorScaleSlider;ruleListElement;ruleDataElement;ruleWarningElement;baseColor=l.Gy;get displayName(){return"Color Rules"}getLevelName(t){return t==l.UA?Object.keys(this.levels).length>1?this.options.defaultLevelName||"Any Level":"Color Scale":(0,s.TF7)(t)}constructor(t,e){super(t,e),this.options=t,this.updateOptions=e,new s.skP(thisVisual.host.colorPalette);const n=this.updateOptions.visualUpdateOptions&&this.updateOptions.visualUpdateOptions.dataViews&&this.updateOptions.visualUpdateOptions.dataViews[0];if(n&&(this.columnsByRole=(0,s.JYz)(n.metadata.columns),this.levels=this.generateLevels(n)),t.baseColorProperty&&e.settings){const[n,i]=t.baseColorProperty.split(".");(0,s.cKq)(e.settings,n)&&(0,s.cKq)(e.settings[n],i)&&e.settings[n][i]&&(0,s.cKq)(e.settings[n][i],"solid")&&(this.baseColor=e.settings[n][i].solid.color)}this.rules=e.settings&&(0,s.cKq)(e.settings,"internal")&&(0,s.cKq)(e.settings.internal,"colorRules")&&Array.isArray(e.settings.internal.colorRules)?(0,c.z1)(e.settings.internal.colorRules):[]}generateLevels(t){if(this.options.levels)return this.options.levels;const e={[l.UA]:{}};return t.matrix||t.categorical&&t.categorical.values&&t.categorical.values.forEach((t=>{e[l.UA][t.source.queryName]=(0,s.PVN)(t)})),e}updateColorScaleSlider(t,e){const n=(0,s.VR4)(".colorScale-slider"),i=(0,c._Z)(t,this.columnsByRole);if(!0===i){n.toggle(!0);let a={min:0,center:50,max:100},u=a.min,h=a.max,d=null;const p=t.colorScales.scalesByLevel[e],f=(0,c.RY)(t.colorScales.field,this.columnsByRole),g=this.levels[e];if((0,s.cKq)(g,f.queryName)){const e=(0,c.uC)(g[f.queryName],t);u=e.min,h=e.max,a=(0,c.fr)(p,t,e,g,this.columnsByRole),d=[{to:n=>this.colorScaleSliderTooltips(t,"min",n,e,f)},{to:n=>this.colorScaleSliderTooltips(t,"max",n,e,f)}]}this.colorScaleSlider?this.colorScaleSlider.updateOptions({start:[a.min,a.max],range:{min:u,max:h},pips:{mode:r.PipsMode.Count,values:2,density:10,stepped:!0,format:this.colorScaleSliderPipsFormatter(u,f)},tooltips:d},!0):(this.colorScaleSlider=o().create(n,{start:[a.min,a.max],connect:[!0,!0,!0],range:{min:u,max:h},pips:{mode:r.PipsMode.Count,values:2,density:10,stepped:!0,format:this.colorScaleSliderPipsFormatter(u,f)},animate:!1,tooltips:d}),this.colorScaleSlider.on("slide",((e,n,i)=>this.slideColorScaleSlider(t,i))),this.colorScaleSlider.on("change",(()=>this.saveRules()))),n.toggleAttr("disabled",!i),(0,s.kOW)(".noUi-origin",n).forEach(((t,e)=>{0==e?t.toggleAttr("disabled",p.min.mode==l.LF.FieldValue||p.min.mode==l.LF.Calc):1==e&&t.toggleAttr("disabled",p.max.mode==l.LF.FieldValue||p.max.mode==l.LF.Calc)})),this.updateColorScaleSliderBands(p,u,h)}else this.colorScaleSlider&&(this.colorScaleSlider.destroy(),this.colorScaleSlider=null),n.toggle(!1)}slideColorScaleSlider(t,e){const n=(0,c.RY)(t.colorScales.field,this.columnsByRole);if(n){const i=this.levels[this.activeLevel],r=(0,c.uC)(i[n.queryName],t),o=t.colorScales.type==l.Qo.Logarithmic;let a=e[0];t.colorScales.scalesByLevel[this.activeLevel].min.mode==l.LF.Percentage?a=(0,c.nf)(a,r.min,r.max,"perc",o,!0):a!=r.min&&a!=r.max&&(a=Math.round(a));let u=e[1];t.colorScales.scalesByLevel[this.activeLevel].max.mode==l.LF.Percentage?u=(0,c.nf)(u,r.min,r.max,"perc",o,!0):u!=r.min&&u!=r.max&&(u=Math.round(u)),t.colorScales.scalesByLevel[this.activeLevel].min.value=a,null!=a&&((0,s.VR4)(`#tab-content-colorScale-${this.activeLevel} .rule-colorScale-col-min .rule-field-conditions-value`).value=String(a)),t.colorScales.scalesByLevel[this.activeLevel].max.value=u,null!==u&&((0,s.VR4)(`#tab-content-colorScale-${this.activeLevel} .rule-colorScale-col-max .rule-field-conditions-value`).value=String(u)),this.updateColorScaleSliderBands(t.colorScales.scalesByLevel[this.activeLevel],r.min,r.max)}}colorScaleSliderTooltips(t,e,n,i,r){const o=(0,c.nf)(n,i.min,i.max,"perc",t.colorScales.type==l.Qo.Logarithmic),a=t.colorScales.scalesByLevel[this.activeLevel][e].mode==l.LF.Percentage,s=null!==o&&r.aggregates;return`\n            <span class="abs ${a?"inactive":""}">\n                ${this.colorScaleSliderPipsFormatter(i.min,r).to(n)}\n            </span>\n            ${s?`<br>\n            <span class="perc ${a?"":"inactive"}">\n                ${o}%\n            </span>`:""}\n        `}colorScaleSliderPipsFormatter(t,e){return{to:n=>s.ZA6.instance.create({format:e.format,formatSingleValues:!1,value:t,precision:0,displayUnitSystemType:0,allowFormatBeautification:!0}).format(n)}}updateColorScaleSliderBands(t,e,n){(0,s.kOW)(".colorScale-slider .noUi-connect").forEach(((i,r)=>{0==r?i.style.background=t.bottomColor?t.bottomColor:"none":1==r?i.style.background=(0,c.o5)(t,e,n):2==r&&(i.style.background=t.topColor?t.topColor:"none")}))}updateColorScaleRelativeDomain(t){if("colorScale"==t.mode&&t.colorScales.field){const e=(0,s.VR4)(".relative-scale-switch input[type=checkbox]"),n=(0,c.RY)(t.colorScales.field,this.columnsByRole);n?n.aggregates?e.disabled=!1:(e.checked=!1,e.disabled=!0,t.colorScales.relative=!1,this.saveRules()):e.disabled=!0}}draw(t){super.draw(t),this.drawRules(t),i.Ay.create(this.ruleListElement,{draggable:"li",handle:".rule-drag",filter:".unsortable",direction:"vertical",onEnd:t=>{this.rules.splice(t.newIndex,0,this.rules.splice(t.oldIndex,1)[0]),this.saveRules()}}),this.listen(),this.rules.length&&this.selectRule(this.rules[this.rules.length-1])}listen(){document.addLiveEventListener("click",".rules-list li",((t,e)=>{const n=this.rules.find((t=>t.id==e.dataset.rule));n&&this.selectRule(n)})),document.addLiveEventListener("change",".rule-data input, .rule-data select",((t,e)=>{e.classList.contains("ignore-change")||this.changeInput([e])})),s.skP.instance.on("change",(t=>this.changeColor(t))),document.addLiveEventListener("change",".rule-field-title",((t,e)=>{(0,s.VR4)(`.rules-list li[data-rule="${this.activeRule.id}"] .rule-title`).innerText=e.value})),document.addLiveEventListener("change",".rule-field-property",((t,e)=>{(0,s.VR4)(`.rules-list li[data-rule="${this.activeRule.id}"] .rule-property`).innerText=e.options[e.selectedIndex].text})),document.addLiveEventListener("change",".rule-field-mode",((t,e)=>{(0,s.kOW)(".rule-mode").forEach((t=>t.toggle(!1))),(0,s.VR4)(`.rule-mode-${e.value}`).toggle(!0)})),document.addLiveEventListener("change",".rule-field-enable input",((t,e)=>{this.activeRule.enabled=e.checked,this.saveRules()})),document.addLiveEventListener("click",".rule-delete",((t,e)=>{if(t.preventDefault(),e.getAttribute("disabled"))return;const n=e.closest("li").dataset.rule;this.deleteRule(n)})),document.addLiveEventListener("click",".rule-add",(t=>{t.preventDefault(),this.addRule()})),document.addLiveEventListener("change",".rule-field-colorScale-blank",((t,e)=>{(0,s.VR4)(".blank-color").toggle("color"==e.value)})),document.addLiveEventListener("change",".rule-mode-colorScale input, .rule-mode-colorScale select",(()=>{this.updateColorScaleSlider(this.activeRule,this.activeLevel)})),document.addLiveEventListener("change",".rule-field-colorScale-field",(()=>{this.updateColorScaleRelativeDomain(this.activeRule)})),document.addLiveEventListener("click",".levels-tabs .tab",((t,e)=>{t.preventDefault(),this.changeLevel(e)})),document.addLiveEventListener("change",".advanced-switch input",((t,e)=>{const n=e.checked;(0,s.kOW)(".levels-tabs .tab").forEach(((t,e)=>{t.toggle(0==e?!n:n),(0==e&&!n||1==e&&n)&&this.changeLevel(t)}))})),document.addLiveEventListener("click",".rule-conditions-add",(t=>{t.preventDefault(),this.addCondition()})),document.addLiveEventListener("click",".rule-condition-delete",((t,e)=>{t.preventDefault(),this.deleteCondition(e)})),document.addLiveEventListener("change",".rule-conditions-field-operator",((t,e)=>{(0,s.kOW)(".rule-conditions-field-operator").forEach((t=>t.value=e.value))})),document.addLiveEventListener("change",".rule-field-conditions-mode",((t,e)=>this.changeConditionMode(e))),document.addLiveEventListener("change",".rule-field-conditions-comparison",((t,e)=>this.changeConditionComparison(e)))}changeColor(t){this.updateRuleProperty(this.activeRule,t.id,t.color),this.updateRuleStatus(this.activeRule),this.saveRules(),this.updateColorScaleSlider(this.activeRule,this.activeLevel)}addCondition(){const t=(0,l.P0)(this.activeRule);this.activeRule.conditions.conditions[t.id]=t,this.drawRuleCondition(this.activeRule,t,(0,s.VR4)(".rule-mode-conditions ul")),this.updateRuleStatus(this.activeRule),this.saveRules()}deleteCondition(t){const e=t.closest("li").dataset.condition;(0,s.VR4)(`.rule-mode-conditions li[data-condition="${e}"]`).remove(),delete this.activeRule.conditions.conditions[e],this.updateRuleStatus(this.activeRule),this.saveRules()}changeConditionMode(t){const e=Number(t.value),n=e==l.LF.Value||e==l.LF.Percentage?"value":e==l.LF.FieldValue?"fieldValue":e==l.LF.Calc?"calc":"",i=t.closest("li");(0,s.kOW)(".rule-field-conditions-fieldValue, .rule-field-conditions-value, .rule-field-conditions-calc",i).forEach((t=>t.toggle(e==l.LF.Calc))),(0,s.VR4)(`.rule-field-conditions-${n}`,i).toggle(!0);const r=(0,c.RY)(this.activeRule.colorScales.field,this.columnsByRole),o=r?(0,c.uC)(this.levels[this.activeLevel][r.queryName],this.activeRule):null,a=o?o.min:null,u=o?o.max:null,h=this.activeRule.colorScales.type==l.Qo.Logarithmic,d=(0,s.VR4)(".rule-field-conditions-value",i),p=d.value,f=Number(t.dataset.prev),g=""!=p&&o&&f!=l.LF.FieldValue&&f!=l.LF.Calc;e==l.LF.Value?(d.setAttribute("min",String(a)),d.setAttribute("max",String(u)),d.value=g?String((0,c.nf)(Number(p),a,u,"abs",h)):""):e==l.LF.Percentage?(d.setAttribute("min","0"),d.setAttribute("max","100"),d.value=g?String((0,c.nf)(Number(p),a,u,"perc",h)):""):(d.removeAttribute("min"),d.removeAttribute("max"),d.value="0"),t.dataset.prev=String(e),this.changeInput([t,d])}changeConditionComparison(t){const e=Number(t.value),n=t.closest("li");(0,s.kOW)(".rule-conditions-col-value, .rule-conditions-col-mode",n).forEach((t=>t.toggle(!(e==l.Uf.Blank||e==l.Uf.NotBlank)))),(0,s.kOW)(".rule-conditions-col-value2, .rule-conditions-col-between",n).forEach((t=>t.toggle(e==l.Uf.Between))),e==l.Uf.Between&&((0,s.VR4)(".rule-field-conditions-mode",n).value=String(l.LF.Value),(0,s.kOW)(".rule-field-conditions-fieldValue, .rule-field-conditions-calc, .rule-conditions-col-mode",n).forEach((t=>t.toggle(!1))),(0,s.VR4)(".rule-field-conditions-value",n).toggle(!0))}changeInput(t){let e=!1;t.forEach((t=>{if(!t.hasAttribute("name"))return;const n=t.getAttribute("name"),i=t.getAttribute("type"),r="checkbox"==i?t.checked:"number"==i?null!==t.value&&""!==t.value?parseFloat(t.value):null:t.value;this.updateRuleProperty(this.activeRule,n,r),e=!0})),e&&(this.updateRuleStatus(this.activeRule),"colorScale"==this.activeRule.mode&&this.updateColorScaleSlider(this.activeRule,this.activeLevel),this.saveRules())}changeLevel(t){t.classList.contains("active")||((0,s.kOW)(".levels-tabs .tab.active").forEach((t=>t.classList.remove("active"))),(0,s.kOW)(".levels-tabs-content .tab-content-colorScale").forEach((t=>t.toggle(!1))),t.classList.add("active"),(0,s.VR4)(t.dataset.content).toggle(!0),this.activeLevel=t.dataset.value,this.updateColorScaleSlider(this.activeRule,this.activeLevel),this.updateRuleStatus(this.activeRule))}updateRuleProperty(t,e,n){let i=t;const r=e.split(".");for(let t=0;t<r.length-1;t++)null==i[r[t]]&&(i[r[t]]={}),i=i[r[t]];const o=r.length-1;if(r[o].indexOf("|")>=0){const t=r[o].split("|"),e=String(n).split("|");for(let n=0;n<t.length;n++)i[t[n]]=(0,s.cKq)(e,n)?isNaN(Number(e[n]))?e[n]:parseFloat(e[n]):""}else i[r[o]]=n}selectRule(t){(0,s.kOW)("li.active",this.ruleListElement).forEach((t=>t.classList.remove("active"))),(0,s.VR4)(`li[data-rule="${t.id}"]`,this.ruleListElement).classList.add("active"),this.activeRule=t;const e=Object.keys(this.levels);this.activeLevel=e[t.colorScales.advanced&&e.length>1?1:0],this.drawRuleData(t),this.toggleRuleWarning((0,c.Lw)(t,this.columnsByRole))}drawRules(t){const e=(0,s.tTh)(".dialog-flex.color-rules-manager",t,[(0,s.tTh)(".dialog-col.rules-list",[(0,s.tTh)("ul"),(0,s.tTh)("button.rule-add.btn.icon.icon-add","Add Rule")]),(0,s.tTh)(".dialog-col.rule-data")]);this.ruleListElement=(0,s.VR4)(".rules-list ul",e),this.ruleDataElement=(0,s.VR4)(".rule-data",e),this.rules.forEach((t=>this.drawRule(t))),this.drawRuleDataPlaceholder()}drawRule(t){const e=this.options.properties[t.property]||"[Invalid]";(0,s.tTh)("li",this.ruleListElement,{data:{rule:t.id},attr:{disabled:!t.enabled}},[(0,s.tTh)(".rule-drag.icon.icon-sort",{attr:{title:"Re-order",disabled:t.locked&&(t.locked.resort||t.locked.inclusive&&!1!==t.locked.resort)}}),(0,s.tTh)(".rule-color"),(0,s.tTh)("div",[(0,s.tTh)(".rule-title",(0,c.oF)(t,this.columnsByRole)),(0,s.tTh)(".rule-property",e)]),(0,s.tTh)(".rule-enabler",[(0,s.HGh)(".rule-field-enable.small",null,{checked:t.enabled,disabled:t.locked&&(t.locked.enabled||t.locked.inclusive&&!1!==t.locked.enabled)}),(0,s.tTh)(".rule-invalid.icon.icon-alert",{attr:{title:"This rule contains errors",hidden:!0}})]),(0,s.tTh)("a.control.rule-delete.icon.icon-close",{attr:{title:"Delete Rule",hidden:t.locked&&(t.locked.delete||t.locked.inclusive&&!1!==t.locked.delete)}}),(0,s.tTh)(".rule-lock.icon.icon-lock",{attr:{title:"This rule is locked.",hidden:!(t.locked&&(t.locked.delete||t.locked.inclusive&&!1!==t.locked.delete))}})]),this.updateRuleStatus(t)}drawRuleData(t){this.emptyRuleData();const e=(0,s.tTh)(".rule-options",this.ruleDataElement,[(0,s.tTh)(".dialog-field.dialog-flex",[(0,s.tTh)(".dialog-col",[(0,s.tTh)("label","Rule Type"),(0,s.tTh)("select.rule-field-mode",{attr:{name:"mode",disabled:t.locked&&(t.locked.mode||t.locked.inclusive&&!1!==t.locked.mode)},list:[{value:"colorScale",text:"Color Scale",selected:"colorScale"==t.mode},{value:"conditions",text:"Conditions",selected:"conditions"==t.mode}]})]),(0,s.tTh)(".dialog-col.rule-col-title",[(0,s.tTh)("label","Rule Name"),(0,s.tTh)("input.rule-field-title",{attr:{type:"text",name:"displayName",maxlength:50,value:(0,c.oF)(t,this.columnsByRole),disabled:t.locked&&(t.locked.displayName||t.locked.inclusive&&!1!==t.locked.displayName)}})]),(0,s.tTh)(".dialog-col",[(0,s.tTh)("label","Apply to"),(0,s.tTh)("select.rule-field-property",{attr:{name:"property",required:!0,disabled:t.locked&&(t.locked.property||t.locked.inclusive&&!1!==t.locked.property)},list:Object.keys(this.options.properties).map((e=>({value:e,text:this.options.properties[e],selected:t.property==e})))})])]),(0,s.tTh)(".dialog-flex",[(0,s.tTh)(".dialog-col",{attr:{hidden:!this.options.hasLegend}},[(0,s.HGh)(".rule-field-legend.small",null,{name:"legend",checked:t.legend,disabled:t.locked&&(t.locked.legend||t.locked.inclusive&&!1!==t.locked.legend)},"Show in Legend")]),(0,s.tTh)(".rule-info.rule-locked",{attr:{hidden:!t.locked}},[(0,s.tTh)(".icon.icon-lock"),(0,s.tTh)("div","This rule is partially locked.")]),(0,s.tTh)("div",{attr:{hidden:!!t.locked}},[(0,s.HGh)(".rule-field-stop.small",null,{name:"stop",checked:t.stop,disabled:t.locked&&(t.locked.stop||t.locked.inclusive&&!1!==t.locked.stop)},"Stop other Rules")])])]);this.drawRuleColorScale(t,e),this.drawRuleConditions(t,e),this.ruleWarningElement=(0,s.tTh)(".rule-info.rule-warning",e,{attr:{hidden:!0}},[(0,s.tTh)(".icon.icon-alert"),(0,s.tTh)(".message")])}drawRuleColorScale(t,e){const[n,i]=this.domRuleColorScaleTabs(t),r=Object.keys(this.levels);(0,s.tTh)(".rule-mode.rule-mode-colorScale",e,{attr:{hidden:"colorScale"!=t.mode}},[(0,s.tTh)(".dialog-field.dialog-flex",[(0,s.tTh)(".dialog-col",[(0,s.tTh)("label","Field"),(0,s.tTh)("select.rule-field-colorScale-field",{attr:{name:"colorScales.field.role|roleIndex",required:!0,disabled:t.locked&&(t.locked.colorScale&&t.locked.colorScale.field||t.locked.inclusive&&(!t.locked.colorScale||!1!==t.locked.colorScale.field))},list:this.domColumnOptions(t.colorScales.field)})]),(0,s.tTh)(".dialog-col",[(0,s.tTh)("label","Scale Type"),(0,s.tTh)("select.rule-field-colorScale-type",{attr:{name:"colorScales.type",type:"number",disabled:t.locked&&(t.locked.colorScale&&t.locked.colorScale.type||t.locked.inclusive&&(!t.locked.colorScale||!1!==t.locked.colorScale.type))},list:[{value:l.Qo.Linear,text:"Linear",selected:t.colorScales.type==l.Qo.Linear},{value:l.Qo.Logarithmic,text:"Logarithmic",selected:t.colorScales.type==l.Qo.Logarithmic}]})]),(0,s.tTh)(".dialog-col.rule-col-colorScale-blank",[(0,s.tTh)("label","Blank Values"),(0,s.tTh)(".dialog-flex",[(0,s.tTh)("select.rule-field-colorScale-blank dialog-col",{attr:{name:"colorScales.blank",disabled:t.locked&&(t.locked.colorScale&&t.locked.colorScale.blank||t.locked.inclusive&&(!t.locked.colorScale||!1!==t.locked.colorScale.blank))},list:[{value:"ignore",text:"Ignore",selected:"ignore"==t.colorScales.blank},{value:"zero",text:"Treat as Zero",selected:"zero"==t.colorScales.blank},{value:"color",text:"Set Color",selected:"color"==t.colorScales.blank}]}),(0,s.tTh)("span.blank-color.dialog-col",{attr:{hidden:"color"!=t.colorScales.blank}},[s.skP.DOM({id:"colorScales.blankColor",disabled:t.locked&&(t.locked.colorScale&&t.locked.colorScale.blank||t.locked.inclusive&&(!t.locked.colorScale||!1!==t.locked.colorScale.blank)),color:t.colorScales.blankColor})])])])]),(0,s.tTh)(r.length<2?"label":".tabs.levels-tabs",[(0,s.HGh)(".advanced-switch.small",null,{name:"colorScales.advanced",checked:t.colorScales.advanced,hidden:r.length<2,disabled:t.locked&&(t.locked.colorScale&&t.locked.colorScale.advanced||t.locked.inclusive&&(!t.locked.colorScale||!1!==t.locked.colorScale.advanced))},"Multiple Scales"),(0,s.tTh)("div",n)]),(0,s.tTh)(".dialog-field.levels-tabs-content",i),(0,s.tTh)(".relative-scale-switch-container",{style:{display:this.options.hideRelativeDomain?"none":null}},[(0,s.HGh)(".relative-scale-switch.small",null,{name:"colorScales.relative",checked:t.colorScales.relative,disabled:t.locked&&(t.locked.colorScale&&t.locked.colorScale.relative||t.locked.inclusive&&(!t.locked.colorScale||!1!==t.locked.colorScale.relative)),title:"Change how the start of the scale is calculated. When enabled, the first data point of the column is considered the starting point. Otherwise the scale starts from 0 if contains positive values only, or ends to 0 if contains negative values only. It cannot be used with measures."},"Relative Domain")]),(0,s.tTh)(".colorScale-preview-container.dialog-flex",[(0,s.tTh)(".colorScale-slider"),(0,s.tTh)(".colorScale-slider-warning.icon.icon-alert",{attr:{hidden:!0}})])]),this.colorScaleSlider&&(this.colorScaleSlider.destroy(),this.colorScaleSlider=null),this.updateColorScaleRelativeDomain(t),this.updateColorScaleSlider(t,this.activeLevel)}domRuleColorScaleTabs(t){const e=[],n=[];return Object.keys(this.levels).forEach(((i,r)=>{const o=this.activeLevel==i;(0,c.hz)(t,i,this.baseColor),e.push((0,s.tTh)(".tab"+(o?".active":""),{attr:{hidden:t.colorScales.advanced&&0==r||!t.colorScales.advanced&&r>0},data:{content:`#tab-content-colorScale-${i}`,value:i}},this.getLevelName(i))),n.push((0,s.tTh)(`ul#tab-content-colorScale-${i}.tab-content-colorScale`,{attr:{hidden:!o}},[this.domColorScaleCondition(t,i,"min"),this.domColorScaleCondition(t,i,"center"),this.domColorScaleCondition(t,i,"max")]))})),[e,n]}domColumnOptions(t){const e=[{value:"",text:"(Choose a field)"}],n=t&&t.roleIndex?t.roleIndex:0;return this.options.roles.forEach((i=>{if((0,s.cKq)(this.columnsByRole,i))for(let r=0;r<this.columnsByRole[i].length;r++){const o=this.columnsByRole[i][r],a=t&&t.role==i&&n==r;e.push({value:`${i}|${r}`,text:o.displayName,selected:a})}})),e}domColorScaleCondition(t,e,n){const i=t.colorScales.scalesByLevel[e],r=t.locked&&(t.locked.colorScale&&t.locked.colorScale[n]&&t.locked.colorScale[n].color||t.locked.inclusive&&(!t.locked.colorScale||!t.locked.colorScale[n]||!1!==t.locked.colorScale[n].color)),o=t.locked&&(t.locked.colorScale&&t.locked.colorScale[n]&&t.locked.colorScale[n].mode||t.locked.inclusive&&(!t.locked.colorScale||!t.locked.colorScale[n]||!1===t.locked.colorScale[n].mode));return(0,s.tTh)(`li.dialog-flex.dialog-row.rule-colorScale-col-${n}`,{data:{type:n}},[(0,s.tTh)(".dialog-col-label","min"==n?"Minimum":"max"==n?"Maximum":"Center"),s.skP.DOM({id:`colorScales.scalesByLevel.${e}.${n}.color`,color:(0,c.Ec)(n,i),disabled:r,customColors:[thisVisual.host.colorPalette.positive.value,(0,s.dyA)(.45,thisVisual.host.colorPalette.positive.value)]}),(0,s.tTh)(".dialog-col.rule-conditions-col-mode",[(0,s.tTh)("select.rule-field-conditions-mode.ignore-change",{attr:{name:`colorScales.scalesByLevel.${e}.${n}.mode`,type:"number",disabled:o},list:[{value:l.LF.Percentage,text:"Percentage",selected:i[n].mode==l.LF.Percentage},{value:l.LF.Value,text:"Value",selected:i[n].mode==l.LF.Value},{value:l.LF.FieldValue,text:"Field",selected:i[n].mode==l.LF.FieldValue},{value:l.LF.Calc,text:"Calculation",selected:i[n].mode==l.LF.Calc}]})]),(0,s.tTh)(".dialog-col.dialog-flex.rule-conditions-col-value",[(0,s.tTh)("select.rule-field-conditions-fieldValue",{attr:{name:`colorScales.scalesByLevel.${e}.${n}.fieldValue.role|roleIndex`,required:!0,hidden:i[n].mode!=l.LF.FieldValue&&i[n].mode!=l.LF.Calc,disabled:o},list:this.domColumnOptions(i[n].fieldValue)}),(0,s.tTh)("select.rule-field-conditions-calc.math",{attr:{name:`colorScales.scalesByLevel.${e}.${n}.calc`,type:"number",disabled:o,hidden:i[n].mode!=l.LF.Calc},list:[{value:l.m.Plus,text:"+",selected:i[n].calc==l.m.Plus},{value:l.m.Minus,text:"−",selected:i[n].calc==l.m.Minus},{value:l.m.Divide,text:"÷",selected:i[n].calc==l.m.Divide},{value:l.m.Times,text:"×",selected:i[n].calc==l.m.Times}]}),(0,s.tTh)("input.rule-field-conditions-value",{attr:{name:`colorScales.scalesByLevel.${e}.${n}.value`,type:"number",placeholder:"Auto",hidden:i[n].mode!=l.LF.Value&&i[n].mode!=l.LF.Percentage&&i[n].mode!=l.LF.Calc,value:null!==i[n].value?i[n].value:"",step:1,disabled:o,min:i[n].mode==l.LF.Percentage?0:null,max:i[n].mode==l.LF.Percentage?100:null}})]),(0,s.tTh)(".dialog-col.dialog-flex.rule-colorScale-col-topBottom",[(0,s.tTh)(".dialog-col-label","min"==n?"Below":"max"==n?"Above":""),(0,s.tTh)(".dialog-col","center"==n?[]:[s.skP.DOM({id:"min"==n?`colorScales.scalesByLevel.${e}.bottomColor`:`colorScales.scalesByLevel.${e}.topColor`,color:"min"==n?i.bottomColor:i.topColor,customColors:[thisVisual.host.colorPalette.positive.value,(0,s.dyA)(.45,thisVisual.host.colorPalette.positive.value)]})])])])}drawRuleConditions(t,e){if(!t.conditions)return;const n=(0,s.tTh)("ul");for(const e of Object.keys(t.conditions.conditions))this.drawRuleCondition(t,t.conditions.conditions[e],n);(0,s.tTh)(".rule-mode.rule-mode-conditions",e,{attr:{hidden:"conditions"!=t.mode}},[(0,s.tTh)("label","Conditions"),(0,s.tTh)(".dialog-field.dialog-flex",[(0,s.tTh)(".dialog-col.rule-conditions-color",[s.skP.DOM({id:"conditions.color",color:t.conditions.color,nullable:!1,customColors:[thisVisual.host.colorPalette.positive.value,thisVisual.host.colorPalette.negative.value]})]),(0,s.tTh)(".dialog-col",[n,(0,s.tTh)("button.rule-conditions-add.btn.icon.icon-add",{attr:{hidden:t.locked&&(t.locked.conditions.add||t.locked.inclusive&&(!t.locked.conditions||!1!==t.locked.conditions.add))}},"Add Condition")])])])}drawRuleCondition(t,e,n){const i=t.locked&&(t.locked.conditions.edit||t.locked.inclusive&&(!t.locked.conditions||!1!==t.locked.conditions.edit));(0,s.tTh)("li",n,{data:{condition:e.id}},[...0!=e.id?[this.domRuleConditionOperator(t,e,i)]:[],...0==e.id&&Object.keys(this.levels).length>1?[this.domRuleConditionLevel(t,e,i)]:[],this.domRuleConditionComparison(t,e,i),this.domRuleConditionCalcs(t,e,i)])}domRuleConditionOperator(t,e,n){return(0,s.tTh)(".dialog-field.dialog-flex",[(0,s.tTh)("select.rule-conditions-field-operator",{attr:{name:"conditions.operator",disabled:n},list:[{value:"or",text:"Or",selected:t.conditions.operator==l.XP.Or},{value:"and",text:"And",selected:t.conditions.operator==l.XP.And}]}),(0,s.tTh)("a.control.rule-condition-delete.icon.icon-close",{attr:{href:"#",hidden:t.locked&&(t.locked.conditions.delete||t.locked.inclusive&&(!t.locked.conditions||!1!==t.locked.conditions.delete)),title:"Delete condition"}})])}domRuleConditionLevel(t,e,n){return(0,s.tTh)(".dialog-flex.rule-conditions-col-level",[(0,s.tTh)("select.rule-field-conditions-field",{attr:{name:"conditions.level",disabled:n},list:Object.keys(this.levels).map((e=>({value:e,text:this.getLevelName(e),selected:t.conditions.level==e})))})])}domRuleConditionComparison(t,e,n){return(0,s.tTh)(".dialog-flex",[(0,s.tTh)(".dialog-col.rule-conditions-col-if",0==e.id?"If":""),(0,s.tTh)(".dialog-col.rule-conditions-col-field",[(0,s.tTh)("select.rule-field-conditions-field",{attr:{name:`conditions.conditions.${e.id}.field.role|roleIndex`,required:!0,disabled:n},list:this.domColumnOptions(e.field)})]),(0,s.tTh)(".dialog-col.rule-conditions-col-comparison",[(0,s.tTh)("select.rule-field-conditions-comparison",{attr:{name:`conditions.conditions.${e.id}.comparison`,type:"number",disabled:n},list:[{value:l.Uf.LessThan,text:"Is Less than",selected:e.comparison==l.Uf.LessThan},{value:l.Uf.LessThanOrEqualTo,text:"Is Less than or Equal to",selected:e.comparison==l.Uf.LessThanOrEqualTo},{value:l.Uf.EqualTo,text:"Is Equal to",selected:e.comparison==l.Uf.EqualTo},{value:l.Uf.DifferentFrom,text:"Is Different from",selected:e.comparison==l.Uf.DifferentFrom},{value:l.Uf.GreaterThan,text:"Is Greater than",selected:e.comparison==l.Uf.GreaterThan},{value:l.Uf.GreaterThanOrEqualTo,text:"Is Greater than or Equal to",selected:e.comparison==l.Uf.GreaterThanOrEqualTo},{value:l.Uf.Between,text:"Is Between",selected:e.comparison==l.Uf.Between},{value:l.Uf.Blank,text:"Is Blank",selected:e.comparison==l.Uf.Blank},{value:l.Uf.NotBlank,text:"Is Not Blank",selected:e.comparison==l.Uf.NotBlank}]})])])}domRuleConditionCalcs(t,e,n){return(0,s.tTh)(".dialog-flex.dialog-field",[(0,s.tTh)(".dialog-col.rule-conditions-col-if"),(0,s.tTh)(".dialog-col.rule-conditions-col-mode",{attr:{hidden:e.comparison==l.Uf.Blank||e.comparison==l.Uf.NotBlank||e.comparison==l.Uf.Between}},[(0,s.tTh)("select.rule-field-conditions-mode",{attr:{name:`conditions.conditions.${e.id}.mode`,type:"number",disabled:n},list:[{value:l.LF.Value,text:"Value",selected:e.mode==l.LF.Value},{value:l.LF.FieldValue,text:"Field",selected:e.mode==l.LF.FieldValue&&e.comparison!=l.Uf.Between},{value:l.LF.Calc,text:"Calculation",selected:e.mode==l.LF.Calc&&e.comparison!=l.Uf.Between}]})]),(0,s.tTh)(".dialog-col.dialog-flex.rule-conditions-col-value",{attr:{hidden:e.comparison==l.Uf.Blank||e.comparison==l.Uf.NotBlank}},[(0,s.tTh)("select.rule-field-conditions-fieldValue",{attr:{name:`conditions.conditions.${e.id}.fieldValue.role|roleIndex`,required:!0,hidden:!((e.mode==l.LF.FieldValue||e.mode==l.LF.Calc)&&e.comparison!=l.Uf.Between),disabled:n},list:this.domColumnOptions(e.fieldValue)}),(0,s.tTh)("select.rule-field-conditions-calc.math",{attr:{name:`conditions.conditions.${e.id}.calc`,type:"number",hidden:!(e.mode==l.LF.Calc&&e.comparison!=l.Uf.Between),disabled:n},list:[{value:l.m.Plus,text:"+",selected:e.calc==l.m.Plus},{value:l.m.Minus,text:"-",selected:e.calc==l.m.Minus},{value:l.m.Divide,text:"÷",selected:e.calc==l.m.Divide},{value:l.m.Times,text:"×",selected:e.calc==l.m.Times}]}),(0,s.tTh)("input.rule-field-conditions-value",{attr:{name:`conditions.conditions.${e.id}.value`,type:"number",hidden:!(e.mode==l.LF.Value||e.mode==l.LF.Calc||e.comparison==l.Uf.Between),required:!0,step:1,value:`${null!=e.value?e.value:""}`,disabled:n,placeholder:"Enter a value"}})]),(0,s.tTh)(".dialog-col.dialog-flex.rule-conditions-col-between",{attr:{hidden:e.comparison!=l.Uf.Between}},"And"),(0,s.tTh)(".dialog-col.rule-conditions-col-value2",{attr:{hidden:e.comparison!=l.Uf.Between}},[(0,s.tTh)("input.rule-field-conditions-value2",{attr:{name:`conditions.conditions.${e.id}.value2`,type:"number",placeholder:"Enter a value",step:1,value:`${null!=e.value2?e.value2:""}`,required:!0,disabled:n}})])])}drawRuleDataPlaceholder(){this.emptyRuleData(),(0,s.tTh)(".dialog-placeholder",this.ruleDataElement,"Select a rule to modify")}emptyRuleData(){this.ruleWarningElement=null,this.ruleDataElement.innerText=""}updateRuleStatus(t){const e=(0,s.VR4)(`li[data-rule="${t.id}"]`,this.ruleListElement),n=(0,c.Lw)(t,this.columnsByRole);(0,s.VR4)(".rule-enabler .rule-invalid",e).toggle(!0!==n),(0,s.VR4)(".rule-enabler .rule-field-enable",e).toggle(!0===n);let i="#fff";if("colorScale"==t.mode){let e=Object.keys(this.levels)[t.colorScales.advanced?1:0];e||(e=this.activeLevel),i=(0,c.o5)(t.colorScales.scalesByLevel[e])}else"conditions"==t.mode&&(i=t.conditions.color);(0,s.VR4)(".rule-color",e).style.background=i,this.toggleRuleWarning(n)}toggleRuleWarning(t){this.ruleWarningElement&&(this.ruleWarningElement.toggle(!0!==t),!0!==t&&((0,s.VR4)(".message",this.ruleWarningElement).innerText=String(t)))}saveRules(){this.pending.internal=[{objectName:"internal",properties:{colorRules:this.rules},selector:null}],this.save()}addRule(){const t=(0,l.e2)(this.rules.length,Object.keys(this.options.properties)[0],this.levels,this.baseColor);this.rules.push(t),this.drawRule(t),this.selectRule(t),this.saveRules()}deleteRule(t){let e=!1;for(let n=0;n<this.rules.length;n++)if(this.rules[n].id==t){(!this.rules[n].locked||this.rules[n].locked.inclusive&&!1===this.rules[n].locked.delete||!this.rules[n].locked.inclusive&&!1!==this.rules[n].locked.delete)&&((0,s.VR4)(`li[data-rule="${t}"]`,this.ruleListElement).remove(),this.rules.splice(n,1),e=!0);break}e&&(this.activeRule&&this.activeRule.id==t&&(this.rules.length?this.selectRule(this.rules[this.rules.length-1]):this.drawRuleDataPlaceholder()),this.saveRules())}}},34939:(t,e,n)=>{"use strict";n.d(e,{Ec:()=>d,FA:()=>l,Lw:()=>a,RQ:()=>h,RY:()=>u,_Z:()=>s,bk:()=>m,fr:()=>f,hz:()=>p,nf:()=>v,o5:()=>g,oF:()=>c,uC:()=>y,z1:()=>b});var i=n(81807),r=n(23515),o=n(30756);function a(t,e){return"colorScale"==t.mode?s(t,e):"conditions"!=t.mode||l(t,e)}function s(t,e){const n="Not all comparison fields have been selected or are valid.";if(!t.colorScales||!t.colorScales.scalesByLevel)return"This rule is not valid.";const o=u(t.colorScales.field,e);if(!o)return"The main field has not been selected or is invalid.";const a=Object.keys(t.colorScales.scalesByLevel).filter((e=>t.colorScales.advanced?e!=r.UA:e==r.UA));for(const s of a){const a=t.colorScales.scalesByLevel[s],l=["min","max"];a.center.color&&l.push("center");for(let t=0;t<l.length;t++){const s=a[l[t]];if(!s)return"Some conditions are invalid.";if(s.mode==r.LF.FieldValue||s.mode==r.LF.Calc){if(!(0,i.cKq)(s,"fieldValue"))return n;const t=u(s.fieldValue,e);if(!t)return n;if(t.queryName==o.queryName)return n}}if(!t.colorScales.advanced)break}return!0}function l(t,e){const n="Not all comparison fields have been selected or are valid.",o="Not all comparison values have been set.";if(!t.conditions||!t.conditions.conditions)return"Some conditions are invalid.";for(const a of Object.keys(t.conditions.conditions)){const s=t.conditions.conditions[a],l=u(s.field,e);if(!l)return"The main field has not been selected or is invalid.";if(s.comparison==r.Uf.Between){if(!(0,i.cKq)(s,"value")||null===s.value||isNaN(s.value)||!(0,i.cKq)(s,"value2")||null===s.value2||isNaN(s.value2))return o}else if(s.comparison==r.Uf.Blank||s.comparison==r.Uf.NotBlank);else{if(!(s.mode!=r.LF.Value&&s.mode!=r.LF.Calc||(0,i.cKq)(s,"value")&&null!==s.value))return o;if(s.mode==r.LF.FieldValue||s.mode==r.LF.Calc){if(!(0,i.cKq)(s,"fieldValue"))return n;const t=u(s.fieldValue,e);if(!t)return n;if(t.queryName==l.queryName)return n}}}return!0}function c(t,e){let n=t.displayName;if(n.indexOf("{field}")>=0){let i="missing field";if("colorScale"==t.mode){const n=u(t.colorScales.field,e);n&&(i=n.displayName)}n=n.replace("{field}",i)}return(0,i.TF7)(n)}function u(t,e){if(t){const n=t.roleIndex?t.roleIndex:0;if((0,i.cKq)(e,t.role)&&(0,i.cKq)(e[t.role],n))return e[t.role][n]}return null}function h(t,e,n,i,r,a,s,l){const c=[];c.push(e),s&&c.push(a),c.push(i);const u=[];u.push(n),s&&u.push(s),u.push(r);const h=l?o.ZEH():o.m4Y();l&&h.base(Math.E),h.domain(c),h.range(u).clamp(!0);const d=h(t);return d?{solid:{color:d.toString()}}:null}function d(t,e){let n=e[t]?e[t].color:null;const r="min"==t||"max"==t?e["min"==t?"max":"min"].color:null;return!n&&r&&(n=(0,i.dyA)("min"==t?.9:-.9,r)),n||""}function p(t,e,n){const i=t.colorScales.scalesByLevel[e],o=(0,r.RU)(n);i?["max","min","center"].forEach((t=>{i[t]&&!i[t].color&&(i[t].color=o[t].color)})):t.colorScales.scalesByLevel[e]=o}function f(t,e,n,i,o){const a={min:n.min,max:n.max,center:(n.min+n.max)/2};for(const s of Object.keys(a)){const l=t[s];let c=null;if(l.mode==r.LF.FieldValue||l.mode==r.LF.Calc){const t=u(l.fieldValue,o);if(t){for(const n of Object.keys(i))if(n==t.queryName){const t=y(i[n],e);"min"==s?c=t.min:"max"==s?c=t.max:"center"==s&&(c=(t.max+t.min)/2);break}l.mode==r.LF.Calc&&(l.calc==r.m.Minus?c-=l.value:l.calc==r.m.Divide?c/=l.value:l.calc==r.m.Times?c*=l.value:c+=l.value)}}else c=l.value;null==c||isNaN(c)||(l.mode==r.LF.Percentage&&(c=v(l.value,n.min,n.max,"abs",e.colorScales.type==r.Qo.Logarithmic)),a[s]=c)}return a}function g(t,e,n){let o="linear-gradient(to right, ";if(o+=d("min",t)+" 0%, ",t.center.color){let a=50;if(void 0!==e&&void 0!==n&&(0,i.cKq)(t.center,"value")&&null!==t.center.value&&!isNaN(t.center.value)){let o=e;(0,i.cKq)(t.min,"value")&&null!==t.min.value&&!isNaN(t.min.value)&&(t.min.mode==r.LF.Value?o=t.min.value:t.min.mode==r.LF.Percentage&&(o=v(t.min.value,e,n,"abs")));let s=n;(0,i.cKq)(t.max,"value")&&null!==t.max.value&&!isNaN(t.max.value)&&(t.max.mode==r.LF.Value?s=t.max.value:t.max.mode==r.LF.Percentage&&(s=v(t.max.value,e,n,"abs")));let l=(n-e)/2+e;t.center.mode==r.LF.Value?l=t.center.value:t.center.mode==r.LF.Percentage&&(l=v(t.center.value,e,n,"abs")),a=v(l,o,s,"perc")}o+=t.center.color+" "+a+"%, "}return o+=d("max",t)+" 100%",o+=")",o}function m(t,e,n){if(t.mode==r.LF.FieldValue)return u(t.fieldValue,n).displayName;if(null!=t.value){const o=t.mode==r.LF.Calc||r.LF.Value?i.ZA6.instance.create({format:e,formatSingleValues:!1,value:t.value,precision:0,displayUnitSystemType:0,allowFormatBeautification:!0}):null;if(t.mode==r.LF.Value)return o.format(t.value);if(t.mode==r.LF.Percentage)return`${t.value}%`;if(t.mode==r.LF.Calc){const e=u(t.fieldValue,n),i=["+","-","÷","×"][t.calc||0];return`${e.displayName} ${i} ${o.format(t.value)}`}}return""}function v(t,e,n,i,r=!1,o=!0){if(null===t)return null;if(null===e&&(e=0),e==n)return null;let a=0;return"perc"==i?(a=r?(Math.max(0,Math.log(t))-Math.max(0,Math.log(e)))/(Math.max(0,Math.log(n))-Math.max(0,Math.log(e)))*100:(t-e)/(n-e)*100,a=Math.max(0,a)):"abs"==i&&(0==t?(a=e,o=!1):100==t?(a=n,o=!1):a=r?Math.exp(t*(Math.max(0,Math.log(n))-Math.max(0,Math.log(e)))/100+Math.max(0,Math.log(e))):t*(n-e)/100+e),o?Math.round(a):a}function y(t,e,n=!1){return"colorScale"!=e.mode||e.colorScales.relative&&!n?t:(0,i.t7l)(t)}function b(t){const e=t.map((t=>t.id));return t.filter(((t,n)=>!e.includes(t.id,n+1)))}},23515:(t,e,n)=>{"use strict";n.d(e,{Gy:()=>o,LF:()=>a,P0:()=>d,Qo:()=>u,RU:()=>f,UA:()=>r,Uf:()=>l,XP:()=>c,a3:()=>p,e2:()=>h,m:()=>s});var i=n(81807);const r="default",o="#3CB44A";var a,s,l,c,u;function h(t,e,n,o){const a={};for(const t of Object.keys(n))a[t]=f(o);return{id:(0,i.uRe)(),displayName:`Rule ${t+1}`,automatic:!1,locked:null,enabled:!0,stop:!1,legend:!0,property:e,mode:"colorScale",conditions:{color:o,operator:c.And,conditions:{0:d()},level:r},colorScales:{field:{role:""},blank:"ignore",blankColor:"#e6e6e6",type:u.Linear,relative:!1,scalesByLevel:a}}}function d(t){let e=0;if(t){const n=Object.keys(t.conditions.conditions);e=parseInt(n[n.length-1])+1}return{id:e,field:{role:""},comparison:l.EqualTo,mode:a.Value,value:null}}function p(t){return{mode:a.Percentage,value:null,color:t}}function f(t){return{min:p((0,i.dyA)(.8,t)),max:p(t),center:p(null),topColor:null,bottomColor:null}}!function(t){t[t.Percentage=0]="Percentage",t[t.Value=1]="Value",t[t.FieldValue=2]="FieldValue",t[t.Calc=3]="Calc"}(a||(a={})),function(t){t[t.Plus=0]="Plus",t[t.Minus=1]="Minus",t[t.Divide=2]="Divide",t[t.Times=3]="Times"}(s||(s={})),function(t){t[t.LessThan=0]="LessThan",t[t.LessThanOrEqualTo=1]="LessThanOrEqualTo",t[t.EqualTo=2]="EqualTo",t[t.GreaterThan=3]="GreaterThan",t[t.GreaterThanOrEqualTo=4]="GreaterThanOrEqualTo",t[t.DifferentFrom=5]="DifferentFrom",t[t.Between=6]="Between",t[t.Blank=7]="Blank",t[t.NotBlank=8]="NotBlank"}(l||(l={})),function(t){t[t.And=0]="And",t[t.Or=1]="Or"}(c||(c={})),function(t){t[t.Linear=0]="Linear",t[t.Logarithmic=1]="Logarithmic"}(u||(u={}))},12175:(t,e,n)=>{"use strict";n.d(e,{AA:()=>a.AA,Yx:()=>a.Yx,Z3:()=>a.Z3,di:()=>a.di,e$:()=>s,nY:()=>a.nY,ss:()=>a.ss});var i=n(93622),r=n(81807),o=n(79021),a=n(7753);class s extends i.Z{options;updateOptions;templates;internalSettings;settings;container;toolbar;gallery;get displayName(){return"Templates"}constructor(t,e){super(t,e),this.options=t,this.updateOptions=e,this.settings=e.settings,this.loadInternalSettings(),this.options.protectedProperties||(this.options.protectedProperties=[]),this.options.itemsPerRow||(this.options.itemsPerRow=3),this.templates=[...this.options.showCurrent?[(0,a.Yx)(this.settings,this.options.protectedProperties,!0,a.nY.Current,this.options.currentName||"Current")]:[],...this.options.templates,...this.internalSettings.userTemplates]}loadInternalSettings(){let t={userTemplates:[],useDummyData:!0,category:""};const e=this.updateOptions.visualUpdateOptions&&this.updateOptions.visualUpdateOptions.dataViews&&this.updateOptions.visualUpdateOptions.dataViews[0];e&&e.metadata.objects&&(t=(0,r.PLM)(e.metadata.objects,"internal","templates",t)),this.internalSettings=t}saveInternalSettings(){this.pending.internal=[{objectName:"internal",properties:{templates:this.internalSettings},selector:null}],this.save()}loadUserTemplate(t){const e=this.validateTemplate(t);if(!0===e){const e=(0,a.di)(t,this.settings,this.options.protectedProperties);return this.templates.push(e),this.internalSettings.userTemplates.push(e),this.saveInternalSettings(),e}return this.showError(e.toString()),null}unloadUserTemplate(t){const e=this.templates.findIndex((e=>e.id==t));if(e>=0){const t=this.templates[e];if(t&&t.type==a.nY.User){const n=this.internalSettings.userTemplates.findIndex((e=>e.id==t.id));n>=0&&(this.internalSettings.userTemplates.splice(n,1),this.saveInternalSettings()),this.templates.splice(e,1)}}}applyTemplate(t){this.pending.template=[];const e=null!==t&&this.templates.find((e=>e.id==t));e&&e.type!=a.nY.Current&&(this.pending.template=(0,a.AA)((0,a.Z3)(e,this.settings),this.updateOptions.visualUpdateOptions)),this.save()}select(t){(0,r.kOW)(".template",this.gallery).forEach((e=>{e.dataset.template==t?e.classList.add("active"):e.classList.remove("active")})),this.applyTemplate(t)}deselect(){(0,r.kOW)(".template.active",this.gallery).forEach((t=>t.classList.remove("active"))),this.applyTemplate(null)}draw(t){super.draw(t);const e=(0,r.tTh)(".dialog-flex.template-manager",t);this.container=(0,r.tTh)(".dialog-col.templates",e),this.drawToolbar();const n=(0,r.tTh)(".templates-content",this.container);this.gallery=(0,r.tTh)(".gallery.dialog-flex",n),this.drawTemplates(),this.gallery.addEventListener("click",(t=>{const e=t.target,n=e.closest(".template");if(n){t.preventDefault(),t.stopPropagation();const i=n.dataset.template;e.classList.contains("content")?n.classList.contains("disabled")||this.select(i):e.classList.contains("actions-menu")&&r.tzH.Init("template-actions",{width:150,items:[{label:"Remove",enabled:!0,onClick:()=>{const t=n.classList.contains("active");n.remove(),this.unloadUserTemplate(i),this.drawCategories(),t&&this.templates.length&&this.select(this.templates[this.templates.length-1].id)}}]},t)}else r.tzH.Close()}))}drawToolbar(){(this.options.showCategories||this.options.canImport||this.options.canExport&&1!=this.options.canExport&&2!=this.options.canExport)&&(this.toolbar||(this.toolbar=(0,r.tTh)(".templates-toolbar",this.container)),this.drawCategories(),this.drawPreviewYourData(),(0,r.tTh)(".spacer",this.toolbar),this.drawExportButton(),this.drawImportButton())}drawCategories(){if(!this.toolbar||!this.options.showCategories)return;(0,r.VR4)(".categories",this.toolbar).remove();const t=[{value:"",text:"All Categories"}];if(this.templates.forEach((e=>{if(e.category){const n=t.find((t=>t.value==e.category));n?n.data++:t.push({value:e.category,text:e.category,selected:this.internalSettings.category==e.category,data:1})}})),t.length>1){const e=(0,r.tTh)("select.categories",{list:t.map((t=>(t.data&&(t.text=`${t.text} (${t.data})`),t))),events:{change:t=>{this.internalSettings.category=t.currentTarget.value,this.saveInternalSettings(),this.drawTemplates()}}});this.toolbar.prepend(e)}}drawPreviewYourData(){this.toolbar&&this.options.allowDummyData&&(0,r.HGh)(".template-data-switch.small",this.toolbar,{checked:!this.internalSettings.useDummyData,change:(t,e)=>{this.internalSettings.useDummyData=!e,this.saveInternalSettings(),this.drawTemplates()}},"Preview Your Data")}drawImportButton(){if(!this.toolbar||!this.options.canImport)return;const t=(0,r.tTh)("input#load-template-file.file-hidden",this.toolbar,{attr:{multiple:!0,type:"file",accept:".json"},events:{click:t=>{t.currentTarget.value=null},change:t=>{const e=t.currentTarget.files;if(e&&e.length)for(let t=0;t<e.length;t++){const n=e[t];if(n.type.indexOf("json")>=0){const t=new FileReader;t.readAsText(n),t.onload=()=>{try{const e=JSON.parse(t.result);e.description||(e.description=n.name);const i=this.loadUserTemplate(e);i&&(this.drawCategories(),this.drawTemplate(i)&&this.select(i.id))}catch(t){this.showError("Unable to import the template file.",t)}}}else this.showError("Only JSON template files are allowed.")}}}});(0,r.tTh)("button.load-template.btn",this.toolbar,{events:{click:e=>{e.preventDefault(),t.dispatchEvent(new MouseEvent("click"))}}},"Load Template")}drawExportButton(){if(!this.toolbar||1==this.options.canExport||2==this.options.canExport)return;const t=3==this.options.canExport;(0,r.tTh)("a.save-template.control.icon-save",this.toolbar,{attr:{disabled:t,title:t?"Export has been disabled by your administrator.":""},events:{click:(t,e)=>{t.preventDefault(),e.getAttribute("disabled")||this.askForTemplateOptions()}}},"Save Current as Template")}askForTemplateOptions(){new r.Ku8({title:"Save as Template",buttons:[{name:"OK",action:"ok",disabled:!0,key:"Enter"},{name:"Cancel",action:"cancel",className:"alt2"}],size:{width:350,height:0},middleware:(t,e)=>{const n=()=>{const n=(0,r.VR4)("input#name",t),i=n.isNull?"Template":n.value,o=(0,r.VR4)(".data-bound-switch .switch-input",t),a=!!o.isNull||o.checked;e.data={name:i,dataBound:a,dataView:!1,palette:!1}};(0,r.tTh)(".dialog-field",t,[(0,r.tTh)("label","Template name"),(0,r.tTh)("input#name",{attr:{type:"text",value:"",required:!0,placeholder:"Insert a value"},events:{keyup:t=>{const n=t.target.value;e.enableButton("OK",""!=n)},change:()=>{n()}}})]),(0,r.HGh)(".data-bound-switch.small",t,{checked:!0,title:"If enabled, specific data points settings will be included in the template. E.g.: the color assigned to each category of the current dataview.",change:()=>n()},"Include data bound properties"),n(),window.setTimeout((()=>{(0,r.VR4)("input#name",t).focus()}),300)}}).show().then((t=>{if("ok"==t.action){const e=(0,a.Yx)(this.settings,this.options.protectedProperties,t.data.dataBound,a.nY.User,t.data.name);delete e.type,delete e.dataIndex,this.download({content:JSON.stringify(e),fileName:`${(0,r.aHV)(t.data.name)}.json`,fileType:".json",fileDescription:"Template JSON file"})}}))}validateTemplate(t){return(0,r.cKq)(t,"id")&&(0,r.cKq)(t,"settings")?!this.templates.find((e=>e.id==t.id))||(this.select(t.id),`Another template with the same id (${t.id}) already exists in the gallery.`):"You provided an invalid template."}checkTemplateRequirements(t,e){let n=!0;const i=this.updateOptions.visualUpdateOptions&&this.updateOptions.visualUpdateOptions.dataViews&&this.updateOptions.visualUpdateOptions.dataViews[0];if(i){const o=(0,r.JYz)(i.metadata.columns);t.required.forEach((t=>{let i="";(0,r.cKq)(o,t.role)?t.multiple?o[t.role].length<2&&(i=`two or more columns are in "${t.displayName}"`):0==o[t.role].length&&(i=`at least one column is in "${t.displayName}"`):i=`"${t.displayName}" is not empty`,i&&((0,r.tTh)(".warning.icon-"+(t.strict?"error":"alert"),e,{attr:{title:`The template ${t.strict?"can be applied only if":"works better when"} ${i}.`}},t.displayName),t.strict&&e.closest(".template").classList.add("disabled"),n=!1)}))}return n}drawTemplates(){this.gallery.textContent="",this.templates.forEach(((t,e)=>this.drawTemplate(t,this.options.showCurrent&&0==e)))}drawTemplate(t,e=!1){if((t.type==a.nY.Builtin||t.type==a.nY.User)&&this.options.showCategories&&this.internalSettings.category&&t.category!=this.internalSettings.category)return!1;const n=this.options.templateSize?this.options.templateSize:{width:1==this.options.itemsPerRow?o.q.size.width:o.q.size.width/this.options.itemsPerRow-10*this.options.itemsPerRow,height:120},i=(0,r.tTh)(".template"+(e?".active":""),this.gallery,{attr:{title:t.description?t.description:null},style:{width:`${n.width}px`},data:{template:t.id}});t.type==a.nY.User&&(0,r.tTh)("a.actions-menu.control.solo.icon-ellipsis",i,{attr:{href:"#",title:"Actions"}}),(0,r.tTh)(".title",i,{attr:{title:t.name}},t.name);const s=(0,r.tTh)(".content",i);let l=!0;const c=this.internalSettings.useDummyData&&this.options.allowDummyData&&(t.type==a.nY.Builtin||t.type==a.nY.User),u={width:3*(n.width-12),height:3*(n.height-12)},h=(0,r.tTh)(".wrapper",s,{style:{transform:"scale(0.33, 0.33)",marginTop:2,marginLeft:2,width:u.width,height:u.height}}),d=this.preview(h,u,(0,a.di)(t,this.settings,this.options.protectedProperties),c?null:this.updateOptions.visualUpdateOptions),p=(0,r.tTh)(".warning-container",s);return d?t.required.length&&!c&&(l=this.checkTemplateRequirements(t,p)):(0,r.tTh)(".warning.icon-error",p,"Preview not available"),l}preview(t,e,n,i){return!1}}},7753:(t,e,n)=>{"use strict";n.d(e,{AA:()=>l,Yx:()=>c,Z3:()=>s,di:()=>a,nY:()=>o,ss:()=>u});var i=n(81807);const r=["about"];var o;function a(t,e,n=[],a=!0){const s={id:t.id||(0,i.uRe)(),type:o.User,name:t.name?t.name.substring(0,80):"Untitled",description:t.description?t.description.substring(0,500):"",required:Array.isArray(t.required)?t.required:[],premium:!!t.premium,category:t.category||"",dataIndex:t.dataIndex||0,settings:u(e,t.settings),dataSettings:t.dataSettings||{}},l=[...r,...n];for(const t of Object.keys(s.settings))if(l.find((e=>e==t)))delete s.settings[t];else for(const e of Object.keys(s.settings[t]))l.find((n=>n==`${t}.${e}`))&&delete s.settings[t][e];for(const t of Object.keys(s.settings))for(const e of Object.keys(s.settings[t])){const n=(0,i.rJE)(s.settings[t][e]);if(n){if(a&&(!(0,i.cKq)(s.dataSettings,t)||!(0,i.cKq)(s.dataSettings[t],e))){const r=(0,i.o8B)(s.settings[t][e]);for(let t=0;t<r.values.length;t++)delete r.values[t].displayName,n==i.tj4.Measure&&delete r.values[t].selector;(0,i.cKq)(s.dataSettings,t)||(s.dataSettings[t]={}),s.dataSettings[t][e]=r}delete s.settings[t][e]}}return s}function s(t,e){const n=(0,i.o8B)(t);if(n.settings=u(e,n.settings),n.dataSettings){for(const t of Object.keys(n.dataSettings))for(const e of Object.keys(n.dataSettings[t]))if((0,i.cKq)(n.settings,t)&&(0,i.cKq)(n.settings[t],e)&&(0,i.rJE)(n.settings[t][e]))for(let r=0;r<n.settings[t][e].values.length;r++)(0,i.cKq)(n.dataSettings[t][e],"values")&&n.dataSettings[t][e].values[r]&&(n.settings[t][e].values[r].value=n.dataSettings[t][e].values[r].value);delete n.dataSettings}return n}function l(t,e){const n=e&&e.dataViews&&e.dataViews[0],r=[];for(const e of Object.keys(t.settings)){const o={objectName:e,properties:{},selector:null};for(const a of Object.keys(t.settings[e])){const s=(0,i.rJE)(t.settings[e][a]);if(s){if(n&&n.categorical){const o=t.settings[e][a];s==i.tj4.Measure?n.categorical.values&&(0,i.pHJ)(n.categorical.values,o.columnRole).forEach(((t,n)=>{r.push({objectName:e,properties:{[a]:o.values[n].value},selector:{metadata:t.source.queryName}})})):s==i.tj4.Category&&n.categorical.categories&&o.values.forEach((t=>{r.push({objectName:e,properties:{[a]:t.value},selector:t.selector})}))}}else o.properties[a]=t.settings[e][a]}(0,i.Ime)(o.properties)||r.push(o)}return r}function c(t,e=[],n=!0,r=o.User,s){const l=a({id:(0,i.uRe)(!1),name:s?s.substring(0,80):"Untitled",settings:t},t,e,n);return l.type=r,l}function u(t,e){const n=(0,i.o8B)(t),r=(0,i.o8B)(e);for(const t of Object.keys(n))if((0,i.cKq)(r,t))for(const e of Object.keys(n[t]))(0,i.cKq)(r[t],e)||(r[t][e]=n[t][e]);else r[t]=n[t];return r}!function(t){t[t.Builtin=0]="Builtin",t[t.User=1]="User",t[t.Current=2]="Current"}(o||(o={}))},92459:(t,e,n)=>{"use strict";n.d(e,{G:()=>a});var i=n(81807),r=n(58689),o=n(31171);class a{options;static ID="licman";result={};dialogHost;element;form;formFeedback;activationKey;constructor(t,e){this.options=e,this.dialogHost=t.host,this.element=t.element,this.element.classList.add("licman-dialog"),this.draw()}aDom(t,e,n=!1){return(0,i.tTh)("a"+(n?".btn":""),{attr:{href:e},events:{click:t=>{t.preventDefault(),this.result.targetUrl=e,this.setResult(),this.close()}}},t)}draw(){const t=(0,i.tTh)(".sections"+(this.options.showAppSource&&this.options.showOkviz?".dual":""),this.element);this.options.showOkviz&&(0,i.tTh)(".section.section-okviz",t,this.getOKVIZSection()),this.options.showAppSource&&(0,i.tTh)(".section.section-appsource",t,this.getAppSourceSection()),this.options.showOkviz&&this.options.showAppSource&&(0,i.tTh)(".help-section",this.element,[this.aDom("What's the difference?",o.lW)])}getAppSourceSection(){return[(0,i.tTh)(".title",[(0,i.tTh)("h3","Microsoft AppSource"),(0,i.tTh)(".appsource-badge",{attr:{title:"Get it from Microsoft AppSource"}})]),(0,i.tTh)(".content",[(0,i.tTh)("p","Get a license from AppSource"),(0,i.tTh)(".top-link",[this.aDom("appsource.microsoft.com",this.options.pbiviz.visual.appSourcePurchaseUrl)]),(0,i.tTh)("p.tips",[(0,i.tTh)("span","If you have already purchased a license but it does not work, please visit our "),this.aDom("documentation page.",o.tw)])])]}getOKVIZSection(){return[(0,i.tTh)(".title",[(0,i.tTh)(".okviz-logo.icon.icon-okviz-h",{attr:{title:"OKVIZ"}})]),(0,i.tTh)(".content",[(0,i.tTh)("p","Get a new license from OKVIZ"),(0,i.tTh)(".top-link",[this.aDom("Get License Now",this.options.pbiviz.visual.okvizPurchaseUrl,!0)]),...this.options.showOkvizActivation?[(0,i.tTh)("p","or Activate an existing license:"),...this.options.entraToken?[(0,i.tTh)("form",{middleware:t=>this.form=t},[(0,i.tTh)("textarea",{attr:{placeholder:"License Activation Key",rows:5,cols:40},events:{input:()=>this.validateForm()}}),(0,i.tTh)(".activate.btn.disabled",{events:{click:(t,e)=>{e.classList.contains("disabled")||this.activateOKVIZLicense()}}},"Activate")]),(0,i.tTh)(".form-feedback",{middleware:t=>this.formFeedback=t,style:{display:"none"}})]:[(0,i.tTh)("p.error-token",[(0,i.tTh)("span","You need to allow this visual to obtain your Microsoft Entra Id to check and activate a license. "),this.aDom("Learn more",`${o.J2}#enable-entra-token`)])]]:[(0,i.tTh)("p.tips",[(0,i.tTh)("span","If you have already purchased a license but it does not work, please "),this.aDom("contact us.",this.options.pbiviz.visual.contactUrl)])]])]}validateForm(){this.activationKey=this.form.querySelector("textarea").value,this.form.querySelector(".btn.activate").classList.toggle("disabled",!this.activationKey)}resetForm(){this.result={},this.formFeedback.style.display="none",this.formFeedback.classList.remove("success","fail"),this.form.reset(),this.form.style.display="block",this.form.querySelector("textarea").focus()}async activateOKVIZLicense(){let t;this.form.style.display="none",this.formFeedback.style.display="block",this.formFeedback.innerText="Activating...";try{t=await r.U.ApiActivateLicense(this.options.pbiviz.visual.name,this.options.entraToken,this.activationKey)}catch(t){}t?(this.result={okviz:{license:t}},this.setResult(),this.formFeedback.classList.add("success"),this.formFeedback.innerText="License activated on this tenant!",window.setTimeout((()=>this.close()),3e3)):(this.formFeedback.classList.add("fail"),this.formFeedback.innerText="License already activated or invalid key.",window.setTimeout((()=>this.resetForm()),3e3))}setResult(){this.dialogHost.setResult(this.result)}close(){this.dialogHost.close(0)}}globalThis.dialogRegistry=globalThis.dialogRegistry||{},globalThis.dialogRegistry[a.ID]=a},78985:(t,e,n)=>{"use strict";n.d(e,{R:()=>i});class i{static _instance;static get instance(){return i._instance||(i._instance=new this),i._instance}constructor(){if(i._instance)return i._instance;i._instance=this}token;async isAvailable(){return 0===await thisVisual.host.acquireAADTokenService.acquireAADTokenstatus()}async getToken(){if(this.token?.expiresOn<(new Date).getTime()&&(this.token=null),!this.token)try{const t=thisVisual.host.acquireAADTokenService,e=await t.acquireAADToken();this.token=e}catch(t){}return this.token?.accessToken}}},31171:(t,e,n)=>{"use strict";n.d(e,{J2:()=>s,hF:()=>r.h,lW:()=>a,th:()=>o.t,tw:()=>l,uW:()=>i.uW});var i=n(50631),r=n(67530),o=n(60457);const a="https://docs.okviz.com/visuals/licensing",s="https://docs.okviz.com/visuals/licensing/okviz",l="https://docs.okviz.com/visuals/licensing/appsource"},50631:(t,e,n)=>{"use strict";var i,r,o;n.d(e,{e2:()=>r,uW:()=>o,xJ:()=>i}),function(t){t[t.Unknown=0]="Unknown",t[t.Active=1]="Active",t[t.Expired=2]="Expired",t[t.GracePeriod=3]="GracePeriod",t[t.Suspended=4]="Suspended",t[t.Trial=5]="Trial"}(i||(i={})),function(t){t[t.Unsupported=-1]="Unsupported",t[t.NotFound=0]="NotFound",t[t.Found=1]="Found",t[t.Pending=99]="Pending"}(r||(r={})),function(t){t[t.None=0]="None",t[t.Icon=1]="Icon",t[t.Banner=2]="Banner",t[t.Block=3]="Block",t[t.NoneOrIcon=4]="NoneOrIcon",t[t.NoneOrBanner=5]="NoneOrBanner",t[t.BannerOrIcon=6]="BannerOrIcon",t[t.BlockOrIcon=7]="BlockOrIcon",t[t.BlockOrBanner=8]="BlockOrBanner"}(o||(o={}))},67530:(t,e,n)=>{"use strict";n.d(e,{h:()=>h});var i=n(32017),r=n(81807),o=n(50631),a=n(58689),s=n(66667),l=n(60457),c=n(92459);const u="licman";class h extends r.T0G{meta;options;featurePropsResetSeconds=60;resetFeaturePropsTimeout;watermarkTimeout;watermarkAppearAfterSeconds=30;currentNotificationProps;visualUpdate;iconElement;watermarkElement;services=[];get service(){return this.services.length?this.services.find((t=>t.isActive))||this.services[0]:null}get okvizService(){return this.services.find((t=>"okviz"==t.type))}get appSourceService(){return this.services.find((t=>"appSource"==t.type))}get isReadingView(){return 0==this.visualUpdate?.viewMode}get status(){return this.service?.status}get type(){return this.service?.type??"notSet"}get isValid(){return!!this.service&&(this.service.isActive||this.service.isTrial||this.service.isGracePeriod)}get isActive(){return this.service?.isActive||!1}get isInactive(){return this.service?.isInactive||!1}get isGracePeriod(){return this.service?.isGracePeriod||!1}get isSuspended(){return this.service?.isSuspended||!1}get isTrial(){return this.service?.isTrial||!1}get isSupported(){return this.service?.isSupported??!0}get isEmbedded(){return this._isEmbedded}_isEmbedded=!1;constructor(t,e={}){super(),this.meta=t,this.options=e;let n=this.meta.config.visual.ls;if(this.meta.isDev&&!n){const t=this.meta.config.editions?.find((t=>t.type==this.meta.config.visual.edition));t?.licensing&&(n={p:t.licensing.platforms.map((t=>"appSource"==t?r.Exh.AppSource:r.Exh.OKVIZ)),ap:t.licensing.appSourcePlans})}(n?.p??[]).forEach((i=>{i==r.Exh.AppSource?this.services.push(new s.f(n,t,this.meta.isDev?e.dev?.appSource:null)):i==r.Exh.OKVIZ&&this.services.push(new a.U(n,t,this.meta.isDev?e.dev?.okviz:null,e.fetchingOptions))}));try{thisVisual.host.licenseManager.getAvailableServicePlans().then((t=>{this._isEmbedded=t.isLicenseUnsupportedEnv}))}catch{}this.services.forEach((t=>t.on("fetched",(()=>{this.check(),this.trigger("fetched",{service:t.type})}))))}async update(t){if(this.services.length&&!thisVisual.internalUpdate&&!(0,r.p_R)(t.dataViews)&&(this.visualUpdate=t,r.s54.UPDATE(t),this.updateIcon(),2&t.type&&(0,r.PLM)(t.dataViews[0].metadata.objects,l.c,"dialog",!1)&&this.openDialog(),this.options.required)){for(let e=0;e<this.services.length;e++)await this.services[e].update(t);this.check()}}check(){if(this.isActive||this.isTrial)return void this.clearNotifications();const t=this.getRequiredNotification();if(t)if(this.isSupported)if(this.isSuspended)this.showNotification({type:o.uW.BlockOrBanner,icon:"alert",iconColor:"#ff0000",label:"Suspended",title:"Suspended License",text:"The license was cancelled or suspended due to a payment problem or policy violation.",callToAction:!1});else if(this.isGracePeriod)this.showNotification({type:o.uW.NoneOrBanner,icon:"alert",iconColor:"#ff0000",label:"Grace Period",title:"Expired License (Grace Period)",text:"The license is expired, but the visual is still working for a limited time. Please renew the license as soon as possible.",callToAction:!1,dismissible:!0});else{this.showNotification(t);const e=t.type==o.uW.Block||this.isReadingView&&(t.type==o.uW.BlockOrBanner||t.type==o.uW.BlockOrIcon);this.options.showWatermark&&!e&&(this.watermarkTimeout||(this.watermarkTimeout=window.setTimeout((()=>{this.showWatermark(),this.watermarkTimeout=null}),1e3*this.watermarkAppearAfterSeconds)))}else this.showNotification({type:o.uW.Block,icon:"error",iconColor:"#ff0000",label:"Unsupported",title:"Unsupported Environment",text:this.service?.unsupportedMessage||"This visual is not supported in the current environment.",callToAction:!1});else this.clearNotifications()}getRequiredNotification(){let t;if(!this.meta.isDemo){if(this.options.required){if(this.options.required.if){const e=this.options.required.if();"boolean"==typeof e?!0===e&&(t={type:o.uW.BlockOrIcon,label:"Activate",title:"Invalid or Expired License",text:"This visual requires a valid license to be used."}):t=e}if(this.options.required.ifRoles?.length&&this.visualUpdate?.dataViews?.[0]&&this.hasChangedFeatureRoles(this.visualUpdate.dataViews[0])&&(t={type:o.uW.BlockOrIcon,label:"Activate",title:"Invalid or Expired License",text:"This visual uses some fields that are not available with free license. Clear them or activate a license to continue."}),this.options.required.ifProperties?.length&&this.visualUpdate?.dataViews?.[0]){const e=this.getChangedFeatureProps(this.visualUpdate.dataViews[0]);e.length&&(this.options.required.autoResetProperties?this.resetFeatures(e):t={type:o.uW.BlockOrIcon,title:"Unlicensed Features",text:"This visual uses some premium features. Disable them or activate a license to continue."})}this.options.required.ifEmbedded&&this.isEmbedded&&(t={type:o.uW.BlockOrIcon,label:"Activate",title:"Unlicensed Environment",text:"This visual requires a valid license to be used in embedded or special environments such as Power BI Report Server, Power BI Embedded (Publish to Web, PaaS embed), and National Clouds."})}return t}}getChangedFeatureProps(t){if(!t.metadata.objects)return[];if(!this.options.required?.ifProperties)return[];const e=[],n=t=>{e.push({propertyPath:t.propertyPath,defaultValue:t.defaultValue})};return this.options.required.ifProperties.forEach((e=>{const[o,a]=e.propertyPath.split("."),s=(0,r.PLM)(t.metadata.objects,o,a,e.defaultValue);e.equalTo?i(s,e.equalTo)&&n(e):e.differentFrom?i(s,e.differentFrom)||n(e):e.in?e.in.includes(s)&&n(e):e.notIn?e.notIn.includes(s)||n(e):e.greaterThan?s>e.greaterThan&&n(e):e.greaterOrEqualThan?s>=e.greaterOrEqualThan&&n(e):e.lessThan?s<e.lessThan&&n(e):e.lessOrEqualThan?s<=e.lessOrEqualThan&&n(e):null!=e.defaultValue?i(s,e.defaultValue)||n(e):null!=s&&n(e)})),e}hasChangedFeatureRoles(t){if(this.options.required?.ifRoles)for(let e=0;e<this.options.required.ifRoles.length;e++)if(t.metadata.columns.find((t=>t.roles[this.options.required.ifRoles[e]])))return!0;return!1}resetFeatures(t){t.length&&this.options.required?.autoResetProperties&&(window.clearTimeout(this.resetFeaturePropsTimeout),this.resetFeaturePropsTimeout=window.setTimeout((()=>{t.forEach((t=>{const[e,n]=t.propertyPath.split(".");r.XI0.BATCH({objectName:e,properties:{[n]:t.defaultValue},selector:null})})),r.XI0.BATCH_SAVE(!1),r.s54.SHOW({icon:"certificate",iconAlign:"top",title:"Features Reset",text:"Some features have been reset to their default values since require a premium license to be used."})}),1e3*this.featurePropsResetSeconds))}adjustNotification(t){const e=o.uW[t.type];if(e){const[n,i]=e.split("Or");!this.isReadingView&&i?t.type=o.uW[i]:t.type=o.uW[n]}return t.icon||(t.icon="certificate"),t.iconColor||(t.iconColor="#117865"),null==t.callToAction&&(t.callToAction=!0),t}showNotification(t){t=this.adjustNotification(t);const e=JSON.stringify(t);if(this.currentNotificationProps!=e)if(this.clearNotifications(),this.currentNotificationProps=e,t.type==o.uW.Icon)this.iconElement=(0,r.tTh)(".licman-icon",document.body,{events:{click:()=>this.openDialog()},attr:{title:t.text||t.title}},[(0,r.tTh)(`.icon.icon-${t.icon}`),(0,r.tTh)(".label",t.label||"Activate")]),this.updateIcon();else if(t.type==o.uW.Banner||t.type==o.uW.Block){const e=t.type==o.uW.Banner;r.s54.SHOW({id:u,icon:t.icon,iconColor:t.iconColor,uncloseable:!t.dismissible,force:!0,important:!0,...e?{iconAlign:"top",position:"bottom"}:{iconAlign:"middle",fullSize:!0},title:t.title,text:t.text,callToAction:t.callToAction?{...this.isReadingView?{text:"Get a License",url:this.service?.purchaseUrl}:{text:"Activate"+(e?"":" License"),button:!0,onClick:()=>this.openDialog()}}:null})}}showWatermark(){this.watermarkElement||(this.watermarkElement=(0,r.tTh)(".licman-watermark",document.body,"Unlicensed"))}updateIcon(){if(!this.iconElement||!this.visualUpdate)return;const t=this.visualUpdate.viewport.scale;this.iconElement.style.transform=`scale(${1/t})`}async openDialog(){const t={showAppSource:this.meta.isDev||!!this.meta.config.visual.appSourcePurchaseUrl,showOkviz:this.meta.isDev||!!this.meta.config.visual.okvizPurchaseUrl,showOkvizActivation:this.services.length>1,pbiviz:this.meta.config},e={width:t.showOkviz&&t.showAppSource?800:375,height:(t.showAppSource?400:320)+(t.showOkvizActivation?100:0)},n=await(this.okvizService?.getToken());"entra"==n?.type&&(t.entraToken=n.token),thisVisual.host.openModalDialog(c.G.ID,{title:null,actionButtons:[],size:e},t).then((async t=>{if(t.resultState)if(t.resultState.targetUrl)thisVisual.host.launchUrl(t.resultState.targetUrl);else if(t.resultState.okviz)return void this.okvizService?.setLicense(t.resultState.okviz.license);r.XI0.SAVE({objectName:l.c,properties:{dialog:!1},selector:null},!1)})).catch((t=>{t.error&&3==t.error&&(0,r.ShP)()}))}clearNotifications(){this.currentNotificationProps=null,r.s54.HIDE(u),this.iconElement&&(this.iconElement.remove(),this.iconElement=null),window.clearTimeout(this.watermarkTimeout),this.watermarkTimeout=null,this.watermarkElement&&(this.watermarkElement.remove(),this.watermarkElement=null)}enumerateSettings(t){if(!this.services.length)return void(t.visible=!1);const e=this.status.statusCode==o.e2.Found;t.groups.find((t=>t.name==`${l.c}.status`)).displayName=e?`Status: ${this.status.status}`:this.status.status,t.status.value=e?`This license is managed by ${"okviz"==this.type?"OKVIZ"+(this.status.license?.refUrl?` (${this.status.license.refUrl})`:""):"Microsoft (AppSource)"}.`:"",t.activate.visible=this.status.statusCode==o.e2.NotFound||this.isInactive||this.isTrial,t.groups.find((t=>t.name==`${l.c}.details`)).visible=e,t.id.value=this.status.license?.id,t.id.visible=!!this.status.license?.id;const n=this.status.license?.customer||this.status.license?.tenantId;if(t.customer.displayName=this.status.license?.customer?"Licensee:":"Tenant:",t.customer.value=n,t.customer.visible=!!n,this.isTrial){t.expiry.displayName="Trial Ends on:";const e=new Date(this.status.license?.trialEnd);e&&(t.expiry.value=e.toLocaleDateString()),t.expiry.visible=!!e}else{t.expiry.displayName="Expiration Date:";const e=new Date(this.status.license?.expiry);e&&(t.expiry.value=e.toLocaleDateString()),t.expiry.visible=!!e}}enumerateSettingsLegacy(){if(!this.services.length)return{};const t=this.status.license?.customer||this.status.license?.tenantId;return{[l.c]:[{name:"status",value:this.status.status},{name:"dialog",value:!1,if:()=>this.status.statusCode==o.e2.NotFound||this.isInactive||this.isTrial},{name:"id",value:this.status.license?.id,if:()=>!!this.status.license?.id},{name:"customer",value:t,if:()=>!!t},{name:"expiry",value:new Date(this.status.license?.expiry).toLocaleDateString(),if:()=>!!this.status.license?.expiry},{name:"platform",value:`Managed by ${"okviz"==this.type?"OKVIZ":"Microsoft (AppSource)"}.`,if:()=>this.status.statusCode==o.e2.Found||this.status.statusCode==o.e2.Unsupported}]}}destroy(){this.clearNotifications(),this.visualUpdate=null,this.services.forEach((t=>t.destroy())),super.destroy()}}},66667:(t,e,n)=>{"use strict";n.d(e,{f:()=>s});var i=n(90628),r=n(81807),o=n(48923),a=n(50631);class s extends o.v{config;meta;simulated;plans=[];get type(){return"appSource"}get status(){let t,e=a.e2.Pending,n="Pending...";if(this.isSupported){if(this.isFetched)if(this.plans.length)switch(e=a.e2.Found,t={statusCode:a.xJ.Unknown,plan:this.plans[0].spIdentifier},this.plans[0].state){case 1:t.statusCode=a.xJ.Active,n="Active";break;case 2:t.statusCode=a.xJ.Active,n="Grace Period";break;case 0:t.statusCode=a.xJ.Expired,n="Expired";break;case 3:t.statusCode=a.xJ.Suspended,n="Suspended"}else e=a.e2.NotFound,n="Unlicensed"}else e=a.e2.Unsupported,n="Unsupported";return{statusCode:e,status:n,license:t}}get isActive(){return!!this.isSupported&&(!this.isFetched||!!this.plans.length&&1===this.plans[0].state)}get isInactive(){return!(!this.isSupported||!this.isFetched||this.plans.length&&0!==this.plans[0].state)}get isGracePeriod(){return!!(this.isSupported&&this.isFetched&&this.plans.length)&&2===this.plans[0].state}get isSuspended(){return!!(this.isSupported&&this.isFetched&&this.plans.length)&&3===this.plans[0].state}get isTrial(){return!1}get unsupportedMessage(){return"This visual cannot access the AppSource licensing system because the current environment does not support it. Please note that Power BI Report Server, Power BI Embedded (Publish to Web, PaaS embed), and National Clouds cannot be used with this licensing system."}get purchaseUrl(){return this.meta.config.visual.appSourcePurchaseUrl||this.meta.config.visual.contactUrl}constructor(t,e,n){super(t,e),this.config=t,this.meta=e,this.simulated=n,thisVisual.host.licenseManager.clearLicenseNotification(),this.fetchLicenses()}async fetchLicenses(){if(!this.isFetching&&!this.isFetched&&this.isSupported){this.isFetching=!0;try{const t=this.simulated??await thisVisual.host.licenseManager.getAvailableServicePlans();if(r.C7A.INFO("AppSource Licensing",t),this.isSupported=!t.isLicenseUnsupportedEnv,this.isFetched=t.isLicenseInfoAvailable,this.isFetched&&this.isSupported){this.plans=t.plans||[];const e=this.config?.ap||[];this.plans=this.plans.filter((t=>{for(const n of e)if(n&&i.isMatch(t.spIdentifier,n,{nocase:!0}))return!0;return!1}));const n=[1,2,3,0,4];this.plans.sort(((t,e)=>n.indexOf(t.state)-n.indexOf(e.state)))}}catch(t){r.C7A.ERROR("AppSource Licensing",t)}}super.fetchLicenses()}}},58689:(t,e,n)=>{"use strict";n.d(e,{U:()=>p});var i=n(81807),r=n(48923),o=n(50631),a=n(95179),s=n(78278),l=n(9380),c=n(60457),u=n(78985);const h="https://api.okviz.com",d="ol";class p extends r.v{config;meta;simulated;storageService;license;get licenseId(){return this.license?.id}get type(){return"okviz"}getLicenseStatus(t){switch(t){case o.xJ.Active:return"Active";case o.xJ.GracePeriod:return"Grace Period";case o.xJ.Trial:return"Trial Mode";case o.xJ.Expired:return"Expired";case o.xJ.Suspended:return"Suspended";default:return"Unknown"}}get status(){return this.isSupported?this.license?{statusCode:o.e2.Found,status:this.getLicenseStatus(this.license.statusCode),license:this.license}:this.isFetched?{statusCode:o.e2.NotFound,status:"Unlicensed"}:{statusCode:o.e2.Pending,status:"Pending..."}:{statusCode:o.e2.Unsupported,status:"Unsupported"}}get isActive(){return!!this.isSupported&&(!this.isFetched||!!this.license&&this.license.statusCode===o.xJ.Active)}get isInactive(){return!(!this.isSupported||this.isGracePeriod)&&this.license?.statusCode==o.xJ.Expired}get isGracePeriod(){return!(!this.isSupported||!this.license)&&this.license.statusCode===o.xJ.GracePeriod}get isSuspended(){return!(!this.isSupported||!this.license)&&this.license.statusCode===o.xJ.Suspended}get isTrial(){return!(!this.isSupported||!this.license)&&this.license.statusCode===o.xJ.Trial}get unsupportedMessage(){return"This visual cannot access the OKVIZ licensing system because the current environment does not support it or web access has been disabled by the administrator."}get purchaseUrl(){return this.meta.config.visual.okvizPurchaseUrl||this.meta.config.visual.contactUrl}constructor(t,e,n,i){super(t,e,i),this.config=t,this.meta=e,this.simulated=n,this.initLocalStorage(),this.checkWebAccess()}async initLocalStorage(){if(this.storageService=thisVisual.host.storageV2Service,this.storageService)try{0!==await this.storageService.status()&&(this.storageService=null)}catch(t){this.storageService=null}}async checkWebAccess(){0!==await thisVisual.host.webAccessService.webAccessStatus(h)?this.isSupported=!1:this.isSupported=!0}async getToken(){let t="okviz",e=this.config?.ot;if(!e){const n=u.R.instance;e=await n.getToken(),t="entra"}return e?{type:t,token:e}:null}async update(t){await this.getLocalLicense(t),await this.fetchLicenses(),super.update(t)}setLicense(t){this.license=t,this.saveLicenseLocally()}async getLocalLicense(t){let e,n;if(t){const n=t.dataViews?.[0];if(n?.metadata?.objects){const t=(0,i.PLM)(n.metadata.objects,c.c,d,null,!1);if(t)try{e=JSON.parse((0,i.y4v)(t))}catch(t){}}}if(this.config){const t=this.config[d];try{const e=(0,i.y4v)("LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF3SkpoOGZiM2h4a0dISGc4aXFyOApBZDNvSHNkbWFjVUxBY3lET2N4RWtTenBERnV6V3lOaVBvbzFnVWp2U3B0WEZucjZhcU9vaHVva0xoSXBHMGo5CkdIUmxCSzFHZVNnOEVod2dyNmw4QXFKZFc3YkVCM2orRGk0dlNmNXpJOVdsVmVkY0xEcC9iMEdtY0JTbGlHeVIKbUVUbjd6M2RYOXRLM2ZoRGRYSzNiNXM4dmw2QjlVMHZobjlNOFppUVRQNHQwb2Y4K09OUisrV3pwWmZ1QzNJRgp3anAvaFJCOStKYmxQRFc4S05pQVg4QVRzQndFRTNnTnlETFVmeWlBOFdDWjZNemZyU0o5ME9ETUVXQVUvNGE1CmZHS0tNZzdGRjVQZU1hTFpxM0JScXJ4dFZlUmdRazQvSVh2UWtFM1h3dXJQNUw1V0p4aW5sdXNLcExjUldhRXIKNVFJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0t"),r=await(0,s.jU)(e,"RS256"),{payload:o}=await(0,l.V)(t,r);n=o}catch(t){}}(e||n)&&(this.license=function(...t){if(!t?.length)return null;const e=[o.xJ.Active,o.xJ.GracePeriod,o.xJ.Trial,o.xJ.Expired,o.xJ.Suspended,o.xJ.Unknown];return t.sort(((t,n)=>{const i=e.indexOf(t.statusCode),r=e.indexOf(n.statusCode);return i!==r?i-r:t.expiry?n.expiry?new Date(n.expiry).getTime()-new Date(t.expiry).getTime():-1:1})),t[0]}(e,n))}saveLicenseLocally(){i.XI0.SAVE({objectName:c.c,properties:{dialog:!1,[d]:this.license?(0,i.WGQ)(JSON.stringify(this.license)):null},selector:null},!1)}async getSession(){const t=await(0,i.vxu)(this.storageService,"sid",(0,i.uRe)(!1)),e=await(0,i.vxu)(this.storageService,"uid",(0,i.uRe)(!1));return await(0,i.Fgm)(this.storageService,"sid",t,new Date(Date.now()+36e5)),await(0,i.Fgm)(this.storageService,"uid",e),{sessionId:t,userId:e}}async fetchLicenses(){if(!this.isFetching&&!this.isFetched&&this.isSupported){this.isFetching=!0;try{const t=await this.getSession();this.fetchSimulatedLicense()||await this.fetchLicenseByTenant(t)||await this.fetchLicenseById(t),this.isFetched=!0}catch(t){}}super.fetchLicenses()}fetchSimulatedLicense(){return!!this.simulated&&(this.setLicense(this.simulated),!0)}async fetchLicenseByTenant(t){const e=await this.getToken();if(e&&"entra"===e.type){const n=await p.ApiGetTenantLicense(this.meta.name,e.token,t.sessionId,this.meta.version);if(n)return this.setLicense(n),!0}return!1}async fetchLicenseById(t){if(this.licenseId){const e=await this.getToken();if(e&&"okviz"===e.type){const n=await p.ApiGetLicense(this.meta.name,this.licenseId,e.token,t,this.meta.version);return this.setLicense(n),!0}}return!1}static async ApiGetLicense(t,e,n,i,r){return f(`${h}/v1/license/${t.toLowerCase()}/${e}?sid=${i.sessionId}&uid=${i.userId}&ver=${r}`,n)}static async ApiGetTenantLicense(t,e,n,i){return f(`${h}/v1/tenant/license/okviz/${t.toLowerCase()}?sid=${n}&ver=${i}`,e)}static async ApiActivateLicense(t,e,n){return f(`${h}/v1/tenant/license/okviz/${t.toLowerCase()}/activate?key=${n}`,e,"POST")}}async function f(t,e,n="GET"){const r=await fetch(t,{method:n,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:`Bearer ${e}`}});if(r.ok){const t=await r.json();return(0,a.A)(t)?(i.C7A.ERROR("OKVIZ Licensing",t),null):t}throw new Error}},48923:(t,e,n)=>{"use strict";n.d(e,{v:()=>r});var i=n(81807);class r extends i.T0G{config;meta;fetchingTimeout;fetchCount=0;fetchingOptions;isFetching=!1;isFetched=!1;isSupported=!0;get purchaseUrl(){return this.meta.config.visual.okvizPurchaseUrl||this.meta.config.visual.contactUrl}constructor(t,e,n){super(),this.config=t,this.meta=e,this.fetchingOptions={intervalSeconds:30,attempts:3,...n}}async update(t){}fetchLicenses(){this.isFetching=!1,this.isFetched||!this.isSupported?this.trigger("fetched"):(this.fetchCount++,this.fetchCount>=this.fetchingOptions.attempts?(this.isFetched=!0,this.trigger("fetched")):this.scheduleFetching())}scheduleFetching(){window.clearTimeout(this.fetchingTimeout),this.fetchingTimeout=window.setTimeout((()=>{this.fetchLicenses()}),1e3*this.fetchingOptions.intervalSeconds)}}},95179:(t,e,n)=>{"use strict";function i(t){return t&&"object"==typeof t&&["title","status"].every((e=>e in t))}n.d(e,{A:()=>i})},60457:(t,e,n)=>{"use strict";n.d(e,{c:()=>o,t:()=>a});var i=n(81807),r=n(87674);const o="lic";class a extends i.zD3{name=o;displayName="License";status=(0,i.Z0q)(r.z.uI,{name:"status",value:""});activate=(0,i.Z0q)(r.z.jF,{name:"dialog",displayName:"Activate License",value:!1});id=(0,i.Z0q)(r.z.uI,{name:"id",displayName:"License Id:",value:""});customer=(0,i.Z0q)(r.z.uI,{name:"customer",displayName:"Licensee:",value:""});expiry=(0,i.Z0q)(r.z.uI,{name:"expiry",displayName:"Expiration Date:",value:""});groups=[new i.X4n({name:`${o}.status`,displayName:"Status",collapsible:!1,slices:[this.status,this.activate]}),new i.X4n({name:`${o}.details`,displayName:"License Details",collapsible:!1,slices:[this.id,this.customer,this.expiry]})]}},25539:(t,e,n)=>{"use strict";n.d(e,{JA:()=>r.J,Sx:()=>i.S});var i=n(28698),r=n(72137);n(23102)},28698:(t,e,n)=>{"use strict";n.d(e,{S:()=>a});var i=n(81807),r=n(72137),o=n(23102);class a{meta;checkTimeout;checkIntervalSeconds=60;canCheck=!0;alreadyChecked=!1;newestVersion;get storageKey(){return`cv${this.meta.version}`}get isSupported(){return!!this.meta.config.visual.updateUrl}constructor(t){this.meta=t}async update(t){this.isSupported&&0!==t.viewMode&&(this.canCheck=(0,i.PLM)(t.dataViews?.[0]?.metadata?.objects,"updater","check",!0),this.canCheck?(this.alreadyChecked=!!await(0,i.vxu)(thisVisual.host.storageV2Service,this.storageKey,null),this.alreadyChecked||this.checkTimeout||(this.checkTimeout=window.setTimeout((async()=>{await this.check(),this.checkTimeout=null}),1e3*this.checkIntervalSeconds))):await(0,i.Fgm)(thisVisual.host.storageV2Service,this.storageKey,null))}async check(){if(this.newestVersion=null,this.isSupported)try{const t=await fetch(this.meta.config.visual.updateUrl),e=await t.text();1==(0,o.Z)(e,this.meta.version,{patch:!1})&&(this.newestVersion=e,this.notify(e)),this.alreadyChecked=!0;const n=new Date;n.setDate(n.getDate()+1),await(0,i.Fgm)(thisVisual.host.storageV2Service,this.storageKey,"true",n)}catch(t){}}notify(t){i.s54.SHOW({id:"updater",icon:"info",important:!0,iconAlign:"top",position:"bottom",hideOnClick:!1,title:"New Version Available",text:`A new version of ${this.meta.displayName} (v${t}) is now available. Visit your account area to download it.`,callToAction:this.meta.config.visual.changelogUrl?{text:"Changelog",url:this.meta.config.visual.changelogUrl}:null})}enumerateSettings(t){this.isSupported?(t.groups.find((t=>t.name==`${r.q}.version`)).visible=!!this.newestVersion,this.newestVersion&&(t.version.value=`A new version of ${this.meta.displayName} is available: v${this.newestVersion}`)):t.visible=!1}enumerateSettingsLegacy(){return this.isSupported?{[r.q]:[{name:"check",value:this.canCheck}]}:{}}}},23102:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(99589);function r(t,e,n){const r=i.parse(t),o=i.parse(e);return r&&o?(!1===n?.patch&&(r.patch=0,o.patch=0),!1===n?.minor&&(r.minor=0,o.minor=0),!1===n?.major&&(r.major=0,o.major=0),i.compare(r,o)):0}},72137:(t,e,n)=>{"use strict";n.d(e,{J:()=>a,q:()=>o});var i=n(81807),r=n(87674);const o="updater";class a extends i.zD3{name=o;displayName="Updates";version=(0,i.Z0q)(r.z.uI,{name:"version",displayName:"",value:""});check=(0,i.Z0q)(r.z.jF,{name:"check",displayName:"Check for Updates",value:!0});groups=[new i.X4n({name:`${o}.version`,displayName:"New Version Available!",collapsible:!1,slices:[this.version]}),new i.X4n({name:`${o}.check`,displayName:"",collapsible:!1,slices:[this.check,(0,i.auc)("Automatically checks for updates and notifies when a new version is available. Notifications are displayed only in edit mode.")]})]}},88853:(t,e,n)=>{"use strict";n.d(e,{s:()=>a});var i=n(6639),r=n(93753),o=n(4653);class a{static enabled=!0;previousAlerts={};current;viewMode;static _instance;static get instance(){return a._instance||(a._instance=new this),a._instance}constructor(){if(a._instance)return a._instance;a._instance=this}static UPDATE(t){this.instance.update(t)}update(t){this.viewMode=t.viewMode}static SHOW(t){this.instance.show(t)}show(t){if(t={id:(0,r.uR)(),element:thisVisual.element,titleColor:"#333",textColor:"#333",fontSize:13,backgroundColor:"#f4f4f4",backBlur:!1,icon:"info",iconAlign:"middle",position:"bottom",requiredHeight:0,mustBeContained:!1,uncloseable:!1,closeButton:!0,hideOnClick:!0,important:!1,fullSize:!1,force:!1,hideAfter:0,reshowEvery:0,allowOnce:!1,...t},!a.enabled&&!t.force)return;if(this.current&&this.current.id==t.id)return;const e=t.element.getBoundingClientRect().height;if(!(t.requiredHeight&&e<t.requiredHeight||t.limitToMode&&t.limitToMode!=this.viewMode)){if(this.current){if(!t.important)return;this.hide()}t.allowOnce&&this.previousAlerts[t.id]||(this.previousAlerts[t.id]=!0,this.current=new s(t),!t.fullSize&&t.mustBeContained&&e<this.current.height?(this.current.destroy(),this.current=null):(this.current.show(),this.current.on("close",(t=>this.hide(t)))))}}static HIDE(t){this.instance.hide(t)}hide(t){!this.current||t&&this.current.id!=t||(this.current.hide(),this.current=null)}}class s extends o.T{options;element;reshowTimeout;showTimeout;hideTimeout;_id;get id(){return this._id}get height(){return this.element?this.element.getBoundingClientRect().height+20:0}constructor(t){super(),this.options=t,this._id=t.id,this.element=this.create()}show(){this.element&&(window.clearTimeout(this.showTimeout),window.clearTimeout(this.hideTimeout),window.clearTimeout(this.reshowTimeout),this.options.hideAfter&&(this.hideTimeout=window.setTimeout((()=>{this.hide()}),1e3*this.options.hideAfter+300)),this.showTimeout=window.setTimeout((()=>{this.options.element.appendChild(this.element),this.options.fullSize||this.reveal()}),300))}hide(){window.clearTimeout(this.showTimeout),window.clearTimeout(this.hideTimeout),this.conceal()}destroy(){this.element&&(this.element.remove(),this.element=null)}create(){const t=thisVisual.host.colorPalette,e=t&&t.isHighContrast,n=(0,i.tT)(`#${this.id}.slide-alert${this.options.uncloseable?".fixed":""}${this.options.fullSize?".fit":""}`,{style:{width:"100%",background:e?t.background.value:this.options.backgroundColor,...this.options.backBlur?{backdropFilter:"blur(5px)"}:{},zIndex:this.options.zIndex?this.options.zIndex.toString():this.options.fullSize?"10001":"9980",...this.options.fullSize?{height:"100%"}:{borderTop:e?`1px solid ${t.foreground.value}`:"none"}}});if(this.options.uncloseable||this.options.fullSize||!this.options.hideOnClick||(n.style.cursor="pointer",n.addEventListener("click",(()=>{this.hide()}))),this.options.customRender)this.options.customRender(n);else{if(this.options.icon&&(0,i.tT)(`.alert-icon.item.icon.icon-${this.options.icon}`,n,{style:{color:e?t.foreground.value:this.options.iconColor,alignSelf:"top"==this.options.iconAlign?"flex-start":"bottom"==this.options.iconAlign?"flex-end":"center"}}),this.options.title||this.options.text){const r=(0,i.tT)(".alert-text",n);this.options.title&&(0,i.tT)(".alert-title",r,{style:{fontSize:`${Math.ceil(1.2*this.options.fontSize)}px`,color:e?t.foreground.value:this.options.titleColor}},this.options.title),this.options.text&&(0,i.tT)(".alert-message",r,{style:{fontSize:`${this.options.fontSize}px`,color:e?t.foreground.value:this.options.textColor}},this.options.text)}this.options.callToAction&&(0,i.tT)(this.options.callToAction.button?".btn.alert-cta":"a.alert-cta",n,{style:{fontSize:`${this.options.fontSize}px`,color:this.options.callToAction.button?"#fff":t.hyperlink.value},...this.options.callToAction.button?{}:{attr:{href:this.options.callToAction.url||"#",target:"_blank"}},events:{click:t=>{t.stopPropagation(),t.preventDefault(),this.options.callToAction.onClick?this.options.callToAction.onClick(t):thisVisual.host.launchUrl(this.options.callToAction.url)}}},this.options.callToAction.text)}return!this.options.uncloseable&&this.options.closeButton&&(0,i.tT)("a.alert-close.icon.icon-close.control",n,{style:{color:e?t.foreground.value:this.options.titleColor},events:{click:t=>{t.preventDefault(),this.hide()}}}),n}reveal(t=400){this.element&&this.element.animate([{[this.options.position]:"-100%"},{[this.options.position]:0}],{duration:t,iterations:1,easing:"ease-in-out",fill:"forwards"})}conceal(t=400){this.element&&this.element.animate([{[this.options.position]:"-100%"}],{duration:this.element.classList.contains("fit")?0:t,iterations:1,easing:"ease-in-out",fill:"forwards"}).addEventListener("finish",(()=>{this.options.reshowEvery?this.reshowTimeout=window.setTimeout((()=>this.reveal()),1e3*this.options.reshowEvery):(this.destroy(),this.trigger("close",this.id))}))}}},52009:(t,e,n)=>{"use strict";n(23242)},54181:(t,e,n)=>{"use strict";var i;n.d(e,{X:()=>i,o:()=>r}),function(t){t.Normal="visionNormal",t.Protanopia="visionProtanopia",t.Protanomaly="visionProtanomaly",t.Deuteranopia="visionDeuteranopia",t.Deuteranomaly="visionDeuteranomaly",t.Tritanopia="visionTritanopia",t.Tritanomaly="visionTritanomaly",t.Achromatopsia="visionAchromatopsia",t.Achromatomaly="visionAchromatomaly",t.LowContrast="visionLowContrast"}(i||(i={}));class r{static apply(t,e){const n=document.getElementById("visionFilter");n&&n.remove();const r=e||document.body,o=t===i.Normal;o||r.appendChild((new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" id="visionFilter" style="position: absolute; width: 0; height:0"><defs><filter id="visionNormal"><feColorMatrix values="1 0 0 0 0\t\t\t\t0 1 0 0 0\t\t\t\t0 0 1 0 0\t\t\t\t0 0 0 1 0" /></filter><filter id="visionProtanopia" color-interpolation-filters="sRGB"><feColorMatrix values="0.152286 1.052583 -0.204868 0 0\t\t\t\t0.114503 0.786281 0.099216 0 0\t\t\t\t-0.003882 -0.048116 1.051998 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionProtanomaly" color-interpolation-filters="sRGB"><feColorMatrix values="0.458064 0.679578 -0.137642 0 0\t\t\t\t0.092785 0.846313 0.060902 0 0\t\t\t\t-0.007494 -0.016807 1.024301 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionDeuteranopia" color-interpolation-filters="sRGB"><feColorMatrix values="0.367322 0.860646 -0.227968 0 0\t\t\t\t0.280085 0.672501 0.047413 0 0\t\t\t\t-0.011820 0.042940 0.968881 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionDeuteranomaly" color-interpolation-filters="sRGB"><feColorMatrix values="0.547494 0.607765 -0.155259 0 0\t\t\t\t0.181692 0.781742 0.036566 0 0\t\t\t\t-0.010410 0.027275 0.983136 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionTritanopia" color-interpolation-filters="sRGB"><feColorMatrix values="1.255528 -0.076749 -0.178779 0 0\t\t\t\t-0.078411 0.930809 0.147602 0 0\t\t\t\t0.004733 0.691367 0.303900 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionTritanomaly" color-interpolation-filters="sRGB"><feColorMatrix values="1.017277 0.027029 -0.044306 0 0\t\t\t\t-0.006113 0.958479 0.047634 0 0\t\t\t\t0.006379 0.248708 0.744913 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionAchromatopsia" color-interpolation-filters="sRGB"><feColorMatrix values="0.212656 0.715158 0.072186 0 0\t\t\t\t0.212656 0.715158 0.072186 0 0\t\t\t\t0.212656 0.715158 0.072186 0 0\t\t\t\t0 0 0 1 0" /><feColorMatrix type="saturate" values="0" color-interpolation-filters="sRGB" /><feComponentTransfer><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /><feFuncB type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionAchromatomaly" color-interpolation-filters="sRGB"><feColorMatrix type="saturate" values="0.5" /><feComponentTransfer><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /><feFuncB type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionLowContrast" color-interpolation-filters="sRGB"><feComponentTransfer><feFuncR type="linear" slope=".5" intercept=".25" /><feFuncG type="linear" slope=".5" intercept=".25" /><feFuncB type="linear" slope=".5" intercept=".25" /></feComponentTransfer></filter></defs></svg>',"image/svg+xml").documentElement),r.style.filter=o?"none":`url(#${t})`}}},76599:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var i=n(6639),r=n(4653),o=n(93753),a=n(64159);function s(t){return t?.color?t.colorEnd?`linear-gradient(90deg, ${t.color}, ${t.colorEnd})`:t.color:null}class l extends r.T{scale=1;customColorDialogIsVisible=!1;colorPalette;dialog;dialogContent;static _instance;static get instance(){return l._instance||(l._instance=new this),l._instance}constructor(t){if(super(),l._instance)return l._instance;l._instance=this,t||(t=thisVisual.host.colorPalette),this.colorPalette=t,this.listen()}listen(){document.addLiveEventListener("click",".color-picker",((t,e)=>{t.preventDefault();const n=e.parentElement;n.getAttribute("disabled")||n.classList.contains("readonly")||l.SHOW(e,JSON.parse(n.dataset.options))})),document.addLiveEventListener("click",".color-picker-dialog .color-cell",((t,e)=>{t.preventDefault(),t.stopPropagation(),this.changeColor(e,e.dataset.color),l.HIDE()})),document.addLiveEventListener("change",".color-picker-dialog .custom-color-cell",((t,e)=>{t.stopPropagation(),this.changeColor(e,e.value),l.HIDE()})),document.addLiveEventListener("click",".color-picker-dialog .custom-color-cell",((t,e)=>{t.stopPropagation();const n=e.closest(".color-picker-dialog");(0,i.kO)(".selected",n).forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),this.customColorDialogIsVisible=!0})),document.addLiveEventListener("click",".color-picker-dialog .content",(t=>{t.stopPropagation(),t.stopImmediatePropagation()})),document.addLiveEventListener("click",".color-picker-dialog",(()=>{this.customColorDialogIsVisible||l.HIDE()}))}changeColor(t,e){const n=t.closest(".color-picker-dialog"),r=n.dataset.id;(0,i.kO)(".selected",n).forEach((t=>t.classList.remove("selected"))),t.classList.add("selected"),l.UPDATE_COLOR(r,e),this.trigger("change",{id:r,color:e})}static DOM(t,e){return this.instance.dom(t,e)}dom(t,e){(t={nullable:!0,customColors:[],colorWheel:!0,title:"Choose a color",color:"",disabled:!1,readonly:!1,hiddenField:!0,id:"default",...t}).color||(t.color="");const n=(0,i.tT)(`#${(0,o.aH)(t.id)}.color-picker-container${t.readonly?".readonly":""}`,{attr:{disabled:t.disabled},data:{options:t}},[(0,i.tT)("button.color-picker",[(0,i.tT)(".color-cell"+(t.color?"":".empty"),{style:{background:s(t)||"none"}}),(0,i.tT)(".dropdown.icon-bottom")])]);return t.hiddenField&&(0,i.tT)("input.color-field",n,{attr:{type:"hidden",name:t.id,value:t.color}}),e&&e.appendChild(n),n}static UPDATE(t){this.instance.update(t)}update(t){this.scale=t.viewport.scale}static UPDATE_COLOR(t,e){const n=(0,i.VR)(`#${(0,o.aH)(t)}`);if(!n.isNull){const t=JSON.parse(n.dataset.options);t.color=e,n.dataset.options=JSON.stringify(t);const r=(0,i.VR)(".color-cell",n);e?(r.classList.remove("empty"),r.style.background=s(t)):(r.classList.add("empty"),r.style.background="none");const o=(0,i.VR)("input.color-field",n);o.isNull||(o.value=e,o.dispatchEvent(new Event("change")))}}static SHOW(t,e){this.instance.showDialog(t,e)}showDialog(t,e){if(this.dialog&&this.dialog.dataset.id==e.id)return;this.hideDialog(),this.dialog=(0,i.tT)(".color-picker-dialog",document.body,{style:{transform:`scale(${1/this.scale})`},data:{id:e.id}}),this.dialogContent=(0,i.tT)(".content",this.dialog);const n=(0,i.tT)(".theme-colors",this.dialogContent);(0,i.tT)("h1",n,e.title);const r=(0,i.tT)("table.colors",n),o=this.dialogColors(e.customColors),a=(t,e=1)=>{const n=(0,i.tT)("tr",t),r=(0,i.tT)("td",n,{attr:{colspan:e}});(0,i.tT)("hr",r)},s=(t,e,n=!1,r,o=1)=>{const a=(0,i.tT)("td",t,{attr:{colspan:o}}),s=(0,i.tT)(".color-tile",a);(0,i.tT)(`.color-cell${e?"":".empty"}${n?".selected":""}`,s,{style:{background:e},attr:{title:e},data:{color:e}}),r&&(0,i.tT)("span",s,r)},l=(t,e,n=!1,r=1)=>{const o=(0,i.tT)("td",t,{attr:{colspan:r}}),a=(0,i.tT)(".color-tile",o);(0,i.tT)("input.custom-color-cell"+(n?".selected":""),a,{attr:{type:"color",value:e||"#ffffff"},events:{blur:()=>this.customColorDialogIsVisible=!1,input:t=>{const e=t.target;this.changeColor(e,e.value)}}}),(0,i.tT)("span",a,"Custom color")},c=10;let u=!1;for(let t=0;t<6;t++){const n=(0,i.tT)("tr",r);for(let i=0;i<c;i++){const r=o[i][t],a=e.color?e.color.toLowerCase()==r.toLowerCase():!r;a&&(u=!0),s(n,r,a)}0==t&&a(r,c)}e.nullable&&(a(r,c),s((0,i.tT)("tr",r),"",!e.color,"No fill",c)),e.colorWheel&&(a(r,c),l((0,i.tT)("tr",r),e.color,!(u||!e.color),c)),this.positionDialog(t)}dialogColors(t){const e=[["#ffffff","#E6E6E6","#CCCCCC","#B3B3B3","#808080","#666666"],["#000000","#999999","#666666","#333333","#1A1A1A","#000000"]];if(t)for(let n=0;n<t.length;n++){const i=t[n];e.push([i,(0,a.dy)(.45,i),(0,a.dy)(.25,i),(0,a.dy)(.1,i),(0,a.dy)(3*-.15,i),(0,a.dy)(-.6,i),(0,a.dy)(-.75,i)])}const n=Math.max(0,10-e.length);if(n&&this.colorPalette)for(let t=0;t<n;t++){const n=this.colorPalette.colors[t].value;e.push([n,(0,a.dy)(.45,n),(0,a.dy)(.25,n),(0,a.dy)(.1,n),(0,a.dy)(3*-.15,n),(0,a.dy)(-.6,n),(0,a.dy)(-.75,n)])}return e}positionDialog(t){const e=t.getBoundingClientRect(),n=window.innerWidth,i=window.innerHeight,r=this.dialogContent.offsetWidth,o=this.dialogContent.offsetHeight,a=Math.max(0,e.left+r>n?e.left-r+e.width:e.left),s=Math.max(0,e.top+e.height+o>i?e.top-o-3:e.top+e.height+3);this.dialogContent.style.left=`${a}px`,this.dialogContent.style.top=`${s}px`}static HIDE(){this.instance.hideDialog()}hideDialog(){this.dialog&&(this.dialog.remove(),this.dialog=null),this.customColorDialogIsVisible=!1}}},41470:(t,e,n)=>{"use strict";n.d(e,{C7:()=>o,GP:()=>s,Rm:()=>a,cF:()=>i});var i,r=n(2446);!function(t){t[t.Auto=0]="Auto",t[t.Enabled=1]="Enabled",t[t.Disabled=2]="Disabled"}(i||(i={}));class o{static _instance;static get instance(){return o._instance||(o._instance=new this),o._instance}constructor(){if(o._instance)return o._instance;o._instance=this}get isDev(){return thisVisual.element.getAttribute("class").indexOf("_DEBUG")>=0}prefix="";status=i.Auto;useInlineConsoleFor=[];inlineConsoleElement;get enabled(){return this.status==i.Enabled||this.status==i.Auto&&this.isDev}update(t){this.useInlineConsoleFor.length?(this.inlineConsoleElement||(this.inlineConsoleElement=new r.R,this.inlineConsoleElement.toggle(!0)),this.inlineConsoleElement.isInFocus=t.isInFocus):this.inlineConsoleElement&&(this.inlineConsoleElement.remove(),this.inlineConsoleElement=null)}static MESSAGE(t,...e){this.instance.enabled&&(this.instance.prefix&&e.unshift(this.instance.prefix),window.console[t](...e),(0,r.k)(t)&&this.instance.useInlineConsoleFor.includes(t)&&(this.instance.inlineConsoleElement||(this.instance.inlineConsoleElement=new r.R),this.instance.inlineConsoleElement.addMessage(t,e.pop())))}static GROUP(...t){this.MESSAGE("group",...t)}static GROUP_END(...t){this.MESSAGE("groupEnd",...t)}static LOG(...t){this.MESSAGE("log",...t)}static INFO(...t){this.MESSAGE("info",...t)}static ERROR(...t){this.MESSAGE("error",...t)}static WARN(...t){this.MESSAGE("warn",...t)}static SET_PREFIX(t){this.instance.prefix=t}}function a(...t){o.LOG(...t)}function s(){return function(t,e,n){const i=n.value;return n.value=function(...t){try{const e=i.apply(this,t);return e instanceof Promise?e.catch((t=>{throw o.ERROR(t),t})):e}catch(t){throw o.ERROR(t),t}},n}}},46615:(t,e,n)=>{"use strict";n.d(e,{KG:()=>i,tz:()=>a});var i,r=n(6639),o=n(93753);!function(t){t[t.Separator=0]="Separator",t[t.Label=1]="Label",t[t.Custom=2]="Custom",t[t.Normal=3]="Normal",t[t.Check=4]="Check",t[t.Radio=5]="Radio",t[t.Header=6]="Header",t[t.Hint=7]="Hint",t[t.Submenu=8]="Submenu"}(i||(i={}));class a{id;options;static current;menuControl;lastEvent;static Init(t,e,n){e={closeOnItemClick:!0,width:"auto",scale:1,items:[],...e},a.current&&a.current.destroy();const i=new a(t,e,n);return a.current=i,i}constructor(t,e,n){this.id=t,this.options=e,this.menuControl=(0,r.tT)("ul.contextualJs.contextualMenu",{attr:{id:this.id||(0,o.uR)()}}),"auto"!=this.options.width&&(this.menuControl.style.width=`${e.width||200}px`),1!=this.options.scale&&(this.menuControl.style.transform=`scale(${1/this.options.scale})`),this.render(),n&&this.show(n),window.addEventListener("resize",a.Close)}get isVisible(){return this.menuControl&&this.menuControl.parentElement==document.body}add(t){void 0===t.closeMenuOnClick&&(t.closeMenuOnClick=this.options.closeOnItemClick);const e=new s(t);this.menuControl.appendChild(e.element)}render(){const t=t=>t.filter((t=>t.icon||t.checkable||t.type==i.Check||t.type==i.Radio)).length;Array.isArray(this.options.items)?(this.removeElementChildren(this.menuControl),this.options.items.forEach((t=>this.add(t))),t(this.options.items)||this.menuControl.classList.add("no-icons")):((0,r.tT)("li.contextualMenuLoader",this.menuControl,"..."),this.options.items().then((e=>{this.menuControl&&(this.removeElementChildren(this.menuControl),e.forEach((t=>this.add(t))),t(e)||this.menuControl.classList.add("no-icons"),this.lastEvent&&this.place(this.lastEvent,this.menuControl))})))}show(t){if(t.stopPropagation(),a.Close(),a.ToggleCatcher(!0),this.options.sticky&&"boolean"!=typeof this.options.sticky)this.options.sticky.classList.add("context-hover");else{const e=t.target;e.parentElement.classList.add("context-hover"),e.classList.add("context-hover")}document.body.appendChild(this.menuControl),this.place(t,this.menuControl)}hide(t){t&&t.stopPropagation(),a.Close()}toggle(t){this.isVisible?this.hide(t):this.show(t)}removeElementChildren(t){let e=t.lastElementChild;for(;e;)t.removeChild(e),e=t.lastElementChild}place(t,e){e.style.maxHeight="none";const n=e.getBoundingClientRect(),i=this.options.sticky?"boolean"==typeof this.options.sticky?t.target.getBoundingClientRect():this.options.sticky.getBoundingClientRect():new DOMRect(t.clientX,t.clientY,0,0),r=i.left+n.width>=window.innerWidth&&i.left>n.width+10?i.left-n.width+i.width:i.left,o=i.top+i.height+n.height>=window.innerHeight&&i.top+i.height>n.height?i.top-n.height:i.top+i.height;e.style.top=`${o}px`,e.style.left=`${r}px`,e.style.maxHeight=(window.innerHeight-o-25)/(1/this.options.scale)+"px",this.lastEvent=t}destroy(){this.menuControl=null,this.options=null,this.lastEvent=null}static ToggleCatcher(t){if(t){const t=document.createElement("div");t.classList.add("contextualMenuCatcher"),document.body.appendChild(t),t.addEventListener("click",a.CloseListener),t.addEventListener("contextmenu",a.CloseListener)}else(0,r.kO)(".contextualMenuCatcher").forEach((t=>{t.removeEventListener("click",a.CloseListener),t.removeEventListener("contextmenu",a.CloseListener),t.remove()}))}static CloseListener(t){t.target.classList.contains("contextualJs")||(t.preventDefault(),a.Close())}static Close(){a.ToggleCatcher(!1),(0,r.kO)(".contextualMenu").forEach((t=>t.remove())),(0,r.kO)(".context-hover").forEach((t=>t.classList.remove("context-hover")))}}class s{element;constructor(t){switch((t={enabled:!0,clickable:!0,...t}).type){case i.Separator:this.separator();break;case i.Header:t.className="header "+(t.className?t.className:"");case i.Label:t.checkable=!1,t.clickable=!1,t.icon=null,this.item(t);break;case i.Custom:this.customItem(t);break;case i.Radio:t.radioGroup=t.radioGroup||"default";case i.Check:t.checkable=!0,t.icon="done",this.item(t);break;case i.Hint:this.hintItem(t);break;case i.Submenu:this.subMenu(t);break;case i.Normal:default:this.item(t)}t.onLayout&&t.onLayout(this.element),t.className&&t.className.split(" ").filter(Boolean).forEach((t=>this.element.classList.add(t)))}item(t){this.element=(0,r.tT)("li.contextualJs.contextualMenuItemOuter"+(t.checkable?".checkable"+(t.checked?".checked":""):"")),t.enabled||this.element.setAttribute("disabled",""),t.radioGroup&&this.element.setAttribute("data-group",t.radioGroup);const e=(0,r.tT)(".contextualJs.contextualMenuItem"+(t.clickable?"":".static"),this.element);t.type!==i.Header&&(t.icon?(0,r.tT)(`span.icon-${t.icon}.contextualJs.contextualMenuItemIcon`,e):(0,r.tT)(".contextualJs.contextualMenuItemIcon",e)),(0,r.tT)("span.contextualJs.contextualMenuItemTitle",e,t.label),(0,r.tT)("span.contextualJs.contextualMenuItemTip",e,t.shortcut||""),t.enabled&&this.element.addEventListener("click",(e=>{if(e.stopPropagation(),t.clickable){let n=!1;t.checkable&&(t.radioGroup?(n=!0,this.element.classList.add("checked"),(0,r.kO)(`[data-group="${t.radioGroup}"]`,this.element.closest("ul")).forEach((t=>{t!=this.element&&t.classList.remove("checked")}))):(this.element.toggleClass("checked"),n=this.element.classList.contains("checked"))),t.onClick&&t.onClick(e,t.key,n),t.closeMenuOnClick&&(t.checkable?setTimeout((()=>a.Close()),100):a.Close())}}),!1)}subMenu(t){this.element=(0,r.tT)("li.contextualJs.contextualMenuItemOuter"),t.enabled||this.element.setAttribute("disabled","");const e=(0,r.tT)(".contextualJs.contextualMenuItem",this.element);t.icon?(0,r.tT)(`span.icon-${t.icon}.contextualJs.contextualMenuItemIcon`,e):(0,r.tT)(".contextualJs.contextualMenuItemIcon",e),(0,r.tT)("span.contextualJs.contextualMenuItemTitle",e,t.label),(0,r.tT)("span.contextualJs.contextualMenuItemChevron",e),(0,r.tT)("ul.contextualJs.contextualSubMenu",this.element);const n=(0,r.VR)(".contextualSubMenu",this.element);t.items?.forEach((t=>{const e=new s(t);n.appendChild(e.element)}))}hintItem(t){this.element=(0,r.tT)("li.contextualJs.contextualMenuItemHint",t.label)}customItem(t){this.element=(0,r.tT)("li.contextualJs.contextualCustomEl",t.label),t.closeMenuOnClick||this.element.addEventListener("click",(t=>t.stopPropagation()))}separator(){this.element=(0,r.tT)("li.contextualJs.contextualMenuSeparator",[(0,r.tT)("span")])}}},4653:(t,e,n)=>{"use strict";n.d(e,{T:()=>o});var i=n(23242),r=n(93753);class o{listeners={};get solo(){return(0,i.Im)(this.listeners)}on(t,e,n){n||(n=(0,r.uR)()),(Array.isArray(t)?t:[t]).forEach((t=>{this.listeners[`${n}_${t}`]={event:t,callback:e}}))}off(t,e){t||e?(Array.isArray(t)?t:[t]).forEach((t=>{delete this.listeners[`${e}_${t}`]})):this.listeners={}}trigger(t,e){for(const n of Object.values(this.listeners))n.event==t&&(0,i.Tn)(n.callback)&&n.callback(e,t)}destroy(){this.off()}}},50641:(t,e,n)=>{"use strict";n.d(e,{W:()=>r});var i=n(6639);function r(t,e,n){const r=t&&t.startsWith(".")?t.trim().replace(" ","."):"",o=(t,e)=>{if(!t.value&&e<1)return null;let i=Number(t.value)+(n?.step||1)*e;return isNaN(i)&&(i=n.min),null!=n?.max&&i>n.max&&(i=n.max),null!=n?.min&&i<n.min&&(i=n.min),t.value=i.toString(),i},a=(t,e)=>{const i=t.currentTarget;if(i.hasAttribute("disabled"))return;const r=i.closest(".number-container")?.querySelector("input"),a=o(r,e);n?.change&&n.change(t,a),t.stopPropagation()},s=(0,i.tT)(`.number-container${r}${n?.title?".icon.icon-help-super":""}`,{attr:{hidden:n?.hidden,title:n?.title}},[(0,i.tT)(".input-container",[(0,i.tT)("input",{attr:{type:"number",min:n?.min||0,max:n?.max||1/0,value:n?.value||null,step:n?.step||1,placeholder:n?.placeholder||"",name:n?.name,disabled:n?.disabled},events:{input:t=>(t=>{const e=t.currentTarget,i=o(e,0);n?.change&&n.change(t,i),t.stopPropagation()})(t)}}),...n?.suffix?[(0,i.tT)("span.suffix",n.suffix)]:[]]),...n?.upDown?[(0,i.tT)(".input-buttons",[(0,i.tT)(".increment.icon.icon-top",{events:{click:t=>a(t,1)},attr:{disabled:n?.disabled}}),(0,i.tT)(".decrement.icon.icon-bottom",{events:{click:t=>a(t,-1)},attr:{disabled:n?.disabled}})])]:[]]);return e&&e.appendChild(s),n?.middleware&&n.middleware(s),s}},40973:(t,e,n)=>{"use strict";n.d(e,{W:()=>o});var i=n(6639),r=n(93753);function o(t,e,n){const o=t&&t.startsWith(".")?t.trim().replace(" ","."):"",a=t=>{const e=t.currentTarget;n?.change&&n.change(t,e.value),t.stopPropagation()},s=n?.name||(0,r.uR)(),l=(0,i.tT)(`.radio-container${o}${n?.title?".icon.icon-help-super":""}`,{attr:{hidden:n?.hidden,title:n?.title}},n?.list?.map((t=>(0,i.tT)("label"+(n?.disabled?".disabled":""),[(0,i.tT)("input",{attr:{type:"radio",name:s,value:t.value,checked:t.selected,disabled:n?.disabled},events:{input:a}}),(0,i.tT)(".radio",t.text)]))));return e&&e.appendChild(l),n?.middleware&&n.middleware(l),l}},11732:(t,e,n)=>{"use strict";n.d(e,{H:()=>r});var i=n(6639);function r(t,e,n,r,o){const a=t&&t.startsWith(".")?t.trim().replace(" ","."):"",s=(0,i.tT)(`label.switch-container${a}${n?.title?".icon.icon-help-super":""}`,{attr:{hidden:n&&n.hidden,title:n&&n.title}},[(0,i.tT)(`span.switch${n?.partial?".partial":""}${n?.readonly?".readonly":""}${n?.bilateral?".bilateral":""}`,[(0,i.tT)("input.switch-input",{attr:{type:"checkbox",name:n&&n.name,checked:n&&n.checked,disabled:n&&n.disabled},events:{change:(t,e)=>{if(e.parentElement.classList.contains("readonly"))e.checked=!e.checked;else if(e.parentElement.classList.remove("partial"),n&&n.change){const i=e.checked;n.change(t,i),t.stopPropagation()}}}}),(0,i.tT)("span.slider")])]);return r&&(0,i.tT)("span.label",s,r),n?.bilateral&&o&&s.prepend((0,i.tT)("span.label",o)),e&&e.appendChild(s),n?.middleware&&n.middleware(s),s}},6639:(t,e,n)=>{"use strict";n.d(e,{VR:()=>s,kO:()=>l,tT:()=>o});var i=n(23242);function r(t){const e=["style","attr","data","list","middleware","events"];if(t)for(let n=0;n<e.length;n++)if((0,i.cK)(t,e[n]))return!0;return!1}function o(t,e,n,o,s){return function(t,e,n,r,o){const s=function(t){const e=t.trim().replace(/ /g,".").split(/([.#])/),n=[];let i="";for(let t=1;t<e.length;t+=2)switch(e[t]){case".":n.push(e[t+1]);break;case"#":i=e[t+1]}return{tagName:(e[0]||"div").toLowerCase(),classNames:n,id:i}}(t),l=document.createElement(s.tagName);if(s.id&&(l.id=s.id),s.classNames.length&&l.classList.add(...s.classNames),o&&(l.innerText=o),n){if(n.style)for(const t of Object.keys(n.style))if(t&&t in l.style){null==n.style[t]?l.style.removeProperty(t):l.style[t]=a(t,n.style[t])}if(n.attr)for(const t of Object.keys(n.attr))if(t){const e=n.attr[t];null==e||!1===e?l.removeAttribute(t):l.setAttribute(t,e.toString())}if(n.data)for(const t of Object.keys(n.data))if(t){null==n.data[t]?delete l.dataset[t]:l.dataset[t]=(0,i.Kg)(n.data[t])?n.data[t]:JSON.stringify(n.data[t])}if(n.list&&"select"==s.tagName&&n.list.forEach((t=>{const e=document.createElement("option");e.value=t.value.toString(),e.text=void 0===t.text?e.value:t.text,t.selected&&(e.selected=!0),t.disabled&&(e.disabled=!0),void 0!==t.data&&(e.dataset.data=t.data),t.hidden&&(e.hidden=!0),l.appendChild(e)})),n.events)for(const t of Object.keys(n.events))l.addEventListener(t,(e=>n.events[t](e,e.target)));n.middleware&&n.middleware(l)}return r&&r.forEach((t=>{t&&l.appendChild(t)})),e&&e.appendChild(l),l}(t,e instanceof HTMLElement?e:void 0,r(e)?e:r(n)?n:void 0,Array.isArray(e)?e:Array.isArray(n)?n:Array.isArray(o)?o:void 0,"string"==typeof e?e:"string"==typeof n?n:"string"==typeof o?o:s)}function a(t,e){return"number"==typeof e&&0!=e&&["fontSize","width","minWidth","maxWidth","height","minHeight","maxHeight","margin","marginTop","marginRight","marginBottom","marginLeft","padding","paddingTop","paddingRight","paddingBottom","paddingRight","top","right","bottom","left","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"].indexOf(t)>=0?`${e}px`:e.toString()}function s(t,e=document){let n=e.querySelector(t);return n||(n=document.createElement("null"),n.isNull=!0),n}function l(t,e=document){return Array.from(e.querySelectorAll(t))}Node.prototype.addLiveEventListener=function(t,e,n){this.addEventListener(t,(t=>{const i=t.target;if(i){const r=i.closest(e);r&&n&&n(t,r)}}))},HTMLElement.prototype.toggleClass=function(t,e){null==e&&(e=!this.classList.contains(t)),e?this.classList.add(t):this.classList.remove(t)},HTMLElement.prototype.toggleAttr=function(t,e,n=""){null==e&&(e=!this.hasAttribute(t)),e?this.setAttribute(t,n):this.removeAttribute(t)},HTMLElement.prototype.isVisible=function(){return!("none"===window.getComputedStyle(this).display)},HTMLElement.prototype.toggle=function(t){this.toggleAttr("hidden",!t)}},14733:(t,e,n)=>{"use strict";n(83419),n(82174)},42214:(t,e,n)=>{"use strict";n.d(e,{O5:()=>i});class i{locale;colorPalette;selectionManager;persistProperties;applyJsonFilter;tooltipService;telemetry;authenticationService;hostCapabilities;launchUrl;fetchMoreData;openModalDialog;instanceId;refreshHostData;createLocalizationManager;downloadService;eventService;switchFocusModeState;hostEnv;displayWarningIcon;licenseManager;webAccessService;drill;applyCustomSort;acquireAADTokenService;setCanDrill;storageV2Service;subSelectionService;createOpaqueUtils;constructor(t,e){this.locale=e||"en-US",t?(this.colorPalette=new s(t?t.colors:null),this.colorPalette.isHighContrast=t.isHighContrast,this.colorPalette.foreground=t.foreground,this.colorPalette.foregroundLight=t.foregroundLight,this.colorPalette.foregroundDark=t.foregroundDark,this.colorPalette.foregroundNeutralLight=t.foregroundNeutralLight,this.colorPalette.foregroundNeutralDark=t.foregroundNeutralDark,this.colorPalette.foregroundNeutralSecondary=t.foregroundNeutralSecondary,this.colorPalette.foregroundNeutralSecondaryAlt=t.foregroundNeutralSecondaryAlt,this.colorPalette.foregroundNeutralSecondaryAlt2=t.foregroundNeutralSecondaryAlt2,this.colorPalette.foregroundNeutralTertiary=t.foregroundNeutralTertiary,this.colorPalette.foregroundNeutralTertiaryAlt=t.foregroundNeutralTertiaryAlt,this.colorPalette.foregroundSelected=t.foregroundSelected,this.colorPalette.foregroundButton=t.foregroundButton,this.colorPalette.background=t.background,this.colorPalette.backgroundLight=t.backgroundLight,this.colorPalette.backgroundNeutral=t.backgroundNeutral,this.colorPalette.backgroundDark=t.backgroundDark,this.colorPalette.hyperlink=t.hyperlink,this.colorPalette.visitedHyperlink=t.visitedHyperlink,this.colorPalette.mapPushpin=t.mapPushpin,this.colorPalette.shapeStroke=t.shapeStroke,this.colorPalette.selection=t.selection,this.colorPalette.separator=t.separator,this.colorPalette.negative=t.negative,this.colorPalette.neutral=t.neutral,this.colorPalette.positive=t.positive):this.colorPalette=new s}createSelectionIdBuilder(){return new r}createSelectionManager(){return this.selectionManager}}class r{withCategory(t,e){return this}withSeries(t,e){return this}withMeasure(t){return this}createSelectionId(t=""){return new a(t)}withMatrixNode(t,e){return this}withTable(t,e){return this}}let o=0;class a{key;measures;constructor(t){this.measures=[o++],this.key=t}compareMeasures=(t,e)=>t===e;equals(t){return this===t}includes(t,e){return this===t}getKey(){return this.key}getSelector(){return{}}getSelectorsByColumn(){return{}}hasIdentity(){return!0}}class s{static DefaultColors=[{value:"#01B8AA"},{value:"#374649"},{value:"#FD625E"},{value:"#F2C80F"},{value:"#5F6B6D"},{value:"#8AD4EB"},{value:"#FE9666"},{value:"#A66999"},{value:"#3599B8"},{value:"#DFBFBF"},{value:"#4AC5BB"},{value:"#5F6B6D"},{value:"#FB8281"},{value:"#F4D25A"},{value:"#7F898A"},{value:"#A4DDEE"},{value:"#FDAB89"},{value:"#B687AC"},{value:"#28738A"},{value:"#A78F8F"},{value:"#168980"},{value:"#293537"},{value:"#BB4A4A"},{value:"#B59525"},{value:"#475052"},{value:"#6A9FB0"},{value:"#BD7150"},{value:"#7B4F71"},{value:"#1B4D5C"},{value:"#706060"},{value:"#0F5C55"},{value:"#1C2325"},{value:"#7D3231"},{value:"#796419"},{value:"#303637"},{value:"#476A75"},{value:"#7E4B36"},{value:"#52354C"},{value:"#0D262E"},{value:"#544848"}];colors;colorIndex=0;constructor(t=[]){this.colors=t}getColor(t){let e=this.colors[t];if(e)return e;const n=s.DefaultColors;return e=this.colors[t]=n[this.colorIndex++],this.colorIndex>=n.length&&(this.colorIndex=0),e}isHighContrast;foreground;foregroundLight;foregroundDark;foregroundNeutralLight;foregroundNeutralDark;foregroundNeutralSecondary;foregroundNeutralSecondaryAlt;foregroundNeutralSecondaryAlt2;foregroundNeutralTertiary;foregroundNeutralTertiaryAlt;foregroundSelected;foregroundButton;background;backgroundLight;backgroundNeutral;backgroundDark;hyperlink;visitedHyperlink;mapPushpin;shapeStroke;selection;separator;negative;neutral;positive;reset(){return this}}},40649:(t,e,n)=>{"use strict";n.d(e,{b:()=>s,h:()=>a});var i=n(87674),r=n(1195),o=n(95268);const a="featureFlags";class s extends r.zD{name=a;displayName="Feature Flags";flags=(0,o.Z0)(i.z.ks,{name:"flags",displayName:"",placeholder:"Enter your flags for special features",value:""});groups=[new r.X4({name:`${a}.flags`,displayName:"Flags",collapsible:!1,slices:[this.flags]})]}},92136:(t,e,n)=>{"use strict";n.d(e,{Ur:()=>o,eI:()=>l});var i,r,o,a=n(23242),s=n(82174);!function(t){t[t.SegmentsAggregation=0]="SegmentsAggregation",t[t.SegmentsAggregationStartEnd=1]="SegmentsAggregationStartEnd",t[t.IncrementalUpdate=2]="IncrementalUpdate"}(i||(i={})),function(t){t[t.NoDataToFetch=0]="NoDataToFetch",t[t.UserLimitReached=1]="UserLimitReached",t[t.MemoryLimitReached=2]="MemoryLimitReached",t[t.OneMillionLimitReached=3]="OneMillionLimitReached",t[t.LastPageFetched=4]="LastPageFetched",t[t.Fetching=5]="Fetching"}(r||(r={})),function(t){t[t.None=0]="None",t[t.DataChunk=1]="DataChunk",t[t.PartialData=2]="PartialData",t[t.DataComplete=3]="DataComplete",t[t.Interface=4]="Interface",t[t.Internal=5]="Internal"}(o||(o={}));class l{mode;lastFetchingStatus=r.NoDataToFetch;get segmentIndex(){return this._segmentIndex}_segmentIndex=0;get retrievedRowsCount(){return this._retrievedRowsCount}_retrievedRowsCount=0;constructor(t=i.IncrementalUpdate){this.mode=t}update(t,e=0,n=!0){const l={type:o.None,rowsCount:0,startIndex:0,resetModel:!1,updateModel:!1,hasMoreData:!1},c=t&&t.dataViews&&t.dataViews[0];if(c&&(c.categorical||c.matrix||c.table||c.tree||c.single))if(thisVisual.internalUpdate)l.type=o.Internal,globalThis.thisVisual.internalUpdate=!1;else{if(!(4&(u=t.type)||32&u||16&u||8&u)||function(t){return 2&t}(t.type)){l.hasMoreData=!!t.dataViews[0].metadata.segment,1==t.operationKind?(l.type=o.PartialData,this.mode==i.SegmentsAggregation&&(l.resetModel=!0,l.updateModel=!0)):2==t.operationKind?(l.type=o.DataChunk,l.updateModel=!0):(this.mode==i.SegmentsAggregation||this.mode==i.SegmentsAggregationStartEnd?l.type=o.PartialData:l.type=n?o.DataChunk:o.DataComplete,l.updateModel=!0,l.resetModel=!0,this.resetStatus());let u=0;this.mode==i.IncrementalUpdate&&(c.categorical?(0,a.cK)(c.categorical,"lastMergeIndex")&&(u=c.categorical.lastMergeIndex+1):c.table?(0,a.cK)(c.table,"lastMergeIndex")&&(u=c.table.lastMergeIndex+1):c.matrix&&0!=t.operationKind&&(u+=1)),l.startIndex=u;let h=(0,s.kx)(c)[0];if(h-=u,this._retrievedRowsCount+=h,l.rowsCount=h,n){const n=this.fetchMoreData(t,e);n!=r.LastPageFetched&&n!=r.MemoryLimitReached&&n!=r.OneMillionLimitReached&&n!=r.UserLimitReached||(l.type=o.DataComplete,l.updateModel=!0,this.mode!=i.SegmentsAggregation&&this.mode!=i.SegmentsAggregationStartEnd||(l.resetModel=!0))}else this._segmentIndex=0;return l}l.type=o.Interface}var u;return l}fetchMoreData(t,e){let n=r.NoDataToFetch;return n=t.dataViews[0].metadata.segment?e&&this.retrievedRowsCount>=e?r.UserLimitReached:this.retrievedRowsCount>=1048576?r.OneMillionLimitReached:thisVisual.host.fetchMoreData(this.mode==i.SegmentsAggregation||this.mode==i.SegmentsAggregationStartEnd)?r.Fetching:r.MemoryLimitReached:this.lastFetchingStatus==r.Fetching?r.LastPageFetched:r.NoDataToFetch,this.lastFetchingStatus=n,this._segmentIndex=n==r.Fetching?this._segmentIndex+1:0,n}resetStatus(){this.lastFetchingStatus=r.NoDataToFetch,this._retrievedRowsCount=0,this._segmentIndex=0}}},55357:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(11847),r=n(23242),o=n(93753);class a{static _instance;static get instance(){return a._instance||(a._instance=new this),a._instance}constructor(){if(a._instance)return a._instance;a._instance=this}formatters={};create(t){t.value=0==t.displayUnitSystemType?this.getThresholdValue(t.value):t.displayUnitSystemType;const e=(0,o.Fx)(JSON.stringify(t));if((0,r.cK)(this.formatters,e))return this.formatters[e];const n=i.G2.create(t);return this.formatters[e]=n,n}getThresholdValue(t){if(!isNaN(t)){const e=[1,1e3,1e6,1e9,1e12];for(let n=e.length-1;n>0;n--)if(t>=e[n])return e[n]}return t}}},2629:(t,e,n)=>{"use strict";n.d(e,{a:()=>o});var i=n(6639),r=n(24673);class o extends r.L{get className(){return"icon-picker"}drawDialogContent(t){(0,i.tT)("ul.icons-list",t,this.options.values.map((t=>(0,i.tT)(`li.icon-${t}`,{events:{click:()=>this.change(t)}}))))}updateCell(t,e){t.querySelector(".icon-holder")?.remove(),(0,i.tT)(`.icon-holder.icon-${e}`,t)}}},81807:(t,e,n)=>{"use strict";n.d(e,{C7A:()=>g.C7,CXM:()=>h.CX,Cjg:()=>b.Cj,DvF:()=>o.Dv,Exh:()=>i.E,FT3:()=>P.FT,Fgm:()=>p.F,FxW:()=>a.Fx,GPt:()=>g.GP,HGh:()=>l.H,H_l:()=>h.H_,Ime:()=>r.Im,JYz:()=>o.JY,KGh:()=>C.KG,KTX:()=>y.KT,Ku8:()=>E.Ku,LIG:()=>r.LI,Lzp:()=>o.Lz,O50:()=>A.O5,OU5:()=>_.O,Ozv:()=>b.Oz,PLM:()=>b.PL,PVN:()=>o.PV,Q9G:()=>a.Q9,Rm2:()=>g.Rm,SN4:()=>b.SN,ShP:()=>r.Sh,SxZ:()=>a.Sx,T0G:()=>f.T,TF7:()=>a.TF,ToL:()=>b.To,Urf:()=>O.Ur,VR4:()=>s.VR,WGQ:()=>a.WG,Wk3:()=>k.W,Wx1:()=>c.W,X4n:()=>y.X4,XBB:()=>M.X,XI0:()=>w.X,Z0q:()=>b.Z0,ZA6:()=>m.Z,_dk:()=>P._d,aHV:()=>a.aH,aSW:()=>d.aS,auc:()=>b.au,bOl:()=>D.bO,br9:()=>x.b,cFy:()=>g.cF,cKq:()=>r.cK,dld:()=>r.dl,drk:()=>o.dr,dyA:()=>d.dy,eIO:()=>O.eI,fXq:()=>h.fX,ha8:()=>o.h,hff:()=>o.hf,i2d:()=>k.i,iNF:()=>d.iN,j_G:()=>o.j_,kOW:()=>s.kO,l9n:()=>o.l9,n3N:()=>o.n3,o8B:()=>r.o8,ohM:()=>M.o,pHJ:()=>o.pH,p_R:()=>o.p_,rJE:()=>v.rJ,s54:()=>S.s,sP2:()=>d.sP,skP:()=>T.s,sxo:()=>h.sx,t7l:()=>o.t7,tTh:()=>s.tT,teP:()=>a.te,tj4:()=>v.tj,tzH:()=>C.tz,uRe:()=>a.uR,ukR:()=>r.uk,vMM:()=>r.vM,vm6:()=>h.vm,vxu:()=>p.v,xb8:()=>P.xb,y4v:()=>a.y4,z4e:()=>h.z4,zD3:()=>y.zD,zb:()=>u.zb}),n(21516);var i=n(91665),r=n(23242),o=n(82174),a=n(93753),s=n(6639),l=(n(50641),n(11732)),c=n(40973),u=(n(52009),n(98101)),h=n(23234),d=n(64159),p=n(11425),f=n(4653),g=n(41470),m=n(55357),v=n(6633),y=n(1195),b=n(95268),w=n(18352),S=n(88853),x=n(40649),k=n(29045),C=n(46615),M=n(54181),T=n(76599),E=n(95195),A=n(42214),_=(n(33640),n(33906)),P=(n(77875),n(44810)),D=n(91734),O=n(92136);n(14733)},2446:(t,e,n)=>{"use strict";n.d(e,{R:()=>c,k:()=>l});var i=n(6639),r=n(87790),o=n(55888),a=n(24275);const s=["log","info","warn","error"];function l(t){return s.includes(t)}class c{messages={};splitInstance;element;contentElement;exportButton;focusButton;isVisible=!1;currentTypes=["warn","error"];get isInFocus(){return this._isInFocus}set isInFocus(t){this._isInFocus=t,this.focusButton?.toggleAttribute("disabled",t)}_isInFocus=!1;constructor(){this.draw()}draw(){this.element&&this.element.remove(),this.element=(0,i.tT)(".inline-console-container",document.body,[(0,i.tT)(".non-console"),(0,i.tT)(".console-gutter"),(0,i.tT)(".console",{style:{minHeight:"27px"}},[(0,i.tT)(".console-toolbar",[(0,i.tT)(".title","Console"),(0,i.tT)("select.level",{list:[{value:"log,info,warn,error",text:"All"},{value:"warn,error",text:"Errors",selected:!0},{value:"log,info",text:"Log"}],events:{change:(t,e)=>this.updateTypeFilter(e.value)}}),(0,i.tT)(".buttons",[(0,i.tT)(".icon.icon-save",{attr:{hidden:"true",disabled:"true",title:"Export Log"},middleware:t=>this.exportButton=t,events:{click:(t,e)=>{e.hasAttribute("disabled")||this.export()}}}),(0,i.tT)(".icon.icon-clear",{attr:{title:"Clear Log"},events:{click:()=>this.clear()}}),(0,i.tT)(".icon.icon-full-screen2",{middleware:t=>this.focusButton=t,attr:{title:"Expand Log",disabled:this.isInFocus},events:{click:(t,e)=>{e.hasAttribute("disabled")||this.expand()}}}),(0,i.tT)(".close.icon.icon-close",{attr:{title:"Hide Log"},events:{click:()=>this.toggle(!1)}})])]),(0,i.tT)(".console-content",{middleware:t=>this.contentElement=t})])]),this.splitInstance=(0,o.A)({rowGutters:[{track:1,element:this.element.querySelector(".console-gutter")}],rowMinSize:27}),thisVisual.host.downloadService.exportStatus().then((t=>{0===t&&this.exportButton.toggleAttribute("hidden",!1)}))}updateTypeFilter(t){this.currentTypes=t.split(","),this.contentElement.textContent="",Object.keys(this.messages).forEach((t=>{this.currentTypes.some((e=>t.startsWith(e)))&&this.messages[t].forEach((t=>this.renderMessage(t)))}))}addMessage(t,e){if(!this.contentElement)return;(0,a.b)(e)&&(e={name:e.name,message:e.message,stack:e.stack,...e.cause?{cause:e.cause}:{}});const n=`${t}|${(new Date).getTime()}`;this.messages[n]||(this.messages[n]=[]),this.messages[n].push(e),this.exportButton.toggleAttribute("disabled",!1),this.currentTypes.find((e=>e==t))&&this.renderMessage(e),this.toggle(!0)}renderMessage(t){const e=0==this.contentElement.childElementCount,n=Math.abs(this.contentElement.scrollHeight-this.contentElement.scrollTop-this.contentElement.clientHeight)<1;if((0,a.b)(t))(0,i.tT)(".json-formatter-row",this.contentElement,[(0,i.tT)("span.icon.icon-marker-error"),(0,i.tT)("span.json-formatter-error",t.stack)]);else{const e=new r.A(t,0,{hoverPreviewEnabled:!1,animateClose:!1,animateOpen:!1,exposePath:!0,useToJSON:!1}).render();this.contentElement.appendChild(e)}(e||n)&&(this.contentElement.scrollTop=this.contentElement.scrollHeight)}export(){const t=JSON.stringify(this.messages,null,2);thisVisual.host.downloadService.exportVisualsContentExtended(t,`log-${(new Date).getTime()}.json`,"json","Visual Log")}clear(){this.messages={},this.exportButton.toggleAttribute("disabled",!0),this.contentElement&&(this.contentElement.textContent="")}expand(){thisVisual.host.switchFocusModeState(!0),this.element.style.gridTemplateRows="27px 8px auto"}toggle(t){null==t&&(t=!this.isVisible),t?this.reveal():this.conceal()}reveal(t=400){this.isVisible||(this.element.animate([{bottom:"-100%"},{bottom:0}],{duration:t,iterations:1,easing:"ease-in-out",fill:"forwards"}),this.isVisible=!0)}conceal(t=400){this.isVisible&&(this.element.animate([{bottom:"-100%"}],{duration:t,iterations:1,easing:"ease-in-out",fill:"forwards"}).onfinish=()=>{this.isVisible=!1})}remove(){this.conceal(400),setTimeout((()=>{this.destroy()}),450)}destroy(){this.messages={},this.splitInstance.destroy(),this.splitInstance=null,this.element?.remove(),this.element=null,this.focusButton=null,this.exportButton=null,this.contentElement=null}}},95195:(t,e,n)=>{"use strict";n.d(e,{Ku:()=>a});var i=n(4653),r=n(6639),o=n(93753);class a extends i.T{data;element;options;constructor(t){super(),this.options={title:null,size:null,modal:!0,scale:1,buttons:[],middleware:null,...t};const e=t=>{if("Escape"==t.key)this.trigger("action","cancel"),t.stopPropagation();else if(this.options.buttons)for(let e=0;e<this.options.buttons.length;e++){const n=this.options.buttons[e];if(n.key&&t.key==n.key){this.trigger("action",n.action),t.stopPropagation();break}}};this.element=(0,r.tT)(".inline-dialog",{events:{click:()=>{this.options.modal||this.trigger("action","cancel")},keydown:t=>e(t)}});const n=(0,r.tT)(".content",this.element,{style:{transform:`scale(${1/this.options.scale})`},events:{click:t=>t.stopPropagation()}});this.options.size&&(this.options.size.width&&(n.style.width=`${this.options.size.width}px`),this.options.size.height&&(n.style.height=`${this.options.size.height}px`));const i=(0,r.tT)("header",n);this.options.title&&(0,r.tT)("h1.title",i,this.options.title),(0,r.tT)("a.close.control.icon-close.solo",i,{attr:{href:"#"},events:{click:t=>{t.preventDefault(),this.trigger("action","cancel")}}}),(0,r.tT)(".body",n,{middleware:t=>this.options.middleware(t,this)}),(0,r.tT)("footer",n,{middleware:t=>{this.options.buttons&&this.options.buttons.forEach((e=>{(0,r.tT)(`#${(0,o.aH)(e.name)}.btn${e.className?`.${e.className}`:""}${e.disabled?".disabled":""}`,t,{data:{action:e.action},events:{click:t=>{t.preventDefault();const e=t.target;e.classList.contains("disabled")||this.trigger("action",e.dataset.action)}}},e.name)}))}})}show(){return document.body.appendChild(this.element),new Promise(((t,e)=>{this.on("action",(n=>{this.onAction(n,t,e)}))}))}hide(){this.element.classList.add("out")}destroy(){this.hide(),window.setTimeout((()=>{document.body.removeChild(this.element),this.element=null,super.destroy()}),300)}enableButton(t,e){if(this.options.buttons){const n=(0,r.VR)(`#${(0,o.aH)(t)}`,this.element);n.isNull||(e?n.classList.remove("disabled"):n.classList.add("disabled"))}}onAction(t,e,n){this.destroy(),e({action:t,data:this.data})}}},31337:(t,e,n)=>{"use strict";n.d(e,{c:()=>h});var i=n(10246),r=n(97757),o=n(6639),a=n(76599),s=n(2629),l=n(91734),c=n(46615),u=n(23234);class h{config;static Id="okvizLegend";static Size={width:400,height:450};dialogHost;result;colorPicker;constructor(t,e){this.config=e,this.dialogHost=t.host,this.result={},this.initColorPicker(),this.draw()}initColorPicker(){this.colorPicker=new a.s(this.config.colorPalette),this.colorPicker.on("change",(t=>{const e=t.id.replace("color-",""),n=this.config.items.find((t=>(0,u.z4)(t.key)===e));n&&(n.color=t.color,this.setResults(this.config.items))}))}draw(){document.querySelector(".legend-dialog")?.remove();const t=(0,o.tT)(".legend-dialog",document.body,[(0,o.tT)("header",[(0,o.tT)(".title","Legend Editor"),(0,o.tT)(".controls",[(0,o.tT)(".ctrl.icon-sort2",{attr:{title:"Sort items"},events:{click:t=>this.showSortingMenu(t)}}),(0,o.tT)(".ctrl.icon-reset",{attr:{title:"Reset to default"},events:{click:()=>this.reset()}})])])]),e=(0,o.tT)("ul.legend-items",t,this.config.items?.map((t=>this.drawItem(t)))),n=new i.Ay(e,{direction:"vertical",animation:150,handle:".handle",dataIdAttr:"data-key",ghostClass:"ghost",dragClass:"dragging",onEnd:()=>{const t=n.toArray();this.config.sorting="custom",this.config.items=t.map((t=>this.config.items.find((e=>e.key===t)))),this.setResults(this.config.items,this.config.sorting)}});this.listen()}listen(){document.body.addLiveEventListener("input",".legend-item .label input",((t,e)=>{const n=e.closest(".legend-item");if(!n)return;const i=n.dataset.key,r=this.config.items.find((t=>t.key===i));if(r){const t=e.value;t!==r.key?r.label=t:delete r.label,this.setResults(this.config.items)}})),document.body.addLiveEventListener("click",".ctrl.visibility",((t,e)=>{const n=e.closest(".legend-item");if(!n)return;const i=n.dataset.key,r=this.config.items.find((t=>t.key===i));r&&(r.hidden=!r.hidden,n.classList.toggle("exclude",r.hidden),this.setResults(this.config.items))}))}drawItem(t){const e=this.colorPicker.dom({id:`color-${(0,u.z4)(t.key)}`,nullable:!1,color:t.color,colorEnd:t.colorEnd,readonly:t.static}),n=new s.a({id:`icon-${(0,u.z4)(t.key)}`,value:(0,l.LO)(t.icon),values:r.V});return n.on("change",(t=>{const e=this.config.items.find((t=>(0,u.z4)(t.key)===n.id.replace("icon-","")));e&&(e.icon=(0,l.xH)(t),this.setResults(this.config.items))})),(0,o.tT)("li.legend-item"+(t.hidden?".exclude":""),{data:{key:t.key}},[(0,o.tT)(".handle.icon-sort"),(0,o.tT)(".legend-icon",[n.dom()]),(0,o.tT)(".color",[e]),(0,o.tT)(".label",[(0,o.tT)("input",{attr:{type:"text",value:t.label||t.key}})]),(0,o.tT)(".controls",[(0,o.tT)(".ctrl.visibility.icon-visible",{attr:{title:"Toggle Visibility in Legend"}})])])}showSortingMenu(t){c.tz.Init("sort-context-menu",{sticky:t.currentTarget,items:[{label:"Sort",type:c.KG.Header},{type:c.KG.Radio,label:"Default",checked:!this.config.sorting,onClick:()=>this.sort()},{type:c.KG.Radio,label:"Ascending",checked:"asc"==this.config.sorting,onClick:()=>this.sort("asc")},{type:c.KG.Radio,label:"Descending",checked:"desc"==this.config.sorting,onClick:()=>this.sort("desc")},{type:c.KG.Separator},{type:c.KG.Radio,label:"Custom",enabled:"custom"==this.config.sorting,checked:"custom"==this.config.sorting}]}).show(t)}sort(t){this.config.sorting=t,this.config.items="asc"===t?this.config.items.sort(((t,e)=>(t.label||t.key).localeCompare(e.label||e.key))):"desc"===t?this.config.items.sort(((t,e)=>(e.label||e.key).localeCompare(t.label||t.key))):this.config.items.sort(((t,e)=>this.config.defaultItems.findIndex((e=>e.key===t.key))-this.config.defaultItems.findIndex((t=>t.key===e.key)))),this.setResults(null,t),this.draw()}setResults(t,e){t&&(this.result.items=t),e&&(this.result.sorting=e),this.dialogHost.setResult(this.result)}reset(){this.config.sorting="",this.config.items=this.config.defaultItems,this.setResults([],this.config.sorting),this.draw()}}globalThis.dialogRegistry=globalThis.dialogRegistry||{},globalThis.dialogRegistry[h.Id]=h},97757:(t,e,n)=>{"use strict";n.d(e,{V:()=>i});const i=["circle","ring","square","line-h","line-v","up","down","blank"]},91734:(t,e,n)=>{"use strict";n.d(e,{LO:()=>u,bO:()=>c,xH:()=>h});var i=n(31337),r=n(6639),o=n(93753),a=n(23242),s=n(18352),l=n(23234);class c{selectionManager;static MAX_ITEMS=100;config;legendElement;editControl;items;defaultItems;constructor(t,e){this.selectionManager=e,this.config={isInteractive:!0,isEditable:!0,showTitle:!1,titlePosition:"inline",titleColor:"#000",showItemsIcon:!0,showItemsLabel:!0,itemsIcon:"circle",itemsLabelColor:"#000",borderWidth:1,position:"bottom",alignment:"left",showScrollbar:!1,itemsWordWrap:!1,maxItems:30,...t};const n=[...this.config.staticItems?this.config.staticItems:[],...this.getItemsFromColumn()];this.defaultItems=(0,a.o8)(n),this.items=this.applyUserSettings(n)}draw(t,e=1){let n=this.items?.filter((t=>!t.hidden));if(!n.length)return;this.config.maxItems&&(n=n.slice(0,this.config.maxItems));const i={family:o.Q9,size:14,bold:!0,...this.config.titleFont},a={family:o.Q9,size:12,...this.config.itemsFont},s=u(this.config.itemsIcon),l="left"==this.config.alignment?"flex-start":"center"==this.config.alignment?"center":"flex-end";this.config.isEditable&&(this.editControl=(0,r.tT)(".edit-control",{attr:{title:"Customize Legend"},events:{click:()=>this.showDialog()}},[(0,r.tT)(".icon-edit.solo")])),this.legendElement=(0,r.tT)(`.legend${this.config.className?`.${this.config.className}`:""}.pos-${this.config.position}${this.config.showScrollbar?".scrollable":""}${this.config.isInteractive?".interactive":""}${this.config.itemsWordWrap?"":".nowrap"}`,{style:{flexWrap:"wrap",flexDirection:"top"==this.config.position||"bottom"==this.config.position?"row":"column",justifyContent:l,color:this.config.itemsLabelColor,fontSize:`${a.size}px`,fontFamily:a.family,fontWeight:a.bold?"bold":"normal",fontStyle:a.italic?"italic":"normal",textDecoration:a.underline?"underline":"none",backgroundColor:this.config.backgroundColor,...this.config.borderColor?{border:`${this.config.borderWidth}px solid ${this.config.borderColor}`}:{},maxHeight:"top"!=this.config.position&&"bottom"!=this.config.position||!this.config.maxSize?void 0:`${this.config.maxSize}px`,maxWidth:"left"!=this.config.position&&"right"!=this.config.position||!this.config.maxSize?void 0:`${this.config.maxSize}px`,height:"top"!=this.config.position&&"bottom"!=this.config.position||!this.config.size?void 0:`${this.config.size}px`,width:"left"!=this.config.position&&"right"!=this.config.position||!this.config.size?void 0:`${this.config.size}px`}},[...this.config.showTitle?[(0,r.tT)(".legend-title"+("top"==this.config.titlePosition?".wide":""),{style:{justifyContent:"top"==this.config.position||"bottom"==this.config.position?l:void 0,color:this.config.titleColor,fontSize:`${i.size}px`,fontFamily:i.family,fontWeight:i.bold?"bold":"normal",fontStyle:i.italic?"italic":"normal",textDecoration:i.underline?"underline":"none"}},[(0,r.tT)("span",this.config.title),this.editControl])]:[],...n.map((t=>(0,r.tT)(".legend-item"+(t.selectionIds?.length?"":".no-selector"),{attr:{title:void 0!==t.tooltip?t.tooltip||void 0:t.label||t.key},style:{...this.config.itemsSize?{width:`${this.config.itemsSize}px`}:{},...this.config.itemsMaxSize?{maxWidth:`${this.config.itemsMaxSize}px`}:{}},data:{key:t.key}},[...this.config.showItemsIcon&&"blank"!=t.icon?[(0,r.tT)(`.icon.icon-${t.icon?u(t.icon):s}`,{style:{fontSize:`${this.config.itemsIconSize||a.size}px`,...t.colorEnd?{background:`linear-gradient(90deg, ${t.color}, ${t.colorEnd})`,webkitBackgroundClip:"text",webkitTextFillColor:"transparent"}:{color:t.color}}})]:[],...this.config.showItemsLabel?[(0,r.tT)(".label",t.label||t.key)]:[]]))),...!this.config.showTitle&&this.config.isEditable?[this.editControl]:[]]),t.prepend(this.legendElement),"right"==this.config.position?t.style.flexDirection="row-reverse":"left"==this.config.position?t.style.flexDirection="row":"top"==this.config.position?t.style.flexDirection="column":"bottom"==this.config.position&&(t.style.flexDirection="column-reverse"),this.listen(),this.updateScale(e)}clearSelection(){this.config.isInteractive&&this.legendElement&&(this.legendElement.querySelectorAll(".legend-item").forEach((t=>{t.classList.toggle("selected",!1)})),this.legendElement.classList.toggle("has-selection",!1))}select(t){if(!this.config.isInteractive||!this.legendElement)return;let e=!1;this.items.forEach((n=>{let i=!1;t.forEach((t=>{n.selectionIds?.some((e=>e.equals(t)))&&(i=!0,e=!0)})),this.legendElement.querySelector(`.legend-item[data-key="${(0,l.z4)(n.key)}"]`)?.classList.toggle("selected",i)})),this.legendElement.classList.toggle("has-selection",e)}showDialog(){const t=t=>{const e=(this.config.maxItems||c.MAX_ITEMS)+this.items.filter((t=>t.hidden)).length;return t.slice(0,e).map((t=>(0,a.cJ)(t,"selectionIds")))};thisVisual.host.openModalDialog(i.c.Id,{title:"",actionButtons:[1,2],size:i.c.Size},{colorPalette:thisVisual.host.colorPalette,defaultItems:t(this.defaultItems),items:t(this.items),sorting:this.config.userSettings?.sorting}).then((t=>{1==t.actionId?this.saveUserSettings(t.resultState):this.saveUserSettings()})).catch((t=>{t.error&&3==t.error&&(0,a.Sh)()}))}saveUserSettings(t){s.X.save({objectName:"legend",properties:{...t?{custom:{column:this.config.column?.source.queryName,items:t.items,sorting:t.sorting}}:{},showDialog:!1},selector:null},!1)}listen(){this.config.isInteractive&&(this.legendElement.addLiveEventListener("click",".legend-item .label, .legend-item .icon",((t,e)=>{const n=e.closest(".legend-item"),i=n.dataset.key;if(!i)return;const r=this.items.find((t=>t.key===i));r&&this.onItemClick(r,n.classList.contains("selected"),t.ctrlKey||t.metaKey)})),this.legendElement.addEventListener("click",(t=>{t.target.classList.contains("legend-item")&&(this.selectionManager?.clear(),this.clearSelection())})))}async onItemClick(t,e,n){if(this.config.isInteractive&&this.selectionManager){if(t.selectionIds?.length){const i=await this.selectionManager.select(t.selectionIds,n||e);this.select(i)}this.config.onItemClick&&this.config.onItemClick(t)}}updateScale(t){this.editControl&&(this.editControl.style.transform=`scale(${1/t})`)}getColorFromPalette(t,e,n){return globalThis.legendPalette||(globalThis.legendPalette={}),globalThis.legendPalette[t]||(globalThis.legendPalette[t]={}),globalThis.legendPalette[t][e]||(globalThis.legendPalette[t][e]=globalThis.thisVisual.host.colorPalette.getColor(`${n??e}`).value),globalThis.legendPalette[t][e]}getColorFromItem(t){const e=this.items.find((e=>e.key===t));return e?.color}getItemsFromColumn(){const t={};if(this.config.column){const e=this.config.column.source.queryName;let n=0;this.config.column.values?.forEach(((i,r)=>{const o=`${i}`;if(!t[o]){const i=this.getColorFromPalette(e,o,n);t[o]={key:o,icon:this.config.itemsIcon,color:i,selectionIds:[]},n++}this.config.isInteractive&&t[o].selectionIds.push(thisVisual.host.createSelectionIdBuilder().withCategory(this.config.column,r).createSelectionId())}))}return Object.values(t)}applyUserSettings(t){this.config.userSettings?.column!==this.config.column?.source.queryName&&this.config.userSettings?.items&&(this.config.userSettings.items=this.config.userSettings.items.filter((t=>!t.static))),this.config.userSettings?.items?.forEach((e=>{try{const n=t.find((t=>t.key===e.key));n?Object.assign(n,e):(e.static||e.user)&&t.push(e)}catch(t){}}));try{"asc"==this.config.userSettings?.sorting?t.sort(((t,e)=>(t.label||t.key).localeCompare(e.label||e.key))):"desc"==this.config.userSettings?.sorting?t.sort(((t,e)=>(e.label||e.key).localeCompare(t.label||t.key))):"custom"==this.config.userSettings?.sorting&&this.config.userSettings.items&&t.sort(((t,e)=>this.config.userSettings.items.findIndex((e=>e.key===t.key))-this.config.userSettings.items.findIndex((t=>t.key===e.key))))}catch(t){}return t}destroy(){this.legendElement?.remove(),this.legendElement=null}}function u(t){return t??"circle"}function h(t){return t??"circle"}},24275:(t,e,n)=>{"use strict";function i(t){return t instanceof Error||t&&t.message}n.d(e,{b:()=>i})},44810:(t,e,n)=>{"use strict";n.d(e,{FT:()=>y,Oq:()=>S,_d:()=>w,qk:()=>x,xb:()=>m.x});var i=n(4653),r=n(6639),o=n(23234),a=(n(53394),n(13838)),s=n(14215),l=n(82140),c=n(30137),u=n(27512),h=n(2909),d=n(81710),p=n(52649),f=n(11650),g=n(24054),m=n(2292),v=n(32017);class y extends i.T{config;viewPortScale;panel;contentElement;components={};get state(){const t={};if(this.components)for(const e in this.components){const n=this.components[e];n instanceof l.c?null!=n.value&&(t[e]=n.value):(n instanceof a.y||n instanceof s.F)&&n.hasToggle&&null!=n.disabled&&(t[e]=Array.isArray(n.disabled)?n.disabled.map((t=>!t)):!n.disabled)}return t}get interfaceState(){const t={scroll:{left:this.contentElement?.scrollLeft??0,top:this.contentElement?.scrollTop??0},components:{}};if(this.components)for(const e in this.components){const{collapsed:n}=this.components[e],i={};null!=n&&(i.collapsed=n),Object.keys(i).length>0&&(t.components[e]=i)}return t}constructor(t,e=1){super(),this.config=t,this.viewPortScale=e}draw(t){this.panel&&this.panel.remove(),this.panel=(0,r.tT)(".on-object-panel",t,[(0,r.tT)(".top-content",{middleware:t=>this.contentElement=t})]),b(this.config,((t,e,n,i)=>("group"===t.type?this.createGroup(t,i,e):"slice"===t.type?this.createSlice(t,i,e,n):this.createOption(t,i,e)).contentElement),this.contentElement),this.updateScale(this.viewPortScale),this.contentElement.addEventListener("scroll",(()=>{this.trigger("interface")}))}createGroup(t,e,n){const i=new a.y({collapsed:!0,...t,path:n,hasChildren:t.children?.length>0,onCollapse:e=>this.onComponentCollapse(t,e),onToggle:e=>this.onComponentToggle(t,e),onReset:()=>this.onGroupReset(t)});return i.render(e),this.components[n]=i,i}createSlice(t,e,n,i=0){const r=new s.F({collapsed:t.title&&i>0,...t,path:n,hasChildren:t.children?.length>0,onCollapse:e=>this.onComponentCollapse(t,e),onToggle:e=>this.onComponentToggle(t,e)});return r.render(e),this.components[n]=r,r}createOption(t,e,n){const i=e=>this.onOptionChange(t,e),r=(e=>{switch(t.optionType){case"number":return new u.V({...e,path:n,onChange:i});case"switch":return new c.u({...e,path:n,onChange:i});case"select":return new p.W({...e,path:n,onChange:i});case"input":return new h.S({...e,path:n,onChange:i});case"color":return new f.B({...e,path:n,onChange:i});case"radio":return new g.D({...e,path:n,onChange:i});case"font":return new m.X({...e,path:n,onChange:i});case"text":return new d.t({...e,path:n})}})(t);return r.render(e),this.components[n]=r,r}onOptionChange(t,e){t.onChange&&t.onChange(e),this.applyVisibility(),this.trigger("change")}onComponentToggle(t,e){t.onToggle&&t.onToggle(e),this.applyVisibility(),this.trigger("change")}onComponentCollapse(t,e){t.onCollapse&&t.onCollapse(e),this.trigger("interface")}onGroupReset(t){for(const e in this.components)e.startsWith(t.name)&&this.components[e].reset();t.onReset&&t.onReset(),this.trigger("change")}updateState(t){for(const e in t){const n=this.components[e];n instanceof l.c?n.update(t[e]):(n instanceof a.y||n instanceof s.F)&&n.toggle(t[e]),this.applyVisibility(n,t)}}applyVisibility(t,e){const n=t?{[t.path]:t}:this.components;e||(e=this.state);for(const t in n){const i=w(this.config,t);i?.visibleIf&&n[t].toggleVisibility(i.visibleIf(e))}}restoreState(){for(const t in this.components)this.components[t].reset();this.applyVisibility()}restoreInterfaceState(t){for(const e in t.components){const n=this.components[e];if(n){const{collapsed:i}=t.components[e];null!=i&&n.toggleCollapse(i)}}this.contentElement&&(this.contentElement.scrollLeft=t.scroll.left,this.contentElement.scrollTop=t.scroll.top)}updateScale(t){this.viewPortScale=t,this.panel&&(0,o.vm)(this.panel,`scale(${Math.min(1,1/t)})`)}destroy(){this.panel&&(this.panel.remove(),this.panel=null),this.components={},super.destroy()}}function b(t,e,n,i=""){t.forEach(((t,r)=>{const o=i?`${i}.${t.name}`:t.name,a=e(t,o,r,n);!1!==a&&t.children&&b(t.children,e,a,o)}))}function w(t,e){let n;return b(t,((t,i)=>{if(i===e)return n=t,!1})),n}function S(t){return Array.isArray(t)&&t.some((e=>!v(e,t[0])))}const x="_MIXED_"},53394:(t,e,n)=>{"use strict";n.d(e,{i:()=>s});var i=n(6639),r=n(11732),o=n(23242),a=n(44810);class s{name;title;description;hidden;initialHidden;disabled;initialDisabled;collapsed;hasToggle;hasChildren;hasReset;resetTitle="Reset to default";element;contentElement;onToggle;onCollapse;onReset;path;get className(){return"oop-component"}get isDisabled(){return Array.isArray(this.disabled)?!!(0,a.Oq)(this.disabled)||!0===this.disabled[0]:!0===this.disabled}constructor(t){Object.assign(this,t),this.initialDisabled=this.isDisabled,this.initialHidden=this.hidden}render(t){let e=this.className;e.startsWith(".")&&(e=e.slice(1)),this.element=(0,i.tT)(`.${e}${this.hasChildren&&this.collapsed?".collapsed":""}${this.hidden?".hidden":""}${this.title?"":".noheader"}`,t,[...this.title?[(0,i.tT)(".header"+(this.hasChildren?".collapser":""),{attr:{...this.description?{title:this.description}:{}},events:{...this.hasChildren?{click:(t,e)=>{e.classList.contains("oop-toggle-switch")||e.closest(".oop-toggle-switch")||(this.toggleCollapse(),this.onCollapse&&this.onCollapse(this.collapsed))}}:{}}},[(0,i.tT)(".title"+(this.hasChildren?".chevron.icon":""),[(0,i.tT)("span",this.title)]),(0,i.tT)(".notice.icon-alert",{attr:{hidden:!0}}),...this.hasToggle?[(0,r.H)(".oop-toggle-switch.small",null,{checked:!this.isDisabled,change:(t,e)=>{t.preventDefault(),this.disabled=!e,this.contentElement?.toggleAttribute("disabled",this.disabled),this.hasChildren&&(this.toggleCollapse(!e),this.onCollapse&&this.onCollapse(!e)),this.onToggle&&this.onToggle(e)}})]:[]])]:[],...this.hasChildren?[(0,i.tT)(".content",{attr:{...this.isDisabled?{disabled:!0}:{}},middleware:t=>this.contentElement=t}),...this.hasReset?[(0,i.tT)(".oop-reset.oop-action.icon-reset",this.element,{events:{click:()=>{this.reset(),this.onReset&&this.onReset()}}},this.resetTitle)]:[]]:[]])}reset(){this.toggle(!0!==this.initialDisabled),this.toggleVisibility(!0!==this.initialHidden)}toggleNotice(t,e=!1){const n=this.element.querySelector(".notice");n&&(n.setAttribute("title",t),n.toggleAttribute("hidden",!t),this.hasToggle&&this.element.querySelector(".oop-toggle-switch .switch")?.classList.toggle("readonly",e))}toggleVisibility(t){this.element&&(this.hidden=null!=t?!t:!this.hidden,this.element.classList.toggle("hidden",this.hidden))}toggleCollapse(t){this.element&&this.hasChildren&&(this.collapsed=t??!this.collapsed,this.element.classList.toggle("collapsed",this.collapsed))}toggle(t){if(this.element&&(null==t&&(t=this.isDisabled),this.disabled=(0,o.cy)(t)?t.map((t=>!t)):!t,this.contentElement?.toggleAttribute("disabled",this.isDisabled),this.hasToggle)){const t=this.element.querySelector(".oop-toggle-switch");t.querySelector("input").checked=!this.isDisabled,t.querySelector(".switch").classList.toggle("partial",(0,a.Oq)(this.disabled))}}destroy(){this.element?.remove()}}},13838:(t,e,n)=>{"use strict";n.d(e,{y:()=>r});var i=n(53394);class r extends i.i{get className(){return"oop-group"}}},11650:(t,e,n)=>{"use strict";n.d(e,{B:()=>o});var i=n(76599),r=n(82140);class o extends r.c{showEmpty=!1;constructor(t){t.optionType="color",super(t),Object.assign(this,t)}render(t){super.render(t);const e=new i.s;e.dom({id:`oop-color-${this.path}`,nullable:this.showEmpty,color:this.displayValue},this.element),e.on("change",(t=>{this.value=t.color,this.onChange&&this.onChange(t.color)}))}refresh(){const t=this.element.querySelector("input");t&&(t.value=this.displayValue)}}},2292:(t,e,n)=>{"use strict";n.d(e,{X:()=>l,x:()=>s});var i=n(6639),r=n(50641),o=n(44810),a=n(82140);const s={Arial:"Arial","Arial Black":"'Arial Black'","Arial Unicode MS":"'Arial Unicode MS'",Calibri:"Calibri",Cambria:"Cambria","Cambria Math":"'Cambria Math'",Candara:"Candara","Comic Sans MS":"'Comic Sans MS'",Consolas:"Consolas",Constantia:"Constantia",Corbel:"Corbel","Courier New":"'Courier New'",Georgia:"Georgia","Lucida Sans Unicode":"'Lucida Sans Unicode'","Segoe (Bold)":"'Segoe UI Bold', wf_segoe-ui_bold, helvetica, arial, sans-serif","Segoe UI":"'Segoe UI', wf_segoe-ui_normal, helvetica, arial, sans-serif","Segoe UI Light":"'Segoe UI Light', wf_segoe-ui_bold, helvetica, arial, sans-serif",Symbol:"Symbol",Tahoma:"Tahoma","Times New Roman":"'Times New Roman'","Trebuchet MS":"'Trebuchet MS'",Verdana:"Verdana",Wingdings:"Wingdings"};class l extends a.c{familyOptions=s;min=0;max=200;placeholder;showFamily=!0;showSize=!0;showToggles=!0;constructor(t){t.optionType="font",super(t),Object.assign(this,t),this.value||(this.value={},this.initialValue=this.value)}render(t){super.render(t);const e=this.displayValue;(0,i.tT)(".oop-font",this.element,[...this.showFamily?[(0,i.tT)("select.oop-font-family",t,{list:[{value:o.qk,text:"(Mixed)",disabled:!0,hidden:!0},...Object.keys(this.familyOptions).map((t=>({value:this.familyOptions[t],text:t,selected:this.familyOptions[t]===e.family})))],events:{change:(t,e)=>{this.value=(Array.isArray(this.value)?this.value[0]:this.value)||{},this.value.family=e.value,this.onChange&&this.onChange(this.value)}}})]:[],...this.showSize?[(0,r.W)(".oop-font-size",t,{min:this.min,max:this.max,step:1,upDown:!0,value:e.size,placeholder:this.placeholder,change:(t,e)=>{this.value=(Array.isArray(this.value)?this.value[0]:this.value)||{},this.value.size=e,this.onChange&&this.onChange(this.value)}})]:[],...this.showToggles?[(0,i.tT)(".oop-toggles",[(0,i.tT)(".oop-font-bold.oop-toggle.icon-bold"+(e.bold?".selected":""),{attr:{title:"Bold"},events:{click:(t,e)=>{this.value=(Array.isArray(this.value)?this.value[0]:this.value)||{},this.value.bold=!this.value.bold,e.classList.toggle("selected",this.value.bold),this.onChange&&this.onChange(this.value)}}}),(0,i.tT)(".oop-font-italic.oop-toggle.icon-italic"+(e.bold?".selected":""),{attr:{title:"Italic"},events:{click:(t,e)=>{this.value=(Array.isArray(this.value)?this.value[0]:this.value)||{},this.value.italic=!this.value.italic,e.classList.toggle("selected",this.value.italic),this.onChange&&this.onChange(this.value)}}}),(0,i.tT)(".oop-font-underline.oop-toggle.icon-underline"+(e.underline?".selected":""),{attr:{title:"Underline"},events:{click:(t,e)=>{this.value=(Array.isArray(this.value)?this.value[0]:this.value)||{},this.value.underline=!this.value.underline,e.classList.toggle("selected",this.value.underline),this.onChange&&this.onChange(this.value)}}})])]:[]])}refresh(){const t=this.displayValue,e=this.isMixed;if(this.showFamily){const n=this.element.querySelector(".oop-font-family");if(n){const i=n.querySelector(`option[value="${o.qk}"]`);i&&(i.hidden=!e),n.value=e?o.qk:t?.family||""}}if(this.showSize){const e=this.element.querySelector(".oop-font-size input");e&&(e.value=t?.size?.toString()||"",e.placeholder=this.isMixed?"(Mixed)":this.placeholder||"")}if(this.showToggles){const e=this.element.querySelector(".oop-font-bold");e&&e.classList.toggle("selected",t?.bold);const n=this.element.querySelector(".oop-font-italic");n&&n.classList.toggle("selected",t?.italic);const i=this.element.querySelector(".oop-font-underline");i&&i.classList.toggle("selected",t?.underline)}}}},2909:(t,e,n)=>{"use strict";n.d(e,{S:()=>o});var i=n(6639),r=n(82140);class o extends r.c{inputType="text";placeholder;constructor(t){t.optionType="input",super(t),Object.assign(this,t)}render(t){super.render(t),(0,i.tT)("input.oop-input",this.element,{attr:{type:this.inputType,value:this.displayValue||"",placeholder:this.placeholder||""},events:{input:(t,e)=>{this.value=e.value,this.onChange&&this.onChange(this.value)}}})}refresh(){const t=this.element.querySelector("input");t&&(t.value=this.displayValue||"",t.placeholder=this.isMixed?"(Mixed)":this.placeholder||"")}}},27512:(t,e,n)=>{"use strict";n.d(e,{V:()=>a});var i=n(6639),r=n(50641),o=n(82140);class a extends o.c{min;max;step;round=!0;suffix;placeholder;hasSlider;inputElement;sliderElement;constructor(t){t.optionType="number",super(t),Object.assign(this,t)}render(t){super.render(t);const e=this.displayValue,n=null!=e&&this.round?Math.round(e):e;(0,i.tT)(".oop-number",this.element,[(0,r.W)("",null,{min:this.min,max:this.max,step:this.step,suffix:this.suffix,placeholder:this.placeholder||"",upDown:!0,value:n,change:(t,e)=>{this.value=this.sanitizeValue(e),this.updateValue(this.value),this.onChange&&this.onChange(this.value)},middleware:t=>this.inputElement=t.querySelector("input")}),...this.hasSlider?[(0,i.tT)(".slider-container",[(0,i.tT)("input",{attr:{type:"range",min:this.min,max:this.max,value:n},events:{input:(t,e)=>{this.value=this.sanitizeValue(e.value),this.updateValue(this.value),this.onChange&&this.onChange(this.value)}},middleware:t=>this.sliderElement=t})])]:[]]),this.updateTrack()}sanitizeValue(t){return"string"==typeof t&&(t=parseFloat(t)),null!=t&&(t=Math.max(this.min||-1/0,Math.min(this.max||1/0,t)),this.round&&(t=Math.round(t))),t}refresh(){this.updateValue(this.sanitizeValue(this.displayValue));const t=this.isMixed;this.inputElement.placeholder=t?"(Mixed)":this.placeholder||"",this.element.querySelector(".input-buttons").toggleAttribute("disabled",t)}updateValue(t){const e=null==t?"":t.toString();this.inputElement.value=e,this.sliderElement&&(this.sliderElement.value=e,this.updateTrack())}updateTrack(){if(!this.sliderElement)return;const t=parseFloat(this.sliderElement.value),e=parseFloat(this.sliderElement.max),n=parseFloat(this.sliderElement.min),i=(t-n)/(e-n)*100;this.sliderElement.style.background=`linear-gradient(to right, #605e5c ${i}%, #c8c6c4 ${i}%)`}destroy(){this.inputElement=null,this.sliderElement=null,super.destroy()}}},24054:(t,e,n)=>{"use strict";n.d(e,{D:()=>o});var i=n(6639),r=n(82140);class o extends r.c{options;constructor(t){t.optionType="radio",super(t),Object.assign(this,t)}render(t){super.render(t);const e=this.displayValue;(0,i.tT)(".oop-toggles",this.element,Object.keys(this.options).map((t=>(0,i.tT)(`.oop-toggle${this.options[t].icon?`.icon-${this.options[t].icon}`:""}${e==t?".selected":""}`,{attr:{...this.options[t].description?{title:this.options[t].description}:{}},data:{value:t},events:{click:(t,e)=>{this.value=e.dataset.value,this.element.querySelectorAll(".oop-toggle").forEach((t=>t.classList.toggle("selected",this.value==t.dataset.value))),this.onChange&&this.onChange(this.value)}}},this.options[t].title))))}refresh(){const t=this.displayValue;this.element.querySelectorAll(".oop-toggle").forEach((e=>e.classList.toggle("selected",t==e.dataset.value)))}}},52649:(t,e,n)=>{"use strict";n.d(e,{W:()=>a});var i=n(6639),r=n(44810),o=n(82140);class a extends o.c{options;constructor(t){t.optionType="select",super(t),Object.assign(this,t)}render(t){super.render(t);const e=this.displayValue;(0,i.tT)("select.oop-select",this.element,{list:[{value:r.qk,text:"(Mixed)",disabled:!0,hidden:!0},...Object.keys(this.options).map((t=>({value:t,text:this.options[t].title,selected:t===e})))],events:{change:(t,e)=>{this.value=e.value,this.onChange&&this.onChange(this.value)}}})}refresh(){const t=this.element.querySelector("select");if(!t)return;const e=this.isMixed,n=t.querySelector(`option[value="${r.qk}"]`);n&&(n.hidden=!e),t.value=e?r.qk:this.displayValue??""}}},30137:(t,e,n)=>{"use strict";n.d(e,{u:()=>o});var i=n(11732),r=n(82140);class o extends r.c{constructor(t){t.optionType="switch",super(t),Object.assign(this,t),this.initialValue=!1!==t.value}render(t){super.render(t),(0,i.H)(".oop-switch.small",this.element,{checked:this.displayValue,change:(t,e)=>{this.value=e,this.onChange&&this.onChange(e)}})}refresh(){this.element.querySelector("input").checked=!0===this.displayValue,this.element.querySelector(".switch").classList.toggle("partial",this.isMixed)}}},81710:(t,e,n)=>{"use strict";n.d(e,{t:()=>o});var i=n(6639),r=n(82140);class o extends r.c{constructor(t){t.optionType="text",super(t),Object.assign(this,t)}render(t){super.render(t),(0,i.tT)(".oop-text",this.element,this.description)}refresh(){}}},82140:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var i=n(44810),r=n(53394);class o extends r.i{value;initialValue;onChange;optionType;get className(){return`oop-option.oop-option-${this.optionType}`}get displayValue(){return Array.isArray(this.value)?(0,i.Oq)(this.value)?null:this.value[0]:this.value}get isMixed(){return(0,i.Oq)(this.value)}constructor(t){if(t.hasChildren=!1,t.hasToggle=!1,super(t),Object.assign(this,t),t){const e=structuredClone(t.value);this.initialValue=Array.isArray(e)?e[0]:e}}update(t){this.value=t,this.refresh()}reset(){this.value=this.initialValue,super.reset(),this.refresh()}}},14215:(t,e,n)=>{"use strict";n.d(e,{F:()=>r});var i=n(53394);class r extends i.i{get className(){return"oop-slice"}}},91665:(t,e,n)=>{"use strict";var i;n.d(e,{E:()=>i}),function(t){t[t.AppSource=0]="AppSource",t[t.OKVIZ=1]="OKVIZ"}(i||(i={}))},24673:(t,e,n)=>{"use strict";n.d(e,{L:()=>o});var i=n(6639),r=n(4653);class o extends r.T{options;scale=1;element;dialog;dialogContent;get id(){return this.options.id}constructor(t){super(),this.options=t}dom(t){const e=(0,i.tT)(".picker-cell"+(this.options.value?"":".empty"));return this.updateCell(e,this.options.value),this.element=(0,i.tT)(`#picker-${this.options.id}.picker-container${this.options.readonly?".readonly":""}${this.className?`.${this.className}`:""}`,{attr:{disabled:this.options.disabled}},[(0,i.tT)(".picker-ctrl",{events:{click:(t,e)=>{t.preventDefault(),this.options.disabled||this.options.readonly||this.showDialog(t.currentTarget)}}},[e,(0,i.tT)(".dropdown.icon-bottom")]),...this.options.hiddenField?[(0,i.tT)("input.picker-field",{attr:{type:"hidden",name:this.options.id,value:this.options.value||""}})]:[]]),t&&t.appendChild(this.element),this.element}showDialog(t){this.dialog||(this.hideDialog(),this.dialog=(0,i.tT)(".picker-dialog"+(this.className?`.${this.className}-dialog`:""),document.body,{events:{click:(t,e)=>{this.hideDialog()}},data:{id:this.options.id}},[(0,i.tT)(".content",{style:{transform:`scale(${1/this.scale})`},middleware:t=>this.dialogContent=t},[...this.options.title?[(0,i.tT)(".title",this.options.title)]:[]])]),this.drawDialogContent(this.dialogContent),this.positionDialog(t))}hideDialog(){this.dialog?.remove(),this.dialog=null,this.dialogContent=null}positionDialog(t){const e=t.getBoundingClientRect(),n=window.innerWidth,i=window.innerHeight,r=this.dialogContent.offsetWidth,o=this.dialogContent.offsetHeight,a=Math.max(0,e.left+r>n?e.left-r+e.width:e.left),s=Math.max(0,e.top+e.height+o>i?e.top-o-3:e.top+e.height+3);this.dialogContent.style.left=`${a}px`,this.dialogContent.style.top=`${s}px`}updateValue(t){if(this.element){this.options.value=t;const e=this.element.querySelector(".picker-cell");if(e.classList.toggle("empty",!t),this.updateCell(e,t),this.options.hiddenField){const e=this.element.querySelector("input.picker-field");e&&(e.value=t,e.dispatchEvent(new Event("change")))}}}updateScale(t){this.scale=t,this.dialog&&(this.dialog.style.transform=`scale(${1/t})`)}change(t){this.updateValue(t),this.trigger("change",t)}}},6633:(t,e,n)=>{"use strict";n.d(e,{rJ:()=>o,tj:()=>i});var i,r=n(23242);function o(t){return t&&(0,r.cK)(t,"dataBoundType")?t.dataBoundType:i.Static}n(82174),function(t){t[t.Static=0]="Static",t[t.Category=1]="Category",t[t.Measure=2]="Measure"}(i||(i={}))},1195:(t,e,n)=>{"use strict";n.d(e,{H5:()=>l,KT:()=>u,X4:()=>h,hP:()=>r,ub:()=>o,yv:()=>a,zD:()=>c,zN:()=>s});var i=n(87674);function r(t){return"object"==typeof t&&void 0!==t.value}function o(t){return"object"==typeof t&&["FontControl","MarginPadding"].includes(t.type)}function a(t){return"object"==typeof t&&"Internal"==t.type&&void 0!==t.name}function s(t){return!1!==t.visible}i.z.D,i.z.YS;class l{constructor(t){Object.assign(this,t)}type="Internal";name;value}class c extends i.z.St{visibleIf;groups}class u extends i.z.Tn{visibleIf}class h extends i.z.YJ{visibleIf;constructor(t){super(t),this.visibleIf=t.visibleIf}}},95268:(t,e,n)=>{"use strict";n.d(e,{Cj:()=>c,Oz:()=>u,PL:()=>f,SN:()=>p,To:()=>g,Z0:()=>l,au:()=>h});var i=n(87674),r=n(889),o=n(23242),a=n(82174),s=n(1195);function l(t,e){return new(d(t))(e)}function c(t,e){return new(d(t))(e)}function u(t){return new s.H5(t)}function h(t,e){return l(i.z.uI,{name:t.substring(0,35).replace(/\s/g,"_").toLowerCase(),displayName:e??void 0,value:t})}function d(t){return class extends t{constructor(...t){const[e]=t;super(e),this.visibleIf=e.visibleIf,this.rules=e.rules,e.dataBound&&(this.dataBound=e.dataBound),e.fx&&(this.fx=e.fx)}}}function p(t,e){t.valuesMap&&(e=t.valuesMap[e]);const n=(t.values&&t.values[e]?t.values[e]:t)?.value;return n&&"object"==typeof n&&"value"in n?n.value:n}function f(t,e,n,i,r=!0){let o;if(t){const i=t[e];if(i){const t=i[n];if(void 0!==t&&(o=t,null!=o)){if(r&&"string"==typeof o)try{o=JSON.parse(o)}catch(t){}o.solid&&(o={value:o.solid.color})}}}return void 0===o&&(o=i),o}class g{maxDataBoundSlices;formattingSettingsService;constructor(t=100){this.maxDataBoundSlices=t,this.formattingSettingsService=new i.O}populate(t,e){const n=this.formattingSettingsService.populateFormattingSettingsModel(t,e);return this.fixValuesType(n),this.populateSelectors(n,e),this.populateInternalSettings(n,e),{model:n,settings:null}}enumerate(t,e){if(t)return this.applyRules(t),e&&e(t),this.createDataBoundSlices(t),this.formattingSettingsService.buildFormattingModel(t)}getSlices(t){const e=[];return t.cards?.forEach((t=>{(t instanceof i.z.Tn?[t]:t.groups).forEach((t=>{t&&e.push(...this.getCardGroupSlices(t))}))})),e}generateSkeletonSettings(t){function e(t){const n={},i=t=>t&&"object"==typeof t&&"value"in t?t.value:t;for(const r in t)if(!["groups","slices","__proto__","constructor","prototype"].includes(r)){const o=t[r];o&&"object"==typeof o&&((0,s.ub)(o)?n[r]=e(o):"value"in o&&(o.dataBound||o.fx?n[r]={value:i(o.value),values:o.values?.map((t=>i(t.value)))}:n[r]=i(o.value)))}return n}const n={};for(const i in t)if("cards"!==i){const r=t[i];r&&"object"==typeof r&&(n[i]=e(r))}return n}getSliceProperty(t,e,n,i,r){const o=f(e,n,i,r,!1);if(null!=o&&o!==r){if("Dropdown"==t.type)return t.items.find((t=>t.value===o));if("DatePicker"==t.type&&"string"==typeof o)return new Date(o)}return o}getDefaultValue(t,e,n){if("column"==t.from)return n;if("palette"==t.from){const t=thisVisual.host.colorPalette;return{value:t?t.getColor(e.toString()).value:"#000000"}}return"list"==t.from?t.list[e%t.list.length]:void 0}getCardGroupSlices(t){const e=[];if(t.slices)for(let n=0;n<t.slices.length;n++){const i=t.slices[n];e.push(i)}if(t.container?.containerItems)for(let n=0;n<t.container.containerItems.length;n++){const i=t.container.containerItems[n];if(i&&i.slices)for(let t=0;t<i.slices.length;t++){const n=i.slices[t];e.push(n)}}return e}populateSelectors(t,e){t.cards?.forEach((t=>{(t instanceof i.z.Tn?[t]:t.groups).forEach((n=>{n&&this.getCardGroupSlices(n).forEach((n=>{n.dataBound&&this.populateDataBounds(n,t.name,e),n.fx&&this.populateFx(n,t.name,e)}))}))}))}populateDataBounds(t,e,n){if(!n?.categorical)return;const i=[];t.valuesMap=[],t.values=[],n.categorical.categories&&i.push((0,a.yF)(n.categorical.categories,t.dataBound.dataRole,a.Zs.Last)),n.categorical.values&&i.push(...(0,a.pH)(n.categorical.values,t.dataBound.dataRole));const r=(e,n)=>"columns"==t.dataBound.type?e.source.queryName:`${e.source.queryName}_${e.values[n]}`,o=new Set,s=[];i.forEach((t=>{t?.values?.forEach(((e,n)=>{const i=r(t,n);o.add(i),s.push(i)}))})),Array.from(o).forEach(((e,n)=>{s.forEach(((i,r)=>{i==e&&(t.valuesMap[r]=n)}))})),o.clear(),i.forEach((n=>{n&&n.values&&n.values.forEach(((i,a)=>{const s=r(n,a),l="columns"==t.dataBound.type?n.source.displayName:null==i?"(Blank)":i.toString(),c=t.valuesMap?.[a]??a,u=t.dataBound.defaultValue?this.getDefaultValue(t.dataBound.defaultValue,c,l):t.value,h="columns"==t.dataBound.type?thisVisual.host.createSelectionIdBuilder().withMeasure(n.source.queryName).createSelectionId().getSelector():thisVisual.host.createSelectionIdBuilder().withCategory(n,a).createSelectionId().getSelector(),d="columns"==t.dataBound.type?n.source.objects:n.objects?.[a],p=this.getSliceProperty(t,d,e,t.name,u);o.has(s)||(o.add(s),t.values.push({value:p,displayName:l,selector:h}))}))}))}populateFx(t,e,n){if(this.convertFxToSelector(t),n?.categorical?.categories&&n.categorical.categories.length){if(!this.hasSliceDefaultValue(t,e,n))return;const i=(0,a.yF)(n.categorical.categories,t.fx.dataRole,a.Zs.Last);i?.values?.forEach(((n,r)=>{if(void 0===i.objects?.[r]?.[e]?.[t.name])return;t.values||(t.values=[]);const o=this.getSliceProperty(t,i.objects?.[r],e,t.name,t.values[r]?.value??t.value);t.values[r]?t.values[r].value=o:t.values[r]={value:o}}))}}populateInternalSettings(t,e){t.cards?.forEach((t=>{for(const n in t)if((0,s.yv)(t[n])){const i=t[n];i.value=f(e.metadata.objects,t.name,i.name,i.value)}}))}applyRules(t){const e=n=>{if(n.visibleIf&&(n.visible=n.visibleIf(t)),(0,s.ub)(n)&&(0,s.zN)(n))for(const t in n)n[t]instanceof i.z.D&&e(n[t])},n=e=>{if((0,s.hP)(e)){if(e.rules)for(const n in e.rules){const i=e.rules[n];e[n]=i(t,e[n])}}else for(const t in e)(0,s.hP)(e[t])&&n(e[t])};t.cards?.forEach((t=>{const r=t instanceof i.z.Tn?[t]:t.groups;e(t),r.forEach((t=>{t&&(e(t),(0,s.zN)(t)&&this.getCardGroupSlices(t).forEach((t=>{e(t),n(t)})))}))}))}hasSliceDefaultValue(t,e,n){return void 0===this.getSliceProperty(t,n.metadata.objects,e,t.name,void 0)}convertFxToSelector(t){if(t.fx){const e=t.selector;t.selector=r.createDataViewWildcardSelector(0),t.instanceKind=3,t.altConstantSelector=e??null}}createDataBoundSlices(t){const e=(t,e,n)=>{if((0,s.zN)(t)&&t.dataBound){const i=[];for(let e=0;e<t.values.length;e++){if(e>=this.maxDataBoundSlices){i.push(h(`Only the first ${this.maxDataBoundSlices} data points are displayed.`));break}const n=t.values[e];if(!n.selector)continue;const r=(0,o.Go)(t);r.displayName=n.displayName,r.value=n.value,3==r.instanceKind||2==r.instanceKind?r.altConstantSelector=n.selector:r.selector=n.selector,delete r.values,delete r.dataBound,i.push(r)}return n.splice(e,1,...i),!0}return!1},n=t=>{for(let n=0;n<t.slices.length;n++){const i=t.slices[n];if(e(i,n,t.slices))return!1}if(t.container?.containerItems)for(let n=0;n<t.container.containerItems.length;n++){const i=t.container.containerItems[n];if(i&&i.slices)for(let t=0;t<i.slices.length;t++){const n=i.slices[t];if(e(n,t,i.slices))return!1}}return!0};t.cards?.forEach((t=>{(t instanceof i.z.Tn?[t]:t.groups).forEach((t=>{if(t)for(;!n(t);)continue}))}))}fixValuesType(t){t.cards?.forEach((t=>{(t instanceof i.z.Tn?[t]:t.groups).forEach((t=>{t&&this.getCardGroupSlices(t).forEach((t=>{t instanceof i.z.lr&&t.value&&"string"==typeof t.value&&(t.value=new Date(t.value))}))}))}))}}},18352:(t,e,n)=>{"use strict";n.d(e,{X:()=>r});var i=n(23242);class r{static defaultQueue="default";queue={};static _instance;static get instance(){return r._instance||(r._instance=new this),r._instance}constructor(){if(r._instance)return r._instance;r._instance=this}sanitizeValues(t){const e=(0,i.o8)(t);for(const t of Object.keys(e)){let n=e[t];null!==n&&(0,i.Gv)(n)&&(n=(0,i.cK)(n,"solid")?n.solid.color:JSON.stringify(n)),e[t]=n}return e}updateParsedSettings(t,e){t.forEach((t=>{if((0,i.cK)(e,t.objectName))for(const n of Object.keys(t.properties))if((0,i.cK)(e[t.objectName],n)){let i=t.properties[n];if(void 0!==i&&"string"==typeof i)try{i=JSON.parse(i)}catch(t){}e[t.objectName][n]=i}}))}static SAVE(t,e=!0,n){this.BATCH(t),this.BATCH_SAVE(r.defaultQueue,e,n)}static save=r.SAVE;static BATCH(t,e=r.defaultQueue){const n=this.instance;n.queue[e]||(n.queue[e]=[]),t.properties=n.sanitizeValues(t.properties),n.queue[e].push(t)}static batch=r.BATCH;static BATCH_SAVE(t,e,n){let i="string"==typeof t?t:"string"==typeof e?e:void 0;void 0===i&&(i=r.defaultQueue);let o="boolean"==typeof t?t:"boolean"==typeof e?e:void 0;void 0===o&&(o=!0);const a="object"==typeof t?t:"object"==typeof e?e:n,s=this.instance;s.queue[i]&&s.queue[i].length&&(o&&(globalThis.thisVisual.internalUpdate=!0),thisVisual.host.persistProperties({merge:s.queue[i]}),a&&s.updateParsedSettings(s.queue[i],a),s.queue[i].find((t=>null!=t.selector))&&thisVisual.host.refreshHostData(),this.CLEAR(i))}static batchSave=r.BATCH_SAVE;static CLEAR(t){const e=this.instance;t?delete e.queue[t]:e.queue={}}static clear=r.CLEAR}},77875:(t,e,n)=>{"use strict";new Map},33906:(t,e,n)=>{"use strict";n.d(e,{O:()=>i});class i{visualHostTooltipService;rootElement;handleTouchTimeoutId;abortController;constructor(t,e){this.visualHostTooltipService=t,this.rootElement=e,this.abortController=new AbortController}addTooltipToElement(t,e,n){if(!t||!this.visualHostTooltipService.enabled())return;const i=this.rootElement;t.addEventListener("mouseover",(t=>{if(!this.canDisplayTooltip(t))return;const n=t.currentTarget,r=this.getCoordinates(t,i),o=e?e(n,!0):null;o&&this.visualHostTooltipService.show({coordinates:r,isTouchEvent:!1,dataItems:o.items,identities:o.selectionIds})}),{signal:this.abortController.signal}),t.addEventListener("mouseout",(()=>{this.visualHostTooltipService.hide({isTouchEvent:!1,immediately:!1})}),{signal:this.abortController.signal}),t.addEventListener("mousemove",(t=>{if(!this.canDisplayTooltip(t))return;const r=t.currentTarget,o=this.getCoordinates(t,i),a=e?e(r,n):null;a&&this.visualHostTooltipService.move({coordinates:o,isTouchEvent:!1,dataItems:a.items,identities:a.selectionIds})}),{signal:this.abortController.signal}),t.addEventListener("touchstart",(t=>{const n=t.currentTarget,r=this.getCoordinates(t,i,!1),o=e?e(n,!0):null;o&&(this.handleTouchTimeoutId=window.setTimeout((()=>{this.visualHostTooltipService.show({coordinates:r,isTouchEvent:!0,dataItems:o.items,identities:o.selectionIds}),this.handleTouchTimeoutId=null}),500))}),{signal:this.abortController.signal}),t.addEventListener("touchend",(()=>{this.handleTouchTimeoutId&&(clearTimeout(this.handleTouchTimeoutId),this.handleTouchTimeoutId=null)}),{signal:this.abortController.signal})}addTooltips(t,e,n,i){if(!t||!this.visualHostTooltipService.enabled())return;const r=this.rootElement;t.addEventListener("mouseover",(t=>{if(!this.canDisplayTooltip(t))return;const i=t.target;if(!i.matches(e))return void this.visualHostTooltipService.hide({isTouchEvent:!1,immediately:!1});const o=this.getCoordinates(t,r),a=n?n(i,!0):null;a&&this.visualHostTooltipService.show({coordinates:o,isTouchEvent:!1,dataItems:a.items,identities:a.selectionIds})}),{signal:this.abortController.signal}),t.addEventListener("mousemove",(t=>{if(!this.canDisplayTooltip(t))return;const o=t.target;if(!o.matches(e))return void this.visualHostTooltipService.hide({isTouchEvent:!1,immediately:!1});const a=this.getCoordinates(t,r),s=n?n(o,i):null;s&&this.visualHostTooltipService.move({coordinates:a,isTouchEvent:!1,dataItems:s.items,identities:s.selectionIds})}),{signal:this.abortController.signal}),t.addEventListener("click",(()=>{this.visualHostTooltipService.hide({isTouchEvent:!0,immediately:!1})})),t.addEventListener("touchstart",(t=>{const i=t.target;if(!i.matches(e))return void this.visualHostTooltipService.hide({isTouchEvent:!0,immediately:!1});const o=this.getCoordinates(t,r,!1),a=n?n(i,!0):null;a&&(this.handleTouchTimeoutId=window.setTimeout((()=>{this.visualHostTooltipService.show({coordinates:o,isTouchEvent:!0,dataItems:a.items,identities:a.selectionIds}),this.handleTouchTimeoutId=null}),500))}),{signal:this.abortController.signal}),t.addEventListener("touchend",(()=>{this.handleTouchTimeoutId&&(clearTimeout(this.handleTouchTimeoutId),this.handleTouchTimeoutId=null)}),{signal:this.abortController.signal})}hide(){this.visualHostTooltipService.hide({immediately:!0,isTouchEvent:!1})}canDisplayTooltip(t){let e=!0;return void 0!==t.buttons&&(e=!(0!==t.buttons)),e=e&&null==this.handleTouchTimeoutId,e}getCoordinates(t,e,n=!0){if(n){const n=t.sourceEvent??t,i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}{const e=t;if(!e.touches||!e.touches.length)return;return[e.touches[0].clientX,e.touches[0].clientY]}}destroy(){this.abortController.abort(),this.abortController=null}}},64159:(t,e,n)=>{"use strict";function i(t,e=1){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(function(t){return"#"!==t.substring(0,1)&&(t="#"+t),4==t.length&&(t+=t.substring(1,3)),t.toLowerCase()}(t));return{r:n?parseInt(n[1],16):0,g:n?parseInt(n[2],16):0,b:n?parseInt(n[3],16):0,a:e}}function r(t){return`rgba(${t.r}, ${t.g}, ${t.b}, ${null!=t.a?t.a:1})`}function o(t,e=1){if(!t)return"#000";const n="rgb"==t.slice(0,3)?function(t){const[e,n,i,r]=t.split(",");return{r:parseInt("a"==e[3]?e.slice(5):e.slice(4)),g:parseInt(n),b:parseInt(i),a:r?parseInt(r):1}}(t):i(t);return a(e*(Math.round((299*n.r+587*n.g+114*n.b)/1e3)>140?-1:1),t)}function a(t,e,n=null,i=!1){let r,o,a,s,l,c,u;const h=parseInt,d=Math.round;let p=Number("string"==typeof n);if("number"!=typeof t||t<-1||t>1||"string"!=typeof e||"r"!=e[0]&&"#"!=e[0]||n&&!p)return null;const f=t=>{let e=t.length;const n={};if(e>9){if([r,o,a,p]=t=t.split(","),e=t.length,e<3||e>4)return null;n.r=h("a"==r[3]?r.slice(5):r.slice(4)),n.g=h(o),n.b=h(a),n.a=p||-1}else{if(8==e||6==e||e<4)return null;e<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(e>4?t[4]+t[4]:"")),t=h(t.slice(1),16),9==e||5==e?(n.r=t>>24&255,n.g=t>>16&255,n.b=t>>8&255,n.a=d((255&t)/.255)/1e3):(n.r=t>>16,n.g=t>>8&255,n.b=255&t,n.a=-1)}return n};return u=e.length>9,u=p?n.length>9||"c"==n&&!u:u,l=f(e),s=t<0,c=n&&"c"!=n?f(n):s?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},s=1-(t=s?-1*t:t),l&&c?(i?(r=d(s*l.r+t*c.r),o=d(s*l.g+t*c.g),a=d(s*l.b+t*c.b)):(r=d((s*l.r**2+t*c.r**2)**.5),o=d((s*l.g**2+t*c.g**2)**.5),a=d((s*l.b**2+t*c.b**2)**.5)),p=l.a,c=c.a,l=p>=0||c>=0,p=l?p<0?c:c<0?p:p*s+c*t:0,u?"rgb"+(l?"a(":"(")+r+","+o+","+a+(l?","+d(1e3*p)/1e3:"")+")":"#"+(4294967296+16777216*r+65536*o+256*a+(l?d(255*p):0)).toString(16).slice(1,l?void 0:-2)):null}n.d(e,{aS:()=>r,dy:()=>a,iN:()=>i,sP:()=>o})},82174:(t,e,n)=>{"use strict";n.d(e,{Dv:()=>g,JY:()=>u,Lz:()=>v,PV:()=>d,Zs:()=>i,dr:()=>b,h:()=>s,hf:()=>m,j_:()=>h,kx:()=>f,l9:()=>y,n3:()=>r,pH:()=>l,p_:()=>a,t7:()=>p,yF:()=>c});var i,r,o=n(23242);function a(t){return!((e=Array.isArray(t)?t?.[0]:t)&&(e.categorical||e.table||e.matrix||e.single||e.tree));var e}function s(t){const e=t.source.expr?.func;return e??r.Sum}function l(t,e){const n=[];if(t)for(let i=0;i<t.length;i++){const r=t[i];(0,o.cK)(r.source.roles,e)&&n.push(r)}return n}function c(t,e,n=i.All){const r=[];if(t){for(let a=0;a<t.length;a++){const s=t[a];if((0,o.cK)(s.source.roles,e)){if(n==i.First)return s;r.push(s)}}if(n==i.Last&&r.length)return r[r.length-1]}return n==i.All?r:null}function u(t,e=!0){const n={};if(t)for(let i=0;i<t.length;i++){const r=(0,o.cK)(t[i],"source")?t[i].source:t[i];for(const a of Object.keys(r.roles))(0,o.cK)(n,a)||(n[a]=[]),e?(0,o.cK)(r,"rolesIndex")&&(0,o.cK)(r.rolesIndex,a)&&r.rolesIndex[a].forEach((e=>n[a][e]=t[i])):n[a].push(t[i])}return n}function h(t,e=0){return t.source.format?t.source.format:(0,o.cK)(t.source,"formatSource")&&t.objects&&t.objects[e]&&t.objects[e].general&&(0,o.vM)(t.objects[e].general.formatString)?t.objects[e].general.formatString:t.source.type.numeric?"0":""}function d(t){const e={min:null,max:null};return t&&((0,o.cK)(t,"minLocal")&&null!==t.minLocal&&!isNaN(Number(t.minLocal))&&(0,o.cK)(t,"maxLocal")&&null!==t.maxLocal&&!isNaN(Number(t.maxLocal))?(e.min=Number(t.minLocal),e.max=Number(t.maxLocal)):t.values.forEach((t=>{e.min=null===e.min?t:Math.min(e.min,t),e.max=null===e.max?t:Math.max(e.max,t)})),(null===e.min||isNaN(e.min))&&(e.min=0),(null===e.max||isNaN(e.max)||e.min>e.max)&&(e.max=e.min)),e}function p(t){return{min:Math.min(0,t.min),max:Math.max(0,t.max)}}function f(t){let e=0,n=0;if(t)if(t.categorical)if(t.categorical.categories?e=t.categorical.categories[0].values.length:t.categorical.values&&(e=1),t.categorical.values&&t.categorical.values.length){if(n=t.categorical.values.length,void 0!==t.categorical.values[0].source.groupName){const e={};t.metadata.columns.forEach((t=>{if(void 0!==t.groupName){const n=(t.groupName||"(Blank)").toString();e[n]=!0}})),n=Object.keys(e).length}}else n=0;else if(t.table)e=t.table.rows.length,n=t.table.columns.length;else if(t.matrix){const i=t=>{if(t.length){let e=0;return t.forEach((t=>{t.children?e+=i(t.children):e++})),e}return t.length};t.matrix.rows.root.children&&(e=i(t.matrix.rows.root.children)),t.matrix.columns.root.children&&(n=i(t.matrix.columns.root.children))}return[e,n]}function g(t,e){const n=t.filter((t=>t.source.roles[e]));if(n.length&&(0,o.cK)(n[n.length-1].source,"rolesIndex")){const t=n[n.length-1].source.rolesIndex;if((0,o.cK)(t,e))return t[e][t[e].length-1]}return 0}function m(t,e){const n=t.filter((t=>t.source.roles[e]));if(1==n.length&&(0,o.cK)(n[0].source,"rolesIndex")){const t=n[0].source.rolesIndex;if((0,o.cK)(t,e)&&t[e].length&&0!=t[e][0])return!0}return!1}function v(t,e){const n=t.filter((t=>t.source.roles[e]));if(n.length<2||n.some((t=>!t.values.length)))return!1;for(let t=0;t<n.length-1;t++){const e=n[t],i=e.values[0];for(let t=1;t<e.values.length;t++)if(e.values[t]!==i)return!0}return!1}function y(t,e,n=!1,i=!1){const r=t=>t.source.expr?.ref??t.source.displayName,o=t=>t.every((e=>e==t[0])),a=[];if(t){const s={};t.forEach((t=>{t.source.roles[e]&&(s[t.source.queryName]=t)}));const l=Object.values(s);if(l.sort(((t,n)=>t.source.rolesIndex?.[e]?.length&&n.source.rolesIndex?.[e]?.length?t.source.rolesIndex[e][0]-n.source.rolesIndex[e][0]:0)),l?.length&&l.every((t=>t.values.length))){const t=l.filter(((t,e)=>e<l.length-1)).map((t=>o(t.values)));if(t.every(Boolean)&&!n){for(let t=0;t<l.length-1;t++)a.push(l[t].values[0].toString());i&&o(l[l.length-1].values)?a.push(l[l.length-1].values[0].toString()):a.push(r(l[l.length-1]))}else for(let e=0;e<l.length;e++)!n&&(t[e]||i&&e==l.length-1&&o(l[e].values))?a.push(l[e].values[0].toString()):a.push(r(l[e]))}}return a}function b(t,e){return t.slice(0,-1).concat(e)}!function(t){t[t.All=0]="All",t[t.First=1]="First",t[t.Last=2]="Last"}(i||(i={})),function(t){t[t.Sum=0]="Sum",t[t.Average=1]="Average",t[t.DistinctCount=2]="DistinctCount",t[t.Min=3]="Min",t[t.Max=4]="Max",t[t.Count=5]="Count",t[t.Median=6]="Median",t[t.StdDev=7]="StdDev",t[t.Variance=8]="Variance"}(r||(r={}))},23242:(t,e,n)=>{"use strict";n.d(e,{Go:()=>f,Gv:()=>c,Im:()=>o,Kg:()=>d,LI:()=>g,Sh:()=>y,Tn:()=>h,cJ:()=>v,cK:()=>s,cy:()=>u,dl:()=>a,o8:()=>p,uk:()=>m,vM:()=>r}),n(32017);var i=n(88853);function r(t,e=!1){return void 0!==t&&(e||null!==t)}function o(t,e=!0){if(e){for(const e of Object.values(t))if(null!==e)return!1;return!0}return!a(t)}function a(t){return Object.keys(t).length>0}function s(t,e){return!(!t||!c(t))&&Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){return Object.prototype.toString.call(t)===`[object ${e}]`}function c(t){return"object"==typeof t}function u(t){return Array.isArray(t)}function h(t){return l(t,"Function")||l(t,"AsyncFunction")}function d(t){return l(t,"String")}function p(t){return"object"!=typeof t||null==t?t:structuredClone(t)}function f(t){if("object"!=typeof t||null==t)return t;if(Array.isArray(t))return t.map((t=>f(t)));const e=Object.create(Object.getPrototypeOf(t));for(const n in t)Object.hasOwn(t,n)&&(e[n]=f(t[n]));return e}function g(t,e=2){const n=Math.pow(10,e);return Math.round((t+Number.EPSILON)*n)/n}function m(t){return new Promise((e=>window.setTimeout(e,t)))}function v(t,...e){const n={...t};return e.forEach((t=>delete n[t])),n}function y(){i.s.SHOW({icon:"info",iconAlign:"top",mustBeContained:!0,title:"Dialogs Are Disabled",text:"It appears that dialogs have been disabled in this session. Refresh the report to restore the previous behavior.",callToAction:{text:"Learn More",url:"https://learn.microsoft.com/en-us/power-bi/developer/visuals/create-display-dialog-box#dont-show-dialog-box"}})}},98101:(t,e,n)=>{"use strict";function i(){return t="desktop",function(){const t=document.location.href;return t.includes("app.powerbi.com")?/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)?"mobile":"service":t.includes("ms-pbi.pbi.microsoft.com")?"desktop":"unknown"}()===t;var t}n.d(e,{zb:()=>i})},11425:(t,e,n)=>{"use strict";async function i(t,e,n=null){let i=n;if(t)try{const n=await t.get(e);if(n){const[t,e]=n.split("|");(!e||new Date(parseInt(e))>new Date)&&(i=t)}}catch(t){}return i}async function r(t,e,n,i){const r=`${n}${i?`|${i.getTime()}`:""}`;if(t)try{return null==n?await t.remove(e):await t.set(e,r),!0}catch(t){}return!1}n.d(e,{F:()=>r,v:()=>i})},23234:(t,e,n)=>{"use strict";function i(t,e,n=!0){n&&function(t){const e=[],n=document.styleSheets;for(let i=0;i<n.length;i++){const r=n[i];t&&n[i].ownerNode.id!=t||e.push(r)}return e}(t).forEach((t=>t.ownerNode.remove()));const i=document.createElement("style");i.id=t,document.head.appendChild(i),e&&e.forEach((t=>{i.sheet.insertRule(t,0)}))}function r(t){return o(t?.style.transform||"")}function o(t){const e=/(\w+)\(([^)]+)\)/g,n={translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0,skewX:0,skewY:0};let i;for(;null!==(i=e.exec(t));){const[t,e,r]=i,o=r.split(",").map((t=>parseFloat(t.trim())));switch(e){case"translate":n.translateX=o[0]||0,n.translateY=o[1]||0;break;case"scale":n.scaleX=o[0]||1,n.scaleY=o[1]||o[0]||1;break;case"rotate":n.rotate=o[0]||0;break;case"skew":n.skewX=o[0]||0,n.skewY=o[1]||0;break;case"translateX":n.translateX=o[0]||0;break;case"translateY":n.translateY=o[0]||0;break;case"scaleX":n.scaleX=o[0]||1;break;case"scaleY":n.scaleY=o[0]||1;break;case"skewX":n.skewX=o[0]||0;break;case"skewY":n.skewY=o[0]||0}}return n}function a(t,e){const n=t.style.transform||"",[i]=e.split("("),r=n.match(/(\w+\([^)]+\))/g)||[];let o=!1;const a=r.map((t=>t.startsWith(i)?(o=!0,e):t));o||a.push(e),t.style.transform=a.join(" ")}function s(t,e){const n=t.style.transform||"";if(!n)return;const i=(n.match(/(\w+\([^)]+\))/g)||[]).filter((t=>!t.startsWith(e))).join(" ");t.style.transform=i}function l(t){return CSS.escape(t)}n.d(e,{CX:()=>s,H_:()=>o,fX:()=>i,sx:()=>r,vm:()=>a,z4:()=>l}),n(23242)},93753:(t,e,n)=>{"use strict";n.d(e,{Fx:()=>s,Q9:()=>i,Sx:()=>r,TF:()=>o,WG:()=>h,aH:()=>a,te:()=>u,uR:()=>l,y4:()=>d});const i="'Segoe UI', wf_segoe-ui_normal, helvetica, arial, sans-serif",r="wf_standard-font, helvetica, arial, sans-serif";function o(t){return t.substring(0,1).toLocaleUpperCase()+t.substring(1).toLocaleLowerCase()}function a(t){let e=t.trim().replace(/[^a-zA-Z0-9-_:.]/g,"-");return/^\d/.test(e)&&(e=`_${e}`),e}function s(t){const e="0123456789abcdef";function n(t){let n,i="";for(n=0;n<=3;n++)i+=e.charAt(t>>8*n+4&15)+e.charAt(t>>8*n&15);return i}function i(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function r(t,e,n,r,o,a){return i(function(t,e){return t<<e|t>>>32-e}(i(i(e,t),i(r,a)),o),n)}function o(t,e,n,i,o,a,s){return r(e&n|~e&i,t,e,o,a,s)}function a(t,e,n,i,o,a,s){return r(e&i|n&~i,t,e,o,a,s)}function s(t,e,n,i,o,a,s){return r(e^n^i,t,e,o,a,s)}function l(t,e,n,i,o,a,s){return r(n^(e|~i),t,e,o,a,s)}let c;const u=function(t){let e;const n=1+(t.length+8>>6),i=[];for(e=0;e<16*n;e++)i[e]=0;for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<e%4*8;return i[e>>2]|=128<<e%4*8,i[16*n-2]=8*t.length,i}(t);let h,d,p,f,g=1732584193,m=-271733879,v=-1732584194,y=271733878;for(c=0;c<u.length;c+=16)h=g,d=m,p=v,f=y,g=o(g,m,v,y,u[c+0],7,-680876936),y=o(y,g,m,v,u[c+1],12,-389564586),v=o(v,y,g,m,u[c+2],17,606105819),m=o(m,v,y,g,u[c+3],22,-1044525330),g=o(g,m,v,y,u[c+4],7,-176418897),y=o(y,g,m,v,u[c+5],12,1200080426),v=o(v,y,g,m,u[c+6],17,-1473231341),m=o(m,v,y,g,u[c+7],22,-45705983),g=o(g,m,v,y,u[c+8],7,1770035416),y=o(y,g,m,v,u[c+9],12,-1958414417),v=o(v,y,g,m,u[c+10],17,-42063),m=o(m,v,y,g,u[c+11],22,-1990404162),g=o(g,m,v,y,u[c+12],7,1804603682),y=o(y,g,m,v,u[c+13],12,-40341101),v=o(v,y,g,m,u[c+14],17,-1502002290),m=o(m,v,y,g,u[c+15],22,1236535329),g=a(g,m,v,y,u[c+1],5,-165796510),y=a(y,g,m,v,u[c+6],9,-1069501632),v=a(v,y,g,m,u[c+11],14,643717713),m=a(m,v,y,g,u[c+0],20,-373897302),g=a(g,m,v,y,u[c+5],5,-701558691),y=a(y,g,m,v,u[c+10],9,38016083),v=a(v,y,g,m,u[c+15],14,-660478335),m=a(m,v,y,g,u[c+4],20,-405537848),g=a(g,m,v,y,u[c+9],5,568446438),y=a(y,g,m,v,u[c+14],9,-1019803690),v=a(v,y,g,m,u[c+3],14,-187363961),m=a(m,v,y,g,u[c+8],20,1163531501),g=a(g,m,v,y,u[c+13],5,-1444681467),y=a(y,g,m,v,u[c+2],9,-51403784),v=a(v,y,g,m,u[c+7],14,1735328473),m=a(m,v,y,g,u[c+12],20,-1926607734),g=s(g,m,v,y,u[c+5],4,-378558),y=s(y,g,m,v,u[c+8],11,-2022574463),v=s(v,y,g,m,u[c+11],16,1839030562),m=s(m,v,y,g,u[c+14],23,-35309556),g=s(g,m,v,y,u[c+1],4,-1530992060),y=s(y,g,m,v,u[c+4],11,1272893353),v=s(v,y,g,m,u[c+7],16,-155497632),m=s(m,v,y,g,u[c+10],23,-1094730640),g=s(g,m,v,y,u[c+13],4,681279174),y=s(y,g,m,v,u[c+0],11,-358537222),v=s(v,y,g,m,u[c+3],16,-722521979),m=s(m,v,y,g,u[c+6],23,76029189),g=s(g,m,v,y,u[c+9],4,-640364487),y=s(y,g,m,v,u[c+12],11,-421815835),v=s(v,y,g,m,u[c+15],16,530742520),m=s(m,v,y,g,u[c+2],23,-995338651),g=l(g,m,v,y,u[c+0],6,-198630844),y=l(y,g,m,v,u[c+7],10,1126891415),v=l(v,y,g,m,u[c+14],15,-1416354905),m=l(m,v,y,g,u[c+5],21,-57434055),g=l(g,m,v,y,u[c+12],6,1700485571),y=l(y,g,m,v,u[c+3],10,-1894986606),v=l(v,y,g,m,u[c+10],15,-1051523),m=l(m,v,y,g,u[c+1],21,-2054922799),g=l(g,m,v,y,u[c+8],6,1873313359),y=l(y,g,m,v,u[c+15],10,-30611744),v=l(v,y,g,m,u[c+6],15,-1560198380),m=l(m,v,y,g,u[c+13],21,1309151649),g=l(g,m,v,y,u[c+4],6,-145523070),y=l(y,g,m,v,u[c+11],10,-1120210379),v=l(v,y,g,m,u[c+2],15,718787259),m=l(m,v,y,g,u[c+9],21,-343485551),g=i(g,h),m=i(m,d),v=i(v,p),y=i(y,f);return n(g)+n(m)+n(v)+n(y)}function l(t=!0){const e=t=>{let e=t.toString(16);for(;e.length<4;)e="0"+e;return e},n=new Uint16Array(8);window.crypto.getRandomValues(n);let i=e(n[0])+e(n[1])+"-"+e(n[2])+"-"+e(n[3])+"-"+e(n[4])+"-"+e(n[5])+e(n[6])+e(n[7]);return t&&(isNaN(Number(i.substring(0,1)))||(i="_"+i)),i}let c;function u(t,e="actual"){(function(){if(c)return;const t=document.createElement("canvas");c=t.getContext("2d")})(),c.font=(t.fontStyle||"")+" "+(t.fontVariant||"")+" "+(t.fontWeight||"")+" "+t.fontSize+" "+t.fontFamily;const n=c.measureText(t.text),i="actual"===e?n.actualBoundingBoxAscent+n.actualBoundingBoxDescent:"font"===e?n.fontBoundingBoxAscent+n.fontBoundingBoxDescent:n.hangingBaseline+n.ideographicBaseline;return{width:n.width,height:i}}function h(t){try{return btoa(t)}catch(e){const n=(new TextEncoder).encode(t);let i="";for(const t of n)i+=String.fromCharCode(t);return btoa(i)}}function d(t){try{return atob(t)}catch(e){const n=atob(t),i=new Uint8Array(n.length);for(let t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return(new TextDecoder).decode(i)}}},29045:(t,e,n)=>{"use strict";n.d(e,{W:()=>u,i:()=>h});var i=n(99589),r=n(93753),o=n(88853),a=n(41470),s=n(6639),l=n(40649),c=n(95268);const u="demo";class h{config;featureFlags;enabledFeatures={};demoWatermark;demoAlertShown=!1;get name(){return this.config.visual.name}get displayName(){return this.config.visual.displayName}get shortName(){return this.displayName.replace(/by .+/gi,"").trim()}get version(){const t=i.parse(i.coerce(this.config.visual.version));return t?t.version:this.config.visual.version}get versionDisplayName(){let t=this.version;this.isDev&&(t+="-dev"),this.isInternal&&(t+="-internal"),this.onOrgStore&&(t+="-org");const e=this.expiry;return e&&(t+=` (${(new Date).getTime()>e?"Expired":`Expires ${new Date(e).toLocaleDateString(thisVisual.host.locale,{day:"2-digit",month:"2-digit",year:"numeric"})}`})`),t}get date(){return this.config.visual.date}get guid(){return this.config.visual.guid}get supportUrl(){return this.config.visual.supportUrl}get expiry(){let t=0;return this.isPreview&&thisVisual.element.classList.forEach((e=>{const n=e.indexOf("___");if(n>=0){const i=e.substring(n+3);let r=parseInt(i);isNaN(r)||(r<new Date(1970,1,1).getTime()&&(r*=1e3),t=r)}})),t}get isExpired(){const t=this.expiry;return!!t&&(new Date).getTime()>t}get isInternal(){const t=thisVisual.element.getAttribute("class"),e=this.version.replace(/\./g,"_");return!this.isDev&&!this.isPreview&&t.indexOf(`_${e}`)>=0}get isPreview(){return thisVisual.element.getAttribute("class").indexOf("___")>=0}get isDemo(){return this.hasFeatureFlag(u)}get isDev(){return thisVisual.element.getAttribute("class").toUpperCase().indexOf("_DEBUG")>=0}get onOrgStore(){return thisVisual.element.getAttribute("class").toUpperCase().indexOf("_ORGSTORE")>=0}constructor(t,e=[]){this.config=t,this.featureFlags=e}hasFeatureFlag(t){return!!this.enabledFeatures[t]}isEdition(t){return this.config.visual.edition===t}logMe(){this.update(),console.info(`%c${this.displayName}`,`font-family: ${r.Q9}; font-size:20px; font-weight:600`),console.info(`%cVersion: ${this.versionDisplayName}`,"font-weight:bold"),a.C7.SET_PREFIX(this.shortName)}update(t){this.populateFeatureFlags(t),this.isExpired&&this.showExpiredScreen(),this.isDemo&&(this.showDemoAlert(),this.showDemoWatermark())}populateFeatureFlags(t){this.featureFlags.length&&(this.enabledFeatures={},t?.dataViews?.[0]?.metadata?.objects)&&(0,c.PL)(t.dataViews[0].metadata.objects,l.h,"flags","").split(",").map((t=>t.trim())).forEach((t=>{const e=this.featureFlags.find((e=>e.flag===t));e&&(this.enabledFeatures[e.name]=!0)}))}showExpiredScreen(){o.s.SHOW({id:"expired-visual",zIndex:9999999999,icon:"error",force:!0,fullSize:!0,uncloseable:!0,title:"Visual Expired",text:`You are using an expired private version of ${this.shortName}. Replace it with the latest version available on AppSource.`,callToAction:{text:"Contact Us",url:this.supportUrl,button:!0}})}showDemoAlert(){this.demoAlertShown||(this.demoAlertShown=!0,o.s.SHOW({id:"demo-visual",zIndex:9999999999,icon:"info",force:!0,closeButton:!1,reshowEvery:300,title:"For Demo Purposes Only",text:`You are using a demo version of ${this.shortName}. Not for production use.`}))}showDemoWatermark(){this.demoWatermark&&document.getElementById("demo")||(this.demoWatermark=(0,s.tT)("#demo.demo-watermark",thisVisual.element,"Demo"))}}},80909:(t,e,n)=>{"use strict";n.d(e,{I:()=>l});var i=n(7447),r=n(42214),o=n(6639),a=n(41470),s=n(23242);class l{static Id="okvizWizard";static Size={width:600,height:410};dialogHost;result;container;settings;showProgress;steps;stepIndex=0;constructor(t,e){this.dialogHost=t.host,this.result={},this.showProgress=e.showProgress,this.steps=e.steps,this.settings=(0,s.o8)(e.settings),globalThis.thisVisual={element:t.element,host:new r.O5(e.sourceHost.colorPalette,e.sourceHost.locale),internalUpdate:!0},a.C7.instance.status=e.diagnostics?a.cF.Enabled:a.cF.Disabled,t.element.classList.add("okviz-wizard"),this.container=(0,o.tT)(".steps",t.element),this.draw(!1)}get isFirst(){return 0==this.stepIndex}get isLast(){return this.stepIndex==this.steps.length-1}next(){this.stepIndex<this.steps.length-1&&(this.stepIndex++,this.draw(!1))}prev(){this.stepIndex>0&&(this.stepIndex--,this.draw(!0))}draw(t){const e=this.steps[this.stepIndex];if(!e)return;let n=(0,o.VR)(`#step-${this.stepIndex}`,this.container);if(!n.isNull&&t||(n.remove(),n=null),!n){let t,i;n=(0,o.tT)(`#step-${this.stepIndex}.step`,this.container,[(0,o.tT)(".step-title",{middleware:e=>t=e}),(0,o.tT)(".step-content",{middleware:t=>i=t}),(0,o.tT)(".step-controls",[...this.showProgress?[(0,o.tT)(".progress",[(0,o.tT)("span",`Step ${this.stepIndex+1}`),(0,o.tT)("strong",` / ${this.steps.length}`)])]:[],(0,o.tT)(".right",[...this.isFirst?[]:[(0,o.tT)("a.btn.prev.alt",{attr:{href:"#"},events:{click:t=>{t.preventDefault(),this.prev()}}},"Previous")],...this.isLast?[(0,o.tT)("a.btn.done",{attr:{href:"#"},events:{click:t=>{t.preventDefault(),this.dialogHost.close(1,this.result)}}},"Done")]:[(0,o.tT)("a.btn.next",{attr:{href:"#"},events:{click:t=>{t.preventDefault(),this.next()}}},"Next")]])])]);const r=this.getStepInstance(i,e,this.settings);r&&(r.on("save",(t=>{this.result.changedSettings||(this.result.changedSettings={}),this.result.changedSettings[e.id]=t,this.result.settings=r.settings,this.dialogHost.setResult(this.result)})),r.on("close",(t=>{this.dialogHost.close(t,this.result)})),t.innerText=r.title,t.toggle(""!=r.title),r.draw())}(0,o.kO)(".step").forEach((t=>t.classList.add("hidden"))),n.classList.remove("hidden")}getStepInstance(t,e,n){return new i.b(t,e,n)}}globalThis.dialogRegistry=globalThis.dialogRegistry||{},globalThis.dialogRegistry[l.Id]=l},7447:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var i=n(4653);class r extends i.T{element;data;settings;pending={};constructor(t,e,n){super(),this.element=t,this.data=e,this.settings=n}save(){const t=[].concat(...Object.values(this.pending));this.trigger("save",t)}close(t=1){this.trigger("close",t)}}class o extends r{get title(){return"Step"}draw(){return null}}},33640:(t,e,n)=>{"use strict";var i=n(4653);n(18352),n(80909),n(23242),n(7447),i.T},54890:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var i=n(32284),r=n(7728),o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},a=function(){return a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)};function s(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function l(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function c(t){return t?(0,r.Kg)(t)?document.querySelector(t):(0,r.Tn)(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}const u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e._flag=!1,e._currentOptions=null,e._lock=!1,e._unregister=null,e._onScroll=function(){var t=e._currentOptions;!e._lock&&t&&e.emit("scrollDrag",{next:function(n){e.checkScroll({container:t.container,inputEvent:n})}})},e}!function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=c(e.container);if(n){var i=0,r=0,o=0,a=0;if(n===document.body)o=window.innerWidth,a=window.innerHeight;else{var s=n.getBoundingClientRect();i=s.top,r=s.left,o=s.width,a=s.height}this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:i,left:r,width:o,height:a},this._prevScrollPos=this._getScrollPosition([0,0],e),this._currentOptions=e,this._registerScrollEvent(e)}else this._flag=!1},n.drag=function(t,e){if(clearTimeout(this._timer),this._flag){var n=t.clientX,i=t.clientY,r=e.threshold,o=void 0===r?0:r,s=this._startRect,l=this._startPos;this._currentOptions=e;var c=[0,0];return s.top>i-o?(l[1]>s.top||i<l[1])&&(c[1]=-1):s.top+s.height<i+o&&(l[1]<s.top+s.height||i>l[1])&&(c[1]=1),s.left>n-o?(l[0]>s.left||n<l[0])&&(c[0]=-1):s.left+s.width<n+o&&(l[0]<s.left+s.width||n>l[0])&&(c[0]=1),!(!c[0]&&!c[1])&&this._continueDrag(a(a({},e),{direction:c,inputEvent:t,isDrag:!0}))}},n.checkScroll=function(t){var e=this;if(this._isWait)return!1;var n=t.prevScrollPos,i=void 0===n?this._prevScrollPos:n,r=t.direction,o=t.throttleTime,a=void 0===o?0:o,s=t.inputEvent,l=t.isDrag,c=this._getScrollPosition(r||[0,0],t),u=c[0]-i[0],h=c[1]-i[1],d=r||[u?Math.abs(u)/u:0,h?Math.abs(h)/h:0];return this._prevScrollPos=c,this._lock=!1,!(!u&&!h||(this.emit("move",{offsetX:d[0]?u:0,offsetY:d[1]?h:0,inputEvent:s}),a&&l&&(clearTimeout(this._timer),this._timer=window.setTimeout((function(){e._continueDrag(t)}),a)),0))},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(t,e){var n=e.container,i=e.getScrollPosition;return(void 0===i?s:i)({container:c(n),direction:t})},n._continueDrag=function(t){var e,n=this,i=t.container,o=t.direction,s=t.throttleTime,l=t.useScroll,u=t.isDrag,h=t.inputEvent;if(!(!this._flag||u&&this._isWait)){var d=(0,r.tB)(),p=Math.max(s+this._prevTime-d,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout((function(){n._continueDrag(t)}),p),!1;this._prevTime=d;var f=this._getScrollPosition(o,t);this._prevScrollPos=f,u&&(this._isWait=!0),l||(this._lock=!0);var g={container:c(i),direction:o,inputEvent:h};return null===(e=t.requestScroll)||void 0===e||e.call(t,g),this.emit("scroll",g),this._isWait=!1,l||this.checkScroll(a(a({},t),{prevScrollPos:f,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(t){this._unregisterScrollEvent();var e=t.checkScrollEvent;if(e){var n=!0===e?l:e,i=c(t.container);!0!==e||i!==document.body&&i!==document.documentElement?this._unregister=n(i,this._onScroll):this._unregister=l(window,this._onScroll)}},n._unregisterScrollEvent=function(){var t;null===(t=this._unregister)||void 0===t||t.call(this),this._unregister=null},e}(i.A)},32284:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(7728),r=function(){return r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)};const o=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if((0,i.Gv)(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if((0,i.Gv)(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var o=(0,i.SL)(r,(function(t){return t.listener===e}));o>-1&&r.splice(o,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){n._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var n=this;void 0===e&&(e={});var i=this._events[t];if(!t||!i)return!0;var r=!1;return e.eventType=t,e.stop=function(){r=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(i).forEach((function(i){i.listener(e),i.once&&n.off(t,i.listener)})),!r},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var i=this._events;i[t]=i[t]||[],i[t].push(r({listener:e},n))},t}()},34338:(t,e,n)=>{"use strict";n.d(e,{$z:()=>c,B4:()=>p,B8:()=>l,Di:()=>b,GD:()=>P,Rd:()=>m,XI:()=>E,YO:()=>k,ZB:()=>y,Zt:()=>x,_C:()=>d,bn:()=>s,e$:()=>C,ez:()=>h,iv:()=>M,k8:()=>A,kN:()=>u,kb:()=>_,lw:()=>f,n_:()=>T,pE:()=>w,qL:()=>D,qh:()=>S,tY:()=>g,zs:()=>v});var i=n(7728);function r(t,e,n,i,r,o){for(var a=0;a<r;++a){var s=n+a*r,l=i+a*r;t[s]+=t[l]*o,e[s]+=e[l]*o}}function o(t,e,n,i,r){for(var o=0;o<r;++o){var a=n+o*r,s=i+o*r,l=t[a],c=e[a];t[a]=t[s],t[s]=l,e[a]=e[s],e[s]=c}}function a(t,e,n,i,r){for(var o=0;o<i;++o){var a=n+o*i;t[a]/=r,e[a]/=r}}function s(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var i=t.slice(),r=0;r<n;++r)i[r*n+e-1]=0,i[(e-1)*n+r]=0;return i[(e-1)*(n+1)]=1,i}function l(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),s=A(e),l=0;l<e;++l){var c=e*l+l;if(!(0,i.nF)(n[c],i._4))for(var u=l+1;u<e;++u)if(n[e*l+u]){o(n,s,l,u,e);break}if(!(0,i.nF)(n[c],i._4))return[];for(a(n,s,l,e,n[c]),u=0;u<e;++u){var h=u,d=n[u+l*e];(0,i.nF)(d,i._4)&&l!==u&&r(n,s,h,l,e,-d)}}return s}function c(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],i=t[e*e-1],r=0;r<e-1;++r)n[r]=t[e*(e-1)+r]/i;return n[e-1]=0,n}function u(t,e){for(var n=A(e),i=0;i<e-1;++i)n[e*(e-1)+i]=t[i]||0;return n}function h(t,e){for(var n=t.slice(),i=t.length;i<e-1;++i)n[i]=0;return n[e-1]=1,n}function d(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var i=A(n),r=Math.min(e,n),o=0;o<r-1;++o){for(var a=0;a<r-1;++a)i[o*n+a]=t[o*e+a];i[(o+1)*n-1]=t[(o+1)*e-1],i[(n-1)*n+o]=t[(e-1)*e+o]}return i[n*n-1]=t[e*e-1],i}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=A(t);return e.forEach((function(e){i=f(i,e,t)})),i}function f(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var i=[],r=t.length/n,o=e.length/r;if(!r)return e;if(!o)return t;for(var a=0;a<n;++a)for(var s=0;s<o;++s){i[s*n+a]=0;for(var l=0;l<r;++l)i[s*n+a]+=t[l*n+a]*e[s*r+l]}return i}function g(t,e){for(var n=Math.min(t.length,e.length),i=t.slice(),r=0;r<n;++r)i[r]=i[r]+e[r];return i}function m(t,e){for(var n=Math.min(t.length,e.length),i=t.slice(),r=0;r<n;++r)i[r]=i[r]-e[r];return i}function v(t,e){return void 0===e&&(e=6===t.length),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function y(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function b(t,e,n){void 0===n&&(n=e.length);var i=f(t,e,n),r=i[n-1];return i.map((function(t){return t/r}))}function w(t,e){return f(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function S(t,e){return f(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function x(t,e){return f(t,E(e,4))}function k(t,e){var n=e[0],i=void 0===n?1:n,r=e[1],o=void 0===r?1:r,a=e[2];return f(t,[i,0,0,0,0,o,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function C(t,e){return b(E(e,3),h(t,3))}function M(t,e){var n=e[0],i=void 0===n?0:n,r=e[1],o=void 0===r?0:r,a=e[2];return f(t,[1,0,0,0,0,1,0,0,0,0,1,0,i,o,void 0===a?0:a,1],4)}function T(t,e){return f(t,e,4)}function E(t,e){var n=Math.cos(t),i=Math.sin(t),r=A(e);return r[0]=n,r[1]=i,r[e]=-i,r[e+1]=n,r}function A(t){for(var e=t*t,n=[],i=0;i<e;++i)n[i]=i%(t+1)?0:1;return n}function _(t,e){for(var n=A(e),i=Math.min(t.length,e-1),r=0;r<i;++r)n[(e+1)*r]=t[r];return n}function P(t,e){for(var n=A(e),i=Math.min(t.length,e-1),r=0;r<i;++r)n[e*(e-1)+r]=t[r];return n}function D(t,e,n,i,r,o,a,s){var c=t[0],u=t[1],h=e[0],p=e[1],g=n[0],m=n[1],v=i[0],y=i[1],b=r[0],w=r[1],S=o[0],x=o[1],k=a[0],C=a[1],M=s[0],T=s[1],E=l([c,0,h,0,g,0,v,0,u,0,p,0,m,0,y,0,1,0,1,0,1,0,1,0,0,c,0,h,0,g,0,v,0,u,0,p,0,m,0,y,0,1,0,1,0,1,0,1,-b*c,-w*c,-S*h,-x*h,-k*g,-C*g,-M*v,-T*v,-b*u,-w*u,-S*p,-x*p,-k*m,-C*m,-M*y,-T*y],8);if(!E.length)return[];var A=f(E,[b,w,S,x,k,C,M,T],8);return A[8]=1,d(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],i=0;i<e;++i)for(var r=0;r<e;++r)n[r*e+i]=t[e*i+r];return n}(A),3,4)}},34537:(t,e,n)=>{"use strict";const i=n(3720),r=n(28712),o=n(18697),a=n(42598),s=(t,e={})=>{let n=[];if(Array.isArray(t))for(const i of t){const t=s.create(i,e);Array.isArray(t)?n.push(...t):n.push(t)}else n=[].concat(s.create(t,e));return e&&!0===e.expand&&!0===e.nodupes&&(n=[...new Set(n)]),n};s.parse=(t,e={})=>a(t,e),s.stringify=(t,e={})=>i("string"==typeof t?s.parse(t,e):t,e),s.compile=(t,e={})=>("string"==typeof t&&(t=s.parse(t,e)),r(t,e)),s.expand=(t,e={})=>{"string"==typeof t&&(t=s.parse(t,e));let n=o(t,e);return!0===e.noempty&&(n=n.filter(Boolean)),!0===e.nodupes&&(n=[...new Set(n)]),n},s.create=(t,e={})=>""===t||t.length<3?[t]:!0!==e.expand?s.compile(t,e):s.expand(t,e),t.exports=s},28712:(t,e,n)=>{"use strict";const i=n(67028),r=n(47612);t.exports=(t,e={})=>{const n=(t,o={})=>{const a=r.isInvalidBrace(o),s=!0===t.invalid&&!0===e.escapeInvalid,l=!0===a||!0===s,c=!0===e.escapeInvalid?"\\":"";let u="";if(!0===t.isOpen)return c+t.value;if(!0===t.isClose)return console.log("node.isClose",c,t.value),c+t.value;if("open"===t.type)return l?c+t.value:"(";if("close"===t.type)return l?c+t.value:")";if("comma"===t.type)return"comma"===t.prev.type?"":l?t.value:"|";if(t.value)return t.value;if(t.nodes&&t.ranges>0){const n=r.reduce(t.nodes),o=i(...n,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(0!==o.length)return n.length>1&&o.length>1?`(${o})`:o}if(t.nodes)for(const e of t.nodes)u+=n(e,t);return u};return n(t)}},58776:t=>{"use strict";t.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},18697:(t,e,n)=>{"use strict";const i=n(67028),r=n(3720),o=n(47612),a=(t="",e="",n=!1)=>{const i=[];if(t=[].concat(t),!(e=[].concat(e)).length)return t;if(!t.length)return n?o.flatten(e).map((t=>`{${t}}`)):e;for(const r of t)if(Array.isArray(r))for(const t of r)i.push(a(t,e,n));else for(let t of e)!0===n&&"string"==typeof t&&(t=`{${t}}`),i.push(Array.isArray(t)?a(r,t,n):r+t);return o.flatten(i)};t.exports=(t,e={})=>{const n=void 0===e.rangeLimit?1e3:e.rangeLimit,s=(t,l={})=>{t.queue=[];let c=l,u=l.queue;for(;"brace"!==c.type&&"root"!==c.type&&c.parent;)c=c.parent,u=c.queue;if(t.invalid||t.dollar)return void u.push(a(u.pop(),r(t,e)));if("brace"===t.type&&!0!==t.invalid&&2===t.nodes.length)return void u.push(a(u.pop(),["{}"]));if(t.nodes&&t.ranges>0){const s=o.reduce(t.nodes);if(o.exceedsLimit(...s,e.step,n))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l=i(...s,e);return 0===l.length&&(l=r(t,e)),u.push(a(u.pop(),l)),void(t.nodes=[])}const h=o.encloseBrace(t);let d=t.queue,p=t;for(;"brace"!==p.type&&"root"!==p.type&&p.parent;)p=p.parent,d=p.queue;for(let e=0;e<t.nodes.length;e++){const n=t.nodes[e];"comma"!==n.type||"brace"!==t.type?"close"!==n.type?n.value&&"open"!==n.type?d.push(a(d.pop(),n.value)):n.nodes&&s(n,t):u.push(a(u.pop(),d,h)):(1===e&&d.push(""),d.push(""))}return d};return o.flatten(s(t))}},42598:(t,e,n)=>{"use strict";const i=n(3720),{MAX_LENGTH:r,CHAR_BACKSLASH:o,CHAR_BACKTICK:a,CHAR_COMMA:s,CHAR_DOT:l,CHAR_LEFT_PARENTHESES:c,CHAR_RIGHT_PARENTHESES:u,CHAR_LEFT_CURLY_BRACE:h,CHAR_RIGHT_CURLY_BRACE:d,CHAR_LEFT_SQUARE_BRACKET:p,CHAR_RIGHT_SQUARE_BRACKET:f,CHAR_DOUBLE_QUOTE:g,CHAR_SINGLE_QUOTE:m,CHAR_NO_BREAK_SPACE:v,CHAR_ZERO_WIDTH_NOBREAK_SPACE:y}=n(58776);t.exports=(t,e={})=>{if("string"!=typeof t)throw new TypeError("Expected a string");const n=e||{},b="number"==typeof n.maxLength?Math.min(r,n.maxLength):r;if(t.length>b)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${b})`);const w={type:"root",input:t,nodes:[]},S=[w];let x=w,k=w,C=0;const M=t.length;let T,E=0,A=0;const _=()=>t[E++],P=t=>{if("text"===t.type&&"dot"===k.type&&(k.type="text"),!k||"text"!==k.type||"text"!==t.type)return x.nodes.push(t),t.parent=x,t.prev=k,k=t,t;k.value+=t.value};for(P({type:"bos"});E<M;)if(x=S[S.length-1],T=_(),T!==y&&T!==v)if(T!==o)if(T!==f)if(T!==p)if(T!==c)if(T!==u)if(T!==g&&T!==m&&T!==a)if(T!==h)if(T!==d)if(T===s&&A>0){if(x.ranges>0){x.ranges=0;const t=x.nodes.shift();x.nodes=[t,{type:"text",value:i(x)}]}P({type:"comma",value:T}),x.commas++}else if(T===l&&A>0&&0===x.commas){const t=x.nodes;if(0===A||0===t.length){P({type:"text",value:T});continue}if("dot"===k.type){if(x.range=[],k.value+=T,k.type="range",3!==x.nodes.length&&5!==x.nodes.length){x.invalid=!0,x.ranges=0,k.type="text";continue}x.ranges++,x.args=[];continue}if("range"===k.type){t.pop();const e=t[t.length-1];e.value+=k.value+T,k=e,x.ranges--;continue}P({type:"dot",value:T})}else P({type:"text",value:T});else{if("brace"!==x.type){P({type:"text",value:T});continue}const t="close";x=S.pop(),x.close=!0,P({type:t,value:T}),A--,x=S[S.length-1]}else{A++;const t=k.value&&"$"===k.value.slice(-1)||!0===x.dollar;x=P({type:"brace",open:!0,close:!1,dollar:t,depth:A,commas:0,ranges:0,nodes:[]}),S.push(x),P({type:"open",value:T})}else{const t=T;let n;for(!0!==e.keepQuotes&&(T="");E<M&&(n=_());)if(n!==o){if(n===t){!0===e.keepQuotes&&(T+=n);break}T+=n}else T+=n+_();P({type:"text",value:T})}else{if("paren"!==x.type){P({type:"text",value:T});continue}x=S.pop(),P({type:"text",value:T}),x=S[S.length-1]}else x=P({type:"paren",nodes:[]}),S.push(x),P({type:"text",value:T});else{let t;for(C++;E<M&&(t=_());)if(T+=t,t!==p)if(t!==o){if(t===f&&(C--,0===C))break}else T+=_();else C++;P({type:"text",value:T})}else P({type:"text",value:"\\"+T});else P({type:"text",value:(e.keepEscaping?T:"")+_()});do{if(x=S.pop(),"root"!==x.type){x.nodes.forEach((t=>{t.nodes||("open"===t.type&&(t.isOpen=!0),"close"===t.type&&(t.isClose=!0),t.nodes||(t.type="text"),t.invalid=!0)}));const t=S[S.length-1],e=t.nodes.indexOf(x);t.nodes.splice(e,1,...x.nodes)}}while(S.length>0);return P({type:"eos"}),w}},3720:(t,e,n)=>{"use strict";const i=n(47612);t.exports=(t,e={})=>{const n=(t,r={})=>{const o=e.escapeInvalid&&i.isInvalidBrace(r),a=!0===t.invalid&&!0===e.escapeInvalid;let s="";if(t.value)return(o||a)&&i.isOpenOrClose(t)?"\\"+t.value:t.value;if(t.value)return t.value;if(t.nodes)for(const e of t.nodes)s+=n(e);return s};return n(t)}},47612:(t,e)=>{"use strict";e.isInteger=t=>"number"==typeof t?Number.isInteger(t):"string"==typeof t&&""!==t.trim()&&Number.isInteger(Number(t)),e.find=(t,e)=>t.nodes.find((t=>t.type===e)),e.exceedsLimit=(t,n,i=1,r)=>!1!==r&&!(!e.isInteger(t)||!e.isInteger(n))&&(Number(n)-Number(t))/Number(i)>=r,e.escapeNode=(t,e=0,n)=>{const i=t.nodes[e];i&&(n&&i.type===n||"open"===i.type||"close"===i.type)&&!0!==i.escaped&&(i.value="\\"+i.value,i.escaped=!0)},e.encloseBrace=t=>!("brace"!==t.type||t.commas>>0+t.ranges||(t.invalid=!0,0)),e.isInvalidBrace=t=>!("brace"!==t.type||!0!==t.invalid&&!t.dollar&&(t.commas>>0+t.ranges&&!0===t.open&&!0===t.close||(t.invalid=!0,0))),e.isOpenOrClose=t=>"open"===t.type||"close"===t.type||!0===t.open||!0===t.close,e.reduce=t=>t.reduce(((t,e)=>("text"===e.type&&t.push(e.value),"range"===e.type&&(e.type="text"),t)),[]),e.flatten=(...t)=>{const e=[],n=t=>{for(let i=0;i<t.length;i++){const r=t[i];Array.isArray(r)?n(r):void 0!==r&&e.push(r)}return e};return n(t),e}},81904:(t,e,n)=>{"use strict";n.d(e,{I4:()=>a});var i=n(72775),r=n(54573),o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function a(t,e){var n=(0,i.A)(e),a=n.className;return(0,r.Rf)((function(e,i){var s=e.className,l=void 0===s?"":s,c=(e.cspNonce,function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(e,["className","cspNonce"])),u=(0,r.li)();return(0,r.Yn)(i,(function(){return u.current}),[]),(0,r.vJ)((function(){var t=n.inject(u.current,{nonce:e.cspNonce});return function(){t.destroy()}}),[]),(0,r.n)(t,o({ref:u,"data-styled-id":a,className:"".concat(l," ").concat(a)},c))}))}},64078:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>Dr,Gq:()=>br,XD:()=>wr,hi:()=>Y});var i=n(24111),r=n(71720),o=n(7728),a=n(34338),s=n(89605),l=n(41273),c=n(54890),u=n(90077),h=n(54573),d=n(12437),p=n(81904),f=n(32284),g=n(79715),m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},m(t,e)};function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var y=function(){return y=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},y.apply(this,arguments)};function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function w(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function S(t,e){return y({events:[],props:[],name:t},e)}var x,k,C=["n","w","s","e"],M=["n","w","s","e","nw","ne","sw","se"],T=(0,i.Ay)(),E=T.browser.webkit,A=E&&(x="undefined"==typeof window?{userAgent:""}:window.navigator,!!(k=/applewebkit\/([^\s]+)/g.exec(x.userAgent.toLowerCase()))&&parseFloat(k[1])<605),_=T.browser.name,P=parseInt(T.browser.version,10),D="chrome"===_,O=T.browser.chromium,L=parseInt(T.browser.chromiumVersion,10)||0,I=D&&P>=109||O&&L>=109,R="firefox"===_,V=parseInt(T.browser.webkitVersion,10)>=612||P>=15,N="moveable-",F=M.map((function(t){var e="",n="",i="center",r="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(o,";"),r="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",r="top"),t.indexOf("w")>-1&&(n="left: ".concat(o,";"),i="right"),t.indexOf("e")>-1&&(n="left: 0px;",i="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(n).concat(e,"\n        transform-origin: ").concat(i," ").concat(r,";\n    }")})).join("\n"),B="\n{\nposition: absolute;\nwidth: 1px;\nheight: 1px;\nleft: 0;\ntop: 0;\nz-index: 3000;\n--moveable-color: #4af;\n--zoom: 1;\n--zoompx: 1px;\n--moveable-line-padding: 0;\n--moveable-control-padding: 0;\nwill-change: transform;\noutline: 1px solid transparent;\n}\n.control-box {\nz-index: 0;\n}\n.line, .control {\nposition: absolute;\nleft: 0;\ntop: 0;\nwill-change: transform;\n}\n.control {\nwidth: 14px;\nheight: 14px;\nborder-radius: 50%;\nborder: 2px solid #fff;\nbox-sizing: border-box;\nbackground: #4af;\nbackground: var(--moveable-color);\nmargin-top: -7px;\nmargin-left: -7px;\nborder: 2px solid #fff;\nz-index: 10;\n}\n.around-control {\nposition: absolute;\nwill-change: transform;\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\nheight: calc(var(--moveable-control-padding, 20) * 1px);\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\nbox-sizing: border-box;\nbackground: transparent;\nz-index: 8;\ncursor: alias;\ntransform-origin: center center;\n}\n".concat(F,"\n.padding {\nposition: absolute;\ntop: 0px;\nleft: 0px;\nwidth: 100px;\nheight: 100px;\ntransform-origin: 0 0;\n}\n.line {\nwidth: 1px;\nheight: 1px;\nbackground: #4af;\nbackground: var(--moveable-color);\ntransform-origin: 0px 50%;\n}\n.line.edge {\nz-index: 1;\nbackground: transparent;\n}\n.line.dashed {\nbox-sizing: border-box;\nbackground: transparent;\n}\n.line.dashed.horizontal {\nborder-top: 1px dashed #4af;\nborder-top-color: #4af;\nborder-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\nborder-left: 1px dashed #4af;\nborder-left-color: #4af;\nborder-left-color: var(--moveable-color);\n}\n.line.vertical {\ntransform: translateX(-50%);\n}\n.line.horizontal {\ntransform: translateY(-50%);\n}\n.line.vertical.bold {\nwidth: 2px;\n}\n.line.horizontal.bold {\nheight: 2px;\n}\n\n.control.origin {\nborder-color: #f55;\nbackground: #fff;\nwidth: 12px;\nheight: 12px;\nmargin-top: -6px;\nmargin-left: -6px;\npointer-events: none;\n}\n").concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n").concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(0,t),n=45*Math.round(t/45)%180,i="ns-resize";return 135===n?i="nwse-resize":45===n?i="nesw-resize":90===n&&(i="ew-resize"),"cursor:".concat(i,";cursor: url('").concat(e,"') 16 16, ").concat(i,";")}(t),"\n}\n")})).join("\n"),'\n\n.line.direction:before {\ncontent: "";\nposition: absolute;\nwidth: 100%;\nheight: calc(var(--moveable-line-padding, 0) * 1px);\nbottom: 0;\nleft: 0;\n}\n.group {\nz-index: -1;\n}\n.area {\nposition: absolute;\n}\n.area-pieces {\nposition: absolute;\ntop: 0;\nleft: 0;\ndisplay: none;\n}\n.area.avoid, .area.pass {\npointer-events: none;\n}\n.area.avoid+.area-pieces {\ndisplay: block;\n}\n.area-piece {\nposition: absolute;\n}\n\n').concat(A?':global svg *:before {\ncontent:"";\ntransform-origin: inherit;\n}':"","\n"),z=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],j=1e-4,U=1e-7,G=1e-9,$=Math.pow(10,10),H=-$,q={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},W={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Z={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Y=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function K(t,e,n,i,r,o){var a,s;void 0===o&&(o="draggable");var l=null!==(s=null===(a=e.gestos[o])||void 0===a?void 0:a.move(n,t.inputEvent))&&void 0!==s?s:{},c=l.originalDatas||l.datas,u=c[o]||(c[o]={});return y(y({},r?Xn(e,l):l),{isPinch:!!i,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var X=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}return t.prototype.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),y(y({},this.move(t,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},t.prototype.move=function(t,e){var n,i,r=!1;if(this.isFlag){var o=this.isDrag;n=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!o&&this.isDrag&&(r=!0)}else this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0;return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:e,isFirstDrag:r,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function J(t,e,n,i){var r=16===t.length?4:3,o=b(yn(t,n,i,r),4),a=b(o[0],2),s=a[0],l=a[1],c=b(o[1],2),u=c[0],h=c[1],d=b(o[2],2),p=d[0],f=d[1],g=b(o[3],2),m=g[0],v=g[1],y=b(vn(t,e,r),2),w=y[0],S=y[1],x=Math.min(s,u,p,m),k=Math.min(l,h,f,v),C=Math.max(s,u,p,m);return s=s-x||0,{left:x,top:k,right:C,bottom:Math.max(l,h,f,v),origin:[w=w-x||0,S=S-k||0],pos1:[s,l=l-k||0],pos2:[u=u-x||0,h=h-k||0],pos3:[p=p-x||0,f=f-k||0],pos4:[m=m-x||0,v=v-k||0],direction:di(t[0]*t[r+1])}}function Q(t,e){var n=e.clientX,i=e.clientY,r=e.datas,o=t.state,s=o.moveableClientRect,l=o.rootMatrix,c=o.is3d,u=o.pos1,h=s.left,d=s.top,p=c?4:3,f=b((0,a.Rd)(Kn(l,[n-h,i-d],p),u),2),g=b(ot({datas:r,distX:f[0],distY:f[1]}),2);return[g[0],g[1]]}function tt(t,e){var n=e.datas,i=t.state,r=i.allMatrix,o=i.beforeMatrix,s=i.is3d,l=i.left,c=i.top,u=i.origin,h=i.offsetMatrix,d=i.targetMatrix,p=i.transformOrigin,f=s?4:3;n.is3d=s,n.matrix=r,n.targetMatrix=d,n.beforeMatrix=o,n.offsetMatrix=h,n.transformOrigin=p,n.inverseMatrix=(0,a.B8)(r,f),n.inverseBeforeMatrix=(0,a.B8)(o,f),n.absoluteOrigin=(0,a.ez)((0,a.tY)([l,c],u),f),n.startDragBeforeDist=(0,a.Di)(n.inverseBeforeMatrix,n.absoluteOrigin,f),n.startDragDist=(0,a.Di)(n.inverseMatrix,n.absoluteOrigin,f)}function et(t,e,n){var i=e.datas,r=e.originalDatas.beforeRenderable,l=i.transformIndex,c=r.nextTransforms,u=c.length,h=r.nextTransformAppendedIndexes,d=-1;-1===l?("translate"===n?d=0:"rotate"===n&&(d=(0,o.SL)(c,(function(t){return t.match(/scale\(/g)}))),-1===d&&(d=c.length),i.transformIndex=d):d=(0,o.I6)(h,(function(t){return t.index===l&&t.functionName===n}))?l:l+h.filter((function(t){return t.index<l})).length;var p=function(t,e,n){var i,r=(0,s.qg)(t,{"x%":function(t){return t/100*e.offsetWidth},"y%":function(t){return t/100*e.offsetHeight}}),o=t.slice(0,n<0?void 0:n),l=t.slice(0,n<0?void 0:n+1),c=t[n]||"",u=n<0?[]:t.slice(n),h=n<0?[]:t.slice(n+1),d=r.slice(0,n<0?void 0:n),p=r.slice(0,n<0?void 0:n+1),f=null!==(i=r[n])&&void 0!==i?i:(0,s.qg)([""])[0],g=n<0?[]:r.slice(n),m=n<0?[]:r.slice(n+1),v=f?[f]:[],y=(0,s.ap)(d),b=(0,s.ap)(p),w=(0,s.ap)(g),S=(0,s.ap)(m),x=(0,a.lw)(y,w,4);return{transforms:t,beforeFunctionMatrix:y,beforeFunctionMatrix2:b,targetFunctionMatrix:(0,s.ap)(v),afterFunctionMatrix:w,afterFunctionMatrix2:S,allFunctionMatrix:x,beforeFunctions:d,beforeFunctions2:p,targetFunction:v[0],afterFunctions:g,afterFunctions2:m,beforeFunctionTexts:o,beforeFunctionTexts2:l,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:h}}(c,t.state,d),f=p.targetFunction,g="rotate"===n?"rotateZ":n;i.beforeFunctionTexts=p.beforeFunctionTexts,i.afterFunctionTexts=p.afterFunctionTexts,i.beforeTransform=p.beforeFunctionMatrix,i.beforeTransform2=p.beforeFunctionMatrix2,i.targetTansform=p.targetFunctionMatrix,i.afterTransform=p.afterFunctionMatrix,i.afterTransform2=p.afterFunctionMatrix2,i.targetAllTransform=p.allFunctionMatrix,f.functionName===g?(i.afterFunctionTexts.splice(0,1),i.isAppendTransform=!1):u>d&&(i.isAppendTransform=!0,r.nextTransformAppendedIndexes=w(w([],b(h),!1),[{functionName:n,index:d,isAppend:!0}],!1))}function nt(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function it(t,e,n){var i=t.beforeTransform,r=t.afterTransform,o=t.beforeTransform2,s=t.afterTransform2,l=t.targetAllTransform,c=n?(0,a.lw)(l,e,4):(0,a.lw)(e,l,4),u=(0,a.lw)((0,a.B8)(n?o:i,4),c,4);return(0,a.lw)(u,(0,a.B8)(n?s:r,4),4)}function rt(t){var e=t.datas,n=t.distX,i=t.distY,r=e.inverseBeforeMatrix,o=e.is3d,s=e.startDragBeforeDist,l=e.absoluteOrigin,c=o?4:3;return(0,a.Rd)((0,a.Di)(r,(0,a.tY)(l,[n,i]),c),s)}function ot(t,e){var n=t.datas,i=t.distX,r=t.distY,o=n.inverseBeforeMatrix,s=n.inverseMatrix,l=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,h=n.absoluteOrigin,d=l?4:3;return(0,a.Rd)((0,a.Di)(e?o:s,(0,a.tY)(h,[i,r]),d),e?c:u)}function at(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function st(t,e){var n=(e+1)/2;return[(0,o.Om)(t[0][0],t[1][0],n,1-n),(0,o.Om)(t[0][1],t[1][1],n,1-n)]}function lt(t,e){var n=st([t[0],t[1]],e[0]),i=st([t[2],t[3]],e[0]);return st([n,i],e[1])}function ct(t,e,n,i){return(0,a.lw)(t,an(e,i,n),i)}function ut(t,e){var n=ft(e);return{setTransform:function(i,r){void 0===r&&(r=-1),n.startTransforms=(0,o.cy)(i)?i:(0,o.Z3)(i),dt(t,e,r)},setTransformIndex:function(n){dt(t,e,n)}}}function ht(t,e,n){var i=ft(e).startTransforms;dt(t,e,(0,o.SL)(i,(function(t){return 0===t.indexOf("".concat(n,"("))})))}function dt(t,e,n){var i=ft(e),r=e.datas;if(r.transformIndex=n,-1!==n){var o=i.startTransforms[n];if(o){var a=t.state,l=(0,s.qg)([o],{"x%":function(t){return t/100*a.offsetWidth},"y%":function(t){return t/100*a.offsetHeight}});r.startValue=l[0].functionValue}}}function pt(t,e){ft(t).nextTransforms=(0,o.Z3)(e)}function ft(t){return t.originalDatas.beforeRenderable}function gt(t){return t.originalDatas.beforeRenderable.nextTransforms}function mt(t){return(gt(t)||[]).join(" ")}function vt(t){return ft(t).nextStyle}function yt(t,e,n,i,r){pt(r,e);var o=Ce.drag(t,K(r,t.state,n,i,!1)),a=o?o.transform:e;return y(y({transform:e,drag:o},Nn({transform:a},r)),{afterTransform:a})}function bt(t,e,n,i,r,l){var c=function(t,e,n,i){var r,l=t.transformOrigin,c=t.offsetMatrix,u=t.is3d?4:3;if((0,o.Kg)(n)){var h=e.beforeTransform,d=e.afterTransform;r=i?(0,a._C)((0,s.yV)(n),4,u):(0,a._C)((0,a.lw)((0,a.lw)(h,(0,s.yV)([n]),4),d,4),4,u)}else r=n;return ct(c,r,l,u)}(t.state,r,e,l),u=function(t,e,n,i){void 0===i&&(i=t.state.allMatrix);var r=t.state,o=r.width,a=r.height,s=r.is3d?4:3;return vn(i,[o/2*(1+e[0])+n[0],a/2*(1+e[1])+n[1]],s)}(t,n,i,c);return u}function wt(t,e,n,i,r,o,s){var l=bt(t,e,n,r,o,s),c=t.state,u=c.left,h=c.top,d=t.props.groupable,p=d?u:0,f=d?h:0,g=(0,a.Rd)(i,l);return(0,a.Rd)(g,[p,f])}function St(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function xt(t){var e=t("scale"),n=t("rotate"),i=t("translate"),r=[];return i&&"0px"!==i&&"none"!==i&&r.push("translate(".concat(i.split(/\s+/).join(","),")")),n&&"1"!==n&&"none"!==n&&r.push("rotate(".concat(n,")")),e&&"1"!==e&&"none"!==e&&r.push("scale(".concat(e.split(/\s+/).join(","),")")),r}function kt(t,e,n){for(var i,r,l,c=t,u=[],h=(0,o.ep)(t)||(0,o.uD)(t),d=!n&&t===e||t===h,p=d,f=!1,g=3,m=!1,v=cn(e,e,!0).offsetParent,y=1;c&&!p;){p=d;var w=At(c),S=w("position"),x=ln(c),k="fixed"===S,C=xt(w),M=(0,a.zs)(on(x)),T=void 0,A=!1,_=!1,P=0,D=0,O=0,L=0,N={hasTransform:!1,fixedContainer:null};k&&(m=!0,v=(N=pn(c)).fixedContainer);var F=M.length;f||16!==F&&!C.length||(f=!0,g=4,dn(u),l&&(l=(0,a._C)(l,3,4))),f&&9===F&&(M=(0,a._C)(M,3,4));var B=un(c,t),z=B.tagName,j=B.hasOffset,U=B.isSVG,G=B.origin,$=B.targetOrigin,H=b(B.offset,2),q=H[0],W=H[1];"svg"===z&&!c.ownerSVGElement&&l&&(u.push({type:"target",target:c,matrix:mn(c,g)}),u.push({type:"offset",target:c,matrix:(0,a.k8)(g)}));var Z=parseFloat(w("zoom"))||1;if(k)T=N.fixedContainer,A=!0;else{var Y=cn(c,e,!1,!0,w),K=Y.offsetZoom;if(T=Y.offsetParent,A=Y.isEnd,_=Y.isStatic,y*=K,(Y.isCustomElement||1!==K)&&_)q-=T.offsetLeft,W-=T.offsetTop;else if((R||I)&&Y.parentSlotElement){for(var X=T,J=0,Q=0;X&&St(X);)J+=X.offsetLeft,Q+=X.offsetTop,X=X.offsetParent;q-=J,W-=Q}}if(!E||V||!j||U||!_||"relative"!==S&&"static"!==S||(q-=T.offsetLeft,W-=T.offsetTop,d=d||A),k)j&&N.hasTransform&&(O=T.clientLeft,L=T.clientTop);else if(j&&v!==T&&(P=T.clientLeft,D=T.clientTop),j&&T===h){var tt=hn(c,!1);q+=tt[0],W+=tt[1]}if(u.push({type:"target",target:c,matrix:an(M,g,G)}),C.length&&(u.push({type:"offset",target:c,matrix:(0,a.k8)(g)}),u.push({type:"target",target:c,matrix:an((0,s.yV)(C),g,G)})),j){var et=c===t,nt=et?0:c.scrollLeft,it=et?0:c.scrollTop;u.push({type:"offset",target:c,matrix:(0,a.GD)([q-nt+P-O,W-it+D-L],g)})}else u.push({type:"offset",target:c,origin:G});if(1!==Z&&u.push({type:"zoom",target:c,matrix:an((0,a.kb)([Z,Z],g),g,[0,0])}),l||(l=M),i||(i=G),r||(r=$),p||k)break;c=T,d=A,n&&c!==h||(p=d)}return l||(l=(0,a.k8)(g)),i||(i=[0,0]),r||(r=[0,0]),{zoom:y,offsetContainer:v,matrixes:u,targetMatrix:l,transformOrigin:i,targetOrigin:r,is3d:f,hasFixed:m}}var Ct=null,Mt=null,Tt=null;function Et(t){t?(window.Map&&(Ct=new Map,Mt=new Map),Tt=[]):(Ct=null,Tt=null,Mt=null)}function At(t){var e=null==Ct?void 0:Ct.get(t);if(!e){var n=(0,o.zk)(t).getComputedStyle(t);if(!Ct)return function(t){return n[t]};e={style:n,cached:{}},Ct.set(t,e)}var i=e.cached,r=e.style;return function(t){return t in i||(i[t]=r[t]),i[t]}}function _t(t,e,n){var i=n.originalDatas;i.groupable=i.groupable||{};var r=i.groupable;r.childDatas=r.childDatas||[];var o=r.childDatas;return t.moveables.map((function(t,i){return o[i]=o[i]||{},o[i][e]=o[i][e]||{},y(y({},n),{isRequestChild:!0,datas:o[i][e],originalDatas:o[i]})}))}function Pt(t,e,n,i,r,o,a){var s=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=r.isPinch,u=r.datas,h=_t(t,e.name,r),d=t.moveables,p=[],f=h.map((function(t,r){var h=d[r],f=h.state,g=f.gestos,m=t;if(s)m=new X(a).dragStart(i,t),p.push(m);else{if(g[a]||(g[a]=u.childGestos[r]),!g[a])return;m=K(t,f,i,c,o,a),p.push(m)}var v=e[n](h,y(y({},m),{parentFlag:!0}));return l&&(g[a]=null),v}));return s&&(u.childGestos=d.map((function(t){return t.state.gestos[a]}))),{eventParams:f,childEvents:p}}function Dt(t,e,n,i,r,o){void 0===r&&(r=function(t,e){return e});var a=!!n.match(/End$/g),s=_t(t,e.name,i),l=t.moveables;return s.map((function(t,i){var s,c=l[i];s=r(c,t);var u=e[n](c,y(y({},s),{parentFlag:!0}));return u&&o&&o(c,t,u,i),a&&(c.state.gestos={}),u}))}function Ot(t,e,n,i){var r=n.fixedDirection,o=n.fixedPosition,s=lt(i.datas.startPositions||In(e.state),r),l=b((0,a.Di)((0,a.XI)(-t.rotation/180*Math.PI,3),[s[0]-o[0],s[1]-o[1],1],3),2),c=l[0],u=l[1];return i.datas.originalX=c,i.datas.originalY=u,i}function Lt(t,e,n,i){var r=t.getState(),a=r.renderPoses,s=r.rotation,l=r.direction,c=Mn(t.props,e).zoom,u=Ye(s/Math.PI*180),h={},d=t.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var p=d.renderDirectionMap;n.forEach((function(t){var e=t.dir;h[e]=!0}));var f=di(l);return n.map((function(t){var n=t.data,r=t.classNames,l=t.dir,d=W[l];if(!d||!h[l])return null;p[l]=!0;var g=((0,o.nF)(u,15)+f*Z[l]+720)%180,m={};return(0,o.xD)(n).forEach((function(t){m["data-".concat(t)]=n[t]})),i.createElement("div",y({className:nn.apply(void 0,w(["control","direction",l,e],b(r),!1)),"data-rotation":g,"data-direction":l},m,{key:"direction-".concat(l),style:Cn.apply(void 0,w([s,c],b(d.map((function(t){return a[t]}))),!1))}))}))}function It(t,e,n,i){var r=Mn(t.props,n),o=r.renderDirections,a=void 0===o?e:o,s=r.displayAroundControls;if(!a)return[];var l=!0===a?M:a;return w(w([],b(s?Bt(t,i,n,l):[]),!1),b(Lt(t,n,l.map((function(t){return{data:{},classNames:[],dir:t}})),i)),!1)}function Rt(t,e,n,i,r,a){for(var s=[],l=6;l<arguments.length;l++)s[l-6]=arguments[l];var c=(0,o.Mu)(n,i),u=e?(0,o.nF)(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:nn.apply(void 0,w(["line","direction",e?"edge":"",e],b(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:kn(n,i,r,c)})}function Vt(t,e,n,i,r){return(!0===n?C:n).map((function(n,o){var a=b(W[n],2),s=a[0],l=a[1];if(null!=l)return Rt(t,n,i[s],i[l],r,"".concat(e,"Edge").concat(o),e)})).filter(Boolean)}function Nt(t){return function(e,n){var i=Mn(e.props,t).edge;return i&&(!0===i||i.length)?w(w([],b(Vt(n,t,i,e.getState().renderPoses,e.props.zoom)),!1),b(function(t,e,n){return It(t,["nw","ne","sw","se"],e,n)}(e,t,n)),!1):Ft(e,t,n)}}function Ft(t,e,n){return It(t,M,e,n)}function Bt(t,e,n,i){var r=t.renderState;r.renderDirectionMap||(r.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,l=a.rotation,c=a.direction,u=r.renderDirectionMap,h=t.props.zoom,d=di(c),p=l/Math.PI*180;return(i||(0,o.xD)(u)).map((function(t){var i=W[t];if(!i)return null;var r=((0,o.nF)(p,15)+d*Z[t]+720)%180,a=["around-control"];return n&&a.push("direction",n),e.createElement("div",{className:nn.apply(void 0,w([],b(a),!1)),"data-rotation":r,"data-direction":t,key:"direction-around-".concat(t),style:Cn.apply(void 0,w([l,h],b(i.map((function(t){return s[t]}))),!1))})}))}function zt(t,e,n){var i=t||{},r=i.position,o=void 0===r?"client":r,a=i.left,s=void 0===a?-1/0:a,l=i.top,c=void 0===l?-1/0:l,u=i.right,h=void 0===u?1/0:u,d=i.bottom,p={position:o,left:s,top:c,right:h,bottom:void 0===d?1/0:d};return{vertical:Ut(p,e,!0),horizontal:Ut(p,n,!1)}}function jt(t,e){var n=t.state,i=n.containerClientRect,r=i.clientHeight,o=i.clientWidth,a=i.clientLeft,s=i.clientTop,l=n.snapOffset,c=l.left,u=l.top,h=l.right,d=l.bottom,p=e||t.props.bounds||{},f="css"===(p.position||"client"),g=p.left,m=void 0===g?-1/0:g,v=p.top,y=void 0===v?-1/0:v,b=p.right,w=void 0===b?f?-1/0:1/0:b,S=p.bottom,x=void 0===S?f?-1/0:1/0:S;return f&&(w=o+h-c-w,x=r+d-u-x),{left:m+c-a,right:w+c-a,top:y+u-s,bottom:x+u-s}}function Ut(t,e,n){var i=t[n?"left":"top"],r=t[n?"right":"bottom"],o=Math.min.apply(Math,w([],b(e),!1)),a=Math.max.apply(Math,w([],b(e),!1)),s=[];return i+1>o&&s.push({direction:"start",isBound:!0,offset:o-i,pos:i}),r-1<a&&s.push({direction:"end",isBound:!0,offset:a-r,pos:r}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort((function(t,e){return pi(e.offset)-pi(t.offset)}))}function Gt(t,e,n){return(n?t.map((function(t){return(0,a.e$)(t,n)})):t).some((function(t){return t[0]<e.left&&pi(t[0]-e.left)>.1||t[0]>e.right&&pi(t[0]-e.right)>.1||t[1]<e.top&&pi(t[1]-e.top)>.1||t[1]>e.bottom&&pi(t[1]-e.bottom)>.1}))}var $t=["left","right","center"],Ht=["top","bottom","middle"],qt={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Wt={start:"left",end:"right",center:"center"},Zt={start:"top",end:"bottom",center:"middle"};function Yt(t,e){var n=t.props,i=n.snappable,r=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=t.state,h=u.guidelines,d=u.enableSnap;return!(!i||!d||e&&!0!==i&&i.indexOf(e)<0||!(l||c||r||o||h&&h.length||a&&a.length||s&&s.length))}function Kt(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Xt(t,e){var n=function(t,e){var n=Kt(t),i={};for(var r in n)r in e&&n[r]&&(i[r]=e[r]);return i}(t,e),i=Ht.filter((function(t){return t in n})),r=$t.filter((function(t){return t in n}));return{horizontalNames:i,verticalNames:r,horizontal:i.map((function(t){return n[t]})),vertical:r.map((function(t){return n[t]}))}}var Jt="snapRotationThreshold",Qt="snapRotationDegrees",te="snapHorizontalThreshold",ee="snapVerticalThreshold";function ne(t,e,n,i,r,o,a){var s;void 0===i&&(i=[]),void 0===r&&(r=[]);var l=t.props,c=(null===(s=t.state.snapThresholdInfo)||void 0===s?void 0:s.multiples)||[1,1],u=qn(a,l[te],5),h=qn(o,l[ee],5);return ie(t.state.guidelines,e,n,i,r,u,h,c)}function ie(t,e,n,i,r,o,a,s){return{vertical:se(t,"vertical",e,a*s[0],i),horizontal:se(t,"horizontal",n,o*s[1],r)}}function re(t){var e="";return-1===t||"top"===t||"left"===t?e="start":0===t||"center"===t||"middle"===t?e="center":1!==t&&"right"!==t&&"bottom"!==t||(e="end"),e}function oe(t,e,n,i){var r=Xt(t.props.snapDirections,e),o=ne(t,r.vertical,r.horizontal,r.verticalNames.map((function(t){return re(t)})),r.horizontalNames.map((function(t){return re(t)})),n,i),a=re(r.horizontalNames[o.horizontal.index]),s=re(r.verticalNames[o.vertical.index]);return{vertical:y(y({},o.vertical),{direction:s}),horizontal:y(y({},o.horizontal),{direction:a})}}function ae(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],i=n.guidelineInfos[0],r=i.offset,o=i.dist,a=i.guideline;return{isSnap:e,offset:r,dist:o,pos:n.pos,guideline:a}}function se(t,e,n,i,r){var o,a;if(void 0===r&&(r=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s="vertical"===e?0:1,l=n.map((function(n,o){var a=r[o]||"",l=t.map((function(t){var e=t.pos,i=n-e[s];return{offset:i,dist:pi(i),guideline:t,direction:a}})).filter((function(t){var n=t.guideline,r=t.dist;return!(n.type!==e||r>i)})).sort((function(t,e){return t.dist-e.dist}));return{pos:n,index:o,guidelineInfos:l,direction:a}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),c=l.length>0;return{isSnap:c,index:c?l[0].index:-1,direction:null!==(a=null===(o=l[0])||void 0===o?void 0:o.direction)&&void 0!==a?a:"",posInfos:l}}function le(t,e){var n=pi(t.offset),i=pi(e.offset);return t.isBound&&e.isBound?i-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?i-n:t.isSnap?-1:e.isSnap||n<U?1:i<U?-1:n-i}function ce(t,e){return t.slice().sort((function(t,n){var i=t.sign[e],r=n.sign[e],o=t.offset[e],a=n.offset[e];return i?r?le({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:a}):-1:1}))[0]}function ue(t,e){var n=(0,o.G8)([e[0][0],e[1][0]]),i=(0,o.G8)([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:i<=t[1]}}function he(t,e){var n,i,r=b(e,2),o=r[0],a=r[1],s=a[0]-o[0],l=a[1]-o[1];return pi(s)<U&&(s=0),pi(l)<U&&(l=0),s?l?(n=l/s*(t[0]-o[0])+o[1],i=t[1]):(n=o[1],i=t[1]):(n=o[0],i=t[0]),n-i}function de(t,e,n,i){return void 0===i&&(i=U),t.every((function(t){var r=he(t,e);return r<=0===n||pi(r)<=i}))}function pe(t,e,n,i,r){return void 0===r&&(r=0),i&&e-r<=t||!i&&t<=n+r?{isBound:!0,offset:i?e-t:n-t}:{isBound:!1,offset:0}}function fe(t,e,n,i,r,o){var a,s,l=b(e,2),c=l[0],u=l[1],h=t[0],d=n[0],p=n[1],f=ti(p[1]-d[1]),g=u,m=c,v=-c/u;return ti(p[0]-d[0])?f||o&&!g?{isBound:!1,offset:0}:m?pe((d[1]-h[1])/v+h[0],d[0],p[0],i,r):{isBound:s=pi(a=d[1]-h[1])<=(r||0),offset:s?a:0}:o&&!m?{isBound:!1,offset:0}:g?pe(v*(d[0]-h[0])+h[1],d[1],p[1],i,r):{isBound:s=pi(a=d[0]-h[0])<=(r||0),offset:s?a:0}}function ge(t,e,n){return e.map((function(e){var i=function(t,e){var n=e.line,i=e.centerSign,r=e.verticalSign,o=e.horizontalSign,a=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=s.left,c=s.top,u=s.width,h=s.height,d=[[l,c],[l,c+h]],p=[[l,c],[l+u,c]],f=[[l+u,c],[l+u,c+h]],g=[[l,c+h],[l+u,c+h]];if(de([[l,c],[l+u,c],[l,c+h],[l+u,c+h]],n,i))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=fe(n,a,p,r),v=fe(n,a,g,r),y=fe(n,a,d,o),b=fe(n,a,f,o),w=m.isBound&&v.isBound,S=m.isBound||v.isBound,x=y.isBound&&b.isBound,k=y.isBound||b.isBound,C=Yn(m.offset,v.offset),M=Yn(y.offset,b.offset),T=[0,0],E=!1,A=!1;return pi(M)<pi(C)?(T=[C,0],E=S,A=w):(T=[0,M],E=k,A=x),{isAllBound:A,isVerticalBound:S,isHorizontalBound:k,isBound:E,offset:T}}(t,e),r=i.isBound,o=i.offset,a=i.isVerticalBound,s=i.isHorizontalBound,l=e.multiple,c=ot({datas:n,distX:o[0],distY:o[1]}).map((function(t,e){return t*(l[e]?2/l[e]:0)}));return{sign:l,isBound:r,isVerticalBound:a,isHorizontalBound:s,isSnap:!1,offset:c}}))}function me(t,e,n,i){var r=t.state,a=yn(r.allMatrix,100,100,r.is3d?4:3),s=lt(a,[0,0]);return function(t,e){var n=[],i=t[0],r=t[1];return i&&r?n.push([[0,2*r],t,[-i,r]],[[2*i,0],t,[i,-r]]):i?(n.push([[2*i,0],[i,1],[i,-1]]),e&&n.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):r?(n.push([[0,2*r],[1,r],[-1,r]]),e&&n.push([[-1,0],[-1,r],[-1,-r]],[[1,0],[1,r],[1,-r]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(n,i).map((function(t){var n=b(t,3),i=n[0],r=n[1],l=n[2],c=[lt(a,r),lt(a,l)],u=function(t){var e=b(t,2),n=e[0],i=e[1],r=i[0]-n[0],a=i[1]-n[1];Math.abs(r)<o._4&&(r=0),Math.abs(a)<o._4&&(a=0);var s=0,l=0,c=0;return r?a?(l=1,c=(s=-a/r)*n[0]-n[1]):(l=1,c=-n[1]):(s=-1,c=n[0]),[s,l,c].map((function(t){return(0,o.nF)(t,o._4)}))}(c),h=ue(s,c),d=h.vertical,p=h.horizontal;return{multiple:i,centerSign:he(s,c)<=0,verticalSign:d,horizontalSign:p,lineConstants:u,line:[lt(e,r),lt(e,l)]}}))}function ve(t,e,n,i){var r=i?t.map((function(t){return(0,a.e$)(t,i)})):t;return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].some((function(t){var i=he(n,t)<=0;return!de(e,t,i)}))}function ye(t,e,n,i,r){var a=function(t,e,n,i){var r=e[0]-t[0],a=e[1]-t[1];if(pi(r)<o._4&&(r=0),pi(a)<o._4&&(a=0),!r)return i?[0,0]:[0,n];if(!a)return i?[n,0]:[0,0];var s=a/r,l=t[1]-s*t[0];return i?[n,s*(e[0]+n)+l-e[1]]:[(e[1]+n-l)/s-e[0],n]}(t,e,n,i);if(!a)return{isOutside:!1,offset:[0,0]};var s=(0,o.l$)(t,e),l=(0,o.l$)(a,t),c=(0,o.l$)(a,e),u=l>s||c>s,h=b(ot({datas:r,distX:a[0],distY:a[1]}),2);return{offset:[h[0],h[1]],isOutside:u}}function be(t,e){return t.isBound?t.offset:e.isSnap?ae(e).offset:0}function we(t,e,n,i,r,s){if(!Yt(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var l=Ln(s.absolutePoses,[e,n]),c=bn(l),u=c.left,h=c.right,d=c.top,p=c.bottom,f={horizontal:l.map((function(t){return t[1]})),vertical:l.map((function(t){return t[0]}))},g=Se(t,r,Xt(Kt(t.props.snapDirections),{left:u,right:h,top:d,bottom:p,center:(u+h)/2,middle:(d+p)/2}),f),m=g.vertical,v=g.horizontal,w=function(t,e,n){var i,r=ge(t,me(t,e,[0,0],!1).map((function(t){return y(y({},t),{multiple:t.multiple.map((function(t){return 2*pi(t)}))})})),n),o=ce(r,0),s=ce(r,1),l=0,c=0,u=o.isVerticalBound||s.isVerticalBound,h=o.isHorizontalBound||s.isHorizontalBound;return(u||h)&&(i=b(function(t){var e=t.datas,n=t.distX,i=t.distY,r=(e.beforeMatrix,e.matrix),o=e.is3d,s=(e.startDragBeforeDist,e.startDragDist),l=e.absoluteOrigin,c=o?4:3;return(0,a.Rd)((0,a.Di)(r,(0,a.tY)(s,[n,i]),c),l)}({datas:n,distX:-o.offset[0],distY:-s.offset[1]}),2),l=i[0],c=i[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:h,offset:c}}}(t,l,s),S=w.vertical,x=w.horizontal,k=m.isSnap,C=v.isSnap,M=m.isBound||S.isBound,T=v.isBound||x.isBound,E=b(function(t,e,n,i,r){var s=b(e,2),l=s[0],c=s[1],u=b(n,2),h=u[0],d=u[1],p=b(i,2),f=p[0],g=p[1],m=b(r,2),v=m[0],y=m[1],w=-v,S=-y;if(t&&l&&c){w=0,S=0;var x=[];if(h&&d?x.push([0,y],[v,0]):h?x.push([v,0]):d?x.push([0,y]):f&&g?x.push([0,y],[v,0]):f?x.push([v,0]):g&&x.push([0,y]),x.length){x.sort((function(t,e){return Sn((0,a.Rd)([l,c],t))-Sn((0,a.Rd)([l,c],e))}));var k=x[0];if(k[0]&&pi(l)>o._4)w=-k[0],S=c*pi(l+w)/pi(l)-c;else if(k[1]&&pi(c)>o._4){var C=c;S=-k[1],w=l*pi(c+S)/pi(C)-l}if(t&&d&&h)if(pi(w)>o._4&&pi(w)<pi(v))w*=M=pi(v)/pi(w),S*=M;else if(pi(S)>o._4&&pi(S)<pi(y)){var M;w*=M=pi(y)/pi(S),S*=M}else w=Yn(-v,w),S=Yn(-y,S)}}else w=l||h?-v:0,S=c||d?-y:0;return[w,S]}(i,[e,n],[M,T],[k,C],[Yn(m.offset,S.offset),Yn(v.offset,x.offset)]),2);return[{isBound:M,isSnap:k,offset:E[0]},{isBound:T,isSnap:C,offset:E[1]}]}function Se(t,e,n,i){void 0===i&&(i=n);var r=zt(jt(t),i.vertical,i.horizontal),o=r.horizontal,a=r.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ne(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),l=s.horizontal,c=s.vertical,u=be(o[0],l),h=be(a[0],c),d=pi(u),p=pi(h);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:d,bounds:o,snap:l},vertical:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:h,dist:p,bounds:a,snap:c}}}function xe(t,e,n,i,r,o,a){void 0===a&&(a=[1,1]);var s=zt(e,n,i),l=s.horizontal,c=s.vertical,u=ie(t,n,i,[],[],r,o,a),h=u.horizontal,d=u.vertical,p=be(l[0],h),f=be(c[0],d),g=pi(p),m=pi(f);return{horizontal:{isBound:l[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:p,dist:g,bounds:l,snap:h},vertical:{isBound:c[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:f,dist:m,bounds:c,snap:d}}}function ke(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}var Ce={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,i=n.hideThrottleDragRotateLine,r=n.throttleDragRotate,a=n.zoom,s=t.getState(),l=s.dragInfo,c=s.beforeOrigin;if(i||!r||!l)return[];var u=l.dist;if(!u[0]&&!u[1])return[];var h=Sn(u),d=(0,o.Mu)(u,[0,0]);return[e.createElement("div",{className:nn("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(d,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,i=e.parentEvent,r=e.parentGesto,o=t.state,a=o.gestos,s=o.style;if(a.draggable)return!1;a.draggable=r||t.targetGesto,n.datas={},n.left=parseFloat(s.left||"")||0,n.top=parseFloat(s.top||"")||0,n.bottom=parseFloat(s.bottom||"")||0,n.right=parseFloat(s.right||"")||0,n.startValue=[0,0],tt(t,e),ht(t,e,"translate"),function(t,e){e.absolutePoses=In(t.state)}(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=Bn(t,e,y({set:function(t){n.startValue=t}},ut(t,e)));return!1!==(i||Un(t,"onDragStart",l))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(a.draggable=null,n.isPinch=!1),!!n.isDrag&&l},drag:function(t,e){if(e){et(t,e,"translate");var n=e.datas,i=e.parentEvent,r=e.parentFlag,s=e.isPinch,l=e.deltaOffset,c=e.useSnap,u=e.isRequest,h=e.isGroup,d=e.parentThrottleDrag,p=e.distX,f=e.distY,g=n.isDrag,m=n.prevDist,v=n.prevBeforeDist,w=n.startValue;if(g){l&&(p+=l[0],f+=l[1]);var S=t.props,x=S.parentMoveable,k=h?0:S.throttleDrag||d||0,C=i?0:S.throttleDragRotate||0,M=0,T=!1,E=!1,A=!1,_=!1;if(!i&&C>0&&(p||f)){var P=S.startDragRotate||0,D=(0,o.nF)(P+180*(0,o.Mu)([0,0],[p,f])/Math.PI,C)-P,O=f*Math.abs(Math.cos((D-90)/180*Math.PI)),L=Sn([p*Math.abs(Math.cos(D/180*Math.PI)),O]);M=D*Math.PI/180,p=L*Math.cos(M),f=L*Math.sin(M)}if(!s&&!i&&!r){var I=b(we(t,p,f,C,!c&&u||l,n),2),R=I[0],V=I[1];T=R.isSnap,E=R.isBound,A=V.isSnap,_=V.isBound,p+=R.offset,f+=V.offset}var N=(0,a.tY)(rt({datas:n,distX:p,distY:f}),w),F=(0,a.tY)(function(t){var e=t.datas,n=b(rt({datas:e,distX:t.distX,distY:t.distY}),2),i=n[0],r=n[1],o=it(e,(0,a.kN)([i,r],4));return(0,a.Di)(o,(0,a.ez)([0,0,0],4),4)}({datas:n,distX:p,distY:f}),w);(0,o.cC)(F,U),(0,o.cC)(N,U),C||(T||E||(F[0]=(0,o.nF)(F[0],k),N[0]=(0,o.nF)(N[0],k)),A||_||(F[1]=(0,o.nF)(F[1],k),N[1]=(0,o.nF)(N[1],k)));var B=(0,a.Rd)(N,w),z=(0,a.Rd)(F,w),j=(0,a.Rd)(z,m),G=(0,a.Rd)(B,v);n.prevDist=z,n.prevBeforeDist=B,n.passDelta=j,n.passDist=z;var $=n.left+B[0],H=n.top+B[1],q=n.right-B[0],W=n.bottom-B[1],Z=nt(n,"translate(".concat(F[0],"px, ").concat(F[1],"px)"),"translate(".concat(z[0],"px, ").concat(z[1],"px)"));if(pt(e,Z),t.state.dragInfo.dist=i?[0,0]:z,i||x||!j.every((function(t){return!t}))||!G.some((function(t){return!t}))){var Y=t.state,K=Y.width,X=Y.height,J=Bn(t,e,y({transform:Z,dist:z,delta:j,translate:F,beforeDist:B,beforeDelta:G,beforeTranslate:N,left:$,top:H,right:q,bottom:W,width:K,height:X,isPinch:s},Nn({transform:Z},e)));return!i&&Un(t,"onDrag",J),J}}}},dragAfter:function(t,e){var n=e.datas,i=n.deltaOffset;return!(!i[0]&&!i[1])&&(n.deltaOffset=[0,0],this.drag(t,y(y({},e),{deltaOffset:i})))},dragEnd:function(t,e){var n=e.parentEvent,i=e.datas;if(t.state.dragInfo=null,i.isDrag){i.isDrag=!1;var r=zn(t,e,{});return!n&&Un(t,"onDragEnd",r),r}},dragGroupStart:function(t,e){var n,i,r=e.datas,o=e.clientX,a=e.clientY,s=this.dragStart(t,e);if(!s)return!1;var l=Pt(t,this,"dragStart",[o||0,a||0],e,!1,"draggable"),c=l.childEvents,u=l.eventParams,h=Un(t,"onDragGroupStart",y(y({},s),{targets:t.props.targets,events:u}));r.isDrag=!1!==h;var d=null!==(i=null===(n=c[0])||void 0===n?void 0:n.datas.startValue)&&void 0!==i?i:[0,0];return r.throttleOffset=[d[0]%1,d[1]%1],!!r.isDrag&&s},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,y(y({},e),{parentThrottleDrag:t.props.throttleDrag})),i=Pt(t,this,"drag",e.datas.passDelta,e,!1,"draggable").eventParams;if(n){var r=y({targets:t.props.targets,events:i},n);return Un(t,"onDragGroup",r),r}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var i=Pt(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Un(t,"onDragGroupEnd",zn(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),i=0,r=0,o=!1;return{isControl:!1,requestStart:function(t){return o=t.useSnap,{datas:e,useSnap:o}},request:function(t){return"x"in t?i=t.x-n.left:"deltaX"in t&&(i+=t.deltaX),"y"in t?r=t.y-n.top:"deltaY"in t&&(r+=t.deltaY),{datas:e,distX:i,distY:r,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Me(t,e){return{fixedPosition:lt(t,e),fixedDirection:e,fixedOffset:[0,0]}}function Te(t,e){var n=t.allMatrix,i=t.is3d,r=t.width,o=t.height,a=i?4:3,s=function(t,e,n){return[e?t[0]/(e/2)-1:0,n?t[1]/(n/2)-1:0]}(e,r,o);return{fixedPosition:vn(n,e,a),fixedDirection:s,fixedOffset:[r?0:e[0],o?0:e[1]]}}var Ee=ni("resizable"),Ae={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:Nt("resizable"),dragControlCondition:Ee,viewClassName:ei("resizable"),dragControlStart:function(t,e){var n,i=e.inputEvent,r=e.isPinch,a=e.isGroup,s=e.parentDirection,l=e.parentGesto,c=e.datas,u=e.parentFixedDirection,h=e.parentEvent,d=Dn(s,r,i,c),p=t.state,f=p.target,g=p.width,m=p.height,v=p.gestos;if(!d||!f)return!1;if(v.resizable)return!1;v.resizable=l||t.controlGesto,!r&&tt(t,e),c.datas={},c.direction=d,c.startOffsetWidth=g,c.startOffsetHeight=m,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=p.inlineCSSWidth||p.cssWidth,c.startHeight=p.inlineCSSHeight||p.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[p.minOffsetWidth,p.minOffsetHeight],c.maxSize=[p.maxOffsetWidth,p.maxOffsetHeight]);var y=t.props.transformOrigin||"% %";function w(t){c.ratio=t&&isFinite(t)?t:0}function S(t){var e=Me(c.startPositions,t);c.fixedDirection=e.fixedDirection,c.fixedPosition=e.fixedPosition,c.fixedOffset=e.fixedOffset}function x(e){var n=Te(t.state,e);c.fixedDirection=n.fixedDirection,c.fixedPosition=n.fixedPosition,c.fixedOffset=n.fixedOffset}function k(t){c.minSize=[(0,o.jc)("".concat(t[0]),0)||0,(0,o.jc)("".concat(t[1]),0)||0]}function C(t){var e=[t[0]||1/0,t[1]||1/0];(0,o.Et)(e[0])&&!isFinite(e[0])||(e[0]=(0,o.jc)("".concat(e[0]),0)||1/0),(0,o.Et)(e[1])&&!isFinite(e[1])||(e[1]=(0,o.jc)("".concat(e[1]),0)||1/0),c.maxSize=e}c.transformOrigin=y&&(0,o.Kg)(y)?y.split(" "):y,c.startOffsetMatrix=p.offsetMatrix,c.startTransformOrigin=p.transformOrigin,c.isWidth=null!==(n=null==e?void 0:e.parentIsWidth)&&void 0!==n?n:!d[0]&&!d[1]||d[0]||!d[1],c.startPositions=In(t.state),w(g/m),S(u||[-d[0],-d[1]]),c.setFixedDirection=S,c.setFixedPosition=x,c.setMin=k,c.setMax=C;var M=Bn(t,e,{direction:d,startRatio:c.ratio,set:function(t){var e=b(t,2),n=e[0],i=e[1];c.startWidth=n,c.startHeight=i},setMin:k,setMax:C,setRatio:w,setFixedDirection:S,setFixedPosition:x,setOrigin:function(t){c.transformOrigin=t},dragStart:Ce.dragStart(t,(new X).dragStart([0,0],e))}),T=h||Un(t,"onResizeStart",M);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,!1!==T&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),!!c.isResize&&M},dragControl:function(t,e){var n,i=e.datas,r=e.parentFlag,l=e.isPinch,c=e.parentKeepRatio,u=e.dragClient,h=e.parentDist,d=e.useSnap,p=e.isRequest,f=e.isGroup,g=e.parentEvent,m=e.resolveMatrix,v=i.isResize,w=i.transformOrigin,S=i.startWidth,x=i.startHeight,k=i.prevWidth,C=i.prevHeight,M=i.minSize,T=i.maxSize,E=i.ratio,A=i.startOffsetWidth,_=i.startOffsetHeight,P=i.isWidth;if(v){if(m){var D=t.state.is3d,O=i.startOffsetMatrix,L=i.startTransformOrigin,I=D?4:3,R=(0,s.yV)(gt(e)),V=Math.sqrt(R.length);I!==V&&(R=(0,a._C)(R,V,I));var N=ct(O,R,L,I),F=yn(N,A,_,I);i.startPositions=F,i.nextTargetMatrix=R,i.nextAllMatrix=N}var B=Mn(t.props,"resizable"),z=B.resizeFormat,j=B.throttleResize,G=void 0===j?r?0:1:j,$=B.parentMoveable,H=B.keepRatioFinally,q=i.direction,W=q,Z=0,Y=0;q[0]||q[1]||(W=[1,1]);var X=E&&(null!=c?c:B.keepRatio)||!1,J=b(pt(),2),Q=J[0],tt=J[1];g||(i.setFixedDirection(i.fixedDirection),Un(t,"onBeforeResize",Bn(t,e,{startFixedDirection:i.startFixedDirection,startFixedPosition:i.startFixedPosition,setFixedDirection:function(t){var e;return i.setFixedDirection(t),e=b(pt(),2),Q=e[0],tt=e[1],[Q,tt]},setFixedPosition:function(t){var e;return i.setFixedPosition(t),e=b(pt(),2),Q=e[0],tt=e[1],[Q,tt]},boundingWidth:Q,boundingHeight:tt,setSize:function(t){var e;e=b(t,2),Q=e[0],tt=e[1]}},!0)));var et=u;u||(et=!r&&l?function(t){return lt(In(t.state),[0,0])}(t):i.fixedPosition);var nt=[0,0];if(l||(nt=function(t,e,n,i,r,o,a){if(!Yt(t,"resizable"))return[0,0];var s=a.fixedDirection,l=a.nextAllMatrix,c=t.state,u=c.allMatrix,h=c.is3d;return Ze(t,(function(t,i){return He(l||u,e+t,n+i,s,r,h)}),e,n,i,r,o,a)}(t,Q,tt,q,et,!d&&p,i)),h&&(!h[0]&&(nt[0]=0),!h[1]&&(nt[1]=0)),X){W[0]&&W[1]&&nt[0]&&nt[1]&&(pi(nt[0])>pi(nt[1])?nt[1]=0:nt[0]=0);var it=!nt[0]&&!nt[1];it&&ft(),W[0]&&!W[1]||nt[0]&&!nt[1]||it&&P?(Q+=nt[0],tt=Q/E):(!W[0]&&W[1]||!nt[0]&&nt[1]||it&&!P)&&(tt+=nt[1],Q=tt*E)}else Q+=nt[0],tt+=nt[1],Q=Math.max(0,Q),tt=Math.max(0,tt);n=b((0,o.u0)([Q,tt],M,T,!!X&&E),2),Q=n[0],tt=n[1],ft(),X&&(f||H)&&(P?tt=Q/E:Q=tt*E);var rt=[(Z=Q-A)-k,(Y=tt-_)-C];i.prevWidth=Z,i.prevHeight=Y;var ot=function(t,e,n,i,r,s){var l=t.props.groupable,c=t.state,u=c.transformOrigin,h=c.offsetMatrix,d=c.is3d,p=c.width,f=c.height,g=c.left,m=c.top,v=s.fixedDirection,y=s.nextTargetMatrix||c.targetMatrix,b=d?4:3,w=function(t,e,n,i,r,a){return void 0===i&&(i=e),void 0===r&&(r=n),void 0===a&&(a=[0,0]),t?t.map((function(t,s){var l=(0,o.hg)(t),c=l.value,u=l.unit,h=s?r:i,d=s?n:e;return"%"===t||isNaN(c)?d*(h?a[s]/h:0):"%"!==u?c:d*c/100})):a}(r,e,n,p,f,u),S=l?g:0,x=l?m:0,k=function(t,e,n,i,r,o){var a=lt(yn(e,n,i,r),o);return[t[0]-a[0],t[1]-a[1]]}(i,ct(h,y,w,b),e,n,b,v);return(0,a.Rd)(k,[S,x])}(t,Q,tt,et,w,i);if($||!rt.every((function(t){return!t}))||!ot.every((function(t){return!t}))){var at=Ce.drag(t,K(e,t.state,ot,!!l,!1,"draggable")),st=at.transform,ut=S+Z,ht=x+Y,dt=Bn(t,e,y({width:ut,height:ht,offsetWidth:Math.round(Q),offsetHeight:Math.round(tt),startRatio:E,boundingWidth:Q,boundingHeight:tt,direction:q,dist:[Z,Y],delta:rt,isPinch:!!l,drag:at},Fn({style:{width:"".concat(ut,"px"),height:"".concat(ht,"px")},transform:st},at,e)));return!g&&Un(t,"onResize",dt),dt}}function pt(){var t=i.fixedDirection,n=si(W,X,i,e);Z=n.distWidth,Y=n.distHeight;var r=W[0]-t[0]||X?Math.max(A+Z,U):A,o=W[1]-t[1]||X?Math.max(_+Y,U):_;return X&&A&&_&&(P?o=r/E:r=o*E),[r,o]}function ft(){var t;z&&(t=b(z([Q,tt]),2),Q=t[0],tt=t[1]),Q=(0,o.nF)(Q,G),tt=(0,o.nF)(tt,G)}},dragControlAfter:function(t,e){var n=e.datas,i=n.isResize,r=n.startOffsetWidth,o=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(i&&!1!==t.props.checkResizableError){var l=t.state,c=l.width-(r+a),u=l.height-(o+s),h=pi(c)>3,d=pi(u)>3;return h&&(n.startWidth+=c,n.startOffsetWidth+=c,n.prevWidth+=c),d&&(n.startHeight+=u,n.startOffsetHeight+=u,n.prevHeight+=u),h||d?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var n=e.datas,i=e.parentEvent;if(n.isResize){n.isResize=!1;var r=zn(t,e,{});return!i&&Un(t,"onResizeEnd",r),r}},dragGroupControlCondition:Ee,dragGroupControlStart:function(t,e){var n=e.datas,i=this.dragControlStart(t,y(y({},e),{isGroup:!0}));if(!i)return!1;var r=_t(t,"resizable",e),o=n.startOffsetWidth,a=n.startOffsetHeight;function s(){var t=n.minSize;r.forEach((function(e){var n=e.datas,i=n.minSize,r=n.startOffsetWidth,s=n.startOffsetHeight,l=o*(r?i[0]/r:0),c=a*(s?i[1]/s:0);t[0]=Math.max(t[0],l),t[1]=Math.max(t[1],c)}))}function l(){var t=n.maxSize;r.forEach((function(e){var n=e.datas,i=n.maxSize,r=n.startOffsetWidth,s=n.startOffsetHeight,l=o*(r?i[0]/r:0),c=a*(s?i[1]/s:0);t[0]=Math.min(t[0],l),t[1]=Math.min(t[1],c)}))}var c=Dt(t,this,"dragControlStart",e,(function(e,i){return Ot(t,e,n,i)}));s(),l();var u=function(e){i.setFixedDirection(e),c.forEach((function(i,o){i.setFixedDirection(e),Ot(t,i.moveable,n,r[o])}))};n.setFixedDirection=u;var h=y(y({},i),{targets:t.props.targets,events:c.map((function(t){return y(y({},t),{setMin:function(e){t.setMin(e),s()},setMax:function(e){t.setMax(e),l()}})})),setFixedDirection:u,setMin:function(t){i.setMin(t),s()},setMax:function(t){i.setMax(t),l()}}),d=Un(t,"onResizeGroupStart",h);return n.isResize=!1!==d,!!n.isResize&&i},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var i=Mn(t.props,"resizable");jn(t,"onBeforeResize",(function(n){Un(t,"onBeforeResizeGroup",Bn(t,e,y(y({},n),{targets:i.targets}),!0))}));var r=this.dragControl(t,y(y({},e),{isGroup:!0}));if(r){var o=r.boundingWidth,s=r.boundingHeight,l=r.dist,c=i.keepRatio,u=[o/(o-l[0]),s/(s-l[1])],h=n.fixedPosition,d=Dt(t,this,"dragControl",e,(function(e,n){var i=b((0,a.Di)((0,a.XI)(t.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),2),r=i[0],o=i[1];return y(y({},n),{parentDist:null,parentScale:u,dragClient:(0,a.tY)(h,[r,o]),parentKeepRatio:c})})),p=y({targets:i.targets,events:d},r);return Un(t,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var i=Dt(t,this,"dragControlEnd",e);return Un(t,"onResizeGroupEnd",zn(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=0,i=0,r=!1,o=t.getRect();return{isControl:!0,requestStart:function(t){var n;return r=t.useSnap,{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(n=null==t?void 0:t.horizontal)||void 0===n||n,useSnap:r}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-o.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?i=t.offsetHeight-o.offsetHeight:"deltaHeight"in t&&(i+=t.deltaHeight),{datas:e,parentDist:[n,i],parentKeepRatio:t.keepRatio,useSnap:r}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:r}}}},unset:function(t){t.state.gestos.resizable=null}};function _e(t,e,n,i,r){var s=t.props.groupable,l=t.state,c=l.is3d?4:3,u=e.origin,h=vn(t.state.rootMatrix,(0,a.Rd)([u[0],u[1]],s?[0,0]:[l.left,l.top]),c),d=(0,a.tY)([r.left,r.top],h);e.startAbsoluteOrigin=d,e.prevDeg=(0,o.Mu)(d,[n,i])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=(0,o.l$)(d,[n,i])}function Pe(t,e,n){var i=n.defaultDeg,r=n.prevDeg,o=r%360,a=Math.floor(r/360);o<0&&(o+=360),o>t&&o>270&&t<90?++a:o<t&&o<90&&t>270&&--a;var s=e*(360*a+t-i);return n.prevDeg=i+s,s}function De(t,e,n,i){return Pe((0,o.Mu)(i.startAbsoluteOrigin,[t,e])/Math.PI*180,n,i)}function Oe(t,e,n,i,r,s){var l=t.props.throttleRotate,c=void 0===l?0:l,u=n.prevSnapDeg,h=0,d=!1;if(s){var p=function(t,e,n,i){var r,s=t.props,l=null!==(r=s[Jt])&&void 0!==r?r:5,c=s[Qt];if(Yt(t,"rotatable")){var u=e.pos1,h=e.pos2,d=e.pos3,p=e.pos4,f=e.origin,g=n*Math.PI/180,m=[u,h,d,p].map((function(t){return(0,a.Rd)(t,f)})),v=m.map((function(t){return(0,a.e$)(t,g)})),y=w(w([],b(function(t,e,n,i,r){if(!t.props.bounds)return[];var a=r*Math.PI/180,s=jt(t),l=s.left,c=s.top,u=s.right,h=s.bottom,d=l-i[0],p=u-i[0],f=c-i[1],g=h-i[1],m={left:d,top:f,right:p,bottom:g};if(!Gt(n,m,0))return[];var v=[];return[[d,0],[p,0],[f,1],[g,1]].forEach((function(t){var i=b(t,2),r=i[0],s=i[1];n.forEach((function(t){var n=(0,o.Mu)([0,0],t);v.push.apply(v,w([],b(function(t,e,n){var i=Sn(t),r=Math.sqrt(i*i-e*e)||0;return[r,-r].sort((function(e,i){return pi(e-t[n?0:1])-pi(i-t[n?0:1])})).map((function(t){return(0,o.Mu)([0,0],n?[t,e]:[e,t])}))}(t,r,s).map((function(t){return a+t-n})).filter((function(t){return!Gt(e,m,t)})).map((function(t){return(0,o.nF)(180*t/Math.PI,U)}))),!1))}))})),v}(t,m,v,f,n)),!1),b(function(t,e,n,i,r){var a=t.props.innerBounds,s=r*Math.PI/180;if(!a)return[];var l=a.left,c=a.top,u=a.width,h=a.height,d=l-i[0],p=l+u-i[0],f=c-i[1],g=c+h-i[1],m=[[d,f],[p,f],[d,g],[p,g]],v=lt(n,[0,0]);if(!ve(n,m,v,0))return[];var y=[],S=m.map((function(t){return[Sn(t),(0,o.Mu)([0,0],t)]}));return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach((function(t){var n=(0,o.Mu)([0,0],function(t){var e=b(t,2),n=e[0],i=e[1],r=i[0]-n[0],o=i[1]-n[1];if(!r)return[n[0],0];if(!o)return[0,n[1]];var a=o/r,s=-a*n[0]+n[1];return[-s/(a+1/a),s/(a*a+1)]}(t)),i=function(t){var e=b(t,2),n=e[0],i=e[1],r=i[0]-n[0],o=i[1]-n[1];if(!r)return pi(n[0]);if(!o)return pi(n[1]);var a=o/r;return pi((-a*n[0]+n[1])/Math.sqrt(Math.pow(a,2)+1))}(t);y.push.apply(y,w([],b(S.filter((function(t){var e=b(t,1)[0];return e&&i<=e})).map((function(t){var e=b(t,2),r=e[0],o=e[1],a=Math.acos(r?i/r:0);return[s+(o+a)-n,s+(o-a)-n]})).reduce((function(t,e){return t.push.apply(t,w([],b(e),!1)),t}),[]).filter((function(t){return!ve(e,m,v,t)})).map((function(t){return(0,o.nF)(180*t/Math.PI,U)}))),!1))})),y}(t,m,v,f,n)),!1);y.sort((function(t,e){return pi(t-n)-pi(e-n)}));var S=y.length>0;if(S)return{isSnap:S,dist:S?y[0]:n}}if((null==c?void 0:c.length)&&l){var x=c.slice().sort((function(t,e){return Xe(t,i)-Xe(e,i)}))[0];if(Xe(x,i)<=l)return{isSnap:!0,dist:n+Ke(i,x)-i}}return{isSnap:!1,dist:n}}(t,e,i,r+i);d=p.isSnap,h=r+p.dist}d||(h=(0,o.nF)(r+i,c));var f=h-r;return n.prevSnapDeg=f,[f-u,f,h]}function Le(t,e,n){var i=b(e,4),r=i[0],a=i[1],s=i[2],l=i[3];if("none"===t)return[];if((0,o.cy)(t))return t.map((function(t){return Le(t,[r,a,s,l],n)[0]}));var c=b((t||"top").split("-"),2),u=c[0],h=c[1],d=[r,a];"left"===u?d=[s,r]:"right"===u?d=[a,l]:"bottom"===u&&(d=[l,s]);var p=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2],f=En(d,n);if(h){var g="top"===h||"left"===h,m="bottom"===u||"left"===u;p=d[g&&!m||!g&&m?0:1]}return[[p,f]]}function Ie(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if((0,o.nB)(n,nn("rotation-control"))||t.props.rotateAroundControls&&(0,o.nB)(n,nn("around-control"))||(0,o.nB)(n,nn("control"))&&(0,o.nB)(n,nn("rotatable")))return!0;var i=t.props.rotationTarget;return!!i&&ri(i,!0).some((function(t){return!!t&&(n===t||n.contains(t))}))}var Re={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[".rotation {\nposition: absolute;\nheight: 40px;\nwidth: 1px;\ntransform-origin: 50% 100%;\nheight: calc(40px * var(--zoom));\ntop: auto;\nleft: 0;\nbottom: 100%;\nwill-change: transform;\n}\n.rotation .rotation-line {\ndisplay: block;\nwidth: 100%;\nheight: 100%;\ntransform-origin: 50% 50%;\n}\n.rotation .rotation-control {\nborder-color: #4af;\nborder-color: var(--moveable-color);\nbackground:#fff;\ncursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\ncursor: alias;\n}\n.rotatable.direction.control.move {\ncursor: move;\n}\n"],viewClassName:function(t){return t.isDragging("rotatable")?nn("view-rotation-dragging"):""},render:function(t,e){var n=Mn(t.props,"rotatable"),i=n.rotatable,r=n.rotationPosition,a=n.zoom,s=n.renderDirections,l=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),h=u.renderPoses,d=u.direction;if(!i)return null;var p=Le(r,h,d),f=[];if(p.forEach((function(t,n){var i=b(t,2),r=i[0],o=i[1];f.push(e.createElement("div",{key:"rotation".concat(n),className:nn("rotation"),style:{transform:"translate(-50%) translate(".concat(r[0],"px, ").concat(r[1],"px) rotate(").concat(o,"rad)")}},e.createElement("div",{className:nn("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:nn("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))})),s){var g=(0,o.xD)(c||{}),m={};g.forEach((function(t){c[t].forEach((function(e){m[e]=t}))}));var v=[];(0,o.cy)(s)&&(v=s.map((function(t){var e=m[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}}))),f.push.apply(f,w([],b(Lt(t,"rotatable",v,e)),!1))}return l&&f.push.apply(f,w([],b(Bt(t,e)),!1)),f},dragControlCondition:Ie,dragControlStart:function(t,e){var n,i,r=e.datas,s=e.clientX,l=e.clientY,c=e.parentRotate,u=e.parentFlag,h=e.isPinch,d=e.isRequest,p=t.state,f=p.target,g=p.left,m=p.top,v=p.direction,w=p.beforeDirection,S=p.targetTransform,x=p.moveableClientRect,k=p.offsetMatrix,C=p.targetMatrix,M=p.allMatrix,T=p.width,E=p.height;if(!d&&!f)return!1;var A=t.getRect();r.rect=A,r.transform=S,r.left=g,r.top=m;var _=function(e){var n=Te(t.state,e);r.fixedDirection=n.fixedDirection,r.fixedOffset=n.fixedOffset,r.fixedPosition=n.fixedPosition,j&&j.setFixedPosition(e)},P=function(e){var n=function(t,e){var n=t.allMatrix,i=t.is3d,r=t.width,o=t.height,a=i?4:3;return{fixedPosition:vn(n,[r/2*(1+e[0]),o/2*(1+e[1])],a),fixedDirection:e,fixedOffset:[0,0]}}(t.state,e);r.fixedDirection=n.fixedDirection,r.fixedOffset=n.fixedOffset,r.fixedPosition=n.fixedPosition,j&&j.setFixedDirection(e)},D=s,O=l;if(d||h||u){var L=c||0;r.beforeInfo={origin:A.beforeOrigin,prevDeg:L,defaultDeg:L,prevSnapDeg:0,startDist:0},r.afterInfo=y(y({},r.beforeInfo),{origin:A.origin}),r.absoluteInfo=y(y({},r.beforeInfo),{origin:A.origin,startValue:L})}else{var I=null===(i=e.inputEvent)||void 0===i?void 0:i.target;if(I){var R=I.getAttribute("data-direction")||"",V=q[R];if(V){r.isControl=!0,r.isAroundControl=(0,o.nB)(I,nn("around-control")),r.controlDirection=V;var N=I.getAttribute("data-resolve");N&&(r.resolveAble=N);var F=function(t,e,n){var i=16===t.length?4:3,r=e.map((function(e){return vn(t,e,i)})),o=n.left,a=n.top;return r.map((function(t){return[t[0]+o,t[1]+a]}))}(p.rootMatrix,p.renderPoses,x);n=b(lt(F,V),2),D=n[0],O=n[1]}}r.beforeInfo={origin:A.beforeOrigin},r.afterInfo={origin:A.origin},r.absoluteInfo={origin:A.origin,startValue:A.rotation};var B=_;_=function(e){var n=p.is3d?4:3,i=b((0,a.tY)((0,a.$z)(C,n),e),2),o=i[0],s=i[1],l=(0,a.Di)(k,(0,a.ez)([o,s],n)),c=(0,a.Di)(M,(0,a.ez)([e[0],e[1]],n));B(e);var u=p.posDelta;r.beforeInfo.origin=(0,a.Rd)(l,u),r.afterInfo.origin=(0,a.Rd)(c,u),r.absoluteInfo.origin=(0,a.Rd)(c,u),_e(t,r.beforeInfo,D,O,x),_e(t,r.afterInfo,D,O,x),_e(t,r.absoluteInfo,D,O,x)},P=function(t){var e=lt([[0,0],[T,0],[0,E],[T,E]],t);_(e)}}r.startClientX=D,r.startClientY=O,r.direction=v,r.beforeDirection=w,r.startValue=0,r.datas={},ht(t,e,"rotate");var z=!1,j=!1;r.isControl&&r.resolveAble&&"resizable"===r.resolveAble&&(j=Ae.dragControlStart(t,y(y({},new X("resizable").dragStart([0,0],e)),{parentPosition:r.controlPosition,parentFixedPosition:r.fixedPosition}))),j||(z=Ce.dragStart(t,(new X).dragStart([0,0],e))),_(function(t){var e=t.props,n=e.groupable,i=e.svgOrigin,r=t.getState(),o=r.offsetWidth,a=r.offsetHeight,s=r.svg,l=r.transformOrigin;return!n&&s&&i?ci(i,o,a):l}(t));var U=Bn(t,e,y(y({set:function(t){r.startValue=t*Math.PI/180},setFixedDirection:P,setFixedPosition:_},ut(t,e)),{dragStart:z,resizeStart:j})),G=Un(t,"onRotateStart",U);return r.isRotate=!1!==G,p.snapRenderInfo={request:e.isRequest},!!r.isRotate&&U},dragControl:function(t,e){var n,i,r,s=e.datas,l=e.clientDistX,c=e.clientDistY,u=e.parentRotate,h=e.parentFlag,d=e.isPinch,p=e.groupDelta,f=e.resolveMatrix,g=s.beforeDirection,m=s.beforeInfo,v=s.afterInfo,w=s.absoluteInfo,S=s.isRotate,x=s.startValue,k=s.rect,C=s.startClientX,M=s.startClientY;if(S){et(t,e,"rotate");var T,E,A,_,P,D,O,L,I,R=function(t){return J(t.datas.beforeTransform,[50,50],100,100).direction}(e),V=g*R,N=t.props.parentMoveable,F=180/Math.PI*x,B=w.startValue,z=!1,j=C+l,U=M+c;if(!h&&"parentDist"in e){var G=e.parentDist;E=G,P=G,L=G}else d||h?(E=Pe(u,g,m),P=Pe(u,V,v),L=Pe(u,V,w)):(E=De(j,U,g,m),P=De(j,U,V,v),L=De(j,U,V,w),z=!0);if(Un(t,"onBeforeRotate",Bn(t,e,{beforeRotation:F+E,rotation:F+P,absoluteRotation:B+L,setRotation:function(t){E=P=t-F,L=P}},!0)),T=(n=b(Oe(t,k,m,E,F,z),3))[0],E=n[1],A=n[2],_=(i=b(Oe(t,k,v,P,F,z),3))[0],P=i[1],D=i[2],O=(r=b(Oe(t,k,w,L,B,z),3))[0],L=r[1],I=r[2],O||_||T||N||f){var $=nt(s,"rotate(".concat(D,"deg)"),"rotate(".concat(P,"deg)"));f&&(s.fixedPosition=bt(t,s.targetAllTransform,s.fixedDirection,s.fixedOffset,s));var H=function(t,e,n){var i=n.fixedDirection,r=n.fixedPosition,o=n.fixedOffset;return wt(t,"rotate(".concat(e,"deg)"),i,r,o,n)}(t,P,s),q=(0,a.Rd)((0,a.tY)(p||[0,0],H),s.prevInverseDist||[0,0]);s.prevInverseDist=H,s.requestValue=null;var W=yt(t,$,q,d,e),Z=W,Y=(0,o.l$)([j,U],w.startAbsoluteOrigin)-w.startDist,X=void 0;if("resizable"===s.resolveAble){var Q=Ae.dragControl(t,y(y({},K(e,t.state,[e.deltaX,e.deltaY],!!d,!1,"resizable")),{resolveMatrix:!0,parentDistance:Y}));Q&&(X=Q,Z=Fn(Z,Q,e))}var tt=Bn(t,e,y(y({delta:_,dist:P,rotate:D,rotation:D,beforeDist:E,beforeDelta:T,beforeRotate:A,beforeRotation:A,absoluteDist:L,absoluteDelta:O,absoluteRotate:I,absoluteRotation:I,isPinch:!!d,resize:X},W),Z));return Un(t,"onRotate",tt),tt}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var i=zn(t,e,{});return Un(t,"onRotateEnd",i),i}},dragGroupControlCondition:Ie,dragGroupControlStart:function(t,e){var n=e.datas,i=t.state,r=i.left,o=i.top,s=i.beforeOrigin,l=this.dragControlStart(t,e);if(!l)return!1;l.set(n.beforeDirection*t.rotation);var c=Dt(t,this,"dragControlStart",e,(function(t,e){var n=t.state,i=n.left,l=n.top,c=n.beforeOrigin,u=(0,a.tY)((0,a.Rd)([i,l],[r,o]),(0,a.Rd)(c,s));return e.datas.startGroupClient=u,e.datas.groupClient=u,y(y({},e),{parentRotate:0})})),u=Un(t,"onRotateGroupStart",y(y({},l),{targets:t.props.targets,events:c}));return n.isRotate=!1!==u,!!n.isRotate&&l},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){jn(t,"onBeforeRotate",(function(n){Un(t,"onBeforeRotateGroup",Bn(t,e,y(y({},n),{targets:t.props.targets}),!0))}));var i=this.dragControl(t,e);if(i){var r=n.beforeDirection,o=i.beforeDist,s=o/180*Math.PI,l=Dt(t,this,"dragControl",e,(function(t,e){var n=e.datas.startGroupClient,i=b(e.datas.groupClient,2),l=i[0],c=i[1],u=b((0,a.e$)(n,s*r),2),h=u[0],d=u[1],p=[h-l,d-c];return e.datas.groupClient=[h,d],y(y({},e),{parentRotate:o,groupDelta:p})}));t.rotation=r*i.beforeRotation;var c=y({targets:t.props.targets,events:l,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},i);return Un(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var i=Dt(t,this,"dragControlEnd",e);return Un(t,"onRotateGroupEnd",zn(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=0,i=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-i),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Ve(t,e){return function(t,e){var n,i=t.direction,r=t.classNames,o=t.size,a=t.pos,s=t.zoom,l=t.key,c="horizontal"===i,u=c?"Y":"X";return e.createElement("div",{key:l,className:r.join(" "),style:(n={},n[c?"width":"height"]="".concat(o),n.transform="translate(".concat(a[0],", ").concat(a[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(s,")"),n)})}(y(y({},t),{classNames:w([nn("line","guideline",t.direction)],b(t.classNames),!1).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat((0,o.nF)(t,.1),"px")}))}),e)}function Ne(t,e,n,i,r,o,a,s){var l=t.props.zoom;return n.map((function(t,n){var c=t.type,u=t.pos,h=[0,0];return h[a]=i,h[a?0:1]=-r+u,Ve({key:"".concat(e,"TargetGuideline").concat(n),classNames:[nn("target","bold",c)],posValue:h,sizeValue:o,zoom:l,direction:e},s)}))}function Fe(t,e,n,i,r,o){var a=t.props,s=a.zoom,l=a.isDisplayInnerSnapDigit,c="horizontal"===e?Wt:Zt,u=r[c.start],h=r[c.end];return n.filter((function(t){var e=t.hide,n=t.elementRect;if(e)return!1;if(l&&n){var i=n.rect;if(i[c.start]<=u&&h<=i[c.end])return!1}return!0})).map((function(t,n){var r=t.pos,a=t.size,l=t.element,c=t.className,u=[-i[0]+r[0],-i[1]+r[1]];return Ve({key:"".concat(e,"-default-guideline-").concat(n),classNames:l?[nn("bold"),c]:[nn("normal"),c],direction:e,posValue:u,sizeValue:a,zoom:s},o)}))}function Be(t,e,n,i,r,o,a,s){var l,c=t.props,u=c.snapDigit,h=void 0===u?0:u,d=c.isDisplaySnapDigit,p=void 0===d||d,f=c.snapDistFormat,g=void 0===f?function(t,e){return t}:f,m=c.zoom,v="horizontal"===e?"X":"Y",y="vertical"===e?"height":"width",b=Math.abs(r),w=p?parseFloat(b.toFixed(h)):0;return s.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(i),className:nn("guideline-group",e),style:(l={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},l[y]="".concat(b,"px"),l)},Ve({direction:e,classNames:[nn(n),a],size:"100%",posValue:[0,0],sizeValue:b,zoom:m},s),s.createElement("div",{className:nn("size-value","gap"),style:{transform:"translate".concat(v,"(-50%) scale(").concat(m,")")}},w>0?g(w,e):""))}function ze(t){var e,n,i=t.state,r=i.containerClientRect,a=i.hasFixed,s=r.overflow,c=r.scrollHeight,u=r.scrollWidth,h=r.clientHeight,d=r.clientWidth,p=r.clientLeft,f=r.clientTop,g=t.props,m=g.snapGap,v=void 0===m||m,S=g.verticalGuidelines,x=g.horizontalGuidelines,k=g.snapThreshold,C=void 0===k?5:k,M=g.maxSnapElementGuidelineDistance,T=void 0===M?1/0:M,E=g.isDisplayGridGuidelines,A=bn(In(t.state)),_=A.top,P=A.left,D=A.bottom,O=A.right,L={top:_,left:P,bottom:D,right:O,center:(P+O)/2,middle:(_+D)/2},I=function(t){var e=t.state,n=t.props.elementGuidelines,i=void 0===n?[]:n;if(!i.length)return e.elementRects=[],[];var r=(e.elementRects||[]).filter((function(t){return!t.refresh})),a=i.map((function(t){return(0,o.Gv)(t)&&"element"in t?y(y({},t),{element:ii(t.element,!0)}):{element:ii(t,!0)}})).filter((function(t){return t.element})),s=(0,l.U)(r.map((function(t){return t.element})),a.map((function(t){return t.element}))),c=s.maintained,u=s.added,h=[];c.forEach((function(t){var e=b(t,2),n=e[0],i=e[1];h[i]=r[n]})),function(t,e){if(!e.length)return[];var n=t.props.groupable,i=t.state,r=i.containerClientRect,o=i.rootMatrix,a=i.is3d,s=i.offsetDelta,l=a?4:3,c=b(function(t,e,n){var i=vn(t,[e.clientLeft,e.clientTop],n);return[e.left+i[0],e.top+i[1]]}(o,r,l),2),u=c[0],h=c[1],d=n?0:s[0],p=n?0:s[1];return e.map((function(t){var e=t.element.getBoundingClientRect(),n=e.left-u-d,i=e.top-h-p,r=i+e.height,a=n+e.width,s=b(Kn(o,[n,i],l),2),c=s[0],f=s[1],g=b(Kn(o,[a,r],l),2),m=g[0],v=g[1];return y(y({},t),{rect:{left:c,right:m,top:f,bottom:v,center:(c+m)/2,middle:(f+v)/2}})}))}(t,u.map((function(t){return a[t]}))).map((function(t,e){h[u[e]]=t})),e.elementRects=h;var d=Kt(t.props.elementSnapDirections),p=[];return h.forEach((function(t){var e=t.element,n=t.top,i=void 0===n?d.top:n,r=t.left,a=void 0===r?d.left:r,s=t.right,l=void 0===s?d.right:s,c=t.bottom,u=void 0===c?d.bottom:c,h=t.center,f=void 0===h?d.center:h,g=t.middle,m=void 0===g?d.middle:g,v=t.className,y=t.rect,b=Xt({top:i,right:l,left:a,bottom:u,center:f,middle:m},y),w=b.horizontal,S=b.vertical,x=b.horizontalNames,k=b.verticalNames,C=y.top,M=y.left,T=y.right-M,E=y.bottom-C,A=[T,E];S.forEach((function(n,i){p.push({type:"vertical",element:e,pos:[(0,o.nF)(n,.1),C],size:E,sizes:A,className:v,elementRect:t,elementDirection:qt[k[i]]||k[i],direction:""})})),w.forEach((function(n,i){p.push({type:"horizontal",element:e,pos:[M,(0,o.nF)(n,.1)],size:T,sizes:A,className:v,elementRect:t,elementDirection:qt[x[i]]||x[i],direction:""})}))})),p}(t),R=w([],b(I),!1),V=(null!==(n=null===(e=i.snapThresholdInfo)||void 0===e?void 0:e.multiples)&&void 0!==n?n:[1,1]).map((function(t){return t*C}));v&&R.push.apply(R,w([],b(function(t,e,n){var i=t.props,r=i.maxSnapElementGuidelineDistance,o=void 0===r?1/0:r,a=i.maxSnapElementGapDistance,s=void 0===a?1/0:a,l=t.state.elementRects,c=[];return[["vertical",Wt,Zt],["horizontal",Zt,Wt]].forEach((function(t){var i=b(t,3),r=i[0],a=i[1],u=i[2],h=e[a.start],d=e[a.end],p=e[a.center],f=e[u.start],g=e[u.end],m={left:n[0],top:n[1]};function v(t){var e=t.rect,n=m[a.start];return e[a.end]<h+n?h-e[a.end]:d-n<e[a.start]?e[a.start]-d:-1}var y=l.filter((function(t){var e=t.rect;return!(e[u.start]>g||e[u.end]<f)&&v(t)>0})).sort((function(t,e){return v(t)-v(e)})),w=[];y.forEach((function(t){y.forEach((function(e){if(t!==e){var n=t.rect,i=e.rect,r=n[u.start],o=n[u.end],a=i[u.start];r>i[u.end]||a>o||w.push([t,e])}}))})),w.forEach((function(t){var n=b(t,2),i=n[0],l=n[1],u=i.rect,f=l.rect,g=u[a.start],v=u[a.end],y=f[a.start],w=f[a.end],S=m[a.start],x=0,k=0,C=!1,M=!1,T=!1;if(v<=h&&d<=y){if(M=!0,pi((k=v+(x=(y-v-(d-h))/2)+(d-h)/2)-p)>S)return}else if(v<y&&w<h+S){if(C=!0,pi((k=w+(x=y-v))-h)>S)return}else{if(!(v<y&&d-S<g))return;if(T=!0,pi((k=g-(x=y-v))-d)>S)return}x&&je(e,f,r,o)&&(x>s||c.push({type:r,pos:"vertical"===r?[k,0]:[0,k],element:l.element,size:0,className:l.className,isStart:C,isCenter:M,isEnd:T,gap:x,hide:!0,gapRects:[i,l],direction:"",elementDirection:""}))}))})),c}(t,L,V)),!1));var N=y({},i.snapOffset||{left:0,top:0,bottom:0,right:0});if(R.push.apply(R,w([],b(function(t,e,n,i,r,a,s){void 0===i&&(i=0),void 0===r&&(r=0);var l=t.props,c=t.state,u=l.snapGridWidth,h=void 0===u?0:u,d=l.snapGridHeight,p=void 0===d?0:d,f=[],g=a.left,m=a.top,v=[0,0];!function(t,e,n,i){var r,a,s=t.props,l=t.state,c=s.snapGridAll,u=s.snapGridWidth,h=void 0===u?0:u,d=s.snapGridHeight,p=void 0===d?0:d,f=l.snapRenderInfo,g=f&&((null===(r=f.direction)||void 0===r?void 0:r[0])||(null===(a=f.direction)||void 0===a?void 0:a[1])),m=t.moveables;if(c&&m&&g&&(h||p)){if(l.snapThresholdInfo)return;l.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var v=t.getRect(),y=v.children,b=f.direction;if(y){var w=b.map((function(t,r){var a=0===r?{snapSize:h,posName:"left",sizeName:"width",clientOffset:i.left-e}:{snapSize:p,posName:"top",sizeName:"height",clientOffset:i.top-n},s=a.snapSize,l=a.posName,c=a.sizeName,u=a.clientOffset;if(!s)return{dir:t,multiple:1,snapSize:s,snapOffset:0};var d=v[c],f=v[l],g=(0,o.Ct)(y.map((function(t){return[t[l]-f,t[c],d-t[c]-t[l]+f]}))).filter((function(t){return t})).sort((function(t,e){return t-e})),m=g[0],b=g.map((function(t){return(0,o.nF)(t/m,.1)*s})),w=1,S=(0,o.nF)(d/m,.1);for(w=1;w<=10&&!b.every((function(t){return t*w%1==0}));++w);var x=(1-t)/2,k=(0,o.Om)(f-u,f-u+d,x,1-x);return{multiple:S*w,dir:t,snapSize:s,snapOffset:Math.round(k/s)}})),S=w.map((function(t){return t.multiple||1}));l.snapThresholdInfo.multiples=S,l.snapThresholdInfo.offset=w.map((function(t){return t.snapOffset})),w.forEach((function(t,e){t.snapSize}))}}else l.snapThresholdInfo=null}(t,i,r,a);var y=c.snapThresholdInfo,b=h,w=p;if(y&&(h*=y.multiples[0]||1,p*=y.multiples[1]||1,v=y.offset),p){for(var S=function(t){f.push({type:"horizontal",pos:[g,(0,o.nF)(v[1]*w+t-r+m,.1)],className:nn("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},x=0;x<=2*n;x+=p)S(x);for(x=-p;x>=-n;x-=p)S(x)}if(h){for(S=function(t){f.push({type:"vertical",pos:[(0,o.nF)(v[0]*b+t-i+g,.1),m],className:nn("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},x=0;x<=2*e;x+=h)S(x);for(x=-h;x>=-e;x-=h)S(x)}return f}(t,s?u:d,s?c:h,p,f,N,E)),!1)),a){var F=r.left,B=r.top;N.left+=F,N.top+=B,N.right+=F,N.bottom+=B}return R.push.apply(R,w([],b(Ge(x||!1,S||!1,s?u:d,s?c:h,p,f,N)),!1)),R=R.filter((function(t){var e=t.element,n=t.elementRect,i=t.type;if(!e||!n)return!0;var r=n.rect;return je(L,r,i,T)})),R}function je(t,e,n,i){return"horizontal"===n?pi(t.right-e.left)<=i||pi(t.left-e.right)<=i||t.left<=e.right&&e.left<=t.right:"vertical"!==n||pi(t.bottom-e.top)<=i||pi(t.top-e.bottom)<=i||t.top<=e.bottom&&e.top<=t.bottom}function Ue(t,e){return t?t.map((function(t){var n=(0,o.Gv)(t)?t:{pos:t},i=n.pos;return(0,o.Et)(i)?n:y(y({},n),{pos:(0,o.jc)(i,e)})})):[]}function Ge(t,e,n,i,r,a,s){void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s={left:0,top:0,right:0,bottom:0});var l=[],c=s.left,u=s.top,h=s.bottom,d=n+s.right-c,p=i+h-u;return Ue(t,p).forEach((function(t){l.push({type:"horizontal",pos:[c,(0,o.nF)(t.pos-a+u,.1)],size:d,className:t.className,direction:""})})),Ue(e,d).forEach((function(t){l.push({type:"vertical",pos:[(0,o.nF)(t.pos-r+c,.1),u],size:p,className:t.className,direction:""})})),l}function $e(t){var e=t.state,n=e.container,i=t.props.snapContainer||n;if(e.snapContainer===i&&e.guidelines&&e.guidelines.length)return!1;var r=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==i){var s=ii(i,!0);if(s){var l=Pn(s),c=oi(e,[l.left-r.left,l.top-r.top]),u=oi(e,[l.right-r.right,l.bottom-r.bottom]);a.left=(0,o.nF)(c[0],1e-5),a.top=(0,o.nF)(c[1],1e-5),a.right=(0,o.nF)(u[0],1e-5),a.bottom=(0,o.nF)(u[1],1e-5)}}return e.snapContainer=i,e.snapOffset=a,e.guidelines=ze(t),e.enableSnap=!0,!0}function He(t,e,n,i,r,o){var s=yn(t,e,n,o?4:3),l=lt(s,i);return Ln(s,(0,a.Rd)(r,l))}function qe(t){return t?t/pi(t):0}function We(t,e,n,i,r,s){var l=function(t,e,n){var i=[];if(n)1!==pi(e[0])||1!==pi(e[1])?i.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):i.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),i.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var r=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(n){var o=[t*r[0],n*r[1]];e[0]===o[0]&&e[1]===o[1]||i.push([e,o])}))}))}else t[0]?(1===pi(e[0])?[1]:[1,-1]).forEach((function(n){i.push([[e[0],-1],[n*t[0],-1]],[[e[0],0],[n*t[0],0]],[[e[0],1],[n*t[0],1]])})):t[1]&&(1===pi(e[1])?[1]:[1,-1]).forEach((function(n){i.push([[-1,e[1]],[-1,n*t[1]]],[[0,e[1]],[0,n*t[1]]],[[1,e[1]],[1,n*t[1]]])}));return i}(n,s.fixedDirection,i),c=me(t,e,n,i),u=w(w([],b(function(t,e,n,i,r,s){return n.map((function(n){var l=b(n,2),c=l[0],u=l[1],h=lt(e,c),d=lt(e,u),p=i?function(t,e,n,i){var r=function(t,e,n){var i=jt(t),r=i.left,o=i.top,s=i.right,l=i.bottom,c=b(n,2),u=c[0],h=c[1],d=b((0,a.Rd)(n,e),2),p=d[0],f=d[1];pi(p)<U&&(p=0),pi(f)<U&&(f=0);var g=f>0,m=p>0,v={isBound:!1,offset:0,pos:0},y={isBound:!1,offset:0,pos:0};if(0===p&&0===f)return{vertical:v,horizontal:y};if(0===p)g?l<h&&(y.pos=l,y.offset=h-l):o>h&&(y.pos=o,y.offset=h-o);else if(0===f)m?s<u&&(v.pos=s,v.offset=u-s):r>u&&(v.pos=r,v.offset=u-r);else{var w=f/p,S=n[1]-w*u,x=0,k=0,C=!1;m&&s<=u?(x=w*s+S,k=s,C=!0):!m&&u<=r&&(x=w*r+S,k=r,C=!0),C&&(x<o||x>l)&&(C=!1),C||(g&&l<=h?(k=((x=l)-S)/w,C=!0):!g&&h<=o&&(k=((x=o)-S)/w,C=!0)),C&&(v.isBound=!0,v.pos=k,v.offset=u-k,y.isBound=!0,y.pos=x,y.offset=h-x)}return{vertical:v,horizontal:y}}(t,e,n),o=r.horizontal,s=r.vertical,l=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var i=b(n,2),r=i[0],o=i[1],s=b(e,2),l=s[0],c=s[1],u=b((0,a.Rd)(n,e),2),h=u[0],d=u[1],p=d>0,f=h>0;h=ti(h),d=ti(d);var g={isSnap:!1,offset:0,pos:0},m={isSnap:!1,offset:0,pos:0};if(0===h&&0===d)return{vertical:g,horizontal:m};var v=ne(t,h?[r]:[],d?[o]:[],[],[],void 0,void 0),y=v.vertical,w=v.horizontal;y.posInfos.filter((function(t){var e=t.pos;return f?e>=l:e<=l})),w.posInfos.filter((function(t){var e=t.pos;return p?e>=c:e<=c})),y.isSnap=y.posInfos.length>0,w.isSnap=w.posInfos.length>0;var S=ae(y),x=S.isSnap,k=S.guideline,C=ae(w),M=C.isSnap,T=C.guideline,E=M?T.pos[1]:0,A=x?k.pos[0]:0;if(0===h)M&&(m.isSnap=!0,m.pos=T.pos[1],m.offset=o-m.pos);else if(0===d)x&&(g.isSnap=!0,g.pos=A,g.offset=r-A);else{var _=d/h,P=n[1]-_*r,D=0,O=0,L=!1;x?(D=_*(O=A)+P,L=!0):M&&(O=((D=E)-P)/_,L=!0),L&&(g.isSnap=!0,g.pos=O,g.offset=r-O,m.isSnap=!0,m.pos=D,m.offset=o-D)}return{vertical:g,horizontal:m}}(t,e,n),c=l.horizontal,u=l.vertical,h=ke(o,c),d=ke(s,u),p=pi(h),f=pi(d);return{horizontal:{isBound:o.isBound,isSnap:c.isSnap,offset:h,dist:p},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:d,dist:f}}}(t,h,d,r):Se(t,r,{vertical:[d[0]],horizontal:[d[1]]}),f=p.horizontal,g=f.offset,m=f.isBound,v=f.isSnap,y=p.vertical,w=y.offset,S=y.isBound,x=y.isSnap,k=(0,a.Rd)(u,c);if(!w&&!g)return{isBound:S||m,isSnap:x||v,sign:k,offset:[0,0]};var C=function(t,e,n,i){var r=(0,o.Mu)(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,l=a.isSnap,c=a.dist,u=n.horizontal,h=u.isBound,d=u.isSnap,p=r%180,f=p<3||p>177,g=p>87&&p<93;return u.dist<c&&(s||l&&!g&&(!i||!f))?"vertical":!h&&(!d||f||i&&g)?"":"horizontal"}(h,d,p,i);if(!C)return{sign:k,isBound:!1,isSnap:!1,offset:[0,0]};var M="vertical"===C,T=[0,0];return T=(T=i||1!==pi(u[0])||1!==pi(u[1])||c[0]===u[0]||c[1]===u[1]?ye(h,d,-(M?w:g),M,s).offset:ot({datas:s,distX:-w,distY:-g})).map((function(t,e){return t*(k[e]?2/k[e]:0)})),{sign:k,isBound:M?S:m,isSnap:M?x:v,offset:T}}))}(t,e,l,i,r,s)),!1),b(ge(t,c,s)),!1),h=ce(u,0),d=ce(u,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function Ze(t,e,n,i,r,a,s,l){for(var c=In(t.state),u=t.props.keepRatio,h=0,d=0,p=0;p<2;++p){var f=We(t,e(h,d),r,u,s,l),g=f.width,m=f.height,v=g.isBound,y=m.isBound,w=g.offset,S=m.offset;if(1===p&&(v||(w=0),y||(S=0)),0===p&&s&&!v&&!y)return[0,0];if(u){var x=pi(w)*(n?1/n:1),k=pi(S)*(i?1/i:1);(v&&y?x<k:y||!v&&x<k)?w=n*S/i:S=i*w/n}h+=w,d+=S}if(!u&&r[0]&&r[1]){var C=function(t,e,n,i,r){var a=[-n[0],-n[1]],s=t.state,l=s.width,c=s.height,u=t.props.bounds,h=1/0,d=1/0;if(u){var p=[[n[0],-n[1]],[-n[0],n[1]]],f=u.left,g=void 0===f?-1/0:f,m=u.top,v=void 0===m?-1/0:m,y=u.right,w=void 0===y?1/0:y,S=u.bottom,x=void 0===S?1/0:S;p.forEach((function(t){var n=t[0]!==a[0],s=t[1]!==a[1],u=lt(e,t),p=360*(0,o.Mu)(i,u)/Math.PI;if(s){var f=u.slice();(pi(p-360)<2||pi(p-180)<2)&&(f[1]=i[1]);var m=ye(i,f,(i[1]<u[1]?x:v)-u[1],!1,r),y=b(m.offset,2)[1],S=m.isOutside;isNaN(y)||(d=c+(S?1:-1)*pi(y))}if(n){f=u.slice(),(pi(p-90)<2||pi(p-270)<2)&&(f[0]=i[0]);var k=ye(i,f,(i[0]<u[0]?w:g)-u[0],!0,r),C=b(k.offset,1)[0],M=k.isOutside;isNaN(C)||(h=l+(M?1:-1)*pi(C))}}))}return{maxWidth:h,maxHeight:d}}(t,c,r,a,l),M=C.maxWidth,T=C.maxHeight,E=b(function(t,e,n,i,r,a,s,l,c){var u=lt(e,s),h=Se(t,l,{vertical:[u[0]],horizontal:[u[1]]}),d=h.horizontal.offset,p=h.vertical.offset;if((0,o.nF)(p,j)||(0,o.nF)(d,j)){var f=b(ot({datas:c,distX:-p,distY:-d}),2),g=f[0],m=f[1];return[Math.min(r||1/0,n+s[0]*g)-n,Math.min(a||1/0,i+s[1]*m)-i]}return[0,0]}(t,e(h,d).map((function(t){return t.map((function(t){return(0,o.nF)(t,j)}))})),n+h,i+d,M,T,r,s,l),2);h+=w=E[0],d+=S=E[1]}return[h,d]}function Ye(t){return t<0&&(t=t%360+360),t%360}function Ke(t,e){e=Ye(e);var n=Math.floor(t/360),i=360*n+360-e,r=360*n+e;return pi(t-i)<pi(t-r)?i:r}function Xe(t,e){t=Ye(t),e=Ye(e);var n=Ye(t-e);return Math.min(n,360-n)}function Je(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(n){var i=n.guideline;(0,o.I6)(e,(function(t){return t.guideline===i}))||(i.direction="",e.push({guideline:i,posInfo:t}))}))})),e.map((function(t){var e=t.guideline,n=t.posInfo;return y(y({},e),{direction:n.direction})}))}function Qe(t,e,n,i,r,a){var s=zt(jt(t,a),e,n),l=s.vertical,c=s.horizontal,u={left:!1,top:!1,right:!1,bottom:!1};l.forEach((function(t){t.isBound&&("start"===t.direction&&(u.left=!0),"end"===t.direction&&(u.right=!0),i.push({type:"bounds",pos:t.pos}))})),c.forEach((function(t){t.isBound&&("start"===t.direction&&(u.top=!0),"end"===t.direction&&(u.bottom=!0),r.push({type:"bounds",pos:t.pos}))}));var h=function(t){var e=t.props.innerBounds,n={left:!1,top:!1,right:!1,bottom:!1};if(!e)return{boundMap:n,vertical:[],horizontal:[]};var i=t.getRect(),r=[i.pos1,i.pos2,i.pos3,i.pos4],o=lt(r,[0,0]),a=e.left,s=e.top,l=e.width,c=e.height,u=[[a,s],[a,s+c]],h=[[a,s],[a+l,s]],d=[[a+l,s],[a+l,s+c]],p=[[a,s+c],[a+l,s+c]],f=me(t,r,[0,0],!1),g=[],m=[];return f.forEach((function(t){var e=t.line,i=t.lineConstants,r=ue(o,e),f=r.horizontal,v=r.vertical,y=fe(e,i,h,v,1,!0),b=fe(e,i,p,v,1,!0),w=fe(e,i,u,f,1,!0),S=fe(e,i,d,f,1,!0);y.isBound&&!n.top&&(g.push(s),n.top=!0),b.isBound&&!n.bottom&&(g.push(s+c),n.bottom=!0),w.isBound&&!n.left&&(m.push(a),n.left=!0),S.isBound&&!n.right&&(m.push(a+l),n.right=!0)})),{boundMap:n,horizontal:g,vertical:m}}(t),d=h.boundMap,p=h.vertical,f=h.horizontal;return p.forEach((function(t){(0,o.SL)(i,(function(e){var n=e.type,i=e.pos;return"bounds"===n&&i===t}))>=0||i.push({type:"bounds",pos:t})})),f.forEach((function(t){(0,o.SL)(r,(function(e){var n=e.type,i=e.pos;return"bounds"===n&&i===t}))>=0||r.push({type:"bounds",pos:t})})),{boundMap:u,innerBoundMap:d}}var tn=ni("",["resizable","scalable"]),en={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",Jt,Qt,te,ee,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[":host {\n--bounds-color: #d66;\n}\n.guideline {\npointer-events: none;\nz-index: 2;\n}\n.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}\n.guideline-group {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.guideline-group .size-value {\nposition: absolute;\ncolor: #f55;\nfont-size: 12px;\nfont-size: calc(12px * var(--zoom));\nfont-weight: bold;\n}\n.guideline-group.horizontal .size-value {\ntransform-origin: 50% 100%;\ntransform: translateX(-50%);\nleft: 50%;\nbottom: 5px;\nbottom: calc(2px + 3px * var(--zoom));\n}\n.guideline-group.vertical .size-value {\ntransform-origin: 0% 50%;\ntop: 50%;\ntransform: translateY(-50%);\nleft: 5px;\nleft: calc(2px + 3px * var(--zoom));\n}\n.guideline.gap {\nbackground: #f55;\n}\n.size-value.gap {\ncolor: #f55;\n}\n"],render:function(t,e){var n=t.state,i=n.top,r=n.left,o=n.pos1,a=n.pos2,s=n.pos3,l=n.pos4,c=n.snapRenderInfo,u=t.props.snapRenderThreshold,h=void 0===u?1:u;if(!c||!c.render||!Yt(t,""))return hi(t,"boundMap",{left:!1,top:!1,right:!1,bottom:!1},(function(t){return JSON.stringify(t)})),hi(t,"innerBoundMap",{left:!1,top:!1,right:!1,bottom:!1},(function(t){return JSON.stringify(t)})),[];n.guidelines=ze(t);var d=Math.min(o[0],a[0],s[0],l[0]),p=Math.min(o[1],a[1],s[1],l[1]),f=c.externalPoses||[],g=In(t.state),m=[],v=[],S=[],x=[],k=[],C=bn(g),M=C.width,T=C.height,E=C.top,A=C.left,_=C.bottom,P=C.right,D={left:A,right:P,top:E,bottom:_,center:(A+P)/2,middle:(E+_)/2},O=f.length>0,L=O?bn(f):{};if(!c.request){if(c.direction&&k.push(function(t,e,n,i,r){var o=[];n[0]&&n[1]?o=[n,[-n[0],n[1]],[n[0],-n[1]]]:n[0]||n[1]?t.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],n):(o.push.apply(o,w([],b(function(t,e){return at(e).map((function(e){return t[e]}))}([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2])):[[-1,-1],[1,-1],[1,1],[-1,1]].forEach((function(t,e,n){var i=n[e+1]||n[0];o.push(t),o.push([(t[0]+i[0])/2,(t[1]+i[1])/2])}));var a=o.map((function(t){return lt(e,t)})),s=ne(t,a.map((function(t){return t[0]})),a.map((function(t){return t[1]})),o.map((function(t){return re(t[0])})),o.map((function(t){return re(t[1])})),i,r),l=re(o.map((function(t){return t[0]}))[s.vertical.index]),c=re(o.map((function(t){return t[1]}))[s.horizontal.index]);return{vertical:y(y({},s.vertical),{direction:l}),horizontal:y(y({},s.horizontal),{direction:c})}}(t,g,c.direction,h,h)),c.snap){var I=bn(g);c.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),k.push(oe(t,I,h,h))}O&&(c.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),k.push(oe(t,L,h,h))),k.forEach((function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;m.push.apply(m,w([],b(e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),!1)),v.push.apply(v,w([],b(n.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),!1)),S.push.apply(S,w([],b(Je(e)),!1)),x.push.apply(x,w([],b(Je(n)),!1))}))}var R=Qe(t,[A,P],[E,_],m,v),V=R.boundMap,N=R.innerBoundMap;O&&Qe(t,[L.left,L.right],[L.top,L.bottom],m,v,c.externalBounds);var F=w(w([],b(S),!1),b(x),!1),B=F.filter((function(t){return t.element&&!t.gapRects})),z=F.filter((function(t){return t.gapRects})).sort((function(t,e){return t.gap-e.gap}));Un(t,"onSnap",{guidelines:F.filter((function(t){return!t.element})),elements:B,gaps:z},!0);var j=hi(t,"boundMap",V,(function(t){return JSON.stringify(t)}),{left:!1,top:!1,right:!1,bottom:!1}),U=hi(t,"innerBoundMap",N,(function(t){return JSON.stringify(t)}),{left:!1,top:!1,right:!1,bottom:!1});return V!==j&&N!==U||Un(t,"onBound",{bounds:V,innerBounds:N},!0),w(w(w(w(w(w([],b(function(t,e,n,i,r){var o=t.props.isDisplayInnerSnapDigit,a=[];return["vertical","horizontal"].forEach((function(s){var l=e.filter((function(t){return t.type===s})),c="vertical"===s?1:0,u=c?0:1,h=function(t,e,n,i){var r="vertical"===t?0:1,o="vertical"===t?1:0,a=r?Wt:Zt,s=n[a.start],l=n[a.end];return Wn(e,(function(t){return t.pos[r]})).map((function(e){var n=[],c=[];return e.forEach((function(e){var u,h,d=e.element,p=e.elementRect.rect;if(p[a.end]<s)n.push(e);else if(l<p[a.start])c.push(e);else if(p[a.start]<=s&&l<=p[a.end]&&i){var f=e.pos,g={element:d,rect:y(y({},p),(u={},u[a.end]=p[a.start],u))},m={element:d,rect:y(y({},p),(h={},h[a.start]=p[a.end],h))},v=[0,0],b=[0,0];v[r]=f[r],v[o]=f[o],b[r]=f[r],b[o]=f[o]+e.size,n.push({type:t,pos:v,size:0,elementRect:g,direction:"",elementDirection:"end"}),c.push({type:t,pos:b,size:0,elementRect:m,direction:"",elementDirection:"start"})}})),n.sort((function(t,e){return e.pos[o]-t.pos[o]})),c.sort((function(t,e){return t.pos[o]-e.pos[o]})),{total:e,start:n,end:c,inner:[]}}))}(s,l,i,o),d=c?Zt:Wt,p=c?Wt:Zt,f=i[d.start],g=i[d.end];h.forEach((function(e){var o=e.total,l=e.start,h=e.end,m=e.inner,v=n[u]+o[0].pos[u]-i[p.start],y=i;l.forEach((function(e){var i=e.elementRect.rect,o=y[d.start]-i[d.end];if(o>0){var l=[0,0];l[c]=n[c]+y[d.start]-f-o,l[u]=v,a.push(Be(t,s,"dashed",a.length,o,l,e.className,r))}y=i})),y=i,h.forEach((function(e){var i=e.elementRect.rect,o=i[d.start]-y[d.end];if(o>0){var l=[0,0];l[c]=n[c]+y[d.end]-f,l[u]=v,a.push(Be(t,s,"dashed",a.length,o,l,e.className,r))}y=i})),m.forEach((function(e){var i=e.elementRect.rect,o=f-i[d.start],l=i[d.end]-g,h=[0,0],p=[0,0];h[c]=n[c]-o,h[u]=v,p[c]=n[c]+g-f,p[u]=v,a.push(Be(t,s,"dashed",a.length,o,h,e.className,r)),a.push(Be(t,s,"dashed",a.length,l,p,e.className,r))}))}))})),a}(t,B,[d,p],D,e)),!1),b(function(t,e,n,i,r){var o=[];return["horizontal","vertical"].forEach((function(a){var s=e.filter((function(t){return t.type===a})).slice(0,1),l="vertical"===a?0:1,c=l?0:1,u=l?Zt:Wt,h=l?Wt:Zt,d=i[u.start],p=i[u.end],f=i[h.start],g=i[h.end];s.forEach((function(e){var i=e.gap,a=e.gapRects,s=Math.max.apply(Math,w([f],b(a.map((function(t){return t.rect[h.start]}))),!1)),m=Math.min.apply(Math,w([g],b(a.map((function(t){return t.rect[h.end]}))),!1)),v=(s+m)/2;s!==m&&v!==(f+g)/2&&a.forEach((function(e){var a=e.rect,s=e.className,h=[n[0],n[1]];if(a[u.end]<d)h[l]+=a[u.end]-d;else{if(!(p<a[u.start]))return;h[l]+=a[u.start]-d-i}h[c]+=v-f,o.push(Be(t,l?"vertical":"horizontal","gap",o.length,i,h,s,r))}))}))})),o}(t,z,[d,p],D,e)),!1),b(Fe(t,"horizontal",x,[r,i],D,e)),!1),b(Fe(t,"vertical",S,[r,i],D,e)),!1),b(Ne(t,"horizontal",v,d,i,M,0,e)),!1),b(Ne(t,"vertical",m,p,r,T,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},$e(t)},drag:function(t){var e=t.state;$e(t)||(e.guidelines=ze(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!tn(t,e)&&!Ie(t,e))||(!e.isRequest&&e.inputEvent?(0,o.nB)(e.inputEvent.target,nn("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,$e(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,$e(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function nn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.T6.apply(void 0,w([N],b(t),!1))}function rn(t){t()}function on(t){return t&&"none"!==t?(0,o.Gv)(t)?t:(0,s.yV)(t):[1,0,0,1,0,0]}function an(t,e,n){return(0,a.B4)(e,(0,a.GD)(n,e),t,(0,a.GD)(n.map((function(t){return-t})),e))}function sn(t){return t?t.split(" "):["0","0"]}function ln(t){var e=At(t)("transform");if(e&&"none"!==e)return e;if("transform"in t){var n=t.transform.baseVal;if(!n)return"";var i=n.length;if(!i)return"";for(var r=[],o=function(t){var e=n[t].matrix;r.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return e[t]})).join(", "),")"))},a=0;a<i;++a)o(a);return r.join(" ")}return""}function cn(t,e,n,i,r){var a,s,l,c,u=(0,o.ep)(t)||(0,o.uD)(t),h=!1;if(!t||n)l=t;else{var d=null===(a=null==t?void 0:t.assignedSlot)||void 0===a?void 0:a.parentElement,p=t.parentElement;d?(h=!0,c=p,l=d):l=p}for(var f=!1,g=t===e||l===e,m="relative",v=1,y=parseFloat(null==r?void 0:r("zoom"))||1,b=null==r?void 0:r("position");l&&l!==u;){e===l&&(g=!0);var w=At(l),S=l.tagName.toLowerCase(),x=ln(l),k=w("willChange"),C=parseFloat(w("zoom"))||1;if(m=w("position"),i&&1!==C){v=C;break}if(!n&&i&&1!==y&&b&&"absolute"!==b||"svg"===S||"foreignobject"===S||"static"!==m||x&&"none"!==x||"transform"===k)break;var M=null===(s=null==t?void 0:t.assignedSlot)||void 0===s?void 0:s.parentNode,T=l.parentNode;M&&(h=!0,c=T);var E=T;if(E&&11===E.nodeType){f=!0,m=At(l=E.host)("position");break}l=E,m="relative"}return{offsetZoom:v,hasSlot:h,parentSlotElement:c,isCustomElement:f,isStatic:"static"===m,isEnd:g||!l||l===u,offsetParent:l||u}}function un(t,e){var n,i,r,a=t.tagName.toLowerCase(),s=t.offsetLeft,l=t.offsetTop,c=At(t),u=(0,o.b0)(s),h=!u;return h||"svg"===a&&!t.ownerSVGElement?r=(i=sn(c("transformOrigin")).map((function(t){return parseFloat(t)}))).slice():(r=(i=A?function(t){return sn(Gn(t,":before").transformOrigin).map((function(e,n){var i=(0,o.hg)(e),r=i.value,a=i.unit;return r*function(t,e,n){return"%"===e?gn(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,a,0===n)}))}(t):sn(c("transformOrigin")).map((function(t){return parseFloat(t)}))).slice(),h=!0,"svg"===a?(s=0,l=0):(n=b(function(t,e,n){var i=t.tagName.toLowerCase();if(!t.getBBox||!n&&"g"===i)return[0,0,0,0];var r="fill-box"===At(t)("transform-box"),o=t.getBBox(),a=gn(t.ownerSVGElement),s=o.x,l=o.y;"foreignobject"!==i||s||l||(s=parseFloat(t.getAttribute("x"))||0,l=parseFloat(t.getAttribute("y"))||0);var c=s-a.x,u=l-a.y;return[c,u,r?e[0]:e[0]-c,r?e[1]:e[1]-u]}(t,i,t===e&&"g"===e.tagName.toLowerCase()),4),s=n[0],l=n[1],i[0]=n[2],i[1]=n[3])),{tagName:a,isSVG:u,hasOffset:h,offset:[s||0,l||0],origin:i,targetOrigin:r}}function hn(t,e){var n=At(t),i=At((0,o.uD)(t)),r=i("position");if(!(e||r&&"static"!==r))return[0,0];var a=parseInt(i("marginLeft"),10),s=parseInt(i("marginTop"),10);return"absolute"===n("position")&&("auto"===n("top")&&"auto"===n("bottom")||(s=0),"auto"===n("left")&&"auto"===n("right")||(a=0)),[a,s]}function dn(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=(0,a._C)(e,3,4))}))}function pn(t){for(var e=t.parentElement,n=!1,i=(0,o.uD)(t);e;){var r=Gn(e).transform;if(r&&"none"!==r){n=!0;break}if(e===i)break;e=e.parentElement}return{fixedContainer:e||i,hasTransform:n}}function fn(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat((0,a.ZB)(t,!e).join(","),")")}function gn(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var i=t.viewBox,r=i&&i.baseVal||{x:0,y:0,width:0,height:0};return{x:r.x,y:r.y,width:r.width||e,height:r.height||n,clientWidth:e,clientHeight:n}}function mn(t,e){var n,i=gn(t),r=i.width,o=i.height,s=i.clientWidth,l=i.clientHeight,c=s/r,u=l/o,h=t.preserveAspectRatio.baseVal,d=h.align,p=h.meetOrSlice,f=[0,0],g=[c,u],m=[0,0];if(1!==d){var v=(d-2)%3,y=Math.floor((d-2)/3);f[0]=r*v/2,f[1]=o*y/2;var w=2===p?Math.max(u,c):Math.min(c,u);g[0]=w,g[1]=w,m[0]=(s-r)/2*v,m[1]=(l-o)/2*y}var S=(0,a.kb)(g,e);return n=b(m,2),S[e*(e-1)]=n[0],S[e*(e-1)+1]=n[1],an(S,e,f)}function vn(t,e,n){return(0,a.Di)(t,(0,a.ez)(e,n),n)}function yn(t,e,n,i){return[[0,0],[e,0],[0,n],[e,n]].map((function(e){return vn(t,e,i)}))}function bn(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),i=Math.min.apply(Math,w([],b(e),!1)),r=Math.min.apply(Math,w([],b(n),!1)),o=Math.max.apply(Math,w([],b(e),!1)),a=Math.max.apply(Math,w([],b(n),!1));return{left:i,top:r,right:o,bottom:a,width:o-i,height:a-r}}function wn(t,e,n,i){return bn(yn(t,e,n,i))}function Sn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function xn(t,e){return Sn([e[0]-t[0],e[1]-t[1]])}function kn(t,e,n,i){void 0===n&&(n=1),void 0===i&&(i=(0,o.Mu)(t,e));var r=xn(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(i,"rad) scaleY(").concat(n,")"),width:"".concat(r,"px")}}function Cn(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=n.length,o=n.reduce((function(t,e){return t+e[0]}),0)/r,a=n.reduce((function(t,e){return t+e[1]}),0)/r;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(a,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Mn(t,e){var n=t[e];return(0,o.Gv)(n)?y(y({},t),n):t}function Tn(t){var e=t&&!(0,o.b0)(t.offsetWidth),n=0,i=0,r=0,a=0,s=0,l=0,c=0,u=0,h=0,d=0,p=0,f=0,g=1/0,m=1/0,v=1/0,y=1/0,b=0,w=0,S=!1;if(t)if(!e&&t.ownerSVGElement){var x=t.getBBox();S=!0,s=n=x.width,l=i=x.height,c=n,u=i,r=n,a=i}else{var k=At(t),C=t.style,M="border-box"===k("boxSizing"),T=parseFloat(k("borderLeftWidth"))||0,E=parseFloat(k("borderRightWidth"))||0,A=parseFloat(k("borderTopWidth"))||0,_=parseFloat(k("borderBottomWidth"))||0,P=(parseFloat(k("paddingLeft"))||0)+(parseFloat(k("paddingRight"))||0),D=(parseFloat(k("paddingTop"))||0)+(parseFloat(k("paddingBottom"))||0),O=P+(T+E),L=D+(A+_),I=k("position"),R=0,V=0;if("clientLeft"in t){var N=null;if(N="absolute"===I?cn(t,(0,o.uD)(t)).offsetParent:t.parentElement){var F=At(N);R=parseFloat(F("width")),V=parseFloat(F("height"))}}h=Math.max(P,(0,o.jc)(k("minWidth"),R)||0),d=Math.max(D,(0,o.jc)(k("minHeight"),V)||0),g=(0,o.jc)(k("maxWidth"),R),m=(0,o.jc)(k("maxHeight"),V),isNaN(g)&&(g=1/0),isNaN(m)&&(m=1/0),b=(0,o.jc)(C.width,0)||0,w=(0,o.jc)(C.height,0)||0,s=parseFloat(k("width"))||0,l=parseFloat(k("height"))||0,n=c=pi(s-b)<1?(0,o.Tq)(h,b||s,g):s,i=u=pi(l-w)<1?(0,o.Tq)(d,w||l,m):l,r=c,a=u,M?(v=g,y=m,p=h,f=d,c=n-O,u=i-L):(v=g+O,y=m+L,p=h+O,f=d+L,n=c+O,i=u+L),r=c+P,a=u+D}return{svg:S,offsetWidth:n,offsetHeight:i,clientWidth:r,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:w,cssWidth:s,cssHeight:l,minWidth:h,minHeight:d,maxWidth:g,maxHeight:m,minOffsetWidth:p,minOffsetHeight:f,maxOffsetWidth:v,maxOffsetHeight:y}}function En(t,e){return(0,o.Mu)(e>0?t[0]:t[1],e>0?t[1]:t[0])}function An(t,e){var n=t===(0,o.uD)(t)||t===(0,o.ep)(t),i={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(i.clientHeight=Math.max(e.height,i.clientHeight),i.scrollHeight=Math.max(e.height,i.scrollHeight)),i.overflow="visible"!==At(t)("overflow"),y(y({},e),i)}function _n(t,e,n,i){var r=t.left,o=t.right,a=t.top,s=t.bottom,l=e.top,c=e.left,u={left:c+r,top:l+a,right:c+o,bottom:l+s,width:o-r,height:s-a};return n&&i?An(n,u):u}function Pn(t,e){var n=0,i=0,r=0,o=0;if(t){var a=t.getBoundingClientRect();n=a.left,i=a.top,r=a.width,o=a.height}var s={left:n,top:i,width:r,height:o,right:n+r,bottom:i+o};return t&&e?An(t,s):s}function Dn(t,e,n,i){return t||(e?[0,0]:On(n.target,i))}function On(t,e){if(t){var n=t.getAttribute("data-rotation")||"",i=t.getAttribute("data-direction");if(e.deg=n,i){var r=[0,0];return i.indexOf("w")>-1&&(r[0]=-1),i.indexOf("e")>-1&&(r[0]=1),i.indexOf("n")>-1&&(r[1]=-1),i.indexOf("s")>-1&&(r[1]=1),r}}}function Ln(t,e){return[(0,a.tY)(e,t[0]),(0,a.tY)(e,t[1]),(0,a.tY)(e,t[2]),(0,a.tY)(e,t[3])]}function In(t){var e=t.left,n=t.top;return Ln([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function Rn(t,e){t[e?"controlAbles":"targetAbles"].forEach((function(e){e.unset&&e.unset(t)}))}function Vn(t,e){var n=e?"controlGesto":"targetGesto",i=t[n];!1===(null==i?void 0:i.isIdle())&&Rn(t,e),null==i||i.unset(),t[n]=null}function Nn(t,e){if(e){var n=ft(e);n.nextStyle=y(y({},n.nextStyle),t)}return{style:t,cssText:(0,o.xD)(t).map((function(e){return"".concat((0,o.aj)(e,"-"),": ").concat(t[e],";")})).join("")}}function Fn(t,e,n){var i=e.afterTransform||e.transform;return y(y({},Nn(y(y(y({},t.style),e.style),{transform:i}),n)),{afterTransform:i,transform:t.transform})}function Bn(t,e,n,i){var r=e.datas;r.datas||(r.datas={});var o=y(y({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:r.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:!1!==e.isTrusted,stopAble:function(){r.isEventStart=!1},stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return r.isStartEvent?i||(r.lastEvent=o):r.isStartEvent=!0,o}function zn(t,e,n){var i=e.datas,r="isDrag"in n?n.isDrag:e.isDrag;return i.datas||(i.datas={}),y(y({isDrag:r},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:i.lastEvent,isDouble:e.isDouble,datas:i.datas,isFirstDrag:!!e.isFirstDrag})}function jn(t,e,n){t._emitter.on(e,n)}function Un(t,e,n,i,r){return t.triggerEvent(e,n,i,r)}function Gn(t,e){return(0,o.zk)(t).getComputedStyle(t,e)}function $n(t,e,n){var i={},r={};return t.filter((function(t){var o=t.name;if(i[o]||!e.some((function(e){return t[e]})))return!1;if(!n&&t.ableGroup){if(r[t.ableGroup])return!1;r[t.ableGroup]=!0}return i[o]=!0,!0}))}function Hn(t,e){return t===e||null==t&&null==e}function qn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,i=0;i<n;++i){var r=t[i];if(!(0,o.b0)(r))return r}return t[n]}function Wn(t,e){var n=[],i=[];return t.forEach((function(r,o){var a=e(r,o,t),s=i.indexOf(a),l=n[s]||[];-1===s&&(i.push(a),n.push(l)),l.push(r)})),n}function Zn(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function Yn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return pi(e)-pi(t)})),t[0]}function Kn(t,e,n){return(0,a.Di)((0,a.B8)(t,n),(0,a.ez)(e,n),n)}function Xn(t,e){var n,i=t.is3d?4:3;return n=b(Kn(t.rootMatrix,[e.distX,e.distY],i),2),e.distX=n[0],e.distY=n[1],e}function Jn(t,e,n,i){if(!n[0]&&!n[1])return e;var r=vn(t,[qe(n[0]||1),0],i),o=vn(t,[0,qe(n[1]||1)],i),s=vn(t,[n[0]/Sn(r),n[1]/Sn(o)],i);return(0,a.tY)(e,s)}function Qn(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function ti(t){return pi(t)<=U?0:t}function ei(t){return function(e){if(!e.isDragging(t))return"";var n=function(t,e){var n,i=t.targetGesto,r=t.controlGesto;return(null==i?void 0:i.isFlag())&&(n=i.getEventData()[e]),!n&&(null==r?void 0:r.isFlag())&&(n=r.getEventData()[e]),n||{}}(e,t),i=n.deg;return i?nn("view-control-rotation".concat(i)):""}}function ni(t,e){return void 0===e&&(e=[t]),function(n,i){if(i.isRequest)return!!e.some((function(t){return i.requestAble===t}))&&i.parentDirection;var r=i.inputEvent.target;return(0,o.nB)(r,nn("direction"))&&(!t||(0,o.nB)(r,nn(t)))}}function ii(t,e){return t?(0,o.Ll)(t)?t:(0,o.Kg)(t)?e?document.querySelector(t):t:(0,o.Tn)(t)?t():(0,o.l6)(t)?t:"current"in t?t.current:t:null}function ri(t,e){return t?((n=t)&&(0,o.Gv)(n)&&!(0,o.Ll)(n)&&((0,o.cy)(n)||"length"in n)?[].slice.call(t):[t]).reduce((function(t,n){return(0,o.Kg)(n)&&e?w(w([],b(t),!1),b([].slice.call(document.querySelectorAll(n))),!1):((0,o.cy)(n)?t.push(ri(n,e)):t.push(ii(n,e)),t)}),[]):[];var n}function oi(t,e){var n=t.rootMatrix,i=t.is3d,r=i?4:3,o=(0,a.B8)(n,r);return i||(o=(0,a._C)(o,3,4)),o[12]=0,o[13]=0,o[14]=0,(0,s.c4)(o,e)}function ai(t,e,n,i,r){var a=b(t,2),s=a[0],l=a[1],c=0,u=0;if(r&&s&&l){var h=(0,o.Mu)([0,0],e),d=(0,o.Mu)([0,0],i),p=Sn(e),f=Math.cos(h-d)*p;if(i[0])if(i[1]){var g=i[0]*s,m=i[1]*l,v=Math.atan2(g+e[0],m+e[1]),y=Math.atan2(g,m);v<0&&(v+=2*Math.PI),y<0&&(y+=2*Math.PI);var w=0;(w=pi(v-y)<Math.PI/2||pi(v-y)>Math.PI/2*3?v-y:v-(y+=Math.PI))>2*Math.PI?w-=2*Math.PI:w>Math.PI?w=2*Math.PI-w:w<-Math.PI&&(w=-2*Math.PI-w);var S=Sn([g+e[0],m+e[1]])*Math.cos(w);c=S*Math.sin(y)-g,u=S*Math.cos(y)-m,i[0]<0&&(c*=-1),i[1]<0&&(u*=-1)}else u=(c=f)/n;else c=(u=f)*n}else c=i[0]*e[0],u=i[1]*e[1];return[c,u]}function si(t,e,n,i){var r,a=n.ratio,s=n.startOffsetWidth,l=n.startOffsetHeight,c=0,u=0,h=i.distX,d=i.distY,p=i.pinchScale,f=i.parentDistance,g=i.parentDist,m=i.parentScale,v=n.fixedDirection,y=[0,1].map((function(e){return pi(t[e]-v[e])})),w=[0,1].map((function(t){var e=y[t];return 0!==e&&(e=2/e),e}));if(g)c=g[0],u=g[1],e&&(c?u||(u=c/a):c=u*a);else if((0,o.Et)(p))c=(p-1)*s,u=(p-1)*l;else if(m)c=(m[0]-1)*s,u=(m[1]-1)*l;else if(f){var S=s*y[0],x=l*y[1],k=Sn([S,x]);c=f/k*S*w[0],u=f/k*x*w[1]}else{var C=ot({datas:n,distX:h,distY:d});C=w.map((function(t,e){return C[e]*t})),c=(r=b(ai([s,l],C,a,t,e),2))[0],u=r[1]}return{distWidth:c,distHeight:u}}function li(t,e){if(e){if("left"===t)return{x:"0%",y:"50%"};if("top"===t)return{x:"50%",y:"50%"};if("center"===t)return{x:"50%",y:"50%"};if("right"===t)return{x:"100%",y:"50%"};if("bottom"===t)return{x:"50%",y:"100%"};var n=b(t.split(" "),2),i=n[0],r=n[1],o=li(i||""),a=li(r||""),s=y(y({},o),a),l={x:"50%",y:"50%"};return s.x&&(l.x=s.x),s.y&&(l.y=s.y),s.value&&(s.x&&!s.y&&(l.y=s.value),!s.x&&s.y&&(l.x=s.value)),l}return"left"===t?{x:"0%"}:"right"===t?{x:"100%"}:"top"===t?{y:"0%"}:"bottom"===t?{y:"100%"}:t?"center"===t?{value:"50%"}:{value:t}:{}}function ci(t,e,n){var i=li(t,!0),r=i.x,a=i.y;return[(0,o.jc)(r,e)||0,(0,o.jc)(a,n)||0]}function ui(t,e){return t.length===e.length&&t.every((function(t,n){var i=e[n],r=(0,o.cy)(t),a=(0,o.cy)(i);return r&&a?ui(t,i):!r&&!a&&t===i}))}function hi(t,e,n,i,r){var o=t._store,a=o[e];if(!(e in o)){if(null==r)return o[e]=n,n;o[e]=r,a=r}return a===n||i(a)===i(n)?a:(o[e]=n,n)}function di(t){return t>=0?1:-1}function pi(t){return Math.abs(t)}function fi(t,e){return(0,o.hJ)(t).map((function(t){return e(t)}))}function gi(t){return(0,o.Et)(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var mi=S("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,i=e.targets,r=e.angle,o=e.originalDatas,a=t.props,s=a.pinchable,l=a.ables;if(!s)return!1;var c="onPinch".concat(i?"Group":"","Start"),u="drag".concat(i?"Group":"","ControlStart"),h=(!0===s?t.controlAbles:l.filter((function(t){return s.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[u]})),d=Bn(t,e,{});i&&(d.targets=i);var p=Un(t,c,d);n.isPinch=!1!==p,n.ables=h;var f=n.isPinch;return!!f&&(h.forEach((function(n){if(o[n.name]=o[n.name]||{},n[u]){var i=y(y({},e),{datas:o[n.name],parentRotate:r,isPinch:!0});n[u](t,i)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},f)},pinch:function(t,e){var n=e.datas,i=e.scale,r=e.distance,o=e.originalDatas,a=e.inputEvent,s=e.targets,l=e.angle;if(n.isPinch){var c=r*(1-1/i),u=Bn(t,e,{});s&&(u.targets=s);var h="onPinch".concat(s?"Group":"");Un(t,h,u);var d=n.ables,p="drag".concat(s?"Group":"","Control");return d.forEach((function(n){n[p]&&n[p](t,y(y({},e),{datas:o[n.name],inputEvent:a,resolveMatrix:!0,pinchScale:i,parentDistance:c,parentRotate:l,isPinch:!0}))})),u}},pinchEnd:function(t,e){var n=e.datas,i=e.isPinch,r=e.inputEvent,o=e.targets,a=e.originalDatas;if(n.isPinch){var s="onPinch".concat(o?"Group":"","End"),l=zn(t,e,{isDrag:i});o&&(l.targets=o),Un(t,s,l);var c=n.ables,u="drag".concat(o?"Group":"","ControlEnd");return c.forEach((function(n){n[u]&&n[u](t,y(y({},e),{isDrag:i,datas:a[n.name],inputEvent:r,isPinch:!0}))})),i}},pinchGroupStart:function(t,e){return this.pinchStart(t,y(y({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,y(y({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,y(y({},e),{targets:t.props.targets}))}}),vi=ni("scalable"),yi={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:Nt("scalable"),dragControlCondition:vi,viewClassName:ei("scalable"),dragControlStart:function(t,e){var n=e.datas,i=e.isPinch,r=e.inputEvent,a=Dn(e.parentDirection,i,r,n),s=t.state,l=s.width,c=s.height,u=s.targetTransform,h=s.target,d=s.pos1,p=s.pos2,f=s.pos4;if(!a||!h)return!1;i||tt(t,e),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=a,n.startOffsetWidth=l,n.startOffsetHeight=c,n.startValue=[1,1];var g=!a[0]&&!a[1]||a[0]||!a[1];function m(t){n.ratio=t&&isFinite(t)?t:0}function v(t){var e=Me(n.startPositions,t);n.fixedDirection=e.fixedDirection,n.fixedPosition=e.fixedPosition,n.fixedOffset=e.fixedOffset}ht(t,e,"scale"),n.isWidth=g,n.startPositions=In(t.state),n.setFixedDirection=v,m((0,o.l$)(d,p)/(0,o.l$)(p,f)),v([-a[0],-a[1]]);var b=function(t){n.minScaleSize=t},w=function(t){n.maxScaleSize=t};b([-1/0,-1/0]),w([1/0,1/0]);var S=Bn(t,e,y(y({direction:a,set:function(t){n.startValue=t},setRatio:m,setFixedDirection:v,setMinScaleSize:b,setMaxScaleSize:w},ut(t,e)),{dragStart:Ce.dragStart(t,(new X).dragStart([0,0],e))})),x=Un(t,"onScaleStart",S);return n.startFixedDirection=n.fixedDirection,!1!==x&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:a}),!!n.isScale&&S},dragControl:function(t,e){et(t,e,"scale");var n=e.datas,i=e.parentKeepRatio,r=e.parentFlag,s=e.isPinch,l=e.dragClient,c=e.isRequest,u=e.useSnap,h=e.resolveMatrix,d=n.prevDist,p=n.direction,f=n.startOffsetWidth,g=n.startOffsetHeight,m=n.isScale,v=n.startValue,b=n.isWidth,w=n.ratio;if(!m)return!1;var S=t.props,x=S.throttleScale,k=S.parentMoveable,C=p;p[0]||p[1]||(C=[1,1]);var M=w&&(null!=i?i:S.keepRatio)||!1,T=t.state,E=[v[0],v[1]];function A(){var t=si(C,M,n,e),i=t.distWidth,r=t.distHeight,o=f?(f+i)/f:1,a=g?(g+r)/g:1;v[0]||(E[0]=i/f),v[1]||(E[1]=r/g);var s=(C[0]||M?o:1)*E[0],l=(C[1]||M?a:1)*E[1];return 0===s&&(s=di(d[0])*G),0===l&&(l=di(d[1])*G),[s,l]}var _=A();if(!s&&t.props.groupable){var P=(T.snapRenderInfo||{}).direction;(0,o.cy)(P)&&(P[0]||P[1])&&(T.snapRenderInfo={direction:p,request:e.isRequest})}Un(t,"onBeforeScale",Bn(t,e,{scale:_,setFixedDirection:function(t){return n.setFixedDirection(t),_=A()},startFixedDirection:n.startFixedDirection,setScale:function(t){_=t}},!0));var D,O,L=[_[0]/E[0],_[1]/E[1]],I=l,R=[0,0],V=di(L[0]*L[1]),N=!l&&!r&&s;if(N||h?I=bt(t,n.targetAllTransform,[0,0],[0,0],n):l||(I=n.fixedPosition),s||(R=function(t,e,n,i,r){if(!Yt(t,"scalable"))return[0,0];var o=r.startOffsetWidth,s=r.startOffsetHeight,l=r.fixedPosition,c=r.fixedDirection,u=r.is3d,h=Ze(t,(function(t,n){return He(function(t,e){var n=t.transformOrigin,i=t.offsetMatrix,r=t.is3d,o=t.targetMatrix,s=t.targetAllTransform,l=r?4:3;return ct(i,(0,a.lw)(s||o,(0,a.kb)(e,l),l),n,l)}(r,(0,a.tY)(e,[t/o,n/s])),o,s,c,l,u)}),o,s,n,l,i,r);return[h[0]/o,h[1]/s]}(t,L,p,!u&&c,n)),M){C[0]&&C[1]&&R[0]&&R[1]&&(Math.abs(R[0]*f)>Math.abs(R[1]*g)?R[1]=0:R[0]=0);var F=!R[0]&&!R[1];if(F&&(b?L[0]=(0,o.nF)(L[0]*E[0],x)/E[0]:L[1]=(0,o.nF)(L[1]*E[1],x)/E[1]),C[0]&&!C[1]||R[0]&&!R[1]||F&&b){L[0]+=R[0];var B=f*L[0]*E[0]/w;L[1]=di(V*L[0])*pi(B/g/E[1])}else if(!C[0]&&C[1]||!R[0]&&R[1]||F&&!b){L[1]+=R[1];var z=g*L[1]*E[1]*w;L[0]=di(V*L[1])*pi(z/f/E[0])}}else L[0]+=R[0],L[1]+=R[1],R[0]||(L[0]=(0,o.nF)(L[0]*E[0],x)/E[0]),R[1]||(L[1]=(0,o.nF)(L[1]*E[1],x)/E[1]);0===L[0]&&(L[0]=di(d[0])*G),0===L[1]&&(L[1]=di(d[1])*G),D=L,O=[E[0],E[1]],_=[D[0]*O[0],D[1]*O[1]];var j=[f,g],U=[f*_[0],g*_[1]];U=(0,o.u0)(U,n.minScaleSize,n.maxScaleSize,!!M&&w),_=fi(2,(function(t){return j[t]?U[t]/j[t]:U[t]})),L=fi(2,(function(t){return _[t]/E[t]}));var $=fi(2,(function(t){return d[t]?L[t]/d[t]:L[t]})),H="scale(".concat(L.join(", "),")"),q="scale(".concat(_.join(", "),")"),W=nt(n,q,H),Z=!v[0]||!v[1],Y=function(t,e,n,i,r,o,a){return wt(t,e,n,i,r,o,a)}(t,Z?q:H,n.fixedDirection,I,n.fixedOffset,n,Z),K=N?Y:(0,a.Rd)(Y,n.prevInverseDist||[0,0]);if(n.prevDist=L,n.prevInverseDist=Y,_[0]===d[0]&&_[1]===d[1]&&K.every((function(t){return!t}))&&!k&&!N)return!1;var X=Bn(t,e,y({offsetWidth:f,offsetHeight:g,direction:p,scale:_,dist:L,delta:$,isPinch:!!s},yt(t,W,K,s,e)));return Un(t,"onScale",X),X},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var i=zn(t,e,{});return Un(t,"onScaleEnd",i),i},dragGroupControlCondition:vi,dragGroupControlStart:function(t,e){var n=e.datas,i=this.dragControlStart(t,e);if(!i)return!1;var r=_t(t,"resizable",e);n.moveableScale=t.scale;var o=Dt(t,this,"dragControlStart",e,(function(e,i){return Ot(t,e,n,i)})),a=function(e){i.setFixedDirection(e),o.forEach((function(i,o){i.setFixedDirection(e),Ot(t,i.moveable,n,r[o])}))};n.setFixedDirection=a;var s=y(y({},i),{targets:t.props.targets,events:o,setFixedDirection:a}),l=Un(t,"onScaleGroupStart",s);return n.isScale=!1!==l,!!n.isScale&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){jn(t,"onBeforeScale",(function(n){Un(t,"onBeforeScaleGroup",Bn(t,e,y(y({},n),{targets:t.props.targets}),!0))}));var i=this.dragControl(t,e);if(i){var r=i.dist,o=n.moveableScale;t.scale=[r[0]*o[0],r[1]*o[1]];var s=t.props.keepRatio,l=n.fixedPosition,c=Dt(t,this,"dragControl",e,(function(e,n){var i=b((0,a.Di)((0,a.XI)(t.rotation/180*Math.PI,3),[n.datas.originalX*r[0],n.datas.originalY*r[1],1],3),2),o=i[0],c=i[1];return y(y({},n),{parentDist:null,parentScale:r,parentKeepRatio:s,dragClient:(0,a.tY)(l,[o,c])})})),u=y({targets:t.props.targets,events:c},i);return Un(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var i=Dt(t,this,"dragControlEnd",e);return Un(t,"onScaleGroupEnd",zn(t,e,{targets:t.props.targets,events:i})),n}},request:function(){var t={},e=0,n=0,i=!1;return{isControl:!0,requestStart:function(e){return i=e.useSnap,{datas:t,parentDirection:e.direction||[1,1],useSnap:i}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}}};function bi(t,e){return t.map((function(t,n){return(0,o.Om)(t,e[n],1,2)}))}function wi(t,e,n){var i=(0,o.Mu)(t,e),r=(0,o.Mu)(t,n)-i;return r>=0?r:r+2*Math.PI}var Si={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:ei("warpable"),render:function(t,e){var n=t.props,i=n.resizable,r=n.scalable,o=n.warpable,a=n.zoom;if(i||r||!o)return[];var s=t.state,l=s.pos1,c=s.pos2,u=s.pos3,h=s.pos4,d=bi(l,c),p=bi(c,l),f=bi(l,u),g=bi(u,l),m=bi(u,h),v=bi(h,u),y=bi(c,h),S=bi(h,c);return w([e.createElement("div",{className:nn("line"),key:"middeLine1",style:kn(d,m,a)}),e.createElement("div",{className:nn("line"),key:"middeLine2",style:kn(p,v,a)}),e.createElement("div",{className:nn("line"),key:"middeLine3",style:kn(f,y,a)}),e.createElement("div",{className:nn("line"),key:"middeLine4",style:kn(g,S,a)})],b(Ft(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return(0,o.nB)(n,nn("direction"))&&(0,o.nB)(n,nn("warpable"))},dragControlStart:function(t,e){var n=e.datas,i=e.inputEvent,r=t.props.target,o=On(i.target,n);if(!o||!r)return!1;var s=t.state,l=s.transformOrigin,c=s.is3d,u=s.targetTransform,h=s.targetMatrix,d=s.width,p=s.height,f=s.left,g=s.top;return n.datas={},n.targetTransform=u,n.warpTargetMatrix=c?h:(0,a._C)(h,3,4),n.targetInverseMatrix=(0,a.bn)((0,a.B8)(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=f,n.top=g,n.poses=[[0,0],[d,0],[0,p],[d,p]].map((function(t){return(0,a.Rd)(t,l)})),n.nextPoses=n.poses.map((function(t){var e=b(t,2),i=e[0],r=e[1];return(0,a.Di)(n.warpTargetMatrix,[i,r,0,1],4)})),n.startValue=(0,a.k8)(4),n.prevMatrix=(0,a.k8)(4),n.absolutePoses=In(s),n.posIndexes=at(o),tt(t,e),ht(t,e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:o},!1!==Un(t,"onWarpStart",Bn(t,e,y({set:function(t){n.startValue=t}},ut(t,e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,i=e.isRequest,r=e.distX,o=e.distY,s=n.targetInverseMatrix,l=n.prevMatrix,c=n.isWarp,u=n.startValue,h=n.poses,d=n.posIndexes,p=n.absolutePoses;if(!c)return!1;if(et(t,e,"matrix3d"),Yt(t,"warpable")){var f=d.map((function(t){return p[t]}));f.length>1&&f.push([(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]);var g=Se(t,i,{horizontal:f.map((function(t){return t[1]+o})),vertical:f.map((function(t){return t[0]+r}))}),m=g.horizontal,v=g.vertical;o-=m.offset,r-=v.offset}var b=ot({datas:n,distX:r,distY:o},!0),w=n.nextPoses.slice();if(d.forEach((function(t){w[t]=(0,a.tY)(w[t],b)})),!z.every((function(t){return e=t.map((function(t){return h[t]})),n=t.map((function(t){return w[t]})),i=wi(e[0],e[1],e[2]),r=wi(n[0],n[1],n[2]),!(i>=(o=Math.PI)&&r<=o||i<=o&&r>=o);var e,n,i,r,o})))return!1;var S=(0,a.qL)(h[0],h[2],h[1],h[3],w[0],w[2],w[1],w[3]);if(!S.length)return!1;var x=it(n,(0,a.lw)(s,S,4),!0),k=(0,a.lw)((0,a.B8)(l,4),x,4);n.prevMatrix=x;var C=(0,a.lw)(u,x,4),M=nt(n,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(x.join(", "),")"));return pt(e,M),Un(t,"onWarp",Bn(t,e,y({delta:k,matrix:C,dist:x,multiply:a.lw,transform:M},Nn({transform:M},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,Un(t,"onWarpEnd",zn(t,e,{})),i)}},xi=nn("area-pieces"),ki=nn("area-piece"),Ci=nn("avoid"),Mi=nn("view-dragging");function Ti(t){var e=t.areaElement;if(e){var n=t.state,i=n.width,r=n.height;(0,o.vy)(e,Ci),e.style.cssText+="left: 0px; top: 0px; width: ".concat(i,"px; height: ").concat(r,"px")}}function Ei(t){return t.createElement("div",{key:"area_pieces",className:xi},t.createElement("div",{className:ki}),t.createElement("div",{className:ki}),t.createElement("div",{className:ki}),t.createElement("div",{className:ki}))}var Ai={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,i=n.target,o=n.dragArea,s=n.groupable,l=n.passDragArea,c=t.getState(),u=c.width,h=c.height,d=c.renderPoses,p=l?nn("area","pass"):nn("area");if(s)return[e.createElement("div",{key:"area",ref:(0,r.KR)(t,"areaElement"),className:p}),Ei(e)];if(!i||!o)return[];var f=(0,a.qL)([0,0],[u,0],[0,h],[u,h],d[0],d[1],d[2],d[3]),g=f.length?fn(f,!0):"none";return[e.createElement("div",{key:"area",ref:(0,r.KR)(t,"areaElement"),className:p,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(h,"px"),transformOrigin:"0 0",transform:g}}),Ei(e)]},dragStart:function(t,e){var n=e.datas,i=e.clientX,r=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var a=t.areaElement,s=t.state,l=s.moveableClientRect,c=s.renderPoses,u=s.rootMatrix,h=s.is3d,d=l.left,p=l.top,f=bn(c),g=f.left,m=f.top,v=f.width,y=f.height,w=b(Kn(u,[i-d,r-p],h?4:3),2),S=w[0],x=w[1],k=[{left:g,top:m,width:v,height:(x-=m)-10},{left:g,top:m,width:(S-=g)-10,height:y},{left:g,top:m+x+10,width:v,height:y-x-10},{left:g+S+10,top:m,width:v-S-10,height:y}],C=[].slice.call(a.nextElementSibling.children);k.forEach((function(t,e){C[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),(0,o.iQ)(a,Ci),s.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,i=e.inputEvent;if(this.enableNativeEvent(t),!i)return!1;n.isDragArea||(n.isDragArea=!0,Ti(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,i=e.datas;if(!n)return!1;i.isDragArea||Ti(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Ti(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&(0,o.xi)((function(){e.disableNativeEvent=!1}))}},_i=S("origin",{props:["origin","svgOrigin"],render:function(t,e){var n,i=t.props,r=i.zoom,o=i.svgOrigin,s=i.groupable,l=t.getState(),c=l.beforeOrigin,u=l.rotation,h=l.svg,d=l.allMatrix,p=l.is3d,f=l.left,g=l.top,m=l.offsetWidth,v=l.offsetHeight;if(!s&&h&&o){var y=b(ci(o,m,v),2),w=vn(d,[y[0],y[1]],p?4:3);n=Cn(u,r,(0,a.Rd)(w,[f,g]))}else n=Cn(u,r,c);return[e.createElement("div",{className:nn("control","origin"),style:n,key:"beforeOrigin"})]}});function Pi(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Di={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,i=n.scrollContainer,r=void 0===i?t.getContainer():i,o=n.scrollOptions,a=new c.A,s=ii(r,!0);e.datas.dragScroll=a,t.state.dragScroll=a;var l=e.isControl?"controlGesto":"targetGesto",u=e.targets;a.on("scroll",(function(n){var i=n.container,r=n.direction,o=Bn(t,e,{scrollContainer:i,direction:r}),a=u?"onScrollGroup":"onScroll";u&&(o.targets=u),Un(t,a,o)})).on("move",(function(e){var n=e.offsetX,i=e.offsetY,r=e.inputEvent;t[l].scrollBy(n,i,r.inputEvent,!1)})).on("scrollDrag",(function(e){(0,e.next)(t[l].getCurrentEvent())})),a.dragStart(e,y({container:s},o))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var i=t.props,r=i.scrollContainer,o=void 0===r?t.getContainer():r,a=i.scrollThreshold,s=void 0===a?0:a,l=i.scrollThrottleTime,c=void 0===l?0:l,u=i.getScrollPosition,h=void 0===u?Pi:u,d=i.scrollOptions;return n.drag(e,y({container:o,threshold:s,throttleTime:c,getScrollPosition:function(t){return h({scrollContainer:t.container,direction:t.direction})}},d)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,y(y({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,y(y({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,y(y({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,y(y({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,y(y({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,y(y({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,y(y({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;null===(e=n.dragScroll)||void 0===e||e.dragEnd(),n.dragScroll=null}},Oi={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Li=S("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var i=gi(n.padding||{}),r=i.left,o=i.top,s=i.right,l=i.bottom,c=t.getState(),u=c.renderPoses,h=[c.pos1,c.pos2,c.pos3,c.pos4],d=[];return r>0&&d.push([0,2]),o>0&&d.push([0,1]),s>0&&d.push([1,3]),l>0&&d.push([2,3]),d.map((function(t,n){var i=b(t,2),r=i[0],o=i[1],s=h[r],l=h[o],c=u[r],d=u[o],p=(0,a.qL)([0,0],[100,0],[0,100],[100,100],s,l,c,d);if(p.length)return e.createElement("div",{key:"padding".concat(n),className:nn("padding"),style:{transform:fn(p,!0)}})}))}}),Ii=["nw","ne","se","sw"];function Ri(t,e){var n=t[0]+t[1],i=n>e?e/n:1;return t[0]*=i,t[1]=e-t[1]*i,t}var Vi=[1,2,5,6],Ni=[0,3,4,7],Fi=[1,-1,-1,1],Bi=[1,1,-1,-1];function zi(t,e,n,i,r,o,a,s){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=n),void 0===s&&(s=i);var l=[],c=!1,u=t.filter((function(t){return!t.virtual})),h=u.map((function(t){var u=t.horizontal,h=t.vertical,d=t.pos;if(h&&!c&&(c=!0,l.push("/")),c){var p=Math.max(0,1===h?d[1]-o:s-d[1]);return l.push(Qn(p,i,e)),p}return p=Math.max(0,1===u?d[0]-r:a-d[0]),l.push(Qn(p,n,e)),p}));return{radiusPoses:u,styles:l,raws:h}}function ji(t){for(var e=[0,0],n=[0,0],i=t.length,r=0;r<i;++r){var o=t[r];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=r),e[1]=r-e[0]+1,n[0]=r+1),o.vertical&&(0===n[1]&&(n[0]=r),n[1]=r-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function Ui(t,e,n,i,r,a,s){var l,c,u,h;void 0===a&&(a=[0,0]),void 0===s&&(s=!1);var d=t.indexOf("/"),p=(d>-1?t.slice(0,d):t).length,f=t.slice(0,p),g=t.slice(p+1),m=f.length,v=g.length,y=v>0,S=b(f,4),x=S[0],k=void 0===x?"0px":x,C=S[1],M=void 0===C?k:C,T=S[2],E=void 0===T?k:T,A=S[3],_=void 0===A?M:A,P=b(g,4),D=P[0],O=void 0===D?k:D,L=P[1],I=void 0===L?y?O:M:L,R=P[2],V=void 0===R?y?O:E:R,N=P[3],F=void 0===N?y?I:_:N,B=[k,M,E,_].map((function(t){return(0,o.jc)(t,e)})),z=[O,I,V,F].map((function(t){return(0,o.jc)(t,n)})),j=B.slice(),U=z.slice();l=b(Ri([j[0],j[1]],e),2),j[0]=l[0],j[1]=l[1],c=b(Ri([j[3],j[2]],e),2),j[3]=c[0],j[2]=c[1],u=b(Ri([U[0],U[3]],n),2),U[0]=u[0],U[3]=u[1],h=b(Ri([U[1],U[2]],n),2),U[1]=h[0],U[2]=h[1];var G=s?j:j.slice(0,Math.max(a[0],m)),$=s?U:U.slice(0,Math.max(a[1],v));return w(w([],b(G.map((function(t,e){var o=Ii[e];return{virtual:e>=m,horizontal:Fi[e],vertical:0,pos:[i+t,r+(-1===Bi[e]?n:0)],sub:!0,raw:B[e],direction:o}}))),!1),b($.map((function(t,n){var o=Ii[n];return{virtual:n>=v,horizontal:0,vertical:Bi[n],pos:[i+(-1===Fi[n]?e:0),r+t],sub:!0,raw:z[n],direction:o}}))),!1)}var Gi=[[0,-1,"n"],[1,0,"e"]],$i=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Hi(t,e,n){var i=t.props.clipRelative,r=t.state,o=r.width,s=r.height,l=e,c=l.type,u=l.poses,h="rect"===c,d="circle"===c;if("polygon"===c)return n.map((function(t){return"".concat(Qn(t[0],o,i)," ").concat(Qn(t[1],s,i))}));if(h||"inset"===c){var p=n[1][1],f=n[3][0],g=n[7][0],m=n[5][1];if(h)return[p,f,m,g].map((function(t){return"".concat(t,"px")}));var v=[p,o-f,s-m,g].map((function(t,e){return Qn(t,e%2?o:s,i)}));if(n.length>8){var S=b((0,a.Rd)(n[4],n[0]),2),x=S[0],k=S[1];v.push.apply(v,w(["round"],b(zi(u.slice(8).map((function(t,e){return y(y({},t),{pos:n[e]})})),i,x,k,g,p,f,m).styles),!1))}return v}if(d||"ellipse"===c){var C=n[0],M=Qn(pi(n[1][1]-C[1]),d?Math.sqrt((o*o+s*s)/2):s,i);return(v=d?[M]:[Qn(pi(n[2][0]-C[0]),o,i),M]).push("at",Qn(C[0],o,i),Qn(C[1],s,i)),v}}function qi(t,e,n,i){var r=[i,(i+e)/2,e],o=[t,(t+n)/2,n];return $i.map((function(t){var e=b(t,3),n=e[0],i=e[1],a=e[2],s=r[n+1],l=o[i+1];return{vertical:pi(i),horizontal:pi(n),direction:a,pos:[s,l]}}))}function Wi(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach((function(t){var i=t.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])})),[pi(e[1]-e[0]),pi(n[1]-n[0])]}function Zi(t,e,n,i,r){var a,s,l,c,h,d,p,f,g;if(t){var m=r;if(!m){var v=At(t),y=v("clipPath");m="none"!==y?y:v("clip")}if(m&&"none"!==m&&"auto"!==m||(m=i)){var S=(0,o.ft)(m),x=S.prefix,k=void 0===x?m:x,C=S.value,M=void 0===C?"":C,T="circle"===k,E=" ";if("polygon"===k){E=",";var A=(N=(0,o.cM)(M||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var i=b(t.split(" "),2),r=i[0],a=i[1];return{vertical:1,horizontal:1,pos:[(0,o.jc)(r,e),(0,o.jc)(a,n)]}})),_=(0,u.Qk)(A.map((function(t){return t.pos})));return{type:k,clipText:m,poses:A,splitter:E,left:_.minX,right:_.maxX,top:_.minY,bottom:_.maxY}}if(T||"ellipse"===k){var P,D,O,L="",I="",R=0,V=0,N=(0,o.Z3)(M);if(T)P=void 0===(s=(a=b(N,4))[0])?"50%":s,L=void 0===(l=a[2])?"50%":l,I=void 0===(c=a[3])?"50%":c,R=(0,o.jc)(P,Math.sqrt((e*e+n*n)/2)),V=R;else D=void 0===(d=(h=b(N,5))[0])?"50%":d,O=void 0===(p=h[1])?"50%":p,L=void 0===(f=h[3])?"50%":f,I=void 0===(g=h[4])?"50%":g,R=(0,o.jc)(D,e),V=(0,o.jc)(O,n);var F=[(0,o.jc)(L,e),(0,o.jc)(I,n)];return A=w([{vertical:1,horizontal:1,pos:F,direction:"nesw"}],b(Gi.slice(0,T?1:2).map((function(t){return{vertical:pi(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[F[0]+t[0]*R,F[1]+t[1]*V]}}))),!1),{type:k,clipText:m,radiusX:R,radiusY:V,left:F[0]-R,top:F[1]-V,right:F[0]+R,bottom:F[1]+V,poses:A,splitter:E}}if("inset"===k){var B=(N=(0,o.Z3)(M||"0 0 0 0")).indexOf("round"),z=(B>-1?N.slice(0,B):N).length,j=N.slice(z+1),U=b(N.slice(0,z),4),G=U[0],$=U[1],H=void 0===$?G:$,q=U[2],W=void 0===q?G:q,Z=U[3],Y=void 0===Z?H:Z,K=b([G,W].map((function(t){return(0,o.jc)(t,n)})),2),X=K[0],J=K[1],Q=b([Y,H].map((function(t){return(0,o.jc)(t,e)})),2),tt=Q[0],et=Q[1],nt=e-et,it=n-J,rt=Ui(j,nt-tt,it-X,tt,X);return{type:"inset",clipText:m,poses:A=w(w([],b(qi(X,nt,it,tt)),!1),b(rt),!1),top:X,left:tt,right:nt,bottom:it,radius:j,splitter:E}}if("rect"===k){E=",";var ot=b((N=(0,o.cM)(M||"0px, ".concat(e,"px, ").concat(n,"px, 0px"))).map((function(t){return(0,o.hg)(t).value})),4),at=ot[0];return{type:"rect",clipText:m,poses:A=qi(at,et=ot[1],J=ot[2],tt=ot[3]),top:at,right:et,bottom:J,left:tt,values:N,splitter:E}}}}}var Yi={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[".control.clip-control {\nbackground: #6d6;\ncursor: pointer;\n}\n.control.clip-control.clip-radius {\nbackground: #d66;\n}\n.line.clip-line {\nbackground: #6e6;\ncursor: move;\nz-index: 1;\n}\n.clip-area {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.clip-ellipse {\nposition: absolute;\ncursor: move;\nborder: 1px solid #6d6;\nborder: var(--zoompx) solid #6d6;\nborder-radius: 50%;\ntransform-origin: 0px 0px;\n}",":host {\n--bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}"],render:function(t,e){var n=t.props,i=n.customClipPath,r=n.defaultClipPath,s=n.clipArea,l=n.zoom,c=n.groupable,u=t.getState(),h=u.target,d=u.width,p=u.height,f=u.allMatrix,g=u.is3d,m=u.left,v=u.top,y=u.pos1,S=u.pos2,x=u.pos3,k=u.pos4,C=u.clipPathState,M=u.snapBoundInfos,T=u.rotation;if(!h||c)return[];var E=Zi(h,d,p,r||"inset",C||i);if(!E)return[];var A=g?4:3,_=E.type,P=E.poses.map((function(t){var e=vn(f,t.pos,A);return[e[0]-m,e[1]-v]})),D=[],O=[],L="rect"===_,I="inset"===_,R="polygon"===_;if(L||I||R){var V=I?P.slice(0,8):P;O=V.map((function(t,n){var i=0===n?V[V.length-1]:V[n-1],r=(0,o.Mu)(i,t),a=xn(i,t);return e.createElement("div",{key:"clipLine".concat(n),className:nn("line","clip-line","snap-control"),"data-clip-index":n,style:{width:"".concat(a,"px"),transform:"translate(".concat(i[0],"px, ").concat(i[1],"px) rotate(").concat(r,"rad) scaleY(").concat(l,")")}})}))}if(D=P.map((function(t,n){return e.createElement("div",{key:"clipControl".concat(n),className:nn("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(T,"rad) scale(").concat(l,")")}})})),I&&D.push.apply(D,w([],b(P.slice(8).map((function(t,n){return e.createElement("div",{key:"clipRadiusControl".concat(n),className:nn("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(T,"rad) scale(").concat(l,")")}})}))),!1)),"circle"===_||"ellipse"===_){var N=E.left,F=E.top,B=E.radiusX,z=E.radiusY,j=b((0,a.Rd)(vn(f,[N,F],A),vn(f,[0,0],A)),2),U=j[0],G=j[1],$="none";if(!s){for(var H=Math.max(10,B/5,z/5),q=[],W=0;W<=H;++W){var Z=2*Math.PI/H*W;q.push([B+(B-l)*Math.cos(Z),z+(z-l)*Math.sin(Z)])}q.push([B,-2]),q.push([-2,-2]),q.push([-2,2*z+2]),q.push([2*B+2,2*z+2]),q.push([2*B+2,-2]),q.push([B,-2]),$="polygon(".concat(q.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}D.push(e.createElement("div",{key:"clipEllipse",className:nn("clip-ellipse","snap-control"),style:{width:"".concat(2*B,"px"),height:"".concat(2*z,"px"),clipPath:$,transform:"translate(".concat(-m+U,"px, ").concat(-v+G,"px) ").concat(fn(f))}}))}if(s){var Y=bn(w([y,S,x,k],b(P),!1)),K=Y.width,X=Y.height,J=Y.left,Q=Y.top;(R||L||I)&&(q=I?P.slice(0,8):P,D.push(e.createElement("div",{key:"clipArea",className:nn("clip-area","snap-control"),style:{width:"".concat(K,"px"),height:"".concat(X,"px"),transform:"translate(".concat(J,"px, ").concat(Q,"px)"),clipPath:"polygon(".concat(q.map((function(t){return"".concat(t[0]-J,"px ").concat(t[1]-Q,"px")})).join(", "),")")}})))}return M&&["vertical","horizontal"].forEach((function(t){var n=M[t],i="horizontal"===t;n.isSnap&&O.push.apply(O,w([],b(n.snap.posInfos.map((function(n,r){var o=n.pos,s=(0,a.Rd)(vn(f,i?[0,o]:[o,0],A),[m,v]),c=(0,a.Rd)(vn(f,i?[d,o]:[o,p],A),[m,v]);return Rt(e,"",s,c,l,"clip".concat(t,"snap").concat(r),"guideline")}))),!1)),n.isBound&&O.push.apply(O,w([],b(n.bounds.map((function(n,r){var o=n.pos,s=(0,a.Rd)(vn(f,i?[0,o]:[o,0],A),[m,v]),c=(0,a.Rd)(vn(f,i?[d,o]:[o,p],A),[m,v]);return Rt(e,"",s,c,l,"clip".concat(t,"bounds").concat(r),"guideline","bounds","bold")}))),!1))})),w(w([],b(D),!1),b(O),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,y(y({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,i=t.props,r=i.defaultClipPath,o=i.customClipPath,a=n.target,s=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",h=e.datas,d=Zi(a,s,l,r||"inset",o);if(!d)return!1;var p=d.clipText;return!1===Un(t,"onClipStart",Bn(t,e,{clipType:d.type,clipStyle:p,poses:d.poses.map((function(t){return t.pos}))}))?(h.isClipStart=!1,!1):(h.isControl=u&&u.indexOf("clip-control")>-1,h.isLine=u.indexOf("clip-line")>-1,h.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,h.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,h.clipPath=d,h.isClipStart=!0,n.clipPathState=p,tt(t,e),!0)},dragControl:function(t,e){var n,i,r,s=e.datas,l=e.originalDatas,c=e.isDragTarget;if(!s.isClipStart)return!1;var u=s,h=u.isControl,d=u.isLine,p=u.isArea,f=u.clipIndex,g=u.clipPath;if(!g)return!1;var m=Mn(t.props,"clippable"),v=m.keepRatio,S=0,x=0,k=l.draggable,C=ot(e);c&&k?(n=b(k.prevBeforeDist,2),S=n[0],x=n[1]):(i=b(C,2),S=i[0],x=i[1]);var M=[S,x],T=t.state,E=T.width,A=T.height,_=!p&&!h&&!d,P=g.type,D=g.poses,O=g.splitter,L=D.map((function(t){return t.pos}));_&&(S=-S,x=-x);var I=!h||"nesw"===D[f].direction,R="inset"===P||"rect"===P,V=D.map((function(){return[0,0]}));if(h&&!I){var N=D[f],F=N.horizontal,B=N.vertical,z=[S*pi(F),x*pi(B)];V=function(t,e,n,i,r){var o=t[e],a=o.direction,s=o.sub,l=t.map((function(){return[0,0]})),c=a?a.split(""):[];if(i&&e<8){var u=c.filter((function(t){return"w"===t||"e"===t})),h=c.filter((function(t){return"n"===t||"s"===t})),d=u[0],p=h[0];l[e]=n;var f=b(Wi(t),2),g=f[0],m=f[1],v=g&&m?g/m:0;if(v&&r){var y=t[(e+4)%8].pos,w=[0,0];a.indexOf("w")>-1?w[0]=-1:a.indexOf("e")>-1&&(w[0]=1),a.indexOf("n")>-1?w[1]=-1:a.indexOf("s")>-1&&(w[1]=1);var S=ai([g,m],n,v,w,!0),x=g+S[0],k=m+S[1],C=y[1],M=y[1],T=y[0],E=y[0];-1===w[0]?T=E-x:1===w[0]?E=T+x:(T-=x/2,E+=x/2),-1===w[1]?C=M-k:M=1===w[1]?C+k:(C=M-k/2)+k;var A=qi(C,E,M,T);t.forEach((function(t,e){l[e][0]=A[e].pos[0]-t.pos[0],l[e][1]=A[e].pos[1]-t.pos[1]}))}else t.forEach((function(t,e){var i=t.direction;i&&(i.indexOf(d)>-1&&(l[e][0]=n[0]),i.indexOf(p)>-1&&(l[e][1]=n[1]))})),d&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),p&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else a&&!s?c.forEach((function(e){var i="n"===e||"s"===e;t.forEach((function(t,r){var o=t.direction,a=t.horizontal,s=t.vertical;o&&-1!==o.indexOf(e)&&(l[r]=[i||!a?0:n[0],i&&s?n[1]:0])}))})):l[e]=n;return l}(D,f,z,R,v)}else I&&(V=L.map((function(){return[S,x]})));var j=L.map((function(t,e){return(0,a.tY)(t,V[e])})),U=w([],b(j),!1);T.snapBoundInfos=null;var G="circle"===g.type,$="ellipse"===g.type;if(G||$){var H=pi((lt=bn(j)).bottom-lt.top),q=pi($?lt.right-lt.left:H),W=j[0][1]+H,Z=j[0][0]-q,Y=j[0][0]+q;G&&(U.push([Y,lt.bottom]),V.push([1,0])),U.push([lt.left,W]),V.push([0,1]),U.push([Z,lt.bottom]),V.push([1,0])}var K=Ge((m.clipHorizontalGuidelines||[]).map((function(t){return(0,o.jc)("".concat(t),A)})),(m.clipVerticalGuidelines||[]).map((function(t){return(0,o.jc)("".concat(t),E)})),E,A),X=[],J=[];if(G||$)X=[U[4][0],U[2][0]],J=[U[1][1],U[3][1]];else if(R){var Q=[U[0],U[2],U[4],U[6]],tt=[V[0],V[2],V[4],V[6]];X=Q.filter((function(t,e){return tt[e][0]})).map((function(t){return t[0]})),J=Q.filter((function(t,e){return tt[e][1]})).map((function(t){return t[1]}))}else X=U.filter((function(t,e){return V[e][0]})).map((function(t){return t[0]})),J=U.filter((function(t,e){return V[e][1]})).map((function(t){return t[1]}));var et=[0,0],nt=xe(K,m.clipTargetBounds&&{left:0,top:0,right:E,bottom:A},X,J,5,5),it=nt.horizontal,rt=nt.vertical,at=it.offset,st=rt.offset;if(it.isBound&&(et[1]+=at),rt.isBound&&(et[0]+=st),($||G)&&0===V[0][0]&&0===V[0][1]){var lt,ct=(lt=bn(j)).bottom-lt.top,ut=$?lt.right-lt.left:ct;ut-=rt.isBound?pi(st):0===rt.snapIndex?-st:st,ct-=it.isBound?pi(at):0===it.snapIndex?-at:at,G&&(ut=ct=le(rt,it)>0?ct:ut);var ht=U[0];U[1][1]=ht[1]-ct,U[2][0]=ht[0]+ut,U[3][1]=ht[1]+ct,U[4][0]=ht[0]-ut}else if(R&&v&&h){var dt=b(Wi(D),2),pt=dt[0],ft=dt[1],gt=pt&&ft?pt/ft:0,mt=D[f].direction||"",vt=U[1][1];W=U[5][1],Z=U[7][0],Y=U[3][0],pi(at)<=pi(st)?at=di(at)*pi(st)/gt:st=di(st)*pi(at)*gt,mt.indexOf("w")>-1?Z-=st:mt.indexOf("e")>-1?Y-=st:(Z+=st/2,Y-=st/2),mt.indexOf("n")>-1?vt-=at:mt.indexOf("s")>-1?W-=at:(vt+=at/2,W-=at/2);var yt=qi(vt,Y,W,Z);U.forEach((function(t,e){var n;n=b(yt[e].pos,2),t[0]=n[0],t[1]=n[1]}))}else U.forEach((function(t,e){var n=V[e];n[0]&&(t[0]-=st),n[1]&&(t[1]-=at)}));var bt=Hi(t,g,j),wt="".concat(P,"(").concat(bt.join(O),")");if(T.clipPathState=wt,G||$?(X=[U[4][0],U[2][0]],J=[U[1][1],U[3][1]]):R?(X=(Q=[U[0],U[2],U[4],U[6]]).map((function(t){return t[0]})),J=Q.map((function(t){return t[1]}))):(X=U.map((function(t){return t[0]})),J=U.map((function(t){return t[1]}))),T.snapBoundInfos=xe(K,m.clipTargetBounds&&{left:0,top:0,right:E,bottom:A},X,J,1,1),k){var St=T.is3d,xt=T.allMatrix,kt=St?4:3,Ct=et;c&&(Ct=[M[0]+et[0]-C[0],M[1]+et[1]-C[1]]),k.deltaOffset=(0,a.lw)(xt,[Ct[0],Ct[1],0,0],kt)}return Un(t,"onClip",Bn(t,e,y({clipEventType:"changed",clipType:P,poses:j,clipStyle:wt,clipStyles:bt,distX:S,distY:x},Nn(((r={})["rect"===P?"clip":"clipPath"]=wt,r),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,i=e.datas,r=e.isDouble,o=i.isLine,a=i.isClipStart,s=i.isControl;return!!a&&(Un(t,"onClipEnd",zn(t,e,{})),r&&(s?function(t,e){var n=e.datas,i=n.clipPath,r=n.clipIndex,o=i,a=o.type,s=o.poses,l=o.splitter,c=s.map((function(t){return t.pos})),u=c.length;if("polygon"===a)s.splice(r,1),c.splice(r,1);else{if("inset"!==a)return;if(r<8)return;if(function(t,e,n,i,r){void 0===r&&(r=e.length);var o=ji(t.slice(8)),a=o.horizontalRange,s=o.verticalRange,l=n-8,c=0;if(0===l)c=r;else if(l>0&&l<a[1])c=a[1]-l;else{if(!(l>=s[0]))return;c=s[0]+s[1]-l}t.splice(n,c),e.splice(n,c)}(s,c,r,0,u),u===s.length)return}var h=Hi(t,i,c),d="".concat(a,"(").concat(h.join(l),")");Un(t,"onClip",Bn(t,e,y({clipEventType:"removed",clipType:a,poses:c,clipStyles:h,clipStyle:d,distX:0,distY:0},Nn({clipPath:d},e))))}(t,e):o&&function(t,e){var n=b(Q(t,e),2),i=n[0],r=n[1],o=e.datas,a=o.clipPath,s=o.clipIndex,l=a,c=l.type,u=l.poses,h=l.splitter,d=u.map((function(t){return t.pos}));if("polygon"===c)d.splice(s,0,[i,r]);else{if("inset"!==c)return;var p=Vi.indexOf(s),f=Ni.indexOf(s),g=u.length;if(function(t,e,n,i,r,o,a,s,l,c,u){void 0===c&&(c=0),void 0===u&&(u=0);var h=ji(t.slice(8)),d=h.horizontalRange,p=h.verticalRange;if(i>-1)for(var f=1===Fi[i]?o-c:s-o,g=d[1];g<=i;++g){var m=1===Bi[g]?u:l,v=0;if(i===g?v=o:0===g?v=c+f:-1===Fi[g]&&(v=s-(e[8][0]-c)),t.splice(8+g,0,{horizontal:Fi[g],vertical:0,pos:[v,m]}),e.splice(8+g,0,[v,m]),0===g)break}else if(r>-1){var y=1===Bi[r]?a-u:l-a;if(0===d[1]&&0===p[1]){var b=[c+y,u];t.push({horizontal:Fi[0],vertical:0,pos:b}),e.push(b)}var w=p[0];for(g=p[1];g<=r&&(v=1===Fi[g]?c:s,m=0,r===g?m=a:0===g?m=u+y:1===Bi[g]?m=e[8+w][1]:-1===Bi[g]&&(m=l-(e[8+w][1]-u)),t.push({horizontal:0,vertical:Bi[g],pos:[v,m]}),e.push([v,m]),0!==g);++g);}}(u,d,0,p,f,i,r,d[4][0],d[4][1],d[0][0],d[0][1]),g===u.length)return}var m=Hi(t,a,d),v="".concat(c,"(").concat(m.join(h),")");Un(t,"onClip",Bn(t,e,y({clipEventType:"added",clipType:c,poses:d,clipStyles:m,clipStyle:v,distX:0,distY:0},Nn({clipPath:v},e))))}(t,e)),r||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Ki={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[":host[data-able-origindraggable] .control.origin {\npointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:(0,o.nB)(e.inputEvent.target,nn("origin"))},dragControlStart:function(t,e){var n=e.datas;tt(t,e);var i=Bn(t,e,{dragStart:Ce.dragStart(t,(new X).dragStart([0,0],e))}),r=Un(t,"onDragOriginStart",i);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,!1===r?(n.isDragOrigin=!1,!1):i},dragControl:function(t,e){var n=e.datas,i=e.isPinch,r=e.isRequest;if(!n.isDragOrigin)return!1;var o=b(ot(e),2),s=o[0],l=o[1],c=t.state,u=c.width,h=c.height,d=c.offsetMatrix,p=c.targetMatrix,f=c.is3d,g=t.props.originRelative,m=void 0===g||g,v=f?4:3,w=[s,l];if(r){var S=e.distOrigin;(S[0]||S[1])&&(w=S)}var x=(0,a.tY)(n.startOrigin,w),k=(0,a.tY)(n.startTargetOrigin,w),C=(0,a.Rd)(w,n.prevOrigin),M=ct(d,p,x,v),T=t.getRect(),E=bn(yn(M,u,h,v)),A=[T.left-E.left,T.top-E.top];n.prevOrigin=w;var _=[Qn(k[0],u,m),Qn(k[1],h,m)].join(" "),P=Ce.drag(t,K(e,t.state,A,!!i,!1)),D=Bn(t,e,y(y({width:u,height:h,origin:x,dist:w,delta:C,transformOrigin:_,drag:P},Nn({transformOrigin:_,transform:P.transform},e)),{afterTransform:P.transform}));return Un(t,"onDragOrigin",D),D},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(Un(t,"onDragOriginEnd",zn(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),i=0,r=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?i=t.x-n.left:"deltaX"in t&&(i+=t.deltaX),"y"in t?r=t.y-n.top:"deltaY"in t&&(r+=t.deltaY)),{datas:e,distX:i,distY:r,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Xi(t,e,n,i,r){return void 0===i&&(i=[0,0]),Ui(t&&"0px"!==t?(0,o.Z3)(t):[],e,n,0,0,i,r)}function Ji(t,e,n,i,r){var o=t.state,a=o.width,s=o.height,l=zi(r,t.props.roundRelative,a,s),c=l.raws,u=l.styles,h=function(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,n){return t.horizontal?e[n]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,n){return t.vertical?e[n]:null})).filter((function(t){return null!=t}))}}(l.radiusPoses,c),d=h.horizontals,p=h.verticals,f=u.join(" ");o.borderRadiusState=f;var g=Bn(t,e,y({horizontals:d,verticals:p,borderRadius:f,width:a,height:s,delta:i,dist:n},Nn({borderRadius:f},e)));return Un(t,"onRound",g),g}function Qi(t){var e,n,i=t.getState().style,r=i.borderRadius||"";if(!r&&t.props.groupable){var o=t.moveables[0],a=t.getTargets()[0];a&&((null==o?void 0:o.props.target)===a?(r=null!==(n=null===(e=t.moveables[0])||void 0===e?void 0:e.state.style.borderRadius)&&void 0!==n?n:"",i.borderRadius=r):(r=Gn(a).borderRadius,i.borderRadius=r))}return r}var tr={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[".control.border-radius {\nbackground: #d66;\ncursor: pointer;\nz-index: 3;\n}",".control.border-radius.vertical {\nbackground: #d6d;\nz-index: 2;\n}",".control.border-radius.virtual {\nopacity: 0.5;\nz-index: 1;\n}",":host.round-line-clickable .line.direction {\ncursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?nn("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),i=n.target,r=n.width,o=n.height,s=n.allMatrix,l=n.is3d,c=n.left,u=n.top,h=n.borderRadiusState,d=t.props,p=d.minRoundControls,f=void 0===p?[0,0]:p,g=d.maxRoundControls,m=void 0===g?[4,4]:g,v=d.zoom,y=d.roundPadding,S=void 0===y?0:y,x=d.isDisplayShadowRoundControls,k=d.groupable;if(!i)return null;var C=h||Qi(t),M=l?4:3,T=Xi(C,r,o,f,!0);if(!T)return null;var E=0,A=0,_=k?[0,0]:[c,u];return T.map((function(t,n){var i=t.horizontal,r=t.vertical,o=t.direction||"",l=w([],b(t.pos),!1);A+=Math.abs(i),E+=Math.abs(r),i&&o.indexOf("n")>-1&&(l[1]-=S),r&&o.indexOf("w")>-1&&(l[0]-=S),i&&o.indexOf("s")>-1&&(l[1]+=S),r&&o.indexOf("e")>-1&&(l[0]+=S);var c=(0,a.Rd)(vn(s,l,M),_),u=x&&"horizontal"!==x,h=t.vertical?E<=m[1]&&(u||!t.virtual):A<=m[0]&&(x||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(n),className:nn("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":n,style:{display:h?"block":"none",transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) scale(").concat(v,")")}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,i=e.datas,r=n.target,o=r.getAttribute("class")||"",a=o.indexOf("border-radius")>-1,s=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,l=a?parseInt(r.getAttribute("data-radius-index"),10):-1,c=-1;if(s){var u=r.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!a&&!s)return!1;var h=Bn(t,e,{});if(!1===Un(t,"onRoundStart",h))return!1;i.lineIndex=c,i.controlIndex=l,i.isControl=a,i.isLine=s,tt(t,e);var d=t.props,p=d.roundRelative,f=d.minRoundControls,g=void 0===f?[0,0]:f,m=t.state,v=m.width,y=m.height;i.isRound=!0,i.prevDist=[0,0];var b=Xi(Qi(t)||"",v,y,g,!0)||[];return i.controlPoses=b,m.borderRadiusState=zi(b,p,v,y).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,i=n.controlPoses;if(!n.isRound||!n.isControl||!i.length)return!1;var r=n.controlIndex,o=b(ot(e),2),s=o[0],l=o[1],c=[s,l],u=(0,a.Rd)(c,n.prevDist),h=t.props.maxRoundControls,d=void 0===h?[4,4]:h,p=t.state,f=p.width,g=p.height,m=i[r],v=m.vertical,w=m.horizontal,S=i.map((function(t){var e=t.horizontal,n=t.vertical,i=[e*w*c[0],n*v*c[1]];if(e){if(1===d[0])return i;if(d[0]<4&&e!==w)return i}else{if(0===d[1])return i[1]=n*w*c[0]/f*g,i;if(v){if(1===d[1])return i;if(d[1]<4&&n!==v)return i}}return[0,0]}));S[r]=c;var x=i.map((function(t,e){return y(y({},t),{pos:(0,a.tY)(t.pos,S[e])})}));return r<4?x.slice(0,r+1).forEach((function(t){t.virtual=!1})):x.slice(4,r+1).forEach((function(t){t.virtual=!1})),n.prevDist=[s,l],Ji(t,e,c,u,x)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var i=e.datas,r=e.isDouble;if(!i.isRound)return!1;var o=i.isControl,a=i.controlIndex,s=i.isLine,l=i.lineIndex,c=i.controlPoses,u=c.filter((function(t){return t.virtual})).length,h=t.props.roundClickable,d=void 0===h||h;if(r&&d){if(!o||!0!==d&&"control"!==d){if(s&&(!0===d||"line"===d)){var p=b(Q(t,e),2);!function(t,e,n,i){var r=t.filter((function(t){var e=t.virtual;return t.horizontal&&!e})).length,o=t.filter((function(t){var e=t.virtual;return t.vertical&&!e})).length,a=-1;if(0===e&&(0===r?a=0:1===r&&(a=1)),2===e&&(r<=2?a=2:r<=3&&(a=3)),3===e&&(0===o?a=4:o<4&&(a=7)),1===e&&(o<=1?a=5:o<=2&&(a=6)),-1!==a&&t[a].virtual){var s=t[a];!function(t,e){e<4?t.slice(0,e+1).forEach((function(t){t.virtual=!1})):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach((function(t){t.virtual=!1})))}(t,a),a<4?s.pos[0]=n:s.pos[1]=i}}(c,l,p[0],p[1])}}else!function(t,e){e<4?t.slice(e,4).forEach((function(t){t.virtual=!0})):t.slice(e).forEach((function(t){t.virtual=!0}))}(c,a);u!==c.filter((function(t){return t.virtual})).length&&Ji(t,e,[0,0],[0,0],c)}var f=zn(t,e,{});return Un(t,"onRoundEnd",f),n.borderRadiusState="",f},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var i=t.moveables,r=t.props.targets,o=_t(t,"roundable",e);return Un(t,"onRoundGroupStart",y({targets:t.props.targets,events:o.map((function(t,e){return y(y({},t),{target:r[e],moveable:i[e],currentTarget:i[e]})}))},n)),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var i=t.moveables,r=t.props.targets,o=_t(t,"roundable",e),a=y({targets:t.props.targets,events:o.map((function(t,e){return y(y(y({},t),{target:r[e],moveable:i[e],currentTarget:i[e]}),Nn({borderRadius:n.borderRadius},t))}))},n);return Un(t,"onRoundGroup",a),a},dragGroupControlEnd:function(t,e){var n=t.moveables,i=t.props.targets,r=_t(t,"roundable",e);jn(t,"onRound",(function(e){var o=y({targets:t.props.targets,events:r.map((function(t,r){return y(y(y({},t),{target:i[r],moveable:n[r],currentTarget:n[r]}),Nn({borderRadius:e.borderRadius},t))}))},e);Un(t,"onRoundGroup",o)}));var o=this.dragControlEnd(t,e);if(!o)return!1;var a=y({targets:t.props.targets,events:r.map((function(t,e){var r;return y(y({},t),{target:i[e],moveable:n[e],currentTarget:n[e],lastEvent:null===(r=t.datas)||void 0===r?void 0:r.lastEvent})}))},o);return Un(t,"onRoundGroupEnd",a),a},unset:function(t){t.state.borderRadiusState=""}},er={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,i=n.is3d,r=n.targetMatrix,s=n.inlineTransform,l=i?"matrix3d(".concat(r.join(","),")"):"matrix(".concat((0,a.ZB)(r,!0),")"),c=s&&"none"!==s?s:l;e.datas.startTransforms=function(t,e){var n=e?4:3,i=(0,a.k8)(n);return t==="matrix".concat(e?"3d":"","(").concat(i.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(c,i)?[]:(0,o.Z3)(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Bn(t,e,{setTransform:function(t){e.datas.startTransforms=(0,o.cy)(t)?t:(0,o.Z3)(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Bn(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Un(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Un(t,"onBeforeRender",Bn(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Un(t,"onBeforeRenderEnd",Bn(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var i=_t(t,"beforeRenderable",e),r=t.moveables,o=i.map((function(t,e){var i=r[e];return n.setTransform(i,t),n.resetStyle(t),n.fillDragStartParams(i,t)}));Un(t,"onBeforeRenderGroupStart",Bn(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var i=_t(t,"beforeRenderable",e),r=t.moveables,o=i.map((function(t,e){var i=r[e];return n.resetStyle(t),n.fillDragParams(i,t)}));Un(t,"onBeforeRenderGroup",Bn(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Un(t,"onBeforeRenderGroupEnd",Bn(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},nr={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Un(t,"onRenderStart",Bn(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Un(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Un(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Un(t,"onRenderGroupStart",Bn(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,i=_t(t,"beforeRenderable",e),r=t.moveables,o=i.map((function(t,e){var i=r[e];return n.fillDragParams(i,t)}));Un(t,"onRenderGroup",Bn(t,e,y(y({isPinch:!!e.isPinch,targets:t.props.targets,transform:mt(e),transformObject:{}},Nn(vt(e))),{events:o})))},dragGroupEnd:function(t,e){var n=this,i=_t(t,"beforeRenderable",e),r=t.moveables,o=i.map((function(t,e){var i=r[e];return n.fillDragEndParams(i,t)}));Un(t,"onRenderGroupEnd",Bn(t,e,y({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transformObject:{},transform:mt(e)},Nn(vt(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return(0,s.qg)(gt(e)||[]).forEach((function(t){n[t.name]=t.functionValue})),Bn(t,e,y({isPinch:!!e.isPinch,transformObject:n,transform:mt(e)},Nn(vt(e))))},fillDragEndParams:function(t,e){var n={};return(0,s.qg)(gt(e)||[]).forEach((function(t){n[t.name]=t.functionValue})),Bn(t,e,y({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:mt(e)},Nn(vt(e))))}};function ir(t,e,n,i,r,o,a){o.clientDistX=o.distX,o.clientDistY=o.distY;var s="Start"===r,l="End"===r,c="After"===r,u=t.state.target,h=o.isRequest,d=i.indexOf("Control")>-1;if(!u||s&&d&&!h&&t.areaElement===o.inputEvent.target)return!1;var p=w([],b(e),!1);if(h){var f=o.requestAble;p.some((function(t){return t.name===f}))||p.push.apply(p,w([],b(t.props.ables.filter((function(t){return t.name===f}))),!1))}if(!p.length||p.every((function(t){return t.dragRelation})))return!1;var g,m=o.inputEvent;l&&m&&(g=document.elementFromPoint(o.clientX,o.clientY)||m.target);var v=!1,S=function(){var t;v=!0,null===(t=o.stop)||void 0===t||t.call(o)},x=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());x&&t.updateRect(r,!0,!1);var k=o.datas,C=d?"controlGesto":"targetGesto",M=t[C],T=function(e,n,i){if(!(n in e)||M!==t[C])return!1;var r=e.name,a=k[r]||(k[r]={});if(s&&(a.isEventStart=!i||!e[i]||e[i](t,o)),!a.isEventStart)return!1;var l=e[n](t,y(y({},o),{stop:S,datas:a,originalDatas:k,inputTarget:g}));return t._emitter.off(),s&&!1===l&&(a.isEventStart=!1),l};x&&p.forEach((function(e){e.unset&&e.unset(t)})),T(er,"drag".concat(i).concat(r));var E=0,A=0;n.forEach((function(e){if(v)return!1;var n="".concat(e).concat(i).concat(r),a="".concat(e).concat(i,"Condition");""!==r||h||Xn(t.state,o);var l=p.filter((function(t){return t[n]})),c=(l=l.filter((function(t,e){return t.name&&l.indexOf(t)===e}))).filter((function(t){return T(t,n,a)})).length;v&&++E,c&&++A,!v&&s&&l.length&&!c&&(E+=l.filter((function(t){var e=t.name;return!!k[e].isEventStart&&"strong"!==t.dragRelation})).length?1:0)})),c&&!A||T(nr,"drag".concat(i).concat(r));var _=M!==t[C]||E===n.length;return(l||v||_)&&(t.state.gestos={},t.moveables&&t.moveables.forEach((function(t){t.state.gestos={}})),p.forEach((function(e){e.unset&&e.unset(t)}))),s&&!_&&!h&&A&&t.props.preventDefault&&(null==o||o.preventDefault()),!t.isUnmounted&&!_&&((!s&&A&&!a||l)&&(t.props.flushSync||rn)((function(){t.updateRect(l?r:"",!0,!1),t.forceUpdate()})),s||l||c||!A||a||ir(t,e,n,i,r+"After",o),!0)}function rr(t,e){return function(n,i){var r;void 0===i&&(i=n.inputEvent.target);var a=i,s=t.areaElement,l=t._dragTarget;return!(!l||!e&&(null===(r=t.controlGesto)||void 0===r?void 0:r.isFlag()))&&(a===l||l.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||(0,o.nB)(a,"moveable-area")||(0,o.nB)(a,"moveable-padding")||(0,o.nB)(a,"moveable-edgeDraggable"))}}function or(t,e,n){var i=t.controlBox,r=[],o=t.props,a=o.dragArea,s=t.state.target,l=o.dragTarget;r.push(i),a&&!l||r.push(e),!a&&l&&s&&e!==s&&o.dragTargetSelf&&r.push(s);var c=rr(t);return sr(t,r,"targetAbles",n,{dragStart:c,pinchStart:c})}function ar(t,e){var n=t.controlBox,i=[];i.push(n);var r=rr(t,!0),o=function(t,e){return void 0===e&&(e=t.inputEvent.target),e===n||!r(t,e)};return sr(t,i,"controlAbles",e,{dragStart:o,pinchStart:o})}function sr(t,e,n,i,r){void 0===r&&(r={});var a="targetAbles"===n,s=t.props,l=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,h=s.preventClickDefault,p=s.checkInput,f=s.dragFocusedInput,g=s.preventDefault,m=void 0===g||g,v=s.preventRightClick,y=void 0===v||v,S=s.preventWheelClick,x={preventDefault:m,preventRightClick:y,preventWheelClick:void 0===S||S,container:ii(s.dragContainer,!0)||(0,o.zk)(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:l,preventClickEventOnDrag:!!a&&u,preventClickEventOnDragStart:!!a&&h,preventClickEventByCondition:a?null:function(e){return t.controlBox.contains(e.target)},checkInput:!!a&&p,dragFocusedInput:f},k=new d.A(e,x),C="Control"===i;return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(o){k.on("".concat(e).concat(o),(function(a){var s,l=a.eventType,c="drag"===e&&a.isPinch;if(!r[l]||r[l](a)){if(!c){var u="drag"===e?[e]:["drag",e],h=w([],b(t[n]),!1);ir(t,h,u,i,o,a)?(t.props.stopPropagation||"Start"===o&&C)&&(null===(s=null==a?void 0:a.inputEvent)||void 0===s||s.stopPropagation()):a.stop()}}else a.stop()}))}))})),k}var lr=function(){function t(t,e,n){var i=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(t){var e=i.eventName,n=i.moveable;n.state.disableNativeEvent||i.ables.forEach((function(i){i[e](n,{inputEvent:t})}))},t.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(t){this.ables=t},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function cr(t,e,n,i){void 0===n&&(n=e);var r=0,s=0,l=0,c={},u=Tn(t);if(t&&(r=u.offsetWidth,s=u.offsetHeight),t){var h=function(t,e,n,i){var r;void 0===n&&(n=e);var s=kt(t,e),l=s.matrixes,c=s.is3d,u=s.targetMatrix,h=s.transformOrigin,d=s.targetOrigin,p=s.offsetContainer,f=s.hasFixed,g=s.zoom,m=function(t,e){if(Tt){var n=(0,o.I6)(Tt,(function(n){return n[0][0]==t&&n[0][1]==e}));if(n)return n[1]}var i=kt(t,e,!0);return Tt&&Tt.push([[t,e],i]),i}(p,n),v=m.matrixes,S=m.is3d,x=m.offsetContainer,k=m.zoom,C=i||S||c,M=C?4:3,T="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,E=u,A=(0,a.k8)(M),_=(0,a.k8)(M),P=(0,a.k8)(M),D=(0,a.k8)(M),O=l.length,L=v.map((function(t){return y(y({},t),{matrix:t.matrix?w([],b(t.matrix),!1):void 0})})).reverse();l.reverse(),!c&&C&&(E=(0,a._C)(E,3,4),dn(l)),!S&&C&&dn(L),L.forEach((function(t){_=(0,a.lw)(_,t.matrix,M)}));var I=n||(0,o.uD)(t),R=(null===(r=L[0])||void 0===r?void 0:r.target)||cn(I,I,!0).offsetParent,V=L.slice(1).reduce((function(t,e){return(0,a.lw)(t,e.matrix,M)}),(0,a.k8)(M));l.forEach((function(t,e){if(O-2===e&&(P=A.slice()),O-1===e&&(D=A.slice()),!t.matrix){var n=function(t,e,n,i,r){var s,l=t.target,c=t.origin,u=e.matrix,h=Tn(l),d=h.offsetWidth,p=h.offsetHeight,f=n.getBoundingClientRect(),g=[0,0];n===(0,o.uD)(n)&&(g=hn(l,!0));for(var m=l.getBoundingClientRect(),v=m.left-f.left+n.scrollLeft-(n.clientLeft||0)+g[0],y=m.top-f.top+n.scrollTop-(n.clientTop||0)+g[1],w=m.width,S=m.height,x=(0,a.B4)(i,r,u),k=wn(x,d,p,i),C=k.left,M=k.top,T=k.width,E=k.height,A=vn(x,c,i),_=(0,a.Rd)(A,[C,M]),P=[v+_[0]*w/T,y+_[1]*S/E],D=[0,0],O=0;++O<10;){var L=(0,a.B8)(r,i);s=b((0,a.Rd)(vn(L,P,i),vn(L,A,i)),2),D[0]=s[0],D[1]=s[1];var I=wn((0,a.B4)(i,r,(0,a.GD)(D,i),u),d,p,i),R=I.left-v,V=I.top-y;if(pi(R)<2&&pi(V)<2)break;P[0]-=R,P[1]-=V}return D.map((function(t){return Math.round(t)}))}(t,l[e+1],R,M,(0,a.lw)(V,A,M));t.matrix=(0,a.GD)(n,M)}A=(0,a.lw)(A,t.matrix,M)}));var N=!T&&c;E||(E=(0,a.k8)(N?4:3));var F=fn(T&&16===E.length?(0,a._C)(E,4,3):E,N),B=_;return _=(0,a.bn)(_,M,M),{hasZoom:1!==g||1!==k,hasFixed:f,matrixes:l,rootMatrix:_,originalRootMatrix:B,beforeMatrix:P,offsetMatrix:D,allMatrix:A,targetMatrix:E,targetTransform:F,inlineTransform:t.style.transform,transformOrigin:h,targetOrigin:d,is3d:C,offsetContainer:p,offsetRootContainer:x}}(t,e,n,i),d=J(h.allMatrix,h.transformOrigin,r,s);c=y(y({},h),d);var p=J(h.allMatrix,[50,50],100,100);l=En([p.pos1,p.pos2],p.direction)}var f=i?4:3;return y(y(y({hasZoom:!1,width:r,height:s,rotation:l},u),{originalRootMatrix:(0,a.k8)(f),rootMatrix:(0,a.k8)(f),beforeMatrix:(0,a.k8)(f),offsetMatrix:(0,a.k8)(f),allMatrix:(0,a.k8)(f),targetMatrix:(0,a.k8)(f),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!i,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function ur(t,e,n,i,r,o){void 0===o&&(o=[]);var s=1,l=[0,0],c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},h={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},d={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},p=[0,0],f={},g=cr(e,n,r,!0);if(e){var m=At(e);o.forEach((function(t){f[t]=m(t)}));var v=g.is3d?4:3,b=J(g.offsetMatrix,(0,a.tY)(g.transformOrigin,(0,a.$z)(g.targetMatrix,v)),g.width,g.height);s=b.direction,l=(0,a.tY)(b.origin,[b.left-g.left,b.top-g.top]),d=Pn(g.offsetRootContainer);var w=cn(i,i,!0).offsetParent||g.offsetRootContainer;if(g.hasZoom){var S=J((0,a.lw)(g.originalRootMatrix,g.allMatrix),g.transformOrigin,g.width,g.height),x=J(g.originalRootMatrix,sn(At(w)("transformOrigin")).map((function(t){return parseFloat(t)})),w.offsetWidth,w.offsetHeight);if(c=_n(S,d),h=_n(x,d,w,!0),t){var k=S.left,C=S.top;u=_n({left:k,top:C,bottom:C,right:C},d)}}else{c=Pn(e),h=function(t){var e=null==Mt?void 0:Mt.get(t);if(e)return e;var n=Pn(t,!0);return Mt&&Mt.set(t,n),n}(w),t&&(u=Pn(t));var M=h.left,T=h.top,E=h.clientLeft,A=h.clientTop,_=[c.left-M,c.top-T];p=(0,a.Rd)(Kn(g.rootMatrix,_,4),[E+g.left,A+g.top])}}return y({targetClientRect:c,containerClientRect:h,moveableClientRect:u,rootContainerClientRect:d,beforeDirection:s,beforeOrigin:l,originalBeforeOrigin:l,target:e,style:f,offsetDelta:p},g)}function hr(t){var e=t.pos1,n=t.pos2,i=t.pos3,r=t.pos4;if(!(e&&n&&i&&r))return null;var o=(0,u.Qk)([e,n,i,r]),s=[o.minX,o.minY],l=(0,a.Rd)(t.origin,s);return e=(0,a.Rd)(e,s),n=(0,a.Rd)(n,s),i=(0,a.Rd)(i,s),r=(0,a.Rd)(r,s),y(y({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:i,pos4:r,origin:l,beforeOrigin:l,isPersisted:!0})}var dr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=y({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},ur(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new f.A,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():((0,o.uU)(e._observerId),e._observerId=(0,o.xi)((function(){e.isDragging()||e.updateRect()})))}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}return v(e,t),e.prototype.render=function(){var t=this.props,e=this.getState(),n=t.parentPosition,i=t.className,o=t.target,a=t.zoom,s=t.cspNonce,l=t.translateZ,c=t.cssStyled,u=t.groupable,d=t.linePadding,p=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var f=b(n||[0,0],2),g=f[0],m=f[1],v=e.left,w=e.top,S=e.target,x=e.direction,k=e.hasFixed,C=e.offsetDelta,M=t.targets,T=this.isDragging(),E={};this.getEnabledAbles().forEach((function(t){E["data-able-".concat(t.name.toLowerCase())]=!0}));var A=this._getAbleClassName(),_=M&&M.length&&(S||u)||o||!this._hasFirstTarget&&this.state.isPersisted,P=this.controlBox||this.props.firstRenderState||this.props.persistData,D=[v-g,w-m];!u&&t.useAccuratePosition&&(D[0]+=C[0],D[1]+=C[1]);var O={position:k?"fixed":"absolute",display:_?"block":"none",visibility:P?"visible":"hidden",transform:"translate3d(".concat(D[0],"px, ").concat(D[1],"px, ").concat(l,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return d&&(O["--moveable-line-padding"]=d),p&&(O["--moveable-control-padding"]=p),h.n(c,y({cspNonce:s,ref:(0,r.KR)(this,"controlBox"),className:"".concat(nn("control-box",-1===x?"reverse":"",T?"dragging":"")," ").concat(A," ").concat(i)},E,{onClick:this._onPreventClick,style:O}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,e=t.parentMoveable,n=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),n||e||this.state.isPersisted||(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){var t,e;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),null===(t=this._reiszeObserver)||void 0===t||t.disconnect(),null===(e=this._mutationObserver)||void 0===e||e.disconnect(),this._viewContainer&&this._changeAbleViewClassNames([]),Vn(this,!1),Vn(this,!0);var n=this.events;for(var i in n){var r=n[i];r&&r.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){var e=this.props.ables||[];return(0,o.I6)(e,(function(e){return e.name===t}))},e.prototype.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(N)>-1},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var n=this.targetGesto,i=this.controlGesto;return n&&rr(this)({inputEvent:t},e)?n.isFlag()||n.triggerDragStart(t):i&&this.isMoveableElement(e)&&(i.isFlag()||i.triggerDragStart(t)),this},e.prototype.hitTest=function(t){var e,n=this.state,i=n.target,r=n.pos1,a=n.pos2,s=n.pos3,l=n.pos4,c=n.targetClientRect;if(!i)return 0;if((0,o.Ll)(t)){var h=t.getBoundingClientRect();e={left:h.left,top:h.top,width:h.width,height:h.height}}else e=y({width:0,height:0},t);var d=e.left,p=e.top,f=e.width,g=e.height,m=(0,u.FV)([r,a,l,s],c),v=(0,u.tT)(m,[[d,p],[d+f,p],[d+f,p+g],[d,p+g]]),b=(0,u.B9)(m);return v&&b?Math.min(100,v/b*100):0},e.prototype.isInside=function(t,e){var n=this.state,i=n.target,r=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,l=n.targetClientRect;return!!i&&(0,u.FK)([t,e],(0,u.FV)([r,o,s,a],l))},e.prototype.updateRect=function(t,e,n){void 0===n&&(n=!0);var i=this.props,r=!i.parentPosition&&!i.wrapperMoveable;r&&Et(!0);var o=i.parentMoveable,a=this.state.target||i.target,s=this.getContainer(),l=o?o._rootContainer:this._rootContainer,c=ur(this.controlBox,a,s,s,l||s,this._getRequestStyles());if(!a&&this._hasFirstTarget&&i.persistData){var u=hr(i.persistData);for(var h in u)c[h]=u[h]}r&&Et(),this.updateState(c,!o&&n)},e.prototype.isDragging=function(t){var e,n,i=this.targetGesto,r=this.controlGesto;return(null==i?void 0:i.isFlag())?!t||!!(null===(e=i.getEventData()[t])||void 0===e?void 0:e.isEventStart):!(!(null==r?void 0:r.isFlag())||t&&!(null===(n=r.getEventData()[t])||void 0===n?void 0:n.isEventStart))},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,e=In(this.state),n=b(e,4),i=n[0],r=n[1],o=n[2],s=n[3],l=bn(e),c=t.width,u=t.height,h=l.width,d=l.height,p=l.left,f=l.top,g=[t.left,t.top],m=(0,a.tY)(g,t.origin);return{width:h,height:d,left:p,top:f,pos1:i,pos2:r,pos3:o,pos4:s,offsetWidth:c,offsetHeight:u,beforeOrigin:(0,a.tY)(g,t.beforeOrigin),origin:m,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){var e;t&&"target"!==t||(!1===(null==(e=this.targetGesto)?void 0:e.isIdle())&&Rn(this,!1),null==e||e.stop()),t&&"control"!==t||(!1===(null==(e=this.controlGesto)?void 0:e.isIdle())&&Rn(this,!0),null==e||e.stop())},e.prototype.getRotation=function(){var t,e,n,i,r=this.state;return t=r.pos1,e=r.pos2,n=r.direction,i=(0,o.Mu)(t,e)/Math.PI*180,(i=n>=0?i:180-i)>=0?i:360+i},e.prototype.request=function(t,e,n){void 0===e&&(e={});var i=this,r=i.props,a=r.parentMoveable||r.wrapperMoveable||i,s=a.props.ables,l=r.groupable,c=(0,o.I6)(s,(function(e){return e.name===t}));if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var u=c.request(i),h=n||e.isInstant,d=u.isControl?"controlAbles":"targetAbles",p="".concat(l?"Group":"").concat(u.isControl?"Control":""),f=w([],b(a[d]),!1),g={request:function(e){return ir(i,f,["drag"],p,"",y(y({},u.request(e)),{requestAble:t,isRequest:!0}),h),g},requestEnd:function(){return ir(i,f,["drag"],p,"End",y(y({},u.requestEnd()),{requestAble:t,isRequest:!0}),h),g}};return ir(i,f,["drag"],p,"Start",y(y({},u.requestStart(e)),{requestAble:t,isRequest:!0}),h),h?g.request(e).requestEnd():g},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),e=this.props,n=e.padding,i=t.originalBeforeOrigin,r=t.transformOrigin,o=t.allMatrix,s=t.is3d,l=t.pos1,c=t.pos2,u=t.pos3,h=t.pos4,d=t.left,p=t.top,f=t.isPersisted,g=e.zoom||1;if(!n&&g<=1)return t.renderPoses=[l,c,u,h],void(t.renderLines=[[l,c],[c,h],[h,u],[u,l]]);var m=gi(n||{}),v=m.left,y=m.top,b=m.bottom,w=m.right,S=s?4:3,x=[];x=f?r:this.controlBox&&e.groupable?i:(0,a.tY)(i,[d,p]);var k=(0,a.B4)(S,(0,a.GD)(x.map((function(t){return-t})),S),o,(0,a.GD)(r,S)),C=Jn(k,l,[-v,-y],S),M=Jn(k,c,[w,-y],S),T=Jn(k,u,[-v,b],S),E=Jn(k,h,[w,b],S);if(t.renderPoses=[C,M,T,E],t.renderLines=[[C,M],[M,E],[E,T],[T,C]],g){var A=g/2;t.renderLines=[[Jn(k,l,[-v-A,-y],S),Jn(k,c,[w+A,-y],S)],[Jn(k,c,[w,-y-A],S),Jn(k,h,[w,b+A],S)],[Jn(k,h,[w+A,b],S),Jn(k,u,[-v-A,b],S)],[Jn(k,u,[-v,b+A],S),Jn(k,l,[-v,-y-A],S)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,n=t.container,i=t.parentMoveable,r=this.state,o=r.target,a=r.container;if(o||e){this.updateAbles();var s=!Hn(o,e);if(s||!Hn(a,n)){var l=n||this.controlBox;l&&this.unsetAbles(),this.updateState({target:e,container:n}),!i&&l&&this.updateRect("End",!1,!1),this._isPropTargetChanged=s}}},e.prototype.waitToChangeTarget=function(){return new Promise((function(){}))},e.prototype.triggerEvent=function(t,e){var n=this.props;if(this._emitter.trigger(t,e),n.parentMoveable&&e.isRequest&&!e.isRequestChild)return n.parentMoveable.triggerEvent(t,e,!0);var i=n[t];return i&&i(e)},e.prototype.useCSS=function(t,e){var n=this.props.customStyledMap,i=t+e;return n[i]||(n[i]=(0,p.I4)(t,e)),n[i]},e.prototype.getState=function(){var t,e=this.props;(e.target||(null===(t=e.targets)||void 0===t?void 0:t.length))&&(this._hasFirstTarget=!0);var n=this.controlBox,i=e.persistData,r=e.firstRenderState;if(r&&!n)return r;if(!this._hasFirstTarget&&i){var o=hr(i);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(e){e.unset&&e.unset(t)}))},e.prototype.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props.triggerAblesSimultaneously,i=this.getEnabledAbles(t),r="drag".concat(e,"Start"),o="pinch".concat(e,"Start"),a="drag".concat(e,"ControlStart"),s=$n(i,[r,o],n),l=$n(i,[a],n);this.enabledAbles=i,this.targetAbles=s,this.controlAbles=l},e.prototype.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var n=this.state;for(var i in t)n[i]=t[i]}},e.prototype.getEnabledAbles=function(t){void 0===t&&(t=this.props.ables);var e=this.props;return t.filter((function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])}))},e.prototype.renderAbles=function(){var t,e,n,i,r=this,o=this.props.triggerAblesSimultaneously,a={createElement:h.n};return this.renderState={},(t=Zn($n(this.getEnabledAbles(),["render"],o).map((function(t){return(0,t.render)(r,a)||[]}))).filter((function(t){return t})),e=function(t){return t.key},n=[],i={},t.forEach((function(t,r){var o=e(t),a=i[o];a||(a=[],i[o]=a,n.push(a)),a.push(t)})),n).map((function(t){return t[0]}))},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){return this.getEnabledAbles().reduce((function(t,e){var n,i,r=null!==(i=null===(n=e.requestStyle)||void 0===n?void 0:n.call(e))&&void 0!==i?i:[];return w(w([],b(t),!1),b(r),!1)}),w([],b(this.props.requestStyles||[]),!1))},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.targetAbles.length,e=this.controlAbles.length,n=this._dragTarget;(!t&&this.targetGesto||this._isTargetChanged(!0))&&(Vn(this,!1),this.updateState({gestos:{}})),e||Vn(this,!0),n&&t&&!this.targetGesto&&(this.targetGesto=or(this,n,"")),!this.controlGesto&&e&&(this.controlGesto=ar(this,"Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=ii(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,e=t.zoom,n=t.hideDefaultLines,i=t.hideChildMoveableDefaultLines,r=t.parentMoveable;if(n||r&&i)return[];var o=this.getState(),a={createElement:h.n};return o.renderLines.map((function(t,n){return Rt(a,"",t[0],t[1],e,"render-line-".concat(n))}))},e.prototype._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,i=this._prevOriginalDragTarget,r=this._prevDragArea,o=e.dragArea;return!o&&i!==n||(t||o)&&r!==o||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,n=this.events,i=(0,o.xD)(n);if(this._isTargetChanged())for(var r in n){var a=n[r];a&&a.destroy(),n[r]=null}if(e){var s=this.enabledAbles;i.forEach((function(i){var r=$n(s,[i]),o=r.length>0,a=n[i];o?(a||(a=new lr(e,t,i),n[i]=a),a.setAbles(r)):a&&(a.destroy(),n[i]=null)}))}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=ii(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=ii(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(w(w([],b(this._getAbleViewClassNames()),!1),[this.isDragging()?Mi:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var e=this._viewContainer,n=Wn(t.filter(Boolean),(function(t){return t})).map((function(t){return b(t,1)[0]})),i=this._viewClassNames,r=(0,g.U)(i,n),a=r.removed,s=r.added;a.forEach((function(t){(0,o.vy)(e,i[t])})),s.forEach((function(t){(0,o.iQ)(e,n[t])})),this._viewClassNames=n},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map((function(e){var n;return(null===(n=e.viewClassName)||void 0===n?void 0:n.call(e,t))||""})).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var e=this;void 0===t&&(t="");var n=this.getEnabledAbles(),i=this.targetGesto,r=this.controlGesto,o=(null==i?void 0:i.isFlag())?i.getEventData():{},a=(null==r?void 0:r.isFlag())?r.getEventData():{};return n.map((function(n){var i,r,s,l=n.name,c=(null===(i=n.className)||void 0===i?void 0:i.call(n,e))||"";return((null===(r=o[l])||void 0===r?void 0:r.isEventStart)||(null===(s=a[l])||void 0===s?void 0:s.isEventStart))&&(c+=" ".concat(nn("".concat(l).concat(t,"-dragging")))),c.trim()})).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var e,n=this.props,i=n.target,r=(0,o.zk)(this.getControlBoxElement());if(r.ResizeObserver&&i&&n.useResizeObserver){if(t.target!==i||!this._reiszeObserver){var a=new r.ResizeObserver(this.checkUpdateRect);a.observe(i,{box:"border-box"}),this._reiszeObserver=a}}else null===(e=this._reiszeObserver)||void 0===e||e.disconnect()},e.prototype._updateMutationObserver=function(t){var e,n=this,i=this.props,r=i.target,a=(0,o.zk)(this.getControlBoxElement());if(a.MutationObserver&&r&&i.useMutationObserver){if(t.target!==r||!this._mutationObserver){var s=new a.MutationObserver((function(t){var e,i;try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),o=r.next();!o.done;o=r.next()){var a=o.value;"attributes"===a.type&&"style"===a.attributeName&&n.checkUpdateRect()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}}));s.observe(r,{attributes:!0}),this._mutationObserver=s}}else null===(e=this._mutationObserver)||void 0===e||e.disconnect()},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:rn,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(h.o6),pr={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,i=t.props,o=i.targets||[],s=t.getState(),l=s.left,c=s.top,u=s.isPersisted,h=i.zoom||1,d=t.renderGroupRects,p=(null===(n=i.persistData)||void 0===n?void 0:n.children)||[];u?o=p.map((function(){return null})):p=[];var f=hi(t,"parentPosition",[l,c],(function(t){return t.join(",")})),g=hi(t,"requestStyles",t.getRequestChildStyles(),(function(t){return t.join(",")}));return t.moveables=t.moveables.slice(0,o.length),w(w([],b(o.map((function(n,o){return e.createElement(dr,{key:"moveable"+o,ref:(0,r.DY)(t,"moveables",o),target:n,origin:!1,requestStyles:g,cssStyled:i.cssStyled,customStyledMap:i.customStyledMap,useResizeObserver:i.useResizeObserver,useMutationObserver:i.useMutationObserver,hideChildMoveableDefaultLines:i.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[l,c],persistData:p[o],zoom:h})}))),!1),b(Zn(d.map((function(t,n){var i=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map((function(t,r){var o=b(t,2),s=o[0],l=o[1];return Rt(e,"",(0,a.Rd)(i[s],f),(0,a.Rd)(i[l],f),h,"group-rect-".concat(n,"-").concat(r))}))})))),!1)}},fr=S("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,i=e.inputEvent,r=e.inputTarget,o=!t.isMoveableElement(r)&&t.controlBox.contains(r);if(i&&r&&!e.isDrag&&!t.isMoveableElement(r)&&!o){var a=n.contains(r);Un(t,"onClick",Bn(t,e,{isDouble:e.isDouble,inputTarget:r,isTarget:n===r,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,i=e.inputTarget;if(n&&i&&!e.isDrag&&!t.isMoveableElement(i)&&e.datas.inputTarget!==i){var r=t.props.targets,a=r.indexOf(i),s=a>-1,l=!1;-1===a&&(l=(a=(0,o.SL)(r,(function(t){return t.contains(i)})))>-1),Un(t,"onClickGroup",Bn(t,e,{isDouble:e.isDouble,targets:r,inputTarget:i,targetIndex:a,isTarget:s,containsTarget:l,moveableTarget:r[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function gr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),y(y({},t),{datas:e})}var mr=S("edgeDraggable",{css:[".edge.edgeDraggable.line {\ncursor: move;\n}"],render:function(t,e){var n=t.props,i=n.edgeDraggable;return i?Vt(e,"edgeDraggable",i,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,i=t.props,r=null===(n=e.inputEvent)||void 0===n?void 0:n.target;return!(!i.edgeDraggable||!r)&&!i.draggable&&(0,o.nB)(r,nn("direction"))&&(0,o.nB)(r,nn("edge"))&&(0,o.nB)(r,nn("edgeDraggable"))},dragStart:function(t,e){return Ce.dragStart(t,gr(e))},drag:function(t,e){return Ce.drag(t,gr(e))},dragEnd:function(t,e){return Ce.dragEnd(t,gr(e))},dragGroupCondition:function(t,e){var n,i=t.props,r=null===(n=e.inputEvent)||void 0===n?void 0:n.target;return!(!i.edgeDraggable||!r)&&!i.draggable&&(0,o.nB)(r,nn("direction"))&&(0,o.nB)(r,nn("line"))},dragGroupStart:function(t,e){return Ce.dragGroupStart(t,gr(e))},dragGroup:function(t,e){return Ce.dragGroup(t,gr(e))},dragGroupEnd:function(t,e){return Ce.dragGroupEnd(t,gr(e))},unset:function(t){return Ce.unset(t)}}),vr={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},yr=[er,Oi,en,mi,Ce,mr,Ae,yi,Si,Re,Di,Li,_i,Ki,Yi,tr,pr,vr,fr,Ai,nr],br=yr.reduce((function(t,e){return(e.events||[]).forEach((function(e){(0,o.BP)(t,e)})),t}),[]),wr=yr.reduce((function(t,e){return(e.props||[]).forEach((function(e){(0,o.BP)(t,e)})),t}),[]);function Sr(t,e){var n=b(t,3),i=n[0],r=n[1],o=n[2];return(i*e[0]+r*e[1]+o)/Math.sqrt(i*i+r*r)}function xr(t,e){var n=b(t,2),i=n[0],r=n[1];return-i*e[0]-r*e[1]}function kr(t,e){return Math.max.apply(Math,w([],b(t.map((function(t){var n=b(t,4),i=n[0],r=n[1],o=n[2],a=n[3];return Math.max(i[e],r[e],o[e],a[e])}))),!1))}function Cr(t,e){return Math.min.apply(Math,w([],b(t.map((function(t){var n=b(t,4),i=n[0],r=n[1],o=n[2],a=n[3];return Math.min(i[e],r[e],o[e],a[e])}))),!1))}function Mr(t,e){var n=e.map((function(e){if((0,o.cy)(e)){var n=Mr(t,e),i=n.length;return i>1?n:1===i?n[0]:null}var r=(0,o.I6)(t,(function(t){return t.manager.props.target===e}));return r?(r.finded=!0,r.manager):null})).filter(Boolean);return 1===n.length&&(0,o.cy)(n[0])?n[0]:n}var Tr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new l.A,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return v(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,n){var i;void 0===n&&(n=!0);var r=this.state;if(this.controlBox&&!r.isPersisted){Et(!0),this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var s=this.props,l=this.moveables,c=r.target||s.target,h=l.map((function(t){return{finded:!1,manager:t}})),d=this.props.targetGroups||[],p=Mr(h,d),f=s.useDefaultGroupRotate;p.push.apply(p,w([],b(h.filter((function(t){return!t.finded})).map((function(t){return t.manager}))),!1));var g=[],m=!e||""!==t&&s.updateGroup,v=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=null===(i=s.persistData)||void 0===i?void 0:i.rotation;null!=S&&(v=S)}var x=function t(e,n,i){var r,a=e.map((function(e){if((0,o.cy)(e)){var i=t(e,n),r=[i.pos1,i.pos2,i.pos3,i.pos4];return g.push(i),{poses:r,rotation:i.rotation}}return{poses:In(e.state),rotation:e.getRotation()}})),s=a.map((function(t){return t.rotation})),l=s[0],c=s.every((function(t){return Math.abs(l-t)<.1}));r=m?!f&&c?l:v:f||i||!c?n:l;var h=a.map((function(t){return t.poses})),d=function(t,e){var n,i,r,a=[0,0],s=[0,0],l=[0,0],c=[0,0],h=0,d=0;if(!t.length)return{pos1:a,pos2:s,pos3:l,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:h,height:d,rotation:e};var p=(0,o.nF)(e,U);if(p%90){var f=p/180*Math.PI,g=Math.tan(f),m=-1/g,v=[$,H],y=[[0,0],[0,0]],w=[$,H],S=[[0,0],[0,0]];t.forEach((function(t){t.forEach((function(t){var e=Sr([-g,1,0],t),n=Sr([-m,1,0],t);v[0]>e&&(y[0]=t,v[0]=e),v[1]<e&&(y[1]=t,v[1]=e),w[0]>n&&(S[0]=t,w[0]=n),w[1]<n&&(S[1]=t,w[1]=n)}))}));var x=b(y,2),k=x[0],C=x[1],M=b(S,2),T=M[0],E=M[1],A=[-g,1,xr([-g,1],k)],_=[-g,1,xr([-g,1],C)],P=[-m,1,xr([-m,1],T)],D=[-m,1,xr([-m,1],E)];n=b([[A,P],[A,D],[_,P],[_,D]].map((function(t){var e=b(t,2),n=e[0],i=e[1];return(0,u.VM)(n,i)[0]})),4),a=n[0],s=n[1],l=n[2],c=n[3],h=w[1]-w[0],d=v[1]-v[0]}else{var O=Cr(t,0),L=Cr(t,1),I=kr(t,0),R=kr(t,1);a=[O,L],s=[I,L],l=[O,R],c=[I,R],h=I-O,d=R-L,p%180&&(a=(i=b([l,a,c,s],4))[0],s=i[1],l=i[2],c=i[3],h=R-L,d=I-O)}p%360>180&&(a=(r=b([c,l,s,a],4))[0],s=r[1],l=r[2],c=r[3]);var V=(0,u.Qk)([a,s,l,c]);return{pos1:a,pos2:s,pos3:l,pos4:c,width:h,height:d,minX:V.minX,minY:V.minY,maxX:V.maxX,maxY:V.maxY,rotation:e}}(h,r);return d}(p,this.rotation,!0);m&&(this.rotation=x.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=g;var k,C,M,T,E,A=this.transformOrigin,_=this.rotation,P=this.scale,D=x.width,O=x.height,L=x.minX,I=x.minY,R=(k=[[0,0],[D,0],[0,O],[D,O]],C=ci(A,D,O),M=this.rotation/180*Math.PI,T=k.map((function(t){return(0,a.Rd)(t,C)})),E=T.map((function(t){return(0,a.e$)(t,M)})),{prev:T,next:E,result:E.map((function(t){return(0,a.tY)(t,C)}))}),V=(0,u.Qk)(R.result),N=V.minX,F=V.minY,B=" rotate(".concat(_,"deg)")+" scale(".concat(di(P[0]),", ").concat(di(P[1]),")"),z="translate(".concat(-N,"px, ").concat(-F,"px)").concat(B);this.controlBox.style.transform="translate3d(".concat(L,"px, ").concat(I,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(A,";")+"width:".concat(D,"px;height:").concat(O,"px;")+"transform: ".concat(z),r.width=D,r.height=O;var j=this.getContainer(),G=ur(this.controlBox,c,this.controlBox,this.getContainer(),this._rootContainer||j,[]),q=[G.left,G.top],W=b(In(G),4),Z=W[0],Y=W[1],K=W[2],X=W[3],J=(0,u.Qk)([Z,Y,K,X]),Q=[J.minX,J.minY],tt=di(P[0]*P[1]);G.pos1=(0,a.Rd)(Z,Q),G.pos2=(0,a.Rd)(Y,Q),G.pos3=(0,a.Rd)(K,Q),G.pos4=(0,a.Rd)(X,Q),G.left=L-G.left+Q[0],G.top=I-G.top+Q[1],G.origin=(0,a.Rd)((0,a.tY)(q,G.origin),Q),G.beforeOrigin=(0,a.Rd)((0,a.tY)(q,G.beforeOrigin),Q),G.originalBeforeOrigin=(0,a.tY)(q,G.originalBeforeOrigin),G.transformOrigin=(0,a.Rd)((0,a.tY)(q,G.transformOrigin),Q),c.style.transform="translate(".concat(-N-Q[0],"px, ").concat(-F-Q[1],"px)")+B,Et(),this.updateState(y(y({},G),{posDelta:Q,direction:tt,beforeDirection:tt}),n)}},e.prototype.getRect=function(){return y(y({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},e.prototype.triggerEvent=function(e,n,i){if(i||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},e.prototype.getRequestChildStyles=function(){return this.getEnabledAbles().reduce((function(t,e){var n,i,r=null!==(i=null===(n=e.requestChildStyle)||void 0===n?void 0:n.call(e))&&void 0!==i?i:[];return w(w([],b(t),!1),b(r),!1)}),[])},e.prototype.getMoveables=function(){return w([],b(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,w(w([],b(this.props.ables),!1),[pr],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=ii(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,e=this.props,n=this._prevDragTarget,i=e.dragTarget||this.areaElement,r=e.targets,o=this.differ.update(r),a=o.added,s=o.changed,l=o.removed,c=a.length||l.length;(c||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Vn(this,!1),Vn(this,!0),this.updateState({gestos:{}})),n!==i&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=or(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=ar(this,"GroupControl")));var u=!Hn(t.container,e.container);u&&(t.container=e.container),(u||c||this.transformOrigin!==(e.defaultGroupOrigin||"50% 50%")||s.length||r.length&&!ui(this._targetGroups,e.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!c},e.prototype._updateObserver=function(){},e.defaultProps=y(y({},dr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(dr),Er=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}return v(e,t),e.prototype.render=function(){var t,e=this,n=this.props,i=n.cspNonce,o=n.cssStyled,a=n.persistData,s=n.targets||[],l=s.length,c=this.isUnmounted||!l,u=null!==(t=null==a?void 0:a.children)&&void 0!==t?t:[];return c&&!l&&u.length?s=u.map((function(){return null})):c||(u=[]),h.n(o,{cspNonce:i,ref:(0,r.KR)(this,"controlBox"),className:nn("control-box")},s.map((function(t,i){var o,a,s=null!==(a=null===(o=n.individualGroupableProps)||void 0===o?void 0:o.call(n,t,i))&&void 0!==a?a:{};return h.n(dr,y({key:"moveable"+i,ref:(0,r.DY)(e,"moveables",i)},n,s,{target:t,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:u[i]}))})))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,n){void 0===n&&(n=!0),Et(!0),this.moveables.forEach((function(i){i.updateRect(t,e,n)})),Et()},e.prototype.getRect=function(){return y(y({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},e.prototype.request=function(t,e,n){void 0===e&&(e={});var i=this.moveables.map((function(n){return n.request(t,y(y({},e),{isInstant:!1}),!1)})),r={request:function(t){return i.forEach((function(e){return e.request(t)})),this},requestEnd:function(){return i.forEach((function(t){return t.requestEnd()})),this}};return n||e.isInstant?r.request(e).requestEnd():r},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var n=e,i=(0,o.I6)(this.moveables,(function(t){var e=t.getTargets()[0],i=t.getControlBoxElement(),r=t.getDragElement();return!(!e||!r)&&(r===n||r.contains(n)||r!==e&&e===n||e.contains(n)||i===n||i.contains(n))}));return i&&i.dragStart(t,e),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return w([],b(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(dr);function Ar(t,e){var n=[];return t.forEach((function(t){t&&((0,o.Kg)(t)?e[t]&&n.push.apply(n,w([],b(e[t]),!1)):(0,o.cy)(t)?n.push.apply(n,w([],b(Ar(t,e)),!1)):n.push(t))})),n}function _r(t,e){var n=[];return t.forEach((function(t){t&&((0,o.Kg)(t)?e[t]&&n.push.apply(n,w([],b(e[t]),!1)):(0,o.cy)(t)?n.push(_r(t,e)):n.push(t))})),n}function Pr(t,e){return t.length!==e.length||t.some((function(t,n){var i=e[n];return!(!t&&!i)&&t!=i&&(!(0,o.cy)(t)||!(0,o.cy)(i)||Pr(t,i))}))}var Dr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.defaultAbles=yr,e}(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new l.A,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return v(e,t),e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var n=e.css;n&&n.forEach((function(e){t[e]=!0}))}));var e=(0,o.xD)(t).join("\n");this.defaultStyled=(0,p.I4)("div",(0,r.SS)(N,B+e))},e.getTotalAbles=function(){return w([Oi,pr,vr,Ai],b(this.defaultAbles),!1)},e.prototype.render=function(){var t,e=this.constructor;e.defaultStyled||e.makeStyled();var n=this.props,i=n.ables,a=n.props,s=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(n,["ables","props"]),l=b(this._updateRefs(!0),2),c=l[0],u=l[1],d=Ar(c,u),p=d.length>1,f=w(w([],b(e.getTotalAbles()),!1),b(i||[]),!1),g=y(y(y({},s),a||{}),{ables:f,cssStyled:e.defaultStyled,customStyledMap:e.customStyledMap});this._elementTargets=d;var m=null,v=this.moveable,S=s.persistData;if((null==S?void 0:S.children)&&(p=!0),s.individualGroupable)return h.n(Er,y({key:"individual-group",ref:(0,r.KR)(this,"moveable")},g,{target:null,targets:d}));if(p){var x=_r(c,u);if(v&&!v.props.groupable&&!v.props.individualGroupable){var k=v.props.target;k&&d.indexOf(k)>-1&&(m=y({},v.state))}return h.n(Tr,y({key:"group",ref:(0,r.KR)(this,"moveable")},g,null!==(t=s.groupableProps)&&void 0!==t?t:{},{target:null,targets:d,targetGroups:x,firstRenderState:m}))}var C=d[0];if(v&&(v.props.groupable||v.props.individualGroupable)){var M=v.moveables||[],T=(0,o.I6)(M,(function(t){return t.props.target===C}));T&&(m=y({},T.state))}return h.n(dr,y({key:"single",ref:(0,r.KR)(this,"moveable")},g,{target:C,firstRenderState:m}))},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var t,e=this;return this._onChangeTargets=function(){e._onChangeTargets=null,t()},new Promise((function(e){t=e}))},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var e=this.refTargets,n=ri(this.props.target||this.props.targets),i="undefined"!=typeof document,r=Pr(e,n),a=this.selectorMap,s={};return this.refTargets.forEach((function t(e){(0,o.Kg)(e)?a[e]?s[e]=a[e]:i&&(r=!0,s[e]=[].slice.call(document.querySelectorAll(e))):(0,o.cy)(e)&&e.forEach(t)})),this._tmpRefTargets=n,this._tmpSelectorMap=s,[n,s,!t&&r]},e.prototype._checkChangeTargets=function(){var t,e,n;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var i=this._differ.update(this._elementTargets),r=i.added,o=i.removed;(r.length||o.length)&&(null===(e=(t=this.props).onChangeTargets)||void 0===e||e.call(t,{moveable:this.moveable,targets:this._elementTargets}),null===(n=this._onChangeTargets)||void 0===n||n.call(this));var a=b(this._updateRefs(),3),s=a[0],l=a[1],c=a[2];this.refTargets=s,this.selectorMap=l,c&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([(0,r.RI)(Y)],e.prototype,"moveable",void 0),e}(h.o6))},54573:(t,e,n)=>{"use strict";n.d(e,{Rf:()=>E,Yn:()=>U,li:()=>z,n:()=>L,o6:()=>M,uA:()=>C,vJ:()=>j,xr:()=>F});var i=n(7728),r=n(79715),o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function l(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function c(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function u(t){var e=0;return t.map((function(t){return null==t?"$compat".concat(++e):"".concat(t)}))}function h(t){var e=[];return t.forEach((function(t){e=e.concat((0,i.cy)(t)?h(t):t)})),e}function d(t,e){if(!e)return t;for(var n in e)(0,i.b0)(t[n])&&(t[n]=e[n]);return t}function p(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function f(t){var e=t.className,n=l(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function g(t){var e={},n={};for(var i in t)0===i.indexOf("on")?n[i]=t[i]:e[i]=t[i];return[e,n]}function m(t){if(!t)return null;var e=t.b;return(0,i.Ll)(e)?e:m(t.c)}function v(t){var e=t.parentNode;e&&e.removeChild(t)}function y(t){t.forEach((function(t){t()}))}function b(){return this.constructor(this.props,this.context)}var w=0,S=function(){function t(t,e,n,i,r,o,a){void 0===a&&(a={}),this.t=t,this.d=e,this.k=n,this.i=i,this.c=r,this.ref=o,this.ps=a,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(t,e,n,r,o){var a=this,s=a.d,l=h((0,i.BI)(e).filter((function(t){return t.$_req})).map((function(t){return t.$_subs}))),c=(0,i.I6)(l,(function(t){return t.d===s}));if(a.b&&!(0,i.Kg)(n)&&!o&&!a.s(n.props,r)&&!c)return l.reduce((function(t,e){var n=e.d;return t[0]?t[0].d===n&&t.push(e):n>s&&t.push(e),t}),[]).forEach((function(n){N(n,n._ps,[n.o],t,e,!0)})),!1;a.o=n,a.ss(r);var u=a.ps;return(0,i.Kg)(n)||(a.ps=n.props,a.ref=n.ref),k(this),a.r(t,e,a.b?u:{},r),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var t=this,e=t.ref,n=t.fr;e&&e(n?n.current:t.b)},t}();function x(){return Object.__CROACT_CURRENT_INSTNACE__}function k(t){return Object.__CROACT_CURRENT_INSTNACE__=t,w=0,t}var C=function(){function t(t,e){void 0===t&&(t={}),this.props=t,this.context=e,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(t,e){return this.props!==t||this.state!==e},e.setState=function(t,e,n){var i=this;i.$_timer||(i.$_state={}),clearTimeout(i.$_timer),i.$_timer=0,i.$_state=s(s({},i.$_state),t),n?i.$_setState(e,n):i.$_timer=window.setTimeout((function(){i.$_timer=0,i.$_setState(e,n)}))},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],i=this.$_p;N(i.c,[i],[i.o],n,i._cs,s(s({},this.state),this.$_state),e)&&(t&&n.push(t),y(n),k(null))},t}(),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.shouldComponentUpdate=function(t,e){return p(this.props,t)||p(this.state,e)},e}(C);function T(t){var e=function(t){e.current=t};return e.current=t,e}function E(t){return t._fr=!0,t}var A=function(t){function e(e,n,i,r,o,a,s){void 0===s&&(s={});var l=t.call(this,e,n,i,r,o,a,d(s,e.defaultProps))||this;return l.typ="comp",l._usefs=[],l._uefs=[],l._defs=[],l}a(e,t);var n=e.prototype;return n.s=function(t,e){var n=this.b;return!1!==n.shouldComponentUpdate(d(t,this.t.defaultProps),e||n.state)},n.r=function(t,e,n){var i,r,o=this,a=o.t;o.ps=d(o.ps,o.t.defaultProps);var l=o.ps,c=!o.b,u=a.contextType,h=o.b,p=null==u?void 0:u.get(o);o._cs=e,c?(h=function(t,e,n,i){var r,o;return(null===(r=null==t?void 0:t.prototype)||void 0===r?void 0:r.render)?o=new t(e,n):((o=new C(e,n)).constructor=t,t._fr?(i.fr=T(),o.render=function(){return this.constructor(this.props,i.fr)}):o.render=b),o.$_p=i,o}(a,l,p,o),o.b=h):(h.props=l,h.context=p);var f=h.state;o._usefs=[],o._uefs=[];var g=h.render();0===(null===(r=null===(i=null==g?void 0:g.props)||void 0===i?void 0:i.children)||void 0===r?void 0:r.length)&&(g.props.children=o.ps.children);var m=s(s({},e),h.$_cs);N(o,o._ps,g?[g]:[],t,m),c?o._uefs.push((function(){null==u||u.register(o),h.componentDidMount()})):o._uefs.push((function(){h.componentDidUpdate(n,f)})),t.push((function(){o._usefs.forEach((function(t){t()})),c?o.md():o.ud(),o._defs=o._uefs.map((function(t){return t()}))}))},n.ss=function(t){var e=this.b;e&&t&&(e.state=t)},n.un=function(){var t,e=this;e._ps.forEach((function(t){t.un()})),null===(t=e.t.contextType)||void 0===t||t.unregister(e),clearTimeout(e.b.$_timer),e._defs.forEach((function(t){t&&t()})),e.b.componentWillUnmount()},e}(S);function _(t,e){var n=(0,i.xD)(t),o=(0,i.xD)(e),a=(0,r.U)(n,o,(function(t){return t})),s={},l={},c={};return a.added.forEach((function(t){var n=o[t];s[n]=e[n]})),a.removed.forEach((function(e){var i=n[e];l[i]=t[i]})),a.maintained.forEach((function(i){var r=i[0],o=n[r],a=[t[o],e[o]];t[o]!==e[o]&&(c[o]=a)})),{added:s,removed:l,changed:c}}var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.typ="elem",e._es={},e._svg=!1,e}a(e,t);var n=e.prototype;return n.e=function(t,e){var n=this,r=n._es,o=n.b,a=function(t){return t.replace(/^on/g,"").toLowerCase()}(t);e?((0,i.Nn)(o,a,r[t]),delete r[t]):(r[t]=function(e){var i,r;null===(r=(i=n.ps)[t])||void 0===r||r.call(i,e)},(0,i.W2)(o,a,r[t]))},n.s=function(t){return p(this.ps,t)},n.r=function(t,e,n){var r,o=this,a=!o.b,s=o.ps;if(a){var l,c=m(o.c);l=!(!o._svg&&"svg"!==o.t)||c&&c.ownerSVGElement,o._svg=l;var u=null===(r=o._hyd)||void 0===r?void 0:r.splice(0,1)[0],h=o.t;if(u)o._hyd=[].slice.call(u.children||[]);else{var d=(0,i.YE)(c);u=l?d.createElementNS("http://www.w3.org/2000/svg",h):d.createElement(h)}o.b=u}N(o,o._ps,s.children,t,e);var p=o.b,v=g(n),y=v[0],b=v[1],w=g(s),S=w[0],x=w[1];return function(t,e,n){var i=_(f(t),f(e)),r=i.added,o=i.removed,a=i.changed;for(var s in r)n.setAttribute(s,r[s]);for(var l in a)n.setAttribute(l,a[l][1]);for(var c in o)n.removeAttribute(c)}(y,S,p),function(t,e,n){var i=_(t,e),r=i.added,o=i.removed;for(var a in o)n.e(a,!0);for(var s in r)n.e(s)}(b,x,o),function(t,e,n){var r=n.style,o=_(t,e),a=o.added,s=o.removed,l=o.changed;for(var c in a){var u=(0,i.aj)(c,"-");r.setProperty(u,a[c])}for(var c in l){var h=(0,i.aj)(c,"-");r.setProperty(h,l[c][1])}for(var c in s){var d=(0,i.aj)(c,"-");r.removeProperty(d)}}(n.style||{},s.style||{},p),t.push((function(){a?o.md():o.ud()})),!0},n.un=function(){var t=this,e=t._es,n=t.b;for(var r in e)(0,i.Nn)(n,r,e[r]);t._ps.forEach((function(t){t.un()})),t._es={},t._sel||v(n)},e}(S);function D(t){if(!t||(0,i.Ll)(t))return t;var e=t.$_p._ps;return e.length?D(e[0].b):null}function O(t){if(t){if(t.b&&(0,i.Ll)(t.b))return t;var e=t._ps;return e.length?O(e[0]):null}}function L(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e||{},a=o.key,c=o.ref,u=l(o,["key","ref"]);return{type:t,key:a,ref:c,props:s(s({},u),{children:(0,i.Ct)(n).filter((function(t){return null!=t&&!1!==t}))})}}var I=function(t){function e(e,n){void 0===n&&(n=0);var i=t.call(this,"container",n,"container",0,null)||this;return i.typ="container",i.b=e,i}a(e,t);var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e}(S),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.typ="text",e}a(e,t);var n=e.prototype;return n.r=function(t){var e,n=this,r=!n.b;if(r){var o=m(n.c),a=null===(e=n._hyd)||void 0===e?void 0:e.splice(0,1)[0];n.b=a||(0,i.YE)(o).createTextNode(n.t.replace("text_",""))}return t.push((function(){r?n.md():n.ud()})),!0},n.un=function(){v(this.b)},e}(S);function V(t,e,n,r){var o=r.d+1;if((0,i.Kg)(t)||(0,i.Et)(t))return new R("text_".concat(t),o,e,n,r,null,{});var a=t.type;return new("string"==typeof a?P:A)(a,o,e,n,r,t.ref,t.props)}function N(t,e,n,o,a,s,l){var h=function(t,e,n){var o=n.map((function(t){return(0,i.Kg)(t)?null:t.key})),a=u(e.map((function(t){return t.k}))),s=u(o),l=(0,r.U)(a,s,(function(t){return t}));l.removed.forEach((function(t){e.splice(t,1)[0].un()})),l.ordered.forEach((function(t){var n=t[0],i=t[1],r=e.splice(n,1)[0];e.splice(i,0,r);var o=D(r.b),a=D(e[i+1]&&e[i+1].b);o&&o.parentNode.insertBefore(o,a)})),l.added.forEach((function(i){e.splice(i,0,V(n[i],o[i],i,t))}));var h=l.maintained.filter((function(r){r[0];var a=r[1],s=n[a],l=e[a];return((0,i.Kg)(s)?"text_".concat(s):s.type)!==l.t?(l.un(),e.splice(a,1,V(s,o[a],a,t)),!0):(l.i=a,!1)}));return c(c([],l.added,!0),h.map((function(t){return t[0],t[1]})),!0)}(t,e,n),d=t._hyd,p=e.filter((function(t,e){return t._hyd=d,t.u(o,a,n[e],s,l)}));"container"===t.typ&&t._sel&&e.forEach((function(t){var e=O(t);e&&(e._sel=!0)})),t._hyd=null;var f=m(t);return f&&h.reverse().forEach((function(n){var i=e[n],r=D(i.b);if(r&&f!==r&&!r.parentNode){var o=function(t,e){for(var n=t._ps,i=n.length,r=e.i+1;r<i;++r){var o=D(n[r].b);if(o)return o}return null}(t,i);f.insertBefore(r,o)}})),p.length>0}function F(t,e,n){return!n&&t&&((n=new I(e.parentElement))._hyd=[e],n._sel=!0),function(t,e,n,i){void 0===n&&(n=e.__CROACT__),void 0===i&&(i={});var r=!!n;n||(n=new I(e));var o=[];N(n,n._ps,t?[t]:[],o,i,void 0,void 0),y(o),k(null),r||(e.__CROACT__=n)}(t,e,n),n}function B(t){var e=x(),n=e._hs||(e._hs=[]),i=w,r=n[i];if(w=i+1,r){if(!p(r.deps,t.deps))return r.updated=!1,r;n[i]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function z(t){return B({func:function(){return T(t)},deps:[]}).value}function j(t,e,n){var i=x(),r=B({func:function(){return t},deps:e}),o=n?i._usefs:i._uefs;r.updated?o.push((function(){return r.effect&&r.effect(),r.effect=t(),r.effect})):o.push((function(){return r.effect}))}function U(t,e,n){j((function(){null==t||t(e())}),n,!0)}},72775:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(7728);const r=function(t){var e="rCS"+function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(t).toString(36);return{className:e,inject:function(n,r){void 0===r&&(r={});var o=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(n),a=(o||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(a){var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}else a=function(t,e,n,r,o){var a=(0,i.YE)(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=function(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,n){var r=n.trim();return(r?(0,i.cM)(r):[""]).map((function(e){var n=e.trim();return 0===n.indexOf("@")?n:n.indexOf(":global")>-1?n.replace(/\:global/g,""):n.indexOf(":host")>-1?"".concat(n.replace(/\:host/g,".".concat(t))):n?".".concat(t," ").concat(n):".".concat(t)})).join(", ")+" {"}))}(t,e,n),(o||a.head||a.body).appendChild(s),s}(e,t,r,n,o);return{destroy:function(){var t,e=parseFloat(a.getAttribute("data-styled-count"))||0;e<=1?(a.remove?a.remove():null===(t=a.parentNode)||void 0===t||t.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(e-1))}}}}}},89605:(t,e,n)=>{"use strict";n.d(e,{OK:()=>c,ap:()=>u,c4:()=>l,qg:()=>h,uK:()=>a,yV:()=>s});var i=n(7728),r=n(34338),o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function s(t,e){return void 0===e&&(e=0),u(h(t,e))}function l(t,e){var n=(0,r.Di)(t,[e[0],e[1]||0,e[2]||0,1],4),i=n[3]||1;return[n[0]/i,n[1]/i,n[2]/i]}function c(t,e){void 0===e&&(e=document.body);for(var n=t,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n;){var o=getComputedStyle(n).transform;if(i=(0,r.n_)(s(o),i),n===e)break;n=n.parentElement}return(i=(0,r.B8)(i,4))[12]=0,i[13]=0,i[14]=0,i}function u(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var n=t.matrixFunction,i=t.functionValue;n&&(e=n(e,i))})),e}function h(t,e){return void 0===e&&(e=0),((0,i.cy)(t)?t:(0,i.Z3)(t)).map((function(t){var n=(0,i.ft)(t),a=n.prefix,s=n.value,l=null,c=a,u="";if("translate"===a||"translateX"===a||"translate3d"===a){var h=(0,i.Gv)(e)?o(o({},e),{"o%":e["%"]}):{"%":e,"o%":e},d=(0,i.cM)(s).map((function(t,n){return h["%"]=0===n&&"x%"in h?e["x%"]:1===n&&"y%"in h?e["y%"]:e["o%"],(0,i.jc)(t,h)})),p=d[0],f=d[1],g=void 0===f?0:f,m=d[2],v=void 0===m?0:m;l=r.iv,u=[p,g,v]}else if("translateY"===a){var y=(0,i.Gv)(e)?o({"%":e["y%"]},e):{"%":e};g=(0,i.jc)(s,y),l=r.iv,u=[0,g,0]}else if("translateZ"===a)v=parseFloat(s),l=r.iv,u=[0,0,v];else if("scale"===a||"scale3d"===a){var b=(0,i.cM)(s).map((function(t){return parseFloat(t)})),w=b[0],S=b[1],x=void 0===S?w:S,k=b[2],C=void 0===k?1:k;l=r.YO,u=[w,x,C]}else if("scaleX"===a)w=parseFloat(s),l=r.YO,u=[w,1,1];else if("scaleY"===a)x=parseFloat(s),l=r.YO,u=[1,x,1];else if("scaleZ"===a)C=parseFloat(s),l=r.YO,u=[1,1,C];else if("rotate"===a||"rotateZ"===a||"rotateX"===a||"rotateY"===a){var M=(0,i.hg)(s),T=M.unit,E=M.value,A="rad"===T?E:E*Math.PI/180;"rotate"===a||"rotateZ"===a?(c="rotateZ",l=r.Zt):"rotateX"===a?l=r.pE:"rotateY"===a&&(l=r.qh),u=A}else if("matrix3d"===a)l=r.n_,u=(0,i.cM)(s).map((function(t){return parseFloat(t)}));else if("matrix"===a){var _=(0,i.cM)(s).map((function(t){return parseFloat(t)}));l=r.n_,u=[_[0],_[1],0,0,_[2],_[3],0,0,0,0,1,0,_[4],_[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:l,functionValue:u}}))}},32017:t=>{"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var a=o[r];if(!t(e[a],n[a]))return!1}return!0}return e!=e&&n!=n}},67028:(t,e,n)=>{"use strict";const i=n(12672),r=n(90054),o=t=>null!==t&&"object"==typeof t&&!Array.isArray(t),a=t=>"number"==typeof t||"string"==typeof t&&""!==t,s=t=>Number.isInteger(+t),l=t=>{let e=`${t}`,n=-1;if("-"===e[0]&&(e=e.slice(1)),"0"===e)return!1;for(;"0"===e[++n];);return n>0},c=(t,e,n)=>{if(e>0){let n="-"===t[0]?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return!1===n?String(t):t},u=(t,e)=>{let n="-"===t[0]?"-":"";for(n&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return n?"-"+t:t},h=(t,e,n,i)=>{if(n)return r(t,e,{wrap:!1,...i});let o=String.fromCharCode(t);return t===e?o:`[${o}-${String.fromCharCode(e)}]`},d=(t,e,n)=>{if(Array.isArray(t)){let e=!0===n.wrap,i=n.capture?"":"?:";return e?`(${i}${t.join("|")})`:t.join("|")}return r(t,e,n)},p=(...t)=>new RangeError("Invalid range arguments: "+i.inspect(...t)),f=(t,e,n)=>{if(!0===n.strictRanges)throw p([t,e]);return[]},g=(t,e,n,i={})=>{if(null==e&&a(t))return[t];if(!a(t)||!a(e))return f(t,e,i);if("function"==typeof n)return g(t,e,1,{transform:n});if(o(n))return g(t,e,0,n);let r={...i};return!0===r.capture&&(r.wrap=!0),n=n||r.step||1,s(n)?s(t)&&s(e)?((t,e,n=1,i={})=>{let r=Number(t),o=Number(e);if(!Number.isInteger(r)||!Number.isInteger(o)){if(!0===i.strictRanges)throw p([t,e]);return[]}0===r&&(r=0),0===o&&(o=0);let a=r>o,s=String(t),f=String(e),g=String(n);n=Math.max(Math.abs(n),1);let m=l(s)||l(f)||l(g),v=m?Math.max(s.length,f.length,g.length):0,y=!1===m&&!1===((t,e,n)=>"string"==typeof t||"string"==typeof e||!0===n.stringify)(t,e,i),b=i.transform||(t=>e=>!0===t?Number(e):String(e))(y);if(i.toRegex&&1===n)return h(u(t,v),u(e,v),!0,i);let w={negatives:[],positives:[]},S=[],x=0;for(;a?r>=o:r<=o;)!0===i.toRegex&&n>1?w[(k=r)<0?"negatives":"positives"].push(Math.abs(k)):S.push(c(b(r,x),v,y)),r=a?r-n:r+n,x++;var k;return!0===i.toRegex?n>1?((t,e,n)=>{t.negatives.sort(((t,e)=>t<e?-1:t>e?1:0)),t.positives.sort(((t,e)=>t<e?-1:t>e?1:0));let i,r=e.capture?"":"?:",o="",a="";return t.positives.length&&(o=t.positives.map((t=>u(String(t),n))).join("|")),t.negatives.length&&(a=`-(${r}${t.negatives.map((t=>u(String(t),n))).join("|")})`),i=o&&a?`${o}|${a}`:o||a,e.wrap?`(${r}${i})`:i})(w,i,v):d(S,null,{wrap:!1,...i}):S})(t,e,n,r):((t,e,n=1,i={})=>{if(!s(t)&&t.length>1||!s(e)&&e.length>1)return f(t,e,i);let r=i.transform||(t=>String.fromCharCode(t)),o=`${t}`.charCodeAt(0),a=`${e}`.charCodeAt(0),l=o>a,c=Math.min(o,a),u=Math.max(o,a);if(i.toRegex&&1===n)return h(c,u,!1,i);let p=[],g=0;for(;l?o>=a:o<=a;)p.push(r(o,g)),o=l?o-n:o+n,g++;return!0===i.toRegex?d(p,null,{wrap:!1,options:i}):p})(t,e,Math.max(Math.abs(n),1),r):null==n||o(n)?g(t,e,1,n):((t,e)=>{if(!0===e.strictRanges)throw new TypeError(`Expected step "${t}" to be a number`);return[]})(n,r)};t.exports=g},71720:(t,e,n)=>{"use strict";function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function r(t,e){return e.replace(/([^}{]*){/gm,(function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}function o(t,e){return function(n){n&&(t[e]=n)}}function a(t,e,n){return function(i){i&&(t[e][n]=i)}}function s(t,e){return function(n){var i=n.prototype;t.forEach((function(t){e(i,t)}))}}function l(t,e){return void 0===e&&(e={}),function(n,i){t.forEach((function(t){var r=e[t]||t;r in n||(n[r]=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=(e=this[i])[t].apply(e,n);return o===this[i]?this:o})}))}}n.d(e,{DY:()=>a,KR:()=>o,OA:()=>s,RI:()=>l,SS:()=>r,T6:()=>i})},12437:(t,e,n)=>{"use strict";n.d(e,{A:()=>g});var i=n(32284),r=n(7728),o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},a=function(){return a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)};function s(t){return 180*(e=[t[0].clientX,t[0].clientY],i=(n=[t[1].clientX,t[1].clientY])[0]-e[0],r=n[1]-e[1],((o=Math.atan2(r,i))>=0?o:o+2*Math.PI)/Math.PI);var e,n,i,r,o}function l(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),n=[],i=0;i<e;++i)n.push(h(t[i]));return n}(t.touches):[h(t)]:[]}function c(t,e,n){var i=n.length,r=d(t,i),o=r.clientX,a=r.clientY,s=r.originalClientX,l=r.originalClientY,c=d(e,i),u=c.clientX,h=c.clientY,p=d(n,i);return{clientX:s,clientY:l,deltaX:o-u,deltaY:a-h,distX:o-p.clientX,distY:a-p.clientY}}function u(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function h(t){return{clientX:t.clientX,clientY:t.clientY}}function d(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=Math.min(t.length,e),r=0;r<i;++r){var o=t[r];n.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,n.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,n.clientX+=o.clientX,n.clientY+=o.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var p=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return t.prototype.getAngle=function(t){return void 0===t&&(t=this.prevClients),s(t)},t.prototype.getRotation=function(t){return void 0===t&&(t=this.prevClients),s(t)-s(this.startClients)},t.prototype.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var n=c(t||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,r=n.deltaY;return this.movement+=Math.sqrt(i*i+r*r),this.prevClients=t,n},t.prototype.getPositions=function(t){void 0===t&&(t=this.prevClients);for(var e=this.prevClients,n=this.startClients,i=Math.min(this.length,e.length),r=[],o=0;o<i;++o)r[o]=c([t[o]],[e[o]],[n[o]]);return r},t.prototype.getMovement=function(t){var e=this.movement;if(!t)return e;var n=d(t,this.length),i=d(this.prevClients,this.length),r=n.clientX-i.clientX,o=n.clientY-i.clientY;return Math.sqrt(r*r+o*o)+e},t.prototype.getDistance=function(t){return void 0===t&&(t=this.prevClients),u(t)},t.prototype.getScale=function(t){return void 0===t&&(t=this.prevClients),u(t)/u(this.startClients)},t.prototype.move=function(t,e){this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),this.prevClients.forEach((function(n){n.clientX-=t,n.clientY-=e}))},t}(),f=["textarea","input"],g=function(t){function e(e,n){void 0===n&&(n={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(t,e){if(void 0===e&&(e=!0),i.flag||!1!==t.cancelable){var n=t.type.indexOf("drag")>=-1;if(!i.flag||!n){i._isDragAPI=!0;var o=i.options,s=o.container,c=o.pinchOutside,u=o.preventWheelClick,h=o.preventRightClick,d=o.preventDefault,g=o.checkInput,m=o.dragFocusedInput,v=o.preventClickEventOnDragStart,y=o.preventClickEventOnDrag,b=o.preventClickEventByCondition,w=i._useTouch,S=!i.flag;if(i._isSecondaryButton=3===t.which||2===t.button,u&&(2===t.which||1===t.button)||h&&(3===t.which||2===t.button))return i.stop(),!1;if(S){var x=i._window.document.activeElement,k=t.target;if(k){var C=k.tagName.toLowerCase(),M=f.indexOf(C)>-1,T=k.isContentEditable;if(M||T){if(g||!m&&x===k)return!1;if(x&&(x===k||T&&x.isContentEditable&&x.contains(k))){if(!m)return!1;k.blur()}}else if((d||"touchstart"===t.type)&&x){var E=x.tagName.toLowerCase();(x.isContentEditable||f.indexOf(E)>-1)&&x.blur()}(v||y||b)&&(0,r.W2)(i._window,"click",i._onClick,!0)}i.clientStores=[new p(l(t))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=e,i._dragFlag=!0,i._prevInputEvent=t,i.data={},i.doubleFlag=(0,r.tB)()-i.prevTime<200,i._isMouseEvent=function(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}(t),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent(),!1===(i._preventMouseEvent||i.emit("dragStart",a(a({data:i.data,datas:i.data,inputEvent:t,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:e,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){i._dragFlag=!1}})))&&i.stop(),i._isMouseEvent&&i.flag&&d&&t.preventDefault()}if(!i.flag)return!1;var A=0;if(S?(i._attchDragEvent(),w&&c&&(A=setTimeout((function(){(0,r.W2)(s,"touchstart",i.onDragStart,{passive:!1})})))):w&&c&&(0,r.Nn)(s,"touchstart",i.onDragStart),i.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(A),S&&t.touches.length!==t.changedTouches.length)return;i.pinchFlag||i.onPinchStart(t)}}}},i.onDrag=function(t,e){if(i.flag){var n=i.options.preventDefault;!i._isMouseEvent&&n&&t.preventDefault(),i._prevInputEvent=t;var r=l(t),o=i.moveClients(r,t,!1);if(i._dragFlag){if((i.pinchFlag||o.deltaX||o.deltaY)&&!1===(i._preventMouseEvent||i.emit("drag",a(a({},o),{isScroll:!!e,inputEvent:t}))))return void i.stop();i.pinchFlag&&i.onPinch(t,r)}i.getCurrentStore().getPosition(r,!0)}},i.onDragEnd=function(t){if(i.flag){var e=i.options,n=e.pinchOutside,o=e.container,s=e.preventClickEventOnDrag,c=e.preventClickEventOnDragStart,u=e.preventClickEventByCondition,h=i.isDrag;(s||c||u)&&requestAnimationFrame((function(){i._allowClickEvent()})),u||c||!s||h||i._allowClickEvent(),i._useTouch&&n&&(0,r.Nn)(o,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(t);var d=(null==t?void 0:t.touches)?l(t):[];0!==d.length&&i.options.keepDragging?i._addStore(new p(d)):i.flag=!1;var f=i._getPosition(),g=(0,r.tB)(),m=!h&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=h||m?0:g,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",a({data:i.data,datas:i.data,isDouble:m,isDrag:h,isClick:!h,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:t,isTrusted:i._isTrusted},f)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout((function(){i._preventMouseEvent=!1}),200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){(0,r.Nn)(i._window,"click",i._onClick,!0)},i._onClick=function(t){i._allowClickEvent(),i._allowMouseEvent();var e=i.options.preventClickEventByCondition;(null==e?void 0:e(t))||(t.stopPropagation(),t.preventDefault())},i._onContextMenu=function(t){i.options.preventRightClick?i.onDragEnd(t):t.preventDefault()},i._passCallback=function(){};var o=[].concat(e),s=o[0];i._window=(0,r.l6)(s)?s:(0,r.zk)(s),i.options=a({checkInput:!1,container:s&&!("document"in s)?(0,r.zk)(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var c=i.options,u=c.container,h=c.events,d=c.checkWindowBlur;if(i._useDrag=h.indexOf("drag")>-1,i._useTouch=h.indexOf("touch")>-1,i._useMouse=h.indexOf("mouse")>-1,i.targets=o,i._useDrag&&o.forEach((function(t){(0,r.W2)(t,"dragstart",i.onDragStart)})),i._useMouse&&(o.forEach((function(t){(0,r.W2)(t,"mousedown",i.onDragStart),(0,r.W2)(t,"mousemove",i._passCallback)})),(0,r.W2)(u,"contextmenu",i._onContextMenu)),d&&(0,r.W2)((0,r.zk)(),"blur",i.onBlur),i._useTouch){var g={passive:!1};o.forEach((function(t){(0,r.W2)(t,"touchstart",i.onDragStart,g),(0,r.W2)(t,"touchmove",i._passCallback,g)}))}return i}return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,e,n,i){void 0===i&&(i=!0),this.flag&&(this.clientStores[0].move(t,e),i&&this.onDrag(n,!0))},e.prototype.move=function(t,e){var n=t[0],i=t[1],r=this.getCurrentStore().prevClients;return this.moveClients(r.map((function(t){var e=t.clientX,r=t.clientY;return{clientX:e+n,clientY:r+i,originalClientX:e,originalClientY:r}})),e,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var e=this.data;for(var n in t)e[n]=t[n];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return void 0===t&&(t=this._prevInputEvent),a(a({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,e=this.targets,n=this.options.container;this.off(),(0,r.Nn)(this._window,"blur",this.onBlur),this._useDrag&&e.forEach((function(e){(0,r.Nn)(e,"dragstart",t.onDragStart)})),this._useMouse&&(e.forEach((function(e){(0,r.Nn)(e,"mousedown",t.onDragStart)})),(0,r.Nn)(n,"contextmenu",this._onContextMenu)),this._useTouch&&(e.forEach((function(e){(0,r.Nn)(e,"touchstart",t.onDragStart)})),(0,r.Nn)(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var e=this,n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var i=new p(l(t));this.pinchFlag=!0,this._addStore(i),!1===this.emit("pinchStart",a(a({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){e._dragFlag=!1}}))&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",a(a({data:this.data,datas:this.data,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",a(a({data:this.data,datas:this.data,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,e,n){var i=this._getPosition(t,n),r=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var o=!1;return!r&&this.isDrag&&(o=!0),a(a({data:this.data,datas:this.data},i),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,e){var n=this.getCurrentStore().getPosition(t,e),i=this.clientStores.slice(1).reduce((function(t,e){var n=e.getPosition();return t.distX+=n.distX,t.distY+=n.distY,t}),n),r=i.distX,o=i.distY;return a(a({},n),{distX:r,distY:o})},e.prototype._attchDragEvent=function(){var t=this._window,e=this.options.container,n={passive:!1};this._isDragAPI&&((0,r.W2)(e,"dragover",this.onDrag,n),(0,r.W2)(t,"dragend",this.onDragEnd)),this._useMouse&&((0,r.W2)(e,"mousemove",this.onDrag),(0,r.W2)(t,"mouseup",this.onDragEnd)),this._useTouch&&((0,r.W2)(e,"touchmove",this.onDrag,n),(0,r.W2)(t,"touchend",this.onDragEnd,n),(0,r.W2)(t,"touchcancel",this.onDragEnd,n))},e.prototype._dettachDragEvent=function(){var t=this._window,e=this.options.container;this._isDragAPI&&((0,r.Nn)(e,"dragover",this.onDrag),(0,r.Nn)(t,"dragend",this.onDragEnd)),this._useMouse&&((0,r.Nn)(e,"mousemove",this.onDrag),(0,r.Nn)(t,"mouseup",this.onDragEnd)),this._useTouch&&((0,r.Nn)(e,"touchstart",this.onDragStart),(0,r.Nn)(e,"touchmove",this.onDrag),(0,r.Nn)(t,"touchend",this.onDragEnd),(0,r.Nn)(t,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(i.A)},41929:t=>{"use strict";t.exports=function(t){return"number"==typeof t?t-t==0:"string"==typeof t&&""!==t.trim()&&(Number.isFinite?Number.isFinite(+t):isFinite(+t))}},80629:(t,e,n)=>{"use strict";n.d(e,{$H:()=>f,Ay:()=>m});var i,r,o,a=n(32284),s=n(7728),l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},l(t,e)},c=(i=function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var n,o=String(t);return(n=i[o.toLowerCase()])?n:(n=r[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var o;if(o=i[e.toLowerCase()])return o===n;if(o=r[e.toLowerCase()])return o===n}else if("number"==typeof e)return e===n;return!1}};var i=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)i[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)i[o-48]=o;for(o=1;o<13;o++)i["f"+o]=o+111;for(o=0;o<10;o++)i["numpad "+o]=o+96;var a=e.names=e.title={};for(o in i)a[i[o]]=o;for(var s in r)i[s]=r[s]},i(r={exports:{}},r.exports),r.exports),u=(c.code,c.codes,c.aliases,c.names),h=(c.title,{"+":"plus","left command":"meta","right command":"meta"}),d={shift:1,ctrl:2,alt:3,meta:4};function p(t,e){var n=(u[t]||e||"").toLowerCase();for(var i in h)n=n.replace(i,h[i]);return n.replace(/\s/g,"")}function f(t,e){void 0===e&&(e=p(t.keyCode,t.key));var n=function(t){return[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"].filter(Boolean)}(t);return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}function g(t){var e=t.slice();return e.sort((function(t,e){return(d[t]||5)-(d[e]||5)})),e}const m=function(t){function e(e){void 0===e&&(e=window);var n=t.call(this)||this;return n.container=e,n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(t){n.triggerEvent("keydown",t)},n.keyupEvent=function(t){n.triggerEvent("keyup",t)},n.blur=function(){n.clear(),n.trigger("blur")},(0,s.W2)(e,"blur",n.blur),(0,s.W2)(e,"keydown",n.keydownEvent),(0,s.W2)(e,"keyup",n.keyupEvent),n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return o||(o=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var t=this.container;this.clear(),this.off(),(0,s.Nn)(t,"blur",this.blur),(0,s.Nn)(t,"keydown",this.keydownEvent),(0,s.Nn)(t,"keyup",this.keyupEvent)},n.keydown=function(t,e){return this.addEvent("keydown",t,e)},n.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},n.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},n.keyup=function(t,e){return this.addEvent("keyup",t,e)},n.addEvent=function(t,e,n){return(0,s.cy)(e)?this.on("".concat(t,".").concat(g(e).join(".")),n):(0,s.Kg)(e)?this.on("".concat(t,".").concat(e),n):this.on(t,e),this},n.removeEvent=function(t,e,n){return(0,s.cy)(e)?this.off("".concat(t,".").concat(g(e).join(".")),n):(0,s.Kg)(e)?this.off("".concat(t,".").concat(e),n):this.off(t,e),this},n.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=p(e.keyCode,e.key),i={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,i),this.trigger("".concat(t,".").concat(n),i);var r=f(e,n);r.length>1&&this.trigger("".concat(t,".").concat(r.join(".")),i)},e}(a.A)},90628:(t,e,n)=>{"use strict";const i=n(12672),r=n(34537),o=n(35157),a=n(80280),s=t=>""===t||"./"===t,l=t=>{const e=t.indexOf("{");return e>-1&&t.indexOf("}",e)>-1},c=(t,e,n)=>{e=[].concat(e),t=[].concat(t);let i=new Set,r=new Set,a=new Set,s=0,l=t=>{a.add(t.output),n&&n.onResult&&n.onResult(t)};for(let a=0;a<e.length;a++){let c=o(String(e[a]),{...n,onResult:l},!0),u=c.state.negated||c.state.negatedExtglob;u&&s++;for(let e of t){let t=c(e,!0);(u?!t.isMatch:t.isMatch)&&(u?i.add(t.output):(i.delete(t.output),r.add(t.output)))}}let c=(s===e.length?[...a]:[...r]).filter((t=>!i.has(t)));if(n&&0===c.length){if(!0===n.failglob)throw new Error(`No matches found for "${e.join(", ")}"`);if(!0===n.nonull||!0===n.nullglob)return n.unescape?e.map((t=>t.replace(/\\/g,""))):e}return c};c.match=c,c.matcher=(t,e)=>o(t,e),c.any=c.isMatch=(t,e,n)=>o(e,n)(t),c.not=(t,e,n={})=>{e=[].concat(e).map(String);let i=new Set,r=[],o=new Set(c(t,e,{...n,onResult:t=>{n.onResult&&n.onResult(t),r.push(t.output)}}));for(let t of r)o.has(t)||i.add(t);return[...i]},c.contains=(t,e,n)=>{if("string"!=typeof t)throw new TypeError(`Expected a string: "${i.inspect(t)}"`);if(Array.isArray(e))return e.some((e=>c.contains(t,e,n)));if("string"==typeof e){if(s(t)||s(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return c.isMatch(t,e,{...n,contains:!0})},c.matchKeys=(t,e,n)=>{if(!a.isObject(t))throw new TypeError("Expected the first argument to be an object");let i=c(Object.keys(t),e,n),r={};for(let e of i)r[e]=t[e];return r},c.some=(t,e,n)=>{let i=[].concat(t);for(let t of[].concat(e)){let e=o(String(t),n);if(i.some((t=>e(t))))return!0}return!1},c.every=(t,e,n)=>{let i=[].concat(t);for(let t of[].concat(e)){let e=o(String(t),n);if(!i.every((t=>e(t))))return!1}return!0},c.all=(t,e,n)=>{if("string"!=typeof t)throw new TypeError(`Expected a string: "${i.inspect(t)}"`);return[].concat(e).every((e=>o(e,n)(t)))},c.capture=(t,e,n)=>{let i=a.isWindows(n),r=o.makeRe(String(t),{...n,capture:!0}).exec(i?a.toPosixSlashes(e):e);if(r)return r.slice(1).map((t=>void 0===t?"":t))},c.makeRe=(...t)=>o.makeRe(...t),c.scan=(...t)=>o.scan(...t),c.parse=(t,e)=>{let n=[];for(let i of[].concat(t||[]))for(let t of r(String(i),e))n.push(o.parse(t,e));return n},c.braces=(t,e)=>{if("string"!=typeof t)throw new TypeError("Expected a string");return e&&!0===e.nobrace||!l(t)?[t]:r(t,e)},c.braceExpand=(t,e)=>{if("string"!=typeof t)throw new TypeError("Expected a string");return c.braces(t,{...e,expand:!0})},c.hasBraces=l,t.exports=c},93341:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>g});var i=n(71720),r=n(54573),o=n(64078),a=n(7728),s=n(32284),l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},l(t,e)};function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return u=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},u.apply(this,arguments)},h=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n.state=n.props,n}return c(e,t),e.prototype.render=function(){return r.n(o.Ay,u({ref:(0,i.KR)(this,"moveable")},this.state))},e}(r.uA),d=o.XD,p=o.hi,f=o.Gq,g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e}(function(t){function e(e,n){void 0===n&&(n={});var o=t.call(this)||this;o.containerProvider=null,o.selfElement=null,o._warp=!1;var s,l=u({},n),c={};f.forEach((function(t){c[(0,a.PT)("on ".concat(t))]=function(e){return o.trigger(t,e)}})),n.warpSelf?(delete n.warpSelf,o._warp=!0,s=e):(s=(0,a.YE)(e).createElement("div"),e.appendChild(s)),o.containerProvider=(0,r.xr)(r.n(h,u({ref:(0,i.KR)(o,"innerMoveable")},l,c)),s),o.selfElement=s;var d=l.target;return(0,a.cy)(d)&&d.length>1&&o.updateRect(),o}c(e,t);var n=e.prototype;return n.setState=function(t,e){this.innerMoveable.setState(t,e)},n.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},n.dragStart=function(t,e){void 0===e&&(e=t.target),this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t,e)},n.destroy=function(){var t,e=this.selfElement;(0,r.xr)(null,e,this.containerProvider),this._warp||null===(t=null==e?void 0:e.parentElement)||void 0===t||t.removeChild(e),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([(0,i.OA)(p,(function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.getMoveable();if(i&&i[e])return i[e].apply(i,t)})})),(0,i.OA)(d,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})}))],e),e}(s.A))},83124:function(t,e){!function(t){"use strict";function e(t){return"object"==typeof t&&"function"==typeof t.to}function n(t){t.parentElement.removeChild(t)}function i(t){return null!=t}function r(t){t.preventDefault()}function o(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function a(t,e,n){n>0&&(u(t,e),setTimeout((function(){h(t,e)}),n))}function s(t){return Math.max(Math.min(t,100),0)}function l(t){return Array.isArray(t)?t:[t]}function c(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function u(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function h(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function d(t){var e=void 0!==window.pageXOffset,n="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop}}function p(t,e){return 100/(e-t)}function f(t,e,n){return 100*e/(t[n+1]-t[n])}function g(t,e){for(var n=1;t>=e[n];)n+=1;return n}function m(t,e,n){if(n>=t.slice(-1)[0])return 100;var i=g(n,t),r=t[i-1],o=t[i],a=e[i-1],s=e[i];return a+function(t,e){return f(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}([r,o],n)/p(a,s)}function v(t,e,n,i){if(100===i)return i;var r=g(i,t),o=t[r-1],a=t[r];return n?i-o>(a-o)/2?a:o:e[r-1]?t[r-1]+function(t,e){return Math.round(t/e)*e}(i-t[r-1],e[r-1]):i}var y,b;t.PipsMode=void 0,(b=t.PipsMode||(t.PipsMode={})).Range="range",b.Steps="steps",b.Positions="positions",b.Count="count",b.Values="values",t.PipsType=void 0,(y=t.PipsType||(t.PipsType={}))[y.None=-1]="None",y[y.NoValue=0]="NoValue",y[y.LargeValue=1]="LargeValue",y[y.SmallValue=2]="SmallValue";var w=function(){function t(t,e,n){var i;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=e;var r=[];for(Object.keys(t).forEach((function(e){r.push([l(t[e]),e])})),r.sort((function(t,e){return t[0][0]-e[0][0]})),i=0;i<r.length;i++)this.handleEntryPoint(r[i][1],r[i][0]);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)this.handleStepPoint(i,this.xNumSteps[i])}return t.prototype.getDistance=function(t){for(var e=[],n=0;n<this.xNumSteps.length-1;n++)e[n]=f(this.xVal,t,n);return e},t.prototype.getAbsoluteDistance=function(t,e,n){var i,r=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[r+1];)r++;else t===this.xPct[this.xPct.length-1]&&(r=this.xPct.length-2);n||t!==this.xPct[r+1]||r++,null===e&&(e=[]);var o=1,a=e[r],s=0,l=0,c=0,u=0;for(i=n?(t-this.xPct[r])/(this.xPct[r+1]-this.xPct[r]):(this.xPct[r+1]-t)/(this.xPct[r+1]-this.xPct[r]);a>0;)s=this.xPct[r+1+u]-this.xPct[r+u],e[r+u]*o+100-100*i>100?(l=s*i,o=(a-100*i)/e[r+u],i=1):(l=e[r+u]*s/100*o,o=0),n?(c-=l,this.xPct.length+u>=1&&u--):(c+=l,this.xPct.length-u>=1&&u++),a=e[r+u]*o;return t+c},t.prototype.toStepping=function(t){return m(this.xVal,this.xPct,t)},t.prototype.fromStepping=function(t){return function(t,e,n){if(n>=100)return t.slice(-1)[0];var i=g(n,e),r=t[i-1],o=t[i],a=e[i-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([r,o],(n-a)*p(a,e[i]))}(this.xVal,this.xPct,t)},t.prototype.getStep=function(t){return v(this.xPct,this.xSteps,this.snap,t)},t.prototype.getDefaultStep=function(t,e,n){var i=g(t,this.xPct);return(100===t||e&&t===this.xPct[i-1])&&(i=Math.max(i-1,1)),(this.xVal[i]-this.xVal[i-1])/n},t.prototype.getNearbySteps=function(t){var e=g(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},t.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(c);return Math.max.apply(null,t)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(t){return this.getStep(this.toStepping(t))},t.prototype.handleEntryPoint=function(t,e){var n;if(!o(n="min"===t?0:"max"===t?100:parseFloat(t))||!o(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(e[0]);var i=Number(e[1]);n?this.xSteps.push(!isNaN(i)&&i):isNaN(i)||(this.xSteps[0]=i),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(t,e){if(e)if(this.xVal[t]!==this.xVal[t+1]){this.xSteps[t]=f([this.xVal[t],this.xVal[t+1]],e,0)/p(this.xPct[t],this.xPct[t+1]);var n=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),r=this.xVal[t]+this.xNumSteps[t]*i;this.xHighestCompleteStep[t]=r}else this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t]},t}(),S={to:function(t){return void 0===t?"":t.toFixed(2)},from:Number},x={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},k=".__tooltips",C=".__aria";function M(t,e){if(!o(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function T(t,e){if(!o(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function E(t,e){if(!o(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function A(t,e){if(!o(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function _(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new w(e,t.snap||!1,t.singleStep)}function P(t,e){if(e=l(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function D(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function O(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function L(t,e){if("number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function I(t,e){var n,i=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(n=1;n<t.handles;n++)i.push(e);i.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");i=e}t.connect=i}function R(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function V(t,e){if(!o(e))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==e&&(t.margin=t.spectrum.getDistance(e))}function N(t,e){if(!o(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function F(t,e){var n;if(!o(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!o(e[0])&&!o(e[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],n=0;n<t.spectrum.xNumSteps.length-1;n++)if(t.padding[0][n]<0||t.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var i=e[0]+e[1],r=t.spectrum.xVal[0];if(i/(t.spectrum.xVal[t.spectrum.xVal.length-1]-r)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function B(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function z(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,i=e.indexOf("drag")>=0,r=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,a=e.indexOf("hover")>=0,s=e.indexOf("unconstrained")>=0,l=e.indexOf("drag-all")>=0,c=e.indexOf("smooth-steps")>=0;if(r){if(2!==t.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");V(t,t.start[1]-t.start[0])}if(s&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:n||o,drag:i,dragAll:l,smoothSteps:c,fixed:r,snap:o,hover:a,unconstrained:s}}function j(t,n){if(!1!==n)if(!0===n||e(n)){t.tooltips=[];for(var i=0;i<t.handles;i++)t.tooltips.push(n)}else{if((n=l(n)).length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");n.forEach((function(t){if("boolean"!=typeof t&&!e(t))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})),t.tooltips=n}}function U(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function G(t,n){if(!e(n))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=n}function $(t,n){if(!function(t){return e(t)&&"function"==typeof t.from}(n))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=n}function H(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function q(t,e){t.documentElement=e}function W(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function Z(t,e){if("object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof t.cssPrefix?(t.cssClasses={},Object.keys(e).forEach((function(n){t.cssClasses[n]=t.cssPrefix+e[n]}))):t.cssClasses=e}function Y(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:S,format:S},n={step:{r:!1,t:M},keyboardPageMultiplier:{r:!1,t:T},keyboardMultiplier:{r:!1,t:E},keyboardDefaultStep:{r:!1,t:A},start:{r:!0,t:P},connect:{r:!0,t:I},direction:{r:!0,t:B},snap:{r:!1,t:D},animate:{r:!1,t:O},animationDuration:{r:!1,t:L},range:{r:!0,t:_},orientation:{r:!1,t:R},margin:{r:!1,t:V},limit:{r:!1,t:N},padding:{r:!1,t:F},behaviour:{r:!0,t:z},ariaFormat:{r:!1,t:G},format:{r:!1,t:$},tooltips:{r:!1,t:j},keyboardSupport:{r:!0,t:H},documentElement:{r:!1,t:q},cssPrefix:{r:!0,t:W},cssClasses:{r:!0,t:Z},handleAttributes:{r:!1,t:U}},r={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:x,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach((function(o){if(i(t[o])||void 0!==r[o])n[o].t(e,i(t[o])?t[o]:r[o]);else if(n[o].r)throw new Error("noUiSlider: '"+o+"' is required.")})),e.pips=t.pips;var o=document.createElement("div"),a=void 0!==o.style.msTransform,s=void 0!==o.style.transform;e.transformRule=s?"transform":a?"msTransform":"webkitTransform";return e.style=[["left","top"],["right","bottom"]][e.dir][e.ort],e}function K(e,o,c){var p,f,g,m,v,y,b,w=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},S=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),x=e,M=o.spectrum,T=[],E=[],A=[],_=0,P={},D=e.ownerDocument,O=o.documentElement||D.documentElement,L=D.body,I="rtl"===D.dir||1===o.ort?0:100;function R(t,e){var n=D.createElement("div");return e&&u(n,e),t.appendChild(n),n}function V(t,e){var n=R(t,o.cssClasses.origin),i=R(n,o.cssClasses.handle);if(R(i,o.cssClasses.touchArea),i.setAttribute("data-handle",String(e)),o.keyboardSupport&&(i.setAttribute("tabindex","0"),i.addEventListener("keydown",(function(t){return function(t,e){if(B()||z(e))return!1;var n=["Left","Right"],i=["Down","Up"],r=["PageDown","PageUp"],a=["Home","End"];o.dir&&!o.ort?n.reverse():o.ort&&!o.dir&&(i.reverse(),r.reverse());var s,l=t.key.replace("Arrow",""),c=l===r[0],u=l===r[1],h=l===i[0]||l===n[0]||c,d=l===i[1]||l===n[1]||u,p=l===a[0],f=l===a[1];if(!(h||d||p||f))return!0;if(t.preventDefault(),d||h){var g=h?0:1,m=vt(e)[g];if(null===m)return!1;!1===m&&(m=M.getDefaultStep(E[e],h,o.keyboardDefaultStep)),m*=u||c?o.keyboardPageMultiplier:o.keyboardMultiplier,m=Math.max(m,1e-7),m*=h?-1:1,s=T[e]+m}else s=f?o.spectrum.xVal[o.spectrum.xVal.length-1]:o.spectrum.xVal[0];return dt(e,M.toStepping(s),!0,!0),at("slide",e),at("update",e),at("change",e),at("set",e),!1}(t,e)}))),void 0!==o.handleAttributes){var r=o.handleAttributes[e];Object.keys(r).forEach((function(t){i.setAttribute(t,r[t])}))}return i.setAttribute("role","slider"),i.setAttribute("aria-orientation",o.ort?"vertical":"horizontal"),0===e?u(i,o.cssClasses.handleLower):e===o.handles-1&&u(i,o.cssClasses.handleUpper),n}function N(t,e){return!!e&&R(t,o.cssClasses.connect)}function F(t,e){return!(!o.tooltips||!o.tooltips[e])&&R(t.firstChild,o.cssClasses.tooltip)}function B(){return x.hasAttribute("disabled")}function z(t){return f[t].hasAttribute("disabled")}function j(){v&&(ot("update"+k),v.forEach((function(t){t&&n(t)})),v=null)}function U(){j(),v=f.map(F),rt("update"+k,(function(t,e,n){if(v&&o.tooltips&&!1!==v[e]){var i=t[e];!0!==o.tooltips[e]&&(i=o.tooltips[e].to(n[e])),v[e].innerHTML=i}}))}function G(t,e){return t.map((function(t){return M.fromStepping(e?M.getStep(t):t)}))}function $(e){var n,i=function(e){if(e.mode===t.PipsMode.Range||e.mode===t.PipsMode.Steps)return M.xVal;if(e.mode===t.PipsMode.Count){if(e.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var n=e.values-1,i=100/n,r=[];n--;)r[n]=n*i;return r.push(100),G(r,e.stepped)}return e.mode===t.PipsMode.Positions?G(e.values,e.stepped):e.mode===t.PipsMode.Values?e.stepped?e.values.map((function(t){return M.fromStepping(M.getStep(M.toStepping(t)))})):e.values:[]}(e),r={},o=M.xVal[0],a=M.xVal[M.xVal.length-1],s=!1,l=!1,c=0;return(n=i.slice().sort((function(t,e){return t-e})),i=n.filter((function(t){return!this[t]&&(this[t]=!0)}),{}))[0]!==o&&(i.unshift(o),s=!0),i[i.length-1]!==a&&(i.push(a),l=!0),i.forEach((function(n,o){var a,u,h,d,p,f,g,m,v,y,b=n,w=i[o+1],S=e.mode===t.PipsMode.Steps;for(S&&(a=M.xNumSteps[o]),a||(a=w-b),void 0===w&&(w=b),a=Math.max(a,1e-7),u=b;u<=w;u=Number((u+a).toFixed(7))){for(m=(p=(d=M.toStepping(u))-c)/(e.density||1),y=p/(v=Math.round(m)),h=1;h<=v;h+=1)r[(f=c+h*y).toFixed(5)]=[M.fromStepping(f),0];g=i.indexOf(u)>-1?t.PipsType.LargeValue:S?t.PipsType.SmallValue:t.PipsType.NoValue,!o&&s&&u!==w&&(g=0),u===w&&l||(r[d.toFixed(5)]=[u,g]),c=d}})),r}function H(e,n,i){var r,a,s=D.createElement("div"),l=((r={})[t.PipsType.None]="",r[t.PipsType.NoValue]=o.cssClasses.valueNormal,r[t.PipsType.LargeValue]=o.cssClasses.valueLarge,r[t.PipsType.SmallValue]=o.cssClasses.valueSub,r),c=((a={})[t.PipsType.None]="",a[t.PipsType.NoValue]=o.cssClasses.markerNormal,a[t.PipsType.LargeValue]=o.cssClasses.markerLarge,a[t.PipsType.SmallValue]=o.cssClasses.markerSub,a),h=[o.cssClasses.valueHorizontal,o.cssClasses.valueVertical],d=[o.cssClasses.markerHorizontal,o.cssClasses.markerVertical];function p(t,e){var n=e===o.cssClasses.value,i=n?l:c;return e+" "+(n?h:d)[o.ort]+" "+i[t]}return u(s,o.cssClasses.pips),u(s,0===o.ort?o.cssClasses.pipsHorizontal:o.cssClasses.pipsVertical),Object.keys(e).forEach((function(r){!function(e,r,a){if((a=n?n(r,a):a)!==t.PipsType.None){var l=R(s,!1);l.className=p(a,o.cssClasses.marker),l.style[o.style]=e+"%",a>t.PipsType.NoValue&&((l=R(s,!1)).className=p(a,o.cssClasses.value),l.setAttribute("data-value",String(r)),l.style[o.style]=e+"%",l.innerHTML=String(i.to(r)))}}(r,e[r][0],e[r][1])})),s}function q(){m&&(n(m),m=null)}function W(t){q();var e=$(t),n=t.filter,i=t.format||{to:function(t){return String(Math.round(t))}};return m=x.appendChild(H(e,n,i))}function Z(){var t=p.getBoundingClientRect(),e="offset"+["Width","Height"][o.ort];return 0===o.ort?t.width||p[e]:t.height||p[e]}function K(t,e,n,i){var r=function(r){var a,s,l=function(t,e,n){var i=0===t.type.indexOf("touch"),r=0===t.type.indexOf("mouse"),o=0===t.type.indexOf("pointer"),a=0,s=0;if(0===t.type.indexOf("MSPointer")&&(o=!0),"mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(i){var l=function(e){var i=e.target;return i===n||n.contains(i)||t.composed&&t.composedPath().shift()===n};if("touchstart"===t.type){var c=Array.prototype.filter.call(t.touches,l);if(c.length>1)return!1;a=c[0].pageX,s=c[0].pageY}else{var u=Array.prototype.find.call(t.changedTouches,l);if(!u)return!1;a=u.pageX,s=u.pageY}}return e=e||d(D),(r||o)&&(a=t.clientX+e.x,s=t.clientY+e.y),t.pageOffset=e,t.points=[a,s],t.cursor=r||o,t}(r,i.pageOffset,i.target||e);return!!l&&!(B()&&!i.doNotReject)&&(a=x,s=o.cssClasses.tap,!((a.classList?a.classList.contains(s):new RegExp("\\b"+s+"\\b").test(a.className))&&!i.doNotReject))&&!(t===w.start&&void 0!==l.buttons&&l.buttons>1)&&(!i.hover||!l.buttons)&&(S||l.preventDefault(),l.calcPoint=l.points[o.ort],void n(l,i))},a=[];return t.split(" ").forEach((function(t){e.addEventListener(t,r,!!S&&{passive:!0}),a.push([t,r])})),a}function X(t){var e,n,i,r,a,l,c=100*(t-(e=p,n=o.ort,i=e.getBoundingClientRect(),r=e.ownerDocument,a=r.documentElement,l=d(r),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),n?i.top+l.y-a.clientTop:i.left+l.x-a.clientLeft))/Z();return c=s(c),o.dir?100-c:c}function J(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&tt(t,e)}function Q(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return tt(t,e);var n=(o.dir?-1:1)*(t.calcPoint-e.startCalcPoint);ct(n>0,100*n/e.baseSize,e.locations,e.handleNumbers,e.connect)}function tt(t,e){e.handle&&(h(e.handle,o.cssClasses.active),_-=1),e.listeners.forEach((function(t){O.removeEventListener(t[0],t[1])})),0===_&&(h(x,o.cssClasses.drag),ht(),t.cursor&&(L.style.cursor="",L.removeEventListener("selectstart",r))),o.events.smoothSteps&&(e.handleNumbers.forEach((function(t){dt(t,E[t],!0,!0,!1,!1)})),e.handleNumbers.forEach((function(t){at("update",t)}))),e.handleNumbers.forEach((function(t){at("change",t),at("set",t),at("end",t)}))}function et(t,e){if(!e.handleNumbers.some(z)){var n;1===e.handleNumbers.length&&(n=f[e.handleNumbers[0]].children[0],_+=1,u(n,o.cssClasses.active)),t.stopPropagation();var i=[],a=K(w.move,O,Q,{target:t.target,handle:n,connect:e.connect,listeners:i,startCalcPoint:t.calcPoint,baseSize:Z(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:E.slice()}),s=K(w.end,O,tt,{target:t.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:e.handleNumbers}),l=K("mouseout",O,J,{target:t.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:e.handleNumbers});i.push.apply(i,a.concat(s,l)),t.cursor&&(L.style.cursor=getComputedStyle(t.target).cursor,f.length>1&&u(x,o.cssClasses.drag),L.addEventListener("selectstart",r,!1)),e.handleNumbers.forEach((function(t){at("start",t)}))}}function nt(t){t.stopPropagation();var e=X(t.calcPoint),n=function(t){var e=100,n=!1;return f.forEach((function(i,r){if(!z(r)){var o=E[r],a=Math.abs(o-t);(a<e||a<=e&&t>o||100===a&&100===e)&&(n=r,e=a)}})),n}(e);!1!==n&&(o.events.snap||a(x,o.cssClasses.tap,o.animationDuration),dt(n,e,!0,!0),ht(),at("slide",n,!0),at("update",n,!0),o.events.snap?et(t,{handleNumbers:[n]}):(at("change",n,!0),at("set",n,!0)))}function it(t){var e=X(t.calcPoint),n=M.getStep(e),i=M.fromStepping(n);Object.keys(P).forEach((function(t){"hover"===t.split(".")[0]&&P[t].forEach((function(t){t.call(yt,i)}))}))}function rt(t,e){P[t]=P[t]||[],P[t].push(e),"update"===t.split(".")[0]&&f.forEach((function(t,e){at("update",e)}))}function ot(t){var e=t&&t.split(".")[0],n=e?t.substring(e.length):t;Object.keys(P).forEach((function(t){var i=t.split(".")[0],r=t.substring(i.length);e&&e!==i||n&&n!==r||function(t){return t===C||t===k}(r)&&n!==r||delete P[t]}))}function at(t,e,n){Object.keys(P).forEach((function(i){var r=i.split(".")[0];t===r&&P[i].forEach((function(t){t.call(yt,T.map(o.format.to),e,T.slice(),n||!1,E.slice(),yt)}))}))}function st(t,e,n,i,r,a,l){var c;return f.length>1&&!o.events.unconstrained&&(i&&e>0&&(c=M.getAbsoluteDistance(t[e-1],o.margin,!1),n=Math.max(n,c)),r&&e<f.length-1&&(c=M.getAbsoluteDistance(t[e+1],o.margin,!0),n=Math.min(n,c))),f.length>1&&o.limit&&(i&&e>0&&(c=M.getAbsoluteDistance(t[e-1],o.limit,!1),n=Math.min(n,c)),r&&e<f.length-1&&(c=M.getAbsoluteDistance(t[e+1],o.limit,!0),n=Math.max(n,c))),o.padding&&(0===e&&(c=M.getAbsoluteDistance(0,o.padding[0],!1),n=Math.max(n,c)),e===f.length-1&&(c=M.getAbsoluteDistance(100,o.padding[1],!0),n=Math.min(n,c))),l||(n=M.getStep(n)),!((n=s(n))===t[e]&&!a)&&n}function lt(t,e){var n=o.ort;return(n?e:t)+", "+(n?t:e)}function ct(t,e,n,i,r){var a=n.slice(),s=i[0],l=o.events.smoothSteps,c=[!t,t],u=[t,!t];i=i.slice(),t&&i.reverse(),i.length>1?i.forEach((function(t,n){var i=st(a,t,a[t]+e,c[n],u[n],!1,l);!1===i?e=0:(e=i-a[t],a[t]=i)})):c=u=[!0];var h=!1;i.forEach((function(t,i){h=dt(t,n[t]+e,c[i],u[i],!1,l)||h})),h&&(i.forEach((function(t){at("update",t),at("slide",t)})),null!=r&&at("drag",s))}function ut(t,e){return o.dir?100-t-e:t}function ht(){A.forEach((function(t){var e=E[t]>50?-1:1,n=3+(f.length+e*t);f[t].style.zIndex=String(n)}))}function dt(t,e,n,i,r,a){return r||(e=st(E,t,e,n,i,!1,a)),!1!==e&&(function(t,e){E[t]=e,T[t]=M.fromStepping(e);var n="translate("+lt(ut(e,0)-I+"%","0")+")";f[t].style[o.transformRule]=n,pt(t),pt(t+1)}(t,e),!0)}function pt(t){if(g[t]){var e=0,n=100;0!==t&&(e=E[t-1]),t!==g.length-1&&(n=E[t]);var i=n-e,r="translate("+lt(ut(e,i)+"%","0")+")",a="scale("+lt(i/100,"1")+")";g[t].style[o.transformRule]=r+" "+a}}function ft(t,e){return null===t||!1===t||void 0===t?E[e]:("number"==typeof t&&(t=String(t)),!1!==(t=o.format.from(t))&&(t=M.toStepping(t)),!1===t||isNaN(t)?E[e]:t)}function gt(t,e,n){var i=l(t),r=void 0===E[0];e=void 0===e||e,o.animate&&!r&&a(x,o.cssClasses.tap,o.animationDuration),A.forEach((function(t){dt(t,ft(i[t],t),!0,!1,n)}));var s=1===A.length?0:1;if(r&&M.hasNoSize()&&(n=!0,E[0]=0,A.length>1)){var c=100/(A.length-1);A.forEach((function(t){E[t]=t*c}))}for(;s<A.length;++s)A.forEach((function(t){dt(t,E[t],!0,!0,n)}));ht(),A.forEach((function(t){at("update",t),null!==i[t]&&e&&at("set",t)}))}function mt(t){if(void 0===t&&(t=!1),t)return 1===T.length?T[0]:T.slice(0);var e=T.map(o.format.to);return 1===e.length?e[0]:e}function vt(t){var e=E[t],n=M.getNearbySteps(e),i=T[t],r=n.thisStep.step,a=null;if(o.snap)return[i-n.stepBefore.startValue||null,n.stepAfter.startValue-i||null];!1!==r&&i+r>n.stepAfter.startValue&&(r=n.stepAfter.startValue-i),a=i>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&i-n.stepBefore.highestStep,100===e?r=null:0===e&&(a=null);var s=M.countStepDecimals();return null!==r&&!1!==r&&(r=Number(r.toFixed(s))),null!==a&&!1!==a&&(a=Number(a.toFixed(s))),[a,r]}u(b=x,o.cssClasses.target),0===o.dir?u(b,o.cssClasses.ltr):u(b,o.cssClasses.rtl),0===o.ort?u(b,o.cssClasses.horizontal):u(b,o.cssClasses.vertical),u(b,"rtl"===getComputedStyle(b).direction?o.cssClasses.textDirectionRtl:o.cssClasses.textDirectionLtr),p=R(b,o.cssClasses.base),function(t,e){var n=R(e,o.cssClasses.connects);f=[],(g=[]).push(N(n,t[0]));for(var i=0;i<o.handles;i++)f.push(V(e,i)),A[i]=i,g.push(N(n,t[i+1]))}(o.connect,p),(y=o.events).fixed||f.forEach((function(t,e){K(w.start,t.children[0],et,{handleNumbers:[e]})})),y.tap&&K(w.start,p,nt,{}),y.hover&&K(w.move,p,it,{hover:!0}),y.drag&&g.forEach((function(t,e){if(!1!==t&&0!==e&&e!==g.length-1){var n=f[e-1],i=f[e],r=[t],a=[n,i],s=[e-1,e];u(t,o.cssClasses.draggable),y.fixed&&(r.push(n.children[0]),r.push(i.children[0])),y.dragAll&&(a=f,s=A),r.forEach((function(e){K(w.start,e,et,{handles:a,handleNumbers:s,connect:t})}))}})),gt(o.start),o.pips&&W(o.pips),o.tooltips&&U(),ot("update"+C),rt("update"+C,(function(t,e,n,i,r){A.forEach((function(t){var e=f[t],i=st(E,t,0,!0,!0,!0),a=st(E,t,100,!0,!0,!0),s=r[t],l=String(o.ariaFormat.to(n[t]));i=M.fromStepping(i).toFixed(1),a=M.fromStepping(a).toFixed(1),s=M.fromStepping(s).toFixed(1),e.children[0].setAttribute("aria-valuemin",i),e.children[0].setAttribute("aria-valuemax",a),e.children[0].setAttribute("aria-valuenow",s),e.children[0].setAttribute("aria-valuetext",l)}))}));var yt={destroy:function(){for(ot(C),ot(k),Object.keys(o.cssClasses).forEach((function(t){h(x,o.cssClasses[t])}));x.firstChild;)x.removeChild(x.firstChild);delete x.noUiSlider},steps:function(){return A.map(vt)},on:rt,off:ot,get:mt,set:gt,setHandle:function(t,e,n,i){if(!((t=Number(t))>=0&&t<A.length))throw new Error("noUiSlider: invalid handle number, got: "+t);dt(t,ft(e,t),!0,!0,i),at("update",t),n&&at("set",t)},reset:function(t){gt(o.start,t)},__moveHandles:function(t,e,n){ct(t,e,E,n)},options:c,updateOptions:function(t,e){var n=mt(),r=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];r.forEach((function(e){void 0!==t[e]&&(c[e]=t[e])}));var a=Y(c);r.forEach((function(e){void 0!==t[e]&&(o[e]=a[e])})),M=a.spectrum,o.margin=a.margin,o.limit=a.limit,o.padding=a.padding,o.pips?W(o.pips):q(),o.tooltips?U():j(),E=[],gt(i(t.start)?t.start:n,e)},target:x,removePips:q,removeTooltips:j,getPositions:function(){return E.slice()},getTooltips:function(){return v},getOrigins:function(){return f},pips:W};return yt}function X(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=K(t,Y(e),e);return t.noUiSlider=n,n}var J={__spectrum:w,cssClasses:x,create:X};t.create=X,t.cssClasses=x,t.default=J,Object.defineProperty(t,"__esModule",{value:!0})}(e)},90077:(t,e,n)=>{"use strict";n.d(e,{B9:()=>o,FK:()=>l,FV:()=>a,Qk:()=>s,TR:()=>p,VM:()=>u,tT:()=>f});var i=n(7728);function r(t){return(0,i.nF)(t,i._4)}function o(t){return t.length<3?0:Math.abs((0,i.cz)(t.map((function(e,n){var i=t[n+1]||t[0];return e[0]*i[1]-i[0]*e[1]}))))/2}function a(t,e){var n=e.width,i=e.height,r=e.left,o=e.top,a=s(t),l=a.minX,c=a.minY,u=a.maxX,h=a.maxY,d=n/(u-l),p=i/(h-c);return t.map((function(t){return[r+(t[0]-l)*d,o+(t[1]-c)*p]}))}function s(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function l(t,e,n){var o=t[0],a=t[1],l=s(e),p=l.minX,f=l.maxX,g=[[p,a],[f,a]],m=c(g[0],g[1]),v=d(e),y=[];if(v.forEach((function(e){var n,i=c(e[0],e[1]),o=e[0];n=i,m.every((function(t,e){return 0===r(t-n[e])}))?y.push({pos:t,line:e,type:"line"}):h(u(m,i),[g,e]).forEach((function(t){e.some((function(e){return i=t,!r((n=e)[0]-i[0])&&!r(n[1]-i[1]);var n,i}))?y.push({pos:t,line:e,type:"point"}):0!==r(o[1]-a)&&y.push({pos:t,line:e,type:"intersection"})}))})),!n&&(0,i.I6)(y,(function(t){return t[0]===o})))return!0;var b=0,w={};return y.forEach((function(t){var e=t.pos,n=t.type,r=t.line;if(!(e[0]>o))if("intersection"===n)++b;else{if("line"===n)return;if("point"===n){var s=(0,i.I6)(r,(function(t){return t[1]!==a})),l=w[e[0]],c=s[1]>a?1:-1;l?l!==c&&++b:w[e[0]]=c}}})),b%2==1}function c(t,e){var n=t[0],r=t[1],o=e[0]-n,a=e[1]-r;Math.abs(o)<i._4&&(o=0),Math.abs(a)<i._4&&(a=0);var s=0,l=0,c=0;return o?a?(l=1,c=-(s=-a/o)*n-r):(l=1,c=-r):a&&(s=-1,c=n),[s,l,c]}function u(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],a=e[1],s=e[2],l=0===n&&0===o,c=0===i&&0===a,u=[];if(l&&c)return[];if(l){var h=-r/i;return h!==-s/a?[]:[[-1/0,h],[1/0,h]]}if(c){var d=-r/n;return d!==-s/o?[]:[[d,-1/0],[d,1/0]]}if(0===n)u=[[p=-(a*(f=-r/i)+s)/o,f]];else if(0===o)u=[[p=-(i*(f=-s/a)+r)/n,f]];else if(0===i)u=[[p=-r/n,f=-(o*p+s)/a]];else if(0===a)u=[[p=-s/o,f=-(n*p+r)/i]];else{var p,f;u=[[p=(i*s-a*r)/(a*n-i*o),f=-(n*p+r)/i]]}return u.map((function(t){return[t[0],t[1]]}))}function h(t,e){var n=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))})),i=[];if(2===t.length){var o=t[0],a=o[0],s=o[1];if(r(a-t[1][0])){if(!r(s-t[1][1])){var l=Math.max.apply(Math,n.map((function(t){return t[0][0]}))),c=Math.min.apply(Math,n.map((function(t){return t[0][1]})));if(r(l-c)>0)return[];i=[[l,s],[c,s]]}}else{var u=Math.max.apply(Math,n.map((function(t){return t[1][0]}))),h=Math.min.apply(Math,n.map((function(t){return t[1][1]})));if(r(u-h)>0)return[];i=[[a,u],[a,h]]}}return i.length||(i=t.filter((function(t){var e=t[0],i=t[1];return n.every((function(t){return 0<=r(e-t[0][0])&&0<=r(t[0][1]-e)&&0<=r(i-t[1][0])&&0<=r(t[1][1]-i)}))}))),i.map((function(t){return[r(t[0]),r(t[1])]}))}function d(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(t.slice(1),[t[0]]).map((function(e,n){return[t[n],e]}))}function p(t,e){return function(t,e){var n=t.slice(),r=e.slice();-1===(0,i.rB)(n)&&n.reverse(),-1===(0,i.rB)(r)&&r.reverse();var o=d(n),a=d(r),s=o.map((function(t){return c(t[0],t[1])})),p=a.map((function(t){return c(t[0],t[1])})),f=[];s.forEach((function(t,e){var n=o[e],s=[];p.forEach((function(i,r){var o=h(u(t,i),[n,a[r]]);s.push.apply(s,o.map((function(t){return{index1:e,index2:r,pos:t,type:"intersection"}})))})),s.sort((function(t,e){return(0,i.l$)(n[0],t.pos)-(0,i.l$)(n[0],e.pos)})),f.push.apply(f,s),l(n[1],r)&&f.push({index1:e,index2:-1,pos:n[1],type:"inside"})})),a.forEach((function(t,e){if(l(t[1],n)){var r=!1,o=(0,i.SL)(f,(function(t){return t.index2===e?(r=!0,!1):!!r}));-1===o&&(r=!1,o=(0,i.SL)(f,(function(t){var n=t.index1,i=t.index2;return-1===n&&i+1===e?(r=!0,!1):!!r}))),-1===o?f.push({index1:-1,index2:e,pos:t[1],type:"inside"}):f.splice(o,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}));var g={};return f.filter((function(t){var e=t.pos,n=e[0]+"x"+e[1];return!g[n]&&(g[n]=!0,!0)}))}(t,e).map((function(t){return t.pos}))}function f(t,e){return o(p(t,e))}},35157:(t,e,n)=>{"use strict";t.exports=n(76675)},3940:(t,e,n)=>{"use strict";const i=n(18862),r="\\\\/",o=`[^${r}]`,a="\\.",s="\\/",l="[^/]",c=`(?:${s}|$)`,u=`(?:^|${s})`,h=`${a}{1,2}${c}`,d={DOT_LITERAL:a,PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:s,ONE_CHAR:"(?=.)",QMARK:l,END_ANCHOR:c,DOTS_SLASH:h,NO_DOT:`(?!${a})`,NO_DOTS:`(?!${u}${h})`,NO_DOT_SLASH:`(?!${a}{0,1}${c})`,NO_DOTS_SLASH:`(?!${h})`,QMARK_NO_DOT:`[^.${s}]`,STAR:`${l}*?`,START_ANCHOR:u},p={...d,SLASH_LITERAL:`[${r}]`,QMARK:o,STAR:`${o}*?`,DOTS_SLASH:`${a}{1,2}(?:[${r}]|$)`,NO_DOT:`(?!${a})`,NO_DOTS:`(?!(?:^|[${r}])${a}{1,2}(?:[${r}]|$))`,NO_DOT_SLASH:`(?!${a}{0,1}(?:[${r}]|$))`,NO_DOTS_SLASH:`(?!${a}{1,2}(?:[${r}]|$))`,QMARK_NO_DOT:`[^.${r}]`,START_ANCHOR:`(?:^|[${r}])`,END_ANCHOR:`(?:[${r}]|$)`};t.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:i.sep,extglobChars:t=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:t=>!0===t?p:d}},51154:(t,e,n)=>{"use strict";const i=n(3940),r=n(80280),{MAX_LENGTH:o,POSIX_REGEX_SOURCE:a,REGEX_NON_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_BACKREF:l,REPLACEMENTS:c}=i,u=(t,e)=>{if("function"==typeof e.expandRange)return e.expandRange(...t,e);t.sort();const n=`[${t.join("-")}]`;try{new RegExp(n)}catch(e){return t.map((t=>r.escapeRegex(t))).join("..")}return n},h=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,d=(t,e)=>{if("string"!=typeof t)throw new TypeError("Expected a string");t=c[t]||t;const n={...e},p="number"==typeof n.maxLength?Math.min(o,n.maxLength):o;let f=t.length;if(f>p)throw new SyntaxError(`Input length: ${f}, exceeds maximum allowed length: ${p}`);const g={type:"bos",value:"",output:n.prepend||""},m=[g],v=n.capture?"":"?:",y=r.isWindows(e),b=i.globChars(y),w=i.extglobChars(b),{DOT_LITERAL:S,PLUS_LITERAL:x,SLASH_LITERAL:k,ONE_CHAR:C,DOTS_SLASH:M,NO_DOT:T,NO_DOT_SLASH:E,NO_DOTS_SLASH:A,QMARK:_,QMARK_NO_DOT:P,STAR:D,START_ANCHOR:O}=b,L=t=>`(${v}(?:(?!${O}${t.dot?M:S}).)*?)`,I=n.dot?"":T,R=n.dot?_:P;let V=!0===n.bash?L(n):D;n.capture&&(V=`(${V})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const N={input:t,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:m};t=r.removePrefix(t,N),f=t.length;const F=[],B=[],z=[];let j,U=g;const G=()=>N.index===f-1,$=N.peek=(e=1)=>t[N.index+e],H=N.advance=()=>t[++N.index]||"",q=()=>t.slice(N.index+1),W=(t="",e=0)=>{N.consumed+=t,N.index+=e},Z=t=>{N.output+=null!=t.output?t.output:t.value,W(t.value)},Y=()=>{let t=1;for(;"!"===$()&&("("!==$(2)||"?"===$(3));)H(),N.start++,t++;return t%2!=0&&(N.negated=!0,N.start++,!0)},K=t=>{N[t]++,z.push(t)},X=t=>{N[t]--,z.pop()},J=t=>{if("globstar"===U.type){const e=N.braces>0&&("comma"===t.type||"brace"===t.type),n=!0===t.extglob||F.length&&("pipe"===t.type||"paren"===t.type);"slash"===t.type||"paren"===t.type||e||n||(N.output=N.output.slice(0,-U.output.length),U.type="star",U.value="*",U.output=V,N.output+=U.output)}if(F.length&&"paren"!==t.type&&(F[F.length-1].inner+=t.value),(t.value||t.output)&&Z(t),U&&"text"===U.type&&"text"===t.type)return U.value+=t.value,void(U.output=(U.output||"")+t.value);t.prev=U,m.push(t),U=t},Q=(t,e)=>{const i={...w[e],conditions:1,inner:""};i.prev=U,i.parens=N.parens,i.output=N.output;const r=(n.capture?"(":"")+i.open;K("parens"),J({type:t,value:e,output:N.output?"":C}),J({type:"paren",extglob:!0,value:H(),output:r}),F.push(i)},tt=t=>{let i,r=t.close+(n.capture?")":"");if("negate"===t.type){let o=V;if(t.inner&&t.inner.length>1&&t.inner.includes("/")&&(o=L(n)),(o!==V||G()||/^\)+$/.test(q()))&&(r=t.close=`)$))${o}`),t.inner.includes("*")&&(i=q())&&/^\.[^\\/.]+$/.test(i)){const n=d(i,{...e,fastpaths:!1}).output;r=t.close=`)${n})${o})`}"bos"===t.prev.type&&(N.negatedExtglob=!0)}J({type:"paren",extglob:!0,value:j,output:r}),X("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(t)){let i=!1,o=t.replace(l,((t,e,n,r,o,a)=>"\\"===r?(i=!0,t):"?"===r?e?e+r+(o?_.repeat(o.length):""):0===a?R+(o?_.repeat(o.length):""):_.repeat(n.length):"."===r?S.repeat(n.length):"*"===r?e?e+r+(o?V:""):V:e?t:`\\${t}`));return!0===i&&(o=!0===n.unescape?o.replace(/\\/g,""):o.replace(/\\+/g,(t=>t.length%2==0?"\\\\":t?"\\":""))),o===t&&!0===n.contains?(N.output=t,N):(N.output=r.wrapOutput(o,N,e),N)}for(;!G();){if(j=H(),"\0"===j)continue;if("\\"===j){const t=$();if("/"===t&&!0!==n.bash)continue;if("."===t||";"===t)continue;if(!t){j+="\\",J({type:"text",value:j});continue}const e=/^\\+/.exec(q());let i=0;if(e&&e[0].length>2&&(i=e[0].length,N.index+=i,i%2!=0&&(j+="\\")),!0===n.unescape?j=H():j+=H(),0===N.brackets){J({type:"text",value:j});continue}}if(N.brackets>0&&("]"!==j||"["===U.value||"[^"===U.value)){if(!1!==n.posix&&":"===j){const t=U.value.slice(1);if(t.includes("[")&&(U.posix=!0,t.includes(":"))){const t=U.value.lastIndexOf("["),e=U.value.slice(0,t),n=U.value.slice(t+2),i=a[n];if(i){U.value=e+i,N.backtrack=!0,H(),g.output||1!==m.indexOf(U)||(g.output=C);continue}}}("["===j&&":"!==$()||"-"===j&&"]"===$())&&(j=`\\${j}`),"]"!==j||"["!==U.value&&"[^"!==U.value||(j=`\\${j}`),!0===n.posix&&"!"===j&&"["===U.value&&(j="^"),U.value+=j,Z({value:j});continue}if(1===N.quotes&&'"'!==j){j=r.escapeRegex(j),U.value+=j,Z({value:j});continue}if('"'===j){N.quotes=1===N.quotes?0:1,!0===n.keepQuotes&&J({type:"text",value:j});continue}if("("===j){K("parens"),J({type:"paren",value:j});continue}if(")"===j){if(0===N.parens&&!0===n.strictBrackets)throw new SyntaxError(h("opening","("));const t=F[F.length-1];if(t&&N.parens===t.parens+1){tt(F.pop());continue}J({type:"paren",value:j,output:N.parens?")":"\\)"}),X("parens");continue}if("["===j){if(!0!==n.nobracket&&q().includes("]"))K("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(h("closing","]"));j=`\\${j}`}J({type:"bracket",value:j});continue}if("]"===j){if(!0===n.nobracket||U&&"bracket"===U.type&&1===U.value.length){J({type:"text",value:j,output:`\\${j}`});continue}if(0===N.brackets){if(!0===n.strictBrackets)throw new SyntaxError(h("opening","["));J({type:"text",value:j,output:`\\${j}`});continue}X("brackets");const t=U.value.slice(1);if(!0===U.posix||"^"!==t[0]||t.includes("/")||(j=`/${j}`),U.value+=j,Z({value:j}),!1===n.literalBrackets||r.hasRegexChars(t))continue;const e=r.escapeRegex(U.value);if(N.output=N.output.slice(0,-U.value.length),!0===n.literalBrackets){N.output+=e,U.value=e;continue}U.value=`(${v}${e}|${U.value})`,N.output+=U.value;continue}if("{"===j&&!0!==n.nobrace){K("braces");const t={type:"brace",value:j,output:"(",outputIndex:N.output.length,tokensIndex:N.tokens.length};B.push(t),J(t);continue}if("}"===j){const t=B[B.length-1];if(!0===n.nobrace||!t){J({type:"text",value:j,output:j});continue}let e=")";if(!0===t.dots){const t=m.slice(),i=[];for(let e=t.length-1;e>=0&&(m.pop(),"brace"!==t[e].type);e--)"dots"!==t[e].type&&i.unshift(t[e].value);e=u(i,n),N.backtrack=!0}if(!0!==t.comma&&!0!==t.dots){const n=N.output.slice(0,t.outputIndex),i=N.tokens.slice(t.tokensIndex);t.value=t.output="\\{",j=e="\\}",N.output=n;for(const t of i)N.output+=t.output||t.value}J({type:"brace",value:j,output:e}),X("braces"),B.pop();continue}if("|"===j){F.length>0&&F[F.length-1].conditions++,J({type:"text",value:j});continue}if(","===j){let t=j;const e=B[B.length-1];e&&"braces"===z[z.length-1]&&(e.comma=!0,t="|"),J({type:"comma",value:j,output:t});continue}if("/"===j){if("dot"===U.type&&N.index===N.start+1){N.start=N.index+1,N.consumed="",N.output="",m.pop(),U=g;continue}J({type:"slash",value:j,output:k});continue}if("."===j){if(N.braces>0&&"dot"===U.type){"."===U.value&&(U.output=S);const t=B[B.length-1];U.type="dots",U.output+=j,U.value+=j,t.dots=!0;continue}if(N.braces+N.parens===0&&"bos"!==U.type&&"slash"!==U.type){J({type:"text",value:j,output:S});continue}J({type:"dot",value:j,output:S});continue}if("?"===j){if((!U||"("!==U.value)&&!0!==n.noextglob&&"("===$()&&"?"!==$(2)){Q("qmark",j);continue}if(U&&"paren"===U.type){const t=$();let e=j;if("<"===t&&!r.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===U.value&&!/[!=<:]/.test(t)||"<"===t&&!/<([!=]|\w+>)/.test(q()))&&(e=`\\${j}`),J({type:"text",value:j,output:e});continue}if(!0!==n.dot&&("slash"===U.type||"bos"===U.type)){J({type:"qmark",value:j,output:P});continue}J({type:"qmark",value:j,output:_});continue}if("!"===j){if(!0!==n.noextglob&&"("===$()&&("?"!==$(2)||!/[!=<:]/.test($(3)))){Q("negate",j);continue}if(!0!==n.nonegate&&0===N.index){Y();continue}}if("+"===j){if(!0!==n.noextglob&&"("===$()&&"?"!==$(2)){Q("plus",j);continue}if(U&&"("===U.value||!1===n.regex){J({type:"plus",value:j,output:x});continue}if(U&&("bracket"===U.type||"paren"===U.type||"brace"===U.type)||N.parens>0){J({type:"plus",value:j});continue}J({type:"plus",value:x});continue}if("@"===j){if(!0!==n.noextglob&&"("===$()&&"?"!==$(2)){J({type:"at",extglob:!0,value:j,output:""});continue}J({type:"text",value:j});continue}if("*"!==j){"$"!==j&&"^"!==j||(j=`\\${j}`);const t=s.exec(q());t&&(j+=t[0],N.index+=t[0].length),J({type:"text",value:j});continue}if(U&&("globstar"===U.type||!0===U.star)){U.type="star",U.star=!0,U.value+=j,U.output=V,N.backtrack=!0,N.globstar=!0,W(j);continue}let e=q();if(!0!==n.noextglob&&/^\([^?]/.test(e)){Q("star",j);continue}if("star"===U.type){if(!0===n.noglobstar){W(j);continue}const i=U.prev,r=i.prev,o="slash"===i.type||"bos"===i.type,a=r&&("star"===r.type||"globstar"===r.type);if(!0===n.bash&&(!o||e[0]&&"/"!==e[0])){J({type:"star",value:j,output:""});continue}const s=N.braces>0&&("comma"===i.type||"brace"===i.type),l=F.length&&("pipe"===i.type||"paren"===i.type);if(!o&&"paren"!==i.type&&!s&&!l){J({type:"star",value:j,output:""});continue}for(;"/**"===e.slice(0,3);){const n=t[N.index+4];if(n&&"/"!==n)break;e=e.slice(3),W("/**",3)}if("bos"===i.type&&G()){U.type="globstar",U.value+=j,U.output=L(n),N.output=U.output,N.globstar=!0,W(j);continue}if("slash"===i.type&&"bos"!==i.prev.type&&!a&&G()){N.output=N.output.slice(0,-(i.output+U.output).length),i.output=`(?:${i.output}`,U.type="globstar",U.output=L(n)+(n.strictSlashes?")":"|$)"),U.value+=j,N.globstar=!0,N.output+=i.output+U.output,W(j);continue}if("slash"===i.type&&"bos"!==i.prev.type&&"/"===e[0]){const t=void 0!==e[1]?"|$":"";N.output=N.output.slice(0,-(i.output+U.output).length),i.output=`(?:${i.output}`,U.type="globstar",U.output=`${L(n)}${k}|${k}${t})`,U.value+=j,N.output+=i.output+U.output,N.globstar=!0,W(j+H()),J({type:"slash",value:"/",output:""});continue}if("bos"===i.type&&"/"===e[0]){U.type="globstar",U.value+=j,U.output=`(?:^|${k}|${L(n)}${k})`,N.output=U.output,N.globstar=!0,W(j+H()),J({type:"slash",value:"/",output:""});continue}N.output=N.output.slice(0,-U.output.length),U.type="globstar",U.output=L(n),U.value+=j,N.output+=U.output,N.globstar=!0,W(j);continue}const i={type:"star",value:j,output:V};!0!==n.bash?!U||"bracket"!==U.type&&"paren"!==U.type||!0!==n.regex?(N.index!==N.start&&"slash"!==U.type&&"dot"!==U.type||("dot"===U.type?(N.output+=E,U.output+=E):!0===n.dot?(N.output+=A,U.output+=A):(N.output+=I,U.output+=I),"*"!==$()&&(N.output+=C,U.output+=C)),J(i)):(i.output=j,J(i)):(i.output=".*?","bos"!==U.type&&"slash"!==U.type||(i.output=I+i.output),J(i))}for(;N.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(h("closing","]"));N.output=r.escapeLast(N.output,"["),X("brackets")}for(;N.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(h("closing",")"));N.output=r.escapeLast(N.output,"("),X("parens")}for(;N.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(h("closing","}"));N.output=r.escapeLast(N.output,"{"),X("braces")}if(!0===n.strictSlashes||"star"!==U.type&&"bracket"!==U.type||J({type:"maybe_slash",value:"",output:`${k}?`}),!0===N.backtrack){N.output="";for(const t of N.tokens)N.output+=null!=t.output?t.output:t.value,t.suffix&&(N.output+=t.suffix)}return N};d.fastpaths=(t,e)=>{const n={...e},a="number"==typeof n.maxLength?Math.min(o,n.maxLength):o,s=t.length;if(s>a)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${a}`);t=c[t]||t;const l=r.isWindows(e),{DOT_LITERAL:u,SLASH_LITERAL:h,ONE_CHAR:d,DOTS_SLASH:p,NO_DOT:f,NO_DOTS:g,NO_DOTS_SLASH:m,STAR:v,START_ANCHOR:y}=i.globChars(l),b=n.dot?g:f,w=n.dot?m:f,S=n.capture?"":"?:";let x=!0===n.bash?".*?":v;n.capture&&(x=`(${x})`);const k=t=>!0===t.noglobstar?x:`(${S}(?:(?!${y}${t.dot?p:u}).)*?)`,C=t=>{switch(t){case"*":return`${b}${d}${x}`;case".*":return`${u}${d}${x}`;case"*.*":return`${b}${x}${u}${d}${x}`;case"*/*":return`${b}${x}${h}${d}${w}${x}`;case"**":return b+k(n);case"**/*":return`(?:${b}${k(n)}${h})?${w}${d}${x}`;case"**/*.*":return`(?:${b}${k(n)}${h})?${w}${x}${u}${d}${x}`;case"**/.*":return`(?:${b}${k(n)}${h})?${u}${d}${x}`;default:{const e=/^(.*?)\.(\w+)$/.exec(t);if(!e)return;const n=C(e[1]);if(!n)return;return n+u+e[2]}}},M=r.removePrefix(t,{negated:!1,prefix:""});let T=C(M);return T&&!0!==n.strictSlashes&&(T+=`${h}?`),T},t.exports=d},76675:(t,e,n)=>{"use strict";const i=n(18862),r=n(82608),o=n(51154),a=n(80280),s=n(3940),l=(t,e,n=!1)=>{if(Array.isArray(t)){const i=t.map((t=>l(t,e,n))),r=t=>{for(const e of i){const n=e(t);if(n)return n}return!1};return r}const i=(r=t)&&"object"==typeof r&&!Array.isArray(r)&&t.tokens&&t.input;var r;if(""===t||"string"!=typeof t&&!i)throw new TypeError("Expected pattern to be a non-empty string");const o=e||{},s=a.isWindows(e),c=i?l.compileRe(t,e):l.makeRe(t,e,!1,!0),u=c.state;delete c.state;let h=()=>!1;if(o.ignore){const t={...e,ignore:null,onMatch:null,onResult:null};h=l(o.ignore,t,n)}const d=(n,i=!1)=>{const{isMatch:r,match:a,output:d}=l.test(n,c,e,{glob:t,posix:s}),p={glob:t,state:u,regex:c,posix:s,input:n,output:d,match:a,isMatch:r};return"function"==typeof o.onResult&&o.onResult(p),!1===r?(p.isMatch=!1,!!i&&p):h(n)?("function"==typeof o.onIgnore&&o.onIgnore(p),p.isMatch=!1,!!i&&p):("function"==typeof o.onMatch&&o.onMatch(p),!i||p)};return n&&(d.state=u),d};l.test=(t,e,n,{glob:i,posix:r}={})=>{if("string"!=typeof t)throw new TypeError("Expected input to be a string");if(""===t)return{isMatch:!1,output:""};const o=n||{},s=o.format||(r?a.toPosixSlashes:null);let c=t===i,u=c&&s?s(t):t;return!1===c&&(u=s?s(t):t,c=u===i),!1!==c&&!0!==o.capture||(c=!0===o.matchBase||!0===o.basename?l.matchBase(t,e,n,r):e.exec(u)),{isMatch:Boolean(c),match:c,output:u}},l.matchBase=(t,e,n,r=a.isWindows(n))=>(e instanceof RegExp?e:l.makeRe(e,n)).test(i.basename(t)),l.isMatch=(t,e,n)=>l(e,n)(t),l.parse=(t,e)=>Array.isArray(t)?t.map((t=>l.parse(t,e))):o(t,{...e,fastpaths:!1}),l.scan=(t,e)=>r(t,e),l.compileRe=(t,e,n=!1,i=!1)=>{if(!0===n)return t.output;const r=e||{},o=r.contains?"":"^",a=r.contains?"":"$";let s=`${o}(?:${t.output})${a}`;t&&!0===t.negated&&(s=`^(?!${s}).*$`);const c=l.toRegex(s,e);return!0===i&&(c.state=t),c},l.makeRe=(t,e={},n=!1,i=!1)=>{if(!t||"string"!=typeof t)throw new TypeError("Expected a non-empty string");let r={negated:!1,fastpaths:!0};return!1===e.fastpaths||"."!==t[0]&&"*"!==t[0]||(r.output=o.fastpaths(t,e)),r.output||(r=o(t,e)),l.compileRe(r,e,n,i)},l.toRegex=(t,e)=>{try{const n=e||{};return new RegExp(t,n.flags||(n.nocase?"i":""))}catch(t){if(e&&!0===e.debug)throw t;return/$^/}},l.constants=s,t.exports=l},82608:(t,e,n)=>{"use strict";const i=n(80280),{CHAR_ASTERISK:r,CHAR_AT:o,CHAR_BACKWARD_SLASH:a,CHAR_COMMA:s,CHAR_DOT:l,CHAR_EXCLAMATION_MARK:c,CHAR_FORWARD_SLASH:u,CHAR_LEFT_CURLY_BRACE:h,CHAR_LEFT_PARENTHESES:d,CHAR_LEFT_SQUARE_BRACKET:p,CHAR_PLUS:f,CHAR_QUESTION_MARK:g,CHAR_RIGHT_CURLY_BRACE:m,CHAR_RIGHT_PARENTHESES:v,CHAR_RIGHT_SQUARE_BRACKET:y}=n(3940),b=t=>t===u||t===a,w=t=>{!0!==t.isPrefix&&(t.depth=t.isGlobstar?1/0:1)};t.exports=(t,e)=>{const n=e||{},S=t.length-1,x=!0===n.parts||!0===n.scanToEnd,k=[],C=[],M=[];let T,E,A=t,_=-1,P=0,D=0,O=!1,L=!1,I=!1,R=!1,V=!1,N=!1,F=!1,B=!1,z=!1,j=!1,U=0,G={value:"",depth:0,isGlob:!1};const $=()=>_>=S,H=()=>(T=E,A.charCodeAt(++_));for(;_<S;){let t;if(E=H(),E!==a){if(!0===N||E===h){for(U++;!0!==$()&&(E=H());)if(E!==a)if(E!==h){if(!0!==N&&E===l&&(E=H())===l){if(O=G.isBrace=!0,I=G.isGlob=!0,j=!0,!0===x)continue;break}if(!0!==N&&E===s){if(O=G.isBrace=!0,I=G.isGlob=!0,j=!0,!0===x)continue;break}if(E===m&&(U--,0===U)){N=!1,O=G.isBrace=!0,j=!0;break}}else U++;else F=G.backslashes=!0,H();if(!0===x)continue;break}if(E!==u){if(!0!==n.noext&&!0==(E===f||E===o||E===r||E===g||E===c)&&A.charCodeAt(_+1)===d){if(I=G.isGlob=!0,R=G.isExtglob=!0,j=!0,E===c&&_===P&&(z=!0),!0===x){for(;!0!==$()&&(E=H());)if(E!==a){if(E===v){I=G.isGlob=!0,j=!0;break}}else F=G.backslashes=!0,E=H();continue}break}if(E===r){if(T===r&&(V=G.isGlobstar=!0),I=G.isGlob=!0,j=!0,!0===x)continue;break}if(E===g){if(I=G.isGlob=!0,j=!0,!0===x)continue;break}if(E===p){for(;!0!==$()&&(t=H());)if(t!==a){if(t===y){L=G.isBracket=!0,I=G.isGlob=!0,j=!0;break}}else F=G.backslashes=!0,H();if(!0===x)continue;break}if(!0===n.nonegate||E!==c||_!==P){if(!0!==n.noparen&&E===d){if(I=G.isGlob=!0,!0===x){for(;!0!==$()&&(E=H());)if(E!==d){if(E===v){j=!0;break}}else F=G.backslashes=!0,E=H();continue}break}if(!0===I){if(j=!0,!0===x)continue;break}}else B=G.negated=!0,P++}else{if(k.push(_),C.push(G),G={value:"",depth:0,isGlob:!1},!0===j)continue;if(T===l&&_===P+1){P+=2;continue}D=_+1}}else F=G.backslashes=!0,E=H(),E===h&&(N=!0)}!0===n.noext&&(R=!1,I=!1);let q=A,W="",Z="";P>0&&(W=A.slice(0,P),A=A.slice(P),D-=P),q&&!0===I&&D>0?(q=A.slice(0,D),Z=A.slice(D)):!0===I?(q="",Z=A):q=A,q&&""!==q&&"/"!==q&&q!==A&&b(q.charCodeAt(q.length-1))&&(q=q.slice(0,-1)),!0===n.unescape&&(Z&&(Z=i.removeBackslashes(Z)),q&&!0===F&&(q=i.removeBackslashes(q)));const Y={prefix:W,input:t,start:P,base:q,glob:Z,isBrace:O,isBracket:L,isGlob:I,isExtglob:R,isGlobstar:V,negated:B,negatedExtglob:z};if(!0===n.tokens&&(Y.maxDepth=0,b(E)||C.push(G),Y.tokens=C),!0===n.parts||!0===n.tokens){let e;for(let i=0;i<k.length;i++){const r=e?e+1:P,o=k[i],a=t.slice(r,o);n.tokens&&(0===i&&0!==P?(C[i].isPrefix=!0,C[i].value=W):C[i].value=a,w(C[i]),Y.maxDepth+=C[i].depth),0===i&&""===a||M.push(a),e=o}if(e&&e+1<t.length){const i=t.slice(e+1);M.push(i),n.tokens&&(C[C.length-1].value=i,w(C[C.length-1]),Y.maxDepth+=C[C.length-1].depth)}Y.slashes=k,Y.parts=M}return Y}},80280:(t,e,n)=>{"use strict";var i=n(77419);const r=n(18862),o="win32"===i.platform,{REGEX_BACKSLASH:a,REGEX_REMOVE_BACKSLASH:s,REGEX_SPECIAL_CHARS:l,REGEX_SPECIAL_CHARS_GLOBAL:c}=n(3940);e.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t),e.hasRegexChars=t=>l.test(t),e.isRegexChar=t=>1===t.length&&e.hasRegexChars(t),e.escapeRegex=t=>t.replace(c,"\\$1"),e.toPosixSlashes=t=>t.replace(a,"/"),e.removeBackslashes=t=>t.replace(s,(t=>"\\"===t?"":t)),e.supportsLookbehinds=()=>{const t=i.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},e.isWindows=t=>t&&"boolean"==typeof t.windows?t.windows:!0===o||"\\"===r.sep,e.escapeLast=(t,n,i)=>{const r=t.lastIndexOf(n,i);return-1===r?t:"\\"===t[r-1]?e.escapeLast(t,n,r-1):`${t.slice(0,r)}\\${t.slice(r)}`},e.removePrefix=(t,e={})=>{let n=t;return n.startsWith("./")&&(n=n.slice(2),e.prefix="./"),n},e.wrapOutput=(t,e={},n={})=>{let i=`${n.contains?"":"^"}(?:${t})${n.contains?"":"$"}`;return!0===e.negated&&(i=`(?:^(?!${i}).*$)`),i}},83419:function(t){var e;e=()=>(()=>{var t=[function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CommonErrorCodes=e.BookmarksPlayMode=e.ExportDataType=e.QnaMode=e.PageNavigationPosition=e.BrowserPrintAdjustmentsMode=e.AggregateFunction=e.DataCacheMode=e.CredentialType=e.isPercentOfGrandTotal=e.isColumnAggr=e.isHierarchyLevelAggr=e.isHierarchyLevel=e.isColumn=e.isMeasure=e.getFilterType=e.isBasicFilterWithKeys=e.isFilterKeyColumnsTarget=e.HierarchyIdentityFilter=e.HierarchyFilter=e.AdvancedFilter=e.TupleFilter=e.IdentityFilter=e.BasicFilterWithKeys=e.BasicFilter=e.RelativeTimeFilter=e.RelativeDateFilter=e.TopNFilter=e.IncludeExcludeFilter=e.NotSupportedFilter=e.Filter=e.RelativeDateOperators=e.RelativeDateFilterTimeUnit=e.FilterType=e.FiltersLevel=e.FiltersOperations=e.MenuLocation=e.ContrastMode=e.TokenType=e.ViewMode=e.Permissions=e.SectionVisibility=e.ReportAlignment=e.HyperlinkClickBehavior=e.LayoutType=e.VisualContainerDisplayMode=e.BackgroundType=e.DisplayOption=e.PageSizeType=e.TraceType=void 0,e.validateExportDataRequest=e.validateQnaInterpretInputData=e.validateLoadQnaConfiguration=e.validateSaveAsParameters=e.validateUpdateFiltersRequest=e.validateFilter=e.validatePage=e.validateTileLoad=e.validateDashboardLoad=e.validateQuickCreate=e.validateCreateReport=e.validatePaginatedReportLoad=e.validateReportLoad=e.validateMenuGroupExtension=e.validateExtension=e.validateCustomPageSize=e.validateVisualizationsPane=e.validateSyncSlicersPane=e.validateSelectionPane=e.validatePageNavigationPane=e.validateFieldsPane=e.validateFiltersPane=e.validateBookmarksPane=e.validatePanes=e.validateSettings=e.validateCaptureBookmarkRequest=e.validateApplyBookmarkStateRequest=e.validateApplyBookmarkByNameRequest=e.validateAddBookmarkRequest=e.validatePlayBookmarkRequest=e.validateSlicerState=e.validateSlicer=e.validateVisualSelector=e.isIExtensionArray=e.isIExtensions=e.isGroupedMenuExtension=e.isFlatMenuExtension=e.isReportFiltersArray=e.isOnLoadFilters=e.VisualDataRoleKindPreference=e.VisualDataRoleKind=e.CommandDisplayOption=e.SlicerTargetSelector=e.VisualTypeSelector=e.VisualSelector=e.PageSelector=e.Selector=e.SortDirection=e.LegendPosition=e.TextAlignment=void 0,e.validatePrintSettings=e.validateZoomLevel=e.validateCustomTheme=e.validateCommandsSettings=e.validateVisualSettings=e.validateVisualHeader=void 0;var o,a,s,l,c,u,h,d,p,f,g,m,v,y,b,w,S,x,k,C=n(1);(k=e.TraceType||(e.TraceType={}))[k.Information=0]="Information",k[k.Verbose=1]="Verbose",k[k.Warning=2]="Warning",k[k.Error=3]="Error",k[k.ExpectedError=4]="ExpectedError",k[k.UnexpectedError=5]="UnexpectedError",k[k.Fatal=6]="Fatal",(x=e.PageSizeType||(e.PageSizeType={}))[x.Widescreen=0]="Widescreen",x[x.Standard=1]="Standard",x[x.Cortana=2]="Cortana",x[x.Letter=3]="Letter",x[x.Custom=4]="Custom",x[x.Mobile=5]="Mobile",(S=e.DisplayOption||(e.DisplayOption={}))[S.FitToPage=0]="FitToPage",S[S.FitToWidth=1]="FitToWidth",S[S.ActualSize=2]="ActualSize",(w=e.BackgroundType||(e.BackgroundType={}))[w.Default=0]="Default",w[w.Transparent=1]="Transparent",(b=e.VisualContainerDisplayMode||(e.VisualContainerDisplayMode={}))[b.Visible=0]="Visible",b[b.Hidden=1]="Hidden",(y=e.LayoutType||(e.LayoutType={}))[y.Master=0]="Master",y[y.Custom=1]="Custom",y[y.MobilePortrait=2]="MobilePortrait",y[y.MobileLandscape=3]="MobileLandscape",(v=e.HyperlinkClickBehavior||(e.HyperlinkClickBehavior={}))[v.Navigate=0]="Navigate",v[v.NavigateAndRaiseEvent=1]="NavigateAndRaiseEvent",v[v.RaiseEvent=2]="RaiseEvent",(m=e.ReportAlignment||(e.ReportAlignment={}))[m.Left=0]="Left",m[m.Center=1]="Center",m[m.Right=2]="Right",m[m.None=3]="None",(g=e.SectionVisibility||(e.SectionVisibility={}))[g.AlwaysVisible=0]="AlwaysVisible",g[g.HiddenInViewMode=1]="HiddenInViewMode",(f=e.Permissions||(e.Permissions={}))[f.Read=0]="Read",f[f.ReadWrite=1]="ReadWrite",f[f.Copy=2]="Copy",f[f.Create=4]="Create",f[f.All=7]="All",(p=e.ViewMode||(e.ViewMode={}))[p.View=0]="View",p[p.Edit=1]="Edit",(d=e.TokenType||(e.TokenType={}))[d.Aad=0]="Aad",d[d.Embed=1]="Embed",(h=e.ContrastMode||(e.ContrastMode={}))[h.None=0]="None",h[h.HighContrast1=1]="HighContrast1",h[h.HighContrast2=2]="HighContrast2",h[h.HighContrastBlack=3]="HighContrastBlack",h[h.HighContrastWhite=4]="HighContrastWhite",(u=e.MenuLocation||(e.MenuLocation={}))[u.Bottom=0]="Bottom",u[u.Top=1]="Top",(c=e.FiltersOperations||(e.FiltersOperations={}))[c.RemoveAll=0]="RemoveAll",c[c.ReplaceAll=1]="ReplaceAll",c[c.Add=2]="Add",c[c.Replace=3]="Replace",(l=e.FiltersLevel||(e.FiltersLevel={}))[l.Report=0]="Report",l[l.Page=1]="Page",l[l.Visual=2]="Visual",function(t){t[t.Advanced=0]="Advanced",t[t.Basic=1]="Basic",t[t.Unknown=2]="Unknown",t[t.IncludeExclude=3]="IncludeExclude",t[t.RelativeDate=4]="RelativeDate",t[t.TopN=5]="TopN",t[t.Tuple=6]="Tuple",t[t.RelativeTime=7]="RelativeTime",t[t.Identity=8]="Identity",t[t.Hierarchy=9]="Hierarchy",t[t.HierarchyIdentity=10]="HierarchyIdentity"}(o=e.FilterType||(e.FilterType={})),(s=e.RelativeDateFilterTimeUnit||(e.RelativeDateFilterTimeUnit={}))[s.Days=0]="Days",s[s.Weeks=1]="Weeks",s[s.CalendarWeeks=2]="CalendarWeeks",s[s.Months=3]="Months",s[s.CalendarMonths=4]="CalendarMonths",s[s.Years=5]="Years",s[s.CalendarYears=6]="CalendarYears",s[s.Minutes=7]="Minutes",s[s.Hours=8]="Hours",(a=e.RelativeDateOperators||(e.RelativeDateOperators={}))[a.InLast=0]="InLast",a[a.InThis=1]="InThis",a[a.InNext=2]="InNext";var M=function(){function t(t,e){this.target=t,this.filterType=e}return t.prototype.toJSON=function(){var t={$schema:this.schemaUrl,target:this.target,filterType:this.filterType};return void 0!==this.displaySettings&&(t.displaySettings=this.displaySettings),t},t}();e.Filter=M;var T=function(t){function e(n,i,r){var a=t.call(this,n,o.Unknown)||this;return a.message=i,a.notSupportedTypeName=r,a.schemaUrl=e.schemaUrl,a}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.message=this.message,e.notSupportedTypeName=this.notSupportedTypeName,e},e.schemaUrl="http://powerbi.com/product/schema#notSupported",e}(M);e.NotSupportedFilter=T;var E=function(t){function e(n,i,r){var a=t.call(this,n,o.IncludeExclude)||this;return a.target=n,a.values=r,a.isExclude=i,a.schemaUrl=e.schemaUrl,a}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.isExclude=this.isExclude,e.values=this.values,e},e.schemaUrl="http://powerbi.com/product/schema#includeExclude",e}(M);e.IncludeExcludeFilter=E;var A=function(t){function e(n,i,r,a){var s=t.call(this,n,o.TopN)||this;return s.operator=i,s.itemCount=r,s.schemaUrl=e.schemaUrl,s.orderBy=a,s}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.operator=this.operator,e.itemCount=this.itemCount,e.orderBy=this.orderBy,e},e.schemaUrl="http://powerbi.com/product/schema#topN",e}(M);e.TopNFilter=A;var _=function(t){function e(n,i,r,a,s){var l=t.call(this,n,o.RelativeDate)||this;return l.operator=i,l.timeUnitsCount=r,l.timeUnitType=a,l.includeToday=s,l.schemaUrl=e.schemaUrl,l}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.operator=this.operator,e.timeUnitsCount=this.timeUnitsCount,e.timeUnitType=this.timeUnitType,e.includeToday=this.includeToday,e},e.schemaUrl="http://powerbi.com/product/schema#relativeDate",e}(M);e.RelativeDateFilter=_;var P=function(t){function e(n,i,r,a){var s=t.call(this,n,o.RelativeTime)||this;return s.operator=i,s.timeUnitsCount=r,s.timeUnitType=a,s.schemaUrl=e.schemaUrl,s}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.operator=this.operator,e.timeUnitsCount=this.timeUnitsCount,e.timeUnitType=this.timeUnitType,e},e.schemaUrl="http://powerbi.com/product/schema#relativeTime",e}(M);e.RelativeTimeFilter=P;var D=function(t){function e(n,i){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s=t.call(this,n,o.Basic)||this;if(s.operator=i,s.schemaUrl=e.schemaUrl,0===r.length&&"All"!==i)throw new Error('values must be a non-empty array unless your operator is "All".');return Array.isArray(r[0])?s.values=r[0]:s.values=r,s}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.operator=this.operator,e.values=this.values,e.requireSingleSelection=!!this.requireSingleSelection,e},e.schemaUrl="http://powerbi.com/product/schema#basic",e}(M);e.BasicFilter=D;var O=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i)||this;o.keyValues=r,o.target=e;var a=e.keys?e.keys.length:0;if(a>0&&!r)throw new Error("You should pass the values to be filtered for each key. You passed: no values and ".concat(a," keys"));if(0===a&&r&&r.length>0)throw new Error("You passed key values but your target object doesn't contain the keys to be filtered");for(var s=0,l=o.keyValues;s<l.length;s++){var c=l[s];if(c){var u=c.length;if(u!==a)throw new Error("Each tuple of key values should contain a value for each of the keys. You passed: ".concat(u," values and ").concat(a," keys"))}}return o}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.keyValues=this.keyValues,e},e}(D);e.BasicFilterWithKeys=O;var L=function(t){function e(n,i){var r=t.call(this,n,o.Identity)||this;return r.operator=i,r.schemaUrl=e.schemaUrl,r}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.operator=this.operator,e.target=this.target,e},e.schemaUrl="http://powerbi.com/product/schema#identity",e}(M);e.IdentityFilter=L;var I=function(t){function e(n,i,r){var a=t.call(this,n,o.Tuple)||this;return a.operator=i,a.schemaUrl=e.schemaUrl,a.values=r,a}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.operator=this.operator,e.values=this.values,e.target=this.target,e},e.schemaUrl="http://powerbi.com/product/schema#tuple",e}(M);e.TupleFilter=I;var R=function(t){function e(n,i){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s,l=t.call(this,n,o.Advanced)||this;if(l.schemaUrl=e.schemaUrl,"string"!=typeof i||0===i.length)throw new Error("logicalOperator must be a valid operator, You passed: ".concat(i));if(l.logicalOperator=i,(s=Array.isArray(r[0])?r[0]:r).length>2)throw new Error("AdvancedFilters may not have more than two conditions. You passed: ".concat(r.length));if(1===s.length&&"And"!==i)throw new Error('Logical Operator must be "And" when there is only one condition provided');return l.conditions=s,l}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.logicalOperator=this.logicalOperator,e.conditions=this.conditions,e},e.schemaUrl="http://powerbi.com/product/schema#advanced",e}(M);e.AdvancedFilter=R;var V=function(t){function e(n,i){var r=t.call(this,n,o.Hierarchy)||this;return r.schemaUrl=e.schemaUrl,r.hierarchyData=i,r}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.hierarchyData=this.hierarchyData,e.target=this.target,e},e.schemaUrl="http://powerbi.com/product/schema#hierarchy",e}(M);e.HierarchyFilter=V;var N,F,B,z,j,U,G,$,H,q=function(t){function e(n,i){var r=t.call(this,n,o.HierarchyIdentity)||this;return r.schemaUrl=e.schemaUrl,r.hierarchyData=i,r}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.hierarchyData=this.hierarchyData,e.target=this.target,e},e.schemaUrl="http://powerbi.com/product/schema#hierarchyIdentity",e}(M);function W(t){if(t.filterType)return t.filterType;var e=t,n=t;return"string"==typeof e.operator&&Array.isArray(e.values)?o.Basic:"string"==typeof n.logicalOperator&&Array.isArray(n.conditions)?o.Advanced:o.Unknown}function Z(t){return!(!t.table||!t.column||t.aggregationFunction)}e.HierarchyIdentityFilter=q,e.isFilterKeyColumnsTarget=function(t){return Z(t)&&!!t.keys},e.isBasicFilterWithKeys=function(t){return W(t)===o.Basic&&!!t.keyValues},e.getFilterType=W,e.isMeasure=function(t){return void 0!==t.table&&void 0!==t.measure},e.isColumn=Z,e.isHierarchyLevel=function(t){return!(!(t.table&&t.hierarchy&&t.hierarchyLevel)||t.aggregationFunction)},e.isHierarchyLevelAggr=function(t){return!!(t.table&&t.hierarchy&&t.hierarchyLevel&&t.aggregationFunction)},e.isColumnAggr=function(t){return!!(t.table&&t.column&&t.aggregationFunction)},e.isPercentOfGrandTotal=function(t){return!!t.percentOfGrandTotal},(H=e.CredentialType||(e.CredentialType={}))[H.NoConnection=0]="NoConnection",H[H.OnBehalfOf=1]="OnBehalfOf",H[H.Anonymous=2]="Anonymous",($=e.DataCacheMode||(e.DataCacheMode={}))[$.Import=0]="Import",$[$.DirectQuery=1]="DirectQuery",(G=e.AggregateFunction||(e.AggregateFunction={}))[G.Default=1]="Default",G[G.None=2]="None",G[G.Sum=3]="Sum",G[G.Min=4]="Min",G[G.Max=5]="Max",G[G.Count=6]="Count",G[G.Average=7]="Average",G[G.DistinctCount=8]="DistinctCount",(U=e.BrowserPrintAdjustmentsMode||(e.BrowserPrintAdjustmentsMode={}))[U.Default=0]="Default",U[U.NoAdjustments=1]="NoAdjustments",(j=e.PageNavigationPosition||(e.PageNavigationPosition={}))[j.Bottom=0]="Bottom",j[j.Left=1]="Left",(z=e.QnaMode||(e.QnaMode={}))[z.Interactive=0]="Interactive",z[z.ResultOnly=1]="ResultOnly",(B=e.ExportDataType||(e.ExportDataType={}))[B.Summarized=0]="Summarized",B[B.Underlying=1]="Underlying",(F=e.BookmarksPlayMode||(e.BookmarksPlayMode={}))[F.Off=0]="Off",F[F.Presentation=1]="Presentation",e.CommonErrorCodes={TokenExpired:"TokenExpired",NotFound:"PowerBIEntityNotFound",InvalidParameters:"Invalid parameters",LoadReportFailed:"LoadReportFailed",NotAuthorized:"PowerBINotAuthorizedException",FailedToLoadModel:"ExplorationContainer_FailedToLoadModel_DefaultDetails"},e.TextAlignment={Left:"left",Center:"center",Right:"right"},e.LegendPosition={Top:"Top",Bottom:"Bottom",Right:"Right",Left:"Left",TopCenter:"TopCenter",BottomCenter:"BottomCenter",RightCenter:"RightCenter",LeftCenter:"LeftCenter"},(N=e.SortDirection||(e.SortDirection={}))[N.Ascending=1]="Ascending",N[N.Descending=2]="Descending";var Y=function(){function t(t){this.$schema=t}return t.prototype.toJSON=function(){return{$schema:this.$schema}},t}();e.Selector=Y;var K=function(t){function e(n){var i=t.call(this,e.schemaUrl)||this;return i.pageName=n,i}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.pageName=this.pageName,e},e.schemaUrl="http://powerbi.com/product/schema#pageSelector",e}(Y);e.PageSelector=K;var X=function(t){function e(n){var i=t.call(this,e.schemaUrl)||this;return i.visualName=n,i}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.visualName=this.visualName,e},e.schemaUrl="http://powerbi.com/product/schema#visualSelector",e}(Y);e.VisualSelector=X;var J=function(t){function e(e){var n=t.call(this,X.schemaUrl)||this;return n.visualType=e,n}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.visualType=this.visualType,e},e.schemaUrl="http://powerbi.com/product/schema#visualTypeSelector",e}(Y);e.VisualTypeSelector=J;var Q,tt,et,nt=function(t){function e(e){var n=t.call(this,X.schemaUrl)||this;return n.target=e,n}return r(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.target=this.target,e},e.schemaUrl="http://powerbi.com/product/schema#slicerTargetSelector",e}(Y);function it(t){return Array.isArray(t)}function rt(t){return t&&!!t.groupName}function ot(t){return Array.isArray(t)}function at(t){var e=t.message;return e||(e="".concat(t.path," is invalid. Not meeting ").concat(t.keyword," constraint")),{message:e}}e.SlicerTargetSelector=nt,(et=e.CommandDisplayOption||(e.CommandDisplayOption={}))[et.Enabled=0]="Enabled",et[et.Disabled=1]="Disabled",et[et.Hidden=2]="Hidden",(tt=e.VisualDataRoleKind||(e.VisualDataRoleKind={}))[tt.Grouping=0]="Grouping",tt[tt.Measure=1]="Measure",tt[tt.GroupingOrMeasure=2]="GroupingOrMeasure",(Q=e.VisualDataRoleKindPreference||(e.VisualDataRoleKindPreference={}))[Q.Measure=0]="Measure",Q[Q.Grouping=1]="Grouping",e.isOnLoadFilters=function(t){return t&&!it(t)},e.isReportFiltersArray=it,e.isFlatMenuExtension=function(t){return t&&!rt(t)},e.isGroupedMenuExtension=rt,e.isIExtensions=function(t){return t&&!ot(t)},e.isIExtensionArray=ot,e.validateVisualSelector=function(t){var e=C.Validators.visualSelectorValidator.validate(t);return e?e.map(at):void 0},e.validateSlicer=function(t){var e=C.Validators.slicerValidator.validate(t);return e?e.map(at):void 0},e.validateSlicerState=function(t){var e=C.Validators.slicerStateValidator.validate(t);return e?e.map(at):void 0},e.validatePlayBookmarkRequest=function(t){var e=C.Validators.playBookmarkRequestValidator.validate(t);return e?e.map(at):void 0},e.validateAddBookmarkRequest=function(t){var e=C.Validators.addBookmarkRequestValidator.validate(t);return e?e.map(at):void 0},e.validateApplyBookmarkByNameRequest=function(t){var e=C.Validators.applyBookmarkByNameRequestValidator.validate(t);return e?e.map(at):void 0},e.validateApplyBookmarkStateRequest=function(t){var e=C.Validators.applyBookmarkStateRequestValidator.validate(t);return e?e.map(at):void 0},e.validateCaptureBookmarkRequest=function(t){var e=C.Validators.captureBookmarkRequestValidator.validate(t);return e?e.map(at):void 0},e.validateSettings=function(t){var e=C.Validators.settingsValidator.validate(t);return e?e.map(at):void 0},e.validatePanes=function(t){var e=C.Validators.reportPanesValidator.validate(t);return e?e.map(at):void 0},e.validateBookmarksPane=function(t){var e=C.Validators.bookmarksPaneValidator.validate(t);return e?e.map(at):void 0},e.validateFiltersPane=function(t){var e=C.Validators.filtersPaneValidator.validate(t);return e?e.map(at):void 0},e.validateFieldsPane=function(t){var e=C.Validators.fieldsPaneValidator.validate(t);return e?e.map(at):void 0},e.validatePageNavigationPane=function(t){var e=C.Validators.pageNavigationPaneValidator.validate(t);return e?e.map(at):void 0},e.validateSelectionPane=function(t){var e=C.Validators.selectionPaneValidator.validate(t);return e?e.map(at):void 0},e.validateSyncSlicersPane=function(t){var e=C.Validators.syncSlicersPaneValidator.validate(t);return e?e.map(at):void 0},e.validateVisualizationsPane=function(t){var e=C.Validators.visualizationsPaneValidator.validate(t);return e?e.map(at):void 0},e.validateCustomPageSize=function(t){var e=C.Validators.customPageSizeValidator.validate(t);return e?e.map(at):void 0},e.validateExtension=function(t){var e=C.Validators.extensionValidator.validate(t);return e?e.map(at):void 0},e.validateMenuGroupExtension=function(t){var e=C.Validators.menuGroupExtensionValidator.validate(t);return e?e.map(at):void 0},e.validateReportLoad=function(t){var e=C.Validators.reportLoadValidator.validate(t);return e?e.map(at):void 0},e.validatePaginatedReportLoad=function(t){var e=C.Validators.paginatedReportLoadValidator.validate(t);return e?e.map(at):void 0},e.validateCreateReport=function(t){var e=C.Validators.reportCreateValidator.validate(t);return e?e.map(at):void 0},e.validateQuickCreate=function(t){var e=C.Validators.quickCreateValidator.validate(t);return e?e.map(at):void 0},e.validateDashboardLoad=function(t){var e=C.Validators.dashboardLoadValidator.validate(t);return e?e.map(at):void 0},e.validateTileLoad=function(t){var e=C.Validators.tileLoadValidator.validate(t);return e?e.map(at):void 0},e.validatePage=function(t){var e=C.Validators.pageValidator.validate(t);return e?e.map(at):void 0},e.validateFilter=function(t){var e=C.Validators.filterValidator.validate(t);return e?e.map(at):void 0},e.validateUpdateFiltersRequest=function(t){var e=C.Validators.updateFiltersRequestValidator.validate(t);return e?e.map(at):void 0},e.validateSaveAsParameters=function(t){var e=C.Validators.saveAsParametersValidator.validate(t);return e?e.map(at):void 0},e.validateLoadQnaConfiguration=function(t){var e=C.Validators.loadQnaValidator.validate(t);return e?e.map(at):void 0},e.validateQnaInterpretInputData=function(t){var e=C.Validators.qnaInterpretInputDataValidator.validate(t);return e?e.map(at):void 0},e.validateExportDataRequest=function(t){var e=C.Validators.exportDataRequestValidator.validate(t);return e?e.map(at):void 0},e.validateVisualHeader=function(t){var e=C.Validators.visualHeaderValidator.validate(t);return e?e.map(at):void 0},e.validateVisualSettings=function(t){var e=C.Validators.visualSettingsValidator.validate(t);return e?e.map(at):void 0},e.validateCommandsSettings=function(t){var e=C.Validators.commandsSettingsValidator.validate(t);return e?e.map(at):void 0},e.validateCustomTheme=function(t){var e=C.Validators.customThemeValidator.validate(t);return e?e.map(at):void 0},e.validateZoomLevel=function(t){var e=C.Validators.zoomLevelValidator.validate(t);return e?e.map(at):void 0},e.validatePrintSettings=function(t){var e=C.Validators.printSettingsValidator.validate(t);return e?e.map(at):void 0}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Validators=void 0;var i=n(2),r=n(5),o=n(6),a=n(7),s=n(8),l=n(9),c=n(10),u=n(11),h=n(12),d=n(13),p=n(14),f=n(15),g=n(16),m=n(17),v=n(18),y=n(19),b=n(20),w=n(21),S=n(22),x=n(23),k=n(24),C=n(25),M=n(26),T=n(27),E=n(28),A=n(29),_=n(4),P=n(30),D=n(31),O=n(32),L=n(33),I=n(34);e.Validators={addBookmarkRequestValidator:new r.AddBookmarkRequestValidator,advancedFilterTypeValidator:new _.EnumValidator([0]),advancedFilterValidator:new h.AdvancedFilterValidator,anyArrayValidator:new _.ArrayValidator([new M.AnyOfValidator([new _.StringValidator,new _.NumberValidator,new _.BooleanValidator])]),anyFilterValidator:new M.AnyOfValidator([new h.BasicFilterValidator,new h.AdvancedFilterValidator,new h.IncludeExcludeFilterValidator,new h.NotSupportedFilterValidator,new h.RelativeDateFilterValidator,new h.TopNFilterValidator,new h.RelativeTimeFilterValidator,new h.HierarchyFilterValidator]),anyValueValidator:new M.AnyOfValidator([new _.StringValidator,new _.NumberValidator,new _.BooleanValidator]),actionBarValidator:new i.ActionBarValidator,statusBarValidator:new i.StatusBarValidator,applyBookmarkByNameRequestValidator:new r.ApplyBookmarkByNameRequestValidator,applyBookmarkStateRequestValidator:new r.ApplyBookmarkStateRequestValidator,applyBookmarkValidator:new M.AnyOfValidator([new r.ApplyBookmarkByNameRequestValidator,new r.ApplyBookmarkStateRequestValidator]),backgroundValidator:new _.EnumValidator([0,1]),basicFilterTypeValidator:new _.EnumValidator([1]),basicFilterValidator:new h.BasicFilterValidator,booleanArrayValidator:new _.BooleanArrayValidator,booleanValidator:new _.BooleanValidator,bookmarksPaneValidator:new f.BookmarksPaneValidator,captureBookmarkOptionsValidator:new r.CaptureBookmarkOptionsValidator,captureBookmarkRequestValidator:new r.CaptureBookmarkRequestValidator,columnSchemaArrayValidator:new _.ArrayValidator([new D.ColumnSchemaValidator]),commandDisplayOptionValidator:new _.EnumValidator([0,1,2]),commandExtensionSelectorValidator:new M.AnyOfValidator([new w.VisualSelectorValidator,new w.VisualTypeSelectorValidator]),commandExtensionArrayValidator:new _.ArrayValidator([new u.CommandExtensionValidator]),commandExtensionValidator:new u.CommandExtensionValidator,commandsSettingsArrayValidator:new _.ArrayValidator([new o.CommandsSettingsValidator]),commandsSettingsValidator:new o.CommandsSettingsValidator,conditionItemValidator:new h.ConditionItemValidator,contrastModeValidator:new _.EnumValidator([0,1,2,3,4]),credentialDetailsValidator:new A.MapValidator([new _.StringValidator],[new _.StringValidator]),credentialsValidator:new D.CredentialsValidator,credentialTypeValidator:new _.EnumValidator([0,1,2]),customLayoutDisplayOptionValidator:new _.EnumValidator([0,1,2]),customLayoutValidator:new d.CustomLayoutValidator,customPageSizeValidator:new p.CustomPageSizeValidator,customThemeValidator:new a.CustomThemeValidator,dashboardLoadValidator:new s.DashboardLoadValidator,dataCacheModeValidator:new _.EnumValidator([0,1]),datasetBindingValidator:new l.DatasetBindingValidator,datasetCreateConfigValidator:new D.DatasetCreateConfigValidator,datasourceConnectionConfigValidator:new D.DatasourceConnectionConfigValidator,displayStateModeValidator:new _.EnumValidator([0,1]),displayStateValidator:new d.DisplayStateValidator,exportDataRequestValidator:new c.ExportDataRequestValidator,extensionArrayValidator:new _.ArrayValidator([new u.ExtensionValidator]),extensionsValidator:new M.AnyOfValidator([new _.ArrayValidator([new u.ExtensionValidator]),new u.ExtensionsValidator]),extensionPointsValidator:new u.ExtensionPointsValidator,extensionValidator:new u.ExtensionValidator,fieldForbiddenValidator:new T.FieldForbiddenValidator,fieldRequiredValidator:new E.FieldRequiredValidator,fieldsPaneValidator:new f.FieldsPaneValidator,filterColumnTargetValidator:new h.FilterColumnTargetValidator,filterDisplaySettingsValidator:new h.FilterDisplaySettingsValidator,filterConditionsValidator:new _.ArrayValidator([new h.ConditionItemValidator]),filterHierarchyTargetValidator:new h.FilterHierarchyTargetValidator,filterMeasureTargetValidator:new h.FilterMeasureTargetValidator,filterTargetValidator:new M.AnyOfValidator([new h.FilterColumnTargetValidator,new h.FilterHierarchyTargetValidator,new h.FilterMeasureTargetValidator,new _.ArrayValidator([new M.AnyOfValidator([new h.FilterColumnTargetValidator,new h.FilterHierarchyTargetValidator,new h.FilterMeasureTargetValidator,new h.FilterKeyColumnsTargetValidator,new h.FilterKeyHierarchyTargetValidator,new _.ArrayValidator([new M.AnyOfValidator([new h.FilterColumnTargetValidator,new h.FilterHierarchyTargetValidator,new h.FilterMeasureTargetValidator,new h.FilterKeyColumnsTargetValidator,new h.FilterKeyHierarchyTargetValidator])])])])]),filterValidator:new h.FilterValidator,filterTypeValidator:new _.EnumValidator([0,1,2,3,4,5,6,7,9]),filtersArrayValidator:new _.ArrayValidator([new h.FilterValidator]),filtersOperationsUpdateValidator:new _.EnumValidator([1,2,3]),filtersOperationsRemoveAllValidator:new _.EnumValidator([0]),filtersPaneValidator:new f.FiltersPaneValidator,hyperlinkClickBehaviorValidator:new _.EnumValidator([0,1,2]),includeExcludeFilterValidator:new h.IncludeExcludeFilterValidator,includeExludeFilterTypeValidator:new _.EnumValidator([3]),includeExcludeFilterValuesValidator:new _.ArrayValidator([new M.AnyOfValidator([new _.StringValidator,new _.NumberValidator,new _.BooleanValidator,new _.ArrayValidator([new _.ArrayValidator([new h.IncludeExcludePointValueValidator])])])]),hierarchyFilterTypeValidator:new _.EnumValidator([9]),hierarchyFilterValuesValidator:new _.ArrayValidator([new h.HierarchyFilterNodeValidator]),layoutTypeValidator:new _.EnumValidator([0,1,2,3]),loadQnaValidator:new g.LoadQnaValidator,menuExtensionValidator:new M.AnyOfValidator([new u.FlatMenuExtensionValidator,new u.GroupedMenuExtensionValidator]),menuGroupExtensionArrayValidator:new _.ArrayValidator([new u.MenuGroupExtensionValidator]),menuGroupExtensionValidator:new u.MenuGroupExtensionValidator,menuLocationValidator:new _.EnumValidator([0,1]),notSupportedFilterTypeValidator:new _.EnumValidator([2]),notSupportedFilterValidator:new h.NotSupportedFilterValidator,numberArrayValidator:new _.NumberArrayValidator,numberValidator:new _.NumberValidator,onLoadFiltersBaseValidator:new M.AnyOfValidator([new h.OnLoadFiltersBaseValidator,new h.OnLoadFiltersBaseRemoveOperationValidator]),pageLayoutValidator:new A.MapValidator([new _.StringValidator],[new d.VisualLayoutValidator]),pageNavigationPaneValidator:new f.PageNavigationPaneValidator,pageNavigationPositionValidator:new _.EnumValidator([0,1]),pageSizeTypeValidator:new _.EnumValidator([0,1,2,3,4,5]),pageSizeValidator:new p.PageSizeValidator,pageValidator:new p.PageValidator,pageViewFieldValidator:new p.PageViewFieldValidator,pagesLayoutValidator:new A.MapValidator([new _.StringValidator],[new d.PageLayoutValidator]),paginatedReportCommandsValidator:new o.PaginatedReportCommandsValidator,paginatedReportDatasetBindingArrayValidator:new _.ArrayValidator([new I.PaginatedReportDatasetBindingValidator]),paginatedReportLoadValidator:new y.PaginatedReportLoadValidator,paginatedReportsettingsValidator:new S.PaginatedReportSettingsValidator,parameterValuesArrayValidator:new _.ArrayValidator([new y.ReportParameterFieldsValidator]),parametersPanelValidator:new P.ParametersPanelValidator,permissionsValidator:new _.EnumValidator([0,1,2,4,7]),playBookmarkRequestValidator:new r.PlayBookmarkRequestValidator,printSettingsValidator:new L.PrintSettingsValidator,qnaInterpretInputDataValidator:new g.QnaInterpretInputDataValidator,qnaPanesValidator:new f.QnaPanesValidator,qnaSettingValidator:new g.QnaSettingsValidator,quickCreateValidator:new O.QuickCreateValidator,rawDataValidator:new _.ArrayValidator([new _.ArrayValidator([new _.StringValidator])]),relativeDateFilterOperatorValidator:new _.EnumValidator([0,1,2]),relativeDateFilterTimeUnitTypeValidator:new _.EnumValidator([0,1,2,3,4,5,6]),relativeDateFilterTypeValidator:new _.EnumValidator([4]),relativeDateFilterValidator:new h.RelativeDateFilterValidator,relativeDateTimeFilterTypeValidator:new _.EnumValidator([4,7]),relativeDateTimeFilterUnitTypeValidator:new _.EnumValidator([0,1,2,3,4,5,6,7,8]),relativeTimeFilterTimeUnitTypeValidator:new _.EnumValidator([7,8]),relativeTimeFilterTypeValidator:new _.EnumValidator([7]),relativeTimeFilterValidator:new h.RelativeTimeFilterValidator,reportBarsValidator:new i.ReportBarsValidator,reportCreateValidator:new m.ReportCreateValidator,reportLoadFiltersValidator:new M.AnyOfValidator([new _.ArrayValidator([new h.FilterValidator]),new h.OnLoadFiltersValidator]),reportLoadValidator:new v.ReportLoadValidator,reportPanesValidator:new f.ReportPanesValidator,saveAsParametersValidator:new b.SaveAsParametersValidator,selectionPaneValidator:new f.SelectionPaneValidator,settingsValidator:new S.SettingsValidator,singleCommandSettingsValidator:new o.SingleCommandSettingsValidator,slicerSelectorValidator:new M.AnyOfValidator([new w.VisualSelectorValidator,new w.SlicerTargetSelectorValidator]),slicerStateValidator:new x.SlicerStateValidator,slicerTargetValidator:new M.AnyOfValidator([new h.FilterColumnTargetValidator,new h.FilterHierarchyTargetValidator,new h.FilterMeasureTargetValidator,new h.FilterKeyColumnsTargetValidator,new h.FilterKeyHierarchyTargetValidator]),slicerValidator:new x.SlicerValidator,stringArrayValidator:new _.StringArrayValidator,stringValidator:new _.StringValidator,syncSlicersPaneValidator:new f.SyncSlicersPaneValidator,tableDataArrayValidator:new _.ArrayValidator([new D.TableDataValidator]),tableSchemaListValidator:new _.ArrayValidator([new D.TableSchemaValidator]),tileLoadValidator:new k.TileLoadValidator,tokenTypeValidator:new _.EnumValidator([0,1]),topNFilterTypeValidator:new _.EnumValidator([5]),topNFilterValidator:new h.TopNFilterValidator,updateFiltersRequestValidator:new M.AnyOfValidator([new h.UpdateFiltersRequestValidator,new h.RemoveFiltersRequestValidator]),viewModeValidator:new _.EnumValidator([0,1]),visualCommandSelectorValidator:new M.AnyOfValidator([new w.VisualSelectorValidator,new w.VisualTypeSelectorValidator]),visualHeaderSelectorValidator:new M.AnyOfValidator([new w.VisualSelectorValidator,new w.VisualTypeSelectorValidator]),visualHeaderSettingsValidator:new C.VisualHeaderSettingsValidator,visualHeaderValidator:new C.VisualHeaderValidator,visualHeadersValidator:new _.ArrayValidator([new C.VisualHeaderValidator]),visualizationsPaneValidator:new f.VisualizationsPaneValidator,visualLayoutValidator:new d.VisualLayoutValidator,visualSelectorValidator:new w.VisualSelectorValidator,visualSettingsValidator:new C.VisualSettingsValidator,visualTypeSelectorValidator:new w.VisualTypeSelectorValidator,zoomLevelValidator:new _.RangeValidator(.25,4)}},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.StatusBarValidator=e.ActionBarValidator=e.ReportBarsValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"actionBar",validators:[s.Validators.actionBarValidator]},{field:"statusBar",validators:[s.Validators.statusBarValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ReportBarsValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visible",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ActionBarValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visible",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.StatusBarValidator=u},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MultipleFieldsValidator=void 0;var n=function(){function t(t){this.fieldValidatorsPairs=t}return t.prototype.validate=function(t,e,n){if(!this.fieldValidatorsPairs)return null;for(var i=e?e+"."+n:n,r=0,o=this.fieldValidatorsPairs;r<o.length;r++)for(var a=o[r],s=0,l=a.validators;s<l.length;s++){var c=l[s].validate(t[a.field],i,a.field);if(c)return c}return null},t}();e.MultipleFieldsValidator=n},function(t,e){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.RangeValidator=e.NumberArrayValidator=e.BooleanArrayValidator=e.StringArrayValidator=e.EnumValidator=e.SchemaValidator=e.ValueValidator=e.NumberValidator=e.BooleanValidator=e.StringValidator=e.TypeValidator=e.ArrayValidator=e.ObjectValidator=void 0;var r=function(){function t(){}return t.prototype.validate=function(t,e,n){return null==t?null:"object"!=typeof t||Array.isArray(t)?[{message:void 0!==n?n+" must be an object":"input must be an object",path:e,keyword:"type"}]:null},t}();e.ObjectValidator=r;var o=function(){function t(t){this.itemValidators=t}return t.prototype.validate=function(t,e,n){if(null==t)return null;if(!Array.isArray(t))return[{message:n+" property is invalid",path:(e?e+".":"")+n,keyword:"type"}];for(var i=0;i<t.length;i++)for(var r=(e?e+".":"")+n+"."+i.toString(),o=0,a=this.itemValidators;o<a.length;o++)if(a[o].validate(t[i],r,n))return[{message:n+" property is invalid",path:(e?e+".":"")+n,keyword:"type"}];return null},t}();e.ArrayValidator=o;var a=function(){function t(t){this.expectedType=t}return t.prototype.validate=function(t,e,n){return null==t?null:typeof t!==this.expectedType?[{message:n+" must be a "+this.expectedType,path:(e?e+".":"")+n,keyword:"type"}]:null},t}();e.TypeValidator=a;var s=function(t){function e(){return t.call(this,"string")||this}return i(e,t),e}(a);e.StringValidator=s;var l=function(t){function e(){return t.call(this,"boolean")||this}return i(e,t),e}(a);e.BooleanValidator=l;var c=function(t){function e(){return t.call(this,"number")||this}return i(e,t),e}(a);e.NumberValidator=c;var u=function(){function t(t){this.possibleValues=t}return t.prototype.validate=function(t,e,n){return null==t?null:this.possibleValues.indexOf(t)<0?[{message:n+" property is invalid",path:(e?e+".":"")+n,keyword:"invalid"}]:null},t}();e.ValueValidator=u;var h=function(t){function e(e){var n=t.call(this,[e])||this;return n.schemaValue=e,n}return i(e,t),e.prototype.validate=function(e,n,i){return t.prototype.validate.call(this,e,n,i)},e}(u);e.SchemaValidator=h;var d=function(t){function e(e){var n=t.call(this)||this;return n.possibleValues=e,n}return i(e,t),e.prototype.validate=function(e,n,i){return null==e?null:t.prototype.validate.call(this,e,n,i)||new u(this.possibleValues).validate(e,n,i)},e}(c);e.EnumValidator=d;var p=function(t){function e(){return t.call(this,[new s])||this}return i(e,t),e.prototype.validate=function(e,n,i){return t.prototype.validate.call(this,e,n,i)?[{message:i+" must be an array of strings",path:(n?n+".":"")+i,keyword:"type"}]:null},e}(o);e.StringArrayValidator=p;var f=function(t){function e(){return t.call(this,[new l])||this}return i(e,t),e.prototype.validate=function(e,n,i){return t.prototype.validate.call(this,e,n,i)?[{message:i+" must be an array of booleans",path:(n?n+".":"")+i,keyword:"type"}]:null},e}(o);e.BooleanArrayValidator=f;var g=function(t){function e(){return t.call(this,[new c])||this}return i(e,t),e.prototype.validate=function(e,n,i){return t.prototype.validate.call(this,e,n,i)?[{message:i+" must be an array of numbers",path:(n?n+".":"")+i,keyword:"type"}]:null},e}(o);e.NumberArrayValidator=g;var m=function(t){function e(e,n){var i=t.call(this)||this;return i.minValue=e,i.maxValue=n,i}return i(e,t),e.prototype.validate=function(e,n,i){return null==e?null:t.prototype.validate.call(this,e,n,i)||(e>this.maxValue||e<this.minValue?[{message:i+" must be a number between "+this.minValue.toString()+" and "+this.maxValue.toString(),path:(n?n+".":"")+i,keyword:"range"}]:null)},e}(c);e.RangeValidator=m},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CaptureBookmarkRequestValidator=e.CaptureBookmarkOptionsValidator=e.ApplyBookmarkStateRequestValidator=e.ApplyBookmarkByNameRequestValidator=e.AddBookmarkRequestValidator=e.PlayBookmarkRequestValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var l=[{field:"playMode",validators:[s.Validators.fieldRequiredValidator,new a.EnumValidator([0,1])]}];return new o.MultipleFieldsValidator(l).validate(e,n,i)},e}(a.ObjectValidator);e.PlayBookmarkRequestValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"state",validators:[s.Validators.stringValidator]},{field:"displayName",validators:[s.Validators.stringValidator]},{field:"apply",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.AddBookmarkRequestValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ApplyBookmarkByNameRequestValidator=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"state",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ApplyBookmarkStateRequestValidator=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"personalizeVisuals",validators:[s.Validators.booleanValidator]},{field:"allPages",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.CaptureBookmarkOptionsValidator=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"options",validators:[s.Validators.fieldRequiredValidator,s.Validators.captureBookmarkOptionsValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.CaptureBookmarkRequestValidator=p},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PaginatedReportCommandsValidator=e.SingleCommandSettingsValidator=e.CommandsSettingsValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"copy",validators:[s.Validators.singleCommandSettingsValidator]},{field:"drill",validators:[s.Validators.singleCommandSettingsValidator]},{field:"drillthrough",validators:[s.Validators.singleCommandSettingsValidator]},{field:"expandCollapse",validators:[s.Validators.singleCommandSettingsValidator]},{field:"exportData",validators:[s.Validators.singleCommandSettingsValidator]},{field:"includeExclude",validators:[s.Validators.singleCommandSettingsValidator]},{field:"removeVisual",validators:[s.Validators.singleCommandSettingsValidator]},{field:"search",validators:[s.Validators.singleCommandSettingsValidator]},{field:"seeData",validators:[s.Validators.singleCommandSettingsValidator]},{field:"sort",validators:[s.Validators.singleCommandSettingsValidator]},{field:"spotlight",validators:[s.Validators.singleCommandSettingsValidator]},{field:"insightsAnalysis",validators:[s.Validators.singleCommandSettingsValidator]},{field:"addComment",validators:[s.Validators.singleCommandSettingsValidator]},{field:"groupVisualContainers",validators:[s.Validators.singleCommandSettingsValidator]},{field:"summarize",validators:[s.Validators.singleCommandSettingsValidator]},{field:"clearSelection",validators:[s.Validators.singleCommandSettingsValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.CommandsSettingsValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"displayOption",validators:[s.Validators.fieldRequiredValidator,s.Validators.commandDisplayOptionValidator]},{field:"selector",validators:[s.Validators.visualCommandSelectorValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.SingleCommandSettingsValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"parameterPanel",validators:[s.Validators.parametersPanelValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.PaginatedReportCommandsValidator=u},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CustomThemeValidator=void 0;var o=n(3),a=n(4),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var s=[{field:"themeJson",validators:[new a.ObjectValidator]}];return new o.MultipleFieldsValidator(s).validate(e,n,i)},e}(a.ObjectValidator);e.CustomThemeValidator=s},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardLoadValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"accessToken",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"id",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"groupId",validators:[s.Validators.stringValidator]},{field:"pageView",validators:[s.Validators.pageViewFieldValidator]},{field:"tokenType",validators:[s.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.DashboardLoadValidator=l},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DatasetBindingValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;if(!e.datasetId&&!e.paginatedReportBindings)return[{message:"datasetBinding cannot be empty",path:(n?n+".":"")+i,keyword:"invalid"}];var a=[{field:"datasetId",validators:[s.Validators.stringValidator]},{field:"paginatedReportBindings",validators:[s.Validators.paginatedReportDatasetBindingArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.DatasetBindingValidator=l},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ExportDataRequestValidator=void 0;var o=n(3),a=n(4),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var s=[{field:"rows",validators:[new a.NumberValidator]},{field:"exportDataType",validators:[new a.EnumValidator([0,1])]}];return new o.MultipleFieldsValidator(s).validate(e,n,i)},e}(a.ObjectValidator);e.ExportDataRequestValidator=s},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsValidator=e.MenuGroupExtensionValidator=e.ExtensionValidator=e.CommandExtensionValidator=e.ExtensionItemValidator=e.ExtensionPointsValidator=e.GroupedMenuExtensionValidator=e.FlatMenuExtensionValidator=e.MenuExtensionBaseValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"title",validators:[s.Validators.stringValidator]},{field:"icon",validators:[s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.MenuExtensionBaseValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"menuLocation",validators:[s.Validators.menuLocationValidator]},{field:"groupName",validators:[s.Validators.fieldForbiddenValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(l);e.FlatMenuExtensionValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"groupName",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"menuLocation",validators:[s.Validators.fieldForbiddenValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(l);e.GroupedMenuExtensionValidator=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visualContextMenu",validators:[s.Validators.menuExtensionValidator]},{field:"visualOptionsMenu",validators:[s.Validators.menuExtensionValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ExtensionPointsValidator=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"extend",validators:[s.Validators.fieldRequiredValidator,s.Validators.extensionPointsValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ExtensionItemValidator=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"title",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"icon",validators:[s.Validators.stringValidator]},{field:"selector",validators:[s.Validators.commandExtensionSelectorValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(d);e.CommandExtensionValidator=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"command",validators:[s.Validators.commandExtensionValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ExtensionValidator=f;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"title",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"menuLocation",validators:[s.Validators.menuLocationValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.MenuGroupExtensionValidator=g;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"commands",validators:[s.Validators.fieldRequiredValidator,s.Validators.commandExtensionArrayValidator]},{field:"groups",validators:[s.Validators.menuGroupExtensionArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ExtensionsValidator=m},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OnLoadFiltersValidator=e.OnLoadFiltersBaseRemoveOperationValidator=e.OnLoadFiltersBaseValidator=e.ConditionItemValidator=e.RemoveFiltersRequestValidator=e.UpdateFiltersRequestValidator=e.FilterValidator=e.IncludeExcludePointValueValidator=e.HierarchyFilterNodeValidator=e.HierarchyFilterValidator=e.IncludeExcludeFilterValidator=e.NotSupportedFilterValidator=e.TopNFilterValidator=e.RelativeTimeFilterValidator=e.RelativeDateFilterValidator=e.RelativeDateTimeFilterValidator=e.AdvancedFilterValidator=e.BasicFilterValidator=e.FilterValidatorBase=e.FilterDisplaySettingsValidator=e.FilterMeasureTargetValidator=e.FilterKeyHierarchyTargetValidator=e.FilterHierarchyTargetValidator=e.FilterKeyColumnsTargetValidator=e.FilterColumnTargetValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"table",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"column",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.FilterColumnTargetValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"keys",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(l);e.FilterKeyColumnsTargetValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"table",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"hierarchy",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"hierarchyLevel",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.FilterHierarchyTargetValidator=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"keys",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(u);e.FilterKeyHierarchyTargetValidator=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"table",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"measure",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.FilterMeasureTargetValidator=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"isLockedInViewMode",validators:[s.Validators.booleanValidator]},{field:"isHiddenInViewMode",validators:[s.Validators.booleanValidator]},{field:"displayName",validators:[s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.FilterDisplaySettingsValidator=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"target",validators:[s.Validators.fieldRequiredValidator,s.Validators.filterTargetValidator]},{field:"$schema",validators:[s.Validators.stringValidator]},{field:"filterType",validators:[s.Validators.filterTypeValidator]},{field:"displaySettings",validators:[s.Validators.filterDisplaySettingsValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.FilterValidatorBase=f;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"operator",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"values",validators:[s.Validators.fieldRequiredValidator,s.Validators.anyArrayValidator]},{field:"filterType",validators:[s.Validators.basicFilterTypeValidator]},{field:"requireSingleSelection",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(f);e.BasicFilterValidator=g;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"logicalOperator",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"conditions",validators:[s.Validators.filterConditionsValidator]},{field:"filterType",validators:[s.Validators.advancedFilterTypeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(f);e.AdvancedFilterValidator=m;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"operator",validators:[s.Validators.fieldRequiredValidator,s.Validators.relativeDateFilterOperatorValidator]},{field:"timeUnitsCount",validators:[s.Validators.numberValidator]},{field:"timeUnitType",validators:[s.Validators.fieldRequiredValidator,s.Validators.relativeDateTimeFilterUnitTypeValidator]},{field:"filterType",validators:[s.Validators.relativeDateTimeFilterTypeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(f);e.RelativeDateTimeFilterValidator=v;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"includeToday",validators:[s.Validators.fieldRequiredValidator,s.Validators.booleanValidator]},{field:"timeUnitType",validators:[s.Validators.fieldRequiredValidator,s.Validators.relativeDateFilterTimeUnitTypeValidator]},{field:"filterType",validators:[s.Validators.relativeDateFilterTypeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(v);e.RelativeDateFilterValidator=y;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"timeUnitType",validators:[s.Validators.fieldRequiredValidator,s.Validators.relativeTimeFilterTimeUnitTypeValidator]},{field:"filterType",validators:[s.Validators.relativeTimeFilterTypeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(v);e.RelativeTimeFilterValidator=b;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"operator",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"itemCount",validators:[s.Validators.fieldRequiredValidator,s.Validators.numberValidator]},{field:"filterType",validators:[s.Validators.topNFilterTypeValidator]},{field:"orderBy",validators:[s.Validators.fieldRequiredValidator,s.Validators.filterTargetValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(f);e.TopNFilterValidator=w;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"message",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"notSupportedTypeName",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"filterType",validators:[s.Validators.notSupportedFilterTypeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(f);e.NotSupportedFilterValidator=S;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"isExclude",validators:[s.Validators.fieldRequiredValidator,s.Validators.booleanValidator]},{field:"values",validators:[s.Validators.fieldRequiredValidator,s.Validators.includeExcludeFilterValuesValidator]},{field:"filterType",validators:[s.Validators.includeExludeFilterTypeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(f);e.IncludeExcludeFilterValidator=x;var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"hierarchyData",validators:[s.Validators.fieldRequiredValidator,s.Validators.hierarchyFilterValuesValidator]},{field:"filterType",validators:[s.Validators.hierarchyFilterTypeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(f);e.HierarchyFilterValidator=k;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"value",validators:[s.Validators.anyValueValidator]},{field:"keyValues",validators:[s.Validators.anyArrayValidator]},{field:"children",validators:[s.Validators.hierarchyFilterValuesValidator]},{field:"operator",validators:[s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.HierarchyFilterNodeValidator=C;var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"value",validators:[s.Validators.fieldRequiredValidator,s.Validators.anyValueValidator]},{field:"keyValues",validators:[s.Validators.anyArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.IncludeExcludePointValueValidator=M;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){return null==e?null:t.prototype.validate.call(this,e,n,i)||s.Validators.anyFilterValidator.validate(e,n,i)},e}(a.ObjectValidator);e.FilterValidator=T;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"filtersOperation",validators:[s.Validators.fieldRequiredValidator,s.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[s.Validators.fieldRequiredValidator,s.Validators.filtersArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.UpdateFiltersRequestValidator=E;var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"filtersOperation",validators:[s.Validators.fieldRequiredValidator,s.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[s.Validators.fieldForbiddenValidator,s.Validators.filtersArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.RemoveFiltersRequestValidator=A;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"value",validators:[s.Validators.anyValueValidator]},{field:"operator",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ConditionItemValidator=_;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"operation",validators:[s.Validators.fieldRequiredValidator,s.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[s.Validators.fieldRequiredValidator,s.Validators.filtersArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.OnLoadFiltersBaseValidator=P;var D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"operation",validators:[s.Validators.fieldRequiredValidator,s.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[s.Validators.fieldForbiddenValidator,s.Validators.filtersArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.OnLoadFiltersBaseRemoveOperationValidator=D;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"allPages",validators:[s.Validators.onLoadFiltersBaseValidator]},{field:"currentPage",validators:[s.Validators.onLoadFiltersBaseValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.OnLoadFiltersValidator=O},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PageLayoutValidator=e.DisplayStateValidator=e.VisualLayoutValidator=e.CustomLayoutValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"pageSize",validators:[s.Validators.pageSizeValidator]},{field:"displayOption",validators:[s.Validators.customLayoutDisplayOptionValidator]},{field:"pagesLayout",validators:[s.Validators.pagesLayoutValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.CustomLayoutValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"x",validators:[s.Validators.numberValidator]},{field:"y",validators:[s.Validators.numberValidator]},{field:"z",validators:[s.Validators.numberValidator]},{field:"width",validators:[s.Validators.numberValidator]},{field:"height",validators:[s.Validators.numberValidator]},{field:"displayState",validators:[s.Validators.displayStateValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.VisualLayoutValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"mode",validators:[s.Validators.displayStateModeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.DisplayStateValidator=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visualsLayout",validators:[s.Validators.fieldRequiredValidator,s.Validators.pageLayoutValidator]},{field:"defaultLayout",validators:[s.Validators.visualLayoutValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.PageLayoutValidator=h},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PageViewFieldValidator=e.PageValidator=e.CustomPageSizeValidator=e.PageSizeValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"type",validators:[s.Validators.fieldRequiredValidator,s.Validators.pageSizeTypeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.PageSizeValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"width",validators:[s.Validators.numberValidator]},{field:"height",validators:[s.Validators.numberValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(l);e.CustomPageSizeValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.PageValidator=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){return null==e?null:t.prototype.validate.call(this,e,n,i)||(["actualSize","fitToWidth","oneColumn"].indexOf(e)<0?[{message:'pageView must be a string with one of the following values: "actualSize", "fitToWidth", "oneColumn"'}]:null)},e}(a.StringValidator);e.PageViewFieldValidator=h},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.VisualizationsPaneValidator=e.SyncSlicersPaneValidator=e.SelectionPaneValidator=e.PageNavigationPaneValidator=e.FiltersPaneValidator=e.FieldsPaneValidator=e.BookmarksPaneValidator=e.QnaPanesValidator=e.ReportPanesValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"bookmarks",validators:[s.Validators.bookmarksPaneValidator]},{field:"fields",validators:[s.Validators.fieldsPaneValidator]},{field:"filters",validators:[s.Validators.filtersPaneValidator]},{field:"pageNavigation",validators:[s.Validators.pageNavigationPaneValidator]},{field:"selection",validators:[s.Validators.selectionPaneValidator]},{field:"syncSlicers",validators:[s.Validators.syncSlicersPaneValidator]},{field:"visualizations",validators:[s.Validators.visualizationsPaneValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ReportPanesValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"filters",validators:[s.Validators.filtersPaneValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.QnaPanesValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visible",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.BookmarksPaneValidator=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"expanded",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.FieldsPaneValidator=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visible",validators:[s.Validators.booleanValidator]},{field:"expanded",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.FiltersPaneValidator=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visible",validators:[s.Validators.booleanValidator]},{field:"position",validators:[s.Validators.pageNavigationPositionValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.PageNavigationPaneValidator=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visible",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.SelectionPaneValidator=f;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visible",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.SyncSlicersPaneValidator=g;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"expanded",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.VisualizationsPaneValidator=m},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.QnaInterpretInputDataValidator=e.QnaSettingsValidator=e.LoadQnaValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"accessToken",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"datasetIds",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringArrayValidator]},{field:"question",validators:[s.Validators.stringValidator]},{field:"viewMode",validators:[s.Validators.viewModeValidator]},{field:"settings",validators:[s.Validators.qnaSettingValidator]},{field:"tokenType",validators:[s.Validators.tokenTypeValidator]},{field:"groupId",validators:[s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.LoadQnaValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"filterPaneEnabled",validators:[s.Validators.booleanValidator]},{field:"hideErrors",validators:[s.Validators.booleanValidator]},{field:"panes",validators:[s.Validators.qnaPanesValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.QnaSettingsValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"datasetIds",validators:[s.Validators.stringArrayValidator]},{field:"question",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.QnaInterpretInputDataValidator=u},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ReportCreateValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"accessToken",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"datasetId",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"groupId",validators:[s.Validators.stringValidator]},{field:"tokenType",validators:[s.Validators.tokenTypeValidator]},{field:"theme",validators:[s.Validators.customThemeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ReportCreateValidator=l},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ReportLoadValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"accessToken",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"id",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"groupId",validators:[s.Validators.stringValidator]},{field:"settings",validators:[s.Validators.settingsValidator]},{field:"pageName",validators:[s.Validators.stringValidator]},{field:"filters",validators:[s.Validators.reportLoadFiltersValidator]},{field:"permissions",validators:[s.Validators.permissionsValidator]},{field:"viewMode",validators:[s.Validators.viewModeValidator]},{field:"tokenType",validators:[s.Validators.tokenTypeValidator]},{field:"bookmark",validators:[s.Validators.applyBookmarkValidator]},{field:"theme",validators:[s.Validators.customThemeValidator]},{field:"embedUrl",validators:[s.Validators.stringValidator]},{field:"datasetBinding",validators:[s.Validators.datasetBindingValidator]},{field:"contrastMode",validators:[s.Validators.contrastModeValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ReportLoadValidator=l},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ReportParameterFieldsValidator=e.PaginatedReportLoadValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"accessToken",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"id",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"groupId",validators:[s.Validators.stringValidator]},{field:"settings",validators:[s.Validators.paginatedReportsettingsValidator]},{field:"tokenType",validators:[s.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[s.Validators.stringValidator]},{field:"type",validators:[s.Validators.stringValidator]},{field:"parameterValues",validators:[s.Validators.parameterValuesArrayValidator]},{field:"datasetBindings",validators:[s.Validators.paginatedReportDatasetBindingArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.PaginatedReportLoadValidator=l;var c=function(){function t(){}return t.prototype.validate=function(t,e,n){if(null==t)return null;var i=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"value",validators:[s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(i).validate(t,e,n)},t}();e.ReportParameterFieldsValidator=c},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SaveAsParametersValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.SaveAsParametersValidator=l},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SlicerTargetSelectorValidator=e.VisualTypeSelectorValidator=e.VisualSelectorValidator=void 0;var o=n(3),a=n(4),s=n(4),l=n(1),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"$schema",validators:[l.Validators.stringValidator,new s.SchemaValidator("http://powerbi.com/product/schema#visualSelector")]},{field:"visualName",validators:[l.Validators.fieldRequiredValidator,l.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.VisualSelectorValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"$schema",validators:[l.Validators.fieldRequiredValidator,l.Validators.stringValidator,new s.SchemaValidator("http://powerbi.com/product/schema#visualTypeSelector")]},{field:"visualType",validators:[l.Validators.fieldRequiredValidator,l.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.VisualTypeSelectorValidator=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"$schema",validators:[l.Validators.fieldRequiredValidator,l.Validators.stringValidator,new s.SchemaValidator("http://powerbi.com/product/schema#slicerTargetSelector")]},{field:"target",validators:[l.Validators.fieldRequiredValidator,l.Validators.slicerTargetValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.SlicerTargetSelectorValidator=h},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PaginatedReportSettingsValidator=e.SettingsValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"filterPaneEnabled",validators:[s.Validators.booleanValidator]},{field:"navContentPaneEnabled",validators:[s.Validators.booleanValidator]},{field:"bookmarksPaneEnabled",validators:[s.Validators.booleanValidator]},{field:"useCustomSaveAsDialog",validators:[s.Validators.booleanValidator]},{field:"extensions",validators:[s.Validators.extensionsValidator]},{field:"layoutType",validators:[s.Validators.layoutTypeValidator]},{field:"customLayout",validators:[s.Validators.customLayoutValidator]},{field:"background",validators:[s.Validators.backgroundValidator]},{field:"visualSettings",validators:[s.Validators.visualSettingsValidator]},{field:"hideErrors",validators:[s.Validators.booleanValidator]},{field:"commands",validators:[s.Validators.commandsSettingsArrayValidator]},{field:"hyperlinkClickBehavior",validators:[s.Validators.hyperlinkClickBehaviorValidator]},{field:"bars",validators:[s.Validators.reportBarsValidator]},{field:"panes",validators:[s.Validators.reportPanesValidator]},{field:"personalBookmarksEnabled",validators:[s.Validators.booleanValidator]},{field:"persistentFiltersEnabled",validators:[s.Validators.booleanValidator]},{field:"visualRenderedEvents",validators:[s.Validators.booleanValidator]},{field:"authoringHintsEnabled",validators:[s.Validators.booleanValidator]},{field:"printSettings",validators:[s.Validators.printSettingsValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.SettingsValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"commands",validators:[s.Validators.paginatedReportCommandsValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.PaginatedReportSettingsValidator=c},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SlicerStateValidator=e.SlicerValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"selector",validators:[s.Validators.fieldRequiredValidator,s.Validators.slicerSelectorValidator]},{field:"state",validators:[s.Validators.fieldRequiredValidator,s.Validators.slicerStateValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.SlicerValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"filters",validators:[s.Validators.filtersArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.SlicerStateValidator=c},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TileLoadValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"accessToken",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"id",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"dashboardId",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"groupId",validators:[s.Validators.stringValidator]},{field:"pageView",validators:[s.Validators.stringValidator]},{field:"tokenType",validators:[s.Validators.tokenTypeValidator]},{field:"width",validators:[s.Validators.numberValidator]},{field:"height",validators:[s.Validators.numberValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.TileLoadValidator=l},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.VisualHeaderValidator=e.VisualHeaderSettingsValidator=e.VisualSettingsValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visualHeaders",validators:[s.Validators.visualHeadersValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.VisualSettingsValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"visible",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.VisualHeaderSettingsValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"settings",validators:[s.Validators.fieldRequiredValidator,s.Validators.visualHeaderSettingsValidator]},{field:"selector",validators:[s.Validators.visualHeaderSelectorValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.VisualHeaderValidator=u},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnyOfValidator=void 0;var n=function(){function t(t){this.validators=t}return t.prototype.validate=function(t,e,n){if(null==t)return null;for(var i=!1,r=0,o=this.validators;r<o.length;r++)if(!o[r].validate(t,e,n)){i=!0;break}return i?null:[{message:n+" property is invalid",path:(e?e+".":"")+n,keyword:"invalid"}]},t}();e.AnyOfValidator=n},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FieldForbiddenValidator=void 0;var n=function(){function t(){}return t.prototype.validate=function(t,e,n){return void 0!==t?[{message:n+" is forbidden",path:(e?e+".":"")+n,keyword:"forbidden"}]:null},t}();e.FieldForbiddenValidator=n},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FieldRequiredValidator=void 0;var n=function(){function t(){}return t.prototype.validate=function(t,e,n){return null==t?[{message:n+" is required",path:(e?e+".":"")+n,keyword:"required"}]:null},t}();e.FieldRequiredValidator=n},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MapValidator=void 0;var o=function(t){function e(e,n){var i=t.call(this)||this;return i.keyValidators=e,i.valueValidators=n,i}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;for(var o in e)if(e.hasOwnProperty(o)){for(var a=(n?n+".":"")+i+"."+o,s=0,l=this.keyValidators;s<l.length;s++)if(r=l[s].validate(o,a,i))return r;for(var c=0,u=this.valueValidators;c<u.length;c++)if(r=u[c].validate(e[o],a,i))return r}return null},e}(n(4).ObjectValidator);e.MapValidator=o},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ParametersPanelValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"expanded",validators:[s.Validators.booleanValidator]},{field:"enabled",validators:[s.Validators.booleanValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ParametersPanelValidator=l},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TableDataValidator=e.TableSchemaValidator=e.ColumnSchemaValidator=e.CredentialsValidator=e.DatasourceConnectionConfigValidator=e.DatasetCreateConfigValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"locale",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"mashupDocument",validators:[s.Validators.stringValidator]},{field:"datasourceConnectionConfig",validators:[s.Validators.datasourceConnectionConfigValidator]},{field:"tableSchemaList",validators:[s.Validators.tableSchemaListValidator]},{field:"data",validators:[s.Validators.tableDataArrayValidator]}];return(r=new o.MultipleFieldsValidator(a).validate(e,n,i))||(e.datasourceConnectionConfig&&null==e.mashupDocument?[{message:"mashupDocument cannot be empty when datasourceConnectionConfig is presented"}]:e.data&&null==e.tableSchemaList?[{message:"tableSchemaList cannot be empty when data is provided"}]:null==e.data&&null==e.mashupDocument?[{message:"At least one of data or mashupDocument must be provided"}]:void 0)},e}(a.ObjectValidator);e.DatasetCreateConfigValidator=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"dataCacheMode",validators:[s.Validators.dataCacheModeValidator]},{field:"credentials",validators:[s.Validators.credentialsValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.DatasourceConnectionConfigValidator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"credentialType",validators:[s.Validators.credentialTypeValidator]},{field:"credentialDetails",validators:[s.Validators.credentialDetailsValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.CredentialsValidator=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"displayName",validators:[s.Validators.stringValidator]},{field:"dataType",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.ColumnSchemaValidator=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"columns",validators:[s.Validators.fieldRequiredValidator,s.Validators.columnSchemaArrayValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.TableSchemaValidator=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"name",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"rows",validators:[s.Validators.fieldRequiredValidator,s.Validators.rawDataValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.TableDataValidator=p},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.QuickCreateValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"accessToken",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"groupId",validators:[s.Validators.stringValidator]},{field:"tokenType",validators:[s.Validators.tokenTypeValidator]},{field:"theme",validators:[s.Validators.customThemeValidator]},{field:"datasetCreateConfig",validators:[s.Validators.fieldRequiredValidator,s.Validators.datasetCreateConfigValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.QuickCreateValidator=l},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PrintSettingsValidator=void 0;var o=n(3),a=n(4),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var s=[{field:"browserPrintAdjustmentsMode",validators:[new a.EnumValidator([0,1])]}];return new o.MultipleFieldsValidator(s).validate(e,n,i)},e}(a.ObjectValidator);e.PrintSettingsValidator=s},function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PaginatedReportDatasetBindingValidator=void 0;var o=n(3),a=n(4),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.validate=function(e,n,i){if(null==e)return null;var r=t.prototype.validate.call(this,e,n,i);if(r)return r;var a=[{field:"sourceDatasetId",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]},{field:"targetDatasetId",validators:[s.Validators.fieldRequiredValidator,s.Validators.stringValidator]}];return new o.MultipleFieldsValidator(a).validate(e,n,i)},e}(a.ObjectValidator);e.PaginatedReportDatasetBindingValidator=l}],e={},n=function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}(0);return n})(),t.exports=e()},14708:(t,e,n)=>{"use strict";n.d(e,{$e:()=>f,Bt:()=>y,IO:()=>s,KY:()=>m,ND:()=>r,NN:()=>o,Zb:()=>a,e$:()=>u,j$:()=>p,lp:()=>g,p8:()=>h,xq:()=>b,zO:()=>d});var i=n(85442);function r(t,e){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,i){return e+e+n+n+i+i}));const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),i=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null;return null===i?"":e||0===e?"rgba("+i.r+","+i.g+","+i.b+","+e+")":"rgb("+i.r+","+i.g+","+i.b+")"}function o(t,e){if(0===e)return t;const n=function(t,e){const n=t.H+e;return{H:n>1?n-1:n,S:t.S,V:t.V}}(l(s(t)),e);return d(c(n))}function a(t){return d(s(t))}function s(t){if(t.indexOf("#")>=0){if(7===t.length){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(null==e||e.length<4)return;return{R:parseInt(e[1],16),G:parseInt(e[2],16),B:parseInt(e[3],16)}}if(4===t.length){const e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i.exec(t);if(null==e||e.length<4)return;return{R:parseInt(e[1]+e[1],16),G:parseInt(e[2]+e[2],16),B:parseInt(e[3]+e[3],16)}}}else{if(t.indexOf("rgb(")>=0){const e=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(t);if(null==e||e.length<4)return;return{R:parseInt(e[1],10),G:parseInt(e[2],10),B:parseInt(e[3],10)}}if(t.indexOf("rgba(")>=0){const e=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*(?:\.\d+)?)\)$/.exec(t);if(null==e||e.length<5)return;return{R:parseInt(e[1],10),G:parseInt(e[2],10),B:parseInt(e[3],10),A:parseFloat(e[4])}}}}function l(t){let e,n;const i=t.R/255,r=t.G/255,o=t.B/255,a=Math.min(i,Math.min(r,o)),s=Math.max(i,Math.max(r,o)),l=s-a;return 0===s||0===l?(e=0,n=0):(e=l/s,n=i===s?(r-o)/l:r===s?2+(o-i)/l:4+(i-r)/l),n/=6,n<0&&(n+=1),{H:n,S:e,V:s}}function c(t){let e,n,i;const r=t.H,o=t.S,a=t.V;if(0===o)e=a,n=a,i=a;else{const t=6*r,s=Math.floor(t),l=t-s,c=a*(1-o),u=a*(1-o*l),h=a*(1-o*(1-l));switch(s){case 0:e=a,n=h,i=c;break;case 1:e=u,n=a,i=c;break;case 2:e=c,n=a,i=h;break;case 3:e=c,n=u,i=a;break;case 4:e=h,n=c,i=a;break;case 5:e=a,n=c,i=u}}return{R:Math.floor(255*e),G:Math.floor(255*n),B:Math.floor(255*i)}}function u(t,e){const n=Math.floor(e);return{R:Math.max(0,t.R-n),G:Math.max(0,t.G-n),B:Math.max(0,t.B-n)}}function h(t){return null==t.A?"rgb("+t.R+","+t.G+","+t.B+")":"rgba("+t.R+","+t.G+","+t.B+","+t.A+")"}function d(t){return"#"+v(t.R)+v(t.G)+v(t.B)}function p(t,e,n){return d(f(s(t),e,s(n)))}function f(t,e,n){return e=i.ensureInRange(e,0,1),{R:g(t.R,e,n.R),G:g(t.G,e,n.G),B:g(t.B,e,n.B)}}function g(t,e,n){return e=i.ensureInRange(e,0,1),t=i.ensureInRange(t,0,255),n=i.ensureInRange(n,0,255),Math.round(e*t+(1-e)*n)}function m(t,e,n){const i=l(t);return(e+n>1||e<=0||n<=0)&&(e=.8,n=.2),i.V<e?i.V=i.V+n:i.V=i.V-n,d(c(i))}function v(t){const e=i.ensureInRange(t,0,255).toString(16).toUpperCase();return 1===e.length?"0"+e:e}function y(t,e,n){const i=e.map((t=>s(t)));return r=>{if(null==r&&(r=0),isNaN(r))return;if(n){if(r>=t[t.length-1])return e[e.length-1];if(r<=t[0])return e[0]}let o,a,s,l;for(let n=1,c=t.length;n<c;n++){if(o=t[n-1],a=t[n],a===r)return e[n];if(r>=o&&r<=a){s=i[n-1],l=i[n];break}}return d({R:Math.round((r-o)*(l.R-s.R)/(a-o)+s.R),G:Math.round((r-o)*(l.G-s.G)/(a-o)+s.G),B:Math.round((r-o)*(l.B-s.B)/(a-o)+s.B)})}}function b(t,e){const n=parseInt(t.slice(1),16),i=e<0?0:255,r=e<0?-1*e:e,o=n>>16,a=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((i-o)*r)+o)+256*(Math.round((i-a)*r)+a)+(Math.round((i-s)*r)+s)).toString(16).slice(1)}},86986:(t,e,n)=>{"use strict";n.d(e,{IO:()=>o,KY:()=>r});var i=n(14708),r=i.KY,o=(i.lp,i.Bt,i.e$,i.j$,i.zO,i.ND,i.Zb,i.IO);i.$e,i.p8,i.NN,i.xq},94916:(t,e,n)=>{"use strict";n.r(e),n.d(e,{categoryIsAlsoSeriesRole:()=>r,getMiscellaneousTypeDescriptor:()=>l,getSeriesName:()=>o,hasImageUrlColumn:()=>c,isImageUrlColumn:()=>a,isWebUrlColumn:()=>s});var i=n(34806);function r(t,e,n){if(t.categories&&t.categories.length>0){const r=t.categories[0];return r.source&&i.hasRole(r.source,e)&&i.hasRole(r.source,n)}return!1}function o(t){return void 0!==t.groupName?t.groupName:t.queryName}function a(t){const e=l(t);return null!=e&&!0===e.imageUrl}function s(t){const e=l(t);return null!=e&&!0===e.webUrl}function l(t){return t&&t.type&&t.type.misc}function c(t){return!!(t&&t.metadata&&t.metadata.columns&&t.metadata.columns.length)&&t.metadata.columns.some((t=>!0===a(t)))}},34806:(t,e,n)=>{"use strict";function i(t,e){if(!t||!t.length)return-1;const n=t[0];if(n.values&&n.values.length>0)for(let t=0,i=n.values.length;t<i;++t){const i=n.values[t];if(i&&i.source&&o(i.source,e))return t}return-1}function r(t,e){if(t&&t.length)for(let n=0,i=t.length;n<i;n++)if(o(t[n].source,e))return n;return-1}function o(t,e){const n=t.roles;return n&&n[e]}function a(t,e){return null!=t&&null!=t.metadata&&t.metadata.columns&&t.metadata.columns.some((t=>t.roles&&void 0!==t.roles[e]))}function s(t,e){return t&&t.source&&t.source.roles&&!0===t.source.roles[e]}n.r(e),n.d(e,{getCategoryIndexOfRole:()=>r,getMeasureIndexOfRole:()=>i,hasRole:()=>o,hasRoleInDataView:()=>a,hasRoleInValueColumn:()=>s})},91888:(t,e,n)=>{"use strict";function i(t,e,n){if(!t)return n;const i=t[e];return void 0===i?n:i}function r(t,e,n){const r=i(t,e);return r&&r.solid?r.solid.color:n}n.r(e),n.d(e,{getFillColorByPropertyName:()=>r,getValue:()=>i})},36271:(t,e,n)=>{"use strict";n.r(e),n.d(e,{getCommonValue:()=>s,getFillColor:()=>a,getObject:()=>o,getValue:()=>r});var i=n(91888);function r(t,e,n){return t?i.getValue(t[e.objectName],e.propertyName,n):n}function o(t,e,n){return t&&t[e]?t[e]:n}function a(t,e,n){const i=r(t,e);return i&&i.solid?i.solid.color:n}function s(t,e,n){const i=r(t,e,n);return i&&i.solid?i.solid.color:null==i||"object"==typeof i&&!i.solid?n:i}},93116:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DataViewObjectsParser:()=>r});var i=n(36271);class r{static getDefault(){return new this}static createPropertyIdentifier(t,e){return{objectName:t,propertyName:e}}static parse(t){const e=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return e;const n=e.getProperties();for(const r in n)for(const o in n[r]){const a=e[r][o];e[r][o]=i.getCommonValue(t.metadata.objects,n[r][o],a)}return e}static isPropertyEnumerable(t){return!r.InnumerablePropertyPrefix.test(t)}static enumerateObjectInstances(t,e){const n=t&&t[e.objectName];if(!n)return[];const i={objectName:e.objectName,selector:null,properties:{}};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(i.properties[t]=n[t]);return{instances:[i]}}getProperties(){const t={};return Object.keys(this).forEach((e=>{if(r.isPropertyEnumerable(e)){const n=Object.keys(this[e]);t[e]={},n.forEach((n=>{r.isPropertyEnumerable(e)&&(t[e][n]=r.createPropertyIdentifier(e,n))}))}})),t}}r.InnumerablePropertyPrefix=/^_/},11247:(t,e,n)=>{"use strict";function i(t=[],e,n){const i=t;return r(i),e&&(i.identityFields=e),n&&(i.source=n),i}function r(t,e){t.grouped=e?()=>e:()=>o(t)}function o(t){const e=[];let n;for(let i=0,r=t.length;i<r;i++){const r=t[i];if(!n||n.identity!==r.identity){if(n={values:[]},r.identity){n.identity=r.identity;const t=r.source;void 0!==t.groupName?n.name=t.groupName:t.displayName&&(n.name=t.displayName)}e.push(n)}n.values.push(r)}return e}n.r(e),n.d(e,{createValueColumns:()=>i,groupValues:()=>o,setGrouped:()=>r})},889:(t,e,n)=>{"use strict";function i(t){return null==t&&(t=0),{data:[{dataViewWildcard:{matchingOption:t}}]}}n.r(e),n.d(e,{createDataViewWildcardSelector:()=>i})},40724:(t,e,n)=>{"use strict";n.r(e),n.d(e,{converterHelper:()=>i,dataRoleHelper:()=>r,dataViewObject:()=>o,dataViewObjects:()=>a,dataViewObjectsParser:()=>s,dataViewTransform:()=>l,dataViewWildcard:()=>c});var i=n(94916),r=n(34806),o=n(91888),a=n(36271),s=n(93116),l=n(11247),c=n(889)},89754:(t,e,n)=>{"use strict";n.d(e,{$n:()=>h,Ap:()=>g,Cx:()=>w,D:()=>u,Kx:()=>a,PA:()=>v,St:()=>s,Tn:()=>c,YJ:()=>l,YS:()=>x,iB:()=>f,jF:()=>d,ks:()=>b,lp:()=>y,lr:()=>m,sk:()=>p,tc:()=>k,uI:()=>S});var i=n(18639);class r{}class o extends r{}class a{}class s extends r{}class l extends o{constructor(t){super(),Object.assign(this,t)}}class c extends o{}class u extends r{constructor(t){super(),Object.assign(this,t)}getFormattingSlice(t,e){const n=this.type,i=this.name,r={displayName:e&&this.displayNameKey?e.getDisplayName(this.displayNameKey):this.displayName,description:e&&this.descriptionKey?e.getDisplayName(this.descriptionKey):this.description,uid:t+"-"+i};return Object.assign(Object.assign({},r),{control:{type:n,properties:this.getFormattingComponent(t,e)}})}getFormattingComponent(t,e){return{descriptor:i.y(t,this),value:this.value}}getRevertToDefaultDescriptor(t){return[{objectName:t,propertyName:this.name}]}setPropertiesValues(t,e){var n;const r=null===(n=null==t?void 0:t[e])||void 0===n?void 0:n[this.name];this.value=i.D(this,r,this.value)}}class h extends u{constructor(t){super(t),this.type="AlignmentGroup"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{mode:this.mode,supportsNoSelection:this.supportsNoSelection})}}class d extends u{constructor(t){super(t),this.type="ToggleSwitch"}}class p extends u{constructor(t){super(t),this.type="ColorPicker"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{defaultColor:this.defaultColor,isNoFillItemSupported:this.isNoFillItemSupported})}}class f extends u{constructor(t){super(t),this.type="NumUpDown"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{options:this.options})}}class g extends f{constructor(){super(...arguments),this.type="Slider"}}class m extends u{constructor(t){super(t),this.type="DatePicker"}getFormattingComponent(t,e){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{placeholder:e&&this.placeholderKey?e.getDisplayName(this.placeholderKey):this.placeholder,validators:this.validators})}}class v extends u{constructor(t){super(t),this.type="Dropdown"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{items:this.items})}}class y extends u{constructor(t){super(t),this.type="Dropdown"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{mergeValues:this.mergeValues,filterValues:this.filterValues})}}class b extends u{constructor(t){super(t),this.type="TextInput"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{placeholder:this.placeholder})}}class w extends u{constructor(){super(...arguments),this.type="FontPicker"}}class S extends u{constructor(){super(...arguments),this.type="ReadOnlyText"}}class x extends r{constructor(t){super(),Object.assign(this,t)}getFormattingSlice(t,e){const n=this.type,i=this.name,r={displayName:e&&this.displayNameKey?e.getDisplayName(this.displayNameKey):this.displayName,description:e&&this.descriptionKey?e.getDisplayName(this.descriptionKey):this.description,uid:t+"-"+i};return Object.assign(Object.assign({},r),{control:{type:n,properties:this.getFormattingComponent(t)}})}}class k extends x{constructor(t){super(t),this.type="FontControl"}getFormattingComponent(t){var e,n,i;return{fontFamily:this.fontFamily.getFormattingComponent(t),fontSize:this.fontSize.getFormattingComponent(t),bold:null===(e=this.bold)||void 0===e?void 0:e.getFormattingComponent(t),italic:null===(n=this.italic)||void 0===n?void 0:n.getFormattingComponent(t),underline:null===(i=this.underline)||void 0===i?void 0:i.getFormattingComponent(t)}}getRevertToDefaultDescriptor(t){return this.fontFamily.getRevertToDefaultDescriptor(t).concat(this.fontSize.getRevertToDefaultDescriptor(t)).concat(this.bold?this.bold.getRevertToDefaultDescriptor(t):[]).concat(this.italic?this.italic.getRevertToDefaultDescriptor(t):[]).concat(this.underline?this.underline.getRevertToDefaultDescriptor(t):[])}setPropertiesValues(t,e){var n,i,r;this.fontFamily.setPropertiesValues(t,e),this.fontSize.setPropertiesValues(t,e),null===(n=this.bold)||void 0===n||n.setPropertiesValues(t,e),null===(i=this.italic)||void 0===i||i.setPropertiesValues(t,e),null===(r=this.underline)||void 0===r||r.setPropertiesValues(t,e)}}},76667:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(89754);const r=class{constructor(t){this.localizationManager=t}populateFormattingSettingsModel(t,e){var n,r;const o=new t,a=null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.objects;return a&&(null===(r=o.cards)||void 0===r||r.forEach((t=>{var e;t instanceof i.St&&(null===(e=t.topLevelSlice)||void 0===e||e.setPropertiesValues(a,t.name)),(t instanceof i.Tn?[t]:t.groups).forEach((e=>{var n,i,r,o;null===(n=e.topLevelSlice)||void 0===n||n.setPropertiesValues(a,t.name),null===(i=null==e?void 0:e.slices)||void 0===i||i.forEach((e=>{null==e||e.setPropertiesValues(a,t.name)})),null===(o=null===(r=null==e?void 0:e.container)||void 0===r?void 0:r.containerItems)||void 0===o||o.forEach((e=>{var n;null===(n=null==e?void 0:e.slices)||void 0===n||n.forEach((e=>{null==e||e.setPropertiesValues(a,t.name)}))}))}))}))),o}buildFormattingModel(t){const e={cards:[]};return t.cards.filter((({visible:t=!0})=>t)).forEach((t=>{var n;const r={displayName:this.localizationManager&&t.displayNameKey?this.localizationManager.getDisplayName(t.displayNameKey):t.displayName,description:this.localizationManager&&t.descriptionKey?this.localizationManager.getDisplayName(t.descriptionKey):t.description,groups:[],uid:t.name+"-card",analyticsPane:t.analyticsPane},o=t.name;if(t.topLevelSlice){const e=t.topLevelSlice.getFormattingSlice(o,this.localizationManager);e.suppressDisplayName=!0,r.topLevelToggle=e}null===(n=t.onPreProcess)||void 0===n||n.call(t);const a=t instanceof i.Tn;(a?[t].filter((({visible:t=!0})=>t)):t.groups.filter((({visible:t=!0})=>t))).forEach((t=>{const e=t.name+"-group",n={displayName:a?void 0:this.localizationManager&&t.displayNameKey?this.localizationManager.getDisplayName(t.displayNameKey):t.displayName,description:a?void 0:this.localizationManager&&t.descriptionKey?this.localizationManager.getDisplayName(t.descriptionKey):t.description,slices:[],uid:e,collapsible:t.collapsible,delaySaveSlices:t.delaySaveSlices,disabled:t.disabled,disabledReason:t.disabledReason};r.groups.push(n);const i={};if(t.container){const r=t.container,a=e+"-container",s={displayName:this.localizationManager&&r.displayNameKey?this.localizationManager.getDisplayName(r.displayNameKey):r.displayName,description:this.localizationManager&&r.descriptionKey?this.localizationManager.getDisplayName(r.descriptionKey):r.description,containerItems:[],uid:a};r.containerItems.forEach((t=>{const e=t.displayNameKey?t.displayNameKey:t.displayName,n=a+e,r={displayName:this.localizationManager&&t.displayNameKey?this.localizationManager.getDisplayName(t.displayNameKey):t.displayName,slices:[],uid:n};this.buildFormattingSlices({slices:t.slices,objectName:o,sliceNames:i,formattingSlices:r.slices}),s.containerItems.push(r)})),n.container=s}if(t.slices){if(t.topLevelSlice){const e=t.topLevelSlice.getFormattingSlice(o,this.localizationManager);e.suppressDisplayName=!0,(null==n.displayName?r:n).topLevelToggle=e}this.buildFormattingSlices({slices:t.slices,objectName:o,sliceNames:i,formattingSlices:n.slices})}})),r.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(t),e.cards.push(r)})),e}buildFormattingSlices({slices:t,objectName:e,sliceNames:n,formattingSlices:i}){null==t||t.filter((({visible:t=!0})=>t)).forEach((t=>{const r=null==t?void 0:t.getFormattingSlice(e,this.localizationManager);r&&(void 0===n[t.name]?n[t.name]=0:(n[t.name]++,r.uid=`${r.uid}-${n[t.name]}`),i.push(r))}))}getRevertToDefaultDescriptor(t){var e;const n={},r=[];let o,a=[];return t instanceof i.St&&t.topLevelSlice&&r.push(...null===(e=t.topLevelSlice)||void 0===e?void 0:e.getRevertToDefaultDescriptor(t.name)),(t instanceof i.Tn?[t].filter((({visible:t=!0})=>t)):t.groups.filter((({visible:t=!0})=>t))).forEach((e=>{var i,s;o=this.getSlicesRevertToDefaultDescriptor(t.name,e.slices,n,e.topLevelSlice),null===(s=null===(i=e.container)||void 0===i?void 0:i.containerItems)||void 0===s||s.forEach((e=>{a=a.concat(this.getSlicesRevertToDefaultDescriptor(t.name,e.slices,n))})),r.push(...o.concat(a))})),r}getSlicesRevertToDefaultDescriptor(t,e,n,i){let r=[];return i&&(n[i.name]=!0,r=r.concat(i.getRevertToDefaultDescriptor(t))),null==e||e.forEach((e=>{e&&!n[e.name]&&(n[e.name]=!0,r=r.concat(e.getRevertToDefaultDescriptor(t)))})),r}}},87674:(t,e,n)=>{"use strict";n.d(e,{O:()=>r.A,z:()=>i});var i=n(89754),r=n(76667)},18639:(t,e,n)=>{"use strict";function i(t,e){return{objectName:t,propertyName:e.name,selector:e.selector,altConstantValueSelector:e.altConstantSelector,instanceKind:e.instanceKind}}function r(t,e,n){return null==e||"object"==typeof e&&!e.solid?n:e.solid?{value:null==e?void 0:e.solid.color}:"Dropdown"===(null==t?void 0:t.type)&&t.items?t.items.find((t=>t.value==e)):e}n.d(e,{D:()=>r,y:()=>i})},90980:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(50521);e.default=function(t){Object.keys(i.locales).forEach((function(e){return t.addCultureInfo.apply(t,i.locales[e])}))}},77717:(t,e)=>{"use strict";var n,i,r,o,a,s,l,c;Object.defineProperty(e,"__esModule",{value:!0}),e.parseNegativePattern=e.parseExact=e.getEraYear=e.getEra=e.getTokenRegExp=e.formatNumber=e.formatDate=e.expandFormat=e.appendPreOrPostMatch=e.zeroPad=e.trim=e.startsWith=e.isObject=e.isFunction=e.isArray=e.extend=e.endsWith=e.arrayIndexOf=e.regexTrim=e.regexParseFloat=e.regexInfinity=e.regexHex=e.Globalize=void 0,e.Globalize=function(t){return new e.Globalize.prototype.init(t)},e.Globalize.cultures={},e.Globalize.prototype={constructor:e.Globalize,init:function(t){return this.cultures=e.Globalize.cultures,this.cultureSelector=t,this}},e.Globalize.prototype.init.prototype=e.Globalize.prototype,e.Globalize.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},e.Globalize.cultures.default.calendar=e.Globalize.cultures.default.calendars.standard,e.Globalize.cultures.en=e.Globalize.cultures.default,e.Globalize.cultureSelector="en",e.regexHex=/^0x[a-f0-9]+$/i,e.regexInfinity=/^[+-]?infinity$/i,e.regexParseFloat=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,e.regexTrim=/^\s+|\s+$/g,e.arrayIndexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},e.endsWith=function(t,e){return t.substring(t.length-e.length)===e},e.extend=function(t){var n,i,r,o,a,s,l=arguments[0]||{},c=1,u=arguments.length;for(t=!1,"boolean"==typeof l&&(t=l,l=arguments[1]||{},c=2),"object"==typeof l||(0,e.isFunction)(l)||(l={});c<u;c++)if(null!=(n=arguments[c]))for(i in n)r=l[i],l!==(o=n[i])&&(t&&o&&((0,e.isObject)(o)||(a=(0,e.isArray)(o)))?(a?(a=!1,s=r&&(0,e.isArray)(r)?r:[]):s=r&&(0,e.isObject)(r)?r:{},l[i]=(0,e.extend)(t,s,o)):void 0!==o&&(l[i]=o));return l},e.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.startsWith=function(t,e){return 0===t.indexOf(e)},e.trim=function(t){return(t+"").replace(e.regexTrim,"")},e.zeroPad=function(t,e,n){var i;for(i=t.length;i<e;i+=1)t=n?"0"+t:t+"0";return t},e.appendPreOrPostMatch=function(t,e){for(var n=0,i=!1,r=0,o=t.length;r<o;r++){var a=t.charAt(r);switch(a){case"'":i?e.push("'"):n++,i=!1;break;case"\\":i&&e.push("\\"),i=!i;break;default:e.push(a),i=!1}}return n},e.expandFormat=function(t,e){e=e||"F";var n,i=t.patterns,r=e.length;if(1===r){if(!(n=i[e]))throw"Invalid date format string '"+e+"'.";e=n}else 2===r&&"%"===e.charAt(0)&&(e=e.charAt(1));return e},e.formatDate=function(t,n,i){var r=i.calendar,o=r.convert;if(!n||!n.length||"i"===n){var a;if(i&&i.name.length)if(o)a=(0,e.formatDate)(t,r.patterns.F,i);else{var s=new Date(t.getTime()),l=(0,e.getEra)(t,r.eras);s.setFullYear((0,e.getEraYear)(t,r,l)),a=s.toLocaleString()}else a=t.toString();return a}var c=r.eras,u="s"===n;n=(0,e.expandFormat)(r,n),a=[];var h,d,p,f,g=["0","00","000"],m=/([^d]|^)(d|dd)([^d]|$)/g,v=0,y=(0,e.getTokenRegExp)();function b(t,e){var n,i=t+"";return e>1&&i.length<e?(n=g[e-2]+i).substring(n.length-e,n.length):n=i}function w(t,e){if(f)return f[e];switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate()}}for(!u&&o&&(f=o.fromGregorian(t));;){var S=y.lastIndex,x=y.exec(n),k=n.slice(S,x?x.index:n.length);if(v+=(0,e.appendPreOrPostMatch)(k,a),!x)break;if(v%2)a.push(x[0]);else{var C=x[0],M=C.length;switch(C){case"ddd":case"dddd":var T=3===M?r.days.namesAbbr:r.days.names;a.push(T[t.getDay()]);break;case"d":case"dd":d=!0,a.push(b(w(t,2),M));break;case"MMM":case"MMMM":var E=w(t,1);a.push(r.monthsGenitive&&(d||p||(d=m.test(n),p=!0),d)?r.monthsGenitive[3===M?"namesAbbr":"names"][E]:r.months[3===M?"namesAbbr":"names"][E]);break;case"M":case"MM":a.push(b(w(t,1)+1,M));break;case"y":case"yy":case"yyyy":E=f?f[0]:(0,e.getEraYear)(t,r,(0,e.getEra)(t,c),u),M<4&&(E%=100),a.push(b(E,M));break;case"h":case"hh":0==(h=t.getHours()%12)&&(h=12),a.push(b(h,M));break;case"H":case"HH":a.push(b(t.getHours(),M));break;case"m":case"mm":a.push(b(t.getMinutes(),M));break;case"s":case"ss":a.push(b(t.getSeconds(),M));break;case"t":case"tt":E=t.getHours()<12?r.AM?r.AM[0]:" ":r.PM?r.PM[0]:" ",a.push(1===M?E.charAt(0):E);break;case"f":case"ff":case"fff":a.push(b(t.getMilliseconds(),3).substring(0,M));break;case"z":case"zz":h=t.getTimezoneOffset()/60,a.push((h<=0?"+":"-")+b(Math.floor(Math.abs(h)),M));break;case"zzz":h=t.getTimezoneOffset()/60,a.push((h<=0?"+":"-")+b(Math.floor(Math.abs(h)),2)+":"+b(Math.abs(t.getTimezoneOffset()%60),2));break;case"g":case"gg":r.eras&&a.push(r.eras[(0,e.getEra)(t,c)].name);break;case"/":a.push(r["/"]);break;default:throw"Invalid date format pattern '"+C+"'."}}}return a.join("")},n=function(t,n,i){var r=i.groupSizes,o=r[0],a=1,s=Math.pow(10,n),l=Math.round(t*s)/s;isFinite(l)||(l=t);var c=(t=l)+"",u="",h=c.split(/e/i),d=h.length>1?parseInt(h[1],10):0;h=(c=h[0]).split("."),c=h[0],u=h.length>1?h[1]:"",d>0?(c+=(u=(0,e.zeroPad)(u,d,!1)).slice(0,d),u=u.substring(d)):d<0&&(d=-d,u=(c=(0,e.zeroPad)(c,d+1)).slice(-d,c.length)+u,c=c.slice(0,-d)),u=n>0?i["."]+(u.length>n?u.slice(0,n):(0,e.zeroPad)(u,n)):"";for(var p=c.length-1,f=i[","],g="";p>=0;){if(0===o||o>p)return c.slice(0,p+1)+(g.length?f+g+u:u);g=c.slice(p-o+1,p+1)+(g.length?f+g:""),p-=o,a<r.length&&(o=r[a],a++)}return c.slice(0,p+1)+f+g+u},e.formatNumber=function(t,i,r){if(!i||"i"===i)return r.name.length?t.toLocaleString():t.toString();i=i||"D";var o,a=r.numberFormat,s=Math.abs(t),l=-1;i.length>1&&(l=parseInt(i.slice(1),10));var c,u=i.charAt(0).toUpperCase();switch(u){case"D":o="n",-1!==l&&(s=(0,e.zeroPad)(""+s,l,!0)),t<0&&(s=-s);break;case"N":c=a;case"C":c=c||a.currency;case"P":c=c||a.percent,o=t<0?c.pattern[0]:c.pattern[1]||"n",-1===l&&(l=c.decimals),s=n(s*("P"===u?100:1),l,c);break;default:throw"Bad number format specifier: "+u}for(var h=/n|\$|-|%/g,d="";;){var p=h.lastIndex,f=h.exec(o);if(d+=o.slice(p,f?f.index:o.length),!f)break;switch(f[0]){case"n":d+=s;break;case"$":d+=a.currency.symbol;break;case"-":/[1-9]/.test(s.toString())&&(d+=a["-"]);break;case"%":d+=a.percent.symbol}}return d},e.getTokenRegExp=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},e.getEra=function(t,e){if(!e)return 0;for(var n,i=t.getTime(),r=0,o=e.length;r<o;r++)if(null===(n=e[r].start)||i>=n)return r;return 0},e.getEraYear=function(t,e,n,i){var r=t.getFullYear();return!i&&e.eras&&(r-=e.eras[n].offset),r},i=function(t,n){var i=new Date,r=(0,e.getEra)(i);if(n<100){var o=t.twoDigitYearMax;o="string"==typeof o?(new Date).getFullYear()%100+parseInt(o,10):o;var a=(0,e.getEraYear)(i,t,r);(n+=a-a%100)>o&&(n-=100)}return n},r=function(t,n,i){var r,o=t.days,a=t._upperDays;return a||(t._upperDays=a=[c(o.names),c(o.namesAbbr),c(o.namesShort)]),n=l(n),i?-1===(r=(0,e.arrayIndexOf)(a[1],n))&&(r=(0,e.arrayIndexOf)(a[2],n)):r=(0,e.arrayIndexOf)(a[0],n),r},o=function(t,n,i){var r=t.months,o=t.monthsGenitive||t.months,a=t._upperMonths,s=t._upperMonthsGen;a||(t._upperMonths=a=[c(r.names),c(r.namesAbbr)],t._upperMonthsGen=s=[c(o.names),c(o.namesAbbr)]),n=l(n);var u=(0,e.arrayIndexOf)(i?a[1]:a[0],n);return u<0&&(u=(0,e.arrayIndexOf)(i?s[1]:s[0],n)),u},a=function(t,n){var i=t._parseRegExp;if(i){var r=i[n];if(r)return r}else t._parseRegExp=i={};for(var o,a=(0,e.expandFormat)(t,n).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),s=["^"],l=[],c=0,u=0,h=(0,e.getTokenRegExp)();null!==(o=h.exec(a));){var d=a.slice(c,o.index);if(c=h.lastIndex,(u+=(0,e.appendPreOrPostMatch)(d,s))%2)s.push(o[0]);else{var p,f=o[0],g=f.length;switch(f){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":p="(\\D+)";break;case"tt":case"t":p="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":p="(\\d{"+g+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":p="(\\d\\d?)";break;case"zzz":p="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":p="([+-]?\\d\\d?)";break;case"/":p="(\\"+t["/"]+")";break;default:throw"Invalid date format pattern '"+f+"'."}p&&s.push(p),l.push(o[0])}}(0,e.appendPreOrPostMatch)(a.slice(c),s),s.push("$");var m={regExp:s.join("").replace(/\s+/g,"\\s+"),groups:l};return i[n]=m},s=function(t,e,n){return t<e||t>n},l=function(t){return t.split(" ").join(" ").toUpperCase()},c=function(t){for(var e=[],n=0,i=t.length;n<i;n++)e[n]=l(t[n]);return e},e.parseExact=function(t,n,l){t=(0,e.trim)(t);var c=l.calendar,u=a(c,n),h=new RegExp(u.regExp).exec(t);if(null===h)return null;for(var d,p=u.groups,f=null,g=null,m=null,v=null,y=null,b=0,w=0,S=0,x=0,k=null,C=!1,M=0,T=p.length;M<T;M++){var E=h[M+1];if(E){var A=p[M],_=A.length,P=parseInt(E,10);switch(A){case"dd":case"d":if(s(v=P,1,31))return null;break;case"MMM":case"MMMM":if(m=o(c,E,3===_),s(m,0,11))return null;break;case"M":case"MM":if(s(m=P-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(g=_<4?i(c,P):P,s(g,0,9999))return null;break;case"h":case"hh":if(12===(b=P)&&(b=0),s(b,0,11))return null;break;case"H":case"HH":if(s(b=P,0,23))return null;break;case"m":case"mm":if(s(w=P,0,59))return null;break;case"s":case"ss":if(s(S=P,0,59))return null;break;case"tt":case"t":if(!(C=c.PM&&(E===c.PM[0]||E===c.PM[1]||E===c.PM[2]))&&(!c.AM||E!==c.AM[0]&&E!==c.AM[1]&&E!==c.AM[2]))return null;break;case"f":case"ff":case"fff":if(x=P*Math.pow(10,3-_),s(x,0,999))return null;break;case"ddd":case"dddd":if(y=r(c,E,3===_),s(y,0,6))return null;break;case"zzz":var D=E.split(/:/);if(2!==D.length)return null;if(d=parseInt(D[0],10),s(d,-12,13))return null;var O=parseInt(D[1],10);if(s(O,0,59))return null;k=60*d+((0,e.startsWith)(E,"-")?-O:O);break;case"z":case"zz":if(s(d=P,-12,13))return null;k=60*d;break;case"g":case"gg":var L=E;if(!L||!c.eras)return null;L=(0,e.trim)(L.toLowerCase());for(var I=0,R=c.eras.length;I<R;I++)if(L===c.eras[I].name.toLowerCase()){f=I;break}if(null===f)return null}}}var V,N=new Date,F=c.convert;if(V=F?F.fromGregorian(N)[0]:N.getFullYear(),null===g?g=V:c.eras&&(g+=c.eras[f||0].offset),null===m&&(m=0),null===v&&(v=1),F){if(null===(N=F.toGregorian(g,m,v)))return null}else{if(N.setFullYear(g,m,v),N.getDate()!==v)return null;if(null!==y&&N.getDay()!==y)return null}if(C&&b<12&&(b+=12),N.setHours(b,w,S,x),null!==k){var B=N.getMinutes()-(k+N.getTimezoneOffset());N.setHours(N.getHours()+parseInt((B/60).toString(),10),B%60)}return N},e.parseNegativePattern=function(t,n,i){var r,o=n["-"],a=n["+"];switch(i){case"n -":o=" "+o,a=" "+a;case"n-":(0,e.endsWith)(t,o)?r=["-",t.substring(0,t.length-o.length)]:(0,e.endsWith)(t,a)&&(r=["+",t.substring(0,t.length-a.length)]);break;case"- n":o+=" ",a+=" ";case"-n":(0,e.startsWith)(t,o)?r=["-",t.substring(o.length)]:(0,e.startsWith)(t,a)&&(r=["+",t.substring(a.length)]);break;case"(n)":(0,e.startsWith)(t,"(")&&(0,e.endsWith)(t,")")&&(r=["-",t.substring(1,t.length-1)])}return r||["",t]},e.Globalize.prototype.findClosestCulture=function(t){return e.Globalize.findClosestCulture.call(this,t)},e.Globalize.prototype.format=function(t,n,i){return e.Globalize.format.call(this,t,n,i)},e.Globalize.prototype.localize=function(t,n){return e.Globalize.localize.call(this,t,n)},e.Globalize.prototype.parseInt=function(t,n,i){return e.Globalize.parseInt.call(this,t,n,i)},e.Globalize.prototype.parseFloat=function(t,n,i){return e.Globalize.parseFloat.call(this,t,n,i)},e.Globalize.prototype.culture=function(t){return e.Globalize.culture.call(this,t)},e.Globalize.addCultureInfo=function(t,n,i){var r={},o=!1;"string"!=typeof t?(i=t,t=this.culture().name,r=this.cultures[t]):"string"!=typeof n?(i=n,o=null==this.cultures[t],r=this.cultures[t]||this.cultures.default):(o=!0,r=this.cultures[n]),this.cultures[t]=(0,e.extend)(!0,{},r,i),o&&(this.cultures[t].calendar=this.cultures[t].calendars.standard)},e.Globalize.findClosestCulture=function(t){var n;if(!t)return this.cultures[this.cultureSelector]||this.cultures.default;if("string"==typeof t&&(t=t.split(",")),(0,e.isArray)(t)){var i,r,o=this.cultures,a=t,s=a.length,l=[];for(r=0;r<s;r++){var c,u=(t=(0,e.trim)(a[r])).split(";");i=(0,e.trim)(u[0]),1===u.length?c=1:0===(t=(0,e.trim)(u[1])).indexOf("q=")?(t=t.substring(2),c=parseFloat(t),c=isNaN(c)?0:c):c=1,l.push({lang:i,pri:c})}for(l.sort((function(t,e){return t.pri<e.pri?1:-1})),r=0;r<s;r++)if(n=o[i=l[r].lang])return n;for(r=0;r<s;r++)for(i=l[r].lang;;){var h=i.lastIndexOf("-");if(-1===h)break;if(n=o[i=i.substring(0,h)])return n}for(r=0;r<s;r++)for(var d in i=l[r].lang,o){var p=o[d];if(p.language==i)return p}}else if("object"==typeof t)return t;return n||null},e.Globalize.format=function(t,n,i){var r=this.findClosestCulture(i);return t instanceof Date?t=(0,e.formatDate)(t,n,r):"number"==typeof t&&(t=(0,e.formatNumber)(t,n,r)),t},e.Globalize.localize=function(t,e){return this.findClosestCulture(e).messages[t]||this.cultures.default.messages.key},e.Globalize.parseDate=function(t,n,i){var r,o,a;if(i=this.findClosestCulture(i),n){if("string"==typeof n&&(n=[n]),n.length)for(var s=0,l=n.length;s<l;s++){var c=n[s];if(c&&(r=(0,e.parseExact)(t,c,i)))break}}else for(o in a=i.calendar.patterns)if(r=(0,e.parseExact)(t,a[o],i))break;return r||null},e.Globalize.parseInt=function(t,n,i){return Math.floor(e.Globalize.parseFloat(t,n,i))},e.Globalize.parseFloat=function(t,n,i){"number"!=typeof n&&(i=n,n=10);var r=this.findClosestCulture(i),o=NaN,a=r.numberFormat;if(t.indexOf(r.numberFormat.currency.symbol)>-1&&(t=(t=t.replace(r.numberFormat.currency.symbol,"")).replace(r.numberFormat.currency["."],r.numberFormat["."])),t=(0,e.trim)(t),e.regexInfinity.test(t))o=parseFloat(t);else if(!n&&e.regexHex.test(t))o=parseInt(t,16);else{var s=(0,e.parseNegativePattern)(t,a,a.pattern[0]),l=s[0],c=s[1];""===l&&"-n"!==a.pattern[0]&&(l=(s=(0,e.parseNegativePattern)(t,a,"-n"))[0],c=s[1]),l=l||"+";var u,h,d=c.indexOf("e");d<0&&(d=c.indexOf("E")),d<0?(h=c,u=null):(h=c.substring(0,d),u=c.substring(d+1));var p,f,g=a["."],m=h.indexOf(g);m<0?(p=h,f=null):(p=h.substring(0,m),f=h.substring(m+g.length));var v=a[","];p=p.split(v).join("");var y=v.replace(/\u00A0/g," ");v!==y&&(p=p.split(y).join(""));var b=l+p;if(null!==f&&(b+="."+f),null!==u){var w=(0,e.parseNegativePattern)(u,a,"-n");b+="e"+(w[0]||"+")+w[1]}e.regexParseFloat.test(b)&&(o=parseFloat(b))}return o},e.Globalize.culture=function(t){return void 0!==t&&(this.cultureSelector=t),this.findClosestCulture(t)||this.culture.default}},67630:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateTimeSequence=void 0;var i=n(47925),r=n(52087),o=r.numericSequence.NumericSequence,a=r.numericSequenceRange.NumericSequenceRange,s=n(83351),l=function(){function t(t){this.unit=t,this.sequence=[],this.min=new Date("9999-12-31T23:59:59.999"),this.max=new Date("0001-01-01T00:00:00.000")}return t.prototype.add=function(t){t<this.min&&(this.min=t),t>this.max&&(this.max=t),this.sequence.push(t)},t.prototype.extendToCover=function(e,n){for(var i=this.min;e<i;)i=t.ADD_INTERVAL(i,-this.interval,this.unit),this.sequence.splice(0,0,i);for(this.min=i,i=this.max;i<n;)i=t.ADD_INTERVAL(i,this.interval,this.unit),this.sequence.push(i);this.max=i},t.prototype.moveToCover=function(e,n){var i=t.getDelta(e,n,this.unit),r=Math.floor(i/this.interval);for(this.min=t.ADD_INTERVAL(this.min,r*this.interval,this.unit),this.sequence=[],this.sequence.push(this.min),this.max=this.min;this.max<n;)this.max=t.ADD_INTERVAL(this.max,this.interval,this.unit),this.sequence.push(this.max)},t.CALCULATE=function(e,n,i,r){switch(r||(r=t.GET_INTERVAL_UNIT(e,n,i)),r){case s.DateTimeUnit.Year:return t.CALCULATE_YEARS(e,n,i);case s.DateTimeUnit.Month:return t.CALCULATE_MONTHS(e,n,i);case s.DateTimeUnit.Week:return t.CALCULATE_WEEKS(e,n,i);case s.DateTimeUnit.Day:return t.CALCULATE_DAYS(e,n,i);case s.DateTimeUnit.Hour:return t.CALCULATE_HOURS(e,n,i);case s.DateTimeUnit.Minute:return t.CALCULATE_MINUTES(e,n,i);case s.DateTimeUnit.Second:return t.CALCULATE_SECONDS(e,n,i);case s.DateTimeUnit.Millisecond:return t.CALCULATE_MILLISECONDS(e,n,i)}},t.CALCULATE_YEARS=function(e,n,i){var r=a.calculateDataRange(e.getFullYear(),n.getFullYear(),!1),l=o.calculate(a.calculate(0,r.max-r.min),i,0,null,null,[1,2,5]),c=Math.floor(r.min/l.interval)*l.interval,u=new Date(c,0,1);return t.fromNumericSequence(u,l,s.DateTimeUnit.Year)},t.CALCULATE_MONTHS=function(e,n,i){var r=e.getFullYear(),a=n.getFullYear(),l=e.getMonth(),c=12*(a-r)+n.getMonth(),u=new Date(r,0,1),h=o.calculateUnits(l,c,i,[1,2,3,6,12]);return t.fromNumericSequence(u,h,s.DateTimeUnit.Month)},t.CALCULATE_WEEKS=function(e,n,i){var a=(e.getDay()-0+7)%7,l=e.getDate()-a,c=new Date(e.getFullYear(),e.getMonth(),l),u=r.double.ceilWithPrecision(t.getDelta(c,n,s.DateTimeUnit.Week)),h=o.calculateUnits(0,u,i,[1,2,4,8]);return t.fromNumericSequence(c,h,s.DateTimeUnit.Week)},t.CALCULATE_DAYS=function(e,n,i){var a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),l=r.double.ceilWithPrecision(t.getDelta(e,n,s.DateTimeUnit.Day)),c=o.calculateUnits(0,l,i,[1,2,7,14]);return t.fromNumericSequence(a,c,s.DateTimeUnit.Day)},t.CALCULATE_HOURS=function(e,n,i){var a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),l=r.double.floorWithPrecision(t.getDelta(a,e,s.DateTimeUnit.Hour)),c=r.double.ceilWithPrecision(t.getDelta(a,n,s.DateTimeUnit.Hour)),u=o.calculateUnits(l,c,i,[1,2,3,6,12,24]);return t.fromNumericSequence(a,u,s.DateTimeUnit.Hour)},t.CALCULATE_MINUTES=function(e,n,i){var a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()),l=r.double.floorWithPrecision(t.getDelta(a,e,s.DateTimeUnit.Minute)),c=r.double.ceilWithPrecision(t.getDelta(a,n,s.DateTimeUnit.Minute)),u=o.calculateUnits(l,c,i,[1,2,5,10,15,30,60,120,180,360,720,1440]);return t.fromNumericSequence(a,u,s.DateTimeUnit.Minute)},t.CALCULATE_SECONDS=function(e,n,i){var a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()),l=r.double.floorWithPrecision(t.getDelta(a,e,s.DateTimeUnit.Second)),c=r.double.ceilWithPrecision(t.getDelta(a,n,s.DateTimeUnit.Second)),u=o.calculateUnits(l,c,i,[1,2,5,10,15,30,60,120,300,600,900,1800,3600]);return t.fromNumericSequence(a,u,s.DateTimeUnit.Second)},t.CALCULATE_MILLISECONDS=function(e,n,i){var r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),l=t.getDelta(r,e,s.DateTimeUnit.Millisecond),c=t.getDelta(r,n,s.DateTimeUnit.Millisecond),u=o.calculate(a.calculate(l,c),i,0);return t.fromNumericSequence(r,u,s.DateTimeUnit.Millisecond)},t.ADD_INTERVAL=function(t,e,n){switch(e=Math.round(e),n){case s.DateTimeUnit.Year:return i.addYears(t,e);case s.DateTimeUnit.Month:return i.addMonths(t,e);case s.DateTimeUnit.Week:return i.addWeeks(t,e);case s.DateTimeUnit.Day:return i.addDays(t,e);case s.DateTimeUnit.Hour:return i.addHours(t,e);case s.DateTimeUnit.Minute:return i.addMinutes(t,e);case s.DateTimeUnit.Second:return i.addSeconds(t,e);case s.DateTimeUnit.Millisecond:return i.addMilliseconds(t,e)}},t.fromNumericSequence=function(e,n,i){for(var r=new t(i),o=0;o<n.sequence.length;o++){var a=n.sequence[o],s=t.ADD_INTERVAL(e,a,i);r.add(s)}return r.interval=n.interval,r.intervalOffset=n.intervalOffset,r},t.getDelta=function(t,e,n){var i=0;switch(n){case s.DateTimeUnit.Year:i=e.getFullYear()-t.getFullYear();break;case s.DateTimeUnit.Month:i=12*(e.getFullYear()-t.getFullYear())+e.getMonth()-t.getMonth();break;case s.DateTimeUnit.Week:i=(e.getTime()-t.getTime())/6048e5;break;case s.DateTimeUnit.Day:i=(e.getTime()-t.getTime())/864e5;break;case s.DateTimeUnit.Hour:i=(e.getTime()-t.getTime())/36e5;break;case s.DateTimeUnit.Minute:i=(e.getTime()-t.getTime())/6e4;break;case s.DateTimeUnit.Second:i=(e.getTime()-t.getTime())/1e3;break;case s.DateTimeUnit.Millisecond:i=e.getTime()-t.getTime()}return i},t.GET_INTERVAL_UNIT=function(e,n,i){i=Math.max(i,2);var r=t.getDelta(e,n,s.DateTimeUnit.Day);if(r>356&&r>=180*i)return s.DateTimeUnit.Year;if(r>60&&r>7*i)return s.DateTimeUnit.Month;if(r>14&&r>2*i)return s.DateTimeUnit.Week;var o=t.getDelta(e,n,s.DateTimeUnit.Hour);if(r>2&&o>12*i)return s.DateTimeUnit.Day;if(o>=24&&o>=i)return s.DateTimeUnit.Hour;var a=t.getDelta(e,n,s.DateTimeUnit.Minute);if(a>2&&a>=i)return s.DateTimeUnit.Minute;var l=t.getDelta(e,n,s.DateTimeUnit.Second);if(l>2&&l>=.8*i)return s.DateTimeUnit.Second;if(t.getDelta(e,n,s.DateTimeUnit.Millisecond)>0)return s.DateTimeUnit.Millisecond;var c=e;return 0!==c.getMilliseconds()?s.DateTimeUnit.Millisecond:0!==c.getSeconds()?s.DateTimeUnit.Second:0!==c.getMinutes()?s.DateTimeUnit.Minute:0!==c.getHours()?s.DateTimeUnit.Hour:1!==c.getDate()?s.DateTimeUnit.Day:0!==c.getMonth()?s.DateTimeUnit.Month:s.DateTimeUnit.Year},t.MIN_COUNT=1,t.MAX_COUNT=1e3,t}();e.DateTimeSequence=l},47925:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addMilliseconds=e.addSeconds=e.addMinutes=e.addHours=e.addDays=e.addWeeks=e.addMonths=e.addYears=void 0;var n=[31,28,31,30,31,30,31,31,30,31,30,31],i=[31,29,31,30,31,30,31,31,30,31,30,31];function r(t){return t%4==0&&t%100!=0||t%400==0}function o(t,e){var n=t.getFullYear(),i=t.getMonth(),r=t.getDate(),o=new Date(t.getTime());return o.setFullYear(n,i,r+e),o}e.addYears=function(t,e){var n=t.getFullYear(),i=t.getMonth(),o=t.getDate(),a=2===i&&29===o,s=new Date(t.getTime());return n+=e,a&&!r(n)&&(o=28),s.setFullYear(n,i,o),s},e.addMonths=function(t,e){var o=t.getFullYear(),a=t.getMonth(),s=t.getDate(),l=new Date(t.getTime());return o+=(e-e%12)/12,(a+=e%12)>11&&(a%=12,o++),s=Math.min(s,function(t,e){return r(t)?i[e]:n[e]}(o,a)),l.setFullYear(o,a,s),l},e.addWeeks=function(t,e){return o(t,7*e)},e.addDays=o,e.addHours=function(t,e){return new Date(t.getTime()+36e5*e)},e.addMinutes=function(t,e){return new Date(t.getTime()+6e4*e)},e.addSeconds=function(t,e){return new Date(t.getTime()+1e3*e)},e.addMilliseconds=function(t,e){return new Date(t.getTime()+e)}},23224:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DataLabelsDisplayUnitSystem=e.WholeUnitsDisplayUnitSystem=e.DefaultDisplayUnitSystem=e.NoDisplayUnitSystem=e.DisplayUnitSystem=e.DisplayUnit=void 0;var o=n(63100),a=n(52087),s=/^([0\#,]*\.[0\#]+|[0\#,]+|g)$/i,l=function(){function t(){}return t.prototype.project=function(t){return this.value?a.double.removeDecimalNoise(t/this.value):t},t.prototype.reverseProject=function(t){return this.value?t*this.value:t},t.prototype.isApplicableTo=function(t){t=Math.abs(t);var e=a.double.getPrecision(t,3);return a.double.greaterOrEqualWithPrecision(t,this.applicableRangeMin,e)&&a.double.lessWithPrecision(t,this.applicableRangeMax,e)},t.prototype.isScaling=function(){return this.value>1},t}();e.DisplayUnit=l;var c=function(){function t(t){this.units=t||[]}return Object.defineProperty(t.prototype,"title",{get:function(){return this.displayUnit?this.displayUnit.title:void 0},enumerable:!1,configurable:!0}),t.prototype.update=function(t){void 0!==t&&(this.unitBaseValue=t,this.displayUnit=this.findApplicableDisplayUnit(t))},t.prototype.findApplicableDisplayUnit=function(t){for(var e=0,n=this.units;e<n.length;e++){var i=n[e];if(i.isApplicableTo(t))return i}},t.prototype.format=function(t,e,n,i,r){n=this.getNumberOfDecimalsForFormatting(e,n);var o="";return this.isFormatSupported(e)&&!this.hasScientitifcFormat(e)&&this.isScalingUnit()&&this.shouldRespectScalingUnit(e)&&(t=this.displayUnit.project(t),o=this.displayUnit.labelFormat),this.formatHelper({value:t,nonScientificFormat:o,format:e,decimals:n,trailingZeros:i,cultureSelector:r})},t.prototype.isFormatSupported=function(e){return!t.UNSUPPORTED_FORMATS.test(e)},t.prototype.isPercentageFormat=function(t){return t&&t.indexOf("%")>=0},t.prototype.shouldRespectScalingUnit=function(t){return!0},t.prototype.getNumberOfDecimalsForFormatting=function(t,e){return e},t.prototype.isScalingUnit=function(){return this.displayUnit&&this.displayUnit.isScaling()},t.prototype.formatHelper=function(t){var e=t.value,n=t.cultureSelector,i=t.decimals,r=t.trailingZeros,a=t.nonScientificFormat,s=t.format;if("g"!==s&&"G"!==s||null==i||(s="#,0.00"),(s=o.numberFormat.addDecimalsToFormat(s,i,r))&&!o.formattingService.isStandardNumberFormat(s))return o.formattingService.formatNumberWithCustomOverride(e,s,a,n);s||(s="G"),a||(a="{0}");var l=o.formattingService.formatValue(e,s,n);return o.formattingService.format(a,[l])},t.prototype.formatSingleValue=function(t,e,n,i,r){return this.update(this.shouldUseValuePrecision(t)?a.double.getPrecision(t,8):t),this.format(t,e,n,i,r)},t.prototype.shouldUseValuePrecision=function(t){if(0===this.units.length)return!0;for(var e=0,n=0;n<this.units.length;n++)if(this.units[n].isScaling()){e=this.units[n].applicableRangeMin;break}return Math.abs(t)<e},t.prototype.isScientific=function(t){return t<-1e15||t>1e15||-1e-4<t&&t<1e-4&&0!==t},t.prototype.hasScientitifcFormat=function(t){return t&&-1!==t.toUpperCase().indexOf("E")},t.prototype.supportsScientificFormat=function(t){return!t||s.test(t)},t.prototype.shouldFallbackToScientific=function(t,e){return!this.hasScientitifcFormat(e)&&this.supportsScientificFormat(e)&&this.isScientific(t)},t.prototype.getScientificFormat=function(t,e,n,i){if(this.isFormatSupported(e)&&this.shouldFallbackToScientific(t,e)){var r=o.numberFormat.getNumericFormat(t,e);return n&&(r=o.numberFormat.addDecimalsToFormat(r||"0",Math.abs(n),i)),r?r+"E+0":"0.##E+0"}return e},t.UNSUPPORTED_FORMATS=/^(p\d*)|(e\d*)$/i,t}();e.DisplayUnitSystem=c;var u=function(t){function e(){return t.call(this,[])||this}return r(e,t),e}(c);e.NoDisplayUnitSystem=u;var h=function(t){function e(n){return t.call(this,e.getUnits(n))||this}return r(e,t),e.prototype.format=function(e,n,i,r,o){return n=this.getScientificFormat(e,n,i,r),t.prototype.format.call(this,e,n,i,r,o)},e.RESET=function(){e.units=null},e.getUnits=function(t){return e.units||(e.units=f(t,(function(t,e,n){return t-e>=1e3?t/10:n})),e.units[e.units.length-1].applicableRangeMax=1/0),e.units},e}(c);e.DefaultDisplayUnitSystem=h;var d=function(t){function e(n){return t.call(this,e.getUnits(n))||this}return r(e,t),e.RESET=function(){e.units=null},e.getUnits=function(t){return e.units||(e.units=f(t),e.units[e.units.length-1].applicableRangeMax=1/0),e.units},e.prototype.format=function(e,n,i,r,o){return n=this.getScientificFormat(e,n,i,r),t.prototype.format.call(this,e,n,i,r,o)},e}(c);e.WholeUnitsDisplayUnitSystem=d;var p=function(t){function e(n){return t.call(this,e.getUnits(n))||this}return r(e,t),e.prototype.isFormatSupported=function(t){return!e.UNSUPPORTED_FORMATS.test(t)},e.getUnits=function(t){if(!e.units){var n=[],i=function(t,e,n){return-1===t&&t-e>=1e3?t/10:n},r=t(-1);g(n,e.AUTO_DISPLAYUNIT_VALUE,r.title,r.format,i),r=t(0),g(n,e.NONE_DISPLAYUNIT_VALUE,r.title,r.format,i),e.units=n.concat(f(t,i)),e.units[e.units.length-1].applicableRangeMax=1/0}return e.units},e.prototype.format=function(e,n,i,r,o){return n=this.getScientificFormat(e,n,i,r),t.prototype.format.call(this,e,n,i,r,o)},e.AUTO_DISPLAYUNIT_VALUE=0,e.NONE_DISPLAYUNIT_VALUE=1,e.UNSUPPORTED_FORMATS=/^(e\d*)$/i,e}(c);function f(t,e){for(var n=[],i=3;i<24;i++){var r=t(i);r&&g(n,a.double.pow10(i),r.title,r.format,e)}return n}function g(t,e,n,i,r){if(n||i){var o=e;if(t.length>0){var a=t[t.length-1];r&&(o=r(e,a.value,o)),a.applicableRangeMax=o}var s=new l;s.value=e,s.applicableRangeMin=o,s.applicableRangeMax=1e3*o,s.title=n,s.labelFormat=i,t.push(s)}}e.DataLabelsDisplayUnitSystem=p},31520:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayUnitSystemType=void 0,(n=e.DisplayUnitSystemType||(e.DisplayUnitSystemType={}))[n.Default=0]="Default",n[n.Verbose=1]="Verbose",n[n.WholeUnits=2]="WholeUnits",n[n.DataLabels=3]="DataLabels"},83801:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Family=e.fallbackFonts=void 0;var i=n(6721);e.fallbackFonts=["helvetica","arial","sans-serif"],e.Family={light:new i.FamilyInfo(e.fallbackFonts),semilight:new i.FamilyInfo(e.fallbackFonts),regular:new i.FamilyInfo(e.fallbackFonts),semibold:new i.FamilyInfo(e.fallbackFonts),bold:new i.FamilyInfo(e.fallbackFonts),lightSecondary:new i.FamilyInfo(e.fallbackFonts),regularSecondary:new i.FamilyInfo(e.fallbackFonts),boldSecondary:new i.FamilyInfo(e.fallbackFonts)}},6721:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FamilyInfo=void 0;var n=function(){function t(t){this.families=t}return Object.defineProperty(t.prototype,"family",{get:function(){return this.getFamily()},enumerable:!1,configurable:!0}),t.prototype.getFamily=function(t){if(void 0===t&&(t=/^wf_/),!this.families)return null;if(t)for(var e=0,n=this.families;e<n.length;e++){var i=n[e];if(t.test(i))return i}return this.families[0]},Object.defineProperty(t.prototype,"css",{get:function(){return this.getCSS()},enumerable:!1,configurable:!0}),t.prototype.getCSS=function(){return this.families?this.families.map((function(t){return t.indexOf(" ")>0?"'"+t+"'":t})).join(", "):null},t}();e.FamilyInfo=n},44932:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.fixDateTimeFormat=e.findDateFormat=void 0,e.findDateFormat=function(t,e,n){switch(e){case"m":e="M";break;case"O":case"o":e="yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fff'0000'";break;case"R":case"r":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e="ddd, dd MMM yyyy HH':'mm':'ss 'GMT'";break;case"s":e="S";break;case"u":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e="yyyy'-'MM'-'dd HH':'mm':'ss'Z'";break;case"U":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e="F";break;case"y":case"Y":switch(n){case"default":case"en":case"en-US":e="MMMM, yyyy";break;default:e="Y"}}return{value:t,format:e}},e.fixDateTimeFormat=function(t){if(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/%K/g,"zzz")).replace(/K/g,"zzz")).replace(/fffffff/g,"fff0000")).replace(/ffffff/g,"fff000")).replace(/fffff/g,"fff00")).replace(/ffff/g,"fff0")).replace(/yyyyy/g,"0yyyy")).replace(/(^y|^)yyy(^y|$)/g,"yyyy"),n||(n=["d","f","F","g","h","H","K","m","M","s","t","y","z",":","/"].map((function(t){return{r:new RegExp("%"+t+"(?!"+t+")","g"),s:t}}))),-1!==t.indexOf("%")&&t.length>2)for(var e=0;e<n.length;e++)t=t.replace(n[e].r,n[e].s);return t}},36394:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.format=e.canFormat=void 0;var i,r,o=n(44932),a=n(36459),s=n(51248),l=n(77717);function c(t,e,n){var i=n.calendar.patterns;!function(t){var e=t.patterns;void 0===e.g&&(e.g=e.f.replace(e.D,e.d),e.G=e.F.replace(e.D,e.d))}(n.calendar);var r=(0,o.findDateFormat)(t,e,n.name);return e=1===r.format.length?i[r.format]:r.format,n||(n=this.getCurrentCulture()),l.Globalize.format(r.value,e,n)}e.canFormat=function(t){return t instanceof Date},e.format=function(t,e,n){var u=1===(e=e||"G").length;try{return u?c(t,e,n):function(t,e,n){var c,u=[];if((e=a.preserveLiterals(e,u)).indexOf("F")>-1){e=s.replaceAll(e,"FFFF","FFF");var h=t.getMilliseconds();if(h%10>=1&&(e=s.replaceAll(e,"FFF","fff")),e=s.replaceAll(e,"FFF","FF"),h%100/10>=1&&(e=s.replaceAll(e,"FF","ff")),e=s.replaceAll(e,"FF","F"),h%1e3/100>=1&&(e=s.replaceAll(e,"F","f")),""===(e=s.replaceAll(e,"F",""))||"%"===e)return""}return e=function(t){return t===i?r:(i=t,t=(0,o.fixDateTimeFormat)(t),r=t,t)}(e),c=function(t,e){var n=e[":"];if(":"===n)return t;for(var i="",r=t.length,o=0;o<r;o++){var a=t.charAt(o);i+=":"===a?n:a}return i}(c=l.Globalize.format(t,e,n),n.calendar),a.restoreLiterals(c,u,!1)}(t,e,n)}catch(e){return c(t,"G",n)}}},36459:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.restoreLiterals=e.preserveLiterals=e.removeLiterals=void 0;var n=new RegExp(["'[^']*'",'"[^"]*"',"\\\\.","'[^']*$",'"[^"]*$',"\\\\$"].join("|"),"g");e.removeLiterals=function(t){return n.lastIndex=0,t.replace(n,"")},e.preserveLiterals=function(t,e){for(n.lastIndex=0;;){var i=n.exec(t);if(!i)break;var r=i[0],o=n.lastIndex-r.length,a=String.fromCharCode(57600+e.length);e.push(r),t=t.substring(0,o)+a+t.substring(n.lastIndex),n.lastIndex=o+1}return t},e.restoreLiterals=function(t,e,n){void 0===n&&(n=!0);for(var i=e.length,r=0;r<i;r++){var o=String.fromCharCode(57600+r),a=e[r];if(!n){var s=a[0];a="\\"===s||1===a.length||a[a.length-1]!==s?a.substring(1):a.substring(1,a.length-1)}t=t.replace(o,a)}return t}},63100:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formattingEncoder=e.dateTimeFormat=e.numberFormat=e.formattingService=e.FormattingService=void 0;var i=n(77717);(0,n(90980).default)(i.Globalize);var r=n(36394);e.dateTimeFormat=r;var o=n(87534);e.numberFormat=o;var a=n(36459);e.formattingEncoder=a;var s=n(83351),l=/({{)|(}})|{(\d+[^}]*)}/g,c=function(){function t(){}return t.prototype.formatValue=function(t,e,n){if(null==t)return"";var i=this.getCulture(n);return r.canFormat(t)?r.format(t,e,i):o.canFormat(t)?o.format(t,e,i):t.toString()},t.prototype.format=function(t,e,n){var i=this;return t?t.replace(l,(function(t,r,o,a){if(r)return"{";if(o)return"}";var s=a.split(":"),l=parseInt(s[0],10),c=s[1];return i.formatValue(e[l],c,n)})):""},t.prototype.isStandardNumberFormat=function(t){return o.isStandardFormat(t)},t.prototype.formatNumberWithCustomOverride=function(t,e,n,i){var r=this.getCulture(i);return o.formatWithCustomOverride(t,e,n,r)},t.prototype.dateFormatString=function(t){return this._dateTimeScaleFormatInfo||this.initialize(),this._dateTimeScaleFormatInfo.getFormatString(t)},t.prototype.setCurrentCulture=function(t){this._currentCultureSelector!==t&&(this._currentCulture=this.getCulture(t),this._currentCultureSelector=t,this._dateTimeScaleFormatInfo=new u(this._currentCulture))},t.prototype.getCulture=function(t){if(null==t)return null==this._currentCulture&&this.initialize(),this._currentCulture;var e=i.Globalize.findClosestCulture(t);return e||(e=i.Globalize.culture("en-US")),e},t.prototype.initialize=function(){var t=this.getCurrentCulture();this.setCurrentCulture(t);var e=this.getUrlParam("calendar");if(e){var n=this._currentCulture,i=n.calendars[e];i&&(n.calendar=i)}},t.prototype.getCurrentCulture=function(){return(null===window||void 0===window?void 0:window.navigator)?window.navigator.userLanguage||window.navigator.language:"en-US"},t.prototype.getUrlParam=function(t){var e=window.location.search.match(RegExp("[?&]"+t+"=([^&]*)"));return e?e[1]:void 0},t}();e.FormattingService=c;var u=function(){function t(t){var e=t.calendar,n=e.patterns,i=e.months.namesAbbr,r=i&&i[0],o=n.Y,a=n.M,s=n.f,l=n.T,c=n.t,u=s.indexOf(",")>-1?", ":" ",h=0===o.indexOf("yyyy'")&&o.length>6&&"'"===o[6];this.YearPattern=h?o.substring(0,7):"yyyy";var d=s.indexOf("yy"),p=s.indexOf("MMMM");this.MonthPattern=r&&p>-1?d>p?"MMM yyyy":"yyyy MMM":o,this.DayPattern=r?a.replace("MMMM","MMM"):a;var f=s.indexOf("mm"),g=s.indexOf("tt")>-1?c.replace(":mm ",""):c;this.HourPattern=d<f?this.DayPattern+u+g:g+u+this.DayPattern,this.MinutePattern=c,this.SecondPattern=l,this.MillisecondPattern=l.replace("ss","ss.fff"),"fi-FI"===t.name&&(this.DayPattern=this.DayPattern.replace("'ta'",""),this.HourPattern=this.HourPattern.replace("'ta'",""))}return t.prototype.getFormatString=function(t){switch(t){case s.DateTimeUnit.Year:return this.YearPattern;case s.DateTimeUnit.Month:return this.MonthPattern;case s.DateTimeUnit.Week:case s.DateTimeUnit.Day:return this.DayPattern;case s.DateTimeUnit.Hour:return this.HourPattern;case s.DateTimeUnit.Minute:return this.MinutePattern;case s.DateTimeUnit.Second:return this.SecondPattern;case s.DateTimeUnit.Millisecond:return this.MillisecondPattern}},t}(),h=new c;e.formattingService=h},83351:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.DateTimeUnit=void 0,(n=e.DateTimeUnit||(e.DateTimeUnit={}))[n.Year=0]="Year",n[n.Month=1]="Month",n[n.Week=2]="Week",n[n.Day=3]="Day",n[n.Hour=4]="Hour",n[n.Minute=5]="Minute",n[n.Second=6]="Second",n[n.Millisecond=7]="Millisecond"},87534:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCustomFormatMetadata=e.formatWithCustomOverride=e.format=e.isStandardFormat=e.canFormat=e.getComponents=e.hasFormatComponents=e.addDecimalsToFormat=e.getNumericFormat=e.NumberFormatComponentsDelimeter=void 0;var i,r=n(77717),o=n(52087),a=n(51248),s=n(36459),l=n(63100),c=/\{.+\}/,u=/e[+-]*[0#]+/i,h=/^[a-z]\d{0,2}$/i,d=/0+$/,p=/\.([0#]*)/g,f=/[0#,\.]+[0,#]*/g,g=/([0#])(?=[^0#]*$)/,m="0",v="#",y=new RegExp([m,v].join("|"),"g");function b(t,e){if(null==e)return e;if(x(e)){var n=k(e),i=n.positive,r=n.negative,o=n.zero;return w(0,t>0?i:0===t?o:r)}return w(0,e)}function w(t,e){var n=o.regExpExtensions.run(f,e);return n?n[0]:e}function S(t,e,n){if((e=Math.abs(e))>=0){var i=[];t=s.preserveLiterals(t,i);var r=n?m:v,l=a.repeat(r,Math.abs(e)),c=o.regExpExtensions.run(p,t);if(c){var u=t.substring(0,c.index),h=t.substring(c.index+1,c[1].length+c.index+1),d=t.substring(c.index+c[0].length);if(n)h=l;else{var f=l.length-h.length;f>0?h+=l.slice(-f):f<0&&(h=h.slice(0,f))}h.length>0&&(h="."+h),t=u+h+d}else l.length>0&&(t=t.replace(g,"$1."+l));0!==i.length&&(t=s.restoreLiterals(t,i))}return t}function x(t){return-1!==s.removeLiterals(t).indexOf(e.NumberFormatComponentsDelimeter)}function k(t){var n={hasNegative:!1,positive:t,negative:t,zero:t},i=[],r=(t=s.preserveLiterals(t,i)).split(e.NumberFormatComponentsDelimeter),o=r.length;return o>1&&(0!==i.length&&(r=r.map((function(t){return s.restoreLiterals(t,i)}))),n.hasNegative=!0,n.positive=n.zero=r[0],n.negative=r[1],o>2&&(n.zero=r[2])),n}function C(t){return h.test(t)}function M(t,e,n,a){var c,h=n.numberFormat;if(!isFinite(t))return r.Globalize.format(t,void 0);var d=k(e);e=t>0?d.positive:0===t?d.zero:d.negative,d.hasNegative&&(t=Math.abs(t));var p=E(e,!0),f=[];if(p.hasLiterals&&(e=s.preserveLiterals(e,f)),p.hasE&&!a){var g=o.regExpExtensions.run(u,e);if(g){var m=e.substring(0,g.index),v=e.substring(g.index+2),y=A(m,p);if(1!==(O=P(m,p))&&(t*=O),"number"!=typeof t)return String(t);var w=t.toExponential(y),S=w.indexOf("e"),x=w.substring(0,S),C=w.substring(S+1),M=D(x,m,h),_=D(C,v,h);"+"===_.charAt(0)&&"+"!==g[0].charAt(1)&&(_=_.substring(1)),c=M+g[0].charAt(0)+_}}if(void 0===c){var O,L=void 0,I=!1;if(y=A(e,p),1!==(O=P(e,p))&&(t*=O),t=parseFloat(T(t,y)),!isFinite(t))return r.Globalize.format(t,void 0);a?(a=function(t,e){if(!e||void 0===t)return t;var n="{0:"+e+"}";return t.replace("{0}",n)}(a,b(t,e)),L=l.formattingService.format(a,[t],n.name),I=!0):L=T(t,y),c=D(L,e,h,a,I)}return p.hasLiterals&&(c=s.restoreLiterals(c,f,!1)),i=p,c}function T(t,e){var n="",i=0;e>16&&(i=e-16,e=16);var r=o.double.log10(Math.abs(t));if(r<16){if(r>0){var s=16-r;e>s&&(i+=e-s,e=s)}n=t.toFixed(e)}else if(16===r)n=t.toFixed(0),(i+=e)>0&&(n+=".");else{if("number"!=typeof t)return String(t);var l=(n=t.toExponential(15)).indexOf("e");if(l>0){var c=n.indexOf("."),u=n.substring(0,l),h=n.substring(l+1),d=parseInt(h,10)-(u.length-c-1);n=u.replace(".","")+a.repeat("0",d),e>0&&(n=n+"."+a.repeat("0",e))}}return i>0&&(n+=a.repeat("0",i)),n}function E(t,e,n,r){if(void 0!==i&&t===i.format)return i;for(var o=[],a=s.preserveLiterals(t,o),l={format:t,hasLiterals:0!==o.length,hasE:!1,hasCommas:!1,hasDots:!1,hasPercent:!1,hasPermile:!1,precision:void 0,scale:void 0,partsPerScale:void 0},c=0,u=a.length;c<u;c++)switch(a.charAt(c)){case"e":case"E":l.hasE=!0;break;case",":l.hasCommas=!0;break;case".":l.hasDots=!0;break;case"%":l.hasPercent=!0;break;case"‰":l.hasPermile=!0}var h=k(t);return e&&(l.precision=A(h.positive,l)),r&&(l.partsPerScale=_(h.positive,l)),n&&(l.scale=P(h.positive,l)),l}function A(t,e){if(e.precision>-1)return e.precision;var n=0;if(e.hasDots){e.hasLiterals&&(t=s.removeLiterals(t));var i=t.indexOf(".");if(i>-1){for(var r=t.length,o=i;o<r;o++){var a=t.charAt(o);if(a.match(y)&&n++,"E"===a)break}n=Math.min(19,n)}}return e.precision=n,n}function _(t,e){if(null!=e.partsPerScale)return e.partsPerScale;var n=1;return e.hasPercent&&t.indexOf("%")>-1&&(n*=100),e.hasPermile&&t.indexOf("‰")>-1&&(n*=1e3),e.partsPerScale=n,n}function P(t,e){if(e.scale>-1)return e.scale;var n=_(t,e);if(e.hasCommas){var i=t.indexOf(".");-1===i&&(i=t.length);for(var r=i-1;r>-1&&","===t.charAt(r);r--)n/=1e3}return e.scale=n,n}function D(t,e,n,i,r){var o=!!i,a=e.split(".",2);if(2===a.length){var s=a[0],l=a[1],u="";i&&(u=i.replace(c,""),t=t.replace(u,""));var h=n["."],p=r?h:".",f=t.split(p,2),g=1===f.length?f[0]+u:f[0],b=2===f.length?f[1]+u:"";b=b.replace(d,"");var w=O(g,s,n,o),S=function(t,e,n){var i=e.length,r=t.length;if(n){var o=e.charAt(i-1);return o.match(y)?{value:t,fmtOnly:""===t}:{value:t+o,fmtOnly:""===t}}for(var a="",s=!0,l=0,c=0;c<i;c++){var u=e.charAt(c);if(l<r)switch(u){case m:case v:a+=t[l++],s=!1;break;default:a+=u}else u!==v&&(a+=u,s=s&&u!==m)}return{value:a,fmtOnly:s}}(b,l,o);return S.fmtOnly||""===S.value?w+S.value:w+h+S.value}return O(t,e,n,o)}function O(t,e,n,i){var r=e.indexOf(","),o=r>-1&&r<Math.max(e.lastIndexOf("0"),e.lastIndexOf("#"))&&n[","],a=0,s=0,l=n.groupSizes||[3],c=l[0],u=n[","],h="",d=t.charAt(0);"+"!==d&&"-"!==d||(h=n[d],t=t.substring(1));for(var p="0"===t,f="",g="",y=t.length-1,b=!0,w=e.length-1;w>-1;w--){var S=e.charAt(w);switch(S){case m:case v:b=!1,""!==g&&(f=g+f,g=""),i||((y>-1||S===m)&&o&&(a===c?(f=u+f,++s<l.length&&(c=l[s]),a=1):a++),y>-1?(p&&S===v||(f=t.charAt(y)+f),y--):S!==v&&(f=S+f));break;case",":break;default:g=S+g}}if(!i){if(y>-1&&""!==f)if(o)for(;y>-1;)a===c?(f=u+f,++s<l.length&&(c=l[s]),a=1):a++,f=t.charAt(y)+f,y--;else f=t.substring(0,y+1)+f;return h+g+f}return b?h+g+f:h+g+t+f}function L(t,e){var n=e["+"],i=e["-"],r=e["."],o=e[","];if("+"===n&&"-"===i&&"."===r&&","===o)return t;for(var a=t.length,s="",l=0;l<a;l++){var c=t.charAt(l);switch(c){case"+":s+=n;break;case"-":s+=i;break;case".":s+=r;break;case",":s+=o;break;default:s+=c}}return s}e.NumberFormatComponentsDelimeter=";",e.getNumericFormat=b,e.addDecimalsToFormat=function(t,n,i){if(null==n)return t;if(null==t&&(t=m),x(t)){for(var r=k(t),o=[r.positive,r.negative,r.zero],a=0;a<o.length;a++)o[a]=S(o[a],n,i);return o.join(e.NumberFormatComponentsDelimeter)}return S(t,n,i)},e.hasFormatComponents=x,e.getComponents=k,e.canFormat=function(t){return"number"==typeof t},e.isStandardFormat=C,e.format=function(t,e,n){e=e||"G";try{return C(e)?function(t,e,n){var i,o=e.length>1?parseInt(e.substring(1,e.length),10):void 0,s=n.numberFormat,l=e.charAt(0),c=Math.abs(t);switch(l){case"e":case"E":void 0===o&&(o=6),i=M(t,e="0."+a.repeat("0",o)+l+"+000",n);break;case"f":case"F":i=L(i=void 0!==o?t.toFixed(o):t.toFixed(s.decimals),s);break;case"g":case"G":if(0===c||1e-4<=c&&c<1e15)i=void 0!==o?t.toPrecision(o):t.toString();else{if("number"!=typeof t)return String(t);i=(i=void 0!==o?t.toExponential(o):t.toExponential()).replace("e","E")}i=L(i,s);break;case"r":case"R":i=L(i=t.toString(),s);break;case"x":case"X":if(i=t.toString(16),"X"===l&&(i=i.toUpperCase()),void 0!==o){var u=i.length,h=t<0;h&&u--;var d=o-u,p=void 0;d>0&&(p=a.repeat("0",d)),i=h?"-"+p+i.substring(1):p+i}i=L(i,s);break;default:i=r.Globalize.format(t,e,n)}return i}(t,e,n):M(t,e,n)}catch(e){return r.Globalize.format(t,void 0,n)}},e.formatWithCustomOverride=function(t,e,n,i){return M(t,e,i,n)},e.getCustomFormatMetadata=E},11847:(t,e,n)=>{"use strict";e.G2=void 0,n(44932);var i=n(5062);e.G2=i,n(51248),n(32391),n(31107),n(83801),n(6721),n(60604),n(47925),n(67630),n(23224),n(31520),n(63100),n(15807)},31107:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},70167:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ephemeralStorageService=e.EphemeralStorageService=void 0;var n=function(){function t(e){this.cache={},this.clearCacheInterval=null!=e?e:t.defaultClearCacheInterval,this.clearCache()}return t.prototype.getData=function(t){return this.cache[t]},t.prototype.setData=function(t,e){var n=this;this.cache[t]=e,null==this.clearCacheTimerId&&(this.clearCacheTimerId=setTimeout((function(){return n.clearCache()}),this.clearCacheInterval))},t.prototype.clearCache=function(){this.cache={},this.clearCacheTimerId=void 0},t.defaultClearCacheInterval=864e5,t}();e.EphemeralStorageService=n,e.ephemeralStorageService=new n},51248:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stripTagDelimiters=e.deriveClsCompliantName=e.stringifyAsPrettyJSON=e.normalizeFileName=e.escapeStringForRegex=e.constructNameFromList=e.findUniqueName=e.ensureUniqueNames=e.replaceAll=e.repeat=e.getLengthDifference=e.trimWhitespace=e.trimTrailingWhitespace=e.isWhitespace=e.containsWhitespace=e.isNullOrUndefinedOrWhiteSpaceString=e.isNullOrEmpty=e.stringToArrayBuffer=e.normalizeCase=e.containsIgnoreCase=e.contains=e.startsWith=e.startsWithIgnoreCase=e.equalIgnoreCase=e.format=e.endsWith=void 0;var n=new RegExp("[<>]","g");function i(t,e){return null!=t&&-1!==t.indexOf(e)}function r(t){return t.toUpperCase()}function o(t){return null==t||0===t.length}function a(t){return o(t)||o(t.trim())}function s(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}e.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},e.format=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0];if(a(n))return n;for(var i=0;i<t.length-1;i++){var r=new RegExp("\\{"+i+"\\}","gm");n=n.replace(r,t[i+1])}return n},e.equalIgnoreCase=function(t,e){return r(t)===r(e)},e.startsWithIgnoreCase=function(t,e){var n=r(e);return 0===r(t).indexOf(n)},e.startsWith=function(t,e){return 0===t.indexOf(e)},e.contains=i,e.containsIgnoreCase=function(t,e){return null!=t&&i(r(t),r(e))},e.normalizeCase=r,e.stringToArrayBuffer=function(t){if(o(t))return null;for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0,r=t.length;i<r;i++)n[i]=t.charCodeAt(i);return n},e.isNullOrEmpty=o,e.isNullOrUndefinedOrWhiteSpaceString=a,e.containsWhitespace=function(t){return/\s/.test(t)},e.isWhitespace=function(t){return""===t.trim()},e.trimTrailingWhitespace=function(t){return t.replace(/\s+$/,"")},e.trimWhitespace=function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},e.getLengthDifference=function(t,e){return Math.abs(t.length-e.length)},e.repeat=function(t,e){for(var n="",i=0;i<e;i++)n+=t;return n},e.replaceAll=function(t,e,n){if(!e)return t;var i=s(e);return t.replace(new RegExp(i,"gi"),n)},e.ensureUniqueNames=function(t){for(var e={},n=0,i=t;n<i.length;n++)e[i[n]]=!1;for(var r=[],o=0,a=t;o<a.length;o++){var s=a[o],l=s;if(e[l])for(var c=0;void 0!==e[l];)l=s+"."+ ++c;r.push(l),e[l]=!0}return r},e.findUniqueName=function(t,e){for(var n=0,i=e;t[i];)i=e+ ++n;return i},e.constructNameFromList=function(t,e,n){for(var i,r=[],o=0,a=0,s=t;a<s.length;a++){var l=s[a];if(o+l.length>n&&r.length>0){i=!0;break}r.push(l),o+=l.length}var c=" "+e+" ",u=r.join(c);return i&&(u+=c+"..."),u},e.escapeStringForRegex=s,e.normalizeFileName=function(t){return t.replace(/[\<\>\:"\/\\\|\?*]/g,"")},e.stringifyAsPrettyJSON=function(t){return JSON.stringify(t)},e.deriveClsCompliantName=function(t,e){var n=t.replace(/^[^A-Za-z]*/g,"").replace(/[ :\.\/\\\-\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000]/g,"_").replace(/[\W]/g,"");return n.length>0?n:e},e.stripTagDelimiters=function(t){return t.replace(n,"")}},32391:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wordBreakOverflowingText=e.wordBreak=e.svgEllipsis=e.getTailoredTextOrDefault=e.getDivElementWidth=e.getSvgMeasurementProperties=e.getMeasurementProperties=e.measureSvgTextElementWidth=e.estimateSvgTextHeight=e.estimateSvgTextBaselineDelta=e.measureSvgTextHeight=e.measureSvgTextRect=e.measureSvgTextWidth=e.removeSpanElement=void 0;var i,r,o,a,s=n(52087),l=n(15807),c=n(70167),u="...";function h(){if(!i){i=document.createElement("span"),document.body.appendChild(i);var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","0"),t.setAttribute("width","0"),t.setAttribute("position","absolute"),t.style.top="0px",t.style.left="0px",t.style.position="absolute",t.style.height="0px",t.style.width="0px",r=document.createElementNS("http://www.w3.org/2000/svg","text"),t.appendChild(r),document.body.appendChild(t);var e=document.createElement("canvas");o=e.getContext("2d");var n=window.getComputedStyle(r);a=n?n.fontFamily:""}}function d(t,e){return h(),o.font=(t.fontStyle||"")+" "+(t.fontVariant||"")+" "+(t.fontWeight||"")+" "+t.fontSize+" "+(t.fontFamily||a),o.measureText(e||t.text).width}function p(t,e){for(h();r.firstChild;)r.removeChild(r.firstChild);return r.setAttribute("style",null),r.style.visibility="hidden",r.style.fontFamily=t.fontFamily||a,r.style.fontVariant=t.fontVariant,r.style.fontSize=t.fontSize,r.style.fontWeight=t.fontWeight,r.style.fontStyle=t.fontStyle,r.style.whiteSpace=t.whiteSpace||"nowrap",r.appendChild(document.createTextNode(e||t.text)),r.getBBox()}function f(t){var n=t.fontFamily+t.fontSize,i=c.ephemeralStorageService.getData(n);if(null==i){var r={fontFamily:t.fontFamily,fontSize:t.fontSize,text:"M"};(i=e.measureSvgTextRect(r)).height>0&&c.ephemeralStorageService.setData(n,i)}return i}function g(t,e){void 0===e&&(e=!1);var n=f(t).height;return e&&(n*=.7),n}function m(t){var e=window.getComputedStyle(t);return e?{text:t.textContent,fontFamily:e.fontFamily,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant,whiteSpace:e.whiteSpace}:{text:t.textContent,fontFamily:"",fontSize:"0"}}function v(t,e){if(h(),0===t.text.length)return t.text;var n=d(t);if(n<e)return t.text;if(d(t,u)>=n)return t.text;for(var i=s.prototype.inherit(t),r=i.text=u+i.text,o=1,a=r.length,l=3;o<=a;)if(l=(o+a)/2|0,i.text=r.substring(0,l),e>(n=d(i)))o=l+1;else{if(!(e<n))break;a=l-1}return i.text=r.substring(0,l),(n=d(i))>e&&l--,t.text.substring(0,l-3)+u}e.removeSpanElement=function(){i&&i.remove&&i.remove(),i=null},e.measureSvgTextWidth=d,e.measureSvgTextRect=p,e.measureSvgTextHeight=function(t,e){return p(t,e).height},e.estimateSvgTextBaselineDelta=function(t){var e=f(t);return e.y+e.height},e.estimateSvgTextHeight=g,e.measureSvgTextElementWidth=function(t){return d(m(t))},e.getMeasurementProperties=function(t){var e=window.getComputedStyle(t);return{text:t.value||t.textContent,fontFamily:e.fontFamily,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant,whiteSpace:e.whiteSpace}},e.getSvgMeasurementProperties=m,e.getDivElementWidth=function(t){var e=window.getComputedStyle(t);return e?e.width:"0"},e.getTailoredTextOrDefault=v,e.svgEllipsis=function(t,e){var n=m(t),i=n.text,r=v(n,e);i!==r&&(t.textContent=r)},e.wordBreak=function(t,e,n,i){void 0===i&&(i=0);var r=m(t),o=g(r)+i,a=Math.max(1,Math.floor(n/o)),s=t?t.getAttribute("y"):null,c=t?t.textContent:null;t.textContent=null;for(var u=l.splitByWidth(c,r,d,e,a),h=document.createDocumentFragment(),p=0,f=u.length;p<f;p++){var y=0===p?s:o;r.text=u[p];var b=document.createElementNS("http://www.w3.org/2000/svg","tspan");b.setAttribute("x","0"),b.setAttribute("dy",y?y.toString():null),b.appendChild(document.createTextNode(v(r,e))),h.appendChild(b)}t.appendChild(h)},e.wordBreakOverflowingText=function(t,e,n,i){void 0===i&&(i=0);var r=m(t),o=g(r)+i,a=Math.max(1,Math.floor(n/o)),c=t.textContent;t.textContent=null;for(var u=l.splitByWidth(c,r,d,e,a),h=document.createDocumentFragment(),p=0;p<u.length;p++){var f=document.createElement("span");f.style.overflow="hidden",f.style.whiteSpace="nowrap",f.style.textOverflow="ellipsis",f.style.display="block",f.style.width=s.pixelConverter.toString(e),f.appendChild(document.createTextNode(u[p])),f.appendChild(document.createTextNode(v(r,e))),h.appendChild(f)}t.appendChild(h)}},60604:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replaceSpaceWithNBSP=e.removeEllipses=e.removeBreakingSpaces=void 0,e.removeBreakingSpaces=function(t){return t.toString().replace(new RegExp(" ","g"),"&nbsp")},e.removeEllipses=function(t){return t.replace(/(…)|(\.\.\.)/g,"")},e.replaceSpaceWithNBSP=function(t){if(null!=t)return t.replace(/ /g," ")}},5062:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateExactDigitsPrecision=e.getDisplayUnits=e.formatListOr=e.formatListAnd=e.getFormatStringByColumn=e.getFormatString=e.createDisplayUnitSystem=e.formatVariantMeasureValue=e.format=e.create=e.checkValueInBounds=e.createDefaultFormatter=e.setLocaleOptions=e.getFormatMetadata=e.getLocalizedString=e.DefaultDateFormat=e.DefaultNumericFormat=e.DefaultIntegerFormat=void 0;var i=n(23224),r=n(31520),o=n(51248),a=n(63100),s=n(67630),l=n(52087),c=n(40724),u=l.valueType.ValueType,h=l.valueType.PrimitiveType,d=o,p={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"};e.DefaultIntegerFormat="g",e.DefaultNumericFormat="#,0.00",e.DefaultDateFormat="d";var f={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",RestatementComma:"{0}, {1}",RestatementCompoundAnd:"{0} and {1}",RestatementCompoundOr:"{0} or {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlighted)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlighted)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"};e.getLocalizedString=function(t){return f[t]};var g={nullValue:f.NullValue,trueValue:f.BooleanTrue,falseValue:f.BooleanFalse,NaN:f.NaNValue,infinity:f.InfinityValue,negativeInfinity:f.NegativeInfinityValue,beautify:function(t){return function(t){var e=p[t];return e&&f[e]||t}(t)},describe:function(t){return function(t){var e=-1===t?"Auto":t.toString(),n=f["DisplayUnitSystem_E"+e+"_Title"],i=t<=0?"{0}":f["DisplayUnitSystem_E"+e+"_LabelFormat"];if(n||i)return{title:n,format:i}}(t)},restatementComma:f.RestatementComma,restatementCompoundAnd:f.RestatementCompoundAnd,restatementCompoundOr:f.RestatementCompoundOr},m={displayName:"",type:u.fromPrimitiveTypeAndCategory(h.DateTime)};function v(t,e,n){var i=e?g.beautify(t):t;return{format:function(t){return null==t?g.nullValue:S({value:t,cultureSelector:n,format:i})}}}function y(t){if(null==t)return new i.DefaultDisplayUnitSystem(g.describe);switch(t){case r.DisplayUnitSystemType.Default:return new i.DefaultDisplayUnitSystem(g.describe);case r.DisplayUnitSystemType.WholeUnits:return new i.WholeUnitsDisplayUnitSystem(g.describe);case r.DisplayUnitSystemType.Verbose:return new i.NoDisplayUnitSystem;case r.DisplayUnitSystemType.DataLabels:return new i.DataLabelsDisplayUnitSystem(g.describe);default:return new i.DefaultDisplayUnitSystem(g.describe)}}function b(t,n,i){if(t){if(n){var r=c.dataViewObjects.getValue(t.objects,n);if(r)return r}if(!i){var o=t.type;if(o){if(o.dateTime)return e.DefaultDateFormat;if(o.integer)return o.temporal&&o.temporal.year?"0":e.DefaultIntegerFormat;if(o.numeric)return e.DefaultNumericFormat}}}}function w(t,e){var n;if(!t)return null;var i=t.length;if(i>0){n=t[0];for(var r=i-1,o=1,a=r;o<a;o++){var s=t[o];n=d.format(g.restatementComma,n,s)}i>1&&(s=t[r],n=d.format(e,n,s))}else n=null;return n}function S(t){var e=t.value,n=t.format,i=t.nullsAreBlank,r=t.cultureSelector,o=x(e,i||!1);return d.isNullOrUndefinedOrWhiteSpaceString(o)?a.formattingService.formatValue(e,n,r):o}function x(t,e){return null==t&&e?g.nullValue:!0===t?g.trueValue:!1===t?g.falseValue:"number"==typeof t&&isNaN(t)?g.NaN:t===Number.NEGATIVE_INFINITY?g.negativeInfinity:t===Number.POSITIVE_INFINITY?g.infinity:""}e.getFormatMetadata=function(t){return a.numberFormat.getCustomFormatMetadata(t)},e.setLocaleOptions=function(t){g=t,i.DefaultDisplayUnitSystem.RESET(),i.WholeUnitsDisplayUnitSystem.RESET()},e.createDefaultFormatter=v,e.checkValueInBounds=function(t,e,n,i,r){return void 0===i&&(i=e),void 0===r&&(r=n),null!=n&&(t=t<=n?t:r),null!=e&&(t=t>e?t:i),t},e.create=function(t){var e,n,i,r=t.allowFormatBeautification?g.beautify(t.format):t.format,o=t.cultureSelector;if(function(t){var e=t.value,n=t.value2,i=t.format;if(t.formatSingleValues&&i&&Math.abs(e)<1e4)if(a.numberFormat.isStandardFormat(i)){if(l.double.isInteger(e))return!1}else if(a.numberFormat.getCustomFormatMetadata(i,!0).precision<2)return!1;if("number"==typeof e||"number"==typeof n)return!0}(t)){var c=y(t.displayUnitSystemType),u=!!t.formatSingleValues;c.update(Math.max(Math.abs(t.value||0),Math.abs(t.value2||0)));var h,p=null!=t.precision;return p?h=-t.precision:c.displayUnit&&c.displayUnit.value>1&&(h=-2),{format:function(t){var e=x(t,!0);return d.isNullOrUndefinedOrWhiteSpaceString(e)?(t&&!c.isScalingUnit()&&Math.abs(t)<1e3&&!p&&(t=l.double.roundToPrecision(t)),u?c.formatSingleValue(t,r,h,p,o):c.format(t,r,h,p,o)):e},displayUnit:c.displayUnit,options:t}}if(e=t.value,n=t.value2,i=t.tickCount,e instanceof Date&&n instanceof Date&&null!=i){var f=s.DateTimeSequence.GET_INTERVAL_UNIT(t.value,t.value2,t.tickCount);return{format:function(t){if(null==t)return g.nullValue;var e=a.formattingService.dateFormatString(f);return S({value:t,cultureSelector:o,format:e})},options:t}}return v(r,!1,o)},e.format=function(t,e,n,i){return null==t?g.nullValue:S({value:t,cultureSelector:i,format:n?g.beautify(e):e})},e.formatVariantMeasureValue=function(t,e,n,i,r){return!(e&&e.type&&e.type.dateTime)&&t instanceof Date?S({value:t,nullsAreBlank:i,cultureSelector:r,format:b(m,null,!1)}):S({value:t,nullsAreBlank:i,cultureSelector:r,format:b(e,n)})},e.createDisplayUnitSystem=y,e.getFormatString=b,e.getFormatStringByColumn=function(t,n){if(t){if(t.format)return t.format;if(!n){var i=t.type;if(i){if(i.dateTime)return e.DefaultDateFormat;if(i.integer)return i.temporal&&i.temporal.year?"0":e.DefaultIntegerFormat;if(i.numeric)return e.DefaultNumericFormat}}}},e.formatListAnd=function(t){return w(t,g.restatementCompoundAnd)},e.formatListOr=function(t){return w(t,g.restatementCompoundOr)},e.getDisplayUnits=function(t){return y(t).units},e.calculateExactDigitsPrecision=function(t,e,n,i){if(!t&&0!==t)return 0;var r=e&&-1!==e.indexOf("%"),o=r?100*t:t;o=n>0?o/n:o;var a=parseInt(o).toString().length;if((r||n>0)&&a>=i)return 0;if(0===n){var s=Math.floor(a/3);s=a%3==0?s-1:s;var l=Math.pow(1e3,s);l>0&&(o/=l)}var c=(a=parseInt(o).toString().length)%i;return 0===c?0:i-c}},15807:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.splitByWidth=e.getMaxWordWidth=e.wordCount=e.hasBreakers=e.find=void 0;var n=/[\s\n]+/g;function i(t,e,n){if(n){for(var i=t-1;i>-1;i--)if(r(e[i]))return i+1}else{i=t;for(var o=e.length;i<o;i++)if(r(e[i]))return i}return n?0:e.length}function r(t){return n.lastIndex=0,n.test(t)}function o(t){return t.split(n)}function a(t,e,n){return e.text=t,n(e)}function s(t,e,n,i){return e.text=t,n(e,i)}e.find=function(t,e){var n={start:0,end:0};return 0===e.length||(n.start=i(t,e,!0),n.end=i(t,e,!1)),n},e.hasBreakers=r,e.wordCount=function(t){var e=1;for(n.lastIndex=0,n.exec(t);0!==n.lastIndex;)e++,n.exec(t);return e},e.getMaxWordWidth=function(t,e,n){for(var i=0,r=0,a=o(t);r<a.length;r++){var s=a[r];n.text=s,i=Math.max(i,e(n))}return i},e.splitByWidth=function(t,e,n,i,r,l){l=l||function(t,e){return t.text};for(var c=[],u=0,h=[],d=0,p=o(t);d<p.length;d++){var f=p[d];if(r>0&&c.length>=r-1)h.push(f);else{var g=0===h.length?a(f,e,n):a(" "+f,e,n);if(u+g>i){if(0===h.length){c.push(s(f,e,l,i)),u=0,h=[];continue}c.push(s(h.join(" "),e,l,i)),u=0,h=[]}h.push(f),u+=g}}return h&&h.length&&c.push(s(h.join(" "),e,l,i)),c}},85442:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DEFAULT_PRECISION:()=>l,DEFAULT_PRECISION_IN_DECIMAL_DIGITS:()=>c,EPSILON:()=>s,LOG_E_10:()=>u,MAX_EXP:()=>a,MAX_VALUE:()=>r,MIN_EXP:()=>o,MIN_VALUE:()=>i,NEGATIVE_POWERS:()=>d,POSITIVE_POWERS:()=>h,ceilToPrecision:()=>C,ceilWithPrecision:()=>x,detectPrecision:()=>O,ensureInRange:()=>T,equalWithPrecision:()=>m,floorToPrecision:()=>k,floorWithPrecision:()=>S,getPrecision:()=>g,greaterOrEqualWithPrecision:()=>w,greaterWithPrecision:()=>b,isInteger:()=>P,lessOrEqualWithPrecision:()=>y,lessWithPrecision:()=>v,log10:()=>f,pow10:()=>p,project:()=>A,removeDecimalNoise:()=>_,round:()=>E,roundToPrecision:()=>M,toIncrement:()=>D});const i=-Number.MAX_VALUE,r=Number.MAX_VALUE,o=-308,a=308,s=1e-323,l=1e-4,c=12,u=Math.log(10),h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,1e23,1e24,1e25,1e26,1e27,1e28,1e29,1e30,1e31,1e32,1e33,1e34,1e35,1e36,1e37,1e38,1e39,1e40,1e41,1e42,1e43,1e44,1e45,1e46,1e47,1e48,1e49,1e50,1e51,1e52,1e53,1e54,1e55,1e56,1e57,1e58,1e59,1e60,1e61,1e62,1e63,1e64,1e65,1e66,1e67,1e68,1e69,1e70,1e71,1e72,1e73,1e74,1e75,1e76,1e77,1e78,1e79,1e80,1e81,1e82,1e83,1e84,1e85,1e86,1e87,1e88,1e89,1e90,1e91,1e92,1e93,1e94,1e95,1e96,1e97,1e98,1e99,1e100,1e101,1e102,1e103,1e104,1e105,1e106,1e107,1e108,1e109,1e110,1e111,1e112,1e113,1e114,1e115,1e116,1e117,1e118,1e119,1e120,1e121,1e122,1e123,1e124,1e125,1e126,1e127,1e128,1e129,1e130,1e131,1e132,1e133,1e134,1e135,1e136,1e137,1e138,1e139,1e140,1e141,1e142,1e143,1e144,1e145,1e146,1e147,1e148,1e149,1e150,1e151,1e152,1e153,1e154,1e155,1e156,1e157,1e158,1e159,1e160,1e161,1e162,1e163,1e164,1e165,1e166,1e167,1e168,1e169,1e170,1e171,1e172,1e173,1e174,1e175,1e176,1e177,1e178,1e179,1e180,1e181,1e182,1e183,1e184,1e185,1e186,1e187,1e188,1e189,1e190,1e191,1e192,1e193,1e194,1e195,1e196,1e197,1e198,1e199,1e200,1e201,1e202,1e203,1e204,1e205,1e206,1e207,1e208,1e209,1e210,1e211,1e212,1e213,1e214,1e215,1e216,1e217,1e218,1e219,1e220,1e221,1e222,1e223,1e224,1e225,1e226,1e227,1e228,1e229,1e230,1e231,1e232,1e233,1e234,1e235,1e236,1e237,1e238,1e239,1e240,1e241,1e242,1e243,1e244,1e245,1e246,1e247,1e248,1e249,1e250,1e251,1e252,1e253,1e254,1e255,1e256,1e257,1e258,1e259,1e260,1e261,1e262,1e263,1e264,1e265,1e266,1e267,1e268,1e269,1e270,1e271,1e272,1e273,1e274,1e275,1e276,1e277,1e278,1e279,1e280,1e281,1e282,1e283,1e284,1e285,1e286,1e287,1e288,1e289,1e290,1e291,1e292,1e293,1e294,1e295,1e296,1e297,1e298,1e299,1e300,1e301,1e302,1e303,1e304,1e305,1e306,1e307,1e308],d=[1,.1,.01,.001,1e-4,1e-5,1e-6,1e-7,1e-8,1e-9,1e-10,1e-11,1e-12,1e-13,1e-14,1e-15,1e-16,1e-17,1e-18,1e-19,1e-20,1e-21,1e-22,1e-23,1e-24,1e-25,1e-26,1e-27,1e-28,1e-29,1e-30,1e-31,1e-32,1e-33,1e-34,1e-35,1e-36,1e-37,1e-38,1e-39,1e-40,1e-41,1e-42,1e-43,1e-44,1e-45,1e-46,1e-47,1e-48,1e-49,1e-50,1e-51,1e-52,1e-53,1e-54,1e-55,1e-56,1e-57,1e-58,1e-59,1e-60,1e-61,1e-62,1e-63,1e-64,1e-65,1e-66,1e-67,1e-68,1e-69,1e-70,1e-71,1e-72,1e-73,1e-74,1e-75,1e-76,1e-77,1e-78,1e-79,1e-80,1e-81,1e-82,1e-83,1e-84,1e-85,1e-86,1e-87,1e-88,1e-89,1e-90,1e-91,1e-92,1e-93,1e-94,1e-95,1e-96,1e-97,1e-98,1e-99,1e-100,1e-101,1e-102,1e-103,1e-104,1e-105,1e-106,1e-107,1e-108,1e-109,1e-110,1e-111,1e-112,1e-113,1e-114,1e-115,1e-116,1e-117,1e-118,1e-119,1e-120,1e-121,1e-122,1e-123,1e-124,1e-125,1e-126,1e-127,1e-128,1e-129,1e-130,1e-131,1e-132,1e-133,1e-134,1e-135,1e-136,1e-137,1e-138,1e-139,1e-140,1e-141,1e-142,1e-143,1e-144,1e-145,1e-146,1e-147,1e-148,1e-149,1e-150,1e-151,1e-152,1e-153,1e-154,1e-155,1e-156,1e-157,1e-158,1e-159,1e-160,1e-161,1e-162,1e-163,1e-164,1e-165,1e-166,1e-167,1e-168,1e-169,1e-170,1e-171,1e-172,1e-173,1e-174,1e-175,1e-176,1e-177,1e-178,1e-179,1e-180,1e-181,1e-182,1e-183,1e-184,1e-185,1e-186,1e-187,1e-188,1e-189,1e-190,1e-191,1e-192,1e-193,1e-194,1e-195,1e-196,1e-197,1e-198,1e-199,1e-200,1e-201,1e-202,1e-203,1e-204,1e-205,1e-206,1e-207,1e-208,1e-209,1e-210,1e-211,1e-212,1e-213,1e-214,1e-215,1e-216,1e-217,1e-218,1e-219,1e-220,1e-221,1e-222,1e-223,1e-224,1e-225,1e-226,1e-227,1e-228,1e-229,1e-230,1e-231,1e-232,1e-233,1e-234,1e-235,1e-236,1e-237,1e-238,1e-239,1e-240,1e-241,1e-242,1e-243,1e-244,1e-245,1e-246,1e-247,1e-248,1e-249,1e-250,1e-251,1e-252,1e-253,1e-254,1e-255,1e-256,1e-257,1e-258,1e-259,1e-260,1e-261,1e-262,1e-263,1e-264,1e-265,1e-266,1e-267,1e-268,1e-269,1e-270,1e-271,1e-272,1e-273,1e-274,1e-275,1e-276,1e-277,1e-278,1e-279,1e-280,1e-281,1e-282,1e-283,1e-284,1e-285,1e-286,1e-287,1e-288,1e-289,1e-290,1e-291,1e-292,1e-293,1e-294,1e-295,1e-296,1e-297,1e-298,1e-299,1e-300,1e-301,1e-302,1e-303,1e-304,1e-305,1e-306,1e-307,1e-308,1e-309,1e-310,1e-311,1e-312,1e-313,1e-314,1e-315,1e-316,1e-317,1e-318,1e-319,1e-320,1e-321,1e-322,1e-323,0];function p(t){return t>=0?t<h.length?h[t]:1/0:(t=-t)>0&&t<d.length?d[t]:0}function f(t){return t>1&&t<1e16?t<1e8?t<1e4?t<100?t<10?0:1:t<1e3?2:3:t<1e6?t<1e5?4:5:t<1e7?6:7:t<1e12?t<1e10?t<1e9?8:9:t<1e11?10:11:t<1e14?t<1e13?12:13:t<1e15?14:15:t>1e-16&&t<1?t<1e-8?t<1e-12?t<1e-14?t<1e-15?-16:-15:t<1e-13?-14:-13:t<1e-10?t<1e-11?-12:-11:t<1e-9?-10:-9:t<1e-4?t<1e-6?t<1e-7?-8:-7:t<1e-5?-6:-5:t<.01?t<.001?-4:-3:t<.1?-2:-1:S(Math.log(t)/u)}function g(t,e){if(void 0===e&&(e=c),!t||!isFinite(t))return;const n=f(Math.abs(t));return n<o?0:p(Math.max(n-e,1-d.length))}function m(t,e,n){return n=O(n,t,e),t===e||Math.abs(t-e)<n}function v(t,e,n){return n=O(n,t,e),t<e&&Math.abs(t-e)>n}function y(t,e,n){return n=O(n,t,e),t<e||Math.abs(t-e)<n}function b(t,e,n){return n=O(n,t,e),t>e&&Math.abs(t-e)>n}function w(t,e,n){return n=O(n,t,e),t>e||Math.abs(t-e)<n}function S(t,e){e=null!=e?e:l;const n=Math.round(t);return Math.abs(t-n)<e?n:Math.floor(t)}function x(t,e){e=O(e,l);const n=Math.round(t);return Math.abs(t-n)<e?n:Math.ceil(t)}function k(t,e){return 0===(e=O(e,l))||0===t?t:Math.floor(t/e)*e}function C(t,e){return 0===(e=O(e,l))||0===t?t:Math.ceil(t/e)*e}function M(t,e){if(0===(e=O(e,l))||0===t)return t;let n=Math.round(t/e)*e;const i=Math.round(f(Math.abs(t))-f(e))+1;return i>0&&i<16&&(n=parseFloat(n.toPrecision(i))),n}function T(t,e,n){return null==t?t:t<e?e:t>n?n:t}function E(t){return.5+t|0}function A(t,e,n,i,r){return 0===n||0===r?e<=t&&t<=e+n?i:NaN:i+(t-e)/n*r}function _(t){return M(t,g(t))}function P(t){return null!==t&&t%1==0}function D(t,e){return Math.round(t/e)*e}function O(t,e,n){if(void 0!==t)return t;let i;return i=g(n?e?Math.min(Math.abs(e),Math.abs(n)):n:e),i||l}},94341:(t,e,n)=>{"use strict";function i(t,e){const n=[];for(let i=t.length-1;i>=0;--i)-1!==e.indexOf(t[i])&&n.push(t[i]);return n}function r(t,e){const n=[];for(let i=t.length-1;i>=0;--i){const r=t[i];-1===e.indexOf(r)&&n.push(r)}return n}function o(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];-1===e.indexOf(i)&&e.push(i)}return e}function a(t,e){for(let n=0,i=e.length;n<i;++n)s(t,e[n])}function s(t,e){t.indexOf(e)<0&&t.push(e)}function l(t,e,n){const i=[];for(let r=e;r<=n;++r)i.push(t[r]);return i}function c(t,e){const n=[];for(let i=0;i<e;++i)n.push(t[i]);return n}function u(t){return c(t,t.length)}function h(t,e,n){if(t||(t=null),e||(e=null),t===e)return!0;if(!!t!=!!e)return!1;const i=t.length;if(i!==e.length)return!1;let r=0;for(;r<i&&n(t[r],e[r]);)++r;return r===i}function d(t){return t&&0===t.length?null:t}function p(t,e){for(let n=0,i=t.length;n<i;++n)if(e(t[n]))return n;return-1}function f(t,e){if(0===e)return t.slice();const n=t.slice(e);return Array.prototype.push.apply(n,t.slice(0,e)),n}function g(){return m([])}function m(t){const e=t;return e.withId=y,e}function v(t,e){for(let n=0,i=t.length;n<i;n++){const i=t[n];if(i.id===e)return i}}function y(t){return v(this,t)}function b(){return w([])}function w(t){const e=t;return e.withName=M,e}function S(t,e){const n=x(t,e);if(n>=0)return t[n]}function x(t,e){for(let n=0,i=t.length;n<i;n++)if(t[n].name===e)return n;return-1}function k(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n]-e;if(0===i)return!1;if(!(i>0))return t.splice(n+1,0,e),!0}return t.unshift(e),!0}function C(t,e){const n=t.indexOf(e);return!(n<0||(t.splice(n,1),0))}function M(t){return S(this,t)}function T(t){if(t)for(;t.length>0;)t.pop()}function E(t){return!t||0===t.length}function A(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function _(t,e,n){return t.some((t=>n(t,e)))}function P(t){let e=t;for(;null!=e;){if(Array.isArray(e))return!0;e=Object.getPrototypeOf(e)}return!1}function D(t,e){const n=t.length;if(n>=2)for(let i=1;i<n;i++)if(e(t[i-1],t[i])>0)return!1;return!0}function O(t,e){return D(t,e?(t,e)=>e-t:(t,e)=>t-e)}function L(t){return Array.isArray(t)?t:[t]}n.r(e),n.d(e,{clear:()=>T,copy:()=>u,createWithId:()=>g,createWithName:()=>b,diff:()=>r,distinct:()=>o,emptyToNull:()=>d,ensureArray:()=>L,extendWithId:()=>m,extendWithName:()=>w,findItemWithName:()=>S,findWithId:()=>v,indexOf:()=>p,indexWithName:()=>x,insertSorted:()=>k,intersect:()=>i,isArrayOrInheritedArray:()=>P,isInArray:()=>_,isSorted:()=>D,isSortedNumeric:()=>O,isUndefinedOrEmpty:()=>E,range:()=>l,removeFirst:()=>C,rotate:()=>f,sequenceEqual:()=>h,swap:()=>A,take:()=>c,union:()=>a,unionSingle:()=>s})},2879:(t,e,n)=>{"use strict";n.r(e),n.d(e,{getBitCount:()=>l,hasFlag:()=>r,resetFlag:()=>a,setFlag:()=>o,toString:()=>s});var i=n(85442);function r(t,e){return(t&e)===e}function o(t,e){return t|e}function a(t,e){return t&~e}function s(t,e){return t[e]}function l(t){if(!(0,i.isInteger)(t))return 0;let e=0,n=t;for(;0!==n;)1&~n||e++,n>>>=1;return e}},54298:(t,e,n)=>{"use strict";function i(t,e){return(t||e)&&!(t&&e)}n.r(e),n.d(e,{XOR:()=>i})},93051:(t,e,n)=>{"use strict";function i(t,e,n){return t.lastIndex=n||0,t.exec(e)}n.r(e),n.d(e,{run:()=>i})},70539:(t,e,n)=>{"use strict";function i(t,e){return-1!==t.indexOf(e,t.length-e.length)}n.r(e),n.d(e,{endsWith:()=>i})},52087:(t,e,n)=>{"use strict";n.r(e),n.d(e,{arrayExtensions:()=>i,double:()=>u,enumExtensions:()=>r,jsonComparer:()=>h,logicExtensions:()=>o,numericSequence:()=>l,numericSequenceRange:()=>c,pixelConverter:()=>d,prototype:()=>p,regExpExtensions:()=>a,stringExtensions:()=>s,textSizeDefaults:()=>f,valueType:()=>g});var i=n(94341),r=n(2879),o=n(54298),a=n(93051),s=n(70539),l=n(80372),c=n(20067),u=n(85442),h=n(15038),d=n(55079),p=n(90421),f=n(35939),g=n(64182)},15038:(t,e,n)=>{"use strict";function i(t,e){return t===e||JSON.stringify(t)===JSON.stringify(e)}n.r(e),n.d(e,{equals:()=>i})},80372:(t,e,n)=>{"use strict";n.r(e),n.d(e,{NumericSequence:()=>o});var i=n(85442),r=n(20067);class o{static calculate(t,e,n,a,s,l){const c=new o;if(e=void 0===e?10:i.ensureInRange(e,o.MIN_COUNT,o.MAX_COUNT),void 0===a&&(a=i.MIN_EXP),void 0===s&&(s=!1),void 0===n&&(n=1),void 0===l&&(l=[1,2,5]),t.forcedSingleStop)return c.interval=t.getSize(),c.intervalOffset=c.interval-(t.forcedSingleStop-t.min),c.min=t.min,c.max=t.max,c.sequence=[t.forcedSingleStop],c;let u=0,h=0,d=9;const p=n>0&&!t.hasFixedMin,f=n>0&&!t.hasFixedMax,g=t.getSize();let m=i.log10(g);const v=i.log10(l[0]);let y;if(m-=v,m-=i.log10(e),m=Math.max(m,a-v+1),0!==u){const e=i.pow10(m),n=i.floorToPrecision(t.min,e),o=i.ceilToPrecision(t.max,e),a=r.NumericSequenceRange.calculateFixedRange(n,o);a.shrinkByStep(t,u),h=a.min,d=a.max,y=Math.floor(a.getSize()/u)}else{let o;for(o=0;o<3;o++){const a=m+o,c=i.pow10(a),g=i.floorToPrecision(t.min,c),v=i.ceilToPrecision(t.max,c),b=l.length,w=i.pow10(a-1);for(let a=0;a<b;a++){const c=l[a]*w,m=r.NumericSequenceRange.calculateFixedRange(g,v,s);if(m.shrinkByStep(t,c),p&&t.min===m.min&&n>=1&&(m.min-=c),f&&t.max===m.max&&n>=1&&(m.max+=c),y=i.ceilWithPrecision(m.getSize()/c,i.DEFAULT_PRECISION),y<=e||2===o&&a===b-1||1===e&&2===y&&(c>t.getSize()||t.min<0&&t.max>0&&2*c>=t.getSize())){u=c,h=m.min,d=m.max;break}}if(0!==u)break}}(y>32*e||y>o.MAX_COUNT)&&(y=Math.min(32*e,o.MAX_COUNT),u=(d-h)/y),c.min=h,c.max=d,c.interval=u,c.intervalOffset=h-t.min,c.maxAllowedMargin=n,c.canExtendMin=p,c.canExtendMax=f;const b=i.getPrecision(u,0);c.precision=b;const w=[];let S=i.roundToPrecision(h,b);w.push(S);for(let t=0;t<y;t++)S=i.roundToPrecision(S+u,b),w.push(S);return c.sequence=w,c.trimMinMax(t.min,t.max),c}static calculateUnits(t,e,n,r){n=i.ensureInRange(n,o.MIN_COUNT,o.MAX_COUNT),t===e&&(e=t+1);let a=0,s=0;for(let o=0;o<r.length&&(s=r[o],a=i.ceilWithPrecision(e/s)-i.floorWithPrecision(t/s),!(a<=n));o++);let l=-t;l%=s;const c=new o;c.sequence=[];for(let n=t+l;c.sequence.push(n),!(n>=e);n+=s);return c.interval=s,c.intervalOffset=l,c.min=c.sequence[0],c.max=c.sequence[c.sequence.length-1],c}trimMinMax(t,e){const n=(t-this.min)/this.interval,i=(this.max-e)/this.interval;(!this.canExtendMin||n>this.maxAllowedMargin&&n>.001)&&(this.min=t),(!this.canExtendMax||i>this.maxAllowedMargin&&i>.001)&&(this.max=e)}}o.MIN_COUNT=1,o.MAX_COUNT=1e3},20067:(t,e,n)=>{"use strict";n.r(e),n.d(e,{NumericSequenceRange:()=>r,hasValue:()=>o});var i=n(85442);class r{_ensureIncludeZero(){this.includeZero&&(this.min>0&&!this.hasFixedMin&&(this.min=0),this.max<0&&!this.hasFixedMax&&(this.max=0))}_ensureNotEmpty(){if(this.min===this.max)if(this.min){const t=this.min,e=i.log10(Math.abs(t));let n;e>=0&&e<4?(n=.5,this.forcedSingleStop=t):(n=i.pow10(e)/2,this.forcedSingleStop=null),this.min=t-n,this.max=t+n}else this.min=0,this.max=r.DEFAULT_MAX,this.hasFixedMin=!0,this.hasFixedMax=!0}_ensureDirection(){if(this.min>this.max){const t=this.min;this.min=this.max,this.max=t}}getSize(){return this.max-this.min}shrinkByStep(t,e){let n=this.min/e,i=t.min/e,r=Math.floor(i-n);this.min+=r*e,n=this.max/e,i=t.max/e,r=Math.ceil(i-n),this.max+=r*e}static calculate(t,e,n,a,s){const l=new r;return l.includeZero=!!s,l.hasDataRange=o(t)&&o(e),l.hasFixedMin=o(n),l.hasFixedMax=o(a),t=i.ensureInRange(t,r.MIN_SUPPORTED_DOUBLE,r.MAX_SUPPORTED_DOUBLE),e=i.ensureInRange(e,r.MIN_SUPPORTED_DOUBLE,r.MAX_SUPPORTED_DOUBLE),l.hasFixedMin&&l.hasFixedMax?(l.min=n,l.max=a):l.hasFixedMin?(l.min=n,l.max=e>n?e:n):l.hasFixedMax?(l.min=t<a?t:a,l.max=a):l.hasDataRange?(l.min=t,l.max=e):(l.min=0,l.max=0),l._ensureIncludeZero(),l._ensureNotEmpty(),l._ensureDirection(),0===l.min?l.hasFixedMin=!0:0===l.max&&(l.hasFixedMax=!0),l}static calculateDataRange(t,e,n){return o(t)&&o(e)?r.calculate(t,e,null,null,n):r.calculateFixedRange(0,r.DEFAULT_MAX)}static calculateFixedRange(t,e,n){const i=new r;return i.hasDataRange=!1,i.includeZero=n,i.min=t,i.max=e,i._ensureIncludeZero(),i._ensureNotEmpty(),i._ensureDirection(),i.hasFixedMin=!0,i.hasFixedMax=!0,i}}function o(t){return null!=t}r.DEFAULT_MAX=10,r.MIN_SUPPORTED_DOUBLE=-1e307,r.MAX_SUPPORTED_DOUBLE=1e307},55079:(t,e,n)=>{"use strict";n.r(e),n.d(e,{fromPoint:()=>a,fromPointToPixel:()=>s,toPoint:()=>l,toString:()=>o});const i=4/3,r="px";function o(t){return t+r}function a(t){return o(s(t))}function s(t){return i*t}function l(t){return t/i}},90421:(t,e,n)=>{"use strict";function i(t,e){function n(){}n.prototype=t;const i=new n;return e&&e(i),i}function r(t){const e=Object.getPrototypeOf(t);return e!==Object.prototype&&e!==Array.prototype||(t=i(t)),t}function o(t,e){if(!t)return;let n;for(let r=0,o=t.length;r<o;r++){const o=e(t[r]);o&&(n||(n=i(t)),n[r]=o)}return n}n.r(e),n.d(e,{inherit:()=>i,inheritSingle:()=>r,overrideArray:()=>o})},35939:(t,e,n)=>{"use strict";n.r(e),n.d(e,{TextSizeMax:()=>r,TextSizeMin:()=>i,getScale:()=>a});const i=8,r=40,o=r-i;function a(t){return(t-i)/o}},64182:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ExtendedType:()=>o,FormattingType:()=>f,GeographyType:()=>d,MiscellaneousType:()=>p,PrimitiveType:()=>i,ScriptType:()=>u,TemporalType:()=>h,ValueType:()=>c});var i,r,o,a,s=n(2879),l=n(15038);class c{constructor(t,e,n,i){this.underlyingType=t,this.category=e,s.hasFlag(t,o.Temporal)&&(this.temporalType=new h(t)),s.hasFlag(t,o.Geography)&&(this.geographyType=new d(t)),s.hasFlag(t,o.Miscellaneous)&&(this.miscType=new p(t)),s.hasFlag(t,o.Formatting)&&(this.formattingType=new f(t)),s.hasFlag(t,o.Enumeration)&&(this.enumType=n),s.hasFlag(t,o.Scripting)&&(this.scriptingType=new u(t)),s.hasFlag(t,o.Variant)&&(this.variationTypes=i)}static fromDescriptor(t){if((t=t||{}).text)return c.fromExtendedType(o.Text);if(t.integer)return c.fromExtendedType(o.Integer);if(t.numeric)return c.fromExtendedType(o.Double);if(t.bool)return c.fromExtendedType(o.Boolean);if(t.dateTime)return c.fromExtendedType(o.DateTime);if(t.duration)return c.fromExtendedType(o.Duration);if(t.binary)return c.fromExtendedType(o.Binary);if(t.none)return c.fromExtendedType(o.None);if(t.scripting&&t.scripting.source)return c.fromExtendedType(o.ScriptSource);if(t.enumeration)return c.fromEnum(t.enumeration);if(t.temporal){if(t.temporal.year)return c.fromExtendedType(o.Years_Integer);if(t.temporal.quarter)return c.fromExtendedType(o.Quarters_Integer);if(t.temporal.month)return c.fromExtendedType(o.Months_Integer);if(t.temporal.day)return c.fromExtendedType(o.DayOfMonth_Integer);if(t.temporal.paddedDateTableDate)return c.fromExtendedType(o.PaddedDateTableDates)}if(t.geography){if(t.geography.address)return c.fromExtendedType(o.Address);if(t.geography.city)return c.fromExtendedType(o.City);if(t.geography.continent)return c.fromExtendedType(o.Continent);if(t.geography.country)return c.fromExtendedType(o.Country);if(t.geography.county)return c.fromExtendedType(o.County);if(t.geography.region)return c.fromExtendedType(o.Region);if(t.geography.postalCode)return c.fromExtendedType(o.PostalCode_Text);if(t.geography.stateOrProvince)return c.fromExtendedType(o.StateOrProvince);if(t.geography.place)return c.fromExtendedType(o.Place);if(t.geography.latitude)return c.fromExtendedType(o.Latitude_Double);if(t.geography.longitude)return c.fromExtendedType(o.Longitude_Double)}if(t.misc){if(t.misc.image)return c.fromExtendedType(o.Image);if(t.misc.imageUrl)return c.fromExtendedType(o.ImageUrl);if(t.misc.webUrl)return c.fromExtendedType(o.WebUrl);if(t.misc.barcode)return c.fromExtendedType(o.Barcode_Text)}if(t.formatting){if(t.formatting.color)return c.fromExtendedType(o.Color);if(t.formatting.formatString)return c.fromExtendedType(o.FormatString);if(t.formatting.alignment)return c.fromExtendedType(o.Alignment);if(t.formatting.labelDisplayUnits)return c.fromExtendedType(o.LabelDisplayUnits);if(t.formatting.fontSize)return c.fromExtendedType(o.FontSize);if(t.formatting.labelDensity)return c.fromExtendedType(o.LabelDensity)}if(t.extendedType)return c.fromExtendedType(t.extendedType);if(t.operations&&t.operations.searchEnabled)return c.fromExtendedType(o.SearchEnabled);if(t.variant){const e=t.variant.map((t=>c.fromDescriptor(t)));return c.fromVariant(e)}return c.fromExtendedType(o.Null)}static fromExtendedType(t){const e=y(t=t||o.Null),n=function(t){if(function(t){return(t&m)===t}(t))return null;let e=a[t];if(e){const t=e.lastIndexOf("_");if(t>0){const n=e.slice(0,t);a[n]&&(e=n)}}return e||null}(t);return c.fromPrimitiveTypeAndCategory(e,n)}static fromPrimitiveTypeAndCategory(t,e){e=e||null;let n=(t=t||i.Null).toString();return e&&(n+="|"+e),c.typeCache[n]||(c.typeCache[n]=new c(function(t,e){const n=r[t];let s=a[n];if(null==s&&(s=o.Null),t&&e){let n=a[e];if(n){const e=y(n);e===i.Null?(n|=s,a[n]&&(s=n)):e===t&&(s=n)}}return s}(t,e),e))}static fromEnum(t){return new c(o.Enumeration,null,t)}static fromVariant(t){return new c(o.Variant,null,null,t)}static isCompatibleTo(t,e){const n=c.fromDescriptor(t);for(const t of e)if(c.fromDescriptor(t).isCompatibleFrom(n))return!0;return!1}isCompatibleFrom(t){const e=t.primitiveType;return!!(this===t||this.primitiveType===e||e===i.Null||this.numeric&&t.numeric)}equals(t){return(0,l.equals)(this,t)}get primitiveType(){return y(this.underlyingType)}get extendedType(){return this.underlyingType}get categoryString(){return this.category}get text(){return this.primitiveType===i.Text}get numeric(){return s.hasFlag(this.underlyingType,o.Numeric)}get integer(){return this.primitiveType===i.Integer}get bool(){return this.primitiveType===i.Boolean}get dateTime(){return this.primitiveType===i.DateTime||this.primitiveType===i.Date||this.primitiveType===i.Time}get duration(){return this.primitiveType===i.Duration}get binary(){return this.primitiveType===i.Binary}get none(){return this.primitiveType===i.None}get temporal(){return this.temporalType}get geography(){return this.geographyType}get misc(){return this.miscType}get formatting(){return this.formattingType}get enumeration(){return this.enumType}get scripting(){return this.scriptingType}get variant(){return this.variationTypes}}c.typeCache={};class u{constructor(t){this.underlyingType=t}get source(){return b(this.underlyingType,o.ScriptSource)}}class h{constructor(t){this.underlyingType=t}get year(){return b(this.underlyingType,o.Years)}get quarter(){return b(this.underlyingType,o.Quarters)}get month(){return b(this.underlyingType,o.Months)}get day(){return b(this.underlyingType,o.DayOfMonth)}get paddedDateTableDate(){return b(this.underlyingType,o.PaddedDateTableDates)}}class d{constructor(t){this.underlyingType=t}get address(){return b(this.underlyingType,o.Address)}get city(){return b(this.underlyingType,o.City)}get continent(){return b(this.underlyingType,o.Continent)}get country(){return b(this.underlyingType,o.Country)}get county(){return b(this.underlyingType,o.County)}get region(){return b(this.underlyingType,o.Region)}get postalCode(){return b(this.underlyingType,o.PostalCode)}get stateOrProvince(){return b(this.underlyingType,o.StateOrProvince)}get place(){return b(this.underlyingType,o.Place)}get latitude(){return b(this.underlyingType,o.Latitude)}get longitude(){return b(this.underlyingType,o.Longitude)}}class p{constructor(t){this.underlyingType=t}get image(){return b(this.underlyingType,o.Image)}get imageUrl(){return b(this.underlyingType,o.ImageUrl)}get webUrl(){return b(this.underlyingType,o.WebUrl)}get barcode(){return b(this.underlyingType,o.Barcode)}}class f{constructor(t){this.underlyingType=t}get color(){return b(this.underlyingType,o.Color)}get formatString(){return b(this.underlyingType,o.FormatString)}get alignment(){return b(this.underlyingType,o.Alignment)}get labelDisplayUnits(){return b(this.underlyingType,o.LabelDisplayUnits)}get fontSize(){return b(this.underlyingType,o.FontSize)}get labelDensity(){return b(this.underlyingType,o.LabelDensity)}}!function(t){t[t.Null=0]="Null",t[t.Text=1]="Text",t[t.Decimal=2]="Decimal",t[t.Double=3]="Double",t[t.Integer=4]="Integer",t[t.Boolean=5]="Boolean",t[t.Date=6]="Date",t[t.DateTime=7]="DateTime",t[t.DateTimeZone=8]="DateTimeZone",t[t.Time=9]="Time",t[t.Duration=10]="Duration",t[t.Binary=11]="Binary",t[t.None=12]="None",t[t.Variant=13]="Variant"}(i||(i={})),function(t){t[t.Null=0]="Null",t[t.Text=1]="Text",t[t.Decimal=2]="Decimal",t[t.Double=3]="Double",t[t.Integer=4]="Integer",t[t.Boolean=5]="Boolean",t[t.Date=6]="Date",t[t.DateTime=7]="DateTime",t[t.DateTimeZone=8]="DateTimeZone",t[t.Time=9]="Time",t[t.Duration=10]="Duration",t[t.Binary=11]="Binary",t[t.None=12]="None",t[t.Variant=13]="Variant"}(r||(r={})),function(t){t[t.Numeric=256]="Numeric",t[t.Temporal=512]="Temporal",t[t.Geography=1024]="Geography",t[t.Miscellaneous=2048]="Miscellaneous",t[t.Formatting=4096]="Formatting",t[t.Scripting=8192]="Scripting",t[t.Null=0]="Null",t[t.Text=1]="Text",t[t.Decimal=258]="Decimal",t[t.Double=259]="Double",t[t.Integer=260]="Integer",t[t.Boolean=5]="Boolean",t[t.Date=518]="Date",t[t.DateTime=519]="DateTime",t[t.DateTimeZone=520]="DateTimeZone",t[t.Time=521]="Time",t[t.Duration=10]="Duration",t[t.Binary=11]="Binary",t[t.None=12]="None",t[t.Variant=13]="Variant",t[t.Years=66048]="Years",t[t.Years_Text=66049]="Years_Text",t[t.Years_Integer=66308]="Years_Integer",t[t.Years_Date=66054]="Years_Date",t[t.Years_DateTime=66055]="Years_DateTime",t[t.Months=131584]="Months",t[t.Months_Text=131585]="Months_Text",t[t.Months_Integer=131844]="Months_Integer",t[t.Months_Date=131590]="Months_Date",t[t.Months_DateTime=131591]="Months_DateTime",t[t.PaddedDateTableDates=197127]="PaddedDateTableDates",t[t.Quarters=262656]="Quarters",t[t.Quarters_Text=262657]="Quarters_Text",t[t.Quarters_Integer=262916]="Quarters_Integer",t[t.Quarters_Date=262662]="Quarters_Date",t[t.Quarters_DateTime=262663]="Quarters_DateTime",t[t.DayOfMonth=328192]="DayOfMonth",t[t.DayOfMonth_Text=328193]="DayOfMonth_Text",t[t.DayOfMonth_Integer=328452]="DayOfMonth_Integer",t[t.DayOfMonth_Date=328198]="DayOfMonth_Date",t[t.DayOfMonth_DateTime=328199]="DayOfMonth_DateTime",t[t.Address=6554625]="Address",t[t.City=6620161]="City",t[t.Continent=6685697]="Continent",t[t.Country=6751233]="Country",t[t.County=6816769]="County",t[t.Region=6882305]="Region",t[t.PostalCode=6947840]="PostalCode",t[t.PostalCode_Text=6947841]="PostalCode_Text",t[t.PostalCode_Integer=6948100]="PostalCode_Integer",t[t.StateOrProvince=7013377]="StateOrProvince",t[t.Place=7078913]="Place",t[t.Latitude=7144448]="Latitude",t[t.Latitude_Decimal=7144706]="Latitude_Decimal",t[t.Latitude_Double=7144707]="Latitude_Double",t[t.Longitude=7209984]="Longitude",t[t.Longitude_Decimal=7210242]="Longitude_Decimal",t[t.Longitude_Double=7210243]="Longitude_Double",t[t.Image=13109259]="Image",t[t.ImageUrl=13174785]="ImageUrl",t[t.WebUrl=13240321]="WebUrl",t[t.Barcode=13305856]="Barcode",t[t.Barcode_Text=13305857]="Barcode_Text",t[t.Barcode_Integer=13306116]="Barcode_Integer",t[t.Color=19664897]="Color",t[t.FormatString=19730433]="FormatString",t[t.Alignment=20058113]="Alignment",t[t.LabelDisplayUnits=20123649]="LabelDisplayUnits",t[t.FontSize=20189443]="FontSize",t[t.LabelDensity=20254979]="LabelDensity",t[t.Enumeration=26214401]="Enumeration",t[t.ScriptSource=32776193]="ScriptSource",t[t.SearchEnabled=65541]="SearchEnabled"}(o||(o={})),function(t){t[t.Numeric=256]="Numeric",t[t.Temporal=512]="Temporal",t[t.Geography=1024]="Geography",t[t.Miscellaneous=2048]="Miscellaneous",t[t.Formatting=4096]="Formatting",t[t.Scripting=8192]="Scripting",t[t.Null=0]="Null",t[t.Text=1]="Text",t[t.Decimal=258]="Decimal",t[t.Double=259]="Double",t[t.Integer=260]="Integer",t[t.Boolean=5]="Boolean",t[t.Date=518]="Date",t[t.DateTime=519]="DateTime",t[t.DateTimeZone=520]="DateTimeZone",t[t.Time=521]="Time",t[t.Duration=10]="Duration",t[t.Binary=11]="Binary",t[t.None=12]="None",t[t.Variant=13]="Variant",t[t.Years=66048]="Years",t[t.Years_Text=66049]="Years_Text",t[t.Years_Integer=66308]="Years_Integer",t[t.Years_Date=66054]="Years_Date",t[t.Years_DateTime=66055]="Years_DateTime",t[t.Months=131584]="Months",t[t.Months_Text=131585]="Months_Text",t[t.Months_Integer=131844]="Months_Integer",t[t.Months_Date=131590]="Months_Date",t[t.Months_DateTime=131591]="Months_DateTime",t[t.PaddedDateTableDates=197127]="PaddedDateTableDates",t[t.Quarters=262656]="Quarters",t[t.Quarters_Text=262657]="Quarters_Text",t[t.Quarters_Integer=262916]="Quarters_Integer",t[t.Quarters_Date=262662]="Quarters_Date",t[t.Quarters_DateTime=262663]="Quarters_DateTime",t[t.DayOfMonth=328192]="DayOfMonth",t[t.DayOfMonth_Text=328193]="DayOfMonth_Text",t[t.DayOfMonth_Integer=328452]="DayOfMonth_Integer",t[t.DayOfMonth_Date=328198]="DayOfMonth_Date",t[t.DayOfMonth_DateTime=328199]="DayOfMonth_DateTime",t[t.Address=6554625]="Address",t[t.City=6620161]="City",t[t.Continent=6685697]="Continent",t[t.Country=6751233]="Country",t[t.County=6816769]="County",t[t.Region=6882305]="Region",t[t.PostalCode=6947840]="PostalCode",t[t.PostalCode_Text=6947841]="PostalCode_Text",t[t.PostalCode_Integer=6948100]="PostalCode_Integer",t[t.StateOrProvince=7013377]="StateOrProvince",t[t.Place=7078913]="Place",t[t.Latitude=7144448]="Latitude",t[t.Latitude_Decimal=7144706]="Latitude_Decimal",t[t.Latitude_Double=7144707]="Latitude_Double",t[t.Longitude=7209984]="Longitude",t[t.Longitude_Decimal=7210242]="Longitude_Decimal",t[t.Longitude_Double=7210243]="Longitude_Double",t[t.Image=13109259]="Image",t[t.ImageUrl=13174785]="ImageUrl",t[t.WebUrl=13240321]="WebUrl",t[t.Barcode=13305856]="Barcode",t[t.Barcode_Text=13305857]="Barcode_Text",t[t.Barcode_Integer=13306116]="Barcode_Integer",t[t.Color=19664897]="Color",t[t.FormatString=19730433]="FormatString",t[t.Alignment=20058113]="Alignment",t[t.LabelDisplayUnits=20123649]="LabelDisplayUnits",t[t.FontSize=20189443]="FontSize",t[t.LabelDensity=20254979]="LabelDensity",t[t.Enumeration=26214401]="Enumeration",t[t.ScriptSource=32776193]="ScriptSource",t[t.SearchEnabled=65541]="SearchEnabled"}(a||(a={}));const g=255,m=65535,v=4294901760;function y(t){return t&g}function b(t,e){return(t&v)==(e&v)}},10891:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>T});var i=n(32284),r=n(12437),o=n(71720),a=n(7728),s=n(41273),l=n(54890),c=n(80629),u=n(90077),h=n(89605),d=n(72775),p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},p(t,e)};function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var g=function(){return g=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},g.apply(this,arguments)};function m(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function v(t,e,n){var i=t.tag,r=t.children,o=t.attributes,s=t.className,l=t.style,c=e||(0,a.YE)(n).createElement(i);for(var u in o)c.setAttribute(u,o[u]);var h=c.children;if(r.forEach((function(t,e){v(t,h[e],c)})),s&&s.split(/\s+/g).forEach((function(t){t&&!(0,a.nB)(c,t)&&(0,a.iQ)(c,t)})),l){var d=c.style;for(var u in l)d[u]=l[u]}return!e&&n&&n.appendChild(c),c}function y(t,e,n){t!==e&&n(t,e)}function b(t,e,n){var i;void 0===n&&(n=t.data.boundArea);var r=t.distX,o=void 0===r?0:r,s=t.distY,l=void 0===s?0:s,c=t.data,u=c.startX,h=c.startY;if(e>0){var d=Math.sqrt((o*o+l*l)/(1+e*e));o=e*d*(o>=0?1:-1),l=(l>=0?1:-1)*d}var p=Math.abs(o),f=Math.abs(l),g=o<0?u-n.left:n.right-u,m=l<0?h-n.top:n.bottom-h;o=(o>=0?1:-1)*(p=(i=(0,a.u0)([p,f],[0,0],[g,m],!!e))[0]),l=(l>=0?1:-1)*(f=i[1]);var v=u+Math.min(0,o),y=h+Math.min(0,l);return{left:v,top:y,right:v+p,bottom:y+f,width:p,height:f}}function w(t){var e=t.getBoundingClientRect(),n=e.left,i=e.top,r=e.width,o=e.height;return{pos1:[n,i],pos2:[n+r,i],pos3:[n,i+o],pos4:[n+r,i+o]}}function S(t,e,n){var i=(0,s.U)(t,e),r=i.list,o=i.prevList,a=i.added,l=i.removed,c=i.maintained;return m(m(m([],a.map((function(t){return r[t]})),!0),l.map((function(t){return o[t]})),!0),n?c.map((function(t){var e=t[1];return r[e]})):[],!0)}function x(t){for(var e=0,n=t.length,i=1;i<n;++i)e=Math.max((0,a.l$)(t[i],t[i-1]),e);return e}var k=(0,d.A)("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    pointer-events: none;\n    will-change: transform;\n    z-index: 100;\n}\n"),C="selecto-selection ".concat(k.className),M=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"];const T=(m(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],M,!0),Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e}(function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.selectedTargets=[],n.dragScroll=new l.A,n._onDragStart=function(t,e){var i=t.data,r=t.clientX,o=t.clientY,s=t.inputEvent,l=n.options,c=l.selectFromInside,u=l.selectByClick,d=l.rootContainer,p=l.boundContainer,f=l.preventDragFromInside,m=void 0===f||f,v=l.clickBySelectEnd,y=l.dragCondition;if(!y||y(t)){i.data={};var b=(0,a.zk)(n.container);i.innerWidth=b.innerWidth,i.innerHeight=b.innerHeight,n.findSelectableTargets(i),i.startSelectedTargets=n.selectedTargets,i.scaleMatrix=(0,h.uK)(),i.containerX=0,i.containerY=0;var w=n.container,x={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(d){var k=n.container.getBoundingClientRect();i.containerX=k.left,i.containerY=k.top,i.scaleMatrix=(0,h.OK)(n.container,d)}if(p){var C=(0,a.Gv)(p)&&"element"in p?g({left:!0,top:!0,bottom:!0,right:!0},p):{element:p,left:!0,top:!0,bottom:!0,right:!0},M=C.element;if(M){var T=((0,a.Kg)(M)?(0,a.YE)(w).querySelector(M):!0===M?n.container:M).getBoundingClientRect();C.left&&(x.left=T.left),C.top&&(x.top=T.top),C.right&&(x.right=T.right),C.bottom&&(x.bottom=T.bottom)}}i.boundArea=x;var E={left:r,top:o,right:r,bottom:o,width:0,height:0},A=[],_=u&&!v,P=!1;if(!c||_){var D=n._findElement(e||s.target,i.selectableTargets);P=!!D,_&&(A=D?[D]:[])}var O=!c&&P;if(O&&!u)return t.stop(),!1;var L=s.type,I="mousedown"===L||"touchstart"===L;if(!t.isClick&&I&&!n.emit("dragStart",g(g({},t),{data:i.data})))return t.stop(),!1;if(n.continueSelect?(A=S(n.selectedTargets,A,n.continueSelectWithoutDeselect),i.startPassedTargets=n.selectedTargets):i.startPassedTargets=[],n._select(A,E,t,!0,O&&u&&!v&&m),i.startX=r,i.startY=o,i.selectFlag=!1,i.preventDragFromInside=!1,s.target){var R=(0,h.c4)(i.scaleMatrix,[r-i.containerX,o-i.containerY]);n.target.style.cssText+="position: ".concat(d?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(R[0],"px, ").concat(R[1],"px)")}if(O&&u&&!v)s.preventDefault(),m&&(n._selectEnd(i.startSelectedTargets,i.startPassedTargets,E,t,!0),i.preventDragFromInside=!0);else{i.selectFlag=!0;var V=n.options,N=V.scrollOptions,F=V.innerScrollOptions,B=!1;if(F){for(var z=null,j=t.inputEvent.target;j&&j!==(0,a.YE)(w).body;){if("visible"!==getComputedStyle(j).overflow){z=j;break}j=j.parentElement}z&&(i.innerScrollOptions=g({container:z,checkScrollEvent:!0},!0===F?{}:F),n.dragScroll.dragStart(t,i.innerScrollOptions),B=!0)}!B&&N&&N.container&&n.dragScroll.dragStart(t,N),O&&u&&v&&(i.selectFlag=!1,t.preventDrag())}return!0}t.stop()},n._onDrag=function(t){if(t.data.selectFlag){var e=n.scrollOptions,i=t.data.innerScrollOptions;if((i||(null==e?void 0:e.container))&&!t.isScroll&&n.dragScroll.drag(t,i||e))return}n._checkSelected(t)},n._onDragEnd=function(t){var e,i,r,o,s=t.data,l=t.inputEvent,c=b(t,n.options.ratio),u=s.selectFlag,h=n.container;if(l&&n.emit("dragEnd",g(g({isDouble:!!t.isDouble,isClick:!!t.isClick,isDrag:!1,isSelect:u},t),{data:s.data,rect:c})),n.target.style.cssText+="display: none;",u)s.selectFlag=!1,n.dragScroll.dragEnd();else if(n.selectByClick&&n.clickBySelectEnd){var d=n._findElement((null==l?void 0:l.target)||(e=h,i=t.clientX,r=t.clientY,(o=(0,a.YE)(e)).elementFromPoint&&o.elementFromPoint(i,r)||null),s.selectableTargets);n._select(d?[d]:[],c,t)}s.preventDragFromInside||n._selectEnd(s.startSelectedTargets,s.startPassedTargets,c,t)},n._onKeyDown=function(t){var e=n.options,i=!1;if(!n._keydownContinueSelect){var r=n._sameCombiKey(t,e.toggleContinueSelect);n._keydownContinueSelect=r,i||(i=r)}n._keydownContinueSelectWithoutDeselection||(r=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect),n._keydownContinueSelectWithoutDeselection=r,i||(i=r)),i&&n.emit("keydown",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onKeyUp=function(t){var e=n.options,i=!1;if(n._keydownContinueSelect){var r=n._sameCombiKey(t,e.toggleContinueSelect,!0);n._keydownContinueSelect=!r,i||(i=r)}n._keydownContinueSelectWithoutDeselection&&(r=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect,!0),n._keydownContinueSelectWithoutDeselection=!r,i||(i=r)),i&&n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onBlur=function(){(n._keydownContinueSelect||n._keydownContinueSelectWithoutDeselection)&&(n._keydownContinueSelect=!1,n._keydownContinueSelectWithoutDeselection=!1,n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection}))},n._onDocumentSelectStart=function(t){var e=(0,a.YE)(n.container);if(n.gesto.isFlag()){var i=n.dragContainer;i===(0,a.zk)(n.container)&&(i=e.documentElement);var r=(0,a.Ll)(i)?[i]:[].slice.call(i),o=t.target;r.some((function(e){if(e===o||e.contains(o))return t.preventDefault(),!0}))}},n.target=e.portalContainer;var i=e.container;n.options=g({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:null,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:w,cspNonce:"",ratio:0},e);var r=n.options.portalContainer;return r&&(i=r.parentElement),n.container=i||document.body,n.initElement(),n.initDragScroll(),n.setKeyController(),n}f(e,t);var n=e.prototype;return n.setSelectedTargets=function(t){var e=this.selectedTargets,n=(0,s.U)(e,t),i=n.added,r=n.removed,o=n.prevList,a=n.list;return this.selectedTargets=t,{added:i.map((function(t){return a[t]})),removed:r.map((function(t){return o[t]})),beforeSelected:e,selected:t}},n.setSelectedTargetsByPoints=function(t,e){var n=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),r=Math.max(t[0],e[0]),o=Math.max(t[1],e[1]),a={left:n,top:i,right:r,bottom:o,width:r-n,height:o-i},s={ignoreClick:!0};this.findSelectableTargets(s);var l=this.hitTest(a,s,!0,null),c=this.setSelectedTargets(l);return g(g({},c),{rect:a})},n.selectTargetsByPoints=function(t,e){var n=new MouseEvent("mousedown",{clientX:t[0],clientY:t[1],cancelable:!0,bubbles:!0}),i=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),r=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),o=this.gesto;!1!==o.onDragStart(n)&&(o.onDrag(i),o.onDragEnd(r))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(t){return this.gesto.triggerDragStart(t),this},n.destroy=function(){var t;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),(0,a.Nn)(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||null===(t=this.target.parentElement)||void 0===t||t.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(t){var e=this.getElementRect||w,n=e(t),i=[n.pos1,n.pos2,n.pos4,n.pos3];if(e!==w){var r=t.getBoundingClientRect();return(0,u.FV)(i,r)}return i},n.getSelectableElements=function(){var t=this.container,e=[];return this.options.selectableTargets.forEach((function(n){if((0,a.Tn)(n)){var i=n();i&&e.push.apply(e,[].slice.call(i))}else if((0,a.Ll)(n))e.push(n);else if((0,a.Gv)(n))e.push(n.value||n.current);else{var r=[].slice.call((0,a.YE)(t).querySelectorAll(n));e.push.apply(e,r)}})),e},n.checkScroll=function(){if(this.gesto.isFlag()){var t=this.scrollOptions,e=this.gesto.getEventData().innerScrollOptions;(e||(null==t?void 0:t.container))&&this.dragScroll.checkScroll(g({inputEvent:this.gesto.getCurrentEvent()},e||t))}},n.findSelectableTargets=function(t){var e=this;void 0===t&&(t=this.gesto.getEventData());var n=this.getSelectableElements(),i=n.map((function(t){return e.getElementPoints(t)}));t.selectableTargets=n,t.selectablePoints=i,t.selectableParentMap=null;var r=this.options,o=r.checkOverflow||r.innerScrollOptions,s=(0,a.YE)(this.container);if(o){var l=new Map;t.selectableInnerScrollParentMap=l,t.selectableInnerScrollPathsList=n.map((function(t,e){for(var n=t.parentElement,i=[],r=[],o=function(){var t=l.get(n);if(!t&&"visible"!==getComputedStyle(n).overflow){var o=w(n);t={parentElement:n,indexes:[],points:[o.pos1,o.pos2,o.pos4,o.pos3],paths:m([],r,!0)},i.push(n),i.forEach((function(e){l.set(e,t)})),i=[]}t?(n=t.parentElement,l.get(n).indexes.push(e),r.push(n)):i.push(n),n=n.parentElement};n&&n!==s.body;)o();return r}))}return r.checkOverflow||(t.selectableInners=n.map((function(){return!0}))),this._refreshGroups(t),n},n.clickTarget=function(t,e){var n=function(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}return{clientX:t.clientX,clientY:t.clientY}}(t),i={data:{selectFlag:!1},clientX:n.clientX,clientY:n.clientY,inputEvent:t,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(i,e)&&this._onDragEnd(i),this},n.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect,i=t.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(n||i)&&(this.keycon=new c.Ay(e||(0,a.zk)(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setClassName=function(t){this.options.className=t,this.target.setAttribute("class","".concat(C," ").concat(t||""))},n.setKeyEvent=function(){var t=this.options,e=t.toggleContinueSelect,n=t.toggleContinueSelectWithoutDeselect;!e&&!n||this.keycon||this.setKeyController()},n.setKeyContainer=function(t){var e=this,n=this.options;y(n.keyContainer,t,(function(){n.keyContainer=t,e.setKeyController()}))},n.getContinueSelect=function(){var t=this.options,e=t.continueSelect;return t.toggleContinueSelect&&this._keydownContinueSelect?!e:e},n.getContinueSelectWithoutDeselect=function(){var t=this.options,e=t.continueSelectWithoutDeselect;return t.toggleContinueSelectWithoutDeselect&&this._keydownContinueSelectWithoutDeselection?!e:e},n.setToggleContinueSelect=function(t){var e=this,n=this.options;y(n.toggleContinueSelect,t,(function(){n.toggleContinueSelect=t,e.setKeyEvent()}))},n.setToggleContinueSelectWithoutDeselect=function(t){var e=this,n=this.options;y(n.toggleContinueSelectWithoutDeselect,t,(function(){n.toggleContinueSelectWithoutDeselect=t,e.setKeyEvent()}))},n.setPreventDefault=function(t){this.gesto.options.preventDefault=t},n.setCheckInput=function(t){this.gesto.options.checkInput=t},n.initElement=function(){var t=this.options,e=t.dragContainer,n=t.checkInput,i=t.preventDefault,o=t.preventClickEventOnDragStart,s=t.preventClickEventOnDrag,l=t.preventClickEventByCondition,c=t.preventRightClick,u=void 0===c||c,h=t.className,d=this.container;this.target=v(function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=e||{},o=r.className,a=void 0===o?"":o,s=r.style;return{tag:t,className:a,style:void 0===s?{}:s,attributes:function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(r,["className","style"]),children:n}}("div",{className:"".concat(C," ").concat(h||"")}),this.target,d);var p=this.target;this.dragContainer="string"==typeof e?[].slice.call((0,a.YE)(d).querySelectorAll(e)):e||this.target.parentNode,this.gesto=new r.A(this.dragContainer,{checkWindowBlur:!0,container:(0,a.zk)(d),checkInput:n,preventDefault:i,preventClickEventOnDragStart:o,preventClickEventOnDrag:s,preventClickEventByCondition:l,preventRightClick:u}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),(0,a.W2)(document,"selectstart",this._onDocumentSelectStart),this.injectResult=k.inject(p,{nonce:this.options.cspNonce})},n.hitTest=function(t,e,n,i){var r=this.options,o=r.hitRate,s=r.selectByClick,l=t.left,c=t.top,h=t.right,d=t.bottom,p=e.innerGroups,f=e.innerWidth,g=e.innerHeight,m=null==i?void 0:i.clientX,v=null==i?void 0:i.clientY,y=e.ignoreClick,b=[[l,c],[h,c],[h,d],[l,d]],w=function(t,e){var i="function"==typeof o?(0,a.hg)("".concat(o(e))):(0,a.hg)("".concat(o)),r=!y&&(0,u.FK)([m,v],t);if(!n&&s&&r)return!0;var l=(0,u.TR)(b,t);if(!l.length)return!1;var c=(0,u.B9)(l),h=0;return 0===c&&0===(0,u.B9)(t)?(h=x(t),c=x(l)):h=(0,u.B9)(t),"px"===i.unit?c>=i.value:(0,a.Tq)(Math.round(c/h*100),0,100)>=Math.min(100,i.value)},S=e.selectableTargets,k=e.selectablePoints,C=e.selectableInners;if(!p)return S.filter((function(t,e){return!!C[e]&&w(k[e],S[e])}));for(var M=[],T=Math.floor(l/f),E=Math.floor(h/f),A=Math.floor(c/g),_=Math.floor(d/g),P=T;P<=E;++P){var D=p[P];if(D)for(var O=A;O<=_;++O){var L=D[O];L&&L.forEach((function(t){var e=k[t],n=C[t],i=S[t];n&&w(e,i)&&M.push(i)}))}}return function(t){if("undefined"==typeof Map)return t.filter((function(e,n){return t.indexOf(e)===n}));var e=new Map;return t.filter((function(t){return!e.has(t)&&(e.set(t,!0),!0)}))}(M)},n.initDragScroll=function(){var t=this;this.dragScroll.on("scrollDrag",(function(e){(0,e.next)(t.gesto.getCurrentEvent())})).on("scroll",(function(e){var n=e.container,i=e.direction;t.gesto.getEventData().innerScrollOptions?t.emit("innerScroll",{container:n,direction:i}):t.emit("scroll",{container:n,direction:i})})).on("move",(function(e){var n=e.offsetX,i=e.offsetY,r=e.inputEvent,o=t.gesto;if(o&&o.isFlag()){var a=t.gesto.getEventData(),s=a.boundArea;a.startX-=n,a.startY-=i;var l=t.gesto.getEventData().innerScrollOptions,c=null==l?void 0:l.container,u=!1;if(c){var h=a.selectableInnerScrollParentMap,d=h.get(c);d&&(d.paths.forEach((function(t){h.get(t).points.forEach((function(t){t[0]-=n,t[1]-=i}))})),d.indexes.forEach((function(t){a.selectablePoints[t].forEach((function(t){t[0]-=n,t[1]-=i}))})),u=!0)}u||a.selectablePoints.forEach((function(t){t.forEach((function(t){t[0]-=n,t[1]-=i}))})),t._refreshGroups(a),s.left-=n,s.right-=n,s.top-=i,s.bottom-=i,t.gesto.scrollBy(n,i,r.inputEvent),t._checkSelected(t.gesto.getCurrentEvent())}}))},n._select=function(t,e,n,i,r){void 0===r&&(r=!1);var o=n.inputEvent,a=n.data,l=this.setSelectedTargets(t),c=(0,s.U)(a.startSelectedTargets,t),u=c.added,h=c.removed,d=c.prevList,p=c.list,f={startSelected:d,startAdded:u.map((function(t){return p[t]})),startRemoved:h.map((function(t){return d[t]}))};i&&this.emit("selectStart",g(g(g({},l),f),{rect:e,inputEvent:o,data:a.data,isTrusted:n.isTrusted,isDragStartEnd:r})),(l.added.length||l.removed.length)&&this.emit("select",g(g(g({},l),f),{rect:e,inputEvent:o,data:a.data,isTrusted:n.isTrusted,isDragStartEnd:r}))},n._selectEnd=function(t,e,n,i,r){void 0===r&&(r=!1);var o=i.inputEvent,a=i.isDouble,l=i.data,c=o&&o.type,u="mousedown"===c||"touchstart"===c,h=(0,s.U)(t,this.selectedTargets),d=h.added,p=h.removed,f=h.prevList,g=h.list,m=(0,s.U)(e,this.selectedTargets),v=m.added,y=m.removed,b=m.prevList,w=m.list;this.emit("selectEnd",{startSelected:t,beforeSelected:e,selected:this.selectedTargets,added:d.map((function(t){return g[t]})),removed:p.map((function(t){return f[t]})),afterAdded:v.map((function(t){return w[t]})),afterRemoved:y.map((function(t){return b[t]})),isDragStart:u&&r,isDragStartEnd:u&&r,isClick:!!i.isClick,isDouble:!!a,rect:n,inputEvent:o,data:l.data,isTrusted:i.isTrusted})},n._checkSelected=function(t,e){void 0===e&&(e=b(t,this.options.ratio));var n=t.data,i=e.top,r=e.left,o=e.width,a=e.height,s=n.selectFlag,l=n.containerX,c=n.containerY,u=n.scaleMatrix,d=(0,h.c4)(u,[r-l,i-c]),p=(0,h.c4)(u,[o,a]),f=[];if(s){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(d[0],"px, ").concat(d[1],"px);")+"width:".concat(p[0],"px;height:").concat(p[1],"px;");var m=this.hitTest(e,n,!0,t);f=S(n.startPassedTargets,m,this.continueSelect&&this.continueSelectWithoutDeselect)}if(!1===this.emit("drag",g(g({},t),{data:n.data,isSelect:s,rect:e})))return this.target.style.cssText+="display: none;",void t.stop();s&&this._select(f,e,t)},n._sameCombiKey=function(t,e,n){if(!e)return!1;var i=(0,c.$H)(t.inputEvent,t.key),r=[].concat(e),o=(0,a.cy)(r[0])?r:[r];if(n){var s=t.key;return o.some((function(t){return t.some((function(t){return t===s}))}))}return o.some((function(t){return t.every((function(t){return i.indexOf(t)>-1}))}))},n._findElement=function(t,e){for(var n=t;n&&!(e.indexOf(n)>-1);)n=n.parentElement;return n},n._refreshGroups=function(t){var e,n=t.innerWidth,i=t.innerHeight,r=t.selectablePoints;if(this.options.checkOverflow){var o=null===(e=this.gesto.getEventData().innerScrollOptions)||void 0===e?void 0:e.container,a=t.selectableInnerScrollParentMap,s=t.selectableInnerScrollPathsList;t.selectableInners=s.map((function(t,e){var n=!1;return t.every((function(t){if(n)return!0;if(t===o)return n=!0,!0;var i=a.get(t);if(i){var s=r[e],l=i.points;if(!(0,u.TR)(s,l).length)return!1}return!0}))}))}if(n&&i){var l=t.selectablePoints,c={};l.forEach((function(t,e){var r=1/0,o=-1/0,a=1/0,s=-1/0;t.forEach((function(t){var e=Math.floor(t[0]/n),l=Math.floor(t[1]/i);r=Math.min(e,r),o=Math.max(e,o),a=Math.min(l,a),s=Math.max(l,s)}));for(var l=r;l<=o;++l)for(var u=a;u<=s;++u)c[l]=c[l]||{},c[l][u]=c[l][u]||[],c[l][u].push(e)})),t.innerGroups=c}else t.innerGroups=null},e=function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([(0,o.OA)(M,(function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},i=(0,a.PT)("get ".concat(e));t[i]?n.get=function(){return this[i]()}:n.get=function(){return this.options[e]};var r=(0,a.PT)("set ".concat(e));t[r]?n.set=function(t){this[r](t)}:n.set=function(t){this.options[e]=t},Object.defineProperty(t,e,n)}))],e),e}(i.A)))},93904:(t,e,n)=>{const i=Symbol("SemVer ANY");class r{static get ANY(){return i}constructor(t,e){if(e=o(e),t instanceof r){if(t.loose===!!e.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),c("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===i?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(t){const e=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],n=t.match(e);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new u(n[2],this.options.loose):this.semver=i}toString(){return this.value}test(t){if(c("Comparator.test",t,this.options.loose),this.semver===i||t===i)return!0;if("string"==typeof t)try{t=new u(t,this.options)}catch(t){return!1}return l(t,this.operator,this.semver,this.options)}intersects(t,e){if(!(t instanceof r))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new h(t.value,e).test(this.value):""===t.operator?""===t.value||new h(this.value,e).test(t.semver):!((e=o(e)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===t.value)||!e.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!t.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!t.operator.startsWith("<"))&&(this.semver.version!==t.semver.version||!this.operator.includes("=")||!t.operator.includes("="))&&!(l(this.semver,"<",t.semver,e)&&this.operator.startsWith(">")&&t.operator.startsWith("<"))&&!(l(this.semver,">",t.semver,e)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}t.exports=r;const o=n(98587),{safeRe:a,t:s}=n(99718),l=n(72111),c=n(57272),u=n(53908),h=n(78311)},78311:(t,e,n)=>{const i=/\s+/g;class r{constructor(t,e){if(e=a(e),t instanceof r)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new r(t.raw,e);if(t instanceof s)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().replace(i," "),this.set=this.raw.split("||").map((t=>this.parseRange(t.trim()))).filter((t=>t.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter((t=>!v(t[0]))),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&y(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");const e=this.set[t];for(let t=0;t<e.length;t++)t>0&&(this.formatted+=" "),this.formatted+=e[t].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){const e=((this.options.includePrerelease&&g)|(this.options.loose&&m))+":"+t,n=o.get(e);if(n)return n;const i=this.options.loose,r=i?u[h.HYPHENRANGELOOSE]:u[h.HYPHENRANGE];t=t.replace(r,P(this.options.includePrerelease)),l("hyphen replace",t),t=t.replace(u[h.COMPARATORTRIM],d),l("comparator trim",t),t=t.replace(u[h.TILDETRIM],p),l("tilde trim",t),t=t.replace(u[h.CARETTRIM],f),l("caret trim",t);let a=t.split(" ").map((t=>w(t,this.options))).join(" ").split(/\s+/).map((t=>_(t,this.options)));i&&(a=a.filter((t=>(l("loose invalid filter",t,this.options),!!t.match(u[h.COMPARATORLOOSE]))))),l("range list",a);const c=new Map,y=a.map((t=>new s(t,this.options)));for(const t of y){if(v(t))return[t];c.set(t.value,t)}c.size>1&&c.has("")&&c.delete("");const b=[...c.values()];return o.set(e,b),b}intersects(t,e){if(!(t instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>b(n,e)&&t.set.some((t=>b(t,e)&&n.every((n=>t.every((t=>n.intersects(t,e)))))))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new c(t,this.options)}catch(t){return!1}for(let e=0;e<this.set.length;e++)if(D(this.set[e],t,this.options))return!0;return!1}}t.exports=r;const o=new(n(68794)),a=n(98587),s=n(93904),l=n(57272),c=n(53908),{safeRe:u,t:h,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=n(99718),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:m}=n(16874),v=t=>"<0.0.0-0"===t.value,y=t=>""===t.value,b=(t,e)=>{let n=!0;const i=t.slice();let r=i.pop();for(;n&&i.length;)n=i.every((t=>r.intersects(t,e))),r=i.pop();return n},w=(t,e)=>(l("comp",t,e),t=C(t,e),l("caret",t),t=x(t,e),l("tildes",t),t=T(t,e),l("xrange",t),t=A(t,e),l("stars",t),t),S=t=>!t||"x"===t.toLowerCase()||"*"===t,x=(t,e)=>t.trim().split(/\s+/).map((t=>k(t,e))).join(" "),k=(t,e)=>{const n=e.loose?u[h.TILDELOOSE]:u[h.TILDE];return t.replace(n,((e,n,i,r,o)=>{let a;return l("tilde",t,e,n,i,r,o),S(n)?a="":S(i)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:S(r)?a=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:o?(l("replaceTilde pr",o),a=`>=${n}.${i}.${r}-${o} <${n}.${+i+1}.0-0`):a=`>=${n}.${i}.${r} <${n}.${+i+1}.0-0`,l("tilde return",a),a}))},C=(t,e)=>t.trim().split(/\s+/).map((t=>M(t,e))).join(" "),M=(t,e)=>{l("caret",t,e);const n=e.loose?u[h.CARETLOOSE]:u[h.CARET],i=e.includePrerelease?"-0":"";return t.replace(n,((e,n,r,o,a)=>{let s;return l("caret",t,e,n,r,o,a),S(n)?s="":S(r)?s=`>=${n}.0.0${i} <${+n+1}.0.0-0`:S(o)?s="0"===n?`>=${n}.${r}.0${i} <${n}.${+r+1}.0-0`:`>=${n}.${r}.0${i} <${+n+1}.0.0-0`:a?(l("replaceCaret pr",a),s="0"===n?"0"===r?`>=${n}.${r}.${o}-${a} <${n}.${r}.${+o+1}-0`:`>=${n}.${r}.${o}-${a} <${n}.${+r+1}.0-0`:`>=${n}.${r}.${o}-${a} <${+n+1}.0.0-0`):(l("no pr"),s="0"===n?"0"===r?`>=${n}.${r}.${o}${i} <${n}.${r}.${+o+1}-0`:`>=${n}.${r}.${o}${i} <${n}.${+r+1}.0-0`:`>=${n}.${r}.${o} <${+n+1}.0.0-0`),l("caret return",s),s}))},T=(t,e)=>(l("replaceXRanges",t,e),t.split(/\s+/).map((t=>E(t,e))).join(" ")),E=(t,e)=>{t=t.trim();const n=e.loose?u[h.XRANGELOOSE]:u[h.XRANGE];return t.replace(n,((n,i,r,o,a,s)=>{l("xRange",t,n,i,r,o,a,s);const c=S(r),u=c||S(o),h=u||S(a),d=h;return"="===i&&d&&(i=""),s=e.includePrerelease?"-0":"",c?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&d?(u&&(o=0),a=0,">"===i?(i=">=",u?(r=+r+1,o=0,a=0):(o=+o+1,a=0)):"<="===i&&(i="<",u?r=+r+1:o=+o+1),"<"===i&&(s="-0"),n=`${i+r}.${o}.${a}${s}`):u?n=`>=${r}.0.0${s} <${+r+1}.0.0-0`:h&&(n=`>=${r}.${o}.0${s} <${r}.${+o+1}.0-0`),l("xRange return",n),n}))},A=(t,e)=>(l("replaceStars",t,e),t.trim().replace(u[h.STAR],"")),_=(t,e)=>(l("replaceGTE0",t,e),t.trim().replace(u[e.includePrerelease?h.GTE0PRE:h.GTE0],"")),P=t=>(e,n,i,r,o,a,s,l,c,u,h,d)=>`${n=S(i)?"":S(r)?`>=${i}.0.0${t?"-0":""}`:S(o)?`>=${i}.${r}.0${t?"-0":""}`:a?`>=${n}`:`>=${n}${t?"-0":""}`} ${l=S(c)?"":S(u)?`<${+c+1}.0.0-0`:S(h)?`<${c}.${+u+1}.0-0`:d?`<=${c}.${u}.${h}-${d}`:t?`<${c}.${u}.${+h+1}-0`:`<=${l}`}`.trim(),D=(t,e,n)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let n=0;n<t.length;n++)if(l(t[n].semver),t[n].semver!==s.ANY&&t[n].semver.prerelease.length>0){const i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}},53908:(t,e,n)=>{const i=n(57272),{MAX_LENGTH:r,MAX_SAFE_INTEGER:o}=n(16874),{safeRe:a,safeSrc:s,t:l}=n(99718),c=n(98587),{compareIdentifiers:u}=n(61123);class h{constructor(t,e){if(e=c(e),t instanceof h){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>r)throw new TypeError(`version is longer than ${r} characters`);i("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?a[l.LOOSE]:a[l.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<o)return e}return t})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(i("SemVer.compare",this.version,this.options,t),!(t instanceof h)){if("string"==typeof t&&t===this.version)return 0;t=new h(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof h||(t=new h(t,this.options)),u(this.major,t.major)||u(this.minor,t.minor)||u(this.patch,t.patch)}comparePre(t){if(t instanceof h||(t=new h(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],r=t.prerelease[e];if(i("prerelease compare",e,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return u(n,r)}while(++e)}compareBuild(t){t instanceof h||(t=new h(t,this.options));let e=0;do{const n=this.build[e],r=t.build[e];if(i("build compare",e,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return u(n,r)}while(++e)}inc(t,e,n){if(t.startsWith("pre")){if(!e&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(e){const t=new RegExp(`^${this.options.loose?s[l.PRERELEASELOOSE]:s[l.PRERELEASE]}$`),n=`-${e}`.match(t);if(!n||n[1]!==e)throw new Error(`invalid identifier: ${e}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(n)?1:0;if(0===this.prerelease.length)this.prerelease=[t];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(e===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let i=[e,t];!1===n&&(i=[e]),0===u(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}t.exports=h},57414:(t,e,n)=>{const i=n(30144);t.exports=(t,e)=>{const n=i(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null}},72111:(t,e,n)=>{const i=n(94641),r=n(13999),o=n(35580),a=n(54089),s=n(7059),l=n(25200);t.exports=(t,e,n,c)=>{switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t===n;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return i(t,n,c);case"!=":return r(t,n,c);case">":return o(t,n,c);case">=":return a(t,n,c);case"<":return s(t,n,c);case"<=":return l(t,n,c);default:throw new TypeError(`Invalid operator: ${e}`)}}},46170:(t,e,n)=>{const i=n(53908),r=n(30144),{safeRe:o,t:a}=n(99718);t.exports=(t,e)=>{if(t instanceof i)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let n=null;if((e=e||{}).rtl){const i=e.includePrerelease?o[a.COERCERTLFULL]:o[a.COERCERTL];let r;for(;(r=i.exec(t))&&(!n||n.index+n[0].length!==t.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),i.lastIndex=r.index+r[1].length+r[2].length;i.lastIndex=-1}else n=t.match(e.includePrerelease?o[a.COERCEFULL]:o[a.COERCE]);if(null===n)return null;const s=n[2],l=n[3]||"0",c=n[4]||"0",u=e.includePrerelease&&n[5]?`-${n[5]}`:"",h=e.includePrerelease&&n[6]?`+${n[6]}`:"";return r(`${s}.${l}.${c}${u}${h}`,e)}},40909:(t,e,n)=>{const i=n(53908);t.exports=(t,e,n)=>{const r=new i(t,n),o=new i(e,n);return r.compare(o)||r.compareBuild(o)}},11763:(t,e,n)=>{const i=n(50560);t.exports=(t,e)=>i(t,e,!0)},50560:(t,e,n)=>{const i=n(53908);t.exports=(t,e,n)=>new i(t,n).compare(new i(e,n))},51832:(t,e,n)=>{const i=n(30144);t.exports=(t,e)=>{const n=i(t,null,!0),r=i(e,null,!0),o=n.compare(r);if(0===o)return null;const a=o>0,s=a?n:r,l=a?r:n,c=!!s.prerelease.length;if(l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}const u=c?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"}},94641:(t,e,n)=>{const i=n(50560);t.exports=(t,e,n)=>0===i(t,e,n)},35580:(t,e,n)=>{const i=n(50560);t.exports=(t,e,n)=>i(t,e,n)>0},54089:(t,e,n)=>{const i=n(50560);t.exports=(t,e,n)=>i(t,e,n)>=0},93007:(t,e,n)=>{const i=n(53908);t.exports=(t,e,n,r,o)=>{"string"==typeof n&&(o=r,r=n,n=void 0);try{return new i(t instanceof i?t.version:t,n).inc(e,r,o).version}catch(t){return null}}},7059:(t,e,n)=>{const i=n(50560);t.exports=(t,e,n)=>i(t,e,n)<0},25200:(t,e,n)=>{const i=n(50560);t.exports=(t,e,n)=>i(t,e,n)<=0},32938:(t,e,n)=>{const i=n(53908);t.exports=(t,e)=>new i(t,e).major},46254:(t,e,n)=>{const i=n(53908);t.exports=(t,e)=>new i(t,e).minor},13999:(t,e,n)=>{const i=n(50560);t.exports=(t,e,n)=>0!==i(t,e,n)},30144:(t,e,n)=>{const i=n(53908);t.exports=(t,e,n=!1)=>{if(t instanceof i)return t;try{return new i(t,e)}catch(t){if(!n)return null;throw t}}},24493:(t,e,n)=>{const i=n(53908);t.exports=(t,e)=>new i(t,e).patch},31729:(t,e,n)=>{const i=n(30144);t.exports=(t,e)=>{const n=i(t,e);return n&&n.prerelease.length?n.prerelease:null}},9970:(t,e,n)=>{const i=n(50560);t.exports=(t,e,n)=>i(e,t,n)},74277:(t,e,n)=>{const i=n(40909);t.exports=(t,e)=>t.sort(((t,n)=>i(n,t,e)))},97638:(t,e,n)=>{const i=n(78311);t.exports=(t,e,n)=>{try{e=new i(e,n)}catch(t){return!1}return e.test(t)}},43927:(t,e,n)=>{const i=n(40909);t.exports=(t,e)=>t.sort(((t,n)=>i(t,n,e)))},56953:(t,e,n)=>{const i=n(30144);t.exports=(t,e)=>{const n=i(t,e);return n?n.version:null}},99589:(t,e,n)=>{const i=n(99718),r=n(16874),o=n(53908),a=n(61123),s=n(30144),l=n(56953),c=n(57414),u=n(93007),h=n(51832),d=n(32938),p=n(46254),f=n(24493),g=n(31729),m=n(50560),v=n(9970),y=n(11763),b=n(40909),w=n(43927),S=n(74277),x=n(35580),k=n(7059),C=n(94641),M=n(13999),T=n(54089),E=n(25200),A=n(72111),_=n(46170),P=n(93904),D=n(78311),O=n(97638),L=n(77631),I=n(19628),R=n(270),V=n(41261),N=n(13874),F=n(97075),B=n(75571),z=n(5342),j=n(76780),U=n(72525),G=n(75032);t.exports={parse:s,valid:l,clean:c,inc:u,diff:h,major:d,minor:p,patch:f,prerelease:g,compare:m,rcompare:v,compareLoose:y,compareBuild:b,sort:w,rsort:S,gt:x,lt:k,eq:C,neq:M,gte:T,lte:E,cmp:A,coerce:_,Comparator:P,Range:D,satisfies:O,toComparators:L,maxSatisfying:I,minSatisfying:R,minVersion:V,validRange:N,outside:F,gtr:B,ltr:z,intersects:j,simplifyRange:U,subset:G,SemVer:o,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:r.SEMVER_SPEC_VERSION,RELEASE_TYPES:r.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},16874:t=>{const e=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},57272:(t,e,n)=>{var i=n(77419);const r="object"==typeof i&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t.exports=r},61123:t=>{const e=/^[0-9]+$/,n=(t,n)=>{const i=e.test(t),r=e.test(n);return i&&r&&(t=+t,n=+n),t===n?0:i&&!r?-1:r&&!i?1:t<n?-1:1};t.exports={compareIdentifiers:n,rcompareIdentifiers:(t,e)=>n(e,t)}},68794:t=>{t.exports=class{constructor(){this.max=1e3,this.map=new Map}get(t){const e=this.map.get(t);return void 0===e?void 0:(this.map.delete(t),this.map.set(t,e),e)}delete(t){return this.map.delete(t)}set(t,e){if(!this.delete(t)&&void 0!==e){if(this.map.size>=this.max){const t=this.map.keys().next().value;this.delete(t)}this.map.set(t,e)}return this}}},98587:t=>{const e=Object.freeze({loose:!0}),n=Object.freeze({});t.exports=t=>t?"object"!=typeof t?e:t:n},99718:(t,e,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:o}=n(16874),a=n(57272),s=(e=t.exports={}).re=[],l=e.safeRe=[],c=e.src=[],u=e.safeSrc=[],h=e.t={};let d=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[p,r]],g=(t,e,n)=>{const i=(t=>{for(const[e,n]of f)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t})(e),r=d++;a(t,r,e),h[t]=r,c[r]=e,u[r]=i,s[r]=new RegExp(e,n?"g":void 0),l[r]=new RegExp(i,n?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),g("MAINVERSION",`(${c[h.NUMERICIDENTIFIER]})\\.(${c[h.NUMERICIDENTIFIER]})\\.(${c[h.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[h.NUMERICIDENTIFIERLOOSE]})\\.(${c[h.NUMERICIDENTIFIERLOOSE]})\\.(${c[h.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[h.NUMERICIDENTIFIER]}|${c[h.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[h.NUMERICIDENTIFIERLOOSE]}|${c[h.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${c[h.PRERELEASEIDENTIFIER]}(?:\\.${c[h.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[h.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${p}+`),g("BUILD",`(?:\\+(${c[h.BUILDIDENTIFIER]}(?:\\.${c[h.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[h.MAINVERSION]}${c[h.PRERELEASE]}?${c[h.BUILD]}?`),g("FULL",`^${c[h.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[h.MAINVERSIONLOOSE]}${c[h.PRERELEASELOOSE]}?${c[h.BUILD]}?`),g("LOOSE",`^${c[h.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[h.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[h.XRANGEIDENTIFIER]})(?:\\.(${c[h.XRANGEIDENTIFIER]})(?:\\.(${c[h.XRANGEIDENTIFIER]})(?:${c[h.PRERELEASE]})?${c[h.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[h.XRANGEIDENTIFIERLOOSE]})(?:${c[h.PRERELEASELOOSE]})?${c[h.BUILD]}?)?)?`),g("XRANGE",`^${c[h.GTLT]}\\s*${c[h.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[h.GTLT]}\\s*${c[h.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?`),g("COERCE",`${c[h.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[h.COERCEPLAIN]+`(?:${c[h.PRERELEASE]})?`+`(?:${c[h.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[h.COERCE],!0),g("COERCERTLFULL",c[h.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${c[h.LONETILDE]}${c[h.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[h.LONETILDE]}${c[h.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${c[h.LONECARET]}${c[h.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[h.LONECARET]}${c[h.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[h.GTLT]}\\s*(${c[h.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[h.GTLT]}\\s*(${c[h.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[h.GTLT]}\\s*(${c[h.LOOSEPLAIN]}|${c[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[h.XRANGEPLAIN]})\\s+-\\s+(${c[h.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[h.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},75571:(t,e,n)=>{const i=n(97075);t.exports=(t,e,n)=>i(t,e,">",n)},76780:(t,e,n)=>{const i=n(78311);t.exports=(t,e,n)=>(t=new i(t,n),e=new i(e,n),t.intersects(e,n))},5342:(t,e,n)=>{const i=n(97075);t.exports=(t,e,n)=>i(t,e,"<",n)},19628:(t,e,n)=>{const i=n(53908),r=n(78311);t.exports=(t,e,n)=>{let o=null,a=null,s=null;try{s=new r(e,n)}catch(t){return null}return t.forEach((t=>{s.test(t)&&(o&&-1!==a.compare(t)||(o=t,a=new i(o,n)))})),o}},270:(t,e,n)=>{const i=n(53908),r=n(78311);t.exports=(t,e,n)=>{let o=null,a=null,s=null;try{s=new r(e,n)}catch(t){return null}return t.forEach((t=>{s.test(t)&&(o&&1!==a.compare(t)||(o=t,a=new i(o,n)))})),o}},41261:(t,e,n)=>{const i=n(53908),r=n(78311),o=n(35580);t.exports=(t,e)=>{t=new r(t,e);let n=new i("0.0.0");if(t.test(n))return n;if(n=new i("0.0.0-0"),t.test(n))return n;n=null;for(let e=0;e<t.set.length;++e){const r=t.set[e];let a=null;r.forEach((t=>{const e=new i(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":a&&!o(e,a)||(a=e);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}})),!a||n&&!o(n,a)||(n=a)}return n&&t.test(n)?n:null}},97075:(t,e,n)=>{const i=n(53908),r=n(93904),{ANY:o}=r,a=n(78311),s=n(97638),l=n(35580),c=n(7059),u=n(25200),h=n(54089);t.exports=(t,e,n,d)=>{let p,f,g,m,v;switch(t=new i(t,d),e=new a(e,d),n){case">":p=l,f=u,g=c,m=">",v=">=";break;case"<":p=c,f=h,g=l,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(t,e,d))return!1;for(let n=0;n<e.set.length;++n){const i=e.set[n];let a=null,s=null;if(i.forEach((t=>{t.semver===o&&(t=new r(">=0.0.0")),a=a||t,s=s||t,p(t.semver,a.semver,d)?a=t:g(t.semver,s.semver,d)&&(s=t)})),a.operator===m||a.operator===v)return!1;if((!s.operator||s.operator===m)&&f(t,s.semver))return!1;if(s.operator===v&&g(t,s.semver))return!1}return!0}},72525:(t,e,n)=>{const i=n(97638),r=n(50560);t.exports=(t,e,n)=>{const o=[];let a=null,s=null;const l=t.sort(((t,e)=>r(t,e,n)));for(const t of l)i(t,e,n)?(s=t,a||(a=t)):(s&&o.push([a,s]),s=null,a=null);a&&o.push([a,null]);const c=[];for(const[t,e]of o)t===e?c.push(t):e||t!==l[0]?e?t===l[0]?c.push(`<=${e}`):c.push(`${t} - ${e}`):c.push(`>=${t}`):c.push("*");const u=c.join(" || "),h="string"==typeof e.raw?e.raw:String(e);return u.length<h.length?u:e}},75032:(t,e,n)=>{const i=n(78311),r=n(93904),{ANY:o}=r,a=n(97638),s=n(50560),l=[new r(">=0.0.0-0")],c=[new r(">=0.0.0")],u=(t,e,n)=>{if(t===e)return!0;if(1===t.length&&t[0].semver===o){if(1===e.length&&e[0].semver===o)return!0;t=n.includePrerelease?l:c}if(1===e.length&&e[0].semver===o){if(n.includePrerelease)return!0;e=c}const i=new Set;let r,u,p,f,g,m,v;for(const e of t)">"===e.operator||">="===e.operator?r=h(r,e,n):"<"===e.operator||"<="===e.operator?u=d(u,e,n):i.add(e.semver);if(i.size>1)return null;if(r&&u){if(p=s(r.semver,u.semver,n),p>0)return null;if(0===p&&(">="!==r.operator||"<="!==u.operator))return null}for(const t of i){if(r&&!a(t,String(r),n))return null;if(u&&!a(t,String(u),n))return null;for(const i of e)if(!a(t,String(i),n))return!1;return!0}let y=!(!u||n.includePrerelease||!u.semver.prerelease.length)&&u.semver,b=!(!r||n.includePrerelease||!r.semver.prerelease.length)&&r.semver;y&&1===y.prerelease.length&&"<"===u.operator&&0===y.prerelease[0]&&(y=!1);for(const t of e){if(v=v||">"===t.operator||">="===t.operator,m=m||"<"===t.operator||"<="===t.operator,r)if(b&&t.semver.prerelease&&t.semver.prerelease.length&&t.semver.major===b.major&&t.semver.minor===b.minor&&t.semver.patch===b.patch&&(b=!1),">"===t.operator||">="===t.operator){if(f=h(r,t,n),f===t&&f!==r)return!1}else if(">="===r.operator&&!a(r.semver,String(t),n))return!1;if(u)if(y&&t.semver.prerelease&&t.semver.prerelease.length&&t.semver.major===y.major&&t.semver.minor===y.minor&&t.semver.patch===y.patch&&(y=!1),"<"===t.operator||"<="===t.operator){if(g=d(u,t,n),g===t&&g!==u)return!1}else if("<="===u.operator&&!a(u.semver,String(t),n))return!1;if(!t.operator&&(u||r)&&0!==p)return!1}return!(r&&m&&!u&&0!==p||u&&v&&!r&&0!==p||b||y)},h=(t,e,n)=>{if(!t)return e;const i=s(t.semver,e.semver,n);return i>0?t:i<0||">"===e.operator&&">="===t.operator?e:t},d=(t,e,n)=>{if(!t)return e;const i=s(t.semver,e.semver,n);return i<0?t:i>0||"<"===e.operator&&"<="===t.operator?e:t};t.exports=(t,e,n={})=>{if(t===e)return!0;t=new i(t,n),e=new i(e,n);let r=!1;t:for(const i of t.set){for(const t of e.set){const e=u(i,t,n);if(r=r||null!==e,e)continue t}if(r)return!1}return!0}},77631:(t,e,n)=>{const i=n(78311);t.exports=(t,e)=>new i(t,e).set.map((t=>t.map((t=>t.value)).join(" ").trim().split(" ")))},13874:(t,e,n)=>{const i=n(78311);t.exports=(t,e)=>{try{return new i(t,e).range||"*"}catch(t){return null}}},10246:(t,e,n)=>{"use strict";function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(){return s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s.apply(this,arguments)}function l(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}n.d(e,{Ay:()=>re});var c=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=l(/Edge/i),h=l(/firefox/i),d=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),p=l(/iP(ad|od|hone)/i),f=l(/chrome/i)&&l(/android/i),g={capture:!1,passive:!1};function m(t,e,n){t.addEventListener(e,n,!c&&g)}function v(t,e,n){t.removeEventListener(e,n,!c&&g)}function y(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function b(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function w(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&y(t,e):y(t,e))||i&&t===n)return t;if(t===n)break}while(t=b(t))}return null}var S,x=/\s+/g;function k(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(x," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(x," ")}}function C(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function M(t,e){var n="";if("string"==typeof t)n=t;else do{var i=C(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function T(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function E(){return document.scrollingElement||document.documentElement}function A(t,e,n,i,r){if(t.getBoundingClientRect||t===window){var o,a,s,l,u,h,d;if(t!==window&&t.parentNode&&t!==E()?(a=(o=t.getBoundingClientRect()).top,s=o.left,l=o.bottom,u=o.right,h=o.height,d=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,h=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!c))do{if(r&&r.getBoundingClientRect&&("none"!==C(r,"transform")||n&&"static"!==C(r,"position"))){var p=r.getBoundingClientRect();a-=p.top+parseInt(C(r,"border-top-width")),s-=p.left+parseInt(C(r,"border-left-width")),l=a+o.height,u=s+o.width;break}}while(r=r.parentNode);if(i&&t!==window){var f=M(r||t),g=f&&f.a,m=f&&f.d;f&&(l=(a/=m)+(h/=m),u=(s/=g)+(d/=g))}return{top:a,left:s,bottom:l,right:u,width:d,height:h}}}function _(t,e,n){for(var i=I(t,!0),r=A(t)[e];i;){var o=A(i)[n];if(!("top"===n||"left"===n?r>=o:r<=o))return i;if(i===E())break;i=I(i,!1)}return!1}function P(t,e,n,i){for(var r=0,o=0,a=t.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==Nt.ghost&&(i||a[o]!==Nt.dragged)&&w(a[o],n.draggable,t,!1)){if(r===e)return a[o];r++}o++}return null}function D(t,e){for(var n=t.lastElementChild;n&&(n===Nt.ghost||"none"===C(n,"display")||e&&!y(n,e));)n=n.previousElementSibling;return n||null}function O(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Nt.clone||e&&!y(t,e)||n++;return n}function L(t){var e=0,n=0,i=E();if(t)do{var r=M(t),o=r.a,a=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function I(t,e){if(!t||!t.getBoundingClientRect)return E();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=C(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return E();if(i||e)return n;i=!0}}}while(n=n.parentNode);return E()}function R(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function V(t,e){return function(){if(!S){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),S=setTimeout((function(){S=void 0}),e)}}}function N(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function F(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function B(t,e,n){var i={};return Array.from(t.children).forEach((function(r){var o,a,s,l;if(w(r,e.draggable,t,!1)&&!r.animated&&r!==n){var c=A(r);i.left=Math.min(null!==(o=i.left)&&void 0!==o?o:1/0,c.left),i.top=Math.min(null!==(a=i.top)&&void 0!==a?a:1/0,c.top),i.right=Math.max(null!==(s=i.right)&&void 0!==s?s:-1/0,c.right),i.bottom=Math.max(null!==(l=i.bottom)&&void 0!==l?l:-1/0,c.bottom)}})),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var z="Sortable"+(new Date).getTime();var j=[],U={initializeByDefault:!0},G={mount:function(t){for(var e in U)U.hasOwnProperty(e)&&!(e in t)&&(t[e]=U[e]);j.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),j.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var o=t+"Global";j.forEach((function(i){e[i.pluginName]&&(e[i.pluginName][o]&&e[i.pluginName][o](r({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](r({sortable:e},n)))}))},initializePlugins:function(t,e,n,i){for(var r in j.forEach((function(i){var r=i.pluginName;if(t.options[r]||i.initializeByDefault){var o=new i(t,e,t.options);o.sortable=t,o.options=t.options,t[r]=o,s(n,o.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var o=this.modifyOption(t,r,t.options[r]);void 0!==o&&(t.options[r]=o)}},getEventProperties:function(t,e){var n={};return j.forEach((function(i){"function"==typeof i.eventProperties&&s(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,n){var i;return j.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(i=r.optionListeners[e].call(t[r.pluginName],n))})),i}};var $=["evt"],H=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,o=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(n,$);G.pluginEvent.bind(Nt)(t,e,r({dragEl:W,parentEl:Z,ghostEl:Y,rootEl:K,nextEl:X,lastDownEl:J,cloneEl:Q,cloneHidden:tt,dragStarted:pt,putSortable:at,activeSortable:Nt.active,originalEvent:i,oldIndex:et,oldDraggableIndex:it,newIndex:nt,newDraggableIndex:rt,hideGhostForTarget:Lt,unhideGhostForTarget:It,cloneNowHidden:function(){tt=!0},cloneNowShown:function(){tt=!1},dispatchSortableEvent:function(t){q({sortable:e,name:t,originalEvent:i})}},o))};function q(t){!function(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,a=t.cloneEl,s=t.toEl,l=t.fromEl,h=t.oldIndex,d=t.newIndex,p=t.oldDraggableIndex,f=t.newDraggableIndex,g=t.originalEvent,m=t.putSortable,v=t.extraEventProperties;if(e=e||n&&n[z]){var y,b=e.options,w="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||c||u?(y=document.createEvent("Event")).initEvent(i,!0,!0):y=new CustomEvent(i,{bubbles:!0,cancelable:!0}),y.to=s||n,y.from=l||n,y.item=o||n,y.clone=a,y.oldIndex=h,y.newIndex=d,y.oldDraggableIndex=p,y.newDraggableIndex=f,y.originalEvent=g,y.pullMode=m?m.lastPutMode:void 0;var S=r(r({},v),G.getEventProperties(i,e));for(var x in S)y[x]=S[x];n&&n.dispatchEvent(y),b[w]&&b[w].call(e,y)}}(r({putSortable:at,cloneEl:Q,targetEl:W,rootEl:K,oldIndex:et,oldDraggableIndex:it,newIndex:nt,newDraggableIndex:rt},t))}var W,Z,Y,K,X,J,Q,tt,et,nt,it,rt,ot,at,st,lt,ct,ut,ht,dt,pt,ft,gt,mt,vt,yt=!1,bt=!1,wt=[],St=!1,xt=!1,kt=[],Ct=!1,Mt=[],Tt="undefined"!=typeof document,Et=p,At=u||c?"cssFloat":"float",_t=Tt&&!f&&!p&&"draggable"in document.createElement("div"),Pt=function(){if(Tt){if(c)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Dt=function(t,e){var n=C(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=P(t,0,e),o=P(t,1,e),a=r&&C(r),s=o&&C(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+A(r).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=i&&"none"===n[At]||o&&"none"===n[At]&&l+c>i)?"vertical":"horizontal"},Ot=function(t){function e(t,n){return function(i,r,o,a){var s=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==t&&(n||s))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(i,r,o,a),n)(i,r,o,a);var l=(n?i:r).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},i=t.group;i&&"object"==o(i)||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},Lt=function(){!Pt&&Y&&C(Y,"display","none")},It=function(){!Pt&&Y&&C(Y,"display","")};Tt&&!f&&document.addEventListener("click",(function(t){if(bt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),bt=!1,!1}),!0);var Rt=function(t){if(W){t=t.touches?t.touches[0]:t;var e=(r=t.clientX,o=t.clientY,wt.some((function(t){var e=t[z].options.emptyInsertThreshold;if(e&&!D(t)){var n=A(t),i=r>=n.left-e&&r<=n.right+e,s=o>=n.top-e&&o<=n.bottom+e;return i&&s?a=t:void 0}})),a);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[z]._onDragOver(n)}}var r,o,a},Vt=function(t){W&&W.parentNode[z]._isOutsideThisEl(t.target)};function Nt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=s({},e),t[z]=this;var n,i,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Dt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Nt.supportPointer&&"PointerEvent"in window&&(!d||p),emptyInsertThreshold:5};for(var a in G.initializePlugins(this,t,o),o)!(a in e)&&(e[a]=o[a]);for(var l in Ot(e),this)"_"===l.charAt(0)&&"function"==typeof this[l]&&(this[l]=this[l].bind(this));this.nativeDraggable=!e.forceFallback&&_t,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?m(t,"pointerdown",this._onTapStart):(m(t,"mousedown",this._onTapStart),m(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(m(t,"dragover",this),m(t,"dragenter",this)),wt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),s(this,(i=[],{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==C(t,"display")&&t!==Nt.ghost){i.push({target:t,rect:A(t)});var e=r({},i[i.length-1].rect);if(t.thisAnimationDuration){var n=M(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}}))},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(i,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof t&&t());var r=!1,o=0;i.forEach((function(t){var n=0,i=t.target,a=i.fromRect,s=A(i),l=i.prevFromRect,c=i.prevToRect,u=t.rect,h=M(i,!0);h&&(s.top-=h.f,s.left-=h.e),i.toRect=s,i.thisAnimationDuration&&R(l,s)&&!R(a,s)&&(u.top-s.top)/(u.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(n=function(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}(u,l,c,e.options)),R(s,a)||(i.prevFromRect=a,i.prevToRect=s,n||(n=e.options.animation),e.animate(i,u,s,n)),n&&(r=!0,o=Math.max(o,n),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),n),i.thisAnimationDuration=n)})),clearTimeout(n),r?n=setTimeout((function(){"function"==typeof t&&t()}),o):"function"==typeof t&&t(),i=[]},animate:function(t,e,n,i){if(i){C(t,"transition",""),C(t,"transform","");var r=M(this.el),o=r&&r.a,a=r&&r.d,s=(e.left-n.left)/(o||1),l=(e.top-n.top)/(a||1);t.animatingX=!!s,t.animatingY=!!l,C(t,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),C(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),C(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){C(t,"transition",""),C(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}))}function Ft(t,e,n,i,r,o,a,s){var l,h,d=t[z],p=d.options.onMove;return!window.CustomEvent||c||u?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=o||A(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),p&&(h=p.call(d,l,a)),h}function Bt(t){t.draggable=!1}function zt(){Ct=!1}function jt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Ut(t){return setTimeout(t,0)}function Gt(t){return clearTimeout(t)}Nt.prototype={constructor:Nt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(ft=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,W):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,r=i.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=i.filter;if(function(t){Mt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Mt.push(i)}}(n),!W&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!d||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=w(s,i.draggable,n,!1))&&s.animated||J===s)){if(et=O(s),it=O(s,i.draggable),"function"==typeof c){if(c.call(this,t,s,this))return q({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),H("filter",e,{evt:t}),void(r&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=w(l,i.trim(),n,!1))return q({sortable:e,rootEl:i,name:"filter",targetEl:s,fromEl:n,toEl:n}),H("filter",e,{evt:t}),!0}))))return void(r&&t.preventDefault());i.handle&&!w(l,i.handle,n,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,n){var i,r=this,o=r.el,a=r.options,s=o.ownerDocument;if(n&&!W&&n.parentNode===o){var l=A(n);if(K=o,Z=(W=n).parentNode,X=W.nextSibling,J=n,ot=a.group,Nt.dragged=W,st={target:W,clientX:(e||t).clientX,clientY:(e||t).clientY},ht=st.clientX-l.left,dt=st.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,W.style["will-change"]="all",i=function(){H("delayEnded",r,{evt:t}),Nt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!h&&r.nativeDraggable&&(W.draggable=!0),r._triggerDragStart(t,e),q({sortable:r,name:"choose",originalEvent:t}),k(W,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){T(W,t.trim(),Bt)})),m(s,"dragover",Rt),m(s,"mousemove",Rt),m(s,"touchmove",Rt),a.supportPointer?(m(s,"pointerup",r._onDrop),!this.nativeDraggable&&m(s,"pointercancel",r._onDrop)):(m(s,"mouseup",r._onDrop),m(s,"touchend",r._onDrop),m(s,"touchcancel",r._onDrop)),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,W.draggable=!0),H("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(u||c))i();else{if(Nt.eventCanceled)return void this._onDrop();a.supportPointer?(m(s,"pointerup",r._disableDelayedDrag),m(s,"pointercancel",r._disableDelayedDrag)):(m(s,"mouseup",r._disableDelayedDrag),m(s,"touchend",r._disableDelayedDrag),m(s,"touchcancel",r._disableDelayedDrag)),m(s,"mousemove",r._delayedDragTouchMoveHandler),m(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&m(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){W&&Bt(W),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._disableDelayedDrag),v(t,"touchend",this._disableDelayedDrag),v(t,"touchcancel",this._disableDelayedDrag),v(t,"pointerup",this._disableDelayedDrag),v(t,"pointercancel",this._disableDelayedDrag),v(t,"mousemove",this._delayedDragTouchMoveHandler),v(t,"touchmove",this._delayedDragTouchMoveHandler),v(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?m(document,"pointermove",this._onTouchMove):m(document,e?"touchmove":"mousemove",this._onTouchMove):(m(W,"dragend",this),m(K,"dragstart",this._onDragStart));try{document.selection?Ut((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(yt=!1,K&&W){H("dragStarted",this,{evt:e}),this.nativeDraggable&&m(document,"dragover",Vt);var n=this.options;!t&&k(W,n.dragClass,!1),k(W,n.ghostClass,!0),Nt.active=this,t&&this._appendGhost(),q({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(lt){this._lastX=lt.clientX,this._lastY=lt.clientY,Lt();for(var t=document.elementFromPoint(lt.clientX,lt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(lt.clientX,lt.clientY))!==e;)e=t;if(W.parentNode[z]._isOutsideThisEl(t),e)do{if(e[z]&&e[z]._onDragOver({clientX:lt.clientX,clientY:lt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=b(e));It()}},_onTouchMove:function(t){if(st){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=Y&&M(Y,!0),a=Y&&o&&o.a,s=Y&&o&&o.d,l=Et&&vt&&L(vt),c=(r.clientX-st.clientX+i.x)/(a||1)+(l?l[0]-kt[0]:0)/(a||1),u=(r.clientY-st.clientY+i.y)/(s||1)+(l?l[1]-kt[1]:0)/(s||1);if(!Nt.active&&!yt){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Y){o?(o.e+=c-(ct||0),o.f+=u-(ut||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");C(Y,"webkitTransform",h),C(Y,"mozTransform",h),C(Y,"msTransform",h),C(Y,"transform",h),ct=c,ut=u,lt=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Y){var t=this.options.fallbackOnBody?document.body:K,e=A(W,!0,Et,!0,t),n=this.options;if(Et){for(vt=t;"static"===C(vt,"position")&&"none"===C(vt,"transform")&&vt!==document;)vt=vt.parentNode;vt!==document.body&&vt!==document.documentElement?(vt===document&&(vt=E()),e.top+=vt.scrollTop,e.left+=vt.scrollLeft):vt=E(),kt=L(vt)}k(Y=W.cloneNode(!0),n.ghostClass,!1),k(Y,n.fallbackClass,!0),k(Y,n.dragClass,!0),C(Y,"transition",""),C(Y,"transform",""),C(Y,"box-sizing","border-box"),C(Y,"margin",0),C(Y,"top",e.top),C(Y,"left",e.left),C(Y,"width",e.width),C(Y,"height",e.height),C(Y,"opacity","0.8"),C(Y,"position",Et?"absolute":"fixed"),C(Y,"zIndex","100000"),C(Y,"pointerEvents","none"),Nt.ghost=Y,t.appendChild(Y),C(Y,"transform-origin",ht/parseInt(Y.style.width)*100+"% "+dt/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,r=n.options;H("dragStart",this,{evt:t}),Nt.eventCanceled?this._onDrop():(H("setupClone",this),Nt.eventCanceled||((Q=F(W)).removeAttribute("id"),Q.draggable=!1,Q.style["will-change"]="",this._hideClone(),k(Q,this.options.chosenClass,!1),Nt.clone=Q),n.cloneId=Ut((function(){H("clone",n),Nt.eventCanceled||(n.options.removeCloneOnHide||K.insertBefore(Q,W),n._hideClone(),q({sortable:n,name:"clone"}))})),!e&&k(W,r.dragClass,!0),e?(bt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(v(document,"mouseup",n._onDrop),v(document,"touchend",n._onDrop),v(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,W)),m(document,"drop",n),C(W,"transform","translateZ(0)")),yt=!0,n._dragStartId=Ut(n._dragStarted.bind(n,e,t)),m(document,"selectstart",n),pt=!0,window.getSelection().removeAllRanges(),d&&C(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,i,o,a=this.el,s=t.target,l=this.options,c=l.group,u=Nt.active,h=ot===c,d=l.sort,p=at||u,f=this,g=!1;if(!Ct){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),s=w(s,l.draggable,a,!0),j("dragOver"),Nt.eventCanceled)return g;if(W.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return G(!1);if(bt=!1,u&&!l.disabled&&(h?d||(i=Z!==K):at===this||(this.lastPutMode=ot.checkPull(this,u,W,t))&&c.checkPut(this,u,W,t))){if(o="vertical"===this._getDirection(t,s),e=A(W),j("dragOverValid"),Nt.eventCanceled)return g;if(i)return Z=K,U(),this._hideClone(),j("revert"),Nt.eventCanceled||(X?K.insertBefore(W,X):K.appendChild(W)),G(!0);var m=D(a,l.draggable);if(!m||function(t,e,n){var i=A(D(n.el,n.options.draggable)),r=B(n.el,n.options,Y);return e?t.clientX>r.right+10||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>r.bottom+10||t.clientX>i.right&&t.clientY>i.top}(t,o,this)&&!m.animated){if(m===W)return G(!1);if(m&&a===t.target&&(s=m),s&&(n=A(s)),!1!==Ft(K,a,W,e,s,n,t,!!s))return U(),m&&m.nextSibling?a.insertBefore(W,m.nextSibling):a.appendChild(W),Z=a,$(),G(!0)}else if(m&&function(t,e,n){var i=A(P(n.el,0,n.options,!0)),r=B(n.el,n.options,Y);return e?t.clientX<r.left-10||t.clientY<i.top&&t.clientX<i.right:t.clientY<r.top-10||t.clientY<i.bottom&&t.clientX<i.left}(t,o,this)){var v=P(a,0,l,!0);if(v===W)return G(!1);if(n=A(s=v),!1!==Ft(K,a,W,e,s,n,t,!1))return U(),a.insertBefore(W,v),Z=a,$(),G(!0)}else if(s.parentNode===a){n=A(s);var y,b,S,x=W.parentNode!==a,M=!function(t,e,n){var i=n?t.left:t.top,r=n?t.right:t.bottom,o=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return i===a||r===s||i+o/2===a+l/2}(W.animated&&W.toRect||e,s.animated&&s.toRect||n,o),T=o?"top":"left",E=_(s,"top","top")||_(W,"top","top"),L=E?E.scrollTop:void 0;if(ft!==s&&(b=n[T],St=!1,xt=!M&&l.invertSwap||x),y=function(t,e,n,i,r,o,a,s){var l=i?t.clientY:t.clientX,c=i?n.height:n.width,u=i?n.top:n.left,h=i?n.bottom:n.right,d=!1;if(!a)if(s&&mt<c*r){if(!St&&(1===gt?l>u+c*o/2:l<h-c*o/2)&&(St=!0),St)d=!0;else if(1===gt?l<u+mt:l>h-mt)return-gt}else if(l>u+c*(1-r)/2&&l<h-c*(1-r)/2)return function(t){return O(W)<O(t)?1:-1}(e);return(d=d||a)&&(l<u+c*o/2||l>h-c*o/2)?l>u+c/2?1:-1:0}(t,s,n,o,M?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,xt,ft===s),0!==y){var I=O(W);do{I-=y,S=Z.children[I]}while(S&&("none"===C(S,"display")||S===Y))}if(0===y||S===s)return G(!1);ft=s,gt=y;var R=s.nextElementSibling,V=!1,F=Ft(K,a,W,e,s,n,t,V=1===y);if(!1!==F)return 1!==F&&-1!==F||(V=1===F),Ct=!0,setTimeout(zt,30),U(),V&&!R?a.appendChild(W):s.parentNode.insertBefore(W,V?R:s),E&&N(E,0,L-E.scrollTop),Z=W.parentNode,void 0===b||xt||(mt=Math.abs(b-A(s)[T])),$(),G(!0)}if(a.contains(W))return G(!1)}return!1}function j(l,c){H(l,f,r({evt:t,isOwner:h,axis:o?"vertical":"horizontal",revert:i,dragRect:e,targetRect:n,canSort:d,fromSortable:p,target:s,completed:G,onMove:function(n,i){return Ft(K,a,W,e,n,A(n),t,i)},changed:$},c))}function U(){j("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function G(e){return j("dragOverCompleted",{insertion:e}),e&&(h?u._hideClone():u._showClone(f),f!==p&&(k(W,at?at.options.ghostClass:u.options.ghostClass,!1),k(W,l.ghostClass,!0)),at!==f&&f!==Nt.active?at=f:f===Nt.active&&at&&(at=null),p===f&&(f._ignoreWhileAnimating=s),f.animateAll((function(){j("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s===W&&!W.animated||s===a&&!s.animated)&&(ft=null),l.dragoverBubble||t.rootEl||s===document||(W.parentNode[z]._isOutsideThisEl(t.target),!e&&Rt(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function $(){nt=O(W),rt=O(W,l.draggable),q({sortable:f,name:"change",toEl:a,newIndex:nt,newDraggableIndex:rt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",Rt),v(document,"mousemove",Rt),v(document,"touchmove",Rt)},_offUpEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._onDrop),v(t,"touchend",this._onDrop),v(t,"pointerup",this._onDrop),v(t,"pointercancel",this._onDrop),v(t,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;nt=O(W),rt=O(W,n.draggable),H("drop",this,{evt:t}),Z=W&&W.parentNode,nt=O(W),rt=O(W,n.draggable),Nt.eventCanceled||(yt=!1,xt=!1,St=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gt(this.cloneId),Gt(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),d&&C(document.body,"user-select",""),C(W,"transform",""),t&&(pt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(K===Z||at&&"clone"!==at.lastPutMode)&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),W&&(this.nativeDraggable&&v(W,"dragend",this),Bt(W),W.style["will-change"]="",pt&&!yt&&k(W,at?at.options.ghostClass:this.options.ghostClass,!1),k(W,this.options.chosenClass,!1),q({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:t}),K!==Z?(nt>=0&&(q({rootEl:Z,name:"add",toEl:Z,fromEl:K,originalEvent:t}),q({sortable:this,name:"remove",toEl:Z,originalEvent:t}),q({rootEl:Z,name:"sort",toEl:Z,fromEl:K,originalEvent:t}),q({sortable:this,name:"sort",toEl:Z,originalEvent:t})),at&&at.save()):nt!==et&&nt>=0&&(q({sortable:this,name:"update",toEl:Z,originalEvent:t}),q({sortable:this,name:"sort",toEl:Z,originalEvent:t})),Nt.active&&(null!=nt&&-1!==nt||(nt=et,rt=it),q({sortable:this,name:"end",toEl:Z,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){H("nulling",this),K=W=Z=Y=X=Q=J=tt=st=lt=pt=nt=rt=et=it=ft=gt=at=ot=Nt.dragged=Nt.ghost=Nt.clone=Nt.active=null,Mt.forEach((function(t){t.checked=!0})),Mt.length=ct=ut=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":W&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)w(t=n[i],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||jt(t));return e},sort:function(t,e){var n={},i=this.el;this.toArray().forEach((function(t,e){var r=i.children[e];w(r,this.options.draggable,i,!1)&&(n[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return w(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=G.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&Ot(n)},destroy:function(){H("destroy",this);var t=this.el;t[z]=null,v(t,"mousedown",this._onTapStart),v(t,"touchstart",this._onTapStart),v(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(t,"dragover",this),v(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),wt.splice(wt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!tt){if(H("hideClone",this),Nt.eventCanceled)return;C(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),tt=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(tt){if(H("showClone",this),Nt.eventCanceled)return;W.parentNode!=K||this.options.group.revertClone?X?K.insertBefore(Q,X):K.appendChild(Q):K.insertBefore(Q,W),this.options.group.revertClone&&this.animate(W,Q),C(Q,"display",""),tt=!1}}else this._hideClone()}},Tt&&m(document,"touchmove",(function(t){(Nt.active||yt)&&t.cancelable&&t.preventDefault()})),Nt.utils={on:m,off:v,css:C,find:T,is:function(t,e){return!!w(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:V,closest:w,toggleClass:k,clone:F,index:O,nextTick:Ut,cancelNextTick:Gt,detectDirection:Dt,getChild:P,expando:z},Nt.get=function(t){return t[z]},Nt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Nt.utils=r(r({},Nt.utils),t.utils)),G.mount(t)}))},Nt.create=function(t,e){return new Nt(t,e)},Nt.version="1.15.6";var $t,Ht,qt,Wt,Zt,Yt,Kt=[],Xt=!1;function Jt(){Kt.forEach((function(t){clearInterval(t.pid)})),Kt=[]}function Qt(){clearInterval(Yt)}var te=V((function(t,e,n,i){if(e.scroll){var r,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,c=E(),u=!1;Ht!==n&&(Ht=n,Jt(),$t=e.scroll,r=e.scrollFn,!0===$t&&($t=I(n,!0)));var h=0,d=$t;do{var p=d,f=A(p),g=f.top,m=f.bottom,v=f.left,y=f.right,b=f.width,w=f.height,S=void 0,x=void 0,k=p.scrollWidth,M=p.scrollHeight,T=C(p),_=p.scrollLeft,P=p.scrollTop;p===c?(S=b<k&&("auto"===T.overflowX||"scroll"===T.overflowX||"visible"===T.overflowX),x=w<M&&("auto"===T.overflowY||"scroll"===T.overflowY||"visible"===T.overflowY)):(S=b<k&&("auto"===T.overflowX||"scroll"===T.overflowX),x=w<M&&("auto"===T.overflowY||"scroll"===T.overflowY));var D=S&&(Math.abs(y-o)<=s&&_+b<k)-(Math.abs(v-o)<=s&&!!_),O=x&&(Math.abs(m-a)<=s&&P+w<M)-(Math.abs(g-a)<=s&&!!P);if(!Kt[h])for(var L=0;L<=h;L++)Kt[L]||(Kt[L]={});Kt[h].vx==D&&Kt[h].vy==O&&Kt[h].el===p||(Kt[h].el=p,Kt[h].vx=D,Kt[h].vy=O,clearInterval(Kt[h].pid),0==D&&0==O||(u=!0,Kt[h].pid=setInterval(function(){i&&0===this.layer&&Nt.active._onTouchMove(Zt);var e=Kt[this.layer].vy?Kt[this.layer].vy*l:0,n=Kt[this.layer].vx?Kt[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(Nt.dragged.parentNode[z],n,e,t,Zt,Kt[this.layer].el)||N(Kt[this.layer].el,n,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==c&&(d=I(d,!1)));Xt=u}}),30),ee=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||r;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ne(){}function ie(){}ne.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=P(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:ee},s(ne,{pluginName:"revertOnSpill"}),ie.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:ee},s(ie,{pluginName:"removeOnSpill"}),Nt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):this.options.supportPointer?m(document,"pointermove",this._handleFallbackAutoScroll):e.touches?m(document,"touchmove",this._handleFallbackAutoScroll):m(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),Qt(),Jt(),clearTimeout(S),S=void 0},nulling:function(){Zt=Ht=$t=Xt=Yt=qt=Wt=null,Kt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(i,r);if(Zt=t,e||this.options.forceAutoScrollFallback||u||c||d){te(t,this.options,o,e);var a=I(o,!0);!Xt||Yt&&i===qt&&r===Wt||(Yt&&Qt(),Yt=setInterval((function(){var o=I(document.elementFromPoint(i,r),!0);o!==a&&(a=o,Jt()),te(t,n.options,o,e)}),10),qt=i,Wt=r)}else{if(!this.options.bubbleScroll||I(o,!0)===E())return void Jt();te(t,this.options,I(o,!1),!1)}}},s(t,{pluginName:"scroll",initializeByDefault:!0})}),Nt.mount(ie,ne);const re=Nt},90054:(t,e,n)=>{"use strict";const i=n(41929),r=(t,e,n)=>{if(!1===i(t))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===e||t===e)return String(t);if(!1===i(e))throw new TypeError("toRegexRange: expected the second argument to be a number.");let o={relaxZeros:!0,...n};"boolean"==typeof o.strictZeros&&(o.relaxZeros=!1===o.strictZeros);let l=t+":"+e+"="+String(o.relaxZeros)+String(o.shorthand)+String(o.capture)+String(o.wrap);if(r.cache.hasOwnProperty(l))return r.cache[l].result;let c=Math.min(t,e),u=Math.max(t,e);if(1===Math.abs(c-u)){let n=t+"|"+e;return o.capture?`(${n})`:!1===o.wrap?n:`(?:${n})`}let h=p(t)||p(e),d={min:t,max:e,a:c,b:u},f=[],g=[];return h&&(d.isPadded=h,d.maxLen=String(d.max).length),c<0&&(g=a(u<0?Math.abs(u):1,Math.abs(c),d,o),c=d.a=0),u>=0&&(f=a(c,u,d,o)),d.negatives=g,d.positives=f,d.result=function(t,e){let n=s(t,e,"-",!1)||[],i=s(e,t,"",!1)||[],r=s(t,e,"-?",!0)||[];return n.concat(r).concat(i).join("|")}(g,f),!0===o.capture?d.result=`(${d.result})`:!1!==o.wrap&&f.length+g.length>1&&(d.result=`(?:${d.result})`),r.cache[l]=d,d.result};function o(t,e,n){if(t===e)return{pattern:t,count:[],digits:0};let i=function(t,e){let n=[];for(let i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}(t,e),r=i.length,o="",a=0;for(let t=0;t<r;t++){let[e,n]=i[t];e===n?o+=e:"0"!==e||"9"!==n?o+=`[${s=e}${(l=n)-s==1?"":"-"}${l}]`:a++}var s,l;return a&&(o+=!0===n.shorthand?"\\d":"[0-9]"),{pattern:o,count:[a],digits:r}}function a(t,e,n,i){let r,a=function(t,e){let n=1,i=1,r=u(t,n),o=new Set([e]);for(;t<=r&&r<=e;)o.add(r),n+=1,r=u(t,n);for(r=h(e+1,i)-1;t<r&&r<=e;)o.add(r),i+=1,r=h(e+1,i)-1;return o=[...o],o.sort(l),o}(t,e),s=[],c=t;for(let t=0;t<a.length;t++){let e=a[t],l=o(String(c),String(e),i),u="";n.isPadded||!r||r.pattern!==l.pattern?(n.isPadded&&(u=f(e,n,i)),l.string=u+l.pattern+d(l.count),s.push(l),c=e+1,r=l):(r.count.length>1&&r.count.pop(),r.count.push(l.count[0]),r.string=r.pattern+d(r.count),c=e+1)}return s}function s(t,e,n,i,r){let o=[];for(let r of t){let{string:t}=r;i||c(e,"string",t)||o.push(n+t),i&&c(e,"string",t)&&o.push(n+t)}return o}function l(t,e){return t>e?1:e>t?-1:0}function c(t,e,n){return t.some((t=>t[e]===n))}function u(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function h(t,e){return t-t%Math.pow(10,e)}function d(t){let[e=0,n=""]=t;return n||e>1?`{${e+(n?","+n:"")}}`:""}function p(t){return/^-?(0+)\d/.test(t)}function f(t,e,n){if(!e.isPadded)return t;let i=Math.abs(e.maxLen-String(t).length),r=!1!==n.relaxZeros;switch(i){case 0:return"";case 1:return r?"0?":"0";case 2:return r?"0{0,2}":"00";default:return r?`0{0,${i}}`:`0{${i}}`}}r.cache={},r.clearCache=()=>r.cache={},t.exports=r},85209:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i,t:()=>L});var i,r=n(50107),o=n(87006),a=n(86986),s=n(81807),l=n(72210),c=n(63124),u=n(85954),h=n(39236),d=n(30980),p=n(63068),f=n(55081),g=n(70943),m=n(27449),v=n(86024),y=n(31750),b=n(94855),w=n(78698),S=n(92421),x=n(96826),k=n(60001),C=n(84652),M=n(52023),T=n(298),E=n(55079),A=n(46449),_=n(51038),P=n(24072),D=n(15436),O=n(61455);!function(t){t[t.Select=0]="Select",t[t.Pan=1]="Pan",t[t.ZoomOnArea=2]="ZoomOnArea"}(i||(i={}));class L{element;model;settings;editor;viewportScale;selectionManager;tooltipServiceWrapper;interactive;callbackSelectionIds;ColorRulesEnumerator;isEditMode;isFocusMode;zoomStateManager;licenseManager;controlMode=i.Select;drillPathId;selectedMap;msgBox;placeholder;svgMap;legend;zoomToolbar={};controlsToolbar={};currentZoom;labelDesigner;mapsManager;zoomedArea;chart;chartContainer;mapSelectorDropdown;mapContainer;labelsContainer;toolbar;addMapButton;drillPathLabel;selectionToolbar;errorBox;loadingEl;attribution;labels={};jsPlumb;destroyed=!1;get minZoom(){const t=this.settings.advanced.minZoom.value/100;return this.isLabelDesignMode?Math.min(.5,t):t}get maxZoom(){const t=this.settings.advanced.maxZoom.value/100;return this.isLabelDesignMode?Math.max(100,t):t}get isLabelDesignMode(){return this.isEditMode&&this.isFocusMode&&globalThis.labelDesignerState?.on}set isLabelDesignMode(t){this.settings&&(this.settings.toolbars.visible=!t,this.settings.legend.visible=!t,this.settings.advanced.groups.find((t=>"advanced.panZoom"==t.name)).visible=!t),t?(globalThis.labelDesignerState={on:t,nonInFocusSize:this.svgMap?.scale?.naturalSize},this.clearSelection(),this.isFocusMode?this.draw():thisVisual.host.switchFocusModeState(!0)):globalThis.labelDesignerState={on:!1}}constructor(t,e,n,i,r,o,a,s,l,c,u,h,d,p){this.element=t,this.model=e,this.settings=n,this.editor=i,this.viewportScale=r,this.selectionManager=o,this.tooltipServiceWrapper=a,this.interactive=s,this.callbackSelectionIds=l,this.ColorRulesEnumerator=c,this.isEditMode=u,this.isFocusMode=h,this.zoomStateManager=d,this.licenseManager=p,this.drillPathId=(0,S.y5)(this.model.drillMode.path),this.mapsManager=new C.x({initialState:this.settings.internal.maps.value}),this.mapsManager.jsvgGenerator.imageQuality=this.settings.advanced.imageQuality.value/100,this.getMyStorageConfig().then((t=>this.mapsManager.myStorage.updateInfo(t))).catch((()=>{})),this.licenseManager.on("fetched",(async()=>this.mapsManager.myStorage.updateInfo(await this.getMyStorageConfig()))),this.applyMapField(),this.applyMapSelector(),this.mapsManager.ensureMapsOrder(this.drillPathId),this.selectedMap=this.mapsManager.getSelectedMap(this.drillPathId),this.initLegend()}applyMapField(){if(this.model.compareToPrevious.mapFieldChanged){const t=this.mapsManager.getSelectedMap(this.drillPathId)?.id;this.mapsManager.updateMapsFromDataField(this.model.mapField?Object.keys(this.model.mapField.urls):[]),this.settings.advanced.clearSelectionOnMapChange.value&&!this.mapsManager.isMapSelected(t,this.drillPathId)&&this.selectionManager.clear()}}applyMapSelector(){if(this.model.compareToPrevious.mapSelectorChanged){const t=this.model.mapSelector?.values[0];if(t){const e=this.mapsManager.findMap((e=>e.mapSelector===t),this.drillPathId);if(e?.map)return this.settings.advanced.clearSelectionOnMapChange.value&&this.selectionManager.clear(),void this.mapsManager.selectMap(e.map.id,this.drillPathId)}this.mapsManager.deselect(this.drillPathId)}}get maps(){return this.mapsManager.getDisplayMaps(this.drillPathId)}get filteredMaps(){return this.hasMapSelector?this.maps.filter((t=>this.model.mapSelector.values.includes(t.mapSelector)||!t.mapSelector&&this.settings.advanced.mapSelectorAllowUnassignedMaps.value)):this.maps}get hasSingleMap(){return 1===this.maps.length}get hasMapSelector(){return thisVisualFeatures.mapSelector&&this.model.mapSelector}get toolbarColors(){if(!this._toolbarColors){const t=this.isLabelDesignMode?"#F3F2F1":this.settings.toolbars.backgroundColor.value.value,e=(0,c.dk)(t,this.isLabelDesignMode?100:100-this.settings.toolbars.backgroundTransparency.value),n=(0,a.IO)(t);this._toolbarColors={backgroundColor:e,color:(0,c.w5)(e),selectedColor:(0,a.KY)(n,.8,.2)}}return this._toolbarColors}_toolbarColors;get isZoomed(){return this.currentZoom&&this.currentZoom>this.minZoom}get isZoomLocked(){return this.settings.advanced.lockZoom.value&&!this.isLabelDesignMode}get isPanLocked(){return this.settings.advanced.lockPan.value&&!this.isLabelDesignMode}get isAutoPanMode(){return this.settings.advanced.autoPanMode.value&&!this.isLabelDesignMode}get isTopToolbarVisible(){return this.isEditMode||this.settings.toolbars.showMapDropdown.value}get isBottomToolbarVisible(){return this.isZoomToolbarVisible||this.isControlToolbarVisible}get isZoomToolbarVisible(){return this.isLabelDesignMode||this.settings.toolbars.showZoom.value&&(this.settings.toolbars.showZoomButtons.value||this.settings.toolbars.showZoomPercentage.value)}get isControlToolbarVisible(){return this.isLabelDesignMode||this.settings.toolbars.showControls.value&&(this.isClearControlVisible||this.isPanControlVisible||this.isZoomOnAreaControlVisible)}get isZoomOnAreaControlVisible(){return!this.isZoomLocked&&!this.isLabelDesignMode&&this.settings.toolbars.showZoomOnArea.value}get isClearControlVisible(){return this.settings.toolbars.showClear.value&&!this.isLabelDesignMode}get isPanControlVisible(){return!this.isAutoPanMode&&!this.isPanLocked}get canShowDrillPathLabel(){return thisVisualFeatures.drillDown&&this.settings.appearance.showDrillPath.value&&(this.settings.appearance.showDrillPathOnFirstLevel.value||!(0,S.zb)(this.model.drillMode.path))&&!this.isLabelDesignMode}get isDrillPathLabelVisible(){return!(!this.canShowDrillPathLabel||this.selectionToolbar&&this.drillPathLabel&&(0,k.Uw)([this.selectionToolbar.getBoundingClientRect(),this.drillPathLabel.getBoundingClientRect()]))}updateInterface(t){this.settings&&(this.updateViewportScale(t),this.legend?.updateScale(t),this.svgMap&&(this.zoomStateManager.delete(`${this.svgMap.id}-designer`),this.svgMap.updateScale(),this.resizeLabels()),this.drillPathLabel&&(this.drillPathLabel.style.visibility=this.isDrillPathLabelVisible?"visible":"hidden"),this.filteredMaps.length&&this.drawAttribution())}updateViewportScale(t){this.viewportScale=t,this.element.querySelectorAll(".scalable").forEach((t=>{this.scale(t)})),this.adjustMarginForToolbarOverlap(),this.labelDesigner?.updateViewportScale(t)}adjustMarginForToolbarOverlap(){let t=0,e=0;this.isLabelDesignMode||this.settings.toolbars.overlap.value||((this.isTopToolbarVisible||this.canShowDrillPathLabel)&&(t=(30+this.settings.toolbars.topMargin.value)/this.viewportScale),this.isBottomToolbarVisible&&(e=30/this.viewportScale));const n=this.chart.firstElementChild;n.style.marginTop=`${t}px`,n.style.marginBottom=`${e}px`}async getMyStorageConfig(){const t={id:null,region:null,displayRegion:null,readKey:null,editKey:null,encryptionKey:null};return this.settings&&(this.licenseManager?.status?.license?.attributes?.myStorage&&(t.id=this.licenseManager.status.license.attributes.myStorage.id,t.readKey=this.licenseManager.status.license.attributes.myStorage.readKey,t.region=this.licenseManager.status.license.region,t.displayRegion=this.licenseManager.status.license.displayRegion),!this.settings.myStorage?.saveEditKey.value&&this.settings.internal.msek.value&&s.XI0.SAVE({objectName:"internal",properties:{[A.rv]:null},selector:null}),t.editKey=this.settings.internal.msek.value||await(0,s.vxu)(thisVisual.host.storageV2Service,A.rv),t.encryptionKey=this.settings.myStorage?.encryptionKey.value),t}initLegend(){this.legend&&this.legend.destroy();const t=this.settings.legend.position.value.value,e="top"==t||"bottom"==t?this.settings.legend.alignment.value:"top"==this.settings.legend.verticalAlignment.value?"left":"bottom"==this.settings.legend.verticalAlignment.value?"right":"center";this.legend=new s.bOl({column:this.model.legendField,userSettings:this.settings.legend.custom.value,staticItems:this.getStaticLegendItems(),position:t,alignment:e,isEditable:this.isEditMode,isInteractive:this.interactive,showTitle:this.settings.legend.showTitle.value,maxItems:this.settings.legend.maxItems.value,titlePosition:this.settings.legend.titleInline.value||"left"==t||"right"==t?"inline":"top",title:this.settings.legend.titleText.value,titleFont:{size:E.fromPointToPixel(this.settings.legend.titleFont.fontSize.value),family:this.settings.legend.titleFont.fontFamily.value,bold:this.settings.legend.titleFont.bold.value,italic:this.settings.legend.titleFont.italic.value,underline:this.settings.legend.titleFont.underline.value},titleColor:this.settings.legend.titleColor.value.value,...this.settings.legend.iconAutoSize.value?{}:{itemsIconSize:E.fromPointToPixel(this.settings.legend.iconSize.value)},itemsWordWrap:this.settings.legend.wordWrap.value,itemsFont:{size:E.fromPointToPixel(this.settings.legend.font.fontSize.value),family:this.settings.legend.font.fontFamily.value,bold:this.settings.legend.font.bold.value,italic:this.settings.legend.font.italic.value,underline:this.settings.legend.font.underline.value},itemsLabelColor:this.settings.legend.color.value.value,..."fixed"==this.settings.legend.legendSizeType.value.value?{showScrollbar:this.settings.legend.showScrollbar.value,size:this.settings.legend.legendSize.value}:{},..."max"==this.settings.legend.legendSizeType.value.value?{showScrollbar:this.settings.legend.showScrollbar.value,maxSize:this.settings.legend.legendSize.value}:{},..."fixed"==this.settings.legend.itemSizeType.value.value?{itemsSize:this.settings.legend.itemSize.value}:{},..."max"==this.settings.legend.itemSizeType.value.value?{itemsMaxSize:this.settings.legend.itemSize.value}:{},onItemClick:()=>{const t=this.selectionManager.getSelectionIds();this.selectAreasBySelectionIds(t)}},this.selectionManager),this.settings.legend.showDialog.value&&this.legend.showDialog()}getStaticLegendItems(){const t=[],e=(e,n,i,r)=>{const o="custom"===n;if((o||"greyscale"===n)&&i){const n={key:e,label:i,color:o?r?.value:"#808080",static:!0};t.push(n)}};if(!this.model.legendField){const t=this.model.fields[h.Xh.Category][this.model.fields[h.Xh.Category].length-1];e("_matched",this.settings.areas.matchedColorType.value.value,t.source.displayName,this.settings.areas.matchedColor.value)}return e("_unmatched",this.settings.areas.unmatchedColorType.value.value,"Unmatched",this.settings.areas.unmatchedColor.value),e("_unbound",this.settings.areas.unboundColorType.value.value,"Unbound",this.settings.areas.unboundColor.value),thisVisualFeatures.colorRules&&this.ColorRulesEnumerator&&t.push(...this.ColorRulesEnumerator.getLegendItems()),t}async draw(){if(this.element.querySelectorAll(".chart, .legend").forEach((t=>t.remove())),this.placeholder&&this.placeholder.destroy(),this.chart=(0,s.tTh)(".chart",this.element,[(0,s.tTh)(".chart-toolbar-container",[...this.isLabelDesignMode?[(0,s.tTh)(".label-designer-panel",{style:{width:`${_.b}px`}})]:[],(0,s.tTh)(".chart-container",{middleware:t=>this.chartContainer=t})])]),this.canDraw())if(this.maps.length){this.adjustMarginForToolbarOverlap();const t=this.filteredMaps;if((0,s.tTh)(".loading",this.chartContainer,{middleware:t=>{this.loadingEl=t}},[(0,s.tTh)(".loader")]),1!=t.length||this.isEditMode?this.drawTopToolbar():this.drawMapTitle(),this.drawDrillPathLabel(),t.length){if(await this.ensureMapContent()){if(this.destroyed)return;this.drawLegend(),this.drawMap(),this.drawBottomToolbar(),this.drawAttribution(),this.drawLabelDesigner()}}else this.raiseError((0,l.T)("NO_SELECTOR_MAPS"));this.loadingEl?.remove()}else this.isEditMode&&this.drawAddMapButton(),this.drawDrillPathLabel(),this.settings.appearance.showPlaceholder.value&&(this.placeholder=new r.S(this.chartContainer,this.model,this.settings,this.isEditMode,this.selectionManager,this.callbackSelectionIds),this.placeholder.draw())}canDraw(){return this.model.drillMode.movedToNextLevel?(this.raiseError((0,l.T)("INVALID_LEVEL")),!1):!(!this.model.drillMode.path.length||!this.model.dataPoints.length)||(this.raiseError((0,l.T)("BLANK")),!1)}drawLegend(){this.settings?.legend?.show?.value&&!this.isLabelDesignMode&&this.legend.draw(this.element,this.viewportScale)}drawMap(){this.mapContainer?.remove(),this.addMapButton?.remove(),this.svgMap?.destroy(),this.loadingEl?.remove(),this.mapContainer=(0,s.tTh)(".svg-container.zoomable.center"+(this.isLabelDesignMode?".label-designer":""),this.chartContainer),this.labelsContainer=(0,s.tTh)(".labels-container",this.mapContainer),this.updateMapBlur();const t=this.zoomStateManager?.get(`${this.selectedMap.id}${this.isLabelDesignMode?"-designer":""}`);if(this.currentZoom=t?.zoom,this.svgMap=new p.F({mapArea:this.mapContainer,context:"chart",jsvg:this.selectedMap.jsvg,model:this.model,settings:this.settings,tooltipServiceWrapper:this.isLabelDesignMode?null:this.tooltipServiceWrapper,zoomer:!0,zoomerConfig:{container:this.chartContainer,minZoom:this.minZoom,maxZoom:this.maxZoom,zoomState:t,panMode:this.controlMode===i.Pan,autoPan:this.isAutoPanMode,lockZoom:this.isZoomLocked,lockPan:this.isPanLocked},colorRulesEnumerator:thisVisualFeatures.colorRules?this.ColorRulesEnumerator:null,legendManager:this.legend}),this.svgMap.on("zoom",(t=>{this.zoomedArea&&(this.zoomedArea.level?t.zoom<this.zoomedArea.level&&this.resetZoomedArea():this.zoomedArea.level=t.zoom),this.currentZoom=t.zoom,this.updateZoomToolbar(),this.togglePanningIcon(),this.zoomStateManager.add(`${this.selectedMap?.id}${this.isLabelDesignMode?"-designer":""}`,t)})),this.svgMap.draw(),this.settings.appearance.keepAspectRatio.value||this.svgMap.map.setAttribute("preserveAspectRatio","none"),this.applyLabelDesignerLabelsScale(),this.drawLabels(),this.settings.accessibility.highlightOnHover.value&&(this.mapContainer.classList.add("highlight-on-hover"),this.mapContainer.addLiveEventListener("mouseover",".map-element.matched",((t,e)=>{const n=getComputedStyle(e)?.fill;e.classList.add(n&&(0,c.cP)(n)?"dark":"light")})),this.mapContainer.addLiveEventListener("mouseout",".map-element.matched",((t,e)=>{e.classList.remove("dark","light")}))),this.interactive){if(this.callbackSelectionIds&&this.callbackSelectionIds.length)this.selectAreasBySelectionIds(this.callbackSelectionIds);else{const t=this.selectionManager.getSelectionIds();t.length&&this.selectAreasBySelectionIds(t)}this.svgMap.map.addEventListener("mouseup",(t=>this.handleAreaClick(t)),!0),this.svgMap.map.addEventListener("contextmenu",(t=>{this.handleAreaRightClick(t)}))}this.settings.advanced.autoZoomMode.value?.value&&this.model.compareToPrevious.dataPointsChanged&&this.autoZoomOnMatchedAreas(this.settings.advanced.autoZoomMode.value.value==d.Yw.Single),thisVisualFeatures.childMaps&&thisVisualFeatures.remoteMaps&&window.setTimeout((()=>this.scanMap()),100)}updateMapBlur(){if(!this.selectedMap||!this.mapContainer)return;let t=!1;this.isLabelDesignMode||(thisVisualFeatures.remoteMaps||this.selectedMap.location!=C.k.Remote&&this.selectedMap.location!=C.k.DataField)&&(thisVisualFeatures.myStorageMaps||this.selectedMap.location!=C.k.MyStorage)||(t=!0),this.mapContainer.classList.toggle("blur",t)}drawLabelDesigner(){this.labelDesigner&&(this.labelDesigner.destroy(),this.labelDesigner=null),(0,m.VI)(),this.isLabelDesignMode?this.labelDesigner=new m.wf(this.labels,this.svgMap,this.mapContainer,this.settings,this.viewportScale):this.isLabelDesignMode=!1}applyLabelDesignerLabelsScale(){if(!this.isLabelDesignMode||!globalThis.labelDesignerState.nonInFocusSize||!this.svgMap?.scale)return;const t=globalThis.labelDesignerState.nonInFocusSize.width/this.svgMap.scale.naturalSize.width,e=globalThis.labelDesignerState.nonInFocusSize.height/this.svgMap.scale.naturalSize.height,n=1/Math.min(t,e);1!=n&&((0,k.XB)(this.svgMap.map,n),this.svgMap.updateScale(),globalThis.labelDesignerState.zoomed||(this.svgMap.zoomer.zoomTo(n,!0),globalThis.labelDesignerState.zoomed=!0),(0,s.tTh)(".labels-container-canvas",this.labelsContainer,{style:{width:100/n+"%",height:100/n+"%",left:(100-100/n)/2+"%",top:(100-100/n)/2+"%"}}))}autoZoomOnMatchedAreas(t){if(!this.svgMap||!this.svgMap.map||!this.svgMap.zoomer)return;if(t&&this.model.dataPoints.length>1)return;const e=Array.from(this.svgMap.map.querySelectorAll(".map-element.matched.pointer"));if(e&&(this.resetZoomedArea(),this.svgMap?.zoomer?.zoomOnArea(e,this.settings?.advanced?.zoomFit?.value),1===e.length)){const t=e[0];t.classList.add("zoomed"),this.zoomedArea={element:t}}}drawAttribution(){if(this.attribution&&this.attribution.remove(),!this.settings.appearance.showAttribution.value)return;const t=this.selectedMap;if(!t||!t.attribution)return;this.attribution=(0,s.tTh)(".attribution",this.chart);const e=document.createElementNS(k.UG,"svg");this.attribution.appendChild(e);const n=document.createElementNS(k.UG,"text");if(n.textContent=t.attribution,n.setAttribute("x","100%"),n.setAttribute("y","100%"),e.appendChild(n),n.style.setProperty("text-anchor","end","important"),n.style.setProperty("alignment-baseline","text-after-edge","important"),n.style.setProperty("fill",this.settings.appearance.attributionColor.value.value,"important"),n.style.setProperty("font-family",this.settings.appearance.attributionFont.fontFamily.value,"important"),n.style.setProperty("font-size",E.fromPoint(this.settings.appearance.attributionFont.fontSize.value),"important"),this.settings.appearance.attributionFont.bold.value&&n.style.setProperty("font-weight","bold","important"),this.settings.appearance.attributionFont.italic.value&&n.style.setProperty("font-style","italic","important"),this.settings.appearance.attributionFont.underline.value&&n.style.setProperty("text-decoration","underline","important"),n.style.setProperty("text-rendering","optimizeLegibility","important"),this.settings.appearance.attributionStroke.value){const t=this.settings.appearance.attributionFont.fontSize.value/30*this.settings.appearance.attributionStrokeWidth.value,e=this.settings.appearance.attributionStrokeFill.value?.value??(0,s.sP2)(this.settings.appearance.attributionColor.value.value,1);n.setAttribute("stroke",e),n.setAttribute("stroke-width",t.toString()),n.setAttribute("stroke-opacity",(1-this.settings.appearance.attributionStrokeTransparency.value/100).toString()),n.setAttribute("stroke-linejoin","round"),n.setAttribute("paint-order","stroke")}}drawAddMapButton(){if(!thisVisualFeatures.mapDialog)return;let t;const e=this.mapsManager.isEmpty,n=e?".center":".top",i=e?"":".small",r=(0,s.tTh)(`.synoptic-btn.add-map-btn.fixed.scalable.ctrl${n}${i}`,this.chart,{style:{marginTop:e?"0":`${this.settings.toolbars.topMargin.value}px`},middleware:t=>{this.addMapButton=t}},[(0,s.tTh)(`.group${i}`,{events:{click:t=>this.showAddMapContextMenu(t)},middleware:e=>{t=e}},[(0,s.tTh)(`.icon.icon-plus${i}`),(0,s.tTh)(`span.text${i}`,"Add Map")])]);if(this.scale(r),e)(0,s.vm6)(r,"translate(-50%, -50%)"),(0,s.tTh)(".icon.icon-help.ctrl.spaced",t,{events:{click:()=>{thisVisual.host.launchUrl(D.tl.docsGetStarted)}}});else{const t=(0,s.tTh)(".toolbar.pinned.top.maps-manager-btn.scalable",this.chart,{style:{marginTop:`${this.settings.toolbars.topMargin.value}px`}},[(0,s.tTh)(".group.full.default",[(0,s.tTh)(".icon.icon-layers.full",{events:{click:t=>{t.preventDefault(),this.openDialog({viewType:"DialogManager"})}}})])]);t.style.transformOrigin="-93px top",this.scale(t),r.style.transformOrigin="top left"}}showAddMapContextMenu(t){t.target.classList.contains("icon-help")||s.tzH.Init("chart-add-map-context-menu",{sticky:t.currentTarget,width:"auto",scale:this.viewportScale,items:[{label:"Local Map",icon:"folder",onClick:()=>this.openLocalMapDialog()},{label:"Remote Map",enabled:thisVisualFeatures.remoteMaps,icon:"world",onClick:()=>this.openDialog({viewType:"DialogAdd",viewState:y.L.AddRemoteMap})},{label:"My Storage Map",enabled:thisVisualFeatures.myStorageMaps,icon:"okviz-storage",onClick:()=>this.openDialog({viewType:"DialogAdd",viewState:y.L.AddMyStorageMap})},{type:s.KGh.Separator},{label:"Import URLs",icon:"upload",enabled:thisVisualFeatures.remoteMaps,onClick:()=>this.openImportURLsDialog()}]}).show(t)}async openLocalMapDialog(){const t=await M.g.browseFiles(u.k$,!0);if(!t||!t.length)return;(0,O.KN)();const e=[];try{let n=this.mapsManager.getMemorySize(C.k.Local);for(let i=0;i<t.length;i++){let r=t[i];(0,O.Uu)(r.name,[i+1,t.length]);const a=await this.mapsManager.jsvgGenerator.createFromFile(r);if(n+=a.meta.size,r=null,n>D.Ay){await this.mapsManager.addLocalMaps(e,this.drillPathId);const t=(0,l.T)("TOTAL_LOCAL_MAPS_SIZE_EXCEEDED"),n=new o.z({error:t,scale:this.viewportScale,showCode:this.isEditMode});return await n.render(),void this.saveInternalMaps()}e.push(a),await(0,s.ukR)(500)}this.openDialog({viewType:"DialogAdd",viewState:y.L.AddLocalMap,addOptions:{jsvgsToSave:e}})}catch(t){const e=new o.z({error:t,scale:this.viewportScale,showCode:this.isEditMode}),n=await e.render();"link"==n.type&&thisVisual.host.launchUrl(n.url)}finally{(0,O.hy)()}}async openImportURLsDialog(){const t=await M.g.browseFiles(["application/json"]);if(t&&t.length)try{const e=await t[0].text();this.openDialog({viewType:"DialogAdd",viewState:y.L.ImportUrls,addOptions:{importURLs:JSON.parse(e)}})}catch(t){const e=new o.z({error:t,scale:this.viewportScale,showCode:this.isEditMode}),n=await e.render();"link"==n.type&&thisVisual.host.launchUrl(n.url)}}drawMapTitle(){if(this.settings.appearance.showTitle.value){const t=this.filteredMaps[0];(0,s.tTh)(".map-title.pinned",this.chart,{style:{color:this.settings.appearance.titleColor.value.value}},t.location==C.k.DataField&&this.settings.advanced.mapFieldShowFullUrls.value?(0,T.eA)(t.url):t.name)}}drawDrillPathLabel(){if(!this.canShowDrillPathLabel)return;const t=(0,S.pT)(this.model.drillMode.path);this.drillPathLabel=(0,s.tTh)(".toolbar.show-on-hover.pinned.top.right.scalable.behind",{attr:{title:`Drill Path: ${t}`},style:{transformOrigin:"top right",marginTop:this.settings.toolbars.topMargin.value+"px"}});const e=(0,s.tTh)(".group.subset-marker",[(0,s.tTh)(".icon.icon-branch.marker.big")]),n=1===this.model.drillMode.path.length,i=this.model.drillMode.path.slice(-2);i.forEach(((t,r)=>{const o=0===r,a=(0,s.tTh)("span.subset-level"+(o&&!n?".drill-up":""),{events:{click:t=>{t.preventDefault(),o&&!n&&this.drillUp()}}},t);if(o&&!n&&(a.title="Drill Up To: "+t),this.model.drillMode.path.length>2&&o&&((0,s.tTh)("span.subset-level",e,"..."),(0,s.tTh)(".icon.icon-right.small.marker",e)),e.appendChild(a),r<i.length-1){const t=(0,s.tTh)(".icon.icon-right.small.marker");e.appendChild(t)}})),this.drillPathLabel.appendChild(e),this.chart.appendChild(this.drillPathLabel),this.scale(this.drillPathLabel),this.isDrillPathLabelVisible||(this.drillPathLabel.style.visibility="hidden")}drillUp(){const t={roleName:h.Xh.Category,drillType:1};thisVisual.host.drill(t)}drawBottomToolbar(){if(!this.isBottomToolbarVisible)return;const t=this.isLabelDesignMode||this.settings.toolbars.pin.value?".pinned":"";this.toolbar=(0,s.tTh)(`.toolbar.show-on-hover.bottom.left.scalable${t}`,this.chart,{events:{mouseenter:()=>this.tooltipServiceWrapper?.hide()}}),this.isLabelDesignMode&&(this.toolbar.style.left=`${_.b+10}px`),this.isZoomToolbarVisible&&this.drawZoomToolbar(),this.isControlToolbarVisible&&this.drawControlsToolbar(),this.toolbar.style.transformOrigin="bottom left",this.scale(this.toolbar)}drawZoomToolbar(){if(this.isZoomLocked)return;const t=this.currentZoom>=this.maxZoom?".disabled":"",e=this.isZoomed?"":".disabled",n=1==this.currentZoom?".disabled":"";(0,s.tTh)(".group.zoom",this.toolbar,{style:{...this.toolbarColors}},[...this.settings.toolbars.showZoomButtons.value?[(0,s.tTh)(`.icon.icon-minus${e}`,{attr:{title:"Reduce Zoom"},middleware:t=>this.zoomToolbar.minus=t,events:{click:t=>{t.preventDefault(),this.isZoomLocked||this.svgMap?.zoomer.zoomOut()},mouseenter:(t,e)=>{this.onIconEnter(e)},mouseleave:(t,e)=>{this.onIconLeave(e)}}})]:[],...this.settings.toolbars.showZoomPercentage.value?[(0,s.tTh)("span.zoom-state",{attr:{title:`Zoom: ${Math.round(100*this.currentZoom)}%`},middleware:t=>this.zoomToolbar.percentage=t},`${Math.round(100*this.currentZoom)}%`)]:[],...this.settings.toolbars.showZoomButtons.value?[(0,s.tTh)(`.icon.icon-plus${t}`,{attr:{title:"Increase Zoom"},middleware:t=>this.zoomToolbar.plus=t,events:{click:t=>{t.preventDefault(),this.isZoomLocked||this.svgMap?.zoomer.zoomIn()},mouseenter:(t,e)=>{this.onIconEnter(e)},mouseleave:(t,e)=>{this.onIconLeave(e)}}}),(0,s.tTh)(`.icon.icon-actual-size.big${n}`,{attr:{title:"Reset Zoom and Center"},middleware:t=>this.zoomToolbar.reset=t,events:{click:t=>{t.preventDefault(),this.isZoomLocked||(this.svgMap?.zoomer.resetZoom(),this.resetZoomedArea())},mouseenter:(t,e)=>{this.onIconEnter(e)},mouseleave:(t,e)=>{this.onIconLeave(e)}}})]:[]])}drawControlsToolbar(){const t=(0,s.tTh)(".group",this.toolbar,{style:{...this.toolbarColors}});if((this.isPanControlVisible||this.isZoomOnAreaControlVisible)&&(0,s.tTh)(".icon.icon-tool-pointer.selected",t,{style:{backgroundColor:this.toolbarColors.selectedColor},attr:{title:"Select Area"},middleware:t=>this.controlsToolbar.select=t,events:{click:t=>{t.preventDefault(),this.changeControlMode(i.Select)},mouseenter:(t,e)=>{this.onIconEnter(e)},mouseleave:(t,e)=>{this.onIconLeave(e)}}}),this.isPanControlVisible&&(0,s.tTh)(".icon.icon-tool-hand"+(this.isZoomed?"":".disabled"),t,{attr:{title:"Drag Map"},middleware:t=>this.controlsToolbar.pan=t,events:{click:t=>{t.preventDefault(),this.changeControlMode(i.Pan)},mouseenter:(t,e)=>{this.onIconEnter(e)},mouseleave:(t,e)=>{this.onIconLeave(e)}}}),this.isZoomOnAreaControlVisible&&(0,s.tTh)(".icon.icon-zoom-in.big",t,{attr:{title:"Zoom on Element"},middleware:t=>this.controlsToolbar.zoomOnArea=t,events:{click:t=>{t.preventDefault(),this.changeControlMode(i.ZoomOnArea)},mouseenter:(t,e)=>{this.onIconEnter(e)},mouseleave:(t,e)=>{this.onIconLeave(e)}}}),this.isClearControlVisible){const e=!this.isZoomOnAreaControlVisible&&!this.isPanControlVisible;e||(0,s.tTh)("span.divider",t),(0,s.tTh)(`.icon.icon-clear${e?"":".spaced"}${this.selectionManager.hasSelection()?"":".disabled"}`,t,{attr:{title:"Clear Selection"},middleware:t=>this.controlsToolbar.clear=t,events:{click:t=>{t.preventDefault(),this.clearSelection()},mouseenter:(t,e)=>{this.onIconEnter(e)},mouseleave:(t,e)=>{this.onIconLeave(e)}}})}}drawTopToolbar(){if(!this.isTopToolbarVisible)return;let t;const e=this.settings.toolbars.pin.value||this.isLabelDesignMode?".pinned":"",n=this.isEditMode?"":".reading-view";this.selectionToolbar=(0,s.tTh)(`.toolbar.show-on-hover.top.left.scalable${e}`,{style:{marginTop:this.settings.toolbars.topMargin.value+"px"},events:{mouseenter:()=>this.tooltipServiceWrapper?.hide()}},[(0,s.tTh)(`.group${n}`,{style:{...this.toolbarColors},middleware:e=>{t=e}})]),this.isLabelDesignMode&&(this.selectionToolbar.style.left=`${_.b+10}px`),(0,s.tTh)("select",t,{style:{color:this.toolbarColors.color},middleware:t=>{this.mapSelectorDropdown=t},list:this.getMapDropdownItems(),events:{change:t=>this.handleSelectChange(t)}}),this.isEditMode&&!this.isLabelDesignMode&&(thisVisualFeatures.mapDialog&&((0,s.tTh)("span.divider",t),(0,s.tTh)(".icon.icon-edit",t,{attr:{title:"Add or Edit Maps"},events:{click:(t,e)=>{t.preventDefault(),e.classList.contains("disabled")||this.openDialog({viewType:"DialogAdd",viewState:y.L.Default})},mouseenter:(t,e)=>this.onIconEnter(e),mouseleave:(t,e)=>this.onIconLeave(e)}}),(0,s.tTh)(".icon.icon-layers",t,{attr:{title:"Manage Maps"},events:{click:(t,e)=>{t.preventDefault(),e.classList.contains("disabled")||this.openDialog({viewType:"DialogManager"})},mouseenter:(t,e)=>this.onIconEnter(e),mouseleave:(t,e)=>this.onIconLeave(e)}})),(this.settings.categoryLabels.show.value||this.settings.dataLabels.show.value)&&(0,s.tTh)(".group.full",this.selectionToolbar,{style:{...this.toolbarColors}},[(0,s.tTh)(".icon.icon-edit2.full"+(this.isFocusMode?".disabled":""),{attr:{title:"Customize Labels"+(this.isFocusMode?" (Exit Focus Mode to Continue)":"")},events:{click:(t,e)=>{t.preventDefault(),e.classList.contains("disabled")||(this.isLabelDesignMode=!0)},mouseenter:(t,e)=>this.onIconEnter(e),mouseleave:(t,e)=>this.onIconLeave(e)}})]),thisVisualFeatures.colorRules&&(0,s.tTh)(".group.full",this.selectionToolbar,{style:{...this.toolbarColors}},[(0,s.tTh)(".icon.icon-theme.full",{attr:{title:"Color Rules"},events:{click:t=>{t.preventDefault(),this.editor.show()},mouseenter:(t,e)=>this.onIconEnter(e),mouseleave:(t,e)=>this.onIconLeave(e)}})]),thisVisualFeatures.myStorageMaps&&this.model.mapField&&((0,s.tTh)("span.divider",t),(0,s.tTh)(".icon.icon-okviz-storage",t,{attr:{title:"My Storage"},events:{click:(t,e)=>{t.preventDefault(),e.classList.contains("disabled")||this.openDialog({viewType:"DialogAdd",viewState:y.L.MyStorage})},mouseenter:(t,e)=>this.onIconEnter(e),mouseleave:(t,e)=>this.onIconLeave(e)}}))),this.chart.appendChild(this.selectionToolbar),this.scale(this.selectionToolbar)}getMapDropdownItems(){const t=[];for(let e=0;e<this.filteredMaps.length;e++){const n=this.filteredMaps[e];if(t.push({text:n.location==C.k.DataField&&this.settings.advanced.mapFieldShowFullUrls.value?(0,T.eA)(n.url):n.name,value:n.id,selected:this.mapsManager.isMapSelected(n.id,this.drillPathId)}),e>D.$f)break}return this.hasMapSelector&&!t.length&&t.push({text:"No maps available",value:"",selected:!0}),t}updateZoomToolbar(){this.currentZoom&&this.zoomToolbar&&this.isZoomToolbarVisible&&(this.zoomToolbar?.minus&&(this.zoomToolbar.minus.classList.toggle("disabled",!this.isZoomed),this.isZoomed||(this.zoomToolbar.minus.style.backgroundColor="")),this.zoomToolbar?.plus&&(this.zoomToolbar.plus.classList.toggle("disabled",this.currentZoom>=this.maxZoom),this.currentZoom>=this.maxZoom&&(this.zoomToolbar.plus.style.backgroundColor="")),this.zoomToolbar?.percentage&&(this.zoomToolbar.percentage.textContent=`${Math.round(100*this.currentZoom)}%`,this.zoomToolbar.percentage.title=`Zoom: ${Math.round(100*this.currentZoom)}%`),this.zoomToolbar?.reset&&this.zoomToolbar.reset.classList.toggle("disabled",1==this.currentZoom))}togglePanningIcon(){this.controlsToolbar&&this.currentZoom&&this.isControlToolbarVisible&&(this.isZoomed||this.controlMode!==i.Pan||this.changeControlMode(i.Select),this.controlsToolbar.pan?.classList.toggle("disabled",!this.isZoomed))}changeControlMode(t){if(this.isZoomed||t!==i.Pan){if(this.controlMode=t,this.controlsToolbar)switch(this.resetControlToolbar(),t){case i.Select:this.controlsToolbar.select.classList.toggle("selected",!0),this.controlsToolbar.select.style.backgroundColor=this.toolbarColors.selectedColor;break;case i.Pan:this.controlsToolbar.pan.classList.toggle("selected",!0),this.controlsToolbar.pan.style.backgroundColor=this.toolbarColors.selectedColor;break;case i.ZoomOnArea:this.controlsToolbar.zoomOnArea.classList.toggle("selected",!0),this.mapContainer.classList.add("zoom-on-area"),this.controlsToolbar.zoomOnArea.style.backgroundColor=this.toolbarColors.selectedColor}t!==i.ZoomOnArea&&this.mapContainer.classList.remove("zoom-on-area"),this.svgMap?.zoomer?.togglePanMode(t===i.Pan)}}resetZoomedArea(){this.zoomedArea&&(this.zoomedArea.element?.classList.remove("zoomed"),this.zoomedArea=null)}resetControlToolbar(){this.controlsToolbar&&Object.keys(this.controlsToolbar).forEach((t=>{"clear"!==t&&(this.controlsToolbar[t].classList.remove("selected"),this.controlsToolbar[t].style.backgroundColor="")}))}onIconEnter(t){t.classList.contains("selected")||t.classList.contains("disabled")||(t.style.backgroundColor=this.toolbarColors.selectedColor)}onIconLeave(t){t.classList.contains("selected")||(t.style.backgroundColor="")}scale(t){(0,s.vm6)(t,`scale(${1/this.viewportScale})`)}raiseError(t){this.errorBox&&this.errorBox.remove();const e=t.icon||"alert";(0,s.tTh)(".error",this.chartContainer,{middleware:t=>{this.errorBox=t}},[(0,s.tTh)(".message",[(0,s.tTh)(`.icon.icon-${e}`),(0,s.tTh)("span.title",`${t.title}`.trim()),(0,s.tTh)("span.description",t.description),...t.helpUrl?[(0,s.tTh)("a.learn-more",{events:{click:()=>thisVisual.host.launchUrl(t.helpUrl)}},"Learn more")]:[]])])}scanMap(){if(!this.settings)return;if(this.settings.drill?.categoryLevelMaps.value)return;if(!this.svgMap?.map)return;if(this.selectedMap.scanned)return;let t=!1;if(this.selectedMap.location!=C.k.Local){const e=this.settings.drill.autoFetchMode.value.value;"id"==e?t=!0:"auto"==e&&(t=(0,x.yl)(this.svgMap.map.getAttribute(u.Lc.AutoFetch)))}const e=t?`[${u.Lc.Matched}],[${u.Lc.GroupMatched}]`:`[${u.Lc.Matched}][${u.Lc.DrillTo}],[${u.Lc.GroupMatched}][${u.Lc.DrillTo}]`,n=this.svgMap.map.querySelectorAll(e);if(!n)return!0;const i=[];n.forEach((e=>{const n=e.getAttribute(u.Lc.Matched)||e.getAttribute(u.Lc.GroupMatched);if(!n)return;let r=e.getAttribute(u.Lc.DrillTo);!r&&t&&(r="string"==typeof t&&"id"!=t?e.getAttribute(t):(0,w.eJ)(e),r+=".svg"),r&&i.push({dataPointValue:n,drillToUrl:r,autoFetch:!!t})})),i.length&&(this.mapsManager.scanMapForChildren(i,this.selectedMap,this.drillPathId),this.saveInternalMaps(!0))}handleSelectChange(t){const e=t.target;this.selectMap(e.value)}selectMap(t){this.selectedMap.id!==t&&(this.settings.advanced.clearSelectionOnMapChange.value&&this.selectionManager.clear(),this.mapsManager.selectMap(t,this.drillPathId),this.saveInternalMaps())}async ensureMapContent(){if(!this.selectedMap)return!1;if(this.selectedMap.location==C.k.Local||this.selectedMap.jsvg?.svg)return!0;try{if(await this.mapsManager.refreshMap(this.selectedMap.id))return!0}catch(t){this.raiseError(t)}return!1}async processDialogResult(t){if(t){if(t.myStorageInfo&&(this.mapsManager.myStorage.updateInfo(t.myStorageInfo),t.saveMyStorageEditKey&&(this.saveMyStorageEditKey(t.saveMyStorageEditKey.internal?this.mapsManager.myStorage.info.editKey:null,!0),await(0,s.Fgm)(thisVisual.host.storageV2Service,A.rv,t.saveMyStorageEditKey.localStorage?this.mapsManager.myStorage.info.editKey:null)),t.myStorageInfo.encryptionKey&&this.saveMyStorageEncryptionKey(t.myStorageInfo.encryptionKey,!0)),t.fileExport){const{content:e,name:n,type:i,description:r}=t.fileExport;thisVisual.host.downloadService.exportVisualsContentExtended(e,n,i,r)}t.launch&&thisVisual.host.launchUrl(t.launch),t.removedMaps&&t.removedMaps.forEach((t=>{this.zoomStateManager.delete(t),this.zoomStateManager.delete(`${t}-designer`),this.settings.internal?.customLabels?.value?.[t]&&(delete this.settings.internal.customLabels.value[t],(0,m.zq)(this.settings,!0))})),t.state&&(this.mapsManager.state=t.state),t.unsavedJsvg&&this.showJsvgSaveRequest(t.unsavedJsvg)||t.state&&this.saveInternalMaps()}}saveInternalMaps(t=!1){thisVisual.internalUpdate=t,s.XI0.BATCH({objectName:"internal",properties:{maps:this.mapsManager.persistableState,update:Date.now().toString()},selector:null}),s.XI0.BATCH_SAVE(t)}saveMyStorageEditKey(t,e=!1){this.settings.myStorage.saveEditKey.value=!!t,this.settings.internal.msek.value=t,s.XI0.BATCH({objectName:"myStorage",properties:{saveEditKey:this.settings.myStorage.saveEditKey.value},selector:null}),s.XI0.BATCH({objectName:"internal",properties:{[A.rv]:t},selector:null}),e||s.XI0.BATCH_SAVE()}saveMyStorageEncryptionKey(t,e=!1){this.settings.myStorage.encryptionKey.value=t,s.XI0.BATCH({objectName:"myStorage",properties:{encryptionKey:t},selector:null}),e||s.XI0.BATCH_SAVE()}openDialog(t){const e={model:this.model,mapsManagerState:this.mapsManager.state,myStorageInfo:this.mapsManager.myStorage.info,drillPathId:this.drillPathId,autoPanMode:this.isAutoPanMode,viewType:t.viewType,viewState:t.viewState,canExport:!0,visualFeatures:globalThis.thisVisualFeatures,imageQuality:this.settings.advanced.imageQuality.value/100,...t.addOptions};thisVisual.host.openModalDialog(v.l.Id,{title:"",actionButtons:[],size:{width:960,height:600}},e).then((t=>{t?.resultState&&this.processDialogResult(t.resultState)})).catch((t=>{t.error&&3==t.error&&(0,s.ShP)()}))}async showJsvgSaveRequest(t){this.msgBox&&this.msgBox.destroy();const e={scale:this.viewportScale,element:this.chart,title:"Unsaved Map Changes",description:"You closed the editor without saving. Would you like to continue editing or discard changes?",size:{width:"370px",height:"150px"},buttons:[{text:"Continue Editing"},{text:"Discard Changes",action:"cancel"}]};return this.msgBox=new b.V(e),"cancel"!=(await this.msgBox.draw()).action&&(this.openDialog({viewType:"DialogAdd",viewState:y.L.EditUnsavedMap,addOptions:{unsavedJsvg:t}}),!0)}selectAreasBySelectionIds(t){if(this.svgMap?.clearSelection(),this.legend?.select(t),0===t.length)return void(this.controlsToolbar?.clear&&this.controlsToolbar.clear.classList.add("disabled"));const e=(t,n)=>{if(t.classList.contains("matched")&&this.svgMap.select(t,!0),(0,k.Md)(t))for(let i=0;i<t.children.length;i++){const r=t.children[i];e(r,n)}};t.forEach((t=>{const n=this.model.identityIndex[(0,h.zk)(t)];n&&this.svgMap.map.querySelectorAll(`[${u.Lc.Matched}="${(0,s.z4e)(n.id)}"]`).forEach((t=>e(t,n)))})),this.controlsToolbar?.clear&&this.controlsToolbar.clear.classList.remove("disabled");for(const t in this.svgMap.areaElements){const e=this.svgMap.areaElements[t];e.classList.contains("selected")||this.svgMap.select(e,!1)}}clearSelection(){this.selectionManager.hasSelection()&&(this.selectionManager.clear(),this.svgMap?.clearSelection(),this.controlsToolbar?.clear?.classList.add("disabled")),this.legend?.clearSelection()}handleAreaClick(t){if(this.isLabelDesignMode||this.svgMap.zoomer.panning==f.o.Panning)return;if(1==t.button)return;const e=t.target;if(this.controlMode===i.ZoomOnArea)return this.zoomedArea?.element&&this.zoomedArea.element.id===e.id?(this.svgMap?.zoomer?.resetZoom(),void this.resetZoomedArea()):(this.resetZoomedArea(),this.svgMap?.zoomer?.zoomOnArea(e,this.settings?.advanced?.zoomFit?.value),e.classList.add("zoomed"),void(this.zoomedArea={element:e}));const n="link"===e.getAttribute(u.Lc.AreaType)?e.getAttribute(u.Lc.LinkTo)??e.closest(`[${u.Lc.LinkTo}]`)?.getAttribute(u.Lc.LinkTo):null;if(n)return void thisVisual.host.launchUrl((0,T.mE)(n));const r=e.getAttribute(u.Lc.LinkToMap);if(r)return this.selectMap(r),void(this.mapSelectorDropdown.value=r);const o=this.getClickedAreaDataPoint(e);o?this.selectionManager.select(o.selectionId,t.ctrlKey||t.metaKey).then((t=>this.selectAreasBySelectionIds(t))):this.clearSelection()}handleAreaRightClick(t){const e=t.target,n=this.getClickedAreaDataPoint(e);this.selectionManager.showContextMenu(n?n.selectionId:{},{x:t.clientX,y:t.clientY}),t.preventDefault()}getClickedAreaDataPoint(t){let e=t;const n=[u.Lc.Matched];if(n.some((e=>t.hasAttribute(e)))||(e=e.closest(n.map((t=>`[${t}]`)).join(",")),e))return(0,h.JF)(e.getAttribute(u.Lc.Matched),this.model)}resizeLabelsContainer(){this.svgMap&&this.labelsContainer&&(this.labelsContainer.style.width=`${this.svgMap.scale.naturalSize.width}px`,this.labelsContainer.style.height=`${this.svgMap.scale.naturalSize.height}px`)}resizeLabels(){if(this.resizeLabelsContainer(),this.svgMap){const t=this.svgMap.scale;for(const e in this.labels)this.labels[e].updateScale(t)}}drawLabels(){if(!this.svgMap||!this.svgMap.map||this.svgMap.labelDisabled)return;this.jsPlumb=(0,P.UIf)({container:this.labelsContainer,elementsDraggable:!1,resizeObserver:!1}),this.jsPlumb.getOffset=g.Dc,this.resizeLabelsContainer();const t={mapScale:this.svgMap.scale,zoomFactor:this.currentZoom||1,isEditMode:this.isLabelDesignMode},e=[],n=this.settings.categoryLabels.show.value;n&&e.push("category");const i="custom"===this.settings.categoryLabels.matchedDisplayValue.value.value&&this.settings.categoryLabels.matchedCustomValue.value.includes("{value}"),r=n&&(i||this.settings.categoryLabels.includeDataLabel.value);if(this.settings.dataLabels.show.value&&this.model.fields[h.Xh.Value]&&!r&&e.push("data"),e.length){const n=this.svgMap.map.querySelectorAll(`[${u.Lc.Matched}]`);n?.forEach((n=>{const i=n.getAttribute(u.Lc.Matched);if(!i)return;if("true"==n.getAttribute(u.Lc.NoLabel))return;const r=(0,h.JF)(i,this.model);r&&e.forEach((e=>this.drawMatchedLabel(n,{...t,type:e},r)))}))}if(this.settings.categoryLabels.show.value&&this.settings.categoryLabels.showUnmatched.value){const e=this.svgMap.map.querySelectorAll(".unmatched");e?.forEach((e=>{"true"!=e.getAttribute(u.Lc.NoLabel)&&this.drawUnmatchedLabel(e,{...t,type:"category"})}))}}drawMatchedLabel(t,e,n){if("category"===e.type){const i=this.settings.categoryLabels.matchedDisplayValue.value.value;if("id"===i)e.text=(0,w.eJ)(t);else if("dataPoint"==i)e.text=n.label;else if("dataPoint2"==i)e.text=n.label2||n.label;else if("custom"==i){if(e.text=(0,s.SN4)(this.settings.categoryLabels.matchedCustomValue,n.dataIndex),e.text?.match(/{.+?}/)){const i=this.selectedMap.jsvg.dataMapping.areas[t.id];e.customFields={id:(0,w.eJ)(t),title:i?.label,category:n.label,path:n.label2||n.label,value:(0,h.yk)(n)}}}else{const r=this.selectedMap.jsvg.dataMapping.areas[t.id];"title"===i?e.text=r?.label:"auto"===i&&(e.text=n.label||r?.label||(0,w.eJ)(t))}if(this.settings.categoryLabels.includeDataLabel.value&&!e.text.includes("{value}")&&(e.text=`${e.text??""} {value}`.trim(),e.customFields||(e.customFields={value:(0,h.yk)(n)})),!e.text)return}this.drawLabel(t,e,n)}drawUnmatchedLabel(t,e){const n=this.settings.categoryLabels.unmatchedDisplayValue.value.value;if("id"===n)e.text=(0,w.eJ)(t);else{const i=this.selectedMap.jsvg.dataMapping.areas[t.id];"title"===n?e.text=i?.label:"auto"===n&&(e.text=i?.label||(0,w.eJ)(t))}e.text&&this.drawLabel(t,e)}drawLabel(t,e,n){let i=this.settings.appearance.keepAspectRatio.value?this.selectedMap.jsvg.rects?.[t.id]:null;i||(i=t.getBBox());const r=this.settings.advanced.maxLabels.value;if(r&&Object.keys(this.labels).length>=r)return;const o=new g.JU(this.labelsContainer,i,t,this.jsPlumb,this.settings,e,this.selectedMap.id,n);o.draw(),o.isRendered&&(this.labels[o.id]=o)}destroy(){this.chart&&this.chart.remove(),this.svgMap&&this.svgMap.destroy(),this.svgMap=null,this.jsPlumb&&this.jsPlumb.destroy(),this.labelDesigner&&this.labelDesigner.destroy(),this.legend&&this.legend.destroy(),this.labels={},this.model=null,this.settings=null,this.tooltipServiceWrapper=null,this.selectionManager=null,this.ColorRulesEnumerator=null,this.editor=null,this.zoomStateManager=null,this.chart=null,this.chartContainer=null,this.loadingEl=null,this.errorBox=null,this.labelsContainer=null,this.controlsToolbar=null,this.selectionToolbar=null,this.zoomToolbar=null,this.mapSelectorDropdown=null,this.tooltipServiceWrapper=null,this.destroyed=!0}}},15436:(t,e,n)=>{"use strict";n.d(e,{$D:()=>a,$f:()=>s,Ay:()=>r,B5:()=>i,YE:()=>o,hu:()=>c,tl:()=>l});const i=41943040,r=20971520,o=20971520,a=10485760,s=100,l={website:"https://okviz.com",docsGetStarted:"https://docs.okviz.com/visuals/synoptic-panel/get-started",docsMapEditor:"https://docs.okviz.com/visuals/synoptic-panel/features/map-editor",docsMapManager:"https://docs.okviz.com/visuals/synoptic-panel/features/map-manager",docsImportingMaps:"https://docs.okviz.com/visuals/synoptic-panel/features/importing",docsDrillMode:"https://docs.okviz.com/visuals/synoptic-panel/features/drill-mode#how-to-use-drill-mode",docsFileSize:"https://docs.okviz.com/visuals/synoptic-panel/concepts/best-practices#max-file-size",docsMapSelector:"https://docs.okviz.com/visuals/synoptic-panel/features/filtering-maps#map-selector",docsMyStorageSecurity:"https://docs.okviz.com/visuals/synoptic-panel/security/my-storage",docsMyStorageEncryptionKey:"https://docs.okviz.com/visuals/synoptic-panel/options/my-storage/keys#encryption-key",docsMyStorageConflicts:"https://docs.okviz.com/visuals/synoptic-panel/synoptic-panel/features/my-storage#conflicts",docsMyStorageTerms:"https://docs.okviz.com/visuals/synoptic-panel/legal/my-storage-tos",docsMyStorageTermsEmbed:"https://docs.okviz.com/visuals/synoptic-panel/legal/my-storage-tos-embed"},c="By using My Storage, you agree that the Service is provided “as is” without any warranties, and that you bear all risks associated with uploading and storing your content. We are not liable for any loss of your Maps or other data, and you agree not to seek compensation or take legal action against us in the event of such loss.\n\nYou are solely responsible for maintaining the security of your Edit Key, map-level edit passwords, and encryption keys. If you lose your encryption key, we cannot restore or decrypt your Maps. By accepting these short Terms of Service, you declare that you have read, understood, and agree to the full Terms of Service as provided in the link below."},31750:(t,e,n)=>{"use strict";n.d(e,{A:()=>C,L:()=>i});var i,r=n(23361),o=n(36388),a=n(81807),s=n(52023),l=n(85954),c=n(3545),u=n(42007),h=n(9814),d=n(10246),p=n(94855),f=n(80745),g=n(61455),m=n(96826),v=n(92421),y=n(298),b=n(84652),w=n(55888),S=n(78698),x=n(72210),k=n(15436);!function(t){t[t.Default=0]="Default",t[t.AddLocalMap=1]="AddLocalMap",t[t.AddRemoteMap=2]="AddRemoteMap",t[t.AddMyStorageMap=3]="AddMyStorageMap",t[t.MyStorage=4]="MyStorage",t[t.ImportUrls=5]="ImportUrls",t[t.EditUnsavedMap=6]="EditUnsavedMap"}(i||(i={}));class C extends o._{svgPreviewer;msgBox;sortableList;dropzone;selectedMap;topBar;listContainer;addMapContainer;mapsList;dropArea;selectedMapContainer;footerBar;removeAllButton;removedMaps=[];closeButton;split;warningLocalMapsSize;constructor(t,e){super(t,e),this.mapsManager.ensureMapsOrder(this.drillPathId),this.mapsManager.on("mapAdded",(t=>this.addMapToUIList(t))),this.selectedMap=this.mapsManager.getSelectedMap(this.drillPathId)}get displayMaps(){return this.mapsManager.getDisplayMaps(this.drillPathId)}get maps(){return this.mapsManager.getMaps(this.drillPathId)}draw(){this.initViewContent(),this.applyState(),this.checkWarningLocalMapLimit()}async applyState(){switch(this.options.viewState){case i.AddLocalMap:this.options.jsvgsToSave&&(this.addLocalMaps(this.options.jsvgsToSave),this.options.jsvgsToSave=null);break;case i.AddRemoteMap:this.showAddRemoteMapMsgBox();break;case i.MyStorage:case i.AddMyStorageMap:this.connectMyStorage();break;case i.ImportUrls:this.options.importURLs&&(this.addRemoteMapsFromJson(this.options.importURLs),this.options.importURLs=null);break;case i.EditUnsavedMap:this.options.unsavedJsvg&&(this.selectMapUIElement(this.options.unsavedJsvg.jsvg.id),this.options.unsavedJsvg.location==b.k.MyStorage&&await this.connectMyStorage(!1),this.editMap(this.selectedMap,this.options.unsavedJsvg))}}async connectMyStorage(t=!0,e=0){try{if(this.mapsManager?.myStorage){if(this.showLoading(),!await this.mapsManager.myStorage.connect()){if(e<5)return await(0,a.ukR)(1e3),this.connectMyStorage(t,e+1);throw(0,x.T)("MS_NOT_CONNECTED")}if(this.mapsManager.myStorage.info.isActive){let e=!0;this.mapsManager.myStorage.info.isSetup||"ok"!==(await this.showMyStorageSetup()).action&&(e=!1),t&&e&&await this.showMyStorageAddMap()}if(this.setResult(),!this.mapsManager.myStorage.info.isActive)throw(0,x.T)("MS_INACTIVE");this.removeLoading()}}catch(t){this.raiseError(t),this.removeLoading()}}setResult(){this.result.removedMaps=this.removedMaps,this.parent.setDialogResult(),this.checkWarningLocalMapLimit(),this.changeCloseButtonToDone()}changeCloseButtonToDone(){this.closeButton&&(this.closeButton.querySelector(".close").classList.remove("white","border"),this.closeButton.querySelector(".text").textContent="Done")}initViewContent(){this.options.viewState===i.MyStorage?this.drawAccessMyStorageBtn():(this.viewContainer.classList.add("user-select-none","flex","column"),this.topBar&&this.topBar.remove(),(0,a.tTh)(".header-bar",this.viewContainer,{middleware:t=>this.topBar=t}),this.drawDrillPathTitle(),this.displayMaps.length?(this.drawUI(),this.addAllMapsToUIList()):this.drawAddMapButton())}drawUI(){this.footerBar||(this.addMapContainer&&this.addMapContainer.remove(),(0,a.tTh)(".subset-add-map.editor-panes",this.viewContainer,{middleware:t=>this.addMapContainer=t},[(0,a.tTh)(".subset-maps.pane",[(0,a.tTh)(".file-list",{middleware:t=>this.dropArea=t},[(0,a.tTh)(".list-box.drop",[(0,a.tTh)(".list-container",{middleware:t=>this.listContainer=t},[(0,a.tTh)(".subset-map",[(0,a.tTh)("ul.map-list",{middleware:t=>this.mapsList=t})])])]),(0,a.tTh)(".button-box",[(0,a.tTh)(".icon.icon-delete.ctrl",{middleware:t=>this.removeAllButton=t,attr:{title:"Remove all maps"},events:{click:(t,e)=>{e.hasAttribute("disabled")||this.showRemoveAllMapsMsgBox()}}}),(0,a.tTh)(".synoptic-btn.end.ctrl",{events:{click:t=>this.showAddMapContextMenu(t)}},[(0,a.tTh)(".group.small",[(0,a.tTh)(".icon.icon-plus.small"),(0,a.tTh)("span.text.small","Add")])])])])]),(0,a.tTh)(".panes-gutter"),(0,a.tTh)(".selected-map-preview.pane",{middleware:t=>this.selectedMapContainer=t})]),(0,a.tTh)(".footer-bar",this.viewContainer,{middleware:t=>this.footerBar=t},[(0,a.tTh)(".learn-more",{events:{click:()=>this.parent.launchUrl(k.tl.docsMapEditor)}},"Learn more on Map Editor"),(0,a.tTh)(".synoptic-btn.end.ctrl",{middleware:t=>this.closeButton=t,events:{click:()=>this.parent.closeDialog()}},[(0,a.tTh)(".close.group.small.white.border",[(0,a.tTh)("span.text.small","Close")])])]),this.initSplit(),this.initSortableList(),this.initDropZone(this.dropArea),this.initPreviewer(),this.addListenerOnList())}initSplit(){this.split&&this.split.destroy(),this.split=(0,w.A)({columnGutters:[{track:1,element:this.addMapContainer.querySelector(".panes-gutter")}],columnMinSize:200})}initPreviewer(){this.svgPreviewer&&this.svgPreviewer.destroy(),this.svgPreviewer=new r.s({previewContainer:this.selectedMapContainer}),this.svgPreviewer.on("editMap",(()=>this.editMap(this.selectedMap))),this.svgPreviewer.on("refreshMap",(()=>this.refreshMap())),this.svgPreviewer.on("launchUrl",(t=>this.parent.launchUrl(t)))}drawAddMapButton(){this.addMapContainer&&this.addMapContainer.remove(),this.footerBar&&(this.footerBar.remove(),this.footerBar=null),(0,a.tTh)(".subset-add-map.empty",this.viewContainer,{middleware:t=>this.addMapContainer=t},[(0,a.tTh)(".no-subs-maps",[(0,a.tTh)(".placeholder","No map set at this level"),(0,a.tTh)(".synoptic-btn.add-map-btn",{events:{click:t=>this.showAddMapContextMenu(t)}},[(0,a.tTh)(".group",[(0,a.tTh)(".icon.icon-plus.small"),(0,a.tTh)("span.text.small","Add Map")])])])]),this.initDropZone(this.addMapContainer)}drawAccessMyStorageBtn(){(0,a.tTh)(".subset-add-map.empty",this.viewContainer,{middleware:t=>this.addMapContainer=t},[(0,a.tTh)(".no-subs-maps",[(0,a.tTh)(".placeholder","Access My Storage to manage your maps"),(0,a.tTh)(".synoptic-btn.add-map-btn",{events:{click:t=>this.connectMyStorage()}},[(0,a.tTh)(".group",[(0,a.tTh)(".icon.icon-okviz-storage.small"),(0,a.tTh)("span.text.small","My Storage")])])])])}showAddMapContextMenu(t){a.tzH.Init("add-map-context-menu",{sticky:t.currentTarget,width:"auto",items:[{label:"Local Map",icon:"folder",onClick:()=>this.dropzone.handleBrowse()},{label:"Remote Map",enabled:this.options.visualFeatures.remoteMaps,icon:"world",onClick:()=>this.showAddRemoteMapMsgBox()},{label:"My Storage Map",enabled:this.options.visualFeatures.myStorageMaps,icon:"okviz-storage",onClick:()=>this.connectMyStorage()},{type:a.KGh.Separator},{label:"Import URLs",icon:"upload",enabled:this.options.visualFeatures.remoteMaps,onClick:()=>this.importUrls()}]}).show(t)}drawDrillPathTitle(){const t=(0,a.tTh)(".subset-title",this.topBar,[(0,a.tTh)(".icon.icon-branch.big")]),e=(0,v.xv)(this.drillPathId);e.forEach(((n,i)=>{const r=(0,a.tTh)("span.level",n);if(t.appendChild(r),i<e.length-1){const e=(0,a.tTh)(".icon.icon-right.small");t.appendChild(e)}})),t.setAttribute("title",`Drill Path: ${(0,v.pT)(e)}`)}checkWarningLocalMapLimit(){if(this.options.viewState===i.MyStorage)return;this.warningLocalMapsSize&&this.warningLocalMapsSize.remove();const t=this.mapsManager.getMemorySize(b.k.Local);if(t>.8*k.Ay){const e=t>k.Ay;(0,a.tTh)(".banner.end"+(e?".error":".warning"),this.topBar,{middleware:t=>this.warningLocalMapsSize=t},[(0,a.tTh)(".icon.icon"+(e?"-error":"-alert")),(0,a.tTh)("span",`You ${e?"have reached":"are reaching"} the size limit (${(0,m.v7)(k.Ay)}) for local maps. Use remote or My Storage maps to free space.`)])}}initDropZone(t){this.dropzone&&this.dropzone.destroy(),this.dropzone=new s.g({container:t,multiple:!0,accept:l.k$}),this.dropzone.on("file",(()=>{this.dropzone.files?.length&&this.addLocalMaps(this.dropzone.files)})),this.dropzone.on("error",(t=>this.raiseError(t)))}async importUrls(){const t=await s.g.browseFiles(["application/json"]);t&&t.length&&this.addRemoteMapsFromJson(t[0])}initSortableList(){this.sortableList&&this.sortableList.destroy(),this.sortableList=new d.Ay(this.mapsList,{direction:"vertical",animation:150,handle:".order",dataIdAttr:l.Lc.JsvgId,ghostClass:"ghost",dragClass:"dragging",filter:".remove.location.map-title",onEnd:t=>{t.stopPropagation(),this.mapsManager.updateMapsOrder(this.sortableList.toArray(),this.drillPathId),this.setResult()}})}addListenerOnList(){this.listContainer.addLiveEventListener("click",".context-menu",((t,e)=>{this.showMapContextMenu(t,e.closest("li").getAttribute(l.Lc.JsvgId))})),this.listContainer.addLiveEventListener("click",".selectable",(t=>{const e=t.target;e.classList.contains("context-menu")||this.selectMapUIElement(e)}))}addAllMapsToUIList(){const t=this.displayMaps;t.forEach(((e,n)=>this.addMapToUIList(e,this.selectedMap?.id===e.id,n===t.length-1)))}addMapToUIList(t,e=!1,n=!0){this.drawUI();const i=t.location===b.k.Local?"icon-map":t.location===b.k.MyStorage?"icon-okviz-map":"icon-remote-map",r=t.location===b.k.Local?"Local":t.location===b.k.MyStorage?"My Storage":"Remote",o=(0,a.tTh)("li.map-file.selectable"+(t.parentMapId?".auto-map":""),this.mapsList,{middleware:e=>{e.setAttribute(l.Lc.JsvgId,t.id)}},[(0,a.tTh)(".start.selectable",[(0,a.tTh)("span.order.icon.icon-sort"),(0,a.tTh)(`span.location.icon.${i}.big`,{attr:{title:`Map location: ${r}`}}),(0,a.tTh)("span.map-title.selectable",{attr:{title:t.name}},(0,m.xx)(t.name,30))])]),s=(0,a.tTh)(".end",o);(0,a.tTh)("span.icon.icon-ellipsis.context-menu.ctrl",s),(e||n&&!this.selectedMap)&&this.selectMapUIElement(o),n&&this.updateRemoveAllButtonState()}showMapContextMenu(t,e){const n=this.mapsManager.findMapById(e);if(!n)return;const i=n.map.parentMapId?"This map cannot be deleted because it has been added by another map.":(0,v.b4)(n.drillPathId)?"This map cannot be deleted from here because it is available on multiple drill paths. Use the Map Manager to delete it.":null,r=n.map.location===b.k.Local;a.tzH.Init("map-context-menu",{width:i?230:"auto",sticky:!0,items:[{label:"Edit",icon:"edit",className:"small-text-contextual-menu-item",onClick:()=>this.editMap(n.map)},{label:"Rename",icon:"rename",className:"small-text-contextual-menu-item",onClick:()=>this.showRenameMapMsgBox(n.map)},{label:"Replace",icon:"open-folder",className:"small-text-contextual-menu-item",enabled:r,onClick:()=>this.replaceLocalMap(n.map)},{type:a.KGh.Separator},{label:"Remove",icon:"delete",className:"small-text-contextual-menu-item",enabled:!i,onClick:()=>{this.showRemoveMapMsgBox(n.map)}},...i?[{type:a.KGh.Hint,label:i}]:[]]}).show(t)}async replaceLocalMap(t){const e=await s.g.browseFiles(l.k$);if(!e.length)return;const n=await this.mapsManager.jsvgGenerator.createFromFile(e[0],t.name,t.id,t.jsvg);n&&(this.mapsManager.updateMap(n,t.id,this.drillPathId),this.setResult(),this.handlePreview())}updateMapInList(t){const e=this.listContainer.querySelector(`[${l.Lc.JsvgId}="${(0,a.z4e)(t.id)}"]`);if(e){const n=e.querySelector(".map-title");n.textContent=t.name,n.setAttribute("title",t.name)}}selectMapUIElement(t){if(!t)return;let e,n;if(t instanceof HTMLElement){if(t===this.listContainer)return;if(e="li"!==t.nodeName.toLowerCase()?t.closest("li"):t,e.classList.contains("selected"))return;if(n=e.getAttribute(l.Lc.JsvgId),!n)return}else n=t,e=this.listContainer.querySelector(`[${l.Lc.JsvgId}="${(0,a.z4e)(n)}"]`);this.selectMap(n),this.listContainer.querySelectorAll("li").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),this.handlePreview()}selectMap(t){this.selectedMap=this.mapsManager.findMapById(t)?.map,this.mapsManager.freeMemory()}async handlePreview(t=!0){if(this.svgPreviewer.destroyMap(),!this.selectedMap)return;const e=this.selectedMap.location===b.k.Local,n=this.selectedMap.id;if(this.svgPreviewer.showInfo(this.selectedMap,e),this.selectedMap.location===b.k.Local)this.svgPreviewer.show(this.selectedMap.jsvg);else{this.svgPreviewer.loading(),t||await(0,a.ukR)(500);try{if(await this.ensureMapContent(this.selectedMap),n!==this.selectedMap.id)return;this.svgPreviewer.showInfo(this.selectedMap,e),this.svgPreviewer.show(this.selectedMap.jsvg),this.svgPreviewer.endLoading()}catch(t){if(n!==this.selectedMap.id)return;this.svgPreviewer.endLoading(),this.svgPreviewer.raiseError(t)}}}refreshMap(){this.selectedMap&&(this.mapsManager.removeMapContent(this.selectedMap,!1),this.handlePreview(!1))}async ensureMapContent(t){return!!t&&(!(t.location!==b.k.Local&&!t.jsvg?.svg)||!!await this.mapsManager.refreshMap(t.id)&&(this.setResult(),!0))}renameMap(t,e){e&&t&&e!==t.name&&this.mapsManager.renameMap(e,t.id)&&(this.svgPreviewer.updateMapName(e),this.updateMapInList(t),this.setResult())}removeAllMaps(){const t=this.maps.filter((t=>!t.parentMapId));for(let e=0;e<t.length;e++)this.removeMap(t[e],e===t.length-1)}removeMap(t,e=!0){if(!t)return;const n=this.selectedMap?.id===t.id;n&&(this.svgPreviewer.destroyMap(),this.selectedMap=null);const i=this.listContainer.querySelector(`[${l.Lc.JsvgId}="${(0,a.z4e)(t.id)}"]`);i&&i.remove(),n&&e&&this.selectMapUIElement(this.listContainer.querySelector("li")),this.mapsManager.removeMap(t.id),this.removedMaps.push(t.id),e&&(this.setResult(),this.displayMaps.length?this.updateRemoveAllButtonState():this.drawAddMapButton())}updateRemoveAllButtonState(){!this.maps.length||this.maps.every((t=>t.parentMapId))?this.removeAllButton.setAttribute("disabled",""):this.removeAllButton.removeAttribute("disabled")}async editMap(t,e){try{if(this.showLoading(),!t)return;if(t.location!==b.k.Local&&!await this.ensureMapContent(t))return;this.parent.editMap(t,this.options.viewType,e)}catch(t){this.raiseError(t)}finally{this.removeLoading()}}async addLocalMaps(t){const e=async(t,e)=>{const n=await this.mapsManager.jsvgGenerator.createFromFile(t,e.name,e.id,e.jsvg);return await this.mapsManager.updateMap(n,e.id,this.drillPathId)},n=async t=>(await this.mapsManager.addLocalMaps([t],this.drillPathId))[0];(0,g.KN)();try{let i=null,r=!1,o=!1;if(t[0]instanceof File)for(let a=0;a<t.length;a++){const s=t[a];(0,g.Uu)(s.name,[a+1,t.length]);const l=this.mapsManager.findMap((t=>t.location===b.k.Local&&t.name.toLowerCase()===(0,m.T3)(s.name).toLowerCase()),this.drillPathId);if(l){if(r){const t=await e(s,l.map);0===a&&(i=t);continue}if(!o){(0,g.jj)("hide");const c=await this.showReplaceMapMsgBox(l.map.name);if("cancel"===c.action)break;if("replace"===c.action||"replaceAll"===c.action){r="replaceAll"===c.action,(0,g.Uu)(s.name,[a+1,t.length]);const n=await e(s,l.map);0===a&&(i=n);continue}if("keepBoth"===c.action||"keepAll"===c.action){o="keepAll"===c.action,(0,g.Uu)(s.name,[a+1,t.length]);const e=await n(s);0===a&&(i=e);continue}}}if(o||!l){(0,g.Uu)(s.name,[a+1,t.length]);const e=await n(s);0===a&&(i=e)}}else for(let e=0;e<t.length;e++){const r=t[e];(0,g.Uu)(r.name,[e+1,t.length]);const o=await n(r);0===e&&(i=o)}i&&this.selectMapUIElement(i.id),this.setResult()}catch(t){this.raiseError(t)}finally{this.dropzone?.removeFiles(),(0,g.hy)()}}async addRemoteMap(t){this.showLoading();try{const e=await this.mapsManager.addRemoteMaps([t],this.drillPathId);this.selectMapUIElement(e[0].id),this.setResult()}catch(t){this.raiseError(t)}this.removeLoading()}async addRemoteMapsFromJson(t){this.showLoading();try{const e=await this.mapsManager.addRemoteMapsFromJson(t,this.drillPathId);this.selectMapUIElement(e.addedToDefaultDrillPath[0].id),this.setResult(),this.showSuccessfulImportUrlsMsgBox(e.discarded)}catch(t){this.raiseError(t)}this.removeLoading()}addMyStorageMaps(t){this.showLoading();const e=this.mapsManager.addMyStorageMaps(t,this.drillPathId);this.selectMapUIElement(e[0].id),this.setResult(),this.removeLoading()}showRemoveMapMsgBox(t){const e={element:this.viewContainer,icon:"delete",title:"Remove Map",description:`Are you sure you want to remove "${t.name}"?`,buttons:[{text:"Remove",callback:()=>this.removeMap(t)},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new p.V(e),this.msgBox.draw()}showRemoveAllMapsMsgBox(){const t={element:this.viewContainer,title:"Remove All Maps",description:"Are you sure you want to remove all maps from the current drill path?\n            \n            Note that remote maps added by another map or on a virtual drill path cannot be removed from here.",buttons:[{text:"Remove All",callback:()=>this.removeAllMaps()},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new p.V(t),this.msgBox.draw()}showSuccessfulImportUrlsMsgBox(t){const e=t.length>0,n=t.length>1,i={element:this.viewContainer,title:"Import URL Maps",description:"Remote maps import complete. "+(e?`The following URL${n?"s are":"is"} invalid and won't be added:`:"All maps have been added."),buttons:[{text:"Ok"}]};if(e){const e=(0,a.tTh)("ul");t.forEach((t=>e.appendChild((0,a.tTh)("li",t))));const n=(0,a.tTh)(".invalid-urls",[e]);i.content=n,i.boxContentClasses=["no-margins","overflow-y"]}this.msgBox&&this.msgBox.destroy(),this.msgBox=new p.V(i),this.msgBox.draw()}setupMyStorage(t){if(!t)return!1;const e={storageName:t.storageName};return t.encryptionKey&&this.mapsManager.myStorage.updateInfo({encryptionKey:t.encryptionKey}),this.mapsManager.myStorage.setup(e)}async showMyStorageSetup(){const t={...this.mapsManager.myStorage.info,element:this.options.container,buttons:[{text:"Accept Terms and Complete",disabled:!0,validationCallback:async t=>({valid:await this.setupMyStorage(t)})}]};return this.msgBox&&this.msgBox.destroy(),this.msgBox=new u.b(t),await this.msgBox.draw()}async showMyStorageAddMap(){const t=await this.mapsManager.myStorage.listMaps(),e={currentDrillpathMapIds:this.maps.filter((t=>t.location==b.k.MyStorage)).map((t=>t.id)),mapsManager:this.mapsManager,mapList:t,element:this.options.container,parent:this.parent,onlyBrowse:this.options.viewState===i.MyStorage,buttons:[{text:"Export URLs",id:c.iP,action:"cancel",callback:t=>this.exportMyStorageURLs(t)},{text:"Add selected",id:c.E0,callback:t=>this.addMyStorageMaps(t)}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new c.bN(e),await this.msgBox.draw()}exportMyStorageURLs(t){const e=t.map((t=>this.mapsManager.myStorage.getMapUrl(t.id,t.name)));this.parent.exportFile({name:`${this.mapsManager.myStorage.info.displayName}.csv`,type:"csv",content:["URL",...e].join("\n"),description:"URLs export for My Storage maps"})}showAddRemoteMapMsgBox(){const t={element:this.options.container,title:"Remote Map URL",description:"Insert the remote map URL.",placeholder:"https://",showValidationError:!0,buttons:[{text:"Ok",callback:t=>this.addRemoteMap(t),validationCallback:t=>(0,y.Gz)(t)?this.mapsManager.doesMapHaveProperty("url",t,this.drillPathId)?{valid:!1,message:"The URL already exists at this level."}:{valid:!0}:{valid:!1,message:"The URL is invalid."}},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new h.J(t),this.msgBox.draw()}showRenameMapMsgBox(t){if(this.msgBox&&this.msgBox.destroy(),!t)return;const e=t.name,n={element:this.options.container,icon:"rename",title:"Rename Map",description:`Insert a new name for "${e}".`,value:e,placeholder:"Map name",showValidationError:!0,buttons:[{text:"Rename",callback:e=>this.renameMap(t,e),validationCallback:e=>(e=>""===e?{valid:!1,message:"The new name cannot be empty."}:e===t.name?{valid:!1,message:"The new name must be different from the current name."}:(0,S._C)(e)?(0,S.w8)(e)?{valid:!0}:{valid:!1,message:S.NX}:{valid:!1,message:S.l0})(e)},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new h.J(n),this.msgBox.draw()}showReplaceMapMsgBox(t){const e={element:this.options.container,mapName:t};return this.msgBox&&this.msgBox.destroy(),this.msgBox=new f.J(e),this.msgBox.draw()}destroy(){this.svgPreviewer&&this.svgPreviewer.destroy(),this.eventsAbortController.abort(),this.viewContainer&&this.viewContainer.remove(),this.options.map=null,this.options.file=null,this.sortableList.destroy(),this.dropzone.destroy(),super.destroy()}}},22209:(t,e,n)=>{"use strict";n.d(e,{Pv:()=>T,iw:()=>o,lH:()=>i,yD:()=>r});var i,r,o,a=n(37469),s=n(36388),l=n(94855),c=n(20860),u=n(81807),h=n(85954),d=n(63068),p=n(78072),f=n(62100),g=n(46449),m=n(96826),v=n(85209),y=n(78698),b=n(84652),w=n(73244),S=n(55888),x=n(9788),k=n(87006),C=n(72210),M=n(61455);!function(t){t[t.Default=0]="Default",t[t.Matching=2]="Matching"}(i||(i={})),function(t){t.General="general-area",t.DrillTo="drill-to"}(r||(r={})),function(t){t.Empty="(None)",t.Unbound="okviz-unbound",t.Auto="okviz-auto-bind"}(o||(o={}));class T extends s._{minZoom=1;maxZoom=100;controlMode=v.Z.Select;jsvg;userModified=!1;mapLocation;msgBox;currentZoom=1;topBar;footerBar;zoomToolbar={};controlsToolbar={};mapSelectorDropdown;svgMap;navTree;navTreeContainer;areaInfo;dataPointSelector;autoOption;unboundOption;saveBtn;saveAndCloseBtn;inputLabelSelectedArea;colorMode=i.Matching;editorContainer;previewContainer;mapContainer;editMapELementArea;noSelectionPlaceholder;menu;typeSelector;tabs;selectedJsvgArea;bindingSection;sectionContainer;get isZoomed(){return this.currentZoom&&this.currentZoom>this.minZoom}get isAutoPanMode(){return this.options.autoPanMode}get displayMaps(){return this.mapsManager.getDisplayMaps(this.drillPathId)}draw(){this.initViewContent(),this.initMap(),this.addMapSelector()}initViewContent(){this.viewContainer.classList.add("flex","column"),this.drawTopBar(),this.drawMainContent(),this.drawFooterBar(),this.drawSvgEditorButton(),this.drawToolBar()}drawTopBar(){(0,u.tTh)(".header-bar",this.viewContainer,{middleware:t=>{this.topBar=t}});const t=this.options.map,e=(0,u.tTh)(".start",this.topBar);(0,u.tTh)(".synoptic-btn.white.border",e,{events:{click:t=>{t.preventDefault(),this.userModified?this.showMsgBoxSaveChanges((()=>this.goBackToAddView())):this.goBackToAddView()}}},[(0,u.tTh)(".group.white.small.border.ctrl",[(0,u.tTh)(".icon.icon-left.small"),(0,u.tTh)("span.text.small","Maps")])]);const n=t.location===b.k.Local?".icon-map":t.location===b.k.MyStorage?".icon-okviz-map":".icon-remote-map";(0,u.tTh)(".map-title-container",e,[(0,u.tTh)(`.icon${n}.big`),(0,u.tTh)(".title",t.name)]);const i=(0,u.tTh)(".end",this.topBar);(0,u.tTh)(".synoptic-btn.white.ctrl",i,{events:{click:t=>{t.preventDefault(),this.showMsgBoxEditMeta()}}},[(0,u.tTh)(".group.white.small.border",[(0,u.tTh)(".icon.icon-edit.small"),(0,u.tTh)("span.text.small","Metadata")])]),(0,u.tTh)(".synoptic-btn.white.ctrl",i,{events:{click:t=>{t.preventDefault(),this.showExportContextMenu(t)}}},[(0,u.tTh)(".group.white.small.border",[(0,u.tTh)(".icon.icon-download.small"),(0,u.tTh)("span.text.small","Export")])])}showExportContextMenu(t){u.tzH.Init("export-context-menu",{sticky:t.currentTarget,items:[{label:"Export to",type:u.KGh.Header},{label:"Map (XML/SVG)",checkable:!1,className:"small-text-contextual-menu-item",onClick:()=>this.exportSvg()},{label:"Map with Binding (JSON)",checkable:!1,className:"small-text-contextual-menu-item",onClick:()=>this.exportJsvg()}]}).show(t)}drawMainContent(){this.editorContainer=(0,u.tTh)(".edit-map-container.editor-panes",this.viewContainer,[(0,u.tTh)(".edit-map-preview.pane",{middleware:t=>this.previewContainer=t},[(0,u.tTh)(".preview-container",[(0,u.tTh)(".edit-svg-container.zoomable.center.highlight-on-hover",{middleware:t=>this.mapContainer=t})])]),(0,u.tTh)(".panes-gutter"),(0,u.tTh)(".edit-map-elements.pane",[(0,u.tTh)(".user-select-map-elements.svg-tree-container",{middleware:t=>this.navTreeContainer=t}),(0,u.tTh)(".user-edit-map-elements.edit-map-element-area",{middleware:t=>this.editMapELementArea=t})])]),this.showNoSelectionPlaceholder(),(0,S.A)({columnGutters:[{track:1,element:this.editorContainer.querySelector(".panes-gutter")}],columnMinSize:200})}createAreaInfo(){if(!this.selectedJsvgArea)return;this.noSelectionPlaceholder&&this.noSelectionPlaceholder.remove(),this.areaInfo&&this.areaInfo.remove();const t=this.selectedJsvgArea.type??h.wR.Area,e=this.svgMap.selectedNode.mapElement.tagName.toLowerCase();(0,u.tTh)(".edit-element-container",this.editMapELementArea,{middleware:t=>this.areaInfo=t},[(0,u.tTh)(".element-info",[(0,u.tTh)(`.${this.getAreaIcon(e)}.icon`,{style:{fontWeight:"600 !important"},attr:{title:"g"===e?"group":e}}),(0,u.tTh)(".id",(0,y.eJ)(this.svgMap.selectedNode.mapElement)),(0,u.tTh)("select.type-selector",{middleware:t=>this.typeSelector=t,events:{change:t=>{this.selectedJsvgArea.type=t.target.value,this.selectedJsvgArea.type!==h.wR.Area&&this.svgMap.selectedNode.mapElement.setAttribute(h.Lc.AreaType,this.selectedJsvgArea.type),this.change(),this.svgMap.updateSelectedArea(),this.navTree.updateSelectedNode(),this.createSection()}}},[(0,u.tTh)("option",{attr:{value:h.wR.Area,selected:t===h.wR.Area}},"Area"),(0,u.tTh)("option",{attr:{value:h.wR.Link,selected:t===h.wR.Link}},"Link")])])]),this.createSection()}getAreaIcon(t){const e="icon-svg-";return t?"g"===t?e+"group":["circle","ellipse","line","path","polygon","polyline","rect","text"].includes(t)?e+t:e+"path":e+"path"}createSection(){this.tabs&&this.tabs.destroy(),this.menu&&this.menu.remove(),(0,u.tTh)(".section-menu",this.areaInfo,{middleware:t=>this.menu=t}),this.sectionContainer&&this.sectionContainer.remove(),(0,u.tTh)(".section-container",this.areaInfo,{middleware:t=>this.sectionContainer=t});const t=this.selectedJsvgArea.type??h.wR.Area;t===h.wR.Area?(this.createAreaTypeMenu(),this.createAreaGeneralSection()):t===h.wR.Link&&(this.createLinkTypeMenu(),this.createLinkSection())}createAreaTypeMenu(){this.selectedJsvgArea&&(this.tabs=new x.t(this.menu,[{id:r.General,label:"General"},{id:r.DrillTo,label:"Drill To"}]),this.tabs.on("tabSelected",(t=>{this.emptySectionContainer(),t===r.General?this.createAreaGeneralSection():this.createAreaDrillToSection()})))}emptySectionContainer(){if(this.sectionContainer)for(;this.sectionContainer.firstChild;)this.sectionContainer.removeChild(this.sectionContainer.firstChild)}createAreaGeneralSection(){this.bindingSection&&this.bindingSection.remove(),this.bindingSection=(0,u.tTh)(".binding-section",this.sectionContainer),this.addAreaDataPointSelect(),this.addAreaTitleInput(),this.updateBindingArea()}createAreaDrillToSection(){(0,u.tTh)(".drill-to-section",this.sectionContainer,[(0,u.tTh)("input.input",{attr:{type:"text",placeholder:"https://",value:this.selectedJsvgArea.drillTo||""},events:{input:t=>{t.target.value.trim()?this.selectedJsvgArea.drillTo=t.target.value:delete this.selectedJsvgArea.drillTo,this.change()}}}),(0,u.tTh)(".description","Insert the URL of a map that must be loaded when the user drill down on this area.")])}createLinkSection(){this.selectedJsvgArea&&(this.selectedJsvgArea.linkTo?this.createLintToWebSection():this.createLinkToMapSection())}createLintToWebSection(){this.selectedJsvgArea.linkToMap&&delete this.selectedJsvgArea.linkToMap,(0,u.tTh)(".link-to-web-section",this.sectionContainer,[(0,u.tTh)("input.input",{attr:{type:"text",placeholder:"https://",value:this.selectedJsvgArea.linkTo||""},events:{input:t=>{t.target.value.trim()?this.selectedJsvgArea.linkTo=t.target.value:delete this.selectedJsvgArea.linkTo,this.change()}}}),(0,u.tTh)(".description","Clicking on this area will bring the user to the provided external URL.")])}createLinkToMapSection(){this.selectedJsvgArea.linkTo&&delete this.selectedJsvgArea.linkTo;const t=(0,u.tTh)(".link-to-map-section",this.sectionContainer),e=(0,u.tTh)("select.link-to-map-selector.spaced",t);this.displayMaps&&(e.appendChild((0,u.tTh)("option",{attr:{value:"",selected:!this.selectedJsvgArea.linkToMap}},"(Select a Map)")),this.displayMaps.forEach((t=>{t.id!==this.jsvg.id&&e.appendChild((0,u.tTh)("option",{attr:{value:t.id,selected:t.id===this.selectedJsvgArea.linkToMap}},t.name))}))),e.addEventListener("change",(()=>{""===e.value?delete this.selectedJsvgArea.linkToMap:this.selectedJsvgArea.linkToMap=e.value,this.change()})),(0,u.tTh)(".description",this.sectionContainer,"Clicking on this area will bring the user to the selected map.")}createLinkTypeMenu(){const t=!!this.selectedJsvgArea.linkTo,e=t=>{this.emptySectionContainer(),"map"===t?this.createLinkToMapSection():this.createLintToWebSection(),this.change()};(0,u.Wx1)(".link-type",this.menu,{list:[{value:"map",text:"Switch to Map",selected:!t},{value:"web",text:"Go to URL",selected:t}],change:(t,n)=>e(n)})}drawFooterBar(){const t=this.options.map.protection!==g.Qn.None;this.footerBar&&this.footerBar.remove(),(0,u.tTh)(".footer-bar",this.viewContainer,{middleware:t=>this.footerBar=t},[...t?[(0,u.tTh)(".banner.error",this.footerBar,[(0,u.tTh)(".icon.icon-lock"),(0,u.tTh)("span","This map is protected. You can use it, but need password to save changes.")])]:[],(0,u.tTh)(".btn-box.end",[(0,u.tTh)(".synoptic-btn"+(this.userModified?"":".disabled"),{middleware:t=>this.saveBtn=t,events:{click:async()=>{this.userModified&&(this.mapLocation===b.k.MyStorage?this.showMsgBoxSaveMyStorageMap((()=>this.goBackToAddView())):(await this.saveMap(),this.goBackToAddView()))}}},[(0,u.tTh)(".group.small.ctrl",[(0,u.tTh)(".icon.icon-left.small"),(0,u.tTh)("span.text.small","Save & Back")])]),(0,u.tTh)(".synoptic-btn"+(this.userModified?"":".disabled"),{middleware:t=>this.saveAndCloseBtn=t,events:{click:async()=>{this.userModified&&(this.mapLocation===b.k.MyStorage?this.showMsgBoxSaveMyStorageMap((()=>this.parent.closeDialog())):(await this.saveMap(),this.parent.closeDialog()))}}},[(0,u.tTh)(".group.small.ctrl",[(0,u.tTh)("span.text.small","Save & Close")])]),(0,u.tTh)(".synoptic-btn",{events:{click:()=>{this.userModified?this.showMsgBoxSaveChanges((()=>this.parent.closeDialog())):this.parent.closeDialog()}}},[(0,u.tTh)(".group.small.white.border.ctrl",[(0,u.tTh)("span.text.small","Close")])])])])}drawSvgEditorButton(){const t=this.options.map.location!==b.k.Local&&this.options.map.location!==b.k.MyStorage;(0,u.tTh)(".edit-svg-btn.synoptic-btn.ctrl",this.previewContainer,{attr:{disabled:t?"true":void 0},events:{click:t=>{t.preventDefault(),new w.g({element:document.body,title:`Edit ${this.options.map.name}`,svg:this.svgMap.serializedSvg,onSave:t=>this.changeMapSvg(t)}).draw()}}},[(0,u.tTh)(".group.white.small.edit",[(0,u.tTh)(".icon.icon-edit.small"),(0,u.tTh)("span.text.small","SVG")])])}drawToolBar(){const t=(0,u.tTh)(".toolbar.show-on-hover.bottom.left.pinned",this.previewContainer,{style:{position:"absolute",bottom:"5px",left:"5px"}},[(0,u.tTh)(".group.zoom",{style:{backgroundColor:"#fff",color:"#000"}},[(0,u.tTh)(".icon.icon-minus.disabled.default",{attr:{title:"Reduce Zoom"},middleware:t=>this.zoomToolbar.minus=t,events:{click:t=>{t.preventDefault(),this.svgMap?.zoomer.zoomOut()}}}),(0,u.tTh)("span.zoom-state",{attr:{title:`Zoom: ${Math.round(100*this.currentZoom)}%`},middleware:t=>this.zoomToolbar.percentage=t},`${Math.round(100*this.currentZoom)}%`),(0,u.tTh)(".icon.icon-plus.default",{attr:{title:"Increase Zoom"},middleware:t=>this.zoomToolbar.plus=t,events:{click:t=>{t.preventDefault(),this.svgMap?.zoomer.zoomIn()}}}),(0,u.tTh)(".icon.icon-actual-size.big.default",{attr:{title:"Reset Zoom and Center"},middleware:t=>this.zoomToolbar.reset=t,events:{click:t=>{t.preventDefault(),this.svgMap?.zoomer.resetZoom()}}})])]),e=(0,u.tTh)(".group.circle",{style:{backgroundColor:"#fff",color:"#000"},attr:{title:`${this.colorModeTitle(this.colorMode)} Colors`},middleware:t=>this.controlsToolbar.colors=t,events:{click:t=>{t.preventDefault(),this.showColorModeContextMenu(t)}}},[(0,u.tTh)(".circle"+(this.isAutoPanMode?"":".spaced"),{data:{color:this.colorMode}})]);this.isAutoPanMode||((0,u.tTh)(".icon.icon-tool-pointer.selected.default",e,{attr:{title:"Select Area"},middleware:t=>this.controlsToolbar.select=t,events:{click:t=>{t.preventDefault(),this.changeControlMode(v.Z.Select)}}}),(0,u.tTh)(".icon.icon-tool-hand.disabled.default",e,{attr:{title:"Drag Map"},middleware:t=>this.controlsToolbar.pan=t,events:{click:t=>{t.preventDefault(),this.changeControlMode(v.Z.Pan)}}}),(0,u.tTh)("span.divider")),t.appendChild(e)}showColorModeContextMenu(t){u.tzH.Init("color-mode--context-menu",{width:"auto",sticky:t.currentTarget,items:[{type:u.KGh.Header,label:"Map Colors"},{label:this.colorModeTitle(i.Matching),type:u.KGh.Radio,checked:this.colorMode==i.Matching,className:"small-text-contextual-menu-item",onClick:()=>this.changeMapColorMode(i.Matching)},{label:this.colorModeTitle(i.Default),type:u.KGh.Radio,checked:this.colorMode==i.Default,className:"small-text-contextual-menu-item",onClick:()=>this.changeMapColorMode(i.Default)}]}).show(t)}changeMapColorMode(t){this.colorMode=t,this.controlsToolbar.colors.firstElementChild.dataset.color=t.toString(),this.controlsToolbar.colors.title=`${this.colorModeTitle(t)} Colors`,t===i.Matching?this.svgMap.map.classList.add("matching-color","edit-matching-color"):t===i.Default&&this.svgMap.map.classList.remove("matching-color","edit-matching-color")}colorModeTitle(t){return t===i.Matching?"Matching":"Original"}changeControlMode(t){this.controlsToolbar&&!this.isAutoPanMode&&(this.isZoomed||t!==v.Z.Pan)&&(this.controlMode=t,this.controlsToolbar.select.classList.toggle("selected",t===v.Z.Select),this.controlsToolbar.pan.classList.toggle("selected",t===v.Z.Pan),this.svgMap?.zoomer?.togglePanMode(t===v.Z.Pan))}togglePanningIcon(){this.controlsToolbar&&this.currentZoom&&!this.isAutoPanMode&&(this.isZoomed||this.changeControlMode(v.Z.Select),this.controlsToolbar.pan.classList.toggle("disabled",!this.isZoomed))}updateZoomToolbar(){this.currentZoom&&this.zoomToolbar&&(this.zoomToolbar.minus.classList.toggle("disabled",!this.isZoomed),this.zoomToolbar.reset.classList.toggle("disabled",1==this.currentZoom),this.zoomToolbar.plus.classList.toggle("disabled",this.currentZoom>=this.maxZoom),this.zoomToolbar.percentage&&(this.zoomToolbar.percentage.textContent=`${Math.round(100*this.currentZoom)}%`))}addMapSelector(){if(!this.model.mapSelector&&!this.jsvg.dataMapping.mapSelector)return;(0,u.tTh)(".map-selector",this.previewContainer,[(0,u.tTh)(".label","Selector"),(0,u.tTh)("select.select",{middleware:t=>{this.mapSelectorDropdown=t},events:{change:()=>{this.handleMapSelectorChange()}}})]);const t=this.jsvg.dataMapping?.mapSelector,e=t&&this.model.mapSelector?.values.includes(t);t&&!e&&(0,u.tTh)("option",this.mapSelectorDropdown,{attr:{selected:!0,value:this.jsvg.dataMapping.mapSelector}},`${this.jsvg.dataMapping.mapSelector} (Not available)`);const n=(0,u.tTh)("option",this.mapSelectorDropdown,{attr:{selected:!t,value:o.Empty}},o.Empty),i=this.model.mapSelector?.values?.map((e=>(0,u.tTh)("option",{attr:{selected:t&&e==t}},`${e}`)))??[];this.mapSelectorDropdown.add(n,0),this.mapSelectorDropdown.append(...i)}addAreaDataPointSelect(){this.dataPointSelector=(0,u.tTh)("select.data-point-selector"),this.autoOption=(0,u.tTh)("option.auto",{attr:{selected:!0,value:o.Auto}},"(Auto Bind)"),this.dataPointSelector.add(this.autoOption,0),this.unboundOption=(0,u.tTh)("option.unbound",{attr:{selected:!1,value:o.Unbound}},"(Do Not Bind)"),this.dataPointSelector.appendChild(this.unboundOption),this.model&&this.model.dataPoints&&Object.keys(this.model.index).sort(m._1).forEach((t=>{const e=this.model.index[t];this.dataPointSelector.appendChild((0,u.tTh)("option.data-point",{attr:{value:e.id}},e.label2||e.label))})),this.dataPointSelector.addEventListener("change",(()=>this.handleDataPointSelection())),(0,u.tTh)(".control-section",this.bindingSection,[(0,u.tTh)(".label","Data Point"),this.dataPointSelector])}addAreaTitleInput(){(0,u.tTh)(".control-section",this.bindingSection,[(0,u.tTh)(".label","Title"),(0,u.tTh)("input.input",{middleware:t=>this.inputLabelSelectedArea=t,events:{input:t=>{t.preventDefault(),this.handleAreaLabelInput()}},attr:{type:"text",placeholder:"(Auto)"}})])}changeAutoOptDisplayText(t){this.dataPointSelector&&(this.autoOption.innerText=t??"(Auto Bind)")}changeUnboundOptDisplayText(t){this.dataPointSelector&&(this.unboundOption.innerText=t??"(Do Not Bind)")}resetDefaultDataPointSelectorOptions(){this.dataPointSelector&&(this.dataPointSelector.classList.remove("strong-group-matched","strong-group-unbound"),this.dataPointSelector.options[0].value!==o.Auto&&this.dataPointSelector.options[0].remove(),this.changeAutoOptDisplayText(),this.changeUnboundOptDisplayText())}handleDataPointSelection(){if(!this.selectedJsvgArea)return;const t=this.dataPointSelector.value===o.Unbound,e=this.dataPointSelector.value===o.Auto;this.selectedJsvgArea.label=this.inputLabelSelectedArea.value||void 0,e?(delete this.selectedJsvgArea.strong,delete this.selectedJsvgArea.dataPoint):t?(this.selectedJsvgArea.strong=h.r2.Unmatch,delete this.selectedJsvgArea.dataPoint):(this.selectedJsvgArea.strong=h.r2.Match,this.selectedJsvgArea.dataPoint=this.dataPointSelector.value),this.change(),this.svgMap.updateSelectedArea(),this.navTree.updateSelectedNode(),this.updateBindingArea()}showNoSelectionPlaceholder(){this.noSelectionPlaceholder?.remove(),this.areaInfo?.remove(),(0,u.tTh)(".no-selection-placeholder",this.editMapELementArea,{middleware:t=>this.noSelectionPlaceholder=t},"Select an area")}goBackToAddView(){this.parent.backToInitialView(this.options.viewType)}discardChanges(){this.result.unsavedJsvg?.jsvg.id==this.jsvg.id&&(delete this.result.unsavedJsvg,this.parent.setDialogResult())}handleAreaLabelInput=()=>{this.svgMap.selectedNode.mapElement&&this.svgMap.selectedNode.mapElement.id&&(this.selectedJsvgArea&&(this.selectedJsvgArea.label=this.inputLabelSelectedArea.value),this.change())};initMap(){this.options.map&&(this.jsvg=this.options.unsavedJsvg?.jsvg??structuredClone(this.options.map.jsvg),this.mapLocation=this.options.map.location,this.drawMapElements(),this.options.unsavedJsvg&&this.change())}drawMapElements(){this.svgMap&&this.svgMap.destroy(),this.navTree&&this.navTree.destroy(),this.removeLoading(),this.svgMap=new d.F({model:this.model,mapArea:this.mapContainer,jsvg:this.jsvg,context:"editor",zoomer:!0,zoomerConfig:{container:this.previewContainer.firstElementChild,minZoom:this.minZoom,maxZoom:this.maxZoom,panMode:this.controlMode===v.Z.Pan,autoPan:this.isAutoPanMode}}),this.svgMap.draw(),this.svgMap.on("zoom",(t=>{this.currentZoom=t.zoom,this.updateZoomToolbar(),this.togglePanningIcon()})),this.changeMapColorMode(this.colorMode),this.navTree=new p.C(this.navTreeContainer,this.jsvg.svg,this.svgMap.treeRootNode),this.navTree.create(),this.svgMap.on(f.u.Select,(()=>{this.navTree.selectNode(this.svgMap.selectedNode),this.selectedJsvgArea=this.jsvg?.dataMapping?.areas[this.svgMap.selectedNode.mapElement.id]??null,this.createAreaInfo()})),this.svgMap.on(f.u.Reset,(()=>{this.navTree.resetSelection(),this.selectedJsvgArea=null,this.showNoSelectionPlaceholder()})),this.navTree.on(f.u.Select,(()=>{this.svgMap.selectTreeNode(this.navTree.selectedNode),this.selectedJsvgArea=this.jsvg?.dataMapping?.areas[this.svgMap.selectedNode.mapElement.id]??null,this.createAreaInfo()})),this.navTree.on(f.u.Reset,(()=>{this.svgMap.reset(),this.selectedJsvgArea=null,this.showNoSelectionPlaceholder()})),this.updateZoomToolbar()}updateBindingArea(){if(this.resetDefaultDataPointSelectorOptions(),this.resetTabsMenu(),(0,m.U4)(this.svgMap.selectedNode.mapElement)){const t=this.svgMap.selectedNode.mapElement.getAttribute(h.Lc.Strong);return this.autoOption.selected=!0,this.changeAutoOptDisplayText(`${t} (Inherited)`),void this.dataPointSelector.classList.add("strong-group-matched")}if((0,m.dR)(this.svgMap.selectedNode.mapElement))return this.unboundOption.selected=!0,this.changeUnboundOptDisplayText("(Do Not Bind - Inherited)"),this.dataPointSelector.classList.add("strong-group-unbound"),this.dataPointSelector.disabled=!0,this.typeSelector.disabled=!0,void this.tabs.disable([r.DrillTo],r.General);if(!this.selectedJsvgArea)return;const t=this.selectedJsvgArea.strong===h.r2.Unmatch;if(this.selectedJsvgArea.strong===h.r2.Match){let t=!1;const e=this.selectedJsvgArea.dataPoint;for(let n=0;n<this.dataPointSelector.options.length;n++){const i=this.dataPointSelector.options[n];if(i.value===e){i.selected=!0,t=!0;break}}if(!t){const t=(0,u.tTh)("option",{attr:{value:e,selected:!0}},`${e} (Not available)`);this.dataPointSelector.add(t,0)}this.inputLabelSelectedArea.value=this.selectedJsvgArea.label??""}else this.inputLabelSelectedArea.value=this.selectedJsvgArea?.label||null,this.dataPointSelector.selectedIndex=t?1:0;t?this.tabs.disable([r.DrillTo],r.General):this.tabs.enable([r.DrillTo])}resetTabsMenu(){this.tabs&&(this.tabs.show("all"),this.tabs.enable("all"))}async saveMap(){this.showLoading(),await(0,u.ukR)(500),await this.mapsManager.updateMap(this.jsvg,this.jsvg.id,this.drillPathId)&&(this.result.unsavedJsvg?.jsvg.id==this.jsvg.id&&delete this.result.unsavedJsvg,this.parent.setDialogResult()),this.saveBtn?.classList.add("disabled"),this.saveAndCloseBtn?.classList.add("disabled"),this.userModified=!1}async changeMapSvg(t){this.showLoading(),await(0,u.ukR)(500);try{this.jsvg=await this.mapsManager.jsvgGenerator.createFromString({source:this.jsvg.source,id:this.jsvg.id,name:this.jsvg.name,content:t,sanitize:!0,existingJsvg:this.jsvg}),this.change(),this.drawMapElements()}catch(t){const e=new k.z({error:t}),n=await e.render();"link"==n.type&&this.parent.launchUrl(n.url)}}change(){this.result.unsavedJsvg={jsvg:this.jsvg,location:this.mapLocation},this.parent.setDialogResult(),this.userModified=!0,this.saveBtn.classList.remove("disabled"),this.saveAndCloseBtn.classList.remove("disabled")}exportIdsList(){const t=(0,m.JT)(this.jsvg,["id","label","dataPoint","strong"]);this.parent.exportFile({name:`${this.jsvg.name}.csv`,type:"csv",content:t,description:"All ids list"})}exportJsvg(){this.parent.exportFile({name:`${this.jsvg.name}.json`,type:"json",content:JSON.stringify(this.jsvg,null,2),description:"JSVG file"})}exportSvg(){this.parent.exportFile({name:`${this.jsvg.name}.xml`,type:"application/xml",content:this.jsvg.svg,description:"SVG file"})}async showMsgBoxSaveMyStorageMap(t){this.msgBox&&this.msgBox.destroy();const e={mapName:this.options.map.name,protected:this.options.map.protection!==g.Qn.None,element:this.options.container,buttons:[{text:"Save",id:a.n,validationCallback:async e=>{const n=await this.saveMyStorageMap(e);return t&&n.valid&&!n.destroyOnInvalid&&t(),n}},{text:"Cancel",action:"cancel"}]};this.msgBox=new a.D(e),await this.msgBox.draw()}async saveMyStorageMap(t){let e=!1;try{return"local"===t.saveTo?((0,M.KN)(),await(this.mapsManager?.addLocalMaps([this.jsvg],this.drillPathId)),e=!0):(this.showLoading(),e=await this.handleMyStorageMapUpdate(t)),e&&(this.result.unsavedJsvg?.jsvg.id==this.jsvg.id&&delete this.result.unsavedJsvg,this.parent.setDialogResult(),this.saveBtn.classList.add("disabled"),this.saveAndCloseBtn.classList.add("disabled"),this.userModified=!1),{valid:e}}catch(t){const e=(0,C.T)(t);return"MS_NOT_ALLOWED"==e.key?{valid:!1,message:"Invalid password."}:(this.raiseError(e),{valid:!1,destroyOnInvalid:!0})}finally{this.removeLoading(),(0,M.hy)()}}async handleMyStorageMapUpdate(t){try{return await(this.mapsManager?.updateMap(this.jsvg,this.jsvg.id,this.drillPathId,t.password)),!0}catch(e){const n=(0,C.T)(e);if("MS_ETAG_MISMATCH"==n.key){if("cancel"===(await this.showMsgBoxEtagConflict()).action)return!0;{const e=await this.mapsManager.myStorage.getMapMetadata(this.jsvg.id);return this.mapsManager.findMapById(this.jsvg.id).map.eTag=e.eTag,await this.mapsManager.updateMap(this.jsvg,this.jsvg.id,this.drillPathId,t.password),!0}}throw n}}updateMetadata(t){this.jsvg&&(this.jsvg.meta.author=t.author??"",this.jsvg.meta.attribution=t.attribution??"",this.change())}handleMapSelectorChange(){this.mapSelectorDropdown&&(this.mapSelectorDropdown.value===o.Empty?delete this.jsvg.dataMapping.mapSelector:this.jsvg.dataMapping.mapSelector=this.mapSelectorDropdown.value,this.change())}showMsgBoxSaveChanges(t){const e={element:this.options.container,title:"Save Changes",description:"This map has some unsaved changes. Before continuing, do you want to save or discard them?",buttons:[{text:"Save",callback:async()=>{this.mapLocation===b.k.MyStorage?await this.showMsgBoxSaveMyStorageMap((()=>t())):(await this.saveMap(),t())}},{text:"Discard Changes",callback:()=>{this.discardChanges(),t()},action:"cancel"}]};this.showMsgBoxConfirm(e)}showMsgBoxEtagConflict(){this.msgBox&&this.msgBox.destroy();const t={element:this.options.container,title:"Map Conflict",hideCloseButton:!0,description:"The map has been modified by another user. Select an action to resolve the conflict.",buttons:[{text:"Discard My Changes",action:"cancel"},{text:"Overwrite Map"}]};return this.msgBox=new l.V(t),this.msgBox.draw()}showMsgBoxEditMeta(){this.msgBox&&this.msgBox.destroy();const t={element:this.options.container,author:this.jsvg.meta.author,attribution:this.jsvg.meta.attribution,title:"Edit Map Metadata",description:"Update map additional information.",protected:!1,buttons:[{text:"Update",callback:t=>this.updateMetadata(t)},{text:"Cancel",action:"cancel"}]};this.msgBox=new c.K(t),this.msgBox.draw()}showMsgBoxConfirm(t){this.msgBox&&this.msgBox.destroy(),this.msgBox=new l.V(t),this.msgBox.draw()}}},46930:(t,e,n)=>{"use strict";n.d(e,{KU:()=>S,jX:()=>w,pe:()=>b});var i=n(23361),r=n(81807),o=n(84652),a=n(36388),s=n(92421),l=n(96826),c=n(85954),u=n(55888),h=n(94855),d=n(9814),p=n(6807),f=n(52023),g=n(298),m=n(78698),v=n(15436);const y="data-drill-path-id",b="data-type";var w;!function(t){t.DrillPath="drill-path",t.DrillPathSelectable="drill-path-selectable",t.DrillPathCaret="drill-path-caret",t.DrillPathCheckbox="drill-path-checkbox",t.DrillPathMenu="drill-path-menu",t.DrillPathName="drill-path-name",t.Map="map",t.MapSelectable="map-selectable",t.MapName="map-name",t.MapLocation="map-location",t.MapCheckbox="map-checkbox",t.MapMenu="map-menu"}(w||(w={}));class S extends a._{svgPreviewer;msgBox;dropzone;selectedPreviewMap;selectedIds=new Set;removedMaps=[];clickedDrillPathId;searchBy="map";myStorage;topBar;mapManagerContainer;filesArea;rootUl;previewMapContainer;footerBar;searchBar;selectAllCheckbox;removeBtn;treeContainer;emptySearchResult;selectedItemsNumber;constructor(t,e){super(t,e)}get hasSelection(){return this.selectedIds.size>0}get hasMaps(){return this.rootUl&&!!this.rootUl.querySelector(`[${b}=${w.Map}]`)}get drillPathUl(){return this.clickedDrillPathId&&this.rootUl.querySelector(`[${y}="${(0,r.z4e)(this.clickedDrillPathId)}"] ul.nested`)}selectMap(t){this.selectedIds.add(t)}deselectMap(t){this.selectedIds.delete(t)}toggleMapSelection(t,e){(0,r.vMM)(e)?e?this.selectMap(t):this.deselectMap(t):this.selectedIds.has(t)?this.deselectMap(t):this.selectMap(t),this.updateRemoveButtonState()}draw(){this.initViewContent(),this.drawUI()}initViewContent(){this.viewContainer.classList.add("user-select-none","flex","column"),this.topBar&&this.topBar.remove(),(0,r.tTh)(".header-bar",this.viewContainer,{middleware:t=>this.topBar=t}),(0,r.tTh)(".map-title-container",this.topBar,[(0,r.tTh)(".title","Map Manager")])}initDropZone(t){this.dropzone=new f.g({container:t,multiple:!0,onlyButton:!0,accept:c.k$}),this.dropzone.on("file",(()=>{this.dropzone.files?.length&&this.addLocalMaps(this.dropzone.files)})),this.dropzone.on("error",(t=>this.raiseError(t)))}initPreviewer(){this.svgPreviewer&&this.svgPreviewer.destroy(),this.svgPreviewer=new i.s({previewContainer:this.previewMapContainer,showEditButton:!1}),this.svgPreviewer.on("refreshMap",(()=>this.refreshMap())),this.svgPreviewer.on("launchUrl",(t=>this.parent.launchUrl(t)))}drawEmptyView(){this.mapManagerContainer&&this.mapManagerContainer.remove(),this.footerBar&&(this.footerBar.remove(),this.footerBar=null),(0,r.tTh)(".map-manager.editor-panes.empty",this.viewContainer,{middleware:t=>this.mapManagerContainer=t},[(0,r.tTh)(".placeholder","No maps found")])}drawUI(){this.footerBar||(this.mapManagerContainer&&this.mapManagerContainer.remove(),(0,r.tTh)(".map-manager.editor-panes",this.viewContainer,{middleware:t=>this.mapManagerContainer=t},[(0,r.tTh)(".maps-manager-list.pane",[(0,r.tTh)(".file-list",{middleware:t=>this.filesArea=t},[(0,r.tTh)(".tree",[(0,r.tTh)(".filter",[(0,r.tTh)(".search-bar",[(0,r.tTh)(".icon.icon-search.no-hover"),(0,r.tTh)("input.search",{middleware:t=>{this.searchBar=t},attr:{type:"search",placeholder:"Search by map name..."},events:{input:()=>this.handleSearch()}})]),(0,r.tTh)(".ctrl.icon.icon-settings",{attr:{title:"Search by"},events:{click:t=>{this.showSearchByContextMenu(t)}}})]),(0,r.tTh)(".tree-elements",{middleware:t=>this.treeContainer=t}),(0,r.tTh)(".spacer")]),(0,r.tTh)(".button-box.no-justify",[(0,r.tTh)(".icon.icon-delete.ctrl",{middleware:t=>this.removeBtn=t,attr:{title:"Remove selected maps",disabled:""},events:{click:()=>this.showRemoveSelectedMsgBox()}}),(0,r.tTh)(".selected-items-number.hide",{middleware:t=>this.selectedItemsNumber=t})])])]),(0,r.tTh)(".panes-gutter"),(0,r.tTh)(".selected-map-preview.pane",{middleware:t=>this.previewMapContainer=t})]),(0,r.tTh)(".footer-bar",this.viewContainer,{middleware:t=>this.footerBar=t},[(0,r.tTh)(".learn-more",{events:{click:()=>this.parent.launchUrl(v.tl.docsMapManager)}},"Learn more on Map Manager"),(0,r.tTh)(".synoptic-btn.end.ctrl",{events:{click:()=>this.parent.closeDialog()}},[(0,r.tTh)(".group.small.white.border.ctrl",[(0,r.tTh)("span.text.small","Close")])])]),this.initPreviewer(),this.drawList(),this.showInfoBanner(),(0,u.A)({columnGutters:[{track:1,element:this.mapManagerContainer.querySelector(".panes-gutter")}],columnMinSize:200}))}drawList(){this.mapsManager.isEmpty||(this.rootUl&&this.rootUl.remove(),this.selectedIds.clear(),(0,r.tTh)("ul.ul-root",this.treeContainer,{middleware:t=>this.rootUl=t}),(0,r.tTh)("li.tree-element.select-all",this.rootUl,{events:{click:t=>this.selectAll()}},[(0,r.tTh)(".container",[(0,r.tTh)(".selectable.map-manager-selectable",[(0,r.tTh)(".checkbox-new.icon.select-all",{middleware:t=>{this.selectAllCheckbox=t}},[(0,r.tTh)("span.text-content.select-all","Select all")])])])]),Object.keys(this.mapsManager.state.maps).sort(((t,e)=>(0,s.pT)(t).localeCompare((0,s.pT)(e)))).forEach(((t,e)=>{if((0,s.bb)(t))return;const n=this.mapsManager.getMaps(t).filter((t=>!t.parentMapId));if(0===n.length)return;const i=(0,s.pT)(t),o=(0,r.tTh)("li.tree-element",this.rootUl,{data:{drillPathId:t,type:w.DrillPath}}),a=(0,r.tTh)(".container",o),l=(0,r.tTh)(".selectable.map-manager-selectable",a,{data:{type:w.DrillPathSelectable}});(0,r.tTh)(".checkbox-new.icon",l,{data:{type:w.DrillPathCheckbox}});const c=(0,r.tTh)("span.text-content.drill-path",l,{data:{type:w.DrillPathName}},i);(0,r.tTh)(".end",l,[(0,r.tTh)("span.icon.icon-ellipsis.context-menu.ctrl",{data:{type:w.DrillPathMenu}})]);const u=(0,r.tTh)("span.caret.icon.icon-bottom",{data:{type:w.DrillPathCaret}});l.insertBefore(u,c);const h=(0,r.tTh)("ul.nested.active",o);n.filter((t=>!t.parentMapId)).sort(((t,e)=>t.name.localeCompare(e.name))).forEach(((t,n)=>{this.addMapToDrillPathUi(t,h,0==e&&0==n)}))})),this.rootUl.addEventListener("click",(t=>this.onListClick(t))))}showInfoBanner(){(0,r.tTh)(".banner.warning.end",this.topBar,[(0,r.tTh)(".icon.icon-info"),(0,r.tTh)("span","Child maps are not handled by the Map Manager."),(0,r.tTh)("span.learn-more",{events:{click:()=>this.parent.launchUrl(v.tl.docsMapManager)}},"Learn more")])}onListClick(t){const e=t.target;if(e&&e.dataset.type)switch(e.dataset.type){case w.DrillPathCaret:case w.DrillPathSelectable:case w.DrillPath:case w.DrillPathName:this.expandOrCollapseDrillPath(e);break;case w.DrillPathCheckbox:this.handleDrillPathCheckboxSelection(e);break;case w.DrillPathMenu:this.showDrillPathContextMenu(t,e.closest(`[${b}=${w.DrillPath}]`).getAttribute(y));break;case w.Map:case w.MapSelectable:case w.MapName:case w.MapLocation:this.selectMapUIElement(e);break;case w.MapCheckbox:this.handleMapCheckboxSelection(e);break;case w.MapMenu:this.showMapContextMenu(t,e.closest(`[${b}=${w.Map}]`))}}expandOrCollapseDrillPath(t,e){const n=t.dataset.type===w.DrillPath?t:t.closest(`[${b}=${w.DrillPath}]`),i=n.querySelector(".caret");if(!i)return;const o=n.querySelector("ul.nested");o&&((0,r.vMM)(e)?e?(o.classList.add("active"),i.classList.add("icon-bottom"),i.classList.remove("icon-right")):(o.classList.remove("active"),i.classList.remove("icon-bottom"),i.classList.add("icon-right")):(o.classList.toggle("active"),i.classList.toggle("icon-bottom"),i.classList.toggle("icon-right")))}changeSearchBy(t){this.searchBy=t,this.searchBar.placeholder=`Search by ${"map"==t?"map name":"drill path"}...`,this.handleSearch()}handleSearch(){const t=this.searchBar.value.toLowerCase().trim(),e=this.rootUl.querySelectorAll(`[${b}=${w.Map}]`),n=this.rootUl.querySelectorAll(`[${b}=${w.DrillPath}]`);if(e.forEach((t=>t.hidden=!1)),n.forEach((t=>{t.hidden=!1,this.expandOrCollapseDrillPath(t,!0)})),!t)return this.updateCheckboxesState(),void this.toggleEmptySearchResult();"map"===this.searchBy?(e.forEach((e=>{const n=e.querySelector(".text-content");(n.textContent||n.innerText).toLowerCase().includes(t)||(e.hidden=!0)})),n.forEach((t=>{const e=t.querySelector("ul.nested");0===Array.from(e.children).filter((t=>!t.hidden)).length?t.hidden=!0:(t.hidden=!1,this.expandOrCollapseDrillPath(t,!0))}))):(e.forEach((t=>t.hidden=!1)),n.forEach((e=>{const n=e.querySelector(".drill-path");(n.textContent||n.innerText).toLowerCase().includes(t)?(e.hidden=!1,this.expandOrCollapseDrillPath(e,!1)):e.hidden=!0}))),this.toggleEmptySearchResult()}toggleEmptySearchResult(){this.emptySearchResult&&this.emptySearchResult.remove(),this.rootUl.classList.remove("hide"),this.allDrillPathsHidden()&&(this.rootUl.classList.add("hide"),this.emptySearchResult=(0,r.tTh)(".empty-search-result",this.treeContainer,"No results found"))}allDrillPathsHidden(){const t=this.rootUl.querySelectorAll(`[${b}=${w.DrillPath}]`);return Array.from(t).every((t=>t.hidden))}addMapToDrillPathUi(t,e,n=!1){const i=t.location===o.k.Local?"icon-map":t.location===o.k.MyStorage?"icon-okviz-map":"icon-remote-map",a=t.location===o.k.Local?"Local":t.location===o.k.MyStorage?"Remote":"URL",s=(0,r.tTh)("li.tree-element",e,{data:{type:w.Map},middleware:e=>{e.setAttribute(c.Lc.JsvgId,t.id)}},[(0,r.tTh)(".container",[(0,r.tTh)(".selectable.map-manager-selectable",{data:{type:w.MapSelectable}},[(0,r.tTh)(".checkbox-new.map-checkbox.icon",{data:{type:w.MapCheckbox}}),(0,r.tTh)(`span.location.icon.${i}.big`,{data:{type:w.MapLocation},attr:{title:`Map location: ${a}`}}),(0,r.tTh)("span.text-content",{data:{type:w.MapName},attr:{title:t.name}},(0,l.xx)(t.name,30)),(0,r.tTh)(".end",[(0,r.tTh)("span.icon.icon-ellipsis.context-menu.ctrl.map-menu",{data:{type:w.MapMenu}})])])])]);n&&this.selectMapUIElement(s)}handleDrillPathCheckboxSelection(t){const e=t.closest(`[${b}=${w.DrillPath}]`).querySelector("ul.nested").querySelectorAll(`[${b}=${w.MapCheckbox}]`),n=t.classList.contains("checked");this.toggleDrillPathCheckbox(t,n?"empty":"checked"),e.forEach((t=>{this.handleMapCheckboxSelection(t,!n)}))}toggleDrillPathCheckbox(t,e="checked"){"empty"===e?t.classList.remove("checked","partial"):(t.classList.remove("checked"===e?"partial":"checked"),t.classList.add(e)),this.updateAllSelected()}handleMapCheckboxSelection(t,e){t.classList.toggle("checked",e),this.toggleMapSelection(t.closest(`[${c.Lc.JsvgId}]`).getAttribute(c.Lc.JsvgId),e),(0,r.vMM)(e)||this.updateDrillPathChildCheckboxesState(t.closest("ul"))}updateDrillPathState(t){const e=this.rootUl.querySelector(`[${y}="${(0,r.z4e)(t)}"]`);if(!e)return;const n=e.querySelector("ul.nested");n&&n.children.length?this.updateDrillPathChildCheckboxesState(n):e.remove()}updateDrillPathChildCheckboxesState(t){const e=Array.from(t.querySelectorAll(`[${b}=${w.MapCheckbox}]`));let n=0;for(let t=0;t<e.length;t++)e[t].classList.contains("checked")&&n++;const i=t.closest(`[${b}=${w.DrillPath}]`).querySelector(`[${b}=${w.DrillPathCheckbox}]`);this.toggleDrillPathCheckbox(i,0===n?"empty":n===e.length?"checked":"partial")}updateAllSelected(){const t=this.rootUl.querySelectorAll(`[${b}=${w.DrillPathCheckbox}]`);let e=0,n=0;this.selectAllCheckbox.classList.remove("checked","partial"),t.forEach((t=>{t.classList.contains("checked")?e++:t.classList.contains("partial")&&n++})),e!==t.length?(n>0||e>0)&&this.selectAllCheckbox.classList.add("partial"):this.selectAllCheckbox.classList.add("checked")}selectAll(t){t=(0,r.vMM)(t)?t:!this.selectAllCheckbox.classList.contains("checked"),this.rootUl.querySelectorAll(`[${b}=${w.MapCheckbox}]`).forEach((e=>{e.classList.toggle("checked",t),this.toggleMapSelection(e.closest(`[${c.Lc.JsvgId}]`).getAttribute(c.Lc.JsvgId),t)})),this.rootUl.querySelectorAll(`[${b}=${w.DrillPathCheckbox}]`).forEach((e=>{e.classList.remove("partial"),e.classList.toggle("checked",t)})),this.selectAllCheckbox.classList.remove("partial"),this.selectAllCheckbox.classList.toggle("checked",t)}updateCheckboxesState(){this.rootUl.querySelectorAll(`[${b}=${w.MapCheckbox}]`).forEach((t=>{const e=t.closest(`[${c.Lc.JsvgId}]`).getAttribute(c.Lc.JsvgId);t.classList.toggle("checked",this.selectedIds.has(e))})),this.rootUl.querySelectorAll(`[${b}=${w.DrillPathCheckbox}]`).forEach((t=>{const e=t.closest(`[${y}]`).getAttribute(y),n=t.closest(`[${y}="${(0,r.z4e)(e)}"]`).querySelector("ul.nested").querySelectorAll(`[${b}=${w.MapCheckbox}]`);let i=0;for(let t=0;t<n.length;t++)n[t].classList.contains("checked")&&i++;this.toggleDrillPathCheckbox(t,0===i?"empty":i===n.length?"checked":"partial")}))}selectMapUIElement(t){if(!t)return;const e=this.rootUl.querySelector(".selectable.selected");e&&e.classList.remove("selected");const n=t.dataset.type===w.Map?t:t.closest(`[${b}=${w.Map}]`);n.querySelector(".selectable").classList.add("selected");const i=n.getAttribute(c.Lc.JsvgId);i&&(this.selectMapToPreview(i,n.closest(`[${y}]`).getAttribute(y)),this.mapsManager.freeMemory(),this.handlePreview())}updateRemoveButtonState(){this.removeBtn&&(this.hasSelection?(this.removeBtn.removeAttribute("disabled"),this.selectedItemsNumber.classList.remove("hide"),this.selectedItemsNumber.textContent=`(${this.selectedIds.size.toString()})`):(this.removeBtn.setAttribute("disabled",""),this.selectedItemsNumber.classList.add("hide")))}showMapContextMenu(t,e){const n=e.getAttribute(c.Lc.JsvgId),i=this.mapsManager.findMapById(n),o=[];this.rootUl.querySelectorAll(`[${(0,r.z4e)(y)}]`).forEach((t=>{const e=t.getAttribute(y);e!==i.drillPathId&&o.push({value:e,text:(0,s.pT)(t.getAttribute(y))})})),r.tzH.Init("map-context-menu",{width:"auto",sticky:!0,items:[{label:"Move to Drill Path",enabled:o.length>0,icon:"sort2",className:"small-text-contextual-menu-item",onClick:()=>this.showChangeDrillPath(i,o)},{label:"Rename",icon:"rename",className:"small-text-contextual-menu-item",onClick:()=>this.showRenameMapMsgBox(i.map)},{type:r.KGh.Separator},{label:"Remove",icon:"delete",className:"small-text-contextual-menu-item",onClick:()=>this.showRemoveMapMsgBox(i.map,e)}]}).show(t)}showDrillPathContextMenu(t,e){this.clickedDrillPathId=e,r.tzH.Init("drill-path-context-menu",{width:"auto",sticky:!0,items:[{label:"Remove",icon:"delete",className:"small-text-contextual-menu-item",onClick:()=>this.showRemoveDrillPathMsgBox()}]}).show(t)}showChangeDrillPath(t,e){this.msgBox&&this.msgBox.destroy();const n={element:this.options.container,title:"Move To Drill Path",description:`Change current drill path: "${(0,s.pT)(t.drillPathId)}" for "${t.map.name}" map.`,options:e,buttons:[{text:"Move",callback:e=>this.moveToDrillPath(t.map,e),validationCallback:t=>""!==t?{valid:!0}:{valid:!1},disabled:!0},{text:"Cancel",action:"cancel"}]};this.msgBox=new p.h(n),this.msgBox.draw()}moveToDrillPath(t,e){if(!t||!e)return;this.removeMap(t),this.mapsManager.addMap(t,e);const n=this.rootUl.querySelector(`[${y}="${(0,r.z4e)(e)}"] ul.nested`);this.addMapToDrillPathUi(t,n,!1),this.setResult()}async ensureMapContent(t){if(!t)return!1;if(t.location===o.k.Local||t.jsvg?.svg)return!0;try{if(await this.mapsManager.refreshMap(t.id))return!0}catch(t){this.svgPreviewer.raiseError(t)}return!1}selectMapToPreview(t,e){if(!t)return;const n=this.mapsManager.findMapById(t,e);n&&(this.selectedPreviewMap=n.map)}async handlePreview(t=!0){this.svgPreviewer.destroyMap(),this.selectedPreviewMap&&(this.svgPreviewer.showInfo(this.selectedPreviewMap,this.selectedPreviewMap.location===o.k.Local),this.selectedPreviewMap.location===o.k.Local?this.svgPreviewer.show(this.selectedPreviewMap.jsvg):(this.svgPreviewer.loading(),t||await(0,r.ukR)(500),await this.ensureMapContent(this.selectedPreviewMap),this.svgPreviewer.show(this.selectedPreviewMap.jsvg),this.svgPreviewer.endLoading()))}refreshMap(){this.selectedPreviewMap&&(this.mapsManager.removeMapContent(this.selectedPreviewMap,!1),this.handlePreview(!1))}async addLocalMaps(t){try{const e=await this.mapsManager.addLocalMaps(t,this.clickedDrillPathId);for(let t=0;t<e.length;t++)this.addMapToDrillPathUi(e[t],this.drillPathUl,0===t);this.setResult()}catch(t){this.raiseError(t)}finally{this.dropzone&&this.dropzone.removeFiles(),this.clickedDrillPathId=null}}async addRemoteMap(t){this.showLoading();try{const e=await this.mapsManager.addRemoteMaps([t],this.clickedDrillPathId);for(let t=0;t<e.length;t++)this.addMapToDrillPathUi(e[t],this.drillPathUl,0===t);this.setResult()}catch(t){this.raiseError(t)}this.removeLoading(),this.clickedDrillPathId=null}async addRemoteMapsFromJson(t){this.showLoading();try{const e=await this.mapsManager.addRemoteMapsFromJson(t,this.clickedDrillPathId);this.drawList(),this.setResult(),this.showConfirmImportUrlsMsgBox(e.discarded)}catch(t){this.raiseError(t)}this.removeLoading(),this.clickedDrillPathId=null}async importUrls(){const t=await f.g.browseFiles(["application/json"]);t&&t.length&&this.addRemoteMapsFromJson(t[0])}removeAllDrillPathMaps(){const t=this.rootUl.querySelector(`[${y}="${(0,r.z4e)(this.clickedDrillPathId)}"]`);if(!t)return;const e=Array.from(t.querySelectorAll(`[${b}=${w.Map}]`));e.forEach(((t,n)=>this.removeMap(this.mapsManager.findMapById(t.getAttribute(c.Lc.JsvgId)).map,n===e.length-1))),this.clickedDrillPathId=null}removeMultipleMaps(){if(!this.hasSelection)return;const t=Array.from(this.selectedIds);for(let e=0;e<t.length;e++){const n=this.mapsManager.findMapById(t[e]);n&&this.removeMap(n.map,e===t.length-1)}this.clearSelection()}removeMap(t,e=!0,n){if(!t)return;const i=n??this.rootUl.querySelector(`[${c.Lc.JsvgId}="${(0,r.z4e)(t.id)}"]`),o=i.closest(`[${b}=${w.DrillPath}]`)?.getAttribute(y);i&&i.remove(),o&&this.updateDrillPathState(o),this.mapsManager.removeMap(t.id),this.removedMaps.push(t.id),this.selectedIds.delete(t.id),e&&(this.mapsManager.findMapById(this.selectedPreviewMap?.id)||(this.svgPreviewer.destroyMap(),this.selectedPreviewMap=null,this.selectMapUIElement(this.rootUl.querySelector(`[${(0,r.z4e)(c.Lc.JsvgId)}]`))),this.setResult(),this.hasMaps?(this.updateAllSelected(),this.updateRemoveButtonState()):this.drawEmptyView())}renameMap(t,e){e&&t&&e!==t.name&&this.mapsManager.renameMap(e,t.id)&&(this.svgPreviewer.updateMapName(e),this.updateMapInList(t),this.setResult())}showRenameMapMsgBox(t){if(this.msgBox&&this.msgBox.destroy(),!t)return;const e=e=>""===e?{valid:!1,message:"The new name cannot be empty."}:e===t.name?{valid:!1,message:"The new name must be different from the current name."}:this.mapsManager.doesMapHaveProperty("name",e,this.drillPathId,!1)?{valid:!1,message:"The new name already exists at this level."}:(0,m._C)(e)?(0,m.w8)(e)?{valid:!0}:{valid:!1,message:m.NX}:{valid:!1,message:m.l0},n=t.name,i={element:this.options.container,icon:"rename",title:"Rename Map",description:`Insert a new name for "${n}".`,value:n,placeholder:"Map name",showValidationError:!0,buttons:[{text:"Rename",callback:e=>this.renameMap(t,e),validationCallback:t=>e(t)},{text:"Cancel",action:"cancel"}]};this.msgBox=new d.J(i),this.msgBox.draw()}showAddRemoteMapMsgBox(){const t={element:this.options.container,title:"Remote Map URL",description:"Insert the remote map URL.",placeholder:"https://",showValidationError:!0,buttons:[{text:"Ok",callback:t=>this.addRemoteMap(t),validationCallback:t=>(0,g.Gz)(t)?this.mapsManager.doesMapHaveProperty("url",t,this.clickedDrillPathId)?{valid:!1,message:"The URL already exists at this level."}:{valid:!0}:{valid:!1,message:"The URL is invalid."}},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new d.J(t),this.msgBox.draw()}showConfirmImportUrlsMsgBox(t){const e=t.length>0,n=t.length>1,i={element:this.viewContainer,title:"Import URL Maps",description:"Remote maps import complete. "+(e?`The following URL${n?"s are":"is"} invalid and won't be added:`:"All maps have been added."),buttons:[{text:"Ok"}]};if(e){const e=(0,r.tTh)("ul");t.forEach((t=>e.appendChild((0,r.tTh)("li",t))));const n=(0,r.tTh)(".invalid-urls",[e]);i.content=n,i.boxContentClasses=["no-margins","overflow-y"]}this.msgBox&&this.msgBox.destroy(),this.msgBox=new h.V(i),this.msgBox.draw()}showRemoveMapMsgBox(t,e){const n={element:this.viewContainer,icon:"delete",title:"Remove Map",description:`Are you sure you want to remove "${t.name}"?`,buttons:[{text:"Remove",callback:()=>this.removeMap(t,!0,e)},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new h.V(n),this.msgBox.draw()}showRemoveSelectedMsgBox(){if(!this.hasSelection)return;const t=1===this.selectedIds.size?"":"s",e={element:this.viewContainer,icon:"delete",title:`Remove Map${t}`,description:`Are you sure you want to remove ${this.selectedIds.size} selected map${t}?`,buttons:[{text:"Remove",callback:()=>this.removeMultipleMaps()},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new h.V(e),this.msgBox.draw()}showRemoveDrillPathMsgBox(){const t={element:this.viewContainer,title:"Remove Drill Path",description:`Are you sure you want to remove "${(0,s.pT)(this.clickedDrillPathId)}" drill path? All maps will be removed.`,buttons:[{text:"Remove",callback:()=>this.removeAllDrillPathMaps()},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new h.V(t),this.msgBox.draw()}showSearchByContextMenu(t){r.tzH.Init("search-by-context-menu",{width:"auto",sticky:t.currentTarget,items:[{type:r.KGh.Header,label:"Search by"},{label:"Map Name",type:r.KGh.Radio,checked:"map"==this.searchBy,className:"small-text-contextual-menu-item",onClick:()=>this.changeSearchBy("map")},{label:"Drill Path",type:r.KGh.Radio,checked:"drill-path"==this.searchBy,className:"small-text-contextual-menu-item",onClick:()=>this.changeSearchBy("drill-path")}]}).show(t)}updateMapInList(t){const e=this.rootUl.querySelector(`[${c.Lc.JsvgId}="${(0,r.z4e)(t.id)}"]`);if(e){const n=e.querySelector(`[${b}=${w.MapName}]`);n.textContent=t.name,n.setAttribute("title",t.name)}}clearSelection(){this.selectedIds.clear(),this.updateRemoveButtonState(),this.treeContainer.querySelectorAll(".checked, .partial").forEach((t=>t.classList.remove("checked","partial")))}setResult(){this.result.removedMaps=this.removedMaps,this.parent.setDialogResult()}}},36388:(t,e,n)=>{"use strict";n.d(e,{_:()=>o});var i=n(81807),r=n(87006);class o extends i.T0G{options;parent;viewContainer;loadingElement;eventsAbortController;isVisible;errorHandler;constructor(t,e){super(),this.options=t,this.parent=e,this.eventsAbortController=new AbortController,this.viewContainer=(0,i.tTh)(".dialog-view-container",this.options.container)}get model(){return this.parent.model}get result(){return this.parent.result}get mapsManager(){return this.parent.mapsManager}get drillPathId(){return this.parent.drillPathId}showLoading(){this.removeLoading(),(0,i.tTh)(".full-size-loading.show",this.viewContainer,{middleware:t=>this.loadingElement=t},[(0,i.tTh)(".loading",[(0,i.tTh)(".loader")])])}removeLoading(){this.loadingElement&&this.loadingElement.remove()}destroy(){this.eventsAbortController.abort(),this.viewContainer&&this.viewContainer.remove(),this.options.map=null,this.options.file=null,this.viewContainer=null,this.loadingElement=null,super.destroy()}toggleVisibility(t=!0){this.viewContainer&&(this.viewContainer.classList.toggle("hide",!t),this.isVisible=t)}async raiseError(t,e=document.body){this.errorHandler&&this.errorHandler.destroy(),this.errorHandler=new r.z({error:t,container:e});const n=await this.errorHandler.render();"link"==n.type&&this.parent.launchUrl(n.url)}}},16579:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ColorMode:()=>r.lH,DataType:()=>o.pe,DialogAdd:()=>i.A,DialogAddState:()=>i.L,DialogEdit:()=>r.Pv,DialogManager:()=>o.KU,MapListDataType:()=>o.jX,SelectOptionType:()=>r.iw,TabsMenu:()=>r.yD});var i=n(31750),r=n(22209),o=n(46930)},86024:(t,e,n)=>{"use strict";n.d(e,{l:()=>a});var i=n(16579),r=n(84652),o=n(81807);class a{options;callerOptions;static Id="okvizMapEditor";dialogHost;dialogBody;viewInstances={};mapsManager;result={};get model(){return this.callerOptions.model}get drillPathId(){return this.callerOptions.drillPathId}constructor(t,e){this.options=t,this.callerOptions=e,this.dialogHost=t.host,this.initMapsManager(),this.initDialog()}initMapsManager(){this.mapsManager=new r.x({initialState:this.callerOptions.mapsManagerState,myStorageInfo:this.callerOptions.myStorageInfo}),this.mapsManager.jsvgGenerator.imageQuality=this.callerOptions.imageQuality,this.mapsManager.myStorage.on("editKeyChanged",(t=>{this.result.saveMyStorageEditKey=t,this.setDialogResult()}))}initDialog(){this.options.element.classList.add("editor"),document.styleSheets[0].insertRule("html { height: 100%; }",0),this.dialogBody=(0,o.tTh)(".editor-dialog",this.options.element);const t={...this.callerOptions,container:this.dialogBody};this.addView(t)}addView(t,e){e&&(e.destroy&&this.viewInstances[e.viewType].destroy(),e.hide&&this.viewInstances[e.viewType].toggleVisibility(!1)),this.viewInstances[t.viewType]=new i[t.viewType](t,this),this.viewInstances[t.viewType].draw()}changeView(t){t.selectedView.viewType!==t.callerView.viewType&&(t.callerView.destroy&&this.viewInstances[t.callerView.viewType].destroy(),t.callerView.hide&&this.viewInstances[t.callerView.viewType].toggleVisibility(!1),this.viewInstances[t.selectedView.viewType].toggleVisibility(!0))}editMap(t,e,n){this.addView({...this.callerOptions,container:this.dialogBody,viewType:"DialogEdit",map:t,unsavedJsvg:n},{viewType:e,destroy:!1,hide:!0})}launchUrl(t){this.result.launch=t,this.dialogHost.close(0,this.result)}exportFile(t){this.result.fileExport=t,this.dialogHost.close(0,this.result)}setDialogResult(){this.result.state=this.mapsManager.state,this.result.myStorageInfo=this.mapsManager.myStorage.info,this.result.unsavedJsvg&&!(0,o.dld)(this.result.unsavedJsvg)&&delete this.result.unsavedJsvg,this.dialogHost.setResult(this.result)}backToInitialView(t){this.changeView({selectedView:{viewType:this.callerOptions.viewType},callerView:{viewType:t,destroy:!0}})}closeDialog(){this.dialogHost.close(0)}destroy(){this.dialogBody.remove(),Object.values(this.viewInstances).forEach((t=>{t.destroy()})),this.viewInstances=null,this.callerOptions=null,this.options=null,this.dialogBody=null}}globalThis.dialogRegistry=globalThis.dialogRegistry||{},globalThis.dialogRegistry[a.Id]=a},3545:(t,e,n)=>{"use strict";n.d(e,{E0:()=>C,bN:()=>T,iP:()=>M});var i=n(81807),r=n(87006),o=n(57973),a=n(93076),s=n(28798),l=n(34508),c=n(46449),u=n(52023),h=n(23361),d=n(46930),p=n(85954),f=n(96826),g=n(84652),m=n(72210),v=n(55888),y=n(20860),b=n(94855),w=n(15436),S=n(61455),x=n(78698),k=n(80745);const C="add-selected-to-my-storage",M="export-my-storage-urls";class T extends o.g{dropzone;svgPreviewer;mapList;selectedPreviewMapId;selectedIds=new Set;uploadBtn;previewMapContainer;searchBar;treeContainer;rootUl;listButtonBox;selectAllCheckbox;errorHandler;msgBox;myStorageContainer;listPane;refreshListBtn;emptySearchResult;storageInfoContainer;get isListEmpty(){return!this.mapList||!this.mapList.length}get myStorage(){return this.config.mapsManager.myStorage}get jsvgGenerator(){return this.config.mapsManager.jsvgGenerator}get callbackData(){const t=this.mapList.filter((t=>this.selectedIds.has(t.id)));return t.forEach((t=>{t.url=this.myStorage.getMapUrl(t.id),t.source=t.id})),t}constructor(t){t.boxClass="full-size",t.icon="okviz-storage",t.title=t.mapsManager.myStorage.info.displayName,t.onlyBrowse?t.hideCloseButton=!0:t.size={height:"90%",width:"90%"},super(t),this.mapList=t.mapList,t.mapsManager.freeMemory()}getMemorySize(){return this.mapList.reduce(((t,e)=>e.jsvg?t+(e.size??0):0),0)}freeMemory(){this.getMemorySize()>w.B5&&this.mapList.forEach((t=>t.jsvg=null))}drawUI(){this.config.onlyBrowse&&this.boxContainer.classList.add("no-margins","no-borders","no-padding"),this.mapList&&this.mapList.length?this.drawStorage():this.showEmptyStorage()}orderListAlphabetically(){this.mapList&&this.mapList.sort(((t,e)=>t.name.localeCompare(e.name)))}orderUiListAlphabetically(){if(!this.rootUl)return;const t=Array.from(this.rootUl.querySelectorAll(`[${d.pe}=${d.jX.Map}]`));t.sort(((t,e)=>t.querySelector(".text-content").textContent.localeCompare(e.querySelector(".text-content").textContent))),t.forEach((t=>this.rootUl.appendChild(t)))}drawStorage(){this.titleBox.classList.add("no-margins"),this.boxContent.classList.add("my-storage-view","no-margins"),!this.listPane&&(this.myStorageContainer&&this.myStorageContainer.remove(),this.storageInfoContainer&&this.storageInfoContainer.remove(),(0,i.tTh)(".my-storage-info",this.boxContent,{middleware:t=>this.storageInfoContainer=t},[(0,i.tTh)(".info-section",[(0,i.tTh)(".label","My Storage: "),(0,i.tTh)("div",`${this.myStorage.info.displayRegion}${this.myStorage.info.isEncrypted?" (Encrypted)":""}`)]),(0,i.tTh)(".info-section.quota",[(0,i.tTh)(".quota-text"),(0,i.tTh)(".quota-bar-container",[(0,i.tTh)(".quota-bar")])])]),(0,i.tTh)(".my-storage.editor-panes.no-margins",this.boxContent,{middleware:t=>this.myStorageContainer=t},[(0,i.tTh)(".my-storage-list.pane",{middleware:t=>this.listPane=t},[(0,i.tTh)(".file-list",[(0,i.tTh)(".tree",[(0,i.tTh)(".filter",[(0,i.tTh)(".search-bar.no-margins",[(0,i.tTh)(".icon.icon-search.no-hover"),(0,i.tTh)("input.search",{middleware:t=>this.searchBar=t,attr:{type:"search",placeholder:"Search by map name..."},events:{input:()=>this.handleSearch()}})])]),(0,i.tTh)(".tree-elements",{middleware:t=>this.treeContainer=t}),(0,i.tTh)(".spacer")]),(0,i.tTh)(".button-box",{middleware:t=>this.listButtonBox=t},[(0,i.tTh)("icon.icon.icon-refresh.refresh-btn",{middleware:t=>this.refreshListBtn=t,events:{click:()=>this.refreshMaps()}}),(0,i.tTh)(".synoptic-btn.white.ctrl.end",{middleware:t=>this.uploadBtn=t,events:{click:()=>this.dropzone.handleBrowse()}},[(0,i.tTh)(".group.white.small.border",[(0,i.tTh)(".icon.icon-upload.small.no-margins"),(0,i.tTh)("span.text.small","Upload")])])])])]),(0,i.tTh)(".panes-gutter"),(0,i.tTh)(".selected-map-preview.pane",{middleware:t=>this.previewMapContainer=t})]),(0,v.A)({columnGutters:[{track:1,element:this.boxContent.querySelector(".panes-gutter")}],columnMinSize:200}),this.initPreviewer(),this.updateButtons(),this.initDropZone(this.listPane),this.updateDisplayQuota(0)),this.drawMapList()}showEmptyStorage(){this.storageInfoContainer&&this.storageInfoContainer.remove(),this.myStorageContainer&&this.myStorageContainer.remove(),this.listPane=null,(0,i.tTh)(".my-storage.empty",this.boxContent,{middleware:t=>this.myStorageContainer=t},[(0,i.tTh)(".no-maps",[(0,i.tTh)(".placeholder","Your storage is empty"),(0,i.tTh)(".synoptic-btn.add-map-btn.ctrl",{events:{click:t=>this.dropzone.handleBrowse()}},[(0,i.tTh)(".group.small",[(0,i.tTh)(".icon.icon-upload.small"),(0,i.tTh)("span.text.small","Upload")])])])]),this.hideButton([C,M]),this.initDropZone(this.myStorageContainer)}handleSearch(){const t=this.searchBar.value.toLowerCase().trim();t||this.toggleEmptySearchResult(!1);let e=!1;this.rootUl.querySelectorAll(`[${d.pe}=${d.jX.Map}]`).forEach((n=>{const i=n.querySelector(".text-content").textContent.includes(t);n.toggleAttribute("hidden",!i),e=e||i})),this.toggleEmptySearchResult(!e)}toggleEmptySearchResult(t=!0){this.emptySearchResult&&this.emptySearchResult.remove(),this.rootUl.classList.remove("hide"),t&&(this.rootUl.classList.add("hide"),this.emptySearchResult=(0,i.tTh)(".empty-search-result",this.treeContainer,"No results found"))}initPreviewer(){this.svgPreviewer&&this.svgPreviewer.destroy(),this.svgPreviewer=new h.s({previewContainer:this.previewMapContainer,showEditButton:!1,showProtection:!0}),this.svgPreviewer.on("refreshMap",(()=>this.refreshMap(!0)))}initDropZone(t){this.dropzone&&this.dropzone.destroy(),this.dropzone=new u.g({container:t,multiple:!0,accept:p.k$,maxSize:w.YE}),this.dropzone.on("file",(()=>{this.dropzone.files?.length&&this.handleMapsUpload(this.dropzone.files)})),this.dropzone.on("error",(t=>this.raiseError(t)))}showMapContextMenu(t,e){if(!e)return;const n=e.getAttribute(p.Lc.JsvgId);if(!n)return;const r=this.mapList.find((t=>t.id===n));if(!r)return;const o=r?.protection!==c.Qn.None,s=[...o?[{label:"Unprotect",icon:"unlock",className:"small-text-contextual-menu-item",onClick:()=>this.showProtectionMsgBox(r,a.sm.Unprotect)},{label:"Change Password",icon:"lock",className:"small-text-contextual-menu-item",onClick:()=>this.showProtectionMsgBox(r,a.sm.ChangePassword)}]:[{label:"Protect",icon:"lock",className:"small-text-contextual-menu-item",onClick:()=>this.showProtectionMsgBox(r,a.sm.Protect)}],{type:i.KGh.Separator},{label:"Rename",icon:"rename",className:"small-text-contextual-menu-item",onClick:()=>this.showRenameMapMsgBox(r)},{label:"Replace",icon:"open-folder",enabled:!o,className:"small-text-contextual-menu-item",onClick:()=>this.handleReplaceBtnClick(n)},{label:"Edit Metadata",icon:"edit",className:"small-text-contextual-menu-item",onClick:()=>this.showEditMetaMsgBox(r)},{label:"Copy URL",icon:"link",className:"small-text-contextual-menu-item",onClick:()=>(0,f.lW)(this.myStorage.getMapUrl(n,r.name))},{type:i.KGh.Separator},{label:"Delete",icon:"delete",className:"small-text-contextual-menu-item",onClick:()=>this.showRemoveMapMsgBox(r)}];i.tzH.Init("map-context-menu",{width:"auto",sticky:!0,items:s.flat()}).show(t)}clearSelectedPreviewMap(){this.svgPreviewer?.destroyMap(),this.svgPreviewer?.destroyMapInfo()}async refreshMaps(){this.showLoading(),this.refreshListBtn?.classList.add("refreshing");try{this.mapList=await this.myStorage.listMaps(),this.orderListAlphabetically(),this.drawUI()}catch(t){const e=(0,m.T)(t);this.raiseError(e,"MS_INVALID_EDIT_KEY"==e.key)}finally{this.removeLoading(),this.refreshListBtn?.classList.remove("refreshing")}}async handleReplaceBtnClick(t){try{const e=await u.g.browseFiles(p.k$);if(!e.length)return;const n=e[0];await this.replaceMap(n,t,!0)}catch(t){const e=(0,m.T)(t);this.raiseError(e,"MS_INVALID_EDIT_KEY"==e.key)}}async replaceMap(t,e,n=!1){const{jsvg:i,header:r}=await this.myStorage.getMap(e);if(r.protection!==c.Qn.None)return;const o=await this.jsvgGenerator.createFromFile(t,i.name,i.id,i),a=await this.myStorage.updateMap({mapId:e,eTag:r.eTag,map:o}),s=r.size-a.size;if(s&&this.updateDisplayQuota(s),this.isListEmpty)this.mapList.push(a),this.drawUI();else{const t=this.mapList.find((t=>t.id===e));if(t)if(n){const t={...a,jsvg:o};this.updateMapInList(e,t),this.selectedPreviewMapId=a.id,this.handlePreview()}else t.jsvg=null;else this.mapList.push(a),this.addMapToUI(a.name,a.id,n,n)}}async uploadMap(t,e,n=!1){const i=await this.getUniqueMyStorageMapName(e),r=await this.jsvgGenerator.createFromFile(t,i);r.source=r.id;const o=await this.myStorage.uploadMap({map:r,...r.meta?.author?{author:r.meta.author}:{},...r.meta?.attribution?{attribution:r.meta.attribution}:{}});return this.mapList.push(o),this.isListEmpty?this.drawUI():this.addMapToUI(o.name,o.id,n,n),this.updateDisplayQuota(-o.size),o}async getUniqueMyStorageMapName(t){try{return await this.myStorage.searchMapByName(t),await this.getUniqueMyStorageMapName(`${t} copy`)}catch(e){const n=(0,m.T)(e);if("MS_MAP_NOT_FOUND"==n.key)return t;throw n}}async handleMapsUpload(t){try{(0,S.KN)();let e=!1,n=!1;for(let i=0;i<t.length;i++){const r=t[i],o=(0,x.lx)((0,f.T3)(r.name)),a=i===t.length-1;(0,S.Uu)(r.name,[i+1,t.length]);let s="";try{s=await this.myStorage.searchMapByName(o)}catch(t){if("MS_MAP_NOT_FOUND"!==t.key)throw t}if(s){if(e){(0,S.Uu)(r.name,[i+1,t.length]),await this.replaceMap(r,s,a);continue}if(!n){(0,S.jj)("hide");const l=await this.showReplaceMapMsgBox(o);if("cancel"===l.action)break;if("replace"===l.action||"replaceAll"===l.action){e="replaceAll"===l.action,(0,S.Uu)(r.name,[i+1,t.length]),await this.replaceMap(r,s,a);continue}if("keepBoth"===l.action||"keepAll"===l.action){n="keepAll"===l.action,(0,S.Uu)(r.name,[i+1,t.length]),await this.uploadMap(r,o,a);continue}}}!n&&s||((0,S.Uu)(r.name,[i+1,t.length]),await this.uploadMap(r,o,a))}}catch(t){const e=(0,m.T)(t);this.raiseError(e,"MS_INVALID_EDIT_KEY"==e.key)}finally{this.dropzone.removeFiles(),(0,S.hy)()}}updateDisplayQuota(t){this.myStorage.info.availableQuota+=t;const e=this.storageInfoContainer?.querySelector(".quota-text");e&&(e.textContent=this.myStorage.displayAvailableQuota);const n=this.storageInfoContainer?.querySelector(".quota-bar");n&&(n.style.width=`${this.myStorage.availableQuotaPercentage}%`)}onListClick(t){const e=t.target;if(e&&e.dataset.type)switch(e.dataset.type){case d.jX.MapCheckbox:this.handleMapCheckboxClick(e);break;case d.jX.MapMenu:this.showMapContextMenu(t,e.closest(`[${d.pe}=${d.jX.Map}]`));break;case d.jX.MapSelectable:case d.jX.MapName:case d.jX.Map:this.selectMapUIElement(e)}}async removeMap(t,e){try{return this.showLoading(),await this.myStorage.deleteMap(t.id,e),this.removeMapFromUI(t.id),this.removeMapFromList(t.id),this.updateDisplayQuota(t.size),this.mapList.length?this.selectedPreviewMapId==t.id&&this.selectMapUIElement(this.rootUl.querySelector(`[${d.pe}=${d.jX.Map}]`)):this.drawUI(),{valid:!0}}catch(t){return this.handleMsgBoxValidationError(t)}finally{this.removeLoading()}}removeMapFromUI(t){const e=this.rootUl.querySelector(`[${p.Lc.JsvgId}="${t}"]`);e&&e.remove(),this.selectedPreviewMapId==t&&this.clearSelectedPreviewMap()}removeMapFromList(t){t&&this.mapList&&(this.deselectMap(t),this.mapList=this.mapList?.filter((e=>e.id!==t)))}selectMapUIElement(t,e=!1){if(!t)return;const n=t.dataset.type===d.jX.Map?t:t.closest(`[${d.pe}=${d.jX.Map}]`),i=n.getAttribute(p.Lc.JsvgId);if(!i||this.selectedPreviewMapId==i&&!e)return;const r=this.rootUl.querySelector(".selectable.selected");r&&r.classList.remove("selected"),n.querySelector(".selectable").classList.add("selected"),this.selectedPreviewMapId=i,this.freeMemory(),this.handlePreview()}async handlePreview(){if(this.svgPreviewer?.destroyMap(),this.svgPreviewer?.destroyMapInfo(),!this.selectedPreviewMapId)return;const t=this.mapList.find((t=>t.id===this.selectedPreviewMapId));if(t){this.showMapInfoPreview(t),this.svgPreviewer.loading();try{if(await this.ensureMapContent(),t.id!==this.selectedPreviewMapId)return;this.showMapInfoPreview(t),this.svgPreviewer.show(t.jsvg),this.svgPreviewer.endLoading()}catch(e){if(t.id!==this.selectedPreviewMapId)return;const n=(0,m.T)(e);"MS_INVALID_EDIT_KEY"==n.key?this.raiseError(n,!0):this.svgPreviewer.raiseError(n)}finally{this.svgPreviewer.endLoading()}}}async ensureMapContent(){if(!this.selectedPreviewMapId)return;const t=this.mapList.find((t=>t.id===this.selectedPreviewMapId));t.jsvg&&t.jsvg.svg||await this.refreshMap()}async refreshMap(t=!1){if(!this.mapList||!this.mapList.length)return;const e=await this.myStorage.getMap(this.selectedPreviewMapId),n={...e.header,source:e.header.id,jsvg:e.jsvg};this.updateMapInList(e.header.id,n),t&&await this.handlePreview()}showMapInfoPreview(t){if(!t||!this.svgPreviewer)return;this.svgPreviewer.destroyMapInfo();const e={...t,location:g.k.MyStorage};this.svgPreviewer.showInfo(e)}updateMapInList(t,e){if(!t||!e||!this.mapList)return;const n=this.mapList.find((e=>e.id===t));return n?Object.assign(n,e):void 0}drawMapList(){if(!this.mapList||!this.mapList.length)return;this.orderListAlphabetically(),this.rootUl&&this.rootUl.remove(),(0,i.tTh)("ul.ul-root",this.treeContainer,{middleware:t=>this.rootUl=t}),(0,i.tTh)("li.tree-element.select-all",this.rootUl,{events:{click:()=>this.toggleAllMaps()}},[(0,i.tTh)(".container",[(0,i.tTh)(".selectable.my-storage-selectable",[(0,i.tTh)(".checkbox-new.icon.select-all",{middleware:t=>{this.selectAllCheckbox=t}},[(0,i.tTh)("span.text-content.select-all","Select all")])])])]),this.mapList.find((t=>t.id===this.selectedPreviewMapId))||(this.selectedPreviewMapId=null);const t=this.selectedPreviewMapId||this.mapList[0].id;this.mapList.forEach(((e,n)=>this.addMapToUI(e.name,e.id,t===e.id,this.mapList.length-1===n))),this.rootUl.addEventListener("click",(t=>this.onListClick(t)))}addMapToUI(t,e,n=!1,r=!1){let o;const a=this.config.currentDrillpathMapIds.includes(e),s=(0,i.tTh)("li.tree-element",this.rootUl,{data:{type:d.jX.Map},middleware:t=>{t.setAttribute(p.Lc.JsvgId,e)}},[(0,i.tTh)(".container",[(0,i.tTh)(".selectable.my-storage-selectable",{data:{type:d.jX.MapSelectable}},[...a?[(0,i.tTh)(".checkbox-new.icon.checked.force-checked",{attr:{title:"This map is already included in the current level"}})]:[(0,i.tTh)(".checkbox-new.icon",{middleware:t=>o=t,data:{type:d.jX.MapCheckbox}})],(0,i.tTh)("span.text-content",{data:{type:d.jX.MapName},attr:{title:t}},(0,f.xx)(t,30)),(0,i.tTh)(".end",[(0,i.tTh)("span.icon.icon-ellipsis.context-menu.ctrl.map-menu",{data:{type:d.jX.MapMenu}})])])])]);a||this.handleMapCheckboxClick(o,this.selectedIds.has(e),r),r&&this.orderUiListAlphabetically(),n&&this.selectMapUIElement(s,!0)}updateUiMapName(t,e){if(!t||!e)return;const n=this.rootUl.querySelector(`[${p.Lc.JsvgId}="${t}"]`);if(n){const i=n.querySelector(".text-content");i&&(i.textContent=e),this.selectedPreviewMapId==t&&this.svgPreviewer?.updateMapName(e)}this.orderUiListAlphabetically()}isMapOnCurrentDrillPath(t){return this.config.currentDrillpathMapIds?.includes(t)}handleMapCheckboxClick(t,e,n=!0){t.classList.toggle("checked",e),this.toggleMapSelection(t.closest(`[${p.Lc.JsvgId}]`).getAttribute(p.Lc.JsvgId),e),n&&this.updateSelectAllCheckbox()}toggleMapSelection(t,e){(0,i.vMM)(e)?e?this.selectMap(t):this.deselectMap(t):this.selectedIds.has(t)?this.deselectMap(t):this.selectMap(t)}updateSelectAllCheckbox(){if(!this.rootUl||!this.mapList)return;const t=this.mapList.filter((t=>!this.isMapOnCurrentDrillPath(t.id))).length;this.selectAllCheckbox.classList.remove("checked","partial"),this.selectedIds.size===t?this.selectAllCheckbox.classList.add("checked"):0!==this.selectedIds.size&&this.selectAllCheckbox.classList.add("partial"),this.updateButtons()}updateButtons(){if(this.config.onlyBrowse)this.hideButton(C);else{const t=this.selectedIds.size>0?`Add selected (${this.selectedIds.size})`:"Add selected";this.showButton(C,t,0==this.selectedIds.size)}const t=this.selectedIds.size>0?`Export URLs (${this.selectedIds.size})`:"Export URLs";this.showButton(M,t,0==this.selectedIds.size)}toggleAllMaps(t){if(!this.rootUl||!this.mapList)return;const e=this.mapList.filter((t=>!this.isMapOnCurrentDrillPath(t.id)));t=(0,i.vMM)(t)?t:!!this.selectAllCheckbox.classList.contains("partial")||!this.selectAllCheckbox.classList.contains("checked"),this.selectAllCheckbox.classList.toggle("checked",t),this.rootUl.querySelectorAll(`[${d.pe}=${d.jX.MapCheckbox}]`).forEach((e=>{const n=e.closest(`[${p.Lc.JsvgId}]`).getAttribute(p.Lc.JsvgId);this.isMapOnCurrentDrillPath(n)||this.handleMapCheckboxClick(e,t)})),e.forEach((e=>t?this.selectMap(e.id):this.deselectMap(e.id)))}selectMap(t){this.isMapOnCurrentDrillPath(t)||this.selectedIds.add(t)}deselectMap(t){this.isMapOnCurrentDrillPath(t)||this.selectedIds.delete(t)}async updateMapNameOrMeta(t){try{this.showLoading();const e=t.map,{jsvg:n,header:i}=await this.myStorage.getMap(e.id);e.eTag=i.eTag,t.newName&&(n.name=t.newName),t.updateMeta&&(n.meta.author=t.newAuthor??"",n.meta.attribution=t.newAttribution??"");const r=await this.myStorage.updateMap({mapId:e.id,eTag:e.eTag,...t.password?{password:t.password}:{},map:n});return n.meta.updated=r.updated,e.jsvg=n,e.name=n.name,e.source=n.id,e.author=n.meta.author,e.attribution=n.meta.attribution,e.id=n.id,e.eTag=r.eTag,t.newName&&this.updateUiMapName(t.map.id,t.newName),t.updateMeta&&this.selectedPreviewMapId==t.map.id&&this.svgPreviewer?.updateMapAuthor(t.newAuthor),{valid:!0}}catch(t){return this.handleMsgBoxValidationError(t)}finally{this.removeLoading()}}async createFromFile(t,e,n){const i=[];for(let r=0;r<t.length;r++){(0,S.Uu)(t[r].name,[r+1,t.length]);const o=await this.jsvgGenerator.createFromFile(t[r],e,n);i.push(o)}return i}showRenameMapMsgBox(t){const e={element:this.boxContent,mapName:t.name,protected:t.protection!==c.Qn.None,buttons:[{text:"Rename",id:l.A,validationCallback:async e=>{const n=""===(i=e.newName)?{valid:!1,message:"The new name cannot be empty."}:i===t.name?{valid:!1,message:"The new name must be different from the current name."}:(0,x._C)(i)?(0,x.w8)(i)?{valid:!0}:{valid:!1,message:x.NX}:{valid:!1,message:x.l0};var i;return n.valid?this.updateMapNameOrMeta({map:t,newName:e.newName,password:e.password,updateMeta:!1}):n}},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new l._(e),this.msgBox.draw()}showEditMetaMsgBox(t){const e={element:this.boxContent,author:t.author??"",attribution:t.attribution??"",title:"Edit Map Metadata",description:`Update "${t.name}" map additional information.`,mapTitle:t.name,protected:t.protection!==c.Qn.None,buttons:[{text:"Update",id:y.m,validationCallback:async e=>this.updateMapNameOrMeta({map:t,newAuthor:e.author,newAttribution:e.attribution,password:e.password,updateMeta:!0})},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new y.K(e),this.msgBox.draw()}showProtectionMsgBox(t,e=a.sm.ChangePassword){const n={type:e,mapTitle:t.name,element:this.boxContent,buttons:[{text:a.Rl.getButtonText(e),disabled:!0,id:a.Wb,validationCallback:async n=>this.handleProtectionChange({map:t,type:e,newPassword:n.newPassword,password:n.existingPassword})},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new a.Rl(n),this.msgBox.draw()}showMsgBoxEtagConflict(){this.msgBox&&this.msgBox.destroy();const t={element:this.boxContent,title:"Map Conflict",hideCloseButton:!0,description:"The map has been modified by another user. Select an action to resolve the conflict.",buttons:[{text:"Discard My Changes",action:"cancel"},{text:"Overwrite Map"}]};return this.msgBox=new b.V(t),this.msgBox.draw()}async handleProtectionChange(t){try{this.showLoading();const e=t.type===a.sm.Unprotect?c.Qn.None:c.Qn.Edit,n={mapId:t.map.id,protection:e,...t.password?{password:t.password}:{},...t.newPassword?{newPassword:t.newPassword}:{}};return await this.myStorage.updateMapMetadata(n),this.updateMapInList(t.map.id,{...t.map,protection:e}),this.selectedPreviewMapId==t.map.id&&this.svgPreviewer.toggleProtectedMarker(e!==c.Qn.None),{valid:!0}}catch(t){return this.handleMsgBoxValidationError(t)}finally{this.removeLoading()}}showReplaceMapMsgBox(t){const e={element:this.boxContent,mapName:t,description:`A map named "${t}" already exists in ${this.myStorage.info?.displayName??"your"} storage. Do you want to replace it with the one you are uploading?`,alertMessage:"NOTE: maps protected with passwords will not be replaced."};return this.msgBox&&this.msgBox.destroy(),this.msgBox=new k.J(e),this.msgBox.draw()}showRemoveMapMsgBox(t){const e={element:this.boxContent,mapName:t.name,protected:t.protection!==c.Qn.None,buttons:[{text:"Delete",id:s.m,validationCallback:async e=>this.removeMap(t,e)},{text:"Cancel",action:"cancel"}]};this.msgBox&&this.msgBox.destroy(),this.msgBox=new s.w(e),this.msgBox.draw()}async handleMsgBoxValidationError(t){const e=(0,m.T)(t);return"MS_NOT_ALLOWED"==e.key?{valid:!1,message:"Invalid password."}:(this.raiseError(e,"MS_INVALID_EDIT_KEY"==e.key),{valid:!1,destroyOnInvalid:!0})}async raiseError(t,e=!1,n=document.body){this.errorHandler&&this.errorHandler.destroy();const i={error:t,container:n};e&&(i.destroyCallback=()=>this.destroy()),this.errorHandler=new r.z(i);const o=await this.errorHandler.render();"link"==o.type&&this.config.parent.launchUrl(o.url)}showLoading(){this.removeLoading(),(0,i.tTh)(".full-size-loading.show",this.myStorageContainer,{middleware:t=>this.loadingElement=t},[(0,i.tTh)(".loading",[(0,i.tTh)(".loader")])])}removeLoading(){this.loadingElement&&this.loadingElement.remove()}destroy(){this.errorHandler&&this.errorHandler.destroy(),this.msgBox&&this.msgBox.destroy(),this.svgPreviewer&&this.svgPreviewer.destroy(),this.dropzone&&this.dropzone.destroy(),this.config=null,super.destroy()}draw(){return this.create(),this.drawUI(),super.draw()}}},57973:(t,e,n)=>{"use strict";n.d(e,{g:()=>r});var i=n(81807);class r extends i.T0G{config;titleBox;descriptionBox;boxContent;dialogContainer;loadingContainer;boxContainer;buttonBox;leftButtonBox;rightButtonBox;okButton;cancelButton;validationErrorBox;loadingElement;get callbackData(){return null}get validationCallbackData(){return null}constructor(t){super(),this.config=t}draw(){return new Promise((t=>{this.on("action",(e=>t(e)))}))}triggerAction(t,e,n=!0){this.trigger("action",{action:t,data:e}),n&&this.destroy()}create(){this.dialogContainer&&this.dialogContainer.remove();const t=this.config.scale>1?1/this.config.scale:1;(0,i.tTh)(".msg-box.show",this.config.element,{attr:{id:this.config.containerId??null},middleware:t=>this.dialogContainer=t},[(0,i.tTh)(".box"+(this.config.boxClass?`.${this.config.boxClass}`:""),{middleware:t=>{this.boxContainer=t},attr:{style:`transform: scale(${t})`}},[(0,i.tTh)(".title-section",[(0,i.tTh)(".title",{middleware:t=>{this.titleBox=t}},this.config.title),...this.config.hideCloseButton?[]:[(0,i.tTh)(".icon-box.ctrl",{events:{click:()=>this.triggerAction("cancel")}},[(0,i.tTh)(".icon.icon-close")])]]),(0,i.tTh)(".description",{middleware:t=>{this.descriptionBox=t}},this.config.description),(0,i.tTh)(".box-content",{middleware:t=>{this.boxContent=t}}),(0,i.tTh)(".button-box",{middleware:t=>{this.buttonBox=t}},[(0,i.tTh)(".left-buttons",{middleware:t=>{this.leftButtonBox=t}}),(0,i.tTh)(".right-buttons",{middleware:t=>{this.rightButtonBox=t}})])])]),this.config.boxContentClasses&&this.config.boxContentClasses.forEach((t=>{this.boxContent.classList.add(t)})),this.config.content&&this.boxContent.appendChild(this.config.content),this.config.link&&this.leftButtonBox.appendChild((0,i.tTh)("a.learn-more",{events:{click:()=>{globalThis.thisVisual?.host?globalThis.thisVisual.host.launchUrl(this.config.link.url):this.triggerAction("link",this.config.link?.url)}}},this.config.link.text)),this.config.icon&&this.titleBox.prepend((0,i.tTh)(`.icon.icon-${this.config.icon}`)),this.config.size&&(this.boxContainer.style.width=this.config.size.width,this.boxContainer.style.height=this.config.size.height),this.config.buttons&&this.config.buttons.forEach((t=>this.addButton(t))),this.config.buttons?.length||this.config.link||(this.buttonBox.remove(),this.buttonBox=null)}addValidationErrorBox(t=this.boxContent){this.buttonBox&&(this.buttonBox.style.marginTop="0"),this.validationErrorBox&&this.validationErrorBox.remove(),(0,i.tTh)(".validation-error.hide",t,{middleware:t=>{this.validationErrorBox=t}})}async validate(t){if(t){this.showLoading();const e=await t(this.validationCallbackData);if(this.removeLoading(),!e.valid)return e.destroyOnInvalid?this.triggerAction("cancel"):this.showValidationError(e.message),!1}return this.hideBanner(),!0}addButton(t){const e=(0,i.tTh)(".synoptic-btn"+(t.disabled?".disabled":""),t.left?this.leftButtonBox:this.rightButtonBox,{attr:{id:t.id||`dialog-btn-${(0,i.uRe)()}`},events:{click:async(e,n)=>{if(e.preventDefault(),!n.closest(".synoptic-btn").classList.contains("disabled")&&await this.validate(t.validationCallback)){if(t.callback){this.showLoading();const e=await t.callback(this.callbackData);if(this.removeLoading(),!1===e)return}this.triggerAction(t.action??"ok")}}}},[(0,i.tTh)(".group.small.ctrl"+("cancel"===t.action?".white.border":""),[(0,i.tTh)(".text.small.min",t.text)])]);t.action&&"ok"!=t.action?"cancel"==t.action&&(this.cancelButton||(this.cancelButton=e)):this.okButton||(this.okButton=e)}showValidationError(t){this.validationErrorBox&&t&&(this.validationErrorBox.textContent=t,this.validationErrorBox.classList.remove("hide"))}hideBanner(){this.validationErrorBox&&(this.validationErrorBox.textContent="",this.validationErrorBox.classList.add("hide"))}hideButton(t){Array.isArray(t)||(t=[t]),t.forEach((t=>{const e=this.dialogContainer.querySelector(`#${t}`);e&&e.classList.add("hidden")}))}showButton(t,e,n=!1){const i=this.dialogContainer.querySelector(`#${t}`);if(i&&(i.classList.remove("hidden"),this.toggleButton(i,n),e)){const t=i.querySelector(".text");t&&(t.textContent=e)}}toggleButton(t,e){if(t instanceof Element)e?t.classList.add("disabled"):t.classList.remove("disabled");else{const n=this.dialogContainer.querySelector(`#${t}`);n&&(e?n.classList.add("disabled"):n.classList.remove("disabled"))}}showLoading(){(0,i.tTh)(".full-size-loading.show",this.boxContainer,{middleware:t=>this.loadingElement=t},[(0,i.tTh)(".loading",[(0,i.tTh)(".loader")])])}removeLoading(){this.loadingElement&&this.loadingElement.remove()}destroy(){this.okButton=null,this.cancelButton=null,this.dialogContainer?.remove(),this.dialogContainer=null,this.config?.destroyCallback&&this.config.destroyCallback()}}},93076:(t,e,n)=>{"use strict";n.d(e,{Rl:()=>s,Wb:()=>a,sm:()=>i});var i,r=n(56127),o=n(57973);!function(t){t[t.Protect=0]="Protect",t[t.Unprotect=1]="Unprotect",t[t.ChangePassword=2]="ChangePassword"}(i||(i={}));const a="change-map-protection-btn";class s extends o.g{currentPasswordInput;newPasswordInput;repeatPasswordInput;get validationCallbackData(){return{newPassword:this.newPasswordInput?.value.trim(),existingPassword:this.currentPasswordInput?.value.trim()}}get needNewPasswordInput(){return this.config.type===i.Protect||this.config.type===i.ChangePassword}get needExistingPasswordInput(){return this.config.type===i.Unprotect||this.config.type===i.ChangePassword}get isCurrentPasswordTyped(){return!this.currentPasswordInput||this.currentPasswordInput.value.trim().length}get isNewPasswordTyped(){return!this.newPasswordInput||this.newPasswordInput.value.trim().length}get isRepeatPasswordTyped(){return!this.repeatPasswordInput||this.repeatPasswordInput.value.trim().length}get isRepeatOk(){if(!this.newPasswordInput||!this.repeatPasswordInput)return!0;const t=this.newPasswordInput.value.trim(),e=this.repeatPasswordInput.value.trim();return t&&e&&t===e}get isNewPasswordDifferentFromCurrent(){if(!this.newPasswordInput||!this.currentPasswordInput)return!0;const t=this.currentPasswordInput.value.trim(),e=this.newPasswordInput.value.trim();return t&&e&&t!==e}constructor(t){t.icon=s.getIcon(t.type),t.title=s.getTitle(t.type),t.description=s.getDescription(t.type,t.mapTitle),super(t)}static getIcon(t){switch(t){case i.Protect:return"lock";case i.Unprotect:return"unlock";case i.ChangePassword:return"lock"}}static getTitle(t){switch(t){case i.Protect:return"Protect Map";case i.Unprotect:return"Remove Protection";case i.ChangePassword:return"Change Password"}}static getDescription(t,e){switch(t){case i.Protect:return`Set a password to protect "${e}" map.`;case i.Unprotect:return`Remove protection from "${e}" map? \n                All users of your storage users will be able to edit this map.`;case i.ChangePassword:return`Set a new password for "${e}" map.`}}static getButtonText(t){switch(t){case i.Protect:return"Protect";case i.Unprotect:return"Unprotect";case i.ChangePassword:return"Change"}}enableConfirm(){this.checkBanner();const t=this.isCurrentPasswordTyped&&this.isNewPasswordDifferentFromCurrent&&this.isRepeatOk;this.toggleButton(a,!t)}checkBanner(){this.isCurrentPasswordTyped&&this.isNewPasswordTyped?this.isNewPasswordDifferentFromCurrent?!this.isRepeatPasswordTyped||this.isRepeatOk?this.hideBanner():this.showValidationError("Passwords do not match"):this.showValidationError("New password must be different from the current password"):this.hideBanner()}drawExistingPasswordInput(){this.needExistingPasswordInput&&(this.currentPasswordInput=(0,r.O)(this.boxContent,{label:"Current Password",labelMinWidth:"120px",placeholder:"Enter current map password",visibilityToggle:!0}).querySelector("input"),this.currentPasswordInput.focus())}drawNewAndRepeatPasswordInputs(){this.needNewPasswordInput&&(this.newPasswordInput=(0,r.O)(this.boxContent,{label:"New Password",labelMinWidth:"120px",placeholder:"Enter new map password",visibilityToggle:!0}).querySelector("input"),this.needExistingPasswordInput||this.newPasswordInput.focus(),this.repeatPasswordInput=(0,r.O)(this.boxContent,{label:"Repeat Password",labelMinWidth:"120px",placeholder:"Repeat new password",visibilityToggle:!0}).querySelector("input"))}draw(){return this.create(),this.buttonBox.style.marginTop="0",this.boxContent.classList.add("gap","margin-top"),this.needExistingPasswordInput&&this.drawExistingPasswordInput(),this.needNewPasswordInput&&this.drawNewAndRepeatPasswordInputs(),this.addValidationErrorBox(),this.boxContent.addEventListener("input",(t=>{t.target instanceof HTMLInputElement&&this.enableConfirm()})),super.draw()}}},6807:(t,e,n)=>{"use strict";n.d(e,{h:()=>o});var i=n(81807),r=n(57973);class o extends r.g{select;get callbackData(){return this.select.value}get validationCallbackData(){return this.select.value}constructor(t){super(t)}addDropdown(){(0,i.tTh)(".change-drill-path",this.boxContent,[(0,i.tTh)(".select-section",[(0,i.tTh)("label",{attr:{for:"drill-path-select"}},"Move to:"),(0,i.tTh)("select.max",this.boxContainer,{attr:{id:"drill-path-select"},middleware:t=>{this.select=t},events:{change:()=>this.okButton?.classList.remove("disabled")}})])]),(0,i.tTh)("option",this.select,{attr:{value:"",selected:!0,disabled:!0}},"--- Select destination ---"),this.config.options.forEach((t=>{(0,i.tTh)("option",this.select,{attr:{value:t.value,selected:t.selected}},t.text)}))}draw(){return this.create(),this.addDropdown(),super.draw()}}},34790:(t,e,n)=>{"use strict";n.d(e,{W:()=>s,d:()=>a});var i=n(81807),r=n(57973),o=n(46449);const a="confirm-edit-key-btn";class s extends r.g{localStorageCheckbox;internalSaveCheckbox;textArea;get keyString(){return this.textArea.value.trim()}get callbackData(){return{key:this.keyString,localStorage:this.localStorageCheckbox.classList.contains("checked"),internal:this.internalSaveCheckbox.classList.contains("checked")}}get validationCallbackData(){return{key:this.keyString,localStorage:this.localStorageCheckbox.classList.contains("checked"),internal:this.internalSaveCheckbox.classList.contains("checked")}}constructor(t){super(t)}updateButton(){const t=!this.keyString.length||!o.Lu.IsValidEditKeyFormat(this.keyString);this.toggleButton(a,t)}drawEditKeySection(){this.toggleButton(a,!0),(0,i.tTh)(".edit-key",this.boxContent,[(0,i.tTh)("textarea",{attr:{rows:3,placeholder:"Insert your storage Edit key",spellcheck:"false"},events:{input:()=>this.updateButton()},middleware:t=>this.textArea=t}),(0,i.tTh)(".save-options",this.boxContainer,[(0,i.tTh)("label.option",[(0,i.tTh)(".checkbox-new.icon",{events:{click:t=>t.currentTarget.classList.toggle("checked")},middleware:t=>this.localStorageCheckbox=t},[(0,i.tTh)("span","Remember key for 29 days")])]),(0,i.tTh)("label.option",[(0,i.tTh)(".checkbox-new.icon",{events:{click:t=>t.currentTarget.classList.toggle("checked")},middleware:t=>this.internalSaveCheckbox=t},[(0,i.tTh)("span","Make key available for all users of this report")])])])]),setTimeout((()=>this.textArea.focus()),250)}draw(){return this.create(),this.drawEditKeySection(),this.addValidationErrorBox(),super.draw()}}},20860:(t,e,n)=>{"use strict";n.d(e,{K:()=>s,m:()=>a});var i=n(81807),r=n(57973),o=n(56127);const a="edit-ms-map-meta-btn";class s extends r.g{author;attribution;passwordInput;get result(){return{attribution:this.attributionValue,author:this.authorValue,password:this.passwordValue}}get validationCallbackData(){return this.result}get callbackData(){return this.result}get passwordValue(){return this.passwordInput?.value.trim()}get authorValue(){return this.author?.value.trim()}get attributionValue(){return this.attribution?.value.trim()}addInput(){(0,i.tTh)(".edit-metadata",this.boxContent,[(0,i.tTh)(".metadata-input-section",[(0,i.tTh)("label",{attr:{for:"edit-map-author"}},"Author"),(0,i.tTh)("input.max",{attr:{id:"edit-map-author",type:"text",placeholder:"Map author",value:this.config.author??""},middleware:t=>{this.author=t}})]),(0,i.tTh)(".metadata-input-section",[(0,i.tTh)("label",{attr:{for:"edit-map-attribution"}},"Attribution"),(0,i.tTh)("input.max",{attr:{id:"edit-map-attribution",type:"text",placeholder:"Map attribution",value:this.config.attribution??""},middleware:t=>{this.attribution=t}})])])}addPasswordInput(){this.toggleButton(a,!0),this.passwordInput=(0,o.O)(this.boxContent,{labelMinWidth:"80px",label:"Password",placeholder:"Enter map password",visibilityToggle:!0,onInput:(t,e)=>this.toggleButton(a,!e.value.trim().length)}).querySelector("input")}draw(){return this.create(),this.boxContent.classList.add("gap"),this.addInput(),this.config.protected?(this.addPasswordInput(),this.addValidationErrorBox()):this.boxContent.classList.add("margin-top"),super.draw()}}},9814:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var i=n(81807),r=n(57973);class o extends r.g{input;get callbackData(){return this.input.value}get validationCallbackData(){return this.input.value}constructor(t){super(t)}addInput(){(0,i.tTh)("input.max",this.boxContent,{events:{input:t=>{this.validationErrorBox&&this.validationErrorBox.classList.add("hide")}},attr:{type:this.config.type??"text",placeholder:this.config.placeholder??"",value:this.config.value??""},middleware:t=>this.input=t}),setTimeout((()=>this.input.focus()),250),this.input.setSelectionRange(this.input.value.length,this.input.value.length)}draw(){return this.create(),this.boxContent.classList.add("margin-top"),this.addInput(),this.config.showValidationError&&this.addValidationErrorBox(),super.draw()}}},69847:(t,e,n)=>{"use strict";n.d(e,{y:()=>a});var i=n(57973),r=n(56127),o=n(15436);class a extends i.g{constructor(){super({element:document.body,title:"My Storage Terms of Service",size:{width:"800px",height:"550px"},buttons:[{text:"Close",action:"cancel"}],boxClass:"msg-box-mystorage-tos"})}draw(){return this.create(),(0,r.h)(o.tl.docsMyStorageTermsEmbed,this.boxContent??document.body),super.draw()}}},61455:(t,e,n)=>{"use strict";n.d(e,{KN:()=>u,Uu:()=>p,hy:()=>d,jj:()=>h});var i=n(96826),r=n(57973),o=n(81807);const a="maps-upload-loading",s=`${a}-message`,l=`${a}-progress`;class c extends r.g{constructor(t){t.hideCloseButton=!0,t.title="Processing Maps",t.containerId=a,t.description="Uploaded maps are being processed and optimized before saving. This might take a while. Please wait.",super(t)}addProcessing(){this.boxContent.appendChild((0,o.tTh)(".processing",{attr:{id:a}},[(0,o.tTh)("span.text",{attr:{id:s}},"Processing map"),(0,o.tTh)("span.progress",{attr:{id:l}},"")]))}draw(){return this.create(),this.addProcessing(),super.draw()}}function u(){new c({element:document.body}).draw()}function h(t,e){const n=e??document.getElementById(a);n&&("show"===t?(n.classList.remove("hide"),n.classList.add("show")):(n.classList.remove("show"),n.classList.add("hide")))}function d(){document.getElementById(a)?.remove()}function p(t,e){if(!t)return;const n=document.getElementById(a);if(n){h("show",n);const r=n.querySelector(`#${s}`),o=n.querySelector(`#${l}`);r&&(r.textContent=`Processing "${(0,i.T3)(t)}" map.`),o&&e&&(o.textContent=`(${e[0]}/${e[1]})`)}}},28798:(t,e,n)=>{"use strict";n.d(e,{m:()=>o,w:()=>a});var i=n(57973),r=n(56127);const o="remove-ms-map-btn";class a extends i.g{passwordInput;get validationCallbackData(){return this.passwordInput?.value.trim()}constructor(t){t.icon="delete",t.title="Delete Map",t.description=t.protected?`"${t.mapName}" map is protected. Enter map password to delete it from the storage.`:`Delete "${t.mapName}" map from the storage?`,super(t)}addPasswordInput(){this.toggleButton(o,!0),this.passwordInput=(0,r.O)(this.boxContent,{labelMinWidth:"80px",label:"Password",placeholder:"Enter map password",visibilityToggle:!0,onInput:(t,e)=>this.toggleButton(o,!e.value.trim().length)}).querySelector("input"),this.passwordInput.focus()}draw(){return this.create(),this.boxContent.classList.add("gap","margin-top"),this.config.protected?(this.addPasswordInput(),this.addValidationErrorBox()):this.boxContent.remove(),super.draw()}}},34508:(t,e,n)=>{"use strict";n.d(e,{A:()=>a,_:()=>s});var i=n(57973),r=n(56127),o=n(81807);const a="rename-ms-map-btn";class s extends i.g{nameInput;passwordInput;get validationCallbackData(){return{newName:this.nameValue,password:this.passwordValue}}get passwordValue(){return this.passwordInput?.value.trim()}get nameValue(){return this.nameInput?.value.trim()}constructor(t){t.icon="rename",t.title="Rename Map",t.description=t.protected?`Map "${t.mapName}" is protected. Enter existing password for this map to change its name`:`Enter a new name for "${t.mapName}" map.`,super(t)}updateButton(){const t=this.nameValue==this.config.mapName,e=this.config.protected&&!this.passwordValue.length;this.toggleButton(a,t||e)}addNameInput(){(0,o.tTh)(".section-input",this.boxContent,[...this.config.protected?[(0,o.tTh)("label.label",{style:{maxWidth:"80px"}},"New Name")]:[],(0,o.tTh)("input.max",{attr:{type:"text",placeholder:"New name",value:this.config.mapName??""},events:{input:()=>this.updateButton()},middleware:t=>this.nameInput=t})]),setTimeout((()=>this.nameInput.focus()),250),this.nameInput.setSelectionRange(this.nameInput.value.length,this.nameInput.value.length)}addPasswordInput(){this.toggleButton(a,!0),this.passwordInput=(0,r.O)(this.boxContent,{label:"Password",labelMinWidth:"80px",placeholder:"Insert map password",visibilityToggle:!0,onInput:()=>this.updateButton()}).querySelector("input")}draw(){return this.create(),this.boxContent.classList.add("gap","margin-top"),this.addNameInput(),this.config.protected&&(this.addPasswordInput(),this.addValidationErrorBox()),super.draw()}}},80745:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var i=n(57973),r=n(81807);const o="replace-map-btn",a="keep-both-map-btn";class s extends i.g{checkbox;get applyToAll(){return this.checkbox.classList.contains("checked")}constructor(t){t.title="Existing Map",t.icon="alert",t.description=t.description??`A map named "${t.mapName}" already exists at this level. Do you want to replace it with the one you are uploading?`,t.buttons=[{text:"Cancel",action:"cancel"},{id:a,text:"Keep Both",action:"keepBoth"},{id:o,text:"Replace",action:"replace"}],super(t)}handleCheckboxClick(){this.changeButtonAction(a,this.applyToAll?"keepAll":"keepBoth"),this.changeButtonAction(o,this.applyToAll?"replaceAll":"replace")}maybeShowAlert(){this.config.alertMessage&&(0,r.tTh)("span.alert-message",this.boxContent,this.config.alertMessage)}addCheckbox(){(0,r.tTh)(".apply-to-all",this.leftButtonBox,[(0,r.tTh)(".checkbox-new.icon",{middleware:t=>this.checkbox=t,events:{click:(t,e)=>{e.classList.toggle("checked"),this.handleCheckboxClick()}}}),(0,r.tTh)("span.text","Apply to All")])}changeButtonAction(t,e){const n=this.config.buttons.find((e=>e.id===t));n&&(n.action=e)}draw(){return this.create(),this.maybeShowAlert(),this.addCheckbox(),super.draw()}}},37469:(t,e,n)=>{"use strict";n.d(e,{D:()=>s,n:()=>a});var i=n(57973),r=n(56127),o=n(81807);const a="save-ms-map-btn";class s extends i.g{passwordInput;saveTo="myStorage";myStorageContentBox;get validationCallbackData(){return{saveTo:this.saveTo,password:this.passwordValue,mapName:this.config.mapName}}get passwordValue(){return this.passwordInput?.value.trim()}constructor(t){t.title="My Storage Map",t.description=(t.mapName?`The map "${t.mapName}"`:"Current map")+" is published on My Storage. \n        Select an option to proceed:",super(t)}updateButton(){const t=this.config.protected&&"myStorage"==this.saveTo&&!this.passwordValue.length;this.toggleButton(a,t)}addPasswordInput(){this.toggleButton(a,!0),this.passwordInput=(0,r.O)(this.myStorageContentBox,{label:"Password",labelMinWidth:"80px",placeholder:"Insert map password",visibilityToggle:!0,onInput:()=>this.updateButton()}).querySelector("input")}drawContainer(){(0,o.tTh)(".save-as-options",this.boxContent,[(0,o.tTh)(".option-container",[(0,o.Wx1)(".save-on-my-storage-radio",null,{name:"save-as",list:[{value:"myStorage",text:"Save on My Storage",selected:!0}],change:()=>{this.saveTo="myStorage",this.passwordInput&&(this.passwordInput.disabled=!1),this.updateButton()}}),(0,o.tTh)(".content-box",{middleware:t=>this.myStorageContentBox=t},[(0,o.tTh)(".text","Save changes on My Storage and update the map for all users.")])]),(0,o.tTh)(".option-container",[(0,o.Wx1)(".save-as-copy-radio",null,{name:"save-as",list:[{value:"local",text:"Save as Local Copy"}],change:()=>{this.saveTo="local",this.passwordInput&&(this.passwordInput.disabled=!0),this.updateButton()}}),(0,o.tTh)(".content-box.hide",[(0,o.tTh)(".text","My Storage map will not be updated. A local copy of this map will be created with current changes.")])])])}draw(){return this.create(),this.boxContent.classList.add("gap","margin-top"),this.drawContainer(),this.config.protected&&(this.addPasswordInput(),this.addValidationErrorBox()),super.draw()}}},42007:(t,e,n)=>{"use strict";n.d(e,{b:()=>l});var i=n(81807),r=n(57973),o=n(46449),a=n(15436),s=n(69847);class l extends r.g{encryptionCheckbox;storageNameInput;encryptionKeyInput;generateKeyButton;get isEncryptSelected(){return this.encryptionCheckbox.classList.contains("checked")}get storageName(){return this.storageNameInput.value.trim()}get validationCallbackData(){return{storageName:this.storageName,encryptionKey:this.isEncryptSelected?this.encryptionKeyInput.value.trim():null}}toggleEncryptionSection(){this.isEncryptSelected?(this.encryptionKeyInput.removeAttribute("disabled"),this.generateKeyButton.classList.remove("disabled")):(this.encryptionKeyInput.setAttribute("disabled","true"),this.generateKeyButton.classList.add("disabled"))}constructor(t){t.size={height:"600px",width:"750px"},t.title="Setup My Storage",t.icon="okviz-storage",t.description="As part of your license, you have access to a dedicated space on our servers to store your maps. \n        Complete the setup to start using it:",super(t)}validateName(t){const e=t.value.trim(),n=e.length>=3&&e.length<=50;this.toggleValidationError(t,n||""==e?"":"The storage name must be between 3 and 50 chars long.")}validateEncryptionKey(t){const e=t.value.trim(),n=e.length>=8&&e.length<=39&&!e.includes(" ");this.toggleValidationError(t,n||""==e?"":"The encryption key must be between 8 and 39 chars long and cannot contain spaces.")}toggleValidationError(t,e){const n=t.closest(".column-section").querySelector(".validation-error");n&&(n.classList.toggle("hidden",!e),n.textContent=e),this.okButton.classList.toggle("disabled",document.querySelectorAll(".validation-error:not(.hidden)").length>0)}drawStorageSetup(){this.boxContainer.classList.add("full-size"),this.boxContent.classList.add("storage-setup"),(0,i.tTh)(".flex.columns",this.boxContent,[(0,i.tTh)(".column",[(0,i.tTh)(".column-section",[(0,i.tTh)(".title","Storage Name"),(0,i.tTh)("input.max",{middleware:t=>this.storageNameInput=t,attr:{type:"text",placeholder:"My Storage"},events:{input:(t,e)=>this.validateName(e)}}),(0,i.tTh)(".validation-error.hidden")]),(0,i.tTh)(".column-section",[(0,i.tTh)(".title","Encryption"),(0,i.tTh)(".encrypt-option",[(0,i.tTh)(".checkbox-new.icon",{middleware:t=>this.encryptionCheckbox=t,events:{click:()=>{this.encryptionCheckbox.classList.toggle("checked"),this.toggleEncryptionSection()}}},[(0,i.tTh)("span","Encrypt Storage")])]),(0,i.tTh)(".flex.gap",[(0,i.tTh)("input",{attr:{type:"text",placeholder:"Encryption Key",disabled:!0},middleware:t=>this.encryptionKeyInput=t,events:{input:(t,e)=>this.validateEncryptionKey(e)}}),(0,i.tTh)(".synoptic-btn.ctrl.disabled",{middleware:t=>this.generateKeyButton=t,events:{click:()=>{this.encryptionKeyInput.value=o.Lu.GenerateRandomEncryptionKey()}}},[(0,i.tTh)(".group.white.small.border",[(0,i.tTh)("span.text.small","Generate")])])]),(0,i.tTh)(".validation-error.hidden")])]),(0,i.tTh)(".column",[(0,i.tTh)(".column-section",[(0,i.tTh)(".flex.columns",[(0,i.tTh)(".column",[(0,i.tTh)(".title","Storage Quota"),(0,i.tTh)(".quota","100 MB")]),(0,i.tTh)(".column",[(0,i.tTh)(".title","Region"),(0,i.tTh)(".region",this.config.displayRegion)])])]),(0,i.tTh)(".column-section",[(0,i.tTh)("p.encrypt-description",[(0,i.tTh)("span","You may choose to encrypt your storage. In this case, it is your duty to keep the encryption key safe and to share it within your organization."),(0,i.tTh)("br"),(0,i.tTh)("strong","The encryption is made by the client and the encryption key is not stored on our servers.")])])])]),(0,i.tTh)(".terms-section",this.boxContent,[(0,i.tTh)(".title","Terms of Service"),(0,i.tTh)(".terms",a.hu)]),(0,i.tTh)("a.learn-more",this.leftButtonBox,{events:{click:()=>{(new s.y).draw()}}},"Full Terms of Service"),setTimeout((()=>this.storageNameInput.focus()),250)}draw(){return this.create(),this.drawStorageSetup(),super.draw()}}},94855:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});var i=n(57973);class r extends i.g{draw(){return this.create(),this.boxContent.firstChild||this.boxContent.remove(),super.draw()}}},73244:(t,e,n)=>{"use strict";n.d(e,{g:()=>d});var i=n(1371),r=n(6363),o=n(6585),a=n(15874),s=n(45230),l=n(54528),c=n(57973),u=n(94855),h=n(81807);class d extends c.g{cm;isDirty=!1;get svg(){return this.minifySvg(this.cm?.state.doc.toString()||"")}constructor(t){super({...t,boxClass:"svg-editor",size:{height:"95%",width:"95%"},buttons:[{text:"Save & Close",disabled:!0,callback:()=>this.save()},{text:"Close",action:"cancel",callback:()=>this.close()}]})}draw(){return this.create(),this.cm=new i.Lz({parent:this.boxContent,state:o.$t.create({doc:this.config.svg,extensions:[r.oQ,i.Lz.lineWrapping,i.Lz.updateListener.of((t=>{t.docChanged&&(this.isDirty=!0,this.okButton?.classList.remove("disabled"))})),i.w4.of([s.Yc]),o.$t.tabSize.of(4),a.Xt.of("    "),(0,a.Lv)(),(0,a.SG)({brackets:"<>"})]})}),(0,h.tTh)(".synoptic-btn.white.border",this.leftButtonBox,{events:{click:t=>{t.preventDefault(),this.toggleSearchPanel()}}},[(0,h.tTh)(".group.white.small.border.ctrl",[(0,h.tTh)(".icon.icon-search.small")])]),this.cm.focus(),super.draw()}minifySvg(t){return t.replace(/>\s+</g,"><").replace(/\s{2,}/g," ").trim()}toggleSearchPanel(){null!==this.boxContent.querySelector(".cm-search.cm-panel")?(0,l.jO)(this.cm):(0,l.pi)(this.cm)}save(){this.isDirty&&this.config.onSave(this.svg)}close(){if(this.isDirty)return new u.V({element:this.config.element,title:"Save Changes",description:"Do you want to save changes to the SVG before closing?",buttons:[{text:"Save",callback:()=>{this.save(),this.triggerAction("ok")}},{text:"Discard Changes",callback:()=>this.destroy(),action:"cancel"}]}).draw(),!1}destroy(){this.cm.destroy(),super.destroy()}}},9788:(t,e,n)=>{"use strict";n.d(e,{t:()=>r});var i=n(81807);class r extends i.T0G{container;tabs;selectedTabId;tabElements={};abortController;constructor(t,e){super(),this.container=t,this.tabs=e,this.selectedTabId=e[0].id,this.abortController=new AbortController,this.render()}handleClick(t){this.selectedTabId!==t&&this.selectTab(t)}selectTab(t){this.tabElements[t].classList.contains("disabled")||(this.selectedTabId=t,this.container.querySelector(".selected")?.classList.remove("selected"),this.tabElements[t]?.classList.add("selected"),this.trigger("tabSelected",t))}render(){this.emptyContainer();const t=(0,i.tTh)(".section-tabs");this.tabs.forEach((e=>{const n=(0,i.tTh)(".section-tab"+(e.id===this.selectedTabId?".selected":""),t,{attr:{id:e.id}},e.label);e.hidden&&(n.style.display="none"),e.disabled&&n.classList.add("disabled"),this.tabElements[e.id]=n})),t.addEventListener("click",(t=>{const e=t.target.id;e&&this.handleClick(e)}),{signal:this.abortController.signal}),this.container.appendChild(t)}emptyContainer(){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild)}hide(t,e){if("all"===t){this.tabs.forEach((t=>t.hidden=!0));for(const t in this.tabElements)this.tabElements[t].style.display="none";this.selectedTabId=e||""}else t.forEach((t=>{const e=this.tabs.find((e=>e.id===t));e&&(e.hidden=!0,this.tabElements[t].style.display="none")})),e&&(this.selectedTabId=e)}show(t,e){if("all"===t){this.tabs.forEach((t=>t.hidden=!1));for(const t in this.tabElements)this.tabElements[t].style.display="";this.selectedTabId=e||this.tabs[0].id}else t.forEach((t=>{const e=this.tabs.find((e=>e.id===t));e&&(e.hidden=!1,this.tabElements[t].style.display="")})),e&&(this.selectedTabId=e)}disable(t,e){"all"===t?(this.tabs.forEach((t=>this.tabElements[t.id].classList.add("disabled"))),this.selectedTabId=e||""):(t.forEach((t=>{this.tabs.find((e=>e.id===t))&&this.tabElements[t].classList.add("disabled")})),e&&(this.selectedTabId=e))}enable(t,e){"all"===t?(this.tabs.forEach((t=>this.tabElements[t.id].classList.remove("disabled"))),this.selectedTabId=e||this.tabs[0].id):(t.forEach((t=>{this.tabs.find((e=>e.id===t))&&this.tabElements[t].classList.remove("disabled")})),e&&(this.selectedTabId=e))}destroy(){this.abortController?.abort(),this.abortController=null,this.emptyContainer(),this.selectedTabId=null,this.tabElements=null,this.tabs=null,super.destroy()}}},73996:(t,e,n)=>{"use strict";n.d(e,{Kw:()=>r});var i=n(15436);const r={UNKNOWN:{code:1e3,title:"Unknown Error",description:"Something went wrong. Please try again.",icon:"alert"},INVALID_FILE_TYPE:{code:1001,title:"Invalid File Type",description:"The selected file is not valid. You can only upload file types as described in the documentation.",icon:"alert",helpUrl:i.tl.docsImportingMaps},INVALID_SVG:{code:1002,title:"Invalid SVG",description:"The file contains an invalid SVG structure that cannot be parsed.",icon:"alert",helpUrl:i.tl.docsImportingMaps},INVALID_JSVG:{code:1003,title:"Invalid JSVG",description:"This file cannot be parsed as a JSVG file.",icon:"alert",helpUrl:i.tl.docsImportingMaps},INVALID_JSON:{code:1004,title:"Invalid JSON",description:"The selected file is not valid. You can only upload JSON files that match the structure described in the documentation.",icon:"alert",helpUrl:i.tl.docsImportingMaps},INVALID_LEVEL:{code:1005,title:"Invalid Level",description:"Current level is not supported.",icon:"alert",helpUrl:i.tl.docsDrillMode},BLANK:{code:1006,title:"(Blank)",description:'Cannot display maps without data points. Try changing the selection or set "Show items with no data".',icon:"alert"},NO_SELECTOR_MAPS:{code:1007,title:"No Maps",description:"No maps match the selector.",icon:"filter",helpUrl:i.tl.docsMapSelector},UNREACHABLE:{code:1008,title:"Unreachable",description:"The server is unreachable or the URL is invalid.",icon:"compass"},UNAUTHORIZED:{code:1009,title:"Unauthorized",description:"You are not authorized to access this resource.",icon:"disallow"},NOT_FOUND:{code:1010,title:"Not Found",description:"Map could not be found.",icon:"compass"},DECRYPTION_FAILED:{code:1011,title:"Decryption Failed",description:"The file could not be decrypted. Please check the encryption key and retry.",icon:"disallow",helpUrl:i.tl.docsMyStorageSecurity},FILE_SIZE_EXCEEDED:{code:1012,title:"File Size Exceeded",description:"The selected file is too large.",icon:"error",helpUrl:i.tl.docsFileSize},IMAGE_COMPRESSION_FAILED:{code:1013,title:"Image Compression Failed",description:"Something went wrong while compressing some images in SVG.",icon:"error"},UPLOAD_SIZE_EXCEEDED:{code:1014,title:"Upload Size Exceeded",description:"The total size of the uploaded files exceeds the limit. ",icon:"error",helpUrl:i.tl.docsFileSize},TOTAL_LOCAL_MAPS_SIZE_EXCEEDED:{code:1015,title:"Local Maps Size Exceeded",description:"The total size of the local maps exceeds the limit.",icon:"error",helpUrl:i.tl.docsFileSize},MS_UNKNOWN:{code:2e3,title:"Unknown Error",description:"Something went wrong. Please try again.",icon:"alert"},MS_INVALID_EDIT_KEY:{code:2001,title:"Invalid Edit Key",description:"Missing or invalid edit key.",icon:"disallow",helpUrl:i.tl.docsMyStorageSecurity},MS_INVALID_ENCRYPTION_KEY:{code:2002,title:"Invalid Encryption Key",description:"This storage is secured with a different encryption key or you did not provide the correct one.",icon:"disallow",helpUrl:i.tl.docsMyStorageEncryptionKey},MS_INACTIVE:{code:2003,title:"Inactive Storage",description:"This storage is not active. Please contact our support.",icon:"alert"},MS_NOT_FOUND:{code:2004,title:"Storage Not Found",description:"Unable to find the specified storage.",icon:"compass"},MS_QUOTA_EXCEEDED:{code:2005,title:"Storage Quota Exceeded",description:"The storage quota has been reached. You cannot upload more files, please delete some files to free up space.",icon:"error"},MS_MAP_NOT_FOUND:{code:2006,title:"Map Not Found",description:"Map not found in the storage. It may have been deleted or moved.",icon:"compass"},MS_OPERATION_FAILED:{code:2007,title:"Operation Failed",description:"The requested operation failed.",icon:"alert"},MS_ETAG_MISMATCH:{code:2008,title:"Etag Mismatch",description:"The file has been modified by another user.",icon:"alert",helpUrl:i.tl.docsMyStorageConflicts},MS_INVALID_JSVG:{code:2009,title:"Invalid JSVG File",description:"The file could not be parsed as a JSVG file.",icon:"alert",helpUrl:i.tl.docsImportingMaps},MS_NOT_ALLOWED:{code:2010,title:"Operation Not Allowed",description:"The requested operation is not allowed.",icon:"disallow"},MS_NOT_CONNECTED:{code:2011,title:"Retry Later",description:"License information is not yet available. Please try to connect to My Storage later.",icon:"alert"}}},87006:(t,e,n)=>{"use strict";n.d(e,{z:()=>a});var i=n(81807),r=n(72210),o=n(94855);class a{config;errorContainer;msgBox;get isInline(){return this.config.container!==document.body}constructor(t){this.config={error:(0,r.T)("UNKNOWN"),container:document.body,showIcon:!0,showDetails:!1,scale:1,showCode:!0,...t},console.error(this.config.error)}async render(){const t={type:"none"};if(this.isInline)this.config.container&&this.renderInline(this.config.error);else{const e=await this.showMsgBox(this.config.error);"link"==e?.action&&(t.type="link",t.url=this.config.error.helpUrl)}return t}renderInline(t){const e=t.icon||"alert";(0,i.tTh)(".inline-error",this.config.container,{middleware:t=>this.errorContainer=t},[(0,i.tTh)(`.icon.icon-${e}`,{middleware:t=>{this.config.classes?.icon&&t.classList.add(...this.config.classes.icon)}}),(0,i.tTh)(".message-box",[(0,i.tTh)("span.title",{middleware:t=>{this.config.classes?.title&&t.classList.add(...this.config.classes.title)}},`${t.title||"Error"}`.trim()),(0,i.tTh)("span.description",{middleware:t=>{this.config.classes?.description&&t.classList.add(...this.config.classes.description)}},t.description||"Something went wrong. Unable to complete the request.")])])}showMsgBox(t){this.msgBox&&this.msgBox.destroy();const e={element:this.config.container,title:t.title||"Error",description:t.description||"Something went wrong. Unable to complete the request.",destroyCallback:this.config?.destroyCallback,buttons:[{text:"Ok"}]};return t.helpUrl&&(e.link={text:"Learn More",url:t.helpUrl}),this.config.showIcon&&(e.icon=t.icon||"alert",this.msgBox=new o.V(e)),this.msgBox.draw()}destroy(){this.msgBox&&this.msgBox.destroy(),this.errorContainer&&this.errorContainer.remove()}}},95077:(t,e,n)=>{"use strict";n.d(e,{AN:()=>o,Vu:()=>s,bJ:()=>a});var i=n(73996),r=n(72210);function o(t){return t&&"object"==typeof t&&["title","status"].every((e=>e in t))}function a(t){return t instanceof Error||t&&t.message}function s(t){if(t.instance)for(const e in i.Kw)if(i.Kw[e].code===parseInt(t.instance))return(0,r.T)(e,t.detail);return(0,r.T)("UNKNOWN",t.detail)}},72210:(t,e,n)=>{"use strict";n.d(e,{T:()=>o});var i=n(73996),r=n(95077);function o(t,e,n){if((a=t)&&"object"==typeof a&&["title","description","code","key"].every((t=>t in a)))return t;var a;if("string"==typeof t){const r={key:t,...i.Kw[t]||i.Kw.UNKNOWN};return e&&(r.details=e),n&&(r.sourceError=n),r}return(0,r.AN)(t)?(0,r.Vu)(t):o("UNKNOWN",(0,r.bJ)(t)?t.message:null,t)}},52023:(t,e,n)=>{"use strict";n.d(e,{g:()=>o});var i=n(81807),r=n(72210);class o extends i.T0G{config;abortController;get files(){return this._files}_files;constructor(t){super(),this.config=t,this.abortController=new AbortController,this.initDropArea(),this.config.button&&this.initButton()}handleDragOver(t){t.preventDefault(),this.config.container.querySelector(".sortable-chosen")||this.config.container.classList.add("drag-over")}handleDragLeave(t){t.preventDefault(),this.config.container.classList.remove("drag-over")}handleDrop(t){t.preventDefault(),this.config.container.classList.remove("drag-over");const e=t.dataTransfer?.files;e?.length&&(this.saveFiles(Array.from(e)),this.trigger("file"))}handleBrowse(){o.browseFiles(this.config.accept,!!this.config.multiple).then((t=>{t?.length&&(this.saveFiles(t),this.trigger("file"))}))}initButton(){this.config.button&&this.config.button.addEventListener("click",(()=>this.handleBrowse()),{signal:this.abortController.signal})}initDropArea(){if(!this.config.container||this.config.onlyButton)return;this.config.container.classList.add("file-dropzone");const t={signal:this.abortController.signal};this.config.container.addEventListener("dragover",(t=>this.handleDragOver(t)),t),this.config.container.addEventListener("dragleave",(t=>this.handleDragLeave(t)),t),this.config.container.addEventListener("drop",(t=>this.handleDrop(t)),t),this.config.containerClickable&&this.config.container.addEventListener("click",(()=>this.handleBrowse()),t)}saveFiles(t){if(this.removeFiles(),!t?.length)return;let e=0;for(let n=0;n<t.length;n++){let i;if(this.config.accept.includes(t[n].type)||(i=(0,r.T)("INVALID_FILE_TYPE")),e+=t[n].size,e>this.config.maxSize&&(i=(0,r.T)("UPLOAD_SIZE_EXCEEDED")),i)throw this.trigger("error",i),i}this._files=t}removeFiles(){this._files=null}destroy(){this.removeFiles(),this.abortController?.abort(),this.abortController=null,this.config.container=null,super.destroy()}static browseFiles(t=[],e=!1){return new Promise(((n,i)=>{const r=document.createElement("input");r.type="file",r.multiple=e,r.accept=t?t.join(","):"";const o=t=>{const e=t.target?.files;n(e?Array.from(e):[]),r.removeEventListener("change",o),r.remove()};r.addEventListener("change",o),r.click()}))}}},32297:(t,e,n)=>{"use strict";n.d(e,{w:()=>d});var i=n(99418),r=n(85954),o=n(81807),a=n(96826),s=n(60001),l=n(72210),c=n(78698),u=n(15436);const{sanitize:h}=i.A;class d{static IgnoreTags=["a","animate","animatecolor","animatemotion","animatetrans","animatetransform","clippath","cursor","defs","desc","discard","feblend","fecolormatrix","fecomponenttransfer","fecomposite","feconvolvematrix","fediffuselighting","fedisplacementmap","fedistantlight","fedropshadow","feflood","fefunca","fefuncb","fefuncg","fefuncr","fegaussianblur","feimage","femerge","femergenode","femorphology","feoffset","fepointlight","fespecularlighting","fespotlight","fetile","feturbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","glyph","glyphref","hkern","image","lineargradient","marker","mask","metadata","missing-glyph","mpath","pattern","radialgradient","script","set","stop","style","switch","title","tref","tspan","view","vkern"];allowedTypes=["image/svg+xml","application/json","application/xml","text/xml"];imageQuality;mapAreas(t,e=null){let n={};const i=t.getElementsByTagName("*");for(let t=0;t<i.length;t++){const e=i[t];if(!e.id)continue;if(d.IgnoreTags.includes(e.tagName.toLowerCase()))continue;if(e.closest("defs"))continue;const o=e.getAttribute("title"),a={id:e.id};o&&(a.label=o);const s=e.getAttribute(r.Lc.AreaType);s&&(a.type=s===r.wR.Link?r.wR.Link:r.wR.Area);const l=e.getAttribute(r.Lc.Strong);l?(a.strong=r.r2.Match,a.dataPoint=l):e.hasAttribute(r.Lc.Unbound)&&(a.strong=r.r2.Unmatch),this.ensureProperties(a,e),n[a.id]=a}return e&&(n={...n,...e}),n}ensureProperties(t,e){for(const n in r.Hv)r.Hv[n].forEach((n=>{const[i,r,o]=n;let s=e.getAttribute(i);if(s){if("function"==typeof o&&!o(s))return;if("boolean"==o||"!boolean"==o){if(s=(0,a.yl)(s),"boolean"!=typeof s)return;"!boolean"==o&&(s=!s)}if("number"==o&&(s=Number(s),isNaN(s)))return;(0,a.TP)(t,r,s)}}))}getMapRects(t){const e=(new DOMParser).parseFromString(t,"image/svg+xml"),n=(0,o.tTh)("div",document.body,{style:{visibility:"hidden",position:"absolute"}},[e.documentElement]),i=n.getElementsByTagName("*"),r={};for(let t=0;t<i.length;t++){const e=i[t];if(!e.id)continue;if(d.IgnoreTags.includes(e.tagName.toLowerCase()))continue;if(e.closest("defs"))continue;let n={x:0,y:0,width:0,height:0};try{n=e.getBBox()}catch(t){try{n=e.getBoundingClientRect()}catch(t){}}r[e.id]={x:(0,o.LIG)(n.x,2),y:(0,o.LIG)(n.y,2),width:(0,o.LIG)(n.width,2),height:(0,o.LIG)(n.height,2)}}return n.remove(),r}assignIdsToSvg(t){const e={},n=new Set,i=new Set,o=t.getElementsByTagName("*");for(let t=0;t<o.length;t++){const e=o[t].id;e&&(n.has(e)&&i.add(e),n.add(e))}for(let t=0;t<o.length;t++){const a=o[t];let s=a.id;if(s)i.has(s)&&a.setAttribute("id",(0,c.Jp)(s,`${t+1}`));else{const t=a.nodeName;e[t]||(e[t]=1);do{s=t+e[t]++}while(n.has(s));n.add(s),a.setAttribute("id",s),a.setAttribute(r.Lc.AutoId,"true")}}return n.clear(),i.clear(),t}async createFromFile(t,e,n,i){if(!t||!t.type||!this.allowedTypes.includes(t.type))throw(0,l.T)("INVALID_FILE_TYPE");if(t.size>u.$D)throw(0,l.T)("FILE_SIZE_EXCEEDED");let r;try{r=await this.getFileContentAsString(t)}catch(t){throw(0,l.T)("INVALID_FILE_TYPE")}if(r)return this.createFromString({content:r,source:t.name,sourceType:t.type,sanitize:!0,name:e,id:n,existingJsvg:i})}duplicateJsvg(t){const e=(new Date).toISOString(),n=(0,a.Pu)(t.svg),i={id:(0,o.uRe)(),name:(0,c.lx)(t.name),source:t.source,dataMapping:t.dataMapping,svg:t.svg,rects:t.rects};return t.meta?(t.meta.created=e,delete t.meta.updated,i.meta=t.meta,i.meta.size=n):i.meta={created:e,size:n},i}async createFromString(t){if(!t||!t.content||!t.source)return null;const e=t.sourceType&&"application/json"===t.sourceType;let n=(t=>{if(!e)return t.existingJsvg??null;const n=JSON.parse(t.content);if((0,r.PJ)(n))return n;throw(0,l.T)("INVALID_JSVG")})(t),i=e?n.svg:t.content;t.sanitize&&(i=h(i,{USE_PROFILES:{svg:!0,svgFilters:!0},ADD_TAGS:["use"],ADD_ATTR:["title","okviz"]}));const u=(0,s.$D)(i,!0);if(u.isValid&&u.svgDoc){1!==this.imageQuality&&await(0,s.Us)(u.svgDoc,this.imageQuality);const e=u.svgDoc.documentElement,i=n?.name||t.name||(0,a.T3)(t.source),l=this.assignIdsToSvg(u.svgDoc),h=n?.dataMapping?.areas,p=this.mapAreas(l,h),f=(new XMLSerializer).serializeToString(l),g=this.getMapRects(f),m=(new Date).toISOString(),v=n?.meta?.created||m,y={id:t.id??(0,o.uRe)(!1),name:(0,c.lx)(i),source:t.source,dataMapping:{areas:p},meta:{created:v,updated:m},svg:f,rects:g},b=n?.dataMapping?.mapSelector;b&&(y.dataMapping.mapSelector=b);const w=n?.meta?.author||("svg"!==(d=e).tagName.toLowerCase()?"":d.getAttribute(r.Lc.SvgAuthor)||"");w&&(y.meta.author=w);const S=n?.meta?.attribution||(t=>"svg"!==t.tagName.toLowerCase()?"":t.getAttribute(r.Lc.SvgAttribution)||"")(e);return S&&(y.meta.attribution=S),y.meta.size=(0,a.Pu)(f),n=null,y}throw n=null,u.error;var d}async getFileContentAsString(t){return new Promise(((e,n)=>{const i=new FileReader;i.onload=()=>{"string"==typeof i.result?e(i.result):n()},i.onerror=()=>n(),i.readAsText(t)}))}}},11865:(t,e,n)=>{"use strict";n.d(e,{WA:()=>o,XQ:()=>a,v4:()=>s});var i=n(81807),r=n(32017);const o=[{name:"connector",title:"Connector",description:"Customize connect between the select labels and the relative map elements.",hasReset:!0,hasToggle:!0,disabled:!0,type:"group",children:[{name:"info",type:"slice",children:[{name:"text",type:"option",optionType:"text",description:"𝓲   Drag the label to see the connector, as it is visible only with a custom position."}]},{name:"line",title:"Line",type:"slice",children:[{name:"style",title:"Style",type:"option",optionType:"radio",options:{straight:{description:"Straight",icon:"line-straight"},curved:{description:"Curved",icon:"line-curve"},step:{description:"Step",icon:"line-step"},arc:{description:"Arc",icon:"line-arc"}},value:"straight"},{name:"curviness",title:"Curviness / Stub",type:"option",optionType:"number",hasSlider:!0,min:0,max:100,value:0},{name:"gap",title:"Gap",type:"option",optionType:"number",hasSlider:!0,min:-20,max:20,value:1,visibleIf:t=>["straight","step"].includes(t["connector.line.style"])},{name:"color",title:"Color",type:"option",optionType:"color",value:"#000000"},{name:"width",title:"Stroke Width",type:"option",optionType:"number",hasSlider:!0,min:1,max:20,value:1}]},{name:"source",title:"Label Endpoint",type:"slice",children:[{name:"endpoint",title:"Icon",type:"option",optionType:"radio",options:{none:{description:"None",icon:"endpoint-no"},circle:{description:"Circle",icon:"endpoint-circle"},rect:{description:"Rectangle",icon:"endpoint-rect"},arrow:{description:"Arrow",icon:"endpoint-left-arrow"}},value:"none"},{name:"anchor",title:"Anchor",type:"option",optionType:"select",options:{auto:{title:"Auto"},continuous:{title:"Continuous"},center:{title:"Center"},top:{title:"Top"},right:{title:"Right"},bottom:{title:"Bottom"},left:{title:"Left"},"top-left":{title:"Top Left"},"top-right":{title:"Top Right"},"bottom-left":{title:"Bottom Left"},"bottom-right":{title:"Bottom Right"}},value:"continuous"}]},{name:"target",title:"Area Endpoint",type:"slice",children:[{name:"endpoint",title:"Icon",type:"option",optionType:"radio",options:{none:{description:"None",icon:"endpoint-no"},circle:{description:"Circle",icon:"endpoint-circle"},rect:{description:"Rectangle",icon:"endpoint-rect"},arrow:{description:"Arrow",icon:"endpoint-right-arrow"}},value:"none"},{name:"anchor",title:"Anchor",type:"option",optionType:"select",options:{auto:{title:"Auto"},continuous:{title:"Continuous"},center:{title:"Center"},top:{title:"Top"},right:{title:"Right"},bottom:{title:"Bottom"},left:{title:"Left"},"top-left":{title:"Top Left"},"top-right":{title:"Top Right"},"bottom-left":{title:"Bottom Left"},"bottom-right":{title:"Bottom Right"}},value:"center"}]}]},{name:"style",title:"Custom Style",description:"Apply custom text style to the selected labels.",hasReset:!0,hasToggle:!0,disabled:!0,type:"group",children:[{name:"default",type:"slice",children:[{name:"font",title:"Font",type:"option",optionType:"font",min:0,max:100,familyOptions:{"(Default)":"",...i.xb8},placeholder:"Auto"}]}]},{name:"alignment",title:"Custom Alignment",type:"group",hasReset:!0,hasToggle:!0,disabled:!0,children:[{name:"default",type:"slice",children:[{name:"vAlign",title:"Vertical Alignment",type:"option",optionType:"radio",options:{top:{description:"Align Top",icon:"v-align-top"},middle:{description:"Align Middle",icon:"v-align-middle"},bottom:{description:"Align Bottom",icon:"v-align-bottom"}},value:"middle"},{name:"hAlign",title:"Horizontal Alignment",type:"option",optionType:"radio",hasToggle:!0,disabled:!0,options:{left:{description:"Align Left",icon:"h-align-left"},center:{description:"Align Center",icon:"h-align-center"},right:{description:"Align Right",icon:"h-align-right"}},value:"center"}]}]},{name:"coords",title:"Custom Position",description:"Set the custom position of the selected labels relative to the parent map element.",type:"group",hasReset:!0,hasToggle:!0,disabled:!0,visibleIf:()=>!globalThis.labelDesignerState?.mode||"selection"===globalThis.labelDesignerState.mode,children:[{name:"default",type:"slice",children:[{name:"x",title:"Horizontal Offset",type:"option",optionType:"number",placeholder:"0",value:0},{name:"y",title:"Vertical Offset",type:"option",optionType:"number",placeholder:"0",value:0},{name:"rotation",title:"Rotation",type:"option",optionType:"number",placeholder:"0",hasSlider:!0,min:-360,max:360,value:0}]}]},{name:"size",title:"Custom Size",type:"group",hasReset:!0,hasToggle:!0,disabled:!0,visibleIf:()=>!globalThis.labelDesignerState?.mode||"selection"===globalThis.labelDesignerState.mode,children:[{name:"default",type:"slice",children:[{name:"height",title:"Height",type:"option",optionType:"number",placeholder:"Auto",min:0},{name:"width",title:"Width",type:"option",optionType:"number",placeholder:"Auto",min:0}]}]},{name:"misc",title:"Visibility",type:"group",hasReset:!0,children:[{name:"default",type:"slice",children:[{name:"hidden",title:"Hide Labels",type:"option",optionType:"switch",value:!1},{name:"noBackground",title:"Hide Background",type:"option",optionType:"switch",value:!1}]}]}];function a(t){return{style:t.hasCustomTextStyle,"style.default.font":{family:t.customFontFamily,size:t.customFontSize,bold:t.customIsBold,italic:t.customIsItalic,underline:t.customIsUnderlined},alignment:t.hasCustomAlignment,"alignment.default.vAlign":t.customVerticalPosition,"alignment.default.hAlign":t.customHorizontalPosition,connector:t.hasConnector,"connector.line.style":t.connectorStyle,"connector.line.curviness":t.connectorCurviness,"connector.line.color":t.connectorColor,"connector.line.width":t.connectorWidth,"connector.line.gap":t.connectorGap||1,"connector.source.endpoint":t.connectorEndpoints[0]||"none","connector.source.anchor":t.connectorAnchors[0]||"continuous","connector.target.endpoint":t.connectorEndpoints[1]||"none","connector.target.anchor":t.connectorAnchors[1]||"center",coords:t.hasCustomPosition,"coords.default.x":t.hasCustomPosition?t.customSettings.coords.x:null,"coords.default.y":t.hasCustomPosition?t.customSettings.coords.y:null,"coords.default.rotation":t.customSettings?.rotation,size:t.hasCustomSize,"size.default.height":t.hasCustomSize?t.customSettings.size.height:null,"size.default.width":t.hasCustomSize?t.customSettings.size.width:null,"misc.default.noBackground":t.forceNoBackground,"misc.default.hidden":t.isHidden}}function s(t,e=0){const n=(n,a)=>{const s=Array.isArray(t[n])?t[n][e]:t[n];if(null==s)return null;const l=(0,i._dk)(o,n);return("option"===l.type?r(l.value,s):l.disabled===!s)?null:a?a(s):s},a={};a.text=n("style",(()=>{const t=n("style.default.font");return{...t.family?{fontFamily:t.family}:{},...t.size?{fontSize:t.size}:{},bold:t.bold,italic:t.italic,underline:t.underline}})),a.alignment=n("alignment",(()=>({horizontal:n("alignment.default.hAlign"),vertical:n("alignment.default.vAlign")}))),a.connector=n("connector",(()=>({style:n("connector.line.style"),curviness:n("connector.line.curviness"),color:n("connector.line.color"),width:n("connector.line.width"),gap:n("connector.line.gap"),endpoints:[n("connector.source.endpoint"),n("connector.target.endpoint")],anchors:[n("connector.source.anchor"),n("connector.target.anchor")]}))),n("coords")?(a.coords={...n("coords.default.x",(t=>({x:t}))),...n("coords.default.y",(t=>({y:t})))},a.rotation=n("coords.default.rotation")):(a.coords=null,a.rotation=null),n("size")?a.size={...n("size.default.height",(t=>({height:t}))),...n("size.default.width",(t=>({width:t})))}:a.size=null,a.noBackground=n("misc.default.noBackground"),a.hidden=n("misc.default.hidden");for(const t in a)(null==a[t]||"object"==typeof a[t]&&!(0,i.dld)(a[t]))&&delete a[t];return a}},51038:(t,e,n)=>{"use strict";n.d(e,{b:()=>o,c:()=>a});var i=n(81807),r=n(11865);const o=180;class a extends i.FT3{visualSettings;modeControlSelect;globalControl;selectionControl;selectionPlaceholder;get mode(){return globalThis.labelDesignerState?.mode||"selection"}set mode(t){t!=this.mode&&(globalThis.labelDesignerState.mode=t,this.applyMode())}get canDraw(){return this.visualSettings.categoryLabels.show.value||this.visualSettings.dataLabels.show.value}constructor(t,e){super(r.WA,t),this.visualSettings=e}draw(t){super.draw(t);const e=this.visualSettings.dataLabels.show.value,n=this.visualSettings.categoryLabels.show.value,r=this.visualSettings.categoryLabels.showUnmatched.value;this.panel.prepend((0,i.tTh)(".oop-top-header",[(0,i.tTh)(".title.icon.icon-edit2","Customize Labels"),...this.canDraw?[(0,i.tTh)(".mode-control.oop-option",[(0,i.tTh)(".header","Apply to"),(0,i.tTh)("select",{middleware:t=>this.modeControlSelect=t,list:[{value:"selection",text:"(Selection)"},...n?[{value:"category",text:"Global: Category Labels"}]:[],...e?[{value:"data",text:"Global: Data Labels"}]:[]],events:{change:(t,e)=>{this.mode=e.value,this.trigger("mode")}}})]),(0,i.tTh)(".global-control",{middleware:t=>this.globalControl=t}),(0,i.tTh)(".selection-control",{middleware:t=>this.selectionControl=t},[(0,i.tTh)(".selection-placeholder",{middleware:t=>this.selectionPlaceholder=t}),(0,i.tTh)(".selection-actions",[(0,i.tTh)(".action",{events:{click:()=>this.trigger("select","*")}},"Select All"),...n&&(r||e)?[...e?[(0,i.tTh)(".action",{events:{click:()=>this.trigger("select","data")}},"Data")]:[],...n?[...e?[(0,i.tTh)(".action",{events:{click:()=>this.trigger("select","category")}},"Category")]:[],...r?[(0,i.tTh)(".action",{events:{click:()=>this.trigger("select","matched")}},"Matched"),(0,i.tTh)(".action",{events:{click:()=>this.trigger("select","unmatched")}},"Unmatched")]:[]]:[]]:[]])])]:[(0,i.tTh)(".oop-empty","Enable category or data labels to customize them.")]])),this.canDraw?((0,i.tTh)(".oop-footer",this.contentElement,[]),this.applyMode()):this.contentElement.remove()}applyMode(){const t=this.mode;this.modeControlSelect&&(this.modeControlSelect.value=t),this.selectionControl?.toggleAttribute("hidden","selection"!==t),this.globalControl?.toggleAttribute("hidden","selection"===t),this.contentElement.toggleAttribute("disabled","selection"==t),"selection"!=t&&(this.selectionPlaceholder?.querySelector(".block")?.remove(),this.selectionPlaceholder?.classList.toggle("empty",!0),this.globalControl&&(this.globalControl.textContent=`These options will be applied to all ${t} labels on this map, even those that have been filtered out.`))}selectLabels(t){if(this.canDraw){this.selectionPlaceholder.querySelector(".block")?.remove(),this.selectionPlaceholder.classList.toggle("empty",!t.length),t.length&&"selection"==this.mode&&(0,i.tTh)(".block",this.selectionPlaceholder,[(0,i.tTh)("span",`${t.length} label${t.length>1?"s":""} selected`),(0,i.tTh)(".remove.ctrl.icon-close",{attr:{title:"Clear selection"},events:{click:()=>this.trigger("deselect")}})]),this.restoreState();for(const t in this.components)this.components[t].toggleNotice();if(t.length){const e={};t.forEach((t=>{const n=(0,r.XQ)(t);for(const t in n){const i=n[t];void 0===e[t]?e[t]=i:Array.isArray(e[t])?e[t].push(i):e[t]=[e[t],i]}"selection"==this.mode&&[["connector","connector"],["style","text"],["alignment","alignment"]].forEach((([e,n])=>{t.customGlobalSettings?.[n]&&this.components[e].toggleNotice("Global custom settings are applied to the selected labels; changes made here overwrite them, but cannot be removed completely. Set 'Apply to' to 'Global: ...' to manage the global settings.",!0)}))})),this.updateState(e)}this.contentElement.toggleAttribute("disabled",!t.length)}}destroy(){this.globalControl=null,this.modeControlSelect=null,this.selectionControl=null,this.selectionPlaceholder=null,super.destroy()}}},27449:(t,e,n)=>{"use strict";n.d(e,{VI:()=>g,wf:()=>f,zq:()=>m});var i=n(81807),r=n(51038),o=n(70943),a=n(93341),s=n(10891),l=n(55081),c=n(11865);const u="label-edit-box",h=["moveable-area","moveable-control","moveable-line","moveable-origin","moveable-origin-direction"];function d(t){return t.ctrlKey||t.metaKey||t.shiftKey}class p extends o.JU{constructor(t,e,n){super(null,null,null,null,t,e,n)}get id(){return`${o.PQ}${this.config.type.slice(0,1)}`}get fingerprint(){return this.id}draw(){}select(){}deselect(){}updatePosition(){}updateSize(){}updateScale(){}}class f{labels;svgMap;container;settings;viewportScale;saveTimeout;designerPanel;abortController;selectedLabels=[];moveable;selecto;updateMoveableTimeout;get id(){return`${this.svgMap.id}-designer`}get isMoveableLocked(){return this.svgMap.zoomer.canPanWithoutKeys||this.svgMap.zoomer.panning==l.o.Panning||this.svgMap.zoomer.isSpacePressed}get moveableGuidelines(){const t=[];for(const e in this.labels)t.push(this.labels[e].labelElement);return t}constructor(t,e,n,i,r){this.labels=t,this.svgMap=e,this.container=n,this.settings=i,this.viewportScale=r,this.abortController=new AbortController,this.initMoveable(),this.initSelecto(),this.initPanel(),this.restoreSelectedLabels(),this.listen()}updateMoveableStyles(){const t=1/(this.viewportScale*this.svgMap.zoomer.state.zoom),e=Math.max(1,10*t),n=2*t,r=Math.max(1,t),o=[`.area-label-element{outline-width:${t}px !important;}`,`.moveable-control{width:${e}px !important;height:${e}px !important;margin-left:${-e/2}px !important;margin-top:${-e/2}px !important;outline-width:${n}px !important;}`,`.moveable-n,.moveable-s,.moveable-w,.moveable-e{height:${r}px !important;}`,`.moveable-rotation-line{width:${r}px !important;}`,`.moveable-vertical{width:${r}px !important;}`,`.moveable-horizontal{height:${r}px !important;}`];(0,i.fXq)("movable-styles",o)}updateViewportScale(t){this.viewportScale=t,this.updateMoveableStyles(),this.designerPanel.updateScale(t),window.clearTimeout(this.updateMoveableTimeout),this.updateMoveableTimeout=window.setTimeout((()=>this.updateMoveableTarget()),10)}updatePanelSelection(){this.designerPanel.mode=this.selectedLabels[0]instanceof p?this.selectedLabels[0].isCategory?"category":"data":"selection",this.designerPanel.selectLabels(this.selectedLabels)}restoreSelectedLabels(){const t=globalThis.labelDesignerState;if(t.selectedLabelsIds?.length){for(const e of t.selectedLabelsIds)if(e.startsWith(o.PQ))this.selectedLabels.push(new p(this.settings,{type:e.endsWith("c")?"category":"data"},this.svgMap.id));else{const t=this.labels[e];t&&(this.selectedLabels.push(t),t.select())}this.updateMoveableTarget()}this.updatePanelSelection()}listen(){this.svgMap.zoomer.on("zoom",(()=>this.updateMoveableStyles()),this.id),this.container.addEventListener("mousedown",(t=>this.onLabelClick(t)),{signal:this.abortController.signal}),document.addEventListener("keydown",(t=>this.onKeyboardMove(t)),{signal:this.abortController.signal}),this.container.addLiveEventListener("dblclick",".moveable-control",(()=>this.onRotationHandlerDoubleClick()))}onLabelClick(t){if(this.isMoveableLocked||0!=t.button)return;const e=t.target;for(const t of h)if(e.classList.contains(t))return;e.classList.contains("area-label-element")?(this.selectLabel(this.labels[e.id],!d(t),!0,t),t.stopPropagation()):"selection"==this.designerPanel.mode&&this.deselectLabels()}onKeyboardMove(t){if(this.isMoveableLocked)return;if(!this.selectedLabels.length||!this.moveable)return;if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement)return;const e=(t.shiftKey?10:1)*this.svgMap.scale.scale;let n=0,r=0;switch(t.key){case"ArrowLeft":n=-e;break;case"ArrowRight":n=e;break;case"ArrowUp":r=-e;break;case"ArrowDown":r=e;break;default:return}const o={};for(const t of this.selectedLabels){const e=t.labelElement,a=(0,i.sxo)(e),s=a.translateX+n,l=a.translateY+r;(0,i.vm6)(e,`translate(${s}px, ${l}px)`),o[t.id]={coords:this.convertCoords(t.id,{x:s,y:l})},t?.updatePosition()}this.updateCustomLabels(o),this.updatePanelSelection(),this.moveable.updateRect(),t.preventDefault()}onRotationHandlerDoubleClick(){if(!this.moveable||!this.selectedLabels.length)return;const t={};this.selectedLabels.forEach((e=>{(0,i.CXM)(e.labelElement,"rotate"),t[e.id]={rotation:0}})),this.moveable.updateRect(),this.updateCustomLabels(t),this.updatePanelSelection()}onMoveableDragStart(t){this.isMoveableLocked&&t.stop()}onMoveableDragGroupStart(t){this.isMoveableLocked&&t.stop()}onMoveableDrag(t){t.target.style.transform=t.transform;const e=this.labels[t.target.id];e?.updatePosition()}onMoveableDragGroup(t){t.events.forEach((t=>this.onMoveableDrag(t)))}onMoveableDragEnd(t,e=!0){if(!t.lastEvent)return;const[n,i]=t.lastEvent.beforeTranslate;this.updateCustomLabels({[t.target.id]:{coords:this.convertCoords(t.target.id,{x:n,y:i})}},!0,e),this.updatePanelSelection()}onMoveableDragGroupEnd(t){t.events.forEach((t=>this.onMoveableDragEnd(t,!1))),this.saveCustomLabels()}onMoveableRotate(t){t.target.style.transform=t.transform}onMoveableRotateGroup(t){t.events.forEach((t=>this.onMoveableRotate(t)))}onMoveableRotateEnd(t,e=!0){if(!t.lastEvent)return;const n=(0,i.H_l)(t.lastEvent.afterTransform);let r=t.lastEvent.rotation;r>360&&(r%=360),r<-360&&(r%=-360),this.updateCustomLabels({[t.target.id]:{rotation:r,coords:this.convertCoords(t.target.id,{x:n.translateX,y:n.translateY})}},!0,e),this.updatePanelSelection()}onMoveableRotateGroupEnd(t){t.events.forEach((t=>this.onMoveableRotateEnd(t,!1))),this.saveCustomLabels()}onMoveableResize(t){const e=Math.max(10,t.width),n=Math.max(10,t.height);t.target.style.width=`${e}px`,t.target.style.height=`${n}px`,t.target.style.transform=t.drag.transform}onMoveableResizeGroup(t){t.events.forEach((t=>this.onMoveableResize(t)))}onMoveableResizeEnd(t,e=!0){if(!t.lastEvent)return;const n=(0,i.H_l)(t.lastEvent.afterTransform);this.updateCustomLabels({[t.target.id]:{size:this.convertSize({width:t.lastEvent.width,height:t.lastEvent.height}),coords:this.convertCoords(t.target.id,{x:n.translateX,y:n.translateY})}},!0,e);const r=this.labels[t.target.id];r?.updateSize(),this.updatePanelSelection()}onMoveableResizeGroupEnd(t){t.events.forEach((t=>this.onMoveableResizeEnd(t,!1))),this.saveCustomLabels()}onMoveableClickGroup(t){if(this.isMoveableLocked||!d(t.inputEvent))return;let e;t.moveableTarget?e=this.labels[t.moveableTarget.id]:t.inputTarget.classList.contains("area-label-element")&&(e=this.labels[t.inputTarget.id]),e&&this.toggleSelection(e)}toggleSelection(t){this.selectedLabels.includes(t)?this.deselectLabel(t):this.selectLabel(t,!1)}selectLabel(t,e,n=!0,i){this.selectedLabels.includes(t)||((e||this.selectedLabels[0]instanceof p)&&this.deselectLabels(),t&&(t.select(),this.selectedLabels.push(t),this.updateMoveableTarget(i),n&&(globalThis.labelDesignerState.selectedLabelsIds=this.selectedLabels.map((t=>t.id)),this.updatePanelSelection())))}deselectLabel(t,e=!0){const n=this.selectedLabels.indexOf(t);-1!==n&&(this.selectedLabels.splice(n,1),t.deselect(),this.updateMoveableTarget(),e&&(globalThis.labelDesignerState.selectedLabelsIds=this.selectedLabels.map((t=>t.id)),this.updatePanelSelection()))}initMoveable(){this.destroyMoveable(),this.moveable=new a.Ay(this.container,{rootContainer:this.container.parentElement,className:u,draggable:!0,resizable:!0,scalable:!0,rotatable:!0,origin:!1,edge:!0,throttleResize:0,snappable:!0,useAccuratePosition:!0,isDisplaySnapDigit:!1,elementGuidelines:this.moveableGuidelines}).on("dragStart",(t=>this.onMoveableDragStart(t))).on("drag",(t=>this.onMoveableDrag(t))).on("dragEnd",(t=>this.onMoveableDragEnd(t))).on("dragGroupStart",(t=>this.onMoveableDragGroupStart(t))).on("dragGroup",(t=>this.onMoveableDragGroup(t))).on("dragGroupEnd",(t=>this.onMoveableDragGroupEnd(t))).on("rotate",(t=>this.onMoveableRotate(t))).on("rotateEnd",(t=>this.onMoveableRotateEnd(t))).on("rotateGroup",(t=>this.onMoveableRotateGroup(t))).on("rotateGroupEnd",(t=>this.onMoveableRotateGroupEnd(t))).on("resize",(t=>this.onMoveableResize(t))).on("resizeEnd",(t=>this.onMoveableResizeEnd(t))).on("resizeGroup",(t=>this.onMoveableResizeGroup(t))).on("resizeGroupEnd",(t=>this.onMoveableResizeGroupEnd(t))).on("clickGroup",(t=>this.onMoveableClickGroup(t))),this.updateMoveableStyles()}initSelecto(){this.selecto=new s.Ay({container:this.container,rootContainer:this.container.parentElement,selectableTargets:[".area-label-element"],hitRate:0,selectByClick:!1,selectFromInside:!1,toggleContinueSelect:["shift"],ratio:0}).on("dragStart",(t=>{const e=t.inputEvent.target;(this.isMoveableLocked||this.moveable.isMoveableElement(e))&&t.stop()})).on("select",(t=>{const{added:e,removed:n,isDragStartEnd:i}=t;i||(e?.forEach(((t,n)=>{const i=this.labels[t.id];i&&this.selectLabel(i,!1,n==e.length-1)})),n?.forEach(((t,e)=>{const i=this.labels[t.id];i&&this.deselectLabel(i,e==n.length-1)})))}))}updateMoveableTarget(t){this.moveable?.setState({target:this.selectedLabels.map((t=>t.labelElement)),elementGuidelines:this.moveableGuidelines},(()=>{t&&this.moveable.dragStart(t)}))}initPanel(){const t=globalThis.thisVisual.element.querySelector(".label-designer-panel");this.designerPanel=new r.c(this.viewportScale,this.settings),this.designerPanel.draw(t),globalThis.labelDesignerState.panelState&&this.designerPanel.restoreInterfaceState(globalThis.labelDesignerState.panelState),this.designerPanel.on("change",(()=>{this.selectedLabels.forEach(((t,e)=>{const n=(0,c.v4)(this.designerPanel.state,e);this.updateCustomLabels({[t.id]:n},!1,!1),t.draw(),t.select()})),this.updateMoveableTarget(),"selection"==this.designerPanel.mode?this.saveCustomLabels(300):this.saveCustomLabels(0,!1)})),this.designerPanel.on("interface",(()=>{globalThis.labelDesignerState.panelState=this.designerPanel.interfaceState})),this.designerPanel.on("deselect",(()=>{this.deselectLabels()})),this.designerPanel.on("select",(t=>{const e=Object.keys(this.labels);if("*"==t)e.forEach(((t,n)=>this.selectLabel(this.labels[t],!1,n==e.length-1)));else{this.deselectLabels();const n=e.map((t=>this.labels[t])).filter((e=>"category"==t&&e.isCategory||"data"==t&&!e.isCategory||"matched"==t&&e.isCategory&&e.isMatched||"unmatched"==t&&e.isCategory&&!e.isMatched));n.forEach(((t,e)=>this.selectLabel(t,!1,e==n.length-1)))}})),this.designerPanel.on("mode",(()=>{"selection"==this.designerPanel.mode?this.deselectLabels():this.selectLabel(new p(this.settings,{type:this.designerPanel.mode},this.svgMap.id),!0)})),this.designerPanel.on("reset",(()=>{this.removeCustomLabels(this.selectedLabels)}))}convertCoords(t,e){const n=this.labels[t];return n?{x:(0,i.LIG)((e.x+n.labelElement.offsetLeft)/this.svgMap.scale.x.scale,2),y:(0,i.LIG)((e.y+n.labelElement.offsetTop)/this.svgMap.scale.y.scale,2)}:e}convertSize(t){return{width:(0,i.LIG)(t.width/this.svgMap.scale.x.scale,2),height:(0,i.LIG)(t.height/this.svgMap.scale.y.scale,2)}}updateCustomLabels(t,e=!0,n=!0){this.settings.internal?.customLabels?.value||(this.settings.internal.customLabels.value={});const r=this.settings.internal.customLabels.value;r[this.svgMap.id]||(r[this.svgMap.id]={});for(const n in t)if(n.startsWith(o.PQ))(0,i.dld)(t[n])?r[this.svgMap.id][n]=t[n]:delete r[this.svgMap.id][n];else{const o=this.labels[n];o&&(r[this.svgMap.id][o.fingerprint]=e?{...r[this.svgMap.id][o.fingerprint],...t[n]}:t[n],(0,i.dld)(r[this.svgMap.id][o.fingerprint])||delete r[this.svgMap.id][o.fingerprint])}n&&this.saveCustomLabels()}removeCustomLabels(t){if(!this.settings.internal?.customLabels?.value)return;const e=this.settings.internal.customLabels.value;e[this.svgMap.id]&&(t?t.forEach((t=>delete e[this.svgMap.id][t.fingerprint])):delete e[this.svgMap.id],m(this.settings,!1,!1))}deselectLabels(){this.selectedLabels.forEach((t=>t.deselect())),this.selectedLabels=[],this.moveable?.setState({target:null}),delete globalThis.labelDesignerState.selectedLabelsIds,this.updatePanelSelection()}saveCustomLabels(t=0,e=!0){clearTimeout(this.saveTimeout),this.saveTimeout=window.setTimeout((()=>{m(this.settings,!1,e),this.saveTimeout=null}),t)}destroyMoveable(){this.moveable&&(this.moveable.destroy(),this.moveable=null),this.selecto&&(this.selecto.destroy(),this.selecto=null)}destroy(){this.selectedLabels=[],this.labels={},this.destroyMoveable(),this.designerPanel&&(this.designerPanel.destroy(),this.designerPanel=null),this.abortController&&(this.abortController.abort(),this.abortController=null),this.svgMap?.zoomer&&(this.svgMap.zoomer.off("zoom",this.id),this.svgMap.zoomer=null),this.svgMap=null}}function g(){document.querySelectorAll(`.${u}`).forEach((t=>t.remove()))}function m(t,e=!1,n=!0){i.XI0.BATCH({objectName:"internal",properties:{customLabels:t.internal.customLabels.value,update:Date.now().toString()},selector:null}),e||i.XI0.BATCH_SAVE(n)}},70943:(t,e,n)=>{"use strict";n.d(e,{Dc:()=>p,JU:()=>d,PQ:()=>u});var i=n(39236),r=n(81807),o=n(55079),a=n(85954),s=n(96826),l=n(63124),c=n(24072);const u="glob-";var h;!function(t){t.Category="data-cat-label",t.Data="data-label"}(h||(h={}));class d{container;elementRect;element;jsPlumb;settings;config;mapId;dataPoint;margin=2;textProps;textAnchor="start";alignmentBaseline="middle";labelContainer;labelElement;elementProxy;connector;isRendered=!1;get id(){return`okviz-l${this.config.type.slice(0,1)}-${(0,r.aHV)(this.element.id)}`.toLowerCase()}get isCategory(){return"category"===this.config.type}get isMatched(){return!!this.dataPoint}get isAutoId(){return this.element.hasAttribute(a.Lc.AutoId)}get customGlobalSettings(){return this.settings?.internal?.customLabels?.value?.[this.mapId]?.[`${u}${this.config.type.slice(0,1)}`]}get customLocalSettings(){return this.settings?.internal?.customLabels?.value?.[this.mapId]?.[this.fingerprint]}get customSettings(){const t={...this.customGlobalSettings,...this.customLocalSettings};return(0,r.dld)(t)?t:null}get hasCustomAlignment(){return!!this.customSettings?.alignment}get hasCustomPosition(){return null!=this.customSettings?.coords?.x||null!=this.customSettings?.coords?.y}get hasCustomSize(){return!!this.customSettings?.size}get hasCustomRotation(){return!!this.customSettings?.rotation}get hasCustomTextStyle(){return!!this.customSettings?.text}get hasConnector(){return!!this.customSettings?.connector}get connectorStyle(){return this.customSettings?.connector?.style||"straight"}get connectorCurviness(){return this.customSettings?.connector?.curviness||0}get connectorEndpoints(){return this.customSettings?.connector?.endpoints??["none","none"]}get connectorAnchors(){return this.customSettings?.connector?.anchors??["continuous","center"]}get connectorGap(){return this.customSettings?.connector?.gap||1}get connectorColor(){return this.customSettings?.connector?.color||"#000000"}get connectorWidth(){return this.customSettings?.connector?.width||1}get isHidden(){return this.customSettings?.hidden??!1}get isInEditMode(){return this.config.isEditMode}get placement(){return this.isCategory?this.settings.categoryLabels.placement.value.value:this.settings.dataLabels.placement.value.value}get minFontSize(){return this.isCategory?this.settings.categoryLabels.minFontSize.value:this.settings.dataLabels.minFontSize.value}get maxFontSize(){return this.isCategory?this.settings.categoryLabels.maxFontSize.value:this.settings.dataLabels.maxFontSize.value}get isOutside(){return!!this.hasCustomPosition||("outside"!==this.placement||"center"!==this.horizontalPosition||"middle"!==this.verticalPosition)&&"outside"===this.placement}get isInside(){return!this.hasCustomPosition&&("inside"===this.placement||"outside"===this.placement&&"center"===this.horizontalPosition&&"middle"===this.verticalPosition)}get hasTextStroke(){return this.isCategory?this.isMatched?this.settings.categoryLabels.showMatchedStroke.value:this.settings.categoryLabels.showUnmatchedStroke.value:this.settings.dataLabels.showStroke.value}get hasBackground(){return!this.forceNoBackground&&(this.isCategory?this.isMatched?this.settings.categoryLabels.showMatchedBackground.value:this.settings.categoryLabels.showUnmatchedBackground.value:this.settings.dataLabels.showBackground.value)}get forceNoBackground(){return this.customSettings?.noBackground??!1}get hasBackgroundStroke(){return this.isCategory?this.isMatched?this.settings.categoryLabels.showMatchedBackgroundStroke.value:this.settings.categoryLabels.showUnmatchedBackgroundStroke.value:this.settings.dataLabels.showBackgroundStroke.value}get color(){return this.isCategory?this.dataPoint?(0,r.SN4)(this.settings.categoryLabels.matchedColor,this.dataPoint.dataIndex):this.settings.categoryLabels.unmatchedColor.value.value:(0,r.SN4)(this.settings.dataLabels.color,this.dataPoint.dataIndex)}get isAutoBackgroundColor(){return this.isCategory?this.isMatched?this.settings.categoryLabels.matchedAutoBackground.value:this.settings.categoryLabels.unmatchedAutoBackground.value:this.settings.dataLabels.autoBackground.value}get backgroundColor(){return this.isCategory?this.dataPoint?(0,r.SN4)(this.settings.categoryLabels.matchedBackgroundColor,this.dataPoint.dataIndex):this.settings.categoryLabels.unmatchedBackgroundColor.value?.value:(0,r.SN4)(this.settings.dataLabels.backgroundColor,this.dataPoint.dataIndex)}get backgroundTransparency(){return this.isCategory?this.isMatched?this.settings.categoryLabels.matchedBackgroundTransparency.value:this.settings.categoryLabels.unmatchedBackgroundTransparency.value:this.settings.dataLabels.backgroundTransparency.value}get backgroundCornerRadius(){return this.isCategory?this.isMatched?this.settings.categoryLabels.matchedBackgroundCornerRadius.value:this.settings.categoryLabels.unmatchedBackgroundCornerRadius.value:this.settings.dataLabels.backgroundCornerRadius.value}get backgroundPadding(){return this.isCategory?this.isMatched?this.settings.categoryLabels.matchedBackgroundPadding.value:this.settings.categoryLabels.unmatchedBackgroundPadding.value:this.settings.dataLabels.backgroundPadding.value}get backgroundStrokeColor(){return this.isCategory?this.dataPoint?(0,r.SN4)(this.settings.categoryLabels.matchedBackgroundStrokeColor,this.dataPoint.dataIndex):this.settings.categoryLabels.unmatchedBackgroundStrokeColor.value?.value:(0,r.SN4)(this.settings.dataLabels.backgroundStrokeColor,this.dataPoint.dataIndex)}get backgroundStrokeTransparency(){return this.isCategory?this.isMatched?this.settings.categoryLabels.matchedBackgroundStrokeTransparency.value:this.settings.categoryLabels.unmatchedBackgroundStrokeTransparency.value:this.settings.dataLabels.backgroundStrokeTransparency.value}get backgroundStrokeWidth(){return this.isCategory?this.isMatched?this.settings.categoryLabels.matchedBackgroundStrokeWidth.value:this.settings.categoryLabels.unmatchedBackgroundStrokeWidth.value:this.settings.dataLabels.backgroundStrokeWidth.value}get backgroundStrokeStyle(){return this.isCategory?this.isMatched?this.settings.categoryLabels.matchedBackgroundStrokeStyle.value.value:this.settings.categoryLabels.unmatchedBackgroundStrokeStyle.value.value:this.settings.dataLabels.backgroundStrokeStyle.value.value}get strokeColor(){return this.isCategory?this.dataPoint?(0,r.SN4)(this.settings.categoryLabels.matchedStrokeColor,this.dataPoint.dataIndex):this.settings.categoryLabels.unmatchedStrokeColor.value?.value:(0,r.SN4)(this.settings.dataLabels.strokeColor,this.dataPoint.dataIndex)}get strokeTransparency(){return this.isCategory?this.isMatched?this.settings.categoryLabels.matchedStrokeTransparency.value:this.settings.categoryLabels.unmatchedStrokeTransparency.value:this.settings.dataLabels.strokeTransparency.value}get strokeWidth(){return Math.max(.1,parseInt(this.textProps.fontSize)/30*(this.isCategory?this.isMatched?this.settings.categoryLabels.matchedStrokeWidth.value:this.settings.categoryLabels.unmatchedStrokeWidth.value:this.settings.dataLabels.strokeWidth.value))}get horizontalPosition(){if(this.hasCustomAlignment)return this.customHorizontalPosition;const t=this.isCategory?a.Lc.CatHorizPos:a.Lc.DataHorizPos;return this.getAttributeOrSetting(t,this.isCategory?this.settings.categoryLabels.horizontalPosition.value:this.settings.dataLabels.horizontalPosition.value)}get customHorizontalPosition(){return this.customSettings?.alignment?.horizontal||"center"}get verticalPosition(){if(this.hasCustomAlignment)return this.customVerticalPosition;const t=this.isCategory?a.Lc.CatVertPos:a.Lc.DataVertPos;return this.getAttributeOrSetting(t,this.isCategory?this.settings.categoryLabels.verticalPosition.value:this.settings.dataLabels.verticalPosition.value)}get customVerticalPosition(){return this.customSettings?.alignment?.vertical||"middle"}get clipText(){return!(!this.hasCustomSize&&this.isOutside||this.isAutoFontSize)&&(this.isCategory?this.settings.categoryLabels.clipText.value:this.settings.dataLabels.clipText.value)}get wordWrap(){return!this.isAutoFontSize&&(this.isCategory?this.settings.categoryLabels.wordWrap.value:this.settings.dataLabels.wordWrap.value)}get canDraw(){return!(!this.isCategory&&!this.dataPoint||!this.isCategory&&this.dataPoint&&null===this.dataPoint.highlightValue)}get isBold(){return null!=this.customSettings?.text?.bold?this.customIsBold:this.isCategory?this.settings.categoryLabels.font.bold.value:this.settings.dataLabels.font.bold.value}get customIsBold(){return this.customSettings?.text?.bold??!1}get isItalic(){return null!=this.customSettings?.text?.italic?this.customIsItalic:this.isCategory?this.settings.categoryLabels.font.italic.value:this.settings.dataLabels.font.italic.value}get customIsItalic(){return this.customSettings?.text?.italic??!1}get isUnderlined(){return null!=this.customSettings?.text?.underline?this.customIsUnderlined:this.isCategory?this.settings.categoryLabels.font.underline.value:this.settings.dataLabels.font.underline.value}get customIsUnderlined(){return this.customSettings?.text?.underline??!1}get fontFamily(){return null!=this.customSettings?.text?.fontFamily?this.customFontFamily:this.isCategory?this.settings.categoryLabels.font.fontFamily.value:this.settings.dataLabels.font.fontFamily.value}get customFontFamily(){return this.customSettings?.text?.fontFamily}get fontSize(){return this.customSettings?.text?.fontSize?this.customFontSize:this.isCategory?this.settings.categoryLabels.font.fontSize.value:this.settings.dataLabels.font.fontSize.value}get customFontSize(){return this.customSettings?.text?.fontSize}get isAutoFontSize(){return!this.customSettings?.text?.fontSize&&(this.isCategory?this.settings.categoryLabels.autoFontSize.value:this.settings.dataLabels.autoFontSize.value)}get autoFontSizeScale(){return(this.isCategory?this.settings.categoryLabels.autoFontSizeScale.value:this.settings.dataLabels.autoFontSizeScale.value)/100}get fingerprint(){return this._fingerprint||(this._fingerprint=(0,r.WGQ)(`${(0,r.LIG)(this.elementRect.x,2)}-${(0,r.LIG)(this.elementRect.y,2)}-${(0,r.LIG)(this.elementRect.width,2)}-${(0,r.LIG)(this.elementRect.height,2)}-${this.config.type.slice(0,1)}${this.element.id&&!this.isAutoId?`-${this.element.id}`:""}`)),this._fingerprint}_fingerprint;get textSize(){return this._textSize||(this._textSize=(0,r.teP)(this.textProps,"font")),this._textSize}_textSize;get targetSvgRect(){return{x:(this.elementRect.x-this.config.mapScale.x.min)*this.config.mapScale.x.scale,y:(this.elementRect.y-this.config.mapScale.y.min)*this.config.mapScale.y.scale,width:this.elementRect.width*this.config.mapScale.x.scale,height:this.elementRect.height*this.config.mapScale.y.scale}}get containerCoords(){const t={x:0,y:0},e=this.targetSvgRect;return!this.hasCustomPosition&&this.isOutside?("top"===this.verticalPosition?t.y=e.y-this.textSize.height-this.margin:"bottom"===this.verticalPosition?t.y=e.y+e.height+this.margin:t.y=e.y+e.height/2-this.textSize.height/2,"left"===this.horizontalPosition?t.x=e.x-this.textSize.width-this.margin:"right"===this.horizontalPosition?t.x=e.x+e.width+this.margin:t.x=e.x+e.width/2-this.textSize.width/2):(t.x=e.x,t.y=e.y),t}getAttributeOrSetting(t,e){const n=this.element.getAttribute(t);return null==n?e:(0,s.yl)(n)}constructor(t,e,n,i,r,o,a,s){this.container=t,this.elementRect=e,this.element=n,this.jsPlumb=i,this.settings=r,this.config=o,this.mapId=a,this.dataPoint=s}updateScale(t){this.config.mapScale=t,this.draw()}updatePosition(){if(this.hasConnector&&!this.connector&&this.drawConnector(!0),this.connector)try{this.jsPlumb.revalidate(this.labelElement),this.jsPlumb.revalidate(this.elementProxy)}catch(t){}}updateSize(){this.isAutoFontSize&&(this.textProps.fontSize=this.getTextFitFontSize(this.textProps),this.labelElement.style.fontSize=this.textProps.fontSize,this.hasTextStroke&&(this.labelElement.style.webkitTextStrokeWidth=`${this.strokeWidth}px`)),this.updatePosition()}getText(){if(this.isCategory){let t=this.config.text;if(t.includes("\\n")&&(t=t.replace(/\\n/g,"\n")),t.match(/{.+?}/))for(const e in this.config.customFields){const n=new RegExp(`{${e}}`,"ig"),i="value"===e?this.getFormattedValueText():this.config.customFields[e];t=t.replace(n,i)}return t}return this.getFormattedValueText()}getTextProps(){const t={fontFamily:this.fontFamily,fontStyle:this.isItalic?"italic":"normal",fontWeight:this.isBold?"bold":"normal",fontSize:o.fromPoint(this.fontSize),text:this.getText()};return this.isAutoFontSize&&(t.fontSize=this.getTextFitFontSize(t)),t}getFormattedValueText(){if(!this.dataPoint)return"";const t=(0,i.yk)(this.dataPoint),e=r.ZA6.instance.create({format:this.dataPoint.format,formatSingleValues:!1,value:t,precision:this.isCategory?this.settings.categoryLabels.decimalPlaces.value:this.settings.dataLabels.decimalPlaces.value,displayUnitSystemType:this.isCategory?this.settings.categoryLabels.displayUnit.value:this.settings.dataLabels.displayUnit.value,allowFormatBeautification:!0,cultureSelector:this.settings.advanced.numberLocale.value.value.toString()});return e?e.format(t):""}draw(){if(this.labelContainer&&this.labelContainer.remove(),!this.canDraw)return;if(this.isRendered=!0,!this.isInEditMode&&this.isHidden)return;const t="top"===this.verticalPosition?"flex-start":"bottom"===this.verticalPosition?"flex-end":"center",e="left"===this.horizontalPosition?"flex-start":"right"===this.horizontalPosition?"flex-end":"center";if(this.textProps=this.getTextProps(),this.clipText&&!this.isInEditMode&&this.isInside&&this.textSize.height>this.targetSvgRect.height)return;const n=(0,r.tTh)(".area-label-element",{attr:{id:this.id,[this.isCategory?h.Category:h.Data]:this.element.id},style:{fontFamily:this.textProps.fontFamily,fontSize:this.textProps.fontSize,fontStyle:this.textProps.fontStyle,fontWeight:this.textProps.fontWeight,textDecoration:this.isUnderlined?"underline":"none",color:this.color,textAlign:this.horizontalPosition,alignContent:t,alignItems:e}},this.textProps.text);n.style.textWrap=this.wordWrap?"wrap":"nowrap",this.hasCustomSize&&(n.style.width=this.customSettings.size.width*this.config.mapScale.x.scale+"px",n.style.height=this.customSettings.size.height*this.config.mapScale.y.scale+"px");let i="";if(this.hasCustomPosition&&(i+=`translate(${this.customSettings.coords.x*this.config.mapScale.x.scale}px, ${this.customSettings.coords.y*this.config.mapScale.y.scale}px) `),this.hasCustomRotation&&(i+=`rotate(${this.customSettings.rotation}deg) `),i&&(n.style.transform=i.trim()),this.hasTextStroke){const t=this.strokeColor??(0,r.sP2)(this.color),e=1-this.strokeTransparency/100;n.style.webkitTextStroke=`${this.strokeWidth}px ${(0,r.aSW)((0,r.iNF)(t,e))}`,n.style.paintOrder="stroke"}if(this.clipText&&(this.isInside&&(n.style.maxWidth="100%"),n.style.overflow="hidden",n.style.textOverflow="ellipsis"),this.hasBackground){const t=this.isAutoBackgroundColor?(0,l.w5)(this.color):this.backgroundColor;if(t){const e=1-this.backgroundTransparency/100;n.style.background=(0,r.aSW)((0,r.iNF)(t,e))}if(n.style.padding=`${this.backgroundPadding}px`,this.backgroundCornerRadius&&(n.style.borderRadius=`${this.backgroundCornerRadius}px`),this.hasBackgroundStroke){const t=this.backgroundStrokeColor??this.color,e=1-this.backgroundStrokeTransparency/100;n.style.border=`${this.backgroundStrokeWidth}px ${this.backgroundStrokeStyle} ${(0,r.aSW)((0,r.iNF)(t,e))}`,n.style.paintOrder="stroke"}}this.isInEditMode&&this.isHidden&&(n.classList.add("custom-hidden"),n.style.opacity="0.5"),this.labelElement=n;const o=this.containerCoords;this.labelContainer=(0,r.tTh)(".area-label-group"+(this.isInEditMode?".editable":""),this.container,{style:{left:`${o.x}px`,top:`${o.y}px`,...this.isInside?{justifyContent:t,alignItems:e,height:`${this.targetSvgRect.height}px`,width:`${this.targetSvgRect.width}px`}:{}}},[n]),this.drawConnector()}drawConnector(t=!1){if(this.elementProxy&&this.elementProxy.remove(),this.connector&&(this.connector.endpoints?.forEach((t=>this.jsPlumb.deleteEndpoint(t))),this.connector.destroy(),this.connector=null),!(t||this.hasConnector&&this.hasCustomPosition))return;const e=(0,r.aSW)((0,r.iNF)(this.connectorColor,this.isHidden?.5:1)),n=this.targetSvgRect;this.elementProxy=(0,r.tTh)(".area-label-proxy",this.container,{style:{left:`${n.x}px`,top:`${n.y}px`,width:`${n.width}px`,height:`${n.height}px`}});const i=t=>{switch(t){case"continuous":return c.QHG.Continuous;case"center":return c.QHG.Center;case"top":return c.QHG.Top;case"right":return c.QHG.Right;case"bottom":return c.QHG.Bottom;case"left":return c.QHG.Left;case"top-left":return c.QHG.TopLeft;case"top-right":return c.QHG.TopRight;case"bottom-left":return c.QHG.BottomLeft;case"bottom-right":return c.QHG.BottomRight;default:return c.QHG.AutoDefault}},o=t=>{switch(t){case"circle":return c.RSQ.type;case"rect":return c.NlZ.type;default:return c.SYk.type}};this.connector=this.jsPlumb.connect({source:this.labelElement,target:this.elementProxy,connector:(t=>{const e=this.connectorGap;switch(t){case"curved":return{type:"Bezier",options:{curviness:Math.max(1,5*this.connectorCurviness),gap:e}};case"arc":return{type:"StateMachine",options:{curviness:this.connectorCurviness,gap:e}};case"step":return{type:"Flowchart",options:{cornerRadius:Math.max(0,this.connectorCurviness/5),gap:e}};default:return{type:"Straight",options:{stub:this.connectorCurviness,gap:e}}}})(this.connectorStyle),paintStyle:{stroke:e,strokeWidth:this.connectorWidth},anchors:[i(this.connectorAnchors[0]),i(this.connectorAnchors[1])],endpoints:[o(this.connectorEndpoints[0]),o(this.connectorEndpoints[1])],overlays:(()=>this.connectorEndpoints.map(((t,e)=>"arrow"===t?{type:"Arrow",options:{location:0===e?.01:.99,length:5*this.connectorWidth,width:5*this.connectorWidth,height:5*this.connectorWidth,direction:0===e?-1:1,foldback:.8}}:null)).filter(Boolean))()}),this.connector.endpoints.forEach((t=>{t.setPaintStyle({fill:e,stroke:e}),this.jsPlumb.repaint(t.element)}))}getTextFitFontSize(t){const e=this.hasTextStroke?1:0;let n=Math.max(.1,o.fromPointToPixel(this.minFontSize)),i=o.fromPointToPixel(this.maxFontSize),a=n;const{width:s,height:l}=this.hasCustomSize?{width:this.customSettings.size.width*this.config.mapScale.x.scale,height:this.customSettings.size.height*this.config.mapScale.y.scale}:this.targetSvgRect;for(;i-n>.5;){const o=(n+i)/2,{width:c,height:u}=(0,r.teP)({...t,fontSize:`${o}px`},"font");c>s-2*e||u>l-2*e?i=o-.5:(n=o+.5,a=o)}return a*this.autoFontSizeScale+"px"}select(){this.isInEditMode&&this.labelElement.classList.add("selected")}deselect(){this.isInEditMode&&this.labelElement.classList.remove("selected")}}function p(t){if(t.classList.contains("area-label-element")){const e=(0,r.sxo)(t),n=t.parentElement,i={x:parseFloat(n.style.left||"0"),y:parseFloat(n.style.top||"0")};return{x:e.translateX+i.x+t.offsetLeft,y:e.translateY+i.y+t.offsetTop}}return{x:parseFloat(t.style.left),y:parseFloat(t.style.top)}}},84652:(t,e,n)=>{"use strict";n.d(e,{k:()=>i,x:()=>p});var i,r=n(81807),o=n(85954),a=n(92421),s=n(298),l=n(96826),c=n(32297),u=n(72210),h=n(46449),d=n(15436);!function(t){t[t.Local=0]="Local",t[t.Remote=1]="Remote",t[t.MyStorage=2]="MyStorage",t[t.DataField=3]="DataField"}(i||(i={}));class p extends r.T0G{options;static _instance;myStorage;static get instance(){if(!p._instance)throw new Error("The MapsManager instance has not been created yet.");return p._instance}constructor(t){if(super(),this.options=t,p._instance)return p._instance;p._instance=this,this.state={maps:{},mapsOrder:{},selectedMaps:{},...t.initialState},this.jsvgGenerator=new c.w,delete t.initialState,this.cleanState(),this.myStorage=new h.Lu(t.myStorageInfo)}jsvgGenerator;state;get isEmpty(){return!Object.keys(this.state.maps).filter((t=>!(0,a.bb)(t))).length}get counts(){const t={local:0,remote:0,myStorage:0,dataField:0};for(const e in this.state.maps)this.state.maps[e].forEach((e=>{e.location===i.Local?t.local++:e.location===i.Remote?t.remote++:e.location===i.MyStorage?t.myStorage++:e.location===i.DataField&&t.dataField++}));return t}get persistableState(){const t={};for(const e in this.state.maps)(0,a.bb)(e)||(t[e]=this.state.maps[e].map((t=>{const e={...t,jsvg:t.jsvg&&t.location!==i.MyStorage&&t.location!==i.DataField?{...t.jsvg,svg:t.location==i.Local?t.jsvg.svg:null}:null};return e.jsvg&&!e.jsvg.svg&&delete e.jsvg.svg,delete e.scanned,e})));return{maps:t,mapsOrder:{...this.state.mapsOrder},selectedMaps:{...this.state.selectedMaps}}}getMemorySize(t){let e=0;for(const n in this.state.maps)this.state.maps[n].forEach((n=>{t&&n.location!==t||(e+=n.jsvg?.svg?n.size??0:0)}));return e}freeMemory(){this.getMemorySize()>d.B5&&this.cleanNonLocalSvgMaps()}findMapById(t,e){return t?this.findMap((e=>e.id===t),e):null}findMap(t,e){if(e){const n=this.state.maps[e]?.find((e=>t(e)));if(n)return{map:n,drillPathId:e}}else for(const e in this.state.maps){const n=this.state.maps[e].find((e=>t(e)));if(n)return{map:n,drillPathId:e}}return null}getDisplayMaps(t){const e=[];if(this.forEachDrillPathId(t,(t=>{e.push(...this.state.maps[t])})),(0,a.V$)(t)){const n=this.state.mapsOrder[t];n&&e.sort(((t,e)=>n.indexOf(t.id)-n.indexOf(e.id)))}return e}getMaps(t){return this.state.maps[t]||[]}getSelectedMap(t){const e=this.findMapById(this.state.selectedMaps[t])?.map;if(!e){const e=this.getRealAndVirtualDrillPathIds(t);for(let t=0;t<e.length;t++){const n=this.state.maps[e[t]];if(n?.length)return n[0]}}return e}isMapSelected(t,e){return this.state.selectedMaps[e]===t}doesMapHaveProperty(t,e,n,i=!0){const r=i?this.getRealAndVirtualDrillPathIds(n):[n];for(const n of r)if(this.state.maps[n]&&this.state.maps[n].some((n=>n[t]===e)))return!0;return!1}getUniqueMapName(t,e){return this.forEachDrillPathId(e,(n=>{this.state.maps[n].some((e=>e.name===t))&&(t=this.getUniqueMapName(`${t} copy`,e))})),t}removeMaps(t){t&&t.length?(t.forEach((t=>{this.state.maps[t]&&this.state.maps[t].forEach((t=>{t.parentMapId||this.removeMap(t.id,!1)}))})),this.cleanState()):(this.state.maps={},this.state.mapsOrder={},this.state.selectedMaps={})}removeMap(t,e=!0,n=!0){const i=this.findMapById(t);i&&(this.state.maps[i.drillPathId]=this.state.maps[i.drillPathId].filter((e=>e.id!==t)),this.getRealDrillPathIds(i.drillPathId).forEach((e=>{this.state.mapsOrder[e]&&(this.state.mapsOrder[e]=this.state.mapsOrder[e].filter((e=>e!==t))),this.state.selectedMaps[e]===t&&(this.state.selectedMaps[e]=this.state.mapsOrder[e]&&this.state.mapsOrder[e][0]||null)})),n&&this.removeChildMaps(t),e&&this.cleanState(),this.trigger("mapRemoved",t))}removeChildMaps(t){for(const e in this.state.maps)if(this.state.maps[e]){const n=this.state.maps[e].find((e=>e.parentMapId===t));n&&n.id!==t&&this.removeMap(n.id)}}cleanNonLocalSvgMaps(){for(const t in this.state.maps)this.state.maps[t].forEach((e=>{e.location!==i.Local&&e.id!==this.state.selectedMaps[t]&&this.removeMapContent(e,!1)}))}cleanState(){for(const t in this.state.maps)this.state.maps[t].length||delete this.state.maps[t];for(const t in this.state.mapsOrder)this.state.mapsOrder[t].length||delete this.state.mapsOrder[t];for(const t in this.state.selectedMaps)this.state.selectedMaps[t]||delete this.state.selectedMaps[t]}createMapFromJsvg(t,e,n,r,o,a=h.Qn.None){const s=(new Date).toISOString(),l={id:t.id,name:this.getUniqueMapName(t.name,n),location:e,source:t.source,protection:a,created:t.meta?.created||t.meta?.updated||s,updated:t.meta?.updated||s,size:t.meta?.size,jsvg:t};return e!==i.Remote&&e!==i.DataField||(l.url=t.source),r&&(l.eTag=r),o&&(l.path=o),t.dataMapping?.mapSelector&&(l.mapSelector=t.dataMapping.mapSelector),t.meta?.author&&(l.author=t.meta.author),t.meta?.attribution&&(l.attribution=t.meta.attribution),l}async createMapFromUrl(t,e,n,i,r=!1){const o=await(0,s.bv)(t,r);if(!o)return null;const a=await this.jsvgGenerator.createFromString({content:o,source:t,id:i,sanitize:!0,name:(0,s.aZ)(t)});return this.createMapFromJsvg(a,n,e)}async getMapFromMyStorage(t,e){const{jsvg:n,header:r}=await this.myStorage.getMapFromUrl(t);return n.meta.created=r.created,n.meta.updated=r.updated,n.meta.size=r.size,this.createMapFromJsvg(n,i.MyStorage,e,r.eTag,r.path,r.protection)}createMapFromMapFile(t,e){const n={id:t.id,name:this.getUniqueMapName(t.name,e),source:t.source,location:i.MyStorage,protection:t.protection||h.Qn.None,created:t.created,updated:t.updated,size:t.size,eTag:t.eTag,url:t.url};return t.author&&(n.author=t.author),t.attribution&&(n.attribution=t.attribution),t.jsvg&&(n.jsvg=t.jsvg,n.jsvg.dataMapping.mapSelector&&(n.mapSelector=n.jsvg.dataMapping.mapSelector)),n}addMap(t,e,n=!1){this.state.maps[e]||(this.state.maps[e]=[]),this.doesMapHaveProperty("id",t.id,e)||(this.state.maps[e].push(t),this.updateMapsOrder([t.id],e,!0),!n&&this.state.selectedMaps[e]||this.selectMap(t.id,e),this.trigger("mapAdded",t))}async addLocalMaps(t,e){const n=[];let r=this.getMemorySize(i.Local);for(let a=0;a<t.length;a++){const s=(0,o.fo)(t[a])?await this.jsvgGenerator.createFromFile(t[a]):this.jsvgGenerator.duplicateJsvg(t[a]);if(r+=s.meta.size,r>d.Ay)throw(0,u.T)("TOTAL_LOCAL_MAPS_SIZE_EXCEEDED");t[a]=null;const l=this.createMapFromJsvg(s,i.Local,e);this.addMap(l,e),n.push(l)}return n}async addRemoteMaps(t,e){const n=[];for(let r=0;r<t.length;r++){const o=t[r],a=await this.createMapFromUrl(o,e,i.Remote);a&&(this.addMap(a,e),n.push(a))}return n}scanMapForChildren(t,e,n){const o=e.location==i.Local?"":(0,s.cb)(e.url);for(let l=0;l<t.length;l++){const c=t[l];if(!c.dataPointValue||!c.drillToUrl)continue;let u;if(u=c.drillToUrl.startsWith("http")?c.drillToUrl:`${c.drillToUrl.startsWith("/")?new URL(o).origin:o}/${c.drillToUrl}`,(0,s.Gz)(u)){const t=(0,a.Ln)((0,a.y5)((0,r.drk)((0,a.xv)(n),c.dataPointValue)),1);if(this.doesMapHaveProperty("url",u,t))continue;const o={id:`${e.id}.${(0,r.FxW)(u)}`,name:this.getUniqueMapName((0,s.aZ)(u),t),location:i.Remote,source:u,url:u,protection:h.Qn.None,parentMapId:e.id,autoFetch:c.autoFetch};this.addMap(o,t)}}e.scanned=!0}async addRemoteMapsFromJson(t,e){if((0,o.fo)(t)){const e=await t.text();t=JSON.parse(e)}if(!(0,o.HI)(t))throw(0,u.T)("INVALID_JSON");const n={addedToDefaultDrillPath:[],added:{},discarded:[]},c=t.filter((t=>(0,s.Gz)(t.url)&&!(t.drillPath&&!(0,l.Bo)(t.drillPath))||(n.discarded.push(t.url),!1)));for(let t=0;t<c.length;t++){const o=c[t],l=o.drillPath?(0,a.y5)(o.drillPath):e;if(this.doesMapHaveProperty("url",o.url,l))continue;const u={id:(0,r.uRe)(),location:i.Remote,name:this.getUniqueMapName(o.name||(0,s.aZ)(o.url),l),source:o.url,url:o.url,protection:h.Qn.None};o.mapSelector&&(u.mapSelector=o.mapSelector),this.addMap(u,l),(l===e||(0,a.Gh)(l,e))&&n.addedToDefaultDrillPath.push(u),n.added[l]||(n.added[l]=[]),n.added[l].push(u)}return n}async updateMapsFromDataField(t){const e=(0,a.y5)(a.Ap);this.state.maps[e]&&(this.state.maps[e]=this.state.maps[e].filter((e=>t.includes(e.url)))),t.forEach((t=>{if(!this.doesMapHaveProperty("url",t,e)){const n={id:(0,r.FxW)(t),location:i.DataField,name:this.getUniqueMapName((0,s.aZ)(t),e),source:t,url:t,protection:h.Qn.None};this.addMap(n,e)}}))}addMyStorageMaps(t,e){const n=[];for(let i=0;i<t.length;i++){const r=this.createMapFromMapFile(t[i],e);r&&(this.addMap(r,e),n.push(r))}return n}renameMap(t,e){const n=this.findMapById(e);return n&&(n.map.updated=(new Date).toISOString(),n.map.name=t),n?.map||null}async updateMap(t,e,n,o){if(!t)return null;const a=this.findMapById(e);if(a){const s={...a.map,jsvg:t,updated:(new Date).toISOString(),scanned:!1},l=(t,e)=>{e?s[t]=e:delete s[t]};l("author",t.meta?.author),l("attribution",t.meta?.attribution),l("mapSelector",t.dataMapping.mapSelector);let c=!0;if(s.location===i.Remote)s.parentMapId&&(delete s.parentMapId,delete a.map.parentMapId,this.removeMap(e),this.addMap(s,n));else if(s.location===i.MyStorage){const e=await this.updateMapOnMyStorage(s,t,o);c=!0,s.eTag=e.eTag,s.id=e.id}else s.location===i.DataField&&(c=!1);if(c){for(const t in s)(0,r.cKq)(s,t)&&(a.map[t]=s[t]);this.removeChildMaps(e)}}else console.error("Map not found to update",e);return a?.map||null}async updateMapOnMyStorage(t,e,n){return this.myStorage.updateMap({mapId:t.id,eTag:t.eTag,map:e,attribution:e.meta?.attribution,author:e.meta?.author,...n?{password:n}:{}})}removeMapContent(t,e=!0){t.location!==i.Local&&(t.location===i.Remote&&t.jsvg?delete t.jsvg.svg:delete t.jsvg,e&&this.removeChildMaps(t.id),t.scanned=!1)}async refreshMap(t){const e=this.findMapById(t);if(e){if(e.map.location===i.Local)return null;const n=e.map.name,o=e.map.location===i.MyStorage||e.map.location===i.DataField&&this.isMyStorageUrl(e.map.url),a=await(o?this.getMapFromMyStorage(e.map.url,e.drillPathId):this.createMapFromUrl(e.map.url,e.drillPathId,e.map.location,t,e.map.autoFetch));if(a){if(a.location===i.Remote&&e.map.jsvg){if(a.jsvg){if(e.map.jsvg.svg=a.jsvg.svg,e.map.jsvg.rects=a.jsvg.rects,a.jsvg.dataMapping?.areas)for(const t in a.jsvg.dataMapping.areas)e.map.jsvg.dataMapping.areas[t]||(e.map.jsvg.dataMapping.areas[t]=a.jsvg.dataMapping.areas[t]);a.jsvg.meta?.author&&(e.map.author=a.jsvg.meta.author,e.map.jsvg.meta.author=a.jsvg.meta.author),a.jsvg.meta?.attribution&&(e.map.attribution=a.jsvg.meta.attribution,e.map.jsvg.meta.attribution=a.jsvg.meta.attribution)}}else for(const t in a)(0,r.cKq)(a,t)&&(e.map[t]=a[t]);e.map.id=t,e.map.location!==i.DataField&&(e.map.name=n),a.location!==i.Remote&&e.map.location!==i.DataField||(e.map.updated=(new Date).toISOString()),this.removeChildMaps(t),e.map.scanned=!1}}return e?.map||null}isMyStorageUrl(t){return new RegExp(`^https://[^./]+.${h.Lu.rootDomain}`).test(t)}updateMapsOrder(t,e,n=!1){this.getRealDrillPathIds(e).forEach((e=>{(0,a.bb)(e)||this.state.maps[e]&&(this.state.mapsOrder[e]||(this.state.mapsOrder[e]=[]),this.state.mapsOrder[e]=n?Array.from(new Set([...this.state.mapsOrder[e],...t])):t)}))}ensureMapsOrder(t){if((0,a.V$)(t)&&!this.state.mapsOrder[t])for(const e in this.state.maps)if((0,a.Gh)(e,t)){this.state.mapsOrder[t]=this.state.maps[e].map((t=>t.id)),this.state.selectedMaps[t]||(this.state.selectedMaps[t]=this.state.maps[e][0]?.id||null);break}}selectMap(t,e){this.getRealDrillPathIds(e).forEach((e=>{this.state.selectedMaps[e]=t})),t&&this.freeMemory()}deselect(t){this.selectMap(null,t)}forEachDrillPathId(t,e,n=!0){(n?this.getRealAndVirtualDrillPathIds(t):this.getRealDrillPathIds(t)).forEach((t=>{this.state.maps[t]&&e(t)}))}getRealDrillPathIds(t){const e=[];if((0,a.b4)(t))for(const n in this.state.maps)(0,a.Gh)(t,n)&&e.push(n);else e.push(t);return e}getRealAndVirtualDrillPathIds(t){return(0,a.b4)(t)?[...this.getRealDrillPathIds(t),t]:[t,(0,a.Ln)(t)]}}},62100:(t,e,n)=>{"use strict";var i,r;n.d(e,{u:()=>r}),function(t){t.matched="#eae8e8",t.unmatched="black"}(i||(i={})),function(t){t.Select="select-node",t.Reset="reset"}(r||(r={}))},63068:(t,e,n)=>{"use strict";n.d(e,{F:()=>f});var i=n(81807),r=n(85954),o=n(39236),a=n(62100),s=n(55081),l=n(60001),c=n(63124),u=n(96826),h=n(78698),d=n(32297);const p=["matched","unmatched","unbound"];class f extends i.T0G{config;areaElements;map;svg;model;mapArea;jsvg;hasSelection=!1;selectedNode=null;treeRootNode=null;zoomer;labelDisabled=!1;scale=(0,l.Ii)();get id(){return this.jsvg?.id}get isInChart(){return"chart"===this.config.context}get isInEditor(){return"editor"===this.config.context}get isInPreview(){return"preview"===this.config.context}get serializedSvg(){let t=(new XMLSerializer).serializeToString(this.map);t=t.replace(new RegExp(`(${Object.values(r.iE).join("|")})=".*?"`,"igm"),"");const e=["matching-color","edit-matching-color","zoom-on-area","has-selection","selected","highlighted","map-element","pointer","has-tooltips","matched","unmatched","unbound","greyscale","original","custom","link-to-type","group-link"];return t=t.replace(new RegExp(`class="([^"]*\\b(${e.join("|")})\\b[^"]*)"`,"gm"),((t,n)=>{const i=n.split(" ").filter((t=>!e.includes(t))).join(" ");return i?`class="${i}"`:""})),t}constructor(t){super(),this.config=t,this.mapArea=this.config.mapArea,this.model=this.config.model??null,this.jsvg=this.config.jsvg,this.parseSvgString()}getArea(t){return this.jsvg.dataMapping?.areas[t]||null}getMatchingDataPoint(t,e){let n=t;return e&&(0,i.cKq)(e.dataset,"name")&&(n=e.dataset.name),this.model.drillMode.levelExpanded&&e&&!n.includes(h._5)&&(n=(0,u.e7)(e,[r.Lc.AutoId]).map((t=>(0,h.ni)(t))).join(h._5)),(0,o.JF)(n,this.model)}areaHasDontBind(t){const e=this.getArea(t);return e?.strong===r.r2.Unmatch||!1}elementIsExcluded(t){if(!this.config.settings)return!1;const e=t.tagName.toLowerCase();return this.config.settings.areas.excludeLines.value&&"line"===e||this.config.settings.areas.excludeUnclosed.value&&"path"===e&&!(0,l.wi)(t)||this.config.settings.areas.excludeSymbols.value&&"symbol"===e||this.config.settings.areas.excludeText.value&&["text","textpath"].includes(e)}getElementStatus(t){return p.find((e=>t.classList.contains(e)))||"unmatched"}getStrongBoundArea(t){const e=this.getArea(t);return e?.strong===r.r2.Match?e:null}updateSelectedArea(){const t=this.selectedNode?.mapElement?this.selectedNode.mapElement.parentElement?this.selectedNode.mapElement.parentElement:this.selectedNode.mapElement:null;t&&this.setElementsStatus(t)}parseSvgString(){const t=new DOMParser;this.svg=t.parseFromString(this.jsvg.svg,"image/svg+xml"),this.treeRootNode=this.isInEditor?this.getSvgTreeNode(this.svg.documentElement):null}getSvgTreeNode(t,e){const n=[];for(let i=0;i<t.children.length;i++){const r=t.children[i];d.w.IgnoreTags.includes(r.tagName.toLowerCase())||n.push(this.getSvgTreeNode(r,e))}const i={mapElement:t,children:n,parent:e,treeElement:null};return n.forEach((t=>t.parent=i)),i}draw(){this.map?.remove(),this.map=this.svg.documentElement,"true"==this.map.getAttribute(r.Lc.NoLabel)&&(this.labelDisabled=!0);const t=(0,l.VJ)(this.map,!0);t&&(this.map.setAttribute("viewBox",`${t.x-5} ${t.y-5} ${t.width+10} ${t.height+10}`),this.config.settings?.appearance?.viewboxScale.value&&(0,l.XB)(this.map,1/(this.config.settings.appearance.viewboxScale.value/100))),this.map.setAttribute("width","100%"),this.map.setAttribute("height","100%"),this.isInPreview||this.map.classList.add("matching-color"),this.areaElements={},this.isInPreview||(this.setElementsStatus(this.map),this.isInEditor&&(this.map.addEventListener("contextmenu",(t=>t.preventDefault())),this.map.addEventListener("mouseup",(t=>this.handleAreaClick(t)),!0))),this.mapArea.appendChild(this.map),this.attachTooltips(this.map),this.initZoomer(),this.updateScale()}initZoomer(){if(this.config.zoomer&&!this.isInPreview){const t={container:this.mapArea,wheelStep:this.config.settings?this.config.settings.advanced.zoomSensitivity.value/10:.5,...this.config.zoomerConfig};this.zoomer=new s.j(t),this.zoomer.on("zoom",(t=>this.trigger("zoom",t))),t.zoomState&&this.zoomer.state.zoom!==t.zoomState.zoom&&this.trigger("zoom",this.zoomer.state)}}updateScale(){this.scale=(0,l.hl)(this.map,this.config.settings?.appearance.keepAspectRatio.value,this.zoomer?.state.zoom)}handleAreaClick(t){if(this.zoomer.panning==s.o.Panning)return;if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;const e=t.target,n=this.findTreeNode(this.treeRootNode,e);n&&this.selectTreeNode(n,!0)}findTreeNode(t,e){if(t){if(t.mapElement===e)return t;for(let n=0;n<t.children.length;n++){const i=this.findTreeNode(t.children[n],e);if(i)return i}}return null}selectTreeNode(t,e=!1){t.mapElement.hasAttribute(r.Lc.GroupLink)&&(t=t.parent),this.selectedNode===t||this.treeRootNode===t?this.reset(e):(this.treeRootNode.mapElement.classList.add("has-selection"),this.treeRootNode.mapElement.querySelectorAll(".selected, .highlighted").forEach((t=>t.classList.remove("selected","highlighted"))),t.mapElement.classList.add("selected","highlighted"),t.mapElement.style.outlineWidth=1/this.scale.scale+"px",this.selectedNode=t,e?this.trigger(a.u.Select):t.mapElement.scrollIntoView({block:"center",inline:"center",behavior:"smooth"}))}reset(t=!1){this.map.querySelectorAll(".selected, .highlighted").forEach((t=>t.classList.remove("selected","highlighted"))),this.treeRootNode?.mapElement.classList.remove("has-selection"),this.selectedNode=null,t&&this.trigger(a.u.Reset)}defineElementStatus(t,e,n,i,o){if(t===this.map)return;this.resetElementBinding(t),this.areaElements[t.id]=t,t.classList.add("map-element"),"text"===t.tagName.toLowerCase()&&t.classList.add("text-element");const a=this.getArea(t.id);if(!a)return;let s=a.type||r.wR.Area;if(e)return s=r.wR.Link,t.classList.add("group-link"),t.setAttribute(r.Lc.AreaType,s),void t.setAttribute(r.Lc.GroupLink,"true");if(s===r.wR.Area){if(n||this.areaHasDontBind(t.id))return void this.markElementAsUnbound(t,n);const e=this.getStrongBoundArea(t.id)?.dataPoint,a=i||e;let s;a?(s=this.getMatchingDataPoint(a)?.id,t.setAttribute(r.Lc.Strong,a)):s=o||this.getMatchingDataPoint(t.id,t)?.id,s?this.markElementAsMatched(t,s,!(e||!o&&!i)):this.markElementAsUnmatched(t)}else s===r.wR.Link&&(t.classList.add("link-to-type"),t.setAttribute(r.Lc.AreaType,s));this.ensureAreaAttributes(t,a)}ensureAreaAttributes(t,e){const n=e.type||r.wR.Area;(0,r.Ss)(n)&&r.Hv[n].forEach((n=>{const[i,r,o]=n,a=(0,u.jD)(e,r);null!=a&&("!boolean"===o?t.setAttribute(i,(!a).toString()):t.setAttribute(i,a.toString()))}))}setElementsStatus(t,e=!1,n=!1,i="",o=""){if(this.defineElementStatus(t,e,n,i,o),(0,l.Md)(t)&&t.hasChildNodes()){const a=e||this.getAreaType(t.id)===r.wR.Link,s=n||this.areaHasDontBind(t.id),l=i||this.getStrongBoundArea(t.id)?.dataPoint,c=o||this.getMatchingDataPoint(t.id,t)?.id;for(let e=0;e<t.children.length;e++){const n=t.children[e];d.w.IgnoreTags.includes(n.tagName.toLowerCase())||this.setElementsStatus(n,a,s,l,c)}}}getAreaType(t){const e=this.getArea(t);return e?.type||r.wR.Area}resetElementBinding(t){t.classList.remove("matched","unmatched","group-matched","group-unbound","group-link","pointer","original","greyscale","custom","unbound","link-to-type"),[r.Lc.AreaType,r.Lc.DrillTo,r.Lc.GroupLink,r.Lc.LinkTo,r.Lc.LinkToMap,r.Lc.GroupMatched,r.Lc.Matched,r.Lc.Strong,r.Lc.GroupUnbound,r.Lc.Unbound,r.Lc.PreviousColor].forEach((e=>t.removeAttribute(e)))}markElementAsMatched(t,e,n=!1){if(this.elementIsExcluded(t))return;if(t.setAttribute(n?r.Lc.GroupMatched:r.Lc.Matched,e),t.classList.add("matched"),(0,l.Md)(t)||this.isInEditor)return;t.classList.add("pointer","has-tooltips");const i=(0,o.JF)(e,this.model);this.applyElementStyle(t,!this.config.model.hasHighlights||i.highlightValue,i)}markElementAsUnmatched(t){this.elementIsExcluded(t)||(t.classList.add("unmatched"),(0,l.Md)(t)||this.isInEditor||(this.config.settings?.tooltips.showCategories.value&&this.config.settings.tooltips.showUnmatched.value&&t.classList.add("has-tooltips"),this.applyElementStyle(t,!this.config.model.hasHighlights)))}markElementAsUnbound(t,e){this.elementIsExcluded(t)||(t.setAttribute(r.Lc.Unbound,"true"),e&&t.setAttribute(r.Lc.GroupUnbound,"true"),t.classList.add("unbound"),(0,l.Md)(t)||this.isInEditor||this.applyElementStyle(t,!this.config.model.hasHighlights))}applyElementStyle(t,e,n){const i=this.getElementStatus(t),r=(0,l.vW)(t);if(r){const t=r=>{r.children.length>0?Array.from(r.children).forEach((e=>t(e))):(this.applyColor(r,i,e,n),this.applyOpacity(r,i,e))};t(r)}else this.applyColor(t,i,e,n),this.applyOpacity(t,i,e)}attachTooltips(t){this.isInChart&&this.config.tooltipServiceWrapper&&(this.map.addEventListener("mousemove",(()=>{this.zoomer.panning==s.o.Panning&&this.config.tooltipServiceWrapper.hide()})),this.map.addEventListener("wheel",(()=>{this.config.tooltipServiceWrapper.hide()})),this.config.tooltipServiceWrapper.addTooltips(t,".has-tooltips",(t=>{if(this.zoomer.panning==s.o.Panning||this.mapArea?.classList.contains("zoom-on-area"))return;const e=!!t.getAttribute(r.Lc.GroupMatched),n=(0,o.JF)(t.getAttribute(e?r.Lc.GroupMatched:r.Lc.Matched),this.model),i=t.getAttribute("title");if(n){const t=Object.values(n.tooltips);if(this.config.settings.tooltips.showCategories.value){const e=n.label2||n.label;i&&i!==e&&(t[0].header=`${i} (${e})`)}else this.config.settings.tooltips.showValues.value||this.model?.fields?.[o.Xh.Tooltips]||(t[0].value="No tooltips");return{selectionIds:[n.selectionId],items:t}}{const e=t.id,n={displayName:"Area",value:i&&i!==e?`${i} (${e})`:e};return"custom"===this.config.settings.areas.unmatchedColorType.value.value&&(n.color=this.config.settings.areas.unmatchedColor.value.value),{selectionIds:[],items:[n]}}})))}getColorAttr(t,e){const n=t.tagName.toLowerCase();if("line"===n)return"stroke";if("text"===n||"textpath"===n)return"fill";const i=e||this.getElementStatus(t);return this.config.settings.areas[`${i}ApplyColorTo`].value.value}applyColor(t,e,n,i){const a=this.getColorAttr(t,e),s=t.getAttribute(a)||t.style[a],l=this.config.settings.areas[`${e}ColorType`].value.value;let u;if(u="custom"===l?this.config.settings.areas[`${e}Color`]?.value.value:"greyscale"===l?(0,c.bh)(s):s,t.classList.toggle("transparent","transparent"===l),"matched"==e&&i){if(this.model.legendField){const t=this.model.legendField.values?.[i.dataIndex];u=t?this.config.legendManager?.getColorFromItem(t.toString()):i.color}else"custom"===l&&(u=i.color);if(this.config.colorRulesEnumerator?.hasRules){const e=this.model.fields[o.Xh.Value]?.[0];e&&(u=this.config.colorRulesEnumerator.getColor("default",{[e.source.queryName]:{domain:this.model.domain,value:i.value,highlightValue:i.highlightValue}},s,void 0!==i.highlightValue),u!==s&&t.classList.remove("transparent"))}}n||this.config.settings.accessibility.greyscaleUnselected.value&&(t.setAttribute(r.Lc.PreviousColor,u),u=(0,c.bh)(u)),"matched"==e&&this.config.settings.advanced.fillNoneToTransparent.value&&("stroke"==a?"none"==(t.getAttribute("fill")||t.style.fill)&&(t.style.setProperty("fill","transparent","important"),t.removeAttribute("fill")):"none"==u&&(u="transparent")),u&&(t.style.setProperty(a,u,"important"),t.removeAttribute(a)),"stroke"!=a&&"original"!=this.config.settings.areas.outline.value.value&&this.applyOutline(t,u)}applyOutline(t,e){if("hidden"==this.config.settings.areas.outline.value.value)return t.style.setProperty("stroke","none","important"),void t.removeAttribute("stroke");const n="custom"==this.config.settings.areas.outlineType.value.value?this.config.settings.areas.outlineFill.value.value:(0,c.g_)(e);t.style.setProperty("stroke",n,"important"),t.removeAttribute("stroke"),t.style.setProperty("stroke-width",this.config.settings.areas.outlineWidth.value+"px","important"),t.removeAttribute("stroke-width")}applyOpacity(t,e,n){const i=this.getColorAttr(t,e),r=n?this.config.settings.areas[`${e}Transparency`].value:this.config.settings.accessibility.unselectedTransparency.value;t.style.setProperty(`${i}-opacity`,""+(100-r)/100,"important"),t.removeAttribute(`${i}-opacity`)}checkOpacity(t,e,n){const i=(0,l.vW)(t);if(i){const t=i=>{i.children.length>0?Array.from(i.children).forEach((e=>t(e))):this.applyOpacity(i,e,n)};t(i)}else this.applyOpacity(t,e,n)}select(t,e){if(this.elementIsExcluded(t))return;if(e&&(this.hasSelection=!0,this.map.classList.add("has-selection")),t.classList.toggle("selected",e),(0,l.Md)(t))return;const n=this.getElementStatus(t);this.checkOpacity(t,n,e||!this.hasSelection);const i=t=>{if(t.children.length>0)Array.from(t.children).forEach((t=>i(t)));else{const i=this.getColorAttr(t,n);if(e||!this.hasSelection){const e=t.getAttribute(r.Lc.PreviousColor);e&&(t.removeAttribute(r.Lc.PreviousColor),t.style.setProperty(i,e,"important"))}else if(this.config.settings.accessibility.greyscaleUnselected.value){const e=t.getAttribute(r.Lc.PreviousColor)||t.style[i];e&&(t.setAttribute(r.Lc.PreviousColor,e),t.style.setProperty(i,(0,c.bh)(e),"important"))}}},o=(0,l.vW)(t);i(o||t)}clearSelection(){this.hasSelection=!1,this.map.classList.remove("has-selection");for(const t in this.areaElements)this.select(this.areaElements[t],!1)}destroy(){this.zoomer&&this.zoomer.destroy(),this.zoomer=null,this.config.tooltipServiceWrapper?.hide(),this.jsvg=null,this.areaElements=null,this.svg=null,this.map?.remove(),this.map=null,this.selectedNode=null,this.treeRootNode=null,this.mapArea=null,this.config=null,super.destroy()}}},78072:(t,e,n)=>{"use strict";n.d(e,{C:()=>h});var i,r=n(81807),o=n(62100),a=n(96826),s=n(85954),l=n(78698),c=n(32297),u=n(60001);!function(t){t.Matched="matched",t.Unmatched="unmatched",t.DontBind="dontbind",t.None="none"}(i||(i={}));class h extends r.T0G{element;svgString;rootUl;treeContainer;searchBar;filterType=i.None;selectedNode=null;treeRootNode=null;constructor(t,e,n){if(super(),this.element=t,this.svgString=e,n)this.treeRootNode=n;else{const t=this.parseSvgString();this.treeRootNode=this.getSvgTreeNode(t)}}create(){this.setContainer(),this.drawTreeUI(this.treeRootNode,this.rootUl)}setContainer(){this.treeContainer=(0,r.tTh)(".tree",this.element,[(0,r.tTh)(".filter",[(0,r.tTh)(".search-bar",[(0,r.tTh)(".icon.icon-search.no-hover"),(0,r.tTh)("input.search",{middleware:t=>{this.searchBar=t},attr:{type:"search",placeholder:"Search..."},events:{input:()=>{this.filterTreeBySearch()}}})]),(0,r.tTh)(".icon.ctrl.icon-filter-new",{attr:{title:"Filter"},events:{click:t=>{this.showFilterContextMenu(t)}}})]),(0,r.tTh)(".tree-elements",[(0,r.tTh)("ul.ul-root",{middleware:t=>{this.rootUl=t},events:{click:t=>{this.handleTreeClick(t)}}})])])}showFilterContextMenu(t){r.tzH.Init("filter-context-menu",{width:"auto",sticky:t.currentTarget,items:[{type:r.KGh.Header,label:"Filter"},{label:"(All)",type:r.KGh.Radio,checked:this.filterType==i.None,className:"small-text-contextual-menu-item",onClick:()=>this.filterTreeByType(i.None)},{label:"Matched",type:r.KGh.Radio,checked:this.filterType==i.Matched,className:"small-text-contextual-menu-item",onClick:()=>this.filterTreeByType(i.Matched)},{label:"Unmatched",type:r.KGh.Radio,checked:this.filterType==i.Unmatched,className:"small-text-contextual-menu-item",onClick:()=>this.filterTreeByType(i.Unmatched)},{label:"Unbound",type:r.KGh.Radio,checked:this.filterType==i.DontBind,className:"small-text-contextual-menu-item",onClick:()=>this.filterTreeByType(i.DontBind)}]}).show(t)}filterTreeBySearch(){const t=this.searchBar.value.toLowerCase();if(!t)return this.showAllNodes(),void this.collapseAllNodes();const e=this.filterType!==i.None?".filtered":"";this.treeContainer.querySelectorAll(`li${e}`).forEach((e=>{if((e.textContent||e.innerText).toLowerCase().includes(t)){e.hidden=!1;let t=e.parentElement;for(;t&&t!==this.treeRootNode.treeElement;)t.hidden=!1,t=t.parentElement,this.expandAllParentGroup(e)}else e.hidden=!0})),this.changeCaretVisibility()}showAllNodes(){const t=this.filterType!==i.None?".filtered":"",e=this.treeContainer.querySelectorAll(`li${t}`);e&&e.forEach((t=>{t.hidden=!1,this.filterType==i.None&&t.classList.remove("filtered")})),this.changeCaretVisibility()}changeCaretVisibility(){this.treeContainer.querySelectorAll(".nested").forEach((t=>{const e=t.parentElement.querySelector(".caret");if(e){const n=t.querySelectorAll("li");Array.from(n).every((t=>t.hidden))?e.classList.add("hidden"):e.classList.remove("hidden")}}))}filterTreeByType(t){this.filterType=t,t!==i.None?(this.treeContainer.querySelectorAll("li").forEach((e=>{if(e.classList.contains(t))e.hidden=!1,e.classList.add("filtered");else{const n=e.querySelectorAll("li");Array.from(n).some((e=>e.classList.contains(t)))?(e.hidden=!1,e.classList.add("filtered")):e.hidden=!0}})),this.changeCaretVisibility()):this.showAllNodes()}parseSvgString(){return(new DOMParser).parseFromString(this.svgString,"image/svg+xml").documentElement}getSvgTreeNode(t,e=null){const n=[];for(let i=0;i<t.children.length;i++){const r=t.children[i];c.w.IgnoreTags.includes(r.tagName.toLowerCase())||n.push(this.getSvgTreeNode(r,e))}const i={mapElement:t,children:n,parent:e,treeElement:null};return n.forEach((t=>t.parent=i)),i}handleExpandCollapse(t,e=!0){const n=t.closest("li").querySelector(".nested");n.classList.toggle("active"),t.classList.contains("icon-right")?this.setCaret(t,"expanded"):(this.setCaret(t,"collapsed"),e&&(n.querySelectorAll(".nested").forEach((t=>t.classList.remove("active"))),n.querySelectorAll(".caret").forEach((t=>this.setCaret(t,"collapsed")))))}collapseAllNodes(){const t=this.treeContainer.querySelectorAll(".caret");t&&t.forEach((t=>{const e=t.closest("li").querySelector(".nested");e&&(e.classList.remove("active"),this.setCaret(t,"collapsed"))}))}setCaret(t,e){switch(e){case"expanded":t.classList.remove("icon-right"),t.classList.add("icon-bottom");break;case"collapsed":t.classList.remove("icon-bottom"),t.classList.add("icon-right")}}expandAllParentGroup(t){if(!t)return;const e=t.parentElement,n=t.querySelector(".caret"),i=e&&e.classList.contains("ul-root");n&&this.setCaret(n,"expanded"),e&&!i&&(e.classList.add("active"),e.parentElement&&e.parentElement.parentElement&&this.expandAllParentGroup(t.parentElement.parentElement))}selectNode(t,e=!1){this.selectedNode!==t&&this.treeRootNode!==t?(t.treeElement&&(t.treeElement.classList.add("selected"),!e)&&(this.expandAllParentGroup(t.treeElement),t.treeElement.querySelector(".selectable").scrollIntoView({block:"center",inline:"center"})),this.selectedNode&&this.selectedNode.treeElement&&this.selectedNode.treeElement.classList.remove("selected"),this.selectedNode=t,e&&this.trigger(o.u.Select)):this.resetSelection(e)}updateSelectedNode(){this.selectedNode&&this.selectedNode.treeElement&&this.checkTreeElementBinding(this.selectedNode)}drawTreeUI(t,e,n=1){if(t===this.treeRootNode){for(const i of t.children)this.drawTreeUI(i,e,n);return}const i=(0,l.eJ)(t.mapElement)||t.mapElement.tagName,o=(0,r.tTh)("li.tree-element",e);(0,u.Md)(t.mapElement)&&o.classList.add("is-group"),t.treeElement=o,(0,r.tTh)("span.eye.ctrl.icon.icon-visible",o);const a=(0,r.tTh)(".container",o),s=(0,r.tTh)(".selectable",a),c=(0,r.tTh)("span.text-content",s,i),h=(0,r.tTh)(".end",s);(0,r.tTh)("span.area-type.icon-label",h),(0,r.tTh)("span.dot",h),this.setTreeElementStatus(t);const d=8+10*(n-1);s.style.paddingLeft=`${d}px`;const p=(0,r.tTh)("span.caret.icon.icon-right");if(s.insertBefore(p,c),t.children.length>0){const e=(0,r.tTh)("ul.nested",o);n++;for(const i of t.children)this.drawTreeUI(i,e,n)}else p.style.visibility="hidden"}handleTreeClick(t){t.stopPropagation();const e=t.target;if(!e)return;const n=e.classList.contains("text-content")||e.classList.contains("selectable"),i=e.classList.contains("caret"),r=e.classList.contains("eye");if(n){const t=this.findTreeNode(this.treeRootNode,e.closest("li"));this.selectNode(t,!0)}if(i&&this.handleExpandCollapse(e),r){const t=this.findTreeNode(this.treeRootNode,e.closest("li"));this.handleEyeClick(t,e)}}findTreeNode(t,e){if(t){if(t.treeElement===e)return t;for(let n=0;n<t.children.length;n++){const i=this.findTreeNode(t.children[n],e);if(i)return i}}return null}setTreeElementStatus(t){const e=t.mapElement,n=t.treeElement;if(e&&n){const i=n.querySelector(".dot"),r=n.querySelector(".area-type"),o=n.querySelector(".text-content"),l=n.querySelector(".selectable");this.resetTreeElement(t);const c=e.getAttribute(s.Lc.AreaType)??s.wR.Area,u=c===s.wR.Area?"":"link-to-type";u&&n.classList.add(u);const h=(0,a.yl)(e.getAttribute(s.Lc.GroupLink)),d=(0,a.yl)(e.getAttribute(s.Lc.Unbound)),p=(0,a.yl)(e.getAttribute(s.Lc.GroupUnbound)),f=e.getAttribute(s.Lc.GroupMatched),g=e.getAttribute(s.Lc.Matched),m=e.getAttribute(s.Lc.Strong);let v=o.textContent;c===s.wR.Area?d?(this.changeDot(i,"dontbind"),n.classList.add("dontbind"),p&&n.classList.add("group-unbound"),v+="\nDo Not Bind"+(p?" (Inherited)":"")):g||f?(n.classList.add("matched"),f&&n.classList.add("group-matched"),this.changeDot(i,"none"),m&&(n.classList.add("strong"),this.changeDot(i,"strong")),v+=`\nBound to: ${g||f}${f?" (Inherited)":""}`):(this.changeDot(i,"unmatched"),n.classList.add("unmatched"),v+="\nAuto Bind"):(this.changeDot(i,"none"),c===s.wR.Link&&(n.classList.add("link-to-type"),h&&n.classList.add("group-link"),v+="\nLink")),this.setAreaTypeIcon(r,c),l.setAttribute("title",v)}}resetTreeElement(t){t.treeElement.classList.remove("matched","group-matched","unmatched","dontbind","group-unbound","link-to-type","group-link")}changeDot(t,e){switch(e){case"none":t.classList.remove("show","strong","unmatched","dontbind"),t.classList.add("hide");break;case"strong":t.classList.remove("hide","unmatched","dontbind"),t.classList.add("show",e);break;case"unmatched":t.classList.remove("show","strong","dontbind"),t.classList.add("hide",e);break;case"dontbind":t.classList.remove("hide","strong","unmatched"),t.classList.add("show",e)}}setAreaTypeIcon(t,e){e&&e!==s.wR.Area?e===s.wR.Link&&(t.classList.remove("hide","icon-label"),t.classList.add("icon-link")):t.classList.add("hide")}checkTreeElementBinding(t){if(this.setTreeElementStatus(t),t.children.length>0)for(const e of t.children)this.checkTreeElementBinding(e)}handleEyeClick(t,e){const n=e.parentElement;if(!this.hasHiddenParent(n)){n?.classList.toggle("element-hidden"),t.mapElement.style.display="none"===t.mapElement.style.display?"block":"none";const e=n.querySelector("ul");e&&e.querySelectorAll(".eye").forEach((t=>{this.changeEyeStatus(t,!0)}))}}hasHiddenParent(t){let e=t.parentElement;for(;e;){if(e.classList.contains("element-hidden"))return!0;e=e.parentElement}return!1}changeEyeStatus(t,e=!0){t&&t.parentElement?.classList.toggle("element-hidden",!e)}resetSelection(t=!1){this.selectedNode&&this.selectedNode.treeElement&&(this.selectedNode.treeElement.querySelector(".text-content").classList.remove("selected"),this.selectedNode.treeElement.classList.remove("selected")),this.selectedNode=null,t&&this.trigger(o.u.Reset)}destroy(){this.treeContainer&&this.treeContainer.remove(),this.treeContainer=null,this.svgString=null,this.selectedNode=null,this.treeRootNode=null,super.destroy()}}},23361:(t,e,n)=>{"use strict";n.d(e,{s:()=>c});var i=n(84652),r=n(63068),o=n(87006),a=n(81807),s=n(96826),l=n(46449);class c extends a.T0G{config;svgMap;errorHandler;previewContainer;svgContainer;mapMainDetails;mapSizeDetails;refreshBtn;editBtn;loadingEl;protectedMarker;constructor(t){super(),this.config=t;const e={previewContainer:document.body,showEditButton:!0,showProtection:!1,model:null};this.config={...e,...t},this.previewContainer=t.previewContainer,(0,a.tTh)(".map-preview-box",this.previewContainer,[(0,a.tTh)(".map-svg-container",{middleware:t=>this.svgContainer=t})])}show(t){t&&t.svg&&(this.svgMap=new r.F({model:this.config.model,mapArea:this.svgContainer,jsvg:t,context:"preview"}),this.svgMap.draw())}showInfo(t,e=!0){t&&(this.drawMapFooterDetails(t,e),this.drawMapMainDetails(t),this.drawRefreshButton(t),this.config.showEditButton&&this.drawEditButton(t),this.config.showProtection&&t.protection!==l.Qn.None&&this.toggleProtectedMarker(!0))}updateMapName(t){if(t&&this.mapMainDetails){const e=this.mapMainDetails.querySelector(".map-title");e&&(e.textContent=t,e.setAttribute("title",t))}}updateMapAuthor(t){if(this.mapMainDetails){const e=this.mapMainDetails.querySelector(".map-author");e&&(""==t?(e.textContent="",e.removeAttribute("title")):(e.textContent=`By ${t}`,e.setAttribute("title",`Author: ${t}`)))}}toggleProtectedMarker(t){this.protectedMarker?.remove(),t&&(this.protectedMarker=(0,a.tTh)(".protected-marker",this.previewContainer,{attr:{title:"This map is protected with a password"}},[(0,a.tTh)(".icon.icon-lock.small"),(0,a.tTh)("span.text.small","Protected")]))}loading(){this.loadingEl&&this.loadingEl.remove(),this.refreshBtn?.classList.add("refreshing"),(0,a.tTh)(".loading",this.previewContainer,{middleware:t=>this.loadingEl=t},[(0,a.tTh)(".loader")])}endLoading(){this.loadingEl&&this.loadingEl.remove(),this.refreshBtn?.classList.remove("refreshing")}drawEditButton(t){if(!t||!t.jsvg)return;const e=t.protection!==l.Qn.None;this.editBtn&&this.editBtn.remove(),(0,a.tTh)(".synoptic-btn.white.edit-btn.ctrl",this.previewContainer,{middleware:t=>this.editBtn=t,events:{click:()=>{this.trigger("editMap")}}},[(0,a.tTh)(".group.white.small.edit",{attr:{title:"Edit this map"+(e?" (protected with a password)":"")}},[(0,a.tTh)(`.icon.icon-${e?"lock":"edit"}.small`),(0,a.tTh)("span.text.small","Edit")])])}drawMapMainDetails(t){if(!t)return;let e;this.mapMainDetails&&this.mapMainDetails.remove(),(0,a.tTh)(".map-main-details",this.previewContainer,{middleware:t=>this.mapMainDetails=t},[(0,a.tTh)(".det-container",{middleware:t=>e=t},[(0,a.tTh)("span.map-title",t.name)])]),t.source&&(0,a.tTh)("span.map-source"+(t.location===i.k.Remote?".link":""),e,{events:{click:(e,n)=>{n.classList.contains("link")&&this.trigger("launchUrl",t.source)}}},t.source??""),t.author&&(0,a.tTh)("span.map-author",e,{attr:{title:`Author: ${t.author}`}},`By ${t.author}`)}drawMapFooterDetails(t,e=!0){if(!t)return;this.mapSizeDetails&&this.mapSizeDetails.remove();const n=t.updated?new Date(t.updated):null,i=n?n.toLocaleString(navigator.language,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}):null,r=e&&t.size?(0,s.v7)(t.size):null;n&&i&&(0,a.tTh)(".map-file-details",this.previewContainer,{middleware:t=>this.mapSizeDetails=t},`${i}${r?` - ${r}`:""}`)}drawRefreshButton(t){this.refreshBtn&&this.refreshBtn.remove(),t.location!==i.k.Local&&(0,a.tTh)(".icon-refresh.refresh-btn.preview-refresh.ctrl",this.previewContainer,{middleware:t=>this.refreshBtn=t,events:{click:(t,e)=>{e.classList.contains("refreshing")||(e.classList.add("refreshing"),this.trigger("refreshMap"))}}})}raiseError(t){this.errorHandler&&this.errorHandler.destroy(),this.endLoading(),this.errorHandler=new o.z({error:t,container:this.previewContainer}),this.errorHandler.render()}destroyMap(){this.svgContainer&&this.svgContainer.firstChild?.remove(),this.errorHandler&&(this.errorHandler.destroy(),this.errorHandler=null),this.svgMap&&(this.svgMap.destroy(),this.svgMap=null)}destroyMapInfo(){this.mapMainDetails&&this.mapMainDetails.remove(),this.mapSizeDetails&&this.mapSizeDetails.remove(),this.protectedMarker&&this.protectedMarker.remove(),this.editBtn&&this.editBtn.remove()}destroy(){this.destroyMap(),this.loadingEl&&this.loadingEl.remove(),this.editBtn&&this.editBtn.remove(),this.mapMainDetails&&this.mapMainDetails.remove(),this.mapSizeDetails&&this.mapSizeDetails.remove(),this.refreshBtn&&this.refreshBtn.remove(),this.svgContainer&&this.svgContainer.remove(),this.previewContainer=null,super.destroy()}}},55081:(t,e,n)=>{"use strict";n.d(e,{j:()=>o,o:()=>i});var i,r=n(81807);!function(t){t[t.None=0]="None",t[t.Started=1]="Started",t[t.Panning=2]="Panning"}(i||(i={}));class o extends r.T0G{zoom=1;abortController;config;panning=i.None;startX=0;startY=0;callbackTimeout;isSpacePressed=!1;containerRect;get zoomableElement(){return this.config.container.querySelector(".zoomable")}get canPan(){return!this.config.lockPan}get canPanWithoutKeys(){return this.canPan&&(this.config.panMode||this.config.autoPan)}get state(){return{zoom:this.zoom,position:{left:this.config.container.scrollLeft,top:this.config.container.scrollTop}}}constructor(t){super(),this.abortController=new AbortController,this.config={minZoom:1,maxZoom:1e3,step:.1,wheelStep:.5,triggerDelay:0,allowWheelZoom:!0,panMode:!1,autoPan:!0,lockZoom:!1,lockPan:!1,...t},this.config.panMode=!this.config.autoPan&&this.config.panMode,this.containerRect=this.config.container.getBoundingClientRect(),this.togglePanMode(this.config.panMode),this.addListeners(),this.applyInitialZoom()}applyInitialZoom(){this.config.maxZoom<this.config.minZoom&&(this.config.maxZoom=this.config.minZoom),this.config.zoomState?(this.zoom=Math.max(this.config.minZoom,Math.min(this.config.maxZoom,this.config.zoomState.zoom)),this.applyZoom(),this.scrollContainer(this.config.zoomState.position)):this.resetZoom()}addListeners(){this.config.container.addEventListener("mousedown",(t=>this.onMouseDown(t)),{signal:this.abortController.signal}),this.config.container.addEventListener("mousemove",(t=>this.onMouseMove(t)),{signal:this.abortController.signal}),this.config.container.addEventListener("mouseup",(t=>this.onMouseUp(t)),{signal:this.abortController.signal}),this.config.container.addEventListener("mouseleave",(t=>this.onMouseLeave(t)),{signal:this.abortController.signal}),document.addEventListener("keydown",(t=>this.onKeyDown(t)),{signal:this.abortController.signal}),document.addEventListener("keyup",(t=>this.onKeyUp(t)),{signal:this.abortController.signal}),this.config.allowWheelZoom&&this.config.container.addEventListener("wheel",(t=>this.onWheel(t)),{signal:this.abortController.signal})}togglePanMode(t){this.config.autoPan||(this.config.panMode=t,this.config.container.classList.toggle("grab",t))}onWheel(t){if(t.preventDefault(),this.config.lockZoom)return;if(this.panning==i.Panning)return;if(t.deltaY>0&&this.zoom===this.config.minZoom)return;if(t.deltaY<0&&this.zoom===this.config.maxZoom)return;let e=this.config.wheelStep;this.zoom>=10?e*=3:this.zoom>=7?e*=2:this.zoom<1&&(e=.1);const n=t.deltaY>0?Math.max(this.config.minZoom,Math.round((this.zoom-e)/e)*e):Math.min(this.config.maxZoom,Math.round((this.zoom+e)/e)*e),r=t.clientX-this.containerRect.left,o=t.clientY-this.containerRect.top,a=this.config.container.scrollLeft,s=this.config.container.scrollTop,l=(a+r)*n/this.zoom-r,c=(s+o)*n/this.zoom-o;this.zoom=n,this.applyZoom(),this.scrollContainer({left:l,top:c}),this.triggerZoom()}onMouseDown(t){if(!this.canPan)return;const e=1==t.button;(this.isSpacePressed||e||this.canPanWithoutKeys)&&this.zoom>1&&(this.config.autoPan||this.config.container.classList.add("grabbing"),this.panning=i.Started,this.startX=t.pageX,this.startY=t.pageY,t.preventDefault())}onMouseUp=t=>{this.canPan&&(setTimeout((()=>this.panning=i.None),100),this.config.container.classList.remove("grabbing"))};onMouseMove(t){if(this.canPan)if(this.panning!==i.None){this.panning=i.Panning,this.config.container.classList.add("grabbing");const e=t.pageX-this.startX,n=t.pageY-this.startY;this.config.container.scrollLeft-=e,this.config.container.scrollTop-=n,this.startX=t.pageX,this.startY=t.pageY,this.updateZoom(),t.preventDefault()}else this.config.container.classList.remove("grabbing")}onMouseLeave(t){this.canPan&&(this.config.container.classList.remove("grabbing"),this.panning=i.None)}onKeyDown(t){!this.canPan||this.canPanWithoutKeys||this.config.panMode||t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement||"Space"==t.code&&(t.preventDefault(),this.isSpacePressed=!0,this.config.container.classList.add("grab"))}onKeyUp=t=>{!this.canPan||this.canPanWithoutKeys||this.config.panMode||t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement||"Space"==t.code&&(t.preventDefault(),this.isSpacePressed=!1,this.config.container.classList.remove("grab"))};updateZoom(t=!1){const e=this.zoomableElement;if(e){if(t)this.applyZoom(e),this.scrollToCenter(e);else{const t={left:this.config.container.scrollLeft,top:this.config.container.scrollTop},n=this.getCenter(e);this.applyZoom(e);const i=this.getCenter(e);this.scrollContainer({left:t.left+(i.x-n.x),top:t.top+(i.y-n.y)})}this.triggerZoom()}}applyZoom(t){t||(t=this.zoomableElement),t.style.transformOrigin=this.zoom<1?"center":"top left",(0,r.vm6)(t,`scale(${this.zoom})`)}getCenter(t){t||(t=this.zoomableElement);const e=t.getBoundingClientRect();return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}zoomTo(t,e=!1){this.zoom=Math.max(this.config.minZoom,Math.min(this.config.maxZoom,Math.round(t/this.config.step)*this.config.step)),this.updateZoom(e)}zoomIn(){this.zoom!==this.config.maxZoom&&(this.zoom=Math.min(this.config.maxZoom,Math.round((this.zoom+this.config.step)/this.config.step)*this.config.step),this.updateZoom())}zoomOut(){this.zoom!==this.config.minZoom&&(this.zoom=Math.max(this.config.minZoom,Math.round((this.zoom-this.config.step)/this.config.step)*this.config.step),this.updateZoom())}resetZoom(){this.zoom=Math.max(1,this.config.minZoom),this.updateZoom(!0)}triggerZoom(t=!1){0===this.config.triggerDelay||t?this.trigger("zoom",this.state):(this.callbackTimeout&&clearTimeout(this.callbackTimeout),this.callbackTimeout=window.setTimeout((()=>{this.trigger("zoom",this.state)}),this.config.triggerDelay))}scrollContainer(t){this.config.container.scrollLeft===t.left&&this.config.container.scrollTop===t.top||(this.config.container.scrollLeft=t.left,this.config.container.scrollTop=t.top)}scrollToCenter(t){t||(t=this.zoomableElement);const e=t.getBoundingClientRect();this.scrollContainer({left:(e.width-this.containerRect.width)/2,top:(e.height-this.containerRect.height)/2})}zoomOnArea(t,e=100){if(!t||!this.config.container)return;const n=Array.isArray(t)?t:[t];if(0===n.length)return;this.resetZoom();let i=n[0].getBoundingClientRect();for(let t=1;t<n.length;t++){const e=n[t].getBoundingClientRect();i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom),width:Math.max(i.right,e.right)-Math.min(i.left,e.left),height:Math.max(i.bottom,e.bottom)-Math.min(i.top,e.top)}}const r=this.containerRect.width/i.width,o=this.containerRect.height/i.height,a=Math.max(Math.min(r,o)*(e/100),this.config.minZoom),s=(this.containerRect.width-i.width*a)/2-(i.left-this.containerRect.left)*a,l=(this.containerRect.height-i.height*a)/2-(i.top-this.containerRect.top)*a;this.zoom=a,this.applyZoom(),this.scrollContainer({left:-s,top:-l}),this.triggerZoom()}destroy(){this.abortController&&(this.abortController.abort(),this.abortController=null)}}},39236:(t,e,n)=>{"use strict";n.d(e,{E1:()=>c,JF:()=>f,Xh:()=>i,yk:()=>g,zk:()=>v});var i,r=n(81807),o=n(30980),a=n(78698),s=n(92421),l=n(96826);function c(t,e,n,o=0,c){const f=!n&&e?Object.keys(e.index):null,g=!n&&e?.mapField?Object.keys(e.mapField.urls):null,m=!n&&e?.mapSelector?e.mapSelector.values:null;e&&n||(e={dataPoints:[],fields:{},index:{},identityIndex:{},domain:{min:null,max:null},drillMode:{path:[],level:0,movedToNextLevel:!1,levelExpanded:!1},compareToPrevious:{dataPointsChanged:!0,mapFieldChanged:!1,mapSelectorChanged:!1},hasHighlights:!1});const y=t.dataViews;if(y&&y[0]&&y[0].categorical){const t=y[0].categorical;if(e.fields={...e.fields,...(0,r.JYz)(t.values,!1),...t.categories?(0,r.JYz)(t.categories,!1):{}},e.fields[i.MapSelector]?.[0]){const t=c.advanced.mapSelectorSeparator.value??"",n=e.fields[i.MapSelector][0].values,r=new Set;n?.forEach((e=>{e.toString().split(t).forEach((t=>r.add(t)))})),e.mapSelector={values:Array.from(r).sort(((t,e)=>t.localeCompare(e)))}}e.fields[i.MapField]?.[0]&&(e.mapField||(e.mapField={urls:{}})),e.fields[i.Legend]?.length&&(e.legendField=e.fields[i.Legend][0]),e.mapField?e.drillMode={path:s.Ap,level:0,movedToNextLevel:!1,levelExpanded:!1}:t.categories&&(e.drillMode={path:(0,r.l9n)(t.categories,i.Category,c.drill.categoryLevelMaps.value,c.drill.lastLevelMaps.value),level:(0,r.DvF)(t.categories,i.Category),movedToNextLevel:(0,r.hff)(t.categories,i.Category),levelExpanded:(0,r.Lzp)(t.categories,i.Category)&&!c.drill.aggregateOnExpand.value}),e.dataPoints.push(...function(t,e,n,o,s,c,f,g){const m=[];if(e?.categories?.length){const y=e.categories.filter((t=>t.source.roles[i.Category])),b=y[y.length-1],w=e.values,S=f?e.categories.filter((t=>t.source.roles[i.MapField])):[];if(b?.values)for(let e=0;e<b.values.length;e++){if(e<n)continue;const x=[];if(g.levelExpanded&&y.length>1)for(let t=0;t<y.length-1;t++)x.push((0,a.$8)(y[t].values[e]));const k=(0,a.$8)(b.values[e]),C=[...x,k].map((t=>(0,a.ni)(t))).join(a._5),M=[...x,k].join(a._5),T=k,E=x.length?[...x,k].join(` ${a._5} `):void 0;let A=o[C];if(!A&&(A={dataIndex:e,id:M,label:T,selectionId:thisVisual.host.createSelectionIdBuilder().withCategory(b,e).createSelectionId(),tooltips:{default:{header:t.tooltips.showCategories.value?E||T||b.source.displayName:"",displayName:"",value:null}},color:(0,r.SN4)(t.areas.matchedColor,e)},E&&(A.label2=E),m.push(A),o[C]=A,s[v(A.selectionId)]=A),w)for(let n=0;n<w.length;n++){const o=w[n];if(o){if(o.source.roles[i.Value]){A.format=(0,r.j_G)(o,e);const n=o.values[e],i=o.source.type.numeric,a=o.source.type.dateTime,s=a?(0,l.Yq)(t.advanced.numberLocale.value.value.toString(),new Date(n),o.source.format):null,p=u(t,o);if(i&&"average"==p&&(null==A.average&&(A.average=0),A.average++),A.value=a?s:i?h(A.value,n,p):n,c.max=c.max?Math.max(c.max,A.value):A.value,c.min=c.min?Math.min(c.min,A.value):A.value,o.highlights){const t=o.highlights[e];A.highlightValue=a?s:i?h(A.highlightValue,t,p):t}d(A,o,t,i)}o.source.roles[i.Tooltips]&&p(A,e,o,t)}}if(S.length){const t=S[0].values[e]?.toString();t&&t.trim()&&(f.urls[t]=!0)}}}return m}(c,t,o,e.index,e.identityIndex,e.domain,e.mapField,e.drillMode)),e.hasHighlights=e.dataPoints.some((t=>void 0!==t.highlightValue)),n||(e.compareToPrevious.dataPointsChanged=!(0,l.UD)(f,Object.keys(e.index)),e.compareToPrevious.mapFieldChanged=!(0,l.UD)(g,e.mapField?Object.keys(e.mapField):null),e.compareToPrevious.mapSelectorChanged=!(0,l.UD)(m,e.mapSelector?.values??null))}return e}function u(t,e){const n=(0,o.RZ)(t)?t.categoryLabels.aggregation.value.value:t.dataLabels.aggregation.value.value;if("auto"==n)switch((0,r.ha8)(e)){case r.n3N.Sum:return"sum";case r.n3N.Average:return"average";case r.n3N.Min:return"min";case r.n3N.Max:return"max";default:return"sum"}return n}function h(t,e,n){return isNaN(t)&&(t=null),isNaN(e)&&(e=null),null==t&&null==e?null:"max"==n?Math.max(t??-1/0,e??-1/0):"min"==n?Math.min(t??1/0,e??1/0):(t??0)+(e??0)}function d(t,e,n,i){if(!n.tooltips.showValues.value)return;const r=t.value,o=m(r,t.format,n),a=t.tooltips.default;if(a.displayName=e.source.displayName,a.value=null==r?"(Blank)":i?o.format(r):r.toString(),e.highlights){const n=t.highlightValue;t.tooltips[e.source.queryName]||(t.tooltips[e.source.queryName]={displayName:"Highlighted",value:null}),t.tooltips[e.source.queryName].value=null==n?"(Blank)":i?o.format(n):n.toString()}}function p(t,e,n,i){const o=n.values[e],a=m(o,(0,r.j_G)(n,e),i),s=n.source.queryName;if(t.tooltips[s]||(t.tooltips[s]={displayName:n.source.displayName,value:null}),n.source.type.numeric){const e=u(i,n),r=h(parseFloat(t.tooltips[s].value),o,e);t.tooltips[s].value=null==r?"(Blank)":a.format(r)}else t.tooltips[s].value=null==o?"(Blank)":a.format(o)}function f(t,e){return(e&&t?e.index[(0,a.ni)(t)]:null)??null}function g(t){const e=void 0!==t.highlightValue?t.highlightValue:t.value;return t.average?e/t.average:e}function m(t,e,n){return r.ZA6.instance.create({format:e,formatSingleValues:!1,value:0==n.tooltips.unit.value?t:n.tooltips.unit.value,displayUnitSystemType:n.tooltips.unit.value,precision:n.tooltips.precision.value??1,allowFormatBeautification:!0,cultureSelector:n.advanced.numberLocale.value.value.toString()})}function v(t){return JSON.stringify(t.getSelector())}!function(t){t.Category="category_role",t.Value="value_role",t.Tooltips="tooltips_role",t.Legend="legend_role",t.MapSelector="selector_role",t.MapField="MapSeries"}(i||(i={}))},46449:(t,e,n)=>{"use strict";n.d(e,{Lu:()=>h,Qn:()=>u,rv:()=>c});var i=n(81807),r=n(89358),o=n(34790),a=n(96826),s=n(72210),l=n(78698);const c="MSEK";var u;!function(t){t[t.None=0]="None",t[t.Edit=1]="Edit",t[t.ReadEdit=2]="ReadEdit"}(u||(u={}));class h extends i.T0G{info;static rootDomain="synopticpanel-api.okviz.com";isConnected=!1;get base(){return`https://${this.info.region}.${h.rootDomain}`}get displayAvailableQuota(){return null==this.info.quota||null==this.info.availableQuota?"":`${(0,a.v7)(this.info.availableQuota)} of ${(0,a.v7)(this.info.quota,2,!0)} free (${this.availableQuotaPercentage}%)`}get availableQuotaPercentage(){return null==this.info.quota||null==this.info.availableQuota?0:(0,i.LIG)(this.info.availableQuota/this.info.quota*100,0)}constructor(t){super(),this.info=t}updateInfo(t){this.info={...this.info,...t}}async connect(){if(this.isConnected)return!0;if(!this.info.region||!this.info.id||!this.info.readKey)return!1;const t=await this.apiGetStorage({storageId:this.info.id,key:this.info.readKey});return this.info={...this.info,...t},this.isConnected=!0,!0}getMapUrl(t,e){return`${this.base}/v1/my/${this.info.id}/map/${t}?key=${this.info.readKey}${e?`&name=${encodeURIComponent(e)}`:""}`}async apiCall(t,e,n=!1,i=!1){const r=async()=>{if("cancel"==(await this.showEditKeyMsgBox()).action)return null;if(this.info.editKey)return this.apiCall(t,e,n,i);throw(0,s.T)("MS_INVALID_EDIT_KEY")};if(n&&!this.info.editKey)return r();try{const r=new URL(t);n&&(i||!e?.method||"GET"==e.method||"DELETE"==e.method?r.searchParams.append("editKey",this.info.editKey):e?.body instanceof FormData&&e.body.set("editKey",this.info.editKey));const o=await fetch(r.href,e);if(!o.ok)throw await o.json();return o}catch(t){const e=(0,s.T)(t);if(n&&"MS_INVALID_EDIT_KEY"==e.key)return r();throw e}}async apiGetStorage(t){try{const e=await this.apiCall(`${this.base}/v1/my/${t.storageId}?key=${t.key}`,null,!1);return await e.json()}catch(t){throw(0,s.T)(t)}}async apiGetMaps(t,e=[],n){try{const i=await this.apiCall(`${this.base}/v1/my/${t.storageId}/maps${n?`?continuationToken=${n}`:""}`,null,!0),r=await i.json();if(r.items&&e.push(...r.items),r.continuationToken){const n=await this.apiGetMaps(t,e,r.continuationToken);e.push(...n)}return e}catch(t){throw(0,s.T)(t)}}async apiGetMap(t){try{const e=await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}?key=${t.key}&nonce=${t.nonce}${t.password?`&password=${t.password}`:""}`,null,!1);return await this.processGetMapResponse(e,this.info.encryptionKey)}catch(t){throw(0,s.T)(t)}}async apiGetMapMetadata(t){try{const e=await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}/metadata?key=${t.key}`,null,!1);return await e.json()}catch(t){throw(0,s.T)(t)}}async apiSearchMap(t){try{const e=await this.apiCall(`${this.base}/v1/my/${t.storageId}/search/map/?key=${t.editKey}&name=${t.mapName}`,null,!0);return(await e.json()).id}catch(t){throw(0,s.T)(t)}}async apiPostMap(t){try{const e=await this.createRequestFormData(t),n=await this.apiCall(`${this.base}/v1/my/${t.storageId}/map`,{method:"POST",body:e},!0);return await n.json()}catch(t){throw(0,s.T)(t)}}async apiDeleteMap(t){try{await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}${t.password?`?password=${t.password}`:""}`,{method:"DELETE"},!0)}catch(t){throw(0,s.T)(t)}}async apiPatchMap(t){try{const e=await this.createRequestFormData(t);e.append("eTag",t.eTag),t.newPassword&&e.append("newPassword",t.newPassword);const n=await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}`,{method:"PATCH",body:e},!0);return await n.json()}catch(t){throw(0,s.T)(t)}}async createRequestFormData(t){const e=this.info.encryptionKey&&this.info.isEncrypted,n=new FormData;if(t.map.name=(0,l.lx)(t.map.name),n.append("editKey",t.editKey),n.append("name",t.map.name),n.append("id",t.map.id),e){const t=await h.GenerateHash(this.info.encryptionKey);n.append("encryption",t)}const i=(0,a.jA)(t.map),o=await(0,a.rz)(i),s=e?await(0,r.oL)(o,this.info.encryptionKey):o;return n.append("map",(0,a.k5)(s)),t.path&&n.append("path",t.path),t.password&&n.append("password",t.password),t.protection&&n.append("newProtection",t.protection.toString()),t.author&&n.append("author",t.author),t.attribution&&n.append("attribution",t.attribution),n}async apiPatchMapMetadata(t){try{const e=new FormData;e.append("editKey",t.editKey),t.path&&e.append("path",t.path),t.password&&e.append("password",t.password),t.newPassword&&e.append("newPassword",t.newPassword),void 0!==t.protection&&null!==t.protection&&e.append("protection",t.protection.toString()),t.author&&e.append("author",t.author),t.attribution&&e.append("attribution",t.attribution),await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}/metadata`,{method:"PATCH",body:e},!0)}catch(t){throw(0,s.T)(t)}}async apiSetupStorage(t){try{return!!await this.apiCall(`${this.base}/v1/my/${t.storageId}/setup/?name=${t.storageName??"My Storage"}${t.encryptionHash?`&encryption=${t.encryptionHash}`:""}`,{method:"POST"},!0,!0)}catch(t){throw(0,s.T)(t)}}async setup(t,e){const n={storageId:this.info.id,editKey:this.info.editKey};if(e&&(n.editKey=e),this.info.encryptionKey){const t=await h.GenerateHash(this.info.encryptionKey);n.encryptionHash=t}t.storageName&&(n.storageName=t.storageName);const i=await this.apiSetupStorage(n);return i&&this.updateInfo({isSetup:!0,isEncrypted:!!this.info.encryptionKey}),i}async listMaps(t){let e=this.info.editKey;return t&&(e=t),await this.apiGetMaps({storageId:this.info.id,editKey:e})}async getMap(t,e){const n=await this.createNonce();return this.apiGetMap({storageId:this.info.id,key:this.info.readKey,mapId:t,nonce:n,password:e})}async getMapFromUrl(t){try{const e=await this.createNonce(),n=new URL(t);n.searchParams.set("nonce",e);const i=await fetch(n.href);return await this.processGetMapResponse(i,this.info.encryptionKey)}catch(t){throw(0,s.T)(t)}}async processGetMapResponse(t,e){if(!t.ok){let e="UNREACHABLE";switch(t.status){case 401:case 403:e="UNAUTHORIZED";break;case 404:e="NOT_FOUND"}throw(0,s.T)(e)}const n=this.extractMapHeader(t.headers);let i;if(n.isEncrypted){const n=await t.blob();try{const t=await(0,r.It)(n,e);i=JSON.parse((0,a.$T)(t))}catch(t){throw(0,s.T)("DECRYPTION_FAILED")}}else i=await t.json();return{jsvg:i,header:n}}async getMapMetadata(t){return await this.apiGetMapMetadata({storageId:this.info.id,key:this.info.readKey,mapId:t})}async deleteMap(t,e){return await this.apiDeleteMap({storageId:this.info.id,editKey:this.info.editKey,mapId:t,password:e})}async uploadMap(t){return await this.apiPostMap({storageId:this.info.id,editKey:this.info.editKey,...t})}async updateMap(t){return await this.apiPatchMap({storageId:this.info.id,editKey:this.info.editKey,...t})}async updateMapMetadata(t){return await this.apiPatchMapMetadata({storageId:this.info.id,editKey:this.info.editKey,...t})}async searchMapByName(t){return await this.apiSearchMap({storageId:this.info.id,editKey:this.info.editKey,mapName:t})}extractMapHeader(t){const e={},n={id:"id",etag:"eTag",name:"name",source:"source",protection:"protection",path:"path",author:"author",attribution:"attribution",created:"created",updated:"updated",size:"size",isencrypted:"isEncrypted"};return t.forEach(((t,i)=>{if(i.toLowerCase().startsWith("x-map-")){const r=i.substring(6);if(n[r])switch(n[r]){case"protection":case"size":e[n[r]]=parseInt(t);break;case"isEncrypted":e[n[r]]="true"===t;break;default:e[n[r]]=t}}})),e}static IsValidEditKeyFormat(t){return!!t&&/^ek_[a-zA-Z0-9]{64}$/.test(t)}static GenerateRandomEncryptionKey(){const t=new Uint8Array(16);window.crypto.getRandomValues(t);let e="";for(let n=0;n<16;n++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.@!%$#"[t[n]%70];return e}static async GenerateHash(t){const e=(new TextEncoder).encode(t),n=await window.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map((t=>t.toString(16).padStart(2,"0"))).join("")}async createNonce(){return await(0,r.Np)((new Date).toUTCString(),"kf4SXPPomgFzNUxY1GbtWUOhuA+kZwm+DV8/QYwiy/PRvyj6KX2tzEhUiEjUMkJU")}async showEditKeyMsgBox(){const t=document.getElementById("edit-key-msg-box");t&&t.remove();const e={element:document.body,containerId:"edit-key-msg-box",title:"Access My Storage",size:{height:"",width:"350px"},buttons:[{id:o.d,text:"Continue",validationCallback:t=>h.IsValidEditKeyFormat(t.key)?(this.updateInfo({editKey:t.key}),this.trigger("editKeyChanged",t),{valid:!0}):{valid:!1,message:"Invalid key."}}]};return new o.W(e).draw()}}},50107:(t,e,n)=>{"use strict";n.d(e,{S:()=>l});var i=n(54472),r=n(61895),o=n(81807),a=n(55079),s=n(92421);class l{element;model;settings;isEditMode;selectionManager;initialSelectionIds;imageContainer;gridPlaceholder;constructor(t,e,n,i,r,o){this.element=t,this.model=e,this.settings=n,this.isEditMode=i,this.selectionManager=r,this.initialSelectionIds=o}get font(){return{bold:this.settings.appearance.placeholderFont?.bold.value||!1,italic:this.settings.appearance.placeholderFont?.italic.value||!1,underline:this.settings.appearance.placeholderFont?.underline.value||!1,family:this.settings.appearance.placeholderFont?.fontFamily.value||o.Q9G,size:a.fromPointToPixel(this.settings.appearance.placeholderFont?.fontSize.value||12)}}get text(){let t=this.settings.appearance.placeholderText.value||"";return t.includes("\\n")&&(t=t.replace(/\\n/g,"\n")),t=t.replace(/{category}/gi,this.model?.dataPoints?.[0].label||""),t=t.replace(/{path}/gi,(0,s.pT)(this.model?.drillMode.path||[])),t}draw(){this.imageContainer?.remove(),this.gridPlaceholder?.destroy();const t=this.settings.appearance.placeholder.value.value;"auto"==t?this.isEditMode?this.drawGridPlaceholder():this.drawImagePlaceholder():"grid"==t?this.drawGridPlaceholder():"image"==t&&this.drawImagePlaceholder()}drawImagePlaceholder(){const t=this.settings.appearance.placeholderImage.value.value;let e;if("none"!==t)if("custom"==t){const t=this.settings.appearance.placeholderImageUrl.value;t&&(e=(0,o.tTh)(".image",{style:{background:`url("${t}") no-repeat center`,backgroundSize:"contain"}}))}else{const n=i.v[t];n&&(e=(new DOMParser).parseFromString(n,"image/svg+xml").documentElement)}const n=this.text;this.imageContainer=(0,o.tTh)(".image-placeholder",this.element,[...n?[(0,o.tTh)(".message",{style:{fontFamily:this.font.family,fontSize:`${this.font.size}px`,fontWeight:this.font.bold?"bold":"normal",fontStyle:this.font.italic?"italic":"normal",textDecoration:this.font.underline?"underline":"none",color:this.settings.appearance.placeholderColor.value.value}},n)]:[],...e?[e]:[]])}drawGridPlaceholder(){this.gridPlaceholder=new r.W({columns:this.settings.appearance.placeholderGridCols.value,rows:this.settings.appearance.placeholderGridRows.value,font:this.font,color:this.settings.appearance.placeholderColor.value.value},this.element,this.model,this.selectionManager,this.initialSelectionIds),this.gridPlaceholder.draw()}destroy(){this.gridPlaceholder?.destroy(),this.gridPlaceholder=null,this.imageContainer?.remove(),this.imageContainer=null,this.element=null}}},61895:(t,e,n)=>{"use strict";n.d(e,{W:()=>o});var i=n(81807),r=n(39236);class o{config;container;model;selectionManager;initialSelectionIds;table;constructor(t,e,n,i,r){this.config=t,this.container=e,this.model=n,this.selectionManager=i,this.initialSelectionIds=r}draw(){this.table?.remove();const t=this.config.columns*this.config.rows,e=Math.max(0,this.model.dataPoints.length-(t-1));this.table=(0,i.tTh)("table.grid-placeholder",this.container,{style:{fontFamily:this.config.font.family,fontSize:`${this.config.font.size}px`,fontWeight:this.config.font.bold?"bold":"normal",fontStyle:this.config.font.italic?"italic":"normal",textDecoration:this.config.font.underline?"underline":"none",color:this.config.color}});for(let t=0;t<this.config.rows;t++){const n=(0,i.tTh)("tr",this.table);for(let r=0;r<this.config.columns;r++){const o=(0,i.tTh)("td",n);if(t===this.config.rows-1&&r===this.config.columns-1)o.classList.add("static"),e&&(o.textContent=`+ ${e}`);else{const e=this.model.dataPoints[t*this.config.columns+r];if(e){const t=e.label2||e.label||"(Blank)";o.textContent=t,o.title=t,o.dataset.id=e.id}else o.classList.add("empty","static")}}}this.initialSelectionIds&&this.handleSelection(this.initialSelectionIds),this.listen()}listen(){this.table.addLiveEventListener("click","td",((t,e)=>{const n=e.dataset.id,i=(0,r.JF)(n,this.model);i&&this.selectionManager?.select(i.selectionId,t.ctrlKey||t.metaKey).then((t=>{this.handleSelection(t)}))})),this.table.addLiveEventListener("contextmenu","td",((t,e)=>{t.preventDefault();const n=e.dataset.id,i=(0,r.JF)(n,this.model);this.selectionManager?.showContextMenu(i?i.selectionId:{},{x:t.clientX,y:t.clientY})}))}handleSelection(t){this.table.classList.toggle("has-selection",t.length>0),this.table.querySelectorAll("td").forEach((t=>t.classList.remove("selected"))),t.forEach((t=>{const e=this.model.identityIndex[(0,r.zk)(t)];if(e){const t=this.table.querySelector(`[data-id="${(0,i.z4e)(e.id)}"]`);t&&t.classList.add("selected")}}))}destroy(){this.table?.remove(),this.table=null,this.container=null,this.selectionManager=null,this.initialSelectionIds=[]}}},54472:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});const i={geo:'<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.65 68"><path d="M10.02,14v-.3l1.6-.8v-.2l-.4-.1v-.4l.4-1h.7l1.4-.4.3-1.1,1.6-.8h1.2l1.9-.6h.4l1.5.9,2.2.5,2.3-.1,1.4,1.1.5.1.6-.3h.5l1.9.8,1.2-.4v-.2l-.2-.5.5-.4h.3l.1.1.1.7,1.1.3v-.3h.3l.3.3v.3l-.6.6-1.6.1-1.1.7-1.5.4-.5.7-.5.9-.1.7.7.4.6.6.5.1v.4l-.3.6v.5l.6-.1.8-1.3.8-.5.1-.7,1.2-1.7,1.1-.1.5.9v.3l-.1.3.7.1.5-.7h.2l.2,1.4.7,1.6v.4l-.2.4-1.5.7-.6.1-.1-.2h-1.2l-1.6,1v.2h.2l1-.6h.9v.2l-.3.3v.5l.7.3-.1.4-.9.2-.3.2v.2l-.2-.1v-.2l.4-.2v-.4l-.8.2-1.1.6-.4.7-.9.1-.8,1.2-.3.4-.3.1.1-.6h-.2l-.4,1.3-1.2.9-.8.9-.1.9-.2,1.2-.1.4h-.2l-.3-.7v-1.3l-.5-.2h-.7l-.6.1v.4l-.5.1-.6-.3h-1l-1,.9-.6,1.2-.2,1.3.3.8.3.5h1.1l.5-.8,1.3-.2v.4l-.9,1.6-.1.3,1.7.1-.2,1.5v.7l.3.2.2.4.4.2.4-.2.3-.1.2.1.2.2.1.2h.3l.3-1,.5-.2.6-.3.4-.3.2.1v.2l-.3.2v.3l-.1.1-.1.4.2.2.4-.1v-.7l.2-.5h.3l.8.7.7.1.4-.1.3-.1.2.1.3.5.5.4.3.4.6.6,1.3.2.4.5.4.5.2.7-.1.5-.2.3-.2.3v.2h.2v-.2l.5-.2.1-.1h.4v.3l-.1.2-.2.1h-.2v.3h.4l.3-.3.1-.4h.3l.3.3,1.4.7h.8l1.1.7h.4l.3,1.5-1.4,1.8.2.9v.9l-.4,1.4-.3,1-1.1.4-1,.6-.1,1.5-.4,1.1-.4,1-.4.6h-.3l-.8-.4-.4-.1.9,1.1-.3.6-.3.4h-.6l-.3.2v.2l.1.1-.1.4-.5.2v.3l.3.4-.1.7-.4.7.8.5v.4l-.2.3v.8l.2.6-.3.4v.3h-.2l-.5-.3-.1-.4-.3-.1-1.1-1.9-.2-.1-.2-.1v-.2l.3-.2v-.4l-.4-1.3-.7-.4-.1-.4v-.5l-.2-.4.1-.9.1-.1v-1.2l-.3-.4v-1.3l-.1-.6-.1-.6-.1-.8v-.7l-.1-.6-.2-.7-.1-.3-.8-.6-1.3-1.3-.4-.7-.4-.5-.4-.8-.1-.3-.2-.6-.7-.4v-.9l.4-.4v-.2h-.3v-.6l.2-1,.9-.9v-1.8l-.1-.4-.2-.1h-.1l-.2.1-.1.4h-.4l-.6-.6-.7-.4-.2-.3-.1-.5-.2-.4-.2-.4h-.5l-.6-.5-.3-.2-.3-.2-.3-.4-.2-.2-.2.2-.4.2-1.3-.8-.7-.4-.6-.5-.3-.4.1-.4v-1l-.6-1.2-.4-1-.2-.8v-1.7h-.2l-.1.4-.2.8-.1.5.2.5.3,1.1.3,1.1v.2h-.3l-.2-.6-.3-.5-.3-.7-.1-.4.2-.6-.1-.4-.1-.6-.1-.4v-.6l-.6-.5v-.8l.2-.9.3-1,1-1.7.6-1.1.5-.6h.4v.2l.2.1v-.4l.1-.8-.2-.5.1-.6.3-1.1.4-.9.1-.5v-.2h-.1l-.3.1h-.2l-.1-.2-.1-.2-.1-.3-.4-.1-.5-.3-.2-.2h-.2l-.2.2-.4.2-.2.1h-.6l-.1-.1.2-.2.3-.1.2-.2.3-.2v-.2h-.2l-.6.3-2.3,1.2-.9.5-.4.1h-.2Z" style="fill:#ededed;"/><path d="M8.82,14.2v-.3l.4-.1.3.1.1.2-.3.1h-.5Z" style="fill:#ededed;"/><path d="M15.72,17.4v-.4h.4l.1.3.2.3v.5h-.1l-.3-.3v-.4h-.3Z" style="fill:#ededed;"/><path d="M27.22,21.3h.2l.3-.5.2-.1.2.2h.1v-.3l-.3-.5-.5-.1-.1-.2-.1-.5-.4-.4-.6.1-.8.4v.2l.3.1.5-.1.4.2.4.1.1.3-.9.1-.3.2-.2.5-.3.6.1.3.5-.4.1-.5.4-.4.3-.1.4.2v.6Z" style="fill:#ededed;"/><path d="M26.63,22.1v-.2l.6-.1.4-.1.5-.2.6-.1.3-.2h.3v.2l-.4.2-.8.1-.2.2-.8.2h-.5Z" style="fill:#ededed;"/><path d="M35.13,19.4l1.2-.9.3-.1.1.2-.2.5.2.3.1.6-.1.5-.5-.3-.4-.2h-.5l-.2-.4v-.2Z" style="fill:#ededed;"/><path d="M41.63,5.5v.2l-.9.6h-.9l-1,.4-1,1-.5.1h-.7l-.3-.3v-.2l.5-.5.8-.4.8-.2v-.2l-.6-.1-.9.1-.5-.1v-.2l1.4-.4h.9l.5.3h1.3l.8-.1h.3Z" style="fill:#ededed;"/><path d="M31.32,13l-.2-.2v-.2l.7-.5h.4l.1.1v.5l.2.1v.3h-.2l-.2-.3h-.3l-.2.1v.2l-.3-.1Z" style="fill:#ededed;"/><path d="M25.82,9.2h.7l.5-.5,1.1-.3v-.2l-.7-.4-.6.2-.6.6-.6.4.2.2Z" style="fill:#ededed;"/><path d="M29.13,7.8v.5h1.2l.5-.1.3-.4-.1-.4-.3-.1-.3.5h-.1l-.1-.1-.3-.3-.3.1-.5.3Z" style="fill:#ededed;"/><path d="M27.02,9.5v-.2l.8-.5.6-.1.8.4.5.1v.3l-.3.3.1.1.1.3h-.1l-.4.1-.3.2-.3-.1-.3-.1h-1.5l-.4-.3v-.2l.7-.1.4.1v-.2l-.3-.1" style="fill:#ededed;"/><path d="M30.52,8.9l.7-.4.7.2v.3l-.2.3-.4.4h-.5l-.3-.3v-.5Z" style="fill:#ededed;"/><path d="M32.13,9.1v.4h.3l.5-.2.5-.3v-.3h-.6l-.4.1-.3.3Z" style="fill:#ededed;"/><path d="M32.13,7.8l.1.6h.2l.5-.3v-.3l-.2-.2h-.6v.2Z" style="fill:#ededed;"/><path d="M33.63,7.7l.2.6.9.3h1.6l-.1-.4h-1.6l-.5-.6-.5.1Z" style="fill:#ededed;"/><path d="M33.22,10.1l-.1-.5,1-.7h1v.3l.2.3.8-.1.3.3.6.4.4.4-.1.3-.2.3v.1l1,.6-.1.3-1,.6-.3-.2-.2-.3h-.2v.6l-.5,1-.2.1-.4-.3-.8-.8h-1l-.2-.2.5-.4h.8l1-1.1.3-.3-.1-.3-1-.1-.9-.1-.6-.2Z" style="fill:#ededed;"/><path d="M23.52,30.5v-.1l.4-.3,1.4.1,1.6,1.1v.3h-1.2l.1-.3-.2-.1-.3-.3-.3-.4h-1.5Z" style="fill:#ededed;"/><path d="M25.32,32.1h.6l-.1.3h-.3l-.2-.1v-.2Z" style="fill:#ededed;"/><path d="M26.63,32.2v.1h.5l.5.1.1.1.4-.2.7-.1v-.2h-.4l-.4-.4-.6.1h-.2v.4h-.5" style="fill:#ededed;"/><path d="M29.43,32.2h.3l.2.2-.5.1-.2-.1.2-.2Z" style="fill:#ededed;"/><path d="M30.72,32.9l.2.5.3-.1v-.3l-.2-.1h-.3" style="fill:#ededed;"/><path d="M30.93,33.5h.2l.1.7h-.3v-.7Z" style="fill:#ededed;"/><path d="M46.43,5.1l2.7.1v.2l-.3.1-.5.2v.1l.3.2.4.2.4.2.4-.1.4-.2h.7l.5.1v.2l-.3.1-.7.3-.2.2-.7.4-.7.6v.5l.6.4v.1l-.4.6-.3.3h-.3l-.2-.1-.3.1v.3l.4.4v.2h-.4l-.2-.2h-.2v.3l.5.2h.3l-.1.4h-.9l-1.3.2-1.4.6-1.2.4-1.7,2.1-.4.2-.5-.5-.6-.4v-1.5l.8-1.1.6-1-.4-.8-.2-1.1-.7-.5h-.9l-.1-.5.4-.3.2.1h.6l.2-.2v-.4l3.1-1.3h.5l.5.3,1.2-.1.4-.6Z" style="fill:#ededed;"/><path d="M47.32,12.7l.3-.3h.2l.3.4h.2l.4-.2.7-.1.3.3-.1.5-.6.4-.9-.1-.5-.1v-.3l-.2-.1-.1-.4Z" style="fill:#ededed;"/><path d="M49.93,18.8l.2-.4-.2-.1.2-.3.3-.6.5-.2h.3l.3.1-.3.5-.2.5-.4.5h-.2l-.1-.1-.2.1h-.2Z" style="fill:#ededed;"/><path d="M52.43,15.7v.1l-.2.2.3.1.2.3-.3.2v.2l.2.4.2.5.3.5h.4v.3l-.3.4-.6.1-.8.2-.6.1.1-.2.4-.2v-.2l-.1-.1.2-.5.4-.3v-.4l-.3-.1-.4-.5v-.6l.3-.5h.6Z" style="fill:#ededed;"/><path d="M49.93,24.6v-2.5l.5-.1h.6l.7.2h.3l.4-.2-.1-.3.2-.3-.1-.6-.4-.3-.4-.2-.1-.1v-.3h.6l.1-.3-.1-.1.3-.1.1.3h.4l.7-.8.3-.1.2-.3.2-.1.1.3.1-.1v-.6l.4-.1.5-.1.1-.4v-.7l-.1-.3.3-.2.3-.1.1.3v.5l-.2.2v.3l.3.1.5.1h.3l.5-.2h.8l.3.1.2-.1.1-.5.2-.5.2-.2h.2l.1.1.3-.1v-.3l-.1-.4.7-.1h.3l.4-.2-.2-.2-.1-.1-.6.2-.4.1h-.4l-.5-1v-.3l.4-.4.3-.3v-.5h-.1l-.3-.1-.3.3-.4.4v.3l-.4.2-.3.7.2.5v.3l-.3.5-.2.5v.3l-.2.2-.2.1-.1.2h-.4v-.4l-.2-.3-.2-.2v-.5l-.1.1v-.3l-.4.2h-.1l-.2.2h-.4l-.2-.3v-1l.5-.4.4-.4.9-.9.7-.6.9-.9,1.4-.9h.7l.6.2.3.2,1,.4.9.6h.2l.2.2.1.1v.3l-.1.2h-.4l-.5-.2-.4-.1-.4-.2v.4l.2.2.4.2.5.5h.3l.7-.6.2-.1.3-.3.1.2h.3v-.4l-.2-.1v-.3l-.2-.1v-.4h.2l.4.3v.4h.2l.6-.2.8-.3.6-.2.9-.2,1-.1.5.3h.4v-.3l-.3-.4-.3-.1v-.3l.7-.7.4-.1.1.2v.4l.9,1.2v.5l-.3.1-.2.3h.5l.3-.3.1-.6h.6v-.2l-.7-.2-.5-.4-.2-.5,1.1-.7.5-.4.6-.5,1.6-.5.6-.1h2.5l.4.1-.1.4-.5.7.2.1.9-.5h1.1l3.6.6.4.1.9-.1.1-.4.2-.3.6.1,1.5.3h1.4l1-.1,1.1.4h.9l1.1-.5h.9l2.2.2,1.4.5.9.2.4.3v.2h-.4l-.4-.1h-.6l-.2-.1-.2.1v.5l.6.2.5.2.3.1-.1.3-.6.9v.2l-.8.1-.5.2.3.4.7.7.6,1,.3,1v.6h-.2l-.4-.5-.6-.6-.9-.8-.6-.4v-.5l.3-.4-.1-.6-.3-.5-.2-.1-.2.3h-.1l-.2-.1h-.4v.5l.2.5-.4.3-.7.1-.6.1h-.7l-.6.2-.1.2v1.3l.5.5h.2l.1-.1h.4l.4.3.7.8.4.8.3.8.2,1,.1,1-1,.3-.1.8-.1.7.4.6.5.8.1.2v.3l-.3.2-.3.2-.1-.3-.3-.6-.3-.5-.4-.3-.6-.6h-.1l-.4.4-.3-.1v-.4l.1-.2h-.4l-.6.6v.3l.4.4h.8l.4.2-.1.2-.2.1v.5l.8,1.2.4.8-.3.1.3.2.2.3v1.4l-.4.5-1,1-.9.6-.3.5h-.2l-.2-.3-.2-.2-.4.2-.4,1,.1.4.8.7.6.7.1,1.2-.3.5-.3.4-.4.3-.1.3h-.3v-.3l-.2-.3-.2-.2-.4-.3v-.4l-.3-.1-.3-.2-.1-.2h-.4l.2,1v.8l.3.7.4.6.4.6.3.6.2.4-.1.3h-.3l-.3-.3h-.2l-.6-1.3-.3-.5-.5-.5v-1.4l-.1-.9-.3-.8-.3-.9-.2.1-.3.3-.3.1-.3-.1.1-.8-.6-.8-.4-.3v-.3l-.1-.5h-.4l-.4.5-.3-.1-.1-.2-.3.2-.4.7-.5.7-.4.5-.6.9-.3,1.3-.1.8-.3,1.1h-.2l-.3-.1-.3-.9-.5-.8-.7-1.7-.3-1.2-.1-1.2h-.3l-.1.6-.2.1-.3-.2-.6-.6-.2-.3-.1-.4-.5-.4h-2.3l-.4-.1-.5-.2v-.4l-.2-.2-.5.1-.2.2h-.6l-1.3-1.3h-.4l-.2.3v.2l.5.4.2.4.2.1.1.3h.2l.3-.1.1.2v.5h.3l.5.1.2-.3.2-.4h.4v.5l.1.3.3.1.4.1.2.1.1.2-.4,1.1-.5.7-.5.5-.4.2-.6.4-.5.5-.5.3-1.3.3-.4.1-.4-.6-.2-.3-.2-1.2-.9-1.3-1.5-2.3-.3-1-.2.2-.1-.1-.1-.1h-.3v.4l.3.6.7,1.3.6,1v.7l.8.8.2.8.2.1.5.6.6.6-.1.7.4.1.7-.2,1.2-.4.6-.1v.3l-1.1,2.7-.9,1.3-1.2,1.2-.9,1.1v1.3l.4,2.6v.7l-.8.8-.8.7-.7.6.2.9v.9l-.9.6v.3l-.6,1.2-.9,1.1-.7.5-.7.1-1,.2-.4.4-.3-.1-.1-.2-.5-.3-.1-1-.9-1.6-.2-1.4-.1-.7-.7-1.6v-1.6l.7-1.3-.3-1.8-.6-1.2-.9-1.4.1-.8.3-.6v-.5h-1.1l-.6-.9h-.7l-1.4.4-1.8.6-.7-.1-1.6-1.7-1.1-1.4-.4-.8v-.9l.3-1v-1l.1-.7.9-1.9.5-.5h.3l.7-.9.2-.7.1-.3.6-.4.2-.3.4-.6h.3l.3.2h.4l1.1-.4.9-.2.5-.1.5-.2h.7l.9.1-.1.4-.2.6.1.2.4.3.4.2.6.1h.2l.1.5.5.2.7.2h.3v-.3h-.1v-.3l.4-.3.6-.1.3.3.4.3.6.3h.5l.4-.2.5-.1h.3l.3.1.2.1.2-.4.1-.4.2-.5v-.8l.1-.1v-.2l-.7.1h-1.1l-.7.1-.2-.3-.2-.6-.2-.6h.4l.2-.3.1-.1h.7l.2-.2.3-.2.2-.2h.5l.3.2.4.1.3.1h1v-.4l.1-.2-.2-.1h-.3l-.2-.3-.2-.2-.4-.2-.2-.2v-.3l.3-.2.2-.2v-.1l-.2-.1-.2.1-.8.4.2.2v.3l-.3.2h-.3l-.2-.3-.2-.5-.1-.2-.2.1-.5.2-.2.7-.3.5v.5l.2.3-.5.4h-.2l-.3-.2-.5.1-.1.3v1.4l-.5.1-.3-.3v-.5l.3-.1-.4-.1-.2-.4-.2-.5-.3-.5-.4-.2-.6-.6-.4-.1-.2-.2-.1-.2h-.2l-.1.3.2.2.2.3.1.2.4.3.3.1v.2l.5.3.2.3.1.3h-.1l-.2-.2h-.1v.6l-.1.2h-.2v-.5l-.3-.3-.3-.4-.3-.2h-.4l-.3-.2-.3-.6-.2-.3-.2-.2-.3.1-.4.5-.4.1-.2-.2-.4.2-.1.3-1,.8-.4.9-.4.7h-.3l-.3-.2-.3.1-.4.1-.4-.2-.3-.1-.2-.2Z" style="fill:#ededed;"/><path d="M55.72,22.1l-.3.3.1.4v.1h.2l.1-.1v-.4l-.1-.3Z" style="fill:#ededed;"/><path d="M55.43,23.3l.1-.1.3-.1v.1l-.1.3.1.1-.1.3h-.2l-.1-.1v-.5Z" style="fill:#ededed;"/><path d="M56.82,24.3v.2l.4.2.3.2h.3l.1-.4-.2-.2h-.9Z" style="fill:#ededed;"/><path d="M60.32,25.5v-.2l.4.2.6-.1.1.2-.4.1-.2-.1-.2-.1h-.3Z" style="fill:#ededed;"/><path d="M63.32,25.6l.2-.3.6-.1v.2l-.2.2-.3.2h-.2l-.1-.2Z" style="fill:#ededed;"/><path d="M66.13,9.5l-.2.8.8.2.2.1h.6v-.2l-.5-.1-.1-.1-.1-.7h-.7Z" style="fill:#ededed;"/><path d="M66.32,9.3h.6l.3-.3h.1l.3-.2h.4l.6-.5v-.5h-.1l-.7.6h-.3l-.5-.1-.2.3-.2.3h-.2l-.1.4Z" style="fill:#ededed;"/><path d="M93.32,15.8v-.2h.3l.2.2.3.5.4.4h.2l.6.7.3.2v.1l-.1.2.2.5.3.2.2.2v.2h-.2v.1h-.2l-.2-.5-.6-.6-.5-.6-.5-.5-.4-.8-.3-.3Z" style="fill:#ededed;"/><path d="M96.13,19.8v-.2l.3-.1.3.1h.6l.2.1.3.3v.3l-.3.2v.2h-.3l-.2-.1h-.2v.4h-.3l-.2-.3-.1-.2.2-.4-.1-.1-.2-.2Z" style="fill:#ededed;"/><path d="M96.72,21.2h.3l.4.3.3.6.3.8.1.4-.1.7-.4.1-.3-.3h-.6l-.5.3v.5l-.3.2-.4-.1v-.2l.3-.4.8-.6v-.5h.2l.3.1.2-.5-.3-.3-.2-.6-.1-.5Z" style="fill:#ededed;"/><path d="M95.43,25.3h.3v.2l.1.3.2.2h.2l.2-.3-.2-.3-.3-.5h-.3l-.2.1v.2" style="fill:#ededed;"/><path d="M96.43,24.5h.4l.2-.1.3-.3-.2-.1-.4.1-.2.1-.1.3Z" style="fill:#ededed;"/><path d="M84.22,16.2l.2-.1.1.1v.8l-.2.4-.2.3h-.3v-.2l.3-.3.2-.4-.1-.6Z" style="fill:#ededed;"/><path d="M69.32,21.1h-.2v.2l-.2.1-.2.2v.1l.3.2.4.6v.6l.3.3.3.4.1.5.2.2v.2l-.3.2h-.3l-.7-.4-.4-.1v-.6l.2-.6-.5-.6-.8-.8v-.6l.6-.4.7-.2.3-.1h.3l.1.2v.2l-.2.2Z" style="fill:#ededed;"/><path d="M71.52,20.4h.5v.1l.1.7-.2.4-.3.1h-.3l-.2-.4.1-.5.2-.2.1-.2Z" style="fill:#ededed;"/><path d="M75.63,20.5l-.2.1.1.2h.1l.2.2h.1l.1-.2v-.2h.5l.4-.1.4-.1v-.2h-.3l-.1.1h-.2l-.3-.1-.2-.1h-.2l-.2.2-.2.2Z" style="fill:#ededed;"/><path d="M63.82,40l.5-.2h.2l.3.1v.2l-.2.2-.2.3v.5h-.3l-.4-.3.1-.8Z" style="fill:#ededed;"/><path d="M62.93,41.8v.9l.3.6h.2v-.4l-.2-.5v-.4l-.1-.2h-.2Z" style="fill:#ededed;"/><path d="M64.32,44h.2v.4l.1.8.1.7-.2-.1-.1-.2v-1.1l-.1-.5Z" style="fill:#ededed;"/><path d="M67.82,48.2l.1-.5-.2-.1.2-.7.6-.5.3-.2.3-.5.7-.7.2-.1v1.8l-.7,1.9-.5,1.6-.7.3h-.4l-.3-.7v-.6l.4-1Z" style="fill:#ededed;"/><path d="M71.63,48.5v.3l.3.1h.2v-.2l-.2-.2h-.3Z" style="fill:#ededed;"/><path d="M72.52,48.1h.2v.3l-.1.1h-.2l.1-.4Z" style="fill:#ededed;"/><path d="M93.82,28.7l.3-.1.1.5v.3l.2.7h-.3l-.3-.3-.2-.5.2-.6Z" style="fill:#ededed;"/><path d="M94.22,31.6l.5-.1.4.5-.2.6.2.7.5.2.5.4.1.2h-.3l-.5-.4h-.6l-.5-.7-.1-.4.2-.2-.1-.5-.1-.3Z" style="fill:#ededed;"/><path d="M80.82,35.8l.4.6.4.4-.2.5-.6.2-.3-.5.1-.6.1-.5.1-.1Z" style="fill:#ededed;"/><path d="M86.52,37.6l1.2,1,1.1,1.2.8.8.4.5-.1.6v.4l-.4.1-.9-.8-.9-1.5-.7-1-.6-.8h-.2l-.1-.4.4-.1Z" style="fill:#ededed;"/><path d="M89.52,42.8l.2-.3.6-.2.4.2.9.1.6.2.6.5.1.5-.4-.1-.3-.2h-.6l-.5-.2-.9-.2-.3-.3h-.4Z" style="fill:#ededed;"/><path d="M94.72,35l-.1.4-.3.5h-.2v-.4l.2-.3.1-.2.2-.1" style="fill:#ededed;"/><path d="M95.52,34.6h.4v.2l-.2.3-.3.1v-.3l.1-.3Z" style="fill:#ededed;"/><path d="M95.13,36.2l.2-.3.2-.1h.1l.2-.1.1-.3h.3l.1.3.2.3-.5.7h-.4v-.4l-.1-.1h-.4Z" style="fill:#ededed;"/><path d="M94.02,37l.2.2.2.2.2.3-.4.3-.1.6.3.3.1.5-.4.4-.3.9-.4.8-.2.1h-.4l-1.2-.5-.3-.8-.1-.7v-.4h.2l1-.7.6-.7.3-.5.1-.4.6.1Z" style="fill:#ededed;"/><path d="M98.02,38.8l.1.3v.6l-.1.3h-.2l-.2-.3v-.3l.1-.4.2-.2h.1Z" style="fill:#ededed;"/><path d="M96.63,39.3h.2v.1l-.2.2-.4.1h-.9l-.1.8.4-.3.4-.2.3.1v.2h-.2l-.5.3v.3l.3.5.1.3-.2.3-.4.1v-.3l-.1-.7h-.2l-.1.4.1.7v.1h-.4v-.6l-.1-.4v-.7l.3-1,.2-.3h.5l.1.2h.5l.4-.2Z" style="fill:#ededed;"/><path d="M93.32,43.8l.2-.2.2-.2h.6v.2l-.2.2h-.8Z" style="fill:#ededed;"/><path d="M94.72,43.6v.2l.2.1h.5l.5-.3v-.3h-.2l-.3.2-.7.1Z" style="fill:#ededed;"/><path d="M96.02,44.1v.3h.3l.3-.2.6-.3.1-.1v-.2h-.2l-.5.2h-.3v.2l-.3.1Z" style="fill:#ededed;"/><path d="M97.93,41.1h.4l.4.2v.2h-.5l-.3-.1v-.3Z" style="fill:#ededed;"/><path d="M98.93,40.4l.4.9.5.1.7.5.6.4.1.3v.7l.6.5.6.1.4.2.5-.6.2-.1.5.6.2.5.5.2h.5l.1-.3-.5-.7-.3-.4-.1-.3.1-.3-.8-.7-.8-.5-.5-.2-.6-.3-.8-.2-.5.4h-.4v-.6l-.1-.2-.4-.1-.2-.1h-.2l-.3.2Z" style="fill:#ededed;"/><path d="M104.82,42.8h1l.3-.4v-.7l-.2.1-.1.2-.1.3v.1h-.1l-.2-.1h-.2v.1l-.4.2v.2Z" style="fill:#ededed;"/><path d="M102.52,44.7h.2l.1,1.8.1,1.6.8,1.8.4,2.2-.6,1.3-1.2,2-1.6,1.6-.3.2-.5.1-.4.3-.3.2-.3-.1v-.2h-.4l-.2.3-.3-.2-.4-.6-.1-.7-.2-.6.5-.5v-.2h-.3l-.5.3v.3l-.3.1v-1.1l-.3-.3h-1.9l-1.5.3-1.4.6-.5.1-.4.1-.3-.5.5-1.7.3-1.9.1-1.7,1.4-.7,1.3-.2,1.6-1.5,1.1-.9.5-.1v.4h.6l-.2-.3v-.3l.4-.1.6-.7.2-.3h.4l.2.2.7.1.1.3-.4,1,.1.4.2.3.7.7.4-.1.6-1.1.2-.9.2-.7.3-.4Z" style="fill:#ededed;"/><path d="M98.02,58.6l.2-.1.2.2.3-.1h.4l.1.4-.5.3-.1.2-.3.3h-.7v-.5l.2-.5v-.3l.2.1Z" style="fill:#ededed;"/><path d="M108.02,56.7l.2.2.1.9v.5l.5.1v.3h-.5l-.4.3-.5.5-.3.5-.4-.1.1-.4.1-.6.4-.2.4-.4.1-.7.1-.7.1-.2Z" style="fill:#ededed;"/><path d="M106.13,59.5l.3.3.1.4-.5.2-.9.2-.6.5-.4.3-.2.3-.3.2h-.9v-.5l.3-.2.8-.3.5-.4.7-.3.6-.6.5-.1Z" style="fill:#ededed;"/></svg>',body:'<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200"><path d="M623.88,649.85c4.15,25.31,27.22,104.32,30.84,116.12,3.64,11.76,6.35,23.58,7.25,31.74.91,8.15,3.64,21.77,15.45,46.25,5.44,10.87,9.05,18.15,9.96,23.57.91,5.46,0,38.11,1.8,51.73,1.82,13.6,14.51,62.58,31.75,99.76,3.61,9.07,16.31,36.28,11.78,59.86-4.52,23.59-4.52,32.68,7.26,34.48,16.31,3.64,26.29,7.26,32.63,15.42,3.64,3.62,17.26,11.79,30.84,8.16,4.55,2.73,13.65,3.64,17.26-.9,4.52,0,6.35-6.35,5.41-11.79l-7.22-7.25s-19.97-8.17-25.4-13.62c-5.46-5.44-39.89-19.94-42.64-142.4-.89-26.29,1.8-49.88-2.72-70.74-4.52-20.87-16.33-64.4-16.33-64.4.91-38.1-.89-117.91-15.4-200.45-1.85-10.88-3.64-26.3-3.64-40.81s-8.18-67.2-11.78-73.54c.89-6.35,0-14.52-.91-24.49-.91-9.98.02-34.39.91-40.75.91-6.34,4.55-17.24,5.46-30.83.89-13.62,5.41-22.69,7.26-33.56,1.78,16.31,7.25,48.98,10.87,58.96.91,14.51,3.64,24.49,6.35,30.83-1.82,19.05,25.55,81.06,44.6,117.32.76,32,.05,45.07,1.29,55.23,0,0,1.6,23.88,2.21,31.25.56,7.36,7.69,4.91,8.09.85l1.62-24,2.76-.17,4.8,27.85c2.34,8,8.21,4.51,8.7,0l-.37-26.95,1.87-.7,9.05,26.91c3.86,10.91,10.38,5.21,9.21-.85l-6.05-29.35,2.34-.67s7.78,15.41,11.23,23.51c3.66,8.61,10.03,4.25,7.99-2.33-1.57-5.07-7.01-24.45-10.05-34.34-3.07-9.89,3.96-11.9,9.94-8.07,12.47,7.22,16.99,3.14,15.73-2-9.14-4.16-20.48-13.55-26.21-24.19-4.55-8.68-12.71-13.65-21.59-24.6-12.71-19.07-16.38-59.34-18.22-73.86-3.61-29.93-12.71-59.86-20.85-72.56,1.8-21.77-1.8-41.73-5.44-56.24,12.71-82.54-16.33-110.66-31.75-116.1-2.72-3.64-13.6-9.98-17.23-11.8-46.26-19.96-56.36-23.91-59.53-33.55-2.27-6.85-2.75-21.1-2.79-30.35,1.4-4.69,4.45-14.55,4.45-14.55,0,0,4.55,0,5.46-2.72.91-2.72,4.97-12.24,6.32-16.78,1.36-4.54.47-12.7.47-14.51s-3.07-1.92-5.81-1.92l2.16-7.61c1.38-9.07,1.57-32.47-8.14-46.25-8.63-12.25-20.85-17.7-36.76-17.7-15.91,0-28.1,5.42-36.72,17.68-9.72,13.78-9.53,37.19-8.15,46.25l2.16,7.61c-2.71,0-5.8.1-5.8,1.92s-.9,9.97.46,14.51c1.36,4.55,5.43,14.06,6.36,16.78.9,2.72,5.43,2.72,5.43,2.72,0,0,3.06,9.86,4.48,14.56-.05,9.25-.52,23.5-2.77,30.35-3.18,9.64-13.3,13.6-59.54,33.55-3.64,1.81-14.51,8.17-17.23,11.8-15.43,5.44-44.45,33.56-31.75,116.1-3.62,14.51-7.25,34.46-5.45,56.24-8.16,12.71-17.23,42.64-20.86,72.56-1.81,14.52-5.52,54.79-18.21,73.86-8.88,10.96-17.04,15.93-21.59,24.6-5.73,10.65-17.05,20.03-26.2,24.19-1.29,5.15,3.25,9.23,15.72,2,5.99-3.83,13.02-1.81,9.96,8.07-3.06,9.9-8.5,29.27-10.08,34.34-2.03,6.59,4.34,10.93,8,2.33,3.45-8.1,11.21-23.51,11.21-23.51l2.36.67-6.05,29.35c-1.19,6.06,5.33,11.76,9.21.85l9.02-26.91,1.89.7-.37,26.95c.48,4.51,6.31,8,8.66,0l4.84-27.85,2.75.17,1.6,24c.42,4.05,7.51,6.5,8.11-.85.6-7.36,2.21-31.25,2.21-31.25,1.22-10.16.52-23.23,1.27-55.23,19.04-36.27,46.43-98.27,44.61-117.32,2.72-6.34,5.45-16.32,6.35-30.83,3.62-9.97,9.07-42.65,10.88-58.96,1.81,10.87,6.36,19.95,7.25,33.56.91,13.6,4.55,24.49,5.45,30.83.91,6.36,1.85,30.77.93,40.75-.9,9.97-1.8,18.14-.9,24.49-3.62,6.34-11.8,59-11.8,73.53s-1.8,29.93-3.62,40.81c-14.51,82.54-16.32,162.35-15.42,200.45,0,0-11.8,43.53-16.33,64.4-4.54,20.84-1.82,44.44-2.72,70.75-2.73,122.45-37.19,136.96-42.64,142.39-5.44,5.45-25.4,13.62-25.4,13.62l-7.25,7.25c-.91,5.44.9,11.79,5.44,11.79,3.62,4.54,12.71,3.65,17.23.9,13.61,3.64,27.21-4.52,30.84-8.16,6.35-8.16,16.32-11.79,32.64-15.42,11.8-1.8,11.8-10.88,7.26-34.48-4.54-23.57,8.16-50.79,11.79-59.85,17.24-37.19,29.94-86.16,31.75-99.76,1.82-13.62.91-46.26,1.82-51.73.89-5.43,4.51-12.7,9.96-23.57,11.78-24.48,14.51-38.11,15.42-46.25.9-8.16,3.62-19.97,7.26-31.74,3.62-11.8,26.63-90.8,30.83-116.12,1.05-6.05,6.28-3.8,6.89.01h0Z" style="fill:#ededed;"/></svg>',plane:'<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200"><path d="M547.52,102.91c-13.48,13.48-21.9,32.02-21.87,52.36l.03,247.49-457.81,203.58c-7.87,3.47-12.93,11.2-13.05,19.76l.03,52.45c.03,6.62,3.04,12.87,8.22,17.01,5.21,4.11,11.95,5.64,18.43,4.19l444.42-98.59-.17,377.93-92.46,46.06.03.03c-7.49,3.73-12.15,11.4-12.06,19.76v52.42c.09,6.97,3.47,13.48,9.14,17.53,5.67,4.05,12.93,5.18,19.53,2.98l150.4-50.08,149.88,50.08c6.62,2.11,13.86.95,19.47-3.15,5.64-4.08,8.94-10.62,8.97-17.59l.23-52.19c-.03-8.3-4.8-15.85-12.29-19.53l-92.46-46.52-.06-377.7,444.45,98.74c6.45,1.48,13.22-.09,18.4-4.22,5.18-4.14,8.22-10.36,8.22-17.01l.06-52.36c0-8.62-5.12-16.4-13.02-19.9l-457.96-203.72-.26-247.6c0-40.68-33.38-74.06-74.09-74.09-20.37,0-38.88,8.39-52.36,21.87l.02.03Z" style="fill:#ededed;"/></svg>',theater:'<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200"><g id="back"><path d="M73.48,600.08c0,138.95,65.26,262.81,166.76,342.59,14.01,11.01,33.99,10.19,47-1.99,90.97-85.17,147.87-206.31,147.87-340.6s-56.9-255.42-147.87-340.6c-13.01-12.18-32.99-13-47-1.99-101.5,79.77-166.76,203.64-166.76,342.59h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></g><g id="sectors"><g id="Economy"><path d="M627.49,900.06c-33.61-13.92-91.84-38.04-125.45-51.96-13.08,30.87-28.6,60.69-46.43,89.19-20.02-.28-40.03-.56-60.05-.84-9.14,13.01-18.81,25.64-28.98,37.85-3.13,3.75-6.3,7.47-9.52,11.15,40.53,34.61,135.06,115.36,141.81,121.11,26.77-30.76,51.1-63.63,72.72-98.31-.05-.03-.1-.06-.15-.09,21.04-33.29,56.06-108.11,56.06-108.11h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M627.5,299.72c-15.39-35.97-34.99-74.75-55.97-107.95.02-.01.04-.02.06-.04-21.63-34.68-45.95-67.55-72.72-98.31-6.74,5.76-101.27,86.49-141.8,121.11,3.22,3.67,6.39,7.39,9.51,11.14h0c10.17,12.22,19.84,24.85,28.99,37.87,20.05-.28,40.11-.56,60.16-.85,17.78,28.43,33.26,58.19,46.3,88.98,33.61-13.92,91.85-38.05,125.45-51.97h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M951.4,1003.31c-.73-.3-114.96-47.62-124.36-51.51.04-.11.09-.22.14-.33-53.9-22.33-107.81-44.65-161.71-66.98-15.05,36.85-32.93,72.29-53.41,106.02.05.03.1.06.15.1-18.67,30.75-39.5,60.08-62.31,87.77,32.01,23.26,64.01,46.51,96.02,69.77,28.81-3.86,56.93-9.91,84.17-17.98,30.83-10.08,46.15-13.36,68.51-25.47-.02-.01-.05-.03-.07-.04,56.6-25.31,108.18-59.71,152.86-101.34h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M798.61,95.31c-27.64-11.86-42.78-17.65-68.46-25.45-27.26-8.07-55.39-14.13-84.22-17.99h0c-32.01,23.25-64.01,46.51-96.01,69.76,22.83,27.72,43.68,57.09,62.37,87.87.08-.05.17-.1.25-.15,20.46,33.72,38.33,69.13,53.37,105.97,53.82-22.29,107.65-44.59,161.48-66.89.01.03.03.07.04.1h0c7.31-3.03,123.88-51.31,124.61-51.62-44.83-41.77-96.61-76.27-153.43-101.6h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></g><g id="Regular"><path d="M872.18,387.76c63.81-15.32,127.62-30.64,191.42-45.96-17.66-33.08-38.6-64.18-62.39-92.86-14.93-18.58-32.67-37.67-49.17-52.03,0,0-83.81,34.71-124.61,51.61.01.03.02.05.03.08-53.85,22.3-107.7,44.61-161.55,66.92,3.97,9.73,7.75,19.57,11.32,29.49,3.09,8.58,6.02,17.2,8.79,25.86,16.1,4.31,32.2,8.63,48.3,12.94,3.27,11.58,6.28,23.22,9.02,34.93,42.95-10.31,85.9-20.62,128.85-30.93h0s0-.03-.01-.05h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M872.17,812.24s0-.03.01-.05c-42.95-10.31-85.9-20.62-128.84-30.93h0c-2.74,11.71-5.75,23.36-9.02,34.93-16.1,4.31-32.2,8.63-48.31,12.94-2.76,8.65-5.69,17.26-8.78,25.83-3.58,9.94-7.36,19.78-11.34,29.52,53.85,22.31,107.7,44.61,161.55,66.92-.01.02-.02.05-.03.07,40.81,16.9,122.43,50.71,122.43,50.71l2.19.91c5.73-4.97,26.85-27.78,49.14-52.04,23.8-28.68,44.74-59.77,62.4-92.86-63.81-15.32-127.61-30.64-191.42-45.96h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M686.55,548.32l-.22.02c-3-44.49-9.7-88.78-20.42-132.36-.08.02-.17.04-.25.06-6.48-26.32-14.36-52.38-23.65-78.07-4.59-12.69-9.5-25.23-14.73-37.6-8.21,3.4-91.85,38.04-125.46,51.96,13.1,30.91,23.75,62.87,31.83,95.57.08-.02.17-.04.26-.06,1.95,7.89,3.75,15.83,5.39,23.8,5.98,28.94,9.91,58.2,11.81,87.56h0c.07,0,.15-.01.22-.01,1.75,27.2,1.75,54.48,0,81.67-.07,0-.15-.01-.22-.02-1.9,29.35-5.83,58.6-11.81,87.54-1.65,7.98-3.45,15.92-5.4,23.81-.08-.02-.17-.04-.25-.06-8.08,32.7-18.73,64.65-31.83,95.56,33.61,13.92,117.24,48.56,125.44,51.96,5.23-12.38,10.14-24.93,14.73-37.63,9.29-25.68,17.17-51.74,23.64-78.05l.25.06c10.72-43.58,17.57-87.87,20.57-132.36.07,0,.15.01.22.02,2.41-41.58,1.75-54.63-.15-103.37h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></g><path id="Premium" d="M1121.49,514.89s-.01,0-.03,0c-9.63-61.56-29.51-119.79-57.85-172.88-63.87,15.33-127.74,30.67-191.61,46,0,.02,0,.03.01.05-42.89,10.3-85.78,20.6-128.67,30.89,6.87,29.31,12.06,59.01,15.56,88.96,1.38,11.81,2.5,23.64,3.34,35.48,43.97-3.46,87.95-6.92,131.92-10.38.25,3.37.47,6.74.68,10.11.5,7.89.92,15.74,1.21,23.65.82,22.14.82,44.29,0,66.43h0c-.29,7.91-.71,15.75-1.21,23.65-.21,3.38-.43,6.77-.68,10.15-43.98-3.46-87.95-6.92-131.92-10.38-.85,11.85-1.96,23.67-3.34,35.48-3.5,29.95-8.7,59.65-15.56,88.96,42.88,10.29,85.77,20.59,128.66,30.89,0,.01,0,.03-.01.05,63.86,15.33,127.72,30.66,191.59,46h0c28.35-53.1,48.23-111.31,57.87-172.87h.03c6.71-76.7,6.71-118.82.01-170.22h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></g></svg>',floorPlan:'<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200"><path d="M1037.38,1061.68h-218.69v-60.75h97.19c6.69,0,12.15-5.46,12.15-12.15,0-60.27-49.07-109.34-109.34-109.34v-206.54h242.99v364.48c0,13.43-10.87,24.3-24.3,24.3ZM806.54,976.63h96.34c-5.79-40.15-36.31-72.9-96.34-72.9-6.69,0-12.15-5.46-12.15-12.15V332.71c0-6.69,5.46-12.15,12.15-12.15,59.18,0,90.46-31.94,96.34-72.9h-96.34c-6.69,0-12.15-5.46-12.15-12.15v-97.19h-328.03v194.39c0,6.69-5.46,12.15-12.15,12.15h-182.24v194.39h328.03c6.69,0,12.15,5.46,12.15,12.15v109.34c0,6.69-5.46,12.15-12.15,12.15H138.32v194.39c0,13.43,10.87,24.3,24.3,24.3h437.38v145.79c0,13.43,10.87,24.3,24.3,24.3h170.09v-72.9c0-6.69,5.46-12.15,12.15-12.15ZM915.88,223.37c6.69,0,12.15,5.46,12.15,12.15,0,60.27-49.07,109.34-109.34,109.34v303.73h242.99V162.62c0-13.43-10.87-24.3-24.3-24.3h-218.69v85.05h97.19ZM259.82,563.55c-6.69,0-12.15-5.46-12.15-12.15v-218.69c0-6.69,5.46-12.15,12.15-12.15h182.24v-182.24H162.62c-13.43,0-24.3,10.87-24.3,24.3v485.97h449.53v-85.05h-328.03Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></svg>'}},85954:(t,e,n)=>{"use strict";n.d(e,{HI:()=>u,Hv:()=>g,Lc:()=>l,PJ:()=>h,Ss:()=>p,fo:()=>f,iE:()=>a,k$:()=>i,r2:()=>o,wR:()=>r});const i=["image/svg+xml","image/svg","application/json","application/xml","text/xml",".xml"];var r,o,a,s;!function(t){t.Area="area",t.Link="link"}(r||(r={})),function(t){t[t.None=0]="None",t[t.Match=1]="Match",t[t.Unmatch=2]="Unmatch"}(o||(o={})),function(t){t.GroupMatched="data-okviz-group-matched",t.GroupUnbound="data-okviz-group-unbound",t.GroupLink="data-okviz-group-link",t.Matched="data-okviz-matched",t.JsvgId="data-okviz-jsvg-id",t.AutoId="data-okviz-auto-id",t.LinkToMap="data-okviz-link-map",t.PreviousColor="data-okviz-color"}(a||(a={})),function(t){t.SvgAuthor="data-okviz-svg-author",t.SvgAttribution="data-okviz-svg-attribution",t.NoLabel="data-okviz-svg-no-labels",t.Unbound="data-okviz-unbound",t.Strong="data-okviz-strong",t.AreaType="data-okviz-area-type",t.DrillTo="data-okviz-drill-url",t.LinkTo="data-okviz-link-url",t.AutoFetch="data-okviz-autofetch",t.CatHorizPos="data-okviz-cat-x-position",t.CatVertPos="data-okviz-cat-y-position",t.DataHorizPos="data-okviz-data-x-position",t.DataVertPos="data-okviz-data-y-position"}(s||(s={}));const l={...a,...s};function c(t){return!("object"!=typeof t||null===t||"string"!=typeof t.url||"name"in t&&"string"!=typeof t.name||"mapSelector"in t&&"string"!=typeof t.mapSelector)}function u(t){if(!Array.isArray(t))return!1;for(const e of t)if(!c(e))return!1;return!0}function h(t,e=!1){if(!t)return!1;const n=e?"string"==typeof t.rects:"object"==typeof t.rects&&function(t){return t&&Object.values(t).some(d)}(t.rects),i=e?"string"==typeof t.dataMapping:"object"==typeof t.dataMapping&&function(t){return t&&(void 0===t.mapSelector||"string"==typeof t.mapSelector)&&t.areas&&"object"==typeof t.areas}(t.dataMapping);return"string"==typeof t.id&&"string"==typeof t.name&&"string"==typeof t.source&&"string"==typeof t.svg&&n&&i&&(void 0===t.meta||"object"==typeof t.meta)}function d(t){return t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}function p(t){return Object.values(r).includes(t)}function f(t){return t instanceof File}const g={[r.Area]:[[l.DrillTo,"drillTo","string"]],[r.Link]:[[l.LinkTo,"linkTo","string"],[l.LinkToMap,"linkToMap","string"]]}},30980:(t,e,n)=>{"use strict";n.d(e,{Mb:()=>A,RZ:()=>E,Yw:()=>T});var i=n(87674),r=n(81807),o=n(39236),a=n(31171),s=n(25539),l=n(46449),c=i.z.Kx;const u="  𝓲",h=(t=0)=>({value:thisVisual.host.colorPalette.getColor(t.toString()).value}),d=()=>({value:thisVisual.host.colorPalette.foreground.value}),p=(t,...e)=>e.includes(t?.value),f={minValue:{type:0,value:0},maxValue:{type:1,value:200},unitSymbol:"pt",unitSymbolAfterInput:!0},g={minValue:{type:0,value:0},maxValue:{type:1,value:100},unitSymbol:"%",unitSymbolAfterInput:!0},m={minValue:{type:0,value:10},maxValue:{type:1,value:100},unitSymbol:"%",unitSymbolAfterInput:!0},v={minValue:{type:0,value:0},maxValue:{type:1,value:4}},y={minValue:{type:0,value:1},maxValue:{type:1,value:20}},b={minValue:{type:0,value:0},maxValue:{type:1,value:20}},w={minValue:{type:0,value:0},maxValue:{type:1,value:40}},S=[{displayName:"Solid",value:"solid"},{displayName:"Dashed",value:"dashed"},{displayName:"Dotted",value:"dotted"},{displayName:"Double",value:"double"}],x=[{displayName:"(Auto Detect)",value:"auto"},{displayName:"Sum",value:"sum"},{displayName:"Average",value:"average"},{displayName:"Minimum",value:"min"},{displayName:"Maximum",value:"max"}],k=[{displayName:"Auto",value:""},{displayName:"Auto (with max)",value:"max"},{displayName:"Fixed",value:"fixed"}],C=[{displayName:"Original",value:"original"},{displayName:"Hidden",value:"hidden"},{displayName:"Visible",value:"visible"}],M=[{displayName:"Based on Area Color",value:"areaColor"},{displayName:"Custom",value:"custom"}];var T;function E(t){return t.categoryLabels.includeDataLabel.value||p(t.categoryLabels.matchedDisplayValue.value,"custom")&&!!t.categoryLabels.matchedCustomValue.value.match(/{value}/)}!function(t){t.Disabled="",t.Single="single",t.All="all"}(T||(T={}));class A extends c{appearance=new _;areas=new P;categoryLabels=new D;dataLabels=new O;legend=new L;tooltips=new I;toolbars=new R;accessibility=new F;drill=new V;advanced=new N;license=new a.th;myStorage=new B;about=new z;featureFlags=new r.br9;updater=new s.JA;internal=new j;cards=[this.appearance,this.areas,this.categoryLabels,this.dataLabels,this.legend,this.tooltips,this.toolbars,this.drill,this.advanced,this.accessibility,this.license,this.myStorage,this.about,this.featureFlags,this.updater,this.internal]}class _ extends r.zD3{name="appearance";displayName="Appearance";showTitle=(0,r.Z0q)(i.z.jF,{name:"mapTitle",value:!0});titleColor=(0,r.Z0q)(i.z.sk,{name:"mapTitleFill",displayName:"Color",value:{value:"#424242"}});showPlaceholder=(0,r.Z0q)(i.z.jF,{name:"showPlaceholder",value:!0});placeholder=(0,r.Z0q)(i.z.PA,{name:"placeholder",displayName:`Placeholder Type ${u}`,description:"Choose the type placeholder to show. If you choose 'Auto', a grid will be shown when in Editing View and a standard text and a background image when in Reading View.",value:{value:"auto",displayName:"(Auto)"},items:[{value:"auto",displayName:"(Auto)"},{value:"grid",displayName:"Grid"},{value:"image",displayName:"Image & Text"}]});placeholderGridCols=(0,r.Z0q)(i.z.iB,{name:"placeholderGridCols",displayName:"Grid Columns",value:4,options:{minValue:{type:0,value:1},maxValue:{type:1,value:10}},visibleIf:t=>p(t.appearance.placeholder.value,"auto","grid")});placeholderGridRows=(0,r.Z0q)(i.z.iB,{name:"placeholderGridRows",displayName:"Grid Rows",value:3,options:{minValue:{type:0,value:1},maxValue:{type:1,value:10}},visibleIf:t=>p(t.appearance.placeholder.value,"auto","grid")});placeholderImage=(0,r.Z0q)(i.z.PA,{name:"placeholderImage",displayName:"Image Type",value:{value:"geo",displayName:"Geographical"},items:[{value:"geo",displayName:"Geographical"},{value:"theater",displayName:"Theater"},{value:"floorPlan",displayName:"Floor Plan"},{value:"body",displayName:"Human Body"},{value:"plane",displayName:"Airplane"},{value:"custom",displayName:"(Custom)"},{value:"none",displayName:"(None)"}],visibleIf:t=>p(t.appearance.placeholder.value,"auto","image")});placeholderImageUrl=(0,r.Z0q)(i.z.ks,{name:"placeholderImageUrl",displayName:`Image URL ${u}`,description:"Enter the URL of the image to show as a placeholder.",placeholder:"https://",value:"",visibleIf:t=>p(t.appearance.placeholder.value,"auto","image")&&p(t.appearance.placeholderImage.value,"custom")});placeholderText=(0,r.Z0q)(i.z.ks,{name:"placeholderText",displayName:`Text ${u}`,description:"Enter the text to show as a placeholder. You can use these placeholders: '{category}', '{path}' to include dynamic data. Leave empty to not show any text.",value:"No map set at this level",placeholder:"Enter text",visibleIf:t=>p(t.appearance.placeholder.value,"auto","image")});placeholderFont=(0,r.Cjg)(i.z.tc,{name:"placeholderFont",displayName:"Font",fontFamily:(0,r.Z0q)(i.z.Cx,{name:"placeholderFontFamily",value:r.Q9G}),fontSize:(0,r.Z0q)(i.z.iB,{name:"placeholderFontSize",displayName:"Font size",value:12}),bold:(0,r.Z0q)(i.z.jF,{name:"placeholderBold",value:!1}),italic:(0,r.Z0q)(i.z.jF,{name:"placeholderItalic",value:!1}),underline:(0,r.Z0q)(i.z.jF,{name:"placeholderUnderline",value:!1})});placeholderColor=(0,r.Z0q)(i.z.sk,{name:"placeholderFill",displayName:"Color",value:{value:"#878787"}});keepAspectRatio=(0,r.Z0q)(i.z.jF,{name:"keepAspectRatio",displayName:`Keep Aspect Ratio ${u}`,description:"Keep the aspect ratio of the map when resizing the visual. Disable to stretch the map to fill the available space.",value:!0});viewboxScale=(0,r.Z0q)(i.z.Ap,{name:"viewboxScale",displayName:`Viewbox Scale ${u}`,description:"Set the map viewbox scale. Increasing the value will make the map larger and could hide some areas, decreasing it will make the map smaller.",value:100,options:{minValue:{type:0,value:1},maxValue:{type:1,value:200},unitSymbol:"%",unitSymbolAfterInput:!0}});showAttribution=(0,r.Z0q)(i.z.jF,{name:"attribution",value:!0});attributionFont=(0,r.Cjg)(i.z.tc,{name:"attributionFont",displayName:"Font",fontFamily:(0,r.Z0q)(i.z.Cx,{name:"attributionFontFamily",value:r.Q9G}),fontSize:(0,r.Z0q)(i.z.iB,{name:"attributionFontSize",displayName:"Font size",value:9}),bold:(0,r.Z0q)(i.z.jF,{name:"attributionBold",value:!1}),italic:(0,r.Z0q)(i.z.jF,{name:"attributionItalic",value:!1}),underline:(0,r.Z0q)(i.z.jF,{name:"attributionUnderline",value:!1})});attributionColor=(0,r.Z0q)(i.z.sk,{name:"attributionFill",displayName:"Color",value:{value:"#424242"}});attributionStroke=(0,r.Z0q)(i.z.jF,{name:"attributionStroke",displayName:`Outline ${u}`,description:"Add a border to the text.",value:!1});attributionStrokeFill=(0,r.Z0q)(i.z.sk,{name:"attributionStrokeFill",displayName:`Outline Color ${u}`,description:"Select 'No Fill' to apply automatic color based on text color.",value:null,isNoFillItemSupported:!0,visibleIf:t=>t.appearance.attributionStroke.value});attributionStrokeTransparency=(0,r.Z0q)(i.z.Ap,{name:"attributionStrokeTransparency",displayName:"Outline Transparency",value:50,options:g,visibleIf:t=>t.appearance.attributionStroke.value});attributionStrokeWidth=(0,r.Z0q)(i.z.Ap,{name:"attributionStrokeWidth",displayName:"Outline Width",value:2,options:y,visibleIf:t=>t.appearance.attributionStroke.value});showDrillPath=(0,r.Z0q)(i.z.jF,{name:"drillPath",value:!0});showDrillPathOnFirstLevel=(0,r.Z0q)(i.z.jF,{name:"drillPathOnFirstLevel",displayName:`Show on First Level ${u}`,description:"Show the drill path label even on the first level. If disabled, the label will only show when drilling down.",value:!1});groups=[new r.X4n({name:"appearance.title",displayName:"Map Title",topLevelSlice:this.showTitle,slices:[this.titleColor,(0,r.auc)("The map title is only visible in Reading View when there is a single map.")]}),new r.X4n({name:"appearance.placeholder",displayName:"Map Placeholder",topLevelSlice:this.showPlaceholder,slices:[this.placeholder,this.placeholderGridCols,this.placeholderGridRows,this.placeholderImage,this.placeholderImageUrl,this.placeholderText,this.placeholderFont,this.placeholderColor,(0,r.auc)("A placeholder is shown when there is no map at the current level.")]}),new r.X4n({name:"appearance.geometrics",displayName:"Map Geometrics",slices:[this.keepAspectRatio,this.viewboxScale]}),new r.X4n({name:"appearance.attribution",displayName:"Attribution",topLevelSlice:this.showAttribution,slices:[this.attributionFont,this.attributionColor,this.attributionStroke,this.attributionStrokeFill,this.attributionStrokeTransparency,this.attributionStrokeWidth,(0,r.auc)("The attribution is the text shown at the bottom of the visual indicating the source or the copyright of the map.")]}),new r.X4n({name:"appearance.drillpath",displayName:"Drill Path",topLevelSlice:this.showDrillPath,slices:[this.showDrillPathOnFirstLevel,(0,r.auc)("The drill path indicates the current level in the data hierarchy.")],visibleIf:()=>thisVisualFeatures.drillDown})]}class P extends r.zD3{colorModeOptions=[{displayName:"Original",value:"original"},{displayName:"Greyscale",value:"greyscale"},{displayName:"Custom",value:"custom"},{displayName:"(Hidden)",value:"transparent"}];applyColorToOptions=[{displayName:"Fill",value:"fill"},{displayName:"Outline",value:"stroke"}];name="dataPoint";displayName="Areas";infoLegendColor=(0,r.Z0q)(i.z.uI,{name:"infoLegendColor",value:"Matched areas are colored based on the 'Legend' field. You can customize them in the relative section.",visible:!1});matchedColorType=(0,r.Z0q)(i.z.PA,{name:"defaultMatched",displayName:"Color",value:{value:"custom",displayName:"Custom"},items:this.colorModeOptions});matchedColor=(0,r.Z0q)(i.z.sk,{name:"matchedFill",displayName:"Custom color",value:h(),visibleIf:t=>p(t.areas.matchedColorType.value,"custom"),fx:{dataRole:o.Xh.Category}});matchedTransparency=(0,r.Z0q)(i.z.Ap,{name:"matchedTransparency",displayName:"Transparency",value:0,options:g});matchedApplyColorTo=(0,r.Z0q)(i.z.PA,{name:"matchedApplyColorTo",displayName:"Apply Color To",value:{value:"fill",displayName:"Fill"},items:this.applyColorToOptions});unmatchedColorType=(0,r.Z0q)(i.z.PA,{name:"defaultUnmatched",displayName:"Color",value:{value:"original",displayName:"Original"},items:this.colorModeOptions});unmatchedColor=(0,r.Z0q)(i.z.sk,{name:"unmatchedFill",displayName:"Custom color",value:h(1),visibleIf:t=>p(t.areas.unmatchedColorType.value,"custom")});unmatchedTransparency=(0,r.Z0q)(i.z.Ap,{name:"unmatchedTransparency",displayName:"Transparency",value:0,options:g,visibleIf:t=>!p(t.areas.unmatchedColorType.value,"transparent")});unmatchedApplyColorTo=(0,r.Z0q)(i.z.PA,{name:"unmatchedApplyColorTo",displayName:"Apply Color To",value:{value:"fill",displayName:"Fill"},items:this.applyColorToOptions});unboundColorType=(0,r.Z0q)(i.z.PA,{name:"defaultUnbound",displayName:"Color",value:{value:"greyscale",displayName:"Greyscale"},items:this.colorModeOptions});unboundColor=(0,r.Z0q)(i.z.sk,{name:"unboundFill",displayName:"Custom color",value:h(2),visibleIf:t=>p(t.areas.unboundColorType.value,"custom")});unboundTransparency=(0,r.Z0q)(i.z.Ap,{name:"unboundTransparency",displayName:"Transparency",value:0,options:g,visibleIf:t=>!p(t.areas.unboundColorType.value,"transparent")});unboundApplyColorTo=(0,r.Z0q)(i.z.PA,{name:"unboundApplyColorTo",displayName:"Apply Color To",value:{value:"fill",displayName:"Fill"},items:this.applyColorToOptions});outline=(0,r.Z0q)(i.z.PA,{name:"outline",displayName:"Outline",value:{value:"original",displayName:"Original"},items:C});outlineType=(0,r.Z0q)(i.z.PA,{name:"outlineType",displayName:"Color Type",value:{value:"area-color",displayName:"Based on Area Color"},items:M,visibleIf:t=>p(t.areas.outline.value,"visible")});outlineFill=(0,r.Z0q)(i.z.sk,{name:"outlineFill",displayName:"Color",value:{value:"#000000"},visibleIf:t=>p(t.areas.outline.value,"visible")&&p(t.areas.outlineType.value,"custom")});outlineWidth=(0,r.Z0q)(i.z.Ap,{name:"outlineWidth",displayName:"Width",value:1,options:y,visibleIf:t=>p(t.areas.outline.value,"visible")});excludeLines=(0,r.Z0q)(i.z.jF,{name:"excludeLines",displayName:"Lines",value:!0});excludeSymbols=(0,r.Z0q)(i.z.jF,{name:"excludeSymbols",displayName:"Symbols",value:!0});excludeUnclosed=(0,r.Z0q)(i.z.jF,{name:"excludeUnclosed",displayName:"Unclosed Paths",value:!1});excludeText=(0,r.Z0q)(i.z.jF,{name:"excludeText",displayName:"Hardcoded Text",value:!0});groups=[new r.X4n({name:"dataPoint.matchedColor",displayName:"Color",slices:[this.infoLegendColor,this.matchedColorType,this.matchedColor,this.matchedTransparency,this.matchedApplyColorTo]}),new r.X4n({name:"dataPoint.unmatchedColor",displayName:"Color (Unmatched)",slices:[this.unmatchedColorType,this.unmatchedColor,this.unmatchedTransparency,this.unmatchedApplyColorTo]}),new r.X4n({name:"dataPoint.unboundColor",displayName:"Color (Unbound)",slices:[this.unboundColorType,this.unboundColor,this.unboundTransparency,this.unboundApplyColorTo]}),new r.X4n({name:"dataPoint.outline",displayName:"Outline",slices:[this.outline,this.outlineType,this.outlineFill,this.outlineWidth]}),new r.X4n({name:"dataPoint.exclude",displayName:"Exclude",slices:[this.excludeLines,this.excludeSymbols,this.excludeUnclosed,this.excludeText,(0,r.auc)("Choose the SVG shapes to exclude from the matching and coloring process.")]})]}class D extends r.zD3{name="categoryLabels";displayName="Category Labels";show=(0,r.Z0q)(i.z.jF,{name:"show",value:!1});matchedDisplayValue=(0,r.Z0q)(i.z.PA,{name:"matchedPriority",displayName:`Display Value ${u}`,description:"Choose what value to display for the matched elements. If you select '(Custom)', you can enter a custom value that can be subject to Power BI conditional formatting. Choose 'Category Value (Path)' if you have expanded the category hierarchy and want to see the full path.",value:{value:"auto",displayName:"(Auto)"},items:[{value:"auto",displayName:"(Auto)"},{value:"custom",displayName:"(Custom)"},{value:"dataPoint",displayName:"Category Value"},{value:"dataPoint2",displayName:"Category Value (Path)"},{value:"title",displayName:"Title"},{value:"id",displayName:"Element Id"}]});includeDataLabel=(0,r.Z0q)(i.z.jF,{name:"includeDataLabel",displayName:`Append Data Value ${u}`,description:"When enabled, data point value is appended to the category label.",value:!1,visibleIf:t=>!p(t.categoryLabels.matchedDisplayValue.value,"custom")||!t.categoryLabels.matchedCustomValue.value.match(/{value}/)});displayUnit=(0,r.Z0q)(i.z.lp,{name:"unit",displayName:"Display Unit",value:0,visibleIf:t=>E(t)});decimalPlaces=(0,r.Z0q)(i.z.iB,{name:"precision",displayName:"Decimal Places",value:0,options:v,visibleIf:t=>E(t)});aggregation=(0,r.Z0q)(i.z.PA,{name:"aggregation",displayName:`Summarization ${u}`,description:"Choose the summarization method for the data point values. It must be exactly the same as the one used by the value column. This setting is required when you connect a column to 'Legend' or 'Map URLs' field wells, since the aggregation is made by the visual and not from Power BI.",value:{value:"auto",displayName:"(Auto Detect)"},items:x,visibleIf:t=>E(t)});matchedCustomValue=(0,r.Z0q)(i.z.ks,{name:"matchedCustomValue",displayName:`Custom Value ${u}`,description:"Enter a custom value to display for the matched elements. You can use these placeholders: '{category}', '{value}', '{title}', '{id}', '{path}' to include specific fields from the data model or map.",placeholder:"Enter custom value",value:"",visibleIf:t=>p(t.categoryLabels.matchedDisplayValue.value,"custom"),fx:{dataRole:o.Xh.Category}});matchedColor=(0,r.Z0q)(i.z.sk,{name:"matchedFill",displayName:"Color",value:{value:"#424242"},fx:{dataRole:o.Xh.Category}});showMatchedStroke=(0,r.Z0q)(i.z.jF,{name:"showMatchedStroke",displayName:"Outline",value:!1});matchedStrokeColor=(0,r.Z0q)(i.z.sk,{name:"matchedStrokeFill",displayName:`Outline Color ${u}`,description:"Select 'No Fill' to apply automatic color based on text color.",value:null,isNoFillItemSupported:!0,fx:{dataRole:o.Xh.Category},visibleIf:t=>t.categoryLabels.showMatchedStroke.value});matchedStrokeTransparency=(0,r.Z0q)(i.z.Ap,{name:"matchedStrokeTransparency",displayName:"Outline Transparency",value:50,options:g,visibleIf:t=>t.categoryLabels.showMatchedStroke.value});matchedStrokeWidth=(0,r.Z0q)(i.z.Ap,{name:"matchedStrokeWidth",displayName:"Outline Width",value:2,options:y,visibleIf:t=>t.categoryLabels.showMatchedStroke.value});showMatchedBackground=(0,r.Z0q)(i.z.jF,{name:"showMatchedBackground",value:!1});matchedAutoBackground=(0,r.Z0q)(i.z.jF,{name:"matchedAutoBackground",displayName:`Auto Color ${u}`,description:"Automatically apply a background color based on the text color.",value:!0});matchedBackgroundColor=(0,r.Z0q)(i.z.sk,{name:"matchedBackgroundFill",displayName:"Background Color",value:null,isNoFillItemSupported:!0,fx:{dataRole:o.Xh.Category},visibleIf:t=>!t.categoryLabels.matchedAutoBackground.value});matchedBackgroundTransparency=(0,r.Z0q)(i.z.Ap,{name:"matchedBackgroundTransparency",displayName:"Transparency",value:0,options:g});matchedBackgroundCornerRadius=(0,r.Z0q)(i.z.Ap,{name:"matchedBackgroundCornerRadius",displayName:"Corner Radius",value:0,options:b});matchedBackgroundPadding=(0,r.Z0q)(i.z.Ap,{name:"matchedBackgroundPadding",displayName:"Padding",value:0,options:w});showMatchedBackgroundStroke=(0,r.Z0q)(i.z.jF,{name:"showMatchedBackgroundStroke",displayName:"Outline",value:!1});matchedBackgroundStrokeColor=(0,r.Z0q)(i.z.sk,{name:"matchedBackgroundStrokeFill",displayName:`Outline Color ${u}`,description:"Select 'No Fill' to apply the same of color of the text.",value:null,isNoFillItemSupported:!0,fx:{dataRole:o.Xh.Category},visibleIf:t=>t.categoryLabels.showMatchedBackgroundStroke.value});matchedBackgroundStrokeTransparency=(0,r.Z0q)(i.z.Ap,{name:"matchedBackgroundStrokeTransparency",displayName:"Outline Transparency",value:10,options:g,visibleIf:t=>t.categoryLabels.showMatchedBackgroundStroke.value});matchedBackgroundStrokeWidth=(0,r.Z0q)(i.z.Ap,{name:"matchedBackgroundStrokeWidth",displayName:"Outline Width",value:2,options:y,visibleIf:t=>t.categoryLabels.showMatchedBackgroundStroke.value});matchedBackgroundStrokeStyle=(0,r.Z0q)(i.z.PA,{name:"matchedBackgroundStrokeStyle",displayName:"Outline Style",value:{value:"solid",displayName:"Solid"},items:S,visibleIf:t=>t.categoryLabels.showMatchedBackgroundStroke.value});showUnmatched=(0,r.Z0q)(i.z.jF,{name:"showUnmatched",value:!1});unmatchedDisplayValue=(0,r.Z0q)(i.z.PA,{name:"unmatchedPriority",displayName:`Display Value ${u}`,description:"Choose what value to display for the unmatched elements. Select '(Auto)' to let the visual choose the best value to display.",value:{value:"auto",displayName:"(Auto)"},items:[{value:"auto",displayName:"(Auto)"},{value:"title",displayName:"Title"},{value:"id",displayName:"Element Id"}]});unmatchedColor=(0,r.Z0q)(i.z.sk,{name:"unmatchedFill",displayName:"Color",value:d()});showUnmatchedStroke=(0,r.Z0q)(i.z.jF,{name:"showUnmatchedStroke",displayName:"Outline",value:!1});unmatchedStrokeColor=(0,r.Z0q)(i.z.sk,{name:"unmatchedStrokeFill",displayName:`Outline Color ${u}`,description:"Select 'No Fill' to apply automatic color based on text color.",value:null,isNoFillItemSupported:!0,visibleIf:t=>t.categoryLabels.showUnmatchedStroke.value});unmatchedStrokeTransparency=(0,r.Z0q)(i.z.Ap,{name:"unmatchedStrokeTransparency",displayName:"Outline Transparency",value:50,options:g,visibleIf:t=>t.categoryLabels.showUnmatchedStroke.value});unmatchedStrokeWidth=(0,r.Z0q)(i.z.Ap,{name:"unmatchedStrokeWidth",displayName:"Outline Width",value:2,options:y,visibleIf:t=>t.categoryLabels.showUnmatchedStroke.value});showUnmatchedBackground=(0,r.Z0q)(i.z.jF,{name:"showUnmatchedBackground",value:!1});unmatchedAutoBackground=(0,r.Z0q)(i.z.jF,{name:"unmatchedAutoBackground",displayName:`Auto Color ${u}`,description:"Automatically apply a background color based on the text color.",value:!0});unmatchedBackgroundColor=(0,r.Z0q)(i.z.sk,{name:"unmatchedBackgroundFill",displayName:"Background Color",value:null,isNoFillItemSupported:!0,visibleIf:t=>!t.categoryLabels.unmatchedAutoBackground.value});unmatchedBackgroundTransparency=(0,r.Z0q)(i.z.Ap,{name:"unmatchedBackgroundTransparency",displayName:"Transparency",value:0,options:g});unmatchedBackgroundCornerRadius=(0,r.Z0q)(i.z.Ap,{name:"unmatchedBackgroundCornerRadius",displayName:"Corner Radius",value:0,options:b});unmatchedBackgroundPadding=(0,r.Z0q)(i.z.Ap,{name:"unmatchedBackgroundPadding",displayName:"Padding",value:0,options:w});showUnmatchedBackgroundStroke=(0,r.Z0q)(i.z.jF,{name:"showUnmatchedBackgroundStroke",displayName:"Outline",value:!1});unmatchedBackgroundStrokeColor=(0,r.Z0q)(i.z.sk,{name:"unmatchedBackgroundStrokeFill",displayName:`Outline Color ${u}`,description:"Select 'No Fill' to apply the same of color of the text.",value:null,isNoFillItemSupported:!0,fx:{dataRole:o.Xh.Category},visibleIf:t=>t.categoryLabels.showUnmatchedBackgroundStroke.value});unmatchedBackgroundStrokeTransparency=(0,r.Z0q)(i.z.Ap,{name:"unmatchedBackgroundStrokeTransparency",displayName:"Outline Transparency",value:10,options:g,visibleIf:t=>t.categoryLabels.showUnmatchedBackgroundStroke.value});unmatchedBackgroundStrokeWidth=(0,r.Z0q)(i.z.Ap,{name:"unmatchedBackgroundStrokeWidth",displayName:"Outline Width",value:2,options:y,visibleIf:t=>t.categoryLabels.showUnmatchedBackgroundStroke.value});unmatchedBackgroundStrokeStyle=(0,r.Z0q)(i.z.PA,{name:"unmatchedBackgroundStrokeStyle",displayName:"Outline Style",value:{value:"solid",displayName:"Solid"},items:S,visibleIf:t=>t.categoryLabels.showUnmatchedBackgroundStroke.value});font=(0,r.Cjg)(i.z.tc,{name:"font",displayName:"Font",fontFamily:(0,r.Z0q)(i.z.Cx,{name:"fontFamily",value:r.Q9G}),bold:(0,r.Z0q)(i.z.jF,{name:"bold",value:!1}),italic:(0,r.Z0q)(i.z.jF,{name:"italic",value:!1}),underline:(0,r.Z0q)(i.z.jF,{name:"underline",value:!1}),fontSize:(0,r.Z0q)(i.z.iB,{name:"fontSize",displayName:"Font size",value:9,rules:{value:(t,e)=>t.categoryLabels.autoFontSize.value?0:e}})});autoFontSize=(0,r.Z0q)(i.z.jF,{name:"autoFontSize",displayName:`Auto Font Size ${u}`,description:"Automatically adjust the font size to fit the text within the element.",value:!1});autoFontSizeScale=(0,r.Z0q)(i.z.Ap,{name:"autoFontSizeScale",displayName:`Font Size Scale ${u}`,description:"Adjust the scale of the font size when using auto font size.",value:100,options:m,visibleIf:t=>t.categoryLabels.autoFontSize.value});minFontSize=(0,r.Z0q)(i.z.iB,{name:"minFontSize",displayName:"Min Font Size",value:0,options:f,visibleIf:t=>t.categoryLabels.autoFontSize.value});maxFontSize=(0,r.Z0q)(i.z.iB,{name:"maxFontSize",displayName:"Max Font Size",value:60,options:f,visibleIf:t=>t.categoryLabels.autoFontSize.value});clipText=(0,r.Z0q)(i.z.jF,{name:"clipText",displayName:`Clip Text ${u}`,description:"Clip the text with ellipsis if it exceeds the element boundaries.",value:!1,visibleIf:t=>p(t.categoryLabels.placement.value,"inside")&&!t.categoryLabels.autoFontSize.value});wordWrap=(0,r.Z0q)(i.z.jF,{name:"wrap",displayName:"Word Wrap",value:!1,visibleIf:t=>p(t.categoryLabels.placement.value,"inside")&&!t.categoryLabels.autoFontSize.value});placement=(0,r.Z0q)(i.z.PA,{name:"placement",displayName:`Anchored Placement ${u}`,description:"Choose the placement for anchored labels relative to the map area. Labels with a custom position are not affected by this setting.",value:{value:"inside",displayName:"Inside Element"},items:[{value:"inside",displayName:"Inside Element"},{value:"outside",displayName:"Outside Element"}]});verticalPosition=(0,r.Z0q)(i.z.$n,{name:"yPosition",displayName:"Vertical Alignment",mode:"verticalAlignment",value:"middle"});horizontalPosition=(0,r.Z0q)(i.z.$n,{name:"xPosition",displayName:"Horizontal Alignment",mode:"horizontalAlignment",value:"center"});groups=[new r.X4n({name:"categoryLabels.matchedValue",displayName:"Value",slices:[this.matchedDisplayValue,this.matchedCustomValue,this.includeDataLabel,this.displayUnit,this.decimalPlaces,this.aggregation]}),new r.X4n({name:"categoryLabels.matchedColor",displayName:"Color",slices:[this.matchedColor,this.showMatchedStroke,this.matchedStrokeColor,this.matchedStrokeTransparency,this.matchedStrokeWidth]}),new r.X4n({name:"categoryLabels.matchedBackground",displayName:"Background",topLevelSlice:this.showMatchedBackground,slices:[this.matchedAutoBackground,this.matchedBackgroundColor,this.matchedBackgroundTransparency,this.matchedBackgroundCornerRadius,this.matchedBackgroundPadding,this.showMatchedBackgroundStroke,this.matchedBackgroundStrokeColor,this.matchedBackgroundStrokeTransparency,this.matchedBackgroundStrokeWidth,this.matchedBackgroundStrokeStyle]}),new r.X4n({name:"categoryLabels.unmatchedValue",displayName:"Value (Unmatched)",topLevelSlice:this.showUnmatched,slices:[this.unmatchedDisplayValue]}),new r.X4n({name:"categoryLabels.unmatchedColor",displayName:"Color (Unmatched)",slices:[this.unmatchedColor,this.showUnmatchedStroke,this.unmatchedStrokeColor,this.unmatchedStrokeTransparency,this.unmatchedStrokeWidth],visibleIf:t=>t.categoryLabels.showUnmatched.value}),new r.X4n({name:"categoryLabels.unmatchedBackground",displayName:"Background (Unmatched)",topLevelSlice:this.showUnmatchedBackground,slices:[this.unmatchedAutoBackground,this.unmatchedBackgroundColor,this.unmatchedBackgroundTransparency,this.unmatchedBackgroundCornerRadius,this.unmatchedBackgroundPadding,this.showUnmatchedBackgroundStroke,this.unmatchedBackgroundStrokeColor,this.unmatchedBackgroundStrokeTransparency,this.unmatchedBackgroundStrokeWidth,this.unmatchedBackgroundStrokeStyle],visibleIf:t=>t.categoryLabels.showUnmatched.value}),new r.X4n({name:"categoryLabels.text",displayName:"Text",slices:[this.font,this.autoFontSize,this.autoFontSizeScale,this.minFontSize,this.maxFontSize,this.clipText,this.wordWrap]}),new r.X4n({name:"categoryLabels.position",displayName:"Position",slices:[this.placement,this.verticalPosition,this.horizontalPosition]})];topLevelSlice=this.show}class O extends r.zD3{name="dataLabels";displayName="Data Labels";visibleIf=t=>!t.categoryLabels.show.value||!E(t);show=(0,r.Z0q)(i.z.jF,{name:"show",value:!1});color=(0,r.Z0q)(i.z.sk,{name:"fill",displayName:"Color",value:d(),fx:{dataRole:o.Xh.Category}});showStroke=(0,r.Z0q)(i.z.jF,{name:"showStroke",displayName:"Outline",value:!1});strokeColor=(0,r.Z0q)(i.z.sk,{name:"strokeFill",displayName:`Outline Color ${u}`,description:"Select 'No Fill' to apply automatic color based on text color.",value:null,isNoFillItemSupported:!0,fx:{dataRole:o.Xh.Category},visibleIf:t=>t.dataLabels.showStroke.value});strokeTransparency=(0,r.Z0q)(i.z.Ap,{name:"strokeTransparency",displayName:"Outline Transparency",value:50,options:g,visibleIf:t=>t.dataLabels.showStroke.value});strokeWidth=(0,r.Z0q)(i.z.Ap,{name:"strokeWidth",displayName:"Outline Width",value:2,options:y,visibleIf:t=>t.dataLabels.showStroke.value});showBackground=(0,r.Z0q)(i.z.jF,{name:"showBackground",value:!1});autoBackground=(0,r.Z0q)(i.z.jF,{name:"autoBackground",displayName:`Auto Color ${u}`,description:"Automatically apply a background color based on the text color.",value:!0});backgroundColor=(0,r.Z0q)(i.z.sk,{name:"backgroundFill",displayName:"Background Color",value:null,isNoFillItemSupported:!0,fx:{dataRole:o.Xh.Category},visibleIf:t=>!t.dataLabels.autoBackground.value});backgroundTransparency=(0,r.Z0q)(i.z.Ap,{name:"backgroundTransparency",displayName:"Transparency",value:0,options:g});backgroundCornerRadius=(0,r.Z0q)(i.z.Ap,{name:"backgroundCornerRadius",displayName:"Corner Radius",value:0,options:b});backgroundPadding=(0,r.Z0q)(i.z.Ap,{name:"backgroundPadding",displayName:"Padding",value:0,options:w});showBackgroundStroke=(0,r.Z0q)(i.z.jF,{name:"showBackgroundStroke",displayName:"Outline",value:!1});backgroundStrokeColor=(0,r.Z0q)(i.z.sk,{name:"backgroundStrokeFill",displayName:`Outline Color ${u}`,description:"Select 'No Fill' to apply the same of color of the text.",value:null,isNoFillItemSupported:!0,fx:{dataRole:o.Xh.Category},visibleIf:t=>t.dataLabels.showBackgroundStroke.value});backgroundStrokeTransparency=(0,r.Z0q)(i.z.Ap,{name:"backgroundStrokeTransparency",displayName:"Outline Transparency",value:10,options:g,visibleIf:t=>t.dataLabels.showBackgroundStroke.value});backgroundStrokeWidth=(0,r.Z0q)(i.z.Ap,{name:"backgroundStrokeWidth",displayName:"Outline Width",value:2,options:y,visibleIf:t=>t.dataLabels.showBackgroundStroke.value});backgroundStrokeStyle=(0,r.Z0q)(i.z.PA,{name:"backgroundStrokeStyle",displayName:"Outline Style",value:{value:"solid",displayName:"Solid"},items:S,visibleIf:t=>t.dataLabels.showBackgroundStroke.value});font=(0,r.Cjg)(i.z.tc,{name:"font",displayName:"Font",fontFamily:(0,r.Z0q)(i.z.Cx,{name:"fontFamily",value:r.SxZ}),bold:(0,r.Z0q)(i.z.jF,{name:"bold",value:!1}),italic:(0,r.Z0q)(i.z.jF,{name:"italic",value:!1}),underline:(0,r.Z0q)(i.z.jF,{name:"underline",value:!1}),fontSize:(0,r.Z0q)(i.z.iB,{name:"fontSize",displayName:"Font size",value:9,options:f,rules:{value:(t,e)=>t.dataLabels.autoFontSize.value?0:e}})});autoFontSize=(0,r.Z0q)(i.z.jF,{name:"autoFontSize",displayName:`Auto Font Size ${u}`,description:"Automatically adjust the font size to fit the text within the element.",value:!1});autoFontSizeScale=(0,r.Z0q)(i.z.Ap,{name:"autoFontSizeScale",displayName:`Font Size Scale ${u}`,description:"Adjust the scale of the font size when using auto font size.",value:100,options:m,visibleIf:t=>t.dataLabels.autoFontSize.value});minFontSize=(0,r.Z0q)(i.z.iB,{name:"minFontSize",displayName:"Min Font Size",value:0,options:f,visibleIf:t=>t.dataLabels.autoFontSize.value});maxFontSize=(0,r.Z0q)(i.z.iB,{name:"maxFontSize",displayName:"Max Font Size",value:60,options:f,visibleIf:t=>t.dataLabels.autoFontSize.value});clipText=(0,r.Z0q)(i.z.jF,{name:"clipText",displayName:`Clip Text ${u}`,description:"Clip the text with ellipsis if it exceeds the element boundaries.",value:!1,visibleIf:t=>p(t.dataLabels.placement.value,"inside")&&!t.dataLabels.autoFontSize.value});wordWrap=(0,r.Z0q)(i.z.jF,{name:"wrap",displayName:"Word Wrap",value:!1,visibleIf:t=>p(t.dataLabels.placement.value,"inside")&&!t.dataLabels.autoFontSize.value});placement=(0,r.Z0q)(i.z.PA,{name:"placement",displayName:`Anchored Placement ${u}`,description:"Choose the placement for anchored labels relative to the map area. Labels with a custom position are not affected by this setting.",value:{value:"inside",displayName:"Inside Element"},items:[{value:"inside",displayName:"Inside Element"},{value:"outside",displayName:"Outside Element"}]});verticalPosition=(0,r.Z0q)(i.z.$n,{name:"yPosition",displayName:"Vertical Alignment",mode:"verticalAlignment",value:"middle"});horizontalPosition=(0,r.Z0q)(i.z.$n,{name:"xPosition",displayName:"Horizontal Alignment",mode:"horizontalAlignment",value:"center"});displayUnit=(0,r.Z0q)(i.z.lp,{name:"unit",displayName:"Display Unit",value:0});decimalPlaces=(0,r.Z0q)(i.z.iB,{name:"precision",displayName:"Decimal Places",value:0,options:v});aggregation=(0,r.Z0q)(i.z.PA,{name:"aggregation",displayName:`Summarization ${u}`,description:"Choose the summarization method for the data point values. It must be exactly the same as the one used by the value column. This setting is required when you connect a column to 'Legend' or 'Map URLs' field wells, since the aggregation is made by the visual and not from Power BI.",value:{value:"auto",displayName:"(Auto Detect)"},items:x});groups=[new r.X4n({name:"dataLabels.value",displayName:"Value",slices:[this.displayUnit,this.decimalPlaces,this.aggregation]}),new r.X4n({name:"dataLabels.color",displayName:"Color",slices:[this.color,this.showStroke,this.strokeColor,this.strokeTransparency,this.strokeWidth]}),new r.X4n({name:"dataLabels.background",displayName:"Background",topLevelSlice:this.showBackground,slices:[this.autoBackground,this.backgroundColor,this.backgroundTransparency,this.backgroundCornerRadius,this.backgroundPadding,this.showBackgroundStroke,this.backgroundStrokeColor,this.backgroundStrokeTransparency,this.backgroundStrokeWidth,this.backgroundStrokeStyle]}),new r.X4n({name:"dataLabels.text",displayName:"Text",slices:[this.font,this.autoFontSize,this.autoFontSizeScale,this.minFontSize,this.maxFontSize,this.clipText,this.wordWrap]}),new r.X4n({name:"dataLabels.position",displayName:"Position",slices:[this.placement,this.verticalPosition,this.horizontalPosition]})];topLevelSlice=this.show}class L extends r.zD3{name="legend";displayName="Legend";show=(0,r.Z0q)(i.z.jF,{name:"show",value:!1});showDialog=(0,r.Z0q)(i.z.jF,{name:"showDialog",displayName:"Customize",value:!1});position=(0,r.Z0q)(i.z.PA,{name:"position",displayName:"Position",value:{value:"bottom",displayName:"Bottom"},items:[{value:"top",displayName:"Top"},{value:"bottom",displayName:"Bottom"},{value:"left",displayName:"Left"},{value:"right",displayName:"Right"}]});alignment=(0,r.Z0q)(i.z.$n,{name:"alignment",displayName:"Alignment",mode:"horizontalAlignment",value:"left",visibleIf:t=>p(t.legend.position.value,"top","bottom")});verticalAlignment=(0,r.Z0q)(i.z.$n,{name:"vAlignment",displayName:"Alignment",mode:"verticalAlignment",value:"top",visibleIf:t=>p(t.legend.position.value,"left","right")});maxItems=(0,r.Z0q)(i.z.Ap,{name:"maxItems",displayName:`Max Items ${u}`,description:"Limit the number of items displayed in the legend. Set to 0 to display all items.",value:30,options:{minValue:{type:0,value:0},maxValue:{type:1,value:r.bOl.MAX_ITEMS}}});itemSizeType=(0,r.Z0q)(i.z.PA,{name:"itemSizeType",displayName:"Item Size",value:{value:"",displayName:"Auto"},items:k});itemSize=(0,r.Z0q)(i.z.Ap,{name:"itemSize",value:40,options:{minValue:{type:0,value:5},maxValue:{type:1,value:500}},visibleIf:t=>""!==t.legend.itemSizeType.value.value});legendSizeType=(0,r.Z0q)(i.z.PA,{name:"legendSizeType",displayName:"Legend Size",value:{value:"",displayName:"Auto"},items:k});legendSize=(0,r.Z0q)(i.z.Ap,{name:"legendSize",value:200,options:{minValue:{type:0,value:5},maxValue:{type:1,value:500}},visibleIf:t=>""!==t.legend.legendSizeType.value.value});showScrollbar=(0,r.Z0q)(i.z.jF,{name:"showScrollbar",displayName:`Show Scrollbar ${u}`,description:"Show a scrollbar when the legend items exceed the available space.",value:!1,visibleIf:t=>""!==t.legend.legendSizeType.value.value});font=(0,r.Cjg)(i.z.tc,{name:"font",displayName:"Font",fontFamily:(0,r.Z0q)(i.z.Cx,{name:"fontFamily",value:r.Q9G}),bold:(0,r.Z0q)(i.z.jF,{name:"bold",value:!1}),italic:(0,r.Z0q)(i.z.jF,{name:"italic",value:!1}),underline:(0,r.Z0q)(i.z.jF,{name:"underline",value:!1}),fontSize:(0,r.Z0q)(i.z.iB,{name:"fontSize",displayName:"Font size",value:8,options:f})});color=(0,r.Z0q)(i.z.sk,{name:"fill",displayName:"Color",value:d()});wordWrap=(0,r.Z0q)(i.z.jF,{name:"wrap",displayName:"Word Wrap",value:!1});showTitle=(0,r.Z0q)(i.z.jF,{name:"showTitle",value:!1});titleText=(0,r.Z0q)(i.z.ks,{name:"titleText",displayName:"Title",placeholder:"Enter title",value:"Legend"});titleFont=(0,r.Cjg)(i.z.tc,{name:"titleFont",displayName:"Font",fontFamily:(0,r.Z0q)(i.z.Cx,{name:"titleFontFamily",value:r.Q9G}),bold:(0,r.Z0q)(i.z.jF,{name:"titleBold",value:!0}),italic:(0,r.Z0q)(i.z.jF,{name:"titleItalic",value:!1}),underline:(0,r.Z0q)(i.z.jF,{name:"titleUnderline",value:!1}),fontSize:(0,r.Z0q)(i.z.iB,{name:"titleFontSize",displayName:"Font size",value:9,options:f})});titleColor=(0,r.Z0q)(i.z.sk,{name:"titleFill",displayName:"Color",value:d()});titleInline=(0,r.Z0q)(i.z.jF,{name:"titleInline",displayName:`Show Title Inline ${u}`,description:"Display the title inline with the legend items. If disabled, the title is displayed above the legend.",value:!0,visibleIf:t=>p(t.legend.position.value,"top","bottom")});iconAutoSize=(0,r.Z0q)(i.z.jF,{name:"iconAutoSize",displayName:`Auto Size ${u}`,description:"Automatically adjust the icon size based on the font size.",value:!0});iconSize=(0,r.Z0q)(i.z.Ap,{name:"iconSize",displayName:"Icon Size",value:8,options:{minValue:{type:0,value:1},maxValue:{type:1,value:30}},visibleIf:t=>!t.legend.iconAutoSize.value});custom=(0,r.Ozv)({name:"custom"});groups=[new r.X4n({name:"legend.customize",slices:[this.showDialog]}),new r.X4n({name:"legend.layout",displayName:"Layout",slices:[this.position,this.alignment,this.verticalAlignment,this.maxItems,this.itemSizeType,this.itemSize,this.legendSizeType,this.legendSize,this.showScrollbar]}),new r.X4n({name:"legend.items",displayName:"Items",slices:[this.font,this.color,this.wordWrap]}),new r.X4n({name:"legend.title",displayName:"Title",topLevelSlice:this.showTitle,slices:[this.titleText,this.titleFont,this.titleColor,this.titleInline]}),new r.X4n({name:"legend.icon",displayName:"Icon",slices:[this.iconAutoSize,this.iconSize]})];topLevelSlice=this.show}class I extends r.zD3{name="tooltips";displayName="Tooltips";showCategories=(0,r.Z0q)(i.z.jF,{name:"showCategories",value:!0});showUnmatched=(0,r.Z0q)(i.z.jF,{name:"showUnmatched",displayName:`Show Unmatched ${u}`,description:"Show tooltips for elements that are not matched to any data.",value:!1});showValues=(0,r.Z0q)(i.z.jF,{name:"showValues",value:!0});unit=(0,r.Z0q)(i.z.lp,{name:"unit",displayName:"Display Unit",value:1});precision=(0,r.Z0q)(i.z.iB,{name:"precision",displayName:"Decimal Places",value:0,options:v});groups=[new r.X4n({name:"tooltips.info",slices:[(0,r.auc)("You can configure the overall tooltips visibility or enable report tooltips in the 'General' pane.")]}),new r.X4n({name:"tooltips.categories",displayName:"Categories",topLevelSlice:this.showCategories,slices:[this.showUnmatched]}),new r.X4n({name:"tooltips.values",displayName:"Values",topLevelSlice:this.showValues,slices:[this.unit,this.precision]})]}class R extends r.zD3{name="toolbars";displayName="Toolbars";pin=(0,r.Z0q)(i.z.jF,{name:"pin",displayName:"Pin Toolbars",value:!1});overlap=(0,r.Z0q)(i.z.jF,{name:"overlap",displayName:`Overlap Map ${u}`,description:"When true, the toolbars overlap the map, otherwise some space is reserved for them.",value:!0});showMapDropdown=(0,r.Z0q)(i.z.jF,{name:"showMapDropdown",displayName:`Show Maps Dropdown ${u}`,description:"Show a dropdown to select the map to display. This option only affects 'Reading View'.",value:!0});topMargin=(0,r.Z0q)(i.z.iB,{name:"topMargin",displayName:"Top Margin",value:0,options:{minValue:{type:0,value:0},unitSymbol:"px",unitSymbolAfterInput:!0}});backgroundColor=(0,r.Z0q)(i.z.sk,{name:"backgroundFill",displayName:"Color",value:{value:"#F0F0F0"}});backgroundTransparency=(0,r.Z0q)(i.z.Ap,{name:"backgroundTransparency",displayName:"Transparency",value:5,options:g});showZoom=(0,r.Z0q)(i.z.jF,{name:"zoom",value:!0});showZoomButtons=(0,r.Z0q)(i.z.jF,{name:"zoomButtons",displayName:`Zoom Buttons ${u}`,description:"Show zoom in, out, and reset buttons.",value:!0});showZoomPercentage=(0,r.Z0q)(i.z.jF,{name:"zoomPercentage",displayName:`Zoom Percentage ${u}`,description:"Show the zoom percentage level.",value:!0});showControls=(0,r.Z0q)(i.z.jF,{name:"controls",value:!1});showZoomOnArea=(0,r.Z0q)(i.z.jF,{name:"zoomOnArea",displayName:`Zoom on Element Button ${u}`,description:"Show a button to enable automatic zoom on the selected element.",value:!0});showClear=(0,r.Z0q)(i.z.jF,{name:"clear",displayName:`Clear Button ${u}`,description:"Show a button to clear the selection.",value:!0});groups=[new r.X4n({name:"toolbars.options",displayName:"Options",slices:[this.pin,this.overlap,this.showMapDropdown,this.topMargin]}),new r.X4n({name:"toolbars.background",displayName:"Background",slices:[this.backgroundColor,this.backgroundTransparency]}),new r.X4n({name:"toolbars.zoom",displayName:"Zoom",topLevelSlice:this.showZoom,slices:[this.showZoomButtons,this.showZoomPercentage]}),new r.X4n({name:"toolbars.controls",displayName:"Controls",topLevelSlice:this.showControls,slices:[this.showZoomOnArea,this.showClear]})]}class V extends r.zD3{name="drill";displayName="Drill Behavior";visibleIf=()=>thisVisualFeatures.drillDown;autoFetchMode=(0,r.Z0q)(i.z.PA,{name:"autoFetchMode",displayName:`Auto-Fetch based on ${u}`,description:"When '(Auto)', the visual honors the Auto-Fetch attribute in the SVG; if the attribute is not present, Auto-Fetch is disabled. When 'Enabled', Auto-Fetch is enabled and every matched area id is used to build a potential child map URL and it is fetched. For more information on Auto-Fetch, see the documentation.",value:{value:"auto",displayName:"(Auto)"},items:[{value:"auto",displayName:"(Auto)"},{value:"no",displayName:"(Disabled)"},{value:"id",displayName:"Enabled"}],visibleIf:()=>thisVisualFeatures.childMaps});aggregateOnExpand=(0,r.Z0q)(i.z.jF,{name:"aggregateOnExpand",value:!0});categoryLevelMaps=(0,r.Z0q)(i.z.jF,{name:"categoryLevelMaps",value:!1});lastLevelMaps=(0,r.Z0q)(i.z.jF,{name:"lastLevelMaps",value:!1});groups=[new r.X4n({name:"drill.aggregateOnExpand",displayName:"Aggregate on Expand",topLevelSlice:this.aggregateOnExpand,slices:[(0,r.auc)("If enabled, data points are aggregated when you 'Expand all down one level in the hierarchy'. This significantly impacts data binding and could make Power BI conditional formatting not working. Disabling this option prevents aggregation, meaning auto-match requires target areas to be nested in groups with matching ids. For more information, see the documentation.")]}),new r.X4n({name:"drill.categoryLevelMaps",displayName:"Category Level Maps",topLevelSlice:this.categoryLevelMaps,slices:[(0,r.auc)("When active, you cannot link maps to individual data points; instead, you can only have one map per category in the hierarchy. This is beneficial if you prefer to highlight selected data points within the category's map, rather than having a separate map for each data point, which is the default behavior when drilling down or applying a single filter to any level other than the first.")]}),new r.X4n({name:"drill.lastLevelMaps",displayName:"Last Level Maps",topLevelSlice:this.lastLevelMaps,slices:[(0,r.auc)("You can associate a map with each data point at each level of the hierarchy, except for the last one, unless you enable this option. With this option, you can also associate a map with the data points at the last level. Remember that to view the map in this case, you need to apply a single filter to the data point with an external slicer or the filter pane.")]}),new r.X4n({name:"drill.autoFetch",displayName:"Auto-Fetch Maps",slices:[this.autoFetchMode,(0,r.auc)("Auto-Fetch is an advanced feature to automatically fetch remote child maps based on matched areas.")]})]}class N extends r.zD3{name="advanced";displayName="Advanced Options";lockPan=(0,r.Z0q)(i.z.jF,{name:"lockPan",displayName:`Lock Pan ${u}`,description:"When enabled, the pan is locked and cannot be changed by the user.",value:!1});lockZoom=(0,r.Z0q)(i.z.jF,{name:"lockZoom",displayName:`Lock Zoom ${u}`,description:"When enabled, the zoom is locked and cannot be changed by the user.",value:!1});minZoom=(0,r.Z0q)(i.z.Ap,{name:"minZoom",displayName:"Min Zoom",value:100,options:{minValue:{type:0,value:1},maxValue:{type:1,value:200},unitSymbol:"%",unitSymbolAfterInput:!0}});maxZoom=(0,r.Z0q)(i.z.Ap,{name:"maxZoom",displayName:"Max Zoom",value:5e3,options:{minValue:{type:0,value:100},maxValue:{type:1,value:1e4},unitSymbol:"%",unitSymbolAfterInput:!0}});zoomSensitivity=(0,r.Z0q)(i.z.Ap,{name:"zoomSensitivity",displayName:`Zoom Sensitivity ${u}`,description:"Set the zoom sensitivity. Increasing the value will make the zoom faster, decreasing it will make it slower.",value:5,options:{minValue:{type:0,value:1},maxValue:{type:1,value:20}}});zoomFit=(0,r.Z0q)(i.z.Ap,{name:"zoomFit",displayName:`Zoom On Element Fit ${u}`,description:"Defines the percentage of the visual area to consider when zooming on single element (also applies to auto-zoomed elements).",value:80,options:{minValue:{type:0,value:1},maxValue:{type:1,value:100},unitSymbol:"%",unitSymbolAfterInput:!0}});autoPanMode=(0,r.Z0q)(i.z.jF,{name:"autoPanMode",displayName:`Auto Pan Mode ${u}`,description:"When enabled, the map can be always dragged by clicking and dragging the mouse.",value:!0});autoZoomMode=(0,r.Z0q)(i.z.PA,{name:"autoZoomMode",displayName:`Auto Zoom Mode ${u}`,description:"Automatically adjust the zoom level and scroll position to fit all matched elements in the visual area. When is 'Single Data Point', the automatic zoom is applied only if there is a single data point in the underlying data, otherwise it is always applied.",value:{value:T.Disabled,displayName:"(Disabled)"},items:[{value:T.Disabled,displayName:"(Disabled)"},{value:T.Single,displayName:"Single Data Point"},{value:T.All,displayName:"All Data Points"}]});mapSelectorAllowUnassignedMaps=(0,r.Z0q)(i.z.jF,{name:"mapSelectorAllowUnassignedMaps",displayName:`Show Maps Without Selector ${u}`,description:"When enabled and there is a map selector field, maps without a selector are shown. If disabled, only maps with a selector are shown.",value:!1});mapSelectorSeparator=(0,r.Z0q)(i.z.ks,{name:"mapSelectorSeparator",displayName:`Separator ${u}`,description:"Set the character used to separate the elements in the map selector measure.",placeholder:"Enter separator",value:"✄"});mapFieldShowFullUrls=(0,r.Z0q)(i.z.jF,{name:"mapFieldShowFullUrls",displayName:`Show Full URLs ${u}`,description:"If enabled, full map URLs are used as map titles, otherwise only the last part of the path is shown.",value:!1});numberLocale=(0,r.Z0q)(i.z.PA,{name:"numberLocale",displayName:`Number Formatting ${u}`,description:"Set the number formatting for what concerns thousands separators and decimal separators.",value:{value:"en-US",displayName:"123,456.789"},items:[{value:"en-US",displayName:"123,456.789"},{value:"it-IT",displayName:"123.456,789"},{value:"fr-FR",displayName:"123 456,789"},{value:"hi-IN",displayName:"1,23,456.789"}]});maxLabels=(0,r.Z0q)(i.z.iB,{name:"maxLabels",displayName:`Max Labels to Show ${u}`,description:"Choose how many labels the visual can display. Note that showing too many labels may slow down the entire report. Set '0' to show all.",value:1e3,options:{minValue:{type:0,value:0}}});imageQuality=(0,r.Z0q)(i.z.Ap,{name:"imageQuality",displayName:`Image Quality ${u}`,description:"Set a compression value for bitmap images embedded into SVG map to improve performance. Lower values may cause a loss of quality.",value:70,options:{minValue:{type:0,value:5},maxValue:{type:1,value:100},unitSymbol:"%",unitSymbolAfterInput:!0}});clearSelectionOnMapChange=(0,r.Z0q)(i.z.jF,{name:"clearSelectionOnMapChange",displayName:`Clear Selection on Map Change ${u}`,description:"When enabled, the selection is cleared when the map changes.",value:!0});fillNoneToTransparent=(0,r.Z0q)(i.z.jF,{name:"fillNoneToTransparent",displayName:`Allow Empty Matched Area Selection ${u}`,description:"When enabled, matched areas with no fill are selectable. When disabled, they are not selectable.",value:!0});groups=[new r.X4n({name:"advanced.panZoom",displayName:"Pan & Zoom",slices:[this.lockPan,this.lockZoom,this.minZoom,this.maxZoom,this.zoomSensitivity,this.zoomFit,this.autoPanMode,this.autoZoomMode]}),new r.X4n({name:"advanced.mapSelector",displayName:"Map Selector",slices:[this.mapSelectorAllowUnassignedMaps,this.mapSelectorSeparator,(0,r.auc)("The map selector enables switching between different maps by bounding a DAX measure, which must be created with a specific syntax.")],visibleIf:()=>thisVisualFeatures.mapSelector}),new r.X4n({name:"advanced.mapField",displayName:"Map URLs",slices:[this.mapFieldShowFullUrls,(0,r.auc)("The map URLs feature allows remote maps to be loaded from a column or measure and controlled through an external filter.")]}),new r.X4n({name:"advanced.locale",displayName:"Locale",slices:[this.numberLocale]}),new r.X4n({name:"advanced.performance",displayName:"Performance",slices:[this.maxLabels,this.imageQuality]}),new r.X4n({name:"advanced.misc",displayName:"Miscellaneous",slices:[this.clearSelectionOnMapChange,this.fillNoneToTransparent]})]}class F extends r.KTX{name="accessibility";displayName="Accessibility";highlightOnHover=(0,r.Z0q)(i.z.jF,{name:"highlightOnHover",displayName:`Highlight on Hover ${u}`,description:"When enabled, the map highlights the hovered element.",value:!0});unselectedTransparency=(0,r.Z0q)(i.z.Ap,{name:"unselectedTransparency",displayName:`Unselected Transparency ${u}`,description:"Set the transparency of the elements that are not selected when at least one is selected.",value:70,options:g});greyscaleUnselected=(0,r.Z0q)(i.z.jF,{name:"greyscaleUnselected",displayName:`Greyscale Unselected ${u}`,description:"When enabled, the unselected elements are shown in greyscale.",value:!1});colorBlindnessVision=(0,r.Z0q)(i.z.PA,{name:"colorBlindnessVision",displayName:`Color Blindness ${u}`,description:"Choose the color blindness vision to simulate.",value:{value:r.XBB.Normal,displayName:"Normal"},items:[{value:r.XBB.Normal,displayName:"Normal"},{value:r.XBB.Protanopia,displayName:"Protanopia"},{value:r.XBB.Protanomaly,displayName:"Protanomaly"},{value:r.XBB.Deuteranopia,displayName:"Deuteranopia"},{value:r.XBB.Deuteranomaly,displayName:"Deuteranomaly"},{value:r.XBB.Tritanopia,displayName:"Tritanopia"},{value:r.XBB.Tritanomaly,displayName:"Tritanomaly"},{value:r.XBB.Achromatopsia,displayName:"Achromatopsia"},{value:r.XBB.Achromatomaly,displayName:"Achromatomaly"},{value:r.XBB.LowContrast,displayName:"Low Contrast"}]});scaleUi=(0,r.Z0q)(i.z.jF,{name:"scaleUi",displayName:`Scale UI Elements ${u}`,description:"Enable this option to scale UI elements based on the report viewport. This is primarily useful for demonstration purposes.",value:!1});slices=[this.highlightOnHover,this.unselectedTransparency,this.greyscaleUnselected,this.colorBlindnessVision,this.scaleUi]}class B extends r.zD3{name="myStorage";displayName="My Storage";visible=!1;id=(0,r.Z0q)(i.z.uI,{name:"id",displayName:"Id:",value:""});region=(0,r.Z0q)(i.z.uI,{name:"region",displayName:"Region:",value:""});isEncrypted=(0,r.Z0q)(i.z.uI,{name:"isEncrypted",displayName:"Is Encrypted:",value:""});quota=(0,r.Z0q)(i.z.uI,{name:"quota",displayName:"Storage:",value:""});saveEditKey=(0,r.Z0q)(i.z.jF,{name:"saveEditKey",displayName:`Save Edit Key ${u}`,description:"When enabled, the edit key is available to all report users. This setting does not affect whether Power BI can remember the key locally in its cache.",value:!0});encryptionKey=(0,r.Z0q)(i.z.ks,{name:"encryptionKey",displayName:`Encryption Key ${u}`,description:"My Storage encryption key. Needed if the storage is encrypted, otherwise it will be ignored.",placeholder:"Enter encryption key",value:""});groups=[new r.X4n({name:"myStorage.status",displayName:"Status",collapsible:!1,slices:[this.id,this.region,this.isEncrypted,this.quota]}),new r.X4n({name:"myStorage.keys",displayName:"Keys",slices:[this.saveEditKey,this.encryptionKey]})]}class z extends r.zD3{name="about";displayName="About";visualVersion=(0,r.Z0q)(i.z.uI,{name:"version",value:""});showDiagnostics=(0,r.Z0q)(i.z.jF,{name:"diagnostics",displayName:`Show Diagnostics ${u}`,description:"When enabled, the visual shows diagnostic information in the browser console. ",value:!1});showInlineConsole=(0,r.Z0q)(i.z.jF,{name:"inlineConsole",displayName:`Inline Console ${u}`,description:"When enabled, the visual shows an inline console in the visual area. This option is useful for debugging purposes.",value:!1,visibleIf:t=>t.about.showDiagnostics.value&&!(0,r.zb)()});groups=[new r.X4n({name:"about.version",displayName:"Version",collapsible:!1,slices:[this.visualVersion]}),new r.X4n({name:"about.debug",displayName:"Debug",slices:[this.showDiagnostics,this.showInlineConsole,(0,r.auc)("Use this section to enable diagnostic information or experimental features. Note that these options may affect the performance of the visual.")]})]}class j extends r.KTX{name="internal";visible=!1;maps=(0,r.Ozv)({name:"maps"});msek=(0,r.Ozv)({name:l.rv});zoomStates=(0,r.Ozv)({name:"zoomStates"});customLabels=(0,r.Ozv)({name:"customLabels"});colorRules=(0,r.Ozv)({name:"colorRules"});slices=[]}},63124:(t,e,n)=>{"use strict";function i(t,e){if(!/^#?([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(t))return t;3===(t=t.startsWith("#")?t.slice(1):t).length&&(t=t.split("").map((t=>t+t)).join(""));const n=Math.min(100,Math.max(0,Math.round(e)));return`#${t}${Math.round(n/100*255).toString(16).toUpperCase().padStart(2,"0")}`}function r(t){return t.startsWith("#")&&(t=t.slice(1)),(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255>.5?"#424242":"#FFFFFF"}function o(t){if(t=t.replace(/\s/g,""),/^rgb\((\d+),(\d+),(\d+)\)$/.test(t)){const e=t.match(/^rgb\((\d+),(\d+),(\d+)\)$/);if(e){const t=parseInt(e[1]),n=parseInt(e[2]),i=parseInt(e[3]);return Math.sqrt(t*t*.299+n*n*.587+i*i*.114)<=127.5}}if(/^#[0-9A-F]{6}$/i.test(t)){const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return Math.sqrt(e*e*.299+n*n*.587+i*i*.114)<=127.5}return!1}function a(t){return/^#([0-9A-F]{3,4}){1,2}$/i.test(t)}function s(t){return/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(0|1|0?\.\d+))?\)$/i.test(t)}function l(t){return/^hsla?\(\s*([0-9]{1,3}(?:\.\d+)?)(?:deg|rad|turn|grad)?\s*,\s*([0-9]{1,3}(?:\.\d+)?%)\s*,\s*([0-9]{1,3}(?:\.\d+)?%)(?:,\s*(0|1|0?\.\d+))?\s*\)$/i.test(t)}function c(t){let e=t.replace(/^#/,"");3!==e.length&&4!==e.length||(e=e.split("").map((t=>t+t)).join(""));const n=parseInt(e.slice(0,6),16);return{r:n>>16&255,g:n>>8&255,b:255&n,a:8===e.length?parseInt(e.slice(6,8),16)/255:1}}function u(t){const e=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(0|1|0?\.\d+))?\)$/i.exec(t);if(!e)throw new Error("Invalid RGB(A) format");return{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10),a:e[4]?parseFloat(e[4]):1}}function h(t){const e=/^hsla?\(\s*([0-9]{1,3}(?:\.\d+)?)(?:deg|rad|turn|grad)?\s*,\s*([0-9]{1,3}(?:\.\d+)?%)\s*,\s*([0-9]{1,3}(?:\.\d+)?%)(?:,\s*(0|1|0?\.\d+))?\s*\)$/i.exec(t);if(!e)throw new Error("Invalid HSL(A) format");let n=parseFloat(e[1]);const i=parseFloat(e[2])/100,r=parseFloat(e[3])/100,o=e[4]?parseFloat(e[4]):1;n%=360,n<0&&(n+=360);const a=(1-Math.abs(2*r-1))*i,s=a*(1-Math.abs(n/60%2-1)),l=r-a/2;let c=0,u=0,h=0;return 0<=n&&n<60?(c=a,u=s,h=0):60<=n&&n<120?(c=s,u=a,h=0):120<=n&&n<180?(c=0,u=a,h=s):180<=n&&n<240?(c=0,u=s,h=a):240<=n&&n<300?(c=s,u=0,h=a):300<=n&&n<360&&(c=a,u=0,h=s),c=Math.round(255*(c+l)),u=Math.round(255*(u+l)),h=Math.round(255*(h+l)),{r:c,g:u,b:h,a:o}}function d(t){const e=document.createElement("canvas").getContext("2d");if(!e)return null;e.fillStyle=t,e.fillRect(0,0,1,1);const n=e.getImageData(0,0,1,1).data;return{r:n[0],g:n[1],b:n[2],a:n[3]/255}}function p(t){let e=null;if(e=a(t)?c(t):s(t)?u(t):l(t)?h(t):d(t),!e)throw new Error("Invalid color format");return function({r:t,g:e,b:n,a:i}){const r=Math.round(.299*t+.587*e+.114*n).toString(16).padStart(2,"0");return`#${r}${r}${r}${Math.round(255*i).toString(16).padStart(2,"0")}`}(e)}function f(t,e=90){let n=null;if(n=a(t)?c(t):s(t)?u(t):l(t)?h(t):d(t),!n)throw new Error("Invalid color format");const i=o(t)?e:-e,r=t=>Math.round(Math.min(255,Math.max(0,t+i/100*(255-t))));let p=r(n.r),f=r(n.g),g=r(n.b);return 0===n.r&&0===n.g&&0===n.b&&(p=f=g=Math.max(20,Math.round(e/100*255))),`rgba(${p}, ${f}, ${g}, ${n.a})`}n.d(e,{bh:()=>p,cP:()=>o,dk:()=>i,g_:()=>f,w5:()=>r})},56127:(t,e,n)=>{"use strict";n.d(e,{O:()=>r,h:()=>o});var i=n(81807);function r(t,e){const n=(0,i.tTh)(".pwd",t??null,[(0,i.tTh)(".pwd-box",[...e?.label?[(0,i.tTh)("label.label",{style:{minWidth:e.labelMinWidth??"auto",maxWidth:e.labelMaxWidth??"auto"}},e.label)]:[],(0,i.tTh)(".pwd-input.max",[(0,i.tTh)("input.input",{attr:{type:"password",placeholder:e?.placeholder??"Password",disabled:e?.disabled??!1,value:e?.value??""},events:{focus:(t,e)=>{t.preventDefault(),e.parentElement.classList.add("focused")},blur:(t,e)=>{t.preventDefault(),e.parentElement.classList.remove("focused")},input:(t,n)=>{if(t.preventDefault(),e?.onInput&&e.onInput(t,n),e?.onInputValidation){const t=e.onInputValidation(n.value);if(e.banner){const e=n.closest(".pwd").querySelector(".pwd-validation-failed");e&&e.classList.toggle("hide",t)}}}}}),...e?.visibilityToggle?[(0,i.tTh)("i.icon-visible.icon",{events:{click:(t,e)=>{const n=e.parentElement.querySelector("input");n.type="password"===n.type?"text":"password",e.classList.toggle("icon-visible"),e.classList.toggle("icon-hidden")}}})]:[]])]),...e?.banner?[(0,i.tTh)(".pwd-validation-failed.hide",`${e?.bannerText??"Incorrect password"}`)]:[]]);return e?.containerClasses&&n.classList.add(...e.containerClasses),n}function o(t,e=document.body,n="100%",r="100%"){return(0,i.tTh)("iframe",e,{attr:{src:t,width:n,height:r,sandbox:"allow-same-origin allow-scripts",style:"border: none"}})}},92421:(t,e,n)=>{"use strict";n.d(e,{Ap:()=>s,Gh:()=>g,Ln:()=>u,V$:()=>f,b4:()=>p,bb:()=>m,pT:()=>d,xv:()=>c,y5:()=>l,zb:()=>h});var i=n(81807);const r="*",o="|",a=" \\ ",s=["--okviz-maps-field--"];function l(t){return t.map((t=>(0,i.WGQ)(t))).join(o)}function c(t){let e=[];try{e=t.split(o).map((t=>(0,i.y4v)(t)))}catch(t){}return e}function u(t,e=0){const n=1==e?t.split(o):t.split(o).slice(0,e-1);return n.push((0,i.WGQ)(r)),n.join(o)}function h(t){return 1==t.length}function d(t){return m(t)?"":("string"==typeof t?c(t):t).join(a)}function p(t){return t.endsWith(o+(0,i.WGQ)(r))}function f(t){return!p(t)}function g(t,e){if(t==e)return!1;const n=e.split(o),a=t.split(o);return n.slice(0,-1).join(o)==a.slice(0,-1).join(o)&&a[a.length-1]==(0,i.WGQ)(r)}function m(t){const e=[l(s)],n=Array.isArray(t)?l(t):t;return e.includes(n)}},89358:(t,e,n)=>{"use strict";n.d(e,{It:()=>l,Np:()=>o,oL:()=>a}),n(72210);var i=n(81807);function r(t){const e=new Uint8Array(t);let n="";for(let t=0;t<e.byteLength;t++)n+=String.fromCharCode(e[t]);return(0,i.WGQ)(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function o(t,e){const n=new TextEncoder,i=n.encode(t),o=await window.crypto.subtle.importKey("raw",n.encode(e),{name:"PBKDF2"},!1,["deriveKey"]),a=window.crypto.getRandomValues(new Uint8Array(16)),s=await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["encrypt"]),l=window.crypto.getRandomValues(new Uint8Array(12)),c=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},s,i);return`${r(a)}:${r(l)}:${r(c)}`}async function a(t,e){const n=crypto.getRandomValues(new Uint8Array(16)),i=crypto.getRandomValues(new Uint8Array(12)),r=await s(e,n),o=t instanceof Uint8Array?t.buffer:await t.arrayBuffer(),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},r,o);return new Blob([n,i,new Uint8Array(a)],{type:"application/octet-stream"})}async function s(t,e){const n=new TextEncoder,i=await crypto.subtle.importKey("raw",n.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function l(t,e){const n=await t.arrayBuffer(),i=new Uint8Array(n.slice(0,16)),r=new Uint8Array(n.slice(16,28)),o=n.slice(28),a=await s(e,i);return await crypto.subtle.decrypt({name:"AES-GCM",iv:r},a,o)}},78698:(t,e,n)=>{"use strict";n.d(e,{$8:()=>h,Jp:()=>g,NX:()=>l,_5:()=>r,_C:()=>v,eJ:()=>c,l0:()=>s,lx:()=>b,ni:()=>u,w8:()=>y});var i=n(81807);const r="\\",o="/",a=219,s="The new name is too long. Please use a shorter name.",l="The new name contains invalid characters.";function c(t){if(!t)return"";let e=t.id;return(0,i.cKq)(t.dataset,"name")&&(e=t.dataset.name),e=m(e),e=p(e),e=d(e),e.includes(r)&&(e=e.substring(e.lastIndexOf(r)+1)),e.trim()}function u(t){return t?(t=d(t=p(t=m(t)))).trim().toLowerCase():t}function h(t){if(null==t)return"(Blank)";const e=new RegExp(function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(r),"g");return t.toString().replace(e,o)}function d(t){return t.replace(/_x([0-9A-F]{2})_/g,((t,e)=>String.fromCharCode(parseInt(e,16))))}function p(t){return t.replace(/^_\d/g,(t=>t.substring(1)))}const f="_okviz_";function g(t,e){return-1===t.indexOf(f)?`${t}${f}${e||(0,i.uRe)()}`:t}function m(t){const e=t.indexOf(f);return-1===e?t:t.substring(0,e)}function v(t){return t.length<=a}function y(t){return!/[^a-zA-Z0-9 +\-.:=_/]/.test(t)}function b(t){return t.trim().slice(0,a).replace(/[^a-zA-Z0-9 +\-.:=_/]/g,"_")}},60001:(t,e,n)=>{"use strict";n.d(e,{$D:()=>s,Ii:()=>a,Md:()=>l,UG:()=>o,Us:()=>g,Uw:()=>p,VJ:()=>u,XB:()=>d,hl:()=>h,vW:()=>c,wi:()=>f});var i=n(72210),r=n(96826);const o="http://www.w3.org/2000/svg";function a(){return{x:{scale:1,offset:0,min:0},y:{scale:1,offset:0,min:0},scale:1}}function s(t,e=!1){const n={isValid:!1,error:(0,i.T)("INVALID_SVG")};if("string"!=typeof t)return n.error.details=`Expected a \`string\`, got \`${typeof t}\`.`,n;if(0===(t=t.trim()).length)return n.error.details="The content of the SVG is empty.",n;const r=new DOMParser;let a=null;try{if(a=r.parseFromString(t,"image/svg+xml"),a.getElementsByTagName("parsererror").length>0){const t=a.getElementsByTagName("parsererror")[0].textContent||"Unknown parsing error";throw new Error(`Error parsing SVG string: ${t}`)}if("svg"!==a.documentElement.nodeName)throw new Error("Root element is not <svg>.");const e=a.documentElement.getAttribute("xmlns");e&&[o].includes(e)||(t=t.replace(/<svg /,`<svg xmlns="${o}" `),a=r.parseFromString(t,"image/svg+xml"))}catch(t){return n.error.details=t.message,n}return e&&(n.svgDoc=a),n.isValid=!0,delete n.error,n}function l(t){return["g","svg"].includes(t.tagName.toLowerCase())}function c(t){const e=(t=>"use"===t.tagName.toLowerCase())(t)?t:null;if(!e)return null;const n=e.getAttribute("href")||e.getAttribute("xlink:href");return n&&n.startsWith("#")?(e.ownerSVGElement||document).getElementById(n.slice(1)):null}function u(t,e=!1){let n=t.getAttribute("viewBox");if(!n&&e){let e=t.getAttribute("width"),i=t.getAttribute("height");(e?.includes("%")||i?.includes("%"))&&(e=t.clientWidth,i=t.clientHeight),e&&i&&(n=`0 0 ${e} ${i}`)}if(!n)return null;const[i,r,o,a]=n.split(" ").map((t=>{const e=parseInt(t);return isNaN(e)?0:e}));return new DOMRect(i,r,o,a)}function h(t,e=!0,n=1){const i=u(t),r={x:{scale:1,offset:0,min:0},y:{scale:1,offset:0,min:0},scale:1};if(i){const o=t.getBoundingClientRect(),a=o.width/n,s=o.height/n,l=a/i.width,c=s/i.height,u=Math.min(l,c);r.scale=u,r.x.scale=e?u:l,r.y.scale=e?u:c,r.x.offset=e?(a-i.width*u)/2:0,r.y.offset=e?(s-i.height*u)/2:0,r.x.min=i.x,r.y.min=i.y,r.naturalSize={width:a-2*r.x.offset,height:s-2*r.y.offset}}return r}function d(t,e){const n=u(t);if(!n)return;const i=Math.round(n.width*e),r=Math.round(n.height*e),o=n.x-(i-n.width)/2,a=n.y-(r-n.height)/2;t.setAttribute("viewBox",`${o} ${a} ${i} ${r}`)}function p(t){const e=t=>({topLeft:{x:t.x,y:t.y},bottomRight:{x:t.x+t.width,y:t.y+t.height}}),n=e(t[0]),i=e(t[1]);return!(n.topLeft.x>i.bottomRight.x||i.topLeft.x>n.bottomRight.x||i.bottomRight.y<n.topLeft.y||n.bottomRight.y<i.topLeft.y)}function f(t){return"z"===t.getAttribute("d")?.trim().slice(-1).toLowerCase()||!1}async function g(t,e=.7){if(e<0||e>=1)return;const n=Array.from(t.getElementsByTagName("image"));for(const t of n){const n=t.getAttribute("xlink:href")||t.getAttribute("href");if(n&&n.startsWith("data:image"))try{const i=await v(n,e);t.setAttribute("xlink:href",i)}catch(t){throw new Error("IMAGE_COMPRESSION_FAILED: "+t.message)}}}let m;async function v(t,e){const n=new Image;return new Promise(((i,o)=>{n.onload=()=>{try{const t=1e4,o=1e4;let a=n.naturalWidth,s=n.naturalHeight;if(n.width>t||n.height>o){const e=n.width/n.height;e>1?(a=t,s=t/e):(s=o,a=o*e)}m||(m=document.createElement("canvas")),m.width=a,m.height=s;const l=m.getContext("2d");if(!l)throw new Error("Failed to get 2D context from canvas.");l.drawImage(n,0,0,a,s);const c=m.toDataURL("image/"+((0,r.nr)()?"jpeg":"webp"),e);m.width=0,m.height=0,i(c)}catch(t){o(t)}finally{n.src="",n.remove()}},n.onerror=t=>o(new Error("Failed to load image.")),n.src=t}))}},298:(t,e,n)=>{"use strict";n.d(e,{Gz:()=>a,aZ:()=>l,bv:()=>s,cb:()=>u,eA:()=>c,mE:()=>h});var i=n(72210),r=n(96826),o=n(60001);function a(t){try{return new URL(t),!0}catch(t){return!1}}async function s(t,e=!0,n=!0){const r=async t=>{try{const e=await fetch(t);if(!e.ok){let t="UNREACHABLE";switch(e.status){case 401:case 403:t="UNAUTHORIZED";break;case 404:t="NOT_FOUND"}return(0,i.T)(t)}return await e.text()}catch(t){return(0,i.T)(t)}},a=[t];let s;e&&[".svg",".xml",""].forEach((e=>{const n=t.replace(/\.svg$/,e);-1===a.indexOf(n)&&a.push(n);const i=n.toLowerCase();-1===a.indexOf(i)&&a.push(i);const r=n.replace(/ /g,"-");-1===a.indexOf(r)&&a.push(r);const o=r.toLowerCase();-1===a.indexOf(o)&&a.push(o)}));for(let t=0;t<a.length;t++){const e=await r(a[t]);if("string"==typeof e){const t=(0,o.$D)(e);if(t.isValid)return e;if(n)throw t.error;return null}0==t&&(s=e)}if(s&&n)throw s;return null}function l(t){try{const e=new URL(t);return e.searchParams.has("name")?e.searchParams.get("name"):"/"!==e.pathname&&""!==e.pathname.trim()?(0,r.T3)(decodeURIComponent(e.pathname.split("/").pop())):e.hostname}catch(e){return t}}function c(t){const e=new URL(t);return e.origin+e.pathname}function u(t){const e=new URL(t),n=e.href.lastIndexOf("/");return e.href.substring(0,n)}function h(t){return t.match(/^http(s?):\/\//)||(t=`https://${t}`),t}},96826:(t,e,n)=>{"use strict";n.d(e,{$T:()=>S,Bo:()=>s,JT:()=>h,Pu:()=>C,T3:()=>c,TP:()=>v,U4:()=>d,UD:()=>f,Yq:()=>b,_1:()=>g,dR:()=>p,e7:()=>m,jA:()=>k,jD:()=>y,k5:()=>x,lW:()=>T,nr:()=>M,rz:()=>w,v7:()=>l,xx:()=>a,yl:()=>u});var i=n(81807),r=n(3075),o=n(85954);function a(t,e=15){return t?t?.length<=e?t:`${t.slice(0,e)}...`:""}function s(t){return Array.isArray(t)&&t.every((t=>"string"==typeof t))}function l(t,e=2,n=!1){const r=1048576,o=1073741824,a=t=>n&&t%1==0?t.toFixed(0):t;return t>=o?`${a((0,i.LIG)(t/o,e))} GB`:t>=r?`${a((0,i.LIG)(t/r,e))} MB`:t>=1024?`${a((0,i.LIG)(t/1024,e))} KB`:`${a(t)} bytes`}function c(t){const e=t.lastIndexOf(".");return-1===e?t:t.substring(0,e)}function u(t){return"true"===t||"false"!==t&&t}function h(t,e=[]){const n=t.dataMapping.areas,i=new Set;for(const t in n)Object.keys(n[t]).forEach((t=>i.add(t)));const r=Array.from(i).filter((t=>0===e.length||e.includes(t)));return i.clear(),`${r.join(",")}\n${Object.values(n).map((t=>r.map((e=>{const n=t[e];return null!=n?`"${String(n)}"`:""})).join(","))).join("\n")}`}function d(t){return!!t&&!(!t.hasAttribute(o.Lc.GroupMatched)||!t.hasAttribute(o.Lc.Strong))}function p(t){return!!t&&!(!t.hasAttribute(o.Lc.GroupUnbound)||!t.hasAttribute(o.Lc.Unbound))}function f(t,e){if(t===e||null==t&&null==e)return!0;if(t&&!e||!t&&e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}return JSON.stringify(t)===JSON.stringify(e)}function g(t,e){const n=parseFloat(t),i=parseFloat(e);return isNaN(n)||isNaN(i)?t.localeCompare(e,void 0,{sensitivity:"base"}):n-i}function m(t,e=[],n=["svg","body","html"],i=!1){const r=[];for(;t;){const o=t.tagName.toLowerCase();let a=!0;(!t.id&&!i||e.some((e=>t.hasAttribute(e)))||n.includes(o))&&(a=!1),a&&r.unshift(t.id||o),t=t.parentElement}return r}function v(t,e,n){const i=e.split(".");let r=t;if(1===i.length)r[i[0]]=n;else{for(let t=0;t<i.length-1;t++){const e=i[t];e in r||(r[e]={}),r=r[e]}r[i[i.length-1]]=n}}function y(t,e){const n=e.split(".");let i=t;for(let t=0;t<n.length;t++){const e=n[t];if(!(e in i))return;i=i[e]}return i}function b(t,e,n){return e?n?i.ZA6.instance.create({format:n,formatSingleValues:!1,cultureSelector:t}).format(e):new Intl.DateTimeFormat(t,{year:"numeric",month:"2-digit",day:"2-digit"}).format(e):"(Blank)"}function w(t){return new Promise((e=>{setTimeout((()=>{const n=r.Ay.gzip(t);e(n)}),0)}))}function S(t){return r.Ay.ungzip(t,{to:"string"})}function x(t){return t instanceof Blob?t:new Blob([t],{type:"application/octet-stream"})}function k(t){return(new TextEncoder).encode(JSON.stringify(t))}function C(t,e=!1){if(e)return new Blob([t]).size;{let e=0;for(let n=0;n<t.length;n++)t.charCodeAt(n)<=127&&e++;return e+2.5*(t.length-e)}}function M(){const t=navigator.userAgent;return t.includes("Safari")&&!t.includes("Chrome")&&!t.includes("Android")}function T(t){const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},1015:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var i=n(81807),r=n(15436);class o{element;landingPage;constructor(t){this.element=t,this.draw()}draw(){this.landingPage||(this.landingPage=(0,i.tTh)(".visual-landing",this.element,[(0,i.tTh)(".message.icon.icon-info","Select or drag fields to populate this visual"),(0,i.tTh)(".watermark"),(0,i.tTh)("a.logo",{attr:{href:r.tl.website,target:"_blank",title:"OKVIZ website"},events:{click:t=>{t.preventDefault();const e=t.currentTarget;thisVisual.host.launchUrl(e.href)}}})]))}destroy(){this.landingPage&&(this.landingPage.remove(),this.landingPage=null)}}},65789:(t,e,n)=>{"use strict";n.d(e,{b:()=>m});var i=n(26354),r=n.n(i),o=n(1015),a=n(81807),s=n(79953),l=n(85209),c=n(30980),u=n(39236),h=n(79904),d=n(31171),p=n(25539),f=function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},g=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class m{element;model;events;meta;editor;colorRulesEnumerator;chart;legend;selectionManager;tooltipServiceWrapper;downloadService;viewport;settingsReader;fetcher;settings;testMap;interactive=!0;callbackSelectionIds;zoomStateManager;viewMode;isInFocus=!1;landingPage;licenseManager;updater;constructor(t){globalThis.thisVisual={host:t.host,element:t.element,internalUpdate:!1},this.init(t)}init(t){this.meta=new a.i2d(r(),[{name:a.Wk3,flag:"12mkqilgdytraloq2dxzkrubzljak3ec"}]),this.meta.logMe(),(0,a.Rm2)("Host",t.host),this.element=t.element,this.events=t.host.eventService,this.selectionManager=t.host.createSelectionManager(),this.selectionManager.registerOnSelectCallback((t=>{this.callbackSelectionIds=t})),this.tooltipServiceWrapper=new a.OU5(thisVisual.host.tooltipService,this.element),this.downloadService=t.host.downloadService,this.interactive=t.host.hostCapabilities.allowInteractions,this.settingsReader=new a.ToL,this.fetcher=new a.eIO;const e={roles:[u.Xh.Value,u.Xh.Tooltips],properties:{default:"Matched Areas"},hasLegend:!0};this.editor=new s.KE({plugins:{ColorRulesManager:e},title:this.meta.displayName,hideEditControl:!0}),this.colorRulesEnumerator=new s.f9,this.licenseManager=new d.hF(this.meta,{required:{ifEmbedded:!0,if:()=>{if(this.meta.isEdition("lite"))return!0;const t=this.chart?.mapsManager.counts;return t?.remote>0||t?.dataField>0||t?.myStorage>0?{type:d.uW.BlockOrBanner,title:"Invalid License",text:"This visual is using remote maps which are not allowed by the free version. Please activate a license to continue using it."}:t?.local>1?{type:d.uW.BlockOrBanner,title:"Invalid License",text:"This visual is using more maps than allowed by the free version. Please activate a license to continue using it."}:this.model?.dataPoints.length>15?{type:d.uW.BlockOrBanner,title:"Invalid License",text:"This visual has too many data points; only 15 data points are supported with the free version. Activate a license to remove this limit."}:void 0}},fetchingOptions:{intervalSeconds:10,attempts:2}}),this.licenseManager.on("fetched",(()=>{this.updateFeatures(this.model,!1)})),this.updater=new p.Sx(this.meta),this.updateFeatures(null,!1)}async update(t){if(!t?.dataViews[0])return;performance.mark("visual.update"),this.events.renderingStarted(t),this.meta.update(t),this.licenseManager.update(t),this.updater.update(t);const e=this.settingsReader.populate(c.Mb,t.dataViews[0]);if(!e?.model)return;this.settings=e.model,this.zoomStateManager||(this.zoomStateManager=h.G.getInstance(),this.zoomStateManager.zoomStates=this.settings.internal.zoomStates.value||{}),this.settings.accessibility.scaleUi.value&&(t.viewport.scale=1),this.viewport=t.viewport;const n=this.fetcher.update(t),i=!this.viewMode||this.viewMode!==t.viewMode,r=this.isInFocus!==t.isInFocus;if(n.type==a.Urf.Internal&&((0,a.Rm2)("Internal update"),!i&&!r))return;if(a.tzH.Close(),n.type==a.Urf.Interface&&!i&&!r)return await(0,a.ukR)(50),void this.chart?.updateInterface(this.viewport.scale);this.viewMode=t.viewMode,this.isInFocus=t.isInFocus;const s=this.settings.about.showDiagnostics.value&&1==t.viewMode;if(a.C7A.instance.status=s?a.cFy.Enabled:a.cFy.Auto,a.C7A.instance.useInlineConsoleFor=s&&(this.settings.about.showInlineConsole.value||(0,a.zb)())?["error","info"]:[],a.C7A.instance.update(t),this.editor.update(t,{internal:{colorRules:this.settings.internal.colorRules.value}},s),this.colorRulesEnumerator.update(t),(0,a.Rm2)("Update",t),(0,a.Rm2)("Settings",this.settings),this.chart&&this.chart.destroy(),this.legend&&this.legend.destroy(),n.type!=a.Urf.None?(this.landingPage&&(this.landingPage.destroy(),this.landingPage=null),!n.updateModel&&this.model||(this.model=(0,u.E1)(t,this.model,!n.resetModel,n.startIndex,this.settings)),(0,a.Rm2)("Model",this.model),this.updateFeatures(this.model,0!==t.viewMode),thisVisual.host.setCanDrill(thisVisualFeatures.drillDown),r&&await(0,a.ukR)(500),this.chart=new l.t(this.element,this.model,this.settings,this.editor,this.viewport.scale,this.selectionManager,this.tooltipServiceWrapper,this.interactive,this.callbackSelectionIds,this.colorRulesEnumerator,0!==this.viewMode,this.isInFocus,this.zoomStateManager,this.licenseManager),await this.chart.draw()):this.landingPage||(this.landingPage=new o.b(this.element)),this.callbackSelectionIds=[],this.events.renderingFinished(t),a.ohM.apply(this.settings.accessibility.colorBlindnessVision.value.value),this.settings.about.showDiagnostics.value){try{performance.measure("Rendering","visual.update")}catch{}performance.getEntriesByType("measure").forEach((t=>(0,a.Rm2)(`${t.name} (ms)`,t.duration)))}performance.clearMarks(),performance.clearMeasures()}updateFeatures(t,e){globalThis.thisVisualFeatures={myStorageMaps:!this.meta.isEdition("lite")&&"okviz"==this.licenseManager?.type&&this.licenseManager.isValid,remoteMaps:!this.meta.isEdition("lite")&&this.licenseManager.isValid,mapDialog:!t?.mapField,childMaps:!t?.mapField,mapSelector:!t?.mapField,drillDown:!t?.mapField,colorRules:!!t?.mapField||!!t?.legendField},e&&t?.mapField&&thisVisual.host.displayWarningIcon("Some Features are Disabled","Since you bound a column to the Map URLs role, some features such as drill-down, Power BI's conditional formatting, Auto-Fetch, and Map Selector are disabled.\nYou can still apply conditional colors by using the OKVIZ color rules, but these are limited.\n\nTo restore all the features, remove the Map URLs field."),this.chart&&this.chart.updateMapBlur()}getFormattingModel(){return this.settingsReader.enumerate(this.settings,(t=>{if(thisVisualFeatures?.colorRules&&this.settingsReader.getSlices(t).forEach((t=>{"ColorPicker"!=t.type||3!=t.instanceKind&&2!=t.instanceKind||(t.selector=t.altConstantSelector,t.altConstantSelector=null,t.instanceKind=1)})),this.model?.legendField&&(t.areas.infoLegendColor.visible=!0,t.areas.matchedColorType.visible=!1,t.areas.matchedColor.visible=!1),t.about.groups.find((t=>"about.version"==t.name)).displayName=this.meta.displayName,t.about.visualVersion.value=`v${this.meta.versionDisplayName}`,this.licenseManager.enumerateSettings(t.license),t.myStorage.visible=!1,thisVisualFeatures?.myStorageMaps){const e=this.chart?.mapsManager?.myStorage.info;e?.id&&(t.myStorage.groups.find((t=>"myStorage.status"==t.name)).displayName="Status"+(null==e.isActive?"":e.isActive?": Active":": Inactive"),t.myStorage.id.value=e.id,t.myStorage.region.value=e.displayRegion,t.myStorage.quota.visible=null!=e.quota,t.myStorage.quota.value=this.chart.mapsManager.myStorage.displayAvailableQuota,t.myStorage.isEncrypted.visible=null!=e.isEncrypted,t.myStorage.isEncrypted.value=e.isEncrypted?"Yes":"No",t.myStorage.visible=!0)}this.updater.enumerateSettings(t.updater)}))}}f([(0,a.GPt)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],m.prototype,"init",null),f([(0,a.GPt)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",Promise)],m.prototype,"update",null),f([(0,a.GPt)(),g("design:type",Function),g("design:paramtypes",[Object,Boolean]),g("design:returntype",void 0)],m.prototype,"updateFeatures",null),f([(0,a.GPt)(),g("design:type",Function),g("design:paramtypes",[]),g("design:returntype",void 0)],m.prototype,"getFormattingModel",null)},79904:(t,e,n)=>{"use strict";n.d(e,{G:()=>r});var i=n(81807);class r{zoomStates={};saveTimeout;delay=3e3;static instance;constructor(){}static getInstance(){return r.instance||(r.instance=new r),r.instance}add(t,e){this.zoomStates[t]=e,this.enqueueSave()}delete(t){this.zoomStates[t]&&(delete this.zoomStates[t],this.saveAll(!0))}get(t){return this.zoomStates[t]||{zoom:1,position:{left:0,top:0}}}enqueueSave(){clearTimeout(this.saveTimeout),this.saveTimeout=window.setTimeout((()=>{this.saveAll(),this.saveTimeout=null}),this.delay)}saveAll(t=!1){i.XI0.BATCH({objectName:"internal",properties:{zoomStates:this.zoomStates,update:Date.now().toString()},selector:null}),t||i.XI0.BATCH_SAVE(!0)}}},66637:(t,e,n)=>{"use strict";var i=n(96650),r=n(78823),o=n(5051),a=n(57652);t.exports=a||i.call(o,r)},67060:(t,e,n)=>{"use strict";var i=n(96650),r=n(78823),o=n(66637);t.exports=function(){return o(i,r,arguments)}},78823:t=>{"use strict";t.exports=Function.prototype.apply},5051:t=>{"use strict";t.exports=Function.prototype.call},22759:(t,e,n)=>{"use strict";var i=n(96650),r=n(98132),o=n(5051),a=n(66637);t.exports=function(t){if(t.length<1||"function"!=typeof t[0])throw new r("a function is required");return a(i,o,t)}},57652:t=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},45954:(t,e,n)=>{"use strict";var i=n(24040),r=n(22970),o=r(i("String.prototype.indexOf"));t.exports=function(t,e){var n=i(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?r(n):n}},22970:(t,e,n)=>{"use strict";var i=n(26980),r=n(64148),o=n(22759),a=n(67060);t.exports=function(t){var e=o(arguments),n=t.length-(arguments.length-1);return i(e,1+(n>0?n:0),!0)},r?r(t.exports,"apply",{value:a}):t.exports.apply=a},62375:(t,e,n)=>{"use strict";var i=n(24040),r=n(22970),o=r(i("String.prototype.indexOf"));t.exports=function(t,e){var n=i(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?r(n):n}},56550:(t,e,n)=>{"use strict";var i=n(64148),r=n(20459),o=n(98132),a=n(35472);t.exports=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new o("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!a&&a(t,e);if(i)i(t,e,{configurable:null===c&&h?h.configurable:!c,enumerable:null===s&&h?h.enumerable:!s,value:n,writable:null===l&&h?h.writable:!l});else{if(!u&&(s||l||c))throw new r("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}}},29775:(t,e,n)=>{"use strict";var i=n(22759),r=n(35472),o=[].__proto__===Array.prototype&&r&&r(Object.prototype,"__proto__"),a=Object,s=a.getPrototypeOf;t.exports=o&&"function"==typeof o.get?i([o.get]):"function"==typeof s&&function(t){return s(null==t?t:a(t))}},64148:t=>{"use strict";var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}t.exports=e},64606:t=>{"use strict";t.exports=EvalError},66534:t=>{"use strict";t.exports=Error},97467:t=>{"use strict";t.exports=RangeError},62791:t=>{"use strict";t.exports=ReferenceError},20459:t=>{"use strict";t.exports=SyntaxError},98132:t=>{"use strict";t.exports=TypeError},48420:t=>{"use strict";t.exports=URIError},22485:t=>{"use strict";t.exports=Object},89849:(t,e,n)=>{"use strict";var i=n(92217),r=Object.prototype.toString,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){if(!i(e))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===r.call(t)?function(t,e,n){for(var i=0,r=t.length;i<r;i++)o.call(t,i)&&(null==n?e(t[i],i,t):e.call(n,t[i],i,t))}(t,e,a):"string"==typeof t?function(t,e,n){for(var i=0,r=t.length;i<r;i++)null==n?e(t.charAt(i),i,t):e.call(n,t.charAt(i),i,t)}(t,e,a):function(t,e,n){for(var i in t)o.call(t,i)&&(null==n?e(t[i],i,t):e.call(n,t[i],i,t))}(t,e,a)}},67554:t=>{"use strict";var e=Object.prototype.toString,n=Math.max,i=function(t,e){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var r=0;r<e.length;r+=1)n[r+t.length]=e[r];return n};t.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==e.apply(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var o,a=function(t){for(var e=[],n=1,i=0;n<t.length;n+=1,i+=1)e[i]=t[n];return e}(arguments),s=n(0,r.length-a.length),l=[],c=0;c<s;c++)l[c]="$"+c;if(o=Function("binder","return function ("+function(t){for(var e="",n=0;n<t.length;n+=1)e+=t[n],n+1<t.length&&(e+=",");return e}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var e=r.apply(this,i(a,arguments));return Object(e)===e?e:this}return r.apply(t,i(a,arguments))})),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o}},96650:(t,e,n)=>{"use strict";var i=n(67554);t.exports=Function.prototype.bind||i},24040:(t,e,n)=>{"use strict";var i,r=n(22485),o=n(66534),a=n(64606),s=n(97467),l=n(62791),c=n(20459),u=n(98132),h=n(48420),d=n(17783),p=n(34569),f=n(35977),g=n(523),m=n(67841),v=Function,y=function(t){try{return v('"use strict"; return ('+t+").constructor;")()}catch(t){}},b=n(35472),w=n(64148),S=function(){throw new u},x=b?function(){try{return S}catch(t){try{return b(arguments,"callee").get}catch(t){return S}}}():S,k=n(22734)(),C=n(29775),M="function"==typeof Reflect&&Reflect.getPrototypeOf||r.getPrototypeOf||C,T=n(78823),E=n(5051),A={},_="undefined"!=typeof Uint8Array&&M?M(Uint8Array):i,P={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":k&&M?M([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":a,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":A,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":k&&M?M(M([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&k&&M?M((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":s,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&k&&M?M((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":k&&M?M(""[Symbol.iterator]()):i,"%Symbol%":k?Symbol:i,"%SyntaxError%":c,"%ThrowTypeError%":x,"%TypedArray%":_,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":h,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet,"%Function.prototype.call%":E,"%Function.prototype.apply%":T,"%Object.defineProperty%":w,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":f,"%Math.min%":g,"%Math.pow%":m};if(M)try{null.error}catch(t){var D=M(M(t));P["%Error.prototype%"]=D}var O=function t(e){var n;if("%AsyncFunction%"===e)n=y("async function () {}");else if("%GeneratorFunction%"===e)n=y("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=y("async function* () {}");else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&M&&(n=M(r.prototype))}return P[e]=n,n},L={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=n(96650),R=n(9042),V=I.call(E,Array.prototype.concat),N=I.call(T,Array.prototype.splice),F=I.call(E,String.prototype.replace),B=I.call(E,String.prototype.slice),z=I.call(E,RegExp.prototype.exec),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,G=function(t,e){var n,i=t;if(R(L,i)&&(i="%"+(n=L[i])[0]+"%"),R(P,i)){var r=P[i];if(r===A&&(r=O(i)),void 0===r&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:r}}throw new c("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===z(/^%?[^%]*%?$/,t))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=B(t,0,1),n=B(t,-1);if("%"===e&&"%"!==n)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new c("invalid intrinsic syntax, expected opening `%`");var i=[];return F(t,j,(function(t,e,n,r){i[i.length]=n?F(r,U,"$1"):e||t})),i}(t),i=n.length>0?n[0]:"",r=G("%"+i+"%",e),o=r.name,a=r.value,s=!1,l=r.alias;l&&(i=l[0],N(n,V([0,1],l)));for(var h=1,d=!0;h<n.length;h+=1){var p=n[h],f=B(p,0,1),g=B(p,-1);if(('"'===f||"'"===f||"`"===f||'"'===g||"'"===g||"`"===g)&&f!==g)throw new c("property names with quotes must have matching quotes");if("constructor"!==p&&d||(s=!0),R(P,o="%"+(i+="."+p)+"%"))a=P[o];else if(null!=a){if(!(p in a)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(b&&h+1>=n.length){var m=b(a,p);a=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:a[p]}else d=R(a,p),a=a[p];d&&!s&&(P[o]=a)}}return a}},46996:t=>{"use strict";t.exports=Object.getOwnPropertyDescriptor},35472:(t,e,n)=>{"use strict";var i=n(46996);if(i)try{i([],"length")}catch(t){i=null}t.exports=i},37295:(t,e,n)=>{"use strict";var i=n(64148),r=function(){return!!i};r.hasArrayLengthDefineBug=function(){if(!i)return null;try{return 1!==i([],"length",{value:1}).length}catch(t){return!0}},t.exports=r},22734:(t,e,n)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,r=n(86212);t.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&r()}},86212:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(var i in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},70401:(t,e,n)=>{"use strict";var i=n(86212);t.exports=function(){return i()&&!!Symbol.toStringTag}},9042:(t,e,n)=>{"use strict";var i=Function.prototype.call,r=Object.prototype.hasOwnProperty,o=n(96650);t.exports=o.call(i,r)},1543:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},5411:(t,e,n)=>{"use strict";var i=n(70401)(),r=n(62375)("Object.prototype.toString"),o=function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===r(t)},a=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"length"in t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==r(t)&&"callee"in t&&"[object Function]"===r(t.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,t.exports=s?o:a},92217:t=>{"use strict";var e,n,i=Function.prototype.toString,r="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof r&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw n}}),n={},r((function(){throw 42}),null,e)}catch(t){t!==n&&(r=null)}else r=null;var o=/^\s*class\b/,a=function(t){try{var e=i.call(t);return o.test(e)}catch(t){return!1}},s=function(t){try{return!a(t)&&(i.call(t),!0)}catch(t){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var d=document.all;l.call(d)===l.call(document.all)&&(h=function(t){if((u||!t)&&(void 0===t||"object"==typeof t))try{var e=l.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=r?function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{r(t,null,e)}catch(t){if(t!==n)return!1}return!a(t)&&s(t)}:function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(c)return s(t);if(a(t))return!1;var e=l.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&s(t)}},41321:(t,e,n)=>{"use strict";var i,r=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=n(70401)(),l=Object.getPrototypeOf;t.exports=function(t){if("function"!=typeof t)return!1;if(a.test(o.call(t)))return!0;if(!s)return"[object GeneratorFunction]"===r.call(t);if(!l)return!1;if(void 0===i){var e=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(t){}}();i=!!e&&l(e)}return l(t)===i}},89919:(t,e,n)=>{"use strict";var i=n(27746);t.exports=function(t){return!!i(t)}},21516:t=>{t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://example.com/extended-schema.pbiviz.json",type:"object",allOf:[{$ref:"./../../node_modules/powerbi-visuals-api/schema.pbiviz.json"}],properties:{visual:{type:"object",properties:{date:{type:"string",description:"Release date of the visual"},edition:{type:"string",description:"Visual edition"},contactUrl:{type:"string",description:"Contact URL"},changelogUrl:{type:"string",description:"Changelog URL"},docsUrl:{type:"string",description:"Documentation URL"},appSourcePurchaseUrl:{type:"string",description:"AppSource purchase URL"},okvizPurchaseUrl:{type:"string",description:"OKVIZ purchase URL"},updateUrl:{type:"string",description:"URL to check for updated versions of the visual"}}},editions:{type:"array",description:"List of visual editions",items:{type:"object",properties:{type:{type:"string",description:"Edition type"},name:{type:"string",description:"Internal edition name"},displayName:{type:"string",description:"Display name of the edition"},guid:{type:"string",description:"Unique identifier for the edition"},icon:{type:"string",description:"Icon path for the edition"},packages:{type:"array",description:"List of packages",items:{type:"string"}},certification:{type:"boolean",description:"True if the edition must be certified"},licensing:{type:"object",description:"Licensing configuration for the edition",properties:{type:{type:"string",description:"Licensing type"},platforms:{type:"array",description:"List of licensing platforms",items:{type:"string"}},appSourcePlans:{type:"array",description:"AppSource plans associated with the edition",items:{type:"string"}}}},capabilities:{type:"object",description:"Capabilities configuration"}}}},dev:{type:"object",description:"Any object that can be used to test or store configuration valid for the development environment only. NOTE: This section is remove from the final pbiviz.json file during packaging."}}}},26354:t=>{t.exports={visual:{version:"2.3.4.0",date:"2025-03-24",name:"synopticPanelLiteByOKVIZ",guid:"synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6",displayName:"Synoptic Panel Lite by OKVIZ",description:"Synoptic Panel by OKVIZ is a custom visual for Power BI that allows users to display data dynamically across custom images or maps, which are not restricted to geographic representations.",supportUrl:"https://okviz.com/synoptic-panel/",contactUrl:"https://okviz.com/support/",docsUrl:"https://docs.okviz.com/visuals/synoptic-panel/",changelogUrl:"https://docs.okviz.com/visuals/synoptic-panel/changelog/",visualClassName:"Visual",edition:"lite",appSourcePurchaseUrl:"https://appsource.microsoft.com/en-us/product/power-bi-visuals/okvizcorp1634637213047.synopticpanelbyokviz-lite?tab=PlansAndPrice",ls:{p:[0],ap:["okvizcorp1634637213047.synopticpanelbyokviz-lite.*"]}},author:{name:"OKVIZ",email:"support@okviz.com"},apiVersion:"5.11.0",assets:{icon:"dist/tmp/icon.svg"},externalJS:null,style:"style/visual.less",capabilities:"capabilities.json",stringResources:[]}},17783:t=>{"use strict";t.exports=Math.abs},34569:t=>{"use strict";t.exports=Math.floor},35977:t=>{"use strict";t.exports=Math.max},523:t=>{"use strict";t.exports=Math.min},67841:t=>{"use strict";t.exports=Math.pow},18862:(t,e,n)=>{"use strict";var i=n(77419);function r(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function o(t,e){for(var n,i="",r=0,o=-1,a=0,s=0;s<=t.length;++s){if(s<t.length)n=t.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",r=0):r=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),o=s,a=0;continue}}else if(2===i.length||1===i.length){i="",r=0,o=s,a=0;continue}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+t.slice(o+1,s):i=t.slice(o+1,s),r=s-o-1;o=s,a=0}else 46===n&&-1!==a?++a:a=-1}return i}var a={resolve:function(){for(var t,e="",n=!1,a=arguments.length-1;a>=-1&&!n;a--){var s;a>=0?s=arguments[a]:(void 0===t&&(t=i.cwd()),s=t),r(s),0!==s.length&&(e=s+"/"+e,n=47===s.charCodeAt(0))}return e=o(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(t){if(r(t),0===t.length)return".";var e=47===t.charCodeAt(0),n=47===t.charCodeAt(t.length-1);return 0!==(t=o(t,!e)).length||e||(t="."),t.length>0&&n&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return r(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];r(n),n.length>0&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":a.normalize(t)},relative:function(t,e){if(r(t),r(e),t===e)return"";if((t=a.resolve(t))===(e=a.resolve(e)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var i=t.length,o=i-n,s=1;s<e.length&&47===e.charCodeAt(s);++s);for(var l=e.length-s,c=o<l?o:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(47===e.charCodeAt(s+h))return e.slice(s+h+1);if(0===h)return e.slice(s+h)}else o>c&&(47===t.charCodeAt(n+h)?u=h:0===h&&(u=0));break}var d=t.charCodeAt(n+h);if(d!==e.charCodeAt(s+h))break;47===d&&(u=h)}var p="";for(h=n+u+1;h<=i;++h)h!==i&&47!==t.charCodeAt(h)||(0===p.length?p+="..":p+="/..");return p.length>0?p+e.slice(s+u):(s+=u,47===e.charCodeAt(s)&&++s,e.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(r(t),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,i=-1,o=!0,a=t.length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?n?"/":".":n&&1===i?"//":t.slice(0,i)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');r(t);var n,i=0,o=-1,a=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var s=e.length-1,l=-1;for(n=t.length-1;n>=0;--n){var c=t.charCodeAt(n);if(47===c){if(!a){i=n+1;break}}else-1===l&&(a=!1,l=n+1),s>=0&&(c===e.charCodeAt(s)?-1==--s&&(o=n):(s=-1,o=l))}return i===o?o=l:-1===o&&(o=t.length),t.slice(i,o)}for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!a){i=n+1;break}}else-1===o&&(a=!1,o=n+1);return-1===o?"":t.slice(i,o)},extname:function(t){r(t);for(var e=-1,n=0,i=-1,o=!0,a=0,s=t.length-1;s>=0;--s){var l=t.charCodeAt(s);if(47!==l)-1===i&&(o=!1,i=s+1),46===l?-1===e?e=s:1!==a&&(a=1):-1!==e&&(a=-1);else if(!o){n=s+1;break}}return-1===e||-1===i||0===a||1===a&&e===i-1&&e===n+1?"":t.slice(e,i)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var n=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+i:n+"/"+i:i}(0,t)},parse:function(t){r(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var n,i=t.charCodeAt(0),o=47===i;o?(e.root="/",n=1):n=0;for(var a=-1,s=0,l=-1,c=!0,u=t.length-1,h=0;u>=n;--u)if(47!==(i=t.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===i?-1===a?a=u:1!==h&&(h=1):-1!==a&&(h=-1);else if(!c){s=u+1;break}return-1===a||-1===l||0===h||1===h&&a===l-1&&a===s+1?-1!==l&&(e.base=e.name=0===s&&o?t.slice(1,l):t.slice(s,l)):(0===s&&o?(e.name=t.slice(1,a),e.base=t.slice(1,l)):(e.name=t.slice(s,a),e.base=t.slice(s,l)),e.ext=t.slice(a,l)),s>0?e.dir=t.slice(0,s-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,t.exports=a},71077:t=>{"use strict";t.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},50521:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.locales=void 0,e.locales={"en-US":["en-US","default",{englishName:"English (United States)"}],"fr-FR":["fr-FR","default",{name:"fr-FR",englishName:"French (France)",nativeName:"français (France)",language:"fr",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}],"it-IT":["it-IT","default",{name:"it-IT",englishName:"Italian (Italy)",nativeName:"italiano (Italia)",language:"it",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],namesAbbr:["dom","lun","mar","mer","gio","ven","sab"],namesShort:["do","lu","ma","me","gi","ve","sa"]},months:{names:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],namesAbbr:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}],"hi-IN":["hi-IN","default",{name:"hi-IN",englishName:"Hindi (India)",nativeName:"हिंदी (भारत)",language:"hi",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["रविवार","सोमवार","मंगलवार","बुधवार","गुरुवार","शुक्रवार","शनिवार"],namesAbbr:["रवि.","सोम.","मंगल.","बुध.","गुरु.","शुक्र.","शनि."],namesShort:["र","स","म","ब","ग","श","श"]},months:{names:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""],namesAbbr:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""]},AM:["पूर्वाह्न","पूर्वाह्न","पूर्वाह्न"],PM:["अपराह्न","अपराह्न","अपराह्न"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}]}},77419:t=>{var e,n,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,l=[],c=!1,u=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&d())}function d(){if(!c){var t=a(h);c=!0;for(var e=l.length;e;){for(s=l,l=[];++u<e;)s&&s[u].run();u=-1,e=l.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},26980:(t,e,n)=>{"use strict";var i=n(24040),r=n(56550),o=n(37295)(),a=n(35472),s=n(98132),l=i("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new s("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||l(e)!==e)throw new s("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,c=!0;if("length"in t&&a){var u=a(t,"length");u&&!u.configurable&&(i=!1),u&&!u.writable&&(c=!1)}return(i||c||!n)&&(o?r(t,"length",e,!0,!0):r(t,"length",e)),t}},97504:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},1075:(t,e,n)=>{"use strict";var i=n(5411),r=n(41321),o=n(27746),a=n(89919);function s(t){return t.call.bind(t)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=s(Object.prototype.toString),h=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(l)var f=s(BigInt.prototype.valueOf);if(c)var g=s(Symbol.prototype.valueOf);function m(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function v(t){return"[object Map]"===u(t)}function y(t){return"[object Set]"===u(t)}function b(t){return"[object WeakMap]"===u(t)}function w(t){return"[object WeakSet]"===u(t)}function S(t){return"[object ArrayBuffer]"===u(t)}function x(t){return"undefined"!=typeof ArrayBuffer&&(S.working?S(t):t instanceof ArrayBuffer)}function k(t){return"[object DataView]"===u(t)}function C(t){return"undefined"!=typeof DataView&&(k.working?k(t):t instanceof DataView)}e.isArgumentsObject=i,e.isGeneratorFunction=r,e.isTypedArray=a,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):a(t)||C(t)},e.isUint8Array=function(t){return"Uint8Array"===o(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===o(t)},e.isUint16Array=function(t){return"Uint16Array"===o(t)},e.isUint32Array=function(t){return"Uint32Array"===o(t)},e.isInt8Array=function(t){return"Int8Array"===o(t)},e.isInt16Array=function(t){return"Int16Array"===o(t)},e.isInt32Array=function(t){return"Int32Array"===o(t)},e.isFloat32Array=function(t){return"Float32Array"===o(t)},e.isFloat64Array=function(t){return"Float64Array"===o(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===o(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===o(t)},v.working="undefined"!=typeof Map&&v(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(v.working?v(t):t instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(y.working?y(t):t instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(b.working?b(t):t instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),e.isWeakSet=function(t){return w(t)},S.working="undefined"!=typeof ArrayBuffer&&S(new ArrayBuffer),e.isArrayBuffer=x,k.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&k(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=C;var M="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function T(t){return"[object SharedArrayBuffer]"===u(t)}function E(t){return void 0!==M&&(void 0===T.working&&(T.working=T(new M)),T.working?T(t):t instanceof M)}function A(t){return m(t,h)}function _(t){return m(t,d)}function P(t){return m(t,p)}function D(t){return l&&m(t,f)}function O(t){return c&&m(t,g)}e.isSharedArrayBuffer=E,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===u(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===u(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===u(t)},e.isGeneratorObject=function(t){return"[object Generator]"===u(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===u(t)},e.isNumberObject=A,e.isStringObject=_,e.isBooleanObject=P,e.isBigIntObject=D,e.isSymbolObject=O,e.isBoxedPrimitive=function(t){return A(t)||_(t)||P(t)||D(t)||O(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(x(t)||E(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))},12672:(t,e,n)=>{var i=n(77419),r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++)n[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return n},o=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(c(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,r=i.length,a=String(t).replace(o,(function(t){if("%%"===t)return"%";if(n>=r)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}})),s=i[n];n<r;s=i[++n])v(s)||!x(s)?a+=" "+s:a+=" "+c(s);return a},e.deprecate=function(t,n){if(void 0!==i&&!0===i.noDeprecation)return t;if(void 0===i)return function(){return e.deprecate(t,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(i.throwDeprecation)throw new Error(n);i.traceDeprecation?console.trace(n):console.error(n),r=!0}return t.apply(this,arguments)}};var a={},s=/^$/;if(i.env.NODE_DEBUG){var l=i.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+l+"$","i")}function c(t,n){var i={seen:[],stylize:h};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&e._extend(i,n),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=u),d(i,t,i.depth)}function u(t,e){var n=c.styles[e];return n?"["+c.colors[n][0]+"m"+t+"["+c.colors[n][1]+"m":t}function h(t,e){return t}function d(t,n,i){if(t.customInspect&&n&&M(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return b(r)||(r=d(t,r,i)),r}var o=function(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),C(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(M(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(S(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return t.stylize(Date.prototype.toString.call(n),"date");if(C(n))return p(n)}var c,u="",h=!1,x=["{","}"];return g(n)&&(h=!0,x=["[","]"]),M(n)&&(u=" [Function"+(n.name?": "+n.name:"")+"]"),S(n)&&(u=" "+RegExp.prototype.toString.call(n)),k(n)&&(u=" "+Date.prototype.toUTCString.call(n)),C(n)&&(u=" "+p(n)),0!==a.length||h&&0!=n.length?i<0?S(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=h?function(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)_(e,String(a))?o.push(f(t,e,n,i,String(a),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))})),o}(t,n,i,s,a):a.map((function(e){return f(t,n,i,s,e,h)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(c,u,x)):x[0]+u+x[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,i,r,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),_(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(l.value)<0?(s=v(n)?d(t,l.value,null):d(t,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").slice(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),w(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function g(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return void 0===t}function S(t){return x(t)&&"[object RegExp]"===T(t)}function x(t){return"object"==typeof t&&null!==t}function k(t){return x(t)&&"[object Date]"===T(t)}function C(t){return x(t)&&("[object Error]"===T(t)||t instanceof Error)}function M(t){return"function"==typeof t}function T(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!a[t])if(s.test(t)){var n=i.pid;a[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else a[t]=function(){};return a[t]},e.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=n(1075),e.isArray=g,e.isBoolean=m,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=b,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=w,e.isRegExp=S,e.types.isRegExp=S,e.isObject=x,e.isDate=k,e.types.isDate=k,e.isError=C,e.types.isNativeError=C,e.isFunction=M,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(97504);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(n=[E((t=new Date).getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":"),[t.getDate(),A[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(1543),e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(P&&t[P]){var e;if("function"!=typeof(e=t[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,P,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,i=new Promise((function(t,i){e=t,n=i})),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push((function(t,i){t?n(t):e(i)}));try{t.apply(this,r)}catch(t){n(t)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),P&&Object.defineProperty(e,P,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=P,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);var r=e.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return r.apply(o,arguments)};t.apply(this,e).then((function(t){i.nextTick(a.bind(null,null,t))}),(function(t){i.nextTick(D.bind(null,t,a))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,r(t)),e}},27746:(t,e,n)=>{"use strict";var i=n(89849),r=n(53030),o=n(22970),a=n(45954),s=n(35472),l=a("Object.prototype.toString"),c=n(70401)(),u="undefined"==typeof globalThis?global:globalThis,h=r(),d=a("String.prototype.slice"),p=Object.getPrototypeOf,f=a("Array.prototype.indexOf",!0)||function(t,e){for(var n=0;n<t.length;n+=1)if(t[n]===e)return n;return-1},g={__proto__:null};i(h,c&&s&&p?function(t){var e=new u[t];if(Symbol.toStringTag in e){var n=p(e),i=s(n,Symbol.toStringTag);if(!i){var r=p(n);i=s(r,Symbol.toStringTag)}g["$"+t]=o(i.get)}}:function(t){var e=new u[t],n=e.slice||e.set;n&&(g["$"+t]=o(n))}),t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!c){var e=d(l(t),8,-1);return f(h,e)>-1?e:"Object"===e&&function(t){var e=!1;return i(g,(function(n,i){if(!e)try{n(t),e=d(i,1)}catch(t){}})),e}(t)}return s?function(t){var e=!1;return i(g,(function(n,i){if(!e)try{"$"+n(t)===i&&(e=d(i,1))}catch(t){}})),e}(t):null}},53030:(t,e,n)=>{"use strict";var i=n(71077),r="undefined"==typeof globalThis?global:globalThis;t.exports=function(){for(var t=[],e=0;e<i.length;e++)"function"==typeof r[i[e]]&&(t[t.length]=i[e]);return t}},47404:(t,e,n)=>{"use strict";n.d(e,{Bc:()=>nt,OO:()=>ht,wm:()=>K,yU:()=>ut});var i=n(6585),r=n(1371),o=n(15874);class a{constructor(t,e,n,i){this.state=t,this.pos=e,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let e=(0,o.mv)(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),i=e.text.slice(n-e.from,this.pos-e.from),r=i.search(u(t,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}get aborted(){return null==this.abortListeners}addEventListener(t,e,n){"abort"==t&&this.abortListeners&&(this.abortListeners.push(e),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function s(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}class l{constructor(t,e,n,i){this.completion=t,this.source=e,this.match=n,this.score=i}}function c(t){return t.selection.main.from}function u(t,e){var n;let{source:i}=t,r=e&&"^"!=i[0],o="$"!=i[i.length-1];return r||o?new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,null!==(n=t.flags)&&void 0!==n?n:t.ignoreCase?"i":""):t}const h=i.YH.define(),d=new WeakMap;function p(t){if(!Array.isArray(t))return t;let e=d.get(t);return e||d.set(t,e=function(t){let e=t.map((t=>"string"==typeof t?{label:t}:t)),[n,i]=e.every((t=>/^\w+$/.test(t.label)))?[/\w*$/,/\w+$/]:function(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let t=1;t<i.length;t++)n[i[t]]=!0}let i=s(e)+s(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(e);return t=>{let r=t.matchBefore(i);return r||t.explicit?{from:r?r.from:t.pos,options:e,validFor:n}:null}}(t)),e}const f=i.Pe.define(),g=i.Pe.define();class m{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let n=(0,i.vS)(t,e),r=(0,i.Fh)(n);this.chars.push(n);let o=t.slice(e,e+r),a=o.toUpperCase();this.folded.push((0,i.vS)(a==o?o.toLowerCase():a,0)),e+=r}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(0==this.pattern.length)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:n,any:r,precise:o,byWord:a}=this;if(1==e.length){let r=(0,i.vS)(t,0),o=(0,i.Fh)(r),a=o==t.length?0:-100;if(r==e[0]);else{if(r!=n[0])return null;a+=-200}return this.ret(a,[0,o])}let s=t.indexOf(this.pattern);if(0==s)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=e.length,c=0;if(s<0){for(let o=0,a=Math.min(t.length,200);o<a&&c<l;){let a=(0,i.vS)(t,o);a!=e[c]&&a!=n[c]||(r[c++]=o),o+=(0,i.Fh)(a)}if(c<l)return null}let u=0,h=0,d=!1,p=0,f=-1,g=-1,m=/[a-z]/.test(t),v=!0;for(let r=0,c=Math.min(t.length,200),y=0;r<c&&h<l;){let c=(0,i.vS)(t,r);s<0&&(u<l&&c==e[u]&&(o[u++]=r),p<l&&(c==e[p]||c==n[p]?(0==p&&(f=r),g=r+1,p++):p=0));let b,w=c<255?c>=48&&c<=57||c>=97&&c<=122?2:c>=65&&c<=90?1:0:(b=(0,i.MK)(c))!=b.toLowerCase()?1:b!=b.toUpperCase()?2:0;(!r||1==w&&m||0==y&&0!=w)&&(e[h]==c||n[h]==c&&(d=!0)?a[h++]=r:a.length&&(v=!1)),y=w,r+=(0,i.Fh)(c)}return h==l&&0==a[0]&&v?this.result((d?-200:0)-100,a,t):p==l&&0==f?this.ret(-200-t.length+(g==t.length?0:-100),[0,g]):s>-1?this.ret(-700-t.length,[s,s+this.pattern.length]):p==l?this.ret(-900-t.length,[f,g]):h==l?this.result((d?-200:0)-100-700+(v?0:-1100),a,t):2==e.length?null:this.result((r[0]?-700:0)-200-1100,r,t)}result(t,e,n){let r=[],o=0;for(let t of e){let e=t+(this.astral?(0,i.Fh)((0,i.vS)(n,t)):1);o&&r[o-1]==t?r[o-1]=e:(r[o++]=t,r[o++]=e)}return this.ret(t-n.length,r)}}class v{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),n=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,e.length],this.score=n+(t.length==this.pattern.length?0:-100),this)}}const y=i.sj.define({combine:t=>(0,i.QR)(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:w,filterStrict:!1,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>n=>b(t(n),e(n)),optionClass:(t,e)=>n=>b(t(n),e(n)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})});function b(t,e){return t?e?t+" "+e:t:e}function w(t,e,n,i,o,a){let s,l,c=t.textDirection==r.OP.RTL,u=c,h=!1,d="top",p=e.left-o.left,f=o.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(u&&p<Math.min(g,f)?u=!1:!u&&f<Math.min(g,p)&&(u=!0),g<=(u?p:f))s=Math.max(o.top,Math.min(n.top,o.bottom-m))-e.top,l=Math.min(400,u?p:f);else{h=!0,l=Math.min(400,(c?e.right:o.right-e.left)-30);let t=o.bottom-e.bottom;t>=m||t>e.top?s=n.bottom-e.top:(d="bottom",s=e.bottom-n.top)}return{style:`${d}: ${s/((e.bottom-e.top)/a.offsetHeight)}px; max-width: ${l/((e.right-e.left)/a.offsetWidth)}px`,class:"cm-completionInfo-"+(h?c?"left-narrow":"right-narrow":u?"left":"right")}}function S(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let t=Math.floor(e/n);return{from:t*n,to:(t+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class x{constructor(t,e,n){this.view=t,this.stateField=e,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:t=>this.placeInfo(t),key:this},this.space=null,this.currentClass="";let i=t.state.field(e),{options:r,selected:o}=i.open,a=t.state.facet(y);this.optionContent=function(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(t){let e=document.createElement("div");return e.classList.add("cm-completionIcon"),t.type&&e.classList.add(...t.type.split(/\s+/g).map((t=>"cm-completionIcon-"+t))),e.setAttribute("aria-hidden","true"),e},position:20}),e.push({render(t,e,n,i){let r=document.createElement("span");r.className="cm-completionLabel";let o=t.displayLabel||t.label,a=0;for(let t=0;t<i.length;){let e=i[t++],n=i[t++];e>a&&r.appendChild(document.createTextNode(o.slice(a,e)));let s=r.appendChild(document.createElement("span"));s.appendChild(document.createTextNode(o.slice(e,n))),s.className="cm-completionMatchedText",a=n}return a<o.length&&r.appendChild(document.createTextNode(o.slice(a))),r},position:50},{render(t){if(!t.detail)return null;let e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort(((t,e)=>t.position-e.position)).map((t=>t.render))}(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=S(r.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",(n=>{let{options:i}=t.state.field(e).open;for(let e,r=n.target;r&&r!=this.dom;r=r.parentNode)if("LI"==r.nodeName&&(e=/-(\d+)$/.exec(r.id))&&+e[1]<i.length)return this.applyCompletion(t,i[+e[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(e=>{let n=t.state.field(this.stateField,!1);n&&n.tooltip&&t.state.facet(y).closeOnBlur&&e.relatedTarget!=t.contentDOM&&t.dispatch({effects:g.of(null)})})),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(t){var e;let n=t.state.field(this.stateField),i=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),n!=i){let{options:r,selected:o,disabled:a}=n.open;i.open&&i.open.options==r||(this.range=S(r.length,o,t.state.facet(y).maxRenderedOptions),this.showOptions(r,n.id)),this.updateSel(),a!=(null===(e=i.open)||void 0===e?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let t of this.currentClass.split(" "))t&&this.dom.classList.remove(t);for(let t of e.split(" "))t&&this.dom.classList.add(t);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=S(e.options.length,e.selected,this.view.state.facet(y).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:n}=e.options[e.selected],{info:i}=n;if(!i)return;let o="string"==typeof i?document.createTextNode(i):i(n);if(!o)return;"then"in o?o.then((e=>{e&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(e,n)})).catch((t=>(0,r.c_)(this.view.state,t,"completion info"))):this.addInfoPane(o,n)}}addInfoPane(t,e){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=t.nodeType)n.appendChild(t),this.infoDestroy=null;else{let{dom:e,destroy:i}=t;n.appendChild(e),this.infoDestroy=i||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)"LI"==n.nodeName&&n.id?i==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):i--;return e&&function(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=t.getBoundingClientRect(),r=this.space;if(!r){let t=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:t.clientWidth,bottom:t.clientHeight}}return i.top>Math.min(r.bottom,e.bottom)-10||i.bottom<Math.max(r.top,e.top)+10?null:this.view.state.facet(y).positionInfo(this.view,e,i,n,r,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,n){const i=document.createElement("ul");i.id=e,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",(t=>{t.target==i&&t.preventDefault()}));let r=null;for(let o=n.from;o<n.to;o++){let{completion:a,match:s}=t[o],{section:l}=a;if(l){let t="string"==typeof l?l:l.name;t!=r&&(o>n.from||0==n.from)&&(r=t,"string"!=typeof l&&l.header?i.appendChild(l.header(l)):i.appendChild(document.createElement("completion-section")).textContent=t)}const c=i.appendChild(document.createElement("li"));c.id=e+"-"+o,c.setAttribute("role","option");let u=this.optionClass(a);u&&(c.className=u);for(let t of this.optionContent){let e=t(a,this.view.state,this.view,s);e&&c.appendChild(e)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function k(t,e){return n=>new x(n,t,e)}function C(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}class M{constructor(t,e,n,i,r,o){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new M(this.options,_(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,n,i,r,o){if(i&&!o&&t.some((t=>t.isPending)))return i.setDisabled();let a=function(t,e){let n=[],i=null,r=t=>{n.push(t);let{section:e}=t.completion;if(e){i||(i=[]);let t="string"==typeof e?e:e.name;i.some((e=>e.name==t))||i.push("string"==typeof e?{name:t}:e)}},o=e.facet(y);for(let i of t)if(i.hasResult()){let t=i.result.getMatch;if(!1===i.result.filter)for(let e of i.result.options)r(new l(e,i.source,t?t(e):[],1e9-n.length));else{let n,a=e.sliceDoc(i.from,i.to),s=o.filterStrict?new v(a):new m(a);for(let e of i.result.options)if(n=s.match(e.label)){let o=e.displayLabel?t?t(e,n.matched):[]:n.matched;r(new l(e,i.source,o,n.score+(e.boost||0)))}}}if(i){let t=Object.create(null),e=0,r=(t,e)=>{var n,i;return(null!==(n=t.rank)&&void 0!==n?n:1e9)-(null!==(i=e.rank)&&void 0!==i?i:1e9)||(t.name<e.name?-1:1)};for(let n of i.sort(r))e-=1e5,t[n.name]=e;for(let e of n){let{section:n}=e.completion;n&&(e.score+=t["string"==typeof n?n:n.name])}}let a=[],s=null,c=o.compareCompletions;for(let t of n.sort(((t,e)=>e.score-t.score||c(t.completion,e.completion)))){let e=t.completion;!s||s.label!=e.label||s.detail!=e.detail||null!=s.type&&null!=e.type&&s.type!=e.type||s.apply!=e.apply||s.boost!=e.boost?a.push(t):C(t.completion)>C(s)&&(a[a.length-1]=t),s=t.completion}return a}(t,e);if(!a.length)return i&&t.some((t=>t.isPending))?i.setDisabled():null;let s=e.facet(y).selectOnOpen?0:-1;if(i&&i.selected!=s&&-1!=i.selected){let t=i.options[i.selected].completion;for(let e=0;e<a.length;e++)if(a[e].completion==t){s=e;break}}return new M(a,_(n,s),{pos:t.reduce(((t,e)=>e.hasResult()?Math.min(t,e.from):t),1e8),create:F,above:r.aboveCursor},i?i.timestamp:Date.now(),s,!1)}map(t){return new M(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new M(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class T{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new T(P,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(t){let{state:e}=t,n=e.facet(y),i=(n.override||e.languageDataAt("autocomplete",c(e)).map(p)).map((e=>(this.active.find((t=>t.source==e))||new O(e,this.active.some((t=>0!=t.state))?1:0)).update(t,n)));i.length==this.active.length&&i.every(((t,e)=>t==this.active[e]))&&(i=this.active);let r=this.open,o=t.effects.some((t=>t.is(I)));r&&t.docChanged&&(r=r.map(t.changes)),t.selection||i.some((e=>e.hasResult()&&t.changes.touchesRange(e.from,e.to)))||!function(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,o=i==e.length;if(r||o)return r==o;if(t[n++].result!=e[i++].result)return!1}}(i,this.active)||o?r=M.build(i,e,this.id,r,n,o):r&&r.disabled&&!i.some((t=>t.isPending))&&(r=null),!r&&i.every((t=>!t.isPending))&&i.some((t=>t.hasResult()))&&(i=i.map((t=>t.hasResult()?new O(t.source,0):t)));for(let e of t.effects)e.is(R)&&(r=r&&r.setSelected(e.value,this.id));return i==this.active&&r==this.open?this:new T(i,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?E:A}}const E={"aria-autocomplete":"list"},A={};function _(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const P=[];function D(t,e){if(t.isUserEvent("input.complete")){let n=t.annotation(h);if(n&&e.activateOnCompletion(n))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class O{constructor(t,e,n=!1){this.source=t,this.state=e,this.explicit=n}hasResult(){return!1}get isPending(){return 1==this.state}update(t,e){let n=D(t,e),i=this;(8&n||16&n&&this.touches(t))&&(i=new O(i.source,0)),4&n&&0==i.state&&(i=new O(this.source,1)),i=i.updateFor(t,n);for(let e of t.effects)if(e.is(f))i=new O(i.source,1,e.value);else if(e.is(g))i=new O(i.source,0);else if(e.is(I))for(let t of e.value)t.source==i.source&&(i=t);return i}updateFor(t,e){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(c(t.state))}}class L extends O{constructor(t,e,n,i,r,o){super(t,3,e),this.limit=n,this.result=i,this.from=r,this.to=o}hasResult(){return!0}updateFor(t,e){var n;if(!(3&e))return this.map(t.changes);let i=this.result;i.map&&!t.changes.empty&&(i=i.map(i,t.changes));let r=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),s=c(t.state);if(s>o||!i||2&e&&(c(t.startState)==this.from||s<this.limit))return new O(this.source,4&e?1:0);let l=t.changes.mapPos(this.limit);return function(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return"function"==typeof t?t(r,n,i,e):u(t,!0).test(r)}(i.validFor,t.state,r,o)?new L(this.source,this.explicit,l,i,r,o):i.update&&(i=i.update(i,r,o,new a(t.state,s,!1)))?new L(this.source,this.explicit,l,i,i.from,null!==(n=i.to)&&void 0!==n?n:c(t.state)):new O(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new L(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new O(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}const I=i.Pe.define({map:(t,e)=>t.map((t=>t.map(e)))}),R=i.Pe.define(),V=i.sU.define({create:()=>T.start(),update:(t,e)=>t.update(e),provide:t=>[r.DK.from(t,(t=>t.tooltip)),r.Lz.contentAttributes.from(t,(t=>t.attrs))]});function N(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(V).active.find((t=>t.source==e.source));return r instanceof L&&("string"==typeof n?t.dispatch(Object.assign(Object.assign({},function(t,e,n,r){let{main:o}=t.selection,a=n-o.from,s=r-o.from;return Object.assign(Object.assign({},t.changeByRange((l=>{if(l!=o&&n!=r&&t.sliceDoc(l.from+a,l.from+s)!=t.sliceDoc(n,r))return{range:l};let c=t.toText(e);return{changes:{from:l.from+a,to:r==o.from?l.to:l.from+s,insert:c},range:i.OF.cursor(l.from+a+c.length)}}))),{scrollIntoView:!0,userEvent:"input.complete"})}(t.state,n,r.from,r.to)),{annotations:h.of(e.completion)})):n(t,e.completion,r.from,r.to),!0)}const F=k(V,N);function B(t,e="option"){return n=>{let i=n.state.field(V,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(y).interactionDelay)return!1;let o,a=1;"page"==e&&(o=(0,r.Eg)(n,i.open.tooltip))&&(a=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,l=i.open.selected>-1?i.open.selected+a*(t?1:-1):t?0:s-1;return l<0?l="page"==e?0:s-1:l>=s&&(l="page"==e?s-1:0),n.dispatch({effects:R.of(l)}),!0}}const z=t=>!!t.state.field(V,!1)&&(t.dispatch({effects:f.of(!0)}),!0);class j{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const U=r.Z9.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(V).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(V),n=t.state.facet(y);if(!t.selectionSet&&!t.docChanged&&t.startState.field(V)==e)return;let i=t.transactions.some((t=>{let e=D(t,n);return 8&e||(t.selection||t.docChanged)&&!(3&e)}));for(let e=0;e<this.running.length;e++){let n=this.running[e];if(i||n.context.abortOnDocChange&&t.docChanged||n.updates.length+t.transactions.length>50&&Date.now()-n.time>1e3){for(let t of n.context.abortListeners)try{t()}catch(t){(0,r.c_)(this.view.state,t)}n.context.abortListeners=null,this.running.splice(e--,1)}else n.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some((t=>t.effects.some((t=>t.is(f)))))&&(this.pendingStart=!0);let o=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some((t=>t.isPending&&!this.running.some((e=>e.active.source==t.source))))?setTimeout((()=>this.startUpdate()),o):-1,0!=this.composing)for(let e of t.transactions)e.isUserEvent("input.type")?this.composing=2:2==this.composing&&e.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(V);for(let t of e.active)t.isPending&&!this.running.some((e=>e.active.source==t.source))&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(y).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=c(e),i=new a(e,n,t.explicit,this.view),o=new j(t,i);this.running.push(o),Promise.resolve(t.source(i)).then((t=>{o.context.aborted||(o.done=t||null,this.scheduleAccept())}),(t=>{this.view.dispatch({effects:g.of(null)}),(0,r.c_)(this.view.state,t)}))}scheduleAccept(){this.running.every((t=>void 0!==t.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(y).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(y),i=this.view.state.field(V);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(void 0===o.done)continue;if(this.running.splice(r--,1),o.done){let i=c(o.updates.length?o.updates[0].startState:this.view.state),r=Math.min(i,o.done.from+(o.active.explicit?0:1)),a=new L(o.active.source,o.active.explicit,r,o.done,o.done.from,null!==(t=o.done.to)&&void 0!==t?t:i);for(let t of o.updates)a=a.update(t,n);if(a.hasResult()){e.push(a);continue}}let a=i.active.find((t=>t.source==o.active.source));if(a&&a.isPending)if(null==o.done){let t=new O(o.active.source,0);for(let e of o.updates)t=t.update(e,n);t.isPending||e.push(t)}else this.startQuery(a)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:I.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(V,!1);if(e&&e.tooltip&&this.view.state.facet(y).closeOnBlur){let n=e.open&&(0,r.Eg)(this.view,e.open.tooltip);n&&n.dom.contains(t.relatedTarget)||setTimeout((()=>this.view.dispatch({effects:g.of(null)})),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:f.of(!1)})),20),this.composing=0}}}),G="object"==typeof navigator&&/Win/.test(navigator.platform),$=i.Nb.highest(r.Lz.domEventHandlers({keydown(t,e){let n=e.state.field(V,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&(!G||!t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],r=n.active.find((t=>t.source==i.source)),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&N(e,i),!1}})),H=r.Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),q={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},W=i.Pe.define({map(t,e){let n=e.mapPos(t,-1,i.iR.TrackAfter);return null==n?void 0:n}}),Z=new class extends i.FB{};Z.startSide=1,Z.endSide=-1;const Y=i.sU.define({create:()=>i.om.empty,update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:t=>t>=n.from&&t<=n.to})}for(let n of e.effects)n.is(W)&&(t=t.update({add:[Z.range(n.value,n.value+1)]}));return t}});function K(){return[et,Y]}const X="()[]{}<>«»»«［］｛｝";function J(t){for(let e=0;e<16;e+=2)if(X.charCodeAt(e)==t)return X.charAt(e+1);return(0,i.MK)(t<128?t:t+1)}function Q(t,e){return t.languageDataAt("closeBrackets",e)[0]||q}const tt="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),et=r.Lz.inputHandler.of(((t,e,n,r)=>{if((tt?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let o=t.state.selection.main;if(r.length>2||2==r.length&&1==(0,i.Fh)((0,i.vS)(r,0))||e!=o.from||n!=o.to)return!1;let a=function(t,e){let n=Q(t,t.selection.main.head),r=n.brackets||q.brackets;for(let o of r){let a=J((0,i.vS)(o,0));if(e==o)return a==o?st(t,o,r.indexOf(o+o+o)>-1,n):ot(t,o,a,n.before||q.before);if(e==a&&it(t,t.selection.main.from))return at(t,0,a)}return null}(t.state,r);return!!a&&(t.dispatch(a),!0)})),nt=[{key:"Backspace",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Q(t,t.selection.main.head).brackets||q.brackets,r=null,o=t.changeByRange((e=>{if(e.empty){let r=function(t,e){let n=t.sliceString(e-2,e);return(0,i.Fh)((0,i.vS)(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let o of n)if(o==r&&rt(t.doc,e.head)==J((0,i.vS)(o,0)))return{changes:{from:e.head-o.length,to:e.head+o.length},range:i.OF.cursor(e.head-o.length)}}return{range:r=e}}));return r||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function it(t,e){let n=!1;return t.field(Y).between(0,t.doc.length,(t=>{t==e&&(n=!0)})),n}function rt(t,e){let n=t.sliceString(e,e+2);return n.slice(0,(0,i.Fh)((0,i.vS)(n,0)))}function ot(t,e,n,r){let o=null,a=t.changeByRange((a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:W.of(a.to+e.length),range:i.OF.range(a.anchor+e.length,a.head+e.length)};let s=rt(t.doc,a.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:e+n,from:a.head},effects:W.of(a.head+e.length),range:i.OF.cursor(a.head+e.length)}:{range:o=a}}));return o?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function at(t,e,n){let r=null,o=t.changeByRange((e=>e.empty&&rt(t.doc,e.head)==n?{changes:{from:e.head,to:e.head+n.length,insert:n},range:i.OF.cursor(e.head+n.length)}:r={range:e}));return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function st(t,e,n,r){let a=r.stringPrefixes||q.stringPrefixes,s=null,l=t.changeByRange((r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:e,from:r.to}],effects:W.of(r.to+e.length),range:i.OF.range(r.anchor+e.length,r.head+e.length)};let l,c=r.head,u=rt(t.doc,c);if(u==e){if(lt(t,c))return{changes:{insert:e+e,from:c},effects:W.of(c+e.length),range:i.OF.cursor(c+e.length)};if(it(t,c)){let r=n&&t.sliceDoc(c,c+3*e.length)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+r.length,insert:r},range:i.OF.cursor(c+r.length)}}}else{if(n&&t.sliceDoc(c-2*e.length,c)==e+e&&(l=ct(t,c-2*e.length,a))>-1&&lt(t,l))return{changes:{insert:e+e+e+e,from:c},effects:W.of(c+e.length),range:i.OF.cursor(c+e.length)};if(t.charCategorizer(c)(u)!=i.Je.Word&&ct(t,c,a)>-1&&!function(t,e,n,i){let r=(0,o.mv)(t).resolveInner(e,-1),a=i.reduce(((t,e)=>Math.max(t,e.length)),0);for(let o=0;o<5;o++){let o=t.sliceDoc(r.from,Math.min(r.to,r.from+n.length+a)),s=o.indexOf(n);if(!s||s>-1&&i.indexOf(o.slice(0,s))>-1){let e=r.firstChild;for(;e&&e.from==r.from&&e.to-e.from>n.length+s;){if(t.sliceDoc(e.to-n.length,e.to)==n)return!1;e=e.firstChild}return!0}let l=r.to==e&&r.parent;if(!l)break;r=l}return!1}(t,c,e,a))return{changes:{insert:e+e,from:c},effects:W.of(c+e.length),range:i.OF.cursor(c+e.length)}}return{range:s=r}}));return s?null:t.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function lt(t,e){let n=(0,o.mv)(t).resolveInner(e+1);return n.parent&&n.from==e}function ct(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=i.Je.Word)return e;for(let o of n){let n=e-o.length;if(t.sliceDoc(n,e)==o&&r(t.sliceDoc(n-1,n))!=i.Je.Word)return n}return-1}function ut(t={}){return[$,V,y.of(t),U,dt,H]}const ht=[{key:"Ctrl-Space",run:z},{mac:"Alt-`",run:z},{key:"Escape",run:t=>{let e=t.state.field(V,!1);return!(!e||!e.active.some((t=>0!=t.state))||(t.dispatch({effects:g.of(null)}),0))}},{key:"ArrowDown",run:B(!0)},{key:"ArrowUp",run:B(!1)},{key:"PageDown",run:B(!0,"page")},{key:"PageUp",run:B(!1,"page")},{key:"Enter",run:t=>{let e=t.state.field(V,!1);return!(t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(y).interactionDelay)&&N(t,e.open.options[e.open.selected])}}],dt=i.Nb.highest(r.w4.computeN([y],(t=>t.facet(y).defaultKeymap?[ht]:[])))},45230:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>It,b6:()=>w,cL:()=>N,pw:()=>Lt});var i=n(6585),r=n(1371),o=n(15874),a=n(90365);function s(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return!!r&&(i(n.update(r)),!0)}}const l=s(f,0),c=s(p,0),u=s(((t,e)=>p(t,e,function(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}(e))),0);function h(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const d=50;function p(t,e,n=e.selection.ranges){let i=n.map((t=>h(e,t.from).block));if(!i.every((t=>t)))return null;let r=n.map(((t,n)=>function(t,{open:e,close:n},i,r){let o,a,s=t.sliceDoc(i-d,i),l=t.sliceDoc(r,r+d),c=/\s*$/.exec(s)[0].length,u=/^\s*/.exec(l)[0].length,h=s.length-c;if(s.slice(h-e.length,h)==e&&l.slice(u,u+n.length)==n)return{open:{pos:i-c,margin:c&&1},close:{pos:r+u,margin:u&&1}};r-i<=2*d?o=a=t.sliceDoc(i,r):(o=t.sliceDoc(i,i+d),a=t.sliceDoc(r-d,r));let p=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(a)[0].length,g=a.length-f-n.length;return o.slice(p,p+e.length)==e&&a.slice(g,g+n.length)==n?{open:{pos:i+p+e.length,margin:/\s/.test(o.charAt(p+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(a.charAt(g-1))?1:0}}:null}(e,i[n],t.from,t.to)));if(2!=t&&!r.every((t=>t)))return{changes:e.changes(n.map(((t,e)=>r[e]?[]:[{from:t.from,insert:i[e].open+" "},{from:t.to,insert:" "+i[e].close}])))};if(1!=t&&r.some((t=>t))){let t=[];for(let e,n=0;n<r.length;n++)if(e=r[n]){let r=i[n],{open:o,close:a}=e;t.push({from:o.pos-r.open.length,to:o.pos+o.margin},{from:a.pos-a.margin,to:a.pos+r.close.length})}return{changes:t}}return null}function f(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:t,to:o}of n){let n=i.length,a=1e9,s=h(e,t).line;if(s){for(let n=t;n<=o;){let l=e.doc.lineAt(n);if(l.from>r&&(t==o||o>l.from)){r=l.from;let t=/^\s*/.exec(l.text)[0].length,e=t==l.length,n=l.text.slice(t,t+s.length)==s?t:-1;t<l.text.length&&t<a&&(a=t),i.push({line:l,comment:n,token:s,indent:t,empty:e,single:!1})}n=l.to+1}if(a<1e9)for(let t=n;t<i.length;t++)i[t].indent<i[t].line.text.length&&(i[t].indent=a);i.length==n+1&&(i[n].single=!0)}}if(2!=t&&i.some((t=>t.comment<0&&(!t.empty||t.single)))){let t=[];for(let{line:e,token:n,indent:r,empty:o,single:a}of i)!a&&o||t.push({from:e.from+r,insert:n+" "});let n=e.changes(t);return{changes:n,selection:e.selection.map(n,1)}}if(1!=t&&i.some((t=>t.comment>=0))){let t=[];for(let{line:e,comment:n,token:r}of i)if(n>=0){let i=e.from+n,o=i+r.length;" "==e.text[o-e.from]&&o++,t.push({from:i,to:o})}return{changes:t}}return null}const g=i.YH.define(),m=i.YH.define(),v=i.sj.define(),y=i.sj.define({combine:t=>(0,i.QR)(t,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(n,i)=>t(n,i)||e(n,i)})}),b=i.sU.define({create:()=>V.empty,update(t,e){let n=e.state.facet(y),r=e.annotation(g);if(r){let i=T.fromTransaction(e,r.selection),o=r.side,a=0==o?t.undone:t.done;return a=i?E(a,a.length,n.minDepth,i):D(a,e.startState.selection),new V(0==o?r.rest:a,0==o?a:r.rest)}let o=e.annotation(m);if("full"!=o&&"before"!=o||(t=t.isolate()),!1===e.annotation(i.ZX.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);let a=T.fromTransaction(e),s=e.annotation(i.ZX.time),l=e.annotation(i.ZX.userEvent);return a?t=t.addChanges(a,s,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,l,n.newGroupDelay)),"full"!=o&&"after"!=o||(t=t.isolate()),t},toJSON:t=>({done:t.done.map((t=>t.toJSON())),undone:t.undone.map((t=>t.toJSON()))}),fromJSON:t=>new V(t.done.map(T.fromJSON),t.undone.map(T.fromJSON))});function w(t={}){return[b,y.of(t),r.Lz.domEventHandlers({beforeinput(t,e){let n="historyUndo"==t.inputType?x:"historyRedo"==t.inputType?k:null;return!!n&&(t.preventDefault(),n(e))}})]}function S(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(b,!1);if(!r)return!1;let o=r.pop(t,n,e);return!!o&&(i(o),!0)}}const x=S(0,!1),k=S(1,!1),C=S(0,!0),M=S(1,!0);class T{constructor(t,e,n,i,r){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(t){return new T(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((t=>t.toJSON()))}}static fromJSON(t){return new T(t.changes&&i.VR.fromJSON(t.changes),[],t.mapped&&i.Gu.fromJSON(t.mapped),t.startSelection&&i.OF.fromJSON(t.startSelection),t.selectionsAfter.map(i.OF.fromJSON))}static fromTransaction(t,e){let n=_;for(let e of t.startState.facet(v)){let i=e(t);i.length&&(n=n.concat(i))}return!n.length&&t.changes.empty?null:new T(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,_)}static selection(t){return new T(void 0,_,void 0,void 0,t)}}function E(t,e,n,i){let r=e+1>n+20?e-n-1:0,o=t.slice(r,e);return o.push(i),o}function A(t,e){return t.length?e.length?t.concat(e):t:e}const _=[],P=200;function D(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-P));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),E(t,t.length-1,1e9,n.setSelAfter(i)))}return[T.selection([e])]}function O(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function L(t,e){if(!t.length)return t;let n=t.length,i=_;for(;n;){let r=I(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let e=t.slice(0,n);return e[n-1]=r,e}e=r.mapped,n--,i=r.selectionsAfter}return i.length?[T.selection(i)]:_}function I(t,e,n){let r=A(t.selectionsAfter.length?t.selectionsAfter.map((t=>t.map(e))):_,n);if(!t.changes)return T.selection(r);let o=t.changes.map(e),a=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(a):a;return new T(o,i.Pe.mapEffects(t.effects,e),s,t.startSelection.map(a),r)}const R=/^(input\.type|delete)($|\.)/;class V{constructor(t,e,n=0,i=void 0){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new V(this.done,this.undone):this}addChanges(t,e,n,r,o){let a=this.done,s=a[a.length-1];return a=s&&s.changes&&!s.changes.empty&&t.changes&&(!n||R.test(n))&&(!s.selectionsAfter.length&&e-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,function(t,e){let n=[],i=!1;return t.iterChangedRanges(((t,e)=>n.push(t,e))),e.iterChangedRanges(((t,e,r,o)=>{for(let t=0;t<n.length;){let e=n[t++],a=n[t++];o>=e&&r<=a&&(i=!0)}})),i}(s.changes,t.changes))||"input.type.compose"==n)?E(a,a.length-1,r.minDepth,new T(t.changes.compose(s.changes),A(i.Pe.mapEffects(t.effects,s.changes),s.effects),s.mapped,s.startSelection,_)):E(a,a.length,r.minDepth,t),new V(a,_,e,n)}addSelection(t,e,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:_;return r.length>0&&e-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(o=r[r.length-1],a=t,o.ranges.length==a.ranges.length&&0===o.ranges.filter(((t,e)=>t.empty!=a.ranges[e].empty)).length)?this:new V(D(this.done,t),this.undone,e,n);var o,a}addMapping(t){return new V(L(this.done,t),L(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let i=0==t?this.done:this.undone;if(0==i.length)return null;let r=i[i.length-1],o=r.selectionsAfter[0]||e.selection;if(n&&r.selectionsAfter.length)return e.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:g.of({side:t,rest:O(i),selection:o}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let n=1==i.length?_:i.slice(0,i.length-1);return r.mapped&&(n=L(n,r.mapped)),e.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:g.of({side:t,rest:n,selection:o}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}V.empty=new V(_,_);const N=[{key:"Mod-z",run:x,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:k,preventDefault:!0},{linux:"Ctrl-Shift-z",run:k,preventDefault:!0},{key:"Mod-u",run:C,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:M,preventDefault:!0}];function F(t,e){return i.OF.create(t.ranges.map(e),t.mainIndex)}function B(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function z({state:t,dispatch:e},n){let i=F(t.selection,n);return!i.eq(t.selection,!0)&&(e(B(t,i)),!0)}function j(t,e){return i.OF.cursor(e?t.to:t.from)}function U(t,e){return z(t,(n=>n.empty?t.moveByChar(n,e):j(n,e)))}function G(t){return t.textDirectionAt(t.state.selection.main.head)==r.OP.LTR}const $=t=>U(t,!G(t)),H=t=>U(t,G(t));function q(t,e){return z(t,(n=>n.empty?t.moveByGroup(n,e):j(n,e)))}function W(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Z(t,e,n){let r,s,l=(0,o.mv)(t).resolveInner(e.head),c=n?a.uY.closedBy:a.uY.openedBy;for(let i=e.head;;){let e=n?l.childAfter(i):l.childBefore(i);if(!e)break;W(t,e,c)?l=e:i=n?e.to:e.from}return s=l.type.prop(c)&&(r=n?(0,o.jU)(t,l.from,1):(0,o.jU)(t,l.to,-1))&&r.matched?n?r.end.to:r.end.from:n?l.to:l.from,i.OF.cursor(s,n?-1:1)}function Y(t,e){return z(t,(n=>{if(!n.empty)return j(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)}))}"undefined"!=typeof Intl&&Intl.Segmenter;const K=t=>Y(t,!1),X=t=>Y(t,!0);function J(t){let e,n=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,i=0,o=0;if(n){for(let e of t.state.facet(r.Lz.scrollMargins)){let n=e(t);(null==n?void 0:n.top)&&(i=Math.max(null==n?void 0:n.top,i)),(null==n?void 0:n.bottom)&&(o=Math.max(null==n?void 0:n.bottom,o))}e=t.scrollDOM.clientHeight-i-o}else e=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:o,selfScroll:n,height:Math.max(t.defaultLineHeight,e-5)}}function Q(t,e){let n,i=J(t),{state:o}=t,a=F(o.selection,(n=>n.empty?t.moveVertically(n,e,i.height):j(n,e)));if(a.eq(o.selection))return!1;if(i.selfScroll){let e=t.coordsAtPos(o.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),l=s.top+i.marginTop,c=s.bottom-i.marginBottom;e&&e.top>l&&e.bottom<c&&(n=r.Lz.scrollIntoView(a.main.head,{y:"start",yMargin:e.top-l}))}return t.dispatch(B(o,a),{effects:n}),!0}const tt=t=>Q(t,!1),et=t=>Q(t,!0);function nt(t,e,n){let r=t.lineBlockAt(e.head),o=t.moveToLineBoundary(e,n);if(o.head==e.head&&o.head!=(n?r.to:r.from)&&(o=t.moveToLineBoundary(e,n,!1)),!n&&o.head==r.from&&r.length){let n=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&e.head!=r.from+n&&(o=i.OF.cursor(r.from+n))}return o}function it(t,e){let n=F(t.state.selection,(t=>{let n=e(t);return i.OF.range(t.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(t.state.selection)&&(t.dispatch(B(t.state,n)),!0)}function rt(t,e){return it(t,(n=>t.moveByChar(n,e)))}const ot=t=>rt(t,!G(t)),at=t=>rt(t,G(t));function st(t,e){return it(t,(n=>t.moveByGroup(n,e)))}function lt(t,e){return it(t,(n=>t.moveVertically(n,e)))}const ct=t=>lt(t,!1),ut=t=>lt(t,!0);function ht(t,e){return it(t,(n=>t.moveVertically(n,e,J(t).height)))}const dt=t=>ht(t,!1),pt=t=>ht(t,!0),ft=({state:t,dispatch:e})=>(e(B(t,{anchor:0})),!0),gt=({state:t,dispatch:e})=>(e(B(t,{anchor:t.doc.length})),!0),mt=({state:t,dispatch:e})=>(e(B(t,{anchor:t.selection.main.anchor,head:0})),!0),vt=({state:t,dispatch:e})=>(e(B(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0);function yt(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:o}=t,a=o.changeByRange((r=>{let{from:o,to:a}=r;if(o==a){let i=e(r);i<o?(n="delete.backward",i=bt(t,i,!1)):i>o&&(n="delete.forward",i=bt(t,i,!0)),o=Math.min(o,i),a=Math.max(a,i)}else o=bt(t,o,!1),a=bt(t,a,!0);return o==a?{range:r}:{changes:{from:o,to:a},range:i.OF.cursor(o,o<r.head?-1:1)}}));return!a.changes.empty&&(t.dispatch(o.update(a,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?r.Lz.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function bt(t,e,n){if(t instanceof r.Lz)for(let i of t.state.facet(r.Lz.atomicRanges).map((e=>e(t))))i.between(e,e,((t,i)=>{t<e&&i>e&&(e=n?i:t)}));return e}const wt=(t,e,n)=>yt(t,(r=>{let a,s,l=r.from,{state:c}=t,u=c.doc.lineAt(l);if(n&&!e&&l>u.from&&l<u.from+200&&!/[^ \t]/.test(a=u.text.slice(0,l-u.from))){if("\t"==a[a.length-1])return l-1;let t=(0,i.y$)(a,c.tabSize)%(0,o.tp)(c)||(0,o.tp)(c);for(let e=0;e<t&&" "==a[a.length-1-e];e++)l--;s=l}else s=(0,i.zK)(u.text,l-u.from,e,e)+u.from,s==l&&u.number!=(e?c.doc.lines:1)?s+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(u.text.slice(s-u.from,l-u.from))&&(s=(0,i.zK)(u.text,s-u.from,!1,!1)+u.from);return s})),St=t=>wt(t,!1,!0),xt=t=>wt(t,!0,!1),kt=(t,e)=>yt(t,(n=>{let r=n.head,{state:o}=t,a=o.doc.lineAt(r),s=o.charCategorizer(r);for(let t=null;;){if(r==(e?a.to:a.from)){r==n.head&&a.number!=(e?o.doc.lines:1)&&(r+=e?1:-1);break}let l=(0,i.zK)(a.text,r-a.from,e)+a.from,c=a.text.slice(Math.min(r,l)-a.from,Math.max(r,l)-a.from),u=s(c);if(null!=t&&u!=t)break;" "==c&&r==n.head||(t=u),r=l}return r})),Ct=t=>kt(t,!1);function Mt(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),o=t.doc.lineAt(i.to);if(i.empty||i.to!=o.from||(o=t.doc.lineAt(i.to-1)),n>=r.number){let t=e[e.length-1];t.to=o.to,t.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});n=o.number+1}return e}function Tt(t,e,n){if(t.readOnly)return!1;let r=[],o=[];for(let e of Mt(t)){if(n?e.to==t.doc.length:0==e.from)continue;let a=t.doc.lineAt(n?e.to+1:e.from-1),s=a.length+1;if(n){r.push({from:e.to,to:a.to},{from:e.from,insert:a.text+t.lineBreak});for(let n of e.ranges)o.push(i.OF.range(Math.min(t.doc.length,n.anchor+s),Math.min(t.doc.length,n.head+s)))}else{r.push({from:a.from,to:e.from},{from:e.to,insert:t.lineBreak+a.text});for(let t of e.ranges)o.push(i.OF.range(t.anchor-s,t.head-s))}}return!!r.length&&(e(t.update({changes:r,scrollIntoView:!0,selection:i.OF.create(o,t.selection.mainIndex),userEvent:"move.line"})),!0)}function Et(t,e,n){if(t.readOnly)return!1;let i=[];for(let e of Mt(t))n?i.push({from:e.from,insert:t.doc.slice(e.from,e.to)+t.lineBreak}):i.push({from:e.to,insert:t.lineBreak+t.doc.slice(e.from,e.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const At=_t(!1);function _t(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange((n=>{let{from:r,to:s}=n,l=e.doc.lineAt(r),c=!t&&r==s&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n,i=(0,o.mv)(t).resolveInner(e),r=i.childBefore(e),s=i.childAfter(e);return r&&s&&r.to<=e&&s.from>=e&&(n=r.type.prop(a.uY.closedBy))&&n.indexOf(s.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(s.from).from&&!/\S/.test(t.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}(e,r);t&&(r=s=(s<=l.to?l:e.doc.lineAt(s)).to);let u=new o.KB(e,{simulateBreak:r,simulateDoubleBreak:!!c}),h=(0,o._v)(u,r);for(null==h&&(h=(0,i.y$)(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;c?({from:r,to:s}=c):r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let d=["",(0,o.EI)(e,h)];return c&&d.push((0,o.EI)(e,u.lineIndent(l.from,-1))),{changes:{from:r,to:s,insert:i.EY.of(d)},range:i.OF.cursor(r+1+d[1].length)}}));return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Pt(t,e){let n=-1;return t.changeByRange((r=>{let o=[];for(let i=r.from;i<=r.to;){let a=t.doc.lineAt(i);a.number>n&&(r.empty||r.to>a.from)&&(e(a,o,r),n=a.number),i=a.to+1}let a=t.changes(o);return{changes:o,range:i.OF.range(a.mapPos(r.anchor,1),a.mapPos(r.head,1))}}))}const Dt=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Pt(t,((e,n)=>{n.push({from:e.from,insert:t.facet(o.Xt)})})),{userEvent:"input.indent"})),!0),Ot=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Pt(t,((e,n)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let a=(0,i.y$)(r,t.tabSize),s=0,l=(0,o.EI)(t,Math.max(0,a-(0,o.tp)(t)));for(;s<r.length&&s<l.length&&r.charCodeAt(s)==l.charCodeAt(s);)s++;n.push({from:e.from+s,to:e.from+r.length,insert:l.slice(s)})})),{userEvent:"delete.dedent"})),!0),Lt=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>z(t,(e=>Z(t.state,e,!G(t)))),shift:t=>it(t,(e=>Z(t.state,e,!G(t))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>z(t,(e=>Z(t.state,e,G(t)))),shift:t=>it(t,(e=>Z(t.state,e,G(t))))},{key:"Alt-ArrowUp",run:({state:t,dispatch:e})=>Tt(t,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:t,dispatch:e})=>Et(t,e,!1)},{key:"Alt-ArrowDown",run:({state:t,dispatch:e})=>Tt(t,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:t,dispatch:e})=>Et(t,e,!0)},{key:"Escape",run:({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=i.OF.create([n.main]):n.main.empty||(r=i.OF.create([i.OF.cursor(n.main.head)])),!!r&&(e(B(t,r)),!0)}},{key:"Mod-Enter",run:_t(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:t,dispatch:e})=>{let n=Mt(t).map((({from:e,to:n})=>i.OF.range(e,Math.min(n+1,t.doc.length))));return e(t.update({selection:i.OF.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:t,dispatch:e})=>{let n=F(t.selection,(e=>{let n=(0,o.mv)(t),r=n.resolveStack(e.from,1);if(e.empty){let t=n.resolveStack(e.from,-1);t.node.from>=r.node.from&&t.node.to<=r.node.to&&(r=t)}for(let t=r;t;t=t.next){let{node:n}=t;if((n.from<e.from&&n.to>=e.to||n.to>e.to&&n.from<=e.from)&&t.next)return i.OF.range(n.to,n.from)}return e}));return!n.eq(t.selection)&&(e(B(t,n)),!0)},preventDefault:!0},{key:"Mod-[",run:Ot},{key:"Mod-]",run:Dt},{key:"Mod-Alt-\\",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new o.KB(t,{overrideIndentation:t=>{let e=n[t];return null==e?-1:e}}),r=Pt(t,((e,r,a)=>{let s=(0,o._v)(i,e.from);if(null==s)return;/\S/.test(e.text)||(s=0);let l=/^\s*/.exec(e.text)[0],c=(0,o.EI)(t,s);(l!=c||a.from<e.from+l.length)&&(n[e.from]=s,r.push({from:e.from,to:e.from+l.length,insert:c}))}));return r.changes.empty||e(t.update(r,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Mt(e).map((({from:t,to:n})=>(t>0?t--:n<e.doc.length&&n++,{from:t,to:n})))),i=F(e.selection,(e=>{let n;if(t.lineWrapping){let i=t.lineBlockAt(e.head),r=t.coordsAtPos(e.head,e.assoc||1);r&&(n=i.bottom+t.documentTop-r.bottom+t.defaultLineHeight/2)}return t.moveVertically(e,!0,n)})).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:t,dispatch:e})=>function(t,e,n){let r=!1,a=F(t.selection,(e=>{let a=(0,o.jU)(t,e.head,-1)||(0,o.jU)(t,e.head,1)||e.head>0&&(0,o.jU)(t,e.head-1,1)||e.head<t.doc.length&&(0,o.jU)(t,e.head+1,-1);if(!a||!a.end)return e;r=!0;let s=a.start.from==e.head?a.end.to:a.end.from;return n?i.OF.range(e.anchor,s):i.OF.cursor(s)}));return!!r&&(e(B(t,a)),!0)}(t,e,!1)},{key:"Mod-/",run:t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=h(t.state,n.from);return i.line?l(t):!!i.block&&u(t)}},{key:"Alt-A",run:c},{key:"Ctrl-m",mac:"Shift-Alt-m",run:t=>(t.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:$,shift:ot,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>q(t,!G(t)),shift:t=>st(t,!G(t)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:t=>z(t,(e=>nt(t,e,!G(t)))),shift:t=>it(t,(e=>nt(t,e,!G(t)))),preventDefault:!0},{key:"ArrowRight",run:H,shift:at,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>q(t,G(t)),shift:t=>st(t,G(t)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:t=>z(t,(e=>nt(t,e,G(t)))),shift:t=>it(t,(e=>nt(t,e,G(t)))),preventDefault:!0},{key:"ArrowUp",run:K,shift:ct,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ft,shift:mt},{mac:"Ctrl-ArrowUp",run:tt,shift:dt},{key:"ArrowDown",run:X,shift:ut,preventDefault:!0},{mac:"Cmd-ArrowDown",run:gt,shift:vt},{mac:"Ctrl-ArrowDown",run:et,shift:pt},{key:"PageUp",run:tt,shift:dt},{key:"PageDown",run:et,shift:pt},{key:"Home",run:t=>z(t,(e=>nt(t,e,!1))),shift:t=>it(t,(e=>nt(t,e,!1))),preventDefault:!0},{key:"Mod-Home",run:ft,shift:mt},{key:"End",run:t=>z(t,(e=>nt(t,e,!0))),shift:t=>it(t,(e=>nt(t,e,!0))),preventDefault:!0},{key:"Mod-End",run:gt,shift:vt},{key:"Enter",run:At,shift:At},{key:"Mod-a",run:({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:St,shift:St},{key:"Delete",run:xt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ct},{key:"Mod-Delete",mac:"Alt-Delete",run:t=>kt(t,!0)},{mac:"Mod-Backspace",run:t=>yt(t,(e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}))},{mac:"Mod-Delete",run:t=>yt(t,(e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}))}].concat([{key:"Ctrl-b",run:$,shift:ot,preventDefault:!0},{key:"Ctrl-f",run:H,shift:at},{key:"Ctrl-p",run:K,shift:ct},{key:"Ctrl-n",run:X,shift:ut},{key:"Ctrl-a",run:t=>z(t,(e=>i.OF.cursor(t.lineBlockAt(e.head).from,1))),shift:t=>it(t,(e=>i.OF.cursor(t.lineBlockAt(e.head).from)))},{key:"Ctrl-e",run:t=>z(t,(e=>i.OF.cursor(t.lineBlockAt(e.head).to,-1))),shift:t=>it(t,(e=>i.OF.cursor(t.lineBlockAt(e.head).to)))},{key:"Ctrl-d",run:xt},{key:"Ctrl-h",run:St},{key:"Ctrl-k",run:t=>yt(t,(e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}))},{key:"Ctrl-Alt-h",run:Ct},{key:"Ctrl-o",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:i.EY.of(["",""])},range:i.OF.cursor(t.from)})));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,r=t.doc.lineAt(n),o=n==r.from?n-1:(0,i.zK)(r.text,n-r.from,!1)+r.from,a=n==r.to?n+1:(0,i.zK)(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:a,insert:t.doc.slice(n,a).append(t.doc.slice(o,n))},range:i.OF.cursor(a)}}));return!n.changes.empty&&(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:et}].map((t=>({mac:t.key,run:t.run,shift:t.shift}))))),It={key:"Tab",run:Dt,shift:Ot}},15874:(t,e,n)=>{"use strict";n.d(e,{EI:()=>T,KB:()=>A,Lv:()=>ot,SG:()=>kt,WD:()=>V,Xt:()=>C,Zt:()=>ft,_v:()=>E,f7:()=>K,jU:()=>Et,mv:()=>p,tp:()=>M,y9:()=>ht});var i,r=n(90365),o=n(6585),a=n(1371),s=n(43720),l=n(97417);const c=new r.uY,u=new r.uY;class h{constructor(t,e,n=[],i=""){this.data=t,this.name=i,o.$t.prototype.hasOwnProperty("tree")||Object.defineProperty(o.$t.prototype,"tree",{get(){return p(this)}}),this.parser=e,this.extension=[x.of(this),o.$t.languageData.of(((t,e,n)=>{let i=d(t,e,n),r=i.type.prop(c);if(!r)return[];let o=t.facet(r),a=i.type.prop(u);if(a){let r=i.resolve(e-i.from,n);for(let e of a)if(e.test(r,t)){let n=t.facet(e.facet);return"replace"==e.type?n:n.concat(o)}}return o}))].concat(n)}isActiveAt(t,e,n=-1){return d(t,e,n).type.prop(c)==this.data}findRegions(t){let e=t.facet(x);if((null==e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],i=(t,e)=>{if(t.prop(c)==this.data)return void n.push({from:e,to:e+t.length});let o=t.prop(r.uY.mounted);if(o){if(o.tree.prop(c)==this.data){if(o.overlay)for(let t of o.overlay)n.push({from:t.from+e,to:t.to+e});else n.push({from:e,to:e+t.length});return}if(o.overlay){let t=n.length;if(i(o.tree,o.overlay[0].from+e),n.length>t)return}}for(let n=0;n<t.children.length;n++){let o=t.children[n];o instanceof r.PH&&i(o,t.positions[n]+e)}};return i(p(t),0),n}get allowsNesting(){return!0}}function d(t,e,n){let i=t.facet(x),o=p(t).topNode;if(!i||i.allowsNesting)for(let t=o;t;t=t.enter(e,n,r.Qj.ExcludeBuffers))t.type.isTop&&(o=t);return o}function p(t){let e=t.field(h.state,!1);return e?e.tree:r.PH.empty}h.setState=o.Pe.define();class f{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let g=null;class m{constructor(t,e,n=[],i,r,o,a,s){this.parser=t,this.state=e,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=a,this.scheduleOn=s,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new m(t,e,[],r.PH.empty,0,n,[],null)}startParse(){return this.parser.startParse(new f(this.state.doc),this.fragments)}work(t,e){return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=r.PH.empty&&this.isDone(null!=e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof t){let e=Date.now()+t;t=()=>Date.now()>e}for(this.parse||(this.parse=this.startParse()),null!=e&&(null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(r.rr.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!=e?e:this.state.doc.length)))return!0;this.parse=this.startParse()}if(t())return!1}}))}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((()=>{for(;!(e=this.parse.advance()););})),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(r.rr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=g;g=this;try{return t()}finally{g=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=v(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:i,treeLen:o,viewport:a,skipped:s}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges(((t,n,i,r)=>e.push({fromA:t,toA:n,fromB:i,toB:r}))),n=r.rr.applyChanges(n,e),i=r.PH.empty,o=0,a={from:t.mapPos(a.from,-1),to:t.mapPos(a.to,1)},this.skipped.length){s=[];for(let e of this.skipped){let n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);n<i&&s.push({from:n,to:i})}}}return new m(this.parser,e,n,i,o,a,s,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let e=0;e<this.skipped.length;e++){let{from:n,to:i}=this.skipped[e];n<t.to&&i>t.from&&(this.fragments=v(this.fragments,n,i),this.skipped.splice(e--,1))}return!(this.skipped.length>=e||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends r.iX{createParse(e,n,i){let o=i[0].from,a=i[i.length-1].to;return{parsedPos:o,advance(){let e=g;if(e){for(let t of i)e.tempSkipped.push(t);t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=a,new r.PH(r.Z6.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t}static get(){return g}}function v(t,e,n){return r.rr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class y{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new y(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=m.create(t.facet(x).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new y(n)}}h.state=o.sU.define({create:y.init,update(t,e){for(let t of e.effects)if(t.is(h.setState))return t.value;return e.startState.facet(x)!=e.state.facet(x)?y.init(e.state):t.apply(e)}});let b=t=>{let e=setTimeout((()=>t()),500);return()=>clearTimeout(e)};"undefined"!=typeof requestIdleCallback&&(b=t=>{let e=-1,n=setTimeout((()=>{e=requestIdleCallback(t,{timeout:400})}),100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const w="undefined"!=typeof navigator&&(null===(i=navigator.scheduling)||void 0===i?void 0:i.isInputPending)?()=>navigator.scheduling.isInputPending():null,S=a.Z9.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(h.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(h.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=b(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(h.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!w?Math.max(25,t.timeRemaining()-5):1e9),a=r.context.treeLen<i&&n.doc.length>i+1e3,s=r.context.work((()=>w&&w()||Date.now()>o),i+(a?0:1e5));this.chunkBudget-=Date.now()-e,(s||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:h.setState.of(new y(r.context))})),this.chunkBudget>0&&(!s||a)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then((()=>this.scheduleWork())).catch((t=>(0,a.c_)(this.view.state,t))).then((()=>this.workScheduled--)),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),x=o.sj.define({combine:t=>t.length?t[0]:null,enables:t=>[h.state,S,a.Lz.contentAttributes.compute([t],(e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}}))]}),k=o.sj.define(),C=o.sj.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some((t=>t!=e[0])))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function M(t){let e=t.facet(C);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function T(t,e){let n="",i=t.tabSize,r=t.facet(C)[0];if("\t"==r){for(;e>=i;)n+="\t",e-=i;r=" "}for(let t=0;t<e;t++)n+=r;return n}function E(t,e){t instanceof o.$t&&(t=new A(t));for(let n of t.state.facet(k)){let i=n(t,e);if(void 0!==i)return i}let n=p(t.state);return n.length>=e?function(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let t=[];for(let e=r;e&&(e.from!=i.node.from||e.type!=i.node.type);e=e.parent)t.push(e);for(let e=t.length-1;e>=0;e--)i={node:t[e],next:i}}return P(i,t,n)}(t,n,e):null}class A{constructor(t,e={}){this.state=t,this.options=e,this.unit=M(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:i,simulateDoubleBreak:r}=this.options;return null!=i&&i>=n.from&&i<=n.to?r&&i==t?{text:"",from:t}:(e<0?i<t:i<=t)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(t,e);return n.slice(t-i,Math.min(n.length,t+100-i))}column(t,e=1){let{text:n,from:i}=this.lineAt(t,e),r=this.countColumn(n,t-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(r+=o-this.countColumn(n,n.search(/\S|$/))),r}countColumn(t,e=t.length){return(0,o.y$)(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:i}=this.lineAt(t,e),r=this.options.overrideIndentation;if(r){let t=r(i);if(t>-1)return t}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const _=new r.uY;function P(t,e,n){for(let i=t;i;i=i.next){let t=D(i.node);if(t)return t(L.create(e,n,i))}return 0}function D(t){let e=t.type.prop(_);if(e)return e;let n,i=t.firstChild;if(i&&(n=i.type.prop(r.uY.closedBy))){let e=t.lastChild,i=e&&n.indexOf(e.name)>-1;return t=>function(t,e,n,i,r){let o=t.textAfter,a=o.match(/^\s*/)[0].length,s=i&&o.slice(a,a+i.length)==i||r==t.pos+a,l=e?function(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),a=null==r||r<=o.from?o.to:Math.min(o.to,r);for(let t=n.to;;){let r=e.childAfter(t);if(!r||r==i)return null;if(!r.type.isSkipped){if(r.from>=a)return null;let t=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+t}}t=r.to}}(t):null;return l?s?t.column(l.from):t.column(l.to):t.baseIndent+(s?0:t.unit*n)}(t,!0,1,void 0,i&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?e.from:void 0)}return null==t.parent?O:null}function O(){return 0}class L extends A{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.context=n}get node(){return this.context.node}static create(t,e,n){return new L(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let n=t.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(I(n,t))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){return P(this.context.next,this.base,this.pos)}}function I(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}const R=200;function V(){return o.$t.transactionFilter.of((t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+R)return t;let o=n.sliceString(r.from,i);if(!e.some((t=>t.test(o))))return t;let{state:a}=t,s=-1,l=[];for(let{head:t}of a.selection.ranges){let e=a.doc.lineAt(t);if(e.from==s)continue;s=e.from;let n=E(a,e.from);if(null==n)continue;let i=/^\s*/.exec(e.text)[0],r=T(a,n);i!=r&&l.push({from:e.from,to:e.from+i.length,insert:r})}return l.length?[t,{changes:l,sequential:!0}]:t}))}const N=o.sj.define(),F=new r.uY;function B(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function z(t,e,n){for(let i of t.facet(N)){let r=i(t,e,n);if(r)return r}return function(t,e,n){let i=p(t);if(i.length<n)return null;let r=null;for(let o=i.resolveStack(n,1);o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(r&&a.from<e)break;let s=a.type.prop(F);if(s&&(a.to<i.length-50||i.length==t.doc.length||!B(a))){let i=s(a,t);i&&i.from<=n&&i.from>=e&&i.to>n&&(r=i)}}return r}(t,e,n)}function j(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const U=o.Pe.define({map:j}),G=o.Pe.define({map:j});function $(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some((t=>t.from<=n&&t.to>=n))||e.push(t.lineBlockAt(n));return e}const H=o.sU.define({create:()=>a.NZ.none,update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(U)&&!W(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(J),r=i?a.NZ.replace({widget:new nt(i(e.state,n.value))}):et;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(G)&&(t=t.update({filter:(t,e)=>n.value.from!=t||n.value.to!=e,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,((t,e)=>{t<i&&e>i&&(n=!0)})),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(t,e)=>e<=i||t>=i}))}return t},provide:t=>a.Lz.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,((t,e)=>{n.push(t,e)})),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid JSON for fold state");e.push(et.range(i,r))}return a.NZ.set(e,!0)}});function q(t,e,n){var i;let r=null;return null===(i=t.field(H,!1))||void 0===i||i.between(e,n,((t,e)=>{(!r||r.from>t)&&(r={from:t,to:e})})),r}function W(t,e,n){let i=!1;return t.between(e,e,((t,r)=>{t==e&&r==n&&(i=!0)})),i}function Z(t,e){return t.field(H,!1)?e:e.concat(o.Pe.appendConfig.of(Q()))}function Y(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return a.Lz.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const K=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:t=>{for(let e of $(t)){let n=z(t.state,e.from,e.to);if(n)return t.dispatch({effects:Z(t.state,[U.of(n),Y(t,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:t=>{if(!t.state.field(H,!1))return!1;let e=[];for(let n of $(t)){let i=q(t.state,n.from,n.to);i&&e.push(G.of(i),Y(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),o=z(e,r.from,r.to);o&&n.push(U.of(o)),i=(o?t.lineBlockAt(o.to):r).to+1}return n.length&&t.dispatch({effects:Z(t.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(H,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,((t,e)=>{n.push(G.of({from:t,to:e}))})),t.dispatch({effects:n}),!0}}],X={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},J=o.sj.define({combine:t=>(0,o.QR)(t,X)});function Q(t){let e=[H,at];return t&&e.push(J.of(t)),e}function tt(t,e){let{state:n}=t,i=n.facet(J),r=e=>{let n=t.lineBlockAt(t.posAtDOM(e.target)),i=q(t.state,n.from,n.to);i&&t.dispatch({effects:G.of(i)}),e.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const et=a.NZ.replace({widget:new class extends a.xO{toDOM(t){return tt(t,null)}}});class nt extends a.xO{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return tt(t,this.value)}}const it={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class rt extends a.wJ{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function ot(t={}){let e=Object.assign(Object.assign({},it),t),n=new rt(e,!0),i=new rt(e,!1),r=a.Z9.fromClass(class{constructor(t){this.from=t.viewport.from,this.markers=this.buildMarkers(t)}update(t){(t.docChanged||t.viewportChanged||t.startState.facet(x)!=t.state.facet(x)||t.startState.field(H,!1)!=t.state.field(H,!1)||p(t.startState)!=p(t.state)||e.foldingChanged(t))&&(this.markers=this.buildMarkers(t.view))}buildMarkers(t){let e=new o.vB;for(let r of t.viewportLineBlocks){let o=q(t.state,r.from,r.to)?i:z(t.state,r.from,r.to)?n:null;o&&e.add(r.from,r.from,o)}return e.finish()}}),{domEventHandlers:s}=e;return[r,(0,a.cU)({class:"cm-foldGutter",markers(t){var e;return(null===(e=t.plugin(r))||void 0===e?void 0:e.markers)||o.om.empty},initialSpacer:()=>new rt(e,!1),domEventHandlers:Object.assign(Object.assign({},s),{click:(t,e,n)=>{if(s.click&&s.click(t,e,n))return!0;let i=q(t.state,e.from,e.to);if(i)return t.dispatch({effects:G.of(i)}),!0;let r=z(t.state,e.from,e.to);return!!r&&(t.dispatch({effects:U.of(r)}),!0)}})}),Q()]}const at=a.Lz.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class st{constructor(t,e){let n;function i(t){let e=l.G.newName();return(n||(n=Object.create(null)))["."+e]=t,e}this.specs=t;const r="string"==typeof e.all?e.all:e.all?i(e.all):void 0,o=e.scope;this.scope=o instanceof h?t=>t.prop(c)==o.data:o?t=>t==o:void 0,this.style=(0,s.az)(t.map((t=>({tag:t.tag,class:t.class||i(Object.assign({},t,{tag:null}))}))),{all:r}).style,this.module=n?new l.G(n):null,this.themeType=e.themeType}static define(t,e){return new st(t,e||{})}}const lt=o.sj.define(),ct=o.sj.define({combine:t=>t.length?[t[0]]:null});function ut(t){let e=t.facet(lt);return e.length?e:t.facet(ct)}function ht(t,e){let n,i=[pt];return t instanceof st&&(t.module&&i.push(a.Lz.styleModule.of(t.module)),n=t.themeType),(null==e?void 0:e.fallback)?i.push(ct.of(t)):n?i.push(lt.computeN([a.Lz.darkTheme],(e=>e.facet(a.Lz.darkTheme)==("dark"==n)?[t]:[]))):i.push(lt.of(t)),i}class dt{constructor(t){this.markCache=Object.create(null),this.tree=p(t.state),this.decorations=this.buildDeco(t,ut(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=p(t.state),n=ut(t.state),i=n!=ut(t.startState),{viewport:r}=t.view,o=t.changes.mapPos(this.decoratedTo,1);e.length<r.to&&!i&&e.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=o):(e!=this.tree||t.viewportChanged||i)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n),this.decoratedTo=r.to)}buildDeco(t,e){if(!e||!this.tree.length)return a.NZ.none;let n=new o.vB;for(let{from:i,to:r}of t.visibleRanges)(0,s.DM)(this.tree,e,((t,e,i)=>{n.add(t,e,this.markCache[i]||(this.markCache[i]=a.NZ.mark({class:i})))}),i,r);return n.finish()}}const pt=o.Nb.high(a.Z9.fromClass(dt,{decorations:t=>t.decorations})),ft=st.define([{tag:s._A.meta,color:"#404740"},{tag:s._A.link,textDecoration:"underline"},{tag:s._A.heading,textDecoration:"underline",fontWeight:"bold"},{tag:s._A.emphasis,fontStyle:"italic"},{tag:s._A.strong,fontWeight:"bold"},{tag:s._A.strikethrough,textDecoration:"line-through"},{tag:s._A.keyword,color:"#708"},{tag:[s._A.atom,s._A.bool,s._A.url,s._A.contentSeparator,s._A.labelName],color:"#219"},{tag:[s._A.literal,s._A.inserted],color:"#164"},{tag:[s._A.string,s._A.deleted],color:"#a11"},{tag:[s._A.regexp,s._A.escape,s._A.special(s._A.string)],color:"#e40"},{tag:s._A.definition(s._A.variableName),color:"#00f"},{tag:s._A.local(s._A.variableName),color:"#30a"},{tag:[s._A.typeName,s._A.namespace],color:"#085"},{tag:s._A.className,color:"#167"},{tag:[s._A.special(s._A.variableName),s._A.macroName],color:"#256"},{tag:s._A.definition(s._A.propertyName),color:"#00c"},{tag:s._A.comment,color:"#940"},{tag:s._A.invalid,color:"#f00"}]),gt=a.Lz.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),mt=1e4,vt="()[]{}",yt=o.sj.define({combine:t=>(0,o.QR)(t,{afterCursor:!0,brackets:vt,maxScanDistance:mt,renderMatch:St})}),bt=a.NZ.mark({class:"cm-matchingBracket"}),wt=a.NZ.mark({class:"cm-nonmatchingBracket"});function St(t){let e=[],n=t.matched?bt:wt;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const xt=[o.sU.define({create:()=>a.NZ.none,update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(yt);for(let t of e.state.selection.ranges){if(!t.empty)continue;let r=Et(e.state,t.head,-1,i)||t.head>0&&Et(e.state,t.head-1,1,i)||i.afterCursor&&(Et(e.state,t.head,1,i)||t.head<e.state.doc.length&&Et(e.state,t.head+1,-1,i));r&&(n=n.concat(i.renderMatch(r,e.state)))}return a.NZ.set(n,!0)},provide:t=>a.Lz.decorations.from(t)}),gt];function kt(t={}){return[yt.of(t),xt]}const Ct=new r.uY;function Mt(t,e,n){let i=t.prop(e<0?r.uY.openedBy:r.uY.closedBy);if(i)return i;if(1==t.name.length){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Tt(t){let e=t.type.prop(Ct);return e?e(t.node):t}function Et(t,e,n,i={}){let r=i.maxScanDistance||mt,o=i.brackets||vt,a=p(t),s=a.resolveInner(e,n);for(let t=s;t;t=t.parent){let i=Mt(t.type,n,o);if(i&&t.from<t.to){let r=Tt(t);if(r&&(n>0?e>=r.from&&e<r.to:e>r.from&&e<=r.to))return At(0,0,n,t,r,i,o)}}return function(t,e,n,i,r,o,a){let s=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=a.indexOf(s);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let t=0;!u.next().done&&t<=o;){let o=u.value;n<0&&(t+=o.length);let s=e+t*n;for(let t=n>0?0:o.length-1,e=n>0?o.length:-1;t!=e;t+=n){let e=a.indexOf(o[t]);if(!(e<0||i.resolveInner(s+t,1).type!=r))if(e%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:s+t,to:s+t+1},matched:e>>1==l>>1};h--}}n>0&&(t+=o.length)}return u.done?{start:c,matched:!1}:null}(t,e,n,a,s.type,r,o)}function At(t,e,n,i,r,o,a){let s=i.parent,l={from:r.from,to:r.to},c=0,u=null==s?void 0:s.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do{if(n<0?u.to<=i.from:u.from>=i.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to){let t=Tt(u);return{start:l,end:t?{from:t.from,to:t.to}:void 0,matched:!0}}if(Mt(u.type,n,a))c++;else if(Mt(u.type,-n,a)){if(0==c){let t=Tt(u);return{start:l,end:t&&t.from<t.to?{from:t.from,to:t.to}:void 0,matched:!1}}c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}const _t=Object.create(null),Pt=[r.Z6.none],Dt=[],Ot=Object.create(null),Lt=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Lt[t]=Rt(_t,e);function It(t,e){Dt.indexOf(t)>-1||(Dt.push(t),console.warn(e))}function Rt(t,e){let n=[];for(let i of e.split(" ")){let e=[];for(let n of i.split(".")){let i=t[n]||s._A[n];i?"function"==typeof i?e.length?e=e.map(i):It(n,`Modifier ${n} used at start of tag`):e.length?It(n,`Tag ${n} used as modifier`):e=Array.isArray(i)?i:[i]:It(n,`Unknown highlighting tag ${n}`)}for(let t of e)n.push(t)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),o=i+" "+n.map((t=>t.id)),a=Ot[o];if(a)return a.id;let l=Ot[o]=r.Z6.define({id:Pt.length,name:i,props:[(0,s.pn)({[i]:n})]});return Pt.push(l),l.id}a.OP.RTL,a.OP.LTR},51419:(t,e,n)=>{"use strict";n.d(e,{$w:()=>v});var i=n(1371),r=n(6585),o=n(93748);class a{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class s{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let o=t,a=n.facet(y).markerFilter;a&&(o=a(o,n));let c=t.slice().sort(((t,e)=>t.from-e.from||t.to-e.to)),u=new r.vB,h=[],d=0;for(let t=0;;){let e,r,o=t==c.length?null:c[t];if(!o&&!h.length)break;for(h.length?(e=d,r=h.reduce(((t,e)=>Math.min(t,e.to)),o&&o.from>e?o.from:1e8)):(e=o.from,r=o.to,h.push(o),t++);t<c.length;){let n=c[t];if(n.from!=e||!(n.to>n.from||n.to==e)){r=Math.min(n.from,r);break}h.push(n),t++,r=Math.min(n.to,r)}let a=E(h);if(h.some((t=>t.from==t.to||t.from==t.to-1&&n.doc.lineAt(t.from).to==t.from)))u.add(e,e,i.NZ.widget({widget:new S(a),diagnostics:h.slice()}));else{let t=h.reduce(((t,e)=>e.markClass?t+" "+e.markClass:t),"");u.add(e,r,i.NZ.mark({class:"cm-lintRange cm-lintRange-"+a+t,diagnostics:h.slice(),inclusiveEnd:h.some((t=>t.to>r))}))}d=r;for(let t=0;t<h.length;t++)h[t].to<=d&&h.splice(t--,1)}let p=u.finish();return new s(p,e,l(p))}}function l(t,e=null,n=0){let i=null;return t.between(n,1e9,((t,n,{spec:r})=>{if(!(e&&r.diagnostics.indexOf(e)<0))if(i){if(r.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new a(i.from,n,i.diagnostic)}else i=new a(t,n,e||r.diagnostics[0])})),i}const c=r.Pe.define(),u=r.Pe.define(),h=r.Pe.define(),d=r.sU.define({create:()=>new s(i.NZ.none,null,null),update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=l(n,t.selected.diagnostic,r)||l(n,null,r)}!n.size&&r&&e.state.facet(y).autoPanel&&(r=null),t=new s(n,r,i)}for(let n of e.effects)if(n.is(c)){let i=e.state.facet(y).autoPanel?n.value.length?k.open:null:t.panel;t=s.init(n.value,i,e.state)}else n.is(u)?t=new s(t.diagnostics,n.value?k.open:null,t.selected):n.is(h)&&(t=new s(t.diagnostics,t.panel,n.value));return t},provide:t=>[i.S7.from(t,(t=>t.panel)),i.Lz.decorations.from(t,(t=>t.diagnostics))]}),p=i.NZ.mark({class:"cm-lintRange cm-lintRange-active"});function f(t,e,n){let i,{diagnostics:r}=t.state.field(d),o=-1,a=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),((t,r,{spec:s})=>{if(e>=t&&e<=r&&(t==r||(e>t||n>0)&&(e<r||n<0)))return i=s.diagnostics,o=t,a=r,!1}));let s=t.state.facet(y).tooltipFilter;return i&&s&&(i=s(i,t.state)),i?{pos:o,end:a,above:t.state.doc.lineAt(o).to<a,create:()=>({dom:g(t,i)})}:null}function g(t,e){return(0,o.A)("ul",{class:"cm-tooltip-lint"},e.map((e=>w(t,e,!1))))}const m=t=>{let e=t.state.field(d,!1);return!(!e||!e.panel||(t.dispatch({effects:u.of(!1)}),0))},v=[{key:"Mod-Shift-m",run:t=>{let e=t.state.field(d,!1);var n,o;e&&e.panel||t.dispatch({effects:(n=t.state,o=[u.of(!0)],n.field(d,!1)?o:o.concat(r.Pe.appendConfig.of(A)))});let a=(0,i.ld)(t,k.open);return a&&a.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:t=>{let e=t.state.field(d,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!(!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)||(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),0))}}],y=r.sj.define({combine:t=>Object.assign({sources:t.map((t=>t.source)).filter((t=>null!=t))},(0,r.QR)(t.map((t=>t.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(t,e)=>t?e?n=>t(n)||e(n):t:e}))});function b(t){let e=[];if(t)t:for(let{name:n}of t){for(let t=0;t<n.length;t++){let i=n[t];if(/[a-zA-Z]/.test(i)&&!e.some((t=>t.toLowerCase()==i.toLowerCase()))){e.push(i);continue t}}e.push("")}return e}function w(t,e,n){var i;let r=n?b(e.actions):[];return(0,o.A)("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},(0,o.A)("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),null===(i=e.actions)||void 0===i?void 0:i.map(((n,i)=>{let a=!1,s=i=>{if(i.preventDefault(),a)return;a=!0;let r=l(t.state.field(d).diagnostics,e);r&&n.apply(t,r.from,r.to)},{name:c}=n,u=r[i]?c.indexOf(r[i]):-1,h=u<0?c:[c.slice(0,u),(0,o.A)("u",c.slice(u,u+1)),c.slice(u+1)];return(0,o.A)("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[i]})"`}.`},h)})),e.source&&(0,o.A)("div",{class:"cm-diagnosticSource"},e.source))}class S extends i.xO{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return(0,o.A)("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class x{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=w(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class k{constructor(t){this.view=t,this.items=[],this.list=(0,o.A)("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e=>{if(27==e.keyCode)m(this.view),this.view.focus();else if(38==e.keyCode||33==e.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==e.keyCode||34==e.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==e.keyCode)this.moveSelection(0);else if(35==e.keyCode)this.moveSelection(this.items.length-1);else if(13==e.keyCode)this.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],i=b(n.actions);for(let r=0;r<i.length;r++)if(i[r].toUpperCase().charCodeAt(0)==e.keyCode){let e=l(this.view.state.field(d).diagnostics,n);e&&n.actions[r].apply(t,e.from,e.to)}}}e.preventDefault()},onclick:t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)}}),this.dom=(0,o.A)("div",{class:"cm-panel-lint"},this.list,(0,o.A)("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>m(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(d).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(d),n=0,i=!1,r=null,o=new Set;for(t.between(0,this.view.state.doc.length,((t,a,{spec:s})=>{for(let t of s.diagnostics){if(o.has(t))continue;o.add(t);let a,s=-1;for(let e=n;e<this.items.length;e++)if(this.items[e].diagnostic==t){s=e;break}s<0?(a=new x(this.view,t),this.items.splice(n,0,a),i=!0):(a=this.items[s],s>n&&(this.items.splice(n,s-n),i=!0)),e&&a.diagnostic==e.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),r=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new x(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:t,panel:e})=>{let n=e.height/this.list.offsetHeight;t.top<e.top?this.list.scrollTop-=(e.top-t.top)/n:t.bottom>e.bottom&&(this.list.scrollTop+=(t.bottom-e.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=l(this.view.state.field(d).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:h.of(e)})}static open(t){return new k(t)}}function C(t){return function(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const M=i.Lz.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:C("#d11")},".cm-lintRange-warning":{backgroundImage:C("orange")},".cm-lintRange-info":{backgroundImage:C("#999")},".cm-lintRange-hint":{backgroundImage:C("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function T(t){return"error"==t?4:"warning"==t?3:"info"==t?2:1}function E(t){let e="hint",n=1;for(let i of t){let t=T(i.severity);t>n&&(n=t,e=i.severity)}return e}i.wJ;const A=[d,i.Lz.decorations.compute([d],(t=>{let{selected:e,panel:n}=t.field(d);return e&&n&&e.from!=e.to?i.NZ.set([p.range(e.from,e.to)]):i.NZ.none})),(0,i.Ux)(f,{hideOn:function(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(y).hideOn(t,n,i);if(null!=r)return r;let o=t.startState.doc.lineAt(e.pos);return!(!t.effects.some((t=>t.is(c)))&&!t.changes.touchesRange(o.from,Math.max(o.to,i)))}}),M]},54528:(t,e,n)=>{"use strict";n.d(e,{Eo:()=>et,gN:()=>S,jO:()=>tt,pi:()=>Q});var i=n(1371),r=n(6585),o=n(93748);const a="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class s{constructor(t,e,n=0,i=t.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,i),this.bufferStart=n,this.normalize=r?t=>r(a(t)):a,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,r.vS)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=(0,r.MK)(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,r.Fh)(t);let i=this.normalize(e);if(i.length)for(let t=0,r=n;;t++){let o=i.charCodeAt(t),a=this.match(o,r,this.bufferPos+this.bufferStart);if(t==i.length-1){if(a)return this.value=a,this;break}r==n&&t<e.length&&e.charCodeAt(t)==o&&r++}}}match(t,e,n){let i=null;for(let e=0;e<this.matches.length;e+=2){let r=this.matches[e],o=!1;this.query.charCodeAt(r)==t&&(r==this.query.length-1?i={from:this.matches[e+1],to:n}:(this.matches[e]++,o=!0)),o||(this.matches.splice(e,2),e-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?i={from:e,to:n}:this.matches.push(1,e)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}"undefined"!=typeof Symbol&&(s.prototype[Symbol.iterator]=function(){return this});const l={from:-1,to:-1,match:/.*/.exec("")},c="gm"+(null==/x/.unicode?"":"u");class u{constructor(t,e,n,i=0,r=t.length){if(this.text=t,this.to=r,this.curLine="",this.done=!1,this.value=l,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new p(t,e,n,i,r);this.re=new RegExp(e,c+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=t.iter();let o=t.lineAt(i);this.curLineStart=o.from,this.matchPos=f(t,i),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,i=n+e[0].length;if(this.matchPos=f(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,e)))return this.value={from:n,to:i,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}const h=new WeakMap;class d{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let i=h.get(t);if(!i||i.from>=n||i.to<=e){let i=new d(e,t.sliceString(e,n));return h.set(t,i),i}if(i.from==e&&i.to==n)return i;let{text:r,from:o}=i;return o>e&&(r=t.sliceString(e,o)+r,o=e),i.to<n&&(r+=t.sliceString(i.to,n)),h.set(t,new d(o,r)),new d(e,r.slice(e-o,n-o))}}class p{constructor(t,e,n,i,r){this.text=t,this.to=r,this.done=!1,this.value=l,this.matchPos=f(t,i),this.re=new RegExp(e,c+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=d.get(t,i,this.chunkEnd(i+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let t=this.flat.from+e.index,n=t+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,n,e)))return this.value={from:t,to:n,match:e},this.matchPos=f(this.text,n+(t==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=d.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function f(t,e){if(e>=t.length)return e;let n,i=t.lineAt(e);for(;e<i.to&&(n=i.text.charCodeAt(e-i.from))>=56320&&n<57344;)e++;return e}function g(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=(0,o.A)("input",{class:"cm-textfield",name:"line",value:e});function a(){let e=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!e)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,s,l,c,u]=e,h=c?+c.slice(1):0,d=l?+l:a.number;if(l&&u){let t=d/100;s&&(t=t*("-"==s?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*t)}else l&&s&&(d=d*("-"==s?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),f=r.OF.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[m.of(!1),i.Lz.scrollIntoView(f.from,{y:"center"})],selection:f}),t.focus()}return{dom:(0,o.A)("form",{class:"cm-gotoLine",onkeydown:e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({effects:m.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),a())},onsubmit:t=>{t.preventDefault(),a()}},(0,o.A)("label",t.state.phrase("Go to line"),": ",n)," ",(0,o.A)("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),(0,o.A)("button",{name:"close",onclick:()=>{t.dispatch({effects:m.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]))}}"undefined"!=typeof Symbol&&(u.prototype[Symbol.iterator]=p.prototype[Symbol.iterator]=function(){return this});const m=r.Pe.define(),v=r.sU.define({create:()=>!0,update(t,e){for(let n of e.effects)n.is(m)&&(t=n.value);return t},provide:t=>i.S7.from(t,(t=>t?g:null))}),y=i.Lz.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),b={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},w=r.sj.define({combine:t=>(0,r.QR)(t,b,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})});function S(t){let e=[T,M];return t&&e.push(w.of(t)),e}const x=i.NZ.mark({class:"cm-selectionMatch"}),k=i.NZ.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function C(t,e,n,i){return!(0!=n&&t(e.sliceDoc(n-1,n))==r.Je.Word||i!=e.doc.length&&t(e.sliceDoc(i,i+1))==r.Je.Word)}const M=i.Z9.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(w),{state:n}=t,o=n.selection;if(o.ranges.length>1)return i.NZ.none;let a,l=o.main,c=null;if(l.empty){if(!e.highlightWordAroundCursor)return i.NZ.none;let t=n.wordAt(l.head);if(!t)return i.NZ.none;c=n.charCategorizer(l.head),a=n.sliceDoc(t.from,t.to)}else{let t=l.to-l.from;if(t<e.minSelectionLength||t>200)return i.NZ.none;if(e.wholeWords){if(a=n.sliceDoc(l.from,l.to),c=n.charCategorizer(l.head),!C(c,n,l.from,l.to)||!function(t,e,n,i){return t(e.sliceDoc(n,n+1))==r.Je.Word&&t(e.sliceDoc(i-1,i))==r.Je.Word}(c,n,l.from,l.to))return i.NZ.none}else if(a=n.sliceDoc(l.from,l.to),!a)return i.NZ.none}let u=[];for(let r of t.visibleRanges){let t=new s(n.doc,a,r.from,r.to);for(;!t.next().done;){let{from:r,to:o}=t.value;if((!c||C(c,n,r,o))&&(l.empty&&r<=l.from&&o>=l.to?u.push(k.range(r,o)):(r>=l.to||o<=l.from)&&u.push(x.range(r,o)),u.length>e.maxMatches))return i.NZ.none}}return i.NZ.set(u)}},{decorations:t=>t.decorations}),T=i.Lz.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),E=r.sj.define({combine:t=>(0,r.QR)(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new nt(t),scrollToMatch:t=>i.Lz.scrollIntoView(t)})});class A{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,c),!0}catch(t){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,((t,e)=>"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"))}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new R(this):new D(this)}getCursor(t,e=0,n){let i=t.doc?t:r.$t.create({doc:t});return null==n&&(n=i.doc.length),this.regexp?O(this,i,e,n):P(this,i,e,n)}}class _{constructor(t){this.spec=t}}function P(t,e,n,i){return new s(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:t=>t.toLowerCase(),t.wholeWord?(o=e.doc,a=e.charCategorizer(e.selection.main.head),(t,e,n,i)=>((i>t||i+n.length<e)&&(i=Math.max(0,t-2),n=o.sliceString(i,Math.min(o.length,e+2))),!(a(L(n,t-i))==r.Je.Word&&a(I(n,t-i))==r.Je.Word||a(I(n,e-i))==r.Je.Word&&a(L(n,e-i))==r.Je.Word))):void 0);var o,a}class D extends _{constructor(t){super(t)}nextMatch(t,e,n){let i=P(this.spec,t,n,t.doc.length).nextOverlapping();if(i.done){let n=Math.min(t.doc.length,e+this.spec.unquoted.length);i=P(this.spec,t,0,n).nextOverlapping()}return i.done||i.value.from==e&&i.value.to==n?null:i.value}prevMatchInRange(t,e,n){for(let i=n;;){let n=Math.max(e,i-1e4-this.spec.unquoted.length),r=P(this.spec,t,n,i),o=null;for(;!r.nextOverlapping().done;)o=r.value;if(o)return o;if(n==e)return null;i-=1e4}}prevMatch(t,e,n){let i=this.prevMatchInRange(t,0,e);return i||(i=this.prevMatchInRange(t,Math.max(0,n-this.spec.unquoted.length),t.doc.length)),!i||i.from==e&&i.to==n?null:i}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let n=P(this.spec,t,0,t.doc.length),i=[];for(;!n.next().done;){if(i.length>=e)return null;i.push(n.value)}return i}highlight(t,e,n,i){let r=P(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function O(t,e,n,i){return new u(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?(o=e.charCategorizer(e.selection.main.head),(t,e,n)=>!n[0].length||(o(L(n.input,n.index))!=r.Je.Word||o(I(n.input,n.index))!=r.Je.Word)&&(o(I(n.input,n.index+n[0].length))!=r.Je.Word||o(L(n.input,n.index+n[0].length))!=r.Je.Word)):void 0},n,i);var o}function L(t,e){return t.slice((0,r.zK)(t,e,!1),e)}function I(t,e){return t.slice(e,(0,r.zK)(t,e))}class R extends _{nextMatch(t,e,n){let i=O(this.spec,t,n,t.doc.length).next();return i.done&&(i=O(this.spec,t,0,e).next()),i.done?null:i.value}prevMatchInRange(t,e,n){for(let i=1;;i++){let r=Math.max(e,n-1e4*i),o=O(this.spec,t,r,n),a=null;for(;!o.next().done;)a=o.value;if(a&&(r==e||a.from>r+10))return a;if(r==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,((e,n)=>{if("&"==n)return t.match[0];if("$"==n)return"$";for(let e=n.length;e>0;e--){let i=+n.slice(0,e);if(i>0&&i<t.match.length)return t.match[i]+n.slice(e)}return e}))}matchAll(t,e){let n=O(this.spec,t,0,t.doc.length),i=[];for(;!n.next().done;){if(i.length>=e)return null;i.push(n.value)}return i}highlight(t,e,n,i){let r=O(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}const V=r.Pe.define(),N=r.Pe.define(),F=r.sU.define({create:t=>new B(K(t).create(),null),update(t,e){for(let n of e.effects)n.is(V)?t=new B(n.value.create(),t.panel):n.is(N)&&(t=new B(t.query,n.value?Y:null));return t},provide:t=>i.S7.from(t,(t=>t.panel))});class B{constructor(t,e){this.query=t,this.panel=e}}const z=i.NZ.mark({class:"cm-searchMatch"}),j=i.NZ.mark({class:"cm-searchMatch cm-searchMatch-selected"}),U=i.Z9.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(F))}update(t){let e=t.state.field(F);(e!=t.startState.field(F)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return i.NZ.none;let{view:n}=this,o=new r.vB;for(let e=0,i=n.visibleRanges,r=i.length;e<r;e++){let{from:a,to:s}=i[e];for(;e<r-1&&s>i[e+1].from-500;)s=i[++e].to;t.highlight(n.state,a,s,((t,e)=>{let i=n.state.selection.ranges.some((n=>n.from==t&&n.to==e));o.add(t,e,i?j:z)}))}return o.finish()}},{decorations:t=>t.decorations});function G(t){return e=>{let n=e.state.field(F,!1);return n&&n.query.spec.valid?t(e,n):Q(e)}}const $=G(((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let o=r.OF.single(i.from,i.to),a=t.state.facet(E);return t.dispatch({selection:o,effects:[at(t,i),a.scrollToMatch(o.main,t)],userEvent:"select.search"}),J(t),!0})),H=G(((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,o=e.prevMatch(n,i,i);if(!o)return!1;let a=r.OF.single(o.from,o.to),s=t.state.facet(E);return t.dispatch({selection:a,effects:[at(t,o),s.scrollToMatch(a.main,t)],userEvent:"select.search"}),J(t),!0})),q=G(((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!(!n||!n.length||(t.dispatch({selection:r.OF.create(n.map((t=>r.OF.range(t.from,t.to)))),userEvent:"select.search.matches"}),0))})),W=G(((t,{query:e})=>{let{state:n}=t,{from:o,to:a}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,o,o);if(!s)return!1;let l,c,u=s,h=[],d=[];if(u.from==o&&u.to==a&&(c=n.toText(e.getReplacement(u)),h.push({from:u.from,to:u.to,insert:c}),u=e.nextMatch(n,u.from,u.to),d.push(i.Lz.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(o).number)+"."))),u){let e=0==h.length||h[0].from>=s.to?0:s.to-s.from-c.length;l=r.OF.single(u.from-e,u.to-e),d.push(at(t,u)),d.push(n.facet(E).scrollToMatch(l.main,t))}return t.dispatch({changes:h,selection:l,effects:d,userEvent:"input.replace"}),!0})),Z=G(((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map((t=>{let{from:n,to:i}=t;return{from:n,to:i,insert:e.getReplacement(t)}}));if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:i.Lz.announce.of(r),userEvent:"input.replace.all"}),!0}));function Y(t){return t.state.facet(E).createPanel(t)}function K(t,e){var n,i,r,o,a;let s=t.selection.main,l=s.empty||s.to>s.from+100?"":t.sliceDoc(s.from,s.to);if(e&&!l)return e;let c=t.facet(E);return new A({search:(null!==(n=null==e?void 0:e.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null==e?void 0:e.caseSensitive)&&void 0!==i?i:c.caseSensitive,literal:null!==(r=null==e?void 0:e.literal)&&void 0!==r?r:c.literal,regexp:null!==(o=null==e?void 0:e.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(a=null==e?void 0:e.wholeWord)&&void 0!==a?a:c.wholeWord})}function X(t){let e=(0,i.ld)(t,Y);return e&&e.dom.querySelector("[main-field]")}function J(t){let e=X(t);e&&e==t.root.activeElement&&e.select()}const Q=t=>{let e=t.state.field(F,!1);if(e&&e.panel){let n=X(t);if(n&&n!=t.root.activeElement){let i=K(t.state,e.query.spec);i.valid&&t.dispatch({effects:V.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[N.of(!0),e?V.of(K(t.state,e.query.spec)):r.Pe.appendConfig.of(lt)]});return!0},tt=t=>{let e=t.state.field(F,!1);if(!e||!e.panel)return!1;let n=(0,i.ld)(t,Y);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:N.of(!1)}),!0},et=[{key:"Mod-f",run:Q,scope:"editor search-panel"},{key:"F3",run:$,shift:H,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:$,shift:H,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:tt,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:o}=n.main,a=[],l=0;for(let e=new s(t.doc,t.sliceDoc(i,o));!e.next().done;){if(a.length>1e3)return!1;e.value.from==i&&(l=a.length),a.push(r.OF.range(e.value.from,e.value.to))}return e(t.update({selection:r.OF.create(a,l),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:t=>{let e=(0,i.ld)(t,g);if(!e){let n=[m.of(!0)];null==t.state.field(v,!1)&&n.push(r.Pe.appendConfig.of([v,y])),t.dispatch({effects:n}),e=(0,i.ld)(t,g)}return e&&e.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some((t=>t.from===t.to)))return(({state:t,dispatch:e})=>{let{selection:n}=t,i=r.OF.create(n.ranges.map((e=>t.wordAt(e.head)||r.OF.cursor(e.head))),n.mainIndex);return!i.eq(n)&&(e(t.update({selection:i})),!0)})({state:t,dispatch:e});let o=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=o)))return!1;let a=function(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),o=r&&r.from==n.from&&r.to==n.to;for(let n=!1,r=new s(t.doc,e,i[i.length-1].to);;){if(r.next(),!r.done){if(n&&i.some((t=>t.from==r.value.from)))continue;if(o){let e=t.wordAt(r.value.from);if(!e||e.from!=r.value.from||e.to!=r.value.to)continue}return r.value}if(n)return null;r=new s(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),n=!0}}(t,o);return!!a&&(e(t.update({selection:t.selection.addRange(r.OF.range(a.from,a.to),!1),effects:i.Lz.scrollIntoView(a.to)})),!0)},preventDefault:!0}];class nt{constructor(t){this.view=t;let e=this.query=t.state.field(F).query.spec;function n(t,e,n){return(0,o.A)("button",{class:"cm-button",name:t,onclick:e,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=(0,o.A)("input",{value:e.search,placeholder:it(t,"Find"),"aria-label":it(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=(0,o.A)("input",{value:e.replace,placeholder:it(t,"Replace"),"aria-label":it(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=(0,o.A)("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=(0,o.A)("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=(0,o.A)("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit}),this.dom=(0,o.A)("div",{onkeydown:t=>this.keydown(t),class:"cm-search"},[this.searchField,n("next",(()=>$(t)),[it(t,"next")]),n("prev",(()=>H(t)),[it(t,"previous")]),n("select",(()=>q(t)),[it(t,"all")]),(0,o.A)("label",null,[this.caseField,it(t,"match case")]),(0,o.A)("label",null,[this.reField,it(t,"regexp")]),(0,o.A)("label",null,[this.wordField,it(t,"by word")]),...t.state.readOnly?[]:[(0,o.A)("br"),this.replaceField,n("replace",(()=>W(t)),[it(t,"replace")]),n("replaceAll",(()=>Z(t)),[it(t,"replace all")])],(0,o.A)("button",{name:"close",onclick:()=>tt(t),"aria-label":it(t,"close"),type:"button"},["×"])])}commit(){let t=new A({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:V.of(t)}))}keydown(t){(0,i.TS)(this.view,t,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?H:$)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),W(this.view))}update(t){for(let e of t.transactions)for(let t of e.effects)t.is(V)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(E).top}}function it(t,e){return t.state.phrase(e)}const rt=30,ot=/[\s\.,:;?!]/;function at(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),o=t.state.doc.lineAt(n).to,a=Math.max(r.from,e-rt),s=Math.min(o,n+rt),l=t.state.sliceDoc(a,s);if(a!=r.from)for(let t=0;t<rt;t++)if(!ot.test(l[t+1])&&ot.test(l[t])){l=l.slice(t);break}if(s!=o)for(let t=l.length-1;t>l.length-rt;t--)if(!ot.test(l[t-1])&&ot.test(l[t])){l=l.slice(0,t);break}return i.Lz.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${r.number}.`)}const st=i.Lz.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),lt=[F,r.Nb.low(U),st]},6585:(t,e,n)=>{"use strict";n.d(e,{$t:()=>gt,EY:()=>r,FB:()=>vt,Fh:()=>v,Gu:()=>w,Je:()=>dt,MK:()=>m,Nb:()=>j,OF:()=>_,Pe:()=>rt,QR:()=>mt,VR:()=>S,YH:()=>et,ZX:()=>ot,iR:()=>b,kn:()=>It,om:()=>St,sU:()=>B,sj:()=>O,vB:()=>xt,vS:()=>g,y$:()=>Lt,zK:()=>f});var i=n(51587);class r{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){[t,e]=p(this,t,e);let i=[];return this.decompose(0,t,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(e,this.length,i,1),a.from(i,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=p(this,t,e);let n=[];return this.decompose(t,e,n,0),a.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),i=new c(this),r=new c(t);for(let t=e,o=e;;){if(i.next(t),r.next(t),t=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(o+=i.value.length,i.done||o>=n)return!0}}iter(t=1){return new c(this,t)}iterRange(t,e=this.length){return new u(this,t,e)}iterLines(t,e){let n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);let i=this.line(t).from;n=this.iterRange(i,Math.max(i,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new h(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new o(t):a.from(o.split(t,[])):r.empty}}class o extends r{constructor(t,e=function(t){let e=-1;for(let n of t)e+=n.length+1;return e}(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,i){for(let r=0;;r++){let o=this.text[r],a=i+o.length;if((e?n:a)>=t)return new d(i,a,n,o);i=a+1,n++}}decompose(t,e,n,i){let r=t<=0&&e>=this.length?this:new o(l(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&i){let t=n.pop(),e=s(r.text,t.text.slice(),0,r.length);if(e.length<=32)n.push(new o(e,t.length+r.length));else{let t=e.length>>1;n.push(new o(e.slice(0,t)),new o(e.slice(t)))}}else n.push(r)}replace(t,e,n){if(!(n instanceof o))return super.replace(t,e,n);[t,e]=p(this,t,e);let i=s(this.text,s(n.text,l(this.text,0,t)),e),r=this.length+n.length-(e-t);return i.length<=32?new o(i,r):a.from(o.split(i,[]),r)}sliceString(t,e=this.length,n="\n"){[t,e]=p(this,t,e);let i="";for(let r=0,o=0;r<=e&&o<this.text.length;o++){let a=this.text[o],s=r+a.length;r>t&&o&&(i+=n),t<s&&e>r&&(i+=a.slice(Math.max(0,t-r),e-r)),r=s+1}return i}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],i=-1;for(let r of t)n.push(r),i+=r.length+1,32==n.length&&(e.push(new o(n,i)),n=[],i=-1);return i>-1&&e.push(new o(n,i)),e}}class a extends r{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let e of t)this.lines+=e.lines}lineInner(t,e,n,i){for(let r=0;;r++){let o=this.children[r],a=i+o.length,s=n+o.lines-1;if((e?s:a)>=t)return o.lineInner(t,e,n,i);i=a+1,n=s+1}}decompose(t,e,n,i){for(let r=0,o=0;o<=e&&r<this.children.length;r++){let a=this.children[r],s=o+a.length;if(t<=s&&e>=o){let r=i&((o<=t?1:0)|(s>=e?2:0));o>=t&&s<=e&&!r?n.push(a):a.decompose(t-o,e-o,n,r)}o=s+1}}replace(t,e,n){if([t,e]=p(this,t,e),n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let o=this.children[i],s=r+o.length;if(t>=r&&e<=s){let l=o.replace(t-r,e-r,n),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let r=this.children.slice();return r[i]=l,new a(r,this.length-(e-t)+n.length)}return super.replace(r,s,l)}r=s+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){[t,e]=p(this,t,e);let i="";for(let r=0,o=0;r<this.children.length&&o<=e;r++){let a=this.children[r],s=o+a.length;o>t&&r&&(i+=n),t<s&&e>o&&(i+=a.sliceString(t-o,e-o,n)),o=s+1}return i}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof a))return 0;let n=0,[i,r,o,s]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;i+=e,r+=e){if(i==o||r==s)return n;let a=this.children[i],l=t.children[r];if(a!=l)return n+a.scanIdentical(l,e);n+=a.length+1}}static from(t,e=t.reduce(((t,e)=>t+e.length+1),-1)){let n=0;for(let e of t)n+=e.lines;if(n<32){let n=[];for(let e of t)e.flatten(n);return new o(n,e)}let i=Math.max(32,n>>5),r=i<<1,s=i>>1,l=[],c=0,u=-1,h=[];function d(t){let e;if(t.lines>r&&t instanceof a)for(let e of t.children)d(e);else t.lines>s&&(c>s||!c)?(p(),l.push(t)):t instanceof o&&c&&(e=h[h.length-1])instanceof o&&t.lines+e.lines<=32?(c+=t.lines,u+=t.length+1,h[h.length-1]=new o(e.text.concat(t.text),e.length+1+t.length)):(c+t.lines>i&&p(),c+=t.lines,u+=t.length+1,h.push(t))}function p(){0!=c&&(l.push(1==h.length?h[0]:a.from(h,u)),u=-1,c=h.length=0)}for(let e of t)d(e);return p(),1==l.length?l[0]:new a(l,e)}}function s(t,e,n=0,i=1e9){for(let r=0,o=0,a=!0;o<t.length&&r<=i;o++){let s=t[o],l=r+s.length;l>=n&&(l>i&&(s=s.slice(0,i-r)),r<n&&(s=s.slice(n-r)),a?(e[e.length-1]+=s,a=!1):e.push(s)),r=l+1}return e}function l(t,e,n){return s(t,[""],e,n)}r.empty=new o([""],0);class c{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof o?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],a=r>>1,s=i instanceof o?i.text.length:i.children.length;if(a==(e>0?s:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(i instanceof o){let r=i.text[a+(e<0?-1:0)];if(this.offsets[n]+=e,r.length>Math.max(0,t))return this.value=0==t?r:e>0?r.slice(t):r.slice(0,r.length-t),this;t-=r.length}else{let r=i.children[a+(e<0?-1:0)];t>r.length?(t-=r.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(r),this.offsets.push(e>0?1:(r instanceof o?r.text.length:r.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class u{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new c(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:i}=this.cursor.next(t);return this.pos+=(i.length+t)*e,this.value=i.length<=n?i:e<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class h{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:i}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(r.prototype[Symbol.iterator]=function(){return this.iter()},c.prototype[Symbol.iterator]=u.prototype[Symbol.iterator]=h.prototype[Symbol.iterator]=function(){return this});class d{constructor(t,e,n,i){this.from=t,this.to=e,this.number=n,this.text=i}get length(){return this.to-this.from}}function p(t,e,n){return[e=Math.max(0,Math.min(t.length,e)),Math.max(e,Math.min(t.length,n))]}function f(t,e,n=!0,r=!0){return(0,i.z)(t,e,n,r)}function g(t,e){let n=t.charCodeAt(e);if(!((i=n)>=55296&&i<56320&&e+1!=t.length))return n;var i;let r=t.charCodeAt(e+1);return function(t){return t>=56320&&t<57344}(r)?r-56320+(n-55296<<10)+65536:n}function m(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function v(t){return t<65536?1:2}const y=/\r\n?|\n/;var b=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(b||(b={}));class w{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,i=0;e<this.sections.length;){let r=this.sections[e++],o=this.sections[e++];o<0?(t(n,i,r),i+=r):i+=o,n+=r}}iterChangedRanges(t,e=!1){C(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];i<0?t.push(n,i):t.push(i,n)}return new w(t)}composeDesc(t){return this.empty?t:t.empty?this:T(this,t)}mapDesc(t,e=!1){return t.empty?this:M(this,t,e)}mapPos(t,e=-1,n=b.Simple){let i=0,r=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],s=this.sections[o++],l=i+a;if(s<0){if(l>t)return r+(t-i);r+=a}else{if(n!=b.Simple&&l>=t&&(n==b.TrackDel&&i<t&&l>t||n==b.TrackBefore&&i<t||n==b.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!a)return t==i||e<0?r:r+s;r+=s}i=l}if(t>i)throw new RangeError(`Position ${t} is out of range for changeset of length ${i}`);return r}touchesRange(t,e=t){for(let n=0,i=0;n<this.sections.length&&i<=e;){let r=i+this.sections[n++];if(this.sections[n++]>=0&&i<=e&&r>=t)return!(i<t&&r>e)||"cover";i=r}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];t+=(t?" ":"")+n+(i>=0?":"+i:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some((t=>"number"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new w(t)}static create(t){return new w(t)}}class S extends w{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return C(this,((e,n,i,r,o)=>t=t.replace(i,i+(n-e),o)),!1),t}mapDesc(t,e=!1){return M(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let i=0,o=0;i<e.length;i+=2){let a=e[i],s=e[i+1];if(s>=0){e[i]=s,e[i+1]=a;let l=i>>1;for(;n.length<l;)n.push(r.empty);n.push(a?t.slice(o,o+a):r.empty)}o+=a}return new S(e,n)}compose(t){return this.empty?t:t.empty?this:T(this,t,!0)}map(t,e=!1){return t.empty?this:M(this,t,e,!0)}iterChanges(t,e=!1){C(this,t,e)}get desc(){return w.create(this.sections)}filter(t){let e=[],n=[],i=[],r=new E(this);t:for(let o=0,a=0;;){let s=o==t.length?1e9:t[o++];for(;a<s||a==s&&0==r.len;){if(r.done)break t;let t=Math.min(r.len,s-a);x(i,t,-1);let o=-1==r.ins?-1:0==r.off?r.ins:0;x(e,t,o),o>0&&k(n,e,r.text),r.forward(t),a+=t}let l=t[o++];for(;a<l;){if(r.done)break t;let t=Math.min(r.len,l-a);x(e,t,-1),x(i,t,-1==r.ins?-1:0==r.off?r.ins:0),r.forward(t),a+=t}}return{changes:new S(e,n),filtered:w.create(i)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],i=this.sections[e+1];i<0?t.push(n):0==i?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let i=[],o=[],a=0,s=null;function l(t=!1){if(!t&&!i.length)return;a<e&&x(i,e-a,-1);let n=new S(i,o);s=s?s.compose(n.map(s)):n,i=[],o=[],a=0}return function t(c){if(Array.isArray(c))for(let e of c)t(e);else if(c instanceof S){if(c.length!=e)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${e})`);l(),s=s?s.compose(c.map(s)):c}else{let{from:t,to:s=t,insert:u}=c;if(t>s||t<0||s>e)throw new RangeError(`Invalid change range ${t} to ${s} (in doc of length ${e})`);let h=u?"string"==typeof u?r.of(u.split(n||y)):u:r.empty,d=h.length;if(t==s&&0==d)return;t<a&&l(),t>a&&x(i,t-a,-1),x(i,s-t,d),k(o,i,h),a=s}}(t),l(!s),s}static empty(t){return new S(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let i=0;i<t.length;i++){let o=t[i];if("number"==typeof o)e.push(o,-1);else{if(!Array.isArray(o)||"number"!=typeof o[0]||o.some(((t,e)=>e&&"string"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==o.length)e.push(o[0],0);else{for(;n.length<i;)n.push(r.empty);n[i]=r.of(o.slice(1)),e.push(o[0],n[i].length)}}}return new S(e,n)}static createSet(t,e){return new S(t,e)}}function x(t,e,n,i=!1){if(0==e&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&0==e&&0==t[r]?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function k(t,e,n){if(0==n.length)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(r.empty);t.push(n)}}function C(t,e,n){let i=t.inserted;for(let o=0,a=0,s=0;s<t.sections.length;){let l=t.sections[s++],c=t.sections[s++];if(c<0)o+=l,a+=l;else{let u=o,h=a,d=r.empty;for(;u+=l,h+=c,c&&i&&(d=d.append(i[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)l=t.sections[s++],c=t.sections[s++];e(o,u,a,h,d),o=u,a=h}}}function M(t,e,n,i=!1){let r=[],o=i?[]:null,a=new E(t),s=new E(e);for(let t=-1;;){if(a.done&&s.len||s.done&&a.len)throw new Error("Mismatched change set lengths");if(-1==a.ins&&-1==s.ins){let t=Math.min(a.len,s.len);x(r,t,-1),a.forward(t),s.forward(t)}else if(s.ins>=0&&(a.ins<0||t==a.i||0==a.off&&(s.len<a.len||s.len==a.len&&!n))){let e=s.len;for(x(r,s.ins,-1);e;){let n=Math.min(a.len,e);a.ins>=0&&t<a.i&&a.len<=n&&(x(r,0,a.ins),o&&k(o,r,a.text),t=a.i),a.forward(n),e-=n}s.next()}else{if(!(a.ins>=0)){if(a.done&&s.done)return o?S.createSet(r,o):w.create(r);throw new Error("Mismatched change set lengths")}{let e=0,n=a.len;for(;n;)if(-1==s.ins){let t=Math.min(n,s.len);e+=t,n-=t,s.forward(t)}else{if(!(0==s.ins&&s.len<n))break;n-=s.len,s.next()}x(r,e,t<a.i?a.ins:0),o&&t<a.i&&k(o,r,a.text),t=a.i,a.forward(a.len-n)}}}}function T(t,e,n=!1){let i=[],r=n?[]:null,o=new E(t),a=new E(e);for(let t=!1;;){if(o.done&&a.done)return r?S.createSet(i,r):w.create(i);if(0==o.ins)x(i,o.len,0,t),o.next();else if(0!=a.len||a.done){if(o.done||a.done)throw new Error("Mismatched change set lengths");{let e=Math.min(o.len2,a.len),n=i.length;if(-1==o.ins){let n=-1==a.ins?-1:a.off?0:a.ins;x(i,e,n,t),r&&n&&k(r,i,a.text)}else-1==a.ins?(x(i,o.off?0:o.len,e,t),r&&k(r,i,o.textBit(e))):(x(i,o.off?0:o.len,a.off?0:a.ins,t),r&&!a.off&&k(r,i,a.text));t=(o.ins>e||a.ins>=0&&a.len>e)&&(t||i.length>n),o.forward2(e),a.forward(e)}}else x(i,0,a.ins,t),r&&k(r,i,a.text),a.next()}}class E{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?r.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?r.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class A{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let t=7&this.flags;return 7==t?null:t}get goalColumn(){let t=this.flags>>6;return 16777215==t?void 0:t}map(t,e=-1){let n,i;return this.empty?n=i=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new A(n,i,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return _.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return _.range(this.anchor,n)}eq(t,e=!1){return!(this.anchor!=t.anchor||this.head!=t.head||e&&this.empty&&this.assoc!=t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return _.range(t.anchor,t.head)}static create(t,e,n){return new A(t,e,n)}}class _{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:_.create(this.ranges.map((n=>n.map(t,e))),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new _([this.main],0)}addRange(t,e=!0){return _.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,_.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((t=>t.toJSON())),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new _(t.ranges.map((t=>A.fromJSON(t))),t.main)}static single(t,e=t){return new _([_.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<t.length;i++){let r=t[i];if(r.empty?r.from<=n:r.from<n)return _.normalized(t.slice(),e);n=r.to}return new _(t,e)}static cursor(t,e=0,n,i){return A.create(t,t,(0==e?0:e<0?8:16)|(null==n?7:Math.min(6,n))|(null!=i?i:16777215)<<6)}static range(t,e,n,i){let r=(null!=n?n:16777215)<<6|(null==i?7:Math.min(6,i));return e<t?A.create(e,t,48|r):A.create(t,e,(e>t?8:0)|r)}static normalized(t,e=0){let n=t[e];t.sort(((t,e)=>t.from-e.from)),e=t.indexOf(n);for(let n=1;n<t.length;n++){let i=t[n],r=t[n-1];if(i.empty?i.from<=r.to:i.from<r.to){let o=r.from,a=Math.max(i.to,r.to);n<=e&&e--,t.splice(--n,2,i.anchor>i.head?_.range(a,o):_.range(o,a))}}return new _(t,e)}}function P(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let D=0;class O{constructor(t,e,n,i,r){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=i,this.id=D++,this.default=t([]),this.extensions="function"==typeof r?r(this):r}get reader(){return this}static define(t={}){return new O(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:L),!!t.static,t.enables)}of(t){return new I([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new I(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new I(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],(n=>e(n.field(t))))}}function L(t,e){return t==e||t.length==e.length&&t.every(((t,n)=>t===e[n]))}class I{constructor(t,e,n,i){this.dependencies=t,this.facet=e,this.type=n,this.value=i,this.id=D++}dynamicSlot(t){var e;let n=this.value,i=this.facet.compareInput,r=this.id,o=t[r]>>1,a=2==this.type,s=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?s=!0:"selection"==n?l=!0:1&(null!==(e=t[n.id])&&void 0!==e?e:1)||c.push(t[n.id]);return{create:t=>(t.values[o]=n(t),1),update(t,e){if(s&&e.docChanged||l&&(e.docChanged||e.selection)||V(t,c)){let e=n(t);if(a?!R(e,t.values[o],i):!i(e,t.values[o]))return t.values[o]=e,1}return 0},reconfigure:(t,e)=>{let s,l=e.config.address[r];if(null!=l){let r=W(e,l);if(this.dependencies.every((n=>n instanceof O?e.facet(n)===t.facet(n):!(n instanceof B)||e.field(n,!1)==t.field(n,!1)))||(a?R(s=n(t),r,i):i(s=n(t),r)))return t.values[o]=r,0}else s=n(t);return t.values[o]=s,1}}}}function R(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function V(t,e){let n=!1;for(let i of e)1&q(t,i)&&(n=!0);return n}function N(t,e,n){let i=n.map((e=>t[e.id])),r=n.map((t=>t.type)),o=i.filter((t=>!(1&t))),a=t[e.id]>>1;function s(t){let n=[];for(let e=0;e<i.length;e++){let o=W(t,i[e]);if(2==r[e])for(let t of o)n.push(t);else n.push(o)}return e.combine(n)}return{create(t){for(let e of i)q(t,e);return t.values[a]=s(t),1},update(t,n){if(!V(t,o))return 0;let i=s(t);return e.compare(i,t.values[a])?0:(t.values[a]=i,1)},reconfigure(t,r){let o=V(t,i),l=r.config.facets[e.id],c=r.facet(e);if(l&&!o&&L(n,l))return t.values[a]=c,0;let u=s(t);return e.compare(u,c)?(t.values[a]=c,0):(t.values[a]=u,1)}}}const F=O.define({static:!0});class B{constructor(t,e,n,i,r){this.id=t,this.createF=e,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}static define(t){let e=new B(D++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(F).find((t=>t.field==this));return((null==e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,n)=>{let i=t.values[e],r=this.updateF(i,n);return this.compareF(i,r)?0:(t.values[e]=r,1)},reconfigure:(t,n)=>{let i,r=t.facet(F),o=n.facet(F);return(i=r.find((t=>t.field==this)))&&i!=o.find((t=>t.field==this))?(t.values[e]=i.create(t),1):null!=n.config.address[this.id]?(t.values[e]=n.field(this),0):(t.values[e]=this.create(t),1)}}}init(t){return[this,F.of({field:this,create:t})]}get extension(){return this}}function z(t){return e=>new U(e,t)}const j={highest:z(0),high:z(1),default:z(2),low:z(3),lowest:z(4)};class U{constructor(t,e){this.inner=t,this.prec=e}}class G{of(t){return new $(this,t)}reconfigure(t){return G.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class ${constructor(t,e){this.compartment=t,this.inner=e}}class H{constructor(t,e,n,i,r,o){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let i=[],r=Object.create(null),o=new Map;for(let n of function(t,e,n){let i=[[],[],[],[],[]],r=new Map;return function t(o,a){let s=r.get(o);if(null!=s){if(s<=a)return;let t=i[s].indexOf(o);t>-1&&i[s].splice(t,1),o instanceof $&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let e of o)t(e,a);else if(o instanceof $){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let i=e.get(o.compartment)||o.inner;n.set(o.compartment,i),t(i,a)}else if(o instanceof U)t(o.inner,o.prec);else if(o instanceof B)i[a].push(o),o.provides&&t(o.provides,a);else if(o instanceof I)i[a].push(o),o.facet.extensions&&t(o.facet.extensions,2);else{let e=o.extension;if(!e)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);t(e,a)}}(t,2),i.reduce(((t,e)=>t.concat(e)))}(t,e,o))n instanceof B?i.push(n):(r[n.facet.id]||(r[n.facet.id]=[])).push(n);let a=Object.create(null),s=[],l=[];for(let t of i)a[t.id]=l.length<<1,l.push((e=>t.slot(e)));let c=null==n?void 0:n.config.facets;for(let t in r){let e=r[t],i=e[0].facet,o=c&&c[t]||[];if(e.every((t=>0==t.type)))if(a[i.id]=s.length<<1|1,L(o,e))s.push(n.facet(i));else{let t=i.combine(e.map((t=>t.value)));s.push(n&&i.compare(t,n.facet(i))?n.facet(i):t)}else{for(let t of e)0==t.type?(a[t.id]=s.length<<1|1,s.push(t.value)):(a[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));a[i.id]=l.length<<1,l.push((t=>N(t,i,e)))}}let u=l.map((t=>t(a)));return new H(t,o,u,a,s,r)}}function q(t,e){if(1&e)return 2;let n=e>>1,i=t.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function W(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const Z=O.define(),Y=O.define({combine:t=>t.some((t=>t)),static:!0}),K=O.define({combine:t=>t.length?t[0]:void 0,static:!0}),X=O.define(),J=O.define(),Q=O.define(),tt=O.define({combine:t=>!!t.length&&t[0]});class et{constructor(t,e){this.type=t,this.value=e}static define(){return new nt}}class nt{of(t){return new et(this,t)}}class it{constructor(t){this.map=t}of(t){return new rt(this,t)}}class rt{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new rt(this.type,e)}is(t){return this.type==t}static define(t={}){return new it(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let i of t){let t=i.map(e);t&&n.push(t)}return n}}rt.reconfigure=rt.define(),rt.appendConfig=rt.define();class ot{constructor(t,e,n,i,r,o){this.startState=t,this.changes=e,this.selection=n,this.effects=i,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,n&&P(n,e.newLength),r.some((t=>t.type==ot.time))||(this.annotations=r.concat(ot.time.of(Date.now())))}static create(t,e,n,i,r,o){return new ot(t,e,n,i,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(ot.userEvent);return!(!e||!(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function at(t,e){let n=[];for(let i=0,r=0;;){let o,a;if(i<t.length&&(r==e.length||e[r]>=t[i]))o=t[i++],a=t[i++];else{if(!(r<e.length))return n;o=e[r++],a=e[r++]}!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function st(t,e,n){var i;let r,o,a;return n?(r=e.changes,o=S.empty(e.changes.length),a=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(r)),{changes:a,selection:e.selection?e.selection.map(o):null===(i=t.selection)||void 0===i?void 0:i.map(r),effects:rt.mapEffects(t.effects,r).concat(rt.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function lt(t,e,n){let i=e.selection,r=ht(e.annotations);return e.userEvent&&(r=r.concat(ot.userEvent.of(e.userEvent))),{changes:e.changes instanceof S?e.changes:S.of(e.changes||[],n,t.facet(K)),selection:i&&(i instanceof _?i:_.single(i.anchor,i.head)),effects:ht(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function ct(t,e,n){let i=lt(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(let r=1;r<e.length;r++){!1===e[r].filter&&(n=!1);let o=!!e[r].sequential;i=st(i,lt(t,e[r],o?i.changes.newLength:t.doc.length),o)}let r=ot.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(t){let e=t.startState,n=e.facet(Q),i=t;for(let r=n.length-1;r>=0;r--){let o=n[r](t);o&&Object.keys(o).length&&(i=st(i,lt(e,o,t.changes.newLength),!0))}return i==t?t:ot.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}(n?function(t){let e=t.startState,n=!0;for(let i of e.facet(X)){let e=i(t);if(!1===e){n=!1;break}Array.isArray(e)&&(n=!0===n?e:at(n,e))}if(!0!==n){let i,r;if(!1===n)r=t.changes.invertedDesc,i=S.empty(e.doc.length);else{let e=t.changes.filter(n);i=e.changes,r=e.filtered.mapDesc(e.changes).invertedDesc}t=ot.create(e,i,t.selection&&t.selection.map(r),rt.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(J);for(let n=i.length-1;n>=0;n--){let r=i[n](t);t=r instanceof ot?r:Array.isArray(r)&&1==r.length&&r[0]instanceof ot?r[0]:ct(e,ht(r),!1)}return t}(r):r)}ot.time=et.define(),ot.userEvent=et.define(),ot.addToHistory=et.define(),ot.remote=et.define();const ut=[];function ht(t){return null==t?ut:Array.isArray(t)?t:[t]}var dt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(dt||(dt={}));const pt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ft;try{ft=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(t){}class gt{constructor(t,e,n,i,r,o){this.config=t,this.doc=e,this.selection=n,this.values=i,this.status=t.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let t=0;t<this.config.dynamicSlots.length;t++)q(this,t<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(null!=n)return q(this,n),W(this,n);if(e)throw new RangeError("Field is not present in this state")}update(...t){return ct(this,t,!0)}applyTransaction(t){let e,n=this.config,{base:i,compartments:r}=n;for(let e of t.effects)e.is(G.reconfigure)?(n&&(r=new Map,n.compartments.forEach(((t,e)=>r.set(e,t))),n=null),r.set(e.value.compartment,e.value.extension)):e.is(rt.reconfigure)?(n=null,i=e.value):e.is(rt.appendConfig)&&(n=null,i=ht(i).concat(e.value));n?e=t.startState.values.slice():(n=H.resolve(i,r,this),e=new gt(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((t,e)=>e.reconfigure(t,this)),null).values);let o=t.startState.facet(Y)?t.newSelection:t.newSelection.asSingle();new gt(n,t.newDoc,o,e,((e,n)=>n.update(e,t)),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:t},range:_.cursor(e.from+t.length)})))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),i=this.changes(n.changes),r=[n.range],o=ht(n.effects);for(let n=1;n<e.ranges.length;n++){let a=t(e.ranges[n]),s=this.changes(a.changes),l=s.map(i);for(let t=0;t<n;t++)r[t]=r[t].map(l);let c=i.mapDesc(s,!0);r.push(a.range.map(c)),i=i.compose(l),o=rt.mapEffects(o,l).concat(rt.mapEffects(ht(a.effects),c))}return{changes:i,selection:_.create(r,e.mainIndex),effects:o}}changes(t=[]){return t instanceof S?t:S.of(t,this.doc.length,this.facet(gt.lineSeparator))}toText(t){return r.of(t.split(this.facet(gt.lineSeparator)||y))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(q(this,e),W(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let i=t[n];i instanceof B&&null!=this.config.address[i.id]&&(e[n]=i.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n)for(let e in n)if(Object.prototype.hasOwnProperty.call(t,e)){let r=n[e],o=t[e];i.push(r.init((t=>r.spec.fromJSON(o,t))))}return gt.create({doc:t.doc,selection:_.fromJSON(t.selection),extensions:e.extensions?i.concat([e.extensions]):i})}static create(t={}){let e=H.resolve(t.extensions||[],new Map),n=t.doc instanceof r?t.doc:r.of((t.doc||"").split(e.staticFacet(gt.lineSeparator)||y)),i=t.selection?t.selection instanceof _?t.selection:_.single(t.selection.anchor,t.selection.head):_.single(0);return P(i,n.length),e.staticFacet(Y)||(i=i.asSingle()),new gt(e,n,i,e.dynamicSlots.map((()=>null)),((t,e)=>e.create(t)),null)}get tabSize(){return this.facet(gt.tabSize)}get lineBreak(){return this.facet(gt.lineSeparator)||"\n"}get readOnly(){return this.facet(tt)}phrase(t,...e){for(let e of this.facet(gt.phrases))if(Object.prototype.hasOwnProperty.call(e,t)){t=e[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,((t,n)=>{if("$"==n)return"$";let i=+(n||1);return!i||i>e.length?t:e[i-1]}))),t}languageDataAt(t,e,n=-1){let i=[];for(let r of this.facet(Z))for(let o of r(this,e,n))Object.prototype.hasOwnProperty.call(o,t)&&i.push(o[t]);return i}charCategorizer(t){return e=this.languageDataAt("wordChars",t).join(""),t=>{if(!/\S/.test(t))return dt.Space;if(function(t){if(ft)return ft.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||pt.test(n)))return!0}return!1}(t))return dt.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return dt.Word;return dt.Other};var e}wordAt(t){let{text:e,from:n,length:i}=this.doc.lineAt(t),r=this.charCategorizer(t),o=t-n,a=t-n;for(;o>0;){let t=f(e,o,!1);if(r(e.slice(t,o))!=dt.Word)break;o=t}for(;a<i;){let t=f(e,a);if(r(e.slice(a,t))!=dt.Word)break;a=t}return o==a?null:_.range(o+n,a+n)}}function mt(t,e,n={}){let i={};for(let e of t)for(let t of Object.keys(e)){let r=e[t],o=i[t];if(void 0===o)i[t]=r;else if(o===r||void 0===r);else{if(!Object.hasOwnProperty.call(n,t))throw new Error("Config merge conflict for field "+t);i[t]=n[t](o,r)}}for(let t in e)void 0===i[t]&&(i[t]=e[t]);return i}gt.allowMultipleSelections=Y,gt.tabSize=O.define({combine:t=>t.length?t[0]:4}),gt.lineSeparator=K,gt.readOnly=tt,gt.phrases=O.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every((n=>t[n]==e[n]))}}),gt.languageData=Z,gt.changeFilter=X,gt.transactionFilter=J,gt.transactionExtender=Q,G.reconfigure=rt.define();class vt{eq(t){return this==t}range(t,e=t){return yt.create(t,e,this)}}vt.prototype.startSide=vt.prototype.endSide=0,vt.prototype.point=!1,vt.prototype.mapMode=b.TrackDel;class yt{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new yt(t,e,n)}}function bt(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class wt{constructor(t,e,n,i){this.from=t,this.to=e,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,i=0){let r=n?this.to:this.from;for(let o=i,a=r.length;;){if(o==a)return o;let i=o+a>>1,s=r[i]-t||(n?this.value[i].endSide:this.value[i].startSide)-e;if(i==o)return s>=0?o:a;s>=0?a=i:o=i+1}}between(t,e,n,i){for(let r=this.findIndex(e,-1e9,!0),o=this.findIndex(n,1e9,!1,r);r<o;r++)if(!1===i(this.from[r]+t,this.to[r]+t,this.value[r]))return!1}map(t,e){let n=[],i=[],r=[],o=-1,a=-1;for(let s=0;s<this.value.length;s++){let l,c,u=this.value[s],h=this.from[s]+t,d=this.to[s]+t;if(h==d){let t=e.mapPos(h,u.startSide,u.mapMode);if(null==t)continue;if(l=c=t,u.startSide!=u.endSide&&(c=e.mapPos(h,u.endSide),c<l))continue}else if(l=e.mapPos(h,u.startSide),c=e.mapPos(d,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(a=Math.max(a,c-l)),n.push(u),i.push(l-o),r.push(c-o))}return{mapped:n.length?new wt(i,r,n,a):null,pos:o}}}class St{constructor(t,e,n,i){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=i}static create(t,e,n,i){return new St(t,e,n,i)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:i=0,filterTo:r=this.length}=t,o=t.filter;if(0==e.length&&!o)return this;if(n&&(e=e.slice().sort(bt)),this.isEmpty)return e.length?St.of(e):this;let a=new Ct(this,null,-1).goto(0),s=0,l=[],c=new xt;for(;a.value||s<e.length;)if(s<e.length&&(a.from-e[s].from||a.startSide-e[s].value.startSide)>=0){let t=e[s++];c.addInner(t.from,t.to,t.value)||l.push(t)}else 1==a.rangeIndex&&a.chunkIndex<this.chunk.length&&(s==e.length||this.chunkEnd(a.chunkIndex)<e[s].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||r<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||r<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||l.push(yt.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?St.empty:this.nextLayer.update({add:l,filter:o,filterFrom:i,filterTo:r}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],i=-1;for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],a=this.chunk[r],s=t.touchesRange(o,o+a.length);if(!1===s)i=Math.max(i,a.maxPoint),e.push(a),n.push(t.mapPos(o));else if(!0===s){let{mapped:r,pos:s}=a.map(o,t);r&&(i=Math.max(i,r.maxPoint),e.push(r),n.push(s))}}let r=this.nextLayer.map(t);return 0==e.length?r:new St(n,e,r||St.empty,i)}between(t,e,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],o=this.chunk[i];if(e>=r&&t<=r+o.length&&!1===o.between(r,t-r,e-r,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return Mt.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Mt.from(t).goto(e)}static compare(t,e,n,i,r=-1){let o=t.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=r)),a=e.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=r)),s=kt(o,a,n),l=new Et(o,s,r),c=new Et(a,s,r);n.iterGaps(((t,e,n)=>At(l,t,c,e,n,i))),n.empty&&0==n.length&&At(l,0,c,0,0,i)}static eq(t,e,n=0,i){null==i&&(i=999999999);let r=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0)),o=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0));if(r.length!=o.length)return!1;if(!r.length)return!0;let a=kt(r,o),s=new Et(r,a,0).goto(n),l=new Et(o,a,0).goto(n);for(;;){if(s.to!=l.to||!_t(s.active,l.active)||s.point&&(!l.point||!s.point.eq(l.point)))return!1;if(s.to>i)return!0;s.next(),l.next()}}static spans(t,e,n,i,r=-1){let o=new Et(t,null,r).goto(e),a=e,s=o.openStart;for(;;){let t=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),r=o.pointFrom<e?n.length+1:o.point.startSide<0?n.length:Math.min(n.length,s);i.point(a,t,o.point,n,r,o.pointRank),s=Math.min(o.openEnd(t),n.length)}else t>a&&(i.span(a,t,o.active,s),s=o.openEnd(t));if(o.to>n)return s+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(t,e=!1){let n=new xt;for(let i of t instanceof yt?[t]:e?function(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(bt(e,i)>0)return t.slice().sort(bt);e=i}return t}(t):t)n.add(i.from,i.to,i.value);return n.finish()}static join(t){if(!t.length)return St.empty;let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)for(let i=t[n];i!=St.empty;i=i.nextLayer)e=new St(i.chunkPos,i.chunk,e,Math.max(i.maxPoint,e.maxPoint));return e}}St.empty=new St([],[],null,-1),St.empty.nextLayer=St.empty;class xt{finishChunk(t){this.chunks.push(new wt(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new xt)).add(t,e,n)}addInner(t,e,n){let i=t-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),0))}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(St.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=St.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function kt(t,e,n){let i=new Map;for(let e of t)for(let t=0;t<e.chunk.length;t++)e.chunk[t].maxPoint<=0&&i.set(e.chunk[t],e.chunkPos[t]);let r=new Set;for(let t of e)for(let e=0;e<t.chunk.length;e++){let o=i.get(t.chunk[e]);null==o||(n?n.mapPos(o):o)!=t.chunkPos[e]||(null==n?void 0:n.touchesRange(o,o+t.chunk[e].length))||r.add(t.chunk[e])}return r}class Ct{constructor(t,e,n,i=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Mt{constructor(t){this.heap=t}static from(t,e=null,n=-1){let i=[];for(let r=0;r<t.length;r++)for(let o=t[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new Ct(o,e,n,r));return 1==i.length?i[0]:new Mt(i)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let t=this.heap.length>>1;t>=0;t--)Tt(this.heap,t);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let t=this.heap.length>>1;t>=0;t--)Tt(this.heap,t);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),Tt(this.heap,0)}}}function Tt(t,e){for(let n=t[e];;){let i=1+(e<<1);if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Et{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Mt.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Pt(this.active,t),Pt(this.activeTo,t),Pt(this.activeRank,t),this.minActive=Ot(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:i,rank:r}=this.cursor;for(;e<this.activeRank.length&&(r-this.activeRank[e]||i-this.activeTo[e])>0;)e++;Dt(this.active,e,n),Dt(this.activeTo,e,i),Dt(this.activeRank,e,r),t&&Dt(t,e,this.cursor.from),this.minActive=Ot(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>t){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&Pt(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let e=n.length-1;e>=0&&n[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function At(t,e,n,i,r,o){t.goto(e),n.goto(i);let a=i+r,s=i,l=i-e;for(;;){let e=t.to+l-n.to,i=e||t.endSide-n.endSide,r=i<0?t.to+l:n.to,c=Math.min(r,a);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&_t(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(s,c,t.point,n.point):c>s&&!_t(t.active,n.active)&&o.compareRange(s,c,t.active,n.active),r>a)break;(e||t.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(r),s=r,i<=0&&t.next(),i>=0&&n.next()}}function _t(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Pt(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Dt(t,e,n){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=n}function Ot(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Lt(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)9==t.charCodeAt(r)?(i+=e-i%e,r++):(i++,r=f(t,r));return i}function It(t,e,n,i){for(let i=0,r=0;;){if(r>=e)return i;if(i==t.length)break;r+=9==t.charCodeAt(i)?n-r%n:1,i=f(t,i)}return!0===i?-1:t.length}},1371:(t,e,n)=>{"use strict";n.d(e,{$K:()=>Zr,A:()=>Ni,D4:()=>tr,DK:()=>pr,Eg:()=>wr,HJ:()=>ir,Lz:()=>ii,N$:()=>Hi,NZ:()=>st,OP:()=>bt,S7:()=>Er,TS:()=>fi,Ux:()=>br,VH:()=>Ei,Wu:()=>Jr,Z9:()=>ie,cU:()=>Lr,c_:()=>Qt,dz:()=>Yi,ld:()=>kr,w4:()=>hi,wJ:()=>Ar,xO:()=>ot});var i=n(6585),r=n(97417),o=n(62534);function a(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function s(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function l(t,e){if(!e.anchorNode)return!1;try{return s(t,e.anchorNode)}catch(t){return!1}}function c(t){return 3==t.nodeType?x(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function u(t,e,n,i){return!!n&&(p(t,e,n,i,-1)||p(t,e,n,i,1))}function h(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function d(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function p(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:f(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=h(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?f(t):0}}}function f(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function g(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function m(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function v(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class y{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?f(e):0),n,Math.min(t.focusOffset,n?f(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let b,w=null;function S(t){if(t.setActive)return t.setActive();if(w)return t.focus(w);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==w?{get preventScroll(){return w={preventScroll:!0},!0}}:void 0),!w){w=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function x(t,e,n=e){let i=b||(b=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function k(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let a=new KeyboardEvent("keyup",r);return a.synthetic=!0,t.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function C(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function M(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function T(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=f(n)}else{if(!n.parentNode||d(n))return null;i=h(n),n=n.parentNode}}}function E(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||d(n))return null;i=h(n)+1,n=n.parentNode}}}class A{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new A(t.parentNode,h(t),e)}static after(t,e){return new A(t.parentNode,h(t)+1,e)}}const _=[];class P{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=P.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=D(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=D(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==f(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!P.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,a=-1;for(let s=0,l=n,c=n;s<this.children.length;s++){let n=this.children[s],u=l+n.length;if(l<t&&u>e)return n.domBoundsAround(t,e,l);if(u>=t&&-1==i&&(i=s,r=l),l>e&&n.dom.parentNode==this.dom){o=s,a=c;break}c=u,l=u+n.breakAfter}return{from:r,to:a<0?n+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=_){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new O(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function D(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}P.prototype.breakAfter=0;class O{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function L(t,e,n,i,r,o,a,s,l){let{children:c}=t,u=c.length?c[e]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:a;if(!(e==i&&u&&!a&&!d&&o.length<2&&u.merge(n,r,o.length?h:null,0==n,s,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==h?void 0:h.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&h&&t.merge(0,r,h,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(h?h.breakAfter=1:a=1),i++}for(u&&(u.breakAfter=a,n>0&&(!a&&o.length&&u.merge(n,u.length,o[0],!1,s,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,s,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:s;else{if(!c[e].become(o[0]))break;e++,o.shift(),s=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,s,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function I(t,e,n,i,r,o){let a=t.childCursor(),{i:s,off:l}=a.findPos(n,1),{i:c,off:u}=a.findPos(e,-1),h=e-n;for(let t of i)h+=t.length;t.length+=h,L(t,c,u,s,l,i,0,r,o)}let R="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},V="undefined"!=typeof document?document:{documentElement:{style:{}}};const N=/Edge\/(\d+)/.exec(R.userAgent),F=/MSIE \d/.test(R.userAgent),B=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(R.userAgent),z=!!(F||B||N),j=!z&&/gecko\/(\d+)/i.test(R.userAgent),U=!z&&/Chrome\/(\d+)/.exec(R.userAgent),G="webkitFontSmoothing"in V.documentElement.style,$=!z&&/Apple Computer/.test(R.vendor),H=$&&(/Mobile\/\w+/.test(R.userAgent)||R.maxTouchPoints>2);var q={mac:H||/Mac/.test(R.platform),windows:/Win/.test(R.platform),linux:/Linux|X11/.test(R.platform),ie:z,ie_version:F?V.documentMode||6:B?+B[1]:N?+N[1]:0,gecko:j,gecko_version:j?+(/Firefox\/(\d+)/.exec(R.userAgent)||[0,0])[1]:0,chrome:!!U,chrome_version:U?+U[1]:0,ios:H,android:/Android\b/.test(R.userAgent),webkit:G,safari:$,webkit_version:G?+(/\bAppleWebKit\/(\d+)/.exec(R.userAgent)||[0,0])[1]:0,tabSize:null!=V.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class W extends P{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof W)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new W(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new A(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,a=0;0==e&&n<0||e==i&&n>=0?q.chrome||q.gecko||(e?(r--,a=1):o<i&&(o++,a=-1)):n<0?r--:o<i&&o++;let s=x(t,r,o).getClientRects();if(!s.length)return null;let l=s[(a?a<0:n>=0)?0:s.length-1];return q.safari&&!a&&0==l.width&&(l=Array.prototype.find.call(s,(t=>t.width))||l),a?g(l,a<0):l||null}(this.dom,t,e)}}class Z extends P{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(C(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof Z&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(I(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let a=n+o.length;a>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=a,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new Z(this.mark,e,o)}domAtPos(t){return X(this,t)}coordsAt(t,e){return Q(this,t,e)}}class Y extends P{static create(t,e,n){return new Y(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=Y.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof Y&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof Y&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return i.EY.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):i.EY.empty}domAtPos(t){return(this.length?0==t:this.side>0)?A.before(this.dom):A.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return g(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class K extends P{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof K&&t.side==this.side}split(){return new K(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?A.before(this.dom):A.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return i.EY.empty}get isHidden(){return!0}}function X(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],a=t+o.length;if(!(a==t&&o.getSide()<=0)){if(e>t&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=a}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new A(n,0)}function J(t,e,n){let i,{children:r}=t;n>0&&e instanceof Z&&r.length&&(i=r[r.length-1])instanceof Z&&i.mark.eq(e.mark)?J(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function Q(t,e,n){let i=null,r=-1,o=null,a=-1;!function t(e,s){for(let l=0,c=0;l<e.children.length&&c<=s;l++){let u=e.children[l],h=c+u.length;h>=s&&(u.children.length?t(u,s-c):(!o||o.isHidden&&n>0)&&(h>s||c==h&&u.getSide()>0)?(o=u,a=s-c):(c<s||c==h&&u.getSide()<0&&!u.isHidden)&&(i=u,r=s-c)),c=h}}(t,e);let s=(n<0?i:o)||i||o;return s?s.coordsAt(Math.max(0,s==i?r:a),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=c(e);return n[n.length-1]||null}(t)}function tt(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}W.prototype.children=Y.prototype.children=K.prototype.children=_;const et=Object.create(null);function nt(t,e,n){if(t==e)return!0;t||(t=et),e||(e=et);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function it(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function rt(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class ot{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var at=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(at||(at={}));class st extends i.FB{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new lt(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new ut(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=ht(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new ut(t,e,n,i,t.widget||null,!0)}static line(t){return new ct(t)}static set(t,e=!1){return i.om.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}st.none=i.om.empty;class lt extends st{constructor(t){let{start:e,end:n}=ht(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof lt&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&nt(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}lt.prototype.point=!1;class ct extends st{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof ct&&this.spec.class==t.spec.class&&nt(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}ct.prototype.mapMode=i.iR.TrackBefore,ct.prototype.point=!0;class ut extends st{constructor(t,e,n,r,o,a){super(e,n,o,t),this.block=r,this.isReplace=a,this.mapMode=r?e<=0?i.iR.TrackBefore:i.iR.TrackAfter:i.iR.TrackDel}get type(){return this.startSide!=this.endSide?at.WidgetRange:this.startSide<=0?at.WidgetBefore:at.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof ut&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function ht(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function dt(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}ut.prototype.point=!0;class pt extends P{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof pt))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),I(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new pt;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){nt(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){J(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=tt(e,this.attrs||{})),n&&(this.attrs=tt({class:n},this.attrs||{}))}domAtPos(t){return X(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&(C(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(it(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&P.get(i)instanceof Z;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=P.get(i))||void 0===n?void 0:n.isEditable)||q.ios&&this.children.some((t=>t instanceof W))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof W)||/[^ -~]/.test(n.text))return null;let i=c(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=Q(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof pt&&0==this.children.length&&0==t.children.length&&nt(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof pt)return r;if(o>e)break}i=o+r.breakAfter}return null}}class ft extends P{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof ft&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?A.before(this.dom):A.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new ft(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return _}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):i.EY.empty}domBoundsAround(){return null}become(t){return t instanceof ft&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof gt?null:g(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class gt extends ot{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class mt{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof ft&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new pt),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(vt(new K(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof ft||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(vt(new W(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof ut){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=e-t;if(n instanceof ut)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ft(n.widget||yt.block,a,n));else{let o=Y.create(n.widget||yt.inline,a,a?0:n.startSide),s=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||s||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),s&&(c.append(vt(new K(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(vt(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,r,o){let a=new mt(t,e,n,o);return a.openEnd=i.om.spans(r,e,n,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function vt(t,e){for(let n of e)t=new Z(n,[t],t.length);return t}class yt extends ot{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}yt.inline=new yt("span"),yt.block=new yt("div");var bt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(bt||(bt={}));const wt=bt.LTR,St=bt.RTL;function xt(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const kt=xt("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ct=xt("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Mt=Object.create(null),Tt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Mt[e]=n,Mt[n]=-e}function Et(t){return t<=247?kt[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Ct[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const At=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class _t{get dir(){return this.level%2?St:wt}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let a=t[o];if(a.from<=e&&a.to>=e){if(a.level==n)return o;(r<0||(0!=i?i<0?a.from<e:a.to>e:t[r].level>a.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function Pt(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Pt(i.inner,r.inner))return!1}return!0}const Dt=[];function Ot(t,e,n,i,r,o,a){let s=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,u=!1;if(c==o.length||l<o[c].from){let t=Dt[l];t!=s&&(e=!1,u=16==t)}let h=e||1!=s?null:[],d=e?i:i+1,p=l;t:for(;;)if(c<o.length&&p==o[c].from){if(u)break t;let f=o[c];if(!e)for(let t=f.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(Dt[t]==s)break t;break}t=o[e++].to}c++,h?h.push(f):(f.from>l&&a.push(new _t(l,f.from,d)),Lt(t,f.direction==wt!=!(d%2)?i+1:i,r,f.inner,f.from,f.to,a),l=f.to),p=f.to}else{if(p==n||(e?Dt[p]!=s:Dt[p]==s))break;p++}h?Ot(t,l,p,i+1,r,h,a):l<p&&a.push(new _t(l,p,d)),l=p}else for(let l=n,c=o.length;l>e;){let n=!0,u=!1;if(!c||l>o[c-1].to){let t=Dt[l-1];t!=s&&(n=!1,u=16==t)}let h=n||1!=s?null:[],d=n?i:i+1,p=l;t:for(;;)if(c&&p==o[c-1].to){if(u)break t;let f=o[--c];if(!n)for(let t=f.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(Dt[t-1]==s)break t;break}t=o[--n].from}h?h.push(f):(f.to<l&&a.push(new _t(f.to,l,d)),Lt(t,f.direction==wt!=!(d%2)?i+1:i,r,f.inner,f.from,f.to,a),l=f.from),p=f.from}else{if(p==e||(n?Dt[p-1]!=s:Dt[p-1]==s))break;p--}h?Ot(t,p,l,i+1,r,h,a):p<l&&a.push(new _t(p,l,d)),l=p}}function Lt(t,e,n,i,r,o,a){let s=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let a=o?i[o-1].to:e,s=o<i.length?i[o].from:n,l=o?256:r;for(let e=a,n=l,i=l;e<s;e++){let r=Et(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),Dt[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=a,e=l,i=l;t<s;t++){let r=Dt[t];if(128==r)t<s-1&&e==Dt[t+1]&&24&e?r=Dt[t]=e:Dt[t]=256;else if(64==r){let r=t+1;for(;r<s&&64==Dt[r];)r++;let o=t&&8==e||r<n&&8==Dt[r]?1==i?1:8:256;for(let e=t;e<r;e++)Dt[e]=o;t=r-1}else 8==r&&1==i&&(Dt[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,s),function(t,e,n,i,r){let o=1==r?2:1;for(let a=0,s=0,l=0;a<=i.length;a++){let c=a?i[a-1].to:e,u=a<i.length?i[a].from:n;for(let e,n,i,a=c;a<u;a++)if(n=Mt[e=t.charCodeAt(a)])if(n<0){for(let t=s-3;t>=0;t-=3)if(Tt[t+1]==-n){let e=Tt[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(Dt[a]=Dt[Tt[t]]=n),s=t;break}}else{if(189==Tt.length)break;Tt[s++]=a,Tt[s++]=e,Tt[s++]=l}else if(2==(i=Dt[a])||1==i){let t=i==r;l=t?0:1;for(let e=s-3;e>=0;e-=3){let n=Tt[e+2];if(2&n)break;if(t)Tt[e+2]|=2;else{if(4&n)break;Tt[e+2]|=4}}}}}(t,r,o,i,s),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let a=r?n[r-1].to:t,s=r<n.length?n[r].from:e;for(let l=a;l<s;){let a=Dt[l];if(256==a){let a=l+1;for(;;)if(a==s){if(r==n.length)break;a=n[r++].to,s=r<n.length?n[r].from:e}else{if(256!=Dt[a])break;a++}let c=1==o,u=c==(1==(a<e?Dt[a]:i))?c?1:2:i;for(let e=a,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),Dt[--e]=u;l=a}else o=a,l++}}}(r,o,i,s),Ot(t,r,o,e,n,i,a)}function It(t){return[new _t(0,t,0)]}let Rt="";function Vt(t,e,n,r,o){var a;let s=r.head-t.from,l=_t.find(e,s,null!==(a=r.bidiLevel)&&void 0!==a?a:-1,r.assoc),c=e[l],u=c.side(o,n);if(s==u){let t=l+=o?1:-1;if(t<0||t>=e.length)return null;c=e[l=t],s=c.side(!o,n),u=c.side(o,n)}let h=(0,i.zK)(t.text,s,c.forward(o,n));(h<c.from||h>c.to)&&(h=u),Rt=t.text.slice(Math.min(s,h),Math.max(s,h));let d=l==(o?e.length-1:0)?null:e[l+(o?1:-1)];return d&&h==u&&d.level+(o?0:1)<c.level?i.OF.cursor(d.side(!o,n)+t.from,d.forward(o,n)?1:-1,d.level):i.OF.cursor(h+t.from,c.forward(o,n)?-1:1,c.level)}function Nt(t,e,n){for(let i=e;i<n;i++){let e=Et(t.charCodeAt(i));if(1==e)return wt;if(2==e||4==e)return St}return wt}const Ft=i.sj.define(),Bt=i.sj.define(),zt=i.sj.define(),jt=i.sj.define(),Ut=i.sj.define(),Gt=i.sj.define(),$t=i.sj.define(),Ht=i.sj.define(),qt=i.sj.define(),Wt=i.sj.define({combine:t=>t.some((t=>t))}),Zt=i.sj.define({combine:t=>t.some((t=>t))}),Yt=i.sj.define();class Kt{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new Kt(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Kt(i.OF.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Xt=i.Pe.define({map:(t,e)=>t.map(e)}),Jt=i.Pe.define();function Qt(t,e,n){let i=t.facet(jt);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const te=i.sj.define({combine:t=>!t.length||t[0]});let ee=0;const ne=i.sj.define();class ie{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new ie(ee++,t,n,i,(t=>{let e=[ne.of(t)];return o&&e.push(se.of((e=>{let n=e.plugin(t);return n?o(n):st.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return ie.define((e=>new t(e)),e)}}class re{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(Qt(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){Qt(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){Qt(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const oe=i.sj.define(),ae=i.sj.define(),se=i.sj.define(),le=i.sj.define(),ce=i.sj.define(),ue=i.sj.define();function he(t,e){let n=t.state.facet(ue);if(!n.length)return n;let r=n.map((e=>e instanceof Function?e(t):e)),o=[];return i.om.spans(r,e.from,e.to,{point(){},span(t,n,i,r){let a=t-e.from,s=n-e.from,l=o;for(let t=i.length-1;t>=0;t--,r--){let n,o=i[t].spec.bidiIsolate;if(null==o&&(o=Nt(e.text,a,s)),r>0&&l.length&&(n=l[l.length-1]).to==a&&n.direction==o)n.to=s,l=n.inner;else{let t={from:a,to:s,direction:o,inner:[]};l.push(t),l=t.inner}}}}),o}const de=i.sj.define();function pe(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(de)){let a=o(t);a&&(null!=a.left&&(e=Math.max(e,a.left)),null!=a.right&&(n=Math.max(n,a.right)),null!=a.top&&(i=Math.max(i,a.top)),null!=a.bottom&&(r=Math.max(r,a.bottom)))}return{left:e,right:n,top:i,bottom:r}}const fe=i.sj.define();class ge{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new ge(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,a=0;;i++){let s=i==t.length?null:t[i],l=o-a,c=s?s.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(a,t),s=Math.min(c,i);if(o<=s&&new ge(o+l,s+l,o,s).addToSet(n),i>c)break;r+=2}if(!s)return n;new ge(s.fromA,s.toA,s.fromB,s.toB).addToSet(n),o=s.toA,a=s.toB}}}class me{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=i.VR.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let r=[];this.changes.iterChangedRanges(((t,e,n,i)=>r.push(new ge(t,e,n,i)))),this.changedRanges=r}static create(t,e,n){return new me(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class ve extends P{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=st.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new pt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ge(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?r=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(r=t.state.selection.main.head));let o=r>-1?function(t,e,n){let i=ye(t,n);if(!i)return null;let{node:r,from:o,to:a}=i,s=r.nodeValue;if(/[\n\r]/.test(s))return null;if(t.state.doc.sliceString(i.from,i.to)!=s)return null;let l=e.invertedDesc,c=new ge(l.mapPos(o),l.mapPos(a),o,a),u=[];for(let e=r.parentNode;;e=e.parentNode){let n=P.get(e);if(n instanceof Z)u.push({node:e,deco:n.mark});else{if(n instanceof pt||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:e};if(e==t.contentDOM)return null;u.push({node:e,deco:new lt({inclusive:!0,attributes:rt(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new ge(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(q.ie||q.chrome)&&!o&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let a=function(t,e,n){let r=new be;return i.om.compare(t,e,n,r),r.changes}(this.decorations,this.updateDeco(),t.changes);return n=ge.extendWithRanges(n,a),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,o),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=q.chrome||q.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof ft&&t.widget instanceof gt&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,a,s,l,{fromA:c,toA:u,fromB:h,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>h){let t=mt.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=mt.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);a=t.breakAtStart,s=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:a,openStart:s,openEnd:l}=mt.build(this.view.state.doc,h,d,this.decorations,this.dynamicDecorationMap));let{i:p,off:f}=r.findPos(u,1),{i:g,off:m}=r.findPos(c,-1);L(this,g,m,p,f,o,a,s,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(Jt)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new W(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new Z(n,[e],e.length);let n=new pt;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=P.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(te)||this.dom.tabIndex>-1)&&l(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(s.anchor)),h=s.empty?c:this.moveToLine(this.domAtPos(s.head));if(q.gecko&&s.empty&&!this.hasComposition&&1==(d=c).node.nodeType&&d.node.firstChild&&(0==d.offset||"false"==d.node.childNodes[d.offset-1].contentEditable)&&(d.offset==d.node.childNodes.length||"false"==d.node.childNodes[d.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>c.node.insertBefore(t,c.node.childNodes[c.offset]||null))),c=h=new A(t,0),o=!0}var d;let p=this.view.observer.selectionRange;!o&&p.focusNode&&(u(c.node,c.offset,p.anchorNode,p.anchorOffset)&&u(h.node,h.offset,p.focusNode,p.focusOffset)||this.suppressWidgetCursorChange(p,s))||(this.view.observer.ignore((()=>{q.android&&q.chrome&&this.dom.contains(p.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(p.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=a(this.view.root);if(t)if(s.empty){if(q.gecko){let t=(e=c.node,i=c.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?T:E)(c.node,c.offset);e&&(c=new A(e.node,e.offset))}}t.collapse(c.node,c.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(c.node,c.offset);try{t.extend(h.node,h.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([c,h]=[h,c]),e.setEnd(h.node,h.offset),e.setStart(c.node,c.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new A(p.anchorNode,p.anchorOffset),this.impreciseHead=h.precise?null:new A(p.focusNode,p.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=a(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=pt.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let l=this.coordsAt(e.head,-1),c=this.coordsAt(e.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(e.head+e.assoc);n.collapse(u.node,u.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=P.get(n.childNodes[i]);t instanceof pt&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=P.get(n.childNodes[i]);t instanceof pt&&(e=t.domAtPos(t.length))}return e?new A(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=P.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof pt)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],s=r-a.breakAfter,l=s-a.length;if(s<t)break;if(l<=t&&(l<t||a.covers(-1))&&(s>t||a.covers(1))&&(!n||a instanceof pt&&!(n instanceof pt&&e>=0)))n=a,i=l;else if(n&&l==t&&s==t&&a instanceof ft&&Math.abs(e)<2){if(a.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),r=this.children[e];if(!(r instanceof pt))return null;for(;r.children.length;){let{i:t,off:e}=r.childPos(n,1);for(;;t++){if(t==r.children.length)return null;if((r=r.children[t]).length)break}n=e}if(!(r instanceof W))return null;let o=(0,i.zK)(r.text,n);if(o==n)return null;let a=x(r.dom,n,o).getClientRects();for(let t=0;t<a.length;t++){let e=a[t];if(t==a.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,s=this.view.textDirection==bt.LTR;for(let t=0,l=0;l<this.children.length;l++){let u=this.children[l],h=t+u.length;if(h>i)break;if(t>=n){let n=u.dom.getBoundingClientRect();if(e.push(n.height),o){let e=u.dom.lastChild,i=e?c(e):[];if(i.length){let e=i[i.length-1],o=s?e.right-n.left:n.right-e.left;o>a&&(a=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+u.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?bt.RTL:bt.LTR}measureTextSize(){for(let t of this.children)if(t instanceof pt){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=c(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new O(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(st.replace({widget:new gt(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return st.set(t)}updateDeco(){let t=1,e=this.view.state.facet(se).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,r=this.view.state.facet(le).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(r.length&&(this.dynamicDecorationMap[t++]=n,e.push(i.om.join(r))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(Yt))try{if(e(this.view,t.range,t))return!0}catch(t){Qt(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=pe(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:a,offsetHeight:s}=this.view.scrollDOM;!function(t,e,n,i,r,o,a,s){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,h=!1;u&&!h;)if(1==u.nodeType){let t,d=u==l.body,p=1,f=1;if(d)t=m(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let e=u.getBoundingClientRect();({scaleX:p,scaleY:f}=v(u,e)),t={left:e.left,right:e.left+u.clientWidth*p,top:e.top,bottom:e.top+u.clientHeight*f}}let g=0,y=0;if("nearest"==r)e.top<t.top?(y=e.top-(t.top+a),n>0&&e.bottom>t.bottom+y&&(y=e.bottom-t.bottom+a)):e.bottom>t.bottom&&(y=e.bottom-t.bottom+a,n<0&&e.top-y<t.top&&(y=e.top-(t.top+a)));else{let i=e.bottom-e.top,o=t.bottom-t.top;y=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-a:e.bottom-o+a)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==s?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||y)if(d)c.scrollBy(g,y);else{let t=0,n=0;if(y){let t=u.scrollTop;u.scrollTop+=y/f,n=(u.scrollTop-t)*f}if(g){let e=u.scrollLeft;u.scrollLeft+=g/p,t=(u.scrollLeft-e)*p}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-y)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,a),-a),Math.max(Math.min(t.yMargin,s),-s),this.view.textDirection==bt.LTR)}}function ye(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=T(n.focusNode,n.focusOffset),r=E(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=P.get(r.node);if(!e||e instanceof W&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=P.get(i.node);!t||t instanceof W&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}let be=class{constructor(){this.changes=[]}compareRange(t,e){dt(t,e,this.changes)}comparePoint(t,e){dt(t,e,this.changes)}boundChange(t){dt(t,t,this.changes)}};function we(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Se(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function xe(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function ke(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Ce(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Me(t,e,n){let i,r,o,a,s,l,u,h,d=!1;for(let p=t.firstChild;p;p=p.nextSibling){let t=c(p);for(let c=0;c<t.length;c++){let f=t[c];r&&xe(r,f)&&(f=ke(Ce(f,r.bottom),r.top));let g=we(e,f),m=Se(n,f);if(0==g&&0==m)return 3==p.nodeType?Te(p,e,n):Me(p,e,n);if(!i||a>m||a==m&&o>g){i=p,r=f,o=g,a=m;let s=m?n<f.top?-1:1:g?e<f.left?-1:1:0;d=!s||(s>0?c<t.length-1:c>0)}0==g?n>f.bottom&&(!u||u.bottom<f.bottom)?(s=p,u=f):n<f.top&&(!h||h.top>f.top)&&(l=p,h=f):u&&xe(u,f)?u=Ce(u,f.bottom):h&&xe(h,f)&&(h=ke(h,f.top))}}if(u&&u.bottom>=n?(i=s,r=u):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let p=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?Te(i,p,n):d&&"false"!=i.contentEditable?Me(i,p,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function Te(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,a=0;for(let s=0;s<i;s++){let i=x(t,s,s+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;a||(a=e-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<o){let n=e>=(c.left+c.right)/2,i=n;if((q.chrome||q.gecko)&&x(t,s).getBoundingClientRect().left==c.right&&(i=!n),u<=0)return{node:t,offset:s+(i?1:0)};r=s+(i?1:0),o=u}}}return{node:t,offset:r>-1?r:a>0?t.nodeValue.length:0}}function Ee(t,e,n,i=-1){var r,o;let a,s=t.contentDOM.getBoundingClientRect(),l=s.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:u,y:h}=e,d=h-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;a=t.elementAtHeight(d),a.type!=at.Text;)for(;d=i>0?a.bottom+e:a.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}h=l+d;let p=a.from;if(p<t.viewport.from)return 0==t.viewport.from?0:n?null:Ae(t,s,a,u,h);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Ae(t,s,a,u,h);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,h);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(s.left+1,Math.min(s.right-1,u)),v=m.elementFromPoint(u,h),v&&!t.contentDOM.contains(v)&&(v=null));let y,b=-1;if(v&&0!=(null===(r=t.docView.nearest(v))||void 0===r?void 0:r.isEditable)){if(g.caretPositionFromPoint){let t=g.caretPositionFromPoint(u,h);t&&({offsetNode:y,offset:b}=t)}else if(g.caretRangeFromPoint){let e=g.caretRangeFromPoint(u,h);e&&(({startContainer:y,startOffset:b}=e),(!t.contentDOM.contains(y)||q.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return x(t,i-1,i).getBoundingClientRect().left>n}(y,b,u)||q.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():x(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(y,b,u))&&(y=void 0))}y&&(b=Math.min(f(y),b))}if(!y||!t.docView.dom.contains(y)){let e=pt.find(t.docView,p);if(!e)return d>a.top+a.height/2?a.to:a.from;({node:y,offset:b}=Me(e.dom,u,h))}let w=t.docView.nearest(y);if(!w)return null;if(w.isWidget&&1==(null===(o=w.dom)||void 0===o?void 0:o.nodeType)){let t=w.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?w.posAtStart:w.posAtEnd}return w.localPosFromDOM(y,b)+w.posAtStart}function Ae(t,e,n,r,o){let a=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;a+=Math.floor((o-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+(0,i.kn)(s,a,t.state.tabSize)}function _e(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type))for(let t of n.type)if(t.to>e||t.to==e&&(t.to==n.to||t.type==at.Text))return t;return n}function Pe(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),a=t.textDirectionAt(r.from);for(let s=e,l=null;;){let e=Vt(r,o,a,s,n),c=Rt;if(!e){if(r.number==(n?t.state.doc.lines:1))return s;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return s}else{if(!i)return e;l=i(c)}s=e}}function De(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function Oe(t,e,n){let r=De(t.state.facet(ce).map((e=>e(t))),n.from,e.head>n.from?-1:1);return r==n.from?n:i.OF.cursor(r,r<n.from?1:-1)}const Le="￿";class Ie{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(i.$t.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Le}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=P.get(i),a=P.get(r);(o&&a?o.breakAfter:(o?o.breakAfter:d(i))||d(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,a=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,a=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=a-1);n=o+a}}readNode(t){if(t.cmIgnore)return;let e=P.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(Re(t,n.node,n.offset)?e:0))}}function Re(t,e,n){for(;;){if(!e||n<f(e))return!1;if(e==t)return!0;n=h(e)+1,e=e.parentNode}}class Ve{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class Ne{constructor(t,e,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:o,impreciseAnchor:a}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=o||a?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new Ve(n,i)),r==n&&o==i||e.push(new Ve(r,o))),e}(t),n=new Ie(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,r=2==t.length?t[1].pos:n;return n>-1&&r>-1?i.OF.single(n+e,r+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=o&&o.node==e.focusNode&&o.offset==e.focusOffset||!s(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),r=a&&a.node==e.anchorNode&&a.offset==e.anchorOffset||!s(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),l=t.viewport;if((q.ios||q.chrome)&&t.state.selection.main.empty&&n!=r&&(l.from>0||l.to<t.state.doc.length)){let e=Math.min(n,r),i=Math.max(n,r),o=l.from-e,a=l.to-i;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&i!=t.state.doc.length||(n=0,r=t.state.doc.length)}this.newSel=i.OF.single(r,n)}}}function Fe(t,e){let n,{newSel:r}=e,o=t.state.selection.main,a=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:r,to:s}=e.bounds,l=o.from,c=null;(8===a||q.android&&e.text.length<s-r)&&(l=o.to,c="end");let u=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let a=t.length,s=e.length;for(;a>0&&s>0&&t.charCodeAt(a-1)==e.charCodeAt(s-1);)a--,s--;return"end"==i&&(n-=a+Math.max(0,o-Math.min(a,s))-o),a<o&&t.length<e.length?(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o):s<o&&(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o),{from:o,toA:a,toB:s}}(t.state.doc.sliceString(r,s,Le),e.text,l-r,c);u&&(q.chrome&&13==a&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Le+Le&&u.toB--,n={from:r+u.from,to:r+u.toA,insert:i.EY.of(e.text.slice(u.from,u.toB).split(Le))})}else r&&(!t.hasFocus&&t.state.facet(te)||r.main.eq(o))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!o.empty&&r&&r.main.empty?n={from:o.from,to:o.to,insert:t.state.doc.slice(o.from,o.to)}:(q.mac||q.android)&&n&&n.from==n.to&&n.from==o.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=i.OF.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:i.EY.of([n.insert.toString().replace("."," ")])}):n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:t.state.doc.slice(o.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,o.to))}:q.chrome&&n&&n.from==n.to&&n.from==o.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(r&&(r=i.OF.single(r.main.anchor-1,r.main.head-1)),n={from:o.from,to:o.to,insert:i.EY.of([" "])}),n)return Be(t,n,r,a);if(r&&!r.main.eq(o)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:e,userEvent:n}),!0}return!1}function Be(t,e,n,r=-1){if(q.ios&&t.inputState.flushIOSKey(e))return!0;let o=t.state.selection.main;if(q.android&&(e.to==o.to&&(e.from==o.from||e.from==o.from-1&&" "==t.state.sliceDoc(e.from,o.from))&&1==e.insert.length&&2==e.insert.lines&&k(t.contentDOM,"Enter",13)||(e.from==o.from-1&&e.to==o.to&&0==e.insert.length||8==r&&e.insert.length<e.to-e.from&&e.to>o.head)&&k(t.contentDOM,"Backspace",8)||e.from==o.from&&e.to==o.to+1&&0==e.insert.length&&k(t.contentDOM,"Delete",46)))return!0;let a,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l=()=>a||(a=function(t,e,n){let r,o=t.state,a=o.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=a.from<e.from?o.sliceDoc(a.from,e.from):"",i=a.to>e.to?o.sliceDoc(e.to,a.to):"";r=o.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+i))}else{let s=o.changes(e),l=n&&n.main.to<=s.newLength?n.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let c,u=t.state.sliceDoc(e.from,e.to),h=n&&ye(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);c={from:h.from,to:h.to-t}}else c=t.state.doc.lineAt(a.head);let d=a.to-e.to,p=a.to-a.from;r=o.changeByRange((n=>{if(n.from==a.from&&n.to==a.to)return{changes:s,range:l||n.map(s)};let r=n.to-d,h=r-u.length;if(n.to-n.from!=p||t.state.sliceDoc(h,r)!=u||n.to>=c.from&&n.from<=c.to)return{range:n};let f=o.changes({from:h,to:r,insert:e.insert}),g=n.to-a.to;return{changes:f,range:l?i.OF.range(Math.max(0,l.anchor+g),Math.max(0,l.head+g)):n.map(f)}}))}else r={changes:s,selection:l&&o.selection.replaceRange(l)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),o.update(r,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(Gt).some((n=>n(t,e.from,e.to,s,l)))||t.dispatch(l()),!0}class ze{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,q.safari&&t.contentDOM.addEventListener("input",(()=>null)),q.gecko&&function(t){fn.has(t)||(fn.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=P.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=Ue(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&He.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),q.android&&q.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!q.ios||t.synthetic||t.altKey||t.metaKey||!((e=Ge.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||$e.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,k(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(q.safari&&!q.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function je(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){Qt(n.state,t)}}}function Ue(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(je(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(je(e.value,r))}}for(let t in Ze)n(t).handlers.push(Ze[t]);for(let t in Ye)n(t).observers.push(Ye[t]);return e}const Ge=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],$e="dthko",He=[16,17,18,20,91,92,224,225];function qe(t){return.7*Math.max(0,t)+8}class We{constructor(t,e,n,r){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(ce).map((e=>e(t)));let o=t.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(i.$t.allowMultipleSelections)&&function(t,e){let n=t.state.facet(Ft);return n.length?n[0](e):q.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=a(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=ln(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,a=0,s=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:a,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=pe(this.view);t.clientX-c.left<=o+6?i=-qe(o-t.clientX):t.clientX+c.right>=s-6&&(i=qe(t.clientX-s)),t.clientY-c.top<=a+6?r=-qe(a-t.clientY):t.clientY+c.bottom>=l-6&&(r=qe(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let r=t.ranges[n],o=null;if(r.empty){let t=De(this.atoms,r.from,0);t!=r.from&&(o=i.OF.cursor(t,-1))}else{let t=De(this.atoms,r.from,-1),e=De(this.atoms,r.to,1);t==r.from&&e==r.to||(o=i.OF.range(r.from==r.anchor?t:e,r.from==r.head?t:e))}o&&(e||(e=t.ranges.slice()),e[n]=o)}return e?i.OF.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const Ze=Object.create(null),Ye=Object.create(null),Ke=q.ie&&q.ie_version<15||q.ios&&q.webkit_version<604;function Xe(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function Je(t,e){e=Xe(t.state,Ht,e);let n,{state:r}=t,o=1,a=r.toText(e),s=a.lines==r.selection.ranges.length;if(null!=un&&r.selection.ranges.every((t=>t.empty))&&un==a.toString()){let t=-1;n=r.changeByRange((n=>{let l=r.doc.lineAt(n.from);if(l.from==t)return{range:n};t=l.from;let c=r.toText((s?a.line(o++).text:e)+r.lineBreak);return{changes:{from:l.from,insert:c},range:i.OF.cursor(n.from+c.length)}}))}else n=s?r.changeByRange((t=>{let e=a.line(o++);return{changes:{from:t.from,to:t.to,insert:e.text},range:i.OF.cursor(t.from+e.length)}})):r.replaceSelection(a);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function Qe(t,e,n,r){if(1==r)return i.OF.cursor(e,n);if(2==r)return function(t,e,n=1){let r=t.charCategorizer(e),o=t.doc.lineAt(e),a=e-o.from;if(0==o.length)return i.OF.cursor(e);0==a?n=1:a==o.length&&(n=-1);let s=a,l=a;n<0?s=(0,i.zK)(o.text,a,!1):l=(0,i.zK)(o.text,a);let c=r(o.text.slice(s,l));for(;s>0;){let t=(0,i.zK)(o.text,s,!1);if(r(o.text.slice(t,s))!=c)break;s=t}for(;l<o.length;){let t=(0,i.zK)(o.text,l);if(r(o.text.slice(l,t))!=c)break;l=t}return i.OF.range(s+o.from,l+o.from)}(t.state,e,n);{let n=pt.find(t.docView,e),r=t.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,a=n?n.posAtEnd:r.to;return a<t.state.doc.length&&a==r.to&&a++,i.OF.range(o,a)}}Ye.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},Ze.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),Ye.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},Ye.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},Ze.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(zt))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=nn(t,e),r=ln(e),o=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),o=o.map(t.changes))},get(e,a,s){let l,c=nn(t,e),u=Qe(t,c.pos,c.bias,r);if(n.pos!=c.pos&&!a){let e=Qe(t,n.pos,n.bias,r),o=Math.min(e.from,u.from),a=Math.max(e.to,u.to);u=o<u.from?i.OF.range(o,a):i.OF.range(a,o)}return a?o.replaceRange(o.main.extend(u.from,u.to)):s&&1==r&&o.ranges.length>1&&(l=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:o}=t.ranges[n];if(r<=e&&o>=e)return i.OF.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(o,c.pos))?l:s?o.addRange(u):i.OF.create([u])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new We(t,e,n,i)),i&&t.observer.ignore((()=>{S(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let tn=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function en(t,e,n,i){let r=pt.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let a=r.coordsAt(o,-1);if(a&&tn(n,i,a))return-1;let s=r.coordsAt(o,1);return s&&tn(n,i,s)?1:a&&a.bottom>=i?-1:1}function nn(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:en(t,n,e.clientX,e.clientY)}}const rn=q.ie&&q.ie_version<=11;let on=null,an=0,sn=0;function ln(t){if(!rn)return t.detail;let e=on,n=sn;return on=t,sn=Date.now(),an=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(an+1)%3:1}function cn(t,e,n,i){if(!(n=Xe(t.state,Ht,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,a=i&&o&&function(t,e){let n=t.state.facet(Bt);return n.length?n[0](e):q.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,s={from:r,insert:n},l=t.state.changes(a?[a,s]:s);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Ze.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let t=r.posAtStart,e=t+r.length;(t>=n.to||e<=n.from)&&(n=i.OF.range(t,e))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Xe(t.state,qt,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},Ze.dragend=t=>(t.inputState.draggedContent=null,!1),Ze.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&cn(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return cn(t,e,n,!0),!0}return!1},Ze.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Ke?null:e.clipboardData;return n?(Je(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),Je(t,n.value)}),50)}(t),!1)};let un=null;Ze.copy=Ze.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Xe(t,qt,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;un=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Ke?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const hn=i.YH.define();function dn(t,e){let n=[];for(let i of t.facet($t)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:hn.of(!0)}):null}function pn(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=dn(t.state,e);n?t.dispatch(n):t.update([])}}),10)}Ye.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),pn(t)},Ye.blur=t=>{t.observer.clearSelectionRange(),pn(t)},Ye.compositionstart=Ye.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},Ye.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,q.chrome&&q.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},Ye.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},Ze.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return Be(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(q.chrome&&q.android&&(r=Ge.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return q.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),q.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>Ye.compositionend(t,e)),20),!1};const fn=new Set,gn=["pre-wrap","normal","pre-line","break-spaces"];let mn=!1;function vn(){mn=!1}class yn{constructor(t){this.lineWrapping=t,this.doc=i.EY.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return gn.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let a=gn.indexOf(t)>-1,s=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,s){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return s}}class bn{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class wn{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?at.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ut?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new wn(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Sn=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Sn||(Sn={}));const xn=.001;class kn{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>xn&&(mn=!0),this.height=t)}replace(t,e,n){return kn.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let a=i.length-1;a>=0;a--){let{fromA:s,toA:l,fromB:c,toB:u}=i[a],h=r.lineAt(s,Sn.ByPosNoHeight,n.setDoc(e),0,0),d=h.to>=l?h:r.lineAt(l,Sn.ByPosNoHeight,n,0,0);for(u+=d.to-l,l=d.to;a>0&&h.from<=i[a-1].toA;)s=i[a-1].fromA,c=i[a-1].fromB,a--,s<h.from&&(h=r.lineAt(s,Sn.ByPosNoHeight,n,0,0));c+=h.from-s,s=h.from;let p=Pn.build(n.setDoc(o),t,c,u);r=Cn(r,r.replace(s,l,p))}return r.updateHeight(n,0)}static empty(){return new Tn(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new An(kn.of(t.slice(0,e)),o,kn.of(t.slice(n)))}}function Cn(t,e){return t==e?t:(t.constructor!=e.constructor&&(mn=!0),e)}kn.prototype.size=1;class Mn extends kn{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new wn(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Tn extends Mn{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new wn(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof Tn||i instanceof En&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof En?i=new Tn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):kn.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class En extends kn{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,a=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(a=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:a}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:a,perChar:s}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=a+o.length*s,c=Math.max(n,t-l/2);return new wn(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/a))),{from:s,length:l}=e.doc.line(r+i);return new wn(s,l,n+a*i,a,0)}}lineAt(t,e,n,i,r){if(e==Sn.ByHeight)return this.blockAt(t,n,i,r);if(e==Sn.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new wn(e,i-e,0,0,0)}let{firstLine:o,perLine:a,perChar:s}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=a+l.length*s,u=l.number-o,h=i+a*u+s*(l.from-r-u);return new wn(l.from,l.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:a,perLine:s,perChar:l}=this.heightMetrics(n,r);for(let c=t,u=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-a;u+=s*n+l*(t-r-n)}let i=s+l*e.length;o(new wn(e.from,e.length,u,i,0)),u+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof En?n[n.length-1]=new En(t.length+i):n.push(null,new En(i-1))}if(t>0){let e=n[0];e instanceof En?n[0]=new En(t+e.length):n.unshift(new En(t-1),null)}return kn.of(n)}decomposeLeft(t,e){e.push(new En(t-1),null)}decomposeRight(t,e){e.push(null,new En(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),a=-1;for(i.from>e&&n.push(new En(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==a?a=r:Math.abs(r-a)>=xn&&(a=-2);let s=new Tn(e,r);s.outdated=!1,n.push(s),o+=e+1}o<=r&&n.push(null,new En(r-o).updateHeight(t,o));let s=kn.of(n);return(a<0||Math.abs(s.height-this.height)>=xn||Math.abs(a-this.heightMetrics(t,e).perLine)>=xn)&&(mn=!0),Cn(this,s)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class An extends kn{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,a=r+this.left.length+this.break,s=e==Sn.ByHeight?t<o:t<a,l=s?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,a);if(this.break||(s?l.to<a:l.from>a))return l;let c=e==Sn.ByPosNoHeight?Sn.ByPosNoHeight:Sn.ByPos;return s?l.join(this.right.lineAt(a,c,n,o,a)):this.left.lineAt(a,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let a=i+this.left.height,s=r+this.left.length+this.break;if(this.break)t<s&&this.left.forEachLine(t,e,n,i,r,o),e>=s&&this.right.forEachLine(t,e,n,a,s,o);else{let l=this.lineAt(s,Sn.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,a,s,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&_n(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),_n(r,t)}return kn.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?kn.of(this.break?[t,null,e]:[t,e]):(this.left=Cn(this.left,t),this.right=Cn(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,a=e+r.length+this.break,s=null;return i&&i.from<=e+r.length&&i.more?s=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=a+o.length&&i.more?s=o=o.updateHeight(t,a,n,i):o.updateHeight(t,a,n),s?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function _n(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof En&&(i=t[e+1])instanceof En&&t.splice(e-1,3,new En(n.length+1+i.length))}class Pn{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Tn?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new Tn(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new Mn(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Tn(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new En(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Tn)return t;let e=new Tn(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof Tn||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Tn(0,-1));let n=t;for(let t of this.nodes)t instanceof Tn&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,r){let o=new Pn(n,t);return i.om.spans(e,n,r,o,0),o.finish(n)}}class Dn{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&dt(t,e,this.changes,5)}}function On(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),a=Math.min(r.innerWidth,n.right),s=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),a=Math.min(a,i.right),s=Math.max(s,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+e),bottom:Math.max(s,l)-(n.top+e)}}function Ln(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class In{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return st.replace({widget:new Rn(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class Rn extends ot{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Vn{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=zn,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=bt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(ae).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new yn(e),this.stateDeco=t.facet(se).filter((t=>"function"!=typeof t)),this.heightMap=kn.empty().applyChanges(this.stateDeco,i.EY.empty,this.heightOracle.setDoc(t.doc),[new ge(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=st.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new Nn(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?zn:new jn(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(Un(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(se).filter((t=>"function"!=typeof t));let r=t.changedRanges,o=ge.extendWithRanges(r,function(t,e,n){let r=new Dn;return i.om.compare(t,e,n,r,0),r.changes}(n,this.stateDeco,t?t.changes:i.VR.empty(this.state.doc.length))),a=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);vn(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||mn)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<l.from||e.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,e));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,t.flags|=this.updateForViewport(),(c||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Zt)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),r=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?bt.RTL:bt.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),s=e.getBoundingClientRect(),l=a||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let c=0,u=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=v(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,c|=16,a=l=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,d=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==d||(this.paddingTop=h,this.paddingBottom=d,c|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,c|=16);let p=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=M(t.scrollDOM);let f=(this.printing?Ln:On)(e,this.paddingTop),g=f.top-this.pixelViewport.top,m=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let b=s.width;if(this.contentDOMWidth==b&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,c|=16),l){let e=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(e)&&(a=!0),a||r.lineWrapping&&Math.abs(b-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:i,textHeight:s}=t.docView.measureTextSize();a=n>0&&r.refresh(o,n,i,s,b/i,e),a&&(t.docView.minWidth=0,c|=16)}g>0&&m>0?u=Math.max(g,m):g<0&&m<0&&(u=Math.min(g,m)),vn();for(let n of this.viewports){let o=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(a?kn.empty().applyChanges(this.stateDeco,i.EY.empty,this.heightOracle,[new ge(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(r,0,a,new bn(n.from,o))}mn&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(2&c&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(2&c||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,t)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,s=new Nn(i.lineAt(o-1e3*n,Sn.ByHeight,r,0,0).from,i.lineAt(a+1e3*(1-n),Sn.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<s.from||t>s.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),a=i.lineAt(t,Sn.ByPos,r,0,0);n="center"==e.y?(a.top+a.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<s.from?a.top:a.bottom-o,s=new Nn(i.lineAt(n-500,Sn.ByHeight,r,0,0).from,i.lineAt(n+o+500,Sn.ByHeight,r,0,0).to)}}return s}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new Nn(this.heightMap.lineAt(n,Sn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Sn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,Sn.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,Sn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=a+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<a+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new In(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,o=r>>1,a=r<<1;if(this.defaultTextDirection!=bt.LTR&&!n)return[];let s=[],l=(r,a,c,u)=>{if(a-r<o)return;let h=this.state.selection.main,d=[h.from];h.empty||d.push(h.to);for(let t of d)if(t>r&&t<a)return l(r,t-10,c,u),void l(t+10,a,c,u);let p=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=c.from&&t.to<=c.to&&Math.abs(t.from-r)<o&&Math.abs(t.to-a)<o&&!d.some((e=>t.from<e&&t.to>e))));if(!p){if(a<c.to&&e&&n&&e.visibleRanges.some((t=>t.from<=a&&t.to>=a))){let t=e.moveToLineBoundary(i.OF.cursor(a),!1,!0).head;t>r&&(a=t)}let t=this.gapSize(c,r,a,u);p=new In(r,a,t,n||t<2e6?t:2e6)}s.push(p)},c=e=>{if(e.length<a||e.type!=at.Text)return;let o=function(t,e,n){let r=[],o=t,a=0;return i.om.spans(n,t,e,{span(){},point(t,e){t>o&&(r.push({from:o,to:t}),a+=t-o),o=e}},20),o<e&&(r.push({from:o,to:e}),a+=e-o),{total:a,ranges:r}}(e.from,e.to,this.stateDeco);if(o.total<a)return;let s,c,u=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,i=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=u){let r=Bn(o,u),a=((this.visibleBottom-this.visibleTop)/2+i)/e.height;t=r-a,n=r+a}else t=(this.visibleTop-e.top-i)/e.height,n=(this.visibleBottom-e.top+i)/e.height;s=Fn(o,t),c=Fn(o,n)}else{let n=o.total*this.heightOracle.charWidth,i=r*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let l,h,d=this.pixelViewport.left+a,p=this.pixelViewport.right+a;if(null!=u){let t=Bn(o,u),e=((p-d)/2+i)/n;l=t-e,h=t+e}else l=(d-i)/n,h=(p+i)/n;s=Fn(o,l),c=Fn(o,h)}s>e.from&&l(e.from,s,e,o),c<e.to&&l(c,e.to,e,o)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(c):c(t);return s}gapSize(t,e,n,i){let r=Bn(i,n)-Bn(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){In.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=st.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];i.om.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let e=0;e<n.length&&!(8&r);e++){let i=this.visibleRanges[e],o=n[e];i.from==o.from&&i.to==o.to||(r|=4,t&&t.mapPos(i.from,-1)==o.from&&t.mapPos(i.to,1)==o.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||Un(this.heightMap.lineAt(t,Sn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||Un(this.heightMap.lineAt(this.scaler.fromDOM(t),Sn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Un(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Nn{constructor(t,e){this.from=t,this.to=e}}function Fn({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function Bn(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const zn={toDOM:t=>t,fromDOM:t=>t,scale:1,eq(t){return t==this}};class jn{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,Sn.ByPos,t,0,0).top,a=e.lineAt(r,Sn.ByPos,t,0,0).bottom;return i+=a-o,{from:n,to:r,top:o,bottom:a,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof jn&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function Un(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new wn(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>Un(t,e))):t._content)}const Gn=i.sj.define({combine:t=>t.join(" ")}),$n=i.sj.define({combine:t=>t.indexOf(!0)>-1}),Hn=r.G.newName(),qn=r.G.newName(),Wn=r.G.newName(),Zn={"&light":"."+qn,"&dark":"."+Wn};function Yn(t,e,n){return new r.G(e,{finish:e=>/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e})}const Kn=Yn("."+Hn,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Zn),Xn={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Jn=q.ie&&q.ie_version<=11;class Qn{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new y,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(q.ie&&q.ie_version<=11||q.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||q.chrome&&q.chrome_version<126||(this.editContext=new ni(t),t.state.facet(te)&&(t.contentDOM.editContext=this.editContext.editContext)),Jn&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(te)?n.root.activeElement!=this.dom:!l(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(q.ie&&q.ie_version<=11||q.android&&q.chrome)&&!n.state.selection.main.empty&&i.focusNode&&u(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=a(t.root);if(!e)return!1;let n=q.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return ei(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?ei(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=l(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,f(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=f(n))}else{if(n==t)return!0;i=h(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Xn),Jn&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Jn&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&k(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&l(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new Ne(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=Fe(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=ti(e,t.previousSibling||t.target.previousSibling,-1),i=ti(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(te)!=t.state.facet(te)&&(t.view.contentDOM.editContext=t.state.facet(te)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ti(t,e,n){for(;e;){let i=P.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function ei(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return u(a.node,a.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class ni{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:r,head:o}=n,a=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:a,drifted:!1});let l={from:a,to:s,insert:i.EY.of(e.text.split("\n"))};if(l.from==this.from&&r<this.from?l.from=r:l.to==this.to&&r>this.to&&(l.to=r),l.from!=l.to||l.insert.length){if((q.mac||q.android)&&l.from==o-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(l={from:a,to:s,insert:i.EY.of([e.text.replace("."," ")])}),this.pendingContextChange=l,!t.state.readOnly){let n=this.to-this.from+(l.to-l.from+l.insert.length);Be(t,l,i.OF.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let r=i.OF.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));r.main.eq(n)||t.dispatch({selection:r,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(st.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:Jt.of(st.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=a(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,a,s,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class ii{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new Vn(t.state||i.$t.create(t)),t.scrollTo&&t.scrollTo.is(Xt)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ne).map((t=>new re(t)));for(let t of this.plugins)t.update(this);this.observer=new Qn(this),this.inputState=new ze(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ve(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof i.ZX?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,r=!1,o=this.state;for(let e of t){if(e.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=e.state}if(this.destroyed)return void(this.viewState.state=o);let a=this.hasFocus,s=0,l=null;t.some((t=>t.annotation(hn)))?(this.inputState.notifiedFocused=a,s=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,l=dn(o,a),l||(s=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(u=null)):this.observer.clear(),o.facet(i.$t.phrases)!=this.state.facet(i.$t.phrases))return this.setState(o);e=me.create(this,o,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new Kt(t.empty?t:i.OF.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(Xt)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=ai.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(fe)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(Gn)!=e.state.facet(Gn)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(Ut))try{t(e)}catch(t){Qt(this.state,t,"update listener")}(l||u)&&Promise.resolve().then((()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!Fe(this,u)&&c.force&&k(this.contentDOM,c.key,c.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new Vn(t),this.plugins=t.facet(ne).map((t=>new re(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new ve(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(ne),n=t.state.facet(ne);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new re(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){Qt(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if(M(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let s=[];4&a||([this.measureRequests,s]=[s,this.measureRequests]);let l=s.map((t=>{try{return t.read(this)}catch(t){return Qt(this.state,t),oi}})),c=me.create(this,this.state,[]),u=!1;c.flags|=a,e?e.flags|=a:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),u=this.docView.update(c),u&&this.docViewUpdate());for(let t=0;t<s.length;t++)if(l[t]!=oi)try{let e=s[t];e.write&&e.write(l[t],this)}catch(t){Qt(this.state,t)}if(u&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(Ut))t(e)}get themeClasses(){return Hn+" "+(this.state.facet($n)?Wn:qn)+" "+this.state.facet(Gn)}updateAttrs(){let t=si(this,oe,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(te)?"true":"false",class:"cm-content",style:`${q.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),si(this,ae,e);let n=this.observer.ignore((()=>{let n=it(this.contentDOM,this.contentAttrs,e),i=it(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(ii.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(fe);let t=this.state.facet(ii.cspNonce);r.G.mount(this.root,this.styleModules.concat(Kn).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return Oe(this,t,Pe(this,t,e,n))}moveByGroup(t,e){return Oe(this,t,Pe(this,t,e,(e=>function(t,e,n){let r=t.state.charCategorizer(e),o=r(n);return t=>{let e=r(t);return o==i.Je.Space&&(o=e),o==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),r=this.textDirectionAt(t.from),o=n[e?n.length-1:0];return i.OF.cursor(o.side(e,r)+t.from,o.forward(!e,r)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,r){let o=_e(t,e.head),a=r&&o.type==at.Text&&(t.lineWrapping||o.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head):null;if(a){let e=t.dom.getBoundingClientRect(),r=t.textDirectionAt(o.from),s=t.posAtCoords({x:n==(r==bt.LTR)?e.right-1:e.left+1,y:(a.top+a.bottom)/2});if(null!=s)return i.OF.cursor(s,n?-1:1)}return i.OF.cursor(n?o.to:o.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return Oe(this,t,function(t,e,n,r){let o=e.head,a=n?1:-1;if(o==(n?t.state.doc.length:0))return i.OF.cursor(o,e.assoc);let s,l=e.goalColumn,c=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(o,e.assoc||-1),h=t.documentTop;if(u)null==l&&(l=u.left-c.left),s=a<0?u.top:u.bottom;else{let e=t.viewState.lineBlockAt(o);null==l&&(l=Math.min(c.right-c.left,t.defaultCharacterWidth*(o-e.from))),s=(a<0?e.top:e.bottom)+h}let d=c.left+l,p=null!=r?r:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(p+e)*a,r=Ee(t,{x:d,y:n},!1,a);if(n<c.top||n>c.bottom||(a<0?r<o:r>o)){let e=t.docView.coordsForChar(r),o=!e||n<e.top?-1:1;return i.OF.cursor(r,o,void 0,l)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),Ee(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return g(n,r[_t.find(r,t-i.from,-1,e)].dir==bt.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Wt)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>ri)return It(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||Pt(i.isolates,e=he(this,t))))return i.order;e||(e=he(this,t));let i=function(t,e,n){if(!t)return[new _t(0,0,e==St?1:0)];if(e==wt&&!n.length&&!At.test(t))return It(t.length);if(n.length)for(;t.length>Dt.length;)Dt[Dt.length]=256;let i=[],r=e==wt?0:1;return Lt(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new ai(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||q.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{S(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Xt.of(new Kt("number"==typeof t?i.OF.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return Xt.of(new Kt(i.OF.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return ie.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return ie.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=r.G.newName(),i=[Gn.of(n),fe.of(Yn(`.${n}`,t))];return e&&e.dark&&i.push($n.of(!0)),i}static baseTheme(t){return i.Nb.lowest(fe.of(Yn("."+Hn,t,Zn)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&P.get(n)||P.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}ii.styleModule=fe,ii.inputHandler=Gt,ii.clipboardInputFilter=Ht,ii.clipboardOutputFilter=qt,ii.scrollHandler=Yt,ii.focusChangeEffect=$t,ii.perLineTextDirection=Wt,ii.exceptionSink=jt,ii.updateListener=Ut,ii.editable=te,ii.mouseSelectionStyle=zt,ii.dragMovesSelection=Bt,ii.clickAddsSelectionRange=Ft,ii.decorations=se,ii.outerDecorations=le,ii.atomicRanges=ce,ii.bidiIsolatedRanges=ue,ii.scrollMargins=de,ii.darkTheme=$n,ii.cspNonce=i.sj.define({combine:t=>t.length?t[0]:""}),ii.contentAttributes=ae,ii.editorAttributes=oe,ii.lineWrapping=ii.contentAttributes.of({class:"cm-lineWrapping"}),ii.announce=i.Pe.define();const ri=4096,oi={};class ai{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:bt.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new ai(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function si(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&tt(o,n)}return n}const li=q.mac?"mac":q.windows?"win":q.linux?"linux":"key";function ci(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const ui=i.Nb.default(ii.domEventHandlers({keydown:(t,e)=>yi(pi(e.state),t,e,"editor")})),hi=i.sj.define({enables:ui}),di=new WeakMap;function pi(t){let e=t.facet(hi),n=di.get(e);return n||di.set(e,n=function(t,e=li){let n=Object.create(null),i=Object.create(null),r=(t,e)=>{let n=i[t];if(null==n)i[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},o=(t,i,o,a,s)=>{var l,c;let u=n[t]||(n[t]=Object.create(null)),h=i.split(/ (?!$)/).map((t=>function(t,e){const n=t.split(/-(?!$)/);let i,r,o,a,s=n[n.length-1];"Space"==s&&(s=" ");for(let t=0;t<n.length-1;++t){const s=n[t];if(/^(cmd|meta|m)$/i.test(s))a=!0;else if(/^a(lt)?$/i.test(s))i=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else if(/^s(hift)?$/i.test(s))o=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);"mac"==e?a=!0:r=!0}}return i&&(s="Alt-"+s),r&&(s="Ctrl-"+s),a&&(s="Meta-"+s),o&&(s="Shift-"+s),s}(t,e)));for(let e=1;e<h.length;e++){let n=h.slice(0,e).join(" ");r(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[e=>{let i=gi={view:e,prefix:n,scope:t};return setTimeout((()=>{gi==i&&(gi=null)}),mi),!0}]})}let d=h.join(" ");r(d,!1);let p=u[d]||(u[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&p.run.push(o),a&&(p.preventDefault=!0),s&&(p.stopPropagation=!0)};for(let i of t){let t=i.scope?i.scope.split(" "):["editor"];if(i.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:r}=i;for(let e in t)t[e].run.push((t=>r(t,vi)))}let r=i[e]||i.key;if(r)for(let e of t)o(e,r,i.run,i.preventDefault,i.stopPropagation),i.shift&&o(e,"Shift-"+r,i.shift,i.preventDefault,i.stopPropagation)}return n}(e.reduce(((t,e)=>t.concat(e)),[]))),n}function fi(t,e,n){return yi(pi(t.state),e,t,n)}let gi=null;const mi=4e3;let vi=null;function yi(t,e,n,r){vi=e;let a=(0,o.xT)(e),s=(0,i.vS)(a,0),l=(0,i.Fh)(s)==a.length&&" "!=a,c="",u=!1,h=!1,d=!1;gi&&gi.view==n&&gi.scope==r&&(c=gi.prefix+" ",He.indexOf(e.keyCode)<0&&(h=!0,gi=null));let p,f,g=new Set,m=t=>{if(t){for(let e of t.run)if(!g.has(e)&&(g.add(e),e(n)))return t.stopPropagation&&(d=!0),!0;t.preventDefault&&(t.stopPropagation&&(d=!0),h=!0)}return!1},v=t[r];return v&&(m(v[c+ci(a,e,!l)])?u=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(q.windows&&e.ctrlKey&&e.altKey)&&(p=o.E3[e.keyCode])&&p!=a?(m(v[c+ci(p,e,!0)])||e.shiftKey&&(f=o.BN[e.keyCode])!=a&&f!=p&&m(v[c+ci(f,e,!1)]))&&(u=!0):l&&e.shiftKey&&m(v[c+ci(a,e,!0)])&&(u=!0),!u&&m(v._any)&&(u=!0)),h&&(u=!0),u&&d&&e.stopPropagation(),vi=null,u}class bi{constructor(t,e,n,i,r){this.className=t,this.left=e,this.top=n,this.width=i,this.height=r}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className==this.className&&(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",null!=this.width&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,n){if(n.empty){let i=t.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let r=wi(t);return[new bi(e,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}return function(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),o=t.textDirection==bt.LTR,a=t.contentDOM,s=a.getBoundingClientRect(),l=wi(t),c=a.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=s.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=s.right-(u?parseInt(u.paddingRight):0),p=_e(t,i),f=_e(t,r),g=p.type==at.Text?p:null,m=f.type==at.Text?f:null;if(g&&(t.lineWrapping||p.widgetLineBreaks)&&(g=Si(t,i,1,g)),m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=Si(t,r,-1,m)),g&&m&&g.from==m.from&&g.to==m.to)return y(b(n.from,n.to,g));{let e=g?b(n.from,null,g):w(p,!1),i=m?b(null,n.to,m):w(f,!0),r=[];return(g||p).to<(m||f).from-(g&&m?1:0)||p.widgetLineBreaks>1&&e.bottom+t.defaultLineHeight/2<i.top?r.push(v(h,e.bottom,d,i.top)):e.bottom<i.top&&t.elementAtHeight((e.bottom+i.top)/2).type==at.Text&&(e.bottom=i.top=(e.bottom+i.top)/2),y(e).concat(r).concat(y(i))}function v(t,n,i,r){return new bi(e,t-l.left,n-l.top,i-t,r-n)}function y({top:t,bottom:e,horizontal:n}){let i=[];for(let r=0;r<n.length;r+=2)i.push(v(n[r],t,n[r+1],e));return i}function b(e,n,i){let r=1e9,a=-1e9,s=[];function l(e,n,l,c,u){let p=t.coordsAtPos(e,e==i.to?-2:2),f=t.coordsAtPos(l,l==i.from?2:-2);p&&f&&(r=Math.min(p.top,f.top,r),a=Math.max(p.bottom,f.bottom,a),u==bt.LTR?s.push(o&&n?h:p.left,o&&c?d:f.right):s.push(!o&&c?h:f.left,!o&&n?d:p.right))}let c=null!=e?e:i.from,u=null!=n?n:i.to;for(let i of t.visibleRanges)if(i.to>c&&i.from<u)for(let r=Math.max(i.from,c),o=Math.min(i.to,u);;){let i=t.state.doc.lineAt(r);for(let a of t.bidiSpans(i)){let t=a.from+i.from,s=a.to+i.from;if(t>=o)break;s>r&&l(Math.max(t,r),null==e&&t<=c,Math.min(s,o),null==n&&s>=u,a.dir)}if(r=i.to+1,r>=o)break}return 0==s.length&&l(c,null==e,u,null==n,t.textDirection),{top:r,bottom:a,horizontal:s}}function w(t,e){let n=s.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}(t,e,n)}}function wi(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==bt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function Si(t,e,n,i){let r=t.coordsAtPos(e,2*n);if(!r)return i;let o=t.dom.getBoundingClientRect(),a=(r.top+r.bottom)/2,s=t.posAtCoords({x:o.left+1,y:a}),l=t.posAtCoords({x:o.right-1,y:a});return null==s||null==l?i:{from:Math.max(i.from,Math.min(s,l)),to:Math.min(i.to,Math.max(s,l))}}class xi{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(ki)!=t.state.facet(ki)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){!1!==this.layer.updateOnDocViewUpdate&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,n=t.facet(ki);for(;e<n.length&&n[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;t==this.scaleX&&e==this.scaleY||(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some(((t,e)=>{return n=t,i=this.drawn[e],!(n.constructor==i.constructor&&n.eq(i));var n,i}))){let e=this.dom.firstChild,n=0;for(let i of t)i.update&&e&&i.constructor&&this.drawn[n].constructor&&i.update(e,this.drawn[n])?(e=e.nextSibling,n++):this.dom.insertBefore(i.draw(),e);for(;e;){let t=e.nextSibling;e.remove(),e=t}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ki=i.sj.define();function Ci(t){return[ie.define((e=>new xi(e,t))),ki.of(t)]}const Mi=!(q.ios&&q.webkit&&q.webkit_version<534),Ti=i.sj.define({combine:t=>(0,i.QR)(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})});function Ei(t={}){return[Ti.of(t),_i,Di,Li,Zt.of(!0)]}function Ai(t){return t.startState.facet(Ti)!=t.state.facet(Ti)}const _i=Ci({above:!0,markers(t){let{state:e}=t,n=e.facet(Ti),r=[];for(let o of e.selection.ranges){let a=o==e.selection.main;if(o.empty?!a||Mi:n.drawRangeCursor){let e=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=o.empty?o:i.OF.cursor(o.head,o.head>o.anchor?-1:1);for(let i of bi.forRange(t,e,n))r.push(i)}}return r},update(t,e){t.transactions.some((t=>t.selection))&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let n=Ai(t);return n&&Pi(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Pi(e.state,t)},class:"cm-cursorLayer"});function Pi(t,e){e.style.animationDuration=t.facet(Ti).cursorBlinkRate+"ms"}const Di=Ci({above:!1,markers:t=>t.state.selection.ranges.map((e=>e.empty?[]:bi.forRange(t,"cm-selectionBackground",e))).reduce(((t,e)=>t.concat(e))),update:(t,e)=>t.docChanged||t.selectionSet||t.viewportChanged||Ai(t),class:"cm-selectionLayer"}),Oi={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Mi&&(Oi[".cm-line"].caretColor=Oi[".cm-content"].caretColor="transparent !important");const Li=i.Nb.highest(ii.theme(Oi)),Ii=i.Pe.define({map:(t,e)=>null==t?null:e.mapPos(t)}),Ri=i.sU.define({create:()=>null,update:(t,e)=>(null!=t&&(t=e.changes.mapPos(t)),e.effects.reduce(((t,e)=>e.is(Ii)?e.value:t),t))}),Vi=ie.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Ri);null==n?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Ri)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Ri),n=null!=e&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Ri)!=t&&this.view.dispatch({effects:Ii.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){t.target!=this.view.contentDOM&&this.view.contentDOM.contains(t.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Ni(){return[Ri,Vi]}function Fi(t,e,n,i,r){e.lastIndex=0;for(let o,a=t.iterRange(n,i),s=n;!a.next().done;s+=a.value.length)if(!a.lineBreak)for(;o=e.exec(a.value);)r(s+o.index,o)}class Bi{constructor(t){const{regexp:e,decoration:n,decorate:i,boundary:r,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,i)this.addMatch=(t,e,n,r)=>i(r,n,n+t[0].length,t,e);else if("function"==typeof n)this.addMatch=(t,e,i,r)=>{let o=n(t,e,i);o&&r(i,i+t[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(t,e,i,r)=>r(i,i+t[0].length,n)}this.boundary=r,this.maxLength=o}createDeco(t){let e=new i.vB,n=e.add.bind(e);for(let{from:e,to:i}of function(t,e){let n=t.visibleRanges;if(1==n.length&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:o}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}(t,this.maxLength))Fi(t.state.doc,this.regexp,e,i,((e,i)=>this.addMatch(i,t,e,n)));return e.finish()}updateDeco(t,e){let n=1e9,i=-1;return t.docChanged&&t.changes.iterChanges(((e,r,o,a)=>{a>=t.view.viewport.from&&o<=t.view.viewport.to&&(n=Math.min(o,n),i=Math.max(a,i))})),t.viewportMoved||i-n>1e3?this.createDeco(t.view):i>-1?this.updateRange(t.view,e.map(t.changes),n,i):e}updateRange(t,e,n,i){for(let r of t.visibleRanges){let o=Math.max(r.from,n),a=Math.min(r.to,i);if(a>o){let n=t.state.doc.lineAt(o),i=n.to<a?t.state.doc.lineAt(a):n,s=Math.max(r.from,n.from),l=Math.min(r.to,i.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){s=o;break}for(;a<i.to;a++)if(this.boundary.test(i.text[a-i.from])){l=a;break}}let c,u=[],h=(t,e,n)=>u.push(n.range(t,e));if(n==i)for(this.regexp.lastIndex=s-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,t,c.index+n.from,h);else Fi(t.state.doc,this.regexp,s,l,((e,n)=>this.addMatch(n,t,e,h)));e=e.update({filterFrom:s,filterTo:l,filter:(t,e)=>t<s||e>l,add:u})}}return e}}const zi=null!=/x/.unicode?"gu":"g",ji=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",zi),Ui={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Gi=null;const $i=i.sj.define({combine(t){let e=(0,i.QR)(t,{render:null,specialChars:ji,addSpecialChars:null});return(e.replaceTabs=!function(){var t;if(null==Gi&&"undefined"!=typeof document&&document.body){let e=document.body.style;Gi=null!=(null!==(t=e.tabSize)&&void 0!==t?t:e.MozTabSize)}return Gi||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,zi)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,zi)),e}});function Hi(t={}){return[$i.of(t),qi||(qi=ie.fromClass(class{constructor(t){this.view=t,this.decorations=st.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet($i)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Bi({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:o}=n.state,a=(0,i.vS)(e[0],0);if(9==a){let t=o.lineAt(r),e=n.state.tabSize,a=(0,i.y$)(t.text,e,r-t.from);return st.replace({widget:new Zi((e-a%e)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=st.replace({widget:new Wi(t,a)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet($i);t.startState.facet($i)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))]}let qi=null;class Wi extends ot{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=(n=this.code)>=32?"•":10==n?"␤":String.fromCharCode(9216+n);var n;let i=t.state.phrase("Control character")+" "+(Ui[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,e);if(r)return r;let o=document.createElement("span");return o.textContent=e,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Zi extends ot{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="\t",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function Yi(){return Xi}const Ki=st.line({class:"cm-activeLine"}),Xi=ie.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Ki.range(r.from)),e=r.from)}return st.set(n)}},{decorations:t=>t.decorations}),Ji=2e3;function Qi(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),o=n-r.from,a=o>Ji?-1:o==r.length?function(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):(0,i.y$)(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:a,off:o}}function tr(t){let e=(null==t?void 0:t.eventFilter)||(t=>t.altKey&&0==t.button);return ii.mouseSelectionStyle.of(((t,n)=>e(n)?function(t,e){let n=Qi(t,e),r=t.state.selection;return n?{update(t){if(t.docChanged){let e=t.changes.mapPos(t.startState.doc.line(n.line).from),i=t.state.doc.lineAt(e);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(t.changes)}},get(e,o,a){let s=Qi(t,e);if(!s)return r;let l=function(t,e,n){let r=Math.min(e.line,n.line),o=Math.max(e.line,n.line),a=[];if(e.off>Ji||n.off>Ji||e.col<0||n.col<0){let s=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let e=r;e<=o;e++){let n=t.doc.line(e);n.length<=l&&a.push(i.OF.range(n.from+s,n.to+l))}}else{let s=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let e=r;e<=o;e++){let n=t.doc.line(e),r=(0,i.kn)(n.text,s,t.tabSize,!0);if(r<0)a.push(i.OF.cursor(n.to));else{let e=(0,i.kn)(n.text,l,t.tabSize);a.push(i.OF.range(n.from+r,n.from+e))}}}return a}(t.state,n,s);return l.length?a?i.OF.create(l.concat(r.ranges)):i.OF.create(l):r}}:null}(t,n):null))}const er={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},nr={style:"cursor: crosshair"};function ir(t={}){let[e,n]=er[t.key||"Alt"],i=ie.fromClass(class{constructor(t){this.view=t,this.isDown=!1}set(t){this.isDown!=t&&(this.isDown=t,this.view.update([]))}},{eventObservers:{keydown(t){this.set(t.keyCode==e||n(t))},keyup(t){t.keyCode!=e&&n(t)||this.set(!1)},mousemove(t){this.set(n(t))}}});return[i,ii.contentAttributes.of((t=>{var e;return(null===(e=t.plugin(i))||void 0===e?void 0:e.isDown)?nr:null}))]}const rr="-10000px";class or{constructor(t,e,n,i){this.facet=e,this.createTooltipView=n,this.removeTooltipView=i,this.input=t.state.facet(e),this.tooltips=this.input.filter((t=>t));let r=null;this.tooltipViews=this.tooltips.map((t=>r=n(t,r)))}update(t,e){var n;let i=t.state.facet(this.facet),r=i.filter((t=>t));if(i===this.input){for(let e of this.tooltipViews)e.update&&e.update(t);return!1}let o=[],a=e?[]:null;for(let n=0;n<r.length;n++){let i=r[n],s=-1;if(i){for(let t=0;t<this.tooltips.length;t++){let e=this.tooltips[t];e&&e.create==i.create&&(s=t)}if(s<0)o[n]=this.createTooltipView(i,n?o[n-1]:null),a&&(a[n]=!!i.above);else{let i=o[n]=this.tooltipViews[s];a&&(a[n]=e[s]),i.update&&i.update(t)}}}for(let t of this.tooltipViews)o.indexOf(t)<0&&(this.removeTooltipView(t),null===(n=t.destroy)||void 0===n||n.call(t));return e&&(a.forEach(((t,n)=>e[n]=t)),e.length=a.length),this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function ar(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const sr=i.sj.define({combine:t=>{var e,n,i;return{position:q.ios?"absolute":(null===(e=t.find((t=>t.position)))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((t=>t.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=t.find((t=>t.tooltipSpace)))||void 0===i?void 0:i.tooltipSpace)||ar}}}),lr=new WeakMap,cr=ie.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(sr);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new or(t,pr,((t,e)=>this.createTooltip(t,e)),(t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()})),this.above=this.manager.tooltips.map((t=>!!t.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(sr);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",n.dom.appendChild(t)}return n.dom.style.position=this.position,n.dom.style.top=rr,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let e of this.manager.tooltipViews)e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e);this.parent&&this.container.remove(),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:t}=this.manager.tooltipViews[0];if(q.gecko)n=t.offsetParent!=this.container.ownerDocument.body;else if(t.style.top==rr&&"0px"==t.style.left){let e=t.getBoundingClientRect();n=Math.abs(e.top+1e4)>1||Math.abs(e.left)>1}}if(n||"absolute"==this.position)if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(t=n.width/this.parent.offsetWidth,e=n.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=pe(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map(((t,e)=>{let n=this.manager.tooltipViews[e];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((({dom:t})=>t.getBoundingClientRect())),space:this.view.state.facet(sr).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let t of this.manager.tooltipViews)t.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:o}=t,a=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],c=this.manager.tooltipViews[s],{dom:u}=c,h=t.pos[s],d=t.size[s];if(!h||!1!==l.clip&&(h.bottom<=Math.max(n.top,i.top)||h.top>=Math.min(n.bottom,i.bottom)||h.right<Math.max(n.left,i.left)-.1||h.left>Math.min(n.right,i.right)+.1)){u.style.top=rr;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,f=p?7:0,g=d.right-d.left,m=null!==(e=lr.get(c))&&void 0!==e?e:d.bottom-d.top,v=c.offset||dr,y=this.view.textDirection==bt.LTR,b=d.width>i.right-i.left?y?i.left:i.right-d.width:y?Math.max(i.left,Math.min(h.left-(p?14:0)+v.x,i.right-g)):Math.min(Math.max(i.left,h.left-g+(p?14:0)-v.x),i.right-g),w=this.above[s];!l.strictSide&&(w?h.top-m-f-v.y<i.top:h.bottom+m+f+v.y>i.bottom)&&w==i.bottom-h.bottom>h.top-i.top&&(w=this.above[s]=!w);let S=(w?h.top-i.top:i.bottom-h.bottom)-f;if(S<m&&!1!==c.resize){if(S<this.view.defaultLineHeight){u.style.top=rr;continue}lr.set(c,m),u.style.height=(m=S)/o+"px"}else u.style.height&&(u.style.height="");let x=w?h.top-m-f-v.y:h.bottom+f+v.y,k=b+g;if(!0!==c.overlap)for(let t of a)t.left<k&&t.right>b&&t.top<x+m&&t.bottom>x&&(x=w?t.top-m-2-f:t.bottom+f+2);if("absolute"==this.position?(u.style.top=(x-t.parent.top)/o+"px",ur(u,(b-t.parent.left)/r)):(u.style.top=x/o+"px",ur(u,b/r)),p){let t=h.left+(y?v.x:-v.x)-(b+14-7);p.style.left=t/r+"px"}!0!==c.overlap&&a.push({left:b,top:x,right:k,bottom:x+m}),u.classList.toggle("cm-tooltip-above",w),u.classList.toggle("cm-tooltip-below",!w),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=rr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function ur(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const hr=ii.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),dr={x:0,y:0},pr=i.sj.define({enables:[cr,hr]}),fr=i.sj.define({combine:t=>t.reduce(((t,e)=>t.concat(e)),[])});class gr{static create(t){return new gr(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new or(t,fr,((t,e)=>this.createHostedView(t,e)),(t=>t.dom.remove()))}createHostedView(t,e){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)null===(t=e.destroy)||void 0===t||t.call(e)}passProp(t){let e;for(let n of this.manager.tooltipViews){let i=n[t];if(void 0!==i)if(void 0===e)e=i;else if(e!==i)return}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const mr=pr.compute([fr],(t=>{let e=t.facet(fr);return 0===e.length?null:{pos:Math.min(...e.map((t=>t.pos))),end:Math.max(...e.map((t=>{var e;return null!==(e=t.end)&&void 0!==e?e:t.pos}))),create:gr.create,above:e[0].above,arrow:e.some((t=>t.arrow))}}));class vr{constructor(t,e,n,i,r){this.view=t,this.source=e,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,n=t.docView.nearest(e.target);if(!n)return;let i,r=1;if(n instanceof Y)i=n.posAtStart;else{if(i=t.posAtCoords(e),null==i)return;let n=t.coordsAtPos(i);if(!n||e.y<n.top||e.y>n.bottom||e.x<n.left-t.defaultCharacterWidth||e.x>n.right+t.defaultCharacterWidth)return;let o=t.bidiSpans(t.state.doc.lineAt(i)).find((t=>t.from<=i&&t.to>=i)),a=o&&o.dir==bt.RTL?-1:1;r=e.x<n.left?-a:a}let o=this.source(t,i,r);if(null==o?void 0:o.then){let e=this.pending={pos:i};o.then((n=>{this.pending==e&&(this.pending=null,!n||Array.isArray(n)&&!n.length||t.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))}),(e=>Qt(t.state,e,"hover tooltip")))}else!o||Array.isArray(o)&&!o.length||t.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let t=this.view.plugin(cr),e=t?t.manager.tooltips.findIndex((t=>t.create==gr.create)):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!function(t,e){let n,{left:i,right:r,top:o,bottom:a}=t.getBoundingClientRect();if(n=t.querySelector(".cm-tooltip-arrow")){let t=n.getBoundingClientRect();o=Math.min(t.top,o),a=Math.max(t.bottom,a)}return e.clientX>=i-yr&&e.clientX<=r+yr&&e.clientY>=o-yr&&e.clientY<=a+yr}(r.dom,t)||this.pending){let{pos:r}=i[0]||this.pending,o=null!==(n=null===(e=i[0])||void 0===e?void 0:e.end)&&void 0!==n?n:r;(r==o?this.view.posAtCoords(this.lastMove)==r:function(t,e,n,i,r){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let s=t.posAtCoords({x:i,y:r},!1);return s>=e&&s<=n}(this.view,r,o,t.clientX,t.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:e}=this;e&&e.dom.contains(t.relatedTarget)?this.watchTooltipLeave(e.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=n=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const yr=4;function br(t,e={}){let n=i.Pe.define(),r=i.sU.define({create:()=>[],update(t,r){if(t.length&&(e.hideOnChange&&(r.docChanged||r.selection)?t=[]:e.hideOn&&(t=t.filter((t=>!e.hideOn(r,t)))),r.docChanged)){let e=[];for(let n of t){let t=r.changes.mapPos(n.pos,-1,i.iR.TrackDel);if(null!=t){let i=Object.assign(Object.create(null),n);i.pos=t,null!=i.end&&(i.end=r.changes.mapPos(i.end)),e.push(i)}}t=e}for(let e of r.effects)e.is(n)&&(t=e.value),e.is(Sr)&&(t=[]);return t},provide:t=>fr.from(t)});return{active:r,extension:[r,ie.define((i=>new vr(i,t,r,n,e.hoverTime||300))),mr]}}function wr(t,e){let n=t.plugin(cr);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const Sr=i.Pe.define(),xr=i.sj.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function kr(t,e){let n=t.plugin(Cr),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const Cr=ie.fromClass(class{constructor(t){this.input=t.state.facet(Er),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(xr);this.top=new Mr(t,!0,e.topContainer),this.bottom=new Mr(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(t){let e=t.state.facet(xr);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Mr(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Mr(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Er);if(n!=this.input){let e=n.filter((t=>t)),i=[],r=[],o=[],a=[];for(let n of e){let e,s=this.specs.indexOf(n);s<0?(e=n(t.view),a.push(e)):(e=this.panels[s],e.update&&e.update(t)),i.push(e),(e.top?r:o).push(e)}this.specs=e,this.panels=i,this.top.sync(r),this.bottom.sync(o);for(let t of a)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(let e of this.panels)e.update&&e.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>ii.scrollMargins.of((e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class Mr{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=Tr(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=Tr(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Tr(t){let e=t.nextSibling;return t.remove(),e}const Er=i.sj.define({enables:Cr});class Ar extends i.FB{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Ar.prototype.elementClass="",Ar.prototype.toDOM=void 0,Ar.prototype.mapMode=i.iR.TrackBefore,Ar.prototype.startSide=Ar.prototype.endSide=-1,Ar.prototype.point=!0;const _r=i.sj.define(),Pr=i.sj.define(),Dr={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>i.om.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Or=i.sj.define();function Lr(t){return[Rr(),Or.of(Object.assign(Object.assign({},Dr),t))]}const Ir=i.sj.define({combine:t=>t.some((t=>t))});function Rr(t){let e=[Vr];return t&&!1===t.fixed&&e.push(Ir.of(!0)),e}const Vr=ie.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Or).map((e=>new zr(t,e)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!t.state.facet(Ir),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Ir)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=i.om.iter(this.view.state.facet(_r),this.view.viewport.from),r=[],o=this.gutters.map((t=>new Br(t,this.view.viewport,-this.view.documentPadding.top)));for(let t of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(t.type)){let e=!0;for(let i of t.type)if(i.type==at.Text&&e){Fr(n,r,i.from);for(let t of o)t.line(this.view,i,r);e=!1}else if(i.widget)for(let t of o)t.widget(this.view,i)}else if(t.type==at.Text){Fr(n,r,t.from);for(let e of o)e.line(this.view,t,r)}else if(t.widget)for(let e of o)e.widget(this.view,t);for(let t of o)t.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Or),n=t.state.facet(Or),r=t.docChanged||t.heightChanged||t.viewportChanged||!i.om.eq(t.startState.facet(_r),t.state.facet(_r),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let e of this.gutters)e.update(t)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=e.indexOf(r);n<0?i.push(new zr(this.view,r)):(this.gutters[n].update(t),i.push(this.gutters[n]))}for(let t of this.gutters)t.dom.remove(),i.indexOf(t)<0&&t.destroy();for(let t of i)this.dom.appendChild(t.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>ii.scrollMargins.of((e=>{let n=e.plugin(t);return n&&0!=n.gutters.length&&n.fixed?e.textDirection==bt.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}:null}))});function Nr(t){return Array.isArray(t)?t:[t]}function Fr(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Br{constructor(t,e,n){this.gutter=t,this.height=n,this.i=0,this.cursor=i.om.iter(t.markers,e.from)}addElement(t,e,n){let{gutter:i}=this,r=(e.top-this.height)/t.scaleY,o=e.height/t.scaleY;if(this.i==i.elements.length){let e=new jr(t,o,r,n);i.elements.push(e),i.dom.appendChild(e.dom)}else i.elements[this.i].update(t,o,r,n);this.height=e.bottom,this.i++}line(t,e,n){let i=[];Fr(this.cursor,i,e.from),n.length&&(i=i.concat(n));let r=this.gutter.config.lineMarker(t,e,i);r&&i.unshift(r);let o=this.gutter;(0!=i.length||o.config.renderEmptyElements)&&this.addElement(t,e,i)}widget(t,e){let n=this.gutter.config.widgetMarker(t,e.widget,e),i=n?[n]:null;for(let n of t.state.facet(Pr)){let r=n(t,e.widget,e);r&&(i||(i=[])).push(r)}i&&this.addElement(t,e,i)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class zr{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,(i=>{let r,o=i.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let t=o.getBoundingClientRect();r=(t.top+t.bottom)/2}else r=i.clientY;let a=t.lineBlockAtHeight(r-t.documentTop);e.domEventHandlers[n](t,a,i)&&i.preventDefault()}));this.markers=Nr(e.markers(t)),e.initialSpacer&&(this.spacer=new jr(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Nr(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let n=t.view.viewport;return!i.om.eq(this.markers,e,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}destroy(){for(let t of this.elements)t.destroy()}}class jr{constructor(t,e,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,i)}update(t,e,n,i){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,i)||this.setMarkers(t,i)}setMarkers(t,e){let n="cm-gutterElement",i=this.dom.firstChild;for(let r=0,o=0;;){let a=o,s=r<e.length?e[r++]:null,l=!1;if(s){let t=s.elementClass;t&&(n+=" "+t);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(s)){a=t,l=!0;break}}else a=this.markers.length;for(;o<a;){let t=this.markers[o++];if(t.toDOM){t.destroy(i);let e=i.nextSibling;i.remove(),i=e}}if(!s)break;s.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(s.toDOM(t),i)),l&&o++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}const Ur=i.sj.define(),Gr=i.sj.define(),$r=i.sj.define({combine:t=>(0,i.QR)(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let t in e){let i=n[t],r=e[t];n[t]=i?(t,e,n)=>i(t,e,n)||r(t,e,n):r}return n}})});class Hr extends Ar{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function qr(t,e){return t.state.facet($r).formatNumber(e,t.state)}const Wr=Or.compute([$r],(t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:t=>t.state.facet(Ur),lineMarker:(t,e,n)=>n.some((t=>t.toDOM))?null:new Hr(qr(t,t.state.doc.lineAt(e.from).number)),widgetMarker:(t,e,n)=>{for(let i of t.state.facet(Gr)){let r=i(t,e,n);if(r)return r}return null},lineMarkerChange:t=>t.startState.facet($r)!=t.state.facet($r),initialSpacer:t=>new Hr(qr(t,Yr(t.state.doc.lines))),updateSpacer(t,e){let n=qr(e.view,Yr(e.view.state.doc.lines));return n==t.number?t:new Hr(n)},domEventHandlers:t.facet($r).domEventHandlers})));function Zr(t={}){return[$r.of(t),Rr(),Wr]}function Yr(t){let e=9;for(;e<t;)e=10*e+9;return e}const Kr=new class extends Ar{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Xr=_r.compute(["selection"],(t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(Kr.range(r)))}return i.om.of(e)}));function Jr(){return Xr}},90365:(t,e,n)=>{"use strict";n.d(e,{PH:()=>f,Qj:()=>p,Z6:()=>c,fI:()=>u,iX:()=>L,rr:()=>O,uY:()=>a});const i=1024;let r=0;class o{constructor(t,e){this.from=t,this.to=e}}class a{constructor(t={}){this.id=r++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=c.match(t)),e=>{let n=t(e);return void 0===n?null:[this,n]}}}a.closedBy=new a({deserialize:t=>t.split(" ")}),a.openedBy=new a({deserialize:t=>t.split(" ")}),a.group=new a({deserialize:t=>t.split(" ")}),a.isolate=new a({deserialize:t=>{if(t&&"rtl"!=t&&"ltr"!=t&&"auto"!=t)throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}}),a.contextHash=new a({perNode:!0}),a.lookAhead=new a({perNode:!0}),a.mounted=new a({perNode:!0});class s{constructor(t,e,n){this.tree=t,this.overlay=e,this.parser=n}static get(t){return t&&t.props&&t.props[a.mounted.id]}}const l=Object.create(null);class c{constructor(t,e,n,i=0){this.name=t,this.props=e,this.id=n,this.flags=i}static define(t){let e=t.props&&t.props.length?Object.create(null):l,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),i=new c(t.name||"",e,t.id,n);if(t.props)for(let n of t.props)if(Array.isArray(n)||(n=n(i)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[n[0].id]=n[1]}return i}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if("string"==typeof t){if(this.name==t)return!0;let e=this.prop(a.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let i of n.split(" "))e[i]=t[n];return t=>{for(let n=t.prop(a.group),i=-1;i<(n?n.length:0);i++){let r=e[i<0?t.name:n[i]];if(r)return r}}}}c.none=new c("",Object.create(null),0,8);class u{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let n of this.types){let i=null;for(let e of t){let t=e(n);t&&(i||(i=Object.assign({},n.props)),i[t[0].id]=t[1])}e.push(i?new c(n.name,i,n.id,n.flags):n)}return new u(e)}}const h=new WeakMap,d=new WeakMap;var p;!function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"}(p||(p={}));class f{constructor(t,e,n,i,r){if(this.type=t,this.children=e,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[t,e]of r)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=s.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let t of this.children){let n=t.toString();n&&(e&&(e+=","),e+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new E(this.topNode,t)}cursorAt(t,e=0,n=0){let i=h.get(this)||this.topNode,r=new E(i);return r.moveTo(t,e),h.set(this,r._tree),r}get topNode(){return new w(this,0,0,null)}resolve(t,e=0){let n=y(h.get(this)||this.topNode,t,e,!1);return h.set(this,n),n}resolveInner(t,e=0){let n=y(d.get(this)||this.topNode,t,e,!0);return d.set(this,n),n}resolveStack(t,e=0){return function(t,e,n){let i=t.resolveInner(e,n),r=null;for(let t=i instanceof w?i:i.context.parent;t;t=t.parent)if(t.index<0){let o=t.parent;(r||(r=[i])).push(o.resolve(e,n)),t=o}else{let o=s.get(t.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new w(o.tree,o.overlay[0].from+t.from,-1,t);(r||(r=[i])).push(y(a,e,n,!1))}}return r?M(r):i}(this,t,e)}iterate(t){let{enter:e,leave:n,from:i=0,to:r=this.length}=t,o=t.mode||0,a=(o&p.IncludeAnonymous)>0;for(let t=this.cursor(o|p.IncludeAnonymous);;){let o=!1;if(t.from<=r&&t.to>=i&&(!a&&t.type.isAnonymous||!1!==e(t))){if(t.firstChild())continue;o=!0}for(;o&&n&&(a||!t.type.isAnonymous)&&n(t),!t.nextSibling();){if(!t.parent())return;o=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:D(c.none,this.children,this.positions,0,this.children.length,0,this.length,((t,e,n)=>new f(this.type,t,e,n,this.propValues)),t.makeTree||((t,e,n)=>new f(c.none,t,e,n)))}static build(t){return function(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:o=i,reused:s=[],minRepeatType:l=r.types.length}=t,c=Array.isArray(n)?new g(n,n.length):n,u=r.types,h=0,d=0;function p(t,e,n,i,g,S){let{id:x,start:k,end:C,size:M}=c,T=d,E=h;for(;M<0;){if(c.next(),-1==M){let e=s[x];return n.push(e),void i.push(k-t)}if(-3==M)return void(h=x);if(-4==M)return void(d=x);throw new RangeError(`Unrecognized record size: ${M}`)}let A,_,P=u[x],O=k-t;if(C-k<=o&&(_=function(t,e){let n=c.fork(),i=0,r=0,a=0,s=n.end-o,u={size:0,start:0,skip:0};t:for(let o=n.pos-t;n.pos>o;){let t=n.size;if(n.id==e&&t>=0){u.size=i,u.start=r,u.skip=a,a+=4,i+=4,n.next();continue}let c=n.pos-t;if(t<0||c<o||n.start<s)break;let h=n.id>=l?4:0,d=n.start;for(n.next();n.pos>c;){if(n.size<0){if(-3!=n.size)break t;h+=4}else n.id>=l&&(h+=4);n.next()}r=d,i+=t,a+=h}return(e<0||i==t)&&(u.size=i,u.start=r,u.skip=a),u.size>4?u:void 0}(c.pos-e,g))){let e=new Uint16Array(_.size-_.skip),n=c.pos-_.size,i=e.length;for(;c.pos>n;)i=w(_.start,e,i);A=new m(e,C-_.start,r),O=_.start-t}else{let t=c.pos-M;c.next();let e=[],n=[],i=x>=l?x:-1,r=0,s=C;for(;c.pos>t;)i>=0&&c.id==i&&c.size>=0?(c.end<=s-o&&(y(e,n,k,r,c.end,s,i,T,E),r=e.length,s=c.end),c.next()):S>2500?v(k,t,e,n):p(k,t,e,n,i,S+1);if(i>=0&&r>0&&r<e.length&&y(e,n,k,r,k,s,i,T,E),e.reverse(),n.reverse(),i>-1&&r>0){let t=function(t,e){return(n,i,r)=>{let o,s,l=0,c=n.length-1;if(c>=0&&(o=n[c])instanceof f){if(!c&&o.type==t&&o.length==r)return o;(s=o.prop(a.lookAhead))&&(l=i[c]+o.length+s)}return b(t,n,i,r,l,e)}}(P,E);A=D(P,e,n,0,e.length,0,C-k,t,t)}else A=b(P,e,n,C-k,T-C,E)}n.push(A),i.push(O)}function v(t,e,n,i){let a=[],s=0,l=-1;for(;c.pos>e;){let{id:t,start:e,end:n,size:i}=c;if(i>4)c.next();else{if(l>-1&&e<l)break;l<0&&(l=n-o),a.push(t,e,n),s++,c.next()}}if(s){let e=new Uint16Array(4*s),o=a[a.length-2];for(let t=a.length-3,n=0;t>=0;t-=3)e[n++]=a[t],e[n++]=a[t+1]-o,e[n++]=a[t+2]-o,e[n++]=n;n.push(new m(e,a[2]-o,r)),i.push(o-t)}}function y(t,e,n,i,o,a,s,l,c){let u=[],h=[];for(;t.length>i;)u.push(t.pop()),h.push(e.pop()+n-o);t.push(b(r.types[s],u,h,a-o,l-a,c)),e.push(o-n)}function b(t,e,n,i,r,o,s){if(o){let t=[a.contextHash,o];s=s?[t].concat(s):[t]}if(r>25){let t=[a.lookAhead,r];s=s?[t].concat(s):[t]}return new f(t,e,n,i,s)}function w(t,e,n){let{id:i,start:r,end:o,size:a}=c;if(c.next(),a>=0&&i<l){let s=n;if(a>4){let i=c.pos-(a-4);for(;c.pos>i;)n=w(t,e,n)}e[--n]=s,e[--n]=o-t,e[--n]=r-t,e[--n]=i}else-3==a?h=i:-4==a&&(d=i);return n}let S=[],x=[];for(;c.pos>0;)p(t.start||0,t.bufferStart||0,S,x,-1,0);let k=null!==(e=t.length)&&void 0!==e?e:S.length?x[0]+S[0].length:0;return new f(u[t.topID],S.reverse(),x.reverse(),k)}(t)}}f.empty=new f(c.none,[],[],0);class g{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new g(this.buffer,this.index)}}class m{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return c.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],i=this.set.types[e],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(t+=4))return r;let o=[];for(;t<n;)o.push(this.childString(t)),t=this.buffer[t+3];return r+"("+o.join(",")+")"}findChild(t,e,n,i,r){let{buffer:o}=this,a=-1;for(let s=t;s!=e&&!(v(r,i,o[s+1],o[s+2])&&(a=s,n>0));s=o[s+3]);return a}slice(t,e,n){let i=this.buffer,r=new Uint16Array(e-t),o=0;for(let a=t,s=0;a<e;){r[s++]=i[a++],r[s++]=i[a++]-n;let e=r[s++]=i[a++]-n;r[s++]=i[a++]-t,o=Math.max(o,e)}return new m(r,o,this.set)}}function v(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function y(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let e=!i&&t instanceof w&&t.index<0?null:t.parent;if(!e)return t;t=e}let o=i?0:p.IgnoreOverlays;if(i)for(let i=t,a=i.parent;a;i=a,a=i.parent)i instanceof w&&i.index<0&&(null===(r=a.enter(e,n,o))||void 0===r?void 0:r.from)!=i.from&&(t=a);for(;;){let i=t.enter(e,n,o);if(!i)return t;t=i}}class b{cursor(t=0){return new E(this,t)}getChild(t,e=null,n=null){let i=S(this,t,e,n);return i.length?i[0]:null}getChildren(t,e=null,n=null){return S(this,t,e,n)}resolve(t,e=0){return y(this,t,e,!1)}resolveInner(t,e=0){return y(this,t,e,!0)}matchContext(t){return x(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),n=this;for(;e;){let t=e.lastChild;if(!t||t.to!=e.to)break;t.type.isError&&t.from==t.to?(n=e,e=t.prevSibling):e=t}return n}get node(){return this}get next(){return this.parent}}class w extends b{constructor(t,e,n,i){super(),this._tree=t,this.from=e,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,i,r=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=e>0?a.length:-1;t!=c;t+=e){let c=a[t],u=l[t]+o.from;if(v(i,n,u,u+c.length))if(c instanceof m){if(r&p.ExcludeBuffers)continue;let a=c.findChild(0,c.buffer.length,e,n-u,i);if(a>-1)return new C(new k(o,c,t,u),null,a)}else if(r&p.IncludeAnonymous||!c.type.isAnonymous||A(c)){let a;if(!(r&p.IgnoreMounts)&&(a=s.get(c))&&!a.overlay)return new w(a.tree,u,t,o);let l=new w(c,u,t,o);return r&p.IncludeAnonymous||!l.type.isAnonymous?l:l.nextChild(e<0?c.children.length-1:0,e,n,i)}}if(r&p.IncludeAnonymous||!o.type.isAnonymous)return null;if(t=o.index>=0?o.index+e:e<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let i;if(!(n&p.IgnoreOverlays)&&(i=s.get(this._tree))&&i.overlay){let n=t-this.from;for(let{from:t,to:r}of i.overlay)if((e>0?t<=n:t<n)&&(e<0?r>=n:r>n))return new w(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function S(t,e,n,i){let r=t.cursor(),o=[];if(!r.firstChild())return o;if(null!=n)for(let t=!1;!t;)if(t=r.type.is(n),!r.nextSibling())return o;for(;;){if(null!=i&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return null==i?o:[]}}function x(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class k{constructor(t,e,n,i){this.parent=t,this.buffer=e,this.index=n,this.start=i}}class C extends b{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){super(),this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t,e-this.context.start,n);return r<0?null:new C(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&p.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return r<0?null:new C(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new C(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new C(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let o=n.buffer[this.index+1];t.push(n.slice(i,r,o)),e.push(0)}return new f(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function M(t){if(!t.length)return null;let e=0,n=t[0];for(let i=1;i<t.length;i++){let r=t[i];(r.from>n.from||r.to<n.to)&&(n=r,e=i)}let i=n instanceof w&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new T(r,n)}class T{constructor(t,e){this.heads=t,this.node=e}get next(){return M(this.heads)}}class E{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof w)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:n,buffer:i}=this.buffer;return this.type=e||i.set.types[i.buffer[t]],this.from=n+i.buffer[t+1],this.to=n+i.buffer[t+2],!0}yield(t){return!!t&&(t instanceof w?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],t,e-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?!(n&p.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&p.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&p.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let t=n<0?0:this.stack[n]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(t)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:i}=this;if(i){if(t>0){if(this.index<i.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(i.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:n}=i)}else({index:e,_parent:n}=this._tree);for(;n;({index:e,_parent:n}=n))if(e>-1)for(let i=e+t,r=t<0?-1:n._tree.children.length;i!=r;i+=t){let t=n._tree.children[i];if(this.mode&p.IncludeAnonymous||t instanceof m||!t.type.isAnonymous||A(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=t;o;o=o._parent)if(o.index==i){if(i==this.index)return o;e=o,n=r+1;break t}i=this.stack[--r]}for(let t=n;t<this.stack.length;t++)e=new C(this.buffer,e,this.stack[t]);return this.bufferNode=new C(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&e&&e(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(t){if(!this.buffer)return x(this.node.parent,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let i=t.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return x(this._tree,t,i);let o=n[e.buffer[this.stack[r]]];if(!o.isAnonymous){if(t[i]&&t[i]!=o.name)return!1;i--}}return!0}}function A(t){return t.children.some((t=>t instanceof m||!t.type.isAnonymous||A(t)))}const _=new WeakMap;function P(t,e){if(!t.isAnonymous||e instanceof m||e.type!=t)return 1;let n=_.get(e);if(null==n){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof f)){n=1;break}n+=P(t,i)}_.set(e,n)}return n}function D(t,e,n,i,r,o,a,s,l){let c=0;for(let n=i;n<r;n++)c+=P(t,e[n]);let u=Math.ceil(1.5*c/8),h=[],d=[];return function e(n,i,r,a,s){for(let c=r;c<a;){let r=c,p=i[c],f=P(t,n[c]);for(c++;c<a;c++){let e=P(t,n[c]);if(f+e>=u)break;f+=e}if(c==r+1){if(f>u){let t=n[r];e(t.children,t.positions,0,t.children.length,i[r]+s);continue}h.push(n[r])}else{let e=i[c-1]+n[c-1].length-p;h.push(D(t,n,i,r,c,p,e,null,l))}d.push(p+s-o)}}(e,n,i,r,0),(s||l)(h,d,a)}class O{constructor(t,e,n,i,r=!1,o=!1){this.from=t,this.to=e,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(t,e=[],n=!1){let i=[new O(0,t.length,t,0,!1,n)];for(let n of e)n.to>t.length&&i.push(n);return i}static applyChanges(t,e,n=128){if(!e.length)return t;let i=[],r=1,o=t.length?t[0]:null;for(let a=0,s=0,l=0;;a++){let c=a<e.length?e[a]:null,u=c?c.fromA:1e9;if(u-s>=n)for(;o&&o.from<u;){let e=o;if(s>=e.from||u<=e.to||l){let t=Math.max(e.from,s)-l,n=Math.min(e.to,u)-l;e=t>=n?null:new O(t,n,e.tree,e.offset+l,a>0,!!c)}if(e&&i.push(e),o.to>u)break;o=r<t.length?t[r++]:null}if(!c)break;s=c.toA,l=c.toA-c.toB}return i}}class L{startParse(t,e,n){return"string"==typeof t&&(t=new I(t)),n=n?n.length?n.map((t=>new o(t.from,t.to))):[new o(0,0)]:[new o(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let i=this.startParse(t,e,n);for(;;){let t=i.advance();if(t)return t}}}class I{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new a({perNode:!0})},43720:(t,e,n)=>{"use strict";n.d(e,{DM:()=>d,_A:()=>_,az:()=>h,pn:()=>l});var i=n(90365);let r=0;class o{constructor(t,e,n,i){this.name=t,this.set=e,this.base=n,this.modified=i,this.id=r++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let n="string"==typeof t?t:"?";if(t instanceof o&&(e=t),null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let i=new o(n,[],null,[]);if(i.set.push(i),e)for(let t of e.set)i.set.push(t);return i}static defineModifier(t){let e=new s(t);return t=>t.modified.indexOf(e)>-1?t:s.get(t.base||t,t.modified.concat(e).sort(((t,e)=>t.id-e.id)))}}let a=0;class s{constructor(t){this.name=t,this.instances=[],this.id=a++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find((n=>{return n.base==t&&(i=e,r=n.modified,i.length==r.length&&i.every(((t,e)=>t==r[e])));var i,r}));if(n)return n;let i=[],r=new o(t.name,i,t,e);for(let t of e)t.instances.push(r);let a=function(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let e of t.set)if(!e.modified.length)for(let t of a)i.push(s.get(e,t));return r}}function l(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let t of n.split(" "))if(t){let n=[],r=2,o=t;for(let e=0;;){if("..."==o&&e>0&&e+3==t.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!i)throw new RangeError("Invalid path: "+t);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),e+=i[0].length,e==t.length)break;let a=t[e++];if(e==t.length&&"!"==a){r=0;break}if("/"!=a)throw new RangeError("Invalid path: "+t);o=t.slice(e)}let a=n.length-1,s=n[a];if(!s)throw new RangeError("Invalid path: "+t);let l=new u(i,r,a>0?n.slice(0,a):null);e[s]=l.sort(e[s])}}return c.add(e)}const c=new i.uY;class u{constructor(t,e,n,i){this.tags=t,this.mode=e,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function h(t,e){let n=Object.create(null);for(let e of t)if(Array.isArray(e.tag))for(let t of e.tag)n[t.id]=e.class;else n[e.tag.id]=e.class;let{scope:i,all:r=null}=e||{};return{style:t=>{let e=r;for(let i of t)for(let t of i.set){let i=n[t.id];if(i){e=e?e+" "+i:i;break}}return e},scope:i}}function d(t,e,n,i=0,r=t.length){let o=new p(i,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),i,r,"",o.highlighters),o.flush(r)}u.empty=new u([],2,null);class p{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,r,o){let{type:a,from:s,to:l}=t;if(s>=n||l<=e)return;a.isTop&&(o=this.highlighters.filter((t=>!t.scope||t.scope(a))));let h=r,d=function(t){let e=t.type.prop(c);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(t)||u.empty,p=function(t,e){let n=null;for(let i of t){let t=i.style(e);t&&(n=n?n+" "+t:t)}return n}(o,d.tags);if(p&&(h&&(h+=" "),h+=p,1==d.mode&&(r+=(r?" ":"")+p)),this.startSpan(Math.max(e,s),h),d.opaque)return;let f=t.tree&&t.tree.prop(i.uY.mounted);if(f&&f.overlay){let i=t.node.enter(f.overlay[0].from+s,1),a=this.highlighters.filter((t=>!t.scope||t.scope(f.tree.type))),c=t.firstChild();for(let u=0,d=s;;u++){let p=u<f.overlay.length?f.overlay[u]:null,g=p?p.from+s:l,m=Math.max(e,d),v=Math.min(n,g);if(m<v&&c)for(;t.from<v&&(this.highlightRange(t,m,v,r,o),this.startSpan(Math.min(v,t.to),h),!(t.to>=g)&&t.nextSibling()););if(!p||g>n)break;d=p.to+s,d>e&&(this.highlightRange(i.cursor(),Math.max(e,p.from+s),Math.min(n,d),"",a),this.startSpan(Math.min(n,d),h))}c&&t.parent()}else if(t.firstChild()){f&&(r="");do{if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,r,o),this.startSpan(Math.min(n,t.to),h)}}while(t.nextSibling());t.parent()}}}const f=o.define,g=f(),m=f(),v=f(m),y=f(m),b=f(),w=f(b),S=f(b),x=f(),k=f(x),C=f(),M=f(),T=f(),E=f(T),A=f(),_={comment:g,lineComment:f(g),blockComment:f(g),docComment:f(g),name:m,variableName:f(m),typeName:v,tagName:f(v),propertyName:y,attributeName:f(y),className:f(m),labelName:f(m),namespace:f(m),macroName:f(m),literal:b,string:w,docString:f(w),character:f(w),attributeValue:f(w),number:S,integer:f(S),float:f(S),bool:f(b),regexp:f(b),escape:f(b),color:f(b),url:f(b),keyword:C,self:f(C),null:f(C),atom:f(C),unit:f(C),modifier:f(C),operatorKeyword:f(C),controlKeyword:f(C),definitionKeyword:f(C),moduleKeyword:f(C),operator:M,derefOperator:f(M),arithmeticOperator:f(M),logicOperator:f(M),bitwiseOperator:f(M),compareOperator:f(M),updateOperator:f(M),definitionOperator:f(M),typeOperator:f(M),controlOperator:f(M),punctuation:T,separator:f(T),bracket:E,angleBracket:f(E),squareBracket:f(E),paren:f(E),brace:f(E),content:x,heading:k,heading1:f(k),heading2:f(k),heading3:f(k),heading4:f(k),heading5:f(k),heading6:f(k),contentSeparator:f(x),list:f(x),quote:f(x),emphasis:f(x),strong:f(x),link:f(x),monospace:f(x),strikethrough:f(x),inserted:f(),deleted:f(),changed:f(),invalid:f(),meta:A,documentMeta:f(A),annotation:f(A),processingInstruction:f(A),definition:o.defineModifier("definition"),constant:o.defineModifier("constant"),function:o.defineModifier("function"),standard:o.defineModifier("standard"),local:o.defineModifier("local"),special:o.defineModifier("special")};for(let t in _){let e=_[t];e instanceof o&&(e.name=t)}h([{tag:_.link,class:"tok-link"},{tag:_.heading,class:"tok-heading"},{tag:_.emphasis,class:"tok-emphasis"},{tag:_.strong,class:"tok-strong"},{tag:_.keyword,class:"tok-keyword"},{tag:_.atom,class:"tok-atom"},{tag:_.bool,class:"tok-bool"},{tag:_.url,class:"tok-url"},{tag:_.labelName,class:"tok-labelName"},{tag:_.inserted,class:"tok-inserted"},{tag:_.deleted,class:"tok-deleted"},{tag:_.literal,class:"tok-literal"},{tag:_.string,class:"tok-string"},{tag:_.number,class:"tok-number"},{tag:[_.regexp,_.escape,_.special(_.string)],class:"tok-string2"},{tag:_.variableName,class:"tok-variableName"},{tag:_.local(_.variableName),class:"tok-variableName tok-local"},{tag:_.definition(_.variableName),class:"tok-variableName tok-definition"},{tag:_.special(_.variableName),class:"tok-variableName2"},{tag:_.definition(_.propertyName),class:"tok-propertyName tok-definition"},{tag:_.typeName,class:"tok-typeName"},{tag:_.namespace,class:"tok-namespace"},{tag:_.className,class:"tok-className"},{tag:_.macroName,class:"tok-macroName"},{tag:_.propertyName,class:"tok-propertyName"},{tag:_.operator,class:"tok-operator"},{tag:_.comment,class:"tok-comment"},{tag:_.meta,class:"tok-meta"},{tag:_.invalid,class:"tok-invalid"},{tag:_.punctuation,class:"tok-punctuation"}])},51587:(t,e,n)=>{"use strict";n.d(e,{z:()=>l});let i=[],r=[];function o(t){if(t<768)return!1;for(let e=0,n=i.length;;){let o=e+n>>1;if(t<i[o])n=o;else{if(!(t>=r[o]))return!0;e=o+1}if(e==n)return!1}}function a(t){return t>=127462&&t<=127487}(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t=>t?parseInt(t,36):1));for(let e=0,n=0;e<t.length;e++)(e%2?r:i).push(n+=t[e])})();const s=8205;function l(t,e,n=!0,i=!0){return(n?c:u)(t,e,i)}function c(t,e,n){if(e==t.length)return e;e&&d(t.charCodeAt(e))&&p(t.charCodeAt(e-1))&&e--;let i=h(t,e);for(e+=f(i);e<t.length;){let r=h(t,e);if(i==s||r==s||n&&o(r))e+=f(r),i=r;else{if(!a(r))break;{let n=0,i=e-2;for(;i>=0&&a(h(t,i));)n++,i-=2;if(n%2==0)break;e+=2}}}return e}function u(t,e,n){for(;e>0;){let i=c(t,e-2,n);if(i<e)return i;e--}return 0}function h(t,e){let n=t.charCodeAt(e);if(!p(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return d(i)?i-56320+(n-55296<<10)+65536:n}function d(t){return t>=56320&&t<57344}function p(t){return t>=55296&&t<56320}function f(t){return t<65536?1:2}},6363:(t,e,n)=>{"use strict";n.d(e,{oQ:()=>u});var i=n(1371),r=n(6585),o=n(15874),a=n(45230),s=n(54528),l=n(47404),c=n(51419);const u=(()=>[(0,i.$K)(),(0,i.Wu)(),(0,i.N$)(),(0,a.b6)(),(0,o.Lv)(),(0,i.VH)(),(0,i.A)(),r.$t.allowMultipleSelections.of(!0),(0,o.WD)(),(0,o.y9)(o.Zt,{fallback:!0}),(0,o.SG)(),(0,l.wm)(),(0,l.yU)(),(0,i.D4)(),(0,i.HJ)(),(0,i.dz)(),(0,s.gN)(),i.w4.of([...l.Bc,...a.pw,...s.Eo,...a.cL,...o.f7,...l.OO,...c.$w])])()},93748:(t,e,n)=>{"use strict";function i(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=n[i];"string"==typeof o?t.setAttribute(i,o):null!=o&&(t[i]=o)}e++}for(;e<arguments.length;e++)r(t,arguments[e]);return t}function r(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)r(t,e[n])}}n.d(e,{A:()=>i})},12902:(t,e,n)=>{"use strict";function i(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}n.d(e,{A:()=>i})},52016:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>l});var i=n(12902),r=n(86037),o=n(83131);const a=(0,r.A)(i.A),s=a.right,l=(a.left,(0,r.A)(o.A).center,s)},86037:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(12902),r=n(41180);function o(t){let e,n,o;function s(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<0?r=e+1:o=e}while(r<o)}return r}return 2!==t.length?(e=i.A,n=(e,n)=>(0,i.A)(t(e),n),o=(e,n)=>t(e)-n):(e=t===i.A||t===r.A?t:a,n=t,o=t),{left:s,center:function(t,e,n=0,i=t.length){const r=s(t,e,n,i-1);return r>n&&o(t[r-1],e)>-o(t[r],e)?r-1:r},right:function(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<=0?r=e+1:o=e}while(r<o)}return r}}}function a(){return 0}},41180:(t,e,n)=>{"use strict";function i(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}n.d(e,{A:()=>i})},83131:(t,e,n)=>{"use strict";function i(t){return null===t?NaN:+t}n.d(e,{A:()=>i})},6946:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>s,lq:()=>l,sG:()=>c});const i=Math.sqrt(50),r=Math.sqrt(10),o=Math.sqrt(2);function a(t,e,n){const s=(e-t)/Math.max(0,n),l=Math.floor(Math.log10(s)),c=s/Math.pow(10,l),u=c>=i?10:c>=r?5:c>=o?2:1;let h,d,p;return l<0?(p=Math.pow(10,-l)/u,h=Math.round(t*p),d=Math.round(e*p),h/p<t&&++h,d/p>e&&--d,p=-p):(p=Math.pow(10,l)*u,h=Math.round(t/p),d=Math.round(e/p),h*p<t&&++h,d*p>e&&--d),d<h&&.5<=n&&n<2?a(t,e,2*n):[h,d,p]}function s(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const i=e<t,[r,o,s]=i?a(e,t,n):a(t,e,n);if(!(o>=r))return[];const l=o-r+1,c=new Array(l);if(i)if(s<0)for(let t=0;t<l;++t)c[t]=(o-t)/-s;else for(let t=0;t<l;++t)c[t]=(o-t)*s;else if(s<0)for(let t=0;t<l;++t)c[t]=(r+t)/-s;else for(let t=0;t<l;++t)c[t]=(r+t)*s;return c}function l(t,e,n){return a(t=+t,e=+e,n=+n)[2]}function c(t,e,n){n=+n;const i=(e=+e)<(t=+t),r=i?l(e,t,n):l(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}},18965:(t,e,n)=>{"use strict";n(89902);const{abs:i,max:r,min:o}=Math;function a(t){return{type:t}}["w","e"].map(a),["n","s"].map(a),["n","w","e","s","nw","ne","sw","se"].map(a)},23537:(t,e,n)=>{"use strict";n(18965)},46957:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>w,Qh:()=>k});var i=n(40871);function r(){}var o=.7,a=1/o,s="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,h=new RegExp(`^rgb\\(${s},${s},${s}\\)$`),d=new RegExp(`^rgb\\(${c},${c},${c}\\)$`),p=new RegExp(`^rgba\\(${s},${s},${s},${l}\\)$`),f=new RegExp(`^rgba\\(${c},${c},${c},${l}\\)$`),g=new RegExp(`^hsl\\(${l},${c},${c}\\)$`),m=new RegExp(`^hsla\\(${l},${c},${c},${l}\\)$`),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function w(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=u.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?S(e):3===n?new C(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?x(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?x(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=h.exec(t))?new C(e[1],e[2],e[3],1):(e=d.exec(t))?new C(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=p.exec(t))?x(e[1],e[2],e[3],e[4]):(e=f.exec(t))?x(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?P(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?P(e[1],e[2]/100,e[3]/100,e[4]):v.hasOwnProperty(t)?S(v[t]):"transparent"===t?new C(NaN,NaN,NaN,0):null}function S(t){return new C(t>>16&255,t>>8&255,255&t,1)}function x(t,e,n,i){return i<=0&&(t=e=n=NaN),new C(t,e,n,i)}function k(t,e,n,i){return 1===arguments.length?((o=t)instanceof r||(o=w(o)),o?new C((o=o.rgb()).r,o.g,o.b,o.opacity):new C):new C(t,e,n,null==i?1:i);var o}function C(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function M(){return`#${_(this.r)}${_(this.g)}${_(this.b)}`}function T(){const t=E(this.opacity);return`${1===t?"rgb(":"rgba("}${A(this.r)}, ${A(this.g)}, ${A(this.b)}${1===t?")":`, ${t})`}`}function E(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function A(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _(t){return((t=A(t))<16?"0":"")+t.toString(16)}function P(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new O(t,e,n,i)}function D(t){if(t instanceof O)return new O(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=w(t)),!t)return new O;if(t instanceof O)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),a=Math.max(e,n,i),s=NaN,l=a-o,c=(a+o)/2;return l?(s=e===a?(n-i)/l+6*(n<i):n===a?(i-e)/l+2:(e-n)/l+4,l/=c<.5?a+o:2-a-o,s*=60):l=c>0&&c<1?0:s,new O(s,l,c,t.opacity)}function O(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function L(t){return(t=(t||0)%360)<0?t+360:t}function I(t){return Math.max(0,Math.min(1,t||0))}function R(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}(0,i.A)(r,w,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:y,formatHex:y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return D(this).formatHsl()},formatRgb:b,toString:b}),(0,i.A)(C,k,(0,i.X)(r,{brighter(t){return t=null==t?a:Math.pow(a,t),new C(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?o:Math.pow(o,t),new C(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new C(A(this.r),A(this.g),A(this.b),E(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatHex8:function(){return`#${_(this.r)}${_(this.g)}${_(this.b)}${_(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:T,toString:T})),(0,i.A)(O,(function(t,e,n,i){return 1===arguments.length?D(t):new O(t,e,n,null==i?1:i)}),(0,i.X)(r,{brighter(t){return t=null==t?a:Math.pow(a,t),new O(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?o:Math.pow(o,t),new O(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new C(R(t>=240?t-240:t+120,r,i),R(t,r,i),R(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new O(L(this.h),I(this.s),I(this.l),E(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=E(this.opacity);return`${1===t?"hsl(":"hsla("}${L(this.h)}, ${100*I(this.s)}%, ${100*I(this.l)}%${1===t?")":`, ${t})`}`}}))},40871:(t,e,n)=>{"use strict";function i(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function r(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}n.d(e,{A:()=>i,X:()=>r})},41089:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i={value:()=>{}};function r(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new o(i)}function o(t){this._=t}function a(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function s(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=i,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=r.prototype={constructor:o,on:function(t,e){var n,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),l=-1,c=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++l<c;)if(n=(t=o[l]).type)r[n]=s(r[n],t.name,e);else if(null==e)for(n in r)r[n]=s(r[n],t.name,null);return this}for(;++l<c;)if((n=(t=o[l]).type)&&(n=a(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};const l=r},72101:(t,e,n)=>{"use strict";function i(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}n.d(e,{wq:()=>i})},48701:(t,e,n)=>{"use strict";var i,r,o,a;n.d(e,{GP:()=>r,s:()=>o}),a={thousands:",",grouping:[3],currency:["$",""]},i=(0,n(16410).A)(a),r=i.format,o=i.formatPrefix},47235:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(95204);function r(t){return(t=(0,i.f)(Math.abs(t)))?t[1]:NaN}},95204:(t,e,n)=>{"use strict";function i(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function r(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}n.d(e,{A:()=>i,f:()=>r})},37168:(t,e,n)=>{"use strict";function i(t,e){return function(n,i){for(var r=n.length,o=[],a=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(n.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}n.d(e,{A:()=>i})},91728:(t,e,n)=>{"use strict";function i(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}n.d(e,{A:()=>i})},83520:(t,e,n)=>{"use strict";n.d(e,{A:()=>o,u:()=>i});var i,r=n(95204);function o(t,e){var n=(0,r.f)(t,e);if(!n)return t+"";var o=n[0],a=n[1],s=a-(i=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,l=o.length;return s===l?o:s>l?o+new Array(s-l+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+(0,r.f)(t,Math.max(0,e+s-1))[0]}},63554:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(95204);function r(t,e){var n=(0,i.f)(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}},1631:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(t){if(!(e=i.exec(t)))throw new Error("invalid format: "+t);var e;return new o({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function o(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}r.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},46715:(t,e,n)=>{"use strict";function i(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}n.d(e,{A:()=>i})},1866:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(95204),r=n(83520),o=n(63554);const a={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:i.A,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>(0,o.A)(100*t,e),r:o.A,s:r.A,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}},69986:(t,e,n)=>{"use strict";function i(t){return t}n.d(e,{A:()=>i})},16410:(t,e,n)=>{"use strict";n.d(e,{A:()=>p});var i=n(47235),r=n(37168),o=n(91728),a=n(1631),s=n(46715),l=n(1866),c=n(83520),u=n(69986),h=Array.prototype.map,d=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function p(t){var e=void 0===t.grouping||void 0===t.thousands?u.A:(0,r.A)(h.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",p=void 0===t.currency?"":t.currency[1]+"",f=void 0===t.decimal?".":t.decimal+"",g=void 0===t.numerals?u.A:(0,o.A)(h.call(t.numerals,String)),m=void 0===t.percent?"%":t.percent+"",v=void 0===t.minus?"−":t.minus+"",y=void 0===t.nan?"NaN":t.nan+"";function b(t){var i=(t=(0,a.A)(t)).fill,r=t.align,o=t.sign,u=t.symbol,h=t.zero,b=t.width,w=t.comma,S=t.precision,x=t.trim,k=t.type;"n"===k?(w=!0,k="g"):l.A[k]||(void 0===S&&(S=12),x=!0,k="g"),(h||"0"===i&&"="===r)&&(h=!0,i="0",r="=");var C="$"===u?n:"#"===u&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",M="$"===u?p:/[%p]/.test(k)?m:"",T=l.A[k],E=/[defgprs%]/.test(k);function A(t){var n,a,l,u=C,p=M;if("c"===k)p=T(t)+p,t="";else{var m=(t=+t)<0||1/t<0;if(t=isNaN(t)?y:T(Math.abs(t),S),x&&(t=(0,s.A)(t)),m&&0==+t&&"+"!==o&&(m=!1),u=(m?"("===o?o:v:"-"===o||"("===o?"":o)+u,p=("s"===k?d[8+c.u/3]:"")+p+(m&&"("===o?")":""),E)for(n=-1,a=t.length;++n<a;)if(48>(l=t.charCodeAt(n))||l>57){p=(46===l?f+t.slice(n+1):t.slice(n))+p,t=t.slice(0,n);break}}w&&!h&&(t=e(t,1/0));var A=u.length+t.length+p.length,_=A<b?new Array(b-A+1).join(i):"";switch(w&&h&&(t=e(_+t,_.length?b-p.length:1/0),_=""),r){case"<":t=u+t+p+_;break;case"=":t=u+_+t+p;break;case"^":t=_.slice(0,A=_.length>>1)+u+t+p+_.slice(A);break;default:t=_+u+t+p}return g(t)}return S=void 0===S?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S)),A.toString=function(){return t+""},A}return{format:b,formatPrefix:function(t,e){var n=b(((t=(0,a.A)(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor((0,i.A)(e)/3))),o=Math.pow(10,-r),s=d[8+r/3];return function(t){return n(o*t)+s}}}}},1734:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(47235);function r(t){return Math.max(0,-(0,i.A)(Math.abs(t)))}},67590:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(47235);function r(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,i.A)(e)/3)))-(0,i.A)(Math.abs(t)))}},99460:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(47235);function r(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,(0,i.A)(e)-(0,i.A)(t))+1}},68079:(t,e,n)=>{"use strict";n.d(e,{$:()=>r});var i=n(58503);function r(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,a=new Array(o),s=new Array(r);for(n=0;n<o;++n)a[n]=(0,i.A)(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=a[n](t);return s}}},86160:(t,e,n)=>{"use strict";function i(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function r(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],a=t[r+1],s=r>0?t[r-1]:2*o-a,l=r<e-1?t[r+2]:2*a-o;return i((n-r/e)*e,s,o,a,l)}}n.d(e,{A:()=>r,H:()=>i})},19804:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(86160);function r(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],a=t[r%e],s=t[(r+1)%e],l=t[(r+2)%e];return(0,i.H)((n-r/e)*e,o,a,s,l)}}},84709:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>o,uN:()=>r});var i=n(3116);function r(t){return 1==(t=+t)?o:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):(0,i.A)(isNaN(e)?n:e)}}function o(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):(0,i.A)(isNaN(t)?e:t)}},3116:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=t=>()=>t},58172:(t,e,n)=>{"use strict";function i(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}n.d(e,{A:()=>i})},8981:(t,e,n)=>{"use strict";function i(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}n.d(e,{A:()=>i})},10128:(t,e,n)=>{"use strict";function i(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function r(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.d(e,{A:()=>i,p:()=>r})},34287:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(58503);function r(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=(0,i.A)(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}},21197:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>s});var i=n(46957),r=n(86160),o=n(19804),a=n(84709);const s=function t(e){var n=(0,a.uN)(e);function r(t,e){var r=n((t=(0,i.Qh)(t)).r,(e=(0,i.Qh)(e)).r),o=n(t.g,e.g),s=n(t.b,e.b),l=(0,a.Ay)(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=s(e),t.opacity=l(e),t+""}}return r.gamma=t,r}(1);function l(t){return function(e){var n,r,o=e.length,a=new Array(o),s=new Array(o),l=new Array(o);for(n=0;n<o;++n)r=(0,i.Qh)(e[n]),a[n]=r.r||0,s[n]=r.g||0,l[n]=r.b||0;return a=t(a),s=t(s),l=t(l),r.opacity=1,function(t){return r.r=a(t),r.g=s(t),r.b=l(t),r+""}}}l(r.A),l(o.A)},49770:(t,e,n)=>{"use strict";function i(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}n.d(e,{A:()=>i})},67737:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(8981),r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(r.source,"g");function a(t,e){var n,a,s,l=r.lastIndex=o.lastIndex=0,c=-1,u=[],h=[];for(t+="",e+="";(n=r.exec(t))&&(a=o.exec(e));)(s=a.index)>l&&(s=e.slice(l,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(a=a[0])?u[c]?u[c]+=a:u[++c]=a:(u[++c]=null,h.push({i:c,x:(0,i.A)(n,a)})),l=o.lastIndex;return l<e.length&&(s=e.slice(l),u[c]?u[c]+=s:u[++c]=s),u.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)u[(n=h[i]).i]=n.x(t);return u.join("")})}},31852:(t,e,n)=>{"use strict";n.d(e,{A:()=>o,D:()=>r});var i=180/Math.PI,r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function o(t,e,n,r,o,a){var s,l,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(e,t)*i,skewX:Math.atan(c)*i,scaleX:s,scaleY:l}}},91957:(t,e,n)=>{"use strict";n.d(e,{I:()=>s,T:()=>a});var i=n(8981),r=n(41226);function o(t,e,n,r){function o(t){return t.length?t.pop()+" ":""}return function(a,s){var l=[],c=[];return a=t(a),s=t(s),function(t,r,o,a,s,l){if(t!==o||r!==a){var c=s.push("translate(",null,e,null,n);l.push({i:c-4,x:(0,i.A)(t,o)},{i:c-2,x:(0,i.A)(r,a)})}else(o||a)&&s.push("translate("+o+e+a+n)}(a.translateX,a.translateY,s.translateX,s.translateY,l,c),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:(0,i.A)(t,e)})):e&&n.push(o(n)+"rotate("+e+r)}(a.rotate,s.rotate,l,c),function(t,e,n,a){t!==e?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:(0,i.A)(t,e)}):e&&n.push(o(n)+"skewX("+e+r)}(a.skewX,s.skewX,l,c),function(t,e,n,r,a,s){if(t!==n||e!==r){var l=a.push(o(a)+"scale(",null,",",null,")");s.push({i:l-4,x:(0,i.A)(t,n)},{i:l-2,x:(0,i.A)(e,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,l,c),a=s=null,function(t){for(var e,n=-1,i=c.length;++n<i;)l[(e=c[n]).i]=e.x(t);return l.join("")}}}var a=o(r.P,"px, ","px)","deg)"),s=o(r.i,", ",")",")")},41226:(t,e,n)=>{"use strict";n.d(e,{P:()=>o,i:()=>a});var i,r=n(31852);function o(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?r.D:(0,r.A)(e.a,e.b,e.c,e.d,e.e,e.f)}function a(t){return null==t?r.D:(i||(i=document.createElementNS("http://www.w3.org/2000/svg","g")),i.setAttribute("transform",t),(t=i.transform.baseVal.consolidate())?(t=t.matrix,(0,r.A)(t.a,t.b,t.c,t.d,t.e,t.f)):r.D)}},58503:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});var i=n(46957),r=n(21197),o=n(68079),a=n(58172),s=n(8981),l=n(34287),c=n(67737),u=n(3116),h=n(10128);function d(t,e){var n,d=typeof e;return null==e||"boolean"===d?(0,u.A)(e):("number"===d?s.A:"string"===d?(n=(0,i.Ay)(e))?(e=n,r.Ay):c.A:e instanceof i.Ay?r.Ay:e instanceof Date?a.A:(0,h.p)(e)?h.A:Array.isArray(e)?o.$:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?l.A:s.A)(t,e)}},19279:(t,e,n)=>{"use strict";function i(t){return function(){return t}}n.d(e,{A:()=>i})},21052:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>m,C:()=>f,Gu:()=>g});var i=n(52016),r=n(58503),o=n(8981),a=n(49770),s=n(19279),l=n(70414),c=[0,1];function u(t){return t}function h(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(0,s.A)(isNaN(e)?NaN:.5)}function d(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=h(r,i),o=n(a,o)):(i=h(i,r),o=n(o,a)),function(t){return o(i(t))}}function p(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)o[s]=h(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(e){var n=(0,i.Ay)(t,e,1,r)-1;return a[n](o[n](e))}}function f(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function g(){var t,e,n,i,s,h,f=c,g=c,m=r.A,v=u;function y(){var t,e,n,r=Math.min(f.length,g.length);return v!==u&&(t=f[0],e=f[r-1],t>e&&(n=t,t=e,e=n),v=function(n){return Math.max(t,Math.min(e,n))}),i=r>2?p:d,s=h=null,b}function b(e){return null==e||isNaN(e=+e)?n:(s||(s=i(f.map(t),g,m)))(t(v(e)))}return b.invert=function(n){return v(e((h||(h=i(g,f.map(t),o.A)))(n)))},b.domain=function(t){return arguments.length?(f=Array.from(t,l.A),y()):f.slice()},b.range=function(t){return arguments.length?(g=Array.from(t),y()):g.slice()},b.rangeRound=function(t){return g=Array.from(t),m=a.A,y()},b.clamp=function(t){return arguments.length?(v=!!t||u,y()):v!==u},b.interpolate=function(t){return arguments.length?(m=t,y()):m},b.unknown=function(t){return arguments.length?(n=t,b):n},function(n,i){return t=n,e=i,y()}}function m(){return g()(u,u)}},71303:(t,e,n)=>{"use strict";n.d(e,{ZE:()=>r.A,m4:()=>i.A});var i=n(76502),r=n(21721)},99065:(t,e,n)=>{"use strict";function i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}n.d(e,{C:()=>i})},76502:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(6946),r=n(21052),o=n(99065),a=n(58993);function s(){var t=(0,r.Ay)();return t.copy=function(){return(0,r.C)(t,s())},o.C.apply(t,arguments),function(t){var e=t.domain;return t.ticks=function(t){var n=e();return(0,i.Ay)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return(0,a.A)(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,a=e(),s=0,l=a.length-1,c=a[s],u=a[l],h=10;for(u<c&&(o=c,c=u,u=o,o=s,s=l,l=o);h-- >0;){if((o=(0,i.lq)(c,u,n))===r)return a[s]=c,a[l]=u,e(a);if(o>0)c=Math.floor(c/o)*o,u=Math.ceil(u/o)*o;else{if(!(o<0))break;c=Math.ceil(c*o)/o,u=Math.floor(u*o)/o}r=o}return t},t}(t)}},21721:(t,e,n)=>{"use strict";n.d(e,{A:()=>g});var i=n(6946),r=n(1631),o=n(48701),a=n(8206),s=n(21052),l=n(99065);function c(t){return Math.log(t)}function u(t){return Math.exp(t)}function h(t){return-Math.log(-t)}function d(t){return-Math.exp(-t)}function p(t){return isFinite(t)?+("1e"+t):t<0?0:t}function f(t){return(e,n)=>-t(-e,n)}function g(){const t=function(t){const e=t(c,u),n=e.domain;let s,l,g=10;function m(){return s=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(g),l=function(t){return 10===t?p:t===Math.E?Math.exp:e=>Math.pow(t,e)}(g),n()[0]<0?(s=f(s),l=f(l),t(h,d)):t(c,u),e}return e.base=function(t){return arguments.length?(g=+t,m()):g},e.domain=function(t){return arguments.length?(n(t),m()):n()},e.ticks=t=>{const e=n();let r=e[0],o=e[e.length-1];const a=o<r;a&&([r,o]=[o,r]);let c,u,h=s(r),d=s(o);const p=null==t?10:+t;let f=[];if(!(g%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),r>0){for(;h<=d;++h)for(c=1;c<g;++c)if(u=h<0?c/l(-h):c*l(h),!(u<r)){if(u>o)break;f.push(u)}}else for(;h<=d;++h)for(c=g-1;c>=1;--c)if(u=h>0?c/l(-h):c*l(h),!(u<r)){if(u>o)break;f.push(u)}2*f.length<p&&(f=(0,i.Ay)(r,o,p))}else f=(0,i.Ay)(h,d,Math.min(d-h,p)).map(l);return a?f.reverse():f},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===g?"s":","),"function"!=typeof n&&(g%1||null!=(n=(0,r.A)(n)).precision||(n.trim=!0),n=(0,o.GP)(n)),t===1/0)return n;const i=Math.max(1,g*t/e.ticks().length);return t=>{let e=t/l(Math.round(s(t)));return e*g<g-.5&&(e*=g),e<=i?n(t):""}},e.nice=()=>n((0,a.A)(n(),{floor:t=>l(Math.floor(s(t))),ceil:t=>l(Math.ceil(s(t)))})),e}((0,s.Gu)()).domain([1,10]);return t.copy=()=>(0,s.C)(t,g()).base(t.base()),l.C.apply(t,arguments),t}},8206:(t,e,n)=>{"use strict";function i(t,e){var n,i=0,r=(t=t.slice()).length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}n.d(e,{A:()=>i})},70414:(t,e,n)=>{"use strict";function i(t){return+t}n.d(e,{A:()=>i})},58993:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var i=n(6946),r=n(1631),o=n(67590),a=n(48701),s=n(99460),l=n(1734);function c(t,e,n,c){var u,h=(0,i.sG)(t,e,n);switch((c=(0,r.A)(null==c?",f":c)).type){case"s":var d=Math.max(Math.abs(t),Math.abs(e));return null!=c.precision||isNaN(u=(0,o.A)(h,d))||(c.precision=u),(0,a.s)(c,d);case"":case"e":case"g":case"p":case"r":null!=c.precision||isNaN(u=(0,s.A)(h,Math.max(Math.abs(t),Math.abs(e))))||(c.precision=u-("e"===c.type));break;case"f":case"%":null!=c.precision||isNaN(u=(0,l.A)(h))||(c.precision=u-2*("%"===c.type))}return(0,a.GP)(c)}},5478:(t,e,n)=>{"use strict";function i(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}n.d(e,{A:()=>i})},29731:(t,e,n)=>{"use strict";function i(t){return function(){return t}}n.d(e,{A:()=>i})},63663:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(47268),r=n(27947);function o(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===r.g&&e.documentElement.namespaceURI===r.g?e.createElement(t):e.createElementNS(n,t)}}function a(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function s(t){var e=(0,i.A)(t);return(e.local?a:o)(e)}},56541:(t,e,n)=>{"use strict";function i(t){return function(){return this.matches(t)}}function r(t){return function(e){return e.matches(t)}}n.d(e,{A:()=>i,j:()=>r})},47268:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(27947);function r(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.A.hasOwnProperty(e)?{space:i.A[e],local:t}:t}},27947:(t,e,n)=>{"use strict";n.d(e,{A:()=>r,g:()=>i});var i="http://www.w3.org/1999/xhtml";const r={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},48072:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(63663);function r(t){var e="function"==typeof t?t:(0,i.A)(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}},47339:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var i=n(47268);function r(t){return function(){this.removeAttribute(t)}}function o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function a(t,e){return function(){this.setAttribute(t,e)}}function s(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function l(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function c(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function u(t,e){var n=(0,i.A)(t);if(arguments.length<2){var u=this.node();return n.local?u.getAttributeNS(n.space,n.local):u.getAttribute(n)}return this.each((null==e?n.local?o:r:"function"==typeof e?n.local?c:l:n.local?s:a)(n,e))}},15152:(t,e,n)=>{"use strict";function i(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}n.d(e,{A:()=>i})},28235:(t,e,n)=>{"use strict";function i(t){return t.trim().split(/^|\s+/)}function r(t){return t.classList||new o(t)}function o(t){this._node=t,this._names=i(t.getAttribute("class")||"")}function a(t,e){for(var n=r(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function s(t,e){for(var n=r(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function l(t){return function(){a(this,t)}}function c(t){return function(){s(this,t)}}function u(t,e){return function(){(e.apply(this,arguments)?a:s)(this,t)}}function h(t,e){var n=i(t+"");if(arguments.length<2){for(var o=r(this.node()),a=-1,s=n.length;++a<s;)if(!o.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?u:e?l:c)(n,e))}n.d(e,{A:()=>h}),o.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}},49063:(t,e,n)=>{"use strict";function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function o(t){return this.select(t?r:i)}n.d(e,{A:()=>o})},98664:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var i=n(31882),r=n(34916),o=n(29731);function a(t,e,n,i,o,a){for(var s,l=0,c=e.length,u=a.length;l<u;++l)(s=e[l])?(s.__data__=a[l],i[l]=s):n[l]=new r.L(t,a[l]);for(;l<c;++l)(s=e[l])&&(o[l]=s)}function s(t,e,n,i,o,a,s){var l,c,u,h=new Map,d=e.length,p=a.length,f=new Array(d);for(l=0;l<d;++l)(c=e[l])&&(f[l]=u=s.call(c,c.__data__,l,e)+"",h.has(u)?o[l]=c:h.set(u,c));for(l=0;l<p;++l)u=s.call(t,a[l],l,a)+"",(c=h.get(u))?(i[l]=c,c.__data__=a[l],h.delete(u)):n[l]=new r.L(t,a[l]);for(l=0;l<d;++l)(c=e[l])&&h.get(f[l])===c&&(o[l]=c)}function l(t){return t.__data__}function c(t,e){if(!arguments.length)return Array.from(this,l);var n=e?s:a,r=this._parents,c=this._groups;"function"!=typeof t&&(t=(0,o.A)(t));for(var h=c.length,d=new Array(h),p=new Array(h),f=new Array(h),g=0;g<h;++g){var m=r[g],v=c[g],y=v.length,b=u(t.call(m,m&&m.__data__,g,r)),w=b.length,S=p[g]=new Array(w),x=d[g]=new Array(w);n(m,v,S,x,f[g]=new Array(y),b,e);for(var k,C,M=0,T=0;M<w;++M)if(k=S[M]){for(M>=T&&(T=M+1);!(C=x[T])&&++T<w;);k._next=C||null}}return(d=new i.LN(d,r))._enter=p,d._exit=f,d}function u(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}},49433:(t,e,n)=>{"use strict";function i(t){return arguments.length?this.property("__data__",t):this.node().__data__}n.d(e,{A:()=>i})},30202:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(76747);function r(t,e,n){var r=(0,i.A)(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function o(t,e){return function(){return r(this,t,e)}}function a(t,e){return function(){return r(this,t,e.apply(this,arguments))}}function s(t,e){return this.each(("function"==typeof e?a:o)(t,e))}},42901:(t,e,n)=>{"use strict";function i(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this}n.d(e,{A:()=>i})},30807:(t,e,n)=>{"use strict";function i(){return!this.node()}n.d(e,{A:()=>i})},34916:(t,e,n)=>{"use strict";n.d(e,{A:()=>o,L:()=>a});var i=n(56732),r=n(31882);function o(){return new r.LN(this._enter||this._groups.map(i.A),this._parents)}function a(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}a.prototype={constructor:a,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},72672:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(56732),r=n(31882);function o(){return new r.LN(this._exit||this._groups.map(i.A),this._parents)}},99734:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(31882),r=n(56541);function o(t){"function"!=typeof t&&(t=(0,r.A)(t));for(var e=this._groups,n=e.length,o=new Array(n),a=0;a<n;++a)for(var s,l=e[a],c=l.length,u=o[a]=[],h=0;h<c;++h)(s=l[h])&&t.call(s,s.__data__,h,l)&&u.push(s);return new i.LN(o,this._parents)}},40697:(t,e,n)=>{"use strict";function i(){this.innerHTML=""}function r(t){return function(){this.innerHTML=t}}function o(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function a(t){return arguments.length?this.each(null==t?i:("function"==typeof t?o:r)(t)):this.node().innerHTML}n.d(e,{A:()=>a})},31882:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>z,LN:()=>F});var i=n(77952),r=n(39713),o=n(67408),a=n(17867),s=n(99734),l=n(98664),c=n(34916),u=n(72672),h=n(95232),d=n(87610),p=n(34510),f=n(82920),g=n(15152),m=n(43455),v=n(74784),y=n(165),b=n(30807),w=n(42901),S=n(47339),x=n(23683),k=n(10461),C=n(28235),M=n(87499),T=n(40697),E=n(42582),A=n(79215),_=n(48072),P=n(91429),D=n(43900),O=n(49063),L=n(49433),I=n(35233),R=n(30202),V=n(81322),N=[null];function F(t,e){this._groups=t,this._parents=e}function B(){return new F([[document.documentElement]],N)}F.prototype=B.prototype={constructor:F,select:i.A,selectAll:r.A,selectChild:o.A,selectChildren:a.A,filter:s.A,data:l.A,enter:c.A,exit:u.A,join:h.A,merge:d.A,selection:function(){return this},order:p.A,sort:f.A,call:g.A,nodes:m.A,node:v.A,size:y.A,empty:b.A,each:w.A,attr:S.A,style:x.A,property:k.A,classed:C.A,text:M.A,html:T.A,raise:E.A,lower:A.A,append:_.A,insert:P.A,remove:D.A,clone:O.A,datum:L.A,on:I.A,dispatch:R.A,[Symbol.iterator]:V.A};const z=B},91429:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(63663),r=n(50574);function o(){return null}function a(t,e){var n="function"==typeof t?t:(0,i.A)(t),a=null==e?o:"function"==typeof e?e:(0,r.A)(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)}))}},81322:(t,e,n)=>{"use strict";function*i(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,a=r.length;o<a;++o)(i=r[o])&&(yield i)}n.d(e,{A:()=>i})},95232:(t,e,n)=>{"use strict";function i(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r}n.d(e,{A:()=>i})},79215:(t,e,n)=>{"use strict";function i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function r(){return this.each(i)}n.d(e,{A:()=>r})},87610:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(31882);function r(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,o=n.length,a=r.length,s=Math.min(o,a),l=new Array(o),c=0;c<s;++c)for(var u,h=n[c],d=r[c],p=h.length,f=l[c]=new Array(p),g=0;g<p;++g)(u=h[g]||d[g])&&(f[g]=u);for(;c<o;++c)l[c]=n[c];return new i.LN(l,this._parents)}},74784:(t,e,n)=>{"use strict";function i(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}n.d(e,{A:()=>i})},43455:(t,e,n)=>{"use strict";function i(){return Array.from(this)}n.d(e,{A:()=>i})},35233:(t,e,n)=>{"use strict";function i(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function r(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function o(t,e,n){var o,a,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),l=s.length;if(!(arguments.length<2)){for(c=e?r:i,o=0;o<l;++o)this.each(c(s[o],e,n));return this}var c=this.node().__on;if(c)for(var u,h=0,d=c.length;h<d;++h)for(o=0,u=c[h];o<l;++o)if((a=s[o]).type===u.type&&a.name===u.name)return u.value}n.d(e,{A:()=>o})},34510:(t,e,n)=>{"use strict";function i(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this}n.d(e,{A:()=>i})},10461:(t,e,n)=>{"use strict";function i(t){return function(){delete this[t]}}function r(t,e){return function(){this[t]=e}}function o(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function a(t,e){return arguments.length>1?this.each((null==e?i:"function"==typeof e?o:r)(t,e)):this.node()[t]}n.d(e,{A:()=>a})},42582:(t,e,n)=>{"use strict";function i(){this.nextSibling&&this.parentNode.appendChild(this)}function r(){return this.each(i)}n.d(e,{A:()=>r})},43900:(t,e,n)=>{"use strict";function i(){var t=this.parentNode;t&&t.removeChild(this)}function r(){return this.each(i)}n.d(e,{A:()=>r})},77952:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(31882),r=n(50574);function o(t){"function"!=typeof t&&(t=(0,r.A)(t));for(var e=this._groups,n=e.length,o=new Array(n),a=0;a<n;++a)for(var s,l,c=e[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l);return new i.LN(o,this._parents)}},39713:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(31882),r=n(5478),o=n(80747);function a(t){t="function"==typeof t?function(t){return function(){return(0,r.A)(t.apply(this,arguments))}}(t):(0,o.A)(t);for(var e=this._groups,n=e.length,a=[],s=[],l=0;l<n;++l)for(var c,u=e[l],h=u.length,d=0;d<h;++d)(c=u[d])&&(a.push(t.call(c,c.__data__,d,u)),s.push(c));return new i.LN(a,s)}},67408:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(56541),r=Array.prototype.find;function o(){return this.firstElementChild}function a(t){return this.select(null==t?o:function(t){return function(){return r.call(this.children,t)}}("function"==typeof t?t:(0,i.j)(t)))}},17867:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(56541),r=Array.prototype.filter;function o(){return Array.from(this.children)}function a(t){return this.selectAll(null==t?o:function(t){return function(){return r.call(this.children,t)}}("function"==typeof t?t:(0,i.j)(t)))}},165:(t,e,n)=>{"use strict";function i(){let t=0;for(const e of this)++t;return t}n.d(e,{A:()=>i})},82920:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(31882);function r(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=o);for(var n=this._groups,r=n.length,a=new Array(r),s=0;s<r;++s){for(var l,c=n[s],u=c.length,h=a[s]=new Array(u),d=0;d<u;++d)(l=c[d])&&(h[d]=l);h.sort(e)}return new i.LN(a,this._parents).order()}function o(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},56732:(t,e,n)=>{"use strict";function i(t){return new Array(t.length)}n.d(e,{A:()=>i})},23683:(t,e,n)=>{"use strict";n.d(e,{A:()=>s,j:()=>l});var i=n(76747);function r(t){return function(){this.style.removeProperty(t)}}function o(t,e,n){return function(){this.style.setProperty(t,e,n)}}function a(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function s(t,e,n){return arguments.length>1?this.each((null==e?r:"function"==typeof e?a:o)(t,e,null==n?"":n)):l(this.node(),t)}function l(t,e){return t.style.getPropertyValue(e)||(0,i.A)(t).getComputedStyle(t,null).getPropertyValue(e)}},87499:(t,e,n)=>{"use strict";function i(){this.textContent=""}function r(t){return function(){this.textContent=t}}function o(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function a(t){return arguments.length?this.each(null==t?i:("function"==typeof t?o:r)(t)):this.node().textContent}n.d(e,{A:()=>a})},50574:(t,e,n)=>{"use strict";function i(){}function r(t){return null==t?i:function(){return this.querySelector(t)}}n.d(e,{A:()=>r})},80747:(t,e,n)=>{"use strict";function i(){return[]}function r(t){return null==t?i:function(){return this.querySelectorAll(t)}}n.d(e,{A:()=>r})},76747:(t,e,n)=>{"use strict";function i(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}n.d(e,{A:()=>i})},61463:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(70029);function r(t,e,n){var r=new i.M4;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}},70029:(t,e,n)=>{"use strict";n.d(e,{M4:()=>g,O1:()=>m,tB:()=>p});var i,r,o=0,a=0,s=0,l=0,c=0,u=0,h="object"==typeof performance&&performance.now?performance:Date,d="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function p(){return c||(d(f),c=h.now()+u)}function f(){c=0}function g(){this._call=this._time=this._next=null}function m(t,e,n){var i=new g;return i.restart(t,e,n),i}function v(){c=(l=h.now())+u,o=a=0;try{!function(){p(),++o;for(var t,e=i;e;)(t=c-e._time)>=0&&e._call.call(void 0,t),e=e._next;--o}()}finally{o=0,function(){for(var t,e,n=i,o=1/0;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:i=e);r=t,b(o)}(),c=0}}function y(){var t=h.now(),e=t-l;e>1e3&&(u-=e,l=t)}function b(t){o||(a&&(a=clearTimeout(a)),t-c>24?(t<1/0&&(a=setTimeout(v,t-h.now()-u)),s&&(s=clearInterval(s))):(s||(l=h.now(),s=setInterval(y,1e3)),o=1,d(v)))}g.prototype=m.prototype={constructor:g,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?p():+n)+(null==e?0:+e),this._next||r===this||(r?r._next=this:i=this,r=this),this._call=t,this._time=n,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}}},89902:(t,e,n)=>{"use strict";n(57111)},67045:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(53363);function r(t,e){var n,r,o,a=t.__transition,s=!0;if(a){for(o in e=null==e?null:e+"",a)(n=a[o]).name===e?(r=n.state>i.xo&&n.state<i.Op,n.state=i.hV,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[o]):s=!1;s&&delete t.__transition}}},57111:(t,e,n)=>{"use strict";var i=n(31882),r=n(5868),o=n(54620);i.Ay.prototype.interrupt=r.A,i.Ay.prototype.transition=o.A},5868:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(67045);function r(t){return this.each((function(){(0,i.A)(this,t)}))}},54620:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var i=n(29064),r=n(53363),o=n(72101),a=n(70029),s={time:null,delay:0,duration:250,ease:o.wq};function l(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function c(t){var e,n;t instanceof i.eB?(e=t._id,t=t._name):(e=(0,i.Si)(),(n=s).time=(0,a.tB)(),t=null==t?null:t+"");for(var o=this._groups,c=o.length,u=0;u<c;++u)for(var h,d=o[u],p=d.length,f=0;f<p;++f)(h=d[f])&&(0,r.Ay)(h,t,e,f,d,n||l(h,e));return new i.eB(o,this._parents,t,e)}},17949:(t,e,n)=>{"use strict";n.d(e,{A:()=>p});var i=n(91957),r=n(47268),o=n(10123),a=n(47479);function s(t){return function(){this.removeAttribute(t)}}function l(t){return function(){this.removeAttributeNS(t.space,t.local)}}function c(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===i?r:r=e(i=a,n)}}function u(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===i?r:r=e(i=a,n)}}function h(t,e,n){var i,r,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,l));this.removeAttribute(t)}}function d(t,e,n){var i,r,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,l));this.removeAttributeNS(t.space,t.local)}}function p(t,e){var n=(0,r.A)(t),p="transform"===n?i.I:a.A;return this.attrTween(t,"function"==typeof e?(n.local?d:h)(n,p,(0,o.J)(this,"attr."+t,e)):null==e?(n.local?l:s)(n):(n.local?u:c)(n,p,e))}},83446:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(47268);function r(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,r)),n}return r._value=e,r}function o(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,r)),n}return r._value=e,r}function a(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var a=(0,i.A)(t);return this.tween(n,(a.local?r:o)(a,e))}},81375:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(53363);function r(t,e){return function(){(0,i.Ts)(this,t).delay=+e.apply(this,arguments)}}function o(t,e){return e=+e,function(){(0,i.Ts)(this,t).delay=e}}function a(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?r:o)(e,t)):(0,i.Jt)(this.node(),e).delay}},76558:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(53363);function r(t,e){return function(){(0,i.hZ)(this,t).duration=+e.apply(this,arguments)}}function o(t,e){return e=+e,function(){(0,i.hZ)(this,t).duration=e}}function a(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?r:o)(e,t)):(0,i.Jt)(this.node(),e).duration}},74228:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(53363);function r(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){(0,i.hZ)(this,t).ease=e}}(e,t)):(0,i.Jt)(this.node(),e).ease}},46066:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(53363);function r(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;(0,i.hZ)(this,t).ease=n}}(this._id,t))}},3589:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(53363);function r(){var t,e,n=this,r=n._id,o=n.size();return new Promise((function(a,s){var l={value:s},c={value:function(){0==--o&&a()}};n.each((function(){var n=(0,i.hZ)(this,r),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),n.on=e})),0===o&&a()}))}},14876:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(56541),r=n(29064);function o(t){"function"!=typeof t&&(t=(0,i.A)(t));for(var e=this._groups,n=e.length,o=new Array(n),a=0;a<n;++a)for(var s,l=e[a],c=l.length,u=o[a]=[],h=0;h<c;++h)(s=l[h])&&t.call(s,s.__data__,h,l)&&u.push(s);return new r.eB(o,this._parents,this._name,this._id)}},29064:(t,e,n)=>{"use strict";n.d(e,{Si:()=>T,eB:()=>M});var i=n(31882),r=n(17949),o=n(83446),a=n(81375),s=n(76558),l=n(74228),c=n(46066),u=n(14876),h=n(45636),d=n(95207),p=n(25182),f=n(53206),g=n(31683),m=n(77270),v=n(9353),y=n(88674),b=n(70137),w=n(47890),S=n(45509),x=n(10123),k=n(3589),C=0;function M(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function T(){return++C}var E=i.Ay.prototype;M.prototype=function(t){return(0,i.Ay)().transition(t)}.prototype={constructor:M,select:f.A,selectAll:g.A,selectChild:E.selectChild,selectChildren:E.selectChildren,filter:u.A,merge:h.A,selection:m.A,transition:S.A,call:E.call,nodes:E.nodes,node:E.node,size:E.size,empty:E.empty,each:E.each,on:d.A,attr:r.A,attrTween:o.A,style:v.A,styleTween:y.A,text:b.A,textTween:w.A,remove:p.A,tween:x.A,delay:a.A,duration:s.A,ease:l.A,easeVarying:c.A,end:k.A,[Symbol.iterator]:E[Symbol.iterator]}},47479:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(46957),r=n(8981),o=n(21197),a=n(67737);function s(t,e){var n;return("number"==typeof e?r.A:e instanceof i.Ay?o.Ay:(n=(0,i.Ay)(e))?(e=n,o.Ay):a.A)(t,e)}},45636:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(29064);function r(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var c,u=e[l],h=n[l],d=u.length,p=s[l]=new Array(d),f=0;f<d;++f)(c=u[f]||h[f])&&(p[f]=c);for(;l<r;++l)s[l]=e[l];return new i.eB(s,this._parents,this._name,this._id)}},95207:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(53363);function r(t,e){var n=this._id;return arguments.length<2?(0,i.Jt)(this.node(),n).on.on(t):this.each(function(t,e,n){var r,o,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?i.Ts:i.hZ;return function(){var i=a(this,t),s=i.on;s!==r&&(o=(r=s).copy()).on(e,n),i.on=o}}(n,t,e))}},25182:(t,e,n)=>{"use strict";function i(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t}n.d(e,{A:()=>i})},53363:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>g,Jt:()=>y,Op:()=>p,Ts:()=>m,hV:()=>f,hZ:()=>v,xo:()=>u});var i=n(41089),r=n(70029),o=n(61463),a=(0,i.A)("start","end","cancel","interrupt"),s=[],l=0,c=1,u=2,h=3,d=4,p=5,f=6;function g(t,e,n,i,g,m){var v=t.__transition;if(v){if(n in v)return}else t.__transition={};!function(t,e,n){var i,a=t.__transition;function s(r){var p,m,v,y;if(n.state!==c)return g();for(p in a)if((y=a[p]).name===n.name){if(y.state===h)return(0,o.A)(s);y.state===d?(y.state=f,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete a[p]):+p<e&&(y.state=f,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete a[p])}if((0,o.A)((function(){n.state===h&&(n.state=d,n.timer.restart(l,n.delay,n.time),l(r))})),n.state=u,n.on.call("start",t,t.__data__,n.index,n.group),n.state===u){for(n.state=h,i=new Array(v=n.tween.length),p=0,m=-1;p<v;++p)(y=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++m]=y);i.length=m+1}}function l(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(g),n.state=p,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);n.state===p&&(n.on.call("end",t,t.__data__,n.index,n.group),g())}function g(){for(var i in n.state=f,n.timer.stop(),delete a[e],a)return;delete t.__transition}a[e]=n,n.timer=(0,r.O1)((function(t){n.state=c,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:g,on:a,tween:s,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:l})}function m(t,e){var n=y(t,e);if(n.state>l)throw new Error("too late; already scheduled");return n}function v(t,e){var n=y(t,e);if(n.state>h)throw new Error("too late; already running");return n}function y(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}},53206:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(50574),r=n(29064),o=n(53363);function a(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=(0,i.A)(t));for(var a=this._groups,s=a.length,l=new Array(s),c=0;c<s;++c)for(var u,h,d=a[c],p=d.length,f=l[c]=new Array(p),g=0;g<p;++g)(u=d[g])&&(h=t.call(u,u.__data__,g,d))&&("__data__"in u&&(h.__data__=u.__data__),f[g]=h,(0,o.Ay)(f[g],e,n,g,f,(0,o.Jt)(u,n)));return new r.eB(l,this._parents,e,n)}},31683:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(80747),r=n(29064),o=n(53363);function a(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=(0,i.A)(t));for(var a=this._groups,s=a.length,l=[],c=[],u=0;u<s;++u)for(var h,d=a[u],p=d.length,f=0;f<p;++f)if(h=d[f]){for(var g,m=t.call(h,h.__data__,f,d),v=(0,o.Jt)(h,n),y=0,b=m.length;y<b;++y)(g=m[y])&&(0,o.Ay)(g,e,n,y,m,v);l.push(m),c.push(h)}return new r.eB(l,c,e,n)}},77270:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(31882).Ay.prototype.constructor;function r(){return new i(this._groups,this._parents)}},9353:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var i=n(91957),r=n(23683),o=n(53363),a=n(10123),s=n(47479);function l(t){return function(){this.style.removeProperty(t)}}function c(t,e,n){var c="transform"==(t+="")?i.T:s.A;return null==e?this.styleTween(t,function(t,e){var n,i,o;return function(){var a=(0,r.j)(this,t),s=(this.style.removeProperty(t),(0,r.j)(this,t));return a===s?null:a===n&&s===i?o:o=e(n=a,i=s)}}(t,c)).on("end.style."+t,l(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,o,a;return function(){var s=(0,r.j)(this,t),l=n(this),c=l+"";return null==l&&(this.style.removeProperty(t),c=l=(0,r.j)(this,t)),s===c?null:s===i&&c===o?a:(o=c,a=e(i=s,l))}}(t,c,(0,a.J)(this,"style."+t,e))).each(function(t,e){var n,i,r,a,s="style."+e,c="end."+s;return function(){var u=(0,o.hZ)(this,t),h=u.on,d=null==u.value[s]?a||(a=l(e)):void 0;h===n&&r===d||(i=(n=h).copy()).on(c,r=d),u.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,o,a=n+"";return function(){var s=(0,r.j)(this,t);return s===a?null:s===i?o:o=e(i=s,n)}}(t,c,e),n).on("end.style."+t,null)}},88674:(t,e,n)=>{"use strict";function i(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}(t,o,n)),i}return o._value=e,o}(t,e,null==n?"":n))}n.d(e,{A:()=>i})},70137:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(10123);function r(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}((0,i.J)(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))}},47890:(t,e,n)=>{"use strict";function i(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return i._value=t,i}(t))}n.d(e,{A:()=>i})},45509:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(29064),r=n(53363);function o(){for(var t=this._name,e=this._id,n=(0,i.Si)(),o=this._groups,a=o.length,s=0;s<a;++s)for(var l,c=o[s],u=c.length,h=0;h<u;++h)if(l=c[h]){var d=(0,r.Jt)(l,e);(0,r.Ay)(l,t,n,h,c,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new i.eB(o,this._parents,t,n)}},10123:(t,e,n)=>{"use strict";n.d(e,{A:()=>a,J:()=>s});var i=n(53363);function r(t,e){var n,r;return function(){var o=(0,i.hZ)(this,t),a=o.tween;if(a!==n)for(var s=0,l=(r=n=a).length;s<l;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}o.tween=r}}function o(t,e,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var a=(0,i.hZ)(this,t),s=a.tween;if(s!==r){o=(r=s).slice();for(var l={name:e,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===e){o[c]=l;break}c===u&&o.push(l)}a.tween=o}}function a(t,e){var n=this._id;if(t+="",arguments.length<2){for(var a,s=(0,i.Jt)(this.node(),n).tween,l=0,c=s.length;l<c;++l)if((a=s[l]).name===t)return a.value;return null}return this.each((null==e?r:o)(n,t,e))}function s(t,e,n){var r=t._id;return t.each((function(){var t=(0,i.hZ)(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return(0,i.Jt)(t,r).value[e]}}},46470:(t,e,n)=>{"use strict";n(31943),n(13578)},13578:(t,e,n)=>{"use strict";function i(t,e,n){this.k=t,this.x=e,this.y=n}i.prototype={constructor:i,scale:function(t){return 1===t?this:new i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new i(1,0,0),i.prototype},31943:(t,e,n)=>{"use strict";n(89902),n(13578)},30756:(t,e,n)=>{"use strict";n.d(e,{ZEH:()=>i.ZE,m4Y:()=>i.m4}),n(23537);var i=n(71303);n(89902),n(46470)},99418:(t,e,n)=>{"use strict";n.d(e,{A:()=>nt});const{entries:i,setPrototypeOf:r,isFrozen:o,getPrototypeOf:a,getOwnPropertyDescriptor:s}=Object;let{freeze:l,seal:c,create:u}=Object,{apply:h,construct:d}="undefined"!=typeof Reflect&&Reflect;l||(l=function(t){return t}),c||(c=function(t){return t}),h||(h=function(t,e,n){return t.apply(e,n)}),d||(d=function(t,e){return new t(...e)});const p=A(Array.prototype.forEach),f=A(Array.prototype.lastIndexOf),g=A(Array.prototype.pop),m=A(Array.prototype.push),v=A(Array.prototype.splice),y=A(String.prototype.toLowerCase),b=A(String.prototype.toString),w=A(String.prototype.match),S=A(String.prototype.replace),x=A(String.prototype.indexOf),k=A(String.prototype.trim),C=A(Object.prototype.hasOwnProperty),M=A(RegExp.prototype.test),T=(E=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return d(E,e)});var E;function A(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return h(t,e,i)}}function _(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;r&&r(t,null);let i=e.length;for(;i--;){let r=e[i];if("string"==typeof r){const t=n(r);t!==r&&(o(e)||(e[i]=t),r=t)}t[r]=!0}return t}function P(t){for(let e=0;e<t.length;e++)C(t,e)||(t[e]=null);return t}function D(t){const e=u(null);for(const[n,r]of i(t))C(t,n)&&(Array.isArray(r)?e[n]=P(r):r&&"object"==typeof r&&r.constructor===Object?e[n]=D(r):e[n]=r);return e}function O(t,e){for(;null!==t;){const n=s(t,e);if(n){if(n.get)return A(n.get);if("function"==typeof n.value)return A(n.value)}t=a(t)}return function(){return null}}const L=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),V=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),F=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B=l(["#text"]),z=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),j=l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),G=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),H=c(/<%[\w\W]*|[\w\W]*%>/gm),q=c(/\$\{[\w\W]*/gm),W=c(/^data-[\-\w.\u00B7-\uFFFF]+$/),Z=c(/^aria-[\-\w]+$/),Y=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K=c(/^(?:\w+script|data):/i),X=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J=c(/^html$/i),Q=c(/^[a-z][.\w]*(-[.\w]+)+$/i);var tt=Object.freeze({__proto__:null,ARIA_ATTR:Z,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:Q,DATA_ATTR:W,DOCTYPE_NAME:J,ERB_EXPR:H,IS_ALLOWED_URI:Y,IS_SCRIPT_OR_DATA:K,MUSTACHE_EXPR:$,TMPLIT_EXPR:q});const et=function(){return"undefined"==typeof window?null:window};var nt=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();const n=e=>t(e);if(n.version="3.2.4",n.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return n.isSupported=!1,n;let{document:r}=e;const o=r,a=o.currentScript,{DocumentFragment:s,HTMLTemplateElement:c,Node:h,Element:d,NodeFilter:E,NamedNodeMap:A=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:P,DOMParser:$,trustedTypes:H}=e,q=d.prototype,W=O(q,"cloneNode"),Z=O(q,"remove"),K=O(q,"nextSibling"),X=O(q,"childNodes"),Q=O(q,"parentNode");if("function"==typeof c){const t=r.createElement("template");t.content&&t.content.ownerDocument&&(r=t.content.ownerDocument)}let nt,it="";const{implementation:rt,createNodeIterator:ot,createDocumentFragment:at,getElementsByTagName:st}=r,{importNode:lt}=o;let ct={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof i&&"function"==typeof Q&&rt&&void 0!==rt.createHTMLDocument;const{MUSTACHE_EXPR:ut,ERB_EXPR:ht,TMPLIT_EXPR:dt,DATA_ATTR:pt,ARIA_ATTR:ft,IS_SCRIPT_OR_DATA:gt,ATTR_WHITESPACE:mt,CUSTOM_ELEMENT:vt}=tt;let{IS_ALLOWED_URI:yt}=tt,bt=null;const wt=_({},[...L,...I,...R,...N,...B]);let St=null;const xt=_({},[...z,...j,...U,...G]);let kt=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ct=null,Mt=null,Tt=!0,Et=!0,At=!1,_t=!0,Pt=!1,Dt=!0,Ot=!1,Lt=!1,It=!1,Rt=!1,Vt=!1,Nt=!1,Ft=!0,Bt=!1,zt=!0,jt=!1,Ut={},Gt=null;const $t=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ht=null;const qt=_({},["audio","video","img","source","image","track"]);let Wt=null;const Zt=_({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Yt="http://www.w3.org/1998/Math/MathML",Kt="http://www.w3.org/2000/svg",Xt="http://www.w3.org/1999/xhtml";let Jt=Xt,Qt=!1,te=null;const ee=_({},[Yt,Kt,Xt],b);let ne=_({},["mi","mo","mn","ms","mtext"]),ie=_({},["annotation-xml"]);const re=_({},["title","style","font","a","script"]);let oe=null;const ae=["application/xhtml+xml","text/html"];let se=null,le=null;const ce=r.createElement("form"),ue=function(t){return t instanceof RegExp||t instanceof Function},he=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!le||le!==t){if(t&&"object"==typeof t||(t={}),t=D(t),oe=-1===ae.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,se="application/xhtml+xml"===oe?b:y,bt=C(t,"ALLOWED_TAGS")?_({},t.ALLOWED_TAGS,se):wt,St=C(t,"ALLOWED_ATTR")?_({},t.ALLOWED_ATTR,se):xt,te=C(t,"ALLOWED_NAMESPACES")?_({},t.ALLOWED_NAMESPACES,b):ee,Wt=C(t,"ADD_URI_SAFE_ATTR")?_(D(Zt),t.ADD_URI_SAFE_ATTR,se):Zt,Ht=C(t,"ADD_DATA_URI_TAGS")?_(D(qt),t.ADD_DATA_URI_TAGS,se):qt,Gt=C(t,"FORBID_CONTENTS")?_({},t.FORBID_CONTENTS,se):$t,Ct=C(t,"FORBID_TAGS")?_({},t.FORBID_TAGS,se):{},Mt=C(t,"FORBID_ATTR")?_({},t.FORBID_ATTR,se):{},Ut=!!C(t,"USE_PROFILES")&&t.USE_PROFILES,Tt=!1!==t.ALLOW_ARIA_ATTR,Et=!1!==t.ALLOW_DATA_ATTR,At=t.ALLOW_UNKNOWN_PROTOCOLS||!1,_t=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Pt=t.SAFE_FOR_TEMPLATES||!1,Dt=!1!==t.SAFE_FOR_XML,Ot=t.WHOLE_DOCUMENT||!1,Rt=t.RETURN_DOM||!1,Vt=t.RETURN_DOM_FRAGMENT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,It=t.FORCE_BODY||!1,Ft=!1!==t.SANITIZE_DOM,Bt=t.SANITIZE_NAMED_PROPS||!1,zt=!1!==t.KEEP_CONTENT,jt=t.IN_PLACE||!1,yt=t.ALLOWED_URI_REGEXP||Y,Jt=t.NAMESPACE||Xt,ne=t.MATHML_TEXT_INTEGRATION_POINTS||ne,ie=t.HTML_INTEGRATION_POINTS||ie,kt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ue(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(kt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ue(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(kt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(kt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pt&&(Et=!1),Vt&&(Rt=!0),Ut&&(bt=_({},B),St=[],!0===Ut.html&&(_(bt,L),_(St,z)),!0===Ut.svg&&(_(bt,I),_(St,j),_(St,G)),!0===Ut.svgFilters&&(_(bt,R),_(St,j),_(St,G)),!0===Ut.mathMl&&(_(bt,N),_(St,U),_(St,G))),t.ADD_TAGS&&(bt===wt&&(bt=D(bt)),_(bt,t.ADD_TAGS,se)),t.ADD_ATTR&&(St===xt&&(St=D(St)),_(St,t.ADD_ATTR,se)),t.ADD_URI_SAFE_ATTR&&_(Wt,t.ADD_URI_SAFE_ATTR,se),t.FORBID_CONTENTS&&(Gt===$t&&(Gt=D(Gt)),_(Gt,t.FORBID_CONTENTS,se)),zt&&(bt["#text"]=!0),Ot&&_(bt,["html","head","body"]),bt.table&&(_(bt,["tbody"]),delete Ct.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');nt=t.TRUSTED_TYPES_POLICY,it=nt.createHTML("")}else void 0===nt&&(nt=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(n=e.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(H,a)),null!==nt&&"string"==typeof it&&(it=nt.createHTML(""));l&&l(t),le=t}},de=_({},[...I,...R,...V]),pe=_({},[...N,...F]),fe=function(t){m(n.removed,{element:t});try{Q(t).removeChild(t)}catch(e){Z(t)}},ge=function(t,e){try{m(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){m(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(Rt||Vt)try{fe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},me=function(t){let e=null,n=null;if(It)t="<remove></remove>"+t;else{const e=w(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===oe&&Jt===Xt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const i=nt?nt.createHTML(t):t;if(Jt===Xt)try{e=(new $).parseFromString(i,oe)}catch(t){}if(!e||!e.documentElement){e=rt.createDocument(Jt,"template",null);try{e.documentElement.innerHTML=Qt?it:i}catch(t){}}const o=e.body||e.documentElement;return t&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),Jt===Xt?st.call(e,Ot?"html":"body")[0]:Ot?e.documentElement:o},ve=function(t){return ot.call(t.ownerDocument||t,t,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},ye=function(t){return t instanceof P&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof A)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},be=function(t){return"function"==typeof h&&t instanceof h};function we(t,e,i){p(t,(t=>{t.call(n,e,i,le)}))}const Se=function(t){let e=null;if(we(ct.beforeSanitizeElements,t,null),ye(t))return fe(t),!0;const i=se(t.nodeName);if(we(ct.uponSanitizeElement,t,{tagName:i,allowedTags:bt}),t.hasChildNodes()&&!be(t.firstElementChild)&&M(/<[/\w]/g,t.innerHTML)&&M(/<[/\w]/g,t.textContent))return fe(t),!0;if(7===t.nodeType)return fe(t),!0;if(Dt&&8===t.nodeType&&M(/<[/\w]/g,t.data))return fe(t),!0;if(!bt[i]||Ct[i]){if(!Ct[i]&&ke(i)){if(kt.tagNameCheck instanceof RegExp&&M(kt.tagNameCheck,i))return!1;if(kt.tagNameCheck instanceof Function&&kt.tagNameCheck(i))return!1}if(zt&&!Gt[i]){const e=Q(t)||t.parentNode,n=X(t)||t.childNodes;if(n&&e)for(let i=n.length-1;i>=0;--i){const r=W(n[i],!0);r.__removalCount=(t.__removalCount||0)+1,e.insertBefore(r,K(t))}}return fe(t),!0}return t instanceof d&&!function(t){let e=Q(t);e&&e.tagName||(e={namespaceURI:Jt,tagName:"template"});const n=y(t.tagName),i=y(e.tagName);return!!te[t.namespaceURI]&&(t.namespaceURI===Kt?e.namespaceURI===Xt?"svg"===n:e.namespaceURI===Yt?"svg"===n&&("annotation-xml"===i||ne[i]):Boolean(de[n]):t.namespaceURI===Yt?e.namespaceURI===Xt?"math"===n:e.namespaceURI===Kt?"math"===n&&ie[i]:Boolean(pe[n]):t.namespaceURI===Xt?!(e.namespaceURI===Kt&&!ie[i])&&!(e.namespaceURI===Yt&&!ne[i])&&!pe[n]&&(re[n]||!de[n]):!("application/xhtml+xml"!==oe||!te[t.namespaceURI]))}(t)?(fe(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!M(/<\/no(script|embed|frames)/i,t.innerHTML)?(Pt&&3===t.nodeType&&(e=t.textContent,p([ut,ht,dt],(t=>{e=S(e,t," ")})),t.textContent!==e&&(m(n.removed,{element:t.cloneNode()}),t.textContent=e)),we(ct.afterSanitizeElements,t,null),!1):(fe(t),!0)},xe=function(t,e,n){if(Ft&&("id"===e||"name"===e)&&(n in r||n in ce))return!1;if(Et&&!Mt[e]&&M(pt,e));else if(Tt&&M(ft,e));else if(!St[e]||Mt[e]){if(!(ke(t)&&(kt.tagNameCheck instanceof RegExp&&M(kt.tagNameCheck,t)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(t))&&(kt.attributeNameCheck instanceof RegExp&&M(kt.attributeNameCheck,e)||kt.attributeNameCheck instanceof Function&&kt.attributeNameCheck(e))||"is"===e&&kt.allowCustomizedBuiltInElements&&(kt.tagNameCheck instanceof RegExp&&M(kt.tagNameCheck,n)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(n))))return!1}else if(Wt[e]);else if(M(yt,S(n,mt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==x(n,"data:")||!Ht[t])if(At&&!M(gt,S(n,mt,"")));else if(n)return!1;return!0},ke=function(t){return"annotation-xml"!==t&&w(t,vt)},Ce=function(t){we(ct.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||ye(t))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:St,forceKeepAttr:void 0};let r=e.length;for(;r--;){const o=e[r],{name:a,namespaceURI:s,value:l}=o,c=se(a);let u="value"===a?l:k(l);if(i.attrName=c,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,we(ct.uponSanitizeAttribute,t,i),u=i.attrValue,!Bt||"id"!==c&&"name"!==c||(ge(a,t),u="user-content-"+u),Dt&&M(/((--!?|])>)|<\/(style|title)/i,u)){ge(a,t);continue}if(i.forceKeepAttr)continue;if(ge(a,t),!i.keepAttr)continue;if(!_t&&M(/\/>/i,u)){ge(a,t);continue}Pt&&p([ut,ht,dt],(t=>{u=S(u,t," ")}));const h=se(t.nodeName);if(xe(h,c,u)){if(nt&&"object"==typeof H&&"function"==typeof H.getAttributeType)if(s);else switch(H.getAttributeType(h,c)){case"TrustedHTML":u=nt.createHTML(u);break;case"TrustedScriptURL":u=nt.createScriptURL(u)}try{s?t.setAttributeNS(s,a,u):t.setAttribute(a,u),ye(t)?fe(t):g(n.removed)}catch(t){}}}we(ct.afterSanitizeAttributes,t,null)},Me=function t(e){let n=null;const i=ve(e);for(we(ct.beforeSanitizeShadowDOM,e,null);n=i.nextNode();)we(ct.uponSanitizeShadowNode,n,null),Se(n),Ce(n),n.content instanceof s&&t(n.content);we(ct.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,r=null,a=null,l=null;if(Qt=!t,Qt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!be(t)){if("function"!=typeof t.toString)throw T("toString is not a function");if("string"!=typeof(t=t.toString()))throw T("dirty is not a string, aborting")}if(!n.isSupported)return t;if(Lt||he(e),n.removed=[],"string"==typeof t&&(jt=!1),jt){if(t.nodeName){const e=se(t.nodeName);if(!bt[e]||Ct[e])throw T("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof h)i=me("\x3c!----\x3e"),r=i.ownerDocument.importNode(t,!0),1===r.nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?i=r:i.appendChild(r);else{if(!Rt&&!Pt&&!Ot&&-1===t.indexOf("<"))return nt&&Nt?nt.createHTML(t):t;if(i=me(t),!i)return Rt?null:Nt?it:""}i&&It&&fe(i.firstChild);const c=ve(jt?t:i);for(;a=c.nextNode();)Se(a),Ce(a),a.content instanceof s&&Me(a.content);if(jt)return t;if(Rt){if(Vt)for(l=at.call(i.ownerDocument);i.firstChild;)l.appendChild(i.firstChild);else l=i;return(St.shadowroot||St.shadowrootmode)&&(l=lt.call(o,l,!0)),l}let u=Ot?i.outerHTML:i.innerHTML;return Ot&&bt["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&M(J,i.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+u),Pt&&p([ut,ht,dt],(t=>{u=S(u,t," ")})),nt&&Nt?nt.createHTML(u):u},n.setConfig=function(){he(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Lt=!0},n.clearConfig=function(){le=null,Lt=!1},n.isValidAttribute=function(t,e,n){le||he({});const i=se(t),r=se(e);return xe(i,r,n)},n.addHook=function(t,e){"function"==typeof e&&m(ct[t],e)},n.removeHook=function(t,e){if(void 0!==e){const n=f(ct[t],e);return-1===n?void 0:v(ct[t],n,1)[0]}return g(ct[t])},n.removeHooks=function(t){ct[t]=[]},n.removeAllHooks=function(){ct={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}()},75609:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var i=n(61299),r=n(27493),o=n(69095);async function a(t,e,n){if(t instanceof Uint8Array&&(t=o.D0.decode(t)),"string"!=typeof t)throw new r.Ye("Compact JWS must be a string or Uint8Array");const{0:a,1:s,2:l,length:c}=t.split(".");if(3!==c)throw new r.Ye("Invalid Compact JWS");const u=await(0,i.Z)({payload:s,protected:a,signature:l},e,n),h={payload:u.payload,protectedHeader:u.protectedHeader};return"function"==typeof e?{...h,key:u.key}:h}},61299:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var i=n(31436),r=n(78655),o=n(27493),a=n(69095),s=n(29874),l=n(30149),c=n(88858),u=n(82168),h=n(24618),d=n(75500),p=n(78278);async function f(t,e,n){if(!(0,l.A)(t))throw new o.Ye("Flattened JWS must be an object");if(void 0===t.protected&&void 0===t.header)throw new o.Ye('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==t.protected&&"string"!=typeof t.protected)throw new o.Ye("JWS Protected Header incorrect type");if(void 0===t.payload)throw new o.Ye("JWS Payload missing");if("string"!=typeof t.signature)throw new o.Ye("JWS Signature missing or incorrect type");if(void 0!==t.header&&!(0,l.A)(t.header))throw new o.Ye("JWS Unprotected Header incorrect type");let f={};if(t.protected)try{const e=(0,i.D4)(t.protected);f=JSON.parse(a.D0.decode(e))}catch{throw new o.Ye("JWS Protected Header is invalid")}if(!(0,s.A)(f,t.header))throw new o.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const g={...f,...t.header};let m=!0;if((0,u.A)(o.Ye,new Map([["b64",!0]]),n?.crit,f,g).has("b64")&&(m=f.b64,"boolean"!=typeof m))throw new o.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:v}=g;if("string"!=typeof v||!v)throw new o.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');const y=n&&(0,h.A)("algorithms",n.algorithms);if(y&&!y.has(v))throw new o.Rb('"alg" (Algorithm) Header Parameter value not allowed');if(m){if("string"!=typeof t.payload)throw new o.Ye("JWS Payload must be a string")}else if("string"!=typeof t.payload&&!(t.payload instanceof Uint8Array))throw new o.Ye("JWS Payload must be a string or an Uint8Array instance");let b=!1;"function"==typeof e?(e=await e(f,t),b=!0,(0,c.I)(v,e,"verify"),(0,d.ll)(e)&&(e=await(0,p.Og)(e,v))):(0,c.I)(v,e,"verify");const w=(0,a.xW)(a.Rd.encode(t.protected??""),a.Rd.encode("."),"string"==typeof t.payload?a.Rd.encode(t.payload):t.payload);let S,x;try{S=(0,i.D4)(t.signature)}catch{throw new o.Ye("Failed to base64url decode the signature")}if(!await(0,r.A)(v,e,S,w))throw new o.h2;if(m)try{x=(0,i.D4)(t.payload)}catch{throw new o.Ye("Failed to base64url decode the payload")}else x="string"==typeof t.payload?a.Rd.encode(t.payload):t.payload;const k={payload:x};return void 0!==t.protected&&(k.protectedHeader=f),void 0!==t.header&&(k.unprotectedHeader=t.header),b?{...k,key:e}:k}},9380:(t,e,n)=>{"use strict";n.d(e,{V:()=>a});var i=n(75609),r=n(39803),o=n(27493);async function a(t,e,n){const a=await(0,i.B)(t,e,n);if(a.protectedHeader.crit?.includes("b64")&&!1===a.protectedHeader.b64)throw new o.Dp("JWTs MUST NOT use unencoded payload");const s={payload:(0,r.A)(a.protectedHeader,a.payload,n),protectedHeader:a.protectedHeader};return"function"==typeof e?{...s,key:a.key}:s}},78278:(t,e,n)=>{"use strict";n.d(e,{Og:()=>c,jU:()=>l});var i=n(31436),r=n(42827),o=n(71542),a=n(27493),s=n(30149);async function l(t,e,n){if("string"!=typeof t||0!==t.indexOf("-----BEGIN PUBLIC KEY-----"))throw new TypeError('"spki" must be SPKI formatted string');return(0,r.sc)(t,e,n)}async function c(t,e){if(!(0,s.A)(t))throw new TypeError("JWK must be an object");switch(e||(e=t.alg),t.kty){case"oct":if("string"!=typeof t.k||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return(0,i.D4)(t.k);case"RSA":if("oth"in t&&void 0!==t.oth)throw new a.T0('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,o.A)({...t,alg:e});default:throw new a.T0('Unsupported "kty" (Key Type) Parameter value')}}},69095:(t,e,n)=>{"use strict";n.d(e,{D0:()=>r,Rd:()=>i,xW:()=>o});const i=new TextEncoder,r=new TextDecoder;function o(...t){const e=t.reduce(((t,{length:e})=>t+e),0),n=new Uint8Array(e);let i=0;for(const e of t)n.set(e,i),i+=e.length;return n}},88858:(t,e,n)=>{"use strict";n.d(e,{I:()=>c});var i=n(21575),r=n(25994),o=n(75500);const a=t=>t?.[Symbol.toStringTag],s=(t,e,n)=>{if(void 0!==e.use&&"sig"!==e.use)throw new TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==e.key_ops&&!0!==e.key_ops.includes?.(n))throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${n}`);if(void 0!==e.alg&&e.alg!==t)throw new TypeError(`Invalid key for this operation, when present its alg must be ${t}`);return!0};function l(t,e,n,l){e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?((t,e,n,l)=>{if(!(e instanceof Uint8Array)){if(l&&o.ll(e)){if(o.t9(e)&&s(t,e,n))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!(0,r.A)(e))throw new TypeError((0,i.t)(t,e,...r.g,"Uint8Array",l?"JSON Web Key":null));if("secret"!==e.type)throw new TypeError(`${a(e)} instances for symmetric algorithms must be of type "secret"`)}})(e,n,l,t):((t,e,n,l)=>{if(l&&o.ll(e))switch(n){case"sign":if(o.W2(e)&&s(t,e,n))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(o.M3(e)&&s(t,e,n))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!(0,r.A)(e))throw new TypeError((0,i.t)(t,e,...r.g,l?"JSON Web Key":null));if("secret"===e.type)throw new TypeError(`${a(e)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===n&&"public"===e.type)throw new TypeError(`${a(e)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===n&&"public"===e.type)throw new TypeError(`${a(e)} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&"verify"===n&&"private"===e.type)throw new TypeError(`${a(e)} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&"encrypt"===n&&"private"===e.type)throw new TypeError(`${a(e)} instances for asymmetric algorithm encryption must be of type "public"`)})(e,n,l,t)}l.bind(void 0,!1);const c=l.bind(void 0,!0)},52698:(t,e,n)=>{"use strict";function i(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function r(t,e){return t.name===e}function o(t){return parseInt(t.name.slice(4),10)}function a(t,e,...n){switch(e){case"HS256":case"HS384":case"HS512":{if(!r(t.algorithm,"HMAC"))throw i("HMAC");const n=parseInt(e.slice(2),10);if(o(t.algorithm.hash)!==n)throw i(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!r(t.algorithm,"RSASSA-PKCS1-v1_5"))throw i("RSASSA-PKCS1-v1_5");const n=parseInt(e.slice(2),10);if(o(t.algorithm.hash)!==n)throw i(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!r(t.algorithm,"RSA-PSS"))throw i("RSA-PSS");const n=parseInt(e.slice(2),10);if(o(t.algorithm.hash)!==n)throw i(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==t.algorithm.name&&"Ed448"!==t.algorithm.name)throw i("Ed25519 or Ed448");break;case"Ed25519":if(!r(t.algorithm,"Ed25519"))throw i("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!r(t.algorithm,"ECDSA"))throw i("ECDSA");const n=function(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(e);if(t.algorithm.namedCurve!==n)throw i(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}!function(t,e){if(e.length&&!e.some((e=>t.usages.includes(e)))){let t="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const n=e.pop();t+=`one of ${e.join(", ")}, or ${n}.`}else 2===e.length?t+=`one of ${e[0]} or ${e[1]}.`:t+=`${e[0]}.`;throw new TypeError(t)}}(t,n)}n.d(e,{Y:()=>a})},22222:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=t=>Math.floor(t.getTime()/1e3)},21575:(t,e,n)=>{"use strict";function i(t,e,...n){if((n=n.filter(Boolean)).length>2){const e=n.pop();t+=`one of type ${n.join(", ")}, or ${e}.`}else 2===n.length?t+=`one of type ${n[0]} or ${n[1]}.`:t+=`of type ${n[0]}.`;return null==e?t+=` Received ${e}`:"function"==typeof e&&e.name?t+=` Received function ${e.name}`:"object"==typeof e&&null!=e&&e.constructor?.name&&(t+=` Received an instance of ${e.constructor.name}`),t}n.d(e,{A:()=>r,t:()=>o});const r=(t,...e)=>i("Key must be ",t,...e);function o(t,e,...n){return i(`Key for the ${t} algorithm must be `,e,...n)}},29874:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=(...t)=>{const e=t.filter(Boolean);if(0===e.length||1===e.length)return!0;let n;for(const t of e){const e=Object.keys(t);if(n&&0!==n.size)for(const t of e){if(n.has(t))return!1;n.add(t)}else n=new Set(e)}return!0}},75500:(t,e,n)=>{"use strict";n.d(e,{M3:()=>a,W2:()=>o,ll:()=>r,t9:()=>s});var i=n(30149);function r(t){return(0,i.A)(t)&&"string"==typeof t.kty}function o(t){return"oct"!==t.kty&&"string"==typeof t.d}function a(t){return"oct"!==t.kty&&void 0===t.d}function s(t){return r(t)&&"oct"===t.kty&&"string"==typeof t.k}},30149:(t,e,n)=>{"use strict";function i(t){if("object"!=typeof(e=t)||null===e||"[object Object]"!==Object.prototype.toString.call(t))return!1;var e;if(null===Object.getPrototypeOf(t))return!0;let n=t;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}n.d(e,{A:()=>i})},39803:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var i=n(27493),r=n(69095),o=n(22222),a=n(16957),s=n(30149);const l=t=>t.toLowerCase().replace(/^application\//,""),c=(t,e,n={})=>{let c;try{c=JSON.parse(r.D0.decode(e))}catch{}if(!(0,s.A)(c))throw new i.Dp("JWT Claims Set must be a top-level JSON object");const{typ:u}=n;if(u&&("string"!=typeof t.typ||l(t.typ)!==l(u)))throw new i.ie('unexpected "typ" JWT header value',c,"typ","check_failed");const{requiredClaims:h=[],issuer:d,subject:p,audience:f,maxTokenAge:g}=n,m=[...h];void 0!==g&&m.push("iat"),void 0!==f&&m.push("aud"),void 0!==p&&m.push("sub"),void 0!==d&&m.push("iss");for(const t of new Set(m.reverse()))if(!(t in c))throw new i.ie(`missing required "${t}" claim`,c,t,"missing");if(d&&!(Array.isArray(d)?d:[d]).includes(c.iss))throw new i.ie('unexpected "iss" claim value',c,"iss","check_failed");if(p&&c.sub!==p)throw new i.ie('unexpected "sub" claim value',c,"sub","check_failed");if(f&&(y="string"==typeof f?[f]:f,!("string"==typeof(v=c.aud)?y.includes(v):Array.isArray(v)&&y.some(Set.prototype.has.bind(new Set(v))))))throw new i.ie('unexpected "aud" claim value',c,"aud","check_failed");var v,y;let b;switch(typeof n.clockTolerance){case"string":b=(0,a.A)(n.clockTolerance);break;case"number":b=n.clockTolerance;break;case"undefined":b=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:w}=n,S=(0,o.A)(w||new Date);if((void 0!==c.iat||g)&&"number"!=typeof c.iat)throw new i.ie('"iat" claim must be a number',c,"iat","invalid");if(void 0!==c.nbf){if("number"!=typeof c.nbf)throw new i.ie('"nbf" claim must be a number',c,"nbf","invalid");if(c.nbf>S+b)throw new i.ie('"nbf" claim timestamp check failed',c,"nbf","check_failed")}if(void 0!==c.exp){if("number"!=typeof c.exp)throw new i.ie('"exp" claim must be a number',c,"exp","invalid");if(c.exp<=S-b)throw new i.n('"exp" claim timestamp check failed',c,"exp","check_failed")}if(g){const t=S-c.iat;if(t-b>("number"==typeof g?g:(0,a.A)(g)))throw new i.n('"iat" claim timestamp check failed (too far in the past)',c,"iat","check_failed");if(t<0-b)throw new i.ie('"iat" claim timestamp check failed (it should be in the past)',c,"iat","check_failed")}return c}},16957:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const i=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,r=t=>{const e=i.exec(t);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const n=parseFloat(e[2]);let r;switch(e[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":r=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":r=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":r=Math.round(3600*n);break;case"day":case"days":case"d":r=Math.round(86400*n);break;case"week":case"weeks":case"w":r=Math.round(604800*n);break;default:r=Math.round(31557600*n)}return"-"===e[1]||"ago"===e[4]?-r:r}},24618:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=(t,e)=>{if(void 0!==e&&(!Array.isArray(e)||e.some((t=>"string"!=typeof t))))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)}},82168:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(27493);const r=function(t,e,n,r,o){if(void 0!==o.crit&&void 0===r?.crit)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r.crit)return new Set;if(!Array.isArray(r.crit)||0===r.crit.length||r.crit.some((t=>"string"!=typeof t||0===t.length)))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;a=void 0!==n?new Map([...Object.entries(n),...e.entries()]):e;for(const e of r.crit){if(!a.has(e))throw new i.T0(`Extension Header Parameter "${e}" is not recognized`);if(void 0===o[e])throw new t(`Extension Header Parameter "${e}" is missing`);if(a.get(e)&&void 0===r[e])throw new t(`Extension Header Parameter "${e}" MUST be integrity protected`)}return new Set(r.crit)}},42827:(t,e,n)=>{"use strict";n.d(e,{sc:()=>s});var i=n(37991),r=n(27493);const o=(t,e,n=0)=>{0===n&&(e.unshift(e.length),e.unshift(6));const i=t.indexOf(e[0],n);if(-1===i)return!1;const r=t.subarray(i,i+e.length);return r.length===e.length&&(r.every(((t,n)=>t===e[n]))||o(t,e,i+1))},a=t=>{switch(!0){case o(t,[42,134,72,206,61,3,1,7]):return"P-256";case o(t,[43,129,4,0,34]):return"P-384";case o(t,[43,129,4,0,35]):return"P-521";case o(t,[43,101,110]):return"X25519";case o(t,[43,101,111]):return"X448";case o(t,[43,101,112]):return"Ed25519";case o(t,[43,101,113]):return"Ed448";default:throw new r.T0("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},s=(t,e,n)=>(async(t,e,n,o,s)=>{let l,c;const u=new Uint8Array(atob(n.replace(t,"")).split("").map((t=>t.charCodeAt(0)))),h="spki"===e;switch(o){case"PS256":case"PS384":case"PS512":l={name:"RSA-PSS",hash:`SHA-${o.slice(-3)}`},c=h?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":l={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${o.slice(-3)}`},c=h?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":l={name:"RSA-OAEP",hash:`SHA-${parseInt(o.slice(-3),10)||1}`},c=h?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":l={name:"ECDSA",namedCurve:"P-256"},c=h?["verify"]:["sign"];break;case"ES384":l={name:"ECDSA",namedCurve:"P-384"},c=h?["verify"]:["sign"];break;case"ES512":l={name:"ECDSA",namedCurve:"P-521"},c=h?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const t=a(u);l=t.startsWith("P-")?{name:"ECDH",namedCurve:t}:{name:t},c=h?[]:["deriveBits"];break}case"Ed25519":l={name:"Ed25519"},c=h?["verify"]:["sign"];break;case"EdDSA":l={name:a(u)},c=h?["verify"]:["sign"];break;default:throw new r.T0('Invalid or unsupported "alg" (Algorithm) value')}return i.A.subtle.importKey(e,u,l,s?.extractable??!1,c)})(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",t,e,n)},31436:(t,e,n)=>{"use strict";n.d(e,{D4:()=>r});var i=n(69095);const r=t=>{let e=t;e instanceof Uint8Array&&(e=i.D0.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(t=>{const e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n})(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}},4495:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=(t,e)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:n}=e.algorithm;if("number"!=typeof n||n<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}}},676:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(37991),r=n(52698),o=n(21575),a=n(25994),s=n(63139);async function l(t,e,n){if("sign"===n&&(e=await s.A.normalizePrivateKey(e,t)),"verify"===n&&(e=await s.A.normalizePublicKey(e,t)),(0,i.R)(e))return(0,r.Y)(e,t,n),e;if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError((0,o.A)(e,...a.g));return i.A.subtle.importKey("raw",e,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError((0,o.A)(e,...a.g,"Uint8Array","JSON Web Key"))}},25994:(t,e,n)=>{"use strict";n.d(e,{A:()=>r,g:()=>o});var i=n(37991);const r=t=>!!(0,i.R)(t)||"KeyObject"===t?.[Symbol.toStringTag],o=["CryptoKey"]},71542:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(37991),r=n(27493);const o=async t=>{if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:n}=function(t){let e,n;switch(t.kty){case"RSA":switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},n=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},n=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},n=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new r.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},n=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},n=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},n=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},n=t.d?["deriveBits"]:[];break;default:throw new r.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(t.alg){case"Ed25519":e={name:"Ed25519"},n=t.d?["sign"]:["verify"];break;case"EdDSA":e={name:t.crv},n=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:t.crv},n=t.d?["deriveBits"]:[];break;default:throw new r.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new r.T0('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:n}}(t),o=[e,t.ext??!1,t.key_ops??n],a={...t};return delete a.alg,delete a.use,i.A.subtle.importKey("jwk",a,...o)}},63139:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var i=n(75500),r=n(31436),o=n(71542);const a=t=>(0,r.D4)(t);let s,l;const c=t=>"KeyObject"===t?.[Symbol.toStringTag],u=async(t,e,n,i,r=!1)=>{let a=t.get(e);if(a?.[i])return a[i];const s=await(0,o.A)({...n,alg:i});return r&&Object.freeze(e),a?a[i]=s:t.set(e,{[i]:s}),s},h={normalizePublicKey:(t,e)=>{if(c(t)){let n=t.export({format:"jwk"});return delete n.d,delete n.dp,delete n.dq,delete n.p,delete n.q,delete n.qi,n.k?a(n.k):(l||(l=new WeakMap),u(l,t,n,e))}return(0,i.ll)(t)?t.k?(0,r.D4)(t.k):(l||(l=new WeakMap),u(l,t,t,e,!0)):t},normalizePrivateKey:(t,e)=>{if(c(t)){let n=t.export({format:"jwk"});return n.k?a(n.k):(s||(s=new WeakMap),u(s,t,n,e))}return(0,i.ll)(t)?t.k?(0,r.D4)(t.k):(s||(s=new WeakMap),u(s,t,t,e,!0)):t}}},81020:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(27493);function r(t,e){const n=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:t.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:e.name};default:throw new i.T0(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}},78655:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(81020),r=n(37991),o=n(4495),a=n(676);const s=async(t,e,n,s)=>{const l=await(0,a.A)(t,e,"verify");(0,o.A)(t,l);const c=(0,i.A)(t,l.algorithm);try{return await r.A.subtle.verify(c,l,n,s)}catch{return!1}}},37991:(t,e,n)=>{"use strict";n.d(e,{A:()=>i,R:()=>r});const i=crypto,r=t=>t instanceof CryptoKey},27493:(t,e,n)=>{"use strict";n.d(e,{Dp:()=>c,Rb:()=>a,T0:()=>s,Ye:()=>l,h2:()=>u,ie:()=>r,n:()=>o});class i extends Error{constructor(t,e){super(t,e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}i.code="ERR_JOSE_GENERIC";class r extends i{constructor(t,e,n="unspecified",i="unspecified"){super(t,{cause:{claim:n,reason:i,payload:e}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=i,this.payload=e}}r.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class o extends i{constructor(t,e,n="unspecified",i="unspecified"){super(t,{cause:{claim:n,reason:i,payload:e}}),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=i,this.payload=e}}o.code="ERR_JWT_EXPIRED";class a extends i{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}a.code="ERR_JOSE_ALG_NOT_ALLOWED";class s extends i{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}s.code="ERR_JOSE_NOT_SUPPORTED",class extends i{constructor(t="decryption operation failed",e){super(t,e),this.code="ERR_JWE_DECRYPTION_FAILED"}}.code="ERR_JWE_DECRYPTION_FAILED",class extends i{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}.code="ERR_JWE_INVALID";class l extends i{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}l.code="ERR_JWS_INVALID";class c extends i{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}c.code="ERR_JWT_INVALID",class extends i{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}.code="ERR_JWK_INVALID",class extends i{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}.code="ERR_JWKS_INVALID",class extends i{constructor(t="no applicable key found in the JSON Web Key Set",e){super(t,e),this.code="ERR_JWKS_NO_MATCHING_KEY"}}.code="ERR_JWKS_NO_MATCHING_KEY",Symbol.asyncIterator,class extends i{constructor(t="multiple matching keys found in the JSON Web Key Set",e){super(t,e),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",class extends i{constructor(t="request timed out",e){super(t,e),this.code="ERR_JWKS_TIMEOUT"}}.code="ERR_JWKS_TIMEOUT";class u extends i{constructor(t="signature verification failed",e){super(t,e),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}u.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"},87790:(t,e,n)=>{"use strict";function i(t){return null===t?"null":typeof t}function r(t){return!!t&&"object"==typeof t}function o(t){if(void 0===t)return"";if(null===t)return"Object";if("object"==typeof t&&!t.constructor)return"Object";var e=/function ([^(]*)/.exec(t.constructor.toString());return e&&e.length>1?e[1]:""}function a(t,e,n){return"null"===t||"undefined"===t?t:("string"!==t&&"stringifiable"!==t||(n='"'+n.replace(/"/g,'\\"')+'"'),"function"===t?e.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{…}":n)}function s(t){var e="";return r(t)?(e=o(t),Array.isArray(t)&&(e+="["+t.length+"]")):e=a(i(t),t,t),e}function l(t){return"json-formatter-".concat(t)}function c(t,e,n){var i=document.createElement(t);return e&&i.classList.add(l(e)),void 0!==n&&(n instanceof Node?i.appendChild(n):i.appendChild(document.createTextNode(String(n)))),i}n.d(e,{A:()=>m}),function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");e.setAttribute("media","screen"),e.innerHTML=t,document.head.appendChild(e)}}('.json-formatter-row {\n  font-family: monospace;\n}\n.json-formatter-row,\n.json-formatter-row a,\n.json-formatter-row a:hover {\n  color: black;\n  text-decoration: none;\n}\n.json-formatter-row .json-formatter-row {\n  margin-left: 1rem;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty {\n  opacity: 0.5;\n  margin-left: 1rem;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty:after {\n  display: none;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\n  content: "No properties";\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\n  content: "[]";\n}\n.json-formatter-row .json-formatter-string,\n.json-formatter-row .json-formatter-stringifiable {\n  color: green;\n  white-space: pre;\n  word-wrap: break-word;\n}\n.json-formatter-row .json-formatter-number {\n  color: blue;\n}\n.json-formatter-row .json-formatter-boolean {\n  color: red;\n}\n.json-formatter-row .json-formatter-null {\n  color: #855a00;\n}\n.json-formatter-row .json-formatter-undefined {\n  color: #ca0b69;\n}\n.json-formatter-row .json-formatter-function {\n  color: #FF20ED;\n}\n.json-formatter-row .json-formatter-date {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.json-formatter-row .json-formatter-url {\n  text-decoration: underline;\n  color: blue;\n  cursor: pointer;\n}\n.json-formatter-row .json-formatter-bracket {\n  color: blue;\n}\n.json-formatter-row .json-formatter-key {\n  color: #00008b;\n  padding-right: 0.2rem;\n}\n.json-formatter-row .json-formatter-toggler-link {\n  cursor: pointer;\n}\n.json-formatter-row .json-formatter-toggler {\n  line-height: 1.2rem;\n  font-size: 0.7rem;\n  vertical-align: middle;\n  opacity: 0.6;\n  cursor: pointer;\n  padding-right: 0.2rem;\n}\n.json-formatter-row .json-formatter-toggler:after {\n  display: inline-block;\n  transition: transform 100ms ease-in;\n  content: "►";\n}\n.json-formatter-row > a > .json-formatter-preview-text {\n  opacity: 0;\n  transition: opacity 0.15s ease-in;\n  font-style: italic;\n}\n.json-formatter-row:hover > a > .json-formatter-preview-text {\n  opacity: 0.6;\n}\n.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\n  transform: rotate(90deg);\n}\n.json-formatter-row.json-formatter-open > .json-formatter-children:after {\n  display: inline-block;\n}\n.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\n  display: none;\n}\n.json-formatter-row.json-formatter-open.json-formatter-empty:after {\n  display: block;\n}\n.json-formatter-dark.json-formatter-row {\n  font-family: monospace;\n}\n.json-formatter-dark.json-formatter-row,\n.json-formatter-dark.json-formatter-row a,\n.json-formatter-dark.json-formatter-row a:hover {\n  color: white;\n  text-decoration: none;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-row {\n  margin-left: 1rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty {\n  opacity: 0.5;\n  margin-left: 1rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty:after {\n  display: none;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\n  content: "No properties";\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\n  content: "[]";\n}\n.json-formatter-dark.json-formatter-row .json-formatter-string,\n.json-formatter-dark.json-formatter-row .json-formatter-stringifiable {\n  color: #31f031;\n  white-space: pre;\n  word-wrap: break-word;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-number {\n  color: #66c2ff;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-boolean {\n  color: #EC4242;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-null {\n  color: #EEC97D;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-undefined {\n  color: #ef8fbe;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-function {\n  color: #FD48CB;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-date {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n.json-formatter-dark.json-formatter-row .json-formatter-url {\n  text-decoration: underline;\n  color: #027bff;\n  cursor: pointer;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-bracket {\n  color: #9494ff;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-key {\n  color: #23a0db;\n  padding-right: 0.2rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler-link {\n  cursor: pointer;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler {\n  line-height: 1.2rem;\n  font-size: 0.7rem;\n  vertical-align: middle;\n  opacity: 0.6;\n  cursor: pointer;\n  padding-right: 0.2rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler:after {\n  display: inline-block;\n  transition: transform 100ms ease-in;\n  content: "►";\n}\n.json-formatter-dark.json-formatter-row > a > .json-formatter-preview-text {\n  opacity: 0;\n  transition: opacity 0.15s ease-in;\n  font-style: italic;\n}\n.json-formatter-dark.json-formatter-row:hover > a > .json-formatter-preview-text {\n  opacity: 0.6;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\n  transform: rotate(90deg);\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-children:after {\n  display: inline-block;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\n  display: none;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open.json-formatter-empty:after {\n  display: block;\n}\n');var u=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,h=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,d=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,p=/^https?:\/\//,f=window.requestAnimationFrame||function(t){return t(),0},g={hoverPreviewEnabled:!1,hoverPreviewArrayCount:100,hoverPreviewFieldCount:5,animateOpen:!0,animateClose:!0,theme:null,useToJSON:!0,sortPropertiesBy:null,maxArrayItems:100,exposePath:!1},m=function(){function t(t,e,n,i,r,o,a){void 0===e&&(e=1),void 0===n&&(n=g),void 0===o&&(o=[]),this.json=t,this.open=e,this.config=n,this.key=i,this.displayKey=r,this.path=o,this.arrayRange=a,this._isOpen=null,void 0===this.config.hoverPreviewEnabled&&(this.config.hoverPreviewEnabled=g.hoverPreviewEnabled),void 0===this.config.hoverPreviewArrayCount&&(this.config.hoverPreviewArrayCount=g.hoverPreviewArrayCount),void 0===this.config.hoverPreviewFieldCount&&(this.config.hoverPreviewFieldCount=g.hoverPreviewFieldCount),void 0===this.config.useToJSON&&(this.config.useToJSON=g.useToJSON),void 0===this.config.maxArrayItems&&(this.config.maxArrayItems=g.maxArrayItems),""===this.key&&(this.key='""'),void 0===this.displayKey&&(this.displayKey=this.key)}return Object.defineProperty(t.prototype,"isOpen",{get:function(){return null!==this._isOpen?this._isOpen:this.open>0},set:function(t){this._isOpen=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDate",{get:function(){return this.json instanceof Date||"string"===this.type&&(u.test(this.json)||d.test(this.json)||h.test(this.json))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUrl",{get:function(){return"string"===this.type&&p.test(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isArray",{get:function(){return Array.isArray(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLargeArray",{get:function(){return this.isArray&&this.json.length>this.config.maxArrayItems},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isArrayRange",{get:function(){return this.isArray&&void 0!==this.arrayRange&&2==this.arrayRange.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isObject",{get:function(){return r(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmptyObject",{get:function(){return!this.keys.length&&!this.isArray},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useToJSON",{get:function(){return this.config.useToJSON&&"stringifiable"===this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasKey",{get:function(){return void 0!==this.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"constructorName",{get:function(){return o(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.config.useToJSON&&this.json&&this.json.toJSON?"stringifiable":i(this.json)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){if(this.isObject){var t=Object.keys(this.json);if(this.isLargeArray){var e=Math.ceil(this.json.length/this.config.maxArrayItems);t=[];for(var n=0;n<e;n++){var i=n*this.config.maxArrayItems,r=Math.min(this.json.length-1,i+(this.config.maxArrayItems-1));t.push("".concat(i," … ").concat(r))}}return!this.isArray&&this.config.sortPropertiesBy?t.sort(this.config.sortPropertiesBy):t}return[]},enumerable:!1,configurable:!0}),t.prototype.toggleOpen=function(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(l("open")))},t.prototype.openAtDepth=function(t){void 0===t&&(t=1),t<0||(this.open=t,this.isOpen=0!==t,this.element&&(this.removeChildren(!1),0===t?this.element.classList.remove(l("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(l("open")))))},t.prototype.getInlinepreview=function(){var t=this;if(this.isArray)return this.json.length>this.config.hoverPreviewArrayCount?"Array[".concat(this.json.length,"]"):"[".concat(this.json.map(s).join(", "),"]");var e=this.keys,n=e.slice(0,this.config.hoverPreviewFieldCount).map((function(e){return"".concat(e,":").concat(s(t.json[e]))})),i=e.length>=this.config.hoverPreviewFieldCount?"…":"";return"{".concat(n.join(", ")).concat(i,"}")},t.prototype.render=function(){this.element=c("div","row");var t=this.isObject?c("a","toggler-link"):c("span");if(this.isObject&&!this.useToJSON&&t.appendChild(c("span","toggler")),this.isArrayRange?t.appendChild(c("span","range","[".concat(this.displayKey,"]"))):this.hasKey&&(t.appendChild(c("span","key","".concat(this.displayKey,":"))),this.config.exposePath&&(this.element.dataset.path=JSON.stringify(this.path))),this.isObject&&!this.useToJSON){var e=c("span","value"),n=c("span");if(!this.isArrayRange){var i=c("span","constructor-name",this.constructorName);n.appendChild(i)}if(this.isArray&&!this.isArrayRange){var r=c("span");r.appendChild(c("span","bracket","[")),r.appendChild(c("span","number",this.json.length)),r.appendChild(c("span","bracket","]")),n.appendChild(r)}e.appendChild(n),t.appendChild(e)}else{(e=this.isUrl?c("a"):c("span")).classList.add(l(this.type)),this.isDate&&e.classList.add(l("date")),this.isUrl&&(e.classList.add(l("url")),e.setAttribute("href",this.json));var o=a(this.type,this.json,this.useToJSON?this.json.toJSON():this.json);e.appendChild(document.createTextNode(o)),t.appendChild(e)}if(this.isObject&&this.config.hoverPreviewEnabled){var s=c("span","preview-text");s.appendChild(document.createTextNode(this.getInlinepreview())),t.appendChild(s)}var u=c("div","children");return this.isObject&&u.classList.add(l("object")),this.isArray&&u.classList.add(l("array")),this.isEmpty&&u.classList.add(l("empty")),this.config&&this.config.theme&&this.element.classList.add(l(this.config.theme)),this.isOpen&&this.element.classList.add(l("open")),this.element.appendChild(t),this.element.appendChild(u),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&!this.useToJSON&&t.addEventListener("click",this.toggleOpen.bind(this)),this.element},t.prototype.appendChildren=function(e){var n=this;void 0===e&&(e=!1);var i=this.element.querySelector("div.".concat(l("children")));if(i&&!this.isEmpty){var r=function(e,r){var o=n.isLargeArray?[r*n.config.maxArrayItems,Math.min(n.json.length-1,r*n.config.maxArrayItems+(n.config.maxArrayItems-1))]:void 0,a=n.isArrayRange?(n.arrayRange[0]+r).toString():e,s=new t(o?n.json.slice(o[0],o[1]+1):n.json[e],n.open-1,n.config,e,a,o?n.path:n.path.concat(a),o);i.appendChild(s.render())};if(e){var o=0,a=function(){var t=n.keys[o];r(t,o),(o+=1)<n.keys.length&&(o>10?a():f(a))};f(a)}else this.keys.forEach((function(t,e){return r(t,e)}))}},t.prototype.removeChildren=function(t){void 0===t&&(t=!1);var e=this.element.querySelector("div.".concat(l("children")));if(t){var n=0,i=function(){e&&e.children.length&&(e.removeChild(e.children[0]),(n+=1)>10?i():f(i))};f(i)}else e&&(e.innerHTML="")},t}()},3075:(t,e,n)=>{"use strict";function i(t){let e=t.length;for(;--e>=0;)t[e]=0}n.d(e,{Ay:()=>kn});const r=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new Array(576);i(l);const c=new Array(60);i(c);const u=new Array(512);i(u);const h=new Array(256);i(h);const d=new Array(29);i(d);const p=new Array(30);function f(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}let g,m,v;function y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}i(p);const b=t=>t<256?u[t]:u[256+(t>>>7)],w=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},S=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},x=(t,e,n)=>{S(t,n[2*e],n[2*e+1])},k=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},C=(t,e,n)=>{const i=new Array(16);let r,o,a=0;for(r=1;r<=15;r++)a=a+n[r-1]<<1,i[r]=a;for(o=0;o<=e;o++){let e=t[2*o+1];0!==e&&(t[2*o]=k(i[e]++,e))}},M=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},T=t=>{t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},E=(t,e,n,i)=>{const r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]},A=(t,e,n)=>{const i=t.heap[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&E(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!E(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i},_=(t,e,n)=>{let i,a,s,l,c=0;if(0!==t.sym_next)do{i=255&t.pending_buf[t.sym_buf+c++],i+=(255&t.pending_buf[t.sym_buf+c++])<<8,a=t.pending_buf[t.sym_buf+c++],0===i?x(t,a,e):(s=h[a],x(t,s+256+1,e),l=r[s],0!==l&&(a-=d[s],S(t,a,l)),i--,s=b(i),x(t,s,n),l=o[s],0!==l&&(i-=p[s],S(t,i,l)))}while(c<t.sym_next);x(t,256,e)},P=(t,e)=>{const n=e.dyn_tree,i=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.elems;let a,s,l,c=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<o;a++)0!==n[2*a]?(t.heap[++t.heap_len]=c=a,t.depth[a]=0):n[2*a+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,r&&(t.static_len-=i[2*l+1]);for(e.max_code=c,a=t.heap_len>>1;a>=1;a--)A(t,n,a);l=o;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,n,1),s=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=s,n[2*l]=n[2*a]+n[2*s],t.depth[l]=(t.depth[a]>=t.depth[s]?t.depth[a]:t.depth[s])+1,n[2*a+1]=n[2*s+1]=l,t.heap[1]=l++,A(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,i=e.max_code,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,u,h,d,p,f,g=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(n[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)u=t.heap[c],d=n[2*n[2*u+1]+1]+1,d>l&&(d=l,g++),n[2*u+1]=d,u>i||(t.bl_count[d]++,p=0,u>=s&&(p=a[u-s]),f=n[2*u],t.opt_len+=f*(d+p),o&&(t.static_len+=f*(r[2*u+1]+p)));if(0!==g){do{for(d=l-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(d=l;0!==d;d--)for(u=t.bl_count[d];0!==u;)h=t.heap[--c],h>i||(n[2*h+1]!==d&&(t.opt_len+=(d-n[2*h+1])*n[2*h],n[2*h+1]=d),u--)}})(t,e),C(n,c,t.bl_count)},D=(t,e,n)=>{let i,r,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++s<l&&r===a||(s<c?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))},O=(t,e,n)=>{let i,r,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++s<l&&r===a)){if(s<c)do{x(t,r,t.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(x(t,r,t.bl_tree),s--),x(t,16,t.bl_tree),S(t,s-3,2)):s<=10?(x(t,17,t.bl_tree),S(t,s-3,3)):(x(t,18,t.bl_tree),S(t,s-11,7));s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}};let L=!1;const I=(t,e,n,i)=>{S(t,0+(i?1:0),3),T(t),w(t,n),w(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};var R={_tr_init:t=>{L||((()=>{let t,e,n,i,s;const y=new Array(16);for(n=0,i=0;i<28;i++)for(d[i]=n,t=0;t<1<<r[i];t++)h[n++]=i;for(h[n-1]=i,s=0,i=0;i<16;i++)for(p[i]=s,t=0;t<1<<o[i];t++)u[s++]=i;for(s>>=7;i<30;i++)for(p[i]=s<<7,t=0;t<1<<o[i]-7;t++)u[256+s++]=i;for(e=0;e<=15;e++)y[e]=0;for(t=0;t<=143;)l[2*t+1]=8,t++,y[8]++;for(;t<=255;)l[2*t+1]=9,t++,y[9]++;for(;t<=279;)l[2*t+1]=7,t++,y[7]++;for(;t<=287;)l[2*t+1]=8,t++,y[8]++;for(C(l,287,y),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=k(t,5);g=new f(l,r,257,286,15),m=new f(c,o,0,30,15),v=new f(new Array(0),a,0,19,7)})(),L=!0),t.l_desc=new y(t.dyn_ltree,g),t.d_desc=new y(t.dyn_dtree,m),t.bl_desc=new y(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,M(t)},_tr_stored_block:I,_tr_flush_block:(t,e,n,i)=>{let r,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),P(t,t.l_desc),P(t,t.d_desc),a=(t=>{let e;for(D(t,t.dyn_ltree,t.l_desc.max_code),D(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*s[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?I(t,e,n,i):4===t.strategy||o===r?(S(t,2+(i?1:0),3),_(t,l,c)):(S(t,4+(i?1:0),3),((t,e,n,i)=>{let r;for(S(t,e-257,5),S(t,n-1,5),S(t,i-4,4),r=0;r<i;r++)S(t,t.bl_tree[2*s[r]+1],3);O(t,t.dyn_ltree,e-1),O(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),_(t,t.dyn_ltree,t.dyn_dtree)),M(t),i&&T(t)},_tr_tally:(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(h[n]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{S(t,2,3),x(t,256,l),(t=>{16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},V=(t,e,n,i)=>{let r=65535&t,o=t>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{r=r+e[i++]|0,o=o+r|0}while(--a);r%=65521,o%=65521}return r|o<<16};const N=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var F=(t,e,n,i)=>{const r=N,o=i+n;t^=-1;for(let n=i;n<o;n++)t=t>>>8^r[255&(t^e[n])];return~t},B={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},z={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:j,_tr_stored_block:U,_tr_flush_block:G,_tr_tally:$,_tr_align:H}=R,{Z_NO_FLUSH:q,Z_PARTIAL_FLUSH:W,Z_FULL_FLUSH:Z,Z_FINISH:Y,Z_BLOCK:K,Z_OK:X,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:tt,Z_BUF_ERROR:et,Z_DEFAULT_COMPRESSION:nt,Z_FILTERED:it,Z_HUFFMAN_ONLY:rt,Z_RLE:ot,Z_FIXED:at,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:lt,Z_DEFLATED:ct}=z,ut=258,ht=262,dt=42,pt=113,ft=666,gt=(t,e)=>(t.msg=B[e],e),mt=t=>2*t-(t>4?9:0),vt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},yt=t=>{let e,n,i,r=t.w_size;e=t.hash_size,i=e;do{n=t.head[--i],t.head[i]=n>=r?n-r:0}while(--e);e=r,i=e;do{n=t.prev[--i],t.prev[i]=n>=r?n-r:0}while(--e)};let bt=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const wt=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},St=(t,e)=>{G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,wt(t.strm)},xt=(t,e)=>{t.pending_buf[t.pending++]=e},kt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Ct=(t,e,n,i)=>{let r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),n),1===t.state.wrap?t.adler=V(t.adler,e,r,n):2===t.state.wrap&&(t.adler=F(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)},Mt=(t,e)=>{let n,i,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match;const l=t.strstart>t.w_size-ht?t.strstart-(t.w_size-ht):0,c=t.window,u=t.w_mask,h=t.prev,d=t.strstart+ut;let p=c[o+a-1],f=c[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,c[n+a]===f&&c[n+a-1]===p&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d);if(i=ut-(d-o),o=d-ut,i>a){if(t.match_start=e,a=i,i>=s)break;p=c[o+a-1],f=c[o+a]}}}while((e=h[e&u])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead},Tt=t=>{const e=t.w_size;let n,i,r;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ht)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),yt(t),i+=e),0===t.strm.avail_in)break;if(n=Ct(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=bt(t,t.ins_h,t.window[r+1]);t.insert&&(t.ins_h=bt(t,t.ins_h,t.window[r+3-1]),t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ht&&0!==t.strm.avail_in)},Et=(t,e)=>{let n,i,r,o=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,s=t.strm.avail_in;do{if(n=65535,r=t.bi_valid+42>>3,t.strm.avail_out<r)break;if(r=t.strm.avail_out-r,i=t.strstart-t.block_start,n>i+t.strm.avail_in&&(n=i+t.strm.avail_in),n>r&&(n=r),n<o&&(0===n&&e!==Y||e===q||n!==i+t.strm.avail_in))break;a=e===Y&&n===i+t.strm.avail_in?1:0,U(t,0,0,a),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,wt(t.strm),i&&(i>n&&(i=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,n-=i),n&&(Ct(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===a);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==q&&e!==Y&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(r=t.window_size-t.strstart,t.strm.avail_in>r&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,r+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),r>t.strm.avail_in&&(r=t.strm.avail_in),r&&(Ct(t.strm,t.window,t.strstart,r),t.strstart+=r,t.insert+=r>t.w_size-t.insert?t.w_size-t.insert:r),t.high_water<t.strstart&&(t.high_water=t.strstart),r=t.bi_valid+42>>3,r=t.pending_buf_size-r>65535?65535:t.pending_buf_size-r,o=r>t.w_size?t.w_size:r,i=t.strstart-t.block_start,(i>=o||(i||e===Y)&&e!==q&&0===t.strm.avail_in&&i<=r)&&(n=i>r?r:i,a=e===Y&&0===t.strm.avail_in&&n===i?1:0,U(t,t.block_start,n,a),t.block_start+=n,wt(t.strm)),a?3:1)},At=(t,e)=>{let n,i;for(;;){if(t.lookahead<ht){if(Tt(t),t.lookahead<ht&&e===q)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=bt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ht&&(t.match_length=Mt(t,n)),t.match_length>=3)if(i=$(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=bt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=bt(t,t.ins_h,t.window[t.strstart+1]);else i=$(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Y?(St(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(St(t,!1),0===t.strm.avail_out)?1:2},_t=(t,e)=>{let n,i,r;for(;;){if(t.lookahead<ht){if(Tt(t),t.lookahead<ht&&e===q)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=bt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ht&&(t.match_length=Mt(t,n),t.match_length<=5&&(t.strategy===it||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=$(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=bt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(St(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=$(t,0,t.window[t.strstart-1]),i&&St(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=$(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Y?(St(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(St(t,!1),0===t.strm.avail_out)?1:2};function Pt(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}const Dt=[new Pt(0,0,0,0,Et),new Pt(4,4,8,4,At),new Pt(4,5,16,8,At),new Pt(4,6,32,32,At),new Pt(4,4,16,16,_t),new Pt(8,16,32,32,_t),new Pt(8,16,128,128,_t),new Pt(8,32,128,256,_t),new Pt(32,128,258,1024,_t),new Pt(32,258,258,4096,_t)];function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ct,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),vt(this.dyn_ltree),vt(this.dyn_dtree),vt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),vt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),vt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Lt=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==dt&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==pt&&e.status!==ft?1:0},It=t=>{if(Lt(t))return gt(t,Q);t.total_in=t.total_out=0,t.data_type=lt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?dt:pt,t.adler=2===e.wrap?0:1,e.last_flush=-2,j(e),X},Rt=t=>{const e=It(t);var n;return e===X&&((n=t.state).window_size=2*n.w_size,vt(n.head),n.max_lazy_match=Dt[n.level].max_lazy,n.good_match=Dt[n.level].good_length,n.nice_match=Dt[n.level].nice_length,n.max_chain_length=Dt[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},Vt=(t,e,n,i,r,o)=>{if(!t)return Q;let a=1;if(e===nt&&(e=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),r<1||r>9||n!==ct||i<8||i>15||e<0||e>9||o<0||o>at||8===i&&1!==a)return gt(t,Q);8===i&&(i=9);const s=new Ot;return t.state=s,s.strm=t,s.status=dt,s.wrap=a,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=e,s.strategy=o,s.method=n,Rt(t)};var Nt=Vt,Ft=(t,e)=>Lt(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,X),Bt=(t,e)=>{if(Lt(t)||e>K||e<0)return t?gt(t,Q):Q;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===ft&&e!==Y)return gt(t,0===t.avail_out?et:Q);const i=n.last_flush;if(n.last_flush=e,0!==n.pending){if(wt(t),0===t.avail_out)return n.last_flush=-1,X}else if(0===t.avail_in&&mt(e)<=mt(i)&&e!==Y)return gt(t,et);if(n.status===ft&&0!==t.avail_in)return gt(t,et);if(n.status===dt&&0===n.wrap&&(n.status=pt),n.status===dt){let e=ct+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=rt||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=i<<6,0!==n.strstart&&(e|=32),e+=31-e%31,kt(n,e),0!==n.strstart&&(kt(n,t.adler>>>16),kt(n,65535&t.adler)),t.adler=1,n.status=pt,wt(t),0!==n.pending)return n.last_flush=-1,X}if(57===n.status)if(t.adler=0,xt(n,31),xt(n,139),xt(n,8),n.gzhead)xt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),xt(n,255&n.gzhead.time),xt(n,n.gzhead.time>>8&255),xt(n,n.gzhead.time>>16&255),xt(n,n.gzhead.time>>24&255),xt(n,9===n.level?2:n.strategy>=rt||n.level<2?4:0),xt(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(xt(n,255&n.gzhead.extra.length),xt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=F(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(xt(n,0),xt(n,0),xt(n,0),xt(n,0),xt(n,0),xt(n,9===n.level?2:n.strategy>=rt||n.level<2?4:0),xt(n,3),n.status=pt,wt(t),0!==n.pending)return n.last_flush=-1,X;if(69===n.status){if(n.gzhead.extra){let e=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=F(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=r,wt(t),0!==n.pending)return n.last_flush=-1,X;e=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>e&&(t.adler=F(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=F(t.adler,n.pending_buf,n.pending-i,i)),wt(t),0!==n.pending)return n.last_flush=-1,X;i=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,xt(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>i&&(t.adler=F(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=F(t.adler,n.pending_buf,n.pending-i,i)),wt(t),0!==n.pending)return n.last_flush=-1,X;i=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,xt(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>i&&(t.adler=F(t.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(wt(t),0!==n.pending))return n.last_flush=-1,X;xt(n,255&t.adler),xt(n,t.adler>>8&255),t.adler=0}if(n.status=pt,wt(t),0!==n.pending)return n.last_flush=-1,X}if(0!==t.avail_in||0!==n.lookahead||e!==q&&n.status!==ft){let i=0===n.level?Et(n,e):n.strategy===rt?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(Tt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,n=$(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Y?(St(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(St(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===ot?((t,e)=>{let n,i,r,o;const a=t.window;for(;;){if(t.lookahead<=ut){if(Tt(t),t.lookahead<=ut&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,i=a[r],i===a[++r]&&i===a[++r]&&i===a[++r])){o=t.strstart+ut;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);t.match_length=ut-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=$(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=$(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Y?(St(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(St(t,!1),0===t.strm.avail_out)?1:2})(n,e):Dt[n.level].func(n,e);if(3!==i&&4!==i||(n.status=ft),1===i||3===i)return 0===t.avail_out&&(n.last_flush=-1),X;if(2===i&&(e===W?H(n):e!==K&&(U(n,0,0,!1),e===Z&&(vt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),wt(t),0===t.avail_out))return n.last_flush=-1,X}return e!==Y?X:n.wrap<=0?J:(2===n.wrap?(xt(n,255&t.adler),xt(n,t.adler>>8&255),xt(n,t.adler>>16&255),xt(n,t.adler>>24&255),xt(n,255&t.total_in),xt(n,t.total_in>>8&255),xt(n,t.total_in>>16&255),xt(n,t.total_in>>24&255)):(kt(n,t.adler>>>16),kt(n,65535&t.adler)),wt(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?X:J)},zt=t=>{if(Lt(t))return Q;const e=t.state.status;return t.state=null,e===pt?gt(t,tt):X},jt=(t,e)=>{let n=e.length;if(Lt(t))return Q;const i=t.state,r=i.wrap;if(2===r||1===r&&i.status!==dt||i.lookahead)return Q;if(1===r&&(t.adler=V(t.adler,e,n,0)),i.wrap=0,n>=i.w_size){0===r&&(vt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(n-i.w_size,n),0),e=t,n=i.w_size}const o=t.avail_in,a=t.next_in,s=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Tt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=bt(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,Tt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=a,t.input=s,t.avail_in=o,i.wrap=r,X};const Ut=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Gt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Ut(n,e)&&(t[e]=n[e])}}return t},$t=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,i=0,r=t.length;e<r;e++){let r=t[e];n.set(r,i),i+=r.length}return n};let Ht=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ht=!1}const qt=new Uint8Array(256);for(let t=0;t<256;t++)qt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;qt[254]=qt[254]=1;var Wt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,i,r,o,a=t.length,s=0;for(r=0;r<a;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<a&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),o=0,r=0;o<s;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<a&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},Zt=(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,r;const o=new Array(2*n);for(r=0,i=0;i<n;){let e=t[i++];if(e<128){o[r++]=e;continue}let a=qt[e];if(a>4)o[r++]=65533,i+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&i<n;)e=e<<6|63&t[i++],a--;a>1?o[r++]=65533:e<65536?o[r++]=e:(e-=65536,o[r++]=55296|e>>10&1023,o[r++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ht)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n})(o,r)},Yt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+qt[t[n]]>e?n:e},Kt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Xt=Object.prototype.toString,{Z_NO_FLUSH:Jt,Z_SYNC_FLUSH:Qt,Z_FULL_FLUSH:te,Z_FINISH:ee,Z_OK:ne,Z_STREAM_END:ie,Z_DEFAULT_COMPRESSION:re,Z_DEFAULT_STRATEGY:oe,Z_DEFLATED:ae}=z;function se(t){this.options=Gt({level:re,method:ae,chunkSize:16384,windowBits:15,memLevel:8,strategy:oe},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kt,this.strm.avail_out=0;let n=Nt(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==ne)throw new Error(B[n]);if(e.header&&Ft(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Wt(e.dictionary):"[object ArrayBuffer]"===Xt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=jt(this.strm,t),n!==ne)throw new Error(B[n]);this._dict_set=!0}}function le(t,e){const n=new se(e);if(n.push(t,!0),n.err)throw n.msg||B[n.err];return n.result}se.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?ee:Jt,"string"==typeof t?n.input=Wt(t):"[object ArrayBuffer]"===Xt.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(o===Qt||o===te)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Bt(n,o),r===ie)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=zt(this.strm),this.onEnd(r),this.ended=!0,r===ne;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},se.prototype.onData=function(t){this.chunks.push(t)},se.prototype.onEnd=function(t){t===ne&&(this.result=$t(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ce={Deflate:se,deflate:le,deflateRaw:function(t,e){return(e=e||{}).raw=!0,le(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,le(t,e)},constants:z};const ue=16209;var he=function(t,e){let n,i,r,o,a,s,l,c,u,h,d,p,f,g,m,v,y,b,w,S,x,k,C,M;const T=t.state;n=t.next_in,C=t.input,i=n+(t.avail_in-5),r=t.next_out,M=t.output,o=r-(e-t.avail_out),a=r+(t.avail_out-257),s=T.dmax,l=T.wsize,c=T.whave,u=T.wnext,h=T.window,d=T.hold,p=T.bits,f=T.lencode,g=T.distcode,m=(1<<T.lenbits)-1,v=(1<<T.distbits)-1;t:do{p<15&&(d+=C[n++]<<p,p+=8,d+=C[n++]<<p,p+=8),y=f[d&m];e:for(;;){if(b=y>>>24,d>>>=b,p-=b,b=y>>>16&255,0===b)M[r++]=65535&y;else{if(!(16&b)){if(64&b){if(32&b){T.mode=16191;break t}t.msg="invalid literal/length code",T.mode=ue;break t}y=f[(65535&y)+(d&(1<<b)-1)];continue e}for(w=65535&y,b&=15,b&&(p<b&&(d+=C[n++]<<p,p+=8),w+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=C[n++]<<p,p+=8,d+=C[n++]<<p,p+=8),y=g[d&v];;){if(b=y>>>24,d>>>=b,p-=b,b=y>>>16&255,16&b){if(S=65535&y,b&=15,p<b&&(d+=C[n++]<<p,p+=8,p<b&&(d+=C[n++]<<p,p+=8)),S+=d&(1<<b)-1,S>s){t.msg="invalid distance too far back",T.mode=ue;break t}if(d>>>=b,p-=b,b=r-o,S>b){if(b=S-b,b>c&&T.sane){t.msg="invalid distance too far back",T.mode=ue;break t}if(x=0,k=h,0===u){if(x+=l-b,b<w){w-=b;do{M[r++]=h[x++]}while(--b);x=r-S,k=M}}else if(u<b){if(x+=l+u-b,b-=u,b<w){w-=b;do{M[r++]=h[x++]}while(--b);if(x=0,u<w){b=u,w-=b;do{M[r++]=h[x++]}while(--b);x=r-S,k=M}}}else if(x+=u-b,b<w){w-=b;do{M[r++]=h[x++]}while(--b);x=r-S,k=M}for(;w>2;)M[r++]=k[x++],M[r++]=k[x++],M[r++]=k[x++],w-=3;w&&(M[r++]=k[x++],w>1&&(M[r++]=k[x++]))}else{x=r-S;do{M[r++]=M[x++],M[r++]=M[x++],M[r++]=M[x++],w-=3}while(w>2);w&&(M[r++]=M[x++],w>1&&(M[r++]=M[x++]))}break}if(64&b){t.msg="invalid distance code",T.mode=ue;break t}y=g[(65535&y)+(d&(1<<b)-1)]}}break}}while(n<i&&r<a);w=p>>3,n-=w,p-=w<<3,d&=(1<<p)-1,t.next_in=n,t.next_out=r,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=r<a?a-r+257:257-(r-a),T.hold=d,T.bits=p};const de=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),pe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ge=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var me=(t,e,n,i,r,o,a,s)=>{const l=s.bits;let c,u,h,d,p,f,g=0,m=0,v=0,y=0,b=0,w=0,S=0,x=0,k=0,C=0,M=null;const T=new Uint16Array(16),E=new Uint16Array(16);let A,_,P,D=null;for(g=0;g<=15;g++)T[g]=0;for(m=0;m<i;m++)T[e[n+m]]++;for(b=l,y=15;y>=1&&0===T[y];y--);if(b>y&&(b=y),0===y)return r[o++]=20971520,r[o++]=20971520,s.bits=1,0;for(v=1;v<y&&0===T[v];v++);for(b<v&&(b=v),x=1,g=1;g<=15;g++)if(x<<=1,x-=T[g],x<0)return-1;if(x>0&&(0===t||1!==y))return-1;for(E[1]=0,g=1;g<15;g++)E[g+1]=E[g]+T[g];for(m=0;m<i;m++)0!==e[n+m]&&(a[E[e[n+m]]++]=m);if(0===t?(M=D=a,f=20):1===t?(M=de,D=pe,f=257):(M=fe,D=ge,f=0),C=0,m=0,g=v,p=o,w=b,S=0,h=-1,k=1<<b,d=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){A=g-S,a[m]+1<f?(_=0,P=a[m]):a[m]>=f?(_=D[a[m]-f],P=M[a[m]-f]):(_=96,P=0),c=1<<g-S,u=1<<w,v=u;do{u-=c,r[p+(C>>S)+u]=A<<24|_<<16|P}while(0!==u);for(c=1<<g-1;C&c;)c>>=1;if(0!==c?(C&=c-1,C+=c):C=0,m++,0==--T[g]){if(g===y)break;g=e[n+a[m]]}if(g>b&&(C&d)!==h){for(0===S&&(S=b),p+=v,w=g-S,x=1<<w;w+S<y&&(x-=T[w+S],!(x<=0));)w++,x<<=1;if(k+=1<<w,1===t&&k>852||2===t&&k>592)return 1;h=C&d,r[h]=b<<24|w<<16|p-o}}return 0!==C&&(r[p+C]=g-S<<24|64<<16),s.bits=b,0};const{Z_FINISH:ve,Z_BLOCK:ye,Z_TREES:be,Z_OK:we,Z_STREAM_END:Se,Z_NEED_DICT:xe,Z_STREAM_ERROR:ke,Z_DATA_ERROR:Ce,Z_MEM_ERROR:Me,Z_BUF_ERROR:Te,Z_DEFLATED:Ee}=z,Ae=16180,_e=16190,Pe=16191,De=16192,Oe=16194,Le=16199,Ie=16200,Re=16206,Ve=16209,Ne=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Fe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Be=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ae||e.mode>16211?1:0},ze=t=>{if(Be(t))return ke;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Ae,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,we},je=t=>{if(Be(t))return ke;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ze(t)},Ue=(t,e)=>{let n;if(Be(t))return ke;const i=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ke:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,je(t))},Ge=(t,e)=>{if(!t)return ke;const n=new Fe;t.state=n,n.strm=t,n.window=null,n.mode=Ae;const i=Ue(t,e);return i!==we&&(t.state=null),i};let $e,He,qe=!0;const We=t=>{if(qe){$e=new Int32Array(512),He=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(me(1,t.lens,0,288,$e,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;me(2,t.lens,0,32,He,0,t.work,{bits:5}),qe=!1}t.lencode=$e,t.lenbits=9,t.distcode=He,t.distbits=5},Ze=(t,e,n,i)=>{let r;const o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(e.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(e.subarray(n-i,n-i+r),o.wnext),(i-=r)?(o.window.set(e.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var Ye=je,Ke=Ge,Xe=(t,e)=>{let n,i,r,o,a,s,l,c,u,h,d,p,f,g,m,v,y,b,w,S,x,k,C=0;const M=new Uint8Array(4);let T,E;const A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Be(t)||!t.output||!t.input&&0!==t.avail_in)return ke;n=t.state,n.mode===Pe&&(n.mode=De),a=t.next_out,r=t.output,l=t.avail_out,o=t.next_in,i=t.input,s=t.avail_in,c=n.hold,u=n.bits,h=s,d=l,k=we;t:for(;;)switch(n.mode){case Ae:if(0===n.wrap){n.mode=De;break}for(;u<16;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,M[0]=255&c,M[1]=c>>>8&255,n.check=F(n.check,M,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Ve;break}if((15&c)!==Ee){t.msg="unknown compression method",n.mode=Ve;break}if(c>>>=4,u-=4,x=8+(15&c),0===n.wbits&&(n.wbits=x),x>15||x>n.wbits){t.msg="invalid window size",n.mode=Ve;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&c?16189:Pe,c=0,u=0;break;case 16181:for(;u<16;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==Ee){t.msg="unknown compression method",n.mode=Ve;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Ve;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(M[0]=255&c,M[1]=c>>>8&255,n.check=F(n.check,M,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(M[0]=255&c,M[1]=c>>>8&255,M[2]=c>>>16&255,M[3]=c>>>24&255,n.check=F(n.check,M,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(M[0]=255&c,M[1]=c>>>8&255,n.check=F(n.check,M,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(M[0]=255&c,M[1]=c>>>8&255,n.check=F(n.check,M,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>s&&(p=s),p&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(o,o+p),x)),512&n.flags&&4&n.wrap&&(n.check=F(n.check,i,p,o)),s-=p,o+=p,n.length-=p),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break t;p=0;do{x=i[o+p++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&p<s);if(512&n.flags&&4&n.wrap&&(n.check=F(n.check,i,p,o)),s-=p,o+=p,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break t;p=0;do{x=i[o+p++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&p<s);if(512&n.flags&&4&n.wrap&&(n.check=F(n.check,i,p,o)),s-=p,o+=p,x)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Ve;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Pe;break;case 16189:for(;u<32;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}t.adler=n.check=Ne(c),c=0,u=0,n.mode=_e;case _e:if(0===n.havedict)return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=c,n.bits=u,xe;t.adler=n.check=1,n.mode=Pe;case Pe:if(e===ye||e===be)break t;case De:if(n.last){c>>>=7&u,u-=7&u,n.mode=Re;break}for(;u<3;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(We(n),n.mode=Le,e===be){c>>>=2,u-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=Ve}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Ve;break}if(n.length=65535&c,c=0,u=0,n.mode=Oe,e===be)break t;case Oe:n.mode=16195;case 16195:if(p=n.length,p){if(p>s&&(p=s),p>l&&(p=l),0===p)break t;r.set(i.subarray(o,o+p),a),s-=p,o+=p,l-=p,a+=p,n.length-=p;break}n.mode=Pe;break;case 16196:for(;u<14;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Ve;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}n.lens[A[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},k=me(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,k){t.msg="invalid code lengths set",n.mode=Ve;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[c&(1<<n.lenbits)-1],m=C>>>24,v=C>>>16&255,y=65535&C,!(m<=u);){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(y<16)c>>>=m,u-=m,n.lens[n.have++]=y;else{if(16===y){for(E=m+2;u<E;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(c>>>=m,u-=m,0===n.have){t.msg="invalid bit length repeat",n.mode=Ve;break}x=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===y){for(E=m+3;u<E;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}c>>>=m,u-=m,x=0,p=3+(7&c),c>>>=3,u-=3}else{for(E=m+7;u<E;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}c>>>=m,u-=m,x=0,p=11+(127&c),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Ve;break}for(;p--;)n.lens[n.have++]=x}}if(n.mode===Ve)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Ve;break}if(n.lenbits=9,T={bits:n.lenbits},k=me(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,k){t.msg="invalid literal/lengths set",n.mode=Ve;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},k=me(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,k){t.msg="invalid distances set",n.mode=Ve;break}if(n.mode=Le,e===be)break t;case Le:n.mode=Ie;case Ie:if(s>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=c,n.bits=u,he(t,d),a=t.next_out,r=t.output,l=t.avail_out,o=t.next_in,i=t.input,s=t.avail_in,c=n.hold,u=n.bits,n.mode===Pe&&(n.back=-1);break}for(n.back=0;C=n.lencode[c&(1<<n.lenbits)-1],m=C>>>24,v=C>>>16&255,y=65535&C,!(m<=u);){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(v&&!(240&v)){for(b=m,w=v,S=y;C=n.lencode[S+((c&(1<<b+w)-1)>>b)],m=C>>>24,v=C>>>16&255,y=65535&C,!(b+m<=u);){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=m,u-=m,n.back+=m,n.length=y,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=Pe;break}if(64&v){t.msg="invalid literal/length code",n.mode=Ve;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(E=n.extra;u<E;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;C=n.distcode[c&(1<<n.distbits)-1],m=C>>>24,v=C>>>16&255,y=65535&C,!(m<=u);){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(!(240&v)){for(b=m,w=v,S=y;C=n.distcode[S+((c&(1<<b+w)-1)>>b)],m=C>>>24,v=C>>>16&255,y=65535&C,!(b+m<=u);){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=m,u-=m,n.back+=m,64&v){t.msg="invalid distance code",n.mode=Ve;break}n.offset=y,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(E=n.extra;u<E;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Ve;break}n.mode=16204;case 16204:if(0===l)break t;if(p=d-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Ve;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=r,f=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{r[a++]=g[f++]}while(--p);0===n.length&&(n.mode=Ie);break;case 16205:if(0===l)break t;r[a++]=n.length,l--,n.mode=Ie;break;case Re:if(n.wrap){for(;u<32;){if(0===s)break t;s--,c|=i[o++]<<u,u+=8}if(d-=l,t.total_out+=d,n.total+=d,4&n.wrap&&d&&(t.adler=n.check=n.flags?F(n.check,r,d,a-d):V(n.check,r,d,a-d)),d=l,4&n.wrap&&(n.flags?c:Ne(c))!==n.check){t.msg="incorrect data check",n.mode=Ve;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break t;s--,c+=i[o++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Ve;break}c=0,u=0}n.mode=16208;case 16208:k=Se;break t;case Ve:k=Ce;break t;case 16210:return Me;default:return ke}return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=c,n.bits=u,(n.wsize||d!==t.avail_out&&n.mode<Ve&&(n.mode<Re||e!==ve))&&Ze(t,t.output,t.next_out,d-t.avail_out),h-=t.avail_in,d-=t.avail_out,t.total_in+=h,t.total_out+=d,n.total+=d,4&n.wrap&&d&&(t.adler=n.check=n.flags?F(n.check,r,d,t.next_out-d):V(n.check,r,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Pe?128:0)+(n.mode===Le||n.mode===Oe?256:0),(0===h&&0===d||e===ve)&&k===we&&(k=Te),k},Je=t=>{if(Be(t))return ke;let e=t.state;return e.window&&(e.window=null),t.state=null,we},Qe=(t,e)=>{if(Be(t))return ke;const n=t.state;return 2&n.wrap?(n.head=e,e.done=!1,we):ke},tn=(t,e)=>{const n=e.length;let i,r,o;return Be(t)?ke:(i=t.state,0!==i.wrap&&i.mode!==_e?ke:i.mode===_e&&(r=1,r=V(r,e,n,0),r!==i.check)?Ce:(o=Ze(t,e,n,n),o?(i.mode=16210,Me):(i.havedict=1,we)))},en=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const nn=Object.prototype.toString,{Z_NO_FLUSH:rn,Z_FINISH:on,Z_OK:an,Z_STREAM_END:sn,Z_NEED_DICT:ln,Z_STREAM_ERROR:cn,Z_DATA_ERROR:un,Z_MEM_ERROR:hn}=z;function dn(t){this.options=Gt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kt,this.strm.avail_out=0;let n=Ke(this.strm,e.windowBits);if(n!==an)throw new Error(B[n]);if(this.header=new en,Qe(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Wt(e.dictionary):"[object ArrayBuffer]"===nn.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=tn(this.strm,e.dictionary),n!==an)))throw new Error(B[n])}function pn(t,e){const n=new dn(e);if(n.push(t),n.err)throw n.msg||B[n.err];return n.result}dn.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(a=e===~~e?e:!0===e?on:rn,"[object ArrayBuffer]"===nn.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),o=Xe(n,a),o===ln&&r&&(o=tn(n,r),o===an?o=Xe(n,a):o===un&&(o=ln));n.avail_in>0&&o===sn&&n.state.wrap>0&&0!==t[n.next_in];)Ye(n),o=Xe(n,a);switch(o){case cn:case un:case ln:case hn:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||o===sn))if("string"===this.options.to){let t=Yt(n.output,n.next_out),e=n.next_out-t,r=Zt(n.output,t);n.next_out=e,n.avail_out=i-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==an||0!==s){if(o===sn)return o=Je(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===an&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=$t(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var fn={Inflate:dn,inflate:pn,inflateRaw:function(t,e){return(e=e||{}).raw=!0,pn(t,e)},ungzip:pn,constants:z};const{Deflate:gn,deflate:mn,deflateRaw:vn,gzip:yn}=ce,{Inflate:bn,inflate:wn,inflateRaw:Sn,ungzip:xn}=fn;var kn={Deflate:gn,deflate:mn,deflateRaw:vn,gzip:yn,Inflate:bn,inflate:wn,inflateRaw:Sn,ungzip:xn,constants:z}},55888:(t,e,n)=>{"use strict";n.d(e,{A:()=>m});var i=function(t,e){return Number(t.slice(0,-1*e.length))},r=function(t){return t.endsWith("px")?{value:t,type:"px",numeric:i(t,"px")}:t.endsWith("fr")?{value:t,type:"fr",numeric:i(t,"fr")}:t.endsWith("%")?{value:t,type:"%",numeric:i(t,"%")}:"auto"===t?{value:t,type:"auto"}:null},o=function(t){return t.split(" ").map(r)},a=function(t,e,n){return e.concat(n).map((function(e){return e.style[t]})).filter((function(t){return void 0!==t&&""!==t}))},s=function(t){for(var e=0;e<t.length;e++)if(t[e].numeric>0)return e;return null},l=function(){return!1},c=function(t,e,n){t.style[e]=n},u=function(t,e,n){var i=t[e];return void 0!==i?i:n};function h(t){var e;return(e=[]).concat.apply(e,Array.from(t.ownerDocument.styleSheets).map((function(t){var e=[];try{e=Array.from(t.cssRules||[])}catch(t){}return e}))).filter((function(e){var n=!1;try{n=t.matches(e.selectorText)}catch(t){}return n}))}var d=function(t,e,n){this.direction=t,this.element=e.element,this.track=e.track,"column"===t?(this.gridTemplateProp="grid-template-columns",this.gridGapProp="grid-column-gap",this.cursor=u(n,"columnCursor",u(n,"cursor","col-resize")),this.snapOffset=u(n,"columnSnapOffset",u(n,"snapOffset",30)),this.dragInterval=u(n,"columnDragInterval",u(n,"dragInterval",1)),this.clientAxis="clientX",this.optionStyle=u(n,"gridTemplateColumns")):"row"===t&&(this.gridTemplateProp="grid-template-rows",this.gridGapProp="grid-row-gap",this.cursor=u(n,"rowCursor",u(n,"cursor","row-resize")),this.snapOffset=u(n,"rowSnapOffset",u(n,"snapOffset",30)),this.dragInterval=u(n,"rowDragInterval",u(n,"dragInterval",1)),this.clientAxis="clientY",this.optionStyle=u(n,"gridTemplateRows")),this.onDragStart=u(n,"onDragStart",l),this.onDragEnd=u(n,"onDragEnd",l),this.onDrag=u(n,"onDrag",l),this.writeStyle=u(n,"writeStyle",c),this.startDragging=this.startDragging.bind(this),this.stopDragging=this.stopDragging.bind(this),this.drag=this.drag.bind(this),this.minSizeStart=e.minSizeStart,this.minSizeEnd=e.minSizeEnd,e.element&&(this.element.addEventListener("mousedown",this.startDragging),this.element.addEventListener("touchstart",this.startDragging))};d.prototype.getDimensions=function(){var t=this.grid.getBoundingClientRect(),e=t.width,n=t.height,i=t.top,r=t.bottom,o=t.left,a=t.right;"column"===this.direction?(this.start=i,this.end=r,this.size=n):"row"===this.direction&&(this.start=o,this.end=a,this.size=e)},d.prototype.getSizeAtTrack=function(t,e){return function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var r=i?t+1:t;return e.slice(0,r).reduce((function(t,e){return t+e.numeric}),0)+(n?t*n:0)}(t,this.computedPixels,this.computedGapPixels,e)},d.prototype.getSizeOfTrack=function(t){return this.computedPixels[t].numeric},d.prototype.getRawTracks=function(){var t=a(this.gridTemplateProp,[this.grid],h(this.grid));if(!t.length){if(this.optionStyle)return this.optionStyle;throw Error("Unable to determine grid template tracks from styles.")}return t[0]},d.prototype.getGap=function(){var t=a(this.gridGapProp,[this.grid],h(this.grid));return t.length?t[0]:null},d.prototype.getRawComputedTracks=function(){return window.getComputedStyle(this.grid)[this.gridTemplateProp]},d.prototype.getRawComputedGap=function(){return window.getComputedStyle(this.grid)[this.gridGapProp]},d.prototype.setTracks=function(t){this.tracks=t.split(" "),this.trackValues=o(t)},d.prototype.setComputedTracks=function(t){this.computedTracks=t.split(" "),this.computedPixels=o(t)},d.prototype.setGap=function(t){this.gap=t},d.prototype.setComputedGap=function(t){var e;this.computedGap=t,this.computedGapPixels=((e=this.computedGap).endsWith("px")?Number(e.slice(0,-2)):null)||0},d.prototype.getMousePosition=function(t){return"touches"in t?t.touches[0][this.clientAxis]:t[this.clientAxis]},d.prototype.startDragging=function(t){if(!("button"in t)||0===t.button){t.preventDefault(),this.element?this.grid=this.element.parentNode:this.grid=t.target.parentNode,this.getDimensions(),this.setTracks(this.getRawTracks()),this.setComputedTracks(this.getRawComputedTracks()),this.setGap(this.getGap()),this.setComputedGap(this.getRawComputedGap());var e=this.trackValues.filter((function(t){return"%"===t.type})),n=this.trackValues.filter((function(t){return"fr"===t.type}));if(this.totalFrs=n.length,this.totalFrs){var i=s(n);null!==i&&(this.frToPixels=this.computedPixels[i].numeric/n[i].numeric)}if(e.length){var r=s(e);null!==r&&(this.percentageToPixels=this.computedPixels[r].numeric/e[r].numeric)}var o=this.getSizeAtTrack(this.track,!1)+this.start;if(this.dragStartOffset=this.getMousePosition(t)-o,this.aTrack=this.track-1,!(this.track<this.tracks.length-1))throw Error("Invalid track index: "+this.track+". Track must be between two other tracks and only "+this.tracks.length+" tracks were found.");this.bTrack=this.track+1,this.aTrackStart=this.getSizeAtTrack(this.aTrack,!1)+this.start,this.bTrackEnd=this.getSizeAtTrack(this.bTrack,!0)+this.start,this.dragging=!0,window.addEventListener("mouseup",this.stopDragging),window.addEventListener("touchend",this.stopDragging),window.addEventListener("touchcancel",this.stopDragging),window.addEventListener("mousemove",this.drag),window.addEventListener("touchmove",this.drag),this.grid.addEventListener("selectstart",l),this.grid.addEventListener("dragstart",l),this.grid.style.userSelect="none",this.grid.style.webkitUserSelect="none",this.grid.style.MozUserSelect="none",this.grid.style.pointerEvents="none",this.grid.style.cursor=this.cursor,window.document.body.style.cursor=this.cursor,this.onDragStart(this.direction,this.track)}},d.prototype.stopDragging=function(){this.dragging=!1,this.cleanup(),this.onDragEnd(this.direction,this.track),this.needsDestroy&&(this.element&&(this.element.removeEventListener("mousedown",this.startDragging),this.element.removeEventListener("touchstart",this.startDragging)),this.destroyCb(),this.needsDestroy=!1,this.destroyCb=null)},d.prototype.drag=function(t){var e=this.getMousePosition(t),n=this.getSizeOfTrack(this.track),i=this.aTrackStart+this.minSizeStart+this.dragStartOffset+this.computedGapPixels,r=this.bTrackEnd-this.minSizeEnd-this.computedGapPixels-(n-this.dragStartOffset);e<i+this.snapOffset&&(e=i),e>r-this.snapOffset&&(e=r),e<i?e=i:e>r&&(e=r);var o=e-this.aTrackStart-this.dragStartOffset-this.computedGapPixels,a=this.bTrackEnd-e+this.dragStartOffset-n-this.computedGapPixels;if(this.dragInterval>1){var s=Math.round(o/this.dragInterval)*this.dragInterval;a-=s-o,o=s}if(o<this.minSizeStart&&(o=this.minSizeStart),a<this.minSizeEnd&&(a=this.minSizeEnd),"px"===this.trackValues[this.aTrack].type)this.tracks[this.aTrack]=o+"px";else if("fr"===this.trackValues[this.aTrack].type)if(1===this.totalFrs)this.tracks[this.aTrack]="1fr";else{var l=o/this.frToPixels;this.tracks[this.aTrack]=l+"fr"}else if("%"===this.trackValues[this.aTrack].type){var c=o/this.percentageToPixels;this.tracks[this.aTrack]=c+"%"}if("px"===this.trackValues[this.bTrack].type)this.tracks[this.bTrack]=a+"px";else if("fr"===this.trackValues[this.bTrack].type)if(1===this.totalFrs)this.tracks[this.bTrack]="1fr";else{var u=a/this.frToPixels;this.tracks[this.bTrack]=u+"fr"}else if("%"===this.trackValues[this.bTrack].type){var h=a/this.percentageToPixels;this.tracks[this.bTrack]=h+"%"}var d=this.tracks.join(" ");this.writeStyle(this.grid,this.gridTemplateProp,d),this.onDrag(this.direction,this.track,d)},d.prototype.cleanup=function(){window.removeEventListener("mouseup",this.stopDragging),window.removeEventListener("touchend",this.stopDragging),window.removeEventListener("touchcancel",this.stopDragging),window.removeEventListener("mousemove",this.drag),window.removeEventListener("touchmove",this.drag),this.grid&&(this.grid.removeEventListener("selectstart",l),this.grid.removeEventListener("dragstart",l),this.grid.style.userSelect="",this.grid.style.webkitUserSelect="",this.grid.style.MozUserSelect="",this.grid.style.pointerEvents="",this.grid.style.cursor=""),window.document.body.style.cursor=""},d.prototype.destroy=function(t,e){void 0===t&&(t=!0),t||!1===this.dragging?(this.cleanup(),this.element&&(this.element.removeEventListener("mousedown",this.startDragging),this.element.removeEventListener("touchstart",this.startDragging)),e&&e()):(this.needsDestroy=!0,e&&(this.destroyCb=e))};var p=function(t,e,n){return e in t?t[e]:n},f=function(t,e){return function(n){if(n.track<1)throw Error("Invalid track index: "+n.track+". Track must be between two other tracks.");var i="column"===t?e.columnMinSizes||{}:e.rowMinSizes||{},r="column"===t?"columnMinSize":"rowMinSize";return new d(t,Object.assign({},{minSizeStart:p(i,n.track-1,u(e,r,u(e,"minSize",0))),minSizeEnd:p(i,n.track+1,u(e,r,u(e,"minSize",0)))},n),e)}},g=function(t){var e=this;this.columnGutters={},this.rowGutters={},this.options=Object.assign({},{columnGutters:t.columnGutters||[],rowGutters:t.rowGutters||[],columnMinSizes:t.columnMinSizes||{},rowMinSizes:t.rowMinSizes||{}},t),this.options.columnGutters.forEach((function(t){e.columnGutters[t.track]=f("column",e.options)(t)})),this.options.rowGutters.forEach((function(t){e.rowGutters[t.track]=f("row",e.options)(t)}))};g.prototype.addColumnGutter=function(t,e){this.columnGutters[e]&&this.columnGutters[e].destroy(),this.columnGutters[e]=f("column",this.options)({element:t,track:e})},g.prototype.addRowGutter=function(t,e){this.rowGutters[e]&&this.rowGutters[e].destroy(),this.rowGutters[e]=f("row",this.options)({element:t,track:e})},g.prototype.removeColumnGutter=function(t,e){var n=this;void 0===e&&(e=!0),this.columnGutters[t]&&this.columnGutters[t].destroy(e,(function(){delete n.columnGutters[t]}))},g.prototype.removeRowGutter=function(t,e){var n=this;void 0===e&&(e=!0),this.rowGutters[t]&&this.rowGutters[t].destroy(e,(function(){delete n.rowGutters[t]}))},g.prototype.handleDragStart=function(t,e,n){"column"===e?(this.columnGutters[n]&&this.columnGutters[n].destroy(),this.columnGutters[n]=f("column",this.options)({track:n}),this.columnGutters[n].startDragging(t)):"row"===e&&(this.rowGutters[n]&&this.rowGutters[n].destroy(),this.rowGutters[n]=f("row",this.options)({track:n}),this.rowGutters[n].startDragging(t))},g.prototype.destroy=function(t){var e=this;void 0===t&&(t=!0),Object.keys(this.columnGutters).forEach((function(n){return e.columnGutters[n].destroy(t,(function(){delete e.columnGutters[n]}))})),Object.keys(this.rowGutters).forEach((function(n){return e.rowGutters[n].destroy(t,(function(){delete e.rowGutters[n]}))}))};const m=function(t){return new g(t)}},97417:(t,e,n)=>{"use strict";n.d(e,{G:()=>a});const i="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),r="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class a{constructor(t,e){this.rules=[];let{finish:n}=e||{};function i(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function r(t,e,o,a){let s=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==e)return o.push(t[0]+";");for(let n in e){let a=e[n];if(/&/.test(n))r(n.split(/,\s*/).map((e=>t.map((t=>e.replace(/&/,t))))).reduce(((t,e)=>t.concat(e))),a,o);else if(a&&"object"==typeof a){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");r(i(n),a,s,c)}else null!=a&&s.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))+": "+a+";")}(s.length||c)&&o.push((!n||l||a?t:t.map(n)).join(", ")+" {"+s.join(" ")+"}")}for(let e in t)r(i(e),t[e],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let t=o[i]||1;return o[i]=t+1,"ͼ"+t.toString(36)}static mount(t,e,n){let i=t[r],o=n&&n.nonce;i?o&&i.setNonce(o):i=new l(t,o),i.mount(Array.isArray(e)?e:[e],t)}}let s=new Map;class l{constructor(t,e){let n=t.ownerDocument||t,i=n.defaultView;if(!t.head&&t.adoptedStyleSheets&&i.CSSStyleSheet){let e=s.get(n);if(e)return t[r]=e;this.sheet=new i.CSSStyleSheet,s.set(n,this)}else this.styleTag=n.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[r]=this}mount(t,e){let n=this.sheet,i=0,r=0;for(let e=0;e<t.length;e++){let o=t[e],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),-1==a){if(this.modules.splice(r++,0,o),n)for(let t=0;t<o.rules.length;t++)n.insertRule(o.rules[t],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(n)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let t="";for(let e=0;e<this.modules.length;e++)t+=this.modules[e].getRules()+"\n";this.styleTag.textContent=t;let n=e.head||e;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}},62534:(t,e,n)=>{"use strict";n.d(e,{BN:()=>r,E3:()=>i,xT:()=>c});for(var i={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),a="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),s=0;s<10;s++)i[48+s]=i[96+s]=String(s);for(s=1;s<=24;s++)i[s+111]="F"+s;for(s=65;s<=90;s++)i[s]=String.fromCharCode(s+32),r[s]=String.fromCharCode(s);for(var l in i)r.hasOwnProperty(l)||(r[l]=i[l]);function c(t){var e=!(o&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||a&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?r:i)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{default:()=>o});var t=n(65789),e=window.powerbi,r={name:"synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6",displayName:"Synoptic Panel Lite by OKVIZ",class:"Visual",apiVersion:"5.11.0",create:e=>{if(t.b)return new t.b(e);throw"Visual instance not found"},createModalDialog:(t,e,n)=>{const i=globalThis.dialogRegistry;t in i&&new i[t](e,n)},custom:!0};void 0!==e&&(e.visuals=e.visuals||{},e.visuals.plugins=e.visuals.plugins||{},e.visuals.plugins.synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6=r);const o=r})(),synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6=i})();