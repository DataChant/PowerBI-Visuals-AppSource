var Waterfall2023Pbi552BC2DB21894DA5B40D0FE0FE33D590;(()=>{"use strict";var t={3766:(t,e,i)=>{i.d(e,{P:()=>a});var n=i(8976);class a{constructor(){this.width=0,this.height=0}start(t,e){this.parentElement=e,this.svg=null!=e?e:n.Ys(".host-svg"),this.locale=t.host.locale,this.startView(t,e),this.updateParent()}update(t){try{this.updateParent(),this.updateView(t)}catch(t){console.log(t)}}updateParent(){this.width=+this.svg.style("width").replace("px",""),this.height=+this.svg.style("height").replace("px","")}}},5388:(t,e,i)=>{i.d(e,{W:()=>n});class n{static removeDecimal(t){return t.toString().includes(".")?+t.toString().split(".")[0]:+t}}},1539:(t,e,i)=>{i.d(e,{Jx:()=>a});var n=i(4554).U;class a extends n{constructor(){super(...arguments),this.chart=new u,this.license=new r,this.bar=new s,this.label=new l,this.legend=new A,this.lineChart=new o,this.highlight1=new h,this.highlight2=new c,this.highlight3=new d,this.highlight4=new f,this.highlight5=new g,this.sentimentColor=new p,this.table=new v,this.limitOutlier=new m,this.firstValue=new b,this.startingValue=new y,this.lastValue=new x,this.secondLastValue=new S,this.hierarchy=new w}}class r{constructor(){this.licenseSupport="https://dataviz.boutique",this.licenseKey="",this.licenseVersion="1.0.2.0",this.decodedKey="",this.planExpired="Yes",this.planName="",this.persistantKey="",this.persistantDecodedKey=""}}class s{constructor(){this.show=!0,this.colorToggle=!1,this.labelToggle=!0,this.labelBackgroundToggle=!0,this.labelBackgroundColor="grey",this.transparency=27,this.signToggle=!0,this.precision=2,this.dataUnit="auto",this.fontSize=10,this.fontColor="black",this.fontFamily="DIN",this.totalBar=!0,this.totalBarColor="black",this.subTotalToggle=!1,this.subTotalType="manual",this.subTotalPosition="",this.subTotalBarColor="black",this.customBarColor="",this.customBarColorIndices="",this.customBarColorToggle=!1}}class l{constructor(){this.color="black",this.fontSize=12,this.fontFamily="",this.boldLabelToggle=!1,this.boldLabelIndices="",this.boldAllLabels=!1,this.overlapMitigation=!1,this.truncateLimit=0,this.multilineToggle=!1,this.rotationAngle=35,this.horizontalPosition=-3,this.verticalPosition=12}}class o{constructor(){this.show=!1,this.fill="cornflowerblue",this.thickness=2,this.overlapColor=[],this.lineEnding=[],this.lineStyle=[],this.showMarkers=!0,this.markerRadius=2,this.markerStrokeWidth=1,this.markerStrokeColor="black",this.markerFillColor="white",this.areaUnderTheGraph=!1,this.areaColor="gray",this.areaOpacity=.4}}class u{constructor(){this.padding=15,this.axisToggle=!1,this.mergeLastAndTotal=!1,this.yAxisToggle=!1,this.originToggle=!0}}class h{constructor(){this.show=!1,this.badgeType="rectangle",this.fontSize=14,this.fontFamily="DIN",this.fill="black",this.useSentimentColor=!0,this.startIndices="",this.endingIndices="",this.arrowSize=10,this.startArrow=!1,this.endingArrow=!0}}class c{constructor(){this.show=!1,this.badgeType="rectangle",this.fontSize=14,this.fontFamily="DIN",this.fill="black",this.useSentimentColor=!0,this.startIndices="",this.endingIndices="",this.arrowSize=10,this.startArrow=!1,this.endingArrow=!0}}class d{constructor(){this.show=!1,this.badgeType="rectangle",this.fontSize=14,this.fontFamily="DIN",this.fill="black",this.useSentimentColor=!0,this.startIndices="",this.endingIndices="",this.arrowSize=10,this.startArrow=!1,this.endingArrow=!0}}class f{constructor(){this.show=!1,this.badgeType="rectangle",this.fontSize=14,this.fontFamily="DIN",this.fill="black",this.useSentimentColor=!0,this.arrowSize=10,this.startArrow=!1,this.endingArrow=!0}}class g{constructor(){this.show=!1,this.badgeType="rectangle",this.fontSize=14,this.fontFamily="DIN",this.fill="black",this.useSentimentColor=!0,this.arrowSize=10,this.startArrow=!1,this.endingArrow=!0}}class p{constructor(){this.increase="#6FD44D",this.decrease="#ff2800"}}class v{constructor(){this.show=!0,this.fontSize=12,this.fontFamily="",this.padding=7,this.formatToggle=!0,this.precision=3,this.header=!0,this.headerSymbols=!0,this.measureValues=!0,this.measureSymbolType="hatchedRectangle",this.measureSymbolColor="white",this.reference=!0,this.referenceSymbolType="rectangle",this.referenceSymbolColor="black",this.absoluteVariance=!0,this.absVarSymbolType="rectangle",this.absVarSymbolColor="white",this.percentageVariance=!0,this.percentVarSymbolType="line",this.percentVarSymbolColor="black",this.result=!0,this.resultSymbolType="line",this.resultSymbolColor="black"}}class m{constructor(){this.show=!1,this.outlier=1e4,this.total=!1,this.firstValues=!1,this.secondLastValues=!1,this.lastValues=!1,this.axisBreakToggle=!0,this.axisBreakSize=6,this.axisBreakColor="#ffffff",this.axisBreakType=[],this.axisBreakPosition=0}}class y{constructor(){this.customLabel="",this.color="#B2BEB5",this.borderColor="",this.fillType="solid"}}class b{constructor(){this.customLabel="",this.color="#FF7F50",this.borderColor="",this.fillType="solid"}}class x{constructor(){this.customLabel="",this.color="#17A589",this.borderColor="",this.fillType="solid"}}class S{constructor(){this.customLabel="",this.color="#F0B27A",this.borderColor="",this.fillType="solid"}}class w{constructor(){this.L1="#003396",this.L2="#154197",this.L3="#2e5090",this.L4="#3A5891",this.L5="#496291",this.L6="#5F7295",this.L7="#728099",this.L8="#818A9B"}}class A{constructor(){this.show=!1,this.markerSize=6,this.fontFamily="Segoe UI",this.fontColor="black",this.fontSize=14}}},3699:(t,e,i)=>{i.d(e,{u:()=>s});var n=i(1539),a=i(8976),r=i(1516);class s{constructor(t){this.waterFallChart=new r.H;const e=a.Ys(t.element).append("div");this.svg=e.append("svg").classed("host-svg",!0).attr("width",a.Ys(t.element).attr("width")).attr("height",a.Ys(t.element).attr("height")),this.waterFallChart.start(t,this.svg),this.events=t.host.eventService}update(t){this.events.renderingStarted(t),this.dataView=t.dataViews[0],this.visualSettings=n.Jx.parse(t.dataViews[0]);const e=t.viewport.width,i=t.viewport.height;this.svg.attr("width",e).attr("height",i),this.waterFallChart.update(t),this.events.renderingFinished(t)}static parseSettings(t){return n.Jx.parse(t)}enumerateObjectInstances(t){const e=this.visualSettings||n.Jx.getDefault(),i=this.dataView.metadata.objects,a=i?i.license:null;return a&&a.persistantKey&&a.persistantDecodedKey&&(e.license.licenseKey=a.persistantKey.toString(),e.license.decodedKey=a.persistantDecodedKey.toString()),a&&a.planName&&a.planExpired&&(e.license.planName=a.planName.toString(),e.license.planExpired=a.planExpired.toString()),delete e.license.persistantKey,delete e.license.persistantDecodedKey,e.bar.labelToggle||(delete e.bar.signToggle,delete e.bar.fontSize,delete e.bar.fontColor,delete e.bar.fontFamily,delete e.bar.dataUnit,delete e.bar.precision,delete e.bar.labelBackgroundToggle),e.bar.labelBackgroundToggle||(delete e.bar.labelBackgroundColor,delete e.bar.transparency),e.bar.subTotalToggle||(delete e.bar.subTotalType,delete e.bar.subTotalPosition,delete e.bar.subTotalBarColor),e.bar.subTotalToggle&&"automatic"===e.bar.subTotalType&&delete e.bar.subTotalPosition,e.bar.totalBar||delete e.bar.totalBarColor,""==e.bar.customBarColor&&(delete e.bar.customBarColorIndices,delete e.bar.customBarColorToggle),e.label.overlapMitigation||(delete e.label.truncateLimit,delete e.label.rotationAngle,delete e.label.horizontalPosition,delete e.label.verticalPosition),e.label.boldLabelToggle||(delete e.label.boldLabelIndices,delete e.label.boldAllLabels),e.limitOutlier.axisBreakToggle||(delete e.limitOutlier.axisBreakColor,delete e.limitOutlier.axisBreakSize,delete e.limitOutlier.axisBreakType,delete e.limitOutlier.axisBreakPosition),e.table.formatToggle||delete e.table.precision,e.table.headerSymbols?(!e.table.measureValues&&delete e.table.measureSymbolType,!e.table.measureValues&&delete e.table.measureSymbolColor,!e.table.reference&&delete e.table.referenceSymbolType,!e.table.reference&&delete e.table.referenceSymbolColor,!e.table.absoluteVariance&&delete e.table.absVarSymbolType,!e.table.absoluteVariance&&delete e.table.absVarSymbolColor,!e.table.percentageVariance&&delete e.table.percentVarSymbolType,!e.table.percentageVariance&&delete e.table.percentVarSymbolColor,!e.table.result&&delete e.table.resultSymbolType,!e.table.result&&delete e.table.referenceSymbolColor):(delete e.table.measureSymbolType,delete e.table.referenceSymbolType,delete e.table.absVarSymbolType,delete e.table.percentVarSymbolType,delete e.table.resultSymbolType,delete e.table.measureSymbolColor,delete e.table.referenceSymbolColor,delete e.table.absVarSymbolColor,delete e.table.percentVarSymbolColor,delete e.table.resultSymbolColor),n.Jx.enumerateObjectInstances(e,t)}}},1516:(t,e,i)=>{i.d(e,{H:()=>h});var n=i(7970),a=i(8976),r=i(5388),s=i(3766),l=i(1539),o=i(8482),u=i(6738);class h extends s.P{constructor(){super(),this.data=[],this.referenceData=[],this.tableData=[],this.chart=[],this.dimensionsDivisionFactor=1,this.highlights=[],this.groupNames=[],this.datasetNames=[],this.tableValuesNames=[],this.categoriesArray=[],this.primaryColor="",this.secondaryColor="",this.categoryName="",this.scrollAble=!1,this.seriesConfiguration=!1,this.hierarchichalConfiguration=!1,this.heirarchichalCategories=[],this.retainHeirarchichalState=!1,this.expandedNodeIndices=[],this.treeExpansionDepth=1,this.barLabelOverlap=!1,this.legendHeight=0,this.columnUpdateContainer=null,this.publicKey={crv:"P-384",ext:!0,key_ops:["verify"],kty:"EC",x:"Qa1OMlaAPT2HFckF-660lMVh5iD8uKOa77LSHllJHYqaLkqri9zrw_fPisiLfvAf",y:"a9U9FBeR1oHYRCq-H_yUfkXLx2cznb4nKyGxzdOfwt0-cFWsqfO2xXbrFxAtsd1i"},this.prevCode="",this.verifiedKey=""}startView(t){this.tooltipServiceWrapper=(0,n.p2)(t.host.tooltipService,t.element),this.licenseManager=t.host.licenseManager,this.localVisualStorageService=t.host.storageService,this.selectionManager=t.host.createSelectionManager(),this.interactivity=o.L(t.host),this.host=t.host,this.target=t.element}updateView(t){if(!t.dataViews||!t.dataViews[0]||!t.dataViews[0].categorical.values)return void this.createLandingPage();this.visualSettings=l.Jx.parse(t.dataViews[0]),this.svg.selectAll("*").remove(),this.createWatermark(),this.handleContextMenu(),this.performLicenseEnforcement(),this.handleBreakingSettings(this.visualSettings);const e={top:50,right:30,bottom:50,left:30},i=this.visualSettings.bar.customBarColor,n=this.visualSettings.bar.customBarColorToggle;this.primaryColor=n?i:this.visualSettings.bar.colorToggle?this.visualSettings.sentimentColor.decrease:this.visualSettings.sentimentColor.increase,this.secondaryColor=n?i:this.primaryColor==this.visualSettings.sentimentColor.decrease?this.visualSettings.sentimentColor.increase:this.visualSettings.sentimentColor.decrease;const a=Object.assign({},t.dataViews[0]);this.data=[],this.referenceData=[],this.tableData=[],this.highlights=[],this.barLabelOverlap=!1,this.visualSettings.chart.axisToggle||(this.hierarchichalConfiguration=!1),this.legendHeight=0;const r=a.categorical.values.length,s=Object.assign([],a.categorical.values),o=s.filter((t=>null!=t.source.roles.firstValues)),u=s.filter((t=>null!=t.source.roles.startingValues)),h=s.filter((t=>null!=t.source.roles.measure));if(0===h.length)return void this.createLandingPage();const c=void 0!==a.categorical.categories?a.categorical.categories.filter((t=>!0===t.source.roles.category)):[],d=s.filter((t=>null!=t.source.roles.secondLastValues)),f=s.filter((t=>null!=t.source.roles.lastValues)),g=s.filter((t=>null!=t.source.roles.reference)),p=s.filter((t=>null!=t.source.roles.tableValues)),v=s.filter((t=>null!=t.source.roles.sign)).length>0?s.filter((t=>null!=t.source.roles.sign))[0].values:null;!this.hierarchichalConfiguration&&this.svg.attr("height",this.height*(h.length>4?Math.ceil(h.length/4):1)+21*Math.ceil(h.length/2)),this.categoryName=void 0!==a.categorical.categories?a.categorical.categories[0].source.displayName:"",this.datasetNames=[],this.tableValuesNames=[],this.categoriesArray=[],h.length>0&&h.forEach((t=>{void 0!==t.source.displayName&&this.datasetNames.push(t.source.displayName.toString())})),g.length>0&&(this.visualSettings.chart.mergeLastAndTotal=!1,this.visualSettings.limitOutlier.show=!1,void 0!==g[0].source.displayName&&this.datasetNames.push(g[0].source.displayName.toString())),p.length>0&&p.forEach((t=>{void 0!==t.source.displayName&&this.tableValuesNames.push(t.source.displayName.toString())})),this.groupNames=[],s.length>=1&&c.length>0&&(s.forEach((t=>{void 0!==t.source.groupName&&this.groupNames.push(t.source.groupName.toString())})),this.groupNames=[...new Set(this.groupNames)]),this.dimensionsDivisionFactor=1===h.length||0===c.length||0===this.groupNames.length?1:2,this.populateData(c,h,v,a),g.length>0&&this.populateReferenceData(g,a,h),p.length>0&&this.populateTableValues(p,a,h),this.visualSettings.bar.subTotalToggle&&"manual"===this.visualSettings.bar.subTotalType&&this.data.forEach((t=>{this.insertSubtotalBars(t,this.visualSettings.bar.subTotalPosition)})),this.data.forEach(((t,e)=>{this.insertExtremeValues(t,r,o,u,d,f,e)})),this.tableData.forEach(((t,e)=>{this.insertExtremeValues(t,r,o,u,d,f,e)})),this.validateData(this.data)||this.validateData(this.referenceData)||this.validateData(this.tableData)?this.showError("Please insert numeric values in numeric data buckets."):(this.configureVisualDimensions(h,c),this.chart=[],this.configureGrid(s),this.data.forEach(((i,n)=>{this.constructChart(i,u,n,e,t)})))}validateData(t){return t.some((t=>t.some((t=>isNaN(t.value)))))}showError(t){const e=this.svg.append("text").text(t).attr("x",25).attr("y",this.height/2).attr("text-anchor","start").attr("fill","red");e.attr("font-size","20px"),e.attr("font-family","sans-serif");const i=e.node().getBBox().height,n=e.node().getBBox().width;n>this.width&&(this.svg.attr("width",n+50),this.target.style.overflowX="scroll"),i>this.height&&(this.svg.attr("height",i+50),this.target.style.overflowY="scroll")}constructChart(t,e,i,n,r){n.top=30;const s=this.visualSettings.bar.customBarColorIndices.split(","),l=this.referenceData.length>0?this.referenceData[i]:null,o=t.filter((t=>t.class.includes("centralMeasure")&&!t.class.includes("subtotal")));null!=l&&this.mutateDataForReference(o,l,t),this.visualSettings.legend.show&&0===this.legendHeight&&this.configureLegend(l,n,i);const u=this.svg.select(`.c${i}`).append("text").attr("id",`groupName${i}`).text(this.groupNames[i]).attr("fill","black").attr("transform",`translate(0,${-1!==[0,1].indexOf(i)?this.legendHeight:0})`);null!=u&&(n.top+=u.node().getBBox().height),this.configureHighlights(n,t),n.left=this.visualSettings.chart.yAxisToggle?50:16,n.right=16;const h=.01*this.visualSettings.chart.padding,c=this.height/this.dimensionsDivisionFactor-n.top-n.bottom,d=this.width/this.dimensionsDivisionFactor-n.left-n.right;this.visualSettings.limitOutlier.show&&this.handleSkewedData(t);const f=this.calculateGlobalExtrema(t,this.visualSettings.limitOutlier.show,l);if(this.visualSettings.chart.axisToggle)return void this.configureChartForHorizontalOrientation(t,l,i,r,n,f,d,c,h,o,s,u);const g=this.svg.select(`.c${i}`).append("g").classed("chart",!0).attr("transform",`translate(${n.left/this.dimensionsDivisionFactor},${n.top/this.dimensionsDivisionFactor})`);this.chart.push(g);const p=a.tiA().rangeRound([0,d]).padding(h).domain(t.map((t=>t.name))),v=a.BYU().range([c,0]).domain([f.globalMinimum,f.globalMaximum]),m=a.y4O(v),y=a.LLu(p);g.append("g").attr("class","x-axis").style("color","black").attr("transform",`translate(0,${c})`).call(y).selectAll(".tick").select("text").style("font-size",`${this.visualSettings.label.fontSize}`).style("color",this.visualSettings.label.color).style("font-family",this.visualSettings.label.fontFamily),a.td_(".x-axis").select(".domain").remove(),a.td_(".x-axis").selectAll(".tick line").remove(),this.visualSettings.chart.yAxisToggle&&g.append("g").attr("class","y-axis").style("color","black").call(m),this.countOverLappingLabels(g.selectAll(".tick text"),p.bandwidth())>0&&!this.visualSettings.label.multilineToggle&&(this.visualSettings.label.overlapMitigation=!0),this.handleOverlapMitigation(g,n,v,m,c,p),this.visualSettings.chart.originToggle&&g.append("line").classed("axis",!0).attr("stroke","black").attr("class","axis").attr("x1",0).attr("y1",v(0)).attr("x2",d).attr("y2",v(0)).attr("transform","translate(0, 0)"),this.visualSettings.label.boldLabelToggle&&g.selectAll(".tick text").call(this.boldenLabels,this.visualSettings.label.boldAllLabels,this.visualSettings.label.boldLabelIndices,this.visualSettings.label.multilineToggle);const b=[],x=this.appendVerticalBarContainers(g,t,s,b,p);if(this.svg.on("click",(t=>{t.ctrlKey||3===t.which||(b.splice(0,b.length),this.selectionManager.clear().then((()=>{g.selectAll(".bar").attr("opacity","1"),g.selectAll(".tick text").attr("opacity","1")})))})),this.visualSettings.bar.show){const e=this.appendVerticalConnectingLines(x,t,p,h,o,l,v);e.empty()||e.attr("shape-rendering","crispEdges"),this.appendVerticalBars(x,t,l,o,p,v,s).filter((t=>t.class.includes("centralMeasure")&&!t.class.includes("startingValue")&&!t.class.includes("total"))).attr("stroke-dasharray",(function(){const t=a.Ys(this).attr("height");return`${null!==l?p.bandwidth()/2:p.bandwidth()} ${t}`})),null!==l&&this.appendVerticalReferenceBars(x,t,l,o,s,p,v).attr("stroke",(function(){return a.Ys(this).attr("fill")})).attr("stroke-dasharray",(function(){const t=a.Ys(this).attr("height");return`${p.bandwidth()/2} ${t}`})),this.visualSettings.bar.labelToggle&&this.configureVerticalBarLabels(g,x,l,p,v,o),this.visualSettings.limitOutlier.show&&this.visualSettings.limitOutlier.axisBreakToggle&&this.appendVerticalAxisBreakSymbols(g,x,p,v)}this.visualSettings.lineChart.show&&this.insertLineChart(p,v,t,i),this.configureTooltipsForVerticalOrientation(g,x,t,b),this.highlights.forEach(((e,a)=>{e.startingIndices!=e.endingIndices&&e.validIndices.length>0&&this.insertHightlight(e.validIndices,e.startingIndices,e.endingIndices,p,v,n,t,i,e.settings,a)}))}configureTooltipsForHorizontalOrientation(t,e,i){this.tooltipServiceWrapper.addTooltip(e,(t=>this.getTooltipData(t)),(t=>t.identity)),this.visualSettings.table.show||(t.select(".x-axis").selectAll(".tick").data(i).on("mouseover",((e,n)=>{t.selectAll(".bar").filter(((t,e)=>e!=i.indexOf(n))).attr("opacity","0.4"),t.select(".x-axis").selectAll(".tick text").filter(((t,e)=>e!=i.indexOf(n))).attr("opacity","0.4")})).on("mouseout",(()=>{t.selectAll(".bar").attr("opacity","1"),t.selectAll(".tick text").attr("opacity","1")})),this.tooltipServiceWrapper.addTooltip(t.select(".x-axis").selectAll(".tick"),(t=>this.getTooltipData(t)),(t=>t.identity)))}configureTooltipsForVerticalOrientation(t,e,i,n){this.tooltipServiceWrapper.addTooltip(e,(t=>this.getTooltipData(t)),(t=>t.identity),!1),t.select(".x-axis").selectAll(".tick").data(i).on("mouseover",((e,a)=>{n.length>0||(t.selectAll(".bar").filter(((t,e)=>e!=i.indexOf(a))).attr("opacity","0.4"),t.selectAll(".tick text").filter(((t,e)=>e!=i.indexOf(a))).attr("opacity","0.4"))})).on("mouseout",(()=>{n.length>0||(t.selectAll(".bar").attr("opacity","1"),t.selectAll(".tick text").attr("opacity","1"))})).on("click",((t,e)=>{t.stopPropagation(),3===t.which||n.length>0||this.selectionManager.select(e.identity)})),this.tooltipServiceWrapper.addTooltip(t.select(".x-axis").selectAll(".tick"),(t=>this.getTooltipData(t)),(t=>t.identity))}getTooltipData(t){if(null!==t.constituents&&void 0!==t.constituents){const e=[];for(const i in t.constituents)e.push({displayName:i,value:t.constituents[i],color:void 0!==t.constituents["Absolute Variance"]||t.class.includes("total")?"transparent":t.color});return t.class.includes("total")||void 0===t.constituents["Absolute Variance"]&&e.push({displayName:"Total",value:t.value.toString(),color:"transparent"}),e}return[{displayName:t.name,value:t.value.toString(),color:t.color}]}applyHoverEventsToColumn(t,e,i,n){t.data([null].concat(e)).filter(((t,e)=>0!==e)).on("mouseover",((t,a)=>{this.setOpacityForBars(e.indexOf(a),i,.4),n.forEach((t=>{this.setOpacityForTable(e.indexOf(a),t,.4)}))})).on("mouseout",((t,a)=>{this.setOpacityForBars(null,i,1),n.forEach((t=>{this.setOpacityForTable(e.indexOf(a),t,1)}))}))}setOpacityForBars(t,e,i){e.selectAll(".bar").filter(((e,i)=>null===t||i!==t)).attr("opacity",i),e.selectAll(".tick text").filter(((e,i)=>null===t||i!==t)).attr("opacity",i)}setOpacityForTable(t,e,i){e.filter(((e,i)=>null===t||i!==t+1&&0!==i)).attr("opacity",i)}insertSubtotalBars(t,e){const i=e.split(",");if(null!=i&&i.length>0)for(let e=0;e<t.length;e++)if(i.indexOf(e.toString())>-1){if(e>=t.length-1)return;t.splice(e,0,{name:"SubTotal"+e,start:t[e-1].end,end:0,value:r.W.removeDecimal(t[e-1].end),class:"subtotal centralMeasure",color:this.visualSettings.bar.subTotalBarColor,selected:!1,identity:null})}}countOverLappingLabels(t,e){let i=0;return t.each((function(){this.getComputedTextLength()>e&&i++})),i}handleOverlapMitigation(t,e,i,n,a,r){if(this.visualSettings.label.overlapMitigation){t.select(".x-axis").selectAll(".tick text").attr("dx",.1*this.visualSettings.label.horizontalPosition+"em").attr("dy",.1*this.visualSettings.label.verticalPosition+"em").attr("y","0").attr("text-anchor","end").attr("transform",`rotate(-${this.visualSettings.label.rotationAngle})`).style("font-size",this.visualSettings.label.fontSize).call(this.truncateLabelsText,this.visualSettings.label.truncateLimit);let s=0;t.select(".x-axis").selectAll(".tick").nodes().forEach((t=>{t.getBBox().height>s&&(s=t.getBBox().height)})),e.bottom=s,a=this.height/this.dimensionsDivisionFactor-e.top-e.bottom,i.range([a,0]),t.select(".x-axis").attr("transform",`translate(0,${a})`),this.visualSettings.chart.yAxisToggle&&(t.select(".y-axis").remove(),t.append("g").attr("class","y-axis").style("color","black").call(n));let l=0;t.select(".x-axis").selectAll(".tick").nodes().forEach(((t,i)=>{t.getBBox().width>r.bandwidth()*(i+1)+e.left-40&&(l=-90)})),l<0&&(t.select(".x-axis").selectAll(".tick text").attr("dx","-0.7em").attr("dy","0.3em").attr("y","0").attr("text-anchor","end").attr("transform",`rotate(${l})`).style("font-size",this.visualSettings.label.fontSize).call(this.truncateLabelsText,this.visualSettings.label.truncateLimit),s=0,t.select(".x-axis").selectAll(".tick").nodes().forEach((t=>{t.getBBox().height>s&&(s=t.getBBox().height)})),e.bottom=s+(this.scrollAble?10:0),a=this.height/this.dimensionsDivisionFactor-e.top-e.bottom,i.range([a,0]),t.select(".x-axis").attr("transform",`translate(0,${a})`),this.visualSettings.chart.yAxisToggle&&(t.select(".y-axis").remove(),t.append("g").attr("class","y-axis").style("color","black").call(n)))}if(this.visualSettings.label.multilineToggle){t.selectAll(".tick text").call(this.wrap,r.bandwidth());let s=0;t.select(".x-axis").selectAll(".tick").nodes().forEach((t=>{t.getBBox().height>s&&(s=t.getBBox().height)})),e.bottom=s+(this.scrollAble?10:7),a=this.height/this.dimensionsDivisionFactor-e.top-e.bottom,i.range([a,0]),t.select(".x-axis").attr("transform",`translate(0,${a})`),this.visualSettings.chart.yAxisToggle&&(t.select(".y-axis").remove(),t.append("g").attr("class","y-axis").style("color","black").call(n))}}appendVerticalBarContainers(t,e,i,n,a){return t.selectAll(".bar").data(e).enter().append("g").attr("class",(t=>`bar ${t.class}`)).attr("fill",((t,n)=>void 0!==t.fillType&&null!==t.fillType&&"pattern"===t.fillType?(this.svg.append("defs").append("pattern").attr("id","hatchedPattern"+n).attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).append("path").attr("d","M-2,2 l4,-4 M0,8 l8,-8 M6,10 l4,-4").attr("stroke",t.color).attr("stroke-width",1),`url(#hatchedPattern${n})`):i.indexOf((e.indexOf(t)+1).toString())>-1?this.visualSettings.bar.customBarColor:t.color)).attr("transform",(t=>`translate(${a(t.name)},0)`)).on("mouseover",((i,a)=>{n.length>0||(t.selectAll(".bar").filter(((t,i)=>i!=e.indexOf(a))).attr("opacity","0.4"),t.select(".x-axis").selectAll(".tick text").filter(((t,i)=>i!=e.indexOf(a))).attr("opacity","0.4"))})).on("mouseout",(()=>{n.length>0||(t.selectAll(".bar").attr("opacity","1"),t.selectAll(".tick text").attr("opacity","1"))})).on("click",((i,a)=>{if(3===i.which)return;i.stopPropagation();const r=i.ctrlKey;return!r&&n.length>0?(this.selectionManager.clear(),n.splice(0,n.length),t.selectAll(".bar").attr("opacity","1"),t.selectAll(".tick text").attr("opacity","1"),void t.selectAll(".tableRow").attr("opacity","1")):n.indexOf(a.identity)>-1&&r?(n.splice(n.indexOf(a.identity),1),0===n.length?(t.selectAll(".bar").attr("opacity","1"),t.selectAll(".tick text").attr("opacity","1"),void this.selectionManager.clear()):(t.selectAll(".bar").filter(((t,i)=>i===e.indexOf(a))).attr("opacity","0.4"),t.selectAll(".tick text").filter(((t,i)=>i===e.indexOf(a))).attr("opacity","0.4"),this.selectionManager.clear(),void this.selectionManager.select(n,!0))):(n.push(a.identity),void this.selectionManager.select(a.identity,r).then((i=>{t.selectAll(".bar").filter((t=>i.indexOf(t.identity)>-1)).attr("opacity","1"),t.selectAll(".tick text").filter(((t,n)=>i.indexOf(e[n].identity)>-1)).attr("opacity","1")})))}))}appendVerticalConnectingLines(t,e,i,n,a,r,s){return t.filter((t=>-1===["firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0]))).filter((t=>{const i=e.filter((t=>t.class.includes("centralMeasure")));return!!this.visualSettings.bar.totalBar||t!=i[i.length-1]})).append("line").classed("connector",!0).attr("stroke",this.visualSettings.bar.totalBarColor).attr("class","connector").attr("x1",i.bandwidth()).attr("y1",(t=>{const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,i=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;return t.class.includes("total")||t.class.includes("subtotal")?s(e):s(i)})).attr("x2",i.bandwidth()/(1-n)).attr("y2",(t=>{const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start;let i=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;return this.visualSettings.limitOutlier.show&&this.visualSettings.bar.totalBar&&a.indexOf(t)===a.length-2&&(i=this.visualSettings.limitOutlier.total?a[a.length-1].normalizedStart:a[a.length-1].start),t.class.includes("total")||t.class.includes("subtotal")?s(e):s(i)})).attr("transform",(t=>{if(null===r||t.class.includes("startingValues")||t.class.includes("subtotal"))return"";const e=r[a.indexOf(t)];return`translate(0, ${Math.abs(s(t.start+(t.value-e.value))-s(t.end))*(e.value>0?1:-1)})`})).attr("stroke-width",.7)}appendVerticalBars(t,e,i,n,a,r,s){return t.append("rect").classed("bar-rect",!0).attr("y",(t=>{const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,a=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;if(null===i||!t.class.includes("centralMeasure")||t.class.includes("subtotal")||t.class.includes("total"))return r(Math.max(e,a));const s=i[n.indexOf(t)],l=t.value>=0&&s.value<0?s.value:0;return r(Math.max(e,a)+l)})).attr("height",(t=>{if(isNaN(t.value))return 0;const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,a=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;if(null===i||!t.class.includes("centralMeasure")||t.class.includes("subtotal")||t.class.includes("total"))return Math.abs(r(e)-r(a));const s=i[n.indexOf(t)],l=t.value>=0&&s.value<0||t.value<=0&&s.value>0?s.value:0;return Math.abs(r(e)-r(a+l))})).attr("width",(t=>null===i||t.class.includes("total")||!t.class.includes("centralMeasure")||t.class.includes("subtotal")?a.bandwidth():a.bandwidth()/2)).attr("stroke",(t=>void 0!==t.borderColor&&null!==t.borderColor&&""!==t.borderColor?t.borderColor:s.indexOf((e.indexOf(t)+1).toString())>-1?this.visualSettings.bar.customBarColor:t.color)).attr("shape-rendering","crispEdges")}appendVerticalReferenceBars(t,e,i,n,a,s,l){return t.filter((t=>t.class.includes("centralMeasure")&&!t.class.includes("subtotal"))).append("rect").classed("bar-rect",!0).attr("y",((t,e)=>{const n=i[e],a=r.W.removeDecimal(this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end),s=t.value<=0&&n.value>0?r.W.removeDecimal(n.value):0;return l(a+s)})).attr("height",(t=>{if(t.class.includes("total"))return 0;const e=i[n.indexOf(t)],a=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,r=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end,s=t.value>0&&e.value>0||t.value<0&&e.value<0?t.value-e.value:t.value;return Math.abs(l(a+s)-l(r))})).attr("transform",((t,e)=>{const n=i[e],a=n.value<0?-Math.abs(l(t.start+(t.value-n.value))-l(t.end)):0;return`translate(${s.bandwidth()/2}, ${a})`})).attr("fill",(t=>a.indexOf(e.indexOf(t).toString())>-1?this.visualSettings.bar.customBarColor:t.value>0?this.visualSettings.sentimentColor.decrease:this.visualSettings.sentimentColor.increase)).attr("width",s.bandwidth()/2).attr("shape-rendering","crispEdges")}configureVerticalBarLabels(t,e,i,n,s,l){let o=null;if(this.visualSettings.bar.labelBackgroundToggle&&(o=e.append("rect").classed("bar-label-background",!0).attr("x",0).attr("y",0).attr("dy","-.5em").attr("fill",this.visualSettings.bar.labelBackgroundColor).attr("opacity",.01*this.visualSettings.bar.transparency).attr("rx",5).attr("ry",5)),e.append("text").classed("bar-text",!0).classed("bar-text-background",!0).attr("x",(t=>t.class.includes("total")||!t.class.includes("centralMeasure")?n.bandwidth()/2:null!==i?n.bandwidth()/4:n.bandwidth()/2)).attr("y",(t=>{const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,n=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;if(null===i||t.class.includes("total")||!t.class.includes("centralMeasure")||t.class.includes("subtotal"))return t.class.includes("positive")||-1!==["startingValues","firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0])&&e<0?s(n):s(e);const a=i[l.indexOf(t)],r=t.value>0&&a.value<0||0===t.value?a.value:0;return t.class.includes("positive")||-1!==["startingValues","firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0])&&e<0?s(n+r):s(e+r)})).text((t=>"total"===t.class.split(" ")[0]&&null!==i?a.WUZ((this.visualSettings.bar.signToggle?"+":"")+".3s")(r.W.removeDecimal(t.value-i.filter((t=>t.class.includes("referenceTotal")))[0].value)):this.formatValue(t.value,this.visualSettings.bar.precision,this.visualSettings.bar.dataUnit))).attr("text-anchor","middle").attr("dy","-1em").style("fill",this.visualSettings.bar.fontColor).style("font-size",this.visualSettings.bar.fontSize).style("font-family",this.visualSettings.bar.fontFamily),this.visualSettings.bar.labelBackgroundToggle){const e=t.selectAll(".bar-text").nodes();o.attr("x",((t,i)=>e[i].getBBox().x-4)).attr("y",((t,i)=>e[i].getBBox().y-2)).attr("width",((t,i)=>e[i].getBBox().width+8)).attr("height",((t,i)=>e[i].getBBox().height+4))}let u=!1;t.selectAll(".bar-text").nodes().forEach((t=>{t.getComputedTextLength()>n.bandwidth()/(null!==i?2:1)&&(u=!0,this.barLabelOverlap=!0)})),u&&(t.selectAll(".bar-text").each((function(){const t=a.Ys(this),e=+t.attr("x"),i=+t.attr("y"),n=`rotate(-90, ${e}, ${i})`;t.attr("transform",n).attr("x",e).attr("y",i).attr("dy","0.5em").attr("dx","2.2em")})),this.visualSettings.bar.labelBackgroundToggle&&t.selectAll(".bar-label-background").remove()),null!==i&&this.configureVerticalReferenceLabels(t,e,i,u,n,s)}appendVerticalAxisBreakSymbols(t,e,i,n){const a=[];if(!this.visualSettings.limitOutlier.total&&a.push("total"),!this.visualSettings.limitOutlier.firstValues&&a.push("firstValues"),!this.visualSettings.limitOutlier.secondLastValues&&a.push("secondLastValues"),!this.visualSettings.limitOutlier.lastValues&&a.push("lastValues"),"gradient"===this.visualSettings.limitOutlier.axisBreakType.toString()){const r=t.append("defs").append("linearGradient").attr("id","axisBreakGradient").attr("gradientTransform","rotate(90)");r.append("stop").attr("offset","0%").attr("stop-color","white").attr("stop-opacity","0"),r.append("stop").attr("offset","50%").attr("stop-color",this.visualSettings.limitOutlier.axisBreakColor).attr("stop-opacity","1"),r.append("stop").attr("offset","100%").attr("stop-color","white").attr("stop-opacity","0"),e.filter((t=>Math.abs(t.value)>this.visualSettings.limitOutlier.outlier&&-1===a.indexOf(t.class.split(" ")[0]))).append("rect").classed("axisBreak",!0).attr("y",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition)).attr("height",this.visualSettings.limitOutlier.axisBreakSize).attr("width",i.bandwidth()).attr("stroke","").attr("fill","url(#axisBreakGradient)").attr("stroke-width","0.5")}else e.filter((t=>Math.abs(t.value)>this.visualSettings.limitOutlier.outlier&&-1===a.indexOf(t.class.split(" ")[0]))).append("line").classed("axisBreakTop",!0).attr("x1",(()=>-5.5)).attr("y1",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition+this.visualSettings.limitOutlier.axisBreakSize/2)).attr("x2",(()=>i.bandwidth()+5.5)).attr("y2",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition+7+this.visualSettings.limitOutlier.axisBreakSize/2)).attr("stroke","white").attr("stroke-width",this.visualSettings.limitOutlier.axisBreakSize).attr("transform",`translate(0 ${-this.visualSettings.limitOutlier.axisBreakSize/2})`),e.filter((t=>Math.abs(t.value)>this.visualSettings.limitOutlier.outlier&&-1===a.indexOf(t.class.split(" ")[0]))).append("line").classed("axisBreakTop",!0).attr("x1",(()=>-5.5)).attr("y1",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition)).attr("x2",(()=>i.bandwidth()+5.5)).attr("y2",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition+7)).attr("stroke","black").attr("stroke-width",1).attr("transform",`translate(0 ${-this.visualSettings.limitOutlier.axisBreakSize/2})`).attr("shape-rendering","optimizeQuality"),e.filter((t=>Math.abs(t.value)>this.visualSettings.limitOutlier.outlier&&-1===a.indexOf(t.class.split(" ")[0]))).append("line").classed("axisBreakTop",!0).attr("x1",(()=>-5.5)).attr("y1",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition+this.visualSettings.limitOutlier.axisBreakSize)).attr("x2",(()=>i.bandwidth()+5.5)).attr("y2",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition+7+this.visualSettings.limitOutlier.axisBreakSize)).attr("stroke","black").attr("stroke-width",1).attr("transform",`translate(0 ${-this.visualSettings.limitOutlier.axisBreakSize/2})`).attr("shape-rendering","optimizeQuality")}configureVerticalReferenceLabels(t,e,i,n,s,l){e.filter((t=>t.class.includes("centralMeasure")&&!t.class.includes("total"))).append("text").classed("bar-text-reference",!0).attr("x",s.bandwidth()/1.32).attr("y",((t,e)=>{const n=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,a=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end,s=i.filter((t=>!t.class.includes("referenceTotal")))[e],o=t.value<0&&s.value>0?r.W.removeDecimal(t.value):t.value<0&&s.value<0?r.W.removeDecimal(t.value-s.value):0===t.value&&0!==s.value?r.W.removeDecimal(s.value):0;return t.class.includes("positive")||-1!==["startingValues","firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0])&&n<0?l(a+o):l(n+o)})).attr("dy","-.5em").text(((t,e)=>a.WUZ((this.visualSettings.bar.signToggle?"+":"")+".3s")(r.W.removeDecimal(i[e].value)))).attr("text-anchor","middle").style("fill",this.visualSettings.bar.fontColor).style("font-size",this.visualSettings.bar.fontSize).style("font-family",this.visualSettings.bar.fontFamily),n=!1,t.selectAll(".bar-text-reference").nodes().forEach((t=>{t.getComputedTextLength()>s.bandwidth()/(null!==i?2:1)&&(n=!0,this.barLabelOverlap=!0)})),n&&t.selectAll(".bar-text-reference").each((function(){const t=a.Ys(this),e=+t.attr("x"),i=+t.attr("y"),n=t.attr("text-anchor"),r=`rotate(-90, ${e}, ${i})`;t.attr("transform",r).attr("x",e).attr("y",i).attr("dy","0.5em").attr("dx","2em").attr("text-anchor",n)}))}insertExtremeValues(t,e,i,n,a,s,l){let o=null;if(null!==n&&0!==n.length){o=this.constructDataPoint(n,this.visualSettings.startingValue.customLabel,"startingValues ",this.visualSettings.startingValue.color,this.visualSettings.startingValue.borderColor,this.visualSettings.startingValue.fillType,l),o.class+=o.start>0?"positive":"negative",o.end=o.start,o.start=0;let e=o.end;t.filter((t=>t.class.includes("centralMeasure")&&!t.class.includes("total")&&!t.class.includes("subtotal"))).forEach((t=>{t.start=e,t.end=t.start+t.value,e+=t.value})),t.filter((t=>t.class.includes("subtotal")||t.class.includes("total"))).forEach((e=>{e.start=t[t.indexOf(e)-1].end,e.value=r.W.removeDecimal(t[t.indexOf(e)-1].end)})),t.splice(0,0,o)}null!==i&&0!==i.length&&(o=this.constructDataPoint(i,this.visualSettings.firstValue.customLabel,"firstValues",this.visualSettings.firstValue.color,this.visualSettings.firstValue.borderColor,this.visualSettings.firstValue.fillType,l),t.splice(0,0,o)),null!==a&&0!==a.length&&(o=this.constructDataPoint(a,this.visualSettings.secondLastValue.customLabel,"secondLastValues",this.visualSettings.secondLastValue.color,this.visualSettings.secondLastValue.borderColor,this.visualSettings.secondLastValue.fillType,l),t.push(o)),null!==s&&0!==s.length&&(o=this.constructDataPoint(s,this.visualSettings.lastValue.customLabel,"lastValues",this.visualSettings.lastValue.color,this.visualSettings.lastValue.borderColor,this.visualSettings.lastValue.fillType,l),t.push(o))}constructDataPoint(t,e,i,n,s,l,o){const u={},h=t.filter((t=>!(this.groupNames.length>0)||t.source.groupName===this.groupNames[o])).map((t=>Number(t.values.reduce(((t,e)=>t+Number(e)))))),c=[...new Set(t.map((t=>t.source.displayName)))];for(let t=0;t<c.length;t++)u[c[t]]=a.WUZ(".3s")(h[t]);const d=h.reduce(((t,e)=>t+e),0);return{name:""===e?Object.keys(u).join(", "):e,start:d,end:0,value:r.W.removeDecimal(d),class:i,color:n,borderColor:s,fillType:l,constituents:u,selected:!1,identity:null}}normalizeData(t){const e=t.filter((t=>t.class.includes("centralMeasure"))),i=t.filter((t=>-1===["firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0])));let n=0;const a=this.visualSettings.limitOutlier.outlier,r=i.filter((t=>Math.abs(t.value)>a)).length;i.filter((t=>Math.abs(t.value)>a)).forEach((t=>{n+=Math.abs(t.value)-a}));const s=n/r;if(i.forEach(((t,e)=>{Math.abs(t.value)>a&&(t.normalizedStart=0==e?0:i[e-1].class.includes("subtotal")?i[e-1].normalizedStart:i[e-1].normalizedEnd,t.normalizedEnd=t.class.includes("negative")?t.normalizedStart-a:t.normalizedStart+a),Math.abs(t.value)<=a&&(t.normalizedStart=0==e?0:i[e-1].class.includes("subtotal")?i[e-1].normalizedStart:i[e-1].normalizedEnd,t.value<0?t.normalizedEnd=0==e?t.value:t.normalizedStart+t.value-s:t.normalizedEnd=0==e?t.value+s:t.normalizedStart+t.value+s)})),t.filter((t=>-1!==["firstValues","lastValues","secondLastValues"].indexOf(t.class.split(" ")[0]))).forEach((t=>{t.normalizedStart=this.visualSettings.limitOutlier[t.class]?Math.abs(t.value)<=a?t.start+s:a:t.start,t.normalizedEnd=t.end})),this.visualSettings.bar.totalBar){const i=e.pop(),n=t[t.indexOf(i)-1];i.normalizedStart=this.visualSettings.limitOutlier.total?n.normalizedEnd:n.end,i.normalizedEnd=0}this.visualSettings.bar.subTotalToggle&&t.filter((t=>t.class.includes("subtotal"))).forEach((e=>{e.normalizedStart=t[t.indexOf(e)-1].normalizedEnd,e.normalizedEnd=0})),1===this.data.indexOf(t)&&console.log(t)}insertLineChart(t,e,i,n,s){let l="";if(this.visualSettings.chart.axisToggle){if(i.forEach((i=>{l=l.concat((i.class.includes("total")||i.class.includes("subtotal")?e(this.visualSettings.limitOutlier.show?i.normalizedStart:i.start):e(this.visualSettings.limitOutlier.show?i.normalizedEnd:i.end))+","+(t(i.name)+t.bandwidth()/2)+" ")})),this.chart[n].append("polyline").attr("points",l).style("fill","none").style("stroke",this.visualSettings.lineChart.fill).style("stroke-width",this.visualSettings.lineChart.thickness).style("mix-blend-mode",this.visualSettings.lineChart.overlapColor.toString()).attr("stroke-linecap",this.visualSettings.lineChart.lineEnding.toString()).attr("stroke-dasharray",this.visualSettings.lineChart.lineStyle.toString()),this.visualSettings.lineChart.areaUnderTheGraph){const a=e(0)+","+(t(i[0].name)+t.bandwidth()/2)+" "+l+" "+e(0)+","+(t(i[i.length-1].name)+t.bandwidth()/2);this.chart[n].append("polygon").attr("points",a).style("fill",this.visualSettings.lineChart.areaColor).style("fill-opacity",this.visualSettings.lineChart.areaOpacity).style("mix-blend-mode",this.visualSettings.lineChart.overlapColor.toString())}if(this.visualSettings.lineChart.showMarkers&&l.trim().split(" ").forEach((t=>{this.chart[n].append("circle").attr("cx",t.split(",")[0]).attr("cy",t.split(",")[1]).attr("r",this.visualSettings.lineChart.markerRadius).attr("stroke",this.visualSettings.lineChart.markerStrokeColor).attr("fill",this.visualSettings.lineChart.markerFillColor).attr("stroke-width",this.visualSettings.lineChart.markerStrokeWidth)})),!this.visualSettings.bar.show){const t=l.trim().split(" ");i.forEach(((e,i)=>{this.chart[n].append("text").attr("x",t[i].split(",")[0]).attr("y",t[i].split(",")[1]).attr("dy","-0.4em").text(a.WUZ(".2s")(e.class.includes("total")||e.class.includes("subtotal")?r.W.removeDecimal((this.visualSettings.limitOutlier.show?e.normalizedStart:e.start)-(this.visualSettings.limitOutlier.show?e.normalizedEnd:e.end)):r.W.removeDecimal((this.visualSettings.limitOutlier.show?e.normalizedEnd:e.end)-(this.visualSettings.limitOutlier.show?e.normalizedStart:e.start)))).attr("text-anchor","right").style("fill",this.visualSettings.bar.fontColor).style("font-size",this.visualSettings.bar.fontSize).attr("transform",`translate(${s.left}, 0)`)}))}}else{if(i.forEach((i=>{l=l.concat(t(i.name)+t.bandwidth()/2+","+(0===i.end?e(this.visualSettings.limitOutlier.show?i.normalizedStart:i.start):e(this.visualSettings.limitOutlier.show?i.normalizedEnd:i.end))+" ")})),this.chart[n].append("polyline").attr("points",l).style("fill","none").style("stroke",this.visualSettings.lineChart.fill).style("stroke-width",this.visualSettings.lineChart.thickness).style("mix-blend-mode",this.visualSettings.lineChart.overlapColor.toString()).attr("stroke-linecap",this.visualSettings.lineChart.lineEnding.toString()).attr("stroke-dasharray",this.visualSettings.lineChart.lineStyle.toString()),this.visualSettings.lineChart.areaUnderTheGraph){const a=t(i[0].name)+t.bandwidth()/2+","+e(0)+" "+l+" "+(t(i[i.length-1].name)+t.bandwidth()/2)+","+e(0);this.chart[n].append("polygon").attr("points",a).style("fill",this.visualSettings.lineChart.areaColor).style("fill-opacity",this.visualSettings.lineChart.areaOpacity).style("mix-blend-mode",this.visualSettings.lineChart.overlapColor.toString())}if(this.visualSettings.lineChart.showMarkers&&l.trim().split(" ").forEach((t=>{this.chart[n].append("circle").attr("cx",t.split(",")[0]).attr("cy",t.split(",")[1]).attr("r",this.visualSettings.lineChart.markerRadius).attr("stroke",this.visualSettings.lineChart.markerStrokeColor).attr("fill",this.visualSettings.lineChart.markerFillColor).attr("stroke-width",this.visualSettings.lineChart.markerStrokeWidth)})),!this.visualSettings.bar.show){const t=l.trim().split(" ");i.forEach(((e,i)=>{this.chart[n].append("text").attr("x",t[i].split(",")[0]).attr("y",t[i].split(",")[1]).attr("dy","-0.4em").text(a.WUZ(".3s")(Math.abs(e.start-e.end))).attr("text-anchor","middle").style("fill",this.visualSettings.bar.fontColor).style("font-size",this.visualSettings.bar.fontSize)}))}}}configureHighlights(t,e){for(let i=1;i<=5;i++){if(4===i&&(!this.visualSettings.bar.totalBar||0===e.filter((t=>t.class.includes("lastValues"))).length))continue;if(5===i&&(0===e.filter((t=>t.class.includes("secondLastValues"))).length||0===e.filter((t=>t.class.includes("lastValues"))).length))continue;const n=this.visualSettings[`highlight${i}`];if(!1===n.show)continue;const a={validIndices:[],startingIndices:4===i?[e.indexOf(e.filter((t=>t.class.includes("total")))[0])+1]:5===i?[e.indexOf(e.filter((t=>t.class.includes("secondLastValues")))[0])+1]:n.startIndices.split(","),endingIndices:4===i||5===i?[e.indexOf(e.filter((t=>t.class.includes("lastValues")))[0])+1]:n.endingIndices.split(","),settings:n};a.startingIndices.forEach(((t,e)=>{isNaN(+t)||isNaN(+a.endingIndices[e])||+t==+a.endingIndices[e]||a.validIndices.push(e)})),a.validIndices.length>0&&(t.top+=20*(a.validIndices.length+1),this.highlights.push(a))}}insertHightlight(t,e,i,n,r,s,l,o,u,h){const c=this.visualSettings;t.forEach(((t,d)=>{const f=this.highlights.filter((t=>this.highlights.indexOf(t)<h)).map((t=>t.validIndices)).reduce(((t,e)=>t+e.length),0),g=+e[t]-1,p=+i[t]-1,v=l[g],m=l[p];if(void 0===v||void 0===m)return;const y=this.chart[o].selectAll(".bar-text").nodes(),b=y[t].getBBox().height,x=y[t].getBBox().width,S=n(v.name)+n.bandwidth()/2,w=n(m.name)+n.bandwidth()/2,A=(v.class.includes("positive")||(v.class.includes("subtotal")||v.class.includes("total"))&&+v.start<0?r(this.visualSettings.limitOutlier.show?v.normalizedEnd:v.end):r(this.visualSettings.limitOutlier.show?v.normalizedStart:v.start))-(this.visualSettings.chart.axisToggle?s.left-1.5*x:0),Z=(m.class.includes("positive")||(m.class.includes("subtotal")||m.class.includes("total"))&&+m.start<0?r(this.visualSettings.limitOutlier.show?m.normalizedEnd:m.end):r(this.visualSettings.limitOutlier.show?m.normalizedStart:m.start))-(this.visualSettings.chart.axisToggle?s.left-1.5*x:0);let k=this.visualSettings.chart.axisToggle?a.Fp7(r.range())+45*(f+(0===d&&0===f?1.75:d)):35*(f+d);this.visualSettings.chart.axisToggle||(k+=this.legendHeight-15,k=k>Z+(s.top-40-b)?Z+(s.top-50*h-b):k);const _=this.computeHighlightCoordinates(s,S,w,A,Z,b,x,k),C=v.value,T=m.value-C,E=Math.abs(T/C*100),B=(T>0?"+":"−")+a.WUZ(".3s")(E)+"%",O=(T>0?"+":"")+a.WUZ(".2s")(T),M=u.useSentimentColor?T>0?this.visualSettings.sentimentColor.increase:this.visualSettings.sentimentColor.decrease:u.fill;(u.startArrow||u.endingArrow)&&this.svg.append("defs").append("marker").attr("id","arrowhead"+h+d).attr("markerWidth",u.arrowSize).attr("markerHeight",u.arrowSize).attr("refX",u.arrowSize/2).attr("refY",u.arrowSize/2).attr("orient","auto-start-reverse").attr("markerUnits","userSpaceOnUse").append("path").attr("d","M0,0 L0,"+u.arrowSize+" L"+u.arrowSize+","+u.arrowSize/2+" z").attr("fill",M);const N=(S+w)/2,D=N-20,z=k-10,V=this.visualSettings.chart.axisToggle?`${s.left}, 0`:"0,"+(20-s.top);this.chart[o].append("polyline").classed("highlightBorder"+h,!0).attr("points",_).style("stroke","white").style("stroke-width","7").style("fill","none").attr("transform",`translate(${V})`),this.appendHighlightLine(o,u,h,_,M,d,V,t),this.appendHighlightBubble(o,u,c,h,t,B,O,20,40,k,N,D,z,V)}))}computeHighlightCoordinates(t,e,i,n,a,r,s,l){return this.visualSettings.chart.axisToggle?n+","+e+" "+l+","+e+" "+l+","+i+" "+a+","+i:e+","+(n+(t.top-40-(this.barLabelOverlap?Math.sqrt(2*Math.pow(s,2)):r)))+" "+e+","+l+" "+i+","+l+" "+i+","+(a+(t.top-40-(this.barLabelOverlap?Math.sqrt(2*Math.pow(s,2)):r)))}appendHighlightLine(t,e,i,n,a,r,s,l){this.chart[t].append("polyline").classed("highlight"+i,!0).attr("points",n).style("stroke",a).style("stroke-width","2").style("fill","none").attr("marker-end",e.endingArrow?`url(#arrowhead${i}${r})`:"").attr("marker-start",e.startArrow?`url(#arrowhead${i}${r})`:"").attr("transform",`translate(${s})`).on("mouseover",(()=>{this.chart[t].selectAll(".highlight"+i).filter(((t,e)=>l!=e)).attr("opacity","0"),this.chart[t].selectAll(".highlightBorder"+i).filter(((t,e)=>l!=e)).attr("opacity","0"),this.chart[t].selectAll(".highlightBadge"+i).filter(((t,e)=>l!=e)).attr("opacity","0")})).on("mouseout",(()=>{this.chart[t].selectAll(".highlight"+i).attr("opacity","1"),this.chart[t].selectAll(".highlightBorder"+i).attr("opacity","1"),this.chart[t].selectAll(".highlightBadge"+i).attr("opacity","1")}))}appendHighlightBubble(t,e,i,n,r,s,l,o,u,h,c,d,f,g){let p=0;const v=this.chart[t].append("g").classed("highlightBadge"+n,!0).on("mouseover",(()=>{this.chart[t].selectAll(".highlight"+n).filter(((t,e)=>r!=e)).attr("opacity","0"),this.chart[t].selectAll(".highlightBorder"+n).filter(((t,e)=>r!=e)).attr("opacity","0"),this.chart[t].selectAll(".highlightBadge"+n).filter(((t,e)=>r!=e)).attr("opacity","0")})).on("mouseout",(()=>{this.chart[t].selectAll(".highlight"+n).attr("opacity","1"),this.chart[t].selectAll(".highlightBorder"+n).attr("opacity","1"),this.chart[t].selectAll(".highlightBadge"+n).attr("opacity","1")})).on("click",(function(){++p;const t=a.Ys(this);1===p&&t.select("text").text(s),2===p&&(t.select("rect").attr("height",2.1*o),t.select("text").text(l),t.append("text").text(s).attr("x",i.chart.axisToggle?h:c).attr("y",i.chart.axisToggle?c+o/.9:h+o/8+o).attr("text-anchor","middle").style("fill",e.fill).style("font-size",e.fontSize).style("font-family",e.fontFamily).attr("transform",`translate(${g})`),"bubble"===e.badgeType&&t.select("rect").attr("rx",u/2).attr("ry",2.1*o/2)),3===p&&(p=0,t.selectAll("text").filter(((t,e)=>0!=e)).remove(),t.select("rect").attr("height",o),t.select("text").text(l))}));v.append("rect").attr("x",this.visualSettings.chart.axisToggle?f:d).attr("y",this.visualSettings.chart.axisToggle?d:f).attr("width",u).attr("height",o).attr("stroke","black").attr("fill","white").attr("transform",`translate(${g})`),v.append("text").text(l).attr("x",this.visualSettings.chart.axisToggle?h:c).attr("y",this.visualSettings.chart.axisToggle?c:h).attr("text-anchor","middle").style("fill",e.fill).style("font-size",e.fontSize).style("font-family",e.fontFamily).attr("transform",`translate(${g})`);const m=v.select("text").node(),y=m.getBBox().width,b=m.getBBox().height;v.select("text").attr("y",m.getBBox().y+1.1*b),v.select("rect").attr("width",1.6*y).attr("height",1.1*b),o=1.1*b,u=1.6*y,v.select("rect").attr("x",this.visualSettings.chart.axisToggle?h-u/2:c-u/2).attr("y",this.visualSettings.chart.axisToggle?c-b/2:h-b/2),"bubble"===e.badgeType&&v.select("rect").attr("rx",y/2).attr("ry",b/2)}populateData(t,e,i,n){t.length>1&&this.visualSettings.chart.axisToggle?this.populateHeirarchichalData(t,e):e.length>0&&t.length>0&&0!==this.groupNames.length?this.populateSmallMultiplesData(n,e):e.length>0&&t.length>0&&0===this.groupNames.length?this.populateDrillableData(t,e,i):this.populateDefaultConfigurationData(e)}populateHeirarchichalData(t,e){this.hierarchichalConfiguration=!0;const i=[];if(!this.retainHeirarchichalState){this.treeExpansionDepth=1,this.expandedNodeIndices=[];const n=t[0].values.length;for(let e=0;e<n;e++){const n=[];t.forEach((t=>{n.push(t.values[e])})),i.push(n)}this.categoriesArray=i,this.heirarchichalCategories=this.convertToHierarchy(i,e[0].values.map((t=>null===t?0:+t)))}console.log(this.heirarchichalCategories);let n=0,a=0;this.data.push([]),this.getExpandableNodes(this.heirarchichalCategories).forEach(((t,e)=>{const i=this.getNodeValue(t);if(null!==t.name&&void 0!==t.name&&""!==t.name||a++,!0===t.expanded&&this.retainHeirarchichalState){const r={name:null!==t.name?t.name:"Blank"+" ".repeat(a),start:0===e?i:this.data[0][e-1].class.includes("subtotal")?this.data[0][e-1].start:this.data[0][e-1].end,end:0,value:i,class:"subtotal centralMeasure",color:this.visualSettings.hierarchy[`L${t.level}`],nodeIndex:t.id,expanded:t.expanded,hierarchyDepth:t.level,isParent:t.children.length>0,selected:!1,identity:null};this.data[0].push(r),n+=0===e?i:0}else{const e={name:null!==t.name?t.name:"Blank"+" ".repeat(a),start:n,end:n+i,value:i,class:"centralMeasure "+(null===i||+i>0?"positive":"negative"),color:null===i||+i>0?this.primaryColor:this.secondaryColor,nodeIndex:t.id,expanded:t.expanded,hierarchyDepth:t.level,isParent:t.children.length>0,parentIndex:null!==t.parent?t.parent.id:null,selected:!1,identity:null};this.data[0].push(e),n+=i}})),this.visualSettings.bar.totalBar&&!this.visualSettings.chart.mergeLastAndTotal&&this.data[0].push({name:this.datasetNames[0],start:n,end:0,value:r.W.removeDecimal(n),class:"total centralMeasure",color:this.visualSettings.bar.totalBarColor,selected:!1,identity:null})}populateSmallMultiplesData(t,e){e.forEach(((e,i)=>{this.data.push([]);let n=0;if(e.values.forEach(((e,a)=>{if(void 0===e)return;const s={name:t.categorical.categories[0].values[a].toString(),start:n,end:n+(null===e?0:r.W.removeDecimal(e)),value:null===e?0:r.W.removeDecimal(e),class:"centralMeasure "+(null===e||+e>0?"positive":"negative"),color:null===e||+e>0?this.primaryColor:this.secondaryColor,selected:!1,identity:null};this.data[i].push(s),n+=null===e?0:+e})),this.visualSettings.bar.totalBar&&!this.visualSettings.chart.mergeLastAndTotal)this.data[i].push({name:"Total",start:n,end:0,value:r.W.removeDecimal(n),class:"total centralMeasure",color:this.visualSettings.bar.totalBarColor,selected:!1,identity:null});else if(this.visualSettings.chart.mergeLastAndTotal){const t=this.data[i][this.data[i].length-1];t.name=t.name+" + Total",t.start=t.value+t.end,t.end=0,t.value=r.W.removeDecimal(t.start),t.class="total centralMeasure totalMerged",t.color=this.visualSettings.bar.totalBarColor,this.data[i][this.data[i].length-2].end=t.start}}))}populateDrillableData(t,e,i){this.seriesConfiguration=!0;let n=0,a=0;t.forEach(((r,s)=>{this.data.push([]);const l=[];let o=0;e.forEach(((e,u)=>{if(o="automatic"===this.visualSettings.bar.subTotalType&&null!=i&&1==+i[0]?+e.values[0]:0,e.values.forEach(((e,u)=>{if(void 0===e)return;const h="automatic"===this.visualSettings.bar.subTotalType&&null!=i&&1==+i[u];let c=null!==r.values[u]?r.values[u].toString():null;null!=c&&""!==c||(n++,c=null!==c?c:"Blank"+n),-1!==l.indexOf(c)&&(a++,c+=a),l.push(c);const d=this.host.createSelectionIdBuilder().withCategory(t[s],u).withMeasure(c).createSelectionId(),f={name:c,start:o,end:h?0:o+(null===e?0:e),value:null===e?0:e,class:h?"subtotal centralMeasure":"centralMeasure "+(null===e||+e>0?"positive":"negative"),color:h?this.visualSettings.bar.subTotalBarColor:null===e||+e>0?this.primaryColor:this.secondaryColor,identity:d,selected:!1};this.data[s].push(f),o+=null===e||h?s:+e})),this.visualSettings.bar.totalBar&&!this.visualSettings.chart.mergeLastAndTotal)this.data[s].push({name:this.datasetNames[u],start:o,end:s,value:o,class:"total centralMeasure",color:this.visualSettings.bar.totalBarColor,selected:!1,identity:null});else if(this.visualSettings.chart.mergeLastAndTotal){const t=this.data[s][this.data[s].length-1];t.name=t.name+" + Total",t.start=t.value+t.end,t.end=s,t.value=t.start,t.class="total centralMeasure totalMerged",t.color=this.visualSettings.bar.totalBarColor,this.data[s][this.data[s].length-2].end=t.start}}))})),this.data=[this.data[this.data.length-1]]}populateDefaultConfigurationData(t){this.visualSettings.table.header=!1,this.visualSettings.table.headerSymbols=!1,this.data.push([]);let e=0;t.forEach((t=>{if(null===t.values[0]||void 0===t.values[0])return;const i={name:void 0===t.source.groupName?t.source.displayName:t.source.groupName,start:e,end:e+t.values[0],value:t.values[0],class:"centralMeasure "+(+t.values[0]>0?"positive":"negative"),color:+t.values[0]>0?this.primaryColor:this.secondaryColor,selected:!1,identity:null};this.data[0].push(i),e+=+t.values[0]})),this.visualSettings.bar.totalBar&&!this.visualSettings.chart.mergeLastAndTotal&&this.data[0].push({name:"Total",start:e,end:0,value:e,class:"total centralMeasure",color:this.visualSettings.bar.totalBarColor,selected:!1,identity:null})}configureVisualDimensions(t,e){if(0!==this.groupNames.length&&t.length>4)a.Ys(this.svg.node().parentElement).style("overflow-y","auto").style("overflow-x","hidden").style("height","100%");else if(0===this.groupNames.length&&this.countElements(t)>30&&e.length<=1)this.scrollAble=!0,this.visualSettings.chart.axisToggle?(this.svg.attr("height",this.height*this.countElements(t)/30),a.Ys(this.svg.node().parentElement).style("overflow-y","auto").style("overflow-x","hidden").style("height","100%"),this.height=+this.svg.attr("height")):(this.svg.attr("width",this.width*this.countElements(t)/30),a.Ys(this.svg.node().parentElement).style("overflow-x","auto").style("overflow-y","hidden").style("height","100%"),this.width=+this.svg.attr("width"));else if(!this.visualSettings.chart.axisToggle&&e.length>1&&this.countElements(t)>20)this.scrollAble=!0,this.svg.attr("width",this.width*this.countElements(t)/20),a.Ys(this.svg.node().parentElement).style("overflow-x","auto").style("overflow-y","hidden").style("height","100%"),this.width=+this.svg.attr("width");else if(this.getExpandableNodes(this.heirarchichalCategories).length>20){this.scrollAble=!0;const t=a.Ys(this.svg.node().parentElement).node().getBoundingClientRect().height;this.svg.attr("height",t*this.getExpandableNodes(this.heirarchichalCategories).length/20),a.Ys(this.svg.node().parentElement).style("overflow-y","auto").style("overflow-x","hidden").style("height","100%"),this.height=+this.svg.attr("height")}else if(t[0].values.length>20&&e.length<=1)this.scrollAble=!0,this.visualSettings.chart.axisToggle?(this.svg.attr("height",this.height*t[0].values.length/20),a.Ys(this.svg.node().parentElement).style("overflow-y","auto").style("overflow-x","hidden").style("height","100%"),this.height=+this.svg.attr("height")):(this.svg.attr("width",this.width*t[0].values.length/20),a.Ys(this.svg.node().parentElement).style("overflow-x","auto").style("overflow-y","hidden").style("height","100%"),this.width=+this.svg.attr("width"));else if(this.hierarchichalConfiguration){if(a.Ys(this.svg.node().parentElement).style("overflow","hidden"),this.visualSettings.chart.axisToggle){const t=a.Ys(this.svg.node().parentElement).node().getBoundingClientRect().height;console.log(t),this.svg.attr("height",t),this.height=t}else{const t=a.Ys(this.svg.node().parentElement).node().getBoundingClientRect().width;this.svg.attr("width",t),this.width=+this.svg.attr("width")}a.Ys(this.svg.node().parentElement).style("height",null)}else a.Ys(this.svg.node().parentElement).style("overflow","hidden"),a.Ys(this.svg.node().parentElement).style("height",null)}populateReferenceData(t,e,i){if(t.forEach(((t,i)=>{this.referenceData.push([]);let n=0;t.values.forEach(((a,r)=>{if(void 0===a)return;const s={name:void 0!==e.categorical.categories?e.categorical.categories[0].values[r].toString():t.source.displayName,start:n,end:n+(null===a?0:a),value:null===a?0:a,class:"centralMeasure "+(null===a||+a>0?"positive":"negative"),color:null===a||+a>0?this.primaryColor:this.secondaryColor,selected:!1,identity:null};this.referenceData[i].push(s),n+=null===a?0:+a})),this.visualSettings.bar.totalBar&&!this.visualSettings.chart.mergeLastAndTotal&&this.referenceData[i].push({name:"Reference Total",start:n,end:0,value:n,class:"referenceTotal centralMeasure",color:this.visualSettings.bar.totalBarColor,selected:!1,identity:null})})),void 0===e.categorical.categories){const t=this.referenceData[0].slice();for(let e=0;e<i.length-1;e++)this.referenceData[0].push(...t)}this.seriesConfiguration&&this.referenceData.forEach((t=>{const e=t.slice();for(let n=0;n<i.length-1;n++)t.push(...e)}))}populateTableValues(t,e,i){t.forEach(((t,i)=>{this.tableData.push([]);let n=0;t.values.forEach(((t,a)=>{if(null==t)return;const s={name:e.categorical.categories[0].values[a].toString(),start:n,end:n+r.W.removeDecimal(t),value:r.W.removeDecimal(t),class:"centralMeasure "+(+t>0?"positive":"negative"),color:+t>0?this.secondaryColor:this.primaryColor,selected:!1,identity:null};this.tableData[i].push(s),n+=null===t?0:+t})),this.visualSettings.bar.totalBar&&!this.visualSettings.chart.mergeLastAndTotal&&this.tableData[i].push({name:"Table Total",start:n,end:0,value:r.W.removeDecimal(n),class:"referenceTotal centralMeasure",color:this.visualSettings.bar.totalBarColor,selected:!1,identity:null})})),this.seriesConfiguration&&this.tableData.forEach((t=>{const e=t.slice();for(let n=0;n<i.length-1;n++)t.push(...e)}))}configureGrid(t){let e=0;for(let i=0;i<t.length/this.dimensionsDivisionFactor;i++){const t=this.svg.append("g").classed("gridRow",!0).attr("transform",this.groupNames.length>0?`translate(0, ${15*(i+1)})`:"");for(let n=0;n<this.dimensionsDivisionFactor;n++)t.append("g").classed(`c${e}`,!0).attr("transform",`translate(${this.width/this.dimensionsDivisionFactor*n},${this.height/this.dimensionsDivisionFactor*i})`).attr("fill","none"),++e}}mutateDataForReference(t,e,i){let n=t[0].start;const r=t.filter((t=>!t.class.includes("total"))),s=null!=e?e.filter((t=>!t.class.includes("referenceTotal"))):null;if(t.filter((t=>!t.class.includes("total"))).forEach(((t,e)=>{const i=s[e],l={};l[this.categoryName]=t.name,l[this.datasetNames[0]]=t.value.toString(),l[this.datasetNames[this.datasetNames.length-1]]=i.value.toString(),l["Absolute Variance"]=(t.value-i.value).toString(),l["Variance in %"]=a.WUZ(".2s")((t.value-i.value)/t.value*100)+"%",t.constituents=l,i.value>0&&t.value>0||i.value<0&&t.value<0?(t.start=n,t.end=t.value+t.start,n+=t.value-i.value):i.value>0&&t.value<0||i.value<0&&t.value>0?(t.start=n,t.end=-i.value+t.value+t.start,n+=-i.value+t.value):(0===i.value&&0!==t.value||0!==i.value&&0===t.value)&&(t.start=n,t.end=t.value-i.value+t.start,n+=-i.value+t.value),t.constituents.Result=0===e?t.constituents["Absolute Variance"]:(+r[e-1].constituents.Result+ +t.constituents["Absolute Variance"]).toString()})),this.visualSettings.bar.totalBar&&!this.seriesConfiguration){const i=t[t.length-2],n=e[e.length-2],r=this.compressionCheck(i,n),s=t[t.length-1],l=e[e.length-1];s.start=i.end-(r?n.value:0);const o={};o[this.categoryName]="Net Result",o[`Total(${this.datasetNames[0]})`]=s.value.toString(),o[`Total(${this.datasetNames[1]})`]=l.value.toString(),o["Absolute Variance"]=(s.value-l.value).toString(),o["Variance in %"]=a.WUZ(".2s")((s.value-l.value)/s.value*100)+"%",o.Result=(s.value-l.value).toString(),s.constituents=o}else if(this.visualSettings.bar.totalBar&&this.seriesConfiguration){const t=e[e.length-1],n=e[e.length-2],r=i.filter((t=>t.class.includes("total"))).map((t=>t.name));i.filter((t=>t.class.includes("total"))).forEach((e=>{const s=i[i.indexOf(e)-1],l=this.compressionCheck(s,n);e.start=s.end-(l?n.value:0);const o={};o[this.categoryName]="Net Result",o[`${e.name}`]=e.value.toString(),o[`${this.datasetNames.filter((t=>-1===r.indexOf(t)))[0]}`]=t.value.toString(),o["Absolute Variance"]=(e.value-t.value).toString(),o["Variance in %"]=a.WUZ(".2s")((e.value-t.value)/e.value*100)+"%",o.Result=(e.value-t.value).toString(),e.constituents=o}))}this.visualSettings.bar.subTotalToggle&&i.filter((t=>t.class.includes("subtotal"))).forEach((n=>{const a=i[i.indexOf(n)-1],r=e[t.indexOf(a)];n.start=a.end-(this.compressionCheck(a,r)?r.value:0),n.value=+a.end}))}configureLegend(t,e,i){const n=this.visualSettings.legend.markerSize,a=2*n+5,r=[[...new Set(this.datasetNames.slice(0,this.datasetNames.length-(null!=t?1:0)))].join(", ")];null!=t&&r.push(this.datasetNames[this.datasetNames.length-1]);const s=[this.visualSettings.sentimentColor.increase,this.visualSettings.sentimentColor.decrease],l=this.svg.append("g").attr("class","legend").attr("transform","translate(10, 10)"),o=l.selectAll(".legend-item").data(r).enter().append("g").attr("class","legend-item");o.append("circle").attr("cx",n).attr("cy",n).attr("r",n).style("fill",((t,e)=>s[e])),o.append("text").attr("x",a).attr("y",n).attr("alignment-baseline","middle").text((t=>t)).style("font-size",this.visualSettings.legend.fontSize).style("font-family",this.visualSettings.legend.fontFamily).attr("fill",this.visualSettings.legend.fontColor).attr("transform",`translate(0, ${n/4})`),o.attr("transform",((t,e)=>{let i=0;return o.nodes().slice(0,e).forEach((t=>{i+=t.getBBox().width})),`translate(${i+10*e}, 0)`})),this.legendHeight=l.node().getBBox().height+10,-1!==[0,1].indexOf(i)&&(e.top+=this.legendHeight+(null!=t?30*this.visualSettings.bar.fontSize/12:0))}handleSkewedData(t){const e=a.VV$(t,(t=>t.start)),i=a.VV$(t,(t=>t.end)),n=a.Fp7(t,(t=>t.start)),r=a.Fp7(t,(t=>t.end)),s=a.VV$([i,e]),l=a.Fp7([n,r]);this.visualSettings.limitOutlier.outlier<s||this.visualSettings.limitOutlier.outlier>l?this.visualSettings.limitOutlier.show=!1:(this.visualSettings.chart.yAxisToggle=!1,this.normalizeData(t))}configureChartForHorizontalOrientation(t,e,i,n,r,s,l,o,u,h,c,d){r.left=this.visualSettings.table.show?8:50;const f=this.highlights.map((t=>t.validIndices)).reduce(((t,e)=>t+e.length),0);r.right=(this.visualSettings.table.show?50:100)+(f>0?45*f:0),r.top=25+this.legendHeight,r.bottom=25,this.hierarchichalConfiguration&&this.configureHierarchichalConfigurationElements(i,r,n),null!=d&&(r.top+=d.node().getBBox().height+(this.visualSettings.table.show&&this.visualSettings.table.header&&this.visualSettings.table.headerSymbols?35:0)),o=this.height/this.dimensionsDivisionFactor-r.top-r.bottom-(null!=d?15:0);const g=a.tiA().rangeRound([0,o]).padding(u).domain(t.map((t=>t.name)));let p=0;const v=[];this.columnUpdateContainer=null,this.visualSettings.table.show&&(p=this.configureTable(t,e,g,i,r,n,null,null,null,v,null,null,null)),l=this.width/this.dimensionsDivisionFactor-r.left-r.right-p;const m=a.BYU().range([0,l]).domain([s.globalMinimum,s.globalMaximum]),y=this.svg.select(`.c${i}`).append("g").classed("chart",!0).attr("transform",`translate(${r.left/this.dimensionsDivisionFactor+p},${r.top/this.dimensionsDivisionFactor})`);this.chart.push(y);const b=a.y4O(g);if(this.visualSettings.table.show&&b.tickFormat((()=>"")),y.append("g").attr("class","x-axis").style("color","black").call(b).selectAll(".tick").select("text").style("font-size",this.visualSettings.label.fontSize).style("color",this.visualSettings.label.color).style("font-family",this.visualSettings.label.fontFamily),a.td_(".x-axis").select(".domain").remove(),a.td_(".x-axis").selectAll(".tick line").remove(),this.visualSettings.chart.yAxisToggle&&y.append("g").attr("class","y-axis").style("color","black").call(a.LLu(m)).attr("transform",`translate(0, ${o})`),!this.visualSettings.table.show){let t=0;y.select(".x-axis").selectAll(".tick").nodes().forEach((e=>{e.getBBox().width>t&&(t=e.getBBox().width)})),t>r.left&&(r.left=t,l=this.width/this.dimensionsDivisionFactor-r.left-r.right,m.range([0,l]),y.select(".y-axis").remove(),y.attr("transform",`translate(${r.left/this.dimensionsDivisionFactor+11},${r.top/this.dimensionsDivisionFactor})`),this.visualSettings.chart.yAxisToggle&&y.append("g").attr("class","y-axis").style("color","black").call(a.LLu(m)).attr("transform",`translate(0, ${o})`))}this.visualSettings.label.overlapMitigation&&(this.visualSettings.label.horizontalPosition=-3,this.visualSettings.label.verticalPosition=2,y.select(".x-axis").selectAll(".tick text").attr("dy",.1*this.visualSettings.label.horizontalPosition+"em").attr("dx",.1*this.visualSettings.label.verticalPosition+"em").attr("y","0").attr("text-anchor","end").attr("transform",`rotate(-${this.visualSettings.label.rotationAngle})`).style("font-size",this.visualSettings.label.fontSize).call(this.truncateLabelsText,this.visualSettings.label.truncateLimit)),this.visualSettings.label.boldLabelToggle&&y.selectAll(".tick text").call(this.boldenLabels,this.visualSettings.label.boldAllLabels,this.visualSettings.label.boldLabelIndices,this.visualSettings.label.multilineToggle),this.visualSettings.chart.originToggle&&y.append("line").classed("axis",!0).attr("stroke","black").attr("class","axis").attr("y1",0).attr("x1",m(0)).attr("y2",o).attr("x2",m(0));let x=[];const S=this.configureHorizontalBarContainers(y,t,c,e,null,null,null,null,null,v,null,x);if(this.svg.on("click",(t=>{t.ctrlKey||3===t.which||(x=[],this.selectionManager.clear().then((()=>{y.selectAll(".bar").attr("opacity","1"),y.selectAll(".tick text").attr("opacity","1"),y.selectAll(".tableRow").attr("opacity","1")})))})),this.visualSettings.table.show){let e=[];v.length>0&&(e=e.concat(v)),e.forEach((i=>{this.applyHoverEventsToColumn(i,t,y,e),this.tooltipServiceWrapper.addTooltip(i,(t=>this.getTooltipData(t)),(t=>t.identity))}))}if(this.visualSettings.lineChart.show&&this.insertLineChart(g,m,t,i,r),this.visualSettings.bar.show){const i=this.appendHorizontalConnectingLines(S,t,g,m,h,e,u);i.empty()||i.attr("shape-rendering","crispEdges"),this.appendHorizontalBars(S,t,e,h,g,m,c),null!==e&&this.appendHorizontalReferenceBars(S,t,e,c,g,m,h).attr("stroke",(function(){return a.Ys(this).attr("fill")})),this.visualSettings.bar.labelToggle&&this.configureHorizontalBarLabels(y,S,e,g,m,h),this.visualSettings.limitOutlier.show&&this.visualSettings.limitOutlier.axisBreakToggle&&this.appendHorizontalAxisBreakSymbols(y,S,g,m)}this.configureTooltipsForHorizontalOrientation(y,S,t),this.highlights.forEach(((e,n)=>{e.startingIndices!=e.endingIndices&&e.validIndices.length>0&&this.insertHightlight(e.validIndices,e.startingIndices,e.endingIndices,g,m,r,t,i,e.settings,n)}))}configureHierarchichalConfigurationElements(t,e,i){const n=this.svg.select(`.c${t}`).append("g").append("text").attr("id",`expandAllButtom${t}`).text("+").attr("fill","black").attr("x",0).attr("y",0).attr("font-size","20px").attr("font-weight","bold").attr("cursor","pointer").attr("transform",`translate(${e.left/this.dimensionsDivisionFactor}, ${e.top/this.dimensionsDivisionFactor})`).on("click",(()=>{this.treeExpansionDepth!==this.categoriesArray.length&&(this.expandAllNodes(this.heirarchichalCategories),this.retainHeirarchichalState=!0,++this.treeExpansionDepth,this.updateView(i))})).on("mouseover",(()=>{n.attr("fill","blue"),n.attr("font-size","25px")})).on("mouseout",(()=>{n.attr("fill","black"),n.attr("font-size","20px")})),a=this.svg.select(`.c${t}`).append("g").append("text").attr("id",`collapseAllButtom${t}`).text("−").attr("fill","black").attr("x",0).attr("y",0).attr("font-size","20px").attr("font-weight","bold").attr("cursor","pointer").attr("transform",`translate(${e.left/this.dimensionsDivisionFactor+20}, ${e.top/this.dimensionsDivisionFactor})`).on("click",(()=>{this.retainHeirarchichalState=!1,this.updateView(i)})).on("mouseover",(()=>{a.attr("fill","blue"),a.attr("font-size","25px")})).on("mouseout",(()=>{a.attr("fill","black"),a.attr("font-size","20px")}));e.top+=n.node().getBBox().height}configureTable(t,e,i,n,a,r,s,l,o,u,h,c,d){let f=0,g=0;const p=[];p.push([]),t.forEach((t=>{p.push(t.class.includes("centralMeasure")?[t.name]:[Object.keys(t.constituents).join(", ")])}));const v=this.svg.select(`.c${n}`).selectAll(".tableRows").data(p).enter().append("g").classed("tableRow",!0);if(console.log(v),this.hierarchichalConfiguration&&(g=this.configureHierarchichalView(v,t,i,a,r)),g=this.insertTableColumn(v,s,g,t,i,a.top,p,this.categoryName,f),s=this.columnUpdateContainer,this.visualSettings.table.measureValues&&(++f,p.filter(((t,e)=>0!==e)).forEach(((e,i)=>{e.push((t[i].class.includes("centralMeasure"),t[i].value.toString()))})),g=this.insertTableColumn(v,l,g,t,i,a.top,p,this.datasetNames[0],f,this.visualSettings.table.measureSymbolType.toString(),this.visualSettings.table.measureSymbolColor),l=this.columnUpdateContainer),this.tableData.length>0&&this.tableData.forEach(((e,n)=>{++f,p.filter(((t,e)=>0!==e)).forEach(((t,i)=>{t.push((e[i].class.includes("centralMeasure"),e[i].value.toString()))})),g=this.insertTableColumn(v,null,g,t,i,a.top,p,this.tableValuesNames[n],f,"line","black"),u.push(this.columnUpdateContainer)})),null!==e){const e=this.visualSettings.table;e.reference&&(++f,p.filter(((t,e)=>0!==e)).forEach(((e,i)=>{e.push(t[i].class.includes("centralMeasure")?t[i].constituents[this.datasetNames[this.datasetNames.length-1]]:"")})),g=this.insertTableColumn(v,o,g,t,i,a.top,p,this.datasetNames[this.datasetNames.length-1],f,this.visualSettings.table.referenceSymbolType.toString(),e.referenceSymbolColor),o=this.columnUpdateContainer),e.absoluteVariance&&(++f,p.filter(((t,e)=>0!==e)).forEach(((e,i)=>{e.push(!t[i].class.includes("centralMeasure")||t[i].class.includes("startingValue")?"":t[i].constituents["Absolute Variance"])})),g=this.insertTableColumn(v,h,g,t,i,a.top,p,"Δabs",f,this.visualSettings.table.absVarSymbolType.toString(),e.absVarSymbolColor),h=this.columnUpdateContainer),e.percentageVariance&&(++f,p.filter(((t,e)=>0!==e)).forEach(((e,i)=>{e.push(!t[i].class.includes("centralMeasure")||t[i].class.includes("startingValue")?"":t[i].constituents["Variance in %"])})),g=this.insertTableColumn(v,c,g,t,i,a.top,p,"Δ%",f,this.visualSettings.table.percentVarSymbolType.toString(),e.percentVarSymbolColor),c=this.columnUpdateContainer),e.result&&(++f,p.filter(((t,e)=>0!==e)).forEach(((e,i)=>{e.push(t[i].class.includes("centralMeasure")?t[i].constituents.Result:"")})),g=this.insertTableColumn(v,d,g,t,i,a.top,p,"Result",f,this.visualSettings.table.resultSymbolType.toString(),e.resultSymbolColor),d=this.columnUpdateContainer)}return g}configureHorizontalBarContainers(t,e,i,n,a,r,s,l,o,u,h,c){const d=t.selectAll(".bar").data(e).enter().append("g").attr("class",(t=>`bar ${t.class}`)).attr("fill",((t,n)=>void 0!==t.fillType&&null!==t.fillType&&"pattern"===t.fillType?(this.svg.append("defs").append("pattern").attr("id","hatchedPattern"+n).attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).append("path").attr("d","M-2,2 l4,-4 M0,8 l8,-8 M6,10 l4,-4").attr("stroke",t.color).attr("stroke-width",1),`url(#hatchedPattern${n})`):i.indexOf((e.indexOf(t)+1).toString())>-1?this.visualSettings.bar.customBarColor:t.color));return this.handleClickOnHorizontalBarContainers(d,c,t,e),this.handleHoverForHorizontalBarContainers(d,t,e,n,a,r,s,l,o,u,h,c),d}handleHoverForHorizontalBarContainers(t,e,i,n,a,r,s,l,o,u,h,c){t.on("mouseover",((t,n)=>{c.length>0||(e.selectAll(".bar").filter(((t,e)=>e!=i.indexOf(n))).attr("opacity","0.4"),e.selectAll(".tick text").filter(((t,e)=>e!=i.indexOf(n))).attr("opacity","0.4"),this.visualSettings.table.show&&this.svg.selectAll(".tableRow").filter(((t,e)=>0!==e&&e-1!==i.indexOf(n))).attr("opacity","0.4"))})).on("mouseout",(()=>{c.length>0||(e.selectAll(".bar").attr("opacity","1"),e.selectAll(".tick text").attr("opacity","1"),this.visualSettings.table.show&&this.svg.selectAll(".tableRow").attr("opacity","1"))}))}handleClickOnHorizontalBarContainers(t,e,i,n){t.on("click",((t,a)=>{if(3===t.which)return;t.stopPropagation();const r=t.ctrlKey;return!r&&e.length>0?(this.selectionManager.clear(),e=[],i.selectAll(".bar").attr("opacity","1"),i.selectAll(".tick text").attr("opacity","1"),void i.selectAll(".tableRow").attr("opacity","1")):e.indexOf(a.identity)>-1?(e.splice(e.indexOf(a.identity),1),0===e.length?(i.selectAll(".bar").attr("opacity","1"),i.selectAll(".tick text").attr("opacity","1"),i.selectAll(".tableRow").attr("opacity","1"),void this.selectionManager.clear()):(i.selectAll(".bar").filter(((t,e)=>e===n.indexOf(a))).attr("opacity","0.4"),i.selectAll(".tick text").filter(((t,e)=>e===n.indexOf(a))).attr("opacity","0.4"),this.svg.selectAll(".tableRow").filter(((t,e)=>0!==e&&e-1===n.indexOf(a))).attr("opacity","0.4"),void this.selectionManager.clear().then((()=>{this.selectionManager.select(e,!0)})))):(e.push(a.identity),void this.selectionManager.select(a.identity,r).then((t=>{i.selectAll(".bar").filter((e=>-1===t.indexOf(e.identity))).attr("opacity","0.4"),i.select(".x-axis").selectAll(".tick text").filter(((e,i)=>-1===t.indexOf(n[i].identity))).attr("opacity","0.4"),console.log(n),this.svg.selectAll(".tableRow").filter(((e,i)=>0!==i&&-1===t.indexOf(n[i-1].identity))).attr("opacity","0.4"),i.selectAll(".bar").filter((e=>t.indexOf(e.identity)>-1)).attr("opacity","1"),i.selectAll(".tick text").filter(((e,i)=>t.indexOf(n[i].identity)>-1)).attr("opacity","1"),this.svg.selectAll(".tableRow").filter(((e,i)=>0!==i&&t.indexOf(n[i-1].identity)>-1)).attr("opacity","1")})))}))}appendHorizontalConnectingLines(t,e,i,n,a,r,s){return t.filter((t=>-1===["firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0]))).filter((t=>!!this.visualSettings.bar.totalBar||t!=e.filter((t=>t.class.includes("centralMeasure"))).pop())).append("line").classed("connector",!0).attr("stroke",this.visualSettings.bar.totalBarColor).attr("class","connector").attr("x1",(t=>{const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,i=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;return t.class.includes("total")||t.class.includes("subtotal")?n(e):n(i)})).attr("y1",(t=>i(t.name)+i.bandwidth())).attr("x2",(t=>{const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start;let i=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;return this.visualSettings.limitOutlier.show&&this.visualSettings.bar.totalBar&&a.indexOf(t)===a.length-2&&(i=this.visualSettings.limitOutlier.total?a[a.length-1].normalizedStart:a[a.length-1].start),t.class.includes("total")||t.class.includes("subtotal")?n(e):n(i)})).attr("y2",(t=>i(t.name)+i.bandwidth()/(1-s))).attr("transform",(t=>{if(null===r||t.class.includes("startingValues")||t.class.includes("subtotal"))return"";const e=r[a.indexOf(t)];return`translate(${Math.abs(n(t.start+(t.value-e.value))-n(t.end))*(e.value>0?-1:1)}, 0)`})).attr("stroke-width",.7)}appendHorizontalBars(t,e,i,n,a,r,s){t.append("rect").classed("bar-rect",!0).attr("x",(t=>{const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,a=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;if(null===i||!t.class.includes("centralMeasure")||t.class.includes("subtotal")||t.class.includes("total"))return r(Math.min(e,a));const s=i[n.indexOf(t)],l=t.value<=0&&s.value>0?s.value:0;return r(Math.min(e,a)+l)})).attr("y",(t=>a(t.name))).attr("width",(t=>{if(isNaN(t.value))return 0;const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,a=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;if(null===i||!t.class.includes("centralMeasure")||t.class.includes("subtotal")||t.class.includes("total"))return Math.abs(r(e)-r(a));const s=i[n.indexOf(t)],l=t.value>0&&s.value<0||t.value<0&&s.value>0||0===t.value?s.value:0;return Math.abs(r(e)-r(a+l))})).attr("height",(t=>null===i||t.class.includes("total")||!t.class.includes("centralMeasure")||t.class.includes("subtotal")?a.bandwidth():a.bandwidth()/2)).attr("stroke",(t=>void 0!==t.borderColor&&null!==t.borderColor&&""!==t.borderColor?t.borderColor:s.indexOf((e.indexOf(t)+1).toString())>-1?this.visualSettings.bar.customBarColor:t.color)).attr("shape-rendering","crispEdges")}appendHorizontalReferenceBars(t,e,i,n,a,r,s){return t.filter((t=>t.class.includes("centralMeasure")&&!t.class.includes("subtotal"))).append("rect").classed("bar-rect",!0).attr("x",((t,e)=>{const n=i[e],a=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end,s=t.value>0&&n.value<0?n.value:0;return r(a+s)})).attr("y",(t=>a(t.name))).attr("width",((t,e)=>{if(t.class.includes("total"))return 0;const n=i[e],a=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,s=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end,l=t.value>0&&n.value>0||t.value<0&&n.value<0?t.value-n.value:t.value;return Math.abs(r(a+l)-r(s))})).attr("transform",((t,e)=>{const n=i[e];return`translate(${t.value>0&&0!=n.value?-Math.abs(r(t.start+(t.value-n.value))-r(t.end)):0}, ${a.bandwidth()/2})`})).attr("fill",(t=>n.indexOf((e.indexOf(t)+1).toString())>-1?this.visualSettings.bar.customBarColor:t.value>0?this.visualSettings.sentimentColor.decrease:this.visualSettings.sentimentColor.increase)).attr("height",a.bandwidth()/2).attr("stroke",(t=>i[s.indexOf(t)].color)).attr("shape-rendering","crispEdges")}configureHorizontalBarLabels(t,e,i,n,s,l){let o=null;if(this.visualSettings.bar.labelBackgroundToggle&&(o=e.append("rect").classed("bar-label-background",!0).attr("x",0).attr("y",0).attr("dy","-.5em").attr("fill",this.visualSettings.bar.labelBackgroundColor).attr("opacity",.01*this.visualSettings.bar.transparency).attr("rx",5).attr("ry",5)),e.append("text").classed("bar-text",!0).attr("y",(t=>n(t.name))).attr("x",(t=>{const e=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,n=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end;if(null===i||t.class.includes("total")||t.class.includes("subtotal")||!t.class.includes("centralMeasure"))return t.class.includes("positive")||-1!==["startingValues","firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0])&&e<0?s(n):s(e);const a=i[l.indexOf(t)],r=t.value>0&&a.value<0||0===t.value?a.value:0;return t.class.includes("positive")||-1!==["startingValues","firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0])&&e<0?s(n+r):s(e+r)})).attr("dy",(t=>null===i||t.class.includes("total")||!t.class.includes("centralMeasure")?n.bandwidth()/1.8:n.bandwidth()/3.5)).attr("dx","0.5em").text((t=>"total"===t.class.split(" ")[0]&&null!==i?a.WUZ((this.visualSettings.bar.signToggle?"+":"")+".3s")(r.W.removeDecimal(t.value-i.filter((t=>t.class.includes("referenceTotal")))[0].value)):a.WUZ((this.visualSettings.bar.signToggle?"+":"")+".3s")(r.W.removeDecimal(t.value)))).style("fill",this.visualSettings.bar.fontColor).style("font-size",this.visualSettings.bar.fontSize).style("font-family",this.visualSettings.bar.fontFamily),this.visualSettings.bar.labelBackgroundToggle){const e=t.selectAll(".bar-text").nodes();o.attr("x",((t,i)=>e[i].getBBox().x-4)).attr("y",((t,i)=>e[i].getBBox().y-2)).attr("width",((t,i)=>e[i].getBBox().width+8)).attr("height",((t,i)=>e[i].getBBox().height+4))}null!==i&&e.filter((t=>t.class.includes("centralMeasure")&&!t.class.includes("total"))).append("text").classed("bar-text-reference",!0).attr("y",(t=>n(t.name))).attr("x",((t,e)=>{const n=this.visualSettings.limitOutlier.show?t.normalizedStart:t.start,a=this.visualSettings.limitOutlier.show?t.normalizedEnd:t.end,l=i.filter((t=>!t.class.includes("referenceTotal")))[e],o=t.value<0&&l.value>0?r.W.removeDecimal(t.value):t.value<0&&l.value<0?r.W.removeDecimal(t.value-l.value):0===t.value?l.value:0;return t.class.includes("positive")||-1!==["startingValues","firstValues","lastValues","secondLastValues","total"].indexOf(t.class.split(" ")[0])&&n<0?s(a+o):s(n+o)})).attr("dy",n.bandwidth()/1.22).attr("dx","0.5em").text(((t,e)=>a.WUZ((this.visualSettings.bar.signToggle?"+":"")+".3s")(r.W.removeDecimal(i[e].value)))).style("fill",this.visualSettings.bar.fontColor).style("font-size",this.visualSettings.bar.fontSize).style("font-family",this.visualSettings.bar.fontFamily)}appendHorizontalAxisBreakSymbols(t,e,i,n){const a=[];if(!this.visualSettings.limitOutlier.total&&a.push("total"),!this.visualSettings.limitOutlier.firstValues&&a.push("firstValues"),!this.visualSettings.limitOutlier.secondLastValues&&a.push("secondLastValues"),!this.visualSettings.limitOutlier.lastValues&&a.push("lastValues"),"gradient"===this.visualSettings.limitOutlier.axisBreakType.toString()){const r=t.append("defs").append("linearGradient").attr("id","axisBreakGradient");r.append("stop").attr("offset","0%").attr("stop-color","white").attr("stop-opacity","0"),r.append("stop").attr("offset","50%").attr("stop-color",this.visualSettings.limitOutlier.axisBreakColor).attr("stop-opacity","1"),r.append("stop").attr("offset","100%").attr("stop-color","white").attr("stop-opacity","0"),e.filter((t=>Math.abs(t.value)>this.visualSettings.limitOutlier.outlier&&-1===a.indexOf(t.class.split(" ")[0]))).append("rect").classed("axisBreak",!0).attr("y",(t=>i(t.name)-1)).attr("x",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition)).attr("width",this.visualSettings.limitOutlier.axisBreakSize).attr("height",1.08*i.bandwidth()).attr("stroke","").attr("fill","url(#axisBreakGradient)").attr("stroke-width","0.5")}else e.filter((t=>Math.abs(t.value)>this.visualSettings.limitOutlier.outlier&&-1===a.indexOf(t.class.split(" ")[0]))).append("line").classed("axisBreakTop",!0).attr("y1",(t=>i(t.name)-4.5)).attr("x1",(t=>n((t.normalizedStart+t.normalizedEnd)/2)+this.visualSettings.limitOutlier.axisBreakPosition+this.visualSettings.limitOutlier.axisBreakSize/2)).attr("y2",(t=>i(t.name)+i.bandwidth()/.95)).attr("x2",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition-7+this.visualSettings.limitOutlier.axisBreakSize/2)).attr("stroke","white").attr("stroke-width",this.visualSettings.limitOutlier.axisBreakSize),e.filter((t=>Math.abs(t.value)>this.visualSettings.limitOutlier.outlier&&-1===a.indexOf(t.class.split(" ")[0]))).append("line").classed("axisBreakTop",!0).attr("y1",(t=>i(t.name)-4.5)).attr("x1",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition)).attr("y2",(t=>i(t.name)+i.bandwidth()/.95)).attr("x2",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition-7)).attr("stroke","black").attr("stroke-width",1).attr("transform",`translate(${-this.visualSettings.limitOutlier.axisBreakSize/2}) 0`).attr("shape-rendering","optimizeQuality"),e.filter((t=>Math.abs(t.value)>this.visualSettings.limitOutlier.outlier&&-1===a.indexOf(t.class.split(" ")[0]))).append("line").classed("axisBreakTop",!0).attr("y1",(t=>i(t.name)-4.5)).attr("x1",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition+this.visualSettings.limitOutlier.axisBreakSize)).attr("y2",(t=>i(t.name)+i.bandwidth()/.95)).attr("x2",(t=>n((t.normalizedStart+t.normalizedEnd)/2)-this.visualSettings.limitOutlier.axisBreakPosition-7+this.visualSettings.limitOutlier.axisBreakSize)).attr("stroke","black").attr("stroke-width",1).attr("transform",`translate(${-this.visualSettings.limitOutlier.axisBreakSize/2}) 0`).attr("shape-rendering","optimizeQuality");e.selectAll(".axisBreak").attr("stroke-dasharray",`${i.bandwidth()} ${this.visualSettings.limitOutlier.axisBreakSize}`).attr("stroke-dashoffset",i.bandwidth())}configureHierarchichalView(t,e,i,n,r){const s=t.filter(((t,e)=>0!==e)).append("text").classed("hierarchyButton",!0).attr("x",5).attr("y",((t,n)=>i(e[n].name))).attr("dy",i.bandwidth()/1.8).attr("font-size",15).attr("font-weight","bold").attr("font-family","sans-serif").attr("fill","blue").attr("text-anchor","start").text(((t,i)=>" ".repeat(4*(e[i].hierarchyDepth-1))+(e[i].expanded?"−":"+"))).attr("id",((t,i)=>e[i].nodeIndex)).attr("transform",`translate(0,${n.top/this.dimensionsDivisionFactor})`).on("mouseover",(function(){a.Ys(this).attr("fill","black").attr("cursor","pointer")})).on("mouseout",(function(){a.Ys(this).attr("fill","blue").attr("cursor","default")})).on("click",(t=>{const e=+a.Ys(t.target).attr("id"),i=this.findCategoryById(this.heirarchichalCategories,e);null!==i.children&&0!==i.children.length&&("+"===a.Ys(t.target).text().trim()?(i.expanded=!0,i.children.forEach((t=>{t.expanded=!1})),this.treeExpansionDepth=i.level>this.treeExpansionDepth?i.level:this.treeExpansionDepth,this.expandedNodeIndices.push(e)):(i.expanded=!1,this.updateExpansionState(i),this.expandedNodeIndices.splice(this.expandedNodeIndices.indexOf(e),1),this.collapseNode(i),this.treeExpansionDepth=this.calculateTreeExpansionDepth(this.heirarchichalCategories)),this.retainHeirarchichalState=!0,this.updateView(r))}));return this.expandedNodeIndices.length>0&&this.expandedNodeIndices.forEach((i=>{const a=this.findCategoryById(this.heirarchichalCategories,i),r=e.filter((t=>t.nodeIndex===i))[0],l=s.nodes().filter((t=>t.id===i.toString()))[0].getComputedTextLength(),o=s.nodes().filter((t=>t.id===i.toString()))[0].getBBox().height,u=s.nodes().filter((t=>t.id===i.toString()))[0].getBBox().y,h=s.nodes().filter((t=>t.id===a.children[0].id.toString()))[0].getBBox().y;t.filter(((t,e)=>0!==e)).filter((t=>t[0]===r.name)).append("line").attr("x1",l+5).attr("y1",u).attr("x2",l+5).attr("y2",h+o/2).attr("stroke","black").attr("stroke-width",1).attr("transform",`translate(0,${n.top/this.dimensionsDivisionFactor})`)})),a.Fp7(s.nodes(),(t=>t.getComputedTextLength()))+7}truncateLabelsText(t,e){e>0&&t.each((function(){const t=a.Ys(this);t.text(t.text().slice(0,e)+(t.text().length>e?"...":""))}))}wrap(t,e){t.each((function(){const t=a.Ys(this),i=t.text().split("").reverse(),n=t.attr("y"),r=parseFloat(t.attr("dy"));let s,l=[],o=0,u=t.text(null).append("tspan").attr("x",0).attr("y",n).attr("dy",r+"em");for(;i.length>0;)s=i.pop(),l.push(s),u.text(l.join("")),u.node().getComputedTextLength()>e&&(l.pop(),u.text(l.join("")),l=[s],u=t.append("tspan").attr("x",0).attr("y",n).attr("dy",1.1*++o+r+"em").text(s))}))}boldenLabels(t,e,i,n){if(e)n?t.each((function(){a.Ys(this).selectAll("tspan").style("font-weight","bold")})):t.each((function(){a.Ys(this).style("font-weight","bold")}));else{const e=i.split(",");e.length>0&&t.each((function(t,i){e.indexOf((i+1).toString())>-1&&(n?a.Ys(this).selectAll("tspan").style("font-weight","bold"):a.Ys(this).style("font-weight","bold"))}))}}calculateGlobalExtrema(t,e,i){let n=[];if(null!==i&&!this.visualSettings.bar.totalBar){const e=t.filter((t=>t.class.includes("centralMeasure")));n=[e[e.length-1].start+(e[e.length-1].value-i[i.length-1].value)]}const r=a.VV$(t,(t=>e?t.normalizedStart:t.start)),s=a.VV$(t,(t=>e?t.normalizedEnd:t.end)),l=a.Fp7(t,(t=>e?t.normalizedStart:t.start)),o=a.Fp7(t,(t=>e?t.normalizedEnd:t.end));let u=a.VV$([s,r]),h=a.Fp7([l,o]);a.Fp7(n)>h&&(h=a.Fp7(n)),a.VV$(n)<u&&(u=a.VV$(n));const c={};return c.globalMinimum=u,c.globalMaximum=h,c}compressionCheck(t,e){return e.value>0&&t.value>0||e.value<0&&t.value<0}insertTableColumn(t,e,i,n,r,s,l,o,u,h,c){l[0].push(o),e=t.append("text").attr("x",o!==this.categoryName?i+this.visualSettings.table.padding:i).attr("y",((t,e)=>0===e?-10:r(n[e-1].name))).text(((t,e)=>0===e?t[u]:(o.includes("abs")&&+t[u]>0||o.includes("%")&&+t[u].split("%")[0]>0?"+":"")+(this.visualSettings.table.formatToggle&&!isNaN(+t[u])?a.WUZ(`.${this.visualSettings.table.precision}s`)(+t[u]):t[u]))).attr("fill",((t,e)=>0===e?"black":o.includes("abs")&&+t[u]>0||o.includes("%")&&+t[u].split("%")[0]>0?this.primaryColor:o.includes("abs")||o.includes("%")?this.secondaryColor:"black")).attr("transform",`translate(0,${s/this.dimensionsDivisionFactor})`).attr("dy",((t,e)=>0===e?"":r.bandwidth()/1.8)).style("font-size",this.visualSettings.table.fontSize).style("font-family",this.visualSettings.table.fontFamily),this.visualSettings.table.header?e.filter(((t,e)=>0===e)).attr("font-weight","bold"):e.filter(((t,e)=>0===e)).attr("fill","none");const d=a.Fp7(e.nodes(),(t=>t.getComputedTextLength()));return o===this.categoryName&&e.filter(((t,e)=>0!==e)).nodes().forEach((t=>{const e=a.Ys(t);for(;t.getComputedTextLength()<d-1;)e.text(e.text()+" ")})),o!==this.categoryName&&this.visualSettings.table.headerSymbols&&(t.filter(((t,e)=>0===e)).append("rect").attr("x",i+this.visualSettings.table.padding).attr("y",(()=>-7)).attr("fill",c).attr("height","line"===h||"parallelLines"===h?1:4).attr("width",d).attr("transform",`translate(0,${s/this.dimensionsDivisionFactor})`).attr("stroke","black").attr("dy",(()=>t.filter(((t,e)=>0===e)).select("text").nodes()[0].getBBox().height)),"hatchedRectangle"===h&&this.svg.append("defs").append("pattern").attr("id","diagonalHatch").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("path").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#000000").attr("stroke-width",1),("parallelLines"===h||"hatchedRectangle"===h)&&t.filter(((t,e)=>0===e)).append("rect").attr("x",i+this.visualSettings.table.padding).attr("y",(()=>("parallelLines"===h?4:0)-7)).attr("fill","hatchedRectangle"===h?"url(#diagonalHatch)":c).attr("height","parallelLines"===h?1:4).attr("width",d).attr("transform",`translate(0,${s/this.dimensionsDivisionFactor})`).attr("stroke","hatchedRectangle"===h?"":"black").attr("stroke-width","0.7").attr("dy",(()=>t.filter(((t,e)=>0===e)).select("text").nodes()[0].getBBox().height))),e.filter(((t,e)=>0!==e)).each((function(){this.setAttribute("dx",(d-this.getComputedTextLength()).toString())})),i+=d+(o!==this.categoryName?this.visualSettings.table.padding:0),this.columnUpdateContainer=e,i}countElements(t){let e=0;for(let i=0;i<t.length;i++)t[i]instanceof Array?e+=this.countElements(t[i]):t[i]instanceof Object?Object.prototype.hasOwnProperty.call(t[i],"values")&&(e+=this.countElements(t[i].values)):e++;return e}convertToHierarchy(t,e){const i={name:"",children:[],id:0,level:0},n={id:1};for(let a=0;a<t.length;a++){let r=i;for(let e=0;e<t[a].length;e++){const i=t[a][e],s=null!==r.children&&r.children.find((t=>t.name===i));if(s)r=s;else{const t={name:i,id:n.id++,expanded:0!==e&&null,children:[],level:e+1,parent:r};null!==r.children&&r.children.push(t),r=t}}r.value=e[a]}return null!==i.children||void 0!==i.children?i.children:[]}getNodeValue(t){return t.children&&0!==t.children.length?t.children.reduce(((t,e)=>t+this.getNodeValue(e)),0):null!==t.value&&void 0!==t.value?t.value:0}getExpandableNodes(t){const e=[];for(const i of t){if(i.children){const t=this.getExpandableNodes(i.children);e.push(...t)}1!==i.level&&!0!==i.expanded&&!1!==i.expanded||e.push(i)}return e}collapseNode(t){t.children&&t.children.forEach((t=>{delete t.expanded,this.collapseNode(t)}))}findCategoryById(t,e){for(const i of t){if(i.id===e)return i;const t=this.findCategoryById(i.children||[],e);if(t)return t}}calculateTreeExpansionDepth(t){let e=1;for(const i of t){if(i.children.length>0){const t=this.calculateTreeExpansionDepth(i.children);e=t>e?t:e}e=i.level>e?i.level:e}return e}updateExpansionState(t){t.children&&t.children.forEach((t=>{!0===t.expanded&&this.expandedNodeIndices.splice(this.expandedNodeIndices.indexOf(t.id),1),this.updateExpansionState(t)}))}expandAllNodes(t){const e=this.getExpandableNodes(t);for(const t of e)t.expanded=!0,this.expandedNodeIndices.push(t.id),this.expandNode(t)}expandNode(t){t.children.length>0&&t.children.forEach((t=>{t.level<=this.treeExpansionDepth?(t.expanded=!0,this.expandedNodeIndices.push(t.id),this.expandNode(t)):t.expanded=!1}))}formatValue(t,e,i){const n=this.visualSettings.bar.signToggle&&t>0?"+":"";return"auto"===i?a.WUZ(`${n}.${e}~s`)(t):"none"===i?a.WUZ(`${n}.${e}f`)(t):"percent"===i?a.WUZ(`${n}.${e}~%`)(t/100):"thousand"===i?`${n}${(t/1e3).toFixed(e)}K`:"million"===i?`${n}${(t/1e6).toFixed(e)}M`:"billion"===i?`${n}${(t/1e9).toFixed(e)}B`:"trillion"===i?`${n}${(t/1e12).toFixed(e)}T`:void 0}handleBreakingSettings(t){this.target.style.overflowX="hidden",this.target.style.overflowY="hidden",t.bar.precision<0&&(t.bar.precision=0),this.groupNames.length>0&&(this.visualSettings.highlight1.show=!1,this.visualSettings.highlight2.show=!1,this.visualSettings.highlight3.show=!1,this.visualSettings.highlight4.show=!1,this.visualSettings.highlight5.show=!1)}createWatermark(){a.Ys(".watermark").remove();const t=this.svg.append("g").classed("watermark",!0).attr("opacity",.1);t.attr("display","none"),[{x:-50,y:-50},{x:-50,y:100},{x:-50,y:250},{x:-50,y:400},{x:-50,y:550},{x:-50,y:700},{x:-50,y:850},{x:-50,y:1e3},{x:-50,y:1150},{x:250,y:-50},{x:500,y:150},{x:500,y:300},{x:500,y:450},{x:500,y:600},{x:500,y:750},{x:500,y:900},{x:500,y:1050},{x:500,y:1200},{x:1050,y:50},{x:1050,y:200},{x:1050,y:350},{x:1050,y:500},{x:1050,y:650},{x:1050,y:800},{x:1050,y:950},{x:1050,y:1100},{x:1600,y:-50},{x:1600,y:100},{x:1600,y:250},{x:1600,y:400},{x:1600,y:550},{x:1600,y:700},{x:1600,y:850},{x:1600,y:1e3}].forEach((({x:e,y:i})=>{const n="#"+Array.from(u.crypto.getRandomValues(new Uint8Array(3))).map((t=>t.toString(16).padStart(2,"0"))).join("");t.append("text").attr("class","watermark-text").attr("font-size",100).attr("x",e).attr("y",i).text("DataViz.Boutique").attr("fill",n)})),a.td_(".watermark-text").each((function(){const t=a.Ys(this),e=t.node().getBBox(),i=e.x,n=e.y;t.attr("transform",`rotate(-45, ${i}, ${n})`)}))}handleContextMenu(){this.svg.on("contextmenu",(t=>{const e=t.target,i=a.Ys(e).datum();this.selectionManager.showContextMenu(i?i.identity:{},{x:t.clientX,y:t.clientY}),t.preventDefault()}))}DECODEANDVERIFYSIGNATURE(t,e,i){if(!u.crypto||!u.crypto.subtle)return()=>Promise.resolve(null);const n=u.crypto.subtle.importKey("jwk",t,e,!1,["verify"]);return t=>{try{if(!t.includes("$"))return Promise.resolve(null);const e=atob(t.slice(0,t.indexOf("$"))),a=new Uint8Array(Array.from(atob(t.slice(t.indexOf("$")+1))).map((t=>t.charCodeAt(0)))),r=(new TextEncoder).encode(e);return Promise.resolve(n.then((t=>u.crypto.subtle.verify(i,t,a,r))).then((t=>t?e:null))).catch((t=>t))}catch(t){return Promise.resolve(null)}}}DECODEANDVERIFYECDSASIGNATURE(t){return this.DECODEANDVERIFYSIGNATURE(t,{name:"ECDSA",namedCurve:"P-384"},{name:"ECDSA",hash:{name:"SHA-384"}})}peristLicenseData(t,e){const i={merge:[{objectName:"license",selector:void 0,properties:{persistantKey:t,persistantDecodedKey:e}}]};this.host.persistProperties(i)}persistPlanData(t,e){const i={merge:[{objectName:"license",selector:void 0,properties:{planName:t,planExpired:e}}]};this.host.persistProperties(i)}performLicenseEnforcement(){this.licenseManager.getAvailableServicePlans().then((t=>{const e=t.isLicenseUnsupportedEnv?1:0,i=!(!(t.plans&&t.plans.length&&t.plans[0].spIdentifier.includes("ultimate_waterfall_api"))||1!=t.plans[0].state&&2!=t.plans[0].state);if(i){const e=t.plans[0].spIdentifier.split(".").slice(0,-1).join(".");this.persistPlanData(e,"No")}if(i)a.Ys(".watermark").remove();else{const t=this.visualSettings.license.licenseKey;t?this.DECODEANDVERIFYECDSASIGNATURE(this.publicKey)(t).then((i=>{console.log("Inside license enforcement",i),i?(this.verifiedKey=i,this.peristLicenseData(this.visualSettings.license.licenseKey,i),a.Ys(".watermark").remove(),this.licenseManager.clearLicenseNotification()):(this.verifiedKey="",this.peristLicenseData(this.visualSettings.license.licenseKey,"Invalid License Key"),this.displayUpgradeNotification(e),a.Ys(".watermark").attr("display","block")),this.prevCode=t})):(this.displayUpgradeNotification(e),a.Ys(".watermark").attr("display","block"))}})).catch((t=>{console.log(t)}))}displayUpgradeNotification(t){this.licenseManager.notifyLicenseRequired(t).then((t=>{t&&console.log("License Plan Missing")})).catch((t=>{console.log("ERROR",t)}))}createLandingPage(){this.svg.selectAll("*").remove(),this.svg.append("image").attr("id","image0").attr("width",200).attr("height",200).attr("x",0).attr("y",0).attr("xlink:href","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAflBMVEUAAAD////////+/v7+/v7vAAB5yRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////wQfMzMwAAABAg3HFAAAAJnRSTlMAP1++ntWlL39PH28/X56+xme29hcPV+YndzcHR4au3u6mltbOjtrdk0wAAAABYktHRAH/Ai3eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4wMUESEigMTk1AAABL1JREFUeNrt3NuWojgUBuDM0YDBoKAoqKCFM5P3f8HZB9QqdWnZ09Odqvr/m0INSb6wE1bftDEIgiAIgnzK/PLXh8uvnx3y288uiufyOyCRBZDYAkhsASS2ABJbAIktgMQWQGILILEFkNgCSGwBJLYAElsAiS2AxBZA/lP+vgoggAACCCCAAAIIIIAAAgggN/PHVQAB5GdA/rkMIIAAAggggAACCCCARAj58zKAAAIIIIAAAggggAACCCCAAAIIIIAAAggggAACCCCAAAIIIIAAAggggAACCCCAAAIIIIAAAgggPxjyA4P/BCm2ABJbAIktgMQWQGILILEFkNgCSGwBJLZ8LcjI2uTJftOxu/Gltdkznbhx+n0hWQiTJyE+hOtJuBD8M4sRQv7/Q6b27mrNQlF+MySxI/5TPuP+VkhZBGfuZL644XwvpApagcvF/PtBRlPHE1CIS8ZOF3oVwtg5HmfuFlO5GDn9LXVuaWrnGr6SjF5DysX6+KxGyUIvG+dqaeB4dRYhbJxLqefhTpc5/i2VvnmBSh5CxzpO6AFkvg0htIlCbEcfQrGhr3dBQv1PCr7opsZsQtjzPbQ9FqblPWK11ekxMGTMXcjRscz5txeeK+2Glr+iz9IPxx4fYNrTp77mb7hHey6RZi9jZ++A6IQLvY/m0NIEw5SHOEIONEhFl7VZhlAZqeyueQuZnSGFfkOzLyu97EYXkHAB6bXZDQitcsGrsXgIoZ0QbFO/DAswLaWrrS677pEyo7KaUDEYk8t3xD0YhcgzbUNRnyFhn5Y0s50xtJqztNkI4Q2Ee8vOW4rKoXDz1Q3ImtawNCNdv/sQqtZO/5w2+1LHPEEka2mQSW3lst4nCK3a2LyCpNKu5R0duM6p4fwuxMrC8Ka8hOy1a5pK+Qiy0uUfKaSeSFW/hax3+uipQVPQ2tCcenOGjM+FJTNrtbtg5rpGDF3fhQyfkmvILBxTP4IMq5HKfTXXt8/fQqa8hXyvUhrTrXSZBgjdU5WvIS/H+ZZnSHaENHcg7hriTxD3CDLV7VbLfVtZ3IvSaqVnLS0ebDO8CRVCG+R1BTot56UYKilBbihPpNMfriEHPl2kvBUyHDuTczvJfQgfM3Ppi+6jLZ9IVwyZ6VnBi6ubfaKsWSfFOEC2uoC85+thj6yli15+m8rDpob8KJbyA0M2w10KWWmtalcLGb3RClgdD/bmIYQn39s8HJ/kLNl3CiFbZSdrXtddMhnOZ+q6kKkOEFq4wlLGZl7wbOTUnpGaq88VoZhsKn35UPPqwO+soHXQbfarAcIn59a+yIEs26u3/bAn6eZ+nNl88hiykHN/L/ct9OXmTxuWn+xKd3qlECp8KZ4BcizilouzaHhmubxU80YLXa5Lc+y73wqkLPT0GN4jMkSx08e01fE6GW89vIreATFu1s4yc/Arvs933jZrvzPDhz0V+cpXPjOZNKAH5b0etjvvS/4koRu2Ha+n96N01+a2kTb1Jm/9VMdbUze2SbzUynLb9ruEmx9kNX21dcM25/FoQhsdb2591frD8h2QaGJP2+12AAHkq0OctXf/JfdhII8CSGwBJLYAElsAiS2AxJYvAPlw+eQQBEEQBEE+fP4F9XsrDn6n8IIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDMtMjBUMTc6MzM6MzQrMDM6MDBZpL1TAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAzLTIwVDE3OjMzOjM0KzAzOjAwKPkF7wAAAABJRU5ErkJggg==");const t=this.svg.append("text").attr("font-size",15).attr("x",210).attr("y",30).style("transform","translate(210px,0)");t.append("tspan").attr("x",0).attr("dy","0em").text("The free features without watermark are: "),t.append("tspan").attr("x",20).attr("dy","1.2em").text("• 2 major chart options without watermark"),t.append("tspan").attr("x",20).attr("dy","1.2em").text("• Category, Value field"),t.append("tspan").attr("x",20).attr("dy","1.2em").text("• Category, Value field and 1 Reference Field"),t.append("tspan").attr("x",0).attr("dy","1.2em").text("Basic features are free and do not have a watermark. Once an"),t.append("tspan").attr("x",0).attr("dy","1.2em").text(" advanced Feature was used, a watermark appear. Change the "),t.append("tspan").attr("x",0).attr("dy","1.2em").text('setting back and use in same setting pane "Revert to default" in'),t.append("tspan").attr("x",0).attr("dy","1.2em").text("order to remove the watermark again if no advanced setting is used."),t.append("tspan").attr("x",0).attr("dy","1.2em").text("Order your full trial license here:"),t.append("tspan").attr("x",0).attr("dy","1.2em").text("license@dataviz.boutique")}}},9567:(t,e,i)=>{function n(t,e,i){if(!t)return i;let n=t[e];return void 0===n?i:n}i.d(e,{N:()=>n})},982:(t,e,i)=>{i.d(e,{d9:()=>a});var n=i(9567);function a(t,e,i){const a=function(t,e,i){return t?n.N(t[e.objectName],e.propertyName,i):i}(t,e,i);return a&&a.solid?a.solid.color:null==a||"object"==typeof a&&!a.solid?i:a}},4554:(t,e,i)=>{i.d(e,{U:()=>a});var n=i(982);class a{static getDefault(){return new this}static createPropertyIdentifier(t,e){return{objectName:t,propertyName:e}}static parse(t){let e,i=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return i;e=i.getProperties();for(let a in e)for(let r in e[a]){const s=i[a][r];i[a][r]=n.d9(t.metadata.objects,e[a][r],s)}return i}static isPropertyEnumerable(t){return!a.InnumerablePropertyPrefix.test(t)}static enumerateObjectInstances(t,e){let i=t&&t[e.objectName];if(!i)return[];let n={objectName:e.objectName,selector:null,properties:{}};for(let t in i)i.hasOwnProperty(t)&&(n.properties[t]=i[t]);return{instances:[n]}}getProperties(){let t={};return Object.keys(this).forEach((e=>{if(a.isPropertyEnumerable(e)){let i=Object.keys(this[e]);t[e]={},i.forEach((i=>{a.isPropertyEnumerable(e)&&(t[e][i]=a.createPropertyIdentifier(e,i))}))}})),t}}a.InnumerablePropertyPrefix=/^_/},9406:(t,e,i)=>{var n;function a(t){for(let e=0,i=t.length;e<i;e++)if(t[e].selected)return!0;return!1}i.d(e,{H_:()=>r}),function(t){t[t.merge=0]="merge",t[t.remove=1]="remove"}(n||(n={}));class r{constructor(){this.renderSelectionInVisual=()=>{},this.renderSelectionInLegend=()=>{},this.renderSelectionInLabels=()=>{},this.isInvertedSelectionMode=!1}bind(t){t.interactivityServiceOptions&&t.interactivityServiceOptions.overrideSelectionFromData&&this.takeSelectionStateFromDataPoints(t.dataPoints),t.interactivityServiceOptions?t.interactivityServiceOptions.isLegend?(this.selectableLegendDataPoints=t.dataPoints,this.renderSelectionInLegend=()=>t.behavior.renderSelection(this.legendHasSelection())):t.interactivityServiceOptions.isLabels?(this.selectableLabelsDataPoints=t.dataPoints,this.renderSelectionInLabels=()=>t.behavior.renderSelection(this.labelsHasSelection())):(this.selectableDataPoints=t.dataPoints,this.renderSelectionInVisual=()=>t.behavior.renderSelection(this.hasSelection())):(this.selectableDataPoints=t.dataPoints,this.renderSelectionInVisual=()=>t.behavior.renderSelection(this.hasSelection())),t.behavior.bindEvents(t,this),this.syncSelectionState()}clearSelection(){this.applyToAllSelectableDataPoints((t=>t.selected=!1)),this.renderAll()}legendHasSelection(){return!!this.selectableLegendDataPoints&&a(this.selectableLegendDataPoints)}labelsHasSelection(){return!!this.selectableLabelsDataPoints&&a(this.selectableLabelsDataPoints)}isSelectionModeInverted(){return this.isInvertedSelectionMode}handleSelection(t,e){t&&(this.select(t,e),this.sendSelectionToHost(),this.renderAll())}handleContextMenu(t,e){}handleClearSelection(){this.clearSelection(),this.sendSelectionToHost()}renderAll(){this.renderSelectionInVisual(),this.renderSelectionInLegend(),this.renderSelectionInLabels()}applyToAllSelectableDataPoints(t){const e=this.selectableDataPoints,i=this.selectableLegendDataPoints,n=this.selectableLabelsDataPoints;if(e)for(const i of e)t(i);if(i)for(const e of i)t(e);if(n)for(const e of n)t(e)}}},8482:(t,e,i)=>{i.d(e,{L:()=>s});var n=i(1085),a=i(9406);class r extends a.H_{constructor(t){super(),this.selectionManager=t.createSelectionManager(),this.selectionManager.registerOnSelectCallback&&this.selectionManager.registerOnSelectCallback((()=>{this.restoreSelection()}))}clearSelection(){this.selectionManager.clear(),super.clearSelection()}handleContextMenu(t,e){this.selectionManager.showContextMenu(t&&t.identity?t.identity:{},e)}applySelectionStateToData(t,e){e&&this.hasSelection()&&this.selectionManager.clear();const i=this.selectionManager.getSelectionIds();for(const e of t)e.selected=this.isDataPointSelected(e,i);return this.hasSelection()}restoreSelection(){this.syncSelectionState(),this.renderAll()}hasSelection(){return this.selectionManager.getSelectionIds().length>0}syncSelectionState(){if(this.isInvertedSelectionMode)return this.syncSelectionStateInverted();if(!this.selectableDataPoints&&!this.selectableLegendDataPoints)return;const t=this.selectionManager.getSelectionIds();if(this.selectableDataPoints&&this.updateSelectableDataPointsBySelectedIds(this.selectableDataPoints,t),this.selectableLegendDataPoints&&this.updateSelectableDataPointsBySelectedIds(this.selectableLegendDataPoints,t),this.selectableLabelsDataPoints)for(const e of this.selectableLabelsDataPoints)e.selected=t.some((t=>t.includes(e.identity)))}select(t,e){const i=[].concat(t),n=[...this.selectionManager.getSelectionIds()];e&&i.length||this.selectionManager.clear();const a=[];i.forEach((t=>{t&&t.identity&&(this.isDataPointSelected(t,n)?(t.selected=!1,e&&a.push(t.identity)):(t.selected=!0,a.push(t.identity)))})),this.selectionManager.select(a,e),this.syncSelectionState()}takeSelectionStateFromDataPoints(t){const e=this.selectionManager.getSelectionIds();n.ZH(e);for(const i of t)i.selected&&e.push(i.identity)}sendSelectionToHost(){}syncSelectionStateInverted(){const t=this.selectionManager.getSelectionIds(),e=this.selectableDataPoints;if(e)if(0===t.length)for(const t of e)t.selected=!1;else for(const i of e)t.some((t=>t.includes(i.identity)))?i.selected=!0:i.selected&&(i.selected=!1)}updateSelectableDataPointsBySelectedIds(t,e){let i=!1;for(const n of t)n.selected=this.isDataPointSelected(n,e),n.selected&&(i=!0);return i}isDataPointSelected(t,e){return e.some((e=>e.includes(t.identity)))}}function s(t){return new r(t)}},7970:(t,e,i)=>{i.d(e,{p2:()=>n.p});var n=i(880)},880:(t,e,i)=>{i.d(e,{p:()=>o});var n=i(6837),a=i(282),r=i(5572),s=i(6738);const l=500;function o(t,e,i=l){return new u({tooltipService:t,rootElement:e,handleTouchDelay:i})}class u{constructor(t){this.visualHostTooltipService=t.tooltipService,this.rootElement=t.rootElement,this.handleTouchDelay=t.handleTouchDelay}addTooltip(t,e,i,a){if(!t||!this.visualHostTooltipService.enabled())return;let l=this.rootElement,o=(0,n.Z)(t.nodes());o.on("mouseover.tooltip",((t,n)=>{if(!this.canDisplayTooltip(t))return;let a=this.getCoordinates(t,l,!0),r=e(n);if(null==r)return;let s=i?[i(n)]:[];this.visualHostTooltipService.show({coordinates:a,isTouchEvent:!1,dataItems:r,identities:s})})),o.on("mouseout.tooltip",((t,e)=>{this.visualHostTooltipService.hide({isTouchEvent:!1,immediately:!1})})),o.on("mousemove.tooltip",((t,n)=>{if(!this.canDisplayTooltip(t))return;let r,s=this.getCoordinates(t,l,!0);if(a&&(r=e(n),null==r))return;let o=i?[i(n)]:[];this.visualHostTooltipService.move({coordinates:s,isTouchEvent:!1,dataItems:r,identities:o})}));let u=r.ME(),h=r.dF();r.bQ(),o.on(u+".tooltip",((t,n)=>{let a=this.getCoordinates(t,l,!0),r=e(n),o=i?[i(n)]:[];this.handleTouchTimeoutId=s.setTimeout((()=>{this.visualHostTooltipService.show({coordinates:a,isTouchEvent:!0,dataItems:r,identities:o}),this.handleTouchTimeoutId=void 0}),this.handleTouchDelay)})),o.on(h+".tooltip",(()=>{this.cancelTouchTimeoutEvents()}))}cancelTouchTimeoutEvents(){this.handleTouchTimeoutId&&clearTimeout(this.handleTouchTimeoutId)}hide(){this.visualHostTooltipService.hide({immediately:!0,isTouchEvent:!1})}canDisplayTooltip(t){let e=!0;const i=t;return void 0!==i.buttons&&(e=!(0!==i.buttons)),e=e&&null==this.handleTouchTimeoutId,e}getCoordinates(t,e,i){let n;if(i){let i,a=t;for(;i=a.sourceEvent;)a=i;let r=e.getBoundingClientRect();n=[a.clientX-r.left-e.clientLeft,a.clientY-r.top-e.clientTop]}else{let e=(0,a.Z)(t);e&&e.length>0&&(n=e[0])}return n}}},5572:(t,e,i)=>{function n(){return"touchstart"}function a(){return"touchend"}function r(){return!1}i.d(e,{ME:()=>n,bQ:()=>r,dF:()=>a})},6455:(t,e,i)=>{function n(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}i.d(e,{Z:()=>n})},5486:(t,e,i)=>{function n(t){return function(){return t}}i.d(e,{Z:()=>n})},5418:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(844),a=i(8156);function r(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===a.P&&e.documentElement.namespaceURI===a.P?e.createElement(t):e.createElementNS(i,t)}}function s(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function l(t){var e=(0,n.Z)(t);return(e.local?s:r)(e)}},1304:(t,e,i)=>{function n(t){return function(){return this.matches(t)}}function a(t){return function(e){return e.matches(t)}}i.d(e,{P:()=>a,Z:()=>n})},844:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8156);function a(t){var e=t+="",i=e.indexOf(":");return i>=0&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),n.Z.hasOwnProperty(e)?{space:n.Z[e],local:t}:t}},8156:(t,e,i)=>{i.d(e,{P:()=>n,Z:()=>a});var n="http://www.w3.org/1999/xhtml";const a={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},574:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(5691);function a(t,e){if(t=(0,n.Z)(t),void 0===e&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var a=i.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,[(a=a.matrixTransform(e.getScreenCTM().inverse())).x,a.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}},282:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(574),a=i(5691);function r(t,e){return t.target&&(t=(0,a.Z)(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>(0,n.Z)(t,e)))}},6837:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(6455),a=i(762);function r(t){return"string"==typeof t?new a.Y1([document.querySelectorAll(t)],[document.documentElement]):new a.Y1([null==t?[]:(0,n.Z)(t)],a.Jz)}},3855:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(5418);function a(t){var e="function"==typeof t?t:(0,n.Z)(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}},8190:(t,e,i)=>{i.d(e,{Z:()=>h});var n=i(844);function a(t){return function(){this.removeAttribute(t)}}function r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function s(t,e){return function(){this.setAttribute(t,e)}}function l(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function o(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}function u(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function h(t,e){var i=(0,n.Z)(t);if(arguments.length<2){var h=this.node();return i.local?h.getAttributeNS(i.space,i.local):h.getAttribute(i)}return this.each((null==e?i.local?r:a:"function"==typeof e?i.local?u:o:i.local?l:s)(i,e))}},9049:(t,e,i)=>{function n(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}i.d(e,{Z:()=>n})},9660:(t,e,i)=>{function n(t){return t.trim().split(/^|\s+/)}function a(t){return t.classList||new r(t)}function r(t){this._node=t,this._names=n(t.getAttribute("class")||"")}function s(t,e){for(var i=a(t),n=-1,r=e.length;++n<r;)i.add(e[n])}function l(t,e){for(var i=a(t),n=-1,r=e.length;++n<r;)i.remove(e[n])}function o(t){return function(){s(this,t)}}function u(t){return function(){l(this,t)}}function h(t,e){return function(){(e.apply(this,arguments)?s:l)(this,t)}}function c(t,e){var i=n(t+"");if(arguments.length<2){for(var r=a(this.node()),s=-1,l=i.length;++s<l;)if(!r.contains(i[s]))return!1;return!0}return this.each(("function"==typeof e?h:e?o:u)(i,e))}i.d(e,{Z:()=>c}),r.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}},1280:(t,e,i)=>{function n(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(t){return this.select(t?a:n)}i.d(e,{Z:()=>r})},869:(t,e,i)=>{i.d(e,{Z:()=>h});var n=i(762),a=i(6580),r=i(6455),s=i(5486);function l(t,e,i,n,r,s){for(var l,o=0,u=e.length,h=s.length;o<h;++o)(l=e[o])?(l.__data__=s[o],n[o]=l):i[o]=new a.F(t,s[o]);for(;o<u;++o)(l=e[o])&&(r[o]=l)}function o(t,e,i,n,r,s,l){var o,u,h,c=new Map,d=e.length,f=s.length,g=new Array(d);for(o=0;o<d;++o)(u=e[o])&&(g[o]=h=l.call(u,u.__data__,o,e)+"",c.has(h)?r[o]=u:c.set(h,u));for(o=0;o<f;++o)h=l.call(t,s[o],o,s)+"",(u=c.get(h))?(n[o]=u,u.__data__=s[o],c.delete(h)):i[o]=new a.F(t,s[o]);for(o=0;o<d;++o)(u=e[o])&&c.get(g[o])===u&&(r[o]=u)}function u(t){return t.__data__}function h(t,e){if(!arguments.length)return Array.from(this,u);var i=e?o:l,a=this._parents,h=this._groups;"function"!=typeof t&&(t=(0,s.Z)(t));for(var c=h.length,d=new Array(c),f=new Array(c),g=new Array(c),p=0;p<c;++p){var v=a[p],m=h[p],y=m.length,b=(0,r.Z)(t.call(v,v&&v.__data__,p,a)),x=b.length,S=f[p]=new Array(x),w=d[p]=new Array(x);i(v,m,S,w,g[p]=new Array(y),b,e);for(var A,Z,k=0,_=0;k<x;++k)if(A=S[k]){for(k>=_&&(_=k+1);!(Z=w[_])&&++_<x;);A._next=Z||null}}return(d=new n.Y1(d,a))._enter=f,d._exit=g,d}},5045:(t,e,i)=>{function n(t){return arguments.length?this.property("__data__",t):this.node().__data__}i.d(e,{Z:()=>n})},1576:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(4416);function a(t,e,i){var a=(0,n.Z)(t),r=a.CustomEvent;"function"==typeof r?r=new r(e,i):(r=a.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function r(t,e){return function(){return a(this,t,e)}}function s(t,e){return function(){return a(this,t,e.apply(this,arguments))}}function l(t,e){return this.each(("function"==typeof e?s:r)(t,e))}},5353:(t,e,i)=>{function n(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var a,r=e[i],s=0,l=r.length;s<l;++s)(a=r[s])&&t.call(a,a.__data__,s,r);return this}i.d(e,{Z:()=>n})},352:(t,e,i)=>{function n(){return!this.node()}i.d(e,{Z:()=>n})},6580:(t,e,i)=>{i.d(e,{F:()=>s,Z:()=>r});var n=i(530),a=i(762);function r(){return new a.Y1(this._enter||this._groups.map(n.Z),this._parents)}function s(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}s.prototype={constructor:s,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},7772:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(530),a=i(762);function r(){return new a.Y1(this._exit||this._groups.map(n.Z),this._parents)}},3425:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(762),a=i(1304);function r(t){"function"!=typeof t&&(t=(0,a.Z)(t));for(var e=this._groups,i=e.length,r=new Array(i),s=0;s<i;++s)for(var l,o=e[s],u=o.length,h=r[s]=[],c=0;c<u;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&h.push(l);return new n.Y1(r,this._parents)}},1088:(t,e,i)=>{function n(){this.innerHTML=""}function a(t){return function(){this.innerHTML=t}}function r(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function s(t){return arguments.length?this.each(null==t?n:("function"==typeof t?r:a)(t)):this.node().innerHTML}i.d(e,{Z:()=>s})},762:(t,e,i)=>{i.d(e,{Jz:()=>L,Y1:()=>P});var n=i(9652),a=i(8566),r=i(5025),s=i(1706),l=i(3425),o=i(869),u=i(6580),h=i(7772),c=i(9979),d=i(1566),f=i(2158),g=i(3004),p=i(9049),v=i(7899),m=i(9405),y=i(4019),b=i(352),x=i(5353),S=i(8190),w=i(7981),A=i(9973),Z=i(9660),k=i(5341),_=i(1088),C=i(2490),T=i(2573),E=i(3855),B=i(954),O=i(8327),M=i(1280),N=i(5045),D=i(7797),z=i(1576),V=i(4478),L=[null];function P(t,e){this._groups=t,this._parents=e}P.prototype=function(){return new P([[document.documentElement]],L)}.prototype={constructor:P,select:n.Z,selectAll:a.Z,selectChild:r.Z,selectChildren:s.Z,filter:l.Z,data:o.Z,enter:u.Z,exit:h.Z,join:c.Z,merge:d.Z,selection:function(){return this},order:f.Z,sort:g.Z,call:p.Z,nodes:v.Z,node:m.Z,size:y.Z,empty:b.Z,each:x.Z,attr:S.Z,style:w.Z,property:A.Z,classed:Z.Z,text:k.Z,html:_.Z,raise:C.Z,lower:T.Z,append:E.Z,insert:B.Z,remove:O.Z,clone:M.Z,datum:N.Z,on:D.Z,dispatch:z.Z,[Symbol.iterator]:V.Z}},954:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(5418),a=i(9029);function r(){return null}function s(t,e){var i="function"==typeof t?t:(0,n.Z)(t),s=null==e?r:"function"==typeof e?e:(0,a.Z)(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),s.apply(this,arguments)||null)}))}},4478:(t,e,i)=>{function*n(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n,a=t[e],r=0,s=a.length;r<s;++r)(n=a[r])&&(yield n)}i.d(e,{Z:()=>n})},9979:(t,e,i)=>{function n(t,e,i){var n=this.enter(),a=this,r=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=e&&(a=e(a)),null==i?r.remove():i(r),n&&a?n.merge(a).order():a}i.d(e,{Z:()=>n})},2573:(t,e,i)=>{function n(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function a(){return this.each(n)}i.d(e,{Z:()=>a})},1566:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(762);function a(t){if(!(t instanceof n.Y1))throw new Error("invalid merge");for(var e=this._groups,i=t._groups,a=e.length,r=i.length,s=Math.min(a,r),l=new Array(a),o=0;o<s;++o)for(var u,h=e[o],c=i[o],d=h.length,f=l[o]=new Array(d),g=0;g<d;++g)(u=h[g]||c[g])&&(f[g]=u);for(;o<a;++o)l[o]=e[o];return new n.Y1(l,this._parents)}},9405:(t,e,i)=>{function n(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],a=0,r=n.length;a<r;++a){var s=n[a];if(s)return s}return null}i.d(e,{Z:()=>n})},7899:(t,e,i)=>{function n(){return Array.from(this)}i.d(e,{Z:()=>n})},7797:(t,e,i)=>{function n(t){return function(){var e=this.__on;if(e){for(var i,n=0,a=-1,r=e.length;n<r;++n)i=e[n],t.type&&i.type!==t.type||i.name!==t.name?e[++a]=i:this.removeEventListener(i.type,i.listener,i.options);++a?e.length=a:delete this.__on}}}function a(t,e,i){return function(){var n,a=this.__on,r=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(a)for(var s=0,l=a.length;s<l;++s)if((n=a[s]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=r,n.options=i),void(n.value=e);this.addEventListener(t.type,r,i),n={type:t.type,name:t.name,value:e,listener:r,options:i},a?a.push(n):this.__on=[n]}}function r(t,e,i){var r,s,l=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}))}(t+""),o=l.length;if(!(arguments.length<2)){for(u=e?a:n,r=0;r<o;++r)this.each(u(l[r],e,i));return this}var u=this.node().__on;if(u)for(var h,c=0,d=u.length;c<d;++c)for(r=0,h=u[c];r<o;++r)if((s=l[r]).type===h.type&&s.name===h.name)return h.value}i.d(e,{Z:()=>r})},2158:(t,e,i)=>{function n(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,a=t[e],r=a.length-1,s=a[r];--r>=0;)(n=a[r])&&(s&&4^n.compareDocumentPosition(s)&&s.parentNode.insertBefore(n,s),s=n);return this}i.d(e,{Z:()=>n})},9973:(t,e,i)=>{function n(t){return function(){delete this[t]}}function a(t,e){return function(){this[t]=e}}function r(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}function s(t,e){return arguments.length>1?this.each((null==e?n:"function"==typeof e?r:a)(t,e)):this.node()[t]}i.d(e,{Z:()=>s})},2490:(t,e,i)=>{function n(){this.nextSibling&&this.parentNode.appendChild(this)}function a(){return this.each(n)}i.d(e,{Z:()=>a})},8327:(t,e,i)=>{function n(){var t=this.parentNode;t&&t.removeChild(this)}function a(){return this.each(n)}i.d(e,{Z:()=>a})},9652:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(762),a=i(9029);function r(t){"function"!=typeof t&&(t=(0,a.Z)(t));for(var e=this._groups,i=e.length,r=new Array(i),s=0;s<i;++s)for(var l,o,u=e[s],h=u.length,c=r[s]=new Array(h),d=0;d<h;++d)(l=u[d])&&(o=t.call(l,l.__data__,d,u))&&("__data__"in l&&(o.__data__=l.__data__),c[d]=o);return new n.Y1(r,this._parents)}},8566:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(762),a=i(6455),r=i(6176);function s(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:(0,a.Z)(e)}}(t):(0,r.Z)(t);for(var e=this._groups,i=e.length,s=[],l=[],o=0;o<i;++o)for(var u,h=e[o],c=h.length,d=0;d<c;++d)(u=h[d])&&(s.push(t.call(u,u.__data__,d,h)),l.push(u));return new n.Y1(s,l)}},5025:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(1304),a=Array.prototype.find;function r(){return this.firstElementChild}function s(t){return this.select(null==t?r:function(t){return function(){return a.call(this.children,t)}}("function"==typeof t?t:(0,n.P)(t)))}},1706:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(1304),a=Array.prototype.filter;function r(){return this.children}function s(t){return this.selectAll(null==t?r:function(t){return function(){return a.call(this.children,t)}}("function"==typeof t?t:(0,n.P)(t)))}},4019:(t,e,i)=>{function n(){let t=0;for(const e of this)++t;return t}i.d(e,{Z:()=>n})},3004:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(762);function a(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=r);for(var i=this._groups,a=i.length,s=new Array(a),l=0;l<a;++l){for(var o,u=i[l],h=u.length,c=s[l]=new Array(h),d=0;d<h;++d)(o=u[d])&&(c[d]=o);c.sort(e)}return new n.Y1(s,this._parents).order()}function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},530:(t,e,i)=>{function n(t){return new Array(t.length)}i.d(e,{Z:()=>n})},7981:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(4416);function a(t){return function(){this.style.removeProperty(t)}}function r(t,e,i){return function(){this.style.setProperty(t,e,i)}}function s(t,e,i){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function l(t,e,i){return arguments.length>1?this.each((null==e?a:"function"==typeof e?s:r)(t,e,null==i?"":i)):function(t,e){return t.style.getPropertyValue(e)||(0,n.Z)(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)}},5341:(t,e,i)=>{function n(){this.textContent=""}function a(t){return function(){this.textContent=t}}function r(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function s(t){return arguments.length?this.each(null==t?n:("function"==typeof t?r:a)(t)):this.node().textContent}i.d(e,{Z:()=>s})},9029:(t,e,i)=>{function n(){}function a(t){return null==t?n:function(){return this.querySelector(t)}}i.d(e,{Z:()=>a})},6176:(t,e,i)=>{function n(){return[]}function a(t){return null==t?n:function(){return this.querySelectorAll(t)}}i.d(e,{Z:()=>a})},5691:(t,e,i)=>{function n(t){let e;for(;e=t.sourceEvent;)t=e;return t}i.d(e,{Z:()=>n})},4416:(t,e,i)=>{function n(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}i.d(e,{Z:()=>n})},1085:(t,e,i)=>{function n(t){if(t)for(;t.length>0;)t.pop()}i.d(e,{ZH:()=>n})},6738:t=>{t.exports=Function("return this")()},9757:(t,e,i)=>{function n(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}i.d(e,{Z:()=>n})},2461:(t,e,i)=>{i.d(e,{ZP:()=>o});var n=i(9757),a=i(477),r=i(9215);const s=(0,a.Z)(n.Z),l=s.right,o=(s.left,(0,a.Z)(r.Z).center,l)},477:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(9757),a=i(8837);function r(t){let e,i,r;function l(t,n,a=0,r=t.length){if(a<r){if(0!==e(n,n))return r;do{const e=a+r>>>1;i(t[e],n)<0?a=e+1:r=e}while(a<r)}return a}return 2!==t.length?(e=n.Z,i=(e,i)=>(0,n.Z)(t(e),i),r=(e,i)=>t(e)-i):(e=t===n.Z||t===a.Z?t:s,i=t,r=t),{left:l,center:function(t,e,i=0,n=t.length){const a=l(t,e,i,n-1);return a>i&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,n,a=0,r=t.length){if(a<r){if(0!==e(n,n))return r;do{const e=a+r>>>1;i(t[e],n)<=0?a=e+1:r=e}while(a<r)}return a}}}function s(){return 0}},8837:(t,e,i)=>{function n(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}i.d(e,{Z:()=>n})},5665:(t,e,i)=>{i.d(e,{Fp:()=>n.Z,VV:()=>a.Z});var n=i(8776),a=i(8398)},8776:(t,e,i)=>{function n(t,e){let i;if(void 0===e)for(const e of t)null!=e&&(i<e||void 0===i&&e>=e)&&(i=e);else{let n=-1;for(let a of t)null!=(a=e(a,++n,t))&&(i<a||void 0===i&&a>=a)&&(i=a)}return i}i.d(e,{Z:()=>n})},8398:(t,e,i)=>{function n(t,e){let i;if(void 0===e)for(const e of t)null!=e&&(i>e||void 0===i&&e>=e)&&(i=e);else{let n=-1;for(let a of t)null!=(a=e(a,++n,t))&&(i>a||void 0===i&&a>=a)&&(i=a)}return i}i.d(e,{Z:()=>n})},9215:(t,e,i)=>{function n(t){return null===t?NaN:+t}i.d(e,{Z:()=>n})},5162:(t,e,i)=>{function n(t,e,i){t=+t,e=+e,i=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+i;for(var n=-1,a=0|Math.max(0,Math.ceil((e-t)/i)),r=new Array(a);++n<a;)r[n]=t+n*i;return r}i.d(e,{Z:()=>n})},3896:(t,e,i)=>{i.d(e,{G9:()=>o,ZP:()=>l,ly:()=>u});const n=Math.sqrt(50),a=Math.sqrt(10),r=Math.sqrt(2);function s(t,e,i){const l=(e-t)/Math.max(0,i),o=Math.floor(Math.log10(l)),u=l/Math.pow(10,o),h=u>=n?10:u>=a?5:u>=r?2:1;let c,d,f;return o<0?(f=Math.pow(10,-o)/h,c=Math.round(t*f),d=Math.round(e*f),c/f<t&&++c,d/f>e&&--d,f=-f):(f=Math.pow(10,o)*h,c=Math.round(t/f),d=Math.round(e/f),c*f<t&&++c,d*f>e&&--d),d<c&&.5<=i&&i<2?s(t,e,2*i):[c,d,f]}function l(t,e,i){if(!((i=+i)>0))return[];if((t=+t)==(e=+e))return[t];const n=e<t,[a,r,l]=n?s(e,t,i):s(t,e,i);if(!(r>=a))return[];const o=r-a+1,u=new Array(o);if(n)if(l<0)for(let t=0;t<o;++t)u[t]=(r-t)/-l;else for(let t=0;t<o;++t)u[t]=(r-t)*l;else if(l<0)for(let t=0;t<o;++t)u[t]=(a+t)/-l;else for(let t=0;t<o;++t)u[t]=(a+t)*l;return u}function o(t,e,i){return s(t=+t,e=+e,i=+i)[2]}function u(t,e,i){i=+i;const n=(e=+e)<(t=+t),a=n?o(e,t,i):o(t,e,i);return(n?-1:1)*(a<0?1/-a:a)}},924:(t,e,i)=>{i.d(e,{LL:()=>v,y4:()=>m});var n=i(2705),a=i(6738),r=1,s=2,l=3,o=4,u=1e-6;function h(t){return"translate("+t+",0)"}function c(t){return"translate(0,"+t+")"}function d(t){return e=>+t(e)}function f(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),i=>+t(i)+e}function g(){return!this.__axis}function p(t,e){var i=[],p=null,v=null,m=6,y=6,b=3,x=void 0!==a&&a.devicePixelRatio>1?0:.5,S=t===r||t===o?-1:1,w=t===o||t===s?"x":"y",A=t===r||t===l?h:c;function Z(a){var h=null==p?e.ticks?e.ticks.apply(e,i):e.domain():p,c=null==v?e.tickFormat?e.tickFormat.apply(e,i):n.Z:v,Z=Math.max(m,0)+b,k=e.range(),_=+k[0]+x,C=+k[k.length-1]+x,T=(e.bandwidth?f:d)(e.copy(),x),E=a.selection?a.selection():a,B=E.selectAll(".domain").data([null]),O=E.selectAll(".tick").data(h,e).order(),M=O.exit(),N=O.enter().append("g").attr("class","tick"),D=O.select("line"),z=O.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(N),D=D.merge(N.append("line").attr("stroke","currentColor").attr(w+"2",S*m)),z=z.merge(N.append("text").attr("fill","currentColor").attr(w,S*Z).attr("dy",t===r?"0em":t===l?"0.71em":"0.32em")),a!==E&&(B=B.transition(a),O=O.transition(a),D=D.transition(a),z=z.transition(a),M=M.transition(a).attr("opacity",u).attr("transform",(function(t){return isFinite(t=T(t))?A(t+x):this.getAttribute("transform")})),N.attr("opacity",u).attr("transform",(function(t){var e=this.parentNode.__axis;return A((e&&isFinite(e=e(t))?e:T(t))+x)}))),M.remove(),B.attr("d",t===o||t===s?y?"M"+S*y+","+_+"H"+x+"V"+C+"H"+S*y:"M"+x+","+_+"V"+C:y?"M"+_+","+S*y+"V"+x+"H"+C+"V"+S*y:"M"+_+","+x+"H"+C),O.attr("opacity",1).attr("transform",(function(t){return A(T(t)+x)})),D.attr(w+"2",S*m),z.attr(w,S*Z).text(c),E.filter(g).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===s?"start":t===o?"end":"middle"),E.each((function(){this.__axis=T}))}return Z.scale=function(t){return arguments.length?(e=t,Z):e},Z.ticks=function(){return i=Array.from(arguments),Z},Z.tickArguments=function(t){return arguments.length?(i=null==t?[]:Array.from(t),Z):i.slice()},Z.tickValues=function(t){return arguments.length?(p=null==t?null:Array.from(t),Z):p&&p.slice()},Z.tickFormat=function(t){return arguments.length?(v=t,Z):v},Z.tickSize=function(t){return arguments.length?(m=y=+t,Z):m},Z.tickSizeInner=function(t){return arguments.length?(m=+t,Z):m},Z.tickSizeOuter=function(t){return arguments.length?(y=+t,Z):y},Z.tickPadding=function(t){return arguments.length?(b=+t,Z):b},Z.offset=function(t){return arguments.length?(x=+t,Z):x},Z}function v(t){return p(l,t)}function m(t){return p(o,t)}},2705:(t,e,i)=>{function n(t){return t}i.d(e,{Z:()=>n})},442:(t,e,i)=>{i.d(e,{LL:()=>n.LL,y4:()=>n.y4});var n=i(924)},3137:(t,e,i)=>{i(3399);const{abs:n,max:a,min:r}=Math;function s(t){return{type:t}}["w","e"].map(s),["n","s"].map(s),["n","w","e","s","nw","ne","sw","se"].map(s)},9961:(t,e,i)=>{i(3137)},4447:(t,e,i)=>{i.d(e,{B8:()=>A,ZP:()=>x});var n=i(9531);function a(){}var r=.7,s=1/r,l="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,c=new RegExp(`^rgb\\(${l},${l},${l}\\)$`),d=new RegExp(`^rgb\\(${u},${u},${u}\\)$`),f=new RegExp(`^rgba\\(${l},${l},${l},${o}\\)$`),g=new RegExp(`^rgba\\(${u},${u},${u},${o}\\)$`),p=new RegExp(`^hsl\\(${o},${u},${u}\\)$`),v=new RegExp(`^hsla\\(${o},${u},${u},${o}\\)$`),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function x(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=h.exec(t))?(i=e[1].length,e=parseInt(e[1],16),6===i?S(e):3===i?new Z(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===i?w(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===i?w(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=c.exec(t))?new Z(e[1],e[2],e[3],1):(e=d.exec(t))?new Z(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f.exec(t))?w(e[1],e[2],e[3],e[4]):(e=g.exec(t))?w(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=p.exec(t))?B(e[1],e[2]/100,e[3]/100,1):(e=v.exec(t))?B(e[1],e[2]/100,e[3]/100,e[4]):m.hasOwnProperty(t)?S(m[t]):"transparent"===t?new Z(NaN,NaN,NaN,0):null}function S(t){return new Z(t>>16&255,t>>8&255,255&t,1)}function w(t,e,i,n){return n<=0&&(t=e=i=NaN),new Z(t,e,i,n)}function A(t,e,i,n){return 1===arguments.length?((r=t)instanceof a||(r=x(r)),r?new Z((r=r.rgb()).r,r.g,r.b,r.opacity):new Z):new Z(t,e,i,null==n?1:n);var r}function Z(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function k(){return`#${E(this.r)}${E(this.g)}${E(this.b)}`}function _(){const t=C(this.opacity);return`${1===t?"rgb(":"rgba("}${T(this.r)}, ${T(this.g)}, ${T(this.b)}${1===t?")":`, ${t})`}`}function C(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function T(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function E(t){return((t=T(t))<16?"0":"")+t.toString(16)}function B(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new M(t,e,i,n)}function O(t){if(t instanceof M)return new M(t.h,t.s,t.l,t.opacity);if(t instanceof a||(t=x(t)),!t)return new M;if(t instanceof M)return t;var e=(t=t.rgb()).r/255,i=t.g/255,n=t.b/255,r=Math.min(e,i,n),s=Math.max(e,i,n),l=NaN,o=s-r,u=(s+r)/2;return o?(l=e===s?(i-n)/o+6*(i<n):i===s?(n-e)/o+2:(e-i)/o+4,o/=u<.5?s+r:2-s-r,l*=60):o=u>0&&u<1?0:l,new M(l,o,u,t.opacity)}function M(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function N(t){return(t=(t||0)%360)<0?t+360:t}function D(t){return Math.max(0,Math.min(1,t||0))}function z(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}(0,n.Z)(a,x,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:y,formatHex:y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:b,toString:b}),(0,n.Z)(Z,A,(0,n.l)(a,{brighter(t){return t=null==t?s:Math.pow(s,t),new Z(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?r:Math.pow(r,t),new Z(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Z(T(this.r),T(this.g),T(this.b),C(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatHex8:function(){return`#${E(this.r)}${E(this.g)}${E(this.b)}${E(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:_,toString:_})),(0,n.Z)(M,(function(t,e,i,n){return 1===arguments.length?O(t):new M(t,e,i,null==n?1:n)}),(0,n.l)(a,{brighter(t){return t=null==t?s:Math.pow(s,t),new M(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?r:Math.pow(r,t),new M(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,a=2*i-n;return new Z(z(t>=240?t-240:t+120,a,n),z(t,a,n),z(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new M(N(this.h),D(this.s),D(this.l),C(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=C(this.opacity);return`${1===t?"hsl(":"hsla("}${N(this.h)}, ${100*D(this.s)}%, ${100*D(this.l)}%${1===t?")":`, ${t})`}`}}))},9531:(t,e,i)=>{function n(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function a(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}i.d(e,{Z:()=>n,l:()=>a})},6057:(t,e,i)=>{i.d(e,{Z:()=>o});var n={value:()=>{}};function a(){for(var t,e=0,i=arguments.length,n={};e<i;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new r(n)}function r(t){this._=t}function s(t,e){for(var i,n=0,a=t.length;n<a;++n)if((i=t[n]).name===e)return i.value}function l(t,e,i){for(var a=0,r=t.length;a<r;++a)if(t[a].name===e){t[a]=n,t=t.slice(0,a).concat(t.slice(a+1));break}return null!=i&&t.push({name:e,value:i}),t}r.prototype=a.prototype={constructor:r,on:function(t,e){var i,n,a=this._,r=(n=a,(t+"").trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,u=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<u;)if(i=(t=r[o]).type)a[i]=l(a[i],t.name,e);else if(null==e)for(i in a)a[i]=l(a[i],t.name,null);return this}for(;++o<u;)if((i=(t=r[o]).type)&&(i=s(a[i],t.name)))return i},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new r(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,n,a=new Array(i),r=0;r<i;++r)a[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(n=this._[t]).length;r<i;++r)n[r].value.apply(e,a)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,r=n.length;a<r;++a)n[a].value.apply(e,i)}};const o=a},2067:(t,e,i)=>{function n(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}i.d(e,{tw:()=>n})},5386:(t,e,i)=>{var n,a,r,s;i.d(e,{WU:()=>a,jH:()=>r}),s={thousands:",",grouping:[3],currency:["$",""]},n=(0,i(2150).Z)(s),a=n.format,r=n.formatPrefix},5368:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8613);function a(t){return(t=(0,n.V)(Math.abs(t)))?t[1]:NaN}},8613:(t,e,i)=>{function n(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function a(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}i.d(e,{V:()=>a,Z:()=>n})},5831:(t,e,i)=>{function n(t,e){return function(i,n){for(var a=i.length,r=[],s=0,l=t[0],o=0;a>0&&l>0&&(o+l+1>n&&(l=Math.max(1,n-o)),r.push(i.substring(a-=l,a+l)),!((o+=l+1)>n));)l=t[s=(s+1)%t.length];return r.reverse().join(e)}}i.d(e,{Z:()=>n})},3148:(t,e,i)=>{function n(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}i.d(e,{Z:()=>n})},1281:(t,e,i)=>{i.d(e,{Z:()=>r,y:()=>n});var n,a=i(8613);function r(t,e){var i=(0,a.V)(t,e);if(!i)return t+"";var r=i[0],s=i[1],l=s-(n=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,o=r.length;return l===o?r:l>o?r+new Array(l-o+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+(0,a.V)(t,Math.max(0,e+l-1))[0]}},6006:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8613);function a(t,e){var i=(0,n.V)(t,e);if(!i)return t+"";var a=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+a:a.length>r+1?a.slice(0,r+1)+"."+a.slice(r+1):a+new Array(r-a.length+2).join("0")}},2035:(t,e,i)=>{i.d(e,{Z:()=>a});var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(t){if(!(e=n.exec(t)))throw new Error("invalid format: "+t);var e;return new r({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function r(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}a.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},2403:(t,e,i)=>{function n(t){t:for(var e,i=t.length,n=1,a=-1;n<i;++n)switch(t[n]){case".":a=e=n;break;case"0":0===a&&(a=n),e=n;break;default:if(!+t[n])break t;a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(e+1):t}i.d(e,{Z:()=>n})},3495:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(8613),a=i(1281),r=i(6006);const s={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:n.Z,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>(0,r.Z)(100*t,e),r:r.Z,s:a.Z,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}},5225:(t,e,i)=>{function n(t){return t}i.d(e,{Z:()=>n})},103:(t,e,i)=>{i.d(e,{WU:()=>n.WU});var n=i(5386)},2150:(t,e,i)=>{i.d(e,{Z:()=>f});var n=i(5368),a=i(5831),r=i(3148),s=i(2035),l=i(2403),o=i(3495),u=i(1281),h=i(5225),c=Array.prototype.map,d=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function f(t){var e=void 0===t.grouping||void 0===t.thousands?h.Z:(0,a.Z)(c.call(t.grouping,Number),t.thousands+""),i=void 0===t.currency?"":t.currency[0]+"",f=void 0===t.currency?"":t.currency[1]+"",g=void 0===t.decimal?".":t.decimal+"",p=void 0===t.numerals?h.Z:(0,r.Z)(c.call(t.numerals,String)),v=void 0===t.percent?"%":t.percent+"",m=void 0===t.minus?"−":t.minus+"",y=void 0===t.nan?"NaN":t.nan+"";function b(t){var n=(t=(0,s.Z)(t)).fill,a=t.align,r=t.sign,h=t.symbol,c=t.zero,b=t.width,x=t.comma,S=t.precision,w=t.trim,A=t.type;"n"===A?(x=!0,A="g"):o.Z[A]||(void 0===S&&(S=12),w=!0,A="g"),(c||"0"===n&&"="===a)&&(c=!0,n="0",a="=");var Z="$"===h?i:"#"===h&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",k="$"===h?f:/[%p]/.test(A)?v:"",_=o.Z[A],C=/[defgprs%]/.test(A);function T(t){var i,s,o,h=Z,f=k;if("c"===A)f=_(t)+f,t="";else{var v=(t=+t)<0||1/t<0;if(t=isNaN(t)?y:_(Math.abs(t),S),w&&(t=(0,l.Z)(t)),v&&0==+t&&"+"!==r&&(v=!1),h=(v?"("===r?r:m:"-"===r||"("===r?"":r)+h,f=("s"===A?d[8+u.y/3]:"")+f+(v&&"("===r?")":""),C)for(i=-1,s=t.length;++i<s;)if(48>(o=t.charCodeAt(i))||o>57){f=(46===o?g+t.slice(i+1):t.slice(i))+f,t=t.slice(0,i);break}}x&&!c&&(t=e(t,1/0));var T=h.length+t.length+f.length,E=T<b?new Array(b-T+1).join(n):"";switch(x&&c&&(t=e(E+t,E.length?b-f.length:1/0),E=""),a){case"<":t=h+t+f+E;break;case"=":t=h+E+t+f;break;case"^":t=E.slice(0,T=E.length>>1)+h+t+f+E.slice(T);break;default:t=E+h+t+f}return p(t)}return S=void 0===S?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S)),T.toString=function(){return t+""},T}return{format:b,formatPrefix:function(t,e){var i=b(((t=(0,s.Z)(t)).type="f",t)),a=3*Math.max(-8,Math.min(8,Math.floor((0,n.Z)(e)/3))),r=Math.pow(10,-a),l=d[8+a/3];return function(t){return i(r*t)+l}}}}},3987:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(5368);function a(t){return Math.max(0,-(0,n.Z)(Math.abs(t)))}},7017:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(5368);function a(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,n.Z)(e)/3)))-(0,n.Z)(Math.abs(t)))}},3482:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(5368);function a(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,(0,n.Z)(e)-(0,n.Z)(t))+1}},1606:(t,e,i)=>{i.d(e,{M:()=>a});var n=i(5326);function a(t,e){var i,a=e?e.length:0,r=t?Math.min(a,t.length):0,s=new Array(r),l=new Array(a);for(i=0;i<r;++i)s[i]=(0,n.Z)(t[i],e[i]);for(;i<a;++i)l[i]=e[i];return function(t){for(i=0;i<r;++i)l[i]=s[i](t);return l}}},7265:(t,e,i)=>{function n(t,e,i,n,a){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*i+(1+3*t+3*r-3*s)*n+s*a)/6}function a(t){var e=t.length-1;return function(i){var a=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),r=t[a],s=t[a+1],l=a>0?t[a-1]:2*r-s,o=a<e-1?t[a+2]:2*s-r;return n((i-a/e)*e,l,r,s,o)}}i.d(e,{Z:()=>a,t:()=>n})},6068:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(7265);function a(t){var e=t.length;return function(i){var a=Math.floor(((i%=1)<0?++i:i)*e),r=t[(a+e-1)%e],s=t[a%e],l=t[(a+1)%e],o=t[(a+2)%e];return(0,n.t)((i-a/e)*e,r,s,l,o)}}},8280:(t,e,i)=>{i.d(e,{ZP:()=>r,yi:()=>a});var n=i(2954);function a(t){return 1==(t=+t)?r:function(e,i){return i-e?function(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}(e,i,t):(0,n.Z)(isNaN(e)?i:e)}}function r(t,e){var i=e-t;return i?function(t,e){return function(i){return t+i*e}}(t,i):(0,n.Z)(isNaN(t)?e:t)}},2954:(t,e,i)=>{i.d(e,{Z:()=>n});const n=t=>()=>t},6246:(t,e,i)=>{function n(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}i.d(e,{Z:()=>n})},8063:(t,e,i)=>{function n(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}i.d(e,{Z:()=>n})},5401:(t,e,i)=>{function n(t,e){e||(e=[]);var i,n=t?Math.min(e.length,t.length):0,a=e.slice();return function(r){for(i=0;i<n;++i)a[i]=t[i]*(1-r)+e[i]*r;return a}}function a(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}i.d(e,{Z:()=>n,v:()=>a})},8296:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(5326);function a(t,e){var i,a={},r={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?a[i]=(0,n.Z)(t[i],e[i]):r[i]=e[i];return function(t){for(i in a)r[i]=a[i](t);return r}}},6354:(t,e,i)=>{i.d(e,{ZP:()=>l});var n=i(4447),a=i(7265),r=i(6068),s=i(8280);const l=function t(e){var i=(0,s.yi)(e);function a(t,e){var a=i((t=(0,n.B8)(t)).r,(e=(0,n.B8)(e)).r),r=i(t.g,e.g),l=i(t.b,e.b),o=(0,s.ZP)(t.opacity,e.opacity);return function(e){return t.r=a(e),t.g=r(e),t.b=l(e),t.opacity=o(e),t+""}}return a.gamma=t,a}(1);function o(t){return function(e){var i,a,r=e.length,s=new Array(r),l=new Array(r),o=new Array(r);for(i=0;i<r;++i)a=(0,n.B8)(e[i]),s[i]=a.r||0,l[i]=a.g||0,o[i]=a.b||0;return s=t(s),l=t(l),o=t(o),a.opacity=1,function(t){return a.r=s(t),a.g=l(t),a.b=o(t),a+""}}}o(a.Z),o(r.Z)},4635:(t,e,i)=>{function n(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}i.d(e,{Z:()=>n})},6773:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(8063),a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,r=new RegExp(a.source,"g");function s(t,e){var i,s,l,o=a.lastIndex=r.lastIndex=0,u=-1,h=[],c=[];for(t+="",e+="";(i=a.exec(t))&&(s=r.exec(e));)(l=s.index)>o&&(l=e.slice(o,l),h[u]?h[u]+=l:h[++u]=l),(i=i[0])===(s=s[0])?h[u]?h[u]+=s:h[++u]=s:(h[++u]=null,c.push({i:u,x:(0,n.Z)(i,s)})),o=r.lastIndex;return o<e.length&&(l=e.slice(o),h[u]?h[u]+=l:h[++u]=l),h.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var i,n=0;n<e;++n)h[(i=c[n]).i]=i.x(t);return h.join("")})}},8569:(t,e,i)=>{i.d(e,{Z:()=>r,y:()=>a});var n=180/Math.PI,a={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r(t,e,i,a,r,s){var l,o,u;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(u=t*i+e*a)&&(i-=t*u,a-=e*u),(o=Math.sqrt(i*i+a*a))&&(i/=o,a/=o,u/=o),t*a<e*i&&(t=-t,e=-e,u=-u,l=-l),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*n,skewX:Math.atan(u)*n,scaleX:l,scaleY:o}}},3465:(t,e,i)=>{i.d(e,{Y:()=>s,w:()=>l});var n=i(8063),a=i(5821);function r(t,e,i,a){function r(t){return t.length?t.pop()+" ":""}return function(s,l){var o=[],u=[];return s=t(s),l=t(l),function(t,a,r,s,l,o){if(t!==r||a!==s){var u=l.push("translate(",null,e,null,i);o.push({i:u-4,x:(0,n.Z)(t,r)},{i:u-2,x:(0,n.Z)(a,s)})}else(r||s)&&l.push("translate("+r+e+s+i)}(s.translateX,s.translateY,l.translateX,l.translateY,o,u),function(t,e,i,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:i.push(r(i)+"rotate(",null,a)-2,x:(0,n.Z)(t,e)})):e&&i.push(r(i)+"rotate("+e+a)}(s.rotate,l.rotate,o,u),function(t,e,i,s){t!==e?s.push({i:i.push(r(i)+"skewX(",null,a)-2,x:(0,n.Z)(t,e)}):e&&i.push(r(i)+"skewX("+e+a)}(s.skewX,l.skewX,o,u),function(t,e,i,a,s,l){if(t!==i||e!==a){var o=s.push(r(s)+"scale(",null,",",null,")");l.push({i:o-4,x:(0,n.Z)(t,i)},{i:o-2,x:(0,n.Z)(e,a)})}else 1===i&&1===a||s.push(r(s)+"scale("+i+","+a+")")}(s.scaleX,s.scaleY,l.scaleX,l.scaleY,o,u),s=l=null,function(t){for(var e,i=-1,n=u.length;++i<n;)o[(e=u[i]).i]=e.x(t);return o.join("")}}}var s=r(a.z,"px, ","px)","deg)"),l=r(a.X,", ",")",")")},5821:(t,e,i)=>{i.d(e,{X:()=>s,z:()=>r});var n,a=i(8569);function r(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?a.y:(0,a.Z)(e.a,e.b,e.c,e.d,e.e,e.f)}function s(t){return null==t?a.y:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",t),(t=n.transform.baseVal.consolidate())?(t=t.matrix,(0,a.Z)(t.a,t.b,t.c,t.d,t.e,t.f)):a.y)}},5326:(t,e,i)=>{i.d(e,{Z:()=>d});var n=i(4447),a=i(6354),r=i(1606),s=i(6246),l=i(8063),o=i(8296),u=i(6773),h=i(2954),c=i(5401);function d(t,e){var i,d=typeof e;return null==e||"boolean"===d?(0,h.Z)(e):("number"===d?l.Z:"string"===d?(i=(0,n.ZP)(e))?(e=i,a.ZP):u.Z:e instanceof n.ZP?a.ZP:e instanceof Date?s.Z:(0,c.v)(e)?c.Z:Array.isArray(e)?r.M:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?o.Z:l.Z)(t,e)}},7808:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(5162),a=i(4182),r=i(8973);function s(){var t,e,i=(0,r.Z)().unknown(void 0),l=i.domain,o=i.range,u=0,h=1,c=!1,d=0,f=0,g=.5;function p(){var i=l().length,a=h<u,r=a?h:u,s=a?u:h;t=(s-r)/Math.max(1,i-d+2*f),c&&(t=Math.floor(t)),r+=(s-r-t*(i-d))*g,e=t*(1-d),c&&(r=Math.round(r),e=Math.round(e));var p=(0,n.Z)(i).map((function(e){return r+t*e}));return o(a?p.reverse():p)}return delete i.unknown,i.domain=function(t){return arguments.length?(l(t),p()):l()},i.range=function(t){return arguments.length?([u,h]=t,u=+u,h=+h,p()):[u,h]},i.rangeRound=function(t){return[u,h]=t,u=+u,h=+h,c=!0,p()},i.bandwidth=function(){return e},i.step=function(){return t},i.round=function(t){return arguments.length?(c=!!t,p()):c},i.padding=function(t){return arguments.length?(d=Math.min(1,f=+t),p()):d},i.paddingInner=function(t){return arguments.length?(d=Math.min(1,t),p()):d},i.paddingOuter=function(t){return arguments.length?(f=+t,p()):f},i.align=function(t){return arguments.length?(g=Math.max(0,Math.min(1,t)),p()):g},i.copy=function(){return s(l(),[u,h]).round(c).paddingInner(d).paddingOuter(f).align(g)},a.o.apply(p(),arguments)}},8698:(t,e,i)=>{function n(t){return function(){return t}}i.d(e,{Z:()=>n})},421:(t,e,i)=>{i.d(e,{JG:()=>g,ZP:()=>p});var n=i(2461),a=i(5326),r=i(8063),s=i(4635),l=i(8698),o=i(6938),u=[0,1];function h(t){return t}function c(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:(0,l.Z)(isNaN(e)?NaN:.5)}function d(t,e,i){var n=t[0],a=t[1],r=e[0],s=e[1];return a<n?(n=c(a,n),r=i(s,r)):(n=c(n,a),r=i(r,s)),function(t){return r(n(t))}}function f(t,e,i){var a=Math.min(t.length,e.length)-1,r=new Array(a),s=new Array(a),l=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<a;)r[l]=c(t[l],t[l+1]),s[l]=i(e[l],e[l+1]);return function(e){var i=(0,n.ZP)(t,e,1,a)-1;return s[i](r[i](e))}}function g(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function p(){return function(){var t,e,i,n,l,c,g=u,p=u,v=a.Z,m=h;function y(){var t,e,i,a=Math.min(g.length,p.length);return m!==h&&(t=g[0],e=g[a-1],t>e&&(i=t,t=e,e=i),m=function(i){return Math.max(t,Math.min(e,i))}),n=a>2?f:d,l=c=null,b}function b(e){return null==e||isNaN(e=+e)?i:(l||(l=n(g.map(t),p,v)))(t(m(e)))}return b.invert=function(i){return m(e((c||(c=n(p,g.map(t),r.Z)))(i)))},b.domain=function(t){return arguments.length?(g=Array.from(t,o.Z),y()):g.slice()},b.range=function(t){return arguments.length?(p=Array.from(t),y()):p.slice()},b.rangeRound=function(t){return p=Array.from(t),v=s.Z,y()},b.clamp=function(t){return arguments.length?(m=!!t||h,y()):m!==h},b.interpolate=function(t){return arguments.length?(v=t,y()):v},b.unknown=function(t){return arguments.length?(i=t,b):i},function(i,n){return t=i,e=n,y()}}()(h,h)}},1770:(t,e,i)=>{i.d(e,{BY:()=>a.Z,ti:()=>n.Z});var n=i(7808),a=i(5036)},4182:(t,e,i)=>{function n(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}i.d(e,{o:()=>n})},5036:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(3896),a=i(421),r=i(4182),s=i(9879);function l(){var t=(0,a.ZP)();return t.copy=function(){return(0,a.JG)(t,l())},r.o.apply(t,arguments),function(t){var e=t.domain;return t.ticks=function(t){var i=e();return(0,n.ZP)(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,i){var n=e();return(0,s.Z)(n[0],n[n.length-1],null==t?10:t,i)},t.nice=function(i){null==i&&(i=10);var a,r,s=e(),l=0,o=s.length-1,u=s[l],h=s[o],c=10;for(h<u&&(r=u,u=h,h=r,r=l,l=o,o=r);c-- >0;){if((r=(0,n.G9)(u,h,i))===a)return s[l]=u,s[o]=h,e(s);if(r>0)u=Math.floor(u/r)*r,h=Math.ceil(h/r)*r;else{if(!(r<0))break;u=Math.ceil(u*r)/r,h=Math.floor(h*r)/r}a=r}return t},t}(t)}},6938:(t,e,i)=>{function n(t){return+t}i.d(e,{Z:()=>n})},8973:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(909),a=i(4182);const r=Symbol("implicit");function s(){var t=new n.L,e=[],i=[],l=r;function o(n){let a=t.get(n);if(void 0===a){if(l!==r)return l;t.set(n,a=e.push(n)-1)}return i[a%i.length]}return o.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new n.L;for(const n of i)t.has(n)||t.set(n,e.push(n)-1);return o},o.range=function(t){return arguments.length?(i=Array.from(t),o):i.slice()},o.unknown=function(t){return arguments.length?(l=t,o):l},o.copy=function(){return s(e,i).unknown(l)},a.o.apply(o,arguments),o}},9879:(t,e,i)=>{i.d(e,{Z:()=>u});var n=i(3896),a=i(2035),r=i(7017),s=i(5386),l=i(3482),o=i(3987);function u(t,e,i,u){var h,c=(0,n.ly)(t,e,i);switch((u=(0,a.Z)(null==u?",f":u)).type){case"s":var d=Math.max(Math.abs(t),Math.abs(e));return null!=u.precision||isNaN(h=(0,r.Z)(c,d))||(u.precision=h),(0,s.jH)(u,d);case"":case"e":case"g":case"p":case"r":null!=u.precision||isNaN(h=(0,l.Z)(c,Math.max(Math.abs(t),Math.abs(e))))||(u.precision=h-("e"===u.type));break;case"f":case"%":null!=u.precision||isNaN(h=(0,o.Z)(c))||(u.precision=h-2*("%"===u.type))}return(0,s.WU)(u)}},9898:(t,e,i)=>{function n(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}i.d(e,{Z:()=>n})},364:(t,e,i)=>{function n(t){return function(){return t}}i.d(e,{Z:()=>n})},4708:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(1663),a=i(1226);function r(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===a.P&&e.documentElement.namespaceURI===a.P?e.createElement(t):e.createElementNS(i,t)}}function s(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function l(t){var e=(0,n.Z)(t);return(e.local?s:r)(e)}},3950:(t,e,i)=>{i.d(e,{Ys:()=>n.Z,td:()=>a.Z});var n=i(3838),a=i(4264)},4421:(t,e,i)=>{function n(t){return function(){return this.matches(t)}}function a(t){return function(e){return e.matches(t)}}i.d(e,{P:()=>a,Z:()=>n})},1663:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(1226);function a(t){var e=t+="",i=e.indexOf(":");return i>=0&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),n.Z.hasOwnProperty(e)?{space:n.Z[e],local:t}:t}},1226:(t,e,i)=>{i.d(e,{P:()=>n,Z:()=>a});var n="http://www.w3.org/1999/xhtml";const a={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},3838:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8390);function a(t){return"string"==typeof t?new n.Y1([[document.querySelector(t)]],[document.documentElement]):new n.Y1([[t]],n.Jz)}},4264:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(9898),a=i(8390);function r(t){return"string"==typeof t?new a.Y1([document.querySelectorAll(t)],[document.documentElement]):new a.Y1([(0,n.Z)(t)],a.Jz)}},7911:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(4708);function a(t){var e="function"==typeof t?t:(0,n.Z)(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}},7405:(t,e,i)=>{i.d(e,{Z:()=>h});var n=i(1663);function a(t){return function(){this.removeAttribute(t)}}function r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function s(t,e){return function(){this.setAttribute(t,e)}}function l(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function o(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}function u(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function h(t,e){var i=(0,n.Z)(t);if(arguments.length<2){var h=this.node();return i.local?h.getAttributeNS(i.space,i.local):h.getAttribute(i)}return this.each((null==e?i.local?r:a:"function"==typeof e?i.local?u:o:i.local?l:s)(i,e))}},5772:(t,e,i)=>{function n(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}i.d(e,{Z:()=>n})},5016:(t,e,i)=>{function n(t){return t.trim().split(/^|\s+/)}function a(t){return t.classList||new r(t)}function r(t){this._node=t,this._names=n(t.getAttribute("class")||"")}function s(t,e){for(var i=a(t),n=-1,r=e.length;++n<r;)i.add(e[n])}function l(t,e){for(var i=a(t),n=-1,r=e.length;++n<r;)i.remove(e[n])}function o(t){return function(){s(this,t)}}function u(t){return function(){l(this,t)}}function h(t,e){return function(){(e.apply(this,arguments)?s:l)(this,t)}}function c(t,e){var i=n(t+"");if(arguments.length<2){for(var r=a(this.node()),s=-1,l=i.length;++s<l;)if(!r.contains(i[s]))return!1;return!0}return this.each(("function"==typeof e?h:e?o:u)(i,e))}i.d(e,{Z:()=>c}),r.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}},5122:(t,e,i)=>{function n(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(t){return this.select(t?a:n)}i.d(e,{Z:()=>r})},4764:(t,e,i)=>{i.d(e,{Z:()=>u});var n=i(8390),a=i(2270),r=i(364);function s(t,e,i,n,r,s){for(var l,o=0,u=e.length,h=s.length;o<h;++o)(l=e[o])?(l.__data__=s[o],n[o]=l):i[o]=new a.F(t,s[o]);for(;o<u;++o)(l=e[o])&&(r[o]=l)}function l(t,e,i,n,r,s,l){var o,u,h,c=new Map,d=e.length,f=s.length,g=new Array(d);for(o=0;o<d;++o)(u=e[o])&&(g[o]=h=l.call(u,u.__data__,o,e)+"",c.has(h)?r[o]=u:c.set(h,u));for(o=0;o<f;++o)h=l.call(t,s[o],o,s)+"",(u=c.get(h))?(n[o]=u,u.__data__=s[o],c.delete(h)):i[o]=new a.F(t,s[o]);for(o=0;o<d;++o)(u=e[o])&&c.get(g[o])===u&&(r[o]=u)}function o(t){return t.__data__}function u(t,e){if(!arguments.length)return Array.from(this,o);var i=e?l:s,a=this._parents,u=this._groups;"function"!=typeof t&&(t=(0,r.Z)(t));for(var c=u.length,d=new Array(c),f=new Array(c),g=new Array(c),p=0;p<c;++p){var v=a[p],m=u[p],y=m.length,b=h(t.call(v,v&&v.__data__,p,a)),x=b.length,S=f[p]=new Array(x),w=d[p]=new Array(x);i(v,m,S,w,g[p]=new Array(y),b,e);for(var A,Z,k=0,_=0;k<x;++k)if(A=S[k]){for(k>=_&&(_=k+1);!(Z=w[_])&&++_<x;);A._next=Z||null}}return(d=new n.Y1(d,a))._enter=f,d._exit=g,d}function h(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}},5667:(t,e,i)=>{function n(t){return arguments.length?this.property("__data__",t):this.node().__data__}i.d(e,{Z:()=>n})},3790:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(9920);function a(t,e,i){var a=(0,n.Z)(t),r=a.CustomEvent;"function"==typeof r?r=new r(e,i):(r=a.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function r(t,e){return function(){return a(this,t,e)}}function s(t,e){return function(){return a(this,t,e.apply(this,arguments))}}function l(t,e){return this.each(("function"==typeof e?s:r)(t,e))}},6347:(t,e,i)=>{function n(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var a,r=e[i],s=0,l=r.length;s<l;++s)(a=r[s])&&t.call(a,a.__data__,s,r);return this}i.d(e,{Z:()=>n})},7844:(t,e,i)=>{function n(){return!this.node()}i.d(e,{Z:()=>n})},2270:(t,e,i)=>{i.d(e,{F:()=>s,Z:()=>r});var n=i(1586),a=i(8390);function r(){return new a.Y1(this._enter||this._groups.map(n.Z),this._parents)}function s(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}s.prototype={constructor:s,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},6790:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(1586),a=i(8390);function r(){return new a.Y1(this._exit||this._groups.map(n.Z),this._parents)}},5777:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(8390),a=i(4421);function r(t){"function"!=typeof t&&(t=(0,a.Z)(t));for(var e=this._groups,i=e.length,r=new Array(i),s=0;s<i;++s)for(var l,o=e[s],u=o.length,h=r[s]=[],c=0;c<u;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&h.push(l);return new n.Y1(r,this._parents)}},655:(t,e,i)=>{function n(){this.innerHTML=""}function a(t){return function(){this.innerHTML=t}}function r(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function s(t){return arguments.length?this.each(null==t?n:("function"==typeof t?r:a)(t)):this.node().innerHTML}i.d(e,{Z:()=>s})},8390:(t,e,i)=>{i.d(e,{Jz:()=>L,Y1:()=>P,ZP:()=>F});var n=i(486),a=i(6932),r=i(4735),s=i(467),l=i(5777),o=i(4764),u=i(2270),h=i(6790),c=i(1474),d=i(6359),f=i(4729),g=i(9548),p=i(5772),v=i(426),m=i(838),y=i(6909),b=i(7844),x=i(6347),S=i(7405),w=i(2627),A=i(9714),Z=i(5016),k=i(8386),_=i(655),C=i(1903),T=i(6017),E=i(7911),B=i(2504),O=i(8349),M=i(5122),N=i(5667),D=i(2017),z=i(3790),V=i(3536),L=[null];function P(t,e){this._groups=t,this._parents=e}function I(){return new P([[document.documentElement]],L)}P.prototype=I.prototype={constructor:P,select:n.Z,selectAll:a.Z,selectChild:r.Z,selectChildren:s.Z,filter:l.Z,data:o.Z,enter:u.Z,exit:h.Z,join:c.Z,merge:d.Z,selection:function(){return this},order:f.Z,sort:g.Z,call:p.Z,nodes:v.Z,node:m.Z,size:y.Z,empty:b.Z,each:x.Z,attr:S.Z,style:w.Z,property:A.Z,classed:Z.Z,text:k.Z,html:_.Z,raise:C.Z,lower:T.Z,append:E.Z,insert:B.Z,remove:O.Z,clone:M.Z,datum:N.Z,on:D.Z,dispatch:z.Z,[Symbol.iterator]:V.Z};const F=I},2504:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(4708),a=i(3010);function r(){return null}function s(t,e){var i="function"==typeof t?t:(0,n.Z)(t),s=null==e?r:"function"==typeof e?e:(0,a.Z)(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),s.apply(this,arguments)||null)}))}},3536:(t,e,i)=>{function*n(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n,a=t[e],r=0,s=a.length;r<s;++r)(n=a[r])&&(yield n)}i.d(e,{Z:()=>n})},1474:(t,e,i)=>{function n(t,e,i){var n=this.enter(),a=this,r=this.exit();return"function"==typeof t?(n=t(n))&&(n=n.selection()):n=n.append(t+""),null!=e&&(a=e(a))&&(a=a.selection()),null==i?r.remove():i(r),n&&a?n.merge(a).order():a}i.d(e,{Z:()=>n})},6017:(t,e,i)=>{function n(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function a(){return this.each(n)}i.d(e,{Z:()=>a})},6359:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8390);function a(t){for(var e=t.selection?t.selection():t,i=this._groups,a=e._groups,r=i.length,s=a.length,l=Math.min(r,s),o=new Array(r),u=0;u<l;++u)for(var h,c=i[u],d=a[u],f=c.length,g=o[u]=new Array(f),p=0;p<f;++p)(h=c[p]||d[p])&&(g[p]=h);for(;u<r;++u)o[u]=i[u];return new n.Y1(o,this._parents)}},838:(t,e,i)=>{function n(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],a=0,r=n.length;a<r;++a){var s=n[a];if(s)return s}return null}i.d(e,{Z:()=>n})},426:(t,e,i)=>{function n(){return Array.from(this)}i.d(e,{Z:()=>n})},2017:(t,e,i)=>{function n(t){return function(){var e=this.__on;if(e){for(var i,n=0,a=-1,r=e.length;n<r;++n)i=e[n],t.type&&i.type!==t.type||i.name!==t.name?e[++a]=i:this.removeEventListener(i.type,i.listener,i.options);++a?e.length=a:delete this.__on}}}function a(t,e,i){return function(){var n,a=this.__on,r=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(a)for(var s=0,l=a.length;s<l;++s)if((n=a[s]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=r,n.options=i),void(n.value=e);this.addEventListener(t.type,r,i),n={type:t.type,name:t.name,value:e,listener:r,options:i},a?a.push(n):this.__on=[n]}}function r(t,e,i){var r,s,l=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}))}(t+""),o=l.length;if(!(arguments.length<2)){for(u=e?a:n,r=0;r<o;++r)this.each(u(l[r],e,i));return this}var u=this.node().__on;if(u)for(var h,c=0,d=u.length;c<d;++c)for(r=0,h=u[c];r<o;++r)if((s=l[r]).type===h.type&&s.name===h.name)return h.value}i.d(e,{Z:()=>r})},4729:(t,e,i)=>{function n(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,a=t[e],r=a.length-1,s=a[r];--r>=0;)(n=a[r])&&(s&&4^n.compareDocumentPosition(s)&&s.parentNode.insertBefore(n,s),s=n);return this}i.d(e,{Z:()=>n})},9714:(t,e,i)=>{function n(t){return function(){delete this[t]}}function a(t,e){return function(){this[t]=e}}function r(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}function s(t,e){return arguments.length>1?this.each((null==e?n:"function"==typeof e?r:a)(t,e)):this.node()[t]}i.d(e,{Z:()=>s})},1903:(t,e,i)=>{function n(){this.nextSibling&&this.parentNode.appendChild(this)}function a(){return this.each(n)}i.d(e,{Z:()=>a})},8349:(t,e,i)=>{function n(){var t=this.parentNode;t&&t.removeChild(this)}function a(){return this.each(n)}i.d(e,{Z:()=>a})},486:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(8390),a=i(3010);function r(t){"function"!=typeof t&&(t=(0,a.Z)(t));for(var e=this._groups,i=e.length,r=new Array(i),s=0;s<i;++s)for(var l,o,u=e[s],h=u.length,c=r[s]=new Array(h),d=0;d<h;++d)(l=u[d])&&(o=t.call(l,l.__data__,d,u))&&("__data__"in l&&(o.__data__=l.__data__),c[d]=o);return new n.Y1(r,this._parents)}},6932:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(8390),a=i(9898),r=i(9701);function s(t){t="function"==typeof t?function(t){return function(){return(0,a.Z)(t.apply(this,arguments))}}(t):(0,r.Z)(t);for(var e=this._groups,i=e.length,s=[],l=[],o=0;o<i;++o)for(var u,h=e[o],c=h.length,d=0;d<c;++d)(u=h[d])&&(s.push(t.call(u,u.__data__,d,h)),l.push(u));return new n.Y1(s,l)}},4735:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(4421),a=Array.prototype.find;function r(){return this.firstElementChild}function s(t){return this.select(null==t?r:function(t){return function(){return a.call(this.children,t)}}("function"==typeof t?t:(0,n.P)(t)))}},467:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(4421),a=Array.prototype.filter;function r(){return Array.from(this.children)}function s(t){return this.selectAll(null==t?r:function(t){return function(){return a.call(this.children,t)}}("function"==typeof t?t:(0,n.P)(t)))}},6909:(t,e,i)=>{function n(){let t=0;for(const e of this)++t;return t}i.d(e,{Z:()=>n})},9548:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8390);function a(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=r);for(var i=this._groups,a=i.length,s=new Array(a),l=0;l<a;++l){for(var o,u=i[l],h=u.length,c=s[l]=new Array(h),d=0;d<h;++d)(o=u[d])&&(c[d]=o);c.sort(e)}return new n.Y1(s,this._parents).order()}function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},1586:(t,e,i)=>{function n(t){return new Array(t.length)}i.d(e,{Z:()=>n})},2627:(t,e,i)=>{i.d(e,{S:()=>o,Z:()=>l});var n=i(9920);function a(t){return function(){this.style.removeProperty(t)}}function r(t,e,i){return function(){this.style.setProperty(t,e,i)}}function s(t,e,i){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function l(t,e,i){return arguments.length>1?this.each((null==e?a:"function"==typeof e?s:r)(t,e,null==i?"":i)):o(this.node(),t)}function o(t,e){return t.style.getPropertyValue(e)||(0,n.Z)(t).getComputedStyle(t,null).getPropertyValue(e)}},8386:(t,e,i)=>{function n(){this.textContent=""}function a(t){return function(){this.textContent=t}}function r(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function s(t){return arguments.length?this.each(null==t?n:("function"==typeof t?r:a)(t)):this.node().textContent}i.d(e,{Z:()=>s})},3010:(t,e,i)=>{function n(){}function a(t){return null==t?n:function(){return this.querySelector(t)}}i.d(e,{Z:()=>a})},9701:(t,e,i)=>{function n(){return[]}function a(t){return null==t?n:function(){return this.querySelectorAll(t)}}i.d(e,{Z:()=>a})},9920:(t,e,i)=>{function n(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}i.d(e,{Z:()=>n})},6084:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(1739);function a(t,e,i){var a=new n.B7;return e=null==e?0:+e,a.restart((i=>{a.stop(),t(i+e)}),e,i),a}},1739:(t,e,i)=>{i.d(e,{B7:()=>m,HT:()=>y,zO:()=>p});var n,a,r=i(6738),s=0,l=0,o=0,u=1e3,h=0,c=0,d=0,f="object"==typeof performance&&performance.now?performance:Date,g="object"==typeof r&&r.requestAnimationFrame?r.requestAnimationFrame.bind(r):function(t){setTimeout(t,17)};function p(){return c||(g(v),c=f.now()+d)}function v(){c=0}function m(){this._call=this._time=this._next=null}function y(t,e,i){var n=new m;return n.restart(t,e,i),n}function b(){c=(h=f.now())+d,s=l=0;try{!function(){p(),++s;for(var t,e=n;e;)(t=c-e._time)>=0&&e._call.call(void 0,t),e=e._next;--s}()}finally{s=0,function(){for(var t,e,i=n,r=1/0;i;)i._call?(r>i._time&&(r=i._time),t=i,i=i._next):(e=i._next,i._next=null,i=t?t._next=e:n=e);a=t,S(r)}(),c=0}}function x(){var t=f.now(),e=t-h;e>u&&(d-=e,h=t)}function S(t){s||(l&&(l=clearTimeout(l)),t-c>24?(t<1/0&&(l=setTimeout(b,t-f.now()-d)),o&&(o=clearInterval(o))):(o||(h=f.now(),o=setInterval(x,u)),s=1,g(b)))}m.prototype=y.prototype={constructor:m,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?p():+i)+(null==e?0:+e),this._next||a===this||(a?a._next=this:n=this,a=this),this._call=t,this._time=i,S()},stop:function(){this._call&&(this._call=null,this._time=1/0,S())}}},3399:(t,e,i)=>{i(5781)},8640:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(9882);function a(t,e){var i,a,r,s=t.__transition,l=!0;if(s){for(r in e=null==e?null:e+"",s)(i=s[r]).name===e?(a=i.state>n.KE&&i.state<n.wS,i.state=n.Ku,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete s[r]):l=!1;l&&delete t.__transition}}},5781:(t,e,i)=>{var n=i(8390),a=i(1689),r=i(7207);n.ZP.prototype.interrupt=a.Z,n.ZP.prototype.transition=r.Z},1689:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8640);function a(t){return this.each((function(){(0,n.Z)(this,t)}))}},7207:(t,e,i)=>{i.d(e,{Z:()=>u});var n=i(6365),a=i(9882),r=i(2067),s=i(1739),l={time:null,delay:0,duration:250,ease:r.tw};function o(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}function u(t){var e,i;t instanceof n.uT?(e=t._id,t=t._name):(e=(0,n.pZ)(),(i=l).time=(0,s.zO)(),t=null==t?null:t+"");for(var r=this._groups,u=r.length,h=0;h<u;++h)for(var c,d=r[h],f=d.length,g=0;g<f;++g)(c=d[g])&&(0,a.ZP)(c,t,e,g,d,i||o(c,e));return new n.uT(r,this._parents,t,e)}},5114:(t,e,i)=>{i.d(e,{Z:()=>f});var n=i(3465),a=i(1663),r=i(9040),s=i(4548);function l(t){return function(){this.removeAttribute(t)}}function o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function u(t,e,i){var n,a,r=i+"";return function(){var s=this.getAttribute(t);return s===r?null:s===n?a:a=e(n=s,i)}}function h(t,e,i){var n,a,r=i+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===n?a:a=e(n=s,i)}}function c(t,e,i){var n,a,r;return function(){var s,l,o=i(this);if(null!=o)return(s=this.getAttribute(t))===(l=o+"")?null:s===n&&l===a?r:(a=l,r=e(n=s,o));this.removeAttribute(t)}}function d(t,e,i){var n,a,r;return function(){var s,l,o=i(this);if(null!=o)return(s=this.getAttributeNS(t.space,t.local))===(l=o+"")?null:s===n&&l===a?r:(a=l,r=e(n=s,o));this.removeAttributeNS(t.space,t.local)}}function f(t,e){var i=(0,a.Z)(t),f="transform"===i?n.w:s.Z;return this.attrTween(t,"function"==typeof e?(i.local?d:c)(i,f,(0,r.x)(this,"attr."+t,e)):null==e?(i.local?o:l)(i):(i.local?h:u)(i,f,e))}},8061:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(1663);function a(t,e){var i,n;function a(){var a=e.apply(this,arguments);return a!==n&&(i=(n=a)&&function(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}(t,a)),i}return a._value=e,a}function r(t,e){var i,n;function a(){var a=e.apply(this,arguments);return a!==n&&(i=(n=a)&&function(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}(t,a)),i}return a._value=e,a}function s(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;var s=(0,n.Z)(t);return this.tween(i,(s.local?a:r)(s,e))}},6882:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(9882);function a(t,e){return function(){(0,n.S1)(this,t).delay=+e.apply(this,arguments)}}function r(t,e){return e=+e,function(){(0,n.S1)(this,t).delay=e}}function s(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?a:r)(e,t)):(0,n.U2)(this.node(),e).delay}},4786:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(9882);function a(t,e){return function(){(0,n.t8)(this,t).duration=+e.apply(this,arguments)}}function r(t,e){return e=+e,function(){(0,n.t8)(this,t).duration=e}}function s(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?a:r)(e,t)):(0,n.U2)(this.node(),e).duration}},3353:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(9882);function a(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){(0,n.t8)(this,t).ease=e}}(e,t)):(0,n.U2)(this.node(),e).ease}},5778:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(9882);function a(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var i=e.apply(this,arguments);if("function"!=typeof i)throw new Error;(0,n.t8)(this,t).ease=i}}(this._id,t))}},5355:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(9882);function a(){var t,e,i=this,a=i._id,r=i.size();return new Promise((function(s,l){var o={value:l},u={value:function(){0==--r&&s()}};i.each((function(){var i=(0,n.t8)(this,a),r=i.on;r!==t&&((e=(t=r).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),i.on=e})),0===r&&s()}))}},9579:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(4421),a=i(6365);function r(t){"function"!=typeof t&&(t=(0,n.Z)(t));for(var e=this._groups,i=e.length,r=new Array(i),s=0;s<i;++s)for(var l,o=e[s],u=o.length,h=r[s]=[],c=0;c<u;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&h.push(l);return new a.uT(r,this._parents,this._name,this._id)}},6365:(t,e,i)=>{i.d(e,{pZ:()=>_,uT:()=>k});var n=i(8390),a=i(5114),r=i(8061),s=i(6882),l=i(4786),o=i(3353),u=i(5778),h=i(9579),c=i(9858),d=i(7349),f=i(9935),g=i(4417),p=i(5174),v=i(3836),m=i(8508),y=i(5109),b=i(5699),x=i(4987),S=i(4085),w=i(9040),A=i(5355),Z=0;function k(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function _(){return++Z}var C=n.ZP.prototype;k.prototype=function(t){return(0,n.ZP)().transition(t)}.prototype={constructor:k,select:g.Z,selectAll:p.Z,selectChild:C.selectChild,selectChildren:C.selectChildren,filter:h.Z,merge:c.Z,selection:v.Z,transition:S.Z,call:C.call,nodes:C.nodes,node:C.node,size:C.size,empty:C.empty,each:C.each,on:d.Z,attr:a.Z,attrTween:r.Z,style:m.Z,styleTween:y.Z,text:b.Z,textTween:x.Z,remove:f.Z,tween:w.Z,delay:s.Z,duration:l.Z,ease:o.Z,easeVarying:u.Z,end:A.Z,[Symbol.iterator]:C[Symbol.iterator]}},4548:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(4447),a=i(8063),r=i(6354),s=i(6773);function l(t,e){var i;return("number"==typeof e?a.Z:e instanceof n.ZP?r.ZP:(i=(0,n.ZP)(e))?(e=i,r.ZP):s.Z)(t,e)}},9858:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(6365);function a(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,a=e.length,r=i.length,s=Math.min(a,r),l=new Array(a),o=0;o<s;++o)for(var u,h=e[o],c=i[o],d=h.length,f=l[o]=new Array(d),g=0;g<d;++g)(u=h[g]||c[g])&&(f[g]=u);for(;o<a;++o)l[o]=e[o];return new n.uT(l,this._parents,this._name,this._id)}},7349:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(9882);function a(t,e){var i=this._id;return arguments.length<2?(0,n.U2)(this.node(),i).on.on(t):this.each(function(t,e,i){var a,r,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?n.S1:n.t8;return function(){var n=s(this,t),l=n.on;l!==a&&(r=(a=l).copy()).on(e,i),n.on=r}}(i,t,e))}},9935:(t,e,i)=>{function n(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}));var t}i.d(e,{Z:()=>n})},9882:(t,e,i)=>{i.d(e,{KE:()=>h,Ku:()=>g,S1:()=>v,U2:()=>y,ZP:()=>p,t8:()=>m,wS:()=>f});var n=i(6057),a=i(1739),r=i(6084),s=(0,n.Z)("start","end","cancel","interrupt"),l=[],o=0,u=1,h=2,c=3,d=4,f=5,g=6;function p(t,e,i,n,p,v){var m=t.__transition;if(m){if(i in m)return}else t.__transition={};!function(t,e,i){var n,s=t.__transition;function l(a){var f,v,m,y;if(i.state!==u)return p();for(f in s)if((y=s[f]).name===i.name){if(y.state===c)return(0,r.Z)(l);y.state===d?(y.state=g,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete s[f]):+f<e&&(y.state=g,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete s[f])}if((0,r.Z)((function(){i.state===c&&(i.state=d,i.timer.restart(o,i.delay,i.time),o(a))})),i.state=h,i.on.call("start",t,t.__data__,i.index,i.group),i.state===h){for(i.state=c,n=new Array(m=i.tween.length),f=0,v=-1;f<m;++f)(y=i.tween[f].value.call(t,t.__data__,i.index,i.group))&&(n[++v]=y);n.length=v+1}}function o(e){for(var a=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(p),i.state=f,1),r=-1,s=n.length;++r<s;)n[r].call(t,a);i.state===f&&(i.on.call("end",t,t.__data__,i.index,i.group),p())}function p(){for(var n in i.state=g,i.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=i,i.timer=(0,a.HT)((function(t){i.state=u,i.timer.restart(l,i.delay,i.time),i.delay<=t&&l(t-i.delay)}),0,i.time)}(t,i,{name:e,index:n,group:p,on:s,tween:l,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:o})}function v(t,e){var i=y(t,e);if(i.state>o)throw new Error("too late; already scheduled");return i}function m(t,e){var i=y(t,e);if(i.state>c)throw new Error("too late; already running");return i}function y(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}},4417:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(3010),a=i(6365),r=i(9882);function s(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=(0,n.Z)(t));for(var s=this._groups,l=s.length,o=new Array(l),u=0;u<l;++u)for(var h,c,d=s[u],f=d.length,g=o[u]=new Array(f),p=0;p<f;++p)(h=d[p])&&(c=t.call(h,h.__data__,p,d))&&("__data__"in h&&(c.__data__=h.__data__),g[p]=c,(0,r.ZP)(g[p],e,i,p,g,(0,r.U2)(h,i)));return new a.uT(o,this._parents,e,i)}},5174:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(9701),a=i(6365),r=i(9882);function s(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=(0,n.Z)(t));for(var s=this._groups,l=s.length,o=[],u=[],h=0;h<l;++h)for(var c,d=s[h],f=d.length,g=0;g<f;++g)if(c=d[g]){for(var p,v=t.call(c,c.__data__,g,d),m=(0,r.U2)(c,i),y=0,b=v.length;y<b;++y)(p=v[y])&&(0,r.ZP)(p,e,i,y,v,m);o.push(v),u.push(c)}return new a.uT(o,u,e,i)}},3836:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8390).ZP.prototype.constructor;function a(){return new n(this._groups,this._parents)}},8508:(t,e,i)=>{i.d(e,{Z:()=>u});var n=i(3465),a=i(2627),r=i(9882),s=i(9040),l=i(4548);function o(t){return function(){this.style.removeProperty(t)}}function u(t,e,i){var u="transform"==(t+="")?n.Y:l.Z;return null==e?this.styleTween(t,function(t,e){var i,n,r;return function(){var s=(0,a.S)(this,t),l=(this.style.removeProperty(t),(0,a.S)(this,t));return s===l?null:s===i&&l===n?r:r=e(i=s,n=l)}}(t,u)).on("end.style."+t,o(t)):"function"==typeof e?this.styleTween(t,function(t,e,i){var n,r,s;return function(){var l=(0,a.S)(this,t),o=i(this),u=o+"";return null==o&&(this.style.removeProperty(t),u=o=(0,a.S)(this,t)),l===u?null:l===n&&u===r?s:(r=u,s=e(n=l,o))}}(t,u,(0,s.x)(this,"style."+t,e))).each(function(t,e){var i,n,a,s,l="style."+e,u="end."+l;return function(){var h=(0,r.t8)(this,t),c=h.on,d=null==h.value[l]?s||(s=o(e)):void 0;c===i&&a===d||(n=(i=c).copy()).on(u,a=d),h.on=n}}(this._id,t)):this.styleTween(t,function(t,e,i){var n,r,s=i+"";return function(){var l=(0,a.S)(this,t);return l===s?null:l===n?r:r=e(n=l,i)}}(t,u,e),i).on("end.style."+t,null)}},5109:(t,e,i)=>{function n(t,e,i){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,function(t,e,i){var n,a;function r(){var r=e.apply(this,arguments);return r!==a&&(n=(a=r)&&function(t,e,i){return function(n){this.style.setProperty(t,e.call(this,n),i)}}(t,r,i)),n}return r._value=e,r}(t,e,null==i?"":i))}i.d(e,{Z:()=>n})},5699:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(9040);function a(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}((0,n.x)(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))}},4987:(t,e,i)=>{function n(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,i;function n(){var n=t.apply(this,arguments);return n!==i&&(e=(i=n)&&function(t){return function(e){this.textContent=t.call(this,e)}}(n)),e}return n._value=t,n}(t))}i.d(e,{Z:()=>n})},4085:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(6365),a=i(9882);function r(){for(var t=this._name,e=this._id,i=(0,n.pZ)(),r=this._groups,s=r.length,l=0;l<s;++l)for(var o,u=r[l],h=u.length,c=0;c<h;++c)if(o=u[c]){var d=(0,a.U2)(o,e);(0,a.ZP)(o,t,i,c,u,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new n.uT(r,this._parents,t,i)}},9040:(t,e,i)=>{i.d(e,{Z:()=>s,x:()=>l});var n=i(9882);function a(t,e){var i,a;return function(){var r=(0,n.t8)(this,t),s=r.tween;if(s!==i)for(var l=0,o=(a=i=s).length;l<o;++l)if(a[l].name===e){(a=a.slice()).splice(l,1);break}r.tween=a}}function r(t,e,i){var a,r;if("function"!=typeof i)throw new Error;return function(){var s=(0,n.t8)(this,t),l=s.tween;if(l!==a){r=(a=l).slice();for(var o={name:e,value:i},u=0,h=r.length;u<h;++u)if(r[u].name===e){r[u]=o;break}u===h&&r.push(o)}s.tween=r}}function s(t,e){var i=this._id;if(t+="",arguments.length<2){for(var s,l=(0,n.U2)(this.node(),i).tween,o=0,u=l.length;o<u;++o)if((s=l[o]).name===t)return s.value;return null}return this.each((null==e?a:r)(i,t,e))}function l(t,e,i){var a=t._id;return t.each((function(){var t=(0,n.t8)(this,a);(t.value||(t.value={}))[e]=i.apply(this,arguments)})),function(t){return(0,n.U2)(t,a).value[e]}}},5180:(t,e,i)=>{i(1395),i(2714)},2714:(t,e,i)=>{function n(t,e,i){this.k=t,this.x=e,this.y=i}n.prototype={constructor:n,scale:function(t){return 1===t?this:new n(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new n(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new n(1,0,0),n.prototype},1395:(t,e,i)=>{i(3399),i(2714)},8976:(t,e,i)=>{i.d(e,{BYU:()=>s.BY,Fp7:()=>n.Fp,LLu:()=>a.LL,VV$:()=>n.VV,WUZ:()=>r.WU,Ys:()=>l.Ys,td_:()=>l.td,tiA:()=>s.ti,y4O:()=>a.y4});var n=i(5665),a=i(442),r=(i(9961),i(103)),s=i(1770),l=i(3950);i(3399),i(5180)},909:(t,e,i)=>{i.d(e,{L:()=>n});class n extends Map{constructor(t,e=o){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,i]of t)this.set(e,i)}get(t){return super.get(r(this,t))}has(t){return super.has(r(this,t))}set(t,e){return super.set(s(this,t),e)}delete(t){return super.delete(l(this,t))}}class a extends Set{constructor(t,e=o){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(r(this,t))}add(t){return super.add(s(this,t))}delete(t){return super.delete(l(this,t))}}function r({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):i}function s({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):(t.set(n,i),i)}function l({_intern:t,_key:e},i){const n=e(i);return t.has(n)&&(i=t.get(n),t.delete(n)),i}function o(t){return null!==t&&"object"==typeof t?t.valueOf():t}}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{i.r(n),i.d(n,{default:()=>r});var t=i(3699),e=i(6738).powerbi,a={name:"Waterfall2023Pbi552BC2DB21894DA5B40D0FE0FE33D590",displayName:"Ultimate Waterfall (API)",class:"Visual",apiVersion:"5.3.0",create:e=>{if(t.u)return new t.u(e);throw"Visual instance not found"},createModalDialog:(t,e,i)=>{const n=globalThis.dialogRegistry;t in n&&new n[t](e,i)},custom:!0};void 0!==e&&(e.visuals=e.visuals||{},e.visuals.plugins=e.visuals.plugins||{},e.visuals.plugins.Waterfall2023Pbi552BC2DB21894DA5B40D0FE0FE33D590=a);const r=a})(),Waterfall2023Pbi552BC2DB21894DA5B40D0FE0FE33D590=n})();