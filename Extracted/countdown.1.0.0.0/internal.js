var powerbi;!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t){console.log("Visual constructor",t),this.target=t.element,this.host=t.host,this.updateCounter=0,this.target.appendChild(this.createTable()),this.updateView(this.updateCounter)}return t.prototype.destroy=function(){window.cancelAnimationFrame(this.animationId)},t.prototype.updateView=function(e){var o=this;if(e==this.updateCounter){var i=t.getCountdownProps(this.dataView),n=t.getTextProps(this.dataView),a=new Date(i.year,i.month-1,i.day,i.hour,i.minute,i.second),r=new Date(Date()),u=Math.max(Math.floor((a.getTime()-r.getTime())/1e3),0),l=Math.floor(u/86400);u%=86400;var s=Math.floor(u/3600);u%=3600;var d=Math.floor(u/60);u%=60;var p=u;this.updateTable(l,s,d,p,n.timeSize,n.fontSize,n.timeColor.solid.color,n.textColor.solid.color),this.animationId=window.requestAnimationFrame(function(){o.updateView(e)})}},t.prototype.updateTable=function(t,e,o,i,n,a,r,u){this.modifyColumnText(this.daysColumn,t,!1),this.modifyColumnText(this.hoursColumn,e),this.modifyColumnText(this.minutesColumn,o),this.modifyColumnText(this.secondsColumn,i),this.modifyText(this.timeRow,n,r),this.modifyText(this.textRow,a,u)},t.prototype.modifyColumnText=function(e,o,i){void 0===i&&(i=!0),e.innerText=i?t.formatNumber(o):o.toString()},t.prototype.modifyText=function(t,e,o){var i=t.style;i.fontSize=e.toString()+"px",i.color=o},t.formatNumber=function(t){return t<10?"0"+t:t.toString()},t.prototype.update=function(t){console.log("Visual update",t),this.dataView=t.dataViews[0],this.updateView(++this.updateCounter)},t.prototype.createTable=function(){var e=document.createElement("table");e.align="center",e.style.textAlign="center";var o=this.timeRow=document.createElement("tr");this.modifyText(o,t.DefaultTimeSize,t.DefaultTimeColor.solid.color),o.appendChild(this.daysColumn=this.createColumn(t.DefaultDay.toString())),o.appendChild(this.createColumn(":")),o.appendChild(this.hoursColumn=this.createColumn(t.formatNumber(t.DefaultHour))),o.appendChild(this.createColumn(":")),o.appendChild(this.minutesColumn=this.createColumn(t.formatNumber(t.DefaultMinute))),o.appendChild(this.createColumn(":")),o.appendChild(this.secondsColumn=this.createColumn(t.formatNumber(t.DefaultSecond)));var i=this.textRow=document.createElement("tr");return this.modifyText(i,t.DefaultFontSize,t.DefaultTextColor.solid.color),i.appendChild(this.createColumn("Days")),i.appendChild(this.createColumn("")),i.appendChild(this.createColumn("Hours")),i.appendChild(this.createColumn("")),i.appendChild(this.createColumn("Minutes")),i.appendChild(this.createColumn("")),i.appendChild(this.createColumn("Seconds")),e.appendChild(o),e.appendChild(i),e},t.prototype.createColumn=function(t){var e=document.createElement("td");return e.innerText=t,e},t.prototype.enumerateObjectInstances=function(e){var o=[],i=this.dataView;switch(e.objectName){case"countdown":var n={objectName:"countdown",displayName:"Countdown properties",selector:null,properties:t.getCountdownProps(i)};o.push(n);break;case"textProperties":var n={objectName:"textProperties",displayName:"Text properties",selector:null,properties:t.getTextProps(i)};o.push(n)}return o},t.getCountdownProps=function(e){var o="countdown";return{day:t.getProp(o,e,"day",t.DefaultDay,1,31),month:t.getProp(o,e,"month",t.DefaultMonth,1,12),year:t.getProp(o,e,"year",t.DefaultYear,0,2500),hour:t.getProp(o,e,"hour",t.DefaultHour,0,23),minute:t.getProp(o,e,"minute",t.DefaultMinute,0,59),second:t.getProp(o,e,"second",t.DefaultSecond,0,59)}},t.getTextProps=function(e){var o="textProperties";return{timeColor:t.getProp(o,e,"timeColor",t.DefaultTimeColor),textColor:t.getProp(o,e,"textColor",t.DefaultTextColor),timeSize:t.getProp(o,e,"timeSize",t.DefaultTimeSize,8,100),fontSize:t.getProp(o,e,"fontSize",t.DefaultFontSize,8,100)}},t.getProp=function(t,e,o,i,n,a){if(e){var r=e.metadata.objects;if(r){var u=r[t];if(u){var l=u[o];if(null!=l)return null!=n&&l<n&&(l=n),null!=n&&l>a&&(l=a),l}}}return i},t}();e.DefaultDay=12,e.DefaultMonth=6,e.DefaultYear=2017,e.DefaultHour=12,e.DefaultMinute=0,e.DefaultSecond=0,e.DefaultTimeColor={solid:{color:"#000000"}},e.DefaultTextColor={solid:{color:"#000000"}},e.DefaultTimeSize=20,e.DefaultFontSize=18,t.Visual=e}(t.countdownFA24FE5944D34ADD929D0DAE6EE57D70||(t.countdownFA24FE5944D34ADD929D0DAE6EE57D70={}))}(t.visual||(t.visual={}))}(t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){!function(e){!function(e){e.countdownFA24FE5944D34ADD929D0DAE6EE57D70={name:"countdownFA24FE5944D34ADD929D0DAE6EE57D70",displayName:"countdown",class:"Visual",version:"1.0.0",apiVersion:"1.6.0",create:function(e){return new t.extensibility.visual.countdownFA24FE5944D34ADD929D0DAE6EE57D70.Visual(e)},custom:!0}}(e.plugins||(e.plugins={}))}(t.visuals||(t.visuals={}))}(powerbi||(powerbi={}));