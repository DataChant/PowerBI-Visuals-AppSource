/*! For license information please see visual.js.LICENSE.txt */
var synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6;(() => {var t,e,i,n,r = { 29: (t, e, i) => {"use strict";i.d(e, { M4: () => g, O1: () => m, tB: () => p });var n,r,s = 0,o = 0,a = 0,l = 0,c = 0,h = 0,u = "object" == typeof performance && performance.now ? performance : Date,d = "object" == typeof window && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (t) {setTimeout(t, 17);};function p() {return c || (d(f), c = u.now() + h);}function f() {c = 0;}function g() {this._call = this._time = this._next = null;}function m(t, e, i) {var n = new g();return n.restart(t, e, i), n;}function v() {c = (l = u.now()) + h, s = o = 0;try {!function () {p(), ++s;for (var t, e = n; e;) (t = c - e._time) >= 0 && e._call.call(void 0, t), e = e._next;--s;}();} finally {s = 0, function () {for (var t, e, i = n, s = 1 / 0; i;) i._call ? (s > i._time && (s = i._time), t = i, i = i._next) : (e = i._next, i._next = null, i = t ? t._next = e : n = e);r = t, b(s);}(), c = 0;}}function y() {var t = u.now(),e = t - l;e > 1e3 && (h -= e, l = t);}function b(t) {s || (o && (o = clearTimeout(o)), t - c > 24 ? (t < 1 / 0 && (o = setTimeout(v, t - u.now() - h)), a && (a = clearInterval(a))) : (a || (l = u.now(), a = setInterval(y, 1e3)), s = 1, d(v)));}g.prototype = m.prototype = { constructor: g, restart: function (t, e, i) {if ("function" != typeof t) throw new TypeError("callback is not a function");i = (null == i ? p() : +i) + (null == e ? 0 : +e), this._next || r === this || (r ? r._next = this : n = this, r = this), this._call = t, this._time = i, b();}, stop: function () {this._call && (this._call = null, this._time = 1 / 0, b());} };}, 54: (t, e, i) => {"use strict";const n = i(1929),r = (t, e, i) => {if (!1 === n(t)) throw new TypeError("toRegexRange: expected the first argument to be a number");if (void 0 === e || t === e) return String(t);if (!1 === n(e)) throw new TypeError("toRegexRange: expected the second argument to be a number.");let s = { relaxZeros: !0, ...i };"boolean" == typeof s.strictZeros && (s.relaxZeros = !1 === s.strictZeros);let l = t + ":" + e + "=" + String(s.relaxZeros) + String(s.shorthand) + String(s.capture) + String(s.wrap);if (r.cache.hasOwnProperty(l)) return r.cache[l].result;let c = Math.min(t, e),h = Math.max(t, e);if (1 === Math.abs(c - h)) {let i = t + "|" + e;return s.capture ? `(${i})` : !1 === s.wrap ? i : `(?:${i})`;}let u = f(t) || f(e),d = { min: t, max: e, a: c, b: h },p = [],g = [];return u && (d.isPadded = u, d.maxLen = String(d.max).length), c < 0 && (g = o(h < 0 ? Math.abs(h) : 1, Math.abs(c), d, s), c = d.a = 0), h >= 0 && (p = o(c, h, d, s)), d.negatives = g, d.positives = p, d.result = function (t, e) {let i = a(t, e, "-", !1) || [],n = a(e, t, "", !1) || [],r = a(t, e, "-?", !0) || [];return i.concat(r).concat(n).join("|");}(g, p), !0 === s.capture ? d.result = `(${d.result})` : !1 !== s.wrap && p.length + g.length > 1 && (d.result = `(?:${d.result})`), r.cache[l] = d, d.result;};function s(t, e, i) {if (t === e) return { pattern: t, count: [], digits: 0 };let n = function (t, e) {let i = [];for (let n = 0; n < t.length; n++) i.push([t[n], e[n]]);return i;}(t, e),r = n.length,s = "",o = 0;for (let t = 0; t < r; t++) {let [e, i] = n[t];e === i ? s += e : "0" !== e || "9" !== i ? s += p(e, i) : o++;}return o && (s += !0 === i.shorthand ? "\\d" : "[0-9]"), { pattern: s, count: [o], digits: r };}function o(t, e, i, n) {let r,o = function (t, e) {let i = 1,n = 1,r = h(t, i),s = new Set([e]);for (; t <= r && r <= e;) s.add(r), i += 1, r = h(t, i);for (r = u(e + 1, n) - 1; t < r && r <= e;) s.add(r), n += 1, r = u(e + 1, n) - 1;return s = [...s], s.sort(l), s;}(t, e),a = [],c = t;for (let t = 0; t < o.length; t++) {let e = o[t],l = s(String(c), String(e), n),h = "";i.isPadded || !r || r.pattern !== l.pattern ? (i.isPadded && (h = g(e, i, n)), l.string = h + l.pattern + d(l.count), a.push(l), c = e + 1, r = l) : (r.count.length > 1 && r.count.pop(), r.count.push(l.count[0]), r.string = r.pattern + d(r.count), c = e + 1);}return a;}function a(t, e, i, n, r) {let s = [];for (let r of t) {let { string: t } = r;n || c(e, "string", t) || s.push(i + t), n && c(e, "string", t) && s.push(i + t);}return s;}function l(t, e) {return t > e ? 1 : e > t ? -1 : 0;}function c(t, e, i) {return t.some((t) => t[e] === i);}function h(t, e) {return Number(String(t).slice(0, -e) + "9".repeat(e));}function u(t, e) {return t - t % Math.pow(10, e);}function d(t) {let [e = 0, i = ""] = t;return i || e > 1 ? `{${e + (i ? "," + i : "")}}` : "";}function p(t, e, i) {return `[${t}${e - t === 1 ? "" : "-"}${e}]`;}function f(t) {return /^-?(0+)\d/.test(t);}function g(t, e, i) {if (!e.isPadded) return t;let n = Math.abs(e.maxLen - String(t).length),r = !1 !== i.relaxZeros;switch (n) {case 0:return "";case 1:return r ? "0?" : "0";case 2:return r ? "0{0,2}" : "00";default:return r ? `0{0,${n}}` : `0{${n}}`;}}r.cache = {}, r.clearCache = () => r.cache = {}, t.exports = r;}, 67: (t, e, i) => {"use strict";i.r(e), i.d(e, { NumericSequenceRange: () => r, hasValue: () => s });var n = i(5442);class r {_ensureIncludeZero() {this.includeZero && (this.min > 0 && !this.hasFixedMin && (this.min = 0), this.max < 0 && !this.hasFixedMax && (this.max = 0));}_ensureNotEmpty() {if (this.min === this.max) if (this.min) {const t = this.min,e = n.log10(Math.abs(t));let i;e >= 0 && e < 4 ? (i = .5, this.forcedSingleStop = t) : (i = n.pow10(e) / 2, this.forcedSingleStop = null), this.min = t - i, this.max = t + i;} else this.min = 0, this.max = r.DEFAULT_MAX, this.hasFixedMin = !0, this.hasFixedMax = !0;}_ensureDirection() {if (this.min > this.max) {const t = this.min;this.min = this.max, this.max = t;}}getSize() {return this.max - this.min;}shrinkByStep(t, e) {let i = this.min / e,n = t.min / e,r = Math.floor(n - i);this.min += r * e, i = this.max / e, n = t.max / e, r = Math.ceil(n - i), this.max += r * e;}static calculate(t, e, i, o, a) {const l = new r();return l.includeZero = !!a, l.hasDataRange = s(t) && s(e), l.hasFixedMin = s(i), l.hasFixedMax = s(o), t = n.ensureInRange(t, r.MIN_SUPPORTED_DOUBLE, r.MAX_SUPPORTED_DOUBLE), e = n.ensureInRange(e, r.MIN_SUPPORTED_DOUBLE, r.MAX_SUPPORTED_DOUBLE), l.hasFixedMin && l.hasFixedMax ? (l.min = i, l.max = o) : l.hasFixedMin ? (l.min = i, l.max = e > i ? e : i) : l.hasFixedMax ? (l.min = t < o ? t : o, l.max = o) : l.hasDataRange ? (l.min = t, l.max = e) : (l.min = 0, l.max = 0), l._ensureIncludeZero(), l._ensureNotEmpty(), l._ensureDirection(), 0 === l.min ? l.hasFixedMin = !0 : 0 === l.max && (l.hasFixedMax = !0), l;}static calculateDataRange(t, e, i) {return s(t) && s(e) ? r.calculate(t, e, null, null, i) : r.calculateFixedRange(0, r.DEFAULT_MAX);}static calculateFixedRange(t, e, i) {const n = new r();return n.hasDataRange = !1, n.includeZero = i, n.min = t, n.max = e, n._ensureIncludeZero(), n._ensureNotEmpty(), n._ensureDirection(), n.hasFixedMin = !0, n.hasFixedMax = !0, n;}}function s(t) {return null != t;}r.DEFAULT_MAX = 10, r.MIN_SUPPORTED_DOUBLE = -1e307, r.MAX_SUPPORTED_DOUBLE = 1e307;}, 72: (t, e, i) => {"use strict";i.d(e, { S: () => l });var n = i(1715),r = i(7134),s = i(1807),o = i(5079),a = i(1514);class l {element;model;settings;isEditMode;selectionManager;initialSelectionIds;imageContainer;gridPlaceholder;constructor(t, e, i, n, r, s) {this.element = t, this.model = e, this.settings = i, this.isEditMode = n, this.selectionManager = r, this.initialSelectionIds = s;}get font() {return { bold: this.settings.appearance.placeholderFont?.bold.value || !1, italic: this.settings.appearance.placeholderFont?.italic.value || !1, underline: this.settings.appearance.placeholderFont?.underline.value || !1, family: this.settings.appearance.placeholderFont?.fontFamily.value || s.Q9G, size: o.fromPointToPixel(this.settings.appearance.placeholderFont?.fontSize.value || 12) };}get text() {let t = this.settings.appearance.placeholderText.value || "";return t.includes("\\n") && (t = t.replace(/\\n/g, "\n")), t = t.replace(/{category}/gi, this.model?.dataPoints?.[0].label || ""), t = t.replace(/{path}/gi, (0, a.pT)(this.model?.drillMode.path || [])), t;}draw() {this.imageContainer?.remove(), this.gridPlaceholder?.destroy();const t = this.settings.appearance.placeholder.value.value;"auto" == t ? this.isEditMode ? this.drawGridPlaceholder() : this.drawImagePlaceholder() : "grid" == t ? this.drawGridPlaceholder() : "image" == t && this.drawImagePlaceholder();}drawImagePlaceholder() {const t = this.settings.appearance.placeholderImage.value.value;let e;if ("none" !== t) if ("custom" == t) {const t = this.settings.appearance.placeholderImageUrl.value;t && (e = (0, s.tTh)(".image", { style: { background: `url("${t}") no-repeat center`, backgroundSize: "contain" } }));} else {const i = n.v[t];i && (e = new DOMParser().parseFromString(i, "image/svg+xml").documentElement);}const i = this.text;this.imageContainer = (0, s.tTh)(".image-placeholder", this.element, [...(i ? [(0, s.tTh)(".message", { style: { fontFamily: this.font.family, fontSize: `${this.font.size}px`, fontWeight: this.font.bold ? "bold" : "normal", fontStyle: this.font.italic ? "italic" : "normal", textDecoration: this.font.underline ? "underline" : "none", color: this.settings.appearance.placeholderColor.value.value } }, i)] : []), ...(e ? [e] : [])]);}drawGridPlaceholder() {this.gridPlaceholder = new r.W({ columns: this.settings.appearance.placeholderGridCols.value, rows: this.settings.appearance.placeholderGridRows.value, font: this.font, color: this.settings.appearance.placeholderColor.value.value }, this.element, this.model, this.selectionManager, this.initialSelectionIds), this.gridPlaceholder.draw();}destroy() {this.gridPlaceholder?.destroy(), this.gridPlaceholder = null, this.imageContainer?.remove(), this.imageContainer = null, this.element = null;}}}, 77: (t, e, i) => {"use strict";i.d(e, { B9: () => s, FK: () => l, FV: () => o, Qk: () => a, TR: () => p, VM: () => h, tT: () => f });var n = i(7728);function r(t) {return (0, n.nF)(t, n._4);}function s(t) {return t.length < 3 ? 0 : Math.abs((0, n.cz)(t.map(function (e, i) {var n = t[i + 1] || t[0];return e[0] * n[1] - n[0] * e[1];}))) / 2;}function o(t, e) {var i = e.width,n = e.height,r = e.left,s = e.top,o = a(t),l = o.minX,c = o.minY,h = o.maxX,u = o.maxY,d = i / (h - l),p = n / (u - c);return t.map(function (t) {return [r + (t[0] - l) * d, s + (t[1] - c) * p];});}function a(t) {var e = t.map(function (t) {return t[0];}),i = t.map(function (t) {return t[1];});return { minX: Math.min.apply(Math, e), minY: Math.min.apply(Math, i), maxX: Math.max.apply(Math, e), maxY: Math.max.apply(Math, i) };}function l(t, e, i) {var s = t[0],o = t[1],l = a(e),p = l.minX,f = l.maxX,g = [[p, o], [f, o]],m = c(g[0], g[1]),v = d(e),y = [];if (v.forEach(function (e) {var i,n = c(e[0], e[1]),s = e[0];i = n, m.every(function (t, e) {return 0 === r(t - i[e]);}) ? y.push({ pos: t, line: e, type: "line" }) : u(h(m, n), [g, e]).forEach(function (t) {e.some(function (e) {return n = t, !r((i = e)[0] - n[0]) && !r(i[1] - n[1]);var i, n;}) ? y.push({ pos: t, line: e, type: "point" }) : 0 !== r(s[1] - o) && y.push({ pos: t, line: e, type: "intersection" });});}), !i && (0, n.I6)(y, function (t) {return t[0] === s;})) return !0;var b = 0,w = {};return y.forEach(function (t) {var e = t.pos,i = t.type,r = t.line;if (!(e[0] > s)) if ("intersection" === i) ++b;else {if ("line" === i) return;if ("point" === i) {var a = (0, n.I6)(r, function (t) {return t[1] !== o;}),l = w[e[0]],c = a[1] > o ? 1 : -1;l ? l !== c && ++b : w[e[0]] = c;}}}), b % 2 == 1;}function c(t, e) {var i = t[0],r = t[1],s = e[0] - i,o = e[1] - r;Math.abs(s) < n._4 && (s = 0), Math.abs(o) < n._4 && (o = 0);var a = 0,l = 0,c = 0;return s ? o ? (l = 1, c = -(a = -o / s) * i - r) : (l = 1, c = -r) : o && (a = -1, c = i), [a, l, c];}function h(t, e) {var i = t[0],n = t[1],r = t[2],s = e[0],o = e[1],a = e[2],l = 0 === i && 0 === s,c = 0 === n && 0 === o,h = [];if (l && c) return [];if (l) {var u = -r / n;return u !== -a / o ? [] : [[-1 / 0, u], [1 / 0, u]];}if (c) {var d = -r / i;return d !== -a / s ? [] : [[d, -1 / 0], [d, 1 / 0]];}if (0 === i) h = [[p = -(o * (f = -r / n) + a) / s, f]];else if (0 === s) h = [[p = -(n * (f = -a / o) + r) / i, f]];else if (0 === n) h = [[p = -r / i, f = -(s * p + a) / o]];else if (0 === o) h = [[p = -a / s, f = -(i * p + r) / n]];else {var p, f;h = [[p = (n * a - o * r) / (o * i - n * s), f = -(i * p + r) / n]];}return h.map(function (t) {return [t[0], t[1]];});}function u(t, e) {var i = e.map(function (t) {return [0, 1].map(function (e) {return [Math.min(t[0][e], t[1][e]), Math.max(t[0][e], t[1][e])];});}),n = [];if (2 === t.length) {var s = t[0],o = s[0],a = s[1];if (r(o - t[1][0])) {if (!r(a - t[1][1])) {var l = Math.max.apply(Math, i.map(function (t) {return t[0][0];})),c = Math.min.apply(Math, i.map(function (t) {return t[0][1];}));if (r(l - c) > 0) return [];n = [[l, a], [c, a]];}} else {var h = Math.max.apply(Math, i.map(function (t) {return t[1][0];})),u = Math.min.apply(Math, i.map(function (t) {return t[1][1];}));if (r(h - u) > 0) return [];n = [[o, h], [o, u]];}}return n.length || (n = t.filter(function (t) {var e = t[0],n = t[1];return i.every(function (t) {return 0 <= r(e - t[0][0]) && 0 <= r(t[0][1] - e) && 0 <= r(n - t[1][0]) && 0 <= r(t[1][1] - n);});})), n.map(function (t) {return [r(t[0]), r(t[1])];});}function d(t) {return function () {for (var t = 0, e = 0, i = arguments.length; e < i; e++) t += arguments[e].length;var n = Array(t),r = 0;for (e = 0; e < i; e++) for (var s = arguments[e], o = 0, a = s.length; o < a; o++, r++) n[r] = s[o];return n;}(t.slice(1), [t[0]]).map(function (e, i) {return [t[i], e];});}function p(t, e) {return function (t, e) {var i = t.slice(),r = e.slice();-1 === (0, n.rB)(i) && i.reverse(), -1 === (0, n.rB)(r) && r.reverse();var s = d(i),o = d(r),a = s.map(function (t) {return c(t[0], t[1]);}),p = o.map(function (t) {return c(t[0], t[1]);}),f = [];a.forEach(function (t, e) {var i = s[e],a = [];p.forEach(function (n, r) {var s = u(h(t, n), [i, o[r]]);a.push.apply(a, s.map(function (t) {return { index1: e, index2: r, pos: t, type: "intersection" };}));}), a.sort(function (t, e) {return (0, n.l$)(i[0], t.pos) - (0, n.l$)(i[0], e.pos);}), f.push.apply(f, a), l(i[1], r) && f.push({ index1: e, index2: -1, pos: i[1], type: "inside" });}), o.forEach(function (t, e) {if (l(t[1], i)) {var r = !1,s = (0, n.SL)(f, function (t) {return t.index2 === e ? (r = !0, !1) : !!r;});-1 === s && (r = !1, s = (0, n.SL)(f, function (t) {var i = t.index1,n = t.index2;return -1 === i && n + 1 === e ? (r = !0, !1) : !!r;})), -1 === s ? f.push({ index1: -1, index2: e, pos: t[1], type: "inside" }) : f.splice(s, 0, { index1: -1, index2: e, pos: t[1], type: "inside" });}});var g = {};return f.filter(function (t) {var e = t.pos,i = e[0] + "x" + e[1];return !g[i] && (g[i] = !0, !0);});}(t, e).map(function (t) {return t.pos;});}function f(t, e) {return s(p(t, e));}}, 100: (t, e, i) => {"use strict";i.d(e, { Lu: () => u, Qn: () => h, rv: () => c });var n = i(1807),r = i(4543),s = i(7125),o = i(7077),a = i(7345),l = i(2755);const c = "MSEK";var h;!function (t) {t[t.None = 0] = "None", t[t.Edit = 1] = "Edit", t[t.ReadEdit = 2] = "ReadEdit";}(h || (h = {}));class u extends n.T0G {info;static rootDomain = "synopticpanel-api.okviz.com";isConnected = !1;get base() {return `https://${this.info.region}.${u.rootDomain}`;}get displayAvailableQuota() {return null == this.info.quota || null == this.info.availableQuota ? "" : `${(0, o.v7)(this.info.availableQuota)} of ${(0, o.v7)(this.info.quota, 2, !0)} free (${this.availableQuotaPercentage}%)`;}get availableQuotaPercentage() {return null == this.info.quota || null == this.info.availableQuota ? 0 : (0, n.LIG)(this.info.availableQuota / this.info.quota * 100, 0);}constructor(t) {super(), this.info = t;}updateInfo(t) {this.info = { ...this.info, ...t };}async connect() {if (this.isConnected) return !0;if (!this.info.region || !this.info.id || !this.info.readKey) return !1;const t = await this.apiGetStorage({ storageId: this.info.id, key: this.info.readKey });return this.info = { ...this.info, ...t }, this.isConnected = !0, !0;}getMapUrl(t, e) {return `${this.base}/v1/my/${this.info.id}/map/${t}?key=${this.info.readKey}${e ? `&name=${encodeURIComponent(e)}` : ""}`;}async apiCall(t, e, i = !1, n = !1) {const r = async () => {if ("cancel" == (await this.showEditKeyMsgBox()).action) return null;if (this.info.editKey) return this.apiCall(t, e, i, n);throw (0, a.T)("MS_INVALID_EDIT_KEY");};if (i && !this.info.editKey) return r();try {const r = new URL(t);i && (n || !e?.method || "GET" == e.method || "DELETE" == e.method ? r.searchParams.append("editKey", this.info.editKey) : e?.body instanceof FormData && e.body.set("editKey", this.info.editKey));const s = await http(r.href, e);if (!s.ok) throw await s.json();return s;} catch (t) {const e = (0, a.T)(t);if (i && "MS_INVALID_EDIT_KEY" == e.key) return r();throw e;}}async apiGetStorage(t) {try {const e = await this.apiCall(`${this.base}/v1/my/${t.storageId}?key=${t.key}`, null, !1);return await e.json();} catch (t) {throw (0, a.T)(t);}}async apiGetMaps(t, e = [], i) {try {const n = await this.apiCall(`${this.base}/v1/my/${t.storageId}/maps${i ? `?continuationToken=${i}` : ""}`, null, !0),r = await n.json();return r.items && e.push(...r.items), r.continuationToken && (await this.apiGetMaps(t, e, r.continuationToken)), e;} catch (t) {throw (0, a.T)(t);}}async apiGetMap(t) {try {const e = await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}?key=${t.key}&nonce=${t.nonce}${t.password ? `&password=${t.password}` : ""}`, null, !1);return await this.processGetMapResponse(e, this.info.encryptionKey);} catch (t) {throw (0, a.T)(t);}}async apiGetMapMetadata(t) {try {const e = await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}/metadata?key=${t.key}`, null, !1);return await e.json();} catch (t) {throw (0, a.T)(t);}}async apiSearchMap(t) {try {const e = await this.apiCall(`${this.base}/v1/my/${t.storageId}/search/map/?key=${t.editKey}&name=${t.mapName}`, null, !0);return (await e.json()).id;} catch (t) {throw (0, a.T)(t);}}async apiPostMap(t) {try {const e = await this.createRequestFormData(t),i = await this.apiCall(`${this.base}/v1/my/${t.storageId}/map`, { method: "POST", body: e }, !0);return await i.json();} catch (t) {throw (0, a.T)(t);}}async apiDeleteMap(t) {try {await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}${t.password ? `?password=${t.password}` : ""}`, { method: "DELETE" }, !0);} catch (t) {throw (0, a.T)(t);}}async apiPatchMap(t) {try {const e = await this.createRequestFormData(t);e.append("eTag", t.eTag), t.newPassword && e.append("newPassword", t.newPassword);const i = await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}`, { method: "PATCH", body: e }, !0);return await i.json();} catch (t) {throw (0, a.T)(t);}}async createRequestFormData(t) {const e = this.info.encryptionKey && this.info.isEncrypted,i = new FormData();if (t.map.name = (0, l.lx)(t.map.name), i.append("editKey", t.editKey), i.append("name", t.map.name), i.append("id", t.map.id), e) {const t = await u.GenerateHash(this.info.encryptionKey);i.append("encryption", t);}const n = (0, o.jA)(t.map),s = await (0, o.rz)(n),a = e ? await (0, r.oL)(s, this.info.encryptionKey) : s;return i.append("map", (0, o.k5)(a)), t.path && i.append("path", t.path), t.password && i.append("password", t.password), t.protection && i.append("newProtection", t.protection.toString()), t.author && i.append("author", t.author), t.attribution && i.append("attribution", t.attribution), i;}async apiPatchMapMetadata(t) {try {const e = new FormData();e.append("editKey", t.editKey), t.path && e.append("path", t.path), t.password && e.append("password", t.password), t.newPassword && e.append("newPassword", t.newPassword), void 0 !== t.protection && null !== t.protection && e.append("protection", t.protection.toString()), t.author && e.append("author", t.author), t.attribution && e.append("attribution", t.attribution), await this.apiCall(`${this.base}/v1/my/${t.storageId}/map/${t.mapId}/metadata`, { method: "PATCH", body: e }, !0);} catch (t) {throw (0, a.T)(t);}}async apiSetupStorage(t) {try {return !!(await this.apiCall(`${this.base}/v1/my/${t.storageId}/setup/?name=${t.storageName ?? "My Storage"}${t.encryptionHash ? `&encryption=${t.encryptionHash}` : ""}`, { method: "POST" }, !0, !0));} catch (t) {throw (0, a.T)(t);}}async setup(t, e) {const i = { storageId: this.info.id, editKey: this.info.editKey };if (e && (i.editKey = e), this.info.encryptionKey) {const t = await u.GenerateHash(this.info.encryptionKey);i.encryptionHash = t;}t.storageName && (i.storageName = t.storageName);const n = await this.apiSetupStorage(i);return n && this.updateInfo({ isSetup: !0, isEncrypted: !!this.info.encryptionKey }), n;}async listMaps(t) {let e = this.info.editKey;return t && (e = t), await this.apiGetMaps({ storageId: this.info.id, editKey: e });}async getMap(t, e) {const i = await this.createNonce();return this.apiGetMap({ storageId: this.info.id, key: this.info.readKey, mapId: t, nonce: i, password: e });}async getMapFromUrl(t) {let e;try {const i = await this.createNonce(),n = new URL(t);n.searchParams.set("nonce", i), e = await http(n.href);} catch (t) {throw (0, a.T)("NETWORK_ERROR");}return await this.processGetMapResponse(e, this.info.encryptionKey);}async processGetMapResponse(t, e) {if (!t.ok) {let e = "UNREACHABLE";switch (t.status) {case 401:case 403:e = "UNAUTHORIZED";break;case 404:e = "NOT_FOUND";}throw (0, a.T)(e);}const i = this.extractMapHeader(t.headers);let n;if (i.isEncrypted) {const i = await t.blob();try {const t = await (0, r.It)(i, e);n = JSON.parse((0, o.$T)(t));} catch (t) {throw (0, a.T)("DECRYPTION_FAILED");}} else n = await t.json();return { jsvg: n, header: i };}async getMapMetadata(t) {return await this.apiGetMapMetadata({ storageId: this.info.id, key: this.info.readKey, mapId: t });}async deleteMap(t, e) {return await this.apiDeleteMap({ storageId: this.info.id, editKey: this.info.editKey, mapId: t, password: e });}async uploadMap(t) {return await this.apiPostMap({ storageId: this.info.id, editKey: this.info.editKey, ...t });}async updateMap(t) {return await this.apiPatchMap({ storageId: this.info.id, editKey: this.info.editKey, ...t });}async updateMapMetadata(t) {return await this.apiPatchMapMetadata({ storageId: this.info.id, editKey: this.info.editKey, ...t });}async searchMapByName(t) {return await this.apiSearchMap({ storageId: this.info.id, editKey: this.info.editKey, mapName: t });}extractMapHeader(t) {const e = {},i = { id: "id", etag: "eTag", name: "name", source: "source", protection: "protection", path: "path", author: "author", attribution: "attribution", created: "created", updated: "updated", size: "size", isencrypted: "isEncrypted" };return t.forEach((t, n) => {if (n.toLowerCase().startsWith("x-map-")) {const r = n.substring(6);if (i[r]) switch (i[r]) {case "protection":case "size":e[i[r]] = parseInt(t);break;case "isEncrypted":e[i[r]] = "true" === t;break;default:e[i[r]] = t;}}}), e;}static IsValidEditKeyFormat(t) {return !!t && /^ek_[a-zA-Z0-9]{64}$/.test(t);}static GenerateRandomEncryptionKey() {const t = new Uint8Array(16);window.crypto.getRandomValues(t);let e = "";for (let i = 0; i < 16; i++) e += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.@!%$#"[t[i] % 70];return e;}static async GenerateHash(t) {const e = new TextEncoder().encode(t),i = await window.crypto.subtle.digest("SHA-256", e);return Array.from(new Uint8Array(i)).map((t) => t.toString(16).padStart(2, "0")).join("");}async createNonce() {return await (0, r.Np)(new Date().toUTCString(), "kf4SXPPomgFzNUxY1GbtWUOhuA+kZwm+DV8/QYwiy/PRvyj6KX2tzEhUiEjUMkJU");}async showEditKeyMsgBox() {const t = document.getElementById("edit-key-msg-box");t && t.remove();const e = { element: document.body, containerId: "edit-key-msg-box", title: "Access My Storage", size: { height: "", width: "350px" }, buttons: [{ id: s.d, text: "Continue", validationCallback: (t) => u.IsValidEditKeyFormat(t.key) ? (this.updateInfo({ editKey: t.key }), this.trigger("editKeyChanged", t), { valid: !0 }) : { valid: !1, message: "Invalid key." } }] };return new s.W(e).draw();}}}, 123: (t, e, i) => {"use strict";i.d(e, { A: () => o, J: () => a });var n = i(3363);function r(t, e) {var i, r;return function () {var s = (0, n.hZ)(this, t),o = s.tween;if (o !== i) for (var a = 0, l = (r = i = o).length; a < l; ++a) if (r[a].name === e) {(r = r.slice()).splice(a, 1);break;}s.tween = r;};}function s(t, e, i) {var r, s;if ("function" != typeof i) throw new Error();return function () {var o = (0, n.hZ)(this, t),a = o.tween;if (a !== r) {s = (r = a).slice();for (var l = { name: e, value: i }, c = 0, h = s.length; c < h; ++c) if (s[c].name === e) {s[c] = l;break;}c === h && s.push(l);}o.tween = s;};}function o(t, e) {var i = this._id;if (t += "", arguments.length < 2) {for (var o, a = (0, n.Jt)(this.node(), i).tween, l = 0, c = a.length; l < c; ++l) if ((o = a[l]).name === t) return o.value;return null;}return this.each((null == e ? r : s)(i, t, e));}function a(t, e, i) {var r = t._id;return t.each(function () {var t = (0, n.hZ)(this, r);(t.value || (t.value = {}))[e] = i.apply(this, arguments);}), function (t) {return (0, n.Jt)(t, r).value[e];};}}, 128: (t, e, i) => {"use strict";function n(t, e) {e || (e = []);var i,n = t ? Math.min(e.length, t.length) : 0,r = e.slice();return function (s) {for (i = 0; i < n; ++i) r[i] = t[i] * (1 - s) + e[i] * s;return r;};}function r(t) {return ArrayBuffer.isView(t) && !(t instanceof DataView);}i.d(e, { A: () => n, p: () => r });}, 137: (t, e, i) => {"use strict";i.d(e, { u: () => s });var n = i(1732),r = i(2140);class s extends r.c {constructor(t) {t.optionType = "switch", super(t), Object.assign(this, t), this.initialValue = !1 !== t.value;}render(t) {super.render(t), (0, n.H)(".oop-switch.small", this.element, { checked: this.displayValue, change: (t, e) => {this.value = e, this.onChange && this.onChange(e);} });}refresh() {this.element.querySelector("input").checked = !0 === this.displayValue, this.element.querySelector(".switch").classList.toggle("partial", this.isMixed);}}}, 144: (t, e, i) => {"use strict";const n = i(3908);t.exports = (t, e, i = !1) => {if (t instanceof n) return t;try {return new n(t, e);} catch (t) {if (!i) return null;throw t;}};}, 149: (t, e, i) => {"use strict";function n(t) {if ("object" != typeof (e = t) || null === e || "[object Object]" !== Object.prototype.toString.call(t)) return !1;var e;if (null === Object.getPrototypeOf(t)) return !0;let i = t;for (; null !== Object.getPrototypeOf(i);) i = Object.getPrototypeOf(i);return Object.getPrototypeOf(t) === i;}i.d(e, { A: () => n });}, 165: (t, e, i) => {"use strict";function n() {let t = 0;for (const e of this) ++t;return t;}i.d(e, { A: () => n });}, 167: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.ephemeralStorageService = e.EphemeralStorageService = void 0;var i = function () {function t(e) {this.cache = {}, this.clearCacheInterval = null != e ? e : t.defaultClearCacheInterval, this.clearCache();}return t.prototype.getData = function (t) {return this.cache[t];}, t.prototype.setData = function (t, e) {var i = this;this.cache[t] = e, null == this.clearCacheTimerId && (this.clearCacheTimerId = setTimeout(function () {return i.clearCache();}, this.clearCacheInterval));}, t.prototype.clearCache = function () {this.cache = {}, this.clearCacheTimerId = void 0;}, t.defaultClearCacheInterval = 864e5, t;}();e.EphemeralStorageService = i, e.ephemeralStorageService = new i();}, 202: (t, e, i) => {"use strict";i.d(e, { A: () => a });var n = i(6747);function r(t, e, i) {var r = (0, n.A)(t),s = r.CustomEvent;"function" == typeof s ? s = new s(e, i) : (s = r.document.createEvent("Event"), i ? (s.initEvent(e, i.bubbles, i.cancelable), s.detail = i.detail) : s.initEvent(e, !1, !1)), t.dispatchEvent(s);}function s(t, e) {return function () {return r(this, t, e);};}function o(t, e) {return function () {return r(this, t, e.apply(this, arguments));};}function a(t, e) {return this.each(("function" == typeof e ? o : s)(t, e));}}, 246: (t, e, i) => {"use strict";function n(t, e) {var i = Object.keys(t);if (Object.getOwnPropertySymbols) {var n = Object.getOwnPropertySymbols(t);e && (n = n.filter(function (e) {return Object.getOwnPropertyDescriptor(t, e).enumerable;})), i.push.apply(i, n);}return i;}function r(t) {for (var e = 1; e < arguments.length; e++) {var i = null != arguments[e] ? arguments[e] : {};e % 2 ? n(Object(i), !0).forEach(function (e) {o(t, e, i[e]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i)) : n(Object(i)).forEach(function (e) {Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(i, e));});}return t;}function s(t) {return s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {return typeof t;} : function (t) {return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;}, s(t);}function o(t, e, i) {return e in t ? Object.defineProperty(t, e, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = i, t;}function a() {return a = Object.assign || function (t) {for (var e = 1; e < arguments.length; e++) {var i = arguments[e];for (var n in i) Object.prototype.hasOwnProperty.call(i, n) && (t[n] = i[n]);}return t;}, a.apply(this, arguments);}function l(t) {if ("undefined" != typeof window && window.navigator) return !!navigator.userAgent.match(t);}i.d(e, { Ay: () => re });var c = l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),h = l(/Edge/i),u = l(/firefox/i),d = l(/safari/i) && !l(/chrome/i) && !l(/android/i),p = l(/iP(ad|od|hone)/i),f = l(/chrome/i) && l(/android/i),g = { capture: !1, passive: !1 };function m(t, e, i) {t.addEventListener(e, i, !c && g);}function v(t, e, i) {t.removeEventListener(e, i, !c && g);}function y(t, e) {if (e) {if (">" === e[0] && (e = e.substring(1)), t) try {if (t.matches) return t.matches(e);if (t.msMatchesSelector) return t.msMatchesSelector(e);if (t.webkitMatchesSelector) return t.webkitMatchesSelector(e);} catch (t) {return !1;}return !1;}}function b(t) {return t.host && t !== document && t.host.nodeType ? t.host : t.parentNode;}function w(t, e, i, n) {if (t) {i = i || document;do {if (null != e && (">" === e[0] ? t.parentNode === i && y(t, e) : y(t, e)) || n && t === i) return t;if (t === i) break;} while (t = b(t));}return null;}var x,S = /\s+/g;function E(t, e, i) {if (t && e) if (t.classList) t.classList[i ? "add" : "remove"](e);else {var n = (" " + t.className + " ").replace(S, " ").replace(" " + e + " ", " ");t.className = (n + (i ? " " + e : "")).replace(S, " ");}}function C(t, e, i) {var n = t && t.style;if (n) {if (void 0 === i) return document.defaultView && document.defaultView.getComputedStyle ? i = document.defaultView.getComputedStyle(t, "") : t.currentStyle && (i = t.currentStyle), void 0 === e ? i : i[e];e in n || -1 !== e.indexOf("webkit") || (e = "-webkit-" + e), n[e] = i + ("string" == typeof i ? "" : "px");}}function k(t, e) {var i = "";if ("string" == typeof t) i = t;else do {var n = C(t, "transform");n && "none" !== n && (i = n + " " + i);} while (!e && (t = t.parentNode));var r = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;return r && new r(i);}function T(t, e, i) {if (t) {var n = t.getElementsByTagName(e),r = 0,s = n.length;if (i) for (; r < s; r++) i(n[r], r);return n;}return [];}function A() {return document.scrollingElement || document.documentElement;}function M(t, e, i, n, r) {if (t.getBoundingClientRect || t === window) {var s, o, a, l, h, u, d;if (t !== window && t.parentNode && t !== A() ? (o = (s = t.getBoundingClientRect()).top, a = s.left, l = s.bottom, h = s.right, u = s.height, d = s.width) : (o = 0, a = 0, l = window.innerHeight, h = window.innerWidth, u = window.innerHeight, d = window.innerWidth), (e || i) && t !== window && (r = r || t.parentNode, !c)) do {if (r && r.getBoundingClientRect && ("none" !== C(r, "transform") || i && "static" !== C(r, "position"))) {var p = r.getBoundingClientRect();o -= p.top + parseInt(C(r, "border-top-width")), a -= p.left + parseInt(C(r, "border-left-width")), l = o + s.height, h = a + s.width;break;}} while (r = r.parentNode);if (n && t !== window) {var f = k(r || t),g = f && f.a,m = f && f.d;f && (l = (o /= m) + (u /= m), h = (a /= g) + (d /= g));}return { top: o, left: a, bottom: l, right: h, width: d, height: u };}}function _(t, e, i) {for (var n = F(t, !0), r = M(t)[e]; n;) {var s = M(n)[i];if (!("top" === i || "left" === i ? r >= s : r <= s)) return n;if (n === A()) break;n = F(n, !1);}return !1;}function P(t, e, i, n) {for (var r = 0, s = 0, o = t.children; s < o.length;) {if ("none" !== o[s].style.display && o[s] !== Nt.ghost && (n || o[s] !== Nt.dragged) && w(o[s], i.draggable, t, !1)) {if (r === e) return o[s];r++;}s++;}return null;}function D(t, e) {for (var i = t.lastElementChild; i && (i === Nt.ghost || "none" === C(i, "display") || e && !y(i, e));) i = i.previousElementSibling;return i || null;}function O(t, e) {var i = 0;if (!t || !t.parentNode) return -1;for (; t = t.previousElementSibling;) "TEMPLATE" === t.nodeName.toUpperCase() || t === Nt.clone || e && !y(t, e) || i++;return i;}function I(t) {var e = 0,i = 0,n = A();if (t) do {var r = k(t),s = r.a,o = r.d;e += t.scrollLeft * s, i += t.scrollTop * o;} while (t !== n && (t = t.parentNode));return [e, i];}function F(t, e) {if (!t || !t.getBoundingClientRect) return A();var i = t,n = !1;do {if (i.clientWidth < i.scrollWidth || i.clientHeight < i.scrollHeight) {var r = C(i);if (i.clientWidth < i.scrollWidth && ("auto" == r.overflowX || "scroll" == r.overflowX) || i.clientHeight < i.scrollHeight && ("auto" == r.overflowY || "scroll" == r.overflowY)) {if (!i.getBoundingClientRect || i === document.body) return A();if (n || e) return i;n = !0;}}} while (i = i.parentNode);return A();}function R(t, e) {return Math.round(t.top) === Math.round(e.top) && Math.round(t.left) === Math.round(e.left) && Math.round(t.height) === Math.round(e.height) && Math.round(t.width) === Math.round(e.width);}function L(t, e) {return function () {if (!x) {var i = arguments;1 === i.length ? t.call(this, i[0]) : t.apply(this, i), x = setTimeout(function () {x = void 0;}, e);}};}function N(t, e, i) {t.scrollLeft += e, t.scrollTop += i;}function V(t) {var e = window.Polymer,i = window.jQuery || window.Zepto;return e && e.dom ? e.dom(t).cloneNode(!0) : i ? i(t).clone(!0)[0] : t.cloneNode(!0);}function B(t, e, i) {var n = {};return Array.from(t.children).forEach(function (r) {var s, o, a, l;if (w(r, e.draggable, t, !1) && !r.animated && r !== i) {var c = M(r);n.left = Math.min(null !== (s = n.left) && void 0 !== s ? s : 1 / 0, c.left), n.top = Math.min(null !== (o = n.top) && void 0 !== o ? o : 1 / 0, c.top), n.right = Math.max(null !== (a = n.right) && void 0 !== a ? a : -1 / 0, c.right), n.bottom = Math.max(null !== (l = n.bottom) && void 0 !== l ? l : -1 / 0, c.bottom);}}), n.width = n.right - n.left, n.height = n.bottom - n.top, n.x = n.left, n.y = n.top, n;}var j = "Sortable" + new Date().getTime();var z = [],U = { initializeByDefault: !0 },H = { mount: function (t) {for (var e in U) U.hasOwnProperty(e) && !(e in t) && (t[e] = U[e]);z.forEach(function (e) {if (e.pluginName === t.pluginName) throw "Sortable: Cannot mount plugin ".concat(t.pluginName, " more than once");}), z.push(t);}, pluginEvent: function (t, e, i) {var n = this;this.eventCanceled = !1, i.cancel = function () {n.eventCanceled = !0;};var s = t + "Global";z.forEach(function (n) {e[n.pluginName] && (e[n.pluginName][s] && e[n.pluginName][s](r({ sortable: e }, i)), e.options[n.pluginName] && e[n.pluginName][t] && e[n.pluginName][t](r({ sortable: e }, i)));});}, initializePlugins: function (t, e, i, n) {for (var r in z.forEach(function (n) {var r = n.pluginName;if (t.options[r] || n.initializeByDefault) {var s = new n(t, e, t.options);s.sortable = t, s.options = t.options, t[r] = s, a(i, s.defaults);}}), t.options) if (t.options.hasOwnProperty(r)) {var s = this.modifyOption(t, r, t.options[r]);void 0 !== s && (t.options[r] = s);}}, getEventProperties: function (t, e) {var i = {};return z.forEach(function (n) {"function" == typeof n.eventProperties && a(i, n.eventProperties.call(e[n.pluginName], t));}), i;}, modifyOption: function (t, e, i) {var n;return z.forEach(function (r) {t[r.pluginName] && r.optionListeners && "function" == typeof r.optionListeners[e] && (n = r.optionListeners[e].call(t[r.pluginName], i));}), n;} };var q = ["evt"],$ = function (t, e) {var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},n = i.evt,s = function (t, e) {if (null == t) return {};var i,n,r = function (t, e) {if (null == t) return {};var i,n,r = {},s = Object.keys(t);for (n = 0; n < s.length; n++) i = s[n], e.indexOf(i) >= 0 || (r[i] = t[i]);return r;}(t, e);if (Object.getOwnPropertySymbols) {var s = Object.getOwnPropertySymbols(t);for (n = 0; n < s.length; n++) i = s[n], e.indexOf(i) >= 0 || Object.prototype.propertyIsEnumerable.call(t, i) && (r[i] = t[i]);}return r;}(i, q);H.pluginEvent.bind(Nt)(t, e, r({ dragEl: W, parentEl: K, ghostEl: Z, rootEl: Y, nextEl: X, lastDownEl: J, cloneEl: Q, cloneHidden: tt, dragStarted: pt, putSortable: ot, activeSortable: Nt.active, originalEvent: n, oldIndex: et, oldDraggableIndex: nt, newIndex: it, newDraggableIndex: rt, hideGhostForTarget: It, unhideGhostForTarget: Ft, cloneNowHidden: function () {tt = !0;}, cloneNowShown: function () {tt = !1;}, dispatchSortableEvent: function (t) {G({ sortable: e, name: t, originalEvent: n });} }, s));};function G(t) {!function (t) {var e = t.sortable,i = t.rootEl,n = t.name,s = t.targetEl,o = t.cloneEl,a = t.toEl,l = t.fromEl,u = t.oldIndex,d = t.newIndex,p = t.oldDraggableIndex,f = t.newDraggableIndex,g = t.originalEvent,m = t.putSortable,v = t.extraEventProperties;if (e = e || i && i[j]) {var y,b = e.options,w = "on" + n.charAt(0).toUpperCase() + n.substr(1);!window.CustomEvent || c || h ? (y = document.createEvent("Event")).initEvent(n, !0, !0) : y = new CustomEvent(n, { bubbles: !0, cancelable: !0 }), y.to = a || i, y.from = l || i, y.item = s || i, y.clone = o, y.oldIndex = u, y.newIndex = d, y.oldDraggableIndex = p, y.newDraggableIndex = f, y.originalEvent = g, y.pullMode = m ? m.lastPutMode : void 0;var x = r(r({}, v), H.getEventProperties(n, e));for (var S in x) y[S] = x[S];i && i.dispatchEvent(y), b[w] && b[w].call(e, y);}}(r({ putSortable: ot, cloneEl: Q, targetEl: W, rootEl: Y, oldIndex: et, oldDraggableIndex: nt, newIndex: it, newDraggableIndex: rt }, t));}var W,K,Z,Y,X,J,Q,tt,et,it,nt,rt,st,ot,at,lt,ct,ht,ut,dt,pt,ft,gt,mt,vt,yt = !1,bt = !1,wt = [],xt = !1,St = !1,Et = [],Ct = !1,kt = [],Tt = "undefined" != typeof document,At = p,Mt = h || c ? "cssFloat" : "float",_t = Tt && !f && !p && "draggable" in document.createElement("div"),Pt = function () {if (Tt) {if (c) return !1;var t = document.createElement("x");return t.style.cssText = "pointer-events:auto", "auto" === t.style.pointerEvents;}}(),Dt = function (t, e) {var i = C(t),n = parseInt(i.width) - parseInt(i.paddingLeft) - parseInt(i.paddingRight) - parseInt(i.borderLeftWidth) - parseInt(i.borderRightWidth),r = P(t, 0, e),s = P(t, 1, e),o = r && C(r),a = s && C(s),l = o && parseInt(o.marginLeft) + parseInt(o.marginRight) + M(r).width,c = a && parseInt(a.marginLeft) + parseInt(a.marginRight) + M(s).width;if ("flex" === i.display) return "column" === i.flexDirection || "column-reverse" === i.flexDirection ? "vertical" : "horizontal";if ("grid" === i.display) return i.gridTemplateColumns.split(" ").length <= 1 ? "vertical" : "horizontal";if (r && o.float && "none" !== o.float) {var h = "left" === o.float ? "left" : "right";return !s || "both" !== a.clear && a.clear !== h ? "horizontal" : "vertical";}return r && ("block" === o.display || "flex" === o.display || "table" === o.display || "grid" === o.display || l >= n && "none" === i[Mt] || s && "none" === i[Mt] && l + c > n) ? "vertical" : "horizontal";},Ot = function (t) {function e(t, i) {return function (n, r, s, o) {var a = n.options.group.name && r.options.group.name && n.options.group.name === r.options.group.name;if (null == t && (i || a)) return !0;if (null == t || !1 === t) return !1;if (i && "clone" === t) return t;if ("function" == typeof t) return e(t(n, r, s, o), i)(n, r, s, o);var l = (i ? n : r).options.group.name;return !0 === t || "string" == typeof t && t === l || t.join && t.indexOf(l) > -1;};}var i = {},n = t.group;n && "object" == s(n) || (n = { name: n }), i.name = n.name, i.checkPull = e(n.pull, !0), i.checkPut = e(n.put), i.revertClone = n.revertClone, t.group = i;},It = function () {!Pt && Z && C(Z, "display", "none");},Ft = function () {!Pt && Z && C(Z, "display", "");};Tt && !f && document.addEventListener("click", function (t) {if (bt) return t.preventDefault(), t.stopPropagation && t.stopPropagation(), t.stopImmediatePropagation && t.stopImmediatePropagation(), bt = !1, !1;}, !0);var Rt = function (t) {if (W) {t = t.touches ? t.touches[0] : t;var e = (r = t.clientX, s = t.clientY, wt.some(function (t) {var e = t[j].options.emptyInsertThreshold;if (e && !D(t)) {var i = M(t),n = r >= i.left - e && r <= i.right + e,a = s >= i.top - e && s <= i.bottom + e;return n && a ? o = t : void 0;}}), o);if (e) {var i = {};for (var n in t) t.hasOwnProperty(n) && (i[n] = t[n]);i.target = i.rootEl = e, i.preventDefault = void 0, i.stopPropagation = void 0, e[j]._onDragOver(i);}}var r, s, o;},Lt = function (t) {W && W.parentNode[j]._isOutsideThisEl(t.target);};function Nt(t, e) {if (!t || !t.nodeType || 1 !== t.nodeType) throw "Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el = t, this.options = e = a({}, e), t[j] = this;var i,n,s = { group: null, sort: !0, disabled: !1, store: null, handle: null, draggable: /^[uo]l$/i.test(t.nodeName) ? ">li" : ">*", swapThreshold: 1, invertSwap: !1, invertedSwapThreshold: null, removeCloneOnHide: !0, direction: function () {return Dt(t, this.options);}, ghostClass: "sortable-ghost", chosenClass: "sortable-chosen", dragClass: "sortable-drag", ignore: "a, img", filter: null, preventOnFilter: !0, animation: 0, easing: null, setData: function (t, e) {t.setData("Text", e.textContent);}, dropBubble: !1, dragoverBubble: !1, dataIdAttr: "data-id", delay: 0, delayOnTouchOnly: !1, touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1, forceFallback: !1, fallbackClass: "sortable-fallback", fallbackOnBody: !1, fallbackTolerance: 0, fallbackOffset: { x: 0, y: 0 }, supportPointer: !1 !== Nt.supportPointer && "PointerEvent" in window && (!d || p), emptyInsertThreshold: 5 };for (var o in H.initializePlugins(this, t, s), s) !(o in e) && (e[o] = s[o]);for (var l in Ot(e), this) "_" === l.charAt(0) && "function" == typeof this[l] && (this[l] = this[l].bind(this));this.nativeDraggable = !e.forceFallback && _t, this.nativeDraggable && (this.options.touchStartThreshold = 1), e.supportPointer ? m(t, "pointerdown", this._onTapStart) : (m(t, "mousedown", this._onTapStart), m(t, "touchstart", this._onTapStart)), this.nativeDraggable && (m(t, "dragover", this), m(t, "dragenter", this)), wt.push(this.el), e.store && e.store.get && this.sort(e.store.get(this) || []), a(this, (n = [], { captureAnimationState: function () {n = [], this.options.animation && [].slice.call(this.el.children).forEach(function (t) {if ("none" !== C(t, "display") && t !== Nt.ghost) {n.push({ target: t, rect: M(t) });var e = r({}, n[n.length - 1].rect);if (t.thisAnimationDuration) {var i = k(t, !0);i && (e.top -= i.f, e.left -= i.e);}t.fromRect = e;}});}, addAnimationState: function (t) {n.push(t);}, removeAnimationState: function (t) {n.splice(function (t, e) {for (var i in t) if (t.hasOwnProperty(i)) for (var n in e) if (e.hasOwnProperty(n) && e[n] === t[i][n]) return Number(i);return -1;}(n, { target: t }), 1);}, animateAll: function (t) {var e = this;if (!this.options.animation) return clearTimeout(i), void ("function" == typeof t && t());var r = !1,s = 0;n.forEach(function (t) {var i = 0,n = t.target,o = n.fromRect,a = M(n),l = n.prevFromRect,c = n.prevToRect,h = t.rect,u = k(n, !0);u && (a.top -= u.f, a.left -= u.e), n.toRect = a, n.thisAnimationDuration && R(l, a) && !R(o, a) && (h.top - a.top) / (h.left - a.left) === (o.top - a.top) / (o.left - a.left) && (i = function (t, e, i, n) {return Math.sqrt(Math.pow(e.top - t.top, 2) + Math.pow(e.left - t.left, 2)) / Math.sqrt(Math.pow(e.top - i.top, 2) + Math.pow(e.left - i.left, 2)) * n.animation;}(h, l, c, e.options)), R(a, o) || (n.prevFromRect = o, n.prevToRect = a, i || (i = e.options.animation), e.animate(n, h, a, i)), i && (r = !0, s = Math.max(s, i), clearTimeout(n.animationResetTimer), n.animationResetTimer = setTimeout(function () {n.animationTime = 0, n.prevFromRect = null, n.fromRect = null, n.prevToRect = null, n.thisAnimationDuration = null;}, i), n.thisAnimationDuration = i);}), clearTimeout(i), r ? i = setTimeout(function () {"function" == typeof t && t();}, s) : "function" == typeof t && t(), n = [];}, animate: function (t, e, i, n) {if (n) {C(t, "transition", ""), C(t, "transform", "");var r = k(this.el),s = r && r.a,o = r && r.d,a = (e.left - i.left) / (s || 1),l = (e.top - i.top) / (o || 1);t.animatingX = !!a, t.animatingY = !!l, C(t, "transform", "translate3d(" + a + "px," + l + "px,0)"), this.forRepaintDummy = function (t) {return t.offsetWidth;}(t), C(t, "transition", "transform " + n + "ms" + (this.options.easing ? " " + this.options.easing : "")), C(t, "transform", "translate3d(0,0,0)"), "number" == typeof t.animated && clearTimeout(t.animated), t.animated = setTimeout(function () {C(t, "transition", ""), C(t, "transform", ""), t.animated = !1, t.animatingX = !1, t.animatingY = !1;}, n);}} }));}function Vt(t, e, i, n, r, s, o, a) {var l,u,d = t[j],p = d.options.onMove;return !window.CustomEvent || c || h ? (l = document.createEvent("Event")).initEvent("move", !0, !0) : l = new CustomEvent("move", { bubbles: !0, cancelable: !0 }), l.to = e, l.from = t, l.dragged = i, l.draggedRect = n, l.related = r || e, l.relatedRect = s || M(e), l.willInsertAfter = a, l.originalEvent = o, t.dispatchEvent(l), p && (u = p.call(d, l, o)), u;}function Bt(t) {t.draggable = !1;}function jt() {Ct = !1;}function zt(t) {for (var e = t.tagName + t.className + t.src + t.href + t.textContent, i = e.length, n = 0; i--;) n += e.charCodeAt(i);return n.toString(36);}function Ut(t) {return setTimeout(t, 0);}function Ht(t) {return clearTimeout(t);}Nt.prototype = { constructor: Nt, _isOutsideThisEl: function (t) {this.el.contains(t) || t === this.el || (ft = null);}, _getDirection: function (t, e) {return "function" == typeof this.options.direction ? this.options.direction.call(this, t, e, W) : this.options.direction;}, _onTapStart: function (t) {if (t.cancelable) {var e = this,i = this.el,n = this.options,r = n.preventOnFilter,s = t.type,o = t.touches && t.touches[0] || t.pointerType && "touch" === t.pointerType && t,a = (o || t).target,l = t.target.shadowRoot && (t.path && t.path[0] || t.composedPath && t.composedPath()[0]) || a,c = n.filter;if (function (t) {kt.length = 0;for (var e = t.getElementsByTagName("input"), i = e.length; i--;) {var n = e[i];n.checked && kt.push(n);}}(i), !W && !(/mousedown|pointerdown/.test(s) && 0 !== t.button || n.disabled) && !l.isContentEditable && (this.nativeDraggable || !d || !a || "SELECT" !== a.tagName.toUpperCase()) && !((a = w(a, n.draggable, i, !1)) && a.animated || J === a)) {if (et = O(a), nt = O(a, n.draggable), "function" == typeof c) {if (c.call(this, t, a, this)) return G({ sortable: e, rootEl: l, name: "filter", targetEl: a, toEl: i, fromEl: i }), $("filter", e, { evt: t }), void (r && t.preventDefault());} else if (c && (c = c.split(",").some(function (n) {if (n = w(l, n.trim(), i, !1)) return G({ sortable: e, rootEl: n, name: "filter", targetEl: a, fromEl: i, toEl: i }), $("filter", e, { evt: t }), !0;}))) return void (r && t.preventDefault());n.handle && !w(l, n.handle, i, !1) || this._prepareDragStart(t, o, a);}}}, _prepareDragStart: function (t, e, i) {var n,r = this,s = r.el,o = r.options,a = s.ownerDocument;if (i && !W && i.parentNode === s) {var l = M(i);if (Y = s, K = (W = i).parentNode, X = W.nextSibling, J = i, st = o.group, Nt.dragged = W, at = { target: W, clientX: (e || t).clientX, clientY: (e || t).clientY }, ut = at.clientX - l.left, dt = at.clientY - l.top, this._lastX = (e || t).clientX, this._lastY = (e || t).clientY, W.style["will-change"] = "all", n = function () {$("delayEnded", r, { evt: t }), Nt.eventCanceled ? r._onDrop() : (r._disableDelayedDragEvents(), !u && r.nativeDraggable && (W.draggable = !0), r._triggerDragStart(t, e), G({ sortable: r, name: "choose", originalEvent: t }), E(W, o.chosenClass, !0));}, o.ignore.split(",").forEach(function (t) {T(W, t.trim(), Bt);}), m(a, "dragover", Rt), m(a, "mousemove", Rt), m(a, "touchmove", Rt), o.supportPointer ? (m(a, "pointerup", r._onDrop), !this.nativeDraggable && m(a, "pointercancel", r._onDrop)) : (m(a, "mouseup", r._onDrop), m(a, "touchend", r._onDrop), m(a, "touchcancel", r._onDrop)), u && this.nativeDraggable && (this.options.touchStartThreshold = 4, W.draggable = !0), $("delayStart", this, { evt: t }), !o.delay || o.delayOnTouchOnly && !e || this.nativeDraggable && (h || c)) n();else {if (Nt.eventCanceled) return void this._onDrop();o.supportPointer ? (m(a, "pointerup", r._disableDelayedDrag), m(a, "pointercancel", r._disableDelayedDrag)) : (m(a, "mouseup", r._disableDelayedDrag), m(a, "touchend", r._disableDelayedDrag), m(a, "touchcancel", r._disableDelayedDrag)), m(a, "mousemove", r._delayedDragTouchMoveHandler), m(a, "touchmove", r._delayedDragTouchMoveHandler), o.supportPointer && m(a, "pointermove", r._delayedDragTouchMoveHandler), r._dragStartTimer = setTimeout(n, o.delay);}}}, _delayedDragTouchMoveHandler: function (t) {var e = t.touches ? t.touches[0] : t;Math.max(Math.abs(e.clientX - this._lastX), Math.abs(e.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1)) && this._disableDelayedDrag();}, _disableDelayedDrag: function () {W && Bt(W), clearTimeout(this._dragStartTimer), this._disableDelayedDragEvents();}, _disableDelayedDragEvents: function () {var t = this.el.ownerDocument;v(t, "mouseup", this._disableDelayedDrag), v(t, "touchend", this._disableDelayedDrag), v(t, "touchcancel", this._disableDelayedDrag), v(t, "pointerup", this._disableDelayedDrag), v(t, "pointercancel", this._disableDelayedDrag), v(t, "mousemove", this._delayedDragTouchMoveHandler), v(t, "touchmove", this._delayedDragTouchMoveHandler), v(t, "pointermove", this._delayedDragTouchMoveHandler);}, _triggerDragStart: function (t, e) {e = e || "touch" == t.pointerType && t, !this.nativeDraggable || e ? this.options.supportPointer ? m(document, "pointermove", this._onTouchMove) : m(document, e ? "touchmove" : "mousemove", this._onTouchMove) : (m(W, "dragend", this), m(Y, "dragstart", this._onDragStart));try {document.selection ? Ut(function () {document.selection.empty();}) : window.getSelection().removeAllRanges();} catch (t) {}}, _dragStarted: function (t, e) {if (yt = !1, Y && W) {$("dragStarted", this, { evt: e }), this.nativeDraggable && m(document, "dragover", Lt);var i = this.options;!t && E(W, i.dragClass, !1), E(W, i.ghostClass, !0), Nt.active = this, t && this._appendGhost(), G({ sortable: this, name: "start", originalEvent: e });} else this._nulling();}, _emulateDragOver: function () {if (lt) {this._lastX = lt.clientX, this._lastY = lt.clientY, It();for (var t = document.elementFromPoint(lt.clientX, lt.clientY), e = t; t && t.shadowRoot && (t = t.shadowRoot.elementFromPoint(lt.clientX, lt.clientY)) !== e;) e = t;if (W.parentNode[j]._isOutsideThisEl(t), e) do {if (e[j] && e[j]._onDragOver({ clientX: lt.clientX, clientY: lt.clientY, target: t, rootEl: e }) && !this.options.dragoverBubble) break;t = e;} while (e = b(e));Ft();}}, _onTouchMove: function (t) {if (at) {var e = this.options,i = e.fallbackTolerance,n = e.fallbackOffset,r = t.touches ? t.touches[0] : t,s = Z && k(Z, !0),o = Z && s && s.a,a = Z && s && s.d,l = At && vt && I(vt),c = (r.clientX - at.clientX + n.x) / (o || 1) + (l ? l[0] - Et[0] : 0) / (o || 1),h = (r.clientY - at.clientY + n.y) / (a || 1) + (l ? l[1] - Et[1] : 0) / (a || 1);if (!Nt.active && !yt) {if (i && Math.max(Math.abs(r.clientX - this._lastX), Math.abs(r.clientY - this._lastY)) < i) return;this._onDragStart(t, !0);}if (Z) {s ? (s.e += c - (ct || 0), s.f += h - (ht || 0)) : s = { a: 1, b: 0, c: 0, d: 1, e: c, f: h };var u = "matrix(".concat(s.a, ",").concat(s.b, ",").concat(s.c, ",").concat(s.d, ",").concat(s.e, ",").concat(s.f, ")");C(Z, "webkitTransform", u), C(Z, "mozTransform", u), C(Z, "msTransform", u), C(Z, "transform", u), ct = c, ht = h, lt = r;}t.cancelable && t.preventDefault();}}, _appendGhost: function () {if (!Z) {var t = this.options.fallbackOnBody ? document.body : Y,e = M(W, !0, At, !0, t),i = this.options;if (At) {for (vt = t; "static" === C(vt, "position") && "none" === C(vt, "transform") && vt !== document;) vt = vt.parentNode;vt !== document.body && vt !== document.documentElement ? (vt === document && (vt = A()), e.top += vt.scrollTop, e.left += vt.scrollLeft) : vt = A(), Et = I(vt);}E(Z = W.cloneNode(!0), i.ghostClass, !1), E(Z, i.fallbackClass, !0), E(Z, i.dragClass, !0), C(Z, "transition", ""), C(Z, "transform", ""), C(Z, "box-sizing", "border-box"), C(Z, "margin", 0), C(Z, "top", e.top), C(Z, "left", e.left), C(Z, "width", e.width), C(Z, "height", e.height), C(Z, "opacity", "0.8"), C(Z, "position", At ? "absolute" : "fixed"), C(Z, "zIndex", "100000"), C(Z, "pointerEvents", "none"), Nt.ghost = Z, t.appendChild(Z), C(Z, "transform-origin", ut / parseInt(Z.style.width) * 100 + "% " + dt / parseInt(Z.style.height) * 100 + "%");}}, _onDragStart: function (t, e) {var i = this,n = t.dataTransfer,r = i.options;$("dragStart", this, { evt: t }), Nt.eventCanceled ? this._onDrop() : ($("setupClone", this), Nt.eventCanceled || ((Q = V(W)).removeAttribute("id"), Q.draggable = !1, Q.style["will-change"] = "", this._hideClone(), E(Q, this.options.chosenClass, !1), Nt.clone = Q), i.cloneId = Ut(function () {$("clone", i), Nt.eventCanceled || (i.options.removeCloneOnHide || Y.insertBefore(Q, W), i._hideClone(), G({ sortable: i, name: "clone" }));}), !e && E(W, r.dragClass, !0), e ? (bt = !0, i._loopId = setInterval(i._emulateDragOver, 50)) : (v(document, "mouseup", i._onDrop), v(document, "touchend", i._onDrop), v(document, "touchcancel", i._onDrop), n && (n.effectAllowed = "move", r.setData && r.setData.call(i, n, W)), m(document, "drop", i), C(W, "transform", "translateZ(0)")), yt = !0, i._dragStartId = Ut(i._dragStarted.bind(i, e, t)), m(document, "selectstart", i), pt = !0, window.getSelection().removeAllRanges(), d && C(document.body, "user-select", "none"));}, _onDragOver: function (t) {var e,i,n,s,o = this.el,a = t.target,l = this.options,c = l.group,h = Nt.active,u = st === c,d = l.sort,p = ot || h,f = this,g = !1;if (!Ct) {if (void 0 !== t.preventDefault && t.cancelable && t.preventDefault(), a = w(a, l.draggable, o, !0), z("dragOver"), Nt.eventCanceled) return g;if (W.contains(t.target) || a.animated && a.animatingX && a.animatingY || f._ignoreWhileAnimating === a) return H(!1);if (bt = !1, h && !l.disabled && (u ? d || (n = K !== Y) : ot === this || (this.lastPutMode = st.checkPull(this, h, W, t)) && c.checkPut(this, h, W, t))) {if (s = "vertical" === this._getDirection(t, a), e = M(W), z("dragOverValid"), Nt.eventCanceled) return g;if (n) return K = Y, U(), this._hideClone(), z("revert"), Nt.eventCanceled || (X ? Y.insertBefore(W, X) : Y.appendChild(W)), H(!0);var m = D(o, l.draggable);if (!m || function (t, e, i) {var n = M(D(i.el, i.options.draggable)),r = B(i.el, i.options, Z);return e ? t.clientX > r.right + 10 || t.clientY > n.bottom && t.clientX > n.left : t.clientY > r.bottom + 10 || t.clientX > n.right && t.clientY > n.top;}(t, s, this) && !m.animated) {if (m === W) return H(!1);if (m && o === t.target && (a = m), a && (i = M(a)), !1 !== Vt(Y, o, W, e, a, i, t, !!a)) return U(), m && m.nextSibling ? o.insertBefore(W, m.nextSibling) : o.appendChild(W), K = o, q(), H(!0);} else if (m && function (t, e, i) {var n = M(P(i.el, 0, i.options, !0)),r = B(i.el, i.options, Z);return e ? t.clientX < r.left - 10 || t.clientY < n.top && t.clientX < n.right : t.clientY < r.top - 10 || t.clientY < n.bottom && t.clientX < n.left;}(t, s, this)) {var v = P(o, 0, l, !0);if (v === W) return H(!1);if (i = M(a = v), !1 !== Vt(Y, o, W, e, a, i, t, !1)) return U(), o.insertBefore(W, v), K = o, q(), H(!0);} else if (a.parentNode === o) {i = M(a);var y,b,x,S = W.parentNode !== o,k = !function (t, e, i) {var n = i ? t.left : t.top,r = i ? t.right : t.bottom,s = i ? t.width : t.height,o = i ? e.left : e.top,a = i ? e.right : e.bottom,l = i ? e.width : e.height;return n === o || r === a || n + s / 2 === o + l / 2;}(W.animated && W.toRect || e, a.animated && a.toRect || i, s),T = s ? "top" : "left",A = _(a, "top", "top") || _(W, "top", "top"),I = A ? A.scrollTop : void 0;if (ft !== a && (b = i[T], xt = !1, St = !k && l.invertSwap || S), y = function (t, e, i, n, r, s, o, a) {var l = n ? t.clientY : t.clientX,c = n ? i.height : i.width,h = n ? i.top : i.left,u = n ? i.bottom : i.right,d = !1;if (!o) if (a && mt < c * r) {if (!xt && (1 === gt ? l > h + c * s / 2 : l < u - c * s / 2) && (xt = !0), xt) d = !0;else if (1 === gt ? l < h + mt : l > u - mt) return -gt;} else if (l > h + c * (1 - r) / 2 && l < u - c * (1 - r) / 2) return function (t) {return O(W) < O(t) ? 1 : -1;}(e);return (d = d || o) && (l < h + c * s / 2 || l > u - c * s / 2) ? l > h + c / 2 ? 1 : -1 : 0;}(t, a, i, s, k ? 1 : l.swapThreshold, null == l.invertedSwapThreshold ? l.swapThreshold : l.invertedSwapThreshold, St, ft === a), 0 !== y) {var F = O(W);do {F -= y, x = K.children[F];} while (x && ("none" === C(x, "display") || x === Z));}if (0 === y || x === a) return H(!1);ft = a, gt = y;var R = a.nextElementSibling,L = !1,V = Vt(Y, o, W, e, a, i, t, L = 1 === y);if (!1 !== V) return 1 !== V && -1 !== V || (L = 1 === V), Ct = !0, setTimeout(jt, 30), U(), L && !R ? o.appendChild(W) : a.parentNode.insertBefore(W, L ? R : a), A && N(A, 0, I - A.scrollTop), K = W.parentNode, void 0 === b || St || (mt = Math.abs(b - M(a)[T])), q(), H(!0);}if (o.contains(W)) return H(!1);}return !1;}function z(l, c) {$(l, f, r({ evt: t, isOwner: u, axis: s ? "vertical" : "horizontal", revert: n, dragRect: e, targetRect: i, canSort: d, fromSortable: p, target: a, completed: H, onMove: function (i, n) {return Vt(Y, o, W, e, i, M(i), t, n);}, changed: q }, c));}function U() {z("dragOverAnimationCapture"), f.captureAnimationState(), f !== p && p.captureAnimationState();}function H(e) {return z("dragOverCompleted", { insertion: e }), e && (u ? h._hideClone() : h._showClone(f), f !== p && (E(W, ot ? ot.options.ghostClass : h.options.ghostClass, !1), E(W, l.ghostClass, !0)), ot !== f && f !== Nt.active ? ot = f : f === Nt.active && ot && (ot = null), p === f && (f._ignoreWhileAnimating = a), f.animateAll(function () {z("dragOverAnimationComplete"), f._ignoreWhileAnimating = null;}), f !== p && (p.animateAll(), p._ignoreWhileAnimating = null)), (a === W && !W.animated || a === o && !a.animated) && (ft = null), l.dragoverBubble || t.rootEl || a === document || (W.parentNode[j]._isOutsideThisEl(t.target), !e && Rt(t)), !l.dragoverBubble && t.stopPropagation && t.stopPropagation(), g = !0;}function q() {it = O(W), rt = O(W, l.draggable), G({ sortable: f, name: "change", toEl: o, newIndex: it, newDraggableIndex: rt, originalEvent: t });}}, _ignoreWhileAnimating: null, _offMoveEvents: function () {v(document, "mousemove", this._onTouchMove), v(document, "touchmove", this._onTouchMove), v(document, "pointermove", this._onTouchMove), v(document, "dragover", Rt), v(document, "mousemove", Rt), v(document, "touchmove", Rt);}, _offUpEvents: function () {var t = this.el.ownerDocument;v(t, "mouseup", this._onDrop), v(t, "touchend", this._onDrop), v(t, "pointerup", this._onDrop), v(t, "pointercancel", this._onDrop), v(t, "touchcancel", this._onDrop), v(document, "selectstart", this);}, _onDrop: function (t) {var e = this.el,i = this.options;it = O(W), rt = O(W, i.draggable), $("drop", this, { evt: t }), K = W && W.parentNode, it = O(W), rt = O(W, i.draggable), Nt.eventCanceled || (yt = !1, St = !1, xt = !1, clearInterval(this._loopId), clearTimeout(this._dragStartTimer), Ht(this.cloneId), Ht(this._dragStartId), this.nativeDraggable && (v(document, "drop", this), v(e, "dragstart", this._onDragStart)), this._offMoveEvents(), this._offUpEvents(), d && C(document.body, "user-select", ""), C(W, "transform", ""), t && (pt && (t.cancelable && t.preventDefault(), !i.dropBubble && t.stopPropagation()), Z && Z.parentNode && Z.parentNode.removeChild(Z), (Y === K || ot && "clone" !== ot.lastPutMode) && Q && Q.parentNode && Q.parentNode.removeChild(Q), W && (this.nativeDraggable && v(W, "dragend", this), Bt(W), W.style["will-change"] = "", pt && !yt && E(W, ot ? ot.options.ghostClass : this.options.ghostClass, !1), E(W, this.options.chosenClass, !1), G({ sortable: this, name: "unchoose", toEl: K, newIndex: null, newDraggableIndex: null, originalEvent: t }), Y !== K ? (it >= 0 && (G({ rootEl: K, name: "add", toEl: K, fromEl: Y, originalEvent: t }), G({ sortable: this, name: "remove", toEl: K, originalEvent: t }), G({ rootEl: K, name: "sort", toEl: K, fromEl: Y, originalEvent: t }), G({ sortable: this, name: "sort", toEl: K, originalEvent: t })), ot && ot.save()) : it !== et && it >= 0 && (G({ sortable: this, name: "update", toEl: K, originalEvent: t }), G({ sortable: this, name: "sort", toEl: K, originalEvent: t })), Nt.active && (null != it && -1 !== it || (it = et, rt = nt), G({ sortable: this, name: "end", toEl: K, originalEvent: t }), this.save())))), this._nulling();}, _nulling: function () {$("nulling", this), Y = W = K = Z = X = Q = J = tt = at = lt = pt = it = rt = et = nt = ft = gt = ot = st = Nt.dragged = Nt.ghost = Nt.clone = Nt.active = null, kt.forEach(function (t) {t.checked = !0;}), kt.length = ct = ht = 0;}, handleEvent: function (t) {switch (t.type) {case "drop":case "dragend":this._onDrop(t);break;case "dragenter":case "dragover":W && (this._onDragOver(t), function (t) {t.dataTransfer && (t.dataTransfer.dropEffect = "move"), t.cancelable && t.preventDefault();}(t));break;case "selectstart":t.preventDefault();}}, toArray: function () {for (var t, e = [], i = this.el.children, n = 0, r = i.length, s = this.options; n < r; n++) w(t = i[n], s.draggable, this.el, !1) && e.push(t.getAttribute(s.dataIdAttr) || zt(t));return e;}, sort: function (t, e) {var i = {},n = this.el;this.toArray().forEach(function (t, e) {var r = n.children[e];w(r, this.options.draggable, n, !1) && (i[t] = r);}, this), e && this.captureAnimationState(), t.forEach(function (t) {i[t] && (n.removeChild(i[t]), n.appendChild(i[t]));}), e && this.animateAll();}, save: function () {var t = this.options.store;t && t.set && t.set(this);}, closest: function (t, e) {return w(t, e || this.options.draggable, this.el, !1);}, option: function (t, e) {var i = this.options;if (void 0 === e) return i[t];var n = H.modifyOption(this, t, e);i[t] = void 0 !== n ? n : e, "group" === t && Ot(i);}, destroy: function () {$("destroy", this);var t = this.el;t[j] = null, v(t, "mousedown", this._onTapStart), v(t, "touchstart", this._onTapStart), v(t, "pointerdown", this._onTapStart), this.nativeDraggable && (v(t, "dragover", this), v(t, "dragenter", this)), Array.prototype.forEach.call(t.querySelectorAll("[draggable]"), function (t) {t.removeAttribute("draggable");}), this._onDrop(), this._disableDelayedDragEvents(), wt.splice(wt.indexOf(this.el), 1), this.el = t = null;}, _hideClone: function () {if (!tt) {if ($("hideClone", this), Nt.eventCanceled) return;C(Q, "display", "none"), this.options.removeCloneOnHide && Q.parentNode && Q.parentNode.removeChild(Q), tt = !0;}}, _showClone: function (t) {if ("clone" === t.lastPutMode) {if (tt) {if ($("showClone", this), Nt.eventCanceled) return;W.parentNode != Y || this.options.group.revertClone ? X ? Y.insertBefore(Q, X) : Y.appendChild(Q) : Y.insertBefore(Q, W), this.options.group.revertClone && this.animate(W, Q), C(Q, "display", ""), tt = !1;}} else this._hideClone();} }, Tt && m(document, "touchmove", function (t) {(Nt.active || yt) && t.cancelable && t.preventDefault();}), Nt.utils = { on: m, off: v, css: C, find: T, is: function (t, e) {return !!w(t, e, t, !1);}, extend: function (t, e) {if (t && e) for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);return t;}, throttle: L, closest: w, toggleClass: E, clone: V, index: O, nextTick: Ut, cancelNextTick: Ht, detectDirection: Dt, getChild: P, expando: j }, Nt.get = function (t) {return t[j];}, Nt.mount = function () {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];e[0].constructor === Array && (e = e[0]), e.forEach(function (t) {if (!t.prototype || !t.prototype.constructor) throw "Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils && (Nt.utils = r(r({}, Nt.utils), t.utils)), H.mount(t);});}, Nt.create = function (t, e) {return new Nt(t, e);}, Nt.version = "1.15.6";var qt,$t,Gt,Wt,Kt,Zt,Yt = [],Xt = !1;function Jt() {Yt.forEach(function (t) {clearInterval(t.pid);}), Yt = [];}function Qt() {clearInterval(Zt);}var te = L(function (t, e, i, n) {if (e.scroll) {var r,s = (t.touches ? t.touches[0] : t).clientX,o = (t.touches ? t.touches[0] : t).clientY,a = e.scrollSensitivity,l = e.scrollSpeed,c = A(),h = !1;$t !== i && ($t = i, Jt(), qt = e.scroll, r = e.scrollFn, !0 === qt && (qt = F(i, !0)));var u = 0,d = qt;do {var p = d,f = M(p),g = f.top,m = f.bottom,v = f.left,y = f.right,b = f.width,w = f.height,x = void 0,S = void 0,E = p.scrollWidth,k = p.scrollHeight,T = C(p),_ = p.scrollLeft,P = p.scrollTop;p === c ? (x = b < E && ("auto" === T.overflowX || "scroll" === T.overflowX || "visible" === T.overflowX), S = w < k && ("auto" === T.overflowY || "scroll" === T.overflowY || "visible" === T.overflowY)) : (x = b < E && ("auto" === T.overflowX || "scroll" === T.overflowX), S = w < k && ("auto" === T.overflowY || "scroll" === T.overflowY));var D = x && (Math.abs(y - s) <= a && _ + b < E) - (Math.abs(v - s) <= a && !!_),O = S && (Math.abs(m - o) <= a && P + w < k) - (Math.abs(g - o) <= a && !!P);if (!Yt[u]) for (var I = 0; I <= u; I++) Yt[I] || (Yt[I] = {});Yt[u].vx == D && Yt[u].vy == O && Yt[u].el === p || (Yt[u].el = p, Yt[u].vx = D, Yt[u].vy = O, clearInterval(Yt[u].pid), 0 == D && 0 == O || (h = !0, Yt[u].pid = setInterval(function () {n && 0 === this.layer && Nt.active._onTouchMove(Kt);var e = Yt[this.layer].vy ? Yt[this.layer].vy * l : 0,i = Yt[this.layer].vx ? Yt[this.layer].vx * l : 0;"function" == typeof r && "continue" !== r.call(Nt.dragged.parentNode[j], i, e, t, Kt, Yt[this.layer].el) || N(Yt[this.layer].el, i, e);}.bind({ layer: u }), 24))), u++;} while (e.bubbleScroll && d !== c && (d = F(d, !1)));Xt = h;}}, 30),ee = function (t) {var e = t.originalEvent,i = t.putSortable,n = t.dragEl,r = t.activeSortable,s = t.dispatchSortableEvent,o = t.hideGhostForTarget,a = t.unhideGhostForTarget;if (e) {var l = i || r;o();var c = e.changedTouches && e.changedTouches.length ? e.changedTouches[0] : e,h = document.elementFromPoint(c.clientX, c.clientY);a(), l && !l.el.contains(h) && (s("spill"), this.onSpill({ dragEl: n, putSortable: i }));}};function ie() {}function ne() {}ie.prototype = { startIndex: null, dragStart: function (t) {var e = t.oldDraggableIndex;this.startIndex = e;}, onSpill: function (t) {var e = t.dragEl,i = t.putSortable;this.sortable.captureAnimationState(), i && i.captureAnimationState();var n = P(this.sortable.el, this.startIndex, this.options);n ? this.sortable.el.insertBefore(e, n) : this.sortable.el.appendChild(e), this.sortable.animateAll(), i && i.animateAll();}, drop: ee }, a(ie, { pluginName: "revertOnSpill" }), ne.prototype = { onSpill: function (t) {var e = t.dragEl,i = t.putSortable || this.sortable;i.captureAnimationState(), e.parentNode && e.parentNode.removeChild(e), i.animateAll();}, drop: ee }, a(ne, { pluginName: "removeOnSpill" }), Nt.mount(new function () {function t() {for (var t in this.defaults = { scroll: !0, forceAutoScrollFallback: !1, scrollSensitivity: 30, scrollSpeed: 10, bubbleScroll: !0 }, this) "_" === t.charAt(0) && "function" == typeof this[t] && (this[t] = this[t].bind(this));}return t.prototype = { dragStarted: function (t) {var e = t.originalEvent;this.sortable.nativeDraggable ? m(document, "dragover", this._handleAutoScroll) : this.options.supportPointer ? m(document, "pointermove", this._handleFallbackAutoScroll) : e.touches ? m(document, "touchmove", this._handleFallbackAutoScroll) : m(document, "mousemove", this._handleFallbackAutoScroll);}, dragOverCompleted: function (t) {var e = t.originalEvent;this.options.dragOverBubble || e.rootEl || this._handleAutoScroll(e);}, drop: function () {this.sortable.nativeDraggable ? v(document, "dragover", this._handleAutoScroll) : (v(document, "pointermove", this._handleFallbackAutoScroll), v(document, "touchmove", this._handleFallbackAutoScroll), v(document, "mousemove", this._handleFallbackAutoScroll)), Qt(), Jt(), clearTimeout(x), x = void 0;}, nulling: function () {Kt = $t = qt = Xt = Zt = Gt = Wt = null, Yt.length = 0;}, _handleFallbackAutoScroll: function (t) {this._handleAutoScroll(t, !0);}, _handleAutoScroll: function (t, e) {var i = this,n = (t.touches ? t.touches[0] : t).clientX,r = (t.touches ? t.touches[0] : t).clientY,s = document.elementFromPoint(n, r);if (Kt = t, e || this.options.forceAutoScrollFallback || h || c || d) {te(t, this.options, s, e);var o = F(s, !0);!Xt || Zt && n === Gt && r === Wt || (Zt && Qt(), Zt = setInterval(function () {var s = F(document.elementFromPoint(n, r), !0);s !== o && (o = s, Jt()), te(t, i.options, s, e);}, 10), Gt = n, Wt = r);} else {if (!this.options.bubbleScroll || F(s, !0) === A()) return void Jt();te(t, this.options, F(s, !1), !1);}} }, a(t, { pluginName: "scroll", initializeByDefault: !0 });}()), Nt.mount(ne, ie);const re = Nt;}, 270: (t, e, i) => {"use strict";const n = i(3908),r = i(8311);t.exports = (t, e, i) => {let s = null,o = null,a = null;try {a = new r(e, i);} catch (t) {return null;}return t.forEach((t) => {a.test(t) && (s && 1 !== o.compare(t) || (s = t, o = new n(s, i)));}), s;};}, 280: (t, e, i) => {"use strict";var n = i(5606);const r = i(3627),s = "win32" === n.platform,{ REGEX_BACKSLASH: o, REGEX_REMOVE_BACKSLASH: a, REGEX_SPECIAL_CHARS: l, REGEX_SPECIAL_CHARS_GLOBAL: c } = i(3940);e.isObject = (t) => null !== t && "object" == typeof t && !Array.isArray(t), e.hasRegexChars = (t) => l.test(t), e.isRegexChar = (t) => 1 === t.length && e.hasRegexChars(t), e.escapeRegex = (t) => t.replace(c, "\\$1"), e.toPosixSlashes = (t) => t.replace(o, "/"), e.removeBackslashes = (t) => t.replace(a, (t) => "\\" === t ? "" : t), e.supportsLookbehinds = () => {const t = n.version.slice(1).split(".").map(Number);return 3 === t.length && t[0] >= 9 || 8 === t[0] && t[1] >= 10;}, e.isWindows = (t) => t && "boolean" == typeof t.windows ? t.windows : !0 === s || "\\" === r.sep, e.escapeLast = (t, i, n) => {const r = t.lastIndexOf(i, n);return -1 === r ? t : "\\" === t[r - 1] ? e.escapeLast(t, i, r - 1) : `${t.slice(0, r)}\\${t.slice(r)}`;}, e.removePrefix = (t, e = {}) => {let i = t;return i.startsWith("./") && (i = i.slice(2), e.prefix = "./"), i;}, e.wrapOutput = (t, e = {}, i = {}) => {let n = `${i.contains ? "" : "^"}(?:${t})${i.contains ? "" : "$"}`;return !0 === e.negated && (n = `(?:^(?!${n}).*$)`), n;};}, 309: (t, e, i) => {"use strict";var n, r;i.d(e, { u: () => r }), function (t) {t.matched = "#eae8e8", t.unmatched = "black";}(n || (n = {})), function (t) {t.Select = "select-node", t.Reset = "reset";}(r || (r = {}));}, 365: (t, e, i) => {"use strict";i.d(e, { PH: () => f, Qj: () => p, Z6: () => c, cF: () => n, fI: () => h, iX: () => I, rr: () => O, uY: () => o });const n = 1024;let r = 0;class s {constructor(t, e) {this.from = t, this.to = e;}}class o {constructor(t = {}) {this.id = r++, this.perNode = !!t.perNode, this.deserialize = t.deserialize || (() => {throw new Error("This node type doesn't define a deserialize function");});}add(t) {if (this.perNode) throw new RangeError("Can't add per-node props to node types");return "function" != typeof t && (t = c.match(t)), (e) => {let i = t(e);return void 0 === i ? null : [this, i];};}}o.closedBy = new o({ deserialize: (t) => t.split(" ") }), o.openedBy = new o({ deserialize: (t) => t.split(" ") }), o.group = new o({ deserialize: (t) => t.split(" ") }), o.isolate = new o({ deserialize: (t) => {if (t && "rtl" != t && "ltr" != t && "auto" != t) throw new RangeError("Invalid value for isolate: " + t);return t || "auto";} }), o.contextHash = new o({ perNode: !0 }), o.lookAhead = new o({ perNode: !0 }), o.mounted = new o({ perNode: !0 });class a {constructor(t, e, i) {this.tree = t, this.overlay = e, this.parser = i;}static get(t) {return t && t.props && t.props[o.mounted.id];}}const l = Object.create(null);class c {constructor(t, e, i, n = 0) {this.name = t, this.props = e, this.id = i, this.flags = n;}static define(t) {let e = t.props && t.props.length ? Object.create(null) : l,i = (t.top ? 1 : 0) | (t.skipped ? 2 : 0) | (t.error ? 4 : 0) | (null == t.name ? 8 : 0),n = new c(t.name || "", e, t.id, i);if (t.props) for (let i of t.props) if (Array.isArray(i) || (i = i(n)), i) {if (i[0].perNode) throw new RangeError("Can't store a per-node prop on a node type");e[i[0].id] = i[1];}return n;}prop(t) {return this.props[t.id];}get isTop() {return (1 & this.flags) > 0;}get isSkipped() {return (2 & this.flags) > 0;}get isError() {return (4 & this.flags) > 0;}get isAnonymous() {return (8 & this.flags) > 0;}is(t) {if ("string" == typeof t) {if (this.name == t) return !0;let e = this.prop(o.group);return !!e && e.indexOf(t) > -1;}return this.id == t;}static match(t) {let e = Object.create(null);for (let i in t) for (let n of i.split(" ")) e[n] = t[i];return (t) => {for (let i = t.prop(o.group), n = -1; n < (i ? i.length : 0); n++) {let r = e[n < 0 ? t.name : i[n]];if (r) return r;}};}}c.none = new c("", Object.create(null), 0, 8);class h {constructor(t) {this.types = t;for (let e = 0; e < t.length; e++) if (t[e].id != e) throw new RangeError("Node type ids should correspond to array positions when creating a node set");}extend(...t) {let e = [];for (let i of this.types) {let n = null;for (let e of t) {let t = e(i);t && (n || (n = Object.assign({}, i.props)), n[t[0].id] = t[1]);}e.push(n ? new c(i.name, n, i.id, i.flags) : i);}return new h(e);}}const u = new WeakMap(),d = new WeakMap();var p;!function (t) {t[t.ExcludeBuffers = 1] = "ExcludeBuffers", t[t.IncludeAnonymous = 2] = "IncludeAnonymous", t[t.IgnoreMounts = 4] = "IgnoreMounts", t[t.IgnoreOverlays = 8] = "IgnoreOverlays";}(p || (p = {}));class f {constructor(t, e, i, n, r) {if (this.type = t, this.children = e, this.positions = i, this.length = n, this.props = null, r && r.length) {this.props = Object.create(null);for (let [t, e] of r) this.props["number" == typeof t ? t : t.id] = e;}}toString() {let t = a.get(this);if (t && !t.overlay) return t.tree.toString();let e = "";for (let t of this.children) {let i = t.toString();i && (e && (e += ","), e += i);}return this.type.name ? (/\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) + (e.length ? "(" + e + ")" : "") : e;}cursor(t = 0) {return new A(this.topNode, t);}cursorAt(t, e = 0, i = 0) {let n = u.get(this) || this.topNode,r = new A(n);return r.moveTo(t, e), u.set(this, r._tree), r;}get topNode() {return new w(this, 0, 0, null);}resolve(t, e = 0) {let i = y(u.get(this) || this.topNode, t, e, !1);return u.set(this, i), i;}resolveInner(t, e = 0) {let i = y(d.get(this) || this.topNode, t, e, !0);return d.set(this, i), i;}resolveStack(t, e = 0) {return function (t, e, i) {let n = t.resolveInner(e, i),r = null;for (let t = n instanceof w ? n : n.context.parent; t; t = t.parent) if (t.index < 0) {let s = t.parent;(r || (r = [n])).push(s.resolve(e, i)), t = s;} else {let s = a.get(t.tree);if (s && s.overlay && s.overlay[0].from <= e && s.overlay[s.overlay.length - 1].to >= e) {let o = new w(s.tree, s.overlay[0].from + t.from, -1, t);(r || (r = [n])).push(y(o, e, i, !1));}}return r ? k(r) : n;}(this, t, e);}iterate(t) {let { enter: e, leave: i, from: n = 0, to: r = this.length } = t,s = t.mode || 0,o = (s & p.IncludeAnonymous) > 0;for (let t = this.cursor(s | p.IncludeAnonymous);;) {let s = !1;if (t.from <= r && t.to >= n && (!o && t.type.isAnonymous || !1 !== e(t))) {if (t.firstChild()) continue;s = !0;}for (; s && i && (o || !t.type.isAnonymous) && i(t), !t.nextSibling();) {if (!t.parent()) return;s = !0;}}}prop(t) {return t.perNode ? this.props ? this.props[t.id] : void 0 : this.type.prop(t);}get propValues() {let t = [];if (this.props) for (let e in this.props) t.push([+e, this.props[e]]);return t;}balance(t = {}) {return this.children.length <= 8 ? this : D(c.none, this.children, this.positions, 0, this.children.length, 0, this.length, (t, e, i) => new f(this.type, t, e, i, this.propValues), t.makeTree || ((t, e, i) => new f(c.none, t, e, i)));}static build(t) {return function (t) {var e;let { buffer: i, nodeSet: r, maxBufferLength: s = n, reused: a = [], minRepeatType: l = r.types.length } = t,c = Array.isArray(i) ? new g(i, i.length) : i,h = r.types,u = 0,d = 0;function p(t, e, i, n, g, x) {let { id: S, start: E, end: C, size: k } = c,T = d,A = u;for (; k < 0;) {if (c.next(), -1 == k) {let e = a[S];return i.push(e), void n.push(E - t);}if (-3 == k) return void (u = S);if (-4 == k) return void (d = S);throw new RangeError(`Unrecognized record size: ${k}`);}let M,_,P = h[S],O = E - t;if (C - E <= s && (_ = function (t, e) {let i = c.fork(),n = 0,r = 0,o = 0,a = i.end - s,h = { size: 0, start: 0, skip: 0 };t: for (let s = i.pos - t; i.pos > s;) {let t = i.size;if (i.id == e && t >= 0) {h.size = n, h.start = r, h.skip = o, o += 4, n += 4, i.next();continue;}let c = i.pos - t;if (t < 0 || c < s || i.start < a) break;let u = i.id >= l ? 4 : 0,d = i.start;for (i.next(); i.pos > c;) {if (i.size < 0) {if (-3 != i.size) break t;u += 4;} else i.id >= l && (u += 4);i.next();}r = d, n += t, o += u;}return (e < 0 || n == t) && (h.size = n, h.start = r, h.skip = o), h.size > 4 ? h : void 0;}(c.pos - e, g))) {let e = new Uint16Array(_.size - _.skip),i = c.pos - _.size,n = e.length;for (; c.pos > i;) n = w(_.start, e, n);M = new m(e, C - _.start, r), O = _.start - t;} else {let t = c.pos - k;c.next();let e = [],i = [],n = S >= l ? S : -1,r = 0,a = C;for (; c.pos > t;) n >= 0 && c.id == n && c.size >= 0 ? (c.end <= a - s && (y(e, i, E, r, c.end, a, n, T, A), r = e.length, a = c.end), c.next()) : x > 2500 ? v(E, t, e, i) : p(E, t, e, i, n, x + 1);if (n >= 0 && r > 0 && r < e.length && y(e, i, E, r, E, a, n, T, A), e.reverse(), i.reverse(), n > -1 && r > 0) {let t = function (t, e) {return (i, n, r) => {let s,a,l = 0,c = i.length - 1;if (c >= 0 && (s = i[c]) instanceof f) {if (!c && s.type == t && s.length == r) return s;(a = s.prop(o.lookAhead)) && (l = n[c] + s.length + a);}return b(t, i, n, r, l, e);};}(P, A);M = D(P, e, i, 0, e.length, 0, C - E, t, t);} else M = b(P, e, i, C - E, T - C, A);}i.push(M), n.push(O);}function v(t, e, i, n) {let o = [],a = 0,l = -1;for (; c.pos > e;) {let { id: t, start: e, end: i, size: n } = c;if (n > 4) c.next();else {if (l > -1 && e < l) break;l < 0 && (l = i - s), o.push(t, e, i), a++, c.next();}}if (a) {let e = new Uint16Array(4 * a),s = o[o.length - 2];for (let t = o.length - 3, i = 0; t >= 0; t -= 3) e[i++] = o[t], e[i++] = o[t + 1] - s, e[i++] = o[t + 2] - s, e[i++] = i;i.push(new m(e, o[2] - s, r)), n.push(s - t);}}function y(t, e, i, n, s, o, a, l, c) {let h = [],u = [];for (; t.length > n;) h.push(t.pop()), u.push(e.pop() + i - s);t.push(b(r.types[a], h, u, o - s, l - o, c)), e.push(s - i);}function b(t, e, i, n, r, s, a) {if (s) {let t = [o.contextHash, s];a = a ? [t].concat(a) : [t];}if (r > 25) {let t = [o.lookAhead, r];a = a ? [t].concat(a) : [t];}return new f(t, e, i, n, a);}function w(t, e, i) {let { id: n, start: r, end: s, size: o } = c;if (c.next(), o >= 0 && n < l) {let a = i;if (o > 4) {let n = c.pos - (o - 4);for (; c.pos > n;) i = w(t, e, i);}e[--i] = a, e[--i] = s - t, e[--i] = r - t, e[--i] = n;} else -3 == o ? u = n : -4 == o && (d = n);return i;}let x = [],S = [];for (; c.pos > 0;) p(t.start || 0, t.bufferStart || 0, x, S, -1, 0);let E = null !== (e = t.length) && void 0 !== e ? e : x.length ? S[0] + x[0].length : 0;return new f(h[t.topID], x.reverse(), S.reverse(), E);}(t);}}f.empty = new f(c.none, [], [], 0);class g {constructor(t, e) {this.buffer = t, this.index = e;}get id() {return this.buffer[this.index - 4];}get start() {return this.buffer[this.index - 3];}get end() {return this.buffer[this.index - 2];}get size() {return this.buffer[this.index - 1];}get pos() {return this.index;}next() {this.index -= 4;}fork() {return new g(this.buffer, this.index);}}class m {constructor(t, e, i) {this.buffer = t, this.length = e, this.set = i;}get type() {return c.none;}toString() {let t = [];for (let e = 0; e < this.buffer.length;) t.push(this.childString(e)), e = this.buffer[e + 3];return t.join(",");}childString(t) {let e = this.buffer[t],i = this.buffer[t + 3],n = this.set.types[e],r = n.name;if (/\W/.test(r) && !n.isError && (r = JSON.stringify(r)), i == (t += 4)) return r;let s = [];for (; t < i;) s.push(this.childString(t)), t = this.buffer[t + 3];return r + "(" + s.join(",") + ")";}findChild(t, e, i, n, r) {let { buffer: s } = this,o = -1;for (let a = t; a != e && !(v(r, n, s[a + 1], s[a + 2]) && (o = a, i > 0)); a = s[a + 3]);return o;}slice(t, e, i) {let n = this.buffer,r = new Uint16Array(e - t),s = 0;for (let o = t, a = 0; o < e;) {r[a++] = n[o++], r[a++] = n[o++] - i;let e = r[a++] = n[o++] - i;r[a++] = n[o++] - t, s = Math.max(s, e);}return new m(r, s, this.set);}}function v(t, e, i, n) {switch (t) {case -2:return i < e;case -1:return n >= e && i < e;case 0:return i < e && n > e;case 1:return i <= e && n > e;case 2:return n > e;case 4:return !0;}}function y(t, e, i, n) {for (var r; t.from == t.to || (i < 1 ? t.from >= e : t.from > e) || (i > -1 ? t.to <= e : t.to < e);) {let e = !n && t instanceof w && t.index < 0 ? null : t.parent;if (!e) return t;t = e;}let s = n ? 0 : p.IgnoreOverlays;if (n) for (let n = t, o = n.parent; o; n = o, o = n.parent) n instanceof w && n.index < 0 && (null === (r = o.enter(e, i, s)) || void 0 === r ? void 0 : r.from) != n.from && (t = o);for (;;) {let n = t.enter(e, i, s);if (!n) return t;t = n;}}class b {cursor(t = 0) {return new A(this, t);}getChild(t, e = null, i = null) {let n = x(this, t, e, i);return n.length ? n[0] : null;}getChildren(t, e = null, i = null) {return x(this, t, e, i);}resolve(t, e = 0) {return y(this, t, e, !1);}resolveInner(t, e = 0) {return y(this, t, e, !0);}matchContext(t) {return S(this.parent, t);}enterUnfinishedNodesBefore(t) {let e = this.childBefore(t),i = this;for (; e;) {let t = e.lastChild;if (!t || t.to != e.to) break;t.type.isError && t.from == t.to ? (i = e, e = t.prevSibling) : e = t;}return i;}get node() {return this;}get next() {return this.parent;}}class w extends b {constructor(t, e, i, n) {super(), this._tree = t, this.from = e, this.index = i, this._parent = n;}get type() {return this._tree.type;}get name() {return this._tree.type.name;}get to() {return this.from + this._tree.length;}nextChild(t, e, i, n, r = 0) {for (let s = this;;) {for (let { children: o, positions: l } = s._tree, c = e > 0 ? o.length : -1; t != c; t += e) {let c = o[t],h = l[t] + s.from;if (v(n, i, h, h + c.length)) if (c instanceof m) {if (r & p.ExcludeBuffers) continue;let o = c.findChild(0, c.buffer.length, e, i - h, n);if (o > -1) return new C(new E(s, c, t, h), null, o);} else if (r & p.IncludeAnonymous || !c.type.isAnonymous || M(c)) {let o;if (!(r & p.IgnoreMounts) && (o = a.get(c)) && !o.overlay) return new w(o.tree, h, t, s);let l = new w(c, h, t, s);return r & p.IncludeAnonymous || !l.type.isAnonymous ? l : l.nextChild(e < 0 ? c.children.length - 1 : 0, e, i, n);}}if (r & p.IncludeAnonymous || !s.type.isAnonymous) return null;if (t = s.index >= 0 ? s.index + e : e < 0 ? -1 : s._parent._tree.children.length, s = s._parent, !s) return null;}}get firstChild() {return this.nextChild(0, 1, 0, 4);}get lastChild() {return this.nextChild(this._tree.children.length - 1, -1, 0, 4);}childAfter(t) {return this.nextChild(0, 1, t, 2);}childBefore(t) {return this.nextChild(this._tree.children.length - 1, -1, t, -2);}enter(t, e, i = 0) {let n;if (!(i & p.IgnoreOverlays) && (n = a.get(this._tree)) && n.overlay) {let i = t - this.from;for (let { from: t, to: r } of n.overlay) if ((e > 0 ? t <= i : t < i) && (e < 0 ? r >= i : r > i)) return new w(n.tree, n.overlay[0].from + this.from, -1, this);}return this.nextChild(0, 1, t, e, i);}nextSignificantParent() {let t = this;for (; t.type.isAnonymous && t._parent;) t = t._parent;return t;}get parent() {return this._parent ? this._parent.nextSignificantParent() : null;}get nextSibling() {return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4) : null;}get prevSibling() {return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4) : null;}get tree() {return this._tree;}toTree() {return this._tree;}toString() {return this._tree.toString();}}function x(t, e, i, n) {let r = t.cursor(),s = [];if (!r.firstChild()) return s;if (null != i) for (let t = !1; !t;) if (t = r.type.is(i), !r.nextSibling()) return s;for (;;) {if (null != n && r.type.is(n)) return s;if (r.type.is(e) && s.push(r.node), !r.nextSibling()) return null == n ? s : [];}}function S(t, e, i = e.length - 1) {for (let n = t; i >= 0; n = n.parent) {if (!n) return !1;if (!n.type.isAnonymous) {if (e[i] && e[i] != n.name) return !1;i--;}}return !0;}class E {constructor(t, e, i, n) {this.parent = t, this.buffer = e, this.index = i, this.start = n;}}class C extends b {get name() {return this.type.name;}get from() {return this.context.start + this.context.buffer.buffer[this.index + 1];}get to() {return this.context.start + this.context.buffer.buffer[this.index + 2];}constructor(t, e, i) {super(), this.context = t, this._parent = e, this.index = i, this.type = t.buffer.set.types[t.buffer.buffer[i]];}child(t, e, i) {let { buffer: n } = this.context,r = n.findChild(this.index + 4, n.buffer[this.index + 3], t, e - this.context.start, i);return r < 0 ? null : new C(this.context, this, r);}get firstChild() {return this.child(1, 0, 4);}get lastChild() {return this.child(-1, 0, 4);}childAfter(t) {return this.child(1, t, 2);}childBefore(t) {return this.child(-1, t, -2);}enter(t, e, i = 0) {if (i & p.ExcludeBuffers) return null;let { buffer: n } = this.context,r = n.findChild(this.index + 4, n.buffer[this.index + 3], e > 0 ? 1 : -1, t - this.context.start, e);return r < 0 ? null : new C(this.context, this, r);}get parent() {return this._parent || this.context.parent.nextSignificantParent();}externalSibling(t) {return this._parent ? null : this.context.parent.nextChild(this.context.index + t, t, 0, 4);}get nextSibling() {let { buffer: t } = this.context,e = t.buffer[this.index + 3];return e < (this._parent ? t.buffer[this._parent.index + 3] : t.buffer.length) ? new C(this.context, this._parent, e) : this.externalSibling(1);}get prevSibling() {let { buffer: t } = this.context,e = this._parent ? this._parent.index + 4 : 0;return this.index == e ? this.externalSibling(-1) : new C(this.context, this._parent, t.findChild(e, this.index, -1, 0, 4));}get tree() {return null;}toTree() {let t = [],e = [],{ buffer: i } = this.context,n = this.index + 4,r = i.buffer[this.index + 3];if (r > n) {let s = i.buffer[this.index + 1];t.push(i.slice(n, r, s)), e.push(0);}return new f(this.type, t, e, this.to - this.from);}toString() {return this.context.buffer.childString(this.index);}}function k(t) {if (!t.length) return null;let e = 0,i = t[0];for (let n = 1; n < t.length; n++) {let r = t[n];(r.from > i.from || r.to < i.to) && (i = r, e = n);}let n = i instanceof w && i.index < 0 ? null : i.parent,r = t.slice();return n ? r[e] = n : r.splice(e, 1), new T(r, i);}class T {constructor(t, e) {this.heads = t, this.node = e;}get next() {return k(this.heads);}}class A {get name() {return this.type.name;}constructor(t, e = 0) {if (this.mode = e, this.buffer = null, this.stack = [], this.index = 0, this.bufferNode = null, t instanceof w) this.yieldNode(t);else {this._tree = t.context.parent, this.buffer = t.context;for (let e = t._parent; e; e = e._parent) this.stack.unshift(e.index);this.bufferNode = t, this.yieldBuf(t.index);}}yieldNode(t) {return !!t && (this._tree = t, this.type = t.type, this.from = t.from, this.to = t.to, !0);}yieldBuf(t, e) {this.index = t;let { start: i, buffer: n } = this.buffer;return this.type = e || n.set.types[n.buffer[t]], this.from = i + n.buffer[t + 1], this.to = i + n.buffer[t + 2], !0;}yield(t) {return !!t && (t instanceof w ? (this.buffer = null, this.yieldNode(t)) : (this.buffer = t.context, this.yieldBuf(t.index, t.type)));}toString() {return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();}enterChild(t, e, i) {if (!this.buffer) return this.yield(this._tree.nextChild(t < 0 ? this._tree._tree.children.length - 1 : 0, t, e, i, this.mode));let { buffer: n } = this.buffer,r = n.findChild(this.index + 4, n.buffer[this.index + 3], t, e - this.buffer.start, i);return !(r < 0) && (this.stack.push(this.index), this.yieldBuf(r));}firstChild() {return this.enterChild(1, 0, 4);}lastChild() {return this.enterChild(-1, 0, 4);}childAfter(t) {return this.enterChild(1, t, 2);}childBefore(t) {return this.enterChild(-1, t, -2);}enter(t, e, i = this.mode) {return this.buffer ? !(i & p.ExcludeBuffers) && this.enterChild(1, t, e) : this.yield(this._tree.enter(t, e, i));}parent() {if (!this.buffer) return this.yieldNode(this.mode & p.IncludeAnonymous ? this._tree._parent : this._tree.parent);if (this.stack.length) return this.yieldBuf(this.stack.pop());let t = this.mode & p.IncludeAnonymous ? this.buffer.parent : this.buffer.parent.nextSignificantParent();return this.buffer = null, this.yieldNode(t);}sibling(t) {if (!this.buffer) return !!this._tree._parent && this.yield(this._tree.index < 0 ? null : this._tree._parent.nextChild(this._tree.index + t, t, 0, 4, this.mode));let { buffer: e } = this.buffer,i = this.stack.length - 1;if (t < 0) {let t = i < 0 ? 0 : this.stack[i] + 4;if (this.index != t) return this.yieldBuf(e.findChild(t, this.index, -1, 0, 4));} else {let t = e.buffer[this.index + 3];if (t < (i < 0 ? e.buffer.length : e.buffer[this.stack[i] + 3])) return this.yieldBuf(t);}return i < 0 && this.yield(this.buffer.parent.nextChild(this.buffer.index + t, t, 0, 4, this.mode));}nextSibling() {return this.sibling(1);}prevSibling() {return this.sibling(-1);}atLastNode(t) {let e,i,{ buffer: n } = this;if (n) {if (t > 0) {if (this.index < n.buffer.buffer.length) return !1;} else for (let t = 0; t < this.index; t++) if (n.buffer.buffer[t + 3] < this.index) return !1;({ index: e, parent: i } = n);} else ({ index: e, _parent: i } = this._tree);for (; i; { index: e, _parent: i } = i) if (e > -1) for (let n = e + t, r = t < 0 ? -1 : i._tree.children.length; n != r; n += t) {let t = i._tree.children[n];if (this.mode & p.IncludeAnonymous || t instanceof m || !t.type.isAnonymous || M(t)) return !1;}return !0;}move(t, e) {if (e && this.enterChild(t, 0, 4)) return !0;for (;;) {if (this.sibling(t)) return !0;if (this.atLastNode(t) || !this.parent()) return !1;}}next(t = !0) {return this.move(1, t);}prev(t = !0) {return this.move(-1, t);}moveTo(t, e = 0) {for (; (this.from == this.to || (e < 1 ? this.from >= t : this.from > t) || (e > -1 ? this.to <= t : this.to < t)) && this.parent(););for (; this.enterChild(1, t, e););return this;}get node() {if (!this.buffer) return this._tree;let t = this.bufferNode,e = null,i = 0;if (t && t.context == this.buffer) t: for (let n = this.index, r = this.stack.length; r >= 0;) {for (let s = t; s; s = s._parent) if (s.index == n) {if (n == this.index) return s;e = s, i = r + 1;break t;}n = this.stack[--r];}for (let t = i; t < this.stack.length; t++) e = new C(this.buffer, e, this.stack[t]);return this.bufferNode = new C(this.buffer, e, this.index);}get tree() {return this.buffer ? null : this._tree._tree;}iterate(t, e) {for (let i = 0;;) {let n = !1;if (this.type.isAnonymous || !1 !== t(this)) {if (this.firstChild()) {i++;continue;}this.type.isAnonymous || (n = !0);}for (;;) {if (n && e && e(this), n = this.type.isAnonymous, !i) return;if (this.nextSibling()) break;this.parent(), i--, n = !0;}}}matchContext(t) {if (!this.buffer) return S(this.node.parent, t);let { buffer: e } = this.buffer,{ types: i } = e.set;for (let n = t.length - 1, r = this.stack.length - 1; n >= 0; r--) {if (r < 0) return S(this._tree, t, n);let s = i[e.buffer[this.stack[r]]];if (!s.isAnonymous) {if (t[n] && t[n] != s.name) return !1;n--;}}return !0;}}function M(t) {return t.children.some((t) => t instanceof m || !t.type.isAnonymous || M(t));}const _ = new WeakMap();function P(t, e) {if (!t.isAnonymous || e instanceof m || e.type != t) return 1;let i = _.get(e);if (null == i) {i = 1;for (let n of e.children) {if (n.type != t || !(n instanceof f)) {i = 1;break;}i += P(t, n);}_.set(e, i);}return i;}function D(t, e, i, n, r, s, o, a, l) {let c = 0;for (let i = n; i < r; i++) c += P(t, e[i]);let h = Math.ceil(1.5 * c / 8),u = [],d = [];return function e(i, n, r, o, a) {for (let c = r; c < o;) {let r = c,p = n[c],f = P(t, i[c]);for (c++; c < o; c++) {let e = P(t, i[c]);if (f + e >= h) break;f += e;}if (c == r + 1) {if (f > h) {let t = i[r];e(t.children, t.positions, 0, t.children.length, n[r] + a);continue;}u.push(i[r]);} else {let e = n[c - 1] + i[c - 1].length - p;u.push(D(t, i, n, r, c, p, e, null, l));}d.push(p + a - s);}}(e, i, n, r, 0), (a || l)(u, d, o);}class O {constructor(t, e, i, n, r = !1, s = !1) {this.from = t, this.to = e, this.tree = i, this.offset = n, this.open = (r ? 1 : 0) | (s ? 2 : 0);}get openStart() {return (1 & this.open) > 0;}get openEnd() {return (2 & this.open) > 0;}static addTree(t, e = [], i = !1) {let n = [new O(0, t.length, t, 0, !1, i)];for (let i of e) i.to > t.length && n.push(i);return n;}static applyChanges(t, e, i = 128) {if (!e.length) return t;let n = [],r = 1,s = t.length ? t[0] : null;for (let o = 0, a = 0, l = 0;; o++) {let c = o < e.length ? e[o] : null,h = c ? c.fromA : 1e9;if (h - a >= i) for (; s && s.from < h;) {let e = s;if (a >= e.from || h <= e.to || l) {let t = Math.max(e.from, a) - l,i = Math.min(e.to, h) - l;e = t >= i ? null : new O(t, i, e.tree, e.offset + l, o > 0, !!c);}if (e && n.push(e), s.to > h) break;s = r < t.length ? t[r++] : null;}if (!c) break;a = c.toA, l = c.toA - c.toB;}return n;}}class I {startParse(t, e, i) {return "string" == typeof t && (t = new F(t)), i = i ? i.length ? i.map((t) => new s(t.from, t.to)) : [new s(0, 0)] : [new s(0, t.length)], this.createParse(t, e || [], i);}parse(t, e, i) {let n = this.startParse(t, e, i);for (;;) {let t = n.advance();if (t) return t;}}}class F {constructor(t) {this.string = t;}get length() {return this.string.length;}chunk(t) {return this.string.slice(t);}get lineChunks() {return !1;}read(t, e) {return this.string.slice(t, e);}}new o({ perNode: !0 });}, 372: (t, e, i) => {"use strict";i.r(e), i.d(e, { NumericSequence: () => s });var n = i(5442),r = i(67);class s {static calculate(t, e, i, o, a, l) {const c = new s();if (e = void 0 === e ? 10 : n.ensureInRange(e, s.MIN_COUNT, s.MAX_COUNT), void 0 === o && (o = n.MIN_EXP), void 0 === a && (a = !1), void 0 === i && (i = 1), void 0 === l && (l = [1, 2, 5]), t.forcedSingleStop) return c.interval = t.getSize(), c.intervalOffset = c.interval - (t.forcedSingleStop - t.min), c.min = t.min, c.max = t.max, c.sequence = [t.forcedSingleStop], c;let h = 0,u = 0,d = 9;const p = i > 0 && !t.hasFixedMin,f = i > 0 && !t.hasFixedMax,g = t.getSize();let m = n.log10(g);const v = n.log10(l[0]);let y;if (m -= v, m -= n.log10(e), m = Math.max(m, o - v + 1), 0 !== h) {const e = n.pow10(m),i = n.floorToPrecision(t.min, e),s = n.ceilToPrecision(t.max, e),o = r.NumericSequenceRange.calculateFixedRange(i, s);o.shrinkByStep(t, h), u = o.min, d = o.max, y = Math.floor(o.getSize() / h);} else {let s;for (s = 0; s < 3; s++) {const o = m + s,c = n.pow10(o),g = n.floorToPrecision(t.min, c),v = n.ceilToPrecision(t.max, c),b = l.length,w = n.pow10(o - 1);for (let o = 0; o < b; o++) {const c = l[o] * w,m = r.NumericSequenceRange.calculateFixedRange(g, v, a);if (m.shrinkByStep(t, c), p && t.min === m.min && i >= 1 && (m.min -= c), f && t.max === m.max && i >= 1 && (m.max += c), y = n.ceilWithPrecision(m.getSize() / c, n.DEFAULT_PRECISION), y <= e || 2 === s && o === b - 1 || 1 === e && 2 === y && (c > t.getSize() || t.min < 0 && t.max > 0 && 2 * c >= t.getSize())) {h = c, u = m.min, d = m.max;break;}}if (0 !== h) break;}}(y > 32 * e || y > s.MAX_COUNT) && (y = Math.min(32 * e, s.MAX_COUNT), h = (d - u) / y), c.min = u, c.max = d, c.interval = h, c.intervalOffset = u - t.min, c.maxAllowedMargin = i, c.canExtendMin = p, c.canExtendMax = f;const b = n.getPrecision(h, 0);c.precision = b;const w = [];let x = n.roundToPrecision(u, b);w.push(x);for (let t = 0; t < y; t++) x = n.roundToPrecision(x + h, b), w.push(x);return c.sequence = w, c.trimMinMax(t.min, t.max), c;}static calculateUnits(t, e, i, r) {i = n.ensureInRange(i, s.MIN_COUNT, s.MAX_COUNT), t === e && (e = t + 1);let o = 0,a = 0;for (let s = 0; s < r.length && (a = r[s], o = n.ceilWithPrecision(e / a) - n.floorWithPrecision(t / a), !(o <= i)); s++);let l = -t;l %= a;const c = new s();c.sequence = [];for (let i = t + l; c.sequence.push(i), !(i >= e); i += a);return c.interval = a, c.intervalOffset = l, c.min = c.sequence[0], c.max = c.sequence[c.sequence.length - 1], c;}trimMinMax(t, e) {const i = (t - this.min) / this.interval,n = (this.max - e) / this.interval;(!this.canExtendMin || i > this.maxAllowedMargin && i > .001) && (this.min = t), (!this.canExtendMax || n > this.maxAllowedMargin && n > .001) && (this.max = e);}}s.MIN_COUNT = 1, s.MAX_COUNT = 1e3;}, 414: (t, e, i) => {"use strict";function n(t) {return +t;}i.d(e, { A: () => n });}, 421: (t, e, i) => {"use strict";function n(t, e) {function i() {}i.prototype = t;const n = new i();return e && e(n), n;}function r(t) {const e = Object.getPrototypeOf(t);return e !== Object.prototype && e !== Array.prototype || (t = n(t)), t;}function s(t, e) {if (!t) return;let i;for (let r = 0, s = t.length; r < s; r++) {const s = e(t[r]);s && (i || (i = n(t)), i[r] = s);}return i;}i.r(e), i.d(e, { inherit: () => n, inheritSingle: () => r, overrideArray: () => s });}, 457: (t, e, i) => {"use strict";i.d(e, { c: () => s, t: () => o });var n = i(1807),r = i(7674);const s = "lic";class o extends n.zD3 {name = s;displayName = "License";status = (0, n.Z0q)(r.z0.uI, { name: "status", value: "" });activate = (0, n.Z0q)(r.z0.jF, { name: "dialog", displayName: "Activate License", value: !1 });id = (0, n.Z0q)(r.z0.uI, { name: "id", displayName: "License Id:", value: "" });customer = (0, n.Z0q)(r.z0.uI, { name: "customer", displayName: "Licensee:", value: "" });expiry = (0, n.Z0q)(r.z0.uI, { name: "expiry", displayName: "Expiration Date:", value: "" });groups = [new n.X4n({ name: `${s}.status`, displayName: "Status", collapsible: !1, slices: [this.status, this.activate] }), new n.X4n({ name: `${s}.details`, displayName: "License Details", collapsible: !1, slices: [this.id, this.customer, this.expiry] })];}}, 461: (t, e, i) => {"use strict";function n(t) {return function () {delete this[t];};}function r(t, e) {return function () {this[t] = e;};}function s(t, e) {return function () {var i = e.apply(this, arguments);null == i ? delete this[t] : this[t] = i;};}function o(t, e) {return arguments.length > 1 ? this.each((null == e ? n : "function" == typeof e ? s : r)(t, e)) : this.node()[t];}i.d(e, { A: () => o });}, 537: (t, e, i) => {var n = i(5606),r = /%[sdj%]/g;e.format = function (t) {if (!v(t)) {for (var e = [], i = 0; i < arguments.length; i++) e.push(a(arguments[i]));return e.join(" ");}i = 1;for (var n = arguments, s = n.length, o = String(t).replace(r, function (t) {if ("%%" === t) return "%";if (i >= s) return t;switch (t) {case "%s":return String(n[i++]);case "%d":return Number(n[i++]);case "%j":try {return JSON.stringify(n[i++]);} catch (t) {return "[Circular]";}default:return t;}}), l = n[i]; i < s; l = n[++i]) g(l) || !w(l) ? o += " " + l : o += " " + a(l);return o;}, e.deprecate = function (t, i) {if (y(global.process)) return function () {return e.deprecate(t, i).apply(this, arguments);};if (!0 === n.noDeprecation) return t;var r = !1;return function () {if (!r) {if (n.throwDeprecation) throw new Error(i);n.traceDeprecation ? console.trace(i) : console.error(i), r = !0;}return t.apply(this, arguments);};};var s,o = {};function a(t, i) {var n = { seen: [], stylize: c };return arguments.length >= 3 && (n.depth = arguments[2]), arguments.length >= 4 && (n.colors = arguments[3]), f(i) ? n.showHidden = i : i && e._extend(n, i), y(n.showHidden) && (n.showHidden = !1), y(n.depth) && (n.depth = 2), y(n.colors) && (n.colors = !1), y(n.customInspect) && (n.customInspect = !0), n.colors && (n.stylize = l), h(n, t, n.depth);}function l(t, e) {var i = a.styles[e];return i ? "[" + a.colors[i][0] + "m" + t + "[" + a.colors[i][1] + "m" : t;}function c(t, e) {return t;}function h(t, i, n) {if (t.customInspect && i && E(i.inspect) && i.inspect !== e.inspect && (!i.constructor || i.constructor.prototype !== i)) {var r = i.inspect(n, t);return v(r) || (r = h(t, r, n)), r;}var s = function (t, e) {if (y(e)) return t.stylize("undefined", "undefined");if (v(e)) {var i = "'" + JSON.stringify(e).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'";return t.stylize(i, "string");}return m(e) ? t.stylize("" + e, "number") : f(e) ? t.stylize("" + e, "boolean") : g(e) ? t.stylize("null", "null") : void 0;}(t, i);if (s) return s;var o = Object.keys(i),a = function (t) {var e = {};return t.forEach(function (t, i) {e[t] = !0;}), e;}(o);if (t.showHidden && (o = Object.getOwnPropertyNames(i)), S(i) && (o.indexOf("message") >= 0 || o.indexOf("description") >= 0)) return u(i);if (0 === o.length) {if (E(i)) {var l = i.name ? ": " + i.name : "";return t.stylize("[Function" + l + "]", "special");}if (b(i)) return t.stylize(RegExp.prototype.toString.call(i), "regexp");if (x(i)) return t.stylize(Date.prototype.toString.call(i), "date");if (S(i)) return u(i);}var c,w = "",C = !1,k = ["{", "}"];return p(i) && (C = !0, k = ["[", "]"]), E(i) && (w = " [Function" + (i.name ? ": " + i.name : "") + "]"), b(i) && (w = " " + RegExp.prototype.toString.call(i)), x(i) && (w = " " + Date.prototype.toUTCString.call(i)), S(i) && (w = " " + u(i)), 0 !== o.length || C && 0 != i.length ? n < 0 ? b(i) ? t.stylize(RegExp.prototype.toString.call(i), "regexp") : t.stylize("[Object]", "special") : (t.seen.push(i), c = C ? function (t, e, i, n, r) {for (var s = [], o = 0, a = e.length; o < a; ++o) A(e, String(o)) ? s.push(d(t, e, i, n, String(o), !0)) : s.push("");return r.forEach(function (r) {r.match(/^\d+$/) || s.push(d(t, e, i, n, r, !0));}), s;}(t, i, n, a, o) : o.map(function (e) {return d(t, i, n, a, e, C);}), t.seen.pop(), function (t, e, i) {return t.reduce(function (t, e) {return e.indexOf("\n"), t + e.replace(/\u001b\[\d\d?m/g, "").length + 1;}, 0) > 60 ? i[0] + ("" === e ? "" : e + "\n ") + " " + t.join(",\n  ") + " " + i[1] : i[0] + e + " " + t.join(", ") + " " + i[1];}(c, w, k)) : k[0] + w + k[1];}function u(t) {return "[" + Error.prototype.toString.call(t) + "]";}function d(t, e, i, n, r, s) {var o, a, l;if ((l = Object.getOwnPropertyDescriptor(e, r) || { value: e[r] }).get ? a = l.set ? t.stylize("[Getter/Setter]", "special") : t.stylize("[Getter]", "special") : l.set && (a = t.stylize("[Setter]", "special")), A(n, r) || (o = "[" + r + "]"), a || (t.seen.indexOf(l.value) < 0 ? (a = g(i) ? h(t, l.value, null) : h(t, l.value, i - 1)).indexOf("\n") > -1 && (a = s ? a.split("\n").map(function (t) {return "  " + t;}).join("\n").substr(2) : "\n" + a.split("\n").map(function (t) {return "   " + t;}).join("\n")) : a = t.stylize("[Circular]", "special")), y(o)) {if (s && r.match(/^\d+$/)) return a;(o = JSON.stringify("" + r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/) ? (o = o.substr(1, o.length - 2), o = t.stylize(o, "name")) : (o = o.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'"), o = t.stylize(o, "string"));}return o + ": " + a;}function p(t) {return Array.isArray(t);}function f(t) {return "boolean" == typeof t;}function g(t) {return null === t;}function m(t) {return "number" == typeof t;}function v(t) {return "string" == typeof t;}function y(t) {return void 0 === t;}function b(t) {return w(t) && "[object RegExp]" === C(t);}function w(t) {return "object" == typeof t && null !== t;}function x(t) {return w(t) && "[object Date]" === C(t);}function S(t) {return w(t) && ("[object Error]" === C(t) || t instanceof Error);}function E(t) {return "function" == typeof t;}function C(t) {return Object.prototype.toString.call(t);}function k(t) {return t < 10 ? "0" + t.toString(10) : t.toString(10);}e.debuglog = function (t) {if (y(s) && (s = n.env.NODE_DEBUG || ""), t = t.toUpperCase(), !o[t]) if (new RegExp("\\b" + t + "\\b", "i").test(s)) {var i = n.pid;o[t] = function () {var n = e.format.apply(e, arguments);console.error("%s %d: %s", t, i, n);};} else o[t] = function () {};return o[t];}, e.inspect = a, a.colors = { bold: [1, 22], italic: [3, 23], underline: [4, 24], inverse: [7, 27], white: [37, 39], grey: [90, 39], black: [30, 39], blue: [34, 39], cyan: [36, 39], green: [32, 39], magenta: [35, 39], red: [31, 39], yellow: [33, 39] }, a.styles = { special: "cyan", number: "yellow", boolean: "yellow", undefined: "grey", null: "bold", string: "green", date: "magenta", regexp: "red" }, e.isArray = p, e.isBoolean = f, e.isNull = g, e.isNullOrUndefined = function (t) {return null == t;}, e.isNumber = m, e.isString = v, e.isSymbol = function (t) {return "symbol" == typeof t;}, e.isUndefined = y, e.isRegExp = b, e.isObject = w, e.isDate = x, e.isError = S, e.isFunction = E, e.isPrimitive = function (t) {return null === t || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || "symbol" == typeof t || void 0 === t;}, e.isBuffer = i(1135);var T = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];function A(t, e) {return Object.prototype.hasOwnProperty.call(t, e);}e.log = function () {var t, i;console.log("%s - %s", (i = [k((t = new Date()).getHours()), k(t.getMinutes()), k(t.getSeconds())].join(":"), [t.getDate(), T[t.getMonth()], i].join(" ")), e.format.apply(e, arguments));}, e.inherits = i(6698), e._extend = function (t, e) {if (!e || !w(e)) return t;for (var i = Object.keys(e), n = i.length; n--;) t[i[n]] = e[i[n]];return t;};}, 539: (t, e, i) => {"use strict";function n(t, e) {return -1 !== t.indexOf(e, t.length - e.length);}i.r(e), i.d(e, { endsWith: () => n });}, 560: (t, e, i) => {"use strict";const n = i(3908);t.exports = (t, e, i) => new n(t, i).compare(new n(e, i));}, 574: (t, e, i) => {"use strict";function n() {}function r(t) {return null == t ? n : function () {return this.querySelector(t);};}i.d(e, { A: () => r });}, 604: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.replaceSpaceWithNBSP = e.removeEllipses = e.removeBreakingSpaces = void 0, e.removeBreakingSpaces = function (t) {return t.toString().replace(new RegExp(" ", "g"), "&nbsp");}, e.removeEllipses = function (t) {return t.replace(/()|(\.\.\.)/g, "");}, e.replaceSpaceWithNBSP = function (t) {if (null != t) return t.replace(/ /g, "");};}, 628: (t, e, i) => {"use strict";const n = i(537),r = i(4537),s = i(5157),o = i(280),a = (t) => "" === t || "./" === t,l = (t) => {const e = t.indexOf("{");return e > -1 && t.indexOf("}", e) > -1;},c = (t, e, i) => {e = [].concat(e), t = [].concat(t);let n = new Set(),r = new Set(),o = new Set(),a = 0,l = (t) => {o.add(t.output), i && i.onResult && i.onResult(t);};for (let o = 0; o < e.length; o++) {let c = s(String(e[o]), { ...i, onResult: l }, !0),h = c.state.negated || c.state.negatedExtglob;h && a++;for (let e of t) {let t = c(e, !0);(h ? !t.isMatch : t.isMatch) && (h ? n.add(t.output) : (n.delete(t.output), r.add(t.output)));}}let c = (a === e.length ? [...o] : [...r]).filter((t) => !n.has(t));if (i && 0 === c.length) {if (!0 === i.failglob) throw new Error(`No matches found for "${e.join(", ")}"`);if (!0 === i.nonull || !0 === i.nullglob) return i.unescape ? e.map((t) => t.replace(/\\/g, "")) : e;}return c;};c.match = c, c.matcher = (t, e) => s(t, e), c.any = c.isMatch = (t, e, i) => s(e, i)(t), c.not = (t, e, i = {}) => {e = [].concat(e).map(String);let n = new Set(),r = [],s = new Set(c(t, e, { ...i, onResult: (t) => {i.onResult && i.onResult(t), r.push(t.output);} }));for (let t of r) s.has(t) || n.add(t);return [...n];}, c.contains = (t, e, i) => {if ("string" != typeof t) throw new TypeError(`Expected a string: "${n.inspect(t)}"`);if (Array.isArray(e)) return e.some((e) => c.contains(t, e, i));if ("string" == typeof e) {if (a(t) || a(e)) return !1;if (t.includes(e) || t.startsWith("./") && t.slice(2).includes(e)) return !0;}return c.isMatch(t, e, { ...i, contains: !0 });}, c.matchKeys = (t, e, i) => {if (!o.isObject(t)) throw new TypeError("Expected the first argument to be an object");let n = c(Object.keys(t), e, i),r = {};for (let e of n) r[e] = t[e];return r;}, c.some = (t, e, i) => {let n = [].concat(t);for (let t of [].concat(e)) {let e = s(String(t), i);if (n.some((t) => e(t))) return !0;}return !1;}, c.every = (t, e, i) => {let n = [].concat(t);for (let t of [].concat(e)) {let e = s(String(t), i);if (!n.every((t) => e(t))) return !1;}return !0;}, c.all = (t, e, i) => {if ("string" != typeof t) throw new TypeError(`Expected a string: "${n.inspect(t)}"`);return [].concat(e).every((e) => s(e, i)(t));}, c.capture = (t, e, i) => {let n = o.isWindows(i),r = s.makeRe(String(t), { ...i, capture: !0 }).exec(n ? o.toPosixSlashes(e) : e);if (r) return r.slice(1).map((t) => void 0 === t ? "" : t);}, c.makeRe = (...t) => s.makeRe(...t), c.scan = (...t) => s.scan(...t), c.parse = (t, e) => {let i = [];for (let n of [].concat(t || [])) for (let t of r(String(n), e)) i.push(s.parse(t, e));return i;}, c.braces = (t, e) => {if ("string" != typeof t) throw new TypeError("Expected a string");return e && !0 === e.nobrace || !l(t) ? [t] : r(t, e);}, c.braceExpand = (t, e) => {if ("string" != typeof t) throw new TypeError("Expected a string");return c.braces(t, { ...e, expand: !0 });}, c.hasBraces = l, t.exports = c;}, 629: (t, e, i) => {"use strict";i.d(e, { $H: () => d, Ay: () => f });var n,r = i(2284),s = i(7728),o = function (t, e) {return o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, o(t, e);},a = function (t, e) {return function (t, e) {function i(t) {if (t && "object" == typeof t) {var e = t.which || t.keyCode || t.charCode;e && (t = e);}if ("number" == typeof t) return o[t];var i,s = String(t);return (i = n[s.toLowerCase()]) ? i : (i = r[s.toLowerCase()]) || (1 === s.length ? s.charCodeAt(0) : void 0);}i.isEventKey = function (t, e) {if (t && "object" == typeof t) {var i = t.which || t.keyCode || t.charCode;if (null == i) return !1;if ("string" == typeof e) {var s;if (s = n[e.toLowerCase()]) return s === i;if (s = r[e.toLowerCase()]) return s === i;} else if ("number" == typeof e) return e === i;return !1;}};var n = (e = t.exports = i).code = e.codes = { backspace: 8, tab: 9, enter: 13, shift: 16, ctrl: 17, alt: 18, "pause/break": 19, "caps lock": 20, esc: 27, space: 32, "page up": 33, "page down": 34, end: 35, home: 36, left: 37, up: 38, right: 39, down: 40, insert: 45, delete: 46, command: 91, "left command": 91, "right command": 93, "numpad *": 106, "numpad +": 107, "numpad -": 109, "numpad .": 110, "numpad /": 111, "num lock": 144, "scroll lock": 145, "my computer": 182, "my calculator": 183, ";": 186, "=": 187, ",": 188, "-": 189, ".": 190, "/": 191, "`": 192, "[": 219, "\\": 220, "]": 221, "'": 222 },r = e.aliases = { windows: 91, "": 16, "": 18, "": 17, "": 91, ctl: 17, control: 17, option: 18, pause: 19, break: 19, caps: 20, return: 13, escape: 27, spc: 32, spacebar: 32, pgup: 33, pgdn: 34, ins: 45, del: 46, cmd: 91 };for (s = 97; s < 123; s++) n[String.fromCharCode(s)] = s - 32;for (var s = 48; s < 58; s++) n[s - 48] = s;for (s = 1; s < 13; s++) n["f" + s] = s + 111;for (s = 0; s < 10; s++) n["numpad " + s] = s + 96;var o = e.names = e.title = {};for (s in n) o[n[s]] = s;for (var a in r) n[a] = r[a];}(e = { exports: {} }, e.exports), e.exports;}(),l = (a.code, a.codes, a.aliases, a.names),c = (a.title, { "+": "plus", "left command": "meta", "right command": "meta" }),h = { shift: 1, ctrl: 2, alt: 3, meta: 4 };function u(t, e) {var i = (l[t] || e || "").toLowerCase();for (var n in c) i = i.replace(n, c[n]);return i.replace(/\s/g, "");}function d(t, e) {void 0 === e && (e = u(t.keyCode, t.key));var i = function (t) {return [t.shiftKey && "shift", t.ctrlKey && "ctrl", t.altKey && "alt", t.metaKey && "meta"].filter(Boolean);}(t);return -1 === i.indexOf(e) && i.push(e), i.filter(Boolean);}function p(t) {var e = t.slice();return e.sort(function (t, e) {return (h[t] || 5) - (h[e] || 5);}), e;}const f = function (t) {function e(e) {void 0 === e && (e = window);var i = t.call(this) || this;return i.container = e, i.ctrlKey = !1, i.altKey = !1, i.shiftKey = !1, i.metaKey = !1, i.clear = function () {return i.ctrlKey = !1, i.altKey = !1, i.shiftKey = !1, i.metaKey = !1, i;}, i.keydownEvent = function (t) {i.triggerEvent("keydown", t);}, i.keyupEvent = function (t) {i.triggerEvent("keyup", t);}, i.blur = function () {i.clear(), i.trigger("blur");}, (0, s.W2)(e, "blur", i.blur), (0, s.W2)(e, "keydown", i.keydownEvent), (0, s.W2)(e, "keyup", i.keyupEvent), i;}!function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}o(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());}(e, t);var i = e.prototype;return Object.defineProperty(e, "global", { get: function () {return n || (n = new e());}, enumerable: !1, configurable: !0 }), e.setGlobal = function () {return this.global;}, i.destroy = function () {var t = this.container;this.clear(), this.off(), (0, s.Nn)(t, "blur", this.blur), (0, s.Nn)(t, "keydown", this.keydownEvent), (0, s.Nn)(t, "keyup", this.keyupEvent);}, i.keydown = function (t, e) {return this.addEvent("keydown", t, e);}, i.offKeydown = function (t, e) {return this.removeEvent("keydown", t, e);}, i.offKeyup = function (t, e) {return this.removeEvent("keyup", t, e);}, i.keyup = function (t, e) {return this.addEvent("keyup", t, e);}, i.addEvent = function (t, e, i) {return (0, s.cy)(e) ? this.on("".concat(t, ".").concat(p(e).join(".")), i) : (0, s.Kg)(e) ? this.on("".concat(t, ".").concat(e), i) : this.on(t, e), this;}, i.removeEvent = function (t, e, i) {return (0, s.cy)(e) ? this.off("".concat(t, ".").concat(p(e).join(".")), i) : (0, s.Kg)(e) ? this.off("".concat(t, ".").concat(e), i) : this.off(t, e), this;}, i.triggerEvent = function (t, e) {this.ctrlKey = e.ctrlKey, this.shiftKey = e.shiftKey, this.altKey = e.altKey, this.metaKey = e.metaKey;var i = u(e.keyCode, e.key),n = { key: i, isToggle: "ctrl" === i || "shift" === i || "meta" === i || "alt" === i, inputEvent: e, keyCode: e.keyCode, ctrlKey: e.ctrlKey, altKey: e.altKey, shiftKey: e.shiftKey, metaKey: e.metaKey };this.trigger(t, n), this.trigger("".concat(t, ".").concat(i), n);var r = d(e, i);r.length > 1 && this.trigger("".concat(t, ".").concat(r.join(".")), n);}, e;}(r.A);}, 631: (t, e, i) => {"use strict";var n, r, s;i.d(e, { e2: () => r, uW: () => s, xJ: () => n }), function (t) {t[t.Unknown = 0] = "Unknown", t[t.Active = 1] = "Active", t[t.Expired = 2] = "Expired", t[t.GracePeriod = 3] = "GracePeriod", t[t.Suspended = 4] = "Suspended", t[t.Trial = 5] = "Trial";}(n || (n = {})), function (t) {t[t.Unsupported = -1] = "Unsupported", t[t.NotFound = 0] = "NotFound", t[t.Found = 1] = "Found", t[t.Pending = 99] = "Pending";}(r || (r = {})), function (t) {t[t.None = 0] = "None", t[t.Icon = 1] = "Icon", t[t.Banner = 2] = "Banner", t[t.Block = 3] = "Block", t[t.NoneOrIcon = 4] = "NoneOrIcon", t[t.NoneOrBanner = 5] = "NoneOrBanner", t[t.BannerOrIcon = 6] = "BannerOrIcon", t[t.BlockOrIcon = 7] = "BlockOrIcon", t[t.BlockOrBanner = 8] = "BlockOrBanner";}(s || (s = {}));}, 641: (t, e, i) => {"use strict";i.d(e, { W: () => r });var n = i(6639);function r(t, e, i) {const r = t && t.startsWith(".") ? t.trim().replace(" ", ".") : "",s = (t, e) => {if (!t.value && e < 1) return null;let n = Number(t.value) + (i?.step || 1) * e;return isNaN(n) && (n = i.min), null != i?.max && n > i.max && (n = i.max), null != i?.min && n < i.min && (n = i.min), t.value = n.toString(), n;},o = (t, e) => {const n = t.currentTarget;if (n.hasAttribute("disabled")) return;const r = n.closest(".number-container")?.querySelector("input"),o = s(r, e);i?.change && i.change(t, o), t.stopPropagation();},a = (0, n.tT)(`.number-container${r}${i?.title ? ".icon.icon-help-super" : ""}`, { attr: { hidden: i?.hidden, title: i?.title } }, [(0, n.tT)(".input-container", [(0, n.tT)("input", { attr: { type: "number", min: i?.min || 0, max: i?.max || 1 / 0, value: i?.value || null, step: i?.step || 1, placeholder: i?.placeholder || "", name: i?.name, disabled: i?.disabled }, events: { input: (t) => ((t) => {const e = t.currentTarget,n = s(e, 0);i?.change && i.change(t, n), t.stopPropagation();})(t) } }), ...(i?.suffix ? [(0, n.tT)("span.suffix", i.suffix)] : [])]), ...(i?.upDown ? [(0, n.tT)(".input-buttons", [(0, n.tT)(".increment.icon.icon-top", { events: { click: (t) => o(t, 1) }, attr: { disabled: i?.disabled } }), (0, n.tT)(".decrement.icon.icon-bottom", { events: { click: (t) => o(t, -1) }, attr: { disabled: i?.disabled } })])] : [])]);return e && e.appendChild(a), i?.middleware && i.middleware(a), a;}}, 649: (t, e, i) => {"use strict";i.d(e, { b: () => a, h: () => o });var n = i(7674),r = i(1195),s = i(5268);const o = "featureFlags";class a extends r.zD {name = o;displayName = "Feature Flags";flags = (0, s.Z0)(n.z0.ks, { name: "flags", displayName: "", placeholder: "Enter your flags for special features", value: "" });groups = [new r.X4({ name: `${o}.flags`, displayName: "Flags", collapsible: !1, slices: [this.flags] })];}}, 676: (t, e, i) => {"use strict";i.d(e, { A: () => l });var n = i(7991),r = i(2698),s = i(1575),o = i(5994),a = i(3139);async function l(t, e, i) {if ("sign" === i && (e = await a.A.normalizePrivateKey(e, t)), "verify" === i && (e = await a.A.normalizePublicKey(e, t)), (0, n.R)(e)) return (0, r.Y)(e, t, i), e;if (e instanceof Uint8Array) {if (!t.startsWith("HS")) throw new TypeError((0, s.A)(e, ...o.g));return n.A.subtle.importKey("raw", e, { hash: `SHA-${t.slice(-3)}`, name: "HMAC" }, !1, [i]);}throw new TypeError((0, s.A)(e, ...o.g, "Uint8Array", "JSON Web Key"));}}, 697: (t, e, i) => {"use strict";function n() {this.innerHTML = "";}function r(t) {return function () {this.innerHTML = t;};}function s(t) {return function () {var e = t.apply(this, arguments);this.innerHTML = null == e ? "" : e;};}function o(t) {return arguments.length ? this.each(null == t ? n : ("function" == typeof t ? s : r)(t)) : this.node().innerHTML;}i.d(e, { A: () => o });}, 724: (t, e, i) => {"use strict";i.r(e), i.d(e, { converterHelper: () => n, dataRoleHelper: () => r, dataViewObject: () => s, dataViewObjects: () => o, dataViewObjectsParser: () => a, dataViewTransform: () => l, dataViewWildcard: () => c });var n = i(4916),r = i(4806),s = i(1888),o = i(6271),a = i(3116),l = i(1247),c = i(889);}, 735: (t, e, i) => {"use strict";i.d(e, { A: () => n });const n = (t) => () => t;}, 747: (t, e, i) => {"use strict";function n() {return [];}function r(t) {return null == t ? n : function () {return this.querySelectorAll(t);};}i.d(e, { A: () => r });}, 756: (t, e, i) => {"use strict";i.d(e, { ZEH: () => n.ZE, m4Y: () => n.m4 }), i(3537);var n = i(1303);i(9902), i(6470);}, 807: (t, e, i) => {"use strict";function n() {return !this.node();}i.d(e, { A: () => n });}, 871: (t, e, i) => {"use strict";function n(t, e, i) {t.prototype = e.prototype = i, i.constructor = t;}function r(t, e) {var i = Object.create(t.prototype);for (var n in e) i[n] = e[n];return i;}i.d(e, { A: () => n, X: () => r });}, 889: (t, e, i) => {"use strict";function n(t) {return null == t && (t = 0), { data: [{ dataViewWildcard: { matchingOption: t } }] };}i.r(e), i.d(e, { createDataViewWildcardSelector: () => n });}, 891: (t, e, i) => {"use strict";i.d(e, { Ay: () => T });var n = i(2284),r = i(2437),s = i(1720),o = i(7728),a = i(1273),l = i(4890),c = i(629),h = i(77),u = i(9605),d = i(2775),p = function (t, e) {return p = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, p(t, e);};function f(t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}p(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());}var g = function () {return g = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, g.apply(this, arguments);};function m(t, e, i) {if (i || 2 === arguments.length) for (var n, r = 0, s = e.length; r < s; r++) !n && r in e || (n || (n = Array.prototype.slice.call(e, 0, r)), n[r] = e[r]);return t.concat(n || Array.prototype.slice.call(e));}function v(t, e, i) {var n = t.tag,r = t.children,s = t.attributes,a = t.className,l = t.style,c = e || (0, o.YE)(i).createElement(n);for (var h in s) c.setAttribute(h, s[h]);var u = c.children;if (r.forEach(function (t, e) {v(t, u[e], c);}), a && a.split(/\s+/g).forEach(function (t) {t && !(0, o.nB)(c, t) && (0, o.iQ)(c, t);}), l) {var d = c.style;for (var h in l) d[h] = l[h];}return !e && i && i.appendChild(c), c;}function y(t, e, i) {t !== e && i(t, e);}function b(t, e, i) {var n;void 0 === i && (i = t.data.boundArea);var r = t.distX,s = void 0 === r ? 0 : r,a = t.distY,l = void 0 === a ? 0 : a,c = t.data,h = c.startX,u = c.startY;if (e > 0) {var d = Math.sqrt((s * s + l * l) / (1 + e * e));s = e * d * (s >= 0 ? 1 : -1), l = (l >= 0 ? 1 : -1) * d;}var p = Math.abs(s),f = Math.abs(l),g = s < 0 ? h - i.left : i.right - h,m = l < 0 ? u - i.top : i.bottom - u;s = (s >= 0 ? 1 : -1) * (p = (n = (0, o.u0)([p, f], [0, 0], [g, m], !!e))[0]), l = (l >= 0 ? 1 : -1) * (f = n[1]);var v = h + Math.min(0, s),y = u + Math.min(0, l);return { left: v, top: y, right: v + p, bottom: y + f, width: p, height: f };}function w(t) {var e = t.getBoundingClientRect(),i = e.left,n = e.top,r = e.width,s = e.height;return { pos1: [i, n], pos2: [i + r, n], pos3: [i, n + s], pos4: [i + r, n + s] };}function x(t, e, i) {var n = (0, a.U)(t, e),r = n.list,s = n.prevList,o = n.added,l = n.removed,c = n.maintained;return m(m(m([], o.map(function (t) {return r[t];}), !0), l.map(function (t) {return s[t];}), !0), i ? c.map(function (t) {var e = t[1];return r[e];}) : [], !0);}function S(t) {for (var e = 0, i = t.length, n = 1; n < i; ++n) e = Math.max((0, o.l$)(t[n], t[n - 1]), e);return e;}var E = (0, d.A)("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    pointer-events: none;\n    will-change: transform;\n    z-index: 100;\n}\n"),C = "selecto-selection ".concat(E.className),k = ["className", "boundContainer", "selectableTargets", "selectByClick", "selectFromInside", "continueSelect", "continueSelectWithoutDeselect", "toggleContinueSelect", "toggleContinueSelectWithoutDeselect", "keyContainer", "hitRate", "scrollOptions", "checkInput", "preventDefault", "ratio", "getElementRect", "preventDragFromInside", "rootContainer", "dragCondition", "clickBySelectEnd", "checkOverflow", "innerScrollOptions"];const T = (m(["dragContainer", "cspNonce", "preventClickEventOnDrag", "preventClickEventOnDragStart", "preventRightClick"], k, !0), Boolean, Boolean, Boolean, Boolean, Boolean, Boolean, Boolean, Boolean, Boolean, Boolean, Boolean, function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return f(e, t), e;}(function (t) {function e(e) {void 0 === e && (e = {});var i = t.call(this) || this;i.selectedTargets = [], i.dragScroll = new l.A(), i._onDragStart = function (t, e) {var n = t.data,r = t.clientX,s = t.clientY,a = t.inputEvent,l = i.options,c = l.selectFromInside,h = l.selectByClick,d = l.rootContainer,p = l.boundContainer,f = l.preventDragFromInside,m = void 0 === f || f,v = l.clickBySelectEnd,y = l.dragCondition;if (!y || y(t)) {n.data = {};var b = (0, o.zk)(i.container);n.innerWidth = b.innerWidth, n.innerHeight = b.innerHeight, i.findSelectableTargets(n), n.startSelectedTargets = i.selectedTargets, n.scaleMatrix = (0, u.uK)(), n.containerX = 0, n.containerY = 0;var w = i.container,S = { left: -1 / 0, top: -1 / 0, right: 1 / 0, bottom: 1 / 0 };if (d) {var E = i.container.getBoundingClientRect();n.containerX = E.left, n.containerY = E.top, n.scaleMatrix = (0, u.OK)(i.container, d);}if (p) {var C = (0, o.Gv)(p) && "element" in p ? g({ left: !0, top: !0, bottom: !0, right: !0 }, p) : { element: p, left: !0, top: !0, bottom: !0, right: !0 },k = C.element;if (k) {var T = ((0, o.Kg)(k) ? (0, o.YE)(w).querySelector(k) : !0 === k ? i.container : k).getBoundingClientRect();C.left && (S.left = T.left), C.top && (S.top = T.top), C.right && (S.right = T.right), C.bottom && (S.bottom = T.bottom);}}n.boundArea = S;var A = { left: r, top: s, right: r, bottom: s, width: 0, height: 0 },M = [],_ = h && !v,P = !1;if (!c || _) {var D = i._findElement(e || a.target, n.selectableTargets);P = !!D, _ && (M = D ? [D] : []);}var O = !c && P;if (O && !h) return t.stop(), !1;var I = a.type,F = "mousedown" === I || "touchstart" === I;if (!t.isClick && F && !i.emit("dragStart", g(g({}, t), { data: n.data }))) return t.stop(), !1;if (i.continueSelect ? (M = x(i.selectedTargets, M, i.continueSelectWithoutDeselect), n.startPassedTargets = i.selectedTargets) : n.startPassedTargets = [], i._select(M, A, t, !0, O && h && !v && m), n.startX = r, n.startY = s, n.selectFlag = !1, n.preventDragFromInside = !1, a.target) {var R = (0, u.c4)(n.scaleMatrix, [r - n.containerX, s - n.containerY]);i.target.style.cssText += "position: ".concat(d ? "absolute" : "fixed", ";") + "left:0px;top:0px;" + "transform: translate(".concat(R[0], "px, ").concat(R[1], "px)");}if (O && h && !v) a.preventDefault(), m && (i._selectEnd(n.startSelectedTargets, n.startPassedTargets, A, t, !0), n.preventDragFromInside = !0);else {n.selectFlag = !0;var L = i.options,N = L.scrollOptions,V = L.innerScrollOptions,B = !1;if (V) {for (var j = null, z = t.inputEvent.target; z && z !== (0, o.YE)(w).body;) {if ("visible" !== getComputedStyle(z).overflow) {j = z;break;}z = z.parentElement;}j && (n.innerScrollOptions = g({ container: j, checkScrollEvent: !0 }, !0 === V ? {} : V), i.dragScroll.dragStart(t, n.innerScrollOptions), B = !0);}!B && N && N.container && i.dragScroll.dragStart(t, N), O && h && v && (n.selectFlag = !1, t.preventDrag());}return !0;}t.stop();}, i._onDrag = function (t) {if (t.data.selectFlag) {var e = i.scrollOptions,n = t.data.innerScrollOptions;if ((n || (null == e ? void 0 : e.container)) && !t.isScroll && i.dragScroll.drag(t, n || e)) return;}i._checkSelected(t);}, i._onDragEnd = function (t) {var e,n,r,s,a = t.data,l = t.inputEvent,c = b(t, i.options.ratio),h = a.selectFlag,u = i.container;if (l && i.emit("dragEnd", g(g({ isDouble: !!t.isDouble, isClick: !!t.isClick, isDrag: !1, isSelect: h }, t), { data: a.data, rect: c })), i.target.style.cssText += "display: none;", h) a.selectFlag = !1, i.dragScroll.dragEnd();else if (i.selectByClick && i.clickBySelectEnd) {var d = i._findElement((null == l ? void 0 : l.target) || (e = u, n = t.clientX, r = t.clientY, (s = (0, o.YE)(e)).elementFromPoint && s.elementFromPoint(n, r) || null), a.selectableTargets);i._select(d ? [d] : [], c, t);}a.preventDragFromInside || i._selectEnd(a.startSelectedTargets, a.startPassedTargets, c, t);}, i._onKeyDown = function (t) {var e = i.options,n = !1;if (!i._keydownContinueSelect) {var r = i._sameCombiKey(t, e.toggleContinueSelect);i._keydownContinueSelect = r, n || (n = r);}i._keydownContinueSelectWithoutDeselection || (r = i._sameCombiKey(t, e.toggleContinueSelectWithoutDeselect), i._keydownContinueSelectWithoutDeselection = r, n || (n = r)), n && i.emit("keydown", { keydownContinueSelect: i._keydownContinueSelect, keydownContinueSelectWithoutDeselection: i._keydownContinueSelectWithoutDeselection });}, i._onKeyUp = function (t) {var e = i.options,n = !1;if (i._keydownContinueSelect) {var r = i._sameCombiKey(t, e.toggleContinueSelect, !0);i._keydownContinueSelect = !r, n || (n = r);}i._keydownContinueSelectWithoutDeselection && (r = i._sameCombiKey(t, e.toggleContinueSelectWithoutDeselect, !0), i._keydownContinueSelectWithoutDeselection = !r, n || (n = r)), n && i.emit("keyup", { keydownContinueSelect: i._keydownContinueSelect, keydownContinueSelectWithoutDeselection: i._keydownContinueSelectWithoutDeselection });}, i._onBlur = function () {(i._keydownContinueSelect || i._keydownContinueSelectWithoutDeselection) && (i._keydownContinueSelect = !1, i._keydownContinueSelectWithoutDeselection = !1, i.emit("keyup", { keydownContinueSelect: i._keydownContinueSelect, keydownContinueSelectWithoutDeselection: i._keydownContinueSelectWithoutDeselection }));}, i._onDocumentSelectStart = function (t) {var e = (0, o.YE)(i.container);if (i.gesto.isFlag()) {var n = i.dragContainer;n === (0, o.zk)(i.container) && (n = e.documentElement);var r = (0, o.Ll)(n) ? [n] : [].slice.call(n),s = t.target;r.some(function (e) {if (e === s || e.contains(s)) return t.preventDefault(), !0;});}}, i.target = e.portalContainer;var n = e.container;i.options = g({ className: "", portalContainer: null, container: null, dragContainer: null, selectableTargets: [], selectByClick: !0, selectFromInside: !0, clickBySelectEnd: !1, hitRate: 100, continueSelect: !1, continueSelectWithoutDeselect: !1, toggleContinueSelect: null, toggleContinueSelectWithoutDeselect: null, keyContainer: null, scrollOptions: null, checkInput: !1, preventDefault: !1, boundContainer: !1, preventDragFromInside: !0, dragCondition: null, rootContainer: null, checkOverflow: !1, innerScrollOptions: !1, getElementRect: w, cspNonce: "", ratio: 0 }, e);var r = i.options.portalContainer;return r && (n = r.parentElement), i.container = n || document.body, i.initElement(), i.initDragScroll(), i.setKeyController(), i;}f(e, t);var i = e.prototype;return i.setSelectedTargets = function (t) {var e = this.selectedTargets,i = (0, a.U)(e, t),n = i.added,r = i.removed,s = i.prevList,o = i.list;return this.selectedTargets = t, { added: n.map(function (t) {return o[t];}), removed: r.map(function (t) {return s[t];}), beforeSelected: e, selected: t };}, i.setSelectedTargetsByPoints = function (t, e) {var i = Math.min(t[0], e[0]),n = Math.min(t[1], e[1]),r = Math.max(t[0], e[0]),s = Math.max(t[1], e[1]),o = { left: i, top: n, right: r, bottom: s, width: r - i, height: s - n },a = { ignoreClick: !0 };this.findSelectableTargets(a);var l = this.hitTest(o, a, !0, null),c = this.setSelectedTargets(l);return g(g({}, c), { rect: o });}, i.selectTargetsByPoints = function (t, e) {var i = new MouseEvent("mousedown", { clientX: t[0], clientY: t[1], cancelable: !0, bubbles: !0 }),n = new MouseEvent("mousemove", { clientX: e[0], clientY: e[1], cancelable: !0, bubbles: !0 }),r = new MouseEvent("mousemove", { clientX: e[0], clientY: e[1], cancelable: !0, bubbles: !0 }),s = this.gesto;!1 !== s.onDragStart(i) && (s.onDrag(n), s.onDragEnd(r));}, i.getSelectedTargets = function () {return this.selectedTargets;}, i.triggerDragStart = function (t) {return this.gesto.triggerDragStart(t), this;}, i.destroy = function () {var t;this.off(), this.keycon && this.keycon.destroy(), this.gesto.unset(), this.injectResult.destroy(), this.dragScroll.dragEnd(), (0, o.Nn)(document, "selectstart", this._onDocumentSelectStart), this.options.portalContainer || null === (t = this.target.parentElement) || void 0 === t || t.removeChild(this.target), this.keycon = null, this.gesto = null, this.injectResult = null, this.target = null, this.container = null, this.options = null;}, i.getElementPoints = function (t) {var e = this.getElementRect || w,i = e(t),n = [i.pos1, i.pos2, i.pos4, i.pos3];if (e !== w) {var r = t.getBoundingClientRect();return (0, h.FV)(n, r);}return n;}, i.getSelectableElements = function () {var t = this.container,e = [];return this.options.selectableTargets.forEach(function (i) {if ((0, o.Tn)(i)) {var n = i();n && e.push.apply(e, [].slice.call(n));} else if ((0, o.Ll)(i)) e.push(i);else if ((0, o.Gv)(i)) e.push(i.value || i.current);else {var r = [].slice.call((0, o.YE)(t).querySelectorAll(i));e.push.apply(e, r);}}), e;}, i.checkScroll = function () {if (this.gesto.isFlag()) {var t = this.scrollOptions,e = this.gesto.getEventData().innerScrollOptions;(e || (null == t ? void 0 : t.container)) && this.dragScroll.checkScroll(g({ inputEvent: this.gesto.getCurrentEvent() }, e || t));}}, i.findSelectableTargets = function (t) {var e = this;void 0 === t && (t = this.gesto.getEventData());var i = this.getSelectableElements(),n = i.map(function (t) {return e.getElementPoints(t);});t.selectableTargets = i, t.selectablePoints = n, t.selectableParentMap = null;var r = this.options,s = r.checkOverflow || r.innerScrollOptions,a = (0, o.YE)(this.container);if (s) {var l = new Map();t.selectableInnerScrollParentMap = l, t.selectableInnerScrollPathsList = i.map(function (t, e) {for (var i = t.parentElement, n = [], r = [], s = function () {var t = l.get(i);if (!t && "visible" !== getComputedStyle(i).overflow) {var s = w(i);t = { parentElement: i, indexes: [], points: [s.pos1, s.pos2, s.pos4, s.pos3], paths: m([], r, !0) }, n.push(i), n.forEach(function (e) {l.set(e, t);}), n = [];}t ? (i = t.parentElement, l.get(i).indexes.push(e), r.push(i)) : n.push(i), i = i.parentElement;}; i && i !== a.body;) s();return r;});}return r.checkOverflow || (t.selectableInners = i.map(function () {return !0;})), this._refreshGroups(t), i;}, i.clickTarget = function (t, e) {var i = function (t) {if ("touches" in t) {var e = t.touches[0] || t.changedTouches[0];return { clientX: e.clientX, clientY: e.clientY };}return { clientX: t.clientX, clientY: t.clientY };}(t),n = { data: { selectFlag: !1 }, clientX: i.clientX, clientY: i.clientY, inputEvent: t, isClick: !0, isTrusted: !1, stop: function () {return !1;} };return this._onDragStart(n, e) && this._onDragEnd(n), this;}, i.setKeyController = function () {var t = this.options,e = t.keyContainer,i = t.toggleContinueSelect,n = t.toggleContinueSelectWithoutDeselect;this.keycon && (this.keycon.destroy(), this.keycon = null), (i || n) && (this.keycon = new c.Ay(e || (0, o.zk)(this.container)), this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur", this._onBlur));}, i.setClassName = function (t) {this.options.className = t, this.target.setAttribute("class", "".concat(C, " ").concat(t || ""));}, i.setKeyEvent = function () {var t = this.options,e = t.toggleContinueSelect,i = t.toggleContinueSelectWithoutDeselect;!e && !i || this.keycon || this.setKeyController();}, i.setKeyContainer = function (t) {var e = this,i = this.options;y(i.keyContainer, t, function () {i.keyContainer = t, e.setKeyController();});}, i.getContinueSelect = function () {var t = this.options,e = t.continueSelect;return t.toggleContinueSelect && this._keydownContinueSelect ? !e : e;}, i.getContinueSelectWithoutDeselect = function () {var t = this.options,e = t.continueSelectWithoutDeselect;return t.toggleContinueSelectWithoutDeselect && this._keydownContinueSelectWithoutDeselection ? !e : e;}, i.setToggleContinueSelect = function (t) {var e = this,i = this.options;y(i.toggleContinueSelect, t, function () {i.toggleContinueSelect = t, e.setKeyEvent();});}, i.setToggleContinueSelectWithoutDeselect = function (t) {var e = this,i = this.options;y(i.toggleContinueSelectWithoutDeselect, t, function () {i.toggleContinueSelectWithoutDeselect = t, e.setKeyEvent();});}, i.setPreventDefault = function (t) {this.gesto.options.preventDefault = t;}, i.setCheckInput = function (t) {this.gesto.options.checkInput = t;}, i.initElement = function () {var t = this.options,e = t.dragContainer,i = t.checkInput,n = t.preventDefault,s = t.preventClickEventOnDragStart,a = t.preventClickEventOnDrag,l = t.preventClickEventByCondition,c = t.preventRightClick,h = void 0 === c || c,u = t.className,d = this.container;this.target = v(function (t, e) {for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];var r = e || {},s = r.className,o = void 0 === s ? "" : s,a = r.style;return { tag: t, className: o, style: void 0 === a ? {} : a, attributes: function (t, e) {var i = {};for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (i[n] = t[n]);if (null != t && "function" == typeof Object.getOwnPropertySymbols) {var r = 0;for (n = Object.getOwnPropertySymbols(t); r < n.length; r++) e.indexOf(n[r]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[r]) && (i[n[r]] = t[n[r]]);}return i;}(r, ["className", "style"]), children: i };}("div", { className: "".concat(C, " ").concat(u || "") }), this.target, d);var p = this.target;this.dragContainer = "string" == typeof e ? [].slice.call((0, o.YE)(d).querySelectorAll(e)) : e || this.target.parentNode, this.gesto = new r.A(this.dragContainer, { checkWindowBlur: !0, container: (0, o.zk)(d), checkInput: i, preventDefault: n, preventClickEventOnDragStart: s, preventClickEventOnDrag: a, preventClickEventByCondition: l, preventRightClick: h }).on({ dragStart: this._onDragStart, drag: this._onDrag, dragEnd: this._onDragEnd }), (0, o.W2)(document, "selectstart", this._onDocumentSelectStart), this.injectResult = E.inject(p, { nonce: this.options.cspNonce });}, i.hitTest = function (t, e, i, n) {var r = this.options,s = r.hitRate,a = r.selectByClick,l = t.left,c = t.top,u = t.right,d = t.bottom,p = e.innerGroups,f = e.innerWidth,g = e.innerHeight,m = null == n ? void 0 : n.clientX,v = null == n ? void 0 : n.clientY,y = e.ignoreClick,b = [[l, c], [u, c], [u, d], [l, d]],w = function (t, e) {var n = "function" == typeof s ? (0, o.hg)("".concat(s(e))) : (0, o.hg)("".concat(s)),r = !y && (0, h.FK)([m, v], t);if (!i && a && r) return !0;var l = (0, h.TR)(b, t);if (!l.length) return !1;var c = (0, h.B9)(l),u = 0;return 0 === c && 0 === (0, h.B9)(t) ? (u = S(t), c = S(l)) : u = (0, h.B9)(t), "px" === n.unit ? c >= n.value : (0, o.Tq)(Math.round(c / u * 100), 0, 100) >= Math.min(100, n.value);},x = e.selectableTargets,E = e.selectablePoints,C = e.selectableInners;if (!p) return x.filter(function (t, e) {return !!C[e] && w(E[e], x[e]);});for (var k = [], T = Math.floor(l / f), A = Math.floor(u / f), M = Math.floor(c / g), _ = Math.floor(d / g), P = T; P <= A; ++P) {var D = p[P];if (D) for (var O = M; O <= _; ++O) {var I = D[O];I && I.forEach(function (t) {var e = E[t],i = C[t],n = x[t];i && w(e, n) && k.push(n);});}}return function (t) {if ("undefined" == typeof Map) return t.filter(function (e, i) {return t.indexOf(e) === i;});var e = new Map();return t.filter(function (t) {return !e.has(t) && (e.set(t, !0), !0);});}(k);}, i.initDragScroll = function () {var t = this;this.dragScroll.on("scrollDrag", function (e) {(0, e.next)(t.gesto.getCurrentEvent());}).on("scroll", function (e) {var i = e.container,n = e.direction;t.gesto.getEventData().innerScrollOptions ? t.emit("innerScroll", { container: i, direction: n }) : t.emit("scroll", { container: i, direction: n });}).on("move", function (e) {var i = e.offsetX,n = e.offsetY,r = e.inputEvent,s = t.gesto;if (s && s.isFlag()) {var o = t.gesto.getEventData(),a = o.boundArea;o.startX -= i, o.startY -= n;var l = t.gesto.getEventData().innerScrollOptions,c = null == l ? void 0 : l.container,h = !1;if (c) {var u = o.selectableInnerScrollParentMap,d = u.get(c);d && (d.paths.forEach(function (t) {u.get(t).points.forEach(function (t) {t[0] -= i, t[1] -= n;});}), d.indexes.forEach(function (t) {o.selectablePoints[t].forEach(function (t) {t[0] -= i, t[1] -= n;});}), h = !0);}h || o.selectablePoints.forEach(function (t) {t.forEach(function (t) {t[0] -= i, t[1] -= n;});}), t._refreshGroups(o), a.left -= i, a.right -= i, a.top -= n, a.bottom -= n, t.gesto.scrollBy(i, n, r.inputEvent), t._checkSelected(t.gesto.getCurrentEvent());}});}, i._select = function (t, e, i, n, r) {void 0 === r && (r = !1);var s = i.inputEvent,o = i.data,l = this.setSelectedTargets(t),c = (0, a.U)(o.startSelectedTargets, t),h = c.added,u = c.removed,d = c.prevList,p = c.list,f = { startSelected: d, startAdded: h.map(function (t) {return p[t];}), startRemoved: u.map(function (t) {return d[t];}) };n && this.emit("selectStart", g(g(g({}, l), f), { rect: e, inputEvent: s, data: o.data, isTrusted: i.isTrusted, isDragStartEnd: r })), (l.added.length || l.removed.length) && this.emit("select", g(g(g({}, l), f), { rect: e, inputEvent: s, data: o.data, isTrusted: i.isTrusted, isDragStartEnd: r }));}, i._selectEnd = function (t, e, i, n, r) {void 0 === r && (r = !1);var s = n.inputEvent,o = n.isDouble,l = n.data,c = s && s.type,h = "mousedown" === c || "touchstart" === c,u = (0, a.U)(t, this.selectedTargets),d = u.added,p = u.removed,f = u.prevList,g = u.list,m = (0, a.U)(e, this.selectedTargets),v = m.added,y = m.removed,b = m.prevList,w = m.list;this.emit("selectEnd", { startSelected: t, beforeSelected: e, selected: this.selectedTargets, added: d.map(function (t) {return g[t];}), removed: p.map(function (t) {return f[t];}), afterAdded: v.map(function (t) {return w[t];}), afterRemoved: y.map(function (t) {return b[t];}), isDragStart: h && r, isDragStartEnd: h && r, isClick: !!n.isClick, isDouble: !!o, rect: i, inputEvent: s, data: l.data, isTrusted: n.isTrusted });}, i._checkSelected = function (t, e) {void 0 === e && (e = b(t, this.options.ratio));var i = t.data,n = e.top,r = e.left,s = e.width,o = e.height,a = i.selectFlag,l = i.containerX,c = i.containerY,h = i.scaleMatrix,d = (0, u.c4)(h, [r - l, n - c]),p = (0, u.c4)(h, [s, o]),f = [];if (a) {this.target.style.cssText += "display: block;left:0px;top:0px;" + "transform: translate(".concat(d[0], "px, ").concat(d[1], "px);") + "width:".concat(p[0], "px;height:").concat(p[1], "px;");var m = this.hitTest(e, i, !0, t);f = x(i.startPassedTargets, m, this.continueSelect && this.continueSelectWithoutDeselect);}if (!1 === this.emit("drag", g(g({}, t), { data: i.data, isSelect: a, rect: e }))) return this.target.style.cssText += "display: none;", void t.stop();a && this._select(f, e, t);}, i._sameCombiKey = function (t, e, i) {if (!e) return !1;var n = (0, c.$H)(t.inputEvent, t.key),r = [].concat(e),s = (0, o.cy)(r[0]) ? r : [r];if (i) {var a = t.key;return s.some(function (t) {return t.some(function (t) {return t === a;});});}return s.some(function (t) {return t.every(function (t) {return n.indexOf(t) > -1;});});}, i._findElement = function (t, e) {for (var i = t; i && !(e.indexOf(i) > -1);) i = i.parentElement;return i;}, i._refreshGroups = function (t) {var e,i = t.innerWidth,n = t.innerHeight,r = t.selectablePoints;if (this.options.checkOverflow) {var s = null === (e = this.gesto.getEventData().innerScrollOptions) || void 0 === e ? void 0 : e.container,o = t.selectableInnerScrollParentMap,a = t.selectableInnerScrollPathsList;t.selectableInners = a.map(function (t, e) {var i = !1;return t.every(function (t) {if (i) return !0;if (t === s) return i = !0, !0;var n = o.get(t);if (n) {var a = r[e],l = n.points;if (!(0, h.TR)(a, l).length) return !1;}return !0;});});}if (i && n) {var l = t.selectablePoints,c = {};l.forEach(function (t, e) {var r = 1 / 0,s = -1 / 0,o = 1 / 0,a = -1 / 0;t.forEach(function (t) {var e = Math.floor(t[0] / i),l = Math.floor(t[1] / n);r = Math.min(e, r), s = Math.max(e, s), o = Math.min(l, o), a = Math.max(l, a);});for (var l = r; l <= s; ++l) for (var h = o; h <= a; ++h) c[l] = c[l] || {}, c[l][h] = c[l][h] || [], c[l][h].push(e);}), t.innerGroups = c;} else t.innerGroups = null;}, e = function (t, e, i, n) {var r,s = arguments.length,o = s < 3 ? e : null === n ? n = Object.getOwnPropertyDescriptor(e, i) : n;if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(t, e, i, n);else for (var a = t.length - 1; a >= 0; a--) (r = t[a]) && (o = (s < 3 ? r(o) : s > 3 ? r(e, i, o) : r(e, i)) || o);return s > 3 && o && Object.defineProperty(e, i, o), o;}([(0, s.OA)(k, function (t, e) {var i = { enumerable: !0, configurable: !0, get: function () {return this.options[e];} },n = (0, o.PT)("get ".concat(e));t[n] ? i.get = function () {return this[n]();} : i.get = function () {return this.options[e];};var r = (0, o.PT)("set ".concat(e));t[r] ? i.set = function (t) {this[r](t);} : i.set = function (t) {this.options[e] = t;}, Object.defineProperty(t, e, i);})], e), e;}(n.A)));}, 906: (t, e, i) => {"use strict";i.d(e, { g: () => r });var n = i(1807);class r extends n.T0G {config;titleBox;descriptionBox;boxContent;dialogContainer;loadingContainer;boxContainer;buttonBox;leftButtonBox;rightButtonBox;okButton;cancelButton;validationErrorBox;loadingElement;get callbackData() {return null;}get validationCallbackData() {return null;}constructor(t) {super(), this.config = t;}draw() {return new Promise((t) => {this.on("action", (e) => t(e));});}triggerAction(t, e, i = !0) {this.trigger("action", { action: t, data: e }), i && this.destroy();}create() {this.dialogContainer && this.dialogContainer.remove();const t = this.config.scale > 1 ? 1 / this.config.scale : 1;(0, n.tTh)(".msg-box.show", this.config.element, { attr: { id: this.config.containerId ?? null }, middleware: (t) => this.dialogContainer = t }, [(0, n.tTh)(".box" + (this.config.boxClass ? `.${this.config.boxClass}` : ""), { middleware: (t) => {this.boxContainer = t;}, attr: { style: `transform: scale(${t})` } }, [(0, n.tTh)(".title-section", [(0, n.tTh)(".title", { middleware: (t) => {this.titleBox = t;} }, this.config.title), ...(this.config.hideCloseButton ? [] : [(0, n.tTh)(".icon-box.ctrl", { events: { click: () => this.triggerAction("cancel") } }, [(0, n.tTh)(".icon.icon-close")])])]), (0, n.tTh)(".description", { middleware: (t) => {this.descriptionBox = t;} }, this.config.description), (0, n.tTh)(".box-content", { middleware: (t) => {this.boxContent = t;} }), (0, n.tTh)(".button-box", { middleware: (t) => {this.buttonBox = t;} }, [(0, n.tTh)(".left-buttons", { middleware: (t) => {this.leftButtonBox = t;} }), (0, n.tTh)(".right-buttons", { middleware: (t) => {this.rightButtonBox = t;} })])])]), this.config.boxContentClasses && this.config.boxContentClasses.forEach((t) => {this.boxContent.classList.add(t);}), this.config.content && this.boxContent.appendChild(this.config.content), this.config.link && this.leftButtonBox.appendChild((0, n.tTh)("a.learn-more", { events: { click: () => {globalThis.thisVisual?.host ? globalThis.thisVisual.host.launchUrl(this.config.link.url) : this.triggerAction("link", this.config.link?.url);} } }, this.config.link.text)), this.config.icon && this.titleBox.prepend((0, n.tTh)(`.icon.icon-${this.config.icon}`)), this.config.size && (this.boxContainer.style.width = this.config.size.width, this.boxContainer.style.height = this.config.size.height), this.config.buttons && this.config.buttons.forEach((t) => this.addButton(t)), this.config.buttons?.length || this.config.link || (this.buttonBox.remove(), this.buttonBox = null);}addValidationErrorBox(t = this.boxContent) {this.buttonBox && (this.buttonBox.style.marginTop = "0"), this.validationErrorBox && this.validationErrorBox.remove(), (0, n.tTh)(".validation-error.hide", t, { middleware: (t) => {this.validationErrorBox = t;} });}async validate(t) {if (t) {this.showLoading();const e = await t(this.validationCallbackData);if (this.removeLoading(), !e.valid) return e.destroyOnInvalid ? this.triggerAction("cancel") : this.showValidationError(e.message), !1;}return this.hideBanner(), !0;}addButton(t) {const e = (0, n.tTh)(".synoptic-btn" + (t.disabled ? ".disabled" : ""), t.left ? this.leftButtonBox : this.rightButtonBox, { attr: { id: t.id || `dialog-btn-${(0, n.uRe)()}` }, events: { click: async (e, i) => {if (e.preventDefault(), !i.closest(".synoptic-btn").classList.contains("disabled") && (await this.validate(t.validationCallback))) {if (t.callback) {this.showLoading();const e = await t.callback(this.callbackData);if (this.removeLoading(), !1 === e) return;}this.triggerAction(t.action ?? "ok");}} } }, [(0, n.tTh)(".group.small.ctrl" + ("cancel" === t.action ? ".white.border" : ""), [(0, n.tTh)(".text.small.min", t.text)])]);t.action && "ok" != t.action ? "cancel" == t.action && (this.cancelButton || (this.cancelButton = e)) : this.okButton || (this.okButton = e);}showValidationError(t) {this.validationErrorBox && t && (this.validationErrorBox.textContent = t, this.validationErrorBox.classList.remove("hide"));}hideBanner() {this.validationErrorBox && (this.validationErrorBox.textContent = "", this.validationErrorBox.classList.add("hide"));}hideButton(t) {Array.isArray(t) || (t = [t]), t.forEach((t) => {const e = this.dialogContainer.querySelector(`#${t}`);e && e.classList.add("hidden");});}showButton(t, e, i = !1) {const n = this.dialogContainer.querySelector(`#${t}`);if (n && (n.classList.remove("hidden"), this.toggleButton(n, i), e)) {const t = n.querySelector(".text");t && (t.textContent = e);}}toggleButton(t, e) {if (t instanceof Element) e ? t.classList.add("disabled") : t.classList.remove("disabled");else {const i = this.dialogContainer.querySelector(`#${t}`);i && (e ? i.classList.add("disabled") : i.classList.remove("disabled"));}}showLoading() {(0, n.tTh)(".full-size-loading.show", this.boxContainer, { middleware: (t) => this.loadingElement = t }, [(0, n.tTh)(".loading", [(0, n.tTh)(".loader")])]);}removeLoading() {this.loadingElement && this.loadingElement.remove();}destroy() {this.okButton = null, this.cancelButton = null, this.dialogContainer?.remove(), this.dialogContainer = null, this.config?.destroyCallback && this.config.destroyCallback();}}}, 909: (t, e, i) => {"use strict";const n = i(3908);t.exports = (t, e, i) => {const r = new n(t, i),s = new n(e, i);return r.compare(s) || r.compareBuild(s);};}, 973: (t, e, i) => {"use strict";i.d(e, { W: () => s });var n = i(6639),r = i(3753);function s(t, e, i) {const s = t && t.startsWith(".") ? t.trim().replace(" ", ".") : "",o = (t) => {const e = t.currentTarget;i?.change && i.change(t, e.value), t.stopPropagation();},a = i?.name || (0, r.uR)(),l = (0, n.tT)(`.radio-container${s}${i?.title ? ".icon.icon-help-super" : ""}`, { attr: { hidden: i?.hidden, title: i?.title } }, i?.list?.map((t) => (0, n.tT)("label" + (i?.disabled ? ".disabled" : ""), [(0, n.tT)("input", { attr: { type: "radio", name: a, value: t.value, checked: t.selected, disabled: i?.disabled }, events: { input: o } }), (0, n.tT)(".radio", t.text)])));return e && e.appendChild(l), i?.middleware && i.middleware(l), l;}}, 980: (t, e, i) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 });var n = i(6642);e.default = function (t) {Object.keys(n.locales).forEach(function (e) {return t.addCultureInfo.apply(t, n.locales[e]);});};}, 1020: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(7493);function r(t, e) {const i = `SHA-${t.slice(-3)}`;switch (t) {case "HS256":case "HS384":case "HS512":return { hash: i, name: "HMAC" };case "PS256":case "PS384":case "PS512":return { hash: i, name: "RSA-PSS", saltLength: t.slice(-3) >> 3 };case "RS256":case "RS384":case "RS512":return { hash: i, name: "RSASSA-PKCS1-v1_5" };case "ES256":case "ES384":case "ES512":return { hash: i, name: "ECDSA", namedCurve: e.namedCurve };case "Ed25519":return { name: "Ed25519" };case "EdDSA":return { name: e.name };default:throw new n.T0(`alg ${t} is not supported either by JOSE or your javascript runtime`);}}}, 1052: (t, e, i) => {"use strict";i.d(e, { Ay: () => m, C: () => f, Gu: () => g });var n = i(2016),r = i(8503),s = i(8981),o = i(9770),a = i(9279),l = i(414),c = [0, 1];function h(t) {return t;}function u(t, e) {return (e -= t = +t) ? function (i) {return (i - t) / e;} : (0, a.A)(isNaN(e) ? NaN : .5);}function d(t, e, i) {var n = t[0],r = t[1],s = e[0],o = e[1];return r < n ? (n = u(r, n), s = i(o, s)) : (n = u(n, r), s = i(s, o)), function (t) {return s(n(t));};}function p(t, e, i) {var r = Math.min(t.length, e.length) - 1,s = new Array(r),o = new Array(r),a = -1;for (t[r] < t[0] && (t = t.slice().reverse(), e = e.slice().reverse()); ++a < r;) s[a] = u(t[a], t[a + 1]), o[a] = i(e[a], e[a + 1]);return function (e) {var i = (0, n.Ay)(t, e, 1, r) - 1;return o[i](s[i](e));};}function f(t, e) {return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());}function g() {var t,e,i,n,a,u,f = c,g = c,m = r.A,v = h;function y() {var t,e,i,r = Math.min(f.length, g.length);return v !== h && (t = f[0], e = f[r - 1], t > e && (i = t, t = e, e = i), v = function (i) {return Math.max(t, Math.min(e, i));}), n = r > 2 ? p : d, a = u = null, b;}function b(e) {return null == e || isNaN(e = +e) ? i : (a || (a = n(f.map(t), g, m)))(t(v(e)));}return b.invert = function (i) {return v(e((u || (u = n(g, f.map(t), s.A)))(i)));}, b.domain = function (t) {return arguments.length ? (f = Array.from(t, l.A), y()) : f.slice();}, b.range = function (t) {return arguments.length ? (g = Array.from(t), y()) : g.slice();}, b.rangeRound = function (t) {return g = Array.from(t), m = o.A, y();}, b.clamp = function (t) {return arguments.length ? (v = !!t || h, y()) : v !== h;}, b.interpolate = function (t) {return arguments.length ? (m = t, y()) : m;}, b.unknown = function (t) {return arguments.length ? (i = t, b) : i;}, function (i, n) {return t = i, e = n, y();};}function m() {return g()(h, h);}}, 1089: (t, e, i) => {"use strict";i.d(e, { A: () => l });var n = { value: () => {} };function r() {for (var t, e = 0, i = arguments.length, n = {}; e < i; ++e) {if (!(t = arguments[e] + "") || t in n || /[\s.]/.test(t)) throw new Error("illegal type: " + t);n[t] = [];}return new s(n);}function s(t) {this._ = t;}function o(t, e) {for (var i, n = 0, r = t.length; n < r; ++n) if ((i = t[n]).name === e) return i.value;}function a(t, e, i) {for (var r = 0, s = t.length; r < s; ++r) if (t[r].name === e) {t[r] = n, t = t.slice(0, r).concat(t.slice(r + 1));break;}return null != i && t.push({ name: e, value: i }), t;}s.prototype = r.prototype = { constructor: s, on: function (t, e) {var i,n,r = this._,s = (n = r, (t + "").trim().split(/^|\s+/).map(function (t) {var e = "",i = t.indexOf(".");if (i >= 0 && (e = t.slice(i + 1), t = t.slice(0, i)), t && !n.hasOwnProperty(t)) throw new Error("unknown type: " + t);return { type: t, name: e };})),l = -1,c = s.length;if (!(arguments.length < 2)) {if (null != e && "function" != typeof e) throw new Error("invalid callback: " + e);for (; ++l < c;) if (i = (t = s[l]).type) r[i] = a(r[i], t.name, e);else if (null == e) for (i in r) r[i] = a(r[i], t.name, null);return this;}for (; ++l < c;) if ((i = (t = s[l]).type) && (i = o(r[i], t.name))) return i;}, copy: function () {var t = {},e = this._;for (var i in e) t[i] = e[i].slice();return new s(t);}, call: function (t, e) {if ((i = arguments.length - 2) > 0) for (var i, n, r = new Array(i), s = 0; s < i; ++s) r[s] = arguments[s + 2];if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t);for (s = 0, i = (n = this._[t]).length; s < i; ++s) n[s].value.apply(e, r);}, apply: function (t, e, i) {if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t);for (var n = this._[t], r = 0, s = n.length; r < s; ++r) n[r].value.apply(e, i);} };const l = r;}, 1107: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 });}, 1123: (t) => {"use strict";const e = /^[0-9]+$/,i = (t, i) => {if ("number" == typeof t && "number" == typeof i) return t === i ? 0 : t < i ? -1 : 1;const n = e.test(t),r = e.test(i);return n && r && (t = +t, i = +i), t === i ? 0 : n && !r ? -1 : r && !n ? 1 : t < i ? -1 : 1;};t.exports = { compareIdentifiers: i, rcompareIdentifiers: (t, e) => i(e, t) };}, 1135: (t) => {t.exports = function (t) {return t && "object" == typeof t && "function" == typeof t.copy && "function" == typeof t.fill && "function" == typeof t.readUInt8;};}, 1154: (t, e, i) => {"use strict";const n = i(3940),r = i(280),{ MAX_LENGTH: s, POSIX_REGEX_SOURCE: o, REGEX_NON_SPECIAL_CHARS: a, REGEX_SPECIAL_CHARS_BACKREF: l, REPLACEMENTS: c } = n,h = (t, e) => {if ("function" == typeof e.expandRange) return e.expandRange(...t, e);t.sort();const i = `[${t.join("-")}]`;try {new RegExp(i);} catch (e) {return t.map((t) => r.escapeRegex(t)).join("..");}return i;},u = (t, e) => `Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,d = (t, e) => {if ("string" != typeof t) throw new TypeError("Expected a string");t = c[t] || t;const i = { ...e },p = "number" == typeof i.maxLength ? Math.min(s, i.maxLength) : s;let f = t.length;if (f > p) throw new SyntaxError(`Input length: ${f}, exceeds maximum allowed length: ${p}`);const g = { type: "bos", value: "", output: i.prepend || "" },m = [g],v = i.capture ? "" : "?:",y = r.isWindows(e),b = n.globChars(y),w = n.extglobChars(b),{ DOT_LITERAL: x, PLUS_LITERAL: S, SLASH_LITERAL: E, ONE_CHAR: C, DOTS_SLASH: k, NO_DOT: T, NO_DOT_SLASH: A, NO_DOTS_SLASH: M, QMARK: _, QMARK_NO_DOT: P, STAR: D, START_ANCHOR: O } = b,I = (t) => `(${v}(?:(?!${O}${t.dot ? k : x}).)*?)`,F = i.dot ? "" : T,R = i.dot ? _ : P;let L = !0 === i.bash ? I(i) : D;i.capture && (L = `(${L})`), "boolean" == typeof i.noext && (i.noextglob = i.noext);const N = { input: t, index: -1, start: 0, dot: !0 === i.dot, consumed: "", output: "", prefix: "", backtrack: !1, negated: !1, brackets: 0, braces: 0, parens: 0, quotes: 0, globstar: !1, tokens: m };t = r.removePrefix(t, N), f = t.length;const V = [],B = [],j = [];let z,U = g;const H = () => N.index === f - 1,q = N.peek = (e = 1) => t[N.index + e],$ = N.advance = () => t[++N.index] || "",G = () => t.slice(N.index + 1),W = (t = "", e = 0) => {N.consumed += t, N.index += e;},K = (t) => {N.output += null != t.output ? t.output : t.value, W(t.value);},Z = () => {let t = 1;for (; "!" === q() && ("(" !== q(2) || "?" === q(3));) $(), N.start++, t++;return t % 2 != 0 && (N.negated = !0, N.start++, !0);},Y = (t) => {N[t]++, j.push(t);},X = (t) => {N[t]--, j.pop();},J = (t) => {if ("globstar" === U.type) {const e = N.braces > 0 && ("comma" === t.type || "brace" === t.type),i = !0 === t.extglob || V.length && ("pipe" === t.type || "paren" === t.type);"slash" === t.type || "paren" === t.type || e || i || (N.output = N.output.slice(0, -U.output.length), U.type = "star", U.value = "*", U.output = L, N.output += U.output);}if (V.length && "paren" !== t.type && (V[V.length - 1].inner += t.value), (t.value || t.output) && K(t), U && "text" === U.type && "text" === t.type) return U.value += t.value, void (U.output = (U.output || "") + t.value);t.prev = U, m.push(t), U = t;},Q = (t, e) => {const n = { ...w[e], conditions: 1, inner: "" };n.prev = U, n.parens = N.parens, n.output = N.output;const r = (i.capture ? "(" : "") + n.open;Y("parens"), J({ type: t, value: e, output: N.output ? "" : C }), J({ type: "paren", extglob: !0, value: $(), output: r }), V.push(n);},tt = (t) => {let n,r = t.close + (i.capture ? ")" : "");if ("negate" === t.type) {let s = L;if (t.inner && t.inner.length > 1 && t.inner.includes("/") && (s = I(i)), (s !== L || H() || /^\)+$/.test(G())) && (r = t.close = `)$))${s}`), t.inner.includes("*") && (n = G()) && /^\.[^\\/.]+$/.test(n)) {const i = d(n, { ...e, fastpaths: !1 }).output;r = t.close = `)${i})${s})`;}"bos" === t.prev.type && (N.negatedExtglob = !0);}J({ type: "paren", extglob: !0, value: z, output: r }), X("parens");};if (!1 !== i.fastpaths && !/(^[*!]|[/()[\]{}"])/.test(t)) {let n = !1,s = t.replace(l, (t, e, i, r, s, o) => "\\" === r ? (n = !0, t) : "?" === r ? e ? e + r + (s ? _.repeat(s.length) : "") : 0 === o ? R + (s ? _.repeat(s.length) : "") : _.repeat(i.length) : "." === r ? x.repeat(i.length) : "*" === r ? e ? e + r + (s ? L : "") : L : e ? t : `\\${t}`);return !0 === n && (s = !0 === i.unescape ? s.replace(/\\/g, "") : s.replace(/\\+/g, (t) => t.length % 2 == 0 ? "\\\\" : t ? "\\" : "")), s === t && !0 === i.contains ? (N.output = t, N) : (N.output = r.wrapOutput(s, N, e), N);}for (; !H();) {if (z = $(), "\0" === z) continue;if ("\\" === z) {const t = q();if ("/" === t && !0 !== i.bash) continue;if ("." === t || ";" === t) continue;if (!t) {z += "\\", J({ type: "text", value: z });continue;}const e = /^\\+/.exec(G());let n = 0;if (e && e[0].length > 2 && (n = e[0].length, N.index += n, n % 2 != 0 && (z += "\\")), !0 === i.unescape ? z = $() : z += $(), 0 === N.brackets) {J({ type: "text", value: z });continue;}}if (N.brackets > 0 && ("]" !== z || "[" === U.value || "[^" === U.value)) {if (!1 !== i.posix && ":" === z) {const t = U.value.slice(1);if (t.includes("[") && (U.posix = !0, t.includes(":"))) {const t = U.value.lastIndexOf("["),e = U.value.slice(0, t),i = U.value.slice(t + 2),n = o[i];if (n) {U.value = e + n, N.backtrack = !0, $(), g.output || 1 !== m.indexOf(U) || (g.output = C);continue;}}}("[" === z && ":" !== q() || "-" === z && "]" === q()) && (z = `\\${z}`), "]" !== z || "[" !== U.value && "[^" !== U.value || (z = `\\${z}`), !0 === i.posix && "!" === z && "[" === U.value && (z = "^"), U.value += z, K({ value: z });continue;}if (1 === N.quotes && '"' !== z) {z = r.escapeRegex(z), U.value += z, K({ value: z });continue;}if ('"' === z) {N.quotes = 1 === N.quotes ? 0 : 1, !0 === i.keepQuotes && J({ type: "text", value: z });continue;}if ("(" === z) {Y("parens"), J({ type: "paren", value: z });continue;}if (")" === z) {if (0 === N.parens && !0 === i.strictBrackets) throw new SyntaxError(u("opening", "("));const t = V[V.length - 1];if (t && N.parens === t.parens + 1) {tt(V.pop());continue;}J({ type: "paren", value: z, output: N.parens ? ")" : "\\)" }), X("parens");continue;}if ("[" === z) {if (!0 !== i.nobracket && G().includes("]")) Y("brackets");else {if (!0 !== i.nobracket && !0 === i.strictBrackets) throw new SyntaxError(u("closing", "]"));z = `\\${z}`;}J({ type: "bracket", value: z });continue;}if ("]" === z) {if (!0 === i.nobracket || U && "bracket" === U.type && 1 === U.value.length) {J({ type: "text", value: z, output: `\\${z}` });continue;}if (0 === N.brackets) {if (!0 === i.strictBrackets) throw new SyntaxError(u("opening", "["));J({ type: "text", value: z, output: `\\${z}` });continue;}X("brackets");const t = U.value.slice(1);if (!0 === U.posix || "^" !== t[0] || t.includes("/") || (z = `/${z}`), U.value += z, K({ value: z }), !1 === i.literalBrackets || r.hasRegexChars(t)) continue;const e = r.escapeRegex(U.value);if (N.output = N.output.slice(0, -U.value.length), !0 === i.literalBrackets) {N.output += e, U.value = e;continue;}U.value = `(${v}${e}|${U.value})`, N.output += U.value;continue;}if ("{" === z && !0 !== i.nobrace) {Y("braces");const t = { type: "brace", value: z, output: "(", outputIndex: N.output.length, tokensIndex: N.tokens.length };B.push(t), J(t);continue;}if ("}" === z) {const t = B[B.length - 1];if (!0 === i.nobrace || !t) {J({ type: "text", value: z, output: z });continue;}let e = ")";if (!0 === t.dots) {const t = m.slice(),n = [];for (let e = t.length - 1; e >= 0 && (m.pop(), "brace" !== t[e].type); e--) "dots" !== t[e].type && n.unshift(t[e].value);e = h(n, i), N.backtrack = !0;}if (!0 !== t.comma && !0 !== t.dots) {const i = N.output.slice(0, t.outputIndex),n = N.tokens.slice(t.tokensIndex);t.value = t.output = "\\{", z = e = "\\}", N.output = i;for (const t of n) N.output += t.output || t.value;}J({ type: "brace", value: z, output: e }), X("braces"), B.pop();continue;}if ("|" === z) {V.length > 0 && V[V.length - 1].conditions++, J({ type: "text", value: z });continue;}if ("," === z) {let t = z;const e = B[B.length - 1];e && "braces" === j[j.length - 1] && (e.comma = !0, t = "|"), J({ type: "comma", value: z, output: t });continue;}if ("/" === z) {if ("dot" === U.type && N.index === N.start + 1) {N.start = N.index + 1, N.consumed = "", N.output = "", m.pop(), U = g;continue;}J({ type: "slash", value: z, output: E });continue;}if ("." === z) {if (N.braces > 0 && "dot" === U.type) {"." === U.value && (U.output = x);const t = B[B.length - 1];U.type = "dots", U.output += z, U.value += z, t.dots = !0;continue;}if (N.braces + N.parens === 0 && "bos" !== U.type && "slash" !== U.type) {J({ type: "text", value: z, output: x });continue;}J({ type: "dot", value: z, output: x });continue;}if ("?" === z) {if ((!U || "(" !== U.value) && !0 !== i.noextglob && "(" === q() && "?" !== q(2)) {Q("qmark", z);continue;}if (U && "paren" === U.type) {const t = q();let e = z;if ("<" === t && !r.supportsLookbehinds()) throw new Error("Node.js v10 or higher is required for regex lookbehinds");("(" === U.value && !/[!=<:]/.test(t) || "<" === t && !/<([!=]|\w+>)/.test(G())) && (e = `\\${z}`), J({ type: "text", value: z, output: e });continue;}if (!0 !== i.dot && ("slash" === U.type || "bos" === U.type)) {J({ type: "qmark", value: z, output: P });continue;}J({ type: "qmark", value: z, output: _ });continue;}if ("!" === z) {if (!0 !== i.noextglob && "(" === q() && ("?" !== q(2) || !/[!=<:]/.test(q(3)))) {Q("negate", z);continue;}if (!0 !== i.nonegate && 0 === N.index) {Z();continue;}}if ("+" === z) {if (!0 !== i.noextglob && "(" === q() && "?" !== q(2)) {Q("plus", z);continue;}if (U && "(" === U.value || !1 === i.regex) {J({ type: "plus", value: z, output: S });continue;}if (U && ("bracket" === U.type || "paren" === U.type || "brace" === U.type) || N.parens > 0) {J({ type: "plus", value: z });continue;}J({ type: "plus", value: S });continue;}if ("@" === z) {if (!0 !== i.noextglob && "(" === q() && "?" !== q(2)) {J({ type: "at", extglob: !0, value: z, output: "" });continue;}J({ type: "text", value: z });continue;}if ("*" !== z) {"$" !== z && "^" !== z || (z = `\\${z}`);const t = a.exec(G());t && (z += t[0], N.index += t[0].length), J({ type: "text", value: z });continue;}if (U && ("globstar" === U.type || !0 === U.star)) {U.type = "star", U.star = !0, U.value += z, U.output = L, N.backtrack = !0, N.globstar = !0, W(z);continue;}let e = G();if (!0 !== i.noextglob && /^\([^?]/.test(e)) {Q("star", z);continue;}if ("star" === U.type) {if (!0 === i.noglobstar) {W(z);continue;}const n = U.prev,r = n.prev,s = "slash" === n.type || "bos" === n.type,o = r && ("star" === r.type || "globstar" === r.type);if (!0 === i.bash && (!s || e[0] && "/" !== e[0])) {J({ type: "star", value: z, output: "" });continue;}const a = N.braces > 0 && ("comma" === n.type || "brace" === n.type),l = V.length && ("pipe" === n.type || "paren" === n.type);if (!s && "paren" !== n.type && !a && !l) {J({ type: "star", value: z, output: "" });continue;}for (; "/**" === e.slice(0, 3);) {const i = t[N.index + 4];if (i && "/" !== i) break;e = e.slice(3), W("/**", 3);}if ("bos" === n.type && H()) {U.type = "globstar", U.value += z, U.output = I(i), N.output = U.output, N.globstar = !0, W(z);continue;}if ("slash" === n.type && "bos" !== n.prev.type && !o && H()) {N.output = N.output.slice(0, -(n.output + U.output).length), n.output = `(?:${n.output}`, U.type = "globstar", U.output = I(i) + (i.strictSlashes ? ")" : "|$)"), U.value += z, N.globstar = !0, N.output += n.output + U.output, W(z);continue;}if ("slash" === n.type && "bos" !== n.prev.type && "/" === e[0]) {const t = void 0 !== e[1] ? "|$" : "";N.output = N.output.slice(0, -(n.output + U.output).length), n.output = `(?:${n.output}`, U.type = "globstar", U.output = `${I(i)}${E}|${E}${t})`, U.value += z, N.output += n.output + U.output, N.globstar = !0, W(z + $()), J({ type: "slash", value: "/", output: "" });continue;}if ("bos" === n.type && "/" === e[0]) {U.type = "globstar", U.value += z, U.output = `(?:^|${E}|${I(i)}${E})`, N.output = U.output, N.globstar = !0, W(z + $()), J({ type: "slash", value: "/", output: "" });continue;}N.output = N.output.slice(0, -U.output.length), U.type = "globstar", U.output = I(i), U.value += z, N.output += U.output, N.globstar = !0, W(z);continue;}const n = { type: "star", value: z, output: L };!0 !== i.bash ? !U || "bracket" !== U.type && "paren" !== U.type || !0 !== i.regex ? (N.index !== N.start && "slash" !== U.type && "dot" !== U.type || ("dot" === U.type ? (N.output += A, U.output += A) : !0 === i.dot ? (N.output += M, U.output += M) : (N.output += F, U.output += F), "*" !== q() && (N.output += C, U.output += C)), J(n)) : (n.output = z, J(n)) : (n.output = ".*?", "bos" !== U.type && "slash" !== U.type || (n.output = F + n.output), J(n));}for (; N.brackets > 0;) {if (!0 === i.strictBrackets) throw new SyntaxError(u("closing", "]"));N.output = r.escapeLast(N.output, "["), X("brackets");}for (; N.parens > 0;) {if (!0 === i.strictBrackets) throw new SyntaxError(u("closing", ")"));N.output = r.escapeLast(N.output, "("), X("parens");}for (; N.braces > 0;) {if (!0 === i.strictBrackets) throw new SyntaxError(u("closing", "}"));N.output = r.escapeLast(N.output, "{"), X("braces");}if (!0 === i.strictSlashes || "star" !== U.type && "bracket" !== U.type || J({ type: "maybe_slash", value: "", output: `${E}?` }), !0 === N.backtrack) {N.output = "";for (const t of N.tokens) N.output += null != t.output ? t.output : t.value, t.suffix && (N.output += t.suffix);}return N;};d.fastpaths = (t, e) => {const i = { ...e },o = "number" == typeof i.maxLength ? Math.min(s, i.maxLength) : s,a = t.length;if (a > o) throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${o}`);t = c[t] || t;const l = r.isWindows(e),{ DOT_LITERAL: h, SLASH_LITERAL: u, ONE_CHAR: d, DOTS_SLASH: p, NO_DOT: f, NO_DOTS: g, NO_DOTS_SLASH: m, STAR: v, START_ANCHOR: y } = n.globChars(l),b = i.dot ? g : f,w = i.dot ? m : f,x = i.capture ? "" : "?:";let S = !0 === i.bash ? ".*?" : v;i.capture && (S = `(${S})`);const E = (t) => !0 === t.noglobstar ? S : `(${x}(?:(?!${y}${t.dot ? p : h}).)*?)`,C = (t) => {switch (t) {case "*":return `${b}${d}${S}`;case ".*":return `${h}${d}${S}`;case "*.*":return `${b}${S}${h}${d}${S}`;case "*/*":return `${b}${S}${u}${d}${w}${S}`;case "**":return b + E(i);case "**/*":return `(?:${b}${E(i)}${u})?${w}${d}${S}`;case "**/*.*":return `(?:${b}${E(i)}${u})?${w}${S}${h}${d}${S}`;case "**/.*":return `(?:${b}${E(i)}${u})?${h}${d}${S}`;default:{const e = /^(.*?)\.(\w+)$/.exec(t);if (!e) return;const i = C(e[1]);if (!i) return;return i + h + e[2];}}},k = r.removePrefix(t, { negated: !1, prefix: "" });let T = C(k);return T && !0 !== i.strictSlashes && (T += `${u}?`), T;}, t.exports = d;}, 1171: (t, e, i) => {"use strict";i.d(e, { hF: () => r.h, lW: () => o, ot: () => a, th: () => s.t, tw: () => l, uW: () => n.uW });var n = i(631),r = i(7530),s = i(457);const o = "https://docs.okviz.com/visuals/licensing",a = "https://docs.okviz.com/visuals/licensing/okviz/entra-activation",l = "https://docs.okviz.com/visuals/licensing/appsource";}, 1180: (t, e, i) => {"use strict";function n(t, e) {return null == t || null == e ? NaN : e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN;}i.d(e, { A: () => n });}, 1195: (t, e, i) => {"use strict";i.d(e, { H5: () => l, KT: () => h, X4: () => u, hP: () => r, ub: () => s, yv: () => o, zD: () => c, zN: () => a });var n = i(7674);function r(t) {return "object" == typeof t && void 0 !== t.value;}function s(t) {return "object" == typeof t && ["FontControl", "MarginPadding"].includes(t.type);}function o(t) {return "object" == typeof t && "Internal" == t.type && void 0 !== t.name;}function a(t) {return !1 !== t.visible;}n.z0.D, n.z0.YS;class l {constructor(t) {Object.assign(this, t);}type = "Internal";name;value;}class c extends n.z0.St {visibleIf;groups;}class h extends n.z0.Tn {visibleIf;}class u extends n.z0.YJ {visibleIf;constructor(t) {super(t), this.visibleIf = t.visibleIf;}}}, 1197: (t, e, i) => {"use strict";i.d(e, { Ay: () => a });var n = i(6957),r = i(6160),s = i(9804),o = i(4709);const a = function t(e) {var i = (0, o.uN)(e);function r(t, e) {var r = i((t = (0, n.Qh)(t)).r, (e = (0, n.Qh)(e)).r),s = i(t.g, e.g),a = i(t.b, e.b),l = (0, o.Ay)(t.opacity, e.opacity);return function (e) {return t.r = r(e), t.g = s(e), t.b = a(e), t.opacity = l(e), t + "";};}return r.gamma = t, r;}(1);function l(t) {return function (e) {var i,r,s = e.length,o = new Array(s),a = new Array(s),l = new Array(s);for (i = 0; i < s; ++i) r = (0, n.Qh)(e[i]), o[i] = r.r || 0, a[i] = r.g || 0, l[i] = r.b || 0;return o = t(o), a = t(a), l = t(l), r.opacity = 1, function (t) {return r.r = o(t), r.g = a(t), r.b = l(t), r + "";};};}l(r.A), l(s.A);}, 1226: (t, e, i) => {"use strict";i.d(e, { P: () => s, i: () => o });var n,r = i(1852);function s(t) {const e = new ("function" == typeof DOMMatrix ? DOMMatrix : WebKitCSSMatrix)(t + "");return e.isIdentity ? r.D : (0, r.A)(e.a, e.b, e.c, e.d, e.e, e.f);}function o(t) {return null == t ? r.D : (n || (n = document.createElementNS("http://www.w3.org/2000/svg", "g")), n.setAttribute("transform", t), (t = n.transform.baseVal.consolidate()) ? (t = t.matrix, (0, r.A)(t.a, t.b, t.c, t.d, t.e, t.f)) : r.D);}}, 1247: (t, e, i) => {"use strict";function n(t = [], e, i) {const n = t;return r(n), e && (n.identityFields = e), i && (n.source = i), n;}function r(t, e) {t.grouped = e ? () => e : () => s(t);}function s(t) {const e = [];let i;for (let n = 0, r = t.length; n < r; n++) {const r = t[n];if (!i || i.identity !== r.identity) {if (i = { values: [] }, r.identity) {i.identity = r.identity;const t = r.source;void 0 !== t.groupName ? i.name = t.groupName : t.displayName && (i.name = t.displayName);}e.push(i);}i.values.push(r);}return e;}i.r(e), i.d(e, { createValueColumns: () => n, groupValues: () => s, setGrouped: () => r });}, 1248: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.stripTagDelimiters = e.deriveClsCompliantName = e.stringifyAsPrettyJSON = e.normalizeFileName = e.escapeStringForRegex = e.constructNameFromList = e.findUniqueName = e.ensureUniqueNames = e.replaceAll = e.repeat = e.getLengthDifference = e.trimWhitespace = e.trimTrailingWhitespace = e.isWhitespace = e.containsWhitespace = e.isNullOrUndefinedOrWhiteSpaceString = e.isNullOrEmpty = e.stringToArrayBuffer = e.normalizeCase = e.containsIgnoreCase = e.contains = e.startsWith = e.startsWithIgnoreCase = e.equalIgnoreCase = e.format = e.endsWith = void 0;var i = new RegExp("[<>]", "g");function n(t, e) {return null != t && -1 !== t.indexOf(e);}function r(t) {return t.toUpperCase();}function s(t) {return null == t || 0 === t.length;}function o(t) {return s(t) || s(t.trim());}function a(t) {return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1");}e.endsWith = function (t, e) {return -1 !== t.indexOf(e, t.length - e.length);}, e.format = function () {for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];var i = t[0];if (o(i)) return i;for (var n = 0; n < t.length - 1; n++) {var r = new RegExp("\\{" + n + "\\}", "gm");i = i.replace(r, t[n + 1]);}return i;}, e.equalIgnoreCase = function (t, e) {return r(t) === r(e);}, e.startsWithIgnoreCase = function (t, e) {var i = r(e);return 0 === r(t).indexOf(i);}, e.startsWith = function (t, e) {return 0 === t.indexOf(e);}, e.contains = n, e.containsIgnoreCase = function (t, e) {return null != t && n(r(t), r(e));}, e.normalizeCase = r, e.stringToArrayBuffer = function (t) {if (s(t)) return null;for (var e = new ArrayBuffer(t.length), i = new Uint8Array(e), n = 0, r = t.length; n < r; n++) i[n] = t.charCodeAt(n);return i;}, e.isNullOrEmpty = s, e.isNullOrUndefinedOrWhiteSpaceString = o, e.containsWhitespace = function (t) {return /\s/.test(t);}, e.isWhitespace = function (t) {return "" === t.trim();}, e.trimTrailingWhitespace = function (t) {return t.replace(/\s+$/, "");}, e.trimWhitespace = function (t) {return t.replace(/^\s+/, "").replace(/\s+$/, "");}, e.getLengthDifference = function (t, e) {return Math.abs(t.length - e.length);}, e.repeat = function (t, e) {for (var i = "", n = 0; n < e; n++) i += t;return i;}, e.replaceAll = function (t, e, i) {if (!e) return t;var n = a(e);return t.replace(new RegExp(n, "gi"), i);}, e.ensureUniqueNames = function (t) {for (var e = {}, i = 0, n = t; i < n.length; i++) e[n[i]] = !1;for (var r = [], s = 0, o = t; s < o.length; s++) {var a = o[s],l = a;if (e[l]) for (var c = 0; void 0 !== e[l];) l = a + "." + ++c;r.push(l), e[l] = !0;}return r;}, e.findUniqueName = function (t, e) {for (var i = 0, n = e; t[n];) n = e + ++i;return n;}, e.constructNameFromList = function (t, e, i) {for (var n, r = [], s = 0, o = 0, a = t; o < a.length; o++) {var l = a[o];if (s + l.length > i && r.length > 0) {n = !0;break;}r.push(l), s += l.length;}var c = " " + e + " ",h = r.join(c);return n && (h += c + "..."), h;}, e.escapeStringForRegex = a, e.normalizeFileName = function (t) {return t.replace(/[\<\>\:"\/\\\|\?*]/g, "");}, e.stringifyAsPrettyJSON = function (t) {return JSON.stringify(t);}, e.deriveClsCompliantName = function (t, e) {var i = t.replace(/^[^A-Za-z]*/g, "").replace(/[ :\.\/\\\-\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000]/g, "_").replace(/[\W]/g, "");return i.length > 0 ? i : e;}, e.stripTagDelimiters = function (t) {return t.replace(i, "");};}, 1261: (t, e, i) => {"use strict";const n = i(3908),r = i(8311),s = i(5580);t.exports = (t, e) => {t = new r(t, e);let i = new n("0.0.0");if (t.test(i)) return i;if (i = new n("0.0.0-0"), t.test(i)) return i;i = null;for (let e = 0; e < t.set.length; ++e) {const r = t.set[e];let o = null;r.forEach((t) => {const e = new n(t.semver.version);switch (t.operator) {case ">":0 === e.prerelease.length ? e.patch++ : e.prerelease.push(0), e.raw = e.format();case "":case ">=":o && !s(e, o) || (o = e);break;case "<":case "<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`);}}), !o || i && !s(i, o) || (i = o);}return i && t.test(i) ? i : null;};}, 1273: (t, e, i) => {"use strict";i.d(e, { A: () => l, U: () => a });var n,r = i(9715),s = function (t, e) {return s = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);}, s(t, e);},o = "function" == typeof Map ? void 0 : (n = 0, function (t) {return t.__DIFF_KEY__ || (t.__DIFF_KEY__ = ++n);});function a(t, e) {return (0, r.U)(t, e, o);}const l = function (t) {function e(e) {return void 0 === e && (e = []), t.call(this, e, o) || this;}return function (t, e) {function i() {this.constructor = t;}s(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());}(e, t), e;}(r.A);}, 1299: (t, e, i) => {"use strict";i.d(e, { $D: () => o, Ay: () => r, B5: () => n, Nz: () => a, YE: () => s, hu: () => c, tl: () => l });const n = 41943040,r = 20971520,s = 20971520,o = 10485760,a = 3145728,l = { website: "https://okviz.com", docsGetStarted: "https://docs.okviz.com/visuals/synoptic-panel/get-started", docsMapEditor: "https://docs.okviz.com/visuals/synoptic-panel/features/map-editor", docsMapManager: "https://docs.okviz.com/visuals/synoptic-panel/features/map-manager", docsMyStorageTerms: "https://docs.okviz.com/visuals/synoptic-panel/legal/my-storage-tos", docsMyStorageTermsEmbed: "https://docs.okviz.com/visuals/synoptic-panel/legal/my-storage-tos-embed", docsIssues: "https://docs.okviz.com/visuals/synoptic-panel/issues/" },c = "By using My Storage, you agree that the Service is provided as is without any warranties, and that you bear all risks associated with uploading and storing your content. We are not liable for any loss of your Maps or other data, and you agree not to seek compensation or take legal action against us in the event of such loss.\n\nYou are solely responsible for maintaining the security of your Edit Key, map-level edit passwords, and encryption keys. If you lose your encryption key, we cannot restore or decrypt your Maps. By accepting these short Terms of Service, you declare that you have read, understood, and agree to the full Terms of Service as provided in the link below.";}, 1303: (t, e, i) => {"use strict";i.d(e, { ZE: () => r.A, m4: () => n.A });var n = i(6502),r = i(1721);}, 1322: (t, e, i) => {"use strict";function* n() {for (var t = this._groups, e = 0, i = t.length; e < i; ++e) for (var n, r = t[e], s = 0, o = r.length; s < o; ++s) (n = r[s]) && (yield n);}i.d(e, { A: () => n });}, 1337: (t, e, i) => {"use strict";i.d(e, { c: () => u });var n = i(246),r = i(7757),s = i(6639),o = i(6599),a = i(2629),l = i(1734),c = i(6615),h = i(3234);class u {config;static Id = "okvizLegend";static Size = { width: 400, height: 450 };dialogHost;result;colorPicker;constructor(t, e) {this.config = e, this.dialogHost = t.host, this.result = {}, this.initColorPicker(), this.draw();}initColorPicker() {this.colorPicker = new o.s(this.config.colorPalette), this.colorPicker.on("change", (t) => {const e = t.id.replace("color-", ""),i = this.config.items.find((t) => (0, h.z4)(t.key) === e);i && (i.color = t.color, this.setResults(this.config.items));});}draw() {document.querySelector(".legend-dialog")?.remove();const t = (0, s.tT)(".legend-dialog", document.body, [(0, s.tT)("header", [(0, s.tT)(".title", "Legend Editor"), (0, s.tT)(".controls", [(0, s.tT)(".ctrl.icon-sort2", { attr: { title: "Sort items" }, events: { click: (t) => this.showSortingMenu(t) } }), (0, s.tT)(".ctrl.icon-reset", { attr: { title: "Reset to default" }, events: { click: () => this.reset() } })])])]),e = (0, s.tT)("ul.legend-items", t, this.config.items?.map((t) => this.drawItem(t))),i = new n.Ay(e, { direction: "vertical", animation: 150, handle: ".handle", dataIdAttr: "data-key", ghostClass: "ghost", dragClass: "dragging", onEnd: () => {const t = i.toArray();this.config.sorting = "custom", this.config.items = t.map((t) => this.config.items.find((e) => e.key === t)), this.setResults(this.config.items, this.config.sorting);} });this.listen();}listen() {document.body.addLiveEventListener("input", ".legend-item .label input", (t, e) => {const i = e.closest(".legend-item");if (!i) return;const n = i.dataset.key,r = this.config.items.find((t) => t.key === n);if (r) {const t = e.value;t !== r.key ? r.label = t : delete r.label, this.setResults(this.config.items);}}), document.body.addLiveEventListener("click", ".ctrl.visibility", (t, e) => {const i = e.closest(".legend-item");if (!i) return;const n = i.dataset.key,r = this.config.items.find((t) => t.key === n);r && (r.hidden = !r.hidden, i.classList.toggle("exclude", r.hidden), this.setResults(this.config.items));});}drawItem(t) {const e = this.colorPicker.dom({ id: `color-${(0, h.z4)(t.key)}`, nullable: !1, color: t.color, colorEnd: t.colorEnd, readonly: t.static }),i = new a.a({ id: `icon-${(0, h.z4)(t.key)}`, value: (0, l.LO)(t.icon), values: r.V });return i.on("change", (t) => {const e = this.config.items.find((t) => (0, h.z4)(t.key) === i.id.replace("icon-", ""));e && (e.icon = (0, l.xH)(t), this.setResults(this.config.items));}), (0, s.tT)("li.legend-item" + (t.hidden ? ".exclude" : ""), { data: { key: t.key } }, [(0, s.tT)(".handle.icon-sort"), (0, s.tT)(".legend-icon", [i.dom()]), (0, s.tT)(".color", [e]), (0, s.tT)(".label", [(0, s.tT)("input", { attr: { type: "text", value: t.label || t.key } })]), (0, s.tT)(".controls", [(0, s.tT)(".ctrl.visibility.icon-visible", { attr: { title: "Toggle Visibility in Legend" } })])]);}showSortingMenu(t) {c.tz.Init("sort-context-menu", { sticky: t.currentTarget, items: [{ label: "Sort", type: c.KG.Header }, { type: c.KG.Radio, label: "Default", checked: !this.config.sorting, onClick: () => this.sort() }, { type: c.KG.Radio, label: "Ascending", checked: "asc" == this.config.sorting, onClick: () => this.sort("asc") }, { type: c.KG.Radio, label: "Descending", checked: "desc" == this.config.sorting, onClick: () => this.sort("desc") }, { type: c.KG.Separator }, { type: c.KG.Radio, label: "Custom", enabled: "custom" == this.config.sorting, checked: "custom" == this.config.sorting }] }).show(t);}sort(t) {this.config.sorting = t, this.config.items = "asc" === t ? this.config.items.sort((t, e) => (t.label || t.key).localeCompare(e.label || e.key)) : "desc" === t ? this.config.items.sort((t, e) => (e.label || e.key).localeCompare(t.label || t.key)) : this.config.items.sort((t, e) => this.config.defaultItems.findIndex((e) => e.key === t.key) - this.config.defaultItems.findIndex((t) => t.key === e.key)), this.setResults(null, t), this.draw();}setResults(t, e) {t && (this.result.items = t), e && (this.result.sorting = e), this.dialogHost.setResult(this.result);}reset() {this.config.sorting = "", this.config.items = this.config.defaultItems, this.setResults([], this.config.sorting), this.draw();}}globalThis.dialogRegistry = globalThis.dialogRegistry || {}, globalThis.dialogRegistry[u.Id] = u;}, 1339: (t, e, i) => {"use strict";i.d(e, { DM: () => d, _A: () => _, az: () => u, pn: () => l });var n = i(365);let r = 0;class s {constructor(t, e, i, n) {this.name = t, this.set = e, this.base = i, this.modified = n, this.id = r++;}toString() {let { name: t } = this;for (let e of this.modified) e.name && (t = `${e.name}(${t})`);return t;}static define(t, e) {let i = "string" == typeof t ? t : "?";if (t instanceof s && (e = t), null == e ? void 0 : e.base) throw new Error("Can not derive from a modified tag");let n = new s(i, [], null, []);if (n.set.push(n), e) for (let t of e.set) n.set.push(t);return n;}static defineModifier(t) {let e = new a(t);return (t) => t.modified.indexOf(e) > -1 ? t : a.get(t.base || t, t.modified.concat(e).sort((t, e) => t.id - e.id));}}let o = 0;class a {constructor(t) {this.name = t, this.instances = [], this.id = o++;}static get(t, e) {if (!e.length) return t;let i = e[0].instances.find((i) => {return i.base == t && (n = e, r = i.modified, n.length == r.length && n.every((t, e) => t == r[e]));var n, r;});if (i) return i;let n = [],r = new s(t.name, n, t, e);for (let t of e) t.instances.push(r);let o = function (t) {let e = [[]];for (let i = 0; i < t.length; i++) for (let n = 0, r = e.length; n < r; n++) e.push(e[n].concat(t[i]));return e.sort((t, e) => e.length - t.length);}(e);for (let e of t.set) if (!e.modified.length) for (let t of o) n.push(a.get(e, t));return r;}}function l(t) {let e = Object.create(null);for (let i in t) {let n = t[i];Array.isArray(n) || (n = [n]);for (let t of i.split(" ")) if (t) {let i = [],r = 2,s = t;for (let e = 0;;) {if ("..." == s && e > 0 && e + 3 == t.length) {r = 1;break;}let n = /^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if (!n) throw new RangeError("Invalid path: " + t);if (i.push("*" == n[0] ? "" : '"' == n[0][0] ? JSON.parse(n[0]) : n[0]), e += n[0].length, e == t.length) break;let o = t[e++];if (e == t.length && "!" == o) {r = 0;break;}if ("/" != o) throw new RangeError("Invalid path: " + t);s = t.slice(e);}let o = i.length - 1,a = i[o];if (!a) throw new RangeError("Invalid path: " + t);let l = new h(n, r, o > 0 ? i.slice(0, o) : null);e[a] = l.sort(e[a]);}}return c.add(e);}const c = new n.uY();class h {constructor(t, e, i, n) {this.tags = t, this.mode = e, this.context = i, this.next = n;}get opaque() {return 0 == this.mode;}get inherit() {return 1 == this.mode;}sort(t) {return !t || t.depth < this.depth ? (this.next = t, this) : (t.next = this.sort(t.next), t);}get depth() {return this.context ? this.context.length : 0;}}function u(t, e) {let i = Object.create(null);for (let e of t) if (Array.isArray(e.tag)) for (let t of e.tag) i[t.id] = e.class;else i[e.tag.id] = e.class;let { scope: n, all: r = null } = e || {};return { style: (t) => {let e = r;for (let n of t) for (let t of n.set) {let n = i[t.id];if (n) {e = e ? e + " " + n : n;break;}}return e;}, scope: n };}function d(t, e, i, n = 0, r = t.length) {let s = new p(n, Array.isArray(e) ? e : [e], i);s.highlightRange(t.cursor(), n, r, "", s.highlighters), s.flush(r);}h.empty = new h([], 2, null);class p {constructor(t, e, i) {this.at = t, this.highlighters = e, this.span = i, this.class = "";}startSpan(t, e) {e != this.class && (this.flush(t), t > this.at && (this.at = t), this.class = e);}flush(t) {t > this.at && this.class && this.span(this.at, t, this.class);}highlightRange(t, e, i, r, s) {let { type: o, from: a, to: l } = t;if (a >= i || l <= e) return;o.isTop && (s = this.highlighters.filter((t) => !t.scope || t.scope(o)));let u = r,d = function (t) {let e = t.type.prop(c);for (; e && e.context && !t.matchContext(e.context);) e = e.next;return e || null;}(t) || h.empty,p = function (t, e) {let i = null;for (let n of t) {let t = n.style(e);t && (i = i ? i + " " + t : t);}return i;}(s, d.tags);if (p && (u && (u += " "), u += p, 1 == d.mode && (r += (r ? " " : "") + p)), this.startSpan(Math.max(e, a), u), d.opaque) return;let f = t.tree && t.tree.prop(n.uY.mounted);if (f && f.overlay) {let n = t.node.enter(f.overlay[0].from + a, 1),o = this.highlighters.filter((t) => !t.scope || t.scope(f.tree.type)),c = t.firstChild();for (let h = 0, d = a;; h++) {let p = h < f.overlay.length ? f.overlay[h] : null,g = p ? p.from + a : l,m = Math.max(e, d),v = Math.min(i, g);if (m < v && c) for (; t.from < v && (this.highlightRange(t, m, v, r, s), this.startSpan(Math.min(v, t.to), u), !(t.to >= g) && t.nextSibling()););if (!p || g > i) break;d = p.to + a, d > e && (this.highlightRange(n.cursor(), Math.max(e, p.from + a), Math.min(i, d), "", o), this.startSpan(Math.min(i, d), u));}c && t.parent();} else if (t.firstChild()) {f && (r = "");do {if (!(t.to <= e)) {if (t.from >= i) break;this.highlightRange(t, e, i, r, s), this.startSpan(Math.min(i, t.to), u);}} while (t.nextSibling());t.parent();}}}const f = s.define,g = f(),m = f(),v = f(m),y = f(m),b = f(),w = f(b),x = f(b),S = f(),E = f(S),C = f(),k = f(),T = f(),A = f(T),M = f(),_ = { comment: g, lineComment: f(g), blockComment: f(g), docComment: f(g), name: m, variableName: f(m), typeName: v, tagName: f(v), propertyName: y, attributeName: f(y), className: f(m), labelName: f(m), namespace: f(m), macroName: f(m), literal: b, string: w, docString: f(w), character: f(w), attributeValue: f(w), number: x, integer: f(x), float: f(x), bool: f(b), regexp: f(b), escape: f(b), color: f(b), url: f(b), keyword: C, self: f(C), null: f(C), atom: f(C), unit: f(C), modifier: f(C), operatorKeyword: f(C), controlKeyword: f(C), definitionKeyword: f(C), moduleKeyword: f(C), operator: k, derefOperator: f(k), arithmeticOperator: f(k), logicOperator: f(k), bitwiseOperator: f(k), compareOperator: f(k), updateOperator: f(k), definitionOperator: f(k), typeOperator: f(k), controlOperator: f(k), punctuation: T, separator: f(T), bracket: A, angleBracket: f(A), squareBracket: f(A), paren: f(A), brace: f(A), content: S, heading: E, heading1: f(E), heading2: f(E), heading3: f(E), heading4: f(E), heading5: f(E), heading6: f(E), contentSeparator: f(S), list: f(S), quote: f(S), emphasis: f(S), strong: f(S), link: f(S), monospace: f(S), strikethrough: f(S), inserted: f(), deleted: f(), changed: f(), invalid: f(), meta: M, documentMeta: f(M), annotation: f(M), processingInstruction: f(M), definition: s.defineModifier("definition"), constant: s.defineModifier("constant"), function: s.defineModifier("function"), standard: s.defineModifier("standard"), local: s.defineModifier("local"), special: s.defineModifier("special") };for (let t in _) {let e = _[t];e instanceof s && (e.name = t);}u([{ tag: _.link, class: "tok-link" }, { tag: _.heading, class: "tok-heading" }, { tag: _.emphasis, class: "tok-emphasis" }, { tag: _.strong, class: "tok-strong" }, { tag: _.keyword, class: "tok-keyword" }, { tag: _.atom, class: "tok-atom" }, { tag: _.bool, class: "tok-bool" }, { tag: _.url, class: "tok-url" }, { tag: _.labelName, class: "tok-labelName" }, { tag: _.inserted, class: "tok-inserted" }, { tag: _.deleted, class: "tok-deleted" }, { tag: _.literal, class: "tok-literal" }, { tag: _.string, class: "tok-string" }, { tag: _.number, class: "tok-number" }, { tag: [_.regexp, _.escape, _.special(_.string)], class: "tok-string2" }, { tag: _.variableName, class: "tok-variableName" }, { tag: _.local(_.variableName), class: "tok-variableName tok-local" }, { tag: _.definition(_.variableName), class: "tok-variableName tok-definition" }, { tag: _.special(_.variableName), class: "tok-variableName2" }, { tag: _.definition(_.propertyName), class: "tok-propertyName tok-definition" }, { tag: _.typeName, class: "tok-typeName" }, { tag: _.namespace, class: "tok-namespace" }, { tag: _.className, class: "tok-className" }, { tag: _.macroName, class: "tok-macroName" }, { tag: _.propertyName, class: "tok-propertyName" }, { tag: _.operator, class: "tok-operator" }, { tag: _.comment, class: "tok-comment" }, { tag: _.meta, class: "tok-meta" }, { tag: _.invalid, class: "tok-invalid" }, { tag: _.punctuation, class: "tok-punctuation" }]);}, 1371: (t, e, i) => {"use strict";i.d(e, { $K: () => Xr, A: () => jn, D4: () => nr, DK: () => mr, Eg: () => Er, HJ: () => or, Lz: () => ln, N$: () => Kn, NZ: () => lt, OP: () => wt, S7: () => Pr, TS: () => bn, Ux: () => Sr, VH: () => Dn, Wu: () => es, Z9: () => re, cU: () => Lr, c_: () => te, dz: () => Jn, ld: () => Tr, w4: () => mn, wJ: () => Dr, xO: () => ot });var n = i(6585),r = i(7417),s = i(2534);let o = "undefined" != typeof navigator ? navigator : { userAgent: "", vendor: "", platform: "" },a = "undefined" != typeof document ? document : { documentElement: { style: {} } };const l = /Edge\/(\d+)/.exec(o.userAgent),c = /MSIE \d/.test(o.userAgent),h = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(o.userAgent),u = !!(c || h || l),d = !u && /gecko\/(\d+)/i.test(o.userAgent),p = !u && /Chrome\/(\d+)/.exec(o.userAgent),f = "webkitFontSmoothing" in a.documentElement.style,g = !u && /Apple Computer/.test(o.vendor),m = g && (/Mobile\/\w+/.test(o.userAgent) || o.maxTouchPoints > 2);var v = { mac: m || /Mac/.test(o.platform), windows: /Win/.test(o.platform), linux: /Linux|X11/.test(o.platform), ie: u, ie_version: c ? a.documentMode || 6 : h ? +h[1] : l ? +l[1] : 0, gecko: d, gecko_version: d ? +(/Firefox\/(\d+)/.exec(o.userAgent) || [0, 0])[1] : 0, chrome: !!p, chrome_version: p ? +p[1] : 0, ios: m, android: /Android\b/.test(o.userAgent), webkit: f, webkit_version: f ? +(/\bAppleWebKit\/(\d+)/.exec(o.userAgent) || [0, 0])[1] : 0, safari: g, safari_version: g ? +(/\bVersion\/(\d+(\.\d+)?)/.exec(o.userAgent) || [0, 0])[1] : 0, tabSize: null != a.documentElement.style.tabSize ? "tab-size" : "-moz-tab-size" };function y(t) {let e;return e = 11 == t.nodeType ? t.getSelection ? t : t.ownerDocument : t, e.getSelection();}function b(t, e) {return !!e && (t == e || t.contains(1 != e.nodeType ? e.parentNode : e));}function w(t, e) {if (!e.anchorNode) return !1;try {return b(t, e.anchorNode);} catch (t) {return !1;}}function x(t) {return 3 == t.nodeType ? F(t, 0, t.nodeValue.length).getClientRects() : 1 == t.nodeType ? t.getClientRects() : [];}function S(t, e, i, n) {return !!i && (k(t, e, i, n, -1) || k(t, e, i, n, 1));}function E(t) {for (var e = 0;; e++) if (!(t = t.previousSibling)) return e;}function C(t) {return 1 == t.nodeType && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName);}function k(t, e, i, n, r) {for (;;) {if (t == i && e == n) return !0;if (e == (r < 0 ? 0 : T(t))) {if ("DIV" == t.nodeName) return !1;let i = t.parentNode;if (!i || 1 != i.nodeType) return !1;e = E(t) + (r < 0 ? 0 : 1), t = i;} else {if (1 != t.nodeType) return !1;if (1 == (t = t.childNodes[e + (r < 0 ? -1 : 0)]).nodeType && "false" == t.contentEditable) return !1;e = r < 0 ? T(t) : 0;}}}function T(t) {return 3 == t.nodeType ? t.nodeValue.length : t.childNodes.length;}function A(t, e) {let i = e ? t.left : t.right;return { left: i, right: i, top: t.top, bottom: t.bottom };}function M(t) {let e = t.visualViewport;return e ? { left: 0, right: e.width, top: 0, bottom: e.height } : { left: 0, right: t.innerWidth, top: 0, bottom: t.innerHeight };}function _(t, e) {let i = e.width / t.offsetWidth,n = e.height / t.offsetHeight;return (i > .995 && i < 1.005 || !isFinite(i) || Math.abs(e.width - t.offsetWidth) < 1) && (i = 1), (n > .995 && n < 1.005 || !isFinite(n) || Math.abs(e.height - t.offsetHeight) < 1) && (n = 1), { scaleX: i, scaleY: n };}class P {constructor() {this.anchorNode = null, this.anchorOffset = 0, this.focusNode = null, this.focusOffset = 0;}eq(t) {return this.anchorNode == t.anchorNode && this.anchorOffset == t.anchorOffset && this.focusNode == t.focusNode && this.focusOffset == t.focusOffset;}setRange(t) {let { anchorNode: e, focusNode: i } = t;this.set(e, Math.min(t.anchorOffset, e ? T(e) : 0), i, Math.min(t.focusOffset, i ? T(i) : 0));}set(t, e, i, n) {this.anchorNode = t, this.anchorOffset = e, this.focusNode = i, this.focusOffset = n;}}let D,O = null;function I(t) {if (t.setActive) return t.setActive();if (O) return t.focus(O);let e = [];for (let i = t; i && (e.push(i, i.scrollTop, i.scrollLeft), i != i.ownerDocument); i = i.parentNode);if (t.focus(null == O ? { get preventScroll() {return O = { preventScroll: !0 }, !0;} } : void 0), !O) {O = !1;for (let t = 0; t < e.length;) {let i = e[t++],n = e[t++],r = e[t++];i.scrollTop != n && (i.scrollTop = n), i.scrollLeft != r && (i.scrollLeft = r);}}}function F(t, e, i = e) {let n = D || (D = document.createRange());return n.setEnd(t, i), n.setStart(t, e), n;}function R(t, e, i, n) {let r = { key: e, code: e, keyCode: i, which: i, cancelable: !0 };n && ({ altKey: r.altKey, ctrlKey: r.ctrlKey, shiftKey: r.shiftKey, metaKey: r.metaKey } = n);let s = new KeyboardEvent("keydown", r);s.synthetic = !0, t.dispatchEvent(s);let o = new KeyboardEvent("keyup", r);return o.synthetic = !0, t.dispatchEvent(o), s.defaultPrevented || o.defaultPrevented;}function L(t) {for (; t.attributes.length;) t.removeAttributeNode(t.attributes[0]);}function N(t) {return t.scrollTop > Math.max(1, t.scrollHeight - t.clientHeight - 4);}function V(t, e) {for (let i = t, n = e;;) {if (3 == i.nodeType && n > 0) return { node: i, offset: n };if (1 == i.nodeType && n > 0) {if ("false" == i.contentEditable) return null;i = i.childNodes[n - 1], n = T(i);} else {if (!i.parentNode || C(i)) return null;n = E(i), i = i.parentNode;}}}function B(t, e) {for (let i = t, n = e;;) {if (3 == i.nodeType && n < i.nodeValue.length) return { node: i, offset: n };if (1 == i.nodeType && n < i.childNodes.length) {if ("false" == i.contentEditable) return null;i = i.childNodes[n], n = 0;} else {if (!i.parentNode || C(i)) return null;n = E(i) + 1, i = i.parentNode;}}}v.safari && v.safari_version >= 26 && (O = !1);class j {constructor(t, e, i = !0) {this.node = t, this.offset = e, this.precise = i;}static before(t, e) {return new j(t.parentNode, E(t), e);}static after(t, e) {return new j(t.parentNode, E(t) + 1, e);}}const z = [];class U {constructor() {this.parent = null, this.dom = null, this.flags = 2;}get overrideDOMText() {return null;}get posAtStart() {return this.parent ? this.parent.posBefore(this) : 0;}get posAtEnd() {return this.posAtStart + this.length;}posBefore(t) {let e = this.posAtStart;for (let i of this.children) {if (i == t) return e;e += i.length + i.breakAfter;}throw new RangeError("Invalid child in posBefore");}posAfter(t) {return this.posBefore(t) + t.length;}sync(t, e) {if (2 & this.flags) {let i,n = this.dom,r = null;for (let s of this.children) {if (7 & s.flags) {if (!s.dom && (i = r ? r.nextSibling : n.firstChild)) {let t = U.get(i);(!t || !t.parent && t.canReuseDOM(s)) && s.reuseDOM(i);}s.sync(t, e), s.flags &= -8;}if (i = r ? r.nextSibling : n.firstChild, e && !e.written && e.node == n && i != s.dom && (e.written = !0), s.dom.parentNode == n) for (; i && i != s.dom;) i = H(i);else n.insertBefore(s.dom, i);r = s.dom;}for (i = r ? r.nextSibling : n.firstChild, i && e && e.node == n && (e.written = !0); i;) i = H(i);} else if (1 & this.flags) for (let i of this.children) 7 & i.flags && (i.sync(t, e), i.flags &= -8);}reuseDOM(t) {}localPosFromDOM(t, e) {let i;if (t == this.dom) i = this.dom.childNodes[e];else {let n = 0 == T(t) ? 0 : 0 == e ? -1 : 1;for (;;) {let e = t.parentNode;if (e == this.dom) break;0 == n && e.firstChild != e.lastChild && (n = t == e.firstChild ? -1 : 1), t = e;}i = n < 0 ? t : t.nextSibling;}if (i == this.dom.firstChild) return 0;for (; i && !U.get(i);) i = i.nextSibling;if (!i) return this.length;for (let t = 0, e = 0;; t++) {let n = this.children[t];if (n.dom == i) return e;e += n.length + n.breakAfter;}}domBoundsAround(t, e, i = 0) {let n = -1,r = -1,s = -1,o = -1;for (let a = 0, l = i, c = i; a < this.children.length; a++) {let i = this.children[a],h = l + i.length;if (l < t && h > e) return i.domBoundsAround(t, e, l);if (h >= t && -1 == n && (n = a, r = l), l > e && i.dom.parentNode == this.dom) {s = a, o = c;break;}c = h, l = h + i.breakAfter;}return { from: r, to: o < 0 ? i + this.length : o, startDOM: (n ? this.children[n - 1].dom.nextSibling : null) || this.dom.firstChild, endDOM: s < this.children.length && s >= 0 ? this.children[s].dom : null };}markDirty(t = !1) {this.flags |= 2, this.markParentsDirty(t);}markParentsDirty(t) {for (let e = this.parent; e; e = e.parent) {if (t && (e.flags |= 2), 1 & e.flags) return;e.flags |= 1, t = !1;}}setParent(t) {this.parent != t && (this.parent = t, 7 & this.flags && this.markParentsDirty(!0));}setDOM(t) {this.dom != t && (this.dom && (this.dom.cmView = null), this.dom = t, t.cmView = this);}get rootView() {for (let t = this;;) {let e = t.parent;if (!e) return t;t = e;}}replaceChildren(t, e, i = z) {this.markDirty();for (let n = t; n < e; n++) {let t = this.children[n];t.parent == this && i.indexOf(t) < 0 && t.destroy();}i.length < 250 ? this.children.splice(t, e - t, ...i) : this.children = [].concat(this.children.slice(0, t), i, this.children.slice(e));for (let t = 0; t < i.length; t++) i[t].setParent(this);}ignoreMutation(t) {return !1;}ignoreEvent(t) {return !1;}childCursor(t = this.length) {return new q(this.children, t, this.children.length);}childPos(t, e = 1) {return this.childCursor().findPos(t, e);}toString() {let t = this.constructor.name.replace("View", "");return t + (this.children.length ? "(" + this.children.join() + ")" : this.length ? "[" + ("Text" == t ? this.text : this.length) + "]" : "") + (this.breakAfter ? "#" : "");}static get(t) {return t.cmView;}get isEditable() {return !0;}get isWidget() {return !1;}get isHidden() {return !1;}merge(t, e, i, n, r, s) {return !1;}become(t) {return !1;}canReuseDOM(t) {return t.constructor == this.constructor && !(8 & (this.flags | t.flags));}getSide() {return 0;}destroy() {for (let t of this.children) t.parent == this && t.destroy();this.parent = null;}}function H(t) {let e = t.nextSibling;return t.parentNode.removeChild(t), e;}U.prototype.breakAfter = 0;class q {constructor(t, e, i) {this.children = t, this.pos = e, this.i = i, this.off = 0;}findPos(t, e = 1) {for (;;) {if (t > this.pos || t == this.pos && (e > 0 || 0 == this.i || this.children[this.i - 1].breakAfter)) return this.off = t - this.pos, this;let i = this.children[--this.i];this.pos -= i.length + i.breakAfter;}}}function $(t, e, i, n, r, s, o, a, l) {let { children: c } = t,h = c.length ? c[e] : null,u = s.length ? s[s.length - 1] : null,d = u ? u.breakAfter : o;if (!(e == n && h && !o && !d && s.length < 2 && h.merge(i, r, s.length ? u : null, 0 == i, a, l))) {if (n < c.length) {let t = c[n];t && (r < t.length || t.breakAfter && (null == u ? void 0 : u.breakAfter)) ? (e == n && (t = t.split(r), r = 0), !d && u && t.merge(0, r, u, !0, 0, l) ? s[s.length - 1] = t : ((r || t.children.length && !t.children[0].length) && t.merge(0, r, null, !1, 0, l), s.push(t))) : (null == t ? void 0 : t.breakAfter) && (u ? u.breakAfter = 1 : o = 1), n++;}for (h && (h.breakAfter = o, i > 0 && (!o && s.length && h.merge(i, h.length, s[0], !1, a, 0) ? h.breakAfter = s.shift().breakAfter : (i < h.length || h.children.length && 0 == h.children[h.children.length - 1].length) && h.merge(i, h.length, null, !1, a, 0), e++)); e < n && s.length;) if (c[n - 1].become(s[s.length - 1])) n--, s.pop(), l = s.length ? 0 : a;else {if (!c[e].become(s[0])) break;e++, s.shift(), a = s.length ? 0 : l;}!s.length && e && n < c.length && !c[e - 1].breakAfter && c[n].merge(0, 0, c[e - 1], !1, a, l) && e--, (e < n || s.length) && t.replaceChildren(e, n, s);}}function G(t, e, i, n, r, s) {let o = t.childCursor(),{ i: a, off: l } = o.findPos(i, 1),{ i: c, off: h } = o.findPos(e, -1),u = e - i;for (let t of n) u += t.length;t.length += u, $(t, c, h, a, l, n, 0, r, s);}class W extends U {constructor(t) {super(), this.text = t;}get length() {return this.text.length;}createDOM(t) {this.setDOM(t || document.createTextNode(this.text));}sync(t, e) {this.dom || this.createDOM(), this.dom.nodeValue != this.text && (e && e.node == this.dom && (e.written = !0), this.dom.nodeValue = this.text);}reuseDOM(t) {3 == t.nodeType && this.createDOM(t);}merge(t, e, i) {return !(8 & this.flags || i && (!(i instanceof W) || this.length - (e - t) + i.length > 256 || 8 & i.flags) || (this.text = this.text.slice(0, t) + (i ? i.text : "") + this.text.slice(e), this.markDirty(), 0));}split(t) {let e = new W(this.text.slice(t));return this.text = this.text.slice(0, t), this.markDirty(), e.flags |= 8 & this.flags, e;}localPosFromDOM(t, e) {return t == this.dom ? e : e ? this.text.length : 0;}domAtPos(t) {return new j(this.dom, t);}domBoundsAround(t, e, i) {return { from: i, to: i + this.length, startDOM: this.dom, endDOM: this.dom.nextSibling };}coordsAt(t, e) {return function (t, e, i) {let n = t.nodeValue.length;e > n && (e = n);let r = e,s = e,o = 0;0 == e && i < 0 || e == n && i >= 0 ? v.chrome || v.gecko || (e ? (r--, o = 1) : s < n && (s++, o = -1)) : i < 0 ? r-- : s < n && s++;let a = F(t, r, s).getClientRects();if (!a.length) return null;let l = a[(o ? o < 0 : i >= 0) ? 0 : a.length - 1];return v.safari && !o && 0 == l.width && (l = Array.prototype.find.call(a, (t) => t.width) || l), o ? A(l, o < 0) : l || null;}(this.dom, t, e);}}class K extends U {constructor(t, e = [], i = 0) {super(), this.mark = t, this.children = e, this.length = i;for (let t of e) t.setParent(this);}setAttrs(t) {if (L(t), this.mark.class && (t.className = this.mark.class), this.mark.attrs) for (let e in this.mark.attrs) t.setAttribute(e, this.mark.attrs[e]);return t;}canReuseDOM(t) {return super.canReuseDOM(t) && !(8 & (this.flags | t.flags));}reuseDOM(t) {t.nodeName == this.mark.tagName.toUpperCase() && (this.setDOM(t), this.flags |= 6);}sync(t, e) {this.dom ? 4 & this.flags && this.setAttrs(this.dom) : this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))), super.sync(t, e);}merge(t, e, i, n, r, s) {return !(i && (!(i instanceof K && i.mark.eq(this.mark)) || t && r <= 0 || e < this.length && s <= 0) || (G(this, t, e, i ? i.children.slice() : [], r - 1, s - 1), this.markDirty(), 0));}split(t) {let e = [],i = 0,n = -1,r = 0;for (let s of this.children) {let o = i + s.length;o > t && e.push(i < t ? s.split(t - i) : s), n < 0 && i >= t && (n = r), i = o, r++;}let s = this.length - t;return this.length = t, n > -1 && (this.children.length = n, this.markDirty()), new K(this.mark, e, s);}domAtPos(t) {return X(this, t);}coordsAt(t, e) {return Q(this, t, e);}}class Z extends U {static create(t, e, i) {return new Z(t, e, i);}constructor(t, e, i) {super(), this.widget = t, this.length = e, this.side = i, this.prevWidget = null;}split(t) {let e = Z.create(this.widget, this.length - t, this.side);return this.length -= t, e;}sync(t) {this.dom && this.widget.updateDOM(this.dom, t) || (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(t)), this.widget.editable || (this.dom.contentEditable = "false"));}getSide() {return this.side;}merge(t, e, i, n, r, s) {return !(i && (!(i instanceof Z && this.widget.compare(i.widget)) || t > 0 && r <= 0 || e < this.length && s <= 0) || (this.length = t + (i ? i.length : 0) + (this.length - e), 0));}become(t) {return t instanceof Z && t.side == this.side && this.widget.constructor == t.widget.constructor && (this.widget.compare(t.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = t.widget, this.length = t.length, !0);}ignoreMutation() {return !0;}ignoreEvent(t) {return this.widget.ignoreEvent(t);}get overrideDOMText() {if (0 == this.length) return n.EY.empty;let t = this;for (; t.parent;) t = t.parent;let { view: e } = t,i = e && e.state.doc,r = this.posAtStart;return i ? i.slice(r, r + this.length) : n.EY.empty;}domAtPos(t) {return (this.length ? 0 == t : this.side > 0) ? j.before(this.dom) : j.after(this.dom, t == this.length);}domBoundsAround() {return null;}coordsAt(t, e) {let i = this.widget.coordsAt(this.dom, t, e);if (i) return i;let n = this.dom.getClientRects(),r = null;if (!n.length) return null;let s = this.side ? this.side < 0 : t > 0;for (let e = s ? n.length - 1 : 0; r = n[e], !(t > 0 ? 0 == e : e == n.length - 1 || r.top < r.bottom); e += s ? -1 : 1);return A(r, !s);}get isEditable() {return !1;}get isWidget() {return !0;}get isHidden() {return this.widget.isHidden;}destroy() {super.destroy(), this.dom && this.widget.destroy(this.dom);}}class Y extends U {constructor(t) {super(), this.side = t;}get length() {return 0;}merge() {return !1;}become(t) {return t instanceof Y && t.side == this.side;}split() {return new Y(this.side);}sync() {if (!this.dom) {let t = document.createElement("img");t.className = "cm-widgetBuffer", t.setAttribute("aria-hidden", "true"), this.setDOM(t);}}getSide() {return this.side;}domAtPos(t) {return this.side > 0 ? j.before(this.dom) : j.after(this.dom);}localPosFromDOM() {return 0;}domBoundsAround() {return null;}coordsAt(t) {return this.dom.getBoundingClientRect();}get overrideDOMText() {return n.EY.empty;}get isHidden() {return !0;}}function X(t, e) {let i = t.dom,{ children: n } = t,r = 0;for (let t = 0; r < n.length; r++) {let s = n[r],o = t + s.length;if (!(o == t && s.getSide() <= 0)) {if (e > t && e < o && s.dom.parentNode == i) return s.domAtPos(e - t);if (e <= t) break;t = o;}}for (let t = r; t > 0; t--) {let e = n[t - 1];if (e.dom.parentNode == i) return e.domAtPos(e.length);}for (let t = r; t < n.length; t++) {let e = n[t];if (e.dom.parentNode == i) return e.domAtPos(0);}return new j(i, 0);}function J(t, e, i) {let n,{ children: r } = t;i > 0 && e instanceof K && r.length && (n = r[r.length - 1]) instanceof K && n.mark.eq(e.mark) ? J(n, e.children[0], i - 1) : (r.push(e), e.setParent(t)), t.length += e.length;}function Q(t, e, i) {let n = null,r = -1,s = null,o = -1;!function t(e, a) {for (let l = 0, c = 0; l < e.children.length && c <= a; l++) {let h = e.children[l],u = c + h.length;u >= a && (h.children.length ? t(h, a - c) : (!s || s.isHidden && (i > 0 || tt(s, h))) && (u > a || c == u && h.getSide() > 0) ? (s = h, o = a - c) : (c < a || c == u && h.getSide() < 0 && !h.isHidden) && (n = h, r = a - c)), c = u;}}(t, e);let a = (i < 0 ? n : s) || n || s;return a ? a.coordsAt(Math.max(0, a == n ? r : o), i) : function (t) {let e = t.dom.lastChild;if (!e) return t.dom.getBoundingClientRect();let i = x(e);return i[i.length - 1] || null;}(t);}function tt(t, e) {let i = t.coordsAt(0, 1),n = e.coordsAt(0, 1);return i && n && n.top < i.bottom;}function et(t, e) {for (let i in t) "class" == i && e.class ? e.class += " " + t.class : "style" == i && e.style ? e.style += ";" + t.style : e[i] = t[i];return e;}W.prototype.children = Z.prototype.children = Y.prototype.children = z;const it = Object.create(null);function nt(t, e, i) {if (t == e) return !0;t || (t = it), e || (e = it);let n = Object.keys(t),r = Object.keys(e);if (n.length - (i && n.indexOf(i) > -1 ? 1 : 0) != r.length - (i && r.indexOf(i) > -1 ? 1 : 0)) return !1;for (let s of n) if (s != i && (-1 == r.indexOf(s) || t[s] !== e[s])) return !1;return !0;}function rt(t, e, i) {let n = !1;if (e) for (let r in e) i && r in i || (n = !0, "style" == r ? t.style.cssText = "" : t.removeAttribute(r));if (i) for (let r in i) e && e[r] == i[r] || (n = !0, "style" == r ? t.style.cssText = i[r] : t.setAttribute(r, i[r]));return n;}function st(t) {let e = Object.create(null);for (let i = 0; i < t.attributes.length; i++) {let n = t.attributes[i];e[n.name] = n.value;}return e;}class ot {eq(t) {return !1;}updateDOM(t, e) {return !1;}compare(t) {return this == t || this.constructor == t.constructor && this.eq(t);}get estimatedHeight() {return -1;}get lineBreaks() {return 0;}ignoreEvent(t) {return !0;}coordsAt(t, e, i) {return null;}get isHidden() {return !1;}get editable() {return !1;}destroy(t) {}}var at = function (t) {return t[t.Text = 0] = "Text", t[t.WidgetBefore = 1] = "WidgetBefore", t[t.WidgetAfter = 2] = "WidgetAfter", t[t.WidgetRange = 3] = "WidgetRange", t;}(at || (at = {}));class lt extends n.FB {constructor(t, e, i, n) {super(), this.startSide = t, this.endSide = e, this.widget = i, this.spec = n;}get heightRelevant() {return !1;}static mark(t) {return new ct(t);}static widget(t) {let e = Math.max(-1e4, Math.min(1e4, t.side || 0)),i = !!t.block;return e += i && !t.inlineOrder ? e > 0 ? 3e8 : -4e8 : e > 0 ? 1e8 : -1e8, new ut(t, e, e, i, t.widget || null, !1);}static replace(t) {let e,i,n = !!t.block;if (t.isBlockGap) e = -5e8, i = 4e8;else {let { start: r, end: s } = dt(t, n);e = (r ? n ? -3e8 : -1 : 5e8) - 1, i = 1 + (s ? n ? 2e8 : 1 : -6e8);}return new ut(t, e, i, n, t.widget || null, !0);}static line(t) {return new ht(t);}static set(t, e = !1) {return n.om.of(t, e);}hasHeight() {return !!this.widget && this.widget.estimatedHeight > -1;}}lt.none = n.om.empty;class ct extends lt {constructor(t) {let { start: e, end: i } = dt(t);super(e ? -1 : 5e8, i ? 1 : -6e8, null, t), this.tagName = t.tagName || "span", this.class = t.class || "", this.attrs = t.attributes || null;}eq(t) {var e, i;return this == t || t instanceof ct && this.tagName == t.tagName && (this.class || (null === (e = this.attrs) || void 0 === e ? void 0 : e.class)) == (t.class || (null === (i = t.attrs) || void 0 === i ? void 0 : i.class)) && nt(this.attrs, t.attrs, "class");}range(t, e = t) {if (t >= e) throw new RangeError("Mark decorations may not be empty");return super.range(t, e);}}ct.prototype.point = !1;class ht extends lt {constructor(t) {super(-2e8, -2e8, null, t);}eq(t) {return t instanceof ht && this.spec.class == t.spec.class && nt(this.spec.attributes, t.spec.attributes);}range(t, e = t) {if (e != t) throw new RangeError("Line decoration ranges must be zero-length");return super.range(t, e);}}ht.prototype.mapMode = n.iR.TrackBefore, ht.prototype.point = !0;class ut extends lt {constructor(t, e, i, r, s, o) {super(e, i, s, t), this.block = r, this.isReplace = o, this.mapMode = r ? e <= 0 ? n.iR.TrackBefore : n.iR.TrackAfter : n.iR.TrackDel;}get type() {return this.startSide != this.endSide ? at.WidgetRange : this.startSide <= 0 ? at.WidgetBefore : at.WidgetAfter;}get heightRelevant() {return this.block || !!this.widget && (this.widget.estimatedHeight >= 5 || this.widget.lineBreaks > 0);}eq(t) {return t instanceof ut && ((e = this.widget) == (i = t.widget) || !!(e && i && e.compare(i))) && this.block == t.block && this.startSide == t.startSide && this.endSide == t.endSide;var e, i;}range(t, e = t) {if (this.isReplace && (t > e || t == e && this.startSide > 0 && this.endSide <= 0)) throw new RangeError("Invalid range for replacement decoration");if (!this.isReplace && e != t) throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t, e);}}function dt(t, e = !1) {let { inclusiveStart: i, inclusiveEnd: n } = t;return null == i && (i = t.inclusive), null == n && (n = t.inclusive), { start: null != i ? i : e, end: null != n ? n : e };}function pt(t, e, i, n = 0) {let r = i.length - 1;r >= 0 && i[r] + n >= t ? i[r] = Math.max(i[r], e) : i.push(t, e);}ut.prototype.point = !0;class ft extends U {constructor() {super(...arguments), this.children = [], this.length = 0, this.prevAttrs = void 0, this.attrs = null, this.breakAfter = 0;}merge(t, e, i, n, r, s) {if (i) {if (!(i instanceof ft)) return !1;this.dom || i.transferDOM(this);}return n && this.setDeco(i ? i.attrs : null), G(this, t, e, i ? i.children.slice() : [], r, s), !0;}split(t) {let e = new ft();if (e.breakAfter = this.breakAfter, 0 == this.length) return e;let { i, off: n } = this.childPos(t);n && (e.append(this.children[i].split(n), 0), this.children[i].merge(n, this.children[i].length, null, !1, 0, 0), i++);for (let t = i; t < this.children.length; t++) e.append(this.children[t], 0);for (; i > 0 && 0 == this.children[i - 1].length;) this.children[--i].destroy();return this.children.length = i, this.markDirty(), this.length = t, e;}transferDOM(t) {this.dom && (this.markDirty(), t.setDOM(this.dom), t.prevAttrs = void 0 === this.prevAttrs ? this.attrs : this.prevAttrs, this.prevAttrs = void 0, this.dom = null);}setDeco(t) {nt(this.attrs, t) || (this.dom && (this.prevAttrs = this.attrs, this.markDirty()), this.attrs = t);}append(t, e) {J(this, t, e);}addLineDeco(t) {let e = t.spec.attributes,i = t.spec.class;e && (this.attrs = et(e, this.attrs || {})), i && (this.attrs = et({ class: i }, this.attrs || {}));}domAtPos(t) {return X(this, t);}reuseDOM(t) {"DIV" == t.nodeName && (this.setDOM(t), this.flags |= 6);}sync(t, e) {var i;this.dom ? 4 & this.flags && (L(this.dom), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0) : (this.setDOM(document.createElement("div")), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0), void 0 !== this.prevAttrs && (rt(this.dom, this.prevAttrs, this.attrs), this.dom.classList.add("cm-line"), this.prevAttrs = void 0), super.sync(t, e);let n = this.dom.lastChild;for (; n && U.get(n) instanceof K;) n = n.lastChild;if (!(n && this.length && ("BR" == n.nodeName || 0 != (null === (i = U.get(n)) || void 0 === i ? void 0 : i.isEditable) || v.ios && this.children.some((t) => t instanceof W)))) {let t = document.createElement("BR");t.cmIgnore = !0, this.dom.appendChild(t);}}measureTextSize() {if (0 == this.children.length || this.length > 20) return null;let t,e = 0;for (let i of this.children) {if (!(i instanceof W) || /[^ -~]/.test(i.text)) return null;let n = x(i.dom);if (1 != n.length) return null;e += n[0].width, t = n[0].height;}return e ? { lineHeight: this.dom.getBoundingClientRect().height, charWidth: e / this.length, textHeight: t } : null;}coordsAt(t, e) {let i = Q(this, t, e);if (!this.children.length && i && this.parent) {let { heightOracle: t } = this.parent.view.viewState,e = i.bottom - i.top;if (Math.abs(e - t.lineHeight) < 2 && t.textHeight < e) {let n = (e - t.textHeight) / 2;return { top: i.top + n, bottom: i.bottom - n, left: i.left, right: i.left };}}return i;}become(t) {return t instanceof ft && 0 == this.children.length && 0 == t.children.length && nt(this.attrs, t.attrs) && this.breakAfter == t.breakAfter;}covers() {return !0;}static find(t, e) {for (let i = 0, n = 0; i < t.children.length; i++) {let r = t.children[i],s = n + r.length;if (s >= e) {if (r instanceof ft) return r;if (s > e) break;}n = s + r.breakAfter;}return null;}}class gt extends U {constructor(t, e, i) {super(), this.widget = t, this.length = e, this.deco = i, this.breakAfter = 0, this.prevWidget = null;}merge(t, e, i, n, r, s) {return !(i && (!(i instanceof gt && this.widget.compare(i.widget)) || t > 0 && r <= 0 || e < this.length && s <= 0) || (this.length = t + (i ? i.length : 0) + (this.length - e), 0));}domAtPos(t) {return 0 == t ? j.before(this.dom) : j.after(this.dom, t == this.length);}split(t) {let e = this.length - t;this.length = t;let i = new gt(this.widget, e, this.deco);return i.breakAfter = this.breakAfter, i;}get children() {return z;}sync(t) {this.dom && this.widget.updateDOM(this.dom, t) || (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(t)), this.widget.editable || (this.dom.contentEditable = "false"));}get overrideDOMText() {return this.parent ? this.parent.view.state.doc.slice(this.posAtStart, this.posAtEnd) : n.EY.empty;}domBoundsAround() {return null;}become(t) {return t instanceof gt && t.widget.constructor == this.widget.constructor && (t.widget.compare(this.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = t.widget, this.length = t.length, this.deco = t.deco, this.breakAfter = t.breakAfter, !0);}ignoreMutation() {return !0;}ignoreEvent(t) {return this.widget.ignoreEvent(t);}get isEditable() {return !1;}get isWidget() {return !0;}coordsAt(t, e) {return this.widget.coordsAt(this.dom, t, e) || (this.widget instanceof mt ? null : A(this.dom.getBoundingClientRect(), this.length ? 0 == t : e <= 0));}destroy() {super.destroy(), this.dom && this.widget.destroy(this.dom);}covers(t) {let { startSide: e, endSide: i } = this.deco;return e != i && (t < 0 ? e < 0 : i > 0);}}class mt extends ot {constructor(t) {super(), this.height = t;}toDOM() {let t = document.createElement("div");return t.className = "cm-gap", this.updateDOM(t), t;}eq(t) {return t.height == this.height;}updateDOM(t) {return t.style.height = this.height + "px", !0;}get editable() {return !0;}get estimatedHeight() {return this.height;}ignoreEvent() {return !1;}}class vt {constructor(t, e, i, n) {this.doc = t, this.pos = e, this.end = i, this.disallowBlockEffectsFor = n, this.content = [], this.curLine = null, this.breakAtStart = 0, this.pendingBuffer = 0, this.bufferMarks = [], this.atCursorPos = !0, this.openStart = -1, this.openEnd = -1, this.text = "", this.textOff = 0, this.cursor = t.iter(), this.skip = e;}posCovered() {if (0 == this.content.length) return !this.breakAtStart && this.doc.lineAt(this.pos).from != this.pos;let t = this.content[this.content.length - 1];return !(t.breakAfter || t instanceof gt && t.deco.endSide < 0);}getLine() {return this.curLine || (this.content.push(this.curLine = new ft()), this.atCursorPos = !0), this.curLine;}flushBuffer(t = this.bufferMarks) {this.pendingBuffer && (this.curLine.append(yt(new Y(-1), t), t.length), this.pendingBuffer = 0);}addBlockWidget(t) {this.flushBuffer(), this.curLine = null, this.content.push(t);}finish(t) {this.pendingBuffer && t <= this.bufferMarks.length ? this.flushBuffer() : this.pendingBuffer = 0, this.posCovered() || t && this.content.length && this.content[this.content.length - 1] instanceof gt || this.getLine();}buildText(t, e, i) {for (; t > 0;) {if (this.textOff == this.text.length) {let { value: e, lineBreak: i, done: n } = this.cursor.next(this.skip);if (this.skip = 0, n) throw new Error("Ran out of text content when drawing inline views");if (i) {this.posCovered() || this.getLine(), this.content.length ? this.content[this.content.length - 1].breakAfter = 1 : this.breakAtStart = 1, this.flushBuffer(), this.curLine = null, this.atCursorPos = !0, t--;continue;}this.text = e, this.textOff = 0;}let n = Math.min(this.text.length - this.textOff, t),r = Math.min(n, 512);this.flushBuffer(e.slice(e.length - i)), this.getLine().append(yt(new W(this.text.slice(this.textOff, this.textOff + r)), e), i), this.atCursorPos = !0, this.textOff += r, t -= r, i = n <= r ? 0 : e.length;}}span(t, e, i, n) {this.buildText(e - t, i, n), this.pos = e, this.openStart < 0 && (this.openStart = n);}point(t, e, i, n, r, s) {if (this.disallowBlockEffectsFor[s] && i instanceof ut) {if (i.block) throw new RangeError("Block decorations may not be specified via plugins");if (e > this.doc.lineAt(this.pos).to) throw new RangeError("Decorations that replace line breaks may not be specified via plugins");}let o = e - t;if (i instanceof ut) {if (i.block) i.startSide > 0 && !this.posCovered() && this.getLine(), this.addBlockWidget(new gt(i.widget || bt.block, o, i));else {let s = Z.create(i.widget || bt.inline, o, o ? 0 : i.startSide),a = this.atCursorPos && !s.isEditable && r <= n.length && (t < e || i.startSide > 0),l = !s.isEditable && (t < e || r > n.length || i.startSide <= 0),c = this.getLine();2 != this.pendingBuffer || a || s.isEditable || (this.pendingBuffer = 0), this.flushBuffer(n), a && (c.append(yt(new Y(1), n), r), r = n.length + Math.max(0, r - n.length)), c.append(yt(s, n), r), this.atCursorPos = l, this.pendingBuffer = l ? t < e || r > n.length ? 1 : 2 : 0, this.pendingBuffer && (this.bufferMarks = n.slice());}} else this.doc.lineAt(this.pos).from == this.pos && this.getLine().addLineDeco(i);o && (this.textOff + o <= this.text.length ? this.textOff += o : (this.skip += o - (this.text.length - this.textOff), this.text = "", this.textOff = 0), this.pos = e), this.openStart < 0 && (this.openStart = r);}static build(t, e, i, r, s) {let o = new vt(t, e, i, s);return o.openEnd = n.om.spans(r, e, i, o), o.openStart < 0 && (o.openStart = o.openEnd), o.finish(o.openEnd), o;}}function yt(t, e) {for (let i of e) t = new K(i, [t], t.length);return t;}class bt extends ot {constructor(t) {super(), this.tag = t;}eq(t) {return t.tag == this.tag;}toDOM() {return document.createElement(this.tag);}updateDOM(t) {return t.nodeName.toLowerCase() == this.tag;}get isHidden() {return !0;}}bt.inline = new bt("span"), bt.block = new bt("div");var wt = function (t) {return t[t.LTR = 0] = "LTR", t[t.RTL = 1] = "RTL", t;}(wt || (wt = {}));const xt = wt.LTR,St = wt.RTL;function Et(t) {let e = [];for (let i = 0; i < t.length; i++) e.push(1 << +t[i]);return e;}const Ct = Et("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),kt = Et("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Tt = Object.create(null),At = [];for (let t of ["()", "[]", "{}"]) {let e = t.charCodeAt(0),i = t.charCodeAt(1);Tt[e] = i, Tt[i] = -e;}function Mt(t) {return t <= 247 ? Ct[t] : 1424 <= t && t <= 1524 ? 2 : 1536 <= t && t <= 1785 ? kt[t - 1536] : 1774 <= t && t <= 2220 ? 4 : 8192 <= t && t <= 8204 ? 256 : 64336 <= t && t <= 65023 ? 4 : 1;}const _t = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Pt {get dir() {return this.level % 2 ? St : xt;}constructor(t, e, i) {this.from = t, this.to = e, this.level = i;}side(t, e) {return this.dir == e == t ? this.to : this.from;}forward(t, e) {return t == (this.dir == e);}static find(t, e, i, n) {let r = -1;for (let s = 0; s < t.length; s++) {let o = t[s];if (o.from <= e && o.to >= e) {if (o.level == i) return s;(r < 0 || (0 != n ? n < 0 ? o.from < e : o.to > e : t[r].level > o.level)) && (r = s);}}if (r < 0) throw new RangeError("Index out of range");return r;}}function Dt(t, e) {if (t.length != e.length) return !1;for (let i = 0; i < t.length; i++) {let n = t[i],r = e[i];if (n.from != r.from || n.to != r.to || n.direction != r.direction || !Dt(n.inner, r.inner)) return !1;}return !0;}const Ot = [];function It(t, e, i, n, r, s, o) {let a = n % 2 ? 2 : 1;if (n % 2 == r % 2) for (let l = e, c = 0; l < i;) {let e = !0,h = !1;if (c == s.length || l < s[c].from) {let t = Ot[l];t != a && (e = !1, h = 16 == t);}let u = e || 1 != a ? null : [],d = e ? n : n + 1,p = l;t: for (;;) if (c < s.length && p == s[c].from) {if (h) break t;let f = s[c];if (!e) for (let t = f.to, e = c + 1;;) {if (t == i) break t;if (!(e < s.length && s[e].from == t)) {if (Ot[t] == a) break t;break;}t = s[e++].to;}c++, u ? u.push(f) : (f.from > l && o.push(new Pt(l, f.from, d)), Ft(t, f.direction == xt != !(d % 2) ? n + 1 : n, r, f.inner, f.from, f.to, o), l = f.to), p = f.to;} else {if (p == i || (e ? Ot[p] != a : Ot[p] == a)) break;p++;}u ? It(t, l, p, n + 1, r, u, o) : l < p && o.push(new Pt(l, p, d)), l = p;} else for (let l = i, c = s.length; l > e;) {let i = !0,h = !1;if (!c || l > s[c - 1].to) {let t = Ot[l - 1];t != a && (i = !1, h = 16 == t);}let u = i || 1 != a ? null : [],d = i ? n : n + 1,p = l;t: for (;;) if (c && p == s[c - 1].to) {if (h) break t;let f = s[--c];if (!i) for (let t = f.from, i = c;;) {if (t == e) break t;if (!i || s[i - 1].to != t) {if (Ot[t - 1] == a) break t;break;}t = s[--i].from;}u ? u.push(f) : (f.to < l && o.push(new Pt(f.to, l, d)), Ft(t, f.direction == xt != !(d % 2) ? n + 1 : n, r, f.inner, f.from, f.to, o), l = f.from), p = f.from;} else {if (p == e || (i ? Ot[p - 1] != a : Ot[p - 1] == a)) break;p--;}u ? It(t, p, l, n + 1, r, u, o) : p < l && o.push(new Pt(p, l, d)), l = p;}}function Ft(t, e, i, n, r, s, o) {let a = e % 2 ? 2 : 1;!function (t, e, i, n, r) {for (let s = 0; s <= n.length; s++) {let o = s ? n[s - 1].to : e,a = s < n.length ? n[s].from : i,l = s ? 256 : r;for (let e = o, i = l, n = l; e < a; e++) {let r = Mt(t.charCodeAt(e));512 == r ? r = i : 8 == r && 4 == n && (r = 16), Ot[e] = 4 == r ? 2 : r, 7 & r && (n = r), i = r;}for (let t = o, e = l, n = l; t < a; t++) {let r = Ot[t];if (128 == r) t < a - 1 && e == Ot[t + 1] && 24 & e ? r = Ot[t] = e : Ot[t] = 256;else if (64 == r) {let r = t + 1;for (; r < a && 64 == Ot[r];) r++;let s = t && 8 == e || r < i && 8 == Ot[r] ? 1 == n ? 1 : 8 : 256;for (let e = t; e < r; e++) Ot[e] = s;t = r - 1;} else 8 == r && 1 == n && (Ot[t] = 1);e = r, 7 & r && (n = r);}}}(t, r, s, n, a), function (t, e, i, n, r) {let s = 1 == r ? 2 : 1;for (let o = 0, a = 0, l = 0; o <= n.length; o++) {let c = o ? n[o - 1].to : e,h = o < n.length ? n[o].from : i;for (let e, i, n, o = c; o < h; o++) if (i = Tt[e = t.charCodeAt(o)]) {if (i < 0) {for (let t = a - 3; t >= 0; t -= 3) if (At[t + 1] == -i) {let e = At[t + 2],i = 2 & e ? r : 4 & e ? 1 & e ? s : r : 0;i && (Ot[o] = Ot[At[t]] = i), a = t;break;}} else {if (189 == At.length) break;At[a++] = o, At[a++] = e, At[a++] = l;}} else if (2 == (n = Ot[o]) || 1 == n) {let t = n == r;l = t ? 0 : 1;for (let e = a - 3; e >= 0; e -= 3) {let i = At[e + 2];if (2 & i) break;if (t) At[e + 2] |= 2;else {if (4 & i) break;At[e + 2] |= 4;}}}}}(t, r, s, n, a), function (t, e, i, n) {for (let r = 0, s = n; r <= i.length; r++) {let o = r ? i[r - 1].to : t,a = r < i.length ? i[r].from : e;for (let l = o; l < a;) {let o = Ot[l];if (256 == o) {let o = l + 1;for (;;) if (o == a) {if (r == i.length) break;o = i[r++].to, a = r < i.length ? i[r].from : e;} else {if (256 != Ot[o]) break;o++;}let c = 1 == s,h = c == (1 == (o < e ? Ot[o] : n)) ? c ? 1 : 2 : n;for (let e = o, n = r, s = n ? i[n - 1].to : t; e > l;) e == s && (e = i[--n].from, s = n ? i[n - 1].to : t), Ot[--e] = h;l = o;} else s = o, l++;}}}(r, s, n, a), It(t, r, s, e, i, n, o);}function Rt(t) {return [new Pt(0, t, 0)];}let Lt = "";function Nt(t, e, i, r, s) {var o;let a = r.head - t.from,l = Pt.find(e, a, null !== (o = r.bidiLevel) && void 0 !== o ? o : -1, r.assoc),c = e[l],h = c.side(s, i);if (a == h) {let t = l += s ? 1 : -1;if (t < 0 || t >= e.length) return null;c = e[l = t], a = c.side(!s, i), h = c.side(s, i);}let u = (0, n.zK)(t.text, a, c.forward(s, i));(u < c.from || u > c.to) && (u = h), Lt = t.text.slice(Math.min(a, u), Math.max(a, u));let d = l == (s ? e.length - 1 : 0) ? null : e[l + (s ? 1 : -1)];return d && u == h && d.level + (s ? 0 : 1) < c.level ? n.OF.cursor(d.side(!s, i) + t.from, d.forward(s, i) ? 1 : -1, d.level) : n.OF.cursor(u + t.from, c.forward(s, i) ? -1 : 1, c.level);}function Vt(t, e, i) {for (let n = e; n < i; n++) {let e = Mt(t.charCodeAt(n));if (1 == e) return xt;if (2 == e || 4 == e) return St;}return xt;}const Bt = n.sj.define(),jt = n.sj.define(),zt = n.sj.define(),Ut = n.sj.define(),Ht = n.sj.define(),qt = n.sj.define(),$t = n.sj.define(),Gt = n.sj.define(),Wt = n.sj.define(),Kt = n.sj.define({ combine: (t) => t.some((t) => t) }),Zt = n.sj.define({ combine: (t) => t.some((t) => t) }),Yt = n.sj.define();class Xt {constructor(t, e = "nearest", i = "nearest", n = 5, r = 5, s = !1) {this.range = t, this.y = e, this.x = i, this.yMargin = n, this.xMargin = r, this.isSnapshot = s;}map(t) {return t.empty ? this : new Xt(this.range.map(t), this.y, this.x, this.yMargin, this.xMargin, this.isSnapshot);}clip(t) {return this.range.to <= t.doc.length ? this : new Xt(n.OF.cursor(t.doc.length), this.y, this.x, this.yMargin, this.xMargin, this.isSnapshot);}}const Jt = n.Pe.define({ map: (t, e) => t.map(e) }),Qt = n.Pe.define();function te(t, e, i) {let n = t.facet(Ut);n.length ? n[0](e) : window.onerror && window.onerror(String(e), i, void 0, void 0, e) || (i ? console.error(i + ":", e) : console.error(e));}const ee = n.sj.define({ combine: (t) => !t.length || t[0] });let ie = 0;const ne = n.sj.define({ combine: (t) => t.filter((e, i) => {for (let n = 0; n < i; n++) if (t[n].plugin == e.plugin) return !1;return !0;}) });class re {constructor(t, e, i, n, r) {this.id = t, this.create = e, this.domEventHandlers = i, this.domEventObservers = n, this.baseExtensions = r(this), this.extension = this.baseExtensions.concat(ne.of({ plugin: this, arg: void 0 }));}of(t) {return this.baseExtensions.concat(ne.of({ plugin: this, arg: t }));}static define(t, e) {const { eventHandlers: i, eventObservers: n, provide: r, decorations: s } = e || {};return new re(ie++, t, i, n, (t) => {let e = [];return s && e.push(le.of((e) => {let i = e.plugin(t);return i ? s(i) : lt.none;})), r && e.push(r(t)), e;});}static fromClass(t, e) {return re.define((e, i) => new t(e, i), e);}}class se {constructor(t) {this.spec = t, this.mustUpdate = null, this.value = null;}get plugin() {return this.spec && this.spec.plugin;}update(t) {if (this.value) {if (this.mustUpdate) {let t = this.mustUpdate;if (this.mustUpdate = null, this.value.update) try {this.value.update(t);} catch (e) {if (te(t.state, e, "CodeMirror plugin crashed"), this.value.destroy) try {this.value.destroy();} catch (t) {}this.deactivate();}}} else if (this.spec) try {this.value = this.spec.plugin.create(t, this.spec.arg);} catch (e) {te(t.state, e, "CodeMirror plugin crashed"), this.deactivate();}return this;}destroy(t) {var e;if (null === (e = this.value) || void 0 === e ? void 0 : e.destroy) try {this.value.destroy();} catch (e) {te(t.state, e, "CodeMirror plugin crashed");}}deactivate() {this.spec = this.value = null;}}const oe = n.sj.define(),ae = n.sj.define(),le = n.sj.define(),ce = n.sj.define(),he = n.sj.define(),ue = n.sj.define();function de(t, e) {let i = t.state.facet(ue);if (!i.length) return i;let r = i.map((e) => e instanceof Function ? e(t) : e),s = [];return n.om.spans(r, e.from, e.to, { point() {}, span(t, i, n, r) {let o = t - e.from,a = i - e.from,l = s;for (let t = n.length - 1; t >= 0; t--, r--) {let i,s = n[t].spec.bidiIsolate;if (null == s && (s = Vt(e.text, o, a)), r > 0 && l.length && (i = l[l.length - 1]).to == o && i.direction == s) i.to = a, l = i.inner;else {let t = { from: o, to: a, direction: s, inner: [] };l.push(t), l = t.inner;}}} }), s;}const pe = n.sj.define();function fe(t) {let e = 0,i = 0,n = 0,r = 0;for (let s of t.state.facet(pe)) {let o = s(t);o && (null != o.left && (e = Math.max(e, o.left)), null != o.right && (i = Math.max(i, o.right)), null != o.top && (n = Math.max(n, o.top)), null != o.bottom && (r = Math.max(r, o.bottom)));}return { left: e, right: i, top: n, bottom: r };}const ge = n.sj.define();class me {constructor(t, e, i, n) {this.fromA = t, this.toA = e, this.fromB = i, this.toB = n;}join(t) {return new me(Math.min(this.fromA, t.fromA), Math.max(this.toA, t.toA), Math.min(this.fromB, t.fromB), Math.max(this.toB, t.toB));}addToSet(t) {let e = t.length,i = this;for (; e > 0; e--) {let n = t[e - 1];if (!(n.fromA > i.toA)) {if (n.toA < i.fromA) break;i = i.join(n), t.splice(e - 1, 1);}}return t.splice(e, 0, i), t;}static extendWithRanges(t, e) {if (0 == e.length) return t;let i = [];for (let n = 0, r = 0, s = 0, o = 0;; n++) {let a = n == t.length ? null : t[n],l = s - o,c = a ? a.fromB : 1e9;for (; r < e.length && e[r] < c;) {let t = e[r],n = e[r + 1],s = Math.max(o, t),a = Math.min(c, n);if (s <= a && new me(s + l, a + l, s, a).addToSet(i), n > c) break;r += 2;}if (!a) return i;new me(a.fromA, a.toA, a.fromB, a.toB).addToSet(i), s = a.toA, o = a.toB;}}}class ve {constructor(t, e, i) {this.view = t, this.state = e, this.transactions = i, this.flags = 0, this.startState = t.state, this.changes = n.VR.empty(this.startState.doc.length);for (let t of i) this.changes = this.changes.compose(t.changes);let r = [];this.changes.iterChangedRanges((t, e, i, n) => r.push(new me(t, e, i, n))), this.changedRanges = r;}static create(t, e, i) {return new ve(t, e, i);}get viewportChanged() {return (4 & this.flags) > 0;}get viewportMoved() {return (8 & this.flags) > 0;}get heightChanged() {return (2 & this.flags) > 0;}get geometryChanged() {return this.docChanged || (18 & this.flags) > 0;}get focusChanged() {return (1 & this.flags) > 0;}get docChanged() {return !this.changes.empty;}get selectionSet() {return this.transactions.some((t) => t.selection);}get empty() {return 0 == this.flags && 0 == this.transactions.length;}}class ye extends U {get length() {return this.view.state.doc.length;}constructor(t) {super(), this.view = t, this.decorations = [], this.dynamicDecorationMap = [!1], this.domChanged = null, this.hasComposition = null, this.markedForComposition = new Set(), this.editContextFormatting = lt.none, this.lastCompositionAfterCursor = !1, this.minWidth = 0, this.minWidthFrom = 0, this.minWidthTo = 0, this.impreciseAnchor = null, this.impreciseHead = null, this.forceSelection = !1, this.lastUpdate = Date.now(), this.setDOM(t.contentDOM), this.children = [new ft()], this.children[0].setParent(this), this.updateDeco(), this.updateInner([new me(0, 0, 0, t.state.doc.length)], 0, null);}update(t) {var e;let i = t.changedRanges;this.minWidth > 0 && i.length && (i.every(({ fromA: t, toA: e }) => e < this.minWidthFrom || t > this.minWidthTo) ? (this.minWidthFrom = t.changes.mapPos(this.minWidthFrom, 1), this.minWidthTo = t.changes.mapPos(this.minWidthTo, 1)) : this.minWidth = this.minWidthFrom = this.minWidthTo = 0), this.updateEditContextFormatting(t);let r = -1;this.view.inputState.composing >= 0 && !this.view.observer.editContext && ((null === (e = this.domChanged) || void 0 === e ? void 0 : e.newSel) ? r = this.domChanged.newSel.head : function (t, e) {let i = !1;return e && t.iterChangedRanges((t, n) => {t < e.to && n > e.from && (i = !0);}), i;}(t.changes, this.hasComposition) || t.selectionSet || (r = t.state.selection.main.head));let s = r > -1 ? function (t, e, i) {let n = be(t, i);if (!n) return null;let { node: r, from: s, to: o } = n,a = r.nodeValue;if (/[\n\r]/.test(a)) return null;if (t.state.doc.sliceString(n.from, n.to) != a) return null;let l = e.invertedDesc,c = new me(l.mapPos(s), l.mapPos(o), s, o),h = [];for (let e = r.parentNode;; e = e.parentNode) {let i = U.get(e);if (i instanceof K) h.push({ node: e, deco: i.mark });else {if (i instanceof ft || "DIV" == e.nodeName && e.parentNode == t.contentDOM) return { range: c, text: r, marks: h, line: e };if (e == t.contentDOM) return null;h.push({ node: e, deco: new ct({ inclusive: !0, attributes: st(e), tagName: e.tagName.toLowerCase() }) });}}}(this.view, t.changes, r) : null;if (this.domChanged = null, this.hasComposition) {this.markedForComposition.clear();let { from: e, to: n } = this.hasComposition;i = new me(e, n, t.changes.mapPos(e, -1), t.changes.mapPos(n, 1)).addToSet(i.slice());}this.hasComposition = s ? { from: s.range.fromB, to: s.range.toB } : null, (v.ie || v.chrome) && !s && t && t.state.doc.lines != t.startState.doc.lines && (this.forceSelection = !0);let o = function (t, e, i) {let r = new we();return n.om.compare(t, e, i, r), r.changes;}(this.decorations, this.updateDeco(), t.changes);return i = me.extendWithRanges(i, o), !!(7 & this.flags || 0 != i.length) && (this.updateInner(i, t.startState.doc.length, s), t.transactions.length && (this.lastUpdate = Date.now()), !0);}updateInner(t, e, i) {this.view.viewState.mustMeasureContent = !0, this.updateChildren(t, e, i);let { observer: n } = this.view;n.ignore(() => {this.dom.style.height = this.view.viewState.contentHeight / this.view.scaleY + "px", this.dom.style.flexBasis = this.minWidth ? this.minWidth + "px" : "";let t = v.chrome || v.ios ? { node: n.selectionRange.focusNode, written: !1 } : void 0;this.sync(this.view, t), this.flags &= -8, t && (t.written || n.selectionRange.focusNode != t.node) && (this.forceSelection = !0), this.dom.style.height = "";}), this.markedForComposition.forEach((t) => t.flags &= -9);let r = [];if (this.view.viewport.from || this.view.viewport.to < this.view.state.doc.length) for (let t of this.children) t instanceof gt && t.widget instanceof mt && r.push(t.dom);n.updateGaps(r);}updateChildren(t, e, i) {let n = i ? i.range.addToSet(t.slice()) : t,r = this.childCursor(e);for (let t = n.length - 1;; t--) {let e = t >= 0 ? n[t] : null;if (!e) break;let s,o,a,l,{ fromA: c, toA: h, fromB: u, toB: d } = e;if (i && i.range.fromB < d && i.range.toB > u) {let t = vt.build(this.view.state.doc, u, i.range.fromB, this.decorations, this.dynamicDecorationMap),e = vt.build(this.view.state.doc, i.range.toB, d, this.decorations, this.dynamicDecorationMap);o = t.breakAtStart, a = t.openStart, l = e.openEnd;let n = this.compositionView(i);e.breakAtStart ? n.breakAfter = 1 : e.content.length && n.merge(n.length, n.length, e.content[0], !1, e.openStart, 0) && (n.breakAfter = e.content[0].breakAfter, e.content.shift()), t.content.length && n.merge(0, 0, t.content[t.content.length - 1], !0, 0, t.openEnd) && t.content.pop(), s = t.content.concat(n).concat(e.content);} else ({ content: s, breakAtStart: o, openStart: a, openEnd: l } = vt.build(this.view.state.doc, u, d, this.decorations, this.dynamicDecorationMap));let { i: p, off: f } = r.findPos(h, 1),{ i: g, off: m } = r.findPos(c, -1);$(this, g, m, p, f, s, o, a, l);}i && this.fixCompositionDOM(i);}updateEditContextFormatting(t) {this.editContextFormatting = this.editContextFormatting.map(t.changes);for (let e of t.transactions) for (let t of e.effects) t.is(Qt) && (this.editContextFormatting = t.value);}compositionView(t) {let e = new W(t.text.nodeValue);e.flags |= 8;for (let { deco: i } of t.marks) e = new K(i, [e], e.length);let i = new ft();return i.append(e, 0), i;}fixCompositionDOM(t) {let e = (t, e) => {e.flags |= 8 | (e.children.some((t) => 7 & t.flags) ? 1 : 0), this.markedForComposition.add(e);let i = U.get(t);i && i != e && (i.dom = null), e.setDOM(t);},i = this.childPos(t.range.fromB, 1),n = this.children[i.i];e(t.line, n);for (let r = t.marks.length - 1; r >= -1; r--) i = n.childPos(i.off, 1), n = n.children[i.i], e(r >= 0 ? t.marks[r].node : t.text, n);}updateSelection(t = !1, e = !1) {!t && this.view.observer.selectionRange.focusNode || this.view.observer.readSelectionRange();let i = this.view.root.activeElement,n = i == this.dom,r = !n && !(this.view.state.facet(ee) || this.dom.tabIndex > -1) && w(this.dom, this.view.observer.selectionRange) && !(i && this.dom.contains(i));if (!(n || e || r)) return;let s = this.forceSelection;this.forceSelection = !1;let o = this.view.state.selection.main,a = this.moveToLine(this.domAtPos(o.anchor)),l = o.empty ? a : this.moveToLine(this.domAtPos(o.head));if (v.gecko && o.empty && !this.hasComposition && 1 == (c = a).node.nodeType && c.node.firstChild && (0 == c.offset || "false" == c.node.childNodes[c.offset - 1].contentEditable) && (c.offset == c.node.childNodes.length || "false" == c.node.childNodes[c.offset].contentEditable)) {let t = document.createTextNode("");this.view.observer.ignore(() => a.node.insertBefore(t, a.node.childNodes[a.offset] || null)), a = l = new j(t, 0), s = !0;}var c;let h = this.view.observer.selectionRange;!s && h.focusNode && (S(a.node, a.offset, h.anchorNode, h.anchorOffset) && S(l.node, l.offset, h.focusNode, h.focusOffset) || this.suppressWidgetCursorChange(h, o)) || (this.view.observer.ignore(() => {v.android && v.chrome && this.dom.contains(h.focusNode) && function (t, e) {for (let i = t; i && i != e; i = i.assignedSlot || i.parentNode) if (1 == i.nodeType && "false" == i.contentEditable) return !0;return !1;}(h.focusNode, this.dom) && (this.dom.blur(), this.dom.focus({ preventScroll: !0 }));let t = y(this.view.root);if (t) if (o.empty) {if (v.gecko) {let t = (e = a.node, n = a.offset, 1 != e.nodeType ? 0 : (n && "false" == e.childNodes[n - 1].contentEditable ? 1 : 0) | (n < e.childNodes.length && "false" == e.childNodes[n].contentEditable ? 2 : 0));if (t && 3 != t) {let e = (1 == t ? V : B)(a.node, a.offset);e && (a = new j(e.node, e.offset));}}t.collapse(a.node, a.offset), null != o.bidiLevel && void 0 !== t.caretBidiLevel && (t.caretBidiLevel = o.bidiLevel);} else if (t.extend) {t.collapse(a.node, a.offset);try {t.extend(l.node, l.offset);} catch (t) {}} else {let e = document.createRange();o.anchor > o.head && ([a, l] = [l, a]), e.setEnd(l.node, l.offset), e.setStart(a.node, a.offset), t.removeAllRanges(), t.addRange(e);}var e, n;r && this.view.root.activeElement == this.dom && (this.dom.blur(), i && i.focus());}), this.view.observer.setSelectionRange(a, l)), this.impreciseAnchor = a.precise ? null : new j(h.anchorNode, h.anchorOffset), this.impreciseHead = l.precise ? null : new j(h.focusNode, h.focusOffset);}suppressWidgetCursorChange(t, e) {return this.hasComposition && e.empty && S(t.focusNode, t.focusOffset, t.anchorNode, t.anchorOffset) && this.posFromDOM(t.focusNode, t.focusOffset) == e.head;}enforceCursorAssoc() {if (this.hasComposition) return;let { view: t } = this,e = t.state.selection.main,i = y(t.root),{ anchorNode: n, anchorOffset: r } = t.observer.selectionRange;if (!(i && e.empty && e.assoc && i.modify)) return;let s = ft.find(this, e.head);if (!s) return;let o = s.posAtStart;if (e.head == o || e.head == o + s.length) return;let a = this.coordsAt(e.head, -1),l = this.coordsAt(e.head, 1);if (!a || !l || a.bottom > l.top) return;let c = this.domAtPos(e.head + e.assoc);i.collapse(c.node, c.offset), i.modify("move", e.assoc < 0 ? "forward" : "backward", "lineboundary"), t.observer.readSelectionRange();let h = t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode, h.anchorOffset) != e.from && i.collapse(n, r);}moveToLine(t) {let e,i = this.dom;if (t.node != i) return t;for (let n = t.offset; !e && n < i.childNodes.length; n++) {let t = U.get(i.childNodes[n]);t instanceof ft && (e = t.domAtPos(0));}for (let n = t.offset - 1; !e && n >= 0; n--) {let t = U.get(i.childNodes[n]);t instanceof ft && (e = t.domAtPos(t.length));}return e ? new j(e.node, e.offset, !0) : t;}nearest(t) {for (let e = t; e;) {let t = U.get(e);if (t && t.rootView == this) return t;e = e.parentNode;}return null;}posFromDOM(t, e) {let i = this.nearest(t);if (!i) throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(t, e) + i.posAtStart;}domAtPos(t) {let { i: e, off: i } = this.childCursor().findPos(t, -1);for (; e < this.children.length - 1;) {let t = this.children[e];if (i < t.length || t instanceof ft) break;e++, i = 0;}return this.children[e].domAtPos(i);}coordsAt(t, e) {let i = null,n = 0;for (let r = this.length, s = this.children.length - 1; s >= 0; s--) {let o = this.children[s],a = r - o.breakAfter,l = a - o.length;if (a < t) break;if (l <= t && (l < t || o.covers(-1)) && (a > t || o.covers(1)) && (!i || o instanceof ft && !(i instanceof ft && e >= 0))) i = o, n = l;else if (i && l == t && a == t && o instanceof gt && Math.abs(e) < 2) {if (o.deco.startSide < 0) break;s && (i = null);}r = l;}return i ? i.coordsAt(t - n, e) : null;}coordsForChar(t) {let { i: e, off: i } = this.childPos(t, 1),r = this.children[e];if (!(r instanceof ft)) return null;for (; r.children.length;) {let { i: t, off: e } = r.childPos(i, 1);for (;; t++) {if (t == r.children.length) return null;if ((r = r.children[t]).length) break;}i = e;}if (!(r instanceof W)) return null;let s = (0, n.zK)(r.text, i);if (s == i) return null;let o = F(r.dom, i, s).getClientRects();for (let t = 0; t < o.length; t++) {let e = o[t];if (t == o.length - 1 || e.top < e.bottom && e.left < e.right) return e;}return null;}measureVisibleLineHeights(t) {let e = [],{ from: i, to: n } = t,r = this.view.contentDOM.clientWidth,s = r > Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1,o = -1,a = this.view.textDirection == wt.LTR;for (let t = 0, l = 0; l < this.children.length; l++) {let c = this.children[l],h = t + c.length;if (h > n) break;if (t >= i) {let i = c.dom.getBoundingClientRect();if (e.push(i.height), s) {let e = c.dom.lastChild,n = e ? x(e) : [];if (n.length) {let e = n[n.length - 1],s = a ? e.right - i.left : i.right - e.left;s > o && (o = s, this.minWidth = r, this.minWidthFrom = t, this.minWidthTo = h);}}}t = h + c.breakAfter;}return e;}textDirectionAt(t) {let { i: e } = this.childPos(t, 1);return "rtl" == getComputedStyle(this.children[e].dom).direction ? wt.RTL : wt.LTR;}measureTextSize() {for (let t of this.children) if (t instanceof ft) {let e = t.measureTextSize();if (e) return e;}let t,e,i,n = document.createElement("div");return n.className = "cm-line", n.style.width = "99999px", n.style.position = "absolute", n.textContent = "abc def ghi jkl mno pqr stu", this.view.observer.ignore(() => {this.dom.appendChild(n);let r = x(n.firstChild)[0];t = n.getBoundingClientRect().height, e = r ? r.width / 27 : 7, i = r ? r.height : t, n.remove();}), { lineHeight: t, charWidth: e, textHeight: i };}childCursor(t = this.length) {let e = this.children.length;return e && (t -= this.children[--e].length), new q(this.children, t, e);}computeBlockGapDeco() {let t = [],e = this.view.viewState;for (let i = 0, n = 0;; n++) {let r = n == e.viewports.length ? null : e.viewports[n],s = r ? r.from - 1 : this.length;if (s > i) {let n = (e.lineBlockAt(s).bottom - e.lineBlockAt(i).top) / this.view.scaleY;t.push(lt.replace({ widget: new mt(n), block: !0, inclusive: !0, isBlockGap: !0 }).range(i, s));}if (!r) break;i = r.to + 1;}return lt.set(t);}updateDeco() {let t = 1,e = this.view.state.facet(le).map((e) => (this.dynamicDecorationMap[t++] = "function" == typeof e) ? e(this.view) : e),i = !1,r = this.view.state.facet(ce).map((t, e) => {let n = "function" == typeof t;return n && (i = !0), n ? t(this.view) : t;});for (r.length && (this.dynamicDecorationMap[t++] = i, e.push(n.om.join(r))), this.decorations = [this.editContextFormatting, ...e, this.computeBlockGapDeco(), this.view.viewState.lineGapDeco]; t < this.decorations.length;) this.dynamicDecorationMap[t++] = !1;return this.decorations;}scrollIntoView(t) {if (t.isSnapshot) {let e = this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop = e.top - t.yMargin, void (this.view.scrollDOM.scrollLeft = t.xMargin);}for (let e of this.view.state.facet(Yt)) try {if (e(this.view, t.range, t)) return !0;} catch (t) {te(this.view.state, t, "scroll handler");}let e,{ range: i } = t,n = this.coordsAt(i.head, i.empty ? i.assoc : i.head > i.anchor ? -1 : 1);if (!n) return;!i.empty && (e = this.coordsAt(i.anchor, i.anchor > i.head ? -1 : 1)) && (n = { left: Math.min(n.left, e.left), top: Math.min(n.top, e.top), right: Math.max(n.right, e.right), bottom: Math.max(n.bottom, e.bottom) });let r = fe(this.view),s = { left: n.left - r.left, top: n.top - r.top, right: n.right + r.right, bottom: n.bottom + r.bottom },{ offsetWidth: o, offsetHeight: a } = this.view.scrollDOM;!function (t, e, i, n, r, s, o, a) {let l = t.ownerDocument,c = l.defaultView || window;for (let h = t, u = !1; h && !u;) if (1 == h.nodeType) {let t,d = h == l.body,p = 1,f = 1;if (d) t = M(c);else {if (/^(fixed|sticky)$/.test(getComputedStyle(h).position) && (u = !0), h.scrollHeight <= h.clientHeight && h.scrollWidth <= h.clientWidth) {h = h.assignedSlot || h.parentNode;continue;}let e = h.getBoundingClientRect();({ scaleX: p, scaleY: f } = _(h, e)), t = { left: e.left, right: e.left + h.clientWidth * p, top: e.top, bottom: e.top + h.clientHeight * f };}let g = 0,m = 0;if ("nearest" == r) e.top < t.top ? (m = e.top - (t.top + o), i > 0 && e.bottom > t.bottom + m && (m = e.bottom - t.bottom + o)) : e.bottom > t.bottom && (m = e.bottom - t.bottom + o, i < 0 && e.top - m < t.top && (m = e.top - (t.top + o)));else {let n = e.bottom - e.top,s = t.bottom - t.top;m = ("center" == r && n <= s ? e.top + n / 2 - s / 2 : "start" == r || "center" == r && i < 0 ? e.top - o : e.bottom - s + o) - t.top;}if ("nearest" == n ? e.left < t.left ? (g = e.left - (t.left + s), i > 0 && e.right > t.right + g && (g = e.right - t.right + s)) : e.right > t.right && (g = e.right - t.right + s, i < 0 && e.left < t.left + g && (g = e.left - (t.left + s))) : g = ("center" == n ? e.left + (e.right - e.left) / 2 - (t.right - t.left) / 2 : "start" == n == a ? e.left - s : e.right - (t.right - t.left) + s) - t.left, g || m) if (d) c.scrollBy(g, m);else {let t = 0,i = 0;if (m) {let t = h.scrollTop;h.scrollTop += m / f, i = (h.scrollTop - t) * f;}if (g) {let e = h.scrollLeft;h.scrollLeft += g / p, t = (h.scrollLeft - e) * p;}e = { left: e.left - t, top: e.top - i, right: e.right - t, bottom: e.bottom - i }, t && Math.abs(t - g) < 1 && (n = "nearest"), i && Math.abs(i - m) < 1 && (r = "nearest");}if (d) break;(e.top < t.top || e.bottom > t.bottom || e.left < t.left || e.right > t.right) && (e = { left: Math.max(e.left, t.left), right: Math.min(e.right, t.right), top: Math.max(e.top, t.top), bottom: Math.min(e.bottom, t.bottom) }), h = h.assignedSlot || h.parentNode;} else {if (11 != h.nodeType) break;h = h.host;}}(this.view.scrollDOM, s, i.head < i.anchor ? -1 : 1, t.x, t.y, Math.max(Math.min(t.xMargin, o), -o), Math.max(Math.min(t.yMargin, a), -a), this.view.textDirection == wt.LTR);}}function be(t, e) {let i = t.observer.selectionRange;if (!i.focusNode) return null;let n = V(i.focusNode, i.focusOffset),r = B(i.focusNode, i.focusOffset),s = n || r;if (r && n && r.node != n.node) {let e = U.get(r.node);if (!e || e instanceof W && e.text != r.node.nodeValue) s = r;else if (t.docView.lastCompositionAfterCursor) {let t = U.get(n.node);!t || t instanceof W && t.text != n.node.nodeValue || (s = r);}}if (t.docView.lastCompositionAfterCursor = s != n, !s) return null;let o = e - s.offset;return { from: o, to: o + s.node.nodeValue.length, node: s.node };}let we = class {constructor() {this.changes = [];}compareRange(t, e) {pt(t, e, this.changes);}comparePoint(t, e) {pt(t, e, this.changes);}boundChange(t) {pt(t, t, this.changes);}};function xe(t, e) {return e.left > t ? e.left - t : Math.max(0, t - e.right);}function Se(t, e) {return e.top > t ? e.top - t : Math.max(0, t - e.bottom);}function Ee(t, e) {return t.top < e.bottom - 1 && t.bottom > e.top + 1;}function Ce(t, e) {return e < t.top ? { top: e, left: t.left, right: t.right, bottom: t.bottom } : t;}function ke(t, e) {return e > t.bottom ? { top: t.top, left: t.left, right: t.right, bottom: e } : t;}function Te(t, e, i) {let n,r,s,o,a,l,c,h,u = !1;for (let d = t.firstChild; d; d = d.nextSibling) {let t = x(d);for (let p = 0; p < t.length; p++) {let f = t[p];r && Ee(r, f) && (f = Ce(ke(f, r.bottom), r.top));let g = xe(e, f),m = Se(i, f);if (0 == g && 0 == m) return 3 == d.nodeType ? Ae(d, e, i) : Te(d, e, i);(!n || o > m || o == m && s > g) && (n = d, r = f, s = g, o = m, u = !g || (e < f.left ? p > 0 : p < t.length - 1)), 0 == g ? i > f.bottom && (!c || c.bottom < f.bottom) ? (a = d, c = f) : i < f.top && (!h || h.top > f.top) && (l = d, h = f) : c && Ee(c, f) ? c = ke(c, f.bottom) : h && Ee(h, f) && (h = Ce(h, f.top));}}if (c && c.bottom >= i ? (n = a, r = c) : h && h.top <= i && (n = l, r = h), !n) return { node: t, offset: 0 };let d = Math.max(r.left, Math.min(r.right, e));return 3 == n.nodeType ? Ae(n, d, i) : u && "false" != n.contentEditable ? Te(n, d, i) : { node: t, offset: Array.prototype.indexOf.call(t.childNodes, n) + (e >= (r.left + r.right) / 2 ? 1 : 0) };}function Ae(t, e, i) {let n = t.nodeValue.length,r = -1,s = 1e9,o = 0;for (let a = 0; a < n; a++) {let n = F(t, a, a + 1).getClientRects();for (let l = 0; l < n.length; l++) {let c = n[l];if (c.top == c.bottom) continue;o || (o = e - c.left);let h = (c.top > i ? c.top - i : i - c.bottom) - 1;if (c.left - 1 <= e && c.right + 1 >= e && h < s) {let i = e >= (c.left + c.right) / 2,n = i;if ((v.chrome || v.gecko) && F(t, a).getBoundingClientRect().left == c.right && (n = !i), h <= 0) return { node: t, offset: a + (n ? 1 : 0) };r = a + (n ? 1 : 0), s = h;}}}return { node: t, offset: r > -1 ? r : o > 0 ? t.nodeValue.length : 0 };}function Me(t, e, i, n = -1) {var r, s;let o,a = t.contentDOM.getBoundingClientRect(),l = a.top + t.viewState.paddingTop,{ docHeight: c } = t.viewState,{ x: h, y: u } = e,d = u - l;if (d < 0) return 0;if (d > c) return t.state.doc.length;for (let e = t.viewState.heightOracle.textHeight / 2, r = !1; o = t.elementAtHeight(d), o.type != at.Text;) for (; d = n > 0 ? o.bottom + e : o.top - e, !(d >= 0 && d <= c);) {if (r) return i ? null : 0;r = !0, n = -n;}u = l + d;let p = o.from;if (p < t.viewport.from) return 0 == t.viewport.from ? 0 : i ? null : _e(t, a, o, h, u);if (p > t.viewport.to) return t.viewport.to == t.state.doc.length ? t.state.doc.length : i ? null : _e(t, a, o, h, u);let f = t.dom.ownerDocument,g = t.root.elementFromPoint ? t.root : f,m = g.elementFromPoint(h, u);m && !t.contentDOM.contains(m) && (m = null), m || (h = Math.max(a.left + 1, Math.min(a.right - 1, h)), m = g.elementFromPoint(h, u), m && !t.contentDOM.contains(m) && (m = null));let y,b = -1;if (m && 0 != (null === (r = t.docView.nearest(m)) || void 0 === r ? void 0 : r.isEditable)) {if (f.caretPositionFromPoint) {let t = f.caretPositionFromPoint(h, u);t && ({ offsetNode: y, offset: b } = t);} else if (f.caretRangeFromPoint) {let t = f.caretRangeFromPoint(h, u);t && ({ startContainer: y, startOffset: b } = t);}y && (!t.contentDOM.contains(y) || v.safari && function (t, e, i) {return Pe(t, e, i);}(y, b, h) || v.chrome && function (t, e, i) {if (0 != e) return Pe(t, e, i);for (let e = t;;) {let t = e.parentNode;if (!t || 1 != t.nodeType || t.firstChild != e) return !1;if (t.classList.contains("cm-line")) break;e = t;}return i - (1 == t.nodeType ? t.getBoundingClientRect() : F(t, 0, Math.max(t.nodeValue.length, 1)).getBoundingClientRect()).left > 5;}(y, b, h)) && (y = void 0), y && (b = Math.min(T(y), b));}if (!y || !t.docView.dom.contains(y)) {let e = ft.find(t.docView, p);if (!e) return d > o.top + o.height / 2 ? o.to : o.from;({ node: y, offset: b } = Te(e.dom, h, u));}let w = t.docView.nearest(y);if (!w) return null;if (w.isWidget && 1 == (null === (s = w.dom) || void 0 === s ? void 0 : s.nodeType)) {let t = w.dom.getBoundingClientRect();return e.y < t.top || e.y <= t.bottom && e.x <= (t.left + t.right) / 2 ? w.posAtStart : w.posAtEnd;}return w.localPosFromDOM(y, b) + w.posAtStart;}function _e(t, e, i, r, s) {let o = Math.round((r - e.left) * t.defaultCharacterWidth);if (t.lineWrapping && i.height > 1.5 * t.defaultLineHeight) {let e = t.viewState.heightOracle.textHeight;o += Math.floor((s - i.top - .5 * (t.defaultLineHeight - e)) / e) * t.viewState.heightOracle.lineLength;}let a = t.state.sliceDoc(i.from, i.to);return i.from + (0, n.kn)(a, o, t.state.tabSize);}function Pe(t, e, i) {let n,r = t;if (3 != t.nodeType || e != (n = t.nodeValue.length)) return !1;for (;;) {let t = r.nextSibling;if (t) {if ("BR" == t.nodeName) break;return !1;}{let t = r.parentNode;if (!t || "DIV" == t.nodeName) break;r = t;}}return F(t, n - 1, n).getBoundingClientRect().right > i;}function De(t, e, i) {let n = t.lineBlockAt(e);if (Array.isArray(n.type)) {let t;for (let r of n.type) {if (r.from > e) break;if (!(r.to < e)) {if (r.from < e && r.to > e) return r;t && (r.type != at.Text || t.type == r.type && !(i < 0 ? r.from < e : r.to > e)) || (t = r);}}return t || n;}return n;}function Oe(t, e, i, n) {let r = t.state.doc.lineAt(e.head),s = t.bidiSpans(r),o = t.textDirectionAt(r.from);for (let a = e, l = null;;) {let e = Nt(r, s, o, a, i),c = Lt;if (!e) {if (r.number == (i ? t.state.doc.lines : 1)) return a;c = "\n", r = t.state.doc.line(r.number + (i ? 1 : -1)), s = t.bidiSpans(r), e = t.visualLineSide(r, !i);}if (l) {if (!l(c)) return a;} else {if (!n) return e;l = n(c);}a = e;}}function Ie(t, e, i) {for (;;) {let n = 0;for (let r of t) r.between(e - 1, e + 1, (t, r, s) => {if (e > t && e < r) {let s = n || i || (e - t < r - e ? -1 : 1);e = s < 0 ? t : r, n = s;}});if (!n) return e;}}function Fe(t, e) {let i = null;for (let r = 0; r < e.ranges.length; r++) {let s = e.ranges[r],o = null;if (s.empty) {let e = Ie(t, s.from, 0);e != s.from && (o = n.OF.cursor(e, -1));} else {let e = Ie(t, s.from, -1),i = Ie(t, s.to, 1);e == s.from && i == s.to || (o = n.OF.range(s.from == s.anchor ? e : i, s.from == s.head ? e : i));}o && (i || (i = e.ranges.slice()), i[r] = o);}return i ? n.OF.create(i, e.mainIndex) : e;}function Re(t, e, i) {let r = Ie(t.state.facet(he).map((e) => e(t)), i.from, e.head > i.from ? -1 : 1);return r == i.from ? i : n.OF.cursor(r, r < i.from ? 1 : -1);}const Le = "";class Ne {constructor(t, e) {this.points = t, this.text = "", this.lineSeparator = e.facet(n.$t.lineSeparator);}append(t) {this.text += t;}lineBreak() {this.text += Le;}readRange(t, e) {if (!t) return this;let i = t.parentNode;for (let n = t;;) {this.findPointBefore(i, n);let t = this.text.length;this.readNode(n);let r = n.nextSibling;if (r == e) break;let s = U.get(n),o = U.get(r);(s && o ? s.breakAfter : (s ? s.breakAfter : C(n)) || C(r) && ("BR" != n.nodeName || n.cmIgnore) && this.text.length > t) && !Be(r, e) && this.lineBreak(), n = r;}return this.findPointBefore(i, e), this;}readTextNode(t) {let e = t.nodeValue;for (let i of this.points) i.node == t && (i.pos = this.text.length + Math.min(i.offset, e.length));for (let i = 0, n = this.lineSeparator ? null : /\r\n?|\n/g;;) {let r,s = -1,o = 1;if (this.lineSeparator ? (s = e.indexOf(this.lineSeparator, i), o = this.lineSeparator.length) : (r = n.exec(e)) && (s = r.index, o = r[0].length), this.append(e.slice(i, s < 0 ? e.length : s)), s < 0) break;if (this.lineBreak(), o > 1) for (let e of this.points) e.node == t && e.pos > this.text.length && (e.pos -= o - 1);i = s + o;}}readNode(t) {if (t.cmIgnore) return;let e = U.get(t),i = e && e.overrideDOMText;if (null != i) {this.findPointInside(t, i.length);for (let t = i.iter(); !t.next().done;) t.lineBreak ? this.lineBreak() : this.append(t.value);} else 3 == t.nodeType ? this.readTextNode(t) : "BR" == t.nodeName ? t.nextSibling && this.lineBreak() : 1 == t.nodeType && this.readRange(t.firstChild, null);}findPointBefore(t, e) {for (let i of this.points) i.node == t && t.childNodes[i.offset] == e && (i.pos = this.text.length);}findPointInside(t, e) {for (let i of this.points) (3 == t.nodeType ? i.node == t : t.contains(i.node)) && (i.pos = this.text.length + (Ve(t, i.node, i.offset) ? e : 0));}}function Ve(t, e, i) {for (;;) {if (!e || i < T(e)) return !1;if (e == t) return !0;i = E(e) + 1, e = e.parentNode;}}function Be(t, e) {let i;for (; t != e && t; t = t.nextSibling) {let e = U.get(t);if (!(null == e ? void 0 : e.isWidget) && !t.cmIgnore) return !1;e && (i || (i = [])).push(e);}if (i) for (let t of i) {let e = t.overrideDOMText;if (null == e ? void 0 : e.length) return !1;}return !0;}class je {constructor(t, e) {this.node = t, this.offset = e, this.pos = -1;}}class ze {constructor(t, e, i, r) {this.typeOver = r, this.bounds = null, this.text = "", this.domChanged = e > -1;let { impreciseHead: s, impreciseAnchor: o } = t.docView;if (t.state.readOnly && e > -1) this.newSel = null;else if (e > -1 && (this.bounds = t.docView.domBoundsAround(e, i, 0))) {let e = s || o ? [] : function (t) {let e = [];if (t.root.activeElement != t.contentDOM) return e;let { anchorNode: i, anchorOffset: n, focusNode: r, focusOffset: s } = t.observer.selectionRange;return i && (e.push(new je(i, n)), r == i && s == n || e.push(new je(r, s))), e;}(t),i = new Ne(e, t.state);i.readRange(this.bounds.startDOM, this.bounds.endDOM), this.text = i.text, this.newSel = function (t, e) {if (0 == t.length) return null;let i = t[0].pos,r = 2 == t.length ? t[1].pos : i;return i > -1 && r > -1 ? n.OF.single(i + e, r + e) : null;}(e, this.bounds.from);} else {let e = t.observer.selectionRange,i = s && s.node == e.focusNode && s.offset == e.focusOffset || !b(t.contentDOM, e.focusNode) ? t.state.selection.main.head : t.docView.posFromDOM(e.focusNode, e.focusOffset),r = o && o.node == e.anchorNode && o.offset == e.anchorOffset || !b(t.contentDOM, e.anchorNode) ? t.state.selection.main.anchor : t.docView.posFromDOM(e.anchorNode, e.anchorOffset),a = t.viewport;if ((v.ios || v.chrome) && t.state.selection.main.empty && i != r && (a.from > 0 || a.to < t.state.doc.length)) {let e = Math.min(i, r),n = Math.max(i, r),s = a.from - e,o = a.to - n;0 != s && 1 != s && 0 != e || 0 != o && -1 != o && n != t.state.doc.length || (i = 0, r = t.state.doc.length);}this.newSel = n.OF.single(r, i);}}}function Ue(t, e) {let i,{ newSel: r } = e,s = t.state.selection.main,o = t.inputState.lastKeyTime > Date.now() - 100 ? t.inputState.lastKeyCode : -1;if (e.bounds) {let { from: r, to: a } = e.bounds,l = s.from,c = null;(8 === o || v.android && e.text.length < a - r) && (l = s.to, c = "end");let h = qe(t.state.doc.sliceString(r, a, Le), e.text, l - r, c);h && (v.chrome && 13 == o && h.toB == h.from + 2 && e.text.slice(h.from, h.toB) == Le + Le && h.toB--, i = { from: r + h.from, to: r + h.toA, insert: n.EY.of(e.text.slice(h.from, h.toB).split(Le)) });} else r && (!t.hasFocus && t.state.facet(ee) || r.main.eq(s)) && (r = null);if (!i && !r) return !1;if (!i && e.typeOver && !s.empty && r && r.main.empty ? i = { from: s.from, to: s.to, insert: t.state.doc.slice(s.from, s.to) } : (v.mac || v.android) && i && i.from == i.to && i.from == s.head - 1 && /^\. ?$/.test(i.insert.toString()) && "off" == t.contentDOM.getAttribute("autocorrect") ? (r && 2 == i.insert.length && (r = n.OF.single(r.main.anchor - 1, r.main.head - 1)), i = { from: i.from, to: i.to, insert: n.EY.of([i.insert.toString().replace(".", " ")]) }) : i && i.from >= s.from && i.to <= s.to && (i.from != s.from || i.to != s.to) && s.to - s.from - (i.to - i.from) <= 4 ? i = { from: s.from, to: s.to, insert: t.state.doc.slice(s.from, i.from).append(i.insert).append(t.state.doc.slice(i.to, s.to)) } : v.chrome && i && i.from == i.to && i.from == s.head && "\n " == i.insert.toString() && t.lineWrapping && (r && (r = n.OF.single(r.main.anchor - 1, r.main.head - 1)), i = { from: s.from, to: s.to, insert: n.EY.of([" "]) }), i) return He(t, i, r, o);if (r && !r.main.eq(s)) {let e = !1,i = "select";return t.inputState.lastSelectionTime > Date.now() - 50 && ("select" == t.inputState.lastSelectionOrigin && (e = !0), i = t.inputState.lastSelectionOrigin, "select.pointer" == i && (r = Fe(t.state.facet(he).map((e) => e(t)), r))), t.dispatch({ selection: r, scrollIntoView: e, userEvent: i }), !0;}return !1;}function He(t, e, i, r = -1) {if (v.ios && t.inputState.flushIOSKey(e)) return !0;let s = t.state.selection.main;if (v.android && (e.to == s.to && (e.from == s.from || e.from == s.from - 1 && " " == t.state.sliceDoc(e.from, s.from)) && 1 == e.insert.length && 2 == e.insert.lines && R(t.contentDOM, "Enter", 13) || (e.from == s.from - 1 && e.to == s.to && 0 == e.insert.length || 8 == r && e.insert.length < e.to - e.from && e.to > s.head) && R(t.contentDOM, "Backspace", 8) || e.from == s.from && e.to == s.to + 1 && 0 == e.insert.length && R(t.contentDOM, "Delete", 46))) return !0;let o,a = e.insert.toString();t.inputState.composing >= 0 && t.inputState.composing++;let l = () => o || (o = function (t, e, i) {let r,s = t.state,o = s.selection.main,a = -1;if (e.from == e.to && e.from < o.from || e.from > o.to) {let i = e.from < o.from ? -1 : 1,n = i < 0 ? o.from : o.to,r = Ie(s.facet(he).map((e) => e(t)), n, i);e.from == r && (a = r);}if (a > -1) r = { changes: e, selection: n.OF.cursor(e.from + e.insert.length, -1) };else if (e.from >= o.from && e.to <= o.to && e.to - e.from >= (o.to - o.from) / 3 && (!i || i.main.empty && i.main.from == e.from + e.insert.length) && t.inputState.composing < 0) {let i = o.from < e.from ? s.sliceDoc(o.from, e.from) : "",n = o.to > e.to ? s.sliceDoc(e.to, o.to) : "";r = s.replaceSelection(t.state.toText(i + e.insert.sliceString(0, void 0, t.state.lineBreak) + n));} else {let a = s.changes(e),l = i && i.main.to <= a.newLength ? i.main : void 0;if (s.selection.ranges.length > 1 && t.inputState.composing >= 0 && e.to <= o.to && e.to >= o.to - 10) {let c,h = t.state.sliceDoc(e.from, e.to),u = i && be(t, i.main.head);if (u) {let t = e.insert.length - (e.to - e.from);c = { from: u.from, to: u.to - t };} else c = t.state.doc.lineAt(o.head);let d = o.to - e.to,p = o.to - o.from;r = s.changeByRange((i) => {if (i.from == o.from && i.to == o.to) return { changes: a, range: l || i.map(a) };let r = i.to - d,u = r - h.length;if (i.to - i.from != p || t.state.sliceDoc(u, r) != h || i.to >= c.from && i.from <= c.to) return { range: i };let f = s.changes({ from: u, to: r, insert: e.insert }),g = i.to - o.to;return { changes: f, range: l ? n.OF.range(Math.max(0, l.anchor + g), Math.max(0, l.head + g)) : i.map(f) };});} else r = { changes: a, selection: l && s.selection.replaceRange(l) };}let l = "input.type";return (t.composing || t.inputState.compositionPendingChange && t.inputState.compositionEndedAt > Date.now() - 50) && (t.inputState.compositionPendingChange = !1, l += ".compose", t.inputState.compositionFirstChange && (l += ".start", t.inputState.compositionFirstChange = !1)), s.update(r, { userEvent: l, scrollIntoView: !0 });}(t, e, i));return t.state.facet(qt).some((i) => i(t, e.from, e.to, a, l)) || t.dispatch(l()), !0;}function qe(t, e, i, n) {let r = Math.min(t.length, e.length),s = 0;for (; s < r && t.charCodeAt(s) == e.charCodeAt(s);) s++;if (s == r && t.length == e.length) return null;let o = t.length,a = e.length;for (; o > 0 && a > 0 && t.charCodeAt(o - 1) == e.charCodeAt(a - 1);) o--, a--;return "end" == n && (i -= o + Math.max(0, s - Math.min(o, a)) - s), o < s && t.length < e.length ? (s -= i <= s && i >= o ? s - i : 0, a = s + (a - o), o = s) : a < s && (s -= i <= s && i >= a ? s - i : 0, o = s + (o - a), a = s), { from: s, toA: o, toB: a };}class $e {setSelectionOrigin(t) {this.lastSelectionOrigin = t, this.lastSelectionTime = Date.now();}constructor(t) {this.view = t, this.lastKeyCode = 0, this.lastKeyTime = 0, this.lastTouchTime = 0, this.lastFocusTime = 0, this.lastScrollTop = 0, this.lastScrollLeft = 0, this.pendingIOSKey = void 0, this.tabFocusMode = -1, this.lastSelectionOrigin = null, this.lastSelectionTime = 0, this.lastContextMenu = 0, this.scrollHandlers = [], this.handlers = Object.create(null), this.composing = -1, this.compositionFirstChange = null, this.compositionEndedAt = 0, this.compositionPendingKey = !1, this.compositionPendingChange = !1, this.mouseSelection = null, this.draggedContent = null, this.handleEvent = this.handleEvent.bind(this), this.notifiedFocused = t.hasFocus, v.safari && t.contentDOM.addEventListener("input", () => null), v.gecko && function (t) {yi.has(t) || (yi.add(t), t.addEventListener("copy", () => {}), t.addEventListener("cut", () => {}));}(t.contentDOM.ownerDocument);}handleEvent(t) {(function (t, e) {if (!e.bubbles) return !0;if (e.defaultPrevented) return !1;for (let i, n = e.target; n != t.contentDOM; n = n.parentNode) if (!n || 11 == n.nodeType || (i = U.get(n)) && i.ignoreEvent(e)) return !1;return !0;})(this.view, t) && !this.ignoreDuringComposition(t) && ("keydown" == t.type && this.keydown(t) || (0 != this.view.updateState ? Promise.resolve().then(() => this.runHandlers(t.type, t)) : this.runHandlers(t.type, t)));}runHandlers(t, e) {let i = this.handlers[t];if (i) {for (let t of i.observers) t(this.view, e);for (let t of i.handlers) {if (e.defaultPrevented) break;if (t(this.view, e)) {e.preventDefault();break;}}}}ensureHandlers(t) {let e = We(t),i = this.handlers,n = this.view.contentDOM;for (let t in e) if ("scroll" != t) {let r = !e[t].handlers.length,s = i[t];s && r != !s.handlers.length && (n.removeEventListener(t, this.handleEvent), s = null), s || n.addEventListener(t, this.handleEvent, { passive: r });}for (let t in i) "scroll" == t || e[t] || n.removeEventListener(t, this.handleEvent);this.handlers = e;}keydown(t) {if (this.lastKeyCode = t.keyCode, this.lastKeyTime = Date.now(), 9 == t.keyCode && this.tabFocusMode > -1 && (!this.tabFocusMode || Date.now() <= this.tabFocusMode)) return !0;if (this.tabFocusMode > 0 && 27 != t.keyCode && Ye.indexOf(t.keyCode) < 0 && (this.tabFocusMode = -1), v.android && v.chrome && !t.synthetic && (13 == t.keyCode || 8 == t.keyCode)) return this.view.observer.delayAndroidKey(t.key, t.keyCode), !0;let e;return !v.ios || t.synthetic || t.altKey || t.metaKey || !((e = Ke.find((e) => e.keyCode == t.keyCode)) && !t.ctrlKey || Ze.indexOf(t.key) > -1 && t.ctrlKey && !t.shiftKey) ? (229 != t.keyCode && this.view.observer.forceFlush(), !1) : (this.pendingIOSKey = e || t, setTimeout(() => this.flushIOSKey(), 250), !0);}flushIOSKey(t) {let e = this.pendingIOSKey;return !!e && !("Enter" == e.key && t && t.from < t.to && /^\S+$/.test(t.insert.toString())) && (this.pendingIOSKey = void 0, R(this.view.contentDOM, e.key, e.keyCode, e instanceof KeyboardEvent ? e : void 0));}ignoreDuringComposition(t) {return !(!/^key/.test(t.type) || t.synthetic) && (this.composing > 0 || !!(v.safari && !v.ios && this.compositionPendingKey && Date.now() - this.compositionEndedAt < 100) && (this.compositionPendingKey = !1, !0));}startMouseSelection(t) {this.mouseSelection && this.mouseSelection.destroy(), this.mouseSelection = t;}update(t) {this.view.observer.update(t), this.mouseSelection && this.mouseSelection.update(t), this.draggedContent && t.docChanged && (this.draggedContent = this.draggedContent.map(t.changes)), t.transactions.length && (this.lastKeyCode = this.lastSelectionTime = 0);}destroy() {this.mouseSelection && this.mouseSelection.destroy();}}function Ge(t, e) {return (i, n) => {try {return e.call(t, n, i);} catch (t) {te(i.state, t);}};}function We(t) {let e = Object.create(null);function i(t) {return e[t] || (e[t] = { observers: [], handlers: [] });}for (let e of t) {let t = e.spec,n = t && t.plugin.domEventHandlers,r = t && t.plugin.domEventObservers;if (n) for (let t in n) {let r = n[t];r && i(t).handlers.push(Ge(e.value, r));}if (r) for (let t in r) {let n = r[t];n && i(t).observers.push(Ge(e.value, n));}}for (let t in Qe) i(t).handlers.push(Qe[t]);for (let t in ti) i(t).observers.push(ti[t]);return e;}const Ke = [{ key: "Backspace", keyCode: 8, inputType: "deleteContentBackward" }, { key: "Enter", keyCode: 13, inputType: "insertParagraph" }, { key: "Enter", keyCode: 13, inputType: "insertLineBreak" }, { key: "Delete", keyCode: 46, inputType: "deleteContentForward" }],Ze = "dthko",Ye = [16, 17, 18, 20, 91, 92, 224, 225];function Xe(t) {return .7 * Math.max(0, t) + 8;}class Je {constructor(t, e, i, r) {this.view = t, this.startEvent = e, this.style = i, this.mustSelect = r, this.scrollSpeed = { x: 0, y: 0 }, this.scrolling = -1, this.lastEvent = e, this.scrollParents = function (t) {let e,i,n = t.ownerDocument;for (let r = t.parentNode; r && !(r == n.body || e && i);) if (1 == r.nodeType) !i && r.scrollHeight > r.clientHeight && (i = r), !e && r.scrollWidth > r.clientWidth && (e = r), r = r.assignedSlot || r.parentNode;else {if (11 != r.nodeType) break;r = r.host;}return { x: e, y: i };}(t.contentDOM), this.atoms = t.state.facet(he).map((e) => e(t));let s = t.contentDOM.ownerDocument;s.addEventListener("mousemove", this.move = this.move.bind(this)), s.addEventListener("mouseup", this.up = this.up.bind(this)), this.extend = e.shiftKey, this.multiple = t.state.facet(n.$t.allowMultipleSelections) && function (t, e) {let i = t.state.facet(Bt);return i.length ? i[0](e) : v.mac ? e.metaKey : e.ctrlKey;}(t, e), this.dragging = !(!function (t, e) {let { main: i } = t.state.selection;if (i.empty) return !1;let n = y(t.root);if (!n || 0 == n.rangeCount) return !0;let r = n.getRangeAt(0).getClientRects();for (let t = 0; t < r.length; t++) {let i = r[t];if (i.left <= e.clientX && i.right >= e.clientX && i.top <= e.clientY && i.bottom >= e.clientY) return !0;}return !1;}(t, e) || 1 != di(e)) && null;}start(t) {!1 === this.dragging && this.select(t);}move(t) {if (0 == t.buttons) return this.destroy();if (this.dragging || null == this.dragging && (e = this.startEvent, i = t, Math.max(Math.abs(e.clientX - i.clientX), Math.abs(e.clientY - i.clientY)) < 10)) return;var e, i;this.select(this.lastEvent = t);let n = 0,r = 0,s = 0,o = 0,a = this.view.win.innerWidth,l = this.view.win.innerHeight;this.scrollParents.x && ({ left: s, right: a } = this.scrollParents.x.getBoundingClientRect()), this.scrollParents.y && ({ top: o, bottom: l } = this.scrollParents.y.getBoundingClientRect());let c = fe(this.view);t.clientX - c.left <= s + 6 ? n = -Xe(s - t.clientX) : t.clientX + c.right >= a - 6 && (n = Xe(t.clientX - a)), t.clientY - c.top <= o + 6 ? r = -Xe(o - t.clientY) : t.clientY + c.bottom >= l - 6 && (r = Xe(t.clientY - l)), this.setScrollSpeed(n, r);}up(t) {null == this.dragging && this.select(this.lastEvent), this.dragging || t.preventDefault(), this.destroy();}destroy() {this.setScrollSpeed(0, 0);let t = this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove", this.move), t.removeEventListener("mouseup", this.up), this.view.inputState.mouseSelection = this.view.inputState.draggedContent = null;}setScrollSpeed(t, e) {this.scrollSpeed = { x: t, y: e }, t || e ? this.scrolling < 0 && (this.scrolling = setInterval(() => this.scroll(), 50)) : this.scrolling > -1 && (clearInterval(this.scrolling), this.scrolling = -1);}scroll() {let { x: t, y: e } = this.scrollSpeed;t && this.scrollParents.x && (this.scrollParents.x.scrollLeft += t, t = 0), e && this.scrollParents.y && (this.scrollParents.y.scrollTop += e, e = 0), (t || e) && this.view.win.scrollBy(t, e), !1 === this.dragging && this.select(this.lastEvent);}select(t) {let { view: e } = this,i = Fe(this.atoms, this.style.get(t, this.extend, this.multiple));!this.mustSelect && i.eq(e.state.selection, !1 === this.dragging) || this.view.dispatch({ selection: i, userEvent: "select.pointer" }), this.mustSelect = !1;}update(t) {t.transactions.some((t) => t.isUserEvent("input.type")) ? this.destroy() : this.style.update(t) && setTimeout(() => this.select(this.lastEvent), 20);}}const Qe = Object.create(null),ti = Object.create(null),ei = v.ie && v.ie_version < 15 || v.ios && v.webkit_version < 604;function ii(t, e, i) {for (let n of t.facet(e)) i = n(i, t);return i;}function ni(t, e) {e = ii(t.state, Gt, e);let i,{ state: r } = t,s = 1,o = r.toText(e),a = o.lines == r.selection.ranges.length;if (null != fi && r.selection.ranges.every((t) => t.empty) && fi == o.toString()) {let t = -1;i = r.changeByRange((i) => {let l = r.doc.lineAt(i.from);if (l.from == t) return { range: i };t = l.from;let c = r.toText((a ? o.line(s++).text : e) + r.lineBreak);return { changes: { from: l.from, insert: c }, range: n.OF.cursor(i.from + c.length) };});} else i = a ? r.changeByRange((t) => {let e = o.line(s++);return { changes: { from: t.from, to: t.to, insert: e.text }, range: n.OF.cursor(t.from + e.length) };}) : r.replaceSelection(o);t.dispatch(i, { userEvent: "input.paste", scrollIntoView: !0 });}function ri(t, e, i, r) {if (1 == r) return n.OF.cursor(e, i);if (2 == r) return function (t, e, i = 1) {let r = t.charCategorizer(e),s = t.doc.lineAt(e),o = e - s.from;if (0 == s.length) return n.OF.cursor(e);0 == o ? i = 1 : o == s.length && (i = -1);let a = o,l = o;i < 0 ? a = (0, n.zK)(s.text, o, !1) : l = (0, n.zK)(s.text, o);let c = r(s.text.slice(a, l));for (; a > 0;) {let t = (0, n.zK)(s.text, a, !1);if (r(s.text.slice(t, a)) != c) break;a = t;}for (; l < s.length;) {let t = (0, n.zK)(s.text, l);if (r(s.text.slice(l, t)) != c) break;l = t;}return n.OF.range(a + s.from, l + s.from);}(t.state, e, i);{let i = ft.find(t.docView, e),r = t.state.doc.lineAt(i ? i.posAtEnd : e),s = i ? i.posAtStart : r.from,o = i ? i.posAtEnd : r.to;return o < t.state.doc.length && o == r.to && o++, n.OF.range(s, o);}}ti.scroll = (t) => {t.inputState.lastScrollTop = t.scrollDOM.scrollTop, t.inputState.lastScrollLeft = t.scrollDOM.scrollLeft;}, Qe.keydown = (t, e) => (t.inputState.setSelectionOrigin("select"), 27 == e.keyCode && 0 != t.inputState.tabFocusMode && (t.inputState.tabFocusMode = Date.now() + 2e3), !1), ti.touchstart = (t, e) => {t.inputState.lastTouchTime = Date.now(), t.inputState.setSelectionOrigin("select.pointer");}, ti.touchmove = (t) => {t.inputState.setSelectionOrigin("select.pointer");}, Qe.mousedown = (t, e) => {if (t.observer.flush(), t.inputState.lastTouchTime > Date.now() - 2e3) return !1;let i = null;for (let n of t.state.facet(zt)) if (i = n(t, e), i) break;if (i || 0 != e.button || (i = function (t, e) {let i = ai(t, e),r = di(e),s = t.state.selection;return { update(t) {t.docChanged && (i.pos = t.changes.mapPos(i.pos), s = s.map(t.changes));}, get(e, o, a) {let l,c = ai(t, e),h = ri(t, c.pos, c.bias, r);if (i.pos != c.pos && !o) {let e = ri(t, i.pos, i.bias, r),s = Math.min(e.from, h.from),o = Math.max(e.to, h.to);h = s < h.from ? n.OF.range(s, o) : n.OF.range(o, s);}return o ? s.replaceRange(s.main.extend(h.from, h.to)) : a && 1 == r && s.ranges.length > 1 && (l = function (t, e) {for (let i = 0; i < t.ranges.length; i++) {let { from: r, to: s } = t.ranges[i];if (r <= e && s >= e) return n.OF.create(t.ranges.slice(0, i).concat(t.ranges.slice(i + 1)), t.mainIndex == i ? 0 : t.mainIndex - (t.mainIndex > i ? 1 : 0));}return null;}(s, c.pos)) ? l : a ? s.addRange(h) : n.OF.create([h]);} };}(t, e)), i) {let n = !t.hasFocus;t.inputState.startMouseSelection(new Je(t, e, i, n)), n && t.observer.ignore(() => {I(t.contentDOM);let e = t.root.activeElement;e && !e.contains(t.contentDOM) && e.blur();});let r = t.inputState.mouseSelection;if (r) return r.start(e), !1 === r.dragging;} else t.inputState.setSelectionOrigin("select.pointer");return !1;};let si = (t, e, i) => e >= i.top && e <= i.bottom && t >= i.left && t <= i.right;function oi(t, e, i, n) {let r = ft.find(t.docView, e);if (!r) return 1;let s = e - r.posAtStart;if (0 == s) return 1;if (s == r.length) return -1;let o = r.coordsAt(s, -1);if (o && si(i, n, o)) return -1;let a = r.coordsAt(s, 1);return a && si(i, n, a) ? 1 : o && o.bottom >= n ? -1 : 1;}function ai(t, e) {let i = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);return { pos: i, bias: oi(t, i, e.clientX, e.clientY) };}const li = v.ie && v.ie_version <= 11;let ci = null,hi = 0,ui = 0;function di(t) {if (!li) return t.detail;let e = ci,i = ui;return ci = t, ui = Date.now(), hi = !e || i > Date.now() - 400 && Math.abs(e.clientX - t.clientX) < 2 && Math.abs(e.clientY - t.clientY) < 2 ? (hi + 1) % 3 : 1;}function pi(t, e, i, n) {if (!(i = ii(t.state, Gt, i))) return;let r = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1),{ draggedContent: s } = t.inputState,o = n && s && function (t, e) {let i = t.state.facet(jt);return i.length ? i[0](e) : v.mac ? !e.altKey : !e.ctrlKey;}(t, e) ? { from: s.from, to: s.to } : null,a = { from: r, insert: i },l = t.state.changes(o ? [o, a] : a);t.focus(), t.dispatch({ changes: l, selection: { anchor: l.mapPos(r, -1), head: l.mapPos(r, 1) }, userEvent: o ? "move.drop" : "input.drop" }), t.inputState.draggedContent = null;}Qe.dragstart = (t, e) => {let { selection: { main: i } } = t.state;if (e.target.draggable) {let r = t.docView.nearest(e.target);if (r && r.isWidget) {let t = r.posAtStart,e = t + r.length;(t >= i.to || e <= i.from) && (i = n.OF.range(t, e));}}let { inputState: r } = t;return r.mouseSelection && (r.mouseSelection.dragging = !0), r.draggedContent = i, e.dataTransfer && (e.dataTransfer.setData("Text", ii(t.state, Wt, t.state.sliceDoc(i.from, i.to))), e.dataTransfer.effectAllowed = "copyMove"), !1;}, Qe.dragend = (t) => (t.inputState.draggedContent = null, !1), Qe.drop = (t, e) => {if (!e.dataTransfer) return !1;if (t.state.readOnly) return !0;let i = e.dataTransfer.files;if (i && i.length) {let n = Array(i.length),r = 0,s = () => {++r == i.length && pi(t, e, n.filter((t) => null != t).join(t.state.lineBreak), !1);};for (let t = 0; t < i.length; t++) {let e = new FileReader();e.onerror = s, e.onload = () => {/[\x00-\x08\x0e-\x1f]{2}/.test(e.result) || (n[t] = e.result), s();}, e.readAsText(i[t]);}return !0;}{let i = e.dataTransfer.getData("Text");if (i) return pi(t, e, i, !0), !0;}return !1;}, Qe.paste = (t, e) => {if (t.state.readOnly) return !0;t.observer.flush();let i = ei ? null : e.clipboardData;return i ? (ni(t, i.getData("text/plain") || i.getData("text/uri-list")), !0) : (function (t) {let e = t.dom.parentNode;if (!e) return;let i = e.appendChild(document.createElement("textarea"));i.style.cssText = "position: fixed; left: -10000px; top: 10px", i.focus(), setTimeout(() => {t.focus(), i.remove(), ni(t, i.value);}, 50);}(t), !1);};let fi = null;Qe.copy = Qe.cut = (t, e) => {let { text: i, ranges: n, linewise: r } = function (t) {let e = [],i = [],n = !1;for (let n of t.selection.ranges) n.empty || (e.push(t.sliceDoc(n.from, n.to)), i.push(n));if (!e.length) {let r = -1;for (let { from: n } of t.selection.ranges) {let s = t.doc.lineAt(n);s.number > r && (e.push(s.text), i.push({ from: s.from, to: Math.min(t.doc.length, s.to + 1) })), r = s.number;}n = !0;}return { text: ii(t, Wt, e.join(t.lineBreak)), ranges: i, linewise: n };}(t.state);if (!i && !r) return !1;fi = r ? i : null, "cut" != e.type || t.state.readOnly || t.dispatch({ changes: n, scrollIntoView: !0, userEvent: "delete.cut" });let s = ei ? null : e.clipboardData;return s ? (s.clearData(), s.setData("text/plain", i), !0) : (function (t, e) {let i = t.dom.parentNode;if (!i) return;let n = i.appendChild(document.createElement("textarea"));n.style.cssText = "position: fixed; left: -10000px; top: 10px", n.value = e, n.focus(), n.selectionEnd = e.length, n.selectionStart = 0, setTimeout(() => {n.remove(), t.focus();}, 50);}(t, i), !1);};const gi = n.YH.define();function mi(t, e) {let i = [];for (let n of t.facet($t)) {let r = n(t, e);r && i.push(r);}return i.length ? t.update({ effects: i, annotations: gi.of(!0) }) : null;}function vi(t) {setTimeout(() => {let e = t.hasFocus;if (e != t.inputState.notifiedFocused) {let i = mi(t.state, e);i ? t.dispatch(i) : t.update([]);}}, 10);}ti.focus = (t) => {t.inputState.lastFocusTime = Date.now(), t.scrollDOM.scrollTop || !t.inputState.lastScrollTop && !t.inputState.lastScrollLeft || (t.scrollDOM.scrollTop = t.inputState.lastScrollTop, t.scrollDOM.scrollLeft = t.inputState.lastScrollLeft), vi(t);}, ti.blur = (t) => {t.observer.clearSelectionRange(), vi(t);}, ti.compositionstart = ti.compositionupdate = (t) => {t.observer.editContext || (null == t.inputState.compositionFirstChange && (t.inputState.compositionFirstChange = !0), t.inputState.composing < 0 && (t.inputState.composing = 0));}, ti.compositionend = (t) => {t.observer.editContext || (t.inputState.composing = -1, t.inputState.compositionEndedAt = Date.now(), t.inputState.compositionPendingKey = !0, t.inputState.compositionPendingChange = t.observer.pendingRecords().length > 0, t.inputState.compositionFirstChange = null, v.chrome && v.android ? t.observer.flushSoon() : t.inputState.compositionPendingChange ? Promise.resolve().then(() => t.observer.flush()) : setTimeout(() => {t.inputState.composing < 0 && t.docView.hasComposition && t.update([]);}, 50));}, ti.contextmenu = (t) => {t.inputState.lastContextMenu = Date.now();}, Qe.beforeinput = (t, e) => {var i, n;if ("insertReplacementText" == e.inputType && t.observer.editContext) {let n = null === (i = e.dataTransfer) || void 0 === i ? void 0 : i.getData("text/plain"),r = e.getTargetRanges();if (n && r.length) {let e = r[0],i = t.posAtDOM(e.startContainer, e.startOffset),s = t.posAtDOM(e.endContainer, e.endOffset);return He(t, { from: i, to: s, insert: t.state.toText(n) }, null), !0;}}let r;if (v.chrome && v.android && (r = Ke.find((t) => t.inputType == e.inputType)) && (t.observer.delayAndroidKey(r.key, r.keyCode), "Backspace" == r.key || "Delete" == r.key)) {let e = (null === (n = window.visualViewport) || void 0 === n ? void 0 : n.height) || 0;setTimeout(() => {var i;((null === (i = window.visualViewport) || void 0 === i ? void 0 : i.height) || 0) > e + 10 && t.hasFocus && (t.contentDOM.blur(), t.focus());}, 100);}return v.ios && "deleteContentForward" == e.inputType && t.observer.flushSoon(), v.safari && "insertText" == e.inputType && t.inputState.composing >= 0 && setTimeout(() => ti.compositionend(t, e), 20), !1;};const yi = new Set(),bi = ["pre-wrap", "normal", "pre-line", "break-spaces"];let wi = !1;function xi() {wi = !1;}class Si {constructor(t) {this.lineWrapping = t, this.doc = n.EY.empty, this.heightSamples = {}, this.lineHeight = 14, this.charWidth = 7, this.textHeight = 14, this.lineLength = 30;}heightForGap(t, e) {let i = this.doc.lineAt(e).number - this.doc.lineAt(t).number + 1;return this.lineWrapping && (i += Math.max(0, Math.ceil((e - t - i * this.lineLength * .5) / this.lineLength))), this.lineHeight * i;}heightForLine(t) {return this.lineWrapping ? (1 + Math.max(0, Math.ceil((t - this.lineLength) / Math.max(1, this.lineLength - 5)))) * this.lineHeight : this.lineHeight;}setDoc(t) {return this.doc = t, this;}mustRefreshForWrapping(t) {return bi.indexOf(t) > -1 != this.lineWrapping;}mustRefreshForHeights(t) {let e = !1;for (let i = 0; i < t.length; i++) {let n = t[i];n < 0 ? i++ : this.heightSamples[Math.floor(10 * n)] || (e = !0, this.heightSamples[Math.floor(10 * n)] = !0);}return e;}refresh(t, e, i, n, r, s) {let o = bi.indexOf(t) > -1,a = Math.round(e) != Math.round(this.lineHeight) || this.lineWrapping != o;if (this.lineWrapping = o, this.lineHeight = e, this.charWidth = i, this.textHeight = n, this.lineLength = r, a) {this.heightSamples = {};for (let t = 0; t < s.length; t++) {let e = s[t];e < 0 ? t++ : this.heightSamples[Math.floor(10 * e)] = !0;}}return a;}}class Ei {constructor(t, e) {this.from = t, this.heights = e, this.index = 0;}get more() {return this.index < this.heights.length;}}class Ci {constructor(t, e, i, n, r) {this.from = t, this.length = e, this.top = i, this.height = n, this._content = r;}get type() {return "number" == typeof this._content ? at.Text : Array.isArray(this._content) ? this._content : this._content.type;}get to() {return this.from + this.length;}get bottom() {return this.top + this.height;}get widget() {return this._content instanceof ut ? this._content.widget : null;}get widgetLineBreaks() {return "number" == typeof this._content ? this._content : 0;}join(t) {let e = (Array.isArray(this._content) ? this._content : [this]).concat(Array.isArray(t._content) ? t._content : [t]);return new Ci(this.from, this.length + t.length, this.top, this.height + t.height, e);}}var ki = function (t) {return t[t.ByPos = 0] = "ByPos", t[t.ByHeight = 1] = "ByHeight", t[t.ByPosNoHeight = 2] = "ByPosNoHeight", t;}(ki || (ki = {}));const Ti = .001;class Ai {constructor(t, e, i = 2) {this.length = t, this.height = e, this.flags = i;}get outdated() {return (2 & this.flags) > 0;}set outdated(t) {this.flags = (t ? 2 : 0) | -3 & this.flags;}setHeight(t) {this.height != t && (Math.abs(this.height - t) > Ti && (wi = !0), this.height = t);}replace(t, e, i) {return Ai.of(i);}decomposeLeft(t, e) {e.push(this);}decomposeRight(t, e) {e.push(this);}applyChanges(t, e, i, n) {let r = this,s = i.doc;for (let o = n.length - 1; o >= 0; o--) {let { fromA: a, toA: l, fromB: c, toB: h } = n[o],u = r.lineAt(a, ki.ByPosNoHeight, i.setDoc(e), 0, 0),d = u.to >= l ? u : r.lineAt(l, ki.ByPosNoHeight, i, 0, 0);for (h += d.to - l, l = d.to; o > 0 && u.from <= n[o - 1].toA;) a = n[o - 1].fromA, c = n[o - 1].fromB, o--, a < u.from && (u = r.lineAt(a, ki.ByPosNoHeight, i, 0, 0));c += u.from - a, a = u.from;let p = Fi.build(i.setDoc(s), t, c, h);r = Mi(r, r.replace(a, l, p));}return r.updateHeight(i, 0);}static empty() {return new Pi(0, 0);}static of(t) {if (1 == t.length) return t[0];let e = 0,i = t.length,n = 0,r = 0;for (;;) if (e == i) {if (n > 2 * r) {let r = t[e - 1];r.break ? t.splice(--e, 1, r.left, null, r.right) : t.splice(--e, 1, r.left, r.right), i += 1 + r.break, n -= r.size;} else {if (!(r > 2 * n)) break;{let e = t[i];e.break ? t.splice(i, 1, e.left, null, e.right) : t.splice(i, 1, e.left, e.right), i += 2 + e.break, r -= e.size;}}} else if (n < r) {let i = t[e++];i && (n += i.size);} else {let e = t[--i];e && (r += e.size);}let s = 0;return null == t[e - 1] ? (s = 1, e--) : null == t[e] && (s = 1, i++), new Oi(Ai.of(t.slice(0, e)), s, Ai.of(t.slice(i)));}}function Mi(t, e) {return t == e ? t : (t.constructor != e.constructor && (wi = !0), e);}Ai.prototype.size = 1;class _i extends Ai {constructor(t, e, i) {super(t, e), this.deco = i;}blockAt(t, e, i, n) {return new Ci(n, this.length, i, this.height, this.deco || 0);}lineAt(t, e, i, n, r) {return this.blockAt(0, i, n, r);}forEachLine(t, e, i, n, r, s) {t <= r + this.length && e >= r && s(this.blockAt(0, i, n, r));}updateHeight(t, e = 0, i = !1, n) {return n && n.from <= e && n.more && this.setHeight(n.heights[n.index++]), this.outdated = !1, this;}toString() {return `block(${this.length})`;}}class Pi extends _i {constructor(t, e) {super(t, e, null), this.collapsed = 0, this.widgetHeight = 0, this.breaks = 0;}blockAt(t, e, i, n) {return new Ci(n, this.length, i, this.height, this.breaks);}replace(t, e, i) {let n = i[0];return 1 == i.length && (n instanceof Pi || n instanceof Di && 4 & n.flags) && Math.abs(this.length - n.length) < 10 ? (n instanceof Di ? n = new Pi(n.length, this.height) : n.height = this.height, this.outdated || (n.outdated = !1), n) : Ai.of(i);}updateHeight(t, e = 0, i = !1, n) {return n && n.from <= e && n.more ? this.setHeight(n.heights[n.index++]) : (i || this.outdated) && this.setHeight(Math.max(this.widgetHeight, t.heightForLine(this.length - this.collapsed)) + this.breaks * t.lineHeight), this.outdated = !1, this;}toString() {return `line(${this.length}${this.collapsed ? -this.collapsed : ""}${this.widgetHeight ? ":" + this.widgetHeight : ""})`;}}class Di extends Ai {constructor(t) {super(t, 0);}heightMetrics(t, e) {let i,n = t.doc.lineAt(e).number,r = t.doc.lineAt(e + this.length).number,s = r - n + 1,o = 0;if (t.lineWrapping) {let e = Math.min(this.height, t.lineHeight * s);i = e / s, this.length > s + 1 && (o = (this.height - e) / (this.length - s - 1));} else i = this.height / s;return { firstLine: n, lastLine: r, perLine: i, perChar: o };}blockAt(t, e, i, n) {let { firstLine: r, lastLine: s, perLine: o, perChar: a } = this.heightMetrics(e, n);if (e.lineWrapping) {let r = n + (t < e.lineHeight ? 0 : Math.round(Math.max(0, Math.min(1, (t - i) / this.height)) * this.length)),s = e.doc.lineAt(r),l = o + s.length * a,c = Math.max(i, t - l / 2);return new Ci(s.from, s.length, c, l, 0);}{let n = Math.max(0, Math.min(s - r, Math.floor((t - i) / o))),{ from: a, length: l } = e.doc.line(r + n);return new Ci(a, l, i + o * n, o, 0);}}lineAt(t, e, i, n, r) {if (e == ki.ByHeight) return this.blockAt(t, i, n, r);if (e == ki.ByPosNoHeight) {let { from: e, to: n } = i.doc.lineAt(t);return new Ci(e, n - e, 0, 0, 0);}let { firstLine: s, perLine: o, perChar: a } = this.heightMetrics(i, r),l = i.doc.lineAt(t),c = o + l.length * a,h = l.number - s,u = n + o * h + a * (l.from - r - h);return new Ci(l.from, l.length, Math.max(n, Math.min(u, n + this.height - c)), c, 0);}forEachLine(t, e, i, n, r, s) {t = Math.max(t, r), e = Math.min(e, r + this.length);let { firstLine: o, perLine: a, perChar: l } = this.heightMetrics(i, r);for (let c = t, h = n; c <= e;) {let e = i.doc.lineAt(c);if (c == t) {let i = e.number - o;h += a * i + l * (t - r - i);}let n = a + l * e.length;s(new Ci(e.from, e.length, h, n, 0)), h += n, c = e.to + 1;}}replace(t, e, i) {let n = this.length - e;if (n > 0) {let t = i[i.length - 1];t instanceof Di ? i[i.length - 1] = new Di(t.length + n) : i.push(null, new Di(n - 1));}if (t > 0) {let e = i[0];e instanceof Di ? i[0] = new Di(t + e.length) : i.unshift(new Di(t - 1), null);}return Ai.of(i);}decomposeLeft(t, e) {e.push(new Di(t - 1), null);}decomposeRight(t, e) {e.push(null, new Di(this.length - t - 1));}updateHeight(t, e = 0, i = !1, n) {let r = e + this.length;if (n && n.from <= e + this.length && n.more) {let i = [],s = Math.max(e, n.from),o = -1;for (n.from > e && i.push(new Di(n.from - e - 1).updateHeight(t, e)); s <= r && n.more;) {let e = t.doc.lineAt(s).length;i.length && i.push(null);let r = n.heights[n.index++];-1 == o ? o = r : Math.abs(r - o) >= Ti && (o = -2);let a = new Pi(e, r);a.outdated = !1, i.push(a), s += e + 1;}s <= r && i.push(null, new Di(r - s).updateHeight(t, s));let a = Ai.of(i);return (o < 0 || Math.abs(a.height - this.height) >= Ti || Math.abs(o - this.heightMetrics(t, e).perLine) >= Ti) && (wi = !0), Mi(this, a);}return (i || this.outdated) && (this.setHeight(t.heightForGap(e, e + this.length)), this.outdated = !1), this;}toString() {return `gap(${this.length})`;}}class Oi extends Ai {constructor(t, e, i) {super(t.length + e + i.length, t.height + i.height, e | (t.outdated || i.outdated ? 2 : 0)), this.left = t, this.right = i, this.size = t.size + i.size;}get break() {return 1 & this.flags;}blockAt(t, e, i, n) {let r = i + this.left.height;return t < r ? this.left.blockAt(t, e, i, n) : this.right.blockAt(t, e, r, n + this.left.length + this.break);}lineAt(t, e, i, n, r) {let s = n + this.left.height,o = r + this.left.length + this.break,a = e == ki.ByHeight ? t < s : t < o,l = a ? this.left.lineAt(t, e, i, n, r) : this.right.lineAt(t, e, i, s, o);if (this.break || (a ? l.to < o : l.from > o)) return l;let c = e == ki.ByPosNoHeight ? ki.ByPosNoHeight : ki.ByPos;return a ? l.join(this.right.lineAt(o, c, i, s, o)) : this.left.lineAt(o, c, i, n, r).join(l);}forEachLine(t, e, i, n, r, s) {let o = n + this.left.height,a = r + this.left.length + this.break;if (this.break) t < a && this.left.forEachLine(t, e, i, n, r, s), e >= a && this.right.forEachLine(t, e, i, o, a, s);else {let l = this.lineAt(a, ki.ByPos, i, n, r);t < l.from && this.left.forEachLine(t, l.from - 1, i, n, r, s), l.to >= t && l.from <= e && s(l), e > l.to && this.right.forEachLine(l.to + 1, e, i, o, a, s);}}replace(t, e, i) {let n = this.left.length + this.break;if (e < n) return this.balanced(this.left.replace(t, e, i), this.right);if (t > this.left.length) return this.balanced(this.left, this.right.replace(t - n, e - n, i));let r = [];t > 0 && this.decomposeLeft(t, r);let s = r.length;for (let t of i) r.push(t);if (t > 0 && Ii(r, s - 1), e < this.length) {let t = r.length;this.decomposeRight(e, r), Ii(r, t);}return Ai.of(r);}decomposeLeft(t, e) {let i = this.left.length;if (t <= i) return this.left.decomposeLeft(t, e);e.push(this.left), this.break && (i++, t >= i && e.push(null)), t > i && this.right.decomposeLeft(t - i, e);}decomposeRight(t, e) {let i = this.left.length,n = i + this.break;if (t >= n) return this.right.decomposeRight(t - n, e);t < i && this.left.decomposeRight(t, e), this.break && t < n && e.push(null), e.push(this.right);}balanced(t, e) {return t.size > 2 * e.size || e.size > 2 * t.size ? Ai.of(this.break ? [t, null, e] : [t, e]) : (this.left = Mi(this.left, t), this.right = Mi(this.right, e), this.setHeight(t.height + e.height), this.outdated = t.outdated || e.outdated, this.size = t.size + e.size, this.length = t.length + this.break + e.length, this);}updateHeight(t, e = 0, i = !1, n) {let { left: r, right: s } = this,o = e + r.length + this.break,a = null;return n && n.from <= e + r.length && n.more ? a = r = r.updateHeight(t, e, i, n) : r.updateHeight(t, e, i), n && n.from <= o + s.length && n.more ? a = s = s.updateHeight(t, o, i, n) : s.updateHeight(t, o, i), a ? this.balanced(r, s) : (this.height = this.left.height + this.right.height, this.outdated = !1, this);}toString() {return this.left + (this.break ? " " : "-") + this.right;}}function Ii(t, e) {let i, n;null == t[e] && (i = t[e - 1]) instanceof Di && (n = t[e + 1]) instanceof Di && t.splice(e - 1, 3, new Di(i.length + 1 + n.length));}class Fi {constructor(t, e) {this.pos = t, this.oracle = e, this.nodes = [], this.lineStart = -1, this.lineEnd = -1, this.covering = null, this.writtenTo = t;}get isCovered() {return this.covering && this.nodes[this.nodes.length - 1] == this.covering;}span(t, e) {if (this.lineStart > -1) {let t = Math.min(e, this.lineEnd),i = this.nodes[this.nodes.length - 1];i instanceof Pi ? i.length += t - this.pos : (t > this.pos || !this.isCovered) && this.nodes.push(new Pi(t - this.pos, -1)), this.writtenTo = t, e > t && (this.nodes.push(null), this.writtenTo++, this.lineStart = -1);}this.pos = e;}point(t, e, i) {if (t < e || i.heightRelevant) {let n = i.widget ? i.widget.estimatedHeight : 0,r = i.widget ? i.widget.lineBreaks : 0;n < 0 && (n = this.oracle.lineHeight);let s = e - t;i.block ? this.addBlock(new _i(s, n, i)) : (s || r || n >= 5) && this.addLineDeco(n, r, s);} else e > t && this.span(t, e);this.lineEnd > -1 && this.lineEnd < this.pos && (this.lineEnd = this.oracle.doc.lineAt(this.pos).to);}enterLine() {if (this.lineStart > -1) return;let { from: t, to: e } = this.oracle.doc.lineAt(this.pos);this.lineStart = t, this.lineEnd = e, this.writtenTo < t && ((this.writtenTo < t - 1 || null == this.nodes[this.nodes.length - 1]) && this.nodes.push(this.blankContent(this.writtenTo, t - 1)), this.nodes.push(null)), this.pos > t && this.nodes.push(new Pi(this.pos - t, -1)), this.writtenTo = this.pos;}blankContent(t, e) {let i = new Di(e - t);return this.oracle.doc.lineAt(t).to == e && (i.flags |= 4), i;}ensureLine() {this.enterLine();let t = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;if (t instanceof Pi) return t;let e = new Pi(0, -1);return this.nodes.push(e), e;}addBlock(t) {this.enterLine();let e = t.deco;e && e.startSide > 0 && !this.isCovered && this.ensureLine(), this.nodes.push(t), this.writtenTo = this.pos = this.pos + t.length, e && e.endSide > 0 && (this.covering = t);}addLineDeco(t, e, i) {let n = this.ensureLine();n.length += i, n.collapsed += i, n.widgetHeight = Math.max(n.widgetHeight, t), n.breaks += e, this.writtenTo = this.pos = this.pos + i;}finish(t) {let e = 0 == this.nodes.length ? null : this.nodes[this.nodes.length - 1];!(this.lineStart > -1) || e instanceof Pi || this.isCovered ? (this.writtenTo < this.pos || null == e) && this.nodes.push(this.blankContent(this.writtenTo, this.pos)) : this.nodes.push(new Pi(0, -1));let i = t;for (let t of this.nodes) t instanceof Pi && t.updateHeight(this.oracle, i), i += t ? t.length : 1;return this.nodes;}static build(t, e, i, r) {let s = new Fi(i, t);return n.om.spans(e, i, r, s, 0), s.finish(i);}}class Ri {constructor() {this.changes = [];}compareRange() {}comparePoint(t, e, i, n) {(t < e || i && i.heightRelevant || n && n.heightRelevant) && pt(t, e, this.changes, 5);}}function Li(t, e) {let i = t.getBoundingClientRect(),n = t.ownerDocument,r = n.defaultView || window,s = Math.max(0, i.left),o = Math.min(r.innerWidth, i.right),a = Math.max(0, i.top),l = Math.min(r.innerHeight, i.bottom);for (let e = t.parentNode; e && e != n.body;) if (1 == e.nodeType) {let i = e,n = window.getComputedStyle(i);if ((i.scrollHeight > i.clientHeight || i.scrollWidth > i.clientWidth) && "visible" != n.overflow) {let n = i.getBoundingClientRect();s = Math.max(s, n.left), o = Math.min(o, n.right), a = Math.max(a, n.top), l = Math.min(e == t.parentNode ? r.innerHeight : l, n.bottom);}e = "absolute" == n.position || "fixed" == n.position ? i.offsetParent : i.parentNode;} else {if (11 != e.nodeType) break;e = e.host;}return { left: s - i.left, right: Math.max(s, o) - i.left, top: a - (i.top + e), bottom: Math.max(a, l) - (i.top + e) };}function Ni(t, e) {let i = t.getBoundingClientRect();return { left: 0, right: i.right - i.left, top: e, bottom: i.bottom - (i.top + e) };}class Vi {constructor(t, e, i, n) {this.from = t, this.to = e, this.size = i, this.displaySize = n;}static same(t, e) {if (t.length != e.length) return !1;for (let i = 0; i < t.length; i++) {let n = t[i],r = e[i];if (n.from != r.from || n.to != r.to || n.size != r.size) return !1;}return !0;}draw(t, e) {return lt.replace({ widget: new Bi(this.displaySize * (e ? t.scaleY : t.scaleX), e) }).range(this.from, this.to);}}class Bi extends ot {constructor(t, e) {super(), this.size = t, this.vertical = e;}eq(t) {return t.size == this.size && t.vertical == this.vertical;}toDOM() {let t = document.createElement("div");return this.vertical ? t.style.height = this.size + "px" : (t.style.width = this.size + "px", t.style.height = "2px", t.style.display = "inline-block"), t;}get estimatedHeight() {return this.vertical ? this.size : -1;}}class ji {constructor(t) {this.state = t, this.pixelViewport = { left: 0, right: window.innerWidth, top: 0, bottom: 0 }, this.inView = !0, this.paddingTop = 0, this.paddingBottom = 0, this.contentDOMWidth = 0, this.contentDOMHeight = 0, this.editorHeight = 0, this.editorWidth = 0, this.scrollTop = 0, this.scrolledToBottom = !1, this.scaleX = 1, this.scaleY = 1, this.scrollAnchorPos = 0, this.scrollAnchorHeight = -1, this.scaler = qi, this.scrollTarget = null, this.printing = !1, this.mustMeasureContent = !0, this.defaultTextDirection = wt.LTR, this.visibleRanges = [], this.mustEnforceCursorAssoc = !1;let e = t.facet(ae).some((t) => "function" != typeof t && "cm-lineWrapping" == t.class);this.heightOracle = new Si(e), this.stateDeco = t.facet(le).filter((t) => "function" != typeof t), this.heightMap = Ai.empty().applyChanges(this.stateDeco, n.EY.empty, this.heightOracle.setDoc(t.doc), [new me(0, 0, 0, t.doc.length)]);for (let t = 0; t < 2 && (this.viewport = this.getViewport(0, null), this.updateForViewport()); t++);this.updateViewportLines(), this.lineGaps = this.ensureLineGaps([]), this.lineGapDeco = lt.set(this.lineGaps.map((t) => t.draw(this, !1))), this.computeVisibleRanges();}updateForViewport() {let t = [this.viewport],{ main: e } = this.state.selection;for (let i = 0; i <= 1; i++) {let n = i ? e.head : e.anchor;if (!t.some(({ from: t, to: e }) => n >= t && n <= e)) {let { from: e, to: i } = this.lineBlockAt(n);t.push(new zi(e, i));}}return this.viewports = t.sort((t, e) => t.from - e.from), this.updateScaler();}updateScaler() {let t = this.scaler;return this.scaler = this.heightMap.height <= 7e6 ? qi : new $i(this.heightOracle, this.heightMap, this.viewports), t.eq(this.scaler) ? 0 : 2;}updateViewportLines() {this.viewportLines = [], this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.heightOracle.setDoc(this.state.doc), 0, 0, (t) => {this.viewportLines.push(Gi(t, this.scaler));});}update(t, e = null) {this.state = t.state;let i = this.stateDeco;this.stateDeco = this.state.facet(le).filter((t) => "function" != typeof t);let r = t.changedRanges,s = me.extendWithRanges(r, function (t, e, i) {let r = new Ri();return n.om.compare(t, e, i, r, 0), r.changes;}(i, this.stateDeco, t ? t.changes : n.VR.empty(this.state.doc.length))),o = this.heightMap.height,a = this.scrolledToBottom ? null : this.scrollAnchorAt(this.scrollTop);xi(), this.heightMap = this.heightMap.applyChanges(this.stateDeco, t.startState.doc, this.heightOracle.setDoc(this.state.doc), s), (this.heightMap.height != o || wi) && (t.flags |= 2), a ? (this.scrollAnchorPos = t.changes.mapPos(a.from, -1), this.scrollAnchorHeight = a.top) : (this.scrollAnchorPos = -1, this.scrollAnchorHeight = o);let l = s.length ? this.mapViewport(this.viewport, t.changes) : this.viewport;(e && (e.range.head < l.from || e.range.head > l.to) || !this.viewportIsAppropriate(l)) && (l = this.getViewport(0, e));let c = l.from != this.viewport.from || l.to != this.viewport.to;this.viewport = l, t.flags |= this.updateForViewport(), (c || !t.changes.empty || 2 & t.flags) && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 4e3) && this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, t.changes))), t.flags |= this.computeVisibleRanges(t.changes), e && (this.scrollTarget = e), !this.mustEnforceCursorAssoc && t.selectionSet && t.view.lineWrapping && t.state.selection.main.empty && t.state.selection.main.assoc && !t.state.facet(Zt) && (this.mustEnforceCursorAssoc = !0);}measure(t) {let e = t.contentDOM,i = window.getComputedStyle(e),r = this.heightOracle,s = i.whiteSpace;this.defaultTextDirection = "rtl" == i.direction ? wt.RTL : wt.LTR;let o = this.heightOracle.mustRefreshForWrapping(s),a = e.getBoundingClientRect(),l = o || this.mustMeasureContent || this.contentDOMHeight != a.height;this.contentDOMHeight = a.height, this.mustMeasureContent = !1;let c = 0,h = 0;if (a.width && a.height) {let { scaleX: t, scaleY: i } = _(e, a);(t > .005 && Math.abs(this.scaleX - t) > .005 || i > .005 && Math.abs(this.scaleY - i) > .005) && (this.scaleX = t, this.scaleY = i, c |= 16, o = l = !0);}let u = (parseInt(i.paddingTop) || 0) * this.scaleY,d = (parseInt(i.paddingBottom) || 0) * this.scaleY;this.paddingTop == u && this.paddingBottom == d || (this.paddingTop = u, this.paddingBottom = d, c |= 18), this.editorWidth != t.scrollDOM.clientWidth && (r.lineWrapping && (l = !0), this.editorWidth = t.scrollDOM.clientWidth, c |= 16);let p = t.scrollDOM.scrollTop * this.scaleY;this.scrollTop != p && (this.scrollAnchorHeight = -1, this.scrollTop = p), this.scrolledToBottom = N(t.scrollDOM);let f = (this.printing ? Ni : Li)(e, this.paddingTop),g = f.top - this.pixelViewport.top,m = f.bottom - this.pixelViewport.bottom;this.pixelViewport = f;let v = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;if (v != this.inView && (this.inView = v, v && (l = !0)), !this.inView && !this.scrollTarget && !function (t) {let e = t.getBoundingClientRect(),i = t.ownerDocument.defaultView || window;return e.left < i.innerWidth && e.right > 0 && e.top < i.innerHeight && e.bottom > 0;}(t.dom)) return 0;let y = a.width;if (this.contentDOMWidth == y && this.editorHeight == t.scrollDOM.clientHeight || (this.contentDOMWidth = a.width, this.editorHeight = t.scrollDOM.clientHeight, c |= 16), l) {let e = t.docView.measureVisibleLineHeights(this.viewport);if (r.mustRefreshForHeights(e) && (o = !0), o || r.lineWrapping && Math.abs(y - this.contentDOMWidth) > r.charWidth) {let { lineHeight: i, charWidth: n, textHeight: a } = t.docView.measureTextSize();o = i > 0 && r.refresh(s, i, n, a, Math.max(5, y / n), e), o && (t.docView.minWidth = 0, c |= 16);}g > 0 && m > 0 ? h = Math.max(g, m) : g < 0 && m < 0 && (h = Math.min(g, m)), xi();for (let i of this.viewports) {let s = i.from == this.viewport.from ? e : t.docView.measureVisibleLineHeights(i);this.heightMap = (o ? Ai.empty().applyChanges(this.stateDeco, n.EY.empty, this.heightOracle, [new me(0, 0, 0, t.state.doc.length)]) : this.heightMap).updateHeight(r, 0, o, new Ei(i.from, s));}wi && (c |= 2);}let b = !this.viewportIsAppropriate(this.viewport, h) || this.scrollTarget && (this.scrollTarget.range.head < this.viewport.from || this.scrollTarget.range.head > this.viewport.to);return b && (2 & c && (c |= this.updateScaler()), this.viewport = this.getViewport(h, this.scrollTarget), c |= this.updateForViewport()), (2 & c || b) && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 4e3) && this.updateLineGaps(this.ensureLineGaps(o ? [] : this.lineGaps, t)), c |= this.computeVisibleRanges(), this.mustEnforceCursorAssoc && (this.mustEnforceCursorAssoc = !1, t.docView.enforceCursorAssoc()), c;}get visibleTop() {return this.scaler.fromDOM(this.pixelViewport.top);}get visibleBottom() {return this.scaler.fromDOM(this.pixelViewport.bottom);}getViewport(t, e) {let i = .5 - Math.max(-.5, Math.min(.5, t / 1e3 / 2)),n = this.heightMap,r = this.heightOracle,{ visibleTop: s, visibleBottom: o } = this,a = new zi(n.lineAt(s - 1e3 * i, ki.ByHeight, r, 0, 0).from, n.lineAt(o + 1e3 * (1 - i), ki.ByHeight, r, 0, 0).to);if (e) {let { head: t } = e.range;if (t < a.from || t > a.to) {let i,s = Math.min(this.editorHeight, this.pixelViewport.bottom - this.pixelViewport.top),o = n.lineAt(t, ki.ByPos, r, 0, 0);i = "center" == e.y ? (o.top + o.bottom) / 2 - s / 2 : "start" == e.y || "nearest" == e.y && t < a.from ? o.top : o.bottom - s, a = new zi(n.lineAt(i - 500, ki.ByHeight, r, 0, 0).from, n.lineAt(i + s + 500, ki.ByHeight, r, 0, 0).to);}}return a;}mapViewport(t, e) {let i = e.mapPos(t.from, -1),n = e.mapPos(t.to, 1);return new zi(this.heightMap.lineAt(i, ki.ByPos, this.heightOracle, 0, 0).from, this.heightMap.lineAt(n, ki.ByPos, this.heightOracle, 0, 0).to);}viewportIsAppropriate({ from: t, to: e }, i = 0) {if (!this.inView) return !0;let { top: n } = this.heightMap.lineAt(t, ki.ByPos, this.heightOracle, 0, 0),{ bottom: r } = this.heightMap.lineAt(e, ki.ByPos, this.heightOracle, 0, 0),{ visibleTop: s, visibleBottom: o } = this;return (0 == t || n <= s - Math.max(10, Math.min(-i, 250))) && (e == this.state.doc.length || r >= o + Math.max(10, Math.min(i, 250))) && n > s - 2e3 && r < o + 2e3;}mapLineGaps(t, e) {if (!t.length || e.empty) return t;let i = [];for (let n of t) e.touchesRange(n.from, n.to) || i.push(new Vi(e.mapPos(n.from), e.mapPos(n.to), n.size, n.displaySize));return i;}ensureLineGaps(t, e) {let i = this.heightOracle.lineWrapping,r = i ? 1e4 : 2e3,s = r >> 1,o = r << 1;if (this.defaultTextDirection != wt.LTR && !i) return [];let a = [],l = (r, o, c, h) => {if (o - r < s) return;let u = this.state.selection.main,d = [u.from];u.empty || d.push(u.to);for (let t of d) if (t > r && t < o) return l(r, t - 10, c, h), void l(t + 10, o, c, h);let p = function (t, e) {for (let i of t) if (e(i)) return i;}(t, (t) => t.from >= c.from && t.to <= c.to && Math.abs(t.from - r) < s && Math.abs(t.to - o) < s && !d.some((e) => t.from < e && t.to > e));if (!p) {if (o < c.to && e && i && e.visibleRanges.some((t) => t.from <= o && t.to >= o)) {let t = e.moveToLineBoundary(n.OF.cursor(o), !1, !0).head;t > r && (o = t);}let t = this.gapSize(c, r, o, h);p = new Vi(r, o, t, i || t < 2e6 ? t : 2e6);}a.push(p);},c = (e) => {if (e.length < o || e.type != at.Text) return;let s = function (t, e, i) {let r = [],s = t,o = 0;return n.om.spans(i, t, e, { span() {}, point(t, e) {t > s && (r.push({ from: s, to: t }), o += t - s), s = e;} }, 20), s < e && (r.push({ from: s, to: e }), o += e - s), { total: o, ranges: r };}(e.from, e.to, this.stateDeco);if (s.total < o) return;let a,c,h = this.scrollTarget ? this.scrollTarget.range.head : null;if (i) {let t,i,n = r / this.heightOracle.lineLength * this.heightOracle.lineHeight;if (null != h) {let r = Hi(s, h),o = ((this.visibleBottom - this.visibleTop) / 2 + n) / e.height;t = r - o, i = r + o;} else t = (this.visibleTop - e.top - n) / e.height, i = (this.visibleBottom - e.top + n) / e.height;a = Ui(s, t), c = Ui(s, i);} else {let i = s.total * this.heightOracle.charWidth,n = r * this.heightOracle.charWidth,o = 0;if (i > 2e6) for (let i of t) i.from >= e.from && i.from < e.to && i.size != i.displaySize && i.from * this.heightOracle.charWidth + o < this.pixelViewport.left && (o = i.size - i.displaySize);let l,u,d = this.pixelViewport.left + o,p = this.pixelViewport.right + o;if (null != h) {let t = Hi(s, h),e = ((p - d) / 2 + n) / i;l = t - e, u = t + e;} else l = (d - n) / i, u = (p + n) / i;a = Ui(s, l), c = Ui(s, u);}a > e.from && l(e.from, a, e, s), c < e.to && l(c, e.to, e, s);};for (let t of this.viewportLines) Array.isArray(t.type) ? t.type.forEach(c) : c(t);return a;}gapSize(t, e, i, n) {let r = Hi(n, i) - Hi(n, e);return this.heightOracle.lineWrapping ? t.height * r : n.total * this.heightOracle.charWidth * r;}updateLineGaps(t) {Vi.same(t, this.lineGaps) || (this.lineGaps = t, this.lineGapDeco = lt.set(t.map((t) => t.draw(this, this.heightOracle.lineWrapping))));}computeVisibleRanges(t) {let e = this.stateDeco;this.lineGaps.length && (e = e.concat(this.lineGapDeco));let i = [];n.om.spans(e, this.viewport.from, this.viewport.to, { span(t, e) {i.push({ from: t, to: e });}, point() {} }, 20);let r = 0;if (i.length != this.visibleRanges.length) r = 12;else for (let e = 0; e < i.length && !(8 & r); e++) {let n = this.visibleRanges[e],s = i[e];n.from == s.from && n.to == s.to || (r |= 4, t && t.mapPos(n.from, -1) == s.from && t.mapPos(n.to, 1) == s.to || (r |= 8));}return this.visibleRanges = i, r;}lineBlockAt(t) {return t >= this.viewport.from && t <= this.viewport.to && this.viewportLines.find((e) => e.from <= t && e.to >= t) || Gi(this.heightMap.lineAt(t, ki.ByPos, this.heightOracle, 0, 0), this.scaler);}lineBlockAtHeight(t) {return t >= this.viewportLines[0].top && t <= this.viewportLines[this.viewportLines.length - 1].bottom && this.viewportLines.find((e) => e.top <= t && e.bottom >= t) || Gi(this.heightMap.lineAt(this.scaler.fromDOM(t), ki.ByHeight, this.heightOracle, 0, 0), this.scaler);}scrollAnchorAt(t) {let e = this.lineBlockAtHeight(t + 8);return e.from >= this.viewport.from || this.viewportLines[0].top - t > 200 ? e : this.viewportLines[0];}elementAtHeight(t) {return Gi(this.heightMap.blockAt(this.scaler.fromDOM(t), this.heightOracle, 0, 0), this.scaler);}get docHeight() {return this.scaler.toDOM(this.heightMap.height);}get contentHeight() {return this.docHeight + this.paddingTop + this.paddingBottom;}}class zi {constructor(t, e) {this.from = t, this.to = e;}}function Ui({ total: t, ranges: e }, i) {if (i <= 0) return e[0].from;if (i >= 1) return e[e.length - 1].to;let n = Math.floor(t * i);for (let t = 0;; t++) {let { from: i, to: r } = e[t],s = r - i;if (n <= s) return i + n;n -= s;}}function Hi(t, e) {let i = 0;for (let { from: n, to: r } of t.ranges) {if (e <= r) {i += e - n;break;}i += r - n;}return i / t.total;}const qi = { toDOM: (t) => t, fromDOM: (t) => t, scale: 1, eq(t) {return t == this;} };class $i {constructor(t, e, i) {let n = 0,r = 0,s = 0;this.viewports = i.map(({ from: i, to: r }) => {let s = e.lineAt(i, ki.ByPos, t, 0, 0).top,o = e.lineAt(r, ki.ByPos, t, 0, 0).bottom;return n += o - s, { from: i, to: r, top: s, bottom: o, domTop: 0, domBottom: 0 };}), this.scale = (7e6 - n) / (e.height - n);for (let t of this.viewports) t.domTop = s + (t.top - r) * this.scale, s = t.domBottom = t.domTop + (t.bottom - t.top), r = t.bottom;}toDOM(t) {for (let e = 0, i = 0, n = 0;; e++) {let r = e < this.viewports.length ? this.viewports[e] : null;if (!r || t < r.top) return n + (t - i) * this.scale;if (t <= r.bottom) return r.domTop + (t - r.top);i = r.bottom, n = r.domBottom;}}fromDOM(t) {for (let e = 0, i = 0, n = 0;; e++) {let r = e < this.viewports.length ? this.viewports[e] : null;if (!r || t < r.domTop) return i + (t - n) / this.scale;if (t <= r.domBottom) return r.top + (t - r.domTop);i = r.bottom, n = r.domBottom;}}eq(t) {return t instanceof $i && this.scale == t.scale && this.viewports.length == t.viewports.length && this.viewports.every((e, i) => e.from == t.viewports[i].from && e.to == t.viewports[i].to);}}function Gi(t, e) {if (1 == e.scale) return t;let i = e.toDOM(t.top),n = e.toDOM(t.bottom);return new Ci(t.from, t.length, i, n - i, Array.isArray(t._content) ? t._content.map((t) => Gi(t, e)) : t._content);}const Wi = n.sj.define({ combine: (t) => t.join(" ") }),Ki = n.sj.define({ combine: (t) => t.indexOf(!0) > -1 }),Zi = r.G.newName(),Yi = r.G.newName(),Xi = r.G.newName(),Ji = { "&light": "." + Yi, "&dark": "." + Xi };function Qi(t, e, i) {return new r.G(e, { finish: (e) => /&/.test(e) ? e.replace(/&\w*/, (e) => {if ("&" == e) return t;if (!i || !i[e]) throw new RangeError(`Unsupported selector: ${e}`);return i[e];}) : t + " " + e });}const tn = Qi("." + Zi, { "&": { position: "relative !important", boxSizing: "border-box", "&.cm-focused": { outline: "1px dotted #212121" }, display: "flex !important", flexDirection: "column" }, ".cm-scroller": { display: "flex !important", alignItems: "flex-start !important", fontFamily: "monospace", lineHeight: 1.4, height: "100%", overflowX: "auto", position: "relative", zIndex: 0, overflowAnchor: "none" }, ".cm-content": { margin: 0, flexGrow: 2, flexShrink: 0, display: "block", whiteSpace: "pre", wordWrap: "normal", boxSizing: "border-box", minHeight: "100%", padding: "4px 0", outline: "none", "&[contenteditable=true]": { WebkitUserModify: "read-write-plaintext-only" } }, ".cm-lineWrapping": { whiteSpace_fallback: "pre-wrap", whiteSpace: "break-spaces", wordBreak: "break-word", overflowWrap: "anywhere", flexShrink: 1 }, "&light .cm-content": { caretColor: "black" }, "&dark .cm-content": { caretColor: "white" }, ".cm-line": { display: "block", padding: "0 2px 0 6px" }, ".cm-layer": { position: "absolute", left: 0, top: 0, contain: "size style", "& > *": { position: "absolute" } }, "&light .cm-selectionBackground": { background: "#d9d9d9" }, "&dark .cm-selectionBackground": { background: "#222" }, "&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground": { background: "#d7d4f0" }, "&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground": { background: "#233" }, ".cm-cursorLayer": { pointerEvents: "none" }, "&.cm-focused > .cm-scroller > .cm-cursorLayer": { animation: "steps(1) cm-blink 1.2s infinite" }, "@keyframes cm-blink": { "0%": {}, "50%": { opacity: 0 }, "100%": {} }, "@keyframes cm-blink2": { "0%": {}, "50%": { opacity: 0 }, "100%": {} }, ".cm-cursor, .cm-dropCursor": { borderLeft: "1.2px solid black", marginLeft: "-0.6px", pointerEvents: "none" }, ".cm-cursor": { display: "none" }, "&dark .cm-cursor": { borderLeftColor: "#ddd" }, ".cm-dropCursor": { position: "absolute" }, "&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor": { display: "block" }, ".cm-iso": { unicodeBidi: "isolate" }, ".cm-announced": { position: "fixed", top: "-10000px" }, "@media print": { ".cm-announced": { display: "none" } }, "&light .cm-activeLine": { backgroundColor: "#cceeff44" }, "&dark .cm-activeLine": { backgroundColor: "#99eeff33" }, "&light .cm-specialChar": { color: "red" }, "&dark .cm-specialChar": { color: "#f78" }, ".cm-gutters": { flexShrink: 0, display: "flex", height: "100%", boxSizing: "border-box", zIndex: 200 }, ".cm-gutters-before": { insetInlineStart: 0 }, ".cm-gutters-after": { insetInlineEnd: 0 }, "&light .cm-gutters": { backgroundColor: "#f5f5f5", color: "#6c6c6c", border: "0px solid #ddd", "&.cm-gutters-before": { borderRightWidth: "1px" }, "&.cm-gutters-after": { borderLeftWidth: "1px" } }, "&dark .cm-gutters": { backgroundColor: "#333338", color: "#ccc" }, ".cm-gutter": { display: "flex !important", flexDirection: "column", flexShrink: 0, boxSizing: "border-box", minHeight: "100%", overflow: "hidden" }, ".cm-gutterElement": { boxSizing: "border-box" }, ".cm-lineNumbers .cm-gutterElement": { padding: "0 3px 0 5px", minWidth: "20px", textAlign: "right", whiteSpace: "nowrap" }, "&light .cm-activeLineGutter": { backgroundColor: "#e2f2ff" }, "&dark .cm-activeLineGutter": { backgroundColor: "#222227" }, ".cm-panels": { boxSizing: "border-box", position: "sticky", left: 0, right: 0, zIndex: 300 }, "&light .cm-panels": { backgroundColor: "#f5f5f5", color: "black" }, "&light .cm-panels-top": { borderBottom: "1px solid #ddd" }, "&light .cm-panels-bottom": { borderTop: "1px solid #ddd" }, "&dark .cm-panels": { backgroundColor: "#333338", color: "white" }, ".cm-dialog": { padding: "2px 19px 4px 6px", position: "relative", "& label": { fontSize: "80%" } }, ".cm-dialog-close": { position: "absolute", top: "3px", right: "4px", backgroundColor: "inherit", border: "none", font: "inherit", fontSize: "14px", padding: "0" }, ".cm-tab": { display: "inline-block", overflow: "hidden", verticalAlign: "bottom" }, ".cm-widgetBuffer": { verticalAlign: "text-top", height: "1em", width: 0, display: "inline" }, ".cm-placeholder": { color: "#888", display: "inline-block", verticalAlign: "top", userSelect: "none" }, ".cm-highlightSpace": { backgroundImage: "radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)", backgroundPosition: "center" }, ".cm-highlightTab": { backgroundImage: 'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')', backgroundSize: "auto 100%", backgroundPosition: "right 90%", backgroundRepeat: "no-repeat" }, ".cm-trailingSpace": { backgroundColor: "#ff332255" }, ".cm-button": { verticalAlign: "middle", color: "inherit", fontSize: "70%", padding: ".2em 1em", borderRadius: "1px" }, "&light .cm-button": { backgroundImage: "linear-gradient(#eff1f5, #d9d9df)", border: "1px solid #888", "&:active": { backgroundImage: "linear-gradient(#b4b4b4, #d0d3d6)" } }, "&dark .cm-button": { backgroundImage: "linear-gradient(#393939, #111)", border: "1px solid #888", "&:active": { backgroundImage: "linear-gradient(#111, #333)" } }, ".cm-textfield": { verticalAlign: "middle", color: "inherit", fontSize: "70%", border: "1px solid silver", padding: ".2em .5em" }, "&light .cm-textfield": { backgroundColor: "white" }, "&dark .cm-textfield": { border: "1px solid #555", backgroundColor: "inherit" } }, Ji),en = { childList: !0, characterData: !0, subtree: !0, attributes: !0, characterDataOldValue: !0 },nn = v.ie && v.ie_version <= 11;class rn {constructor(t) {this.view = t, this.active = !1, this.editContext = null, this.selectionRange = new P(), this.selectionChanged = !1, this.delayedFlush = -1, this.resizeTimeout = -1, this.queue = [], this.delayedAndroidKey = null, this.flushingAndroidKey = -1, this.lastChange = 0, this.scrollTargets = [], this.intersection = null, this.resizeScroll = null, this.intersecting = !1, this.gapIntersection = null, this.gaps = [], this.printQuery = null, this.parentCheck = -1, this.dom = t.contentDOM, this.observer = new MutationObserver((e) => {for (let t of e) this.queue.push(t);(v.ie && v.ie_version <= 11 || v.ios && t.composing) && e.some((t) => "childList" == t.type && t.removedNodes.length || "characterData" == t.type && t.oldValue.length > t.target.nodeValue.length) ? this.flushSoon() : this.flush();}), !window.EditContext || !v.android || !1 === t.constructor.EDIT_CONTEXT || v.chrome && v.chrome_version < 126 || (this.editContext = new an(t), t.state.facet(ee) && (t.contentDOM.editContext = this.editContext.editContext)), nn && (this.onCharData = (t) => {this.queue.push({ target: t.target, type: "characterData", oldValue: t.prevValue }), this.flushSoon();}), this.onSelectionChange = this.onSelectionChange.bind(this), this.onResize = this.onResize.bind(this), this.onPrint = this.onPrint.bind(this), this.onScroll = this.onScroll.bind(this), window.matchMedia && (this.printQuery = window.matchMedia("print")), "function" == typeof ResizeObserver && (this.resizeScroll = new ResizeObserver(() => {var t;(null === (t = this.view.docView) || void 0 === t ? void 0 : t.lastUpdate) < Date.now() - 75 && this.onResize();}), this.resizeScroll.observe(t.scrollDOM)), this.addWindowListeners(this.win = t.win), this.start(), "function" == typeof IntersectionObserver && (this.intersection = new IntersectionObserver((t) => {this.parentCheck < 0 && (this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1e3)), t.length > 0 && t[t.length - 1].intersectionRatio > 0 != this.intersecting && (this.intersecting = !this.intersecting, this.intersecting != this.view.inView && this.onScrollChanged(document.createEvent("Event")));}, { threshold: [0, .001] }), this.intersection.observe(this.dom), this.gapIntersection = new IntersectionObserver((t) => {t.length > 0 && t[t.length - 1].intersectionRatio > 0 && this.onScrollChanged(document.createEvent("Event"));}, {})), this.listenForScroll(), this.readSelectionRange();}onScrollChanged(t) {this.view.inputState.runHandlers("scroll", t), this.intersecting && this.view.measure();}onScroll(t) {this.intersecting && this.flush(!1), this.editContext && this.view.requestMeasure(this.editContext.measureReq), this.onScrollChanged(t);}onResize() {this.resizeTimeout < 0 && (this.resizeTimeout = setTimeout(() => {this.resizeTimeout = -1, this.view.requestMeasure();}, 50));}onPrint(t) {("change" != t.type && t.type || t.matches) && (this.view.viewState.printing = !0, this.view.measure(), setTimeout(() => {this.view.viewState.printing = !1, this.view.requestMeasure();}, 500));}updateGaps(t) {if (this.gapIntersection && (t.length != this.gaps.length || this.gaps.some((e, i) => e != t[i]))) {this.gapIntersection.disconnect();for (let e of t) this.gapIntersection.observe(e);this.gaps = t;}}onSelectionChange(t) {let e = this.selectionChanged;if (!this.readSelectionRange() || this.delayedAndroidKey) return;let { view: i } = this,n = this.selectionRange;if (i.state.facet(ee) ? i.root.activeElement != this.dom : !w(this.dom, n)) return;let r = n.anchorNode && i.docView.nearest(n.anchorNode);r && r.ignoreEvent(t) ? e || (this.selectionChanged = !1) : (v.ie && v.ie_version <= 11 || v.android && v.chrome) && !i.state.selection.main.empty && n.focusNode && S(n.focusNode, n.focusOffset, n.anchorNode, n.anchorOffset) ? this.flushSoon() : this.flush(!1);}readSelectionRange() {let { view: t } = this,e = y(t.root);if (!e) return !1;let i = v.safari && 11 == t.root.nodeType && t.root.activeElement == this.dom && function (t, e) {if (e.getComposedRanges) {let i = e.getComposedRanges(t.root)[0];if (i) return on(t, i);}let i = null;function n(t) {t.preventDefault(), t.stopImmediatePropagation(), i = t.getTargetRanges()[0];}return t.contentDOM.addEventListener("beforeinput", n, !0), t.dom.ownerDocument.execCommand("indent"), t.contentDOM.removeEventListener("beforeinput", n, !0), i ? on(t, i) : null;}(this.view, e) || e;if (!i || this.selectionRange.eq(i)) return !1;let n = w(this.dom, i);return n && !this.selectionChanged && t.inputState.lastFocusTime > Date.now() - 200 && t.inputState.lastTouchTime < Date.now() - 300 && function (t, e) {let i = e.focusNode,n = e.focusOffset;if (!i || e.anchorNode != i || e.anchorOffset != n) return !1;for (n = Math.min(n, T(i));;) if (n) {if (1 != i.nodeType) return !1;let t = i.childNodes[n - 1];"false" == t.contentEditable ? n-- : (i = t, n = T(i));} else {if (i == t) return !0;n = E(i), i = i.parentNode;}}(this.dom, i) ? (this.view.inputState.lastFocusTime = 0, t.docView.updateSelection(), !1) : (this.selectionRange.setRange(i), n && (this.selectionChanged = !0), !0);}setSelectionRange(t, e) {this.selectionRange.set(t.node, t.offset, e.node, e.offset), this.selectionChanged = !1;}clearSelectionRange() {this.selectionRange.set(null, 0, null, 0);}listenForScroll() {this.parentCheck = -1;let t = 0,e = null;for (let i = this.dom; i;) if (1 == i.nodeType) !e && t < this.scrollTargets.length && this.scrollTargets[t] == i ? t++ : e || (e = this.scrollTargets.slice(0, t)), e && e.push(i), i = i.assignedSlot || i.parentNode;else {if (11 != i.nodeType) break;i = i.host;}if (t < this.scrollTargets.length && !e && (e = this.scrollTargets.slice(0, t)), e) {for (let t of this.scrollTargets) t.removeEventListener("scroll", this.onScroll);for (let t of this.scrollTargets = e) t.addEventListener("scroll", this.onScroll);}}ignore(t) {if (!this.active) return t();try {return this.stop(), t();} finally {this.start(), this.clear();}}start() {this.active || (this.observer.observe(this.dom, en), nn && this.dom.addEventListener("DOMCharacterDataModified", this.onCharData), this.active = !0);}stop() {this.active && (this.active = !1, this.observer.disconnect(), nn && this.dom.removeEventListener("DOMCharacterDataModified", this.onCharData));}clear() {this.processRecords(), this.queue.length = 0, this.selectionChanged = !1;}delayAndroidKey(t, e) {var i;if (!this.delayedAndroidKey) {let t = () => {let t = this.delayedAndroidKey;t && (this.clearDelayedAndroidKey(), this.view.inputState.lastKeyCode = t.keyCode, this.view.inputState.lastKeyTime = Date.now(), !this.flush() && t.force && R(this.dom, t.key, t.keyCode));};this.flushingAndroidKey = this.view.win.requestAnimationFrame(t);}this.delayedAndroidKey && "Enter" != t || (this.delayedAndroidKey = { key: t, keyCode: e, force: this.lastChange < Date.now() - 50 || !!(null === (i = this.delayedAndroidKey) || void 0 === i ? void 0 : i.force) });}clearDelayedAndroidKey() {this.win.cancelAnimationFrame(this.flushingAndroidKey), this.delayedAndroidKey = null, this.flushingAndroidKey = -1;}flushSoon() {this.delayedFlush < 0 && (this.delayedFlush = this.view.win.requestAnimationFrame(() => {this.delayedFlush = -1, this.flush();}));}forceFlush() {this.delayedFlush >= 0 && (this.view.win.cancelAnimationFrame(this.delayedFlush), this.delayedFlush = -1), this.flush();}pendingRecords() {for (let t of this.observer.takeRecords()) this.queue.push(t);return this.queue;}processRecords() {let t = this.pendingRecords();t.length && (this.queue = []);let e = -1,i = -1,n = !1;for (let r of t) {let t = this.readMutation(r);t && (t.typeOver && (n = !0), -1 == e ? { from: e, to: i } = t : (e = Math.min(t.from, e), i = Math.max(t.to, i)));}return { from: e, to: i, typeOver: n };}readChange() {let { from: t, to: e, typeOver: i } = this.processRecords(),n = this.selectionChanged && w(this.dom, this.selectionRange);if (t < 0 && !n) return null;t > -1 && (this.lastChange = Date.now()), this.view.inputState.lastFocusTime = 0, this.selectionChanged = !1;let r = new ze(this.view, t, e, i);return this.view.docView.domChanged = { newSel: r.newSel ? r.newSel.main : null }, r;}flush(t = !0) {if (this.delayedFlush >= 0 || this.delayedAndroidKey) return !1;t && this.readSelectionRange();let e = this.readChange();if (!e) return this.view.requestMeasure(), !1;let i = this.view.state,n = Ue(this.view, e);return this.view.state == i && (e.domChanged || e.newSel && !e.newSel.main.eq(this.view.state.selection.main)) && this.view.update([]), n;}readMutation(t) {let e = this.view.docView.nearest(t.target);if (!e || e.ignoreMutation(t)) return null;if (e.markDirty("attributes" == t.type), "attributes" == t.type && (e.flags |= 4), "childList" == t.type) {let i = sn(e, t.previousSibling || t.target.previousSibling, -1),n = sn(e, t.nextSibling || t.target.nextSibling, 1);return { from: i ? e.posAfter(i) : e.posAtStart, to: n ? e.posBefore(n) : e.posAtEnd, typeOver: !1 };}return "characterData" == t.type ? { from: e.posAtStart, to: e.posAtEnd, typeOver: t.target.nodeValue == t.oldValue } : null;}setWindow(t) {t != this.win && (this.removeWindowListeners(this.win), this.win = t, this.addWindowListeners(this.win));}addWindowListeners(t) {t.addEventListener("resize", this.onResize), this.printQuery ? this.printQuery.addEventListener ? this.printQuery.addEventListener("change", this.onPrint) : this.printQuery.addListener(this.onPrint) : t.addEventListener("beforeprint", this.onPrint), t.addEventListener("scroll", this.onScroll), t.document.addEventListener("selectionchange", this.onSelectionChange);}removeWindowListeners(t) {t.removeEventListener("scroll", this.onScroll), t.removeEventListener("resize", this.onResize), this.printQuery ? this.printQuery.removeEventListener ? this.printQuery.removeEventListener("change", this.onPrint) : this.printQuery.removeListener(this.onPrint) : t.removeEventListener("beforeprint", this.onPrint), t.document.removeEventListener("selectionchange", this.onSelectionChange);}update(t) {this.editContext && (this.editContext.update(t), t.startState.facet(ee) != t.state.facet(ee) && (t.view.contentDOM.editContext = t.state.facet(ee) ? this.editContext.editContext : null));}destroy() {var t, e, i;this.stop(), null === (t = this.intersection) || void 0 === t || t.disconnect(), null === (e = this.gapIntersection) || void 0 === e || e.disconnect(), null === (i = this.resizeScroll) || void 0 === i || i.disconnect();for (let t of this.scrollTargets) t.removeEventListener("scroll", this.onScroll);this.removeWindowListeners(this.win), clearTimeout(this.parentCheck), clearTimeout(this.resizeTimeout), this.win.cancelAnimationFrame(this.delayedFlush), this.win.cancelAnimationFrame(this.flushingAndroidKey), this.editContext && (this.view.contentDOM.editContext = null, this.editContext.destroy());}}function sn(t, e, i) {for (; e;) {let n = U.get(e);if (n && n.parent == t) return n;let r = e.parentNode;e = r != t.dom ? r : i > 0 ? e.nextSibling : e.previousSibling;}return null;}function on(t, e) {let i = e.startContainer,n = e.startOffset,r = e.endContainer,s = e.endOffset,o = t.docView.domAtPos(t.state.selection.main.anchor);return S(o.node, o.offset, r, s) && ([i, n, r, s] = [r, s, i, n]), { anchorNode: i, anchorOffset: n, focusNode: r, focusOffset: s };}class an {constructor(t) {this.from = 0, this.to = 0, this.pendingContextChange = null, this.handlers = Object.create(null), this.composing = null, this.resetRange(t.state);let e = this.editContext = new window.EditContext({ text: t.state.doc.sliceString(this.from, this.to), selectionStart: this.toContextPos(Math.max(this.from, Math.min(this.to, t.state.selection.main.anchor))), selectionEnd: this.toContextPos(t.state.selection.main.head) });this.handlers.textupdate = (i) => {let r = t.state.selection.main,{ anchor: s, head: o } = r,a = this.toEditorPos(i.updateRangeStart),l = this.toEditorPos(i.updateRangeEnd);t.inputState.composing >= 0 && !this.composing && (this.composing = { contextBase: i.updateRangeStart, editorBase: a, drifted: !1 });let c = l - a > i.text.length;a == this.from && s < this.from ? a = s : l == this.to && s > this.to && (l = s);let h = qe(t.state.sliceDoc(a, l), i.text, (c ? r.from : r.to) - a, c ? "end" : null);if (!h) {let e = n.OF.single(this.toEditorPos(i.selectionStart), this.toEditorPos(i.selectionEnd));return void (e.main.eq(r) || t.dispatch({ selection: e, userEvent: "select" }));}let u = { from: h.from + a, to: h.toA + a, insert: n.EY.of(i.text.slice(h.from, h.toB).split("\n")) };if ((v.mac || v.android) && u.from == o - 1 && /^\. ?$/.test(i.text) && "off" == t.contentDOM.getAttribute("autocorrect") && (u = { from: a, to: l, insert: n.EY.of([i.text.replace(".", " ")]) }), this.pendingContextChange = u, !t.state.readOnly) {let e = this.to - this.from + (u.to - u.from + u.insert.length);He(t, u, n.OF.single(this.toEditorPos(i.selectionStart, e), this.toEditorPos(i.selectionEnd, e)));}this.pendingContextChange && (this.revertPending(t.state), this.setSelection(t.state)), u.from < u.to && !u.insert.length && t.inputState.composing >= 0 && !/[\\p{Alphabetic}\\p{Number}_]/.test(e.text.slice(Math.max(0, i.updateRangeStart - 1), Math.min(e.text.length, i.updateRangeStart + 1))) && this.handlers.compositionend(i);}, this.handlers.characterboundsupdate = (i) => {let n = [],r = null;for (let e = this.toEditorPos(i.rangeStart), s = this.toEditorPos(i.rangeEnd); e < s; e++) {let i = t.coordsForChar(e);r = i && new DOMRect(i.left, i.top, i.right - i.left, i.bottom - i.top) || r || new DOMRect(), n.push(r);}e.updateCharacterBounds(i.rangeStart, n);}, this.handlers.textformatupdate = (e) => {let i = [];for (let t of e.getTextFormats()) {let e = t.underlineStyle,n = t.underlineThickness;if (!/none/i.test(e) && !/none/i.test(n)) {let r = this.toEditorPos(t.rangeStart),s = this.toEditorPos(t.rangeEnd);if (r < s) {let t = `text-decoration: underline ${/^[a-z]/.test(e) ? e + " " : "Dashed" == e ? "dashed " : "Squiggle" == e ? "wavy " : ""}${/thin/i.test(n) ? 1 : 2}px`;i.push(lt.mark({ attributes: { style: t } }).range(r, s));}}}t.dispatch({ effects: Qt.of(lt.set(i)) });}, this.handlers.compositionstart = () => {t.inputState.composing < 0 && (t.inputState.composing = 0, t.inputState.compositionFirstChange = !0);}, this.handlers.compositionend = () => {if (t.inputState.composing = -1, t.inputState.compositionFirstChange = null, this.composing) {let { drifted: e } = this.composing;this.composing = null, e && this.reset(t.state);}};for (let t in this.handlers) e.addEventListener(t, this.handlers[t]);this.measureReq = { read: (t) => {this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e = y(t.root);e && e.rangeCount && this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect());} };}applyEdits(t) {let e = 0,i = !1,n = this.pendingContextChange;return t.changes.iterChanges((r, s, o, a, l) => {if (i) return;let c = l.length - (s - r);if (n && s >= n.to) {if (n.from == r && n.to == s && n.insert.eq(l)) return n = this.pendingContextChange = null, e += c, void (this.to += c);n = null, this.revertPending(t.state);}if (r += e, (s += e) <= this.from) this.from += c, this.to += c;else if (r < this.to) {if (r < this.from || s > this.to || this.to - this.from + l.length > 3e4) return void (i = !0);this.editContext.updateText(this.toContextPos(r), this.toContextPos(s), l.toString()), this.to += c;}e += c;}), n && !i && this.revertPending(t.state), !i;}update(t) {let e = this.pendingContextChange,i = t.startState.selection.main;this.composing && (this.composing.drifted || !t.changes.touchesRange(i.from, i.to) && t.transactions.some((t) => !t.isUserEvent("input.type") && t.changes.touchesRange(this.from, this.to))) ? (this.composing.drifted = !0, this.composing.editorBase = t.changes.mapPos(this.composing.editorBase)) : this.applyEdits(t) && this.rangeIsValid(t.state) ? (t.docChanged || t.selectionSet || e) && this.setSelection(t.state) : (this.pendingContextChange = null, this.reset(t.state)), (t.geometryChanged || t.docChanged || t.selectionSet) && t.view.requestMeasure(this.measureReq);}resetRange(t) {let { head: e } = t.selection.main;this.from = Math.max(0, e - 1e4), this.to = Math.min(t.doc.length, e + 1e4);}reset(t) {this.resetRange(t), this.editContext.updateText(0, this.editContext.text.length, t.doc.sliceString(this.from, this.to)), this.setSelection(t);}revertPending(t) {let e = this.pendingContextChange;this.pendingContextChange = null, this.editContext.updateText(this.toContextPos(e.from), this.toContextPos(e.from + e.insert.length), t.doc.sliceString(e.from, e.to));}setSelection(t) {let { main: e } = t.selection,i = this.toContextPos(Math.max(this.from, Math.min(this.to, e.anchor))),n = this.toContextPos(e.head);this.editContext.selectionStart == i && this.editContext.selectionEnd == n || this.editContext.updateSelection(i, n);}rangeIsValid(t) {let { head: e } = t.selection.main;return !(this.from > 0 && e - this.from < 500 || this.to < t.doc.length && this.to - e < 500 || this.to - this.from > 3e4);}toEditorPos(t, e = this.to - this.from) {t = Math.min(t, e);let i = this.composing;return i && i.drifted ? i.editorBase + (t - i.contextBase) : t + this.from;}toContextPos(t) {let e = this.composing;return e && e.drifted ? e.contextBase + (t - e.editorBase) : t - this.from;}destroy() {for (let t in this.handlers) this.editContext.removeEventListener(t, this.handlers[t]);}}class ln {get state() {return this.viewState.state;}get viewport() {return this.viewState.viewport;}get visibleRanges() {return this.viewState.visibleRanges;}get inView() {return this.viewState.inView;}get composing() {return !!this.inputState && this.inputState.composing > 0;}get compositionStarted() {return !!this.inputState && this.inputState.composing >= 0;}get root() {return this._root;}get win() {return this.dom.ownerDocument.defaultView || window;}constructor(t = {}) {var e;this.plugins = [], this.pluginMap = new Map(), this.editorAttrs = {}, this.contentAttrs = {}, this.bidiCache = [], this.destroyed = !1, this.updateState = 2, this.measureScheduled = -1, this.measureRequests = [], this.contentDOM = document.createElement("div"), this.scrollDOM = document.createElement("div"), this.scrollDOM.tabIndex = -1, this.scrollDOM.className = "cm-scroller", this.scrollDOM.appendChild(this.contentDOM), this.announceDOM = document.createElement("div"), this.announceDOM.className = "cm-announced", this.announceDOM.setAttribute("aria-live", "polite"), this.dom = document.createElement("div"), this.dom.appendChild(this.announceDOM), this.dom.appendChild(this.scrollDOM), t.parent && t.parent.appendChild(this.dom);let { dispatch: i } = t;this.dispatchTransactions = t.dispatchTransactions || i && ((t) => t.forEach((t) => i(t, this))) || ((t) => this.update(t)), this.dispatch = this.dispatch.bind(this), this._root = t.root || function (t) {for (; t;) {if (t && (9 == t.nodeType || 11 == t.nodeType && t.host)) return t;t = t.assignedSlot || t.parentNode;}return null;}(t.parent) || document, this.viewState = new ji(t.state || n.$t.create(t)), t.scrollTo && t.scrollTo.is(Jt) && (this.viewState.scrollTarget = t.scrollTo.value.clip(this.viewState.state)), this.plugins = this.state.facet(ne).map((t) => new se(t));for (let t of this.plugins) t.update(this);this.observer = new rn(this), this.inputState = new $e(this), this.inputState.ensureHandlers(this.plugins), this.docView = new ye(this), this.mountStyles(), this.updateAttrs(), this.updateState = 0, this.requestMeasure(), (null === (e = document.fonts) || void 0 === e ? void 0 : e.ready) && document.fonts.ready.then(() => this.requestMeasure());}dispatch(...t) {let e = 1 == t.length && t[0] instanceof n.ZX ? t : 1 == t.length && Array.isArray(t[0]) ? t[0] : [this.state.update(...t)];this.dispatchTransactions(e, this);}update(t) {if (0 != this.updateState) throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,i = !1,r = !1,s = this.state;for (let e of t) {if (e.startState != s) throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s = e.state;}if (this.destroyed) return void (this.viewState.state = s);let o = this.hasFocus,a = 0,l = null;t.some((t) => t.annotation(gi)) ? (this.inputState.notifiedFocused = o, a = 1) : o != this.inputState.notifiedFocused && (this.inputState.notifiedFocused = o, l = mi(s, o), l || (a = 1));let c = this.observer.delayedAndroidKey,h = null;if (c ? (this.observer.clearDelayedAndroidKey(), h = this.observer.readChange(), (h && !this.state.doc.eq(s.doc) || !this.state.selection.eq(s.selection)) && (h = null)) : this.observer.clear(), s.facet(n.$t.phrases) != this.state.facet(n.$t.phrases)) return this.setState(s);e = ve.create(this, s, t), e.flags |= a;let u = this.viewState.scrollTarget;try {this.updateState = 2;for (let e of t) {if (u && (u = u.map(e.changes)), e.scrollIntoView) {let { main: t } = e.state.selection;u = new Xt(t.empty ? t : n.OF.cursor(t.head, t.head > t.anchor ? -1 : 1));}for (let t of e.effects) t.is(Jt) && (u = t.value.clip(this.state));}this.viewState.update(e, u), this.bidiCache = un.update(this.bidiCache, e.changes), e.empty || (this.updatePlugins(e), this.inputState.update(e)), i = this.docView.update(e), this.state.facet(ge) != this.styleModules && this.mountStyles(), r = this.updateAttrs(), this.showAnnouncements(t), this.docView.updateSelection(i, t.some((t) => t.isUserEvent("select.pointer")));} finally {this.updateState = 0;}if (e.startState.facet(Wi) != e.state.facet(Wi) && (this.viewState.mustMeasureContent = !0), (i || r || u || this.viewState.mustEnforceCursorAssoc || this.viewState.mustMeasureContent) && this.requestMeasure(), i && this.docViewUpdate(), !e.empty) for (let t of this.state.facet(Ht)) try {t(e);} catch (t) {te(this.state, t, "update listener");}(l || h) && Promise.resolve().then(() => {l && this.state == l.startState && this.dispatch(l), h && !Ue(this, h) && c.force && R(this.contentDOM, c.key, c.keyCode);});}setState(t) {if (0 != this.updateState) throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if (this.destroyed) return void (this.viewState.state = t);this.updateState = 2;let e = this.hasFocus;try {for (let t of this.plugins) t.destroy(this);this.viewState = new ji(t), this.plugins = t.facet(ne).map((t) => new se(t)), this.pluginMap.clear();for (let t of this.plugins) t.update(this);this.docView.destroy(), this.docView = new ye(this), this.inputState.ensureHandlers(this.plugins), this.mountStyles(), this.updateAttrs(), this.bidiCache = [];} finally {this.updateState = 0;}e && this.focus(), this.requestMeasure();}updatePlugins(t) {let e = t.startState.facet(ne),i = t.state.facet(ne);if (e != i) {let n = [];for (let r of i) {let i = e.indexOf(r);if (i < 0) n.push(new se(r));else {let e = this.plugins[i];e.mustUpdate = t, n.push(e);}}for (let e of this.plugins) e.mustUpdate != t && e.destroy(this);this.plugins = n, this.pluginMap.clear();} else for (let e of this.plugins) e.mustUpdate = t;for (let t = 0; t < this.plugins.length; t++) this.plugins[t].update(this);e != i && this.inputState.ensureHandlers(this.plugins);}docViewUpdate() {for (let t of this.plugins) {let e = t.value;if (e && e.docViewUpdate) try {e.docViewUpdate(this);} catch (t) {te(this.state, t, "doc view update listener");}}}measure(t = !0) {if (this.destroyed) return;if (this.measureScheduled > -1 && this.win.cancelAnimationFrame(this.measureScheduled), this.observer.delayedAndroidKey) return this.measureScheduled = -1, void this.requestMeasure();this.measureScheduled = 0, t && this.observer.forceFlush();let e = null,i = this.scrollDOM,n = i.scrollTop * this.scaleY,{ scrollAnchorPos: r, scrollAnchorHeight: s } = this.viewState;Math.abs(n - this.viewState.scrollTop) > 1 && (s = -1), this.viewState.scrollAnchorHeight = -1;try {for (let t = 0;; t++) {if (s < 0) if (N(i)) r = -1, s = this.viewState.heightMap.height;else {let t = this.viewState.scrollAnchorAt(n);r = t.from, s = t.top;}this.updateState = 1;let o = this.viewState.measure(this);if (!o && !this.measureRequests.length && null == this.viewState.scrollTarget) break;if (t > 5) {console.warn(this.measureRequests.length ? "Measure loop restarted more than 5 times" : "Viewport failed to stabilize");break;}let a = [];4 & o || ([this.measureRequests, a] = [a, this.measureRequests]);let l = a.map((t) => {try {return t.read(this);} catch (t) {return te(this.state, t), hn;}}),c = ve.create(this, this.state, []),h = !1;c.flags |= o, e ? e.flags |= o : e = c, this.updateState = 2, c.empty || (this.updatePlugins(c), this.inputState.update(c), this.updateAttrs(), h = this.docView.update(c), h && this.docViewUpdate());for (let t = 0; t < a.length; t++) if (l[t] != hn) try {let e = a[t];e.write && e.write(l[t], this);} catch (t) {te(this.state, t);}if (h && this.docView.updateSelection(!0), !c.viewportChanged && 0 == this.measureRequests.length) {if (this.viewState.editorHeight) {if (this.viewState.scrollTarget) {this.docView.scrollIntoView(this.viewState.scrollTarget), this.viewState.scrollTarget = null, s = -1;continue;}{let t = (r < 0 ? this.viewState.heightMap.height : this.viewState.lineBlockAt(r).top) - s;if (t > 1 || t < -1) {n += t, i.scrollTop = n / this.scaleY, s = -1;continue;}}}break;}}} finally {this.updateState = 0, this.measureScheduled = -1;}if (e && !e.empty) for (let t of this.state.facet(Ht)) t(e);}get themeClasses() {return Zi + " " + (this.state.facet(Ki) ? Xi : Yi) + " " + this.state.facet(Wi);}updateAttrs() {let t = dn(this, oe, { class: "cm-editor" + (this.hasFocus ? " cm-focused " : " ") + this.themeClasses }),e = { spellcheck: "false", autocorrect: "off", autocapitalize: "off", writingsuggestions: "false", translate: "no", contenteditable: this.state.facet(ee) ? "true" : "false", class: "cm-content", style: `${v.tabSize}: ${this.state.tabSize}`, role: "textbox", "aria-multiline": "true" };this.state.readOnly && (e["aria-readonly"] = "true"), dn(this, ae, e);let i = this.observer.ignore(() => {let i = rt(this.contentDOM, this.contentAttrs, e),n = rt(this.dom, this.editorAttrs, t);return i || n;});return this.editorAttrs = t, this.contentAttrs = e, i;}showAnnouncements(t) {let e = !0;for (let i of t) for (let t of i.effects) t.is(ln.announce) && (e && (this.announceDOM.textContent = ""), e = !1, this.announceDOM.appendChild(document.createElement("div")).textContent = t.value);}mountStyles() {this.styleModules = this.state.facet(ge);let t = this.state.facet(ln.cspNonce);r.G.mount(this.root, this.styleModules.concat(tn).reverse(), t ? { nonce: t } : void 0);}readMeasured() {if (2 == this.updateState) throw new Error("Reading the editor layout isn't allowed during an update");0 == this.updateState && this.measureScheduled > -1 && this.measure(!1);}requestMeasure(t) {if (this.measureScheduled < 0 && (this.measureScheduled = this.win.requestAnimationFrame(() => this.measure())), t) {if (this.measureRequests.indexOf(t) > -1) return;if (null != t.key) for (let e = 0; e < this.measureRequests.length; e++) if (this.measureRequests[e].key === t.key) return void (this.measureRequests[e] = t);this.measureRequests.push(t);}}plugin(t) {let e = this.pluginMap.get(t);return (void 0 === e || e && e.plugin != t) && this.pluginMap.set(t, e = this.plugins.find((e) => e.plugin == t) || null), e && e.update(this).value;}get documentTop() {return this.contentDOM.getBoundingClientRect().top + this.viewState.paddingTop;}get documentPadding() {return { top: this.viewState.paddingTop, bottom: this.viewState.paddingBottom };}get scaleX() {return this.viewState.scaleX;}get scaleY() {return this.viewState.scaleY;}elementAtHeight(t) {return this.readMeasured(), this.viewState.elementAtHeight(t);}lineBlockAtHeight(t) {return this.readMeasured(), this.viewState.lineBlockAtHeight(t);}get viewportLineBlocks() {return this.viewState.viewportLines;}lineBlockAt(t) {return this.viewState.lineBlockAt(t);}get contentHeight() {return this.viewState.contentHeight;}moveByChar(t, e, i) {return Re(this, t, Oe(this, t, e, i));}moveByGroup(t, e) {return Re(this, t, Oe(this, t, e, (e) => function (t, e, i) {let r = t.state.charCategorizer(e),s = r(i);return (t) => {let e = r(t);return s == n.Je.Space && (s = e), s == e;};}(this, t.head, e)));}visualLineSide(t, e) {let i = this.bidiSpans(t),r = this.textDirectionAt(t.from),s = i[e ? i.length - 1 : 0];return n.OF.cursor(s.side(e, r) + t.from, s.forward(!e, r) ? 1 : -1);}moveToLineBoundary(t, e, i = !0) {return function (t, e, i, r) {let s = De(t, e.head, e.assoc || -1),o = r && s.type == at.Text && (t.lineWrapping || s.widgetLineBreaks) ? t.coordsAtPos(e.assoc < 0 && e.head > s.from ? e.head - 1 : e.head) : null;if (o) {let e = t.dom.getBoundingClientRect(),r = t.textDirectionAt(s.from),a = t.posAtCoords({ x: i == (r == wt.LTR) ? e.right - 1 : e.left + 1, y: (o.top + o.bottom) / 2 });if (null != a) return n.OF.cursor(a, i ? -1 : 1);}return n.OF.cursor(i ? s.to : s.from, i ? -1 : 1);}(this, t, e, i);}moveVertically(t, e, i) {return Re(this, t, function (t, e, i, r) {let s = e.head,o = i ? 1 : -1;if (s == (i ? t.state.doc.length : 0)) return n.OF.cursor(s, e.assoc);let a,l = e.goalColumn,c = t.contentDOM.getBoundingClientRect(),h = t.coordsAtPos(s, e.assoc || -1),u = t.documentTop;if (h) null == l && (l = h.left - c.left), a = o < 0 ? h.top : h.bottom;else {let e = t.viewState.lineBlockAt(s);null == l && (l = Math.min(c.right - c.left, t.defaultCharacterWidth * (s - e.from))), a = (o < 0 ? e.top : e.bottom) + u;}let d = c.left + l,p = null != r ? r : t.viewState.heightOracle.textHeight >> 1;for (let e = 0;; e += 10) {let i = a + (p + e) * o,r = Me(t, { x: d, y: i }, !1, o);if (i < c.top || i > c.bottom || (o < 0 ? r < s : r > s)) {let e = t.docView.coordsForChar(r),s = !e || i < e.top ? -1 : 1;return n.OF.cursor(r, s, void 0, l);}}}(this, t, e, i));}domAtPos(t) {return this.docView.domAtPos(t);}posAtDOM(t, e = 0) {return this.docView.posFromDOM(t, e);}posAtCoords(t, e = !0) {return this.readMeasured(), Me(this, t, e);}coordsAtPos(t, e = 1) {this.readMeasured();let i = this.docView.coordsAt(t, e);if (!i || i.left == i.right) return i;let n = this.state.doc.lineAt(t),r = this.bidiSpans(n);return A(i, r[Pt.find(r, t - n.from, -1, e)].dir == wt.LTR == e > 0);}coordsForChar(t) {return this.readMeasured(), this.docView.coordsForChar(t);}get defaultCharacterWidth() {return this.viewState.heightOracle.charWidth;}get defaultLineHeight() {return this.viewState.heightOracle.lineHeight;}get textDirection() {return this.viewState.defaultTextDirection;}textDirectionAt(t) {return !this.state.facet(Kt) || t < this.viewport.from || t > this.viewport.to ? this.textDirection : (this.readMeasured(), this.docView.textDirectionAt(t));}get lineWrapping() {return this.viewState.heightOracle.lineWrapping;}bidiSpans(t) {if (t.length > cn) return Rt(t.length);let e,i = this.textDirectionAt(t.from);for (let n of this.bidiCache) if (n.from == t.from && n.dir == i && (n.fresh || Dt(n.isolates, e = de(this, t)))) return n.order;e || (e = de(this, t));let n = function (t, e, i) {if (!t) return [new Pt(0, 0, e == St ? 1 : 0)];if (e == xt && !i.length && !_t.test(t)) return Rt(t.length);if (i.length) for (; t.length > Ot.length;) Ot[Ot.length] = 256;let n = [],r = e == xt ? 0 : 1;return Ft(t, r, r, i, 0, t.length, n), n;}(t.text, i, e);return this.bidiCache.push(new un(t.from, t.to, i, e, !0, n)), n;}get hasFocus() {var t;return (this.dom.ownerDocument.hasFocus() || v.safari && (null === (t = this.inputState) || void 0 === t ? void 0 : t.lastContextMenu) > Date.now() - 3e4) && this.root.activeElement == this.contentDOM;}focus() {this.observer.ignore(() => {I(this.contentDOM), this.docView.updateSelection();});}setRoot(t) {this._root != t && (this._root = t, this.observer.setWindow((9 == t.nodeType ? t : t.ownerDocument).defaultView || window), this.mountStyles());}destroy() {this.root.activeElement == this.contentDOM && this.contentDOM.blur();for (let t of this.plugins) t.destroy(this);this.plugins = [], this.inputState.destroy(), this.docView.destroy(), this.dom.remove(), this.observer.destroy(), this.measureScheduled > -1 && this.win.cancelAnimationFrame(this.measureScheduled), this.destroyed = !0;}static scrollIntoView(t, e = {}) {return Jt.of(new Xt("number" == typeof t ? n.OF.cursor(t) : t, e.y, e.x, e.yMargin, e.xMargin));}scrollSnapshot() {let { scrollTop: t, scrollLeft: e } = this.scrollDOM,i = this.viewState.scrollAnchorAt(t);return Jt.of(new Xt(n.OF.cursor(i.from), "start", "start", i.top - t, e, !0));}setTabFocusMode(t) {null == t ? this.inputState.tabFocusMode = this.inputState.tabFocusMode < 0 ? 0 : -1 : "boolean" == typeof t ? this.inputState.tabFocusMode = t ? 0 : -1 : 0 != this.inputState.tabFocusMode && (this.inputState.tabFocusMode = Date.now() + t);}static domEventHandlers(t) {return re.define(() => ({}), { eventHandlers: t });}static domEventObservers(t) {return re.define(() => ({}), { eventObservers: t });}static theme(t, e) {let i = r.G.newName(),n = [Wi.of(i), ge.of(Qi(`.${i}`, t))];return e && e.dark && n.push(Ki.of(!0)), n;}static baseTheme(t) {return n.Nb.lowest(ge.of(Qi("." + Zi, t, Ji)));}static findFromDOM(t) {var e;let i = t.querySelector(".cm-content"),n = i && U.get(i) || U.get(t);return (null === (e = null == n ? void 0 : n.rootView) || void 0 === e ? void 0 : e.view) || null;}}ln.styleModule = ge, ln.inputHandler = qt, ln.clipboardInputFilter = Gt, ln.clipboardOutputFilter = Wt, ln.scrollHandler = Yt, ln.focusChangeEffect = $t, ln.perLineTextDirection = Kt, ln.exceptionSink = Ut, ln.updateListener = Ht, ln.editable = ee, ln.mouseSelectionStyle = zt, ln.dragMovesSelection = jt, ln.clickAddsSelectionRange = Bt, ln.decorations = le, ln.outerDecorations = ce, ln.atomicRanges = he, ln.bidiIsolatedRanges = ue, ln.scrollMargins = pe, ln.darkTheme = Ki, ln.cspNonce = n.sj.define({ combine: (t) => t.length ? t[0] : "" }), ln.contentAttributes = ae, ln.editorAttributes = oe, ln.lineWrapping = ln.contentAttributes.of({ class: "cm-lineWrapping" }), ln.announce = n.Pe.define();const cn = 4096,hn = {};class un {constructor(t, e, i, n, r, s) {this.from = t, this.to = e, this.dir = i, this.isolates = n, this.fresh = r, this.order = s;}static update(t, e) {if (e.empty && !t.some((t) => t.fresh)) return t;let i = [],n = t.length ? t[t.length - 1].dir : wt.LTR;for (let r = Math.max(0, t.length - 10); r < t.length; r++) {let s = t[r];s.dir != n || e.touchesRange(s.from, s.to) || i.push(new un(e.mapPos(s.from, 1), e.mapPos(s.to, -1), s.dir, s.isolates, !1, s.order));}return i;}}function dn(t, e, i) {for (let n = t.state.facet(e), r = n.length - 1; r >= 0; r--) {let e = n[r],s = "function" == typeof e ? e(t) : e;s && et(s, i);}return i;}const pn = v.mac ? "mac" : v.windows ? "win" : v.linux ? "linux" : "key";function fn(t, e, i) {return e.altKey && (t = "Alt-" + t), e.ctrlKey && (t = "Ctrl-" + t), e.metaKey && (t = "Meta-" + t), !1 !== i && e.shiftKey && (t = "Shift-" + t), t;}const gn = n.Nb.default(ln.domEventHandlers({ keydown: (t, e) => En(yn(e.state), t, e, "editor") })),mn = n.sj.define({ enables: gn }),vn = new WeakMap();function yn(t) {let e = t.facet(mn),i = vn.get(e);return i || vn.set(e, i = function (t, e = pn) {let i = Object.create(null),n = Object.create(null),r = (t, e) => {let i = n[t];if (null == i) n[t] = e;else if (i != e) throw new Error("Key binding " + t + " is used both as a regular binding and as a multi-stroke prefix");},s = (t, n, s, o, a) => {var l, c;let h = i[t] || (i[t] = Object.create(null)),u = n.split(/ (?!$)/).map((t) => function (t, e) {const i = t.split(/-(?!$)/);let n,r,s,o,a = i[i.length - 1];"Space" == a && (a = " ");for (let t = 0; t < i.length - 1; ++t) {const a = i[t];if (/^(cmd|meta|m)$/i.test(a)) o = !0;else if (/^a(lt)?$/i.test(a)) n = !0;else if (/^(c|ctrl|control)$/i.test(a)) r = !0;else if (/^s(hift)?$/i.test(a)) s = !0;else {if (!/^mod$/i.test(a)) throw new Error("Unrecognized modifier name: " + a);"mac" == e ? o = !0 : r = !0;}}return n && (a = "Alt-" + a), r && (a = "Ctrl-" + a), o && (a = "Meta-" + a), s && (a = "Shift-" + a), a;}(t, e));for (let e = 1; e < u.length; e++) {let i = u.slice(0, e).join(" ");r(i, !0), h[i] || (h[i] = { preventDefault: !0, stopPropagation: !1, run: [(e) => {let n = wn = { view: e, prefix: i, scope: t };return setTimeout(() => {wn == n && (wn = null);}, xn), !0;}] });}let d = u.join(" ");r(d, !1);let p = h[d] || (h[d] = { preventDefault: !1, stopPropagation: !1, run: (null === (c = null === (l = h._any) || void 0 === l ? void 0 : l.run) || void 0 === c ? void 0 : c.slice()) || [] });s && p.run.push(s), o && (p.preventDefault = !0), a && (p.stopPropagation = !0);};for (let n of t) {let t = n.scope ? n.scope.split(" ") : ["editor"];if (n.any) for (let e of t) {let t = i[e] || (i[e] = Object.create(null));t._any || (t._any = { preventDefault: !1, stopPropagation: !1, run: [] });let { any: r } = n;for (let e in t) t[e].run.push((t) => r(t, Sn));}let r = n[e] || n.key;if (r) for (let e of t) s(e, r, n.run, n.preventDefault, n.stopPropagation), n.shift && s(e, "Shift-" + r, n.shift, n.preventDefault, n.stopPropagation);}return i;}(e.reduce((t, e) => t.concat(e), []))), i;}function bn(t, e, i) {return En(yn(t.state), e, t, i);}let wn = null;const xn = 4e3;let Sn = null;function En(t, e, i, r) {Sn = e;let o = (0, s.xT)(e),a = (0, n.vS)(o, 0),l = (0, n.Fh)(a) == o.length && " " != o,c = "",h = !1,u = !1,d = !1;wn && wn.view == i && wn.scope == r && (c = wn.prefix + " ", Ye.indexOf(e.keyCode) < 0 && (u = !0, wn = null));let p,f,g = new Set(),m = (t) => {if (t) {for (let e of t.run) if (!g.has(e) && (g.add(e), e(i))) return t.stopPropagation && (d = !0), !0;t.preventDefault && (t.stopPropagation && (d = !0), u = !0);}return !1;},y = t[r];return y && (m(y[c + fn(o, e, !l)]) ? h = !0 : !l || !(e.altKey || e.metaKey || e.ctrlKey) || v.windows && e.ctrlKey && e.altKey || v.mac && e.altKey && !e.ctrlKey && !e.metaKey || !(p = s.E3[e.keyCode]) || p == o ? l && e.shiftKey && m(y[c + fn(o, e, !0)]) && (h = !0) : (m(y[c + fn(p, e, !0)]) || e.shiftKey && (f = s.BN[e.keyCode]) != o && f != p && m(y[c + fn(f, e, !1)])) && (h = !0), !h && m(y._any) && (h = !0)), u && (h = !0), h && d && e.stopPropagation(), Sn = null, h;}class Cn {constructor(t, e, i, n, r) {this.className = t, this.left = e, this.top = i, this.width = n, this.height = r;}draw() {let t = document.createElement("div");return t.className = this.className, this.adjust(t), t;}update(t, e) {return e.className == this.className && (this.adjust(t), !0);}adjust(t) {t.style.left = this.left + "px", t.style.top = this.top + "px", null != this.width && (t.style.width = this.width + "px"), t.style.height = this.height + "px";}eq(t) {return this.left == t.left && this.top == t.top && this.width == t.width && this.height == t.height && this.className == t.className;}static forRange(t, e, i) {if (i.empty) {let n = t.coordsAtPos(i.head, i.assoc || 1);if (!n) return [];let r = kn(t);return [new Cn(e, n.left - r.left, n.top - r.top, null, n.bottom - n.top)];}return function (t, e, i) {if (i.to <= t.viewport.from || i.from >= t.viewport.to) return [];let n = Math.max(i.from, t.viewport.from),r = Math.min(i.to, t.viewport.to),s = t.textDirection == wt.LTR,o = t.contentDOM,a = o.getBoundingClientRect(),l = kn(t),c = o.querySelector(".cm-line"),h = c && window.getComputedStyle(c),u = a.left + (h ? parseInt(h.paddingLeft) + Math.min(0, parseInt(h.textIndent)) : 0),d = a.right - (h ? parseInt(h.paddingRight) : 0),p = De(t, n, 1),f = De(t, r, -1),g = p.type == at.Text ? p : null,m = f.type == at.Text ? f : null;if (g && (t.lineWrapping || p.widgetLineBreaks) && (g = Tn(t, n, 1, g)), m && (t.lineWrapping || f.widgetLineBreaks) && (m = Tn(t, r, -1, m)), g && m && g.from == m.from && g.to == m.to) return y(b(i.from, i.to, g));{let e = g ? b(i.from, null, g) : w(p, !1),n = m ? b(null, i.to, m) : w(f, !0),r = [];return (g || p).to < (m || f).from - (g && m ? 1 : 0) || p.widgetLineBreaks > 1 && e.bottom + t.defaultLineHeight / 2 < n.top ? r.push(v(u, e.bottom, d, n.top)) : e.bottom < n.top && t.elementAtHeight((e.bottom + n.top) / 2).type == at.Text && (e.bottom = n.top = (e.bottom + n.top) / 2), y(e).concat(r).concat(y(n));}function v(t, i, n, r) {return new Cn(e, t - l.left, i - l.top, n - t, r - i);}function y({ top: t, bottom: e, horizontal: i }) {let n = [];for (let r = 0; r < i.length; r += 2) n.push(v(i[r], t, i[r + 1], e));return n;}function b(e, i, n) {let r = 1e9,o = -1e9,a = [];function l(e, i, l, c, h) {let p = t.coordsAtPos(e, e == n.to ? -2 : 2),f = t.coordsAtPos(l, l == n.from ? 2 : -2);p && f && (r = Math.min(p.top, f.top, r), o = Math.max(p.bottom, f.bottom, o), h == wt.LTR ? a.push(s && i ? u : p.left, s && c ? d : f.right) : a.push(!s && c ? u : f.left, !s && i ? d : p.right));}let c = null != e ? e : n.from,h = null != i ? i : n.to;for (let n of t.visibleRanges) if (n.to > c && n.from < h) for (let r = Math.max(n.from, c), s = Math.min(n.to, h);;) {let n = t.state.doc.lineAt(r);for (let o of t.bidiSpans(n)) {let t = o.from + n.from,a = o.to + n.from;if (t >= s) break;a > r && l(Math.max(t, r), null == e && t <= c, Math.min(a, s), null == i && a >= h, o.dir);}if (r = n.to + 1, r >= s) break;}return 0 == a.length && l(c, null == e, h, null == i, t.textDirection), { top: r, bottom: o, horizontal: a };}function w(t, e) {let i = a.top + (e ? t.top : t.bottom);return { top: i, bottom: i, horizontal: [] };}}(t, e, i);}}function kn(t) {let e = t.scrollDOM.getBoundingClientRect();return { left: (t.textDirection == wt.LTR ? e.left : e.right - t.scrollDOM.clientWidth * t.scaleX) - t.scrollDOM.scrollLeft * t.scaleX, top: e.top - t.scrollDOM.scrollTop * t.scaleY };}function Tn(t, e, i, n) {let r = t.coordsAtPos(e, 2 * i);if (!r) return n;let s = t.dom.getBoundingClientRect(),o = (r.top + r.bottom) / 2,a = t.posAtCoords({ x: s.left + 1, y: o }),l = t.posAtCoords({ x: s.right - 1, y: o });return null == a || null == l ? n : { from: Math.max(n.from, Math.min(a, l)), to: Math.min(n.to, Math.max(a, l)) };}class An {constructor(t, e) {this.view = t, this.layer = e, this.drawn = [], this.scaleX = 1, this.scaleY = 1, this.measureReq = { read: this.measure.bind(this), write: this.draw.bind(this) }, this.dom = t.scrollDOM.appendChild(document.createElement("div")), this.dom.classList.add("cm-layer"), e.above && this.dom.classList.add("cm-layer-above"), e.class && this.dom.classList.add(e.class), this.scale(), this.dom.setAttribute("aria-hidden", "true"), this.setOrder(t.state), t.requestMeasure(this.measureReq), e.mount && e.mount(this.dom, t);}update(t) {t.startState.facet(Mn) != t.state.facet(Mn) && this.setOrder(t.state), (this.layer.update(t, this.dom) || t.geometryChanged) && (this.scale(), t.view.requestMeasure(this.measureReq));}docViewUpdate(t) {!1 !== this.layer.updateOnDocViewUpdate && t.requestMeasure(this.measureReq);}setOrder(t) {let e = 0,i = t.facet(Mn);for (; e < i.length && i[e] != this.layer;) e++;this.dom.style.zIndex = String((this.layer.above ? 150 : -1) - e);}measure() {return this.layer.markers(this.view);}scale() {let { scaleX: t, scaleY: e } = this.view;t == this.scaleX && e == this.scaleY || (this.scaleX = t, this.scaleY = e, this.dom.style.transform = `scale(${1 / t}, ${1 / e})`);}draw(t) {if (t.length != this.drawn.length || t.some((t, e) => {return i = t, n = this.drawn[e], !(i.constructor == n.constructor && i.eq(n));var i, n;})) {let e = this.dom.firstChild,i = 0;for (let n of t) n.update && e && n.constructor && this.drawn[i].constructor && n.update(e, this.drawn[i]) ? (e = e.nextSibling, i++) : this.dom.insertBefore(n.draw(), e);for (; e;) {let t = e.nextSibling;e.remove(), e = t;}this.drawn = t, v.ios && (this.dom.style.display = this.dom.firstChild ? "" : "none");}}destroy() {this.layer.destroy && this.layer.destroy(this.dom, this.view), this.dom.remove();}}const Mn = n.sj.define();function _n(t) {return [re.define((e) => new An(e, t)), Mn.of(t)];}const Pn = n.sj.define({ combine: (t) => (0, n.QR)(t, { cursorBlinkRate: 1200, drawRangeCursor: !0 }, { cursorBlinkRate: (t, e) => Math.min(t, e), drawRangeCursor: (t, e) => t || e }) });function Dn(t = {}) {return [Pn.of(t), In, Rn, Ln, Zt.of(!0)];}function On(t) {return t.startState.facet(Pn) != t.state.facet(Pn);}const In = _n({ above: !0, markers(t) {let { state: e } = t,i = e.facet(Pn),r = [];for (let s of e.selection.ranges) {let o = s == e.selection.main;if (s.empty || i.drawRangeCursor) {let e = o ? "cm-cursor cm-cursor-primary" : "cm-cursor cm-cursor-secondary",i = s.empty ? s : n.OF.cursor(s.head, s.head > s.anchor ? -1 : 1);for (let n of Cn.forRange(t, e, i)) r.push(n);}}return r;}, update(t, e) {t.transactions.some((t) => t.selection) && (e.style.animationName = "cm-blink" == e.style.animationName ? "cm-blink2" : "cm-blink");let i = On(t);return i && Fn(t.state, e), t.docChanged || t.selectionSet || i;}, mount(t, e) {Fn(e.state, t);}, class: "cm-cursorLayer" });function Fn(t, e) {e.style.animationDuration = t.facet(Pn).cursorBlinkRate + "ms";}const Rn = _n({ above: !1, markers: (t) => t.state.selection.ranges.map((e) => e.empty ? [] : Cn.forRange(t, "cm-selectionBackground", e)).reduce((t, e) => t.concat(e)), update: (t, e) => t.docChanged || t.selectionSet || t.viewportChanged || On(t), class: "cm-selectionLayer" }),Ln = n.Nb.highest(ln.theme({ ".cm-line": { "& ::selection, &::selection": { backgroundColor: "transparent !important" }, caretColor: "transparent !important" }, ".cm-content": { caretColor: "transparent !important", "& :focus": { caretColor: "initial !important", "&::selection, & ::selection": { backgroundColor: "Highlight !important" } } } })),Nn = n.Pe.define({ map: (t, e) => null == t ? null : e.mapPos(t) }),Vn = n.sU.define({ create: () => null, update: (t, e) => (null != t && (t = e.changes.mapPos(t)), e.effects.reduce((t, e) => e.is(Nn) ? e.value : t, t)) }),Bn = re.fromClass(class {constructor(t) {this.view = t, this.cursor = null, this.measureReq = { read: this.readPos.bind(this), write: this.drawCursor.bind(this) };}update(t) {var e;let i = t.state.field(Vn);null == i ? null != this.cursor && (null === (e = this.cursor) || void 0 === e || e.remove(), this.cursor = null) : (this.cursor || (this.cursor = this.view.scrollDOM.appendChild(document.createElement("div")), this.cursor.className = "cm-dropCursor"), (t.startState.field(Vn) != i || t.docChanged || t.geometryChanged) && this.view.requestMeasure(this.measureReq));}readPos() {let { view: t } = this,e = t.state.field(Vn),i = null != e && t.coordsAtPos(e);if (!i) return null;let n = t.scrollDOM.getBoundingClientRect();return { left: i.left - n.left + t.scrollDOM.scrollLeft * t.scaleX, top: i.top - n.top + t.scrollDOM.scrollTop * t.scaleY, height: i.bottom - i.top };}drawCursor(t) {if (this.cursor) {let { scaleX: e, scaleY: i } = this.view;t ? (this.cursor.style.left = t.left / e + "px", this.cursor.style.top = t.top / i + "px", this.cursor.style.height = t.height / i + "px") : this.cursor.style.left = "-100000px";}}destroy() {this.cursor && this.cursor.remove();}setDropPos(t) {this.view.state.field(Vn) != t && this.view.dispatch({ effects: Nn.of(t) });}}, { eventObservers: { dragover(t) {this.setDropPos(this.view.posAtCoords({ x: t.clientX, y: t.clientY }));}, dragleave(t) {t.target != this.view.contentDOM && this.view.contentDOM.contains(t.relatedTarget) || this.setDropPos(null);}, dragend() {this.setDropPos(null);}, drop() {this.setDropPos(null);} } });function jn() {return [Vn, Bn];}function zn(t, e, i, n, r) {e.lastIndex = 0;for (let s, o = t.iterRange(i, n), a = i; !o.next().done; a += o.value.length) if (!o.lineBreak) for (; s = e.exec(o.value);) r(a + s.index, s);}class Un {constructor(t) {const { regexp: e, decoration: i, decorate: n, boundary: r, maxLength: s = 1e3 } = t;if (!e.global) throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if (this.regexp = e, n) this.addMatch = (t, e, i, r) => n(r, i, i + t[0].length, t, e);else if ("function" == typeof i) this.addMatch = (t, e, n, r) => {let s = i(t, e, n);s && r(n, n + t[0].length, s);};else {if (!i) throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch = (t, e, n, r) => r(n, n + t[0].length, i);}this.boundary = r, this.maxLength = s;}createDeco(t) {let e = new n.vB(),i = e.add.bind(e);for (let { from: e, to: n } of function (t, e) {let i = t.visibleRanges;if (1 == i.length && i[0].from == t.viewport.from && i[0].to == t.viewport.to) return i;let n = [];for (let { from: r, to: s } of i) r = Math.max(t.state.doc.lineAt(r).from, r - e), s = Math.min(t.state.doc.lineAt(s).to, s + e), n.length && n[n.length - 1].to >= r ? n[n.length - 1].to = s : n.push({ from: r, to: s });return n;}(t, this.maxLength)) zn(t.state.doc, this.regexp, e, n, (e, n) => this.addMatch(n, t, e, i));return e.finish();}updateDeco(t, e) {let i = 1e9,n = -1;return t.docChanged && t.changes.iterChanges((e, r, s, o) => {o >= t.view.viewport.from && s <= t.view.viewport.to && (i = Math.min(s, i), n = Math.max(o, n));}), t.viewportMoved || n - i > 1e3 ? this.createDeco(t.view) : n > -1 ? this.updateRange(t.view, e.map(t.changes), i, n) : e;}updateRange(t, e, i, n) {for (let r of t.visibleRanges) {let s = Math.max(r.from, i),o = Math.min(r.to, n);if (o >= s) {let i = t.state.doc.lineAt(s),n = i.to < o ? t.state.doc.lineAt(o) : i,a = Math.max(r.from, i.from),l = Math.min(r.to, n.to);if (this.boundary) {for (; s > i.from; s--) if (this.boundary.test(i.text[s - 1 - i.from])) {a = s;break;}for (; o < n.to; o++) if (this.boundary.test(n.text[o - n.from])) {l = o;break;}}let c,h = [],u = (t, e, i) => h.push(i.range(t, e));if (i == n) for (this.regexp.lastIndex = a - i.from; (c = this.regexp.exec(i.text)) && c.index < l - i.from;) this.addMatch(c, t, c.index + i.from, u);else zn(t.state.doc, this.regexp, a, l, (e, i) => this.addMatch(i, t, e, u));e = e.update({ filterFrom: a, filterTo: l, filter: (t, e) => t < a || e > l, add: h });}}return e;}}const Hn = null != /x/.unicode ? "gu" : "g",qn = new RegExp("[\0-\b\n--\u2028\u2029\ufeff-]", Hn),$n = { 0: "null", 7: "bell", 8: "backspace", 10: "newline", 11: "vertical tab", 13: "carriage return", 27: "escape", 8203: "zero width space", 8204: "zero width non-joiner", 8205: "zero width joiner", 8206: "left-to-right mark", 8207: "right-to-left mark", 8232: "line separator", 8237: "left-to-right override", 8238: "right-to-left override", 8294: "left-to-right isolate", 8295: "right-to-left isolate", 8297: "pop directional isolate", 8233: "paragraph separator", 65279: "zero width no-break space", 65532: "object replacement" };let Gn = null;const Wn = n.sj.define({ combine(t) {let e = (0, n.QR)(t, { render: null, specialChars: qn, addSpecialChars: null });return (e.replaceTabs = !function () {var t;if (null == Gn && "undefined" != typeof document && document.body) {let e = document.body.style;Gn = null != (null !== (t = e.tabSize) && void 0 !== t ? t : e.MozTabSize);}return Gn || !1;}()) && (e.specialChars = new RegExp("\t|" + e.specialChars.source, Hn)), e.addSpecialChars && (e.specialChars = new RegExp(e.specialChars.source + "|" + e.addSpecialChars.source, Hn)), e;} });function Kn(t = {}) {return [Wn.of(t), Zn || (Zn = re.fromClass(class {constructor(t) {this.view = t, this.decorations = lt.none, this.decorationCache = Object.create(null), this.decorator = this.makeDecorator(t.state.facet(Wn)), this.decorations = this.decorator.createDeco(t);}makeDecorator(t) {return new Un({ regexp: t.specialChars, decoration: (e, i, r) => {let { doc: s } = i.state,o = (0, n.vS)(e[0], 0);if (9 == o) {let t = s.lineAt(r),e = i.state.tabSize,o = (0, n.y$)(t.text, e, r - t.from);return lt.replace({ widget: new Xn((e - o % e) * this.view.defaultCharacterWidth / this.view.scaleX) });}return this.decorationCache[o] || (this.decorationCache[o] = lt.replace({ widget: new Yn(t, o) }));}, boundary: t.replaceTabs ? void 0 : /[^]/ });}update(t) {let e = t.state.facet(Wn);t.startState.facet(Wn) != e ? (this.decorator = this.makeDecorator(e), this.decorations = this.decorator.createDeco(t.view)) : this.decorations = this.decorator.updateDeco(t, this.decorations);}}, { decorations: (t) => t.decorations }))];}let Zn = null;class Yn extends ot {constructor(t, e) {super(), this.options = t, this.code = e;}eq(t) {return t.code == this.code;}toDOM(t) {let e = (i = this.code) >= 32 ? "" : 10 == i ? "" : String.fromCharCode(9216 + i);var i;let n = t.state.phrase("Control character") + " " + ($n[this.code] || "0x" + this.code.toString(16)),r = this.options.render && this.options.render(this.code, n, e);if (r) return r;let s = document.createElement("span");return s.textContent = e, s.title = n, s.setAttribute("aria-label", n), s.className = "cm-specialChar", s;}ignoreEvent() {return !1;}}class Xn extends ot {constructor(t) {super(), this.width = t;}eq(t) {return t.width == this.width;}toDOM() {let t = document.createElement("span");return t.textContent = "\t", t.className = "cm-tab", t.style.width = this.width + "px", t;}ignoreEvent() {return !1;}}function Jn() {return tr;}const Qn = lt.line({ class: "cm-activeLine" }),tr = re.fromClass(class {constructor(t) {this.decorations = this.getDeco(t);}update(t) {(t.docChanged || t.selectionSet) && (this.decorations = this.getDeco(t.view));}getDeco(t) {let e = -1,i = [];for (let n of t.state.selection.ranges) {let r = t.lineBlockAt(n.head);r.from > e && (i.push(Qn.range(r.from)), e = r.from);}return lt.set(i);}}, { decorations: (t) => t.decorations }),er = 2e3;function ir(t, e) {let i = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1),r = t.state.doc.lineAt(i),s = i - r.from,o = s > er ? -1 : s == r.length ? function (t, e) {let i = t.coordsAtPos(t.viewport.from);return i ? Math.round(Math.abs((i.left - e) / t.defaultCharacterWidth)) : -1;}(t, e.clientX) : (0, n.y$)(r.text, t.state.tabSize, i - r.from);return { line: r.number, col: o, off: s };}function nr(t) {let e = (null == t ? void 0 : t.eventFilter) || ((t) => t.altKey && 0 == t.button);return ln.mouseSelectionStyle.of((t, i) => e(i) ? function (t, e) {let i = ir(t, e),r = t.state.selection;return i ? { update(t) {if (t.docChanged) {let e = t.changes.mapPos(t.startState.doc.line(i.line).from),n = t.state.doc.lineAt(e);i = { line: n.number, col: i.col, off: Math.min(i.off, n.length) }, r = r.map(t.changes);}}, get(e, s, o) {let a = ir(t, e);if (!a) return r;let l = function (t, e, i) {let r = Math.min(e.line, i.line),s = Math.max(e.line, i.line),o = [];if (e.off > er || i.off > er || e.col < 0 || i.col < 0) {let a = Math.min(e.off, i.off),l = Math.max(e.off, i.off);for (let e = r; e <= s; e++) {let i = t.doc.line(e);i.length <= l && o.push(n.OF.range(i.from + a, i.to + l));}} else {let a = Math.min(e.col, i.col),l = Math.max(e.col, i.col);for (let e = r; e <= s; e++) {let i = t.doc.line(e),r = (0, n.kn)(i.text, a, t.tabSize, !0);if (r < 0) o.push(n.OF.cursor(i.to));else {let e = (0, n.kn)(i.text, l, t.tabSize);o.push(n.OF.range(i.from + r, i.from + e));}}}return o;}(t.state, i, a);return l.length ? o ? n.OF.create(l.concat(r.ranges)) : n.OF.create(l) : r;} } : null;}(t, i) : null);}const rr = { Alt: [18, (t) => !!t.altKey], Control: [17, (t) => !!t.ctrlKey], Shift: [16, (t) => !!t.shiftKey], Meta: [91, (t) => !!t.metaKey] },sr = { style: "cursor: crosshair" };function or(t = {}) {let [e, i] = rr[t.key || "Alt"],n = re.fromClass(class {constructor(t) {this.view = t, this.isDown = !1;}set(t) {this.isDown != t && (this.isDown = t, this.view.update([]));}}, { eventObservers: { keydown(t) {this.set(t.keyCode == e || i(t));}, keyup(t) {t.keyCode != e && i(t) || this.set(!1);}, mousemove(t) {this.set(i(t));} } });return [n, ln.contentAttributes.of((t) => {var e;return (null === (e = t.plugin(n)) || void 0 === e ? void 0 : e.isDown) ? sr : null;})];}const ar = "-10000px";class lr {constructor(t, e, i, n) {this.facet = e, this.createTooltipView = i, this.removeTooltipView = n, this.input = t.state.facet(e), this.tooltips = this.input.filter((t) => t);let r = null;this.tooltipViews = this.tooltips.map((t) => r = i(t, r));}update(t, e) {var i;let n = t.state.facet(this.facet),r = n.filter((t) => t);if (n === this.input) {for (let e of this.tooltipViews) e.update && e.update(t);return !1;}let s = [],o = e ? [] : null;for (let i = 0; i < r.length; i++) {let n = r[i],a = -1;if (n) {for (let t = 0; t < this.tooltips.length; t++) {let e = this.tooltips[t];e && e.create == n.create && (a = t);}if (a < 0) s[i] = this.createTooltipView(n, i ? s[i - 1] : null), o && (o[i] = !!n.above);else {let n = s[i] = this.tooltipViews[a];o && (o[i] = e[a]), n.update && n.update(t);}}}for (let t of this.tooltipViews) s.indexOf(t) < 0 && (this.removeTooltipView(t), null === (i = t.destroy) || void 0 === i || i.call(t));return e && (o.forEach((t, i) => e[i] = t), e.length = o.length), this.input = n, this.tooltips = r, this.tooltipViews = s, !0;}}function cr(t) {let e = t.dom.ownerDocument.documentElement;return { top: 0, left: 0, bottom: e.clientHeight, right: e.clientWidth };}const hr = n.sj.define({ combine: (t) => {var e, i, n;return { position: v.ios ? "absolute" : (null === (e = t.find((t) => t.position)) || void 0 === e ? void 0 : e.position) || "fixed", parent: (null === (i = t.find((t) => t.parent)) || void 0 === i ? void 0 : i.parent) || null, tooltipSpace: (null === (n = t.find((t) => t.tooltipSpace)) || void 0 === n ? void 0 : n.tooltipSpace) || cr };} }),ur = new WeakMap(),dr = re.fromClass(class {constructor(t) {this.view = t, this.above = [], this.inView = !0, this.madeAbsolute = !1, this.lastTransaction = 0, this.measureTimeout = -1;let e = t.state.facet(hr);this.position = e.position, this.parent = e.parent, this.classes = t.themeClasses, this.createContainer(), this.measureReq = { read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this }, this.resizeObserver = "function" == typeof ResizeObserver ? new ResizeObserver(() => this.measureSoon()) : null, this.manager = new lr(t, mr, (t, e) => this.createTooltip(t, e), (t) => {this.resizeObserver && this.resizeObserver.unobserve(t.dom), t.dom.remove();}), this.above = this.manager.tooltips.map((t) => !!t.above), this.intersectionObserver = "function" == typeof IntersectionObserver ? new IntersectionObserver((t) => {Date.now() > this.lastTransaction - 50 && t.length > 0 && t[t.length - 1].intersectionRatio < 1 && this.measureSoon();}, { threshold: [1] }) : null, this.observeIntersection(), t.win.addEventListener("resize", this.measureSoon = this.measureSoon.bind(this)), this.maybeMeasure();}createContainer() {this.parent ? (this.container = document.createElement("div"), this.container.style.position = "relative", this.container.className = this.view.themeClasses, this.parent.appendChild(this.container)) : this.container = this.view.dom;}observeIntersection() {if (this.intersectionObserver) {this.intersectionObserver.disconnect();for (let t of this.manager.tooltipViews) this.intersectionObserver.observe(t.dom);}}measureSoon() {this.measureTimeout < 0 && (this.measureTimeout = setTimeout(() => {this.measureTimeout = -1, this.maybeMeasure();}, 50));}update(t) {t.transactions.length && (this.lastTransaction = Date.now());let e = this.manager.update(t, this.above);e && this.observeIntersection();let i = e || t.geometryChanged,n = t.state.facet(hr);if (n.position != this.position && !this.madeAbsolute) {this.position = n.position;for (let t of this.manager.tooltipViews) t.dom.style.position = this.position;i = !0;}if (n.parent != this.parent) {this.parent && this.container.remove(), this.parent = n.parent, this.createContainer();for (let t of this.manager.tooltipViews) this.container.appendChild(t.dom);i = !0;} else this.parent && this.view.themeClasses != this.classes && (this.classes = this.container.className = this.view.themeClasses);i && this.maybeMeasure();}createTooltip(t, e) {let i = t.create(this.view),n = e ? e.dom : null;if (i.dom.classList.add("cm-tooltip"), t.arrow && !i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")) {let t = document.createElement("div");t.className = "cm-tooltip-arrow", i.dom.appendChild(t);}return i.dom.style.position = this.position, i.dom.style.top = ar, i.dom.style.left = "0px", this.container.insertBefore(i.dom, n), i.mount && i.mount(this.view), this.resizeObserver && this.resizeObserver.observe(i.dom), i;}destroy() {var t, e, i;this.view.win.removeEventListener("resize", this.measureSoon);for (let e of this.manager.tooltipViews) e.dom.remove(), null === (t = e.destroy) || void 0 === t || t.call(e);this.parent && this.container.remove(), null === (e = this.resizeObserver) || void 0 === e || e.disconnect(), null === (i = this.intersectionObserver) || void 0 === i || i.disconnect(), clearTimeout(this.measureTimeout);}readMeasure() {let t = 1,e = 1,i = !1;if ("fixed" == this.position && this.manager.tooltipViews.length) {let { dom: t } = this.manager.tooltipViews[0];if (v.gecko) i = t.offsetParent != this.container.ownerDocument.body;else if (t.style.top == ar && "0px" == t.style.left) {let e = t.getBoundingClientRect();i = Math.abs(e.top + 1e4) > 1 || Math.abs(e.left) > 1;}}if (i || "absolute" == this.position) if (this.parent) {let i = this.parent.getBoundingClientRect();i.width && i.height && (t = i.width / this.parent.offsetWidth, e = i.height / this.parent.offsetHeight);} else ({ scaleX: t, scaleY: e } = this.view.viewState);let n = this.view.scrollDOM.getBoundingClientRect(),r = fe(this.view);return { visible: { left: n.left + r.left, top: n.top + r.top, right: n.right - r.right, bottom: n.bottom - r.bottom }, parent: this.parent ? this.container.getBoundingClientRect() : this.view.dom.getBoundingClientRect(), pos: this.manager.tooltips.map((t, e) => {let i = this.manager.tooltipViews[e];return i.getCoords ? i.getCoords(t.pos) : this.view.coordsAtPos(t.pos);}), size: this.manager.tooltipViews.map(({ dom: t }) => t.getBoundingClientRect()), space: this.view.state.facet(hr).tooltipSpace(this.view), scaleX: t, scaleY: e, makeAbsolute: i };}writeMeasure(t) {var e;if (t.makeAbsolute) {this.madeAbsolute = !0, this.position = "absolute";for (let t of this.manager.tooltipViews) t.dom.style.position = "absolute";}let { visible: i, space: n, scaleX: r, scaleY: s } = t,o = [];for (let a = 0; a < this.manager.tooltips.length; a++) {let l = this.manager.tooltips[a],c = this.manager.tooltipViews[a],{ dom: h } = c,u = t.pos[a],d = t.size[a];if (!u || !1 !== l.clip && (u.bottom <= Math.max(i.top, n.top) || u.top >= Math.min(i.bottom, n.bottom) || u.right < Math.max(i.left, n.left) - .1 || u.left > Math.min(i.right, n.right) + .1)) {h.style.top = ar;continue;}let p = l.arrow ? c.dom.querySelector(".cm-tooltip-arrow") : null,f = p ? 7 : 0,g = d.right - d.left,m = null !== (e = ur.get(c)) && void 0 !== e ? e : d.bottom - d.top,v = c.offset || gr,y = this.view.textDirection == wt.LTR,b = d.width > n.right - n.left ? y ? n.left : n.right - d.width : y ? Math.max(n.left, Math.min(u.left - (p ? 14 : 0) + v.x, n.right - g)) : Math.min(Math.max(n.left, u.left - g + (p ? 14 : 0) - v.x), n.right - g),w = this.above[a];!l.strictSide && (w ? u.top - m - f - v.y < n.top : u.bottom + m + f + v.y > n.bottom) && w == n.bottom - u.bottom > u.top - n.top && (w = this.above[a] = !w);let x = (w ? u.top - n.top : n.bottom - u.bottom) - f;if (x < m && !1 !== c.resize) {if (x < this.view.defaultLineHeight) {h.style.top = ar;continue;}ur.set(c, m), h.style.height = (m = x) / s + "px";} else h.style.height && (h.style.height = "");let S = w ? u.top - m - f - v.y : u.bottom + f + v.y,E = b + g;if (!0 !== c.overlap) for (let t of o) t.left < E && t.right > b && t.top < S + m && t.bottom > S && (S = w ? t.top - m - 2 - f : t.bottom + f + 2);if ("absolute" == this.position ? (h.style.top = (S - t.parent.top) / s + "px", pr(h, (b - t.parent.left) / r)) : (h.style.top = S / s + "px", pr(h, b / r)), p) {let t = u.left + (y ? v.x : -v.x) - (b + 14 - 7);p.style.left = t / r + "px";}!0 !== c.overlap && o.push({ left: b, top: S, right: E, bottom: S + m }), h.classList.toggle("cm-tooltip-above", w), h.classList.toggle("cm-tooltip-below", !w), c.positioned && c.positioned(t.space);}}maybeMeasure() {if (this.manager.tooltips.length && (this.view.inView && this.view.requestMeasure(this.measureReq), this.inView != this.view.inView && (this.inView = this.view.inView, !this.inView))) for (let t of this.manager.tooltipViews) t.dom.style.top = ar;}}, { eventObservers: { scroll() {this.maybeMeasure();} } });function pr(t, e) {let i = parseInt(t.style.left, 10);(isNaN(i) || Math.abs(e - i) > 1) && (t.style.left = e + "px");}const fr = ln.baseTheme({ ".cm-tooltip": { zIndex: 500, boxSizing: "border-box" }, "&light .cm-tooltip": { border: "1px solid #bbb", backgroundColor: "#f5f5f5" }, "&light .cm-tooltip-section:not(:first-child)": { borderTop: "1px solid #bbb" }, "&dark .cm-tooltip": { backgroundColor: "#333338", color: "white" }, ".cm-tooltip-arrow": { height: "7px", width: "14px", position: "absolute", zIndex: -1, overflow: "hidden", "&:before, &:after": { content: "''", position: "absolute", width: 0, height: 0, borderLeft: "7px solid transparent", borderRight: "7px solid transparent" }, ".cm-tooltip-above &": { bottom: "-7px", "&:before": { borderTop: "7px solid #bbb" }, "&:after": { borderTop: "7px solid #f5f5f5", bottom: "1px" } }, ".cm-tooltip-below &": { top: "-7px", "&:before": { borderBottom: "7px solid #bbb" }, "&:after": { borderBottom: "7px solid #f5f5f5", top: "1px" } } }, "&dark .cm-tooltip .cm-tooltip-arrow": { "&:before": { borderTopColor: "#333338", borderBottomColor: "#333338" }, "&:after": { borderTopColor: "transparent", borderBottomColor: "transparent" } } }),gr = { x: 0, y: 0 },mr = n.sj.define({ enables: [dr, fr] }),vr = n.sj.define({ combine: (t) => t.reduce((t, e) => t.concat(e), []) });class yr {static create(t) {return new yr(t);}constructor(t) {this.view = t, this.mounted = !1, this.dom = document.createElement("div"), this.dom.classList.add("cm-tooltip-hover"), this.manager = new lr(t, vr, (t, e) => this.createHostedView(t, e), (t) => t.dom.remove());}createHostedView(t, e) {let i = t.create(this.view);return i.dom.classList.add("cm-tooltip-section"), this.dom.insertBefore(i.dom, e ? e.dom.nextSibling : this.dom.firstChild), this.mounted && i.mount && i.mount(this.view), i;}mount(t) {for (let e of this.manager.tooltipViews) e.mount && e.mount(t);this.mounted = !0;}positioned(t) {for (let e of this.manager.tooltipViews) e.positioned && e.positioned(t);}update(t) {this.manager.update(t);}destroy() {var t;for (let e of this.manager.tooltipViews) null === (t = e.destroy) || void 0 === t || t.call(e);}passProp(t) {let e;for (let i of this.manager.tooltipViews) {let n = i[t];if (void 0 !== n) if (void 0 === e) e = n;else if (e !== n) return;}return e;}get offset() {return this.passProp("offset");}get getCoords() {return this.passProp("getCoords");}get overlap() {return this.passProp("overlap");}get resize() {return this.passProp("resize");}}const br = mr.compute([vr], (t) => {let e = t.facet(vr);return 0 === e.length ? null : { pos: Math.min(...e.map((t) => t.pos)), end: Math.max(...e.map((t) => {var e;return null !== (e = t.end) && void 0 !== e ? e : t.pos;})), create: yr.create, above: e[0].above, arrow: e.some((t) => t.arrow) };});class wr {constructor(t, e, i, n, r) {this.view = t, this.source = e, this.field = i, this.setHover = n, this.hoverTime = r, this.hoverTimeout = -1, this.restartTimeout = -1, this.pending = null, this.lastMove = { x: 0, y: 0, target: t.dom, time: 0 }, this.checkHover = this.checkHover.bind(this), t.dom.addEventListener("mouseleave", this.mouseleave = this.mouseleave.bind(this)), t.dom.addEventListener("mousemove", this.mousemove = this.mousemove.bind(this));}update() {this.pending && (this.pending = null, clearTimeout(this.restartTimeout), this.restartTimeout = setTimeout(() => this.startHover(), 20));}get active() {return this.view.state.field(this.field);}checkHover() {if (this.hoverTimeout = -1, this.active.length) return;let t = Date.now() - this.lastMove.time;t < this.hoverTime ? this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime - t) : this.startHover();}startHover() {clearTimeout(this.restartTimeout);let { view: t, lastMove: e } = this,i = t.docView.nearest(e.target);if (!i) return;let n,r = 1;if (i instanceof Z) n = i.posAtStart;else {if (n = t.posAtCoords(e), null == n) return;let i = t.coordsAtPos(n);if (!i || e.y < i.top || e.y > i.bottom || e.x < i.left - t.defaultCharacterWidth || e.x > i.right + t.defaultCharacterWidth) return;let s = t.bidiSpans(t.state.doc.lineAt(n)).find((t) => t.from <= n && t.to >= n),o = s && s.dir == wt.RTL ? -1 : 1;r = e.x < i.left ? -o : o;}let s = this.source(t, n, r);if (null == s ? void 0 : s.then) {let e = this.pending = { pos: n };s.then((i) => {this.pending == e && (this.pending = null, !i || Array.isArray(i) && !i.length || t.dispatch({ effects: this.setHover.of(Array.isArray(i) ? i : [i]) }));}, (e) => te(t.state, e, "hover tooltip"));} else !s || Array.isArray(s) && !s.length || t.dispatch({ effects: this.setHover.of(Array.isArray(s) ? s : [s]) });}get tooltip() {let t = this.view.plugin(dr),e = t ? t.manager.tooltips.findIndex((t) => t.create == yr.create) : -1;return e > -1 ? t.manager.tooltipViews[e] : null;}mousemove(t) {var e, i;this.lastMove = { x: t.clientX, y: t.clientY, target: t.target, time: Date.now() }, this.hoverTimeout < 0 && (this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime));let { active: n, tooltip: r } = this;if (n.length && r && !function (t, e) {let i,{ left: n, right: r, top: s, bottom: o } = t.getBoundingClientRect();if (i = t.querySelector(".cm-tooltip-arrow")) {let t = i.getBoundingClientRect();s = Math.min(t.top, s), o = Math.max(t.bottom, o);}return e.clientX >= n - xr && e.clientX <= r + xr && e.clientY >= s - xr && e.clientY <= o + xr;}(r.dom, t) || this.pending) {let { pos: r } = n[0] || this.pending,s = null !== (i = null === (e = n[0]) || void 0 === e ? void 0 : e.end) && void 0 !== i ? i : r;(r == s ? this.view.posAtCoords(this.lastMove) == r : function (t, e, i, n, r) {let s = t.scrollDOM.getBoundingClientRect(),o = t.documentTop + t.documentPadding.top + t.contentHeight;if (s.left > n || s.right < n || s.top > r || Math.min(s.bottom, o) < r) return !1;let a = t.posAtCoords({ x: n, y: r }, !1);return a >= e && a <= i;}(this.view, r, s, t.clientX, t.clientY)) || (this.view.dispatch({ effects: this.setHover.of([]) }), this.pending = null);}}mouseleave(t) {clearTimeout(this.hoverTimeout), this.hoverTimeout = -1;let { active: e } = this;if (e.length) {let { tooltip: e } = this;e && e.dom.contains(t.relatedTarget) ? this.watchTooltipLeave(e.dom) : this.view.dispatch({ effects: this.setHover.of([]) });}}watchTooltipLeave(t) {let e = (i) => {t.removeEventListener("mouseleave", e), this.active.length && !this.view.dom.contains(i.relatedTarget) && this.view.dispatch({ effects: this.setHover.of([]) });};t.addEventListener("mouseleave", e);}destroy() {clearTimeout(this.hoverTimeout), this.view.dom.removeEventListener("mouseleave", this.mouseleave), this.view.dom.removeEventListener("mousemove", this.mousemove);}}const xr = 4;function Sr(t, e = {}) {let i = n.Pe.define(),r = n.sU.define({ create: () => [], update(t, r) {if (t.length && (e.hideOnChange && (r.docChanged || r.selection) ? t = [] : e.hideOn && (t = t.filter((t) => !e.hideOn(r, t))), r.docChanged)) {let e = [];for (let i of t) {let t = r.changes.mapPos(i.pos, -1, n.iR.TrackDel);if (null != t) {let n = Object.assign(Object.create(null), i);n.pos = t, null != n.end && (n.end = r.changes.mapPos(n.end)), e.push(n);}}t = e;}for (let e of r.effects) e.is(i) && (t = e.value), e.is(Cr) && (t = []);return t;}, provide: (t) => vr.from(t) });return { active: r, extension: [r, re.define((n) => new wr(n, t, r, i, e.hoverTime || 300)), br] };}function Er(t, e) {let i = t.plugin(dr);if (!i) return null;let n = i.manager.tooltips.indexOf(e);return n < 0 ? null : i.manager.tooltipViews[n];}const Cr = n.Pe.define(),kr = n.sj.define({ combine(t) {let e, i;for (let n of t) e = e || n.topContainer, i = i || n.bottomContainer;return { topContainer: e, bottomContainer: i };} });function Tr(t, e) {let i = t.plugin(Ar),n = i ? i.specs.indexOf(e) : -1;return n > -1 ? i.panels[n] : null;}const Ar = re.fromClass(class {constructor(t) {this.input = t.state.facet(Pr), this.specs = this.input.filter((t) => t), this.panels = this.specs.map((e) => e(t));let e = t.state.facet(kr);this.top = new Mr(t, !0, e.topContainer), this.bottom = new Mr(t, !1, e.bottomContainer), this.top.sync(this.panels.filter((t) => t.top)), this.bottom.sync(this.panels.filter((t) => !t.top));for (let t of this.panels) t.dom.classList.add("cm-panel"), t.mount && t.mount();}update(t) {let e = t.state.facet(kr);this.top.container != e.topContainer && (this.top.sync([]), this.top = new Mr(t.view, !0, e.topContainer)), this.bottom.container != e.bottomContainer && (this.bottom.sync([]), this.bottom = new Mr(t.view, !1, e.bottomContainer)), this.top.syncClasses(), this.bottom.syncClasses();let i = t.state.facet(Pr);if (i != this.input) {let e = i.filter((t) => t),n = [],r = [],s = [],o = [];for (let i of e) {let e,a = this.specs.indexOf(i);a < 0 ? (e = i(t.view), o.push(e)) : (e = this.panels[a], e.update && e.update(t)), n.push(e), (e.top ? r : s).push(e);}this.specs = e, this.panels = n, this.top.sync(r), this.bottom.sync(s);for (let t of o) t.dom.classList.add("cm-panel"), t.mount && t.mount();} else for (let e of this.panels) e.update && e.update(t);}destroy() {this.top.sync([]), this.bottom.sync([]);}}, { provide: (t) => ln.scrollMargins.of((e) => {let i = e.plugin(t);return i && { top: i.top.scrollMargin(), bottom: i.bottom.scrollMargin() };}) });class Mr {constructor(t, e, i) {this.view = t, this.top = e, this.container = i, this.dom = void 0, this.classes = "", this.panels = [], this.syncClasses();}sync(t) {for (let e of this.panels) e.destroy && t.indexOf(e) < 0 && e.destroy();this.panels = t, this.syncDOM();}syncDOM() {if (0 == this.panels.length) return void (this.dom && (this.dom.remove(), this.dom = void 0));if (!this.dom) {this.dom = document.createElement("div"), this.dom.className = this.top ? "cm-panels cm-panels-top" : "cm-panels cm-panels-bottom", this.dom.style[this.top ? "top" : "bottom"] = "0";let t = this.container || this.view.dom;t.insertBefore(this.dom, this.top ? t.firstChild : null);}let t = this.dom.firstChild;for (let e of this.panels) if (e.dom.parentNode == this.dom) {for (; t != e.dom;) t = _r(t);t = t.nextSibling;} else this.dom.insertBefore(e.dom, t);for (; t;) t = _r(t);}scrollMargin() {return !this.dom || this.container ? 0 : Math.max(0, this.top ? this.dom.getBoundingClientRect().bottom - Math.max(0, this.view.scrollDOM.getBoundingClientRect().top) : Math.min(innerHeight, this.view.scrollDOM.getBoundingClientRect().bottom) - this.dom.getBoundingClientRect().top);}syncClasses() {if (this.container && this.classes != this.view.themeClasses) {for (let t of this.classes.split(" ")) t && this.container.classList.remove(t);for (let t of (this.classes = this.view.themeClasses).split(" ")) t && this.container.classList.add(t);}}}function _r(t) {let e = t.nextSibling;return t.remove(), e;}const Pr = n.sj.define({ enables: Ar });class Dr extends n.FB {compare(t) {return this == t || this.constructor == t.constructor && this.eq(t);}eq(t) {return !1;}destroy(t) {}}Dr.prototype.elementClass = "", Dr.prototype.toDOM = void 0, Dr.prototype.mapMode = n.iR.TrackBefore, Dr.prototype.startSide = Dr.prototype.endSide = -1, Dr.prototype.point = !0;const Or = n.sj.define(),Ir = n.sj.define(),Fr = { class: "", renderEmptyElements: !1, elementStyle: "", markers: () => n.om.empty, lineMarker: () => null, widgetMarker: () => null, lineMarkerChange: null, initialSpacer: null, updateSpacer: null, domEventHandlers: {}, side: "before" },Rr = n.sj.define();function Lr(t) {return [Vr(), Rr.of({ ...Fr, ...t })];}const Nr = n.sj.define({ combine: (t) => t.some((t) => t) });function Vr(t) {let e = [Br];return t && !1 === t.fixed && e.push(Nr.of(!0)), e;}const Br = re.fromClass(class {constructor(t) {this.view = t, this.domAfter = null, this.prevViewport = t.viewport, this.dom = document.createElement("div"), this.dom.className = "cm-gutters cm-gutters-before", this.dom.setAttribute("aria-hidden", "true"), this.dom.style.minHeight = this.view.contentHeight / this.view.scaleY + "px", this.gutters = t.state.facet(Rr).map((e) => new Hr(t, e)), this.fixed = !t.state.facet(Nr);for (let t of this.gutters) "after" == t.config.side ? this.getDOMAfter().appendChild(t.dom) : this.dom.appendChild(t.dom);this.fixed && (this.dom.style.position = "sticky"), this.syncGutters(!1), t.scrollDOM.insertBefore(this.dom, t.contentDOM);}getDOMAfter() {return this.domAfter || (this.domAfter = document.createElement("div"), this.domAfter.className = "cm-gutters cm-gutters-after", this.domAfter.setAttribute("aria-hidden", "true"), this.domAfter.style.minHeight = this.view.contentHeight / this.view.scaleY + "px", this.domAfter.style.position = this.fixed ? "sticky" : "", this.view.scrollDOM.appendChild(this.domAfter)), this.domAfter;}update(t) {if (this.updateGutters(t)) {let e = this.prevViewport,i = t.view.viewport,n = Math.min(e.to, i.to) - Math.max(e.from, i.from);this.syncGutters(n < .8 * (i.to - i.from));}if (t.geometryChanged) {let t = this.view.contentHeight / this.view.scaleY + "px";this.dom.style.minHeight = t, this.domAfter && (this.domAfter.style.minHeight = t);}this.view.state.facet(Nr) != !this.fixed && (this.fixed = !this.fixed, this.dom.style.position = this.fixed ? "sticky" : "", this.domAfter && (this.domAfter.style.position = this.fixed ? "sticky" : "")), this.prevViewport = t.view.viewport;}syncGutters(t) {let e = this.dom.nextSibling;t && (this.dom.remove(), this.domAfter && this.domAfter.remove());let i = n.om.iter(this.view.state.facet(Or), this.view.viewport.from),r = [],s = this.gutters.map((t) => new Ur(t, this.view.viewport, -this.view.documentPadding.top));for (let t of this.view.viewportLineBlocks) if (r.length && (r = []), Array.isArray(t.type)) {let e = !0;for (let n of t.type) if (n.type == at.Text && e) {zr(i, r, n.from);for (let t of s) t.line(this.view, n, r);e = !1;} else if (n.widget) for (let t of s) t.widget(this.view, n);} else if (t.type == at.Text) {zr(i, r, t.from);for (let e of s) e.line(this.view, t, r);} else if (t.widget) for (let e of s) e.widget(this.view, t);for (let t of s) t.finish();t && (this.view.scrollDOM.insertBefore(this.dom, e), this.domAfter && this.view.scrollDOM.appendChild(this.domAfter));}updateGutters(t) {let e = t.startState.facet(Rr),i = t.state.facet(Rr),r = t.docChanged || t.heightChanged || t.viewportChanged || !n.om.eq(t.startState.facet(Or), t.state.facet(Or), t.view.viewport.from, t.view.viewport.to);if (e == i) for (let e of this.gutters) e.update(t) && (r = !0);else {r = !0;let n = [];for (let r of i) {let i = e.indexOf(r);i < 0 ? n.push(new Hr(this.view, r)) : (this.gutters[i].update(t), n.push(this.gutters[i]));}for (let t of this.gutters) t.dom.remove(), n.indexOf(t) < 0 && t.destroy();for (let t of n) "after" == t.config.side ? this.getDOMAfter().appendChild(t.dom) : this.dom.appendChild(t.dom);this.gutters = n;}return r;}destroy() {for (let t of this.gutters) t.destroy();this.dom.remove(), this.domAfter && this.domAfter.remove();}}, { provide: (t) => ln.scrollMargins.of((e) => {let i = e.plugin(t);if (!i || 0 == i.gutters.length || !i.fixed) return null;let n = i.dom.offsetWidth * e.scaleX,r = i.domAfter ? i.domAfter.offsetWidth * e.scaleX : 0;return e.textDirection == wt.LTR ? { left: n, right: r } : { right: n, left: r };}) });function jr(t) {return Array.isArray(t) ? t : [t];}function zr(t, e, i) {for (; t.value && t.from <= i;) t.from == i && e.push(t.value), t.next();}class Ur {constructor(t, e, i) {this.gutter = t, this.height = i, this.i = 0, this.cursor = n.om.iter(t.markers, e.from);}addElement(t, e, i) {let { gutter: n } = this,r = (e.top - this.height) / t.scaleY,s = e.height / t.scaleY;if (this.i == n.elements.length) {let e = new qr(t, s, r, i);n.elements.push(e), n.dom.appendChild(e.dom);} else n.elements[this.i].update(t, s, r, i);this.height = e.bottom, this.i++;}line(t, e, i) {let n = [];zr(this.cursor, n, e.from), i.length && (n = n.concat(i));let r = this.gutter.config.lineMarker(t, e, n);r && n.unshift(r);let s = this.gutter;(0 != n.length || s.config.renderEmptyElements) && this.addElement(t, e, n);}widget(t, e) {let i = this.gutter.config.widgetMarker(t, e.widget, e),n = i ? [i] : null;for (let i of t.state.facet(Ir)) {let r = i(t, e.widget, e);r && (n || (n = [])).push(r);}n && this.addElement(t, e, n);}finish() {let t = this.gutter;for (; t.elements.length > this.i;) {let e = t.elements.pop();t.dom.removeChild(e.dom), e.destroy();}}}class Hr {constructor(t, e) {this.view = t, this.config = e, this.elements = [], this.spacer = null, this.dom = document.createElement("div"), this.dom.className = "cm-gutter" + (this.config.class ? " " + this.config.class : "");for (let i in e.domEventHandlers) this.dom.addEventListener(i, (n) => {let r,s = n.target;if (s != this.dom && this.dom.contains(s)) {for (; s.parentNode != this.dom;) s = s.parentNode;let t = s.getBoundingClientRect();r = (t.top + t.bottom) / 2;} else r = n.clientY;let o = t.lineBlockAtHeight(r - t.documentTop);e.domEventHandlers[i](t, o, n) && n.preventDefault();});this.markers = jr(e.markers(t)), e.initialSpacer && (this.spacer = new qr(t, 0, 0, [e.initialSpacer(t)]), this.dom.appendChild(this.spacer.dom), this.spacer.dom.style.cssText += "visibility: hidden; pointer-events: none");}update(t) {let e = this.markers;if (this.markers = jr(this.config.markers(t.view)), this.spacer && this.config.updateSpacer) {let e = this.config.updateSpacer(this.spacer.markers[0], t);e != this.spacer.markers[0] && this.spacer.update(t.view, 0, 0, [e]);}let i = t.view.viewport;return !n.om.eq(this.markers, e, i.from, i.to) || !!this.config.lineMarkerChange && this.config.lineMarkerChange(t);}destroy() {for (let t of this.elements) t.destroy();}}class qr {constructor(t, e, i, n) {this.height = -1, this.above = 0, this.markers = [], this.dom = document.createElement("div"), this.dom.className = "cm-gutterElement", this.update(t, e, i, n);}update(t, e, i, n) {this.height != e && (this.height = e, this.dom.style.height = e + "px"), this.above != i && (this.dom.style.marginTop = (this.above = i) ? i + "px" : ""), function (t, e) {if (t.length != e.length) return !1;for (let i = 0; i < t.length; i++) if (!t[i].compare(e[i])) return !1;return !0;}(this.markers, n) || this.setMarkers(t, n);}setMarkers(t, e) {let i = "cm-gutterElement",n = this.dom.firstChild;for (let r = 0, s = 0;;) {let o = s,a = r < e.length ? e[r++] : null,l = !1;if (a) {let t = a.elementClass;t && (i += " " + t);for (let t = s; t < this.markers.length; t++) if (this.markers[t].compare(a)) {o = t, l = !0;break;}} else o = this.markers.length;for (; s < o;) {let t = this.markers[s++];if (t.toDOM) {t.destroy(n);let e = n.nextSibling;n.remove(), n = e;}}if (!a) break;a.toDOM && (l ? n = n.nextSibling : this.dom.insertBefore(a.toDOM(t), n)), l && s++;}this.dom.className = i, this.markers = e;}destroy() {this.setMarkers(null, []);}}const $r = n.sj.define(),Gr = n.sj.define(),Wr = n.sj.define({ combine: (t) => (0, n.QR)(t, { formatNumber: String, domEventHandlers: {} }, { domEventHandlers(t, e) {let i = Object.assign({}, t);for (let t in e) {let n = i[t],r = e[t];i[t] = n ? (t, e, i) => n(t, e, i) || r(t, e, i) : r;}return i;} }) });class Kr extends Dr {constructor(t) {super(), this.number = t;}eq(t) {return this.number == t.number;}toDOM() {return document.createTextNode(this.number);}}function Zr(t, e) {return t.state.facet(Wr).formatNumber(e, t.state);}const Yr = Rr.compute([Wr], (t) => ({ class: "cm-lineNumbers", renderEmptyElements: !1, markers: (t) => t.state.facet($r), lineMarker: (t, e, i) => i.some((t) => t.toDOM) ? null : new Kr(Zr(t, t.state.doc.lineAt(e.from).number)), widgetMarker: (t, e, i) => {for (let n of t.state.facet(Gr)) {let r = n(t, e, i);if (r) return r;}return null;}, lineMarkerChange: (t) => t.startState.facet(Wr) != t.state.facet(Wr), initialSpacer: (t) => new Kr(Zr(t, Jr(t.state.doc.lines))), updateSpacer(t, e) {let i = Zr(e.view, Jr(e.view.state.doc.lines));return i == t.number ? t : new Kr(i);}, domEventHandlers: t.facet(Wr).domEventHandlers, side: "before" }));function Xr(t = {}) {return [Wr.of(t), Vr(), Yr];}function Jr(t) {let e = 9;for (; e < t;) e = 10 * e + 9;return e;}const Qr = new class extends Dr {constructor() {super(...arguments), this.elementClass = "cm-activeLineGutter";}}(),ts = Or.compute(["selection"], (t) => {let e = [],i = -1;for (let n of t.selection.ranges) {let r = t.doc.lineAt(n.head).from;r > i && (i = r, e.push(Qr.range(r)));}return n.om.of(e);});function es() {return ts;}}, 1375: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(3363);function r(t, e) {return function () {(0, n.Ts)(this, t).delay = +e.apply(this, arguments);};}function s(t, e) {return e = +e, function () {(0, n.Ts)(this, t).delay = e;};}function o(t) {var e = this._id;return arguments.length ? this.each(("function" == typeof t ? r : s)(e, t)) : (0, n.Jt)(this.node(), e).delay;}}, 1419: (t, e, i) => {"use strict";i.d(e, { $w: () => v });var n = i(1371),r = i(6585),s = i(3748);class o {constructor(t, e, i) {this.from = t, this.to = e, this.diagnostic = i;}}class a {constructor(t, e, i) {this.diagnostics = t, this.panel = e, this.selected = i;}static init(t, e, i) {let s = i.facet(y).markerFilter;s && (t = s(t, i));let o = t.slice().sort((t, e) => t.from - e.from || t.to - e.to),c = new r.vB(),h = [],u = 0;for (let t = 0;;) {let e,r,s = t == o.length ? null : o[t];if (!s && !h.length) break;for (h.length ? (e = u, r = h.reduce((t, e) => Math.min(t, e.to), s && s.from > e ? s.from : 1e8)) : (e = s.from, r = s.to, h.push(s), t++); t < o.length;) {let i = o[t];if (i.from != e || !(i.to > i.from || i.to == e)) {r = Math.min(i.from, r);break;}h.push(i), t++, r = Math.min(i.to, r);}let a = M(h);if (h.some((t) => t.from == t.to || t.from == t.to - 1 && i.doc.lineAt(t.from).to == t.from)) c.add(e, e, n.NZ.widget({ widget: new S(a), diagnostics: h.slice() }));else {let t = h.reduce((t, e) => e.markClass ? t + " " + e.markClass : t, "");c.add(e, r, n.NZ.mark({ class: "cm-lintRange cm-lintRange-" + a + t, diagnostics: h.slice(), inclusiveEnd: h.some((t) => t.to > r) }));}u = r;for (let t = 0; t < h.length; t++) h[t].to <= u && h.splice(t--, 1);}let d = c.finish();return new a(d, e, l(d));}}function l(t, e = null, i = 0) {let n = null;return t.between(i, 1e9, (t, i, { spec: r }) => {if (!(e && r.diagnostics.indexOf(e) < 0)) if (n) {if (r.diagnostics.indexOf(n.diagnostic) < 0) return !1;n = new o(n.from, i, n.diagnostic);} else n = new o(t, i, e || r.diagnostics[0]);}), n;}const c = r.Pe.define(),h = r.Pe.define(),u = r.Pe.define(),d = r.sU.define({ create: () => new a(n.NZ.none, null, null), update(t, e) {if (e.docChanged && t.diagnostics.size) {let i = t.diagnostics.map(e.changes),n = null,r = t.panel;if (t.selected) {let r = e.changes.mapPos(t.selected.from, 1);n = l(i, t.selected.diagnostic, r) || l(i, null, r);}!i.size && r && e.state.facet(y).autoPanel && (r = null), t = new a(i, r, n);}for (let i of e.effects) if (i.is(c)) {let n = e.state.facet(y).autoPanel ? i.value.length ? C.open : null : t.panel;t = a.init(i.value, n, e.state);} else i.is(h) ? t = new a(t.diagnostics, i.value ? C.open : null, t.selected) : i.is(u) && (t = new a(t.diagnostics, t.panel, i.value));return t;}, provide: (t) => [n.S7.from(t, (t) => t.panel), n.Lz.decorations.from(t, (t) => t.diagnostics)] }),p = n.NZ.mark({ class: "cm-lintRange cm-lintRange-active" });function f(t, e, i) {let n,{ diagnostics: r } = t.state.field(d),s = -1,o = -1;r.between(e - (i < 0 ? 1 : 0), e + (i > 0 ? 1 : 0), (t, r, { spec: a }) => {if (e >= t && e <= r && (t == r || (e > t || i > 0) && (e < r || i < 0))) return n = a.diagnostics, s = t, o = r, !1;});let a = t.state.facet(y).tooltipFilter;return n && a && (n = a(n, t.state)), n ? { pos: s, end: o, above: t.state.doc.lineAt(s).to < o, create: () => ({ dom: g(t, n) }) } : null;}function g(t, e) {return (0, s.A)("ul", { class: "cm-tooltip-lint" }, e.map((e) => x(t, e, !1)));}const m = (t) => {let e = t.state.field(d, !1);return !(!e || !e.panel || (t.dispatch({ effects: h.of(!1) }), 0));},v = [{ key: "Mod-Shift-m", run: (t) => {let e = t.state.field(d, !1);var i, s;e && e.panel || t.dispatch({ effects: (i = t.state, s = [h.of(!0)], i.field(d, !1) ? s : s.concat(r.Pe.appendConfig.of(_))) });let o = (0, n.ld)(t, C.open);return o && o.dom.querySelector(".cm-panel-lint ul").focus(), !0;}, preventDefault: !0 }, { key: "F8", run: (t) => {let e = t.state.field(d, !1);if (!e) return !1;let i = t.state.selection.main,n = e.diagnostics.iter(i.to + 1);return !(!n.value && (n = e.diagnostics.iter(0), !n.value || n.from == i.from && n.to == i.to) || (t.dispatch({ selection: { anchor: n.from, head: n.to }, scrollIntoView: !0 }), 0));} }],y = r.sj.define({ combine: (t) => ({ sources: t.map((t) => t.source).filter((t) => null != t), ...(0, r.QR)(t.map((t) => t.config), { delay: 750, markerFilter: null, tooltipFilter: null, needsRefresh: null, hideOn: () => null }, { delay: Math.max, markerFilter: b, tooltipFilter: b, needsRefresh: (t, e) => t ? e ? (i) => t(i) || e(i) : t : e, hideOn: (t, e) => t ? e ? (i, n, r) => t(i, n, r) || e(i, n, r) : t : e, autoPanel: (t, e) => t || e }) }) });function b(t, e) {return t ? e ? (i, n) => e(t(i, n), n) : t : e;}function w(t) {let e = [];if (t) t: for (let { name: i } of t) {for (let t = 0; t < i.length; t++) {let n = i[t];if (/[a-zA-Z]/.test(n) && !e.some((t) => t.toLowerCase() == n.toLowerCase())) {e.push(n);continue t;}}e.push("");}return e;}function x(t, e, i) {var n;let r = i ? w(e.actions) : [];return (0, s.A)("li", { class: "cm-diagnostic cm-diagnostic-" + e.severity }, (0, s.A)("span", { class: "cm-diagnosticText" }, e.renderMessage ? e.renderMessage(t) : e.message), null === (n = e.actions) || void 0 === n ? void 0 : n.map((i, n) => {let o = !1,a = (n) => {if (n.preventDefault(), o) return;o = !0;let r = l(t.state.field(d).diagnostics, e);r && i.apply(t, r.from, r.to);},{ name: c } = i,h = r[n] ? c.indexOf(r[n]) : -1,u = h < 0 ? c : [c.slice(0, h), (0, s.A)("u", c.slice(h, h + 1)), c.slice(h + 1)],p = i.markClass ? " " + i.markClass : "";return (0, s.A)("button", { type: "button", class: "cm-diagnosticAction" + p, onclick: a, onmousedown: a, "aria-label": ` Action: ${c}${h < 0 ? "" : ` (access key "${r[n]})"`}.` }, u);}), e.source && (0, s.A)("div", { class: "cm-diagnosticSource" }, e.source));}class S extends n.xO {constructor(t) {super(), this.sev = t;}eq(t) {return t.sev == this.sev;}toDOM() {return (0, s.A)("span", { class: "cm-lintPoint cm-lintPoint-" + this.sev });}}class E {constructor(t, e) {this.diagnostic = e, this.id = "item_" + Math.floor(4294967295 * Math.random()).toString(16), this.dom = x(t, e, !0), this.dom.id = this.id, this.dom.setAttribute("role", "option");}}class C {constructor(t) {this.view = t, this.items = [], this.list = (0, s.A)("ul", { tabIndex: 0, role: "listbox", "aria-label": this.view.state.phrase("Diagnostics"), onkeydown: (e) => {if (27 == e.keyCode) m(this.view), this.view.focus();else if (38 == e.keyCode || 33 == e.keyCode) this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);else if (40 == e.keyCode || 34 == e.keyCode) this.moveSelection((this.selectedIndex + 1) % this.items.length);else if (36 == e.keyCode) this.moveSelection(0);else if (35 == e.keyCode) this.moveSelection(this.items.length - 1);else if (13 == e.keyCode) this.view.focus();else {if (!(e.keyCode >= 65 && e.keyCode <= 90 && this.selectedIndex >= 0)) return;{let { diagnostic: i } = this.items[this.selectedIndex],n = w(i.actions);for (let r = 0; r < n.length; r++) if (n[r].toUpperCase().charCodeAt(0) == e.keyCode) {let e = l(this.view.state.field(d).diagnostics, i);e && i.actions[r].apply(t, e.from, e.to);}}}e.preventDefault();}, onclick: (t) => {for (let e = 0; e < this.items.length; e++) this.items[e].dom.contains(t.target) && this.moveSelection(e);} }), this.dom = (0, s.A)("div", { class: "cm-panel-lint" }, this.list, (0, s.A)("button", { type: "button", name: "close", "aria-label": this.view.state.phrase("close"), onclick: () => m(this.view) }, "")), this.update();}get selectedIndex() {let t = this.view.state.field(d).selected;if (!t) return -1;for (let e = 0; e < this.items.length; e++) if (this.items[e].diagnostic == t.diagnostic) return e;return -1;}update() {let { diagnostics: t, selected: e } = this.view.state.field(d),i = 0,n = !1,r = null,s = new Set();for (t.between(0, this.view.state.doc.length, (t, o, { spec: a }) => {for (let t of a.diagnostics) {if (s.has(t)) continue;s.add(t);let o,a = -1;for (let e = i; e < this.items.length; e++) if (this.items[e].diagnostic == t) {a = e;break;}a < 0 ? (o = new E(this.view, t), this.items.splice(i, 0, o), n = !0) : (o = this.items[a], a > i && (this.items.splice(i, a - i), n = !0)), e && o.diagnostic == e.diagnostic ? o.dom.hasAttribute("aria-selected") || (o.dom.setAttribute("aria-selected", "true"), r = o) : o.dom.hasAttribute("aria-selected") && o.dom.removeAttribute("aria-selected"), i++;}}); i < this.items.length && !(1 == this.items.length && this.items[0].diagnostic.from < 0);) n = !0, this.items.pop();0 == this.items.length && (this.items.push(new E(this.view, { from: -1, to: -1, severity: "info", message: this.view.state.phrase("No diagnostics") })), n = !0), r ? (this.list.setAttribute("aria-activedescendant", r.id), this.view.requestMeasure({ key: this, read: () => ({ sel: r.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }), write: ({ sel: t, panel: e }) => {let i = e.height / this.list.offsetHeight;t.top < e.top ? this.list.scrollTop -= (e.top - t.top) / i : t.bottom > e.bottom && (this.list.scrollTop += (t.bottom - e.bottom) / i);} })) : this.selectedIndex < 0 && this.list.removeAttribute("aria-activedescendant"), n && this.sync();}sync() {let t = this.list.firstChild;function e() {let e = t;t = e.nextSibling, e.remove();}for (let i of this.items) if (i.dom.parentNode == this.list) {for (; t != i.dom;) e();t = i.dom.nextSibling;} else this.list.insertBefore(i.dom, t);for (; t;) e();}moveSelection(t) {if (this.selectedIndex < 0) return;let e = l(this.view.state.field(d).diagnostics, this.items[t].diagnostic);e && this.view.dispatch({ selection: { anchor: e.from, head: e.to }, scrollIntoView: !0, effects: u.of(e) });}static open(t) {return new C(t);}}function k(t) {return function (t, e = 'viewBox="0 0 40 40"') {return `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`;}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`, 'width="6" height="3"');}const T = n.Lz.baseTheme({ ".cm-diagnostic": { padding: "3px 6px 3px 8px", marginLeft: "-1px", display: "block", whiteSpace: "pre-wrap" }, ".cm-diagnostic-error": { borderLeft: "5px solid #d11" }, ".cm-diagnostic-warning": { borderLeft: "5px solid orange" }, ".cm-diagnostic-info": { borderLeft: "5px solid #999" }, ".cm-diagnostic-hint": { borderLeft: "5px solid #66d" }, ".cm-diagnosticAction": { font: "inherit", border: "none", padding: "2px 4px", backgroundColor: "#444", color: "white", borderRadius: "3px", marginLeft: "8px", cursor: "pointer" }, ".cm-diagnosticSource": { fontSize: "70%", opacity: .7 }, ".cm-lintRange": { backgroundPosition: "left bottom", backgroundRepeat: "repeat-x", paddingBottom: "0.7px" }, ".cm-lintRange-error": { backgroundImage: k("#d11") }, ".cm-lintRange-warning": { backgroundImage: k("orange") }, ".cm-lintRange-info": { backgroundImage: k("#999") }, ".cm-lintRange-hint": { backgroundImage: k("#66d") }, ".cm-lintRange-active": { backgroundColor: "#ffdd9980" }, ".cm-tooltip-lint": { padding: 0, margin: 0 }, ".cm-lintPoint": { position: "relative", "&:after": { content: '""', position: "absolute", bottom: 0, left: "-2px", borderLeft: "3px solid transparent", borderRight: "3px solid transparent", borderBottom: "4px solid #d11" } }, ".cm-lintPoint-warning": { "&:after": { borderBottomColor: "orange" } }, ".cm-lintPoint-info": { "&:after": { borderBottomColor: "#999" } }, ".cm-lintPoint-hint": { "&:after": { borderBottomColor: "#66d" } }, ".cm-panel.cm-panel-lint": { position: "relative", "& ul": { maxHeight: "100px", overflowY: "auto", "& [aria-selected]": { backgroundColor: "#ddd", "& u": { textDecoration: "underline" } }, "&:focus [aria-selected]": { background_fallback: "#bdf", backgroundColor: "Highlight", color_fallback: "white", color: "HighlightText" }, "& u": { textDecoration: "none" }, padding: 0, margin: 0 }, "& [name=close]": { position: "absolute", top: "0", right: "2px", background: "inherit", border: "none", font: "inherit", padding: 0, margin: 0 } } });function A(t) {return "error" == t ? 4 : "warning" == t ? 3 : "info" == t ? 2 : 1;}function M(t) {let e = "hint",i = 1;for (let n of t) {let t = A(n.severity);t > i && (i = t, e = n.severity);}return e;}n.wJ;const _ = [d, n.Lz.decorations.compute([d], (t) => {let { selected: e, panel: i } = t.field(d);return e && i && e.from != e.to ? n.NZ.set([p.range(e.from, e.to)]) : n.NZ.none;}), (0, n.Ux)(f, { hideOn: function (t, e) {let i = e.pos,n = e.end || i,r = t.state.facet(y).hideOn(t, i, n);if (null != r) return r;let s = t.startState.doc.lineAt(e.pos);return !(!t.effects.some((t) => t.is(c)) && !t.changes.touchesRange(s.from, Math.max(s.to, n)));} }), T];}, 1425: (t, e, i) => {"use strict";async function n(t, e, i = null) {let n = i;if (t) try {const i = await t.get(e);if (i) {const [t, e] = i.split("|");(!e || new Date(parseInt(e)) > new Date()) && (n = t);}} catch (t) {}return n;}async function r(t, e, i, n) {const r = `${i}${n ? `|${n.getTime()}` : ""}`;if (t) try {return null == i ? await t.remove(e) : await t.set(e, r), !0;} catch (t) {}return !1;}i.d(e, { F: () => r, v: () => n });}, 1429: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(3663),r = i(574);function s() {return null;}function o(t, e) {var i = "function" == typeof t ? t : (0, n.A)(t),o = null == e ? s : "function" == typeof e ? e : (0, r.A)(e);return this.select(function () {return this.insertBefore(i.apply(this, arguments), o.apply(this, arguments) || null);});}}, 1436: (t, e, i) => {"use strict";i.d(e, { D4: () => r });var n = i(9095);const r = (t) => {let e = t;e instanceof Uint8Array && (e = n.D0.decode(e)), e = e.replace(/-/g, "+").replace(/_/g, "/").replace(/\s/g, "");try {return ((t) => {const e = atob(t),i = new Uint8Array(e.length);for (let t = 0; t < e.length; t++) i[t] = e.charCodeAt(t);return i;})(e);} catch {throw new TypeError("The input to be decoded is not correctly encoded.");}};}, 1463: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(29);function r(t, e, i) {var r = new n.M4();return e = null == e ? 0 : +e, r.restart((i) => {r.stop(), t(i + e);}, e, i), r;}}, 1470: (t, e, i) => {"use strict";i.d(e, { C7: () => s, GP: () => a, Rm: () => o, cF: () => n });var n,r = i(2446);!function (t) {t[t.Auto = 0] = "Auto", t[t.Enabled = 1] = "Enabled", t[t.Disabled = 2] = "Disabled";}(n || (n = {}));class s {static _instance;static get instance() {return s._instance || (s._instance = new this()), s._instance;}constructor() {if (s._instance) return s._instance;s._instance = this;}get isDev() {return thisVisual.element.getAttribute("class").indexOf("_DEBUG") >= 0;}prefix = "";status = n.Auto;useInlineConsoleFor = [];inlineConsoleElement;get enabled() {return this.status == n.Enabled || this.status == n.Auto && this.isDev;}update(t) {this.useInlineConsoleFor.length ? (this.inlineConsoleElement || (this.inlineConsoleElement = new r.R(), this.inlineConsoleElement.toggle(!0)), this.inlineConsoleElement.isInFocus = t.isInFocus) : this.inlineConsoleElement && (this.inlineConsoleElement.remove(), this.inlineConsoleElement = null);}static MESSAGE(t, ...e) {this.instance.enabled && (this.instance.prefix && e.unshift(this.instance.prefix), window.console[t](...e), (0, r.k)(t) && this.instance.useInlineConsoleFor.includes(t) && (this.instance.inlineConsoleElement || (this.instance.inlineConsoleElement = new r.R()), this.instance.inlineConsoleElement.addMessage(t, e.pop())));}static GROUP(...t) {this.MESSAGE("group", ...t);}static GROUP_END(...t) {this.MESSAGE("groupEnd", ...t);}static LOG(...t) {this.MESSAGE("log", ...t);}static INFO(...t) {this.MESSAGE("info", ...t);}static ERROR(...t) {this.MESSAGE("error", ...t);}static WARN(...t) {this.MESSAGE("warn", ...t);}static SET_PREFIX(t) {this.instance.prefix = t;}}function o(...t) {s.LOG(...t);}function a() {return function (t, e, i) {const n = i.value;return i.value = function (...t) {try {const e = n.apply(this, t);return e instanceof Promise ? e.catch((t) => {throw s.ERROR(t), t;}) : e;} catch (t) {throw s.ERROR(t), t;}}, i;};}}, 1514: (t, e, i) => {"use strict";i.d(e, { Ap: () => a, Gh: () => g, Ln: () => h, V$: () => f, b4: () => p, bb: () => m, gT: () => o, pT: () => d, xv: () => c, y5: () => l, zb: () => u });var n = i(1807);const r = "*",s = "|",o = " \\ ",a = ["--okviz-maps-field--"];function l(t) {return t.map((t) => (0, n.WGQ)(t)).join(s);}function c(t) {let e = [];try {e = t.split(s).map((t) => (0, n.y4v)(t));} catch (t) {}return e;}function h(t, e = 0) {const i = 1 == e ? t.split(s) : t.split(s).slice(0, e - 1);return i.push((0, n.WGQ)(r)), i.join(s);}function u(t) {return 1 == t.length;}function d(t) {return m(t) ? "" : ("string" == typeof t ? c(t) : t).join(o);}function p(t) {return t.endsWith(s + (0, n.WGQ)(r));}function f(t) {return !p(t);}function g(t, e) {if (t == e) return !1;const i = e.split(s),o = t.split(s);return i.slice(0, -1).join(s) == o.slice(0, -1).join(s) && o[o.length - 1] == (0, n.WGQ)(r);}function m(t) {const e = [l(a)],i = Array.isArray(t) ? l(t) : t;return e.includes(i);}}, 1520: (t, e) => {"use strict";var i;Object.defineProperty(e, "__esModule", { value: !0 }), e.DisplayUnitSystemType = void 0, (i = e.DisplayUnitSystemType || (e.DisplayUnitSystemType = {}))[i.Default = 0] = "Default", i[i.Verbose = 1] = "Verbose", i[i.WholeUnits = 2] = "WholeUnits", i[i.DataLabels = 3] = "DataLabels";}, 1542: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(7991),r = i(7493);const s = async (t) => {if (!t.alg) throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const { algorithm: e, keyUsages: i } = function (t) {let e, i;switch (t.kty) {case "RSA":switch (t.alg) {case "PS256":case "PS384":case "PS512":e = { name: "RSA-PSS", hash: `SHA-${t.alg.slice(-3)}` }, i = t.d ? ["sign"] : ["verify"];break;case "RS256":case "RS384":case "RS512":e = { name: "RSASSA-PKCS1-v1_5", hash: `SHA-${t.alg.slice(-3)}` }, i = t.d ? ["sign"] : ["verify"];break;case "RSA-OAEP":case "RSA-OAEP-256":case "RSA-OAEP-384":case "RSA-OAEP-512":e = { name: "RSA-OAEP", hash: `SHA-${parseInt(t.alg.slice(-3), 10) || 1}` }, i = t.d ? ["decrypt", "unwrapKey"] : ["encrypt", "wrapKey"];break;default:throw new r.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');}break;case "EC":switch (t.alg) {case "ES256":e = { name: "ECDSA", namedCurve: "P-256" }, i = t.d ? ["sign"] : ["verify"];break;case "ES384":e = { name: "ECDSA", namedCurve: "P-384" }, i = t.d ? ["sign"] : ["verify"];break;case "ES512":e = { name: "ECDSA", namedCurve: "P-521" }, i = t.d ? ["sign"] : ["verify"];break;case "ECDH-ES":case "ECDH-ES+A128KW":case "ECDH-ES+A192KW":case "ECDH-ES+A256KW":e = { name: "ECDH", namedCurve: t.crv }, i = t.d ? ["deriveBits"] : [];break;default:throw new r.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');}break;case "OKP":switch (t.alg) {case "Ed25519":e = { name: "Ed25519" }, i = t.d ? ["sign"] : ["verify"];break;case "EdDSA":e = { name: t.crv }, i = t.d ? ["sign"] : ["verify"];break;case "ECDH-ES":case "ECDH-ES+A128KW":case "ECDH-ES+A192KW":case "ECDH-ES+A256KW":e = { name: t.crv }, i = t.d ? ["deriveBits"] : [];break;default:throw new r.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');}break;default:throw new r.T0('Invalid or unsupported JWK "kty" (Key Type) Parameter value');}return { algorithm: e, keyUsages: i };}(t),s = [e, t.ext ?? !1, t.key_ops ?? i],o = { ...t };return delete o.alg, delete o.use, n.A.subtle.importKey("jwk", o, ...s);};}, 1575: (t, e, i) => {"use strict";function n(t, e, ...i) {if ((i = i.filter(Boolean)).length > 2) {const e = i.pop();t += `one of type ${i.join(", ")}, or ${e}.`;} else 2 === i.length ? t += `one of type ${i[0]} or ${i[1]}.` : t += `of type ${i[0]}.`;return null == e ? t += ` Received ${e}` : "function" == typeof e && e.name ? t += ` Received function ${e.name}` : "object" == typeof e && null != e && e.constructor?.name && (t += ` Received an instance of ${e.constructor.name}`), t;}i.d(e, { A: () => r, t: () => s });const r = (t, ...e) => n("Key must be ", t, ...e);function s(t, e, ...i) {return n(`Key for the ${t} algorithm must be `, e, ...i);}}, 1587: (t, e, i) => {"use strict";i.d(e, { z: () => l });let n = [],r = [];function s(t) {if (t < 768) return !1;for (let e = 0, i = n.length;;) {let s = e + i >> 1;if (t < n[s]) i = s;else {if (!(t >= r[s])) return !0;e = s + 1;}if (e == i) return !1;}}function o(t) {return t >= 127462 && t <= 127487;}(() => {let t = "lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t) => t ? parseInt(t, 36) : 1);for (let e = 0, i = 0; e < t.length; e++) (e % 2 ? r : n).push(i += t[e]);})();const a = 8205;function l(t, e, i = !0, n = !0) {return (i ? c : h)(t, e, n);}function c(t, e, i) {if (e == t.length) return e;e && d(t.charCodeAt(e)) && p(t.charCodeAt(e - 1)) && e--;let n = u(t, e);for (e += f(n); e < t.length;) {let r = u(t, e);if (n == a || r == a || i && s(r)) e += f(r), n = r;else {if (!o(r)) break;{let i = 0,n = e - 2;for (; n >= 0 && o(u(t, n));) i++, n -= 2;if (i % 2 == 0) break;e += 2;}}}return e;}function h(t, e, i) {for (; e > 0;) {let n = c(t, e - 2, i);if (n < e) return n;e--;}return 0;}function u(t, e) {let i = t.charCodeAt(e);if (!p(i) || e + 1 == t.length) return i;let n = t.charCodeAt(e + 1);return d(n) ? n - 56320 + (i - 55296 << 10) + 65536 : i;}function d(t) {return t >= 56320 && t < 57344;}function p(t) {return t >= 55296 && t < 56320;}function f(t) {return t < 65536 ? 1 : 2;}}, 1631: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(t) {if (!(e = n.exec(t))) throw new Error("invalid format: " + t);var e;return new s({ fill: e[1], align: e[2], sign: e[3], symbol: e[4], zero: e[5], width: e[6], comma: e[7], precision: e[8] && e[8].slice(1), trim: e[9], type: e[10] });}function s(t) {this.fill = void 0 === t.fill ? " " : t.fill + "", this.align = void 0 === t.align ? ">" : t.align + "", this.sign = void 0 === t.sign ? "-" : t.sign + "", this.symbol = void 0 === t.symbol ? "" : t.symbol + "", this.zero = !!t.zero, this.width = void 0 === t.width ? void 0 : +t.width, this.comma = !!t.comma, this.precision = void 0 === t.precision ? void 0 : +t.precision, this.trim = !!t.trim, this.type = void 0 === t.type ? "" : t.type + "";}r.prototype = s.prototype, s.prototype.toString = function () {return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (void 0 === this.width ? "" : Math.max(1, 0 | this.width)) + (this.comma ? "," : "") + (void 0 === this.precision ? "" : "." + Math.max(0, 0 | this.precision)) + (this.trim ? "~" : "") + this.type;};}, 1650: (t, e, i) => {"use strict";i.d(e, { B: () => s });var n = i(6599),r = i(2140);class s extends r.c {showEmpty = !1;constructor(t) {t.optionType = "color", super(t), Object.assign(this, t);}render(t) {super.render(t);const e = new n.s();e.dom({ id: `oop-color-${this.path}`, nullable: this.showEmpty, color: this.displayValue }, this.element), e.on("change", (t) => {this.value = t.color, this.onChange && this.onChange(t.color);});}refresh() {const t = this.element.querySelector("input");t && (t.value = this.displayValue);}}}, 1665: (t, e, i) => {"use strict";var n;i.d(e, { E: () => n }), function (t) {t[t.AppSource = 0] = "AppSource", t[t.OKVIZ = 1] = "OKVIZ";}(n || (n = {}));}, 1683: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(747),r = i(9064),s = i(3363);function o(t) {var e = this._name,i = this._id;"function" != typeof t && (t = (0, n.A)(t));for (var o = this._groups, a = o.length, l = [], c = [], h = 0; h < a; ++h) for (var u, d = o[h], p = d.length, f = 0; f < p; ++f) if (u = d[f]) {for (var g, m = t.call(u, u.__data__, f, d), v = (0, s.Jt)(u, i), y = 0, b = m.length; y < b; ++y) (g = m[y]) && (0, s.Ay)(g, e, i, y, m, v);l.push(m), c.push(u);}return new r.eB(l, c, e, i);}}, 1710: (t, e, i) => {"use strict";i.d(e, { t: () => s });var n = i(6639),r = i(2140);class s extends r.c {constructor(t) {t.optionType = "text", super(t), Object.assign(this, t);}render(t) {super.render(t), (0, n.tT)(".oop-text", this.element, this.description);}refresh() {}}}, 1715: (t, e, i) => {"use strict";i.d(e, { v: () => n });const n = { geo: '<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.65 68"><path d="M10.02,14v-.3l1.6-.8v-.2l-.4-.1v-.4l.4-1h.7l1.4-.4.3-1.1,1.6-.8h1.2l1.9-.6h.4l1.5.9,2.2.5,2.3-.1,1.4,1.1.5.1.6-.3h.5l1.9.8,1.2-.4v-.2l-.2-.5.5-.4h.3l.1.1.1.7,1.1.3v-.3h.3l.3.3v.3l-.6.6-1.6.1-1.1.7-1.5.4-.5.7-.5.9-.1.7.7.4.6.6.5.1v.4l-.3.6v.5l.6-.1.8-1.3.8-.5.1-.7,1.2-1.7,1.1-.1.5.9v.3l-.1.3.7.1.5-.7h.2l.2,1.4.7,1.6v.4l-.2.4-1.5.7-.6.1-.1-.2h-1.2l-1.6,1v.2h.2l1-.6h.9v.2l-.3.3v.5l.7.3-.1.4-.9.2-.3.2v.2l-.2-.1v-.2l.4-.2v-.4l-.8.2-1.1.6-.4.7-.9.1-.8,1.2-.3.4-.3.1.1-.6h-.2l-.4,1.3-1.2.9-.8.9-.1.9-.2,1.2-.1.4h-.2l-.3-.7v-1.3l-.5-.2h-.7l-.6.1v.4l-.5.1-.6-.3h-1l-1,.9-.6,1.2-.2,1.3.3.8.3.5h1.1l.5-.8,1.3-.2v.4l-.9,1.6-.1.3,1.7.1-.2,1.5v.7l.3.2.2.4.4.2.4-.2.3-.1.2.1.2.2.1.2h.3l.3-1,.5-.2.6-.3.4-.3.2.1v.2l-.3.2v.3l-.1.1-.1.4.2.2.4-.1v-.7l.2-.5h.3l.8.7.7.1.4-.1.3-.1.2.1.3.5.5.4.3.4.6.6,1.3.2.4.5.4.5.2.7-.1.5-.2.3-.2.3v.2h.2v-.2l.5-.2.1-.1h.4v.3l-.1.2-.2.1h-.2v.3h.4l.3-.3.1-.4h.3l.3.3,1.4.7h.8l1.1.7h.4l.3,1.5-1.4,1.8.2.9v.9l-.4,1.4-.3,1-1.1.4-1,.6-.1,1.5-.4,1.1-.4,1-.4.6h-.3l-.8-.4-.4-.1.9,1.1-.3.6-.3.4h-.6l-.3.2v.2l.1.1-.1.4-.5.2v.3l.3.4-.1.7-.4.7.8.5v.4l-.2.3v.8l.2.6-.3.4v.3h-.2l-.5-.3-.1-.4-.3-.1-1.1-1.9-.2-.1-.2-.1v-.2l.3-.2v-.4l-.4-1.3-.7-.4-.1-.4v-.5l-.2-.4.1-.9.1-.1v-1.2l-.3-.4v-1.3l-.1-.6-.1-.6-.1-.8v-.7l-.1-.6-.2-.7-.1-.3-.8-.6-1.3-1.3-.4-.7-.4-.5-.4-.8-.1-.3-.2-.6-.7-.4v-.9l.4-.4v-.2h-.3v-.6l.2-1,.9-.9v-1.8l-.1-.4-.2-.1h-.1l-.2.1-.1.4h-.4l-.6-.6-.7-.4-.2-.3-.1-.5-.2-.4-.2-.4h-.5l-.6-.5-.3-.2-.3-.2-.3-.4-.2-.2-.2.2-.4.2-1.3-.8-.7-.4-.6-.5-.3-.4.1-.4v-1l-.6-1.2-.4-1-.2-.8v-1.7h-.2l-.1.4-.2.8-.1.5.2.5.3,1.1.3,1.1v.2h-.3l-.2-.6-.3-.5-.3-.7-.1-.4.2-.6-.1-.4-.1-.6-.1-.4v-.6l-.6-.5v-.8l.2-.9.3-1,1-1.7.6-1.1.5-.6h.4v.2l.2.1v-.4l.1-.8-.2-.5.1-.6.3-1.1.4-.9.1-.5v-.2h-.1l-.3.1h-.2l-.1-.2-.1-.2-.1-.3-.4-.1-.5-.3-.2-.2h-.2l-.2.2-.4.2-.2.1h-.6l-.1-.1.2-.2.3-.1.2-.2.3-.2v-.2h-.2l-.6.3-2.3,1.2-.9.5-.4.1h-.2Z" style="fill:#ededed;"/><path d="M8.82,14.2v-.3l.4-.1.3.1.1.2-.3.1h-.5Z" style="fill:#ededed;"/><path d="M15.72,17.4v-.4h.4l.1.3.2.3v.5h-.1l-.3-.3v-.4h-.3Z" style="fill:#ededed;"/><path d="M27.22,21.3h.2l.3-.5.2-.1.2.2h.1v-.3l-.3-.5-.5-.1-.1-.2-.1-.5-.4-.4-.6.1-.8.4v.2l.3.1.5-.1.4.2.4.1.1.3-.9.1-.3.2-.2.5-.3.6.1.3.5-.4.1-.5.4-.4.3-.1.4.2v.6Z" style="fill:#ededed;"/><path d="M26.63,22.1v-.2l.6-.1.4-.1.5-.2.6-.1.3-.2h.3v.2l-.4.2-.8.1-.2.2-.8.2h-.5Z" style="fill:#ededed;"/><path d="M35.13,19.4l1.2-.9.3-.1.1.2-.2.5.2.3.1.6-.1.5-.5-.3-.4-.2h-.5l-.2-.4v-.2Z" style="fill:#ededed;"/><path d="M41.63,5.5v.2l-.9.6h-.9l-1,.4-1,1-.5.1h-.7l-.3-.3v-.2l.5-.5.8-.4.8-.2v-.2l-.6-.1-.9.1-.5-.1v-.2l1.4-.4h.9l.5.3h1.3l.8-.1h.3Z" style="fill:#ededed;"/><path d="M31.32,13l-.2-.2v-.2l.7-.5h.4l.1.1v.5l.2.1v.3h-.2l-.2-.3h-.3l-.2.1v.2l-.3-.1Z" style="fill:#ededed;"/><path d="M25.82,9.2h.7l.5-.5,1.1-.3v-.2l-.7-.4-.6.2-.6.6-.6.4.2.2Z" style="fill:#ededed;"/><path d="M29.13,7.8v.5h1.2l.5-.1.3-.4-.1-.4-.3-.1-.3.5h-.1l-.1-.1-.3-.3-.3.1-.5.3Z" style="fill:#ededed;"/><path d="M27.02,9.5v-.2l.8-.5.6-.1.8.4.5.1v.3l-.3.3.1.1.1.3h-.1l-.4.1-.3.2-.3-.1-.3-.1h-1.5l-.4-.3v-.2l.7-.1.4.1v-.2l-.3-.1" style="fill:#ededed;"/><path d="M30.52,8.9l.7-.4.7.2v.3l-.2.3-.4.4h-.5l-.3-.3v-.5Z" style="fill:#ededed;"/><path d="M32.13,9.1v.4h.3l.5-.2.5-.3v-.3h-.6l-.4.1-.3.3Z" style="fill:#ededed;"/><path d="M32.13,7.8l.1.6h.2l.5-.3v-.3l-.2-.2h-.6v.2Z" style="fill:#ededed;"/><path d="M33.63,7.7l.2.6.9.3h1.6l-.1-.4h-1.6l-.5-.6-.5.1Z" style="fill:#ededed;"/><path d="M33.22,10.1l-.1-.5,1-.7h1v.3l.2.3.8-.1.3.3.6.4.4.4-.1.3-.2.3v.1l1,.6-.1.3-1,.6-.3-.2-.2-.3h-.2v.6l-.5,1-.2.1-.4-.3-.8-.8h-1l-.2-.2.5-.4h.8l1-1.1.3-.3-.1-.3-1-.1-.9-.1-.6-.2Z" style="fill:#ededed;"/><path d="M23.52,30.5v-.1l.4-.3,1.4.1,1.6,1.1v.3h-1.2l.1-.3-.2-.1-.3-.3-.3-.4h-1.5Z" style="fill:#ededed;"/><path d="M25.32,32.1h.6l-.1.3h-.3l-.2-.1v-.2Z" style="fill:#ededed;"/><path d="M26.63,32.2v.1h.5l.5.1.1.1.4-.2.7-.1v-.2h-.4l-.4-.4-.6.1h-.2v.4h-.5" style="fill:#ededed;"/><path d="M29.43,32.2h.3l.2.2-.5.1-.2-.1.2-.2Z" style="fill:#ededed;"/><path d="M30.72,32.9l.2.5.3-.1v-.3l-.2-.1h-.3" style="fill:#ededed;"/><path d="M30.93,33.5h.2l.1.7h-.3v-.7Z" style="fill:#ededed;"/><path d="M46.43,5.1l2.7.1v.2l-.3.1-.5.2v.1l.3.2.4.2.4.2.4-.1.4-.2h.7l.5.1v.2l-.3.1-.7.3-.2.2-.7.4-.7.6v.5l.6.4v.1l-.4.6-.3.3h-.3l-.2-.1-.3.1v.3l.4.4v.2h-.4l-.2-.2h-.2v.3l.5.2h.3l-.1.4h-.9l-1.3.2-1.4.6-1.2.4-1.7,2.1-.4.2-.5-.5-.6-.4v-1.5l.8-1.1.6-1-.4-.8-.2-1.1-.7-.5h-.9l-.1-.5.4-.3.2.1h.6l.2-.2v-.4l3.1-1.3h.5l.5.3,1.2-.1.4-.6Z" style="fill:#ededed;"/><path d="M47.32,12.7l.3-.3h.2l.3.4h.2l.4-.2.7-.1.3.3-.1.5-.6.4-.9-.1-.5-.1v-.3l-.2-.1-.1-.4Z" style="fill:#ededed;"/><path d="M49.93,18.8l.2-.4-.2-.1.2-.3.3-.6.5-.2h.3l.3.1-.3.5-.2.5-.4.5h-.2l-.1-.1-.2.1h-.2Z" style="fill:#ededed;"/><path d="M52.43,15.7v.1l-.2.2.3.1.2.3-.3.2v.2l.2.4.2.5.3.5h.4v.3l-.3.4-.6.1-.8.2-.6.1.1-.2.4-.2v-.2l-.1-.1.2-.5.4-.3v-.4l-.3-.1-.4-.5v-.6l.3-.5h.6Z" style="fill:#ededed;"/><path d="M49.93,24.6v-2.5l.5-.1h.6l.7.2h.3l.4-.2-.1-.3.2-.3-.1-.6-.4-.3-.4-.2-.1-.1v-.3h.6l.1-.3-.1-.1.3-.1.1.3h.4l.7-.8.3-.1.2-.3.2-.1.1.3.1-.1v-.6l.4-.1.5-.1.1-.4v-.7l-.1-.3.3-.2.3-.1.1.3v.5l-.2.2v.3l.3.1.5.1h.3l.5-.2h.8l.3.1.2-.1.1-.5.2-.5.2-.2h.2l.1.1.3-.1v-.3l-.1-.4.7-.1h.3l.4-.2-.2-.2-.1-.1-.6.2-.4.1h-.4l-.5-1v-.3l.4-.4.3-.3v-.5h-.1l-.3-.1-.3.3-.4.4v.3l-.4.2-.3.7.2.5v.3l-.3.5-.2.5v.3l-.2.2-.2.1-.1.2h-.4v-.4l-.2-.3-.2-.2v-.5l-.1.1v-.3l-.4.2h-.1l-.2.2h-.4l-.2-.3v-1l.5-.4.4-.4.9-.9.7-.6.9-.9,1.4-.9h.7l.6.2.3.2,1,.4.9.6h.2l.2.2.1.1v.3l-.1.2h-.4l-.5-.2-.4-.1-.4-.2v.4l.2.2.4.2.5.5h.3l.7-.6.2-.1.3-.3.1.2h.3v-.4l-.2-.1v-.3l-.2-.1v-.4h.2l.4.3v.4h.2l.6-.2.8-.3.6-.2.9-.2,1-.1.5.3h.4v-.3l-.3-.4-.3-.1v-.3l.7-.7.4-.1.1.2v.4l.9,1.2v.5l-.3.1-.2.3h.5l.3-.3.1-.6h.6v-.2l-.7-.2-.5-.4-.2-.5,1.1-.7.5-.4.6-.5,1.6-.5.6-.1h2.5l.4.1-.1.4-.5.7.2.1.9-.5h1.1l3.6.6.4.1.9-.1.1-.4.2-.3.6.1,1.5.3h1.4l1-.1,1.1.4h.9l1.1-.5h.9l2.2.2,1.4.5.9.2.4.3v.2h-.4l-.4-.1h-.6l-.2-.1-.2.1v.5l.6.2.5.2.3.1-.1.3-.6.9v.2l-.8.1-.5.2.3.4.7.7.6,1,.3,1v.6h-.2l-.4-.5-.6-.6-.9-.8-.6-.4v-.5l.3-.4-.1-.6-.3-.5-.2-.1-.2.3h-.1l-.2-.1h-.4v.5l.2.5-.4.3-.7.1-.6.1h-.7l-.6.2-.1.2v1.3l.5.5h.2l.1-.1h.4l.4.3.7.8.4.8.3.8.2,1,.1,1-1,.3-.1.8-.1.7.4.6.5.8.1.2v.3l-.3.2-.3.2-.1-.3-.3-.6-.3-.5-.4-.3-.6-.6h-.1l-.4.4-.3-.1v-.4l.1-.2h-.4l-.6.6v.3l.4.4h.8l.4.2-.1.2-.2.1v.5l.8,1.2.4.8-.3.1.3.2.2.3v1.4l-.4.5-1,1-.9.6-.3.5h-.2l-.2-.3-.2-.2-.4.2-.4,1,.1.4.8.7.6.7.1,1.2-.3.5-.3.4-.4.3-.1.3h-.3v-.3l-.2-.3-.2-.2-.4-.3v-.4l-.3-.1-.3-.2-.1-.2h-.4l.2,1v.8l.3.7.4.6.4.6.3.6.2.4-.1.3h-.3l-.3-.3h-.2l-.6-1.3-.3-.5-.5-.5v-1.4l-.1-.9-.3-.8-.3-.9-.2.1-.3.3-.3.1-.3-.1.1-.8-.6-.8-.4-.3v-.3l-.1-.5h-.4l-.4.5-.3-.1-.1-.2-.3.2-.4.7-.5.7-.4.5-.6.9-.3,1.3-.1.8-.3,1.1h-.2l-.3-.1-.3-.9-.5-.8-.7-1.7-.3-1.2-.1-1.2h-.3l-.1.6-.2.1-.3-.2-.6-.6-.2-.3-.1-.4-.5-.4h-2.3l-.4-.1-.5-.2v-.4l-.2-.2-.5.1-.2.2h-.6l-1.3-1.3h-.4l-.2.3v.2l.5.4.2.4.2.1.1.3h.2l.3-.1.1.2v.5h.3l.5.1.2-.3.2-.4h.4v.5l.1.3.3.1.4.1.2.1.1.2-.4,1.1-.5.7-.5.5-.4.2-.6.4-.5.5-.5.3-1.3.3-.4.1-.4-.6-.2-.3-.2-1.2-.9-1.3-1.5-2.3-.3-1-.2.2-.1-.1-.1-.1h-.3v.4l.3.6.7,1.3.6,1v.7l.8.8.2.8.2.1.5.6.6.6-.1.7.4.1.7-.2,1.2-.4.6-.1v.3l-1.1,2.7-.9,1.3-1.2,1.2-.9,1.1v1.3l.4,2.6v.7l-.8.8-.8.7-.7.6.2.9v.9l-.9.6v.3l-.6,1.2-.9,1.1-.7.5-.7.1-1,.2-.4.4-.3-.1-.1-.2-.5-.3-.1-1-.9-1.6-.2-1.4-.1-.7-.7-1.6v-1.6l.7-1.3-.3-1.8-.6-1.2-.9-1.4.1-.8.3-.6v-.5h-1.1l-.6-.9h-.7l-1.4.4-1.8.6-.7-.1-1.6-1.7-1.1-1.4-.4-.8v-.9l.3-1v-1l.1-.7.9-1.9.5-.5h.3l.7-.9.2-.7.1-.3.6-.4.2-.3.4-.6h.3l.3.2h.4l1.1-.4.9-.2.5-.1.5-.2h.7l.9.1-.1.4-.2.6.1.2.4.3.4.2.6.1h.2l.1.5.5.2.7.2h.3v-.3h-.1v-.3l.4-.3.6-.1.3.3.4.3.6.3h.5l.4-.2.5-.1h.3l.3.1.2.1.2-.4.1-.4.2-.5v-.8l.1-.1v-.2l-.7.1h-1.1l-.7.1-.2-.3-.2-.6-.2-.6h.4l.2-.3.1-.1h.7l.2-.2.3-.2.2-.2h.5l.3.2.4.1.3.1h1v-.4l.1-.2-.2-.1h-.3l-.2-.3-.2-.2-.4-.2-.2-.2v-.3l.3-.2.2-.2v-.1l-.2-.1-.2.1-.8.4.2.2v.3l-.3.2h-.3l-.2-.3-.2-.5-.1-.2-.2.1-.5.2-.2.7-.3.5v.5l.2.3-.5.4h-.2l-.3-.2-.5.1-.1.3v1.4l-.5.1-.3-.3v-.5l.3-.1-.4-.1-.2-.4-.2-.5-.3-.5-.4-.2-.6-.6-.4-.1-.2-.2-.1-.2h-.2l-.1.3.2.2.2.3.1.2.4.3.3.1v.2l.5.3.2.3.1.3h-.1l-.2-.2h-.1v.6l-.1.2h-.2v-.5l-.3-.3-.3-.4-.3-.2h-.4l-.3-.2-.3-.6-.2-.3-.2-.2-.3.1-.4.5-.4.1-.2-.2-.4.2-.1.3-1,.8-.4.9-.4.7h-.3l-.3-.2-.3.1-.4.1-.4-.2-.3-.1-.2-.2Z" style="fill:#ededed;"/><path d="M55.72,22.1l-.3.3.1.4v.1h.2l.1-.1v-.4l-.1-.3Z" style="fill:#ededed;"/><path d="M55.43,23.3l.1-.1.3-.1v.1l-.1.3.1.1-.1.3h-.2l-.1-.1v-.5Z" style="fill:#ededed;"/><path d="M56.82,24.3v.2l.4.2.3.2h.3l.1-.4-.2-.2h-.9Z" style="fill:#ededed;"/><path d="M60.32,25.5v-.2l.4.2.6-.1.1.2-.4.1-.2-.1-.2-.1h-.3Z" style="fill:#ededed;"/><path d="M63.32,25.6l.2-.3.6-.1v.2l-.2.2-.3.2h-.2l-.1-.2Z" style="fill:#ededed;"/><path d="M66.13,9.5l-.2.8.8.2.2.1h.6v-.2l-.5-.1-.1-.1-.1-.7h-.7Z" style="fill:#ededed;"/><path d="M66.32,9.3h.6l.3-.3h.1l.3-.2h.4l.6-.5v-.5h-.1l-.7.6h-.3l-.5-.1-.2.3-.2.3h-.2l-.1.4Z" style="fill:#ededed;"/><path d="M93.32,15.8v-.2h.3l.2.2.3.5.4.4h.2l.6.7.3.2v.1l-.1.2.2.5.3.2.2.2v.2h-.2v.1h-.2l-.2-.5-.6-.6-.5-.6-.5-.5-.4-.8-.3-.3Z" style="fill:#ededed;"/><path d="M96.13,19.8v-.2l.3-.1.3.1h.6l.2.1.3.3v.3l-.3.2v.2h-.3l-.2-.1h-.2v.4h-.3l-.2-.3-.1-.2.2-.4-.1-.1-.2-.2Z" style="fill:#ededed;"/><path d="M96.72,21.2h.3l.4.3.3.6.3.8.1.4-.1.7-.4.1-.3-.3h-.6l-.5.3v.5l-.3.2-.4-.1v-.2l.3-.4.8-.6v-.5h.2l.3.1.2-.5-.3-.3-.2-.6-.1-.5Z" style="fill:#ededed;"/><path d="M95.43,25.3h.3v.2l.1.3.2.2h.2l.2-.3-.2-.3-.3-.5h-.3l-.2.1v.2" style="fill:#ededed;"/><path d="M96.43,24.5h.4l.2-.1.3-.3-.2-.1-.4.1-.2.1-.1.3Z" style="fill:#ededed;"/><path d="M84.22,16.2l.2-.1.1.1v.8l-.2.4-.2.3h-.3v-.2l.3-.3.2-.4-.1-.6Z" style="fill:#ededed;"/><path d="M69.32,21.1h-.2v.2l-.2.1-.2.2v.1l.3.2.4.6v.6l.3.3.3.4.1.5.2.2v.2l-.3.2h-.3l-.7-.4-.4-.1v-.6l.2-.6-.5-.6-.8-.8v-.6l.6-.4.7-.2.3-.1h.3l.1.2v.2l-.2.2Z" style="fill:#ededed;"/><path d="M71.52,20.4h.5v.1l.1.7-.2.4-.3.1h-.3l-.2-.4.1-.5.2-.2.1-.2Z" style="fill:#ededed;"/><path d="M75.63,20.5l-.2.1.1.2h.1l.2.2h.1l.1-.2v-.2h.5l.4-.1.4-.1v-.2h-.3l-.1.1h-.2l-.3-.1-.2-.1h-.2l-.2.2-.2.2Z" style="fill:#ededed;"/><path d="M63.82,40l.5-.2h.2l.3.1v.2l-.2.2-.2.3v.5h-.3l-.4-.3.1-.8Z" style="fill:#ededed;"/><path d="M62.93,41.8v.9l.3.6h.2v-.4l-.2-.5v-.4l-.1-.2h-.2Z" style="fill:#ededed;"/><path d="M64.32,44h.2v.4l.1.8.1.7-.2-.1-.1-.2v-1.1l-.1-.5Z" style="fill:#ededed;"/><path d="M67.82,48.2l.1-.5-.2-.1.2-.7.6-.5.3-.2.3-.5.7-.7.2-.1v1.8l-.7,1.9-.5,1.6-.7.3h-.4l-.3-.7v-.6l.4-1Z" style="fill:#ededed;"/><path d="M71.63,48.5v.3l.3.1h.2v-.2l-.2-.2h-.3Z" style="fill:#ededed;"/><path d="M72.52,48.1h.2v.3l-.1.1h-.2l.1-.4Z" style="fill:#ededed;"/><path d="M93.82,28.7l.3-.1.1.5v.3l.2.7h-.3l-.3-.3-.2-.5.2-.6Z" style="fill:#ededed;"/><path d="M94.22,31.6l.5-.1.4.5-.2.6.2.7.5.2.5.4.1.2h-.3l-.5-.4h-.6l-.5-.7-.1-.4.2-.2-.1-.5-.1-.3Z" style="fill:#ededed;"/><path d="M80.82,35.8l.4.6.4.4-.2.5-.6.2-.3-.5.1-.6.1-.5.1-.1Z" style="fill:#ededed;"/><path d="M86.52,37.6l1.2,1,1.1,1.2.8.8.4.5-.1.6v.4l-.4.1-.9-.8-.9-1.5-.7-1-.6-.8h-.2l-.1-.4.4-.1Z" style="fill:#ededed;"/><path d="M89.52,42.8l.2-.3.6-.2.4.2.9.1.6.2.6.5.1.5-.4-.1-.3-.2h-.6l-.5-.2-.9-.2-.3-.3h-.4Z" style="fill:#ededed;"/><path d="M94.72,35l-.1.4-.3.5h-.2v-.4l.2-.3.1-.2.2-.1" style="fill:#ededed;"/><path d="M95.52,34.6h.4v.2l-.2.3-.3.1v-.3l.1-.3Z" style="fill:#ededed;"/><path d="M95.13,36.2l.2-.3.2-.1h.1l.2-.1.1-.3h.3l.1.3.2.3-.5.7h-.4v-.4l-.1-.1h-.4Z" style="fill:#ededed;"/><path d="M94.02,37l.2.2.2.2.2.3-.4.3-.1.6.3.3.1.5-.4.4-.3.9-.4.8-.2.1h-.4l-1.2-.5-.3-.8-.1-.7v-.4h.2l1-.7.6-.7.3-.5.1-.4.6.1Z" style="fill:#ededed;"/><path d="M98.02,38.8l.1.3v.6l-.1.3h-.2l-.2-.3v-.3l.1-.4.2-.2h.1Z" style="fill:#ededed;"/><path d="M96.63,39.3h.2v.1l-.2.2-.4.1h-.9l-.1.8.4-.3.4-.2.3.1v.2h-.2l-.5.3v.3l.3.5.1.3-.2.3-.4.1v-.3l-.1-.7h-.2l-.1.4.1.7v.1h-.4v-.6l-.1-.4v-.7l.3-1,.2-.3h.5l.1.2h.5l.4-.2Z" style="fill:#ededed;"/><path d="M93.32,43.8l.2-.2.2-.2h.6v.2l-.2.2h-.8Z" style="fill:#ededed;"/><path d="M94.72,43.6v.2l.2.1h.5l.5-.3v-.3h-.2l-.3.2-.7.1Z" style="fill:#ededed;"/><path d="M96.02,44.1v.3h.3l.3-.2.6-.3.1-.1v-.2h-.2l-.5.2h-.3v.2l-.3.1Z" style="fill:#ededed;"/><path d="M97.93,41.1h.4l.4.2v.2h-.5l-.3-.1v-.3Z" style="fill:#ededed;"/><path d="M98.93,40.4l.4.9.5.1.7.5.6.4.1.3v.7l.6.5.6.1.4.2.5-.6.2-.1.5.6.2.5.5.2h.5l.1-.3-.5-.7-.3-.4-.1-.3.1-.3-.8-.7-.8-.5-.5-.2-.6-.3-.8-.2-.5.4h-.4v-.6l-.1-.2-.4-.1-.2-.1h-.2l-.3.2Z" style="fill:#ededed;"/><path d="M104.82,42.8h1l.3-.4v-.7l-.2.1-.1.2-.1.3v.1h-.1l-.2-.1h-.2v.1l-.4.2v.2Z" style="fill:#ededed;"/><path d="M102.52,44.7h.2l.1,1.8.1,1.6.8,1.8.4,2.2-.6,1.3-1.2,2-1.6,1.6-.3.2-.5.1-.4.3-.3.2-.3-.1v-.2h-.4l-.2.3-.3-.2-.4-.6-.1-.7-.2-.6.5-.5v-.2h-.3l-.5.3v.3l-.3.1v-1.1l-.3-.3h-1.9l-1.5.3-1.4.6-.5.1-.4.1-.3-.5.5-1.7.3-1.9.1-1.7,1.4-.7,1.3-.2,1.6-1.5,1.1-.9.5-.1v.4h.6l-.2-.3v-.3l.4-.1.6-.7.2-.3h.4l.2.2.7.1.1.3-.4,1,.1.4.2.3.7.7.4-.1.6-1.1.2-.9.2-.7.3-.4Z" style="fill:#ededed;"/><path d="M98.02,58.6l.2-.1.2.2.3-.1h.4l.1.4-.5.3-.1.2-.3.3h-.7v-.5l.2-.5v-.3l.2.1Z" style="fill:#ededed;"/><path d="M108.02,56.7l.2.2.1.9v.5l.5.1v.3h-.5l-.4.3-.5.5-.3.5-.4-.1.1-.4.1-.6.4-.2.4-.4.1-.7.1-.7.1-.2Z" style="fill:#ededed;"/><path d="M106.13,59.5l.3.3.1.4-.5.2-.9.2-.6.5-.4.3-.2.3-.3.2h-.9v-.5l.3-.2.8-.3.5-.4.7-.3.6-.6.5-.1Z" style="fill:#ededed;"/></svg>', body: '<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200"><path d="M623.88,649.85c4.15,25.31,27.22,104.32,30.84,116.12,3.64,11.76,6.35,23.58,7.25,31.74.91,8.15,3.64,21.77,15.45,46.25,5.44,10.87,9.05,18.15,9.96,23.57.91,5.46,0,38.11,1.8,51.73,1.82,13.6,14.51,62.58,31.75,99.76,3.61,9.07,16.31,36.28,11.78,59.86-4.52,23.59-4.52,32.68,7.26,34.48,16.31,3.64,26.29,7.26,32.63,15.42,3.64,3.62,17.26,11.79,30.84,8.16,4.55,2.73,13.65,3.64,17.26-.9,4.52,0,6.35-6.35,5.41-11.79l-7.22-7.25s-19.97-8.17-25.4-13.62c-5.46-5.44-39.89-19.94-42.64-142.4-.89-26.29,1.8-49.88-2.72-70.74-4.52-20.87-16.33-64.4-16.33-64.4.91-38.1-.89-117.91-15.4-200.45-1.85-10.88-3.64-26.3-3.64-40.81s-8.18-67.2-11.78-73.54c.89-6.35,0-14.52-.91-24.49-.91-9.98.02-34.39.91-40.75.91-6.34,4.55-17.24,5.46-30.83.89-13.62,5.41-22.69,7.26-33.56,1.78,16.31,7.25,48.98,10.87,58.96.91,14.51,3.64,24.49,6.35,30.83-1.82,19.05,25.55,81.06,44.6,117.32.76,32,.05,45.07,1.29,55.23,0,0,1.6,23.88,2.21,31.25.56,7.36,7.69,4.91,8.09.85l1.62-24,2.76-.17,4.8,27.85c2.34,8,8.21,4.51,8.7,0l-.37-26.95,1.87-.7,9.05,26.91c3.86,10.91,10.38,5.21,9.21-.85l-6.05-29.35,2.34-.67s7.78,15.41,11.23,23.51c3.66,8.61,10.03,4.25,7.99-2.33-1.57-5.07-7.01-24.45-10.05-34.34-3.07-9.89,3.96-11.9,9.94-8.07,12.47,7.22,16.99,3.14,15.73-2-9.14-4.16-20.48-13.55-26.21-24.19-4.55-8.68-12.71-13.65-21.59-24.6-12.71-19.07-16.38-59.34-18.22-73.86-3.61-29.93-12.71-59.86-20.85-72.56,1.8-21.77-1.8-41.73-5.44-56.24,12.71-82.54-16.33-110.66-31.75-116.1-2.72-3.64-13.6-9.98-17.23-11.8-46.26-19.96-56.36-23.91-59.53-33.55-2.27-6.85-2.75-21.1-2.79-30.35,1.4-4.69,4.45-14.55,4.45-14.55,0,0,4.55,0,5.46-2.72.91-2.72,4.97-12.24,6.32-16.78,1.36-4.54.47-12.7.47-14.51s-3.07-1.92-5.81-1.92l2.16-7.61c1.38-9.07,1.57-32.47-8.14-46.25-8.63-12.25-20.85-17.7-36.76-17.7-15.91,0-28.1,5.42-36.72,17.68-9.72,13.78-9.53,37.19-8.15,46.25l2.16,7.61c-2.71,0-5.8.1-5.8,1.92s-.9,9.97.46,14.51c1.36,4.55,5.43,14.06,6.36,16.78.9,2.72,5.43,2.72,5.43,2.72,0,0,3.06,9.86,4.48,14.56-.05,9.25-.52,23.5-2.77,30.35-3.18,9.64-13.3,13.6-59.54,33.55-3.64,1.81-14.51,8.17-17.23,11.8-15.43,5.44-44.45,33.56-31.75,116.1-3.62,14.51-7.25,34.46-5.45,56.24-8.16,12.71-17.23,42.64-20.86,72.56-1.81,14.52-5.52,54.79-18.21,73.86-8.88,10.96-17.04,15.93-21.59,24.6-5.73,10.65-17.05,20.03-26.2,24.19-1.29,5.15,3.25,9.23,15.72,2,5.99-3.83,13.02-1.81,9.96,8.07-3.06,9.9-8.5,29.27-10.08,34.34-2.03,6.59,4.34,10.93,8,2.33,3.45-8.1,11.21-23.51,11.21-23.51l2.36.67-6.05,29.35c-1.19,6.06,5.33,11.76,9.21.85l9.02-26.91,1.89.7-.37,26.95c.48,4.51,6.31,8,8.66,0l4.84-27.85,2.75.17,1.6,24c.42,4.05,7.51,6.5,8.11-.85.6-7.36,2.21-31.25,2.21-31.25,1.22-10.16.52-23.23,1.27-55.23,19.04-36.27,46.43-98.27,44.61-117.32,2.72-6.34,5.45-16.32,6.35-30.83,3.62-9.97,9.07-42.65,10.88-58.96,1.81,10.87,6.36,19.95,7.25,33.56.91,13.6,4.55,24.49,5.45,30.83.91,6.36,1.85,30.77.93,40.75-.9,9.97-1.8,18.14-.9,24.49-3.62,6.34-11.8,59-11.8,73.53s-1.8,29.93-3.62,40.81c-14.51,82.54-16.32,162.35-15.42,200.45,0,0-11.8,43.53-16.33,64.4-4.54,20.84-1.82,44.44-2.72,70.75-2.73,122.45-37.19,136.96-42.64,142.39-5.44,5.45-25.4,13.62-25.4,13.62l-7.25,7.25c-.91,5.44.9,11.79,5.44,11.79,3.62,4.54,12.71,3.65,17.23.9,13.61,3.64,27.21-4.52,30.84-8.16,6.35-8.16,16.32-11.79,32.64-15.42,11.8-1.8,11.8-10.88,7.26-34.48-4.54-23.57,8.16-50.79,11.79-59.85,17.24-37.19,29.94-86.16,31.75-99.76,1.82-13.62.91-46.26,1.82-51.73.89-5.43,4.51-12.7,9.96-23.57,11.78-24.48,14.51-38.11,15.42-46.25.9-8.16,3.62-19.97,7.26-31.74,3.62-11.8,26.63-90.8,30.83-116.12,1.05-6.05,6.28-3.8,6.89.01h0Z" style="fill:#ededed;"/></svg>', plane: '<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200"><path d="M547.52,102.91c-13.48,13.48-21.9,32.02-21.87,52.36l.03,247.49-457.81,203.58c-7.87,3.47-12.93,11.2-13.05,19.76l.03,52.45c.03,6.62,3.04,12.87,8.22,17.01,5.21,4.11,11.95,5.64,18.43,4.19l444.42-98.59-.17,377.93-92.46,46.06.03.03c-7.49,3.73-12.15,11.4-12.06,19.76v52.42c.09,6.97,3.47,13.48,9.14,17.53,5.67,4.05,12.93,5.18,19.53,2.98l150.4-50.08,149.88,50.08c6.62,2.11,13.86.95,19.47-3.15,5.64-4.08,8.94-10.62,8.97-17.59l.23-52.19c-.03-8.3-4.8-15.85-12.29-19.53l-92.46-46.52-.06-377.7,444.45,98.74c6.45,1.48,13.22-.09,18.4-4.22,5.18-4.14,8.22-10.36,8.22-17.01l.06-52.36c0-8.62-5.12-16.4-13.02-19.9l-457.96-203.72-.26-247.6c0-40.68-33.38-74.06-74.09-74.09-20.37,0-38.88,8.39-52.36,21.87l.02.03Z" style="fill:#ededed;"/></svg>', theater: '<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200"><g id="back"><path d="M73.48,600.08c0,138.95,65.26,262.81,166.76,342.59,14.01,11.01,33.99,10.19,47-1.99,90.97-85.17,147.87-206.31,147.87-340.6s-56.9-255.42-147.87-340.6c-13.01-12.18-32.99-13-47-1.99-101.5,79.77-166.76,203.64-166.76,342.59h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></g><g id="sectors"><g id="Economy"><path d="M627.49,900.06c-33.61-13.92-91.84-38.04-125.45-51.96-13.08,30.87-28.6,60.69-46.43,89.19-20.02-.28-40.03-.56-60.05-.84-9.14,13.01-18.81,25.64-28.98,37.85-3.13,3.75-6.3,7.47-9.52,11.15,40.53,34.61,135.06,115.36,141.81,121.11,26.77-30.76,51.1-63.63,72.72-98.31-.05-.03-.1-.06-.15-.09,21.04-33.29,56.06-108.11,56.06-108.11h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M627.5,299.72c-15.39-35.97-34.99-74.75-55.97-107.95.02-.01.04-.02.06-.04-21.63-34.68-45.95-67.55-72.72-98.31-6.74,5.76-101.27,86.49-141.8,121.11,3.22,3.67,6.39,7.39,9.51,11.14h0c10.17,12.22,19.84,24.85,28.99,37.87,20.05-.28,40.11-.56,60.16-.85,17.78,28.43,33.26,58.19,46.3,88.98,33.61-13.92,91.85-38.05,125.45-51.97h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M951.4,1003.31c-.73-.3-114.96-47.62-124.36-51.51.04-.11.09-.22.14-.33-53.9-22.33-107.81-44.65-161.71-66.98-15.05,36.85-32.93,72.29-53.41,106.02.05.03.1.06.15.1-18.67,30.75-39.5,60.08-62.31,87.77,32.01,23.26,64.01,46.51,96.02,69.77,28.81-3.86,56.93-9.91,84.17-17.98,30.83-10.08,46.15-13.36,68.51-25.47-.02-.01-.05-.03-.07-.04,56.6-25.31,108.18-59.71,152.86-101.34h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M798.61,95.31c-27.64-11.86-42.78-17.65-68.46-25.45-27.26-8.07-55.39-14.13-84.22-17.99h0c-32.01,23.25-64.01,46.51-96.01,69.76,22.83,27.72,43.68,57.09,62.37,87.87.08-.05.17-.1.25-.15,20.46,33.72,38.33,69.13,53.37,105.97,53.82-22.29,107.65-44.59,161.48-66.89.01.03.03.07.04.1h0c7.31-3.03,123.88-51.31,124.61-51.62-44.83-41.77-96.61-76.27-153.43-101.6h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></g><g id="Regular"><path d="M872.18,387.76c63.81-15.32,127.62-30.64,191.42-45.96-17.66-33.08-38.6-64.18-62.39-92.86-14.93-18.58-32.67-37.67-49.17-52.03,0,0-83.81,34.71-124.61,51.61.01.03.02.05.03.08-53.85,22.3-107.7,44.61-161.55,66.92,3.97,9.73,7.75,19.57,11.32,29.49,3.09,8.58,6.02,17.2,8.79,25.86,16.1,4.31,32.2,8.63,48.3,12.94,3.27,11.58,6.28,23.22,9.02,34.93,42.95-10.31,85.9-20.62,128.85-30.93h0s0-.03-.01-.05h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M872.17,812.24s0-.03.01-.05c-42.95-10.31-85.9-20.62-128.84-30.93h0c-2.74,11.71-5.75,23.36-9.02,34.93-16.1,4.31-32.2,8.63-48.31,12.94-2.76,8.65-5.69,17.26-8.78,25.83-3.58,9.94-7.36,19.78-11.34,29.52,53.85,22.31,107.7,44.61,161.55,66.92-.01.02-.02.05-.03.07,40.81,16.9,122.43,50.71,122.43,50.71l2.19.91c5.73-4.97,26.85-27.78,49.14-52.04,23.8-28.68,44.74-59.77,62.4-92.86-63.81-15.32-127.61-30.64-191.42-45.96h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/><path d="M686.55,548.32l-.22.02c-3-44.49-9.7-88.78-20.42-132.36-.08.02-.17.04-.25.06-6.48-26.32-14.36-52.38-23.65-78.07-4.59-12.69-9.5-25.23-14.73-37.6-8.21,3.4-91.85,38.04-125.46,51.96,13.1,30.91,23.75,62.87,31.83,95.57.08-.02.17-.04.26-.06,1.95,7.89,3.75,15.83,5.39,23.8,5.98,28.94,9.91,58.2,11.81,87.56h0c.07,0,.15-.01.22-.01,1.75,27.2,1.75,54.48,0,81.67-.07,0-.15-.01-.22-.02-1.9,29.35-5.83,58.6-11.81,87.54-1.65,7.98-3.45,15.92-5.4,23.81-.08-.02-.17-.04-.25-.06-8.08,32.7-18.73,64.65-31.83,95.56,33.61,13.92,117.24,48.56,125.44,51.96,5.23-12.38,10.14-24.93,14.73-37.63,9.29-25.68,17.17-51.74,23.64-78.05l.25.06c10.72-43.58,17.57-87.87,20.57-132.36.07,0,.15.01.22.02,2.41-41.58,1.75-54.63-.15-103.37h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></g><path id="Premium" d="M1121.49,514.89s-.01,0-.03,0c-9.63-61.56-29.51-119.79-57.85-172.88-63.87,15.33-127.74,30.67-191.61,46,0,.02,0,.03.01.05-42.89,10.3-85.78,20.6-128.67,30.89,6.87,29.31,12.06,59.01,15.56,88.96,1.38,11.81,2.5,23.64,3.34,35.48,43.97-3.46,87.95-6.92,131.92-10.38.25,3.37.47,6.74.68,10.11.5,7.89.92,15.74,1.21,23.65.82,22.14.82,44.29,0,66.43h0c-.29,7.91-.71,15.75-1.21,23.65-.21,3.38-.43,6.77-.68,10.15-43.98-3.46-87.95-6.92-131.92-10.38-.85,11.85-1.96,23.67-3.34,35.48-3.5,29.95-8.7,59.65-15.56,88.96,42.88,10.29,85.77,20.59,128.66,30.89,0,.01,0,.03-.01.05,63.86,15.33,127.72,30.66,191.59,46h0c28.35-53.1,48.23-111.31,57.87-172.87h.03c6.71-76.7,6.71-118.82.01-170.22h0Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></g></svg>', floorPlan: '<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200"><path d="M1037.38,1061.68h-218.69v-60.75h97.19c6.69,0,12.15-5.46,12.15-12.15,0-60.27-49.07-109.34-109.34-109.34v-206.54h242.99v364.48c0,13.43-10.87,24.3-24.3,24.3ZM806.54,976.63h96.34c-5.79-40.15-36.31-72.9-96.34-72.9-6.69,0-12.15-5.46-12.15-12.15V332.71c0-6.69,5.46-12.15,12.15-12.15,59.18,0,90.46-31.94,96.34-72.9h-96.34c-6.69,0-12.15-5.46-12.15-12.15v-97.19h-328.03v194.39c0,6.69-5.46,12.15-12.15,12.15h-182.24v194.39h328.03c6.69,0,12.15,5.46,12.15,12.15v109.34c0,6.69-5.46,12.15-12.15,12.15H138.32v194.39c0,13.43,10.87,24.3,24.3,24.3h437.38v145.79c0,13.43,10.87,24.3,24.3,24.3h170.09v-72.9c0-6.69,5.46-12.15,12.15-12.15ZM915.88,223.37c6.69,0,12.15,5.46,12.15,12.15,0,60.27-49.07,109.34-109.34,109.34v303.73h242.99V162.62c0-13.43-10.87-24.3-24.3-24.3h-218.69v85.05h97.19ZM259.82,563.55c-6.69,0-12.15-5.46-12.15-12.15v-218.69c0-6.69,5.46-12.15,12.15-12.15h182.24v-182.24H162.62c-13.43,0-24.3,10.87-24.3,24.3v485.97h449.53v-85.05h-328.03Z" style="fill:#ededed; stroke:#fff; stroke-miterlimit:10; stroke-width:5px;"/></svg>' };}, 1720: (t, e, i) => {"use strict";function n(t) {for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];return e.map(function (e) {return e.split(" ").map(function (e) {return e ? "" + t + e : "";}).join(" ");}).join(" ");}function r(t, e) {return e.replace(/([^}{]*){/gm, function (e, i) {return i.replace(/\.([^{,\s\d.]+)/g, "." + t + "$1") + "{";});}function s(t, e) {return function (i) {i && (t[e] = i);};}function o(t, e, i) {return function (n) {n && (t[e][i] = n);};}function a(t, e) {return function (i) {var n = i.prototype;t.forEach(function (t) {e(n, t);});};}function l(t, e) {return void 0 === e && (e = {}), function (i, n) {t.forEach(function (t) {var r = e[t] || t;r in i || (i[r] = function () {for (var e, i = [], r = 0; r < arguments.length; r++) i[r] = arguments[r];var s = (e = this[n])[t].apply(e, i);return s === this[n] ? this : s;});});};}i.d(e, { DY: () => o, KR: () => s, OA: () => a, RI: () => l, SS: () => r, T6: () => n });}, 1721: (t, e, i) => {"use strict";i.d(e, { A: () => g });var n = i(6946),r = i(8701),s = i(1631),o = i(8206),a = i(1052),l = i(9065);function c(t) {return Math.log(t);}function h(t) {return Math.exp(t);}function u(t) {return -Math.log(-t);}function d(t) {return -Math.exp(-t);}function p(t) {return isFinite(t) ? +("1e" + t) : t < 0 ? 0 : t;}function f(t) {return (e, i) => -t(-e, i);}function g() {const t = function (t) {const e = t(c, h),i = e.domain;let a,l,g = 10;function m() {return a = function (t) {return t === Math.E ? Math.log : 10 === t && Math.log10 || 2 === t && Math.log2 || (t = Math.log(t), (e) => Math.log(e) / t);}(g), l = function (t) {return 10 === t ? p : t === Math.E ? Math.exp : (e) => Math.pow(t, e);}(g), i()[0] < 0 ? (a = f(a), l = f(l), t(u, d)) : t(c, h), e;}return e.base = function (t) {return arguments.length ? (g = +t, m()) : g;}, e.domain = function (t) {return arguments.length ? (i(t), m()) : i();}, e.ticks = (t) => {const e = i();let r = e[0],s = e[e.length - 1];const o = s < r;o && ([r, s] = [s, r]);let c,h,u = a(r),d = a(s);const p = null == t ? 10 : +t;let f = [];if (!(g % 1) && d - u < p) {if (u = Math.floor(u), d = Math.ceil(d), r > 0) {for (; u <= d; ++u) for (c = 1; c < g; ++c) if (h = u < 0 ? c / l(-u) : c * l(u), !(h < r)) {if (h > s) break;f.push(h);}} else for (; u <= d; ++u) for (c = g - 1; c >= 1; --c) if (h = u > 0 ? c / l(-u) : c * l(u), !(h < r)) {if (h > s) break;f.push(h);}2 * f.length < p && (f = (0, n.Ay)(r, s, p));} else f = (0, n.Ay)(u, d, Math.min(d - u, p)).map(l);return o ? f.reverse() : f;}, e.tickFormat = (t, i) => {if (null == t && (t = 10), null == i && (i = 10 === g ? "s" : ","), "function" != typeof i && (g % 1 || null != (i = (0, s.A)(i)).precision || (i.trim = !0), i = (0, r.GP)(i)), t === 1 / 0) return i;const n = Math.max(1, g * t / e.ticks().length);return (t) => {let e = t / l(Math.round(a(t)));return e * g < g - .5 && (e *= g), e <= n ? i(t) : "";};}, e.nice = () => i((0, o.A)(i(), { floor: (t) => l(Math.floor(a(t))), ceil: (t) => l(Math.ceil(a(t))) })), e;}((0, a.Gu)()).domain([1, 10]);return t.copy = () => (0, a.C)(t, g()).base(t.base()), l.C.apply(t, arguments), t;}}, 1728: (t, e, i) => {"use strict";function n(t) {return function (e) {return e.replace(/[0-9]/g, function (e) {return t[+e];});};}i.d(e, { A: () => n });}, 1729: (t, e, i) => {"use strict";const n = i(144);t.exports = (t, e) => {const i = n(t, e);return i && i.prerelease.length ? i.prerelease : null;};}, 1732: (t, e, i) => {"use strict";i.d(e, { H: () => r });var n = i(6639);function r(t, e, i, r, s) {const o = t && t.startsWith(".") ? t.trim().replace(" ", ".") : "",a = (0, n.tT)(`label.switch-container${o}${i?.title ? ".icon.icon-help-super" : ""}`, { attr: { hidden: i && i.hidden, title: i && i.title } }, [(0, n.tT)(`span.switch${i?.partial ? ".partial" : ""}${i?.readonly ? ".readonly" : ""}${i?.bilateral ? ".bilateral" : ""}`, [(0, n.tT)("input.switch-input", { attr: { type: "checkbox", name: i && i.name, checked: i && i.checked, disabled: i && i.disabled }, events: { change: (t, e) => {if (e.parentElement.classList.contains("readonly")) e.checked = !e.checked;else if (e.parentElement.classList.remove("partial"), i && i.change) {const n = e.checked;i.change(t, n), t.stopPropagation();}} } }), (0, n.tT)("span.slider")])]);return r && (0, n.tT)("span.label", a, r), i?.bilateral && s && a.prepend((0, n.tT)("span.label", s)), e && e.appendChild(a), i?.middleware && i.middleware(a), a;}}, 1734: (t, e, i) => {"use strict";i.d(e, { LO: () => h, bO: () => c, xH: () => u });var n = i(1337),r = i(6639),s = i(3753),o = i(3242),a = i(8352),l = i(3234);class c {selectionManager;static MAX_ITEMS = 100;config;legendElement;editControl;items;defaultItems;constructor(t, e) {this.selectionManager = e, this.config = { isInteractive: !0, isEditable: !0, showTitle: !1, titlePosition: "inline", titleColor: "#000", showItemsIcon: !0, showItemsLabel: !0, itemsIcon: "circle", itemsLabelColor: "#000", borderWidth: 1, position: "bottom", alignment: "left", showScrollbar: !1, itemsWordWrap: !1, maxItems: 30, ...t };const i = [...(this.config.staticItems ? this.config.staticItems : []), ...this.getItemsFromColumn()];this.defaultItems = (0, o.o8)(i), this.items = this.applyUserSettings(i);}draw(t, e = 1) {let i = this.items?.filter((t) => !t.hidden);if (!i.length) return;this.config.maxItems && (i = i.slice(0, this.config.maxItems));const n = { family: s.Q9, size: 14, bold: !0, ...this.config.titleFont },o = { family: s.Q9, size: 12, ...this.config.itemsFont },a = h(this.config.itemsIcon),l = "left" == this.config.alignment ? "flex-start" : "center" == this.config.alignment ? "center" : "flex-end";this.config.isEditable && (this.editControl = (0, r.tT)(".edit-control", { attr: { title: "Customize Legend" }, events: { click: () => this.showDialog() } }, [(0, r.tT)(".icon-edit.solo")])), this.legendElement = (0, r.tT)(`.legend${this.config.className ? `.${this.config.className}` : ""}.pos-${this.config.position}${this.config.showScrollbar ? ".scrollable" : ""}${this.config.isInteractive ? ".interactive" : ""}${this.config.itemsWordWrap ? "" : ".nowrap"}`, { style: { flexWrap: "wrap", flexDirection: "top" == this.config.position || "bottom" == this.config.position ? "row" : "column", justifyContent: l, color: this.config.itemsLabelColor, fontSize: `${o.size}px`, fontFamily: o.family, fontWeight: o.bold ? "bold" : "normal", fontStyle: o.italic ? "italic" : "normal", textDecoration: o.underline ? "underline" : "none", backgroundColor: this.config.backgroundColor, ...(this.config.borderColor ? { border: `${this.config.borderWidth}px solid ${this.config.borderColor}` } : {}), maxHeight: "top" != this.config.position && "bottom" != this.config.position || !this.config.maxSize ? void 0 : `${this.config.maxSize}px`, maxWidth: "left" != this.config.position && "right" != this.config.position || !this.config.maxSize ? void 0 : `${this.config.maxSize}px`, height: "top" != this.config.position && "bottom" != this.config.position || !this.config.size ? void 0 : `${this.config.size}px`, width: "left" != this.config.position && "right" != this.config.position || !this.config.size ? void 0 : `${this.config.size}px` } }, [...(this.config.showTitle ? [(0, r.tT)(".legend-title" + ("top" == this.config.titlePosition ? ".wide" : ""), { style: { justifyContent: "top" == this.config.position || "bottom" == this.config.position ? l : void 0, color: this.config.titleColor, fontSize: `${n.size}px`, fontFamily: n.family, fontWeight: n.bold ? "bold" : "normal", fontStyle: n.italic ? "italic" : "normal", textDecoration: n.underline ? "underline" : "none" } }, [(0, r.tT)("span", this.config.title), this.editControl])] : []), ...i.map((t) => (0, r.tT)(".legend-item" + (t.selectionIds?.length ? "" : ".no-selector"), { attr: { title: void 0 !== t.tooltip ? t.tooltip || void 0 : t.label || t.key }, style: { ...(this.config.itemsSize ? { width: `${this.config.itemsSize}px` } : {}), ...(this.config.itemsMaxSize ? { maxWidth: `${this.config.itemsMaxSize}px` } : {}) }, data: { key: t.key } }, [...(this.config.showItemsIcon && "blank" != t.icon ? [(0, r.tT)(`.icon.icon-${t.icon ? h(t.icon) : a}`, { style: { fontSize: `${this.config.itemsIconSize || o.size}px`, ...(t.colorEnd ? { background: `linear-gradient(90deg, ${t.color}, ${t.colorEnd})`, webkitBackgroundClip: "text", webkitTextFillColor: "transparent" } : { color: t.color }) } })] : []), ...(this.config.showItemsLabel ? [(0, r.tT)(".label", t.label || t.key)] : [])])), ...(!this.config.showTitle && this.config.isEditable ? [this.editControl] : [])]), t.prepend(this.legendElement), "right" == this.config.position ? t.style.flexDirection = "row-reverse" : "left" == this.config.position ? t.style.flexDirection = "row" : "top" == this.config.position ? t.style.flexDirection = "column" : "bottom" == this.config.position && (t.style.flexDirection = "column-reverse"), this.listen(), this.updateScale(e);}clearSelection() {this.config.isInteractive && this.legendElement && (this.legendElement.querySelectorAll(".legend-item").forEach((t) => {t.classList.toggle("selected", !1);}), this.legendElement.classList.toggle("has-selection", !1));}select(t) {if (!this.config.isInteractive || !this.legendElement) return;let e = !1;this.items.forEach((i) => {let n = !1;t.forEach((t) => {i.selectionIds?.some((e) => e.equals(t)) && (n = !0, e = !0);}), this.legendElement.querySelector(`.legend-item[data-key="${(0, l.z4)(i.key)}"]`)?.classList.toggle("selected", n);}), this.legendElement.classList.toggle("has-selection", e);}showDialog() {const t = (t) => {const e = (this.config.maxItems || c.MAX_ITEMS) + this.items.filter((t) => t.hidden).length;return t.slice(0, e).map((t) => (0, o.cJ)(t, "selectionIds"));};thisVisual.host.openModalDialog(n.c.Id, { title: "", actionButtons: [1, 2], size: n.c.Size }, { colorPalette: thisVisual.host.colorPalette, defaultItems: t(this.defaultItems), items: t(this.items), sorting: this.config.userSettings?.sorting }).then((t) => {1 == t.actionId ? this.saveUserSettings(t.resultState) : this.saveUserSettings();}).catch((t) => {t.error && 3 == t.error && (0, o.Sh)();});}saveUserSettings(t) {a.X.save({ objectName: "legend", properties: { ...(t ? { custom: { column: this.config.column?.source.queryName, items: t.items, sorting: t.sorting } } : {}), showDialog: !1 }, selector: null }, !1);}listen() {this.config.isInteractive && (this.legendElement.addLiveEventListener("click", ".legend-item .label, .legend-item .icon", (t, e) => {const i = e.closest(".legend-item"),n = i.dataset.key;if (!n) return;const r = this.items.find((t) => t.key === n);r && this.onItemClick(r, i.classList.contains("selected"), t.ctrlKey || t.metaKey);}), this.legendElement.addEventListener("click", (t) => {t.target.classList.contains("legend-item") && (this.selectionManager?.clear(), this.clearSelection());}));}async onItemClick(t, e, i) {if (this.config.isInteractive && this.selectionManager) {if (t.selectionIds?.length) {const n = await this.selectionManager.select(t.selectionIds, i || e);this.select(n);}this.config.onItemClick && this.config.onItemClick(t);}}updateScale(t) {this.editControl && (this.editControl.style.transform = `scale(${1 / t})`);}getColorFromPalette(t, e, i) {return globalThis.legendPalette || (globalThis.legendPalette = {}), globalThis.legendPalette[t] || (globalThis.legendPalette[t] = {}), globalThis.legendPalette[t][e] || (globalThis.legendPalette[t][e] = globalThis.thisVisual.host.colorPalette.getColor(`${i ?? e}`).value), globalThis.legendPalette[t][e];}getColorFromItem(t) {const e = this.items.find((e) => e.key === t);return e?.color;}getItemsFromColumn() {const t = {};if (this.config.column) {const e = this.config.column.source.queryName;let i = 0;this.config.column.values?.forEach((n, r) => {const s = `${n}`;if (!t[s]) {const n = this.getColorFromPalette(e, s, i);t[s] = { key: s, icon: this.config.itemsIcon, color: n, selectionIds: [] }, i++;}this.config.isInteractive && t[s].selectionIds.push(thisVisual.host.createSelectionIdBuilder().withCategory(this.config.column, r).createSelectionId());});}return Object.values(t);}applyUserSettings(t) {this.config.userSettings?.column !== this.config.column?.source.queryName && this.config.userSettings?.items && (this.config.userSettings.items = this.config.userSettings.items.filter((t) => !t.static)), this.config.userSettings?.items?.forEach((e) => {try {const i = t.find((t) => t.key === e.key);i ? Object.assign(i, e) : (e.static || e.user) && t.push(e);} catch (t) {}});try {"asc" == this.config.userSettings?.sorting ? t.sort((t, e) => (t.label || t.key).localeCompare(e.label || e.key)) : "desc" == this.config.userSettings?.sorting ? t.sort((t, e) => (e.label || e.key).localeCompare(t.label || t.key)) : "custom" == this.config.userSettings?.sorting && this.config.userSettings.items && t.sort((t, e) => this.config.userSettings.items.findIndex((e) => e.key === t.key) - this.config.userSettings.items.findIndex((t) => t.key === e.key));} catch (t) {}return t;}destroy() {this.legendElement?.remove(), this.legendElement = null;}}function h(t) {return t ?? "circle";}function u(t) {return t ?? "circle";}}, 1763: (t, e, i) => {"use strict";const n = i(560);t.exports = (t, e) => n(t, e, !0);}, 1807: (t, e, i) => {"use strict";i.d(e, { C7A: () => g.C7, CXM: () => u.CX, Cjg: () => b.Cj, DvF: () => s.Dv, Exh: () => n.E, FT3: () => D.FT, Fgm: () => p.F, FxW: () => o.Fx, GPt: () => g.GP, HGh: () => l.H, H_l: () => u.H_, Ime: () => r.Im, JYz: () => s.JY, KGh: () => k.KG, KTX: () => y.KT, Ku8: () => M.Ku, LIG: () => r.LI, Lzp: () => s.Lz, O50: () => _.O5, OU5: () => P.O, Ozv: () => b.Oz, PLM: () => b.PL, PVN: () => s.PV, Q9G: () => o.Q9, Rm2: () => g.Rm, SN4: () => b.SN, ShP: () => r.Sh, SxZ: () => o.Sx, T0G: () => f.T, TF7: () => o.TF, ToL: () => b.To, Urf: () => I.Ur, VR4: () => a.VR, WGQ: () => o.WG, Wk3: () => S.W, Wx1: () => c.W, X4n: () => y.X4, XBB: () => T.X, XI0: () => w.X, Z0q: () => b.Z0, ZA6: () => m.Z, _dk: () => D._d, aHV: () => o.aH, aSW: () => d.aS, auc: () => b.au, bOl: () => O.bO, br9: () => E.b, cFy: () => g.cF, cJW: () => r.cJ, cKq: () => r.cK, dld: () => r.dl, drk: () => s.dr, dyA: () => d.dy, eIO: () => I.eI, fXq: () => u.fX, hff: () => s.hf, i2d: () => C.i, iNF: () => d.iN, j_G: () => s.j_, kOW: () => a.kO, l9n: () => s.l9, lWL: () => o.lW, o8B: () => r.o8, ohM: () => T.o, pHJ: () => s.pH, p_R: () => s.p_, rJE: () => v.rJ, s54: () => x.s, sP2: () => d.sP, skP: () => A.s, sxo: () => u.sx, t7l: () => s.t7, tTh: () => a.tT, teP: () => o.te, tj4: () => v.tj, tzH: () => k.tz, uRe: () => o.uR, ukR: () => r.uk, vMM: () => r.vM, vm6: () => u.vm, vxu: () => p.v, xb8: () => D.xb, y4v: () => o.y4, z4e: () => u.z4, zD3: () => y.zD, zb: () => h.zb }), i(4683);var n = i(1665),r = i(3242),s = i(2174),o = i(3753),a = i(6639),l = (i(641), i(1732)),c = i(973),h = (i(2009), i(8101)),u = i(3234),d = i(4159),p = i(1425),f = i(4653),g = i(1470),m = i(5357),v = i(6633),y = i(1195),b = i(5268),w = i(8352),x = i(8853),S = i(4827),E = i(649),C = i(9045),k = i(6615),T = i(4181),A = i(6599),M = i(5195),_ = i(2214),P = (i(3640), i(3906)),D = (i(7875), i(4810)),O = i(1734),I = i(2136);i(4733);}, 1832: (t, e, i) => {"use strict";const n = i(144);t.exports = (t, e) => {const i = n(t, null, !0),r = n(e, null, !0),s = i.compare(r);if (0 === s) return null;const o = s > 0,a = o ? i : r,l = o ? r : i,c = !!a.prerelease.length;if (l.prerelease.length && !c) {if (!l.patch && !l.minor) return "major";if (0 === l.compareMain(a)) return l.minor && !l.patch ? "minor" : "patch";}const h = c ? "pre" : "";return i.major !== r.major ? h + "major" : i.minor !== r.minor ? h + "minor" : i.patch !== r.patch ? h + "patch" : "prerelease";};}, 1847: (t, e, i) => {"use strict";e.G2 = void 0, i(4932);var n = i(5062);e.G2 = n, i(1248), i(2391), i(1107), i(3801), i(6721), i(604), i(7925), i(7630), i(3224), i(1520), i(3100), i(5807);}, 1848: (t, e, i) => {"use strict";i.d(e, { b: () => b });var n = i(7225),r = i.n(n),s = (i(2100), i(5092)),o = i(1807),a = i(9953),l = i(3914),c = i(3473),h = i(3179),u = i(2765),d = i(1171),p = i(5539),f = i(8928),g = i(9512),m = i(5367),v = function (t, e, i, n) {var r,s = arguments.length,o = s < 3 ? e : null === n ? n = Object.getOwnPropertyDescriptor(e, i) : n;if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(t, e, i, n);else for (var a = t.length - 1; a >= 0; a--) (r = t[a]) && (o = (s < 3 ? r(o) : s > 3 ? r(e, i, o) : r(e, i)) || o);return s > 3 && o && Object.defineProperty(e, i, o), o;},y = function (t, e) {if ("object" == typeof Reflect && "function" == typeof Reflect.metadata) return Reflect.metadata(t, e);};class b {element;model;events;meta;editor;colorRulesEnumerator;chart;legend;selectionManager;tooltipServiceWrapper;downloadService;viewport;settingsReader;fetcher;settings;testMap;interactive = !0;callbackSelectionIds;zoomStateManager;viewMode;isInFocus = !1;landingPage;licenseManager;updater;constructor(t) {globalThis.thisVisual = { host: t.host, element: t.element, internalUpdate: !1 }, globalThis.sessionSettings = { mapEditorColorMode: g.MJ.Matching, searchFilterOnlyCurrentDrillPath: !1, searchFilterOnlyCurrentMapSelector: !0, searchOrOperator: !1, searchBy: f.G.All }, this.init(t);}init(t) {this.meta = new o.i2d(r(), [{ name: o.Wk3, flag: "12mkqilgdytraloq2dxzkrubzljak3ec" }]), this.meta.logMe(), (0, o.Rm2)("Host", t.host), this.element = t.element, this.events = t.host.eventService, this.selectionManager = t.host.createSelectionManager(), this.selectionManager.registerOnSelectCallback((t) => {this.callbackSelectionIds = t;}), this.tooltipServiceWrapper = new o.OU5(thisVisual.host.tooltipService, this.element), this.downloadService = t.host.downloadService, this.interactive = t.host.hostCapabilities.allowInteractions, this.settingsReader = new o.ToL(), this.fetcher = new o.eIO();const e = { roles: [h.Xh.Value, h.Xh.Category, h.Xh.ColorRules], properties: { [m._3.Default]: "Matched Areas", [m._3.Outline]: "Matched Areas Outline" }, hasLegend: !0 };this.editor = new a.KE({ plugins: { ColorRulesManager: e }, title: this.meta.displayName, hideEditControl: !0 }), this.colorRulesEnumerator = new a.f9(), this.licenseManager = new d.hF(this.meta, { required: { ifEmbedded: !0, if: () => {if (this.meta.isEdition("lite")) return !0;const t = this.chart?.mapsManager.counts;return t?.remote > 0 || t?.dataField > 0 || t?.myStorage > 0 ? { type: d.uW.BlockOrBanner, title: "Invalid License", text: "This visual is using remote maps which are not allowed by the free version. Please activate a license to continue using it." } : t?.local > 1 ? { type: d.uW.BlockOrBanner, title: "Invalid License", text: "This visual is using more maps than allowed by the free version. Please activate a license to continue using it." } : this.model?.dataPoints.length > 15 ? { type: d.uW.BlockOrBanner, title: "Invalid License", text: "This visual has too many data points; only 15 data points are supported with the free version. Activate a license to remove this limit." } : void 0;} }, fetchingOptions: { intervalSeconds: 10, attempts: 2 } }), this.licenseManager.on("fetched", () => {this.updateFeatures(this.model, !1);}), this.updater = new p.Sx(this.meta), this.updateFeatures(null, !1);}async update(t) {if (!t?.dataViews[0]) return;performance.mark("visual.update"), this.events.renderingStarted(t), this.meta.update(t), this.licenseManager.update(t), this.updater.update(t);const e = this.settingsReader.populate(c.Mb, t.dataViews[0]);if (!e?.model) return;this.settings = e.model, this.zoomStateManager || (this.zoomStateManager = u.G.getInstance(), this.zoomStateManager.zoomStates = this.settings.internal.zoomStates.value || {}), this.settings.accessibility.scaleUi.value && (t.viewport.scale = 1), this.viewport = t.viewport;const i = this.fetcher.update(t),n = null == this.viewMode || this.viewMode !== t.viewMode,r = this.isInFocus !== t.isInFocus;if (i.type == o.Urf.Internal && ((0, o.Rm2)("Internal update"), !n && !r)) return;if (o.tzH.Close(), i.type == o.Urf.Interface && !n && !r) return await (0, o.ukR)(50), void this.chart?.updateInterface(this.viewport.scale);this.viewMode = t.viewMode, this.isInFocus = t.isInFocus;const a = this.settings.about.showDiagnostics.value && 1 == t.viewMode;if (o.C7A.instance.status = a ? o.cFy.Enabled : o.cFy.Auto, o.C7A.instance.useInlineConsoleFor = a && (this.settings.about.showInlineConsole.value || (0, o.zb)()) ? ["error", "info"] : [], o.C7A.instance.update(t), this.editor.update(t, { internal: { colorRules: this.settings.internal.colorRules.value } }, a), this.colorRulesEnumerator.update(t), (0, o.Rm2)("Update", t), (0, o.Rm2)("Settings", this.settings), this.chart && this.chart.destroy(), this.legend && this.legend.destroy(), i.type != o.Urf.None ? (this.landingPage && (this.landingPage.destroy(), this.landingPage = null), !i.updateModel && this.model || (this.model = (0, h.E1)(t, this.model, !i.resetModel, i.startIndex, this.settings)), (0, o.Rm2)("Model", this.model), this.updateFeatures(this.model, 0 !== t.viewMode), thisVisual.host.setCanDrill(thisVisualFeatures.drillDown), r && (await (0, o.ukR)(500)), this.chart = new l.t(this.element, this.model, this.settings, this.editor, this.viewport.scale, this.selectionManager, this.tooltipServiceWrapper, this.interactive, this.callbackSelectionIds, this.colorRulesEnumerator, 0 !== this.viewMode, this.isInFocus, this.zoomStateManager, this.licenseManager), await this.chart.draw()) : this.landingPage || (this.landingPage = new s.b(this.element)), this.callbackSelectionIds = [], this.events.renderingFinished(t), o.ohM.apply(this.settings.accessibility.colorBlindnessVision.value.value), this.settings.about.showDiagnostics.value) {try {performance.measure("Rendering", "visual.update");} catch {}performance.getEntriesByType("measure").forEach((t) => (0, o.Rm2)(`${t.name} (ms)`, t.duration));}performance.clearMarks(), performance.clearMeasures();}updateFeatures(t, e) {globalThis.thisVisualFeatures = { myStorageMaps: !this.meta.isEdition("lite") && "okviz" == this.licenseManager?.type && this.licenseManager.isValid, remoteMaps: !this.meta.isEdition("lite") && this.licenseManager.isValid, mapDialog: !t?.mapField, childMaps: !t?.mapField, mapSelector: !t?.mapField, drillDown: !t?.mapField, colorRules: !!t?.mapField || !!t?.legendField }, this.chart && this.chart.updateMapBlur();}getFormattingModel() {return this.settingsReader.enumerate(this.settings, (t) => {thisVisualFeatures?.colorRules && this.settingsReader.getSlices(t).forEach((t) => {"ColorPicker" != t.type || 3 != t.instanceKind && 2 != t.instanceKind || (t.selector = t.altConstantSelector, t.altConstantSelector = null, t.instanceKind = 1);}), t.advanced.persistSearchIndex.value && !this.chart.mapsManager.canPersistSearchIndex && (t.advanced.persistSearchIndex.value = !1, t.advanced.searchIndexSizeExceeded.value = "The search index is too large and cannot be saved.", t.advanced.searchIndexSizeExceeded.visible = !0), this.model?.legendField && (t.areas.infoLegendColor.visible = !0, t.areas.matchedColorType.visible = !1, t.areas.matchedColor.visible = !1);const e = 0 == this.model?.drillMode?.level;if (t.drill.categoryLevelMapsByColumnLevel0Instructions.visible = e, t.drill.categoryLevelMapsByColumnInstructions.visible = !e, t.drill.categoryLevelMapsByColumn.visible = !e, t.about.groups.find((t) => "about.version" == t.name).displayName = this.meta.displayName, t.about.visualVersion.value = `v${this.meta.versionDisplayName}`, this.licenseManager.enumerateSettings(t.license), t.myStorage.visible = !1, thisVisualFeatures?.myStorageMaps) {const e = this.chart?.mapsManager?.myStorage.info;e?.id && (t.myStorage.groups.find((t) => "myStorage.status" == t.name).displayName = "Status" + (null == e.isActive ? "" : e.isActive ? ": Active" : ": Inactive"), t.myStorage.id.value = e.id, t.myStorage.region.value = e.displayRegion, t.myStorage.quota.visible = null != e.quota, t.myStorage.quota.value = this.chart.mapsManager.myStorage.displayAvailableQuota, t.myStorage.isEncrypted.visible = null != e.isEncrypted, t.myStorage.isEncrypted.value = e.isEncrypted ? "Yes" : "No", t.myStorage.visible = !0);}this.updater.enumerateSettings(t.updater);});}}v([(0, o.GPt)(), y("design:type", Function), y("design:paramtypes", [Object]), y("design:returntype", void 0)], b.prototype, "init", null), v([(0, o.GPt)(), y("design:type", Function), y("design:paramtypes", [Object]), y("design:returntype", Promise)], b.prototype, "update", null), v([(0, o.GPt)(), y("design:type", Function), y("design:paramtypes", [Object, Boolean]), y("design:returntype", void 0)], b.prototype, "updateFeatures", null), v([(0, o.GPt)(), y("design:type", Function), y("design:paramtypes", []), y("design:returntype", void 0)], b.prototype, "getFormattingModel", null);}, 1852: (t, e, i) => {"use strict";i.d(e, { A: () => s, D: () => r });var n = 180 / Math.PI,r = { translateX: 0, translateY: 0, rotate: 0, skewX: 0, scaleX: 1, scaleY: 1 };function s(t, e, i, r, s, o) {var a, l, c;return (a = Math.sqrt(t * t + e * e)) && (t /= a, e /= a), (c = t * i + e * r) && (i -= t * c, r -= e * c), (l = Math.sqrt(i * i + r * r)) && (i /= l, r /= l, c /= l), t * r < e * i && (t = -t, e = -e, c = -c, a = -a), { translateX: s, translateY: o, rotate: Math.atan2(e, t) * n, skewX: Math.atan(c) * n, scaleX: a, scaleY: l };}}, 1866: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(5204),r = i(3520),s = i(3554);const o = { "%": (t, e) => (100 * t).toFixed(e), b: (t) => Math.round(t).toString(2), c: (t) => t + "", d: n.A, e: (t, e) => t.toExponential(e), f: (t, e) => t.toFixed(e), g: (t, e) => t.toPrecision(e), o: (t) => Math.round(t).toString(8), p: (t, e) => (0, s.A)(100 * t, e), r: s.A, s: r.A, X: (t) => Math.round(t).toString(16).toUpperCase(), x: (t) => Math.round(t).toString(16) };}, 1882: (t, e, i) => {"use strict";i.d(e, { Ay: () => j, LN: () => V });var n = i(7952),r = i(9713),s = i(7408),o = i(7867),a = i(9734),l = i(8664),c = i(2535),h = i(2672),u = i(5232),d = i(7610),p = i(4510),f = i(2920),g = i(5152),m = i(3455),v = i(4784),y = i(165),b = i(807),w = i(2901),x = i(7339),S = i(3683),E = i(461),C = i(8235),k = i(7499),T = i(697),A = i(2582),M = i(9215),_ = i(8072),P = i(1429),D = i(3900),O = i(9063),I = i(9433),F = i(5233),R = i(202),L = i(1322),N = [null];function V(t, e) {this._groups = t, this._parents = e;}function B() {return new V([[document.documentElement]], N);}V.prototype = B.prototype = { constructor: V, select: n.A, selectAll: r.A, selectChild: s.A, selectChildren: o.A, filter: a.A, data: l.A, enter: c.A, exit: h.A, join: u.A, merge: d.A, selection: function () {return this;}, order: p.A, sort: f.A, call: g.A, nodes: m.A, node: v.A, size: y.A, empty: b.A, each: w.A, attr: x.A, style: S.A, property: E.A, classed: C.A, text: k.A, html: T.A, raise: A.A, lower: M.A, append: _.A, insert: P.A, remove: D.A, clone: O.A, datum: I.A, on: F.A, dispatch: R.A, [Symbol.iterator]: L.A };const j = B;}, 1888: (t, e, i) => {"use strict";function n(t, e, i) {if (!t) return i;const n = t[e];return void 0 === n ? i : n;}function r(t, e, i) {const r = n(t, e);return r && r.solid ? r.solid.color : i;}i.r(e), i.d(e, { getFillColorByPropertyName: () => r, getValue: () => n });}, 1904: (t, e, i) => {"use strict";i.d(e, { I4: () => o });var n = i(2775),r = i(4573),s = function () {return s = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, s.apply(this, arguments);};function o(t, e) {var i = (0, n.A)(e),o = i.className;return (0, r.Rf)(function (e, n) {var a = e.className,l = void 0 === a ? "" : a,c = (e.cspNonce, function (t, e) {var i = {};for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (i[n] = t[n]);if (null != t && "function" == typeof Object.getOwnPropertySymbols) {var r = 0;for (n = Object.getOwnPropertySymbols(t); r < n.length; r++) e.indexOf(n[r]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[r]) && (i[n[r]] = t[n[r]]);}return i;}(e, ["className", "cspNonce"])),h = (0, r.li)();return (0, r.Yn)(n, function () {return h.current;}, []), (0, r.vJ)(function () {var t = i.inject(h.current, { nonce: e.cspNonce });return function () {t.destroy();};}, []), (0, r.n)(t, s({ ref: h, "data-styled-id": o, className: "".concat(l, " ").concat(o) }, c));});}}, 1929: (t) => {"use strict";t.exports = function (t) {return "number" == typeof t ? t - t === 0 : "string" == typeof t && "" !== t.trim() && (Number.isFinite ? Number.isFinite(+t) : isFinite(+t));};}, 1943: (t, e, i) => {"use strict";i(9902), i(3578);}, 1957: (t, e, i) => {"use strict";i.d(e, { I: () => a, T: () => o });var n = i(8981),r = i(1226);function s(t, e, i, r) {function s(t) {return t.length ? t.pop() + " " : "";}return function (o, a) {var l = [],c = [];return o = t(o), a = t(a), function (t, r, s, o, a, l) {if (t !== s || r !== o) {var c = a.push("translate(", null, e, null, i);l.push({ i: c - 4, x: (0, n.A)(t, s) }, { i: c - 2, x: (0, n.A)(r, o) });} else (s || o) && a.push("translate(" + s + e + o + i);}(o.translateX, o.translateY, a.translateX, a.translateY, l, c), function (t, e, i, o) {t !== e ? (t - e > 180 ? e += 360 : e - t > 180 && (t += 360), o.push({ i: i.push(s(i) + "rotate(", null, r) - 2, x: (0, n.A)(t, e) })) : e && i.push(s(i) + "rotate(" + e + r);}(o.rotate, a.rotate, l, c), function (t, e, i, o) {t !== e ? o.push({ i: i.push(s(i) + "skewX(", null, r) - 2, x: (0, n.A)(t, e) }) : e && i.push(s(i) + "skewX(" + e + r);}(o.skewX, a.skewX, l, c), function (t, e, i, r, o, a) {if (t !== i || e !== r) {var l = o.push(s(o) + "scale(", null, ",", null, ")");a.push({ i: l - 4, x: (0, n.A)(t, i) }, { i: l - 2, x: (0, n.A)(e, r) });} else 1 === i && 1 === r || o.push(s(o) + "scale(" + i + "," + r + ")");}(o.scaleX, o.scaleY, a.scaleX, a.scaleY, l, c), o = a = null, function (t) {for (var e, i = -1, n = c.length; ++i < n;) l[(e = c[i]).i] = e.x(t);return l.join("");};};}var o = s(r.P, "px, ", "px)", "deg)"),a = s(r.i, ", ", ")", ")");}, 2009: (t, e, i) => {"use strict";i(3242);}, 2016: (t, e, i) => {"use strict";i.d(e, { Ay: () => l });var n = i(2902),r = i(6037),s = i(3131);const o = (0, r.A)(n.A),a = o.right,l = (o.left, (0, r.A)(s.A).center, a);}, 2017: (t) => {"use strict";t.exports = function t(e, i) {if (e === i) return !0;if (e && i && "object" == typeof e && "object" == typeof i) {if (e.constructor !== i.constructor) return !1;var n, r, s;if (Array.isArray(e)) {if ((n = e.length) != i.length) return !1;for (r = n; 0 !== r--;) if (!t(e[r], i[r])) return !1;return !0;}if (e.constructor === RegExp) return e.source === i.source && e.flags === i.flags;if (e.valueOf !== Object.prototype.valueOf) return e.valueOf() === i.valueOf();if (e.toString !== Object.prototype.toString) return e.toString() === i.toString();if ((n = (s = Object.keys(e)).length) !== Object.keys(i).length) return !1;for (r = n; 0 !== r--;) if (!Object.prototype.hasOwnProperty.call(i, s[r])) return !1;for (r = n; 0 !== r--;) {var o = s[r];if (!t(e[o], i[o])) return !1;}return !0;}return e != e && i != i;};}, 2044: (t, e, i) => {"use strict";i.d(e, { h: () => s });var n = i(1807),r = i(906);class s extends r.g {select;get callbackData() {return this.select.value;}get validationCallbackData() {return this.select.value;}constructor(t) {super(t);}addDropdown() {(0, n.tTh)(".change-drill-path", this.boxContent, [(0, n.tTh)(".select-section", [(0, n.tTh)("label", { attr: { for: "drill-path-select" } }, "Move to:"), (0, n.tTh)("select.max", this.boxContainer, { attr: { id: "drill-path-select" }, middleware: (t) => {this.select = t;}, events: { change: () => this.okButton?.classList.remove("disabled") } })])]), (0, n.tTh)("option", this.select, { attr: { value: "", selected: !0, disabled: !0 } }, "--- Select destination ---"), this.config.options.forEach((t) => {(0, n.tTh)("option", this.select, { attr: { value: t.value, selected: t.selected } }, t.text);});}draw() {return this.create(), this.addDropdown(), super.draw();}}}, 2056: (t, e, i) => {"use strict";i.d(e, { D: () => a, n: () => o });var n = i(906),r = i(2216),s = i(1807);const o = "save-ms-map-btn";class a extends n.g {passwordInput;saveTo = "myStorage";myStorageContentBox;get validationCallbackData() {return { saveTo: this.saveTo, password: this.passwordValue, mapName: this.config.mapName };}get passwordValue() {return this.passwordInput?.value.trim();}constructor(t) {t.title = "My Storage Map", t.description = (t.mapName ? `The map "${t.mapName}"` : "Current map") + " is published on My Storage. \n        Select an option to proceed:", super(t);}updateButton() {const t = this.config.protected && "myStorage" == this.saveTo && !this.passwordValue.length;this.toggleButton(o, t);}addPasswordInput() {this.toggleButton(o, !0), this.passwordInput = (0, r.O)(this.myStorageContentBox, { label: "Password", labelMinWidth: "80px", placeholder: "Insert map password", visibilityToggle: !0, onInput: () => this.updateButton() }).querySelector("input");}drawContainer() {(0, s.tTh)(".save-as-options", this.boxContent, [(0, s.tTh)(".option-container", [(0, s.Wx1)(".save-on-my-storage-radio", null, { name: "save-as", list: [{ value: "myStorage", text: "Save on My Storage", selected: !0 }], change: () => {this.saveTo = "myStorage", this.passwordInput && (this.passwordInput.disabled = !1), this.updateButton();} }), (0, s.tTh)(".content-box", { middleware: (t) => this.myStorageContentBox = t }, [(0, s.tTh)(".text", "Save changes on My Storage and update the map for all users.")])]), (0, s.tTh)(".option-container", [(0, s.Wx1)(".save-as-copy-radio", null, { name: "save-as", list: [{ value: "local", text: "Save as Local Copy" }], change: () => {this.saveTo = "local", this.passwordInput && (this.passwordInput.disabled = !0), this.updateButton();} }), (0, s.tTh)(".content-box.hide", [(0, s.tTh)(".text", "My Storage map will not be updated. A local copy of this map will be created with current changes.")])])]);}draw() {return this.create(), this.boxContent.classList.add("gap", "margin-top"), this.drawContainer(), this.config.protected && (this.addPasswordInput(), this.addValidationErrorBox()), super.draw();}}}, 2087: (t, e, i) => {"use strict";i.r(e), i.d(e, { arrayExtensions: () => n, double: () => h, enumExtensions: () => r, jsonComparer: () => u, logicExtensions: () => s, numericSequence: () => l, numericSequenceRange: () => c, pixelConverter: () => d, prototype: () => p, regExpExtensions: () => o, stringExtensions: () => a, textSizeDefaults: () => f, valueType: () => g });var n = i(4341),r = i(2879),s = i(4298),o = i(3051),a = i(539),l = i(372),c = i(67),h = i(5442),u = i(5038),d = i(5079),p = i(421),f = i(5939),g = i(4182);}, 2100: () => {"use strict";globalThis.http = function (t, e) {return Promise.reject();};}, 2101: (t, e, i) => {"use strict";function n(t) {return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;}i.d(e, { wq: () => n });}, 2111: (t, e, i) => {"use strict";const n = i(4641),r = i(3999),s = i(5580),o = i(4089),a = i(7059),l = i(5200);t.exports = (t, e, i, c) => {switch (e) {case "===":return "object" == typeof t && (t = t.version), "object" == typeof i && (i = i.version), t === i;case "!==":return "object" == typeof t && (t = t.version), "object" == typeof i && (i = i.version), t !== i;case "":case "=":case "==":return n(t, i, c);case "!=":return r(t, i, c);case ">":return s(t, i, c);case ">=":return o(t, i, c);case "<":return a(t, i, c);case "<=":return l(t, i, c);default:throw new TypeError(`Invalid operator: ${e}`);}};}, 2112: (t, e, i) => {"use strict";i.d(e, { l: () => o });var n = i(7800),r = i(3895),s = i(1807);class o {options;callerOptions;static Id = "okvizMapEditor";dialogHost;dialogBody;viewInstances = {};mapsManager;result = {};get model() {return this.callerOptions.model;}get drillPathId() {return this.callerOptions.drillPathId;}constructor(t, e) {this.options = t, this.callerOptions = e, this.dialogHost = t.host, this.initMapsManager(), this.initDialog();}initMapsManager() {this.mapsManager = new r.x({ initialState: this.callerOptions.mapsManagerState, myStorageInfo: this.callerOptions.myStorageInfo }), this.mapsManager.jsvgGenerator.imageQuality = this.callerOptions.imageQuality, this.mapsManager.myStorage.on("editKeyChanged", (t) => {this.result.saveMyStorageEditKey = t, this.setDialogResult();});}initDialog() {this.options.element.classList.add("editor"), document.styleSheets[0].insertRule("html { height: 100%; }", 0), this.dialogBody = (0, s.tTh)(".editor-dialog", this.options.element);const t = { ...this.callerOptions, container: this.dialogBody };this.addView(t);}addView(t, e) {e && (e.destroy && this.viewInstances[e.viewType].destroy(), e.hide && this.viewInstances[e.viewType].toggleVisibility(!1)), this.viewInstances[t.viewType] = new n[t.viewType](t, this), this.viewInstances[t.viewType].draw();}changeView(t) {t.selectedView.viewType !== t.callerView.viewType && (t.callerView.destroy && this.viewInstances[t.callerView.viewType].destroy(), t.callerView.hide && this.viewInstances[t.callerView.viewType].toggleVisibility(!1), this.viewInstances[t.selectedView.viewType].toggleVisibility(!0));}editMap(t, e, i) {this.addView({ ...this.callerOptions, container: this.dialogBody, viewType: "DialogEdit", map: t, unsavedJsvg: i }, { viewType: e, destroy: !1, hide: !0 });}launchUrl(t) {this.result.launch = t, this.dialogHost.close(0, this.result);}exportFile(t) {this.result.fileExport = t, this.dialogHost.close(0, this.result);}selectSearchedMap(t, e) {this.result.searchedMapSelection = { mapId: t, matches: e }, this.dialogHost.close(0, this.result);}setDialogResult() {this.result.state = this.mapsManager.state, this.result.myStorageInfo = this.mapsManager.myStorage.info, this.result.unsavedJsvg && !(0, s.dld)(this.result.unsavedJsvg) && delete this.result.unsavedJsvg, this.result.sessionSettings = this.callerOptions.sessionSettings, this.dialogHost.setResult(this.result);}backToInitialView(t) {this.changeView({ selectedView: { viewType: this.callerOptions.viewType }, callerView: { viewType: t, destroy: !0 } });}closeDialog() {this.dialogHost.close(0);}destroy() {this.dialogBody.remove(), Object.values(this.viewInstances).forEach((t) => {t.destroy();}), this.viewInstances = null, this.callerOptions = null, this.options = null, this.dialogBody = null;}}globalThis.dialogRegistry = globalThis.dialogRegistry || {}, globalThis.dialogRegistry[o.Id] = o;}, 2136: (t, e, i) => {"use strict";i.d(e, { Ur: () => s, eI: () => l });var n,r,s,o = i(3242),a = i(2174);!function (t) {t[t.SegmentsAggregation = 0] = "SegmentsAggregation", t[t.SegmentsAggregationStartEnd = 1] = "SegmentsAggregationStartEnd", t[t.IncrementalUpdate = 2] = "IncrementalUpdate";}(n || (n = {})), function (t) {t[t.NoDataToFetch = 0] = "NoDataToFetch", t[t.UserLimitReached = 1] = "UserLimitReached", t[t.MemoryLimitReached = 2] = "MemoryLimitReached", t[t.OneMillionLimitReached = 3] = "OneMillionLimitReached", t[t.LastPageFetched = 4] = "LastPageFetched", t[t.Fetching = 5] = "Fetching";}(r || (r = {})), function (t) {t[t.None = 0] = "None", t[t.DataChunk = 1] = "DataChunk", t[t.PartialData = 2] = "PartialData", t[t.DataComplete = 3] = "DataComplete", t[t.Interface = 4] = "Interface", t[t.Internal = 5] = "Internal";}(s || (s = {}));class l {mode;lastFetchingStatus = r.NoDataToFetch;get segmentIndex() {return this._segmentIndex;}_segmentIndex = 0;get retrievedRowsCount() {return this._retrievedRowsCount;}_retrievedRowsCount = 0;constructor(t = n.IncrementalUpdate) {this.mode = t;}update(t, e = 0, i = !0) {const l = { type: s.None, rowsCount: 0, startIndex: 0, resetModel: !1, updateModel: !1, hasMoreData: !1 },c = t && t.dataViews && t.dataViews[0];if (c && (c.categorical || c.matrix || c.table || c.tree || c.single)) if (thisVisual.internalUpdate) l.type = s.Internal, globalThis.thisVisual.internalUpdate = !1;else {if (!(4 & (h = t.type) || 32 & h || 16 & h || 8 & h) || function (t) {return 2 & t;}(t.type)) {l.hasMoreData = !!t.dataViews[0].metadata.segment, 1 == t.operationKind ? (l.type = s.PartialData, this.mode == n.SegmentsAggregation && (l.resetModel = !0, l.updateModel = !0)) : 2 == t.operationKind ? (l.type = s.DataChunk, l.updateModel = !0) : (this.mode == n.SegmentsAggregation || this.mode == n.SegmentsAggregationStartEnd ? l.type = s.PartialData : l.type = i ? s.DataChunk : s.DataComplete, l.updateModel = !0, l.resetModel = !0, this.resetStatus());let h = 0;this.mode == n.IncrementalUpdate && (c.categorical ? (0, o.cK)(c.categorical, "lastMergeIndex") && (h = c.categorical.lastMergeIndex + 1) : c.table ? (0, o.cK)(c.table, "lastMergeIndex") && (h = c.table.lastMergeIndex + 1) : c.matrix && 0 != t.operationKind && (h += 1)), l.startIndex = h;let u = (0, a.kx)(c)[0];if (u -= h, this._retrievedRowsCount += u, l.rowsCount = u, i) {const i = this.fetchMoreData(t, e);i != r.LastPageFetched && i != r.MemoryLimitReached && i != r.OneMillionLimitReached && i != r.UserLimitReached || (l.type = s.DataComplete, l.updateModel = !0, this.mode != n.SegmentsAggregation && this.mode != n.SegmentsAggregationStartEnd || (l.resetModel = !0));} else this._segmentIndex = 0;return l;}l.type = s.Interface;}var h;return l;}fetchMoreData(t, e) {let i = r.NoDataToFetch;return i = t.dataViews[0].metadata.segment ? e && this.retrievedRowsCount >= e ? r.UserLimitReached : this.retrievedRowsCount >= 1048576 ? r.OneMillionLimitReached : thisVisual.host.fetchMoreData(this.mode == n.SegmentsAggregation || this.mode == n.SegmentsAggregationStartEnd) ? r.Fetching : r.MemoryLimitReached : this.lastFetchingStatus == r.Fetching ? r.LastPageFetched : r.NoDataToFetch, this.lastFetchingStatus = i, this._segmentIndex = i == r.Fetching ? this._segmentIndex + 1 : 0, i;}resetStatus() {this.lastFetchingStatus = r.NoDataToFetch, this._retrievedRowsCount = 0, this._segmentIndex = 0;}}}, 2137: (t, e, i) => {"use strict";i.d(e, { J: () => o, q: () => s });var n = i(1807),r = i(7674);const s = "updater";class o extends n.zD3 {name = s;displayName = "Updates";version = (0, n.Z0q)(r.z0.uI, { name: "version", displayName: "", value: "" });check = (0, n.Z0q)(r.z0.jF, { name: "check", displayName: "Check for Updates", value: !0 });groups = [new n.X4n({ name: `${s}.version`, displayName: "New Version Available!", collapsible: !1, slices: [this.version] }), new n.X4n({ name: `${s}.check`, displayName: "", collapsible: !1, slices: [this.check, (0, n.auc)("Automatically checks for updates and notifies when a new version is available. Notifications are displayed only in edit mode.")] })];}}, 2140: (t, e, i) => {"use strict";i.d(e, { c: () => s });var n = i(4810),r = i(3394);class s extends r.i {value;initialValue;onChange;optionType;get className() {return `oop-option.oop-option-${this.optionType}`;}get displayValue() {return Array.isArray(this.value) ? (0, n.Oq)(this.value) ? null : this.value[0] : this.value;}get isMixed() {return (0, n.Oq)(this.value);}constructor(t) {if (t.hasChildren = !1, t.hasToggle = !1, super(t), Object.assign(this, t), t) {const e = structuredClone(t.value);this.initialValue = Array.isArray(e) ? e[0] : e;}}update(t) {this.value = t, this.refresh();}reset() {this.value = this.initialValue, super.reset(), this.refresh();}}}, 2159: (t, e, i) => {"use strict";i.d(e, { z: () => r });var n = i(1807);class r {barOverlay;bar;progressDetails;progress = 0;constructor(t, e) {this.draw(t, e);}draw(t, e) {(0, n.tTh)(".progress-bar-overlay", t, { middleware: (t) => this.barOverlay = t }, [(0, n.tTh)(".bar-wrapper", [(0, n.tTh)(".title", e ?? ""), (0, n.tTh)(".show-bar", [(0, n.tTh)(".bar-container", [(0, n.tTh)(".bar", { middleware: (t) => this.bar = t })])]), (0, n.tTh)(".progress-details", { middleware: (t) => this.progressDetails = t }, "Loading...")])]);}setProgress(t, e = !0, i) {this.progress = Math.max(0, Math.min(100, t)), this.bar.style.width = `${this.progress}%`, this.progressDetails.innerText = `${i ?? ""}${e ? `${i ? " - " : ""}${this.progress}%` : ""}`;}destroy() {this.barOverlay && this.barOverlay.remove(), this.barOverlay = null, this.bar = null, this.progressDetails = null, this.progress = null;}}}, 2168: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(7493);const r = function (t, e, i, r, s) {if (void 0 !== s.crit && void 0 === r?.crit) throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if (!r || void 0 === r.crit) return new Set();if (!Array.isArray(r.crit) || 0 === r.crit.length || r.crit.some((t) => "string" != typeof t || 0 === t.length)) throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o = void 0 !== i ? new Map([...Object.entries(i), ...e.entries()]) : e;for (const e of r.crit) {if (!o.has(e)) throw new n.T0(`Extension Header Parameter "${e}" is not recognized`);if (void 0 === s[e]) throw new t(`Extension Header Parameter "${e}" is missing`);if (o.get(e) && void 0 === r[e]) throw new t(`Extension Header Parameter "${e}" MUST be integrity protected`);}return new Set(r.crit);};}, 2174: (t, e, i) => {"use strict";i.d(e, { Dv: () => f, JY: () => c, Lz: () => m, PV: () => u, Zs: () => n, dr: () => y, hf: () => g, j_: () => h, kx: () => p, l9: () => v, pH: () => a, p_: () => o, t7: () => d, yF: () => l });var n,r,s = i(3242);function o(t) {return !((e = Array.isArray(t) ? t?.[0] : t) && (e.categorical || e.table || e.matrix || e.single || e.tree));var e;}function a(t, e) {const i = [];if (t) for (let n = 0; n < t.length; n++) {const r = t[n];(0, s.cK)(r.source.roles, e) && i.push(r);}return i;}function l(t, e, i = n.All) {const r = [];if (t) {for (let o = 0; o < t.length; o++) {const a = t[o];if ((0, s.cK)(a.source.roles, e)) {if (i == n.First) return a;r.push(a);}}if (i == n.Last && r.length) return r[r.length - 1];}return i == n.All ? r : null;}function c(t, e = !0) {const i = {};if (t) for (let n = 0; n < t.length; n++) {const r = (0, s.cK)(t[n], "source") ? t[n].source : t[n];for (const o of Object.keys(r.roles)) (0, s.cK)(i, o) || (i[o] = []), e ? (0, s.cK)(r, "rolesIndex") && (0, s.cK)(r.rolesIndex, o) && r.rolesIndex[o].forEach((e) => i[o][e] = t[n]) : i[o].push(t[n]);}return i;}function h(t, e = 0) {return t.source.format ? t.source.format : (0, s.cK)(t.source, "formatSource") && t.objects && t.objects[e] && t.objects[e].general && (0, s.vM)(t.objects[e].general.formatString) ? t.objects[e].general.formatString : t.source.type.numeric ? "0" : "";}function u(t) {const e = { min: null, max: null };return t && ((0, s.cK)(t, "minLocal") && null !== t.minLocal && !isNaN(Number(t.minLocal)) && (0, s.cK)(t, "maxLocal") && null !== t.maxLocal && !isNaN(Number(t.maxLocal)) ? (e.min = Number(t.minLocal), e.max = Number(t.maxLocal)) : t.values.forEach((t) => {e.min = null === e.min ? t : Math.min(e.min, t), e.max = null === e.max ? t : Math.max(e.max, t);}), (null === e.min || isNaN(e.min)) && (e.min = 0), (null === e.max || isNaN(e.max) || e.min > e.max) && (e.max = e.min)), e;}function d(t) {return { min: Math.min(0, t.min), max: Math.max(0, t.max) };}function p(t) {let e = 0,i = 0;if (t) if (t.categorical) {if (t.categorical.categories ? e = t.categorical.categories[0].values.length : t.categorical.values && (e = 1), t.categorical.values && t.categorical.values.length) {if (i = t.categorical.values.length, void 0 !== t.categorical.values[0].source.groupName) {const e = {};t.metadata.columns.forEach((t) => {if (void 0 !== t.groupName) {const i = (t.groupName || "(Blank)").toString();e[i] = !0;}}), i = Object.keys(e).length;}} else i = 0;} else if (t.table) e = t.table.rows.length, i = t.table.columns.length;else if (t.matrix) {const n = (t) => {if (t.length) {let e = 0;return t.forEach((t) => {t.children ? e += n(t.children) : e++;}), e;}return t.length;};t.matrix.rows.root.children && (e = n(t.matrix.rows.root.children)), t.matrix.columns.root.children && (i = n(t.matrix.columns.root.children));}return [e, i];}function f(t, e) {const i = t.filter((t) => t.source.roles[e]);if (i.length && (0, s.cK)(i[i.length - 1].source, "rolesIndex")) {const t = i[i.length - 1].source.rolesIndex;if ((0, s.cK)(t, e)) return t[e][t[e].length - 1];}return 0;}function g(t, e) {const i = t.filter((t) => t.source.roles[e]);if (1 == i.length && (0, s.cK)(i[0].source, "rolesIndex")) {const t = i[0].source.rolesIndex;if ((0, s.cK)(t, e) && t[e].length && 0 != t[e][0]) return !0;}return !1;}function m(t, e) {const i = t.filter((t) => t.source.roles[e]);if (i.length < 2 || i.some((t) => !t.values.length)) return !1;for (let t = 0; t < i.length - 1; t++) {const e = i[t],n = e.values[0];for (let t = 1; t < e.values.length; t++) if (e.values[t] !== n) return !0;}return !1;}function v(t, e, i = !1, n = !1) {const r = (t) => t.source.expr?.ref ?? t.source.displayName,s = (t) => t.every((e) => e == t[0]),o = [];if (t) {const a = {};t.forEach((t) => {t.source.roles[e] && (a[t.source.queryName] = t);});const l = Object.values(a);if (l.sort((t, i) => t.source.rolesIndex?.[e]?.length && i.source.rolesIndex?.[e]?.length ? t.source.rolesIndex[e][0] - i.source.rolesIndex[e][0] : 0), l?.length && l.every((t) => t.values.length)) {const t = l.filter((t, e) => e < l.length - 1).map((t) => s(t.values));if (t.every(Boolean) && !i) {for (let t = 0; t < l.length - 1; t++) o.push(l[t].values[0].toString());n && s(l[l.length - 1].values) ? o.push(l[l.length - 1].values[0].toString()) : o.push(r(l[l.length - 1]));} else for (let e = 0; e < l.length; e++) !i && (t[e] || n && e == l.length - 1 && s(l[e].values)) ? o.push(l[e].values[0].toString()) : o.push(r(l[e]));}}return o;}function y(t, e) {return t.slice(0, -1).concat(e);}!function (t) {t[t.All = 0] = "All", t[t.First = 1] = "First", t[t.Last = 2] = "Last";}(n || (n = {})), function (t) {t[t.Sum = 0] = "Sum", t[t.Average = 1] = "Average", t[t.DistinctCount = 2] = "DistinctCount", t[t.Min = 3] = "Min", t[t.Max = 4] = "Max", t[t.Count = 5] = "Count", t[t.Median = 6] = "Median", t[t.StdDev = 7] = "StdDev", t[t.Variance = 8] = "Variance";}(r || (r = {}));}, 2175: (t, e, i) => {"use strict";i.d(e, { AA: () => o.AA, Yx: () => o.Yx, Z3: () => o.Z3, di: () => o.di, e$: () => a, nY: () => o.nY, ss: () => o.ss });var n = i(3622),r = i(1807),s = i(9021),o = i(7753);class a extends n.Z {options;updateOptions;templates;internalSettings;settings;container;toolbar;gallery;get displayName() {return "Templates";}constructor(t, e) {super(t, e), this.options = t, this.updateOptions = e, this.settings = e.settings, this.loadInternalSettings(), this.options.protectedProperties || (this.options.protectedProperties = []), this.options.itemsPerRow || (this.options.itemsPerRow = 3), this.templates = [...(this.options.showCurrent ? [(0, o.Yx)(this.settings, this.options.protectedProperties, !0, o.nY.Current, this.options.currentName || "Current")] : []), ...this.options.templates, ...this.internalSettings.userTemplates];}loadInternalSettings() {let t = { userTemplates: [], useDummyData: !0, category: "" };const e = this.updateOptions.visualUpdateOptions && this.updateOptions.visualUpdateOptions.dataViews && this.updateOptions.visualUpdateOptions.dataViews[0];e && e.metadata.objects && (t = (0, r.PLM)(e.metadata.objects, "internal", "templates", t)), this.internalSettings = t;}saveInternalSettings() {this.pending.internal = [{ objectName: "internal", properties: { templates: this.internalSettings }, selector: null }], this.save();}loadUserTemplate(t) {const e = this.validateTemplate(t);if (!0 === e) {const e = (0, o.di)(t, this.settings, this.options.protectedProperties);return this.templates.push(e), this.internalSettings.userTemplates.push(e), this.saveInternalSettings(), e;}return this.showError(e.toString()), null;}unloadUserTemplate(t) {const e = this.templates.findIndex((e) => e.id == t);if (e >= 0) {const t = this.templates[e];if (t && t.type == o.nY.User) {const i = this.internalSettings.userTemplates.findIndex((e) => e.id == t.id);i >= 0 && (this.internalSettings.userTemplates.splice(i, 1), this.saveInternalSettings()), this.templates.splice(e, 1);}}}applyTemplate(t) {this.pending.template = [];const e = null !== t && this.templates.find((e) => e.id == t);e && e.type != o.nY.Current && (this.pending.template = (0, o.AA)((0, o.Z3)(e, this.settings), this.updateOptions.visualUpdateOptions)), this.save();}select(t) {(0, r.kOW)(".template", this.gallery).forEach((e) => {e.dataset.template == t ? e.classList.add("active") : e.classList.remove("active");}), this.applyTemplate(t);}deselect() {(0, r.kOW)(".template.active", this.gallery).forEach((t) => t.classList.remove("active")), this.applyTemplate(null);}draw(t) {super.draw(t);const e = (0, r.tTh)(".dialog-flex.template-manager", t);this.container = (0, r.tTh)(".dialog-col.templates", e), this.drawToolbar();const i = (0, r.tTh)(".templates-content", this.container);this.gallery = (0, r.tTh)(".gallery.dialog-flex", i), this.drawTemplates(), this.gallery.addEventListener("click", (t) => {const e = t.target,i = e.closest(".template");if (i) {t.preventDefault(), t.stopPropagation();const n = i.dataset.template;e.classList.contains("content") ? i.classList.contains("disabled") || this.select(n) : e.classList.contains("actions-menu") && r.tzH.Init("template-actions", { width: 150, items: [{ label: "Remove", enabled: !0, onClick: () => {const t = i.classList.contains("active");i.remove(), this.unloadUserTemplate(n), this.drawCategories(), t && this.templates.length && this.select(this.templates[this.templates.length - 1].id);} }] }, t);} else r.tzH.Close();});}drawToolbar() {(this.options.showCategories || this.options.canImport || this.options.canExport && 1 != this.options.canExport && 2 != this.options.canExport) && (this.toolbar || (this.toolbar = (0, r.tTh)(".templates-toolbar", this.container)), this.drawCategories(), this.drawPreviewYourData(), (0, r.tTh)(".spacer", this.toolbar), this.drawExportButton(), this.drawImportButton());}drawCategories() {if (!this.toolbar || !this.options.showCategories) return;(0, r.VR4)(".categories", this.toolbar).remove();const t = [{ value: "", text: "All Categories" }];if (this.templates.forEach((e) => {if (e.category) {const i = t.find((t) => t.value == e.category);i ? i.data++ : t.push({ value: e.category, text: e.category, selected: this.internalSettings.category == e.category, data: 1 });}}), t.length > 1) {const e = (0, r.tTh)("select.categories", { list: t.map((t) => (t.data && (t.text = `${t.text} (${t.data})`), t)), events: { change: (t) => {this.internalSettings.category = t.currentTarget.value, this.saveInternalSettings(), this.drawTemplates();} } });this.toolbar.prepend(e);}}drawPreviewYourData() {this.toolbar && this.options.allowDummyData && (0, r.HGh)(".template-data-switch.small", this.toolbar, { checked: !this.internalSettings.useDummyData, change: (t, e) => {this.internalSettings.useDummyData = !e, this.saveInternalSettings(), this.drawTemplates();} }, "Preview Your Data");}drawImportButton() {if (!this.toolbar || !this.options.canImport) return;const t = (0, r.tTh)("input#load-template-file.file-hidden", this.toolbar, { attr: { multiple: !0, type: "file", accept: ".json" }, events: { click: (t) => {t.currentTarget.value = null;}, change: (t) => {const e = t.currentTarget.files;if (e && e.length) for (let t = 0; t < e.length; t++) {const i = e[t];if (i.type.indexOf("json") >= 0) {const t = new FileReader();t.readAsText(i), t.onload = () => {try {const e = JSON.parse(t.result);e.description || (e.description = i.name);const n = this.loadUserTemplate(e);n && (this.drawCategories(), this.drawTemplate(n) && this.select(n.id));} catch (t) {this.showError("Unable to import the template file.", t);}};} else this.showError("Only JSON template files are allowed.");}} } });(0, r.tTh)("button.load-template.btn", this.toolbar, { events: { click: (e) => {e.preventDefault(), t.dispatchEvent(new MouseEvent("click"));} } }, "Load Template");}drawExportButton() {if (!this.toolbar || 1 == this.options.canExport || 2 == this.options.canExport) return;const t = 3 == this.options.canExport;(0, r.tTh)("a.save-template.control.icon-save", this.toolbar, { attr: { disabled: t, title: t ? "Export has been disabled by your administrator." : "" }, events: { click: (t, e) => {t.preventDefault(), e.getAttribute("disabled") || this.askForTemplateOptions();} } }, "Save Current as Template");}askForTemplateOptions() {new r.Ku8({ title: "Save as Template", buttons: [{ name: "OK", action: "ok", disabled: !0, key: "Enter" }, { name: "Cancel", action: "cancel", className: "alt2" }], size: { width: 350, height: 0 }, middleware: (t, e) => {const i = () => {const i = (0, r.VR4)("input#name", t),n = i.isNull ? "Template" : i.value,s = (0, r.VR4)(".data-bound-switch .switch-input", t),o = !!s.isNull || s.checked;e.data = { name: n, dataBound: o, dataView: !1, palette: !1 };};(0, r.tTh)(".dialog-field", t, [(0, r.tTh)("label", "Template name"), (0, r.tTh)("input#name", { attr: { type: "text", value: "", required: !0, placeholder: "Insert a value" }, events: { keyup: (t) => {const i = t.target.value;e.enableButton("OK", "" != i);}, change: () => {i();} } })]), (0, r.HGh)(".data-bound-switch.small", t, { checked: !0, title: "If enabled, specific data points settings will be included in the template. E.g.: the color assigned to each category of the current dataview.", change: () => i() }, "Include data bound properties"), i(), window.setTimeout(() => {(0, r.VR4)("input#name", t).focus();}, 300);} }).show().then((t) => {if ("ok" == t.action) {const e = (0, o.Yx)(this.settings, this.options.protectedProperties, t.data.dataBound, o.nY.User, t.data.name);delete e.type, delete e.dataIndex, this.download({ content: JSON.stringify(e), fileName: `${(0, r.aHV)(t.data.name)}.json`, fileType: ".json", fileDescription: "Template JSON file" });}});}validateTemplate(t) {return (0, r.cKq)(t, "id") && (0, r.cKq)(t, "settings") ? !this.templates.find((e) => e.id == t.id) || (this.select(t.id), `Another template with the same id (${t.id}) already exists in the gallery.`) : "You provided an invalid template.";}checkTemplateRequirements(t, e) {let i = !0;const n = this.updateOptions.visualUpdateOptions && this.updateOptions.visualUpdateOptions.dataViews && this.updateOptions.visualUpdateOptions.dataViews[0];if (n) {const s = (0, r.JYz)(n.metadata.columns);t.required.forEach((t) => {let n = "";(0, r.cKq)(s, t.role) ? t.multiple ? s[t.role].length < 2 && (n = `two or more columns are in "${t.displayName}"`) : 0 == s[t.role].length && (n = `at least one column is in "${t.displayName}"`) : n = `"${t.displayName}" is not empty`, n && ((0, r.tTh)(".warning.icon-" + (t.strict ? "error" : "alert"), e, { attr: { title: `The template ${t.strict ? "can be applied only if" : "works better when"} ${n}.` } }, t.displayName), t.strict && e.closest(".template").classList.add("disabled"), i = !1);});}return i;}drawTemplates() {this.gallery.textContent = "", this.templates.forEach((t, e) => this.drawTemplate(t, this.options.showCurrent && 0 == e));}drawTemplate(t, e = !1) {if ((t.type == o.nY.Builtin || t.type == o.nY.User) && this.options.showCategories && this.internalSettings.category && t.category != this.internalSettings.category) return !1;const i = this.options.templateSize ? this.options.templateSize : { width: 1 == this.options.itemsPerRow ? s.q.size.width : s.q.size.width / this.options.itemsPerRow - 10 * this.options.itemsPerRow, height: 120 },n = (0, r.tTh)(".template" + (e ? ".active" : ""), this.gallery, { attr: { title: t.description ? t.description : null }, style: { width: `${i.width}px` }, data: { template: t.id } });t.type == o.nY.User && (0, r.tTh)("a.actions-menu.control.solo.icon-ellipsis", n, { attr: { href: "#", title: "Actions" } }), (0, r.tTh)(".title", n, { attr: { title: t.name } }, t.name);const a = (0, r.tTh)(".content", n);let l = !0;const c = this.internalSettings.useDummyData && this.options.allowDummyData && (t.type == o.nY.Builtin || t.type == o.nY.User),h = { width: 3 * (i.width - 12), height: 3 * (i.height - 12) },u = (0, r.tTh)(".wrapper", a, { style: { transform: "scale(0.33, 0.33)", marginTop: 2, marginLeft: 2, width: h.width, height: h.height } }),d = this.preview(u, h, (0, o.di)(t, this.settings, this.options.protectedProperties), c ? null : this.updateOptions.visualUpdateOptions),p = (0, r.tTh)(".warning-container", a);return d ? t.required.length && !c && (l = this.checkTemplateRequirements(t, p)) : (0, r.tTh)(".warning.icon-error", p, "Preview not available"), l;}preview(t, e, i, n) {return !1;}}}, 2214: (t, e, i) => {"use strict";i.d(e, { O5: () => n });class n {locale;colorPalette;selectionManager;persistProperties;applyJsonFilter;tooltipService;telemetry;authenticationService;hostCapabilities;launchUrl;fetchMoreData;openModalDialog;instanceId;refreshHostData;createLocalizationManager;downloadService;eventService;switchFocusModeState;hostEnv;displayWarningIcon;licenseManager;webAccessService;drill;applyCustomSort;acquireAADTokenService;setCanDrill;storageV2Service;subSelectionService;createOpaqueUtils;constructor(t, e) {this.locale = e || "en-US", t ? (this.colorPalette = new a(t ? t.colors : null), this.colorPalette.isHighContrast = t.isHighContrast, this.colorPalette.foreground = t.foreground, this.colorPalette.foregroundLight = t.foregroundLight, this.colorPalette.foregroundDark = t.foregroundDark, this.colorPalette.foregroundNeutralLight = t.foregroundNeutralLight, this.colorPalette.foregroundNeutralDark = t.foregroundNeutralDark, this.colorPalette.foregroundNeutralSecondary = t.foregroundNeutralSecondary, this.colorPalette.foregroundNeutralSecondaryAlt = t.foregroundNeutralSecondaryAlt, this.colorPalette.foregroundNeutralSecondaryAlt2 = t.foregroundNeutralSecondaryAlt2, this.colorPalette.foregroundNeutralTertiary = t.foregroundNeutralTertiary, this.colorPalette.foregroundNeutralTertiaryAlt = t.foregroundNeutralTertiaryAlt, this.colorPalette.foregroundSelected = t.foregroundSelected, this.colorPalette.foregroundButton = t.foregroundButton, this.colorPalette.background = t.background, this.colorPalette.backgroundLight = t.backgroundLight, this.colorPalette.backgroundNeutral = t.backgroundNeutral, this.colorPalette.backgroundDark = t.backgroundDark, this.colorPalette.hyperlink = t.hyperlink, this.colorPalette.visitedHyperlink = t.visitedHyperlink, this.colorPalette.mapPushpin = t.mapPushpin, this.colorPalette.shapeStroke = t.shapeStroke, this.colorPalette.selection = t.selection, this.colorPalette.separator = t.separator, this.colorPalette.negative = t.negative, this.colorPalette.neutral = t.neutral, this.colorPalette.positive = t.positive) : this.colorPalette = new a();}createSelectionIdBuilder() {return new r();}createSelectionManager() {return this.selectionManager;}}class r {withCategory(t, e) {return this;}withSeries(t, e) {return this;}withMeasure(t) {return this;}createSelectionId(t = "") {return new o(t);}withMatrixNode(t, e) {return this;}withTable(t, e) {return this;}}let s = 0;class o {key;measures;constructor(t) {this.measures = [s++], this.key = t;}compareMeasures = (t, e) => t === e;equals(t) {return this === t;}includes(t, e) {return this === t;}getKey() {return this.key;}getSelector() {return {};}getSelectorsByColumn() {return {};}hasIdentity() {return !0;}}class a {static DefaultColors = [{ value: "#01B8AA" }, { value: "#374649" }, { value: "#FD625E" }, { value: "#F2C80F" }, { value: "#5F6B6D" }, { value: "#8AD4EB" }, { value: "#FE9666" }, { value: "#A66999" }, { value: "#3599B8" }, { value: "#DFBFBF" }, { value: "#4AC5BB" }, { value: "#5F6B6D" }, { value: "#FB8281" }, { value: "#F4D25A" }, { value: "#7F898A" }, { value: "#A4DDEE" }, { value: "#FDAB89" }, { value: "#B687AC" }, { value: "#28738A" }, { value: "#A78F8F" }, { value: "#168980" }, { value: "#293537" }, { value: "#BB4A4A" }, { value: "#B59525" }, { value: "#475052" }, { value: "#6A9FB0" }, { value: "#BD7150" }, { value: "#7B4F71" }, { value: "#1B4D5C" }, { value: "#706060" }, { value: "#0F5C55" }, { value: "#1C2325" }, { value: "#7D3231" }, { value: "#796419" }, { value: "#303637" }, { value: "#476A75" }, { value: "#7E4B36" }, { value: "#52354C" }, { value: "#0D262E" }, { value: "#544848" }];colors;colorIndex = 0;constructor(t = []) {this.colors = t;}getColor(t) {let e = this.colors[t];if (e) return e;const i = a.DefaultColors;return e = this.colors[t] = i[this.colorIndex++], this.colorIndex >= i.length && (this.colorIndex = 0), e;}isHighContrast;foreground;foregroundLight;foregroundDark;foregroundNeutralLight;foregroundNeutralDark;foregroundNeutralSecondary;foregroundNeutralSecondaryAlt;foregroundNeutralSecondaryAlt2;foregroundNeutralTertiary;foregroundNeutralTertiaryAlt;foregroundSelected;foregroundButton;background;backgroundLight;backgroundNeutral;backgroundDark;hyperlink;visitedHyperlink;mapPushpin;shapeStroke;selection;separator;negative;neutral;positive;reset() {return this;}}}, 2216: (t, e, i) => {"use strict";i.d(e, { O: () => r, h: () => s });var n = i(1807);function r(t, e) {const i = (0, n.tTh)(".pwd", t ?? null, [(0, n.tTh)(".pwd-box", [...(e?.label ? [(0, n.tTh)("label.label", { style: { minWidth: e.labelMinWidth ?? "auto", maxWidth: e.labelMaxWidth ?? "auto" } }, e.label)] : []), (0, n.tTh)(".pwd-input.max", [(0, n.tTh)("input.input", { attr: { type: "password", placeholder: e?.placeholder ?? "Password", disabled: e?.disabled ?? !1, value: e?.value ?? "" }, events: { focus: (t, e) => {t.preventDefault(), e.parentElement.classList.add("focused");}, blur: (t, e) => {t.preventDefault(), e.parentElement.classList.remove("focused");}, input: (t, i) => {if (t.preventDefault(), e?.onInput && e.onInput(t, i), e?.onInputValidation) {const t = e.onInputValidation(i.value);if (e.banner) {const e = i.closest(".pwd").querySelector(".pwd-validation-failed");e && e.classList.toggle("hide", t);}}} } }), ...(e?.visibilityToggle ? [(0, n.tTh)("i.icon-visible.icon", { events: { click: (t, e) => {const i = e.parentElement.querySelector("input");i.type = "password" === i.type ? "text" : "password", e.classList.toggle("icon-visible"), e.classList.toggle("icon-hidden");} } })] : [])])]), ...(e?.banner ? [(0, n.tTh)(".pwd-validation-failed.hide", `${e?.bannerText ?? "Incorrect password"}`)] : [])]);return e?.containerClasses && i.classList.add(...e.containerClasses), i;}function s(t, e = document.body, i = "100%", r = "100%") {return (0, n.tTh)("iframe", e, { attr: { src: t, width: i, height: r, sandbox: "allow-same-origin allow-scripts", style: "border: none" } });}}, 2222: (t, e, i) => {"use strict";i.d(e, { A: () => n });const n = (t) => Math.floor(t.getTime() / 1e3);}, 2284: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(7728),r = function () {return r = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, r.apply(this, arguments);};const s = function () {function t() {this._events = {};}var e = t.prototype;return e.on = function (t, e) {if ((0, n.Gv)(t)) for (var i in t) this.on(i, t[i]);else this._addEvent(t, e, {});return this;}, e.off = function (t, e) {if (t) {if ((0, n.Gv)(t)) for (var i in t) this.off(i);else if (e) {var r = this._events[t];if (r) {var s = (0, n.SL)(r, function (t) {return t.listener === e;});s > -1 && r.splice(s, 1);}} else this._events[t] = [];} else this._events = {};return this;}, e.once = function (t, e) {var i = this;return e && this._addEvent(t, e, { once: !0 }), new Promise(function (e) {i._addEvent(t, e, { once: !0 });});}, e.emit = function (t, e) {var i = this;void 0 === e && (e = {});var n = this._events[t];if (!t || !n) return !0;var r = !1;return e.eventType = t, e.stop = function () {r = !0;}, e.currentTarget = this, function () {for (var t = 0, e = 0, i = arguments.length; e < i; e++) t += arguments[e].length;var n = Array(t),r = 0;for (e = 0; e < i; e++) for (var s = arguments[e], o = 0, a = s.length; o < a; o++, r++) n[r] = s[o];return n;}(n).forEach(function (n) {n.listener(e), n.once && i.off(t, n.listener);}), !r;}, e.trigger = function (t, e) {return void 0 === e && (e = {}), this.emit(t, e);}, e._addEvent = function (t, e, i) {var n = this._events;n[t] = n[t] || [], n[t].push(r({ listener: e }, i));}, t;}();}, 2292: (t, e, i) => {"use strict";i.d(e, { X: () => l, x: () => a });var n = i(6639),r = i(641),s = i(4810),o = i(2140);const a = { Arial: "Arial", "Arial Black": "'Arial Black'", "Arial Unicode MS": "'Arial Unicode MS'", Calibri: "Calibri", Cambria: "Cambria", "Cambria Math": "'Cambria Math'", Candara: "Candara", "Comic Sans MS": "'Comic Sans MS'", Consolas: "Consolas", Constantia: "Constantia", Corbel: "Corbel", "Courier New": "'Courier New'", Georgia: "Georgia", "Lucida Sans Unicode": "'Lucida Sans Unicode'", "Segoe (Bold)": "'Segoe UI Bold', wf_segoe-ui_bold, helvetica, arial, sans-serif", "Segoe UI": "'Segoe UI', wf_segoe-ui_normal, helvetica, arial, sans-serif", "Segoe UI Light": "'Segoe UI Light', wf_segoe-ui_bold, helvetica, arial, sans-serif", Symbol: "Symbol", Tahoma: "Tahoma", "Times New Roman": "'Times New Roman'", "Trebuchet MS": "'Trebuchet MS'", Verdana: "Verdana", Wingdings: "Wingdings" };class l extends o.c {familyOptions = a;min = 0;max = 200;placeholder;showFamily = !0;showSize = !0;showToggles = !0;constructor(t) {t.optionType = "font", super(t), Object.assign(this, t), this.value || (this.value = {}, this.initialValue = this.value);}render(t) {super.render(t);const e = this.displayValue;(0, n.tT)(".oop-font", this.element, [...(this.showFamily ? [(0, n.tT)("select.oop-font-family", t, { list: [{ value: s.qk, text: "(Mixed)", disabled: !0, hidden: !0 }, ...Object.keys(this.familyOptions).map((t) => ({ value: this.familyOptions[t], text: t, selected: this.familyOptions[t] === e.family }))], events: { change: (t, e) => {this.value = (Array.isArray(this.value) ? this.value[0] : this.value) || {}, this.value.family = e.value, this.onChange && this.onChange(this.value);} } })] : []), ...(this.showSize ? [(0, r.W)(".oop-font-size", t, { min: this.min, max: this.max, step: 1, upDown: !0, value: e.size, placeholder: this.placeholder, change: (t, e) => {this.value = (Array.isArray(this.value) ? this.value[0] : this.value) || {}, this.value.size = e, this.onChange && this.onChange(this.value);} })] : []), ...(this.showToggles ? [(0, n.tT)(".oop-toggles", [(0, n.tT)(".oop-font-bold.oop-toggle.icon-bold" + (e.bold ? ".selected" : ""), { attr: { title: "Bold" }, events: { click: (t, e) => {this.value = (Array.isArray(this.value) ? this.value[0] : this.value) || {}, this.value.bold = !this.value.bold, e.classList.toggle("selected", this.value.bold), this.onChange && this.onChange(this.value);} } }), (0, n.tT)(".oop-font-italic.oop-toggle.icon-italic" + (e.bold ? ".selected" : ""), { attr: { title: "Italic" }, events: { click: (t, e) => {this.value = (Array.isArray(this.value) ? this.value[0] : this.value) || {}, this.value.italic = !this.value.italic, e.classList.toggle("selected", this.value.italic), this.onChange && this.onChange(this.value);} } }), (0, n.tT)(".oop-font-underline.oop-toggle.icon-underline" + (e.underline ? ".selected" : ""), { attr: { title: "Underline" }, events: { click: (t, e) => {this.value = (Array.isArray(this.value) ? this.value[0] : this.value) || {}, this.value.underline = !this.value.underline, e.classList.toggle("selected", this.value.underline), this.onChange && this.onChange(this.value);} } })])] : [])]);}refresh() {const t = this.displayValue,e = this.isMixed;if (this.showFamily) {const i = this.element.querySelector(".oop-font-family");if (i) {const n = i.querySelector(`option[value="${s.qk}"]`);n && (n.hidden = !e), i.value = e ? s.qk : t?.family || "";}}if (this.showSize) {const e = this.element.querySelector(".oop-font-size input");e && (e.value = t?.size?.toString() || "", e.placeholder = this.isMixed ? "(Mixed)" : this.placeholder || "");}if (this.showToggles) {const e = this.element.querySelector(".oop-font-bold");e && e.classList.toggle("selected", t?.bold);const i = this.element.querySelector(".oop-font-italic");i && i.classList.toggle("selected", t?.italic);const n = this.element.querySelector(".oop-font-underline");n && n.classList.toggle("selected", t?.underline);}}}}, 2391: (t, e, i) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.wordBreakOverflowingText = e.wordBreak = e.svgEllipsis = e.getTailoredTextOrDefault = e.getDivElementWidth = e.getSvgMeasurementProperties = e.getMeasurementProperties = e.measureSvgTextElementWidth = e.estimateSvgTextHeight = e.estimateSvgTextBaselineDelta = e.measureSvgTextHeight = e.measureSvgTextRect = e.measureSvgTextWidth = e.removeSpanElement = void 0;var n,r,s,o,a = i(2087),l = i(5807),c = i(167),h = "...";function u() {if (!n) {n = document.createElement("span"), document.body.appendChild(n);var t = document.createElementNS("http://www.w3.org/2000/svg", "svg");t.setAttribute("height", "0"), t.setAttribute("width", "0"), t.setAttribute("position", "absolute"), t.style.top = "0px", t.style.left = "0px", t.style.position = "absolute", t.style.height = "0px", t.style.width = "0px", r = document.createElementNS("http://www.w3.org/2000/svg", "text"), t.appendChild(r), document.body.appendChild(t);var e = document.createElement("canvas");s = e.getContext("2d");var i = window.getComputedStyle(r);o = i ? i.fontFamily : "";}}function d(t, e) {return u(), s.font = (t.fontStyle || "") + " " + (t.fontVariant || "") + " " + (t.fontWeight || "") + " " + t.fontSize + " " + (t.fontFamily || o), s.measureText(e || t.text).width;}function p(t, e) {for (u(); r.firstChild;) r.removeChild(r.firstChild);return r.setAttribute("style", null), r.style.visibility = "hidden", r.style.fontFamily = t.fontFamily || o, r.style.fontVariant = t.fontVariant, r.style.fontSize = t.fontSize, r.style.fontWeight = t.fontWeight, r.style.fontStyle = t.fontStyle, r.style.whiteSpace = t.whiteSpace || "nowrap", r.appendChild(document.createTextNode(e || t.text)), r.getBBox();}function f(t) {var i = t.fontFamily + t.fontSize,n = c.ephemeralStorageService.getData(i);if (null == n) {var r = { fontFamily: t.fontFamily, fontSize: t.fontSize, text: "M" };(n = e.measureSvgTextRect(r)).height > 0 && c.ephemeralStorageService.setData(i, n);}return n;}function g(t, e) {void 0 === e && (e = !1);var i = f(t).height;return e && (i *= .7), i;}function m(t) {var e = window.getComputedStyle(t);return e ? { text: t.textContent, fontFamily: e.fontFamily, fontSize: e.fontSize, fontWeight: e.fontWeight, fontStyle: e.fontStyle, fontVariant: e.fontVariant, whiteSpace: e.whiteSpace } : { text: t.textContent, fontFamily: "", fontSize: "0" };}function v(t, e) {if (u(), 0 === t.text.length) return t.text;var i = d(t);if (i < e) return t.text;if (d(t, h) >= i) return t.text;for (var n = a.prototype.inherit(t), r = n.text = h + n.text, s = 1, o = r.length, l = 3; s <= o;) if (l = (s + o) / 2 | 0, n.text = r.substring(0, l), e > (i = d(n))) s = l + 1;else {if (!(e < i)) break;o = l - 1;}return n.text = r.substring(0, l), (i = d(n)) > e && l--, t.text.substring(0, l - 3) + h;}e.removeSpanElement = function () {n && n.remove && n.remove(), n = null;}, e.measureSvgTextWidth = d, e.measureSvgTextRect = p, e.measureSvgTextHeight = function (t, e) {return p(t, e).height;}, e.estimateSvgTextBaselineDelta = function (t) {var e = f(t);return e.y + e.height;}, e.estimateSvgTextHeight = g, e.measureSvgTextElementWidth = function (t) {return d(m(t));}, e.getMeasurementProperties = function (t) {var e = window.getComputedStyle(t);return { text: t.value || t.textContent, fontFamily: e.fontFamily, fontSize: e.fontSize, fontWeight: e.fontWeight, fontStyle: e.fontStyle, fontVariant: e.fontVariant, whiteSpace: e.whiteSpace };}, e.getSvgMeasurementProperties = m, e.getDivElementWidth = function (t) {var e = window.getComputedStyle(t);return e ? e.width : "0";}, e.getTailoredTextOrDefault = v, e.svgEllipsis = function (t, e) {var i = m(t),n = i.text,r = v(i, e);n !== r && (t.textContent = r);}, e.wordBreak = function (t, e, i, n) {void 0 === n && (n = 0);var r = m(t),s = g(r) + n,o = Math.max(1, Math.floor(i / s)),a = t ? t.getAttribute("y") : null,c = t ? t.textContent : null;t.textContent = null;for (var h = l.splitByWidth(c, r, d, e, o), u = document.createDocumentFragment(), p = 0, f = h.length; p < f; p++) {var y = 0 === p ? a : s;r.text = h[p];var b = document.createElementNS("http://www.w3.org/2000/svg", "tspan");b.setAttribute("x", "0"), b.setAttribute("dy", y ? y.toString() : null), b.appendChild(document.createTextNode(v(r, e))), u.appendChild(b);}t.appendChild(u);}, e.wordBreakOverflowingText = function (t, e, i, n) {void 0 === n && (n = 0);var r = m(t),s = g(r) + n,o = Math.max(1, Math.floor(i / s)),c = t.textContent;t.textContent = null;for (var h = l.splitByWidth(c, r, d, e, o), u = document.createDocumentFragment(), p = 0; p < h.length; p++) {var f = document.createElement("span");f.style.overflow = "hidden", f.style.whiteSpace = "nowrap", f.style.textOverflow = "ellipsis", f.style.display = "block", f.style.width = a.pixelConverter.toString(e), f.appendChild(document.createTextNode(h[p])), f.appendChild(document.createTextNode(v(r, e))), u.appendChild(f);}t.appendChild(u);};}, 2437: (t, e, i) => {"use strict";i.d(e, { A: () => g });var n = i(2284),r = i(7728),s = function (t, e) {return s = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);}, s(t, e);},o = function () {return o = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, o.apply(this, arguments);};function a(t) {return 180 * (e = [t[0].clientX, t[0].clientY], n = (i = [t[1].clientX, t[1].clientY])[0] - e[0], r = i[1] - e[1], ((s = Math.atan2(r, n)) >= 0 ? s : s + 2 * Math.PI) / Math.PI);var e, i, n, r, s;}function l(t) {return t ? t.touches ? function (t) {for (var e = Math.min(t.length, 2), i = [], n = 0; n < e; ++n) i.push(u(t[n]));return i;}(t.touches) : [u(t)] : [];}function c(t, e, i) {var n = i.length,r = d(t, n),s = r.clientX,o = r.clientY,a = r.originalClientX,l = r.originalClientY,c = d(e, n),h = c.clientX,u = c.clientY,p = d(i, n);return { clientX: a, clientY: l, deltaX: s - h, deltaY: o - u, distX: s - p.clientX, distY: o - p.clientY };}function h(t) {return Math.sqrt(Math.pow(t[0].clientX - t[1].clientX, 2) + Math.pow(t[0].clientY - t[1].clientY, 2));}function u(t) {return { clientX: t.clientX, clientY: t.clientY };}function d(t, e) {void 0 === e && (e = t.length);for (var i = { clientX: 0, clientY: 0, originalClientX: 0, originalClientY: 0 }, n = Math.min(t.length, e), r = 0; r < n; ++r) {var s = t[r];i.originalClientX += "originalClientX" in s ? s.originalClientX : s.clientX, i.originalClientY += "originalClientY" in s ? s.originalClientY : s.clientY, i.clientX += s.clientX, i.clientY += s.clientY;}return e ? { clientX: i.clientX / e, clientY: i.clientY / e, originalClientX: i.originalClientX / e, originalClientY: i.originalClientY / e } : i;}var p = function () {function t(t) {this.prevClients = [], this.startClients = [], this.movement = 0, this.length = 0, this.startClients = t, this.prevClients = t, this.length = t.length;}return t.prototype.getAngle = function (t) {return void 0 === t && (t = this.prevClients), a(t);}, t.prototype.getRotation = function (t) {return void 0 === t && (t = this.prevClients), a(t) - a(this.startClients);}, t.prototype.getPosition = function (t, e) {void 0 === t && (t = this.prevClients);var i = c(t || this.prevClients, this.prevClients, this.startClients),n = i.deltaX,r = i.deltaY;return this.movement += Math.sqrt(n * n + r * r), this.prevClients = t, i;}, t.prototype.getPositions = function (t) {void 0 === t && (t = this.prevClients);for (var e = this.prevClients, i = this.startClients, n = Math.min(this.length, e.length), r = [], s = 0; s < n; ++s) r[s] = c([t[s]], [e[s]], [i[s]]);return r;}, t.prototype.getMovement = function (t) {var e = this.movement;if (!t) return e;var i = d(t, this.length),n = d(this.prevClients, this.length),r = i.clientX - n.clientX,s = i.clientY - n.clientY;return Math.sqrt(r * r + s * s) + e;}, t.prototype.getDistance = function (t) {return void 0 === t && (t = this.prevClients), h(t);}, t.prototype.getScale = function (t) {return void 0 === t && (t = this.prevClients), h(t) / h(this.startClients);}, t.prototype.move = function (t, e) {this.startClients.forEach(function (i) {i.clientX -= t, i.clientY -= e;}), this.prevClients.forEach(function (i) {i.clientX -= t, i.clientY -= e;});}, t;}(),f = ["textarea", "input"],g = function (t) {function e(e, i) {void 0 === i && (i = {});var n = t.call(this) || this;n.options = {}, n.flag = !1, n.pinchFlag = !1, n.data = {}, n.isDrag = !1, n.isPinch = !1, n.clientStores = [], n.targets = [], n.prevTime = 0, n.doubleFlag = !1, n._useMouse = !1, n._useTouch = !1, n._useDrag = !1, n._dragFlag = !1, n._isTrusted = !1, n._isMouseEvent = !1, n._isSecondaryButton = !1, n._preventMouseEvent = !1, n._prevInputEvent = null, n._isDragAPI = !1, n._isIdle = !0, n._preventMouseEventId = 0, n._window = window, n.onDragStart = function (t, e) {if (void 0 === e && (e = !0), n.flag || !1 !== t.cancelable) {var i = t.type.indexOf("drag") >= -1;if (!n.flag || !i) {n._isDragAPI = !0;var s = n.options,a = s.container,c = s.pinchOutside,h = s.preventWheelClick,u = s.preventRightClick,d = s.preventDefault,g = s.checkInput,m = s.dragFocusedInput,v = s.preventClickEventOnDragStart,y = s.preventClickEventOnDrag,b = s.preventClickEventByCondition,w = n._useTouch,x = !n.flag;if (n._isSecondaryButton = 3 === t.which || 2 === t.button, h && (2 === t.which || 1 === t.button) || u && (3 === t.which || 2 === t.button)) return n.stop(), !1;if (x) {var S = n._window.document.activeElement,E = t.target;if (E) {var C = E.tagName.toLowerCase(),k = f.indexOf(C) > -1,T = E.isContentEditable;if (k || T) {if (g || !m && S === E) return !1;if (S && (S === E || T && S.isContentEditable && S.contains(E))) {if (!m) return !1;E.blur();}} else if ((d || "touchstart" === t.type) && S) {var A = S.tagName.toLowerCase();(S.isContentEditable || f.indexOf(A) > -1) && S.blur();}(v || y || b) && (0, r.W2)(n._window, "click", n._onClick, !0);}n.clientStores = [new p(l(t))], n._isIdle = !1, n.flag = !0, n.isDrag = !1, n._isTrusted = e, n._dragFlag = !0, n._prevInputEvent = t, n.data = {}, n.doubleFlag = (0, r.tB)() - n.prevTime < 200, n._isMouseEvent = function (t) {return t && (t.type.indexOf("mouse") > -1 || "button" in t);}(t), !n._isMouseEvent && n._preventMouseEvent && n._allowMouseEvent(), !1 === (n._preventMouseEvent || n.emit("dragStart", o(o({ data: n.data, datas: n.data, inputEvent: t, isMouseEvent: n._isMouseEvent, isSecondaryButton: n._isSecondaryButton, isTrusted: e, isDouble: n.doubleFlag }, n.getCurrentStore().getPosition()), { preventDefault: function () {t.preventDefault();}, preventDrag: function () {n._dragFlag = !1;} }))) && n.stop(), n._isMouseEvent && n.flag && d && t.preventDefault();}if (!n.flag) return !1;var M = 0;if (x ? (n._attchDragEvent(), w && c && (M = setTimeout(function () {(0, r.W2)(a, "touchstart", n.onDragStart, { passive: !1 });}))) : w && c && (0, r.Nn)(a, "touchstart", n.onDragStart), n.flag && function (t) {return t.touches && t.touches.length >= 2;}(t)) {if (clearTimeout(M), x && t.touches.length !== t.changedTouches.length) return;n.pinchFlag || n.onPinchStart(t);}}}}, n.onDrag = function (t, e) {if (n.flag) {var i = n.options.preventDefault;!n._isMouseEvent && i && t.preventDefault(), n._prevInputEvent = t;var r = l(t),s = n.moveClients(r, t, !1);if (n._dragFlag) {if ((n.pinchFlag || s.deltaX || s.deltaY) && !1 === (n._preventMouseEvent || n.emit("drag", o(o({}, s), { isScroll: !!e, inputEvent: t })))) return void n.stop();n.pinchFlag && n.onPinch(t, r);}n.getCurrentStore().getPosition(r, !0);}}, n.onDragEnd = function (t) {if (n.flag) {var e = n.options,i = e.pinchOutside,s = e.container,a = e.preventClickEventOnDrag,c = e.preventClickEventOnDragStart,h = e.preventClickEventByCondition,u = n.isDrag;(a || c || h) && requestAnimationFrame(function () {n._allowClickEvent();}), h || c || !a || u || n._allowClickEvent(), n._useTouch && i && (0, r.Nn)(s, "touchstart", n.onDragStart), n.pinchFlag && n.onPinchEnd(t);var d = (null == t ? void 0 : t.touches) ? l(t) : [];0 !== d.length && n.options.keepDragging ? n._addStore(new p(d)) : n.flag = !1;var f = n._getPosition(),g = (0, r.tB)(),m = !u && n.doubleFlag;n._prevInputEvent = null, n.prevTime = u || m ? 0 : g, n.flag || (n._dettachDragEvent(), n._preventMouseEvent || n.emit("dragEnd", o({ data: n.data, datas: n.data, isDouble: m, isDrag: u, isClick: !u, isMouseEvent: n._isMouseEvent, isSecondaryButton: n._isSecondaryButton, inputEvent: t, isTrusted: n._isTrusted }, f)), n.clientStores = [], n._isMouseEvent || (n._preventMouseEvent = !0, clearTimeout(n._preventMouseEventId), n._preventMouseEventId = setTimeout(function () {n._preventMouseEvent = !1;}, 200)), n._isIdle = !0);}}, n.onBlur = function () {n.onDragEnd();}, n._allowClickEvent = function () {(0, r.Nn)(n._window, "click", n._onClick, !0);}, n._onClick = function (t) {n._allowClickEvent(), n._allowMouseEvent();var e = n.options.preventClickEventByCondition;(null == e ? void 0 : e(t)) || (t.stopPropagation(), t.preventDefault());}, n._onContextMenu = function (t) {n.options.preventRightClick ? n.onDragEnd(t) : t.preventDefault();}, n._passCallback = function () {};var s = [].concat(e),a = s[0];n._window = (0, r.l6)(a) ? a : (0, r.zk)(a), n.options = o({ checkInput: !1, container: a && !("document" in a) ? (0, r.zk)(a) : a, preventRightClick: !0, preventWheelClick: !0, preventClickEventOnDragStart: !1, preventClickEventOnDrag: !1, preventClickEventByCondition: null, preventDefault: !0, checkWindowBlur: !1, keepDragging: !1, pinchThreshold: 0, events: ["touch", "mouse"] }, i);var c = n.options,h = c.container,u = c.events,d = c.checkWindowBlur;if (n._useDrag = u.indexOf("drag") > -1, n._useTouch = u.indexOf("touch") > -1, n._useMouse = u.indexOf("mouse") > -1, n.targets = s, n._useDrag && s.forEach(function (t) {(0, r.W2)(t, "dragstart", n.onDragStart);}), n._useMouse && (s.forEach(function (t) {(0, r.W2)(t, "mousedown", n.onDragStart), (0, r.W2)(t, "mousemove", n._passCallback);}), (0, r.W2)(h, "contextmenu", n._onContextMenu)), d && (0, r.W2)((0, r.zk)(), "blur", n.onBlur), n._useTouch) {var g = { passive: !1 };s.forEach(function (t) {(0, r.W2)(t, "touchstart", n.onDragStart, g), (0, r.W2)(t, "touchmove", n._passCallback, g);});}return n;}return function (t, e) {function i() {this.constructor = t;}s(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());}(e, t), e.prototype.stop = function () {this.isDrag = !1, this.data = {}, this.clientStores = [], this.pinchFlag = !1, this.doubleFlag = !1, this.prevTime = 0, this.flag = !1, this._isIdle = !0, this._allowClickEvent(), this._dettachDragEvent(), this._isDragAPI = !1;}, e.prototype.getMovement = function (t) {return this.getCurrentStore().getMovement(t) + this.clientStores.slice(1).reduce(function (t, e) {return t + e.movement;}, 0);}, e.prototype.isDragging = function () {return this.isDrag;}, e.prototype.isIdle = function () {return this._isIdle;}, e.prototype.isFlag = function () {return this.flag;}, e.prototype.isPinchFlag = function () {return this.pinchFlag;}, e.prototype.isDoubleFlag = function () {return this.doubleFlag;}, e.prototype.isPinching = function () {return this.isPinch;}, e.prototype.scrollBy = function (t, e, i, n) {void 0 === n && (n = !0), this.flag && (this.clientStores[0].move(t, e), n && this.onDrag(i, !0));}, e.prototype.move = function (t, e) {var i = t[0],n = t[1],r = this.getCurrentStore().prevClients;return this.moveClients(r.map(function (t) {var e = t.clientX,r = t.clientY;return { clientX: e + i, clientY: r + n, originalClientX: e, originalClientY: r };}), e, !0);}, e.prototype.triggerDragStart = function (t) {this.onDragStart(t, !1);}, e.prototype.setEventData = function (t) {var e = this.data;for (var i in t) e[i] = t[i];return this;}, e.prototype.setEventDatas = function (t) {return this.setEventData(t);}, e.prototype.getCurrentEvent = function (t) {return void 0 === t && (t = this._prevInputEvent), o(o({ data: this.data, datas: this.data }, this._getPosition()), { movement: this.getMovement(), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: !1, inputEvent: t });}, e.prototype.getEventData = function () {return this.data;}, e.prototype.getEventDatas = function () {return this.data;}, e.prototype.unset = function () {var t = this,e = this.targets,i = this.options.container;this.off(), (0, r.Nn)(this._window, "blur", this.onBlur), this._useDrag && e.forEach(function (e) {(0, r.Nn)(e, "dragstart", t.onDragStart);}), this._useMouse && (e.forEach(function (e) {(0, r.Nn)(e, "mousedown", t.onDragStart);}), (0, r.Nn)(i, "contextmenu", this._onContextMenu)), this._useTouch && (e.forEach(function (e) {(0, r.Nn)(e, "touchstart", t.onDragStart);}), (0, r.Nn)(i, "touchstart", this.onDragStart)), this._prevInputEvent = null, this._allowClickEvent(), this._dettachDragEvent();}, e.prototype.onPinchStart = function (t) {var e = this,i = this.options.pinchThreshold;if (!(this.isDrag && this.getMovement() > i)) {var n = new p(l(t));this.pinchFlag = !0, this._addStore(n), !1 === this.emit("pinchStart", o(o({ data: this.data, datas: this.data, angle: n.getAngle(), touches: this.getCurrentStore().getPositions() }, n.getPosition()), { inputEvent: t, isTrusted: this._isTrusted, preventDefault: function () {t.preventDefault();}, preventDrag: function () {e._dragFlag = !1;} })) && (this.pinchFlag = !1);}}, e.prototype.onPinch = function (t, e) {if (this.flag && this.pinchFlag && !(e.length < 2)) {var i = this.getCurrentStore();this.isPinch = !0, this.emit("pinch", o(o({ data: this.data, datas: this.data, movement: this.getMovement(e), angle: i.getAngle(e), rotation: i.getRotation(e), touches: i.getPositions(e), scale: i.getScale(e), distance: i.getDistance(e) }, i.getPosition(e)), { inputEvent: t, isTrusted: this._isTrusted }));}}, e.prototype.onPinchEnd = function (t) {if (this.pinchFlag) {var e = this.isPinch;this.isPinch = !1, this.pinchFlag = !1;var i = this.getCurrentStore();this.emit("pinchEnd", o(o({ data: this.data, datas: this.data, isPinch: e, touches: i.getPositions() }, i.getPosition()), { inputEvent: t }));}}, e.prototype.getCurrentStore = function () {return this.clientStores[0];}, e.prototype.moveClients = function (t, e, i) {var n = this._getPosition(t, i),r = this.isDrag;(n.deltaX || n.deltaY) && (this.isDrag = !0);var s = !1;return !r && this.isDrag && (s = !0), o(o({ data: this.data, datas: this.data }, n), { movement: this.getMovement(t), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: !1, isMouseEvent: this._isMouseEvent, isSecondaryButton: this._isSecondaryButton, inputEvent: e, isTrusted: this._isTrusted, isFirstDrag: s });}, e.prototype._addStore = function (t) {this.clientStores.splice(0, 0, t);}, e.prototype._getPosition = function (t, e) {var i = this.getCurrentStore().getPosition(t, e),n = this.clientStores.slice(1).reduce(function (t, e) {var i = e.getPosition();return t.distX += i.distX, t.distY += i.distY, t;}, i),r = n.distX,s = n.distY;return o(o({}, i), { distX: r, distY: s });}, e.prototype._attchDragEvent = function () {var t = this._window,e = this.options.container,i = { passive: !1 };this._isDragAPI && ((0, r.W2)(e, "dragover", this.onDrag, i), (0, r.W2)(t, "dragend", this.onDragEnd)), this._useMouse && ((0, r.W2)(e, "mousemove", this.onDrag), (0, r.W2)(t, "mouseup", this.onDragEnd)), this._useTouch && ((0, r.W2)(e, "touchmove", this.onDrag, i), (0, r.W2)(t, "touchend", this.onDragEnd, i), (0, r.W2)(t, "touchcancel", this.onDragEnd, i));}, e.prototype._dettachDragEvent = function () {var t = this._window,e = this.options.container;this._isDragAPI && ((0, r.Nn)(e, "dragover", this.onDrag), (0, r.Nn)(t, "dragend", this.onDragEnd)), this._useMouse && ((0, r.Nn)(e, "mousemove", this.onDrag), (0, r.Nn)(t, "mouseup", this.onDragEnd)), this._useTouch && ((0, r.Nn)(e, "touchstart", this.onDragStart), (0, r.Nn)(e, "touchmove", this.onDrag), (0, r.Nn)(t, "touchend", this.onDragEnd), (0, r.Nn)(t, "touchcancel", this.onDragEnd));}, e.prototype._allowMouseEvent = function () {this._preventMouseEvent = !1, clearTimeout(this._preventMouseEventId);}, e;}(n.A);}, 2446: (t, e, i) => {"use strict";i.d(e, { R: () => c, k: () => l });var n = i(6639),r = i(7790),s = i(5888),o = i(4275);const a = ["log", "info", "warn", "error"];function l(t) {return a.includes(t);}class c {messages = {};splitInstance;element;contentElement;exportButton;focusButton;isVisible = !1;currentTypes = ["warn", "error"];get isInFocus() {return this._isInFocus;}set isInFocus(t) {this._isInFocus = t, this.focusButton?.toggleAttribute("disabled", t);}_isInFocus = !1;constructor() {this.draw();}draw() {this.element && this.element.remove(), this.element = (0, n.tT)(".inline-console-container", document.body, [(0, n.tT)(".non-console"), (0, n.tT)(".console-gutter"), (0, n.tT)(".console", { style: { minHeight: "27px" } }, [(0, n.tT)(".console-toolbar", [(0, n.tT)(".title", "Console"), (0, n.tT)("select.level", { list: [{ value: "log,info,warn,error", text: "All" }, { value: "warn,error", text: "Errors", selected: !0 }, { value: "log,info", text: "Log" }], events: { change: (t, e) => this.updateTypeFilter(e.value) } }), (0, n.tT)(".buttons", [(0, n.tT)(".icon.icon-save", { attr: { hidden: "true", disabled: "true", title: "Export Log" }, middleware: (t) => this.exportButton = t, events: { click: (t, e) => {e.hasAttribute("disabled") || this.export();} } }), (0, n.tT)(".icon.icon-clear", { attr: { title: "Clear Log" }, events: { click: () => this.clear() } }), (0, n.tT)(".icon.icon-full-screen2", { middleware: (t) => this.focusButton = t, attr: { title: "Expand Log", disabled: this.isInFocus }, events: { click: (t, e) => {e.hasAttribute("disabled") || this.expand();} } }), (0, n.tT)(".close.icon.icon-close", { attr: { title: "Hide Log" }, events: { click: () => this.toggle(!1) } })])]), (0, n.tT)(".console-content", { middleware: (t) => this.contentElement = t })])]), this.splitInstance = (0, s.A)({ rowGutters: [{ track: 1, element: this.element.querySelector(".console-gutter") }], rowMinSize: 27 }), thisVisual.host.downloadService.exportStatus().then((t) => {0 === t && this.exportButton.toggleAttribute("hidden", !1);});}updateTypeFilter(t) {this.currentTypes = t.split(","), this.contentElement.textContent = "", Object.keys(this.messages).forEach((t) => {this.currentTypes.some((e) => t.startsWith(e)) && this.messages[t].forEach((t) => this.renderMessage(t));});}addMessage(t, e) {if (!this.contentElement) return;(0, o.b)(e) && (e = { name: e.name, message: e.message, stack: e.stack, ...(e.cause ? { cause: e.cause } : {}) });const i = `${t}|${new Date().getTime()}`;this.messages[i] || (this.messages[i] = []), this.messages[i].push(e), this.exportButton.toggleAttribute("disabled", !1), this.currentTypes.find((e) => e == t) && this.renderMessage(e), this.toggle(!0);}renderMessage(t) {const e = 0 == this.contentElement.childElementCount,i = Math.abs(this.contentElement.scrollHeight - this.contentElement.scrollTop - this.contentElement.clientHeight) < 1;if ((0, o.b)(t)) (0, n.tT)(".json-formatter-row", this.contentElement, [(0, n.tT)("span.icon.icon-marker-error"), (0, n.tT)("span.json-formatter-error", t.stack)]);else {const e = new r.A(t, 0, { hoverPreviewEnabled: !1, animateClose: !1, animateOpen: !1, exposePath: !0, useToJSON: !1 }).render();this.contentElement.appendChild(e);}(e || i) && (this.contentElement.scrollTop = this.contentElement.scrollHeight);}export() {const t = JSON.stringify(this.messages, null, 2);thisVisual.host.downloadService.exportVisualsContentExtended(t, `log-${new Date().getTime()}.json`, "json", "Visual Log");}clear() {this.messages = {}, this.exportButton.toggleAttribute("disabled", !0), this.contentElement && (this.contentElement.textContent = "");}expand() {thisVisual.host.switchFocusModeState(!0), this.element.style.gridTemplateRows = "27px 8px auto";}toggle(t) {null == t && (t = !this.isVisible), t ? this.reveal() : this.conceal();}reveal(t = 400) {this.isVisible || (this.element.animate([{ bottom: "-100%" }, { bottom: 0 }], { duration: t, iterations: 1, easing: "ease-in-out", fill: "forwards" }), this.isVisible = !0);}conceal(t = 400) {this.isVisible && (this.element.animate([{ bottom: "-100%" }], { duration: t, iterations: 1, easing: "ease-in-out", fill: "forwards" }).onfinish = () => {this.isVisible = !1;});}remove() {this.conceal(400), setTimeout(() => {this.destroy();}, 450);}destroy() {this.messages = {}, this.splitInstance.destroy(), this.splitInstance = null, this.element?.remove(), this.element = null, this.focusButton = null, this.exportButton = null, this.contentElement = null;}}}, 2459: (t, e, i) => {"use strict";i.d(e, { G: () => o });var n = i(1807),r = i(8689),s = i(1171);class o {options;static ID = "licman";result = {};dialogHost;element;form;formFeedback;activationKey;constructor(t, e) {this.options = e, this.dialogHost = t.host, this.element = t.element, this.element.classList.add("licman-dialog"), this.draw();}aDom(t, e, i = !1) {return (0, n.tTh)("a" + (i ? ".btn" : ""), { attr: { href: e }, events: { click: (t) => {t.preventDefault(), this.result.targetUrl = e, this.setResult(), this.close();} } }, t);}draw() {const t = (0, n.tTh)(".sections" + (this.options.showAppSource && this.options.showOkviz ? ".dual" : ""), this.element);this.options.showOkviz && (0, n.tTh)(".section.section-okviz", t, this.getOKVIZSection()), this.options.showAppSource && (0, n.tTh)(".section.section-appsource", t, this.getAppSourceSection()), this.options.showOkviz && this.options.showAppSource && (0, n.tTh)(".help-section", this.element, [this.aDom("What's the difference?", s.lW)]);}getAppSourceSection() {return [(0, n.tTh)(".title", [(0, n.tTh)("h3", "Microsoft AppSource"), (0, n.tTh)(".appsource-badge", { attr: { title: "Get it from Microsoft AppSource" } })]), (0, n.tTh)(".content", [(0, n.tTh)("p", "Get a license from AppSource"), (0, n.tTh)(".top-link", [this.aDom("appsource.microsoft.com", this.options.pbiviz.visual.appSourcePurchaseUrl)]), (0, n.tTh)("p.tips", [(0, n.tTh)("span", "If you have already purchased a license but it does not work, please visit our "), this.aDom("documentation page.", s.tw)])])];}getOKVIZSection() {return [(0, n.tTh)(".title", [(0, n.tTh)(".okviz-logo.icon.icon-okviz-h", { attr: { title: "OKVIZ" } })]), (0, n.tTh)(".content", [(0, n.tTh)("p", "Get a new license from OKVIZ"), (0, n.tTh)(".top-link", [this.aDom("Get License Now", this.options.pbiviz.visual.okvizPurchaseUrl, !0)]), ...(this.options.showOkvizActivation ? [(0, n.tTh)("p", "or Activate an existing license:"), ...(this.options.entraToken ? [(0, n.tTh)("form", { middleware: (t) => this.form = t }, [(0, n.tTh)("textarea", { attr: { placeholder: "License Activation Key", rows: 5, cols: 40 }, events: { input: () => this.validateForm() } }), (0, n.tTh)(".activate.btn.disabled", { events: { click: (t, e) => {e.classList.contains("disabled") || this.activateOKVIZLicense();} } }, "Activate")]), (0, n.tTh)(".form-feedback", { middleware: (t) => this.formFeedback = t, style: { display: "none" } })] : [(0, n.tTh)("p.error-token", [(0, n.tTh)("span", "You need to allow this visual to obtain your Microsoft Entra ID to check and activate a license. "), this.aDom("Learn more", s.ot)])])] : [(0, n.tTh)("p.tips", [(0, n.tTh)("span", "If you have already purchased a license but it does not work, please "), this.aDom("contact us.", this.options.pbiviz.visual.contactUrl)])])])];}validateForm() {this.activationKey = this.form.querySelector("textarea").value, this.form.querySelector(".btn.activate").classList.toggle("disabled", !this.activationKey);}resetForm() {this.result = {}, this.formFeedback.style.display = "none", this.formFeedback.classList.remove("success", "fail"), this.form.reset(), this.form.style.display = "block", this.form.querySelector("textarea").focus();}async activateOKVIZLicense() {let t;this.form.style.display = "none", this.formFeedback.style.display = "block", this.formFeedback.innerText = "Activating...";try {t = await r.U.ApiActivateLicense(this.options.pbiviz.visual.name, this.options.entraToken, this.activationKey);} catch (t) {}t ? (this.result = { okviz: { license: t } }, this.setResult(), this.formFeedback.classList.add("success"), this.formFeedback.innerText = "License activated on this tenant!", window.setTimeout(() => this.close(), 3e3)) : (this.formFeedback.classList.add("fail"), this.formFeedback.innerText = "License already activated or invalid key.", window.setTimeout(() => this.resetForm(), 3e3));}setResult() {this.dialogHost.setResult(this.result);}close() {this.dialogHost.close(0);}}globalThis.dialogRegistry = globalThis.dialogRegistry || {}, globalThis.dialogRegistry[o.ID] = o;}, 2484: (t, e, i) => {"use strict";i.d(e, { AN: () => s, Vu: () => a, bJ: () => o });var n = i(5953),r = i(7345);function s(t) {return t && "object" == typeof t && ["title", "status"].every((e) => e in t);}function o(t) {return t instanceof Error || t && t.message;}function a(t) {if (t.instance) for (const e in n.Kw) if (n.Kw[e].code === parseInt(t.instance)) return (0, r.T)(e, t.detail);return (0, r.T)("UNKNOWN", t.detail);}}, 2518: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(123);function r(t) {return this.tween("text", "function" == typeof t ? function (t) {return function () {var e = t(this);this.textContent = null == e ? "" : e;};}((0, n.J)(this, "text", t)) : function (t) {return function () {this.textContent = t;};}(null == t ? "" : t + ""));}}, 2525: (t, e, i) => {"use strict";const n = i(7638),r = i(560);t.exports = (t, e, i) => {const s = [];let o = null,a = null;const l = t.sort((t, e) => r(t, e, i));for (const t of l) n(t, e, i) ? (a = t, o || (o = t)) : (a && s.push([o, a]), a = null, o = null);o && s.push([o, null]);const c = [];for (const [t, e] of s) t === e ? c.push(t) : e || t !== l[0] ? e ? t === l[0] ? c.push(`<=${e}`) : c.push(`${t} - ${e}`) : c.push(`>=${t}`) : c.push("*");const h = c.join(" || "),u = "string" == typeof e.raw ? e.raw : String(e);return h.length < u.length ? h : e;};}, 2534: (t, e, i) => {"use strict";i.d(e, { BN: () => r, E3: () => n, xT: () => c });for (var n = { 8: "Backspace", 9: "Tab", 10: "Enter", 12: "NumLock", 13: "Enter", 16: "Shift", 17: "Control", 18: "Alt", 20: "CapsLock", 27: "Escape", 32: " ", 33: "PageUp", 34: "PageDown", 35: "End", 36: "Home", 37: "ArrowLeft", 38: "ArrowUp", 39: "ArrowRight", 40: "ArrowDown", 44: "PrintScreen", 45: "Insert", 46: "Delete", 59: ";", 61: "=", 91: "Meta", 92: "Meta", 106: "*", 107: "+", 108: ",", 109: "-", 110: ".", 111: "/", 144: "NumLock", 145: "ScrollLock", 160: "Shift", 161: "Shift", 162: "Control", 163: "Control", 164: "Alt", 165: "Alt", 173: "-", 186: ";", 187: "=", 188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\", 221: "]", 222: "'" }, r = { 48: ")", 49: "!", 50: "@", 51: "#", 52: "$", 53: "%", 54: "^", 55: "&", 56: "*", 57: "(", 59: ":", 61: "+", 173: "_", 186: ":", 187: "+", 188: "<", 189: "_", 190: ">", 191: "?", 192: "~", 219: "{", 220: "|", 221: "}", 222: '"' }, s = "undefined" != typeof navigator && /Mac/.test(navigator.platform), o = "undefined" != typeof navigator && /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent), a = 0; a < 10; a++) n[48 + a] = n[96 + a] = String(a);for (a = 1; a <= 24; a++) n[a + 111] = "F" + a;for (a = 65; a <= 90; a++) n[a] = String.fromCharCode(a + 32), r[a] = String.fromCharCode(a);for (var l in n) r.hasOwnProperty(l) || (r[l] = n[l]);function c(t) {var e = !(s && t.metaKey && t.shiftKey && !t.ctrlKey && !t.altKey || o && t.shiftKey && t.key && 1 == t.key.length || "Unidentified" == t.key) && t.key || (t.shiftKey ? r : n)[t.keyCode] || t.key || "Unidentified";return "Esc" == e && (e = "Escape"), "Del" == e && (e = "Delete"), "Left" == e && (e = "ArrowLeft"), "Up" == e && (e = "ArrowUp"), "Right" == e && (e = "ArrowRight"), "Down" == e && (e = "ArrowDown"), e;}}, 2535: (t, e, i) => {"use strict";i.d(e, { A: () => s, L: () => o });var n = i(6732),r = i(1882);function s() {return new r.LN(this._enter || this._groups.map(n.A), this._parents);}function o(t, e) {this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = e;}o.prototype = { constructor: o, appendChild: function (t) {return this._parent.insertBefore(t, this._next);}, insertBefore: function (t, e) {return this._parent.insertBefore(t, e);}, querySelector: function (t) {return this._parent.querySelector(t);}, querySelectorAll: function (t) {return this._parent.querySelectorAll(t);} };}, 2569: (t, e) => {e.read = function (t, e, i, n, r) {var s,o,a = 8 * r - n - 1,l = (1 << a) - 1,c = l >> 1,h = -7,u = i ? r - 1 : 0,d = i ? -1 : 1,p = t[e + u];for (u += d, s = p & (1 << -h) - 1, p >>= -h, h += a; h > 0; s = 256 * s + t[e + u], u += d, h -= 8);for (o = s & (1 << -h) - 1, s >>= -h, h += n; h > 0; o = 256 * o + t[e + u], u += d, h -= 8);if (0 === s) s = 1 - c;else {if (s === l) return o ? NaN : 1 / 0 * (p ? -1 : 1);o += Math.pow(2, n), s -= c;}return (p ? -1 : 1) * o * Math.pow(2, s - n);}, e.write = function (t, e, i, n, r, s) {var o,a,l,c = 8 * s - r - 1,h = (1 << c) - 1,u = h >> 1,d = 23 === r ? Math.pow(2, -24) - Math.pow(2, -77) : 0,p = n ? 0 : s - 1,f = n ? 1 : -1,g = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (a = isNaN(e) ? 1 : 0, o = h) : (o = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -o)) < 1 && (o--, l *= 2), (e += o + u >= 1 ? d / l : d * Math.pow(2, 1 - u)) * l >= 2 && (o++, l /= 2), o + u >= h ? (a = 0, o = h) : o + u >= 1 ? (a = (e * l - 1) * Math.pow(2, r), o += u) : (a = e * Math.pow(2, u - 1) * Math.pow(2, r), o = 0)); r >= 8; t[i + p] = 255 & a, p += f, a /= 256, r -= 8);for (o = o << r | a, c += r; c > 0; t[i + p] = 255 & o, p += f, o /= 256, c -= 8);t[i + p - f] |= 128 * g;};}, 2582: (t, e, i) => {"use strict";function n() {this.nextSibling && this.parentNode.appendChild(this);}function r() {return this.each(n);}i.d(e, { A: () => r });}, 2598: (t, e, i) => {"use strict";const n = i(3720),{ MAX_LENGTH: r, CHAR_BACKSLASH: s, CHAR_BACKTICK: o, CHAR_COMMA: a, CHAR_DOT: l, CHAR_LEFT_PARENTHESES: c, CHAR_RIGHT_PARENTHESES: h, CHAR_LEFT_CURLY_BRACE: u, CHAR_RIGHT_CURLY_BRACE: d, CHAR_LEFT_SQUARE_BRACKET: p, CHAR_RIGHT_SQUARE_BRACKET: f, CHAR_DOUBLE_QUOTE: g, CHAR_SINGLE_QUOTE: m, CHAR_NO_BREAK_SPACE: v, CHAR_ZERO_WIDTH_NOBREAK_SPACE: y } = i(8776);t.exports = (t, e = {}) => {if ("string" != typeof t) throw new TypeError("Expected a string");const i = e || {},b = "number" == typeof i.maxLength ? Math.min(r, i.maxLength) : r;if (t.length > b) throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${b})`);const w = { type: "root", input: t, nodes: [] },x = [w];let S = w,E = w,C = 0;const k = t.length;let T,A = 0,M = 0;const _ = () => t[A++],P = (t) => {if ("text" === t.type && "dot" === E.type && (E.type = "text"), !E || "text" !== E.type || "text" !== t.type) return S.nodes.push(t), t.parent = S, t.prev = E, E = t, t;E.value += t.value;};for (P({ type: "bos" }); A < k;) if (S = x[x.length - 1], T = _(), T !== y && T !== v) if (T !== s) {if (T !== f) {if (T === p) {let t;for (C++; A < k && (t = _());) if (T += t, t !== p) {if (t !== s) {if (t === f && (C--, 0 === C)) break;} else T += _();} else C++;P({ type: "text", value: T });continue;}if (T !== c) {if (T !== h) {if (T === g || T === m || T === o) {const t = T;let i;for (!0 !== e.keepQuotes && (T = ""); A < k && (i = _());) if (i !== s) {if (i === t) {!0 === e.keepQuotes && (T += i);break;}T += i;} else T += i + _();P({ type: "text", value: T });continue;}if (T === u) {M++;const t = E.value && "$" === E.value.slice(-1) || !0 === S.dollar;S = P({ type: "brace", open: !0, close: !1, dollar: t, depth: M, commas: 0, ranges: 0, nodes: [] }), x.push(S), P({ type: "open", value: T });continue;}if (T === d) {if ("brace" !== S.type) {P({ type: "text", value: T });continue;}const t = "close";S = x.pop(), S.close = !0, P({ type: t, value: T }), M--, S = x[x.length - 1];continue;}if (T === a && M > 0) {if (S.ranges > 0) {S.ranges = 0;const t = S.nodes.shift();S.nodes = [t, { type: "text", value: n(S) }];}P({ type: "comma", value: T }), S.commas++;} else {if (T === l && M > 0 && 0 === S.commas) {const t = S.nodes;if (0 === M || 0 === t.length) {P({ type: "text", value: T });continue;}if ("dot" === E.type) {if (S.range = [], E.value += T, E.type = "range", 3 !== S.nodes.length && 5 !== S.nodes.length) {S.invalid = !0, S.ranges = 0, E.type = "text";continue;}S.ranges++, S.args = [];continue;}if ("range" === E.type) {t.pop();const e = t[t.length - 1];e.value += E.value + T, E = e, S.ranges--;continue;}P({ type: "dot", value: T });continue;}P({ type: "text", value: T });}} else {if ("paren" !== S.type) {P({ type: "text", value: T });continue;}S = x.pop(), P({ type: "text", value: T }), S = x[x.length - 1];}} else S = P({ type: "paren", nodes: [] }), x.push(S), P({ type: "text", value: T });} else P({ type: "text", value: "\\" + T });} else P({ type: "text", value: (e.keepEscaping ? T : "") + _() });do {if (S = x.pop(), "root" !== S.type) {S.nodes.forEach((t) => {t.nodes || ("open" === t.type && (t.isOpen = !0), "close" === t.type && (t.isClose = !0), t.nodes || (t.type = "text"), t.invalid = !0);});const t = x[x.length - 1],e = t.nodes.indexOf(S);t.nodes.splice(e, 1, ...S.nodes);}} while (x.length > 0);return P({ type: "eos" }), w;};}, 2608: (t, e, i) => {"use strict";const n = i(280),{ CHAR_ASTERISK: r, CHAR_AT: s, CHAR_BACKWARD_SLASH: o, CHAR_COMMA: a, CHAR_DOT: l, CHAR_EXCLAMATION_MARK: c, CHAR_FORWARD_SLASH: h, CHAR_LEFT_CURLY_BRACE: u, CHAR_LEFT_PARENTHESES: d, CHAR_LEFT_SQUARE_BRACKET: p, CHAR_PLUS: f, CHAR_QUESTION_MARK: g, CHAR_RIGHT_CURLY_BRACE: m, CHAR_RIGHT_PARENTHESES: v, CHAR_RIGHT_SQUARE_BRACKET: y } = i(3940),b = (t) => t === h || t === o,w = (t) => {!0 !== t.isPrefix && (t.depth = t.isGlobstar ? 1 / 0 : 1);};t.exports = (t, e) => {const i = e || {},x = t.length - 1,S = !0 === i.parts || !0 === i.scanToEnd,E = [],C = [],k = [];let T,A,M = t,_ = -1,P = 0,D = 0,O = !1,I = !1,F = !1,R = !1,L = !1,N = !1,V = !1,B = !1,j = !1,z = !1,U = 0,H = { value: "", depth: 0, isGlob: !1 };const q = () => _ >= x,$ = () => M.charCodeAt(_ + 1),G = () => (T = A, M.charCodeAt(++_));for (; _ < x;) {let t;if (A = G(), A !== o) {if (!0 === N || A === u) {for (U++; !0 !== q() && (A = G());) if (A !== o) {if (A !== u) {if (!0 !== N && A === l && (A = G()) === l) {if (O = H.isBrace = !0, F = H.isGlob = !0, z = !0, !0 === S) continue;break;}if (!0 !== N && A === a) {if (O = H.isBrace = !0, F = H.isGlob = !0, z = !0, !0 === S) continue;break;}if (A === m && (U--, 0 === U)) {N = !1, O = H.isBrace = !0, z = !0;break;}} else U++;} else V = H.backslashes = !0, G();if (!0 === S) continue;break;}if (A !== h) {if (!0 !== i.noext && !0 == (A === f || A === s || A === r || A === g || A === c) && $() === d) {if (F = H.isGlob = !0, R = H.isExtglob = !0, z = !0, A === c && _ === P && (j = !0), !0 === S) {for (; !0 !== q() && (A = G());) if (A !== o) {if (A === v) {F = H.isGlob = !0, z = !0;break;}} else V = H.backslashes = !0, A = G();continue;}break;}if (A === r) {if (T === r && (L = H.isGlobstar = !0), F = H.isGlob = !0, z = !0, !0 === S) continue;break;}if (A === g) {if (F = H.isGlob = !0, z = !0, !0 === S) continue;break;}if (A === p) {for (; !0 !== q() && (t = G());) if (t !== o) {if (t === y) {I = H.isBracket = !0, F = H.isGlob = !0, z = !0;break;}} else V = H.backslashes = !0, G();if (!0 === S) continue;break;}if (!0 === i.nonegate || A !== c || _ !== P) {if (!0 !== i.noparen && A === d) {if (F = H.isGlob = !0, !0 === S) {for (; !0 !== q() && (A = G());) if (A !== d) {if (A === v) {z = !0;break;}} else V = H.backslashes = !0, A = G();continue;}break;}if (!0 === F) {if (z = !0, !0 === S) continue;break;}} else B = H.negated = !0, P++;} else {if (E.push(_), C.push(H), H = { value: "", depth: 0, isGlob: !1 }, !0 === z) continue;if (T === l && _ === P + 1) {P += 2;continue;}D = _ + 1;}} else V = H.backslashes = !0, A = G(), A === u && (N = !0);}!0 === i.noext && (R = !1, F = !1);let W = M,K = "",Z = "";P > 0 && (K = M.slice(0, P), M = M.slice(P), D -= P), W && !0 === F && D > 0 ? (W = M.slice(0, D), Z = M.slice(D)) : !0 === F ? (W = "", Z = M) : W = M, W && "" !== W && "/" !== W && W !== M && b(W.charCodeAt(W.length - 1)) && (W = W.slice(0, -1)), !0 === i.unescape && (Z && (Z = n.removeBackslashes(Z)), W && !0 === V && (W = n.removeBackslashes(W)));const Y = { prefix: K, input: t, start: P, base: W, glob: Z, isBrace: O, isBracket: I, isGlob: F, isExtglob: R, isGlobstar: L, negated: B, negatedExtglob: j };if (!0 === i.tokens && (Y.maxDepth = 0, b(A) || C.push(H), Y.tokens = C), !0 === i.parts || !0 === i.tokens) {let e;for (let n = 0; n < E.length; n++) {const r = e ? e + 1 : P,s = E[n],o = t.slice(r, s);i.tokens && (0 === n && 0 !== P ? (C[n].isPrefix = !0, C[n].value = K) : C[n].value = o, w(C[n]), Y.maxDepth += C[n].depth), 0 === n && "" === o || k.push(o), e = s;}if (e && e + 1 < t.length) {const n = t.slice(e + 1);k.push(n), i.tokens && (C[C.length - 1].value = n, w(C[C.length - 1]), Y.maxDepth += C[C.length - 1].depth);}Y.slashes = E, Y.parts = k;}return Y;};}, 2629: (t, e, i) => {"use strict";i.d(e, { a: () => s });var n = i(6639),r = i(4673);class s extends r.L {get className() {return "icon-picker";}drawDialogContent(t) {(0, n.tT)("ul.icons-list", t, this.options.values.map((t) => (0, n.tT)(`li.icon-${t}`, { events: { click: () => this.change(t) } })));}updateCell(t, e) {t.querySelector(".icon-holder")?.remove(), (0, n.tT)(`.icon-holder.icon-${e}`, t);}}}, 2649: (t, e, i) => {"use strict";i.d(e, { W: () => o });var n = i(6639),r = i(4810),s = i(2140);class o extends s.c {options;constructor(t) {t.optionType = "select", super(t), Object.assign(this, t);}render(t) {super.render(t);const e = this.displayValue;(0, n.tT)("select.oop-select", this.element, { list: [{ value: r.qk, text: "(Mixed)", disabled: !0, hidden: !0 }, ...Object.keys(this.options).map((t) => ({ value: t, text: this.options[t].title, selected: t === e }))], events: { change: (t, e) => {this.value = e.value, this.onChange && this.onChange(this.value);} } });}refresh() {const t = this.element.querySelector("select");if (!t) return;const e = this.isMixed,i = t.querySelector(`option[value="${r.qk}"]`);i && (i.hidden = !e), t.value = e ? r.qk : this.displayValue ?? "";}}}, 2672: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(6732),r = i(1882);function s() {return new r.LN(this._exit || this._groups.map(n.A), this._parents);}}, 2698: (t, e, i) => {"use strict";function n(t, e = "algorithm.name") {return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`);}function r(t, e) {return t.name === e;}function s(t) {return parseInt(t.name.slice(4), 10);}function o(t, e, ...i) {switch (e) {case "HS256":case "HS384":case "HS512":{if (!r(t.algorithm, "HMAC")) throw n("HMAC");const i = parseInt(e.slice(2), 10);if (s(t.algorithm.hash) !== i) throw n(`SHA-${i}`, "algorithm.hash");break;}case "RS256":case "RS384":case "RS512":{if (!r(t.algorithm, "RSASSA-PKCS1-v1_5")) throw n("RSASSA-PKCS1-v1_5");const i = parseInt(e.slice(2), 10);if (s(t.algorithm.hash) !== i) throw n(`SHA-${i}`, "algorithm.hash");break;}case "PS256":case "PS384":case "PS512":{if (!r(t.algorithm, "RSA-PSS")) throw n("RSA-PSS");const i = parseInt(e.slice(2), 10);if (s(t.algorithm.hash) !== i) throw n(`SHA-${i}`, "algorithm.hash");break;}case "EdDSA":if ("Ed25519" !== t.algorithm.name && "Ed448" !== t.algorithm.name) throw n("Ed25519 or Ed448");break;case "Ed25519":if (!r(t.algorithm, "Ed25519")) throw n("Ed25519");break;case "ES256":case "ES384":case "ES512":{if (!r(t.algorithm, "ECDSA")) throw n("ECDSA");const i = function (t) {switch (t) {case "ES256":return "P-256";case "ES384":return "P-384";case "ES512":return "P-521";default:throw new Error("unreachable");}}(e);if (t.algorithm.namedCurve !== i) throw n(i, "algorithm.namedCurve");break;}default:throw new TypeError("CryptoKey does not support this operation");}!function (t, e) {if (e.length && !e.some((e) => t.usages.includes(e))) {let t = "CryptoKey does not support this operation, its usages must include ";if (e.length > 2) {const i = e.pop();t += `one of ${e.join(", ")}, or ${i}.`;} else 2 === e.length ? t += `one of ${e[0]} or ${e[1]}.` : t += `${e[0]}.`;throw new TypeError(t);}}(t, i);}i.d(e, { Y: () => o });}, 2741: (t, e, i) => {"use strict";const n = i(4780),r = i(2569),s = "function" == typeof Symbol && "function" == typeof Symbol.for ? Symbol.for("nodejs.util.inspect.custom") : null;e.hp = l, e.IS = 50;const o = 2147483647;function a(t) {if (t > o) throw new RangeError('The value "' + t + '" is invalid for option "size"');const e = new Uint8Array(t);return Object.setPrototypeOf(e, l.prototype), e;}function l(t, e, i) {if ("number" == typeof t) {if ("string" == typeof e) throw new TypeError('The "string" argument must be of type string. Received type number');return u(t);}return c(t, e, i);}function c(t, e, i) {if ("string" == typeof t) return function (t, e) {if ("string" == typeof e && "" !== e || (e = "utf8"), !l.isEncoding(e)) throw new TypeError("Unknown encoding: " + e);const i = 0 | g(t, e);let n = a(i);const r = n.write(t, e);return r !== i && (n = n.slice(0, r)), n;}(t, e);if (ArrayBuffer.isView(t)) return function (t) {if (Z(t, Uint8Array)) {const e = new Uint8Array(t);return p(e.buffer, e.byteOffset, e.byteLength);}return d(t);}(t);if (null == t) throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof t);if (Z(t, ArrayBuffer) || t && Z(t.buffer, ArrayBuffer)) return p(t, e, i);if ("undefined" != typeof SharedArrayBuffer && (Z(t, SharedArrayBuffer) || t && Z(t.buffer, SharedArrayBuffer))) return p(t, e, i);if ("number" == typeof t) throw new TypeError('The "value" argument must not be of type number. Received type number');const n = t.valueOf && t.valueOf();if (null != n && n !== t) return l.from(n, e, i);const r = function (t) {if (l.isBuffer(t)) {const e = 0 | f(t.length),i = a(e);return 0 === i.length || t.copy(i, 0, 0, e), i;}return void 0 !== t.length ? "number" != typeof t.length || Y(t.length) ? a(0) : d(t) : "Buffer" === t.type && Array.isArray(t.data) ? d(t.data) : void 0;}(t);if (r) return r;if ("undefined" != typeof Symbol && null != Symbol.toPrimitive && "function" == typeof t[Symbol.toPrimitive]) return l.from(t[Symbol.toPrimitive]("string"), e, i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof t);}function h(t) {if ("number" != typeof t) throw new TypeError('"size" argument must be of type number');if (t < 0) throw new RangeError('The value "' + t + '" is invalid for option "size"');}function u(t) {return h(t), a(t < 0 ? 0 : 0 | f(t));}function d(t) {const e = t.length < 0 ? 0 : 0 | f(t.length),i = a(e);for (let n = 0; n < e; n += 1) i[n] = 255 & t[n];return i;}function p(t, e, i) {if (e < 0 || t.byteLength < e) throw new RangeError('"offset" is outside of buffer bounds');if (t.byteLength < e + (i || 0)) throw new RangeError('"length" is outside of buffer bounds');let n;return n = void 0 === e && void 0 === i ? new Uint8Array(t) : void 0 === i ? new Uint8Array(t, e) : new Uint8Array(t, e, i), Object.setPrototypeOf(n, l.prototype), n;}function f(t) {if (t >= o) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + o.toString(16) + " bytes");return 0 | t;}function g(t, e) {if (l.isBuffer(t)) return t.length;if (ArrayBuffer.isView(t) || Z(t, ArrayBuffer)) return t.byteLength;if ("string" != typeof t) throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof t);const i = t.length,n = arguments.length > 2 && !0 === arguments[2];if (!n && 0 === i) return 0;let r = !1;for (;;) switch (e) {case "ascii":case "latin1":case "binary":return i;case "utf8":case "utf-8":return G(t).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2 * i;case "hex":return i >>> 1;case "base64":return W(t).length;default:if (r) return n ? -1 : G(t).length;e = ("" + e).toLowerCase(), r = !0;}}function m(t, e, i) {let n = !1;if ((void 0 === e || e < 0) && (e = 0), e > this.length) return "";if ((void 0 === i || i > this.length) && (i = this.length), i <= 0) return "";if ((i >>>= 0) <= (e >>>= 0)) return "";for (t || (t = "utf8");;) switch (t) {case "hex":return P(this, e, i);case "utf8":case "utf-8":return T(this, e, i);case "ascii":return M(this, e, i);case "latin1":case "binary":return _(this, e, i);case "base64":return k(this, e, i);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return D(this, e, i);default:if (n) throw new TypeError("Unknown encoding: " + t);t = (t + "").toLowerCase(), n = !0;}}function v(t, e, i) {const n = t[e];t[e] = t[i], t[i] = n;}function y(t, e, i, n, r) {if (0 === t.length) return -1;if ("string" == typeof i ? (n = i, i = 0) : i > 2147483647 ? i = 2147483647 : i < -2147483648 && (i = -2147483648), Y(i = +i) && (i = r ? 0 : t.length - 1), i < 0 && (i = t.length + i), i >= t.length) {if (r) return -1;i = t.length - 1;} else if (i < 0) {if (!r) return -1;i = 0;}if ("string" == typeof e && (e = l.from(e, n)), l.isBuffer(e)) return 0 === e.length ? -1 : b(t, e, i, n, r);if ("number" == typeof e) return e &= 255, "function" == typeof Uint8Array.prototype.indexOf ? r ? Uint8Array.prototype.indexOf.call(t, e, i) : Uint8Array.prototype.lastIndexOf.call(t, e, i) : b(t, [e], i, n, r);throw new TypeError("val must be string, number or Buffer");}function b(t, e, i, n, r) {let s,o = 1,a = t.length,l = e.length;if (void 0 !== n && ("ucs2" === (n = String(n).toLowerCase()) || "ucs-2" === n || "utf16le" === n || "utf-16le" === n)) {if (t.length < 2 || e.length < 2) return -1;o = 2, a /= 2, l /= 2, i /= 2;}function c(t, e) {return 1 === o ? t[e] : t.readUInt16BE(e * o);}if (r) {let n = -1;for (s = i; s < a; s++) if (c(t, s) === c(e, -1 === n ? 0 : s - n)) {if (-1 === n && (n = s), s - n + 1 === l) return n * o;} else -1 !== n && (s -= s - n), n = -1;} else for (i + l > a && (i = a - l), s = i; s >= 0; s--) {let i = !0;for (let n = 0; n < l; n++) if (c(t, s + n) !== c(e, n)) {i = !1;break;}if (i) return s;}return -1;}function w(t, e, i, n) {i = Number(i) || 0;const r = t.length - i;n ? (n = Number(n)) > r && (n = r) : n = r;const s = e.length;let o;for (n > s / 2 && (n = s / 2), o = 0; o < n; ++o) {const n = parseInt(e.substr(2 * o, 2), 16);if (Y(n)) return o;t[i + o] = n;}return o;}function x(t, e, i, n) {return K(G(e, t.length - i), t, i, n);}function S(t, e, i, n) {return K(function (t) {const e = [];for (let i = 0; i < t.length; ++i) e.push(255 & t.charCodeAt(i));return e;}(e), t, i, n);}function E(t, e, i, n) {return K(W(e), t, i, n);}function C(t, e, i, n) {return K(function (t, e) {let i, n, r;const s = [];for (let o = 0; o < t.length && !((e -= 2) < 0); ++o) i = t.charCodeAt(o), n = i >> 8, r = i % 256, s.push(r), s.push(n);return s;}(e, t.length - i), t, i, n);}function k(t, e, i) {return 0 === e && i === t.length ? n.fromByteArray(t) : n.fromByteArray(t.slice(e, i));}function T(t, e, i) {i = Math.min(t.length, i);const n = [];let r = e;for (; r < i;) {const e = t[r];let s = null,o = e > 239 ? 4 : e > 223 ? 3 : e > 191 ? 2 : 1;if (r + o <= i) {let i, n, a, l;switch (o) {case 1:e < 128 && (s = e);break;case 2:i = t[r + 1], 128 == (192 & i) && (l = (31 & e) << 6 | 63 & i, l > 127 && (s = l));break;case 3:i = t[r + 1], n = t[r + 2], 128 == (192 & i) && 128 == (192 & n) && (l = (15 & e) << 12 | (63 & i) << 6 | 63 & n, l > 2047 && (l < 55296 || l > 57343) && (s = l));break;case 4:i = t[r + 1], n = t[r + 2], a = t[r + 3], 128 == (192 & i) && 128 == (192 & n) && 128 == (192 & a) && (l = (15 & e) << 18 | (63 & i) << 12 | (63 & n) << 6 | 63 & a, l > 65535 && l < 1114112 && (s = l));}}null === s ? (s = 65533, o = 1) : s > 65535 && (s -= 65536, n.push(s >>> 10 & 1023 | 55296), s = 56320 | 1023 & s), n.push(s), r += o;}return function (t) {const e = t.length;if (e <= A) return String.fromCharCode.apply(String, t);let i = "",n = 0;for (; n < e;) i += String.fromCharCode.apply(String, t.slice(n, n += A));return i;}(n);}l.TYPED_ARRAY_SUPPORT = function () {try {const t = new Uint8Array(1),e = { foo: function () {return 42;} };return Object.setPrototypeOf(e, Uint8Array.prototype), Object.setPrototypeOf(t, e), 42 === t.foo();} catch (t) {return !1;}}(), l.TYPED_ARRAY_SUPPORT || "undefined" == typeof console || "function" != typeof console.error || console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."), Object.defineProperty(l.prototype, "parent", { enumerable: !0, get: function () {if (l.isBuffer(this)) return this.buffer;} }), Object.defineProperty(l.prototype, "offset", { enumerable: !0, get: function () {if (l.isBuffer(this)) return this.byteOffset;} }), l.poolSize = 8192, l.from = function (t, e, i) {return c(t, e, i);}, Object.setPrototypeOf(l.prototype, Uint8Array.prototype), Object.setPrototypeOf(l, Uint8Array), l.alloc = function (t, e, i) {return function (t, e, i) {return h(t), t <= 0 ? a(t) : void 0 !== e ? "string" == typeof i ? a(t).fill(e, i) : a(t).fill(e) : a(t);}(t, e, i);}, l.allocUnsafe = function (t) {return u(t);}, l.allocUnsafeSlow = function (t) {return u(t);}, l.isBuffer = function (t) {return null != t && !0 === t._isBuffer && t !== l.prototype;}, l.compare = function (t, e) {if (Z(t, Uint8Array) && (t = l.from(t, t.offset, t.byteLength)), Z(e, Uint8Array) && (e = l.from(e, e.offset, e.byteLength)), !l.isBuffer(t) || !l.isBuffer(e)) throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if (t === e) return 0;let i = t.length,n = e.length;for (let r = 0, s = Math.min(i, n); r < s; ++r) if (t[r] !== e[r]) {i = t[r], n = e[r];break;}return i < n ? -1 : n < i ? 1 : 0;}, l.isEncoding = function (t) {switch (String(t).toLowerCase()) {case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return !0;default:return !1;}}, l.concat = function (t, e) {if (!Array.isArray(t)) throw new TypeError('"list" argument must be an Array of Buffers');if (0 === t.length) return l.alloc(0);let i;if (void 0 === e) for (e = 0, i = 0; i < t.length; ++i) e += t[i].length;const n = l.allocUnsafe(e);let r = 0;for (i = 0; i < t.length; ++i) {let e = t[i];if (Z(e, Uint8Array)) r + e.length > n.length ? (l.isBuffer(e) || (e = l.from(e)), e.copy(n, r)) : Uint8Array.prototype.set.call(n, e, r);else {if (!l.isBuffer(e)) throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n, r);}r += e.length;}return n;}, l.byteLength = g, l.prototype._isBuffer = !0, l.prototype.swap16 = function () {const t = this.length;if (t % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");for (let e = 0; e < t; e += 2) v(this, e, e + 1);return this;}, l.prototype.swap32 = function () {const t = this.length;if (t % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");for (let e = 0; e < t; e += 4) v(this, e, e + 3), v(this, e + 1, e + 2);return this;}, l.prototype.swap64 = function () {const t = this.length;if (t % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");for (let e = 0; e < t; e += 8) v(this, e, e + 7), v(this, e + 1, e + 6), v(this, e + 2, e + 5), v(this, e + 3, e + 4);return this;}, l.prototype.toString = function () {const t = this.length;return 0 === t ? "" : 0 === arguments.length ? T(this, 0, t) : m.apply(this, arguments);}, l.prototype.toLocaleString = l.prototype.toString, l.prototype.equals = function (t) {if (!l.isBuffer(t)) throw new TypeError("Argument must be a Buffer");return this === t || 0 === l.compare(this, t);}, l.prototype.inspect = function () {let t = "";const i = e.IS;return t = this.toString("hex", 0, i).replace(/(.{2})/g, "$1 ").trim(), this.length > i && (t += " ... "), "<Buffer " + t + ">";}, s && (l.prototype[s] = l.prototype.inspect), l.prototype.compare = function (t, e, i, n, r) {if (Z(t, Uint8Array) && (t = l.from(t, t.offset, t.byteLength)), !l.isBuffer(t)) throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof t);if (void 0 === e && (e = 0), void 0 === i && (i = t ? t.length : 0), void 0 === n && (n = 0), void 0 === r && (r = this.length), e < 0 || i > t.length || n < 0 || r > this.length) throw new RangeError("out of range index");if (n >= r && e >= i) return 0;if (n >= r) return -1;if (e >= i) return 1;if (this === t) return 0;let s = (r >>>= 0) - (n >>>= 0),o = (i >>>= 0) - (e >>>= 0);const a = Math.min(s, o),c = this.slice(n, r),h = t.slice(e, i);for (let t = 0; t < a; ++t) if (c[t] !== h[t]) {s = c[t], o = h[t];break;}return s < o ? -1 : o < s ? 1 : 0;}, l.prototype.includes = function (t, e, i) {return -1 !== this.indexOf(t, e, i);}, l.prototype.indexOf = function (t, e, i) {return y(this, t, e, i, !0);}, l.prototype.lastIndexOf = function (t, e, i) {return y(this, t, e, i, !1);}, l.prototype.write = function (t, e, i, n) {if (void 0 === e) n = "utf8", i = this.length, e = 0;else if (void 0 === i && "string" == typeof e) n = e, i = this.length, e = 0;else {if (!isFinite(e)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e >>>= 0, isFinite(i) ? (i >>>= 0, void 0 === n && (n = "utf8")) : (n = i, i = void 0);}const r = this.length - e;if ((void 0 === i || i > r) && (i = r), t.length > 0 && (i < 0 || e < 0) || e > this.length) throw new RangeError("Attempt to write outside buffer bounds");n || (n = "utf8");let s = !1;for (;;) switch (n) {case "hex":return w(this, t, e, i);case "utf8":case "utf-8":return x(this, t, e, i);case "ascii":case "latin1":case "binary":return S(this, t, e, i);case "base64":return E(this, t, e, i);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return C(this, t, e, i);default:if (s) throw new TypeError("Unknown encoding: " + n);n = ("" + n).toLowerCase(), s = !0;}}, l.prototype.toJSON = function () {return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };};const A = 4096;function M(t, e, i) {let n = "";i = Math.min(t.length, i);for (let r = e; r < i; ++r) n += String.fromCharCode(127 & t[r]);return n;}function _(t, e, i) {let n = "";i = Math.min(t.length, i);for (let r = e; r < i; ++r) n += String.fromCharCode(t[r]);return n;}function P(t, e, i) {const n = t.length;(!e || e < 0) && (e = 0), (!i || i < 0 || i > n) && (i = n);let r = "";for (let n = e; n < i; ++n) r += X[t[n]];return r;}function D(t, e, i) {const n = t.slice(e, i);let r = "";for (let t = 0; t < n.length - 1; t += 2) r += String.fromCharCode(n[t] + 256 * n[t + 1]);return r;}function O(t, e, i) {if (t % 1 != 0 || t < 0) throw new RangeError("offset is not uint");if (t + e > i) throw new RangeError("Trying to access beyond buffer length");}function I(t, e, i, n, r, s) {if (!l.isBuffer(t)) throw new TypeError('"buffer" argument must be a Buffer instance');if (e > r || e < s) throw new RangeError('"value" argument is out of bounds');if (i + n > t.length) throw new RangeError("Index out of range");}function F(t, e, i, n, r) {U(e, n, r, t, i, 7);let s = Number(e & BigInt(4294967295));t[i++] = s, s >>= 8, t[i++] = s, s >>= 8, t[i++] = s, s >>= 8, t[i++] = s;let o = Number(e >> BigInt(32) & BigInt(4294967295));return t[i++] = o, o >>= 8, t[i++] = o, o >>= 8, t[i++] = o, o >>= 8, t[i++] = o, i;}function R(t, e, i, n, r) {U(e, n, r, t, i, 7);let s = Number(e & BigInt(4294967295));t[i + 7] = s, s >>= 8, t[i + 6] = s, s >>= 8, t[i + 5] = s, s >>= 8, t[i + 4] = s;let o = Number(e >> BigInt(32) & BigInt(4294967295));return t[i + 3] = o, o >>= 8, t[i + 2] = o, o >>= 8, t[i + 1] = o, o >>= 8, t[i] = o, i + 8;}function L(t, e, i, n, r, s) {if (i + n > t.length) throw new RangeError("Index out of range");if (i < 0) throw new RangeError("Index out of range");}function N(t, e, i, n, s) {return e = +e, i >>>= 0, s || L(t, 0, i, 4), r.write(t, e, i, n, 23, 4), i + 4;}function V(t, e, i, n, s) {return e = +e, i >>>= 0, s || L(t, 0, i, 8), r.write(t, e, i, n, 52, 8), i + 8;}l.prototype.slice = function (t, e) {const i = this.length;(t = ~~t) < 0 ? (t += i) < 0 && (t = 0) : t > i && (t = i), (e = void 0 === e ? i : ~~e) < 0 ? (e += i) < 0 && (e = 0) : e > i && (e = i), e < t && (e = t);const n = this.subarray(t, e);return Object.setPrototypeOf(n, l.prototype), n;}, l.prototype.readUintLE = l.prototype.readUIntLE = function (t, e, i) {t >>>= 0, e >>>= 0, i || O(t, e, this.length);let n = this[t],r = 1,s = 0;for (; ++s < e && (r *= 256);) n += this[t + s] * r;return n;}, l.prototype.readUintBE = l.prototype.readUIntBE = function (t, e, i) {t >>>= 0, e >>>= 0, i || O(t, e, this.length);let n = this[t + --e],r = 1;for (; e > 0 && (r *= 256);) n += this[t + --e] * r;return n;}, l.prototype.readUint8 = l.prototype.readUInt8 = function (t, e) {return t >>>= 0, e || O(t, 1, this.length), this[t];}, l.prototype.readUint16LE = l.prototype.readUInt16LE = function (t, e) {return t >>>= 0, e || O(t, 2, this.length), this[t] | this[t + 1] << 8;}, l.prototype.readUint16BE = l.prototype.readUInt16BE = function (t, e) {return t >>>= 0, e || O(t, 2, this.length), this[t] << 8 | this[t + 1];}, l.prototype.readUint32LE = l.prototype.readUInt32LE = function (t, e) {return t >>>= 0, e || O(t, 4, this.length), (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3];}, l.prototype.readUint32BE = l.prototype.readUInt32BE = function (t, e) {return t >>>= 0, e || O(t, 4, this.length), 16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]);}, l.prototype.readBigUInt64LE = J(function (t) {H(t >>>= 0, "offset");const e = this[t],i = this[t + 7];void 0 !== e && void 0 !== i || q(t, this.length - 8);const n = e + 256 * this[++t] + 65536 * this[++t] + this[++t] * 2 ** 24,r = this[++t] + 256 * this[++t] + 65536 * this[++t] + i * 2 ** 24;return BigInt(n) + (BigInt(r) << BigInt(32));}), l.prototype.readBigUInt64BE = J(function (t) {H(t >>>= 0, "offset");const e = this[t],i = this[t + 7];void 0 !== e && void 0 !== i || q(t, this.length - 8);const n = e * 2 ** 24 + 65536 * this[++t] + 256 * this[++t] + this[++t],r = this[++t] * 2 ** 24 + 65536 * this[++t] + 256 * this[++t] + i;return (BigInt(n) << BigInt(32)) + BigInt(r);}), l.prototype.readIntLE = function (t, e, i) {t >>>= 0, e >>>= 0, i || O(t, e, this.length);let n = this[t],r = 1,s = 0;for (; ++s < e && (r *= 256);) n += this[t + s] * r;return r *= 128, n >= r && (n -= Math.pow(2, 8 * e)), n;}, l.prototype.readIntBE = function (t, e, i) {t >>>= 0, e >>>= 0, i || O(t, e, this.length);let n = e,r = 1,s = this[t + --n];for (; n > 0 && (r *= 256);) s += this[t + --n] * r;return r *= 128, s >= r && (s -= Math.pow(2, 8 * e)), s;}, l.prototype.readInt8 = function (t, e) {return t >>>= 0, e || O(t, 1, this.length), 128 & this[t] ? -1 * (255 - this[t] + 1) : this[t];}, l.prototype.readInt16LE = function (t, e) {t >>>= 0, e || O(t, 2, this.length);const i = this[t] | this[t + 1] << 8;return 32768 & i ? 4294901760 | i : i;}, l.prototype.readInt16BE = function (t, e) {t >>>= 0, e || O(t, 2, this.length);const i = this[t + 1] | this[t] << 8;return 32768 & i ? 4294901760 | i : i;}, l.prototype.readInt32LE = function (t, e) {return t >>>= 0, e || O(t, 4, this.length), this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24;}, l.prototype.readInt32BE = function (t, e) {return t >>>= 0, e || O(t, 4, this.length), this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3];}, l.prototype.readBigInt64LE = J(function (t) {H(t >>>= 0, "offset");const e = this[t],i = this[t + 7];void 0 !== e && void 0 !== i || q(t, this.length - 8);const n = this[t + 4] + 256 * this[t + 5] + 65536 * this[t + 6] + (i << 24);return (BigInt(n) << BigInt(32)) + BigInt(e + 256 * this[++t] + 65536 * this[++t] + this[++t] * 2 ** 24);}), l.prototype.readBigInt64BE = J(function (t) {H(t >>>= 0, "offset");const e = this[t],i = this[t + 7];void 0 !== e && void 0 !== i || q(t, this.length - 8);const n = (e << 24) + 65536 * this[++t] + 256 * this[++t] + this[++t];return (BigInt(n) << BigInt(32)) + BigInt(this[++t] * 2 ** 24 + 65536 * this[++t] + 256 * this[++t] + i);}), l.prototype.readFloatLE = function (t, e) {return t >>>= 0, e || O(t, 4, this.length), r.read(this, t, !0, 23, 4);}, l.prototype.readFloatBE = function (t, e) {return t >>>= 0, e || O(t, 4, this.length), r.read(this, t, !1, 23, 4);}, l.prototype.readDoubleLE = function (t, e) {return t >>>= 0, e || O(t, 8, this.length), r.read(this, t, !0, 52, 8);}, l.prototype.readDoubleBE = function (t, e) {return t >>>= 0, e || O(t, 8, this.length), r.read(this, t, !1, 52, 8);}, l.prototype.writeUintLE = l.prototype.writeUIntLE = function (t, e, i, n) {t = +t, e >>>= 0, i >>>= 0, n || I(this, t, e, i, Math.pow(2, 8 * i) - 1, 0);let r = 1,s = 0;for (this[e] = 255 & t; ++s < i && (r *= 256);) this[e + s] = t / r & 255;return e + i;}, l.prototype.writeUintBE = l.prototype.writeUIntBE = function (t, e, i, n) {t = +t, e >>>= 0, i >>>= 0, n || I(this, t, e, i, Math.pow(2, 8 * i) - 1, 0);let r = i - 1,s = 1;for (this[e + r] = 255 & t; --r >= 0 && (s *= 256);) this[e + r] = t / s & 255;return e + i;}, l.prototype.writeUint8 = l.prototype.writeUInt8 = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 1, 255, 0), this[e] = 255 & t, e + 1;}, l.prototype.writeUint16LE = l.prototype.writeUInt16LE = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 2, 65535, 0), this[e] = 255 & t, this[e + 1] = t >>> 8, e + 2;}, l.prototype.writeUint16BE = l.prototype.writeUInt16BE = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 2, 65535, 0), this[e] = t >>> 8, this[e + 1] = 255 & t, e + 2;}, l.prototype.writeUint32LE = l.prototype.writeUInt32LE = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 4, 4294967295, 0), this[e + 3] = t >>> 24, this[e + 2] = t >>> 16, this[e + 1] = t >>> 8, this[e] = 255 & t, e + 4;}, l.prototype.writeUint32BE = l.prototype.writeUInt32BE = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 4, 4294967295, 0), this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t, e + 4;}, l.prototype.writeBigUInt64LE = J(function (t, e = 0) {return F(this, t, e, BigInt(0), BigInt("0xffffffffffffffff"));}), l.prototype.writeBigUInt64BE = J(function (t, e = 0) {return R(this, t, e, BigInt(0), BigInt("0xffffffffffffffff"));}), l.prototype.writeIntLE = function (t, e, i, n) {if (t = +t, e >>>= 0, !n) {const n = Math.pow(2, 8 * i - 1);I(this, t, e, i, n - 1, -n);}let r = 0,s = 1,o = 0;for (this[e] = 255 & t; ++r < i && (s *= 256);) t < 0 && 0 === o && 0 !== this[e + r - 1] && (o = 1), this[e + r] = (t / s | 0) - o & 255;return e + i;}, l.prototype.writeIntBE = function (t, e, i, n) {if (t = +t, e >>>= 0, !n) {const n = Math.pow(2, 8 * i - 1);I(this, t, e, i, n - 1, -n);}let r = i - 1,s = 1,o = 0;for (this[e + r] = 255 & t; --r >= 0 && (s *= 256);) t < 0 && 0 === o && 0 !== this[e + r + 1] && (o = 1), this[e + r] = (t / s | 0) - o & 255;return e + i;}, l.prototype.writeInt8 = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 1, 127, -128), t < 0 && (t = 255 + t + 1), this[e] = 255 & t, e + 1;}, l.prototype.writeInt16LE = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 2, 32767, -32768), this[e] = 255 & t, this[e + 1] = t >>> 8, e + 2;}, l.prototype.writeInt16BE = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 2, 32767, -32768), this[e] = t >>> 8, this[e + 1] = 255 & t, e + 2;}, l.prototype.writeInt32LE = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 4, 2147483647, -2147483648), this[e] = 255 & t, this[e + 1] = t >>> 8, this[e + 2] = t >>> 16, this[e + 3] = t >>> 24, e + 4;}, l.prototype.writeInt32BE = function (t, e, i) {return t = +t, e >>>= 0, i || I(this, t, e, 4, 2147483647, -2147483648), t < 0 && (t = 4294967295 + t + 1), this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t, e + 4;}, l.prototype.writeBigInt64LE = J(function (t, e = 0) {return F(this, t, e, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));}), l.prototype.writeBigInt64BE = J(function (t, e = 0) {return R(this, t, e, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));}), l.prototype.writeFloatLE = function (t, e, i) {return N(this, t, e, !0, i);}, l.prototype.writeFloatBE = function (t, e, i) {return N(this, t, e, !1, i);}, l.prototype.writeDoubleLE = function (t, e, i) {return V(this, t, e, !0, i);}, l.prototype.writeDoubleBE = function (t, e, i) {return V(this, t, e, !1, i);}, l.prototype.copy = function (t, e, i, n) {if (!l.isBuffer(t)) throw new TypeError("argument should be a Buffer");if (i || (i = 0), n || 0 === n || (n = this.length), e >= t.length && (e = t.length), e || (e = 0), n > 0 && n < i && (n = i), n === i) return 0;if (0 === t.length || 0 === this.length) return 0;if (e < 0) throw new RangeError("targetStart out of bounds");if (i < 0 || i >= this.length) throw new RangeError("Index out of range");if (n < 0) throw new RangeError("sourceEnd out of bounds");n > this.length && (n = this.length), t.length - e < n - i && (n = t.length - e + i);const r = n - i;return this === t && "function" == typeof Uint8Array.prototype.copyWithin ? this.copyWithin(e, i, n) : Uint8Array.prototype.set.call(t, this.subarray(i, n), e), r;}, l.prototype.fill = function (t, e, i, n) {if ("string" == typeof t) {if ("string" == typeof e ? (n = e, e = 0, i = this.length) : "string" == typeof i && (n = i, i = this.length), void 0 !== n && "string" != typeof n) throw new TypeError("encoding must be a string");if ("string" == typeof n && !l.isEncoding(n)) throw new TypeError("Unknown encoding: " + n);if (1 === t.length) {const e = t.charCodeAt(0);("utf8" === n && e < 128 || "latin1" === n) && (t = e);}} else "number" == typeof t ? t &= 255 : "boolean" == typeof t && (t = Number(t));if (e < 0 || this.length < e || this.length < i) throw new RangeError("Out of range index");if (i <= e) return this;let r;if (e >>>= 0, i = void 0 === i ? this.length : i >>> 0, t || (t = 0), "number" == typeof t) for (r = e; r < i; ++r) this[r] = t;else {const s = l.isBuffer(t) ? t : l.from(t, n),o = s.length;if (0 === o) throw new TypeError('The value "' + t + '" is invalid for argument "value"');for (r = 0; r < i - e; ++r) this[r + e] = s[r % o];}return this;};const B = {};function j(t, e, i) {B[t] = class extends i {constructor() {super(), Object.defineProperty(this, "message", { value: e.apply(this, arguments), writable: !0, configurable: !0 }), this.name = `${this.name} [${t}]`, this.stack, delete this.name;}get code() {return t;}set code(t) {Object.defineProperty(this, "code", { configurable: !0, enumerable: !0, value: t, writable: !0 });}toString() {return `${this.name} [${t}]: ${this.message}`;}};}function z(t) {let e = "",i = t.length;const n = "-" === t[0] ? 1 : 0;for (; i >= n + 4; i -= 3) e = `_${t.slice(i - 3, i)}${e}`;return `${t.slice(0, i)}${e}`;}function U(t, e, i, n, r, s) {if (t > i || t < e) {const n = "bigint" == typeof e ? "n" : "";let r;throw r = s > 3 ? 0 === e || e === BigInt(0) ? `>= 0${n} and < 2${n} ** ${8 * (s + 1)}${n}` : `>= -(2${n} ** ${8 * (s + 1) - 1}${n}) and < 2 ** ${8 * (s + 1) - 1}${n}` : `>= ${e}${n} and <= ${i}${n}`, new B.ERR_OUT_OF_RANGE("value", r, t);}!function (t, e, i) {H(e, "offset"), void 0 !== t[e] && void 0 !== t[e + i] || q(e, t.length - (i + 1));}(n, r, s);}function H(t, e) {if ("number" != typeof t) throw new B.ERR_INVALID_ARG_TYPE(e, "number", t);}function q(t, e, i) {if (Math.floor(t) !== t) throw H(t, i), new B.ERR_OUT_OF_RANGE(i || "offset", "an integer", t);if (e < 0) throw new B.ERR_BUFFER_OUT_OF_BOUNDS();throw new B.ERR_OUT_OF_RANGE(i || "offset", `>= ${i ? 1 : 0} and <= ${e}`, t);}j("ERR_BUFFER_OUT_OF_BOUNDS", function (t) {return t ? `${t} is outside of buffer bounds` : "Attempt to access memory outside buffer bounds";}, RangeError), j("ERR_INVALID_ARG_TYPE", function (t, e) {return `The "${t}" argument must be of type number. Received type ${typeof e}`;}, TypeError), j("ERR_OUT_OF_RANGE", function (t, e, i) {let n = `The value of "${t}" is out of range.`,r = i;return Number.isInteger(i) && Math.abs(i) > 2 ** 32 ? r = z(String(i)) : "bigint" == typeof i && (r = String(i), (i > BigInt(2) ** BigInt(32) || i < -(BigInt(2) ** BigInt(32))) && (r = z(r)), r += "n"), n += ` It must be ${e}. Received ${r}`, n;}, RangeError);const $ = /[^+/0-9A-Za-z-_]/g;function G(t, e) {let i;e = e || 1 / 0;const n = t.length;let r = null;const s = [];for (let o = 0; o < n; ++o) {if (i = t.charCodeAt(o), i > 55295 && i < 57344) {if (!r) {if (i > 56319) {(e -= 3) > -1 && s.push(239, 191, 189);continue;}if (o + 1 === n) {(e -= 3) > -1 && s.push(239, 191, 189);continue;}r = i;continue;}if (i < 56320) {(e -= 3) > -1 && s.push(239, 191, 189), r = i;continue;}i = 65536 + (r - 55296 << 10 | i - 56320);} else r && (e -= 3) > -1 && s.push(239, 191, 189);if (r = null, i < 128) {if ((e -= 1) < 0) break;s.push(i);} else if (i < 2048) {if ((e -= 2) < 0) break;s.push(i >> 6 | 192, 63 & i | 128);} else if (i < 65536) {if ((e -= 3) < 0) break;s.push(i >> 12 | 224, i >> 6 & 63 | 128, 63 & i | 128);} else {if (!(i < 1114112)) throw new Error("Invalid code point");if ((e -= 4) < 0) break;s.push(i >> 18 | 240, i >> 12 & 63 | 128, i >> 6 & 63 | 128, 63 & i | 128);}}return s;}function W(t) {return n.toByteArray(function (t) {if ((t = (t = t.split("=")[0]).trim().replace($, "")).length < 2) return "";for (; t.length % 4 != 0;) t += "=";return t;}(t));}function K(t, e, i, n) {let r;for (r = 0; r < n && !(r + i >= e.length || r >= t.length); ++r) e[r + i] = t[r];return r;}function Z(t, e) {return t instanceof e || null != t && null != t.constructor && null != t.constructor.name && t.constructor.name === e.name;}function Y(t) {return t != t;}const X = function () {const t = "0123456789abcdef",e = new Array(256);for (let i = 0; i < 16; ++i) {const n = 16 * i;for (let r = 0; r < 16; ++r) e[n + r] = t[i] + t[r];}return e;}();function J(t) {return "undefined" == typeof BigInt ? Q : t;}function Q() {throw new Error("BigInt not supported");}}, 2755: (t, e, i) => {"use strict";i.d(e, { $8: () => u, Jp: () => g, NX: () => l, _5: () => r, _C: () => v, eJ: () => c, l0: () => a, lx: () => b, ni: () => h, w8: () => y });var n = i(1807);const r = "\\",s = "/",o = 219,a = "The new name is too long. Please use a shorter name.",l = "The new name contains invalid characters.";function c(t) {if (!t) return "";let e = t.id;return (0, n.cKq)(t.dataset, "name") && (e = t.dataset.name), e = m(e), e = p(e), e = d(e), e.includes(r) && (e = e.substring(e.lastIndexOf(r) + 1)), e.trim();}function h(t) {return t ? (t = d(t = p(t = m(t)))).trim().toLowerCase() : t;}function u(t) {if (null == t) return "(Blank)";const e = new RegExp(function (t) {return t.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");}(r), "g");return t.toString().replace(e, s);}function d(t) {return t.replace(/_x([0-9A-F]{2})_/g, (t, e) => String.fromCharCode(parseInt(e, 16)));}function p(t) {return t.replace(/^_\d/g, (t) => t.substring(1));}const f = "_okviz_";function g(t, e) {return -1 === t.indexOf(f) ? `${t}${f}${e || (0, n.uRe)()}` : t;}function m(t) {const e = t.indexOf(f);return -1 === e ? t : t.substring(0, e);}function v(t) {return t.length <= o;}function y(t) {return !/[^a-zA-Z0-9 +\-.:=_/]/.test(t);}function b(t) {return t.trim().slice(0, o).replace(/[^a-zA-Z0-9 +\-.:=_/]/g, "_");}}, 2765: (t, e, i) => {"use strict";i.d(e, { G: () => r });var n = i(1807);class r {zoomStates = {};saveTimeout;delay = 3e3;static instance;constructor() {}static getInstance() {return r.instance || (r.instance = new r()), r.instance;}add(t, e) {this.zoomStates[t] = e, this.enqueueSave();}delete(t) {this.zoomStates[t] && (delete this.zoomStates[t], this.saveAll(!0));}get(t) {return this.zoomStates[t] || { zoom: 1, position: { left: 0, top: 0 } };}enqueueSave() {clearTimeout(this.saveTimeout), this.saveTimeout = window.setTimeout(() => {this.saveAll(), this.saveTimeout = null;}, this.delay);}saveAll(t = !1) {n.XI0.BATCH({ objectName: "internal", properties: { zoomStates: this.zoomStates, update: Date.now().toString() }, selector: null }), t || n.XI0.BATCH_SAVE(!0);}}}, 2775: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(7728);const r = function (t) {var e = "rCS" + function (t) {for (var e = 5381, i = t.length; i;) e = 33 * e ^ t.charCodeAt(--i);return e >>> 0;}(t).toString(36);return { className: e, inject: function (i, r) {void 0 === r && (r = {});var s = function (t) {if (t && t.getRootNode) {var e = t.getRootNode();if (11 === e.nodeType) return e;}}(i),o = (s || i.ownerDocument || document).querySelector('style[data-styled-id="'.concat(e, '"]'));if (o) {var a = parseFloat(o.getAttribute("data-styled-count")) || 0;o.setAttribute("data-styled-count", "".concat(a + 1));} else o = function (t, e, i, r, s) {var o = (0, n.YE)(r),a = o.createElement("style");return a.setAttribute("type", "text/css"), a.setAttribute("data-styled-id", t), a.setAttribute("data-styled-count", "1"), i.nonce && a.setAttribute("nonce", i.nonce), a.innerHTML = function (t, e, i) {return i.original ? e : e.replace(/([^};{\s}][^};{]*|^\s*){/gm, function (e, i) {var r = i.trim();return (r ? (0, n.cM)(r) : [""]).map(function (e) {var i = e.trim();return 0 === i.indexOf("@") ? i : i.indexOf(":global") > -1 ? i.replace(/\:global/g, "") : i.indexOf(":host") > -1 ? "".concat(i.replace(/\:host/g, ".".concat(t))) : i ? ".".concat(t, " ").concat(i) : ".".concat(t);}).join(", ") + " {";});}(t, e, i), (s || o.head || o.body).appendChild(a), a;}(e, t, r, i, s);return { destroy: function () {var t,e = parseFloat(o.getAttribute("data-styled-count")) || 0;e <= 1 ? (o.remove ? o.remove() : null === (t = o.parentNode) || void 0 === t || t.removeChild(o), o = null) : o.setAttribute("data-styled-count", "".concat(e - 1));} };} };};}, 2827: (t, e, i) => {"use strict";i.d(e, { sc: () => a });var n = i(7991),r = i(7493);const s = (t, e, i = 0) => {0 === i && (e.unshift(e.length), e.unshift(6));const n = t.indexOf(e[0], i);if (-1 === n) return !1;const r = t.subarray(n, n + e.length);return r.length === e.length && (r.every((t, i) => t === e[i]) || s(t, e, n + 1));},o = (t) => {switch (!0) {case s(t, [42, 134, 72, 206, 61, 3, 1, 7]):return "P-256";case s(t, [43, 129, 4, 0, 34]):return "P-384";case s(t, [43, 129, 4, 0, 35]):return "P-521";case s(t, [43, 101, 110]):return "X25519";case s(t, [43, 101, 111]):return "X448";case s(t, [43, 101, 112]):return "Ed25519";case s(t, [43, 101, 113]):return "Ed448";default:throw new r.T0("Invalid or unsupported EC Key Curve or OKP Key Sub Type");}},a = (t, e, i) => (async (t, e, i, s, a) => {let l, c;const h = new Uint8Array(atob(i.replace(t, "")).split("").map((t) => t.charCodeAt(0))),u = "spki" === e;switch (s) {case "PS256":case "PS384":case "PS512":l = { name: "RSA-PSS", hash: `SHA-${s.slice(-3)}` }, c = u ? ["verify"] : ["sign"];break;case "RS256":case "RS384":case "RS512":l = { name: "RSASSA-PKCS1-v1_5", hash: `SHA-${s.slice(-3)}` }, c = u ? ["verify"] : ["sign"];break;case "RSA-OAEP":case "RSA-OAEP-256":case "RSA-OAEP-384":case "RSA-OAEP-512":l = { name: "RSA-OAEP", hash: `SHA-${parseInt(s.slice(-3), 10) || 1}` }, c = u ? ["encrypt", "wrapKey"] : ["decrypt", "unwrapKey"];break;case "ES256":l = { name: "ECDSA", namedCurve: "P-256" }, c = u ? ["verify"] : ["sign"];break;case "ES384":l = { name: "ECDSA", namedCurve: "P-384" }, c = u ? ["verify"] : ["sign"];break;case "ES512":l = { name: "ECDSA", namedCurve: "P-521" }, c = u ? ["verify"] : ["sign"];break;case "ECDH-ES":case "ECDH-ES+A128KW":case "ECDH-ES+A192KW":case "ECDH-ES+A256KW":{const t = o(h);l = t.startsWith("P-") ? { name: "ECDH", namedCurve: t } : { name: t }, c = u ? [] : ["deriveBits"];break;}case "Ed25519":l = { name: "Ed25519" }, c = u ? ["verify"] : ["sign"];break;case "EdDSA":l = { name: o(h) }, c = u ? ["verify"] : ["sign"];break;default:throw new r.T0('Invalid or unsupported "alg" (Algorithm) value');}return n.A.subtle.importKey(e, h, l, a?.extractable ?? !1, c);})(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g, "spki", t, e, i);}, 2879: (t, e, i) => {"use strict";i.r(e), i.d(e, { getBitCount: () => l, hasFlag: () => r, resetFlag: () => o, setFlag: () => s, toString: () => a });var n = i(5442);function r(t, e) {return (t & e) === e;}function s(t, e) {return t | e;}function o(t, e) {return t & ~e;}function a(t, e) {return t[e];}function l(t) {if (!(0, n.isInteger)(t)) return 0;let e = 0,i = t;for (; 0 !== i;) 1 & ~i || e++, i >>>= 1;return e;}}, 2901: (t, e, i) => {"use strict";function n(t) {for (var e = this._groups, i = 0, n = e.length; i < n; ++i) for (var r, s = e[i], o = 0, a = s.length; o < a; ++o) (r = s[o]) && t.call(r, r.__data__, o, s);return this;}i.d(e, { A: () => n });}, 2902: (t, e, i) => {"use strict";function n(t, e) {return null == t || null == e ? NaN : t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;}i.d(e, { A: () => n });}, 2909: (t, e, i) => {"use strict";i.d(e, { S: () => s });var n = i(6639),r = i(2140);class s extends r.c {inputType = "text";placeholder;constructor(t) {t.optionType = "input", super(t), Object.assign(this, t);}render(t) {super.render(t), (0, n.tT)("input.oop-input", this.element, { attr: { type: this.inputType, value: this.displayValue || "", placeholder: this.placeholder || "" }, events: { input: (t, e) => {this.value = e.value, this.onChange && this.onChange(this.value);} } });}refresh() {const t = this.element.querySelector("input");t && (t.value = this.displayValue || "", t.placeholder = this.isMixed ? "(Mixed)" : this.placeholder || "");}}}, 2920: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(1882);function r(t) {function e(e, i) {return e && i ? t(e.__data__, i.__data__) : !e - !i;}t || (t = s);for (var i = this._groups, r = i.length, o = new Array(r), a = 0; a < r; ++a) {for (var l, c = i[a], h = c.length, u = o[a] = new Array(h), d = 0; d < h; ++d) (l = c[d]) && (u[d] = l);u.sort(e);}return new n.LN(o, this._parents).order();}function s(t, e) {return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;}}, 2938: (t, e, i) => {"use strict";const n = i(3908);t.exports = (t, e) => new n(t, e).major;}, 3007: (t, e, i) => {"use strict";const n = i(3908);t.exports = (t, e, i, r, s) => {"string" == typeof i && (s = r, r = i, i = void 0);try {return new n(t instanceof n ? t.version : t, i).inc(e, r, s).version;} catch (t) {return null;}};}, 3051: (t, e, i) => {"use strict";function n(t, e, i) {return t.lastIndex = i || 0, t.exec(e);}i.r(e), i.d(e, { run: () => n });}, 3075: (t, e, i) => {"use strict";function n(t) {let e = t.length;for (; --e >= 0;) t[e] = 0;}i.d(e, { Ay: () => Si });const r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]),s = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]),o = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]),a = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),l = new Array(576);n(l);const c = new Array(60);n(c);const h = new Array(512);n(h);const u = new Array(256);n(u);const d = new Array(29);n(d);const p = new Array(30);function f(t, e, i, n, r) {this.static_tree = t, this.extra_bits = e, this.extra_base = i, this.elems = n, this.max_length = r, this.has_stree = t && t.length;}let g, m, v;function y(t, e) {this.dyn_tree = t, this.max_code = 0, this.stat_desc = e;}n(p);const b = (t) => t < 256 ? h[t] : h[256 + (t >>> 7)],w = (t, e) => {t.pending_buf[t.pending++] = 255 & e, t.pending_buf[t.pending++] = e >>> 8 & 255;},x = (t, e, i) => {t.bi_valid > 16 - i ? (t.bi_buf |= e << t.bi_valid & 65535, w(t, t.bi_buf), t.bi_buf = e >> 16 - t.bi_valid, t.bi_valid += i - 16) : (t.bi_buf |= e << t.bi_valid & 65535, t.bi_valid += i);},S = (t, e, i) => {x(t, i[2 * e], i[2 * e + 1]);},E = (t, e) => {let i = 0;do {i |= 1 & t, t >>>= 1, i <<= 1;} while (--e > 0);return i >>> 1;},C = (t, e, i) => {const n = new Array(16);let r,s,o = 0;for (r = 1; r <= 15; r++) o = o + i[r - 1] << 1, n[r] = o;for (s = 0; s <= e; s++) {let e = t[2 * s + 1];0 !== e && (t[2 * s] = E(n[e]++, e));}},k = (t) => {let e;for (e = 0; e < 286; e++) t.dyn_ltree[2 * e] = 0;for (e = 0; e < 30; e++) t.dyn_dtree[2 * e] = 0;for (e = 0; e < 19; e++) t.bl_tree[2 * e] = 0;t.dyn_ltree[512] = 1, t.opt_len = t.static_len = 0, t.sym_next = t.matches = 0;},T = (t) => {t.bi_valid > 8 ? w(t, t.bi_buf) : t.bi_valid > 0 && (t.pending_buf[t.pending++] = t.bi_buf), t.bi_buf = 0, t.bi_valid = 0;},A = (t, e, i, n) => {const r = 2 * e,s = 2 * i;return t[r] < t[s] || t[r] === t[s] && n[e] <= n[i];},M = (t, e, i) => {const n = t.heap[i];let r = i << 1;for (; r <= t.heap_len && (r < t.heap_len && A(e, t.heap[r + 1], t.heap[r], t.depth) && r++, !A(e, n, t.heap[r], t.depth));) t.heap[i] = t.heap[r], i = r, r <<= 1;t.heap[i] = n;},_ = (t, e, i) => {let n,o,a,l,c = 0;if (0 !== t.sym_next) do {n = 255 & t.pending_buf[t.sym_buf + c++], n += (255 & t.pending_buf[t.sym_buf + c++]) << 8, o = t.pending_buf[t.sym_buf + c++], 0 === n ? S(t, o, e) : (a = u[o], S(t, a + 256 + 1, e), l = r[a], 0 !== l && (o -= d[a], x(t, o, l)), n--, a = b(n), S(t, a, i), l = s[a], 0 !== l && (n -= p[a], x(t, n, l)));} while (c < t.sym_next);S(t, 256, e);},P = (t, e) => {const i = e.dyn_tree,n = e.stat_desc.static_tree,r = e.stat_desc.has_stree,s = e.stat_desc.elems;let o,a,l,c = -1;for (t.heap_len = 0, t.heap_max = 573, o = 0; o < s; o++) 0 !== i[2 * o] ? (t.heap[++t.heap_len] = c = o, t.depth[o] = 0) : i[2 * o + 1] = 0;for (; t.heap_len < 2;) l = t.heap[++t.heap_len] = c < 2 ? ++c : 0, i[2 * l] = 1, t.depth[l] = 0, t.opt_len--, r && (t.static_len -= n[2 * l + 1]);for (e.max_code = c, o = t.heap_len >> 1; o >= 1; o--) M(t, i, o);l = s;do {o = t.heap[1], t.heap[1] = t.heap[t.heap_len--], M(t, i, 1), a = t.heap[1], t.heap[--t.heap_max] = o, t.heap[--t.heap_max] = a, i[2 * l] = i[2 * o] + i[2 * a], t.depth[l] = (t.depth[o] >= t.depth[a] ? t.depth[o] : t.depth[a]) + 1, i[2 * o + 1] = i[2 * a + 1] = l, t.heap[1] = l++, M(t, i, 1);} while (t.heap_len >= 2);t.heap[--t.heap_max] = t.heap[1], ((t, e) => {const i = e.dyn_tree,n = e.max_code,r = e.stat_desc.static_tree,s = e.stat_desc.has_stree,o = e.stat_desc.extra_bits,a = e.stat_desc.extra_base,l = e.stat_desc.max_length;let c,h,u,d,p,f,g = 0;for (d = 0; d <= 15; d++) t.bl_count[d] = 0;for (i[2 * t.heap[t.heap_max] + 1] = 0, c = t.heap_max + 1; c < 573; c++) h = t.heap[c], d = i[2 * i[2 * h + 1] + 1] + 1, d > l && (d = l, g++), i[2 * h + 1] = d, h > n || (t.bl_count[d]++, p = 0, h >= a && (p = o[h - a]), f = i[2 * h], t.opt_len += f * (d + p), s && (t.static_len += f * (r[2 * h + 1] + p)));if (0 !== g) {do {for (d = l - 1; 0 === t.bl_count[d];) d--;t.bl_count[d]--, t.bl_count[d + 1] += 2, t.bl_count[l]--, g -= 2;} while (g > 0);for (d = l; 0 !== d; d--) for (h = t.bl_count[d]; 0 !== h;) u = t.heap[--c], u > n || (i[2 * u + 1] !== d && (t.opt_len += (d - i[2 * u + 1]) * i[2 * u], i[2 * u + 1] = d), h--);}})(t, e), C(i, c, t.bl_count);},D = (t, e, i) => {let n,r,s = -1,o = e[1],a = 0,l = 7,c = 4;for (0 === o && (l = 138, c = 3), e[2 * (i + 1) + 1] = 65535, n = 0; n <= i; n++) r = o, o = e[2 * (n + 1) + 1], ++a < l && r === o || (a < c ? t.bl_tree[2 * r] += a : 0 !== r ? (r !== s && t.bl_tree[2 * r]++, t.bl_tree[32]++) : a <= 10 ? t.bl_tree[34]++ : t.bl_tree[36]++, a = 0, s = r, 0 === o ? (l = 138, c = 3) : r === o ? (l = 6, c = 3) : (l = 7, c = 4));},O = (t, e, i) => {let n,r,s = -1,o = e[1],a = 0,l = 7,c = 4;for (0 === o && (l = 138, c = 3), n = 0; n <= i; n++) if (r = o, o = e[2 * (n + 1) + 1], !(++a < l && r === o)) {if (a < c) do {S(t, r, t.bl_tree);} while (0 !== --a);else 0 !== r ? (r !== s && (S(t, r, t.bl_tree), a--), S(t, 16, t.bl_tree), x(t, a - 3, 2)) : a <= 10 ? (S(t, 17, t.bl_tree), x(t, a - 3, 3)) : (S(t, 18, t.bl_tree), x(t, a - 11, 7));a = 0, s = r, 0 === o ? (l = 138, c = 3) : r === o ? (l = 6, c = 3) : (l = 7, c = 4);}};let I = !1;const F = (t, e, i, n) => {x(t, 0 + (n ? 1 : 0), 3), T(t), w(t, i), w(t, ~i), i && t.pending_buf.set(t.window.subarray(e, e + i), t.pending), t.pending += i;};var R = { _tr_init: (t) => {I || ((() => {let t, e, i, n, a;const y = new Array(16);for (i = 0, n = 0; n < 28; n++) for (d[n] = i, t = 0; t < 1 << r[n]; t++) u[i++] = n;for (u[i - 1] = n, a = 0, n = 0; n < 16; n++) for (p[n] = a, t = 0; t < 1 << s[n]; t++) h[a++] = n;for (a >>= 7; n < 30; n++) for (p[n] = a << 7, t = 0; t < 1 << s[n] - 7; t++) h[256 + a++] = n;for (e = 0; e <= 15; e++) y[e] = 0;for (t = 0; t <= 143;) l[2 * t + 1] = 8, t++, y[8]++;for (; t <= 255;) l[2 * t + 1] = 9, t++, y[9]++;for (; t <= 279;) l[2 * t + 1] = 7, t++, y[7]++;for (; t <= 287;) l[2 * t + 1] = 8, t++, y[8]++;for (C(l, 287, y), t = 0; t < 30; t++) c[2 * t + 1] = 5, c[2 * t] = E(t, 5);g = new f(l, r, 257, 286, 15), m = new f(c, s, 0, 30, 15), v = new f(new Array(0), o, 0, 19, 7);})(), I = !0), t.l_desc = new y(t.dyn_ltree, g), t.d_desc = new y(t.dyn_dtree, m), t.bl_desc = new y(t.bl_tree, v), t.bi_buf = 0, t.bi_valid = 0, k(t);}, _tr_stored_block: F, _tr_flush_block: (t, e, i, n) => {let r,s,o = 0;t.level > 0 ? (2 === t.strm.data_type && (t.strm.data_type = ((t) => {let e,i = 4093624447;for (e = 0; e <= 31; e++, i >>>= 1) if (1 & i && 0 !== t.dyn_ltree[2 * e]) return 0;if (0 !== t.dyn_ltree[18] || 0 !== t.dyn_ltree[20] || 0 !== t.dyn_ltree[26]) return 1;for (e = 32; e < 256; e++) if (0 !== t.dyn_ltree[2 * e]) return 1;return 0;})(t)), P(t, t.l_desc), P(t, t.d_desc), o = ((t) => {let e;for (D(t, t.dyn_ltree, t.l_desc.max_code), D(t, t.dyn_dtree, t.d_desc.max_code), P(t, t.bl_desc), e = 18; e >= 3 && 0 === t.bl_tree[2 * a[e] + 1]; e--);return t.opt_len += 3 * (e + 1) + 5 + 5 + 4, e;})(t), r = t.opt_len + 3 + 7 >>> 3, s = t.static_len + 3 + 7 >>> 3, s <= r && (r = s)) : r = s = i + 5, i + 4 <= r && -1 !== e ? F(t, e, i, n) : 4 === t.strategy || s === r ? (x(t, 2 + (n ? 1 : 0), 3), _(t, l, c)) : (x(t, 4 + (n ? 1 : 0), 3), ((t, e, i, n) => {let r;for (x(t, e - 257, 5), x(t, i - 1, 5), x(t, n - 4, 4), r = 0; r < n; r++) x(t, t.bl_tree[2 * a[r] + 1], 3);O(t, t.dyn_ltree, e - 1), O(t, t.dyn_dtree, i - 1);})(t, t.l_desc.max_code + 1, t.d_desc.max_code + 1, o + 1), _(t, t.dyn_ltree, t.dyn_dtree)), k(t), n && T(t);}, _tr_tally: (t, e, i) => (t.pending_buf[t.sym_buf + t.sym_next++] = e, t.pending_buf[t.sym_buf + t.sym_next++] = e >> 8, t.pending_buf[t.sym_buf + t.sym_next++] = i, 0 === e ? t.dyn_ltree[2 * i]++ : (t.matches++, e--, t.dyn_ltree[2 * (u[i] + 256 + 1)]++, t.dyn_dtree[2 * b(e)]++), t.sym_next === t.sym_end), _tr_align: (t) => {x(t, 2, 3), S(t, 256, l), ((t) => {16 === t.bi_valid ? (w(t, t.bi_buf), t.bi_buf = 0, t.bi_valid = 0) : t.bi_valid >= 8 && (t.pending_buf[t.pending++] = 255 & t.bi_buf, t.bi_buf >>= 8, t.bi_valid -= 8);})(t);} },L = (t, e, i, n) => {let r = 65535 & t,s = t >>> 16 & 65535,o = 0;for (; 0 !== i;) {o = i > 2e3 ? 2e3 : i, i -= o;do {r = r + e[n++] | 0, s = s + r | 0;} while (--o);r %= 65521, s %= 65521;}return r | s << 16;};const N = new Uint32Array((() => {let t,e = [];for (var i = 0; i < 256; i++) {t = i;for (var n = 0; n < 8; n++) t = 1 & t ? 3988292384 ^ t >>> 1 : t >>> 1;e[i] = t;}return e;})());var V = (t, e, i, n) => {const r = N,s = n + i;t ^= -1;for (let i = n; i < s; i++) t = t >>> 8 ^ r[255 & (t ^ e[i])];return -1 ^ t;},B = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" },j = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_MEM_ERROR: -4, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };const { _tr_init: z, _tr_stored_block: U, _tr_flush_block: H, _tr_tally: q, _tr_align: $ } = R,{ Z_NO_FLUSH: G, Z_PARTIAL_FLUSH: W, Z_FULL_FLUSH: K, Z_FINISH: Z, Z_BLOCK: Y, Z_OK: X, Z_STREAM_END: J, Z_STREAM_ERROR: Q, Z_DATA_ERROR: tt, Z_BUF_ERROR: et, Z_DEFAULT_COMPRESSION: it, Z_FILTERED: nt, Z_HUFFMAN_ONLY: rt, Z_RLE: st, Z_FIXED: ot, Z_DEFAULT_STRATEGY: at, Z_UNKNOWN: lt, Z_DEFLATED: ct } = j,ht = 258,ut = 262,dt = 42,pt = 113,ft = 666,gt = (t, e) => (t.msg = B[e], e),mt = (t) => 2 * t - (t > 4 ? 9 : 0),vt = (t) => {let e = t.length;for (; --e >= 0;) t[e] = 0;},yt = (t) => {let e,i,n,r = t.w_size;e = t.hash_size, n = e;do {i = t.head[--n], t.head[n] = i >= r ? i - r : 0;} while (--e);e = r, n = e;do {i = t.prev[--n], t.prev[n] = i >= r ? i - r : 0;} while (--e);};let bt = (t, e, i) => (e << t.hash_shift ^ i) & t.hash_mask;const wt = (t) => {const e = t.state;let i = e.pending;i > t.avail_out && (i = t.avail_out), 0 !== i && (t.output.set(e.pending_buf.subarray(e.pending_out, e.pending_out + i), t.next_out), t.next_out += i, e.pending_out += i, t.total_out += i, t.avail_out -= i, e.pending -= i, 0 === e.pending && (e.pending_out = 0));},xt = (t, e) => {H(t, t.block_start >= 0 ? t.block_start : -1, t.strstart - t.block_start, e), t.block_start = t.strstart, wt(t.strm);},St = (t, e) => {t.pending_buf[t.pending++] = e;},Et = (t, e) => {t.pending_buf[t.pending++] = e >>> 8 & 255, t.pending_buf[t.pending++] = 255 & e;},Ct = (t, e, i, n) => {let r = t.avail_in;return r > n && (r = n), 0 === r ? 0 : (t.avail_in -= r, e.set(t.input.subarray(t.next_in, t.next_in + r), i), 1 === t.state.wrap ? t.adler = L(t.adler, e, r, i) : 2 === t.state.wrap && (t.adler = V(t.adler, e, r, i)), t.next_in += r, t.total_in += r, r);},kt = (t, e) => {let i,n,r = t.max_chain_length,s = t.strstart,o = t.prev_length,a = t.nice_match;const l = t.strstart > t.w_size - ut ? t.strstart - (t.w_size - ut) : 0,c = t.window,h = t.w_mask,u = t.prev,d = t.strstart + ht;let p = c[s + o - 1],f = c[s + o];t.prev_length >= t.good_match && (r >>= 2), a > t.lookahead && (a = t.lookahead);do {if (i = e, c[i + o] === f && c[i + o - 1] === p && c[i] === c[s] && c[++i] === c[s + 1]) {s += 2, i++;do {} while (c[++s] === c[++i] && c[++s] === c[++i] && c[++s] === c[++i] && c[++s] === c[++i] && c[++s] === c[++i] && c[++s] === c[++i] && c[++s] === c[++i] && c[++s] === c[++i] && s < d);if (n = ht - (d - s), s = d - ht, n > o) {if (t.match_start = e, o = n, n >= a) break;p = c[s + o - 1], f = c[s + o];}}} while ((e = u[e & h]) > l && 0 !== --r);return o <= t.lookahead ? o : t.lookahead;},Tt = (t) => {const e = t.w_size;let i, n, r;do {if (n = t.window_size - t.lookahead - t.strstart, t.strstart >= e + (e - ut) && (t.window.set(t.window.subarray(e, e + e - n), 0), t.match_start -= e, t.strstart -= e, t.block_start -= e, t.insert > t.strstart && (t.insert = t.strstart), yt(t), n += e), 0 === t.strm.avail_in) break;if (i = Ct(t.strm, t.window, t.strstart + t.lookahead, n), t.lookahead += i, t.lookahead + t.insert >= 3) for (r = t.strstart - t.insert, t.ins_h = t.window[r], t.ins_h = bt(t, t.ins_h, t.window[r + 1]); t.insert && (t.ins_h = bt(t, t.ins_h, t.window[r + 3 - 1]), t.prev[r & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = r, r++, t.insert--, !(t.lookahead + t.insert < 3)););} while (t.lookahead < ut && 0 !== t.strm.avail_in);},At = (t, e) => {let i,n,r,s = t.pending_buf_size - 5 > t.w_size ? t.w_size : t.pending_buf_size - 5,o = 0,a = t.strm.avail_in;do {if (i = 65535, r = t.bi_valid + 42 >> 3, t.strm.avail_out < r) break;if (r = t.strm.avail_out - r, n = t.strstart - t.block_start, i > n + t.strm.avail_in && (i = n + t.strm.avail_in), i > r && (i = r), i < s && (0 === i && e !== Z || e === G || i !== n + t.strm.avail_in)) break;o = e === Z && i === n + t.strm.avail_in ? 1 : 0, U(t, 0, 0, o), t.pending_buf[t.pending - 4] = i, t.pending_buf[t.pending - 3] = i >> 8, t.pending_buf[t.pending - 2] = ~i, t.pending_buf[t.pending - 1] = ~i >> 8, wt(t.strm), n && (n > i && (n = i), t.strm.output.set(t.window.subarray(t.block_start, t.block_start + n), t.strm.next_out), t.strm.next_out += n, t.strm.avail_out -= n, t.strm.total_out += n, t.block_start += n, i -= n), i && (Ct(t.strm, t.strm.output, t.strm.next_out, i), t.strm.next_out += i, t.strm.avail_out -= i, t.strm.total_out += i);} while (0 === o);return a -= t.strm.avail_in, a && (a >= t.w_size ? (t.matches = 2, t.window.set(t.strm.input.subarray(t.strm.next_in - t.w_size, t.strm.next_in), 0), t.strstart = t.w_size, t.insert = t.strstart) : (t.window_size - t.strstart <= a && (t.strstart -= t.w_size, t.window.set(t.window.subarray(t.w_size, t.w_size + t.strstart), 0), t.matches < 2 && t.matches++, t.insert > t.strstart && (t.insert = t.strstart)), t.window.set(t.strm.input.subarray(t.strm.next_in - a, t.strm.next_in), t.strstart), t.strstart += a, t.insert += a > t.w_size - t.insert ? t.w_size - t.insert : a), t.block_start = t.strstart), t.high_water < t.strstart && (t.high_water = t.strstart), o ? 4 : e !== G && e !== Z && 0 === t.strm.avail_in && t.strstart === t.block_start ? 2 : (r = t.window_size - t.strstart, t.strm.avail_in > r && t.block_start >= t.w_size && (t.block_start -= t.w_size, t.strstart -= t.w_size, t.window.set(t.window.subarray(t.w_size, t.w_size + t.strstart), 0), t.matches < 2 && t.matches++, r += t.w_size, t.insert > t.strstart && (t.insert = t.strstart)), r > t.strm.avail_in && (r = t.strm.avail_in), r && (Ct(t.strm, t.window, t.strstart, r), t.strstart += r, t.insert += r > t.w_size - t.insert ? t.w_size - t.insert : r), t.high_water < t.strstart && (t.high_water = t.strstart), r = t.bi_valid + 42 >> 3, r = t.pending_buf_size - r > 65535 ? 65535 : t.pending_buf_size - r, s = r > t.w_size ? t.w_size : r, n = t.strstart - t.block_start, (n >= s || (n || e === Z) && e !== G && 0 === t.strm.avail_in && n <= r) && (i = n > r ? r : n, o = e === Z && 0 === t.strm.avail_in && i === n ? 1 : 0, U(t, t.block_start, i, o), t.block_start += i, wt(t.strm)), o ? 3 : 1);},Mt = (t, e) => {let i, n;for (;;) {if (t.lookahead < ut) {if (Tt(t), t.lookahead < ut && e === G) return 1;if (0 === t.lookahead) break;}if (i = 0, t.lookahead >= 3 && (t.ins_h = bt(t, t.ins_h, t.window[t.strstart + 3 - 1]), i = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), 0 !== i && t.strstart - i <= t.w_size - ut && (t.match_length = kt(t, i)), t.match_length >= 3) {if (n = q(t, t.strstart - t.match_start, t.match_length - 3), t.lookahead -= t.match_length, t.match_length <= t.max_lazy_match && t.lookahead >= 3) {t.match_length--;do {t.strstart++, t.ins_h = bt(t, t.ins_h, t.window[t.strstart + 3 - 1]), i = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart;} while (0 !== --t.match_length);t.strstart++;} else t.strstart += t.match_length, t.match_length = 0, t.ins_h = t.window[t.strstart], t.ins_h = bt(t, t.ins_h, t.window[t.strstart + 1]);} else n = q(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++;if (n && (xt(t, !1), 0 === t.strm.avail_out)) return 1;}return t.insert = t.strstart < 2 ? t.strstart : 2, e === Z ? (xt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : t.sym_next && (xt(t, !1), 0 === t.strm.avail_out) ? 1 : 2;},_t = (t, e) => {let i, n, r;for (;;) {if (t.lookahead < ut) {if (Tt(t), t.lookahead < ut && e === G) return 1;if (0 === t.lookahead) break;}if (i = 0, t.lookahead >= 3 && (t.ins_h = bt(t, t.ins_h, t.window[t.strstart + 3 - 1]), i = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), t.prev_length = t.match_length, t.prev_match = t.match_start, t.match_length = 2, 0 !== i && t.prev_length < t.max_lazy_match && t.strstart - i <= t.w_size - ut && (t.match_length = kt(t, i), t.match_length <= 5 && (t.strategy === nt || 3 === t.match_length && t.strstart - t.match_start > 4096) && (t.match_length = 2)), t.prev_length >= 3 && t.match_length <= t.prev_length) {r = t.strstart + t.lookahead - 3, n = q(t, t.strstart - 1 - t.prev_match, t.prev_length - 3), t.lookahead -= t.prev_length - 1, t.prev_length -= 2;do {++t.strstart <= r && (t.ins_h = bt(t, t.ins_h, t.window[t.strstart + 3 - 1]), i = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart);} while (0 !== --t.prev_length);if (t.match_available = 0, t.match_length = 2, t.strstart++, n && (xt(t, !1), 0 === t.strm.avail_out)) return 1;} else if (t.match_available) {if (n = q(t, 0, t.window[t.strstart - 1]), n && xt(t, !1), t.strstart++, t.lookahead--, 0 === t.strm.avail_out) return 1;} else t.match_available = 1, t.strstart++, t.lookahead--;}return t.match_available && (n = q(t, 0, t.window[t.strstart - 1]), t.match_available = 0), t.insert = t.strstart < 2 ? t.strstart : 2, e === Z ? (xt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : t.sym_next && (xt(t, !1), 0 === t.strm.avail_out) ? 1 : 2;};function Pt(t, e, i, n, r) {this.good_length = t, this.max_lazy = e, this.nice_length = i, this.max_chain = n, this.func = r;}const Dt = [new Pt(0, 0, 0, 0, At), new Pt(4, 4, 8, 4, Mt), new Pt(4, 5, 16, 8, Mt), new Pt(4, 6, 32, 32, Mt), new Pt(4, 4, 16, 16, _t), new Pt(8, 16, 32, 32, _t), new Pt(8, 16, 128, 128, _t), new Pt(8, 32, 128, 256, _t), new Pt(32, 128, 258, 1024, _t), new Pt(32, 258, 258, 4096, _t)];function Ot() {this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = ct, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(1146), this.dyn_dtree = new Uint16Array(122), this.bl_tree = new Uint16Array(78), vt(this.dyn_ltree), vt(this.dyn_dtree), vt(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(16), this.heap = new Uint16Array(573), vt(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(573), vt(this.depth), this.sym_buf = 0, this.lit_bufsize = 0, this.sym_next = 0, this.sym_end = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;}const It = (t) => {if (!t) return 1;const e = t.state;return !e || e.strm !== t || e.status !== dt && 57 !== e.status && 69 !== e.status && 73 !== e.status && 91 !== e.status && 103 !== e.status && e.status !== pt && e.status !== ft ? 1 : 0;},Ft = (t) => {if (It(t)) return gt(t, Q);t.total_in = t.total_out = 0, t.data_type = lt;const e = t.state;return e.pending = 0, e.pending_out = 0, e.wrap < 0 && (e.wrap = -e.wrap), e.status = 2 === e.wrap ? 57 : e.wrap ? dt : pt, t.adler = 2 === e.wrap ? 0 : 1, e.last_flush = -2, z(e), X;},Rt = (t) => {const e = Ft(t);var i;return e === X && ((i = t.state).window_size = 2 * i.w_size, vt(i.head), i.max_lazy_match = Dt[i.level].max_lazy, i.good_match = Dt[i.level].good_length, i.nice_match = Dt[i.level].nice_length, i.max_chain_length = Dt[i.level].max_chain, i.strstart = 0, i.block_start = 0, i.lookahead = 0, i.insert = 0, i.match_length = i.prev_length = 2, i.match_available = 0, i.ins_h = 0), e;},Lt = (t, e, i, n, r, s) => {if (!t) return Q;let o = 1;if (e === it && (e = 6), n < 0 ? (o = 0, n = -n) : n > 15 && (o = 2, n -= 16), r < 1 || r > 9 || i !== ct || n < 8 || n > 15 || e < 0 || e > 9 || s < 0 || s > ot || 8 === n && 1 !== o) return gt(t, Q);8 === n && (n = 9);const a = new Ot();return t.state = a, a.strm = t, a.status = dt, a.wrap = o, a.gzhead = null, a.w_bits = n, a.w_size = 1 << a.w_bits, a.w_mask = a.w_size - 1, a.hash_bits = r + 7, a.hash_size = 1 << a.hash_bits, a.hash_mask = a.hash_size - 1, a.hash_shift = ~~((a.hash_bits + 3 - 1) / 3), a.window = new Uint8Array(2 * a.w_size), a.head = new Uint16Array(a.hash_size), a.prev = new Uint16Array(a.w_size), a.lit_bufsize = 1 << r + 6, a.pending_buf_size = 4 * a.lit_bufsize, a.pending_buf = new Uint8Array(a.pending_buf_size), a.sym_buf = a.lit_bufsize, a.sym_end = 3 * (a.lit_bufsize - 1), a.level = e, a.strategy = s, a.method = i, Rt(t);};var Nt = Lt,Vt = (t, e) => It(t) || 2 !== t.state.wrap ? Q : (t.state.gzhead = e, X),Bt = (t, e) => {if (It(t) || e > Y || e < 0) return t ? gt(t, Q) : Q;const i = t.state;if (!t.output || 0 !== t.avail_in && !t.input || i.status === ft && e !== Z) return gt(t, 0 === t.avail_out ? et : Q);const n = i.last_flush;if (i.last_flush = e, 0 !== i.pending) {if (wt(t), 0 === t.avail_out) return i.last_flush = -1, X;} else if (0 === t.avail_in && mt(e) <= mt(n) && e !== Z) return gt(t, et);if (i.status === ft && 0 !== t.avail_in) return gt(t, et);if (i.status === dt && 0 === i.wrap && (i.status = pt), i.status === dt) {let e = ct + (i.w_bits - 8 << 4) << 8,n = -1;if (n = i.strategy >= rt || i.level < 2 ? 0 : i.level < 6 ? 1 : 6 === i.level ? 2 : 3, e |= n << 6, 0 !== i.strstart && (e |= 32), e += 31 - e % 31, Et(i, e), 0 !== i.strstart && (Et(i, t.adler >>> 16), Et(i, 65535 & t.adler)), t.adler = 1, i.status = pt, wt(t), 0 !== i.pending) return i.last_flush = -1, X;}if (57 === i.status) if (t.adler = 0, St(i, 31), St(i, 139), St(i, 8), i.gzhead) St(i, (i.gzhead.text ? 1 : 0) + (i.gzhead.hcrc ? 2 : 0) + (i.gzhead.extra ? 4 : 0) + (i.gzhead.name ? 8 : 0) + (i.gzhead.comment ? 16 : 0)), St(i, 255 & i.gzhead.time), St(i, i.gzhead.time >> 8 & 255), St(i, i.gzhead.time >> 16 & 255), St(i, i.gzhead.time >> 24 & 255), St(i, 9 === i.level ? 2 : i.strategy >= rt || i.level < 2 ? 4 : 0), St(i, 255 & i.gzhead.os), i.gzhead.extra && i.gzhead.extra.length && (St(i, 255 & i.gzhead.extra.length), St(i, i.gzhead.extra.length >> 8 & 255)), i.gzhead.hcrc && (t.adler = V(t.adler, i.pending_buf, i.pending, 0)), i.gzindex = 0, i.status = 69;else if (St(i, 0), St(i, 0), St(i, 0), St(i, 0), St(i, 0), St(i, 9 === i.level ? 2 : i.strategy >= rt || i.level < 2 ? 4 : 0), St(i, 3), i.status = pt, wt(t), 0 !== i.pending) return i.last_flush = -1, X;if (69 === i.status) {if (i.gzhead.extra) {let e = i.pending,n = (65535 & i.gzhead.extra.length) - i.gzindex;for (; i.pending + n > i.pending_buf_size;) {let r = i.pending_buf_size - i.pending;if (i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex, i.gzindex + r), i.pending), i.pending = i.pending_buf_size, i.gzhead.hcrc && i.pending > e && (t.adler = V(t.adler, i.pending_buf, i.pending - e, e)), i.gzindex += r, wt(t), 0 !== i.pending) return i.last_flush = -1, X;e = 0, n -= r;}let r = new Uint8Array(i.gzhead.extra);i.pending_buf.set(r.subarray(i.gzindex, i.gzindex + n), i.pending), i.pending += n, i.gzhead.hcrc && i.pending > e && (t.adler = V(t.adler, i.pending_buf, i.pending - e, e)), i.gzindex = 0;}i.status = 73;}if (73 === i.status) {if (i.gzhead.name) {let e,n = i.pending;do {if (i.pending === i.pending_buf_size) {if (i.gzhead.hcrc && i.pending > n && (t.adler = V(t.adler, i.pending_buf, i.pending - n, n)), wt(t), 0 !== i.pending) return i.last_flush = -1, X;n = 0;}e = i.gzindex < i.gzhead.name.length ? 255 & i.gzhead.name.charCodeAt(i.gzindex++) : 0, St(i, e);} while (0 !== e);i.gzhead.hcrc && i.pending > n && (t.adler = V(t.adler, i.pending_buf, i.pending - n, n)), i.gzindex = 0;}i.status = 91;}if (91 === i.status) {if (i.gzhead.comment) {let e,n = i.pending;do {if (i.pending === i.pending_buf_size) {if (i.gzhead.hcrc && i.pending > n && (t.adler = V(t.adler, i.pending_buf, i.pending - n, n)), wt(t), 0 !== i.pending) return i.last_flush = -1, X;n = 0;}e = i.gzindex < i.gzhead.comment.length ? 255 & i.gzhead.comment.charCodeAt(i.gzindex++) : 0, St(i, e);} while (0 !== e);i.gzhead.hcrc && i.pending > n && (t.adler = V(t.adler, i.pending_buf, i.pending - n, n));}i.status = 103;}if (103 === i.status) {if (i.gzhead.hcrc) {if (i.pending + 2 > i.pending_buf_size && (wt(t), 0 !== i.pending)) return i.last_flush = -1, X;St(i, 255 & t.adler), St(i, t.adler >> 8 & 255), t.adler = 0;}if (i.status = pt, wt(t), 0 !== i.pending) return i.last_flush = -1, X;}if (0 !== t.avail_in || 0 !== i.lookahead || e !== G && i.status !== ft) {let n = 0 === i.level ? At(i, e) : i.strategy === rt ? ((t, e) => {let i;for (;;) {if (0 === t.lookahead && (Tt(t), 0 === t.lookahead)) {if (e === G) return 1;break;}if (t.match_length = 0, i = q(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++, i && (xt(t, !1), 0 === t.strm.avail_out)) return 1;}return t.insert = 0, e === Z ? (xt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : t.sym_next && (xt(t, !1), 0 === t.strm.avail_out) ? 1 : 2;})(i, e) : i.strategy === st ? ((t, e) => {let i, n, r, s;const o = t.window;for (;;) {if (t.lookahead <= ht) {if (Tt(t), t.lookahead <= ht && e === G) return 1;if (0 === t.lookahead) break;}if (t.match_length = 0, t.lookahead >= 3 && t.strstart > 0 && (r = t.strstart - 1, n = o[r], n === o[++r] && n === o[++r] && n === o[++r])) {s = t.strstart + ht;do {} while (n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && r < s);t.match_length = ht - (s - r), t.match_length > t.lookahead && (t.match_length = t.lookahead);}if (t.match_length >= 3 ? (i = q(t, 1, t.match_length - 3), t.lookahead -= t.match_length, t.strstart += t.match_length, t.match_length = 0) : (i = q(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++), i && (xt(t, !1), 0 === t.strm.avail_out)) return 1;}return t.insert = 0, e === Z ? (xt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : t.sym_next && (xt(t, !1), 0 === t.strm.avail_out) ? 1 : 2;})(i, e) : Dt[i.level].func(i, e);if (3 !== n && 4 !== n || (i.status = ft), 1 === n || 3 === n) return 0 === t.avail_out && (i.last_flush = -1), X;if (2 === n && (e === W ? $(i) : e !== Y && (U(i, 0, 0, !1), e === K && (vt(i.head), 0 === i.lookahead && (i.strstart = 0, i.block_start = 0, i.insert = 0))), wt(t), 0 === t.avail_out)) return i.last_flush = -1, X;}return e !== Z ? X : i.wrap <= 0 ? J : (2 === i.wrap ? (St(i, 255 & t.adler), St(i, t.adler >> 8 & 255), St(i, t.adler >> 16 & 255), St(i, t.adler >> 24 & 255), St(i, 255 & t.total_in), St(i, t.total_in >> 8 & 255), St(i, t.total_in >> 16 & 255), St(i, t.total_in >> 24 & 255)) : (Et(i, t.adler >>> 16), Et(i, 65535 & t.adler)), wt(t), i.wrap > 0 && (i.wrap = -i.wrap), 0 !== i.pending ? X : J);},jt = (t) => {if (It(t)) return Q;const e = t.state.status;return t.state = null, e === pt ? gt(t, tt) : X;},zt = (t, e) => {let i = e.length;if (It(t)) return Q;const n = t.state,r = n.wrap;if (2 === r || 1 === r && n.status !== dt || n.lookahead) return Q;if (1 === r && (t.adler = L(t.adler, e, i, 0)), n.wrap = 0, i >= n.w_size) {0 === r && (vt(n.head), n.strstart = 0, n.block_start = 0, n.insert = 0);let t = new Uint8Array(n.w_size);t.set(e.subarray(i - n.w_size, i), 0), e = t, i = n.w_size;}const s = t.avail_in,o = t.next_in,a = t.input;for (t.avail_in = i, t.next_in = 0, t.input = e, Tt(n); n.lookahead >= 3;) {let t = n.strstart,e = n.lookahead - 2;do {n.ins_h = bt(n, n.ins_h, n.window[t + 3 - 1]), n.prev[t & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = t, t++;} while (--e);n.strstart = t, n.lookahead = 2, Tt(n);}return n.strstart += n.lookahead, n.block_start = n.strstart, n.insert = n.lookahead, n.lookahead = 0, n.match_length = n.prev_length = 2, n.match_available = 0, t.next_in = o, t.input = a, t.avail_in = s, n.wrap = r, X;};const Ut = (t, e) => Object.prototype.hasOwnProperty.call(t, e);var Ht = function (t) {const e = Array.prototype.slice.call(arguments, 1);for (; e.length;) {const i = e.shift();if (i) {if ("object" != typeof i) throw new TypeError(i + "must be non-object");for (const e in i) Ut(i, e) && (t[e] = i[e]);}}return t;},qt = (t) => {let e = 0;for (let i = 0, n = t.length; i < n; i++) e += t[i].length;const i = new Uint8Array(e);for (let e = 0, n = 0, r = t.length; e < r; e++) {let r = t[e];i.set(r, n), n += r.length;}return i;};let $t = !0;try {String.fromCharCode.apply(null, new Uint8Array(1));} catch (t) {$t = !1;}const Gt = new Uint8Array(256);for (let t = 0; t < 256; t++) Gt[t] = t >= 252 ? 6 : t >= 248 ? 5 : t >= 240 ? 4 : t >= 224 ? 3 : t >= 192 ? 2 : 1;Gt[254] = Gt[254] = 1;var Wt = (t) => {if ("function" == typeof TextEncoder && TextEncoder.prototype.encode) return new TextEncoder().encode(t);let e,i,n,r,s,o = t.length,a = 0;for (r = 0; r < o; r++) i = t.charCodeAt(r), 55296 == (64512 & i) && r + 1 < o && (n = t.charCodeAt(r + 1), 56320 == (64512 & n) && (i = 65536 + (i - 55296 << 10) + (n - 56320), r++)), a += i < 128 ? 1 : i < 2048 ? 2 : i < 65536 ? 3 : 4;for (e = new Uint8Array(a), s = 0, r = 0; s < a; r++) i = t.charCodeAt(r), 55296 == (64512 & i) && r + 1 < o && (n = t.charCodeAt(r + 1), 56320 == (64512 & n) && (i = 65536 + (i - 55296 << 10) + (n - 56320), r++)), i < 128 ? e[s++] = i : i < 2048 ? (e[s++] = 192 | i >>> 6, e[s++] = 128 | 63 & i) : i < 65536 ? (e[s++] = 224 | i >>> 12, e[s++] = 128 | i >>> 6 & 63, e[s++] = 128 | 63 & i) : (e[s++] = 240 | i >>> 18, e[s++] = 128 | i >>> 12 & 63, e[s++] = 128 | i >>> 6 & 63, e[s++] = 128 | 63 & i);return e;},Kt = (t, e) => {const i = e || t.length;if ("function" == typeof TextDecoder && TextDecoder.prototype.decode) return new TextDecoder().decode(t.subarray(0, e));let n, r;const s = new Array(2 * i);for (r = 0, n = 0; n < i;) {let e = t[n++];if (e < 128) {s[r++] = e;continue;}let o = Gt[e];if (o > 4) s[r++] = 65533, n += o - 1;else {for (e &= 2 === o ? 31 : 3 === o ? 15 : 7; o > 1 && n < i;) e = e << 6 | 63 & t[n++], o--;o > 1 ? s[r++] = 65533 : e < 65536 ? s[r++] = e : (e -= 65536, s[r++] = 55296 | e >> 10 & 1023, s[r++] = 56320 | 1023 & e);}}return ((t, e) => {if (e < 65534 && t.subarray && $t) return String.fromCharCode.apply(null, t.length === e ? t : t.subarray(0, e));let i = "";for (let n = 0; n < e; n++) i += String.fromCharCode(t[n]);return i;})(s, r);},Zt = (t, e) => {(e = e || t.length) > t.length && (e = t.length);let i = e - 1;for (; i >= 0 && 128 == (192 & t[i]);) i--;return i < 0 || 0 === i ? e : i + Gt[t[i]] > e ? i : e;},Yt = function () {this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;};const Xt = Object.prototype.toString,{ Z_NO_FLUSH: Jt, Z_SYNC_FLUSH: Qt, Z_FULL_FLUSH: te, Z_FINISH: ee, Z_OK: ie, Z_STREAM_END: ne, Z_DEFAULT_COMPRESSION: re, Z_DEFAULT_STRATEGY: se, Z_DEFLATED: oe } = j;function ae(t) {this.options = Ht({ level: re, method: oe, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: se }, t || {});let e = this.options;e.raw && e.windowBits > 0 ? e.windowBits = -e.windowBits : e.gzip && e.windowBits > 0 && e.windowBits < 16 && (e.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new Yt(), this.strm.avail_out = 0;let i = Nt(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy);if (i !== ie) throw new Error(B[i]);if (e.header && Vt(this.strm, e.header), e.dictionary) {let t;if (t = "string" == typeof e.dictionary ? Wt(e.dictionary) : "[object ArrayBuffer]" === Xt.call(e.dictionary) ? new Uint8Array(e.dictionary) : e.dictionary, i = zt(this.strm, t), i !== ie) throw new Error(B[i]);this._dict_set = !0;}}function le(t, e) {const i = new ae(e);if (i.push(t, !0), i.err) throw i.msg || B[i.err];return i.result;}ae.prototype.push = function (t, e) {const i = this.strm,n = this.options.chunkSize;let r, s;if (this.ended) return !1;for (s = e === ~~e ? e : !0 === e ? ee : Jt, "string" == typeof t ? i.input = Wt(t) : "[object ArrayBuffer]" === Xt.call(t) ? i.input = new Uint8Array(t) : i.input = t, i.next_in = 0, i.avail_in = i.input.length;;) if (0 === i.avail_out && (i.output = new Uint8Array(n), i.next_out = 0, i.avail_out = n), (s === Qt || s === te) && i.avail_out <= 6) this.onData(i.output.subarray(0, i.next_out)), i.avail_out = 0;else {if (r = Bt(i, s), r === ne) return i.next_out > 0 && this.onData(i.output.subarray(0, i.next_out)), r = jt(this.strm), this.onEnd(r), this.ended = !0, r === ie;if (0 !== i.avail_out) {if (s > 0 && i.next_out > 0) this.onData(i.output.subarray(0, i.next_out)), i.avail_out = 0;else if (0 === i.avail_in) break;} else this.onData(i.output);}return !0;}, ae.prototype.onData = function (t) {this.chunks.push(t);}, ae.prototype.onEnd = function (t) {t === ie && (this.result = qt(this.chunks)), this.chunks = [], this.err = t, this.msg = this.strm.msg;};var ce = { Deflate: ae, deflate: le, deflateRaw: function (t, e) {return (e = e || {}).raw = !0, le(t, e);}, gzip: function (t, e) {return (e = e || {}).gzip = !0, le(t, e);}, constants: j };const he = 16209;var ue = function (t, e) {let i, n, r, s, o, a, l, c, h, u, d, p, f, g, m, v, y, b, w, x, S, E, C, k;const T = t.state;i = t.next_in, C = t.input, n = i + (t.avail_in - 5), r = t.next_out, k = t.output, s = r - (e - t.avail_out), o = r + (t.avail_out - 257), a = T.dmax, l = T.wsize, c = T.whave, h = T.wnext, u = T.window, d = T.hold, p = T.bits, f = T.lencode, g = T.distcode, m = (1 << T.lenbits) - 1, v = (1 << T.distbits) - 1;t: do {p < 15 && (d += C[i++] << p, p += 8, d += C[i++] << p, p += 8), y = f[d & m];e: for (;;) {if (b = y >>> 24, d >>>= b, p -= b, b = y >>> 16 & 255, 0 === b) k[r++] = 65535 & y;else {if (!(16 & b)) {if (64 & b) {if (32 & b) {T.mode = 16191;break t;}t.msg = "invalid literal/length code", T.mode = he;break t;}y = f[(65535 & y) + (d & (1 << b) - 1)];continue e;}for (w = 65535 & y, b &= 15, b && (p < b && (d += C[i++] << p, p += 8), w += d & (1 << b) - 1, d >>>= b, p -= b), p < 15 && (d += C[i++] << p, p += 8, d += C[i++] << p, p += 8), y = g[d & v];;) {if (b = y >>> 24, d >>>= b, p -= b, b = y >>> 16 & 255, 16 & b) {if (x = 65535 & y, b &= 15, p < b && (d += C[i++] << p, p += 8, p < b && (d += C[i++] << p, p += 8)), x += d & (1 << b) - 1, x > a) {t.msg = "invalid distance too far back", T.mode = he;break t;}if (d >>>= b, p -= b, b = r - s, x > b) {if (b = x - b, b > c && T.sane) {t.msg = "invalid distance too far back", T.mode = he;break t;}if (S = 0, E = u, 0 === h) {if (S += l - b, b < w) {w -= b;do {k[r++] = u[S++];} while (--b);S = r - x, E = k;}} else if (h < b) {if (S += l + h - b, b -= h, b < w) {w -= b;do {k[r++] = u[S++];} while (--b);if (S = 0, h < w) {b = h, w -= b;do {k[r++] = u[S++];} while (--b);S = r - x, E = k;}}} else if (S += h - b, b < w) {w -= b;do {k[r++] = u[S++];} while (--b);S = r - x, E = k;}for (; w > 2;) k[r++] = E[S++], k[r++] = E[S++], k[r++] = E[S++], w -= 3;w && (k[r++] = E[S++], w > 1 && (k[r++] = E[S++]));} else {S = r - x;do {k[r++] = k[S++], k[r++] = k[S++], k[r++] = k[S++], w -= 3;} while (w > 2);w && (k[r++] = k[S++], w > 1 && (k[r++] = k[S++]));}break;}if (64 & b) {t.msg = "invalid distance code", T.mode = he;break t;}y = g[(65535 & y) + (d & (1 << b) - 1)];}}break;}} while (i < n && r < o);w = p >> 3, i -= w, p -= w << 3, d &= (1 << p) - 1, t.next_in = i, t.next_out = r, t.avail_in = i < n ? n - i + 5 : 5 - (i - n), t.avail_out = r < o ? o - r + 257 : 257 - (r - o), T.hold = d, T.bits = p;};const de = new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]),pe = new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]),fe = new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]),ge = new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]);var me = (t, e, i, n, r, s, o, a) => {const l = a.bits;let c,h,u,d,p,f,g = 0,m = 0,v = 0,y = 0,b = 0,w = 0,x = 0,S = 0,E = 0,C = 0,k = null;const T = new Uint16Array(16),A = new Uint16Array(16);let M,_,P,D = null;for (g = 0; g <= 15; g++) T[g] = 0;for (m = 0; m < n; m++) T[e[i + m]]++;for (b = l, y = 15; y >= 1 && 0 === T[y]; y--);if (b > y && (b = y), 0 === y) return r[s++] = 20971520, r[s++] = 20971520, a.bits = 1, 0;for (v = 1; v < y && 0 === T[v]; v++);for (b < v && (b = v), S = 1, g = 1; g <= 15; g++) if (S <<= 1, S -= T[g], S < 0) return -1;if (S > 0 && (0 === t || 1 !== y)) return -1;for (A[1] = 0, g = 1; g < 15; g++) A[g + 1] = A[g] + T[g];for (m = 0; m < n; m++) 0 !== e[i + m] && (o[A[e[i + m]]++] = m);if (0 === t ? (k = D = o, f = 20) : 1 === t ? (k = de, D = pe, f = 257) : (k = fe, D = ge, f = 0), C = 0, m = 0, g = v, p = s, w = b, x = 0, u = -1, E = 1 << b, d = E - 1, 1 === t && E > 852 || 2 === t && E > 592) return 1;for (;;) {M = g - x, o[m] + 1 < f ? (_ = 0, P = o[m]) : o[m] >= f ? (_ = D[o[m] - f], P = k[o[m] - f]) : (_ = 96, P = 0), c = 1 << g - x, h = 1 << w, v = h;do {h -= c, r[p + (C >> x) + h] = M << 24 | _ << 16 | P;} while (0 !== h);for (c = 1 << g - 1; C & c;) c >>= 1;if (0 !== c ? (C &= c - 1, C += c) : C = 0, m++, 0 === --T[g]) {if (g === y) break;g = e[i + o[m]];}if (g > b && (C & d) !== u) {for (0 === x && (x = b), p += v, w = g - x, S = 1 << w; w + x < y && (S -= T[w + x], !(S <= 0));) w++, S <<= 1;if (E += 1 << w, 1 === t && E > 852 || 2 === t && E > 592) return 1;u = C & d, r[u] = b << 24 | w << 16 | p - s;}}return 0 !== C && (r[p + C] = g - x << 24 | 64 << 16), a.bits = b, 0;};const { Z_FINISH: ve, Z_BLOCK: ye, Z_TREES: be, Z_OK: we, Z_STREAM_END: xe, Z_NEED_DICT: Se, Z_STREAM_ERROR: Ee, Z_DATA_ERROR: Ce, Z_MEM_ERROR: ke, Z_BUF_ERROR: Te, Z_DEFLATED: Ae } = j,Me = 16180,_e = 16190,Pe = 16191,De = 16192,Oe = 16194,Ie = 16199,Fe = 16200,Re = 16206,Le = 16209,Ne = (t) => (t >>> 24 & 255) + (t >>> 8 & 65280) + ((65280 & t) << 8) + ((255 & t) << 24);function Ve() {this.strm = null, this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Uint16Array(320), this.work = new Uint16Array(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;}const Be = (t) => {if (!t) return 1;const e = t.state;return !e || e.strm !== t || e.mode < Me || e.mode > 16211 ? 1 : 0;},je = (t) => {if (Be(t)) return Ee;const e = t.state;return t.total_in = t.total_out = e.total = 0, t.msg = "", e.wrap && (t.adler = 1 & e.wrap), e.mode = Me, e.last = 0, e.havedict = 0, e.flags = -1, e.dmax = 32768, e.head = null, e.hold = 0, e.bits = 0, e.lencode = e.lendyn = new Int32Array(852), e.distcode = e.distdyn = new Int32Array(592), e.sane = 1, e.back = -1, we;},ze = (t) => {if (Be(t)) return Ee;const e = t.state;return e.wsize = 0, e.whave = 0, e.wnext = 0, je(t);},Ue = (t, e) => {let i;if (Be(t)) return Ee;const n = t.state;return e < 0 ? (i = 0, e = -e) : (i = 5 + (e >> 4), e < 48 && (e &= 15)), e && (e < 8 || e > 15) ? Ee : (null !== n.window && n.wbits !== e && (n.window = null), n.wrap = i, n.wbits = e, ze(t));},He = (t, e) => {if (!t) return Ee;const i = new Ve();t.state = i, i.strm = t, i.window = null, i.mode = Me;const n = Ue(t, e);return n !== we && (t.state = null), n;};let qe,$e,Ge = !0;const We = (t) => {if (Ge) {qe = new Int32Array(512), $e = new Int32Array(32);let e = 0;for (; e < 144;) t.lens[e++] = 8;for (; e < 256;) t.lens[e++] = 9;for (; e < 280;) t.lens[e++] = 7;for (; e < 288;) t.lens[e++] = 8;for (me(1, t.lens, 0, 288, qe, 0, t.work, { bits: 9 }), e = 0; e < 32;) t.lens[e++] = 5;me(2, t.lens, 0, 32, $e, 0, t.work, { bits: 5 }), Ge = !1;}t.lencode = qe, t.lenbits = 9, t.distcode = $e, t.distbits = 5;},Ke = (t, e, i, n) => {let r;const s = t.state;return null === s.window && (s.wsize = 1 << s.wbits, s.wnext = 0, s.whave = 0, s.window = new Uint8Array(s.wsize)), n >= s.wsize ? (s.window.set(e.subarray(i - s.wsize, i), 0), s.wnext = 0, s.whave = s.wsize) : (r = s.wsize - s.wnext, r > n && (r = n), s.window.set(e.subarray(i - n, i - n + r), s.wnext), (n -= r) ? (s.window.set(e.subarray(i - n, i), 0), s.wnext = n, s.whave = s.wsize) : (s.wnext += r, s.wnext === s.wsize && (s.wnext = 0), s.whave < s.wsize && (s.whave += r))), 0;};var Ze = ze,Ye = He,Xe = (t, e) => {let i,n,r,s,o,a,l,c,h,u,d,p,f,g,m,v,y,b,w,x,S,E,C = 0;const k = new Uint8Array(4);let T, A;const M = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);if (Be(t) || !t.output || !t.input && 0 !== t.avail_in) return Ee;i = t.state, i.mode === Pe && (i.mode = De), o = t.next_out, r = t.output, l = t.avail_out, s = t.next_in, n = t.input, a = t.avail_in, c = i.hold, h = i.bits, u = a, d = l, E = we;t: for (;;) switch (i.mode) {case Me:if (0 === i.wrap) {i.mode = De;break;}for (; h < 16;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (2 & i.wrap && 35615 === c) {0 === i.wbits && (i.wbits = 15), i.check = 0, k[0] = 255 & c, k[1] = c >>> 8 & 255, i.check = V(i.check, k, 2, 0), c = 0, h = 0, i.mode = 16181;break;}if (i.head && (i.head.done = !1), !(1 & i.wrap) || (((255 & c) << 8) + (c >> 8)) % 31) {t.msg = "incorrect header check", i.mode = Le;break;}if ((15 & c) !== Ae) {t.msg = "unknown compression method", i.mode = Le;break;}if (c >>>= 4, h -= 4, S = 8 + (15 & c), 0 === i.wbits && (i.wbits = S), S > 15 || S > i.wbits) {t.msg = "invalid window size", i.mode = Le;break;}i.dmax = 1 << i.wbits, i.flags = 0, t.adler = i.check = 1, i.mode = 512 & c ? 16189 : Pe, c = 0, h = 0;break;case 16181:for (; h < 16;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (i.flags = c, (255 & i.flags) !== Ae) {t.msg = "unknown compression method", i.mode = Le;break;}if (57344 & i.flags) {t.msg = "unknown header flags set", i.mode = Le;break;}i.head && (i.head.text = c >> 8 & 1), 512 & i.flags && 4 & i.wrap && (k[0] = 255 & c, k[1] = c >>> 8 & 255, i.check = V(i.check, k, 2, 0)), c = 0, h = 0, i.mode = 16182;case 16182:for (; h < 32;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}i.head && (i.head.time = c), 512 & i.flags && 4 & i.wrap && (k[0] = 255 & c, k[1] = c >>> 8 & 255, k[2] = c >>> 16 & 255, k[3] = c >>> 24 & 255, i.check = V(i.check, k, 4, 0)), c = 0, h = 0, i.mode = 16183;case 16183:for (; h < 16;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}i.head && (i.head.xflags = 255 & c, i.head.os = c >> 8), 512 & i.flags && 4 & i.wrap && (k[0] = 255 & c, k[1] = c >>> 8 & 255, i.check = V(i.check, k, 2, 0)), c = 0, h = 0, i.mode = 16184;case 16184:if (1024 & i.flags) {for (; h < 16;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}i.length = c, i.head && (i.head.extra_len = c), 512 & i.flags && 4 & i.wrap && (k[0] = 255 & c, k[1] = c >>> 8 & 255, i.check = V(i.check, k, 2, 0)), c = 0, h = 0;} else i.head && (i.head.extra = null);i.mode = 16185;case 16185:if (1024 & i.flags && (p = i.length, p > a && (p = a), p && (i.head && (S = i.head.extra_len - i.length, i.head.extra || (i.head.extra = new Uint8Array(i.head.extra_len)), i.head.extra.set(n.subarray(s, s + p), S)), 512 & i.flags && 4 & i.wrap && (i.check = V(i.check, n, p, s)), a -= p, s += p, i.length -= p), i.length)) break t;i.length = 0, i.mode = 16186;case 16186:if (2048 & i.flags) {if (0 === a) break t;p = 0;do {S = n[s + p++], i.head && S && i.length < 65536 && (i.head.name += String.fromCharCode(S));} while (S && p < a);if (512 & i.flags && 4 & i.wrap && (i.check = V(i.check, n, p, s)), a -= p, s += p, S) break t;} else i.head && (i.head.name = null);i.length = 0, i.mode = 16187;case 16187:if (4096 & i.flags) {if (0 === a) break t;p = 0;do {S = n[s + p++], i.head && S && i.length < 65536 && (i.head.comment += String.fromCharCode(S));} while (S && p < a);if (512 & i.flags && 4 & i.wrap && (i.check = V(i.check, n, p, s)), a -= p, s += p, S) break t;} else i.head && (i.head.comment = null);i.mode = 16188;case 16188:if (512 & i.flags) {for (; h < 16;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (4 & i.wrap && c !== (65535 & i.check)) {t.msg = "header crc mismatch", i.mode = Le;break;}c = 0, h = 0;}i.head && (i.head.hcrc = i.flags >> 9 & 1, i.head.done = !0), t.adler = i.check = 0, i.mode = Pe;break;case 16189:for (; h < 32;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}t.adler = i.check = Ne(c), c = 0, h = 0, i.mode = _e;case _e:if (0 === i.havedict) return t.next_out = o, t.avail_out = l, t.next_in = s, t.avail_in = a, i.hold = c, i.bits = h, Se;t.adler = i.check = 1, i.mode = Pe;case Pe:if (e === ye || e === be) break t;case De:if (i.last) {c >>>= 7 & h, h -= 7 & h, i.mode = Re;break;}for (; h < 3;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}switch (i.last = 1 & c, c >>>= 1, h -= 1, 3 & c) {case 0:i.mode = 16193;break;case 1:if (We(i), i.mode = Ie, e === be) {c >>>= 2, h -= 2;break t;}break;case 2:i.mode = 16196;break;case 3:t.msg = "invalid block type", i.mode = Le;}c >>>= 2, h -= 2;break;case 16193:for (c >>>= 7 & h, h -= 7 & h; h < 32;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if ((65535 & c) != (c >>> 16 ^ 65535)) {t.msg = "invalid stored block lengths", i.mode = Le;break;}if (i.length = 65535 & c, c = 0, h = 0, i.mode = Oe, e === be) break t;case Oe:i.mode = 16195;case 16195:if (p = i.length, p) {if (p > a && (p = a), p > l && (p = l), 0 === p) break t;r.set(n.subarray(s, s + p), o), a -= p, s += p, l -= p, o += p, i.length -= p;break;}i.mode = Pe;break;case 16196:for (; h < 14;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (i.nlen = 257 + (31 & c), c >>>= 5, h -= 5, i.ndist = 1 + (31 & c), c >>>= 5, h -= 5, i.ncode = 4 + (15 & c), c >>>= 4, h -= 4, i.nlen > 286 || i.ndist > 30) {t.msg = "too many length or distance symbols", i.mode = Le;break;}i.have = 0, i.mode = 16197;case 16197:for (; i.have < i.ncode;) {for (; h < 3;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}i.lens[M[i.have++]] = 7 & c, c >>>= 3, h -= 3;}for (; i.have < 19;) i.lens[M[i.have++]] = 0;if (i.lencode = i.lendyn, i.lenbits = 7, T = { bits: i.lenbits }, E = me(0, i.lens, 0, 19, i.lencode, 0, i.work, T), i.lenbits = T.bits, E) {t.msg = "invalid code lengths set", i.mode = Le;break;}i.have = 0, i.mode = 16198;case 16198:for (; i.have < i.nlen + i.ndist;) {for (; C = i.lencode[c & (1 << i.lenbits) - 1], m = C >>> 24, v = C >>> 16 & 255, y = 65535 & C, !(m <= h);) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (y < 16) c >>>= m, h -= m, i.lens[i.have++] = y;else {if (16 === y) {for (A = m + 2; h < A;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (c >>>= m, h -= m, 0 === i.have) {t.msg = "invalid bit length repeat", i.mode = Le;break;}S = i.lens[i.have - 1], p = 3 + (3 & c), c >>>= 2, h -= 2;} else if (17 === y) {for (A = m + 3; h < A;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}c >>>= m, h -= m, S = 0, p = 3 + (7 & c), c >>>= 3, h -= 3;} else {for (A = m + 7; h < A;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}c >>>= m, h -= m, S = 0, p = 11 + (127 & c), c >>>= 7, h -= 7;}if (i.have + p > i.nlen + i.ndist) {t.msg = "invalid bit length repeat", i.mode = Le;break;}for (; p--;) i.lens[i.have++] = S;}}if (i.mode === Le) break;if (0 === i.lens[256]) {t.msg = "invalid code -- missing end-of-block", i.mode = Le;break;}if (i.lenbits = 9, T = { bits: i.lenbits }, E = me(1, i.lens, 0, i.nlen, i.lencode, 0, i.work, T), i.lenbits = T.bits, E) {t.msg = "invalid literal/lengths set", i.mode = Le;break;}if (i.distbits = 6, i.distcode = i.distdyn, T = { bits: i.distbits }, E = me(2, i.lens, i.nlen, i.ndist, i.distcode, 0, i.work, T), i.distbits = T.bits, E) {t.msg = "invalid distances set", i.mode = Le;break;}if (i.mode = Ie, e === be) break t;case Ie:i.mode = Fe;case Fe:if (a >= 6 && l >= 258) {t.next_out = o, t.avail_out = l, t.next_in = s, t.avail_in = a, i.hold = c, i.bits = h, ue(t, d), o = t.next_out, r = t.output, l = t.avail_out, s = t.next_in, n = t.input, a = t.avail_in, c = i.hold, h = i.bits, i.mode === Pe && (i.back = -1);break;}for (i.back = 0; C = i.lencode[c & (1 << i.lenbits) - 1], m = C >>> 24, v = C >>> 16 & 255, y = 65535 & C, !(m <= h);) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (v && !(240 & v)) {for (b = m, w = v, x = y; C = i.lencode[x + ((c & (1 << b + w) - 1) >> b)], m = C >>> 24, v = C >>> 16 & 255, y = 65535 & C, !(b + m <= h);) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}c >>>= b, h -= b, i.back += b;}if (c >>>= m, h -= m, i.back += m, i.length = y, 0 === v) {i.mode = 16205;break;}if (32 & v) {i.back = -1, i.mode = Pe;break;}if (64 & v) {t.msg = "invalid literal/length code", i.mode = Le;break;}i.extra = 15 & v, i.mode = 16201;case 16201:if (i.extra) {for (A = i.extra; h < A;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}i.length += c & (1 << i.extra) - 1, c >>>= i.extra, h -= i.extra, i.back += i.extra;}i.was = i.length, i.mode = 16202;case 16202:for (; C = i.distcode[c & (1 << i.distbits) - 1], m = C >>> 24, v = C >>> 16 & 255, y = 65535 & C, !(m <= h);) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (!(240 & v)) {for (b = m, w = v, x = y; C = i.distcode[x + ((c & (1 << b + w) - 1) >> b)], m = C >>> 24, v = C >>> 16 & 255, y = 65535 & C, !(b + m <= h);) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}c >>>= b, h -= b, i.back += b;}if (c >>>= m, h -= m, i.back += m, 64 & v) {t.msg = "invalid distance code", i.mode = Le;break;}i.offset = y, i.extra = 15 & v, i.mode = 16203;case 16203:if (i.extra) {for (A = i.extra; h < A;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}i.offset += c & (1 << i.extra) - 1, c >>>= i.extra, h -= i.extra, i.back += i.extra;}if (i.offset > i.dmax) {t.msg = "invalid distance too far back", i.mode = Le;break;}i.mode = 16204;case 16204:if (0 === l) break t;if (p = d - l, i.offset > p) {if (p = i.offset - p, p > i.whave && i.sane) {t.msg = "invalid distance too far back", i.mode = Le;break;}p > i.wnext ? (p -= i.wnext, f = i.wsize - p) : f = i.wnext - p, p > i.length && (p = i.length), g = i.window;} else g = r, f = o - i.offset, p = i.length;p > l && (p = l), l -= p, i.length -= p;do {r[o++] = g[f++];} while (--p);0 === i.length && (i.mode = Fe);break;case 16205:if (0 === l) break t;r[o++] = i.length, l--, i.mode = Fe;break;case Re:if (i.wrap) {for (; h < 32;) {if (0 === a) break t;a--, c |= n[s++] << h, h += 8;}if (d -= l, t.total_out += d, i.total += d, 4 & i.wrap && d && (t.adler = i.check = i.flags ? V(i.check, r, d, o - d) : L(i.check, r, d, o - d)), d = l, 4 & i.wrap && (i.flags ? c : Ne(c)) !== i.check) {t.msg = "incorrect data check", i.mode = Le;break;}c = 0, h = 0;}i.mode = 16207;case 16207:if (i.wrap && i.flags) {for (; h < 32;) {if (0 === a) break t;a--, c += n[s++] << h, h += 8;}if (4 & i.wrap && c !== (4294967295 & i.total)) {t.msg = "incorrect length check", i.mode = Le;break;}c = 0, h = 0;}i.mode = 16208;case 16208:E = xe;break t;case Le:E = Ce;break t;case 16210:return ke;default:return Ee;}return t.next_out = o, t.avail_out = l, t.next_in = s, t.avail_in = a, i.hold = c, i.bits = h, (i.wsize || d !== t.avail_out && i.mode < Le && (i.mode < Re || e !== ve)) && Ke(t, t.output, t.next_out, d - t.avail_out), u -= t.avail_in, d -= t.avail_out, t.total_in += u, t.total_out += d, i.total += d, 4 & i.wrap && d && (t.adler = i.check = i.flags ? V(i.check, r, d, t.next_out - d) : L(i.check, r, d, t.next_out - d)), t.data_type = i.bits + (i.last ? 64 : 0) + (i.mode === Pe ? 128 : 0) + (i.mode === Ie || i.mode === Oe ? 256 : 0), (0 === u && 0 === d || e === ve) && E === we && (E = Te), E;},Je = (t) => {if (Be(t)) return Ee;let e = t.state;return e.window && (e.window = null), t.state = null, we;},Qe = (t, e) => {if (Be(t)) return Ee;const i = t.state;return 2 & i.wrap ? (i.head = e, e.done = !1, we) : Ee;},ti = (t, e) => {const i = e.length;let n, r, s;return Be(t) ? Ee : (n = t.state, 0 !== n.wrap && n.mode !== _e ? Ee : n.mode === _e && (r = 1, r = L(r, e, i, 0), r !== n.check) ? Ce : (s = Ke(t, e, i, i), s ? (n.mode = 16210, ke) : (n.havedict = 1, we)));},ei = function () {this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1;};const ii = Object.prototype.toString,{ Z_NO_FLUSH: ni, Z_FINISH: ri, Z_OK: si, Z_STREAM_END: oi, Z_NEED_DICT: ai, Z_STREAM_ERROR: li, Z_DATA_ERROR: ci, Z_MEM_ERROR: hi } = j;function ui(t) {this.options = Ht({ chunkSize: 65536, windowBits: 15, to: "" }, t || {});const e = this.options;e.raw && e.windowBits >= 0 && e.windowBits < 16 && (e.windowBits = -e.windowBits, 0 === e.windowBits && (e.windowBits = -15)), !(e.windowBits >= 0 && e.windowBits < 16) || t && t.windowBits || (e.windowBits += 32), e.windowBits > 15 && e.windowBits < 48 && (15 & e.windowBits || (e.windowBits |= 15)), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new Yt(), this.strm.avail_out = 0;let i = Ye(this.strm, e.windowBits);if (i !== si) throw new Error(B[i]);if (this.header = new ei(), Qe(this.strm, this.header), e.dictionary && ("string" == typeof e.dictionary ? e.dictionary = Wt(e.dictionary) : "[object ArrayBuffer]" === ii.call(e.dictionary) && (e.dictionary = new Uint8Array(e.dictionary)), e.raw && (i = ti(this.strm, e.dictionary), i !== si))) throw new Error(B[i]);}function di(t, e) {const i = new ui(e);if (i.push(t), i.err) throw i.msg || B[i.err];return i.result;}ui.prototype.push = function (t, e) {const i = this.strm,n = this.options.chunkSize,r = this.options.dictionary;let s, o, a;if (this.ended) return !1;for (o = e === ~~e ? e : !0 === e ? ri : ni, "[object ArrayBuffer]" === ii.call(t) ? i.input = new Uint8Array(t) : i.input = t, i.next_in = 0, i.avail_in = i.input.length;;) {for (0 === i.avail_out && (i.output = new Uint8Array(n), i.next_out = 0, i.avail_out = n), s = Xe(i, o), s === ai && r && (s = ti(i, r), s === si ? s = Xe(i, o) : s === ci && (s = ai)); i.avail_in > 0 && s === oi && i.state.wrap > 0 && 0 !== t[i.next_in];) Ze(i), s = Xe(i, o);switch (s) {case li:case ci:case ai:case hi:return this.onEnd(s), this.ended = !0, !1;}if (a = i.avail_out, i.next_out && (0 === i.avail_out || s === oi)) if ("string" === this.options.to) {let t = Zt(i.output, i.next_out),e = i.next_out - t,r = Kt(i.output, t);i.next_out = e, i.avail_out = n - e, e && i.output.set(i.output.subarray(t, t + e), 0), this.onData(r);} else this.onData(i.output.length === i.next_out ? i.output : i.output.subarray(0, i.next_out));if (s !== si || 0 !== a) {if (s === oi) return s = Je(this.strm), this.onEnd(s), this.ended = !0, !0;if (0 === i.avail_in) break;}}return !0;}, ui.prototype.onData = function (t) {this.chunks.push(t);}, ui.prototype.onEnd = function (t) {t === si && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = qt(this.chunks)), this.chunks = [], this.err = t, this.msg = this.strm.msg;};var pi = { Inflate: ui, inflate: di, inflateRaw: function (t, e) {return (e = e || {}).raw = !0, di(t, e);}, ungzip: di, constants: j };const { Deflate: fi, deflate: gi, deflateRaw: mi, gzip: vi } = ce,{ Inflate: yi, inflate: bi, inflateRaw: wi, ungzip: xi } = pi;var Si = { Deflate: fi, deflate: gi, deflateRaw: mi, gzip: vi, Inflate: yi, inflate: bi, inflateRaw: wi, ungzip: xi, constants: j };}, 3100: (t, e, i) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.formattingEncoder = e.dateTimeFormat = e.numberFormat = e.formattingService = e.FormattingService = void 0;var n = i(7717);(0, i(980).default)(n.Globalize);var r = i(6394);e.dateTimeFormat = r;var s = i(7534);e.numberFormat = s;var o = i(6459);e.formattingEncoder = o;var a = i(3351),l = /({{)|(}})|{(\d+[^}]*)}/g,c = function () {function t() {}return t.prototype.formatValue = function (t, e, i) {if (null == t) return "";var n = this.getCulture(i);return r.canFormat(t) ? r.format(t, e, n) : s.canFormat(t) ? s.format(t, e, n) : t.toString();}, t.prototype.format = function (t, e, i) {var n = this;return t ? t.replace(l, function (t, r, s, o) {if (r) return "{";if (s) return "}";var a = o.split(":"),l = parseInt(a[0], 10),c = a[1];return n.formatValue(e[l], c, i);}) : "";}, t.prototype.isStandardNumberFormat = function (t) {return s.isStandardFormat(t);}, t.prototype.formatNumberWithCustomOverride = function (t, e, i, n) {var r = this.getCulture(n);return s.formatWithCustomOverride(t, e, i, r);}, t.prototype.dateFormatString = function (t) {return this._dateTimeScaleFormatInfo || this.initialize(), this._dateTimeScaleFormatInfo.getFormatString(t);}, t.prototype.setCurrentCulture = function (t) {this._currentCultureSelector !== t && (this._currentCulture = this.getCulture(t), this._currentCultureSelector = t, this._dateTimeScaleFormatInfo = new h(this._currentCulture));}, t.prototype.getCulture = function (t) {if (null == t) return null == this._currentCulture && this.initialize(), this._currentCulture;var e = n.Globalize.findClosestCulture(t);return e || (e = n.Globalize.culture("en-US")), e;}, t.prototype.initialize = function () {var t = this.getCurrentCulture();this.setCurrentCulture(t);var e = this.getUrlParam("calendar");if (e) {var i = this._currentCulture,n = i.calendars[e];n && (i.calendar = n);}}, t.prototype.getCurrentCulture = function () {return (null === window || void 0 === window ? void 0 : window.navigator) ? window.navigator.userLanguage || window.navigator.language : "en-US";}, t.prototype.getUrlParam = function (t) {var e = window.location.search.match(RegExp("[?&]" + t + "=([^&]*)"));return e ? e[1] : void 0;}, t;}();e.FormattingService = c;var h = function () {function t(t) {var e = t.calendar,i = e.patterns,n = e.months.namesAbbr,r = n && n[0],s = i.Y,o = i.M,a = i.f,l = i.T,c = i.t,h = a.indexOf(",") > -1 ? ", " : " ",u = 0 === s.indexOf("yyyy'") && s.length > 6 && "'" === s[6];this.YearPattern = u ? s.substring(0, 7) : "yyyy";var d = a.indexOf("yy"),p = a.indexOf("MMMM");this.MonthPattern = r && p > -1 ? d > p ? "MMM yyyy" : "yyyy MMM" : s, this.DayPattern = r ? o.replace("MMMM", "MMM") : o;var f = a.indexOf("mm"),g = a.indexOf("tt") > -1 ? c.replace(":mm ", "") : c;this.HourPattern = d < f ? this.DayPattern + h + g : g + h + this.DayPattern, this.MinutePattern = c, this.SecondPattern = l, this.MillisecondPattern = l.replace("ss", "ss.fff"), "fi-FI" === t.name && (this.DayPattern = this.DayPattern.replace("'ta'", ""), this.HourPattern = this.HourPattern.replace("'ta'", ""));}return t.prototype.getFormatString = function (t) {switch (t) {case a.DateTimeUnit.Year:return this.YearPattern;case a.DateTimeUnit.Month:return this.MonthPattern;case a.DateTimeUnit.Week:case a.DateTimeUnit.Day:return this.DayPattern;case a.DateTimeUnit.Hour:return this.HourPattern;case a.DateTimeUnit.Minute:return this.MinutePattern;case a.DateTimeUnit.Second:return this.SecondPattern;case a.DateTimeUnit.Millisecond:return this.MillisecondPattern;}}, t;}(),u = new c();e.formattingService = u;}, 3102: (t, e, i) => {"use strict";i.d(e, { Z: () => r });var n = i(9589);function r(t, e, i) {const r = n.parse(t),s = n.parse(e);return r && s ? (!1 === i?.patch && (r.patch = 0, s.patch = 0), !1 === i?.minor && (r.minor = 0, s.minor = 0), !1 === i?.major && (r.major = 0, s.major = 0), n.compare(r, s)) : 0;}}, 3116: (t, e, i) => {"use strict";i.r(e), i.d(e, { DataViewObjectsParser: () => r });var n = i(6271);class r {static getDefault() {return new this();}static createPropertyIdentifier(t, e) {return { objectName: t, propertyName: e };}static parse(t) {const e = this.getDefault();if (!t || !t.metadata || !t.metadata.objects) return e;const i = e.getProperties();for (const r in i) for (const s in i[r]) {const o = e[r][s];e[r][s] = n.getCommonValue(t.metadata.objects, i[r][s], o);}return e;}static isPropertyEnumerable(t) {return !r.InnumerablePropertyPrefix.test(t);}static enumerateObjectInstances(t, e) {const i = t && t[e.objectName];if (!i) return [];const n = { objectName: e.objectName, selector: null, properties: {} };for (const t in i) Object.prototype.hasOwnProperty.call(i, t) && (n.properties[t] = i[t]);return { instances: [n] };}getProperties() {const t = {};return Object.keys(this).forEach((e) => {if (r.isPropertyEnumerable(e)) {const i = Object.keys(this[e]);t[e] = {}, i.forEach((i) => {r.isPropertyEnumerable(e) && (t[e][i] = r.createPropertyIdentifier(e, i));});}}), t;}}r.InnumerablePropertyPrefix = /^_/;}, 3124: function (t, e) {!function (t) {"use strict";function e(t) {return "object" == typeof t && "function" == typeof t.to;}function i(t) {t.parentElement.removeChild(t);}function n(t) {return null != t;}function r(t) {t.preventDefault();}function s(t) {return "number" == typeof t && !isNaN(t) && isFinite(t);}function o(t, e, i) {i > 0 && (h(t, e), setTimeout(function () {u(t, e);}, i));}function a(t) {return Math.max(Math.min(t, 100), 0);}function l(t) {return Array.isArray(t) ? t : [t];}function c(t) {var e = (t = String(t)).split(".");return e.length > 1 ? e[1].length : 0;}function h(t, e) {t.classList && !/\s/.test(e) ? t.classList.add(e) : t.className += " " + e;}function u(t, e) {t.classList && !/\s/.test(e) ? t.classList.remove(e) : t.className = t.className.replace(new RegExp("(^|\\b)" + e.split(" ").join("|") + "(\\b|$)", "gi"), " ");}function d(t) {var e = void 0 !== window.pageXOffset,i = "CSS1Compat" === (t.compatMode || "");return { x: e ? window.pageXOffset : i ? t.documentElement.scrollLeft : t.body.scrollLeft, y: e ? window.pageYOffset : i ? t.documentElement.scrollTop : t.body.scrollTop };}function p(t, e) {return 100 / (e - t);}function f(t, e, i) {return 100 * e / (t[i + 1] - t[i]);}function g(t, e) {for (var i = 1; t >= e[i];) i += 1;return i;}function m(t, e, i) {if (i >= t.slice(-1)[0]) return 100;var n = g(i, t),r = t[n - 1],s = t[n],o = e[n - 1],a = e[n];return o + function (t, e) {return f(t, t[0] < 0 ? e + Math.abs(t[0]) : e - t[0], 0);}([r, s], i) / p(o, a);}function v(t, e, i, n) {if (100 === n) return n;var r = g(n, t),s = t[r - 1],o = t[r];return i ? n - s > (o - s) / 2 ? o : s : e[r - 1] ? t[r - 1] + function (t, e) {return Math.round(t / e) * e;}(n - t[r - 1], e[r - 1]) : n;}var y, b;t.PipsMode = void 0, (b = t.PipsMode || (t.PipsMode = {})).Range = "range", b.Steps = "steps", b.Positions = "positions", b.Count = "count", b.Values = "values", t.PipsType = void 0, (y = t.PipsType || (t.PipsType = {}))[y.None = -1] = "None", y[y.NoValue = 0] = "NoValue", y[y.LargeValue = 1] = "LargeValue", y[y.SmallValue = 2] = "SmallValue";var w = function () {function t(t, e, i) {var n;this.xPct = [], this.xVal = [], this.xSteps = [], this.xNumSteps = [], this.xHighestCompleteStep = [], this.xSteps = [i || !1], this.xNumSteps = [!1], this.snap = e;var r = [];for (Object.keys(t).forEach(function (e) {r.push([l(t[e]), e]);}), r.sort(function (t, e) {return t[0][0] - e[0][0];}), n = 0; n < r.length; n++) this.handleEntryPoint(r[n][1], r[n][0]);for (this.xNumSteps = this.xSteps.slice(0), n = 0; n < this.xNumSteps.length; n++) this.handleStepPoint(n, this.xNumSteps[n]);}return t.prototype.getDistance = function (t) {for (var e = [], i = 0; i < this.xNumSteps.length - 1; i++) e[i] = f(this.xVal, t, i);return e;}, t.prototype.getAbsoluteDistance = function (t, e, i) {var n,r = 0;if (t < this.xPct[this.xPct.length - 1]) for (; t > this.xPct[r + 1];) r++;else t === this.xPct[this.xPct.length - 1] && (r = this.xPct.length - 2);i || t !== this.xPct[r + 1] || r++, null === e && (e = []);var s = 1,o = e[r],a = 0,l = 0,c = 0,h = 0;for (n = i ? (t - this.xPct[r]) / (this.xPct[r + 1] - this.xPct[r]) : (this.xPct[r + 1] - t) / (this.xPct[r + 1] - this.xPct[r]); o > 0;) a = this.xPct[r + 1 + h] - this.xPct[r + h], e[r + h] * s + 100 - 100 * n > 100 ? (l = a * n, s = (o - 100 * n) / e[r + h], n = 1) : (l = e[r + h] * a / 100 * s, s = 0), i ? (c -= l, this.xPct.length + h >= 1 && h--) : (c += l, this.xPct.length - h >= 1 && h++), o = e[r + h] * s;return t + c;}, t.prototype.toStepping = function (t) {return m(this.xVal, this.xPct, t);}, t.prototype.fromStepping = function (t) {return function (t, e, i) {if (i >= 100) return t.slice(-1)[0];var n = g(i, e),r = t[n - 1],s = t[n],o = e[n - 1];return function (t, e) {return e * (t[1] - t[0]) / 100 + t[0];}([r, s], (i - o) * p(o, e[n]));}(this.xVal, this.xPct, t);}, t.prototype.getStep = function (t) {return v(this.xPct, this.xSteps, this.snap, t);}, t.prototype.getDefaultStep = function (t, e, i) {var n = g(t, this.xPct);return (100 === t || e && t === this.xPct[n - 1]) && (n = Math.max(n - 1, 1)), (this.xVal[n] - this.xVal[n - 1]) / i;}, t.prototype.getNearbySteps = function (t) {var e = g(t, this.xPct);return { stepBefore: { startValue: this.xVal[e - 2], step: this.xNumSteps[e - 2], highestStep: this.xHighestCompleteStep[e - 2] }, thisStep: { startValue: this.xVal[e - 1], step: this.xNumSteps[e - 1], highestStep: this.xHighestCompleteStep[e - 1] }, stepAfter: { startValue: this.xVal[e], step: this.xNumSteps[e], highestStep: this.xHighestCompleteStep[e] } };}, t.prototype.countStepDecimals = function () {var t = this.xNumSteps.map(c);return Math.max.apply(null, t);}, t.prototype.hasNoSize = function () {return this.xVal[0] === this.xVal[this.xVal.length - 1];}, t.prototype.convert = function (t) {return this.getStep(this.toStepping(t));}, t.prototype.handleEntryPoint = function (t, e) {var i;if (!s(i = "min" === t ? 0 : "max" === t ? 100 : parseFloat(t)) || !s(e[0])) throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(i), this.xVal.push(e[0]);var n = Number(e[1]);i ? this.xSteps.push(!isNaN(n) && n) : isNaN(n) || (this.xSteps[0] = n), this.xHighestCompleteStep.push(0);}, t.prototype.handleStepPoint = function (t, e) {if (e) if (this.xVal[t] !== this.xVal[t + 1]) {this.xSteps[t] = f([this.xVal[t], this.xVal[t + 1]], e, 0) / p(this.xPct[t], this.xPct[t + 1]);var i = (this.xVal[t + 1] - this.xVal[t]) / this.xNumSteps[t],n = Math.ceil(Number(i.toFixed(3)) - 1),r = this.xVal[t] + this.xNumSteps[t] * n;this.xHighestCompleteStep[t] = r;} else this.xSteps[t] = this.xHighestCompleteStep[t] = this.xVal[t];}, t;}(),x = { to: function (t) {return void 0 === t ? "" : t.toFixed(2);}, from: Number },S = { target: "target", base: "base", origin: "origin", handle: "handle", handleLower: "handle-lower", handleUpper: "handle-upper", touchArea: "touch-area", horizontal: "horizontal", vertical: "vertical", background: "background", connect: "connect", connects: "connects", ltr: "ltr", rtl: "rtl", textDirectionLtr: "txt-dir-ltr", textDirectionRtl: "txt-dir-rtl", draggable: "draggable", drag: "state-drag", tap: "state-tap", active: "active", tooltip: "tooltip", pips: "pips", pipsHorizontal: "pips-horizontal", pipsVertical: "pips-vertical", marker: "marker", markerHorizontal: "marker-horizontal", markerVertical: "marker-vertical", markerNormal: "marker-normal", markerLarge: "marker-large", markerSub: "marker-sub", value: "value", valueHorizontal: "value-horizontal", valueVertical: "value-vertical", valueNormal: "value-normal", valueLarge: "value-large", valueSub: "value-sub" },E = ".__tooltips",C = ".__aria";function k(t, e) {if (!s(e)) throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep = e;}function T(t, e) {if (!s(e)) throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier = e;}function A(t, e) {if (!s(e)) throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier = e;}function M(t, e) {if (!s(e)) throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep = e;}function _(t, e) {if ("object" != typeof e || Array.isArray(e)) throw new Error("noUiSlider: 'range' is not an object.");if (void 0 === e.min || void 0 === e.max) throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum = new w(e, t.snap || !1, t.singleStep);}function P(t, e) {if (e = l(e), !Array.isArray(e) || !e.length) throw new Error("noUiSlider: 'start' option is incorrect.");t.handles = e.length, t.start = e;}function D(t, e) {if ("boolean" != typeof e) throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap = e;}function O(t, e) {if ("boolean" != typeof e) throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate = e;}function I(t, e) {if ("number" != typeof e) throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration = e;}function F(t, e) {var i,n = [!1];if ("lower" === e ? e = [!0, !1] : "upper" === e && (e = [!1, !0]), !0 === e || !1 === e) {for (i = 1; i < t.handles; i++) n.push(e);n.push(!1);} else {if (!Array.isArray(e) || !e.length || e.length !== t.handles + 1) throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n = e;}t.connect = n;}function R(t, e) {switch (e) {case "horizontal":t.ort = 0;break;case "vertical":t.ort = 1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.");}}function L(t, e) {if (!s(e)) throw new Error("noUiSlider: 'margin' option must be numeric.");0 !== e && (t.margin = t.spectrum.getDistance(e));}function N(t, e) {if (!s(e)) throw new Error("noUiSlider: 'limit' option must be numeric.");if (t.limit = t.spectrum.getDistance(e), !t.limit || t.handles < 2) throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.");}function V(t, e) {var i;if (!s(e) && !Array.isArray(e)) throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if (Array.isArray(e) && 2 !== e.length && !s(e[0]) && !s(e[1])) throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if (0 !== e) {for (Array.isArray(e) || (e = [e, e]), t.padding = [t.spectrum.getDistance(e[0]), t.spectrum.getDistance(e[1])], i = 0; i < t.spectrum.xNumSteps.length - 1; i++) if (t.padding[0][i] < 0 || t.padding[1][i] < 0) throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n = e[0] + e[1],r = t.spectrum.xVal[0];if (n / (t.spectrum.xVal[t.spectrum.xVal.length - 1] - r) > 1) throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.");}}function B(t, e) {switch (e) {case "ltr":t.dir = 0;break;case "rtl":t.dir = 1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.");}}function j(t, e) {if ("string" != typeof e) throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i = e.indexOf("tap") >= 0,n = e.indexOf("drag") >= 0,r = e.indexOf("fixed") >= 0,s = e.indexOf("snap") >= 0,o = e.indexOf("hover") >= 0,a = e.indexOf("unconstrained") >= 0,l = e.indexOf("drag-all") >= 0,c = e.indexOf("smooth-steps") >= 0;if (r) {if (2 !== t.handles) throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");L(t, t.start[1] - t.start[0]);}if (a && (t.margin || t.limit)) throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events = { tap: i || s, drag: n, dragAll: l, smoothSteps: c, fixed: r, snap: s, hover: o, unconstrained: a };}function z(t, i) {if (!1 !== i) if (!0 === i || e(i)) {t.tooltips = [];for (var n = 0; n < t.handles; n++) t.tooltips.push(i);} else {if ((i = l(i)).length !== t.handles) throw new Error("noUiSlider: must pass a formatter for all handles.");i.forEach(function (t) {if ("boolean" != typeof t && !e(t)) throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.");}), t.tooltips = i;}}function U(t, e) {if (e.length !== t.handles) throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes = e;}function H(t, i) {if (!e(i)) throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat = i;}function q(t, i) {if (!function (t) {return e(t) && "function" == typeof t.from;}(i)) throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format = i;}function $(t, e) {if ("boolean" != typeof e) throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport = e;}function G(t, e) {t.documentElement = e;}function W(t, e) {if ("string" != typeof e && !1 !== e) throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix = e;}function K(t, e) {if ("object" != typeof e) throw new Error("noUiSlider: 'cssClasses' must be an object.");"string" == typeof t.cssPrefix ? (t.cssClasses = {}, Object.keys(e).forEach(function (i) {t.cssClasses[i] = t.cssPrefix + e[i];})) : t.cssClasses = e;}function Z(t) {var e = { margin: null, limit: null, padding: null, animate: !0, animationDuration: 300, ariaFormat: x, format: x },i = { step: { r: !1, t: k }, keyboardPageMultiplier: { r: !1, t: T }, keyboardMultiplier: { r: !1, t: A }, keyboardDefaultStep: { r: !1, t: M }, start: { r: !0, t: P }, connect: { r: !0, t: F }, direction: { r: !0, t: B }, snap: { r: !1, t: D }, animate: { r: !1, t: O }, animationDuration: { r: !1, t: I }, range: { r: !0, t: _ }, orientation: { r: !1, t: R }, margin: { r: !1, t: L }, limit: { r: !1, t: N }, padding: { r: !1, t: V }, behaviour: { r: !0, t: j }, ariaFormat: { r: !1, t: H }, format: { r: !1, t: q }, tooltips: { r: !1, t: z }, keyboardSupport: { r: !0, t: $ }, documentElement: { r: !1, t: G }, cssPrefix: { r: !0, t: W }, cssClasses: { r: !0, t: K }, handleAttributes: { r: !1, t: U } },r = { connect: !1, direction: "ltr", behaviour: "tap", orientation: "horizontal", keyboardSupport: !0, cssPrefix: "noUi-", cssClasses: S, keyboardPageMultiplier: 5, keyboardMultiplier: 1, keyboardDefaultStep: 10 };t.format && !t.ariaFormat && (t.ariaFormat = t.format), Object.keys(i).forEach(function (s) {if (n(t[s]) || void 0 !== r[s]) i[s].t(e, n(t[s]) ? t[s] : r[s]);else if (i[s].r) throw new Error("noUiSlider: '" + s + "' is required.");}), e.pips = t.pips;var s = document.createElement("div"),o = void 0 !== s.style.msTransform,a = void 0 !== s.style.transform;e.transformRule = a ? "transform" : o ? "msTransform" : "webkitTransform";return e.style = [["left", "top"], ["right", "bottom"]][e.dir][e.ort], e;}function Y(e, s, c) {var p,f,g,m,v,y,b,w = window.navigator.pointerEnabled ? { start: "pointerdown", move: "pointermove", end: "pointerup" } : window.navigator.msPointerEnabled ? { start: "MSPointerDown", move: "MSPointerMove", end: "MSPointerUp" } : { start: "mousedown touchstart", move: "mousemove touchmove", end: "mouseup touchend" },x = window.CSS && CSS.supports && CSS.supports("touch-action", "none") && function () {var t = !1;try {var e = Object.defineProperty({}, "passive", { get: function () {t = !0;} });window.addEventListener("test", null, e);} catch (t) {}return t;}(),S = e,k = s.spectrum,T = [],A = [],M = [],_ = 0,P = {},D = e.ownerDocument,O = s.documentElement || D.documentElement,I = D.body,F = "rtl" === D.dir || 1 === s.ort ? 0 : 100;function R(t, e) {var i = D.createElement("div");return e && h(i, e), t.appendChild(i), i;}function L(t, e) {var i = R(t, s.cssClasses.origin),n = R(i, s.cssClasses.handle);if (R(n, s.cssClasses.touchArea), n.setAttribute("data-handle", String(e)), s.keyboardSupport && (n.setAttribute("tabindex", "0"), n.addEventListener("keydown", function (t) {return function (t, e) {if (B() || j(e)) return !1;var i = ["Left", "Right"],n = ["Down", "Up"],r = ["PageDown", "PageUp"],o = ["Home", "End"];s.dir && !s.ort ? i.reverse() : s.ort && !s.dir && (n.reverse(), r.reverse());var a,l = t.key.replace("Arrow", ""),c = l === r[0],h = l === r[1],u = l === n[0] || l === i[0] || c,d = l === n[1] || l === i[1] || h,p = l === o[0],f = l === o[1];if (!(u || d || p || f)) return !0;if (t.preventDefault(), d || u) {var g = u ? 0 : 1,m = vt(e)[g];if (null === m) return !1;!1 === m && (m = k.getDefaultStep(A[e], u, s.keyboardDefaultStep)), m *= h || c ? s.keyboardPageMultiplier : s.keyboardMultiplier, m = Math.max(m, 1e-7), m *= u ? -1 : 1, a = T[e] + m;} else a = f ? s.spectrum.xVal[s.spectrum.xVal.length - 1] : s.spectrum.xVal[0];return dt(e, k.toStepping(a), !0, !0), ot("slide", e), ot("update", e), ot("change", e), ot("set", e), !1;}(t, e);})), void 0 !== s.handleAttributes) {var r = s.handleAttributes[e];Object.keys(r).forEach(function (t) {n.setAttribute(t, r[t]);});}return n.setAttribute("role", "slider"), n.setAttribute("aria-orientation", s.ort ? "vertical" : "horizontal"), 0 === e ? h(n, s.cssClasses.handleLower) : e === s.handles - 1 && h(n, s.cssClasses.handleUpper), i;}function N(t, e) {return !!e && R(t, s.cssClasses.connect);}function V(t, e) {return !(!s.tooltips || !s.tooltips[e]) && R(t.firstChild, s.cssClasses.tooltip);}function B() {return S.hasAttribute("disabled");}function j(t) {return f[t].hasAttribute("disabled");}function z() {v && (st("update" + E), v.forEach(function (t) {t && i(t);}), v = null);}function U() {z(), v = f.map(V), rt("update" + E, function (t, e, i) {if (v && s.tooltips && !1 !== v[e]) {var n = t[e];!0 !== s.tooltips[e] && (n = s.tooltips[e].to(i[e])), v[e].innerHTML = n;}});}function H(t, e) {return t.map(function (t) {return k.fromStepping(e ? k.getStep(t) : t);});}function q(e) {function i(t, e) {return Number((t + e).toFixed(7));}var n,r = function (e) {if (e.mode === t.PipsMode.Range || e.mode === t.PipsMode.Steps) return k.xVal;if (e.mode === t.PipsMode.Count) {if (e.values < 2) throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for (var i = e.values - 1, n = 100 / i, r = []; i--;) r[i] = i * n;return r.push(100), H(r, e.stepped);}return e.mode === t.PipsMode.Positions ? H(e.values, e.stepped) : e.mode === t.PipsMode.Values ? e.stepped ? e.values.map(function (t) {return k.fromStepping(k.getStep(k.toStepping(t)));}) : e.values : [];}(e),s = {},o = k.xVal[0],a = k.xVal[k.xVal.length - 1],l = !1,c = !1,h = 0;return (n = r.slice().sort(function (t, e) {return t - e;}), r = n.filter(function (t) {return !this[t] && (this[t] = !0);}, {}))[0] !== o && (r.unshift(o), l = !0), r[r.length - 1] !== a && (r.push(a), c = !0), r.forEach(function (n, o) {var a,u,d,p,f,g,m,v,y,b,w = n,x = r[o + 1],S = e.mode === t.PipsMode.Steps;for (S && (a = k.xNumSteps[o]), a || (a = x - w), void 0 === x && (x = w), a = Math.max(a, 1e-7), u = w; u <= x; u = i(u, a)) {for (v = (f = (p = k.toStepping(u)) - h) / (e.density || 1), b = f / (y = Math.round(v)), d = 1; d <= y; d += 1) s[(g = h + d * b).toFixed(5)] = [k.fromStepping(g), 0];m = r.indexOf(u) > -1 ? t.PipsType.LargeValue : S ? t.PipsType.SmallValue : t.PipsType.NoValue, !o && l && u !== x && (m = 0), u === x && c || (s[p.toFixed(5)] = [u, m]), h = p;}}), s;}function $(e, i, n) {var r,o,a = D.createElement("div"),l = ((r = {})[t.PipsType.None] = "", r[t.PipsType.NoValue] = s.cssClasses.valueNormal, r[t.PipsType.LargeValue] = s.cssClasses.valueLarge, r[t.PipsType.SmallValue] = s.cssClasses.valueSub, r),c = ((o = {})[t.PipsType.None] = "", o[t.PipsType.NoValue] = s.cssClasses.markerNormal, o[t.PipsType.LargeValue] = s.cssClasses.markerLarge, o[t.PipsType.SmallValue] = s.cssClasses.markerSub, o),u = [s.cssClasses.valueHorizontal, s.cssClasses.valueVertical],d = [s.cssClasses.markerHorizontal, s.cssClasses.markerVertical];function p(t, e) {var i = e === s.cssClasses.value,n = i ? l : c;return e + " " + (i ? u : d)[s.ort] + " " + n[t];}return h(a, s.cssClasses.pips), h(a, 0 === s.ort ? s.cssClasses.pipsHorizontal : s.cssClasses.pipsVertical), Object.keys(e).forEach(function (r) {!function (e, r, o) {if ((o = i ? i(r, o) : o) !== t.PipsType.None) {var l = R(a, !1);l.className = p(o, s.cssClasses.marker), l.style[s.style] = e + "%", o > t.PipsType.NoValue && ((l = R(a, !1)).className = p(o, s.cssClasses.value), l.setAttribute("data-value", String(r)), l.style[s.style] = e + "%", l.innerHTML = String(n.to(r)));}}(r, e[r][0], e[r][1]);}), a;}function G() {m && (i(m), m = null);}function W(t) {G();var e = q(t),i = t.filter,n = t.format || { to: function (t) {return String(Math.round(t));} };return m = S.appendChild($(e, i, n));}function K() {var t = p.getBoundingClientRect(),e = "offset" + ["Width", "Height"][s.ort];return 0 === s.ort ? t.width || p[e] : t.height || p[e];}function Y(t, e, i, n) {var r = function (r) {var o,a,l = function (t, e, i) {var n = 0 === t.type.indexOf("touch"),r = 0 === t.type.indexOf("mouse"),s = 0 === t.type.indexOf("pointer"),o = 0,a = 0;if (0 === t.type.indexOf("MSPointer") && (s = !0), "mousedown" === t.type && !t.buttons && !t.touches) return !1;if (n) {var l = function (e) {var n = e.target;return n === i || i.contains(n) || t.composed && t.composedPath().shift() === i;};if ("touchstart" === t.type) {var c = Array.prototype.filter.call(t.touches, l);if (c.length > 1) return !1;o = c[0].pageX, a = c[0].pageY;} else {var h = Array.prototype.find.call(t.changedTouches, l);if (!h) return !1;o = h.pageX, a = h.pageY;}}return e = e || d(D), (r || s) && (o = t.clientX + e.x, a = t.clientY + e.y), t.pageOffset = e, t.points = [o, a], t.cursor = r || s, t;}(r, n.pageOffset, n.target || e);return !!l && !(B() && !n.doNotReject) && (o = S, a = s.cssClasses.tap, !((o.classList ? o.classList.contains(a) : new RegExp("\\b" + a + "\\b").test(o.className)) && !n.doNotReject)) && !(t === w.start && void 0 !== l.buttons && l.buttons > 1) && (!n.hover || !l.buttons) && (x || l.preventDefault(), l.calcPoint = l.points[s.ort], void i(l, n));},o = [];return t.split(" ").forEach(function (t) {e.addEventListener(t, r, !!x && { passive: !0 }), o.push([t, r]);}), o;}function X(t) {var e,i,n,r,o,l,c = 100 * (t - (e = p, i = s.ort, n = e.getBoundingClientRect(), r = e.ownerDocument, o = r.documentElement, l = d(r), /webkit.*Chrome.*Mobile/i.test(navigator.userAgent) && (l.x = 0), i ? n.top + l.y - o.clientTop : n.left + l.x - o.clientLeft)) / K();return c = a(c), s.dir ? 100 - c : c;}function J(t, e) {"mouseout" === t.type && "HTML" === t.target.nodeName && null === t.relatedTarget && tt(t, e);}function Q(t, e) {if (-1 === navigator.appVersion.indexOf("MSIE 9") && 0 === t.buttons && 0 !== e.buttonsProperty) return tt(t, e);var i = (s.dir ? -1 : 1) * (t.calcPoint - e.startCalcPoint);ct(i > 0, 100 * i / e.baseSize, e.locations, e.handleNumbers, e.connect);}function tt(t, e) {e.handle && (u(e.handle, s.cssClasses.active), _ -= 1), e.listeners.forEach(function (t) {O.removeEventListener(t[0], t[1]);}), 0 === _ && (u(S, s.cssClasses.drag), ut(), t.cursor && (I.style.cursor = "", I.removeEventListener("selectstart", r))), s.events.smoothSteps && (e.handleNumbers.forEach(function (t) {dt(t, A[t], !0, !0, !1, !1);}), e.handleNumbers.forEach(function (t) {ot("update", t);})), e.handleNumbers.forEach(function (t) {ot("change", t), ot("set", t), ot("end", t);});}function et(t, e) {if (!e.handleNumbers.some(j)) {var i;1 === e.handleNumbers.length && (i = f[e.handleNumbers[0]].children[0], _ += 1, h(i, s.cssClasses.active)), t.stopPropagation();var n = [],o = Y(w.move, O, Q, { target: t.target, handle: i, connect: e.connect, listeners: n, startCalcPoint: t.calcPoint, baseSize: K(), pageOffset: t.pageOffset, handleNumbers: e.handleNumbers, buttonsProperty: t.buttons, locations: A.slice() }),a = Y(w.end, O, tt, { target: t.target, handle: i, listeners: n, doNotReject: !0, handleNumbers: e.handleNumbers }),l = Y("mouseout", O, J, { target: t.target, handle: i, listeners: n, doNotReject: !0, handleNumbers: e.handleNumbers });n.push.apply(n, o.concat(a, l)), t.cursor && (I.style.cursor = getComputedStyle(t.target).cursor, f.length > 1 && h(S, s.cssClasses.drag), I.addEventListener("selectstart", r, !1)), e.handleNumbers.forEach(function (t) {ot("start", t);});}}function it(t) {t.stopPropagation();var e = X(t.calcPoint),i = function (t) {var e = 100,i = !1;return f.forEach(function (n, r) {if (!j(r)) {var s = A[r],o = Math.abs(s - t);(o < e || o <= e && t > s || 100 === o && 100 === e) && (i = r, e = o);}}), i;}(e);!1 !== i && (s.events.snap || o(S, s.cssClasses.tap, s.animationDuration), dt(i, e, !0, !0), ut(), ot("slide", i, !0), ot("update", i, !0), s.events.snap ? et(t, { handleNumbers: [i] }) : (ot("change", i, !0), ot("set", i, !0)));}function nt(t) {var e = X(t.calcPoint),i = k.getStep(e),n = k.fromStepping(i);Object.keys(P).forEach(function (t) {"hover" === t.split(".")[0] && P[t].forEach(function (t) {t.call(yt, n);});});}function rt(t, e) {P[t] = P[t] || [], P[t].push(e), "update" === t.split(".")[0] && f.forEach(function (t, e) {ot("update", e);});}function st(t) {var e = t && t.split(".")[0],i = e ? t.substring(e.length) : t;Object.keys(P).forEach(function (t) {var n = t.split(".")[0],r = t.substring(n.length);e && e !== n || i && i !== r || function (t) {return t === C || t === E;}(r) && i !== r || delete P[t];});}function ot(t, e, i) {Object.keys(P).forEach(function (n) {var r = n.split(".")[0];t === r && P[n].forEach(function (t) {t.call(yt, T.map(s.format.to), e, T.slice(), i || !1, A.slice(), yt);});});}function at(t, e, i, n, r, o, l) {var c;return f.length > 1 && !s.events.unconstrained && (n && e > 0 && (c = k.getAbsoluteDistance(t[e - 1], s.margin, !1), i = Math.max(i, c)), r && e < f.length - 1 && (c = k.getAbsoluteDistance(t[e + 1], s.margin, !0), i = Math.min(i, c))), f.length > 1 && s.limit && (n && e > 0 && (c = k.getAbsoluteDistance(t[e - 1], s.limit, !1), i = Math.min(i, c)), r && e < f.length - 1 && (c = k.getAbsoluteDistance(t[e + 1], s.limit, !0), i = Math.max(i, c))), s.padding && (0 === e && (c = k.getAbsoluteDistance(0, s.padding[0], !1), i = Math.max(i, c)), e === f.length - 1 && (c = k.getAbsoluteDistance(100, s.padding[1], !0), i = Math.min(i, c))), l || (i = k.getStep(i)), !((i = a(i)) === t[e] && !o) && i;}function lt(t, e) {var i = s.ort;return (i ? e : t) + ", " + (i ? t : e);}function ct(t, e, i, n, r) {var o = i.slice(),a = n[0],l = s.events.smoothSteps,c = [!t, t],h = [t, !t];n = n.slice(), t && n.reverse(), n.length > 1 ? n.forEach(function (t, i) {var n = at(o, t, o[t] + e, c[i], h[i], !1, l);!1 === n ? e = 0 : (e = n - o[t], o[t] = n);}) : c = h = [!0];var u = !1;n.forEach(function (t, n) {u = dt(t, i[t] + e, c[n], h[n], !1, l) || u;}), u && (n.forEach(function (t) {ot("update", t), ot("slide", t);}), null != r && ot("drag", a));}function ht(t, e) {return s.dir ? 100 - t - e : t;}function ut() {M.forEach(function (t) {var e = A[t] > 50 ? -1 : 1,i = 3 + (f.length + e * t);f[t].style.zIndex = String(i);});}function dt(t, e, i, n, r, o) {return r || (e = at(A, t, e, i, n, !1, o)), !1 !== e && (function (t, e) {A[t] = e, T[t] = k.fromStepping(e);var i = "translate(" + lt(ht(e, 0) - F + "%", "0") + ")";f[t].style[s.transformRule] = i, pt(t), pt(t + 1);}(t, e), !0);}function pt(t) {if (g[t]) {var e = 0,i = 100;0 !== t && (e = A[t - 1]), t !== g.length - 1 && (i = A[t]);var n = i - e,r = "translate(" + lt(ht(e, n) + "%", "0") + ")",o = "scale(" + lt(n / 100, "1") + ")";g[t].style[s.transformRule] = r + " " + o;}}function ft(t, e) {return null === t || !1 === t || void 0 === t ? A[e] : ("number" == typeof t && (t = String(t)), !1 !== (t = s.format.from(t)) && (t = k.toStepping(t)), !1 === t || isNaN(t) ? A[e] : t);}function gt(t, e, i) {var n = l(t),r = void 0 === A[0];e = void 0 === e || e, s.animate && !r && o(S, s.cssClasses.tap, s.animationDuration), M.forEach(function (t) {dt(t, ft(n[t], t), !0, !1, i);});var a = 1 === M.length ? 0 : 1;if (r && k.hasNoSize() && (i = !0, A[0] = 0, M.length > 1)) {var c = 100 / (M.length - 1);M.forEach(function (t) {A[t] = t * c;});}for (; a < M.length; ++a) M.forEach(function (t) {dt(t, A[t], !0, !0, i);});ut(), M.forEach(function (t) {ot("update", t), null !== n[t] && e && ot("set", t);});}function mt(t) {if (void 0 === t && (t = !1), t) return 1 === T.length ? T[0] : T.slice(0);var e = T.map(s.format.to);return 1 === e.length ? e[0] : e;}function vt(t) {var e = A[t],i = k.getNearbySteps(e),n = T[t],r = i.thisStep.step,o = null;if (s.snap) return [n - i.stepBefore.startValue || null, i.stepAfter.startValue - n || null];!1 !== r && n + r > i.stepAfter.startValue && (r = i.stepAfter.startValue - n), o = n > i.thisStep.startValue ? i.thisStep.step : !1 !== i.stepBefore.step && n - i.stepBefore.highestStep, 100 === e ? r = null : 0 === e && (o = null);var a = k.countStepDecimals();return null !== r && !1 !== r && (r = Number(r.toFixed(a))), null !== o && !1 !== o && (o = Number(o.toFixed(a))), [o, r];}h(b = S, s.cssClasses.target), 0 === s.dir ? h(b, s.cssClasses.ltr) : h(b, s.cssClasses.rtl), 0 === s.ort ? h(b, s.cssClasses.horizontal) : h(b, s.cssClasses.vertical), h(b, "rtl" === getComputedStyle(b).direction ? s.cssClasses.textDirectionRtl : s.cssClasses.textDirectionLtr), p = R(b, s.cssClasses.base), function (t, e) {var i = R(e, s.cssClasses.connects);f = [], (g = []).push(N(i, t[0]));for (var n = 0; n < s.handles; n++) f.push(L(e, n)), M[n] = n, g.push(N(i, t[n + 1]));}(s.connect, p), (y = s.events).fixed || f.forEach(function (t, e) {Y(w.start, t.children[0], et, { handleNumbers: [e] });}), y.tap && Y(w.start, p, it, {}), y.hover && Y(w.move, p, nt, { hover: !0 }), y.drag && g.forEach(function (t, e) {if (!1 !== t && 0 !== e && e !== g.length - 1) {var i = f[e - 1],n = f[e],r = [t],o = [i, n],a = [e - 1, e];h(t, s.cssClasses.draggable), y.fixed && (r.push(i.children[0]), r.push(n.children[0])), y.dragAll && (o = f, a = M), r.forEach(function (e) {Y(w.start, e, et, { handles: o, handleNumbers: a, connect: t });});}}), gt(s.start), s.pips && W(s.pips), s.tooltips && U(), st("update" + C), rt("update" + C, function (t, e, i, n, r) {M.forEach(function (t) {var e = f[t],n = at(A, t, 0, !0, !0, !0),o = at(A, t, 100, !0, !0, !0),a = r[t],l = String(s.ariaFormat.to(i[t]));n = k.fromStepping(n).toFixed(1), o = k.fromStepping(o).toFixed(1), a = k.fromStepping(a).toFixed(1), e.children[0].setAttribute("aria-valuemin", n), e.children[0].setAttribute("aria-valuemax", o), e.children[0].setAttribute("aria-valuenow", a), e.children[0].setAttribute("aria-valuetext", l);});});var yt = { destroy: function () {for (st(C), st(E), Object.keys(s.cssClasses).forEach(function (t) {u(S, s.cssClasses[t]);}); S.firstChild;) S.removeChild(S.firstChild);delete S.noUiSlider;}, steps: function () {return M.map(vt);}, on: rt, off: st, get: mt, set: gt, setHandle: function (t, e, i, n) {if (!((t = Number(t)) >= 0 && t < M.length)) throw new Error("noUiSlider: invalid handle number, got: " + t);dt(t, ft(e, t), !0, !0, n), ot("update", t), i && ot("set", t);}, reset: function (t) {gt(s.start, t);}, __moveHandles: function (t, e, i) {ct(t, e, A, i);}, options: c, updateOptions: function (t, e) {var i = mt(),r = ["margin", "limit", "padding", "range", "animate", "snap", "step", "format", "pips", "tooltips"];r.forEach(function (e) {void 0 !== t[e] && (c[e] = t[e]);});var o = Z(c);r.forEach(function (e) {void 0 !== t[e] && (s[e] = o[e]);}), k = o.spectrum, s.margin = o.margin, s.limit = o.limit, s.padding = o.padding, s.pips ? W(s.pips) : G(), s.tooltips ? U() : z(), A = [], gt(n(t.start) ? t.start : i, e);}, target: S, removePips: G, removeTooltips: z, getPositions: function () {return A.slice();}, getTooltips: function () {return v;}, getOrigins: function () {return f;}, pips: W };return yt;}function X(t, e) {if (!t || !t.nodeName) throw new Error("noUiSlider: create requires a single element, got: " + t);if (t.noUiSlider) throw new Error("noUiSlider: Slider was already initialized.");var i = Y(t, Z(e), e);return t.noUiSlider = i, i;}var J = { __spectrum: w, cssClasses: S, create: X };t.create = X, t.cssClasses = S, t.default = J, Object.defineProperty(t, "__esModule", { value: !0 });}(e);}, 3131: (t, e, i) => {"use strict";function n(t) {return null === t ? NaN : +t;}i.d(e, { A: () => n });}, 3139: (t, e, i) => {"use strict";i.d(e, { A: () => u });var n = i(5500),r = i(1436),s = i(1542);const o = (t) => (0, r.D4)(t);let a, l;const c = (t) => "KeyObject" === t?.[Symbol.toStringTag],h = async (t, e, i, n, r = !1) => {let o = t.get(e);if (o?.[n]) return o[n];const a = await (0, s.A)({ ...i, alg: n });return r && Object.freeze(e), o ? o[n] = a : t.set(e, { [n]: a }), a;},u = { normalizePublicKey: (t, e) => {if (c(t)) {let i = t.export({ format: "jwk" });return delete i.d, delete i.dp, delete i.dq, delete i.p, delete i.q, delete i.qi, i.k ? o(i.k) : (l || (l = new WeakMap()), h(l, t, i, e));}return (0, n.ll)(t) ? t.k ? (0, r.D4)(t.k) : (l || (l = new WeakMap()), h(l, t, t, e, !0)) : t;}, normalizePrivateKey: (t, e) => {if (c(t)) {let i = t.export({ format: "jwk" });return i.k ? o(i.k) : (a || (a = new WeakMap()), h(a, t, i, e));}return (0, n.ll)(t) ? t.k ? (0, r.D4)(t.k) : (a || (a = new WeakMap()), h(a, t, t, e, !0)) : t;} };}, 3179: (t, e, i) => {"use strict";i.d(e, { E1: () => c, GZ: () => p, JF: () => f, Xh: () => n, th: () => d, wT: () => v, yk: () => g });var n,r = i(1807),s = i(3473),o = i(2755),a = i(1514),l = i(7077);function c(t, e, i, c = 0, d) {const p = !!e,f = !i && e ? Object.keys(e.index) : null,g = !i && e?.mapField ? e.mapField : null,v = !i && e?.mapSelector ? e.mapSelector.values : null;e && i || (e = { dataPoints: [], fields: {}, domains: {}, index: {}, identityIndex: {}, drillMode: { path: [], level: 0, movedToNextLevel: !1, levelExpanded: !1 }, compareToPrevious: { dataPointsChanged: !0, mapFieldUrlsChanged: !1, mapFieldChanged: !1, mapSelectorChanged: !1 }, hasHighlights: !1 });const y = t.dataViews;if (y && y[0] && y[0].categorical) {const t = y[0].categorical;if (e.fields = { ...e.fields, ...(0, r.JYz)(t.values, !1), ...(t.categories ? (0, r.JYz)(t.categories, !1) : {}) }, e.fields[n.MapSelector]?.[0]) {const t = d.advanced.mapSelectorSeparator.value ?? "",i = e.fields[n.MapSelector][0].values,r = new Set();i?.forEach((e) => {e.toString().split(t).forEach((t) => r.add(t));}), e.mapSelector = { values: Array.from(r).sort((t, e) => t.localeCompare(e)) };}e.fields[n.MapField]?.[0] && (e.mapField || (e.mapField = { urls: {}, queryName: e.fields[n.MapField][0].source.queryName })), e.fields[n.Legend]?.length && (e.legendField = e.fields[n.Legend][0]), e.mapField ? e.drillMode = { path: a.Ap, level: 0, movedToNextLevel: !1, levelExpanded: !1 } : t.categories && (e.drillMode = { path: (0, r.l9n)(t.categories, n.Category, (0, s.Dh)(d), d.drill.lastLevelMaps.value), level: (0, r.DvF)(t.categories, n.Category), movedToNextLevel: (0, r.hff)(t.categories, n.Category), levelExpanded: (0, r.Lzp)(t.categories, n.Category) && !d.drill.aggregateOnExpand.value, invalidLegendField: (b = t.categories, !!b && b.some((t) => !!(t.source && t.source.roles && t.source.roles[n.Legend] && t.source.roles[n.Category] && 0 !== t.source.rolesIndex?.[n.Category]?.[0]))) }), e.dataPoints.push(...function (t, e, i, s, a, c, d, p) {const f = [];if (e?.categories?.length) {const g = e.categories.filter((t) => t.source.roles[n.Category]),v = g[g.length - 1],y = e.values,b = c ? e.categories.filter((t) => t.source.roles[n.MapField]) : [];if (v?.values) for (let e = 0; e < v.values.length; e++) {if (e < i) continue;const w = [];if (d.levelExpanded && g.length > 1) for (let t = 0; t < g.length - 1; t++) w.push((0, o.$8)(g[t].values[e]));const x = (0, o.$8)(v.values[e]);let S = [...w, x].map((t) => (0, o.ni)(t)).join(o._5);const E = [...w, x].join(o._5),C = x,k = w.length ? [...w, x].join(` ${o._5} `) : void 0;if (b.length) {const t = b[0].values[e]?.toString();t && t.trim() && (c.urls[t] = !0, S = `${(0, r.FxW)(t)}${o._5}${S}`);}let T = s[S];!T && (T = { dataIndex: e, id: E, label: C, selectionIds: [], color: (0, r.SN4)(t.areas.matchedColor, e), outlineColor: (0, r.SN4)(t.areas.matchedOutlineFill, e), dataValue: {}, tooltipValues: {}, colorRulesValues: {} }, k && (T.label2 = k), f.push(T), s[S] = T);const A = thisVisual.host.createSelectionIdBuilder().withCategory(v, e).createSelectionId();if (T.selectionIds.push(A), a[m(A)] = T, y) for (let i = 0; i < y.length; i++) {const s = y[i];if (s) {const i = s.values[e],o = s.highlights ? s.highlights[e] : void 0,a = s.source.type.numeric,c = s.source.type.dateTime,d = (0, r.j_G)(s, e);if (s.source.roles[n.Value]) {T.dataValue.format = d;const e = c ? (0, l.Yq)(t.advanced.numberLocale.value.value.toString(), new Date(i), s.source.format) : null;h(T.dataValue, c ? e : i, void 0 === o ? void 0 : c ? e : o, t, a), a && u(p, s.source.queryName, T.dataValue);}s.source.roles[n.Tooltips] && (T.tooltipValues[s.source.queryName] || (T.tooltipValues[s.source.queryName] = { format: d }), h(T.tooltipValues[s.source.queryName], i, void 0, t, a), a && u(p, s.source.queryName, T.tooltipValues[s.source.queryName])), s.source.roles[n.ColorRules] && (T.colorRulesValues[s.source.queryName] || (T.colorRulesValues[s.source.queryName] = {}), h(T.colorRulesValues[s.source.queryName], i, void 0, t, a), a && u(p, s.source.queryName, T.colorRulesValues[s.source.queryName]));}}T.colorRulesValues[v.source.queryName] = { value: v.values[e] };}}return f;}(d, t, c, e.index, e.identityIndex, e.mapField, e.drillMode, e.domains)), e.hasHighlights = e.dataPoints.some((t) => void 0 !== t.dataValue.highlightValue), i || (e.compareToPrevious.dataPointsChanged = !(0, l.UD)(f, Object.keys(e.index)), e.compareToPrevious.mapFieldUrlsChanged = !(0, l.UD)(g ? Object.keys(g.urls) : null, e.mapField ? Object.keys(e.mapField.urls) : null), e.compareToPrevious.mapFieldChanged = !!p && g?.queryName != e.mapField?.queryName, e.compareToPrevious.mapSelectorChanged = !(0, l.UD)(v, e.mapSelector?.values ?? null));}var b;return e;}function h(t, e, i, n, r) {const s = n.advanced.aggregation.value.value;void 0 === t.value ? (t.value = e, void 0 !== i && (t.highlightValue = i)) : "no" === s ? t.value = "" : r ? "sum" === s ? (t.value = (t.value ?? 0) + (e ?? 0), void 0 !== i && (t.highlightValue = (t.highlightValue ?? 0) + (i ?? 0))) : "min" === s ? (t.value = Math.min(t.value ?? Number.POSITIVE_INFINITY, e ?? Number.POSITIVE_INFINITY), void 0 !== i && (t.highlightValue = Math.min(t.highlightValue ?? Number.POSITIVE_INFINITY, i ?? Number.POSITIVE_INFINITY))) : "max" === s && (t.value = Math.max(t.value ?? Number.NEGATIVE_INFINITY, e ?? Number.NEGATIVE_INFINITY), void 0 !== i && (t.highlightValue = Math.max(t.highlightValue ?? Number.NEGATIVE_INFINITY, i ?? Number.NEGATIVE_INFINITY))) : void 0 === t.value && (t.value = e);}function u(t, e, i) {null == i.value || isNaN(i.value) || (t[e] = { min: t[e] ? Math.min(t[e].min, i.value) : i.value, max: t[e] ? Math.max(t[e].max, i.value) : i.value });}function d(t, e, i, s) {const o = [];if (t.selectionIds.length > 1 && "no" === i.advanced.aggregation.value.value) o.push({ displayName: "", value: "Summarization is not allowed. Change the settings in 'Advanced Options > Data > Summarization' or change the data model to have unique values." });else {const s = (t, n) => {const s = function (t, e, i) {return r.ZA6.instance.create({ format: e, formatSingleValues: !1, value: 0 == i.tooltips.unit.value ? t : i.tooltips.unit.value, displayUnitSystemType: i.tooltips.unit.value, precision: i.tooltips.precision.value ?? 1, allowFormatBeautification: !0, cultureSelector: i.advanced.numberLocale.value.value.toString() });}(t.value, t.format, i);let a = "";for (const t in e.fields) {for (const i of e.fields[t]) if (i.source.queryName === n) {a = i.source.displayName;break;}if (a) break;}o.push({ displayName: a, value: null == t.value ? "(Blank)" : s.format(t.value) }), void 0 !== t.highlightValue && o.push({ displayName: "Highlighted", value: null == t.highlightValue ? "(Blank)" : s.format(t.highlightValue) });};i.tooltips.showValues.value && e.fields[n.Value] && s(t.dataValue, e.fields[n.Value][0].source.queryName);for (const e in t.tooltipValues) s(t.tooltipValues[e], e);}if (i.tooltips.showCategories.value) {let e = t.label2 || t.label;s && s !== e && (e = `${s} (${e})`), o.length ? o[0].header = e : o.push({ header: e, displayName: "", value: null });}return o.length || o.push({ displayName: "No tooltips", value: null }), o;}function p(t, e) {const i = {};if (e.fields[n.Value]) {const r = e.fields[n.Value][0].source.queryName;i[r] = { value: t.dataValue.value, highlightValue: t.dataValue.highlightValue, domain: e.domains[r] };}for (const n in t.colorRulesValues) {const r = t.colorRulesValues[n];null != r.value && (i[n] = { value: r.value, highlightValue: r.highlightValue, domain: e.domains[n] ?? null });}return i;}function f(t, e, i) {if (!t || !e) return null;let n = (0, o.ni)(t);return i && i?.trim() && (n = `${(0, r.FxW)(i)}${o._5}${n}`), e.index[n] ?? null;}function g(t) {return void 0 !== t.dataValue.highlightValue ? t.dataValue.highlightValue : t.dataValue.value;}function m(t) {return JSON.stringify(t.getSelector());}function v(t, e) {const i = {};return t.forEach((t) => {const n = e.identityIndex[m(t)];n && (i[n.id] = n);}), Object.values(i);}!function (t) {t.Category = "category_role", t.Value = "value_role", t.Tooltips = "tooltips_role", t.Legend = "legend_role", t.MapSelector = "selector_role", t.ColorRules = "ColorRules", t.MapField = "MapSeries";}(n || (n = {}));}, 3206: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(574),r = i(9064),s = i(3363);function o(t) {var e = this._name,i = this._id;"function" != typeof t && (t = (0, n.A)(t));for (var o = this._groups, a = o.length, l = new Array(a), c = 0; c < a; ++c) for (var h, u, d = o[c], p = d.length, f = l[c] = new Array(p), g = 0; g < p; ++g) (h = d[g]) && (u = t.call(h, h.__data__, g, d)) && ("__data__" in h && (u.__data__ = h.__data__), f[g] = u, (0, s.Ay)(f[g], e, i, g, f, (0, s.Jt)(h, i)));return new r.eB(l, this._parents, e, i);}}, 3218: (t, e, i) => {"use strict";i.d(e, { j: () => s, o: () => n });var n,r = i(1807);!function (t) {t[t.None = 0] = "None", t[t.Started = 1] = "Started", t[t.Panning = 2] = "Panning";}(n || (n = {}));class s extends r.T0G {zoom = 1;abortController;config;panning = n.None;startX = 0;startY = 0;callbackTimeout;isSpacePressed = !1;containerRect;get zoomableElement() {return this.config.container.querySelector(".zoomable");}get canPan() {return !this.config.lockPan;}get canPanWithoutKeys() {return this.canPan && (this.config.panMode || this.config.autoPan);}get state() {return { zoom: this.zoom, position: { left: this.config.container.scrollLeft, top: this.config.container.scrollTop } };}constructor(t) {super(), this.abortController = new AbortController(), this.config = { minZoom: 1, maxZoom: 1e3, step: .1, wheelStep: .5, triggerDelay: 0, allowWheelZoom: !0, panMode: !1, autoPan: !0, lockZoom: !1, lockPan: !1, ...t }, this.config.panMode = !this.config.autoPan && this.config.panMode, this.containerRect = this.config.container.getBoundingClientRect(), this.togglePanMode(this.config.panMode), this.addListeners(), this.applyInitialZoom();}applyInitialZoom() {this.config.maxZoom < this.config.minZoom && (this.config.maxZoom = this.config.minZoom), this.config.zoomState ? (this.zoom = Math.max(this.config.minZoom, Math.min(this.config.maxZoom, this.config.zoomState.zoom)), this.applyZoom(), this.scrollContainer(this.config.zoomState.position)) : this.resetZoom();}addListeners() {this.config.container.addEventListener("mousedown", (t) => this.onMouseDown(t), { signal: this.abortController.signal }), this.config.container.addEventListener("mousemove", (t) => this.onMouseMove(t), { signal: this.abortController.signal }), this.config.container.addEventListener("mouseup", (t) => this.onMouseUp(t), { signal: this.abortController.signal }), this.config.container.addEventListener("mouseleave", (t) => this.onMouseLeave(t), { signal: this.abortController.signal }), document.addEventListener("keydown", (t) => this.onKeyDown(t), { signal: this.abortController.signal }), document.addEventListener("keyup", (t) => this.onKeyUp(t), { signal: this.abortController.signal }), this.config.allowWheelZoom && this.config.container.addEventListener("wheel", (t) => this.onWheel(t), { signal: this.abortController.signal });}togglePanMode(t) {this.config.autoPan || (this.config.panMode = t, this.config.container.classList.toggle("grab", t));}onWheel(t) {if (t.preventDefault(), this.config.lockZoom) return;if (this.panning == n.Panning) return;if (t.deltaY > 0 && this.zoom === this.config.minZoom) return;if (t.deltaY < 0 && this.zoom === this.config.maxZoom) return;let e = this.config.wheelStep;this.zoom >= 10 ? e *= 3 : this.zoom >= 7 ? e *= 2 : this.zoom < 1 && (e = .1);const i = t.deltaY > 0 ? Math.max(this.config.minZoom, Math.round((this.zoom - e) / e) * e) : Math.min(this.config.maxZoom, Math.round((this.zoom + e) / e) * e),r = t.clientX - this.containerRect.left,s = t.clientY - this.containerRect.top,o = this.config.container.scrollLeft,a = this.config.container.scrollTop,l = (o + r) * i / this.zoom - r,c = (a + s) * i / this.zoom - s;this.zoom = i, this.applyZoom(), this.scrollContainer({ left: l, top: c }), this.triggerZoom();}onMouseDown(t) {if (!this.canPan) return;const e = 1 == t.button;(this.isSpacePressed || e || this.canPanWithoutKeys) && this.zoom > 1 && (this.config.autoPan || this.config.container.classList.add("grabbing"), this.panning = n.Started, this.startX = t.pageX, this.startY = t.pageY, t.preventDefault());}onMouseUp = (t) => {this.canPan && (setTimeout(() => this.panning = n.None, 100), this.config.container.classList.remove("grabbing"));};onMouseMove(t) {if (this.canPan) if (this.panning !== n.None) {this.panning = n.Panning, this.config.container.classList.add("grabbing");const e = t.pageX - this.startX,i = t.pageY - this.startY;this.config.container.scrollLeft -= e, this.config.container.scrollTop -= i, this.startX = t.pageX, this.startY = t.pageY, this.updateZoom(), t.preventDefault();} else this.config.container.classList.remove("grabbing");}onMouseLeave(t) {this.canPan && (this.config.container.classList.remove("grabbing"), this.panning = n.None);}onKeyDown(t) {!this.canPan || this.canPanWithoutKeys || this.config.panMode || t.target instanceof HTMLInputElement || t.target instanceof HTMLTextAreaElement || t.target instanceof HTMLSelectElement || "Space" == t.code && (t.preventDefault(), this.isSpacePressed = !0, this.config.container.classList.add("grab"));}onKeyUp = (t) => {!this.canPan || this.canPanWithoutKeys || this.config.panMode || t.target instanceof HTMLInputElement || t.target instanceof HTMLTextAreaElement || t.target instanceof HTMLSelectElement || "Space" == t.code && (t.preventDefault(), this.isSpacePressed = !1, this.config.container.classList.remove("grab"));};updateZoom(t = !1) {const e = this.zoomableElement;if (e) {if (t) this.applyZoom(e), this.scrollToCenter(e);else {const t = { left: this.config.container.scrollLeft, top: this.config.container.scrollTop },i = this.getCenter(e);this.applyZoom(e);const n = this.getCenter(e);this.scrollContainer({ left: t.left + (n.x - i.x), top: t.top + (n.y - i.y) });}this.triggerZoom();}}applyZoom(t) {t || (t = this.zoomableElement), t.style.transformOrigin = this.zoom < 1 ? "center" : "top left", (0, r.vm6)(t, `scale(${this.zoom})`);}getCenter(t) {t || (t = this.zoomableElement);const e = t.getBoundingClientRect();return { x: (e.left + e.right) / 2, y: (e.top + e.bottom) / 2 };}zoomTo(t, e = !1) {this.zoom = Math.max(this.config.minZoom, Math.min(this.config.maxZoom, Math.round(t / this.config.step) * this.config.step)), this.updateZoom(e);}zoomIn() {this.zoom !== this.config.maxZoom && (this.zoom = Math.min(this.config.maxZoom, Math.round((this.zoom + this.config.step) / this.config.step) * this.config.step), this.updateZoom());}zoomOut() {this.zoom !== this.config.minZoom && (this.zoom = Math.max(this.config.minZoom, Math.round((this.zoom - this.config.step) / this.config.step) * this.config.step), this.updateZoom());}resetZoom() {this.zoom = Math.max(1, this.config.minZoom), this.updateZoom(!0);}triggerZoom(t = !1) {0 === this.config.triggerDelay || t ? this.trigger("zoom", this.state) : (this.callbackTimeout && clearTimeout(this.callbackTimeout), this.callbackTimeout = window.setTimeout(() => {this.trigger("zoom", this.state);}, this.config.triggerDelay));}scrollContainer(t) {this.config.container.scrollLeft === t.left && this.config.container.scrollTop === t.top || (this.config.container.scrollLeft = t.left, this.config.container.scrollTop = t.top);}scrollToCenter(t) {t || (t = this.zoomableElement);const e = t.getBoundingClientRect();this.scrollContainer({ left: (e.width - this.containerRect.width) / 2, top: (e.height - this.containerRect.height) / 2 });}zoomOnArea(t, e = 100) {if (!t || !this.config.container) return;const i = Array.isArray(t) ? t : [t];if (0 === i.length) return;this.resetZoom();let n = i[0].getBoundingClientRect();for (let t = 1; t < i.length; t++) {const e = i[t].getBoundingClientRect();n = { left: Math.min(n.left, e.left), top: Math.min(n.top, e.top), right: Math.max(n.right, e.right), bottom: Math.max(n.bottom, e.bottom), width: Math.max(n.right, e.right) - Math.min(n.left, e.left), height: Math.max(n.bottom, e.bottom) - Math.min(n.top, e.top) };}const r = this.containerRect.width / n.width,s = this.containerRect.height / n.height,o = Math.max(Math.min(r, s) * (e / 100), this.config.minZoom),a = (this.containerRect.width - n.width * o) / 2 - (n.left - this.containerRect.left) * o,l = (this.containerRect.height - n.height * o) / 2 - (n.top - this.containerRect.top) * o;this.zoom = o, this.applyZoom(), this.scrollContainer({ left: -a, top: -l }), this.triggerZoom();}destroy() {this.abortController && (this.abortController.abort(), this.abortController = null);}}}, 3224: function (t, e, i) {"use strict";var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.DataLabelsDisplayUnitSystem = e.WholeUnitsDisplayUnitSystem = e.DefaultDisplayUnitSystem = e.NoDisplayUnitSystem = e.DisplayUnitSystem = e.DisplayUnit = void 0;var s = i(3100),o = i(2087),a = /^([0\#,]*\.[0\#]+|[0\#,]+|g)$/i,l = function () {function t() {}return t.prototype.project = function (t) {return this.value ? o.double.removeDecimalNoise(t / this.value) : t;}, t.prototype.reverseProject = function (t) {return this.value ? t * this.value : t;}, t.prototype.isApplicableTo = function (t) {t = Math.abs(t);var e = o.double.getPrecision(t, 3);return o.double.greaterOrEqualWithPrecision(t, this.applicableRangeMin, e) && o.double.lessWithPrecision(t, this.applicableRangeMax, e);}, t.prototype.isScaling = function () {return this.value > 1;}, t;}();e.DisplayUnit = l;var c = function () {function t(t) {this.units = t || [];}return Object.defineProperty(t.prototype, "title", { get: function () {return this.displayUnit ? this.displayUnit.title : void 0;}, enumerable: !1, configurable: !0 }), t.prototype.update = function (t) {void 0 !== t && (this.unitBaseValue = t, this.displayUnit = this.findApplicableDisplayUnit(t));}, t.prototype.findApplicableDisplayUnit = function (t) {for (var e = 0, i = this.units; e < i.length; e++) {var n = i[e];if (n.isApplicableTo(t)) return n;}}, t.prototype.format = function (t, e, i, n, r) {i = this.getNumberOfDecimalsForFormatting(e, i);var s = "";return this.isFormatSupported(e) && !this.hasScientitifcFormat(e) && this.isScalingUnit() && this.shouldRespectScalingUnit(e) && (t = this.displayUnit.project(t), s = this.displayUnit.labelFormat), this.formatHelper({ value: t, nonScientificFormat: s, format: e, decimals: i, trailingZeros: n, cultureSelector: r });}, t.prototype.isFormatSupported = function (e) {return !t.UNSUPPORTED_FORMATS.test(e);}, t.prototype.isPercentageFormat = function (t) {return t && t.indexOf("%") >= 0;}, t.prototype.shouldRespectScalingUnit = function (t) {return !0;}, t.prototype.getNumberOfDecimalsForFormatting = function (t, e) {return e;}, t.prototype.isScalingUnit = function () {return this.displayUnit && this.displayUnit.isScaling();}, t.prototype.formatHelper = function (t) {var e = t.value,i = t.cultureSelector,n = t.decimals,r = t.trailingZeros,o = t.nonScientificFormat,a = t.format;if ("g" !== a && "G" !== a || null == n || (a = "#,0.00"), (a = s.numberFormat.addDecimalsToFormat(a, n, r)) && !s.formattingService.isStandardNumberFormat(a)) return s.formattingService.formatNumberWithCustomOverride(e, a, o, i);a || (a = "G"), o || (o = "{0}");var l = s.formattingService.formatValue(e, a, i);return s.formattingService.format(o, [l]);}, t.prototype.formatSingleValue = function (t, e, i, n, r) {return this.update(this.shouldUseValuePrecision(t) ? o.double.getPrecision(t, 8) : t), this.format(t, e, i, n, r);}, t.prototype.shouldUseValuePrecision = function (t) {if (0 === this.units.length) return !0;for (var e = 0, i = 0; i < this.units.length; i++) if (this.units[i].isScaling()) {e = this.units[i].applicableRangeMin;break;}return Math.abs(t) < e;}, t.prototype.isScientific = function (t) {return t < -1e15 || t > 1e15 || -1e-4 < t && t < 1e-4 && 0 !== t;}, t.prototype.hasScientitifcFormat = function (t) {return t && -1 !== t.toUpperCase().indexOf("E");}, t.prototype.supportsScientificFormat = function (t) {return !t || a.test(t);}, t.prototype.shouldFallbackToScientific = function (t, e) {return !this.hasScientitifcFormat(e) && this.supportsScientificFormat(e) && this.isScientific(t);}, t.prototype.getScientificFormat = function (t, e, i, n) {if (this.isFormatSupported(e) && this.shouldFallbackToScientific(t, e)) {var r = s.numberFormat.getNumericFormat(t, e);return i && (r = s.numberFormat.addDecimalsToFormat(r || "0", Math.abs(i), n)), r ? r + "E+0" : "0.##E+0";}return e;}, t.UNSUPPORTED_FORMATS = /^(p\d*)|(e\d*)$/i, t;}();e.DisplayUnitSystem = c;var h = function (t) {function e() {return t.call(this, []) || this;}return r(e, t), e;}(c);e.NoDisplayUnitSystem = h;var u = function (t) {function e(i) {return t.call(this, e.getUnits(i)) || this;}return r(e, t), e.prototype.format = function (e, i, n, r, s) {return i = this.getScientificFormat(e, i, n, r), t.prototype.format.call(this, e, i, n, r, s);}, e.RESET = function () {e.units = null;}, e.getUnits = function (t) {return e.units || (e.units = f(t, function (t, e, i) {return t - e >= 1e3 ? t / 10 : i;}), e.units[e.units.length - 1].applicableRangeMax = 1 / 0), e.units;}, e;}(c);e.DefaultDisplayUnitSystem = u;var d = function (t) {function e(i) {return t.call(this, e.getUnits(i)) || this;}return r(e, t), e.RESET = function () {e.units = null;}, e.getUnits = function (t) {return e.units || (e.units = f(t), e.units[e.units.length - 1].applicableRangeMax = 1 / 0), e.units;}, e.prototype.format = function (e, i, n, r, s) {return i = this.getScientificFormat(e, i, n, r), t.prototype.format.call(this, e, i, n, r, s);}, e;}(c);e.WholeUnitsDisplayUnitSystem = d;var p = function (t) {function e(i) {return t.call(this, e.getUnits(i)) || this;}return r(e, t), e.prototype.isFormatSupported = function (t) {return !e.UNSUPPORTED_FORMATS.test(t);}, e.getUnits = function (t) {if (!e.units) {var i = [],n = function (t, e, i) {return -1 === t && t - e >= 1e3 ? t / 10 : i;},r = t(-1);g(i, e.AUTO_DISPLAYUNIT_VALUE, r.title, r.format, n), r = t(0), g(i, e.NONE_DISPLAYUNIT_VALUE, r.title, r.format, n), e.units = i.concat(f(t, n)), e.units[e.units.length - 1].applicableRangeMax = 1 / 0;}return e.units;}, e.prototype.format = function (e, i, n, r, s) {return i = this.getScientificFormat(e, i, n, r), t.prototype.format.call(this, e, i, n, r, s);}, e.AUTO_DISPLAYUNIT_VALUE = 0, e.NONE_DISPLAYUNIT_VALUE = 1, e.UNSUPPORTED_FORMATS = /^(e\d*)$/i, e;}(c);function f(t, e) {for (var i = [], n = 3; n < 24; n++) {var r = t(n);r && g(i, o.double.pow10(n), r.title, r.format, e);}return i;}function g(t, e, i, n, r) {if (i || n) {var s = e;if (t.length > 0) {var o = t[t.length - 1];r && (s = r(e, o.value, s)), o.applicableRangeMax = s;}var a = new l();a.value = e, a.applicableRangeMin = s, a.applicableRangeMax = 1e3 * s, a.title = i, a.labelFormat = n, t.push(a);}}e.DataLabelsDisplayUnitSystem = p;}, 3234: (t, e, i) => {"use strict";function n(t, e, i = !0) {i && function (t) {const e = [],i = document.styleSheets;for (let n = 0; n < i.length; n++) {const r = i[n];t && i[n].ownerNode.id != t || e.push(r);}return e;}(t).forEach((t) => t.ownerNode.remove());const n = document.createElement("style");n.id = t, document.head.appendChild(n), e && e.forEach((t) => {n.sheet.insertRule(t, 0);});}function r(t) {return s(t?.style.transform || "");}function s(t) {const e = /(\w+)\(([^)]+)\)/g,i = { translateX: 0, translateY: 0, scaleX: 1, scaleY: 1, rotate: 0, skewX: 0, skewY: 0 };let n;for (; null !== (n = e.exec(t));) {const [t, e, r] = n,s = r.split(",").map((t) => parseFloat(t.trim()));switch (e) {case "translate":i.translateX = s[0] || 0, i.translateY = s[1] || 0;break;case "scale":i.scaleX = s[0] || 1, i.scaleY = s[1] || s[0] || 1;break;case "rotate":i.rotate = s[0] || 0;break;case "skew":i.skewX = s[0] || 0, i.skewY = s[1] || 0;break;case "translateX":i.translateX = s[0] || 0;break;case "translateY":i.translateY = s[0] || 0;break;case "scaleX":i.scaleX = s[0] || 1;break;case "scaleY":i.scaleY = s[0] || 1;break;case "skewX":i.skewX = s[0] || 0;break;case "skewY":i.skewY = s[0] || 0;}}return i;}function o(t, e) {const i = t.style.transform || "",[n] = e.split("("),r = i.match(/(\w+\([^)]+\))/g) || [];let s = !1;const o = r.map((t) => t.startsWith(n) ? (s = !0, e) : t);s || o.push(e), t.style.transform = o.join(" ");}function a(t, e) {const i = t.style.transform || "";if (!i) return;const n = (i.match(/(\w+\([^)]+\))/g) || []).filter((t) => !t.startsWith(e)).join(" ");t.style.transform = n;}function l(t) {return CSS.escape(t);}i.d(e, { CX: () => a, H_: () => s, fX: () => n, sx: () => r, vm: () => o, z4: () => l }), i(3242);}, 3242: (t, e, i) => {"use strict";i.d(e, { Go: () => f, Gv: () => c, Im: () => s, Kg: () => d, LI: () => g, Sh: () => y, Tn: () => u, cJ: () => v, cK: () => a, cy: () => h, dl: () => o, o8: () => p, uk: () => m, vM: () => r }), i(2017);var n = i(8853);function r(t, e = !1) {return void 0 !== t && (e || null !== t);}function s(t, e = !0) {if (e) {for (const e of Object.values(t)) if (null !== e) return !1;return !0;}return !o(t);}function o(t) {return Object.keys(t).length > 0;}function a(t, e) {return !(!t || !c(t)) && Object.prototype.hasOwnProperty.call(t, e);}function l(t, e) {return Object.prototype.toString.call(t) === `[object ${e}]`;}function c(t) {return "object" == typeof t;}function h(t) {return Array.isArray(t);}function u(t) {return l(t, "Function") || l(t, "AsyncFunction");}function d(t) {return l(t, "String");}function p(t) {return "object" != typeof t || null == t ? t : structuredClone(t);}function f(t) {if ("object" != typeof t || null == t) return t;if (Array.isArray(t)) return t.map((t) => f(t));const e = Object.create(Object.getPrototypeOf(t));for (const i in t) Object.hasOwn(t, i) && (e[i] = f(t[i]));return e;}function g(t, e = 2) {const i = Math.pow(10, e);return Math.round((t + Number.EPSILON) * i) / i;}function m(t) {return new Promise((e) => window.setTimeout(e, t));}function v(t, ...e) {const i = { ...t };return e.forEach((t) => delete i[t]), i;}function y() {n.s.SHOW({ icon: "info", iconAlign: "top", mustBeContained: !0, title: "Dialogs Are Disabled", text: "It appears that dialogs have been disabled in this session. Refresh the report to restore the previous behavior.", callToAction: { text: "Learn More", url: "https://learn.microsoft.com/en-us/power-bi/developer/visuals/create-display-dialog-box#dont-show-dialog-box" } });}}, 3290: (t, e, i) => {"use strict";i.d(e, { I: () => l });var n = i(7447),r = i(2214),s = i(6639),o = i(1470),a = i(3242);class l {static Id = "okvizWizard";static Size = { width: 600, height: 410 };dialogHost;result;container;settings;showProgress;steps;stepIndex = 0;constructor(t, e) {this.dialogHost = t.host, this.result = {}, this.showProgress = e.showProgress, this.steps = e.steps, this.settings = (0, a.o8)(e.settings), globalThis.thisVisual = { element: t.element, host: new r.O5(e.sourceHost.colorPalette, e.sourceHost.locale), internalUpdate: !0 }, o.C7.instance.status = e.diagnostics ? o.cF.Enabled : o.cF.Disabled, t.element.classList.add("okviz-wizard"), this.container = (0, s.tT)(".steps", t.element), this.draw(!1);}get isFirst() {return 0 == this.stepIndex;}get isLast() {return this.stepIndex == this.steps.length - 1;}next() {this.stepIndex < this.steps.length - 1 && (this.stepIndex++, this.draw(!1));}prev() {this.stepIndex > 0 && (this.stepIndex--, this.draw(!0));}draw(t) {const e = this.steps[this.stepIndex];if (!e) return;let i = (0, s.VR)(`#step-${this.stepIndex}`, this.container);if (!i.isNull && t || (i.remove(), i = null), !i) {let t, n;i = (0, s.tT)(`#step-${this.stepIndex}.step`, this.container, [(0, s.tT)(".step-title", { middleware: (e) => t = e }), (0, s.tT)(".step-content", { middleware: (t) => n = t }), (0, s.tT)(".step-controls", [...(this.showProgress ? [(0, s.tT)(".progress", [(0, s.tT)("span", `Step ${this.stepIndex + 1}`), (0, s.tT)("strong", ` / ${this.steps.length}`)])] : []), (0, s.tT)(".right", [...(this.isFirst ? [] : [(0, s.tT)("a.btn.prev.alt", { attr: { href: "#" }, events: { click: (t) => {t.preventDefault(), this.prev();} } }, "Previous")]), ...(this.isLast ? [(0, s.tT)("a.btn.done", { attr: { href: "#" }, events: { click: (t) => {t.preventDefault(), this.dialogHost.close(1, this.result);} } }, "Done")] : [(0, s.tT)("a.btn.next", { attr: { href: "#" }, events: { click: (t) => {t.preventDefault(), this.next();} } }, "Next")])])])]);const r = this.getStepInstance(n, e, this.settings);r && (r.on("save", (t) => {this.result.changedSettings || (this.result.changedSettings = {}), this.result.changedSettings[e.id] = t, this.result.settings = r.settings, this.dialogHost.setResult(this.result);}), r.on("close", (t) => {this.dialogHost.close(t, this.result);}), t.innerText = r.title, t.toggle("" != r.title), r.draw());}(0, s.kO)(".step").forEach((t) => t.classList.add("hidden")), i.classList.remove("hidden");}getStepInstance(t, e, i) {return new n.b(t, e, i);}}globalThis.dialogRegistry = globalThis.dialogRegistry || {}, globalThis.dialogRegistry[l.Id] = l;}, 3341: (t, e, i) => {"use strict";i.d(e, { Ay: () => g });var n = i(1720),r = i(4573),s = i(4078),o = i(7728),a = i(2284),l = function (t, e) {return l = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, l(t, e);};function c(t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}l(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());}var h = function () {return h = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, h.apply(this, arguments);},u = function (t) {function e(e) {var i = t.call(this, e) || this;return i.state = {}, i.state = i.props, i;}return c(e, t), e.prototype.render = function () {return r.n(s.Ay, h({ ref: (0, n.KR)(this, "moveable") }, this.state));}, e;}(r.uA),d = s.XD,p = s.hi,f = s.Gq,g = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return c(e, t), e;}(function (t) {function e(e, i) {void 0 === i && (i = {});var s = t.call(this) || this;s.containerProvider = null, s.selfElement = null, s._warp = !1;var a,l = h({}, i),c = {};f.forEach(function (t) {c[(0, o.PT)("on ".concat(t))] = function (e) {return s.trigger(t, e);};}), i.warpSelf ? (delete i.warpSelf, s._warp = !0, a = e) : (a = (0, o.YE)(e).createElement("div"), e.appendChild(a)), s.containerProvider = (0, r.xr)(r.n(u, h({ ref: (0, n.KR)(s, "innerMoveable") }, l, c)), a), s.selfElement = a;var d = l.target;return (0, o.cy)(d) && d.length > 1 && s.updateRect(), s;}c(e, t);var i = e.prototype;return i.setState = function (t, e) {this.innerMoveable.setState(t, e);}, i.forceUpdate = function (t) {this.innerMoveable.forceUpdate(t);}, i.dragStart = function (t, e) {void 0 === e && (e = t.target), this.innerMoveable.$_timer && this.forceUpdate(), this.getMoveable().dragStart(t, e);}, i.destroy = function () {var t,e = this.selfElement;(0, r.xr)(null, e, this.containerProvider), this._warp || null === (t = null == e ? void 0 : e.parentElement) || void 0 === t || t.removeChild(e), this.containerProvider = null, this.off(), this.selfElement = null, this.innerMoveable = null;}, i.getMoveable = function () {return this.innerMoveable.moveable;}, e = function (t, e, i, n) {var r,s = arguments.length,o = s < 3 ? e : null === n ? n = Object.getOwnPropertyDescriptor(e, i) : n;if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(t, e, i, n);else for (var a = t.length - 1; a >= 0; a--) (r = t[a]) && (o = (s < 3 ? r(o) : s > 3 ? r(e, i, o) : r(e, i)) || o);return s > 3 && o && Object.defineProperty(e, i, o), o;}([(0, n.OA)(p, function (t, e) {t[e] || (t[e] = function () {for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];var n = this.getMoveable();if (n && n[e]) return n[e].apply(n, t);});}), (0, n.OA)(d, function (t, e) {Object.defineProperty(t, e, { get: function () {return this.getMoveable().props[e];}, set: function (t) {var i;this.setState(((i = {})[e] = t, i));}, enumerable: !0, configurable: !0 });})], e), e;}(a.A));}, 3351: (t, e) => {"use strict";var i;Object.defineProperty(e, "__esModule", { value: !0 }), e.DateTimeUnit = void 0, (i = e.DateTimeUnit || (e.DateTimeUnit = {}))[i.Year = 0] = "Year", i[i.Month = 1] = "Month", i[i.Week = 2] = "Week", i[i.Day = 3] = "Day", i[i.Hour = 4] = "Hour", i[i.Minute = 5] = "Minute", i[i.Second = 6] = "Second", i[i.Millisecond = 7] = "Millisecond";}, 3363: (t, e, i) => {"use strict";i.d(e, { Ay: () => g, Jt: () => y, Op: () => p, Ts: () => m, hV: () => f, hZ: () => v, xo: () => h });var n = i(1089),r = i(29),s = i(1463),o = (0, n.A)("start", "end", "cancel", "interrupt"),a = [],l = 0,c = 1,h = 2,u = 3,d = 4,p = 5,f = 6;function g(t, e, i, n, g, m) {var v = t.__transition;if (v) {if (i in v) return;} else t.__transition = {};!function (t, e, i) {var n,o = t.__transition;function a(r) {var p, m, v, y;if (i.state !== c) return g();for (p in o) if ((y = o[p]).name === i.name) {if (y.state === u) return (0, s.A)(a);y.state === d ? (y.state = f, y.timer.stop(), y.on.call("interrupt", t, t.__data__, y.index, y.group), delete o[p]) : +p < e && (y.state = f, y.timer.stop(), y.on.call("cancel", t, t.__data__, y.index, y.group), delete o[p]);}if ((0, s.A)(function () {i.state === u && (i.state = d, i.timer.restart(l, i.delay, i.time), l(r));}), i.state = h, i.on.call("start", t, t.__data__, i.index, i.group), i.state === h) {for (i.state = u, n = new Array(v = i.tween.length), p = 0, m = -1; p < v; ++p) (y = i.tween[p].value.call(t, t.__data__, i.index, i.group)) && (n[++m] = y);n.length = m + 1;}}function l(e) {for (var r = e < i.duration ? i.ease.call(null, e / i.duration) : (i.timer.restart(g), i.state = p, 1), s = -1, o = n.length; ++s < o;) n[s].call(t, r);i.state === p && (i.on.call("end", t, t.__data__, i.index, i.group), g());}function g() {for (var n in i.state = f, i.timer.stop(), delete o[e], o) return;delete t.__transition;}o[e] = i, i.timer = (0, r.O1)(function (t) {i.state = c, i.timer.restart(a, i.delay, i.time), i.delay <= t && a(t - i.delay);}, 0, i.time);}(t, i, { name: e, index: n, group: g, on: o, tween: a, time: m.time, delay: m.delay, duration: m.duration, ease: m.ease, timer: null, state: l });}function m(t, e) {var i = y(t, e);if (i.state > l) throw new Error("too late; already scheduled");return i;}function v(t, e) {var i = y(t, e);if (i.state > u) throw new Error("too late; already running");return i;}function y(t, e) {var i = t.__transition;if (!i || !(i = i[e])) throw new Error("transition not found");return i;}}, 3365: (t, e, i) => {"use strict";i.d(e, { b: () => s, c: () => o });var n = i(1807),r = i(4624);const s = 190;class o extends n.FT3 {visualSettings;modeControlSelect;globalControl;selectionControl;selectionPlaceholder;get mode() {return globalThis.labelDesignerState?.mode || "selection";}set mode(t) {t != this.mode && (globalThis.labelDesignerState.mode = t, this.applyMode());}get canDraw() {return this.visualSettings.categoryLabels.show.value || this.visualSettings.dataLabels.show.value;}constructor(t, e) {super(r.WA, t), this.visualSettings = e;}draw(t) {super.draw(t);const e = this.visualSettings.dataLabels.show.value,i = this.visualSettings.categoryLabels.show.value,r = this.visualSettings.categoryLabels.showUnmatched.value;this.panel.prepend((0, n.tTh)(".oop-top-header", [(0, n.tTh)(".title.icon.icon-edit2", "Customize Labels"), ...(this.canDraw ? [(0, n.tTh)(".mode-control.oop-option", [(0, n.tTh)(".header", "Apply to"), (0, n.tTh)("select", { middleware: (t) => this.modeControlSelect = t, list: [{ value: "selection", text: "(Selection)" }, ...(i ? [{ value: "category", text: "Global: Category Labels" }] : []), ...(e ? [{ value: "data", text: "Global: Data Labels" }] : [])], events: { change: (t, e) => {this.mode = e.value, this.trigger("mode");} } })]), (0, n.tTh)(".global-control", { middleware: (t) => this.globalControl = t }), (0, n.tTh)(".selection-control", { middleware: (t) => this.selectionControl = t }, [(0, n.tTh)(".selection-placeholder", { middleware: (t) => this.selectionPlaceholder = t }), (0, n.tTh)(".selection-actions", [(0, n.tTh)(".action", { events: { click: () => this.trigger("select", "*") } }, "Select All"), ...(i && (r || e) ? [...(e ? [(0, n.tTh)(".action", { events: { click: () => this.trigger("select", "data") } }, "Data")] : []), ...(i ? [...(e ? [(0, n.tTh)(".action", { events: { click: () => this.trigger("select", "category") } }, "Category")] : []), ...(r ? [(0, n.tTh)(".action", { events: { click: () => this.trigger("select", "matched") } }, "Matched"), (0, n.tTh)(".action", { events: { click: () => this.trigger("select", "unmatched") } }, "Unmatched")] : [])] : [])] : [])])])] : [(0, n.tTh)(".oop-empty", "Enable category or data labels to customize them.")])])), this.canDraw ? ((0, n.tTh)(".oop-footer", this.contentElement, []), this.applyMode()) : this.contentElement.remove();}applyMode() {const t = this.mode;this.modeControlSelect && (this.modeControlSelect.value = t), this.selectionControl?.toggleAttribute("hidden", "selection" !== t), this.globalControl?.toggleAttribute("hidden", "selection" === t), this.contentElement.toggleAttribute("disabled", "selection" == t), "selection" != t && (this.selectionPlaceholder?.querySelector(".block")?.remove(), this.selectionPlaceholder?.classList.toggle("empty", !0), this.globalControl && (this.globalControl.textContent = `These options will be applied to all ${t} labels on this map, even those that have been filtered out.`));}selectLabels(t) {if (this.canDraw) {this.selectionPlaceholder.querySelector(".block")?.remove(), this.selectionPlaceholder.classList.toggle("empty", !t.length), t.length && "selection" == this.mode && (0, n.tTh)(".block", this.selectionPlaceholder, [(0, n.tTh)("span", `${t.length} label${t.length > 1 ? "s" : ""} selected`), (0, n.tTh)(".remove.ctrl.icon-close", { attr: { title: "Clear selection" }, events: { click: () => this.trigger("deselect") } })]), this.restoreState();for (const t in this.components) this.components[t].toggleNotice();if (t.length) {const e = {};t.forEach((t) => {const i = (0, r.XQ)(t);for (const t in i) {const n = i[t];void 0 === e[t] ? e[t] = n : Array.isArray(e[t]) ? e[t].push(n) : e[t] = [e[t], n];}"selection" == this.mode && [["connector", "connector"], ["style", "text"], ["alignment", "alignment"]].forEach(([e, i]) => {t.customGlobalSettings?.[i] && this.components[e].toggleNotice("Global custom settings are applied to the selected labels; changes made here overwrite them, but cannot be removed completely. Set 'Apply to' to 'Global: ...' to manage the global settings.", !0);});}), this.updateState(e);}this.contentElement.toggleAttribute("disabled", !t.length);}}destroy() {this.globalControl = null, this.modeControlSelect = null, this.selectionControl = null, this.selectionPlaceholder = null, super.destroy();}}}, 3394: (t, e, i) => {"use strict";i.d(e, { i: () => a });var n = i(6639),r = i(1732),s = i(3242),o = i(4810);class a {name;title;description;hidden;initialHidden;disabled;initialDisabled;collapsed;hasToggle;hasChildren;hasReset;resetTitle = "Reset to default";element;contentElement;onToggle;onCollapse;onReset;path;get className() {return "oop-component";}get isDisabled() {return Array.isArray(this.disabled) ? !!(0, o.Oq)(this.disabled) || !0 === this.disabled[0] : !0 === this.disabled;}constructor(t) {Object.assign(this, t), this.initialDisabled = this.isDisabled, this.initialHidden = this.hidden;}render(t) {let e = this.className;e.startsWith(".") && (e = e.slice(1)), this.element = (0, n.tT)(`.${e}${this.hasChildren && this.collapsed ? ".collapsed" : ""}${this.hidden ? ".hidden" : ""}${this.title ? "" : ".noheader"}`, t, [...(this.title ? [(0, n.tT)(".header" + (this.hasChildren ? ".collapser" : ""), { attr: { ...(this.description ? { title: this.description } : {}) }, events: { ...(this.hasChildren ? { click: (t, e) => {e.classList.contains("oop-toggle-switch") || e.closest(".oop-toggle-switch") || (this.toggleCollapse(), this.onCollapse && this.onCollapse(this.collapsed));} } : {}) } }, [(0, n.tT)(".title" + (this.hasChildren ? ".chevron.icon" : ""), [(0, n.tT)("span", this.title)]), (0, n.tT)(".notice.icon-alert", { attr: { hidden: !0 } }), ...(this.hasToggle ? [(0, r.H)(".oop-toggle-switch.small", null, { checked: !this.isDisabled, change: (t, e) => {t.preventDefault(), this.disabled = !e, this.contentElement?.toggleAttribute("disabled", this.disabled), this.hasChildren && (this.toggleCollapse(!e), this.onCollapse && this.onCollapse(!e)), this.onToggle && this.onToggle(e);} })] : [])])] : []), ...(this.hasChildren ? [(0, n.tT)(".content", { attr: { ...(this.isDisabled ? { disabled: !0 } : {}) }, middleware: (t) => this.contentElement = t }), ...(this.hasReset ? [(0, n.tT)(".oop-reset.oop-action.icon-reset", this.element, { events: { click: () => {this.reset(), this.onReset && this.onReset();} } }, this.resetTitle)] : [])] : [])]);}reset() {this.toggle(!0 !== this.initialDisabled), this.toggleVisibility(!0 !== this.initialHidden);}toggleNotice(t, e = !1) {const i = this.element.querySelector(".notice");i && (i.setAttribute("title", t), i.toggleAttribute("hidden", !t), this.hasToggle && this.element.querySelector(".oop-toggle-switch .switch")?.classList.toggle("readonly", e));}toggleVisibility(t) {this.element && (this.hidden = null != t ? !t : !this.hidden, this.element.classList.toggle("hidden", this.hidden));}toggleCollapse(t) {this.element && this.hasChildren && (this.collapsed = t ?? !this.collapsed, this.element.classList.toggle("collapsed", this.collapsed));}toggle(t) {if (this.element && (null == t && (t = this.isDisabled), this.disabled = (0, s.cy)(t) ? t.map((t) => !t) : !t, this.contentElement?.toggleAttribute("disabled", this.isDisabled), this.hasToggle)) {const t = this.element.querySelector(".oop-toggle-switch");t.querySelector("input").checked = !this.isDisabled, t.querySelector(".switch").classList.toggle("partial", (0, o.Oq)(this.disabled));}}destroy() {this.element?.remove();}}}, 3419: function (t) {var e;e = () => (() => {var t = [function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.CommonErrorCodes = e.BookmarksPlayMode = e.ExportDataType = e.QnaMode = e.PageNavigationPosition = e.BrowserPrintAdjustmentsMode = e.AggregateFunction = e.DataCacheMode = e.CredentialType = e.isPercentOfGrandTotal = e.isColumnAggr = e.isHierarchyLevelAggr = e.isHierarchyLevel = e.isColumn = e.isMeasure = e.getFilterType = e.isBasicFilterWithKeys = e.isFilterKeyColumnsTarget = e.HierarchyIdentityFilter = e.HierarchyFilter = e.AdvancedFilter = e.TupleFilter = e.IdentityFilter = e.BasicFilterWithKeys = e.BasicFilter = e.RelativeTimeFilter = e.RelativeDateFilter = e.TopNFilter = e.IncludeExcludeFilter = e.NotSupportedFilter = e.Filter = e.RelativeDateOperators = e.RelativeDateFilterTimeUnit = e.FilterType = e.FiltersLevel = e.FiltersOperations = e.MenuLocation = e.ContrastMode = e.TokenType = e.ViewMode = e.Permissions = e.SectionVisibility = e.ReportAlignment = e.HyperlinkClickBehavior = e.LayoutType = e.VisualContainerDisplayMode = e.BackgroundType = e.DisplayOption = e.PageSizeType = e.TraceType = void 0, e.validateExportDataRequest = e.validateQnaInterpretInputData = e.validateLoadQnaConfiguration = e.validateSaveAsParameters = e.validateUpdateFiltersRequest = e.validateFilter = e.validatePage = e.validateTileLoad = e.validateDashboardLoad = e.validateQuickCreate = e.validateCreateReport = e.validatePaginatedReportLoad = e.validateReportLoad = e.validateMenuGroupExtension = e.validateExtension = e.validateCustomPageSize = e.validateVisualizationsPane = e.validateSyncSlicersPane = e.validateSelectionPane = e.validatePageNavigationPane = e.validateFieldsPane = e.validateFiltersPane = e.validateBookmarksPane = e.validatePanes = e.validateSettings = e.validateCaptureBookmarkRequest = e.validateApplyBookmarkStateRequest = e.validateApplyBookmarkByNameRequest = e.validateAddBookmarkRequest = e.validatePlayBookmarkRequest = e.validateSlicerState = e.validateSlicer = e.validateVisualSelector = e.isIExtensionArray = e.isIExtensions = e.isGroupedMenuExtension = e.isFlatMenuExtension = e.isReportFiltersArray = e.isOnLoadFilters = e.VisualDataRoleKindPreference = e.VisualDataRoleKind = e.CommandDisplayOption = e.SlicerTargetSelector = e.VisualTypeSelector = e.VisualSelector = e.PageSelector = e.Selector = e.SortDirection = e.LegendPosition = e.TextAlignment = void 0, e.validatePrintSettings = e.validateZoomLevel = e.validateCustomTheme = e.validateCommandsSettings = e.validateVisualSettings = e.validateVisualHeader = void 0;var s,o,a,l,c,h,u,d,p,f,g,m,v,y,b,w,x,S,E,C = i(1);(E = e.TraceType || (e.TraceType = {}))[E.Information = 0] = "Information", E[E.Verbose = 1] = "Verbose", E[E.Warning = 2] = "Warning", E[E.Error = 3] = "Error", E[E.ExpectedError = 4] = "ExpectedError", E[E.UnexpectedError = 5] = "UnexpectedError", E[E.Fatal = 6] = "Fatal", (S = e.PageSizeType || (e.PageSizeType = {}))[S.Widescreen = 0] = "Widescreen", S[S.Standard = 1] = "Standard", S[S.Cortana = 2] = "Cortana", S[S.Letter = 3] = "Letter", S[S.Custom = 4] = "Custom", S[S.Mobile = 5] = "Mobile", (x = e.DisplayOption || (e.DisplayOption = {}))[x.FitToPage = 0] = "FitToPage", x[x.FitToWidth = 1] = "FitToWidth", x[x.ActualSize = 2] = "ActualSize", (w = e.BackgroundType || (e.BackgroundType = {}))[w.Default = 0] = "Default", w[w.Transparent = 1] = "Transparent", (b = e.VisualContainerDisplayMode || (e.VisualContainerDisplayMode = {}))[b.Visible = 0] = "Visible", b[b.Hidden = 1] = "Hidden", (y = e.LayoutType || (e.LayoutType = {}))[y.Master = 0] = "Master", y[y.Custom = 1] = "Custom", y[y.MobilePortrait = 2] = "MobilePortrait", y[y.MobileLandscape = 3] = "MobileLandscape", (v = e.HyperlinkClickBehavior || (e.HyperlinkClickBehavior = {}))[v.Navigate = 0] = "Navigate", v[v.NavigateAndRaiseEvent = 1] = "NavigateAndRaiseEvent", v[v.RaiseEvent = 2] = "RaiseEvent", (m = e.ReportAlignment || (e.ReportAlignment = {}))[m.Left = 0] = "Left", m[m.Center = 1] = "Center", m[m.Right = 2] = "Right", m[m.None = 3] = "None", (g = e.SectionVisibility || (e.SectionVisibility = {}))[g.AlwaysVisible = 0] = "AlwaysVisible", g[g.HiddenInViewMode = 1] = "HiddenInViewMode", (f = e.Permissions || (e.Permissions = {}))[f.Read = 0] = "Read", f[f.ReadWrite = 1] = "ReadWrite", f[f.Copy = 2] = "Copy", f[f.Create = 4] = "Create", f[f.All = 7] = "All", (p = e.ViewMode || (e.ViewMode = {}))[p.View = 0] = "View", p[p.Edit = 1] = "Edit", (d = e.TokenType || (e.TokenType = {}))[d.Aad = 0] = "Aad", d[d.Embed = 1] = "Embed", (u = e.ContrastMode || (e.ContrastMode = {}))[u.None = 0] = "None", u[u.HighContrast1 = 1] = "HighContrast1", u[u.HighContrast2 = 2] = "HighContrast2", u[u.HighContrastBlack = 3] = "HighContrastBlack", u[u.HighContrastWhite = 4] = "HighContrastWhite", (h = e.MenuLocation || (e.MenuLocation = {}))[h.Bottom = 0] = "Bottom", h[h.Top = 1] = "Top", (c = e.FiltersOperations || (e.FiltersOperations = {}))[c.RemoveAll = 0] = "RemoveAll", c[c.ReplaceAll = 1] = "ReplaceAll", c[c.Add = 2] = "Add", c[c.Replace = 3] = "Replace", (l = e.FiltersLevel || (e.FiltersLevel = {}))[l.Report = 0] = "Report", l[l.Page = 1] = "Page", l[l.Visual = 2] = "Visual", function (t) {t[t.Advanced = 0] = "Advanced", t[t.Basic = 1] = "Basic", t[t.Unknown = 2] = "Unknown", t[t.IncludeExclude = 3] = "IncludeExclude", t[t.RelativeDate = 4] = "RelativeDate", t[t.TopN = 5] = "TopN", t[t.Tuple = 6] = "Tuple", t[t.RelativeTime = 7] = "RelativeTime", t[t.Identity = 8] = "Identity", t[t.Hierarchy = 9] = "Hierarchy", t[t.HierarchyIdentity = 10] = "HierarchyIdentity";}(s = e.FilterType || (e.FilterType = {})), (a = e.RelativeDateFilterTimeUnit || (e.RelativeDateFilterTimeUnit = {}))[a.Days = 0] = "Days", a[a.Weeks = 1] = "Weeks", a[a.CalendarWeeks = 2] = "CalendarWeeks", a[a.Months = 3] = "Months", a[a.CalendarMonths = 4] = "CalendarMonths", a[a.Years = 5] = "Years", a[a.CalendarYears = 6] = "CalendarYears", a[a.Minutes = 7] = "Minutes", a[a.Hours = 8] = "Hours", (o = e.RelativeDateOperators || (e.RelativeDateOperators = {}))[o.InLast = 0] = "InLast", o[o.InThis = 1] = "InThis", o[o.InNext = 2] = "InNext";var k = function () {function t(t, e) {this.target = t, this.filterType = e;}return t.prototype.toJSON = function () {var t = { $schema: this.schemaUrl, target: this.target, filterType: this.filterType };return void 0 !== this.displaySettings && (t.displaySettings = this.displaySettings), t;}, t;}();e.Filter = k;var T = function (t) {function e(i, n, r) {var o = t.call(this, i, s.Unknown) || this;return o.message = n, o.notSupportedTypeName = r, o.schemaUrl = e.schemaUrl, o;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.message = this.message, e.notSupportedTypeName = this.notSupportedTypeName, e;}, e.schemaUrl = "http://powerbi.com/product/schema#notSupported", e;}(k);e.NotSupportedFilter = T;var A = function (t) {function e(i, n, r) {var o = t.call(this, i, s.IncludeExclude) || this;return o.target = i, o.values = r, o.isExclude = n, o.schemaUrl = e.schemaUrl, o;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.isExclude = this.isExclude, e.values = this.values, e;}, e.schemaUrl = "http://powerbi.com/product/schema#includeExclude", e;}(k);e.IncludeExcludeFilter = A;var M = function (t) {function e(i, n, r, o) {var a = t.call(this, i, s.TopN) || this;return a.operator = n, a.itemCount = r, a.schemaUrl = e.schemaUrl, a.orderBy = o, a;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.operator = this.operator, e.itemCount = this.itemCount, e.orderBy = this.orderBy, e;}, e.schemaUrl = "http://powerbi.com/product/schema#topN", e;}(k);e.TopNFilter = M;var _ = function (t) {function e(i, n, r, o, a) {var l = t.call(this, i, s.RelativeDate) || this;return l.operator = n, l.timeUnitsCount = r, l.timeUnitType = o, l.includeToday = a, l.schemaUrl = e.schemaUrl, l;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.operator = this.operator, e.timeUnitsCount = this.timeUnitsCount, e.timeUnitType = this.timeUnitType, e.includeToday = this.includeToday, e;}, e.schemaUrl = "http://powerbi.com/product/schema#relativeDate", e;}(k);e.RelativeDateFilter = _;var P = function (t) {function e(i, n, r, o) {var a = t.call(this, i, s.RelativeTime) || this;return a.operator = n, a.timeUnitsCount = r, a.timeUnitType = o, a.schemaUrl = e.schemaUrl, a;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.operator = this.operator, e.timeUnitsCount = this.timeUnitsCount, e.timeUnitType = this.timeUnitType, e;}, e.schemaUrl = "http://powerbi.com/product/schema#relativeTime", e;}(k);e.RelativeTimeFilter = P;var D = function (t) {function e(i, n) {for (var r = [], o = 2; o < arguments.length; o++) r[o - 2] = arguments[o];var a = t.call(this, i, s.Basic) || this;if (a.operator = n, a.schemaUrl = e.schemaUrl, 0 === r.length && "All" !== n) throw new Error('values must be a non-empty array unless your operator is "All".');return Array.isArray(r[0]) ? a.values = r[0] : a.values = r, a;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.operator = this.operator, e.values = this.values, e.requireSingleSelection = !!this.requireSingleSelection, e;}, e.schemaUrl = "http://powerbi.com/product/schema#basic", e;}(k);e.BasicFilter = D;var O = function (t) {function e(e, i, n, r) {var s = t.call(this, e, i, n) || this;s.keyValues = r, s.target = e;var o = e.keys ? e.keys.length : 0;if (o > 0 && !r) throw new Error("You should pass the values to be filtered for each key. You passed: no values and ".concat(o, " keys"));if (0 === o && r && r.length > 0) throw new Error("You passed key values but your target object doesn't contain the keys to be filtered");for (var a = 0, l = s.keyValues; a < l.length; a++) {var c = l[a];if (c) {var h = c.length;if (h !== o) throw new Error("Each tuple of key values should contain a value for each of the keys. You passed: ".concat(h, " values and ").concat(o, " keys"));}}return s;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.keyValues = this.keyValues, e;}, e;}(D);e.BasicFilterWithKeys = O;var I = function (t) {function e(i, n) {var r = t.call(this, i, s.Identity) || this;return r.operator = n, r.schemaUrl = e.schemaUrl, r;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.operator = this.operator, e.target = this.target, e;}, e.schemaUrl = "http://powerbi.com/product/schema#identity", e;}(k);e.IdentityFilter = I;var F = function (t) {function e(i, n, r) {var o = t.call(this, i, s.Tuple) || this;return o.operator = n, o.schemaUrl = e.schemaUrl, o.values = r, o;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.operator = this.operator, e.values = this.values, e.target = this.target, e;}, e.schemaUrl = "http://powerbi.com/product/schema#tuple", e;}(k);e.TupleFilter = F;var R = function (t) {function e(i, n) {for (var r = [], o = 2; o < arguments.length; o++) r[o - 2] = arguments[o];var a,l = t.call(this, i, s.Advanced) || this;if (l.schemaUrl = e.schemaUrl, "string" != typeof n || 0 === n.length) throw new Error("logicalOperator must be a valid operator, You passed: ".concat(n));if (l.logicalOperator = n, (a = Array.isArray(r[0]) ? r[0] : r).length > 2) throw new Error("AdvancedFilters may not have more than two conditions. You passed: ".concat(r.length));if (1 === a.length && "And" !== n) throw new Error('Logical Operator must be "And" when there is only one condition provided');return l.conditions = a, l;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.logicalOperator = this.logicalOperator, e.conditions = this.conditions, e;}, e.schemaUrl = "http://powerbi.com/product/schema#advanced", e;}(k);e.AdvancedFilter = R;var L = function (t) {function e(i, n) {var r = t.call(this, i, s.Hierarchy) || this;return r.schemaUrl = e.schemaUrl, r.hierarchyData = n, r;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.hierarchyData = this.hierarchyData, e.target = this.target, e;}, e.schemaUrl = "http://powerbi.com/product/schema#hierarchy", e;}(k);e.HierarchyFilter = L;var N,V,B,j,z,U,H,q,$,G = function (t) {function e(i, n) {var r = t.call(this, i, s.HierarchyIdentity) || this;return r.schemaUrl = e.schemaUrl, r.hierarchyData = n, r;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.hierarchyData = this.hierarchyData, e.target = this.target, e;}, e.schemaUrl = "http://powerbi.com/product/schema#hierarchyIdentity", e;}(k);function W(t) {if (t.filterType) return t.filterType;var e = t,i = t;return "string" == typeof e.operator && Array.isArray(e.values) ? s.Basic : "string" == typeof i.logicalOperator && Array.isArray(i.conditions) ? s.Advanced : s.Unknown;}function K(t) {return !(!t.table || !t.column || t.aggregationFunction);}e.HierarchyIdentityFilter = G, e.isFilterKeyColumnsTarget = function (t) {return K(t) && !!t.keys;}, e.isBasicFilterWithKeys = function (t) {return W(t) === s.Basic && !!t.keyValues;}, e.getFilterType = W, e.isMeasure = function (t) {return void 0 !== t.table && void 0 !== t.measure;}, e.isColumn = K, e.isHierarchyLevel = function (t) {return !(!(t.table && t.hierarchy && t.hierarchyLevel) || t.aggregationFunction);}, e.isHierarchyLevelAggr = function (t) {return !!(t.table && t.hierarchy && t.hierarchyLevel && t.aggregationFunction);}, e.isColumnAggr = function (t) {return !!(t.table && t.column && t.aggregationFunction);}, e.isPercentOfGrandTotal = function (t) {return !!t.percentOfGrandTotal;}, ($ = e.CredentialType || (e.CredentialType = {}))[$.NoConnection = 0] = "NoConnection", $[$.OnBehalfOf = 1] = "OnBehalfOf", $[$.Anonymous = 2] = "Anonymous", (q = e.DataCacheMode || (e.DataCacheMode = {}))[q.Import = 0] = "Import", q[q.DirectQuery = 1] = "DirectQuery", (H = e.AggregateFunction || (e.AggregateFunction = {}))[H.Default = 1] = "Default", H[H.None = 2] = "None", H[H.Sum = 3] = "Sum", H[H.Min = 4] = "Min", H[H.Max = 5] = "Max", H[H.Count = 6] = "Count", H[H.Average = 7] = "Average", H[H.DistinctCount = 8] = "DistinctCount", (U = e.BrowserPrintAdjustmentsMode || (e.BrowserPrintAdjustmentsMode = {}))[U.Default = 0] = "Default", U[U.NoAdjustments = 1] = "NoAdjustments", (z = e.PageNavigationPosition || (e.PageNavigationPosition = {}))[z.Bottom = 0] = "Bottom", z[z.Left = 1] = "Left", (j = e.QnaMode || (e.QnaMode = {}))[j.Interactive = 0] = "Interactive", j[j.ResultOnly = 1] = "ResultOnly", (B = e.ExportDataType || (e.ExportDataType = {}))[B.Summarized = 0] = "Summarized", B[B.Underlying = 1] = "Underlying", (V = e.BookmarksPlayMode || (e.BookmarksPlayMode = {}))[V.Off = 0] = "Off", V[V.Presentation = 1] = "Presentation", e.CommonErrorCodes = { TokenExpired: "TokenExpired", NotFound: "PowerBIEntityNotFound", InvalidParameters: "Invalid parameters", LoadReportFailed: "LoadReportFailed", NotAuthorized: "PowerBINotAuthorizedException", FailedToLoadModel: "ExplorationContainer_FailedToLoadModel_DefaultDetails" }, e.TextAlignment = { Left: "left", Center: "center", Right: "right" }, e.LegendPosition = { Top: "Top", Bottom: "Bottom", Right: "Right", Left: "Left", TopCenter: "TopCenter", BottomCenter: "BottomCenter", RightCenter: "RightCenter", LeftCenter: "LeftCenter" }, (N = e.SortDirection || (e.SortDirection = {}))[N.Ascending = 1] = "Ascending", N[N.Descending = 2] = "Descending";var Z = function () {function t(t) {this.$schema = t;}return t.prototype.toJSON = function () {return { $schema: this.$schema };}, t;}();e.Selector = Z;var Y = function (t) {function e(i) {var n = t.call(this, e.schemaUrl) || this;return n.pageName = i, n;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.pageName = this.pageName, e;}, e.schemaUrl = "http://powerbi.com/product/schema#pageSelector", e;}(Z);e.PageSelector = Y;var X = function (t) {function e(i) {var n = t.call(this, e.schemaUrl) || this;return n.visualName = i, n;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.visualName = this.visualName, e;}, e.schemaUrl = "http://powerbi.com/product/schema#visualSelector", e;}(Z);e.VisualSelector = X;var J = function (t) {function e(e) {var i = t.call(this, X.schemaUrl) || this;return i.visualType = e, i;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.visualType = this.visualType, e;}, e.schemaUrl = "http://powerbi.com/product/schema#visualTypeSelector", e;}(Z);e.VisualTypeSelector = J;var Q,tt,et,it = function (t) {function e(e) {var i = t.call(this, X.schemaUrl) || this;return i.target = e, i;}return r(e, t), e.prototype.toJSON = function () {var e = t.prototype.toJSON.call(this);return e.target = this.target, e;}, e.schemaUrl = "http://powerbi.com/product/schema#slicerTargetSelector", e;}(Z);function nt(t) {return Array.isArray(t);}function rt(t) {return t && !!t.groupName;}function st(t) {return Array.isArray(t);}function ot(t) {var e = t.message;return e || (e = "".concat(t.path, " is invalid. Not meeting ").concat(t.keyword, " constraint")), { message: e };}e.SlicerTargetSelector = it, (et = e.CommandDisplayOption || (e.CommandDisplayOption = {}))[et.Enabled = 0] = "Enabled", et[et.Disabled = 1] = "Disabled", et[et.Hidden = 2] = "Hidden", (tt = e.VisualDataRoleKind || (e.VisualDataRoleKind = {}))[tt.Grouping = 0] = "Grouping", tt[tt.Measure = 1] = "Measure", tt[tt.GroupingOrMeasure = 2] = "GroupingOrMeasure", (Q = e.VisualDataRoleKindPreference || (e.VisualDataRoleKindPreference = {}))[Q.Measure = 0] = "Measure", Q[Q.Grouping = 1] = "Grouping", e.isOnLoadFilters = function (t) {return t && !nt(t);}, e.isReportFiltersArray = nt, e.isFlatMenuExtension = function (t) {return t && !rt(t);}, e.isGroupedMenuExtension = rt, e.isIExtensions = function (t) {return t && !st(t);}, e.isIExtensionArray = st, e.validateVisualSelector = function (t) {var e = C.Validators.visualSelectorValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateSlicer = function (t) {var e = C.Validators.slicerValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateSlicerState = function (t) {var e = C.Validators.slicerStateValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validatePlayBookmarkRequest = function (t) {var e = C.Validators.playBookmarkRequestValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateAddBookmarkRequest = function (t) {var e = C.Validators.addBookmarkRequestValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateApplyBookmarkByNameRequest = function (t) {var e = C.Validators.applyBookmarkByNameRequestValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateApplyBookmarkStateRequest = function (t) {var e = C.Validators.applyBookmarkStateRequestValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateCaptureBookmarkRequest = function (t) {var e = C.Validators.captureBookmarkRequestValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateSettings = function (t) {var e = C.Validators.settingsValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validatePanes = function (t) {var e = C.Validators.reportPanesValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateBookmarksPane = function (t) {var e = C.Validators.bookmarksPaneValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateFiltersPane = function (t) {var e = C.Validators.filtersPaneValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateFieldsPane = function (t) {var e = C.Validators.fieldsPaneValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validatePageNavigationPane = function (t) {var e = C.Validators.pageNavigationPaneValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateSelectionPane = function (t) {var e = C.Validators.selectionPaneValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateSyncSlicersPane = function (t) {var e = C.Validators.syncSlicersPaneValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateVisualizationsPane = function (t) {var e = C.Validators.visualizationsPaneValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateCustomPageSize = function (t) {var e = C.Validators.customPageSizeValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateExtension = function (t) {var e = C.Validators.extensionValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateMenuGroupExtension = function (t) {var e = C.Validators.menuGroupExtensionValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateReportLoad = function (t) {var e = C.Validators.reportLoadValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validatePaginatedReportLoad = function (t) {var e = C.Validators.paginatedReportLoadValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateCreateReport = function (t) {var e = C.Validators.reportCreateValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateQuickCreate = function (t) {var e = C.Validators.quickCreateValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateDashboardLoad = function (t) {var e = C.Validators.dashboardLoadValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateTileLoad = function (t) {var e = C.Validators.tileLoadValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validatePage = function (t) {var e = C.Validators.pageValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateFilter = function (t) {var e = C.Validators.filterValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateUpdateFiltersRequest = function (t) {var e = C.Validators.updateFiltersRequestValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateSaveAsParameters = function (t) {var e = C.Validators.saveAsParametersValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateLoadQnaConfiguration = function (t) {var e = C.Validators.loadQnaValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateQnaInterpretInputData = function (t) {var e = C.Validators.qnaInterpretInputDataValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateExportDataRequest = function (t) {var e = C.Validators.exportDataRequestValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateVisualHeader = function (t) {var e = C.Validators.visualHeaderValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateVisualSettings = function (t) {var e = C.Validators.visualSettingsValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateCommandsSettings = function (t) {var e = C.Validators.commandsSettingsValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateCustomTheme = function (t) {var e = C.Validators.customThemeValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validateZoomLevel = function (t) {var e = C.Validators.zoomLevelValidator.validate(t);return e ? e.map(ot) : void 0;}, e.validatePrintSettings = function (t) {var e = C.Validators.printSettingsValidator.validate(t);return e ? e.map(ot) : void 0;};}, (t, e, i) => {Object.defineProperty(e, "__esModule", { value: !0 }), e.Validators = void 0;var n = i(2),r = i(5),s = i(6),o = i(7),a = i(8),l = i(9),c = i(10),h = i(11),u = i(12),d = i(13),p = i(14),f = i(15),g = i(16),m = i(17),v = i(18),y = i(19),b = i(20),w = i(21),x = i(22),S = i(23),E = i(24),C = i(25),k = i(26),T = i(27),A = i(28),M = i(29),_ = i(4),P = i(30),D = i(31),O = i(32),I = i(33),F = i(34);e.Validators = { addBookmarkRequestValidator: new r.AddBookmarkRequestValidator(), advancedFilterTypeValidator: new _.EnumValidator([0]), advancedFilterValidator: new u.AdvancedFilterValidator(), anyArrayValidator: new _.ArrayValidator([new k.AnyOfValidator([new _.StringValidator(), new _.NumberValidator(), new _.BooleanValidator()])]), anyFilterValidator: new k.AnyOfValidator([new u.BasicFilterValidator(), new u.AdvancedFilterValidator(), new u.IncludeExcludeFilterValidator(), new u.NotSupportedFilterValidator(), new u.RelativeDateFilterValidator(), new u.TopNFilterValidator(), new u.RelativeTimeFilterValidator(), new u.HierarchyFilterValidator()]), anyValueValidator: new k.AnyOfValidator([new _.StringValidator(), new _.NumberValidator(), new _.BooleanValidator()]), actionBarValidator: new n.ActionBarValidator(), statusBarValidator: new n.StatusBarValidator(), applyBookmarkByNameRequestValidator: new r.ApplyBookmarkByNameRequestValidator(), applyBookmarkStateRequestValidator: new r.ApplyBookmarkStateRequestValidator(), applyBookmarkValidator: new k.AnyOfValidator([new r.ApplyBookmarkByNameRequestValidator(), new r.ApplyBookmarkStateRequestValidator()]), backgroundValidator: new _.EnumValidator([0, 1]), basicFilterTypeValidator: new _.EnumValidator([1]), basicFilterValidator: new u.BasicFilterValidator(), booleanArrayValidator: new _.BooleanArrayValidator(), booleanValidator: new _.BooleanValidator(), bookmarksPaneValidator: new f.BookmarksPaneValidator(), captureBookmarkOptionsValidator: new r.CaptureBookmarkOptionsValidator(), captureBookmarkRequestValidator: new r.CaptureBookmarkRequestValidator(), columnSchemaArrayValidator: new _.ArrayValidator([new D.ColumnSchemaValidator()]), commandDisplayOptionValidator: new _.EnumValidator([0, 1, 2]), commandExtensionSelectorValidator: new k.AnyOfValidator([new w.VisualSelectorValidator(), new w.VisualTypeSelectorValidator()]), commandExtensionArrayValidator: new _.ArrayValidator([new h.CommandExtensionValidator()]), commandExtensionValidator: new h.CommandExtensionValidator(), commandsSettingsArrayValidator: new _.ArrayValidator([new s.CommandsSettingsValidator()]), commandsSettingsValidator: new s.CommandsSettingsValidator(), conditionItemValidator: new u.ConditionItemValidator(), contrastModeValidator: new _.EnumValidator([0, 1, 2, 3, 4]), credentialDetailsValidator: new M.MapValidator([new _.StringValidator()], [new _.StringValidator()]), credentialsValidator: new D.CredentialsValidator(), credentialTypeValidator: new _.EnumValidator([0, 1, 2]), customLayoutDisplayOptionValidator: new _.EnumValidator([0, 1, 2]), customLayoutValidator: new d.CustomLayoutValidator(), customPageSizeValidator: new p.CustomPageSizeValidator(), customThemeValidator: new o.CustomThemeValidator(), dashboardLoadValidator: new a.DashboardLoadValidator(), dataCacheModeValidator: new _.EnumValidator([0, 1]), datasetBindingValidator: new l.DatasetBindingValidator(), datasetCreateConfigValidator: new D.DatasetCreateConfigValidator(), datasourceConnectionConfigValidator: new D.DatasourceConnectionConfigValidator(), displayStateModeValidator: new _.EnumValidator([0, 1]), displayStateValidator: new d.DisplayStateValidator(), exportDataRequestValidator: new c.ExportDataRequestValidator(), extensionArrayValidator: new _.ArrayValidator([new h.ExtensionValidator()]), extensionsValidator: new k.AnyOfValidator([new _.ArrayValidator([new h.ExtensionValidator()]), new h.ExtensionsValidator()]), extensionPointsValidator: new h.ExtensionPointsValidator(), extensionValidator: new h.ExtensionValidator(), fieldForbiddenValidator: new T.FieldForbiddenValidator(), fieldRequiredValidator: new A.FieldRequiredValidator(), fieldsPaneValidator: new f.FieldsPaneValidator(), filterColumnTargetValidator: new u.FilterColumnTargetValidator(), filterDisplaySettingsValidator: new u.FilterDisplaySettingsValidator(), filterConditionsValidator: new _.ArrayValidator([new u.ConditionItemValidator()]), filterHierarchyTargetValidator: new u.FilterHierarchyTargetValidator(), filterMeasureTargetValidator: new u.FilterMeasureTargetValidator(), filterTargetValidator: new k.AnyOfValidator([new u.FilterColumnTargetValidator(), new u.FilterHierarchyTargetValidator(), new u.FilterMeasureTargetValidator(), new _.ArrayValidator([new k.AnyOfValidator([new u.FilterColumnTargetValidator(), new u.FilterHierarchyTargetValidator(), new u.FilterMeasureTargetValidator(), new u.FilterKeyColumnsTargetValidator(), new u.FilterKeyHierarchyTargetValidator(), new _.ArrayValidator([new k.AnyOfValidator([new u.FilterColumnTargetValidator(), new u.FilterHierarchyTargetValidator(), new u.FilterMeasureTargetValidator(), new u.FilterKeyColumnsTargetValidator(), new u.FilterKeyHierarchyTargetValidator()])])])])]), filterValidator: new u.FilterValidator(), filterTypeValidator: new _.EnumValidator([0, 1, 2, 3, 4, 5, 6, 7, 9]), filtersArrayValidator: new _.ArrayValidator([new u.FilterValidator()]), filtersOperationsUpdateValidator: new _.EnumValidator([1, 2, 3]), filtersOperationsRemoveAllValidator: new _.EnumValidator([0]), filtersPaneValidator: new f.FiltersPaneValidator(), hyperlinkClickBehaviorValidator: new _.EnumValidator([0, 1, 2]), includeExcludeFilterValidator: new u.IncludeExcludeFilterValidator(), includeExludeFilterTypeValidator: new _.EnumValidator([3]), includeExcludeFilterValuesValidator: new _.ArrayValidator([new k.AnyOfValidator([new _.StringValidator(), new _.NumberValidator(), new _.BooleanValidator(), new _.ArrayValidator([new _.ArrayValidator([new u.IncludeExcludePointValueValidator()])])])]), hierarchyFilterTypeValidator: new _.EnumValidator([9]), hierarchyFilterValuesValidator: new _.ArrayValidator([new u.HierarchyFilterNodeValidator()]), layoutTypeValidator: new _.EnumValidator([0, 1, 2, 3]), loadQnaValidator: new g.LoadQnaValidator(), menuExtensionValidator: new k.AnyOfValidator([new h.FlatMenuExtensionValidator(), new h.GroupedMenuExtensionValidator()]), menuGroupExtensionArrayValidator: new _.ArrayValidator([new h.MenuGroupExtensionValidator()]), menuGroupExtensionValidator: new h.MenuGroupExtensionValidator(), menuLocationValidator: new _.EnumValidator([0, 1]), notSupportedFilterTypeValidator: new _.EnumValidator([2]), notSupportedFilterValidator: new u.NotSupportedFilterValidator(), numberArrayValidator: new _.NumberArrayValidator(), numberValidator: new _.NumberValidator(), onLoadFiltersBaseValidator: new k.AnyOfValidator([new u.OnLoadFiltersBaseValidator(), new u.OnLoadFiltersBaseRemoveOperationValidator()]), pageLayoutValidator: new M.MapValidator([new _.StringValidator()], [new d.VisualLayoutValidator()]), pageNavigationPaneValidator: new f.PageNavigationPaneValidator(), pageNavigationPositionValidator: new _.EnumValidator([0, 1]), pageSizeTypeValidator: new _.EnumValidator([0, 1, 2, 3, 4, 5]), pageSizeValidator: new p.PageSizeValidator(), pageValidator: new p.PageValidator(), pageViewFieldValidator: new p.PageViewFieldValidator(), pagesLayoutValidator: new M.MapValidator([new _.StringValidator()], [new d.PageLayoutValidator()]), paginatedReportCommandsValidator: new s.PaginatedReportCommandsValidator(), paginatedReportDatasetBindingArrayValidator: new _.ArrayValidator([new F.PaginatedReportDatasetBindingValidator()]), paginatedReportLoadValidator: new y.PaginatedReportLoadValidator(), paginatedReportsettingsValidator: new x.PaginatedReportSettingsValidator(), parameterValuesArrayValidator: new _.ArrayValidator([new y.ReportParameterFieldsValidator()]), parametersPanelValidator: new P.ParametersPanelValidator(), permissionsValidator: new _.EnumValidator([0, 1, 2, 4, 7]), playBookmarkRequestValidator: new r.PlayBookmarkRequestValidator(), printSettingsValidator: new I.PrintSettingsValidator(), qnaInterpretInputDataValidator: new g.QnaInterpretInputDataValidator(), qnaPanesValidator: new f.QnaPanesValidator(), qnaSettingValidator: new g.QnaSettingsValidator(), quickCreateValidator: new O.QuickCreateValidator(), rawDataValidator: new _.ArrayValidator([new _.ArrayValidator([new _.StringValidator()])]), relativeDateFilterOperatorValidator: new _.EnumValidator([0, 1, 2]), relativeDateFilterTimeUnitTypeValidator: new _.EnumValidator([0, 1, 2, 3, 4, 5, 6]), relativeDateFilterTypeValidator: new _.EnumValidator([4]), relativeDateFilterValidator: new u.RelativeDateFilterValidator(), relativeDateTimeFilterTypeValidator: new _.EnumValidator([4, 7]), relativeDateTimeFilterUnitTypeValidator: new _.EnumValidator([0, 1, 2, 3, 4, 5, 6, 7, 8]), relativeTimeFilterTimeUnitTypeValidator: new _.EnumValidator([7, 8]), relativeTimeFilterTypeValidator: new _.EnumValidator([7]), relativeTimeFilterValidator: new u.RelativeTimeFilterValidator(), reportBarsValidator: new n.ReportBarsValidator(), reportCreateValidator: new m.ReportCreateValidator(), reportLoadFiltersValidator: new k.AnyOfValidator([new _.ArrayValidator([new u.FilterValidator()]), new u.OnLoadFiltersValidator()]), reportLoadValidator: new v.ReportLoadValidator(), reportPanesValidator: new f.ReportPanesValidator(), saveAsParametersValidator: new b.SaveAsParametersValidator(), selectionPaneValidator: new f.SelectionPaneValidator(), settingsValidator: new x.SettingsValidator(), singleCommandSettingsValidator: new s.SingleCommandSettingsValidator(), slicerSelectorValidator: new k.AnyOfValidator([new w.VisualSelectorValidator(), new w.SlicerTargetSelectorValidator()]), slicerStateValidator: new S.SlicerStateValidator(), slicerTargetValidator: new k.AnyOfValidator([new u.FilterColumnTargetValidator(), new u.FilterHierarchyTargetValidator(), new u.FilterMeasureTargetValidator(), new u.FilterKeyColumnsTargetValidator(), new u.FilterKeyHierarchyTargetValidator()]), slicerValidator: new S.SlicerValidator(), stringArrayValidator: new _.StringArrayValidator(), stringValidator: new _.StringValidator(), syncSlicersPaneValidator: new f.SyncSlicersPaneValidator(), tableDataArrayValidator: new _.ArrayValidator([new D.TableDataValidator()]), tableSchemaListValidator: new _.ArrayValidator([new D.TableSchemaValidator()]), tileLoadValidator: new E.TileLoadValidator(), tokenTypeValidator: new _.EnumValidator([0, 1]), topNFilterTypeValidator: new _.EnumValidator([5]), topNFilterValidator: new u.TopNFilterValidator(), updateFiltersRequestValidator: new k.AnyOfValidator([new u.UpdateFiltersRequestValidator(), new u.RemoveFiltersRequestValidator()]), viewModeValidator: new _.EnumValidator([0, 1]), visualCommandSelectorValidator: new k.AnyOfValidator([new w.VisualSelectorValidator(), new w.VisualTypeSelectorValidator()]), visualHeaderSelectorValidator: new k.AnyOfValidator([new w.VisualSelectorValidator(), new w.VisualTypeSelectorValidator()]), visualHeaderSettingsValidator: new C.VisualHeaderSettingsValidator(), visualHeaderValidator: new C.VisualHeaderValidator(), visualHeadersValidator: new _.ArrayValidator([new C.VisualHeaderValidator()]), visualizationsPaneValidator: new f.VisualizationsPaneValidator(), visualLayoutValidator: new d.VisualLayoutValidator(), visualSelectorValidator: new w.VisualSelectorValidator(), visualSettingsValidator: new C.VisualSettingsValidator(), visualTypeSelectorValidator: new w.VisualTypeSelectorValidator(), zoomLevelValidator: new _.RangeValidator(.25, 4) };}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.StatusBarValidator = e.ActionBarValidator = e.ReportBarsValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "actionBar", validators: [a.Validators.actionBarValidator] }, { field: "statusBar", validators: [a.Validators.statusBarValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ReportBarsValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visible", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ActionBarValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visible", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.StatusBarValidator = h;}, (t, e) => {Object.defineProperty(e, "__esModule", { value: !0 }), e.MultipleFieldsValidator = void 0;var i = function () {function t(t) {this.fieldValidatorsPairs = t;}return t.prototype.validate = function (t, e, i) {if (!this.fieldValidatorsPairs) return null;for (var n = e ? e + "." + i : i, r = 0, s = this.fieldValidatorsPairs; r < s.length; r++) for (var o = s[r], a = 0, l = o.validators; a < l.length; a++) {var c = l[a].validate(t[o.field], n, o.field);if (c) return c;}return null;}, t;}();e.MultipleFieldsValidator = i;}, function (t, e) {var i,n = this && this.__extends || (i = function (t, e) {return i = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, i(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function n() {this.constructor = t;}i(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());});Object.defineProperty(e, "__esModule", { value: !0 }), e.RangeValidator = e.NumberArrayValidator = e.BooleanArrayValidator = e.StringArrayValidator = e.EnumValidator = e.SchemaValidator = e.ValueValidator = e.NumberValidator = e.BooleanValidator = e.StringValidator = e.TypeValidator = e.ArrayValidator = e.ObjectValidator = void 0;var r = function () {function t() {}return t.prototype.validate = function (t, e, i) {return null == t ? null : "object" != typeof t || Array.isArray(t) ? [{ message: void 0 !== i ? i + " must be an object" : "input must be an object", path: e, keyword: "type" }] : null;}, t;}();e.ObjectValidator = r;var s = function () {function t(t) {this.itemValidators = t;}return t.prototype.validate = function (t, e, i) {if (null == t) return null;if (!Array.isArray(t)) return [{ message: i + " property is invalid", path: (e ? e + "." : "") + i, keyword: "type" }];for (var n = 0; n < t.length; n++) for (var r = (e ? e + "." : "") + i + "." + n.toString(), s = 0, o = this.itemValidators; s < o.length; s++) if (o[s].validate(t[n], r, i)) return [{ message: i + " property is invalid", path: (e ? e + "." : "") + i, keyword: "type" }];return null;}, t;}();e.ArrayValidator = s;var o = function () {function t(t) {this.expectedType = t;}return t.prototype.validate = function (t, e, i) {return null == t ? null : typeof t !== this.expectedType ? [{ message: i + " must be a " + this.expectedType, path: (e ? e + "." : "") + i, keyword: "type" }] : null;}, t;}();e.TypeValidator = o;var a = function (t) {function e() {return t.call(this, "string") || this;}return n(e, t), e;}(o);e.StringValidator = a;var l = function (t) {function e() {return t.call(this, "boolean") || this;}return n(e, t), e;}(o);e.BooleanValidator = l;var c = function (t) {function e() {return t.call(this, "number") || this;}return n(e, t), e;}(o);e.NumberValidator = c;var h = function () {function t(t) {this.possibleValues = t;}return t.prototype.validate = function (t, e, i) {return null == t ? null : this.possibleValues.indexOf(t) < 0 ? [{ message: i + " property is invalid", path: (e ? e + "." : "") + i, keyword: "invalid" }] : null;}, t;}();e.ValueValidator = h;var u = function (t) {function e(e) {var i = t.call(this, [e]) || this;return i.schemaValue = e, i;}return n(e, t), e.prototype.validate = function (e, i, n) {return t.prototype.validate.call(this, e, i, n);}, e;}(h);e.SchemaValidator = u;var d = function (t) {function e(e) {var i = t.call(this) || this;return i.possibleValues = e, i;}return n(e, t), e.prototype.validate = function (e, i, n) {return null == e ? null : t.prototype.validate.call(this, e, i, n) || new h(this.possibleValues).validate(e, i, n);}, e;}(c);e.EnumValidator = d;var p = function (t) {function e() {return t.call(this, [new a()]) || this;}return n(e, t), e.prototype.validate = function (e, i, n) {return t.prototype.validate.call(this, e, i, n) ? [{ message: n + " must be an array of strings", path: (i ? i + "." : "") + n, keyword: "type" }] : null;}, e;}(s);e.StringArrayValidator = p;var f = function (t) {function e() {return t.call(this, [new l()]) || this;}return n(e, t), e.prototype.validate = function (e, i, n) {return t.prototype.validate.call(this, e, i, n) ? [{ message: n + " must be an array of booleans", path: (i ? i + "." : "") + n, keyword: "type" }] : null;}, e;}(s);e.BooleanArrayValidator = f;var g = function (t) {function e() {return t.call(this, [new c()]) || this;}return n(e, t), e.prototype.validate = function (e, i, n) {return t.prototype.validate.call(this, e, i, n) ? [{ message: n + " must be an array of numbers", path: (i ? i + "." : "") + n, keyword: "type" }] : null;}, e;}(s);e.NumberArrayValidator = g;var m = function (t) {function e(e, i) {var n = t.call(this) || this;return n.minValue = e, n.maxValue = i, n;}return n(e, t), e.prototype.validate = function (e, i, n) {return null == e ? null : t.prototype.validate.call(this, e, i, n) || (e > this.maxValue || e < this.minValue ? [{ message: n + " must be a number between " + this.minValue.toString() + " and " + this.maxValue.toString(), path: (i ? i + "." : "") + n, keyword: "range" }] : null);}, e;}(c);e.RangeValidator = m;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.CaptureBookmarkRequestValidator = e.CaptureBookmarkOptionsValidator = e.ApplyBookmarkStateRequestValidator = e.ApplyBookmarkByNameRequestValidator = e.AddBookmarkRequestValidator = e.PlayBookmarkRequestValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var l = [{ field: "playMode", validators: [a.Validators.fieldRequiredValidator, new o.EnumValidator([0, 1])] }];return new s.MultipleFieldsValidator(l).validate(e, i, n);}, e;}(o.ObjectValidator);e.PlayBookmarkRequestValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "state", validators: [a.Validators.stringValidator] }, { field: "displayName", validators: [a.Validators.stringValidator] }, { field: "apply", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.AddBookmarkRequestValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ApplyBookmarkByNameRequestValidator = h;var u = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "state", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ApplyBookmarkStateRequestValidator = u;var d = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "personalizeVisuals", validators: [a.Validators.booleanValidator] }, { field: "allPages", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.CaptureBookmarkOptionsValidator = d;var p = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "options", validators: [a.Validators.fieldRequiredValidator, a.Validators.captureBookmarkOptionsValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.CaptureBookmarkRequestValidator = p;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.PaginatedReportCommandsValidator = e.SingleCommandSettingsValidator = e.CommandsSettingsValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "copy", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "drill", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "drillthrough", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "expandCollapse", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "exportData", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "includeExclude", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "removeVisual", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "search", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "seeData", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "sort", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "spotlight", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "insightsAnalysis", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "addComment", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "groupVisualContainers", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "summarize", validators: [a.Validators.singleCommandSettingsValidator] }, { field: "clearSelection", validators: [a.Validators.singleCommandSettingsValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.CommandsSettingsValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "displayOption", validators: [a.Validators.fieldRequiredValidator, a.Validators.commandDisplayOptionValidator] }, { field: "selector", validators: [a.Validators.visualCommandSelectorValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.SingleCommandSettingsValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "parameterPanel", validators: [a.Validators.parametersPanelValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.PaginatedReportCommandsValidator = h;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.CustomThemeValidator = void 0;var s = i(3),o = i(4),a = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var a = [{ field: "themeJson", validators: [new o.ObjectValidator()] }];return new s.MultipleFieldsValidator(a).validate(e, i, n);}, e;}(o.ObjectValidator);e.CustomThemeValidator = a;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.DashboardLoadValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "accessToken", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "id", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "groupId", validators: [a.Validators.stringValidator] }, { field: "pageView", validators: [a.Validators.pageViewFieldValidator] }, { field: "tokenType", validators: [a.Validators.tokenTypeValidator] }, { field: "embedUrl", validators: [a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.DashboardLoadValidator = l;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.DatasetBindingValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;if (!e.datasetId && !e.paginatedReportBindings) return [{ message: "datasetBinding cannot be empty", path: (i ? i + "." : "") + n, keyword: "invalid" }];var o = [{ field: "datasetId", validators: [a.Validators.stringValidator] }, { field: "paginatedReportBindings", validators: [a.Validators.paginatedReportDatasetBindingArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.DatasetBindingValidator = l;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.ExportDataRequestValidator = void 0;var s = i(3),o = i(4),a = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var a = [{ field: "rows", validators: [new o.NumberValidator()] }, { field: "exportDataType", validators: [new o.EnumValidator([0, 1])] }];return new s.MultipleFieldsValidator(a).validate(e, i, n);}, e;}(o.ObjectValidator);e.ExportDataRequestValidator = a;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.ExtensionsValidator = e.MenuGroupExtensionValidator = e.ExtensionValidator = e.CommandExtensionValidator = e.ExtensionItemValidator = e.ExtensionPointsValidator = e.GroupedMenuExtensionValidator = e.FlatMenuExtensionValidator = e.MenuExtensionBaseValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "title", validators: [a.Validators.stringValidator] }, { field: "icon", validators: [a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.MenuExtensionBaseValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "menuLocation", validators: [a.Validators.menuLocationValidator] }, { field: "groupName", validators: [a.Validators.fieldForbiddenValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(l);e.FlatMenuExtensionValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "groupName", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "menuLocation", validators: [a.Validators.fieldForbiddenValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(l);e.GroupedMenuExtensionValidator = h;var u = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visualContextMenu", validators: [a.Validators.menuExtensionValidator] }, { field: "visualOptionsMenu", validators: [a.Validators.menuExtensionValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ExtensionPointsValidator = u;var d = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "extend", validators: [a.Validators.fieldRequiredValidator, a.Validators.extensionPointsValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ExtensionItemValidator = d;var p = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "title", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "icon", validators: [a.Validators.stringValidator] }, { field: "selector", validators: [a.Validators.commandExtensionSelectorValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(d);e.CommandExtensionValidator = p;var f = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "command", validators: [a.Validators.commandExtensionValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ExtensionValidator = f;var g = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "title", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "menuLocation", validators: [a.Validators.menuLocationValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.MenuGroupExtensionValidator = g;var m = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "commands", validators: [a.Validators.fieldRequiredValidator, a.Validators.commandExtensionArrayValidator] }, { field: "groups", validators: [a.Validators.menuGroupExtensionArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ExtensionsValidator = m;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.OnLoadFiltersValidator = e.OnLoadFiltersBaseRemoveOperationValidator = e.OnLoadFiltersBaseValidator = e.ConditionItemValidator = e.RemoveFiltersRequestValidator = e.UpdateFiltersRequestValidator = e.FilterValidator = e.IncludeExcludePointValueValidator = e.HierarchyFilterNodeValidator = e.HierarchyFilterValidator = e.IncludeExcludeFilterValidator = e.NotSupportedFilterValidator = e.TopNFilterValidator = e.RelativeTimeFilterValidator = e.RelativeDateFilterValidator = e.RelativeDateTimeFilterValidator = e.AdvancedFilterValidator = e.BasicFilterValidator = e.FilterValidatorBase = e.FilterDisplaySettingsValidator = e.FilterMeasureTargetValidator = e.FilterKeyHierarchyTargetValidator = e.FilterHierarchyTargetValidator = e.FilterKeyColumnsTargetValidator = e.FilterColumnTargetValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "table", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "column", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.FilterColumnTargetValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "keys", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(l);e.FilterKeyColumnsTargetValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "table", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "hierarchy", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "hierarchyLevel", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.FilterHierarchyTargetValidator = h;var u = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "keys", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(h);e.FilterKeyHierarchyTargetValidator = u;var d = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "table", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "measure", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.FilterMeasureTargetValidator = d;var p = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "isLockedInViewMode", validators: [a.Validators.booleanValidator] }, { field: "isHiddenInViewMode", validators: [a.Validators.booleanValidator] }, { field: "displayName", validators: [a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.FilterDisplaySettingsValidator = p;var f = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "target", validators: [a.Validators.fieldRequiredValidator, a.Validators.filterTargetValidator] }, { field: "$schema", validators: [a.Validators.stringValidator] }, { field: "filterType", validators: [a.Validators.filterTypeValidator] }, { field: "displaySettings", validators: [a.Validators.filterDisplaySettingsValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.FilterValidatorBase = f;var g = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "operator", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "values", validators: [a.Validators.fieldRequiredValidator, a.Validators.anyArrayValidator] }, { field: "filterType", validators: [a.Validators.basicFilterTypeValidator] }, { field: "requireSingleSelection", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(f);e.BasicFilterValidator = g;var m = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "logicalOperator", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "conditions", validators: [a.Validators.filterConditionsValidator] }, { field: "filterType", validators: [a.Validators.advancedFilterTypeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(f);e.AdvancedFilterValidator = m;var v = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "operator", validators: [a.Validators.fieldRequiredValidator, a.Validators.relativeDateFilterOperatorValidator] }, { field: "timeUnitsCount", validators: [a.Validators.numberValidator] }, { field: "timeUnitType", validators: [a.Validators.fieldRequiredValidator, a.Validators.relativeDateTimeFilterUnitTypeValidator] }, { field: "filterType", validators: [a.Validators.relativeDateTimeFilterTypeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(f);e.RelativeDateTimeFilterValidator = v;var y = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "includeToday", validators: [a.Validators.fieldRequiredValidator, a.Validators.booleanValidator] }, { field: "timeUnitType", validators: [a.Validators.fieldRequiredValidator, a.Validators.relativeDateFilterTimeUnitTypeValidator] }, { field: "filterType", validators: [a.Validators.relativeDateFilterTypeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(v);e.RelativeDateFilterValidator = y;var b = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "timeUnitType", validators: [a.Validators.fieldRequiredValidator, a.Validators.relativeTimeFilterTimeUnitTypeValidator] }, { field: "filterType", validators: [a.Validators.relativeTimeFilterTypeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(v);e.RelativeTimeFilterValidator = b;var w = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "operator", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "itemCount", validators: [a.Validators.fieldRequiredValidator, a.Validators.numberValidator] }, { field: "filterType", validators: [a.Validators.topNFilterTypeValidator] }, { field: "orderBy", validators: [a.Validators.fieldRequiredValidator, a.Validators.filterTargetValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(f);e.TopNFilterValidator = w;var x = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "message", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "notSupportedTypeName", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "filterType", validators: [a.Validators.notSupportedFilterTypeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(f);e.NotSupportedFilterValidator = x;var S = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "isExclude", validators: [a.Validators.fieldRequiredValidator, a.Validators.booleanValidator] }, { field: "values", validators: [a.Validators.fieldRequiredValidator, a.Validators.includeExcludeFilterValuesValidator] }, { field: "filterType", validators: [a.Validators.includeExludeFilterTypeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(f);e.IncludeExcludeFilterValidator = S;var E = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "hierarchyData", validators: [a.Validators.fieldRequiredValidator, a.Validators.hierarchyFilterValuesValidator] }, { field: "filterType", validators: [a.Validators.hierarchyFilterTypeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(f);e.HierarchyFilterValidator = E;var C = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "value", validators: [a.Validators.anyValueValidator] }, { field: "keyValues", validators: [a.Validators.anyArrayValidator] }, { field: "children", validators: [a.Validators.hierarchyFilterValuesValidator] }, { field: "operator", validators: [a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.HierarchyFilterNodeValidator = C;var k = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "value", validators: [a.Validators.fieldRequiredValidator, a.Validators.anyValueValidator] }, { field: "keyValues", validators: [a.Validators.anyArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.IncludeExcludePointValueValidator = k;var T = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {return null == e ? null : t.prototype.validate.call(this, e, i, n) || a.Validators.anyFilterValidator.validate(e, i, n);}, e;}(o.ObjectValidator);e.FilterValidator = T;var A = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "filtersOperation", validators: [a.Validators.fieldRequiredValidator, a.Validators.filtersOperationsUpdateValidator] }, { field: "filters", validators: [a.Validators.fieldRequiredValidator, a.Validators.filtersArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.UpdateFiltersRequestValidator = A;var M = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "filtersOperation", validators: [a.Validators.fieldRequiredValidator, a.Validators.filtersOperationsRemoveAllValidator] }, { field: "filters", validators: [a.Validators.fieldForbiddenValidator, a.Validators.filtersArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.RemoveFiltersRequestValidator = M;var _ = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "value", validators: [a.Validators.anyValueValidator] }, { field: "operator", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ConditionItemValidator = _;var P = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "operation", validators: [a.Validators.fieldRequiredValidator, a.Validators.filtersOperationsUpdateValidator] }, { field: "filters", validators: [a.Validators.fieldRequiredValidator, a.Validators.filtersArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.OnLoadFiltersBaseValidator = P;var D = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "operation", validators: [a.Validators.fieldRequiredValidator, a.Validators.filtersOperationsRemoveAllValidator] }, { field: "filters", validators: [a.Validators.fieldForbiddenValidator, a.Validators.filtersArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.OnLoadFiltersBaseRemoveOperationValidator = D;var O = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "allPages", validators: [a.Validators.onLoadFiltersBaseValidator] }, { field: "currentPage", validators: [a.Validators.onLoadFiltersBaseValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.OnLoadFiltersValidator = O;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.PageLayoutValidator = e.DisplayStateValidator = e.VisualLayoutValidator = e.CustomLayoutValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "pageSize", validators: [a.Validators.pageSizeValidator] }, { field: "displayOption", validators: [a.Validators.customLayoutDisplayOptionValidator] }, { field: "pagesLayout", validators: [a.Validators.pagesLayoutValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.CustomLayoutValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "x", validators: [a.Validators.numberValidator] }, { field: "y", validators: [a.Validators.numberValidator] }, { field: "z", validators: [a.Validators.numberValidator] }, { field: "width", validators: [a.Validators.numberValidator] }, { field: "height", validators: [a.Validators.numberValidator] }, { field: "displayState", validators: [a.Validators.displayStateValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.VisualLayoutValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "mode", validators: [a.Validators.displayStateModeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.DisplayStateValidator = h;var u = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visualsLayout", validators: [a.Validators.fieldRequiredValidator, a.Validators.pageLayoutValidator] }, { field: "defaultLayout", validators: [a.Validators.visualLayoutValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.PageLayoutValidator = u;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.PageViewFieldValidator = e.PageValidator = e.CustomPageSizeValidator = e.PageSizeValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "type", validators: [a.Validators.fieldRequiredValidator, a.Validators.pageSizeTypeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.PageSizeValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "width", validators: [a.Validators.numberValidator] }, { field: "height", validators: [a.Validators.numberValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(l);e.CustomPageSizeValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.PageValidator = h;var u = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {return null == e ? null : t.prototype.validate.call(this, e, i, n) || (["actualSize", "fitToWidth", "oneColumn"].indexOf(e) < 0 ? [{ message: 'pageView must be a string with one of the following values: "actualSize", "fitToWidth", "oneColumn"' }] : null);}, e;}(o.StringValidator);e.PageViewFieldValidator = u;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.VisualizationsPaneValidator = e.SyncSlicersPaneValidator = e.SelectionPaneValidator = e.PageNavigationPaneValidator = e.FiltersPaneValidator = e.FieldsPaneValidator = e.BookmarksPaneValidator = e.QnaPanesValidator = e.ReportPanesValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "bookmarks", validators: [a.Validators.bookmarksPaneValidator] }, { field: "fields", validators: [a.Validators.fieldsPaneValidator] }, { field: "filters", validators: [a.Validators.filtersPaneValidator] }, { field: "pageNavigation", validators: [a.Validators.pageNavigationPaneValidator] }, { field: "selection", validators: [a.Validators.selectionPaneValidator] }, { field: "syncSlicers", validators: [a.Validators.syncSlicersPaneValidator] }, { field: "visualizations", validators: [a.Validators.visualizationsPaneValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ReportPanesValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "filters", validators: [a.Validators.filtersPaneValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.QnaPanesValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visible", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.BookmarksPaneValidator = h;var u = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "expanded", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.FieldsPaneValidator = u;var d = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visible", validators: [a.Validators.booleanValidator] }, { field: "expanded", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.FiltersPaneValidator = d;var p = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visible", validators: [a.Validators.booleanValidator] }, { field: "position", validators: [a.Validators.pageNavigationPositionValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.PageNavigationPaneValidator = p;var f = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visible", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.SelectionPaneValidator = f;var g = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visible", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.SyncSlicersPaneValidator = g;var m = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "expanded", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.VisualizationsPaneValidator = m;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.QnaInterpretInputDataValidator = e.QnaSettingsValidator = e.LoadQnaValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "accessToken", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "datasetIds", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringArrayValidator] }, { field: "question", validators: [a.Validators.stringValidator] }, { field: "viewMode", validators: [a.Validators.viewModeValidator] }, { field: "settings", validators: [a.Validators.qnaSettingValidator] }, { field: "tokenType", validators: [a.Validators.tokenTypeValidator] }, { field: "groupId", validators: [a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.LoadQnaValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "filterPaneEnabled", validators: [a.Validators.booleanValidator] }, { field: "hideErrors", validators: [a.Validators.booleanValidator] }, { field: "panes", validators: [a.Validators.qnaPanesValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.QnaSettingsValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "datasetIds", validators: [a.Validators.stringArrayValidator] }, { field: "question", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.QnaInterpretInputDataValidator = h;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.ReportCreateValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "accessToken", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "datasetId", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "groupId", validators: [a.Validators.stringValidator] }, { field: "tokenType", validators: [a.Validators.tokenTypeValidator] }, { field: "theme", validators: [a.Validators.customThemeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ReportCreateValidator = l;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.ReportLoadValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "accessToken", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "id", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "groupId", validators: [a.Validators.stringValidator] }, { field: "settings", validators: [a.Validators.settingsValidator] }, { field: "pageName", validators: [a.Validators.stringValidator] }, { field: "filters", validators: [a.Validators.reportLoadFiltersValidator] }, { field: "permissions", validators: [a.Validators.permissionsValidator] }, { field: "viewMode", validators: [a.Validators.viewModeValidator] }, { field: "tokenType", validators: [a.Validators.tokenTypeValidator] }, { field: "bookmark", validators: [a.Validators.applyBookmarkValidator] }, { field: "theme", validators: [a.Validators.customThemeValidator] }, { field: "embedUrl", validators: [a.Validators.stringValidator] }, { field: "datasetBinding", validators: [a.Validators.datasetBindingValidator] }, { field: "contrastMode", validators: [a.Validators.contrastModeValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ReportLoadValidator = l;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.ReportParameterFieldsValidator = e.PaginatedReportLoadValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "accessToken", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "id", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "groupId", validators: [a.Validators.stringValidator] }, { field: "settings", validators: [a.Validators.paginatedReportsettingsValidator] }, { field: "tokenType", validators: [a.Validators.tokenTypeValidator] }, { field: "embedUrl", validators: [a.Validators.stringValidator] }, { field: "type", validators: [a.Validators.stringValidator] }, { field: "parameterValues", validators: [a.Validators.parameterValuesArrayValidator] }, { field: "datasetBindings", validators: [a.Validators.paginatedReportDatasetBindingArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.PaginatedReportLoadValidator = l;var c = function () {function t() {}return t.prototype.validate = function (t, e, i) {if (null == t) return null;var n = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "value", validators: [a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(n).validate(t, e, i);}, t;}();e.ReportParameterFieldsValidator = c;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.SaveAsParametersValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.SaveAsParametersValidator = l;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.SlicerTargetSelectorValidator = e.VisualTypeSelectorValidator = e.VisualSelectorValidator = void 0;var s = i(3),o = i(4),a = i(4),l = i(1),c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "$schema", validators: [l.Validators.stringValidator, new a.SchemaValidator("http://powerbi.com/product/schema#visualSelector")] }, { field: "visualName", validators: [l.Validators.fieldRequiredValidator, l.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.VisualSelectorValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "$schema", validators: [l.Validators.fieldRequiredValidator, l.Validators.stringValidator, new a.SchemaValidator("http://powerbi.com/product/schema#visualTypeSelector")] }, { field: "visualType", validators: [l.Validators.fieldRequiredValidator, l.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.VisualTypeSelectorValidator = h;var u = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "$schema", validators: [l.Validators.fieldRequiredValidator, l.Validators.stringValidator, new a.SchemaValidator("http://powerbi.com/product/schema#slicerTargetSelector")] }, { field: "target", validators: [l.Validators.fieldRequiredValidator, l.Validators.slicerTargetValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.SlicerTargetSelectorValidator = u;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.PaginatedReportSettingsValidator = e.SettingsValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "filterPaneEnabled", validators: [a.Validators.booleanValidator] }, { field: "navContentPaneEnabled", validators: [a.Validators.booleanValidator] }, { field: "bookmarksPaneEnabled", validators: [a.Validators.booleanValidator] }, { field: "useCustomSaveAsDialog", validators: [a.Validators.booleanValidator] }, { field: "extensions", validators: [a.Validators.extensionsValidator] }, { field: "layoutType", validators: [a.Validators.layoutTypeValidator] }, { field: "customLayout", validators: [a.Validators.customLayoutValidator] }, { field: "background", validators: [a.Validators.backgroundValidator] }, { field: "visualSettings", validators: [a.Validators.visualSettingsValidator] }, { field: "hideErrors", validators: [a.Validators.booleanValidator] }, { field: "commands", validators: [a.Validators.commandsSettingsArrayValidator] }, { field: "hyperlinkClickBehavior", validators: [a.Validators.hyperlinkClickBehaviorValidator] }, { field: "bars", validators: [a.Validators.reportBarsValidator] }, { field: "panes", validators: [a.Validators.reportPanesValidator] }, { field: "personalBookmarksEnabled", validators: [a.Validators.booleanValidator] }, { field: "persistentFiltersEnabled", validators: [a.Validators.booleanValidator] }, { field: "visualRenderedEvents", validators: [a.Validators.booleanValidator] }, { field: "authoringHintsEnabled", validators: [a.Validators.booleanValidator] }, { field: "printSettings", validators: [a.Validators.printSettingsValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.SettingsValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "commands", validators: [a.Validators.paginatedReportCommandsValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.PaginatedReportSettingsValidator = c;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.SlicerStateValidator = e.SlicerValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "selector", validators: [a.Validators.fieldRequiredValidator, a.Validators.slicerSelectorValidator] }, { field: "state", validators: [a.Validators.fieldRequiredValidator, a.Validators.slicerStateValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.SlicerValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "filters", validators: [a.Validators.filtersArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.SlicerStateValidator = c;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.TileLoadValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "accessToken", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "id", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "dashboardId", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "groupId", validators: [a.Validators.stringValidator] }, { field: "pageView", validators: [a.Validators.stringValidator] }, { field: "tokenType", validators: [a.Validators.tokenTypeValidator] }, { field: "width", validators: [a.Validators.numberValidator] }, { field: "height", validators: [a.Validators.numberValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.TileLoadValidator = l;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.VisualHeaderValidator = e.VisualHeaderSettingsValidator = e.VisualSettingsValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visualHeaders", validators: [a.Validators.visualHeadersValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.VisualSettingsValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "visible", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.VisualHeaderSettingsValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "settings", validators: [a.Validators.fieldRequiredValidator, a.Validators.visualHeaderSettingsValidator] }, { field: "selector", validators: [a.Validators.visualHeaderSelectorValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.VisualHeaderValidator = h;}, (t, e) => {Object.defineProperty(e, "__esModule", { value: !0 }), e.AnyOfValidator = void 0;var i = function () {function t(t) {this.validators = t;}return t.prototype.validate = function (t, e, i) {if (null == t) return null;for (var n = !1, r = 0, s = this.validators; r < s.length; r++) if (!s[r].validate(t, e, i)) {n = !0;break;}return n ? null : [{ message: i + " property is invalid", path: (e ? e + "." : "") + i, keyword: "invalid" }];}, t;}();e.AnyOfValidator = i;}, (t, e) => {Object.defineProperty(e, "__esModule", { value: !0 }), e.FieldForbiddenValidator = void 0;var i = function () {function t() {}return t.prototype.validate = function (t, e, i) {return void 0 !== t ? [{ message: i + " is forbidden", path: (e ? e + "." : "") + i, keyword: "forbidden" }] : null;}, t;}();e.FieldForbiddenValidator = i;}, (t, e) => {Object.defineProperty(e, "__esModule", { value: !0 }), e.FieldRequiredValidator = void 0;var i = function () {function t() {}return t.prototype.validate = function (t, e, i) {return null == t ? [{ message: i + " is required", path: (e ? e + "." : "") + i, keyword: "required" }] : null;}, t;}();e.FieldRequiredValidator = i;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.MapValidator = void 0;var s = function (t) {function e(e, i) {var n = t.call(this) || this;return n.keyValidators = e, n.valueValidators = i, n;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;for (var s in e) if (e.hasOwnProperty(s)) {for (var o = (i ? i + "." : "") + n + "." + s, a = 0, l = this.keyValidators; a < l.length; a++) if (r = l[a].validate(s, o, n)) return r;for (var c = 0, h = this.valueValidators; c < h.length; c++) if (r = h[c].validate(e[s], o, n)) return r;}return null;}, e;}(i(4).ObjectValidator);e.MapValidator = s;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.ParametersPanelValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "expanded", validators: [a.Validators.booleanValidator] }, { field: "enabled", validators: [a.Validators.booleanValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ParametersPanelValidator = l;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.TableDataValidator = e.TableSchemaValidator = e.ColumnSchemaValidator = e.CredentialsValidator = e.DatasourceConnectionConfigValidator = e.DatasetCreateConfigValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "locale", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "mashupDocument", validators: [a.Validators.stringValidator] }, { field: "datasourceConnectionConfig", validators: [a.Validators.datasourceConnectionConfigValidator] }, { field: "tableSchemaList", validators: [a.Validators.tableSchemaListValidator] }, { field: "data", validators: [a.Validators.tableDataArrayValidator] }];return (r = new s.MultipleFieldsValidator(o).validate(e, i, n)) || (e.datasourceConnectionConfig && null == e.mashupDocument ? [{ message: "mashupDocument cannot be empty when datasourceConnectionConfig is presented" }] : e.data && null == e.tableSchemaList ? [{ message: "tableSchemaList cannot be empty when data is provided" }] : null == e.data && null == e.mashupDocument ? [{ message: "At least one of data or mashupDocument must be provided" }] : void 0);}, e;}(o.ObjectValidator);e.DatasetCreateConfigValidator = l;var c = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "dataCacheMode", validators: [a.Validators.dataCacheModeValidator] }, { field: "credentials", validators: [a.Validators.credentialsValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.DatasourceConnectionConfigValidator = c;var h = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "credentialType", validators: [a.Validators.credentialTypeValidator] }, { field: "credentialDetails", validators: [a.Validators.credentialDetailsValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.CredentialsValidator = h;var u = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "displayName", validators: [a.Validators.stringValidator] }, { field: "dataType", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.ColumnSchemaValidator = u;var d = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "columns", validators: [a.Validators.fieldRequiredValidator, a.Validators.columnSchemaArrayValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.TableSchemaValidator = d;var p = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "name", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "rows", validators: [a.Validators.fieldRequiredValidator, a.Validators.rawDataValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.TableDataValidator = p;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.QuickCreateValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "accessToken", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "groupId", validators: [a.Validators.stringValidator] }, { field: "tokenType", validators: [a.Validators.tokenTypeValidator] }, { field: "theme", validators: [a.Validators.customThemeValidator] }, { field: "datasetCreateConfig", validators: [a.Validators.fieldRequiredValidator, a.Validators.datasetCreateConfigValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.QuickCreateValidator = l;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.PrintSettingsValidator = void 0;var s = i(3),o = i(4),a = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var a = [{ field: "browserPrintAdjustmentsMode", validators: [new o.EnumValidator([0, 1])] }];return new s.MultipleFieldsValidator(a).validate(e, i, n);}, e;}(o.ObjectValidator);e.PrintSettingsValidator = a;}, function (t, e, i) {var n,r = this && this.__extends || (n = function (t, e) {return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, n(t, e);}, function (t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}n(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());});Object.defineProperty(e, "__esModule", { value: !0 }), e.PaginatedReportDatasetBindingValidator = void 0;var s = i(3),o = i(4),a = i(1),l = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return r(e, t), e.prototype.validate = function (e, i, n) {if (null == e) return null;var r = t.prototype.validate.call(this, e, i, n);if (r) return r;var o = [{ field: "sourceDatasetId", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }, { field: "targetDatasetId", validators: [a.Validators.fieldRequiredValidator, a.Validators.stringValidator] }];return new s.MultipleFieldsValidator(o).validate(e, i, n);}, e;}(o.ObjectValidator);e.PaginatedReportDatasetBindingValidator = l;}],e = {},i = function i(n) {var r = e[n];if (void 0 !== r) return r.exports;var s = e[n] = { exports: {} };return t[n].call(s.exports, s, s.exports, i), s.exports;}(0);return i;})(), t.exports = e();}, 3446: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(7268);function r(t, e) {var i, n;function r() {var r = e.apply(this, arguments);return r !== n && (i = (n = r) && function (t, e) {return function (i) {this.setAttributeNS(t.space, t.local, e.call(this, i));};}(t, r)), i;}return r._value = e, r;}function s(t, e) {var i, n;function r() {var r = e.apply(this, arguments);return r !== n && (i = (n = r) && function (t, e) {return function (i) {this.setAttribute(t, e.call(this, i));};}(t, r)), i;}return r._value = e, r;}function o(t, e) {var i = "attr." + t;if (arguments.length < 2) return (i = this.tween(i)) && i._value;if (null == e) return this.tween(i, null);if ("function" != typeof e) throw new Error();var o = (0, n.A)(t);return this.tween(i, (o.local ? r : s)(o, e));}}, 3455: (t, e, i) => {"use strict";function n() {return Array.from(this);}i.d(e, { A: () => n });}, 3473: (t, e, i) => {"use strict";i.d(e, { Dh: () => _, Mb: () => P, V3: () => M, Yw: () => T });var n = i(1807),r = i(3179),s = i(1171),o = i(5539),a = i(100),l = i(7674),c = l.z0.Kx;const h = " ",u = (t = 0) => ({ value: thisVisual.host.colorPalette.getColor(t.toString()).value }),d = () => ({ value: thisVisual.host.colorPalette.foreground.value }),p = (t, ...e) => e.includes(t?.value),f = { minValue: { type: 0, value: 0 }, maxValue: { type: 1, value: 200 }, unitSymbol: "pt", unitSymbolAfterInput: !0 },g = { minValue: { type: 0, value: 0 }, maxValue: { type: 1, value: 100 }, unitSymbol: "%", unitSymbolAfterInput: !0 },m = { minValue: { type: 0, value: 10 }, maxValue: { type: 1, value: 100 }, unitSymbol: "%", unitSymbolAfterInput: !0 },v = { minValue: { type: 0, value: 0 }, maxValue: { type: 1, value: 4 } },y = { minValue: { type: 0, value: 1 }, maxValue: { type: 1, value: 1e3 } },b = { minValue: { type: 0, value: 0 }, maxValue: { type: 1, value: 20 } },w = { minValue: { type: 0, value: 0 }, maxValue: { type: 1, value: 40 } },x = [{ displayName: "(Not Allowed)", value: "no" }, { displayName: "Sum", value: "sum" }, { displayName: "Minimum", value: "min" }, { displayName: "Maximum", value: "max" }],S = [{ displayName: "Solid", value: "solid" }, { displayName: "Dashed", value: "dashed" }, { displayName: "Dotted", value: "dotted" }, { displayName: "Double", value: "double" }],E = [{ displayName: "Auto", value: "" }, { displayName: "Auto (with max)", value: "max" }, { displayName: "Fixed", value: "fixed" }],C = [{ displayName: "Original", value: "original" }, { displayName: "Custom", value: "forced" }, { displayName: "(Hidden)", value: "hidden" }],k = [{ displayName: "Change Map", value: "change-map" }, { displayName: "Change and Select All", value: "select-all" }, { displayName: "Change and Select First", value: "select-first" }];var T;function A(t) {return t.categoryLabels.includeDataLabel.value || p(t.categoryLabels.matchedDisplayValue.value, "custom") && !!t.categoryLabels.matchedCustomValue.value.match(/{value}/);}function M(t, e) {const i = p(t.areas[`${e}Outline`].value, "forced"),n = t.areas[`${e}ForceOutline`].value || t.areas[`${e}CustomOutlineWidth`].value;return i && n;}function _(t) {const e = (0, n.SN4)(t.drill.categoryLevelMapsByColumn, 0);return t.drill.categoryLevelMaps.value && e;}!function (t) {t.Disabled = "", t.Single = "single", t.All = "all";}(T || (T = {}));class P extends c {appearance = new D();areas = new O();categoryLabels = new I();dataLabels = new F();legend = new R();tooltips = new L();toolbars = new N();accessibility = new j();drill = new V();advanced = new B();license = new s.th();myStorage = new z();about = new U();featureFlags = new n.br9();updater = new o.JA();internal = new H();cards = [this.appearance, this.areas, this.categoryLabels, this.dataLabels, this.legend, this.tooltips, this.toolbars, this.drill, this.advanced, this.accessibility, this.license, this.myStorage, this.about, this.featureFlags, this.updater, this.internal];}class D extends n.zD3 {name = "appearance";displayName = "Appearance";showTitle = (0, n.Z0q)(l.z0.jF, { name: "mapTitle", value: !0 });titleColor = (0, n.Z0q)(l.z0.sk, { name: "mapTitleFill", displayName: "Color", value: { value: "#424242" } });showPlaceholder = (0, n.Z0q)(l.z0.jF, { name: "showPlaceholder", value: !0 });placeholder = (0, n.Z0q)(l.z0.PA, { name: "placeholder", displayName: `Placeholder Type ${h}`, description: "Choose the type placeholder to show. If you choose 'Auto', a grid will be shown when in Editing View and a standard text and a background image when in Reading View.", value: { value: "auto", displayName: "(Auto)" }, items: [{ value: "auto", displayName: "(Auto)" }, { value: "grid", displayName: "Grid" }, { value: "image", displayName: "Image & Text" }] });placeholderGridCols = (0, n.Z0q)(l.z0.iB, { name: "placeholderGridCols", displayName: "Grid Columns", value: 4, options: { minValue: { type: 0, value: 1 }, maxValue: { type: 1, value: 10 } }, visibleIf: (t) => p(t.appearance.placeholder.value, "auto", "grid") });placeholderGridRows = (0, n.Z0q)(l.z0.iB, { name: "placeholderGridRows", displayName: "Grid Rows", value: 3, options: { minValue: { type: 0, value: 1 }, maxValue: { type: 1, value: 10 } }, visibleIf: (t) => p(t.appearance.placeholder.value, "auto", "grid") });placeholderImage = (0, n.Z0q)(l.z0.PA, { name: "placeholderImage", displayName: "Image Type", value: { value: "geo", displayName: "Geographical" }, items: [{ value: "geo", displayName: "Geographical" }, { value: "theater", displayName: "Theater" }, { value: "floorPlan", displayName: "Floor Plan" }, { value: "body", displayName: "Human Body" }, { value: "plane", displayName: "Airplane" }, { value: "custom", displayName: "(Custom)" }, { value: "none", displayName: "(None)" }], visibleIf: (t) => p(t.appearance.placeholder.value, "auto", "image") });placeholderImageUrl = (0, n.Z0q)(l.z0.ks, { name: "placeholderImageUrl", displayName: `Image URL ${h}`, description: "Enter the URL of the image to show as a placeholder.", placeholder: "https://", value: "", visibleIf: (t) => p(t.appearance.placeholder.value, "auto", "image") && p(t.appearance.placeholderImage.value, "custom") });placeholderText = (0, n.Z0q)(l.z0.ks, { name: "placeholderText", displayName: `Text ${h}`, description: "Enter the text to show as a placeholder. You can use these placeholders: '{category}', '{path}' to include dynamic data. Leave empty to not show any text.", value: "No map set at this level", placeholder: "Enter text", visibleIf: (t) => p(t.appearance.placeholder.value, "auto", "image") });placeholderFont = (0, n.Cjg)(l.z0.tc, { name: "placeholderFont", displayName: "Font", fontFamily: (0, n.Z0q)(l.z0.Cx, { name: "placeholderFontFamily", value: n.Q9G }), fontSize: (0, n.Z0q)(l.z0.iB, { name: "placeholderFontSize", displayName: "Font size", value: 12 }), bold: (0, n.Z0q)(l.z0.jF, { name: "placeholderBold", value: !1 }), italic: (0, n.Z0q)(l.z0.jF, { name: "placeholderItalic", value: !1 }), underline: (0, n.Z0q)(l.z0.jF, { name: "placeholderUnderline", value: !1 }) });placeholderColor = (0, n.Z0q)(l.z0.sk, { name: "placeholderFill", displayName: "Color", value: { value: "#878787" } });keepAspectRatio = (0, n.Z0q)(l.z0.jF, { name: "keepAspectRatio", displayName: `Keep Aspect Ratio ${h}`, description: "Keep the aspect ratio of the map when resizing the visual. Disable to stretch the map to fill the available space.", value: !0 });viewboxScale = (0, n.Z0q)(l.z0.Ap, { name: "viewboxScale", displayName: `Viewbox Scale ${h}`, description: "Set the map viewbox scale. Increasing the value will make the map larger and could hide some areas, decreasing it will make the map smaller.", value: 100, options: { minValue: { type: 0, value: 1 }, maxValue: { type: 1, value: 200 }, unitSymbol: "%", unitSymbolAfterInput: !0 } });showAttribution = (0, n.Z0q)(l.z0.jF, { name: "attribution", value: !0 });attributionFont = (0, n.Cjg)(l.z0.tc, { name: "attributionFont", displayName: "Font", fontFamily: (0, n.Z0q)(l.z0.Cx, { name: "attributionFontFamily", value: n.Q9G }), fontSize: (0, n.Z0q)(l.z0.iB, { name: "attributionFontSize", displayName: "Font size", value: 9 }), bold: (0, n.Z0q)(l.z0.jF, { name: "attributionBold", value: !1 }), italic: (0, n.Z0q)(l.z0.jF, { name: "attributionItalic", value: !1 }), underline: (0, n.Z0q)(l.z0.jF, { name: "attributionUnderline", value: !1 }) });attributionColor = (0, n.Z0q)(l.z0.sk, { name: "attributionFill", displayName: "Color", value: { value: "#424242" } });attributionStroke = (0, n.Z0q)(l.z0.jF, { name: "attributionStroke", displayName: `Outline ${h}`, description: "Add a border to the text.", value: !1 });attributionStrokeFill = (0, n.Z0q)(l.z0.sk, { name: "attributionStrokeFill", displayName: `Outline Color ${h}`, description: "Select 'No Fill' to apply automatic color based on text color.", value: null, isNoFillItemSupported: !0, visibleIf: (t) => t.appearance.attributionStroke.value });attributionStrokeTransparency = (0, n.Z0q)(l.z0.Ap, { name: "attributionStrokeTransparency", displayName: "Outline Transparency", value: 50, options: g, visibleIf: (t) => t.appearance.attributionStroke.value });attributionStrokeWidth = (0, n.Z0q)(l.z0.Ap, { name: "attributionStrokeWidth", displayName: "Outline Width", value: 2, options: y, visibleIf: (t) => t.appearance.attributionStroke.value });showDrillPath = (0, n.Z0q)(l.z0.jF, { name: "drillPath", value: !0 });showDrillPathOnFirstLevel = (0, n.Z0q)(l.z0.jF, { name: "drillPathOnFirstLevel", displayName: `Show on First Level ${h}`, description: "Show the drill path label even on the first level. If disabled, the label will only show when drilling down.", value: !1 });groups = [new n.X4n({ name: "appearance.title", displayName: "Map Title", topLevelSlice: this.showTitle, slices: [this.titleColor, (0, n.auc)("The map title is only visible in Reading View when there is a single map.")] }), new n.X4n({ name: "appearance.placeholder", displayName: "Map Placeholder", topLevelSlice: this.showPlaceholder, slices: [this.placeholder, this.placeholderGridCols, this.placeholderGridRows, this.placeholderImage, this.placeholderImageUrl, this.placeholderText, this.placeholderFont, this.placeholderColor, (0, n.auc)("A placeholder is shown when there is no map at the current level.")] }), new n.X4n({ name: "appearance.geometrics", displayName: "Map Geometrics", slices: [this.keepAspectRatio, this.viewboxScale] }), new n.X4n({ name: "appearance.attribution", displayName: "Attribution", topLevelSlice: this.showAttribution, slices: [this.attributionFont, this.attributionColor, this.attributionStroke, this.attributionStrokeFill, this.attributionStrokeTransparency, this.attributionStrokeWidth, (0, n.auc)("The attribution is the text shown at the bottom of the visual indicating the source or the copyright of the map.")] }), new n.X4n({ name: "appearance.drillpath", displayName: "Drill Path", topLevelSlice: this.showDrillPath, slices: [this.showDrillPathOnFirstLevel, (0, n.auc)("The drill path indicates the current level in the data hierarchy.")], visibleIf: () => thisVisualFeatures.drillDown })];}class O extends n.zD3 {colorModeOptions = [{ displayName: "Original", value: "original" }, { displayName: "Greyscale", value: "greyscale" }, { displayName: "Custom", value: "custom" }, { displayName: "(Hidden)", value: "transparent" }];transparencyMode = [{ displayName: "Original", value: "original" }, { displayName: "Custom", value: "custom" }];name = "dataPoint";displayName = "Areas";infoLegendColor = (0, n.Z0q)(l.z0.uI, { name: "infoLegendColor", value: "Matched areas are colored based on the 'Legend' field. You can customize them in the relative section.", visible: !1 });matchedColorType = (0, n.Z0q)(l.z0.PA, { name: "defaultMatched", displayName: "Color", value: { value: "custom", displayName: "Custom" }, items: this.colorModeOptions });matchedColor = (0, n.Z0q)(l.z0.sk, { name: "matchedFill", displayName: "Custom color", value: u(), visibleIf: (t) => p(t.areas.matchedColorType.value, "custom"), fx: { dataRole: r.Xh.Category } });matchedTransparencyMode = (0, n.Z0q)(l.z0.PA, { name: "matchedTransparencyMode", displayName: "Transparency", value: { value: "custom", displayName: "Custom" }, items: this.transparencyMode });matchedTransparency = (0, n.Z0q)(l.z0.Ap, { name: "matchedTransparency", displayName: "Custom Transparency", value: 0, options: g, visibleIf: (t) => !p(t.areas.matchedTransparencyMode.value, "original") });matchedOutline = (0, n.Z0q)(l.z0.PA, { name: "matchedOutline", displayName: "Outline", value: { value: "original", displayName: "Original" }, items: C });matchedForceOutline = (0, n.Z0q)(l.z0.jF, { name: "matchedForceOutline", displayName: `Force Outline ${h}`, description: "Force the outline to be shown to all areas, even those that has not a stroke defined in the SVG.", value: !1, visibleIf: (t) => p(t.areas.matchedOutline.value, "forced") });matchedAutoColorOutline = (0, n.Z0q)(l.z0.jF, { name: "matchedAutoColorOutline", displayName: `Auto Outline Color ${h}`, description: "When enabled, outline color is automatically set to a contrasting color based on the area's fill color.", value: !1, visibleIf: (t) => p(t.areas.matchedOutline.value, "forced") });matchedOutlineFill = (0, n.Z0q)(l.z0.sk, { name: "matchedOutlineFill", displayName: "Outline Color", value: { value: "#000" }, visibleIf: (t) => p(t.areas.matchedOutline.value, "forced") && !t.areas.matchedAutoColorOutline.value, fx: { dataRole: r.Xh.Category } });matchedCustomOutlineWidth = (0, n.Z0q)(l.z0.jF, { name: "matchedCustomOutlineWidth", displayName: "Custom Outline Width", value: !1, visibleIf: (t) => p(t.areas.matchedOutline.value, "forced") && !t.areas.matchedForceOutline.value });matchedOutlineWidth = (0, n.Z0q)(l.z0.Ap, { name: "matchedOutlineWidth", displayName: "Outline Width", value: 10, options: y, visibleIf: (t) => M(t, "matched") });unmatchedColorType = (0, n.Z0q)(l.z0.PA, { name: "defaultUnmatched", displayName: "Color", value: { value: "original", displayName: "Original" }, items: this.colorModeOptions });unmatchedColor = (0, n.Z0q)(l.z0.sk, { name: "unmatchedFill", displayName: "Custom color", value: u(1), visibleIf: (t) => p(t.areas.unmatchedColorType.value, "custom") });unmatchedTransparencyMode = (0, n.Z0q)(l.z0.PA, { name: "unmatchedTransparencyMode", displayName: "Transparency", value: { value: "custom", displayName: "Custom" }, items: this.transparencyMode });unmatchedTransparency = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedTransparency", displayName: "Custom Transparency", value: 0, options: g, visibleIf: (t) => !p(t.areas.unmatchedColorType.value, "transparent") && !p(t.areas.unmatchedTransparencyMode.value, "original") });unmatchedOutline = (0, n.Z0q)(l.z0.PA, { name: "unmatchedOutline", displayName: "Outline", value: { value: "original", displayName: "Original" }, items: C });unmatchedForceOutline = (0, n.Z0q)(l.z0.jF, { name: "unmatchedForceOutline", displayName: `Force Outline ${h}`, description: "Force the outline to be shown to all areas, even those that has not a stroke defined in the SVG.", value: !1, visibleIf: (t) => p(t.areas.unmatchedOutline.value, "forced") });unmatchedAutoColorOutline = (0, n.Z0q)(l.z0.jF, { name: "unmatchedAutoColorOutline", displayName: `Auto Color Outline ${h}`, description: "When enabled, outline color is automatically set to a contrasting color based on the area's fill color.", value: !1, visibleIf: (t) => p(t.areas.unmatchedOutline.value, "forced") });unmatchedOutlineFill = (0, n.Z0q)(l.z0.sk, { name: "unmatchedOutlineFill", displayName: "Outline Color", value: { value: "#000" }, visibleIf: (t) => p(t.areas.unmatchedOutline.value, "forced") && !t.areas.unmatchedAutoColorOutline.value });unmatchedCustomOutlineWidth = (0, n.Z0q)(l.z0.jF, { name: "unmatchedCustomOutlineWidth", displayName: "Custom Outline Width", value: !1, visibleIf: (t) => p(t.areas.unmatchedOutline.value, "forced") && !t.areas.unmatchedForceOutline.value });unmatchedOutlineWidth = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedOutlineWidth", displayName: "Outline Width", value: 10, options: y, visibleIf: (t) => M(t, "unmatched") });unboundColorType = (0, n.Z0q)(l.z0.PA, { name: "defaultUnbound", displayName: "Color", value: { value: "greyscale", displayName: "Greyscale" }, items: this.colorModeOptions });unboundColor = (0, n.Z0q)(l.z0.sk, { name: "unboundFill", displayName: "Custom color", value: u(2), visibleIf: (t) => p(t.areas.unboundColorType.value, "custom") });unboundTransparencyMode = (0, n.Z0q)(l.z0.PA, { name: "unboundTransparencyMode", displayName: "Transparency", value: { value: "custom", displayName: "Custom" }, items: this.transparencyMode });unboundTransparency = (0, n.Z0q)(l.z0.Ap, { name: "unboundTransparency", displayName: "Custom Transparency", value: 0, options: g, visibleIf: (t) => !p(t.areas.unboundColorType.value, "transparent") && !p(t.areas.unboundTransparencyMode.value, "original") });unboundOutline = (0, n.Z0q)(l.z0.PA, { name: "unboundOutline", displayName: "Outline", value: { value: "original", displayName: "Original" }, items: C });unboundForceOutline = (0, n.Z0q)(l.z0.jF, { name: "unboundForceOutline", displayName: `Force Outline ${h}`, description: "Force the outline to be shown to all areas, even those that has not a stroke defined in the SVG.", value: !1, visibleIf: (t) => p(t.areas.unboundOutline.value, "forced") });unboundAutoColorOutline = (0, n.Z0q)(l.z0.jF, { name: "unboundAutoColorOutline", displayName: `Auto Color Outline ${h}`, description: "When enabled, outline color is automatically set to a contrasting color based on the area's fill color.", value: !1, visibleIf: (t) => p(t.areas.unboundOutline.value, "forced") });unboundOutlineFill = (0, n.Z0q)(l.z0.sk, { name: "unboundOutlineFill", displayName: "Outline Color", value: { value: "#000" }, visibleIf: (t) => p(t.areas.unboundOutline.value, "forced") && !t.areas.unboundAutoColorOutline.value });unboundCustomOutlineWidth = (0, n.Z0q)(l.z0.jF, { name: "unboundCustomOutlineWidth", displayName: "Custom Outline Width", value: !1, visibleIf: (t) => p(t.areas.unboundOutline.value, "forced") && !t.areas.unboundForceOutline.value });unboundOutlineWidth = (0, n.Z0q)(l.z0.Ap, { name: "unboundOutlineWidth", displayName: "Outline Width", value: 10, options: y, visibleIf: (t) => M(t, "unbound") });excludeLines = (0, n.Z0q)(l.z0.jF, { name: "excludeLines", displayName: "Lines", value: !1 });excludeSymbols = (0, n.Z0q)(l.z0.jF, { name: "excludeSymbols", displayName: "Symbols", value: !0 });excludeUnclosed = (0, n.Z0q)(l.z0.jF, { name: "excludeUnclosed", displayName: "Unclosed Paths", value: !1 });excludeText = (0, n.Z0q)(l.z0.jF, { name: "excludeText", displayName: "Hardcoded Text", value: !0 });groups = [new n.X4n({ name: "dataPoint.matchedColor", displayName: "Color", slices: [this.infoLegendColor, this.matchedColorType, this.matchedColor, this.matchedTransparencyMode, this.matchedTransparency, this.matchedOutline, this.matchedForceOutline, this.matchedAutoColorOutline, this.matchedOutlineFill, this.matchedCustomOutlineWidth, this.matchedOutlineWidth] }), new n.X4n({ name: "dataPoint.unmatchedColor", displayName: "Color (Unmatched)", slices: [this.unmatchedColorType, this.unmatchedColor, this.unmatchedTransparencyMode, this.unmatchedTransparency, this.unmatchedOutline, this.unmatchedForceOutline, this.unmatchedAutoColorOutline, this.unmatchedOutlineFill, this.unmatchedCustomOutlineWidth, this.unmatchedOutlineWidth] }), new n.X4n({ name: "dataPoint.unboundColor", displayName: "Color (Unbound)", slices: [this.unboundColorType, this.unboundColor, this.unboundTransparencyMode, this.unboundTransparency, this.unboundOutline, this.unboundForceOutline, this.unboundAutoColorOutline, this.unboundOutlineFill, this.unboundCustomOutlineWidth, this.unboundOutlineWidth] }), new n.X4n({ name: "dataPoint.exclude", displayName: "Exclude", slices: [this.excludeLines, this.excludeSymbols, this.excludeUnclosed, this.excludeText, (0, n.auc)("Choose the SVG shapes to exclude from the matching and coloring process.")] })];}class I extends n.zD3 {name = "categoryLabels";displayName = "Category Labels";show = (0, n.Z0q)(l.z0.jF, { name: "show", value: !1 });matchedDisplayValue = (0, n.Z0q)(l.z0.PA, { name: "matchedPriority", displayName: `Display Value ${h}`, description: "Choose what value to display for the matched elements. If you select '(Custom)', you can enter a custom value that can be subject to Power BI conditional formatting. Choose 'Category Value (Path)' if you have expanded the category hierarchy and want to see the full path.", value: { value: "auto", displayName: "(Auto)" }, items: [{ value: "auto", displayName: "(Auto)" }, { value: "custom", displayName: "(Custom)" }, { value: "dataPoint", displayName: "Category Value" }, { value: "dataPoint2", displayName: "Category Value (Path)" }, { value: "title", displayName: "Title" }, { value: "id", displayName: "Element Id" }] });includeDataLabel = (0, n.Z0q)(l.z0.jF, { name: "includeDataLabel", displayName: `Append Data Value ${h}`, description: "When enabled, data point value is appended to the category label.", value: !1, visibleIf: (t) => !p(t.categoryLabels.matchedDisplayValue.value, "custom") || !t.categoryLabels.matchedCustomValue.value.match(/{value}/) });displayUnit = (0, n.Z0q)(l.z0.lp, { name: "unit", displayName: "Display Unit", value: 0, visibleIf: (t) => A(t) });decimalPlaces = (0, n.Z0q)(l.z0.iB, { name: "precision", displayName: "Decimal Places", value: 0, options: v, visibleIf: (t) => A(t) });matchedCustomValue = (0, n.Z0q)(l.z0.ks, { name: "matchedCustomValue", displayName: `Custom Value ${h}`, description: "Enter a custom value to display for the matched elements. You can use these placeholders: '{category}', '{value}', '{title}', '{id}', '{path}' to include specific fields from the data model or map.", placeholder: "Enter custom value", value: "", visibleIf: (t) => p(t.categoryLabels.matchedDisplayValue.value, "custom"), fx: { dataRole: r.Xh.Category } });matchedColor = (0, n.Z0q)(l.z0.sk, { name: "matchedFill", displayName: "Color", value: { value: "#424242" }, fx: { dataRole: r.Xh.Category } });showMatchedStroke = (0, n.Z0q)(l.z0.jF, { name: "showMatchedStroke", displayName: "Outline", value: !1 });matchedStrokeColor = (0, n.Z0q)(l.z0.sk, { name: "matchedStrokeFill", displayName: `Outline Color ${h}`, description: "Select 'No Fill' to apply automatic color based on text color.", value: null, isNoFillItemSupported: !0, fx: { dataRole: r.Xh.Category }, visibleIf: (t) => t.categoryLabels.showMatchedStroke.value });matchedStrokeTransparency = (0, n.Z0q)(l.z0.Ap, { name: "matchedStrokeTransparency", displayName: "Outline Transparency", value: 50, options: g, visibleIf: (t) => t.categoryLabels.showMatchedStroke.value });matchedStrokeWidth = (0, n.Z0q)(l.z0.Ap, { name: "matchedStrokeWidth", displayName: "Outline Width", value: 2, options: y, visibleIf: (t) => t.categoryLabels.showMatchedStroke.value });showMatchedBackground = (0, n.Z0q)(l.z0.jF, { name: "showMatchedBackground", value: !1 });matchedAutoBackground = (0, n.Z0q)(l.z0.jF, { name: "matchedAutoBackground", displayName: `Auto Color ${h}`, description: "Automatically apply a background color based on the text color.", value: !0 });matchedBackgroundColor = (0, n.Z0q)(l.z0.sk, { name: "matchedBackgroundFill", displayName: "Background Color", value: null, isNoFillItemSupported: !0, fx: { dataRole: r.Xh.Category }, visibleIf: (t) => !t.categoryLabels.matchedAutoBackground.value });matchedBackgroundTransparency = (0, n.Z0q)(l.z0.Ap, { name: "matchedBackgroundTransparency", displayName: "Transparency", value: 0, options: g });matchedBackgroundCornerRadius = (0, n.Z0q)(l.z0.Ap, { name: "matchedBackgroundCornerRadius", displayName: "Corner Radius", value: 0, options: b });matchedBackgroundPadding = (0, n.Z0q)(l.z0.Ap, { name: "matchedBackgroundPadding", displayName: "Padding", value: 0, options: w });showMatchedBackgroundStroke = (0, n.Z0q)(l.z0.jF, { name: "showMatchedBackgroundStroke", displayName: "Outline", value: !1 });matchedBackgroundStrokeColor = (0, n.Z0q)(l.z0.sk, { name: "matchedBackgroundStrokeFill", displayName: `Outline Color ${h}`, description: "Select 'No Fill' to apply the same of color of the text.", value: null, isNoFillItemSupported: !0, fx: { dataRole: r.Xh.Category }, visibleIf: (t) => t.categoryLabels.showMatchedBackgroundStroke.value });matchedBackgroundStrokeTransparency = (0, n.Z0q)(l.z0.Ap, { name: "matchedBackgroundStrokeTransparency", displayName: "Outline Transparency", value: 10, options: g, visibleIf: (t) => t.categoryLabels.showMatchedBackgroundStroke.value });matchedBackgroundStrokeWidth = (0, n.Z0q)(l.z0.Ap, { name: "matchedBackgroundStrokeWidth", displayName: "Outline Width", value: 2, options: y, visibleIf: (t) => t.categoryLabels.showMatchedBackgroundStroke.value });matchedBackgroundStrokeStyle = (0, n.Z0q)(l.z0.PA, { name: "matchedBackgroundStrokeStyle", displayName: "Outline Style", value: { value: "solid", displayName: "Solid" }, items: S, visibleIf: (t) => t.categoryLabels.showMatchedBackgroundStroke.value });showUnmatched = (0, n.Z0q)(l.z0.jF, { name: "showUnmatched", value: !1 });unmatchedDisplayValue = (0, n.Z0q)(l.z0.PA, { name: "unmatchedPriority", displayName: `Display Value ${h}`, description: "Choose what value to display for the unmatched elements. Select '(Auto)' to let the visual choose the best value to display.", value: { value: "auto", displayName: "(Auto)" }, items: [{ value: "auto", displayName: "(Auto)" }, { value: "title", displayName: "Title" }, { value: "id", displayName: "Element Id" }] });unmatchedColor = (0, n.Z0q)(l.z0.sk, { name: "unmatchedFill", displayName: "Color", value: d() });showUnmatchedStroke = (0, n.Z0q)(l.z0.jF, { name: "showUnmatchedStroke", displayName: "Outline", value: !1 });unmatchedStrokeColor = (0, n.Z0q)(l.z0.sk, { name: "unmatchedStrokeFill", displayName: `Outline Color ${h}`, description: "Select 'No Fill' to apply automatic color based on text color.", value: null, isNoFillItemSupported: !0, visibleIf: (t) => t.categoryLabels.showUnmatchedStroke.value });unmatchedStrokeTransparency = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedStrokeTransparency", displayName: "Outline Transparency", value: 50, options: g, visibleIf: (t) => t.categoryLabels.showUnmatchedStroke.value });unmatchedStrokeWidth = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedStrokeWidth", displayName: "Outline Width", value: 2, options: y, visibleIf: (t) => t.categoryLabels.showUnmatchedStroke.value });showUnmatchedBackground = (0, n.Z0q)(l.z0.jF, { name: "showUnmatchedBackground", value: !1 });unmatchedAutoBackground = (0, n.Z0q)(l.z0.jF, { name: "unmatchedAutoBackground", displayName: `Auto Color ${h}`, description: "Automatically apply a background color based on the text color.", value: !0 });unmatchedBackgroundColor = (0, n.Z0q)(l.z0.sk, { name: "unmatchedBackgroundFill", displayName: "Background Color", value: null, isNoFillItemSupported: !0, visibleIf: (t) => !t.categoryLabels.unmatchedAutoBackground.value });unmatchedBackgroundTransparency = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedBackgroundTransparency", displayName: "Transparency", value: 0, options: g });unmatchedBackgroundCornerRadius = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedBackgroundCornerRadius", displayName: "Corner Radius", value: 0, options: b });unmatchedBackgroundPadding = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedBackgroundPadding", displayName: "Padding", value: 0, options: w });showUnmatchedBackgroundStroke = (0, n.Z0q)(l.z0.jF, { name: "showUnmatchedBackgroundStroke", displayName: "Outline", value: !1 });unmatchedBackgroundStrokeColor = (0, n.Z0q)(l.z0.sk, { name: "unmatchedBackgroundStrokeFill", displayName: `Outline Color ${h}`, description: "Select 'No Fill' to apply the same of color of the text.", value: null, isNoFillItemSupported: !0, fx: { dataRole: r.Xh.Category }, visibleIf: (t) => t.categoryLabels.showUnmatchedBackgroundStroke.value });unmatchedBackgroundStrokeTransparency = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedBackgroundStrokeTransparency", displayName: "Outline Transparency", value: 10, options: g, visibleIf: (t) => t.categoryLabels.showUnmatchedBackgroundStroke.value });unmatchedBackgroundStrokeWidth = (0, n.Z0q)(l.z0.Ap, { name: "unmatchedBackgroundStrokeWidth", displayName: "Outline Width", value: 2, options: y, visibleIf: (t) => t.categoryLabels.showUnmatchedBackgroundStroke.value });unmatchedBackgroundStrokeStyle = (0, n.Z0q)(l.z0.PA, { name: "unmatchedBackgroundStrokeStyle", displayName: "Outline Style", value: { value: "solid", displayName: "Solid" }, items: S, visibleIf: (t) => t.categoryLabels.showUnmatchedBackgroundStroke.value });font = (0, n.Cjg)(l.z0.tc, { name: "font", displayName: "Font", fontFamily: (0, n.Z0q)(l.z0.Cx, { name: "fontFamily", value: n.Q9G }), bold: (0, n.Z0q)(l.z0.jF, { name: "bold", value: !1 }), italic: (0, n.Z0q)(l.z0.jF, { name: "italic", value: !1 }), underline: (0, n.Z0q)(l.z0.jF, { name: "underline", value: !1 }), fontSize: (0, n.Z0q)(l.z0.iB, { name: "fontSize", displayName: "Font size", value: 9, rules: { value: (t, e) => t.categoryLabels.autoFontSize.value ? 0 : e } }) });autoFontSize = (0, n.Z0q)(l.z0.jF, { name: "autoFontSize", displayName: `Auto Font Size ${h}`, description: "Automatically adjust the font size to fit the text within the element.", value: !1 });autoFontSizeScale = (0, n.Z0q)(l.z0.Ap, { name: "autoFontSizeScale", displayName: `Font Size Scale ${h}`, description: "Adjust the scale of the font size when using auto font size.", value: 100, options: m, visibleIf: (t) => t.categoryLabels.autoFontSize.value });minFontSize = (0, n.Z0q)(l.z0.iB, { name: "minFontSize", displayName: "Min Font Size", value: 0, options: f, visibleIf: (t) => t.categoryLabels.autoFontSize.value });maxFontSize = (0, n.Z0q)(l.z0.iB, { name: "maxFontSize", displayName: "Max Font Size", value: 60, options: f, visibleIf: (t) => t.categoryLabels.autoFontSize.value });clipText = (0, n.Z0q)(l.z0.jF, { name: "clipText", displayName: `Clip Text ${h}`, description: "Clip the text with ellipsis if it exceeds the element boundaries.", value: !1, visibleIf: (t) => p(t.categoryLabels.placement.value, "inside") && !t.categoryLabels.autoFontSize.value });wordWrap = (0, n.Z0q)(l.z0.jF, { name: "wrap", displayName: "Word Wrap", value: !1, visibleIf: (t) => p(t.categoryLabels.placement.value, "inside") && !t.categoryLabels.autoFontSize.value });placement = (0, n.Z0q)(l.z0.PA, { name: "placement", displayName: `Anchored Placement ${h}`, description: "Choose the placement for anchored labels relative to the map area. Labels with a custom position are not affected by this setting.", value: { value: "inside", displayName: "Inside Element" }, items: [{ value: "inside", displayName: "Inside Element" }, { value: "outside", displayName: "Outside Element" }] });verticalPosition = (0, n.Z0q)(l.z0.$n, { name: "yPosition", displayName: "Vertical Alignment", mode: "verticalAlignment", value: "middle" });horizontalPosition = (0, n.Z0q)(l.z0.$n, { name: "xPosition", displayName: "Horizontal Alignment", mode: "horizontalAlignment", value: "center" });groups = [new n.X4n({ name: "categoryLabels.matchedValue", displayName: "Value", slices: [this.matchedDisplayValue, this.matchedCustomValue, this.includeDataLabel, this.displayUnit, this.decimalPlaces] }), new n.X4n({ name: "categoryLabels.matchedColor", displayName: "Color", slices: [this.matchedColor, this.showMatchedStroke, this.matchedStrokeColor, this.matchedStrokeTransparency, this.matchedStrokeWidth] }), new n.X4n({ name: "categoryLabels.matchedBackground", displayName: "Background", topLevelSlice: this.showMatchedBackground, slices: [this.matchedAutoBackground, this.matchedBackgroundColor, this.matchedBackgroundTransparency, this.matchedBackgroundCornerRadius, this.matchedBackgroundPadding, this.showMatchedBackgroundStroke, this.matchedBackgroundStrokeColor, this.matchedBackgroundStrokeTransparency, this.matchedBackgroundStrokeWidth, this.matchedBackgroundStrokeStyle] }), new n.X4n({ name: "categoryLabels.unmatchedValue", displayName: "Value (Unmatched)", topLevelSlice: this.showUnmatched, slices: [this.unmatchedDisplayValue] }), new n.X4n({ name: "categoryLabels.unmatchedColor", displayName: "Color (Unmatched)", slices: [this.unmatchedColor, this.showUnmatchedStroke, this.unmatchedStrokeColor, this.unmatchedStrokeTransparency, this.unmatchedStrokeWidth], visibleIf: (t) => t.categoryLabels.showUnmatched.value }), new n.X4n({ name: "categoryLabels.unmatchedBackground", displayName: "Background (Unmatched)", topLevelSlice: this.showUnmatchedBackground, slices: [this.unmatchedAutoBackground, this.unmatchedBackgroundColor, this.unmatchedBackgroundTransparency, this.unmatchedBackgroundCornerRadius, this.unmatchedBackgroundPadding, this.showUnmatchedBackgroundStroke, this.unmatchedBackgroundStrokeColor, this.unmatchedBackgroundStrokeTransparency, this.unmatchedBackgroundStrokeWidth, this.unmatchedBackgroundStrokeStyle], visibleIf: (t) => t.categoryLabels.showUnmatched.value }), new n.X4n({ name: "categoryLabels.text", displayName: "Text", slices: [this.font, this.autoFontSize, this.autoFontSizeScale, this.minFontSize, this.maxFontSize, this.clipText, this.wordWrap] }), new n.X4n({ name: "categoryLabels.position", displayName: "Position", slices: [this.placement, this.verticalPosition, this.horizontalPosition] })];topLevelSlice = this.show;}class F extends n.zD3 {name = "dataLabels";displayName = "Data Labels";visibleIf = (t) => !t.categoryLabels.show.value || !A(t);show = (0, n.Z0q)(l.z0.jF, { name: "show", value: !1 });color = (0, n.Z0q)(l.z0.sk, { name: "fill", displayName: "Color", value: d(), fx: { dataRole: r.Xh.Category } });showStroke = (0, n.Z0q)(l.z0.jF, { name: "showStroke", displayName: "Outline", value: !1 });strokeColor = (0, n.Z0q)(l.z0.sk, { name: "strokeFill", displayName: `Outline Color ${h}`, description: "Select 'No Fill' to apply automatic color based on text color.", value: null, isNoFillItemSupported: !0, fx: { dataRole: r.Xh.Category }, visibleIf: (t) => t.dataLabels.showStroke.value });strokeTransparency = (0, n.Z0q)(l.z0.Ap, { name: "strokeTransparency", displayName: "Outline Transparency", value: 50, options: g, visibleIf: (t) => t.dataLabels.showStroke.value });strokeWidth = (0, n.Z0q)(l.z0.Ap, { name: "strokeWidth", displayName: "Outline Width", value: 2, options: y, visibleIf: (t) => t.dataLabels.showStroke.value });showBackground = (0, n.Z0q)(l.z0.jF, { name: "showBackground", value: !1 });autoBackground = (0, n.Z0q)(l.z0.jF, { name: "autoBackground", displayName: `Auto Color ${h}`, description: "Automatically apply a background color based on the text color.", value: !0 });backgroundColor = (0, n.Z0q)(l.z0.sk, { name: "backgroundFill", displayName: "Background Color", value: null, isNoFillItemSupported: !0, fx: { dataRole: r.Xh.Category }, visibleIf: (t) => !t.dataLabels.autoBackground.value });backgroundTransparency = (0, n.Z0q)(l.z0.Ap, { name: "backgroundTransparency", displayName: "Transparency", value: 0, options: g });backgroundCornerRadius = (0, n.Z0q)(l.z0.Ap, { name: "backgroundCornerRadius", displayName: "Corner Radius", value: 0, options: b });backgroundPadding = (0, n.Z0q)(l.z0.Ap, { name: "backgroundPadding", displayName: "Padding", value: 0, options: w });showBackgroundStroke = (0, n.Z0q)(l.z0.jF, { name: "showBackgroundStroke", displayName: "Outline", value: !1 });backgroundStrokeColor = (0, n.Z0q)(l.z0.sk, { name: "backgroundStrokeFill", displayName: `Outline Color ${h}`, description: "Select 'No Fill' to apply the same of color of the text.", value: null, isNoFillItemSupported: !0, fx: { dataRole: r.Xh.Category }, visibleIf: (t) => t.dataLabels.showBackgroundStroke.value });backgroundStrokeTransparency = (0, n.Z0q)(l.z0.Ap, { name: "backgroundStrokeTransparency", displayName: "Outline Transparency", value: 10, options: g, visibleIf: (t) => t.dataLabels.showBackgroundStroke.value });backgroundStrokeWidth = (0, n.Z0q)(l.z0.Ap, { name: "backgroundStrokeWidth", displayName: "Outline Width", value: 2, options: y, visibleIf: (t) => t.dataLabels.showBackgroundStroke.value });backgroundStrokeStyle = (0, n.Z0q)(l.z0.PA, { name: "backgroundStrokeStyle", displayName: "Outline Style", value: { value: "solid", displayName: "Solid" }, items: S, visibleIf: (t) => t.dataLabels.showBackgroundStroke.value });font = (0, n.Cjg)(l.z0.tc, { name: "font", displayName: "Font", fontFamily: (0, n.Z0q)(l.z0.Cx, { name: "fontFamily", value: n.SxZ }), bold: (0, n.Z0q)(l.z0.jF, { name: "bold", value: !1 }), italic: (0, n.Z0q)(l.z0.jF, { name: "italic", value: !1 }), underline: (0, n.Z0q)(l.z0.jF, { name: "underline", value: !1 }), fontSize: (0, n.Z0q)(l.z0.iB, { name: "fontSize", displayName: "Font size", value: 9, options: f, rules: { value: (t, e) => t.dataLabels.autoFontSize.value ? 0 : e } }) });autoFontSize = (0, n.Z0q)(l.z0.jF, { name: "autoFontSize", displayName: `Auto Font Size ${h}`, description: "Automatically adjust the font size to fit the text within the element.", value: !1 });autoFontSizeScale = (0, n.Z0q)(l.z0.Ap, { name: "autoFontSizeScale", displayName: `Font Size Scale ${h}`, description: "Adjust the scale of the font size when using auto font size.", value: 100, options: m, visibleIf: (t) => t.dataLabels.autoFontSize.value });minFontSize = (0, n.Z0q)(l.z0.iB, { name: "minFontSize", displayName: "Min Font Size", value: 0, options: f, visibleIf: (t) => t.dataLabels.autoFontSize.value });maxFontSize = (0, n.Z0q)(l.z0.iB, { name: "maxFontSize", displayName: "Max Font Size", value: 60, options: f, visibleIf: (t) => t.dataLabels.autoFontSize.value });clipText = (0, n.Z0q)(l.z0.jF, { name: "clipText", displayName: `Clip Text ${h}`, description: "Clip the text with ellipsis if it exceeds the element boundaries.", value: !1, visibleIf: (t) => p(t.dataLabels.placement.value, "inside") && !t.dataLabels.autoFontSize.value });wordWrap = (0, n.Z0q)(l.z0.jF, { name: "wrap", displayName: "Word Wrap", value: !1, visibleIf: (t) => p(t.dataLabels.placement.value, "inside") && !t.dataLabels.autoFontSize.value });placement = (0, n.Z0q)(l.z0.PA, { name: "placement", displayName: `Anchored Placement ${h}`, description: "Choose the placement for anchored labels relative to the map area. Labels with a custom position are not affected by this setting.", value: { value: "inside", displayName: "Inside Element" }, items: [{ value: "inside", displayName: "Inside Element" }, { value: "outside", displayName: "Outside Element" }] });verticalPosition = (0, n.Z0q)(l.z0.$n, { name: "yPosition", displayName: "Vertical Alignment", mode: "verticalAlignment", value: "middle" });horizontalPosition = (0, n.Z0q)(l.z0.$n, { name: "xPosition", displayName: "Horizontal Alignment", mode: "horizontalAlignment", value: "center" });displayUnit = (0, n.Z0q)(l.z0.lp, { name: "unit", displayName: "Display Unit", value: 0 });decimalPlaces = (0, n.Z0q)(l.z0.iB, { name: "precision", displayName: "Decimal Places", value: 0, options: v });groups = [new n.X4n({ name: "dataLabels.value", displayName: "Value", slices: [this.displayUnit, this.decimalPlaces] }), new n.X4n({ name: "dataLabels.color", displayName: "Color", slices: [this.color, this.showStroke, this.strokeColor, this.strokeTransparency, this.strokeWidth] }), new n.X4n({ name: "dataLabels.background", displayName: "Background", topLevelSlice: this.showBackground, slices: [this.autoBackground, this.backgroundColor, this.backgroundTransparency, this.backgroundCornerRadius, this.backgroundPadding, this.showBackgroundStroke, this.backgroundStrokeColor, this.backgroundStrokeTransparency, this.backgroundStrokeWidth, this.backgroundStrokeStyle] }), new n.X4n({ name: "dataLabels.text", displayName: "Text", slices: [this.font, this.autoFontSize, this.autoFontSizeScale, this.minFontSize, this.maxFontSize, this.clipText, this.wordWrap] }), new n.X4n({ name: "dataLabels.position", displayName: "Position", slices: [this.placement, this.verticalPosition, this.horizontalPosition] })];topLevelSlice = this.show;}class R extends n.zD3 {name = "legend";displayName = "Legend";show = (0, n.Z0q)(l.z0.jF, { name: "show", value: !1 });showDialog = (0, n.Z0q)(l.z0.jF, { name: "showDialog", displayName: "Customize", value: !1 });position = (0, n.Z0q)(l.z0.PA, { name: "position", displayName: "Position", value: { value: "bottom", displayName: "Bottom" }, items: [{ value: "top", displayName: "Top" }, { value: "bottom", displayName: "Bottom" }, { value: "left", displayName: "Left" }, { value: "right", displayName: "Right" }] });alignment = (0, n.Z0q)(l.z0.$n, { name: "alignment", displayName: "Alignment", mode: "horizontalAlignment", value: "left", visibleIf: (t) => p(t.legend.position.value, "top", "bottom") });verticalAlignment = (0, n.Z0q)(l.z0.$n, { name: "vAlignment", displayName: "Alignment", mode: "verticalAlignment", value: "top", visibleIf: (t) => p(t.legend.position.value, "left", "right") });maxItems = (0, n.Z0q)(l.z0.Ap, { name: "maxItems", displayName: `Max Items ${h}`, description: "Limit the number of items displayed in the legend. Set to 0 to display all items.", value: 30, options: { minValue: { type: 0, value: 0 }, maxValue: { type: 1, value: n.bOl.MAX_ITEMS } } });itemSizeType = (0, n.Z0q)(l.z0.PA, { name: "itemSizeType", displayName: "Item Size", value: { value: "", displayName: "Auto" }, items: E });itemSize = (0, n.Z0q)(l.z0.Ap, { name: "itemSize", value: 40, options: { minValue: { type: 0, value: 5 }, maxValue: { type: 1, value: 500 } }, visibleIf: (t) => "" !== t.legend.itemSizeType.value.value });legendSizeType = (0, n.Z0q)(l.z0.PA, { name: "legendSizeType", displayName: "Legend Size", value: { value: "", displayName: "Auto" }, items: E });legendSize = (0, n.Z0q)(l.z0.Ap, { name: "legendSize", value: 200, options: { minValue: { type: 0, value: 5 }, maxValue: { type: 1, value: 500 } }, visibleIf: (t) => "" !== t.legend.legendSizeType.value.value });showScrollbar = (0, n.Z0q)(l.z0.jF, { name: "showScrollbar", displayName: `Show Scrollbar ${h}`, description: "Show a scrollbar when the legend items exceed the available space.", value: !1, visibleIf: (t) => "" !== t.legend.legendSizeType.value.value });font = (0, n.Cjg)(l.z0.tc, { name: "font", displayName: "Font", fontFamily: (0, n.Z0q)(l.z0.Cx, { name: "fontFamily", value: n.Q9G }), bold: (0, n.Z0q)(l.z0.jF, { name: "bold", value: !1 }), italic: (0, n.Z0q)(l.z0.jF, { name: "italic", value: !1 }), underline: (0, n.Z0q)(l.z0.jF, { name: "underline", value: !1 }), fontSize: (0, n.Z0q)(l.z0.iB, { name: "fontSize", displayName: "Font size", value: 8, options: f }) });color = (0, n.Z0q)(l.z0.sk, { name: "fill", displayName: "Color", value: d() });wordWrap = (0, n.Z0q)(l.z0.jF, { name: "wrap", displayName: "Word Wrap", value: !1 });showTitle = (0, n.Z0q)(l.z0.jF, { name: "showTitle", value: !1 });titleText = (0, n.Z0q)(l.z0.ks, { name: "titleText", displayName: "Title", placeholder: "Enter title", value: "Legend" });titleFont = (0, n.Cjg)(l.z0.tc, { name: "titleFont", displayName: "Font", fontFamily: (0, n.Z0q)(l.z0.Cx, { name: "titleFontFamily", value: n.Q9G }), bold: (0, n.Z0q)(l.z0.jF, { name: "titleBold", value: !0 }), italic: (0, n.Z0q)(l.z0.jF, { name: "titleItalic", value: !1 }), underline: (0, n.Z0q)(l.z0.jF, { name: "titleUnderline", value: !1 }), fontSize: (0, n.Z0q)(l.z0.iB, { name: "titleFontSize", displayName: "Font size", value: 9, options: f }) });titleColor = (0, n.Z0q)(l.z0.sk, { name: "titleFill", displayName: "Color", value: d() });titleInline = (0, n.Z0q)(l.z0.jF, { name: "titleInline", displayName: `Show Title Inline ${h}`, description: "Display the title inline with the legend items. If disabled, the title is displayed above the legend.", value: !0, visibleIf: (t) => p(t.legend.position.value, "top", "bottom") });iconAutoSize = (0, n.Z0q)(l.z0.jF, { name: "iconAutoSize", displayName: `Auto Size ${h}`, description: "Automatically adjust the icon size based on the font size.", value: !0 });iconSize = (0, n.Z0q)(l.z0.Ap, { name: "iconSize", displayName: "Icon Size", value: 8, options: { minValue: { type: 0, value: 1 }, maxValue: { type: 1, value: 30 } }, visibleIf: (t) => !t.legend.iconAutoSize.value });custom = (0, n.Ozv)({ name: "custom" });groups = [new n.X4n({ name: "legend.customize", slices: [this.showDialog] }), new n.X4n({ name: "legend.layout", displayName: "Layout", slices: [this.position, this.alignment, this.verticalAlignment, this.maxItems, this.itemSizeType, this.itemSize, this.legendSizeType, this.legendSize, this.showScrollbar] }), new n.X4n({ name: "legend.items", displayName: "Items", slices: [this.font, this.color, this.wordWrap] }), new n.X4n({ name: "legend.title", displayName: "Title", topLevelSlice: this.showTitle, slices: [this.titleText, this.titleFont, this.titleColor, this.titleInline] }), new n.X4n({ name: "legend.icon", displayName: "Icon", slices: [this.iconAutoSize, this.iconSize] })];topLevelSlice = this.show;}class L extends n.zD3 {name = "tooltips";displayName = "Tooltips";showCategories = (0, n.Z0q)(l.z0.jF, { name: "showCategories", value: !0 });showUnmatched = (0, n.Z0q)(l.z0.jF, { name: "showUnmatched", displayName: `Show Unmatched ${h}`, description: "Show tooltips for elements that are not matched to any data.", value: !1 });showValues = (0, n.Z0q)(l.z0.jF, { name: "showValues", value: !0 });unit = (0, n.Z0q)(l.z0.lp, { name: "unit", displayName: "Display Unit", value: 1 });precision = (0, n.Z0q)(l.z0.iB, { name: "precision", displayName: "Decimal Places", value: 0, options: v });groups = [new n.X4n({ name: "tooltips.info", slices: [(0, n.auc)("You can configure the overall tooltips visibility or enable report tooltips in the 'General' pane.")] }), new n.X4n({ name: "tooltips.categories", displayName: "Categories", topLevelSlice: this.showCategories, slices: [this.showUnmatched] }), new n.X4n({ name: "tooltips.values", displayName: "Values", topLevelSlice: this.showValues, slices: [this.unit, this.precision] })];}class N extends n.zD3 {name = "toolbars";displayName = "Toolbars";pin = (0, n.Z0q)(l.z0.jF, { name: "pin", displayName: "Pin Toolbars", value: !1 });overlap = (0, n.Z0q)(l.z0.jF, { name: "overlap", displayName: `Overlap Map ${h}`, description: "When true, the toolbars overlap the map, otherwise some space is reserved for them.", value: !0 });showMapDropdown = (0, n.Z0q)(l.z0.jF, { name: "showMapDropdown", displayName: `Show Maps Dropdown ${h}`, description: "Show a dropdown to select the map to display. This option only affects 'Reading View'.", value: !0 });showMapSearch = (0, n.Z0q)(l.z0.jF, { name: "showMapSearch", displayName: `Show Map Search ${h}`, description: "Show Map Search icon to search for maps. This option only affects 'Reading View'.", value: !0, visibleIf: (t) => t.toolbars.showMapDropdown.value });topMargin = (0, n.Z0q)(l.z0.iB, { name: "topMargin", displayName: "Top Margin", value: 0, options: { minValue: { type: 0, value: 0 }, unitSymbol: "px", unitSymbolAfterInput: !0 } });backgroundColor = (0, n.Z0q)(l.z0.sk, { name: "backgroundFill", displayName: "Color", value: { value: "#F0F0F0" } });backgroundTransparency = (0, n.Z0q)(l.z0.Ap, { name: "backgroundTransparency", displayName: "Transparency", value: 5, options: g });showZoom = (0, n.Z0q)(l.z0.jF, { name: "zoom", value: !0 });showZoomButtons = (0, n.Z0q)(l.z0.jF, { name: "zoomButtons", displayName: `Zoom Buttons ${h}`, description: "Show zoom in, out, and reset buttons.", value: !0 });showZoomPercentage = (0, n.Z0q)(l.z0.jF, { name: "zoomPercentage", displayName: `Zoom Percentage ${h}`, description: "Show the zoom percentage level.", value: !0 });showControls = (0, n.Z0q)(l.z0.jF, { name: "controls", value: !1 });showZoomOnArea = (0, n.Z0q)(l.z0.jF, { name: "zoomOnArea", displayName: `Zoom on Element Button ${h}`, description: "Show a button to enable automatic zoom on the selected element.", value: !0 });showClear = (0, n.Z0q)(l.z0.jF, { name: "clear", displayName: `Clear Button ${h}`, description: "Show a button to clear the selection.", value: !0 });groups = [new n.X4n({ name: "toolbars.options", displayName: "Options", slices: [this.pin, this.overlap, this.showMapDropdown, this.showMapSearch, this.topMargin] }), new n.X4n({ name: "toolbars.background", displayName: "Background", slices: [this.backgroundColor, this.backgroundTransparency] }), new n.X4n({ name: "toolbars.zoom", displayName: "Zoom", topLevelSlice: this.showZoom, slices: [this.showZoomButtons, this.showZoomPercentage] }), new n.X4n({ name: "toolbars.controls", displayName: "Controls", topLevelSlice: this.showControls, slices: [this.showZoomOnArea, this.showClear] })];}class V extends n.zD3 {name = "drill";displayName = "Drill Behavior";visibleIf = () => thisVisualFeatures.drillDown;autoFetchMode = (0, n.Z0q)(l.z0.PA, { name: "autoFetchMode", displayName: `Auto-Fetch based on ${h}`, description: "When '(Auto)', the visual honors the Auto-Fetch attribute in the SVG; if the attribute is not present, Auto-Fetch is disabled. When 'Enabled', Auto-Fetch is enabled and every matched area id is used to build a potential child map URL and it is fetched. For more information on Auto-Fetch, see the documentation.", value: { value: "auto", displayName: "(Auto)" }, items: [{ value: "auto", displayName: "(Auto)" }, { value: "no", displayName: "(Disabled)" }, { value: "id", displayName: "Enabled" }], visibleIf: () => thisVisualFeatures.childMaps });aggregateOnExpand = (0, n.Z0q)(l.z0.jF, { name: "aggregateOnExpand", value: !0 });categoryLevelMaps = (0, n.Z0q)(l.z0.jF, { description: "When active, you cannot link maps to individual data points; instead, you can only have one map per category in the hierarchy. This is beneficial if you prefer to highlight selected data points within the category's map, rather than having a separate map for each data point, which is the default behavior when drilling down or applying a single filter to any level other than the first.", name: "categoryLevelMaps", value: !1 });categoryLevelMapsByColumn = (0, n.Z0q)(l.z0.jF, { name: "categoryLevelMapsByColumn", value: !0, dataBound: { dataRole: r.Xh.Category, type: "columns" } });categoryLevelMapsByColumnInstructions = (0, n.Z0q)(l.z0.uI, { name: "categoryLevelMapsByColumnInstructions", displayName: " ", value: "Current level behavior" });categoryLevelMapsByColumnLevel0Instructions = (0, n.Z0q)(l.z0.uI, { name: "categoryLevelMapsByColumnLevel0Instructions", displayName: " ", value: " Drill down to the next level to change the option for that level." });lastLevelMaps = (0, n.Z0q)(l.z0.jF, { name: "lastLevelMaps", value: !1 });groups = [new n.X4n({ name: "drill.aggregateOnExpand", displayName: "Ignore Hierarchical Binding", topLevelSlice: this.aggregateOnExpand, slices: [(0, n.auc)("When expanding hierarchy levels ('Expand all down one level in the hierarchy'), ignore the hierarchical path and bind areas using only the last level. Useful for flat SVG structures not organized into nested groups.")] }), new n.X4n({ name: "drill.categoryLevelMaps", displayName: "Category Level Maps", topLevelSlice: this.categoryLevelMaps, slices: [(0, n.auc)("Link maps to categories instead of individual data points. Selected data points are highlighted within the category's map rather than having separate maps for each data point."), this.categoryLevelMapsByColumnLevel0Instructions, this.categoryLevelMapsByColumnInstructions, this.categoryLevelMapsByColumn] }), new n.X4n({ name: "drill.lastLevelMaps", displayName: "Last Level Maps", topLevelSlice: this.lastLevelMaps, slices: [(0, n.auc)("Allow maps to be associated with data points at the last hierarchy level. Requires single external filter selection.")] }), new n.X4n({ name: "drill.autoFetch", displayName: "Auto-Fetch Maps", slices: [this.autoFetchMode, (0, n.auc)("Automatically fetch remote child maps based on matched areas.")] })];}class B extends n.zD3 {name = "advanced";displayName = "Advanced Options";lockPan = (0, n.Z0q)(l.z0.jF, { name: "lockPan", displayName: `Lock Pan ${h}`, description: "When enabled, the pan is locked and cannot be changed by the user.", value: !1 });lockZoom = (0, n.Z0q)(l.z0.jF, { name: "lockZoom", displayName: `Lock Zoom ${h}`, description: "When enabled, the zoom is locked and cannot be changed by the user.", value: !1 });minZoom = (0, n.Z0q)(l.z0.Ap, { name: "minZoom", displayName: "Min Zoom", value: 100, options: { minValue: { type: 0, value: 1 }, maxValue: { type: 1, value: 200 }, unitSymbol: "%", unitSymbolAfterInput: !0 } });maxZoom = (0, n.Z0q)(l.z0.Ap, { name: "maxZoom", displayName: "Max Zoom", value: 5e3, options: { minValue: { type: 0, value: 100 }, maxValue: { type: 1, value: 1e4 }, unitSymbol: "%", unitSymbolAfterInput: !0 } });zoomSensitivity = (0, n.Z0q)(l.z0.Ap, { name: "zoomSensitivity", displayName: `Zoom Sensitivity ${h}`, description: "Set the zoom sensitivity. Increasing the value will make the zoom faster, decreasing it will make it slower.", value: 5, options: { minValue: { type: 0, value: 1 }, maxValue: { type: 1, value: 20 } } });zoomFit = (0, n.Z0q)(l.z0.Ap, { name: "zoomFit", displayName: `Zoom On Element Fit ${h}`, description: "Defines the percentage of the visual area to consider when zooming on single element (also applies to auto-zoomed elements).", value: 80, options: { minValue: { type: 0, value: 1 }, maxValue: { type: 1, value: 100 }, unitSymbol: "%", unitSymbolAfterInput: !0 } });autoPanMode = (0, n.Z0q)(l.z0.jF, { name: "autoPanMode", displayName: `Auto Pan Mode ${h}`, description: "When enabled, the map can be always dragged by clicking and dragging the mouse.", value: !0 });autoZoomMode = (0, n.Z0q)(l.z0.PA, { name: "autoZoomMode", displayName: `Auto Zoom Mode ${h}`, description: "Automatically adjust the zoom level and scroll position to fit all matched elements in the visual area. When is 'Single Data Point', the automatic zoom is applied only if there is a single data point in the underlying data, otherwise it is always applied.", value: { value: T.Disabled, displayName: "(Disabled)" }, items: [{ value: T.Disabled, displayName: "(Disabled)" }, { value: T.Single, displayName: "Single Data Point" }, { value: T.All, displayName: "All Data Points" }] });mapSelectorAllowUnassignedMaps = (0, n.Z0q)(l.z0.jF, { name: "mapSelectorAllowUnassignedMaps", displayName: `Show Maps Without Selector ${h}`, description: "When enabled and there is a map selector field, maps without a selector are shown. If disabled, only maps with a selector are shown.", value: !1 });mapSelectorSeparator = (0, n.Z0q)(l.z0.ks, { name: "mapSelectorSeparator", displayName: `Separator ${h}`, description: "Set the character used to separate the elements in the map selector measure.", placeholder: "Enter separator", value: "" });mapFieldShowFullUrls = (0, n.Z0q)(l.z0.jF, { name: "mapFieldShowFullUrls", displayName: `Show Full URLs ${h}`, description: "If enabled, full map URLs are used as map titles, otherwise only the last part of the path is shown.", value: !1 });persistSearchIndex = (0, n.Z0q)(l.z0.jF, { name: "persistSearchIndex", displayName: `Save Index ${h}`, description: "When enabled, the Search Index is available to all report users.", value: !1 });searchIndexSizeExceeded = (0, n.Z0q)(l.z0.uI, { name: "searchIndexSizeExceeded", value: "", visible: !1 });onSearchMapSelection = (0, n.Z0q)(l.z0.PA, { name: "onSearchMapSelection", displayName: `On Map Selection ${h}`, description: "Define the behavior of the map when a map is selected in the search dialog.", value: { displayName: "Change and Select All", value: "select-all" }, items: k });numberLocale = (0, n.Z0q)(l.z0.PA, { name: "numberLocale", displayName: `Number Formatting ${h}`, description: "Set the number formatting for what concerns thousands separators and decimal separators.", value: { value: "en-US", displayName: "123,456.789" }, items: [{ value: "en-US", displayName: "123,456.789" }, { value: "it-IT", displayName: "123.456,789" }, { value: "fr-FR", displayName: "123 456,789" }, { value: "hi-IN", displayName: "1,23,456.789" }] });aggregation = (0, n.Z0q)(l.z0.PA, { name: "aggregation", displayName: `Summarization ${h}`, description: "Choose how to summarize numeric data values. This setting is only required when your model is structured in way that produces non-unique values. Note that the aggregation is made by the visual and does not affect the underlying data model. If you select a different summarization in the field well, unreliable results may occur. Also note that the result may be different from the dataset data because of the rounding applied before the aggregation.", value: { value: "no", displayName: "(Not Allowed)" }, items: x });maxLabels = (0, n.Z0q)(l.z0.iB, { name: "maxLabels", displayName: `Max Labels to Show ${h}`, description: "Choose how many labels the visual can display. Note that showing too many labels may slow down the entire report. Set '0' to show all.", value: 1e3, options: { minValue: { type: 0, value: 0 } } });imageQuality = (0, n.Z0q)(l.z0.Ap, { name: "imageQuality", displayName: `Image Quality ${h}`, description: "Set a compression value for bitmap images embedded into SVG map to improve performance. Lower values may cause a loss of quality.", value: 70, options: { minValue: { type: 0, value: 5 }, maxValue: { type: 1, value: 100 }, unitSymbol: "%", unitSymbolAfterInput: !0 } });cacheRemoteMaps = (0, n.Z0q)(l.z0.jF, { name: "cacheRemoteMaps", displayName: `Remote Maps ${h}`, description: "When disabled, the cache is disabled and remote maps are always fetched from the server.", value: !0 });clearSelectionOnMapChange = (0, n.Z0q)(l.z0.jF, { name: "clearSelectionOnMapChange", displayName: `Clear Selection on Map Change ${h}`, description: "When enabled, the selection is cleared when the map changes.", value: !0 });fillNoneToTransparent = (0, n.Z0q)(l.z0.jF, { name: "fillNoneToTransparent", displayName: `Allow Empty Matched Area Selection ${h}`, description: "When enabled, matched areas with no fill are selectable. When disabled, they are not selectable.", value: !0 });groups = [new n.X4n({ name: "advanced.panZoom", displayName: "Pan & Zoom", slices: [this.lockPan, this.lockZoom, this.minZoom, this.maxZoom, this.zoomSensitivity, this.zoomFit, this.autoPanMode, this.autoZoomMode] }), new n.X4n({ name: "advanced.mapSelector", displayName: "Map Selector", slices: [this.mapSelectorAllowUnassignedMaps, this.mapSelectorSeparator, (0, n.auc)("The map selector enables switching between different maps by bounding a DAX measure, which must be created with a specific syntax.")], visibleIf: () => thisVisualFeatures.mapSelector }), new n.X4n({ name: "advanced.mapField", displayName: "Map URLs", slices: [this.mapFieldShowFullUrls, (0, n.auc)("The map URLs feature allows remote maps to be loaded from a column or measure and controlled through an external filter.")] }), new n.X4n({ name: "advanced.mapSearch", displayName: "Map Search", slices: [this.persistSearchIndex, this.searchIndexSizeExceeded, this.onSearchMapSelection] }), new n.X4n({ name: "advanced.data", displayName: "Data", slices: [this.numberLocale, this.aggregation] }), new n.X4n({ name: "advanced.performance", displayName: "Performance", slices: [this.maxLabels, this.imageQuality] }), new n.X4n({ name: "advanced.cache", displayName: "Cache", slices: [this.cacheRemoteMaps, (0, n.auc)("Disabling the cache may cause performance issues. The cache is automatically cleared when the visual is refreshed.")], visibleIf: () => thisVisualFeatures.remoteMaps }), new n.X4n({ name: "advanced.misc", displayName: "Miscellaneous", slices: [this.clearSelectionOnMapChange, this.fillNoneToTransparent] })];}class j extends n.KTX {name = "accessibility";displayName = "Accessibility";highlightOnHover = (0, n.Z0q)(l.z0.jF, { name: "highlightOnHover", displayName: `Highlight on Hover ${h}`, description: "When enabled, the map highlights the hovered element.", value: !0 });unselectedTransparency = (0, n.Z0q)(l.z0.Ap, { name: "unselectedTransparency", displayName: `Unselected Transparency ${h}`, description: "Set the transparency of the elements that are not selected when at least one is selected.", value: 70, options: g });greyscaleUnselected = (0, n.Z0q)(l.z0.jF, { name: "greyscaleUnselected", displayName: `Greyscale Unselected ${h}`, description: "When enabled, the unselected elements are shown in greyscale.", value: !1 });colorBlindnessVision = (0, n.Z0q)(l.z0.PA, { name: "colorBlindnessVision", displayName: `Color Blindness ${h}`, description: "Choose the color blindness vision to simulate.", value: { value: n.XBB.Normal, displayName: "Normal" }, items: [{ value: n.XBB.Normal, displayName: "Normal" }, { value: n.XBB.Protanopia, displayName: "Protanopia" }, { value: n.XBB.Protanomaly, displayName: "Protanomaly" }, { value: n.XBB.Deuteranopia, displayName: "Deuteranopia" }, { value: n.XBB.Deuteranomaly, displayName: "Deuteranomaly" }, { value: n.XBB.Tritanopia, displayName: "Tritanopia" }, { value: n.XBB.Tritanomaly, displayName: "Tritanomaly" }, { value: n.XBB.Achromatopsia, displayName: "Achromatopsia" }, { value: n.XBB.Achromatomaly, displayName: "Achromatomaly" }, { value: n.XBB.LowContrast, displayName: "Low Contrast" }] });scaleUi = (0, n.Z0q)(l.z0.jF, { name: "scaleUi", displayName: `Scale UI Elements ${h}`, description: "Enable this option to scale UI elements based on the report viewport. This is primarily useful for demonstration purposes.", value: !1 });slices = [this.highlightOnHover, this.unselectedTransparency, this.greyscaleUnselected, this.colorBlindnessVision, this.scaleUi];}class z extends n.zD3 {name = "myStorage";displayName = "My Storage";visible = !1;id = (0, n.Z0q)(l.z0.uI, { name: "id", displayName: "Id:", value: "" });region = (0, n.Z0q)(l.z0.uI, { name: "region", displayName: "Region:", value: "" });isEncrypted = (0, n.Z0q)(l.z0.uI, { name: "isEncrypted", displayName: "Is Encrypted:", value: "" });quota = (0, n.Z0q)(l.z0.uI, { name: "quota", displayName: "Storage:", value: "" });saveEditKey = (0, n.Z0q)(l.z0.jF, { name: "saveEditKey", displayName: `Save Edit Key ${h}`, description: "When enabled, the edit key is available to all report users. This setting does not affect whether Power BI can remember the key locally in its cache.", value: !0 });encryptionKey = (0, n.Z0q)(l.z0.ks, { name: "encryptionKey", displayName: `Encryption Key ${h}`, description: "My Storage encryption key. Needed if the storage is encrypted, otherwise it will be ignored.", placeholder: "Enter encryption key", value: "" });groups = [new n.X4n({ name: "myStorage.status", displayName: "Status", collapsible: !1, slices: [this.id, this.region, this.isEncrypted, this.quota] }), new n.X4n({ name: "myStorage.keys", displayName: "Keys", slices: [this.saveEditKey, this.encryptionKey] })];}class U extends n.zD3 {name = "about";displayName = "About";visualVersion = (0, n.Z0q)(l.z0.uI, { name: "version", value: "" });showDiagnostics = (0, n.Z0q)(l.z0.jF, { name: "diagnostics", displayName: `Show Diagnostics ${h}`, description: "When enabled, the visual shows diagnostic information in the browser console. ", value: !1 });showInlineConsole = (0, n.Z0q)(l.z0.jF, { name: "inlineConsole", displayName: `Inline Console ${h}`, description: "When enabled, the visual shows an inline console in the visual area. This option is useful for debugging purposes.", value: !1, visibleIf: (t) => t.about.showDiagnostics.value && (0, n.zb)() });groups = [new n.X4n({ name: "about.version", displayName: "Version", collapsible: !1, slices: [this.visualVersion] }), new n.X4n({ name: "about.debug", displayName: "Debug", slices: [this.showDiagnostics, this.showInlineConsole, (0, n.auc)("Use this section to enable diagnostic information or experimental features. Note that these options may affect the performance of the visual.")] })];}class H extends n.KTX {name = "internal";visible = !1;maps = (0, n.Ozv)({ name: "maps" });searchIndex = (0, n.Ozv)({ name: "searchIndex" });msek = (0, n.Ozv)({ name: a.rv });zoomStates = (0, n.Ozv)({ name: "zoomStates" });customLabels = (0, n.Ozv)({ name: "customLabels" });colorRules = (0, n.Ozv)({ name: "colorRules" });slices = [];}}, 3515: (t, e, i) => {"use strict";i.d(e, { Gy: () => s, LF: () => o, P0: () => d, Qo: () => h, RU: () => f, S7: () => g, UA: () => r, Uf: () => l, XP: () => c, a3: () => p, e2: () => u, iq: () => m, m: () => a });var n = i(1807);const r = "default",s = "#3CB44A";var o, a, l, c, h;function u(t, e, i, s) {const o = {};for (const t of Object.keys(i)) o[t] = f(s);return { id: (0, n.uRe)(), displayName: `Rule ${t + 1}`, automatic: !1, locked: null, enabled: !0, stop: !1, legend: !0, property: e, mode: "colorScale", conditions: { color: s, operator: c.And, conditions: { 0: d() }, level: r }, colorScales: { field: { role: "" }, blank: "ignore", blankColor: "#e6e6e6", type: h.Linear, relative: !1, scalesByLevel: o } };}function d(t) {let e = 0;if (t) {const i = Object.keys(t.conditions.conditions);e = parseInt(i[i.length - 1]) + 1;}return { id: e, field: { role: "" }, comparison: l.EqualTo, mode: o.Value, value: null };}function p(t) {return { mode: o.Percentage, value: null, color: t };}function f(t) {return { min: p((0, n.dyA)(.8, t)), max: p(t), center: p(null), topColor: null, bottomColor: null };}!function (t) {t[t.Percentage = 0] = "Percentage", t[t.Value = 1] = "Value", t[t.FieldValue = 2] = "FieldValue", t[t.Calc = 3] = "Calc", t[t.Text = 4] = "Text";}(o || (o = {})), function (t) {t[t.Plus = 0] = "Plus", t[t.Minus = 1] = "Minus", t[t.Divide = 2] = "Divide", t[t.Times = 3] = "Times";}(a || (a = {})), function (t) {t[t.LessThan = 0] = "LessThan", t[t.LessThanOrEqualTo = 1] = "LessThanOrEqualTo", t[t.EqualTo = 2] = "EqualTo", t[t.GreaterThan = 3] = "GreaterThan", t[t.GreaterThanOrEqualTo = 4] = "GreaterThanOrEqualTo", t[t.DifferentFrom = 5] = "DifferentFrom", t[t.Between = 6] = "Between", t[t.Blank = 7] = "Blank", t[t.NotBlank = 8] = "NotBlank", t[t.Is = 9] = "Is", t[t.IsNot = 10] = "IsNot", t[t.IsEmpty = 11] = "IsEmpty", t[t.IsNotEmpty = 12] = "IsNotEmpty", t[t.Contains = 13] = "Contains", t[t.NotContains = 14] = "NotContains", t[t.StartsWith = 15] = "StartsWith", t[t.NotStartsWith = 16] = "NotStartsWith";}(l || (l = {})), function (t) {t[t.And = 0] = "And", t[t.Or = 1] = "Or";}(c || (c = {})), function (t) {t[t.Linear = 0] = "Linear", t[t.Logarithmic = 1] = "Logarithmic";}(h || (h = {}));const g = new Set([l.LessThan, l.LessThanOrEqualTo, l.EqualTo, l.GreaterThan, l.GreaterThanOrEqualTo, l.DifferentFrom, l.Between, l.Blank, l.NotBlank]),m = new Set([l.Is, l.IsNot, l.IsEmpty, l.IsNotEmpty, l.Contains, l.NotContains, l.StartsWith, l.NotStartsWith, l.Blank, l.NotBlank]);}, 3520: (t, e, i) => {"use strict";i.d(e, { A: () => s, u: () => n });var n,r = i(5204);function s(t, e) {var i = (0, r.f)(t, e);if (!i) return t + "";var s = i[0],o = i[1],a = o - (n = 3 * Math.max(-8, Math.min(8, Math.floor(o / 3)))) + 1,l = s.length;return a === l ? s : a > l ? s + new Array(a - l + 1).join("0") : a > 0 ? s.slice(0, a) + "." + s.slice(a) : "0." + new Array(1 - a).join("0") + (0, r.f)(t, Math.max(0, e + a - 1))[0];}}, 3537: (t, e, i) => {"use strict";i(8965);}, 3554: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(5204);function r(t, e) {var i = (0, n.f)(t, e);if (!i) return t + "";var r = i[0],s = i[1];return s < 0 ? "0." + new Array(-s).join("0") + r : r.length > s + 1 ? r.slice(0, s + 1) + "." + r.slice(s + 1) : r + new Array(s - r.length + 2).join("0");}}, 3571: (t, e, i) => {"use strict";i.d(e, { z: () => o });var n = i(1807),r = i(7345),s = i(8862);class o {config;errorContainer;msgBox;get isInline() {return this.config.container !== document.body;}constructor(t) {this.config = { error: (0, r.T)("UNKNOWN"), container: document.body, showIcon: !0, showDetails: !1, scale: 1, showCode: !0, ...t };}async render() {const t = { type: "none" };if (this.isInline) this.config.container && this.renderInline(this.config.error);else {const e = await this.showMsgBox(this.config.error);"link" == e?.action && (t.type = "link", t.url = this.config.error.helpUrl);}return t;}renderInline(t) {const e = t.icon || "alert";(0, n.tTh)(".inline-error", this.config.container, { middleware: (t) => this.errorContainer = t }, [(0, n.tTh)(`.icon.icon-${e}`, { middleware: (t) => {this.config.classes?.icon && t.classList.add(...this.config.classes.icon);} }), (0, n.tTh)(".message-box", [(0, n.tTh)("span.title", { middleware: (t) => {this.config.classes?.title && t.classList.add(...this.config.classes.title);} }, `${t.title || "Error"}`.trim()), (0, n.tTh)("span.description", { middleware: (t) => {this.config.classes?.description && t.classList.add(...this.config.classes.description);} }, t.description || "Something went wrong. Unable to complete the request.")])]);}showMsgBox(t) {this.msgBox && this.msgBox.destroy();const e = { element: this.config.container, title: t.title || "Error", description: t.description || "Something went wrong. Unable to complete the request.", destroyCallback: this.config?.destroyCallback, buttons: [{ text: "Ok" }] };return t.helpUrl && (e.link = { text: "Learn More", url: t.helpUrl }), this.config.showIcon && (e.icon = t.icon || "alert", this.msgBox = new s.V(e)), this.msgBox.draw();}destroy() {this.msgBox && this.msgBox.destroy(), this.errorContainer && this.errorContainer.remove();}}}, 3578: (t, e, i) => {"use strict";function n(t, e, i) {this.k = t, this.x = e, this.y = i;}n.prototype = { constructor: n, scale: function (t) {return 1 === t ? this : new n(this.k * t, this.x, this.y);}, translate: function (t, e) {return 0 === t & 0 === e ? this : new n(this.k, this.x + this.k * t, this.y + this.k * e);}, apply: function (t) {return [t[0] * this.k + this.x, t[1] * this.k + this.y];}, applyX: function (t) {return t * this.k + this.x;}, applyY: function (t) {return t * this.k + this.y;}, invert: function (t) {return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k];}, invertX: function (t) {return (t - this.x) / this.k;}, invertY: function (t) {return (t - this.y) / this.k;}, rescaleX: function (t) {return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t));}, rescaleY: function (t) {return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t));}, toString: function () {return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";} }, new n(1, 0, 0), n.prototype;}, 3589: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(3363);function r() {var t,e,i = this,r = i._id,s = i.size();return new Promise(function (o, a) {var l = { value: a },c = { value: function () {0 === --s && o();} };i.each(function () {var i = (0, n.hZ)(this, r),s = i.on;s !== t && ((e = (t = s).copy())._.cancel.push(l), e._.interrupt.push(l), e._.end.push(c)), i.on = e;}), 0 === s && o();});}}, 3622: (t, e, i) => {"use strict";i.d(e, { Z: () => r });var n = i(1807);class r extends n.T0G {options;pending = {};get rendered() {return this._rendered;}_rendered = !1;constructor(t, e) {super(), this.options = t;}draw(t) {this._rendered = !0;}save() {const t = [].concat(...Object.values(this.pending));this.trigger("save", t);}download(t) {this.trigger("download", t);}close(t = 1) {this.trigger("close", t);}showError(t, e) {n.s54.SHOW({ id: "editor-error", text: t, icon: "alert", position: "top", hideAfter: 10 }), n.C7A.ERROR(t, e);}}}, 3627: (t, e, i) => {"use strict";var n = i(5606),r = "win32" === n.platform,s = i(537);function o(t, e) {for (var i = [], n = 0; n < t.length; n++) {var r = t[n];r && "." !== r && (".." === r ? i.length && ".." !== i[i.length - 1] ? i.pop() : e && i.push("..") : i.push(r));}return i;}function a(t) {for (var e = t.length - 1, i = 0; i <= e && !t[i]; i++);for (var n = e; n >= 0 && !t[n]; n--);return 0 === i && n === e ? t : i > n ? [] : t.slice(i, n + 1);}var l = /^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,c = /^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,h = {};function u(t) {var e = l.exec(t),i = (e[1] || "") + (e[2] || ""),n = e[3] || "",r = c.exec(n);return [i, r[1], r[2], r[3]];}function d(t) {var e = l.exec(t),i = e[1] || "",n = !!i && ":" !== i[1];return { device: i, isUnc: n, isAbsolute: n || !!e[2], tail: e[3] };}function p(t) {return "\\\\" + t.replace(/^[\\\/]+/, "").replace(/[\\\/]+/g, "\\");}h.resolve = function () {for (var t = "", e = "", i = !1, r = arguments.length - 1; r >= -1; r--) {var a;if (r >= 0 ? a = arguments[r] : t ? (a = n.env["=" + t]) && a.substr(0, 3).toLowerCase() === t.toLowerCase() + "\\" || (a = t + "\\") : a = n.cwd(), !s.isString(a)) throw new TypeError("Arguments to path.resolve must be strings");if (a) {var l = d(a),c = l.device,h = l.isUnc,u = l.isAbsolute,f = l.tail;if ((!c || !t || c.toLowerCase() === t.toLowerCase()) && (t || (t = c), i || (e = f + "\\" + e, i = u), t && i)) break;}}return h && (t = p(t)), t + (i ? "\\" : "") + (e = o(e.split(/[\\\/]+/), !i).join("\\")) || ".";}, h.normalize = function (t) {var e = d(t),i = e.device,n = e.isUnc,r = e.isAbsolute,s = e.tail,a = /[\\\/]$/.test(s);return (s = o(s.split(/[\\\/]+/), !r).join("\\")) || r || (s = "."), s && a && (s += "\\"), n && (i = p(i)), i + (r ? "\\" : "") + s;}, h.isAbsolute = function (t) {return d(t).isAbsolute;}, h.join = function () {for (var t = [], e = 0; e < arguments.length; e++) {var i = arguments[e];if (!s.isString(i)) throw new TypeError("Arguments to path.join must be strings");i && t.push(i);}var n = t.join("\\");return /^[\\\/]{2}[^\\\/]/.test(t[0]) || (n = n.replace(/^[\\\/]{2,}/, "\\")), h.normalize(n);}, h.relative = function (t, e) {t = h.resolve(t), e = h.resolve(e);for (var i = t.toLowerCase(), n = e.toLowerCase(), r = a(e.split("\\")), s = a(i.split("\\")), o = a(n.split("\\")), l = Math.min(s.length, o.length), c = l, u = 0; u < l; u++) if (s[u] !== o[u]) {c = u;break;}if (0 == c) return e;var d = [];for (u = c; u < s.length; u++) d.push("..");return (d = d.concat(r.slice(c))).join("\\");}, h._makeLong = function (t) {if (!s.isString(t)) return t;if (!t) return "";var e = h.resolve(t);return /^[a-zA-Z]\:\\/.test(e) ? "\\\\?\\" + e : /^\\\\[^?.]/.test(e) ? "\\\\?\\UNC\\" + e.substring(2) : t;}, h.dirname = function (t) {var e = u(t),i = e[0],n = e[1];return i || n ? (n && (n = n.substr(0, n.length - 1)), i + n) : ".";}, h.basename = function (t, e) {var i = u(t)[2];return e && i.substr(-1 * e.length) === e && (i = i.substr(0, i.length - e.length)), i;}, h.extname = function (t) {return u(t)[3];}, h.format = function (t) {if (!s.isObject(t)) throw new TypeError("Parameter 'pathObject' must be an object, not " + typeof t);var e = t.root || "";if (!s.isString(e)) throw new TypeError("'pathObject.root' must be a string or undefined, not " + typeof t.root);var i = t.dir,n = t.base || "";return i ? i[i.length - 1] === h.sep ? i + n : i + h.sep + n : n;}, h.parse = function (t) {if (!s.isString(t)) throw new TypeError("Parameter 'pathString' must be a string, not " + typeof t);var e = u(t);if (!e || 4 !== e.length) throw new TypeError("Invalid path '" + t + "'");return { root: e[0], dir: e[0] + e[1].slice(0, -1), base: e[2], ext: e[3], name: e[2].slice(0, e[2].length - e[3].length) };}, h.sep = "\\", h.delimiter = ";";var f = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g = {};function m(t) {return f.exec(t).slice(1);}g.resolve = function () {for (var t = "", e = !1, i = arguments.length - 1; i >= -1 && !e; i--) {var r = i >= 0 ? arguments[i] : n.cwd();if (!s.isString(r)) throw new TypeError("Arguments to path.resolve must be strings");r && (t = r + "/" + t, e = "/" === r[0]);}return (e ? "/" : "") + (t = o(t.split("/"), !e).join("/")) || ".";}, g.normalize = function (t) {var e = g.isAbsolute(t),i = t && "/" === t[t.length - 1];return (t = o(t.split("/"), !e).join("/")) || e || (t = "."), t && i && (t += "/"), (e ? "/" : "") + t;}, g.isAbsolute = function (t) {return "/" === t.charAt(0);}, g.join = function () {for (var t = "", e = 0; e < arguments.length; e++) {var i = arguments[e];if (!s.isString(i)) throw new TypeError("Arguments to path.join must be strings");i && (t += t ? "/" + i : i);}return g.normalize(t);}, g.relative = function (t, e) {t = g.resolve(t).substr(1), e = g.resolve(e).substr(1);for (var i = a(t.split("/")), n = a(e.split("/")), r = Math.min(i.length, n.length), s = r, o = 0; o < r; o++) if (i[o] !== n[o]) {s = o;break;}var l = [];for (o = s; o < i.length; o++) l.push("..");return (l = l.concat(n.slice(s))).join("/");}, g._makeLong = function (t) {return t;}, g.dirname = function (t) {var e = m(t),i = e[0],n = e[1];return i || n ? (n && (n = n.substr(0, n.length - 1)), i + n) : ".";}, g.basename = function (t, e) {var i = m(t)[2];return e && i.substr(-1 * e.length) === e && (i = i.substr(0, i.length - e.length)), i;}, g.extname = function (t) {return m(t)[3];}, g.format = function (t) {if (!s.isObject(t)) throw new TypeError("Parameter 'pathObject' must be an object, not " + typeof t);var e = t.root || "";if (!s.isString(e)) throw new TypeError("'pathObject.root' must be a string or undefined, not " + typeof t.root);return (t.dir ? t.dir + g.sep : "") + (t.base || "");}, g.parse = function (t) {if (!s.isString(t)) throw new TypeError("Parameter 'pathString' must be a string, not " + typeof t);var e = m(t);if (!e || 4 !== e.length) throw new TypeError("Invalid path '" + t + "'");return e[1] = e[1] || "", e[2] = e[2] || "", e[3] = e[3] || "", { root: e[0], dir: e[0] + e[1].slice(0, -1), base: e[2], ext: e[3], name: e[2].slice(0, e[2].length - e[3].length) };}, g.sep = "/", g.delimiter = ":", t.exports = r ? h : g, t.exports.posix = g, t.exports.win32 = h;}, 3640: (t, e, i) => {"use strict";var n = i(4653);i(8352), i(3290), i(3242), i(7447), n.T;}, 3663: (t, e, i) => {"use strict";i.d(e, { A: () => a });var n = i(7268),r = i(7947);function s(t) {return function () {var e = this.ownerDocument,i = this.namespaceURI;return i === r.g && e.documentElement.namespaceURI === r.g ? e.createElement(t) : e.createElementNS(i, t);};}function o(t) {return function () {return this.ownerDocument.createElementNS(t.space, t.local);};}function a(t) {var e = (0, n.A)(t);return (e.local ? o : s)(e);}}, 3680: (t, e, i) => {"use strict";i.d(e, { Z: () => f });var n = i(1436),r = i(8655),s = i(7493),o = i(9095),a = i(9874),l = i(149),c = i(8858),h = i(2168),u = i(4618),d = i(5500),p = i(8278);async function f(t, e, i) {if (!(0, l.A)(t)) throw new s.Ye("Flattened JWS must be an object");if (void 0 === t.protected && void 0 === t.header) throw new s.Ye('Flattened JWS must have either of the "protected" or "header" members');if (void 0 !== t.protected && "string" != typeof t.protected) throw new s.Ye("JWS Protected Header incorrect type");if (void 0 === t.payload) throw new s.Ye("JWS Payload missing");if ("string" != typeof t.signature) throw new s.Ye("JWS Signature missing or incorrect type");if (void 0 !== t.header && !(0, l.A)(t.header)) throw new s.Ye("JWS Unprotected Header incorrect type");let f = {};if (t.protected) try {const e = (0, n.D4)(t.protected);f = JSON.parse(o.D0.decode(e));} catch {throw new s.Ye("JWS Protected Header is invalid");}if (!(0, a.A)(f, t.header)) throw new s.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const g = { ...f, ...t.header };let m = !0;if ((0, h.A)(s.Ye, new Map([["b64", !0]]), i?.crit, f, g).has("b64") && (m = f.b64, "boolean" != typeof m)) throw new s.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const { alg: v } = g;if ("string" != typeof v || !v) throw new s.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');const y = i && (0, u.A)("algorithms", i.algorithms);if (y && !y.has(v)) throw new s.Rb('"alg" (Algorithm) Header Parameter value not allowed');if (m) {if ("string" != typeof t.payload) throw new s.Ye("JWS Payload must be a string");} else if ("string" != typeof t.payload && !(t.payload instanceof Uint8Array)) throw new s.Ye("JWS Payload must be a string or an Uint8Array instance");let b = !1;"function" == typeof e ? (e = await e(f, t), b = !0, (0, c.I)(v, e, "verify"), (0, d.ll)(e) && (e = await (0, p.Og)(e, v))) : (0, c.I)(v, e, "verify");const w = (0, o.xW)(o.Rd.encode(t.protected ?? ""), o.Rd.encode("."), "string" == typeof t.payload ? o.Rd.encode(t.payload) : t.payload);let x, S;try {x = (0, n.D4)(t.signature);} catch {throw new s.Ye("Failed to base64url decode the signature");}if (!(await (0, r.A)(v, e, x, w))) throw new s.h2();if (m) try {S = (0, n.D4)(t.payload);} catch {throw new s.Ye("Failed to base64url decode the payload");} else S = "string" == typeof t.payload ? o.Rd.encode(t.payload) : t.payload;const E = { payload: S };return void 0 !== t.protected && (E.protectedHeader = f), void 0 !== t.header && (E.unprotectedHeader = t.header), b ? { ...E, key: e } : E;}}, 3683: (t, e, i) => {"use strict";i.d(e, { A: () => a, j: () => l });var n = i(6747);function r(t) {return function () {this.style.removeProperty(t);};}function s(t, e, i) {return function () {this.style.setProperty(t, e, i);};}function o(t, e, i) {return function () {var n = e.apply(this, arguments);null == n ? this.style.removeProperty(t) : this.style.setProperty(t, n, i);};}function a(t, e, i) {return arguments.length > 1 ? this.each((null == e ? r : "function" == typeof e ? o : s)(t, e, null == i ? "" : i)) : l(this.node(), t);}function l(t, e) {return t.style.getPropertyValue(e) || (0, n.A)(t).getComputedStyle(t, null).getPropertyValue(e);}}, 3720: (t, e, i) => {"use strict";const n = i(7612);t.exports = (t, e = {}) => {const i = (t, r = {}) => {const s = e.escapeInvalid && n.isInvalidBrace(r),o = !0 === t.invalid && !0 === e.escapeInvalid;let a = "";if (t.value) return (s || o) && n.isOpenOrClose(t) ? "\\" + t.value : t.value;if (t.value) return t.value;if (t.nodes) for (const e of t.nodes) a += i(e);return a;};return i(t);};}, 3748: (t, e, i) => {"use strict";function n() {var t = arguments[0];"string" == typeof t && (t = document.createElement(t));var e = 1,i = arguments[1];if (i && "object" == typeof i && null == i.nodeType && !Array.isArray(i)) {for (var n in i) if (Object.prototype.hasOwnProperty.call(i, n)) {var s = i[n];"string" == typeof s ? t.setAttribute(n, s) : null != s && (t[n] = s);}e++;}for (; e < arguments.length; e++) r(t, arguments[e]);return t;}function r(t, e) {if ("string" == typeof e) t.appendChild(document.createTextNode(e));else if (null == e) ;else if (null != e.nodeType) t.appendChild(e);else {if (!Array.isArray(e)) throw new RangeError("Unsupported child node: " + e);for (var i = 0; i < e.length; i++) r(t, e[i]);}}i.d(e, { A: () => n });}, 3753: (t, e, i) => {"use strict";i.d(e, { Fx: () => a, Q9: () => n, Sx: () => r, TF: () => s, WG: () => u, aH: () => o, lW: () => p, te: () => h, uR: () => l, y4: () => d });const n = "'Segoe UI', wf_segoe-ui_normal, helvetica, arial, sans-serif",r = "wf_standard-font, helvetica, arial, sans-serif";function s(t) {return t.substring(0, 1).toLocaleUpperCase() + t.substring(1).toLocaleLowerCase();}function o(t) {let e = t.trim().replace(/[^a-zA-Z0-9-_]/g, (t) => `_${t.charCodeAt(0).toString(16).toUpperCase()}_`);return /^\d/.test(e) && (e = `_${e}`), e;}function a(t) {const e = "0123456789abcdef";function i(t) {let i,n = "";for (i = 0; i <= 3; i++) n += e.charAt(t >> 8 * i + 4 & 15) + e.charAt(t >> 8 * i & 15);return n;}function n(t, e) {const i = (65535 & t) + (65535 & e);return (t >> 16) + (e >> 16) + (i >> 16) << 16 | 65535 & i;}function r(t, e, i, r, s, o) {return n(function (t, e) {return t << e | t >>> 32 - e;}(n(n(e, t), n(r, o)), s), i);}function s(t, e, i, n, s, o, a) {return r(e & i | ~e & n, t, e, s, o, a);}function o(t, e, i, n, s, o, a) {return r(e & n | i & ~n, t, e, s, o, a);}function a(t, e, i, n, s, o, a) {return r(e ^ i ^ n, t, e, s, o, a);}function l(t, e, i, n, s, o, a) {return r(i ^ (e | ~n), t, e, s, o, a);}let c;const h = function (t) {let e;const i = 1 + (t.length + 8 >> 6),n = [];for (e = 0; e < 16 * i; e++) n[e] = 0;for (e = 0; e < t.length; e++) n[e >> 2] |= t.charCodeAt(e) << e % 4 * 8;return n[e >> 2] |= 128 << e % 4 * 8, n[16 * i - 2] = 8 * t.length, n;}(t);let u,d,p,f,g = 1732584193,m = -271733879,v = -1732584194,y = 271733878;for (c = 0; c < h.length; c += 16) u = g, d = m, p = v, f = y, g = s(g, m, v, y, h[c + 0], 7, -680876936), y = s(y, g, m, v, h[c + 1], 12, -389564586), v = s(v, y, g, m, h[c + 2], 17, 606105819), m = s(m, v, y, g, h[c + 3], 22, -1044525330), g = s(g, m, v, y, h[c + 4], 7, -176418897), y = s(y, g, m, v, h[c + 5], 12, 1200080426), v = s(v, y, g, m, h[c + 6], 17, -1473231341), m = s(m, v, y, g, h[c + 7], 22, -45705983), g = s(g, m, v, y, h[c + 8], 7, 1770035416), y = s(y, g, m, v, h[c + 9], 12, -1958414417), v = s(v, y, g, m, h[c + 10], 17, -42063), m = s(m, v, y, g, h[c + 11], 22, -1990404162), g = s(g, m, v, y, h[c + 12], 7, 1804603682), y = s(y, g, m, v, h[c + 13], 12, -40341101), v = s(v, y, g, m, h[c + 14], 17, -1502002290), m = s(m, v, y, g, h[c + 15], 22, 1236535329), g = o(g, m, v, y, h[c + 1], 5, -165796510), y = o(y, g, m, v, h[c + 6], 9, -1069501632), v = o(v, y, g, m, h[c + 11], 14, 643717713), m = o(m, v, y, g, h[c + 0], 20, -373897302), g = o(g, m, v, y, h[c + 5], 5, -701558691), y = o(y, g, m, v, h[c + 10], 9, 38016083), v = o(v, y, g, m, h[c + 15], 14, -660478335), m = o(m, v, y, g, h[c + 4], 20, -405537848), g = o(g, m, v, y, h[c + 9], 5, 568446438), y = o(y, g, m, v, h[c + 14], 9, -1019803690), v = o(v, y, g, m, h[c + 3], 14, -187363961), m = o(m, v, y, g, h[c + 8], 20, 1163531501), g = o(g, m, v, y, h[c + 13], 5, -1444681467), y = o(y, g, m, v, h[c + 2], 9, -51403784), v = o(v, y, g, m, h[c + 7], 14, 1735328473), m = o(m, v, y, g, h[c + 12], 20, -1926607734), g = a(g, m, v, y, h[c + 5], 4, -378558), y = a(y, g, m, v, h[c + 8], 11, -2022574463), v = a(v, y, g, m, h[c + 11], 16, 1839030562), m = a(m, v, y, g, h[c + 14], 23, -35309556), g = a(g, m, v, y, h[c + 1], 4, -1530992060), y = a(y, g, m, v, h[c + 4], 11, 1272893353), v = a(v, y, g, m, h[c + 7], 16, -155497632), m = a(m, v, y, g, h[c + 10], 23, -1094730640), g = a(g, m, v, y, h[c + 13], 4, 681279174), y = a(y, g, m, v, h[c + 0], 11, -358537222), v = a(v, y, g, m, h[c + 3], 16, -722521979), m = a(m, v, y, g, h[c + 6], 23, 76029189), g = a(g, m, v, y, h[c + 9], 4, -640364487), y = a(y, g, m, v, h[c + 12], 11, -421815835), v = a(v, y, g, m, h[c + 15], 16, 530742520), m = a(m, v, y, g, h[c + 2], 23, -995338651), g = l(g, m, v, y, h[c + 0], 6, -198630844), y = l(y, g, m, v, h[c + 7], 10, 1126891415), v = l(v, y, g, m, h[c + 14], 15, -1416354905), m = l(m, v, y, g, h[c + 5], 21, -57434055), g = l(g, m, v, y, h[c + 12], 6, 1700485571), y = l(y, g, m, v, h[c + 3], 10, -1894986606), v = l(v, y, g, m, h[c + 10], 15, -1051523), m = l(m, v, y, g, h[c + 1], 21, -2054922799), g = l(g, m, v, y, h[c + 8], 6, 1873313359), y = l(y, g, m, v, h[c + 15], 10, -30611744), v = l(v, y, g, m, h[c + 6], 15, -1560198380), m = l(m, v, y, g, h[c + 13], 21, 1309151649), g = l(g, m, v, y, h[c + 4], 6, -145523070), y = l(y, g, m, v, h[c + 11], 10, -1120210379), v = l(v, y, g, m, h[c + 2], 15, 718787259), m = l(m, v, y, g, h[c + 9], 21, -343485551), g = n(g, u), m = n(m, d), v = n(v, p), y = n(y, f);return i(g) + i(m) + i(v) + i(y);}function l(t = !0) {const e = (t) => {let e = t.toString(16);for (; e.length < 4;) e = "0" + e;return e;},i = new Uint16Array(8);window.crypto.getRandomValues(i);let n = e(i[0]) + e(i[1]) + "-" + e(i[2]) + "-" + e(i[3]) + "-" + e(i[4]) + "-" + e(i[5]) + e(i[6]) + e(i[7]);return t && (isNaN(Number(n.substring(0, 1))) || (n = "_" + n)), n;}let c;function h(t, e = "actual") {(function () {if (c) return;const t = document.createElement("canvas");c = t.getContext("2d");})(), c.font = (t.fontStyle || "") + " " + (t.fontVariant || "") + " " + (t.fontWeight || "") + " " + t.fontSize + " " + t.fontFamily;const i = c.measureText(t.text),n = "actual" === e ? i.actualBoundingBoxAscent + i.actualBoundingBoxDescent : "font" === e ? i.fontBoundingBoxAscent + i.fontBoundingBoxDescent : i.hangingBaseline + i.ideographicBaseline;return { width: i.width, height: n };}function u(t) {try {return btoa(t);} catch (e) {const i = new TextEncoder().encode(t);let n = "";for (const t of i) n += String.fromCharCode(t);return btoa(n);}}function d(t) {try {return atob(t);} catch (e) {const i = atob(t),n = new Uint8Array(i.length);for (let t = 0; t < i.length; t++) n[t] = i.charCodeAt(t);return new TextDecoder().decode(n);}}function p(t) {const e = document.createElement("textarea");e.value = t, document.body.appendChild(e), e.select(), document.execCommand("copy"), document.body.removeChild(e);}}, 3761: (t, e, i) => {"use strict";i.d(e, { K: () => a, m: () => o });var n = i(1807),r = i(906),s = i(2216);const o = "edit-ms-map-meta-btn";class a extends r.g {author;attribution;passwordInput;get result() {return { attribution: this.attributionValue, author: this.authorValue, password: this.passwordValue };}get validationCallbackData() {return this.result;}get callbackData() {return this.result;}get passwordValue() {return this.passwordInput?.value.trim();}get authorValue() {return this.author?.value.trim();}get attributionValue() {return this.attribution?.value.trim();}addInput() {(0, n.tTh)(".edit-metadata", this.boxContent, [(0, n.tTh)(".metadata-input-section", [(0, n.tTh)("label", { attr: { for: "edit-map-author" } }, "Author"), (0, n.tTh)("input.max", { attr: { id: "edit-map-author", type: "text", placeholder: "Map author", value: this.config.author ?? "" }, middleware: (t) => {this.author = t;} })]), (0, n.tTh)(".metadata-input-section", [(0, n.tTh)("label", { attr: { for: "edit-map-attribution" } }, "Attribution"), (0, n.tTh)("input.max", { attr: { id: "edit-map-attribution", type: "text", placeholder: "Map attribution", value: this.config.attribution ?? "" }, middleware: (t) => {this.attribution = t;} })])]);}addPasswordInput() {this.toggleButton(o, !0), this.passwordInput = (0, s.O)(this.boxContent, { labelMinWidth: "80px", label: "Password", placeholder: "Enter map password", visibilityToggle: !0, onInput: (t, e) => this.toggleButton(o, !e.value.trim().length) }).querySelector("input");}draw() {return this.create(), this.boxContent.classList.add("gap"), this.addInput(), this.config.protected ? (this.addPasswordInput(), this.addValidationErrorBox()) : this.boxContent.classList.add("margin-top"), super.draw();}}}, 3801: (t, e, i) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.Family = e.fallbackFonts = void 0;var n = i(6721);e.fallbackFonts = ["helvetica", "arial", "sans-serif"], e.Family = { light: new n.FamilyInfo(e.fallbackFonts), semilight: new n.FamilyInfo(e.fallbackFonts), regular: new n.FamilyInfo(e.fallbackFonts), semibold: new n.FamilyInfo(e.fallbackFonts), bold: new n.FamilyInfo(e.fallbackFonts), lightSecondary: new n.FamilyInfo(e.fallbackFonts), regularSecondary: new n.FamilyInfo(e.fallbackFonts), boldSecondary: new n.FamilyInfo(e.fallbackFonts) };}, 3838: (t, e, i) => {"use strict";i.d(e, { y: () => r });var n = i(3394);class r extends n.i {get className() {return "oop-group";}}}, 3858: (t, e, i) => {"use strict";i.d(e, { g: () => o });var n = i(7274),r = i(1807);const s = ["id", "label", "dataPoint"];class o extends r.T0G {flexSearch;mapsManager;abortController;get totalMaps() {return Object.values(this.mapsManager.counts).reduce((t, e) => t + e, 0);}constructor(t) {super(), this.mapsManager = t, this.abortController = new AbortController(), this.init();}init() {this.flexSearch = new n.yo({ document: { id: "searchId", field: s, store: [...s, "mapId"] }, tokenize: "forward" });}async ensure() {if (this.flexSearch || this.init(), this.mapsManager.state.searchIndex) {for (const t in this.mapsManager.state.searchIndex) {const e = this.mapsManager.state.searchIndex[t];this.flexSearch.import(t, e);}this.trigger("endImporting");} else await this.build();}async build() {this.flexSearch || this.init(), this.flexSearch.clear();let t = 0,e = 0;this.trigger("startIndexing", this.totalMaps);for (const i in this.mapsManager.state.maps) for (const n of this.mapsManager.state.maps[i]) {if (e) {const t = { perc: Math.round((e + 1) / this.totalMaps * 100), totalMaps: this.totalMaps, processedMaps: e + 1 };this.trigger("updateProgress", t);}const r = n.id;let s = n.jsvg || null;if (!s) try {const t = await this.mapsManager.getBoundMapFromRemote(n, i);if (!t) {e++;continue;}s = t.jsvg;} catch (t) {e++;continue;}if (!s) continue;const o = s.dataMapping?.areas || {};this.flexSearch.add({ searchId: `T${t}`, id: n.name, mapId: r });for (const e in o) {const i = o[e],n = { searchId: `${t}`, id: i.id, mapId: r };i.label && (n.label = i.label), i.dataPoint && (n.dataPoint = i.dataPoint), this.flexSearch.add(n), t++;}e++;}const i = {};this.flexSearch.export((t, e) => {i[t] = e;}), this.mapsManager.state.searchIndex = i, this.trigger("endIndexing");}search(t, e = s, i = !1) {if (!this.flexSearch) return [];let n = this.flexSearch.search(t, { limit: 1e4, enrich: !0, field: e, suggest: i });const r = {};return n.forEach((t) => t.result.forEach((t) => {const e = t.doc,i = e.mapId;if (!r[i]) {const t = this.mapsManager.findMapById(i);t && (r[i] = { ...t, matchCount: 0, match: [] });}if (r[i]) {const n = r[i];t.id.startsWith("T") ? n.title = !0 : (n.matchCount++, e.id && !n.match.includes(e.id) && n.match.push(e.id), e.label && !n.match.includes(e.label) && n.match.push(e.label), e.dataPoint && !n.match.includes(e.dataPoint) && n.match.push(e.dataPoint));}})), Object.values(r);}destroy() {this.flexSearch?.clear(), this.flexSearch = null, this.abortController?.abort(), this.abortController = null, this.mapsManager = null, super.destroy();}}}, 3874: (t, e, i) => {"use strict";const n = i(8311);t.exports = (t, e) => {try {return new n(t, e).range || "*";} catch (t) {return null;}};}, 3895: (t, e, i) => {"use strict";i.d(e, { k: () => n, x: () => p });var n,r = i(1807),s = i(5367),o = i(1514),a = i(4237),l = i(7077),c = i(5872),h = i(7345),u = i(100),d = i(1299);!function (t) {t[t.Local = 0] = "Local", t[t.Remote = 1] = "Remote", t[t.MyStorage = 2] = "MyStorage", t[t.DataField = 3] = "DataField";}(n || (n = {}));class p extends r.T0G {options;static _instance;myStorage;static get instance() {if (!p._instance) throw new Error("The MapsManager instance has not been created yet.");return p._instance;}constructor(t) {if (super(), this.options = t, p._instance) return p._instance;p._instance = this, this.state = { maps: {}, mapsOrder: {}, selectedMaps: {}, ...t.initialState }, this.jsvgGenerator = new c.w(), delete t.initialState, this.cleanState(), this.myStorage = new u.Lu(t.myStorageInfo);}jsvgGenerator;state;get isEmpty() {return !Object.keys(this.state.maps).filter((t) => !(0, o.bb)(t)).length;}get counts() {const t = { local: 0, remote: 0, myStorage: 0, dataField: 0 };for (const e in this.state.maps) this.state.maps[e].forEach((e) => {e.location === n.Local ? t.local++ : e.location === n.Remote ? t.remote++ : e.location === n.MyStorage ? t.myStorage++ : e.location === n.DataField && t.dataField++;});return t;}get persistableState() {const t = {};for (const e in this.state.maps) (0, o.bb)(e) || (t[e] = this.state.maps[e].map((t) => {const e = { ...t, jsvg: t.jsvg && t.location !== n.MyStorage && t.location !== n.DataField ? { ...t.jsvg, svg: t.location == n.Local ? t.jsvg.svg : null } : null };return e.jsvg && !e.jsvg.svg && delete e.jsvg.svg, delete e.scanned, e;}));return { maps: t, mapsOrder: { ...this.state.mapsOrder }, selectedMaps: { ...this.state.selectedMaps } };}get canPersistSearchIndex() {return !this.state.searchIndex || (0, l.Pu)(JSON.stringify(this.state.searchIndex)) <= d.Nz;}getMemorySize(t) {let e = 0;for (const i in this.state.maps) this.state.maps[i].forEach((i) => {t && i.location !== t || (e += i.jsvg?.svg ? i.size ?? 0 : 0);});return e;}freeMemory() {this.getMemorySize() > d.B5 && this.cleanNonLocalSvgMaps();}findMapById(t, e) {return t ? this.findMap((e) => e.id === t, e) : null;}findMap(t, e) {if (e) {const i = this.state.maps[e]?.find((e) => t(e));if (i) return { map: i, drillPathId: e };} else for (const e in this.state.maps) {const i = this.state.maps[e].find((e) => t(e));if (i) return { map: i, drillPathId: e };}return null;}getDisplayMaps(t) {const e = [];if (this.forEachDrillPathId(t, (t) => {e.push(...this.state.maps[t]);}), (0, o.V$)(t)) {const i = this.state.mapsOrder[t];i && e.sort((t, e) => i.indexOf(t.id) - i.indexOf(e.id));}return e;}getMaps(t) {return this.state.maps[t] || [];}getSelectedMap(t) {const e = this.findMapById(this.state.selectedMaps[t])?.map;if (!e) {const e = this.getRealAndVirtualDrillPathIds(t);for (let t = 0; t < e.length; t++) {const i = this.state.maps[e[t]];if (i?.length) return i[0];}}return e;}isMapSelected(t, e) {return this.state.selectedMaps[e] === t;}doesMapHaveProperty(t, e, i, n = !0) {const r = n ? this.getRealAndVirtualDrillPathIds(i) : [i];for (const i of r) if (this.state.maps[i] && this.state.maps[i].some((i) => i[t] === e)) return !0;return !1;}getUniqueMapName(t, e) {return this.forEachDrillPathId(e, (i) => {this.state.maps[i].some((e) => e.name === t) && (t = this.getUniqueMapName(`${t} copy`, e));}), t;}removeMaps(t) {t && t.length ? (t.forEach((t) => {this.state.maps[t] && this.state.maps[t].forEach((t) => {t.parentMapId || this.removeMap(t.id, !1);});}), this.cleanState()) : (this.state.maps = {}, this.state.mapsOrder = {}, this.state.selectedMaps = {});}removeMap(t, e = !0, i = !0) {const n = this.findMapById(t);n && (this.state.maps[n.drillPathId] = this.state.maps[n.drillPathId].filter((e) => e.id !== t), this.getRealDrillPathIds(n.drillPathId).forEach((e) => {this.state.mapsOrder[e] && (this.state.mapsOrder[e] = this.state.mapsOrder[e].filter((e) => e !== t)), this.state.selectedMaps[e] === t && (this.state.selectedMaps[e] = this.state.mapsOrder[e] && this.state.mapsOrder[e][0] || null);}), i && this.removeChildMaps(t), e && this.cleanState(), this.trigger("mapRemoved", t));}removeChildMaps(t) {for (const e in this.state.maps) if (this.state.maps[e]) {const i = this.state.maps[e].find((e) => e.parentMapId === t);i && i.id !== t && this.removeMap(i.id);}}cleanNonLocalSvgMaps() {for (const t in this.state.maps) this.state.maps[t].forEach((e) => {e.location !== n.Local && e.id !== this.state.selectedMaps[t] && this.removeMapContent(e, !1);});}cleanState() {for (const t in this.state.maps) this.state.maps[t].length || delete this.state.maps[t];for (const t in this.state.mapsOrder) this.state.mapsOrder[t].length || delete this.state.mapsOrder[t];for (const t in this.state.selectedMaps) this.state.selectedMaps[t] || delete this.state.selectedMaps[t];}clearSearchIndex() {this.state.searchIndex = null;}createMapFromJsvg(t, e, i, r, s, o = u.Qn.None) {const a = new Date().toISOString(),l = { id: t.id, name: this.getUniqueMapName(t.name, i), location: e, source: t.source, protection: o, created: t.meta?.created || t.meta?.updated || a, updated: t.meta?.updated || a, size: t.meta?.size, jsvg: t };return e !== n.Remote && e !== n.DataField || (l.url = t.source), r && (l.eTag = r), s && (l.path = s), t.dataMapping?.mapSelector && (l.mapSelector = t.dataMapping.mapSelector), t.meta?.author && (l.author = t.meta.author), t.meta?.attribution && (l.attribution = t.meta.attribution), l;}async createMapFromUrl(t, e, i, n, r = !1, s = !1) {const o = await (0, a.bv)(t, r, !0, s);if (!o) return null;const l = await this.jsvgGenerator.createFromString({ content: o, source: t, id: n, sanitize: !0, name: (0, a.aZ)(t) });return this.createMapFromJsvg(l, i, e);}async createMapFromMyStorage(t, e) {const { jsvg: i, header: r } = await this.myStorage.getMapFromUrl(t);return i.meta.created = r.created, i.meta.updated = r.updated, i.meta.size = r.size, this.createMapFromJsvg(i, n.MyStorage, e, r.eTag, r.path, r.protection);}async getBoundMapFromRemote(t, e, i = !1, r = !1) {const s = t.location === n.MyStorage || t.location === n.DataField && (0, a.tO)(t.url);return await (s ? this.createMapFromMyStorage(t.url, e) : this.createMapFromUrl(t.url, e, t.location, t.id, i, r));}createMapFromMapFile(t, e) {const i = { id: t.id, name: this.getUniqueMapName(t.name, e), source: t.source, location: n.MyStorage, protection: t.protection || u.Qn.None, created: t.created, updated: t.updated, size: t.size, eTag: t.eTag, url: t.url };return t.author && (i.author = t.author), t.attribution && (i.attribution = t.attribution), t.jsvg && (i.jsvg = t.jsvg, i.jsvg.dataMapping.mapSelector && (i.mapSelector = i.jsvg.dataMapping.mapSelector)), i;}addMap(t, e, i = !1) {this.state.maps[e] || (this.state.maps[e] = []), this.doesMapHaveProperty("id", t.id, e) || (this.state.maps[e].push(t), this.updateMapsOrder([t.id], e, !0), !i && this.state.selectedMaps[e] || this.selectMap(t.id, e), this.trigger("mapAdded", t));}async addLocalMaps(t, e) {const i = [];let r = this.getMemorySize(n.Local);for (let o = 0; o < t.length; o++) {const a = (0, s.fo)(t[o]) ? await this.jsvgGenerator.createFromFile(t[o]) : this.jsvgGenerator.duplicateJsvg(t[o]);if (r += a.meta.size, r > d.Ay) throw (0, h.T)("TOTAL_LOCAL_MAPS_SIZE_EXCEEDED");t[o] = null;const l = this.createMapFromJsvg(a, n.Local, e);this.addMap(l, e), i.push(l);}return i;}async addRemoteMaps(t, e) {const i = [];for (let r = 0; r < t.length; r++) {const s = t[r],o = await this.createMapFromUrl(s, e, n.Remote);o && (this.addMap(o, e), i.push(o));}return i;}scanMapForChildren(t, e, i) {const s = e.location == n.Local ? "" : (0, a.cb)(e.url);for (let l = 0; l < t.length; l++) {const c = t[l];if (!c.dataPointValue || !c.drillToUrl) continue;let h;if (h = c.drillToUrl.startsWith("http") ? c.drillToUrl : `${c.drillToUrl.startsWith("/") ? new URL(s).origin : s}/${c.drillToUrl}`, (0, a.Gz)(h)) {const t = (0, o.Ln)((0, o.y5)((0, r.drk)((0, o.xv)(i), c.dataPointValue)), 1);if (this.doesMapHaveProperty("url", h, t)) continue;const s = { id: `${e.id}.${(0, r.FxW)(h)}`, name: this.getUniqueMapName((0, a.aZ)(h), t), location: n.Remote, source: h, url: h, protection: u.Qn.None, parentMapId: e.id, autoFetch: c.autoFetch };this.addMap(s, t);}}e.scanned = !0;}async addRemoteMapsFromJson(t, e) {if ((0, s.fo)(t)) {const e = await t.text();t = JSON.parse(e);}if (!(0, s.HI)(t)) throw (0, h.T)("INVALID_JSON");const i = { addedToDefaultDrillPath: [], added: {}, discarded: [] },c = t.filter((t) => (0, a.Gz)(t.url) && !(t.drillPath && !(0, l.Bo)(t.drillPath)) || (i.discarded.push(t.url), !1));for (let t = 0; t < c.length; t++) {const s = c[t],l = s.drillPath ? (0, o.y5)(s.drillPath) : e;if (this.doesMapHaveProperty("url", s.url, l)) continue;const h = { id: (0, r.uRe)(), location: n.Remote, name: this.getUniqueMapName(s.name || (0, a.aZ)(s.url), l), source: s.url, url: s.url, protection: u.Qn.None };s.mapSelector && (h.mapSelector = s.mapSelector), this.addMap(h, l), (l === e || (0, o.Gh)(l, e)) && i.addedToDefaultDrillPath.push(h), i.added[l] || (i.added[l] = []), i.added[l].push(h);}return i;}async updateMapsFromDataField(t) {const e = (0, o.y5)(o.Ap);this.state.maps[e] && (this.state.maps[e] = this.state.maps[e].filter((e) => t.includes(e.url))), t.forEach((t) => {if (!this.doesMapHaveProperty("url", t, e)) {const i = { id: (0, r.FxW)(t), location: n.DataField, name: this.getUniqueMapName((0, a.aZ)(t), e), source: t, url: t, protection: u.Qn.None };this.addMap(i, e);}});}addMyStorageMaps(t, e) {const i = [];for (let n = 0; n < t.length; n++) {const r = this.createMapFromMapFile(t[n], e);r && (this.addMap(r, e), i.push(r));}return i;}renameMap(t, e) {const i = this.findMapById(e);return i && (i.map.updated = new Date().toISOString(), i.map.name = t), i?.map || null;}async updateMap(t, e, i, s) {if (!t) return null;const o = this.findMapById(e);if (o) {const a = { ...o.map, jsvg: t, updated: new Date().toISOString(), scanned: !1, author: t.meta?.author || null, attribution: t.meta?.attribution || null, mapSelector: t.dataMapping?.mapSelector || null };let l = !0;if (a.location === n.Remote) a.parentMapId && (delete a.parentMapId, delete o.map.parentMapId, this.removeMap(e), this.addMap(a, i));else if (a.location === n.MyStorage) {const e = await this.updateMapOnMyStorage(a, t, s);l = !0, a.eTag = e.eTag, a.id = e.id;} else a.location === n.DataField && (l = !1);if (l) {for (const t in a) (0, r.cKq)(a, t) && (o.map[t] = a[t]);this.removeChildMaps(e);}}return o?.map || null;}async updateMapOnMyStorage(t, e, i) {if (!(await this.myStorage?.connect())) throw (0, h.T)("MS_NOT_CONNECTED");return this.myStorage.updateMap({ mapId: t.id, eTag: t.eTag, map: e, attribution: e.meta?.attribution, author: e.meta?.author, ...(i ? { password: i } : {}) });}removeMapContent(t, e = !0) {t.location !== n.Local && (t.location === n.Remote && t.jsvg ? delete t.jsvg.svg : delete t.jsvg, e && this.removeChildMaps(t.id), t.scanned = !1);}async refreshMap(t, e = !1) {const i = this.findMapById(t);if (i) {if (i.map.location === n.Local) return null;const s = i.map.name,o = await this.getBoundMapFromRemote(i.map, i.drillPathId, i.map.autoFetch, e);if (o) {if (o.location === n.Remote && i.map.jsvg) {if (o.jsvg) {if (i.map.jsvg.svg = o.jsvg.svg, i.map.jsvg.rects = o.jsvg.rects, o.jsvg.dataMapping?.areas) for (const t in o.jsvg.dataMapping.areas) i.map.jsvg.dataMapping.areas[t] || (i.map.jsvg.dataMapping.areas[t] = o.jsvg.dataMapping.areas[t]);o.jsvg.meta?.author && (i.map.author = o.jsvg.meta.author, i.map.jsvg.meta.author = o.jsvg.meta.author), o.jsvg.meta?.attribution && (i.map.attribution = o.jsvg.meta.attribution, i.map.jsvg.meta.attribution = o.jsvg.meta.attribution);}} else for (const t in o) (0, r.cKq)(o, t) && (i.map[t] = o[t]);i.map.id = t, i.map.name = s, o.location !== n.Remote && i.map.location !== n.DataField || (i.map.updated = new Date().toISOString()), this.removeChildMaps(t), i.map.scanned = !1;}}return i?.map || null;}updateMapsOrder(t, e, i = !1) {this.getRealDrillPathIds(e).forEach((e) => {(0, o.bb)(e) || this.state.maps[e] && (this.state.mapsOrder[e] || (this.state.mapsOrder[e] = []), this.state.mapsOrder[e] = i ? Array.from(new Set([...this.state.mapsOrder[e], ...t])) : t);});}ensureMapsOrder(t) {if ((0, o.V$)(t) && !this.state.mapsOrder[t]) for (const e in this.state.maps) if ((0, o.Gh)(e, t)) {this.state.mapsOrder[t] = this.state.maps[e].map((t) => t.id), this.state.selectedMaps[t] || (this.state.selectedMaps[t] = this.state.maps[e][0]?.id || null);break;}}selectMap(t, e) {this.getRealDrillPathIds(e).forEach((e) => {this.state.selectedMaps[e] = t;}), t && this.freeMemory();}deselect(t) {this.selectMap(null, t);}forEachDrillPathId(t, e, i = !0) {(i ? this.getRealAndVirtualDrillPathIds(t) : this.getRealDrillPathIds(t)).forEach((t) => {this.state.maps[t] && e(t);});}getRealDrillPathIds(t) {const e = [];if ((0, o.b4)(t)) for (const i in this.state.maps) (0, o.Gh)(t, i) && e.push(i);else e.push(t);return e;}getRealAndVirtualDrillPathIds(t) {return (0, o.b4)(t) ? [...this.getRealDrillPathIds(t), t] : [t, (0, o.Ln)(t)];}}}, 3900: (t, e, i) => {"use strict";function n() {var t = this.parentNode;t && t.removeChild(this);}function r() {return this.each(n);}i.d(e, { A: () => r });}, 3904: (t, e, i) => {"use strict";const n = Symbol("SemVer ANY");class r {static get ANY() {return n;}constructor(t, e) {if (e = s(e), t instanceof r) {if (t.loose === !!e.loose) return t;t = t.value;}t = t.trim().split(/\s+/).join(" "), c("comparator", t, e), this.options = e, this.loose = !!e.loose, this.parse(t), this.semver === n ? this.value = "" : this.value = this.operator + this.semver.version, c("comp", this);}parse(t) {const e = this.options.loose ? o[a.COMPARATORLOOSE] : o[a.COMPARATOR],i = t.match(e);if (!i) throw new TypeError(`Invalid comparator: ${t}`);this.operator = void 0 !== i[1] ? i[1] : "", "=" === this.operator && (this.operator = ""), i[2] ? this.semver = new h(i[2], this.options.loose) : this.semver = n;}toString() {return this.value;}test(t) {if (c("Comparator.test", t, this.options.loose), this.semver === n || t === n) return !0;if ("string" == typeof t) try {t = new h(t, this.options);} catch (t) {return !1;}return l(t, this.operator, this.semver, this.options);}intersects(t, e) {if (!(t instanceof r)) throw new TypeError("a Comparator is required");return "" === this.operator ? "" === this.value || new u(t.value, e).test(this.value) : "" === t.operator ? "" === t.value || new u(this.value, e).test(t.semver) : !((e = s(e)).includePrerelease && ("<0.0.0-0" === this.value || "<0.0.0-0" === t.value) || !e.includePrerelease && (this.value.startsWith("<0.0.0") || t.value.startsWith("<0.0.0")) || (!this.operator.startsWith(">") || !t.operator.startsWith(">")) && (!this.operator.startsWith("<") || !t.operator.startsWith("<")) && (this.semver.version !== t.semver.version || !this.operator.includes("=") || !t.operator.includes("=")) && !(l(this.semver, "<", t.semver, e) && this.operator.startsWith(">") && t.operator.startsWith("<")) && !(l(this.semver, ">", t.semver, e) && this.operator.startsWith("<") && t.operator.startsWith(">")));}}t.exports = r;const s = i(8587),{ safeRe: o, t: a } = i(9718),l = i(2111),c = i(7272),h = i(3908),u = i(8311);}, 3906: (t, e, i) => {"use strict";i.d(e, { O: () => n });class n {visualHostTooltipService;rootElement;handleTouchTimeoutId;abortController;constructor(t, e) {this.visualHostTooltipService = t, this.rootElement = e, this.abortController = new AbortController();}addTooltipToElement(t, e, i) {if (!t || !this.visualHostTooltipService.enabled()) return;const n = this.rootElement;t.addEventListener("mouseover", (t) => {if (!this.canDisplayTooltip(t)) return;const i = t.currentTarget,r = this.getCoordinates(t, n),s = e ? e(i, !0) : null;s && this.visualHostTooltipService.show({ coordinates: r, isTouchEvent: !1, dataItems: s.items, identities: s.selectionIds });}, { signal: this.abortController.signal }), t.addEventListener("mouseout", () => {this.visualHostTooltipService.hide({ isTouchEvent: !1, immediately: !1 });}, { signal: this.abortController.signal }), t.addEventListener("mousemove", (t) => {if (!this.canDisplayTooltip(t)) return;const r = t.currentTarget,s = this.getCoordinates(t, n),o = e ? e(r, i) : null;o && this.visualHostTooltipService.move({ coordinates: s, isTouchEvent: !1, dataItems: o.items, identities: o.selectionIds });}, { signal: this.abortController.signal }), t.addEventListener("touchstart", (t) => {const i = t.currentTarget,r = this.getCoordinates(t, n, !1),s = e ? e(i, !0) : null;s && (this.handleTouchTimeoutId = window.setTimeout(() => {this.visualHostTooltipService.show({ coordinates: r, isTouchEvent: !0, dataItems: s.items, identities: s.selectionIds }), this.handleTouchTimeoutId = null;}, 500));}, { signal: this.abortController.signal }), t.addEventListener("touchend", () => {this.handleTouchTimeoutId && (clearTimeout(this.handleTouchTimeoutId), this.handleTouchTimeoutId = null);}, { signal: this.abortController.signal });}addTooltips(t, e, i, n) {if (!t || !this.visualHostTooltipService.enabled()) return;const r = this.rootElement;t.addEventListener("mouseover", (t) => {if (!this.canDisplayTooltip(t)) return;const n = t.target;if (!n.matches(e)) return void this.visualHostTooltipService.hide({ isTouchEvent: !1, immediately: !1 });const s = this.getCoordinates(t, r),o = i ? i(n, !0) : null;o && this.visualHostTooltipService.show({ coordinates: s, isTouchEvent: !1, dataItems: o.items, identities: o.selectionIds });}, { signal: this.abortController.signal }), t.addEventListener("mousemove", (t) => {if (!this.canDisplayTooltip(t)) return;const s = t.target;if (!s.matches(e)) return void this.visualHostTooltipService.hide({ isTouchEvent: !1, immediately: !1 });const o = this.getCoordinates(t, r),a = i ? i(s, n) : null;a && this.visualHostTooltipService.move({ coordinates: o, isTouchEvent: !1, dataItems: a.items, identities: a.selectionIds });}, { signal: this.abortController.signal }), t.addEventListener("click", () => {this.visualHostTooltipService.hide({ isTouchEvent: !0, immediately: !1 });}), t.addEventListener("touchstart", (t) => {const n = t.target;if (!n.matches(e)) return void this.visualHostTooltipService.hide({ isTouchEvent: !0, immediately: !1 });const s = this.getCoordinates(t, r, !1),o = i ? i(n, !0) : null;o && (this.handleTouchTimeoutId = window.setTimeout(() => {this.visualHostTooltipService.show({ coordinates: s, isTouchEvent: !0, dataItems: o.items, identities: o.selectionIds }), this.handleTouchTimeoutId = null;}, 500));}, { signal: this.abortController.signal }), t.addEventListener("touchend", () => {this.handleTouchTimeoutId && (clearTimeout(this.handleTouchTimeoutId), this.handleTouchTimeoutId = null);}, { signal: this.abortController.signal });}hide() {this.visualHostTooltipService.hide({ immediately: !0, isTouchEvent: !1 });}canDisplayTooltip(t) {let e = !0;return void 0 !== t.buttons && (e = !(0 !== t.buttons)), e = e && null == this.handleTouchTimeoutId, e;}getCoordinates(t, e, i = !0) {if (i) {const i = t.sourceEvent ?? t,n = e.getBoundingClientRect();return [i.clientX - n.left - e.clientLeft, i.clientY - n.top - e.clientTop];}{const e = t;if (!e.touches || !e.touches.length) return;return [e.touches[0].clientX, e.touches[0].clientY];}}destroy() {this.abortController.abort(), this.abortController = null;}}}, 3908: (t, e, i) => {"use strict";const n = i(7272),{ MAX_LENGTH: r, MAX_SAFE_INTEGER: s } = i(6874),{ safeRe: o, t: a } = i(9718),l = i(8587),{ compareIdentifiers: c } = i(1123);class h {constructor(t, e) {if (e = l(e), t instanceof h) {if (t.loose === !!e.loose && t.includePrerelease === !!e.includePrerelease) return t;t = t.version;} else if ("string" != typeof t) throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if (t.length > r) throw new TypeError(`version is longer than ${r} characters`);n("SemVer", t, e), this.options = e, this.loose = !!e.loose, this.includePrerelease = !!e.includePrerelease;const i = t.trim().match(e.loose ? o[a.LOOSE] : o[a.FULL]);if (!i) throw new TypeError(`Invalid Version: ${t}`);if (this.raw = t, this.major = +i[1], this.minor = +i[2], this.patch = +i[3], this.major > s || this.major < 0) throw new TypeError("Invalid major version");if (this.minor > s || this.minor < 0) throw new TypeError("Invalid minor version");if (this.patch > s || this.patch < 0) throw new TypeError("Invalid patch version");i[4] ? this.prerelease = i[4].split(".").map((t) => {if (/^[0-9]+$/.test(t)) {const e = +t;if (e >= 0 && e < s) return e;}return t;}) : this.prerelease = [], this.build = i[5] ? i[5].split(".") : [], this.format();}format() {return this.version = `${this.major}.${this.minor}.${this.patch}`, this.prerelease.length && (this.version += `-${this.prerelease.join(".")}`), this.version;}toString() {return this.version;}compare(t) {if (n("SemVer.compare", this.version, this.options, t), !(t instanceof h)) {if ("string" == typeof t && t === this.version) return 0;t = new h(t, this.options);}return t.version === this.version ? 0 : this.compareMain(t) || this.comparePre(t);}compareMain(t) {return t instanceof h || (t = new h(t, this.options)), this.major < t.major ? -1 : this.major > t.major ? 1 : this.minor < t.minor ? -1 : this.minor > t.minor ? 1 : this.patch < t.patch ? -1 : this.patch > t.patch ? 1 : 0;}comparePre(t) {if (t instanceof h || (t = new h(t, this.options)), this.prerelease.length && !t.prerelease.length) return -1;if (!this.prerelease.length && t.prerelease.length) return 1;if (!this.prerelease.length && !t.prerelease.length) return 0;let e = 0;do {const i = this.prerelease[e],r = t.prerelease[e];if (n("prerelease compare", e, i, r), void 0 === i && void 0 === r) return 0;if (void 0 === r) return 1;if (void 0 === i) return -1;if (i !== r) return c(i, r);} while (++e);}compareBuild(t) {t instanceof h || (t = new h(t, this.options));let e = 0;do {const i = this.build[e],r = t.build[e];if (n("build compare", e, i, r), void 0 === i && void 0 === r) return 0;if (void 0 === r) return 1;if (void 0 === i) return -1;if (i !== r) return c(i, r);} while (++e);}inc(t, e, i) {if (t.startsWith("pre")) {if (!e && !1 === i) throw new Error("invalid increment argument: identifier is empty");if (e) {const t = `-${e}`.match(this.options.loose ? o[a.PRERELEASELOOSE] : o[a.PRERELEASE]);if (!t || t[1] !== e) throw new Error(`invalid identifier: ${e}`);}}switch (t) {case "premajor":this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc("pre", e, i);break;case "preminor":this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc("pre", e, i);break;case "prepatch":this.prerelease.length = 0, this.inc("patch", e, i), this.inc("pre", e, i);break;case "prerelease":0 === this.prerelease.length && this.inc("patch", e, i), this.inc("pre", e, i);break;case "release":if (0 === this.prerelease.length) throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length = 0;break;case "major":0 === this.minor && 0 === this.patch && 0 !== this.prerelease.length || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];break;case "minor":0 === this.patch && 0 !== this.prerelease.length || this.minor++, this.patch = 0, this.prerelease = [];break;case "patch":0 === this.prerelease.length && this.patch++, this.prerelease = [];break;case "pre":{const t = Number(i) ? 1 : 0;if (0 === this.prerelease.length) this.prerelease = [t];else {let n = this.prerelease.length;for (; --n >= 0;) "number" == typeof this.prerelease[n] && (this.prerelease[n]++, n = -2);if (-1 === n) {if (e === this.prerelease.join(".") && !1 === i) throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t);}}if (e) {let n = [e, t];!1 === i && (n = [e]), 0 === c(this.prerelease[0], e) ? isNaN(this.prerelease[1]) && (this.prerelease = n) : this.prerelease = n;}break;}default:throw new Error(`invalid increment argument: ${t}`);}return this.raw = this.format(), this.build.length && (this.raw += `+${this.build.join(".")}`), this;}}t.exports = h;}, 3914: (t, e, i) => {"use strict";i.d(e, { Z: () => n, t: () => I });var n,r = i(72),s = i(3571),o = i(6986),a = i(1807),l = i(7345),c = i(4771),h = i(5367),u = i(3179),d = i(3473),p = i(5457),f = i(3218),g = i(5670),m = i(8358),v = i(2112),y = i(7029),b = i(8862),w = i(2755),x = i(1514),S = i(7077),E = i(6481),C = i(3895),k = i(6684),T = i(4237),A = i(5079),M = i(100),_ = i(3365),P = i(4072),D = i(1299),O = i(8174);!function (t) {t[t.Select = 0] = "Select", t[t.Pan = 1] = "Pan", t[t.ZoomOnArea = 2] = "ZoomOnArea";}(n || (n = {}));class I {element;model;settings;editor;viewportScale;selectionManager;tooltipServiceWrapper;interactive;callbackSelectionIds;ColorRulesEnumerator;isEditMode;isFocusMode;zoomStateManager;licenseManager;controlMode = n.Select;drillPathId;selectedMap;msgBox;placeholder;svgMap;legend;zoomToolbar = {};controlsToolbar = {};currentZoom;labelDesigner;mapsManager;zoomedArea;chart;chartContainer;mapSelectorDropdown;mapContainer;labelsContainer;toolbar;addMapButton;drillPathLabel;selectionToolbar;errorBox;loadingEl;attribution;labels = {};jsPlumb;destroyed = !1;get minZoom() {const t = this.settings.advanced.minZoom.value / 100;return this.isLabelDesignMode ? Math.min(.5, t) : t;}get maxZoom() {const t = this.settings.advanced.maxZoom.value / 100;return this.isLabelDesignMode ? Math.max(100, t) : t;}get isLabelDesignMode() {return this.isEditMode && this.isFocusMode && globalThis.labelDesignerState?.on;}set isLabelDesignMode(t) {this.settings && (this.settings.toolbars.visible = !t, this.settings.legend.visible = !t, this.settings.advanced.groups.find((t) => "advanced.panZoom" == t.name).visible = !t), t ? (globalThis.labelDesignerState = { on: t, nonInFocusSize: this.svgMap?.scale?.naturalSize }, this.clearSelection(), this.isFocusMode ? this.draw() : thisVisual.host.switchFocusModeState(!0)) : globalThis.labelDesignerState = { on: !1 };}constructor(t, e, i, n, r, s, o, a, l, c, h, u, d, p) {this.element = t, this.model = e, this.settings = i, this.editor = n, this.viewportScale = r, this.selectionManager = s, this.tooltipServiceWrapper = o, this.interactive = a, this.callbackSelectionIds = l, this.ColorRulesEnumerator = c, this.isEditMode = h, this.isFocusMode = u, this.zoomStateManager = d, this.licenseManager = p, this.drillPathId = (0, x.y5)(this.model.drillMode.path), this.mapsManager = new C.x({ initialState: { ...this.settings.internal.maps.value, searchIndex: this.getPersistedSearchIndex() } }), this.settings.advanced.persistSearchIndex.value && !this.settings.internal.searchIndex.value && this.persistSearchIndex(), this.mapsManager.jsvgGenerator.imageQuality = this.settings.advanced.imageQuality.value / 100, this.getMyStorageConfig().then((t) => this.mapsManager.myStorage.updateInfo(t)).catch(() => {}), this.licenseManager.on("fetched", async () => this.mapsManager.myStorage.updateInfo(await this.getMyStorageConfig())), this.applyMapField(), this.applyMapSelector(), this.mapsManager.ensureMapsOrder(this.drillPathId), this.selectedMap = this.mapsManager.getSelectedMap(this.drillPathId), this.initLegend();}applyMapField() {if (this.model.compareToPrevious.mapFieldUrlsChanged) {const t = this.mapsManager.getSelectedMap(this.drillPathId)?.id;thisVisualFeatures.remoteMaps && this.mapsManager.updateMapsFromDataField(this.model.mapField ? Object.keys(this.model.mapField.urls) : []), this.settings.advanced.clearSelectionOnMapChange.value && !this.mapsManager.isMapSelected(t, this.drillPathId) && this.selectionManager.clear();}this.model.compareToPrevious.mapFieldChanged && (this.mapsManager.clearSearchIndex(), this.clearPersistedSearchIndex());}applyMapSelector() {const t = !this.settings.advanced.mapSelectorAllowUnassignedMaps.value && !this.filteredMaps.some((t) => t.id == this.mapsManager.getSelectedMap(this.drillPathId)?.id);if (this.model.compareToPrevious.mapSelectorChanged || t) {const t = this.model.mapSelector?.values[0];if (t) {const e = this.mapsManager.findMap((e) => e.mapSelector === t, this.drillPathId);if (e?.map) return this.settings.advanced.clearSelectionOnMapChange.value && this.selectionManager.clear(), void this.mapsManager.selectMap(e.map.id, this.drillPathId);}this.mapsManager.deselect(this.drillPathId);}}get maps() {return this.mapsManager.getDisplayMaps(this.drillPathId);}get filteredMaps() {return this.hasMapSelector ? this.maps.filter((t) => this.model.mapSelector.values.includes(t.mapSelector) || !t.mapSelector && this.settings.advanced.mapSelectorAllowUnassignedMaps.value) : this.maps;}get hasSingleMap() {return 1 === this.maps.length;}get hasMapSelector() {return thisVisualFeatures.mapSelector && this.model.mapSelector;}get toolbarColors() {if (!this._toolbarColors) {const t = this.isLabelDesignMode ? "#F3F2F1" : this.settings.toolbars.backgroundColor.value.value,e = (0, c.dk)(t, this.isLabelDesignMode ? 100 : 100 - this.settings.toolbars.backgroundTransparency.value),i = (0, o.IO)(t);this._toolbarColors = { backgroundColor: e, color: (0, c.w5)(e), selectedColor: (0, o.KY)(i, .8, .2) };}return this._toolbarColors;}_toolbarColors;get isZoomed() {return this.currentZoom && this.currentZoom > this.minZoom;}get isZoomLocked() {return this.settings.advanced.lockZoom.value && !this.isLabelDesignMode;}get isPanLocked() {return this.settings.advanced.lockPan.value && !this.isLabelDesignMode;}get isAutoPanMode() {return this.settings.advanced.autoPanMode.value && !this.isLabelDesignMode;}get isTopToolbarVisible() {return this.isEditMode || this.settings.toolbars.showMapDropdown.value;}get isBottomToolbarVisible() {return this.isZoomToolbarVisible || this.isControlToolbarVisible;}get isZoomToolbarVisible() {return this.isLabelDesignMode || this.settings.toolbars.showZoom.value && (this.settings.toolbars.showZoomButtons.value || this.settings.toolbars.showZoomPercentage.value);}get isControlToolbarVisible() {return this.isLabelDesignMode || this.settings.toolbars.showControls.value && (this.isClearControlVisible || this.isPanControlVisible || this.isZoomOnAreaControlVisible);}get isZoomOnAreaControlVisible() {return !this.isZoomLocked && !this.isLabelDesignMode && this.settings.toolbars.showZoomOnArea.value;}get isClearControlVisible() {return this.settings.toolbars.showClear.value && !this.isLabelDesignMode;}get isPanControlVisible() {return !this.isAutoPanMode && !this.isPanLocked;}get canShowDrillPathLabel() {return thisVisualFeatures.drillDown && this.settings.appearance.showDrillPath.value && (this.settings.appearance.showDrillPathOnFirstLevel.value || !(0, x.zb)(this.model.drillMode.path)) && !this.isLabelDesignMode;}get isDrillPathLabelVisible() {return !(!this.canShowDrillPathLabel || this.selectionToolbar && this.drillPathLabel && (0, E.Uw)([this.selectionToolbar.getBoundingClientRect(), this.drillPathLabel.getBoundingClientRect()]));}get canShowSearch() {return this.settings.toolbars.showMapSearch.value && thisVisual.host.hostCapabilities.allowModalDialog;}updateInterface(t) {this.settings && (this.updateViewportScale(t), this.legend?.updateScale(t), this.svgMap && (this.zoomStateManager.delete(`${this.svgMap.id}-designer`), this.svgMap.updateScale(), this.resizeLabels()), this.drillPathLabel && (this.drillPathLabel.style.visibility = this.isDrillPathLabelVisible ? "visible" : "hidden"), this.filteredMaps.length && this.drawAttribution());}updateViewportScale(t) {this.viewportScale = t, this.element.querySelectorAll(".scalable").forEach((t) => {this.scale(t);}), this.adjustMarginForToolbarOverlap(), this.labelDesigner?.updateViewportScale(t);}adjustMarginForToolbarOverlap() {let t = 0,e = 0;this.isLabelDesignMode || this.settings.toolbars.overlap.value || ((this.isTopToolbarVisible || this.canShowDrillPathLabel) && (t = (30 + this.settings.toolbars.topMargin.value) / this.viewportScale), this.isBottomToolbarVisible && (e = 30 / this.viewportScale));const i = this.chart.firstElementChild;i.style.marginTop = `${t}px`, i.style.marginBottom = `${e}px`;}async getMyStorageConfig() {const t = { id: null, region: null, displayRegion: null, readKey: null, editKey: null, encryptionKey: null };return this.settings && (this.licenseManager?.status?.license?.attributes?.myStorage && (t.id = this.licenseManager.status.license.attributes.myStorage.id, t.readKey = this.licenseManager.status.license.attributes.myStorage.readKey, t.region = this.licenseManager.status.license.region, t.displayRegion = this.licenseManager.status.license.displayRegion), !this.settings?.myStorage?.saveEditKey.value && this.settings.internal.msek.value && a.XI0.SAVE({ objectName: "internal", properties: { [M.rv]: null, update: Date.now().toString() }, selector: null }), t.encryptionKey = this.settings?.myStorage?.encryptionKey.value, t.editKey = this.settings.internal.msek.value || (await (0, a.vxu)(thisVisual.host.storageV2Service, M.rv))), t;}initLegend() {this.legend && this.legend.destroy();const t = this.settings.legend.position.value.value,e = "top" == t || "bottom" == t ? this.settings.legend.alignment.value : "top" == this.settings.legend.verticalAlignment.value ? "left" : "bottom" == this.settings.legend.verticalAlignment.value ? "right" : "center";this.legend = new a.bOl({ column: this.model.legendField, userSettings: this.settings.legend.custom.value, staticItems: this.getStaticLegendItems(), position: t, alignment: e, isEditable: this.isEditMode, isInteractive: this.interactive, showTitle: this.settings.legend.showTitle.value, maxItems: this.settings.legend.maxItems.value, titlePosition: this.settings.legend.titleInline.value || "left" == t || "right" == t ? "inline" : "top", title: this.settings.legend.titleText.value, titleFont: { size: A.fromPointToPixel(this.settings.legend.titleFont.fontSize.value), family: this.settings.legend.titleFont.fontFamily.value, bold: this.settings.legend.titleFont.bold.value, italic: this.settings.legend.titleFont.italic.value, underline: this.settings.legend.titleFont.underline.value }, titleColor: this.settings.legend.titleColor.value.value, ...(this.settings.legend.iconAutoSize.value ? {} : { itemsIconSize: A.fromPointToPixel(this.settings.legend.iconSize.value) }), itemsWordWrap: this.settings.legend.wordWrap.value, itemsFont: { size: A.fromPointToPixel(this.settings.legend.font.fontSize.value), family: this.settings.legend.font.fontFamily.value, bold: this.settings.legend.font.bold.value, italic: this.settings.legend.font.italic.value, underline: this.settings.legend.font.underline.value }, itemsLabelColor: this.settings.legend.color.value.value, ...("fixed" == this.settings.legend.legendSizeType.value.value ? { showScrollbar: this.settings.legend.showScrollbar.value, size: this.settings.legend.legendSize.value } : {}), ...("max" == this.settings.legend.legendSizeType.value.value ? { showScrollbar: this.settings.legend.showScrollbar.value, maxSize: this.settings.legend.legendSize.value } : {}), ...("fixed" == this.settings.legend.itemSizeType.value.value ? { itemsSize: this.settings.legend.itemSize.value } : {}), ...("max" == this.settings.legend.itemSizeType.value.value ? { itemsMaxSize: this.settings.legend.itemSize.value } : {}), onItemClick: () => {const t = this.selectionManager.getSelectionIds();this.selectAreasBySelectionIds(t);} }, this.selectionManager), this.settings.legend.showDialog.value && this.legend.showDialog();}getStaticLegendItems() {const t = [],e = (e, i, n, r) => {const s = "custom" === i;if ((s || "greyscale" === i) && n) {const i = { key: e, label: n, color: s ? r?.value : "#808080", static: !0 };t.push(i);}};if (!this.model.legendField && this.model.fields?.[u.Xh.Category]?.length) {const t = this.model.fields[u.Xh.Category][this.model.fields[u.Xh.Category].length - 1];e("_matched", this.settings.areas.matchedColorType.value.value, t.source.displayName, this.settings.areas.matchedColor.value);}return e("_unmatched", this.settings.areas.unmatchedColorType.value.value, "Unmatched", this.settings.areas.unmatchedColor.value), e("_unbound", this.settings.areas.unboundColorType.value.value, "Unbound", this.settings.areas.unboundColor.value), thisVisualFeatures.colorRules && this.ColorRulesEnumerator && t.push(...this.ColorRulesEnumerator.getLegendItems()), t;}async draw() {if (this.element.querySelectorAll(".chart, .legend").forEach((t) => t.remove()), this.placeholder && this.placeholder.destroy(), this.chart = (0, a.tTh)(".chart", this.element, [(0, a.tTh)(".chart-toolbar-container", [...(this.isLabelDesignMode ? [(0, a.tTh)(".label-designer-panel", { style: { width: `${_.b}px` } })] : []), (0, a.tTh)(".chart-container", { middleware: (t) => this.chartContainer = t })])]), this.canDraw()) if (this.maps.length) {this.adjustMarginForToolbarOverlap();const t = this.filteredMaps;if ((0, a.tTh)(".loading", this.chartContainer, { middleware: (t) => {this.loadingEl = t;} }, [(0, a.tTh)(".loader")]), 1 != t.length || this.isEditMode || this.canShowSearch ? this.drawTopToolbar() : this.drawMapTitle(), this.drawDrillPathLabel(), t.length) {if (await this.ensureMapContent()) {if (this.destroyed) return;this.drawLegend(), this.drawMap(), this.drawBottomToolbar(), this.drawAttribution(), this.drawLabelDesigner();}} else this.raiseError((0, l.T)("NO_SELECTOR_MAPS"));this.loadingEl?.remove();} else this.isEditMode && this.drawAddMapButton(), this.drawDrillPathLabel(), this.settings.appearance.showPlaceholder.value && (this.placeholder = new r.S(this.chartContainer, this.model, this.settings, this.isEditMode, this.selectionManager, this.callbackSelectionIds), this.placeholder.draw());}canDraw() {return this.model.fields[u.Xh.Category]?.length ? this.model.drillMode.movedToNextLevel ? (this.raiseError((0, l.T)("INVALID_LEVEL")), !1) : this.model.drillMode.invalidLegendField ? (this.raiseError((0, l.T)("INVALID_LEGEND")), !1) : !(!this.model.drillMode.path.length || !this.model.dataPoints.length) || (this.raiseError((0, l.T)("BLANK")), !1) : (this.raiseError((0, l.T)("MISSING_CATEGORY")), !1);}drawLegend() {this.settings?.legend?.show?.value && !this.isLabelDesignMode && this.legend.draw(this.element, this.viewportScale);}drawMap() {this.mapContainer?.remove(), this.addMapButton?.remove(), this.svgMap?.destroy(), this.loadingEl?.remove(), this.mapContainer = (0, a.tTh)(".svg-container.zoomable.center" + (this.isLabelDesignMode ? ".label-designer" : ""), this.chartContainer), this.labelsContainer = (0, a.tTh)(".labels-container", this.mapContainer), this.updateMapBlur();const t = this.zoomStateManager?.get(`${this.selectedMap.id}${this.isLabelDesignMode ? "-designer" : ""}`);if (this.currentZoom = t?.zoom, this.svgMap = new p.F({ mapArea: this.mapContainer, context: "chart", jsvg: this.selectedMap.jsvg, model: this.model, settings: this.settings, tooltipServiceWrapper: this.isLabelDesignMode ? null : this.tooltipServiceWrapper, mapFieldUrl: this.model.mapField ? this.selectedMap.url : null, zoomer: !0, zoomerConfig: { container: this.chartContainer, minZoom: this.minZoom, maxZoom: this.maxZoom, zoomState: t, panMode: this.controlMode === n.Pan, autoPan: this.isAutoPanMode, lockZoom: this.isZoomLocked, lockPan: this.isPanLocked }, colorRulesEnumerator: thisVisualFeatures.colorRules ? this.ColorRulesEnumerator : null, legendManager: this.legend }), this.svgMap.on("zoom", (t) => {this.zoomedArea && (this.zoomedArea.level ? t.zoom < this.zoomedArea.level && this.resetZoomedArea() : this.zoomedArea.level = t.zoom), this.currentZoom = t.zoom, this.updateZoomToolbar(), this.togglePanningIcon(), this.zoomStateManager.add(`${this.selectedMap?.id}${this.isLabelDesignMode ? "-designer" : ""}`, t);}), this.svgMap.draw(), this.settings.appearance.keepAspectRatio.value || this.svgMap.map.setAttribute("preserveAspectRatio", "none"), this.applyLabelDesignerLabelsScale(), this.drawLabels(), this.settings.accessibility.highlightOnHover.value && (this.mapContainer.classList.add("highlight-on-hover"), this.mapContainer.addLiveEventListener("mouseover", ".map-element.matched", (t, e) => {const i = getComputedStyle(e)?.fill;e.classList.add(i && (0, c.cP)(i) ? "dark" : "light");}), this.mapContainer.addLiveEventListener("mouseout", ".map-element.matched", (t, e) => {e.classList.remove("dark", "light");})), this.interactive) {if (this.callbackSelectionIds && this.callbackSelectionIds.length) this.selectAreasBySelectionIds(this.callbackSelectionIds);else {const t = this.selectionManager.getSelectionIds();t.length && this.selectAreasBySelectionIds(t);}this.svgMap.map.addEventListener("mouseup", (t) => this.handleAreaClick(t), !0), this.svgMap.map.addEventListener("contextmenu", (t) => {this.handleAreaRightClick(t);});}this.settings.advanced.autoZoomMode.value?.value && this.model.compareToPrevious.dataPointsChanged && this.autoZoomOnMatchedAreas(this.settings.advanced.autoZoomMode.value.value == d.Yw.Single), thisVisualFeatures.childMaps && thisVisualFeatures.remoteMaps && window.setTimeout(() => this.scanMap(), 100);}updateMapBlur() {if (!this.selectedMap || !this.mapContainer) return;let t = !1;this.isLabelDesignMode || (thisVisualFeatures.remoteMaps || this.selectedMap.location != C.k.Remote && this.selectedMap.location != C.k.DataField) && (thisVisualFeatures.myStorageMaps || this.selectedMap.location != C.k.MyStorage) || (t = !0), this.mapContainer.classList.toggle("blur", t);}drawLabelDesigner() {this.labelDesigner && (this.labelDesigner.destroy(), this.labelDesigner = null), (0, m.VI)(), this.isLabelDesignMode ? this.labelDesigner = new m.wf(this.labels, this.svgMap, this.mapContainer, this.settings, this.viewportScale) : this.isLabelDesignMode = !1;}applyLabelDesignerLabelsScale() {if (!this.isLabelDesignMode || !globalThis.labelDesignerState.nonInFocusSize || !this.svgMap?.scale) return;const t = globalThis.labelDesignerState.nonInFocusSize.width / this.svgMap.scale.naturalSize.width,e = globalThis.labelDesignerState.nonInFocusSize.height / this.svgMap.scale.naturalSize.height,i = 1 / Math.min(t, e);1 != i && ((0, E.XB)(this.svgMap.map, i), this.svgMap.updateScale(), globalThis.labelDesignerState.zoomed || (this.svgMap.zoomer.zoomTo(i, !0), globalThis.labelDesignerState.zoomed = !0), (0, a.tTh)(".labels-container-canvas", this.labelsContainer, { style: { width: 100 / i + "%", height: 100 / i + "%", left: (100 - 100 / i) / 2 + "%", top: (100 - 100 / i) / 2 + "%" } }));}autoZoomOnMatchedAreas(t) {if (!this.svgMap || !this.svgMap.map || !this.svgMap.zoomer) return;if (t && this.model.dataPoints.length > 1) return;const e = Array.from(this.svgMap.map.querySelectorAll(".map-element.matched.pointer"));if (e && (this.resetZoomedArea(), this.svgMap?.zoomer?.zoomOnArea(e, this.settings?.advanced?.zoomFit?.value), 1 === e.length)) {const t = e[0];t.classList.add("zoomed"), this.zoomedArea = { element: t };}}drawAttribution() {if (this.attribution && this.attribution.remove(), !this.settings.appearance.showAttribution.value) return;const t = this.selectedMap;if (!t || !t.attribution) return;this.attribution = (0, a.tTh)(".attribution", this.chart);const e = document.createElementNS(E.UG, "svg");this.attribution.appendChild(e);const i = document.createElementNS(E.UG, "text");if (i.textContent = t.attribution, i.setAttribute("x", "100%"), i.setAttribute("y", "100%"), e.appendChild(i), i.style.setProperty("text-anchor", "end", "important"), i.style.setProperty("alignment-baseline", "text-after-edge", "important"), i.style.setProperty("fill", this.settings.appearance.attributionColor.value.value, "important"), i.style.setProperty("font-family", this.settings.appearance.attributionFont.fontFamily.value, "important"), i.style.setProperty("font-size", A.fromPoint(this.settings.appearance.attributionFont.fontSize.value), "important"), this.settings.appearance.attributionFont.bold.value && i.style.setProperty("font-weight", "bold", "important"), this.settings.appearance.attributionFont.italic.value && i.style.setProperty("font-style", "italic", "important"), this.settings.appearance.attributionFont.underline.value && i.style.setProperty("text-decoration", "underline", "important"), i.style.setProperty("text-rendering", "optimizeLegibility", "important"), this.settings.appearance.attributionStroke.value) {const t = this.settings.appearance.attributionFont.fontSize.value / 30 * this.settings.appearance.attributionStrokeWidth.value,e = this.settings.appearance.attributionStrokeFill.value?.value ?? (0, a.sP2)(this.settings.appearance.attributionColor.value.value, 1);i.setAttribute("stroke", e), i.setAttribute("stroke-width", t.toString()), i.setAttribute("stroke-opacity", (1 - this.settings.appearance.attributionStrokeTransparency.value / 100).toString()), i.setAttribute("stroke-linejoin", "round"), i.setAttribute("paint-order", "stroke");}}drawAddMapButton() {if (!thisVisualFeatures.mapDialog) return;let t;const e = this.mapsManager.isEmpty,i = e ? ".center" : ".top",n = e ? "" : ".small",r = (0, a.tTh)(`.synoptic-btn.add-map-btn.fixed.scalable.ctrl${i}${n}`, this.chart, { style: { marginTop: e ? "0" : `${this.settings.toolbars.topMargin.value}px` }, middleware: (t) => {this.addMapButton = t;} }, [(0, a.tTh)(`.group${n}`, { events: { click: (t) => this.showAddMapContextMenu(t) }, middleware: (e) => {t = e;} }, [(0, a.tTh)(`.icon.icon-plus${n}`), (0, a.tTh)(`span.text${n}`, "Add Map")])]);if (this.scale(r), e) (0, a.vm6)(r, "translate(-50%, -50%)"), (0, a.tTh)(".icon.icon-help.ctrl.spaced", t, { events: { click: () => {thisVisual.host.launchUrl(D.tl.docsGetStarted);} } });else {const t = (0, a.tTh)(".toolbar.pinned.top.maps-manager-btn.scalable", this.chart, { style: { marginTop: `${this.settings.toolbars.topMargin.value}px` } }, [(0, a.tTh)(".group.full.default", [(0, a.tTh)(".icon.icon-layers.full", { events: { click: (t) => {t.preventDefault(), this.openDialog({ viewType: "DialogManager" });} } })])]);t.style.transformOrigin = "-93px top", this.scale(t), r.style.transformOrigin = "top left";}}showAddMapContextMenu(t) {t.target.classList.contains("icon-help") || a.tzH.Init("chart-add-map-context-menu", { sticky: t.currentTarget, width: "auto", scale: this.viewportScale, items: [{ label: "Local Map", icon: "folder", onClick: () => this.openLocalMapDialog() }, { label: "Remote Map", enabled: thisVisualFeatures.remoteMaps, icon: "world", onClick: () => this.openDialog({ viewType: "DialogAdd", viewState: y.L.AddRemoteMap }) }, { label: "My Storage Map", enabled: thisVisualFeatures.myStorageMaps, icon: "okviz-storage", onClick: () => this.openDialog({ viewType: "DialogAdd", viewState: y.L.AddMyStorageMap }) }, { type: a.KGh.Separator }, { label: "Import URLs", icon: "upload", enabled: thisVisualFeatures.remoteMaps, onClick: () => this.openImportURLsDialog() }] }).show(t);}async openLocalMapDialog() {const t = await k.g.browseFiles(h.k$, !0);if (!t || !t.length) return;(0, O.KN)();const e = [];try {let i = this.mapsManager.getMemorySize(C.k.Local);for (let n = 0; n < t.length; n++) {let r = t[n];(0, O.Uu)(r.name, [n + 1, t.length]);const o = await this.mapsManager.jsvgGenerator.createFromFile(r);if (i += o.meta.size, r = null, i > D.Ay) {await this.mapsManager.addLocalMaps(e, this.drillPathId);const t = (0, l.T)("TOTAL_LOCAL_MAPS_SIZE_EXCEEDED"),i = new s.z({ error: t, scale: this.viewportScale, showCode: this.isEditMode });return await i.render(), void this.persistInternalMaps();}e.push(o), await (0, a.ukR)(500);}this.openDialog({ viewType: "DialogAdd", viewState: y.L.AddLocalMap, addOptions: { jsvgsToSave: e } });} catch (t) {const e = new s.z({ error: t, scale: this.viewportScale, showCode: this.isEditMode }),i = await e.render();"link" == i.type && thisVisual.host.launchUrl(i.url);} finally {(0, O.hy)();}}async openImportURLsDialog() {const t = await k.g.browseFiles(["application/json"]);if (t && t.length) try {const e = await t[0].text();this.openDialog({ viewType: "DialogAdd", viewState: y.L.ImportUrls, addOptions: { importURLs: JSON.parse(e) } });} catch (t) {const e = new s.z({ error: t, scale: this.viewportScale, showCode: this.isEditMode }),i = await e.render();"link" == i.type && thisVisual.host.launchUrl(i.url);}}drawMapTitle() {if (this.settings.appearance.showTitle.value) {const t = this.filteredMaps[0];(0, a.tTh)(".map-title.pinned", this.chart, { style: { color: this.settings.appearance.titleColor.value.value } }, t.location == C.k.DataField && this.settings.advanced.mapFieldShowFullUrls.value ? (0, T.eA)(t.url) : t.name);}}drawDrillPathLabel() {if (!this.canShowDrillPathLabel) return;const t = (0, x.pT)(this.model.drillMode.path);this.drillPathLabel = (0, a.tTh)(".toolbar.show-on-hover.pinned.top.right.scalable.behind", { attr: { title: `Drill Path: ${t}` }, style: { transformOrigin: "top right", marginTop: this.settings.toolbars.topMargin.value + "px" } });const e = (0, a.tTh)(".group.subset-marker", [(0, a.tTh)(".icon.icon-branch.marker.big")]),i = 1 === this.model.drillMode.path.length,n = this.model.drillMode.path.slice(-2);n.forEach((t, r) => {const s = 0 === r,o = (0, a.tTh)("span.subset-level" + (s && !i ? ".drill-up" : ""), { events: { click: (t) => {t.preventDefault(), s && !i && this.drillUp();} } }, t);if (s && !i && (o.title = "Drill Up To: " + t), this.model.drillMode.path.length > 2 && s && ((0, a.tTh)("span.subset-level", e, "..."), (0, a.tTh)(".icon.icon-right.small.marker", e)), e.appendChild(o), r < n.length - 1) {const t = (0, a.tTh)(".icon.icon-right.small.marker");e.appendChild(t);}}), this.drillPathLabel.appendChild(e), this.chart.appendChild(this.drillPathLabel), this.scale(this.drillPathLabel), this.isDrillPathLabelVisible || (this.drillPathLabel.style.visibility = "hidden");}drillUp() {const t = { roleName: u.Xh.Category, drillType: 1 };thisVisual.host.drill(t);}drawBottomToolbar() {if (!this.isBottomToolbarVisible) return;const t = this.isLabelDesignMode || this.settings.toolbars.pin.value ? ".pinned" : "";this.toolbar = (0, a.tTh)(`.toolbar.show-on-hover.bottom.left.scalable${t}`, this.chart, { events: { mouseenter: () => this.tooltipServiceWrapper?.hide() } }), this.isLabelDesignMode && (this.toolbar.style.left = `${_.b + 10}px`), this.isZoomToolbarVisible && this.drawZoomToolbar(), this.isControlToolbarVisible && this.drawControlsToolbar(), this.toolbar.style.transformOrigin = "bottom left", this.scale(this.toolbar);}drawZoomToolbar() {if (this.isZoomLocked) return;const t = this.currentZoom >= this.maxZoom ? ".disabled" : "",e = this.isZoomed ? "" : ".disabled",i = 1 == this.currentZoom ? ".disabled" : "";(0, a.tTh)(".group.zoom", this.toolbar, { style: { ...this.toolbarColors } }, [...(this.settings.toolbars.showZoomButtons.value ? [(0, a.tTh)(`.icon.icon-minus${e}`, { attr: { title: "Reduce Zoom" }, middleware: (t) => this.zoomToolbar.minus = t, events: { click: (t) => {t.preventDefault(), this.isZoomLocked || this.svgMap?.zoomer.zoomOut();}, mouseenter: (t, e) => {this.onIconEnter(e);}, mouseleave: (t, e) => {this.onIconLeave(e);} } })] : []), ...(this.settings.toolbars.showZoomPercentage.value ? [(0, a.tTh)("span.zoom-state", { attr: { title: `Zoom: ${Math.round(100 * this.currentZoom)}%` }, middleware: (t) => this.zoomToolbar.percentage = t }, `${Math.round(100 * this.currentZoom)}%`)] : []), ...(this.settings.toolbars.showZoomButtons.value ? [(0, a.tTh)(`.icon.icon-plus${t}`, { attr: { title: "Increase Zoom" }, middleware: (t) => this.zoomToolbar.plus = t, events: { click: (t) => {t.preventDefault(), this.isZoomLocked || this.svgMap?.zoomer.zoomIn();}, mouseenter: (t, e) => {this.onIconEnter(e);}, mouseleave: (t, e) => {this.onIconLeave(e);} } }), (0, a.tTh)(`.icon.icon-actual-size.big${i}`, { attr: { title: "Reset Zoom and Center" }, middleware: (t) => this.zoomToolbar.reset = t, events: { click: (t) => {t.preventDefault(), this.isZoomLocked || (this.svgMap?.zoomer.resetZoom(), this.resetZoomedArea());}, mouseenter: (t, e) => {this.onIconEnter(e);}, mouseleave: (t, e) => {this.onIconLeave(e);} } })] : [])]);}drawControlsToolbar() {const t = (0, a.tTh)(".group", this.toolbar, { style: { ...this.toolbarColors } });if ((this.isPanControlVisible || this.isZoomOnAreaControlVisible) && (0, a.tTh)(".icon.icon-tool-pointer.selected", t, { style: { backgroundColor: this.toolbarColors.selectedColor }, attr: { title: "Select Area" }, middleware: (t) => this.controlsToolbar.select = t, events: { click: (t) => {t.preventDefault(), this.changeControlMode(n.Select);}, mouseenter: (t, e) => {this.onIconEnter(e);}, mouseleave: (t, e) => {this.onIconLeave(e);} } }), this.isPanControlVisible && (0, a.tTh)(".icon.icon-tool-hand" + (this.isZoomed ? "" : ".disabled"), t, { attr: { title: "Drag Map" }, middleware: (t) => this.controlsToolbar.pan = t, events: { click: (t) => {t.preventDefault(), this.changeControlMode(n.Pan);}, mouseenter: (t, e) => {this.onIconEnter(e);}, mouseleave: (t, e) => {this.onIconLeave(e);} } }), this.isZoomOnAreaControlVisible && (0, a.tTh)(".icon.icon-zoom-in.big", t, { attr: { title: "Zoom on Element" }, middleware: (t) => this.controlsToolbar.zoomOnArea = t, events: { click: (t) => {t.preventDefault(), this.changeControlMode(n.ZoomOnArea);}, mouseenter: (t, e) => {this.onIconEnter(e);}, mouseleave: (t, e) => {this.onIconLeave(e);} } }), this.isClearControlVisible) {const e = !this.isZoomOnAreaControlVisible && !this.isPanControlVisible;e || (0, a.tTh)("span.divider", t), (0, a.tTh)(`.icon.icon-clear${e ? "" : ".spaced"}${this.selectionManager.hasSelection() ? "" : ".disabled"}`, t, { attr: { title: "Clear Selection" }, middleware: (t) => this.controlsToolbar.clear = t, events: { click: (t) => {t.preventDefault(), this.clearSelection();}, mouseenter: (t, e) => {this.onIconEnter(e);}, mouseleave: (t, e) => {this.onIconLeave(e);} } });}}drawTopToolbar() {if (!this.isTopToolbarVisible) return;let t;const e = this.settings.toolbars.pin.value || this.isLabelDesignMode ? ".pinned" : "",i = this.isEditMode ? "" : ".reading-view";this.selectionToolbar = (0, a.tTh)(`.toolbar.show-on-hover.top.left.scalable${e}`, { style: { marginTop: this.settings.toolbars.topMargin.value + "px" }, events: { mouseenter: () => this.tooltipServiceWrapper?.hide() } }, [(0, a.tTh)(`.group${i}`, { style: { ...this.toolbarColors }, middleware: (e) => {t = e;} })]);let n = !1;const r = () => {n || (n = !0, (0, a.tTh)("span.divider", t));};this.isLabelDesignMode && (this.selectionToolbar.style.left = `${_.b + 10}px`), (0, a.tTh)("select", t, { style: { color: this.toolbarColors.color }, middleware: (t) => {this.mapSelectorDropdown = t;}, list: this.getMapDropdownItems(), events: { change: (t) => this.handleSelectChange(t) } }), this.isEditMode && !this.isLabelDesignMode && (thisVisualFeatures.mapDialog && (r(), (0, a.tTh)(".icon.icon-edit", t, { attr: { title: "Add or Edit Maps" }, events: { click: (t, e) => {t.preventDefault(), e.classList.contains("disabled") || this.openDialog({ viewType: "DialogAdd", viewState: y.L.Default });}, mouseenter: (t, e) => this.onIconEnter(e), mouseleave: (t, e) => this.onIconLeave(e) } }), (0, a.tTh)(".icon.icon-layers", t, { attr: { title: "Manage Maps" }, events: { click: (t, e) => {t.preventDefault(), e.classList.contains("disabled") || this.openDialog({ viewType: "DialogManager" });}, mouseenter: (t, e) => this.onIconEnter(e), mouseleave: (t, e) => this.onIconLeave(e) } })), (this.settings.categoryLabels.show.value || this.settings.dataLabels.show.value) && (0, a.tTh)(".group.full", this.selectionToolbar, { style: { ...this.toolbarColors } }, [(0, a.tTh)(".icon.icon-edit2.full" + (this.isFocusMode ? ".disabled" : ""), { attr: { title: "Customize Labels" + (this.isFocusMode ? " (Exit Focus Mode to Continue)" : "") }, events: { click: (t, e) => {t.preventDefault(), e.classList.contains("disabled") || (this.isLabelDesignMode = !0);}, mouseenter: (t, e) => this.onIconEnter(e), mouseleave: (t, e) => this.onIconLeave(e) } })]), thisVisualFeatures.colorRules && (0, a.tTh)(".group.full", this.selectionToolbar, { style: { ...this.toolbarColors } }, [(0, a.tTh)(".icon.icon-theme.full", { attr: { title: "Color Rules" }, events: { click: (t) => {t.preventDefault(), this.editor.show();}, mouseenter: (t, e) => this.onIconEnter(e), mouseleave: (t, e) => this.onIconLeave(e) } })]), thisVisualFeatures.myStorageMaps && this.model.mapField && (r(), (0, a.tTh)(".icon.icon-okviz-storage", t, { attr: { title: "My Storage" }, events: { click: (t, e) => {t.preventDefault(), e.classList.contains("disabled") || this.openDialog({ viewType: "DialogAdd", viewState: y.L.MyStorage });}, mouseenter: (t, e) => this.onIconEnter(e), mouseleave: (t, e) => this.onIconLeave(e) } }))), this.canShowSearch && (r(), (0, a.tTh)(".icon.icon-search", t, { attr: { title: "Search Map" }, events: { click: (t, e) => {t.preventDefault(), e.classList.contains("disabled") || this.openDialog({ viewType: "DialogSearch", addOptions: { canSelectMapWithoutSelector: this.settings.advanced.mapSelectorAllowUnassignedMaps.value } });}, mouseenter: (t, e) => this.onIconEnter(e), mouseleave: (t, e) => this.onIconLeave(e) } })), this.chart.appendChild(this.selectionToolbar), this.scale(this.selectionToolbar);}getMapDropdownItems() {const t = [];for (let e = 0; e < this.filteredMaps.length; e++) {const i = this.filteredMaps[e];t.push({ text: i.location == C.k.DataField && this.settings.advanced.mapFieldShowFullUrls.value ? (0, T.eA)(i.url) : i.name, value: i.id, selected: this.mapsManager.isMapSelected(i.id, this.drillPathId) });}return this.hasMapSelector && !t.length && t.push({ text: "No maps available", value: "", selected: !0 }), t;}updateZoomToolbar() {this.currentZoom && this.zoomToolbar && this.isZoomToolbarVisible && (this.zoomToolbar?.minus && (this.zoomToolbar.minus.classList.toggle("disabled", !this.isZoomed), this.isZoomed || (this.zoomToolbar.minus.style.backgroundColor = "")), this.zoomToolbar?.plus && (this.zoomToolbar.plus.classList.toggle("disabled", this.currentZoom >= this.maxZoom), this.currentZoom >= this.maxZoom && (this.zoomToolbar.plus.style.backgroundColor = "")), this.zoomToolbar?.percentage && (this.zoomToolbar.percentage.textContent = `${Math.round(100 * this.currentZoom)}%`, this.zoomToolbar.percentage.title = `Zoom: ${Math.round(100 * this.currentZoom)}%`), this.zoomToolbar?.reset && this.zoomToolbar.reset.classList.toggle("disabled", 1 == this.currentZoom));}togglePanningIcon() {this.controlsToolbar && this.currentZoom && this.isControlToolbarVisible && (this.isZoomed || this.controlMode !== n.Pan || this.changeControlMode(n.Select), this.controlsToolbar.pan?.classList.toggle("disabled", !this.isZoomed));}changeControlMode(t) {if (this.isZoomed || t !== n.Pan) {if (this.controlMode = t, this.controlsToolbar) switch (this.resetControlToolbar(), t) {case n.Select:this.controlsToolbar.select.classList.toggle("selected", !0), this.controlsToolbar.select.style.backgroundColor = this.toolbarColors.selectedColor;break;case n.Pan:this.controlsToolbar.pan.classList.toggle("selected", !0), this.controlsToolbar.pan.style.backgroundColor = this.toolbarColors.selectedColor;break;case n.ZoomOnArea:this.controlsToolbar.zoomOnArea.classList.toggle("selected", !0), this.mapContainer.classList.add("zoom-on-area"), this.controlsToolbar.zoomOnArea.style.backgroundColor = this.toolbarColors.selectedColor;}t !== n.ZoomOnArea && this.mapContainer.classList.remove("zoom-on-area"), this.svgMap?.zoomer?.togglePanMode(t === n.Pan);}}resetZoomedArea() {this.zoomedArea && (this.zoomedArea.element?.classList.remove("zoomed"), this.zoomedArea = null);}resetControlToolbar() {this.controlsToolbar && Object.keys(this.controlsToolbar).forEach((t) => {"clear" !== t && (this.controlsToolbar[t].classList.remove("selected"), this.controlsToolbar[t].style.backgroundColor = "");});}onIconEnter(t) {t.classList.contains("selected") || t.classList.contains("disabled") || (t.style.backgroundColor = this.toolbarColors.selectedColor);}onIconLeave(t) {t.classList.contains("selected") || (t.style.backgroundColor = "");}scale(t) {(0, a.vm6)(t, `scale(${1 / this.viewportScale})`);}raiseError(t, e) {this.errorBox && this.errorBox.remove();const i = t.icon || "alert";(0, a.tTh)(".error", this.chartContainer, { middleware: (t) => {this.errorBox = t;} }, [(0, a.tTh)(".message", [(0, a.tTh)(`.icon.icon-${i}`), (0, a.tTh)("span.title", `${t.title}`.trim()), (0, a.tTh)("span.description", t.description), ...(t.helpUrl ? [(0, a.tTh)("a.learn-more", { events: { click: () => thisVisual.host.launchUrl(t.helpUrl) } }, "Learn more")] : []), ...(e ? [(0, a.tTh)("a.redraw", { events: { click: () => e() } }, "Refresh")] : [])])]);}scanMap() {if (!this.settings) return;if ((0, d.Dh)(this.settings)) return;if (!this.svgMap?.map) return;if (this.selectedMap.scanned) return;let t = !1;if (this.selectedMap.location != C.k.Local) {const e = this.settings.drill.autoFetchMode.value.value;"id" == e ? t = !0 : "auto" == e && (t = (0, S.yl)(this.svgMap.map.getAttribute(h.Lc.AutoFetch)));}const e = t ? `[${h.Lc.Matched}],[${h.Lc.GroupMatched}]` : `[${h.Lc.Matched}][${h.Lc.DrillTo}],[${h.Lc.GroupMatched}][${h.Lc.DrillTo}]`,i = this.svgMap.map.querySelectorAll(e);if (!i) return !0;const n = [];i.forEach((e) => {const i = e.getAttribute(h.Lc.Matched) || e.getAttribute(h.Lc.GroupMatched);if (!i) return;let r = e.getAttribute(h.Lc.DrillTo);!r && t && (r = "string" == typeof t && "id" != t ? e.getAttribute(t) : (0, w.eJ)(e), r += ".svg"), r && n.push({ dataPointValue: i, drillToUrl: r, autoFetch: !!t });}), n.length && (this.mapsManager.scanMapForChildren(n, this.selectedMap, this.drillPathId), this.persistInternalMaps(!0));}handleSelectChange(t) {const e = t.target;this.selectMap(e.value);}selectMap(t, e = !1) {this.filteredMaps.some((e) => e.id === t) && this.selectedMap.id !== t && (this.mapSelectorDropdown.value !== t && (this.mapSelectorDropdown.value = t), (e || this.settings.advanced.clearSelectionOnMapChange.value) && this.selectionManager.clear(), this.mapsManager.selectMap(t, this.drillPathId), this.persistInternalMaps());}async ensureMapContent() {if (!this.selectedMap) return !1;if (this.selectedMap.location == C.k.Local || this.selectedMap.jsvg?.svg) return !0;try {if (await this.mapsManager.refreshMap(this.selectedMap.id, !this.settings.advanced.cacheRemoteMaps.value)) return !0;} catch (t) {this.raiseError(t, () => this.draw());}return !1;}clearPersistedSearchIndex() {this.settings?.internal?.searchIndex?.value && (a.XI0.SAVE({ objectName: "internal", properties: { searchIndex: null, update: Date.now().toString() }, selector: null }), this.settings.internal.searchIndex.value = null);}getPersistedSearchIndex() {return this.settings.internal?.searchIndex?.value ? (this.settings?.advanced.persistSearchIndex.value || this.clearPersistedSearchIndex(), this.settings.internal.searchIndex.value) : null;}async processDialogResult(t) {if (t) {if (t.sessionSettings && (globalThis.sessionSettings = t.sessionSettings), t.myStorageInfo && (this.mapsManager.myStorage.updateInfo(t.myStorageInfo), t.saveMyStorageEditKey && (this.persistMyStorageEditKey(t.saveMyStorageEditKey.internal ? this.mapsManager.myStorage.info.editKey : null, !0), await (0, a.Fgm)(thisVisual.host.storageV2Service, M.rv, t.saveMyStorageEditKey.localStorage ? this.mapsManager.myStorage.info.editKey : null)), t.myStorageInfo.encryptionKey && this.persistMyStorageEncryptionKey(t.myStorageInfo.encryptionKey, !0)), t.fileExport) {const { content: e, name: i, type: n, description: r } = t.fileExport;thisVisual.host.downloadService.exportVisualsContentExtended(e, i, n, r);}t.launch && thisVisual.host.launchUrl(t.launch), t.removedMaps && t.removedMaps.forEach((t) => {this.zoomStateManager.delete(t), this.zoomStateManager.delete(`${t}-designer`), this.settings.internal?.customLabels?.value?.[t] && (delete this.settings.internal.customLabels.value[t], (0, m.zq)(this.settings, !0));}), t.state && (this.mapsManager.state = t.state), t.unsavedJsvg && this.showJsvgSaveRequest(t.unsavedJsvg) || (t.state && (t.updateSearchIndex && this.settings.advanced.persistSearchIndex.value && this.persistSearchIndex(!0), this.persistInternalMaps()), t.searchedMapSelection && (this.selectMap(t.searchedMapSelection.mapId, !0), t.searchedMapSelection.matches && this.maybeApplySearchMapSelection(t.searchedMapSelection.matches)));}}persistInternalMaps(t = !1) {thisVisual.internalUpdate = t, a.XI0.BATCH({ objectName: "internal", properties: { maps: this.mapsManager.persistableState, update: Date.now().toString() }, selector: null }), a.XI0.BATCH_SAVE(t);}persistMyStorageEditKey(t, e = !1) {this.settings.myStorage.saveEditKey.value = !!t, this.settings.internal.msek.value = t, a.XI0.BATCH({ objectName: "myStorage", properties: { saveEditKey: this.settings.myStorage.saveEditKey.value }, selector: null }), a.XI0.BATCH({ objectName: "internal", properties: { [M.rv]: t, update: Date.now().toString() }, selector: null }), e || a.XI0.BATCH_SAVE();}persistMyStorageEncryptionKey(t, e = !1) {this.settings.myStorage.encryptionKey.value = t, a.XI0.BATCH({ objectName: "myStorage", properties: { encryptionKey: t }, selector: null }), e || a.XI0.BATCH_SAVE();}persistSearchIndex(t = !1) {a.XI0.BATCH({ objectName: "internal", properties: { searchIndex: this.mapsManager.state.searchIndex, update: Date.now().toString() }, selector: null }), t || a.XI0.BATCH_SAVE();}openDialog(t) {const e = { model: this.model, mapsManagerState: this.mapsManager.state, myStorageInfo: this.mapsManager.myStorage.info, drillPathId: this.drillPathId, autoPanMode: this.isAutoPanMode, viewType: t.viewType, viewState: t.viewState, canExport: !0, visualFeatures: globalThis.thisVisualFeatures, sessionSettings: globalThis.sessionSettings, imageQuality: this.settings.advanced.imageQuality.value / 100, ...t.addOptions },i = "DialogSearch" == t.viewType ? { width: 500, height: 500 } : { width: 960, height: 600 };thisVisual.host.openModalDialog(v.l.Id, { title: "", actionButtons: [], size: i }, e).then((t) => {t?.resultState && this.processDialogResult(t.resultState);}).catch((t) => {t.error && 3 == t.error && (0, a.ShP)();});}async showJsvgSaveRequest(t) {this.msgBox && this.msgBox.destroy();const e = { scale: this.viewportScale, element: this.chart, title: "Unsaved Map Changes", description: "You closed the editor without saving. Would you like to continue editing or discard changes?", size: { width: "370px", height: "150px" }, buttons: [{ text: "Continue Editing" }, { text: "Discard Changes", action: "cancel" }] };return this.msgBox = new b.V(e), "cancel" != (await this.msgBox.draw()).action && (this.openDialog({ viewType: "DialogAdd", viewState: y.L.EditUnsavedMap, addOptions: { unsavedJsvg: t } }), !0);}selectAreasBySelectionIds(t) {if (this.svgMap?.clearSelection(), this.legend?.select(t), 0 === t.length) return void (this.controlsToolbar?.clear && this.controlsToolbar.clear.classList.add("disabled"));const e = (t) => {if (t.classList.contains("matched") && this.svgMap.select(t, !0), (0, E.Md)(t)) for (let i = 0; i < t.children.length; i++) {const n = t.children[i];e(n);}};(0, u.wT)(t, this.model).forEach((t) => {this.svgMap.map.querySelectorAll(`[${h.Lc.Matched}="${(0, a.z4e)(t.id)}"]`).forEach((t) => e(t));}), this.controlsToolbar?.clear && this.controlsToolbar.clear.classList.remove("disabled");for (const t in this.svgMap.areaElements) {const e = this.svgMap.areaElements[t];e.classList.contains("selected") || this.svgMap.select(e, !1);}}clearSelection() {this.selectionManager.hasSelection() && (this.selectionManager.clear(), this.svgMap?.clearSelection(), this.controlsToolbar?.clear?.classList.add("disabled")), this.legend?.clearSelection();}async handleAreaClick(t) {if (this.isLabelDesignMode || this.svgMap.zoomer.panning == f.o.Panning) return;if (1 == t.button) return;const e = t.target;if (this.controlMode === n.ZoomOnArea) return this.zoomedArea?.element && this.zoomedArea.element.id === e.id ? (this.svgMap?.zoomer?.resetZoom(), void this.resetZoomedArea()) : (this.resetZoomedArea(), this.svgMap?.zoomer?.zoomOnArea(e, this.settings?.advanced?.zoomFit?.value), e.classList.add("zoomed"), void (this.zoomedArea = { element: e }));const i = "link" === e.getAttribute(h.Lc.AreaType) ? e.getAttribute(h.Lc.LinkTo) ?? e.closest(`[${h.Lc.LinkTo}]`)?.getAttribute(h.Lc.LinkTo) : null;if (i) return void thisVisual.host.launchUrl((0, T.mE)(i));const r = e.getAttribute(h.Lc.LinkToMap);if (r) return void this.selectMap(r);const s = this.getClickedAreaDataPoint(e);if (s) {const e = (0, u.wT)(this.selectionManager.getSelectionIds(), this.model);let i = [];if (s.selectionIds.length > 1 && 1 == e.length && e[0].id == s.id) this.selectionManager.clear();else for (let e = 0; e < s.selectionIds.length; e++) i = await this.selectionManager.select(s.selectionIds[e], t.ctrlKey || t.metaKey || e > 0);this.selectAreasBySelectionIds(i);} else this.clearSelection();}handleAreaRightClick(t) {const e = t.target,i = this.getClickedAreaDataPoint(e);this.selectionManager.showContextMenu(i ? i.selectionIds : {}, { x: t.clientX, y: t.clientY }), t.preventDefault();}getClickedAreaDataPoint(t) {let e = t;const i = [h.Lc.Matched];if (i.some((e) => t.hasAttribute(e)) || (e = e.closest(i.map((t) => `[${t}]`).join(",")), e)) return (0, u.JF)(e.getAttribute(h.Lc.Matched), this.model, this.model.mapField ? this.selectedMap.url : null);}getSelectionIdsByIds(t) {if (!t.length) return [];const e = [];return t.forEach((t) => {const i = (0, u.JF)(t, this.model, this.model.mapField ? this.selectedMap.url : null);i && e.push(...i.selectionIds);}), e;}maybeApplySearchMapSelection(t) {if (!t.length) return;const e = this.settings.advanced.onSearchMapSelection.value.value;if ("change-map" == e) return;let i = this.getSelectionIdsByIds(t);i.length && ("select-first" == e && (i = [i[0]]), this.selectionManager.clear(), this.selectionManager.select(i, !0).then((t) => this.selectAreasBySelectionIds(t)));}resizeLabelsContainer() {this.svgMap && this.labelsContainer && (this.labelsContainer.style.width = `${this.svgMap.scale.naturalSize.width}px`, this.labelsContainer.style.height = `${this.svgMap.scale.naturalSize.height}px`);}resizeLabels() {if (this.resizeLabelsContainer(), this.svgMap) {const t = this.svgMap.scale;for (const e in this.labels) this.labels[e].updateScale(t);}}drawLabels() {if (!this.svgMap || !this.svgMap.map || this.svgMap.labelDisabled) return;this.jsPlumb = (0, P.UIf)({ container: this.labelsContainer, elementsDraggable: !1, resizeObserver: !1 }), this.jsPlumb.getOffset = g.Dc, this.resizeLabelsContainer();const t = { mapScale: this.svgMap.scale, zoomFactor: this.currentZoom || 1, isEditMode: this.isLabelDesignMode },e = [],i = this.settings.categoryLabels.show.value;i && e.push("category");const n = "custom" === this.settings.categoryLabels.matchedDisplayValue.value.value && this.settings.categoryLabels.matchedCustomValue.value.includes("{value}"),r = i && (n || this.settings.categoryLabels.includeDataLabel.value);if (this.settings.dataLabels.show.value && this.model.fields[u.Xh.Value] && !r && e.push("data"), e.length) {const i = this.svgMap.map.querySelectorAll(`[${h.Lc.Matched}]`);i?.forEach((i) => {const n = i.getAttribute(h.Lc.Matched);if (!n) return;if ("true" == i.getAttribute(h.Lc.NoLabel)) return;const r = (0, u.JF)(n, this.model, this.model.mapField ? this.selectedMap.url : null);r && e.forEach((e) => this.drawMatchedLabel(i, { ...t, type: e }, r));});}if (this.settings.categoryLabels.show.value && this.settings.categoryLabels.showUnmatched.value) {const e = this.svgMap.map.querySelectorAll(".unmatched");e?.forEach((e) => {"true" != e.getAttribute(h.Lc.NoLabel) && this.drawUnmatchedLabel(e, { ...t, type: "category" });});}}drawMatchedLabel(t, e, i) {if ("category" === e.type) {const n = this.settings.categoryLabels.matchedDisplayValue.value.value;if ("id" === n) e.text = (0, w.eJ)(t);else if ("dataPoint" == n) e.text = i.label;else if ("dataPoint2" == n) e.text = i.label2 || i.label;else if ("custom" == n) {if (e.text = (0, a.SN4)(this.settings.categoryLabels.matchedCustomValue, i.dataIndex), e.text?.match(/{.+?}/)) {const n = this.selectedMap.jsvg.dataMapping.areas[t.id];e.customFields = { id: (0, w.eJ)(t), title: n?.label, category: i.label, path: i.label2 || i.label, value: (0, u.yk)(i) };}} else {const r = this.selectedMap.jsvg.dataMapping.areas[t.id];"title" === n ? e.text = r?.label : "auto" === n && (e.text = i.label || r?.label || (0, w.eJ)(t));}if (this.settings.categoryLabels.includeDataLabel.value && !e.text.includes("{value}") && (e.text = `${e.text ?? ""} {value}`.trim(), e.customFields || (e.customFields = { value: (0, u.yk)(i) })), !e.text) return;}this.drawLabel(t, e, i);}drawUnmatchedLabel(t, e) {const i = this.settings.categoryLabels.unmatchedDisplayValue.value.value;if ("id" === i) e.text = (0, w.eJ)(t);else {const n = this.selectedMap.jsvg.dataMapping.areas[t.id];"title" === i ? e.text = n?.label : "auto" === i && (e.text = n?.label || (0, w.eJ)(t));}e.text && this.drawLabel(t, e);}drawLabel(t, e, i) {let n = this.settings.appearance.keepAspectRatio.value ? this.selectedMap.jsvg.rects?.[t.id] : null;n || (n = t.getBBox());const r = this.settings.advanced.maxLabels.value;if (r && Object.keys(this.labels).length >= r) return;const s = new g.JU(this.labelsContainer, n, t, this.jsPlumb, this.settings, e, this.selectedMap.id, i);s.draw(), s.isRendered && (this.labels[s.id] = s);}destroy() {this.chart && this.chart.remove(), this.svgMap && this.svgMap.destroy(), this.svgMap = null, this.jsPlumb && this.jsPlumb.destroy(), this.labelDesigner && this.labelDesigner.destroy(), this.legend && this.legend.destroy(), this.labels = {}, this.model = null, this.settings = null, this.tooltipServiceWrapper = null, this.selectionManager = null, this.ColorRulesEnumerator = null, this.editor = null, this.zoomStateManager = null, this.chart = null, this.chartContainer = null, this.loadingEl = null, this.errorBox = null, this.labelsContainer = null, this.controlsToolbar = null, this.selectionToolbar = null, this.zoomToolbar = null, this.mapSelectorDropdown = null, this.tooltipServiceWrapper = null, this.destroyed = !0;}}}, 3927: (t, e, i) => {"use strict";const n = i(909);t.exports = (t, e) => t.sort((t, i) => n(t, i, e));}, 3940: (t, e, i) => {"use strict";const n = i(3627),r = "\\\\/",s = `[^${r}]`,o = "\\.",a = "\\/",l = "[^/]",c = `(?:${a}|$)`,h = `(?:^|${a})`,u = `${o}{1,2}${c}`,d = { DOT_LITERAL: o, PLUS_LITERAL: "\\+", QMARK_LITERAL: "\\?", SLASH_LITERAL: a, ONE_CHAR: "(?=.)", QMARK: l, END_ANCHOR: c, DOTS_SLASH: u, NO_DOT: `(?!${o})`, NO_DOTS: `(?!${h}${u})`, NO_DOT_SLASH: `(?!${o}{0,1}${c})`, NO_DOTS_SLASH: `(?!${u})`, QMARK_NO_DOT: `[^.${a}]`, STAR: `${l}*?`, START_ANCHOR: h },p = { ...d, SLASH_LITERAL: `[${r}]`, QMARK: s, STAR: `${s}*?`, DOTS_SLASH: `${o}{1,2}(?:[${r}]|$)`, NO_DOT: `(?!${o})`, NO_DOTS: `(?!(?:^|[${r}])${o}{1,2}(?:[${r}]|$))`, NO_DOT_SLASH: `(?!${o}{0,1}(?:[${r}]|$))`, NO_DOTS_SLASH: `(?!${o}{1,2}(?:[${r}]|$))`, QMARK_NO_DOT: `[^.${r}]`, START_ANCHOR: `(?:^|[${r}])`, END_ANCHOR: `(?:[${r}]|$)` };t.exports = { MAX_LENGTH: 65536, POSIX_REGEX_SOURCE: { alnum: "a-zA-Z0-9", alpha: "a-zA-Z", ascii: "\\x00-\\x7F", blank: " \\t", cntrl: "\\x00-\\x1F\\x7F", digit: "0-9", graph: "\\x21-\\x7E", lower: "a-z", print: "\\x20-\\x7E ", punct: "\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~", space: " \\t\\r\\n\\v\\f", upper: "A-Z", word: "A-Za-z0-9_", xdigit: "A-Fa-f0-9" }, REGEX_BACKSLASH: /\\(?![*+?^${}(|)[\]])/g, REGEX_NON_SPECIAL_CHARS: /^[^@![\].,$*+?^{}()|\\/]+/, REGEX_SPECIAL_CHARS: /[-*+?.^${}(|)[\]]/, REGEX_SPECIAL_CHARS_BACKREF: /(\\?)((\W)(\3*))/g, REGEX_SPECIAL_CHARS_GLOBAL: /([-*+?.^${}(|)[\]])/g, REGEX_REMOVE_BACKSLASH: /(?:\[.*?[^\\]\]|\\(?=.))/g, REPLACEMENTS: { "***": "*", "**/**": "**", "**/**/**": "**" }, CHAR_0: 48, CHAR_9: 57, CHAR_UPPERCASE_A: 65, CHAR_LOWERCASE_A: 97, CHAR_UPPERCASE_Z: 90, CHAR_LOWERCASE_Z: 122, CHAR_LEFT_PARENTHESES: 40, CHAR_RIGHT_PARENTHESES: 41, CHAR_ASTERISK: 42, CHAR_AMPERSAND: 38, CHAR_AT: 64, CHAR_BACKWARD_SLASH: 92, CHAR_CARRIAGE_RETURN: 13, CHAR_CIRCUMFLEX_ACCENT: 94, CHAR_COLON: 58, CHAR_COMMA: 44, CHAR_DOT: 46, CHAR_DOUBLE_QUOTE: 34, CHAR_EQUAL: 61, CHAR_EXCLAMATION_MARK: 33, CHAR_FORM_FEED: 12, CHAR_FORWARD_SLASH: 47, CHAR_GRAVE_ACCENT: 96, CHAR_HASH: 35, CHAR_HYPHEN_MINUS: 45, CHAR_LEFT_ANGLE_BRACKET: 60, CHAR_LEFT_CURLY_BRACE: 123, CHAR_LEFT_SQUARE_BRACKET: 91, CHAR_LINE_FEED: 10, CHAR_NO_BREAK_SPACE: 160, CHAR_PERCENT: 37, CHAR_PLUS: 43, CHAR_QUESTION_MARK: 63, CHAR_RIGHT_ANGLE_BRACKET: 62, CHAR_RIGHT_CURLY_BRACE: 125, CHAR_RIGHT_SQUARE_BRACKET: 93, CHAR_SEMICOLON: 59, CHAR_SINGLE_QUOTE: 39, CHAR_SPACE: 32, CHAR_TAB: 9, CHAR_UNDERSCORE: 95, CHAR_VERTICAL_LINE: 124, CHAR_ZERO_WIDTH_NOBREAK_SPACE: 65279, SEP: n.sep, extglobChars: (t) => ({ "!": { type: "negate", open: "(?:(?!(?:", close: `))${t.STAR})` }, "?": { type: "qmark", open: "(?:", close: ")?" }, "+": { type: "plus", open: "(?:", close: ")+" }, "*": { type: "star", open: "(?:", close: ")*" }, "@": { type: "at", open: "(?:", close: ")" } }), globChars: (t) => !0 === t ? p : d };}, 3965: (t, e, i) => {"use strict";i.d(e, { KU: () => x, jX: () => w, pe: () => b });var n = i(7492),r = i(1807),s = i(3895),o = i(7641),a = i(1514),l = i(7077),c = i(5367),h = i(5888),u = i(8862),d = i(8891),p = i(2044),f = i(6684),g = i(4237),m = i(2755),v = i(1299);const y = "data-drill-path-id",b = "data-type";var w;!function (t) {t.DrillPath = "drill-path", t.DrillPathSelectable = "drill-path-selectable", t.DrillPathCaret = "drill-path-caret", t.DrillPathCheckbox = "drill-path-checkbox", t.DrillPathMenu = "drill-path-menu", t.DrillPathName = "drill-path-name", t.Map = "map", t.MapSelectable = "map-selectable", t.MapName = "map-name", t.MapLocation = "map-location", t.MapCheckbox = "map-checkbox", t.MapMenu = "map-menu";}(w || (w = {}));class x extends o._ {svgPreviewer;msgBox;dropzone;selectedPreviewMap;selectedIds = new Set();removedMaps = [];clickedDrillPathId;searchBy = "map";myStorage;topBar;mapManagerContainer;filesArea;rootUl;previewMapContainer;footerBar;searchBar;selectAllCheckbox;removeBtn;treeContainer;emptySearchResult;selectedItemsNumber;constructor(t, e) {super(t, e);}get hasSelection() {return this.selectedIds.size > 0;}get hasMaps() {return this.rootUl && !!this.rootUl.querySelector(`[${b}=${w.Map}]`);}get drillPathUl() {return this.clickedDrillPathId && this.rootUl.querySelector(`[${y}="${(0, r.z4e)(this.clickedDrillPathId)}"] ul.nested`);}selectMap(t) {this.selectedIds.add(t);}deselectMap(t) {this.selectedIds.delete(t);}toggleMapSelection(t, e) {(0, r.vMM)(e) ? e ? this.selectMap(t) : this.deselectMap(t) : this.selectedIds.has(t) ? this.deselectMap(t) : this.selectMap(t), this.updateRemoveButtonState();}draw() {this.initViewContent(), this.drawUI();}initViewContent() {this.viewContainer.classList.add("user-select-none", "flex", "column"), this.topBar && this.topBar.remove(), (0, r.tTh)(".header-bar", this.viewContainer, { middleware: (t) => this.topBar = t }), (0, r.tTh)(".map-title-container", this.topBar, [(0, r.tTh)(".title", "Map Manager")]);}initDropZone(t) {this.dropzone = new f.g({ container: t, multiple: !0, onlyButton: !0, accept: c.k$ }), this.dropzone.on("file", () => {this.dropzone.files?.length && this.addLocalMaps(this.dropzone.files);}), this.dropzone.on("error", (t) => this.raiseError(t));}initPreviewer() {this.svgPreviewer && this.svgPreviewer.destroy(), this.svgPreviewer = new n.s({ previewContainer: this.previewMapContainer, showEditButton: !1 }), this.svgPreviewer.on("refreshMap", () => this.refreshMap()), this.svgPreviewer.on("launchUrl", (t) => this.parent.launchUrl(t));}drawEmptyView() {this.mapManagerContainer && this.mapManagerContainer.remove(), this.footerBar && (this.footerBar.remove(), this.footerBar = null), (0, r.tTh)(".map-manager.editor-panes.empty", this.viewContainer, { middleware: (t) => this.mapManagerContainer = t }, [(0, r.tTh)(".placeholder", "No maps found")]);}drawUI() {this.footerBar || (this.mapManagerContainer && this.mapManagerContainer.remove(), (0, r.tTh)(".map-manager.editor-panes", this.viewContainer, { middleware: (t) => this.mapManagerContainer = t }, [(0, r.tTh)(".maps-manager-list.pane", [(0, r.tTh)(".file-list", { middleware: (t) => this.filesArea = t }, [(0, r.tTh)(".tree", [(0, r.tTh)(".filter", [(0, r.tTh)(".search-bar.margin-right", [(0, r.tTh)(".icon.icon-search.no-hover"), (0, r.tTh)("input.search", { middleware: (t) => {this.searchBar = t;}, attr: { type: "search", placeholder: "Search by map name..." }, events: { input: () => this.handleSearch() } })]), (0, r.tTh)(".ctrl.icon.icon-settings", { attr: { title: "Search by" }, events: { click: (t) => {this.showSearchByContextMenu(t);} } })]), (0, r.tTh)(".tree-elements", { middleware: (t) => this.treeContainer = t }), (0, r.tTh)(".spacer")]), (0, r.tTh)(".button-box.no-justify", [(0, r.tTh)(".icon.icon-delete.ctrl", { middleware: (t) => this.removeBtn = t, attr: { title: "Remove selected maps", disabled: "" }, events: { click: () => this.showRemoveSelectedMsgBox() } }), (0, r.tTh)(".selected-items-number.hide", { middleware: (t) => this.selectedItemsNumber = t })])])]), (0, r.tTh)(".panes-gutter"), (0, r.tTh)(".selected-map-preview.pane", { middleware: (t) => this.previewMapContainer = t })]), (0, r.tTh)(".footer-bar", this.viewContainer, { middleware: (t) => this.footerBar = t }, [(0, r.tTh)(".learn-more", { events: { click: () => this.parent.launchUrl(v.tl.docsMapManager) } }, "Learn more on Map Manager"), (0, r.tTh)(".synoptic-btn.end.ctrl", { events: { click: () => this.parent.closeDialog() } }, [(0, r.tTh)(".group.small.white.border.ctrl", [(0, r.tTh)("span.text.small", "Close")])])]), this.initPreviewer(), this.drawList(), this.showInfoBanner(), (0, h.A)({ columnGutters: [{ track: 1, element: this.mapManagerContainer.querySelector(".panes-gutter") }], columnMinSize: 200 }));}drawList() {this.mapsManager.isEmpty || (this.rootUl && this.rootUl.remove(), this.selectedIds.clear(), (0, r.tTh)("ul.ul-root", this.treeContainer, { middleware: (t) => this.rootUl = t }), (0, r.tTh)("li.tree-element.select-all", this.rootUl, { events: { click: (t) => this.selectAll() } }, [(0, r.tTh)(".container", [(0, r.tTh)(".selectable.map-manager-selectable", [(0, r.tTh)(".checkbox-new.icon.select-all", { middleware: (t) => {this.selectAllCheckbox = t;} }, [(0, r.tTh)("span.text-content.select-all", "Select all")])])])]), Object.keys(this.mapsManager.state.maps).sort((t, e) => (0, a.pT)(t).localeCompare((0, a.pT)(e))).forEach((t, e) => {if ((0, a.bb)(t)) return;const i = this.mapsManager.getMaps(t).filter((t) => !t.parentMapId);if (0 === i.length) return;const n = (0, a.pT)(t),s = (0, r.tTh)("li.tree-element", this.rootUl, { data: { drillPathId: t, type: w.DrillPath } }),o = (0, r.tTh)(".container", s),l = (0, r.tTh)(".selectable.map-manager-selectable", o, { data: { type: w.DrillPathSelectable } });(0, r.tTh)(".checkbox-new.icon", l, { data: { type: w.DrillPathCheckbox } });const c = (0, r.tTh)("span.text-content.drill-path", l, { data: { type: w.DrillPathName } }, n);(0, r.tTh)(".end", l, [(0, r.tTh)("span.icon.icon-ellipsis.context-menu.ctrl", { data: { type: w.DrillPathMenu } })]);const h = (0, r.tTh)("span.caret.icon.icon-bottom", { data: { type: w.DrillPathCaret } });l.insertBefore(h, c);const u = (0, r.tTh)("ul.nested.active", s);i.filter((t) => !t.parentMapId).sort((t, e) => t.name.localeCompare(e.name)).forEach((t, i) => {this.addMapToDrillPathUi(t, u, 0 == e && 0 == i);});}), this.rootUl.addEventListener("click", (t) => this.onListClick(t)));}showInfoBanner() {(0, r.tTh)(".banner.warning.end", this.topBar, [(0, r.tTh)(".icon.icon-info"), (0, r.tTh)("span", "Child maps are not handled by the Map Manager."), (0, r.tTh)("span.learn-more", { events: { click: () => this.parent.launchUrl(v.tl.docsMapManager) } }, "Learn more")]);}onListClick(t) {const e = t.target;if (e && e.dataset.type) switch (e.dataset.type) {case w.DrillPathCaret:case w.DrillPathSelectable:case w.DrillPath:case w.DrillPathName:this.expandOrCollapseDrillPath(e);break;case w.DrillPathCheckbox:this.handleDrillPathCheckboxSelection(e);break;case w.DrillPathMenu:this.showDrillPathContextMenu(t, e.closest(`[${b}=${w.DrillPath}]`).getAttribute(y));break;case w.Map:case w.MapSelectable:case w.MapName:case w.MapLocation:this.selectMapUIElement(e);break;case w.MapCheckbox:this.handleMapCheckboxSelection(e);break;case w.MapMenu:this.showMapContextMenu(t, e.closest(`[${b}=${w.Map}]`));}}expandOrCollapseDrillPath(t, e) {const i = t.dataset.type === w.DrillPath ? t : t.closest(`[${b}=${w.DrillPath}]`),n = i.querySelector(".caret");if (!n) return;const s = i.querySelector("ul.nested");s && ((0, r.vMM)(e) ? e ? (s.classList.add("active"), n.classList.add("icon-bottom"), n.classList.remove("icon-right")) : (s.classList.remove("active"), n.classList.remove("icon-bottom"), n.classList.add("icon-right")) : (s.classList.toggle("active"), n.classList.toggle("icon-bottom"), n.classList.toggle("icon-right")));}changeSearchBy(t) {this.searchBy = t, this.searchBar.placeholder = `Search by ${"map" == t ? "map name" : "drill path"}...`, this.handleSearch();}handleSearch() {const t = this.searchBar.value.toLowerCase().trim(),e = this.rootUl.querySelectorAll(`[${b}=${w.Map}]`),i = this.rootUl.querySelectorAll(`[${b}=${w.DrillPath}]`);if (e.forEach((t) => t.hidden = !1), i.forEach((t) => {t.hidden = !1, this.expandOrCollapseDrillPath(t, !0);}), !t) return this.updateCheckboxesState(), void this.toggleEmptySearchResult();"map" === this.searchBy ? (e.forEach((e) => {const i = e.querySelector(".text-content");(i.textContent || i.innerText).toLowerCase().includes(t) || (e.hidden = !0);}), i.forEach((t) => {const e = t.querySelector("ul.nested");0 === Array.from(e.children).filter((t) => !t.hidden).length ? t.hidden = !0 : (t.hidden = !1, this.expandOrCollapseDrillPath(t, !0));})) : (e.forEach((t) => t.hidden = !1), i.forEach((e) => {const i = e.querySelector(".drill-path");(i.textContent || i.innerText).toLowerCase().includes(t) ? (e.hidden = !1, this.expandOrCollapseDrillPath(e, !1)) : e.hidden = !0;})), this.toggleEmptySearchResult();}toggleEmptySearchResult() {this.emptySearchResult && this.emptySearchResult.remove(), this.rootUl.classList.remove("hide"), this.allDrillPathsHidden() && (this.rootUl.classList.add("hide"), this.emptySearchResult = (0, r.tTh)(".empty-search-result", this.treeContainer, "No results found"));}allDrillPathsHidden() {const t = this.rootUl.querySelectorAll(`[${b}=${w.DrillPath}]`);return Array.from(t).every((t) => t.hidden);}addMapToDrillPathUi(t, e, i = !1) {const n = t.location === s.k.Local ? "icon-map" : t.location === s.k.MyStorage ? "icon-okviz-map" : "icon-remote-map",o = t.location === s.k.Local ? "Local" : t.location === s.k.MyStorage ? "Remote" : "URL",a = (0, r.tTh)("li.tree-element", e, { data: { type: w.Map }, middleware: (e) => {e.setAttribute(c.Lc.JsvgId, t.id);} }, [(0, r.tTh)(".container", [(0, r.tTh)(".selectable.map-manager-selectable", { data: { type: w.MapSelectable } }, [(0, r.tTh)(".checkbox-new.map-checkbox.icon", { data: { type: w.MapCheckbox } }), (0, r.tTh)(`span.location.icon.${n}.big`, { data: { type: w.MapLocation }, attr: { title: `Map location: ${o}` } }), (0, r.tTh)("span.text-content", { data: { type: w.MapName }, attr: { title: t.name } }, (0, l.xx)(t.name, 30)), (0, r.tTh)(".end", [(0, r.tTh)("span.icon.icon-ellipsis.context-menu.ctrl.map-menu", { data: { type: w.MapMenu } })])])])]);i && this.selectMapUIElement(a);}handleDrillPathCheckboxSelection(t) {const e = t.closest(`[${b}=${w.DrillPath}]`).querySelector("ul.nested").querySelectorAll(`[${b}=${w.MapCheckbox}]`),i = t.classList.contains("checked");this.toggleDrillPathCheckbox(t, i ? "empty" : "checked"), e.forEach((t) => {this.handleMapCheckboxSelection(t, !i);});}toggleDrillPathCheckbox(t, e = "checked") {"empty" === e ? t.classList.remove("checked", "partial") : (t.classList.remove("checked" === e ? "partial" : "checked"), t.classList.add(e)), this.updateAllSelected();}handleMapCheckboxSelection(t, e) {t.classList.toggle("checked", e), this.toggleMapSelection(t.closest(`[${c.Lc.JsvgId}]`).getAttribute(c.Lc.JsvgId), e), (0, r.vMM)(e) || this.updateDrillPathChildCheckboxesState(t.closest("ul"));}updateDrillPathState(t) {const e = this.rootUl.querySelector(`[${y}="${(0, r.z4e)(t)}"]`);if (!e) return;const i = e.querySelector("ul.nested");i && i.children.length ? this.updateDrillPathChildCheckboxesState(i) : e.remove();}updateDrillPathChildCheckboxesState(t) {const e = Array.from(t.querySelectorAll(`[${b}=${w.MapCheckbox}]`));let i = 0;for (let t = 0; t < e.length; t++) e[t].classList.contains("checked") && i++;const n = t.closest(`[${b}=${w.DrillPath}]`).querySelector(`[${b}=${w.DrillPathCheckbox}]`);this.toggleDrillPathCheckbox(n, 0 === i ? "empty" : i === e.length ? "checked" : "partial");}updateAllSelected() {const t = this.rootUl.querySelectorAll(`[${b}=${w.DrillPathCheckbox}]`);let e = 0,i = 0;this.selectAllCheckbox.classList.remove("checked", "partial"), t.forEach((t) => {t.classList.contains("checked") ? e++ : t.classList.contains("partial") && i++;}), e !== t.length ? (i > 0 || e > 0) && this.selectAllCheckbox.classList.add("partial") : this.selectAllCheckbox.classList.add("checked");}selectAll(t) {t = (0, r.vMM)(t) ? t : !this.selectAllCheckbox.classList.contains("checked"), this.rootUl.querySelectorAll(`[${b}=${w.MapCheckbox}]`).forEach((e) => {e.classList.toggle("checked", t), this.toggleMapSelection(e.closest(`[${c.Lc.JsvgId}]`).getAttribute(c.Lc.JsvgId), t);}), this.rootUl.querySelectorAll(`[${b}=${w.DrillPathCheckbox}]`).forEach((e) => {e.classList.remove("partial"), e.classList.toggle("checked", t);}), this.selectAllCheckbox.classList.remove("partial"), this.selectAllCheckbox.classList.toggle("checked", t);}updateCheckboxesState() {this.rootUl.querySelectorAll(`[${b}=${w.MapCheckbox}]`).forEach((t) => {const e = t.closest(`[${c.Lc.JsvgId}]`).getAttribute(c.Lc.JsvgId);t.classList.toggle("checked", this.selectedIds.has(e));}), this.rootUl.querySelectorAll(`[${b}=${w.DrillPathCheckbox}]`).forEach((t) => {const e = t.closest(`[${y}]`).getAttribute(y),i = t.closest(`[${y}="${(0, r.z4e)(e)}"]`).querySelector("ul.nested").querySelectorAll(`[${b}=${w.MapCheckbox}]`);let n = 0;for (let t = 0; t < i.length; t++) i[t].classList.contains("checked") && n++;this.toggleDrillPathCheckbox(t, 0 === n ? "empty" : n === i.length ? "checked" : "partial");});}selectMapUIElement(t) {if (!t) return;const e = this.rootUl.querySelector(".selectable.selected");e && e.classList.remove("selected");const i = t.dataset.type === w.Map ? t : t.closest(`[${b}=${w.Map}]`);i.querySelector(".selectable").classList.add("selected");const n = i.getAttribute(c.Lc.JsvgId);n && (this.selectMapToPreview(n, i.closest(`[${y}]`).getAttribute(y)), this.mapsManager.freeMemory(), this.handlePreview());}updateRemoveButtonState() {this.removeBtn && (this.hasSelection ? (this.removeBtn.removeAttribute("disabled"), this.selectedItemsNumber.classList.remove("hide"), this.selectedItemsNumber.textContent = `(${this.selectedIds.size.toString()})`) : (this.removeBtn.setAttribute("disabled", ""), this.selectedItemsNumber.classList.add("hide")));}showMapContextMenu(t, e) {const i = e.getAttribute(c.Lc.JsvgId),n = this.mapsManager.findMapById(i),s = [];this.rootUl.querySelectorAll(`[${(0, r.z4e)(y)}]`).forEach((t) => {const e = t.getAttribute(y);e !== n.drillPathId && s.push({ value: e, text: (0, a.pT)(t.getAttribute(y)) });}), r.tzH.Init("map-context-menu", { width: "auto", sticky: !0, items: [{ label: "Move to Drill Path", enabled: s.length > 0, icon: "sort2", className: "small-text-contextual-menu-item", onClick: () => this.showChangeDrillPath(n, s) }, { label: "Rename", icon: "rename", className: "small-text-contextual-menu-item", onClick: () => this.showRenameMapMsgBox(n.map) }, { type: r.KGh.Separator }, { label: "Remove", icon: "delete", className: "small-text-contextual-menu-item", onClick: () => this.showRemoveMapMsgBox(n.map, e) }] }).show(t);}showDrillPathContextMenu(t, e) {this.clickedDrillPathId = e, r.tzH.Init("drill-path-context-menu", { width: "auto", sticky: !0, items: [{ label: "Remove", icon: "delete", className: "small-text-contextual-menu-item", onClick: () => this.showRemoveDrillPathMsgBox() }] }).show(t);}showChangeDrillPath(t, e) {this.msgBox && this.msgBox.destroy();const i = { element: this.options.container, title: "Move To Drill Path", description: `Change current drill path: "${(0, a.pT)(t.drillPathId)}" for "${t.map.name}" map.`, options: e, buttons: [{ text: "Move", callback: (e) => this.moveToDrillPath(t.map, e), validationCallback: (t) => "" !== t ? { valid: !0 } : { valid: !1 }, disabled: !0 }, { text: "Cancel", action: "cancel" }] };this.msgBox = new p.h(i), this.msgBox.draw();}moveToDrillPath(t, e) {if (!t || !e) return;this.removeMap(t), this.mapsManager.addMap(t, e);const i = this.rootUl.querySelector(`[${y}="${(0, r.z4e)(e)}"] ul.nested`);this.addMapToDrillPathUi(t, i, !1), this.setResult();}async ensureMapContent(t) {if (!t) return !1;if (t.location === s.k.Local || t.jsvg?.svg) return !0;try {if (await this.mapsManager.refreshMap(t.id)) return !0;} catch (t) {this.svgPreviewer.raiseError(t);}return !1;}selectMapToPreview(t, e) {if (!t) return;const i = this.mapsManager.findMapById(t, e);i && (this.selectedPreviewMap = i.map);}async handlePreview(t = !0) {this.svgPreviewer.destroyMap(), this.selectedPreviewMap && (this.svgPreviewer.showInfo(this.selectedPreviewMap, this.selectedPreviewMap.location === s.k.Local), this.selectedPreviewMap.location === s.k.Local ? this.svgPreviewer.show(this.selectedPreviewMap.jsvg) : (this.svgPreviewer.loading(), t || (await (0, r.ukR)(500)), await this.ensureMapContent(this.selectedPreviewMap), this.svgPreviewer.show(this.selectedPreviewMap.jsvg), this.svgPreviewer.endLoading()));}refreshMap() {this.selectedPreviewMap && (this.mapsManager.removeMapContent(this.selectedPreviewMap, !1), this.handlePreview(!1));}async addLocalMaps(t) {try {const e = await this.mapsManager.addLocalMaps(t, this.clickedDrillPathId);for (let t = 0; t < e.length; t++) this.addMapToDrillPathUi(e[t], this.drillPathUl, 0 === t);this.setResult();} catch (t) {this.raiseError(t);} finally {this.dropzone && this.dropzone.removeFiles(), this.clickedDrillPathId = null;}}async addRemoteMap(t) {this.showLoading();try {const e = await this.mapsManager.addRemoteMaps([t], this.clickedDrillPathId);for (let t = 0; t < e.length; t++) this.addMapToDrillPathUi(e[t], this.drillPathUl, 0 === t);this.setResult();} catch (t) {this.raiseError(t);}this.removeLoading(), this.clickedDrillPathId = null;}async addRemoteMapsFromJson(t) {this.showLoading();try {const e = await this.mapsManager.addRemoteMapsFromJson(t, this.clickedDrillPathId);this.drawList(), this.setResult(), this.showConfirmImportUrlsMsgBox(e.discarded);} catch (t) {this.raiseError(t);}this.removeLoading(), this.clickedDrillPathId = null;}async importUrls() {const t = await f.g.browseFiles(["application/json"]);t && t.length && this.addRemoteMapsFromJson(t[0]);}removeAllDrillPathMaps() {const t = this.rootUl.querySelector(`[${y}="${(0, r.z4e)(this.clickedDrillPathId)}"]`);if (!t) return;const e = Array.from(t.querySelectorAll(`[${b}=${w.Map}]`));e.forEach((t, i) => this.removeMap(this.mapsManager.findMapById(t.getAttribute(c.Lc.JsvgId)).map, i === e.length - 1)), this.clickedDrillPathId = null;}removeMultipleMaps() {if (!this.hasSelection) return;const t = Array.from(this.selectedIds);for (let e = 0; e < t.length; e++) {const i = this.mapsManager.findMapById(t[e]);i && this.removeMap(i.map, e === t.length - 1);}this.clearSelection();}removeMap(t, e = !0, i) {if (!t) return;const n = i ?? this.rootUl.querySelector(`[${c.Lc.JsvgId}="${(0, r.z4e)(t.id)}"]`),s = n.closest(`[${b}=${w.DrillPath}]`)?.getAttribute(y);n && n.remove(), s && this.updateDrillPathState(s), this.mapsManager.removeMap(t.id), this.removedMaps.push(t.id), this.selectedIds.delete(t.id), e && (this.mapsManager.findMapById(this.selectedPreviewMap?.id) || (this.svgPreviewer.destroyMap(), this.selectedPreviewMap = null, this.selectMapUIElement(this.rootUl.querySelector(`[${(0, r.z4e)(c.Lc.JsvgId)}]`))), this.setResult(), this.hasMaps ? (this.updateAllSelected(), this.updateRemoveButtonState()) : this.drawEmptyView());}renameMap(t, e) {e && t && e !== t.name && this.mapsManager.renameMap(e, t.id) && (this.svgPreviewer.updateMapName(e), this.updateMapInList(t), this.setResult());}showRenameMapMsgBox(t) {if (this.msgBox && this.msgBox.destroy(), !t) return;const e = (e) => "" === e ? { valid: !1, message: "The new name cannot be empty." } : e === t.name ? { valid: !1, message: "The new name must be different from the current name." } : this.mapsManager.doesMapHaveProperty("name", e, this.drillPathId, !1) ? { valid: !1, message: "The new name already exists at this level." } : (0, m._C)(e) ? (0, m.w8)(e) ? { valid: !0 } : { valid: !1, message: m.NX } : { valid: !1, message: m.l0 },i = t.name,n = { element: this.options.container, icon: "rename", title: "Rename Map", description: `Insert a new name for "${i}".`, value: i, placeholder: "Map name", showValidationError: !0, buttons: [{ text: "Rename", callback: (e) => this.renameMap(t, e), validationCallback: (t) => e(t) }, { text: "Cancel", action: "cancel" }] };this.msgBox = new d.J(n), this.msgBox.draw();}showAddRemoteMapMsgBox() {const t = { element: this.options.container, title: "Remote Map URL", description: "Insert the remote map URL.", placeholder: "https://", showValidationError: !0, buttons: [{ text: "Ok", callback: (t) => this.addRemoteMap(t), validationCallback: (t) => (0, g.Gz)(t) ? this.mapsManager.doesMapHaveProperty("url", t, this.clickedDrillPathId) ? { valid: !1, message: "The URL already exists at this level." } : { valid: !0 } : { valid: !1, message: "The URL is invalid." } }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new d.J(t), this.msgBox.draw();}showConfirmImportUrlsMsgBox(t) {const e = t.length > 0,i = t.length > 1,n = { element: this.viewContainer, title: "Import URL Maps", description: "Remote maps import complete. " + (e ? `The following URL${i ? "s are" : "is"} invalid and won't be added:` : "All maps have been added."), buttons: [{ text: "Ok" }] };if (e) {const e = (0, r.tTh)("ul");t.forEach((t) => e.appendChild((0, r.tTh)("li", t)));const i = (0, r.tTh)(".invalid-urls", [e]);n.content = i, n.boxContentClasses = ["no-margins", "overflow-y"];}this.msgBox && this.msgBox.destroy(), this.msgBox = new u.V(n), this.msgBox.draw();}showRemoveMapMsgBox(t, e) {const i = { element: this.viewContainer, icon: "delete", title: "Remove Map", description: `Are you sure you want to remove "${t.name}"?`, buttons: [{ text: "Remove", callback: () => this.removeMap(t, !0, e) }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new u.V(i), this.msgBox.draw();}showRemoveSelectedMsgBox() {if (!this.hasSelection) return;const t = 1 === this.selectedIds.size ? "" : "s",e = { element: this.viewContainer, icon: "delete", title: `Remove Map${t}`, description: `Are you sure you want to remove ${this.selectedIds.size} selected map${t}?`, buttons: [{ text: "Remove", callback: () => this.removeMultipleMaps() }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new u.V(e), this.msgBox.draw();}showRemoveDrillPathMsgBox() {const t = { element: this.viewContainer, title: "Remove Drill Path", description: `Are you sure you want to remove "${(0, a.pT)(this.clickedDrillPathId)}" drill path? All maps will be removed.`, buttons: [{ text: "Remove", callback: () => this.removeAllDrillPathMaps() }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new u.V(t), this.msgBox.draw();}showSearchByContextMenu(t) {r.tzH.Init("search-by-context-menu", { width: "auto", sticky: t.currentTarget, items: [{ type: r.KGh.Header, label: "Search by" }, { label: "Map Name", type: r.KGh.Radio, checked: "map" == this.searchBy, className: "small-text-contextual-menu-item", onClick: () => this.changeSearchBy("map") }, { label: "Drill Path", type: r.KGh.Radio, checked: "drill-path" == this.searchBy, className: "small-text-contextual-menu-item", onClick: () => this.changeSearchBy("drill-path") }] }).show(t);}updateMapInList(t) {const e = this.rootUl.querySelector(`[${c.Lc.JsvgId}="${(0, r.z4e)(t.id)}"]`);if (e) {const i = e.querySelector(`[${b}=${w.MapName}]`);i.textContent = t.name, i.setAttribute("title", t.name);}}clearSelection() {this.selectedIds.clear(), this.updateRemoveButtonState(), this.treeContainer.querySelectorAll(".checked, .partial").forEach((t) => t.classList.remove("checked", "partial"));}setResult() {this.result.removedMaps = this.removedMaps, this.parent.setDialogResult();}}}, 3999: (t, e, i) => {"use strict";const n = i(560);t.exports = (t, e, i) => 0 !== n(t, e, i);}, 4054: (t, e, i) => {"use strict";i.d(e, { D: () => s });var n = i(6639),r = i(2140);class s extends r.c {options;constructor(t) {t.optionType = "radio", super(t), Object.assign(this, t);}render(t) {super.render(t);const e = this.displayValue;(0, n.tT)(".oop-toggles", this.element, Object.keys(this.options).map((t) => (0, n.tT)(`.oop-toggle${this.options[t].icon ? `.icon-${this.options[t].icon}` : ""}${e == t ? ".selected" : ""}`, { attr: { ...(this.options[t].description ? { title: this.options[t].description } : {}) }, data: { value: t }, events: { click: (t, e) => {this.value = e.dataset.value, this.element.querySelectorAll(".oop-toggle").forEach((t) => t.classList.toggle("selected", this.value == t.dataset.value)), this.onChange && this.onChange(this.value);} } }, this.options[t].title)));}refresh() {const t = this.displayValue;this.element.querySelectorAll(".oop-toggle").forEach((e) => e.classList.toggle("selected", t == e.dataset.value));}}}, 4061: (t, e, i) => {"use strict";i.r(e), i.d(e, { Calc: () => r.m, ColorRulesEnumerator: () => r.f9, ColorRulesManager: () => r.AS, ColorScaleType: () => r.Qo, Comparison: () => r.Uf, ConditionMode: () => r.LF, EditorPlugin: () => n.Z, Operator: () => r.XP, TemplateManager: () => s.e$, TemplateType: () => s.nY, colorScaleColor: () => r.RQ, convertValue: () => r.nf, defaultColorScale: () => r.RU, defaultColorScaleCondition: () => r.a3, defaultCondition: () => r.P0, defaultRule: () => r.e2, defaultRuleBaseColor: () => r.Gy, defaultRuleLevel: () => r.UA, extendTemplate: () => s.Z3, fixColorScaleColor: () => r.Ec, fixColorScaleLevel: () => r.hz, fixDomain: () => r.uC, generalizeTemplate: () => s.di, generateTemplate: () => s.Yx, getColorScaleDisplayCondition: () => r.bk, getColorScaleGradient: () => r.o5, getColorScaleRange: () => r.fr, getColumnFromRuleField: () => r.RY, getVisualObjectInstancesFromTemplate: () => s.AA, mergeSettings: () => s.ss, numericConditions: () => r.S7, removeRuleDuplicates: () => r.z1, ruleColorScaleIsValid: () => r._Z, ruleConditionsAreValid: () => r.FA, ruleIsValid: () => r.Lw, ruleName: () => r.oF, textConditions: () => r.iq });var n = i(3622),r = i(6950),s = i(2175);}, 4072: (t, e, i) => {"use strict";function n(t) {return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {return typeof t;} : function (t) {return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;}, n(t);}function r(t, e) {if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");}function s(t, e) {for (var i = 0; i < e.length; i++) {var n = e[i];n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);}}function o(t, e, i) {return e && s(t.prototype, e), i && s(t, i), t;}function a(t, e, i) {return e in t ? Object.defineProperty(t, e, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = i, t;}function l(t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && h(t, e);}function c(t) {return c = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) {return t.__proto__ || Object.getPrototypeOf(t);}, c(t);}function h(t, e) {return h = Object.setPrototypeOf || function (t, e) {return t.__proto__ = e, t;}, h(t, e);}function u(t) {if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t;}function d(t) {var e = function () {if ("undefined" == typeof Reflect || !Reflect.construct) return !1;if (Reflect.construct.sham) return !1;if ("function" == typeof Proxy) return !0;try {return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;} catch (t) {return !1;}}();return function () {var i,n = c(t);if (e) {var r = c(this).constructor;i = Reflect.construct(n, arguments, r);} else i = n.apply(this, arguments);return function (t, e) {return !e || "object" != typeof e && "function" != typeof e ? u(t) : e;}(this, i);};}function p(t, e, i) {return p = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, i) {var n = function (t, e) {for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = c(t)););return t;}(t, e);if (n) {var r = Object.getOwnPropertyDescriptor(n, e);return r.get ? r.get.call(i) : r.value;}}, p(t, e, i || t);}function f(t, e) {return function (t) {if (Array.isArray(t)) return t;}(t) || function (t, e) {var i = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];if (null != i) {var n,r,s = [],o = !0,a = !1;try {for (i = i.call(t); !(o = (n = i.next()).done) && (s.push(n.value), !e || s.length !== e); o = !0);} catch (t) {a = !0, r = t;} finally {try {o || null == i.return || i.return();} finally {if (a) throw r;}}return s;}}(t, e) || m(t, e) || function () {throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}();}function g(t) {return function (t) {if (Array.isArray(t)) return v(t);}(t) || function (t) {if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t);}(t) || m(t) || function () {throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}();}function m(t, e) {if (t) {if ("string" == typeof t) return v(t, e);var i = Object.prototype.toString.call(t).slice(8, -1);return "Object" === i && t.constructor && (i = t.constructor.name), "Map" === i || "Set" === i ? Array.from(t) : "Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i) ? v(t, e) : void 0;}}function v(t, e) {(null == e || e > t.length) && (e = t.length);for (var i = 0, n = new Array(e); i < e; i++) n[i] = t[i];return n;}function y(t, e, i) {return "*" === t || (t.length > 0 ? -1 !== t.indexOf(e) : !i);}function b(t, e, i) {var n,r = t = t || {},s = e = e || {};if (i) for (n = 0; n < i.length; n++) r[i[n]] = s[i[n]];else for (n in s) r[n] = s[n];return t;}function w(t) {return "[object Number]" === Object.prototype.toString.call(t);}function x(t) {return "string" == typeof t;}function S(t) {return "boolean" == typeof t;}function E(t) {return null != t && "[object Object]" === Object.prototype.toString.call(t);}function C(t) {return "[object Function]" === Object.prototype.toString.call(t);}function k(t) {if (x(t)) return "" + t;if (S(t)) return !!t;if (s = t, "[object Date]" === Object.prototype.toString.call(s)) return new Date(t.getTime());if (C(t)) return t;if (Array.isArray(t)) {for (var e = [], i = 0; i < t.length; i++) e.push(k(t[i]));return e;}if (E(t)) {var n = {};for (var r in t) n[r] = k(t[r]);return n;}return t;var s;}function T(t, e, i, n) {var r,s,o = {},a = {};for (i = i || [], n = n || [], s = 0; s < i.length; s++) o[i[s]] = !0;for (s = 0; s < n.length; s++) a[n[s]] = !0;var l = k(t);for (s in e) if (null == l[s] || a[s]) l[s] = e[s];else if (o[s]) (r = []).push.apply(r, Array.isArray(l[s]) ? l[s] : [l[s]]), r.push(e[s]), l[s] = r;else if (x(e[s]) || S(e[s]) || C(e[s]) || w(e[s])) l[s] = e[s];else if (Array.isArray(e[s])) r = [], Array.isArray(l[s]) && r.push.apply(r, l[s]), r.push.apply(r, e[s]), l[s] = r;else if (E(e[s])) for (var c in E(l[s]) || (l[s] = {}), e[s]) l[s][c] = e[s][c];return l;}function A(t, e, i) {for (var n = 0; n < i.length; n++) {var r = i[n][0][i[n][1]].apply(i[n][0], i[n][2]);if (r === e) return r;}return t;}function M(t, e) {if (!t) return null;for (var i = 0; i < t.length; i++) e(t[i]);}function _(t, e) {if (t) for (var i = 0; i < t.length; i++) if (e(t[i])) return i;return -1;}function P(t, e) {var i = _(t, e);return -1 === i ? null : t[i];}function D(t, e) {var i = null;return t.forEach(function (t) {e(t) && (i = t);}), i;}function O(t, e) {var i = _(t, e);return i > -1 && t.splice(i, 1), -1 !== i;}function I(t) {if (null != Array.fromArray) return Array.from(t);var e = [];return Array.prototype.push.apply(e, t), e;}function F(t, e) {var i = t.indexOf(e);return i > -1 && t.splice(i, 1), -1 !== i;}function R(t, e, i, n) {var r = t[e];return null == r && (r = [], t[e] = r), r[n ? "unshift" : "push"](i), r;}function L(t, e, i) {return -1 === t.indexOf(e) && (i ? t.unshift(e) : t.push(e), !0);}i.d(e, { NlZ: () => _s, QHG: () => ee, RSQ: () => jr, SYk: () => Ds, UIf: () => xo });for (var N = [], V = 0; V < 256; V++) N[V] = (V < 16 ? "0" : "") + V.toString(16);function B() {var t = 4294967295 * Math.random() | 0,e = 4294967295 * Math.random() | 0,i = 4294967295 * Math.random() | 0,n = 4294967295 * Math.random() | 0;return N[255 & t] + N[t >> 8 & 255] + N[t >> 16 & 255] + N[t >> 24 & 255] + "-" + N[255 & e] + N[e >> 8 & 255] + "-" + N[e >> 16 & 15 | 64] + N[e >> 24 & 255] + "-" + N[63 & i | 128] + N[i >> 8 & 255] + "-" + N[i >> 16 & 255] + N[i >> 24 & 255] + N[255 & n] + N[n >> 8 & 255] + N[n >> 16 & 255] + N[n >> 24 & 255];}function j(t, e, i) {var n = t.x - e.x,r = t.y - e.y,s = Math.cos(i / 360 * Math.PI * 2),o = Math.sin(i / 360 * Math.PI * 2);return { x: n * s - r * o + e.x, y: r * s + n * o + e.y, cr: s, sr: o };}function z(t) {if (null == t) return null;for (var e = t.replace(/^\s\s*/, ""), i = /\s/, n = e.length; i.test(e.charAt(--n)););return e.slice(0, n + 1);}function U(t, e) {for (var i = [], n = 0; n < t.length; n++) i.push(e(t[n]));return i;}var H;function q() {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];if ("undefined" != typeof console) try {var n = arguments[arguments.length - 1];console.log(n);} catch (t) {}}function $(t) {return t < 0 ? -1 : t > 0 ? 1 : 0;}function G(t, e, i) {return function () {var n = null;try {null != e && (n = e.apply(this, arguments));} catch (t) {q("jsPlumb function failed : " + t);}if (null != t && (null == i || n !== i)) try {n = t.apply(this, arguments);} catch (t) {q("wrapped function failed : " + t);}return n;};}function W(t, e, i) {return t.has(e) || t.set(e, i()), t.get(e);}function K(t, e) {for (var i = t.__proto__; null != i;) {if (i instanceof e) return !0;i = i.__proto__;}return !1;}function Z(t, e, i) {for (var n = (i = i || t.parentNode).querySelectorAll(e), r = 0; r < n.length; r++) if (n[r] === t) return !0;return !1;}function Y(t, e) {t.stopPropagation ? t.stopPropagation() : t.returnValue = !1, !e && t.preventDefault && t.preventDefault();}function X(t, e, i, n) {if (n && Z(t, e, i)) return t;for (t = t.parentNode; null != t && t !== i;) {if (Z(t, e)) return t;t = t.parentNode;}}function J(t) {return t.srcElement || t.target;}function Q(t) {return null != t.className ? void 0 === t.className.baseVal ? t.className : t.className.baseVal : "";}function tt(t, e, i) {var n = null == e ? [] : Array.isArray(e) ? e : e.split(/\s+/),r = null == i ? [] : Array.isArray(i) ? i : i.split(/\s+/),s = Q(t).split(/\s+/),o = function (t, e) {for (var i = 0; i < e.length; i++) if (t) -1 === s.indexOf(e[i]) && s.push(e[i]);else {var n = s.indexOf(e[i]);-1 !== n && s.splice(n, 1);}};o(!0, n), o(!1, r), function (t, e, i) {e = z(e), void 0 !== t.className.baseVal ? t.className.baseVal = e : t.className = e;try {var n = t.classList;if (null != n) {for (; n.length > 0;) n.remove(n.item(0));for (var r = 0; r < i.length; r++) i[r] && n.add(i[r]);}} catch (t) {q("WARN: cannot set class list", t);}}(t, s.join(" "), s);}function et(t) {return !x(t) && !Array.isArray(t) && null != t.length && null == t.documentElement && null == t.nodeType;}function it(t, e) {var i = function (t, e) {null != t && null != e && e.length > 0 && (t.classList ? M(z(e).split(/\s+/), function (e) {t.classList.add(e);}) : tt(t, e));};et(t) ? M(t, function (t) {return i(t, e);}) : i(t, e);}function nt(t, e) {var i = function (t, e) {null != t && null != e && e.length > 0 && (t.classList ? z(e).split(/\s+/).forEach(function (e) {t.classList.remove(e);}) : tt(t, null, e));};et(t) ? M(t, function (t) {return i(t, e);}) : i(t, e);}function rt(t, e, i, n) {return st(null, t, e, i, n);}function st(t, e, i, n, r) {var s,o = null == t ? document.createElement(e) : document.createElementNS(t, e);for (s in i = i || {}) o.style[s] = i[s];for (s in n && (o.className = n), r = r || {}) o.setAttribute(s, "" + r[s]);return o;}function ot(t) {var e = t.getBoundingClientRect(),i = document.body,n = document.documentElement,r = window.pageYOffset || n.scrollTop || i.scrollTop,s = window.pageXOffset || n.scrollLeft || i.scrollLeft,o = n.clientTop || i.clientTop || 0,a = n.clientLeft || i.clientLeft || 0,l = e.top + r - o,c = e.left + s - a;return { x: Math.round(c), y: Math.round(l) };}function at(t, e) {var i = e.getContainer().getBoundingClientRect(),n = t.getBoundingClientRect(),r = e.currentZoom;return { x: (n.left - i.left) / r, y: (n.top - i.top) / r };}function lt(t, e) {var i = t.getBoundingClientRect(),n = e.currentZoom;return { w: i.width / n, h: i.height / n };}function ct(t) {return t instanceof SVGElement ? H.SVG : H.HTML;}function ht() {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];return e.map(function (t) {return "." + t;}).join(",");}function ut() {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];return e.map(function (t) {return "[" + t + "]";}).join(",");}!function (t) {t.SVG = "SVG", t.HTML = "HTML";}(H || (H = {}));var dt = "source",pt = "target",ft = "block",gt = "none",mt = "absolute",vt = "fixed",yt = "data-jtk-group",bt = "data-jtk-managed",wt = "data-jtk-not-draggable",xt = "tabindex",St = "data-jtk-scope-",Et = "checkCondition",Ct = "jtk-connector",kt = "jtk-endpoint",Tt = "jtk-floating-endpoint",At = "jtk-group-collapsed",Mt = "jtk-group-expanded",_t = "jtk-overlay",Pt = "connection",Dt = "internal.connection",Ot = "connection:move",It = "internal.endpoint:unregistered",Ft = "internal.connection:detached",Rt = "element:manage",Lt = "maxConnections",Nt = "element:unmanage",Vt = "zoom",Bt = "isDetachAllowed",jt = "beforeDrop",zt = "beforeDetach",Ut = ut(bt),Ht = { "stroke-linejoin": "stroke-linejoin", "stroke-dashoffset": "stroke-dashoffset", "stroke-linecap": "stroke-linecap" },qt = "stroke-dasharray",$t = "dashstyle",Gt = "path",Wt = "http://www.w3.org/2000/svg";function Kt(t, e) {for (var i in e) t.setAttribute(i, "" + e[i]);}function Zt(t, e) {return (e = e || {}).version = "1.1", e.xmlns = Wt, st(Wt, t, null, null, e);}function Yt(t) {return "position:absolute;left:" + t[0] + "px;top:" + t[1] + "px";}function Xt(t, e, i) {if (e.setAttribute("fill", i.fill ? i.fill : gt), e.setAttribute("stroke", i.stroke ? i.stroke : gt), i.strokeWidth && e.setAttribute("stroke-width", i.strokeWidth), i[$t] && i.strokeWidth && !i[qt]) {var n = -1 === i[$t].indexOf(",") ? " " : ",",r = i[$t].split(n),s = "";M(r, function (t) {s += Math.floor(t * i.strokeWidth) + n;}), e.setAttribute(qt, s);} else i[qt] && e.setAttribute(qt, i[qt]);for (var o in Ht) i[o] && e.setAttribute(Ht[o], i[o]);}function Jt(t, e, i) {t.childNodes.length > i ? t.insertBefore(e, t.childNodes[i]) : t.appendChild(e);}function Qt(t, e, i) {var n = [t, e];return i && n.push(i), n.join(":");}var te,ee,ie = "data-jtk-container",ne = "data-jtk-enabled",re = "data-jtk-scope",se = "endpoint",oe = "element",ae = "connection",le = "click",ce = "contextmenu",he = "dblclick",ue = "dbltap",de = "mousedown",pe = "mouseenter",fe = "mouseexit",ge = "mousemove",me = "mouseup",ve = "mouseout",ye = "mouseover",be = "tap",we = "revert",xe = "connection:drag",Se = Qt(oe, le),Ee = Qt(oe, he),Ce = Qt(oe, ue),ke = Qt(oe, ve),Te = Qt(oe, ye),Ae = Qt(oe, ge),Me = Qt(oe, me),_e = Qt(oe, de),Pe = Qt(oe, ce),De = Qt(oe, be),Oe = Qt(se, le),Ie = Qt(se, he),Fe = (Qt(se, ue), Qt(se, ve)),Re = Qt(se, ye),Le = Qt(se, me),Ne = Qt(se, de),Ve = (Qt(se, be), Qt(ae, le)),Be = Qt(ae, he),je = Qt(ae, ue),ze = Qt(ae, ve),Ue = Qt(ae, ye),He = Qt(ae, me),qe = Qt(ae, de),$e = Qt(ae, ce),Ge = Qt(ae, be),We = "position",Ke = ht(Ct),Ze = ht(kt),Ye = ut(yt),Xe = ut("data-jtk-group-content"),Je = ht(_t);!function (t) {t.Circle = "Circle", t.Ellipse = "Ellipse", t.Triangle = "Triangle", t.Diamond = "Diamond", t.Rectangle = "Rectangle", t.Square = "Square";}(te || (te = {})), function (t) {t.Assign = "Assign", t.AutoDefault = "AutoDefault", t.Bottom = "Bottom", t.BottomLeft = "BottomLeft", t.BottomRight = "BottomRight", t.Center = "Center", t.Continuous = "Continuous", t.ContinuousBottom = "ContinuousBottom", t.ContinuousLeft = "ContinuousLeft", t.ContinuousRight = "ContinuousRight", t.ContinuousTop = "ContinuousTop", t.ContinuousLeftRight = "ContinuousLeftRight", t.ContinuousTopBottom = "ContinuousTopBottom", t.Left = "Left", t.Perimeter = "Perimeter", t.Right = "Right", t.Top = "Top", t.TopLeft = "TopLeft", t.TopRight = "TopRight";}(ee || (ee = {}));var Qe,ti,ei = function () {function t(e) {r(this, t), this.params = e, a(this, "x1", void 0), a(this, "x2", void 0), a(this, "y1", void 0), a(this, "y2", void 0), a(this, "extents", { xmin: 1 / 0, xmax: -1 / 0, ymin: 1 / 0, ymax: -1 / 0 }), a(this, "type", void 0), this.x1 = e.x1, this.y1 = e.y1, this.x2 = e.x2, this.y2 = e.y2;}return o(t, [{ key: "findClosestPointOnPath", value: function (t, e) {return { d: 1 / 0, x: null, y: null, l: null, x1: null, y1: null, x2: null, y2: null };} }, { key: "lineIntersection", value: function (t, e, i, n) {return [];} }, { key: "boxIntersection", value: function (t, e, i, n) {var r = [];return r.push.apply(r, this.lineIntersection(t, e, t + i, e)), r.push.apply(r, this.lineIntersection(t + i, e, t + i, e + n)), r.push.apply(r, this.lineIntersection(t + i, e + n, t, e + n)), r.push.apply(r, this.lineIntersection(t, e + n, t, e)), r;} }, { key: "boundingBoxIntersection", value: function (t) {return this.boxIntersection(t.x, t.y, t.w, t.h);} }]), t;}(),ii = "undefined",ni = "default",ri = "true",si = "false",oi = "*";function ai(t, e, i) {for (var n = (i = i || t.parentNode).querySelectorAll(e), r = 0; r < n.length; r++) if (n[r] === t) return !0;return !1;}function li(t) {return t.srcElement || t.target;}function ci(t, e, i, n) {if (n) {var r = t.composedPath ? t.composedPath() : t.path;if (void 0 !== r && r.indexOf) return { path: r, end: r.indexOf(i) };var s = { path: [], end: -1 };return function t(e) {s.path.push(e), e === i ? s.end = s.path.length - 1 : null != e.parentNode && t(e.parentNode);}(e), s;}return { path: [e], end: 1 };}var hi = 1;function ui() {return "ontouchstart" in document.documentElement || null != navigator.maxTouchPoints && navigator.maxTouchPoints > 0;}function di() {return "onmousedown" in document.documentElement;}var pi = (a(Qe = {}, de, "touchstart"), a(Qe, me, "touchend"), a(Qe, ge, "touchmove"), Qe);function fi(t, e) {if (null == t) return { x: 0, y: 0 };var i = function (t, e) {return t.item ? t.item(e) : t[e];}(mi(t), 0);return { x: i[e + "X"], y: i[e + "Y"] };}function gi(t) {return fi(t, "page");}function mi(t) {return t.touches && t.touches.length > 0 ? t.touches : t.changedTouches && t.changedTouches.length > 0 ? t.changedTouches : t.targetTouches && t.targetTouches.length > 0 ? t.targetTouches : [t];}function vi(t, e, i, n, r) {if (wi(t, e, i), n.__tauid = i.__tauid, t.addEventListener) t.addEventListener(e, i, !1, r);else if (t.attachEvent) {var s = e + i.__tauid;t["e" + s] = i, t[s] = function () {t["e" + s] && t["e" + s](window.event);}, t.attachEvent("on" + e, t[s]);}}function yi(t, e, i) {var n = this;null != i && bi(t, function (r) {if (function (t, e, i) {if (t.__ta && t.__ta[e] && delete t.__ta[e][i.__tauid], i.__taExtra) {for (var n = 0; n < i.__taExtra.length; n++) yi(t, i.__taExtra[n][0], i.__taExtra[n][1]);i.__taExtra.length = 0;}i.__taUnstore && i.__taUnstore();}(r, e, i), null != i.__tauid) if (r.removeEventListener) r.removeEventListener(e, i, !1), ui() && pi[e] && r.removeEventListener(pi[e], i, !1);else if (n.detachEvent) {var s = e + i.__tauid;r[s] && r.detachEvent("on" + e, r[s]), r[s] = null, r["e" + s] = null;}i.__taTouchProxy && yi(t, i.__taTouchProxy[1], i.__taTouchProxy[0]);});}function bi(t, e) {if (null != t) for (var i = "string" == typeof t ? document.querySelectorAll(t) : null != t.length ? t : [t], n = 0; n < i.length; n++) e(i[n]);}function wi(t, e, i) {var n = hi++;return t.__ta = t.__ta || {}, t.__ta[e] = t.__ta[e] || {}, t.__ta[e][n] = i, i.__tauid = n, n;}var xi = /:not\(([^)]+)\)/;function Si(t, e, i, n) {if (null == t) return i;var r = t.split(","),s = [],o = [];M(r, function (t) {var e = t.match(xi);null != e ? o.push(e[1]) : s.push(t);}), o.length > 0 && 0 === s.length && s.push(oi);var a = function n(r) {n.__tauid = i.__tauid;var a = li(r),l = !1,c = a,h = ci(r, a, e, null != t);if (-1 != h.end) for (var u = 0; !l && u < h.end; u++) {c = h.path[u];for (var d = 0; d < o.length; d++) if (ai(c, o[d], e)) return;for (var p = 0; !l && p < s.length; p++) if (ai(c, s[p], e)) {i.apply(c, [r, c]), l = !0;break;}}};return function (t, e, i) {t.__taExtra = t.__taExtra || [], t.__taExtra.push([e, i]);}(i, n, a), a;}var Ei = function (t, e, i, n, r) {if (ui() && pi[e]) {var s = Si(n, t, i, pi[e]);vi(t, pi[e], s, i, r);}"focus" === e && null == t.getAttribute(xt) && t.setAttribute(xt, "1"), vi(t, e, Si(n, t, i, e), i, r);},Ci = (a(ti = {}, be, { touches: 1, taps: 1 }), a(ti, ue, { touches: 1, taps: 2 }), a(ti, ce, { touches: 2, taps: 1 }), ti);function ki(t, e, i, n) {for (var r in i.__tamee[t]) i.__tamee[t].hasOwnProperty(r) && i.__tamee[t][r].apply(n, [e]);}var Ti = function () {function t() {r(this, t);}return o(t, null, [{ key: "generate", value: function (t, e) {return function (i, n, r, s) {if (n == ce && di()) Ei(i, n, r, s);else {if (null == i.__taTapHandler) {var o = i.__taTapHandler = { tap: [], dbltap: [], down: !1, taps: 0, downSelectors: [] },a = function (n) {for (var r = li(n), a = ci(n, r, i, null != s), l = !1, u = 0; u < a.end; u++) {if (l) return;r = a.path[u];for (var d = 0; d < o.downSelectors.length; d++) if (null == o.downSelectors[d] || ai(r, o.downSelectors[d], i)) {o.down = !0, setTimeout(c, t), setTimeout(h, e), l = !0;break;}}},l = function (t) {if (o.down) {var e,n,r = li(t);o.taps++;var s = function (t) {return mi(t).length;}(t);for (var a in Ci) if (Ci.hasOwnProperty(a)) {var l = Ci[a];if (l.touches === s && (1 === l.taps || l.taps === o.taps)) for (var c = 0; c < o[a].length; c++) {n = ci(t, r, i, null != o[a][c][1]);for (var h = 0; h < n.end; h++) if (e = n.path[h], null == o[a][c][1] || ai(e, o[a][c][1], i)) {o[a][c][0].apply(e, [t, e]);break;}}}}},c = function () {o.down = !1;},h = function () {o.taps = 0;};i.__taTapHandler.downHandler = a, i.__taTapHandler.upHandler = l, Ei(i, de, a), Ei(i, me, l);}i.__taTapHandler.downSelectors.push(s), i.__taTapHandler[n].push([r, s]), r.__taUnstore = function () {null != i.__taTapHandler && (O(i.__taTapHandler.downSelectors, function (t) {return t === s;}), function (t, e) {var i,n = 0;for (n = 0, i = t.length; n < i && t[n][0] !== e; n++);n < t.length && t.splice(n, 1);}(i.__taTapHandler[n], r), 0 === i.__taTapHandler.downSelectors.length && (yi(i, de, i.__taTapHandler.downHandler), yi(i, me, i.__taTapHandler.upHandler), delete i.__taTapHandler));};}};} }]), t;}(),Ai = function () {function t() {r(this, t);}return o(t, null, [{ key: "generate", value: function () {var t = [];return function (e, i, n, r) {if (!e.__tamee) {e.__tamee = { over: !1, mouseenter: [], mouseexit: [] };var s = function (i) {var n = li(i);(null == r && n == e && !e.__tamee.over || ai(n, r, e) && (null == n.__tamee || !n.__tamee.over)) && (ki(pe, i, e, n), n.__tamee = n.__tamee || {}, n.__tamee.over = !0, t.push(n));},o = function (i) {for (var n = li(i), r = 0; r < t.length; r++) n != t[r] || ai(i.relatedTarget || i.toElement, "*", n) || (n.__tamee.over = !1, t.splice(r, 1), ki(fe, i, e, n));};vi(e, ye, Si(r, e, s, ye), s), vi(e, ve, Si(r, e, o, ve), o);}n.__taUnstore = function () {delete e.__tamee[i][n.__tauid];}, wi(e, i, n), e.__tamee[i][n.__tauid] = n;};} }]), t;}(),Mi = function () {function t(e) {r(this, t), a(this, "clickThreshold", void 0), a(this, "dblClickThreshold", void 0), a(this, "tapHandler", void 0), a(this, "mouseEnterExitHandler", void 0), e = e || {}, this.clickThreshold = e.clickThreshold || 250, this.dblClickThreshold = e.dblClickThreshold || 450, this.mouseEnterExitHandler = Ai.generate(), this.tapHandler = Ti.generate(this.clickThreshold, this.dblClickThreshold);}return o(t, [{ key: "_doBind", value: function (t, e, i, n, r) {if (null != i) {var s = t;e === be || e === ue || e === ce ? this.tapHandler(s, e, i, n, r) : e === pe || e == fe ? this.mouseEnterExitHandler(s, e, i, n, r) : Ei(s, e, i, n, r);}} }, { key: "on", value: function (t, e, i, n, r) {var s = null == n ? null : i,o = null == n ? i : n;return this._doBind(t, e, o, s, r), this;} }, { key: "off", value: function (t, e, i) {return yi(t, e, i), this;} }, { key: "trigger", value: function (t, e, i, n, r) {var s = di() && ("undefined" == typeof MouseEvent || null == i || i.constructor === MouseEvent),o = ui() && !di() && pi[e] ? pi[e] : e,a = !(ui() && !di() && pi[e]),l = gi(i),c = fi(i, "screen"),h = fi(i, "client");return bi(t, function (t) {var u;i = i || { screenX: c.x, screenY: c.y, clientX: h.x, clientY: h.y };var d = { TouchEvent: function (e) {var i,n,r,s,a,u,d,p = (i = t, n = l.x, r = l.y, s = c.x, a = c.y, u = h.x, d = h.y, function () {var t = [];return t.push.apply(t, arguments), t.item = function (t) {return this[t];}, t;}(function (t, e, i, n, r, s, o) {return new Touch({ target: t, identifier: B(), pageX: e, pageY: i, screenX: n, screenY: r, clientX: s || n, clientY: o || r });}(i, n, r, s, a, u, d)));(e.initTouchEvent || e.initEvent)(o, !0, !0, window, null, c.x, c.y, h.x, h.y, !1, !1, !1, !1, p, p, p, 1, 0);}, MouseEvents: function (e) {e.initMouseEvent(o, !0, !0, window, null == r ? 1 : r, c.x, c.y, h.x, h.y, !1, !1, !1, !1, 1, t);} },p = !a && !s && ui() && pi[e] ? "TouchEvent" : "MouseEvents";u = document.createEvent(p), d[p](u), n && (u.payload = n), t.dispatchEvent(u);}), this;} }]), t;}(),_i = [null, [1, -1], [1, 1], [-1, 1], [-1, -1]],Pi = [null, [-1, -1], [-1, 1], [1, 1], [1, -1]],Di = 2 * Math.PI;function Oi(t, e) {return e.x === t.x ? e.y > t.y ? 1 / 0 : -1 / 0 : e.y === t.y ? e.x > t.x ? 0 : -0 : (e.y - t.y) / (e.x - t.x);}function Ii(t, e) {return Math.sqrt(Math.pow(e.y - t.y, 2) + Math.pow(e.x - t.x, 2));}function Fi(t, e) {return e.x > t.x || e.x == t.x ? e.y > t.y ? 2 : 1 : e.y > t.y ? 3 : 4;}function Ri(t, e) {var i = t.x,n = t.x + t.w,r = t.y,s = t.y + t.h,o = e.x,a = e.x + e.w,l = e.y,c = e.y + e.h;return i <= o && o <= n && r <= l && l <= s || i <= a && a <= n && r <= l && l <= s || i <= o && o <= n && r <= c && c <= s || i <= a && o <= n && r <= c && c <= s || o <= i && i <= a && l <= r && r <= c || o <= n && n <= a && l <= r && r <= c || o <= i && i <= a && l <= s && s <= c || o <= n && i <= a && l <= s && s <= c;}function Li(t, e, i) {var n = Oi(t, e),r = Fi(t, e),s = i > 0 ? _i[r] : Pi[r],o = Math.atan(n),a = Math.abs(i * Math.sin(o)) * s[1],l = Math.abs(i * Math.cos(o)) * s[0];return { x: t.x + l, y: t.y + a };}function Ni(t, e, i) {if (Z(e, i, t)) return e;for (var n = e.parentNode; null != n && n !== t;) {if (Z(n, i, t)) return n;n = n.parentNode;}}function Vi(t, e, i) {var n = e.parentNode,r = t.getSize(n),s = t.getSize(e),o = i.x,a = o + s.w,l = i.y,c = l + s.h;return a > 0 && o < r.w && c > 0 && l < r.h;}var Bi,ji = "start",zi = "beforeStart",Ui = "drag",Hi = "stop",qi = function () {return !0;},$i = function () {return !1;},Gi = "katavorio-drag-no-select";!function (t) {t.absolutePosition = "absolutePosition", t.transform = "transform", t.xyAttributes = "xyAttributes";}(Bi || (Bi = {}));var Wi = new Map();Wi.set(Bi.absolutePosition, function (t, e) {t.style.left = "".concat(e.x, "px"), t.style.top = "".concat(e.y, "px");}), Wi.set(Bi.xyAttributes, function (t, e) {t.setAttribute("x", "".concat(e.x)), t.setAttribute("y", "".concat(e.y));});var Ki = new Map();Ki.set(Bi.absolutePosition, function (t) {return { x: t.offsetLeft, y: t.offsetTop };}), Ki.set(Bi.xyAttributes, function (t) {return { x: parseFloat(t.getAttribute("x")), y: parseFloat(t.getAttribute("y")) };});var Zi = new Map();Zi.set(Bi.absolutePosition, function (t, e) {t.style.width = "".concat(e.w, "px"), t.style.height = "".concat(e.h, "px");}), Zi.set(Bi.xyAttributes, function (t, e) {t.setAttribute("width", "".concat(e.w)), t.setAttribute("height", "".concat(e.h));});var Yi = new Map();Yi.set(Bi.absolutePosition, function (t) {return { w: t.offsetWidth, h: t.offsetHeight };}), Yi.set(Bi.xyAttributes, function (t) {return { w: parseFloat(t.getAttribute("width")), h: parseFloat(t.getAttribute("height")) };});var Xi,Ji = [Hi, ji, Ui, "drop", "over", "out", zi],Qi = function () {},tn = function (t, e) {if (null != t) {t = x(t) || null != t.tagName || null == t.length ? [t] : t;for (var i = 0; i < t.length; i++) e.apply(t[i], [t[i]]);}},en = function () {function t(e, i) {r(this, t), this.el = e, this.manager = i, a(this, "_class", void 0), a(this, "uuid", B()), a(this, "enabled", !0), a(this, "scopes", []), a(this, "eventManager", void 0), this.eventManager = i.eventManager;}return o(t, [{ key: "setEnabled", value: function (t) {this.enabled = t;} }, { key: "isEnabled", value: function () {return this.enabled;} }, { key: "toggleEnabled", value: function () {this.enabled = !this.enabled;} }, { key: "addScope", value: function (t) {var e = {};for (var i in tn(this.scopes, function (t) {e[t] = !0;}), tn(t ? t.split(/\s+/) : [], function (t) {e[t] = !0;}), this.scopes.length = 0, e) this.scopes.push(i);} }, { key: "removeScope", value: function (t) {var e = {};for (var i in tn(this.scopes, function (t) {e[t] = !0;}), tn(t ? t.split(/\s+/) : [], function (t) {delete e[t];}), this.scopes.length = 0, e) this.scopes.push(i);} }, { key: "toggleScope", value: function (t) {var e = {};for (var i in tn(this.scopes, function (t) {e[t] = !0;}), tn(t ? t.split(/\s+/) : [], function (t) {e[t] ? delete e[t] : e[t] = !0;}), this.scopes.length = 0, e) this.scopes.push(i);} }]), t;}();!function (t) {t.notNegative = "notNegative", t.parent = "parent", t.parentEnclosed = "parentEnclosed";}(Xi || (Xi = {}));var nn,rn,sn,on,an = function (t) {l(i, t);var e = d(i);function i(t, n, s) {var o;if (r(this, i), a(u(o = e.call(this, t, s)), "_class", void 0), a(u(o), "rightButtonCanDrag", void 0), a(u(o), "consumeStartEvent", void 0), a(u(o), "clone", void 0), a(u(o), "scroll", void 0), a(u(o), "trackScroll", void 0), a(u(o), "_downAt", void 0), a(u(o), "_posAtDown", void 0), a(u(o), "_pagePosAtDown", void 0), a(u(o), "_pageDelta", { x: 0, y: 0 }), a(u(o), "_moving", void 0), a(u(o), "_lastPosition", void 0), a(u(o), "_lastScrollValues", { x: 0, y: 0 }), a(u(o), "_initialScroll", { x: 0, y: 0 }), a(u(o), "_size", void 0), a(u(o), "_currentParentPosition", void 0), a(u(o), "_ghostParentPosition", void 0), a(u(o), "_dragEl", void 0), a(u(o), "_multipleDrop", void 0), a(u(o), "_ghostProxyOffsets", void 0), a(u(o), "_ghostDx", void 0), a(u(o), "_ghostDy", void 0), a(u(o), "_isConstrained", !1), a(u(o), "_ghostProxyParent", void 0), a(u(o), "_useGhostProxy", void 0), a(u(o), "_ghostProxyFunction", void 0), a(u(o), "_activeSelectorParams", void 0), a(u(o), "_availableSelectors", []), a(u(o), "_canDrag", void 0), a(u(o), "_consumeFilteredEvents", void 0), a(u(o), "_parent", void 0), a(u(o), "_ignoreZoom", void 0), a(u(o), "_filters", {}), a(u(o), "_constrainRect", void 0), a(u(o), "_elementToDrag", void 0), a(u(o), "downListener", void 0), a(u(o), "moveListener", void 0), a(u(o), "upListener", void 0), a(u(o), "scrollTracker", void 0), a(u(o), "listeners", { start: [], drag: [], stop: [], over: [], out: [], beforeStart: [], revert: [] }), o._class = o.manager.css.draggable, it(o.el, o._class), o.downListener = o._downListener.bind(u(o)), o.upListener = o._upListener.bind(u(o)), o.moveListener = o._moveListener.bind(u(o)), o.rightButtonCanDrag = !0 === n.rightButtonCanDrag, o.consumeStartEvent = !1 !== n.consumeStartEvent, o._dragEl = o.el, o.clone = !0 === n.clone, o.scroll = !0 === n.scroll, o.trackScroll = !1 !== n.trackScroll, o._multipleDrop = !1 !== n.multipleDrop, o._canDrag = n.canDrag || qi, o._consumeFilteredEvents = n.consumeFilteredEvents, o._parent = n.parent, o._ignoreZoom = !0 === n.ignoreZoom, o._ghostProxyParent = n.ghostProxyParent, o.trackScroll && (o.scrollTracker = o._trackScroll.bind(u(o)), document.addEventListener("scroll", o.scrollTracker)), !0 === n.ghostProxy ? o._useGhostProxy = qi : n.ghostProxy && "function" == typeof n.ghostProxy ? o._useGhostProxy = n.ghostProxy : o._useGhostProxy = function (t, e) {return !(!o._activeSelectorParams || !o._activeSelectorParams.useGhostProxy) && o._activeSelectorParams.useGhostProxy(t, e);}, n.makeGhostProxy ? o._ghostProxyFunction = n.makeGhostProxy : o._ghostProxyFunction = function (t) {return o._activeSelectorParams && o._activeSelectorParams.makeGhostProxy ? o._activeSelectorParams.makeGhostProxy(t) : t.cloneNode(!0);}, n.selector) {var l = o.el.getAttribute("katavorio-draggable");null == l && (l = "" + new Date().getTime(), o.el.setAttribute("katavorio-draggable", l)), o._availableSelectors.push(n);}return o.eventManager.on(o.el, de, o.downListener), o;}return o(i, [{ key: "_trackScroll", value: function (t) {if (this._moving) {var e = { x: document.documentElement.scrollLeft, y: document.documentElement.scrollTop },i = e.x - this._lastScrollValues.x,n = e.y - this._lastScrollValues.y,r = { x: i + this._lastPosition.x, y: n + this._lastPosition.y },s = r.x - this._downAt.x,o = r.y - this._downAt.y,a = this._ignoreZoom ? 1 : this.manager.getZoom();this._dragEl && this._dragEl.parentNode && (s += this._dragEl.parentNode.scrollLeft - this._initialScroll.x, o += this._dragEl.parentNode.scrollTop - this._initialScroll.y), s /= a, o /= a, this.moveBy(s, o, t), this._lastPosition = r, this._lastScrollValues = e;}} }, { key: "on", value: function (t, e) {this.listeners[t] && this.listeners[t].push(e);} }, { key: "off", value: function (t, e) {if (this.listeners[t]) {for (var i = [], n = 0; n < this.listeners[t].length; n++) this.listeners[t][n] !== e && i.push(this.listeners[t][n]);this.listeners[t] = i;}} }, { key: "_upListener", value: function (t) {this._downAt && (this._downAt = null, this.eventManager.off(document, ge, this.moveListener), this.eventManager.off(document, me, this.upListener), nt(document.body, Gi), this.unmark(t), this.stop(t), this._moving = !1, this.clone ? (this._dragEl && this._dragEl.parentNode && this._dragEl.parentNode.removeChild(this._dragEl), this._dragEl = null) : this._activeSelectorParams && this._activeSelectorParams.revertFunction && !0 === this._activeSelectorParams.revertFunction(this._dragEl, this.manager.getPosition(this._dragEl)) && (this.manager.setPosition(this._dragEl, this._posAtDown), this._dispatch(we, this._dragEl)));} }, { key: "_downListener", value: function (t) {if (!t.defaultPrevented && (this.rightButtonCanDrag || 3 !== t.which && 2 !== t.button) && this.isEnabled() && this._canDrag()) {var e = this._testFilter(t) && function (t, e, i) {return !Z(t.srcElement || t.target, i.getInputFilterSelector(), e);}(t, this.el, this.manager);if (e) {this._activeSelectorParams = null, this._elementToDrag = null, 0 === this._availableSelectors.length && console.log("JSPLUMB: no available drag selectors");var i = t.target || t.srcElement,n = function (t, e, i) {for (var n = null, r = e.getAttribute("katavorio-draggable"), s = null != r ? "[katavorio-draggable='" + r + "'] " : "", o = 0; o < t.length; o++) if (null != (n = Ni(e, i, s + t[o].selector))) {if (t[o].filter) {var a = Z(i, t[o].filter, n);if (!0 === t[o].filterExclude && !a || a) return null;}return [t[o], n];}return null;}(this._availableSelectors, this.el, i);if (null != n && (this._activeSelectorParams = n[0], this._elementToDrag = n[1]), null == this._activeSelectorParams || null == this._elementToDrag) return;var r = this._activeSelectorParams.dragInit ? this._activeSelectorParams.dragInit(this._elementToDrag, t) : null;if (null != r && (this._elementToDrag = r), this.clone) {if (this._dragEl = this._elementToDrag.cloneNode(!0), it(this._dragEl, "katavorio-clone-drag"), this._dragEl.setAttribute("id", null), this._dragEl.style.position = "absolute", null != this._parent) {var s = this.manager.getPosition(this.el);this._dragEl.style.left = s.x + "px", this._dragEl.style.top = s.y + "px", this._parent.appendChild(this._dragEl);} else {var o = ot(this._elementToDrag);this._dragEl.style.left = o.x + "px", this._dragEl.style.top = o.y + "px", document.body.appendChild(this._dragEl);}} else this._dragEl = this._elementToDrag;this.consumeStartEvent && Y(t), this._downAt = gi(t), this._dragEl && this._dragEl.parentNode && (this._initialScroll = { x: this._dragEl.parentNode.scrollLeft, y: this._dragEl.parentNode.scrollTop }), this._posAtDown = this.manager.getPosition(this._dragEl), this._pagePosAtDown = ot(this._dragEl), this._pageDelta = { x: this._pagePosAtDown.x - this._posAtDown.x, y: this._pagePosAtDown.y - this._posAtDown.y }, this._size = this.manager.getSize(this._dragEl), this.eventManager.on(document, ge, this.moveListener), this.eventManager.on(document, me, this.upListener), it(document.body, Gi), this._dispatch(zi, { el: this.el, pos: this._posAtDown, e: t, drag: this, size: this._size });} else this._consumeFilteredEvents && Y(t);}} }, { key: "_moveListener", value: function (t) {if (this._downAt) {if (!this._moving) {var e = this._dispatch(ji, { el: this.el, pos: this._posAtDown, e: t, drag: this, size: this._size });if (!1 !== e) {if (!this._downAt) return;this.mark(e), this._moving = !0;} else this.abort();}if (this._downAt) {var i = gi(t),n = i.x - this._downAt.x,r = i.y - this._downAt.y,s = this._ignoreZoom ? 1 : this.manager.getZoom();this._lastPosition = { x: i.x, y: i.y }, this._lastScrollValues = { x: document.documentElement.scrollLeft, y: document.documentElement.scrollTop }, this._dragEl && this._dragEl.parentNode && (n += this._dragEl.parentNode.scrollLeft - this._initialScroll.x, r += this._dragEl.parentNode.scrollTop - this._initialScroll.y), n /= s, r /= s, this.moveBy(n, r, t);}}} }, { key: "getDragDelta", value: function () {return null != this._posAtDown && null != this._downAt ? { x: this._downAt.x - this._posAtDown.x, y: this._downAt.y - this._posAtDown.y } : { x: 0, y: 0 };} }, { key: "mark", value: function (t) {var e;this._posAtDown = this.manager.getPosition(this._dragEl), this._pagePosAtDown = ot(this._dragEl), this._pageDelta = { x: this._pagePosAtDown.x - this._posAtDown.x, y: this._pagePosAtDown.y - this._posAtDown.y }, this._size = this.manager.getSize(this._dragEl), it(this._dragEl, this.manager.css.drag), this._constrainRect = { w: (e = this._dragEl).parentNode.offsetWidth + e.parentNode.scrollLeft, h: e.parentNode.offsetHeight + e.parentNode.scrollTop }, this._ghostDx = 0, this._ghostDy = 0;} }, { key: "unmark", value: function (t) {this._isConstrained && this._useGhostProxy(this._elementToDrag, this._dragEl) ? (this._ghostProxyOffsets = { x: this._dragEl.offsetLeft - this._ghostDx, y: this._dragEl.offsetTop - this._ghostDy }, this._dragEl.parentNode.removeChild(this._dragEl), this._dragEl = this._elementToDrag) : this._ghostProxyOffsets = null, nt(this._dragEl, this.manager.css.drag), this._isConstrained = !1;} }, { key: "moveBy", value: function (t, e, i) {var n = this.toGrid({ x: this._posAtDown.x + t, y: this._posAtDown.y + e }),r = this._doConstrain(n, this._dragEl, this._constrainRect, this._size, i);if (null != r) {if (this._useGhostProxy(this.el, this._dragEl)) if (n.x !== r.x || n.y !== r.y) {if (!this._isConstrained) {var s = this._ghostProxyFunction(this._elementToDrag);it(s, "katavorio-ghost-proxy"), this._ghostProxyParent ? (this._ghostProxyParent.appendChild(s), this._currentParentPosition = ot(this._elementToDrag.parentNode), this._ghostParentPosition = ot(this._ghostProxyParent), this._ghostDx = this._currentParentPosition.x - this._ghostParentPosition.x, this._ghostDy = this._currentParentPosition.y - this._ghostParentPosition.y) : this._elementToDrag.parentNode.appendChild(s), this._dragEl = s, this._isConstrained = !0;}r = n;} else this._isConstrained && (this._dragEl.parentNode.removeChild(this._dragEl), this._dragEl = this._elementToDrag, this._isConstrained = !1, this._currentParentPosition = null, this._ghostParentPosition = null, this._ghostDx = 0, this._ghostDy = 0);this.manager.setPosition(this._dragEl, { x: r.x + this._ghostDx, y: r.y + this._ghostDy }), this._dispatch(Ui, { el: this.el, pos: r, e: i, drag: this, size: this._size, originalPos: this._posAtDown });}} }, { key: "abort", value: function () {null != this._downAt && this._upListener();} }, { key: "getDragElement", value: function (t) {return t ? this._elementToDrag || this.el : this._dragEl || this.el;} }, { key: "stop", value: function (t, e) {if (e || this._moving) {var i = [],n = this.manager.getPosition(this._dragEl);i.push([this._dragEl, n, this, this._size]), this._dispatch(Hi, { el: this._dragEl, pos: this._ghostProxyOffsets || n, finalPos: n, e: t, drag: this, selection: i, size: this._size, originalPos: { x: this._posAtDown.x, y: this._posAtDown.y } });} else this._moving || this._activeSelectorParams.dragAbort && this._activeSelectorParams.dragAbort(this._elementToDrag);} }, { key: "_dispatch", value: function (t, e) {var i = null;if (this._activeSelectorParams && this._activeSelectorParams[t]) i = this._activeSelectorParams[t](e);else if (this.listeners[t]) for (var n = 0; n < this.listeners[t].length; n++) try {var r = this.listeners[t][n](e);null != r && (i = r);} catch (t) {}return i;} }, { key: "resolveGrid", value: function () {var t = { grid: null, thresholdX: 5, thresholdY: 5 };return null != this._activeSelectorParams && null != this._activeSelectorParams.grid && (t.grid = this._activeSelectorParams.grid, null != this._activeSelectorParams.snapThreshold && (t.thresholdX = this._activeSelectorParams.snapThreshold, t.thresholdY = this._activeSelectorParams.snapThreshold)), t;} }, { key: "toGrid", value: function (t) {var e = this.resolveGrid(),i = e.grid,n = e.thresholdX,r = e.thresholdY;return null == i ? t : function (t, e, i, n) {i = null == i ? null == e.thresholdX ? e.w / 2 : e.thresholdX : i, n = null == n ? null == e.thresholdY ? e.h / 2 : e.thresholdY : n;var r = Math.floor(t.x / e.w),s = e.w * r,o = s + e.w,a = Math.abs(t.x - s) <= i ? s : Math.abs(o - t.x) <= i ? o : t.x,l = Math.floor(t.y / e.h),c = e.h * l,h = c + e.h;return { x: a, y: Math.abs(t.y - c) <= n ? c : Math.abs(h - t.y) <= n ? h : t.y };}(t, i, i ? i.w / 2 : n, i ? i.h / 2 : r);} }, { key: "setUseGhostProxy", value: function (t) {this._useGhostProxy = t ? qi : $i;} }, { key: "_doConstrain", value: function (t, e, i, n, r) {return null != this._activeSelectorParams && this._activeSelectorParams.constrainFunction && "function" == typeof this._activeSelectorParams.constrainFunction ? this._activeSelectorParams.constrainFunction(t, e, i, n, r) : t;} }, { key: "_testFilter", value: function (t) {for (var e in this._filters) {var i = this._filters[e],n = i[0](t);if (i[1] && (n = !n), !n) return !1;}return !0;} }, { key: "addFilter", value: function (t, e) {var i,n = this;if (t) {var r = "function" == typeof (i = t) ? (i._katavorioId = B(), i._katavorioId) : i;this._filters[r] = [function (e) {var i,r = e.srcElement || e.target;return x(t) ? i = Z(r, t, n.el) : "function" == typeof t && (i = t(e, n.el)), i;}, !1 !== e];}} }, { key: "removeFilter", value: function (t) {var e = "function" == typeof t ? t._katavorioId : t;delete this._filters[e];} }, { key: "clearAllFilters", value: function () {this._filters = {};} }, { key: "addSelector", value: function (t, e) {t.selector && (e ? this._availableSelectors.unshift(t) : this._availableSelectors.push(t));} }, { key: "destroy", value: function () {this.eventManager.off(this.el, de, this.downListener), this.eventManager.off(document, ge, this.moveListener), this.eventManager.off(document, me, this.upListener), this.downListener = null, this.upListener = null, this.moveListener = null, null != this.scrollTracker && document.removeEventListener("scroll", this.scrollTracker);} }]), i;}(en),ln = ["input", "textarea", "select", "button", "option"].join(","),cn = function () {function t(e) {r(this, t), a(this, "eventManager", void 0), a(this, "zoom", 1), a(this, "css", {}), a(this, "inputFilterSelector", void 0), a(this, "positioningStrategy", void 0), a(this, "_positionSetter", void 0), a(this, "_positionGetter", void 0), a(this, "_sizeSetter", void 0), a(this, "_sizeGetter", void 0), e = e || {}, this.inputFilterSelector = e.inputFilterSelector || ln, this.eventManager = new Mi(), this.zoom = e.zoom || 1, this.positioningStrategy = e.positioningStrategy || Bi.absolutePosition, this._positionGetter = Ki.get(this.positioningStrategy), this._positionSetter = Wi.get(this.positioningStrategy), this._sizeGetter = Yi.get(this.positioningStrategy), this._sizeSetter = Zi.get(this.positioningStrategy);var i = e.css || {};b(this.css, i);}return o(t, [{ key: "getPosition", value: function (t) {return this._positionGetter(t);} }, { key: "setPosition", value: function (t, e) {this._positionSetter(t, e);} }, { key: "getSize", value: function (t) {return this._sizeGetter(t);} }, { key: "getZoom", value: function () {return this.zoom;} }, { key: "setZoom", value: function (t) {this.zoom = t;} }, { key: "_prepareParams", value: function (t) {t = t || {};var e,i = { events: {} };for (e in t) i[e] = t[e];for (e = 0; e < Ji.length; e++) i.events[Ji[e]] = t[Ji[e]] || Qi;return i;} }, { key: "getInputFilterSelector", value: function () {return this.inputFilterSelector;} }, { key: "setInputFilterSelector", value: function (t) {return this.inputFilterSelector = t, this;} }, { key: "draggable", value: function (t, e) {if (null == t._katavorioDrag) {var i = this._prepareParams(e),n = new an(t, i, this);return it(t, "katavorio-delegated-draggable"), t._katavorioDrag = n, n;}return t._katavorioDrag;} }, { key: "destroyDraggable", value: function (t) {t._katavorioDrag && (t._katavorioDrag.destroy(), delete t._katavorioDrag);} }]), t;}(),hn = "jtk-drag-selected",un = function () {function t(e) {r(this, t), this.instance = e, a(this, "_dragSelection", []), a(this, "_dragSizes", new Map()), a(this, "_dragElements", new Map()), a(this, "_dragElementStartPositions", new Map()), a(this, "_dragElementPositions", new Map()), a(this, "__activeSet", void 0);}return o(t, [{ key: "_activeSet", get: function () {return null == this.__activeSet ? this._dragSelection : this.__activeSet;} }, { key: "length", get: function () {return this._dragSelection.length;} }, { key: "filterActiveSet", value: function (t) {var e = this;this.__activeSet = [], M(this._dragSelection, function (i) {t(i) && e.__activeSet.push(i);});} }, { key: "clear", value: function () {var t = this;this.reset(), M(this._dragSelection, function (e) {return t.instance.removeClass(e.jel, hn);}), this._dragSelection.length = 0;} }, { key: "reset", value: function () {this._dragElementStartPositions.clear(), this._dragElementPositions.clear(), this._dragSizes.clear(), this._dragElements.clear(), this.__activeSet = null;} }, { key: "initialisePositions", value: function () {var t = this;M(this._activeSet, function (e) {var i = t.instance.viewport.getPosition(e.id),n = { x: parseInt("" + e.jel.offsetLeft, 10), y: parseInt("" + e.jel.offsetTop, 10) };t._dragElementStartPositions.set(e.id, n), t._dragElementPositions.set(e.id, n), t._dragSizes.set(e.id, { w: i.w, h: i.h });});} }, { key: "updatePositions", value: function (t, e, i) {var n = this,r = t.x - e.x,s = t.y - e.y;M(this._activeSet, function (t) {var e = n._dragElementStartPositions.get(t.id);if (e) {var o = e.x + r,a = e.y + s,l = n._dragSizes.get(t.id),c = { x: o, y: a, w: l.w, h: l.h };if (t.jel._jsPlumbParentGroup && t.jel._jsPlumbParentGroup.constrain) {var h = { w: t.jel.parentNode.offsetWidth + t.jel.parentNode.scrollLeft, h: t.jel.parentNode.offsetHeight + t.jel.parentNode.scrollTop };c.x = Math.max(c.x, 0), c.y = Math.max(c.y, 0), c.x = Math.min(c.x, h.w - l.w), c.y = Math.min(c.y, h.h - l.h);}n._dragElementPositions.set(t.id, { x: o, y: a }), t.jel.style.left = c.x + "px", t.jel.style.top = c.y + "px", i(t.jel, t.id, l, c);}});} }, { key: "each", value: function (t) {var e = this;M(this._activeSet, function (i) {var n = e._dragSizes.get(i.id),r = e._dragElementPositions.get(i.id),s = e._dragElementStartPositions.get(i.id);t(i.jel, i.id, r, n, s);});} }, { key: "add", value: function (t, e) {var i = t;e = e || this.instance.getId(i), -1 === _(this._dragSelection, function (t) {return t.id === e;}) && (this.instance.addClass(t, hn), this._dragSelection.push({ id: e, jel: i }));} }, { key: "remove", value: function (t) {var e = this,i = t;this._dragSelection = this._dragSelection.filter(function (t) {var n = t.jel !== i;return n || e.instance.removeClass(t.jel, hn), n;});} }, { key: "toggle", value: function (t) {var e = t;-1 !== _(this._dragSelection, function (t) {return t.jel === e;}) ? this.remove(e) : this.add(t);} }]), t;}(),dn = "jtk-drag-active",pn = "jtk-drag-hover",fn = function () {function t(e, i, n) {var s = this;r(this, t), this.instance = e, this.dragSelection = i, a(this, "collicat", void 0), a(this, "drag", void 0), a(this, "_draggables", {}), a(this, "_dlist", []), a(this, "_elementsWithEndpoints", {}), a(this, "_draggablesForElements", {}), a(this, "handlers", []), a(this, "_trackScroll", void 0), a(this, "_filtersToAdd", []), this.collicat = new cn({ zoom: this.instance.currentZoom, css: { noSelect: this.instance.dragSelectClass, delegatedDraggable: "jtk-delegated-draggable", draggable: "jtk-draggable", drag: "jtk-drag", selected: hn, active: dn, hover: pn, ghostProxy: "jtk-ghost-proxy" } }), this.instance.bind(Vt, function (t) {s.collicat.setZoom(t);}), n = n || {}, this._trackScroll = !1 !== n.trackScroll;}return o(t, [{ key: "addHandler", value: function (t, e) {var i = this,n = b({ selector: t.selector }, e || {});n.start = G(n.start, function (e) {return t.onStart(e);}, !1), n.drag = G(n.drag, function (e) {return t.onDrag(e);}), n.stop = G(n.stop, function (e) {return t.onStop(e);});var r = (t.onBeforeStart || function (t) {}).bind(t);if (n.beforeStart = G(n.beforeStart, function (t) {return r(t);}), n.dragInit = function (e, i) {return t.onDragInit(e, i);}, n.dragAbort = function (e) {return t.onDragAbort(e);}, t.useGhostProxy && (n.useGhostProxy = t.useGhostProxy, n.makeGhostProxy = t.makeGhostProxy), null == n.constrainFunction && null != n.containment) switch (n.containment) {case Xi.notNegative:n.constrainFunction = function (t, e, i, n) {return { x: Math.max(0, Math.min(t.x)), y: Math.max(0, Math.min(t.y)) };};break;case Xi.parent:var s = n.containmentPadding || 5;n.constrainFunction = function (t, e, i, n) {return { x: t.x < 0 ? 0 : t.x > i.w - s ? i.w - s : t.x, y: t.y < 0 ? 0 : t.y > i.h - s ? i.h - s : t.y };};break;case Xi.parentEnclosed:n.constrainFunction = function (t, e, i, n) {return { x: t.x < 0 ? 0 : t.x + n.w > i.w ? i.w - n.w : t.x, y: t.y < 0 ? 0 : t.y + n.h > i.h ? i.h - n.h : t.y };};}null == this.drag ? (n.trackScroll = this._trackScroll, this.drag = this.collicat.draggable(this.instance.getContainer(), n), M(this._filtersToAdd, function (t) {return i.drag.addFilter(t[0], t[1]);}), this.drag.on(we, function (t) {i.instance.revalidate(t);})) : this.drag.addSelector(n), this.handlers.push({ handler: t, options: n }), t.init(this.drag);} }, { key: "addSelector", value: function (t, e) {this.drag && this.drag.addSelector(t, e);} }, { key: "addFilter", value: function (t, e) {null == this.drag ? this._filtersToAdd.push([t, !0 === e]) : this.drag.addFilter(t, e);} }, { key: "removeFilter", value: function (t) {null != this.drag && this.drag.removeFilter(t);} }, { key: "setFilters", value: function (t) {var e = this;M(t, function (t) {e.drag.addFilter(t[0], t[1]);});} }, { key: "reset", value: function () {var t = [];if (M(this.handlers, function (t) {t.handler.reset();}), this.handlers.length = 0, null != this.drag) {var e = this.drag._filters;for (var i in e) t.push([i, e[i][1]]);this.collicat.destroyDraggable(this.instance.getContainer());}return delete this.drag, t;} }, { key: "setOption", value: function (t, e) {var i = P(this.handlers, function (e) {return e.handler === t;});null != i && b(i.options, e || {});} }]), t;}(),gn = function () {function t(e, i) {r(this, t), this.instance = e, this._dragSelection = i, a(this, "selector", "> " + Ut + ":not(" + ht(_t) + ")"), a(this, "_dragOffset", null), a(this, "_groupLocations", []), a(this, "_intersectingGroups", []), a(this, "_currentDragParentGroup", null), a(this, "_dragGroupByElementIdMap", {}), a(this, "_dragGroupMap", {}), a(this, "_currentDragGroup", null), a(this, "_currentDragGroupOffsets", new Map()), a(this, "_currentDragGroupSizes", new Map()), a(this, "_currentDragGroupOriginalPositions", new Map()), a(this, "_dragPayload", null), a(this, "drag", void 0), a(this, "originalPosition", void 0);}return o(t, [{ key: "onDragInit", value: function (t) {return null;} }, { key: "onDragAbort", value: function (t) {return null;} }, { key: "getDropGroup", value: function () {var t = null;if (this._intersectingGroups.length > 0) {var e = this._intersectingGroups[0].groupLoc.group,i = this._intersectingGroups[0].intersectingElement,n = i._jsPlumbParentGroup;n !== e && (null != n && n.overrideDrop(i, e) || (t = this._intersectingGroups[0]));}return t;} }, { key: "onStop", value: function (t) {var e,i = this,n = t.drag.getDragElement(),r = this.getDropGroup(),s = [];function o(t, e, i, n, o) {var a = i.x,l = i.y;if (t._jsPlumbParentGroup && t._jsPlumbParentGroup.constrain) {var c = { w: t.parentNode.offsetWidth + t.parentNode.scrollLeft, h: t.parentNode.offsetHeight + t.parentNode.scrollTop };a = Math.max(a, 0), l = Math.max(l, 0), a = Math.min(a, c.w - n.w), l = Math.min(l, c.h - n.h), i.x = a, i.y = l;}s.push({ el: t, id: e, pos: i, originalPos: o, originalGroup: t._jsPlumbParentGroup, redrawResult: null, reverted: !1, dropGroup: null == r ? void 0 : r.groupLoc.group });}if (s.push({ el: n, id: this.instance.getId(n), pos: t.finalPos, originalGroup: n._jsPlumbParentGroup, redrawResult: null, originalPos: t.originalPos, reverted: !1, dropGroup: null != r ? r.groupLoc.group : null }), this._dragSelection.each(function (e, i, n, r, s) {e !== t.el && o(e, i, { x: n.x, y: n.y }, r, s);}), null === (e = this._currentDragGroup) || void 0 === e || e.members.forEach(function (e) {if (e.el !== t.el) {var n = i._currentDragGroupOffsets.get(e.elId),r = i._currentDragGroupSizes.get(e.elId),s = { x: t.finalPos.x + n[0].x, y: t.finalPos.y + n[0].y };o(e.el, e.elId, s, r, i._currentDragGroupOriginalPositions.get(e.elId));}}), M(s, function (t) {var e = null != t.originalGroup,n = e && Vi(i.instance, t.el, t.pos),s = { x: 0, y: 0 };if (e && !n) {if (null == r) {var o = i._pruneOrOrphan(t, !0, !0);null != o.pos ? t.pos = o.pos.pos : !o.pruned && t.originalGroup.revert && (t.pos = t.originalPos, t.reverted = !0);}} else e && n && (s = i._computeOffsetByParentGroup(t.originalGroup));null == r || n ? t.dropGroup = null : i.instance.groupManager.addToGroup(r.groupLoc.group, !1, t.el), t.reverted && i.instance.setPosition(t.el, t.pos), t.redrawResult = i.instance.setElementPosition(t.el, t.pos.x + s.x, t.pos.y + s.y), i.instance.removeClass(t.el, "jtk-dragged"), i.instance.select({ source: t.el }).removeClass(i.instance.elementDraggingClass + " " + i.instance.sourceElementDraggingClass, !0), i.instance.select({ target: t.el }).removeClass(i.instance.elementDraggingClass + " " + i.instance.targetElementDraggingClass, !0);}), null != s[0].originalGroup) {var a = n._jsPlumbParentGroup;if (a !== s[0].originalGroup) {var l = t.drag.getDragElement(!0);if (s[0].originalGroup.ghost) {var c = this.instance.getPosition(this.instance.getGroupContentArea(a)),h = this.instance.getPosition(this.instance.getGroupContentArea(s[0].originalGroup)),u = { x: h.x + t.pos.x - c.x, y: h.y + t.pos.y - c.y };l.style.left = u.x + "px", l.style.top = u.y + "px", this.instance.revalidate(l);}}}this.instance.fire("drag:stop", { elements: s, e: t.e, el: n, payload: this._dragPayload }), this._cleanup();} }, { key: "_cleanup", value: function () {var t = this;M(this._groupLocations, function (e) {t.instance.removeClass(e.el, dn), t.instance.removeClass(e.el, pn);}), this._currentDragParentGroup = null, this._groupLocations.length = 0, this.instance.hoverSuspended = !1, this._dragOffset = null, this._dragSelection.reset(), this._dragPayload = null, this._currentDragGroupOffsets.clear(), this._currentDragGroupSizes.clear(), this._currentDragGroupOriginalPositions.clear(), this._currentDragGroup = null;} }, { key: "reset", value: function () {} }, { key: "init", value: function (t) {this.drag = t;} }, { key: "onDrag", value: function (t) {var e = this,i = t.drag.getDragElement(),n = this.instance.getId(i),r = t.pos,s = this.instance.viewport.getPosition(n),o = { x: r.x, y: r.y };this._intersectingGroups.length = 0, null != this._dragOffset && (o.x += this._dragOffset.x, o.y += this._dragOffset.y);var a = function (i, n, r) {if (r) {var s = new Set();M(e._groupLocations, function (i) {!s.has(i.group.id) && Ri(n, i.r) ? (i.group !== e._currentDragParentGroup && e.instance.addClass(i.el, pn), e._intersectingGroups.push({ groupLoc: i, intersectingElement: t.drag.getDragElement(!0), d: 0 }), M(e.instance.groupManager.getAncestors(i.group), function (t) {return s.add(t.id);})) : e.instance.removeClass(i.el, pn);});}e.instance.setElementPosition(i, n.x, n.y), e.instance.fire("drag:move", { el: i, e: t.e, pos: { x: n.x, y: n.y }, originalPosition: e.originalPosition, payload: e._dragPayload });},l = { x: o.x, y: o.y, w: s.w, h: s.h };a(i, l, !0), this._dragSelection.updatePositions(r, this.originalPosition, function (t, e, i, n) {a(t, n, !1);}), this._currentDragGroupOffsets.forEach(function (t, i) {var n = e._currentDragGroupSizes.get(i),r = { x: l.x + t[0].x, y: l.y + t[0].y, w: n.w, h: n.h };t[1].style.left = r.x + "px", t[1].style.top = r.y + "px", a(t[1], r, !1);});} }, { key: "_computeOffsetByParentGroup", value: function (t) {var e = this.instance.getPosition(t.el),i = t.contentArea;if (i !== t.el) {var n = this.instance.getPosition(i);e.x += n.x, e.y += n.y;}if (t.el._jsPlumbParentGroup) {var r = this._computeOffsetByParentGroup(t.el._jsPlumbParentGroup);e.x += r.x, e.y += r.y;}return e;} }, { key: "onStart", value: function (t) {var e = this,i = t.drag.getDragElement(),n = this.instance.getPosition(i);this.originalPosition = { x: t.pos.x, y: t.pos.y }, i._jsPlumbParentGroup && (this._dragOffset = this._computeOffsetByParentGroup(i._jsPlumbParentGroup), this._currentDragParentGroup = i._jsPlumbParentGroup);var r = !0,s = i.getAttribute(wt);if ((!1 === this.instance.elementsDraggable || null != s && s !== si) && (r = !1), r) {this._groupLocations.length = 0, this._intersectingGroups.length = 0, this.instance.hoverSuspended = !0;var o = t.drag.getDragElement(!0),a = o.querySelectorAll(Ut),l = function (t) {for (var e = [], i = t._jsPlumbParentGroup; null != i;) e.push(i.el), i = i.group;return e;}(o),c = [];Array.prototype.push.apply(c, a), Array.prototype.push.apply(c, l), this._dragSelection.filterActiveSet(function (t) {return -1 === c.indexOf(t.jel);}), this._dragSelection.initialisePositions();var h = function (i, n, r) {if (!i._isJsPlumbGroup || e.instance.allowNestedGroups) {var s = !i._jsPlumbParentGroup,o = s || !0 !== i._jsPlumbParentGroup.dropOverride,a = !s && (i._jsPlumbParentGroup.ghost || !0 !== i._jsPlumbParentGroup.constrain);(s || o && a) && (M(e.instance.groupManager.getGroups(), function (t) {var n = i._jsPlumbGroup;if (!1 !== t.droppable && !1 !== t.enabled && i._jsPlumbGroup !== t && !e.instance.groupManager.isDescendant(t, n)) {var r = t.el,s = e.instance.getId(r),o = e.instance.viewport.getPosition(s),a = { el: r, r: { x: o.x, y: o.y, w: o.w, h: o.h }, group: t };e._groupLocations.push(a), t !== e._currentDragParentGroup && e.instance.addClass(r, dn);}}), e._groupLocations.sort(function (t, i) {return e.instance.groupManager.isDescendant(t.group, i.group) ? -1 : e.instance.groupManager.isAncestor(i.group, t.group) ? 1 : 0;}));}return e.instance.select({ source: i }).addClass(e.instance.elementDraggingClass + " " + e.instance.sourceElementDraggingClass, !0), e.instance.select({ target: i }).addClass(e.instance.elementDraggingClass + " " + e.instance.targetElementDraggingClass, !0), e.instance.fire("drag:start", { el: i, e: t.e, originalPosition: e.originalPosition, pos: e.originalPosition, dragGroup: n, dragGroupMemberSpec: r });},u = this.instance.getId(i);this._currentDragGroup = this._dragGroupByElementIdMap[u], this._currentDragGroup && !function (t, e) {var i = D(t.members, function (t) {return t.el === e;});return null !== i && !0 === i.active;}(this._currentDragGroup, i) && (this._currentDragGroup = null);var d = h(i);if (!1 === d) return this._cleanup(), !1;this._dragPayload = d, null != this._currentDragGroup && (this._currentDragGroupOffsets.clear(), this._currentDragGroupSizes.clear(), this._currentDragGroup.members.forEach(function (t) {var i = e.instance.viewport.getPosition(t.elId);e._currentDragGroupOffsets.set(t.elId, [{ x: i.x - n.x, y: i.y - n.y }, t.el]), e._currentDragGroupSizes.set(t.elId, i), e._currentDragGroupOriginalPositions.set(t.elId, { x: i.x, y: i.y }), h(t.el, e._currentDragGroup, t);}));}return r;} }, { key: "addToDragGroup", value: function (t) {var e = this,i = function (t, e) {return x(e) ? { id: e, active: !0 } : { id: e.id, active: e.active };}(this.instance, t),n = this._dragGroupMap[i.id];null == n && (n = { id: i.id, members: new Set() }, this._dragGroupMap[i.id] = n);for (var r = arguments.length, s = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++) s[o - 1] = arguments[o];this.removeFromDragGroup.apply(this, s), M(s, function (t) {var r = e.instance.getId(t);n.members.add({ elId: r, el: t, active: i.active }), e._dragGroupByElementIdMap[r] = n;});} }, { key: "removeFromDragGroup", value: function () {for (var t = this, e = arguments.length, i = new Array(e), n = 0; n < e; n++) i[n] = arguments[n];M(i, function (e) {var i = t.instance.getId(e),n = t._dragGroupByElementIdMap[i];if (null != n) {var r = new Set();n.members.forEach(function (t) {t.el !== e && r.add(t);}), n.members = r, delete t._dragGroupByElementIdMap[i];}});} }, { key: "setDragGroupState", value: function (t) {for (var e = this, i = arguments.length, n = new Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];M(n.map(function (t) {return e.instance.getId(t);}), function (i) {var n = e._dragGroupByElementIdMap[i];if (null != n) {var r = D(n.members, function (t) {return t.elId === i;});null != r && (r.active = t);}});} }, { key: "clearDragGroup", value: function (t) {var e = this,i = this._dragGroupMap[t];null != i && (i.members.forEach(function (t) {delete e._dragGroupByElementIdMap[t.elId];}), i.members.clear());} }, { key: "_pruneOrOrphan", value: function (t, e, i) {var n = t.el,r = { pruned: !1, pos: null };if (i || !Vi(this.instance, n, t.pos)) {var s = n._jsPlumbParentGroup;s.prune ? (n._isJsPlumbGroup ? this.instance.removeGroup(n._jsPlumbGroup) : s.remove(t.el, !0), r.pruned = !0) : s.orphan && (r.pos = this.instance.groupManager.orphan(t.el, e), n._isJsPlumbGroup ? s.removeGroup(n._jsPlumbGroup) : s.remove(t.el));}return r;} }]), t;}(),mn = {},vn = {},yn = {},bn = { get: function (t, e, i) {var n = mn[e];if (n) return new n(t, i);throw { message: "jsPlumb: unknown endpoint type '" + e + "'" };}, clone: function (t) {var e = yn[t.type];return bn.get(t.endpoint, t.type, e.getParams(t));}, compute: function (t, e, i, n) {var r = vn[t.type];if (null != r) return r(t, e, i, n);q("jsPlumb: cannot find endpoint calculator for endpoint of type ", t.type);}, registerHandler: function (t) {yn[t.type] = t, mn[t.type] = t.cls, vn[t.type] = t.compute;} },wn = function () {function t(e, i) {r(this, t), this.endpoint = e, a(this, "typeId", void 0), a(this, "x", void 0), a(this, "y", void 0), a(this, "w", void 0), a(this, "h", void 0), a(this, "computedValue", void 0), a(this, "bounds", { xmin: 1 / 0, xmax: -1 / 0, ymin: 1 / 0, ymax: -1 / 0 }), a(this, "classes", []), a(this, "instance", void 0), a(this, "type", void 0), i = i || {}, this.instance = e.instance, e.cssClass && this.classes.push(e.cssClass), i.cssClass && this.classes.push(i.cssClass);}return o(t, [{ key: "addClass", value: function (t) {this.classes.push(t), this.instance.addEndpointClass(this.endpoint, t);} }, { key: "removeClass", value: function (t) {this.classes = this.classes.filter(function (e) {return e !== t;}), this.instance.removeEndpointClass(this.endpoint, t);} }, { key: "compute", value: function (t, e, i) {this.computedValue = bn.compute(this, t, e, i), this.bounds.xmin = this.x, this.bounds.ymin = this.y, this.bounds.xmax = this.x + this.w, this.bounds.ymax = this.y + this.h;} }, { key: "setVisible", value: function (t) {this.instance.setEndpointVisible(this.endpoint, t);} }]), t;}();!function (t) {t.top = "top", t.left = "left", t.right = "right", t.bottom = "bottom";}(on || (on = {}));var xn = on.top,Sn = on.left,En = on.right,Cn = on.bottom,kn = [Sn, En],Tn = [xn, Cn],An = function () {function t(e, i, n) {r(this, t), this.instance = e, this.element = i, a(this, "isFloating", !0), a(this, "isContinuous", void 0), a(this, "isDynamic", void 0), a(this, "locations", []), a(this, "currentLocation", 0), a(this, "locked", !1), a(this, "cssClass", ""), a(this, "timestamp", null), a(this, "type", "Floating"), a(this, "id", B()), a(this, "orientation", [0, 0]), a(this, "size", void 0), this.size = e.viewport.getPosition(n), this.locations.push({ x: .5, y: .5, ox: this.orientation[0], oy: this.orientation[1], offx: 0, offy: 0, iox: this.orientation[0], ioy: this.orientation[1], cls: "" });}return o(t, [{ key: "_updateOrientationInRouter", value: function () {this.instance.router.setAnchorOrientation(this, [this.locations[0].ox, this.locations[0].oy]);} }, { key: "over", value: function (t) {this.orientation = this.instance.router.getEndpointOrientation(t), this.locations[0].ox = this.orientation[0], this.locations[0].oy = this.orientation[1], this._updateOrientationInRouter();} }, { key: "out", value: function () {this.orientation = null, this.locations[0].ox = this.locations[0].iox, this.locations[0].oy = this.locations[0].ioy, this._updateOrientationInRouter();} }]), t;}(),Mn = (a(nn = {}, xn, Cn), a(nn, En, Sn), a(nn, Sn, En), a(nn, Cn, xn), nn),_n = (a(rn = {}, xn, En), a(rn, En, Cn), a(rn, Sn, xn), a(rn, Cn, Sn), rn),Pn = (a(sn = {}, xn, Sn), a(sn, En, xn), a(sn, Sn, Cn), a(sn, Cn, En), sn);function Dn(t) {return 0 === t.faces.length ? xn : t.faces[0];}function On(t, e) {return -1 !== t.faces.indexOf(e);}function In(t, e) {return null == t.lockedAxis ? null == t.lockedFace ? !0 === On(t, e) : t.lockedFace === e : -1 !== t.lockedAxis.indexOf(e);}var Fn = { x: .5, y: 0, ox: 0, oy: -1, offx: 0, offy: 0 },Rn = { x: .5, y: 1, ox: 0, oy: 1, offx: 0, offy: 0 },Ln = { x: 0, y: .5, ox: -1, oy: 0, offx: 0, offy: 0 },Nn = { x: 1, y: .5, ox: 1, oy: 0, offx: 0, offy: 0 },Vn = { Top: [Fn], Bottom: [Rn], Left: [Ln], Right: [Nn], TopLeft: [{ x: 0, y: 0, ox: 0, oy: -1, offx: 0, offy: 0 }], TopRight: [{ x: 1, y: 0, ox: 1, oy: -1, offx: 0, offy: 0 }], BottomLeft: [{ x: 0, y: 1, ox: 0, oy: 1, offx: 0, offy: 0 }], BottomRight: [{ x: 1, y: 1, ox: 0, oy: 1, offx: 0, offy: 0 }], Center: [{ x: .5, y: .5, ox: 0, oy: 0, offx: 0, offy: 0 }], AutoDefault: [Fn, Ln, Rn, Nn] },Bn = { Continuous: { faces: [xn, Sn, Cn, En] }, ContinuousTop: { faces: [xn] }, ContinuousRight: { faces: [En] }, ContinuousBottom: { faces: [Cn] }, ContinuousLeft: { faces: [Sn] }, ContinuousLeftRight: { faces: [Sn, En] }, ContinuousTopBottom: { faces: [xn, Cn] } };function jn(t, e) {if (e = e || {}, t === ee.Perimeter) return function (t) {var e = (t = t || {}).anchorCount || 60,i = t.shape;if (!i) throw new Error("no shape supplied to Perimeter Anchor type");if (!Kn.has(i)) throw new Error("Shape [" + i + "] is unknown by Perimeter Anchor type");var n = Kn.get(i)(e);return t.rotation && (n = function (t, e) {for (var i = [], n = e / 180 * Math.PI, r = 0; r < t.length; r++) {var s = t[r].x - .5,o = t[r].y - .5;i.push({ x: s * Math.cos(n) - o * Math.sin(n) + .5, y: s * Math.sin(n) + o * Math.cos(n) + .5, ox: t[r].ox, oy: t[r].oy, offx: 0, offy: 0, iox: 0, ioy: 0, cls: "" });}return i;}(n, t.rotation)), b(zn(ee.Perimeter, n, t), { shape: i });}(e);var i = Vn[t];if (null != i) return zn(t, U(i, function (t) {return b({ iox: t.ox, ioy: t.oy }, t);}), e);if (null != (i = Bn[t])) return function (t, e, i) {var n = { type: t, locations: [], currentLocation: 0, locked: !1, id: B(), cssClass: i.cssClass || "", isFloating: !1, isContinuous: !0, timestamp: null, faces: i.faces || e, lockedFace: null, lockedAxis: null, clockwise: !(!1 === i.clockwise), __currentFace: null };return Object.defineProperty(n, Un, { get: function () {return this.__currentFace;}, set: function (t) {this.__currentFace = function (t, e) {if (On(t, e)) return e;if (On(t, Mn[e])) return Mn[e];var i = function (t, e) {return (t.clockwise ? _n : Pn)[e];}(t, e);if (On(t, i)) return i;var n = function (t, e) {return (t.clockwise ? Pn : _n)[e];}(t, e);return On(t, n) ? n : e;}(this, t);} }), n;}(t, i.faces, e);throw { message: "jsPlumb: unknown anchor type '" + t + "'" };}function zn(t, e, i) {return { type: t, locations: e, currentLocation: 0, locked: !1, id: B(), isFloating: !1, isContinuous: !1, isDynamic: e.length > 1, timestamp: null, cssClass: i.cssClass || "" };}var Un = "currentFace";function Hn(t) {return t.length < 7 && t.every(w) || 7 === t.length && t.slice(0, 5).every(w) && x(t[6]);}function qn(t) {if (x(t)) return jn(t, null);if (Array.isArray(t)) {if (Hn(t)) {var e = t;return zn(null, [{ x: e[0], y: e[1], ox: e[2], oy: e[3], offx: null == e[4] ? 0 : e[4], offy: null == e[5] ? 0 : e[5], iox: e[2], ioy: e[3], cls: e[6] || "" }], { cssClass: e[6] || "" });}return zn("Dynamic", U(t, function (t) {if (x(t)) {var e = Vn[t];return null != e ? b({ iox: e[0].ox, ioy: e[0].oy, cls: "" }, e[0]) : null;}if (Hn(t)) return { x: t[0], y: t[1], ox: t[2], oy: t[3], offx: null == t[4] ? 0 : t[4], offy: null == t[5] ? 0 : t[5], iox: t[2], ioy: t[3], cls: t[6] || "" };}).filter(function (t) {return null != t;}), {});}var i = t;return jn(i.type, i.options);}function $n(t) {for (var e = .5, i = 2 * Math.PI / t, n = [], r = 0, s = 0; s < t; s++) {var o = e + e * Math.sin(r),a = e + e * Math.cos(r);n.push({ x: o, y: a, ox: 0, oy: 0, offx: 0, offy: 0, iox: 0, ioy: 0, cls: "" }), r += i;}return n;}function Gn(t, e) {for (var i = [], n = 0; n < t.length; n++) i.push([t[n][0], t[n][1], t[n][2], t[n][3], 1 / t.length, t[n][4], t[n][5]]);return function (t, e) {for (var i = e / t.length, n = [], r = function (t, r, s, o, a, l, c) {for (var h = (s - t) / (i = e * a), u = (o - r) / i, d = 0; d < i; d++) n.push({ x: t + h * d, y: r + u * d, ox: null == l ? 0 : l, oy: null == c ? 0 : c, offx: 0, offy: 0, iox: 0, ioy: 0, cls: "" });}, s = 0; s < t.length; s++) r.apply(null, t[s]);return n;}(i, e);}function Wn(t) {return Gn([[0, 0, 1, 0, 0, -1], [1, 0, 1, 1, 1, 0], [1, 1, 0, 1, 0, 1], [0, 1, 0, 0, -1, 0]], t);}var Kn = new Map();Kn.set(te.Circle, $n), Kn.set(te.Ellipse, $n), Kn.set(te.Rectangle, Wn), Kn.set(te.Square, Wn), Kn.set(te.Diamond, function (t) {return Gn([[.5, 0, 1, .5], [1, .5, .5, 1], [.5, 1, 0, .5], [0, .5, .5, 0]], t);}), Kn.set(te.Triangle, function (t) {return Gn([[.5, 0, 1, 1], [1, 1, 0, 1], [0, 1, .5, 0]], t);});var Zn = function () {function t(e, i) {var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];r(this, t), this.selector = e, this.def = i, this.exclude = n, a(this, "id", void 0), a(this, "redrop", void 0), this.id = B(), this.redrop = i.def.redrop || Yn;}return o(t, [{ key: "setEnabled", value: function (t) {this.def.enabled = t;} }, { key: "isEnabled", value: function () {return !1 !== this.def.enabled;} }]), t;}(),Yn = "strict";function Xn(t, e, i, n, r) {for (var s = t.target || t.srcElement, o = !1, a = n.getSelector(e, i), l = 0; l < a.length; l++) if (a[l] === s) {o = !0;break;}return r ? !o : o;}var Jn = ht(dn, pn),Qn = "sourceSelectorEndpoint",tr = function () {function t(e) {r(this, t), this.instance = e, a(this, "jpc", void 0), a(this, "existingJpc", void 0), a(this, "_originalAnchorSpec", void 0), a(this, "ep", void 0), a(this, "endpointRepresentation", void 0), a(this, "canvasElement", void 0), a(this, "_activeDefinition", void 0), a(this, "placeholderInfo", { id: null, element: null }), a(this, "floatingIndex", void 0), a(this, "floatingId", void 0), a(this, "floatingElement", void 0), a(this, "floatingEndpoint", void 0), a(this, "floatingAnchor", void 0), a(this, "_stopped", void 0), a(this, "inPlaceCopy", void 0), a(this, "endpointDropTargets", []), a(this, "currentDropTarget", null), a(this, "payload", void 0), a(this, "floatingConnections", {}), a(this, "_forceReattach", void 0), a(this, "_forceDetach", void 0), a(this, "mousedownHandler", void 0), a(this, "mouseupHandler", void 0), a(this, "selector", ht(kt));var i = e.getContainer();this.mousedownHandler = this._mousedownHandler.bind(this), this.mouseupHandler = this._mouseupHandler.bind(this), e.on(i, de, Ut, this.mousedownHandler), e.on(i, me, [Ut, ht(kt)].join(","), this.mouseupHandler);}return o(t, [{ key: "_resolveDragParent", value: function (t, e) {var i = this.instance.getContainer(),n = X(e, Ut, i, !0);if (null != t.parentSelector) {var r = X(e, t.parentSelector, i, !0);return null != r && (n = X(r.parentNode, Ut, i, !1)), r || n;}return n;} }, { key: "_mousedownHandler", value: function (t) {var e, i;if (3 !== t.which && 2 !== t.button) {var n = t.target || t.srcElement;if ((null == (i = this._getSourceDefinition(t)) || null != (e = this._resolveDragParent(i.def.def, n)) && e.getAttribute(ne) !== si) && i) {var r,s = t.currentTarget;if (n.getAttribute(ne) !== si) {if (Y(t), this._activeDefinition = i, null != (r = i.def.def).canAcceptNewConnection && !r.canAcceptNewConnection(e, t)) return !1;var o = ws(t, e, this.instance.currentZoom),a = { element: e };if (b(a, r), a.isTemporarySource = !0, r.scope) a.scope = r.scope;else {var l = n.getAttribute(re);null != l && (a.scope = l);}if (null != (a = T(a, r.parameterExtractor ? r.parameterExtractor(e, n, t) : {})).maxConnections && a.maxConnections >= 0 && this.instance.select({ source: e }).length >= a.maxConnections) return Y(t), r.onMaxConnections && r.onMaxConnections({ element: e, maxConnections: a.maxConnections }, t), t.stopImmediatePropagation && t.stopImmediatePropagation(), !1;if (r.anchorPositionFinder) {var c = r.anchorPositionFinder(e, o, r, t);null != c && (a.anchor = c);}this._originalAnchorSpec = a.anchor || (this.instance.areDefaultAnchorsSet() ? this.instance.defaults.anchors[0] : this.instance.defaults.anchor);var h = this.instance.router.prepareAnchor(this._originalAnchorSpec),u = [o.x, o.y, 0, 0];if (h.locations.length > 0) u[2] = h.locations[0].ox, u[3] = h.locations[0].oy;else if (h.isContinuous) {var d = o.x < .5 ? o.x : 1 - o.x,p = o.y < .5 ? o.y : 1 - o.y;u[2] = d < p ? o.x < .5 ? -1 : 1 : 0, u[3] = p < d ? o.y < .5 ? -1 : 1 : 0;}a.anchor = u, a.deleteOnEmpty = !0, this.ep = this.instance._internal_newEndpoint(a);var f = {};if (r.extract) {for (var g in r.extract) {var m = n.getAttribute(g);m && (f[r.extract[g]] = m);}this.ep.mergeParameters(f);}if (a.uniqueEndpoint) {var v = this.ep.elementId,y = this.instance.getManagedData(v, Qn, i.id);null == y ? (this.instance.setManagedData(v, Qn, i.id, this.ep), this.ep.deleteOnEmpty = !1) : this.ep.finalEndpoint = y;}s._jsPlumbOrphanedEndpoints = s._jsPlumbOrphanedEndpoints || [], s._jsPlumbOrphanedEndpoints.push(this.ep), this.instance.trigger(this.ep.endpoint.canvas, de, t, f);}}}} }, { key: "_mouseupHandler", value: function (t) {var e = t.currentTarget || t.srcElement;e._jsPlumbOrphanedEndpoints && (function (t, e) {t = null == t.length || "string" == typeof t ? [t] : t;for (var i = 0; i < t.length; i++) e(t[i]);}(e._jsPlumbOrphanedEndpoints, this.instance._maybePruneEndpoint.bind(this.instance)), e._jsPlumbOrphanedEndpoints.length = 0), this._activeDefinition = null;} }, { key: "onDragInit", value: function (t) {var e = at(t, this.instance),i = lt(t, this.instance);return this._makeDraggablePlaceholder(e, i), this.placeholderInfo.element.jtk = t.jtk, this.placeholderInfo.element;} }, { key: "onDragAbort", value: function (t) {this._cleanupDraggablePlaceholder();} }, { key: "_makeDraggablePlaceholder", value: function (t, e) {this.placeholderInfo = this.placeholderInfo || {};var i = rt("div", { position: "absolute" });this.instance._appendElementToContainer(i);var n = this.instance.getId(i);return this.instance.setPosition(i, t), i.style.width = e.w + "px", i.style.height = e.h + "px", this.instance.manage(i), this.placeholderInfo.id = n, this.placeholderInfo.element = i, i;} }, { key: "_cleanupDraggablePlaceholder", value: function () {this.placeholderInfo.element && (this.instance.unmanage(this.placeholderInfo.element, !0), delete this.placeholderInfo.element, delete this.placeholderInfo.id);} }, { key: "reset", value: function () {var t = this.instance.getContainer();this.instance.off(t, me, this.mouseupHandler), this.instance.off(t, de, this.mousedownHandler);} }, { key: "init", value: function (t) {} }, { key: "startNewConnectionDrag", value: function (t, e) {this.jpc = this.instance._newConnection({ sourceEndpoint: this.ep, targetEndpoint: this.floatingEndpoint, source: this.ep.element, target: this.placeholderInfo.element, paintStyle: this.ep.connectorStyle, hoverPaintStyle: this.ep.connectorHoverStyle, connector: this.ep.connector, overlays: this.ep.connectorOverlays, type: this.ep.edgeType, cssClass: this.ep.connectorClass, hoverClass: this.ep.connectorHoverClass, scope: t, data: e }), this.jpc.pending = !0, this.jpc.addClass(this.instance.draggingClass), this.ep.addClass(this.instance.draggingClass), this.instance.fire(xe, this.jpc);} }, { key: "startExistingConnectionDrag", value: function () {this.existingJpc = !0, this.instance.setHover(this.jpc, !1);var t = this.jpc.endpoints[0].id === this.ep.id ? 0 : 1;this.ep.detachFromConnection(this.jpc, null, !0), this.floatingEndpoint.addConnection(this.jpc), this.instance.fire(xe, this.jpc), this.instance.sourceOrTargetChanged(this.jpc.endpoints[t].elementId, this.placeholderInfo.id, this.jpc, this.placeholderInfo.element, t), this.jpc.suspendedEndpoint = this.jpc.endpoints[t], this.jpc.suspendedElement = this.jpc.endpoints[t].element, this.jpc.suspendedElementId = this.jpc.endpoints[t].elementId, this.jpc.suspendedElementType = 0 === t ? dt : pt, this.instance.setHover(this.jpc.suspendedEndpoint, !1), this.floatingEndpoint.referenceEndpoint = this.jpc.suspendedEndpoint, this.floatingEndpoint.mergeParameters(this.jpc.suspendedEndpoint.parameters), this.jpc.endpoints[t] = this.floatingEndpoint, this.jpc.addClass(this.instance.draggingClass), this.floatingId = this.placeholderInfo.id, this.floatingIndex = t, this.instance._refreshEndpoint(this.ep);} }, { key: "_shouldStartDrag", value: function () {var t = !0;this.ep.enabled || (t = !1), null != this.jpc || this.ep.isSource || this.ep.isTemporarySource || (t = !1), !this.ep.isSource || !this.ep.isFull() || null != this.jpc && this.ep.dragAllowedWhenFull || (t = !1), null == this.jpc || this.jpc.isDetachable(this.ep) || (this.ep.isFull() ? t = !1 : this.jpc = null);var e = {},i = this.instance.checkCondition(null == this.jpc ? "beforeDrag" : "beforeStartDetach", { endpoint: this.ep, source: this.ep.element, sourceId: this.ep.elementId, connection: this.jpc });return !1 === i ? t = !1 : "object" === n(i) ? b(e = i, this.payload || {}) : e = this.payload || {}, [t, e];} }, { key: "_createFloatingEndpoint", value: function (t) {var e = this.ep.endpoint;null != this.ep.edgeType && (e = this.instance._deriveEndpointAndAnchorSpec(this.ep.edgeType).endpoints[1]), this.floatingEndpoint = function (t, e, i, n, r, s) {var o = function (t, e, i) {return new An(t, e, i);}(s, n, r),a = { paintStyle: t.getPaintStyle(), preparedAnchor: o, element: n, scope: t.scope, cssClass: [Tt, t.cssClass].join(" ") };null != e && (K(e, wn) ? a.existingEndpoint = e : a.endpoint = e);var l = s._internal_newEndpoint(a);return s._paintEndpoint(l, {}), l;}(this.ep, e, 0, this.placeholderInfo.element, this.placeholderInfo.id, this.instance), this.floatingAnchor = this.floatingEndpoint._anchor, this.floatingEndpoint.deleteOnEmpty = !0, this.floatingElement = this.floatingEndpoint.endpoint.canvas, this.floatingId = this.instance.getId(this.floatingElement);} }, { key: "_populateTargets", value: function (t, e) {var i,n,r,s = this,o = this.jpc && this.jpc.endpoints[0] === this.ep;if (M(this.instance.getContainer().querySelectorAll([".", kt, "[", St, this.ep.scope, "]:not(.", Tt, ")"].join("")), function (e) {if (!(null == s.jpc && e === t || e === s.floatingElement || null == s.jpc && e.jtk.endpoint.isFull()) && (o && e.jtk.endpoint.isSource || !o && e.jtk.endpoint.isTarget)) {var n = at(e, s.instance),r = lt(e, s.instance);i = { x: n.x, y: n.y, w: r.w, h: r.h }, s.endpointDropTargets.push({ el: e, targetEl: e, r: i, endpoint: e.jtk.endpoint, def: null }), s.instance.addClass(e, dn);}}), o) {var a = P(this.instance.sourceSelectors, function (t) {return t.isEnabled() && (null == t.def.def.scope || t.def.def.scope === s.ep.scope);});null != a && M(this._findTargetZones(a), function (t) {if (t.getAttribute(ne) !== si) {var e = t.getAttribute(re);if (null != e && e !== s.ep.scope) return;var i = { r: null, el: t };i.targetEl = X(t, Ut, s.instance.getContainer(), !0);var n = at(i.el, s.instance),r = lt(i.el, s.instance);i.r = { x: n.x, y: n.y, w: r.w, h: r.h }, null != a.def.def.rank && (i.rank = a.def.def.rank), i.def = a.def, s.endpointDropTargets.push(i), s.instance.addClass(i.targetEl, dn);}});} else {var l = (r = function (t, e) {var i = [];if (t) for (var n = 0; n < t.length; n++) e(t[n]) && i.push(n);return i;}(n = this.instance.targetSelectors, function (t) {return t.isEnabled();}), r.map(function (t) {return n[t];}));l.forEach(function (t) {M(s._findTargetZones(t), function (i) {if (i.getAttribute(ne) !== si) {var n = i.getAttribute(re);if (null != n && n !== s.ep.scope) return;var r = { r: null, el: i };if (null != t.def.def.parentSelector && (r.targetEl = X(i, t.def.def.parentSelector, s.instance.getContainer(), !0)), null == r.targetEl && (r.targetEl = X(i, Ut, s.instance.getContainer(), !0)), (!1 === t.def.def.allowLoopback || s._activeDefinition && !1 === s._activeDefinition.def.def.allowLoopback) && r.targetEl === s.ep.element) return;if (null != t.def.def.canAcceptNewConnection && !t.def.def.canAcceptNewConnection(r.targetEl, e)) return;var o = t.def.def.maxConnections;if (null != o && -1 !== o && s.instance.select({ target: r.targetEl }).length >= o) return;var a = at(i, s.instance),l = lt(i, s.instance);r.r = { x: a.x, y: a.y, w: l.w, h: l.h }, r.def = t.def, null != t.def.def.rank && (r.rank = t.def.def.rank), s.endpointDropTargets.push(r), s.instance.addClass(r.targetEl, dn);}});});}this.endpointDropTargets.sort(function (t, e) {if (t.targetEl._isJsPlumbGroup && !e.targetEl._isJsPlumbGroup) return 1;if (!t.targetEl._isJsPlumbGroup && e.targetEl._isJsPlumbGroup) return -1;if (t.targetEl._isJsPlumbGroup && e.targetEl._isJsPlumbGroup) {if (s.instance.groupManager.isAncestor(t.targetEl._jsPlumbGroup, e.targetEl._jsPlumbGroup)) return -1;if (s.instance.groupManager.isAncestor(e.targetEl._jsPlumbGroup, t.targetEl._jsPlumbGroup)) return 1;} else {if (null == t.rank || null == e.rank) return 0;if (t.rank > e.rank) return -1;if (t.rank < e.rank) return 1;}});} }, { key: "_findTargetZones", value: function (t) {var e;if ("any" === t.redrop) {var i = this.instance.targetSelectors.map(function (t) {return t.selector;});i.push.apply(i, g(this.instance.sourceSelectors.map(function (t) {return t.selector;}))), i.push(Ut), e = i.join(",");} else if (t.redrop === Yn) e = t.selector;else if ("anySource" === t.redrop) e = this.instance.sourceSelectors.map(function (t) {return t.selector;}).join(",");else if ("anyTarget" === t.redrop) e = this.instance.targetSelectors.map(function (t) {return t.selector;}).join(",");else if ("anySourceOrTarget" === t.redrop) {var n = this.instance.targetSelectors.map(function (t) {return t.selector;});n.push.apply(n, g(this.instance.sourceSelectors.map(function (t) {return t.selector;}))), e = n.join(",");}return this.instance.getContainer().querySelectorAll(e);} }, { key: "onStart", value: function (t) {this.endpointDropTargets.length = 0, this.currentDropTarget = null, this._stopped = !1;var e = t.drag.getDragElement();if (this.ep = e.jtk.endpoint, !this.ep) return !1;this.endpointRepresentation = this.ep.endpoint, this.canvasElement = this.endpointRepresentation.canvas, this.jpc = this.ep.connectorSelector();var i = f(this._shouldStartDrag(), 2),n = i[0],r = i[1];if (!1 === n) return this._stopped = !0, !1;this.instance.setHover(this.ep, !1), this.instance.isConnectionBeingDragged = !0, this.jpc && !this.ep.isFull() && this.ep.isSource && (this.jpc = null), this._createFloatingEndpoint(this.canvasElement), this._populateTargets(this.canvasElement, t.e), null == this.jpc ? this.startNewConnectionDrag(this.ep.scope, r) : this.startExistingConnectionDrag(), this._registerFloatingConnection(this.placeholderInfo, this.jpc), this.instance.currentlyDragging = !0;} }, { key: "onBeforeStart", value: function (t) {this.payload = t.e.payload || {};} }, { key: "onDrag", value: function (t) {if (this._stopped) return !0;if (this.placeholderInfo.element) {var e = lt(this.floatingElement, this.instance);this.instance.setElementPosition(this.placeholderInfo.element, t.pos.x, t.pos.y);for (var i, n, r = { x: t.pos.x, y: t.pos.y, w: e.w, h: e.h }, s = 0; s < this.endpointDropTargets.length; s++) if (Ri(r, this.endpointDropTargets[s].r)) {i = this.endpointDropTargets[s];break;}i !== this.currentDropTarget && null != this.currentDropTarget && (n = this._getFloatingAnchorIndex(), this.instance.removeClass(this.currentDropTarget.el, pn), this.currentDropTarget.endpoint && (this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass), this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)), this.floatingAnchor.out()), null != i && (this.instance.addClass(i.el, pn), n = this._getFloatingAnchorIndex(), null != i.endpoint && (i.endpoint.isSource && 0 === n || i.endpoint.isTarget && 0 !== n || this.jpc.suspendedEndpoint && i.endpoint.referenceEndpoint && i.endpoint.referenceEndpoint.id === this.jpc.suspendedEndpoint.id ? (this.instance.checkCondition("checkDropAllowed", { sourceEndpoint: this.jpc.endpoints[n], targetEndpoint: i.endpoint.endpoint, connection: this.jpc }) ? (i.endpoint.endpoint.addClass(this.instance.endpointDropAllowedClass), i.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)) : (i.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass), i.endpoint.endpoint.addClass(this.instance.endpointDropForbiddenClass)), this.floatingAnchor.over(i.endpoint), this.instance._paintConnection(this.jpc)) : i = null)), this.currentDropTarget = i;}} }, { key: "_maybeCleanup", value: function (t) {t._mtNew && 0 === t.connections.length ? this.instance.deleteEndpoint(t) : delete t._mtNew;} }, { key: "_reattachOrDiscard", value: function (t) {var e = null != this.jpc.suspendedEndpoint,i = this._getFloatingAnchorIndex();return e && this._shouldReattach() ? (0 === i ? (this.jpc.source = this.jpc.suspendedElement, this.jpc.sourceId = this.jpc.suspendedElementId) : (this.jpc.target = this.jpc.suspendedElement, this.jpc.targetId = this.jpc.suspendedElementId), this._doForceReattach(i), !0) : (this._discard(i, t), !1);} }, { key: "onStop", value: function (t) {var e = this,i = t.e;this.instance.isConnectionBeingDragged = !1, this.instance.currentlyDragging = !1;var n = function () {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];return e.join(" ");}(pn, dn);if (M(this.instance.getContainer().querySelectorAll(Jn), function (t) {e.instance.removeClass(t, n);}), this.jpc && null != this.jpc.endpoints) {var r,s = null != this.jpc.suspendedEndpoint,o = this._getFloatingAnchorIndex(),a = this.jpc.suspendedEndpoint;if (null != this.currentDropTarget) {if (null == (r = this._getDropEndpoint(t, this.jpc))) this._reattachOrDiscard(t.e);else if (a && a.id === r.id) this._doForceReattach(o);else if (r.enabled) {if (r.isFull()) r.fire(Lt, { endpoint: this, connection: this.jpc, maxConnections: this.instance.defaults.maxConnections }, i), this._reattachOrDiscard(t.e);else {0 === o ? (this.jpc.source = r.element, this.jpc.sourceId = r.elementId) : (this.jpc.target = r.element, this.jpc.targetId = r.elementId);var l = !0;s && this.jpc.suspendedEndpoint.id !== r.id && (this.jpc.isDetachAllowed(this.jpc) && this.jpc.endpoints[o].isDetachAllowed(this.jpc) && this.jpc.suspendedEndpoint.isDetachAllowed(this.jpc) && this.instance.checkCondition("beforeDetach", this.jpc) || (l = !1)), (l = l && r.isDropAllowed(this.jpc.sourceId, this.jpc.targetId, this.jpc.scope, this.jpc, r)) ? this._drop(r, o, i, l) : this._reattachOrDiscard(t.e);}} else this._reattachOrDiscard(t.e);} else this._reattachOrDiscard(t.e);this.instance._refreshEndpoint(this.ep), this.ep.removeClass(this.instance.draggingClass), this._cleanupDraggablePlaceholder(), this.jpc.removeClass(this.instance.draggingClass), delete this.jpc.suspendedEndpoint, delete this.jpc.suspendedElement, delete this.jpc.suspendedElementType, delete this.jpc.suspendedElementId, delete this.jpc.suspendedIndex, delete this.floatingId, delete this.floatingIndex, delete this.floatingElement, delete this.floatingEndpoint, delete this.floatingAnchor, delete this.jpc.pending, null != r && this._maybeCleanup(r);}} }, { key: "_getSourceDefinition", value: function (t) {for (var e, i = this.instance.getContainer(), n = 0; n < this.instance.sourceSelectors.length; n++) if ((e = this.instance.sourceSelectors[n]).isEnabled() && !1 !== Xn(t, i, e.selector, this.instance, e.exclude)) return e;} }, { key: "_getDropEndpoint", value: function (t, e) {var i;if (null == this.currentDropTarget.endpoint) {var n = this.currentDropTarget.def,r = t.e.target || t.e.srcElement;if (null == n) return null;var s = this.currentDropTarget.targetEl,o = ws(t.e, s, this.instance.currentZoom),a = this.instance._deriveEndpointAndAnchorSpec(e.getType().join(" "), !0),l = a.endpoints ? b(t, { endpoint: n.def.endpoint || a.endpoints[1], cssClass: n.def.cssClass || "", source: !0 === n.def.source, target: !0 === n.def.target }) : t,c = this.instance.validAnchorsSpec(a.anchors) ? a.anchors : this.instance.areDefaultAnchorsSet() ? this.instance.defaults.anchors : null,h = n.def.anchor,u = n.def.anchorPositionFinder ? n.def.anchorPositionFinder(s, o, n.def, t.e) : null,d = null != u ? u : null != h ? h : null != c && null != c[1] ? c[1] : null;if (null != d && (l = b(l, { anchor: d })), null != n.def.portId && (l.portId = n.def.portId), (l = T(l, n.def.parameterExtractor ? n.def.parameterExtractor(this.currentDropTarget.el, r, t.e) : {})).element = s, (i = this.instance._internal_newEndpoint(l))._mtNew = !0, i.deleteOnEmpty = !0, n.def.parameters && i.mergeParameters(n.def.parameters), n.def.extract) {var p = {};for (var f in n.def.extract) {var g = this.currentDropTarget.el.getAttribute(f);g && (p[n.def.extract[f]] = g);}i.mergeParameters(p);}} else i = this.currentDropTarget.endpoint;return i && (i.removeClass(this.instance.endpointDropAllowedClass), i.removeClass(this.instance.endpointDropForbiddenClass)), i;} }, { key: "_doForceReattach", value: function (t) {this.floatingEndpoint.detachFromConnection(this.jpc, null, !0), this.jpc.endpoints[t] = this.jpc.suspendedEndpoint, this.instance.setHover(this.jpc, !1), this.jpc._forceDetach = !0, this.jpc.suspendedEndpoint.addConnection(this.jpc), this.instance.sourceOrTargetChanged(this.floatingId, this.jpc.suspendedEndpoint.elementId, this.jpc, this.jpc.suspendedEndpoint.element, t), this.instance.deleteEndpoint(this.floatingEndpoint), this.instance.repaint(this.jpc.source), delete this.jpc._forceDetach;} }, { key: "_shouldReattach", value: function () {if (this.jpc.isReattach() || this.jpc._forceReattach) return !0;var t = this.jpc.suspendedEndpoint,e = this.jpc.suspendedElementType == dt ? 1 : 0,i = this.jpc.endpoints[e];return !A(!0, !1, [[t, Bt, [this.jpc]], [i, Bt, [this.jpc]], [this.jpc, Bt, [this.jpc]], [this.instance, Et, [zt, this.jpc]]]);} }, { key: "_discard", value: function (t, e) {this.jpc.pending ? this.instance.fire("connection:abort", this.jpc, e) : (0 === t ? (this.jpc.source = this.jpc.suspendedEndpoint.element, this.jpc.sourceId = this.jpc.suspendedEndpoint.elementId) : (this.jpc.target = this.jpc.suspendedEndpoint.element, this.jpc.targetId = this.jpc.suspendedEndpoint.elementId), this.jpc.endpoints[t] = this.jpc.suspendedEndpoint), this.floatingEndpoint && this.floatingEndpoint.detachFromConnection(this.jpc), this.instance.deleteConnection(this.jpc, { originalEvent: e, force: !0 });} }, { key: "_drop", value: function (t, e, i, n) {if (this.jpc.endpoints[e].detachFromConnection(this.jpc), this.jpc.suspendedEndpoint && this.jpc.suspendedEndpoint.detachFromConnection(this.jpc), this.jpc.endpoints[e] = t, t.addConnection(this.jpc), this.jpc.suspendedEndpoint) {var r = this.jpc.suspendedEndpoint.elementId;this.instance.fireMoveEvent({ index: e, originalSourceId: 0 === e ? r : this.jpc.sourceId, newSourceId: 0 === e ? t.elementId : this.jpc.sourceId, originalTargetId: 1 === e ? r : this.jpc.targetId, newTargetId: 1 === e ? t.elementId : this.jpc.targetId, originalEndpoint: this.jpc.suspendedEndpoint, connection: this.jpc, newEndpoint: t }, i);}1 === e ? this.instance.sourceOrTargetChanged(this.floatingId, this.jpc.targetId, this.jpc, this.jpc.target, 1) : this.instance.sourceOrTargetChanged(this.floatingId, this.jpc.sourceId, this.jpc, this.jpc.source, 0), this.jpc.endpoints[0].finalEndpoint && (this.jpc.endpoints[0].detachFromConnection(this.jpc), this.jpc.endpoints[0] = this.jpc.endpoints[0].finalEndpoint, this.jpc.endpoints[0].addConnection(this.jpc)), E(n) && this.jpc.mergeData(n), this._originalAnchorSpec && (this.jpc.endpoints[0].setAnchor(this._originalAnchorSpec), this._originalAnchorSpec = null), this.instance._finaliseConnection(this.jpc, null, i), this.instance.setHover(this.jpc, !1), this.instance.revalidate(this.jpc.endpoints[0].element);} }, { key: "_registerFloatingConnection", value: function (t, e) {this.floatingConnections[t.id] = e;} }, { key: "_getFloatingAnchorIndex", value: function () {return null == this.floatingIndex ? 1 : this.floatingIndex;} }]), t;}(),er = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), (s = e.call(this, t, n)).instance = t, s.dragSelection = n, a(u(s), "selector", [">", Ye, Ut].join(" ")), a(u(s), "doRevalidate", void 0), s.doRevalidate = s._revalidate.bind(u(s)), s;}return o(i, [{ key: "reset", value: function () {this.drag.off(we, this.doRevalidate);} }, { key: "_revalidate", value: function (t) {this.instance.revalidate(t);} }, { key: "init", value: function (t) {this.drag = t, t.on(we, this.doRevalidate);} }, { key: "useGhostProxy", value: function (t, e) {var i = e._jsPlumbParentGroup;return null != i && !0 === i.ghost;} }, { key: "makeGhostProxy", value: function (t) {var e = t,i = e.cloneNode(!0);return i._jsPlumbParentGroup = e._jsPlumbParentGroup, i;} }]), i;}(gn),ir = function () {function t(e, i) {r(this, t), this.instance = e, this.overlay = i, a(this, "htmlElementOverlay", void 0), this.htmlElementOverlay = i;}return o(t, null, [{ key: "getElement", value: function (t, e, i) {if (null == t.canvas) {if (i && e) {t.canvas = i(e);var n = t.instance.overlayClass + " " + (t.cssClass ? t.cssClass : "");t.instance.addClass(t.canvas, n);} else t.canvas = rt("div", {}, t.instance.overlayClass + " " + (t.cssClass ? t.cssClass : ""));for (var r in t.instance.setAttribute(t.canvas, "jtk-overlay-id", t.id), t.attributes) t.instance.setAttribute(t.canvas, r, t.attributes[r]);t.canvas.style.position = mt, t.instance._appendElement(t.canvas, t.instance.getContainer()), t.instance.getId(t.canvas);var s = "translate(-50%, -50%)";t.canvas.style.webkitTransform = s, t.canvas.style.mozTransform = s, t.canvas.style.msTransform = s, t.canvas.style.oTransform = s, t.canvas.style.transform = s, t.isVisible() || (t.canvas.style.display = gt), t.canvas.jtk = { overlay: t };}return t.canvas;} }, { key: "destroy", value: function (t) {t.canvas && t.canvas.parentNode && t.canvas.parentNode.removeChild(t.canvas), delete t.canvas, delete t.cachedDimensions;} }, { key: "_getDimensions", value: function (t, e) {return (null == t.cachedDimensions || e) && (t.cachedDimensions = { w: 1, h: 1 }), t.cachedDimensions;} }]), t;}(),nr = function () {function t() {r(this, t), a(this, "_listeners", {}), a(this, "eventsSuspended", !1), a(this, "tick", !1), a(this, "eventsToDieOn", { ready: !0 }), a(this, "queue", []);}return o(t, [{ key: "fire", value: function (t, e, i) {var n = null;if (this.tick) this.queue.unshift(arguments);else {if (this.tick = !0, !this.eventsSuspended && this._listeners[t]) {var r = this._listeners[t].length,s = 0,o = !1;if (!this.shouldFireEvent || this.shouldFireEvent(t, e, i)) for (; !o && s < r && !1 !== n;) {if (this.eventsToDieOn[t]) this._listeners[t][s](e, i);else try {n = this._listeners[t][s](e, i);} catch (e) {q("jsPlumb: fire failed for event " + t + " : " + (e.message || e));}s++, null != this._listeners && null != this._listeners[t] || (o = !0);}}this.tick = !1, this._drain();}return n;} }, { key: "_drain", value: function () {var t = this.queue.pop();t && this.fire.apply(this, t);} }, { key: "unbind", value: function (t, e) {if (0 === arguments.length) this._listeners = {};else if (1 === arguments.length) {if ("string" == typeof t) delete this._listeners[t];else if (t.__jsPlumb) {var i;for (var n in t.__jsPlumb) i = t.__jsPlumb[n], F(this._listeners[i] || [], t);}} else 2 === arguments.length && F(this._listeners[t] || [], e);return this;} }, { key: "getListener", value: function (t) {return this._listeners[t] || [];} }, { key: "isSuspendEvents", value: function () {return this.eventsSuspended;} }, { key: "setSuspendEvents", value: function (t) {this.eventsSuspended = t;} }, { key: "bind", value: function (t, e, i) {var n = this,r = function (t) {R(n._listeners, t, e, i), e.__jsPlumb = e.__jsPlumb || {}, e.__jsPlumb[B()] = t;};if ("string" == typeof t) r(t);else if (null != t.length) for (var s = 0; s < t.length; s++) r(t[s]);return this;} }, { key: "silently", value: function (t) {this.setSuspendEvents(!0);try {t();} catch (t) {q("Cannot execute silent function " + t);}this.setSuspendEvents(!1);} }]), t;}();function rr(t) {var e = null;return (e = x(t) ? { type: t, options: {} } : t).options.id = e.options.id || B(), e;}!function (t) {l(i, t);var e = d(i);function i() {return r(this, i), e.apply(this, arguments);}o(i, [{ key: "shouldFireEvent", value: function (t, e, i) {return !0;} }]);}(nr);var sr = function (t) {l(i, t);var e = d(i);function i(t, n, s) {var o;for (var l in r(this, i), (o = e.call(this)).instance = t, o.component = n, a(u(o), "id", void 0), a(u(o), "type", void 0), a(u(o), "cssClass", void 0), a(u(o), "visible", !0), a(u(o), "location", void 0), a(u(o), "events", void 0), a(u(o), "attributes", void 0), s = s || {}, o.id = s.id || B(), o.cssClass = s.cssClass || "", o.setLocation(s.location), o.events = s.events || {}, o.attributes = s.attributes || {}, o.events) o.bind(l, o.events[l]);return o;}return o(i, [{ key: "setLocation", value: function (t) {var e = null == this.location ? .5 : this.location;if (null != t) try {var i = "string" == typeof t ? parseFloat(t) : t;isNaN(i) || (e = i);} catch (t) {}this.location = e;} }, { key: "shouldFireEvent", value: function (t, e, i) {return !0;} }, { key: "setVisible", value: function (t) {this.visible = t, this.instance.setOverlayVisible(this, t);} }, { key: "isVisible", value: function () {return this.visible;} }]), i;}(nr),or = {},ar = function (t, e, i, n) {var r = or[e];if (r) return new r(t, i, n);throw { message: "jsPlumb: unknown overlay type '" + e + "'" };},lr = function (t, e) {or[t] = e;},cr = function (t) {l(i, t);var e = d(i);function i(t, n, s) {var o;return r(this, i), (o = e.call(this, t, n, s)).instance = t, o.component = n, a(u(o), "label", void 0), a(u(o), "labelText", void 0), a(u(o), "type", i.type), a(u(o), "cachedDimensions", void 0), s = s || { label: "" }, o.setLabel(s.label), o;}return o(i, [{ key: "getLabel", value: function () {return C(this.label) ? this.label(this) : this.labelText;} }, { key: "setLabel", value: function (t) {this.label = t, this.labelText = null, this.instance.updateLabel(this);} }, { key: "getDimensions", value: function () {return { w: 1, h: 1 };} }, { key: "updateFrom", value: function (t) {null != t.label && this.setLabel(t.label), null != t.location && (this.setLocation(t.location), this.instance.updateLabel(this));} }]), i;}(sr);function hr(t) {return t.type === cr.type;}function ur(t) {return null == t ? null : t.split(" ").filter(function (t) {return null != t && t.length > 0;});}function dr(t, e, i) {for (var n in e) t[n] = i;}a(cr, "type", "Label"), lr(cr.type, cr);var pr = "__default",fr = "__label",gr = "overlay",mr = "remove";function vr(t, e) {if (t.getDefaultType) {var i = t.getTypeDescriptor(),n = {},r = t.getDefaultType(),s = b({}, r);dr(n, r, pr), t._types.forEach(function (e) {if (e !== pr) {var r = t.instance.getType(e, i);if (null != r) {var o = new Set(["connector", "anchor", "anchors"]);if ("override" === r.mergeStrategy) for (var a in r) o.add(a);s = T(s, r, ["cssClass"], (l = [], o.forEach(function (t) {l.push(t);}), l)), dr(n, r, e);}}var l;}), e && (o = e, a = "_", s = function t(e) {if (null != e) {if (x(e)) return function (t) {var e = t.match(/(\${.*?})/g);if (null != e) for (var i = 0; i < e.length; i++) {var n = o[e[i].substring(2, e[i].length - 1)] || "";null != n && (t = t.replace(e[i], n));}if (null != (e = t.match(/({{.*?}})/g))) for (var r = 0; r < e.length; r++) {var s = o[e[r].substring(2, e[r].length - 2)] || "";null != s && (t = t.replace(e[r], s));}return t;}(e);if (!C(e) || l || null != a && 0 !== (e.name || "").indexOf(a)) {if (Array.isArray(e)) {for (var i = [], n = 0; n < e.length; n++) i.push(t(e[n]));return i;}if (E(e)) {var r = {};for (var s in e) r[s] = t(e[s]);return r;}return e;}return e(o);}}(s)), t.applyType(s, n);}var o, a, l;}function yr(t, e) {var i = t.instance.getType(e, t.getTypeDescriptor());null != i && i.cssClass && t.removeClass(i.cssClass);}function br(t) {if (t.paintStyle && t.hoverPaintStyle) {var e = {};b(e, t.paintStyle), b(e, t.hoverPaintStyle), t.hoverPaintStyle = e;}}var wr = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;if (r(this, i), (s = e.call(this)).instance = t, a(u(s), "defaultLabelLocation", .5), a(u(s), "overlays", {}), a(u(s), "overlayPositions", {}), a(u(s), "overlayPlacements", {}), a(u(s), "clone", void 0), a(u(s), "deleted", void 0), a(u(s), "segment", void 0), a(u(s), "x", void 0), a(u(s), "y", void 0), a(u(s), "w", void 0), a(u(s), "h", void 0), a(u(s), "id", void 0), a(u(s), "visible", !0), a(u(s), "typeId", void 0), a(u(s), "params", {}), a(u(s), "paintStyle", void 0), a(u(s), "hoverPaintStyle", void 0), a(u(s), "paintStyleInUse", void 0), a(u(s), "_hover", !1), a(u(s), "lastPaintedAt", void 0), a(u(s), "data", void 0), a(u(s), "_defaultType", void 0), a(u(s), "events", void 0), a(u(s), "parameters", void 0), a(u(s), "_types", void 0), a(u(s), "_typeCache", void 0), a(u(s), "cssClass", void 0), a(u(s), "hoverClass", void 0), a(u(s), "beforeDetach", void 0), a(u(s), "beforeDrop", void 0), n = n || {}, s.cssClass = n.cssClass || "", s.hoverClass = n.hoverClass || t.defaults.hoverClass, s.beforeDetach = n.beforeDetach, s.beforeDrop = n.beforeDrop, s._types = new Set(), s._typeCache = {}, s.parameters = k(n.parameters || {}), s.id = n.id || s.getIdPrefix() + new Date().getTime(), s._defaultType = { parameters: s.parameters, scope: n.scope || s.instance.defaultScope, overlays: {} }, n.events) for (var o in n.events) s.bind(o, n.events[o]);s.clone = function () {var e = Object.create(s.constructor.prototype);return s.constructor.apply(e, [t, n]), e;}, s.overlays = {}, s.overlayPositions = {};var l = n.overlays || [],c = {},h = s.getDefaultOverlayKey();if (h) {var d = s.instance.defaults[h];d && l.push.apply(l, g(d));for (var p = 0; p < l.length; p++) {var f = rr(l[p]);c[f.options.id] = f;}}return s._defaultType.overlays = c, n.label && (s.getDefaultType().overlays[fr] = { type: cr.type, options: { label: n.label, location: n.labelLocation || s.defaultLabelLocation, id: fr, cssClass: "jtk-default-label" } }), s;}return o(i, [{ key: "isDetachAllowed", value: function (t) {var e = !0;if (this.beforeDetach) try {e = this.beforeDetach(t);} catch (t) {q("jsPlumb: beforeDetach callback failed", t);}return e;} }, { key: "isDropAllowed", value: function (t, e, i, n, r) {var s,o = { sourceId: t, targetId: e, scope: i, connection: n, dropEndpoint: r };if (this.beforeDrop) try {s = this.beforeDrop(o);} catch (t) {q("jsPlumb: beforeDrop callback failed", t);} else s = this.instance.checkCondition(jt, o);return s;} }, { key: "getDefaultType", value: function () {return this._defaultType;} }, { key: "appendToDefaultType", value: function (t) {for (var e in t) this._defaultType[e] = t[e];} }, { key: "getId", value: function () {return this.id;} }, { key: "cacheTypeItem", value: function (t, e, i) {this._typeCache[i] = this._typeCache[i] || {}, this._typeCache[i][t] = e;} }, { key: "getCachedTypeItem", value: function (t, e) {return this._typeCache[e] ? this._typeCache[e][t] : null;} }, { key: "setType", value: function (t, e) {this.clearTypes(), (ur(t) || []).forEach(this._types.add, this._types), vr(this, e);} }, { key: "getType", value: function () {return Array.from(this._types.keys());} }, { key: "reapplyTypes", value: function (t) {vr(this, t);} }, { key: "hasType", value: function (t) {return this._types.has(t);} }, { key: "addType", value: function (t, e) {var i = ur(t),n = !1;if (null != i) {for (var r = 0, s = i.length; r < s; r++) this._types.has(i[r]) || (this._types.add(i[r]), n = !0);n && vr(this, e);}} }, { key: "removeType", value: function (t, e) {var i = this,n = ur(t),r = !1,s = function (t) {return !!i._types.has(t) && (yr(i, t), i._types.delete(t), !0);};if (null != n) {for (var o = 0, a = n.length; o < a; o++) r = s(n[o]) || r;r && vr(this, e);}} }, { key: "clearTypes", value: function (t) {var e = this;this._types.forEach(function (t) {yr(e, t);}), this._types.clear(), vr(this, t);} }, { key: "toggleType", value: function (t, e) {var i = ur(t);if (null != i) {for (var n = 0, r = i.length; n < r; n++) this._types.has(i[n]) ? (yr(this, i[n]), this._types.delete(i[n])) : this._types.add(i[n]);vr(this, e);}} }, { key: "applyType", value: function (t, e) {if (this.setPaintStyle(t.paintStyle), this.setHoverPaintStyle(t.hoverPaintStyle), this.mergeParameters(t.parameters), this.paintStyleInUse = this.getPaintStyle(), t.overlays) {var i,n = {};for (i in t.overlays) {var r = this.overlays[t.overlays[i].options.id];if (r) r.updateFrom(t.overlays[i].options), n[t.overlays[i].options.id] = !0, this.instance.reattachOverlay(r, this);else {var s = this.getCachedTypeItem(gr, t.overlays[i].options.id);null != s ? (this.instance.reattachOverlay(s, this), s.setVisible(!0), s.updateFrom(t.overlays[i].options), this.overlays[s.id] = s) : s = this.addOverlay(t.overlays[i]), n[s.id] = !0;}}for (i in this.overlays) null == n[this.overlays[i].id] && this.removeOverlay(this.overlays[i].id, !0);}} }, { key: "setPaintStyle", value: function (t) {this.paintStyle = t, this.paintStyleInUse = this.paintStyle, br(this);} }, { key: "getPaintStyle", value: function () {return this.paintStyle;} }, { key: "setHoverPaintStyle", value: function (t) {this.hoverPaintStyle = t, br(this);} }, { key: "getHoverPaintStyle", value: function () {return this.hoverPaintStyle;} }, { key: "destroy", value: function () {for (var t in this.overlays) this.instance.destroyOverlay(this.overlays[t]);this.overlays = {}, this.overlayPositions = {}, this.unbind(), this.clone = null;} }, { key: "isHover", value: function () {return this._hover;} }, { key: "mergeParameters", value: function (t) {null != t && b(this.parameters, t);} }, { key: "setVisible", value: function (t) {this.visible = t, t ? this.showOverlays() : this.hideOverlays();} }, { key: "isVisible", value: function () {return this.visible;} }, { key: "setAbsoluteOverlayPosition", value: function (t, e) {this.overlayPositions[t.id] = e;} }, { key: "getAbsoluteOverlayPosition", value: function (t) {return this.overlayPositions ? this.overlayPositions[t.id] : null;} }, { key: "_clazzManip", value: function (t, e) {for (var i in this.overlays) "add" === t ? this.instance.addOverlayClass(this.overlays[i], e) : t === mr && this.instance.removeOverlayClass(this.overlays[i], e);} }, { key: "addClass", value: function (t, e) {var i = (this.cssClass || "").split(" ");i.push(t), this.cssClass = i.join(" "), this._clazzManip("add", t);} }, { key: "removeClass", value: function (t, e) {var i = (this.cssClass || "").split(" ");this.cssClass = i.filter(function (e) {return e !== t;}).join(" "), this._clazzManip(mr, t);} }, { key: "getClass", value: function () {return this.cssClass;} }, { key: "shouldFireEvent", value: function (t, e, i) {return !0;} }, { key: "getData", value: function () {return this.data;} }, { key: "setData", value: function (t) {this.data = t || {};} }, { key: "mergeData", value: function (t) {this.data = b(this.data, t);} }, { key: "addOverlay", value: function (t) {var e = function (t, e) {var i = null;if (x(e)) i = ar(t.instance, e, t, {});else if (null != e.type && null != e.options) {var n = e,r = b({}, n.options);i = ar(t.instance, n.type, t, r);} else i = e;return i.id = i.id || B(), t.cacheTypeItem(gr, i, i.id), t.overlays[i.id] = i, i;}(this, t);if (this.getData && e.type === cr.type && !x(t)) {var i = this.getData(),n = t.options;if (i) {var r = i[n.labelLocationAttribute || "labelLocation"];r && (e.location = r);}}return e;} }, { key: "getOverlay", value: function (t) {return this.overlays[t];} }, { key: "getOverlays", value: function () {return this.overlays;} }, { key: "hideOverlay", value: function (t) {var e = this.getOverlay(t);e && e.setVisible(!1);} }, { key: "hideOverlays", value: function () {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];for (var n in e = e || [], this.overlays) 0 !== e.length && -1 === e.indexOf(n) || this.overlays[n].setVisible(!1);} }, { key: "showOverlay", value: function (t) {var e = this.getOverlay(t);e && e.setVisible(!0);} }, { key: "showOverlays", value: function () {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];for (var n in e = e || [], this.overlays) 0 !== e.length && -1 === e.indexOf(n) || this.overlays[n].setVisible(!0);} }, { key: "removeAllOverlays", value: function () {for (var t in this.overlays) this.instance.destroyOverlay(this.overlays[t]);this.overlays = {}, this.overlayPositions = null, this.overlayPlacements = {};} }, { key: "removeOverlay", value: function (t, e) {var i = this.overlays[t];i && (i.setVisible(!1), e || this.instance.destroyOverlay(i), delete this.overlays[t], this.overlayPositions && delete this.overlayPositions[t], this.overlayPlacements && delete this.overlayPlacements[t]);} }, { key: "removeOverlays", value: function () {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];for (var n = 0, r = e.length; n < r; n++) this.removeOverlay(arguments[n]);} }, { key: "getLabel", value: function () {var t = this.getLabelOverlay();return null != t ? t.getLabel() : null;} }, { key: "getLabelOverlay", value: function () {return this.getOverlay(fr);} }, { key: "setLabel", value: function (t) {var e,i,n,r = this.getLabelOverlay();if (r) {if (x(t) || C(t)) r.setLabel(t);else {var s = t;s.label && r.setLabel(s.label), s.location && (r.location = s.location);}} else e = this, n = b({ cssClass: (i = x(t) || C(t) ? { label: t } : t).cssClass, id: fr, component: e }, i), r = new cr(e.instance, e, n), this.overlays[fr] = r;} }]), i;}(nr),xr = ["connectorStyle", "connectorHoverStyle", "connectorOverlays", "connector", "connectionType", "connectorClass", "connectorHoverClass"],Sr = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;r(this, i), (s = e.call(this, t, n)).instance = t, a(u(s), "connections", []), a(u(s), "endpoint", void 0), a(u(s), "element", void 0), a(u(s), "elementId", void 0), a(u(s), "dragAllowedWhenFull", !0), a(u(s), "timestamp", void 0), a(u(s), "portId", void 0), a(u(s), "maxConnections", void 0), a(u(s), "proxiedBy", void 0), a(u(s), "connectorClass", void 0), a(u(s), "connectorHoverClass", void 0), a(u(s), "finalEndpoint", void 0), a(u(s), "enabled", !0), a(u(s), "isSource", void 0), a(u(s), "isTarget", void 0), a(u(s), "isTemporarySource", void 0), a(u(s), "connectionCost", 1), a(u(s), "connectionsDirected", void 0), a(u(s), "connectionsDetachable", void 0), a(u(s), "reattachConnections", void 0), a(u(s), "currentAnchorClass", void 0), a(u(s), "referenceEndpoint", void 0), a(u(s), "edgeType", void 0), a(u(s), "connector", void 0), a(u(s), "connectorOverlays", void 0), a(u(s), "connectorStyle", void 0), a(u(s), "connectorHoverStyle", void 0), a(u(s), "deleteOnEmpty", void 0), a(u(s), "uuid", void 0), a(u(s), "scope", void 0), a(u(s), "_anchor", void 0), a(u(s), "defaultLabelLocation", [.5, .5]), s.appendToDefaultType({ edgeType: n.edgeType, maxConnections: null == n.maxConnections ? s.instance.defaults.maxConnections : n.maxConnections, paintStyle: n.paintStyle || s.instance.defaults.endpointStyle, hoverPaintStyle: n.hoverPaintStyle || s.instance.defaults.endpointHoverStyle, connectorStyle: n.connectorStyle, connectorHoverStyle: n.connectorHoverStyle, connectorClass: n.connectorClass, connectorHoverClass: n.connectorHoverClass, connectorOverlays: n.connectorOverlays, connector: n.connector }), s.enabled = !(!1 === n.enabled), s.visible = !0, s.element = n.element, s.uuid = n.uuid, s.portId = n.portId, s.elementId = n.elementId, s.connectionCost = null == n.connectionCost ? 1 : n.connectionCost, s.connectionsDirected = n.connectionsDirected, s.currentAnchorClass = "", s.events = {}, s.connectorOverlays = n.connectorOverlays, s.connectorStyle = n.connectorStyle, s.connectorHoverStyle = n.connectorHoverStyle, s.connector = n.connector, s.edgeType = n.edgeType, s.connectorClass = n.connectorClass, s.connectorHoverClass = n.connectorHoverClass, s.deleteOnEmpty = !0 === n.deleteOnEmpty, s.isSource = n.source || !1, s.isTemporarySource = n.isTemporarySource || !1, s.isTarget = n.target || !1, s.connections = n.connections || [], s.scope = n.scope || t.defaultScope, s.timestamp = null, s.reattachConnections = n.reattachConnections || t.defaults.reattachConnections, s.connectionsDetachable = t.defaults.connectionsDetachable, !1 === n.connectionsDetachable && (s.connectionsDetachable = !1), s.dragAllowedWhenFull = !1 !== n.dragAllowedWhenFull, n.onMaxConnections && s.bind(Lt, n.onMaxConnections);var o = n.endpoint || n.existingEndpoint || t.defaults.endpoint;if (s.setEndpoint(o), null != n.preparedAnchor) s.setPreparedAnchor(n.preparedAnchor);else {var l = n.anchor ? n.anchor : n.anchors ? n.anchors : t.defaults.anchor || ee.Top;s.setAnchor(l);}var c = [ni, n.type || ""].join(" ");return s.addType(c, n.data), s;}return o(i, [{ key: "getIdPrefix", value: function () {return "_jsplumb_e";} }, { key: "getTypeDescriptor", value: function () {return "endpoint";} }, { key: "getXY", value: function () {return { x: this.endpoint.x, y: this.endpoint.y };} }, { key: "getDefaultOverlayKey", value: function () {return "endpointOverlays";} }, { key: "_updateAnchorClass", value: function () {var t = this._anchor && this._anchor.cssClass;if (null != t && t.length > 0) {var e = this.instance.endpointAnchorClassPrefix + "-" + this.currentAnchorClass;this.currentAnchorClass = t;var i = this.instance.endpointAnchorClassPrefix + (this.currentAnchorClass ? "-" + this.currentAnchorClass : "");e !== i && (this.removeClass(e), this.addClass(i), this.instance.removeClass(this.element, e), this.instance.addClass(this.element, i));}} }, { key: "setPreparedAnchor", value: function (t) {return this.instance.router.setAnchor(this, t), this._updateAnchorClass(), this;} }, { key: "_anchorLocationChanged", value: function (t) {this.fire("anchor:changed", { endpoint: this, anchor: t }), this._updateAnchorClass();} }, { key: "setAnchor", value: function (t) {var e = this.instance.router.prepareAnchor(t);return this.setPreparedAnchor(e), this;} }, { key: "addConnection", value: function (t) {this.connections.push(t), this.instance._refreshEndpoint(this);} }, { key: "detachFromConnection", value: function (t, e, i) {(e = null == e ? this.connections.indexOf(t) : e) >= 0 && (this.connections.splice(e, 1), this.instance._refreshEndpoint(this)), !i && this.deleteOnEmpty && 0 === this.connections.length && this.instance.deleteEndpoint(this);} }, { key: "deleteEveryConnection", value: function (t) {for (var e = this.connections.length, i = 0; i < e; i++) this.instance.deleteConnection(this.connections[0], t);} }, { key: "detachFrom", value: function (t) {for (var e = [], i = 0; i < this.connections.length; i++) this.connections[i].endpoints[1] !== t && this.connections[i].endpoints[0] !== t || e.push(this.connections[i]);for (var n = 0, r = e.length; n < r; n++) this.instance.deleteConnection(e[0]);return this;} }, { key: "setVisible", value: function (t, e, n) {if (p(c(i.prototype), "setVisible", this).call(this, t), this.endpoint.setVisible(t), t ? this.showOverlays() : this.hideOverlays(), !e) for (var r = 0; r < this.connections.length; r++) if (this.connections[r].setVisible(t), !n) {var s = this === this.connections[r].endpoints[0] ? 1 : 0;1 === this.connections[r].endpoints[s].connections.length && this.connections[r].endpoints[s].setVisible(t, !0, !0);}} }, { key: "applyType", value: function (t, e) {p(c(i.prototype), "applyType", this).call(this, t, e), this.setPaintStyle(t.endpointStyle || t.paintStyle), this.setHoverPaintStyle(t.endpointHoverStyle || t.hoverPaintStyle), this.connectorStyle = t.connectorStyle, this.connectorHoverStyle = t.connectorHoverStyle, this.connector = t.connector, this.connectorOverlays = t.connectorOverlays, this.edgeType = t.edgeType, null != t.maxConnections && (this.maxConnections = t.maxConnections), t.scope && (this.scope = t.scope), b(t, xr), this.instance.applyEndpointType(this, t);} }, { key: "destroy", value: function () {p(c(i.prototype), "destroy", this).call(this), this.deleted = !0, null != this.endpoint && this.instance.destroyEndpoint(this);} }, { key: "isFull", value: function () {return 0 === this.maxConnections || !(this.isFloating() || this.maxConnections < 0 || this.connections.length < this.maxConnections);} }, { key: "isFloating", value: function () {return this.instance.router.isFloating(this);} }, { key: "isConnectedTo", value: function (t) {var e = !1;if (t) for (var i = 0; i < this.connections.length; i++) if (this.connections[i].endpoints[1] === t || this.connections[i].endpoints[0] === t) {e = !0;break;}return e;} }, { key: "setDragAllowedWhenFull", value: function (t) {this.dragAllowedWhenFull = t;} }, { key: "getUuid", value: function () {return this.uuid;} }, { key: "connectorSelector", value: function () {return this.connections[0];} }, { key: "prepareEndpoint", value: function (t, e) {var i,n = { cssClass: this.cssClass, endpoint: this };if (K(t, wn)) {var r = t;(i = bn.clone(r)).classes = n.cssClass.split(" ");} else if (x(t)) i = bn.get(this, t, n);else {var s = t;b(n, s.options || {}), i = bn.get(this, s.type, n);}return i.typeId = e, i;} }, { key: "setEndpoint", value: function (t) {var e = this.prepareEndpoint(t);this.setPreparedEndpoint(e);} }, { key: "setPreparedEndpoint", value: function (t) {null != this.endpoint && this.instance.destroyEndpoint(this), this.endpoint = t;} }, { key: "addClass", value: function (t, e) {p(c(i.prototype), "addClass", this).call(this, t, e), null != this.endpoint && this.endpoint.addClass(t);} }, { key: "removeClass", value: function (t, e) {p(c(i.prototype), "removeClass", this).call(this, t, e), null != this.endpoint && this.endpoint.removeClass(t);} }]), i;}(wr),Er = "anchors",Cr = "connector";function kr(t, e, i, n, r, s, o) {var a;if (e) t.endpoints[i] = e, e.addConnection(t);else {var l = o || t.endpointSpec || t.endpointsSpec[i] || t.instance.defaults.endpoints[i] || t.instance.defaults.endpoint,c = t.endpointStyles[i] || t.endpointStyle || t.instance.defaults.endpointStyles[i] || t.instance.defaults.endpointStyle;null == c.fill && null != t.paintStyle && (c.fill = t.paintStyle.stroke), null == c.outlineStroke && null != t.paintStyle && (c.outlineStroke = t.paintStyle.outlineStroke), null == c.outlineWidth && null != t.paintStyle && (c.outlineWidth = t.paintStyle.outlineWidth);var h = t.endpointHoverStyles[i] || t.endpointHoverStyle || t.endpointHoverStyle || t.instance.defaults.endpointHoverStyles[i] || t.instance.defaults.endpointHoverStyle;null != t.hoverPaintStyle && (null == h && (h = {}), null == h.fill && (h.fill = t.hoverPaintStyle.stroke));var u = t.uuids ? t.uuids[i] : null;n = null != n ? n : null != t.instance.defaults.anchors ? t.instance.defaults.anchors[i] : t.instance.defaults.anchor, a = t.instance._internal_newEndpoint({ paintStyle: c, hoverPaintStyle: h, endpoint: l, connections: [t], uuid: u, element: r, scope: t.scope, anchor: n, reattachConnections: t.reattach || t.instance.defaults.reattachConnections, connectionsDetachable: t.detachable || t.instance.defaults.connectionsDetachable }), t.instance._refreshEndpoint(a), null == e && (a.deleteOnEmpty = !0), t.endpoints[i] = a;}return a;}var Tr = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;r(this, i), (s = e.call(this, t, n)).instance = t, a(u(s), "connector", void 0), a(u(s), "defaultLabelLocation", .5), a(u(s), "scope", void 0), a(u(s), "typeId", "_jsplumb_connection"), a(u(s), "previousConnection", void 0), a(u(s), "sourceId", void 0), a(u(s), "targetId", void 0), a(u(s), "source", void 0), a(u(s), "target", void 0), a(u(s), "detachable", !0), a(u(s), "reattach", !1), a(u(s), "uuids", void 0), a(u(s), "cost", 1), a(u(s), "directed", void 0), a(u(s), "endpoints", [null, null]), a(u(s), "endpointStyles", void 0), a(u(s), "endpointSpec", void 0), a(u(s), "endpointsSpec", void 0), a(u(s), "endpointStyle", {}), a(u(s), "endpointHoverStyle", {}), a(u(s), "endpointHoverStyles", void 0), a(u(s), "suspendedEndpoint", void 0), a(u(s), "suspendedIndex", void 0), a(u(s), "suspendedElement", void 0), a(u(s), "suspendedElementId", void 0), a(u(s), "suspendedElementType", void 0), a(u(s), "_forceReattach", void 0), a(u(s), "_forceDetach", void 0), a(u(s), "proxies", []), a(u(s), "pending", !1), s.id = n.id, s.previousConnection = n.previousConnection, s.source = n.source, s.target = n.target, n.sourceEndpoint ? (s.source = n.sourceEndpoint.element, s.sourceId = n.sourceEndpoint.elementId) : s.sourceId = t.getId(s.source), n.targetEndpoint ? (s.target = n.targetEndpoint.element, s.targetId = n.targetEndpoint.elementId) : s.targetId = t.getId(s.target), s.scope = n.scope;var o = n.anchors ? n.anchors[0] : n.anchor,l = n.anchors ? n.anchors[1] : n.anchor;t.manage(s.source), t.manage(s.target), s.visible = !0, s.params = { cssClass: n.cssClass, hoverClass: n.hoverClass, "pointer-events": n["pointer-events"], overlays: n.overlays }, s.lastPaintedAt = null, n.type && (n.endpoints = n.endpoints || s.instance._deriveEndpointAndAnchorSpec(n.type).endpoints), s.endpointSpec = n.endpoint, s.endpointsSpec = n.endpoints || [null, null], s.endpointStyle = n.endpointStyle, s.endpointHoverStyle = n.endpointHoverStyle, s.endpointStyles = n.endpointStyles || [null, null], s.endpointHoverStyles = n.endpointHoverStyles || [null, null], s.paintStyle = n.paintStyle, s.hoverPaintStyle = n.hoverPaintStyle, s.uuids = n.uuids, s.makeEndpoint(!0, s.source, s.sourceId, o, n.sourceEndpoint), s.makeEndpoint(!1, s.target, s.targetId, l, n.targetEndpoint), s.scope || (s.scope = s.endpoints[0].scope), null != n.deleteEndpointsOnEmpty && (s.endpoints[0].deleteOnEmpty = n.deleteEndpointsOnEmpty, s.endpoints[1].deleteOnEmpty = n.deleteEndpointsOnEmpty);var c = s.instance.defaults.connectionsDetachable;!1 === n.detachable && (c = !1), !1 === s.endpoints[0].connectionsDetachable && (c = !1), !1 === s.endpoints[1].connectionsDetachable && (c = !1), s.endpointsSpec = n.endpoints || [null, null], s.endpointSpec = n.endpoint || null;var h = n.reattach || s.endpoints[0].reattachConnections || s.endpoints[1].reattachConnections || s.instance.defaults.reattachConnections,d = b({}, s.endpoints[0].connectorStyle || s.endpoints[1].connectorStyle || n.paintStyle || s.instance.defaults.paintStyle);if (s.appendToDefaultType({ detachable: c, reattach: h, paintStyle: d, hoverPaintStyle: b({}, s.endpoints[0].connectorHoverStyle || s.endpoints[1].connectorHoverStyle || n.hoverPaintStyle || s.instance.defaults.hoverPaintStyle) }), n.outlineWidth && (d.outlineWidth = n.outlineWidth), n.outlineColor && (d.outlineStroke = n.outlineColor), n.lineWidth && (d.strokeWidth = n.lineWidth), n.color && (d.stroke = n.color), !s.instance._suspendDrawing) {var p = s.instance._suspendedAt || B();s.instance._paintEndpoint(s.endpoints[0], { timestamp: p }), s.instance._paintEndpoint(s.endpoints[1], { timestamp: p });}s.cost = n.cost || s.endpoints[0].connectionCost, s.directed = n.directed, null == n.directed && (s.directed = s.endpoints[0].connectionsDirected);var f = b({}, s.endpoints[1].parameters);b(f, s.endpoints[0].parameters), b(f, s.parameters), s.parameters = f, s.paintStyleInUse = s.getPaintStyle() || {}, s._setConnector(s.endpoints[0].connector || s.endpoints[1].connector || n.connector || s.instance.defaults.connector, !0);var g = null != n.data && E(n.data) ? n.data : {};s.setData(g);var m = [ni, s.endpoints[0].edgeType, s.endpoints[1].edgeType, n.type].join(" ");return /[^\s]/.test(m) && s.addType(m, n.data), s;}return o(i, [{ key: "getIdPrefix", value: function () {return "_jsPlumb_c";} }, { key: "getDefaultOverlayKey", value: function () {return "connectionOverlays";} }, { key: "getXY", value: function () {return { x: this.connector.x, y: this.connector.y };} }, { key: "makeEndpoint", value: function (t, e, i, n, r) {return i = i || this.instance.getId(e), kr(this, r, t ? 0 : 1, n, e);} }, { key: "getTypeDescriptor", value: function () {return i.type;} }, { key: "isDetachable", value: function (t) {return !1 !== this.detachable && (null != t ? !0 === t.connectionsDetachable : !0 === this.detachable);} }, { key: "setDetachable", value: function (t) {this.detachable = !0 === t;} }, { key: "isReattach", value: function () {return !0 === this.reattach || !0 === this.endpoints[0].reattachConnections || !0 === this.endpoints[1].reattachConnections;} }, { key: "setReattach", value: function (t) {this.reattach = !0 === t;} }, { key: "applyType", value: function (t, e) {var n = null;null != t.connector && (null == (n = this.getCachedTypeItem(Cr, e.connector)) && (n = this.prepareConnector(t.connector, e.connector), this.cacheTypeItem(Cr, n, e.connector)), this.setPreparedConnector(n)), p(c(i.prototype), "applyType", this).call(this, t, e), null != t.detachable && this.setDetachable(t.detachable), null != t.reattach && this.setReattach(t.reattach), t.scope && (this.scope = t.scope);var r = null;t.anchor ? null == (r = this.getCachedTypeItem(Er, e.anchor)) && (r = [qn(t.anchor), qn(t.anchor)], this.cacheTypeItem(Er, r, e.anchor)) : t.anchors && null == (r = this.getCachedTypeItem(Er, e.anchors)) && (r = [qn(t.anchors[0]), qn(t.anchors[1])], this.cacheTypeItem(Er, r, e.anchors)), null != r && (this.instance.router.setConnectionAnchors(this, r), this.instance.router.isDynamicAnchor(this.endpoints[1]) && this.instance.repaint(this.endpoints[1].element)), this.instance.applyConnectorType(this.connector, t);} }, { key: "addClass", value: function (t, e) {p(c(i.prototype), "addClass", this).call(this, t), e && (this.endpoints[0].addClass(t), this.endpoints[1].addClass(t), this.suspendedEndpoint && this.suspendedEndpoint.addClass(t)), this.connector && this.instance.addConnectorClass(this.connector, t);} }, { key: "removeClass", value: function (t, e) {p(c(i.prototype), "removeClass", this).call(this, t), e && (this.endpoints[0].removeClass(t), this.endpoints[1].removeClass(t), this.suspendedEndpoint && this.suspendedEndpoint.removeClass(t)), this.connector && this.instance.removeConnectorClass(this.connector, t);} }, { key: "setVisible", value: function (t) {p(c(i.prototype), "setVisible", this).call(this, t), this.connector && this.instance.setConnectorVisible(this.connector, t), this.instance._paintConnection(this);} }, { key: "destroy", value: function () {p(c(i.prototype), "destroy", this).call(this), this.endpoints = null, this.endpointStyles = null, this.source = null, this.target = null, this.instance.destroyConnector(this), this.connector = null, this.deleted = !0;} }, { key: "getUuids", value: function () {return [this.endpoints[0].getUuid(), this.endpoints[1].getUuid()];} }, { key: "prepareConnector", value: function (t, e) {var i,n = { cssClass: this.params.cssClass, hoverClass: this.params.hoverClass, "pointer-events": this.params["pointer-events"] };if (x(t)) i = this.instance._makeConnector(this, t, n);else {var r = t;i = this.instance._makeConnector(this, r.type, T(r.options || {}, n));}return null != e && (i.typeId = e), i;} }, { key: "setPreparedConnector", value: function (t, e, i, n) {if (this.connector !== t) {var r,s = "";if (null != this.connector && (r = this.connector, s = this.instance.getConnectorClass(this.connector), this.instance.destroyConnector(this)), this.connector = t, n && this.cacheTypeItem(Cr, t, n), this.addClass(s), null != r) {var o = this.getOverlays();for (var a in o) this.instance.reattachOverlay(o[a], this);}e || this.instance._paintConnection(this);}} }, { key: "_setConnector", value: function (t, e, i, n) {var r = this.prepareConnector(t, n);this.setPreparedConnector(r, e, i, n);} }, { key: "replaceEndpoint", value: function (t, e) {var i = this.endpoints[t],n = (i.elementId, this.instance.getEndpoints(i.element)),r = n.indexOf(i),s = kr(this, null, t, null, i.element, 0, e);this.endpoints[t] = s, n.splice(r, 1, s), i.detachFromConnection(this), this.instance.deleteEndpoint(i), this.instance.fire("endpoint:replaced", { previous: i, current: s });} }]), i;}(wr);function Ar(t) {if (null == t.path) {var e = b({ "jtk-overlay-id": t.id }, t.attributes);t.path = Zt(Gt, e);var i = t.instance.overlayClass + " " + (t.cssClass ? t.cssClass : "");t.instance.addClass(t.path, i), t.path.jtk = { overlay: t };}var n = t.path.parentNode;if (null == n) {if (t.component instanceof Tr) {var r = t.component.connector;n = null != r ? r.canvas : null;} else if (t.component instanceof Sr) {var s = t.component.endpoint;n = null != s ? s.canvas : s;}null != n && Jt(n, t.path, 1);}return t.path;}a(Tr, "type", "connection"), function (t) {l(i, t);var e = d(i);function i() {var t;r(this, i);for (var n = arguments.length, s = new Array(n), o = 0; o < n; o++) s[o] = arguments[o];return a(u(t = e.call.apply(e, [this].concat(s))), "path", void 0), t;}}(sr);var Mr = function () {function t() {r(this, t);}return o(t, null, [{ key: "paint", value: function (t, e, i, n) {if (null != i) {var r = [t.x, t.y],s = [t.w, t.h];if (null != n && (n.xmin < 0 && (r[0] += n.xmin), n.ymin < 0 && (r[1] += n.ymin), s[0] = n.xmax + (n.xmin < 0 ? -n.xmin : 0), s[1] = n.ymax + (n.ymin < 0 ? -n.ymin : 0)), isFinite(s[0]) && isFinite(s[1])) {var o = { width: "" + (s[0] || 0), height: "" + (s[1] || 0) };e.containerType === H.HTML ? Kt(t.canvas, b(o, { style: Yt([r[0], r[1]]) })) : Kt(t.canvas, b(o, { x: r[0], y: r[1] }));}}} }]), t;}();var _r = function () {function t() {r(this, t);}return o(t, null, [{ key: "getEndpointElement", value: function (t) {if (null != t.canvas) return t.canvas;var e = Zt("svg", { style: "", width: "0", height: "0", "pointer-events": "all", position: mt });t.canvas = e;var i = t.classes.join(" ");t.instance.addClass(e, i);for (var n = t.endpoint.scope.split(/\s/), r = 0; r < n.length; r++) t.instance.setAttribute(e, St + n[r], ri);return t.instance._appendElementToContainer(e), null != t.cssClass && t.instance.addClass(e, t.cssClass), t.instance.addClass(e, t.instance.endpointClass), e.jtk = e.jtk || {}, e.jtk.endpoint = t.endpoint, e.style.display = !1 !== t.endpoint.visible ? ft : gt, e;} }, { key: "paint", value: function (t, e, i) {if (!0 !== t.endpoint.deleted) {this.getEndpointElement(t), Mr.paint(t, t.instance, i);var n = b({}, i);n.outlineStroke && (n.stroke = n.outlineStroke), null == t.node ? (t.node = e.makeNode(t, n), t.canvas.appendChild(t.node)) : null != e.updateNode && e.updateNode(t, t.node), Xt(t.canvas, t.node, n);}} }]), t;}(),Pr = function () {function t(e, i) {r(this, t), this.connection = e, a(this, "type", void 0), a(this, "edited", !1), a(this, "stub", void 0), a(this, "sourceStub", void 0), a(this, "targetStub", void 0), a(this, "maxStub", void 0), a(this, "typeId", void 0), a(this, "gap", void 0), a(this, "sourceGap", void 0), a(this, "targetGap", void 0), a(this, "segments", []), a(this, "totalLength", 0), a(this, "segmentProportions", []), a(this, "segmentProportionalLengths", []), a(this, "paintInfo", null), a(this, "strokeWidth", void 0), a(this, "x", void 0), a(this, "y", void 0), a(this, "w", void 0), a(this, "h", void 0), a(this, "segment", void 0), a(this, "bounds", { xmin: 1 / 0, xmax: -1 / 0, ymin: 1 / 0, ymax: -1 / 0 }), a(this, "cssClass", void 0), a(this, "hoverClass", void 0), a(this, "geometry", void 0), this.stub = i.stub || this.getDefaultStubs(), this.sourceStub = Array.isArray(this.stub) ? this.stub[0] : this.stub, this.targetStub = Array.isArray(this.stub) ? this.stub[1] : this.stub, this.gap = i.gap || 0, this.sourceGap = Array.isArray(this.gap) ? this.gap[0] : this.gap, this.targetGap = Array.isArray(this.gap) ? this.gap[1] : this.gap, this.maxStub = Math.max(this.sourceStub, this.targetStub), this.cssClass = i.cssClass || "", this.hoverClass = i.hoverClass || "";}return o(t, [{ key: "getTypeDescriptor", value: function () {return "connector";} }, { key: "getIdPrefix", value: function () {return "_jsplumb_connector";} }, { key: "setGeometry", value: function (t, e) {this.geometry = t, this.edited = null != t && !e;} }, { key: "exportGeometry", value: function () {return this.geometry;} }, { key: "importGeometry", value: function (t) {return this.geometry = t, !0;} }, { key: "resetGeometry", value: function () {this.geometry = null, this.edited = !1;} }, { key: "transformAnchorPlacement", value: function (t, e, i) {return { x: t.x, y: t.y, ox: t.ox, oy: t.oy, curX: t.curX + e, curY: t.curY + i };} }, { key: "resetBounds", value: function () {this.bounds = { xmin: 1 / 0, xmax: -1 / 0, ymin: 1 / 0, ymax: -1 / 0 };} }, { key: "findSegmentForPoint", value: function (t, e) {for (var i = { d: 1 / 0, s: null, x: null, y: null, l: null, x1: null, y1: null, x2: null, y2: null, index: null, connectorLocation: null }, n = 0; n < this.segments.length; n++) {var r = this.segments[n].findClosestPointOnPath(t, e);r.d < i.d && (i.d = r.d, i.l = r.l, i.x = r.x, i.y = r.y, i.s = this.segments[n], i.x1 = r.x1, i.x2 = r.x2, i.y1 = r.y1, i.y2 = r.y2, i.index = n, i.connectorLocation = this.segmentProportions[n][0] + r.l * (this.segmentProportions[n][1] - this.segmentProportions[n][0]));}return i;} }, { key: "lineIntersection", value: function (t, e, i, n) {for (var r = [], s = 0; s < this.segments.length; s++) r.push.apply(r, this.segments[s].lineIntersection(t, e, i, n));return r;} }, { key: "boxIntersection", value: function (t, e, i, n) {for (var r = [], s = 0; s < this.segments.length; s++) r.push.apply(r, this.segments[s].boxIntersection(t, e, i, n));return r;} }, { key: "boundingBoxIntersection", value: function (t) {for (var e = [], i = 0; i < this.segments.length; i++) e.push.apply(e, this.segments[i].boundingBoxIntersection(t));return e;} }, { key: "_updateSegmentProportions", value: function () {for (var t = 0, e = 0; e < this.segments.length; e++) {var i = this.segments[e].getLength();this.segmentProportionalLengths[e] = i / this.totalLength, this.segmentProportions[e] = [t, t += i / this.totalLength];}} }, { key: "_findSegmentForLocation", value: function (t, e) {var i, n, r;if (e && (t = t > 0 ? t / this.totalLength : (this.totalLength + t) / this.totalLength), 1 === t) i = this.segments.length - 1, r = 1;else if (0 === t) r = 0, i = 0;else if (t >= .5) {for (i = 0, r = 0, n = this.segmentProportions.length - 1; n > -1; n--) if (this.segmentProportions[n][1] >= t && this.segmentProportions[n][0] <= t) {i = n, r = (t - this.segmentProportions[n][0]) / this.segmentProportionalLengths[n];break;}} else for (i = this.segmentProportions.length - 1, r = 1, n = 0; n < this.segmentProportions.length; n++) if (this.segmentProportions[n][1] >= t) {i = n, r = (t - this.segmentProportions[n][0]) / this.segmentProportionalLengths[n];break;}return { segment: this.segments[i], proportion: r, index: i };} }, { key: "_addSegment", value: function (t, e) {if (e.x1 !== e.x2 || e.y1 !== e.y2) {var i = new t(e);this.segments.push(i), this.totalLength += i.getLength(), this.updateBounds(i);}} }, { key: "_clearSegments", value: function () {this.totalLength = 0, this.segments.length = 0, this.segmentProportions.length = 0, this.segmentProportionalLengths.length = 0;} }, { key: "getLength", value: function () {return this.totalLength;} }, { key: "_prepareCompute", value: function (t) {this.strokeWidth = t.strokeWidth;var e = t.sourcePos.curX,i = t.targetPos.curX,n = t.sourcePos.curY,r = t.targetPos.curY,s = Fi({ x: e, y: n }, { x: i, y: r }),o = i < e,a = r < n,l = [t.sourcePos.ox, t.sourcePos.oy],c = [t.targetPos.ox, t.targetPos.oy],h = o ? i : e,u = a ? r : n,d = Math.abs(i - e),p = Math.abs(r - n),f = 0 === l[0] && 0 === l[1],g = 0 === c[0] && 0 === c[1];if (f || g) {var m = d > p ? 0 : 1,v = [1, 0][m],y = 0 === m ? e : n,b = 0 === m ? i : r;f && (l[m] = y > b ? -1 : 1, l[v] = 0), g && (c[m] = y > b ? 1 : -1, c[v] = 0);}var w = o ? d + this.sourceGap * l[0] : this.sourceGap * l[0],x = a ? p + this.sourceGap * l[1] : this.sourceGap * l[1],S = o ? this.targetGap * c[0] : d + this.targetGap * c[0],E = a ? this.targetGap * c[1] : p + this.targetGap * c[1],C = l[0] * c[0] + l[1] * c[1],k = { sx: w, sy: x, tx: S, ty: E, xSpan: Math.abs(S - w), ySpan: Math.abs(E - x), mx: (w + S) / 2, my: (x + E) / 2, so: l, to: c, x: h, y: u, w: d, h: p, segment: s, startStubX: w + l[0] * this.sourceStub, startStubY: x + l[1] * this.sourceStub, endStubX: S + c[0] * this.targetStub, endStubY: E + c[1] * this.targetStub, isXGreaterThanStubTimes2: Math.abs(w - S) > this.sourceStub + this.targetStub, isYGreaterThanStubTimes2: Math.abs(x - E) > this.sourceStub + this.targetStub, opposite: -1 === C, perpendicular: 0 === C, orthogonal: 1 === C, sourceAxis: 0 === l[0] ? "y" : "x", points: [h, u, d, p, w, x, S, E], stubs: [this.sourceStub, this.targetStub] };return k.anchorOrientation = k.opposite ? "opposite" : k.orthogonal ? "orthogonal" : "perpendicular", k;} }, { key: "updateBounds", value: function (t) {var e = t.extents;this.bounds.xmin = Math.min(this.bounds.xmin, e.xmin), this.bounds.xmax = Math.max(this.bounds.xmax, e.xmax), this.bounds.ymin = Math.min(this.bounds.ymin, e.ymin), this.bounds.ymax = Math.max(this.bounds.ymax, e.ymax);} }, { key: "dumpSegmentsToConsole", value: function () {q("SEGMENTS:");for (var t = 0; t < this.segments.length; t++) q(this.segments[t].type, "" + this.segments[t].getLength(), "" + this.segmentProportions[t]);} }, { key: "pointOnPath", value: function (t, e) {var i = this._findSegmentForLocation(t, e);return i.segment && i.segment.pointOnPath(i.proportion, !1) || { x: 0, y: 0 };} }, { key: "gradientAtPoint", value: function (t, e) {var i = this._findSegmentForLocation(t, e);return i.segment && i.segment.gradientAtPoint(i.proportion, !1) || 0;} }, { key: "pointAlongPathFrom", value: function (t, e, i) {var n = this._findSegmentForLocation(t, i);return n.segment && n.segment.pointAlongPathFrom(n.proportion, e, !1) || { x: 0, y: 0 };} }, { key: "compute", value: function (t) {this.paintInfo = this._prepareCompute(t), this._clearSegments(), this._compute(this.paintInfo, t), this.x = this.paintInfo.points[0], this.y = this.paintInfo.points[1], this.w = this.paintInfo.points[2], this.h = this.paintInfo.points[3], this.segment = this.paintInfo.segment, this._updateSegmentProportions();} }, { key: "setAnchorOrientation", value: function (t, e) {} }]), t;}(),Dr = function (t) {l(i, t);var e = d(i);function i(t, n, s) {var o;return r(this, i), (o = e.call(this, t, n, s)).instance = t, o.component = n, a(u(o), "width", void 0), a(u(o), "length", void 0), a(u(o), "foldback", void 0), a(u(o), "direction", void 0), a(u(o), "location", .5), a(u(o), "paintStyle", void 0), a(u(o), "type", i.type), a(u(o), "cachedDimensions", void 0), s = s || {}, o.width = s.width || 20, o.length = s.length || 20, o.direction = (s.direction || 1) < 0 ? -1 : 1, o.foldback = s.foldback || .623, o.paintStyle = s.paintStyle || { strokeWidth: 1 }, o.location = null == s.location ? o.location : Array.isArray(s.location) ? s.location[0] : s.location, o;}return o(i, [{ key: "draw", value: function (t, e, i) {if (t instanceof Pr) {var n,r,s,o = t;if (this.location > 1 || this.location < 0) {var a = this.location < 0 ? 1 : 0;r = Li(n = o.pointAlongPathFrom(a, this.location, !1), o.pointAlongPathFrom(a, this.location - this.direction * this.length / 2, !1), this.length);} else if (1 === this.location) {if (r = Li(n = o.pointOnPath(this.location), o.pointAlongPathFrom(this.location, -this.length), this.length), -1 === this.direction) {var l = r;r = n, n = l;}} else if (0 === this.location) {if (n = Li(r = o.pointOnPath(this.location), o.pointAlongPathFrom(this.location, this.length), this.length), -1 === this.direction) {var c = r;r = n, n = c;}} else r = Li(n = o.pointAlongPathFrom(this.location, this.direction * this.length / 2), o.pointOnPath(this.location), this.length);var h = { hxy: n, tail: s = function (t, e, i) {var n = Oi(t, e),r = Math.atan(-1 / n),s = i / 2 * Math.sin(r),o = i / 2 * Math.cos(r);return [{ x: e.x + o, y: e.y + s }, { x: e.x - o, y: e.y - s }];}(n, r, this.width), cxy: Li(n, r, this.foldback * this.length) },u = this.paintStyle.stroke || e.stroke,d = this.paintStyle.fill || e.stroke;return { component: t, d: h, "stroke-width": this.paintStyle.strokeWidth || e.strokeWidth, stroke: u, fill: d, xmin: Math.min(n.x, s[0].x, s[1].x), xmax: Math.max(n.x, s[0].x, s[1].x), ymin: Math.min(n.y, s[0].y, s[1].y), ymax: Math.max(n.y, s[0].y, s[1].y) };}} }, { key: "updateFrom", value: function (t) {} }]), i;}(sr);function Or(t) {return t.type === Dr.type;}a(Dr, "type", "Arrow"), lr(Dr.type, Dr);var Ir = function (t) {l(i, t);var e = d(i);function i(t, n, s) {var o;return r(this, i), (o = e.call(this, t, n, s)).instance = t, a(u(o), "type", i.type), o.length = o.length / 2, o.foldback = 2, o;}return i;}(Dr);function Fr(t) {return t.type === Ir.type;}a(Ir, "type", "Diamond"), lr(Ir.type, Ir);var Rr = function (t) {l(i, t);var e = d(i);function i(t, n, s) {var o;return r(this, i), (o = e.call(this, t, n, s)).instance = t, a(u(o), "type", i.type), o.foldback = 1, o;}return i;}(Dr);function Lr(t) {return t.type === Rr.type;}a(Rr, "type", "PlainArrow"), lr("PlainArrow", Rr);var Nr = function (t) {l(i, t);var e = d(i);function i(t, n, s) {var o;return r(this, i), (o = e.call(this, t, n, s)).instance = t, o.component = n, a(u(o), "create", void 0), a(u(o), "type", i.type), o.create = s.create, o;}return o(i, [{ key: "updateFrom", value: function (t) {} }]), i;}(sr);function Vr(t) {return t.type === Nr.type;}a(Nr, "type", "Custom"), lr(Nr.type, Nr);var Br = "paintStyle",jr = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), a(u(s = e.call(this, t, n)), "radius", void 0), a(u(s), "defaultOffset", void 0), a(u(s), "defaultInnerRadius", void 0), a(u(s), "type", i.type), n = n || {}, s.radius = n.radius || 5, s.defaultOffset = .5 * s.radius, s.defaultInnerRadius = s.radius / 3, s;}return i;}(wn);a(jr, "type", "Dot");var zr = { type: jr.type, cls: jr, compute: function (t, e, i, n) {var r = e.curX - t.radius,s = e.curY - t.radius,o = 2 * t.radius,a = 2 * t.radius;if (n && n.stroke) {var l = n.strokeWidth || 1;r -= l, s -= l, o += 2 * l, a += 2 * l;}return t.x = r, t.y = s, t.w = o, t.h = a, [r, s, o, a, t.radius];}, getParams: function (t) {return { radius: t.radius };} },Ur = function t(e, i) {r(this, t), this.instance = e, this.el = i, a(this, "group", void 0);},Hr = function (t) {l(i, t);var e = d(i);function i(t, n, s) {var o;r(this, i), (o = e.call(this, t, n)).instance = t, a(u(o), "children", []), a(u(o), "collapsed", !1), a(u(o), "droppable", void 0), a(u(o), "enabled", void 0), a(u(o), "orphan", void 0), a(u(o), "constrain", void 0), a(u(o), "proxied", void 0), a(u(o), "ghost", void 0), a(u(o), "revert", void 0), a(u(o), "prune", void 0), a(u(o), "dropOverride", void 0), a(u(o), "anchor", void 0), a(u(o), "endpoint", void 0), a(u(o), "connections", { source: [], target: [], internal: [] }), a(u(o), "manager", void 0), a(u(o), "id", void 0), a(u(o), "elId", void 0);var l = o.el;return l._isJsPlumbGroup = !0, l._jsPlumbGroup = u(o), o.elId = t.getId(n), o.orphan = !0 === s.orphan, o.revert = !0 !== o.orphan && !1 !== s.revert, o.droppable = !1 !== s.droppable, o.ghost = !0 === s.ghost, o.enabled = !1 !== s.enabled, o.prune = !0 !== o.orphan && !0 === s.prune, o.constrain = o.ghost || !0 === s.constrain, o.proxied = !1 !== s.proxied, o.id = s.id || B(), o.dropOverride = !0 === s.dropOverride, o.anchor = s.anchor, o.endpoint = s.endpoint, o.anchor = s.anchor, t.setAttribute(n, yt, ""), o;}return o(i, [{ key: "contentArea", get: function () {return this.instance.getGroupContentArea(this);} }, { key: "overrideDrop", value: function (t, e) {return this.dropOverride && (this.revert || this.prune || this.orphan);} }, { key: "getAnchor", value: function (t, e) {return this.anchor || "Continuous";} }, { key: "getEndpoint", value: function (t, e) {return this.endpoint || { type: jr.type, options: { radius: 10 } };} }, { key: "add", value: function (t, e) {var i = this.instance.getGroupContentArea(this),n = t;if (null != n._jsPlumbParentGroup) {if (n._jsPlumbParentGroup === this) return;n._jsPlumbParentGroup.remove(t, !0, e, !1);}n._jsPlumbParentGroup = this, this.children.push(new Ur(this.instance, t)), this.instance._appendElement(n, i), this.manager._updateConnectionsForGroup(this);} }, { key: "resolveNode", value: function (t) {return null == t ? null : P(this.children, function (e) {return e.el === t;});} }, { key: "remove", value: function (t, e, i, n, r) {var s = this.resolveNode(t);null != s && this._doRemove(s, e, i, n, r);} }, { key: "_doRemove", value: function (t, e, i, n, r) {var s = t.el;if (delete s._jsPlumbParentGroup, O(this.children, function (e) {return e === t;}), e) try {this.instance.getGroupContentArea(this).removeChild(s);} catch (t) {q("Could not remove element from Group " + t);}if (!i) {var o = { group: this, el: s };r && (o.targetGroup = r), this.instance.fire("group:member:removed", o);}n || this.manager._updateConnectionsForGroup(this);} }, { key: "removeAll", value: function (t, e) {for (var i = 0, n = this.children.length; i < n; i++) {var r = this.children[0];this._doRemove(r, t, e, !0), this.instance.unmanage(r.el, !0);}this.children.length = 0, this.manager._updateConnectionsForGroup(this);} }, { key: "orphanAll", value: function () {for (var t = {}, e = 0; e < this.children.length; e++) {var i = this.manager.orphan(this.children[e].el, !1);t[i.id] = i.pos;}return this.children.length = 0, t;} }, { key: "addGroup", value: function (t) {if (this.instance.allowNestedGroups && t !== this) {if (this.instance.groupManager.isAncestor(this, t)) return !1;null != t.group && t.group.removeGroup(t);var e = this.instance.getId(t.el);this.instance.getManagedElements()[e].group = this.elId;var i = this.instance.getOffsetRelativeToRoot(t.el),n = this.collapsed ? this.instance.getOffsetRelativeToRoot(this.el) : this.instance.getOffsetRelativeToRoot(this.instance.getGroupContentArea(this));t.el._jsPlumbParentGroup = this, this.children.push(t), this.instance._appendElementToGroup(this, t.el), t.group = this;var r = { x: i.x - n.x, y: i.y - n.y };return this.instance.setPosition(t.el, r), this.instance.fire("group:nested:added", { parent: this, child: t }), !0;}return !1;} }, { key: "removeGroup", value: function (t) {if (t.group === this) {var e = t.el,i = this.instance.getGroupContentArea(this);i === e.parentNode && i.removeChild(t.el);var n = this.instance.getId(t.el),r = this.instance.getManagedElements()[n];r && delete r.group, this.children = this.children.filter(function (e) {return e.id !== t.id;}), delete t.group, delete e._jsPlumbParentGroup, this.instance.fire("group:nested:removed", { parent: this, child: t });}} }, { key: "getGroups", value: function () {return this.children.filter(function (t) {return t.constructor === i;});} }, { key: "getNodes", value: function () {return this.children.filter(function (t) {return t.constructor === Ur;});} }, { key: "collapseParent", get: function () {var t = null;if (null == this.group) return null;for (var e = this.group; null != e;) e.collapsed && (t = e), e = e.group;return t;} }]), i;}(Ur),qr = function () {function t(e) {var i = this;r(this, t), this.instance = e, a(this, "groupMap", {}), a(this, "_connectionSourceMap", {}), a(this, "_connectionTargetMap", {}), e.bind(Dt, function (t) {var e = i.getGroupFor(t.source),n = i.getGroupFor(t.target);null != e && null != n && e === n ? (i._connectionSourceMap[t.connection.id] = e, i._connectionTargetMap[t.connection.id] = e, L(e.connections.internal, t.connection)) : (null != e && (t.target._jsPlumbGroup === e ? L(e.connections.internal, t.connection) : L(e.connections.source, t.connection), i._connectionSourceMap[t.connection.id] = e), null != n && (t.source._jsPlumbGroup === n ? L(n.connections.internal, t.connection) : L(n.connections.target, t.connection), i._connectionTargetMap[t.connection.id] = n));}), e.bind(Ft, function (t) {i._cleanupDetachedConnection(t.connection);}), e.bind(Ot, function (t) {var e = t.originalEndpoint.element,n = i.getGroupFor(e),r = t.connection.endpoints[t.index].element,s = i.getGroupFor(r),o = 0 === t.index ? i._connectionSourceMap : i._connectionTargetMap,a = 0 === t.index ? i._connectionTargetMap : i._connectionSourceMap;null != s ? (o[t.connection.id] = s, t.connection.source === t.connection.target && (a[t.connection.id] = s)) : (delete o[t.connection.id], t.connection.source === t.connection.target && delete a[t.connection.id]), null != n && i._updateConnectionsForGroup(n), null != s && i._updateConnectionsForGroup(s);});}return o(t, [{ key: "_cleanupDetachedConnection", value: function (t) {t.proxies.length = 0;var e,i = this._connectionSourceMap[t.id];null != i && (e = function (e) {return e.id === t.id;}, O(i.connections.source, e), O(i.connections.target, e), O(i.connections.internal, e), delete this._connectionSourceMap[t.id]), null != (i = this._connectionTargetMap[t.id]) && (e = function (e) {return e.id === t.id;}, O(i.connections.source, e), O(i.connections.target, e), O(i.connections.internal, e), delete this._connectionTargetMap[t.id]);} }, { key: "addGroup", value: function (t) {var e = t.el;if (null != this.groupMap[t.id]) throw new Error("cannot create Group [" + t.id + "]; a Group with that ID exists");if (null != e._isJsPlumbGroup) throw new Error("cannot create Group [" + t.id + "]; the given element is already a Group");var i = new Hr(this.instance, t.el, t);return this.groupMap[i.id] = i, t.collapsed && this.collapseGroup(i), this.instance.manage(i.el), this.instance.addClass(i.el, Mt), i.manager = this, this._updateConnectionsForGroup(i), this.instance.fire("group:added", { group: i }), i;} }, { key: "getGroup", value: function (t) {var e = t;if (x(t) && null == (e = this.groupMap[t])) throw new Error("No such group [" + t + "]");return e;} }, { key: "getGroupFor", value: function (t) {for (var e = t, i = this.instance.getContainer(), n = !1, r = null; !n;) null == e || e === i ? n = !0 : e._jsPlumbParentGroup ? (r = e._jsPlumbParentGroup, n = !0) : e = e.parentNode;return r;} }, { key: "getGroups", value: function () {var t = [];for (var e in this.groupMap) t.push(this.groupMap[e]);return t;} }, { key: "removeGroup", value: function (t, e, i, n) {var r = this,s = this.getGroup(t);this.expandGroup(s, !0);var o = {};return M(s.children, function (t) {var e = r.instance.getManagedElements()[r.instance.getId(t.el)];e && delete e.group;}), e ? (M(s.getGroups(), function (t) {return r.removeGroup(t, e, i);}), s.removeAll(i, n)) : (s.group && M(s.children, function (t) {return s.group.add(t.el);}), o = s.orphanAll()), s.group && s.group.removeGroup(s), this.instance.unmanage(s.el, !0), delete this.groupMap[s.id], this.instance.fire("group:removed", { group: s }), o;} }, { key: "removeAllGroups", value: function (t, e, i) {for (var n in this.groupMap) this.removeGroup(this.groupMap[n], t, e, i);} }, { key: "forEach", value: function (t) {for (var e in this.groupMap) t(this.groupMap[e]);} }, { key: "orphan", value: function (t, e) {var i = t;if (i._jsPlumbParentGroup) {var n = i._jsPlumbParentGroup,r = this.instance.getId(i),s = this.instance.getOffset(t);return !0 !== e && n.group ? this.instance._appendElementToGroup(n.group, t) : this.instance._appendElementToContainer(t), this.instance.setPosition(t, s), delete i._jsPlumbParentGroup, { id: r, pos: s };}} }, { key: "_updateConnectionsForGroup", value: function (t) {var e = this;t.connections.source.length = 0, t.connections.target.length = 0, t.connections.internal.length = 0;var i = t.children.slice().map(function (t) {return t.el;}),n = [];if (M(i, function (t) {Array.prototype.push.apply(n, e.instance.getSelector(t, Ut));}), Array.prototype.push.apply(i, n), i.length > 0) {var r,s,o = this.instance.getConnections({ source: i, scope: oi }, !0),a = this.instance.getConnections({ target: i, scope: oi }, !0),l = {},c = function (i) {for (var n = 0; n < i.length; n++) l[i[n].id] || (l[i[n].id] = !0, r = e.getGroupFor(i[n].source), s = e.getGroupFor(i[n].target), i[n].source === t.el && s === t || i[n].target === t.el && r === t ? t.connections.internal.push(i[n]) : r === t ? (s !== t ? t.connections.source.push(i[n]) : t.connections.internal.push(i[n]), e._connectionSourceMap[i[n].id] = t) : s === t && (t.connections.target.push(i[n]), e._connectionTargetMap[i[n].id] = t));};c(o), c(a);}} }, { key: "_collapseConnection", value: function (t, e, i) {var n = t.endpoints[0 === e ? 1 : 0].element;if (n._jsPlumbParentGroup && !n._jsPlumbParentGroup.proxied && n._jsPlumbParentGroup.collapsed) return !1;var r = t.endpoints[0].element._jsPlumbParentGroup,s = null != r ? r.collapseParent || r : null,o = t.endpoints[1].element._jsPlumbParentGroup,a = null != o ? o.collapseParent || o : null;if (null == s || null == a || s.id !== a.id) {var l = i.el;return this.instance.getId(l), this.instance.proxyConnection(t, e, l, function (t, e) {return i.getEndpoint(t, e);}, function (t, e) {return i.getAnchor(t, e);}), !0;}return !1;} }, { key: "_expandConnection", value: function (t, e, i) {this.instance.unproxyConnection(t, e);} }, { key: "isElementDescendant", value: function (t, e) {for (var i = this.instance.getContainer();;) {if (null == t || t === i) return !1;if (t === e) return !0;t = t.parentNode;}} }, { key: "collapseGroup", value: function (t) {var e = this,i = this.getGroup(t);if (null != i && !i.collapsed) {var n = i.el;if (null == i.collapseParent) {if (this.instance.setGroupVisible(i, !1), i.collapsed = !0, this.instance.removeClass(n, Mt), this.instance.addClass(n, At), i.proxied) {var r = new Set(),s = function (t, n) {for (var s = 0; s < t.length; s++) {var o = t[s];!0 === e._collapseConnection(o, n, i) && r.add(o.id);}};s(i.connections.source, 0), s(i.connections.target, 1), M(i.getGroups(), function (t) {e.cascadeCollapse(i, t, r);});}this.instance.revalidate(n), this.repaintGroup(i), this.instance.fire("group:collapse", { group: i });} else i.collapsed = !0, this.instance.removeClass(n, Mt), this.instance.addClass(n, At);}} }, { key: "cascadeCollapse", value: function (t, e, i) {var n = this;if (t.proxied) {var r = function (e, r) {for (var s = 0; s < e.length; s++) {var o = e[s];i.has(o.id) || !0 === n._collapseConnection(o, r, t) && i.add(o.id);}};r(e.connections.source, 0), r(e.connections.target, 1);}M(e.getGroups(), function (e) {n.cascadeCollapse(t, e, i);});} }, { key: "expandGroup", value: function (t, e) {var i = this,n = this.getGroup(t);if (null != n) {var r = n.el;if (null == n.collapseParent) {if (this.instance.setGroupVisible(n, !0), n.collapsed = !1, this.instance.addClass(r, Mt), this.instance.removeClass(r, At), n.proxied) {var s = function (t, e) {for (var r = 0; r < t.length; r++) {var s = t[r];i._expandConnection(s, e, n);}};s(n.connections.source, 0), s(n.connections.target, 1), M(n.getGroups(), function t(e, n) {if (n || e.collapsed) {var r = function (t, n) {for (var r = 0; r < t.length; r++) {var s = t[r];i._collapseConnection(s, n, e.collapseParent || e);}};r(e.connections.source, 0), r(e.connections.target, 1), M(e.connections.internal, function (t) {return t.setVisible(!1);}), M(e.getGroups(), function (e) {return t(e, !0);});} else i.expandGroup(e, !0);});}this.instance.revalidate(r), this.repaintGroup(n), e || this.instance.fire("group:expand", { group: n });} else n.collapsed = !1, this.instance.addClass(r, Mt), this.instance.removeClass(r, At);}} }, { key: "toggleGroup", value: function (t) {null != (t = this.getGroup(t)) && (t.collapsed ? this.expandGroup(t) : this.collapseGroup(t));} }, { key: "repaintGroup", value: function (t) {for (var e = this.getGroup(t).children, i = 0; i < e.length; i++) this.instance.revalidate(e[i].el);} }, { key: "addToGroup", value: function (t, e) {var i = this,n = this.getGroup(t);if (n) {for (var r = n.el, s = arguments.length, o = new Array(s > 2 ? s - 2 : 0), a = 2; a < s; a++) o[a - 2] = arguments[a];M(o, function (t) {var s = t,o = null != s._isJsPlumbGroup,a = s._jsPlumbGroup,l = s._jsPlumbParentGroup;if (l !== n) {var c = i.instance.manage(t),h = i.instance.getOffset(t),u = n.collapsed ? i.instance.getOffsetRelativeToRoot(r) : i.instance.getOffset(i.instance.getGroupContentArea(n));c.group = n.elId, null != l && (l.remove(t, !1, e, !1, n), i._updateConnectionsForGroup(l)), o ? n.addGroup(a) : n.add(t, e);var d = function (t, e) {var r = 0 === e ? 1 : 0;t.each(function (t) {t.setVisible(!1), t.endpoints[r].element._jsPlumbGroup === n ? (t.endpoints[r].setVisible(!1), i._expandConnection(t, r, n)) : (t.endpoints[e].setVisible(!1), i._collapseConnection(t, e, n));});};n.collapsed && (d(i.instance.select({ source: t }), 0), d(i.instance.select({ target: t }), 1)), i.instance.getId(t);var p = { x: h.x - u.x, y: h.y - u.y };if (i.instance.setPosition(t, p), i._updateConnectionsForGroup(n), i.instance.revalidate(t), !e) {var f = { group: n, el: t, pos: p };l && (f.sourceGroup = l), i.instance.fire("group:member:added", f);}}});}} }, { key: "removeFromGroup", value: function (t, e) {var i = this,n = this.getGroup(t);if (n) {for (var r = arguments.length, s = new Array(r > 2 ? r - 2 : 0), o = 2; o < r; o++) s[o - 2] = arguments[o];M(s, function (t) {if (n.collapsed) {var r = function (e, r) {for (var s = 0; s < e.length; s++) {var o = e[s];if (o.proxies) for (var a = 0; a < o.proxies.length; a++) if (null != o.proxies[a]) {var l = o.proxies[a].originalEp.element;(l === t || i.isElementDescendant(l, t)) && i._expandConnection(o, r, n);}}};r(n.connections.source.slice(), 0), r(n.connections.target.slice(), 1);}n.remove(t, null, e);var s = i.instance.getManagedElements()[i.instance.getId(t)];s && delete s.group;});}} }, { key: "getAncestors", value: function (t) {for (var e = [], i = t.group; null != i;) e.push(i), i = i.group;return e;} }, { key: "isAncestor", value: function (t, e) {return null != t && null != e && -1 !== this.getAncestors(t).indexOf(e);} }, { key: "getDescendants", value: function (t) {var e = [];return function t(i) {var n = i.getGroups();e.push.apply(e, g(n)), M(n, t);}(t), e;} }, { key: "isDescendant", value: function (t, e) {return null != t && null != e && -1 !== this.getDescendants(e).indexOf(t);} }, { key: "reset", value: function () {this._connectionSourceMap = {}, this._connectionTargetMap = {}, this.groupMap = {};} }]), t;}(),$r = function () {function t(e, i) {r(this, t), this.instance = e, this.entries = i;}return o(t, [{ key: "length", get: function () {return this.entries.length;} }, { key: "each", value: function (t) {return M(this.entries, function (e) {return t(e);}), this;} }, { key: "get", value: function (t) {return this.entries[t];} }, { key: "addClass", value: function (t, e) {return this.each(function (i) {return i.addClass(t, e);}), this;} }, { key: "removeClass", value: function (t, e) {return this.each(function (i) {return i.removeClass(t, e);}), this;} }, { key: "removeAllOverlays", value: function () {return this.each(function (t) {return t.removeAllOverlays();}), this;} }, { key: "setLabel", value: function (t) {return this.each(function (e) {return e.setLabel(t);}), this;} }, { key: "clear", value: function () {return this.entries.length = 0, this;} }, { key: "map", value: function (t) {var e = [];return this.each(function (i) {return e.push(t(i));}), e;} }, { key: "addOverlay", value: function (t) {return this.each(function (e) {return e.addOverlay(t);}), this;} }, { key: "removeOverlay", value: function (t) {return this.each(function (e) {return e.removeOverlay(t);}), this;} }, { key: "removeOverlays", value: function () {return this.each(function (t) {return t.removeOverlays();}), this;} }, { key: "showOverlay", value: function (t) {return this.each(function (e) {return e.showOverlay(t);}), this;} }, { key: "hideOverlay", value: function (t) {return this.each(function (e) {return e.hideOverlay(t);}), this;} }, { key: "setPaintStyle", value: function (t) {return this.each(function (e) {return e.setPaintStyle(t);}), this;} }, { key: "setHoverPaintStyle", value: function (t) {return this.each(function (e) {return e.setHoverPaintStyle(t);}), this;} }, { key: "setSuspendEvents", value: function (t) {return this.each(function (e) {return e.setSuspendEvents(t);}), this;} }, { key: "setParameter", value: function (t, e) {return this.each(function (i) {return i.parameters[t] = e;}), this;} }, { key: "setParameters", value: function (t) {return this.each(function (e) {return e.parameters = t;}), this;} }, { key: "setVisible", value: function (t) {return this.each(function (e) {return e.setVisible(t);}), this;} }, { key: "addType", value: function (t) {return this.each(function (e) {return e.addType(t);}), this;} }, { key: "toggleType", value: function (t) {return this.each(function (e) {return e.toggleType(t);}), this;} }, { key: "removeType", value: function (t) {return this.each(function (e) {return e.removeType(t);}), this;} }, { key: "bind", value: function (t, e) {return this.each(function (i) {return i.bind(t, e);}), this;} }, { key: "unbind", value: function (t, e) {return this.each(function (i) {return i.unbind(t, e);}), this;} }, { key: "setHover", value: function (t) {var e = this;return this.each(function (i) {return e.instance.setHover(i, t);}), this;} }]), t;}(),Gr = function (t) {l(i, t);var e = d(i);function i() {return r(this, i), e.apply(this, arguments);}return o(i, [{ key: "setEnabled", value: function (t) {return this.each(function (e) {return e.enabled = t;}), this;} }, { key: "setAnchor", value: function (t) {return this.each(function (e) {return e.setAnchor(t);}), this;} }, { key: "deleteEveryConnection", value: function () {return this.each(function (t) {return t.deleteEveryConnection();}), this;} }, { key: "deleteAll", value: function () {var t = this;return this.each(function (e) {return t.instance.deleteEndpoint(e);}), this.clear(), this;} }]), i;}($r),Wr = function (t) {l(i, t);var e = d(i);function i() {return r(this, i), e.apply(this, arguments);}return o(i, [{ key: "setDetachable", value: function (t) {return this.each(function (e) {return e.setDetachable(t);}), this;} }, { key: "setReattach", value: function (t) {return this.each(function (e) {return e.setReattach(t);}), this;} }, { key: "setConnector", value: function (t) {return this.each(function (e) {return e._setConnector(t);}), this;} }, { key: "deleteAll", value: function () {var t = this;this.each(function (e) {return t.instance.deleteConnection(e);}), this.clear();} }, { key: "repaint", value: function () {var t = this;return this.each(function (e) {return t.instance._paintConnection(e);}), this;} }]), i;}($r),Kr = function t() {r(this, t), a(this, "affectedElements", new Set());};function Zr() {return { x: 0, y: 0, w: 0, h: 0, r: 0, c: { x: 0, y: 0 }, x2: 0, y2: 0, t: { x: 0, y: 0, c: { x: 0, y: 0 }, w: 0, h: 0, r: 0, x2: 0, y2: 0, cr: 0, sr: 0 }, dirty: !0 };}var Yr = function (t, e) {var i = 0;return e[1] > t[1] ? i = -1 : e[1] < t[1] && (i = 1), i;},Xr = function (t, e) {return -1 * Yr(t, e);};function Jr(t, e, i, n) {!function (t, e, i, n) {if (0 === e.length) e.push(t);else {for (var r = n ? -1 : 1, s = 0, o = e.length, a = Math.floor((s + o) / 2); o > s;) i(t, e[a]) * r < 0 ? o = a : s = a + 1, a = Math.floor((s + o) / 2);e.splice(a, 0, t);}}([t, e], i, Yr, n);}function Qr(t, e) {var i = _(e, function (e) {return e[0] === t;});i > -1 && e.splice(i, 1);}var ts,es = function (t) {l(i, t);var e = d(i);function i(t) {var n;return r(this, i), (n = e.call(this)).instance = t, a(u(n), "_currentTransaction", null), a(u(n), "_sortedElements", { xmin: [], xmax: [], ymin: [], ymax: [] }), a(u(n), "_elementMap", new Map()), a(u(n), "_transformedElementMap", new Map()), a(u(n), "_bounds", { minx: 0, maxx: 0, miny: 0, maxy: 0 }), n;}return o(i, [{ key: "_updateBounds", value: function (t, e, i) {null != e && (Qr(t, this._sortedElements.xmin), Qr(t, this._sortedElements.xmax), Qr(t, this._sortedElements.ymin), Qr(t, this._sortedElements.ymax), Jr(t, e.t.x, this._sortedElements.xmin, !1), Jr(t, e.t.x + e.t.w, this._sortedElements.xmax, !0), Jr(t, e.t.y, this._sortedElements.ymin, !1), Jr(t, e.t.y + e.t.h, this._sortedElements.ymax, !0), !0 !== i && this._recalculateBounds());} }, { key: "_recalculateBounds", value: function () {this._bounds.minx = this._sortedElements.xmin.length > 0 ? this._sortedElements.xmin[0][1] : 0, this._bounds.maxx = this._sortedElements.xmax.length > 0 ? this._sortedElements.xmax[0][1] : 0, this._bounds.miny = this._sortedElements.ymin.length > 0 ? this._sortedElements.ymin[0][1] : 0, this._bounds.maxy = this._sortedElements.ymax.length > 0 ? this._sortedElements.ymax[0][1] : 0;} }, { key: "recomputeBounds", value: function () {var t = this;this._sortedElements.xmin.length = 0, this._sortedElements.xmax.length = 0, this._sortedElements.ymin.length = 0, this._sortedElements.ymax.length = 0, this._elementMap.forEach(function (e, i) {t._sortedElements.xmin.push([i, e.t.x]), t._sortedElements.xmax.push([i, e.t.x + e.t.w]), t._sortedElements.ymin.push([i, e.t.y]), t._sortedElements.ymax.push([i, e.t.y + e.t.h]);}), this._sortedElements.xmin.sort(Yr), this._sortedElements.ymin.sort(Yr), this._sortedElements.xmax.sort(Xr), this._sortedElements.ymax.sort(Xr), this._recalculateBounds();} }, { key: "_finaliseUpdate", value: function (t, e, i) {var n, r, s, o, a, l, c, h, u, d, p, f, g, m, v, y, b, w, x;e.t = (n = e.x, r = e.y, s = e.w, o = e.h, a = e.r, l = n + s / 2, c = r + o / 2, h = Math.cos(a / 360 * Math.PI * 2), u = Math.sin(a / 360 * Math.PI * 2), d = function (t, e) {return { x: l + Math.round((t - l) * h - (e - c) * u), y: c + Math.round((e - c) * h - (t - l) * u) };}, p = d(n, r), f = d(n + s, r), g = d(n + s, r + o), m = d(n, r + o), v = d(n + s / 2, r + o / 2), y = Math.min(p.x, f.x, g.x, m.x), b = Math.max(p.x, f.x, g.x, m.x), { x: y, y: w = Math.min(p.y, f.y, g.y, m.y), w: b - y, h: (x = Math.max(p.y, f.y, g.y, m.y)) - w, c: v, r: a, x2: b, y2: x, cr: h, sr: u }), this._transformedElementMap.set(t, e.t), !0 !== i && this._updateBounds(t, e, i);} }, { key: "shouldFireEvent", value: function (t, e, i) {return !0;} }, { key: "startTransaction", value: function () {if (null != this._currentTransaction) throw new Error("Viewport: cannot start transaction; a transaction is currently active.");this._currentTransaction = new Kr();} }, { key: "endTransaction", value: function () {var t = this;null != this._currentTransaction && (this._currentTransaction.affectedElements.forEach(function (e) {var i = t.getPosition(e);t._finaliseUpdate(e, i, !0);}), this.recomputeBounds(), this._currentTransaction = null);} }, { key: "updateElements", value: function (t) {var e = this;M(t, function (t) {return e.updateElement(t.id, t.x, t.y, t.width, t.height, t.rotation);});} }, { key: "updateElement", value: function (t, e, i, n, r, s, o) {var a = W(this._elementMap, t, Zr);return a.dirty = null == e && null == a.x || null == i && null == a.y || null == n && null == a.w || null == r && null == a.h, null != e && (a.x = e), null != i && (a.y = i), null != n && (a.w = n), null != r && (a.h = r), null != s && (a.r = s || 0), a.c.x = a.x + a.w / 2, a.c.y = a.y + a.h / 2, a.x2 = a.x + a.w, a.y2 = a.y + a.h, null == this._currentTransaction ? this._finaliseUpdate(t, a, o) : this._currentTransaction.affectedElements.add(t), a;} }, { key: "refreshElement", value: function (t, e) {var i = this.instance.getManagedElements(),n = i[t] ? i[t].el : null;if (null != n) {var r = this.getSize(n),s = this.getOffset(n);return this.updateElement(t, s.x, s.y, r.w, r.h, null, e);}return null;} }, { key: "getSize", value: function (t) {return this.instance.getSize(t);} }, { key: "getOffset", value: function (t) {return this.instance.getOffset(t);} }, { key: "registerElement", value: function (t, e) {return this.updateElement(t, 0, 0, 0, 0, 0, e);} }, { key: "addElement", value: function (t, e, i, n, r, s) {return this.updateElement(t, e, i, n, r, s);} }, { key: "rotateElement", value: function (t, e) {var i = W(this._elementMap, t, Zr);return i.r = e || 0, this._finaliseUpdate(t, i), i;} }, { key: "getBoundsWidth", value: function () {return this._bounds.maxx - this._bounds.minx;} }, { key: "getBoundsHeight", value: function () {return this._bounds.maxy - this._bounds.miny;} }, { key: "getX", value: function () {return this._bounds.minx;} }, { key: "getY", value: function () {return this._bounds.miny;} }, { key: "setSize", value: function (t, e, i) {if (this._elementMap.has(t)) return this.updateElement(t, null, null, e, i, null);} }, { key: "setPosition", value: function (t, e, i) {if (this._elementMap.has(t)) return this.updateElement(t, e, i, null, null, null);} }, { key: "reset", value: function () {this._sortedElements.xmin.length = 0, this._sortedElements.xmax.length = 0, this._sortedElements.ymin.length = 0, this._sortedElements.ymax.length = 0, this._elementMap.clear(), this._transformedElementMap.clear(), this._recalculateBounds();} }, { key: "remove", value: function (t) {Qr(t, this._sortedElements.xmin), Qr(t, this._sortedElements.xmax), Qr(t, this._sortedElements.ymin), Qr(t, this._sortedElements.ymax), this._elementMap.delete(t), this._transformedElementMap.delete(t), this._recalculateBounds();} }, { key: "getPosition", value: function (t) {return this._elementMap.get(t);} }, { key: "getElements", value: function () {return this._elementMap;} }, { key: "isEmpty", value: function () {return 0 === this._elementMap.size;} }]), i;}(nr);function is(t, e) {return e.theta - t.theta;}function ns(t, e) {return (t.theta < 0 ? -Math.PI - t.theta : Math.PI - t.theta) - (e.theta < 0 ? -Math.PI - e.theta : Math.PI - e.theta);}var rs = (a(ts = {}, xn, ns), a(ts, En, is), a(ts, Cn, is), a(ts, Sn, ns), ts);function ss(t) {return !0 === t.isContinuous;}function os(t) {return !0 === t.isContinuous;}function as(t) {return t.locations.length > 1;}function ls(t) {return [t.currentLocation, t.locations[t.currentLocation]];}var cs = function () {function t(e) {var i = this;r(this, t), this.instance = e, a(this, "anchorLists", new Map()), a(this, "anchorLocations", new Map()), e.bind(Ft, function (t) {t.sourceEndpoint._anchor.isContinuous && i._removeEndpointFromAnchorLists(t.sourceEndpoint), t.targetEndpoint._anchor.isContinuous && i._removeEndpointFromAnchorLists(t.targetEndpoint);}), e.bind(It, function (t) {i._removeEndpointFromAnchorLists(t);});}return o(t, [{ key: "getAnchorOrientation", value: function (t) {var e = this.anchorLocations.get(t.id);return e ? [e.ox, e.oy] : [0, 0];} }, { key: "_distance", value: function (t, e, i, n, r, s, o) {var a = n.x + t.x * r.w,l = n.y + t.y * r.h,c = n.x + r.w / 2,h = n.y + r.h / 2;if (null != s && s.length > 0) {var u = this.instance._applyRotations([a, l, 0, 0], s);a = u.x, l = u.y;}return Math.sqrt(Math.pow(e - a, 2) + Math.pow(i - l, 2)) + Math.sqrt(Math.pow(c - a, 2) + Math.pow(h - l, 2));} }, { key: "_anchorSelector", value: function (t, e, i, n, r, s, o) {for (var a = i.x + n.w / 2, l = i.y + n.h / 2, c = -1, h = 1 / 0, u = 0; u < o.length; u++) {var d = this._distance(o[u], a, l, t, e, r, s);d < h && (c = u + 0, h = d);}return [c, o[c]];} }, { key: "_floatingAnchorCompute", value: function (t, e) {var i = e.xy,n = { curX: i.x + t.size.w / 2, curY: i.y + t.size.h / 2, x: 0, y: 0, ox: 0, oy: 0 };return this._setComputedPosition(t, n);} }, { key: "_setComputedPosition", value: function (t, e, i) {return this.anchorLocations.set(t.id, e), t.computedPosition = e, i && (t.timestamp = i), e;} }, { key: "_computeSingleLocation", value: function (t, e, i, n) {var r,s = n.rotation,o = { curX: e.x + t.x * i.w + t.offx, curY: e.y + t.y * i.h + t.offy, x: t.x, y: t.y, ox: 0, oy: 0 };if (null != s && s.length > 0) {var a = [t.iox, t.ioy],l = { x: o.curX, y: o.curY, cr: 0, sr: 0 };M(s, function (t) {l = j(l, t.c, t.r);var e = [Math.round(a[0] * l.cr - a[1] * l.sr), Math.round(a[1] * l.cr + a[0] * l.sr)];a = e.slice();}), t.ox = a[0], t.oy = a[1], r = { curX: l.x, curY: l.y, x: t.x, y: t.y, ox: a[0], oy: a[1] };} else t.ox = t.iox, t.oy = t.ioy, r = b({ ox: t.iox, oy: t.ioy }, o);return r;} }, { key: "_singleAnchorCompute", value: function (t, e) {var i = e.xy,n = e.wh,r = e.timestamp,s = this.anchorLocations.get(t.id);if (null != s && r && r === t.timestamp) return s;var o = f(ls(t), 2);o[0];var a = o[1];return s = this._computeSingleLocation(a, i, n, e), this._setComputedPosition(t, s, r);} }, { key: "_defaultAnchorCompute", value: function (t, e) {var i;if (1 === t.locations.length) return this._singleAnchorCompute(t, e);var n = e.xy,r = e.wh,s = e.txy,o = e.twh,a = f(ls(t), 2),l = a[0],c = a[1];if (t.locked || null == s || null == o) i = this._computeSingleLocation(c, n, r, e);else {var h = f(this._anchorSelector(n, r, s, o, e.rotation, e.tRotation, t.locations), 2),u = h[0],d = h[1];t.currentLocation = u, u !== l && (t.cssClass = d.cls || t.cssClass, e.element._anchorLocationChanged(t)), i = this._computeSingleLocation(d, n, r, e);}return this._setComputedPosition(t, i, e.timestamp);} }, { key: "_placeAnchors", value: function (t, e) {var i = this,n = this.instance.viewport.getPosition(t),r = function (e, r, s, o, a, l) {if (s.length > 0) for (var c = s.sort(rs[e]), h = function (t, e, i, n, r) {for (var s = i ? t.w : t.h, o = i ? t.h : t.w, a = [], l = s / (e.length + 1), c = 0; c < e.length; c++) {var h = (c + 1) * l,u = n * o;r && (h = s - h);var d = i ? h : u,p = t.x + d,f = d / t.w,g = i ? u : h,m = t.y + g,v = g / t.h;if (0 !== t.r && null != t.r) {var y = j({ x: p, y: m }, t.c, t.r);p = y.x, m = y.y;}a.push({ x: p, y: m, xLoc: f, yLoc: v, c: e[c].c });}return a;}(n, c, o, a, e === En || e === xn), u = 0; u < h.length; u++) {var d = h[u].c,p = d.endpoints[0].elementId === t ? d.endpoints[0] : d.endpoints[1];i._setComputedPosition(p._anchor, { curX: h[u].x, curY: h[u].y, x: h[u].xLoc, y: h[u].yLoc, ox: l[0], oy: l[1] });}};r(Cn, 0, e.bottom, !0, 1, [0, 1]), r(xn, 0, e.top, !0, 0, [0, -1]), r(Sn, 0, e.left, !1, 0, [-1, 0]), r(En, 0, e.right, !1, 1, [1, 0]);} }, { key: "_updateAnchorList", value: function (t, e, i, n, r, s, o, a, l, c, h) {var u,d = n.endpoints[o],p = d.id,f = [1, 0][o],g = { theta: e, order: i, c: n, b: r, elId: s, epId: p },m = t[l],v = d._continuousAnchorEdge ? t[d._continuousAnchorEdge] : null;if (v) {var y = _(v, function (t) {return t.epId === p;});if (-1 !== y) {v.splice(y, 1);for (var b = 0; b < v.length; b++) !0 !== (u = v[b].c).placeholder && c.add(u), h.add(v[b].c.endpoints[o]), h.add(v[b].c.endpoints[f]);}}for (var w = 0; w < m.length; w++) !0 !== (u = m[w].c).placeholder && c.add(u), h.add(m[w].c.endpoints[o]), h.add(m[w].c.endpoints[f]);var x = a ? 0 : m.length;m.splice(x, 0, g), d._continuousAnchorEdge = l;} }, { key: "_removeEndpointFromAnchorLists", value: function (t) {var e = this.anchorLists.get(t.elementId),i = 0;!function (t, e) {if (t) {var n = function (t) {return t.epId === e;};O(t.top, n), O(t.left, n), O(t.bottom, n), O(t.right, n), i += t.top.length, i += t.left.length, i += t.bottom.length, i += t.right.length;}}(e, t.id), 0 === i && this.anchorLists.delete(t.elementId), this.anchorLocations.delete(t._anchor.id);} }, { key: "computeAnchorLocation", value: function (t, e) {var i;return i = ss(t) ? this.anchorLocations.get(t.id) || { curX: 0, curY: 0, x: 0, y: 0, ox: 0, oy: 0 } : os(t) ? this._floatingAnchorCompute(t, e) : this._defaultAnchorCompute(t, e), t.timestamp = e.timestamp, i;} }, { key: "computePath", value: function (t, e) {var i = this.instance.viewport.getPosition(t.sourceId),n = this.instance.viewport.getPosition(t.targetId),r = t.endpoints[0],s = t.endpoints[1],o = this.getEndpointLocation(r, { xy: i, wh: i, element: r, timestamp: e, rotation: this.instance._getRotations(t.sourceId) }),a = this.getEndpointLocation(s, { xy: n, wh: n, element: s, timestamp: e, rotation: this.instance._getRotations(t.targetId) });t.connector.resetBounds(), t.connector.compute({ sourcePos: o, targetPos: a, sourceEndpoint: t.endpoints[0], targetEndpoint: t.endpoints[1], strokeWidth: t.paintStyleInUse.strokeWidth, sourceInfo: i, targetInfo: n });} }, { key: "getEndpointLocation", value: function (t, e) {e = e || {};var i = t._anchor,n = this.anchorLocations.get(i.id);return (null == n || null != e.timestamp && i.timestamp !== e.timestamp) && (n = this.computeAnchorLocation(i, e), this._setComputedPosition(i, n, e.timestamp)), n;} }, { key: "getEndpointOrientation", value: function (t) {return t._anchor ? this.getAnchorOrientation(t._anchor) : [0, 0];} }, { key: "setAnchorOrientation", value: function (t, e) {var i = this.anchorLocations.get(t.id);null != i && (i.ox = e[0], i.oy = e[1]);} }, { key: "isDynamicAnchor", value: function (t) {return !!t._anchor && !ss(t._anchor) && t._anchor.locations.length > 1;} }, { key: "isFloating", value: function (t) {return !!t._anchor && os(t._anchor);} }, { key: "prepareAnchor", value: function (t) {return qn(t);} }, { key: "redraw", value: function (t, e, i) {var n = this,r = new Set(),s = new Set(),o = new Set();if (!this.instance._suspendDrawing) {var a = this.instance.endpointsByElement[t] || [];e = e || B();for (var l, c, h = {}, u = 0; u < a.length; u++) if (!1 !== (c = a[u]).visible) if (s.add(c), l = c._anchor, 0 === c.connections.length) ss(l) && (this.anchorLists.has(t) || this.anchorLists.set(t, { top: [], right: [], bottom: [], left: [] }), this._updateAnchorList(this.anchorLists.get(t), -Math.PI / 2, 0, { endpoints: [c, c], placeholder: !0 }, !1, t, 0, !1, Dn(l), r, s), o.add(t));else for (var d = 0; d < c.connections.length; d++) {var p = c.connections[d],f = p.sourceId,g = p.targetId,m = ss(p.endpoints[0]._anchor),v = ss(p.endpoints[1]._anchor);if (m || v) {var y = [f, (p.endpoints[0]._anchor.faces || []).join("-"), g, (p.endpoints[1]._anchor.faces || []).join("-")].join("-"),b = h[y],w = p.sourceId === t ? 1 : 0;m && !this.anchorLists.has(f) && this.anchorLists.set(f, { top: [], right: [], bottom: [], left: [] }), v && !this.anchorLists.has(g) && this.anchorLists.set(g, { top: [], right: [], bottom: [], left: [] });var x = this.instance.viewport.getPosition(g),S = this.instance.viewport.getPosition(f);if (g === f && (m || v)) this._updateAnchorList(this.anchorLists.get(f), -Math.PI / 2, 0, p, !1, g, 0, !1, xn, r, s), this._updateAnchorList(this.anchorLists.get(g), -Math.PI / 2, 0, p, !1, f, 1, !1, xn, r, s);else {var E = this.instance._getRotations(f),C = this.instance._getRotations(g);b || (b = this._calculateOrientation(f, g, S, x, p.endpoints[0]._anchor, p.endpoints[1]._anchor, E, C), h[y] = b), m && this._updateAnchorList(this.anchorLists.get(f), b.theta, 0, p, !1, g, 0, !1, b.a[0], r, s), v && this._updateAnchorList(this.anchorLists.get(g), b.theta2, -1, p, !0, f, 1, !0, b.a[1], r, s);}m && o.add(f), v && o.add(g), r.add(p), (m && 0 === w || v && 1 === w) && s.add(p.endpoints[w]);} else {var k = c.connections[d].endpoints[p.sourceId === t ? 1 : 0];if (as(k._anchor)) {this.instance._paintEndpoint(k, { elementWithPrecedence: t, timestamp: e }), r.add(c.connections[d]);for (var T = 0; T < k.connections.length; T++) k.connections[T] !== c.connections[d] && r.add(k.connections[T]);} else r.add(c.connections[d]);}}o.forEach(function (t) {n._placeAnchors(t, n.anchorLists.get(t));}), s.forEach(function (t) {var i = n.instance.viewport.getPosition(t.elementId);n.instance._paintEndpoint(t, { timestamp: e, offset: i });}), r.forEach(function (t) {n.instance._paintConnection(t, { timestamp: e });});}return { c: r, e: s };} }, { key: "reset", value: function () {this.anchorLocations.clear(), this.anchorLists.clear();} }, { key: "setAnchor", value: function (t, e) {null != e && (t._anchor = e);} }, { key: "setConnectionAnchors", value: function (t, e) {t.endpoints[0]._anchor = e[0], t.endpoints[1]._anchor = e[1];} }, { key: "_calculateOrientation", value: function (t, e, i, n, r, s, o, l) {var c = this;if (t === e) return { orientation: "identity", a: [xn, xn] };var h = Math.atan2(n.c.y - i.c.y, n.c.x - i.c.x),u = Math.atan2(i.c.y - n.c.y, i.c.x - n.c.x),d = [],p = {};!function (t, e) {for (var i = 0; i < t.length; i++) {var n;if (p[t[i]] = (a(n = {}, Sn, { x: e[i][0].x, y: e[i][0].c.y }), a(n, En, { x: e[i][0].x + e[i][0].w, y: e[i][0].c.y }), a(n, xn, { x: e[i][0].c.x, y: e[i][0].y }), a(n, Cn, { x: e[i][0].c.x, y: e[i][0].y + e[i][0].h }), n), null != e[i][1] && e[i][1].length > 0) for (var r in p[t[i]]) p[t[i]][r] = c.instance._applyRotationsXY(p[t[i]][r], e[i][1]);}}([dt, pt], [[i, o], [n, l]]);for (var f = [xn, Sn, En, Cn], g = 0; g < f.length; g++) for (var m = 0; m < f.length; m++) d.push({ source: f[g], target: f[m], dist: Ii(p.source[f[g]], p.target[f[m]]) });d.sort(function (t, e) {if (t.dist < e.dist) return -1;if (e.dist < t.dist) return 1;var i,n = (a(i = {}, Sn, 0), a(i, xn, 1), a(i, En, 2), a(i, Cn, 3), i),r = n[t.source],s = n[e.source],o = n[t.target],l = n[e.target];return r < s ? -1 : s < r ? 1 : o < l ? -1 : l < o ? 1 : 0;});for (var v = d[0].source, y = d[0].target, b = 0; b < d.length && (v = ss(r) && r.locked ? r.currentFace : !r.isContinuous || In(r, d[b].source) ? d[b].source : null, y = s.isContinuous && s.locked ? s.currentFace : !s.isContinuous || In(s, d[b].target) ? d[b].target : null, null == v || null == y); b++);return r.isContinuous && this.setCurrentFace(r, v), s.isContinuous && this.setCurrentFace(s, y), { a: [v, y], theta: h, theta2: u };} }, { key: "setCurrentFace", value: function (t, e, i) {t.currentFace = e, i && null != t.lockedFace && (t.lockedFace = t.currentFace);} }, { key: "lock", value: function (t) {t.locked = !0, ss(t) && (t.lockedFace = t.currentFace);} }, { key: "unlock", value: function (t) {t.locked = !1, ss(t) && (t.lockedFace = null);} }, { key: "selectAnchorLocation", value: function (t, e) {var i = _(t.locations, function (t) {return t.x === e.x && t.y === e.y;});return -1 !== i && (t.currentLocation = i, !0);} }, { key: "lockCurrentAxis", value: function (t) {null != t.currentFace && (t.lockedAxis = t.currentFace === Sn || t.currentFace === En ? kn : Tn);} }, { key: "unlockCurrentAxis", value: function (t) {t.lockedAxis = null;} }, { key: "anchorsEqual", value: function (t, e) {if (!t || !e) return !1;var i = t.locations[t.currentLocation],n = e.locations[e.currentLocation];return i.x === n.x && i.y === n.y && i.offx === n.offx && i.offy === n.offy && i.ox === n.ox && i.oy === n.oy;} }]), t;}(),hs = {},us = function (t, e) {hs[t] = e;},ds = function (t) {l(i, t);var e = d(i);function i(t) {var n;return r(this, i), a(u(n = e.call(this, t)), "length", void 0), a(u(n), "m", void 0), a(u(n), "m2", void 0), a(u(n), "type", i.segmentType), n._setCoordinates({ x1: t.x1, y1: t.y1, x2: t.x2, y2: t.y2 }), n;}return o(i, [{ key: "getPath", value: function (t) {return (t ? "M " + this.x1 + " " + this.y1 + " " : "") + "L " + this.x2 + " " + this.y2;} }, { key: "_recalc", value: function () {this.length = Math.sqrt(Math.pow(this.x2 - this.x1, 2) + Math.pow(this.y2 - this.y1, 2)), this.m = Oi({ x: this.x1, y: this.y1 }, { x: this.x2, y: this.y2 }), this.m2 = -1 / this.m, this.extents = { xmin: Math.min(this.x1, this.x2), ymin: Math.min(this.y1, this.y2), xmax: Math.max(this.x1, this.x2), ymax: Math.max(this.y1, this.y2) };} }, { key: "getLength", value: function () {return this.length;} }, { key: "getGradient", value: function () {return this.m;} }, { key: "_setCoordinates", value: function (t) {this.x1 = t.x1, this.y1 = t.y1, this.x2 = t.x2, this.y2 = t.y2, this._recalc();} }, { key: "pointOnPath", value: function (t, e) {if (0 !== t || e) {if (1 !== t || e) {var i = e ? t > 0 ? t : this.length + t : t * this.length;return Li({ x: this.x1, y: this.y1 }, { x: this.x2, y: this.y2 }, i);}return { x: this.x2, y: this.y2 };}return { x: this.x1, y: this.y1 };} }, { key: "gradientAtPoint", value: function (t, e) {return this.m;} }, { key: "pointAlongPathFrom", value: function (t, e, i) {var n = this.pointOnPath(t, i),r = e <= 0 ? { x: this.x1, y: this.y1 } : { x: this.x2, y: this.y2 };return e <= 0 && Math.abs(e) > 1 && (e *= -1), Li(n, r, e);} }, { key: "within", value: function (t, e, i) {return i >= Math.min(t, e) && i <= Math.max(t, e);} }, { key: "closest", value: function (t, e, i) {return Math.abs(i - t) < Math.abs(i - e) ? t : e;} }, { key: "findClosestPointOnPath", value: function (t, e) {var i = { d: 1 / 0, x: null, y: null, l: null, x1: this.x1, x2: this.x2, y1: this.y1, y2: this.y2 };if (0 === this.m) i.y = this.y1, i.x = this.within(this.x1, this.x2, t) ? t : this.closest(this.x1, this.x2, t);else if (this.m === 1 / 0 || this.m === -1 / 0) i.x = this.x1, i.y = this.within(this.y1, this.y2, e) ? e : this.closest(this.y1, this.y2, e);else {var n = this.y1 - this.m * this.x1,r = (e - this.m2 * t - n) / (this.m - this.m2),s = this.m * r + n;i.x = this.within(this.x1, this.x2, r) ? r : this.closest(this.x1, this.x2, r), i.y = this.within(this.y1, this.y2, s) ? s : this.closest(this.y1, this.y2, s);}var o = Ii({ x: i.x, y: i.y }, { x: this.x1, y: this.y1 });return i.d = Ii({ x: t, y: e }, i), i.l = o / length, i;} }, { key: "_pointLiesBetween", value: function (t, e, i) {return i > e ? e <= t && t <= i : e >= t && t >= i;} }, { key: "lineIntersection", value: function (t, e, i, n) {var r = Math.abs(Oi({ x: t, y: e }, { x: i, y: n })),s = Math.abs(this.m),o = s === 1 / 0 ? this.x1 : this.y1 - s * this.x1,a = [],l = r === 1 / 0 ? t : e - r * t;if (r !== s) if (r === 1 / 0 && 0 === s) this._pointLiesBetween(t, this.x1, this.x2) && this._pointLiesBetween(this.y1, e, n) && a.push({ x: t, y: this.y1 });else if (0 === r && s === 1 / 0) this._pointLiesBetween(e, this.y1, this.y2) && this._pointLiesBetween(this.x1, t, i) && a.push({ x: this.x1, y: e });else {var c, h;r === 1 / 0 ? (c = t, this._pointLiesBetween(c, this.x1, this.x2) && (h = s * t + o, this._pointLiesBetween(h, e, n) && a.push({ x: c, y: h }))) : 0 === r ? (h = e, this._pointLiesBetween(h, this.y1, this.y2) && (c = (e - o) / s, this._pointLiesBetween(c, t, i) && a.push({ x: c, y: h }))) : (h = s * (c = (l - o) / (s - r)) + o, this._pointLiesBetween(c, this.x1, this.x2) && this._pointLiesBetween(h, this.y1, this.y2) && a.push({ x: c, y: h }));}return a;} }, { key: "boxIntersection", value: function (t, e, i, n) {var r = [];return r.push.apply(r, this.lineIntersection(t, e, t + i, e)), r.push.apply(r, this.lineIntersection(t + i, e, t + i, e + n)), r.push.apply(r, this.lineIntersection(t + i, e + n, t, e + n)), r.push.apply(r, this.lineIntersection(t, e + n, t, e)), r;} }]), i;}(ei);a(ds, "segmentType", "Straight");var ps = function (t) {l(i, t);var e = d(i);function i() {var t;r(this, i);for (var n = arguments.length, s = new Array(n), o = 0; o < n; o++) s[o] = arguments[o];return a(u(t = e.call.apply(e, [this].concat(s))), "type", i.type), t;}return o(i, [{ key: "getDefaultStubs", value: function () {return [0, 0];} }, { key: "_compute", value: function (t, e) {this._addSegment(ds, { x1: t.sx, y1: t.sy, x2: t.startStubX, y2: t.startStubY }), this._addSegment(ds, { x1: t.startStubX, y1: t.startStubY, x2: t.endStubX, y2: t.endStubY }), this._addSegment(ds, { x1: t.endStubX, y1: t.endStubY, x2: t.tx, y2: t.ty }), this.geometry = { source: e.sourcePos, target: e.targetPos };} }, { key: "transformGeometry", value: function (t, e, i) {return { source: this.transformAnchorPlacement(t.source, e, i), target: this.transformAnchorPlacement(t.target, e, i) };} }]), i;}(Pr);function fs(t, e, i) {var n = [],r = function (e) {return x(e) ? e : t.getId(e);};if (e) if ("string" == typeof e) {if ("*" === e) return e;n.push(e);} else {var s;i ? n = e : null != e.length ? (s = n).push.apply(s, g(g(e).map(r))) : n.push(r(e));}return n;}function gs(t, e, i) {null != e && (e.connections.push(t), 1 === e.connections.length && t.instance.addClass(t.source, t.instance.connectedClass)), null != i && (null != e && t.sourceId === t.targetId || (i.connections.push(t), 1 === i.connections.length && t.instance.addClass(t.target, t.instance.connectedClass)));}function ms(t, e, i) {if (null != e) {var n = e.connections.length;O(e.connections, function (e) {return t.id === e.id;}), n > 0 && 0 === e.connections.length && t.instance.removeClass(t.source, t.instance.connectedClass);}if (null != i) {var r = i.connections.length;null != e && t.sourceId === t.targetId || O(i.connections, function (e) {return t.id === e.id;}), r > 0 && 0 === i.connections.length && t.instance.removeClass(t.target, t.instance.connectedClass);}}a(ps, "type", "Straight");var vs = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), (s = e.call(this))._instanceIndex = t, a(u(s), "defaults", void 0), a(u(s), "_initialDefaults", {}), a(u(s), "isConnectionBeingDragged", !1), a(u(s), "currentlyDragging", !1), a(u(s), "hoverSuspended", !1), a(u(s), "_suspendDrawing", !1), a(u(s), "_suspendedAt", null), a(u(s), "connectorClass", Ct), a(u(s), "connectorOutlineClass", "jtk-connector-outline"), a(u(s), "connectedClass", "jtk-connected"), a(u(s), "endpointClass", kt), a(u(s), "endpointConnectedClass", "jtk-endpoint-connected"), a(u(s), "endpointFullClass", "jtk-endpoint-full"), a(u(s), "endpointFloatingClass", Tt), a(u(s), "endpointDropAllowedClass", "jtk-endpoint-drop-allowed"), a(u(s), "endpointDropForbiddenClass", "jtk-endpoint-drop-forbidden"), a(u(s), "endpointAnchorClassPrefix", "jtk-endpoint-anchor"), a(u(s), "overlayClass", _t), a(u(s), "connections", []), a(u(s), "endpointsByElement", {}), a(u(s), "endpointsByUUID", new Map()), a(u(s), "sourceSelectors", []), a(u(s), "targetSelectors", []), a(u(s), "allowNestedGroups", void 0), a(u(s), "_curIdStamp", 1), a(u(s), "viewport", new es(u(s))), a(u(s), "router", void 0), a(u(s), "groupManager", void 0), a(u(s), "_connectionTypes", new Map()), a(u(s), "_endpointTypes", new Map()), a(u(s), "_container", void 0), a(u(s), "_managedElements", {}), a(u(s), "DEFAULT_SCOPE", void 0), a(u(s), "_zoom", 1), s.defaults = { anchor: ee.Bottom, anchors: [null, null], connectionsDetachable: !0, connectionOverlays: [], connector: ps.type, container: null, endpoint: jr.type, endpointOverlays: [], endpoints: [null, null], endpointStyle: { fill: "#456" }, endpointStyles: [null, null], endpointHoverStyle: null, endpointHoverStyles: [null, null], hoverPaintStyle: null, listStyle: {}, maxConnections: 1, paintStyle: { strokeWidth: 2, stroke: "#456" }, reattachConnections: !1, scope: "jsplumb_defaultscope", allowNestedGroups: !0 }, n && b(s.defaults, n), b(s._initialDefaults, s.defaults), null != s._initialDefaults[Br] && (s._initialDefaults[Br].strokeWidth = s._initialDefaults[Br].strokeWidth || 2), s.DEFAULT_SCOPE = s.defaults.scope, s.allowNestedGroups = !1 !== s._initialDefaults.allowNestedGroups, s.router = new cs(u(s)), s.groupManager = new qr(u(s)), s.setContainer(s._initialDefaults.container), s;}return o(i, [{ key: "defaultScope", get: function () {return this.DEFAULT_SCOPE;} }, { key: "currentZoom", get: function () {return this._zoom;} }, { key: "areDefaultAnchorsSet", value: function () {return this.validAnchorsSpec(this.defaults.anchors);} }, { key: "validAnchorsSpec", value: function (t) {return null != t && null != t[0] && null != t[1];} }, { key: "getContainer", value: function () {return this._container;} }, { key: "setZoom", value: function (t, e) {return this._zoom = t, this.fire(Vt, this._zoom), e && this.repaintEverything(), !0;} }, { key: "_idstamp", value: function () {return "" + this._curIdStamp++;} }, { key: "checkCondition", value: function (t, e) {var i = this.getListener(t),n = !0;if (i && i.length > 0) {var r = Array.prototype.slice.call(arguments, 1);try {for (var s = 0, o = i.length; s < o; s++) n = n && i[s].apply(i[s], r);} catch (e) {q("cannot check condition [" + t + "]" + e);}}return n;} }, { key: "getId", value: function (t, e) {if (null == t) return null;var i = this.getAttribute(t, bt);return i && "undefined" !== i || (2 === arguments.length && void 0 !== arguments[1] ? i = e : (1 === arguments.length || 3 === arguments.length && !arguments[2]) && (i = "jsplumb-" + this._instanceIndex + "-" + this._idstamp()), this.setAttribute(t, bt, i)), i;} }, { key: "getConnections", value: function (t, e) {t ? t.constructor === String && (t = { scope: t }) : t = {};for (var i = fs(this, t.scope || this.defaultScope, !0), n = fs(this, t.source), r = fs(this, t.target), s = !e && i.length > 1 ? {} : [], o = function (t, n) {if (!e && i.length > 1) {var r = s[t];null == r && (r = s[t] = []), r.push(n);} else s.push(n);}, a = 0, l = this.connections.length; a < l; a++) {var c = this.connections[a],h = c.proxies && c.proxies[0] ? c.proxies[0].originalEp.elementId : c.sourceId,u = c.proxies && c.proxies[1] ? c.proxies[1].originalEp.elementId : c.targetId;y(i, c.scope) && y(n, h) && y(r, u) && o(c.scope, c);}return s;} }, { key: "select", value: function (t) {return (t = t || {}).scope = t.scope || "*", new Wr(this, t.connections || this.getConnections(t, !0));} }, { key: "selectEndpoints", value: function (t) {(t = t || {}).scope = t.scope || oi;var e = !t.element && !t.source && !t.target,i = e ? oi : fs(this, t.element),n = e ? oi : fs(this, t.source),r = e ? oi : fs(this, t.target),s = fs(this, t.scope, !0),o = [];for (var a in this.endpointsByElement) {var l = y(i, a, !0),c = y(n, a, !0),h = "*" !== n,u = y(r, a, !0),d = "*" !== r;if (l || c || u) t: for (var p = 0, f = this.endpointsByElement[a].length; p < f; p++) {var g = this.endpointsByElement[a][p];if (y(s, g.scope, !0)) {var m = h && n.length > 0 && !g.isSource,v = d && r.length > 0 && !g.isTarget;if (m || v) continue t;o.push(g);}}}return new Gr(this, o);} }, { key: "setContainer", value: function (t) {this._container = t, this.fire("container:change", this._container);} }, { key: "_set", value: function (t, e, i) {var n,r,s = [{ el: "source", elId: "sourceId" }, { el: "target", elId: "targetId" }][i],o = t[s.elId],a = t.endpoints[i],l = { index: i, originalEndpoint: a, originalSourceId: 0 === i ? o : t.sourceId, newSourceId: t.sourceId, originalTargetId: 1 === i ? o : t.targetId, newTargetId: t.targetId, connection: t, newEndpoint: a };return e instanceof Sr ? (n = e).addConnection(t) : n = (r = this.getId(e)) === t[s.elId] ? null : t.makeEndpoint(0 === i, e, r), null != n && (l.newEndpoint = n, a.detachFromConnection(t), t.endpoints[i] = n, t[s.el] = n.element, t[s.elId] = n.elementId, l[0 === i ? "newSourceId" : "newTargetId"] = n.elementId, this.fireMoveEvent(l), this._paintConnection(t)), l;} }, { key: "setSource", value: function (t, e) {ms(t, this._managedElements[t.sourceId]);var i = this._set(t, e, 0);gs(t, this._managedElements[i.newSourceId]);} }, { key: "setTarget", value: function (t, e) {ms(t, this._managedElements[t.targetId]);var i = this._set(t, e, 1);gs(t, this._managedElements[i.newTargetId]);} }, { key: "setConnectionType", value: function (t, e, i) {t.setType(e, i), this._paintConnection(t);} }, { key: "isHoverSuspended", value: function () {return this.hoverSuspended;} }, { key: "setSuspendDrawing", value: function (t, e) {var i = this._suspendDrawing;return this._suspendDrawing = t, t ? this._suspendedAt = "" + new Date().getTime() : (this._suspendedAt = null, this.viewport.recomputeBounds()), e && this.repaintEverything(), i;} }, { key: "getSuspendedAt", value: function () {return this._suspendedAt;} }, { key: "batch", value: function (t, e) {var i = !0 === this._suspendDrawing;i || this.setSuspendDrawing(!0), t(), i || this.setSuspendDrawing(!1, !e);} }, { key: "each", value: function (t, e) {if (null != t) {if (null != t.length) for (var i = 0; i < t.length; i++) e(t[i]);else e(t);return this;}} }, { key: "updateOffset", value: function (t) {var e = t.elId;return t.recalc ? this.viewport.refreshElement(e) : this.viewport.getPosition(e);} }, { key: "deleteConnection", value: function (t, e) {if (null != t && !0 !== t.deleted && ((e = e || {}).force || A(!0, !1, [[t.endpoints[0], Bt, [t]], [t.endpoints[1], Bt, [t]], [t, Bt, [t]], [this, Et, [zt, t]]]))) {ms(t, this._managedElements[t.sourceId], this._managedElements[t.targetId]), this.fireDetachEvent(t, !t.pending && !1 !== e.fireEvent, e.originalEvent);var i = t.endpoints[0],n = t.endpoints[1];return i !== e.endpointToIgnore && i.detachFromConnection(t, null, !0), n !== e.endpointToIgnore && n.detachFromConnection(t, null, !0), O(this.connections, function (e) {return t.id === e.id;}), t.destroy(), i !== e.endpointToIgnore && i.deleteOnEmpty && 0 === i.connections.length && this.deleteEndpoint(i), n !== e.endpointToIgnore && n.deleteOnEmpty && 0 === n.connections.length && this.deleteEndpoint(n), !0;}return !1;} }, { key: "deleteEveryConnection", value: function (t) {var e = this;t = t || {};var i = this.connections.length,n = 0;return this.batch(function () {for (var r = 0; r < i; r++) n += e.deleteConnection(e.connections[0], t) ? 1 : 0;}), n;} }, { key: "deleteConnectionsForElement", value: function (t, e) {var i = this.getId(t),n = this._managedElements[i];if (n) for (var r = n.connections.length, s = 0; s < r; s++) this.deleteConnection(n.connections[0], e);return this;} }, { key: "fireDetachEvent", value: function (t, e, i) {var n = null != t.id ? { connection: t, source: t.source, target: t.target, sourceId: t.sourceId, targetId: t.targetId, sourceEndpoint: t.endpoints[0], targetEndpoint: t.endpoints[1] } : t;e && this.fire("connection:detach", n, i), this.fire(Ft, n, i);} }, { key: "fireMoveEvent", value: function (t, e) {this.fire(Ot, t, e);} }, { key: "manageAll", value: function (t, e) {for (var i = x(t) ? this.getSelector(this.getContainer(), t) : t, n = 0; n < i.length; n++) this.manage(i[n], null, e);} }, { key: "manage", value: function (t, e, i) {null == this.getAttribute(t, bt) && (e = e || this.getAttribute(t, "id") || B(), this.setAttribute(t, bt, e));var n = this.getId(t);if (this._managedElements[n]) i && (this._managedElements[n].viewportElement = this.updateOffset({ elId: n, timestamp: null, recalc: !0 }));else {var r = { el: t, endpoints: [], connections: [], rotation: 0, data: {} };this._managedElements[n] = r, this._suspendDrawing ? r.viewportElement = this.viewport.registerElement(n, !0) : r.viewportElement = this.updateOffset({ elId: n, recalc: !0 }), this.fire(Rt, { el: t });}return this._managedElements[n];} }, { key: "getManagedData", value: function (t, e, i) {if (this._managedElements[t]) {var n = this._managedElements[t].data[e];return null != n ? n[i] : null;}} }, { key: "setManagedData", value: function (t, e, i, n) {this._managedElements[t] && (this._managedElements[t].data[e] = this._managedElements[t].data[e] || {}, this._managedElements[t].data[e][i] = n);} }, { key: "getManagedElement", value: function (t) {return this._managedElements[t] ? this._managedElements[t].el : null;} }, { key: "unmanage", value: function (t, e) {var i = this;this.removeAllEndpoints(t, !0);var n = function (t) {var n = i.getId(t);i.removeAttribute(t, bt), delete i._managedElements[n], i.viewport.remove(n), i.fire(Nt, { el: t, id: n }), t && e && i._removeElement(t);};this._getAssociatedElements(t).map(n), n(t);} }, { key: "rotate", value: function (t, e, i) {var n = this.getId(t);return this._managedElements[n] && (this._managedElements[n].rotation = e, this.viewport.rotateElement(n, e), !0 !== i) ? this.revalidate(t) : { c: new Set(), e: new Set() };} }, { key: "_getRotation", value: function (t) {var e = this._managedElements[t];return null != e && e.rotation || 0;} }, { key: "_getRotations", value: function (t) {var e = this,i = [],n = this._managedElements[t];return null != n && (i.push({ r: n.viewportElement.r || 0, c: n.viewportElement.c }), function t(n) {if (null != n.group) {var r = e._managedElements[n.group];null != r && (i.push({ r: r.viewportElement.r, c: r.viewportElement.c }), t(r));}}(n)), i;} }, { key: "_applyRotations", value: function (t, e) {var i = t.slice(),n = { x: i[0], y: i[1], cr: 0, sr: 0 };return M(e, function (t) {n = j(n, t.c, t.r);}), n;} }, { key: "_applyRotationsXY", value: function (t, e) {return M(e, function (e) {t = j(t, e.c, e.r);}), t;} }, { key: "_internal_newEndpoint", value: function (t) {var e = b({}, t),i = this.manage(e.element);e.elementId = this.getId(e.element), e.id = "ep_" + this._idstamp();var n = new Sr(this, e);return function (t, e) {null != t && t.endpoints.push(e);}(i, n), t.uuid && this.endpointsByUUID.set(t.uuid, n), R(this.endpointsByElement, n.elementId, n), this._suspendDrawing || this._paintEndpoint(n, { timestamp: this._suspendedAt }), n;} }, { key: "_deriveEndpointAndAnchorSpec", value: function (t, e) {for (var i = ((e ? "" : "default ") + t).split(/[\s]/), n = null, r = null, s = null, o = null, a = 0; a < i.length; a++) {var l = this.getConnectionType(i[a]);l && (l.endpoints && (n = l.endpoints), l.endpoint && (r = l.endpoint), l.anchors && (o = l.anchors), l.anchor && (s = l.anchor));}return { endpoints: n || [r, r], anchors: o || [s, s] };} }, { key: "revalidate", value: function (t, e) {var i = this.getId(t);return this.updateOffset({ elId: i, recalc: !0, timestamp: e }), this.repaint(t);} }, { key: "repaintEverything", value: function () {var t,e = B();for (t in this._managedElements) this.viewport.refreshElement(t, !0);for (t in this.viewport.recomputeBounds(), this._managedElements) this.repaint(this._managedElements[t].el, e, !0);return this;} }, { key: "setElementPosition", value: function (t, e, i) {var n = this.getId(t);return this.viewport.setPosition(n, e, i), this.repaint(t);} }, { key: "repaint", value: function (t, e, i) {var n = { c: new Set(), e: new Set() },r = function (t) {t.c.forEach(function (t) {return n.c.add(t);}), t.e.forEach(function (t) {return n.e.add(t);});};if (!this._suspendDrawing) {var s = this.getId(t);if (null != t) {var o = this._getAssociatedElements(t);if (null == e && (e = B()), !i) for (var a = 0; a < o.length; a++) this.updateOffset({ elId: this.getId(o[a]), recalc: !0, timestamp: e });if (r(this.router.redraw(s, e, null)), o.length > 0) for (var l = 0; l < o.length; l++) r(this.router.redraw(this.getId(o[l]), e, null));}}return n;} }, { key: "unregisterEndpoint", value: function (t) {var e = t.getUuid();e && this.endpointsByUUID.delete(e), function (t, e) {null != t && O(t.endpoints, function (t) {return t === e;});}(this._managedElements[t.elementId], t);var i = this.endpointsByElement[t.elementId];null != i && (this.endpointsByElement[t.elementId] = i.filter(function (e) {return e !== t;})), this.fire(It, t);} }, { key: "_maybePruneEndpoint", value: function (t) {return !(!t.deleteOnEmpty || 0 !== t.connections.length || (this.deleteEndpoint(t), 0));} }, { key: "deleteEndpoint", value: function (t) {var e = this,i = "string" == typeof t ? this.endpointsByUUID.get(t) : t;if (i) {var n = i.proxiedBy,r = i.connections.slice();M(r, function (t) {i.detachFromConnection(t, null, !0);}), this.unregisterEndpoint(i), i.destroy(), M(r, function (t) {e.deleteConnection(t, { force: !0, endpointToIgnore: i });}), null != n && this.deleteEndpoint(n);}return this;} }, { key: "addEndpoint", value: function (t, e, i) {var n = b({}, i = i || {});b(n, e || {});var r = b({ element: t }, n);return this._internal_newEndpoint(r);} }, { key: "addEndpoints", value: function (t, e, i) {for (var n = [], r = 0, s = e.length; r < s; r++) n.push(this.addEndpoint(t, e[r], i));return n;} }, { key: "reset", value: function () {var t = this;this.silently(function () {t.endpointsByElement = {}, t._managedElements = {}, t.endpointsByUUID.clear(), t.viewport.reset(), t.router.reset(), t.groupManager.reset(), t.connections.length = 0;});} }, { key: "destroy", value: function () {this.reset(), this.unbind(), this.sourceSelectors.length = 0, this.targetSelectors.length = 0, this._connectionTypes.clear(), this._endpointTypes.clear();} }, { key: "getEndpoints", value: function (t) {return this.endpointsByElement[this.getId(t)] || [];} }, { key: "getEndpoint", value: function (t) {return this.endpointsByUUID.get(t);} }, { key: "setEndpointUuid", value: function (t, e) {t.uuid && this.endpointsByUUID.delete(t.uuid), t.uuid = e, this.endpointsByUUID.set(e, t);} }, { key: "connect", value: function (t, e) {try {var i = this._prepareConnectionParams(t, e),n = this._newConnection(i);return this._finaliseConnection(n, i), n;} catch (t) {return void q(t);}} }, { key: "_prepareConnectionParams", value: function (t, e) {var i = b({}, t);e && b(i, e);var n = i;if (n.source && n.source.endpoint && (n.sourceEndpoint = n.source), n.target && n.target.endpoint && (n.targetEndpoint = n.target), t.uuids && (n.sourceEndpoint = this.getEndpoint(t.uuids[0]), n.targetEndpoint = this.getEndpoint(t.uuids[1])), null != n.sourceEndpoint) {if (n.sourceEndpoint.isFull()) throw "Cannot establish connection: source endpoint is full";if (n.type || (n.type = n.sourceEndpoint.edgeType), n.sourceEndpoint.connectorOverlays) {n.overlays = n.overlays || [];for (var r = 0, s = n.sourceEndpoint.connectorOverlays.length; r < s; r++) n.overlays.push(n.sourceEndpoint.connectorOverlays[r]);}n.sourceEndpoint.scope && (n.scope = n.sourceEndpoint.scope);} else if (null == n.source) throw "Cannot establish connection: source does not exist";if (null != n.targetEndpoint) {if (n.targetEndpoint.isFull()) throw "Cannot establish connection: target endpoint is full";} else if (null == n.target) throw "Cannot establish connection: target does not exist";if (n.sourceEndpoint && n.targetEndpoint && !function (t, e) {for (var i = t.scope.split(/\s/), n = e.scope.split(/\s/), r = 0; r < i.length; r++) for (var s = 0; s < n.length; s++) if (n[s] === i[r]) return !0;return !1;}(n.sourceEndpoint, n.targetEndpoint)) throw "Cannot establish connection: scopes do not match";return n;} }, { key: "_newConnection", value: function (t) {t.id = "con_" + this._idstamp();var e = new Tr(this, t);return gs(e, this._managedElements[e.sourceId], this._managedElements[e.targetId]), this._paintConnection(e), e;} }, { key: "_finaliseConnection", value: function (t, e, i) {e = e || {}, t.suspendedEndpoint || this.connections.push(t), t.pending = null, t.endpoints[0].isTemporarySource = !1, this.repaint(t.source);var n = { connection: t, source: t.source, target: t.target, sourceId: t.sourceId, targetId: t.targetId, sourceEndpoint: t.endpoints[0], targetEndpoint: t.endpoints[1] };this.fire(Dt, n, i), e.doNotFireConnectionEvent || !1 === e.fireEvent || this.fire(Pt, n, i);} }, { key: "removeAllEndpoints", value: function (t, e) {var i = this,n = function (t) {var e,n,r = i.getId(t),s = i.endpointsByElement[r];if (s) for (e = 0, n = s.length; e < n; e++) i.deleteEndpoint(s[e]);delete i.endpointsByElement[r];};return e && this._getAssociatedElements(t).map(n), n(t), this;} }, { key: "_createSourceDefinition", value: function (t, e) {var i = b({}, e);b(i, t), i.edgeType = i.edgeType || ni;var n = this._deriveEndpointAndAnchorSpec(i.edgeType);i.endpoint = i.endpoint || n.endpoints[0], i.anchor = i.anchor || n.anchors[0];var r = i.maxConnections || -1;return { def: b({}, i), uniqueEndpoint: i.uniqueEndpoint, maxConnections: r, enabled: !0, endpoint: null };} }, { key: "addSourceSelector", value: function (t, e) {var i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],n = this._createSourceDefinition(e),r = new Zn(t, n, i);return this.sourceSelectors.push(r), r;} }, { key: "removeSourceSelector", value: function (t) {O(this.sourceSelectors, function (e) {return e === t;});} }, { key: "removeTargetSelector", value: function (t) {O(this.targetSelectors, function (e) {return e === t;});} }, { key: "addTargetSelector", value: function (t, e) {var i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],n = this._createTargetDefinition(e),r = new Zn(t, n, i);return this.targetSelectors.push(r), r;} }, { key: "_createTargetDefinition", value: function (t, e) {var i = b({}, e);b(i, t), i.edgeType = i.edgeType || ni;var n = i.maxConnections || -1;return { def: b({}, i), uniqueEndpoint: i.uniqueEndpoint, maxConnections: n, enabled: !0, endpoint: null };} }, { key: "show", value: function (t, e) {return this._setVisible(t, ft, e);} }, { key: "hide", value: function (t, e) {return this._setVisible(t, gt, e);} }, { key: "_setVisible", value: function (t, e, i) {var n = e === ft,r = null;i && (r = function (t) {t.setVisible(n, !0, !0);});var s = this.getId(t);return this._operation(t, function (t) {if (n && i) {var e = t.sourceId === s ? 1 : 0;t.endpoints[e].isVisible() && t.setVisible(!0);} else t.setVisible(n);}, r), this;} }, { key: "toggleVisible", value: function (t, e) {var i = null;e && (i = function (t) {var e = t.isVisible();t.setVisible(!e);}), this._operation(t, function (t) {var e = t.isVisible();t.setVisible(!e);}, i);} }, { key: "_operation", value: function (t, e, i) {var n = this.getId(t),r = this.endpointsByElement[n];if (r && r.length) for (var s = 0, o = r.length; s < o; s++) {for (var a = 0, l = r[s].connections.length; a < l; a++) if (e(r[s].connections[a])) return;i && i(r[s]);}} }, { key: "registerConnectionType", value: function (t, e) {if (this._connectionTypes.set(t, b({}, e)), e.overlays) {for (var i = {}, n = 0; n < e.overlays.length; n++) {var r = rr(e.overlays[n]);i[r.options.id] = r;}this._connectionTypes.get(t).overlays = i;}} }, { key: "registerConnectionTypes", value: function (t) {for (var e in t) this.registerConnectionType(e, t[e]);} }, { key: "registerEndpointType", value: function (t, e) {if (this._endpointTypes.set(t, b({}, e)), e.overlays) {for (var i = {}, n = 0; n < e.overlays.length; n++) {var r = rr(e.overlays[n]);i[r.options.id] = r;}this._endpointTypes.get(t).overlays = i;}} }, { key: "registerEndpointTypes", value: function (t) {for (var e in t) this.registerEndpointType(e, t[e]);} }, { key: "getType", value: function (t, e) {return "connection" === e ? this.getConnectionType(t) : this.getEndpointType(t);} }, { key: "getConnectionType", value: function (t) {return this._connectionTypes.get(t);} }, { key: "getEndpointType", value: function (t) {return this._endpointTypes.get(t);} }, { key: "importDefaults", value: function (t) {for (var e in t) this.defaults[e] = t[e];return null != this.defaults[Br] && (this.defaults[Br].strokeWidth = this.defaults[Br].strokeWidth || 2), t.container && this.setContainer(t.container), this;} }, { key: "restoreDefaults", value: function () {return this.defaults = b({}, this._initialDefaults), this;} }, { key: "getManagedElements", value: function () {return this._managedElements;} }, { key: "proxyConnection", value: function (t, e, i, n, r) {var s,o = null != t.proxies[e],a = o ? t.proxies[e].originalEp.elementId : t.endpoints[e].elementId,l = o ? t.proxies[e].originalEp : t.endpoints[e],c = this.getId(i);t.proxies[e] ? t.proxies[e].ep.elementId === c ? s = t.proxies[e].ep : (t.proxies[e].ep.detachFromConnection(t, e), s = this._internal_newEndpoint({ element: i, endpoint: n(t, e), anchor: r(t, e), parameters: { isProxyEndpoint: !0 } })) : s = this._internal_newEndpoint({ element: i, endpoint: n(t, e), anchor: r(t, e), parameters: { isProxyEndpoint: !0 } }), s.deleteOnEmpty = !0, t.proxies[e] = { ep: s, originalEp: l }, this.sourceOrTargetChanged(a, c, t, i, e), l.detachFromConnection(t, null, !0), s.connections = [t], t.endpoints[e] = s, l.proxiedBy = s, l.setVisible(!1), t.setVisible(!0), this.revalidate(i);} }, { key: "unproxyConnection", value: function (t, e) {if (null != t.proxies && null != t.proxies[e]) {var i = t.proxies[e].originalEp.element,n = t.proxies[e].originalEp.elementId,r = t.proxies[e].ep.elementId;t.endpoints[e] = t.proxies[e].originalEp, delete t.proxies[e].originalEp.proxiedBy, this.sourceOrTargetChanged(r, n, t, i, e), t.proxies[e].ep.detachFromConnection(t, null), t.proxies[e].originalEp.addConnection(t), t.isVisible() && t.proxies[e].originalEp.setVisible(!0), t.proxies[e] = null, -1 === _(t.proxies, function (t) {return null != t;}) && (t.proxies.length = 0);}} }, { key: "sourceOrTargetChanged", value: function (t, e, i, n, r) {t !== e && (0 === r ? (i.sourceId = e, i.source = n) : 1 === r && (i.targetId = e, i.target = n), ms(i, this._managedElements[t]), gs(i, this._managedElements[e]));} }, { key: "getGroup", value: function (t) {return this.groupManager.getGroup(t);} }, { key: "getGroupFor", value: function (t) {return this.groupManager.getGroupFor(t);} }, { key: "addGroup", value: function (t) {return this.groupManager.addGroup(t);} }, { key: "addToGroup", value: function (t) {for (var e, i = arguments.length, n = new Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];return (e = this.groupManager).addToGroup.apply(e, [t, !1].concat(n));} }, { key: "collapseGroup", value: function (t) {this.groupManager.collapseGroup(t);} }, { key: "expandGroup", value: function (t) {this.groupManager.expandGroup(t);} }, { key: "toggleGroup", value: function (t) {this.groupManager.toggleGroup(t);} }, { key: "removeGroup", value: function (t, e, i, n) {return this.groupManager.removeGroup(t, e, i, n);} }, { key: "removeAllGroups", value: function (t, e) {this.groupManager.removeAllGroups(t, e, !1);} }, { key: "removeFromGroup", value: function (t, e, i) {this.groupManager.removeFromGroup(t, i, e), this._appendElement(e, this.getContainer()), this.updateOffset({ recalc: !0, elId: this.getId(e) });} }, { key: "_paintEndpoint", value: function (t, e) {var i = (e = e || {}).timestamp,n = !(!1 === e.recalc);if (!i || t.timestamp !== i) {var r = this.viewport.getPosition(t.elementId),s = e.offset ? { x: e.offset.x, y: e.offset.y } : { x: r.x, y: r.y };if (null != s) {var o = e.anchorLoc;if (null == o) {var a = { xy: s, wh: r, element: t, timestamp: i };if (n && this.router.isDynamicAnchor(t) && t.connections.length > 0) {var l = function (t) {var i = 0;if (null != e.elementWithPrecedence) for (var n = 0; n < t.connections.length; n++) if (t.connections[n].sourceId === e.elementWithPrecedence || t.connections[n].targetId === e.elementWithPrecedence) {i = n;break;}return t.connections[i];}(t),c = l.endpoints[0] === t ? 1 : 0,h = 0 === c ? l.sourceId : l.targetId,u = this.viewport.getPosition(h);a.index = 0 === c ? 1 : 0, a.connection = l, a.txy = u, a.twh = u, a.tElement = l.endpoints[c], a.tRotation = this._getRotations(h);} else t.connections.length > 0 && (a.connection = t.connections[0]);a.rotation = this._getRotations(t.elementId), o = this.router.computeAnchorLocation(t._anchor, a);}for (var d in t.endpoint.compute(o, this.router.getEndpointOrientation(t), t.paintStyleInUse), this.renderEndpoint(t, t.paintStyleInUse), t.timestamp = i, t.overlays) if (t.overlays.hasOwnProperty(d)) {var p = t.overlays[d];p.isVisible() && (t.overlayPlacements[d] = this.drawOverlay(p, t.endpoint, t.paintStyleInUse, t.getAbsoluteOverlayPosition(p)), this._paintOverlay(p, t.overlayPlacements[d], { xmin: 0, ymin: 0 }));}}}} }, { key: "_paintConnection", value: function (t, e) {if (!this._suspendDrawing && !1 !== t.visible) {var i = (e = e || {}).timestamp;if (null != i && i === t.lastPaintedAt) return;if (null == i || i !== t.lastPaintedAt) {this.router.computePath(t, i);var n = { xmin: 1 / 0, ymin: 1 / 0, xmax: -1 / 0, ymax: -1 / 0 };for (var r in t.overlays) if (t.overlays.hasOwnProperty(r)) {var s = t.overlays[r];s.isVisible() && (t.overlayPlacements[r] = this.drawOverlay(s, t.connector, t.paintStyleInUse, t.getAbsoluteOverlayPosition(s)), n.xmin = Math.min(n.xmin, t.overlayPlacements[r].xmin), n.xmax = Math.max(n.xmax, t.overlayPlacements[r].xmax), n.ymin = Math.min(n.ymin, t.overlayPlacements[r].ymin), n.ymax = Math.max(n.ymax, t.overlayPlacements[r].ymax));}var o = parseFloat("" + t.paintStyleInUse.strokeWidth || "1") / 2,a = parseFloat("" + t.paintStyleInUse.strokeWidth || "0"),l = { xmin: Math.min(t.connector.bounds.xmin - (o + a), n.xmin), ymin: Math.min(t.connector.bounds.ymin - (o + a), n.ymin), xmax: Math.max(t.connector.bounds.xmax + (o + a), n.xmax), ymax: Math.max(t.connector.bounds.ymax + (o + a), n.ymax) };for (var c in this.paintConnector(t.connector, t.paintStyleInUse, l), t.overlays) if (t.overlays.hasOwnProperty(c)) {var h = t.overlays[c];h.isVisible() && this._paintOverlay(h, t.overlayPlacements[c], l);}}t.lastPaintedAt = i;}} }, { key: "_refreshEndpoint", value: function (t) {t._anchor.isFloating || (t.connections.length > 0 ? this.addEndpointClass(t, this.endpointConnectedClass) : this.removeEndpointClass(t, this.endpointConnectedClass), t.isFull() ? this.addEndpointClass(t, this.endpointFullClass) : this.removeEndpointClass(t, this.endpointFullClass));} }, { key: "_makeConnector", value: function (t, e, i) {return function (t, e, i) {var n = hs[e];if (n) return new n(t, i);throw { message: "jsPlumb: unknown connector type '" + e + "'" };}(t, e, i);} }, { key: "addOverlay", value: function (t, e, i) {if (t.addOverlay(e), !i) {var n = t instanceof Sr ? t.element : t.source;this.revalidate(n);}} }, { key: "removeOverlay", value: function (t, e) {t.removeOverlay(e);var i = t instanceof Sr ? t.element : t.source;this.revalidate(i);} }, { key: "setOutlineColor", value: function (t, e) {t.paintStyleInUse.outlineStroke = e, this._paintConnection(t);} }, { key: "setOutlineWidth", value: function (t, e) {t.paintStyleInUse.outlineWidth = e, this._paintConnection(t);} }, { key: "setColor", value: function (t, e) {t.paintStyleInUse.stroke = e, this._paintConnection(t);} }, { key: "setLineWidth", value: function (t, e) {t.paintStyleInUse.strokeWidth = e, this._paintConnection(t);} }, { key: "setLineStyle", value: function (t, e) {null != e.lineWidth && (t.paintStyleInUse.strokeWidth = e.lineWidth), null != e.outlineWidth && (t.paintStyleInUse.outlineWidth = e.outlineWidth), null != e.color && (t.paintStyleInUse.stroke = e.color), null != e.outlineColor && (t.paintStyleInUse.outlineStroke = e.outlineColor), this._paintConnection(t);} }, { key: "getPathData", value: function (t) {for (var e = "", i = 0; i < t.segments.length; i++) e += t.segments[i].getPath(0 === i), e += " ";return e;} }]), i;}(nr),ys = {};function bs(t, e) {ys[t] = e;}function ws(t, e, i) {var r = e,s = n(e.getBoundingClientRect) !== ii ? e.getBoundingClientRect() : { left: 0, top: 0, width: 0, height: 0 },o = document.body,a = document.documentElement,l = window.pageYOffset || a.scrollTop || o.scrollTop,c = window.pageXOffset || a.scrollLeft || o.scrollLeft,h = a.clientTop || o.clientTop || 0,u = a.clientLeft || o.clientLeft || 0,d = s.top + l - h + 0 * i,p = s.left + c - u + 0 * i,f = gi(t),g = s.width || r.offsetWidth * i,m = s.height || r.offsetHeight * i;return { x: (f.x - p) / g, y: (f.y - d) / m };}function xs(t) {return Or(t) || Fr(t) || Lr(t);}function Ss(t, e) {t.canvas && (t.canvas.style.display = e ? "block" : "none");}function Es(t) {t.canvas && t.canvas.parentNode.removeChild(t.canvas), delete t.canvas;}function Cs(t) {return t.canvas;}function ks(t) {return ir.getElement(t);}function Ts(t) {return ir.getElement(t, t.component, function (e) {var i = t.create(e);return t.instance.addClass(i, t.instance.overlayClass), i;});}function As(t, e, i, n) {var r = t.x,s = t.y;return e._jsPlumbParentGroup && e._jsPlumbParentGroup.constrain && (r = Math.max(t.x, 0), s = Math.max(t.y, 0), r = Math.min(r, i.w - n.w), s = Math.min(s, i.h - n.h)), { x: r, y: s };}var Ms = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;if (r(this, i), (s = e.call(this, t, n))._instanceIndex = t, a(u(s), "containerType", null), a(u(s), "dragSelection", void 0), a(u(s), "dragManager", void 0), a(u(s), "_connectorClick", void 0), a(u(s), "_connectorDblClick", void 0), a(u(s), "_connectorTap", void 0), a(u(s), "_connectorDblTap", void 0), a(u(s), "_endpointClick", void 0), a(u(s), "_endpointDblClick", void 0), a(u(s), "_overlayClick", void 0), a(u(s), "_overlayDblClick", void 0), a(u(s), "_overlayTap", void 0), a(u(s), "_overlayDblTap", void 0), a(u(s), "_connectorMouseover", void 0), a(u(s), "_connectorMouseout", void 0), a(u(s), "_endpointMouseover", void 0), a(u(s), "_endpointMouseout", void 0), a(u(s), "_connectorContextmenu", void 0), a(u(s), "_connectorMousedown", void 0), a(u(s), "_connectorMouseup", void 0), a(u(s), "_endpointMousedown", void 0), a(u(s), "_endpointMouseup", void 0), a(u(s), "_overlayMouseover", void 0), a(u(s), "_overlayMouseout", void 0), a(u(s), "_elementClick", void 0), a(u(s), "_elementTap", void 0), a(u(s), "_elementDblTap", void 0), a(u(s), "_elementMouseenter", void 0), a(u(s), "_elementMouseexit", void 0), a(u(s), "_elementMousemove", void 0), a(u(s), "_elementMouseup", void 0), a(u(s), "_elementMousedown", void 0), a(u(s), "_elementContextmenu", void 0), a(u(s), "_resizeObserver", void 0), a(u(s), "eventManager", void 0), a(u(s), "draggingClass", "jtk-dragging"), a(u(s), "elementDraggingClass", "jtk-element-dragging"), a(u(s), "hoverClass", "jtk-hover"), a(u(s), "sourceElementDraggingClass", "jtk-source-element-dragging"), a(u(s), "targetElementDraggingClass", "jtk-target-element-dragging"), a(u(s), "hoverSourceClass", "jtk-source-hover"), a(u(s), "hoverTargetClass", "jtk-target-hover"), a(u(s), "dragSelectClass", "jtk-drag-select"), a(u(s), "managedElementsSelector", void 0), a(u(s), "elementsDraggable", void 0), a(u(s), "elementDragHandler", void 0), a(u(s), "groupDragOptions", void 0), a(u(s), "elementDragOptions", void 0), a(u(s), "svg", { node: function (t, e) {return Zt(t, e);}, attr: function (t, e) {return Kt(t, e);}, pos: function (t) {return Yt(t);} }), n = n || {}, s.containerType = ct(s.getContainer()), s.elementsDraggable = n && !1 !== n.elementsDraggable, s.managedElementsSelector = n && n.managedElementsSelector || Ut, s.eventManager = new Mi(), s.dragSelection = new un(u(s)), s.dragManager = new fn(u(s), s.dragSelection), s.dragManager.addHandler(new tr(u(s))), s.groupDragOptions = { constrainFunction: As }, s.dragManager.addHandler(new er(u(s), s.dragSelection), s.groupDragOptions), s.elementDragHandler = new gn(u(s), s.dragSelection), s.elementDragOptions = n && n.dragOptions || {}, s.dragManager.addHandler(s.elementDragHandler, s.elementDragOptions), n && n.dragOptions && n.dragOptions.filter && s.dragManager.addFilter(n.dragOptions.filter), s._createEventListeners(), s._attachEventDelegates(), !1 !== n.resizeObserver) try {s._resizeObserver = new ResizeObserver(function (t) {t.filter(function (t) {var e = s.getAttribute(t.target, bt);if (null != e) {var i = s.viewport._elementMap.get(e);return !!i && (i.w !== t.contentRect.width || i.h !== t.contentRect.height);}return !1;}).forEach(function (t) {return s.revalidate(t.target);});});} catch (t) {q("WARN: ResizeObserver could not be attached.");}return s;}return o(i, [{ key: "fireOverlayMethod", value: function (t, e, i) {var n = Qt(t.component instanceof Tr ? ae : se, e);i._jsPlumbOverlay = t, t.fire(e, { e: i, overlay: t }), this.fire(n, t.component, i);} }, { key: "addDragFilter", value: function (t, e) {this.dragManager.addFilter(t, e);} }, { key: "removeDragFilter", value: function (t) {this.dragManager.removeFilter(t);} }, { key: "setDragGrid", value: function (t) {this.dragManager.setOption(this.elementDragHandler, { grid: t });} }, { key: "setDragConstrainFunction", value: function (t) {this.dragManager.setOption(this.elementDragHandler, { constrainFunction: t });} }, { key: "_removeElement", value: function (t) {t.parentNode && t.parentNode.removeChild(t);} }, { key: "_appendElement", value: function (t, e) {e && e.appendChild(t);} }, { key: "_appendElementToGroup", value: function (t, e) {this.getGroupContentArea(t).appendChild(e);} }, { key: "_appendElementToContainer", value: function (t) {this._appendElement(t, this.getContainer());} }, { key: "_getAssociatedElements", value: function (t) {var e = [];if (3 !== t.nodeType && 8 !== t.nodeType) {var i = t.querySelectorAll(Ut);Array.prototype.push.apply(e, i);}return e.filter(function (t) {return 3 !== t.nodeType && 8 !== t.nodeType;});} }, { key: "shouldFireEvent", value: function (t, e, i) {return !0;} }, { key: "getClass", value: function (t) {return function (t) {return Q(t);}(t);} }, { key: "addClass", value: function (t, e) {it(t, e);} }, { key: "hasClass", value: function (t, e) {return function (t, e) {return t.classList ? t.classList.contains(e) : -1 !== Q(t).indexOf(e);}(t, e);} }, { key: "removeClass", value: function (t, e) {nt(t, e);} }, { key: "toggleClass", value: function (t, e) {!function (t, e) {var i = this,n = function (t, e) {null != t && null != e && e.length > 0 && (t.classList ? t.classList.toggle(e) : i.hasClass(t, e) ? i.removeClass(t, e) : i.addClass(t, e));};et(t) ? M(t, function (t) {return n(t, e);}) : n(t, e);}(t, e);} }, { key: "setAttribute", value: function (t, e, i) {t.setAttribute(e, i);} }, { key: "getAttribute", value: function (t, e) {return t.getAttribute(e);} }, { key: "setAttributes", value: function (t, e) {for (var i in e) t.setAttribute(i, e[i]);} }, { key: "removeAttribute", value: function (t, e) {t.removeAttribute && t.removeAttribute(e);} }, { key: "on", value: function (t, e, i, n) {var r = this,s = function (t) {null == n ? r.eventManager.on(t, e, i) : r.eventManager.on(t, e, i, n);};return et(t) ? M(t, function (t) {return s(t);}) : s(t), this;} }, { key: "off", value: function (t, e, i) {var n = this;return et(t) ? M(t, function (t) {return n.eventManager.off(t, e, i);}) : this.eventManager.off(t, e, i), this;} }, { key: "trigger", value: function (t, e, i, n, r) {this.eventManager.trigger(t, e, i, n, r);} }, { key: "getOffsetRelativeToRoot", value: function (t) {return ot(t);} }, { key: "getOffset", value: function (t) {for (var e = t, i = this.getContainer(), n = this.getPosition(e), r = t !== i && e.offsetParent !== i ? e.offsetParent : null, s = function (t) {null != t && t !== document.body && (t.scrollTop > 0 || t.scrollLeft > 0) && (n.x -= t.scrollLeft, n.y -= t.scrollTop);}; null != r;) n.x += r.offsetLeft, n.y += r.offsetTop, s(r), r = r.offsetParent === i ? null : r.offsetParent;if (null != i && (i.scrollTop > 0 || i.scrollLeft > 0)) {var o = null != e.offsetParent ? this.getStyle(e.offsetParent, We) : "static",a = this.getStyle(e, We);a !== mt && a !== vt && o !== mt && o !== vt && (n.x -= i.scrollLeft, n.y -= i.scrollTop);}return n;} }, { key: "getSize", value: function (t) {var e = t;return null != e.offsetWidth ? function (t) {return { w: t.offsetWidth, h: t.offsetHeight };}(t) : e.width && e.width.baseVal ? function (t) {try {return { w: parseFloat(t.width.baseVal.value), h: parseFloat(t.height.baseVal.value) };} catch (t) {return { w: 0, h: 0 };}}(e) : void 0;} }, { key: "getPosition", value: function (t) {var e = t;return null != e.offsetLeft ? { x: parseFloat(e.offsetLeft), y: parseFloat(e.offsetTop) } : e.x && e.x.baseVal ? function (t) {try {return { x: parseFloat(t.x.baseVal.value), y: parseFloat(t.y.baseVal.value) };} catch (t) {return { x: 0, y: 0 };}}(e) : void 0;} }, { key: "getStyle", value: function (t, e) {return n(window.getComputedStyle) !== ii ? getComputedStyle(t, null).getPropertyValue(e) : t.currentStyle[e];} }, { key: "getGroupContentArea", value: function (t) {var e = this.getSelector(t.el, Xe);return e && e.length > 0 ? e[0] : t.el;} }, { key: "getSelector", value: function (t, e) {var i = null;if (1 === arguments.length) {if (!x(t)) {var n = document.createDocumentFragment();return n.appendChild(t), I(n.childNodes);}i = I(document.querySelectorAll(t));} else i = I(t.querySelectorAll(e));return i;} }, { key: "setPosition", value: function (t, e) {var i = t;i.style.left = e.x + "px", i.style.top = e.y + "px";} }, { key: "setDraggable", value: function (t, e) {e ? this.removeAttribute(t, wt) : this.setAttribute(t, wt, ri);} }, { key: "isDraggable", value: function (t) {var e = this.getAttribute(t, wt);return null == e || e === si;} }, { key: "toggleDraggable", value: function (t) {var e = this.isDraggable(t);return this.setDraggable(t, !e), !e;} }, { key: "_createEventListeners", value: function () {var t = function (t, e) {if (!e.defaultPrevented && null == e._jsPlumbOverlay) {var i = X(J(e), Ke, this.getContainer(), !0);this.fire(t, i.jtk.connector.connection, e);}};this._connectorClick = t.bind(this, Ve), this._connectorDblClick = t.bind(this, Be), this._connectorTap = t.bind(this, Ge), this._connectorDblTap = t.bind(this, je);var e = function (t, e) {var i = J(e).parentNode;if (i.jtk && i.jtk.connector) {var n = i.jtk.connector,r = n.connection;this.setConnectorHover(n, t), t ? (this.addClass(r.source, this.hoverSourceClass), this.addClass(r.target, this.hoverTargetClass)) : (this.removeClass(r.source, this.hoverSourceClass), this.removeClass(r.target, this.hoverTargetClass)), this.fire(t ? Ue : ze, i.jtk.connector.connection, e);}};this._connectorMouseover = e.bind(this, !0), this._connectorMouseout = e.bind(this, !1);var i = function (t, e) {var i = J(e).parentNode;i.jtk && i.jtk.connector && this.fire(t ? He : qe, i.jtk.connector.connection, e);};this._connectorMouseup = i.bind(this, !0), this._connectorMousedown = i.bind(this, !1), this._connectorContextmenu = function (t) {var e = J(t).parentNode;e.jtk && e.jtk.connector && this.fire($e, e.jtk.connector.connection, t);}.bind(this);var n = function (t, e, i) {e.defaultPrevented || null != e._jsPlumbOverlay || this.fire(t, i.jtk.endpoint, e);};this._endpointClick = n.bind(this, Oe), this._endpointDblClick = n.bind(this, Ie);var r = function (t, e) {var i = J(e);i.jtk && i.jtk.endpoint && (this.setEndpointHover(i.jtk.endpoint, t), this.fire(t ? Re : Fe, i.jtk.endpoint, e));};this._endpointMouseover = r.bind(this, !0), this._endpointMouseout = r.bind(this, !1);var s = function (t, e) {var i = J(e);i.jtk && i.jtk.endpoint && this.fire(t ? Le : Ne, i.jtk.endpoint, e);};this._endpointMouseup = s.bind(this, !0), this._endpointMousedown = s.bind(this, !1);var o = function (t, e) {var i = X(J(e), Je, this.getContainer(), !0).jtk.overlay;i && this.fireOverlayMethod(i, t, e);}.bind(this);this._overlayClick = o.bind(this, le), this._overlayDblClick = o.bind(this, he), this._overlayTap = o.bind(this, be), this._overlayDblTap = o.bind(this, ue);var a = function (t, e) {var i = X(J(e), Je, this.getContainer(), !0).jtk.overlay;i && this.setOverlayHover(i, t);};this._overlayMouseover = a.bind(this, !0), this._overlayMouseout = a.bind(this, !1), this._elementClick = function (t, e, i) {e.defaultPrevented || this.fire(1 === e.detail ? Se : Ee, i, e);}.bind(this, Se), this._elementTap = function (t, e, i) {e.defaultPrevented || this.fire(De, i, e);}.bind(this, De), this._elementDblTap = function (t, e, i) {e.defaultPrevented || this.fire(Ce, i, e);}.bind(this, Ce);var l = function (t, e) {this.fire(t ? Te : ke, J(e), e);};this._elementMouseenter = l.bind(this, !0), this._elementMouseexit = l.bind(this, !1), this._elementMousemove = function (t) {this.fire(Ae, J(t), t);}.bind(this), this._elementMouseup = function (t) {this.fire(Me, J(t), t);}.bind(this), this._elementMousedown = function (t) {this.fire(_e, J(t), t);}.bind(this), this._elementContextmenu = function (t) {this.fire(Pe, J(t), t);}.bind(this);} }, { key: "_attachEventDelegates", value: function () {var t = this.getContainer();this.eventManager.on(t, le, Je, this._overlayClick), this.eventManager.on(t, he, Je, this._overlayDblClick), this.eventManager.on(t, be, Je, this._overlayTap), this.eventManager.on(t, ue, Je, this._overlayDblTap), this.eventManager.on(t, le, Ke, this._connectorClick), this.eventManager.on(t, he, Ke, this._connectorDblClick), this.eventManager.on(t, be, Ke, this._connectorTap), this.eventManager.on(t, ue, Ke, this._connectorDblTap), this.eventManager.on(t, le, Ze, this._endpointClick), this.eventManager.on(t, he, Ze, this._endpointDblClick), this.eventManager.on(t, le, this.managedElementsSelector, this._elementClick), this.eventManager.on(t, be, this.managedElementsSelector, this._elementTap), this.eventManager.on(t, ue, this.managedElementsSelector, this._elementDblTap), this.eventManager.on(t, ye, Ke, this._connectorMouseover), this.eventManager.on(t, ve, Ke, this._connectorMouseout), this.eventManager.on(t, ce, Ke, this._connectorContextmenu), this.eventManager.on(t, me, Ke, this._connectorMouseup), this.eventManager.on(t, de, Ke, this._connectorMousedown), this.eventManager.on(t, ye, Ze, this._endpointMouseover), this.eventManager.on(t, ve, Ze, this._endpointMouseout), this.eventManager.on(t, me, Ze, this._endpointMouseup), this.eventManager.on(t, de, Ze, this._endpointMousedown), this.eventManager.on(t, ye, Je, this._overlayMouseover), this.eventManager.on(t, ve, Je, this._overlayMouseout), this.eventManager.on(t, ye, Ut, this._elementMouseenter), this.eventManager.on(t, ve, Ut, this._elementMouseexit), this.eventManager.on(t, ge, Ut, this._elementMousemove), this.eventManager.on(t, me, Ut, this._elementMouseup), this.eventManager.on(t, de, Ut, this._elementMousedown), this.eventManager.on(t, ce, Ut, this._elementContextmenu);} }, { key: "_detachEventDelegates", value: function () {var t = this.getContainer();t && (this.eventManager.off(t, le, this._connectorClick), this.eventManager.off(t, he, this._connectorDblClick), this.eventManager.off(t, be, this._connectorTap), this.eventManager.off(t, ue, this._connectorDblTap), this.eventManager.off(t, le, this._endpointClick), this.eventManager.off(t, he, this._endpointDblClick), this.eventManager.off(t, le, this._overlayClick), this.eventManager.off(t, he, this._overlayDblClick), this.eventManager.off(t, be, this._overlayTap), this.eventManager.off(t, ue, this._overlayDblTap), this.eventManager.off(t, le, this._elementClick), this.eventManager.off(t, be, this._elementTap), this.eventManager.off(t, ue, this._elementDblTap), this.eventManager.off(t, ye, this._connectorMouseover), this.eventManager.off(t, ve, this._connectorMouseout), this.eventManager.off(t, ce, this._connectorContextmenu), this.eventManager.off(t, me, this._connectorMouseup), this.eventManager.off(t, de, this._connectorMousedown), this.eventManager.off(t, ye, this._endpointMouseover), this.eventManager.off(t, ve, this._endpointMouseout), this.eventManager.off(t, me, this._endpointMouseup), this.eventManager.off(t, de, this._endpointMousedown), this.eventManager.off(t, ye, this._overlayMouseover), this.eventManager.off(t, ve, this._overlayMouseout), this.eventManager.off(t, pe, this._elementMouseenter), this.eventManager.off(t, fe, this._elementMouseexit), this.eventManager.off(t, ge, this._elementMousemove), this.eventManager.off(t, me, this._elementMouseup), this.eventManager.off(t, de, this._elementMousedown), this.eventManager.off(t, ce, this._elementContextmenu));} }, { key: "setContainer", value: function (t) {var e,n = this;if (t === document || t === document.body) throw new Error("Cannot set document or document.body as container element");this._detachEventDelegates(), null != this.dragManager && (e = this.dragManager.reset()), this.setAttribute(t, ie, B().replace("-", ""));var r = this.getContainer();null != r && (r.removeAttribute(ie), M(I(r.childNodes).filter(function (t) {return null != t && (n.hasClass(t, Ct) || n.hasClass(t, kt) || n.hasClass(t, _t) || t.getAttribute && null != t.getAttribute(bt));}), function (e) {t.appendChild(e);})), p(c(i.prototype), "setContainer", this).call(this, t), this.containerType = ct(t), null != this.eventManager && this._attachEventDelegates(), null != this.dragManager && (this.dragManager.addHandler(new tr(this)), this.dragManager.addHandler(new er(this, this.dragSelection), this.groupDragOptions), this.elementDragHandler = new gn(this, this.dragSelection), this.dragManager.addHandler(this.elementDragHandler, this.elementDragOptions), null != e && this.dragManager.setFilters(e));} }, { key: "reset", value: function () {p(c(i.prototype), "reset", this).call(this), this._resizeObserver && this._resizeObserver.disconnect(), M(this.getContainer().querySelectorAll([Ut, Ze, Ke, Je].join(",")), function (t) {return t.parentNode && t.parentNode.removeChild(t);});} }, { key: "destroy", value: function () {this._detachEventDelegates(), null != this.dragManager && this.dragManager.reset(), this.clearDragSelection(), p(c(i.prototype), "destroy", this).call(this);} }, { key: "unmanage", value: function (t, e) {null != this._resizeObserver && this._resizeObserver.unobserve(t), this.removeFromDragSelection(t), p(c(i.prototype), "unmanage", this).call(this, t, e);} }, { key: "addToDragSelection", value: function () {for (var t = this, e = arguments.length, i = new Array(e), n = 0; n < e; n++) i[n] = arguments[n];M(i, function (e) {return t.dragSelection.add(e);});} }, { key: "clearDragSelection", value: function () {this.dragSelection.clear();} }, { key: "removeFromDragSelection", value: function () {for (var t = this, e = arguments.length, i = new Array(e), n = 0; n < e; n++) i[n] = arguments[n];M(i, function (e) {return t.dragSelection.remove(e);});} }, { key: "toggleDragSelection", value: function () {for (var t = this, e = arguments.length, i = new Array(e), n = 0; n < e; n++) i[n] = arguments[n];M(i, function (e) {return t.dragSelection.toggle(e);});} }, { key: "addToDragGroup", value: function (t) {for (var e, i = arguments.length, n = new Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];(e = this.elementDragHandler).addToDragGroup.apply(e, [t].concat(n));} }, { key: "removeFromDragGroup", value: function () {var t;(t = this.elementDragHandler).removeFromDragGroup.apply(t, arguments);} }, { key: "setDragGroupState", value: function (t) {for (var e, i = arguments.length, n = new Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];(e = this.elementDragHandler).setDragGroupState.apply(e, [t].concat(n));} }, { key: "clearDragGroup", value: function (t) {this.elementDragHandler.clearDragGroup(t);} }, { key: "consume", value: function (t, e) {Y(t, e);} }, { key: "rotate", value: function (t, e, n) {var r = this.getId(t);return this._managedElements[r] ? (this._managedElements[r].el.style.transform = "rotate(" + e + "deg)", this._managedElements[r].el.style.transformOrigin = "center center", p(c(i.prototype), "rotate", this).call(this, t, e, n)) : { c: new Set(), e: new Set() };} }, { key: "addOverlayClass", value: function (t, e) {if (hr(t)) t.instance.addClass(ks(t), e);else if (xs(t)) t.instance.addClass(Ar(t), e);else {if (!Vr(t)) throw "Could not add class to overlay of type [" + t.type + "]";t.instance.addClass(Ts(t), e);}} }, { key: "removeOverlayClass", value: function (t, e) {if (hr(t)) t.instance.removeClass(ks(t), e);else if (xs(t)) t.instance.removeClass(Ar(t), e);else {if (!Vr(t)) throw "Could not remove class from overlay of type [" + t.type + "]";t.instance.removeClass(Ts(t), e);}} }, { key: "_paintOverlay", value: function (t, e, i) {if (hr(t)) {ks(t);var n = t.component.getXY();t.canvas.style.left = n.x + e.d.minx + "px", t.canvas.style.top = n.y + e.d.miny + "px";} else if (xs(t)) !function (t, e, i, n) {Ar(t);var r = [0, 0];n.xmin < 0 && (r[0] = -n.xmin), n.ymin < 0 && (r[1] = -n.ymin);var s = { d: e, stroke: i.stroke ? i.stroke : null, fill: i.fill ? i.fill : null, transform: "translate(" + r[0] + "," + r[1] + ")", "pointer-events": "visibleStroke" };Kt(t.path, s);}(t, isNaN(e.d.cxy.x) || isNaN(e.d.cxy.y) ? "M 0 0" : "M" + e.d.hxy.x + "," + e.d.hxy.y + " L" + e.d.tail[0].x + "," + e.d.tail[0].y + " L" + e.d.cxy.x + "," + e.d.cxy.y + " L" + e.d.tail[1].x + "," + e.d.tail[1].y + " Z", e, i);else {if (!Vr(t)) throw "Could not paint overlay of type [" + t.type + "]";Ts(t);var r = t.component.getXY();t.canvas.style.left = r.x + e.d.minx + "px", t.canvas.style.top = r.y + e.d.miny + "px";}} }, { key: "setOverlayVisible", value: function (t, e) {var i = e ? "block" : "none";function n(t) {null != t && (t.style.display = i);}hr(t) ? n(ks(t)) : Vr(t) ? n(Ts(t)) : xs(t) && n(t.path);} }, { key: "reattachOverlay", value: function (t, e) {hr(t) ? t.instance._appendElement(ks(t), this.getContainer()) : Vr(t) ? t.instance._appendElement(Ts(t), this.getContainer()) : xs(t) && this._appendElement(Ar(t), e.connector.canvas);} }, { key: "setOverlayHover", value: function (t, e) {var i;hr(t) ? i = ks(t) : Vr(t) ? i = Ts(t) : xs(t) && (i = Ar(t)), null != i && (null != this.hoverClass && (e ? this.addClass(i, this.hoverClass) : this.removeClass(i, this.hoverClass)), this.setHover(t.component, e));} }, { key: "destroyOverlay", value: function (t) {if (hr(t)) {var e = ks(t);e.parentNode.removeChild(e), delete t.canvas, delete t.cachedDimensions;} else if (Or(t) || Fr(t) || Lr(t)) !function (t) {var e = t;null != e.path && null != e.path.parentNode && e.path.parentNode.removeChild(e.path), null != e.bgPath && null != e.bgPath.parentNode && e.bgPath.parentNode.removeChild(e.bgPath), delete e.path, delete e.bgPath;}(t);else if (Vr(t)) {var i = Ts(t);i.parentNode.removeChild(i), delete t.canvas, delete t.cachedDimensions;}} }, { key: "drawOverlay", value: function (t, e, i, n) {if (hr(t) || Vr(t)) {var r = ir._getDimensions(t);if (null != r && null != r.w && null != r.h) {var s = { x: 0, y: 0 };if (n) s = { x: n.x, y: n.y };else if (e instanceof wn) {var o = Array.isArray(t.location) ? t.location : [t.location, t.location];s = { x: o[0] * e.w, y: o[1] * e.h };} else {var a = t.location,l = !1;(x(t.location) || t.location < 0 || t.location > 1) && (a = parseInt("" + t.location, 10), l = !0), s = e.pointOnPath(a, l);}var c = s.x - r.w / 2,h = s.y - r.h / 2;return { component: t, d: { minx: c, miny: h, td: r, cxy: s }, xmin: c, xmax: c + r.w, ymin: h, ymax: h + r.h };}return { xmin: 0, xmax: 0, ymin: 0, ymax: 0 };}if (Or(t) || Fr(t) || Lr(t)) return t.draw(e, i, n);throw "Could not draw overlay of type [" + t.type + "]";} }, { key: "updateLabel", value: function (t) {if (C(t.label)) {var e = t.label(this);ks(t).innerText = null != e ? e : "";} else null == t.labelText && (t.labelText = t.label, null != t.labelText ? ks(t).innerText = t.labelText : ks(t).innerText = "");} }, { key: "setHover", value: function (t, e) {t._hover = e, t instanceof Sr && null != t.endpoint ? this.setEndpointHover(t, e, -1) : t instanceof Tr && null != t.connector && this.setConnectorHover(t.connector, e);} }, { key: "paintConnector", value: function (t, e, i) {!function (t, e, i, n) {!function (t, e) {if (null != e.canvas) return e.canvas;var i = Zt("svg", { style: "", width: "0", height: "0", "pointer-events": gt, position: mt });e.canvas = i, t._appendElement(e.canvas, t.getContainer()), null != e.cssClass && t.addClass(i, e.cssClass), t.addClass(i, t.connectorClass), i.jtk = i.jtk || {}, i.jtk.connector = e;}(t, e), Mr.paint(e, t, i, n);var r = [0, 0];if (n.xmin < 0 && (r[0] = -n.xmin), n.ymin < 0 && (r[1] = -n.ymin), e.segments.length > 0) {var s = { d: t.getPathData(e), transform: "translate(" + r[0] + "," + r[1] + ")", "pointer-events": "visibleStroke" },o = null;if (i.outlineStroke) {var a = i.outlineWidth || 1,l = i.strokeWidth + 2 * a;(o = b({}, i)).stroke = i.outlineStroke, o.strokeWidth = l, null == e.bgPath ? (e.bgPath = Zt(Gt, s), t.addClass(e.bgPath, t.connectorOutlineClass), Jt(e.canvas, e.bgPath, 0)) : Kt(e.bgPath, s), Xt(e.canvas, e.bgPath, o);}var c = e;null == c.path ? (c.path = Zt(Gt, s), Jt(c.canvas, c.path, i.outlineStroke ? 1 : 0)) : (c.path.parentNode !== c.canvas && Jt(c.canvas, c.path, i.outlineStroke ? 1 : 0), Kt(e.path, s)), Xt(e.canvas, e.path, i);}}(this, t, e, i);} }, { key: "setConnectorHover", value: function (t, e, i) {if (!1 === e || !this.currentlyDragging && !this.isHoverSuspended()) {var n = t.canvas;null != n && (null != t.hoverClass && (e ? this.addClass(n, t.hoverClass) : this.removeClass(n, t.hoverClass)), e ? this.addClass(n, this.hoverClass) : this.removeClass(n, this.hoverClass)), null != t.connection.hoverPaintStyle && (t.connection.paintStyleInUse = e ? t.connection.hoverPaintStyle : t.connection.paintStyle, this._suspendDrawing || this._paintConnection(t.connection)), t.connection.endpoints[0] !== i && this.setEndpointHover(t.connection.endpoints[0], e, 0, !0), t.connection.endpoints[1] !== i && this.setEndpointHover(t.connection.endpoints[1], e, 1, !0);}} }, { key: "destroyConnector", value: function (t) {null != t.connector && Es(t.connector);} }, { key: "addConnectorClass", value: function (t, e) {t.canvas && this.addClass(t.canvas, e);} }, { key: "removeConnectorClass", value: function (t, e) {t.canvas && this.removeClass(t.canvas, e);} }, { key: "getConnectorClass", value: function (t) {return t.canvas ? t.canvas.className.baseVal : "";} }, { key: "setConnectorVisible", value: function (t, e) {Ss(t, e);} }, { key: "applyConnectorType", value: function (t, e) {if (t.canvas && e.cssClass) {var i = Array.isArray(e.cssClass) ? e.cssClass : [e.cssClass];this.addClass(t.canvas, i.join(" "));}} }, { key: "addEndpointClass", value: function (t, e) {var i = Cs(t.endpoint);null != i && this.addClass(i, e);} }, { key: "applyEndpointType", value: function (t, e) {if (e.cssClass) {var i = Cs(t.endpoint);if (i) {var n = Array.isArray(e.cssClass) ? e.cssClass : [e.cssClass];this.addClass(i, n.join(" "));}}} }, { key: "destroyEndpoint", value: function (t) {var e = this.endpointAnchorClassPrefix + (t.currentAnchorClass ? "-" + t.currentAnchorClass : "");this.removeClass(t.element, e), Es(t.endpoint);} }, { key: "renderEndpoint", value: function (t, e) {var i = ys[t.endpoint.type];null != i ? _r.paint(t.endpoint, i, e) : q("jsPlumb: no endpoint renderer found for type [" + t.endpoint.type + "]");} }, { key: "removeEndpointClass", value: function (t, e) {var i = Cs(t.endpoint);null != i && this.removeClass(i, e);} }, { key: "getEndpointClass", value: function (t) {var e = Cs(t.endpoint);return null != e ? e.className : "";} }, { key: "setEndpointHover", value: function (t, e, i, n) {if (null != t && (!1 === e || !this.currentlyDragging && !this.isHoverSuspended())) {var r = Cs(t.endpoint);if (null != r && (null != t.hoverClass && (e ? this.addClass(r, t.hoverClass) : this.removeClass(r, t.hoverClass)), 0 === i || 1 === i)) {var s = 0 === i ? this.hoverSourceClass : this.hoverTargetClass;e ? this.addClass(r, s) : this.removeClass(r, s);}if (null != t.hoverPaintStyle && (t.paintStyleInUse = e ? t.hoverPaintStyle : t.paintStyle, this._suspendDrawing || this.renderEndpoint(t, t.paintStyleInUse)), !n) for (var o = 0; o < t.connections.length; o++) this.setConnectorHover(t.connections[o].connector, e, t);}} }, { key: "setEndpointVisible", value: function (t, e) {Ss(t.endpoint, e);} }, { key: "setGroupVisible", value: function (t, e) {for (var i = t.el.querySelectorAll(Ut), n = 0; n < i.length; n++) e ? this.show(i[n], !0) : this.hide(i[n], !0);} }, { key: "deleteConnection", value: function (t, e) {return null != t && !0 !== t.deleted && (!0 !== t.endpoints[0].deleted && this.setEndpointHover(t.endpoints[0], !1, 0, !0), !0 !== t.endpoints[1].deleted && this.setEndpointHover(t.endpoints[1], !1, 1, !0), p(c(i.prototype), "deleteConnection", this).call(this, t, e));} }, { key: "addSourceSelector", value: function (t, e, n) {return this.addDragFilter(t), p(c(i.prototype), "addSourceSelector", this).call(this, t, e, n);} }, { key: "removeSourceSelector", value: function (t) {this.removeDragFilter(t.selector), p(c(i.prototype), "removeSourceSelector", this).call(this, t);} }, { key: "manage", value: function (t, e, n) {if (this.containerType === H.SVG && ct(t) !== H.SVG) throw new Error("ERROR: cannot manage non-svg element when container is an SVG element.");var r = p(c(i.prototype), "manage", this).call(this, t, e, n);return null != r && null != this._resizeObserver && this._resizeObserver.observe(r.el), r;} }]), i;}(vs),_s = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), a(u(s = e.call(this, t, n)), "width", void 0), a(u(s), "height", void 0), a(u(s), "type", i.type), n = n || {}, s.width = n.width || 10, s.height = n.height || 10, s;}return o(i, null, [{ key: "_getParams", value: function (t) {return { width: t.width, height: t.height };} }]), i;}(wn);a(_s, "type", "Rectangle");var Ps = { type: _s.type, cls: _s, compute: function (t, e, i, n) {var r = n.width || t.width,s = n.height || t.height,o = e.curX - r / 2,a = e.curY - s / 2;return t.x = o, t.y = a, t.w = r, t.h = s, [o, a, r, s];}, getParams: function (t) {return { width: t.width, height: t.height };} },Ds = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), a(u(s = e.call(this, t, n)), "type", i.type), s;}return i;}(wn);a(Ds, "type", "Blank");var Os,Is = { type: Ds.type, cls: Ds, compute: function (t, e, i, n) {return t.x = e.curX, t.y = e.curY, t.w = 10, t.h = 0, [e.curX, e.curY, 10, 0];}, getParams: function (t) {return {};} },Fs = { width: 10, height: 0, fill: "transparent", stroke: "transparent" };bs(jr.type, { makeNode: function (t, e) {return Zt("circle", { cx: t.w / 2, cy: t.h / 2, r: t.radius });}, updateNode: function (t, e) {Kt(e, { cx: "" + t.w / 2, cy: "" + t.h / 2, r: "" + t.radius });} }), bs(Ds.type, { makeNode: function (t, e) {return Zt("rect", Fs);}, updateNode: function (t, e) {Kt(e, Fs);} }), bs(_s.type, { makeNode: function (t, e) {return Zt("rect", { width: t.w, height: t.h });}, updateNode: function (t, e) {Kt(e, { width: t.w, height: t.h });} }), function (t) {t[t.top = 0] = "top", t[t.bottom = 1] = "bottom";}(Os || (Os = {}));var Rs = new Map();Rs.set(Os.top, [ee.TopRight, ee.TopLeft]), Rs.set(Os.bottom, [ee.BottomRight, ee.BottomLeft]);var Ls = { deriveAnchor: function (t, e, i, n) {return Rs.get(t)[e];} },Ns = "jtk-scrollable-list",Vs = ut(Ns),Bs = "scroll",js = (o(function t(e, i) {var n = this;r(this, t), this.instance = e, a(this, "options", void 0), a(this, "count", void 0), a(this, "lists", void 0), this.count = 0, this.lists = {}, this.options = i || {}, this.instance.bind(Rt, function (t) {for (var e = n.instance.getSelector(t.el, Vs), i = 0; i < e.length; i++) n.addList(e[i]);}), this.instance.bind(Nt, function (t) {n.removeList(t.el);}), this.instance.bind(Pt, function (t, e) {if (null == e) {var i = n.findParentList(t.target);null != i && i.newConnection(t.connection, t.target, 1);var r = n.findParentList(t.source);null != r && r.newConnection(t.connection, t.source, 0);}}), this.instance.bind(jt, function (t) {var e = t.dropEndpoint.element,i = n.findParentList(e);return null == i || e.offsetTop >= i.domElement.scrollTop && e.offsetTop + e.offsetHeight <= i.domElement.scrollTop + i.domElement.offsetHeight;});}, [{ key: "addList", value: function (t, e) {var i = b({}, Ls);b(i, this.options), e = b(i, e || {});var n = [this.instance._instanceIndex, this.count++].join("_");return this.lists[n] = new js(this.instance, t, e, n), this.lists[n];} }, { key: "getList", value: function (t) {var e = this.instance.getAttribute(t, Ns);if (null != e) return this.lists[e];} }, { key: "removeList", value: function (t) {var e = this.getList(t);e && (e.destroy(), delete this.lists[e.id]);} }, { key: "findParentList", value: function (t) {for (var e, i = t.parentNode, n = this.instance.getContainer(); null != i && i !== n && i !== document;) {if (null != (e = this.getList(i))) return e;i = i.parentNode;}} }]), function () {function t(e, i, n, s) {r(this, t), this.instance = e, this.el = i, this.options = n, this.id = s, a(this, "_scrollHandler", void 0), a(this, "domElement", void 0), a(this, "elId", void 0), this.domElement = i, this.elId = this.instance.getId(i), e.setAttribute(i, Ns, s), this._scrollHandler = this.scrollHandler.bind(this), this.domElement._jsPlumbScrollHandler = this._scrollHandler, e.on(i, Bs, this._scrollHandler), this._scrollHandler();}return o(t, [{ key: "deriveAnchor", value: function (t, e, i, n) {return this.options.anchor ? this.options.anchor : this.options.deriveAnchor(t, e, i, n);} }, { key: "deriveEndpoint", value: function (t, e, i, n) {return this.options.deriveEndpoint ? this.options.deriveEndpoint(t, e, i, n) : this.options.endpoint ? this.options.endpoint : i.endpoint.type;} }, { key: "newConnection", value: function (t, e, i) {e.offsetTop < this.el.scrollTop ? this._proxyConnection(e, t, i, Os.top) : e.offsetTop + e.offsetHeight > this.el.scrollTop + this.domElement.offsetHeight && this._proxyConnection(e, t, i, Os.bottom);} }, { key: "scrollHandler", value: function () {for (var t = this, e = this.instance.getSelector(this.el, Ut), i = function (i) {if (e[i].offsetTop < t.el.scrollTop) e[i]._jsPlumbProxies = e[i]._jsPlumbProxies || [], t.instance.select({ source: e[i] }).each(function (n) {t._proxyConnection(e[i], n, 0, Os.top);}), t.instance.select({ target: e[i] }).each(function (n) {t._proxyConnection(e[i], n, 1, Os.top);});else if (e[i].offsetTop + e[i].offsetHeight > t.el.scrollTop + t.domElement.offsetHeight) e[i]._jsPlumbProxies = e[i]._jsPlumbProxies || [], t.instance.select({ source: e[i] }).each(function (n) {t._proxyConnection(e[i], n, 0, Os.bottom);}), t.instance.select({ target: e[i] }).each(function (n) {t._proxyConnection(e[i], n, 1, Os.bottom);});else if (e[i]._jsPlumbProxies) {for (var n = 0; n < e[i]._jsPlumbProxies.length; n++) t.instance.unproxyConnection(e[i]._jsPlumbProxies[n][0], e[i]._jsPlumbProxies[n][1]);delete e[i]._jsPlumbProxies;}t.instance.revalidate(e[i]);}, n = 0; n < e.length; n++) i(n);} }, { key: "_proxyConnection", value: function (t, e, i, n) {var r = this;this.instance.proxyConnection(e, i, this.domElement, function (t, i) {return r.deriveEndpoint(n, i, e.endpoints[i], e);}, function (t, i) {return r.deriveAnchor(n, i, e.endpoints[i], e);}), t._jsPlumbProxies = t._jsPlumbProxies || [], t._jsPlumbProxies.push([e, i]);} }, { key: "destroy", value: function () {this.instance.off(this.el, Bs, this._scrollHandler), delete this.domElement._jsPlumbScrollHandler;for (var t = this.instance.getSelector(this.el, Ut), e = 0; e < t.length; e++) if (t[e]._jsPlumbProxies) {for (var i = 0; i < t[e]._jsPlumbProxies.length; i++) this.instance.unproxyConnection(t[e]._jsPlumbProxies[i][0], t[e]._jsPlumbProxies[i][1]);delete t[e]._jsPlumbProxies;}} }]), t;}());function zs(t) {var e = Math.floor(t),i = Math.ceil(t);return t - e < 1e-10 ? e : i - t < 1e-10 ? i : t;}var Us = function (t) {l(i, t);var e = d(i);function i(t) {var n;r(this, i), a(u(n = e.call(this, t)), "type", i.segmentType), a(u(n), "cx", void 0), a(u(n), "cy", void 0), a(u(n), "radius", void 0), a(u(n), "anticlockwise", void 0), a(u(n), "startAngle", void 0), a(u(n), "endAngle", void 0), a(u(n), "sweep", void 0), a(u(n), "length", void 0), a(u(n), "circumference", void 0), a(u(n), "frac", void 0), n.cx = t.cx, n.cy = t.cy, n.radius = t.r, n.anticlockwise = t.ac, t.startAngle && t.endAngle ? (n.startAngle = t.startAngle, n.endAngle = t.endAngle, n.x1 = n.cx + n.radius * Math.cos(n.startAngle), n.y1 = n.cy + n.radius * Math.sin(n.startAngle), n.x2 = n.cx + n.radius * Math.cos(n.endAngle), n.y2 = n.cy + n.radius * Math.sin(n.endAngle)) : (n.startAngle = n._calcAngle(n.x1, n.y1), n.endAngle = n._calcAngle(n.x2, n.y2)), n.endAngle < 0 && (n.endAngle += Di), n.startAngle < 0 && (n.startAngle += Di);var s = n.endAngle < n.startAngle ? n.endAngle + Di : n.endAngle;return n.sweep = Math.abs(s - n.startAngle), n.anticlockwise && (n.sweep = Di - n.sweep), n.circumference = 2 * Math.PI * n.radius, n.frac = n.sweep / Di, n.length = n.circumference * n.frac, n.extents = { xmin: n.cx - n.radius, xmax: n.cx + n.radius, ymin: n.cy - n.radius, ymax: n.cy + n.radius }, n;}return o(i, [{ key: "_calcAngle", value: function (t, e) {return r = Oi(i = { x: this.cx, y: this.cy }, n = { x: t, y: e }), s = Math.atan(r), 4 != (o = Fi(i, n)) && 3 != o || (s += Math.PI), s < 0 && (s += 2 * Math.PI), s;var i, n, r, s, o;} }, { key: "_calcAngleForLocation", value: function (t, e) {if (t.anticlockwise) {var i = t.startAngle < t.endAngle ? t.startAngle + Di : t.startAngle;return i - Math.abs(i - t.endAngle) * e;}var n = t.endAngle < t.startAngle ? t.endAngle + Di : t.endAngle,r = Math.abs(n - t.startAngle);return t.startAngle + r * e;} }, { key: "getPath", value: function (t) {var e = this.sweep > Math.PI ? 1 : 0,i = this.anticlockwise ? 0 : 1;return (t ? "M" + this.x1 + " " + this.y1 + " " : "") + "A " + this.radius + " " + this.radius + " 0 " + e + "," + i + " " + this.x2 + " " + this.y2;} }, { key: "getLength", value: function () {return this.length;} }, { key: "pointOnPath", value: function (t, e) {if (0 === t) return { x: this.x1, y: this.y1, theta: this.startAngle };if (1 === t) return { x: this.x2, y: this.y2, theta: this.endAngle };e && (t /= length);var i = this._calcAngleForLocation(this, t),n = this.cx + this.radius * Math.cos(i),r = this.cy + this.radius * Math.sin(i);return { x: zs(n), y: zs(r), theta: i };} }, { key: "gradientAtPoint", value: function (t, e) {var i = this.pointOnPath(t, e),n = -1 / Oi({ x: this.cx, y: this.cy }, i);return this.anticlockwise || n !== 1 / 0 && n !== -1 / 0 || (n *= -1), n;} }, { key: "pointAlongPathFrom", value: function (t, e, i) {var n = this.pointOnPath(t, i),r = e / this.circumference * 2 * Math.PI,s = this.anticlockwise ? -1 : 1,o = n.theta + s * r;return { x: this.cx + this.radius * Math.cos(o), y: this.cy + this.radius * Math.sin(o) };} }]), i;}(ei);a(Us, "segmentType", "Arc");var Hs = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), (s = e.call(this, t, n)).connection = t, a(u(s), "showLoopback", void 0), a(u(s), "curviness", void 0), a(u(s), "margin", void 0), a(u(s), "proximityLimit", void 0), a(u(s), "orientation", void 0), a(u(s), "loopbackRadius", void 0), a(u(s), "clockwise", void 0), a(u(s), "isLoopbackCurrently", void 0), a(u(s), "geometry", null), n = n || {}, s.showLoopback = !1 !== n.showLoopback, s.curviness = n.curviness || 10, s.margin = n.margin || 5, s.proximityLimit = n.proximityLimit || 80, s.clockwise = n.orientation && "clockwise" === n.orientation, s.loopbackRadius = n.loopbackRadius || 25, s.isLoopbackCurrently = !1, s;}return o(i, [{ key: "getDefaultStubs", value: function () {return [0, 0];} }, { key: "_compute", value: function (t, e) {var i = e.sourcePos,n = e.targetPos,r = Math.abs(i.curX - n.curX),s = Math.abs(i.curY - n.curY);if (this.showLoopback && e.sourceEndpoint.elementId === e.targetEndpoint.elementId) {this.isLoopbackCurrently = !0;var o = e.sourcePos.curX,a = e.sourcePos.curY - this.margin,l = o,c = a - this.loopbackRadius,h = l - this.loopbackRadius,u = c - this.loopbackRadius;r = 2 * this.loopbackRadius, s = 2 * this.loopbackRadius, t.points[0] = h, t.points[1] = u, t.points[2] = r, t.points[3] = s, this._addSegment(Us, { loopback: !0, x1: o - h + 4, y1: a - u, startAngle: 0, endAngle: 2 * Math.PI, r: this.loopbackRadius, ac: !this.clockwise, x2: o - h - 4, y2: a - u, cx: l - h, cy: c - u });} else this.isLoopbackCurrently = !1, this._computeBezier(t, e, i, n, r, s);} }, { key: "exportGeometry", value: function () {return null == this.geometry ? null : { controlPoints: [b({}, this.geometry.controlPoints[0]), b({}, this.geometry.controlPoints[1])], source: b({}, this.geometry.source), target: b({}, this.geometry.target) };} }, { key: "transformGeometry", value: function (t, e, i) {return { controlPoints: [{ x: t.controlPoints[0].x + e, y: t.controlPoints[0].y + i }, { x: t.controlPoints[1].x + e, y: t.controlPoints[1].y + i }], source: this.transformAnchorPlacement(t.source, e, i), target: this.transformAnchorPlacement(t.target, e, i) };} }, { key: "importGeometry", value: function (t) {return !(null == t || (null == t.controlPoints || 2 != t.controlPoints.length ? (q("jsPlumb Bezier: cannot import geometry; controlPoints missing or does not have length 2"), this.setGeometry(null, !0), 1) : null == t.controlPoints[0].x || null == t.controlPoints[0].y || null == t.controlPoints[1].x || null == t.controlPoints[1].y ? (q("jsPlumb Bezier: cannot import geometry; controlPoints malformed"), this.setGeometry(null, !0), 1) : null == t.source || null == t.source.curX || null == t.source.curY ? (q("jsPlumb Bezier: cannot import geometry; source missing or malformed"), this.setGeometry(null, !0), 1) : null == t.target || null == t.target.curX || null == t.target.curY ? (q("jsPlumb Bezier: cannot import geometry; target missing or malformed"), this.setGeometry(null, !0), 1) : (this.setGeometry(t, !1), 0)));} }]), i;}(Pr),qs = function (t, e) {return { x: t.x - e.x, y: t.y - e.y };},$s = function (t, e) {return t.x * e.x + t.y * e.y;},Gs = function (t) {return Math.sqrt(t.x * t.x + t.y * t.y);},Ws = function (t, e) {return { x: t.x * e, y: t.y * e };},Ks = Math.pow(2, -65);function Zs(t, e) {for (var i, n = [], r = function (t, e) {for (var i = e.length - 1, n = 2 * i - 1, r = [], s = [], o = [], a = [], l = [[1, .6, .3, .1], [.4, .6, .6, .4], [.1, .3, .6, 1]], c = 0; c <= i; c++) r[c] = qs(e[c], t);for (var h = 0; h <= i - 1; h++) s[h] = qs(e[h + 1], e[h]), s[h] = Ws(s[h], 3);for (var u = 0; u <= i - 1; u++) for (var d = 0; d <= i; d++) o[u] || (o[u] = []), o[u][d] = $s(s[u], r[d]);for (var p = 0; p <= n; p++) a[p] || (a[p] = []), a[p].y = 0, a[p].x = parseFloat("" + p) / n;for (var f = i, g = i - 1, m = 0; m <= f + g; m++) for (var v = Math.max(0, m - g), y = Math.min(m, f), b = v; b <= y; b++) {var w = m - b;a[b + w].y += o[w][b] * l[w][b];}return a;}(t, e), s = e.length - 1, o = Ys(r, 2 * s - 1, n, 0), a = qs(t, e[0]), l = Gs(a), c = 0, h = 0; h < o; h++) a = qs(t, Xs(e, s, n[h], null, null)), (i = Gs(a)) < l && (l = i, c = n[h]);return a = qs(t, e[s]), (i = Gs(a)) < l && (l = i, c = 1), { location: c, distance: l };}function Ys(t, e, i, n) {var r,s,o = [],a = [],l = [],c = [];switch (function (t, e) {var i,n,r = 0;i = n = $(t[0].y);for (var s = 1; s <= e; s++) (i = $(t[s].y)) != n && r++, n = i;return r;}(t, e)) {case 0:return 0;case 1:if (n >= 64) return i[0] = (t[0].x + t[e].x) / 2, 1;if (function (t, e) {var i, n, r, s, o, a, l, c, h;s = t[0].y - t[e].y, o = t[e].x - t[0].x, a = t[0].x * t[e].y - t[e].x * t[0].y, c = h = 0;for (var u = 1; u < e; u++) {var d = s * t[u].x + o * t[u].y + a;d > c ? c = d : d < h && (h = d);}return i = (1 * (a - c) - (l = o) * 0) * (1 / (0 * l - 1 * s)), n = (1 * (a - h) - 0 * (l = o)) * (1 / (0 * l - 1 * s)), r = Math.min(i, n), Math.max(i, n) - r < Ks ? 1 : 0;}(t, e)) return i[0] = function (t, e) {var i = t[e].x - t[0].x,n = t[e].y - t[0].y,r = t[0].x - 0;return 0 + 1 / (0 * i - 1 * n) * (i * (t[0].y - 0) - n * r) * 1;}(t, e), 1;}Xs(t, e, .5, o, a), r = Ys(o, e, l, n + 1), s = Ys(a, e, c, n + 1);for (var h = 0; h < r; h++) i[h] = l[h];for (var u = 0; u < s; u++) i[u + r] = c[u];return r + s;}function Xs(t, e, i, n, r) {for (var s = [[]], o = 0; o <= e; o++) s[0][o] = t[o];for (var a = 1; a <= e; a++) for (var l = 0; l <= e - a; l++) s[a] || (s[a] = []), s[a][l] || (s[a][l] = {}), s[a][l].x = (1 - i) * s[a - 1][l].x + i * s[a - 1][l + 1].x, s[a][l].y = (1 - i) * s[a - 1][l].y + i * s[a - 1][l + 1].y;if (null != n) for (var c = 0; c <= e; c++) n[c] = s[c][0];if (null != r) for (var h = 0; h <= e; h++) r[h] = s[e - h][h];return s[e][0];}function Js(t, e) {var i = { x: 0, y: 0 };if (0 === t) return e[0];var n = e.length - 1;if (1 === t) return e[n];var r = e,s = 1 - t;if (0 === n) return e[0];if (1 === n) return { x: s * r[0].x + t * r[1].x, y: s * r[0].y + t * r[1].y };if (4 > n) {var o,a,l,c = s * s,h = t * t,u = 0;return 2 === n ? (r = [r[0], r[1], r[2], i], o = c, a = s * t * 2, l = h) : 3 === n && (o = c * s, a = c * t * 3, l = s * h * 3, u = t * h), { x: o * r[0].x + a * r[1].x + l * r[2].x + u * r[3].x, y: o * r[0].y + a * r[1].y + l * r[2].y + u * r[3].y };}return i;}var Qs = new Map();function to(t, e) {for (var i = function (t) {var e = Qs.get(t);if (!e) {var i = function (t) {return function (e) {return t;};},n = function () {return function (t) {return t;};},r = function () {return function (t) {return 1 - t;};},s = function (t) {return function (e) {for (var i = 1, n = 0; n < t.length; n++) i *= t[n](e);return i;};};(e = []).push(function (e) {return Math.pow(e, t);});for (var o = 1; o < t; o++) {for (var a = [i(t)], l = 0; l < t - o; l++) a.push(n());for (var c = 0; c < o; c++) a.push(r());e.push(s(a));}e.push(function (e) {return Math.pow(1 - e, t);}), Qs.set(t, e);}return e;}(t.length - 1), n = 0, r = 0, s = 0; s < t.length; s++) n += t[s].x * i[s](e), r += t[s].y * i[s](e);return { x: n, y: r };}function eo(t, e) {return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2));}function io(t) {return t[0].x === t[1].x && t[0].y === t[1].y;}function no(t, e, i) {if (io(t)) return { point: t[0], location: e };for (var n = to(t, e), r = 0, s = e, o = i > 0 ? 1 : -1, a = null; r < Math.abs(i);) r += eo(a = to(t, s += .005 * o), n), n = a;return { point: a, location: s };}function ro(t, e, i, n, r) {var s = n - e,o = t - i,a = t * (e - n) + e * (i - t),l = function (t) {return [so(t, "x"), so(t, "y")];}(r),c = [s * l[0][0] + o * l[1][0], s * l[0][1] + o * l[1][1], s * l[0][2] + o * l[1][2], s * l[0][3] + o * l[1][3] + a],h = oo.apply(null, c),u = [];if (null != h) for (var d = 0; d < 3; d++) {var p,f = h[d],g = Math.pow(f, 2),m = Math.pow(f, 3),v = { x: l[0][0] * m + l[0][1] * g + l[0][2] * f + l[0][3], y: l[1][0] * m + l[1][1] * g + l[1][2] * f + l[1][3] };p = i - t !== 0 ? (v[0] - t) / (i - t) : (v[1] - e) / (n - e), f >= 0 && f <= 1 && p >= 0 && p <= 1 && u.push(v);}return u;}function so(t, e) {return [-t[0][e] + 3 * t[1][e] + -3 * t[2][e] + t[3][e], 3 * t[0][e] - 6 * t[1][e] + 3 * t[2][e], -3 * t[0][e] + 3 * t[1][e], t[0][e]];}function oo(t, e, i, n) {var r,s,o = e / t,a = i / t,l = n / t,c = (3 * a - Math.pow(o, 2)) / 9,h = (9 * o * a - 27 * l - 2 * Math.pow(o, 3)) / 54,u = Math.pow(c, 3) + Math.pow(h, 2),d = [0, 0, 0];if (u >= 0) r = $(h + Math.sqrt(u)) * Math.pow(Math.abs(h + Math.sqrt(u)), 1 / 3), s = $(h - Math.sqrt(u)) * Math.pow(Math.abs(h - Math.sqrt(u)), 1 / 3), d[0] = -o / 3 + (r + s), d[1] = -o / 3 - (r + s) / 2, d[2] = -o / 3 - (r + s) / 2, 0 !== Math.abs(Math.sqrt(3) * (r - s) / 2) && (d[1] = -1, d[2] = -1);else {var p = Math.acos(h / Math.sqrt(-Math.pow(c, 3)));d[0] = 2 * Math.sqrt(-c) * Math.cos(p / 3) - o / 3, d[1] = 2 * Math.sqrt(-c) * Math.cos((p + 2 * Math.PI) / 3) - o / 3, d[2] = 2 * Math.sqrt(-c) * Math.cos((p + 4 * Math.PI) / 3) - o / 3;}for (var f = 0; f < 3; f++) (d[f] < 0 || d[f] > 1) && (d[f] = -1);return d;}var ao = function (t) {l(i, t);var e = d(i);function i(t) {var n;return r(this, i), a(u(n = e.call(this, t)), "curve", void 0), a(u(n), "cp1x", void 0), a(u(n), "cp1y", void 0), a(u(n), "cp2x", void 0), a(u(n), "cp2y", void 0), a(u(n), "length", 0), a(u(n), "type", i.segmentType), n.cp1x = t.cp1x, n.cp1y = t.cp1y, n.cp2x = t.cp2x, n.cp2y = t.cp2y, n.x1 = t.x1, n.x2 = t.x2, n.y1 = t.y1, n.y2 = t.y2, n.curve = [{ x: n.x1, y: n.y1 }, { x: n.cp1x, y: n.cp1y }, { x: n.cp2x, y: n.cp2y }, { x: n.x2, y: n.y2 }], n.extents = { xmin: Math.min(n.x1, n.x2, n.cp1x, n.cp2x), ymin: Math.min(n.y1, n.y2, n.cp1y, n.cp2y), xmax: Math.max(n.x1, n.x2, n.cp1x, n.cp2x), ymax: Math.max(n.y1, n.y2, n.cp1y, n.cp2y) }, n;}return o(i, [{ key: "getPath", value: function (t) {return (t ? "M " + this.x2 + " " + this.y2 + " " : "") + "C " + this.cp2x + " " + this.cp2y + " " + this.cp1x + " " + this.cp1y + " " + this.x1 + " " + this.y1;} }, { key: "pointOnPath", value: function (t, e) {return t = i._translateLocation(this.curve, t, e), to(this.curve, t);} }, { key: "gradientAtPoint", value: function (t, e) {return t = i._translateLocation(this.curve, t, e), function (t, e) {var i = to(t, e),n = to(t.slice(0, t.length - 1), e),r = n.y - i.y,s = n.x - i.x;return 0 === r ? 1 / 0 : Math.atan(r / s);}(this.curve, t);} }, { key: "pointAlongPathFrom", value: function (t, e, n) {return t = i._translateLocation(this.curve, t, n), function (t, e, i) {return no(t, e, i).point;}(this.curve, t, e);} }, { key: "getLength", value: function () {return null != this.length && 0 !== this.length || (this.length = function (t) {var e = 0;if (!io(t)) for (var i = function (t, e) {for (var i = [], n = 0; n <= 15; n++) i.push(Js(n / 15, e));return i;}(0, t), n = 0; n < 15; n++) e += eo(i[n], i[n + 1]);return e;}(this.curve)), this.length;} }, { key: "findClosestPointOnPath", value: function (t, e) {var i,n,r = (n = Zs({ x: t, y: e }, i = this.curve), { point: Xs(i, i.length - 1, n.location, null, null), location: n.location });return { d: Math.sqrt(Math.pow(r.point.x - t, 2) + Math.pow(r.point.y - e, 2)), x: r.point.x, y: r.point.y, l: 1 - r.location, s: this, x1: null, y1: null, x2: null, y2: null };} }, { key: "lineIntersection", value: function (t, e, i, n) {return ro(t, e, i, n, this.curve);} }], [{ key: "_translateLocation", value: function (t, e, i) {return i && (e = function (t, e, i) {return no(t, e, i).location;}(t, e > 0 ? 0 : 1, e)), e;} }]), i;}(ei);a(ao, "segmentType", "Bezier");var lo = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), (s = e.call(this, t, n)).connection = t, a(u(s), "type", i.type), a(u(s), "majorAnchor", void 0), a(u(s), "minorAnchor", void 0), n = n || {}, s.majorAnchor = n.curviness || 150, s.minorAnchor = 10, s;}return o(i, [{ key: "getCurviness", value: function () {return this.majorAnchor;} }, { key: "_findControlPoint", value: function (t, e, i, n, r) {var s = { x: 0, y: 0 };return n[0] !== r[0] || n[1] === r[1] ? (0 === r[0] ? s.x = i.curX < e.curX ? t.x + this.minorAnchor : t.x - this.minorAnchor : s.x = t.x + this.majorAnchor * r[0], 0 === r[1] ? s.y = i.curY < e.curY ? t.y + this.minorAnchor : t.y - this.minorAnchor : s.y = t.y + this.majorAnchor * n[1]) : (0 === n[0] ? s.x = e.curX < i.curX ? t.x + this.minorAnchor : t.x - this.minorAnchor : s.x = t.x - this.majorAnchor * n[0], 0 === n[1] ? s.y = e.curY < i.curY ? t.y + this.minorAnchor : t.y - this.minorAnchor : s.y = t.y + this.majorAnchor * r[1]), s;} }, { key: "_computeBezier", value: function (t, e, i, n, r, s) {var o,a,l = i.curX < n.curX ? r : 0,c = i.curY < n.curY ? s : 0,h = i.curX < n.curX ? 0 : r,u = i.curY < n.curY ? 0 : s;!0 !== this.edited ? (o = this._findControlPoint({ x: l, y: c }, i, n, t.so, t.to), a = this._findControlPoint({ x: h, y: u }, n, i, t.to, t.so)) : (o = this.geometry.controlPoints[0], a = this.geometry.controlPoints[1]), this.geometry = { controlPoints: [o, a], source: e.sourcePos, target: e.targetPos }, this._addSegment(ao, { x1: l, y1: c, x2: h, y2: u, cp1x: o.x, cp1y: o.y, cp2x: a.x, cp2y: a.y });} }]), i;}(Hs);a(lo, "type", "Bezier");var co = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), (s = e.call(this, t, n)).connection = t, a(u(s), "type", i.type), a(u(s), "_controlPoint", void 0), s.curviness = n.curviness || 10, s.margin = n.margin || 5, s.proximityLimit = n.proximityLimit || 80, s.clockwise = n.orientation && "clockwise" === n.orientation, s;}return o(i, [{ key: "_computeBezier", value: function (t, e, i, n, r, s) {var o,a,l,c,h,u,d,p,f = i.curX < n.curX ? 0 : r,g = i.curY < n.curY ? 0 : s,m = i.curX < n.curX ? r : 0,v = i.curY < n.curY ? s : 0;if (0 === i.x && (f -= this.margin), 1 === i.x && (f += this.margin), 0 === i.y && (g -= this.margin), 1 === i.y && (g += this.margin), 0 === n.x && (m -= this.margin), 1 === n.x && (m += this.margin), 0 === n.y && (v -= this.margin), 1 === n.y && (v += this.margin), !0 !== this.edited) {var y = (f + m) / 2,b = (g + v) / 2,w = (a = g, c = v, (o = f) <= (l = m) && c <= a ? 1 : o <= l && a <= c ? 2 : l <= o && c >= a ? 3 : 4),x = Math.sqrt(Math.pow(m - f, 2) + Math.pow(v - g, 2));this._controlPoint = function (t, e, i, n, r, s, o, a, l) {return a <= l ? { x: t, y: e } : 1 === i ? n.curY <= 0 && r.curY >= 1 ? { x: t + (n.x < .5 ? -1 * s : s), y: e } : n.curX >= 1 && r.curX <= 0 ? { x: t, y: e + (n.y < .5 ? -1 * o : o) } : { x: t + -1 * s, y: e + -1 * o } : 2 === i ? n.curY >= 1 && r.curY <= 0 ? { x: t + (n.x < .5 ? -1 * s : s), y: e } : n.curX >= 1 && r.curX <= 0 ? { x: t, y: e + (n.y < .5 ? -1 * o : o) } : { x: t + s, y: e + -1 * o } : 3 === i ? n.curY >= 1 && r.curY <= 0 ? { x: t + (n.x < .5 ? -1 * s : s), y: e } : n.curX <= 0 && r.curX >= 1 ? { x: t, y: e + (n.y < .5 ? -1 * o : o) } : { x: t + -1 * s, y: e + -1 * o } : 4 === i ? n.curY <= 0 && r.curY >= 1 ? { x: t + (n.x < .5 ? -1 * s : s), y: e } : n.curX <= 0 && r.curX >= 1 ? { x: t, y: e + (n.y < .5 ? -1 * o : o) } : { x: t + s, y: e + -1 * o } : void 0;}(y, b, w, e.sourcePos, e.targetPos, this.curviness, this.curviness, x, this.proximityLimit);} else this._controlPoint = this.geometry.controlPoints[0];h = this._controlPoint.x, u = this._controlPoint.x, d = this._controlPoint.y, p = this._controlPoint.y, this.geometry = { controlPoints: [this._controlPoint, this._controlPoint], source: e.sourcePos, target: e.targetPos }, this._addSegment(ao, { x1: m, y1: v, x2: f, y2: g, cp1x: h, cp1y: d, cp2x: u, cp2y: p });} }]), i;}(Hs);function ho(t) {return t < 0 ? -1 : 0 === t ? 0 : 1;}function uo(t) {return [ho(t[2] - t[0]), ho(t[3] - t[1])];}function po(t) {return Math.sqrt(Math.pow(t[0] - t[2], 2) + Math.pow(t[1] - t[3], 2));}function fo(t) {var e = [];return e.push.apply(e, t), e;}a(co, "type", "StateMachine"), us(lo.type, lo), us(co.type, co);var go = function (t) {l(i, t);var e = d(i);function i(t, n) {var s;return r(this, i), (s = e.call(this, t, n)).connection = t, a(u(s), "type", i.type), a(u(s), "internalSegments", []), a(u(s), "midpoint", void 0), a(u(s), "alwaysRespectStubs", void 0), a(u(s), "cornerRadius", void 0), a(u(s), "lastx", void 0), a(u(s), "lasty", void 0), a(u(s), "lastOrientation", void 0), a(u(s), "loopbackRadius", void 0), a(u(s), "isLoopbackCurrently", void 0), s.midpoint = null == n.midpoint || isNaN(n.midpoint) ? .5 : n.midpoint, s.cornerRadius = null != n.cornerRadius ? n.cornerRadius : 0, s.alwaysRespectStubs = !0 === n.alwaysRespectStubs, s.lastx = null, s.lasty = null, s.lastOrientation = null, s.loopbackRadius = n.loopbackRadius || 25, s.isLoopbackCurrently = !1, s;}return o(i, [{ key: "getDefaultStubs", value: function () {return [30, 30];} }, { key: "addASegment", value: function (t, e, i) {if (this.lastx !== t || this.lasty !== e) {var n = null == this.lastx ? i.sx : this.lastx,r = null == this.lasty ? i.sy : this.lasty,s = n === t ? "v" : "h";this.lastx = t, this.lasty = e, this.internalSegments.push([n, r, t, e, s]);}} }, { key: "writeSegments", value: function (t) {for (var e, i, n, r = null, s = 0; s < this.internalSegments.length - 1; s++) {if (r = r || fo(this.internalSegments[s]), e = fo(this.internalSegments[s + 1]), i = uo(r), n = uo(e), this.cornerRadius > 0 && r[4] !== e[4]) {var o = Math.min(po(r), po(e)),a = Math.min(this.cornerRadius, o / 2);r[2] -= i[0] * a, r[3] -= i[1] * a, e[0] += n[0] * a, e[1] += n[1] * a;var l = i[1] === n[0] && 1 === n[0] || i[1] === n[0] && 0 === n[0] && i[0] !== n[1] || i[1] === n[0] && -1 === n[0],c = (e[1] > r[3] ? 1 : -1) == (e[0] > r[2] ? 1 : -1),h = c && l || !c && !l ? e[0] : r[2],u = c && l || !c && !l ? r[3] : e[1];this._addSegment(ds, { x1: r[0], y1: r[1], x2: r[2], y2: r[3] }), this._addSegment(Us, { r: a, x1: r[2], y1: r[3], x2: e[0], y2: e[1], cx: h, cy: u, ac: l });} else this._addSegment(ds, { x1: r[0], y1: r[1], x2: r[2], y2: r[3] });r = e;}null != e && this._addSegment(ds, { x1: e[0], y1: e[1], x2: e[2], y2: e[3] });} }, { key: "_compute", value: function (t, e) {var i = this;this.internalSegments.length = 0, this.lastx = null, this.lasty = null, this.lastOrientation = null;var n = function (e) {return [t.startStubX, t.startStubY, t.endStubX, t.endStubY];},r = { perpendicular: n, orthogonal: n, opposite: function (e) {var n = t,r = "x" === e ? 0 : 1,s = { x: function () {return 1 === n.so[r] && (n.startStubX > n.endStubX && n.tx > n.startStubX || n.sx > n.endStubX && n.tx > n.sx) || -1 === n.so[r] && (n.startStubX < n.endStubX && n.tx < n.startStubX || n.sx < n.endStubX && n.tx < n.sx);}, y: function () {return 1 === n.so[r] && (n.startStubY > n.endStubY && n.ty > n.startStubY || n.sy > n.endStubY && n.ty > n.sy) || -1 === n.so[r] && (n.startStubY < n.endStubY && n.ty < n.startStubY || n.sy < n.endStubY && n.ty < n.sy);} };return !i.alwaysRespectStubs && s[e]() ? { x: [(t.sx + t.tx) / 2, t.startStubY, (t.sx + t.tx) / 2, t.endStubY], y: [t.startStubX, (t.sy + t.ty) / 2, t.endStubX, (t.sy + t.ty) / 2] }[e] : [t.startStubX, t.startStubY, t.endStubX, t.endStubY];} },s = r[t.anchorOrientation](t.sourceAxis),o = "x" === t.sourceAxis ? 0 : 1,a = "x" === t.sourceAxis ? 1 : 0,l = s[o],c = s[a],h = s[o + 2],u = s[a + 2];this.addASegment(s[0], s[1], t);var d = t.startStubX + (t.endStubX - t.startStubX) * this.midpoint,p = t.startStubY + (t.endStubY - t.startStubY) * this.midpoint,f = { x: [0, 1], y: [1, 0] },g = { perpendicular: function (e, i, n, r, s) {var o = t,a = { x: [[o.startStubX, o.endStubX], null, [o.endStubX, o.startStubX]], y: [[o.startStubY, o.endStubY], null, [o.endStubY, o.startStubY]] },l = { x: [[d, o.startStubY], [d, o.endStubY]], y: [[o.startStubX, p], [o.endStubX, p]] },c = { x: [[o.endStubX, o.startStubY]], y: [[o.startStubX, o.endStubY]] },h = { x: [[o.startStubX, o.endStubY], [o.endStubX, o.endStubY]], y: [[o.endStubX, o.startStubY], [o.endStubX, o.endStubY]] },u = { x: [[o.startStubX, p], [o.endStubX, p], [o.endStubX, o.endStubY]], y: [[d, o.startStubY], [d, o.endStubY], [o.endStubX, o.endStubY]] },g = { x: [o.startStubY, o.endStubY], y: [o.startStubX, o.endStubX] },m = f[e][0],v = f[e][1],y = o.so[m] + 1,b = o.to[v] + 1,w = -1 === o.to[v] && g[e][1] < g[e][0] || 1 === o.to[v] && g[e][1] > g[e][0],x = a[e][y][0],S = a[e][y][1],E = { x: [[[1, 2, 3, 4], null, [2, 1, 4, 3]], null, [[4, 3, 2, 1], null, [3, 4, 1, 2]]], y: [[[3, 2, 1, 4], null, [2, 3, 4, 1]], null, [[4, 1, 2, 3], null, [1, 4, 3, 2]]] }[e][y][b];return o.segment === E[3] || o.segment === E[2] && w ? l[e] : o.segment === E[2] && S < x ? c[e] : o.segment === E[2] && S >= x || o.segment === E[1] && !w ? u[e] : o.segment === E[0] || o.segment === E[1] && w ? h[e] : void 0;}, orthogonal: function (e, i, n, r, s) {var o = t,a = { x: -1 === o.so[0] ? Math.min(i, r) : Math.max(i, r), y: -1 === o.so[1] ? Math.min(i, r) : Math.max(i, r) }[e];return { x: [[a, n], [a, s], [r, s]], y: [[n, a], [s, a], [s, r]] }[e];}, opposite: function (n, r, s, a, l) {var c = t,h = { x: "y", y: "x" }[n],u = { x: "h", y: "w" }[n],f = c["is" + n.toUpperCase() + "GreaterThanStubTimes2"];if (e.sourceEndpoint.elementId === e.targetEndpoint.elementId) {var g = s + (1 - e.sourceEndpoint._anchor.computedPosition[h]) * e.sourceInfo[u] + i.maxStub;return { x: [[r, g], [a, g]], y: [[g, r], [g, a]] }[n];}return !f || 1 === c.so[o] && r > a || -1 === c.so[o] && r < a ? { x: [[r, p], [a, p]], y: [[d, r], [d, a]] }[n] : 1 === c.so[o] && r < a || -1 === c.so[o] && r > a ? { x: [[d, c.sy], [d, c.ty]], y: [[c.sx, p], [c.tx, p]] }[n] : void 0;} },m = g[t.anchorOrientation](t.sourceAxis, l, c, h, u);if (m) for (var v = 0; v < m.length; v++) this.addASegment(m[v][0], m[v][1], t);this.addASegment(s[2], s[3], t), this.addASegment(t.tx, t.ty, t), this.writeSegments(t);} }, { key: "transformGeometry", value: function (t, e, i) {return t;} }]), i;}(Pr);function mo() {var t = Math.floor(2e3 * Math.random()),e = Math.floor(2e3 * Math.random());return { clientX: t, clientY: e, screenX: t, screenY: e, pageX: t, pageY: e };}a(go, "type", "Flowchart"), us(go.type, go), bn.registerHandler(zr), bn.registerHandler(Ps), bn.registerHandler(Is), us(ps.type, ps);for (var vo = { clientX: 5e4, clientY: 5e4, screenX: 5e4, screenY: 5e4, pageX: 5e4, pageY: 5e4 }, yo = [], bo = 0; bo < 256; bo++) yo[bo] = (bo < 16 ? "0" : "") + bo.toString(16);o(function t(e, i, n) {r(this, t), this._jsPlumb = e, this.ok = i, this.equal = n, a(this, "_divs", []), a(this, "mottle", void 0), this.mottle = new Mi();}, [{ key: "_t", value: function (t, e, i, n) {this.mottle.trigger(t, e, { pageX: i, pageY: n, screenX: i, screenY: n, clientX: i, clientY: n });} }, { key: "addDiv", value: function (t, e, i, n, r, s, o) {var a = document.createElement("div");return a.style.position = "absolute", a.innerHTML = t, e ? e.appendChild(a) : this._jsPlumb.getContainer().appendChild(a), a.setAttribute("id", t), a.style.left = (null != n ? n : Math.floor(1e3 * Math.random())) + "px", a.style.top = (null != r ? r : Math.floor(1e3 * Math.random())) + "px", i && (a.className = i), s && (a.style.width = s + "px"), o && (a.style.height = o + "px"), this._divs.push(t), a;} }, { key: "addDivs", value: function (t, e) {for (var i = 0; i < t.length; i++) this.addDiv(t[i], e);} }, { key: "assertEndpointCount", value: function (t, e) {var i = this._jsPlumb.getEndpoints(t),n = i ? i.length : 0;this.equal(n, e, t.getAttribute("data-jtk-managed") + " has " + e + (e > 1 || 0 == e ? " endpoints" : " endpoint"));} }, { key: "_assertManagedEndpointCount", value: function (t, e) {var i = this._jsPlumb.getId(t),n = this._jsPlumb._managedElements[i];this.equal(n.endpoints.length, e, i + " has " + e + " endpoints in managed record");} }, { key: "_assertManagedConnectionCount", value: function (t, e) {var i = this._jsPlumb.getId(t),n = this._jsPlumb._managedElements[i];this.equal(n.connections.length, e, i + " has " + e + " connections in managed record");} }, { key: "_registerDiv", value: function (t) {this._divs.push(t);} }, { key: "makeDragStartEvt", value: function (t) {var e = this.makeEvent(t),i = this._jsPlumb.getContainer();return e.clientX += i.offsetLeft, e.screenX += i.offsetLeft, e.pageX += i.offsetLeft, e.clientY += i.offsetTop, e.screenY += i.offsetTop, e.pageY += i.offsetTop, e;} }, { key: "getAttribute", value: function (t, e) {return t.getAttribute(e);} }, { key: "dragNodeBy", value: function (t, e, i, n) {(n = n || {}).before && n.before();var r = this.makeEvent(t);this._jsPlumb.trigger(t, de, r), n.beforeMouseMove && n.beforeMouseMove(), this._t(document, ge, r.pageX + e, r.pageY + i), n.beforeMouseUp && n.beforeMouseUp(), this.mottle.trigger(document, me, null), n.after && n.after();} }, { key: "dragNodeTo", value: function (t, e, i, n) {n = n || {};var r = this._jsPlumb.viewport.getPosition(this._jsPlumb.getId(t));n.before && n.before();var s = this.makeEvent(t);this._jsPlumb.trigger(t, de, s);var o = this._jsPlumb.getContainer().getBoundingClientRect();n.beforeMouseMove && n.beforeMouseMove(), this._t(document, ge, o.x + e + r.w / 2, o.y + i + r.h / 2), n.beforeMouseUp && n.beforeMouseUp(), this.mottle.trigger(document, me, null), n.after && n.after();} }, { key: "dragToGroup", value: function (t, e, i) {var n = this._jsPlumb.getGroup(e),r = this._jsPlumb.viewport.getPosition(n.elId),s = r.x + r.w / 2,o = r.y + r.h / 2;this.dragNodeTo(t, s, o, i);} }, { key: "aSyncDragNodeBy", value: function (t, e, i, n) {var r = this;(n = n || {}).before && n.before();var s = this.makeEvent(t);this._jsPlumb.trigger(t, de, s), n.beforeMouseMove && n.beforeMouseMove(), setTimeout(function () {r._t(document, ge, s.pageX + e, s.pageY + i), n.beforeMouseUp && n.beforeMouseUp(), setTimeout(function () {r.mottle.trigger(document, me, null), n.after && n.after();}, 45);}, 45);} }, { key: "dragANodeAround", value: function (t, e, i) {this._jsPlumb.trigger(t, de, this.makeEvent(t));for (var n = 50 * Math.random(), r = 0; r < n; r++) {var s = mo();t.style.left = s.screenX + "px", t.style.top = s.screenY + "px", this._jsPlumb.trigger(document, ge, s);}e && this.ok(e(), i || "while dragging assert"), this._jsPlumb.trigger(document, me, vo);} }, { key: "dragConnection", value: function (t, e, i, n) {var r = this.getCanvas(t),s = this.getCanvas(e),o = this.makeEvent(r),a = this.makeEvent(s);n = n || {};var l = this._jsPlumb.select().length;return this._jsPlumb.trigger(r, de, o), n.beforeMouseMove && n.beforeMouseMove(), this._jsPlumb.trigger(i ? s : document, ge, a), n.beforeMouseUp && n.beforeMouseUp(), this._jsPlumb.trigger(i ? s : document, me, a), this._jsPlumb.select().get(l);} }, { key: "aSyncDragConnection", value: function (t, e, i) {var n = this;i = i || {};var r = this.getCanvas(t),s = this.getCanvas(e),o = this.makeEvent(r),a = this.makeEvent(s),l = this._jsPlumb.select().length;this._jsPlumb.trigger(r, de, o), setTimeout(function () {i.beforeMouseMove && i.beforeMouseMove(), n._jsPlumb.trigger(document, ge, a), setTimeout(function () {i.beforeMouseUp && i.beforeMouseUp(), n._jsPlumb.trigger(s, me, a), i.after && i.after(n._jsPlumb.select().get(l));}, 5);}, 5);} }, { key: "dragAndAbortConnection", value: function (t) {var e = this.getCanvas(t),i = this.makeEvent(e);this._jsPlumb.trigger(e, de, i), this._jsPlumb.trigger(document, ge, vo), this._jsPlumb.trigger(document, me, vo);} }, { key: "detachConnection", value: function (t, e) {e = e || {};var i = this.getEndpointCanvas(t),n = this.makeEvent(i);e.before && e.before(), this._jsPlumb.trigger(i, de, n), e.beforeMouseMove && e.beforeMouseMove(), this._jsPlumb.trigger(document, ge, vo), e.beforeMouseUp && e.beforeMouseUp(), this._jsPlumb.trigger(document, me, vo), e.after && e.after();} }, { key: "detachAndReattachConnection", value: function (t, e) {e = e || {};var i = this.getEndpointCanvas(t),n = this.makeEvent(i);e.before && e.before(), this._jsPlumb.trigger(i, de, n), e.beforeMouseMove && e.beforeMouseMove(), this._jsPlumb.trigger(document, ge, vo), this._jsPlumb.trigger(document, ge, n), e.beforeMouseUp && e.beforeMouseUp(), this._jsPlumb.trigger(document, me, n), e.after && e.after();} }, { key: "detachConnectionByTarget", value: function (t, e) {this.detachConnection(t.endpoints[1], e);} }, { key: "relocateTarget", value: function (t, e, i) {this.relocate(t, 1, e, i);} }, { key: "relocate", value: function (t, e, i, n) {n = n || {}, i = this.getCanvas(i);var r = this.getEndpointCanvas(t.endpoints[e]),s = this.makeEvent(r),o = this.makeEvent(i);n.before && n.before(), this._jsPlumb.trigger(r, de, s), n.beforeMouseMove && n.beforeMouseMove(), this._jsPlumb.trigger(document, ge, o), n.beforeMouseUp && n.beforeMouseUp(), this._jsPlumb.trigger(i, me, o), n.after && n.after();} }, { key: "relocateSource", value: function (t, e, i) {this.relocate(t, 0, e, i);} }, { key: "makeEvent", value: function (t) {var e = t.getBoundingClientRect(),i = e.x + e.width / 2,n = e.y + e.height / 2;return { clientX: i, clientY: n, screenX: i, screenY: n, pageX: i, pageY: n };} }, { key: "getCanvas", value: function (t) {return t.endpoint ? this.getEndpointCanvas(t) : t;} }, { key: "getEndpointCanvas", value: function (t) {return t.endpoint.canvas;} }, { key: "getConnectionCanvas", value: function (t) {return t.connector.canvas;} }, { key: "getEndpointCanvasPosition", value: function (t) {var e = this.getEndpointCanvas(t);return { x: parseInt(e.style.left, 10), y: parseInt(e.style.top, 10), w: e.getAttribute("width"), h: e.getAttribute("height") };} }, { key: "within", value: function (t, e, i) {this.ok(Math.abs(t - e) < 1e-11, i + "[expected: " + e + " got " + t + "] [diff:" + Math.abs(t - e) + "]");} }, { key: "assertManagedEndpointCount", value: function (t, e) {var i = this._jsPlumb.getId(t),n = this._jsPlumb._managedElements[i];this.equal(n.endpoints.length, e, i + " has " + e + " endpoints in managed record");} }, { key: "assertManagedConnectionCount", value: function (t, e) {var i = this._jsPlumb.getId(t),n = this._jsPlumb._managedElements[i];this.equal(n.connections.length, e, i + " has " + e + " connections in managed record");} }, { key: "fireEventOnEndpoint", value: function (t) {for (var e = this.getEndpointCanvas(t), i = 0; i < (arguments.length <= 1 ? 0 : arguments.length - 1); i++) this._jsPlumb.trigger(e, i + 1 < 1 || arguments.length <= i + 1 ? void 0 : arguments[i + 1]);} }, { key: "fireEventOnElement", value: function (t) {for (var e = 0; e < (arguments.length <= 1 ? 0 : arguments.length - 1); e++) this._jsPlumb.trigger(t, e + 1 < 1 || arguments.length <= e + 1 ? void 0 : arguments[e + 1]);} }, { key: "fireEventOnConnection", value: function (t) {for (var e = this.getConnectionCanvas(t), i = arguments.length, n = new Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];this.fireEventOnElement.apply(this, [e].concat(n));} }, { key: "clickOnConnection", value: function (t) {this.fireEventOnConnection(t, le);} }, { key: "dblClickOnConnection", value: function (t) {this.fireEventOnConnection(t, he);} }, { key: "tapOnConnection", value: function (t) {this.fireEventOnConnection(t, de), this.fireEventOnConnection(t, me);} }, { key: "dblTapOnConnection", value: function (t) {this.fireEventOnConnection(t, de), this.fireEventOnConnection(t, me), this.fireEventOnConnection(t, de), this.fireEventOnConnection(t, me);} }, { key: "clickOnElement", value: function (t, e) {this._jsPlumb.trigger(t, le, null, null, null == e ? 1 : e);} }, { key: "dblClickOnElement", value: function (t) {this._jsPlumb.trigger(t, he);} }, { key: "tapOnElement", value: function (t) {this._jsPlumb.trigger(t, de), this._jsPlumb.trigger(t, me);} }, { key: "dblTapOnElement", value: function (t) {this._jsPlumb.trigger(t, de), this._jsPlumb.trigger(t, me), this._jsPlumb.trigger(t, de), this._jsPlumb.trigger(t, me);} }, { key: "getOverlayCanvas", value: function (t) {return t.canvas || t.path;} }, { key: "fireEventOnOverlay", value: function (t, e, i) {var n = t.getOverlay(e),r = this.getOverlayCanvas(n);this._jsPlumb.trigger(r, i);} }, { key: "clickOnOverlay", value: function (t, e) {this.fireEventOnOverlay(t, e, le);} }, { key: "dblClickOnOverlay", value: function (t, e) {this.fireEventOnOverlay(t, e, he);} }, { key: "tapOnOverlay", value: function (t, e) {this.fireEventOnOverlay(t, e, de), this.fireEventOnOverlay(t, e, me);} }, { key: "dblTapOnOverlay", value: function (t, e) {this.fireEventOnOverlay(t, e, de), this.fireEventOnOverlay(t, e, me), this.fireEventOnOverlay(t, e, de), this.fireEventOnOverlay(t, e, me);} }, { key: "cleanup", value: function () {var t = this._jsPlumb.getContainer();for (var e in this._jsPlumb.destroy(), this._divs) {var i = document.getElementById(this._divs[e]);i && i.parentNode.removeChild(i);}this._divs.length = 0;var n = this._jsPlumb.select().length,r = this._jsPlumb.selectEndpoints().length,s = t.querySelectorAll(".jtk-endpoint").length,o = t.querySelectorAll(".jtk-connector").length;for (var a in t.__ta) for (var l in t.__ta[a]) throw "Container event bindings not empty for key " + a;if (n > 0) throw "there are connections in the data model!";if (r > 0) throw "there are endpoints in the data model!";if (s > 0) throw "there are " + s + " endpoints left in the dom!";if (o > 0) throw "there are " + o + " connections left in the dom!";} }, { key: "makeContent", value: function (t) {var e = document.createElement("div");return e.innerHTML = t, e.firstChild;} }, { key: "length", value: function (t) {var e = 0;for (var i in t) t.hasOwnProperty(i) && e++;return e;} }, { key: "head", value: function (t) {for (var e in t) return t[e];} }, { key: "uuid", value: function () {return B();} }]);var wo = 0;function xo(t) {return new Ms(function () {var t = wo + 1;return wo++, t;}(), t);}}, 4078: (t, e, i) => {"use strict";i.d(e, { Ay: () => Dr, Gq: () => br, XD: () => wr, hi: () => Z });var n = i(4111),r = i(1720),s = i(7728),o = i(4338),a = i(9605),l = i(1273),c = i(4890),h = i(77),u = i(4573),d = i(2437),p = i(1904),f = i(2284),g = i(9715),m = function (t, e) {return m = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, m(t, e);};function v(t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}m(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());}var y = function () {return y = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, y.apply(this, arguments);};function b(t, e) {var i = "function" == typeof Symbol && t[Symbol.iterator];if (!i) return t;var n,r,s = i.call(t),o = [];try {for (; (void 0 === e || e-- > 0) && !(n = s.next()).done;) o.push(n.value);} catch (t) {r = { error: t };} finally {try {n && !n.done && (i = s.return) && i.call(s);} finally {if (r) throw r.error;}}return o;}function w(t, e, i) {if (i || 2 === arguments.length) for (var n, r = 0, s = e.length; r < s; r++) !n && r in e || (n || (n = Array.prototype.slice.call(e, 0, r)), n[r] = e[r]);return t.concat(n || Array.prototype.slice.call(e));}function x(t, e) {return y({ events: [], props: [], name: t }, e);}var S,E,C = ["n", "w", "s", "e"],k = ["n", "w", "s", "e", "nw", "ne", "sw", "se"],T = (0, n.Ay)(),A = T.browser.webkit,M = A && (S = "undefined" == typeof window ? { userAgent: "" } : window.navigator, !!(E = /applewebkit\/([^\s]+)/g.exec(S.userAgent.toLowerCase())) && parseFloat(E[1]) < 605),_ = T.browser.name,P = parseInt(T.browser.version, 10),D = "chrome" === _,O = T.browser.chromium,I = parseInt(T.browser.chromiumVersion, 10) || 0,F = D && P >= 109 || O && I >= 109,R = "firefox" === _,L = parseInt(T.browser.webkitVersion, 10) >= 612 || P >= 15,N = "moveable-",V = k.map(function (t) {var e = "",i = "",n = "center",r = "center",s = "calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n") > -1 && (e = "top: ".concat(s, ";"), r = "bottom"), t.indexOf("s") > -1 && (e = "top: 0px;", r = "top"), t.indexOf("w") > -1 && (i = "left: ".concat(s, ";"), n = "right"), t.indexOf("e") > -1 && (i = "left: 0px;", n = "left"), '.around-control[data-direction*="'.concat(t, '"] {\n        ').concat(i).concat(e, "\n        transform-origin: ").concat(n, " ").concat(r, ";\n    }");}).join("\n"),B = "\n{\nposition: absolute;\nwidth: 1px;\nheight: 1px;\nleft: 0;\ntop: 0;\nz-index: 3000;\n--moveable-color: #4af;\n--zoom: 1;\n--zoompx: 1px;\n--moveable-line-padding: 0;\n--moveable-control-padding: 0;\nwill-change: transform;\noutline: 1px solid transparent;\n}\n.control-box {\nz-index: 0;\n}\n.line, .control {\nposition: absolute;\nleft: 0;\ntop: 0;\nwill-change: transform;\n}\n.control {\nwidth: 14px;\nheight: 14px;\nborder-radius: 50%;\nborder: 2px solid #fff;\nbox-sizing: border-box;\nbackground: #4af;\nbackground: var(--moveable-color);\nmargin-top: -7px;\nmargin-left: -7px;\nborder: 2px solid #fff;\nz-index: 10;\n}\n.around-control {\nposition: absolute;\nwill-change: transform;\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\nheight: calc(var(--moveable-control-padding, 20) * 1px);\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\nbox-sizing: border-box;\nbackground: transparent;\nz-index: 8;\ncursor: alias;\ntransform-origin: center center;\n}\n".concat(V, "\n.padding {\nposition: absolute;\ntop: 0px;\nleft: 0px;\nwidth: 100px;\nheight: 100px;\ntransform-origin: 0 0;\n}\n.line {\nwidth: 1px;\nheight: 1px;\nbackground: #4af;\nbackground: var(--moveable-color);\ntransform-origin: 0px 50%;\n}\n.line.edge {\nz-index: 1;\nbackground: transparent;\n}\n.line.dashed {\nbox-sizing: border-box;\nbackground: transparent;\n}\n.line.dashed.horizontal {\nborder-top: 1px dashed #4af;\nborder-top-color: #4af;\nborder-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\nborder-left: 1px dashed #4af;\nborder-left-color: #4af;\nborder-left-color: var(--moveable-color);\n}\n.line.vertical {\ntransform: translateX(-50%);\n}\n.line.horizontal {\ntransform: translateY(-50%);\n}\n.line.vertical.bold {\nwidth: 2px;\n}\n.line.horizontal.bold {\nheight: 2px;\n}\n\n.control.origin {\nborder-color: #f55;\nbackground: #fff;\nwidth: 12px;\nheight: 12px;\nmargin-top: -6px;\nmargin-left: -6px;\npointer-events: none;\n}\n").concat([0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function (t) {return '\n.direction[data-rotation="'.concat(t, '"], :global .view-control-rotation').concat(t, " {\n").concat(function (t) {var e = function (t, e) {return 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32, 'px" height="').concat(32, 'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e, 'deg);transform-origin: 16px 16px"></path></svg>');}(0, t),i = 45 * Math.round(t / 45) % 180,n = "ns-resize";return 135 === i ? n = "nwse-resize" : 45 === i ? n = "nesw-resize" : 90 === i && (n = "ew-resize"), "cursor:".concat(n, ";cursor: url('").concat(e, "') 16 16, ").concat(n, ";");}(t), "\n}\n");}).join("\n"), '\n\n.line.direction:before {\ncontent: "";\nposition: absolute;\nwidth: 100%;\nheight: calc(var(--moveable-line-padding, 0) * 1px);\nbottom: 0;\nleft: 0;\n}\n.group {\nz-index: -1;\n}\n.area {\nposition: absolute;\n}\n.area-pieces {\nposition: absolute;\ntop: 0;\nleft: 0;\ndisplay: none;\n}\n.area.avoid, .area.pass {\npointer-events: none;\n}\n.area.avoid+.area-pieces {\ndisplay: block;\n}\n.area-piece {\nposition: absolute;\n}\n\n').concat(M ? ':global svg *:before {\ncontent:"";\ntransform-origin: inherit;\n}' : "", "\n"),j = [[0, 1, 2], [1, 0, 3], [2, 0, 3], [3, 1, 2]],z = 1e-4,U = 1e-7,H = 1e-9,q = Math.pow(10, 10),$ = -q,G = { n: [0, -1], e: [1, 0], s: [0, 1], w: [-1, 0], nw: [-1, -1], ne: [1, -1], sw: [-1, 1], se: [1, 1] },W = { n: [0, 1], e: [1, 3], s: [3, 2], w: [2, 0], nw: [0], ne: [1], sw: [2], se: [3] },K = { n: 0, s: 180, w: 270, e: 90, nw: 315, ne: 45, sw: 225, se: 135 },Z = ["isMoveableElement", "updateRect", "updateTarget", "destroy", "dragStart", "isInside", "hitTest", "setState", "getRect", "request", "isDragging", "getManager", "forceUpdate", "waitToChangeTarget", "updateSelectors", "getTargets", "stopDrag", "getControlBoxElement", "getMoveables", "getDragElement"];function Y(t, e, i, n, r, s) {var o, a;void 0 === s && (s = "draggable");var l = null !== (a = null === (o = e.gestos[s]) || void 0 === o ? void 0 : o.move(i, t.inputEvent)) && void 0 !== a ? a : {},c = l.originalDatas || l.datas,h = c[s] || (c[s] = {});return y(y({}, r ? Yi(e, l) : l), { isPinch: !!n, parentEvent: !0, datas: h, originalDatas: t.originalDatas });}var X = function () {function t(t) {var e;void 0 === t && (t = "draggable"), this.ableName = t, this.prevX = 0, this.prevY = 0, this.startX = 0, this.startY = 0, this.isDrag = !1, this.isFlag = !1, this.datas = { draggable: {} }, this.datas = ((e = {})[t] = {}, e);}return t.prototype.dragStart = function (t, e) {this.isDrag = !1, this.isFlag = !1;var i = e.originalDatas;return this.datas = i, i[this.ableName] || (i[this.ableName] = {}), y(y({}, this.move(t, e.inputEvent)), { type: "dragstart" });}, t.prototype.drag = function (t, e) {return this.move([t[0] - this.prevX, t[1] - this.prevY], e);}, t.prototype.move = function (t, e) {var i,n,r = !1;if (this.isFlag) {var s = this.isDrag;i = this.prevX + t[0], n = this.prevY + t[1], (t[0] || t[1]) && (this.isDrag = !0), !s && this.isDrag && (r = !0);} else this.prevX = t[0], this.prevY = t[1], this.startX = t[0], this.startY = t[1], i = t[0], n = t[1], this.isFlag = !0;return this.prevX = i, this.prevY = n, { type: "drag", clientX: i, clientY: n, inputEvent: e, isFirstDrag: r, isDrag: this.isDrag, distX: i - this.startX, distY: n - this.startY, deltaX: t[0], deltaY: t[1], datas: this.datas[this.ableName], originalDatas: this.datas, parentEvent: !0, parentGesto: this };}, t;}();function J(t, e, i, n) {var r = 16 === t.length ? 4 : 3,s = b(vi(t, i, n, r), 4),o = b(s[0], 2),a = o[0],l = o[1],c = b(s[1], 2),h = c[0],u = c[1],d = b(s[2], 2),p = d[0],f = d[1],g = b(s[3], 2),m = g[0],v = g[1],y = b(mi(t, e, r), 2),w = y[0],x = y[1],S = Math.min(a, h, p, m),E = Math.min(l, u, f, v),C = Math.max(a, h, p, m);return a = a - S || 0, { left: S, top: E, right: C, bottom: Math.max(l, u, f, v), origin: [w = w - S || 0, x = x - E || 0], pos1: [a, l = l - E || 0], pos2: [h = h - S || 0, u = u - E || 0], pos3: [p = p - S || 0, f = f - E || 0], pos4: [m = m - S || 0, v = v - E || 0], direction: dn(t[0] * t[r + 1]) };}function Q(t, e) {var i = e.clientX,n = e.clientY,r = e.datas,s = t.state,a = s.moveableClientRect,l = s.rootMatrix,c = s.is3d,h = s.pos1,u = a.left,d = a.top,p = c ? 4 : 3,f = b((0, o.Rd)(Zi(l, [i - u, n - d], p), h), 2),g = b(st({ datas: r, distX: f[0], distY: f[1] }), 2);return [g[0], g[1]];}function tt(t, e) {var i = e.datas,n = t.state,r = n.allMatrix,s = n.beforeMatrix,a = n.is3d,l = n.left,c = n.top,h = n.origin,u = n.offsetMatrix,d = n.targetMatrix,p = n.transformOrigin,f = a ? 4 : 3;i.is3d = a, i.matrix = r, i.targetMatrix = d, i.beforeMatrix = s, i.offsetMatrix = u, i.transformOrigin = p, i.inverseMatrix = (0, o.B8)(r, f), i.inverseBeforeMatrix = (0, o.B8)(s, f), i.absoluteOrigin = (0, o.ez)((0, o.tY)([l, c], h), f), i.startDragBeforeDist = (0, o.Di)(i.inverseBeforeMatrix, i.absoluteOrigin, f), i.startDragDist = (0, o.Di)(i.inverseMatrix, i.absoluteOrigin, f);}function et(t, e, i) {var n = e.datas,r = e.originalDatas.beforeRenderable,l = n.transformIndex,c = r.nextTransforms,h = c.length,u = r.nextTransformAppendedIndexes,d = -1;-1 === l ? ("translate" === i ? d = 0 : "rotate" === i && (d = (0, s.SL)(c, function (t) {return t.match(/scale\(/g);})), -1 === d && (d = c.length), n.transformIndex = d) : d = (0, s.I6)(u, function (t) {return t.index === l && t.functionName === i;}) ? l : l + u.filter(function (t) {return t.index < l;}).length;var p = function (t, e, i) {var n,r = (0, a.qg)(t, { "x%": function (t) {return t / 100 * e.offsetWidth;}, "y%": function (t) {return t / 100 * e.offsetHeight;} }),s = t.slice(0, i < 0 ? void 0 : i),l = t.slice(0, i < 0 ? void 0 : i + 1),c = t[i] || "",h = i < 0 ? [] : t.slice(i),u = i < 0 ? [] : t.slice(i + 1),d = r.slice(0, i < 0 ? void 0 : i),p = r.slice(0, i < 0 ? void 0 : i + 1),f = null !== (n = r[i]) && void 0 !== n ? n : (0, a.qg)([""])[0],g = i < 0 ? [] : r.slice(i),m = i < 0 ? [] : r.slice(i + 1),v = f ? [f] : [],y = (0, a.ap)(d),b = (0, a.ap)(p),w = (0, a.ap)(g),x = (0, a.ap)(m),S = (0, o.lw)(y, w, 4);return { transforms: t, beforeFunctionMatrix: y, beforeFunctionMatrix2: b, targetFunctionMatrix: (0, a.ap)(v), afterFunctionMatrix: w, afterFunctionMatrix2: x, allFunctionMatrix: S, beforeFunctions: d, beforeFunctions2: p, targetFunction: v[0], afterFunctions: g, afterFunctions2: m, beforeFunctionTexts: s, beforeFunctionTexts2: l, targetFunctionText: c, afterFunctionTexts: h, afterFunctionTexts2: u };}(c, t.state, d),f = p.targetFunction,g = "rotate" === i ? "rotateZ" : i;n.beforeFunctionTexts = p.beforeFunctionTexts, n.afterFunctionTexts = p.afterFunctionTexts, n.beforeTransform = p.beforeFunctionMatrix, n.beforeTransform2 = p.beforeFunctionMatrix2, n.targetTansform = p.targetFunctionMatrix, n.afterTransform = p.afterFunctionMatrix, n.afterTransform2 = p.afterFunctionMatrix2, n.targetAllTransform = p.allFunctionMatrix, f.functionName === g ? (n.afterFunctionTexts.splice(0, 1), n.isAppendTransform = !1) : h > d && (n.isAppendTransform = !0, r.nextTransformAppendedIndexes = w(w([], b(u), !1), [{ functionName: i, index: d, isAppend: !0 }], !1));}function it(t, e, i) {return "".concat(t.beforeFunctionTexts.join(" "), " ").concat(t.isAppendTransform ? i : e, " ").concat(t.afterFunctionTexts.join(" "));}function nt(t, e, i) {var n = t.beforeTransform,r = t.afterTransform,s = t.beforeTransform2,a = t.afterTransform2,l = t.targetAllTransform,c = i ? (0, o.lw)(l, e, 4) : (0, o.lw)(e, l, 4),h = (0, o.lw)((0, o.B8)(i ? s : n, 4), c, 4);return (0, o.lw)(h, (0, o.B8)(i ? a : r, 4), 4);}function rt(t) {var e = t.datas,i = t.distX,n = t.distY,r = e.inverseBeforeMatrix,s = e.is3d,a = e.startDragBeforeDist,l = e.absoluteOrigin,c = s ? 4 : 3;return (0, o.Rd)((0, o.Di)(r, (0, o.tY)(l, [i, n]), c), a);}function st(t, e) {var i = t.datas,n = t.distX,r = t.distY,s = i.inverseBeforeMatrix,a = i.inverseMatrix,l = i.is3d,c = i.startDragBeforeDist,h = i.startDragDist,u = i.absoluteOrigin,d = l ? 4 : 3;return (0, o.Rd)((0, o.Di)(e ? s : a, (0, o.tY)(u, [n, r]), d), e ? c : h);}function ot(t) {var e = [];return t[1] >= 0 && (t[0] >= 0 && e.push(3), t[0] <= 0 && e.push(2)), t[1] <= 0 && (t[0] >= 0 && e.push(1), t[0] <= 0 && e.push(0)), e;}function at(t, e) {var i = (e + 1) / 2;return [(0, s.Om)(t[0][0], t[1][0], i, 1 - i), (0, s.Om)(t[0][1], t[1][1], i, 1 - i)];}function lt(t, e) {var i = at([t[0], t[1]], e[0]),n = at([t[2], t[3]], e[0]);return at([i, n], e[1]);}function ct(t, e, i, n) {return (0, o.lw)(t, si(e, n, i), n);}function ht(t, e) {var i = ft(e);return { setTransform: function (n, r) {void 0 === r && (r = -1), i.startTransforms = (0, s.cy)(n) ? n : (0, s.Z3)(n), dt(t, e, r);}, setTransformIndex: function (i) {dt(t, e, i);} };}function ut(t, e, i) {var n = ft(e).startTransforms;dt(t, e, (0, s.SL)(n, function (t) {return 0 === t.indexOf("".concat(i, "("));}));}function dt(t, e, i) {var n = ft(e),r = e.datas;if (r.transformIndex = i, -1 !== i) {var s = n.startTransforms[i];if (s) {var o = t.state,l = (0, a.qg)([s], { "x%": function (t) {return t / 100 * o.offsetWidth;}, "y%": function (t) {return t / 100 * o.offsetHeight;} });r.startValue = l[0].functionValue;}}}function pt(t, e) {ft(t).nextTransforms = (0, s.Z3)(e);}function ft(t) {return t.originalDatas.beforeRenderable;}function gt(t) {return t.originalDatas.beforeRenderable.nextTransforms;}function mt(t) {return (gt(t) || []).join(" ");}function vt(t) {return ft(t).nextStyle;}function yt(t, e, i, n, r) {pt(r, e);var s = Ce.drag(t, Y(r, t.state, i, n, !1)),o = s ? s.transform : e;return y(y({ transform: e, drag: s }, Li({ transform: o }, r)), { afterTransform: o });}function bt(t, e, i, n, r, l) {var c = function (t, e, i, n) {var r,l = t.transformOrigin,c = t.offsetMatrix,h = t.is3d ? 4 : 3;if ((0, s.Kg)(i)) {var u = e.beforeTransform,d = e.afterTransform;r = n ? (0, o._C)((0, a.yV)(i), 4, h) : (0, o._C)((0, o.lw)((0, o.lw)(u, (0, a.yV)([i]), 4), d, 4), 4, h);} else r = i;return ct(c, r, l, h);}(t.state, r, e, l),h = function (t, e, i, n) {void 0 === n && (n = t.state.allMatrix);var r = t.state,s = r.width,o = r.height,a = r.is3d ? 4 : 3;return mi(n, [s / 2 * (1 + e[0]) + i[0], o / 2 * (1 + e[1]) + i[1]], a);}(t, i, n, c);return h;}function wt(t, e, i, n, r, s, a) {var l = bt(t, e, i, r, s, a),c = t.state,h = c.left,u = c.top,d = t.props.groupable,p = d ? h : 0,f = d ? u : 0,g = (0, o.Rd)(n, l);return (0, o.Rd)(g, [p, f]);}function xt(t) {if (t && t.getRootNode) {var e = t.getRootNode();if (11 === e.nodeType) return e;}}function St(t) {var e = t("scale"),i = t("rotate"),n = t("translate"),r = [];return n && "0px" !== n && "none" !== n && r.push("translate(".concat(n.split(/\s+/).join(","), ")")), i && "1" !== i && "none" !== i && r.push("rotate(".concat(i, ")")), e && "1" !== e && "none" !== e && r.push("scale(".concat(e.split(/\s+/).join(","), ")")), r;}function Et(t, e, i) {for (var n, r, l, c = t, h = [], u = (0, s.ep)(t) || (0, s.uD)(t), d = !i && t === e || t === u, p = d, f = !1, g = 3, m = !1, v = li(e, e, !0).offsetParent, y = 1; c && !p;) {p = d;var w = Mt(c),x = w("position"),S = ai(c),E = "fixed" === x,C = St(w),k = (0, o.zs)(ri(S)),T = void 0,M = !1,_ = !1,P = 0,D = 0,O = 0,I = 0,N = { hasTransform: !1, fixedContainer: null };E && (m = !0, v = (N = di(c)).fixedContainer);var V = k.length;f || 16 !== V && !C.length || (f = !0, g = 4, ui(h), l && (l = (0, o._C)(l, 3, 4))), f && 9 === V && (k = (0, o._C)(k, 3, 4));var B = ci(c, t),j = B.tagName,z = B.hasOffset,U = B.isSVG,H = B.origin,q = B.targetOrigin,$ = b(B.offset, 2),G = $[0],W = $[1];"svg" === j && !c.ownerSVGElement && l && (h.push({ type: "target", target: c, matrix: gi(c, g) }), h.push({ type: "offset", target: c, matrix: (0, o.k8)(g) }));var K = parseFloat(w("zoom")) || 1;if (E) T = N.fixedContainer, M = !0;else {var Z = li(c, e, !1, !0, w),Y = Z.offsetZoom;if (T = Z.offsetParent, M = Z.isEnd, _ = Z.isStatic, y *= Y, (Z.isCustomElement || 1 !== Y) && _) G -= T.offsetLeft, W -= T.offsetTop;else if ((R || F) && Z.parentSlotElement) {for (var X = T, J = 0, Q = 0; X && xt(X);) J += X.offsetLeft, Q += X.offsetTop, X = X.offsetParent;G -= J, W -= Q;}}if (!A || L || !z || U || !_ || "relative" !== x && "static" !== x || (G -= T.offsetLeft, W -= T.offsetTop, d = d || M), E) z && N.hasTransform && (O = T.clientLeft, I = T.clientTop);else if (z && v !== T && (P = T.clientLeft, D = T.clientTop), z && T === u) {var tt = hi(c, !1);G += tt[0], W += tt[1];}if (h.push({ type: "target", target: c, matrix: si(k, g, H) }), C.length && (h.push({ type: "offset", target: c, matrix: (0, o.k8)(g) }), h.push({ type: "target", target: c, matrix: si((0, a.yV)(C), g, H) })), z) {var et = c === t,it = et ? 0 : c.scrollLeft,nt = et ? 0 : c.scrollTop;h.push({ type: "offset", target: c, matrix: (0, o.GD)([G - it + P - O, W - nt + D - I], g) });} else h.push({ type: "offset", target: c, origin: H });if (1 !== K && h.push({ type: "zoom", target: c, matrix: si((0, o.kb)([K, K], g), g, [0, 0]) }), l || (l = k), n || (n = H), r || (r = q), p || E) break;c = T, d = M, i && c !== u || (p = d);}return l || (l = (0, o.k8)(g)), n || (n = [0, 0]), r || (r = [0, 0]), { zoom: y, offsetContainer: v, matrixes: h, targetMatrix: l, transformOrigin: n, targetOrigin: r, is3d: f, hasFixed: m };}var Ct = null,kt = null,Tt = null;function At(t) {t ? (window.Map && (Ct = new Map(), kt = new Map()), Tt = []) : (Ct = null, Tt = null, kt = null);}function Mt(t) {var e = null == Ct ? void 0 : Ct.get(t);if (!e) {var i = (0, s.zk)(t).getComputedStyle(t);if (!Ct) return function (t) {return i[t];};e = { style: i, cached: {} }, Ct.set(t, e);}var n = e.cached,r = e.style;return function (t) {return t in n || (n[t] = r[t]), n[t];};}function _t(t, e, i) {var n = i.originalDatas;n.groupable = n.groupable || {};var r = n.groupable;r.childDatas = r.childDatas || [];var s = r.childDatas;return t.moveables.map(function (t, n) {return s[n] = s[n] || {}, s[n][e] = s[n][e] || {}, y(y({}, i), { isRequestChild: !0, datas: s[n][e], originalDatas: s[n] });});}function Pt(t, e, i, n, r, s, o) {var a = !!i.match(/Start$/g),l = !!i.match(/End$/g),c = r.isPinch,h = r.datas,u = _t(t, e.name, r),d = t.moveables,p = [],f = u.map(function (t, r) {var u = d[r],f = u.state,g = f.gestos,m = t;if (a) m = new X(o).dragStart(n, t), p.push(m);else {if (g[o] || (g[o] = h.childGestos[r]), !g[o]) return;m = Y(t, f, n, c, s, o), p.push(m);}var v = e[i](u, y(y({}, m), { parentFlag: !0 }));return l && (g[o] = null), v;});return a && (h.childGestos = d.map(function (t) {return t.state.gestos[o];})), { eventParams: f, childEvents: p };}function Dt(t, e, i, n, r, s) {void 0 === r && (r = function (t, e) {return e;});var o = !!i.match(/End$/g),a = _t(t, e.name, n),l = t.moveables;return a.map(function (t, n) {var a,c = l[n];a = r(c, t);var h = e[i](c, y(y({}, a), { parentFlag: !0 }));return h && s && s(c, t, h, n), o && (c.state.gestos = {}), h;});}function Ot(t, e, i, n) {var r = i.fixedDirection,s = i.fixedPosition,a = lt(n.datas.startPositions || Ii(e.state), r),l = b((0, o.Di)((0, o.XI)(-t.rotation / 180 * Math.PI, 3), [a[0] - s[0], a[1] - s[1], 1], 3), 2),c = l[0],h = l[1];return n.datas.originalX = c, n.datas.originalY = h, n;}function It(t, e, i, n) {var r = t.getState(),o = r.renderPoses,a = r.rotation,l = r.direction,c = Ci(t.props, e).zoom,h = Ze(a / Math.PI * 180),u = {},d = t.renderState;d.renderDirectionMap || (d.renderDirectionMap = {});var p = d.renderDirectionMap;i.forEach(function (t) {var e = t.dir;u[e] = !0;});var f = dn(l);return i.map(function (t) {var i = t.data,r = t.classNames,l = t.dir,d = W[l];if (!d || !u[l]) return null;p[l] = !0;var g = ((0, s.nF)(h, 15) + f * K[l] + 720) % 180,m = {};return (0, s.xD)(i).forEach(function (t) {m["data-".concat(t)] = i[t];}), n.createElement("div", y({ className: ii.apply(void 0, w(["control", "direction", l, e], b(r), !1)), "data-rotation": g, "data-direction": l }, m, { key: "direction-".concat(l), style: Ei.apply(void 0, w([a, c], b(d.map(function (t) {return o[t];})), !1)) }));});}function Ft(t, e, i, n) {var r = Ci(t.props, i),s = r.renderDirections,o = void 0 === s ? e : s,a = r.displayAroundControls;if (!o) return [];var l = !0 === o ? k : o;return w(w([], b(a ? Bt(t, n, i, l) : []), !1), b(It(t, i, l.map(function (t) {return { data: {}, classNames: [], dir: t };}), n)), !1);}function Rt(t, e, i, n, r, o) {for (var a = [], l = 6; l < arguments.length; l++) a[l - 6] = arguments[l];var c = (0, s.Mu)(i, n),h = e ? (0, s.nF)(c / Math.PI * 180, 15) % 180 : -1;return t.createElement("div", { key: "line-".concat(o), className: ii.apply(void 0, w(["line", "direction", e ? "edge" : "", e], b(a), !1)), "data-rotation": h, "data-line-key": o, "data-direction": e, style: Si(i, n, r, c) });}function Lt(t, e, i, n, r) {return (!0 === i ? C : i).map(function (i, s) {var o = b(W[i], 2),a = o[0],l = o[1];if (null != l) return Rt(t, i, n[a], n[l], r, "".concat(e, "Edge").concat(s), e);}).filter(Boolean);}function Nt(t) {return function (e, i) {var n = Ci(e.props, t).edge;return n && (!0 === n || n.length) ? w(w([], b(Lt(i, t, n, e.getState().renderPoses, e.props.zoom)), !1), b(function (t, e, i) {return Ft(t, ["nw", "ne", "sw", "se"], e, i);}(e, t, i)), !1) : Vt(e, t, i);};}function Vt(t, e, i) {return Ft(t, k, e, i);}function Bt(t, e, i, n) {var r = t.renderState;r.renderDirectionMap || (r.renderDirectionMap = {});var o = t.getState(),a = o.renderPoses,l = o.rotation,c = o.direction,h = r.renderDirectionMap,u = t.props.zoom,d = dn(c),p = l / Math.PI * 180;return (n || (0, s.xD)(h)).map(function (t) {var n = W[t];if (!n) return null;var r = ((0, s.nF)(p, 15) + d * K[t] + 720) % 180,o = ["around-control"];return i && o.push("direction", i), e.createElement("div", { className: ii.apply(void 0, w([], b(o), !1)), "data-rotation": r, "data-direction": t, key: "direction-around-".concat(t), style: Ei.apply(void 0, w([l, u], b(n.map(function (t) {return a[t];})), !1)) });});}function jt(t, e, i) {var n = t || {},r = n.position,s = void 0 === r ? "client" : r,o = n.left,a = void 0 === o ? -1 / 0 : o,l = n.top,c = void 0 === l ? -1 / 0 : l,h = n.right,u = void 0 === h ? 1 / 0 : h,d = n.bottom,p = { position: s, left: a, top: c, right: u, bottom: void 0 === d ? 1 / 0 : d };return { vertical: Ut(p, e, !0), horizontal: Ut(p, i, !1) };}function zt(t, e) {var i = t.state,n = i.containerClientRect,r = n.clientHeight,s = n.clientWidth,o = n.clientLeft,a = n.clientTop,l = i.snapOffset,c = l.left,h = l.top,u = l.right,d = l.bottom,p = e || t.props.bounds || {},f = "css" === (p.position || "client"),g = p.left,m = void 0 === g ? -1 / 0 : g,v = p.top,y = void 0 === v ? -1 / 0 : v,b = p.right,w = void 0 === b ? f ? -1 / 0 : 1 / 0 : b,x = p.bottom,S = void 0 === x ? f ? -1 / 0 : 1 / 0 : x;return f && (w = s + u - c - w, S = r + d - h - S), { left: m + c - o, right: w + c - o, top: y + h - a, bottom: S + h - a };}function Ut(t, e, i) {var n = t[i ? "left" : "top"],r = t[i ? "right" : "bottom"],s = Math.min.apply(Math, w([], b(e), !1)),o = Math.max.apply(Math, w([], b(e), !1)),a = [];return n + 1 > s && a.push({ direction: "start", isBound: !0, offset: s - n, pos: n }), r - 1 < o && a.push({ direction: "end", isBound: !0, offset: o - r, pos: r }), a.length || a.push({ isBound: !1, offset: 0, pos: 0 }), a.sort(function (t, e) {return pn(e.offset) - pn(t.offset);});}function Ht(t, e, i) {return (i ? t.map(function (t) {return (0, o.e$)(t, i);}) : t).some(function (t) {return t[0] < e.left && pn(t[0] - e.left) > .1 || t[0] > e.right && pn(t[0] - e.right) > .1 || t[1] < e.top && pn(t[1] - e.top) > .1 || t[1] > e.bottom && pn(t[1] - e.bottom) > .1;});}var qt = ["left", "right", "center"],$t = ["top", "bottom", "middle"],Gt = { left: "start", right: "end", center: "center", top: "start", bottom: "end", middle: "center" },Wt = { start: "left", end: "right", center: "center" },Kt = { start: "top", end: "bottom", center: "middle" };function Zt(t, e) {var i = t.props,n = i.snappable,r = i.bounds,s = i.innerBounds,o = i.verticalGuidelines,a = i.horizontalGuidelines,l = i.snapGridWidth,c = i.snapGridHeight,h = t.state,u = h.guidelines,d = h.enableSnap;return !(!n || !d || e && !0 !== n && n.indexOf(e) < 0 || !(l || c || r || s || u && u.length || o && o.length || a && a.length));}function Yt(t) {return !1 === t ? {} : !0 !== t && t ? t : { left: !0, right: !0, top: !0, bottom: !0 };}function Xt(t, e) {var i = function (t, e) {var i = Yt(t),n = {};for (var r in i) r in e && i[r] && (n[r] = e[r]);return n;}(t, e),n = $t.filter(function (t) {return t in i;}),r = qt.filter(function (t) {return t in i;});return { horizontalNames: n, verticalNames: r, horizontal: n.map(function (t) {return i[t];}), vertical: r.map(function (t) {return i[t];}) };}var Jt = "snapRotationThreshold",Qt = "snapRotationDegrees",te = "snapHorizontalThreshold",ee = "snapVerticalThreshold";function ie(t, e, i, n, r, s, o) {var a;void 0 === n && (n = []), void 0 === r && (r = []);var l = t.props,c = (null === (a = t.state.snapThresholdInfo) || void 0 === a ? void 0 : a.multiples) || [1, 1],h = $i(o, l[te], 5),u = $i(s, l[ee], 5);return ne(t.state.guidelines, e, i, n, r, h, u, c);}function ne(t, e, i, n, r, s, o, a) {return { vertical: ae(t, "vertical", e, o * a[0], n), horizontal: ae(t, "horizontal", i, s * a[1], r) };}function re(t) {var e = "";return -1 === t || "top" === t || "left" === t ? e = "start" : 0 === t || "center" === t || "middle" === t ? e = "center" : 1 !== t && "right" !== t && "bottom" !== t || (e = "end"), e;}function se(t, e, i, n) {var r = Xt(t.props.snapDirections, e),s = ie(t, r.vertical, r.horizontal, r.verticalNames.map(function (t) {return re(t);}), r.horizontalNames.map(function (t) {return re(t);}), i, n),o = re(r.horizontalNames[s.horizontal.index]),a = re(r.verticalNames[s.vertical.index]);return { vertical: y(y({}, s.vertical), { direction: a }), horizontal: y(y({}, s.horizontal), { direction: o }) };}function oe(t) {var e = t.isSnap;if (!e) return { isSnap: !1, offset: 0, dist: -1, pos: 0, guideline: null };var i = t.posInfos[0],n = i.guidelineInfos[0],r = n.offset,s = n.dist,o = n.guideline;return { isSnap: e, offset: r, dist: s, pos: i.pos, guideline: o };}function ae(t, e, i, n, r) {var s, o;if (void 0 === r && (r = []), !t || !t.length) return { isSnap: !1, index: -1, direction: "", posInfos: [] };var a = "vertical" === e ? 0 : 1,l = i.map(function (i, s) {var o = r[s] || "",l = t.map(function (t) {var e = t.pos,n = i - e[a];return { offset: n, dist: pn(n), guideline: t, direction: o };}).filter(function (t) {var i = t.guideline,r = t.dist;return !(i.type !== e || r > n);}).sort(function (t, e) {return t.dist - e.dist;});return { pos: i, index: s, guidelineInfos: l, direction: o };}).filter(function (t) {return t.guidelineInfos.length > 0;}).sort(function (t, e) {return t.guidelineInfos[0].dist - e.guidelineInfos[0].dist;}),c = l.length > 0;return { isSnap: c, index: c ? l[0].index : -1, direction: null !== (o = null === (s = l[0]) || void 0 === s ? void 0 : s.direction) && void 0 !== o ? o : "", posInfos: l };}function le(t, e) {var i = pn(t.offset),n = pn(e.offset);return t.isBound && e.isBound ? n - i : t.isBound ? -1 : e.isBound ? 1 : t.isSnap && e.isSnap ? n - i : t.isSnap ? -1 : e.isSnap || i < U ? 1 : n < U ? -1 : i - n;}function ce(t, e) {return t.slice().sort(function (t, i) {var n = t.sign[e],r = i.sign[e],s = t.offset[e],o = i.offset[e];return n ? r ? le({ isBound: t.isBound, isSnap: t.isSnap, offset: s }, { isBound: i.isBound, isSnap: i.isSnap, offset: o }) : -1 : 1;})[0];}function he(t, e) {var i = (0, s.G8)([e[0][0], e[1][0]]),n = (0, s.G8)([e[0][1], e[1][1]]);return { vertical: i <= t[0], horizontal: n <= t[1] };}function ue(t, e) {var i,n,r = b(e, 2),s = r[0],o = r[1],a = o[0] - s[0],l = o[1] - s[1];return pn(a) < U && (a = 0), pn(l) < U && (l = 0), a ? l ? (i = l / a * (t[0] - s[0]) + s[1], n = t[1]) : (i = s[1], n = t[1]) : (i = s[0], n = t[0]), i - n;}function de(t, e, i, n) {return void 0 === n && (n = U), t.every(function (t) {var r = ue(t, e);return r <= 0 === i || pn(r) <= n;});}function pe(t, e, i, n, r) {return void 0 === r && (r = 0), n && e - r <= t || !n && t <= i + r ? { isBound: !0, offset: n ? e - t : i - t } : { isBound: !1, offset: 0 };}function fe(t, e, i, n, r, s) {var o,a,l = b(e, 2),c = l[0],h = l[1],u = t[0],d = i[0],p = i[1],f = Qi(p[1] - d[1]),g = h,m = c,v = -c / h;return Qi(p[0] - d[0]) ? f || s && !g ? { isBound: !1, offset: 0 } : m ? pe((d[1] - u[1]) / v + u[0], d[0], p[0], n, r) : { isBound: a = pn(o = d[1] - u[1]) <= (r || 0), offset: a ? o : 0 } : s && !m ? { isBound: !1, offset: 0 } : g ? pe(v * (d[0] - u[0]) + u[1], d[1], p[1], n, r) : { isBound: a = pn(o = d[0] - u[0]) <= (r || 0), offset: a ? o : 0 };}function ge(t, e, i) {return e.map(function (e) {var n = function (t, e) {var i = e.line,n = e.centerSign,r = e.verticalSign,s = e.horizontalSign,o = e.lineConstants,a = t.props.innerBounds;if (!a) return { isAllBound: !1, isBound: !1, isVerticalBound: !1, isHorizontalBound: !1, offset: [0, 0] };var l = a.left,c = a.top,h = a.width,u = a.height,d = [[l, c], [l, c + u]],p = [[l, c], [l + h, c]],f = [[l + h, c], [l + h, c + u]],g = [[l, c + u], [l + h, c + u]];if (de([[l, c], [l + h, c], [l, c + u], [l + h, c + u]], i, n)) return { isAllBound: !1, isBound: !1, isVerticalBound: !1, isHorizontalBound: !1, offset: [0, 0] };var m = fe(i, o, p, r),v = fe(i, o, g, r),y = fe(i, o, d, s),b = fe(i, o, f, s),w = m.isBound && v.isBound,x = m.isBound || v.isBound,S = y.isBound && b.isBound,E = y.isBound || b.isBound,C = Ki(m.offset, v.offset),k = Ki(y.offset, b.offset),T = [0, 0],A = !1,M = !1;return pn(k) < pn(C) ? (T = [C, 0], A = x, M = w) : (T = [0, k], A = E, M = S), { isAllBound: M, isVerticalBound: x, isHorizontalBound: E, isBound: A, offset: T };}(t, e),r = n.isBound,s = n.offset,o = n.isVerticalBound,a = n.isHorizontalBound,l = e.multiple,c = st({ datas: i, distX: s[0], distY: s[1] }).map(function (t, e) {return t * (l[e] ? 2 / l[e] : 0);});return { sign: l, isBound: r, isVerticalBound: o, isHorizontalBound: a, isSnap: !1, offset: c };});}function me(t, e, i, n) {var r = t.state,o = vi(r.allMatrix, 100, 100, r.is3d ? 4 : 3),a = lt(o, [0, 0]);return function (t, e) {var i = [],n = t[0],r = t[1];return n && r ? i.push([[0, 2 * r], t, [-n, r]], [[2 * n, 0], t, [n, -r]]) : n ? (i.push([[2 * n, 0], [n, 1], [n, -1]]), e && i.push([[0, -1], [n, -1], [-n, -1]], [[0, 1], [n, 1], [-n, 1]])) : r ? (i.push([[0, 2 * r], [1, r], [-1, r]]), e && i.push([[-1, 0], [-1, r], [-1, -r]], [[1, 0], [1, r], [1, -r]])) : i.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]), i;}(i, n).map(function (t) {var i = b(t, 3),n = i[0],r = i[1],l = i[2],c = [lt(o, r), lt(o, l)],h = function (t) {var e = b(t, 2),i = e[0],n = e[1],r = n[0] - i[0],o = n[1] - i[1];Math.abs(r) < s._4 && (r = 0), Math.abs(o) < s._4 && (o = 0);var a = 0,l = 0,c = 0;return r ? o ? (l = 1, c = (a = -o / r) * i[0] - i[1]) : (l = 1, c = -i[1]) : (a = -1, c = i[0]), [a, l, c].map(function (t) {return (0, s.nF)(t, s._4);});}(c),u = he(a, c),d = u.vertical,p = u.horizontal;return { multiple: n, centerSign: ue(a, c) <= 0, verticalSign: d, horizontalSign: p, lineConstants: h, line: [lt(e, r), lt(e, l)] };});}function ve(t, e, i, n) {var r = n ? t.map(function (t) {return (0, o.e$)(t, n);}) : t;return [[r[0], r[1]], [r[1], r[3]], [r[3], r[2]], [r[2], r[0]]].some(function (t) {var n = ue(i, t) <= 0;return !de(e, t, n);});}function ye(t, e, i, n, r) {var o = function (t, e, i, n) {var r = e[0] - t[0],o = e[1] - t[1];if (pn(r) < s._4 && (r = 0), pn(o) < s._4 && (o = 0), !r) return n ? [0, 0] : [0, i];if (!o) return n ? [i, 0] : [0, 0];var a = o / r,l = t[1] - a * t[0];return n ? [i, a * (e[0] + i) + l - e[1]] : [(e[1] + i - l) / a - e[0], i];}(t, e, i, n);if (!o) return { isOutside: !1, offset: [0, 0] };var a = (0, s.l$)(t, e),l = (0, s.l$)(o, t),c = (0, s.l$)(o, e),h = l > a || c > a,u = b(st({ datas: r, distX: o[0], distY: o[1] }), 2);return { offset: [u[0], u[1]], isOutside: h };}function be(t, e) {return t.isBound ? t.offset : e.isSnap ? oe(e).offset : 0;}function we(t, e, i, n, r, a) {if (!Zt(t, "draggable")) return [{ isSnap: !1, isBound: !1, offset: 0 }, { isSnap: !1, isBound: !1, offset: 0 }];var l = Oi(a.absolutePoses, [e, i]),c = yi(l),h = c.left,u = c.right,d = c.top,p = c.bottom,f = { horizontal: l.map(function (t) {return t[1];}), vertical: l.map(function (t) {return t[0];}) },g = xe(t, r, Xt(Yt(t.props.snapDirections), { left: h, right: u, top: d, bottom: p, center: (h + u) / 2, middle: (d + p) / 2 }), f),m = g.vertical,v = g.horizontal,w = function (t, e, i) {var n,r = ge(t, me(t, e, [0, 0], !1).map(function (t) {return y(y({}, t), { multiple: t.multiple.map(function (t) {return 2 * pn(t);}) });}), i),s = ce(r, 0),a = ce(r, 1),l = 0,c = 0,h = s.isVerticalBound || a.isVerticalBound,u = s.isHorizontalBound || a.isHorizontalBound;return (h || u) && (n = b(function (t) {var e = t.datas,i = t.distX,n = t.distY,r = (e.beforeMatrix, e.matrix),s = e.is3d,a = (e.startDragBeforeDist, e.startDragDist),l = e.absoluteOrigin,c = s ? 4 : 3;return (0, o.Rd)((0, o.Di)(r, (0, o.tY)(a, [i, n]), c), l);}({ datas: i, distX: -s.offset[0], distY: -a.offset[1] }), 2), l = n[0], c = n[1]), { vertical: { isBound: h, offset: l }, horizontal: { isBound: u, offset: c } };}(t, l, a),x = w.vertical,S = w.horizontal,E = m.isSnap,C = v.isSnap,k = m.isBound || x.isBound,T = v.isBound || S.isBound,A = b(function (t, e, i, n, r) {var a = b(e, 2),l = a[0],c = a[1],h = b(i, 2),u = h[0],d = h[1],p = b(n, 2),f = p[0],g = p[1],m = b(r, 2),v = m[0],y = m[1],w = -v,x = -y;if (t && l && c) {w = 0, x = 0;var S = [];if (u && d ? S.push([0, y], [v, 0]) : u ? S.push([v, 0]) : d ? S.push([0, y]) : f && g ? S.push([0, y], [v, 0]) : f ? S.push([v, 0]) : g && S.push([0, y]), S.length) {S.sort(function (t, e) {return wi((0, o.Rd)([l, c], t)) - wi((0, o.Rd)([l, c], e));});var E = S[0];if (E[0] && pn(l) > s._4) w = -E[0], x = c * pn(l + w) / pn(l) - c;else if (E[1] && pn(c) > s._4) {var C = c;x = -E[1], w = l * pn(c + x) / pn(C) - l;}if (t && d && u) if (pn(w) > s._4 && pn(w) < pn(v)) w *= k = pn(v) / pn(w), x *= k;else if (pn(x) > s._4 && pn(x) < pn(y)) {var k;w *= k = pn(y) / pn(x), x *= k;} else w = Ki(-v, w), x = Ki(-y, x);}} else w = l || u ? -v : 0, x = c || d ? -y : 0;return [w, x];}(n, [e, i], [k, T], [E, C], [Ki(m.offset, x.offset), Ki(v.offset, S.offset)]), 2);return [{ isBound: k, isSnap: E, offset: A[0] }, { isBound: T, isSnap: C, offset: A[1] }];}function xe(t, e, i, n) {void 0 === n && (n = i);var r = jt(zt(t), n.vertical, n.horizontal),s = r.horizontal,o = r.vertical,a = e ? { horizontal: { isSnap: !1, index: -1 }, vertical: { isSnap: !1, index: -1 } } : ie(t, i.vertical, i.horizontal, void 0, void 0, void 0, void 0),l = a.horizontal,c = a.vertical,h = be(s[0], l),u = be(o[0], c),d = pn(h),p = pn(u);return { horizontal: { isBound: s[0].isBound, isSnap: l.isSnap, snapIndex: l.index, offset: h, dist: d, bounds: s, snap: l }, vertical: { isBound: o[0].isBound, isSnap: c.isSnap, snapIndex: c.index, offset: u, dist: p, bounds: o, snap: c } };}function Se(t, e, i, n, r, s, o) {void 0 === o && (o = [1, 1]);var a = jt(e, i, n),l = a.horizontal,c = a.vertical,h = ne(t, i, n, [], [], r, s, o),u = h.horizontal,d = h.vertical,p = be(l[0], u),f = be(c[0], d),g = pn(p),m = pn(f);return { horizontal: { isBound: l[0].isBound, isSnap: u.isSnap, snapIndex: u.index, offset: p, dist: g, bounds: l, snap: u }, vertical: { isBound: c[0].isBound, isSnap: d.isSnap, snapIndex: d.index, offset: f, dist: m, bounds: c, snap: d } };}function Ee(t, e) {return t.isBound ? t.offset : e.isSnap ? e.offset : 0;}var Ce = { name: "draggable", props: ["draggable", "throttleDrag", "throttleDragRotate", "hideThrottleDragRotateLine", "startDragRotate", "edgeDraggable"], events: ["dragStart", "drag", "dragEnd", "dragGroupStart", "dragGroup", "dragGroupEnd"], requestStyle: function () {return ["left", "top", "right", "bottom"];}, requestChildStyle: function () {return ["left", "top", "right", "bottom"];}, render: function (t, e) {var i = t.props,n = i.hideThrottleDragRotateLine,r = i.throttleDragRotate,o = i.zoom,a = t.getState(),l = a.dragInfo,c = a.beforeOrigin;if (n || !r || !l) return [];var h = l.dist;if (!h[0] && !h[1]) return [];var u = wi(h),d = (0, s.Mu)(h, [0, 0]);return [e.createElement("div", { className: ii("line", "horizontal", "dragline", "dashed"), key: "dragRotateGuideline", style: { width: "".concat(u, "px"), transform: "translate(".concat(c[0], "px, ").concat(c[1], "px) rotate(").concat(d, "rad) scaleY(").concat(o, ")") } })];}, dragStart: function (t, e) {var i = e.datas,n = e.parentEvent,r = e.parentGesto,s = t.state,o = s.gestos,a = s.style;if (o.draggable) return !1;o.draggable = r || t.targetGesto, i.datas = {}, i.left = parseFloat(a.left || "") || 0, i.top = parseFloat(a.top || "") || 0, i.bottom = parseFloat(a.bottom || "") || 0, i.right = parseFloat(a.right || "") || 0, i.startValue = [0, 0], tt(t, e), ut(t, e, "translate"), function (t, e) {e.absolutePoses = Ii(t.state);}(t, i), i.prevDist = [0, 0], i.prevBeforeDist = [0, 0], i.isDrag = !1, i.deltaOffset = [0, 0];var l = Vi(t, e, y({ set: function (t) {i.startValue = t;} }, ht(t, e)));return !1 !== (n || zi(t, "onDragStart", l)) ? (i.isDrag = !0, t.state.dragInfo = { startRect: t.getRect(), dist: [0, 0] }) : (o.draggable = null, i.isPinch = !1), !!i.isDrag && l;}, drag: function (t, e) {if (e) {et(t, e, "translate");var i = e.datas,n = e.parentEvent,r = e.parentFlag,a = e.isPinch,l = e.deltaOffset,c = e.useSnap,h = e.isRequest,u = e.isGroup,d = e.parentThrottleDrag,p = e.distX,f = e.distY,g = i.isDrag,m = i.prevDist,v = i.prevBeforeDist,w = i.startValue;if (g) {l && (p += l[0], f += l[1]);var x = t.props,S = x.parentMoveable,E = u ? 0 : x.throttleDrag || d || 0,C = n ? 0 : x.throttleDragRotate || 0,k = 0,T = !1,A = !1,M = !1,_ = !1;if (!n && C > 0 && (p || f)) {var P = x.startDragRotate || 0,D = (0, s.nF)(P + 180 * (0, s.Mu)([0, 0], [p, f]) / Math.PI, C) - P,O = f * Math.abs(Math.cos((D - 90) / 180 * Math.PI)),I = wi([p * Math.abs(Math.cos(D / 180 * Math.PI)), O]);k = D * Math.PI / 180, p = I * Math.cos(k), f = I * Math.sin(k);}if (!a && !n && !r) {var F = b(we(t, p, f, C, !c && h || l, i), 2),R = F[0],L = F[1];T = R.isSnap, A = R.isBound, M = L.isSnap, _ = L.isBound, p += R.offset, f += L.offset;}var N = (0, o.tY)(rt({ datas: i, distX: p, distY: f }), w),V = (0, o.tY)(function (t) {var e = t.datas,i = b(rt({ datas: e, distX: t.distX, distY: t.distY }), 2),n = i[0],r = i[1],s = nt(e, (0, o.kN)([n, r], 4));return (0, o.Di)(s, (0, o.ez)([0, 0, 0], 4), 4);}({ datas: i, distX: p, distY: f }), w);(0, s.cC)(V, U), (0, s.cC)(N, U), C || (T || A || (V[0] = (0, s.nF)(V[0], E), N[0] = (0, s.nF)(N[0], E)), M || _ || (V[1] = (0, s.nF)(V[1], E), N[1] = (0, s.nF)(N[1], E)));var B = (0, o.Rd)(N, w),j = (0, o.Rd)(V, w),z = (0, o.Rd)(j, m),H = (0, o.Rd)(B, v);i.prevDist = j, i.prevBeforeDist = B, i.passDelta = z, i.passDist = j;var q = i.left + B[0],$ = i.top + B[1],G = i.right - B[0],W = i.bottom - B[1],K = it(i, "translate(".concat(V[0], "px, ").concat(V[1], "px)"), "translate(".concat(j[0], "px, ").concat(j[1], "px)"));if (pt(e, K), t.state.dragInfo.dist = n ? [0, 0] : j, n || S || !z.every(function (t) {return !t;}) || !H.some(function (t) {return !t;})) {var Z = t.state,Y = Z.width,X = Z.height,J = Vi(t, e, y({ transform: K, dist: j, delta: z, translate: V, beforeDist: B, beforeDelta: H, beforeTranslate: N, left: q, top: $, right: G, bottom: W, width: Y, height: X, isPinch: a }, Li({ transform: K }, e)));return !n && zi(t, "onDrag", J), J;}}}}, dragAfter: function (t, e) {var i = e.datas,n = i.deltaOffset;return !(!n[0] && !n[1]) && (i.deltaOffset = [0, 0], this.drag(t, y(y({}, e), { deltaOffset: n })));}, dragEnd: function (t, e) {var i = e.parentEvent,n = e.datas;if (t.state.dragInfo = null, n.isDrag) {n.isDrag = !1;var r = Bi(t, e, {});return !i && zi(t, "onDragEnd", r), r;}}, dragGroupStart: function (t, e) {var i,n,r = e.datas,s = e.clientX,o = e.clientY,a = this.dragStart(t, e);if (!a) return !1;var l = Pt(t, this, "dragStart", [s || 0, o || 0], e, !1, "draggable"),c = l.childEvents,h = l.eventParams,u = zi(t, "onDragGroupStart", y(y({}, a), { targets: t.props.targets, events: h }));r.isDrag = !1 !== u;var d = null !== (n = null === (i = c[0]) || void 0 === i ? void 0 : i.datas.startValue) && void 0 !== n ? n : [0, 0];return r.throttleOffset = [d[0] % 1, d[1] % 1], !!r.isDrag && a;}, dragGroup: function (t, e) {if (e.datas.isDrag) {var i = this.drag(t, y(y({}, e), { parentThrottleDrag: t.props.throttleDrag })),n = Pt(t, this, "drag", e.datas.passDelta, e, !1, "draggable").eventParams;if (i) {var r = y({ targets: t.props.targets, events: n }, i);return zi(t, "onDragGroup", r), r;}}}, dragGroupEnd: function (t, e) {var i = e.isDrag;if (e.datas.isDrag) {this.dragEnd(t, e);var n = Pt(t, this, "dragEnd", [0, 0], e, !1, "draggable").eventParams;return zi(t, "onDragGroupEnd", Bi(t, e, { targets: t.props.targets, events: n })), i;}}, request: function (t) {var e = {},i = t.getRect(),n = 0,r = 0,s = !1;return { isControl: !1, requestStart: function (t) {return s = t.useSnap, { datas: e, useSnap: s };}, request: function (t) {return "x" in t ? n = t.x - i.left : "deltaX" in t && (n += t.deltaX), "y" in t ? r = t.y - i.top : "deltaY" in t && (r += t.deltaY), { datas: e, distX: n, distY: r, useSnap: s };}, requestEnd: function () {return { datas: e, isDrag: !0, useSnap: s };} };}, unset: function (t) {t.state.gestos.draggable = null, t.state.dragInfo = null;} };function ke(t, e) {return { fixedPosition: lt(t, e), fixedDirection: e, fixedOffset: [0, 0] };}function Te(t, e) {var i = t.allMatrix,n = t.is3d,r = t.width,s = t.height,o = n ? 4 : 3,a = function (t, e, i) {return [e ? t[0] / (e / 2) - 1 : 0, i ? t[1] / (i / 2) - 1 : 0];}(e, r, s);return { fixedPosition: mi(i, e, o), fixedDirection: a, fixedOffset: [r ? 0 : e[0], s ? 0 : e[1]] };}var Ae = en("resizable"),Me = { name: "resizable", ableGroup: "size", canPinch: !0, props: ["resizable", "throttleResize", "renderDirections", "displayAroundControls", "keepRatio", "resizeFormat", "keepRatioFinally", "edge", "checkResizableError"], events: ["resizeStart", "beforeResize", "resize", "resizeEnd", "resizeGroupStart", "beforeResizeGroup", "resizeGroup", "resizeGroupEnd"], render: Nt("resizable"), dragControlCondition: Ae, viewClassName: tn("resizable"), dragControlStart: function (t, e) {var i,n = e.inputEvent,r = e.isPinch,o = e.isGroup,a = e.parentDirection,l = e.parentGesto,c = e.datas,h = e.parentFixedDirection,u = e.parentEvent,d = Pi(a, r, n, c),p = t.state,f = p.target,g = p.width,m = p.height,v = p.gestos;if (!d || !f) return !1;if (v.resizable) return !1;v.resizable = l || t.controlGesto, !r && tt(t, e), c.datas = {}, c.direction = d, c.startOffsetWidth = g, c.startOffsetHeight = m, c.prevWidth = 0, c.prevHeight = 0, c.minSize = [0, 0], c.startWidth = p.inlineCSSWidth || p.cssWidth, c.startHeight = p.inlineCSSHeight || p.cssHeight, c.maxSize = [1 / 0, 1 / 0], o || (c.minSize = [p.minOffsetWidth, p.minOffsetHeight], c.maxSize = [p.maxOffsetWidth, p.maxOffsetHeight]);var y = t.props.transformOrigin || "% %";function w(t) {c.ratio = t && isFinite(t) ? t : 0;}function x(t) {var e = ke(c.startPositions, t);c.fixedDirection = e.fixedDirection, c.fixedPosition = e.fixedPosition, c.fixedOffset = e.fixedOffset;}function S(e) {var i = Te(t.state, e);c.fixedDirection = i.fixedDirection, c.fixedPosition = i.fixedPosition, c.fixedOffset = i.fixedOffset;}function E(t) {c.minSize = [(0, s.jc)("".concat(t[0]), 0) || 0, (0, s.jc)("".concat(t[1]), 0) || 0];}function C(t) {var e = [t[0] || 1 / 0, t[1] || 1 / 0];(0, s.Et)(e[0]) && !isFinite(e[0]) || (e[0] = (0, s.jc)("".concat(e[0]), 0) || 1 / 0), (0, s.Et)(e[1]) && !isFinite(e[1]) || (e[1] = (0, s.jc)("".concat(e[1]), 0) || 1 / 0), c.maxSize = e;}c.transformOrigin = y && (0, s.Kg)(y) ? y.split(" ") : y, c.startOffsetMatrix = p.offsetMatrix, c.startTransformOrigin = p.transformOrigin, c.isWidth = null !== (i = null == e ? void 0 : e.parentIsWidth) && void 0 !== i ? i : !d[0] && !d[1] || d[0] || !d[1], c.startPositions = Ii(t.state), w(g / m), x(h || [-d[0], -d[1]]), c.setFixedDirection = x, c.setFixedPosition = S, c.setMin = E, c.setMax = C;var k = Vi(t, e, { direction: d, startRatio: c.ratio, set: function (t) {var e = b(t, 2),i = e[0],n = e[1];c.startWidth = i, c.startHeight = n;}, setMin: E, setMax: C, setRatio: w, setFixedDirection: x, setFixedPosition: S, setOrigin: function (t) {c.transformOrigin = t;}, dragStart: Ce.dragStart(t, new X().dragStart([0, 0], e)) }),T = u || zi(t, "onResizeStart", k);return c.startFixedDirection = c.fixedDirection, c.startFixedPosition = c.fixedPosition, !1 !== T && (c.isResize = !0, t.state.snapRenderInfo = { request: e.isRequest, direction: d }), !!c.isResize && k;}, dragControl: function (t, e) {var i,n = e.datas,r = e.parentFlag,l = e.isPinch,c = e.parentKeepRatio,h = e.dragClient,u = e.parentDist,d = e.useSnap,p = e.isRequest,f = e.isGroup,g = e.parentEvent,m = e.resolveMatrix,v = n.isResize,w = n.transformOrigin,x = n.startWidth,S = n.startHeight,E = n.prevWidth,C = n.prevHeight,k = n.minSize,T = n.maxSize,A = n.ratio,M = n.startOffsetWidth,_ = n.startOffsetHeight,P = n.isWidth;if (v) {if (m) {var D = t.state.is3d,O = n.startOffsetMatrix,I = n.startTransformOrigin,F = D ? 4 : 3,R = (0, a.yV)(gt(e)),L = Math.sqrt(R.length);F !== L && (R = (0, o._C)(R, L, F));var N = ct(O, R, I, F),V = vi(N, M, _, F);n.startPositions = V, n.nextTargetMatrix = R, n.nextAllMatrix = N;}var B = Ci(t.props, "resizable"),j = B.resizeFormat,z = B.throttleResize,H = void 0 === z ? r ? 0 : 1 : z,q = B.parentMoveable,$ = B.keepRatioFinally,G = n.direction,W = G,K = 0,Z = 0;G[0] || G[1] || (W = [1, 1]);var X = A && (null != c ? c : B.keepRatio) || !1,J = b(pt(), 2),Q = J[0],tt = J[1];g || (n.setFixedDirection(n.fixedDirection), zi(t, "onBeforeResize", Vi(t, e, { startFixedDirection: n.startFixedDirection, startFixedPosition: n.startFixedPosition, setFixedDirection: function (t) {var e;return n.setFixedDirection(t), e = b(pt(), 2), Q = e[0], tt = e[1], [Q, tt];}, setFixedPosition: function (t) {var e;return n.setFixedPosition(t), e = b(pt(), 2), Q = e[0], tt = e[1], [Q, tt];}, boundingWidth: Q, boundingHeight: tt, setSize: function (t) {var e;e = b(t, 2), Q = e[0], tt = e[1];} }, !0)));var et = h;h || (et = !r && l ? function (t) {return lt(Ii(t.state), [0, 0]);}(t) : n.fixedPosition);var it = [0, 0];if (l || (it = function (t, e, i, n, r, s, o) {if (!Zt(t, "resizable")) return [0, 0];var a = o.fixedDirection,l = o.nextAllMatrix,c = t.state,h = c.allMatrix,u = c.is3d;return Ke(t, function (t, n) {return $e(l || h, e + t, i + n, a, r, u);}, e, i, n, r, s, o);}(t, Q, tt, G, et, !d && p, n)), u && (!u[0] && (it[0] = 0), !u[1] && (it[1] = 0)), X) {W[0] && W[1] && it[0] && it[1] && (pn(it[0]) > pn(it[1]) ? it[1] = 0 : it[0] = 0);var nt = !it[0] && !it[1];nt && ft(), W[0] && !W[1] || it[0] && !it[1] || nt && P ? (Q += it[0], tt = Q / A) : (!W[0] && W[1] || !it[0] && it[1] || nt && !P) && (tt += it[1], Q = tt * A);} else Q += it[0], tt += it[1], Q = Math.max(0, Q), tt = Math.max(0, tt);i = b((0, s.u0)([Q, tt], k, T, !!X && A), 2), Q = i[0], tt = i[1], ft(), X && (f || $) && (P ? tt = Q / A : Q = tt * A);var rt = [(K = Q - M) - E, (Z = tt - _) - C];n.prevWidth = K, n.prevHeight = Z;var st = function (t, e, i, n, r, a) {var l = t.props.groupable,c = t.state,h = c.transformOrigin,u = c.offsetMatrix,d = c.is3d,p = c.width,f = c.height,g = c.left,m = c.top,v = a.fixedDirection,y = a.nextTargetMatrix || c.targetMatrix,b = d ? 4 : 3,w = function (t, e, i, n, r, o) {return void 0 === n && (n = e), void 0 === r && (r = i), void 0 === o && (o = [0, 0]), t ? t.map(function (t, a) {var l = (0, s.hg)(t),c = l.value,h = l.unit,u = a ? r : n,d = a ? i : e;return "%" === t || isNaN(c) ? d * (u ? o[a] / u : 0) : "%" !== h ? c : d * c / 100;}) : o;}(r, e, i, p, f, h),x = l ? g : 0,S = l ? m : 0,E = function (t, e, i, n, r, s) {var o = lt(vi(e, i, n, r), s);return [t[0] - o[0], t[1] - o[1]];}(n, ct(u, y, w, b), e, i, b, v);return (0, o.Rd)(E, [x, S]);}(t, Q, tt, et, w, n);if (q || !rt.every(function (t) {return !t;}) || !st.every(function (t) {return !t;})) {var ot = Ce.drag(t, Y(e, t.state, st, !!l, !1, "draggable")),at = ot.transform,ht = x + K,ut = S + Z,dt = Vi(t, e, y({ width: ht, height: ut, offsetWidth: Math.round(Q), offsetHeight: Math.round(tt), startRatio: A, boundingWidth: Q, boundingHeight: tt, direction: G, dist: [K, Z], delta: rt, isPinch: !!l, drag: ot }, Ni({ style: { width: "".concat(ht, "px"), height: "".concat(ut, "px") }, transform: at }, ot, e)));return !g && zi(t, "onResize", dt), dt;}}function pt() {var t = n.fixedDirection,i = an(W, X, n, e);K = i.distWidth, Z = i.distHeight;var r = W[0] - t[0] || X ? Math.max(M + K, U) : M,s = W[1] - t[1] || X ? Math.max(_ + Z, U) : _;return X && M && _ && (P ? s = r / A : r = s * A), [r, s];}function ft() {var t;j && (t = b(j([Q, tt]), 2), Q = t[0], tt = t[1]), Q = (0, s.nF)(Q, H), tt = (0, s.nF)(tt, H);}}, dragControlAfter: function (t, e) {var i = e.datas,n = i.isResize,r = i.startOffsetWidth,s = i.startOffsetHeight,o = i.prevWidth,a = i.prevHeight;if (n && !1 !== t.props.checkResizableError) {var l = t.state,c = l.width - (r + o),h = l.height - (s + a),u = pn(c) > 3,d = pn(h) > 3;return u && (i.startWidth += c, i.startOffsetWidth += c, i.prevWidth += c), d && (i.startHeight += h, i.startOffsetHeight += h, i.prevHeight += h), u || d ? this.dragControl(t, e) : void 0;}}, dragControlEnd: function (t, e) {var i = e.datas,n = e.parentEvent;if (i.isResize) {i.isResize = !1;var r = Bi(t, e, {});return !n && zi(t, "onResizeEnd", r), r;}}, dragGroupControlCondition: Ae, dragGroupControlStart: function (t, e) {var i = e.datas,n = this.dragControlStart(t, y(y({}, e), { isGroup: !0 }));if (!n) return !1;var r = _t(t, "resizable", e),s = i.startOffsetWidth,o = i.startOffsetHeight;function a() {var t = i.minSize;r.forEach(function (e) {var i = e.datas,n = i.minSize,r = i.startOffsetWidth,a = i.startOffsetHeight,l = s * (r ? n[0] / r : 0),c = o * (a ? n[1] / a : 0);t[0] = Math.max(t[0], l), t[1] = Math.max(t[1], c);});}function l() {var t = i.maxSize;r.forEach(function (e) {var i = e.datas,n = i.maxSize,r = i.startOffsetWidth,a = i.startOffsetHeight,l = s * (r ? n[0] / r : 0),c = o * (a ? n[1] / a : 0);t[0] = Math.min(t[0], l), t[1] = Math.min(t[1], c);});}var c = Dt(t, this, "dragControlStart", e, function (e, n) {return Ot(t, e, i, n);});a(), l();var h = function (e) {n.setFixedDirection(e), c.forEach(function (n, s) {n.setFixedDirection(e), Ot(t, n.moveable, i, r[s]);});};i.setFixedDirection = h;var u = y(y({}, n), { targets: t.props.targets, events: c.map(function (t) {return y(y({}, t), { setMin: function (e) {t.setMin(e), a();}, setMax: function (e) {t.setMax(e), l();} });}), setFixedDirection: h, setMin: function (t) {n.setMin(t), a();}, setMax: function (t) {n.setMax(t), l();} }),d = zi(t, "onResizeGroupStart", u);return i.isResize = !1 !== d, !!i.isResize && n;}, dragGroupControl: function (t, e) {var i = e.datas;if (i.isResize) {var n = Ci(t.props, "resizable");ji(t, "onBeforeResize", function (i) {zi(t, "onBeforeResizeGroup", Vi(t, e, y(y({}, i), { targets: n.targets }), !0));});var r = this.dragControl(t, y(y({}, e), { isGroup: !0 }));if (r) {var s = r.boundingWidth,a = r.boundingHeight,l = r.dist,c = n.keepRatio,h = [s / (s - l[0]), a / (a - l[1])],u = i.fixedPosition,d = Dt(t, this, "dragControl", e, function (e, i) {var n = b((0, o.Di)((0, o.XI)(t.rotation / 180 * Math.PI, 3), [i.datas.originalX * h[0], i.datas.originalY * h[1], 1], 3), 2),r = n[0],s = n[1];return y(y({}, i), { parentDist: null, parentScale: h, dragClient: (0, o.tY)(u, [r, s]), parentKeepRatio: c });}),p = y({ targets: n.targets, events: d }, r);return zi(t, "onResizeGroup", p), p;}}}, dragGroupControlEnd: function (t, e) {var i = e.isDrag;if (e.datas.isResize) {this.dragControlEnd(t, e);var n = Dt(t, this, "dragControlEnd", e);return zi(t, "onResizeGroupEnd", Bi(t, e, { targets: t.props.targets, events: n })), i;}}, request: function (t) {var e = {},i = 0,n = 0,r = !1,s = t.getRect();return { isControl: !0, requestStart: function (t) {var i;return r = t.useSnap, { datas: e, parentDirection: t.direction || [1, 1], parentIsWidth: null === (i = null == t ? void 0 : t.horizontal) || void 0 === i || i, useSnap: r };}, request: function (t) {return "offsetWidth" in t ? i = t.offsetWidth - s.offsetWidth : "deltaWidth" in t && (i += t.deltaWidth), "offsetHeight" in t ? n = t.offsetHeight - s.offsetHeight : "deltaHeight" in t && (n += t.deltaHeight), { datas: e, parentDist: [i, n], parentKeepRatio: t.keepRatio, useSnap: r };}, requestEnd: function () {return { datas: e, isDrag: !0, useSnap: r };} };}, unset: function (t) {t.state.gestos.resizable = null;} };function _e(t, e, i, n, r) {var a = t.props.groupable,l = t.state,c = l.is3d ? 4 : 3,h = e.origin,u = mi(t.state.rootMatrix, (0, o.Rd)([h[0], h[1]], a ? [0, 0] : [l.left, l.top]), c),d = (0, o.tY)([r.left, r.top], u);e.startAbsoluteOrigin = d, e.prevDeg = (0, s.Mu)(d, [i, n]) / Math.PI * 180, e.defaultDeg = e.prevDeg, e.prevSnapDeg = 0, e.loop = 0, e.startDist = (0, s.l$)(d, [i, n]);}function Pe(t, e, i) {var n = i.defaultDeg,r = i.prevDeg,s = r % 360,o = Math.floor(r / 360);s < 0 && (s += 360), s > t && s > 270 && t < 90 ? ++o : s < t && s < 90 && t > 270 && --o;var a = e * (360 * o + t - n);return i.prevDeg = n + a, a;}function De(t, e, i, n) {return Pe((0, s.Mu)(n.startAbsoluteOrigin, [t, e]) / Math.PI * 180, i, n);}function Oe(t, e, i, n, r, a) {var l = t.props.throttleRotate,c = void 0 === l ? 0 : l,h = i.prevSnapDeg,u = 0,d = !1;if (a) {var p = function (t, e, i, n) {var r,a = t.props,l = null !== (r = a[Jt]) && void 0 !== r ? r : 5,c = a[Qt];if (Zt(t, "rotatable")) {var h = e.pos1,u = e.pos2,d = e.pos3,p = e.pos4,f = e.origin,g = i * Math.PI / 180,m = [h, u, d, p].map(function (t) {return (0, o.Rd)(t, f);}),v = m.map(function (t) {return (0, o.e$)(t, g);}),y = w(w([], b(function (t, e, i, n, r) {if (!t.props.bounds) return [];var o = r * Math.PI / 180,a = zt(t),l = a.left,c = a.top,h = a.right,u = a.bottom,d = l - n[0],p = h - n[0],f = c - n[1],g = u - n[1],m = { left: d, top: f, right: p, bottom: g };if (!Ht(i, m, 0)) return [];var v = [];return [[d, 0], [p, 0], [f, 1], [g, 1]].forEach(function (t) {var n = b(t, 2),r = n[0],a = n[1];i.forEach(function (t) {var i = (0, s.Mu)([0, 0], t);v.push.apply(v, w([], b(function (t, e, i) {var n = wi(t),r = Math.sqrt(n * n - e * e) || 0;return [r, -r].sort(function (e, n) {return pn(e - t[i ? 0 : 1]) - pn(n - t[i ? 0 : 1]);}).map(function (t) {return (0, s.Mu)([0, 0], i ? [t, e] : [e, t]);});}(t, r, a).map(function (t) {return o + t - i;}).filter(function (t) {return !Ht(e, m, t);}).map(function (t) {return (0, s.nF)(180 * t / Math.PI, U);})), !1));});}), v;}(t, m, v, f, i)), !1), b(function (t, e, i, n, r) {var o = t.props.innerBounds,a = r * Math.PI / 180;if (!o) return [];var l = o.left,c = o.top,h = o.width,u = o.height,d = l - n[0],p = l + h - n[0],f = c - n[1],g = c + u - n[1],m = [[d, f], [p, f], [d, g], [p, g]],v = lt(i, [0, 0]);if (!ve(i, m, v, 0)) return [];var y = [],x = m.map(function (t) {return [wi(t), (0, s.Mu)([0, 0], t)];});return [[i[0], i[1]], [i[1], i[3]], [i[3], i[2]], [i[2], i[0]]].forEach(function (t) {var i = (0, s.Mu)([0, 0], function (t) {var e = b(t, 2),i = e[0],n = e[1],r = n[0] - i[0],s = n[1] - i[1];if (!r) return [i[0], 0];if (!s) return [0, i[1]];var o = s / r,a = -o * i[0] + i[1];return [-a / (o + 1 / o), a / (o * o + 1)];}(t)),n = function (t) {var e = b(t, 2),i = e[0],n = e[1],r = n[0] - i[0],s = n[1] - i[1];if (!r) return pn(i[0]);if (!s) return pn(i[1]);var o = s / r;return pn((-o * i[0] + i[1]) / Math.sqrt(Math.pow(o, 2) + 1));}(t);y.push.apply(y, w([], b(x.filter(function (t) {var e = b(t, 1)[0];return e && n <= e;}).map(function (t) {var e = b(t, 2),r = e[0],s = e[1],o = Math.acos(r ? n / r : 0);return [a + (s + o) - i, a + (s - o) - i];}).reduce(function (t, e) {return t.push.apply(t, w([], b(e), !1)), t;}, []).filter(function (t) {return !ve(e, m, v, t);}).map(function (t) {return (0, s.nF)(180 * t / Math.PI, U);})), !1));}), y;}(t, m, v, f, i)), !1);y.sort(function (t, e) {return pn(t - i) - pn(e - i);});var x = y.length > 0;if (x) return { isSnap: x, dist: x ? y[0] : i };}if ((null == c ? void 0 : c.length) && l) {var S = c.slice().sort(function (t, e) {return Xe(t, n) - Xe(e, n);})[0];if (Xe(S, n) <= l) return { isSnap: !0, dist: i + Ye(n, S) - n };}return { isSnap: !1, dist: i };}(t, e, n, r + n);d = p.isSnap, u = r + p.dist;}d || (u = (0, s.nF)(r + n, c));var f = u - r;return i.prevSnapDeg = f, [f - h, f, u];}function Ie(t, e, i) {var n = b(e, 4),r = n[0],o = n[1],a = n[2],l = n[3];if ("none" === t) return [];if ((0, s.cy)(t)) return t.map(function (t) {return Ie(t, [r, o, a, l], i)[0];});var c = b((t || "top").split("-"), 2),h = c[0],u = c[1],d = [r, o];"left" === h ? d = [a, r] : "right" === h ? d = [o, l] : "bottom" === h && (d = [l, a]);var p = [(d[0][0] + d[1][0]) / 2, (d[0][1] + d[1][1]) / 2],f = Ti(d, i);if (u) {var g = "top" === u || "left" === u,m = "bottom" === h || "left" === h;p = d[g && !m || !g && m ? 0 : 1];}return [[p, f]];}function Fe(t, e) {if (e.isRequest) return "rotatable" === e.requestAble;var i = e.inputEvent.target;if ((0, s.nB)(i, ii("rotation-control")) || t.props.rotateAroundControls && (0, s.nB)(i, ii("around-control")) || (0, s.nB)(i, ii("control")) && (0, s.nB)(i, ii("rotatable"))) return !0;var n = t.props.rotationTarget;return !!n && rn(n, !0).some(function (t) {return !!t && (i === t || i.contains(t));});}var Re = { name: "rotatable", canPinch: !0, props: ["rotatable", "rotationPosition", "throttleRotate", "renderDirections", "rotationTarget", "rotateAroundControls", "edge", "resolveAblesWithRotatable", "displayAroundControls"], events: ["rotateStart", "beforeRotate", "rotate", "rotateEnd", "rotateGroupStart", "beforeRotateGroup", "rotateGroup", "rotateGroupEnd"], css: [".rotation {\nposition: absolute;\nheight: 40px;\nwidth: 1px;\ntransform-origin: 50% 100%;\nheight: calc(40px * var(--zoom));\ntop: auto;\nleft: 0;\nbottom: 100%;\nwill-change: transform;\n}\n.rotation .rotation-line {\ndisplay: block;\nwidth: 100%;\nheight: 100%;\ntransform-origin: 50% 50%;\n}\n.rotation .rotation-control {\nborder-color: #4af;\nborder-color: var(--moveable-color);\nbackground:#fff;\ncursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\ncursor: alias;\n}\n.rotatable.direction.control.move {\ncursor: move;\n}\n"], viewClassName: function (t) {return t.isDragging("rotatable") ? ii("view-rotation-dragging") : "";}, render: function (t, e) {var i = Ci(t.props, "rotatable"),n = i.rotatable,r = i.rotationPosition,o = i.zoom,a = i.renderDirections,l = i.rotateAroundControls,c = i.resolveAblesWithRotatable,h = t.getState(),u = h.renderPoses,d = h.direction;if (!n) return null;var p = Ie(r, u, d),f = [];if (p.forEach(function (t, i) {var n = b(t, 2),r = n[0],s = n[1];f.push(e.createElement("div", { key: "rotation".concat(i), className: ii("rotation"), style: { transform: "translate(-50%) translate(".concat(r[0], "px, ").concat(r[1], "px) rotate(").concat(s, "rad)") } }, e.createElement("div", { className: ii("line rotation-line"), style: { transform: "scaleX(".concat(o, ")") } }), e.createElement("div", { className: ii("control rotation-control"), style: { transform: "translate(0.5px) scale(".concat(o, ")") } })));}), a) {var g = (0, s.xD)(c || {}),m = {};g.forEach(function (t) {c[t].forEach(function (e) {m[e] = t;});});var v = [];(0, s.cy)(a) && (v = a.map(function (t) {var e = m[t];return { data: e ? { resolve: e } : {}, classNames: e ? ["move"] : [], dir: t };})), f.push.apply(f, w([], b(It(t, "rotatable", v, e)), !1));}return l && f.push.apply(f, w([], b(Bt(t, e)), !1)), f;}, dragControlCondition: Fe, dragControlStart: function (t, e) {var i,n,r = e.datas,a = e.clientX,l = e.clientY,c = e.parentRotate,h = e.parentFlag,u = e.isPinch,d = e.isRequest,p = t.state,f = p.target,g = p.left,m = p.top,v = p.direction,w = p.beforeDirection,x = p.targetTransform,S = p.moveableClientRect,E = p.offsetMatrix,C = p.targetMatrix,k = p.allMatrix,T = p.width,A = p.height;if (!d && !f) return !1;var M = t.getRect();r.rect = M, r.transform = x, r.left = g, r.top = m;var _ = function (e) {var i = Te(t.state, e);r.fixedDirection = i.fixedDirection, r.fixedOffset = i.fixedOffset, r.fixedPosition = i.fixedPosition, z && z.setFixedPosition(e);},P = function (e) {var i = function (t, e) {var i = t.allMatrix,n = t.is3d,r = t.width,s = t.height,o = n ? 4 : 3;return { fixedPosition: mi(i, [r / 2 * (1 + e[0]), s / 2 * (1 + e[1])], o), fixedDirection: e, fixedOffset: [0, 0] };}(t.state, e);r.fixedDirection = i.fixedDirection, r.fixedOffset = i.fixedOffset, r.fixedPosition = i.fixedPosition, z && z.setFixedDirection(e);},D = a,O = l;if (d || u || h) {var I = c || 0;r.beforeInfo = { origin: M.beforeOrigin, prevDeg: I, defaultDeg: I, prevSnapDeg: 0, startDist: 0 }, r.afterInfo = y(y({}, r.beforeInfo), { origin: M.origin }), r.absoluteInfo = y(y({}, r.beforeInfo), { origin: M.origin, startValue: I });} else {var F = null === (n = e.inputEvent) || void 0 === n ? void 0 : n.target;if (F) {var R = F.getAttribute("data-direction") || "",L = G[R];if (L) {r.isControl = !0, r.isAroundControl = (0, s.nB)(F, ii("around-control")), r.controlDirection = L;var N = F.getAttribute("data-resolve");N && (r.resolveAble = N);var V = function (t, e, i) {var n = 16 === t.length ? 4 : 3,r = e.map(function (e) {return mi(t, e, n);}),s = i.left,o = i.top;return r.map(function (t) {return [t[0] + s, t[1] + o];});}(p.rootMatrix, p.renderPoses, S);i = b(lt(V, L), 2), D = i[0], O = i[1];}}r.beforeInfo = { origin: M.beforeOrigin }, r.afterInfo = { origin: M.origin }, r.absoluteInfo = { origin: M.origin, startValue: M.rotation };var B = _;_ = function (e) {var i = p.is3d ? 4 : 3,n = b((0, o.tY)((0, o.$z)(C, i), e), 2),s = n[0],a = n[1],l = (0, o.Di)(E, (0, o.ez)([s, a], i)),c = (0, o.Di)(k, (0, o.ez)([e[0], e[1]], i));B(e);var h = p.posDelta;r.beforeInfo.origin = (0, o.Rd)(l, h), r.afterInfo.origin = (0, o.Rd)(c, h), r.absoluteInfo.origin = (0, o.Rd)(c, h), _e(t, r.beforeInfo, D, O, S), _e(t, r.afterInfo, D, O, S), _e(t, r.absoluteInfo, D, O, S);}, P = function (t) {var e = lt([[0, 0], [T, 0], [0, A], [T, A]], t);_(e);};}r.startClientX = D, r.startClientY = O, r.direction = v, r.beforeDirection = w, r.startValue = 0, r.datas = {}, ut(t, e, "rotate");var j = !1,z = !1;r.isControl && r.resolveAble && "resizable" === r.resolveAble && (z = Me.dragControlStart(t, y(y({}, new X("resizable").dragStart([0, 0], e)), { parentPosition: r.controlPosition, parentFixedPosition: r.fixedPosition }))), z || (j = Ce.dragStart(t, new X().dragStart([0, 0], e))), _(function (t) {var e = t.props,i = e.groupable,n = e.svgOrigin,r = t.getState(),s = r.offsetWidth,o = r.offsetHeight,a = r.svg,l = r.transformOrigin;return !i && a && n ? cn(n, s, o) : l;}(t));var U = Vi(t, e, y(y({ set: function (t) {r.startValue = t * Math.PI / 180;}, setFixedDirection: P, setFixedPosition: _ }, ht(t, e)), { dragStart: j, resizeStart: z })),H = zi(t, "onRotateStart", U);return r.isRotate = !1 !== H, p.snapRenderInfo = { request: e.isRequest }, !!r.isRotate && U;}, dragControl: function (t, e) {var i,n,r,a = e.datas,l = e.clientDistX,c = e.clientDistY,h = e.parentRotate,u = e.parentFlag,d = e.isPinch,p = e.groupDelta,f = e.resolveMatrix,g = a.beforeDirection,m = a.beforeInfo,v = a.afterInfo,w = a.absoluteInfo,x = a.isRotate,S = a.startValue,E = a.rect,C = a.startClientX,k = a.startClientY;if (x) {et(t, e, "rotate");var T,A,M,_,P,D,O,I,F,R = function (t) {return J(t.datas.beforeTransform, [50, 50], 100, 100).direction;}(e),L = g * R,N = t.props.parentMoveable,V = 180 / Math.PI * S,B = w.startValue,j = !1,z = C + l,U = k + c;if (!u && "parentDist" in e) {var H = e.parentDist;A = H, P = H, I = H;} else d || u ? (A = Pe(h, g, m), P = Pe(h, L, v), I = Pe(h, L, w)) : (A = De(z, U, g, m), P = De(z, U, L, v), I = De(z, U, L, w), j = !0);if (zi(t, "onBeforeRotate", Vi(t, e, { beforeRotation: V + A, rotation: V + P, absoluteRotation: B + I, setRotation: function (t) {A = P = t - V, I = P;} }, !0)), T = (i = b(Oe(t, E, m, A, V, j), 3))[0], A = i[1], M = i[2], _ = (n = b(Oe(t, E, v, P, V, j), 3))[0], P = n[1], D = n[2], O = (r = b(Oe(t, E, w, I, B, j), 3))[0], I = r[1], F = r[2], O || _ || T || N || f) {var q = it(a, "rotate(".concat(D, "deg)"), "rotate(".concat(P, "deg)"));f && (a.fixedPosition = bt(t, a.targetAllTransform, a.fixedDirection, a.fixedOffset, a));var $ = function (t, e, i) {var n = i.fixedDirection,r = i.fixedPosition,s = i.fixedOffset;return wt(t, "rotate(".concat(e, "deg)"), n, r, s, i);}(t, P, a),G = (0, o.Rd)((0, o.tY)(p || [0, 0], $), a.prevInverseDist || [0, 0]);a.prevInverseDist = $, a.requestValue = null;var W = yt(t, q, G, d, e),K = W,Z = (0, s.l$)([z, U], w.startAbsoluteOrigin) - w.startDist,X = void 0;if ("resizable" === a.resolveAble) {var Q = Me.dragControl(t, y(y({}, Y(e, t.state, [e.deltaX, e.deltaY], !!d, !1, "resizable")), { resolveMatrix: !0, parentDistance: Z }));Q && (X = Q, K = Ni(K, Q, e));}var tt = Vi(t, e, y(y({ delta: _, dist: P, rotate: D, rotation: D, beforeDist: A, beforeDelta: T, beforeRotate: M, beforeRotation: M, absoluteDist: I, absoluteDelta: O, absoluteRotate: F, absoluteRotation: F, isPinch: !!d, resize: X }, W), K));return zi(t, "onRotate", tt), tt;}}}, dragControlEnd: function (t, e) {var i = e.datas;if (i.isRotate) {i.isRotate = !1;var n = Bi(t, e, {});return zi(t, "onRotateEnd", n), n;}}, dragGroupControlCondition: Fe, dragGroupControlStart: function (t, e) {var i = e.datas,n = t.state,r = n.left,s = n.top,a = n.beforeOrigin,l = this.dragControlStart(t, e);if (!l) return !1;l.set(i.beforeDirection * t.rotation);var c = Dt(t, this, "dragControlStart", e, function (t, e) {var i = t.state,n = i.left,l = i.top,c = i.beforeOrigin,h = (0, o.tY)((0, o.Rd)([n, l], [r, s]), (0, o.Rd)(c, a));return e.datas.startGroupClient = h, e.datas.groupClient = h, y(y({}, e), { parentRotate: 0 });}),h = zi(t, "onRotateGroupStart", y(y({}, l), { targets: t.props.targets, events: c }));return i.isRotate = !1 !== h, !!i.isRotate && l;}, dragGroupControl: function (t, e) {var i = e.datas;if (i.isRotate) {ji(t, "onBeforeRotate", function (i) {zi(t, "onBeforeRotateGroup", Vi(t, e, y(y({}, i), { targets: t.props.targets }), !0));});var n = this.dragControl(t, e);if (n) {var r = i.beforeDirection,s = n.beforeDist,a = s / 180 * Math.PI,l = Dt(t, this, "dragControl", e, function (t, e) {var i = e.datas.startGroupClient,n = b(e.datas.groupClient, 2),l = n[0],c = n[1],h = b((0, o.e$)(i, a * r), 2),u = h[0],d = h[1],p = [u - l, d - c];return e.datas.groupClient = [u, d], y(y({}, e), { parentRotate: s, groupDelta: p });});t.rotation = r * n.beforeRotation;var c = y({ targets: t.props.targets, events: l, set: function (e) {t.rotation = e;}, setGroupRotation: function (e) {t.rotation = e;} }, n);return zi(t, "onRotateGroup", c), c;}}}, dragGroupControlEnd: function (t, e) {var i = e.isDrag;if (e.datas.isRotate) {this.dragControlEnd(t, e);var n = Dt(t, this, "dragControlEnd", e);return zi(t, "onRotateGroupEnd", Bi(t, e, { targets: t.props.targets, events: n })), i;}}, request: function (t) {var e = {},i = 0,n = t.getRotation();return { isControl: !0, requestStart: function () {return { datas: e };}, request: function (t) {return "deltaRotate" in t ? i += t.deltaRotate : "rotate" in t && (i = t.rotate - n), { datas: e, parentDist: i };}, requestEnd: function () {return { datas: e, isDrag: !0 };} };} };function Le(t, e) {return function (t, e) {var i,n = t.direction,r = t.classNames,s = t.size,o = t.pos,a = t.zoom,l = t.key,c = "horizontal" === n,h = c ? "Y" : "X";return e.createElement("div", { key: l, className: r.join(" "), style: (i = {}, i[c ? "width" : "height"] = "".concat(s), i.transform = "translate(".concat(o[0], ", ").concat(o[1], ") translate").concat(h, "(-50%) scale").concat(h, "(").concat(a, ")"), i) });}(y(y({}, t), { classNames: w([ii("line", "guideline", t.direction)], b(t.classNames), !1).filter(function (t) {return t;}), size: t.size || "".concat(t.sizeValue, "px"), pos: t.pos || t.posValue.map(function (t) {return "".concat((0, s.nF)(t, .1), "px");}) }), e);}function Ne(t, e, i, n, r, s, o, a) {var l = t.props.zoom;return i.map(function (t, i) {var c = t.type,h = t.pos,u = [0, 0];return u[o] = n, u[o ? 0 : 1] = -r + h, Le({ key: "".concat(e, "TargetGuideline").concat(i), classNames: [ii("target", "bold", c)], posValue: u, sizeValue: s, zoom: l, direction: e }, a);});}function Ve(t, e, i, n, r, s) {var o = t.props,a = o.zoom,l = o.isDisplayInnerSnapDigit,c = "horizontal" === e ? Wt : Kt,h = r[c.start],u = r[c.end];return i.filter(function (t) {var e = t.hide,i = t.elementRect;if (e) return !1;if (l && i) {var n = i.rect;if (n[c.start] <= h && u <= n[c.end]) return !1;}return !0;}).map(function (t, i) {var r = t.pos,o = t.size,l = t.element,c = t.className,h = [-n[0] + r[0], -n[1] + r[1]];return Le({ key: "".concat(e, "-default-guideline-").concat(i), classNames: l ? [ii("bold"), c] : [ii("normal"), c], direction: e, posValue: h, sizeValue: o, zoom: a }, s);});}function Be(t, e, i, n, r, s, o, a) {var l,c = t.props,h = c.snapDigit,u = void 0 === h ? 0 : h,d = c.isDisplaySnapDigit,p = void 0 === d || d,f = c.snapDistFormat,g = void 0 === f ? function (t, e) {return t;} : f,m = c.zoom,v = "horizontal" === e ? "X" : "Y",y = "vertical" === e ? "height" : "width",b = Math.abs(r),w = p ? parseFloat(b.toFixed(u)) : 0;return a.createElement("div", { key: "".concat(e, "-").concat(i, "-guideline-").concat(n), className: ii("guideline-group", e), style: (l = { left: "".concat(s[0], "px"), top: "".concat(s[1], "px") }, l[y] = "".concat(b, "px"), l) }, Le({ direction: e, classNames: [ii(i), o], size: "100%", posValue: [0, 0], sizeValue: b, zoom: m }, a), a.createElement("div", { className: ii("size-value", "gap"), style: { transform: "translate".concat(v, "(-50%) scale(").concat(m, ")") } }, w > 0 ? g(w, e) : ""));}function je(t) {var e,i,n = t.state,r = n.containerClientRect,o = n.hasFixed,a = r.overflow,c = r.scrollHeight,h = r.scrollWidth,u = r.clientHeight,d = r.clientWidth,p = r.clientLeft,f = r.clientTop,g = t.props,m = g.snapGap,v = void 0 === m || m,x = g.verticalGuidelines,S = g.horizontalGuidelines,E = g.snapThreshold,C = void 0 === E ? 5 : E,k = g.maxSnapElementGuidelineDistance,T = void 0 === k ? 1 / 0 : k,A = g.isDisplayGridGuidelines,M = yi(Ii(t.state)),_ = M.top,P = M.left,D = M.bottom,O = M.right,I = { top: _, left: P, bottom: D, right: O, center: (P + O) / 2, middle: (_ + D) / 2 },F = function (t) {var e = t.state,i = t.props.elementGuidelines,n = void 0 === i ? [] : i;if (!n.length) return e.elementRects = [], [];var r = (e.elementRects || []).filter(function (t) {return !t.refresh;}),o = n.map(function (t) {return (0, s.Gv)(t) && "element" in t ? y(y({}, t), { element: nn(t.element, !0) }) : { element: nn(t, !0) };}).filter(function (t) {return t.element;}),a = (0, l.U)(r.map(function (t) {return t.element;}), o.map(function (t) {return t.element;})),c = a.maintained,h = a.added,u = [];c.forEach(function (t) {var e = b(t, 2),i = e[0],n = e[1];u[n] = r[i];}), function (t, e) {if (!e.length) return [];var i = t.props.groupable,n = t.state,r = n.containerClientRect,s = n.rootMatrix,o = n.is3d,a = n.offsetDelta,l = o ? 4 : 3,c = b(function (t, e, i) {var n = mi(t, [e.clientLeft, e.clientTop], i);return [e.left + n[0], e.top + n[1]];}(s, r, l), 2),h = c[0],u = c[1],d = i ? 0 : a[0],p = i ? 0 : a[1];return e.map(function (t) {var e = t.element.getBoundingClientRect(),i = e.left - h - d,n = e.top - u - p,r = n + e.height,o = i + e.width,a = b(Zi(s, [i, n], l), 2),c = a[0],f = a[1],g = b(Zi(s, [o, r], l), 2),m = g[0],v = g[1];return y(y({}, t), { rect: { left: c, right: m, top: f, bottom: v, center: (c + m) / 2, middle: (f + v) / 2 } });});}(t, h.map(function (t) {return o[t];})).map(function (t, e) {u[h[e]] = t;}), e.elementRects = u;var d = Yt(t.props.elementSnapDirections),p = [];return u.forEach(function (t) {var e = t.element,i = t.top,n = void 0 === i ? d.top : i,r = t.left,o = void 0 === r ? d.left : r,a = t.right,l = void 0 === a ? d.right : a,c = t.bottom,h = void 0 === c ? d.bottom : c,u = t.center,f = void 0 === u ? d.center : u,g = t.middle,m = void 0 === g ? d.middle : g,v = t.className,y = t.rect,b = Xt({ top: n, right: l, left: o, bottom: h, center: f, middle: m }, y),w = b.horizontal,x = b.vertical,S = b.horizontalNames,E = b.verticalNames,C = y.top,k = y.left,T = y.right - k,A = y.bottom - C,M = [T, A];x.forEach(function (i, n) {p.push({ type: "vertical", element: e, pos: [(0, s.nF)(i, .1), C], size: A, sizes: M, className: v, elementRect: t, elementDirection: Gt[E[n]] || E[n], direction: "" });}), w.forEach(function (i, n) {p.push({ type: "horizontal", element: e, pos: [k, (0, s.nF)(i, .1)], size: T, sizes: M, className: v, elementRect: t, elementDirection: Gt[S[n]] || S[n], direction: "" });});}), p;}(t),R = w([], b(F), !1),L = (null !== (i = null === (e = n.snapThresholdInfo) || void 0 === e ? void 0 : e.multiples) && void 0 !== i ? i : [1, 1]).map(function (t) {return t * C;});v && R.push.apply(R, w([], b(function (t, e, i) {var n = t.props,r = n.maxSnapElementGuidelineDistance,s = void 0 === r ? 1 / 0 : r,o = n.maxSnapElementGapDistance,a = void 0 === o ? 1 / 0 : o,l = t.state.elementRects,c = [];return [["vertical", Wt, Kt], ["horizontal", Kt, Wt]].forEach(function (t) {var n = b(t, 3),r = n[0],o = n[1],h = n[2],u = e[o.start],d = e[o.end],p = e[o.center],f = e[h.start],g = e[h.end],m = { left: i[0], top: i[1] };function v(t) {var e = t.rect,i = m[o.start];return e[o.end] < u + i ? u - e[o.end] : d - i < e[o.start] ? e[o.start] - d : -1;}var y = l.filter(function (t) {var e = t.rect;return !(e[h.start] > g || e[h.end] < f) && v(t) > 0;}).sort(function (t, e) {return v(t) - v(e);}),w = [];y.forEach(function (t) {y.forEach(function (e) {if (t !== e) {var i = t.rect,n = e.rect,r = i[h.start],s = i[h.end],o = n[h.start];r > n[h.end] || o > s || w.push([t, e]);}});}), w.forEach(function (t) {var i = b(t, 2),n = i[0],l = i[1],h = n.rect,f = l.rect,g = h[o.start],v = h[o.end],y = f[o.start],w = f[o.end],x = m[o.start],S = 0,E = 0,C = !1,k = !1,T = !1;if (v <= u && d <= y) {if (k = !0, pn((E = v + (S = (y - v - (d - u)) / 2) + (d - u) / 2) - p) > x) return;} else if (v < y && w < u + x) {if (C = !0, pn((E = w + (S = y - v)) - u) > x) return;} else {if (!(v < y && d - x < g)) return;if (T = !0, pn((E = g - (S = y - v)) - d) > x) return;}S && ze(e, f, r, s) && (S > a || c.push({ type: r, pos: "vertical" === r ? [E, 0] : [0, E], element: l.element, size: 0, className: l.className, isStart: C, isCenter: k, isEnd: T, gap: S, hide: !0, gapRects: [n, l], direction: "", elementDirection: "" }));});}), c;}(t, I, L)), !1));var N = y({}, n.snapOffset || { left: 0, top: 0, bottom: 0, right: 0 });if (R.push.apply(R, w([], b(function (t, e, i, n, r, o, a) {void 0 === n && (n = 0), void 0 === r && (r = 0);var l = t.props,c = t.state,h = l.snapGridWidth,u = void 0 === h ? 0 : h,d = l.snapGridHeight,p = void 0 === d ? 0 : d,f = [],g = o.left,m = o.top,v = [0, 0];!function (t, e, i, n) {var r,o,a = t.props,l = t.state,c = a.snapGridAll,h = a.snapGridWidth,u = void 0 === h ? 0 : h,d = a.snapGridHeight,p = void 0 === d ? 0 : d,f = l.snapRenderInfo,g = f && ((null === (r = f.direction) || void 0 === r ? void 0 : r[0]) || (null === (o = f.direction) || void 0 === o ? void 0 : o[1])),m = t.moveables;if (c && m && g && (u || p)) {if (l.snapThresholdInfo) return;l.snapThresholdInfo = { multiples: [1, 1], offset: [0, 0] };var v = t.getRect(),y = v.children,b = f.direction;if (y) {var w = b.map(function (t, r) {var o = 0 === r ? { snapSize: u, posName: "left", sizeName: "width", clientOffset: n.left - e } : { snapSize: p, posName: "top", sizeName: "height", clientOffset: n.top - i },a = o.snapSize,l = o.posName,c = o.sizeName,h = o.clientOffset;if (!a) return { dir: t, multiple: 1, snapSize: a, snapOffset: 0 };var d = v[c],f = v[l],g = (0, s.Ct)(y.map(function (t) {return [t[l] - f, t[c], d - t[c] - t[l] + f];})).filter(function (t) {return t;}).sort(function (t, e) {return t - e;}),m = g[0],b = g.map(function (t) {return (0, s.nF)(t / m, .1) * a;}),w = 1,x = (0, s.nF)(d / m, .1);for (w = 1; w <= 10 && !b.every(function (t) {return t * w % 1 == 0;}); ++w);var S = (1 - t) / 2,E = (0, s.Om)(f - h, f - h + d, S, 1 - S);return { multiple: x * w, dir: t, snapSize: a, snapOffset: Math.round(E / a) };}),x = w.map(function (t) {return t.multiple || 1;});l.snapThresholdInfo.multiples = x, l.snapThresholdInfo.offset = w.map(function (t) {return t.snapOffset;}), w.forEach(function (t, e) {t.snapSize;});}} else l.snapThresholdInfo = null;}(t, n, r, o);var y = c.snapThresholdInfo,b = u,w = p;if (y && (u *= y.multiples[0] || 1, p *= y.multiples[1] || 1, v = y.offset), p) {for (var x = function (t) {f.push({ type: "horizontal", pos: [g, (0, s.nF)(v[1] * w + t - r + m, .1)], className: ii("grid-guideline"), size: e, hide: !a, direction: "", grid: !0 });}, S = 0; S <= 2 * i; S += p) x(S);for (S = -p; S >= -i; S -= p) x(S);}if (u) {for (x = function (t) {f.push({ type: "vertical", pos: [(0, s.nF)(v[0] * b + t - n + g, .1), m], className: ii("grid-guideline"), size: i, hide: !a, direction: "", grid: !0 });}, S = 0; S <= 2 * e; S += u) x(S);for (S = -u; S >= -e; S -= u) x(S);}return f;}(t, a ? h : d, a ? c : u, p, f, N, A)), !1)), o) {var V = r.left,B = r.top;N.left += V, N.top += B, N.right += V, N.bottom += B;}return R.push.apply(R, w([], b(He(S || !1, x || !1, a ? h : d, a ? c : u, p, f, N)), !1)), R = R.filter(function (t) {var e = t.element,i = t.elementRect,n = t.type;if (!e || !i) return !0;var r = i.rect;return ze(I, r, n, T);}), R;}function ze(t, e, i, n) {return "horizontal" === i ? pn(t.right - e.left) <= n || pn(t.left - e.right) <= n || t.left <= e.right && e.left <= t.right : "vertical" !== i || pn(t.bottom - e.top) <= n || pn(t.top - e.bottom) <= n || t.top <= e.bottom && e.top <= t.bottom;}function Ue(t, e) {return t ? t.map(function (t) {var i = (0, s.Gv)(t) ? t : { pos: t },n = i.pos;return (0, s.Et)(n) ? i : y(y({}, i), { pos: (0, s.jc)(n, e) });}) : [];}function He(t, e, i, n, r, o, a) {void 0 === r && (r = 0), void 0 === o && (o = 0), void 0 === a && (a = { left: 0, top: 0, right: 0, bottom: 0 });var l = [],c = a.left,h = a.top,u = a.bottom,d = i + a.right - c,p = n + u - h;return Ue(t, p).forEach(function (t) {l.push({ type: "horizontal", pos: [c, (0, s.nF)(t.pos - o + h, .1)], size: d, className: t.className, direction: "" });}), Ue(e, d).forEach(function (t) {l.push({ type: "vertical", pos: [(0, s.nF)(t.pos - r + c, .1), h], size: p, className: t.className, direction: "" });}), l;}function qe(t) {var e = t.state,i = e.container,n = t.props.snapContainer || i;if (e.snapContainer === n && e.guidelines && e.guidelines.length) return !1;var r = e.containerClientRect,o = { left: 0, top: 0, bottom: 0, right: 0 };if (i !== n) {var a = nn(n, !0);if (a) {var l = _i(a),c = sn(e, [l.left - r.left, l.top - r.top]),h = sn(e, [l.right - r.right, l.bottom - r.bottom]);o.left = (0, s.nF)(c[0], 1e-5), o.top = (0, s.nF)(c[1], 1e-5), o.right = (0, s.nF)(h[0], 1e-5), o.bottom = (0, s.nF)(h[1], 1e-5);}}return e.snapContainer = n, e.snapOffset = o, e.guidelines = je(t), e.enableSnap = !0, !0;}function $e(t, e, i, n, r, s) {var a = vi(t, e, i, s ? 4 : 3),l = lt(a, n);return Oi(a, (0, o.Rd)(r, l));}function Ge(t) {return t ? t / pn(t) : 0;}function We(t, e, i, n, r, a) {var l = function (t, e, i) {var n = [];if (i) 1 !== pn(e[0]) || 1 !== pn(e[1]) ? n.push([e, [-1, -1]], [e, [-1, 1]], [e, [1, -1]], [e, [1, 1]]) : n.push([e, [t[0], -t[1]]], [e, [-t[0], t[1]]]), n.push([e, t]);else if (t[0] && t[1] || !t[0] && !t[1]) {var r = t[0] ? t : [1, 1];[1, -1].forEach(function (t) {[1, -1].forEach(function (i) {var s = [t * r[0], i * r[1]];e[0] === s[0] && e[1] === s[1] || n.push([e, s]);});});} else t[0] ? (1 === pn(e[0]) ? [1] : [1, -1]).forEach(function (i) {n.push([[e[0], -1], [i * t[0], -1]], [[e[0], 0], [i * t[0], 0]], [[e[0], 1], [i * t[0], 1]]);}) : t[1] && (1 === pn(e[1]) ? [1] : [1, -1]).forEach(function (i) {n.push([[-1, e[1]], [-1, i * t[1]]], [[0, e[1]], [0, i * t[1]]], [[1, e[1]], [1, i * t[1]]]);});return n;}(i, a.fixedDirection, n),c = me(t, e, i, n),h = w(w([], b(function (t, e, i, n, r, a) {return i.map(function (i) {var l = b(i, 2),c = l[0],h = l[1],u = lt(e, c),d = lt(e, h),p = n ? function (t, e, i, n) {var r = function (t, e, i) {var n = zt(t),r = n.left,s = n.top,a = n.right,l = n.bottom,c = b(i, 2),h = c[0],u = c[1],d = b((0, o.Rd)(i, e), 2),p = d[0],f = d[1];pn(p) < U && (p = 0), pn(f) < U && (f = 0);var g = f > 0,m = p > 0,v = { isBound: !1, offset: 0, pos: 0 },y = { isBound: !1, offset: 0, pos: 0 };if (0 === p && 0 === f) return { vertical: v, horizontal: y };if (0 === p) g ? l < u && (y.pos = l, y.offset = u - l) : s > u && (y.pos = s, y.offset = u - s);else if (0 === f) m ? a < h && (v.pos = a, v.offset = h - a) : r > h && (v.pos = r, v.offset = h - r);else {var w = f / p,x = i[1] - w * h,S = 0,E = 0,C = !1;m && a <= h ? (S = w * a + x, E = a, C = !0) : !m && h <= r && (S = w * r + x, E = r, C = !0), C && (S < s || S > l) && (C = !1), C || (g && l <= u ? (E = ((S = l) - x) / w, C = !0) : !g && u <= s && (E = ((S = s) - x) / w, C = !0)), C && (v.isBound = !0, v.pos = E, v.offset = h - E, y.isBound = !0, y.pos = S, y.offset = u - S);}return { vertical: v, horizontal: y };}(t, e, i),s = r.horizontal,a = r.vertical,l = n ? { horizontal: { isSnap: !1 }, vertical: { isSnap: !1 } } : function (t, e, i) {var n = b(i, 2),r = n[0],s = n[1],a = b(e, 2),l = a[0],c = a[1],h = b((0, o.Rd)(i, e), 2),u = h[0],d = h[1],p = d > 0,f = u > 0;u = Qi(u), d = Qi(d);var g = { isSnap: !1, offset: 0, pos: 0 },m = { isSnap: !1, offset: 0, pos: 0 };if (0 === u && 0 === d) return { vertical: g, horizontal: m };var v = ie(t, u ? [r] : [], d ? [s] : [], [], [], void 0, void 0),y = v.vertical,w = v.horizontal;y.posInfos.filter(function (t) {var e = t.pos;return f ? e >= l : e <= l;}), w.posInfos.filter(function (t) {var e = t.pos;return p ? e >= c : e <= c;}), y.isSnap = y.posInfos.length > 0, w.isSnap = w.posInfos.length > 0;var x = oe(y),S = x.isSnap,E = x.guideline,C = oe(w),k = C.isSnap,T = C.guideline,A = k ? T.pos[1] : 0,M = S ? E.pos[0] : 0;if (0 === u) k && (m.isSnap = !0, m.pos = T.pos[1], m.offset = s - m.pos);else if (0 === d) S && (g.isSnap = !0, g.pos = M, g.offset = r - M);else {var _ = d / u,P = i[1] - _ * r,D = 0,O = 0,I = !1;S ? (D = _ * (O = M) + P, I = !0) : k && (O = ((D = A) - P) / _, I = !0), I && (g.isSnap = !0, g.pos = O, g.offset = r - O, m.isSnap = !0, m.pos = D, m.offset = s - D);}return { vertical: g, horizontal: m };}(t, e, i),c = l.horizontal,h = l.vertical,u = Ee(s, c),d = Ee(a, h),p = pn(u),f = pn(d);return { horizontal: { isBound: s.isBound, isSnap: c.isSnap, offset: u, dist: p }, vertical: { isBound: a.isBound, isSnap: h.isSnap, offset: d, dist: f } };}(t, u, d, r) : xe(t, r, { vertical: [d[0]], horizontal: [d[1]] }),f = p.horizontal,g = f.offset,m = f.isBound,v = f.isSnap,y = p.vertical,w = y.offset,x = y.isBound,S = y.isSnap,E = (0, o.Rd)(h, c);if (!w && !g) return { isBound: x || m, isSnap: S || v, sign: E, offset: [0, 0] };var C = function (t, e, i, n) {var r = (0, s.Mu)(t, e) / Math.PI * 180,o = i.vertical,a = o.isBound,l = o.isSnap,c = o.dist,h = i.horizontal,u = h.isBound,d = h.isSnap,p = r % 180,f = p < 3 || p > 177,g = p > 87 && p < 93;return h.dist < c && (a || l && !g && (!n || !f)) ? "vertical" : !u && (!d || f || n && g) ? "" : "horizontal";}(u, d, p, n);if (!C) return { sign: E, isBound: !1, isSnap: !1, offset: [0, 0] };var k = "vertical" === C,T = [0, 0];return T = (T = n || 1 !== pn(h[0]) || 1 !== pn(h[1]) || c[0] === h[0] || c[1] === h[1] ? ye(u, d, -(k ? w : g), k, a).offset : st({ datas: a, distX: -w, distY: -g })).map(function (t, e) {return t * (E[e] ? 2 / E[e] : 0);}), { sign: E, isBound: k ? x : m, isSnap: k ? S : v, offset: T };});}(t, e, l, n, r, a)), !1), b(ge(t, c, a)), !1),u = ce(h, 0),d = ce(h, 1);return { width: { isBound: u.isBound, offset: u.offset[0] }, height: { isBound: d.isBound, offset: d.offset[1] } };}function Ke(t, e, i, n, r, o, a, l) {for (var c = Ii(t.state), h = t.props.keepRatio, u = 0, d = 0, p = 0; p < 2; ++p) {var f = We(t, e(u, d), r, h, a, l),g = f.width,m = f.height,v = g.isBound,y = m.isBound,w = g.offset,x = m.offset;if (1 === p && (v || (w = 0), y || (x = 0)), 0 === p && a && !v && !y) return [0, 0];if (h) {var S = pn(w) * (i ? 1 / i : 1),E = pn(x) * (n ? 1 / n : 1);(v && y ? S < E : y || !v && S < E) ? w = i * x / n : x = n * w / i;}u += w, d += x;}if (!h && r[0] && r[1]) {var C = function (t, e, i, n, r) {var o = [-i[0], -i[1]],a = t.state,l = a.width,c = a.height,h = t.props.bounds,u = 1 / 0,d = 1 / 0;if (h) {var p = [[i[0], -i[1]], [-i[0], i[1]]],f = h.left,g = void 0 === f ? -1 / 0 : f,m = h.top,v = void 0 === m ? -1 / 0 : m,y = h.right,w = void 0 === y ? 1 / 0 : y,x = h.bottom,S = void 0 === x ? 1 / 0 : x;p.forEach(function (t) {var i = t[0] !== o[0],a = t[1] !== o[1],h = lt(e, t),p = 360 * (0, s.Mu)(n, h) / Math.PI;if (a) {var f = h.slice();(pn(p - 360) < 2 || pn(p - 180) < 2) && (f[1] = n[1]);var m = ye(n, f, (n[1] < h[1] ? S : v) - h[1], !1, r),y = b(m.offset, 2)[1],x = m.isOutside;isNaN(y) || (d = c + (x ? 1 : -1) * pn(y));}if (i) {f = h.slice(), (pn(p - 90) < 2 || pn(p - 270) < 2) && (f[0] = n[0]);var E = ye(n, f, (n[0] < h[0] ? w : g) - h[0], !0, r),C = b(E.offset, 1)[0],k = E.isOutside;isNaN(C) || (u = l + (k ? 1 : -1) * pn(C));}});}return { maxWidth: u, maxHeight: d };}(t, c, r, o, l),k = C.maxWidth,T = C.maxHeight,A = b(function (t, e, i, n, r, o, a, l, c) {var h = lt(e, a),u = xe(t, l, { vertical: [h[0]], horizontal: [h[1]] }),d = u.horizontal.offset,p = u.vertical.offset;if ((0, s.nF)(p, z) || (0, s.nF)(d, z)) {var f = b(st({ datas: c, distX: -p, distY: -d }), 2),g = f[0],m = f[1];return [Math.min(r || 1 / 0, i + a[0] * g) - i, Math.min(o || 1 / 0, n + a[1] * m) - n];}return [0, 0];}(t, e(u, d).map(function (t) {return t.map(function (t) {return (0, s.nF)(t, z);});}), i + u, n + d, k, T, r, a, l), 2);u += w = A[0], d += x = A[1];}return [u, d];}function Ze(t) {return t < 0 && (t = t % 360 + 360), t % 360;}function Ye(t, e) {e = Ze(e);var i = Math.floor(t / 360),n = 360 * i + 360 - e,r = 360 * i + e;return pn(t - n) < pn(t - r) ? n : r;}function Xe(t, e) {t = Ze(t), e = Ze(e);var i = Ze(t - e);return Math.min(i, 360 - i);}function Je(t) {var e = [];return t.forEach(function (t) {t.guidelineInfos.forEach(function (i) {var n = i.guideline;(0, s.I6)(e, function (t) {return t.guideline === n;}) || (n.direction = "", e.push({ guideline: n, posInfo: t }));});}), e.map(function (t) {var e = t.guideline,i = t.posInfo;return y(y({}, e), { direction: i.direction });});}function Qe(t, e, i, n, r, o) {var a = jt(zt(t, o), e, i),l = a.vertical,c = a.horizontal,h = { left: !1, top: !1, right: !1, bottom: !1 };l.forEach(function (t) {t.isBound && ("start" === t.direction && (h.left = !0), "end" === t.direction && (h.right = !0), n.push({ type: "bounds", pos: t.pos }));}), c.forEach(function (t) {t.isBound && ("start" === t.direction && (h.top = !0), "end" === t.direction && (h.bottom = !0), r.push({ type: "bounds", pos: t.pos }));});var u = function (t) {var e = t.props.innerBounds,i = { left: !1, top: !1, right: !1, bottom: !1 };if (!e) return { boundMap: i, vertical: [], horizontal: [] };var n = t.getRect(),r = [n.pos1, n.pos2, n.pos3, n.pos4],s = lt(r, [0, 0]),o = e.left,a = e.top,l = e.width,c = e.height,h = [[o, a], [o, a + c]],u = [[o, a], [o + l, a]],d = [[o + l, a], [o + l, a + c]],p = [[o, a + c], [o + l, a + c]],f = me(t, r, [0, 0], !1),g = [],m = [];return f.forEach(function (t) {var e = t.line,n = t.lineConstants,r = he(s, e),f = r.horizontal,v = r.vertical,y = fe(e, n, u, v, 1, !0),b = fe(e, n, p, v, 1, !0),w = fe(e, n, h, f, 1, !0),x = fe(e, n, d, f, 1, !0);y.isBound && !i.top && (g.push(a), i.top = !0), b.isBound && !i.bottom && (g.push(a + c), i.bottom = !0), w.isBound && !i.left && (m.push(o), i.left = !0), x.isBound && !i.right && (m.push(o + l), i.right = !0);}), { boundMap: i, horizontal: g, vertical: m };}(t),d = u.boundMap,p = u.vertical,f = u.horizontal;return p.forEach(function (t) {(0, s.SL)(n, function (e) {var i = e.type,n = e.pos;return "bounds" === i && n === t;}) >= 0 || n.push({ type: "bounds", pos: t });}), f.forEach(function (t) {(0, s.SL)(r, function (e) {var i = e.type,n = e.pos;return "bounds" === i && n === t;}) >= 0 || r.push({ type: "bounds", pos: t });}), { boundMap: h, innerBoundMap: d };}var ti = en("", ["resizable", "scalable"]),ei = { name: "snappable", dragRelation: "strong", props: ["snappable", "snapContainer", "snapDirections", "elementSnapDirections", "snapGap", "snapGridWidth", "snapGridHeight", "isDisplaySnapDigit", "isDisplayInnerSnapDigit", "isDisplayGridGuidelines", "snapDigit", "snapThreshold", "snapRenderThreshold", "snapGridAll", Jt, Qt, te, ee, "horizontalGuidelines", "verticalGuidelines", "elementGuidelines", "bounds", "innerBounds", "snapDistFormat", "maxSnapElementGuidelineDistance", "maxSnapElementGapDistance"], events: ["snap", "bound"], css: [":host {\n--bounds-color: #d66;\n}\n.guideline {\npointer-events: none;\nz-index: 2;\n}\n.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}\n.guideline-group {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.guideline-group .size-value {\nposition: absolute;\ncolor: #f55;\nfont-size: 12px;\nfont-size: calc(12px * var(--zoom));\nfont-weight: bold;\n}\n.guideline-group.horizontal .size-value {\ntransform-origin: 50% 100%;\ntransform: translateX(-50%);\nleft: 50%;\nbottom: 5px;\nbottom: calc(2px + 3px * var(--zoom));\n}\n.guideline-group.vertical .size-value {\ntransform-origin: 0% 50%;\ntop: 50%;\ntransform: translateY(-50%);\nleft: 5px;\nleft: calc(2px + 3px * var(--zoom));\n}\n.guideline.gap {\nbackground: #f55;\n}\n.size-value.gap {\ncolor: #f55;\n}\n"], render: function (t, e) {var i = t.state,n = i.top,r = i.left,s = i.pos1,o = i.pos2,a = i.pos3,l = i.pos4,c = i.snapRenderInfo,h = t.props.snapRenderThreshold,u = void 0 === h ? 1 : h;if (!c || !c.render || !Zt(t, "")) return un(t, "boundMap", { left: !1, top: !1, right: !1, bottom: !1 }, function (t) {return JSON.stringify(t);}), un(t, "innerBoundMap", { left: !1, top: !1, right: !1, bottom: !1 }, function (t) {return JSON.stringify(t);}), [];i.guidelines = je(t);var d = Math.min(s[0], o[0], a[0], l[0]),p = Math.min(s[1], o[1], a[1], l[1]),f = c.externalPoses || [],g = Ii(t.state),m = [],v = [],x = [],S = [],E = [],C = yi(g),k = C.width,T = C.height,A = C.top,M = C.left,_ = C.bottom,P = C.right,D = { left: M, right: P, top: A, bottom: _, center: (M + P) / 2, middle: (A + _) / 2 },O = f.length > 0,I = O ? yi(f) : {};if (!c.request) {if (c.direction && E.push(function (t, e, i, n, r) {var s = [];i[0] && i[1] ? s = [i, [-i[0], i[1]], [i[0], -i[1]]] : i[0] || i[1] ? t.props.keepRatio ? s.push([-1, -1], [-1, 1], [1, -1], [1, 1], i) : (s.push.apply(s, w([], b(function (t, e) {return ot(e).map(function (e) {return t[e];});}([[-1, -1], [1, -1], [-1, -1], [1, 1]], i)), !1)), s.length > 1 && s.push([(s[0][0] + s[1][0]) / 2, (s[0][1] + s[1][1]) / 2])) : [[-1, -1], [1, -1], [1, 1], [-1, 1]].forEach(function (t, e, i) {var n = i[e + 1] || i[0];s.push(t), s.push([(t[0] + n[0]) / 2, (t[1] + n[1]) / 2]);});var o = s.map(function (t) {return lt(e, t);}),a = ie(t, o.map(function (t) {return t[0];}), o.map(function (t) {return t[1];}), s.map(function (t) {return re(t[0]);}), s.map(function (t) {return re(t[1]);}), n, r),l = re(s.map(function (t) {return t[0];})[a.vertical.index]),c = re(s.map(function (t) {return t[1];})[a.horizontal.index]);return { vertical: y(y({}, a.vertical), { direction: l }), horizontal: y(y({}, a.horizontal), { direction: c }) };}(t, g, c.direction, u, u)), c.snap) {var F = yi(g);c.center && (F.middle = (F.top + F.bottom) / 2, F.center = (F.left + F.right) / 2), E.push(se(t, F, u, u));}O && (c.center && (I.middle = (I.top + I.bottom) / 2, I.center = (I.left + I.right) / 2), E.push(se(t, I, u, u))), E.forEach(function (t) {var e = t.vertical.posInfos,i = t.horizontal.posInfos;m.push.apply(m, w([], b(e.filter(function (t) {return t.guidelineInfos.some(function (t) {return !t.guideline.hide;});}).map(function (t) {return { type: "snap", pos: t.pos };})), !1)), v.push.apply(v, w([], b(i.filter(function (t) {return t.guidelineInfos.some(function (t) {return !t.guideline.hide;});}).map(function (t) {return { type: "snap", pos: t.pos };})), !1)), x.push.apply(x, w([], b(Je(e)), !1)), S.push.apply(S, w([], b(Je(i)), !1));});}var R = Qe(t, [M, P], [A, _], m, v),L = R.boundMap,N = R.innerBoundMap;O && Qe(t, [I.left, I.right], [I.top, I.bottom], m, v, c.externalBounds);var V = w(w([], b(x), !1), b(S), !1),B = V.filter(function (t) {return t.element && !t.gapRects;}),j = V.filter(function (t) {return t.gapRects;}).sort(function (t, e) {return t.gap - e.gap;});zi(t, "onSnap", { guidelines: V.filter(function (t) {return !t.element;}), elements: B, gaps: j }, !0);var z = un(t, "boundMap", L, function (t) {return JSON.stringify(t);}, { left: !1, top: !1, right: !1, bottom: !1 }),U = un(t, "innerBoundMap", N, function (t) {return JSON.stringify(t);}, { left: !1, top: !1, right: !1, bottom: !1 });return L !== z && N !== U || zi(t, "onBound", { bounds: L, innerBounds: N }, !0), w(w(w(w(w(w([], b(function (t, e, i, n, r) {var s = t.props.isDisplayInnerSnapDigit,o = [];return ["vertical", "horizontal"].forEach(function (a) {var l = e.filter(function (t) {return t.type === a;}),c = "vertical" === a ? 1 : 0,h = c ? 0 : 1,u = function (t, e, i, n) {var r = "vertical" === t ? 0 : 1,s = "vertical" === t ? 1 : 0,o = r ? Wt : Kt,a = i[o.start],l = i[o.end];return Gi(e, function (t) {return t.pos[r];}).map(function (e) {var i = [],c = [];return e.forEach(function (e) {var h,u,d = e.element,p = e.elementRect.rect;if (p[o.end] < a) i.push(e);else if (l < p[o.start]) c.push(e);else if (p[o.start] <= a && l <= p[o.end] && n) {var f = e.pos,g = { element: d, rect: y(y({}, p), (h = {}, h[o.end] = p[o.start], h)) },m = { element: d, rect: y(y({}, p), (u = {}, u[o.start] = p[o.end], u)) },v = [0, 0],b = [0, 0];v[r] = f[r], v[s] = f[s], b[r] = f[r], b[s] = f[s] + e.size, i.push({ type: t, pos: v, size: 0, elementRect: g, direction: "", elementDirection: "end" }), c.push({ type: t, pos: b, size: 0, elementRect: m, direction: "", elementDirection: "start" });}}), i.sort(function (t, e) {return e.pos[s] - t.pos[s];}), c.sort(function (t, e) {return t.pos[s] - e.pos[s];}), { total: e, start: i, end: c, inner: [] };});}(a, l, n, s),d = c ? Kt : Wt,p = c ? Wt : Kt,f = n[d.start],g = n[d.end];u.forEach(function (e) {var s = e.total,l = e.start,u = e.end,m = e.inner,v = i[h] + s[0].pos[h] - n[p.start],y = n;l.forEach(function (e) {var n = e.elementRect.rect,s = y[d.start] - n[d.end];if (s > 0) {var l = [0, 0];l[c] = i[c] + y[d.start] - f - s, l[h] = v, o.push(Be(t, a, "dashed", o.length, s, l, e.className, r));}y = n;}), y = n, u.forEach(function (e) {var n = e.elementRect.rect,s = n[d.start] - y[d.end];if (s > 0) {var l = [0, 0];l[c] = i[c] + y[d.end] - f, l[h] = v, o.push(Be(t, a, "dashed", o.length, s, l, e.className, r));}y = n;}), m.forEach(function (e) {var n = e.elementRect.rect,s = f - n[d.start],l = n[d.end] - g,u = [0, 0],p = [0, 0];u[c] = i[c] - s, u[h] = v, p[c] = i[c] + g - f, p[h] = v, o.push(Be(t, a, "dashed", o.length, s, u, e.className, r)), o.push(Be(t, a, "dashed", o.length, l, p, e.className, r));});});}), o;}(t, B, [d, p], D, e)), !1), b(function (t, e, i, n, r) {var s = [];return ["horizontal", "vertical"].forEach(function (o) {var a = e.filter(function (t) {return t.type === o;}).slice(0, 1),l = "vertical" === o ? 0 : 1,c = l ? 0 : 1,h = l ? Kt : Wt,u = l ? Wt : Kt,d = n[h.start],p = n[h.end],f = n[u.start],g = n[u.end];a.forEach(function (e) {var n = e.gap,o = e.gapRects,a = Math.max.apply(Math, w([f], b(o.map(function (t) {return t.rect[u.start];})), !1)),m = Math.min.apply(Math, w([g], b(o.map(function (t) {return t.rect[u.end];})), !1)),v = (a + m) / 2;a !== m && v !== (f + g) / 2 && o.forEach(function (e) {var o = e.rect,a = e.className,u = [i[0], i[1]];if (o[h.end] < d) u[l] += o[h.end] - d;else {if (!(p < o[h.start])) return;u[l] += o[h.start] - d - n;}u[c] += v - f, s.push(Be(t, l ? "vertical" : "horizontal", "gap", s.length, n, u, a, r));});});}), s;}(t, j, [d, p], D, e)), !1), b(Ve(t, "horizontal", S, [r, n], D, e)), !1), b(Ve(t, "vertical", x, [r, n], D, e)), !1), b(Ne(t, "horizontal", v, d, n, k, 0, e)), !1), b(Ne(t, "vertical", m, p, r, T, 1, e)), !1);}, dragStart: function (t, e) {t.state.snapRenderInfo = { request: e.isRequest, snap: !0, center: !0 }, qe(t);}, drag: function (t) {var e = t.state;qe(t) || (e.guidelines = je(t)), e.snapRenderInfo && (e.snapRenderInfo.render = !0);}, pinchStart: function (t) {this.unset(t);}, dragEnd: function (t) {this.unset(t);}, dragControlCondition: function (t, e) {return !(!ti(t, e) && !Fe(t, e)) || (!e.isRequest && e.inputEvent ? (0, s.nB)(e.inputEvent.target, ii("snap-control")) : void 0);}, dragControlStart: function (t) {t.state.snapRenderInfo = null, qe(t);}, dragControl: function (t) {this.drag(t);}, dragControlEnd: function (t) {this.unset(t);}, dragGroupStart: function (t, e) {this.dragStart(t, e);}, dragGroup: function (t) {this.drag(t);}, dragGroupEnd: function (t) {this.unset(t);}, dragGroupControlStart: function (t) {t.state.snapRenderInfo = null, qe(t);}, dragGroupControl: function (t) {this.drag(t);}, dragGroupControlEnd: function (t) {this.unset(t);}, unset: function (t) {var e = t.state;e.enableSnap = !1, e.guidelines = [], e.snapRenderInfo = null, e.elementRects = [];} };function ii() {for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];return r.T6.apply(void 0, w([N], b(t), !1));}function ni(t) {t();}function ri(t) {return t && "none" !== t ? (0, s.Gv)(t) ? t : (0, a.yV)(t) : [1, 0, 0, 1, 0, 0];}function si(t, e, i) {return (0, o.B4)(e, (0, o.GD)(i, e), t, (0, o.GD)(i.map(function (t) {return -t;}), e));}function oi(t) {return t ? t.split(" ") : ["0", "0"];}function ai(t) {var e = Mt(t)("transform");if (e && "none" !== e) return e;if ("transform" in t) {var i = t.transform.baseVal;if (!i) return "";var n = i.length;if (!n) return "";for (var r = [], s = function (t) {var e = i[t].matrix;r.push("matrix(".concat(["a", "b", "c", "d", "e", "f"].map(function (t) {return e[t];}).join(", "), ")"));}, o = 0; o < n; ++o) s(o);return r.join(" ");}return "";}function li(t, e, i, n, r) {var o,a,l,c,h = (0, s.ep)(t) || (0, s.uD)(t),u = !1;if (!t || i) l = t;else {var d = null === (o = null == t ? void 0 : t.assignedSlot) || void 0 === o ? void 0 : o.parentElement,p = t.parentElement;d ? (u = !0, c = p, l = d) : l = p;}for (var f = !1, g = t === e || l === e, m = "relative", v = 1, y = parseFloat(null == r ? void 0 : r("zoom")) || 1, b = null == r ? void 0 : r("position"); l && l !== h;) {e === l && (g = !0);var w = Mt(l),x = l.tagName.toLowerCase(),S = ai(l),E = w("willChange"),C = parseFloat(w("zoom")) || 1;if (m = w("position"), n && 1 !== C) {v = C;break;}if (!i && n && 1 !== y && b && "absolute" !== b || "svg" === x || "foreignobject" === x || "static" !== m || S && "none" !== S || "transform" === E) break;var k = null === (a = null == t ? void 0 : t.assignedSlot) || void 0 === a ? void 0 : a.parentNode,T = l.parentNode;k && (u = !0, c = T);var A = T;if (A && 11 === A.nodeType) {f = !0, m = Mt(l = A.host)("position");break;}l = A, m = "relative";}return { offsetZoom: v, hasSlot: u, parentSlotElement: c, isCustomElement: f, isStatic: "static" === m, isEnd: g || !l || l === h, offsetParent: l || h };}function ci(t, e) {var i,n,r,o = t.tagName.toLowerCase(),a = t.offsetLeft,l = t.offsetTop,c = Mt(t),h = (0, s.b0)(a),u = !h;return u || "svg" === o && !t.ownerSVGElement ? r = (n = oi(c("transformOrigin")).map(function (t) {return parseFloat(t);})).slice() : (r = (n = M ? function (t) {return oi(Ui(t, ":before").transformOrigin).map(function (e, i) {var n = (0, s.hg)(e),r = n.value,o = n.unit;return r * function (t, e, i) {return "%" === e ? fi(t.ownerSVGElement)[i ? "width" : "height"] / 100 : 1;}(t, o, 0 === i);});}(t) : oi(c("transformOrigin")).map(function (t) {return parseFloat(t);})).slice(), u = !0, "svg" === o ? (a = 0, l = 0) : (i = b(function (t, e, i) {var n = t.tagName.toLowerCase();if (!t.getBBox || !i && "g" === n) return [0, 0, 0, 0];var r = "fill-box" === Mt(t)("transform-box"),s = t.getBBox(),o = fi(t.ownerSVGElement),a = s.x,l = s.y;"foreignobject" !== n || a || l || (a = parseFloat(t.getAttribute("x")) || 0, l = parseFloat(t.getAttribute("y")) || 0);var c = a - o.x,h = l - o.y;return [c, h, r ? e[0] : e[0] - c, r ? e[1] : e[1] - h];}(t, n, t === e && "g" === e.tagName.toLowerCase()), 4), a = i[0], l = i[1], n[0] = i[2], n[1] = i[3])), { tagName: o, isSVG: h, hasOffset: u, offset: [a || 0, l || 0], origin: n, targetOrigin: r };}function hi(t, e) {var i = Mt(t),n = Mt((0, s.uD)(t)),r = n("position");if (!(e || r && "static" !== r)) return [0, 0];var o = parseInt(n("marginLeft"), 10),a = parseInt(n("marginTop"), 10);return "absolute" === i("position") && ("auto" === i("top") && "auto" === i("bottom") || (a = 0), "auto" === i("left") && "auto" === i("right") || (o = 0)), [o, a];}function ui(t) {t.forEach(function (t) {var e = t.matrix;e && (t.matrix = (0, o._C)(e, 3, 4));});}function di(t) {for (var e = t.parentElement, i = !1, n = (0, s.uD)(t); e;) {var r = Ui(e).transform;if (r && "none" !== r) {i = !0;break;}if (e === n) break;e = e.parentElement;}return { fixedContainer: e || n, hasTransform: i };}function pi(t, e) {return void 0 === e && (e = t.length > 9), "".concat(e ? "matrix3d" : "matrix", "(").concat((0, o.ZB)(t, !e).join(","), ")");}function fi(t) {var e = t.clientWidth,i = t.clientHeight;if (!t) return { x: 0, y: 0, width: 0, height: 0, clientWidth: e, clientHeight: i };var n = t.viewBox,r = n && n.baseVal || { x: 0, y: 0, width: 0, height: 0 };return { x: r.x, y: r.y, width: r.width || e, height: r.height || i, clientWidth: e, clientHeight: i };}function gi(t, e) {var i,n = fi(t),r = n.width,s = n.height,a = n.clientWidth,l = n.clientHeight,c = a / r,h = l / s,u = t.preserveAspectRatio.baseVal,d = u.align,p = u.meetOrSlice,f = [0, 0],g = [c, h],m = [0, 0];if (1 !== d) {var v = (d - 2) % 3,y = Math.floor((d - 2) / 3);f[0] = r * v / 2, f[1] = s * y / 2;var w = 2 === p ? Math.max(h, c) : Math.min(c, h);g[0] = w, g[1] = w, m[0] = (a - r) / 2 * v, m[1] = (l - s) / 2 * y;}var x = (0, o.kb)(g, e);return i = b(m, 2), x[e * (e - 1)] = i[0], x[e * (e - 1) + 1] = i[1], si(x, e, f);}function mi(t, e, i) {return (0, o.Di)(t, (0, o.ez)(e, i), i);}function vi(t, e, i, n) {return [[0, 0], [e, 0], [0, i], [e, i]].map(function (e) {return mi(t, e, n);});}function yi(t) {var e = t.map(function (t) {return t[0];}),i = t.map(function (t) {return t[1];}),n = Math.min.apply(Math, w([], b(e), !1)),r = Math.min.apply(Math, w([], b(i), !1)),s = Math.max.apply(Math, w([], b(e), !1)),o = Math.max.apply(Math, w([], b(i), !1));return { left: n, top: r, right: s, bottom: o, width: s - n, height: o - r };}function bi(t, e, i, n) {return yi(vi(t, e, i, n));}function wi(t) {return Math.sqrt(t[0] * t[0] + t[1] * t[1]);}function xi(t, e) {return wi([e[0] - t[0], e[1] - t[1]]);}function Si(t, e, i, n) {void 0 === i && (i = 1), void 0 === n && (n = (0, s.Mu)(t, e));var r = xi(t, e);return { transform: "translateY(-50%) translate(".concat(t[0], "px, ").concat(t[1], "px) rotate(").concat(n, "rad) scaleY(").concat(i, ")"), width: "".concat(r, "px") };}function Ei(t, e) {for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];var r = i.length,s = i.reduce(function (t, e) {return t + e[0];}, 0) / r,o = i.reduce(function (t, e) {return t + e[1];}, 0) / r;return { transform: "translateZ(0px) translate(".concat(s, "px, ").concat(o, "px) rotate(").concat(t, "rad) scale(").concat(e, ")") };}function Ci(t, e) {var i = t[e];return (0, s.Gv)(i) ? y(y({}, t), i) : t;}function ki(t) {var e = t && !(0, s.b0)(t.offsetWidth),i = 0,n = 0,r = 0,o = 0,a = 0,l = 0,c = 0,h = 0,u = 0,d = 0,p = 0,f = 0,g = 1 / 0,m = 1 / 0,v = 1 / 0,y = 1 / 0,b = 0,w = 0,x = !1;if (t) if (!e && t.ownerSVGElement) {var S = t.getBBox();x = !0, a = i = S.width, l = n = S.height, c = i, h = n, r = i, o = n;} else {var E = Mt(t),C = t.style,k = "border-box" === E("boxSizing"),T = parseFloat(E("borderLeftWidth")) || 0,A = parseFloat(E("borderRightWidth")) || 0,M = parseFloat(E("borderTopWidth")) || 0,_ = parseFloat(E("borderBottomWidth")) || 0,P = (parseFloat(E("paddingLeft")) || 0) + (parseFloat(E("paddingRight")) || 0),D = (parseFloat(E("paddingTop")) || 0) + (parseFloat(E("paddingBottom")) || 0),O = P + (T + A),I = D + (M + _),F = E("position"),R = 0,L = 0;if ("clientLeft" in t) {var N = null;if (N = "absolute" === F ? li(t, (0, s.uD)(t)).offsetParent : t.parentElement) {var V = Mt(N);R = parseFloat(V("width")), L = parseFloat(V("height"));}}u = Math.max(P, (0, s.jc)(E("minWidth"), R) || 0), d = Math.max(D, (0, s.jc)(E("minHeight"), L) || 0), g = (0, s.jc)(E("maxWidth"), R), m = (0, s.jc)(E("maxHeight"), L), isNaN(g) && (g = 1 / 0), isNaN(m) && (m = 1 / 0), b = (0, s.jc)(C.width, 0) || 0, w = (0, s.jc)(C.height, 0) || 0, a = parseFloat(E("width")) || 0, l = parseFloat(E("height")) || 0, i = c = pn(a - b) < 1 ? (0, s.Tq)(u, b || a, g) : a, n = h = pn(l - w) < 1 ? (0, s.Tq)(d, w || l, m) : l, r = c, o = h, k ? (v = g, y = m, p = u, f = d, c = i - O, h = n - I) : (v = g + O, y = m + I, p = u + O, f = d + I, i = c + O, n = h + I), r = c + P, o = h + D;}return { svg: x, offsetWidth: i, offsetHeight: n, clientWidth: r, clientHeight: o, contentWidth: c, contentHeight: h, inlineCSSWidth: b, inlineCSSHeight: w, cssWidth: a, cssHeight: l, minWidth: u, minHeight: d, maxWidth: g, maxHeight: m, minOffsetWidth: p, minOffsetHeight: f, maxOffsetWidth: v, maxOffsetHeight: y };}function Ti(t, e) {return (0, s.Mu)(e > 0 ? t[0] : t[1], e > 0 ? t[1] : t[0]);}function Ai(t, e) {var i = t === (0, s.uD)(t) || t === (0, s.ep)(t),n = { clientLeft: t.clientLeft, clientTop: t.clientTop, clientWidth: t.clientWidth, clientHeight: t.clientHeight, scrollWidth: t.scrollWidth, scrollHeight: t.scrollHeight, overflow: !1 };return i && (n.clientHeight = Math.max(e.height, n.clientHeight), n.scrollHeight = Math.max(e.height, n.scrollHeight)), n.overflow = "visible" !== Mt(t)("overflow"), y(y({}, e), n);}function Mi(t, e, i, n) {var r = t.left,s = t.right,o = t.top,a = t.bottom,l = e.top,c = e.left,h = { left: c + r, top: l + o, right: c + s, bottom: l + a, width: s - r, height: a - o };return i && n ? Ai(i, h) : h;}function _i(t, e) {var i = 0,n = 0,r = 0,s = 0;if (t) {var o = t.getBoundingClientRect();i = o.left, n = o.top, r = o.width, s = o.height;}var a = { left: i, top: n, width: r, height: s, right: i + r, bottom: n + s };return t && e ? Ai(t, a) : a;}function Pi(t, e, i, n) {return t || (e ? [0, 0] : Di(i.target, n));}function Di(t, e) {if (t) {var i = t.getAttribute("data-rotation") || "",n = t.getAttribute("data-direction");if (e.deg = i, n) {var r = [0, 0];return n.indexOf("w") > -1 && (r[0] = -1), n.indexOf("e") > -1 && (r[0] = 1), n.indexOf("n") > -1 && (r[1] = -1), n.indexOf("s") > -1 && (r[1] = 1), r;}}}function Oi(t, e) {return [(0, o.tY)(e, t[0]), (0, o.tY)(e, t[1]), (0, o.tY)(e, t[2]), (0, o.tY)(e, t[3])];}function Ii(t) {var e = t.left,i = t.top;return Oi([t.pos1, t.pos2, t.pos3, t.pos4], [e, i]);}function Fi(t, e) {t[e ? "controlAbles" : "targetAbles"].forEach(function (e) {e.unset && e.unset(t);});}function Ri(t, e) {var i = e ? "controlGesto" : "targetGesto",n = t[i];!1 === (null == n ? void 0 : n.isIdle()) && Fi(t, e), null == n || n.unset(), t[i] = null;}function Li(t, e) {if (e) {var i = ft(e);i.nextStyle = y(y({}, i.nextStyle), t);}return { style: t, cssText: (0, s.xD)(t).map(function (e) {return "".concat((0, s.aj)(e, "-"), ": ").concat(t[e], ";");}).join("") };}function Ni(t, e, i) {var n = e.afterTransform || e.transform;return y(y({}, Li(y(y(y({}, t.style), e.style), { transform: n }), i)), { afterTransform: n, transform: t.transform });}function Vi(t, e, i, n) {var r = e.datas;r.datas || (r.datas = {});var s = y(y({}, i), { target: t.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: t, moveable: t, datas: r.datas, isRequest: e.isRequest, isRequestChild: e.isRequestChild, isFirstDrag: !!e.isFirstDrag, isTrusted: !1 !== e.isTrusted, stopAble: function () {r.isEventStart = !1;}, stopDrag: function () {var t;null === (t = e.stop) || void 0 === t || t.call(e);} });return r.isStartEvent ? n || (r.lastEvent = s) : r.isStartEvent = !0, s;}function Bi(t, e, i) {var n = e.datas,r = "isDrag" in i ? i.isDrag : e.isDrag;return n.datas || (n.datas = {}), y(y({ isDrag: r }, i), { moveable: t, target: t.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: t, lastEvent: n.lastEvent, isDouble: e.isDouble, datas: n.datas, isFirstDrag: !!e.isFirstDrag });}function ji(t, e, i) {t._emitter.on(e, i);}function zi(t, e, i, n, r) {return t.triggerEvent(e, i, n, r);}function Ui(t, e) {return (0, s.zk)(t).getComputedStyle(t, e);}function Hi(t, e, i) {var n = {},r = {};return t.filter(function (t) {var s = t.name;if (n[s] || !e.some(function (e) {return t[e];})) return !1;if (!i && t.ableGroup) {if (r[t.ableGroup]) return !1;r[t.ableGroup] = !0;}return n[s] = !0, !0;});}function qi(t, e) {return t === e || null == t && null == e;}function $i() {for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];for (var i = t.length - 1, n = 0; n < i; ++n) {var r = t[n];if (!(0, s.b0)(r)) return r;}return t[i];}function Gi(t, e) {var i = [],n = [];return t.forEach(function (r, s) {var o = e(r, s, t),a = n.indexOf(o),l = i[a] || [];-1 === a && (n.push(o), i.push(l)), l.push(r);}), i;}function Wi(t) {return t.reduce(function (t, e) {return t.concat(e);}, []);}function Ki() {for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];return t.sort(function (t, e) {return pn(e) - pn(t);}), t[0];}function Zi(t, e, i) {return (0, o.Di)((0, o.B8)(t, i), (0, o.ez)(e, i), i);}function Yi(t, e) {var i,n = t.is3d ? 4 : 3;return i = b(Zi(t.rootMatrix, [e.distX, e.distY], n), 2), e.distX = i[0], e.distY = i[1], e;}function Xi(t, e, i, n) {if (!i[0] && !i[1]) return e;var r = mi(t, [Ge(i[0] || 1), 0], n),s = mi(t, [0, Ge(i[1] || 1)], n),a = mi(t, [i[0] / wi(r), i[1] / wi(s)], n);return (0, o.tY)(e, a);}function Ji(t, e, i) {return i ? "".concat(t / e * 100, "%") : "".concat(t, "px");}function Qi(t) {return pn(t) <= U ? 0 : t;}function tn(t) {return function (e) {if (!e.isDragging(t)) return "";var i = function (t, e) {var i,n = t.targetGesto,r = t.controlGesto;return (null == n ? void 0 : n.isFlag()) && (i = n.getEventData()[e]), !i && (null == r ? void 0 : r.isFlag()) && (i = r.getEventData()[e]), i || {};}(e, t),n = i.deg;return n ? ii("view-control-rotation".concat(n)) : "";};}function en(t, e) {return void 0 === e && (e = [t]), function (i, n) {if (n.isRequest) return !!e.some(function (t) {return n.requestAble === t;}) && n.parentDirection;var r = n.inputEvent.target;return (0, s.nB)(r, ii("direction")) && (!t || (0, s.nB)(r, ii(t)));};}function nn(t, e) {return t ? (0, s.Ll)(t) ? t : (0, s.Kg)(t) ? e ? document.querySelector(t) : t : (0, s.Tn)(t) ? t() : (0, s.l6)(t) ? t : "current" in t ? t.current : t : null;}function rn(t, e) {return t ? ((i = t) && (0, s.Gv)(i) && !(0, s.Ll)(i) && ((0, s.cy)(i) || "length" in i) ? [].slice.call(t) : [t]).reduce(function (t, i) {return (0, s.Kg)(i) && e ? w(w([], b(t), !1), b([].slice.call(document.querySelectorAll(i))), !1) : ((0, s.cy)(i) ? t.push(rn(i, e)) : t.push(nn(i, e)), t);}, []) : [];var i;}function sn(t, e) {var i = t.rootMatrix,n = t.is3d,r = n ? 4 : 3,s = (0, o.B8)(i, r);return n || (s = (0, o._C)(s, 3, 4)), s[12] = 0, s[13] = 0, s[14] = 0, (0, a.c4)(s, e);}function on(t, e, i, n, r) {var o = b(t, 2),a = o[0],l = o[1],c = 0,h = 0;if (r && a && l) {var u = (0, s.Mu)([0, 0], e),d = (0, s.Mu)([0, 0], n),p = wi(e),f = Math.cos(u - d) * p;if (n[0]) {if (n[1]) {var g = n[0] * a,m = n[1] * l,v = Math.atan2(g + e[0], m + e[1]),y = Math.atan2(g, m);v < 0 && (v += 2 * Math.PI), y < 0 && (y += 2 * Math.PI);var w = 0;(w = pn(v - y) < Math.PI / 2 || pn(v - y) > Math.PI / 2 * 3 ? v - y : v - (y += Math.PI)) > 2 * Math.PI ? w -= 2 * Math.PI : w > Math.PI ? w = 2 * Math.PI - w : w < -Math.PI && (w = -2 * Math.PI - w);var x = wi([g + e[0], m + e[1]]) * Math.cos(w);c = x * Math.sin(y) - g, h = x * Math.cos(y) - m, n[0] < 0 && (c *= -1), n[1] < 0 && (h *= -1);} else h = (c = f) / i;} else c = (h = f) * i;} else c = n[0] * e[0], h = n[1] * e[1];return [c, h];}function an(t, e, i, n) {var r,o = i.ratio,a = i.startOffsetWidth,l = i.startOffsetHeight,c = 0,h = 0,u = n.distX,d = n.distY,p = n.pinchScale,f = n.parentDistance,g = n.parentDist,m = n.parentScale,v = i.fixedDirection,y = [0, 1].map(function (e) {return pn(t[e] - v[e]);}),w = [0, 1].map(function (t) {var e = y[t];return 0 !== e && (e = 2 / e), e;});if (g) c = g[0], h = g[1], e && (c ? h || (h = c / o) : c = h * o);else if ((0, s.Et)(p)) c = (p - 1) * a, h = (p - 1) * l;else if (m) c = (m[0] - 1) * a, h = (m[1] - 1) * l;else if (f) {var x = a * y[0],S = l * y[1],E = wi([x, S]);c = f / E * x * w[0], h = f / E * S * w[1];} else {var C = st({ datas: i, distX: u, distY: d });C = w.map(function (t, e) {return C[e] * t;}), c = (r = b(on([a, l], C, o, t, e), 2))[0], h = r[1];}return { distWidth: c, distHeight: h };}function ln(t, e) {if (e) {if ("left" === t) return { x: "0%", y: "50%" };if ("top" === t) return { x: "50%", y: "50%" };if ("center" === t) return { x: "50%", y: "50%" };if ("right" === t) return { x: "100%", y: "50%" };if ("bottom" === t) return { x: "50%", y: "100%" };var i = b(t.split(" "), 2),n = i[0],r = i[1],s = ln(n || ""),o = ln(r || ""),a = y(y({}, s), o),l = { x: "50%", y: "50%" };return a.x && (l.x = a.x), a.y && (l.y = a.y), a.value && (a.x && !a.y && (l.y = a.value), !a.x && a.y && (l.x = a.value)), l;}return "left" === t ? { x: "0%" } : "right" === t ? { x: "100%" } : "top" === t ? { y: "0%" } : "bottom" === t ? { y: "100%" } : t ? "center" === t ? { value: "50%" } : { value: t } : {};}function cn(t, e, i) {var n = ln(t, !0),r = n.x,o = n.y;return [(0, s.jc)(r, e) || 0, (0, s.jc)(o, i) || 0];}function hn(t, e) {return t.length === e.length && t.every(function (t, i) {var n = e[i],r = (0, s.cy)(t),o = (0, s.cy)(n);return r && o ? hn(t, n) : !r && !o && t === n;});}function un(t, e, i, n, r) {var s = t._store,o = s[e];if (!(e in s)) {if (null == r) return s[e] = i, i;s[e] = r, o = r;}return o === i || n(o) === n(i) ? o : (s[e] = i, i);}function dn(t) {return t >= 0 ? 1 : -1;}function pn(t) {return Math.abs(t);}function fn(t, e) {return (0, s.hJ)(t).map(function (t) {return e(t);});}function gn(t) {return (0, s.Et)(t) ? { top: t, left: t, right: t, bottom: t } : { left: t.left || 0, top: t.top || 0, right: t.right || 0, bottom: t.bottom || 0 };}var mn = x("pinchable", { props: ["pinchable"], events: ["pinchStart", "pinch", "pinchEnd", "pinchGroupStart", "pinchGroup", "pinchGroupEnd"], dragStart: function () {return !0;}, pinchStart: function (t, e) {var i = e.datas,n = e.targets,r = e.angle,s = e.originalDatas,o = t.props,a = o.pinchable,l = o.ables;if (!a) return !1;var c = "onPinch".concat(n ? "Group" : "", "Start"),h = "drag".concat(n ? "Group" : "", "ControlStart"),u = (!0 === a ? t.controlAbles : l.filter(function (t) {return a.indexOf(t.name) > -1;})).filter(function (t) {return t.canPinch && t[h];}),d = Vi(t, e, {});n && (d.targets = n);var p = zi(t, c, d);i.isPinch = !1 !== p, i.ables = u;var f = i.isPinch;return !!f && (u.forEach(function (i) {if (s[i.name] = s[i.name] || {}, i[h]) {var n = y(y({}, e), { datas: s[i.name], parentRotate: r, isPinch: !0 });i[h](t, n);}}), t.state.snapRenderInfo = { request: e.isRequest, direction: [0, 0] }, f);}, pinch: function (t, e) {var i = e.datas,n = e.scale,r = e.distance,s = e.originalDatas,o = e.inputEvent,a = e.targets,l = e.angle;if (i.isPinch) {var c = r * (1 - 1 / n),h = Vi(t, e, {});a && (h.targets = a);var u = "onPinch".concat(a ? "Group" : "");zi(t, u, h);var d = i.ables,p = "drag".concat(a ? "Group" : "", "Control");return d.forEach(function (i) {i[p] && i[p](t, y(y({}, e), { datas: s[i.name], inputEvent: o, resolveMatrix: !0, pinchScale: n, parentDistance: c, parentRotate: l, isPinch: !0 }));}), h;}}, pinchEnd: function (t, e) {var i = e.datas,n = e.isPinch,r = e.inputEvent,s = e.targets,o = e.originalDatas;if (i.isPinch) {var a = "onPinch".concat(s ? "Group" : "", "End"),l = Bi(t, e, { isDrag: n });s && (l.targets = s), zi(t, a, l);var c = i.ables,h = "drag".concat(s ? "Group" : "", "ControlEnd");return c.forEach(function (i) {i[h] && i[h](t, y(y({}, e), { isDrag: n, datas: o[i.name], inputEvent: r, isPinch: !0 }));}), n;}}, pinchGroupStart: function (t, e) {return this.pinchStart(t, y(y({}, e), { targets: t.props.targets }));}, pinchGroup: function (t, e) {return this.pinch(t, y(y({}, e), { targets: t.props.targets }));}, pinchGroupEnd: function (t, e) {return this.pinchEnd(t, y(y({}, e), { targets: t.props.targets }));} }),vn = en("scalable"),yn = { name: "scalable", ableGroup: "size", canPinch: !0, props: ["scalable", "throttleScale", "renderDirections", "keepRatio", "edge", "displayAroundControls"], events: ["scaleStart", "beforeScale", "scale", "scaleEnd", "scaleGroupStart", "beforeScaleGroup", "scaleGroup", "scaleGroupEnd"], render: Nt("scalable"), dragControlCondition: vn, viewClassName: tn("scalable"), dragControlStart: function (t, e) {var i = e.datas,n = e.isPinch,r = e.inputEvent,o = Pi(e.parentDirection, n, r, i),a = t.state,l = a.width,c = a.height,h = a.targetTransform,u = a.target,d = a.pos1,p = a.pos2,f = a.pos4;if (!o || !u) return !1;n || tt(t, e), i.datas = {}, i.transform = h, i.prevDist = [1, 1], i.direction = o, i.startOffsetWidth = l, i.startOffsetHeight = c, i.startValue = [1, 1];var g = !o[0] && !o[1] || o[0] || !o[1];function m(t) {i.ratio = t && isFinite(t) ? t : 0;}function v(t) {var e = ke(i.startPositions, t);i.fixedDirection = e.fixedDirection, i.fixedPosition = e.fixedPosition, i.fixedOffset = e.fixedOffset;}ut(t, e, "scale"), i.isWidth = g, i.startPositions = Ii(t.state), i.setFixedDirection = v, m((0, s.l$)(d, p) / (0, s.l$)(p, f)), v([-o[0], -o[1]]);var b = function (t) {i.minScaleSize = t;},w = function (t) {i.maxScaleSize = t;};b([-1 / 0, -1 / 0]), w([1 / 0, 1 / 0]);var x = Vi(t, e, y(y({ direction: o, set: function (t) {i.startValue = t;}, setRatio: m, setFixedDirection: v, setMinScaleSize: b, setMaxScaleSize: w }, ht(t, e)), { dragStart: Ce.dragStart(t, new X().dragStart([0, 0], e)) })),S = zi(t, "onScaleStart", x);return i.startFixedDirection = i.fixedDirection, !1 !== S && (i.isScale = !0, t.state.snapRenderInfo = { request: e.isRequest, direction: o }), !!i.isScale && x;}, dragControl: function (t, e) {et(t, e, "scale");var i = e.datas,n = e.parentKeepRatio,r = e.parentFlag,a = e.isPinch,l = e.dragClient,c = e.isRequest,h = e.useSnap,u = e.resolveMatrix,d = i.prevDist,p = i.direction,f = i.startOffsetWidth,g = i.startOffsetHeight,m = i.isScale,v = i.startValue,b = i.isWidth,w = i.ratio;if (!m) return !1;var x = t.props,S = x.throttleScale,E = x.parentMoveable,C = p;p[0] || p[1] || (C = [1, 1]);var k = w && (null != n ? n : x.keepRatio) || !1,T = t.state,A = [v[0], v[1]];function M() {var t = an(C, k, i, e),n = t.distWidth,r = t.distHeight,s = f ? (f + n) / f : 1,o = g ? (g + r) / g : 1;v[0] || (A[0] = n / f), v[1] || (A[1] = r / g);var a = (C[0] || k ? s : 1) * A[0],l = (C[1] || k ? o : 1) * A[1];return 0 === a && (a = dn(d[0]) * H), 0 === l && (l = dn(d[1]) * H), [a, l];}var _ = M();if (!a && t.props.groupable) {var P = (T.snapRenderInfo || {}).direction;(0, s.cy)(P) && (P[0] || P[1]) && (T.snapRenderInfo = { direction: p, request: e.isRequest });}zi(t, "onBeforeScale", Vi(t, e, { scale: _, setFixedDirection: function (t) {return i.setFixedDirection(t), _ = M();}, startFixedDirection: i.startFixedDirection, setScale: function (t) {_ = t;} }, !0));var D,O,I = [_[0] / A[0], _[1] / A[1]],F = l,R = [0, 0],L = dn(I[0] * I[1]),N = !l && !r && a;if (N || u ? F = bt(t, i.targetAllTransform, [0, 0], [0, 0], i) : l || (F = i.fixedPosition), a || (R = function (t, e, i, n, r) {if (!Zt(t, "scalable")) return [0, 0];var s = r.startOffsetWidth,a = r.startOffsetHeight,l = r.fixedPosition,c = r.fixedDirection,h = r.is3d,u = Ke(t, function (t, i) {return $e(function (t, e) {var i = t.transformOrigin,n = t.offsetMatrix,r = t.is3d,s = t.targetMatrix,a = t.targetAllTransform,l = r ? 4 : 3;return ct(n, (0, o.lw)(a || s, (0, o.kb)(e, l), l), i, l);}(r, (0, o.tY)(e, [t / s, i / a])), s, a, c, l, h);}, s, a, i, l, n, r);return [u[0] / s, u[1] / a];}(t, I, p, !h && c, i)), k) {C[0] && C[1] && R[0] && R[1] && (Math.abs(R[0] * f) > Math.abs(R[1] * g) ? R[1] = 0 : R[0] = 0);var V = !R[0] && !R[1];if (V && (b ? I[0] = (0, s.nF)(I[0] * A[0], S) / A[0] : I[1] = (0, s.nF)(I[1] * A[1], S) / A[1]), C[0] && !C[1] || R[0] && !R[1] || V && b) {I[0] += R[0];var B = f * I[0] * A[0] / w;I[1] = dn(L * I[0]) * pn(B / g / A[1]);} else if (!C[0] && C[1] || !R[0] && R[1] || V && !b) {I[1] += R[1];var j = g * I[1] * A[1] * w;I[0] = dn(L * I[1]) * pn(j / f / A[0]);}} else I[0] += R[0], I[1] += R[1], R[0] || (I[0] = (0, s.nF)(I[0] * A[0], S) / A[0]), R[1] || (I[1] = (0, s.nF)(I[1] * A[1], S) / A[1]);0 === I[0] && (I[0] = dn(d[0]) * H), 0 === I[1] && (I[1] = dn(d[1]) * H), D = I, O = [A[0], A[1]], _ = [D[0] * O[0], D[1] * O[1]];var z = [f, g],U = [f * _[0], g * _[1]];U = (0, s.u0)(U, i.minScaleSize, i.maxScaleSize, !!k && w), _ = fn(2, function (t) {return z[t] ? U[t] / z[t] : U[t];}), I = fn(2, function (t) {return _[t] / A[t];});var q = fn(2, function (t) {return d[t] ? I[t] / d[t] : I[t];}),$ = "scale(".concat(I.join(", "), ")"),G = "scale(".concat(_.join(", "), ")"),W = it(i, G, $),K = !v[0] || !v[1],Z = function (t, e, i, n, r, s, o) {return wt(t, e, i, n, r, s, o);}(t, K ? G : $, i.fixedDirection, F, i.fixedOffset, i, K),Y = N ? Z : (0, o.Rd)(Z, i.prevInverseDist || [0, 0]);if (i.prevDist = I, i.prevInverseDist = Z, _[0] === d[0] && _[1] === d[1] && Y.every(function (t) {return !t;}) && !E && !N) return !1;var X = Vi(t, e, y({ offsetWidth: f, offsetHeight: g, direction: p, scale: _, dist: I, delta: q, isPinch: !!a }, yt(t, W, Y, a, e)));return zi(t, "onScale", X), X;}, dragControlEnd: function (t, e) {var i = e.datas;if (!i.isScale) return !1;i.isScale = !1;var n = Bi(t, e, {});return zi(t, "onScaleEnd", n), n;}, dragGroupControlCondition: vn, dragGroupControlStart: function (t, e) {var i = e.datas,n = this.dragControlStart(t, e);if (!n) return !1;var r = _t(t, "resizable", e);i.moveableScale = t.scale;var s = Dt(t, this, "dragControlStart", e, function (e, n) {return Ot(t, e, i, n);}),o = function (e) {n.setFixedDirection(e), s.forEach(function (n, s) {n.setFixedDirection(e), Ot(t, n.moveable, i, r[s]);});};i.setFixedDirection = o;var a = y(y({}, n), { targets: t.props.targets, events: s, setFixedDirection: o }),l = zi(t, "onScaleGroupStart", a);return i.isScale = !1 !== l, !!i.isScale && a;}, dragGroupControl: function (t, e) {var i = e.datas;if (i.isScale) {ji(t, "onBeforeScale", function (i) {zi(t, "onBeforeScaleGroup", Vi(t, e, y(y({}, i), { targets: t.props.targets }), !0));});var n = this.dragControl(t, e);if (n) {var r = n.dist,s = i.moveableScale;t.scale = [r[0] * s[0], r[1] * s[1]];var a = t.props.keepRatio,l = i.fixedPosition,c = Dt(t, this, "dragControl", e, function (e, i) {var n = b((0, o.Di)((0, o.XI)(t.rotation / 180 * Math.PI, 3), [i.datas.originalX * r[0], i.datas.originalY * r[1], 1], 3), 2),s = n[0],c = n[1];return y(y({}, i), { parentDist: null, parentScale: r, parentKeepRatio: a, dragClient: (0, o.tY)(l, [s, c]) });}),h = y({ targets: t.props.targets, events: c }, n);return zi(t, "onScaleGroup", h), h;}}}, dragGroupControlEnd: function (t, e) {var i = e.isDrag;if (e.datas.isScale) {this.dragControlEnd(t, e);var n = Dt(t, this, "dragControlEnd", e);return zi(t, "onScaleGroupEnd", Bi(t, e, { targets: t.props.targets, events: n })), i;}}, request: function () {var t = {},e = 0,i = 0,n = !1;return { isControl: !0, requestStart: function (e) {return n = e.useSnap, { datas: t, parentDirection: e.direction || [1, 1], useSnap: n };}, request: function (r) {return e += r.deltaWidth, i += r.deltaHeight, { datas: t, parentDist: [e, i], parentKeepRatio: r.keepRatio, useSnap: n };}, requestEnd: function () {return { datas: t, isDrag: !0, useSnap: n };} };} };function bn(t, e) {return t.map(function (t, i) {return (0, s.Om)(t, e[i], 1, 2);});}function wn(t, e, i) {var n = (0, s.Mu)(t, e),r = (0, s.Mu)(t, i) - n;return r >= 0 ? r : r + 2 * Math.PI;}var xn = { name: "warpable", ableGroup: "size", props: ["warpable", "renderDirections", "edge", "displayAroundControls"], events: ["warpStart", "warp", "warpEnd"], viewClassName: tn("warpable"), render: function (t, e) {var i = t.props,n = i.resizable,r = i.scalable,s = i.warpable,o = i.zoom;if (n || r || !s) return [];var a = t.state,l = a.pos1,c = a.pos2,h = a.pos3,u = a.pos4,d = bn(l, c),p = bn(c, l),f = bn(l, h),g = bn(h, l),m = bn(h, u),v = bn(u, h),y = bn(c, u),x = bn(u, c);return w([e.createElement("div", { className: ii("line"), key: "middeLine1", style: Si(d, m, o) }), e.createElement("div", { className: ii("line"), key: "middeLine2", style: Si(p, v, o) }), e.createElement("div", { className: ii("line"), key: "middeLine3", style: Si(f, y, o) }), e.createElement("div", { className: ii("line"), key: "middeLine4", style: Si(g, x, o) })], b(Vt(t, "warpable", e)), !1);}, dragControlCondition: function (t, e) {if (e.isRequest) return !1;var i = e.inputEvent.target;return (0, s.nB)(i, ii("direction")) && (0, s.nB)(i, ii("warpable"));}, dragControlStart: function (t, e) {var i = e.datas,n = e.inputEvent,r = t.props.target,s = Di(n.target, i);if (!s || !r) return !1;var a = t.state,l = a.transformOrigin,c = a.is3d,h = a.targetTransform,u = a.targetMatrix,d = a.width,p = a.height,f = a.left,g = a.top;return i.datas = {}, i.targetTransform = h, i.warpTargetMatrix = c ? u : (0, o._C)(u, 3, 4), i.targetInverseMatrix = (0, o.bn)((0, o.B8)(i.warpTargetMatrix, 4), 3, 4), i.direction = s, i.left = f, i.top = g, i.poses = [[0, 0], [d, 0], [0, p], [d, p]].map(function (t) {return (0, o.Rd)(t, l);}), i.nextPoses = i.poses.map(function (t) {var e = b(t, 2),n = e[0],r = e[1];return (0, o.Di)(i.warpTargetMatrix, [n, r, 0, 1], 4);}), i.startValue = (0, o.k8)(4), i.prevMatrix = (0, o.k8)(4), i.absolutePoses = Ii(a), i.posIndexes = ot(s), tt(t, e), ut(t, e, "matrix3d"), a.snapRenderInfo = { request: e.isRequest, direction: s }, !1 !== zi(t, "onWarpStart", Vi(t, e, y({ set: function (t) {i.startValue = t;} }, ht(t, e)))) && (i.isWarp = !0), i.isWarp;}, dragControl: function (t, e) {var i = e.datas,n = e.isRequest,r = e.distX,s = e.distY,a = i.targetInverseMatrix,l = i.prevMatrix,c = i.isWarp,h = i.startValue,u = i.poses,d = i.posIndexes,p = i.absolutePoses;if (!c) return !1;if (et(t, e, "matrix3d"), Zt(t, "warpable")) {var f = d.map(function (t) {return p[t];});f.length > 1 && f.push([(f[0][0] + f[1][0]) / 2, (f[0][1] + f[1][1]) / 2]);var g = xe(t, n, { horizontal: f.map(function (t) {return t[1] + s;}), vertical: f.map(function (t) {return t[0] + r;}) }),m = g.horizontal,v = g.vertical;s -= m.offset, r -= v.offset;}var b = st({ datas: i, distX: r, distY: s }, !0),w = i.nextPoses.slice();if (d.forEach(function (t) {w[t] = (0, o.tY)(w[t], b);}), !j.every(function (t) {return e = t.map(function (t) {return u[t];}), i = t.map(function (t) {return w[t];}), n = wn(e[0], e[1], e[2]), r = wn(i[0], i[1], i[2]), !(n >= (s = Math.PI) && r <= s || n <= s && r >= s);var e, i, n, r, s;})) return !1;var x = (0, o.qL)(u[0], u[2], u[1], u[3], w[0], w[2], w[1], w[3]);if (!x.length) return !1;var S = nt(i, (0, o.lw)(a, x, 4), !0),E = (0, o.lw)((0, o.B8)(l, 4), S, 4);i.prevMatrix = S;var C = (0, o.lw)(h, S, 4),k = it(i, "matrix3d(".concat(C.join(", "), ")"), "matrix3d(".concat(S.join(", "), ")"));return pt(e, k), zi(t, "onWarp", Vi(t, e, y({ delta: E, matrix: C, dist: S, multiply: o.lw, transform: k }, Li({ transform: k }, e)))), !0;}, dragControlEnd: function (t, e) {var i = e.datas,n = e.isDrag;return !!i.isWarp && (i.isWarp = !1, zi(t, "onWarpEnd", Bi(t, e, {})), n);} },Sn = ii("area-pieces"),En = ii("area-piece"),Cn = ii("avoid"),kn = ii("view-dragging");function Tn(t) {var e = t.areaElement;if (e) {var i = t.state,n = i.width,r = i.height;(0, s.vy)(e, Cn), e.style.cssText += "left: 0px; top: 0px; width: ".concat(n, "px; height: ").concat(r, "px");}}function An(t) {return t.createElement("div", { key: "area_pieces", className: Sn }, t.createElement("div", { className: En }), t.createElement("div", { className: En }), t.createElement("div", { className: En }), t.createElement("div", { className: En }));}var Mn = { name: "dragArea", props: ["dragArea", "passDragArea"], events: ["click", "clickGroup"], render: function (t, e) {var i = t.props,n = i.target,s = i.dragArea,a = i.groupable,l = i.passDragArea,c = t.getState(),h = c.width,u = c.height,d = c.renderPoses,p = l ? ii("area", "pass") : ii("area");if (a) return [e.createElement("div", { key: "area", ref: (0, r.KR)(t, "areaElement"), className: p }), An(e)];if (!n || !s) return [];var f = (0, o.qL)([0, 0], [h, 0], [0, u], [h, u], d[0], d[1], d[2], d[3]),g = f.length ? pi(f, !0) : "none";return [e.createElement("div", { key: "area", ref: (0, r.KR)(t, "areaElement"), className: p, style: { top: "0px", left: "0px", width: "".concat(h, "px"), height: "".concat(u, "px"), transformOrigin: "0 0", transform: g } }), An(e)];}, dragStart: function (t, e) {var i = e.datas,n = e.clientX,r = e.clientY;if (!e.inputEvent) return !1;i.isDragArea = !1;var o = t.areaElement,a = t.state,l = a.moveableClientRect,c = a.renderPoses,h = a.rootMatrix,u = a.is3d,d = l.left,p = l.top,f = yi(c),g = f.left,m = f.top,v = f.width,y = f.height,w = b(Zi(h, [n - d, r - p], u ? 4 : 3), 2),x = w[0],S = w[1],E = [{ left: g, top: m, width: v, height: (S -= m) - 10 }, { left: g, top: m, width: (x -= g) - 10, height: y }, { left: g, top: m + S + 10, width: v, height: y - S - 10 }, { left: g + x + 10, top: m, width: v - x - 10, height: y }],C = [].slice.call(o.nextElementSibling.children);E.forEach(function (t, e) {C[e].style.cssText = "left: ".concat(t.left, "px;top: ").concat(t.top, "px; width: ").concat(t.width, "px; height: ").concat(t.height, "px;");}), (0, s.iQ)(o, Cn), a.disableNativeEvent = !0;}, drag: function (t, e) {var i = e.datas,n = e.inputEvent;if (this.enableNativeEvent(t), !n) return !1;i.isDragArea || (i.isDragArea = !0, Tn(t));}, dragEnd: function (t, e) {this.enableNativeEvent(t);var i = e.inputEvent,n = e.datas;if (!i) return !1;n.isDragArea || Tn(t);}, dragGroupStart: function (t, e) {return this.dragStart(t, e);}, dragGroup: function (t, e) {return this.drag(t, e);}, dragGroupEnd: function (t, e) {return this.dragEnd(t, e);}, unset: function (t) {Tn(t), t.state.disableNativeEvent = !1;}, enableNativeEvent: function (t) {var e = t.state;e.disableNativeEvent && (0, s.xi)(function () {e.disableNativeEvent = !1;});} },_n = x("origin", { props: ["origin", "svgOrigin"], render: function (t, e) {var i,n = t.props,r = n.zoom,s = n.svgOrigin,a = n.groupable,l = t.getState(),c = l.beforeOrigin,h = l.rotation,u = l.svg,d = l.allMatrix,p = l.is3d,f = l.left,g = l.top,m = l.offsetWidth,v = l.offsetHeight;if (!a && u && s) {var y = b(cn(s, m, v), 2),w = mi(d, [y[0], y[1]], p ? 4 : 3);i = Ei(h, r, (0, o.Rd)(w, [f, g]));} else i = Ei(h, r, c);return [e.createElement("div", { className: ii("control", "origin"), style: i, key: "beforeOrigin" })];} });function Pn(t) {var e = t.scrollContainer;return [e.scrollLeft, e.scrollTop];}var Dn = { name: "scrollable", canPinch: !0, props: ["scrollable", "scrollContainer", "scrollThreshold", "scrollThrottleTime", "getScrollPosition", "scrollOptions"], events: ["scroll", "scrollGroup"], dragRelation: "strong", dragStart: function (t, e) {var i = t.props,n = i.scrollContainer,r = void 0 === n ? t.getContainer() : n,s = i.scrollOptions,o = new c.A(),a = nn(r, !0);e.datas.dragScroll = o, t.state.dragScroll = o;var l = e.isControl ? "controlGesto" : "targetGesto",h = e.targets;o.on("scroll", function (i) {var n = i.container,r = i.direction,s = Vi(t, e, { scrollContainer: n, direction: r }),o = h ? "onScrollGroup" : "onScroll";h && (s.targets = h), zi(t, o, s);}).on("move", function (e) {var i = e.offsetX,n = e.offsetY,r = e.inputEvent;t[l].scrollBy(i, n, r.inputEvent, !1);}).on("scrollDrag", function (e) {(0, e.next)(t[l].getCurrentEvent());}), o.dragStart(e, y({ container: a }, s));}, checkScroll: function (t, e) {var i = e.datas.dragScroll;if (i) {var n = t.props,r = n.scrollContainer,s = void 0 === r ? t.getContainer() : r,o = n.scrollThreshold,a = void 0 === o ? 0 : o,l = n.scrollThrottleTime,c = void 0 === l ? 0 : l,h = n.getScrollPosition,u = void 0 === h ? Pn : h,d = n.scrollOptions;return i.drag(e, y({ container: s, threshold: a, throttleTime: c, getScrollPosition: function (t) {return u({ scrollContainer: t.container, direction: t.direction });} }, d)), !0;}}, drag: function (t, e) {return this.checkScroll(t, e);}, dragEnd: function (t, e) {e.datas.dragScroll.dragEnd(), e.datas.dragScroll = null;}, dragControlStart: function (t, e) {return this.dragStart(t, y(y({}, e), { isControl: !0 }));}, dragControl: function (t, e) {return this.drag(t, e);}, dragControlEnd: function (t, e) {return this.dragEnd(t, e);}, dragGroupStart: function (t, e) {return this.dragStart(t, y(y({}, e), { targets: t.props.targets }));}, dragGroup: function (t, e) {return this.drag(t, y(y({}, e), { targets: t.props.targets }));}, dragGroupEnd: function (t, e) {return this.dragEnd(t, y(y({}, e), { targets: t.props.targets }));}, dragGroupControlStart: function (t, e) {return this.dragStart(t, y(y({}, e), { targets: t.props.targets, isControl: !0 }));}, dragGroupControl: function (t, e) {return this.drag(t, y(y({}, e), { targets: t.props.targets }));}, dragGroupControEnd: function (t, e) {return this.dragEnd(t, y(y({}, e), { targets: t.props.targets }));}, unset: function (t) {var e,i = t.state;null === (e = i.dragScroll) || void 0 === e || e.dragEnd(), i.dragScroll = null;} },On = { name: "", props: ["target", "dragTargetSelf", "dragTarget", "dragContainer", "container", "warpSelf", "rootContainer", "useResizeObserver", "useMutationObserver", "zoom", "dragFocusedInput", "transformOrigin", "ables", "className", "pinchThreshold", "pinchOutside", "triggerAblesSimultaneously", "checkInput", "cspNonce", "translateZ", "hideDefaultLines", "props", "flushSync", "stopPropagation", "preventClickEventOnDrag", "preventClickDefault", "viewContainer", "persistData", "useAccuratePosition", "firstRenderState", "linePadding", "controlPadding", "preventDefault", "preventRightClick", "preventWheelClick", "requestStyles"], events: ["changeTargets"] },In = x("padding", { props: ["padding"], render: function (t, e) {var i = t.props;if (i.dragArea) return [];var n = gn(i.padding || {}),r = n.left,s = n.top,a = n.right,l = n.bottom,c = t.getState(),h = c.renderPoses,u = [c.pos1, c.pos2, c.pos3, c.pos4],d = [];return r > 0 && d.push([0, 2]), s > 0 && d.push([0, 1]), a > 0 && d.push([1, 3]), l > 0 && d.push([2, 3]), d.map(function (t, i) {var n = b(t, 2),r = n[0],s = n[1],a = u[r],l = u[s],c = h[r],d = h[s],p = (0, o.qL)([0, 0], [100, 0], [0, 100], [100, 100], a, l, c, d);if (p.length) return e.createElement("div", { key: "padding".concat(i), className: ii("padding"), style: { transform: pi(p, !0) } });});} }),Fn = ["nw", "ne", "se", "sw"];function Rn(t, e) {var i = t[0] + t[1],n = i > e ? e / i : 1;return t[0] *= n, t[1] = e - t[1] * n, t;}var Ln = [1, 2, 5, 6],Nn = [0, 3, 4, 7],Vn = [1, -1, -1, 1],Bn = [1, 1, -1, -1];function jn(t, e, i, n, r, s, o, a) {void 0 === r && (r = 0), void 0 === s && (s = 0), void 0 === o && (o = i), void 0 === a && (a = n);var l = [],c = !1,h = t.filter(function (t) {return !t.virtual;}),u = h.map(function (t) {var h = t.horizontal,u = t.vertical,d = t.pos;if (u && !c && (c = !0, l.push("/")), c) {var p = Math.max(0, 1 === u ? d[1] - s : a - d[1]);return l.push(Ji(p, n, e)), p;}return p = Math.max(0, 1 === h ? d[0] - r : o - d[0]), l.push(Ji(p, i, e)), p;});return { radiusPoses: h, styles: l, raws: u };}function zn(t) {for (var e = [0, 0], i = [0, 0], n = t.length, r = 0; r < n; ++r) {var s = t[r];s.sub && (s.horizontal && (0 === e[1] && (e[0] = r), e[1] = r - e[0] + 1, i[0] = r + 1), s.vertical && (0 === i[1] && (i[0] = r), i[1] = r - i[0] + 1));}return { horizontalRange: e, verticalRange: i };}function Un(t, e, i, n, r, o, a) {var l, c, h, u;void 0 === o && (o = [0, 0]), void 0 === a && (a = !1);var d = t.indexOf("/"),p = (d > -1 ? t.slice(0, d) : t).length,f = t.slice(0, p),g = t.slice(p + 1),m = f.length,v = g.length,y = v > 0,x = b(f, 4),S = x[0],E = void 0 === S ? "0px" : S,C = x[1],k = void 0 === C ? E : C,T = x[2],A = void 0 === T ? E : T,M = x[3],_ = void 0 === M ? k : M,P = b(g, 4),D = P[0],O = void 0 === D ? E : D,I = P[1],F = void 0 === I ? y ? O : k : I,R = P[2],L = void 0 === R ? y ? O : A : R,N = P[3],V = void 0 === N ? y ? F : _ : N,B = [E, k, A, _].map(function (t) {return (0, s.jc)(t, e);}),j = [O, F, L, V].map(function (t) {return (0, s.jc)(t, i);}),z = B.slice(),U = j.slice();l = b(Rn([z[0], z[1]], e), 2), z[0] = l[0], z[1] = l[1], c = b(Rn([z[3], z[2]], e), 2), z[3] = c[0], z[2] = c[1], h = b(Rn([U[0], U[3]], i), 2), U[0] = h[0], U[3] = h[1], u = b(Rn([U[1], U[2]], i), 2), U[1] = u[0], U[2] = u[1];var H = a ? z : z.slice(0, Math.max(o[0], m)),q = a ? U : U.slice(0, Math.max(o[1], v));return w(w([], b(H.map(function (t, e) {var s = Fn[e];return { virtual: e >= m, horizontal: Vn[e], vertical: 0, pos: [n + t, r + (-1 === Bn[e] ? i : 0)], sub: !0, raw: B[e], direction: s };})), !1), b(q.map(function (t, i) {var s = Fn[i];return { virtual: i >= v, horizontal: 0, vertical: Bn[i], pos: [n + (-1 === Vn[i] ? e : 0), r + t], sub: !0, raw: j[i], direction: s };})), !1);}var Hn = [[0, -1, "n"], [1, 0, "e"]],qn = [[-1, -1, "nw"], [0, -1, "n"], [1, -1, "ne"], [1, 0, "e"], [1, 1, "se"], [0, 1, "s"], [-1, 1, "sw"], [-1, 0, "w"]];function $n(t, e, i) {var n = t.props.clipRelative,r = t.state,s = r.width,a = r.height,l = e,c = l.type,h = l.poses,u = "rect" === c,d = "circle" === c;if ("polygon" === c) return i.map(function (t) {return "".concat(Ji(t[0], s, n), " ").concat(Ji(t[1], a, n));});if (u || "inset" === c) {var p = i[1][1],f = i[3][0],g = i[7][0],m = i[5][1];if (u) return [p, f, m, g].map(function (t) {return "".concat(t, "px");});var v = [p, s - f, a - m, g].map(function (t, e) {return Ji(t, e % 2 ? s : a, n);});if (i.length > 8) {var x = b((0, o.Rd)(i[4], i[0]), 2),S = x[0],E = x[1];v.push.apply(v, w(["round"], b(jn(h.slice(8).map(function (t, e) {return y(y({}, t), { pos: i[e] });}), n, S, E, g, p, f, m).styles), !1));}return v;}if (d || "ellipse" === c) {var C = i[0],k = Ji(pn(i[1][1] - C[1]), d ? Math.sqrt((s * s + a * a) / 2) : a, n);return (v = d ? [k] : [Ji(pn(i[2][0] - C[0]), s, n), k]).push("at", Ji(C[0], s, n), Ji(C[1], a, n)), v;}}function Gn(t, e, i, n) {var r = [n, (n + e) / 2, e],s = [t, (t + i) / 2, i];return qn.map(function (t) {var e = b(t, 3),i = e[0],n = e[1],o = e[2],a = r[i + 1],l = s[n + 1];return { vertical: pn(n), horizontal: pn(i), direction: o, pos: [a, l] };});}function Wn(t) {var e = [1 / 0, -1 / 0],i = [1 / 0, -1 / 0];return t.forEach(function (t) {var n = t.pos;e[0] = Math.min(e[0], n[0]), e[1] = Math.max(e[1], n[0]), i[0] = Math.min(i[0], n[1]), i[1] = Math.max(i[1], n[1]);}), [pn(e[1] - e[0]), pn(i[1] - i[0])];}function Kn(t, e, i, n, r) {var o, a, l, c, u, d, p, f, g;if (t) {var m = r;if (!m) {var v = Mt(t),y = v("clipPath");m = "none" !== y ? y : v("clip");}if (m && "none" !== m && "auto" !== m || (m = n)) {var x = (0, s.ft)(m),S = x.prefix,E = void 0 === S ? m : S,C = x.value,k = void 0 === C ? "" : C,T = "circle" === E,A = " ";if ("polygon" === E) {A = ",";var M = (N = (0, s.cM)(k || "0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function (t) {var n = b(t.split(" "), 2),r = n[0],o = n[1];return { vertical: 1, horizontal: 1, pos: [(0, s.jc)(r, e), (0, s.jc)(o, i)] };}),_ = (0, h.Qk)(M.map(function (t) {return t.pos;}));return { type: E, clipText: m, poses: M, splitter: A, left: _.minX, right: _.maxX, top: _.minY, bottom: _.maxY };}if (T || "ellipse" === E) {var P,D,O,I = "",F = "",R = 0,L = 0,N = (0, s.Z3)(k);if (T) P = void 0 === (a = (o = b(N, 4))[0]) ? "50%" : a, I = void 0 === (l = o[2]) ? "50%" : l, F = void 0 === (c = o[3]) ? "50%" : c, R = (0, s.jc)(P, Math.sqrt((e * e + i * i) / 2)), L = R;else D = void 0 === (d = (u = b(N, 5))[0]) ? "50%" : d, O = void 0 === (p = u[1]) ? "50%" : p, I = void 0 === (f = u[3]) ? "50%" : f, F = void 0 === (g = u[4]) ? "50%" : g, R = (0, s.jc)(D, e), L = (0, s.jc)(O, i);var V = [(0, s.jc)(I, e), (0, s.jc)(F, i)];return M = w([{ vertical: 1, horizontal: 1, pos: V, direction: "nesw" }], b(Hn.slice(0, T ? 1 : 2).map(function (t) {return { vertical: pn(t[1]), horizontal: t[0], direction: t[2], sub: !0, pos: [V[0] + t[0] * R, V[1] + t[1] * L] };})), !1), { type: E, clipText: m, radiusX: R, radiusY: L, left: V[0] - R, top: V[1] - L, right: V[0] + R, bottom: V[1] + L, poses: M, splitter: A };}if ("inset" === E) {var B = (N = (0, s.Z3)(k || "0 0 0 0")).indexOf("round"),j = (B > -1 ? N.slice(0, B) : N).length,z = N.slice(j + 1),U = b(N.slice(0, j), 4),H = U[0],q = U[1],$ = void 0 === q ? H : q,G = U[2],W = void 0 === G ? H : G,K = U[3],Z = void 0 === K ? $ : K,Y = b([H, W].map(function (t) {return (0, s.jc)(t, i);}), 2),X = Y[0],J = Y[1],Q = b([Z, $].map(function (t) {return (0, s.jc)(t, e);}), 2),tt = Q[0],et = Q[1],it = e - et,nt = i - J,rt = Un(z, it - tt, nt - X, tt, X);return { type: "inset", clipText: m, poses: M = w(w([], b(Gn(X, it, nt, tt)), !1), b(rt), !1), top: X, left: tt, right: it, bottom: nt, radius: z, splitter: A };}if ("rect" === E) {A = ",";var st = b((N = (0, s.cM)(k || "0px, ".concat(e, "px, ").concat(i, "px, 0px"))).map(function (t) {return (0, s.hg)(t).value;}), 4),ot = st[0];return { type: "rect", clipText: m, poses: M = Gn(ot, et = st[1], J = st[2], tt = st[3]), top: ot, right: et, bottom: J, left: tt, values: N, splitter: A };}}}}var Zn = { name: "clippable", props: ["clippable", "defaultClipPath", "customClipPath", "keepRatio", "clipRelative", "clipArea", "dragWithClip", "clipTargetBounds", "clipVerticalGuidelines", "clipHorizontalGuidelines", "clipSnapThreshold"], events: ["clipStart", "clip", "clipEnd"], css: [".control.clip-control {\nbackground: #6d6;\ncursor: pointer;\n}\n.control.clip-control.clip-radius {\nbackground: #d66;\n}\n.line.clip-line {\nbackground: #6e6;\ncursor: move;\nz-index: 1;\n}\n.clip-area {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.clip-ellipse {\nposition: absolute;\ncursor: move;\nborder: 1px solid #6d6;\nborder: var(--zoompx) solid #6d6;\nborder-radius: 50%;\ntransform-origin: 0px 0px;\n}", ":host {\n--bounds-color: #d66;\n}", ".guideline {\npointer-events: none;\nz-index: 2;\n}", ".line.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}"], render: function (t, e) {var i = t.props,n = i.customClipPath,r = i.defaultClipPath,a = i.clipArea,l = i.zoom,c = i.groupable,h = t.getState(),u = h.target,d = h.width,p = h.height,f = h.allMatrix,g = h.is3d,m = h.left,v = h.top,y = h.pos1,x = h.pos2,S = h.pos3,E = h.pos4,C = h.clipPathState,k = h.snapBoundInfos,T = h.rotation;if (!u || c) return [];var A = Kn(u, d, p, r || "inset", C || n);if (!A) return [];var M = g ? 4 : 3,_ = A.type,P = A.poses.map(function (t) {var e = mi(f, t.pos, M);return [e[0] - m, e[1] - v];}),D = [],O = [],I = "rect" === _,F = "inset" === _,R = "polygon" === _;if (I || F || R) {var L = F ? P.slice(0, 8) : P;O = L.map(function (t, i) {var n = 0 === i ? L[L.length - 1] : L[i - 1],r = (0, s.Mu)(n, t),o = xi(n, t);return e.createElement("div", { key: "clipLine".concat(i), className: ii("line", "clip-line", "snap-control"), "data-clip-index": i, style: { width: "".concat(o, "px"), transform: "translate(".concat(n[0], "px, ").concat(n[1], "px) rotate(").concat(r, "rad) scaleY(").concat(l, ")") } });});}if (D = P.map(function (t, i) {return e.createElement("div", { key: "clipControl".concat(i), className: ii("control", "clip-control", "snap-control"), "data-clip-index": i, style: { transform: "translate(".concat(t[0], "px, ").concat(t[1], "px) rotate(").concat(T, "rad) scale(").concat(l, ")") } });}), F && D.push.apply(D, w([], b(P.slice(8).map(function (t, i) {return e.createElement("div", { key: "clipRadiusControl".concat(i), className: ii("control", "clip-control", "clip-radius", "snap-control"), "data-clip-index": 8 + i, style: { transform: "translate(".concat(t[0], "px, ").concat(t[1], "px) rotate(").concat(T, "rad) scale(").concat(l, ")") } });})), !1)), "circle" === _ || "ellipse" === _) {var N = A.left,V = A.top,B = A.radiusX,j = A.radiusY,z = b((0, o.Rd)(mi(f, [N, V], M), mi(f, [0, 0], M)), 2),U = z[0],H = z[1],q = "none";if (!a) {for (var $ = Math.max(10, B / 5, j / 5), G = [], W = 0; W <= $; ++W) {var K = 2 * Math.PI / $ * W;G.push([B + (B - l) * Math.cos(K), j + (j - l) * Math.sin(K)]);}G.push([B, -2]), G.push([-2, -2]), G.push([-2, 2 * j + 2]), G.push([2 * B + 2, 2 * j + 2]), G.push([2 * B + 2, -2]), G.push([B, -2]), q = "polygon(".concat(G.map(function (t) {return "".concat(t[0], "px ").concat(t[1], "px");}).join(", "), ")");}D.push(e.createElement("div", { key: "clipEllipse", className: ii("clip-ellipse", "snap-control"), style: { width: "".concat(2 * B, "px"), height: "".concat(2 * j, "px"), clipPath: q, transform: "translate(".concat(-m + U, "px, ").concat(-v + H, "px) ").concat(pi(f)) } }));}if (a) {var Z = yi(w([y, x, S, E], b(P), !1)),Y = Z.width,X = Z.height,J = Z.left,Q = Z.top;(R || I || F) && (G = F ? P.slice(0, 8) : P, D.push(e.createElement("div", { key: "clipArea", className: ii("clip-area", "snap-control"), style: { width: "".concat(Y, "px"), height: "".concat(X, "px"), transform: "translate(".concat(J, "px, ").concat(Q, "px)"), clipPath: "polygon(".concat(G.map(function (t) {return "".concat(t[0] - J, "px ").concat(t[1] - Q, "px");}).join(", "), ")") } })));}return k && ["vertical", "horizontal"].forEach(function (t) {var i = k[t],n = "horizontal" === t;i.isSnap && O.push.apply(O, w([], b(i.snap.posInfos.map(function (i, r) {var s = i.pos,a = (0, o.Rd)(mi(f, n ? [0, s] : [s, 0], M), [m, v]),c = (0, o.Rd)(mi(f, n ? [d, s] : [s, p], M), [m, v]);return Rt(e, "", a, c, l, "clip".concat(t, "snap").concat(r), "guideline");})), !1)), i.isBound && O.push.apply(O, w([], b(i.bounds.map(function (i, r) {var s = i.pos,a = (0, o.Rd)(mi(f, n ? [0, s] : [s, 0], M), [m, v]),c = (0, o.Rd)(mi(f, n ? [d, s] : [s, p], M), [m, v]);return Rt(e, "", a, c, l, "clip".concat(t, "bounds").concat(r), "guideline", "bounds", "bold");})), !1));}), w(w([], b(D), !1), b(O), !1);}, dragControlCondition: function (t, e) {return e.inputEvent && (e.inputEvent.target.getAttribute("class") || "").indexOf("clip") > -1;}, dragStart: function (t, e) {var i = t.props.dragWithClip;return !(void 0 === i || i) && this.dragControlStart(t, e);}, drag: function (t, e) {return this.dragControl(t, y(y({}, e), { isDragTarget: !0 }));}, dragEnd: function (t, e) {return this.dragControlEnd(t, e);}, dragControlStart: function (t, e) {var i = t.state,n = t.props,r = n.defaultClipPath,s = n.customClipPath,o = i.target,a = i.width,l = i.height,c = e.inputEvent ? e.inputEvent.target : null,h = c && c.getAttribute("class") || "",u = e.datas,d = Kn(o, a, l, r || "inset", s);if (!d) return !1;var p = d.clipText;return !1 === zi(t, "onClipStart", Vi(t, e, { clipType: d.type, clipStyle: p, poses: d.poses.map(function (t) {return t.pos;}) })) ? (u.isClipStart = !1, !1) : (u.isControl = h && h.indexOf("clip-control") > -1, u.isLine = h.indexOf("clip-line") > -1, u.isArea = h.indexOf("clip-area") > -1 || h.indexOf("clip-ellipse") > -1, u.clipIndex = c ? parseInt(c.getAttribute("data-clip-index"), 10) : -1, u.clipPath = d, u.isClipStart = !0, i.clipPathState = p, tt(t, e), !0);}, dragControl: function (t, e) {var i,n,r,a = e.datas,l = e.originalDatas,c = e.isDragTarget;if (!a.isClipStart) return !1;var h = a,u = h.isControl,d = h.isLine,p = h.isArea,f = h.clipIndex,g = h.clipPath;if (!g) return !1;var m = Ci(t.props, "clippable"),v = m.keepRatio,x = 0,S = 0,E = l.draggable,C = st(e);c && E ? (i = b(E.prevBeforeDist, 2), x = i[0], S = i[1]) : (n = b(C, 2), x = n[0], S = n[1]);var k = [x, S],T = t.state,A = T.width,M = T.height,_ = !p && !u && !d,P = g.type,D = g.poses,O = g.splitter,I = D.map(function (t) {return t.pos;});_ && (x = -x, S = -S);var F = !u || "nesw" === D[f].direction,R = "inset" === P || "rect" === P,L = D.map(function () {return [0, 0];});if (u && !F) {var N = D[f],V = N.horizontal,B = N.vertical,j = [x * pn(V), S * pn(B)];L = function (t, e, i, n, r) {var s = t[e],o = s.direction,a = s.sub,l = t.map(function () {return [0, 0];}),c = o ? o.split("") : [];if (n && e < 8) {var h = c.filter(function (t) {return "w" === t || "e" === t;}),u = c.filter(function (t) {return "n" === t || "s" === t;}),d = h[0],p = u[0];l[e] = i;var f = b(Wn(t), 2),g = f[0],m = f[1],v = g && m ? g / m : 0;if (v && r) {var y = t[(e + 4) % 8].pos,w = [0, 0];o.indexOf("w") > -1 ? w[0] = -1 : o.indexOf("e") > -1 && (w[0] = 1), o.indexOf("n") > -1 ? w[1] = -1 : o.indexOf("s") > -1 && (w[1] = 1);var x = on([g, m], i, v, w, !0),S = g + x[0],E = m + x[1],C = y[1],k = y[1],T = y[0],A = y[0];-1 === w[0] ? T = A - S : 1 === w[0] ? A = T + S : (T -= S / 2, A += S / 2), -1 === w[1] ? C = k - E : k = 1 === w[1] ? C + E : (C = k - E / 2) + E;var M = Gn(C, A, k, T);t.forEach(function (t, e) {l[e][0] = M[e].pos[0] - t.pos[0], l[e][1] = M[e].pos[1] - t.pos[1];});} else t.forEach(function (t, e) {var n = t.direction;n && (n.indexOf(d) > -1 && (l[e][0] = i[0]), n.indexOf(p) > -1 && (l[e][1] = i[1]));}), d && (l[1][0] = i[0] / 2, l[5][0] = i[0] / 2), p && (l[3][1] = i[1] / 2, l[7][1] = i[1] / 2);} else o && !a ? c.forEach(function (e) {var n = "n" === e || "s" === e;t.forEach(function (t, r) {var s = t.direction,o = t.horizontal,a = t.vertical;s && -1 !== s.indexOf(e) && (l[r] = [n || !o ? 0 : i[0], n && a ? i[1] : 0]);});}) : l[e] = i;return l;}(D, f, j, R, v);} else F && (L = I.map(function () {return [x, S];}));var z = I.map(function (t, e) {return (0, o.tY)(t, L[e]);}),U = w([], b(z), !1);T.snapBoundInfos = null;var H = "circle" === g.type,q = "ellipse" === g.type;if (H || q) {var $ = pn((lt = yi(z)).bottom - lt.top),G = pn(q ? lt.right - lt.left : $),W = z[0][1] + $,K = z[0][0] - G,Z = z[0][0] + G;H && (U.push([Z, lt.bottom]), L.push([1, 0])), U.push([lt.left, W]), L.push([0, 1]), U.push([K, lt.bottom]), L.push([1, 0]);}var Y = He((m.clipHorizontalGuidelines || []).map(function (t) {return (0, s.jc)("".concat(t), M);}), (m.clipVerticalGuidelines || []).map(function (t) {return (0, s.jc)("".concat(t), A);}), A, M),X = [],J = [];if (H || q) X = [U[4][0], U[2][0]], J = [U[1][1], U[3][1]];else if (R) {var Q = [U[0], U[2], U[4], U[6]],tt = [L[0], L[2], L[4], L[6]];X = Q.filter(function (t, e) {return tt[e][0];}).map(function (t) {return t[0];}), J = Q.filter(function (t, e) {return tt[e][1];}).map(function (t) {return t[1];});} else X = U.filter(function (t, e) {return L[e][0];}).map(function (t) {return t[0];}), J = U.filter(function (t, e) {return L[e][1];}).map(function (t) {return t[1];});var et = [0, 0],it = Se(Y, m.clipTargetBounds && { left: 0, top: 0, right: A, bottom: M }, X, J, 5, 5),nt = it.horizontal,rt = it.vertical,ot = nt.offset,at = rt.offset;if (nt.isBound && (et[1] += ot), rt.isBound && (et[0] += at), (q || H) && 0 === L[0][0] && 0 === L[0][1]) {var lt,ct = (lt = yi(z)).bottom - lt.top,ht = q ? lt.right - lt.left : ct;ht -= rt.isBound ? pn(at) : 0 === rt.snapIndex ? -at : at, ct -= nt.isBound ? pn(ot) : 0 === nt.snapIndex ? -ot : ot, H && (ht = ct = le(rt, nt) > 0 ? ct : ht);var ut = U[0];U[1][1] = ut[1] - ct, U[2][0] = ut[0] + ht, U[3][1] = ut[1] + ct, U[4][0] = ut[0] - ht;} else if (R && v && u) {var dt = b(Wn(D), 2),pt = dt[0],ft = dt[1],gt = pt && ft ? pt / ft : 0,mt = D[f].direction || "",vt = U[1][1];W = U[5][1], K = U[7][0], Z = U[3][0], pn(ot) <= pn(at) ? ot = dn(ot) * pn(at) / gt : at = dn(at) * pn(ot) * gt, mt.indexOf("w") > -1 ? K -= at : mt.indexOf("e") > -1 ? Z -= at : (K += at / 2, Z -= at / 2), mt.indexOf("n") > -1 ? vt -= ot : mt.indexOf("s") > -1 ? W -= ot : (vt += ot / 2, W -= ot / 2);var yt = Gn(vt, Z, W, K);U.forEach(function (t, e) {var i;i = b(yt[e].pos, 2), t[0] = i[0], t[1] = i[1];});} else U.forEach(function (t, e) {var i = L[e];i[0] && (t[0] -= at), i[1] && (t[1] -= ot);});var bt = $n(t, g, z),wt = "".concat(P, "(").concat(bt.join(O), ")");if (T.clipPathState = wt, H || q ? (X = [U[4][0], U[2][0]], J = [U[1][1], U[3][1]]) : R ? (X = (Q = [U[0], U[2], U[4], U[6]]).map(function (t) {return t[0];}), J = Q.map(function (t) {return t[1];})) : (X = U.map(function (t) {return t[0];}), J = U.map(function (t) {return t[1];})), T.snapBoundInfos = Se(Y, m.clipTargetBounds && { left: 0, top: 0, right: A, bottom: M }, X, J, 1, 1), E) {var xt = T.is3d,St = T.allMatrix,Et = xt ? 4 : 3,Ct = et;c && (Ct = [k[0] + et[0] - C[0], k[1] + et[1] - C[1]]), E.deltaOffset = (0, o.lw)(St, [Ct[0], Ct[1], 0, 0], Et);}return zi(t, "onClip", Vi(t, e, y({ clipEventType: "changed", clipType: P, poses: z, clipStyle: wt, clipStyles: bt, distX: x, distY: S }, Li(((r = {})["rect" === P ? "clip" : "clipPath"] = wt, r), e)))), !0;}, dragControlEnd: function (t, e) {this.unset(t);var i = e.isDrag,n = e.datas,r = e.isDouble,s = n.isLine,o = n.isClipStart,a = n.isControl;return !!o && (zi(t, "onClipEnd", Bi(t, e, {})), r && (a ? function (t, e) {var i = e.datas,n = i.clipPath,r = i.clipIndex,s = n,o = s.type,a = s.poses,l = s.splitter,c = a.map(function (t) {return t.pos;}),h = c.length;if ("polygon" === o) a.splice(r, 1), c.splice(r, 1);else {if ("inset" !== o) return;if (r < 8) return;if (function (t, e, i, n, r) {void 0 === r && (r = e.length);var s = zn(t.slice(8)),o = s.horizontalRange,a = s.verticalRange,l = i - 8,c = 0;if (0 === l) c = r;else if (l > 0 && l < o[1]) c = o[1] - l;else {if (!(l >= a[0])) return;c = a[0] + a[1] - l;}t.splice(i, c), e.splice(i, c);}(a, c, r, 0, h), h === a.length) return;}var u = $n(t, n, c),d = "".concat(o, "(").concat(u.join(l), ")");zi(t, "onClip", Vi(t, e, y({ clipEventType: "removed", clipType: o, poses: c, clipStyles: u, clipStyle: d, distX: 0, distY: 0 }, Li({ clipPath: d }, e))));}(t, e) : s && function (t, e) {var i = b(Q(t, e), 2),n = i[0],r = i[1],s = e.datas,o = s.clipPath,a = s.clipIndex,l = o,c = l.type,h = l.poses,u = l.splitter,d = h.map(function (t) {return t.pos;});if ("polygon" === c) d.splice(a, 0, [n, r]);else {if ("inset" !== c) return;var p = Ln.indexOf(a),f = Nn.indexOf(a),g = h.length;if (function (t, e, i, n, r, s, o, a, l, c, h) {void 0 === c && (c = 0), void 0 === h && (h = 0);var u = zn(t.slice(8)),d = u.horizontalRange,p = u.verticalRange;if (n > -1) for (var f = 1 === Vn[n] ? s - c : a - s, g = d[1]; g <= n; ++g) {var m = 1 === Bn[g] ? h : l,v = 0;if (n === g ? v = s : 0 === g ? v = c + f : -1 === Vn[g] && (v = a - (e[8][0] - c)), t.splice(8 + g, 0, { horizontal: Vn[g], vertical: 0, pos: [v, m] }), e.splice(8 + g, 0, [v, m]), 0 === g) break;} else if (r > -1) {var y = 1 === Bn[r] ? o - h : l - o;if (0 === d[1] && 0 === p[1]) {var b = [c + y, h];t.push({ horizontal: Vn[0], vertical: 0, pos: b }), e.push(b);}var w = p[0];for (g = p[1]; g <= r && (v = 1 === Vn[g] ? c : a, m = 0, r === g ? m = o : 0 === g ? m = h + y : 1 === Bn[g] ? m = e[8 + w][1] : -1 === Bn[g] && (m = l - (e[8 + w][1] - h)), t.push({ horizontal: 0, vertical: Bn[g], pos: [v, m] }), e.push([v, m]), 0 !== g); ++g);}}(h, d, 0, p, f, n, r, d[4][0], d[4][1], d[0][0], d[0][1]), g === h.length) return;}var m = $n(t, o, d),v = "".concat(c, "(").concat(m.join(u), ")");zi(t, "onClip", Vi(t, e, y({ clipEventType: "added", clipType: c, poses: d, clipStyles: m, clipStyle: v, distX: 0, distY: 0 }, Li({ clipPath: v }, e))));}(t, e)), r || i);}, unset: function (t) {t.state.clipPathState = "", t.state.snapBoundInfos = null;} },Yn = { name: "originDraggable", props: ["originDraggable", "originRelative"], events: ["dragOriginStart", "dragOrigin", "dragOriginEnd"], css: [":host[data-able-origindraggable] .control.origin {\npointer-events: auto;\n}"], dragControlCondition: function (t, e) {return e.isRequest ? "originDraggable" === e.requestAble : (0, s.nB)(e.inputEvent.target, ii("origin"));}, dragControlStart: function (t, e) {var i = e.datas;tt(t, e);var n = Vi(t, e, { dragStart: Ce.dragStart(t, new X().dragStart([0, 0], e)) }),r = zi(t, "onDragOriginStart", n);return i.startOrigin = t.state.transformOrigin, i.startTargetOrigin = t.state.targetOrigin, i.prevOrigin = [0, 0], i.isDragOrigin = !0, !1 === r ? (i.isDragOrigin = !1, !1) : n;}, dragControl: function (t, e) {var i = e.datas,n = e.isPinch,r = e.isRequest;if (!i.isDragOrigin) return !1;var s = b(st(e), 2),a = s[0],l = s[1],c = t.state,h = c.width,u = c.height,d = c.offsetMatrix,p = c.targetMatrix,f = c.is3d,g = t.props.originRelative,m = void 0 === g || g,v = f ? 4 : 3,w = [a, l];if (r) {var x = e.distOrigin;(x[0] || x[1]) && (w = x);}var S = (0, o.tY)(i.startOrigin, w),E = (0, o.tY)(i.startTargetOrigin, w),C = (0, o.Rd)(w, i.prevOrigin),k = ct(d, p, S, v),T = t.getRect(),A = yi(vi(k, h, u, v)),M = [T.left - A.left, T.top - A.top];i.prevOrigin = w;var _ = [Ji(E[0], h, m), Ji(E[1], u, m)].join(" "),P = Ce.drag(t, Y(e, t.state, M, !!n, !1)),D = Vi(t, e, y(y({ width: h, height: u, origin: S, dist: w, delta: C, transformOrigin: _, drag: P }, Li({ transformOrigin: _, transform: P.transform }, e)), { afterTransform: P.transform }));return zi(t, "onDragOrigin", D), D;}, dragControlEnd: function (t, e) {return !!e.datas.isDragOrigin && (zi(t, "onDragOriginEnd", Bi(t, e, {})), !0);}, dragGroupControlCondition: function (t, e) {return this.dragControlCondition(t, e);}, dragGroupControlStart: function (t, e) {return !!this.dragControlStart(t, e);}, dragGroupControl: function (t, e) {var i = this.dragControl(t, e);return !!i && (t.transformOrigin = i.transformOrigin, !0);}, request: function (t) {var e = {},i = t.getRect(),n = 0,r = 0,s = i.transformOrigin,o = [0, 0];return { isControl: !0, requestStart: function () {return { datas: e };}, request: function (t) {return "deltaOrigin" in t ? (o[0] += t.deltaOrigin[0], o[1] += t.deltaOrigin[1]) : "origin" in t ? (o[0] = t.origin[0] - s[0], o[1] = t.origin[1] - s[1]) : ("x" in t ? n = t.x - i.left : "deltaX" in t && (n += t.deltaX), "y" in t ? r = t.y - i.top : "deltaY" in t && (r += t.deltaY)), { datas: e, distX: n, distY: r, distOrigin: o };}, requestEnd: function () {return { datas: e, isDrag: !0 };} };} };function Xn(t, e, i, n, r) {return void 0 === n && (n = [0, 0]), Un(t && "0px" !== t ? (0, s.Z3)(t) : [], e, i, 0, 0, n, r);}function Jn(t, e, i, n, r) {var s = t.state,o = s.width,a = s.height,l = jn(r, t.props.roundRelative, o, a),c = l.raws,h = l.styles,u = function (t, e) {return void 0 === e && (e = t.map(function (t) {return t.raw;})), { horizontals: t.map(function (t, i) {return t.horizontal ? e[i] : null;}).filter(function (t) {return null != t;}), verticals: t.map(function (t, i) {return t.vertical ? e[i] : null;}).filter(function (t) {return null != t;}) };}(l.radiusPoses, c),d = u.horizontals,p = u.verticals,f = h.join(" ");s.borderRadiusState = f;var g = Vi(t, e, y({ horizontals: d, verticals: p, borderRadius: f, width: o, height: a, delta: n, dist: i }, Li({ borderRadius: f }, e)));return zi(t, "onRound", g), g;}function Qn(t) {var e,i,n = t.getState().style,r = n.borderRadius || "";if (!r && t.props.groupable) {var s = t.moveables[0],o = t.getTargets()[0];o && ((null == s ? void 0 : s.props.target) === o ? (r = null !== (i = null === (e = t.moveables[0]) || void 0 === e ? void 0 : e.state.style.borderRadius) && void 0 !== i ? i : "", n.borderRadius = r) : (r = Ui(o).borderRadius, n.borderRadius = r));}return r;}var tr = { name: "roundable", props: ["roundable", "roundRelative", "minRoundControls", "maxRoundControls", "roundClickable", "roundPadding", "isDisplayShadowRoundControls"], events: ["roundStart", "round", "roundEnd", "roundGroupStart", "roundGroup", "roundGroupEnd"], css: [".control.border-radius {\nbackground: #d66;\ncursor: pointer;\nz-index: 3;\n}", ".control.border-radius.vertical {\nbackground: #d6d;\nz-index: 2;\n}", ".control.border-radius.virtual {\nopacity: 0.5;\nz-index: 1;\n}", ":host.round-line-clickable .line.direction {\ncursor: pointer;\n}"], className: function (t) {var e = t.props.roundClickable;return !0 === e || "line" === e ? ii("round-line-clickable") : "";}, requestStyle: function () {return ["borderRadius"];}, requestChildStyle: function () {return ["borderRadius"];}, render: function (t, e) {var i = t.getState(),n = i.target,r = i.width,s = i.height,a = i.allMatrix,l = i.is3d,c = i.left,h = i.top,u = i.borderRadiusState,d = t.props,p = d.minRoundControls,f = void 0 === p ? [0, 0] : p,g = d.maxRoundControls,m = void 0 === g ? [4, 4] : g,v = d.zoom,y = d.roundPadding,x = void 0 === y ? 0 : y,S = d.isDisplayShadowRoundControls,E = d.groupable;if (!n) return null;var C = u || Qn(t),k = l ? 4 : 3,T = Xn(C, r, s, f, !0);if (!T) return null;var A = 0,M = 0,_ = E ? [0, 0] : [c, h];return T.map(function (t, i) {var n = t.horizontal,r = t.vertical,s = t.direction || "",l = w([], b(t.pos), !1);M += Math.abs(n), A += Math.abs(r), n && s.indexOf("n") > -1 && (l[1] -= x), r && s.indexOf("w") > -1 && (l[0] -= x), n && s.indexOf("s") > -1 && (l[1] += x), r && s.indexOf("e") > -1 && (l[0] += x);var c = (0, o.Rd)(mi(a, l, k), _),h = S && "horizontal" !== S,u = t.vertical ? A <= m[1] && (h || !t.virtual) : M <= m[0] && (S || !t.virtual);return e.createElement("div", { key: "borderRadiusControl".concat(i), className: ii("control", "border-radius", t.vertical ? "vertical" : "", t.virtual ? "virtual" : ""), "data-radius-index": i, style: { display: u ? "block" : "none", transform: "translate(".concat(c[0], "px, ").concat(c[1], "px) scale(").concat(v, ")") } });});}, dragControlCondition: function (t, e) {if (!e.inputEvent || e.isRequest) return !1;var i = e.inputEvent.target.getAttribute("class") || "";return i.indexOf("border-radius") > -1 || i.indexOf("moveable-line") > -1 && i.indexOf("moveable-direction") > -1;}, dragGroupControlCondition: function (t, e) {return this.dragControlCondition(t, e);}, dragControlStart: function (t, e) {var i = e.inputEvent,n = e.datas,r = i.target,s = r.getAttribute("class") || "",o = s.indexOf("border-radius") > -1,a = s.indexOf("moveable-line") > -1 && s.indexOf("moveable-direction") > -1,l = o ? parseInt(r.getAttribute("data-radius-index"), 10) : -1,c = -1;if (a) {var h = r.getAttribute("data-line-key") || "";h && (c = parseInt(h.replace(/render-line-/g, ""), 10), isNaN(c) && (c = -1));}if (!o && !a) return !1;var u = Vi(t, e, {});if (!1 === zi(t, "onRoundStart", u)) return !1;n.lineIndex = c, n.controlIndex = l, n.isControl = o, n.isLine = a, tt(t, e);var d = t.props,p = d.roundRelative,f = d.minRoundControls,g = void 0 === f ? [0, 0] : f,m = t.state,v = m.width,y = m.height;n.isRound = !0, n.prevDist = [0, 0];var b = Xn(Qn(t) || "", v, y, g, !0) || [];return n.controlPoses = b, m.borderRadiusState = jn(b, p, v, y).styles.join(" "), u;}, dragControl: function (t, e) {var i = e.datas,n = i.controlPoses;if (!i.isRound || !i.isControl || !n.length) return !1;var r = i.controlIndex,s = b(st(e), 2),a = s[0],l = s[1],c = [a, l],h = (0, o.Rd)(c, i.prevDist),u = t.props.maxRoundControls,d = void 0 === u ? [4, 4] : u,p = t.state,f = p.width,g = p.height,m = n[r],v = m.vertical,w = m.horizontal,x = n.map(function (t) {var e = t.horizontal,i = t.vertical,n = [e * w * c[0], i * v * c[1]];if (e) {if (1 === d[0]) return n;if (d[0] < 4 && e !== w) return n;} else {if (0 === d[1]) return n[1] = i * w * c[0] / f * g, n;if (v) {if (1 === d[1]) return n;if (d[1] < 4 && i !== v) return n;}}return [0, 0];});x[r] = c;var S = n.map(function (t, e) {return y(y({}, t), { pos: (0, o.tY)(t.pos, x[e]) });});return r < 4 ? S.slice(0, r + 1).forEach(function (t) {t.virtual = !1;}) : S.slice(4, r + 1).forEach(function (t) {t.virtual = !1;}), i.prevDist = [a, l], Jn(t, e, c, h, S);}, dragControlEnd: function (t, e) {var i = t.state;i.borderRadiusState = "";var n = e.datas,r = e.isDouble;if (!n.isRound) return !1;var s = n.isControl,o = n.controlIndex,a = n.isLine,l = n.lineIndex,c = n.controlPoses,h = c.filter(function (t) {return t.virtual;}).length,u = t.props.roundClickable,d = void 0 === u || u;if (r && d) {if (!s || !0 !== d && "control" !== d) {if (a && (!0 === d || "line" === d)) {var p = b(Q(t, e), 2);!function (t, e, i, n) {var r = t.filter(function (t) {var e = t.virtual;return t.horizontal && !e;}).length,s = t.filter(function (t) {var e = t.virtual;return t.vertical && !e;}).length,o = -1;if (0 === e && (0 === r ? o = 0 : 1 === r && (o = 1)), 2 === e && (r <= 2 ? o = 2 : r <= 3 && (o = 3)), 3 === e && (0 === s ? o = 4 : s < 4 && (o = 7)), 1 === e && (s <= 1 ? o = 5 : s <= 2 && (o = 6)), -1 !== o && t[o].virtual) {var a = t[o];!function (t, e) {e < 4 ? t.slice(0, e + 1).forEach(function (t) {t.virtual = !1;}) : (t[0].virtual && (t[0].virtual = !1), t.slice(4, e + 1).forEach(function (t) {t.virtual = !1;}));}(t, o), o < 4 ? a.pos[0] = i : a.pos[1] = n;}}(c, l, p[0], p[1]);}} else !function (t, e) {e < 4 ? t.slice(e, 4).forEach(function (t) {t.virtual = !0;}) : t.slice(e).forEach(function (t) {t.virtual = !0;});}(c, o);h !== c.filter(function (t) {return t.virtual;}).length && Jn(t, e, [0, 0], [0, 0], c);}var f = Bi(t, e, {});return zi(t, "onRoundEnd", f), i.borderRadiusState = "", f;}, dragGroupControlStart: function (t, e) {var i = this.dragControlStart(t, e);if (!i) return !1;var n = t.moveables,r = t.props.targets,s = _t(t, "roundable", e);return zi(t, "onRoundGroupStart", y({ targets: t.props.targets, events: s.map(function (t, e) {return y(y({}, t), { target: r[e], moveable: n[e], currentTarget: n[e] });}) }, i)), i;}, dragGroupControl: function (t, e) {var i = this.dragControl(t, e);if (!i) return !1;var n = t.moveables,r = t.props.targets,s = _t(t, "roundable", e),o = y({ targets: t.props.targets, events: s.map(function (t, e) {return y(y(y({}, t), { target: r[e], moveable: n[e], currentTarget: n[e] }), Li({ borderRadius: i.borderRadius }, t));}) }, i);return zi(t, "onRoundGroup", o), o;}, dragGroupControlEnd: function (t, e) {var i = t.moveables,n = t.props.targets,r = _t(t, "roundable", e);ji(t, "onRound", function (e) {var s = y({ targets: t.props.targets, events: r.map(function (t, r) {return y(y(y({}, t), { target: n[r], moveable: i[r], currentTarget: i[r] }), Li({ borderRadius: e.borderRadius }, t));}) }, e);zi(t, "onRoundGroup", s);});var s = this.dragControlEnd(t, e);if (!s) return !1;var o = y({ targets: t.props.targets, events: r.map(function (t, e) {var r;return y(y({}, t), { target: n[e], moveable: i[e], currentTarget: i[e], lastEvent: null === (r = t.datas) || void 0 === r ? void 0 : r.lastEvent });}) }, s);return zi(t, "onRoundGroupEnd", o), o;}, unset: function (t) {t.state.borderRadiusState = "";} },er = { isPinch: !0, name: "beforeRenderable", props: [], events: ["beforeRenderStart", "beforeRender", "beforeRenderEnd", "beforeRenderGroupStart", "beforeRenderGroup", "beforeRenderGroupEnd"], dragRelation: "weak", setTransform: function (t, e) {var i = t.state,n = i.is3d,r = i.targetMatrix,a = i.inlineTransform,l = n ? "matrix3d(".concat(r.join(","), ")") : "matrix(".concat((0, o.ZB)(r, !0), ")"),c = a && "none" !== a ? a : l;e.datas.startTransforms = function (t, e) {var i = e ? 4 : 3,n = (0, o.k8)(i);return t === "matrix".concat(e ? "3d" : "", "(").concat(n.join(","), ")") || "matrix(1,0,0,1,0,0)" === t;}(c, n) ? [] : (0, s.Z3)(c);}, resetStyle: function (t) {var e = t.datas;e.nextStyle = {}, e.nextTransforms = t.datas.startTransforms, e.nextTransformAppendedIndexes = [];}, fillDragStartParams: function (t, e) {return Vi(t, e, { setTransform: function (t) {e.datas.startTransforms = (0, s.cy)(t) ? t : (0, s.Z3)(t);}, isPinch: !!e.isPinch });}, fillDragParams: function (t, e) {return Vi(t, e, { isPinch: !!e.isPinch });}, dragStart: function (t, e) {this.setTransform(t, e), this.resetStyle(e), zi(t, "onBeforeRenderStart", this.fillDragStartParams(t, e));}, drag: function (t, e) {e.datas.startTransforms || this.setTransform(t, e), this.resetStyle(e), zi(t, "onBeforeRender", Vi(t, e, { isPinch: !!e.isPinch }));}, dragEnd: function (t, e) {e.datas.startTransforms || (this.setTransform(t, e), this.resetStyle(e)), zi(t, "onBeforeRenderEnd", Vi(t, e, { isPinch: !!e.isPinch, isDrag: e.isDrag }));}, dragGroupStart: function (t, e) {var i = this;this.dragStart(t, e);var n = _t(t, "beforeRenderable", e),r = t.moveables,s = n.map(function (t, e) {var n = r[e];return i.setTransform(n, t), i.resetStyle(t), i.fillDragStartParams(n, t);});zi(t, "onBeforeRenderGroupStart", Vi(t, e, { isPinch: !!e.isPinch, targets: t.props.targets, setTransform: function () {}, events: s }));}, dragGroup: function (t, e) {var i = this;this.drag(t, e);var n = _t(t, "beforeRenderable", e),r = t.moveables,s = n.map(function (t, e) {var n = r[e];return i.resetStyle(t), i.fillDragParams(n, t);});zi(t, "onBeforeRenderGroup", Vi(t, e, { isPinch: !!e.isPinch, targets: t.props.targets, events: s }));}, dragGroupEnd: function (t, e) {this.dragEnd(t, e), zi(t, "onBeforeRenderGroupEnd", Vi(t, e, { isPinch: !!e.isPinch, isDrag: e.isDrag, targets: t.props.targets }));}, dragControlStart: function (t, e) {return this.dragStart(t, e);}, dragControl: function (t, e) {return this.drag(t, e);}, dragControlEnd: function (t, e) {return this.dragEnd(t, e);}, dragGroupControlStart: function (t, e) {return this.dragGroupStart(t, e);}, dragGroupControl: function (t, e) {return this.dragGroup(t, e);}, dragGroupControlEnd: function (t, e) {return this.dragGroupEnd(t, e);} },ir = { name: "renderable", props: [], events: ["renderStart", "render", "renderEnd", "renderGroupStart", "renderGroup", "renderGroupEnd"], dragRelation: "weak", dragStart: function (t, e) {zi(t, "onRenderStart", Vi(t, e, { isPinch: !!e.isPinch }));}, drag: function (t, e) {zi(t, "onRender", this.fillDragParams(t, e));}, dragAfter: function (t, e) {return this.drag(t, e);}, dragEnd: function (t, e) {zi(t, "onRenderEnd", this.fillDragEndParams(t, e));}, dragGroupStart: function (t, e) {zi(t, "onRenderGroupStart", Vi(t, e, { isPinch: !!e.isPinch, targets: t.props.targets }));}, dragGroup: function (t, e) {var i = this,n = _t(t, "beforeRenderable", e),r = t.moveables,s = n.map(function (t, e) {var n = r[e];return i.fillDragParams(n, t);});zi(t, "onRenderGroup", Vi(t, e, y(y({ isPinch: !!e.isPinch, targets: t.props.targets, transform: mt(e), transformObject: {} }, Li(vt(e))), { events: s })));}, dragGroupEnd: function (t, e) {var i = this,n = _t(t, "beforeRenderable", e),r = t.moveables,s = n.map(function (t, e) {var n = r[e];return i.fillDragEndParams(n, t);});zi(t, "onRenderGroupEnd", Vi(t, e, y({ isPinch: !!e.isPinch, isDrag: e.isDrag, targets: t.props.targets, events: s, transformObject: {}, transform: mt(e) }, Li(vt(e)))));}, dragControlStart: function (t, e) {return this.dragStart(t, e);}, dragControl: function (t, e) {return this.drag(t, e);}, dragControlAfter: function (t, e) {return this.dragAfter(t, e);}, dragControlEnd: function (t, e) {return this.dragEnd(t, e);}, dragGroupControlStart: function (t, e) {return this.dragGroupStart(t, e);}, dragGroupControl: function (t, e) {return this.dragGroup(t, e);}, dragGroupControlEnd: function (t, e) {return this.dragGroupEnd(t, e);}, fillDragParams: function (t, e) {var i = {};return (0, a.qg)(gt(e) || []).forEach(function (t) {i[t.name] = t.functionValue;}), Vi(t, e, y({ isPinch: !!e.isPinch, transformObject: i, transform: mt(e) }, Li(vt(e))));}, fillDragEndParams: function (t, e) {var i = {};return (0, a.qg)(gt(e) || []).forEach(function (t) {i[t.name] = t.functionValue;}), Vi(t, e, y({ isPinch: !!e.isPinch, isDrag: e.isDrag, transformObject: i, transform: mt(e) }, Li(vt(e))));} };function nr(t, e, i, n, r, s, o) {s.clientDistX = s.distX, s.clientDistY = s.distY;var a = "Start" === r,l = "End" === r,c = "After" === r,h = t.state.target,u = s.isRequest,d = n.indexOf("Control") > -1;if (!h || a && d && !u && t.areaElement === s.inputEvent.target) return !1;var p = w([], b(e), !1);if (u) {var f = s.requestAble;p.some(function (t) {return t.name === f;}) || p.push.apply(p, w([], b(t.props.ables.filter(function (t) {return t.name === f;})), !1));}if (!p.length || p.every(function (t) {return t.dragRelation;})) return !1;var g,m = s.inputEvent;l && m && (g = document.elementFromPoint(s.clientX, s.clientY) || m.target);var v = !1,x = function () {var t;v = !0, null === (t = s.stop) || void 0 === t || t.call(s);},S = a && (!t.targetGesto || !t.controlGesto || !t.targetGesto.isFlag() || !t.controlGesto.isFlag());S && t.updateRect(r, !0, !1);var E = s.datas,C = d ? "controlGesto" : "targetGesto",k = t[C],T = function (e, i, n) {if (!(i in e) || k !== t[C]) return !1;var r = e.name,o = E[r] || (E[r] = {});if (a && (o.isEventStart = !n || !e[n] || e[n](t, s)), !o.isEventStart) return !1;var l = e[i](t, y(y({}, s), { stop: x, datas: o, originalDatas: E, inputTarget: g }));return t._emitter.off(), a && !1 === l && (o.isEventStart = !1), l;};S && p.forEach(function (e) {e.unset && e.unset(t);}), T(er, "drag".concat(n).concat(r));var A = 0,M = 0;i.forEach(function (e) {if (v) return !1;var i = "".concat(e).concat(n).concat(r),o = "".concat(e).concat(n, "Condition");"" !== r || u || Yi(t.state, s);var l = p.filter(function (t) {return t[i];}),c = (l = l.filter(function (t, e) {return t.name && l.indexOf(t) === e;})).filter(function (t) {return T(t, i, o);}).length;v && ++A, c && ++M, !v && a && l.length && !c && (A += l.filter(function (t) {var e = t.name;return !!E[e].isEventStart && "strong" !== t.dragRelation;}).length ? 1 : 0);}), c && !M || T(ir, "drag".concat(n).concat(r));var _ = k !== t[C] || A === i.length;return (l || v || _) && (t.state.gestos = {}, t.moveables && t.moveables.forEach(function (t) {t.state.gestos = {};}), p.forEach(function (e) {e.unset && e.unset(t);})), a && !_ && !u && M && t.props.preventDefault && (null == s || s.preventDefault()), !t.isUnmounted && !_ && ((!a && M && !o || l) && (t.props.flushSync || ni)(function () {t.updateRect(l ? r : "", !0, !1), t.forceUpdate();}), a || l || c || !M || o || nr(t, e, i, n, r + "After", s), !0);}function rr(t, e) {return function (i, n) {var r;void 0 === n && (n = i.inputEvent.target);var o = n,a = t.areaElement,l = t._dragTarget;return !(!l || !e && (null === (r = t.controlGesto) || void 0 === r ? void 0 : r.isFlag())) && (o === l || l.contains(o) || o === a || !t.isMoveableElement(o) && !t.controlBox.contains(o) || (0, s.nB)(o, "moveable-area") || (0, s.nB)(o, "moveable-padding") || (0, s.nB)(o, "moveable-edgeDraggable"));};}function sr(t, e, i) {var n = t.controlBox,r = [],s = t.props,o = s.dragArea,a = t.state.target,l = s.dragTarget;r.push(n), o && !l || r.push(e), !o && l && a && e !== a && s.dragTargetSelf && r.push(a);var c = rr(t);return ar(t, r, "targetAbles", i, { dragStart: c, pinchStart: c });}function or(t, e) {var i = t.controlBox,n = [];n.push(i);var r = rr(t, !0),s = function (t, e) {return void 0 === e && (e = t.inputEvent.target), e === i || !r(t, e);};return ar(t, n, "controlAbles", e, { dragStart: s, pinchStart: s });}function ar(t, e, i, n, r) {void 0 === r && (r = {});var o = "targetAbles" === i,a = t.props,l = a.pinchOutside,c = a.pinchThreshold,h = a.preventClickEventOnDrag,u = a.preventClickDefault,p = a.checkInput,f = a.dragFocusedInput,g = a.preventDefault,m = void 0 === g || g,v = a.preventRightClick,y = void 0 === v || v,x = a.preventWheelClick,S = { preventDefault: m, preventRightClick: y, preventWheelClick: void 0 === x || x, container: nn(a.dragContainer, !0) || (0, s.zk)(t.getControlBoxElement()), pinchThreshold: c, pinchOutside: l, preventClickEventOnDrag: !!o && h, preventClickEventOnDragStart: !!o && u, preventClickEventByCondition: o ? null : function (e) {return t.controlBox.contains(e.target);}, checkInput: !!o && p, dragFocusedInput: f },E = new d.A(e, S),C = "Control" === n;return ["drag", "pinch"].forEach(function (e) {["Start", "", "End"].forEach(function (s) {E.on("".concat(e).concat(s), function (o) {var a,l = o.eventType,c = "drag" === e && o.isPinch;if (!r[l] || r[l](o)) {if (!c) {var h = "drag" === e ? [e] : ["drag", e],u = w([], b(t[i]), !1);nr(t, u, h, n, s, o) ? (t.props.stopPropagation || "Start" === s && C) && (null === (a = null == o ? void 0 : o.inputEvent) || void 0 === a || a.stopPropagation()) : o.stop();}} else o.stop();});});}), E;}var lr = function () {function t(t, e, i) {var n = this;this.target = t, this.moveable = e, this.eventName = i, this.ables = [], this._onEvent = function (t) {var e = n.eventName,i = n.moveable;i.state.disableNativeEvent || n.ables.forEach(function (n) {n[e](i, { inputEvent: t });});}, t.addEventListener(i.toLowerCase(), this._onEvent);}return t.prototype.setAbles = function (t) {this.ables = t;}, t.prototype.destroy = function () {this.target.removeEventListener(this.eventName.toLowerCase(), this._onEvent), this.target = null, this.moveable = null;}, t;}();function cr(t, e, i, n) {void 0 === i && (i = e);var r = 0,a = 0,l = 0,c = {},h = ki(t);if (t && (r = h.offsetWidth, a = h.offsetHeight), t) {var u = function (t, e, i, n) {var r;void 0 === i && (i = e);var a = Et(t, e),l = a.matrixes,c = a.is3d,h = a.targetMatrix,u = a.transformOrigin,d = a.targetOrigin,p = a.offsetContainer,f = a.hasFixed,g = a.zoom,m = function (t, e) {if (Tt) {var i = (0, s.I6)(Tt, function (i) {return i[0][0] == t && i[0][1] == e;});if (i) return i[1];}var n = Et(t, e, !0);return Tt && Tt.push([[t, e], n]), n;}(p, i),v = m.matrixes,x = m.is3d,S = m.offsetContainer,E = m.zoom,C = n || x || c,k = C ? 4 : 3,T = "svg" !== t.tagName.toLowerCase() && "ownerSVGElement" in t,A = h,M = (0, o.k8)(k),_ = (0, o.k8)(k),P = (0, o.k8)(k),D = (0, o.k8)(k),O = l.length,I = v.map(function (t) {return y(y({}, t), { matrix: t.matrix ? w([], b(t.matrix), !1) : void 0 });}).reverse();l.reverse(), !c && C && (A = (0, o._C)(A, 3, 4), ui(l)), !x && C && ui(I), I.forEach(function (t) {_ = (0, o.lw)(_, t.matrix, k);});var F = i || (0, s.uD)(t),R = (null === (r = I[0]) || void 0 === r ? void 0 : r.target) || li(F, F, !0).offsetParent,L = I.slice(1).reduce(function (t, e) {return (0, o.lw)(t, e.matrix, k);}, (0, o.k8)(k));l.forEach(function (t, e) {if (O - 2 === e && (P = M.slice()), O - 1 === e && (D = M.slice()), !t.matrix) {var i = function (t, e, i, n, r) {var a,l = t.target,c = t.origin,h = e.matrix,u = ki(l),d = u.offsetWidth,p = u.offsetHeight,f = i.getBoundingClientRect(),g = [0, 0];i === (0, s.uD)(i) && (g = hi(l, !0));for (var m = l.getBoundingClientRect(), v = m.left - f.left + i.scrollLeft - (i.clientLeft || 0) + g[0], y = m.top - f.top + i.scrollTop - (i.clientTop || 0) + g[1], w = m.width, x = m.height, S = (0, o.B4)(n, r, h), E = bi(S, d, p, n), C = E.left, k = E.top, T = E.width, A = E.height, M = mi(S, c, n), _ = (0, o.Rd)(M, [C, k]), P = [v + _[0] * w / T, y + _[1] * x / A], D = [0, 0], O = 0; ++O < 10;) {var I = (0, o.B8)(r, n);a = b((0, o.Rd)(mi(I, P, n), mi(I, M, n)), 2), D[0] = a[0], D[1] = a[1];var F = bi((0, o.B4)(n, r, (0, o.GD)(D, n), h), d, p, n),R = F.left - v,L = F.top - y;if (pn(R) < 2 && pn(L) < 2) break;P[0] -= R, P[1] -= L;}return D.map(function (t) {return Math.round(t);});}(t, l[e + 1], R, k, (0, o.lw)(L, M, k));t.matrix = (0, o.GD)(i, k);}M = (0, o.lw)(M, t.matrix, k);});var N = !T && c;A || (A = (0, o.k8)(N ? 4 : 3));var V = pi(T && 16 === A.length ? (0, o._C)(A, 4, 3) : A, N),B = _;return _ = (0, o.bn)(_, k, k), { hasZoom: 1 !== g || 1 !== E, hasFixed: f, matrixes: l, rootMatrix: _, originalRootMatrix: B, beforeMatrix: P, offsetMatrix: D, allMatrix: M, targetMatrix: A, targetTransform: V, inlineTransform: t.style.transform, transformOrigin: u, targetOrigin: d, is3d: C, offsetContainer: p, offsetRootContainer: S };}(t, e, i, n),d = J(u.allMatrix, u.transformOrigin, r, a);c = y(y({}, u), d);var p = J(u.allMatrix, [50, 50], 100, 100);l = Ti([p.pos1, p.pos2], p.direction);}var f = n ? 4 : 3;return y(y(y({ hasZoom: !1, width: r, height: a, rotation: l }, h), { originalRootMatrix: (0, o.k8)(f), rootMatrix: (0, o.k8)(f), beforeMatrix: (0, o.k8)(f), offsetMatrix: (0, o.k8)(f), allMatrix: (0, o.k8)(f), targetMatrix: (0, o.k8)(f), targetTransform: "", inlineTransform: "", transformOrigin: [0, 0], targetOrigin: [0, 0], is3d: !!n, left: 0, top: 0, right: 0, bottom: 0, origin: [0, 0], pos1: [0, 0], pos2: [0, 0], pos3: [0, 0], pos4: [0, 0], direction: 1, hasFixed: !1, offsetContainer: null, offsetRootContainer: null, matrixes: [] }), c);}function hr(t, e, i, n, r, s) {void 0 === s && (s = []);var a = 1,l = [0, 0],c = { left: 0, top: 0, width: 0, height: 0, right: 0, bottom: 0, clientLeft: 0, clientTop: 0, clientWidth: 0, clientHeight: 0, scrollWidth: 0, scrollHeight: 0 },h = { left: 0, top: 0, width: 0, height: 0, right: 0, bottom: 0, clientLeft: 0, clientTop: 0, clientWidth: 0, clientHeight: 0, scrollWidth: 0, scrollHeight: 0 },u = { left: 0, top: 0, width: 0, height: 0, right: 0, bottom: 0, clientLeft: 0, clientTop: 0, clientWidth: 0, clientHeight: 0, scrollWidth: 0, scrollHeight: 0 },d = { left: 0, top: 0, width: 0, height: 0, right: 0, bottom: 0, clientLeft: 0, clientTop: 0, clientWidth: 0, clientHeight: 0, scrollWidth: 0, scrollHeight: 0 },p = [0, 0],f = {},g = cr(e, i, r, !0);if (e) {var m = Mt(e);s.forEach(function (t) {f[t] = m(t);});var v = g.is3d ? 4 : 3,b = J(g.offsetMatrix, (0, o.tY)(g.transformOrigin, (0, o.$z)(g.targetMatrix, v)), g.width, g.height);a = b.direction, l = (0, o.tY)(b.origin, [b.left - g.left, b.top - g.top]), d = _i(g.offsetRootContainer);var w = li(n, n, !0).offsetParent || g.offsetRootContainer;if (g.hasZoom) {var x = J((0, o.lw)(g.originalRootMatrix, g.allMatrix), g.transformOrigin, g.width, g.height),S = J(g.originalRootMatrix, oi(Mt(w)("transformOrigin")).map(function (t) {return parseFloat(t);}), w.offsetWidth, w.offsetHeight);if (c = Mi(x, d), u = Mi(S, d, w, !0), t) {var E = x.left,C = x.top;h = Mi({ left: E, top: C, bottom: C, right: C }, d);}} else {c = _i(e), u = function (t) {var e = null == kt ? void 0 : kt.get(t);if (e) return e;var i = _i(t, !0);return kt && kt.set(t, i), i;}(w), t && (h = _i(t));var k = u.left,T = u.top,A = u.clientLeft,M = u.clientTop,_ = [c.left - k, c.top - T];p = (0, o.Rd)(Zi(g.rootMatrix, _, 4), [A + g.left, M + g.top]);}}return y({ targetClientRect: c, containerClientRect: u, moveableClientRect: h, rootContainerClientRect: d, beforeDirection: a, beforeOrigin: l, originalBeforeOrigin: l, target: e, style: f, offsetDelta: p }, g);}function ur(t) {var e = t.pos1,i = t.pos2,n = t.pos3,r = t.pos4;if (!(e && i && n && r)) return null;var s = (0, h.Qk)([e, i, n, r]),a = [s.minX, s.minY],l = (0, o.Rd)(t.origin, a);return e = (0, o.Rd)(e, a), i = (0, o.Rd)(i, a), n = (0, o.Rd)(n, a), r = (0, o.Rd)(r, a), y(y({}, t), { left: t.left, top: t.top, posDelta: a, pos1: e, pos2: i, pos3: n, pos4: r, origin: l, beforeOrigin: l, isPersisted: !0 });}var dr = function (t) {function e() {var e = null !== t && t.apply(this, arguments) || this;return e.state = y({ container: null, gestos: {}, renderLines: [[[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]], renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]], disableNativeEvent: !1, posDelta: [0, 0] }, hr(null)), e.renderState = {}, e.enabledAbles = [], e.targetAbles = [], e.controlAbles = [], e.rotation = 0, e.scale = [1, 1], e.isMoveableMounted = !1, e.isUnmounted = !1, e.events = { mouseEnter: null, mouseLeave: null }, e._emitter = new f.A(), e._prevOriginalDragTarget = null, e._originalDragTarget = null, e._prevDragTarget = null, e._dragTarget = null, e._prevPropTarget = null, e._propTarget = null, e._prevDragArea = !1, e._isPropTargetChanged = !1, e._hasFirstTarget = !1, e._reiszeObserver = null, e._observerId = 0, e._mutationObserver = null, e._rootContainer = null, e._viewContainer = null, e._viewClassNames = [], e._store = {}, e.checkUpdateRect = function () {if (!e.isDragging()) {var t = e.props.parentMoveable;t ? t.checkUpdateRect() : ((0, s.uU)(e._observerId), e._observerId = (0, s.xi)(function () {e.isDragging() || e.updateRect();}));}}, e._onPreventClick = function (t) {t.stopPropagation(), t.preventDefault();}, e;}return v(e, t), e.prototype.render = function () {var t = this.props,e = this.getState(),i = t.parentPosition,n = t.className,s = t.target,o = t.zoom,a = t.cspNonce,l = t.translateZ,c = t.cssStyled,h = t.groupable,d = t.linePadding,p = t.controlPadding;this._checkUpdateRootContainer(), this.checkUpdate(), this.updateRenderPoses();var f = b(i || [0, 0], 2),g = f[0],m = f[1],v = e.left,w = e.top,x = e.target,S = e.direction,E = e.hasFixed,C = e.offsetDelta,k = t.targets,T = this.isDragging(),A = {};this.getEnabledAbles().forEach(function (t) {A["data-able-".concat(t.name.toLowerCase())] = !0;});var M = this._getAbleClassName(),_ = k && k.length && (x || h) || s || !this._hasFirstTarget && this.state.isPersisted,P = this.controlBox || this.props.firstRenderState || this.props.persistData,D = [v - g, w - m];!h && t.useAccuratePosition && (D[0] += C[0], D[1] += C[1]);var O = { position: E ? "fixed" : "absolute", display: _ ? "block" : "none", visibility: P ? "visible" : "hidden", transform: "translate3d(".concat(D[0], "px, ").concat(D[1], "px, ").concat(l, ")"), "--zoom": o, "--zoompx": "".concat(o, "px") };return d && (O["--moveable-line-padding"] = d), p && (O["--moveable-control-padding"] = p), u.n(c, y({ cspNonce: a, ref: (0, r.KR)(this, "controlBox"), className: "".concat(ii("control-box", -1 === S ? "reverse" : "", T ? "dragging" : ""), " ").concat(M, " ").concat(n) }, A, { onClick: this._onPreventClick, style: O }), this.renderAbles(), this._renderLines());}, e.prototype.componentDidMount = function () {this.isMoveableMounted = !0, this.isUnmounted = !1;var t = this.props,e = t.parentMoveable,i = t.container;this._checkUpdateRootContainer(), this._checkUpdateViewContainer(), this._updateTargets(), this._updateNativeEvents(), this._updateEvents(), this.updateCheckInput(), this._updateObserver(this.props), i || e || this.state.isPersisted || (this.updateRect("", !1, !1), this.forceUpdate());}, e.prototype.componentDidUpdate = function (t) {this._checkUpdateRootContainer(), this._checkUpdateViewContainer(), this._updateNativeEvents(), this._updateTargets(), this._updateEvents(), this.updateCheckInput(), this._updateObserver(t);}, e.prototype.componentWillUnmount = function () {var t, e;this.isMoveableMounted = !1, this.isUnmounted = !0, this._emitter.off(), null === (t = this._reiszeObserver) || void 0 === t || t.disconnect(), null === (e = this._mutationObserver) || void 0 === e || e.disconnect(), this._viewContainer && this._changeAbleViewClassNames([]), Ri(this, !1), Ri(this, !0);var i = this.events;for (var n in i) {var r = i[n];r && r.destroy();}}, e.prototype.getTargets = function () {var t = this.props.target;return t ? [t] : [];}, e.prototype.getAble = function (t) {var e = this.props.ables || [];return (0, s.I6)(e, function (e) {return e.name === t;});}, e.prototype.getContainer = function () {var t = this.props,e = t.parentMoveable,i = t.wrapperMoveable;return t.container || i && i.getContainer() || e && e.getContainer() || this.controlBox.parentElement;}, e.prototype.getControlBoxElement = function () {return this.controlBox;}, e.prototype.getDragElement = function () {return this._dragTarget;}, e.prototype.isMoveableElement = function (t) {var e;return t && ((null === (e = t.getAttribute) || void 0 === e ? void 0 : e.call(t, "class")) || "").indexOf(N) > -1;}, e.prototype.dragStart = function (t, e) {void 0 === e && (e = t.target);var i = this.targetGesto,n = this.controlGesto;return i && rr(this)({ inputEvent: t }, e) ? i.isFlag() || i.triggerDragStart(t) : n && this.isMoveableElement(e) && (n.isFlag() || n.triggerDragStart(t)), this;}, e.prototype.hitTest = function (t) {var e,i = this.state,n = i.target,r = i.pos1,o = i.pos2,a = i.pos3,l = i.pos4,c = i.targetClientRect;if (!n) return 0;if ((0, s.Ll)(t)) {var u = t.getBoundingClientRect();e = { left: u.left, top: u.top, width: u.width, height: u.height };} else e = y({ width: 0, height: 0 }, t);var d = e.left,p = e.top,f = e.width,g = e.height,m = (0, h.FV)([r, o, l, a], c),v = (0, h.tT)(m, [[d, p], [d + f, p], [d + f, p + g], [d, p + g]]),b = (0, h.B9)(m);return v && b ? Math.min(100, v / b * 100) : 0;}, e.prototype.isInside = function (t, e) {var i = this.state,n = i.target,r = i.pos1,s = i.pos2,o = i.pos3,a = i.pos4,l = i.targetClientRect;return !!n && (0, h.FK)([t, e], (0, h.FV)([r, s, a, o], l));}, e.prototype.updateRect = function (t, e, i) {void 0 === i && (i = !0);var n = this.props,r = !n.parentPosition && !n.wrapperMoveable;r && At(!0);var s = n.parentMoveable,o = this.state.target || n.target,a = this.getContainer(),l = s ? s._rootContainer : this._rootContainer,c = hr(this.controlBox, o, a, a, l || a, this._getRequestStyles());if (!o && this._hasFirstTarget && n.persistData) {var h = ur(n.persistData);for (var u in h) c[u] = h[u];}r && At(), this.updateState(c, !s && i);}, e.prototype.isDragging = function (t) {var e,i,n = this.targetGesto,r = this.controlGesto;return (null == n ? void 0 : n.isFlag()) ? !t || !!(null === (e = n.getEventData()[t]) || void 0 === e ? void 0 : e.isEventStart) : !(!(null == r ? void 0 : r.isFlag()) || t && !(null === (i = r.getEventData()[t]) || void 0 === i ? void 0 : i.isEventStart));}, e.prototype.updateTarget = function (t) {this.updateRect(t, !0);}, e.prototype.getRect = function () {var t = this.state,e = Ii(this.state),i = b(e, 4),n = i[0],r = i[1],s = i[2],a = i[3],l = yi(e),c = t.width,h = t.height,u = l.width,d = l.height,p = l.left,f = l.top,g = [t.left, t.top],m = (0, o.tY)(g, t.origin);return { width: u, height: d, left: p, top: f, pos1: n, pos2: r, pos3: s, pos4: a, offsetWidth: c, offsetHeight: h, beforeOrigin: (0, o.tY)(g, t.beforeOrigin), origin: m, transformOrigin: t.transformOrigin, rotation: this.getRotation() };}, e.prototype.getManager = function () {return this;}, e.prototype.stopDrag = function (t) {var e;t && "target" !== t || (!1 === (null == (e = this.targetGesto) ? void 0 : e.isIdle()) && Fi(this, !1), null == e || e.stop()), t && "control" !== t || (!1 === (null == (e = this.controlGesto) ? void 0 : e.isIdle()) && Fi(this, !0), null == e || e.stop());}, e.prototype.getRotation = function () {var t,e,i,n,r = this.state;return t = r.pos1, e = r.pos2, i = r.direction, n = (0, s.Mu)(t, e) / Math.PI * 180, (n = i >= 0 ? n : 180 - n) >= 0 ? n : 360 + n;}, e.prototype.request = function (t, e, i) {void 0 === e && (e = {});var n = this,r = n.props,o = r.parentMoveable || r.wrapperMoveable || n,a = o.props.ables,l = r.groupable,c = (0, s.I6)(a, function (e) {return e.name === t;});if (this.isDragging() || !c || !c.request) return { request: function () {return this;}, requestEnd: function () {return this;} };var h = c.request(n),u = i || e.isInstant,d = h.isControl ? "controlAbles" : "targetAbles",p = "".concat(l ? "Group" : "").concat(h.isControl ? "Control" : ""),f = w([], b(o[d]), !1),g = { request: function (e) {return nr(n, f, ["drag"], p, "", y(y({}, h.request(e)), { requestAble: t, isRequest: !0 }), u), g;}, requestEnd: function () {return nr(n, f, ["drag"], p, "End", y(y({}, h.requestEnd()), { requestAble: t, isRequest: !0 }), u), g;} };return nr(n, f, ["drag"], p, "Start", y(y({}, h.requestStart(e)), { requestAble: t, isRequest: !0 }), u), u ? g.request(e).requestEnd() : g;}, e.prototype.getMoveables = function () {return [this];}, e.prototype.destroy = function () {this.componentWillUnmount();}, e.prototype.updateRenderPoses = function () {var t = this.getState(),e = this.props,i = e.padding,n = t.originalBeforeOrigin,r = t.transformOrigin,s = t.allMatrix,a = t.is3d,l = t.pos1,c = t.pos2,h = t.pos3,u = t.pos4,d = t.left,p = t.top,f = t.isPersisted,g = e.zoom || 1;if (!i && g <= 1) return t.renderPoses = [l, c, h, u], void (t.renderLines = [[l, c], [c, u], [u, h], [h, l]]);var m = gn(i || {}),v = m.left,y = m.top,b = m.bottom,w = m.right,x = a ? 4 : 3,S = [];S = f ? r : this.controlBox && e.groupable ? n : (0, o.tY)(n, [d, p]);var E = (0, o.B4)(x, (0, o.GD)(S.map(function (t) {return -t;}), x), s, (0, o.GD)(r, x)),C = Xi(E, l, [-v, -y], x),k = Xi(E, c, [w, -y], x),T = Xi(E, h, [-v, b], x),A = Xi(E, u, [w, b], x);if (t.renderPoses = [C, k, T, A], t.renderLines = [[C, k], [k, A], [A, T], [T, C]], g) {var M = g / 2;t.renderLines = [[Xi(E, l, [-v - M, -y], x), Xi(E, c, [w + M, -y], x)], [Xi(E, c, [w, -y - M], x), Xi(E, u, [w, b + M], x)], [Xi(E, u, [w + M, b], x), Xi(E, h, [-v - M, b], x)], [Xi(E, h, [-v, b + M], x), Xi(E, l, [-v, -y - M], x)]];}}, e.prototype.checkUpdate = function () {this._isPropTargetChanged = !1;var t = this.props,e = t.target,i = t.container,n = t.parentMoveable,r = this.state,s = r.target,o = r.container;if (s || e) {this.updateAbles();var a = !qi(s, e);if (a || !qi(o, i)) {var l = i || this.controlBox;l && this.unsetAbles(), this.updateState({ target: e, container: i }), !n && l && this.updateRect("End", !1, !1), this._isPropTargetChanged = a;}}}, e.prototype.waitToChangeTarget = function () {return new Promise(function () {});}, e.prototype.triggerEvent = function (t, e) {var i = this.props;if (this._emitter.trigger(t, e), i.parentMoveable && e.isRequest && !e.isRequestChild) return i.parentMoveable.triggerEvent(t, e, !0);var n = i[t];return n && n(e);}, e.prototype.useCSS = function (t, e) {var i = this.props.customStyledMap,n = t + e;return i[n] || (i[n] = (0, p.I4)(t, e)), i[n];}, e.prototype.getState = function () {var t,e = this.props;(e.target || (null === (t = e.targets) || void 0 === t ? void 0 : t.length)) && (this._hasFirstTarget = !0);var i = this.controlBox,n = e.persistData,r = e.firstRenderState;if (r && !i) return r;if (!this._hasFirstTarget && n) {var s = ur(n);if (s) return this.updateState(s, !1), this.state;}return this.state.isPersisted = !1, this.state;}, e.prototype.updateSelectors = function () {}, e.prototype.unsetAbles = function () {var t = this;this.targetAbles.forEach(function (e) {e.unset && e.unset(t);});}, e.prototype.updateAbles = function (t, e) {void 0 === t && (t = this.props.ables), void 0 === e && (e = "");var i = this.props.triggerAblesSimultaneously,n = this.getEnabledAbles(t),r = "drag".concat(e, "Start"),s = "pinch".concat(e, "Start"),o = "drag".concat(e, "ControlStart"),a = Hi(n, [r, s], i),l = Hi(n, [o], i);this.enabledAbles = n, this.targetAbles = a, this.controlAbles = l;}, e.prototype.updateState = function (t, e) {if (e) {if (this.isUnmounted) return;this.setState(t);} else {var i = this.state;for (var n in t) i[n] = t[n];}}, e.prototype.getEnabledAbles = function (t) {void 0 === t && (t = this.props.ables);var e = this.props;return t.filter(function (t) {return t && (t.always && !1 !== e[t.name] || e[t.name]);});}, e.prototype.renderAbles = function () {var t,e,i,n,r = this,s = this.props.triggerAblesSimultaneously,o = { createElement: u.n };return this.renderState = {}, (t = Wi(Hi(this.getEnabledAbles(), ["render"], s).map(function (t) {return (0, t.render)(r, o) || [];})).filter(function (t) {return t;}), e = function (t) {return t.key;}, i = [], n = {}, t.forEach(function (t, r) {var s = e(t),o = n[s];o || (o = [], n[s] = o, i.push(o)), o.push(t);}), i).map(function (t) {return t[0];});}, e.prototype.updateCheckInput = function () {this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);}, e.prototype._getRequestStyles = function () {return this.getEnabledAbles().reduce(function (t, e) {var i,n,r = null !== (n = null === (i = e.requestStyle) || void 0 === i ? void 0 : i.call(e)) && void 0 !== n ? n : [];return w(w([], b(t), !1), b(r), !1);}, w([], b(this.props.requestStyles || []), !1));}, e.prototype._updateObserver = function (t) {this._updateResizeObserver(t), this._updateMutationObserver(t);}, e.prototype._updateEvents = function () {var t = this.targetAbles.length,e = this.controlAbles.length,i = this._dragTarget;(!t && this.targetGesto || this._isTargetChanged(!0)) && (Ri(this, !1), this.updateState({ gestos: {} })), e || Ri(this, !0), i && t && !this.targetGesto && (this.targetGesto = sr(this, i, "")), !this.controlGesto && e && (this.controlGesto = or(this, "Control"));}, e.prototype._updateTargets = function () {var t = this.props;this._prevPropTarget = this._propTarget, this._prevDragTarget = this._dragTarget, this._prevOriginalDragTarget = this._originalDragTarget, this._prevDragArea = t.dragArea, this._propTarget = t.target, this._originalDragTarget = t.dragTarget || t.target, this._dragTarget = nn(this._originalDragTarget, !0);}, e.prototype._renderLines = function () {var t = this.props,e = t.zoom,i = t.hideDefaultLines,n = t.hideChildMoveableDefaultLines,r = t.parentMoveable;if (i || r && n) return [];var s = this.getState(),o = { createElement: u.n };return s.renderLines.map(function (t, i) {return Rt(o, "", t[0], t[1], e, "render-line-".concat(i));});}, e.prototype._isTargetChanged = function (t) {var e = this.props,i = e.dragTarget || e.target,n = this._prevOriginalDragTarget,r = this._prevDragArea,s = e.dragArea;return !s && n !== i || (t || s) && r !== s || this._prevPropTarget != this._propTarget;}, e.prototype._updateNativeEvents = function () {var t = this,e = this.props.dragArea ? this.areaElement : this.state.target,i = this.events,n = (0, s.xD)(i);if (this._isTargetChanged()) for (var r in i) {var o = i[r];o && o.destroy(), i[r] = null;}if (e) {var a = this.enabledAbles;n.forEach(function (n) {var r = Hi(a, [n]),s = r.length > 0,o = i[n];s ? (o || (o = new lr(e, t, n), i[n] = o), o.setAbles(r)) : o && (o.destroy(), i[n] = null);});}}, e.prototype._checkUpdateRootContainer = function () {var t = this.props.rootContainer;!this._rootContainer && t && (this._rootContainer = nn(t, !0));}, e.prototype._checkUpdateViewContainer = function () {var t = this.props.viewContainer;!this._viewContainer && t && (this._viewContainer = nn(t, !0)), this._viewContainer && this._changeAbleViewClassNames(w(w([], b(this._getAbleViewClassNames()), !1), [this.isDragging() ? kn : ""], !1));}, e.prototype._changeAbleViewClassNames = function (t) {var e = this._viewContainer,i = Gi(t.filter(Boolean), function (t) {return t;}).map(function (t) {return b(t, 1)[0];}),n = this._viewClassNames,r = (0, g.U)(n, i),o = r.removed,a = r.added;o.forEach(function (t) {(0, s.vy)(e, n[t]);}), a.forEach(function (t) {(0, s.iQ)(e, i[t]);}), this._viewClassNames = i;}, e.prototype._getAbleViewClassNames = function () {var t = this;return (this.getEnabledAbles().map(function (e) {var i;return (null === (i = e.viewClassName) || void 0 === i ? void 0 : i.call(e, t)) || "";}).join(" ") + " ".concat(this._getAbleClassName("-view"))).split(/\s+/g);}, e.prototype._getAbleClassName = function (t) {var e = this;void 0 === t && (t = "");var i = this.getEnabledAbles(),n = this.targetGesto,r = this.controlGesto,s = (null == n ? void 0 : n.isFlag()) ? n.getEventData() : {},o = (null == r ? void 0 : r.isFlag()) ? r.getEventData() : {};return i.map(function (i) {var n,r,a,l = i.name,c = (null === (n = i.className) || void 0 === n ? void 0 : n.call(i, e)) || "";return ((null === (r = s[l]) || void 0 === r ? void 0 : r.isEventStart) || (null === (a = o[l]) || void 0 === a ? void 0 : a.isEventStart)) && (c += " ".concat(ii("".concat(l).concat(t, "-dragging")))), c.trim();}).filter(Boolean).join(" ");}, e.prototype._updateResizeObserver = function (t) {var e,i = this.props,n = i.target,r = (0, s.zk)(this.getControlBoxElement());if (r.ResizeObserver && n && i.useResizeObserver) {if (t.target !== n || !this._reiszeObserver) {var o = new r.ResizeObserver(this.checkUpdateRect);o.observe(n, { box: "border-box" }), this._reiszeObserver = o;}} else null === (e = this._reiszeObserver) || void 0 === e || e.disconnect();}, e.prototype._updateMutationObserver = function (t) {var e,i = this,n = this.props,r = n.target,o = (0, s.zk)(this.getControlBoxElement());if (o.MutationObserver && r && n.useMutationObserver) {if (t.target !== r || !this._mutationObserver) {var a = new o.MutationObserver(function (t) {var e, n;try {for (var r = function (t) {var e = "function" == typeof Symbol && Symbol.iterator,i = e && t[e],n = 0;if (i) return i.call(t);if (t && "number" == typeof t.length) return { next: function () {return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };} };throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");}(t), s = r.next(); !s.done; s = r.next()) {var o = s.value;"attributes" === o.type && "style" === o.attributeName && i.checkUpdateRect();}} catch (t) {e = { error: t };} finally {try {s && !s.done && (n = r.return) && n.call(r);} finally {if (e) throw e.error;}}});a.observe(r, { attributes: !0 }), this._mutationObserver = a;}} else null === (e = this._mutationObserver) || void 0 === e || e.disconnect();}, e.defaultProps = { dragTargetSelf: !1, target: null, dragTarget: null, container: null, rootContainer: null, origin: !0, parentMoveable: null, wrapperMoveable: null, isWrapperMounted: !1, parentPosition: null, warpSelf: !1, svgOrigin: "", dragContainer: null, useResizeObserver: !1, useMutationObserver: !1, preventDefault: !0, preventRightClick: !0, preventWheelClick: !0, linePadding: 0, controlPadding: 0, ables: [], pinchThreshold: 20, dragArea: !1, passDragArea: !1, transformOrigin: "", className: "", zoom: 1, triggerAblesSimultaneously: !1, padding: {}, pinchOutside: !0, checkInput: !1, dragFocusedInput: !1, groupable: !1, hideDefaultLines: !1, cspNonce: "", translateZ: 0, cssStyled: null, customStyledMap: {}, props: {}, stopPropagation: !1, preventClickDefault: !1, preventClickEventOnDrag: !0, flushSync: ni, firstRenderState: null, persistData: null, viewContainer: null, requestStyles: [], useAccuratePosition: !1 }, e;}(u.o6),pr = { name: "groupable", props: ["defaultGroupRotate", "useDefaultGroupRotate", "defaultGroupOrigin", "groupable", "groupableProps", "targetGroups", "hideChildMoveableDefaultLines"], events: [], render: function (t, e) {var i,n = t.props,s = n.targets || [],a = t.getState(),l = a.left,c = a.top,h = a.isPersisted,u = n.zoom || 1,d = t.renderGroupRects,p = (null === (i = n.persistData) || void 0 === i ? void 0 : i.children) || [];h ? s = p.map(function () {return null;}) : p = [];var f = un(t, "parentPosition", [l, c], function (t) {return t.join(",");}),g = un(t, "requestStyles", t.getRequestChildStyles(), function (t) {return t.join(",");});return t.moveables = t.moveables.slice(0, s.length), w(w([], b(s.map(function (i, s) {return e.createElement(dr, { key: "moveable" + s, ref: (0, r.DY)(t, "moveables", s), target: i, origin: !1, requestStyles: g, cssStyled: n.cssStyled, customStyledMap: n.customStyledMap, useResizeObserver: n.useResizeObserver, useMutationObserver: n.useMutationObserver, hideChildMoveableDefaultLines: n.hideChildMoveableDefaultLines, parentMoveable: t, parentPosition: [l, c], persistData: p[s], zoom: u });})), !1), b(Wi(d.map(function (t, i) {var n = [t.pos1, t.pos2, t.pos3, t.pos4];return [[0, 1], [1, 3], [3, 2], [2, 0]].map(function (t, r) {var s = b(t, 2),a = s[0],l = s[1];return Rt(e, "", (0, o.Rd)(n[a], f), (0, o.Rd)(n[l], f), u, "group-rect-".concat(i, "-").concat(r));});}))), !1);} },fr = x("clickable", { props: ["clickable"], events: ["click", "clickGroup"], always: !0, dragRelation: "weak", dragStart: function () {}, dragControlStart: function () {}, dragGroupStart: function (t, e) {e.datas.inputTarget = e.inputEvent && e.inputEvent.target;}, dragEnd: function (t, e) {var i = t.props.target,n = e.inputEvent,r = e.inputTarget,s = !t.isMoveableElement(r) && t.controlBox.contains(r);if (n && r && !e.isDrag && !t.isMoveableElement(r) && !s) {var o = i.contains(r);zi(t, "onClick", Vi(t, e, { isDouble: e.isDouble, inputTarget: r, isTarget: i === r, moveableTarget: t.props.target, containsTarget: o }));}}, dragGroupEnd: function (t, e) {var i = e.inputEvent,n = e.inputTarget;if (i && n && !e.isDrag && !t.isMoveableElement(n) && e.datas.inputTarget !== n) {var r = t.props.targets,o = r.indexOf(n),a = o > -1,l = !1;-1 === o && (l = (o = (0, s.SL)(r, function (t) {return t.contains(n);})) > -1), zi(t, "onClickGroup", Vi(t, e, { isDouble: e.isDouble, targets: r, inputTarget: n, targetIndex: o, isTarget: a, containsTarget: l, moveableTarget: r[o] }));}}, dragControlEnd: function (t, e) {this.dragEnd(t, e);}, dragGroupControlEnd: function (t, e) {this.dragEnd(t, e);} });function gr(t) {var e = t.originalDatas.draggable;return e || (t.originalDatas.draggable = {}, e = t.originalDatas.draggable), y(y({}, t), { datas: e });}var mr = x("edgeDraggable", { css: [".edge.edgeDraggable.line {\ncursor: move;\n}"], render: function (t, e) {var i = t.props,n = i.edgeDraggable;return n ? Lt(e, "edgeDraggable", n, t.getState().renderPoses, i.zoom) : [];}, dragCondition: function (t, e) {var i,n = t.props,r = null === (i = e.inputEvent) || void 0 === i ? void 0 : i.target;return !(!n.edgeDraggable || !r) && !n.draggable && (0, s.nB)(r, ii("direction")) && (0, s.nB)(r, ii("edge")) && (0, s.nB)(r, ii("edgeDraggable"));}, dragStart: function (t, e) {return Ce.dragStart(t, gr(e));}, drag: function (t, e) {return Ce.drag(t, gr(e));}, dragEnd: function (t, e) {return Ce.dragEnd(t, gr(e));}, dragGroupCondition: function (t, e) {var i,n = t.props,r = null === (i = e.inputEvent) || void 0 === i ? void 0 : i.target;return !(!n.edgeDraggable || !r) && !n.draggable && (0, s.nB)(r, ii("direction")) && (0, s.nB)(r, ii("line"));}, dragGroupStart: function (t, e) {return Ce.dragGroupStart(t, gr(e));}, dragGroup: function (t, e) {return Ce.dragGroup(t, gr(e));}, dragGroupEnd: function (t, e) {return Ce.dragGroupEnd(t, gr(e));}, unset: function (t) {return Ce.unset(t);} }),vr = { name: "individualGroupable", props: ["individualGroupable", "individualGroupableProps"], events: [] },yr = [er, On, ei, mn, Ce, mr, Me, yn, xn, Re, Dn, In, _n, Yn, Zn, tr, pr, vr, fr, Mn, ir],br = yr.reduce(function (t, e) {return (e.events || []).forEach(function (e) {(0, s.BP)(t, e);}), t;}, []),wr = yr.reduce(function (t, e) {return (e.props || []).forEach(function (e) {(0, s.BP)(t, e);}), t;}, []);function xr(t, e) {var i = b(t, 3),n = i[0],r = i[1],s = i[2];return (n * e[0] + r * e[1] + s) / Math.sqrt(n * n + r * r);}function Sr(t, e) {var i = b(t, 2),n = i[0],r = i[1];return -n * e[0] - r * e[1];}function Er(t, e) {return Math.max.apply(Math, w([], b(t.map(function (t) {var i = b(t, 4),n = i[0],r = i[1],s = i[2],o = i[3];return Math.max(n[e], r[e], s[e], o[e]);})), !1));}function Cr(t, e) {return Math.min.apply(Math, w([], b(t.map(function (t) {var i = b(t, 4),n = i[0],r = i[1],s = i[2],o = i[3];return Math.min(n[e], r[e], s[e], o[e]);})), !1));}function kr(t, e) {var i = e.map(function (e) {if ((0, s.cy)(e)) {var i = kr(t, e),n = i.length;return n > 1 ? i : 1 === n ? i[0] : null;}var r = (0, s.I6)(t, function (t) {return t.manager.props.target === e;});return r ? (r.finded = !0, r.manager) : null;}).filter(Boolean);return 1 === i.length && (0, s.cy)(i[0]) ? i[0] : i;}var Tr = function (t) {function e() {var e = null !== t && t.apply(this, arguments) || this;return e.differ = new l.A(), e.moveables = [], e.transformOrigin = "50% 50%", e.renderGroupRects = [], e._targetGroups = [], e._hasFirstTargets = !1, e;}return v(e, t), e.prototype.componentDidMount = function () {t.prototype.componentDidMount.call(this);}, e.prototype.checkUpdate = function () {this._isPropTargetChanged = !1, this.updateAbles();}, e.prototype.getTargets = function () {return this.props.targets;}, e.prototype.updateRect = function (t, e, i) {var n;void 0 === i && (i = !0);var r = this.state;if (this.controlBox && !r.isPersisted) {At(!0), this.moveables.forEach(function (e) {e.updateRect(t, !1, !1);});var a = this.props,l = this.moveables,c = r.target || a.target,u = l.map(function (t) {return { finded: !1, manager: t };}),d = this.props.targetGroups || [],p = kr(u, d),f = a.useDefaultGroupRotate;p.push.apply(p, w([], b(u.filter(function (t) {return !t.finded;}).map(function (t) {return t.manager;})), !1));var g = [],m = !e || "" !== t && a.updateGroup,v = a.defaultGroupRotate || 0;if (!this._hasFirstTargets) {var x = null === (n = a.persistData) || void 0 === n ? void 0 : n.rotation;null != x && (v = x);}var S = function t(e, i, n) {var r,o = e.map(function (e) {if ((0, s.cy)(e)) {var n = t(e, i),r = [n.pos1, n.pos2, n.pos3, n.pos4];return g.push(n), { poses: r, rotation: n.rotation };}return { poses: Ii(e.state), rotation: e.getRotation() };}),a = o.map(function (t) {return t.rotation;}),l = a[0],c = a.every(function (t) {return Math.abs(l - t) < .1;});r = m ? !f && c ? l : v : f || n || !c ? i : l;var u = o.map(function (t) {return t.poses;}),d = function (t, e) {var i,n,r,o = [0, 0],a = [0, 0],l = [0, 0],c = [0, 0],u = 0,d = 0;if (!t.length) return { pos1: o, pos2: a, pos3: l, pos4: c, minX: 0, minY: 0, maxX: 0, maxY: 0, width: u, height: d, rotation: e };var p = (0, s.nF)(e, U);if (p % 90) {var f = p / 180 * Math.PI,g = Math.tan(f),m = -1 / g,v = [q, $],y = [[0, 0], [0, 0]],w = [q, $],x = [[0, 0], [0, 0]];t.forEach(function (t) {t.forEach(function (t) {var e = xr([-g, 1, 0], t),i = xr([-m, 1, 0], t);v[0] > e && (y[0] = t, v[0] = e), v[1] < e && (y[1] = t, v[1] = e), w[0] > i && (x[0] = t, w[0] = i), w[1] < i && (x[1] = t, w[1] = i);});});var S = b(y, 2),E = S[0],C = S[1],k = b(x, 2),T = k[0],A = k[1],M = [-g, 1, Sr([-g, 1], E)],_ = [-g, 1, Sr([-g, 1], C)],P = [-m, 1, Sr([-m, 1], T)],D = [-m, 1, Sr([-m, 1], A)];i = b([[M, P], [M, D], [_, P], [_, D]].map(function (t) {var e = b(t, 2),i = e[0],n = e[1];return (0, h.VM)(i, n)[0];}), 4), o = i[0], a = i[1], l = i[2], c = i[3], u = w[1] - w[0], d = v[1] - v[0];} else {var O = Cr(t, 0),I = Cr(t, 1),F = Er(t, 0),R = Er(t, 1);o = [O, I], a = [F, I], l = [O, R], c = [F, R], u = F - O, d = R - I, p % 180 && (o = (n = b([l, o, c, a], 4))[0], a = n[1], l = n[2], c = n[3], u = R - I, d = F - O);}p % 360 > 180 && (o = (r = b([c, l, a, o], 4))[0], a = r[1], l = r[2], c = r[3]);var L = (0, h.Qk)([o, a, l, c]);return { pos1: o, pos2: a, pos3: l, pos4: c, width: u, height: d, minX: L.minX, minY: L.minY, maxX: L.maxX, maxY: L.maxY, rotation: e };}(u, r);return d;}(p, this.rotation, !0);m && (this.rotation = S.rotation, this.transformOrigin = a.defaultGroupOrigin || "50% 50%", this.scale = [1, 1]), this._targetGroups = d, this.renderGroupRects = g;var E,C,k,T,A,M = this.transformOrigin,_ = this.rotation,P = this.scale,D = S.width,O = S.height,I = S.minX,F = S.minY,R = (E = [[0, 0], [D, 0], [0, O], [D, O]], C = cn(M, D, O), k = this.rotation / 180 * Math.PI, T = E.map(function (t) {return (0, o.Rd)(t, C);}), A = T.map(function (t) {return (0, o.e$)(t, k);}), { prev: T, next: A, result: A.map(function (t) {return (0, o.tY)(t, C);}) }),L = (0, h.Qk)(R.result),N = L.minX,V = L.minY,B = " rotate(".concat(_, "deg)") + " scale(".concat(dn(P[0]), ", ").concat(dn(P[1]), ")"),j = "translate(".concat(-N, "px, ").concat(-V, "px)").concat(B);this.controlBox.style.transform = "translate3d(".concat(I, "px, ").concat(F, "px, ").concat(this.props.translateZ || 0, ")"), c.style.cssText += "left:0px;top:0px;" + "transform-origin:".concat(M, ";") + "width:".concat(D, "px;height:").concat(O, "px;") + "transform: ".concat(j), r.width = D, r.height = O;var z = this.getContainer(),H = hr(this.controlBox, c, this.controlBox, this.getContainer(), this._rootContainer || z, []),G = [H.left, H.top],W = b(Ii(H), 4),K = W[0],Z = W[1],Y = W[2],X = W[3],J = (0, h.Qk)([K, Z, Y, X]),Q = [J.minX, J.minY],tt = dn(P[0] * P[1]);H.pos1 = (0, o.Rd)(K, Q), H.pos2 = (0, o.Rd)(Z, Q), H.pos3 = (0, o.Rd)(Y, Q), H.pos4 = (0, o.Rd)(X, Q), H.left = I - H.left + Q[0], H.top = F - H.top + Q[1], H.origin = (0, o.Rd)((0, o.tY)(G, H.origin), Q), H.beforeOrigin = (0, o.Rd)((0, o.tY)(G, H.beforeOrigin), Q), H.originalBeforeOrigin = (0, o.tY)(G, H.originalBeforeOrigin), H.transformOrigin = (0, o.Rd)((0, o.tY)(G, H.transformOrigin), Q), c.style.transform = "translate(".concat(-N - Q[0], "px, ").concat(-V - Q[1], "px)") + B, At(), this.updateState(y(y({}, H), { posDelta: Q, direction: tt, beforeDirection: tt }), i);}}, e.prototype.getRect = function () {return y(y({}, t.prototype.getRect.call(this)), { children: this.moveables.map(function (t) {return t.getRect();}) });}, e.prototype.triggerEvent = function (e, i, n) {if (n || e.indexOf("Group") > -1) return t.prototype.triggerEvent.call(this, e, i);this._emitter.trigger(e, i);}, e.prototype.getRequestChildStyles = function () {return this.getEnabledAbles().reduce(function (t, e) {var i,n,r = null !== (n = null === (i = e.requestChildStyle) || void 0 === i ? void 0 : i.call(e)) && void 0 !== n ? n : [];return w(w([], b(t), !1), b(r), !1);}, []);}, e.prototype.getMoveables = function () {return w([], b(this.moveables), !1);}, e.prototype.updateAbles = function () {t.prototype.updateAbles.call(this, w(w([], b(this.props.ables), !1), [pr], !1), "Group");}, e.prototype._updateTargets = function () {t.prototype._updateTargets.call(this), this._originalDragTarget = this.props.dragTarget || this.areaElement, this._dragTarget = nn(this._originalDragTarget, !0);}, e.prototype._updateEvents = function () {var t = this.state,e = this.props,i = this._prevDragTarget,n = e.dragTarget || this.areaElement,r = e.targets,s = this.differ.update(r),o = s.added,a = s.changed,l = s.removed,c = o.length || l.length;(c || this._prevOriginalDragTarget !== this._originalDragTarget) && (Ri(this, !1), Ri(this, !0), this.updateState({ gestos: {} })), i !== n && (t.target = null), t.target || (t.target = this.areaElement, this.controlBox.style.display = "block"), t.target && (this.targetGesto || (this.targetGesto = sr(this, this._dragTarget, "Group")), this.controlGesto || (this.controlGesto = or(this, "GroupControl")));var h = !qi(t.container, e.container);h && (t.container = e.container), (h || c || this.transformOrigin !== (e.defaultGroupOrigin || "50% 50%") || a.length || r.length && !hn(this._targetGroups, e.targetGroups || [])) && (this.updateRect(), this._hasFirstTargets = !0), this._isPropTargetChanged = !!c;}, e.prototype._updateObserver = function () {}, e.defaultProps = y(y({}, dr.defaultProps), { transformOrigin: ["50%", "50%"], groupable: !0, dragArea: !0, keepRatio: !0, targets: [], defaultGroupRotate: 0, defaultGroupOrigin: "50% 50%" }), e;}(dr),Ar = function (t) {function e() {var e = null !== t && t.apply(this, arguments) || this;return e.moveables = [], e;}return v(e, t), e.prototype.render = function () {var t,e = this,i = this.props,n = i.cspNonce,s = i.cssStyled,o = i.persistData,a = i.targets || [],l = a.length,c = this.isUnmounted || !l,h = null !== (t = null == o ? void 0 : o.children) && void 0 !== t ? t : [];return c && !l && h.length ? a = h.map(function () {return null;}) : c || (h = []), u.n(s, { cspNonce: n, ref: (0, r.KR)(this, "controlBox"), className: ii("control-box") }, a.map(function (t, n) {var s,o,a = null !== (o = null === (s = i.individualGroupableProps) || void 0 === s ? void 0 : s.call(i, t, n)) && void 0 !== o ? o : {};return u.n(dr, y({ key: "moveable" + n, ref: (0, r.DY)(e, "moveables", n) }, i, a, { target: t, wrapperMoveable: e, isWrapperMounted: e.isMoveableMounted, persistData: h[n] }));}));}, e.prototype.componentDidMount = function () {}, e.prototype.componentDidUpdate = function () {}, e.prototype.getTargets = function () {return this.props.targets;}, e.prototype.updateRect = function (t, e, i) {void 0 === i && (i = !0), At(!0), this.moveables.forEach(function (n) {n.updateRect(t, e, i);}), At();}, e.prototype.getRect = function () {return y(y({}, t.prototype.getRect.call(this)), { children: this.moveables.map(function (t) {return t.getRect();}) });}, e.prototype.request = function (t, e, i) {void 0 === e && (e = {});var n = this.moveables.map(function (i) {return i.request(t, y(y({}, e), { isInstant: !1 }), !1);}),r = { request: function (t) {return n.forEach(function (e) {return e.request(t);}), this;}, requestEnd: function () {return n.forEach(function (t) {return t.requestEnd();}), this;} };return i || e.isInstant ? r.request(e).requestEnd() : r;}, e.prototype.dragStart = function (t, e) {void 0 === e && (e = t.target);var i = e,n = (0, s.I6)(this.moveables, function (t) {var e = t.getTargets()[0],n = t.getControlBoxElement(),r = t.getDragElement();return !(!e || !r) && (r === i || r.contains(i) || r !== e && e === i || e.contains(i) || n === i || n.contains(i));});return n && n.dragStart(t, e), this;}, e.prototype.hitTest = function () {return 0;}, e.prototype.isInside = function () {return !1;}, e.prototype.isDragging = function () {return !1;}, e.prototype.getDragElement = function () {return null;}, e.prototype.getMoveables = function () {return w([], b(this.moveables), !1);}, e.prototype.updateRenderPoses = function () {}, e.prototype.checkUpdate = function () {}, e.prototype.triggerEvent = function () {}, e.prototype.updateAbles = function () {}, e.prototype._updateEvents = function () {}, e.prototype._updateObserver = function () {}, e;}(dr);function Mr(t, e) {var i = [];return t.forEach(function (t) {t && ((0, s.Kg)(t) ? e[t] && i.push.apply(i, w([], b(e[t]), !1)) : (0, s.cy)(t) ? i.push.apply(i, w([], b(Mr(t, e)), !1)) : i.push(t));}), i;}function _r(t, e) {var i = [];return t.forEach(function (t) {t && ((0, s.Kg)(t) ? e[t] && i.push.apply(i, w([], b(e[t]), !1)) : (0, s.cy)(t) ? i.push(_r(t, e)) : i.push(t));}), i;}function Pr(t, e) {return t.length !== e.length || t.some(function (t, i) {var n = e[i];return !(!t && !n) && t != n && (!(0, s.cy)(t) || !(0, s.cy)(n) || Pr(t, n));});}var Dr = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return v(e, t), e.defaultAbles = yr, e;}(function (t) {function e() {var e = null !== t && t.apply(this, arguments) || this;return e.refTargets = [], e.selectorMap = {}, e._differ = new l.A(), e._elementTargets = [], e._tmpRefTargets = [], e._tmpSelectorMap = {}, e._onChangeTargets = null, e;}return v(e, t), e.makeStyled = function () {var t = {};this.getTotalAbles().forEach(function (e) {var i = e.css;i && i.forEach(function (e) {t[e] = !0;});});var e = (0, s.xD)(t).join("\n");this.defaultStyled = (0, p.I4)("div", (0, r.SS)(N, B + e));}, e.getTotalAbles = function () {return w([On, pr, vr, Mn], b(this.defaultAbles), !1);}, e.prototype.render = function () {var t,e = this.constructor;e.defaultStyled || e.makeStyled();var i = this.props,n = i.ables,o = i.props,a = function (t, e) {var i = {};for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (i[n] = t[n]);if (null != t && "function" == typeof Object.getOwnPropertySymbols) {var r = 0;for (n = Object.getOwnPropertySymbols(t); r < n.length; r++) e.indexOf(n[r]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[r]) && (i[n[r]] = t[n[r]]);}return i;}(i, ["ables", "props"]),l = b(this._updateRefs(!0), 2),c = l[0],h = l[1],d = Mr(c, h),p = d.length > 1,f = w(w([], b(e.getTotalAbles()), !1), b(n || []), !1),g = y(y(y({}, a), o || {}), { ables: f, cssStyled: e.defaultStyled, customStyledMap: e.customStyledMap });this._elementTargets = d;var m = null,v = this.moveable,x = a.persistData;if ((null == x ? void 0 : x.children) && (p = !0), a.individualGroupable) return u.n(Ar, y({ key: "individual-group", ref: (0, r.KR)(this, "moveable") }, g, { target: null, targets: d }));if (p) {var S = _r(c, h);if (v && !v.props.groupable && !v.props.individualGroupable) {var E = v.props.target;E && d.indexOf(E) > -1 && (m = y({}, v.state));}return u.n(Tr, y({ key: "group", ref: (0, r.KR)(this, "moveable") }, g, null !== (t = a.groupableProps) && void 0 !== t ? t : {}, { target: null, targets: d, targetGroups: S, firstRenderState: m }));}var C = d[0];if (v && (v.props.groupable || v.props.individualGroupable)) {var k = v.moveables || [],T = (0, s.I6)(k, function (t) {return t.props.target === C;});T && (m = y({}, T.state));}return u.n(dr, y({ key: "single", ref: (0, r.KR)(this, "moveable") }, g, { target: C, firstRenderState: m }));}, e.prototype.componentDidMount = function () {this._checkChangeTargets();}, e.prototype.componentDidUpdate = function () {this._checkChangeTargets();}, e.prototype.componentWillUnmount = function () {this.selectorMap = {}, this.refTargets = [];}, e.prototype.getTargets = function () {var t, e;return null !== (e = null === (t = this.moveable) || void 0 === t ? void 0 : t.getTargets()) && void 0 !== e ? e : [];}, e.prototype.updateSelectors = function () {this.selectorMap = {}, this._updateRefs(), this.forceUpdate();}, e.prototype.waitToChangeTarget = function () {var t,e = this;return this._onChangeTargets = function () {e._onChangeTargets = null, t();}, new Promise(function (e) {t = e;});}, e.prototype.waitToChangeTargets = function () {return this.waitToChangeTarget();}, e.prototype.getManager = function () {return this.moveable;}, e.prototype.getMoveables = function () {return this.moveable.getMoveables();}, e.prototype.getDragElement = function () {return this.moveable.getDragElement();}, e.prototype._updateRefs = function (t) {var e = this.refTargets,i = rn(this.props.target || this.props.targets),n = "undefined" != typeof document,r = Pr(e, i),o = this.selectorMap,a = {};return this.refTargets.forEach(function t(e) {(0, s.Kg)(e) ? o[e] ? a[e] = o[e] : n && (r = !0, a[e] = [].slice.call(document.querySelectorAll(e))) : (0, s.cy)(e) && e.forEach(t);}), this._tmpRefTargets = i, this._tmpSelectorMap = a, [i, a, !t && r];}, e.prototype._checkChangeTargets = function () {var t, e, i;this.refTargets = this._tmpRefTargets, this.selectorMap = this._tmpSelectorMap;var n = this._differ.update(this._elementTargets),r = n.added,s = n.removed;(r.length || s.length) && (null === (e = (t = this.props).onChangeTargets) || void 0 === e || e.call(t, { moveable: this.moveable, targets: this._elementTargets }), null === (i = this._onChangeTargets) || void 0 === i || i.call(this));var o = b(this._updateRefs(), 3),a = o[0],l = o[1],c = o[2];this.refTargets = a, this.selectorMap = l, c && this.forceUpdate();}, e.defaultAbles = [], e.customStyledMap = {}, e.defaultStyled = null, function (t, e, i, n) {var r,s = arguments.length,o = s < 3 ? e : null === n ? n = Object.getOwnPropertyDescriptor(e, i) : n;if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(t, e, i, n);else for (var a = t.length - 1; a >= 0; a--) (r = t[a]) && (o = (s < 3 ? r(o) : s > 3 ? r(e, i, o) : r(e, i)) || o);s > 3 && o && Object.defineProperty(e, i, o);}([(0, r.RI)(Z)], e.prototype, "moveable", void 0), e;}(u.o6));}, 4089: (t, e, i) => {"use strict";const n = i(560);t.exports = (t, e, i) => n(t, e, i) >= 0;}, 4111: (t, e, i) => {"use strict";function n(t, e) {for (var i = t.length, n = 0; n < i; ++n) if (e(t[n], n)) return !0;return !1;}function r(t, e) {for (var i = t.length, n = 0; n < i; ++n) if (e(t[n], n)) return t[n];return null;}function s(t) {var e = t;if (void 0 === e) {if ("undefined" == typeof navigator || !navigator) return "";e = navigator.userAgent || "";}return e.toLowerCase();}function o(t, e) {try {return new RegExp(t, "g").exec(e);} catch (t) {return null;}}function a(t) {return t.replace(/_/g, ".");}function l(t, e) {var i = null,r = "-1";return n(t, function (t) {var n = o("(" + t.test + ")((?:\\/|\\s|:)([0-9|\\.|_]+))?", e);return !(!n || t.brand || (i = t, r = n[3] || "-1", t.versionAlias ? r = t.versionAlias : t.versionTest && (r = function (t, e) {var i = o("(" + t + ")((?:\\/|\\s|:)([0-9|\\.|_]+))", e);return i ? i[3] : "";}(t.versionTest.toLowerCase(), e) || r), r = a(r), 0));}), { preset: i, version: r };}function c(t, e) {var i = { brand: "", version: "-1" };return n(t, function (t) {var n = h(e, t);return !!n && (i.brand = t.id, i.version = t.versionAlias || n.version, "-1" !== i.version);}), i;}function h(t, e) {return r(t, function (t) {var i = t.brand;return o("" + e.test, i.toLowerCase());});}i.d(e, { Ay: () => v });var u = [{ test: "phantomjs", id: "phantomjs" }, { test: "whale", id: "whale" }, { test: "edgios|edge|edg", id: "edge" }, { test: "msie|trident|windows phone", id: "ie", versionTest: "iemobile|msie|rv" }, { test: "miuibrowser", id: "miui browser" }, { test: "samsungbrowser", id: "samsung internet" }, { test: "samsung", id: "samsung internet", versionTest: "version" }, { test: "chrome|crios", id: "chrome" }, { test: "firefox|fxios", id: "firefox" }, { test: "android", id: "android browser", versionTest: "version" }, { test: "safari|iphone|ipad|ipod", id: "safari", versionTest: "version" }],d = [{ test: "(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)", id: "chrome", versionTest: "chrome" }, { test: "chromium", id: "chrome" }, { test: "whale", id: "chrome", versionAlias: "-1", brand: !0 }],p = [{ test: "applewebkit", id: "webkit", versionTest: "applewebkit|safari" }],f = [{ test: "(?=(iphone|ipad))(?!(.*version))", id: "webview" }, { test: "(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))", id: "webview" }, { test: "webview", id: "webview" }],g = [{ test: "windows phone", id: "windows phone" }, { test: "windows 2000", id: "window", versionAlias: "5.0" }, { test: "windows nt", id: "window" }, { test: "win32|windows", id: "window" }, { test: "iphone|ipad|ipod", id: "ios", versionTest: "iphone os|cpu os" }, { test: "macos|macintel|mac os x", id: "mac" }, { test: "android|linux armv81", id: "android" }, { test: "tizen", id: "tizen" }, { test: "webos|web0s", id: "webos" }];function m(t) {return !!l(f, t).preset;}const v = function (t) {return void 0 === t && function () {if ("undefined" == typeof navigator || !navigator || !navigator.userAgentData) return !1;var t = navigator.userAgentData,e = t.brands || t.uaList;return !(!e || !e.length);}() ? function (t) {var e = navigator.userAgentData,i = (e.uaList || e.brands).slice(),o = t && t.fullVersionList,l = e.mobile || !1,v = i[0],y = (t && t.platform || e.platform || navigator.platform).toLowerCase(),b = { name: v.brand, version: v.version, majorVersion: -1, webkit: !1, webkitVersion: "-1", chromium: !1, chromiumVersion: "-1", webview: !!c(f, i).brand || m(s()) },w = { name: "unknown", version: "-1", majorVersion: -1 };b.webkit = !b.chromium && n(p, function (t) {return h(i, t);});var x = c(d, i);if (b.chromium = !!x.brand, b.chromiumVersion = x.version || "-1", !b.chromium) {var S = c(p, i);b.webkit = !!S.brand, b.webkitVersion = S.version || "-1";}var E = r(g, function (t) {return new RegExp("" + t.test, "g").exec(y);});if (w.name = E ? E.id : "", t && (w.version = t.platformVersion || "-1"), o && o.length) {var C = c(u, o);b.name = C.brand || b.name, b.version = C.version || b.version;} else {var k = c(u, i);b.name = k.brand || b.name, b.version = k.brand && t ? t.uaFullVersion : k.version;}return b.webkit && (w.name = l ? "ios" : "mac"), "ios" === w.name && b.webview && (b.version = "-1"), w.version = a(w.version), b.version = a(b.version), w.majorVersion = parseInt(w.version, 10), b.majorVersion = parseInt(b.version, 10), { browser: b, os: w, isMobile: l, isHints: !0 };}() : function (t) {var e = s(t),i = !!/mobi/g.exec(e),n = { name: "unknown", version: "-1", majorVersion: -1, webview: m(e), chromium: !1, chromiumVersion: "-1", webkit: !1, webkitVersion: "-1" },r = { name: "unknown", version: "-1", majorVersion: -1 },o = l(u, e),a = o.preset,c = o.version,h = l(g, e),f = h.preset,v = h.version,y = l(d, e);if (n.chromium = !!y.preset, n.chromiumVersion = y.version, !n.chromium) {var b = l(p, e);n.webkit = !!b.preset, n.webkitVersion = b.version;}return f && (r.name = f.id, r.version = v, r.majorVersion = parseInt(v, 10)), a && (n.name = a.id, n.version = c, n.webview && "ios" === r.name && "safari" !== n.name && (n.webview = !1)), n.majorVersion = parseInt(n.version, 10), { browser: n, os: r, isMobile: i, isHints: !1 };}(t);};}, 4115: (t, e, i) => {"use strict";i.d(e, { m: () => s, w: () => o });var n = i(906),r = i(2216);const s = "remove-ms-map-btn";class o extends n.g {passwordInput;get validationCallbackData() {return this.passwordInput?.value.trim();}constructor(t) {t.icon = "delete", t.title = "Delete Map", t.description = t.protected ? `"${t.mapName}" map is protected. Enter map password to delete it from the storage.` : `Delete "${t.mapName}" map from the storage?`, super(t);}addPasswordInput() {this.toggleButton(s, !0), this.passwordInput = (0, r.O)(this.boxContent, { labelMinWidth: "80px", label: "Password", placeholder: "Enter map password", visibilityToggle: !0, onInput: (t, e) => this.toggleButton(s, !e.value.trim().length) }).querySelector("input"), this.passwordInput.focus();}draw() {return this.create(), this.boxContent.classList.add("gap", "margin-top"), this.config.protected ? (this.addPasswordInput(), this.addValidationErrorBox()) : this.boxContent.remove(), super.draw();}}}, 4159: (t, e, i) => {"use strict";function n(t, e = 1) {const i = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(function (t) {return "#" !== t.substring(0, 1) && (t = "#" + t), 4 == t.length && (t += t.substring(1, 3)), t.toLowerCase();}(t));return { r: i ? parseInt(i[1], 16) : 0, g: i ? parseInt(i[2], 16) : 0, b: i ? parseInt(i[3], 16) : 0, a: e };}function r(t) {return `rgba(${t.r}, ${t.g}, ${t.b}, ${null != t.a ? t.a : 1})`;}function s(t, e = 1) {if (!t) return "#000";const i = "rgb" == t.slice(0, 3) ? function (t) {const [e, i, n, r] = t.split(",");return { r: parseInt("a" == e[3] ? e.slice(5) : e.slice(4)), g: parseInt(i), b: parseInt(n), a: r ? parseInt(r) : 1 };}(t) : n(t);return o(e * (Math.round((299 * i.r + 587 * i.g + 114 * i.b) / 1e3) > 140 ? -1 : 1), t);}function o(t, e, i = null, n = !1) {let r, s, o, a, l, c, h;const u = parseInt,d = Math.round;let p = Number("string" == typeof i);if ("number" != typeof t || t < -1 || t > 1 || "string" != typeof e || "r" != e[0] && "#" != e[0] || i && !p) return null;const f = (t) => {let e = t.length;const i = {};if (e > 9) {if ([r, s, o, p] = t = t.split(","), e = t.length, e < 3 || e > 4) return null;i.r = u("a" == r[3] ? r.slice(5) : r.slice(4)), i.g = u(s), i.b = u(o), i.a = p || -1;} else {if (8 == e || 6 == e || e < 4) return null;e < 6 && (t = "#" + t[1] + t[1] + t[2] + t[2] + t[3] + t[3] + (e > 4 ? t[4] + t[4] : "")), t = u(t.slice(1), 16), 9 == e || 5 == e ? (i.r = t >> 24 & 255, i.g = t >> 16 & 255, i.b = t >> 8 & 255, i.a = d((255 & t) / .255) / 1e3) : (i.r = t >> 16, i.g = t >> 8 & 255, i.b = 255 & t, i.a = -1);}return i;};return h = e.length > 9, h = p ? i.length > 9 || "c" == i && !h : h, l = f(e), a = t < 0, c = i && "c" != i ? f(i) : a ? { r: 0, g: 0, b: 0, a: -1 } : { r: 255, g: 255, b: 255, a: -1 }, a = 1 - (t = a ? -1 * t : t), l && c ? (n ? (r = d(a * l.r + t * c.r), s = d(a * l.g + t * c.g), o = d(a * l.b + t * c.b)) : (r = d((a * l.r ** 2 + t * c.r ** 2) ** .5), s = d((a * l.g ** 2 + t * c.g ** 2) ** .5), o = d((a * l.b ** 2 + t * c.b ** 2) ** .5)), p = l.a, c = c.a, l = p >= 0 || c >= 0, p = l ? p < 0 ? c : c < 0 ? p : p * a + c * t : 0, h ? "rgb" + (l ? "a(" : "(") + r + "," + s + "," + o + (l ? "," + d(1e3 * p) / 1e3 : "") + ")" : "#" + (4294967296 + 16777216 * r + 65536 * s + 256 * o + (l ? d(255 * p) : 0)).toString(16).slice(1, l ? void 0 : -2)) : null;}i.d(e, { aS: () => r, dy: () => o, iN: () => n, sP: () => s });}, 4181: (t, e, i) => {"use strict";var n;i.d(e, { X: () => n, o: () => r }), function (t) {t.Normal = "visionNormal", t.Protanopia = "visionProtanopia", t.Protanomaly = "visionProtanomaly", t.Deuteranopia = "visionDeuteranopia", t.Deuteranomaly = "visionDeuteranomaly", t.Tritanopia = "visionTritanopia", t.Tritanomaly = "visionTritanomaly", t.Achromatopsia = "visionAchromatopsia", t.Achromatomaly = "visionAchromatomaly", t.LowContrast = "visionLowContrast";}(n || (n = {}));class r {static apply(t, e) {const i = document.getElementById("visionFilter");i && i.remove();const r = e || document.body,s = t === n.Normal;s || r.appendChild(new DOMParser().parseFromString('<svg xmlns="http://www.w3.org/2000/svg" id="visionFilter" style="position: absolute; width: 0; height:0"><defs><filter id="visionNormal"><feColorMatrix values="1 0 0 0 0\t\t\t\t0 1 0 0 0\t\t\t\t0 0 1 0 0\t\t\t\t0 0 0 1 0" /></filter><filter id="visionProtanopia" color-interpolation-filters="sRGB"><feColorMatrix values="0.152286 1.052583 -0.204868 0 0\t\t\t\t0.114503 0.786281 0.099216 0 0\t\t\t\t-0.003882 -0.048116 1.051998 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionProtanomaly" color-interpolation-filters="sRGB"><feColorMatrix values="0.458064 0.679578 -0.137642 0 0\t\t\t\t0.092785 0.846313 0.060902 0 0\t\t\t\t-0.007494 -0.016807 1.024301 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionDeuteranopia" color-interpolation-filters="sRGB"><feColorMatrix values="0.367322 0.860646 -0.227968 0 0\t\t\t\t0.280085 0.672501 0.047413 0 0\t\t\t\t-0.011820 0.042940 0.968881 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionDeuteranomaly" color-interpolation-filters="sRGB"><feColorMatrix values="0.547494 0.607765 -0.155259 0 0\t\t\t\t0.181692 0.781742 0.036566 0 0\t\t\t\t-0.010410 0.027275 0.983136 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionTritanopia" color-interpolation-filters="sRGB"><feColorMatrix values="1.255528 -0.076749 -0.178779 0 0\t\t\t\t-0.078411 0.930809 0.147602 0 0\t\t\t\t0.004733 0.691367 0.303900 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionTritanomaly" color-interpolation-filters="sRGB"><feColorMatrix values="1.017277 0.027029 -0.044306 0 0\t\t\t\t-0.006113 0.958479 0.047634 0 0\t\t\t\t0.006379 0.248708 0.744913 0 0\t\t\t\t0 0 0 1 0" /><feComponentTransfer><feFuncB type="gamma" exponent=".9" /><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionAchromatopsia" color-interpolation-filters="sRGB"><feColorMatrix values="0.212656 0.715158 0.072186 0 0\t\t\t\t0.212656 0.715158 0.072186 0 0\t\t\t\t0.212656 0.715158 0.072186 0 0\t\t\t\t0 0 0 1 0" /><feColorMatrix type="saturate" values="0" color-interpolation-filters="sRGB" /><feComponentTransfer><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /><feFuncB type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionAchromatomaly" color-interpolation-filters="sRGB"><feColorMatrix type="saturate" values="0.5" /><feComponentTransfer><feFuncR type="gamma" exponent=".9" /><feFuncG type="gamma" exponent=".9" /><feFuncB type="gamma" exponent=".9" /></feComponentTransfer></filter><filter id="visionLowContrast" color-interpolation-filters="sRGB"><feComponentTransfer><feFuncR type="linear" slope=".5" intercept=".25" /><feFuncG type="linear" slope=".5" intercept=".25" /><feFuncB type="linear" slope=".5" intercept=".25" /></feComponentTransfer></filter></defs></svg>', "image/svg+xml").documentElement), r.style.filter = s ? "none" : `url(#${t})`;}}}, 4182: (t, e, i) => {"use strict";i.r(e), i.d(e, { ExtendedType: () => s, FormattingType: () => f, GeographyType: () => d, MiscellaneousType: () => p, PrimitiveType: () => n, ScriptType: () => h, TemporalType: () => u, ValueType: () => c });var n,r,s,o,a = i(2879),l = i(5038);class c {constructor(t, e, i, n) {this.underlyingType = t, this.category = e, a.hasFlag(t, s.Temporal) && (this.temporalType = new u(t)), a.hasFlag(t, s.Geography) && (this.geographyType = new d(t)), a.hasFlag(t, s.Miscellaneous) && (this.miscType = new p(t)), a.hasFlag(t, s.Formatting) && (this.formattingType = new f(t)), a.hasFlag(t, s.Enumeration) && (this.enumType = i), a.hasFlag(t, s.Scripting) && (this.scriptingType = new h(t)), a.hasFlag(t, s.Variant) && (this.variationTypes = n);}static fromDescriptor(t) {if ((t = t || {}).text) return c.fromExtendedType(s.Text);if (t.integer) return c.fromExtendedType(s.Integer);if (t.numeric) return c.fromExtendedType(s.Double);if (t.bool) return c.fromExtendedType(s.Boolean);if (t.dateTime) return c.fromExtendedType(s.DateTime);if (t.duration) return c.fromExtendedType(s.Duration);if (t.binary) return c.fromExtendedType(s.Binary);if (t.none) return c.fromExtendedType(s.None);if (t.scripting && t.scripting.source) return c.fromExtendedType(s.ScriptSource);if (t.enumeration) return c.fromEnum(t.enumeration);if (t.temporal) {if (t.temporal.year) return c.fromExtendedType(s.Years_Integer);if (t.temporal.quarter) return c.fromExtendedType(s.Quarters_Integer);if (t.temporal.month) return c.fromExtendedType(s.Months_Integer);if (t.temporal.day) return c.fromExtendedType(s.DayOfMonth_Integer);if (t.temporal.paddedDateTableDate) return c.fromExtendedType(s.PaddedDateTableDates);}if (t.geography) {if (t.geography.address) return c.fromExtendedType(s.Address);if (t.geography.city) return c.fromExtendedType(s.City);if (t.geography.continent) return c.fromExtendedType(s.Continent);if (t.geography.country) return c.fromExtendedType(s.Country);if (t.geography.county) return c.fromExtendedType(s.County);if (t.geography.region) return c.fromExtendedType(s.Region);if (t.geography.postalCode) return c.fromExtendedType(s.PostalCode_Text);if (t.geography.stateOrProvince) return c.fromExtendedType(s.StateOrProvince);if (t.geography.place) return c.fromExtendedType(s.Place);if (t.geography.latitude) return c.fromExtendedType(s.Latitude_Double);if (t.geography.longitude) return c.fromExtendedType(s.Longitude_Double);}if (t.misc) {if (t.misc.image) return c.fromExtendedType(s.Image);if (t.misc.imageUrl) return c.fromExtendedType(s.ImageUrl);if (t.misc.webUrl) return c.fromExtendedType(s.WebUrl);if (t.misc.barcode) return c.fromExtendedType(s.Barcode_Text);}if (t.formatting) {if (t.formatting.color) return c.fromExtendedType(s.Color);if (t.formatting.formatString) return c.fromExtendedType(s.FormatString);if (t.formatting.alignment) return c.fromExtendedType(s.Alignment);if (t.formatting.labelDisplayUnits) return c.fromExtendedType(s.LabelDisplayUnits);if (t.formatting.fontSize) return c.fromExtendedType(s.FontSize);if (t.formatting.labelDensity) return c.fromExtendedType(s.LabelDensity);}if (t.extendedType) return c.fromExtendedType(t.extendedType);if (t.operations && t.operations.searchEnabled) return c.fromExtendedType(s.SearchEnabled);if (t.variant) {const e = t.variant.map((t) => c.fromDescriptor(t));return c.fromVariant(e);}return c.fromExtendedType(s.Null);}static fromExtendedType(t) {const e = y(t = t || s.Null),i = function (t) {if (function (t) {return (t & m) === t;}(t)) return null;let e = o[t];if (e) {const t = e.lastIndexOf("_");if (t > 0) {const i = e.slice(0, t);o[i] && (e = i);}}return e || null;}(t);return c.fromPrimitiveTypeAndCategory(e, i);}static fromPrimitiveTypeAndCategory(t, e) {e = e || null;let i = (t = t || n.Null).toString();return e && (i += "|" + e), c.typeCache[i] || (c.typeCache[i] = new c(function (t, e) {const i = r[t];let a = o[i];if (null == a && (a = s.Null), t && e) {let i = o[e];if (i) {const e = y(i);e === n.Null ? (i |= a, o[i] && (a = i)) : e === t && (a = i);}}return a;}(t, e), e));}static fromEnum(t) {return new c(s.Enumeration, null, t);}static fromVariant(t) {return new c(s.Variant, null, null, t);}static isCompatibleTo(t, e) {const i = c.fromDescriptor(t);for (const t of e) if (c.fromDescriptor(t).isCompatibleFrom(i)) return !0;return !1;}isCompatibleFrom(t) {const e = t.primitiveType;return !!(this === t || this.primitiveType === e || e === n.Null || this.numeric && t.numeric);}equals(t) {return (0, l.equals)(this, t);}get primitiveType() {return y(this.underlyingType);}get extendedType() {return this.underlyingType;}get categoryString() {return this.category;}get text() {return this.primitiveType === n.Text;}get numeric() {return a.hasFlag(this.underlyingType, s.Numeric);}get integer() {return this.primitiveType === n.Integer;}get bool() {return this.primitiveType === n.Boolean;}get dateTime() {return this.primitiveType === n.DateTime || this.primitiveType === n.Date || this.primitiveType === n.Time;}get duration() {return this.primitiveType === n.Duration;}get binary() {return this.primitiveType === n.Binary;}get none() {return this.primitiveType === n.None;}get temporal() {return this.temporalType;}get geography() {return this.geographyType;}get misc() {return this.miscType;}get formatting() {return this.formattingType;}get enumeration() {return this.enumType;}get scripting() {return this.scriptingType;}get variant() {return this.variationTypes;}}c.typeCache = {};class h {constructor(t) {this.underlyingType = t;}get source() {return b(this.underlyingType, s.ScriptSource);}}class u {constructor(t) {this.underlyingType = t;}get year() {return b(this.underlyingType, s.Years);}get quarter() {return b(this.underlyingType, s.Quarters);}get month() {return b(this.underlyingType, s.Months);}get day() {return b(this.underlyingType, s.DayOfMonth);}get paddedDateTableDate() {return b(this.underlyingType, s.PaddedDateTableDates);}}class d {constructor(t) {this.underlyingType = t;}get address() {return b(this.underlyingType, s.Address);}get city() {return b(this.underlyingType, s.City);}get continent() {return b(this.underlyingType, s.Continent);}get country() {return b(this.underlyingType, s.Country);}get county() {return b(this.underlyingType, s.County);}get region() {return b(this.underlyingType, s.Region);}get postalCode() {return b(this.underlyingType, s.PostalCode);}get stateOrProvince() {return b(this.underlyingType, s.StateOrProvince);}get place() {return b(this.underlyingType, s.Place);}get latitude() {return b(this.underlyingType, s.Latitude);}get longitude() {return b(this.underlyingType, s.Longitude);}}class p {constructor(t) {this.underlyingType = t;}get image() {return b(this.underlyingType, s.Image);}get imageUrl() {return b(this.underlyingType, s.ImageUrl);}get webUrl() {return b(this.underlyingType, s.WebUrl);}get barcode() {return b(this.underlyingType, s.Barcode);}}class f {constructor(t) {this.underlyingType = t;}get color() {return b(this.underlyingType, s.Color);}get formatString() {return b(this.underlyingType, s.FormatString);}get alignment() {return b(this.underlyingType, s.Alignment);}get labelDisplayUnits() {return b(this.underlyingType, s.LabelDisplayUnits);}get fontSize() {return b(this.underlyingType, s.FontSize);}get labelDensity() {return b(this.underlyingType, s.LabelDensity);}}!function (t) {t[t.Null = 0] = "Null", t[t.Text = 1] = "Text", t[t.Decimal = 2] = "Decimal", t[t.Double = 3] = "Double", t[t.Integer = 4] = "Integer", t[t.Boolean = 5] = "Boolean", t[t.Date = 6] = "Date", t[t.DateTime = 7] = "DateTime", t[t.DateTimeZone = 8] = "DateTimeZone", t[t.Time = 9] = "Time", t[t.Duration = 10] = "Duration", t[t.Binary = 11] = "Binary", t[t.None = 12] = "None", t[t.Variant = 13] = "Variant";}(n || (n = {})), function (t) {t[t.Null = 0] = "Null", t[t.Text = 1] = "Text", t[t.Decimal = 2] = "Decimal", t[t.Double = 3] = "Double", t[t.Integer = 4] = "Integer", t[t.Boolean = 5] = "Boolean", t[t.Date = 6] = "Date", t[t.DateTime = 7] = "DateTime", t[t.DateTimeZone = 8] = "DateTimeZone", t[t.Time = 9] = "Time", t[t.Duration = 10] = "Duration", t[t.Binary = 11] = "Binary", t[t.None = 12] = "None", t[t.Variant = 13] = "Variant";}(r || (r = {})), function (t) {t[t.Numeric = 256] = "Numeric", t[t.Temporal = 512] = "Temporal", t[t.Geography = 1024] = "Geography", t[t.Miscellaneous = 2048] = "Miscellaneous", t[t.Formatting = 4096] = "Formatting", t[t.Scripting = 8192] = "Scripting", t[t.Null = 0] = "Null", t[t.Text = 1] = "Text", t[t.Decimal = 258] = "Decimal", t[t.Double = 259] = "Double", t[t.Integer = 260] = "Integer", t[t.Boolean = 5] = "Boolean", t[t.Date = 518] = "Date", t[t.DateTime = 519] = "DateTime", t[t.DateTimeZone = 520] = "DateTimeZone", t[t.Time = 521] = "Time", t[t.Duration = 10] = "Duration", t[t.Binary = 11] = "Binary", t[t.None = 12] = "None", t[t.Variant = 13] = "Variant", t[t.Years = 66048] = "Years", t[t.Years_Text = 66049] = "Years_Text", t[t.Years_Integer = 66308] = "Years_Integer", t[t.Years_Date = 66054] = "Years_Date", t[t.Years_DateTime = 66055] = "Years_DateTime", t[t.Months = 131584] = "Months", t[t.Months_Text = 131585] = "Months_Text", t[t.Months_Integer = 131844] = "Months_Integer", t[t.Months_Date = 131590] = "Months_Date", t[t.Months_DateTime = 131591] = "Months_DateTime", t[t.PaddedDateTableDates = 197127] = "PaddedDateTableDates", t[t.Quarters = 262656] = "Quarters", t[t.Quarters_Text = 262657] = "Quarters_Text", t[t.Quarters_Integer = 262916] = "Quarters_Integer", t[t.Quarters_Date = 262662] = "Quarters_Date", t[t.Quarters_DateTime = 262663] = "Quarters_DateTime", t[t.DayOfMonth = 328192] = "DayOfMonth", t[t.DayOfMonth_Text = 328193] = "DayOfMonth_Text", t[t.DayOfMonth_Integer = 328452] = "DayOfMonth_Integer", t[t.DayOfMonth_Date = 328198] = "DayOfMonth_Date", t[t.DayOfMonth_DateTime = 328199] = "DayOfMonth_DateTime", t[t.Address = 6554625] = "Address", t[t.City = 6620161] = "City", t[t.Continent = 6685697] = "Continent", t[t.Country = 6751233] = "Country", t[t.County = 6816769] = "County", t[t.Region = 6882305] = "Region", t[t.PostalCode = 6947840] = "PostalCode", t[t.PostalCode_Text = 6947841] = "PostalCode_Text", t[t.PostalCode_Integer = 6948100] = "PostalCode_Integer", t[t.StateOrProvince = 7013377] = "StateOrProvince", t[t.Place = 7078913] = "Place", t[t.Latitude = 7144448] = "Latitude", t[t.Latitude_Decimal = 7144706] = "Latitude_Decimal", t[t.Latitude_Double = 7144707] = "Latitude_Double", t[t.Longitude = 7209984] = "Longitude", t[t.Longitude_Decimal = 7210242] = "Longitude_Decimal", t[t.Longitude_Double = 7210243] = "Longitude_Double", t[t.Image = 13109259] = "Image", t[t.ImageUrl = 13174785] = "ImageUrl", t[t.WebUrl = 13240321] = "WebUrl", t[t.Barcode = 13305856] = "Barcode", t[t.Barcode_Text = 13305857] = "Barcode_Text", t[t.Barcode_Integer = 13306116] = "Barcode_Integer", t[t.Color = 19664897] = "Color", t[t.FormatString = 19730433] = "FormatString", t[t.Alignment = 20058113] = "Alignment", t[t.LabelDisplayUnits = 20123649] = "LabelDisplayUnits", t[t.FontSize = 20189443] = "FontSize", t[t.LabelDensity = 20254979] = "LabelDensity", t[t.Enumeration = 26214401] = "Enumeration", t[t.ScriptSource = 32776193] = "ScriptSource", t[t.SearchEnabled = 65541] = "SearchEnabled";}(s || (s = {})), function (t) {t[t.Numeric = 256] = "Numeric", t[t.Temporal = 512] = "Temporal", t[t.Geography = 1024] = "Geography", t[t.Miscellaneous = 2048] = "Miscellaneous", t[t.Formatting = 4096] = "Formatting", t[t.Scripting = 8192] = "Scripting", t[t.Null = 0] = "Null", t[t.Text = 1] = "Text", t[t.Decimal = 258] = "Decimal", t[t.Double = 259] = "Double", t[t.Integer = 260] = "Integer", t[t.Boolean = 5] = "Boolean", t[t.Date = 518] = "Date", t[t.DateTime = 519] = "DateTime", t[t.DateTimeZone = 520] = "DateTimeZone", t[t.Time = 521] = "Time", t[t.Duration = 10] = "Duration", t[t.Binary = 11] = "Binary", t[t.None = 12] = "None", t[t.Variant = 13] = "Variant", t[t.Years = 66048] = "Years", t[t.Years_Text = 66049] = "Years_Text", t[t.Years_Integer = 66308] = "Years_Integer", t[t.Years_Date = 66054] = "Years_Date", t[t.Years_DateTime = 66055] = "Years_DateTime", t[t.Months = 131584] = "Months", t[t.Months_Text = 131585] = "Months_Text", t[t.Months_Integer = 131844] = "Months_Integer", t[t.Months_Date = 131590] = "Months_Date", t[t.Months_DateTime = 131591] = "Months_DateTime", t[t.PaddedDateTableDates = 197127] = "PaddedDateTableDates", t[t.Quarters = 262656] = "Quarters", t[t.Quarters_Text = 262657] = "Quarters_Text", t[t.Quarters_Integer = 262916] = "Quarters_Integer", t[t.Quarters_Date = 262662] = "Quarters_Date", t[t.Quarters_DateTime = 262663] = "Quarters_DateTime", t[t.DayOfMonth = 328192] = "DayOfMonth", t[t.DayOfMonth_Text = 328193] = "DayOfMonth_Text", t[t.DayOfMonth_Integer = 328452] = "DayOfMonth_Integer", t[t.DayOfMonth_Date = 328198] = "DayOfMonth_Date", t[t.DayOfMonth_DateTime = 328199] = "DayOfMonth_DateTime", t[t.Address = 6554625] = "Address", t[t.City = 6620161] = "City", t[t.Continent = 6685697] = "Continent", t[t.Country = 6751233] = "Country", t[t.County = 6816769] = "County", t[t.Region = 6882305] = "Region", t[t.PostalCode = 6947840] = "PostalCode", t[t.PostalCode_Text = 6947841] = "PostalCode_Text", t[t.PostalCode_Integer = 6948100] = "PostalCode_Integer", t[t.StateOrProvince = 7013377] = "StateOrProvince", t[t.Place = 7078913] = "Place", t[t.Latitude = 7144448] = "Latitude", t[t.Latitude_Decimal = 7144706] = "Latitude_Decimal", t[t.Latitude_Double = 7144707] = "Latitude_Double", t[t.Longitude = 7209984] = "Longitude", t[t.Longitude_Decimal = 7210242] = "Longitude_Decimal", t[t.Longitude_Double = 7210243] = "Longitude_Double", t[t.Image = 13109259] = "Image", t[t.ImageUrl = 13174785] = "ImageUrl", t[t.WebUrl = 13240321] = "WebUrl", t[t.Barcode = 13305856] = "Barcode", t[t.Barcode_Text = 13305857] = "Barcode_Text", t[t.Barcode_Integer = 13306116] = "Barcode_Integer", t[t.Color = 19664897] = "Color", t[t.FormatString = 19730433] = "FormatString", t[t.Alignment = 20058113] = "Alignment", t[t.LabelDisplayUnits = 20123649] = "LabelDisplayUnits", t[t.FontSize = 20189443] = "FontSize", t[t.LabelDensity = 20254979] = "LabelDensity", t[t.Enumeration = 26214401] = "Enumeration", t[t.ScriptSource = 32776193] = "ScriptSource", t[t.SearchEnabled = 65541] = "SearchEnabled";}(o || (o = {}));const g = 255,m = 65535,v = 4294901760;function y(t) {return t & g;}function b(t, e) {return (t & v) === (e & v);}}, 4215: (t, e, i) => {"use strict";i.d(e, { F: () => r });var n = i(3394);class r extends n.i {get className() {return "oop-slice";}}}, 4228: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(3363);function r(t) {var e = this._id;return arguments.length ? this.each(function (t, e) {if ("function" != typeof e) throw new Error();return function () {(0, n.hZ)(this, t).ease = e;};}(e, t)) : (0, n.Jt)(this.node(), e).ease;}}, 4237: (t, e, i) => {"use strict";i.d(e, { Gz: () => a, aZ: () => c, bv: () => l, cb: () => u, eA: () => h, mE: () => d, tO: () => p });var n = i(7345),r = i(100),s = i(7077),o = i(6481);function a(t) {try {return new URL(t), !0;} catch (t) {return !1;}}async function l(t, e = !0, i = !0, r = !1) {const s = async (t) => {try {r && (t = ((t) => {const e = new URL(t);return e.searchParams.set("nocache", Date.now().toString()), e.toString();})(t));const e = await http(t);if (!e.ok) {let t = "UNREACHABLE";switch (e.status) {case 401:case 403:t = "UNAUTHORIZED";break;case 404:t = "NOT_FOUND";}return (0, n.T)(t);}return await e.text();} catch (t) {return (0, n.T)(t);}},a = [t];let l;e && [".svg", ".xml", ""].forEach((e) => {const i = t.replace(/\.svg$/, e);-1 === a.indexOf(i) && a.push(i);const n = i.toLowerCase();-1 === a.indexOf(n) && a.push(n);const r = i.replace(/ /g, "-");-1 === a.indexOf(r) && a.push(r);const s = r.toLowerCase();-1 === a.indexOf(s) && a.push(s);});for (let t = 0; t < a.length; t++) {const e = await s(a[t]);if ("string" == typeof e) {const t = (0, o.$D)(e);if (t.isValid) return e;if (i) throw t.error;return null;}0 == t && (l = e);}if (l && i) throw l;return null;}function c(t) {try {const e = new URL(t);return e.searchParams.has("name") ? e.searchParams.get("name") : "/" !== e.pathname && "" !== e.pathname.trim() ? (0, s.T3)(decodeURIComponent(e.pathname.split("/").pop())) : e.hostname;} catch (e) {return t;}}function h(t) {const e = new URL(t);return e.origin + e.pathname;}function u(t) {const e = new URL(t),i = e.href.lastIndexOf("/");return e.href.substring(0, i);}function d(t) {return t.match(/^http(s?):\/\//) || (t = `https://${t}`), t;}function p(t) {return new RegExp(`^https://[^./]+.${r.Lu.rootDomain}`).test(t);}}, 4275: (t, e, i) => {"use strict";function n(t) {return t instanceof Error || t && t.message;}i.d(e, { b: () => n });}, 4277: (t, e, i) => {"use strict";const n = i(909);t.exports = (t, e) => t.sort((t, i) => n(i, t, e));}, 4287: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(8503);function r(t, e) {var i,r = {},s = {};for (i in null !== t && "object" == typeof t || (t = {}), null !== e && "object" == typeof e || (e = {}), e) i in t ? r[i] = (0, n.A)(t[i], e[i]) : s[i] = e[i];return function (t) {for (i in r) s[i] = r[i](t);return s;};}}, 4298: (t, e, i) => {"use strict";function n(t, e) {return (t || e) && !(t && e);}i.r(e), i.d(e, { XOR: () => n });}, 4338: (t, e, i) => {"use strict";i.d(e, { $z: () => c, B4: () => p, B8: () => l, Di: () => b, GD: () => P, Rd: () => m, XI: () => A, YO: () => E, ZB: () => y, Zt: () => S, _C: () => d, bn: () => a, e$: () => C, ez: () => u, iv: () => k, k8: () => M, kN: () => h, kb: () => _, lw: () => f, n_: () => T, pE: () => w, qL: () => D, qh: () => x, tY: () => g, zs: () => v });var n = i(7728);function r(t, e, i, n, r, s) {for (var o = 0; o < r; ++o) {var a = i + o * r,l = n + o * r;t[a] += t[l] * s, e[a] += e[l] * s;}}function s(t, e, i, n, r) {for (var s = 0; s < r; ++s) {var o = i + s * r,a = n + s * r,l = t[o],c = e[o];t[o] = t[a], t[a] = l, e[o] = e[a], e[a] = c;}}function o(t, e, i, n, r) {for (var s = 0; s < n; ++s) {var o = i + s * n;t[o] /= r, e[o] /= r;}}function a(t, e, i) {void 0 === i && (i = Math.sqrt(t.length));for (var n = t.slice(), r = 0; r < i; ++r) n[r * i + e - 1] = 0, n[(e - 1) * i + r] = 0;return n[(e - 1) * (i + 1)] = 1, n;}function l(t, e) {void 0 === e && (e = Math.sqrt(t.length));for (var i = t.slice(), a = M(e), l = 0; l < e; ++l) {var c = e * l + l;if (!(0, n.nF)(i[c], n._4)) for (var h = l + 1; h < e; ++h) if (i[e * l + h]) {s(i, a, l, h, e);break;}if (!(0, n.nF)(i[c], n._4)) return [];for (o(i, a, l, e, i[c]), h = 0; h < e; ++h) {var u = h,d = i[h + l * e];(0, n.nF)(d, n._4) && l !== h && r(i, a, u, l, e, -d);}}return a;}function c(t, e) {void 0 === e && (e = Math.sqrt(t.length));for (var i = [], n = t[e * e - 1], r = 0; r < e - 1; ++r) i[r] = t[e * (e - 1) + r] / n;return i[e - 1] = 0, i;}function h(t, e) {for (var i = M(e), n = 0; n < e - 1; ++n) i[e * (e - 1) + n] = t[n] || 0;return i;}function u(t, e) {for (var i = t.slice(), n = t.length; n < e - 1; ++n) i[n] = 0;return i[e - 1] = 1, i;}function d(t, e, i) {if (void 0 === e && (e = Math.sqrt(t.length)), e === i) return t;for (var n = M(i), r = Math.min(e, i), s = 0; s < r - 1; ++s) {for (var o = 0; o < r - 1; ++o) n[s * i + o] = t[s * e + o];n[(s + 1) * i - 1] = t[(s + 1) * e - 1], n[(i - 1) * i + s] = t[(e - 1) * e + s];}return n[i * i - 1] = t[e * e - 1], n;}function p(t) {for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];var n = M(t);return e.forEach(function (e) {n = f(n, e, t);}), n;}function f(t, e, i) {void 0 === i && (i = Math.sqrt(t.length));var n = [],r = t.length / i,s = e.length / r;if (!r) return e;if (!s) return t;for (var o = 0; o < i; ++o) for (var a = 0; a < s; ++a) {n[a * i + o] = 0;for (var l = 0; l < r; ++l) n[a * i + o] += t[l * i + o] * e[a * r + l];}return n;}function g(t, e) {for (var i = Math.min(t.length, e.length), n = t.slice(), r = 0; r < i; ++r) n[r] = n[r] + e[r];return n;}function m(t, e) {for (var i = Math.min(t.length, e.length), n = t.slice(), r = 0; r < i; ++r) n[r] = n[r] - e[r];return n;}function v(t, e) {return void 0 === e && (e = 6 === t.length), e ? [t[0], t[1], 0, t[2], t[3], 0, t[4], t[5], 1] : t;}function y(t, e) {return void 0 === e && (e = 9 === t.length), e ? [t[0], t[1], t[3], t[4], t[6], t[7]] : t;}function b(t, e, i) {void 0 === i && (i = e.length);var n = f(t, e, i),r = n[i - 1];return n.map(function (t) {return t / r;});}function w(t, e) {return f(t, [1, 0, 0, 0, 0, Math.cos(e), Math.sin(e), 0, 0, -Math.sin(e), Math.cos(e), 0, 0, 0, 0, 1], 4);}function x(t, e) {return f(t, [Math.cos(e), 0, -Math.sin(e), 0, 0, 1, 0, 0, Math.sin(e), 0, Math.cos(e), 0, 0, 0, 0, 1], 4);}function S(t, e) {return f(t, A(e, 4));}function E(t, e) {var i = e[0],n = void 0 === i ? 1 : i,r = e[1],s = void 0 === r ? 1 : r,o = e[2];return f(t, [n, 0, 0, 0, 0, s, 0, 0, 0, 0, void 0 === o ? 1 : o, 0, 0, 0, 0, 1], 4);}function C(t, e) {return b(A(e, 3), u(t, 3));}function k(t, e) {var i = e[0],n = void 0 === i ? 0 : i,r = e[1],s = void 0 === r ? 0 : r,o = e[2];return f(t, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, n, s, void 0 === o ? 0 : o, 1], 4);}function T(t, e) {return f(t, e, 4);}function A(t, e) {var i = Math.cos(t),n = Math.sin(t),r = M(e);return r[0] = i, r[1] = n, r[e] = -n, r[e + 1] = i, r;}function M(t) {for (var e = t * t, i = [], n = 0; n < e; ++n) i[n] = n % (t + 1) ? 0 : 1;return i;}function _(t, e) {for (var i = M(e), n = Math.min(t.length, e - 1), r = 0; r < n; ++r) i[(e + 1) * r] = t[r];return i;}function P(t, e) {for (var i = M(e), n = Math.min(t.length, e - 1), r = 0; r < n; ++r) i[e * (e - 1) + r] = t[r];return i;}function D(t, e, i, n, r, s, o, a) {var c = t[0],h = t[1],u = e[0],p = e[1],g = i[0],m = i[1],v = n[0],y = n[1],b = r[0],w = r[1],x = s[0],S = s[1],E = o[0],C = o[1],k = a[0],T = a[1],A = l([c, 0, u, 0, g, 0, v, 0, h, 0, p, 0, m, 0, y, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, c, 0, u, 0, g, 0, v, 0, h, 0, p, 0, m, 0, y, 0, 1, 0, 1, 0, 1, 0, 1, -b * c, -w * c, -x * u, -S * u, -E * g, -C * g, -k * v, -T * v, -b * h, -w * h, -x * p, -S * p, -E * m, -C * m, -k * y, -T * y], 8);if (!A.length) return [];var M = f(A, [b, w, x, S, E, C, k, T], 8);return M[8] = 1, d(function (t, e) {void 0 === e && (e = Math.sqrt(t.length));for (var i = [], n = 0; n < e; ++n) for (var r = 0; r < e; ++r) i[r * e + n] = t[e * n + r];return i;}(M), 3, 4);}}, 4341: (t, e, i) => {"use strict";function n(t, e) {const i = [];for (let n = t.length - 1; n >= 0; --n) -1 !== e.indexOf(t[n]) && i.push(t[n]);return i;}function r(t, e) {const i = [];for (let n = t.length - 1; n >= 0; --n) {const r = t[n];-1 === e.indexOf(r) && i.push(r);}return i;}function s(t) {const e = [];for (let i = 0, n = t.length; i < n; i++) {const n = t[i];-1 === e.indexOf(n) && e.push(n);}return e;}function o(t, e) {for (let i = 0, n = e.length; i < n; ++i) a(t, e[i]);}function a(t, e) {t.indexOf(e) < 0 && t.push(e);}function l(t, e, i) {const n = [];for (let r = e; r <= i; ++r) n.push(t[r]);return n;}function c(t, e) {const i = [];for (let n = 0; n < e; ++n) i.push(t[n]);return i;}function h(t) {return c(t, t.length);}function u(t, e, i) {if (t || (t = null), e || (e = null), t === e) return !0;if (!!t != !!e) return !1;const n = t.length;if (n !== e.length) return !1;let r = 0;for (; r < n && i(t[r], e[r]);) ++r;return r === n;}function d(t) {return t && 0 === t.length ? null : t;}function p(t, e) {for (let i = 0, n = t.length; i < n; ++i) if (e(t[i])) return i;return -1;}function f(t, e) {if (0 === e) return t.slice();const i = t.slice(e);return Array.prototype.push.apply(i, t.slice(0, e)), i;}function g() {return m([]);}function m(t) {const e = t;return e.withId = y, e;}function v(t, e) {for (let i = 0, n = t.length; i < n; i++) {const n = t[i];if (n.id === e) return n;}}function y(t) {return v(this, t);}function b() {return w([]);}function w(t) {const e = t;return e.withName = k, e;}function x(t, e) {const i = S(t, e);if (i >= 0) return t[i];}function S(t, e) {for (let i = 0, n = t.length; i < n; i++) if (t[i].name === e) return i;return -1;}function E(t, e) {for (let i = t.length - 1; i >= 0; i--) {const n = t[i] - e;if (0 === n) return !1;if (!(n > 0)) return t.splice(i + 1, 0, e), !0;}return t.unshift(e), !0;}function C(t, e) {const i = t.indexOf(e);return !(i < 0 || (t.splice(i, 1), 0));}function k(t) {return x(this, t);}function T(t) {if (t) for (; t.length > 0;) t.pop();}function A(t) {return !t || 0 === t.length;}function M(t, e, i) {const n = t[e];t[e] = t[i], t[i] = n;}function _(t, e, i) {return t.some((t) => i(t, e));}function P(t) {let e = t;for (; null != e;) {if (Array.isArray(e)) return !0;e = Object.getPrototypeOf(e);}return !1;}function D(t, e) {const i = t.length;if (i >= 2) for (let n = 1; n < i; n++) if (e(t[n - 1], t[n]) > 0) return !1;return !0;}function O(t, e) {return D(t, e ? (t, e) => e - t : (t, e) => t - e);}function I(t) {return Array.isArray(t) ? t : [t];}i.r(e), i.d(e, { clear: () => T, copy: () => h, createWithId: () => g, createWithName: () => b, diff: () => r, distinct: () => s, emptyToNull: () => d, ensureArray: () => I, extendWithId: () => m, extendWithName: () => w, findItemWithName: () => x, findWithId: () => v, indexOf: () => p, indexWithName: () => S, insertSorted: () => E, intersect: () => n, isArrayOrInheritedArray: () => P, isInArray: () => _, isSorted: () => D, isSortedNumeric: () => O, isUndefinedOrEmpty: () => A, range: () => l, removeFirst: () => C, rotate: () => f, sequenceEqual: () => u, swap: () => M, take: () => c, union: () => o, unionSingle: () => a });}, 4493: (t, e, i) => {"use strict";const n = i(3908);t.exports = (t, e) => new n(t, e).patch;}, 4495: (t, e, i) => {"use strict";i.d(e, { A: () => n });const n = (t, e) => {if (t.startsWith("RS") || t.startsWith("PS")) {const { modulusLength: i } = e.algorithm;if ("number" != typeof i || i < 2048) throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`);}};}, 4510: (t, e, i) => {"use strict";function n() {for (var t = this._groups, e = -1, i = t.length; ++e < i;) for (var n, r = t[e], s = r.length - 1, o = r[s]; --s >= 0;) (n = r[s]) && (o && 4 ^ n.compareDocumentPosition(o) && o.parentNode.insertBefore(n, o), o = n);return this;}i.d(e, { A: () => n });}, 4528: (t, e, i) => {"use strict";i.d(e, { Eo: () => et, gN: () => x, jO: () => tt, pi: () => Q });var n = i(1371),r = i(6585),s = i(3748);const o = "function" == typeof String.prototype.normalize ? (t) => t.normalize("NFKD") : (t) => t;class a {constructor(t, e, i = 0, n = t.length, r, s) {this.test = s, this.value = { from: 0, to: 0 }, this.done = !1, this.matches = [], this.buffer = "", this.bufferPos = 0, this.iter = t.iterRange(i, n), this.bufferStart = i, this.normalize = r ? (t) => r(o(t)) : o, this.query = this.normalize(e);}peek() {if (this.bufferPos == this.buffer.length) {if (this.bufferStart += this.buffer.length, this.iter.next(), this.iter.done) return -1;this.bufferPos = 0, this.buffer = this.iter.value;}return (0, r.vS)(this.buffer, this.bufferPos);}next() {for (; this.matches.length;) this.matches.pop();return this.nextOverlapping();}nextOverlapping() {for (;;) {let t = this.peek();if (t < 0) return this.done = !0, this;let e = (0, r.MK)(t),i = this.bufferStart + this.bufferPos;this.bufferPos += (0, r.Fh)(t);let n = this.normalize(e);if (n.length) for (let t = 0, r = i;; t++) {let s = n.charCodeAt(t),o = this.match(s, r, this.bufferPos + this.bufferStart);if (t == n.length - 1) {if (o) return this.value = o, this;break;}r == i && t < e.length && e.charCodeAt(t) == s && r++;}}}match(t, e, i) {let n = null;for (let e = 0; e < this.matches.length; e += 2) {let r = this.matches[e],s = !1;this.query.charCodeAt(r) == t && (r == this.query.length - 1 ? n = { from: this.matches[e + 1], to: i } : (this.matches[e]++, s = !0)), s || (this.matches.splice(e, 2), e -= 2);}return this.query.charCodeAt(0) == t && (1 == this.query.length ? n = { from: e, to: i } : this.matches.push(1, e)), n && this.test && !this.test(n.from, n.to, this.buffer, this.bufferStart) && (n = null), n;}}"undefined" != typeof Symbol && (a.prototype[Symbol.iterator] = function () {return this;});const l = { from: -1, to: -1, match: /.*/.exec("") },c = "gm" + (null == /x/.unicode ? "" : "u");class h {constructor(t, e, i, n = 0, r = t.length) {if (this.text = t, this.to = r, this.curLine = "", this.done = !1, this.value = l, /\\[sWDnr]|\n|\r|\[\^/.test(e)) return new p(t, e, i, n, r);this.re = new RegExp(e, c + ((null == i ? void 0 : i.ignoreCase) ? "i" : "")), this.test = null == i ? void 0 : i.test, this.iter = t.iter();let s = t.lineAt(n);this.curLineStart = s.from, this.matchPos = f(t, n), this.getLine(this.curLineStart);}getLine(t) {this.iter.next(t), this.iter.lineBreak ? this.curLine = "" : (this.curLine = this.iter.value, this.curLineStart + this.curLine.length > this.to && (this.curLine = this.curLine.slice(0, this.to - this.curLineStart)), this.iter.next());}nextLine() {this.curLineStart = this.curLineStart + this.curLine.length + 1, this.curLineStart > this.to ? this.curLine = "" : this.getLine(0);}next() {for (let t = this.matchPos - this.curLineStart;;) {this.re.lastIndex = t;let e = this.matchPos <= this.to && this.re.exec(this.curLine);if (e) {let i = this.curLineStart + e.index,n = i + e[0].length;if (this.matchPos = f(this.text, n + (i == n ? 1 : 0)), i == this.curLineStart + this.curLine.length && this.nextLine(), (i < n || i > this.value.to) && (!this.test || this.test(i, n, e))) return this.value = { from: i, to: n, match: e }, this;t = this.matchPos - this.curLineStart;} else {if (!(this.curLineStart + this.curLine.length < this.to)) return this.done = !0, this;this.nextLine(), t = 0;}}}}const u = new WeakMap();class d {constructor(t, e) {this.from = t, this.text = e;}get to() {return this.from + this.text.length;}static get(t, e, i) {let n = u.get(t);if (!n || n.from >= i || n.to <= e) {let n = new d(e, t.sliceString(e, i));return u.set(t, n), n;}if (n.from == e && n.to == i) return n;let { text: r, from: s } = n;return s > e && (r = t.sliceString(e, s) + r, s = e), n.to < i && (r += t.sliceString(n.to, i)), u.set(t, new d(s, r)), new d(e, r.slice(e - s, i - s));}}class p {constructor(t, e, i, n, r) {this.text = t, this.to = r, this.done = !1, this.value = l, this.matchPos = f(t, n), this.re = new RegExp(e, c + ((null == i ? void 0 : i.ignoreCase) ? "i" : "")), this.test = null == i ? void 0 : i.test, this.flat = d.get(t, n, this.chunkEnd(n + 5e3));}chunkEnd(t) {return t >= this.to ? this.to : this.text.lineAt(t).to;}next() {for (;;) {let t = this.re.lastIndex = this.matchPos - this.flat.from,e = this.re.exec(this.flat.text);if (e && !e[0] && e.index == t && (this.re.lastIndex = t + 1, e = this.re.exec(this.flat.text)), e) {let t = this.flat.from + e.index,i = t + e[0].length;if ((this.flat.to >= this.to || e.index + e[0].length <= this.flat.text.length - 10) && (!this.test || this.test(t, i, e))) return this.value = { from: t, to: i, match: e }, this.matchPos = f(this.text, i + (t == i ? 1 : 0)), this;}if (this.flat.to == this.to) return this.done = !0, this;this.flat = d.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + 2 * this.flat.text.length));}}}function f(t, e) {if (e >= t.length) return e;let i,n = t.lineAt(e);for (; e < n.to && (i = n.text.charCodeAt(e - n.from)) >= 56320 && i < 57344;) e++;return e;}function g(t) {let e = String(t.state.doc.lineAt(t.state.selection.main.head).number),i = (0, s.A)("input", { class: "cm-textfield", name: "line", value: e });function o() {let e = /^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if (!e) return;let { state: s } = t,o = s.doc.lineAt(s.selection.main.head),[, a, l, c, h] = e,u = c ? +c.slice(1) : 0,d = l ? +l : o.number;if (l && h) {let t = d / 100;a && (t = t * ("-" == a ? -1 : 1) + o.number / s.doc.lines), d = Math.round(s.doc.lines * t);} else l && a && (d = d * ("-" == a ? -1 : 1) + o.number);let p = s.doc.line(Math.max(1, Math.min(s.doc.lines, d))),f = r.OF.cursor(p.from + Math.max(0, Math.min(u, p.length)));t.dispatch({ effects: [m.of(!1), n.Lz.scrollIntoView(f.from, { y: "center" })], selection: f }), t.focus();}return { dom: (0, s.A)("form", { class: "cm-gotoLine", onkeydown: (e) => {27 == e.keyCode ? (e.preventDefault(), t.dispatch({ effects: m.of(!1) }), t.focus()) : 13 == e.keyCode && (e.preventDefault(), o());}, onsubmit: (t) => {t.preventDefault(), o();} }, (0, s.A)("label", t.state.phrase("Go to line"), ": ", i), " ", (0, s.A)("button", { class: "cm-button", type: "submit" }, t.state.phrase("go")), (0, s.A)("button", { name: "close", onclick: () => {t.dispatch({ effects: m.of(!1) }), t.focus();}, "aria-label": t.state.phrase("close"), type: "button" }, [""])) };}"undefined" != typeof Symbol && (h.prototype[Symbol.iterator] = p.prototype[Symbol.iterator] = function () {return this;});const m = r.Pe.define(),v = r.sU.define({ create: () => !0, update(t, e) {for (let i of e.effects) i.is(m) && (t = i.value);return t;}, provide: (t) => n.S7.from(t, (t) => t ? g : null) }),y = n.Lz.baseTheme({ ".cm-panel.cm-gotoLine": { padding: "2px 6px 4px", position: "relative", "& label": { fontSize: "80%" }, "& [name=close]": { position: "absolute", top: "0", bottom: "0", right: "4px", backgroundColor: "inherit", border: "none", font: "inherit", padding: "0" } } }),b = { highlightWordAroundCursor: !1, minSelectionLength: 1, maxMatches: 100, wholeWords: !1 },w = r.sj.define({ combine: (t) => (0, r.QR)(t, b, { highlightWordAroundCursor: (t, e) => t || e, minSelectionLength: Math.min, maxMatches: Math.min }) });function x(t) {let e = [T, k];return t && e.push(w.of(t)), e;}const S = n.NZ.mark({ class: "cm-selectionMatch" }),E = n.NZ.mark({ class: "cm-selectionMatch cm-selectionMatch-main" });function C(t, e, i, n) {return !(0 != i && t(e.sliceDoc(i - 1, i)) == r.Je.Word || n != e.doc.length && t(e.sliceDoc(n, n + 1)) == r.Je.Word);}const k = n.Z9.fromClass(class {constructor(t) {this.decorations = this.getDeco(t);}update(t) {(t.selectionSet || t.docChanged || t.viewportChanged) && (this.decorations = this.getDeco(t.view));}getDeco(t) {let e = t.state.facet(w),{ state: i } = t,s = i.selection;if (s.ranges.length > 1) return n.NZ.none;let o,l = s.main,c = null;if (l.empty) {if (!e.highlightWordAroundCursor) return n.NZ.none;let t = i.wordAt(l.head);if (!t) return n.NZ.none;c = i.charCategorizer(l.head), o = i.sliceDoc(t.from, t.to);} else {let t = l.to - l.from;if (t < e.minSelectionLength || t > 200) return n.NZ.none;if (e.wholeWords) {if (o = i.sliceDoc(l.from, l.to), c = i.charCategorizer(l.head), !C(c, i, l.from, l.to) || !function (t, e, i, n) {return t(e.sliceDoc(i, i + 1)) == r.Je.Word && t(e.sliceDoc(n - 1, n)) == r.Je.Word;}(c, i, l.from, l.to)) return n.NZ.none;} else if (o = i.sliceDoc(l.from, l.to), !o) return n.NZ.none;}let h = [];for (let r of t.visibleRanges) {let t = new a(i.doc, o, r.from, r.to);for (; !t.next().done;) {let { from: r, to: s } = t.value;if ((!c || C(c, i, r, s)) && (l.empty && r <= l.from && s >= l.to ? h.push(E.range(r, s)) : (r >= l.to || s <= l.from) && h.push(S.range(r, s)), h.length > e.maxMatches)) return n.NZ.none;}}return n.NZ.set(h);}}, { decorations: (t) => t.decorations }),T = n.Lz.baseTheme({ ".cm-selectionMatch": { backgroundColor: "#99ff7780" }, ".cm-searchMatch .cm-selectionMatch": { backgroundColor: "transparent" } }),A = r.sj.define({ combine: (t) => (0, r.QR)(t, { top: !1, caseSensitive: !1, literal: !1, regexp: !1, wholeWord: !1, createPanel: (t) => new it(t), scrollToMatch: (t) => n.Lz.scrollIntoView(t) }) });class M {constructor(t) {this.search = t.search, this.caseSensitive = !!t.caseSensitive, this.literal = !!t.literal, this.regexp = !!t.regexp, this.replace = t.replace || "", this.valid = !!this.search && (!this.regexp || function (t) {try {return new RegExp(t, c), !0;} catch (t) {return !1;}}(this.search)), this.unquoted = this.unquote(this.search), this.wholeWord = !!t.wholeWord;}unquote(t) {return this.literal ? t : t.replace(/\\([nrt\\])/g, (t, e) => "n" == e ? "\n" : "r" == e ? "\r" : "t" == e ? "\t" : "\\");}eq(t) {return this.search == t.search && this.replace == t.replace && this.caseSensitive == t.caseSensitive && this.regexp == t.regexp && this.wholeWord == t.wholeWord;}create() {return this.regexp ? new R(this) : new D(this);}getCursor(t, e = 0, i) {let n = t.doc ? t : r.$t.create({ doc: t });return null == i && (i = n.doc.length), this.regexp ? O(this, n, e, i) : P(this, n, e, i);}}class _ {constructor(t) {this.spec = t;}}function P(t, e, i, n) {return new a(e.doc, t.unquoted, i, n, t.caseSensitive ? void 0 : (t) => t.toLowerCase(), t.wholeWord ? (s = e.doc, o = e.charCategorizer(e.selection.main.head), (t, e, i, n) => ((n > t || n + i.length < e) && (n = Math.max(0, t - 2), i = s.sliceString(n, Math.min(s.length, e + 2))), !(o(I(i, t - n)) == r.Je.Word && o(F(i, t - n)) == r.Je.Word || o(F(i, e - n)) == r.Je.Word && o(I(i, e - n)) == r.Je.Word))) : void 0);var s, o;}class D extends _ {constructor(t) {super(t);}nextMatch(t, e, i) {let n = P(this.spec, t, i, t.doc.length).nextOverlapping();if (n.done) {let i = Math.min(t.doc.length, e + this.spec.unquoted.length);n = P(this.spec, t, 0, i).nextOverlapping();}return n.done || n.value.from == e && n.value.to == i ? null : n.value;}prevMatchInRange(t, e, i) {for (let n = i;;) {let i = Math.max(e, n - 1e4 - this.spec.unquoted.length),r = P(this.spec, t, i, n),s = null;for (; !r.nextOverlapping().done;) s = r.value;if (s) return s;if (i == e) return null;n -= 1e4;}}prevMatch(t, e, i) {let n = this.prevMatchInRange(t, 0, e);return n || (n = this.prevMatchInRange(t, Math.max(0, i - this.spec.unquoted.length), t.doc.length)), !n || n.from == e && n.to == i ? null : n;}getReplacement(t) {return this.spec.unquote(this.spec.replace);}matchAll(t, e) {let i = P(this.spec, t, 0, t.doc.length),n = [];for (; !i.next().done;) {if (n.length >= e) return null;n.push(i.value);}return n;}highlight(t, e, i, n) {let r = P(this.spec, t, Math.max(0, e - this.spec.unquoted.length), Math.min(i + this.spec.unquoted.length, t.doc.length));for (; !r.next().done;) n(r.value.from, r.value.to);}}function O(t, e, i, n) {return new h(e.doc, t.search, { ignoreCase: !t.caseSensitive, test: t.wholeWord ? (s = e.charCategorizer(e.selection.main.head), (t, e, i) => !i[0].length || (s(I(i.input, i.index)) != r.Je.Word || s(F(i.input, i.index)) != r.Je.Word) && (s(F(i.input, i.index + i[0].length)) != r.Je.Word || s(I(i.input, i.index + i[0].length)) != r.Je.Word)) : void 0 }, i, n);var s;}function I(t, e) {return t.slice((0, r.zK)(t, e, !1), e);}function F(t, e) {return t.slice(e, (0, r.zK)(t, e));}class R extends _ {nextMatch(t, e, i) {let n = O(this.spec, t, i, t.doc.length).next();return n.done && (n = O(this.spec, t, 0, e).next()), n.done ? null : n.value;}prevMatchInRange(t, e, i) {for (let n = 1;; n++) {let r = Math.max(e, i - 1e4 * n),s = O(this.spec, t, r, i),o = null;for (; !s.next().done;) o = s.value;if (o && (r == e || o.from > r + 10)) return o;if (r == e) return null;}}prevMatch(t, e, i) {return this.prevMatchInRange(t, 0, e) || this.prevMatchInRange(t, i, t.doc.length);}getReplacement(t) {return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g, (e, i) => {if ("&" == i) return t.match[0];if ("$" == i) return "$";for (let e = i.length; e > 0; e--) {let n = +i.slice(0, e);if (n > 0 && n < t.match.length) return t.match[n] + i.slice(e);}return e;});}matchAll(t, e) {let i = O(this.spec, t, 0, t.doc.length),n = [];for (; !i.next().done;) {if (n.length >= e) return null;n.push(i.value);}return n;}highlight(t, e, i, n) {let r = O(this.spec, t, Math.max(0, e - 250), Math.min(i + 250, t.doc.length));for (; !r.next().done;) n(r.value.from, r.value.to);}}const L = r.Pe.define(),N = r.Pe.define(),V = r.sU.define({ create: (t) => new B(Y(t).create(), null), update(t, e) {for (let i of e.effects) i.is(L) ? t = new B(i.value.create(), t.panel) : i.is(N) && (t = new B(t.query, i.value ? Z : null));return t;}, provide: (t) => n.S7.from(t, (t) => t.panel) });class B {constructor(t, e) {this.query = t, this.panel = e;}}const j = n.NZ.mark({ class: "cm-searchMatch" }),z = n.NZ.mark({ class: "cm-searchMatch cm-searchMatch-selected" }),U = n.Z9.fromClass(class {constructor(t) {this.view = t, this.decorations = this.highlight(t.state.field(V));}update(t) {let e = t.state.field(V);(e != t.startState.field(V) || t.docChanged || t.selectionSet || t.viewportChanged) && (this.decorations = this.highlight(e));}highlight({ query: t, panel: e }) {if (!e || !t.spec.valid) return n.NZ.none;let { view: i } = this,s = new r.vB();for (let e = 0, n = i.visibleRanges, r = n.length; e < r; e++) {let { from: o, to: a } = n[e];for (; e < r - 1 && a > n[e + 1].from - 500;) a = n[++e].to;t.highlight(i.state, o, a, (t, e) => {let n = i.state.selection.ranges.some((i) => i.from == t && i.to == e);s.add(t, e, n ? z : j);});}return s.finish();}}, { decorations: (t) => t.decorations });function H(t) {return (e) => {let i = e.state.field(V, !1);return i && i.query.spec.valid ? t(e, i) : Q(e);};}const q = H((t, { query: e }) => {let { to: i } = t.state.selection.main,n = e.nextMatch(t.state, i, i);if (!n) return !1;let s = r.OF.single(n.from, n.to),o = t.state.facet(A);return t.dispatch({ selection: s, effects: [ot(t, n), o.scrollToMatch(s.main, t)], userEvent: "select.search" }), J(t), !0;}),$ = H((t, { query: e }) => {let { state: i } = t,{ from: n } = i.selection.main,s = e.prevMatch(i, n, n);if (!s) return !1;let o = r.OF.single(s.from, s.to),a = t.state.facet(A);return t.dispatch({ selection: o, effects: [ot(t, s), a.scrollToMatch(o.main, t)], userEvent: "select.search" }), J(t), !0;}),G = H((t, { query: e }) => {let i = e.matchAll(t.state, 1e3);return !(!i || !i.length || (t.dispatch({ selection: r.OF.create(i.map((t) => r.OF.range(t.from, t.to))), userEvent: "select.search.matches" }), 0));}),W = H((t, { query: e }) => {let { state: i } = t,{ from: s, to: o } = i.selection.main;if (i.readOnly) return !1;let a = e.nextMatch(i, s, s);if (!a) return !1;let l,c,h = a,u = [],d = [];h.from == s && h.to == o && (c = i.toText(e.getReplacement(h)), u.push({ from: h.from, to: h.to, insert: c }), h = e.nextMatch(i, h.from, h.to), d.push(n.Lz.announce.of(i.phrase("replaced match on line $", i.doc.lineAt(s).number) + ".")));let p = t.state.changes(u);return h && (l = r.OF.single(h.from, h.to).map(p), d.push(ot(t, h)), d.push(i.facet(A).scrollToMatch(l.main, t))), t.dispatch({ changes: p, selection: l, effects: d, userEvent: "input.replace" }), !0;}),K = H((t, { query: e }) => {if (t.state.readOnly) return !1;let i = e.matchAll(t.state, 1e9).map((t) => {let { from: i, to: n } = t;return { from: i, to: n, insert: e.getReplacement(t) };});if (!i.length) return !1;let r = t.state.phrase("replaced $ matches", i.length) + ".";return t.dispatch({ changes: i, effects: n.Lz.announce.of(r), userEvent: "input.replace.all" }), !0;});function Z(t) {return t.state.facet(A).createPanel(t);}function Y(t, e) {var i, n, r, s, o;let a = t.selection.main,l = a.empty || a.to > a.from + 100 ? "" : t.sliceDoc(a.from, a.to);if (e && !l) return e;let c = t.facet(A);return new M({ search: (null !== (i = null == e ? void 0 : e.literal) && void 0 !== i ? i : c.literal) ? l : l.replace(/\n/g, "\\n"), caseSensitive: null !== (n = null == e ? void 0 : e.caseSensitive) && void 0 !== n ? n : c.caseSensitive, literal: null !== (r = null == e ? void 0 : e.literal) && void 0 !== r ? r : c.literal, regexp: null !== (s = null == e ? void 0 : e.regexp) && void 0 !== s ? s : c.regexp, wholeWord: null !== (o = null == e ? void 0 : e.wholeWord) && void 0 !== o ? o : c.wholeWord });}function X(t) {let e = (0, n.ld)(t, Z);return e && e.dom.querySelector("[main-field]");}function J(t) {let e = X(t);e && e == t.root.activeElement && e.select();}const Q = (t) => {let e = t.state.field(V, !1);if (e && e.panel) {let i = X(t);if (i && i != t.root.activeElement) {let n = Y(t.state, e.query.spec);n.valid && t.dispatch({ effects: L.of(n) }), i.focus(), i.select();}} else t.dispatch({ effects: [N.of(!0), e ? L.of(Y(t.state, e.query.spec)) : r.Pe.appendConfig.of(lt)] });return !0;},tt = (t) => {let e = t.state.field(V, !1);if (!e || !e.panel) return !1;let i = (0, n.ld)(t, Z);return i && i.dom.contains(t.root.activeElement) && t.focus(), t.dispatch({ effects: N.of(!1) }), !0;},et = [{ key: "Mod-f", run: Q, scope: "editor search-panel" }, { key: "F3", run: q, shift: $, scope: "editor search-panel", preventDefault: !0 }, { key: "Mod-g", run: q, shift: $, scope: "editor search-panel", preventDefault: !0 }, { key: "Escape", run: tt, scope: "editor search-panel" }, { key: "Mod-Shift-l", run: ({ state: t, dispatch: e }) => {let i = t.selection;if (i.ranges.length > 1 || i.main.empty) return !1;let { from: n, to: s } = i.main,o = [],l = 0;for (let e = new a(t.doc, t.sliceDoc(n, s)); !e.next().done;) {if (o.length > 1e3) return !1;e.value.from == n && (l = o.length), o.push(r.OF.range(e.value.from, e.value.to));}return e(t.update({ selection: r.OF.create(o, l), userEvent: "select.search.matches" })), !0;} }, { key: "Mod-Alt-g", run: (t) => {let e = (0, n.ld)(t, g);if (!e) {let i = [m.of(!0)];null == t.state.field(v, !1) && i.push(r.Pe.appendConfig.of([v, y])), t.dispatch({ effects: i }), e = (0, n.ld)(t, g);}return e && e.dom.querySelector("input").select(), !0;} }, { key: "Mod-d", run: ({ state: t, dispatch: e }) => {let { ranges: i } = t.selection;if (i.some((t) => t.from === t.to)) return (({ state: t, dispatch: e }) => {let { selection: i } = t,n = r.OF.create(i.ranges.map((e) => t.wordAt(e.head) || r.OF.cursor(e.head)), i.mainIndex);return !n.eq(i) && (e(t.update({ selection: n })), !0);})({ state: t, dispatch: e });let s = t.sliceDoc(i[0].from, i[0].to);if (t.selection.ranges.some((e) => t.sliceDoc(e.from, e.to) != s)) return !1;let o = function (t, e) {let { main: i, ranges: n } = t.selection,r = t.wordAt(i.head),s = r && r.from == i.from && r.to == i.to;for (let i = !1, r = new a(t.doc, e, n[n.length - 1].to);;) {if (r.next(), !r.done) {if (i && n.some((t) => t.from == r.value.from)) continue;if (s) {let e = t.wordAt(r.value.from);if (!e || e.from != r.value.from || e.to != r.value.to) continue;}return r.value;}if (i) return null;r = new a(t.doc, e, 0, Math.max(0, n[n.length - 1].from - 1)), i = !0;}}(t, s);return !!o && (e(t.update({ selection: t.selection.addRange(r.OF.range(o.from, o.to), !1), effects: n.Lz.scrollIntoView(o.to) })), !0);}, preventDefault: !0 }];class it {constructor(t) {this.view = t;let e = this.query = t.state.field(V).query.spec;function i(t, e, i) {return (0, s.A)("button", { class: "cm-button", name: t, onclick: e, type: "button" }, i);}this.commit = this.commit.bind(this), this.searchField = (0, s.A)("input", { value: e.search, placeholder: nt(t, "Find"), "aria-label": nt(t, "Find"), class: "cm-textfield", name: "search", form: "", "main-field": "true", onchange: this.commit, onkeyup: this.commit }), this.replaceField = (0, s.A)("input", { value: e.replace, placeholder: nt(t, "Replace"), "aria-label": nt(t, "Replace"), class: "cm-textfield", name: "replace", form: "", onchange: this.commit, onkeyup: this.commit }), this.caseField = (0, s.A)("input", { type: "checkbox", name: "case", form: "", checked: e.caseSensitive, onchange: this.commit }), this.reField = (0, s.A)("input", { type: "checkbox", name: "re", form: "", checked: e.regexp, onchange: this.commit }), this.wordField = (0, s.A)("input", { type: "checkbox", name: "word", form: "", checked: e.wholeWord, onchange: this.commit }), this.dom = (0, s.A)("div", { onkeydown: (t) => this.keydown(t), class: "cm-search" }, [this.searchField, i("next", () => q(t), [nt(t, "next")]), i("prev", () => $(t), [nt(t, "previous")]), i("select", () => G(t), [nt(t, "all")]), (0, s.A)("label", null, [this.caseField, nt(t, "match case")]), (0, s.A)("label", null, [this.reField, nt(t, "regexp")]), (0, s.A)("label", null, [this.wordField, nt(t, "by word")]), ...(t.state.readOnly ? [] : [(0, s.A)("br"), this.replaceField, i("replace", () => W(t), [nt(t, "replace")]), i("replaceAll", () => K(t), [nt(t, "replace all")])]), (0, s.A)("button", { name: "close", onclick: () => tt(t), "aria-label": nt(t, "close"), type: "button" }, [""])]);}commit() {let t = new M({ search: this.searchField.value, caseSensitive: this.caseField.checked, regexp: this.reField.checked, wholeWord: this.wordField.checked, replace: this.replaceField.value });t.eq(this.query) || (this.query = t, this.view.dispatch({ effects: L.of(t) }));}keydown(t) {(0, n.TS)(this.view, t, "search-panel") ? t.preventDefault() : 13 == t.keyCode && t.target == this.searchField ? (t.preventDefault(), (t.shiftKey ? $ : q)(this.view)) : 13 == t.keyCode && t.target == this.replaceField && (t.preventDefault(), W(this.view));}update(t) {for (let e of t.transactions) for (let t of e.effects) t.is(L) && !t.value.eq(this.query) && this.setQuery(t.value);}setQuery(t) {this.query = t, this.searchField.value = t.search, this.replaceField.value = t.replace, this.caseField.checked = t.caseSensitive, this.reField.checked = t.regexp, this.wordField.checked = t.wholeWord;}mount() {this.searchField.select();}get pos() {return 80;}get top() {return this.view.state.facet(A).top;}}function nt(t, e) {return t.state.phrase(e);}const rt = 30,st = /[\s\.,:;?!]/;function ot(t, { from: e, to: i }) {let r = t.state.doc.lineAt(e),s = t.state.doc.lineAt(i).to,o = Math.max(r.from, e - rt),a = Math.min(s, i + rt),l = t.state.sliceDoc(o, a);if (o != r.from) for (let t = 0; t < rt; t++) if (!st.test(l[t + 1]) && st.test(l[t])) {l = l.slice(t);break;}if (a != s) for (let t = l.length - 1; t > l.length - rt; t--) if (!st.test(l[t - 1]) && st.test(l[t])) {l = l.slice(0, t);break;}return n.Lz.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${r.number}.`);}const at = n.Lz.baseTheme({ ".cm-panel.cm-search": { padding: "2px 6px 4px", position: "relative", "& [name=close]": { position: "absolute", top: "0", right: "4px", backgroundColor: "inherit", border: "none", font: "inherit", padding: 0, margin: 0 }, "& input, & button, & label": { margin: ".2em .6em .2em 0" }, "& input[type=checkbox]": { marginRight: ".2em" }, "& label": { fontSize: "80%", whiteSpace: "pre" } }, "&light .cm-searchMatch": { backgroundColor: "#ffff0054" }, "&dark .cm-searchMatch": { backgroundColor: "#00ffff8a" }, "&light .cm-searchMatch-selected": { backgroundColor: "#ff6a0054" }, "&dark .cm-searchMatch-selected": { backgroundColor: "#ff00ff8a" } }),lt = [V, r.Nb.low(U), at];}, 4537: (t, e, i) => {"use strict";const n = i(3720),r = i(8712),s = i(8697),o = i(2598),a = (t, e = {}) => {let i = [];if (Array.isArray(t)) for (const n of t) {const t = a.create(n, e);Array.isArray(t) ? i.push(...t) : i.push(t);} else i = [].concat(a.create(t, e));return e && !0 === e.expand && !0 === e.nodupes && (i = [...new Set(i)]), i;};a.parse = (t, e = {}) => o(t, e), a.stringify = (t, e = {}) => n("string" == typeof t ? a.parse(t, e) : t, e), a.compile = (t, e = {}) => ("string" == typeof t && (t = a.parse(t, e)), r(t, e)), a.expand = (t, e = {}) => {"string" == typeof t && (t = a.parse(t, e));let i = s(t, e);return !0 === e.noempty && (i = i.filter(Boolean)), !0 === e.nodupes && (i = [...new Set(i)]), i;}, a.create = (t, e = {}) => "" === t || t.length < 3 ? [t] : !0 !== e.expand ? a.compile(t, e) : a.expand(t, e), t.exports = a;}, 4543: (t, e, i) => {"use strict";i.d(e, { It: () => l, Np: () => s, oL: () => o }), i(7345);var n = i(1807);function r(t) {const e = new Uint8Array(t);let i = "";for (let t = 0; t < e.byteLength; t++) i += String.fromCharCode(e[t]);return (0, n.WGQ)(i).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+$/, "");}async function s(t, e) {const i = new TextEncoder(),n = i.encode(t),s = await window.crypto.subtle.importKey("raw", i.encode(e), { name: "PBKDF2" }, !1, ["deriveKey"]),o = window.crypto.getRandomValues(new Uint8Array(16)),a = await window.crypto.subtle.deriveKey({ name: "PBKDF2", salt: o, iterations: 1e5, hash: "SHA-256" }, s, { name: "AES-GCM", length: 256 }, !1, ["encrypt"]),l = window.crypto.getRandomValues(new Uint8Array(12)),c = await window.crypto.subtle.encrypt({ name: "AES-GCM", iv: l }, a, n);return `${r(o)}:${r(l)}:${r(c)}`;}async function o(t, e) {const i = crypto.getRandomValues(new Uint8Array(16)),n = crypto.getRandomValues(new Uint8Array(12)),r = await a(e, i),s = t instanceof Uint8Array ? t.buffer : await t.arrayBuffer(),o = await crypto.subtle.encrypt({ name: "AES-GCM", iv: n }, r, s);return new Blob([i, n, new Uint8Array(o)], { type: "application/octet-stream" });}async function a(t, e) {const i = new TextEncoder(),n = await crypto.subtle.importKey("raw", i.encode(t), { name: "PBKDF2" }, !1, ["deriveKey"]);return await crypto.subtle.deriveKey({ name: "PBKDF2", salt: e, iterations: 1e5, hash: "SHA-256" }, n, { name: "AES-GCM", length: 256 }, !0, ["encrypt", "decrypt"]);}async function l(t, e) {const i = await t.arrayBuffer(),n = new Uint8Array(i.slice(0, 16)),r = new Uint8Array(i.slice(16, 28)),s = i.slice(28),o = await a(e, n);return await crypto.subtle.decrypt({ name: "AES-GCM", iv: r }, o, s);}}, 4573: (t, e, i) => {"use strict";i.d(e, { Rf: () => A, Yn: () => U, li: () => j, n: () => I, o6: () => k, uA: () => C, vJ: () => z, xr: () => V });var n = i(7728),r = i(9715),s = function (t, e) {return s = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);}, s(t, e);};function o(t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");function i() {this.constructor = t;}s(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());}var a = function () {return a = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, a.apply(this, arguments);};function l(t, e) {var i = {};for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (i[n] = t[n]);if (null != t && "function" == typeof Object.getOwnPropertySymbols) {var r = 0;for (n = Object.getOwnPropertySymbols(t); r < n.length; r++) e.indexOf(n[r]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[r]) && (i[n[r]] = t[n[r]]);}return i;}function c(t, e, i) {if (i || 2 === arguments.length) for (var n, r = 0, s = e.length; r < s; r++) !n && r in e || (n || (n = Array.prototype.slice.call(e, 0, r)), n[r] = e[r]);return t.concat(n || Array.prototype.slice.call(e));}function h(t) {var e = 0;return t.map(function (t) {return null == t ? "$compat".concat(++e) : "".concat(t);});}function u(t) {var e = [];return t.forEach(function (t) {e = e.concat((0, n.cy)(t) ? u(t) : t);}), e;}function d(t, e) {if (!e) return t;for (var i in e) (0, n.b0)(t[i]) && (t[i] = e[i]);return t;}function p(t, e) {if (t === e) return !1;for (var i in t) if (!(i in e)) return !0;for (var i in e) if (t[i] !== e[i]) return !0;return !1;}function f(t) {var e = t.className,i = l(t, ["className"]);return null != e && (i.class = e), delete i.style, delete i.children, i;}function g(t) {var e = {},i = {};for (var n in t) 0 === n.indexOf("on") ? i[n] = t[n] : e[n] = t[n];return [e, i];}function m(t) {if (!t) return null;var e = t.b;return (0, n.Ll)(e) ? e : m(t.c);}function v(t) {var e = t.parentNode;e && e.removeChild(t);}function y(t) {t.forEach(function (t) {t();});}function b() {return this.constructor(this.props, this.context);}var w = 0,x = function () {function t(t, e, i, n, r, s, o) {void 0 === o && (o = {}), this.t = t, this.d = e, this.k = i, this.i = n, this.c = r, this.ref = s, this.ps = o, this.typ = "prov", this._ps = [], this._cs = {}, this._hyd = null, this._sel = !1;}var e = t.prototype;return e.s = function () {return !0;}, e.u = function (t, e, i, r, s) {var o = this,a = o.d,l = u((0, n.BI)(e).filter(function (t) {return t.$_req;}).map(function (t) {return t.$_subs;})),c = (0, n.I6)(l, function (t) {return t.d === a;});if (o.b && !(0, n.Kg)(i) && !s && !o.s(i.props, r) && !c) return l.reduce(function (t, e) {var i = e.d;return t[0] ? t[0].d === i && t.push(e) : i > a && t.push(e), t;}, []).forEach(function (i) {N(i, i._ps, [i.o], t, e, !0);}), !1;o.o = i, o.ss(r);var h = o.ps;return (0, n.Kg)(i) || (o.ps = i.props, o.ref = i.ref), E(this), o.r(t, e, o.b ? h : {}, r), !0;}, e.md = function () {this.rr();}, e.ss = function () {}, e.ud = function () {this.rr();}, e.rr = function () {var t = this,e = t.ref,i = t.fr;e && e(i ? i.current : t.b);}, t;}();function S() {return Object.__CROACT_CURRENT_INSTNACE__;}function E(t) {return Object.__CROACT_CURRENT_INSTNACE__ = t, w = 0, t;}var C = function () {function t(t, e) {void 0 === t && (t = {}), this.props = t, this.context = e, this.state = {}, this.$_timer = 0, this.$_state = {}, this.$_subs = [], this.$_cs = {};}var e = t.prototype;return e.render = function () {return null;}, e.shouldComponentUpdate = function (t, e) {return this.props !== t || this.state !== e;}, e.setState = function (t, e, i) {var n = this;n.$_timer || (n.$_state = {}), clearTimeout(n.$_timer), n.$_timer = 0, n.$_state = a(a({}, n.$_state), t), i ? n.$_setState(e, i) : n.$_timer = window.setTimeout(function () {n.$_timer = 0, n.$_setState(e, i);});}, e.forceUpdate = function (t) {this.setState({}, t, !0);}, e.componentDidMount = function () {}, e.componentDidUpdate = function (t, e) {}, e.componentWillUnmount = function () {}, e.$_setState = function (t, e) {var i = [],n = this.$_p;N(n.c, [n], [n.o], i, n._cs, a(a({}, this.state), this.$_state), e) && (t && i.push(t), y(i), E(null));}, t;}(),k = function (t) {function e() {return null !== t && t.apply(this, arguments) || this;}return o(e, t), e.prototype.shouldComponentUpdate = function (t, e) {return p(this.props, t) || p(this.state, e);}, e;}(C);function T(t) {var e = function (t) {e.current = t;};return e.current = t, e;}function A(t) {return t._fr = !0, t;}var M = function (t) {function e(e, i, n, r, s, o, a) {void 0 === a && (a = {});var l = t.call(this, e, i, n, r, s, o, d(a, e.defaultProps)) || this;return l.typ = "comp", l._usefs = [], l._uefs = [], l._defs = [], l;}o(e, t);var i = e.prototype;return i.s = function (t, e) {var i = this.b;return !1 !== i.shouldComponentUpdate(d(t, this.t.defaultProps), e || i.state);}, i.r = function (t, e, i) {var n,r,s = this,o = s.t;s.ps = d(s.ps, s.t.defaultProps);var l = s.ps,c = !s.b,h = o.contextType,u = s.b,p = null == h ? void 0 : h.get(s);s._cs = e, c ? (u = function (t, e, i, n) {var r, s;return (null === (r = null == t ? void 0 : t.prototype) || void 0 === r ? void 0 : r.render) ? s = new t(e, i) : ((s = new C(e, i)).constructor = t, t._fr ? (n.fr = T(), s.render = function () {return this.constructor(this.props, n.fr);}) : s.render = b), s.$_p = n, s;}(o, l, p, s), s.b = u) : (u.props = l, u.context = p);var f = u.state;s._usefs = [], s._uefs = [];var g = u.render();0 === (null === (r = null === (n = null == g ? void 0 : g.props) || void 0 === n ? void 0 : n.children) || void 0 === r ? void 0 : r.length) && (g.props.children = s.ps.children);var m = a(a({}, e), u.$_cs);N(s, s._ps, g ? [g] : [], t, m), c ? s._uefs.push(function () {null == h || h.register(s), u.componentDidMount();}) : s._uefs.push(function () {u.componentDidUpdate(i, f);}), t.push(function () {s._usefs.forEach(function (t) {t();}), c ? s.md() : s.ud(), s._defs = s._uefs.map(function (t) {return t();});});}, i.ss = function (t) {var e = this.b;e && t && (e.state = t);}, i.un = function () {var t,e = this;e._ps.forEach(function (t) {t.un();}), null === (t = e.t.contextType) || void 0 === t || t.unregister(e), clearTimeout(e.b.$_timer), e._defs.forEach(function (t) {t && t();}), e.b.componentWillUnmount();}, e;}(x);function _(t, e) {var i = (0, n.xD)(t),s = (0, n.xD)(e),o = (0, r.U)(i, s, function (t) {return t;}),a = {},l = {},c = {};return o.added.forEach(function (t) {var i = s[t];a[i] = e[i];}), o.removed.forEach(function (e) {var n = i[e];l[n] = t[n];}), o.maintained.forEach(function (n) {var r = n[0],s = i[r],o = [t[s], e[s]];t[s] !== e[s] && (c[s] = o);}), { added: a, removed: l, changed: c };}var P = function (t) {function e() {var e = null !== t && t.apply(this, arguments) || this;return e.typ = "elem", e._es = {}, e._svg = !1, e;}o(e, t);var i = e.prototype;return i.e = function (t, e) {var i = this,r = i._es,s = i.b,o = function (t) {return t.replace(/^on/g, "").toLowerCase();}(t);e ? ((0, n.Nn)(s, o, r[t]), delete r[t]) : (r[t] = function (e) {var n, r;null === (r = (n = i.ps)[t]) || void 0 === r || r.call(n, e);}, (0, n.W2)(s, o, r[t]));}, i.s = function (t) {return p(this.ps, t);}, i.r = function (t, e, i) {var r,s = this,o = !s.b,a = s.ps;if (o) {var l,c = m(s.c);l = !(!s._svg && "svg" !== s.t) || c && c.ownerSVGElement, s._svg = l;var h = null === (r = s._hyd) || void 0 === r ? void 0 : r.splice(0, 1)[0],u = s.t;if (h) s._hyd = [].slice.call(h.children || []);else {var d = (0, n.YE)(c);h = l ? d.createElementNS("http://www.w3.org/2000/svg", u) : d.createElement(u);}s.b = h;}N(s, s._ps, a.children, t, e);var p = s.b,v = g(i),y = v[0],b = v[1],w = g(a),x = w[0],S = w[1];return function (t, e, i) {var n = _(f(t), f(e)),r = n.added,s = n.removed,o = n.changed;for (var a in r) i.setAttribute(a, r[a]);for (var l in o) i.setAttribute(l, o[l][1]);for (var c in s) i.removeAttribute(c);}(y, x, p), function (t, e, i) {var n = _(t, e),r = n.added,s = n.removed;for (var o in s) i.e(o, !0);for (var a in r) i.e(a);}(b, S, s), function (t, e, i) {var r = i.style,s = _(t, e),o = s.added,a = s.removed,l = s.changed;for (var c in o) {var h = (0, n.aj)(c, "-");r.setProperty(h, o[c]);}for (var c in l) {var u = (0, n.aj)(c, "-");r.setProperty(u, l[c][1]);}for (var c in a) {var d = (0, n.aj)(c, "-");r.removeProperty(d);}}(i.style || {}, a.style || {}, p), t.push(function () {o ? s.md() : s.ud();}), !0;}, i.un = function () {var t = this,e = t._es,i = t.b;for (var r in e) (0, n.Nn)(i, r, e[r]);t._ps.forEach(function (t) {t.un();}), t._es = {}, t._sel || v(i);}, e;}(x);function D(t) {if (!t || (0, n.Ll)(t)) return t;var e = t.$_p._ps;return e.length ? D(e[0].b) : null;}function O(t) {if (t) {if (t.b && (0, n.Ll)(t.b)) return t;var e = t._ps;return e.length ? O(e[0]) : null;}}function I(t, e) {for (var i = [], r = 2; r < arguments.length; r++) i[r - 2] = arguments[r];var s = e || {},o = s.key,c = s.ref,h = l(s, ["key", "ref"]);return { type: t, key: o, ref: c, props: a(a({}, h), { children: (0, n.Ct)(i).filter(function (t) {return null != t && !1 !== t;}) }) };}var F = function (t) {function e(e, i) {void 0 === i && (i = 0);var n = t.call(this, "container", i, "container", 0, null) || this;return n.typ = "container", n.b = e, n;}o(e, t);var i = e.prototype;return i.r = function () {return !0;}, i.un = function () {}, e;}(x),R = function (t) {function e() {var e = null !== t && t.apply(this, arguments) || this;return e.typ = "text", e;}o(e, t);var i = e.prototype;return i.r = function (t) {var e,i = this,r = !i.b;if (r) {var s = m(i.c),o = null === (e = i._hyd) || void 0 === e ? void 0 : e.splice(0, 1)[0];i.b = o || (0, n.YE)(s).createTextNode(i.t.replace("text_", ""));}return t.push(function () {r ? i.md() : i.ud();}), !0;}, i.un = function () {v(this.b);}, e;}(x);function L(t, e, i, r) {var s = r.d + 1;if ((0, n.Kg)(t) || (0, n.Et)(t)) return new R("text_".concat(t), s, e, i, r, null, {});var o = t.type;return new ("string" == typeof o ? P : M)(o, s, e, i, r, t.ref, t.props);}function N(t, e, i, s, o, a, l) {var u = function (t, e, i) {var s = i.map(function (t) {return (0, n.Kg)(t) ? null : t.key;}),o = h(e.map(function (t) {return t.k;})),a = h(s),l = (0, r.U)(o, a, function (t) {return t;});l.removed.forEach(function (t) {e.splice(t, 1)[0].un();}), l.ordered.forEach(function (t) {var i = t[0],n = t[1],r = e.splice(i, 1)[0];e.splice(n, 0, r);var s = D(r.b),o = D(e[n + 1] && e[n + 1].b);s && s.parentNode.insertBefore(s, o);}), l.added.forEach(function (n) {e.splice(n, 0, L(i[n], s[n], n, t));});var u = l.maintained.filter(function (r) {r[0];var o = r[1],a = i[o],l = e[o];return ((0, n.Kg)(a) ? "text_".concat(a) : a.type) !== l.t ? (l.un(), e.splice(o, 1, L(a, s[o], o, t)), !0) : (l.i = o, !1);});return c(c([], l.added, !0), u.map(function (t) {return t[0], t[1];}), !0);}(t, e, i),d = t._hyd,p = e.filter(function (t, e) {return t._hyd = d, t.u(s, o, i[e], a, l);});"container" === t.typ && t._sel && e.forEach(function (t) {var e = O(t);e && (e._sel = !0);}), t._hyd = null;var f = m(t);return f && u.reverse().forEach(function (i) {var n = e[i],r = D(n.b);if (r && f !== r && !r.parentNode) {var s = function (t, e) {for (var i = t._ps, n = i.length, r = e.i + 1; r < n; ++r) {var s = D(i[r].b);if (s) return s;}return null;}(t, n);f.insertBefore(r, s);}}), p.length > 0;}function V(t, e, i) {return !i && t && ((i = new F(e.parentElement))._hyd = [e], i._sel = !0), function (t, e, i, n) {void 0 === i && (i = e.__CROACT__), void 0 === n && (n = {});var r = !!i;i || (i = new F(e));var s = [];N(i, i._ps, t ? [t] : [], s, n, void 0, void 0), y(s), E(null), r || (e.__CROACT__ = i);}(t, e, i), i;}function B(t) {var e = S(),i = e._hs || (e._hs = []),n = w,r = i[n];if (w = n + 1, r) {if (!p(r.deps, t.deps)) return r.updated = !1, r;i[n] = t;} else i.push(t);return t.value = t.func(), t.updated = !0, t;}function j(t) {return B({ func: function () {return T(t);}, deps: [] }).value;}function z(t, e, i) {var n = S(),r = B({ func: function () {return t;}, deps: e }),s = i ? n._usefs : n._uefs;r.updated ? s.push(function () {return r.effect && r.effect(), r.effect = t(), r.effect;}) : s.push(function () {return r.effect;});}function U(t, e, i) {z(function () {null == t || t(e());}, i, !0);}}, 4618: (t, e, i) => {"use strict";i.d(e, { A: () => n });const n = (t, e) => {if (void 0 !== e && (!Array.isArray(e) || e.some((t) => "string" != typeof t))) throw new TypeError(`"${t}" option must be an array of strings`);if (e) return new Set(e);};}, 4620: (t, e, i) => {"use strict";i.d(e, { A: () => c });var n = i(9064),r = i(3363),s = i(2101),o = i(29),a = { time: null, delay: 0, duration: 250, ease: s.wq };function l(t, e) {for (var i; !(i = t.__transition) || !(i = i[e]);) if (!(t = t.parentNode)) throw new Error(`transition ${e} not found`);return i;}function c(t) {var e, i;t instanceof n.eB ? (e = t._id, t = t._name) : (e = (0, n.Si)(), (i = a).time = (0, o.tB)(), t = null == t ? null : t + "");for (var s = this._groups, c = s.length, h = 0; h < c; ++h) for (var u, d = s[h], p = d.length, f = 0; f < p; ++f) (u = d[f]) && (0, r.Ay)(u, t, e, f, d, i || l(u, e));return new n.eB(s, this._parents, t, e);}}, 4624: (t, e, i) => {"use strict";i.d(e, { WA: () => s, XQ: () => o, v4: () => a });var n = i(1807),r = i(2017);const s = [{ name: "connector", title: "Connector", description: "Customize connect between the select labels and the relative map elements.", hasReset: !0, hasToggle: !0, disabled: !0, type: "group", children: [{ name: "info", type: "slice", children: [{ name: "text", type: "option", optionType: "text", description: "  Drag the label to see the connector, as it is visible only with a custom position." }] }, { name: "line", title: "Line", type: "slice", children: [{ name: "style", title: "Style", type: "option", optionType: "radio", options: { straight: { description: "Straight", icon: "line-straight" }, curved: { description: "Curved", icon: "line-curve" }, step: { description: "Step", icon: "line-step" }, arc: { description: "Arc", icon: "line-arc" } }, value: "straight" }, { name: "curviness", title: "Curviness / Stub", type: "option", optionType: "number", hasSlider: !0, min: 0, max: 100, value: 0 }, { name: "gap", title: "Gap", type: "option", optionType: "number", hasSlider: !0, min: -20, max: 20, value: 1, visibleIf: (t) => ["straight", "step"].includes(t["connector.line.style"]) }, { name: "color", title: "Color", type: "option", optionType: "color", value: "#000000" }, { name: "width", title: "Stroke Width", type: "option", optionType: "number", hasSlider: !0, min: 1, max: 20, value: 1 }] }, { name: "source", title: "Label Endpoint", type: "slice", children: [{ name: "endpoint", title: "Icon", type: "option", optionType: "radio", options: { none: { description: "None", icon: "endpoint-no" }, circle: { description: "Circle", icon: "endpoint-circle" }, rect: { description: "Rectangle", icon: "endpoint-rect" }, arrow: { description: "Arrow", icon: "endpoint-left-arrow" } }, value: "none" }, { name: "anchor", title: "Anchor", type: "option", optionType: "select", options: { auto: { title: "Auto" }, continuous: { title: "Continuous" }, center: { title: "Center" }, top: { title: "Top" }, right: { title: "Right" }, bottom: { title: "Bottom" }, left: { title: "Left" }, "top-left": { title: "Top Left" }, "top-right": { title: "Top Right" }, "bottom-left": { title: "Bottom Left" }, "bottom-right": { title: "Bottom Right" } }, value: "continuous" }] }, { name: "target", title: "Area Endpoint", type: "slice", children: [{ name: "endpoint", title: "Icon", type: "option", optionType: "radio", options: { none: { description: "None", icon: "endpoint-no" }, circle: { description: "Circle", icon: "endpoint-circle" }, rect: { description: "Rectangle", icon: "endpoint-rect" }, arrow: { description: "Arrow", icon: "endpoint-right-arrow" } }, value: "none" }, { name: "anchor", title: "Anchor", type: "option", optionType: "select", options: { auto: { title: "Auto" }, continuous: { title: "Continuous" }, center: { title: "Center" }, top: { title: "Top" }, right: { title: "Right" }, bottom: { title: "Bottom" }, left: { title: "Left" }, "top-left": { title: "Top Left" }, "top-right": { title: "Top Right" }, "bottom-left": { title: "Bottom Left" }, "bottom-right": { title: "Bottom Right" } }, value: "center" }] }] }, { name: "style", title: "Custom Style", description: "Apply custom text style to the selected labels.", hasReset: !0, hasToggle: !0, disabled: !0, type: "group", children: [{ name: "default", type: "slice", children: [{ name: "font", title: "Font", type: "option", optionType: "font", min: 0, max: 100, familyOptions: { "(Default)": "", ...n.xb8 }, placeholder: "Auto" }] }] }, { name: "alignment", title: "Custom Alignment", type: "group", hasReset: !0, hasToggle: !0, disabled: !0, children: [{ name: "default", type: "slice", children: [{ name: "vAlign", title: "Vertical Alignment", type: "option", optionType: "radio", options: { top: { description: "Align Top", icon: "v-align-top" }, middle: { description: "Align Middle", icon: "v-align-middle" }, bottom: { description: "Align Bottom", icon: "v-align-bottom" } }, value: "middle" }, { name: "hAlign", title: "Horizontal Alignment", type: "option", optionType: "radio", hasToggle: !0, disabled: !0, options: { left: { description: "Align Left", icon: "h-align-left" }, center: { description: "Align Center", icon: "h-align-center" }, right: { description: "Align Right", icon: "h-align-right" } }, value: "center" }] }] }, { name: "coords", title: "Custom Position", description: "Set the custom position of the selected labels relative to the parent map element.", type: "group", hasReset: !0, hasToggle: !0, disabled: !0, visibleIf: () => !globalThis.labelDesignerState?.mode || "selection" === globalThis.labelDesignerState.mode, children: [{ name: "default", type: "slice", children: [{ name: "x", title: "Horizontal Offset", type: "option", optionType: "number", placeholder: "0", value: 0 }, { name: "y", title: "Vertical Offset", type: "option", optionType: "number", placeholder: "0", value: 0 }, { name: "rotation", title: "Rotation Z", type: "option", optionType: "number", placeholder: "0", hasSlider: !0, min: -360, max: 360, value: 0 }] }] }, { name: "size", title: "Custom Size", type: "group", hasReset: !0, hasToggle: !0, disabled: !0, visibleIf: () => !globalThis.labelDesignerState?.mode || "selection" === globalThis.labelDesignerState.mode, children: [{ name: "default", type: "slice", children: [{ name: "height", title: "Height", type: "option", optionType: "number", placeholder: "Auto", min: 0 }, { name: "width", title: "Width", type: "option", optionType: "number", placeholder: "Auto", min: 0 }] }] }, { name: "transform", title: "Transform", type: "group", hasReset: !0, hasToggle: !0, disabled: !0, visibleIf: () => !globalThis.labelDesignerState?.mode || "selection" === globalThis.labelDesignerState.mode, children: [{ name: "default", type: "slice", children: [{ name: "rotationX", title: "Rotation X", type: "option", optionType: "number", placeholder: "0", hasSlider: !0, min: -60, max: 60, value: 0 }, { name: "rotationY", title: "Rotation Y", type: "option", optionType: "number", placeholder: "0", hasSlider: !0, min: -60, max: 60, value: 0 }, { name: "skewX", title: "Shear X", type: "option", optionType: "number", placeholder: "0", hasSlider: !0, min: -60, max: 60, value: 0 }, { name: "skewY", title: "Shear Y", type: "option", optionType: "number", placeholder: "0", hasSlider: !0, min: -60, max: 60, value: 0 }] }] }, { name: "misc", title: "Visibility", type: "group", hasReset: !0, children: [{ name: "default", type: "slice", children: [{ name: "hidden", title: "Hide Labels", type: "option", optionType: "switch", value: !1 }, { name: "noBackground", title: "Hide Background", type: "option", optionType: "switch", value: !1 }] }] }];function o(t) {return { style: t.hasCustomTextStyle, "style.default.font": { family: t.customFontFamily, size: t.customFontSize, bold: t.customIsBold, italic: t.customIsItalic, underline: t.customIsUnderlined }, alignment: t.hasCustomAlignment, "alignment.default.vAlign": t.customVerticalPosition, "alignment.default.hAlign": t.customHorizontalPosition, connector: t.hasConnector, "connector.line.style": t.connectorStyle, "connector.line.curviness": t.connectorCurviness, "connector.line.color": t.connectorColor, "connector.line.width": t.connectorWidth, "connector.line.gap": t.connectorGap || 1, "connector.source.endpoint": t.connectorEndpoints[0] || "none", "connector.source.anchor": t.connectorAnchors[0] || "continuous", "connector.target.endpoint": t.connectorEndpoints[1] || "none", "connector.target.anchor": t.connectorAnchors[1] || "center", coords: t.hasCustomPosition, "coords.default.x": t.hasCustomPosition ? t.customSettings.coords.x : null, "coords.default.y": t.hasCustomPosition ? t.customSettings.coords.y : null, "coords.default.rotation": t.customSettings?.rotation, size: t.hasCustomSize, "size.default.height": t.hasCustomSize ? t.customSettings.size.height : null, "size.default.width": t.hasCustomSize ? t.customSettings.size.width : null, transform: t.hasCustomTransform, "transform.default.rotationX": t.customSettings?.rotationX, "transform.default.rotationY": t.customSettings?.rotationY, "transform.default.skewX": t.customSettings?.skewX, "transform.default.skewY": t.customSettings?.skewY, "misc.default.noBackground": t.forceNoBackground, "misc.default.hidden": t.isHidden };}function a(t, e = 0) {const i = (i, o) => {const a = Array.isArray(t[i]) ? t[i][e] : t[i];if (null == a) return null;const l = (0, n._dk)(s, i);return ("option" === l.type ? r(l.value, a) : l.disabled === !a) ? null : o ? o(a) : a;},o = {};o.text = i("style", () => {const t = i("style.default.font");return { ...(t.family ? { fontFamily: t.family } : {}), ...(t.size ? { fontSize: t.size } : {}), bold: t.bold, italic: t.italic, underline: t.underline };}), o.alignment = i("alignment", () => ({ horizontal: i("alignment.default.hAlign"), vertical: i("alignment.default.vAlign") })), o.connector = i("connector", () => ({ style: i("connector.line.style"), curviness: i("connector.line.curviness"), color: i("connector.line.color"), width: i("connector.line.width"), gap: i("connector.line.gap"), endpoints: [i("connector.source.endpoint"), i("connector.target.endpoint")], anchors: [i("connector.source.anchor"), i("connector.target.anchor")] })), i("coords") ? (o.coords = { ...i("coords.default.x", (t) => ({ x: t })), ...i("coords.default.y", (t) => ({ y: t })) }, o.rotation = i("coords.default.rotation")) : (o.coords = null, o.rotation = null), i("size") ? o.size = { ...i("size.default.height", (t) => ({ height: t })), ...i("size.default.width", (t) => ({ width: t })) } : o.size = null, i("transform") ? (o.rotationX = i("transform.default.rotationX"), o.rotationY = i("transform.default.rotationY"), o.skewX = i("transform.default.skewX"), o.skewY = i("transform.default.skewY")) : (o.rotationX = null, o.rotationY = null, o.skewX = null, o.skewY = null), o.noBackground = i("misc.default.noBackground"), o.hidden = i("misc.default.hidden");for (const t in o) (null == o[t] || "object" == typeof o[t] && !(0, n.dld)(o[t])) && delete o[t];return o;}}, 4641: (t, e, i) => {"use strict";const n = i(560);t.exports = (t, e, i) => 0 === n(t, e, i);}, 4652: (t, e, i) => {"use strict";i.d(e, { _n: () => m });var n = i(5551),r = i(5874),s = i(6585),o = i(1371);function a(t, e) {let i = e && e.getChild("TagName");return i ? t.sliceString(i.from, i.to) : "";}function l(t, e) {let i = e && e.firstChild;return i && "OpenTag" == i.name ? a(t, i) : "";}function c(t) {for (let e = t && t.parent; e; e = e.parent) if ("Element" == e.name) return e;return null;}class h {constructor(t, e, i) {this.attrs = e, this.attrValues = i, this.children = [], this.name = t.name, this.completion = Object.assign(Object.assign({ type: "type" }, t.completion || {}), { label: this.name }), this.openCompletion = Object.assign(Object.assign({}, this.completion), { label: "<" + this.name }), this.closeCompletion = Object.assign(Object.assign({}, this.completion), { label: "</" + this.name + ">", boost: 2 }), this.closeNameCompletion = Object.assign(Object.assign({}, this.completion), { label: this.name + ">" }), this.text = t.textContent ? t.textContent.map((t) => ({ label: t, type: "text" })) : [];}}const u = /^[:\-\.\w\u00b7-\uffff]*$/;function d(t) {return Object.assign(Object.assign({ type: "property" }, t.completion || {}), { label: t.name });}function p(t) {return "string" == typeof t ? { label: `"${t}"`, type: "constant" } : /^"/.test(t.label) ? t : Object.assign(Object.assign({}, t), { label: `"${t.label}"` });}function f(t, e) {let i = [],n = [],s = Object.create(null);for (let t of e) {let e = d(t);i.push(e), t.global && n.push(e), t.values && (s[t.name] = t.values.map(p));}let o = [],f = [],g = Object.create(null);for (let e of t) {let t = n,r = s;e.attributes && (t = t.concat(e.attributes.map((t) => "string" == typeof t ? i.find((e) => e.label == t) || { label: t, type: "property" } : (t.values && (r == s && (r = Object.create(r)), r[t.name] = t.values.map(p)), d(t)))));let a = new h(e, t, r);g[a.name] = a, o.push(a), e.top && f.push(a);}f.length || (f = o);for (let e = 0; e < o.length; e++) {let i = t[e],n = o[e];if (i.children) for (let t of i.children) g[t] && n.children.push(g[t]);else n.children = o;}return (t) => {var e;let { doc: i } = t.state,h = function (t, e) {var i;let n = (0, r.mv)(t).resolveInner(e, -1),s = null;for (let t = n; !s && t.parent; t = t.parent) "OpenTag" != t.name && "CloseTag" != t.name && "SelfClosingTag" != t.name && "MismatchedCloseTag" != t.name || (s = t);if (s && (s.to > e || s.lastChild.type.isError)) {let t = s.parent;if ("TagName" == n.name) return "CloseTag" == s.name || "MismatchedCloseTag" == s.name ? { type: "closeTag", from: n.from, context: t } : { type: "openTag", from: n.from, context: c(t) };if ("AttributeName" == n.name) return { type: "attrName", from: n.from, context: s };if ("AttributeValue" == n.name) return { type: "attrValue", from: n.from, context: s };let i = n == s || "Attribute" == n.name ? n.childBefore(e) : n;return "StartTag" == (null == i ? void 0 : i.name) ? { type: "openTag", from: e, context: c(t) } : "StartCloseTag" == (null == i ? void 0 : i.name) && i.to <= e ? { type: "closeTag", from: e, context: t } : "Is" == (null == i ? void 0 : i.name) ? { type: "attrValue", from: e, context: s } : i ? { type: "attrName", from: e, context: s } : null;}if ("StartCloseTag" == n.name) return { type: "closeTag", from: e, context: n.parent };for (; n.parent && n.to == e && !(null === (i = n.lastChild) || void 0 === i ? void 0 : i.type.isError);) n = n.parent;return "Element" == n.name || "Text" == n.name || "Document" == n.name ? { type: "tag", from: e, context: "Element" == n.name ? n : c(n) } : null;}(t.state, t.pos);if (!h || "tag" == h.type && !t.explicit) return null;let { type: d, from: p, context: m } = h;if ("openTag" == d) {let t = f,e = l(i, m);if (e) {let i = g[e];t = (null == i ? void 0 : i.children) || o;}return { from: p, options: t.map((t) => t.completion), validFor: u };}if ("closeTag" == d) {let n = l(i, m);return n ? { from: p, to: t.pos + (">" == i.sliceString(t.pos, t.pos + 1) ? 1 : 0), options: [(null === (e = g[n]) || void 0 === e ? void 0 : e.closeNameCompletion) || { label: n + ">", type: "type" }], validFor: u } : null;}if ("attrName" == d) {let t = g[a(i, m)];return { from: p, options: (null == t ? void 0 : t.attrs) || n, validFor: u };}if ("attrValue" == d) {let e = function (t, e, i) {let n = e && e.getChildren("Attribute").find((t) => t.from <= i && t.to >= i),r = n && n.getChild("AttributeName");return r ? t.sliceString(r.from, r.to) : "";}(i, m, p);if (!e) return null;let n = g[a(i, m)],r = ((null == n ? void 0 : n.attrValues) || s)[e];return r && r.length ? { from: p, to: t.pos + ('"' == i.sliceString(t.pos, t.pos + 1) ? 1 : 0), options: r, validFor: /^"[^"]*"?$/ } : null;}if ("tag" == d) {let e = l(i, m),n = g[e],r = [],s = m && m.lastChild;!e || s && "CloseTag" == s.name && a(i, s) == e || r.push(n ? n.closeCompletion : { label: "</" + e + ">", type: "type", boost: 2 });let c = r.concat(((null == n ? void 0 : n.children) || (m ? o : f)).map((t) => t.openCompletion));if (m && (null == n ? void 0 : n.text.length)) {let e = m.firstChild;e.to > t.pos - 20 && !/\S/.test(t.state.sliceDoc(e.to, t.pos)) && (c = c.concat(n.text));}return { from: p, options: c, validFor: /^<\/?[:\-\.\w\u00b7-\uffff]*$/ };}return null;};}const g = r.bj.define({ name: "xml", parser: n.K.configure({ props: [r.Oh.add({ Element(t) {let e = /^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from) + (e ? 0 : t.unit);}, "OpenTag CloseTag SelfClosingTag": (t) => t.column(t.node.from) + t.unit }), r.b_.add({ Element(t) {let e = t.firstChild,i = t.lastChild;return e && "OpenTag" == e.name ? { from: e.to, to: "CloseTag" == i.name ? i.from : t.to } : null;} }), r.Q_.add({ "OpenTag CloseTag": (t) => t.getChild("TagName") })] }), languageData: { commentTokens: { block: { open: "\x3c!--", close: "--\x3e" } }, indentOnInput: /^\s*<\/$/ } });function m(t = {}) {let e = [g.data.of({ autocomplete: f(t.elements || [], t.attributes || []) })];return !1 !== t.autoCloseTags && e.push(y), new r.Yy(g, e);}function v(t, e, i = t.length) {if (!e) return "";let n = e.firstChild,r = n && n.getChild("TagName");return r ? t.sliceString(r.from, Math.min(r.to, i)) : "";}const y = o.Lz.inputHandler.of((t, e, i, n, o) => {if (t.composing || t.state.readOnly || e != i || ">" != n && "/" != n || !g.isActiveAt(t.state, e, -1)) return !1;let a = o(),{ state: l } = a,c = l.changeByRange((t) => {var e, i, o;let a,{ head: c } = t,h = l.doc.sliceString(c - 1, c) == n,u = (0, r.mv)(l).resolveInner(c, -1);if (h && ">" == n && "EndTag" == u.name) {let n = u.parent;if ("CloseTag" != (null === (i = null === (e = n.parent) || void 0 === e ? void 0 : e.lastChild) || void 0 === i ? void 0 : i.name) && (a = v(l.doc, n.parent, c))) return { range: t, changes: { from: c, to: c + (">" === l.doc.sliceString(c, c + 1) ? 1 : 0), insert: `</${a}>` } };} else if (h && "/" == n && "StartCloseTag" == u.name) {let t = u.parent;if (u.from == c - 2 && "CloseTag" != (null === (o = t.lastChild) || void 0 === o ? void 0 : o.name) && (a = v(l.doc, t, c))) {let t = c + (">" === l.doc.sliceString(c, c + 1) ? 1 : 0),e = `${a}>`;return { range: s.OF.cursor(c + e.length, -1), changes: { from: c, to: t, insert: e } };}}return { range: t };});return !c.changes.empty && (t.dispatch([a, l.update(c, { userEvent: "input.complete", scrollIntoView: !0 })]), !0);});}, 4653: (t, e, i) => {"use strict";i.d(e, { T: () => s });var n = i(3242),r = i(3753);class s {listeners = {};get solo() {return (0, n.Im)(this.listeners);}on(t, e, i) {i || (i = (0, r.uR)()), (Array.isArray(t) ? t : [t]).forEach((t) => {this.listeners[`${i}_${t}`] = { event: t, callback: e };});}off(t, e) {t || e ? (Array.isArray(t) ? t : [t]).forEach((t) => {delete this.listeners[`${e}_${t}`];}) : this.listeners = {};}trigger(t, e) {for (const i of Object.values(this.listeners)) i.event == t && (0, n.Tn)(i.callback) && i.callback(e, t);}destroy() {this.off();}}}, 4673: (t, e, i) => {"use strict";i.d(e, { L: () => o });var n = i(6639),r = i(4653),s = i(3753);class o extends r.T {options;scale = 1;element;dialog;dialogContent;get id() {return this.options.id;}constructor(t) {super(), this.options = t;}dom(t) {const e = (0, n.tT)(".picker-cell" + (this.options.value ? "" : ".empty"));return this.updateCell(e, this.options.value), this.element = (0, n.tT)(`#picker-${(0, s.aH)(this.options.id)}.picker-container${this.options.readonly ? ".readonly" : ""}${this.className ? `.${this.className}` : ""}`, { attr: { disabled: this.options.disabled } }, [(0, n.tT)(".picker-ctrl", { events: { click: (t, e) => {t.preventDefault(), this.options.disabled || this.options.readonly || this.showDialog(t.currentTarget);} } }, [e, (0, n.tT)(".dropdown.icon-bottom")]), ...(this.options.hiddenField ? [(0, n.tT)("input.picker-field", { attr: { type: "hidden", name: this.options.id, value: this.options.value || "" } })] : [])]), t && t.appendChild(this.element), this.element;}showDialog(t) {this.dialog || (this.hideDialog(), this.dialog = (0, n.tT)(".picker-dialog" + (this.className ? `.${this.className}-dialog` : ""), document.body, { events: { click: (t, e) => {this.hideDialog();} }, data: { id: this.options.id } }, [(0, n.tT)(".content", { style: { transform: `scale(${1 / this.scale})` }, middleware: (t) => this.dialogContent = t }, [...(this.options.title ? [(0, n.tT)(".title", this.options.title)] : [])])]), this.drawDialogContent(this.dialogContent), this.positionDialog(t));}hideDialog() {this.dialog?.remove(), this.dialog = null, this.dialogContent = null;}positionDialog(t) {const e = t.getBoundingClientRect(),i = window.innerWidth,n = window.innerHeight,r = this.dialogContent.offsetWidth,s = this.dialogContent.offsetHeight,o = Math.max(0, e.left + r > i ? e.left - r + e.width : e.left),a = Math.max(0, e.top + e.height + s > n ? e.top - s - 3 : e.top + e.height + 3);this.dialogContent.style.left = `${o}px`, this.dialogContent.style.top = `${a}px`;}updateValue(t) {if (this.element) {this.options.value = t;const e = this.element.querySelector(".picker-cell");if (e.classList.toggle("empty", !t), this.updateCell(e, t), this.options.hiddenField) {const e = this.element.querySelector("input.picker-field");e && (e.value = t, e.dispatchEvent(new Event("change")));}}}updateScale(t) {this.scale = t, this.dialog && (this.dialog.style.transform = `scale(${1 / t})`);}change(t) {this.updateValue(t), this.trigger("change", t);}}}, 4683: (t) => {t.exports = { $schema: "http://json-schema.org/draft-07/schema#", $id: "http://example.com/extended-schema.pbiviz.json", type: "object", allOf: [{ $ref: "./../../node_modules/powerbi-visuals-api/schema.pbiviz.json" }], properties: { visual: { type: "object", properties: { date: { type: "string", description: "Release date of the visual" }, edition: { type: "string", description: "Visual edition" }, contactUrl: { type: "string", description: "Contact URL" }, changelogUrl: { type: "string", description: "Changelog URL" }, docsUrl: { type: "string", description: "Documentation URL" }, appSourcePurchaseUrl: { type: "string", description: "AppSource purchase URL" }, okvizPurchaseUrl: { type: "string", description: "OKVIZ purchase URL" }, updateUrl: { type: "string", description: "URL to check for updated versions of the visual" } } }, editions: { type: "array", description: "List of visual editions", items: { type: "object", properties: { type: { type: "string", description: "Edition type" }, name: { type: "string", description: "Internal edition name" }, displayName: { type: "string", description: "Display name of the edition" }, guid: { type: "string", description: "Unique identifier for the edition" }, icon: { type: "string", description: "Icon path for the edition" }, packages: { type: "array", description: "List of packages", items: { type: "string" } }, certification: { type: "boolean", description: "True if the edition must be certified" }, licensing: { type: "object", description: "Licensing configuration for the edition", properties: { type: { type: "string", description: "Licensing type" }, platforms: { type: "array", description: "List of licensing platforms", items: { type: "string" } }, appSourcePlans: { type: "array", description: "AppSource plans associated with the edition", items: { type: "string" } } } }, capabilities: { type: "object", description: "Capabilities configuration" } } } }, dev: { type: "object", description: "Any object that can be used to test or store configuration valid for the development environment only. NOTE: This section is remove from the final pbiviz.json file during packaging." } } };}, 4708: (t, e, i) => {"use strict";i.d(e, { $e: () => f, Bt: () => y, IO: () => a, KY: () => m, ND: () => r, NN: () => s, Zb: () => o, e$: () => h, j$: () => p, lp: () => g, p8: () => u, xq: () => b, zO: () => d });var n = i(5442);function r(t, e) {t = t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, function (t, e, i, n) {return e + e + i + i + n + n;});const i = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),n = i ? { r: parseInt(i[1], 16), g: parseInt(i[2], 16), b: parseInt(i[3], 16) } : null;return null === n ? "" : e || 0 === e ? "rgba(" + n.r + "," + n.g + "," + n.b + "," + e + ")" : "rgb(" + n.r + "," + n.g + "," + n.b + ")";}function s(t, e) {if (0 === e) return t;const i = function (t, e) {const i = t.H + e;return { H: i > 1 ? i - 1 : i, S: t.S, V: t.V };}(l(a(t)), e);return d(c(i));}function o(t) {return d(a(t));}function a(t) {if (t.indexOf("#") >= 0) {if (7 === t.length) {const e = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if (null == e || e.length < 4) return;return { R: parseInt(e[1], 16), G: parseInt(e[2], 16), B: parseInt(e[3], 16) };}if (4 === t.length) {const e = /^#?([a-f\d])([a-f\d])([a-f\d])$/i.exec(t);if (null == e || e.length < 4) return;return { R: parseInt(e[1] + e[1], 16), G: parseInt(e[2] + e[2], 16), B: parseInt(e[3] + e[3], 16) };}} else {if (t.indexOf("rgb(") >= 0) {const e = /^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(t);if (null == e || e.length < 4) return;return { R: parseInt(e[1], 10), G: parseInt(e[2], 10), B: parseInt(e[3], 10) };}if (t.indexOf("rgba(") >= 0) {const e = /^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*(?:\.\d+)?)\)$/.exec(t);if (null == e || e.length < 5) return;return { R: parseInt(e[1], 10), G: parseInt(e[2], 10), B: parseInt(e[3], 10), A: parseFloat(e[4]) };}}}function l(t) {let e, i;const n = t.R / 255,r = t.G / 255,s = t.B / 255,o = Math.min(n, Math.min(r, s)),a = Math.max(n, Math.max(r, s)),l = a - o;return 0 === a || 0 === l ? (e = 0, i = 0) : (e = l / a, i = n === a ? (r - s) / l : r === a ? 2 + (s - n) / l : 4 + (n - r) / l), i /= 6, i < 0 && (i += 1), { H: i, S: e, V: a };}function c(t) {let e, i, n;const r = t.H,s = t.S,o = t.V;if (0 === s) e = o, i = o, n = o;else {const t = 6 * r,a = Math.floor(t),l = t - a,c = o * (1 - s),h = o * (1 - s * l),u = o * (1 - s * (1 - l));switch (a) {case 0:e = o, i = u, n = c;break;case 1:e = h, i = o, n = c;break;case 2:e = c, i = o, n = u;break;case 3:e = c, i = h, n = o;break;case 4:e = u, i = c, n = o;break;case 5:e = o, i = c, n = h;}}return { R: Math.floor(255 * e), G: Math.floor(255 * i), B: Math.floor(255 * n) };}function h(t, e) {const i = Math.floor(e);return { R: Math.max(0, t.R - i), G: Math.max(0, t.G - i), B: Math.max(0, t.B - i) };}function u(t) {return null == t.A ? "rgb(" + t.R + "," + t.G + "," + t.B + ")" : "rgba(" + t.R + "," + t.G + "," + t.B + "," + t.A + ")";}function d(t) {return "#" + v(t.R) + v(t.G) + v(t.B);}function p(t, e, i) {return d(f(a(t), e, a(i)));}function f(t, e, i) {return e = n.ensureInRange(e, 0, 1), { R: g(t.R, e, i.R), G: g(t.G, e, i.G), B: g(t.B, e, i.B) };}function g(t, e, i) {return e = n.ensureInRange(e, 0, 1), t = n.ensureInRange(t, 0, 255), i = n.ensureInRange(i, 0, 255), Math.round(e * t + (1 - e) * i);}function m(t, e, i) {const n = l(t);return (e + i > 1 || e <= 0 || i <= 0) && (e = .8, i = .2), n.V < e ? n.V = n.V + i : n.V = n.V - i, d(c(n));}function v(t) {const e = n.ensureInRange(t, 0, 255).toString(16).toUpperCase();return 1 === e.length ? "0" + e : e;}function y(t, e, i) {const n = e.map((t) => a(t));return (r) => {if (null == r && (r = 0), isNaN(r)) return;if (i) {if (r >= t[t.length - 1]) return e[e.length - 1];if (r <= t[0]) return e[0];}let s, o, a, l;for (let i = 1, c = t.length; i < c; i++) {if (s = t[i - 1], o = t[i], o === r) return e[i];if (r >= s && r <= o) {a = n[i - 1], l = n[i];break;}}return d({ R: Math.round((r - s) * (l.R - a.R) / (o - s) + a.R), G: Math.round((r - s) * (l.G - a.G) / (o - s) + a.G), B: Math.round((r - s) * (l.B - a.B) / (o - s) + a.B) });};}function b(t, e) {const i = parseInt(t.slice(1), 16),n = e < 0 ? 0 : 255,r = e < 0 ? -1 * e : e,s = i >> 16,o = i >> 8 & 255,a = 255 & i;return "#" + (16777216 + 65536 * (Math.round((n - s) * r) + s) + 256 * (Math.round((n - o) * r) + o) + (Math.round((n - a) * r) + a)).toString(16).slice(1);}}, 4709: (t, e, i) => {"use strict";i.d(e, { Ay: () => s, uN: () => r });var n = i(735);function r(t) {return 1 === (t = +t) ? s : function (e, i) {return i - e ? function (t, e, i) {return t = Math.pow(t, i), e = Math.pow(e, i) - t, i = 1 / i, function (n) {return Math.pow(t + n * e, i);};}(e, i, t) : (0, n.A)(isNaN(e) ? i : e);};}function s(t, e) {var i = e - t;return i ? function (t, e) {return function (i) {return t + i * e;};}(t, i) : (0, n.A)(isNaN(t) ? e : t);}}, 4733: (t, e, i) => {"use strict";i(3419), i(2174);}, 4771: (t, e, i) => {"use strict";function n(t, e) {if (!/^#?([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(t)) return t;3 === (t = t.startsWith("#") ? t.slice(1) : t).length && (t = t.split("").map((t) => t + t).join(""));const i = Math.min(100, Math.max(0, Math.round(e)));return `#${t}${Math.round(i / 100 * 255).toString(16).toUpperCase().padStart(2, "0")}`;}function r(t) {return t.startsWith("#") && (t = t.slice(1)), (.299 * parseInt(t.substring(0, 2), 16) + .587 * parseInt(t.substring(2, 4), 16) + .114 * parseInt(t.substring(4, 6), 16)) / 255 > .5 ? "#424242" : "#FFFFFF";}function s(t) {if (t = t.replace(/\s/g, ""), /^rgb\((\d+),(\d+),(\d+)\)$/.test(t)) {const e = t.match(/^rgb\((\d+),(\d+),(\d+)\)$/);if (e) {const t = parseInt(e[1]),i = parseInt(e[2]),n = parseInt(e[3]);return Math.sqrt(t * t * .299 + i * i * .587 + n * n * .114) <= 127.5;}}if (/^#[0-9A-F]{6}$/i.test(t)) {const e = parseInt(t.substring(1, 3), 16),i = parseInt(t.substring(3, 5), 16),n = parseInt(t.substring(5, 7), 16);return Math.sqrt(e * e * .299 + i * i * .587 + n * n * .114) <= 127.5;}return !1;}function o(t) {return /^#([0-9A-F]{3,4}){1,2}$/i.test(t);}function a(t) {return /^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(0|1|0?\.\d+))?\)$/i.test(t);}function l(t) {return /^hsla?\(\s*([0-9]{1,3}(?:\.\d+)?)(?:deg|rad|turn|grad)?\s*,\s*([0-9]{1,3}(?:\.\d+)?%)\s*,\s*([0-9]{1,3}(?:\.\d+)?%)(?:,\s*(0|1|0?\.\d+))?\s*\)$/i.test(t);}function c(t) {let e = t.replace(/^#/, "");3 !== e.length && 4 !== e.length || (e = e.split("").map((t) => t + t).join(""));const i = parseInt(e.slice(0, 6), 16);return { r: i >> 16 & 255, g: i >> 8 & 255, b: 255 & i, a: 8 === e.length ? parseInt(e.slice(6, 8), 16) / 255 : 1 };}function h(t) {const e = /^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(0|1|0?\.\d+))?\)$/i.exec(t);if (!e) throw new Error("Invalid RGB(A) format");return { r: parseInt(e[1], 10), g: parseInt(e[2], 10), b: parseInt(e[3], 10), a: e[4] ? parseFloat(e[4]) : 1 };}function u(t) {const e = /^hsla?\(\s*([0-9]{1,3}(?:\.\d+)?)(?:deg|rad|turn|grad)?\s*,\s*([0-9]{1,3}(?:\.\d+)?%)\s*,\s*([0-9]{1,3}(?:\.\d+)?%)(?:,\s*(0|1|0?\.\d+))?\s*\)$/i.exec(t);if (!e) throw new Error("Invalid HSL(A) format");let i = parseFloat(e[1]);const n = parseFloat(e[2]) / 100,r = parseFloat(e[3]) / 100,s = e[4] ? parseFloat(e[4]) : 1;i %= 360, i < 0 && (i += 360);const o = (1 - Math.abs(2 * r - 1)) * n,a = o * (1 - Math.abs(i / 60 % 2 - 1)),l = r - o / 2;let c = 0,h = 0,u = 0;return 0 <= i && i < 60 ? (c = o, h = a, u = 0) : 60 <= i && i < 120 ? (c = a, h = o, u = 0) : 120 <= i && i < 180 ? (c = 0, h = o, u = a) : 180 <= i && i < 240 ? (c = 0, h = a, u = o) : 240 <= i && i < 300 ? (c = a, h = 0, u = o) : 300 <= i && i < 360 && (c = o, h = 0, u = a), c = Math.round(255 * (c + l)), h = Math.round(255 * (h + l)), u = Math.round(255 * (u + l)), { r: c, g: h, b: u, a: s };}function d(t) {const e = document.createElement("canvas").getContext("2d");if (!e) return null;e.fillStyle = t, e.fillRect(0, 0, 1, 1);const i = e.getImageData(0, 0, 1, 1).data;return { r: i[0], g: i[1], b: i[2], a: i[3] / 255 };}function p(t) {let e = null;if (e = o(t) ? c(t) : a(t) ? h(t) : l(t) ? u(t) : d(t), !e) throw new Error("Invalid color format");return function ({ r: t, g: e, b: i, a: n }) {const r = Math.round(.299 * t + .587 * e + .114 * i).toString(16).padStart(2, "0");return `#${r}${r}${r}${Math.round(255 * n).toString(16).padStart(2, "0")}`;}(e);}function f(t, e = 90) {if (!t || "transparent" == t || "none" == t) return null;let i = null;if (i = o(t) ? c(t) : a(t) ? h(t) : l(t) ? u(t) : d(t), !i) throw new Error("Invalid color format");const n = s(t) ? e : -e,r = (t) => Math.round(Math.min(255, Math.max(0, t + n / 100 * (255 - t))));let p = r(i.r),f = r(i.g),g = r(i.b);return 0 === i.r && 0 === i.g && 0 === i.b && (p = f = g = Math.max(20, Math.round(e / 100 * 255))), `rgba(${p}, ${f}, ${g}, ${i.a})`;}i.d(e, { bh: () => p, cP: () => s, dk: () => n, g_: () => f, w5: () => r });}, 4780: (t, e) => {"use strict";e.byteLength = function (t) {var e = a(t),i = e[0],n = e[1];return 3 * (i + n) / 4 - n;}, e.toByteArray = function (t) {var e,i,s = a(t),o = s[0],l = s[1],c = new r(function (t, e, i) {return 3 * (e + i) / 4 - i;}(0, o, l)),h = 0,u = l > 0 ? o - 4 : o;for (i = 0; i < u; i += 4) e = n[t.charCodeAt(i)] << 18 | n[t.charCodeAt(i + 1)] << 12 | n[t.charCodeAt(i + 2)] << 6 | n[t.charCodeAt(i + 3)], c[h++] = e >> 16 & 255, c[h++] = e >> 8 & 255, c[h++] = 255 & e;return 2 === l && (e = n[t.charCodeAt(i)] << 2 | n[t.charCodeAt(i + 1)] >> 4, c[h++] = 255 & e), 1 === l && (e = n[t.charCodeAt(i)] << 10 | n[t.charCodeAt(i + 1)] << 4 | n[t.charCodeAt(i + 2)] >> 2, c[h++] = e >> 8 & 255, c[h++] = 255 & e), c;}, e.fromByteArray = function (t) {for (var e, n = t.length, r = n % 3, s = [], o = 16383, a = 0, l = n - r; a < l; a += o) s.push(c(t, a, a + o > l ? l : a + o));return 1 === r ? (e = t[n - 1], s.push(i[e >> 2] + i[e << 4 & 63] + "==")) : 2 === r && (e = (t[n - 2] << 8) + t[n - 1], s.push(i[e >> 10] + i[e >> 4 & 63] + i[e << 2 & 63] + "=")), s.join("");};for (var i = [], n = [], r = "undefined" != typeof Uint8Array ? Uint8Array : Array, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", o = 0; o < 64; ++o) i[o] = s[o], n[s.charCodeAt(o)] = o;function a(t) {var e = t.length;if (e % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");var i = t.indexOf("=");return -1 === i && (i = e), [i, i === e ? 0 : 4 - i % 4];}function l(t) {return i[t >> 18 & 63] + i[t >> 12 & 63] + i[t >> 6 & 63] + i[63 & t];}function c(t, e, i) {for (var n, r = [], s = e; s < i; s += 3) n = (t[s] << 16 & 16711680) + (t[s + 1] << 8 & 65280) + (255 & t[s + 2]), r.push(l(n));return r.join("");}n["-".charCodeAt(0)] = 62, n["_".charCodeAt(0)] = 63;}, 4784: (t, e, i) => {"use strict";function n() {for (var t = this._groups, e = 0, i = t.length; e < i; ++e) for (var n = t[e], r = 0, s = n.length; r < s; ++r) {var o = n[r];if (o) return o;}return null;}i.d(e, { A: () => n });}, 4806: (t, e, i) => {"use strict";function n(t, e) {if (!t || !t.length) return -1;const i = t[0];if (i.values && i.values.length > 0) for (let t = 0, n = i.values.length; t < n; ++t) {const n = i.values[t];if (n && n.source && s(n.source, e)) return t;}return -1;}function r(t, e) {if (t && t.length) for (let i = 0, n = t.length; i < n; i++) if (s(t[i].source, e)) return i;return -1;}function s(t, e) {const i = t.roles;return i && i[e];}function o(t, e) {return null != t && null != t.metadata && t.metadata.columns && t.metadata.columns.some((t) => t.roles && void 0 !== t.roles[e]);}function a(t, e) {return t && t.source && t.source.roles && !0 === t.source.roles[e];}i.r(e), i.d(e, { getCategoryIndexOfRole: () => r, getMeasureIndexOfRole: () => n, hasRole: () => s, hasRoleInDataView: () => o, hasRoleInValueColumn: () => a });}, 4810: (t, e, i) => {"use strict";i.d(e, { FT: () => y, Oq: () => x, _d: () => w, qk: () => S, xb: () => m.x });var n = i(4653),r = i(6639),s = i(3234),o = (i(3394), i(3838)),a = i(4215),l = i(2140),c = i(137),h = i(7512),u = i(2909),d = i(1710),p = i(2649),f = i(1650),g = i(4054),m = i(2292),v = i(2017);class y extends n.T {config;viewPortScale;panel;contentElement;components = {};get state() {const t = {};if (this.components) for (const e in this.components) {const i = this.components[e];i instanceof l.c ? null != i.value && (t[e] = i.value) : (i instanceof o.y || i instanceof a.F) && i.hasToggle && null != i.disabled && (t[e] = Array.isArray(i.disabled) ? i.disabled.map((t) => !t) : !i.disabled);}return t;}get interfaceState() {const t = { scroll: { left: this.contentElement?.scrollLeft ?? 0, top: this.contentElement?.scrollTop ?? 0 }, components: {} };if (this.components) for (const e in this.components) {const { collapsed: i } = this.components[e],n = {};null != i && (n.collapsed = i), Object.keys(n).length > 0 && (t.components[e] = n);}return t;}constructor(t, e = 1) {super(), this.config = t, this.viewPortScale = e;}draw(t) {this.panel && this.panel.remove(), this.panel = (0, r.tT)(".on-object-panel", t, [(0, r.tT)(".top-content", { middleware: (t) => this.contentElement = t })]), b(this.config, (t, e, i, n) => ("group" === t.type ? this.createGroup(t, n, e) : "slice" === t.type ? this.createSlice(t, n, e, i) : this.createOption(t, n, e)).contentElement, this.contentElement), this.updateScale(this.viewPortScale), this.contentElement.addEventListener("scroll", () => {this.trigger("interface");});}createGroup(t, e, i) {const n = new o.y({ collapsed: !0, ...t, path: i, hasChildren: t.children?.length > 0, onCollapse: (e) => this.onComponentCollapse(t, e), onToggle: (e) => this.onComponentToggle(t, e), onReset: () => this.onGroupReset(t) });return n.render(e), this.components[i] = n, n;}createSlice(t, e, i, n = 0) {const r = new a.F({ collapsed: t.title && n > 0, ...t, path: i, hasChildren: t.children?.length > 0, onCollapse: (e) => this.onComponentCollapse(t, e), onToggle: (e) => this.onComponentToggle(t, e) });return r.render(e), this.components[i] = r, r;}createOption(t, e, i) {const n = (e) => this.onOptionChange(t, e),r = ((e) => {switch (t.optionType) {case "number":return new h.V({ ...e, path: i, onChange: n });case "switch":return new c.u({ ...e, path: i, onChange: n });case "select":return new p.W({ ...e, path: i, onChange: n });case "input":return new u.S({ ...e, path: i, onChange: n });case "color":return new f.B({ ...e, path: i, onChange: n });case "radio":return new g.D({ ...e, path: i, onChange: n });case "font":return new m.X({ ...e, path: i, onChange: n });case "text":return new d.t({ ...e, path: i });}})(t);return r.render(e), this.components[i] = r, r;}onOptionChange(t, e) {t.onChange && t.onChange(e), this.applyVisibility(), this.trigger("change");}onComponentToggle(t, e) {t.onToggle && t.onToggle(e), this.applyVisibility(), this.trigger("change");}onComponentCollapse(t, e) {t.onCollapse && t.onCollapse(e), this.trigger("interface");}onGroupReset(t) {for (const e in this.components) e.startsWith(t.name) && this.components[e].reset();t.onReset && t.onReset(), this.trigger("change");}updateState(t) {for (const e in t) {const i = this.components[e];i instanceof l.c ? i.update(t[e]) : (i instanceof o.y || i instanceof a.F) && i.toggle(t[e]), this.applyVisibility(i, t);}}applyVisibility(t, e) {const i = t ? { [t.path]: t } : this.components;e || (e = this.state);for (const t in i) {const n = w(this.config, t);n?.visibleIf && i[t].toggleVisibility(n.visibleIf(e));}}restoreState() {for (const t in this.components) this.components[t].reset();this.applyVisibility();}restoreInterfaceState(t) {for (const e in t.components) {const i = this.components[e];if (i) {const { collapsed: n } = t.components[e];null != n && i.toggleCollapse(n);}}this.contentElement && (this.contentElement.scrollLeft = t.scroll.left, this.contentElement.scrollTop = t.scroll.top);}updateScale(t) {this.viewPortScale = t, this.panel && (0, s.vm)(this.panel, `scale(${Math.min(1, 1 / t)})`);}destroy() {this.panel && (this.panel.remove(), this.panel = null), this.components = {}, super.destroy();}}function b(t, e, i, n = "") {t.forEach((t, r) => {const s = n ? `${n}.${t.name}` : t.name,o = e(t, s, r, i);!1 !== o && t.children && b(t.children, e, o, s);});}function w(t, e) {let i;return b(t, (t, n) => {if (n === e) return i = t, !1;}), i;}function x(t) {return Array.isArray(t) && t.some((e) => !v(e, t[0]));}const S = "_MIXED_";}, 4827: (t, e, i) => {"use strict";i.d(e, { W: () => n });const n = "demo";}, 4876: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(6541),r = i(9064);function s(t) {"function" != typeof t && (t = (0, n.A)(t));for (var e = this._groups, i = e.length, s = new Array(i), o = 0; o < i; ++o) for (var a, l = e[o], c = l.length, h = s[o] = [], u = 0; u < c; ++u) (a = l[u]) && t.call(a, a.__data__, u, l) && h.push(a);return new r.eB(s, this._parents, this._name, this._id);}}, 4890: (t, e, i) => {"use strict";i.d(e, { A: () => h });var n = i(2284),r = i(7728),s = function (t, e) {return s = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {t.__proto__ = e;} || function (t, e) {for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);}, s(t, e);},o = function () {return o = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, o.apply(this, arguments);};function a(t) {var e = t.container;return e === document.body ? [e.scrollLeft || document.documentElement.scrollLeft, e.scrollTop || document.documentElement.scrollTop] : [e.scrollLeft, e.scrollTop];}function l(t, e) {return t.addEventListener("scroll", e), function () {t.removeEventListener("scroll", e);};}function c(t) {return t ? (0, r.Kg)(t) ? document.querySelector(t) : (0, r.Tn)(t) ? t() : t instanceof Element ? t : "current" in t ? t.current : "value" in t ? t.value : void 0 : null;}const h = function (t) {function e() {var e = null !== t && t.apply(this, arguments) || this;return e._startRect = null, e._startPos = [], e._prevTime = 0, e._timer = 0, e._prevScrollPos = [0, 0], e._isWait = !1, e._flag = !1, e._currentOptions = null, e._lock = !1, e._unregister = null, e._onScroll = function () {var t = e._currentOptions;!e._lock && t && e.emit("scrollDrag", { next: function (i) {e.checkScroll({ container: t.container, inputEvent: i });} });}, e;}!function (t, e) {function i() {this.constructor = t;}s(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());}(e, t);var i = e.prototype;return i.dragStart = function (t, e) {var i = c(e.container);if (i) {var n = 0,r = 0,s = 0,o = 0;if (i === document.body) s = window.innerWidth, o = window.innerHeight;else {var a = i.getBoundingClientRect();n = a.top, r = a.left, s = a.width, o = a.height;}this._flag = !0, this._startPos = [t.clientX, t.clientY], this._startRect = { top: n, left: r, width: s, height: o }, this._prevScrollPos = this._getScrollPosition([0, 0], e), this._currentOptions = e, this._registerScrollEvent(e);} else this._flag = !1;}, i.drag = function (t, e) {if (clearTimeout(this._timer), this._flag) {var i = t.clientX,n = t.clientY,r = e.threshold,s = void 0 === r ? 0 : r,a = this._startRect,l = this._startPos;this._currentOptions = e;var c = [0, 0];return a.top > n - s ? (l[1] > a.top || n < l[1]) && (c[1] = -1) : a.top + a.height < n + s && (l[1] < a.top + a.height || n > l[1]) && (c[1] = 1), a.left > i - s ? (l[0] > a.left || i < l[0]) && (c[0] = -1) : a.left + a.width < i + s && (l[0] < a.left + a.width || i > l[0]) && (c[0] = 1), !(!c[0] && !c[1]) && this._continueDrag(o(o({}, e), { direction: c, inputEvent: t, isDrag: !0 }));}}, i.checkScroll = function (t) {var e = this;if (this._isWait) return !1;var i = t.prevScrollPos,n = void 0 === i ? this._prevScrollPos : i,r = t.direction,s = t.throttleTime,o = void 0 === s ? 0 : s,a = t.inputEvent,l = t.isDrag,c = this._getScrollPosition(r || [0, 0], t),h = c[0] - n[0],u = c[1] - n[1],d = r || [h ? Math.abs(h) / h : 0, u ? Math.abs(u) / u : 0];return this._prevScrollPos = c, this._lock = !1, !(!h && !u || (this.emit("move", { offsetX: d[0] ? h : 0, offsetY: d[1] ? u : 0, inputEvent: a }), o && l && (clearTimeout(this._timer), this._timer = window.setTimeout(function () {e._continueDrag(t);}, o)), 0));}, i.dragEnd = function () {this._flag = !1, this._lock = !1, clearTimeout(this._timer), this._unregisterScrollEvent();}, i._getScrollPosition = function (t, e) {var i = e.container,n = e.getScrollPosition;return (void 0 === n ? a : n)({ container: c(i), direction: t });}, i._continueDrag = function (t) {var e,i = this,n = t.container,s = t.direction,a = t.throttleTime,l = t.useScroll,h = t.isDrag,u = t.inputEvent;if (!(!this._flag || h && this._isWait)) {var d = (0, r.tB)(),p = Math.max(a + this._prevTime - d, 0);if (p > 0) return clearTimeout(this._timer), this._timer = window.setTimeout(function () {i._continueDrag(t);}, p), !1;this._prevTime = d;var f = this._getScrollPosition(s, t);this._prevScrollPos = f, h && (this._isWait = !0), l || (this._lock = !0);var g = { container: c(n), direction: s, inputEvent: u };return null === (e = t.requestScroll) || void 0 === e || e.call(t, g), this.emit("scroll", g), this._isWait = !1, l || this.checkScroll(o(o({}, t), { prevScrollPos: f, direction: s, inputEvent: u }));}}, i._registerScrollEvent = function (t) {this._unregisterScrollEvent();var e = t.checkScrollEvent;if (e) {var i = !0 === e ? l : e,n = c(t.container);!0 !== e || n !== document.body && n !== document.documentElement ? this._unregister = i(n, this._onScroll) : this._unregister = l(window, this._onScroll);}}, i._unregisterScrollEvent = function () {var t;null === (t = this._unregister) || void 0 === t || t.call(this), this._unregister = null;}, e;}(n.A);}, 4916: (t, e, i) => {"use strict";i.r(e), i.d(e, { categoryIsAlsoSeriesRole: () => r, getMiscellaneousTypeDescriptor: () => l, getSeriesName: () => s, hasImageUrlColumn: () => c, isImageUrlColumn: () => o, isWebUrlColumn: () => a });var n = i(4806);function r(t, e, i) {if (t.categories && t.categories.length > 0) {const r = t.categories[0];return r.source && n.hasRole(r.source, e) && n.hasRole(r.source, i);}return !1;}function s(t) {return void 0 !== t.groupName ? t.groupName : t.queryName;}function o(t) {const e = l(t);return null != e && !0 === e.imageUrl;}function a(t) {const e = l(t);return null != e && !0 === e.webUrl;}function l(t) {return t && t.type && t.type.misc;}function c(t) {return !!(t && t.metadata && t.metadata.columns && t.metadata.columns.length) && t.metadata.columns.some((t) => !0 === o(t));}}, 4932: (t, e) => {"use strict";var i;Object.defineProperty(e, "__esModule", { value: !0 }), e.fixDateTimeFormat = e.findDateFormat = void 0, e.findDateFormat = function (t, e, i) {switch (e) {case "m":e = "M";break;case "O":case "o":e = "yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fff'0000'";break;case "R":case "r":t = new Date(t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate(), t.getUTCHours(), t.getUTCMinutes(), t.getUTCSeconds(), t.getUTCMilliseconds()), e = "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'";break;case "s":e = "S";break;case "u":t = new Date(t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate(), t.getUTCHours(), t.getUTCMinutes(), t.getUTCSeconds(), t.getUTCMilliseconds()), e = "yyyy'-'MM'-'dd HH':'mm':'ss'Z'";break;case "U":t = new Date(t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate(), t.getUTCHours(), t.getUTCMinutes(), t.getUTCSeconds(), t.getUTCMilliseconds()), e = "F";break;case "y":case "Y":switch (i) {case "default":case "en":case "en-US":e = "MMMM, yyyy";break;default:e = "Y";}}return { value: t, format: e };}, e.fixDateTimeFormat = function (t) {if (t = (t = (t = (t = (t = (t = (t = (t = t.replace(/%K/g, "zzz")).replace(/K/g, "zzz")).replace(/fffffff/g, "fff0000")).replace(/ffffff/g, "fff000")).replace(/fffff/g, "fff00")).replace(/ffff/g, "fff0")).replace(/yyyyy/g, "0yyyy")).replace(/(^y|^)yyy(^y|$)/g, "yyyy"), i || (i = ["d", "f", "F", "g", "h", "H", "K", "m", "M", "s", "t", "y", "z", ":", "/"].map(function (t) {return { r: new RegExp("%" + t + "(?!" + t + ")", "g"), s: t };})), -1 !== t.indexOf("%") && t.length > 2) for (var e = 0; e < i.length; e++) t = t.replace(i[e].r, i[e].s);return t;};}, 4939: (t, e, i) => {"use strict";i.d(e, { Ec: () => d, FA: () => l, Lw: () => o, RQ: () => u, RY: () => h, _Z: () => a, bk: () => m, fr: () => f, hz: () => p, nf: () => v, o5: () => g, oF: () => c, uC: () => y, z1: () => b });var n = i(1807),r = i(3515),s = i(756);function o(t, e) {return "colorScale" == t.mode ? a(t, e) : "conditions" != t.mode || l(t, e);}function a(t, e) {const i = "Not all comparison fields have been selected or are valid.";if (!t.colorScales || !t.colorScales.scalesByLevel) return "This rule is not valid.";const s = h(t.colorScales.field, e);if (!s) return "The main field has not been selected or is invalid.";const o = Object.keys(t.colorScales.scalesByLevel).filter((e) => t.colorScales.advanced ? e != r.UA : e == r.UA);for (const a of o) {const o = t.colorScales.scalesByLevel[a],l = ["min", "max"];o.center.color && l.push("center");for (let t = 0; t < l.length; t++) {const a = o[l[t]];if (!a) return "Some conditions are invalid.";if (a.mode == r.LF.FieldValue || a.mode == r.LF.Calc) {if (!(0, n.cKq)(a, "fieldValue")) return i;const t = h(a.fieldValue, e);if (!t) return i;if (t.queryName == s.queryName) return i;}}if (!t.colorScales.advanced) break;}return !0;}function l(t, e) {const i = "Not all comparison fields have been selected or are valid.",s = "Not all comparison values have been set.";if (!t.conditions || !t.conditions.conditions) return "Some conditions are invalid.";for (const o of Object.keys(t.conditions.conditions)) {const a = t.conditions.conditions[o],l = h(a.field, e);if (!l) return "The main field has not been selected or is invalid.";if (a.comparison == r.Uf.Between) {if (!(0, n.cKq)(a, "value") || null === a.value || isNaN(a.value) || !(0, n.cKq)(a, "value2") || null === a.value2 || isNaN(a.value2)) return s;} else if (a.comparison == r.Uf.Blank || a.comparison == r.Uf.NotBlank) ;else {if (!(a.mode != r.LF.Value && a.mode != r.LF.Calc || (0, n.cKq)(a, "value") && null !== a.value)) return s;if (a.mode == r.LF.FieldValue || a.mode == r.LF.Calc) {if (!(0, n.cKq)(a, "fieldValue")) return i;const t = h(a.fieldValue, e);if (!t) return i;if (t.queryName == l.queryName) return i;}if (a.mode == r.LF.Text && (!(0, n.cKq)(a, "text") || null === a.text || 0 == a.text.length)) return s;}}return !0;}function c(t, e) {let i = t.displayName;if (i.indexOf("{field}") >= 0) {let n = "missing field";if ("colorScale" == t.mode) {const i = h(t.colorScales.field, e);i && (n = i.displayName);}i = i.replace("{field}", n);}return (0, n.TF7)(i);}function h(t, e) {if (t) {const i = t.roleIndex ? t.roleIndex : 0;if ((0, n.cKq)(e, t.role) && (0, n.cKq)(e[t.role], i)) return e[t.role][i];}return null;}function u(t, e, i, n, r, o, a, l) {const c = [];c.push(e), a && c.push(o), c.push(n);const h = [];h.push(i), a && h.push(a), h.push(r);const u = l ? s.ZEH() : s.m4Y();l && u.base(Math.E), u.domain(c), u.range(h).clamp(!0);const d = u(t);return d ? { solid: { color: d.toString() } } : null;}function d(t, e) {let i = e[t] ? e[t].color : null;const r = "min" == t || "max" == t ? e["min" == t ? "max" : "min"].color : null;return !i && r && (i = (0, n.dyA)("min" == t ? .9 : -.9, r)), i || "";}function p(t, e, i) {const n = t.colorScales.scalesByLevel[e],s = (0, r.RU)(i);n ? ["max", "min", "center"].forEach((t) => {n[t] && !n[t].color && (n[t].color = s[t].color);}) : t.colorScales.scalesByLevel[e] = s;}function f(t, e, i, n, s) {const o = { min: i.min, max: i.max, center: (i.min + i.max) / 2 };for (const a of Object.keys(o)) {const l = t[a];let c = null;if (l.mode == r.LF.FieldValue || l.mode == r.LF.Calc) {const t = h(l.fieldValue, s);if (t) {for (const i of Object.keys(n)) if (i == t.queryName) {const t = y(n[i], e);"min" == a ? c = t.min : "max" == a ? c = t.max : "center" == a && (c = (t.max + t.min) / 2);break;}l.mode == r.LF.Calc && (l.calc == r.m.Minus ? c -= l.value : l.calc == r.m.Divide ? c /= l.value : l.calc == r.m.Times ? c *= l.value : c += l.value);}} else c = l.value;null == c || isNaN(c) || (l.mode == r.LF.Percentage && (c = v(l.value, i.min, i.max, "abs", e.colorScales.type == r.Qo.Logarithmic)), o[a] = c);}return o;}function g(t, e, i) {let s = "linear-gradient(to right, ";if (s += d("min", t) + " 0%, ", t.center.color) {let o = 50;if (void 0 !== e && void 0 !== i && (0, n.cKq)(t.center, "value") && null !== t.center.value && !isNaN(t.center.value)) {let s = e;(0, n.cKq)(t.min, "value") && null !== t.min.value && !isNaN(t.min.value) && (t.min.mode == r.LF.Value ? s = t.min.value : t.min.mode == r.LF.Percentage && (s = v(t.min.value, e, i, "abs")));let a = i;(0, n.cKq)(t.max, "value") && null !== t.max.value && !isNaN(t.max.value) && (t.max.mode == r.LF.Value ? a = t.max.value : t.max.mode == r.LF.Percentage && (a = v(t.max.value, e, i, "abs")));let l = (i - e) / 2 + e;t.center.mode == r.LF.Value ? l = t.center.value : t.center.mode == r.LF.Percentage && (l = v(t.center.value, e, i, "abs")), o = v(l, s, a, "perc");}s += t.center.color + " " + o + "%, ";}return s += d("max", t) + " 100%", s += ")", s;}function m(t, e, i) {if (t.mode == r.LF.FieldValue) return h(t.fieldValue, i).displayName;if (null != t.value) {const s = t.mode == r.LF.Calc || r.LF.Value ? n.ZA6.instance.create({ format: e, formatSingleValues: !1, value: t.value, precision: 0, displayUnitSystemType: 0, allowFormatBeautification: !0 }) : null;if (t.mode == r.LF.Value) return s.format(t.value);if (t.mode == r.LF.Percentage) return `${t.value}%`;if (t.mode == r.LF.Calc) {const e = h(t.fieldValue, i),n = ["+", "-", "", ""][t.calc || 0];return `${e.displayName} ${n} ${s.format(t.value)}`;}}return "";}function v(t, e, i, n, r = !1, s = !0) {if (null === t) return null;if (null === e && (e = 0), e == i) return null;let o = 0;return "perc" == n ? (o = r ? (Math.max(0, Math.log(t)) - Math.max(0, Math.log(e))) / (Math.max(0, Math.log(i)) - Math.max(0, Math.log(e))) * 100 : (t - e) / (i - e) * 100, o = Math.max(0, o)) : "abs" == n && (0 == t ? (o = e, s = !1) : 100 == t ? (o = i, s = !1) : o = r ? Math.exp(t * (Math.max(0, Math.log(i)) - Math.max(0, Math.log(e))) / 100 + Math.max(0, Math.log(e))) : t * (i - e) / 100 + e), s ? Math.round(o) : o;}function y(t, e, i = !1) {return "colorScale" != e.mode || e.colorScales.relative && !i ? t : t ? (0, n.t7l)(t) : { min: 0, max: 0 };}function b(t) {const e = t.map((t) => t.id);return t.filter((t, i) => !e.includes(t.id, i + 1));}}, 5032: (t, e, i) => {"use strict";const n = i(8311),r = i(3904),{ ANY: s } = r,o = i(7638),a = i(560),l = [new r(">=0.0.0-0")],c = [new r(">=0.0.0")],h = (t, e, i) => {if (t === e) return !0;if (1 === t.length && t[0].semver === s) {if (1 === e.length && e[0].semver === s) return !0;t = i.includePrerelease ? l : c;}if (1 === e.length && e[0].semver === s) {if (i.includePrerelease) return !0;e = c;}const n = new Set();let r, h, p, f, g, m, v;for (const e of t) ">" === e.operator || ">=" === e.operator ? r = u(r, e, i) : "<" === e.operator || "<=" === e.operator ? h = d(h, e, i) : n.add(e.semver);if (n.size > 1) return null;if (r && h) {if (p = a(r.semver, h.semver, i), p > 0) return null;if (0 === p && (">=" !== r.operator || "<=" !== h.operator)) return null;}for (const t of n) {if (r && !o(t, String(r), i)) return null;if (h && !o(t, String(h), i)) return null;for (const n of e) if (!o(t, String(n), i)) return !1;return !0;}let y = !(!h || i.includePrerelease || !h.semver.prerelease.length) && h.semver,b = !(!r || i.includePrerelease || !r.semver.prerelease.length) && r.semver;y && 1 === y.prerelease.length && "<" === h.operator && 0 === y.prerelease[0] && (y = !1);for (const t of e) {if (v = v || ">" === t.operator || ">=" === t.operator, m = m || "<" === t.operator || "<=" === t.operator, r) if (b && t.semver.prerelease && t.semver.prerelease.length && t.semver.major === b.major && t.semver.minor === b.minor && t.semver.patch === b.patch && (b = !1), ">" === t.operator || ">=" === t.operator) {if (f = u(r, t, i), f === t && f !== r) return !1;} else if (">=" === r.operator && !o(r.semver, String(t), i)) return !1;if (h) if (y && t.semver.prerelease && t.semver.prerelease.length && t.semver.major === y.major && t.semver.minor === y.minor && t.semver.patch === y.patch && (y = !1), "<" === t.operator || "<=" === t.operator) {if (g = d(h, t, i), g === t && g !== h) return !1;} else if ("<=" === h.operator && !o(h.semver, String(t), i)) return !1;if (!t.operator && (h || r) && 0 !== p) return !1;}return !(r && m && !h && 0 !== p || h && v && !r && 0 !== p || b || y);},u = (t, e, i) => {if (!t) return e;const n = a(t.semver, e.semver, i);return n > 0 ? t : n < 0 || ">" === e.operator && ">=" === t.operator ? e : t;},d = (t, e, i) => {if (!t) return e;const n = a(t.semver, e.semver, i);return n < 0 ? t : n > 0 || "<" === e.operator && "<=" === t.operator ? e : t;};t.exports = (t, e, i = {}) => {if (t === e) return !0;t = new n(t, i), e = new n(e, i);let r = !1;t: for (const n of t.set) {for (const t of e.set) {const e = h(n, t, i);if (r = r || null !== e, e) continue t;}if (r) return !1;}return !0;};}, 5038: (t, e, i) => {"use strict";function n(t, e) {return t === e || JSON.stringify(t) === JSON.stringify(e);}i.r(e), i.d(e, { equals: () => n });}, 5062: (t, e, i) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.calculateExactDigitsPrecision = e.getDisplayUnits = e.formatListOr = e.formatListAnd = e.getFormatStringByColumn = e.getFormatString = e.createDisplayUnitSystem = e.formatVariantMeasureValue = e.format = e.create = e.checkValueInBounds = e.createDefaultFormatter = e.setLocaleOptions = e.getFormatMetadata = e.getLocalizedString = e.DefaultDateFormat = e.DefaultNumericFormat = e.DefaultIntegerFormat = void 0;var n = i(3224),r = i(1520),s = i(1248),o = i(3100),a = i(7630),l = i(2087),c = i(724),h = l.valueType.ValueType,u = l.valueType.PrimitiveType,d = s,p = { "0.00 %;-0.00 %;0.00 %": "Percentage", "0.0 %;-0.0 %;0.0 %": "Percentage1" };e.DefaultIntegerFormat = "g", e.DefaultNumericFormat = "#,0.00", e.DefaultDateFormat = "d";var f = { NullValue: "(Blank)", BooleanTrue: "True", BooleanFalse: "False", NaNValue: "NaN", InfinityValue: "+Infinity", NegativeInfinityValue: "-Infinity", RestatementComma: "{0}, {1}", RestatementCompoundAnd: "{0} and {1}", RestatementCompoundOr: "{0} or {1}", DisplayUnitSystem_EAuto_Title: "Auto", DisplayUnitSystem_E0_Title: "None", DisplayUnitSystem_E3_LabelFormat: "{0}K", DisplayUnitSystem_E3_Title: "Thousands", DisplayUnitSystem_E6_LabelFormat: "{0}M", DisplayUnitSystem_E6_Title: "Millions", DisplayUnitSystem_E9_LabelFormat: "{0}bn", DisplayUnitSystem_E9_Title: "Billions", DisplayUnitSystem_E12_LabelFormat: "{0}T", DisplayUnitSystem_E12_Title: "Trillions", Percentage: "#,0.##%", Percentage1: "#,0.#%", TableTotalLabel: "Total", Tooltip_HighlightedValueDisplayName: "Highlighted", Funnel_PercentOfFirst: "Percent of first", Funnel_PercentOfPrevious: "Percent of previous", Funnel_PercentOfFirst_Highlight: "Percent of first (highlighted)", Funnel_PercentOfPrevious_Highlight: "Percent of previous (highlighted)", GeotaggingString_Continent: "continent", GeotaggingString_Continents: "continents", GeotaggingString_Country: "country", GeotaggingString_Countries: "countries", GeotaggingString_State: "state", GeotaggingString_States: "states", GeotaggingString_City: "city", GeotaggingString_Cities: "cities", GeotaggingString_Town: "town", GeotaggingString_Towns: "towns", GeotaggingString_Province: "province", GeotaggingString_Provinces: "provinces", GeotaggingString_County: "county", GeotaggingString_Counties: "counties", GeotaggingString_Village: "village", GeotaggingString_Villages: "villages", GeotaggingString_Post: "post", GeotaggingString_Zip: "zip", GeotaggingString_Code: "code", GeotaggingString_Place: "place", GeotaggingString_Places: "places", GeotaggingString_Address: "address", GeotaggingString_Addresses: "addresses", GeotaggingString_Street: "street", GeotaggingString_Streets: "streets", GeotaggingString_Longitude: "longitude", GeotaggingString_Longitude_Short: "lon", GeotaggingString_Longitude_Short2: "long", GeotaggingString_Latitude: "latitude", GeotaggingString_Latitude_Short: "lat", GeotaggingString_PostalCode: "postal code", GeotaggingString_PostalCodes: "postal codes", GeotaggingString_ZipCode: "zip code", GeotaggingString_ZipCodes: "zip codes", GeotaggingString_Territory: "territory", GeotaggingString_Territories: "territories" };e.getLocalizedString = function (t) {return f[t];};var g = { nullValue: f.NullValue, trueValue: f.BooleanTrue, falseValue: f.BooleanFalse, NaN: f.NaNValue, infinity: f.InfinityValue, negativeInfinity: f.NegativeInfinityValue, beautify: function (t) {return function (t) {var e = p[t];return e && f[e] || t;}(t);}, describe: function (t) {return function (t) {var e = -1 === t ? "Auto" : t.toString(),i = f["DisplayUnitSystem_E" + e + "_Title"],n = t <= 0 ? "{0}" : f["DisplayUnitSystem_E" + e + "_LabelFormat"];if (i || n) return { title: i, format: n };}(t);}, restatementComma: f.RestatementComma, restatementCompoundAnd: f.RestatementCompoundAnd, restatementCompoundOr: f.RestatementCompoundOr },m = { displayName: "", type: h.fromPrimitiveTypeAndCategory(u.DateTime) };function v(t, e, i) {var n = e ? g.beautify(t) : t;return { format: function (t) {return null == t ? g.nullValue : x({ value: t, cultureSelector: i, format: n });} };}function y(t) {if (null == t) return new n.DefaultDisplayUnitSystem(g.describe);switch (t) {case r.DisplayUnitSystemType.Default:return new n.DefaultDisplayUnitSystem(g.describe);case r.DisplayUnitSystemType.WholeUnits:return new n.WholeUnitsDisplayUnitSystem(g.describe);case r.DisplayUnitSystemType.Verbose:return new n.NoDisplayUnitSystem();case r.DisplayUnitSystemType.DataLabels:return new n.DataLabelsDisplayUnitSystem(g.describe);default:return new n.DefaultDisplayUnitSystem(g.describe);}}function b(t, i, n) {if (t) {if (i) {var r = c.dataViewObjects.getValue(t.objects, i);if (r) return r;}if (!n) {var s = t.type;if (s) {if (s.dateTime) return e.DefaultDateFormat;if (s.integer) return s.temporal && s.temporal.year ? "0" : e.DefaultIntegerFormat;if (s.numeric) return e.DefaultNumericFormat;}}}}function w(t, e) {var i;if (!t) return null;var n = t.length;if (n > 0) {i = t[0];for (var r = n - 1, s = 1, o = r; s < o; s++) {var a = t[s];i = d.format(g.restatementComma, i, a);}n > 1 && (a = t[r], i = d.format(e, i, a));} else i = null;return i;}function x(t) {var e = t.value,i = t.format,n = t.nullsAreBlank,r = t.cultureSelector,s = S(e, n || !1);return d.isNullOrUndefinedOrWhiteSpaceString(s) ? o.formattingService.formatValue(e, i, r) : s;}function S(t, e) {return null == t && e ? g.nullValue : !0 === t ? g.trueValue : !1 === t ? g.falseValue : "number" == typeof t && isNaN(t) ? g.NaN : t === Number.NEGATIVE_INFINITY ? g.negativeInfinity : t === Number.POSITIVE_INFINITY ? g.infinity : "";}e.getFormatMetadata = function (t) {return o.numberFormat.getCustomFormatMetadata(t);}, e.setLocaleOptions = function (t) {g = t, n.DefaultDisplayUnitSystem.RESET(), n.WholeUnitsDisplayUnitSystem.RESET();}, e.createDefaultFormatter = v, e.checkValueInBounds = function (t, e, i, n, r) {return void 0 === n && (n = e), void 0 === r && (r = i), null != i && (t = t <= i ? t : r), null != e && (t = t > e ? t : n), t;}, e.create = function (t) {var e,i,n,r = t.allowFormatBeautification ? g.beautify(t.format) : t.format,s = t.cultureSelector;if (function (t) {var e = t.value,i = t.value2,n = t.format;if (t.formatSingleValues && n && Math.abs(e) < 1e4) if (o.numberFormat.isStandardFormat(n)) {if (l.double.isInteger(e)) return !1;} else if (o.numberFormat.getCustomFormatMetadata(n, !0).precision < 2) return !1;if ("number" == typeof e || "number" == typeof i) return !0;}(t)) {var c = y(t.displayUnitSystemType),h = !!t.formatSingleValues;c.update(Math.max(Math.abs(t.value || 0), Math.abs(t.value2 || 0)));var u,p = null != t.precision;return p ? u = -t.precision : c.displayUnit && c.displayUnit.value > 1 && (u = -2), { format: function (t) {var e = S(t, !0);return d.isNullOrUndefinedOrWhiteSpaceString(e) ? (t && !c.isScalingUnit() && Math.abs(t) < 1e3 && !p && (t = l.double.roundToPrecision(t)), h ? c.formatSingleValue(t, r, u, p, s) : c.format(t, r, u, p, s)) : e;}, displayUnit: c.displayUnit, options: t };}if (e = t.value, i = t.value2, n = t.tickCount, e instanceof Date && i instanceof Date && null != n) {var f = a.DateTimeSequence.GET_INTERVAL_UNIT(t.value, t.value2, t.tickCount);return { format: function (t) {if (null == t) return g.nullValue;var e = o.formattingService.dateFormatString(f);return x({ value: t, cultureSelector: s, format: e });}, options: t };}return v(r, !1, s);}, e.format = function (t, e, i, n) {return null == t ? g.nullValue : x({ value: t, cultureSelector: n, format: i ? g.beautify(e) : e });}, e.formatVariantMeasureValue = function (t, e, i, n, r) {return !(e && e.type && e.type.dateTime) && t instanceof Date ? x({ value: t, nullsAreBlank: n, cultureSelector: r, format: b(m, null, !1) }) : x({ value: t, nullsAreBlank: n, cultureSelector: r, format: b(e, i) });}, e.createDisplayUnitSystem = y, e.getFormatString = b, e.getFormatStringByColumn = function (t, i) {if (t) {if (t.format) return t.format;if (!i) {var n = t.type;if (n) {if (n.dateTime) return e.DefaultDateFormat;if (n.integer) return n.temporal && n.temporal.year ? "0" : e.DefaultIntegerFormat;if (n.numeric) return e.DefaultNumericFormat;}}}}, e.formatListAnd = function (t) {return w(t, g.restatementCompoundAnd);}, e.formatListOr = function (t) {return w(t, g.restatementCompoundOr);}, e.getDisplayUnits = function (t) {return y(t).units;}, e.calculateExactDigitsPrecision = function (t, e, i, n) {if (!t && 0 !== t) return 0;var r = e && -1 !== e.indexOf("%"),s = r ? 100 * t : t;s = i > 0 ? s / i : s;var o = parseInt(s).toString().length;if ((r || i > 0) && o >= n) return 0;if (0 === i) {var a = Math.floor(o / 3);a = o % 3 == 0 ? a - 1 : a;var l = Math.pow(1e3, a);l > 0 && (s /= l);}var c = (o = parseInt(s).toString().length) % n;return 0 === c ? 0 : n - c;};}, 5079: (t, e, i) => {"use strict";i.r(e), i.d(e, { fromPoint: () => o, fromPointToPixel: () => a, toPoint: () => l, toString: () => s });const n = 4 / 3,r = "px";function s(t) {return t + r;}function o(t) {return s(a(t));}function a(t) {return n * t;}function l(t) {return t / n;}}, 5092: (t, e, i) => {"use strict";i.d(e, { b: () => s });var n = i(1807),r = i(1299);class s {element;landingPage;constructor(t) {this.element = t, this.draw();}draw() {this.landingPage || (this.landingPage = (0, n.tTh)(".visual-landing", this.element, [(0, n.tTh)(".message.icon.icon-info", "Select or drag fields to populate this visual"), (0, n.tTh)(".watermark"), (0, n.tTh)("a.logo", { attr: { href: r.tl.website, target: "_blank", title: "OKVIZ website" }, events: { click: (t) => {t.preventDefault();const e = t.currentTarget;thisVisual.host.launchUrl(e.href);} } })]));}destroy() {this.landingPage && (this.landingPage.remove(), this.landingPage = null);}}}, 5112: (t, e, i) => {"use strict";i.d(e, { y: () => o });var n = i(906),r = i(2216),s = i(1299);class o extends n.g {constructor() {super({ element: document.body, title: "My Storage Terms of Service", size: { width: "800px", height: "550px" }, buttons: [{ text: "Close", action: "cancel" }], boxClass: "msg-box-mystorage-tos" });}draw() {return this.create(), (0, r.h)(s.tl.docsMyStorageTermsEmbed, this.boxContent ?? document.body), super.draw();}}}, 5152: (t, e, i) => {"use strict";function n() {var t = arguments[0];return arguments[0] = this, t.apply(null, arguments), this;}i.d(e, { A: () => n });}, 5157: (t, e, i) => {"use strict";t.exports = i(6675);}, 5179: (t, e, i) => {"use strict";function n(t) {return t && "object" == typeof t && ["title", "status"].every((e) => e in t);}i.d(e, { A: () => n });}, 5182: (t, e, i) => {"use strict";function n() {return this.on("end.remove", (t = this._id, function () {var e = this.parentNode;for (var i in this.__transition) if (+i !== t) return;e && e.removeChild(this);}));var t;}i.d(e, { A: () => n });}, 5195: (t, e, i) => {"use strict";i.d(e, { Ku: () => o });var n = i(4653),r = i(6639),s = i(3753);class o extends n.T {data;element;options;constructor(t) {super(), this.options = { title: null, size: null, modal: !0, scale: 1, buttons: [], middleware: null, ...t };const e = (t) => {if ("Escape" == t.key) this.trigger("action", "cancel"), t.stopPropagation();else if (this.options.buttons) for (let e = 0; e < this.options.buttons.length; e++) {const i = this.options.buttons[e];if (i.key && t.key == i.key) {this.trigger("action", i.action), t.stopPropagation();break;}}};this.element = (0, r.tT)(".inline-dialog", { events: { click: () => {this.options.modal || this.trigger("action", "cancel");}, keydown: (t) => e(t) } });const i = (0, r.tT)(".content", this.element, { style: { transform: `scale(${1 / this.options.scale})` }, events: { click: (t) => t.stopPropagation() } });this.options.size && (this.options.size.width && (i.style.width = `${this.options.size.width}px`), this.options.size.height && (i.style.height = `${this.options.size.height}px`));const n = (0, r.tT)("header", i);this.options.title && (0, r.tT)("h1.title", n, this.options.title), (0, r.tT)("a.close.control.icon-close.solo", n, { attr: { href: "#" }, events: { click: (t) => {t.preventDefault(), this.trigger("action", "cancel");} } }), (0, r.tT)(".body", i, { middleware: (t) => this.options.middleware(t, this) }), (0, r.tT)("footer", i, { middleware: (t) => {this.options.buttons && this.options.buttons.forEach((e) => {(0, r.tT)(`#${(0, s.aH)(e.name)}.btn${e.className ? `.${e.className}` : ""}${e.disabled ? ".disabled" : ""}`, t, { data: { action: e.action }, events: { click: (t) => {t.preventDefault();const e = t.target;e.classList.contains("disabled") || this.trigger("action", e.dataset.action);} } }, e.name);});} });}show() {return document.body.appendChild(this.element), new Promise((t, e) => {this.on("action", (i) => {this.onAction(i, t, e);});});}hide() {this.element.classList.add("out");}destroy() {this.hide(), window.setTimeout(() => {document.body.removeChild(this.element), this.element = null, super.destroy();}, 300);}enableButton(t, e) {if (this.options.buttons) {const i = (0, r.VR)(`#${(0, s.aH)(t)}`, this.element);i.isNull || (e ? i.classList.remove("disabled") : i.classList.add("disabled"));}}onAction(t, e, i) {this.destroy(), e({ action: t, data: this.data });}}}, 5200: (t, e, i) => {"use strict";const n = i(560);t.exports = (t, e, i) => n(t, e, i) <= 0;}, 5204: (t, e, i) => {"use strict";function n(t) {return Math.abs(t = Math.round(t)) >= 1e21 ? t.toLocaleString("en").replace(/,/g, "") : t.toString(10);}function r(t, e) {if ((i = (t = e ? t.toExponential(e - 1) : t.toExponential()).indexOf("e")) < 0) return null;var i,n = t.slice(0, i);return [n.length > 1 ? n[0] + n.slice(2) : n, +t.slice(i + 1)];}i.d(e, { A: () => n, f: () => r });}, 5207: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(3363);function r(t, e) {var i = this._id;return arguments.length < 2 ? (0, n.Jt)(this.node(), i).on.on(t) : this.each(function (t, e, i) {var r,s,o = function (t) {return (t + "").trim().split(/^|\s+/).every(function (t) {var e = t.indexOf(".");return e >= 0 && (t = t.slice(0, e)), !t || "start" === t;});}(e) ? n.Ts : n.hZ;return function () {var n = o(this, t),a = n.on;a !== r && (s = (r = a).copy()).on(e, i), n.on = s;};}(i, t, e));}}, 5230: (t, e, i) => {"use strict";i.d(e, { Yc: () => Rt, b6: () => w, cL: () => N, pw: () => Ft });var n = i(6585),r = i(1371),s = i(5874),o = i(365);function a(t, e) {return ({ state: i, dispatch: n }) => {if (i.readOnly) return !1;let r = t(e, i);return !!r && (n(i.update(r)), !0);};}const l = a(f, 0),c = a(p, 0),h = a((t, e) => p(t, e, function (t) {let e = [];for (let i of t.selection.ranges) {let n = t.doc.lineAt(i.from),r = i.to <= n.to ? n : t.doc.lineAt(i.to);r.from > n.from && r.from == i.to && (r = i.to == n.to + 1 ? n : t.doc.lineAt(i.to - 1));let s = e.length - 1;s >= 0 && e[s].to > n.from ? e[s].to = r.to : e.push({ from: n.from + /^\s*/.exec(n.text)[0].length, to: r.to });}return e;}(e)), 0);function u(t, e) {let i = t.languageDataAt("commentTokens", e, 1);return i.length ? i[0] : {};}const d = 50;function p(t, e, i = e.selection.ranges) {let n = i.map((t) => u(e, t.from).block);if (!n.every((t) => t)) return null;let r = i.map((t, i) => function (t, { open: e, close: i }, n, r) {let s,o,a = t.sliceDoc(n - d, n),l = t.sliceDoc(r, r + d),c = /\s*$/.exec(a)[0].length,h = /^\s*/.exec(l)[0].length,u = a.length - c;if (a.slice(u - e.length, u) == e && l.slice(h, h + i.length) == i) return { open: { pos: n - c, margin: c && 1 }, close: { pos: r + h, margin: h && 1 } };r - n <= 2 * d ? s = o = t.sliceDoc(n, r) : (s = t.sliceDoc(n, n + d), o = t.sliceDoc(r - d, r));let p = /^\s*/.exec(s)[0].length,f = /\s*$/.exec(o)[0].length,g = o.length - f - i.length;return s.slice(p, p + e.length) == e && o.slice(g, g + i.length) == i ? { open: { pos: n + p + e.length, margin: /\s/.test(s.charAt(p + e.length)) ? 1 : 0 }, close: { pos: r - f - i.length, margin: /\s/.test(o.charAt(g - 1)) ? 1 : 0 } } : null;}(e, n[i], t.from, t.to));if (2 != t && !r.every((t) => t)) return { changes: e.changes(i.map((t, e) => r[e] ? [] : [{ from: t.from, insert: n[e].open + " " }, { from: t.to, insert: " " + n[e].close }])) };if (1 != t && r.some((t) => t)) {let t = [];for (let e, i = 0; i < r.length; i++) if (e = r[i]) {let r = n[i],{ open: s, close: o } = e;t.push({ from: s.pos - r.open.length, to: s.pos + s.margin }, { from: o.pos - o.margin, to: o.pos + r.close.length });}return { changes: t };}return null;}function f(t, e, i = e.selection.ranges) {let n = [],r = -1;for (let { from: t, to: s } of i) {let i = n.length,o = 1e9,a = u(e, t).line;if (a) {for (let i = t; i <= s;) {let l = e.doc.lineAt(i);if (l.from > r && (t == s || s > l.from)) {r = l.from;let t = /^\s*/.exec(l.text)[0].length,e = t == l.length,i = l.text.slice(t, t + a.length) == a ? t : -1;t < l.text.length && t < o && (o = t), n.push({ line: l, comment: i, token: a, indent: t, empty: e, single: !1 });}i = l.to + 1;}if (o < 1e9) for (let t = i; t < n.length; t++) n[t].indent < n[t].line.text.length && (n[t].indent = o);n.length == i + 1 && (n[i].single = !0);}}if (2 != t && n.some((t) => t.comment < 0 && (!t.empty || t.single))) {let t = [];for (let { line: e, token: i, indent: r, empty: s, single: o } of n) !o && s || t.push({ from: e.from + r, insert: i + " " });let i = e.changes(t);return { changes: i, selection: e.selection.map(i, 1) };}if (1 != t && n.some((t) => t.comment >= 0)) {let t = [];for (let { line: e, comment: i, token: r } of n) if (i >= 0) {let n = e.from + i,s = n + r.length;" " == e.text[s - e.from] && s++, t.push({ from: n, to: s });}return { changes: t };}return null;}const g = n.YH.define(),m = n.YH.define(),v = n.sj.define(),y = n.sj.define({ combine: (t) => (0, n.QR)(t, { minDepth: 100, newGroupDelay: 500, joinToEvent: (t, e) => e }, { minDepth: Math.max, newGroupDelay: Math.min, joinToEvent: (t, e) => (i, n) => t(i, n) || e(i, n) }) }),b = n.sU.define({ create: () => L.empty, update(t, e) {let i = e.state.facet(y),r = e.annotation(g);if (r) {let n = T.fromTransaction(e, r.selection),s = r.side,o = 0 == s ? t.undone : t.done;return o = n ? A(o, o.length, i.minDepth, n) : D(o, e.startState.selection), new L(0 == s ? r.rest : o, 0 == s ? o : r.rest);}let s = e.annotation(m);if ("full" != s && "before" != s || (t = t.isolate()), !1 === e.annotation(n.ZX.addToHistory)) return e.changes.empty ? t : t.addMapping(e.changes.desc);let o = T.fromTransaction(e),a = e.annotation(n.ZX.time),l = e.annotation(n.ZX.userEvent);return o ? t = t.addChanges(o, a, l, i, e) : e.selection && (t = t.addSelection(e.startState.selection, a, l, i.newGroupDelay)), "full" != s && "after" != s || (t = t.isolate()), t;}, toJSON: (t) => ({ done: t.done.map((t) => t.toJSON()), undone: t.undone.map((t) => t.toJSON()) }), fromJSON: (t) => new L(t.done.map(T.fromJSON), t.undone.map(T.fromJSON)) });function w(t = {}) {return [b, y.of(t), r.Lz.domEventHandlers({ beforeinput(t, e) {let i = "historyUndo" == t.inputType ? S : "historyRedo" == t.inputType ? E : null;return !!i && (t.preventDefault(), i(e));} })];}function x(t, e) {return function ({ state: i, dispatch: n }) {if (!e && i.readOnly) return !1;let r = i.field(b, !1);if (!r) return !1;let s = r.pop(t, i, e);return !!s && (n(s), !0);};}const S = x(0, !1),E = x(1, !1),C = x(0, !0),k = x(1, !0);class T {constructor(t, e, i, n, r) {this.changes = t, this.effects = e, this.mapped = i, this.startSelection = n, this.selectionsAfter = r;}setSelAfter(t) {return new T(this.changes, this.effects, this.mapped, this.startSelection, t);}toJSON() {var t, e, i;return { changes: null === (t = this.changes) || void 0 === t ? void 0 : t.toJSON(), mapped: null === (e = this.mapped) || void 0 === e ? void 0 : e.toJSON(), startSelection: null === (i = this.startSelection) || void 0 === i ? void 0 : i.toJSON(), selectionsAfter: this.selectionsAfter.map((t) => t.toJSON()) };}static fromJSON(t) {return new T(t.changes && n.VR.fromJSON(t.changes), [], t.mapped && n.Gu.fromJSON(t.mapped), t.startSelection && n.OF.fromJSON(t.startSelection), t.selectionsAfter.map(n.OF.fromJSON));}static fromTransaction(t, e) {let i = _;for (let e of t.startState.facet(v)) {let n = e(t);n.length && (i = i.concat(n));}return !i.length && t.changes.empty ? null : new T(t.changes.invert(t.startState.doc), i, void 0, e || t.startState.selection, _);}static selection(t) {return new T(void 0, _, void 0, void 0, t);}}function A(t, e, i, n) {let r = e + 1 > i + 20 ? e - i - 1 : 0,s = t.slice(r, e);return s.push(n), s;}function M(t, e) {return t.length ? e.length ? t.concat(e) : t : e;}const _ = [],P = 200;function D(t, e) {if (t.length) {let i = t[t.length - 1],n = i.selectionsAfter.slice(Math.max(0, i.selectionsAfter.length - P));return n.length && n[n.length - 1].eq(e) ? t : (n.push(e), A(t, t.length - 1, 1e9, i.setSelAfter(n)));}return [T.selection([e])];}function O(t) {let e = t[t.length - 1],i = t.slice();return i[t.length - 1] = e.setSelAfter(e.selectionsAfter.slice(0, e.selectionsAfter.length - 1)), i;}function I(t, e) {if (!t.length) return t;let i = t.length,n = _;for (; i;) {let r = F(t[i - 1], e, n);if (r.changes && !r.changes.empty || r.effects.length) {let e = t.slice(0, i);return e[i - 1] = r, e;}e = r.mapped, i--, n = r.selectionsAfter;}return n.length ? [T.selection(n)] : _;}function F(t, e, i) {let r = M(t.selectionsAfter.length ? t.selectionsAfter.map((t) => t.map(e)) : _, i);if (!t.changes) return T.selection(r);let s = t.changes.map(e),o = e.mapDesc(t.changes, !0),a = t.mapped ? t.mapped.composeDesc(o) : o;return new T(s, n.Pe.mapEffects(t.effects, e), a, t.startSelection.map(o), r);}const R = /^(input\.type|delete)($|\.)/;class L {constructor(t, e, i = 0, n = void 0) {this.done = t, this.undone = e, this.prevTime = i, this.prevUserEvent = n;}isolate() {return this.prevTime ? new L(this.done, this.undone) : this;}addChanges(t, e, i, r, s) {let o = this.done,a = o[o.length - 1];return o = a && a.changes && !a.changes.empty && t.changes && (!i || R.test(i)) && (!a.selectionsAfter.length && e - this.prevTime < r.newGroupDelay && r.joinToEvent(s, function (t, e) {let i = [],n = !1;return t.iterChangedRanges((t, e) => i.push(t, e)), e.iterChangedRanges((t, e, r, s) => {for (let t = 0; t < i.length;) {let e = i[t++],o = i[t++];s >= e && r <= o && (n = !0);}}), n;}(a.changes, t.changes)) || "input.type.compose" == i) ? A(o, o.length - 1, r.minDepth, new T(t.changes.compose(a.changes), M(n.Pe.mapEffects(t.effects, a.changes), a.effects), a.mapped, a.startSelection, _)) : A(o, o.length, r.minDepth, t), new L(o, _, e, i);}addSelection(t, e, i, n) {let r = this.done.length ? this.done[this.done.length - 1].selectionsAfter : _;return r.length > 0 && e - this.prevTime < n && i == this.prevUserEvent && i && /^select($|\.)/.test(i) && (s = r[r.length - 1], o = t, s.ranges.length == o.ranges.length && 0 === s.ranges.filter((t, e) => t.empty != o.ranges[e].empty).length) ? this : new L(D(this.done, t), this.undone, e, i);var s, o;}addMapping(t) {return new L(I(this.done, t), I(this.undone, t), this.prevTime, this.prevUserEvent);}pop(t, e, i) {let n = 0 == t ? this.done : this.undone;if (0 == n.length) return null;let r = n[n.length - 1],s = r.selectionsAfter[0] || e.selection;if (i && r.selectionsAfter.length) return e.update({ selection: r.selectionsAfter[r.selectionsAfter.length - 1], annotations: g.of({ side: t, rest: O(n), selection: s }), userEvent: 0 == t ? "select.undo" : "select.redo", scrollIntoView: !0 });if (r.changes) {let i = 1 == n.length ? _ : n.slice(0, n.length - 1);return r.mapped && (i = I(i, r.mapped)), e.update({ changes: r.changes, selection: r.startSelection, effects: r.effects, annotations: g.of({ side: t, rest: i, selection: s }), filter: !1, userEvent: 0 == t ? "undo" : "redo", scrollIntoView: !0 });}return null;}}L.empty = new L(_, _);const N = [{ key: "Mod-z", run: S, preventDefault: !0 }, { key: "Mod-y", mac: "Mod-Shift-z", run: E, preventDefault: !0 }, { linux: "Ctrl-Shift-z", run: E, preventDefault: !0 }, { key: "Mod-u", run: C, preventDefault: !0 }, { key: "Alt-u", mac: "Mod-Shift-u", run: k, preventDefault: !0 }];function V(t, e) {return n.OF.create(t.ranges.map(e), t.mainIndex);}function B(t, e) {return t.update({ selection: e, scrollIntoView: !0, userEvent: "select" });}function j({ state: t, dispatch: e }, i) {let n = V(t.selection, i);return !n.eq(t.selection, !0) && (e(B(t, n)), !0);}function z(t, e) {return n.OF.cursor(e ? t.to : t.from);}function U(t, e) {return j(t, (i) => i.empty ? t.moveByChar(i, e) : z(i, e));}function H(t) {return t.textDirectionAt(t.state.selection.main.head) == r.OP.LTR;}const q = (t) => U(t, !H(t)),$ = (t) => U(t, H(t));function G(t, e) {return j(t, (i) => i.empty ? t.moveByGroup(i, e) : z(i, e));}function W(t, e, i) {if (e.type.prop(i)) return !0;let n = e.to - e.from;return n && (n > 2 || /[^\s,.;:]/.test(t.sliceDoc(e.from, e.to))) || e.firstChild;}function K(t, e, i) {let r,a,l = (0, s.mv)(t).resolveInner(e.head),c = i ? o.uY.closedBy : o.uY.openedBy;for (let n = e.head;;) {let e = i ? l.childAfter(n) : l.childBefore(n);if (!e) break;W(t, e, c) ? l = e : n = i ? e.to : e.from;}return a = l.type.prop(c) && (r = i ? (0, s.jU)(t, l.from, 1) : (0, s.jU)(t, l.to, -1)) && r.matched ? i ? r.end.to : r.end.from : i ? l.to : l.from, n.OF.cursor(a, i ? -1 : 1);}function Z(t, e) {return j(t, (i) => {if (!i.empty) return z(i, e);let n = t.moveVertically(i, e);return n.head != i.head ? n : t.moveToLineBoundary(i, e);});}"undefined" != typeof Intl && Intl.Segmenter;const Y = (t) => Z(t, !1),X = (t) => Z(t, !0);function J(t) {let e,i = t.scrollDOM.clientHeight < t.scrollDOM.scrollHeight - 2,n = 0,s = 0;if (i) {for (let e of t.state.facet(r.Lz.scrollMargins)) {let i = e(t);(null == i ? void 0 : i.top) && (n = Math.max(null == i ? void 0 : i.top, n)), (null == i ? void 0 : i.bottom) && (s = Math.max(null == i ? void 0 : i.bottom, s));}e = t.scrollDOM.clientHeight - n - s;} else e = (t.dom.ownerDocument.defaultView || window).innerHeight;return { marginTop: n, marginBottom: s, selfScroll: i, height: Math.max(t.defaultLineHeight, e - 5) };}function Q(t, e) {let i,n = J(t),{ state: s } = t,o = V(s.selection, (i) => i.empty ? t.moveVertically(i, e, n.height) : z(i, e));if (o.eq(s.selection)) return !1;if (n.selfScroll) {let e = t.coordsAtPos(s.selection.main.head),a = t.scrollDOM.getBoundingClientRect(),l = a.top + n.marginTop,c = a.bottom - n.marginBottom;e && e.top > l && e.bottom < c && (i = r.Lz.scrollIntoView(o.main.head, { y: "start", yMargin: e.top - l }));}return t.dispatch(B(s, o), { effects: i }), !0;}const tt = (t) => Q(t, !1),et = (t) => Q(t, !0);function it(t, e, i) {let r = t.lineBlockAt(e.head),s = t.moveToLineBoundary(e, i);if (s.head == e.head && s.head != (i ? r.to : r.from) && (s = t.moveToLineBoundary(e, i, !1)), !i && s.head == r.from && r.length) {let i = /^\s*/.exec(t.state.sliceDoc(r.from, Math.min(r.from + 100, r.to)))[0].length;i && e.head != r.from + i && (s = n.OF.cursor(r.from + i));}return s;}function nt(t, e) {let i = V(t.state.selection, (t) => {let i = e(t);return n.OF.range(t.anchor, i.head, i.goalColumn, i.bidiLevel || void 0);});return !i.eq(t.state.selection) && (t.dispatch(B(t.state, i)), !0);}function rt(t, e) {return nt(t, (i) => t.moveByChar(i, e));}const st = (t) => rt(t, !H(t)),ot = (t) => rt(t, H(t));function at(t, e) {return nt(t, (i) => t.moveByGroup(i, e));}function lt(t, e) {return nt(t, (i) => t.moveVertically(i, e));}const ct = (t) => lt(t, !1),ht = (t) => lt(t, !0);function ut(t, e) {return nt(t, (i) => t.moveVertically(i, e, J(t).height));}const dt = (t) => ut(t, !1),pt = (t) => ut(t, !0),ft = ({ state: t, dispatch: e }) => (e(B(t, { anchor: 0 })), !0),gt = ({ state: t, dispatch: e }) => (e(B(t, { anchor: t.doc.length })), !0),mt = ({ state: t, dispatch: e }) => (e(B(t, { anchor: t.selection.main.anchor, head: 0 })), !0),vt = ({ state: t, dispatch: e }) => (e(B(t, { anchor: t.selection.main.anchor, head: t.doc.length })), !0);function yt(t, e) {let { state: i } = t,r = i.selection,s = i.selection.ranges.slice();for (let n of i.selection.ranges) {let r = i.doc.lineAt(n.head);if (e ? r.to < t.state.doc.length : r.from > 0) for (let i = n;;) {let n = t.moveVertically(i, e);if (n.head < r.from || n.head > r.to) {s.some((t) => t.head == n.head) || s.push(n);break;}if (n.head == i.head) break;i = n;}}return s.length != r.ranges.length && (t.dispatch(B(i, n.OF.create(s, s.length - 1))), !0);}function bt(t, e) {if (t.state.readOnly) return !1;let i = "delete.selection",{ state: s } = t,o = s.changeByRange((r) => {let { from: s, to: o } = r;if (s == o) {let n = e(r);n < s ? (i = "delete.backward", n = wt(t, n, !1)) : n > s && (i = "delete.forward", n = wt(t, n, !0)), s = Math.min(s, n), o = Math.max(o, n);} else s = wt(t, s, !1), o = wt(t, o, !0);return s == o ? { range: r } : { changes: { from: s, to: o }, range: n.OF.cursor(s, s < r.head ? -1 : 1) };});return !o.changes.empty && (t.dispatch(s.update(o, { scrollIntoView: !0, userEvent: i, effects: "delete.selection" == i ? r.Lz.announce.of(s.phrase("Selection deleted")) : void 0 })), !0);}function wt(t, e, i) {if (t instanceof r.Lz) for (let n of t.state.facet(r.Lz.atomicRanges).map((e) => e(t))) n.between(e, e, (t, n) => {t < e && n > e && (e = i ? n : t);});return e;}const xt = (t, e, i) => bt(t, (r) => {let o,a,l = r.from,{ state: c } = t,h = c.doc.lineAt(l);if (i && !e && l > h.from && l < h.from + 200 && !/[^ \t]/.test(o = h.text.slice(0, l - h.from))) {if ("\t" == o[o.length - 1]) return l - 1;let t = (0, n.y$)(o, c.tabSize) % (0, s.tp)(c) || (0, s.tp)(c);for (let e = 0; e < t && " " == o[o.length - 1 - e]; e++) l--;a = l;} else a = (0, n.zK)(h.text, l - h.from, e, e) + h.from, a == l && h.number != (e ? c.doc.lines : 1) ? a += e ? 1 : -1 : !e && /[\ufe00-\ufe0f]/.test(h.text.slice(a - h.from, l - h.from)) && (a = (0, n.zK)(h.text, a - h.from, !1, !1) + h.from);return a;}),St = (t) => xt(t, !1, !0),Et = (t) => xt(t, !0, !1),Ct = (t, e) => bt(t, (i) => {let r = i.head,{ state: s } = t,o = s.doc.lineAt(r),a = s.charCategorizer(r);for (let t = null;;) {if (r == (e ? o.to : o.from)) {r == i.head && o.number != (e ? s.doc.lines : 1) && (r += e ? 1 : -1);break;}let l = (0, n.zK)(o.text, r - o.from, e) + o.from,c = o.text.slice(Math.min(r, l) - o.from, Math.max(r, l) - o.from),h = a(c);if (null != t && h != t) break;" " == c && r == i.head || (t = h), r = l;}return r;}),kt = (t) => Ct(t, !1);function Tt(t) {let e = [],i = -1;for (let n of t.selection.ranges) {let r = t.doc.lineAt(n.from),s = t.doc.lineAt(n.to);if (n.empty || n.to != s.from || (s = t.doc.lineAt(n.to - 1)), i >= r.number) {let t = e[e.length - 1];t.to = s.to, t.ranges.push(n);} else e.push({ from: r.from, to: s.to, ranges: [n] });i = s.number + 1;}return e;}function At(t, e, i) {if (t.readOnly) return !1;let r = [],s = [];for (let e of Tt(t)) {if (i ? e.to == t.doc.length : 0 == e.from) continue;let o = t.doc.lineAt(i ? e.to + 1 : e.from - 1),a = o.length + 1;if (i) {r.push({ from: e.to, to: o.to }, { from: e.from, insert: o.text + t.lineBreak });for (let i of e.ranges) s.push(n.OF.range(Math.min(t.doc.length, i.anchor + a), Math.min(t.doc.length, i.head + a)));} else {r.push({ from: o.from, to: e.from }, { from: e.to, insert: t.lineBreak + o.text });for (let t of e.ranges) s.push(n.OF.range(t.anchor - a, t.head - a));}}return !!r.length && (e(t.update({ changes: r, scrollIntoView: !0, selection: n.OF.create(s, t.selection.mainIndex), userEvent: "move.line" })), !0);}function Mt(t, e, i) {if (t.readOnly) return !1;let n = [];for (let e of Tt(t)) i ? n.push({ from: e.from, insert: t.doc.slice(e.from, e.to) + t.lineBreak }) : n.push({ from: e.to, insert: t.lineBreak + t.doc.slice(e.from, e.to) });return e(t.update({ changes: n, scrollIntoView: !0, userEvent: "input.copyline" })), !0;}const _t = Pt(!1);function Pt(t) {return ({ state: e, dispatch: i }) => {if (e.readOnly) return !1;let r = e.changeByRange((i) => {let { from: r, to: a } = i,l = e.doc.lineAt(r),c = !t && r == a && function (t, e) {if (/\(\)|\[\]|\{\}/.test(t.sliceDoc(e - 1, e + 1))) return { from: e, to: e };let i,n = (0, s.mv)(t).resolveInner(e),r = n.childBefore(e),a = n.childAfter(e);return r && a && r.to <= e && a.from >= e && (i = r.type.prop(o.uY.closedBy)) && i.indexOf(a.name) > -1 && t.doc.lineAt(r.to).from == t.doc.lineAt(a.from).from && !/\S/.test(t.sliceDoc(r.to, a.from)) ? { from: r.to, to: a.from } : null;}(e, r);t && (r = a = (a <= l.to ? l : e.doc.lineAt(a)).to);let h = new s.KB(e, { simulateBreak: r, simulateDoubleBreak: !!c }),u = (0, s._v)(h, r);for (null == u && (u = (0, n.y$)(/^\s*/.exec(e.doc.lineAt(r).text)[0], e.tabSize)); a < l.to && /\s/.test(l.text[a - l.from]);) a++;c ? { from: r, to: a } = c : r > l.from && r < l.from + 100 && !/\S/.test(l.text.slice(0, r)) && (r = l.from);let d = ["", (0, s.EI)(e, u)];return c && d.push((0, s.EI)(e, h.lineIndent(l.from, -1))), { changes: { from: r, to: a, insert: n.EY.of(d) }, range: n.OF.cursor(r + 1 + d[1].length) };});return i(e.update(r, { scrollIntoView: !0, userEvent: "input" })), !0;};}function Dt(t, e) {let i = -1;return t.changeByRange((r) => {let s = [];for (let n = r.from; n <= r.to;) {let o = t.doc.lineAt(n);o.number > i && (r.empty || r.to > o.from) && (e(o, s, r), i = o.number), n = o.to + 1;}let o = t.changes(s);return { changes: s, range: n.OF.range(o.mapPos(r.anchor, 1), o.mapPos(r.head, 1)) };});}const Ot = ({ state: t, dispatch: e }) => !t.readOnly && (e(t.update(Dt(t, (e, i) => {i.push({ from: e.from, insert: t.facet(s.Xt) });}), { userEvent: "input.indent" })), !0),It = ({ state: t, dispatch: e }) => !t.readOnly && (e(t.update(Dt(t, (e, i) => {let r = /^\s*/.exec(e.text)[0];if (!r) return;let o = (0, n.y$)(r, t.tabSize),a = 0,l = (0, s.EI)(t, Math.max(0, o - (0, s.tp)(t)));for (; a < r.length && a < l.length && r.charCodeAt(a) == l.charCodeAt(a);) a++;i.push({ from: e.from + a, to: e.from + r.length, insert: l.slice(a) });}), { userEvent: "delete.dedent" })), !0),Ft = [{ key: "Alt-ArrowLeft", mac: "Ctrl-ArrowLeft", run: (t) => j(t, (e) => K(t.state, e, !H(t))), shift: (t) => nt(t, (e) => K(t.state, e, !H(t))) }, { key: "Alt-ArrowRight", mac: "Ctrl-ArrowRight", run: (t) => j(t, (e) => K(t.state, e, H(t))), shift: (t) => nt(t, (e) => K(t.state, e, H(t))) }, { key: "Alt-ArrowUp", run: ({ state: t, dispatch: e }) => At(t, e, !1) }, { key: "Shift-Alt-ArrowUp", run: ({ state: t, dispatch: e }) => Mt(t, e, !1) }, { key: "Alt-ArrowDown", run: ({ state: t, dispatch: e }) => At(t, e, !0) }, { key: "Shift-Alt-ArrowDown", run: ({ state: t, dispatch: e }) => Mt(t, e, !0) }, { key: "Mod-Alt-ArrowUp", run: (t) => yt(t, !1) }, { key: "Mod-Alt-ArrowDown", run: (t) => yt(t, !0) }, { key: "Escape", run: ({ state: t, dispatch: e }) => {let i = t.selection,r = null;return i.ranges.length > 1 ? r = n.OF.create([i.main]) : i.main.empty || (r = n.OF.create([n.OF.cursor(i.main.head)])), !!r && (e(B(t, r)), !0);} }, { key: "Mod-Enter", run: Pt(!0) }, { key: "Alt-l", mac: "Ctrl-l", run: ({ state: t, dispatch: e }) => {let i = Tt(t).map(({ from: e, to: i }) => n.OF.range(e, Math.min(i + 1, t.doc.length)));return e(t.update({ selection: n.OF.create(i), userEvent: "select" })), !0;} }, { key: "Mod-i", run: ({ state: t, dispatch: e }) => {let i = V(t.selection, (e) => {let i = (0, s.mv)(t),r = i.resolveStack(e.from, 1);if (e.empty) {let t = i.resolveStack(e.from, -1);t.node.from >= r.node.from && t.node.to <= r.node.to && (r = t);}for (let t = r; t; t = t.next) {let { node: i } = t;if ((i.from < e.from && i.to >= e.to || i.to > e.to && i.from <= e.from) && t.next) return n.OF.range(i.to, i.from);}return e;});return !i.eq(t.selection) && (e(B(t, i)), !0);}, preventDefault: !0 }, { key: "Mod-[", run: It }, { key: "Mod-]", run: Ot }, { key: "Mod-Alt-\\", run: ({ state: t, dispatch: e }) => {if (t.readOnly) return !1;let i = Object.create(null),n = new s.KB(t, { overrideIndentation: (t) => {let e = i[t];return null == e ? -1 : e;} }),r = Dt(t, (e, r, o) => {let a = (0, s._v)(n, e.from);if (null == a) return;/\S/.test(e.text) || (a = 0);let l = /^\s*/.exec(e.text)[0],c = (0, s.EI)(t, a);(l != c || o.from < e.from + l.length) && (i[e.from] = a, r.push({ from: e.from, to: e.from + l.length, insert: c }));});return r.changes.empty || e(t.update(r, { userEvent: "indent" })), !0;} }, { key: "Shift-Mod-k", run: (t) => {if (t.state.readOnly) return !1;let { state: e } = t,i = e.changes(Tt(e).map(({ from: t, to: i }) => (t > 0 ? t-- : i < e.doc.length && i++, { from: t, to: i }))),n = V(e.selection, (e) => {let i;if (t.lineWrapping) {let n = t.lineBlockAt(e.head),r = t.coordsAtPos(e.head, e.assoc || 1);r && (i = n.bottom + t.documentTop - r.bottom + t.defaultLineHeight / 2);}return t.moveVertically(e, !0, i);}).map(i);return t.dispatch({ changes: i, selection: n, scrollIntoView: !0, userEvent: "delete.line" }), !0;} }, { key: "Shift-Mod-\\", run: ({ state: t, dispatch: e }) => function (t, e, i) {let r = !1,o = V(t.selection, (e) => {let o = (0, s.jU)(t, e.head, -1) || (0, s.jU)(t, e.head, 1) || e.head > 0 && (0, s.jU)(t, e.head - 1, 1) || e.head < t.doc.length && (0, s.jU)(t, e.head + 1, -1);if (!o || !o.end) return e;r = !0;let a = o.start.from == e.head ? o.end.to : o.end.from;return i ? n.OF.range(e.anchor, a) : n.OF.cursor(a);});return !!r && (e(B(t, o)), !0);}(t, e, !1) }, { key: "Mod-/", run: (t) => {let { state: e } = t,i = e.doc.lineAt(e.selection.main.from),n = u(t.state, i.from);return n.line ? l(t) : !!n.block && h(t);} }, { key: "Alt-A", run: c }, { key: "Ctrl-m", mac: "Shift-Alt-m", run: (t) => (t.setTabFocusMode(), !0) }].concat([{ key: "ArrowLeft", run: q, shift: st, preventDefault: !0 }, { key: "Mod-ArrowLeft", mac: "Alt-ArrowLeft", run: (t) => G(t, !H(t)), shift: (t) => at(t, !H(t)), preventDefault: !0 }, { mac: "Cmd-ArrowLeft", run: (t) => j(t, (e) => it(t, e, !H(t))), shift: (t) => nt(t, (e) => it(t, e, !H(t))), preventDefault: !0 }, { key: "ArrowRight", run: $, shift: ot, preventDefault: !0 }, { key: "Mod-ArrowRight", mac: "Alt-ArrowRight", run: (t) => G(t, H(t)), shift: (t) => at(t, H(t)), preventDefault: !0 }, { mac: "Cmd-ArrowRight", run: (t) => j(t, (e) => it(t, e, H(t))), shift: (t) => nt(t, (e) => it(t, e, H(t))), preventDefault: !0 }, { key: "ArrowUp", run: Y, shift: ct, preventDefault: !0 }, { mac: "Cmd-ArrowUp", run: ft, shift: mt }, { mac: "Ctrl-ArrowUp", run: tt, shift: dt }, { key: "ArrowDown", run: X, shift: ht, preventDefault: !0 }, { mac: "Cmd-ArrowDown", run: gt, shift: vt }, { mac: "Ctrl-ArrowDown", run: et, shift: pt }, { key: "PageUp", run: tt, shift: dt }, { key: "PageDown", run: et, shift: pt }, { key: "Home", run: (t) => j(t, (e) => it(t, e, !1)), shift: (t) => nt(t, (e) => it(t, e, !1)), preventDefault: !0 }, { key: "Mod-Home", run: ft, shift: mt }, { key: "End", run: (t) => j(t, (e) => it(t, e, !0)), shift: (t) => nt(t, (e) => it(t, e, !0)), preventDefault: !0 }, { key: "Mod-End", run: gt, shift: vt }, { key: "Enter", run: _t, shift: _t }, { key: "Mod-a", run: ({ state: t, dispatch: e }) => (e(t.update({ selection: { anchor: 0, head: t.doc.length }, userEvent: "select" })), !0) }, { key: "Backspace", run: St, shift: St, preventDefault: !0 }, { key: "Delete", run: Et, preventDefault: !0 }, { key: "Mod-Backspace", mac: "Alt-Backspace", run: kt, preventDefault: !0 }, { key: "Mod-Delete", mac: "Alt-Delete", run: (t) => Ct(t, !0), preventDefault: !0 }, { mac: "Mod-Backspace", run: (t) => bt(t, (e) => {let i = t.moveToLineBoundary(e, !1).head;return e.head > i ? i : Math.max(0, e.head - 1);}), preventDefault: !0 }, { mac: "Mod-Delete", run: (t) => bt(t, (e) => {let i = t.moveToLineBoundary(e, !0).head;return e.head < i ? i : Math.min(t.state.doc.length, e.head + 1);}), preventDefault: !0 }].concat([{ key: "Ctrl-b", run: q, shift: st, preventDefault: !0 }, { key: "Ctrl-f", run: $, shift: ot }, { key: "Ctrl-p", run: Y, shift: ct }, { key: "Ctrl-n", run: X, shift: ht }, { key: "Ctrl-a", run: (t) => j(t, (e) => n.OF.cursor(t.lineBlockAt(e.head).from, 1)), shift: (t) => nt(t, (e) => n.OF.cursor(t.lineBlockAt(e.head).from)) }, { key: "Ctrl-e", run: (t) => j(t, (e) => n.OF.cursor(t.lineBlockAt(e.head).to, -1)), shift: (t) => nt(t, (e) => n.OF.cursor(t.lineBlockAt(e.head).to)) }, { key: "Ctrl-d", run: Et }, { key: "Ctrl-h", run: St }, { key: "Ctrl-k", run: (t) => bt(t, (e) => {let i = t.lineBlockAt(e.head).to;return e.head < i ? i : Math.min(t.state.doc.length, e.head + 1);}) }, { key: "Ctrl-Alt-h", run: kt }, { key: "Ctrl-o", run: ({ state: t, dispatch: e }) => {if (t.readOnly) return !1;let i = t.changeByRange((t) => ({ changes: { from: t.from, to: t.to, insert: n.EY.of(["", ""]) }, range: n.OF.cursor(t.from) }));return e(t.update(i, { scrollIntoView: !0, userEvent: "input" })), !0;} }, { key: "Ctrl-t", run: ({ state: t, dispatch: e }) => {if (t.readOnly) return !1;let i = t.changeByRange((e) => {if (!e.empty || 0 == e.from || e.from == t.doc.length) return { range: e };let i = e.from,r = t.doc.lineAt(i),s = i == r.from ? i - 1 : (0, n.zK)(r.text, i - r.from, !1) + r.from,o = i == r.to ? i + 1 : (0, n.zK)(r.text, i - r.from, !0) + r.from;return { changes: { from: s, to: o, insert: t.doc.slice(i, o).append(t.doc.slice(s, i)) }, range: n.OF.cursor(o) };});return !i.changes.empty && (e(t.update(i, { scrollIntoView: !0, userEvent: "move.character" })), !0);} }, { key: "Ctrl-v", run: et }].map((t) => ({ mac: t.key, run: t.run, shift: t.shift })))),Rt = { key: "Tab", run: Ot, shift: It };}, 5232: (t, e, i) => {"use strict";function n(t, e, i) {var n = this.enter(),r = this,s = this.exit();return "function" == typeof t ? (n = t(n)) && (n = n.selection()) : n = n.append(t + ""), null != e && (r = e(r)) && (r = r.selection()), null == i ? s.remove() : i(s), n && r ? n.merge(r).order() : r;}i.d(e, { A: () => n });}, 5233: (t, e, i) => {"use strict";function n(t) {return function () {var e = this.__on;if (e) {for (var i, n = 0, r = -1, s = e.length; n < s; ++n) i = e[n], t.type && i.type !== t.type || i.name !== t.name ? e[++r] = i : this.removeEventListener(i.type, i.listener, i.options);++r ? e.length = r : delete this.__on;}};}function r(t, e, i) {return function () {var n,r = this.__on,s = function (t) {return function (e) {t.call(this, e, this.__data__);};}(e);if (r) for (var o = 0, a = r.length; o < a; ++o) if ((n = r[o]).type === t.type && n.name === t.name) return this.removeEventListener(n.type, n.listener, n.options), this.addEventListener(n.type, n.listener = s, n.options = i), void (n.value = e);this.addEventListener(t.type, s, i), n = { type: t.type, name: t.name, value: e, listener: s, options: i }, r ? r.push(n) : this.__on = [n];};}function s(t, e, i) {var s,o,a = function (t) {return t.trim().split(/^|\s+/).map(function (t) {var e = "",i = t.indexOf(".");return i >= 0 && (e = t.slice(i + 1), t = t.slice(0, i)), { type: t, name: e };});}(t + ""),l = a.length;if (!(arguments.length < 2)) {for (c = e ? r : n, s = 0; s < l; ++s) this.each(c(a[s], e, i));return this;}var c = this.node().__on;if (c) for (var h, u = 0, d = c.length; u < d; ++u) for (s = 0, h = c[u]; s < l; ++s) if ((o = a[s]).type === h.type && o.name === h.name) return h.value;}i.d(e, { A: () => s });}, 5268: (t, e, i) => {"use strict";i.d(e, { Cj: () => c, Oz: () => h, PL: () => f, SN: () => p, To: () => g, Z0: () => l, au: () => u });var n = i(7674),r = i(889),s = i(3242),o = i(2174),a = i(1195);function l(t, e) {return new (d(t))(e);}function c(t, e) {return new (d(t))(e);}function h(t) {return new a.H5(t);}function u(t, e) {return l(n.z0.uI, { name: t.substring(0, 35).replace(/\s/g, "_").toLowerCase(), displayName: e ?? void 0, value: t });}function d(t) {return class extends t {constructor(...t) {const [e] = t;super(e), this.visibleIf = e.visibleIf, this.rules = e.rules, e.dataBound && (this.dataBound = e.dataBound), e.fx && (this.fx = e.fx);}};}function p(t, e) {t.valuesMap && (e = t.valuesMap[e]);const i = (t.values && t.values[e] ? t.values[e] : t)?.value;return i && "object" == typeof i && "value" in i ? i.value : i;}function f(t, e, i, n, r = !0) {let s;if (t) {const n = t[e];if (n) {const t = n[i];if (void 0 !== t && (s = t, null != s)) {if (r && "string" == typeof s) try {s = JSON.parse(s);} catch (t) {}s.solid && (s = { value: s.solid.color });}}}return void 0 === s && (s = n), s;}class g {maxDataBoundSlices;formattingSettingsService;constructor(t = 100) {this.maxDataBoundSlices = t, this.formattingSettingsService = new n.OZ();}populate(t, e) {const i = this.formattingSettingsService.populateFormattingSettingsModel(t, e);return this.fixValuesType(i), this.populateSelectors(i, e), this.populateInternalSettings(i, e), { model: i, settings: null };}enumerate(t, e) {if (t) return this.applyRules(t), e && e(t), this.createDataBoundSlices(t), this.formattingSettingsService.buildFormattingModel(t);}getSlices(t) {const e = [];return t.cards?.forEach((t) => {(t instanceof n.z0.Tn ? [t] : t.groups).forEach((t) => {t && e.push(...this.getCardGroupSlices(t));});}), e;}generateSkeletonSettings(t) {function e(t) {const i = {},n = (t) => t && "object" == typeof t && "value" in t ? t.value : t;for (const r in t) if (!["groups", "slices", "__proto__", "constructor", "prototype"].includes(r)) {const s = t[r];s && "object" == typeof s && ((0, a.ub)(s) ? i[r] = e(s) : "value" in s && (s.dataBound || s.fx ? i[r] = { value: n(s.value), values: s.values?.map((t) => n(t.value)) } : i[r] = n(s.value)));}return i;}const i = {};for (const n in t) if ("cards" !== n) {const r = t[n];r && "object" == typeof r && (i[n] = e(r));}return i;}getSliceProperty(t, e, i, n, r) {const s = f(e, i, n, r, !1);if (null != s && s !== r) {if ("Dropdown" == t.type) return t.items.find((t) => t.value === s);if ("DatePicker" == t.type && "string" == typeof s) return new Date(s);}return s;}getDefaultValue(t, e, i) {if ("column" == t.from) return i;if ("palette" == t.from) {const t = thisVisual.host.colorPalette;return { value: t ? t.getColor(e.toString()).value : "#000000" };}return "list" == t.from ? t.list[e % t.list.length] : void 0;}getCardGroupSlices(t) {const e = [];if (t.slices) for (let i = 0; i < t.slices.length; i++) {const n = t.slices[i];e.push(n);}if (t.container?.containerItems) for (let i = 0; i < t.container.containerItems.length; i++) {const n = t.container.containerItems[i];if (n && n.slices) for (let t = 0; t < n.slices.length; t++) {const i = n.slices[t];e.push(i);}}return e;}populateSelectors(t, e) {t.cards?.forEach((t) => {(t instanceof n.z0.Tn ? [t] : t.groups).forEach((i) => {i && this.getCardGroupSlices(i).forEach((i) => {i.dataBound && this.populateDataBounds(i, t.name, e), i.fx && this.populateFx(i, t.name, e);});});});}populateDataBounds(t, e, i) {if (!i?.categorical) return;const n = [];t.valuesMap = [], t.values = [], i.categorical.categories && n.push((0, o.yF)(i.categorical.categories, t.dataBound.dataRole, o.Zs.Last)), i.categorical.values && n.push(...(0, o.pH)(i.categorical.values, t.dataBound.dataRole));const r = (e, i) => "columns" == t.dataBound.type ? e.source.queryName : `${e.source.queryName}_${e.values[i]}`,s = new Set(),a = [];n.forEach((t) => {t?.values?.forEach((e, i) => {const n = r(t, i);s.add(n), a.push(n);});}), Array.from(s).forEach((e, i) => {a.forEach((n, r) => {n == e && (t.valuesMap[r] = i);});}), s.clear(), n.forEach((i) => {i && i.values && i.values.forEach((n, o) => {const a = r(i, o),l = "columns" == t.dataBound.type ? i.source.displayName : null == n ? "(Blank)" : n.toString(),c = t.valuesMap?.[o] ?? o,h = t.dataBound.defaultValue ? this.getDefaultValue(t.dataBound.defaultValue, c, l) : t.value,u = "columns" == t.dataBound.type ? thisVisual.host.createSelectionIdBuilder().withMeasure(i.source.queryName).createSelectionId().getSelector() : thisVisual.host.createSelectionIdBuilder().withCategory(i, o).createSelectionId().getSelector(),d = "columns" == t.dataBound.type ? i.source.objects : i.objects?.[o],p = this.getSliceProperty(t, d, e, t.name, h);s.has(a) || (s.add(a), t.values.push({ value: p, displayName: l, selector: u }));});});}populateFx(t, e, i) {if (this.convertFxToSelector(t), i?.categorical?.categories && i.categorical.categories.length) {if (!this.hasSliceDefaultValue(t, e, i)) return;const n = (0, o.yF)(i.categorical.categories, t.fx.dataRole, o.Zs.Last);n?.values?.forEach((i, r) => {if (void 0 === n.objects?.[r]?.[e]?.[t.name]) return;t.values || (t.values = []);const s = this.getSliceProperty(t, n.objects?.[r], e, t.name, t.values[r]?.value ?? t.value);t.values[r] ? t.values[r].value = s : t.values[r] = { value: s };});}}populateInternalSettings(t, e) {t.cards?.forEach((t) => {for (const i in t) if ((0, a.yv)(t[i])) {const n = t[i];n.value = f(e.metadata.objects, t.name, n.name, n.value);}});}applyRules(t) {const e = (i) => {if (i.visibleIf && (i.visible = i.visibleIf(t)), (0, a.ub)(i) && (0, a.zN)(i)) for (const t in i) i[t] instanceof n.z0.D && e(i[t]);},i = (e) => {if ((0, a.hP)(e)) {if (e.rules) for (const i in e.rules) {const n = e.rules[i];e[i] = n(t, e[i]);}} else for (const t in e) (0, a.hP)(e[t]) && i(e[t]);};t.cards?.forEach((t) => {const r = t instanceof n.z0.Tn ? [t] : t.groups;e(t), r.forEach((t) => {t && (e(t), (0, a.zN)(t) && this.getCardGroupSlices(t).forEach((t) => {e(t), i(t);}));});});}hasSliceDefaultValue(t, e, i) {return void 0 === this.getSliceProperty(t, i.metadata.objects, e, t.name, void 0);}convertFxToSelector(t) {if (t.fx) {const e = t.selector;t.selector = r.createDataViewWildcardSelector(0), t.instanceKind = 3, t.altConstantSelector = e ?? null;}}createDataBoundSlices(t) {const e = (t, e, i) => {if ((0, a.zN)(t) && t.dataBound) {const n = [];for (let e = 0; e < t.values.length; e++) {if (e >= this.maxDataBoundSlices) {n.push(u(`Only the first ${this.maxDataBoundSlices} data points are displayed.`));break;}const i = t.values[e];if (!i.selector) continue;const r = (0, s.Go)(t);r.displayName = i.displayName, r.value = i.value, 3 == r.instanceKind || 2 == r.instanceKind ? r.altConstantSelector = i.selector : r.selector = i.selector, delete r.values, delete r.dataBound, n.push(r);}return i.splice(e, 1, ...n), !0;}return !1;},i = (t) => {for (let i = 0; i < t.slices.length; i++) {const n = t.slices[i];if (e(n, i, t.slices)) return !1;}if (t.container?.containerItems) for (let i = 0; i < t.container.containerItems.length; i++) {const n = t.container.containerItems[i];if (n && n.slices) for (let t = 0; t < n.slices.length; t++) {const i = n.slices[t];if (e(i, t, n.slices)) return !1;}}return !0;};t.cards?.forEach((t) => {(t instanceof n.z0.Tn ? [t] : t.groups).forEach((t) => {if (t) for (; !i(t);) continue;});});}fixValuesType(t) {t.cards?.forEach((t) => {(t instanceof n.z0.Tn ? [t] : t.groups).forEach((t) => {t && this.getCardGroupSlices(t).forEach((t) => {t instanceof n.z0.lr && t.value && "string" == typeof t.value && (t.value = new Date(t.value));});});});}}}, 5342: (t, e, i) => {"use strict";const n = i(7075);t.exports = (t, e, i) => n(t, e, "<", i);}, 5355: (t, e, i) => {var n,r,s,o,a,l,c,h,u,d,p,f = i(2741).hp,g = { userAgent: !1 },m = {},v = v || (n = Math, s = (r = {}).lib = {}, o = s.Base = function () {function t() {}return { extend: function (e) {t.prototype = this;var i = new t();return e && i.mixIn(e), i.hasOwnProperty("init") || (i.init = function () {i.$super.init.apply(this, arguments);}), i.init.prototype = i, i.$super = this, i;}, create: function () {var t = this.extend();return t.init.apply(t, arguments), t;}, init: function () {}, mixIn: function (t) {for (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]);t.hasOwnProperty("toString") && (this.toString = t.toString);}, clone: function () {return this.init.prototype.extend(this);} };}(), a = s.WordArray = o.extend({ init: function (t, e) {t = this.words = t || [], this.sigBytes = null != e ? e : 4 * t.length;}, toString: function (t) {return (t || c).stringify(this);}, concat: function (t) {var e = this.words,i = t.words,n = this.sigBytes,r = t.sigBytes;if (this.clamp(), n % 4) for (var s = 0; s < r; s++) {var o = i[s >>> 2] >>> 24 - s % 4 * 8 & 255;e[n + s >>> 2] |= o << 24 - (n + s) % 4 * 8;} else for (s = 0; s < r; s += 4) e[n + s >>> 2] = i[s >>> 2];return this.sigBytes += r, this;}, clamp: function () {var t = this.words,e = this.sigBytes;t[e >>> 2] &= 4294967295 << 32 - e % 4 * 8, t.length = n.ceil(e / 4);}, clone: function () {var t = o.clone.call(this);return t.words = this.words.slice(0), t;}, random: function (t) {for (var e = [], i = 0; i < t; i += 4) e.push(4294967296 * n.random() | 0);return new a.init(e, t);} }), l = r.enc = {}, c = l.Hex = { stringify: function (t) {for (var e = t.words, i = t.sigBytes, n = [], r = 0; r < i; r++) {var s = e[r >>> 2] >>> 24 - r % 4 * 8 & 255;n.push((s >>> 4).toString(16)), n.push((15 & s).toString(16));}return n.join("");}, parse: function (t) {for (var e = t.length, i = [], n = 0; n < e; n += 2) i[n >>> 3] |= parseInt(t.substr(n, 2), 16) << 24 - n % 8 * 4;return new a.init(i, e / 2);} }, h = l.Latin1 = { stringify: function (t) {for (var e = t.words, i = t.sigBytes, n = [], r = 0; r < i; r++) {var s = e[r >>> 2] >>> 24 - r % 4 * 8 & 255;n.push(String.fromCharCode(s));}return n.join("");}, parse: function (t) {for (var e = t.length, i = [], n = 0; n < e; n++) i[n >>> 2] |= (255 & t.charCodeAt(n)) << 24 - n % 4 * 8;return new a.init(i, e);} }, u = l.Utf8 = { stringify: function (t) {try {return decodeURIComponent(escape(h.stringify(t)));} catch (t) {throw new Error("Malformed UTF-8 data");}}, parse: function (t) {return h.parse(unescape(encodeURIComponent(t)));} }, d = s.BufferedBlockAlgorithm = o.extend({ reset: function () {this._data = new a.init(), this._nDataBytes = 0;}, _append: function (t) {"string" == typeof t && (t = u.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes;}, _process: function (t) {var e = this._data,i = e.words,r = e.sigBytes,s = this.blockSize,o = r / (4 * s),l = (o = t ? n.ceil(o) : n.max((0 | o) - this._minBufferSize, 0)) * s,c = n.min(4 * l, r);if (l) {for (var h = 0; h < l; h += s) this._doProcessBlock(i, h);var u = i.splice(0, l);e.sigBytes -= c;}return new a.init(u, c);}, clone: function () {var t = o.clone.call(this);return t._data = this._data.clone(), t;}, _minBufferSize: 0 }), s.Hasher = d.extend({ cfg: o.extend(), init: function (t) {this.cfg = this.cfg.extend(t), this.reset();}, reset: function () {d.reset.call(this), this._doReset();}, update: function (t) {return this._append(t), this._process(), this;}, finalize: function (t) {return t && this._append(t), this._doFinalize();}, blockSize: 16, _createHelper: function (t) {return function (e, i) {return new t.init(i).finalize(e);};}, _createHmacHelper: function (t) {return function (e, i) {return new p.HMAC.init(t, i).finalize(e);};} }), p = r.algo = {}, r);!function () {var t,e = (t = v).lib,i = e.Base,n = e.WordArray;(t = t.x64 = {}).Word = i.extend({ init: function (t, e) {this.high = t, this.low = e;} }), t.WordArray = i.extend({ init: function (t, e) {t = this.words = t || [], this.sigBytes = null != e ? e : 8 * t.length;}, toX32: function () {for (var t = this.words, e = t.length, i = [], r = 0; r < e; r++) {var s = t[r];i.push(s.high), i.push(s.low);}return n.create(i, this.sigBytes);}, clone: function () {for (var t = i.clone.call(this), e = t.words = this.words.slice(0), n = e.length, r = 0; r < n; r++) e[r] = e[r].clone();return t;} });}(), v.lib.Cipher || function () {var t = (d = v).lib,e = t.Base,i = t.WordArray,n = t.BufferedBlockAlgorithm,r = d.enc.Base64,s = d.algo.EvpKDF,o = t.Cipher = n.extend({ cfg: e.extend(), createEncryptor: function (t, e) {return this.create(this._ENC_XFORM_MODE, t, e);}, createDecryptor: function (t, e) {return this.create(this._DEC_XFORM_MODE, t, e);}, init: function (t, e, i) {this.cfg = this.cfg.extend(i), this._xformMode = t, this._key = e, this.reset();}, reset: function () {n.reset.call(this), this._doReset();}, process: function (t) {return this._append(t), this._process();}, finalize: function (t) {return t && this._append(t), this._doFinalize();}, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function (t) {return { encrypt: function (e, i, n) {return ("string" == typeof i ? p : u).encrypt(t, e, i, n);}, decrypt: function (e, i, n) {return ("string" == typeof i ? p : u).decrypt(t, e, i, n);} };} });t.StreamCipher = o.extend({ _doFinalize: function () {return this._process(!0);}, blockSize: 1 });var a = d.mode = {},l = function (t, e, i) {var n = this._iv;n ? this._iv = void 0 : n = this._prevBlock;for (var r = 0; r < i; r++) t[e + r] ^= n[r];},c = (t.BlockCipherMode = e.extend({ createEncryptor: function (t, e) {return this.Encryptor.create(t, e);}, createDecryptor: function (t, e) {return this.Decryptor.create(t, e);}, init: function (t, e) {this._cipher = t, this._iv = e;} })).extend();c.Encryptor = c.extend({ processBlock: function (t, e) {var i = this._cipher,n = i.blockSize;l.call(this, t, e, n), i.encryptBlock(t, e), this._prevBlock = t.slice(e, e + n);} }), c.Decryptor = c.extend({ processBlock: function (t, e) {var i = this._cipher,n = i.blockSize,r = t.slice(e, e + n);i.decryptBlock(t, e), l.call(this, t, e, n), this._prevBlock = r;} }), a = a.CBC = c, c = (d.pad = {}).Pkcs7 = { pad: function (t, e) {for (var n, r = (n = (n = 4 * e) - t.sigBytes % n) << 24 | n << 16 | n << 8 | n, s = [], o = 0; o < n; o += 4) s.push(r);n = i.create(s, n), t.concat(n);}, unpad: function (t) {t.sigBytes -= 255 & t.words[t.sigBytes - 1 >>> 2];} }, t.BlockCipher = o.extend({ cfg: o.cfg.extend({ mode: a, padding: c }), reset: function () {o.reset.call(this);var t = (e = this.cfg).iv,e = e.mode;if (this._xformMode == this._ENC_XFORM_MODE) var i = e.createEncryptor;else i = e.createDecryptor, this._minBufferSize = 1;this._mode = i.call(e, this, t && t.words);}, _doProcessBlock: function (t, e) {this._mode.processBlock(t, e);}, _doFinalize: function () {var t = this.cfg.padding;if (this._xformMode == this._ENC_XFORM_MODE) {t.pad(this._data, this.blockSize);var e = this._process(!0);} else e = this._process(!0), t.unpad(e);return e;}, blockSize: 4 });var h = t.CipherParams = e.extend({ init: function (t) {this.mixIn(t);}, toString: function (t) {return (t || this.formatter).stringify(this);} }),u = (a = (d.format = {}).OpenSSL = { stringify: function (t) {var e = t.ciphertext;return ((t = t.salt) ? i.create([1398893684, 1701076831]).concat(t).concat(e) : e).toString(r);}, parse: function (t) {var e = (t = r.parse(t)).words;if (1398893684 == e[0] && 1701076831 == e[1]) {var n = i.create(e.slice(2, 4));e.splice(0, 4), t.sigBytes -= 16;}return h.create({ ciphertext: t, salt: n });} }, t.SerializableCipher = e.extend({ cfg: e.extend({ format: a }), encrypt: function (t, e, i, n) {n = this.cfg.extend(n);var r = t.createEncryptor(i, n);return e = r.finalize(e), r = r.cfg, h.create({ ciphertext: e, key: i, iv: r.iv, algorithm: t, mode: r.mode, padding: r.padding, blockSize: t.blockSize, formatter: n.format });}, decrypt: function (t, e, i, n) {return n = this.cfg.extend(n), e = this._parse(e, n.format), t.createDecryptor(i, n).finalize(e.ciphertext);}, _parse: function (t, e) {return "string" == typeof t ? e.parse(t, this) : t;} })),d = (d.kdf = {}).OpenSSL = { execute: function (t, e, n, r) {return r || (r = i.random(8)), t = s.create({ keySize: e + n }).compute(t, r), n = i.create(t.words.slice(e), 4 * n), t.sigBytes = 4 * e, h.create({ key: t, iv: n, salt: r });} },p = t.PasswordBasedCipher = u.extend({ cfg: u.cfg.extend({ kdf: d }), encrypt: function (t, e, i, n) {return i = (n = this.cfg.extend(n)).kdf.execute(i, t.keySize, t.ivSize), n.iv = i.iv, (t = u.encrypt.call(this, t, e, i.key, n)).mixIn(i), t;}, decrypt: function (t, e, i, n) {return n = this.cfg.extend(n), e = this._parse(e, n.format), i = n.kdf.execute(i, t.keySize, t.ivSize, e.salt), n.iv = i.iv, u.decrypt.call(this, t, e, i.key, n);} });}(), function () {for (var t = v, e = t.lib.BlockCipher, i = t.algo, n = [], r = [], s = [], o = [], a = [], l = [], c = [], h = [], u = [], d = [], p = [], f = 0; 256 > f; f++) p[f] = 128 > f ? f << 1 : f << 1 ^ 283;var g = 0,m = 0;for (f = 0; 256 > f; f++) {var y = (y = m ^ m << 1 ^ m << 2 ^ m << 3 ^ m << 4) >>> 8 ^ 255 & y ^ 99;n[g] = y, r[y] = g;var b = p[g],w = p[b],x = p[w],S = 257 * p[y] ^ 16843008 * y;s[g] = S << 24 | S >>> 8, o[g] = S << 16 | S >>> 16, a[g] = S << 8 | S >>> 24, l[g] = S, S = 16843009 * x ^ 65537 * w ^ 257 * b ^ 16843008 * g, c[y] = S << 24 | S >>> 8, h[y] = S << 16 | S >>> 16, u[y] = S << 8 | S >>> 24, d[y] = S, g ? (g = b ^ p[p[p[x ^ b]]], m ^= p[p[m]]) : g = m = 1;}var E = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];i = i.AES = e.extend({ _doReset: function () {for (var t = (i = this._key).words, e = i.sigBytes / 4, i = 4 * ((this._nRounds = e + 6) + 1), r = this._keySchedule = [], s = 0; s < i; s++) if (s < e) r[s] = t[s];else {var o = r[s - 1];s % e ? 6 < e && 4 == s % e && (o = n[o >>> 24] << 24 | n[o >>> 16 & 255] << 16 | n[o >>> 8 & 255] << 8 | n[255 & o]) : (o = n[(o = o << 8 | o >>> 24) >>> 24] << 24 | n[o >>> 16 & 255] << 16 | n[o >>> 8 & 255] << 8 | n[255 & o], o ^= E[s / e | 0] << 24), r[s] = r[s - e] ^ o;}for (t = this._invKeySchedule = [], e = 0; e < i; e++) s = i - e, o = e % 4 ? r[s] : r[s - 4], t[e] = 4 > e || 4 >= s ? o : c[n[o >>> 24]] ^ h[n[o >>> 16 & 255]] ^ u[n[o >>> 8 & 255]] ^ d[n[255 & o]];}, encryptBlock: function (t, e) {this._doCryptBlock(t, e, this._keySchedule, s, o, a, l, n);}, decryptBlock: function (t, e) {var i = t[e + 1];t[e + 1] = t[e + 3], t[e + 3] = i, this._doCryptBlock(t, e, this._invKeySchedule, c, h, u, d, r), i = t[e + 1], t[e + 1] = t[e + 3], t[e + 3] = i;}, _doCryptBlock: function (t, e, i, n, r, s, o, a) {for (var l = this._nRounds, c = t[e] ^ i[0], h = t[e + 1] ^ i[1], u = t[e + 2] ^ i[2], d = t[e + 3] ^ i[3], p = 4, f = 1; f < l; f++) {var g = n[c >>> 24] ^ r[h >>> 16 & 255] ^ s[u >>> 8 & 255] ^ o[255 & d] ^ i[p++],m = n[h >>> 24] ^ r[u >>> 16 & 255] ^ s[d >>> 8 & 255] ^ o[255 & c] ^ i[p++],v = n[u >>> 24] ^ r[d >>> 16 & 255] ^ s[c >>> 8 & 255] ^ o[255 & h] ^ i[p++];d = n[d >>> 24] ^ r[c >>> 16 & 255] ^ s[h >>> 8 & 255] ^ o[255 & u] ^ i[p++], c = g, h = m, u = v;}g = (a[c >>> 24] << 24 | a[h >>> 16 & 255] << 16 | a[u >>> 8 & 255] << 8 | a[255 & d]) ^ i[p++], m = (a[h >>> 24] << 24 | a[u >>> 16 & 255] << 16 | a[d >>> 8 & 255] << 8 | a[255 & c]) ^ i[p++], v = (a[u >>> 24] << 24 | a[d >>> 16 & 255] << 16 | a[c >>> 8 & 255] << 8 | a[255 & h]) ^ i[p++], d = (a[d >>> 24] << 24 | a[c >>> 16 & 255] << 16 | a[h >>> 8 & 255] << 8 | a[255 & u]) ^ i[p++], t[e] = g, t[e + 1] = m, t[e + 2] = v, t[e + 3] = d;}, keySize: 8 }), t.AES = e._createHelper(i);}(), function () {function t(t, e) {var i = (this._lBlock >>> t ^ this._rBlock) & e;this._rBlock ^= i, this._lBlock ^= i << t;}function e(t, e) {var i = (this._rBlock >>> t ^ this._lBlock) & e;this._lBlock ^= i, this._rBlock ^= i << t;}var i = v,n = (r = i.lib).WordArray,r = r.BlockCipher,s = i.algo,o = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4],a = [14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8, 16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33, 48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32],l = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28],c = [{ 0: 8421888, 268435456: 32768, 536870912: 8421378, 805306368: 2, 1073741824: 512, 1342177280: 8421890, 1610612736: 8389122, 1879048192: 8388608, 2147483648: 514, 2415919104: 8389120, 2684354560: 33280, 2952790016: 8421376, 3221225472: 32770, 3489660928: 8388610, 3758096384: 0, 4026531840: 33282, 134217728: 0, 402653184: 8421890, 671088640: 33282, 939524096: 32768, 1207959552: 8421888, 1476395008: 512, 1744830464: 8421378, 2013265920: 2, 2281701376: 8389120, 2550136832: 33280, 2818572288: 8421376, 3087007744: 8389122, 3355443200: 8388610, 3623878656: 32770, 3892314112: 514, 4160749568: 8388608, 1: 32768, 268435457: 2, 536870913: 8421888, 805306369: 8388608, 1073741825: 8421378, 1342177281: 33280, 1610612737: 512, 1879048193: 8389122, 2147483649: 8421890, 2415919105: 8421376, 2684354561: 8388610, 2952790017: 33282, 3221225473: 514, 3489660929: 8389120, 3758096385: 32770, 4026531841: 0, 134217729: 8421890, 402653185: 8421376, 671088641: 8388608, 939524097: 512, 1207959553: 32768, 1476395009: 8388610, 1744830465: 2, 2013265921: 33282, 2281701377: 32770, 2550136833: 8389122, 2818572289: 514, 3087007745: 8421888, 3355443201: 8389120, 3623878657: 0, 3892314113: 33280, 4160749569: 8421378 }, { 0: 1074282512, 16777216: 16384, 33554432: 524288, 50331648: 1074266128, 67108864: 1073741840, 83886080: 1074282496, 100663296: 1073758208, 117440512: 16, 134217728: 540672, 150994944: 1073758224, 167772160: 1073741824, 184549376: 540688, 201326592: 524304, 218103808: 0, 234881024: 16400, 251658240: 1074266112, 8388608: 1073758208, 25165824: 540688, 41943040: 16, 58720256: 1073758224, 75497472: 1074282512, 92274688: 1073741824, 109051904: 524288, 125829120: 1074266128, 142606336: 524304, 159383552: 0, 176160768: 16384, 192937984: 1074266112, 209715200: 1073741840, 226492416: 540672, 243269632: 1074282496, 260046848: 16400, 268435456: 0, 285212672: 1074266128, 301989888: 1073758224, 318767104: 1074282496, 335544320: 1074266112, 352321536: 16, 369098752: 540688, 385875968: 16384, 402653184: 16400, 419430400: 524288, 436207616: 524304, 452984832: 1073741840, 469762048: 540672, 486539264: 1073758208, 503316480: 1073741824, 520093696: 1074282512, 276824064: 540688, 293601280: 524288, 310378496: 1074266112, 327155712: 16384, 343932928: 1073758208, 360710144: 1074282512, 377487360: 16, 394264576: 1073741824, 411041792: 1074282496, 427819008: 1073741840, 444596224: 1073758224, 461373440: 524304, 478150656: 0, 494927872: 16400, 511705088: 1074266128, 528482304: 540672 }, { 0: 260, 1048576: 0, 2097152: 67109120, 3145728: 65796, 4194304: 65540, 5242880: 67108868, 6291456: 67174660, 7340032: 67174400, 8388608: 67108864, 9437184: 67174656, 10485760: 65792, 11534336: 67174404, 12582912: 67109124, 13631488: 65536, 14680064: 4, 15728640: 256, 524288: 67174656, 1572864: 67174404, 2621440: 0, 3670016: 67109120, 4718592: 67108868, 5767168: 65536, 6815744: 65540, 7864320: 260, 8912896: 4, 9961472: 256, 11010048: 67174400, 12058624: 65796, 13107200: 65792, 14155776: 67109124, 15204352: 67174660, 16252928: 67108864, 16777216: 67174656, 17825792: 65540, 18874368: 65536, 19922944: 67109120, 20971520: 256, 22020096: 67174660, 23068672: 67108868, 24117248: 0, 25165824: 67109124, 26214400: 67108864, 27262976: 4, 28311552: 65792, 29360128: 67174400, 30408704: 260, 31457280: 65796, 32505856: 67174404, 17301504: 67108864, 18350080: 260, 19398656: 67174656, 20447232: 0, 21495808: 65540, 22544384: 67109120, 23592960: 256, 24641536: 67174404, 25690112: 65536, 26738688: 67174660, 27787264: 65796, 28835840: 67108868, 29884416: 67109124, 30932992: 67174400, 31981568: 4, 33030144: 65792 }, { 0: 2151682048, 65536: 2147487808, 131072: 4198464, 196608: 2151677952, 262144: 0, 327680: 4198400, 393216: 2147483712, 458752: 4194368, 524288: 2147483648, 589824: 4194304, 655360: 64, 720896: 2147487744, 786432: 2151678016, 851968: 4160, 917504: 4096, 983040: 2151682112, 32768: 2147487808, 98304: 64, 163840: 2151678016, 229376: 2147487744, 294912: 4198400, 360448: 2151682112, 425984: 0, 491520: 2151677952, 557056: 4096, 622592: 2151682048, 688128: 4194304, 753664: 4160, 819200: 2147483648, 884736: 4194368, 950272: 4198464, 1015808: 2147483712, 1048576: 4194368, 1114112: 4198400, 1179648: 2147483712, 1245184: 0, 1310720: 4160, 1376256: 2151678016, 1441792: 2151682048, 1507328: 2147487808, 1572864: 2151682112, 1638400: 2147483648, 1703936: 2151677952, 1769472: 4198464, 1835008: 2147487744, 1900544: 4194304, 1966080: 64, 2031616: 4096, 1081344: 2151677952, 1146880: 2151682112, 1212416: 0, 1277952: 4198400, 1343488: 4194368, 1409024: 2147483648, 1474560: 2147487808, 1540096: 64, 1605632: 2147483712, 1671168: 4096, 1736704: 2147487744, 1802240: 2151678016, 1867776: 4160, 1933312: 2151682048, 1998848: 4194304, 2064384: 4198464 }, { 0: 128, 4096: 17039360, 8192: 262144, 12288: 536870912, 16384: 537133184, 20480: 16777344, 24576: 553648256, 28672: 262272, 32768: 16777216, 36864: 537133056, 40960: 536871040, 45056: 553910400, 49152: 553910272, 53248: 0, 57344: 17039488, 61440: 553648128, 2048: 17039488, 6144: 553648256, 10240: 128, 14336: 17039360, 18432: 262144, 22528: 537133184, 26624: 553910272, 30720: 536870912, 34816: 537133056, 38912: 0, 43008: 553910400, 47104: 16777344, 51200: 536871040, 55296: 553648128, 59392: 16777216, 63488: 262272, 65536: 262144, 69632: 128, 73728: 536870912, 77824: 553648256, 81920: 16777344, 86016: 553910272, 90112: 537133184, 94208: 16777216, 98304: 553910400, 102400: 553648128, 106496: 17039360, 110592: 537133056, 114688: 262272, 118784: 536871040, 122880: 0, 126976: 17039488, 67584: 553648256, 71680: 16777216, 75776: 17039360, 79872: 537133184, 83968: 536870912, 88064: 17039488, 92160: 128, 96256: 553910272, 100352: 262272, 104448: 553910400, 108544: 0, 112640: 553648128, 116736: 16777344, 120832: 262144, 124928: 537133056, 129024: 536871040 }, { 0: 268435464, 256: 8192, 512: 270532608, 768: 270540808, 1024: 268443648, 1280: 2097152, 1536: 2097160, 1792: 268435456, 2048: 0, 2304: 268443656, 2560: 2105344, 2816: 8, 3072: 270532616, 3328: 2105352, 3584: 8200, 3840: 270540800, 128: 270532608, 384: 270540808, 640: 8, 896: 2097152, 1152: 2105352, 1408: 268435464, 1664: 268443648, 1920: 8200, 2176: 2097160, 2432: 8192, 2688: 268443656, 2944: 270532616, 3200: 0, 3456: 270540800, 3712: 2105344, 3968: 268435456, 4096: 268443648, 4352: 270532616, 4608: 270540808, 4864: 8200, 5120: 2097152, 5376: 268435456, 5632: 268435464, 5888: 2105344, 6144: 2105352, 6400: 0, 6656: 8, 6912: 270532608, 7168: 8192, 7424: 268443656, 7680: 270540800, 7936: 2097160, 4224: 8, 4480: 2105344, 4736: 2097152, 4992: 268435464, 5248: 268443648, 5504: 8200, 5760: 270540808, 6016: 270532608, 6272: 270540800, 6528: 270532616, 6784: 8192, 7040: 2105352, 7296: 2097160, 7552: 0, 7808: 268435456, 8064: 268443656 }, { 0: 1048576, 16: 33555457, 32: 1024, 48: 1049601, 64: 34604033, 80: 0, 96: 1, 112: 34603009, 128: 33555456, 144: 1048577, 160: 33554433, 176: 34604032, 192: 34603008, 208: 1025, 224: 1049600, 240: 33554432, 8: 34603009, 24: 0, 40: 33555457, 56: 34604032, 72: 1048576, 88: 33554433, 104: 33554432, 120: 1025, 136: 1049601, 152: 33555456, 168: 34603008, 184: 1048577, 200: 1024, 216: 34604033, 232: 1, 248: 1049600, 256: 33554432, 272: 1048576, 288: 33555457, 304: 34603009, 320: 1048577, 336: 33555456, 352: 34604032, 368: 1049601, 384: 1025, 400: 34604033, 416: 1049600, 432: 1, 448: 0, 464: 34603008, 480: 33554433, 496: 1024, 264: 1049600, 280: 33555457, 296: 34603009, 312: 1, 328: 33554432, 344: 1048576, 360: 1025, 376: 34604032, 392: 33554433, 408: 34603008, 424: 0, 440: 34604033, 456: 1049601, 472: 1024, 488: 33555456, 504: 1048577 }, { 0: 134219808, 1: 131072, 2: 134217728, 3: 32, 4: 131104, 5: 134350880, 6: 134350848, 7: 2048, 8: 134348800, 9: 134219776, 10: 133120, 11: 134348832, 12: 2080, 13: 0, 14: 134217760, 15: 133152, 2147483648: 2048, 2147483649: 134350880, 2147483650: 134219808, 2147483651: 134217728, 2147483652: 134348800, 2147483653: 133120, 2147483654: 133152, 2147483655: 32, 2147483656: 134217760, 2147483657: 2080, 2147483658: 131104, 2147483659: 134350848, 2147483660: 0, 2147483661: 134348832, 2147483662: 134219776, 2147483663: 131072, 16: 133152, 17: 134350848, 18: 32, 19: 2048, 20: 134219776, 21: 134217760, 22: 134348832, 23: 131072, 24: 0, 25: 131104, 26: 134348800, 27: 134219808, 28: 134350880, 29: 133120, 30: 2080, 31: 134217728, 2147483664: 131072, 2147483665: 2048, 2147483666: 134348832, 2147483667: 133152, 2147483668: 32, 2147483669: 134348800, 2147483670: 134217728, 2147483671: 134219808, 2147483672: 134350880, 2147483673: 134217760, 2147483674: 134219776, 2147483675: 0, 2147483676: 133120, 2147483677: 2080, 2147483678: 131104, 2147483679: 134350848 }],h = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679],u = s.DES = r.extend({ _doReset: function () {for (var t = this._key.words, e = [], i = 0; 56 > i; i++) {var n = o[i] - 1;e[i] = t[n >>> 5] >>> 31 - n % 32 & 1;}for (t = this._subKeys = [], n = 0; 16 > n; n++) {var r = t[n] = [],s = l[n];for (i = 0; 24 > i; i++) r[i / 6 | 0] |= e[(a[i] - 1 + s) % 28] << 31 - i % 6, r[4 + (i / 6 | 0)] |= e[28 + (a[i + 24] - 1 + s) % 28] << 31 - i % 6;for (r[0] = r[0] << 1 | r[0] >>> 31, i = 1; 7 > i; i++) r[i] >>>= 4 * (i - 1) + 3;r[7] = r[7] << 5 | r[7] >>> 27;}for (e = this._invSubKeys = [], i = 0; 16 > i; i++) e[i] = t[15 - i];}, encryptBlock: function (t, e) {this._doCryptBlock(t, e, this._subKeys);}, decryptBlock: function (t, e) {this._doCryptBlock(t, e, this._invSubKeys);}, _doCryptBlock: function (i, n, r) {this._lBlock = i[n], this._rBlock = i[n + 1], t.call(this, 4, 252645135), t.call(this, 16, 65535), e.call(this, 2, 858993459), e.call(this, 8, 16711935), t.call(this, 1, 1431655765);for (var s = 0; 16 > s; s++) {for (var o = r[s], a = this._lBlock, l = this._rBlock, u = 0, d = 0; 8 > d; d++) u |= c[d][((l ^ o[d]) & h[d]) >>> 0];this._lBlock = l, this._rBlock = a ^ u;}r = this._lBlock, this._lBlock = this._rBlock, this._rBlock = r, t.call(this, 1, 1431655765), e.call(this, 8, 16711935), e.call(this, 2, 858993459), t.call(this, 16, 65535), t.call(this, 4, 252645135), i[n] = this._lBlock, i[n + 1] = this._rBlock;}, keySize: 2, ivSize: 2, blockSize: 2 });i.DES = r._createHelper(u), s = s.TripleDES = r.extend({ _doReset: function () {var t = this._key.words;this._des1 = u.createEncryptor(n.create(t.slice(0, 2))), this._des2 = u.createEncryptor(n.create(t.slice(2, 4))), this._des3 = u.createEncryptor(n.create(t.slice(4, 6)));}, encryptBlock: function (t, e) {this._des1.encryptBlock(t, e), this._des2.decryptBlock(t, e), this._des3.encryptBlock(t, e);}, decryptBlock: function (t, e) {this._des3.decryptBlock(t, e), this._des2.encryptBlock(t, e), this._des1.decryptBlock(t, e);}, keySize: 6, ivSize: 2, blockSize: 2 }), i.TripleDES = r._createHelper(s);}(), function () {var t = v,e = t.lib.WordArray;t.enc.Base64 = { stringify: function (t) {var e = t.words,i = t.sigBytes,n = this._map;t.clamp(), t = [];for (var r = 0; r < i; r += 3) for (var s = (e[r >>> 2] >>> 24 - r % 4 * 8 & 255) << 16 | (e[r + 1 >>> 2] >>> 24 - (r + 1) % 4 * 8 & 255) << 8 | e[r + 2 >>> 2] >>> 24 - (r + 2) % 4 * 8 & 255, o = 0; 4 > o && r + .75 * o < i; o++) t.push(n.charAt(s >>> 6 * (3 - o) & 63));if (e = n.charAt(64)) for (; t.length % 4;) t.push(e);return t.join("");}, parse: function (t) {var i = t.length,n = this._map;(r = n.charAt(64)) && -1 != (r = t.indexOf(r)) && (i = r);for (var r = [], s = 0, o = 0; o < i; o++) if (o % 4) {var a = n.indexOf(t.charAt(o - 1)) << o % 4 * 2,l = n.indexOf(t.charAt(o)) >>> 6 - o % 4 * 2;r[s >>> 2] |= (a | l) << 24 - s % 4 * 8, s++;}return e.create(r, s);}, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" };}(), function (t) {function e(t, e, i, n, r, s, o) {return ((t = t + (e & i | ~e & n) + r + o) << s | t >>> 32 - s) + e;}function i(t, e, i, n, r, s, o) {return ((t = t + (e & n | i & ~n) + r + o) << s | t >>> 32 - s) + e;}function n(t, e, i, n, r, s, o) {return ((t = t + (e ^ i ^ n) + r + o) << s | t >>> 32 - s) + e;}function r(t, e, i, n, r, s, o) {return ((t = t + (i ^ (e | ~n)) + r + o) << s | t >>> 32 - s) + e;}for (var s = v, o = (l = s.lib).WordArray, a = l.Hasher, l = s.algo, c = [], h = 0; 64 > h; h++) c[h] = 4294967296 * t.abs(t.sin(h + 1)) | 0;l = l.MD5 = a.extend({ _doReset: function () {this._hash = new o.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function (t, s) {for (var o = 0; 16 > o; o++) {var a = t[l = s + o];t[l] = 16711935 & (a << 8 | a >>> 24) | 4278255360 & (a << 24 | a >>> 8);}o = this._hash.words;var l = t[s + 0],h = (a = t[s + 1], t[s + 2]),u = t[s + 3],d = t[s + 4],p = t[s + 5],f = t[s + 6],g = t[s + 7],m = t[s + 8],v = t[s + 9],y = t[s + 10],b = t[s + 11],w = t[s + 12],x = t[s + 13],S = t[s + 14],E = t[s + 15],C = e(C = o[0], A = o[1], T = o[2], k = o[3], l, 7, c[0]),k = e(k, C, A, T, a, 12, c[1]),T = e(T, k, C, A, h, 17, c[2]),A = e(A, T, k, C, u, 22, c[3]);C = e(C, A, T, k, d, 7, c[4]), k = e(k, C, A, T, p, 12, c[5]), T = e(T, k, C, A, f, 17, c[6]), A = e(A, T, k, C, g, 22, c[7]), C = e(C, A, T, k, m, 7, c[8]), k = e(k, C, A, T, v, 12, c[9]), T = e(T, k, C, A, y, 17, c[10]), A = e(A, T, k, C, b, 22, c[11]), C = e(C, A, T, k, w, 7, c[12]), k = e(k, C, A, T, x, 12, c[13]), T = e(T, k, C, A, S, 17, c[14]), C = i(C, A = e(A, T, k, C, E, 22, c[15]), T, k, a, 5, c[16]), k = i(k, C, A, T, f, 9, c[17]), T = i(T, k, C, A, b, 14, c[18]), A = i(A, T, k, C, l, 20, c[19]), C = i(C, A, T, k, p, 5, c[20]), k = i(k, C, A, T, y, 9, c[21]), T = i(T, k, C, A, E, 14, c[22]), A = i(A, T, k, C, d, 20, c[23]), C = i(C, A, T, k, v, 5, c[24]), k = i(k, C, A, T, S, 9, c[25]), T = i(T, k, C, A, u, 14, c[26]), A = i(A, T, k, C, m, 20, c[27]), C = i(C, A, T, k, x, 5, c[28]), k = i(k, C, A, T, h, 9, c[29]), T = i(T, k, C, A, g, 14, c[30]), C = n(C, A = i(A, T, k, C, w, 20, c[31]), T, k, p, 4, c[32]), k = n(k, C, A, T, m, 11, c[33]), T = n(T, k, C, A, b, 16, c[34]), A = n(A, T, k, C, S, 23, c[35]), C = n(C, A, T, k, a, 4, c[36]), k = n(k, C, A, T, d, 11, c[37]), T = n(T, k, C, A, g, 16, c[38]), A = n(A, T, k, C, y, 23, c[39]), C = n(C, A, T, k, x, 4, c[40]), k = n(k, C, A, T, l, 11, c[41]), T = n(T, k, C, A, u, 16, c[42]), A = n(A, T, k, C, f, 23, c[43]), C = n(C, A, T, k, v, 4, c[44]), k = n(k, C, A, T, w, 11, c[45]), T = n(T, k, C, A, E, 16, c[46]), C = r(C, A = n(A, T, k, C, h, 23, c[47]), T, k, l, 6, c[48]), k = r(k, C, A, T, g, 10, c[49]), T = r(T, k, C, A, S, 15, c[50]), A = r(A, T, k, C, p, 21, c[51]), C = r(C, A, T, k, w, 6, c[52]), k = r(k, C, A, T, u, 10, c[53]), T = r(T, k, C, A, y, 15, c[54]), A = r(A, T, k, C, a, 21, c[55]), C = r(C, A, T, k, m, 6, c[56]), k = r(k, C, A, T, E, 10, c[57]), T = r(T, k, C, A, f, 15, c[58]), A = r(A, T, k, C, x, 21, c[59]), C = r(C, A, T, k, d, 6, c[60]), k = r(k, C, A, T, b, 10, c[61]), T = r(T, k, C, A, h, 15, c[62]), A = r(A, T, k, C, v, 21, c[63]), o[0] = o[0] + C | 0, o[1] = o[1] + A | 0, o[2] = o[2] + T | 0, o[3] = o[3] + k | 0;}, _doFinalize: function () {var e = this._data,i = e.words,n = 8 * this._nDataBytes,r = 8 * e.sigBytes;i[r >>> 5] |= 128 << 24 - r % 32;var s = t.floor(n / 4294967296);for (i[15 + (r + 64 >>> 9 << 4)] = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8), i[14 + (r + 64 >>> 9 << 4)] = 16711935 & (n << 8 | n >>> 24) | 4278255360 & (n << 24 | n >>> 8), e.sigBytes = 4 * (i.length + 1), this._process(), i = (e = this._hash).words, n = 0; 4 > n; n++) r = i[n], i[n] = 16711935 & (r << 8 | r >>> 24) | 4278255360 & (r << 24 | r >>> 8);return e;}, clone: function () {var t = a.clone.call(this);return t._hash = this._hash.clone(), t;} }), s.MD5 = a._createHelper(l), s.HmacMD5 = a._createHmacHelper(l);}(Math), function () {var t = v,e = (r = t.lib).WordArray,i = r.Hasher,n = [],r = t.algo.SHA1 = i.extend({ _doReset: function () {this._hash = new e.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);}, _doProcessBlock: function (t, e) {for (var i = this._hash.words, r = i[0], s = i[1], o = i[2], a = i[3], l = i[4], c = 0; 80 > c; c++) {if (16 > c) n[c] = 0 | t[e + c];else {var h = n[c - 3] ^ n[c - 8] ^ n[c - 14] ^ n[c - 16];n[c] = h << 1 | h >>> 31;}h = (r << 5 | r >>> 27) + l + n[c], h = 20 > c ? h + (1518500249 + (s & o | ~s & a)) : 40 > c ? h + (1859775393 + (s ^ o ^ a)) : 60 > c ? h + ((s & o | s & a | o & a) - 1894007588) : h + ((s ^ o ^ a) - 899497514), l = a, a = o, o = s << 30 | s >>> 2, s = r, r = h;}i[0] = i[0] + r | 0, i[1] = i[1] + s | 0, i[2] = i[2] + o | 0, i[3] = i[3] + a | 0, i[4] = i[4] + l | 0;}, _doFinalize: function () {var t = this._data,e = t.words,i = 8 * this._nDataBytes,n = 8 * t.sigBytes;return e[n >>> 5] |= 128 << 24 - n % 32, e[14 + (n + 64 >>> 9 << 4)] = Math.floor(i / 4294967296), e[15 + (n + 64 >>> 9 << 4)] = i, t.sigBytes = 4 * e.length, this._process(), this._hash;}, clone: function () {var t = i.clone.call(this);return t._hash = this._hash.clone(), t;} });t.SHA1 = i._createHelper(r), t.HmacSHA1 = i._createHmacHelper(r);}(), function (t) {for (var e = v, i = (r = e.lib).WordArray, n = r.Hasher, r = e.algo, s = [], o = [], a = function (t) {return 4294967296 * (t - (0 | t)) | 0;}, l = 2, c = 0; 64 > c;) {var h;t: {h = l;for (var u = t.sqrt(h), d = 2; d <= u; d++) if (!(h % d)) {h = !1;break t;}h = !0;}h && (8 > c && (s[c] = a(t.pow(l, .5))), o[c] = a(t.pow(l, 1 / 3)), c++), l++;}var p = [];r = r.SHA256 = n.extend({ _doReset: function () {this._hash = new i.init(s.slice(0));}, _doProcessBlock: function (t, e) {for (var i = this._hash.words, n = i[0], r = i[1], s = i[2], a = i[3], l = i[4], c = i[5], h = i[6], u = i[7], d = 0; 64 > d; d++) {if (16 > d) p[d] = 0 | t[e + d];else {var f = p[d - 15],g = p[d - 2];p[d] = ((f << 25 | f >>> 7) ^ (f << 14 | f >>> 18) ^ f >>> 3) + p[d - 7] + ((g << 15 | g >>> 17) ^ (g << 13 | g >>> 19) ^ g >>> 10) + p[d - 16];}f = u + ((l << 26 | l >>> 6) ^ (l << 21 | l >>> 11) ^ (l << 7 | l >>> 25)) + (l & c ^ ~l & h) + o[d] + p[d], g = ((n << 30 | n >>> 2) ^ (n << 19 | n >>> 13) ^ (n << 10 | n >>> 22)) + (n & r ^ n & s ^ r & s), u = h, h = c, c = l, l = a + f | 0, a = s, s = r, r = n, n = f + g | 0;}i[0] = i[0] + n | 0, i[1] = i[1] + r | 0, i[2] = i[2] + s | 0, i[3] = i[3] + a | 0, i[4] = i[4] + l | 0, i[5] = i[5] + c | 0, i[6] = i[6] + h | 0, i[7] = i[7] + u | 0;}, _doFinalize: function () {var e = this._data,i = e.words,n = 8 * this._nDataBytes,r = 8 * e.sigBytes;return i[r >>> 5] |= 128 << 24 - r % 32, i[14 + (r + 64 >>> 9 << 4)] = t.floor(n / 4294967296), i[15 + (r + 64 >>> 9 << 4)] = n, e.sigBytes = 4 * i.length, this._process(), this._hash;}, clone: function () {var t = n.clone.call(this);return t._hash = this._hash.clone(), t;} }), e.SHA256 = n._createHelper(r), e.HmacSHA256 = n._createHmacHelper(r);}(Math), function () {var t = v,e = t.lib.WordArray,i = (n = t.algo).SHA256,n = n.SHA224 = i.extend({ _doReset: function () {this._hash = new e.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428]);}, _doFinalize: function () {var t = i._doFinalize.call(this);return t.sigBytes -= 4, t;} });t.SHA224 = i._createHelper(n), t.HmacSHA224 = i._createHmacHelper(n);}(), function () {function t() {return n.create.apply(n, arguments);}for (var e = v, i = e.lib.Hasher, n = (s = e.x64).Word, r = s.WordArray, s = e.algo, o = [t(1116352408, 3609767458), t(1899447441, 602891725), t(3049323471, 3964484399), t(3921009573, 2173295548), t(961987163, 4081628472), t(1508970993, 3053834265), t(2453635748, 2937671579), t(2870763221, 3664609560), t(3624381080, 2734883394), t(310598401, 1164996542), t(607225278, 1323610764), t(1426881987, 3590304994), t(1925078388, 4068182383), t(2162078206, 991336113), t(2614888103, 633803317), t(3248222580, 3479774868), t(3835390401, 2666613458), t(4022224774, 944711139), t(264347078, 2341262773), t(604807628, 2007800933), t(770255983, 1495990901), t(1249150122, 1856431235), t(1555081692, 3175218132), t(1996064986, 2198950837), t(2554220882, 3999719339), t(2821834349, 766784016), t(2952996808, 2566594879), t(3210313671, 3203337956), t(3336571891, 1034457026), t(3584528711, 2466948901), t(113926993, 3758326383), t(338241895, 168717936), t(666307205, 1188179964), t(773529912, 1546045734), t(1294757372, 1522805485), t(1396182291, 2643833823), t(1695183700, 2343527390), t(1986661051, 1014477480), t(2177026350, 1206759142), t(2456956037, 344077627), t(2730485921, 1290863460), t(2820302411, 3158454273), t(3259730800, 3505952657), t(3345764771, 106217008), t(3516065817, 3606008344), t(3600352804, 1432725776), t(4094571909, 1467031594), t(275423344, 851169720), t(430227734, 3100823752), t(506948616, 1363258195), t(659060556, 3750685593), t(883997877, 3785050280), t(958139571, 3318307427), t(1322822218, 3812723403), t(1537002063, 2003034995), t(1747873779, 3602036899), t(1955562222, 1575990012), t(2024104815, 1125592928), t(2227730452, 2716904306), t(2361852424, 442776044), t(2428436474, 593698344), t(2756734187, 3733110249), t(3204031479, 2999351573), t(3329325298, 3815920427), t(3391569614, 3928383900), t(3515267271, 566280711), t(3940187606, 3454069534), t(4118630271, 4000239992), t(116418474, 1914138554), t(174292421, 2731055270), t(289380356, 3203993006), t(460393269, 320620315), t(685471733, 587496836), t(852142971, 1086792851), t(1017036298, 365543100), t(1126000580, 2618297676), t(1288033470, 3409855158), t(1501505948, 4234509866), t(1607167915, 987167468), t(1816402316, 1246189591)], a = [], l = 0; 80 > l; l++) a[l] = t();s = s.SHA512 = i.extend({ _doReset: function () {this._hash = new r.init([new n.init(1779033703, 4089235720), new n.init(3144134277, 2227873595), new n.init(1013904242, 4271175723), new n.init(2773480762, 1595750129), new n.init(1359893119, 2917565137), new n.init(2600822924, 725511199), new n.init(528734635, 4215389547), new n.init(1541459225, 327033209)]);}, _doProcessBlock: function (t, e) {for (var i = (u = this._hash.words)[0], n = u[1], r = u[2], s = u[3], l = u[4], c = u[5], h = u[6], u = u[7], d = i.high, p = i.low, f = n.high, g = n.low, m = r.high, v = r.low, y = s.high, b = s.low, w = l.high, x = l.low, S = c.high, E = c.low, C = h.high, k = h.low, T = u.high, A = u.low, M = d, _ = p, P = f, D = g, O = m, I = v, F = y, R = b, L = w, N = x, V = S, B = E, j = C, z = k, U = T, H = A, q = 0; 80 > q; q++) {var $ = a[q];if (16 > q) var G = $.high = 0 | t[e + 2 * q],W = $.low = 0 | t[e + 2 * q + 1];else {G = ((W = (G = a[q - 15]).high) >>> 1 | (K = G.low) << 31) ^ (W >>> 8 | K << 24) ^ W >>> 7;var K = (K >>> 1 | W << 31) ^ (K >>> 8 | W << 24) ^ (K >>> 7 | W << 25),Z = ((W = (Z = a[q - 2]).high) >>> 19 | (Y = Z.low) << 13) ^ (W << 3 | Y >>> 29) ^ W >>> 6,Y = (Y >>> 19 | W << 13) ^ (Y << 3 | W >>> 29) ^ (Y >>> 6 | W << 26),X = (W = a[q - 7]).high,J = (Q = a[q - 16]).high,Q = Q.low;G = (G = (G = G + X + ((W = K + W.low) >>> 0 < K >>> 0 ? 1 : 0)) + Z + ((W += Y) >>> 0 < Y >>> 0 ? 1 : 0)) + J + ((W += Q) >>> 0 < Q >>> 0 ? 1 : 0), $.high = G, $.low = W;}X = L & V ^ ~L & j, Q = N & B ^ ~N & z, $ = M & P ^ M & O ^ P & O;var tt = _ & D ^ _ & I ^ D & I,et = (K = (M >>> 28 | _ << 4) ^ (M << 30 | _ >>> 2) ^ (M << 25 | _ >>> 7), Z = (_ >>> 28 | M << 4) ^ (_ << 30 | M >>> 2) ^ (_ << 25 | M >>> 7), (Y = o[q]).high),it = Y.low;J = U + ((L >>> 14 | N << 18) ^ (L >>> 18 | N << 14) ^ (L << 23 | N >>> 9)) + ((Y = H + ((N >>> 14 | L << 18) ^ (N >>> 18 | L << 14) ^ (N << 23 | L >>> 9))) >>> 0 < H >>> 0 ? 1 : 0), U = j, H = z, j = V, z = B, V = L, B = N, L = F + (J = (J = (J = J + X + ((Y += Q) >>> 0 < Q >>> 0 ? 1 : 0)) + et + ((Y += it) >>> 0 < it >>> 0 ? 1 : 0)) + G + ((Y += W) >>> 0 < W >>> 0 ? 1 : 0)) + ((N = R + Y | 0) >>> 0 < R >>> 0 ? 1 : 0) | 0, F = O, R = I, O = P, I = D, P = M, D = _, M = J + ($ = K + $ + ((W = Z + tt) >>> 0 < Z >>> 0 ? 1 : 0)) + ((_ = Y + W | 0) >>> 0 < Y >>> 0 ? 1 : 0) | 0;}p = i.low = p + _, i.high = d + M + (p >>> 0 < _ >>> 0 ? 1 : 0), g = n.low = g + D, n.high = f + P + (g >>> 0 < D >>> 0 ? 1 : 0), v = r.low = v + I, r.high = m + O + (v >>> 0 < I >>> 0 ? 1 : 0), b = s.low = b + R, s.high = y + F + (b >>> 0 < R >>> 0 ? 1 : 0), x = l.low = x + N, l.high = w + L + (x >>> 0 < N >>> 0 ? 1 : 0), E = c.low = E + B, c.high = S + V + (E >>> 0 < B >>> 0 ? 1 : 0), k = h.low = k + z, h.high = C + j + (k >>> 0 < z >>> 0 ? 1 : 0), A = u.low = A + H, u.high = T + U + (A >>> 0 < H >>> 0 ? 1 : 0);}, _doFinalize: function () {var t = this._data,e = t.words,i = 8 * this._nDataBytes,n = 8 * t.sigBytes;return e[n >>> 5] |= 128 << 24 - n % 32, e[30 + (n + 128 >>> 10 << 5)] = Math.floor(i / 4294967296), e[31 + (n + 128 >>> 10 << 5)] = i, t.sigBytes = 4 * e.length, this._process(), this._hash.toX32();}, clone: function () {var t = i.clone.call(this);return t._hash = this._hash.clone(), t;}, blockSize: 32 }), e.SHA512 = i._createHelper(s), e.HmacSHA512 = i._createHmacHelper(s);}(), function () {var t = v,e = (r = t.x64).Word,i = r.WordArray,n = (r = t.algo).SHA512,r = r.SHA384 = n.extend({ _doReset: function () {this._hash = new i.init([new e.init(3418070365, 3238371032), new e.init(1654270250, 914150663), new e.init(2438529370, 812702999), new e.init(355462360, 4144912697), new e.init(1731405415, 4290775857), new e.init(2394180231, 1750603025), new e.init(3675008525, 1694076839), new e.init(1203062813, 3204075428)]);}, _doFinalize: function () {var t = n._doFinalize.call(this);return t.sigBytes -= 16, t;} });t.SHA384 = n._createHelper(r), t.HmacSHA384 = n._createHmacHelper(r);}(), function () {var t = v,e = (n = t.lib).WordArray,i = n.Hasher,n = t.algo,r = e.create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]),s = e.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]),o = e.create([11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6]),a = e.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]),l = e.create([0, 1518500249, 1859775393, 2400959708, 2840853838]),c = e.create([1352829926, 1548603684, 1836072691, 2053994217, 0]);n = n.RIPEMD160 = i.extend({ _doReset: function () {this._hash = e.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);}, _doProcessBlock: function (t, e) {for (var i = 0; 16 > i; i++) {var n = t[x = e + i];t[x] = 16711935 & (n << 8 | n >>> 24) | 4278255360 & (n << 24 | n >>> 8);}var h,u,d,p,f,g,m,v,y,b,w,x = this._hash.words,S = (n = l.words, c.words),E = r.words,C = s.words,k = o.words,T = a.words;for (g = h = x[0], m = u = x[1], v = d = x[2], y = p = x[3], b = f = x[4], i = 0; 80 > i; i += 1) w = h + t[e + E[i]] | 0, w = 16 > i ? w + ((u ^ d ^ p) + n[0]) : 32 > i ? w + ((u & d | ~u & p) + n[1]) : 48 > i ? w + (((u | ~d) ^ p) + n[2]) : 64 > i ? w + ((u & p | d & ~p) + n[3]) : w + ((u ^ (d | ~p)) + n[4]), w = (w = (w |= 0) << k[i] | w >>> 32 - k[i]) + f | 0, h = f, f = p, p = d << 10 | d >>> 22, d = u, u = w, w = g + t[e + C[i]] | 0, w = 16 > i ? w + ((m ^ (v | ~y)) + S[0]) : 32 > i ? w + ((m & y | v & ~y) + S[1]) : 48 > i ? w + (((m | ~v) ^ y) + S[2]) : 64 > i ? w + ((m & v | ~m & y) + S[3]) : w + ((m ^ v ^ y) + S[4]), w = (w = (w |= 0) << T[i] | w >>> 32 - T[i]) + b | 0, g = b, b = y, y = v << 10 | v >>> 22, v = m, m = w;w = x[1] + d + y | 0, x[1] = x[2] + p + b | 0, x[2] = x[3] + f + g | 0, x[3] = x[4] + h + m | 0, x[4] = x[0] + u + v | 0, x[0] = w;}, _doFinalize: function () {var t = this._data,e = t.words,i = 8 * this._nDataBytes,n = 8 * t.sigBytes;for (e[n >>> 5] |= 128 << 24 - n % 32, e[14 + (n + 64 >>> 9 << 4)] = 16711935 & (i << 8 | i >>> 24) | 4278255360 & (i << 24 | i >>> 8), t.sigBytes = 4 * (e.length + 1), this._process(), e = (t = this._hash).words, i = 0; 5 > i; i++) n = e[i], e[i] = 16711935 & (n << 8 | n >>> 24) | 4278255360 & (n << 24 | n >>> 8);return t;}, clone: function () {var t = i.clone.call(this);return t._hash = this._hash.clone(), t;} }), t.RIPEMD160 = i._createHelper(n), t.HmacRIPEMD160 = i._createHmacHelper(n);}(Math), function () {var t = v,e = t.enc.Utf8;t.algo.HMAC = t.lib.Base.extend({ init: function (t, i) {t = this._hasher = new t.init(), "string" == typeof i && (i = e.parse(i));var n = t.blockSize,r = 4 * n;i.sigBytes > r && (i = t.finalize(i)), i.clamp();for (var s = this._oKey = i.clone(), o = this._iKey = i.clone(), a = s.words, l = o.words, c = 0; c < n; c++) a[c] ^= 1549556828, l[c] ^= 909522486;s.sigBytes = o.sigBytes = r, this.reset();}, reset: function () {var t = this._hasher;t.reset(), t.update(this._iKey);}, update: function (t) {return this._hasher.update(t), this;}, finalize: function (t) {var e = this._hasher;return t = e.finalize(t), e.reset(), e.finalize(this._oKey.clone().concat(t));} });}(), function () {var t,e = v,i = (t = e.lib).Base,n = t.WordArray,r = (t = e.algo).HMAC,s = t.PBKDF2 = i.extend({ cfg: i.extend({ keySize: 4, hasher: t.SHA1, iterations: 1 }), init: function (t) {this.cfg = this.cfg.extend(t);}, compute: function (t, e) {var i = this.cfg,s = r.create(i.hasher, t),o = n.create(),a = n.create([1]),l = o.words,c = a.words,h = i.keySize;for (i = i.iterations; l.length < h;) {var u = s.update(e).finalize(a);s.reset();for (var d = u.words, p = d.length, f = u, g = 1; g < i; g++) {f = s.finalize(f), s.reset();for (var m = f.words, v = 0; v < p; v++) d[v] ^= m[v];}o.concat(u), c[0]++;}return o.sigBytes = 4 * h, o;} });e.PBKDF2 = function (t, e, i) {return s.create(i).compute(t, e);};}();var y,b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function w(t) {var e,i,n = "";for (e = 0; e + 3 <= t.length; e += 3) i = parseInt(t.substring(e, e + 3), 16), n += b.charAt(i >> 6) + b.charAt(63 & i);for (e + 1 == t.length ? (i = parseInt(t.substring(e, e + 1), 16), n += b.charAt(i << 2)) : e + 2 == t.length && (i = parseInt(t.substring(e, e + 2), 16), n += b.charAt(i >> 2) + b.charAt((3 & i) << 4)); (3 & n.length) > 0;) n += "=";return n;}function x(t) {var e,i,n,r = "",s = 0;for (e = 0; e < t.length && "=" != t.charAt(e); ++e) (n = b.indexOf(t.charAt(e))) < 0 || (0 == s ? (r += M(n >> 2), i = 3 & n, s = 1) : 1 == s ? (r += M(i << 2 | n >> 4), i = 15 & n, s = 2) : 2 == s ? (r += M(i), r += M(n >> 2), i = 3 & n, s = 3) : (r += M(i << 2 | n >> 4), r += M(15 & n), s = 0));return 1 == s && (r += M(i << 2)), r;}function S(t, e, i) {null != t && ("number" == typeof t ? this.fromNumber(t, e, i) : null == e && "string" != typeof t ? this.fromString(t, 256) : this.fromString(t, e));}function E() {return new S(null);}"Microsoft Internet Explorer" == g.appName ? (S.prototype.am = function (t, e, i, n, r, s) {for (var o = 32767 & e, a = e >> 15; --s >= 0;) {var l = 32767 & this[t],c = this[t++] >> 15,h = a * l + c * o;r = ((l = o * l + ((32767 & h) << 15) + i[n] + (1073741823 & r)) >>> 30) + (h >>> 15) + a * c + (r >>> 30), i[n++] = 1073741823 & l;}return r;}, y = 30) : "Netscape" != g.appName ? (S.prototype.am = function (t, e, i, n, r, s) {for (; --s >= 0;) {var o = e * this[t++] + i[n] + r;r = Math.floor(o / 67108864), i[n++] = 67108863 & o;}return r;}, y = 26) : (S.prototype.am = function (t, e, i, n, r, s) {for (var o = 16383 & e, a = e >> 14; --s >= 0;) {var l = 16383 & this[t],c = this[t++] >> 14,h = a * l + c * o;r = ((l = o * l + ((16383 & h) << 14) + i[n] + r) >> 28) + (h >> 14) + a * c, i[n++] = 268435455 & l;}return r;}, y = 28), S.prototype.DB = y, S.prototype.DM = (1 << y) - 1, S.prototype.DV = 1 << y, S.prototype.FV = Math.pow(2, 52), S.prototype.F1 = 52 - y, S.prototype.F2 = 2 * y - 52;var C,k,T = "0123456789abcdefghijklmnopqrstuvwxyz",A = new Array();for (C = "0".charCodeAt(0), k = 0; k <= 9; ++k) A[C++] = k;for (C = "a".charCodeAt(0), k = 10; k < 36; ++k) A[C++] = k;for (C = "A".charCodeAt(0), k = 10; k < 36; ++k) A[C++] = k;function M(t) {return T.charAt(t);}function _(t, e) {var i = A[t.charCodeAt(e)];return null == i ? -1 : i;}function P(t) {var e = E();return e.fromInt(t), e;}function D(t) {var e,i = 1;return 0 != (e = t >>> 16) && (t = e, i += 16), 0 != (e = t >> 8) && (t = e, i += 8), 0 != (e = t >> 4) && (t = e, i += 4), 0 != (e = t >> 2) && (t = e, i += 2), 0 != (e = t >> 1) && (t = e, i += 1), i;}function O(t) {this.m = t;}function I(t) {this.m = t, this.mp = t.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << t.DB - 15) - 1, this.mt2 = 2 * t.t;}function F(t, e) {return t & e;}function R(t, e) {return t | e;}function L(t, e) {return t ^ e;}function N(t, e) {return t & ~e;}function V(t) {if (0 == t) return -1;var e = 0;return 65535 & t || (t >>= 16, e += 16), 255 & t || (t >>= 8, e += 8), 15 & t || (t >>= 4, e += 4), 3 & t || (t >>= 2, e += 2), 1 & t || ++e, e;}function B(t) {for (var e = 0; 0 != t;) t &= t - 1, ++e;return e;}function j() {}function z(t) {return t;}function U(t) {this.r2 = E(), this.q3 = E(), S.ONE.dlShiftTo(2 * t.t, this.r2), this.mu = this.r2.divide(t), this.m = t;}O.prototype.convert = function (t) {return t.s < 0 || t.compareTo(this.m) >= 0 ? t.mod(this.m) : t;}, O.prototype.revert = function (t) {return t;}, O.prototype.reduce = function (t) {t.divRemTo(this.m, null, t);}, O.prototype.mulTo = function (t, e, i) {t.multiplyTo(e, i), this.reduce(i);}, O.prototype.sqrTo = function (t, e) {t.squareTo(e), this.reduce(e);}, I.prototype.convert = function (t) {var e = E();return t.abs().dlShiftTo(this.m.t, e), e.divRemTo(this.m, null, e), t.s < 0 && e.compareTo(S.ZERO) > 0 && this.m.subTo(e, e), e;}, I.prototype.revert = function (t) {var e = E();return t.copyTo(e), this.reduce(e), e;}, I.prototype.reduce = function (t) {for (; t.t <= this.mt2;) t[t.t++] = 0;for (var e = 0; e < this.m.t; ++e) {var i = 32767 & t[e],n = i * this.mpl + ((i * this.mph + (t[e] >> 15) * this.mpl & this.um) << 15) & t.DM;for (t[i = e + this.m.t] += this.m.am(0, n, t, e, 0, this.m.t); t[i] >= t.DV;) t[i] -= t.DV, t[++i]++;}t.clamp(), t.drShiftTo(this.m.t, t), t.compareTo(this.m) >= 0 && t.subTo(this.m, t);}, I.prototype.mulTo = function (t, e, i) {t.multiplyTo(e, i), this.reduce(i);}, I.prototype.sqrTo = function (t, e) {t.squareTo(e), this.reduce(e);}, S.prototype.copyTo = function (t) {for (var e = this.t - 1; e >= 0; --e) t[e] = this[e];t.t = this.t, t.s = this.s;}, S.prototype.fromInt = function (t) {this.t = 1, this.s = t < 0 ? -1 : 0, t > 0 ? this[0] = t : t < -1 ? this[0] = t + this.DV : this.t = 0;}, S.prototype.fromString = function (t, e) {var i;if (16 == e) i = 4;else if (8 == e) i = 3;else if (256 == e) i = 8;else if (2 == e) i = 1;else if (32 == e) i = 5;else {if (4 != e) return void this.fromRadix(t, e);i = 2;}this.t = 0, this.s = 0;for (var n = t.length, r = !1, s = 0; --n >= 0;) {var o = 8 == i ? 255 & t[n] : _(t, n);o < 0 ? "-" == t.charAt(n) && (r = !0) : (r = !1, 0 == s ? this[this.t++] = o : s + i > this.DB ? (this[this.t - 1] |= (o & (1 << this.DB - s) - 1) << s, this[this.t++] = o >> this.DB - s) : this[this.t - 1] |= o << s, (s += i) >= this.DB && (s -= this.DB));}8 == i && 128 & t[0] && (this.s = -1, s > 0 && (this[this.t - 1] |= (1 << this.DB - s) - 1 << s)), this.clamp(), r && S.ZERO.subTo(this, this);}, S.prototype.clamp = function () {for (var t = this.s & this.DM; this.t > 0 && this[this.t - 1] == t;) --this.t;}, S.prototype.dlShiftTo = function (t, e) {var i;for (i = this.t - 1; i >= 0; --i) e[i + t] = this[i];for (i = t - 1; i >= 0; --i) e[i] = 0;e.t = this.t + t, e.s = this.s;}, S.prototype.drShiftTo = function (t, e) {for (var i = t; i < this.t; ++i) e[i - t] = this[i];e.t = Math.max(this.t - t, 0), e.s = this.s;}, S.prototype.lShiftTo = function (t, e) {var i,n = t % this.DB,r = this.DB - n,s = (1 << r) - 1,o = Math.floor(t / this.DB),a = this.s << n & this.DM;for (i = this.t - 1; i >= 0; --i) e[i + o + 1] = this[i] >> r | a, a = (this[i] & s) << n;for (i = o - 1; i >= 0; --i) e[i] = 0;e[o] = a, e.t = this.t + o + 1, e.s = this.s, e.clamp();}, S.prototype.rShiftTo = function (t, e) {e.s = this.s;var i = Math.floor(t / this.DB);if (i >= this.t) e.t = 0;else {var n = t % this.DB,r = this.DB - n,s = (1 << n) - 1;e[0] = this[i] >> n;for (var o = i + 1; o < this.t; ++o) e[o - i - 1] |= (this[o] & s) << r, e[o - i] = this[o] >> n;n > 0 && (e[this.t - i - 1] |= (this.s & s) << r), e.t = this.t - i, e.clamp();}}, S.prototype.subTo = function (t, e) {for (var i = 0, n = 0, r = Math.min(t.t, this.t); i < r;) n += this[i] - t[i], e[i++] = n & this.DM, n >>= this.DB;if (t.t < this.t) {for (n -= t.s; i < this.t;) n += this[i], e[i++] = n & this.DM, n >>= this.DB;n += this.s;} else {for (n += this.s; i < t.t;) n -= t[i], e[i++] = n & this.DM, n >>= this.DB;n -= t.s;}e.s = n < 0 ? -1 : 0, n < -1 ? e[i++] = this.DV + n : n > 0 && (e[i++] = n), e.t = i, e.clamp();}, S.prototype.multiplyTo = function (t, e) {var i = this.abs(),n = t.abs(),r = i.t;for (e.t = r + n.t; --r >= 0;) e[r] = 0;for (r = 0; r < n.t; ++r) e[r + i.t] = i.am(0, n[r], e, r, 0, i.t);e.s = 0, e.clamp(), this.s != t.s && S.ZERO.subTo(e, e);}, S.prototype.squareTo = function (t) {for (var e = this.abs(), i = t.t = 2 * e.t; --i >= 0;) t[i] = 0;for (i = 0; i < e.t - 1; ++i) {var n = e.am(i, e[i], t, 2 * i, 0, 1);(t[i + e.t] += e.am(i + 1, 2 * e[i], t, 2 * i + 1, n, e.t - i - 1)) >= e.DV && (t[i + e.t] -= e.DV, t[i + e.t + 1] = 1);}t.t > 0 && (t[t.t - 1] += e.am(i, e[i], t, 2 * i, 0, 1)), t.s = 0, t.clamp();}, S.prototype.divRemTo = function (t, e, i) {var n = t.abs();if (!(n.t <= 0)) {var r = this.abs();if (r.t < n.t) return null != e && e.fromInt(0), void (null != i && this.copyTo(i));null == i && (i = E());var s = E(),o = this.s,a = t.s,l = this.DB - D(n[n.t - 1]);l > 0 ? (n.lShiftTo(l, s), r.lShiftTo(l, i)) : (n.copyTo(s), r.copyTo(i));var c = s.t,h = s[c - 1];if (0 != h) {var u = h * (1 << this.F1) + (c > 1 ? s[c - 2] >> this.F2 : 0),d = this.FV / u,p = (1 << this.F1) / u,f = 1 << this.F2,g = i.t,m = g - c,v = null == e ? E() : e;for (s.dlShiftTo(m, v), i.compareTo(v) >= 0 && (i[i.t++] = 1, i.subTo(v, i)), S.ONE.dlShiftTo(c, v), v.subTo(s, s); s.t < c;) s[s.t++] = 0;for (; --m >= 0;) {var y = i[--g] == h ? this.DM : Math.floor(i[g] * d + (i[g - 1] + f) * p);if ((i[g] += s.am(0, y, i, m, 0, c)) < y) for (s.dlShiftTo(m, v), i.subTo(v, i); i[g] < --y;) i.subTo(v, i);}null != e && (i.drShiftTo(c, e), o != a && S.ZERO.subTo(e, e)), i.t = c, i.clamp(), l > 0 && i.rShiftTo(l, i), o < 0 && S.ZERO.subTo(i, i);}}}, S.prototype.invDigit = function () {if (this.t < 1) return 0;var t = this[0];if (!(1 & t)) return 0;var e = 3 & t;return (e = (e = (e = (e = e * (2 - (15 & t) * e) & 15) * (2 - (255 & t) * e) & 255) * (2 - ((65535 & t) * e & 65535)) & 65535) * (2 - t * e % this.DV) % this.DV) > 0 ? this.DV - e : -e;}, S.prototype.isEven = function () {return 0 == (this.t > 0 ? 1 & this[0] : this.s);}, S.prototype.exp = function (t, e) {if (t > 4294967295 || t < 1) return S.ONE;var i = E(),n = E(),r = e.convert(this),s = D(t) - 1;for (r.copyTo(i); --s >= 0;) if (e.sqrTo(i, n), (t & 1 << s) > 0) e.mulTo(n, r, i);else {var o = i;i = n, n = o;}return e.revert(i);}, S.prototype.toString = function (t) {if (this.s < 0) return "-" + this.negate().toString(t);var e;if (16 == t) e = 4;else if (8 == t) e = 3;else if (2 == t) e = 1;else if (32 == t) e = 5;else {if (4 != t) return this.toRadix(t);e = 2;}var i,n = (1 << e) - 1,r = !1,s = "",o = this.t,a = this.DB - o * this.DB % e;if (o-- > 0) for (a < this.DB && (i = this[o] >> a) > 0 && (r = !0, s = M(i)); o >= 0;) a < e ? (i = (this[o] & (1 << a) - 1) << e - a, i |= this[--o] >> (a += this.DB - e)) : (i = this[o] >> (a -= e) & n, a <= 0 && (a += this.DB, --o)), i > 0 && (r = !0), r && (s += M(i));return r ? s : "0";}, S.prototype.negate = function () {var t = E();return S.ZERO.subTo(this, t), t;}, S.prototype.abs = function () {return this.s < 0 ? this.negate() : this;}, S.prototype.compareTo = function (t) {var e = this.s - t.s;if (0 != e) return e;var i = this.t;if (0 != (e = i - t.t)) return this.s < 0 ? -e : e;for (; --i >= 0;) if (0 != (e = this[i] - t[i])) return e;return 0;}, S.prototype.bitLength = function () {return this.t <= 0 ? 0 : this.DB * (this.t - 1) + D(this[this.t - 1] ^ this.s & this.DM);}, S.prototype.mod = function (t) {var e = E();return this.abs().divRemTo(t, null, e), this.s < 0 && e.compareTo(S.ZERO) > 0 && t.subTo(e, e), e;}, S.prototype.modPowInt = function (t, e) {var i;return i = t < 256 || e.isEven() ? new O(e) : new I(e), this.exp(t, i);}, S.ZERO = P(0), S.ONE = P(1), j.prototype.convert = z, j.prototype.revert = z, j.prototype.mulTo = function (t, e, i) {t.multiplyTo(e, i);}, j.prototype.sqrTo = function (t, e) {t.squareTo(e);}, U.prototype.convert = function (t) {if (t.s < 0 || t.t > 2 * this.m.t) return t.mod(this.m);if (t.compareTo(this.m) < 0) return t;var e = E();return t.copyTo(e), this.reduce(e), e;}, U.prototype.revert = function (t) {return t;}, U.prototype.reduce = function (t) {for (t.drShiftTo(this.m.t - 1, this.r2), t.t > this.m.t + 1 && (t.t = this.m.t + 1, t.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); t.compareTo(this.r2) < 0;) t.dAddOffset(1, this.m.t + 1);for (t.subTo(this.r2, t); t.compareTo(this.m) >= 0;) t.subTo(this.m, t);}, U.prototype.mulTo = function (t, e, i) {t.multiplyTo(e, i), this.reduce(i);}, U.prototype.sqrTo = function (t, e) {t.squareTo(e), this.reduce(e);};var H,q,$,G = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997],W = (1 << 26) / G[G.length - 1];function K() {this.i = 0, this.j = 0, this.S = new Array();}function Z() {!function (t) {q[$++] ^= 255 & t, q[$++] ^= t >> 8 & 255, q[$++] ^= t >> 16 & 255, q[$++] ^= t >> 24 & 255, $ >= 256 && ($ -= 256);}(new Date().getTime());}if (S.prototype.chunkSize = function (t) {return Math.floor(Math.LN2 * this.DB / Math.log(t));}, S.prototype.toRadix = function (t) {if (null == t && (t = 10), 0 == this.signum() || t < 2 || t > 36) return "0";var e = this.chunkSize(t),i = Math.pow(t, e),n = P(i),r = E(),s = E(),o = "";for (this.divRemTo(n, r, s); r.signum() > 0;) o = (i + s.intValue()).toString(t).substr(1) + o, r.divRemTo(n, r, s);return s.intValue().toString(t) + o;}, S.prototype.fromRadix = function (t, e) {this.fromInt(0), null == e && (e = 10);for (var i = this.chunkSize(e), n = Math.pow(e, i), r = !1, s = 0, o = 0, a = 0; a < t.length; ++a) {var l = _(t, a);l < 0 ? "-" == t.charAt(a) && 0 == this.signum() && (r = !0) : (o = e * o + l, ++s >= i && (this.dMultiply(n), this.dAddOffset(o, 0), s = 0, o = 0));}s > 0 && (this.dMultiply(Math.pow(e, s)), this.dAddOffset(o, 0)), r && S.ZERO.subTo(this, this);}, S.prototype.fromNumber = function (t, e, i) {if ("number" == typeof e) {if (t < 2) this.fromInt(1);else for (this.fromNumber(t, i), this.testBit(t - 1) || this.bitwiseTo(S.ONE.shiftLeft(t - 1), R, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(e);) this.dAddOffset(2, 0), this.bitLength() > t && this.subTo(S.ONE.shiftLeft(t - 1), this);} else {var n = new Array(),r = 7 & t;n.length = 1 + (t >> 3), e.nextBytes(n), r > 0 ? n[0] &= (1 << r) - 1 : n[0] = 0, this.fromString(n, 256);}}, S.prototype.bitwiseTo = function (t, e, i) {var n,r,s = Math.min(t.t, this.t);for (n = 0; n < s; ++n) i[n] = e(this[n], t[n]);if (t.t < this.t) {for (r = t.s & this.DM, n = s; n < this.t; ++n) i[n] = e(this[n], r);i.t = this.t;} else {for (r = this.s & this.DM, n = s; n < t.t; ++n) i[n] = e(r, t[n]);i.t = t.t;}i.s = e(this.s, t.s), i.clamp();}, S.prototype.changeBit = function (t, e) {var i = S.ONE.shiftLeft(t);return this.bitwiseTo(i, e, i), i;}, S.prototype.addTo = function (t, e) {for (var i = 0, n = 0, r = Math.min(t.t, this.t); i < r;) n += this[i] + t[i], e[i++] = n & this.DM, n >>= this.DB;if (t.t < this.t) {for (n += t.s; i < this.t;) n += this[i], e[i++] = n & this.DM, n >>= this.DB;n += this.s;} else {for (n += this.s; i < t.t;) n += t[i], e[i++] = n & this.DM, n >>= this.DB;n += t.s;}e.s = n < 0 ? -1 : 0, n > 0 ? e[i++] = n : n < -1 && (e[i++] = this.DV + n), e.t = i, e.clamp();}, S.prototype.dMultiply = function (t) {this[this.t] = this.am(0, t - 1, this, 0, 0, this.t), ++this.t, this.clamp();}, S.prototype.dAddOffset = function (t, e) {if (0 != t) {for (; this.t <= e;) this[this.t++] = 0;for (this[e] += t; this[e] >= this.DV;) this[e] -= this.DV, ++e >= this.t && (this[this.t++] = 0), ++this[e];}}, S.prototype.multiplyLowerTo = function (t, e, i) {var n,r = Math.min(this.t + t.t, e);for (i.s = 0, i.t = r; r > 0;) i[--r] = 0;for (n = i.t - this.t; r < n; ++r) i[r + this.t] = this.am(0, t[r], i, r, 0, this.t);for (n = Math.min(t.t, e); r < n; ++r) this.am(0, t[r], i, r, 0, e - r);i.clamp();}, S.prototype.multiplyUpperTo = function (t, e, i) {--e;var n = i.t = this.t + t.t - e;for (i.s = 0; --n >= 0;) i[n] = 0;for (n = Math.max(e - this.t, 0); n < t.t; ++n) i[this.t + n - e] = this.am(e - n, t[n], i, 0, 0, this.t + n - e);i.clamp(), i.drShiftTo(1, i);}, S.prototype.modInt = function (t) {if (t <= 0) return 0;var e = this.DV % t,i = this.s < 0 ? t - 1 : 0;if (this.t > 0) if (0 == e) i = this[0] % t;else for (var n = this.t - 1; n >= 0; --n) i = (e * i + this[n]) % t;return i;}, S.prototype.millerRabin = function (t) {var e = this.subtract(S.ONE),i = e.getLowestSetBit();if (i <= 0) return !1;var n = e.shiftRight(i);(t = t + 1 >> 1) > G.length && (t = G.length);for (var r = E(), s = 0; s < t; ++s) {r.fromInt(G[Math.floor(Math.random() * G.length)]);var o = r.modPow(n, this);if (0 != o.compareTo(S.ONE) && 0 != o.compareTo(e)) {for (var a = 1; a++ < i && 0 != o.compareTo(e);) if (0 == (o = o.modPowInt(2, this)).compareTo(S.ONE)) return !1;if (0 != o.compareTo(e)) return !1;}}return !0;}, S.prototype.clone = function () {var t = E();return this.copyTo(t), t;}, S.prototype.intValue = function () {if (this.s < 0) {if (1 == this.t) return this[0] - this.DV;if (0 == this.t) return -1;} else {if (1 == this.t) return this[0];if (0 == this.t) return 0;}return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];}, S.prototype.byteValue = function () {return 0 == this.t ? this.s : this[0] << 24 >> 24;}, S.prototype.shortValue = function () {return 0 == this.t ? this.s : this[0] << 16 >> 16;}, S.prototype.signum = function () {return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1;}, S.prototype.toByteArray = function () {var t = this.t,e = new Array();e[0] = this.s;var i,n = this.DB - t * this.DB % 8,r = 0;if (t-- > 0) for (n < this.DB && (i = this[t] >> n) != (this.s & this.DM) >> n && (e[r++] = i | this.s << this.DB - n); t >= 0;) n < 8 ? (i = (this[t] & (1 << n) - 1) << 8 - n, i |= this[--t] >> (n += this.DB - 8)) : (i = this[t] >> (n -= 8) & 255, n <= 0 && (n += this.DB, --t)), 128 & i && (i |= -256), 0 == r && (128 & this.s) != (128 & i) && ++r, (r > 0 || i != this.s) && (e[r++] = i);return e;}, S.prototype.equals = function (t) {return 0 == this.compareTo(t);}, S.prototype.min = function (t) {return this.compareTo(t) < 0 ? this : t;}, S.prototype.max = function (t) {return this.compareTo(t) > 0 ? this : t;}, S.prototype.and = function (t) {var e = E();return this.bitwiseTo(t, F, e), e;}, S.prototype.or = function (t) {var e = E();return this.bitwiseTo(t, R, e), e;}, S.prototype.xor = function (t) {var e = E();return this.bitwiseTo(t, L, e), e;}, S.prototype.andNot = function (t) {var e = E();return this.bitwiseTo(t, N, e), e;}, S.prototype.not = function () {for (var t = E(), e = 0; e < this.t; ++e) t[e] = this.DM & ~this[e];return t.t = this.t, t.s = ~this.s, t;}, S.prototype.shiftLeft = function (t) {var e = E();return t < 0 ? this.rShiftTo(-t, e) : this.lShiftTo(t, e), e;}, S.prototype.shiftRight = function (t) {var e = E();return t < 0 ? this.lShiftTo(-t, e) : this.rShiftTo(t, e), e;}, S.prototype.getLowestSetBit = function () {for (var t = 0; t < this.t; ++t) if (0 != this[t]) return t * this.DB + V(this[t]);return this.s < 0 ? this.t * this.DB : -1;}, S.prototype.bitCount = function () {for (var t = 0, e = this.s & this.DM, i = 0; i < this.t; ++i) t += B(this[i] ^ e);return t;}, S.prototype.testBit = function (t) {var e = Math.floor(t / this.DB);return e >= this.t ? 0 != this.s : !!(this[e] & 1 << t % this.DB);}, S.prototype.setBit = function (t) {return this.changeBit(t, R);}, S.prototype.clearBit = function (t) {return this.changeBit(t, N);}, S.prototype.flipBit = function (t) {return this.changeBit(t, L);}, S.prototype.add = function (t) {var e = E();return this.addTo(t, e), e;}, S.prototype.subtract = function (t) {var e = E();return this.subTo(t, e), e;}, S.prototype.multiply = function (t) {var e = E();return this.multiplyTo(t, e), e;}, S.prototype.divide = function (t) {var e = E();return this.divRemTo(t, e, null), e;}, S.prototype.remainder = function (t) {var e = E();return this.divRemTo(t, null, e), e;}, S.prototype.divideAndRemainder = function (t) {var e = E(),i = E();return this.divRemTo(t, e, i), new Array(e, i);}, S.prototype.modPow = function (t, e) {var i,n,r = t.bitLength(),s = P(1);if (r <= 0) return s;i = r < 18 ? 1 : r < 48 ? 3 : r < 144 ? 4 : r < 768 ? 5 : 6, n = r < 8 ? new O(e) : e.isEven() ? new U(e) : new I(e);var o = new Array(),a = 3,l = i - 1,c = (1 << i) - 1;if (o[1] = n.convert(this), i > 1) {var h = E();for (n.sqrTo(o[1], h); a <= c;) o[a] = E(), n.mulTo(h, o[a - 2], o[a]), a += 2;}var u,d,p = t.t - 1,f = !0,g = E();for (r = D(t[p]) - 1; p >= 0;) {for (r >= l ? u = t[p] >> r - l & c : (u = (t[p] & (1 << r + 1) - 1) << l - r, p > 0 && (u |= t[p - 1] >> this.DB + r - l)), a = i; !(1 & u);) u >>= 1, --a;if ((r -= a) < 0 && (r += this.DB, --p), f) o[u].copyTo(s), f = !1;else {for (; a > 1;) n.sqrTo(s, g), n.sqrTo(g, s), a -= 2;a > 0 ? n.sqrTo(s, g) : (d = s, s = g, g = d), n.mulTo(g, o[u], s);}for (; p >= 0 && !(t[p] & 1 << r);) n.sqrTo(s, g), d = s, s = g, g = d, --r < 0 && (r = this.DB - 1, --p);}return n.revert(s);}, S.prototype.modInverse = function (t) {var e = t.isEven();if (this.isEven() && e || 0 == t.signum()) return S.ZERO;for (var i = t.clone(), n = this.clone(), r = P(1), s = P(0), o = P(0), a = P(1); 0 != i.signum();) {for (; i.isEven();) i.rShiftTo(1, i), e ? (r.isEven() && s.isEven() || (r.addTo(this, r), s.subTo(t, s)), r.rShiftTo(1, r)) : s.isEven() || s.subTo(t, s), s.rShiftTo(1, s);for (; n.isEven();) n.rShiftTo(1, n), e ? (o.isEven() && a.isEven() || (o.addTo(this, o), a.subTo(t, a)), o.rShiftTo(1, o)) : a.isEven() || a.subTo(t, a), a.rShiftTo(1, a);i.compareTo(n) >= 0 ? (i.subTo(n, i), e && r.subTo(o, r), s.subTo(a, s)) : (n.subTo(i, n), e && o.subTo(r, o), a.subTo(s, a));}return 0 != n.compareTo(S.ONE) ? S.ZERO : a.compareTo(t) >= 0 ? a.subtract(t) : a.signum() < 0 ? (a.addTo(t, a), a.signum() < 0 ? a.add(t) : a) : a;}, S.prototype.pow = function (t) {return this.exp(t, new j());}, S.prototype.gcd = function (t) {var e = this.s < 0 ? this.negate() : this.clone(),i = t.s < 0 ? t.negate() : t.clone();if (e.compareTo(i) < 0) {var n = e;e = i, i = n;}var r = e.getLowestSetBit(),s = i.getLowestSetBit();if (s < 0) return e;for (r < s && (s = r), s > 0 && (e.rShiftTo(s, e), i.rShiftTo(s, i)); e.signum() > 0;) (r = e.getLowestSetBit()) > 0 && e.rShiftTo(r, e), (r = i.getLowestSetBit()) > 0 && i.rShiftTo(r, i), e.compareTo(i) >= 0 ? (e.subTo(i, e), e.rShiftTo(1, e)) : (i.subTo(e, i), i.rShiftTo(1, i));return s > 0 && i.lShiftTo(s, i), i;}, S.prototype.isProbablePrime = function (t) {var e,i = this.abs();if (1 == i.t && i[0] <= G[G.length - 1]) {for (e = 0; e < G.length; ++e) if (i[0] == G[e]) return !0;return !1;}if (i.isEven()) return !1;for (e = 1; e < G.length;) {for (var n = G[e], r = e + 1; r < G.length && n < W;) n *= G[r++];for (n = i.modInt(n); e < r;) if (n % G[e++] == 0) return !1;}return i.millerRabin(t);}, S.prototype.square = function () {var t = E();return this.squareTo(t), t;}, K.prototype.init = function (t) {var e, i, n;for (e = 0; e < 256; ++e) this.S[e] = e;for (i = 0, e = 0; e < 256; ++e) i = i + this.S[e] + t[e % t.length] & 255, n = this.S[e], this.S[e] = this.S[i], this.S[i] = n;this.i = 0, this.j = 0;}, K.prototype.next = function () {var t;return this.i = this.i + 1 & 255, this.j = this.j + this.S[this.i] & 255, t = this.S[this.i], this.S[this.i] = this.S[this.j], this.S[this.j] = t, this.S[t + this.S[this.i] & 255];}, null == q) {var Y;if (q = new Array(), $ = 0, void 0 !== m && (void 0 !== m.crypto || void 0 !== m.msCrypto)) {var X = m.crypto || m.msCrypto;if (X.getRandomValues) {var J = new Uint8Array(32);for (X.getRandomValues(J), Y = 0; Y < 32; ++Y) q[$++] = J[Y];} else if ("Netscape" == g.appName && g.appVersion < "5") {var Q = m.crypto.random(32);for (Y = 0; Y < Q.length; ++Y) q[$++] = 255 & Q.charCodeAt(Y);}}for (; $ < 256;) Y = Math.floor(65536 * Math.random()), q[$++] = Y >>> 8, q[$++] = 255 & Y;$ = 0, Z();}function tt() {if (null == H) {for (Z(), (H = new K()).init(q), $ = 0; $ < q.length; ++$) q[$] = 0;$ = 0;}return H.next();}function et() {}function it(t, e) {return new S(t, e);}function nt() {this.n = null, this.e = 0, this.d = null, this.p = null, this.q = null, this.dmp1 = null, this.dmq1 = null, this.coeff = null;}function rt(t, e) {this.x = e, this.q = t;}function st(t, e, i, n) {this.curve = t, this.x = e, this.y = i, this.z = null == n ? S.ONE : n, this.zinv = null;}function ot(t, e, i) {this.q = t, this.a = this.fromBigInteger(e), this.b = this.fromBigInteger(i), this.infinity = new st(this, null, null);}et.prototype.nextBytes = function (t) {var e;for (e = 0; e < t.length; ++e) t[e] = tt();}, nt.prototype.doPublic = function (t) {return t.modPowInt(this.e, this.n);}, nt.prototype.setPublic = function (t, e) {if (this.isPublic = !0, this.isPrivate = !1, "string" != typeof t) this.n = t, this.e = e;else {if (!(null != t && null != e && t.length > 0 && e.length > 0)) throw "Invalid RSA public key";this.n = it(t, 16), this.e = parseInt(e, 16);}}, nt.prototype.type = "RSA", nt.prototype.doPrivate = function (t) {if (null == this.p || null == this.q) return t.modPow(this.d, this.n);for (var e = t.mod(this.p).modPow(this.dmp1, this.p), i = t.mod(this.q).modPow(this.dmq1, this.q); e.compareTo(i) < 0;) e = e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i);}, nt.prototype.setPrivate = function (t, e, i) {if (this.isPrivate = !0, "string" != typeof t) this.n = t, this.e = e, this.d = i;else {if (!(null != t && null != e && t.length > 0 && e.length > 0)) throw "Invalid RSA private key";this.n = it(t, 16), this.e = parseInt(e, 16), this.d = it(i, 16);}}, nt.prototype.setPrivateEx = function (t, e, i, n, r, s, o, a) {if (this.isPrivate = !0, this.isPublic = !1, null == t) throw "RSASetPrivateEx N == null";if (null == e) throw "RSASetPrivateEx E == null";if (0 == t.length) throw "RSASetPrivateEx N.length == 0";if (0 == e.length) throw "RSASetPrivateEx E.length == 0";if (!(null != t && null != e && t.length > 0 && e.length > 0)) throw "Invalid RSA private key in RSASetPrivateEx";this.n = it(t, 16), this.e = parseInt(e, 16), this.d = it(i, 16), this.p = it(n, 16), this.q = it(r, 16), this.dmp1 = it(s, 16), this.dmq1 = it(o, 16), this.coeff = it(a, 16);}, nt.prototype.generate = function (t, e) {var i = new et(),n = t >> 1;this.e = parseInt(e, 16);for (var r = new S(e, 16), s = t / 2 - 100, o = S.ONE.shiftLeft(s);;) {for (; this.p = new S(t - n, 1, i), 0 != this.p.subtract(S.ONE).gcd(r).compareTo(S.ONE) || !this.p.isProbablePrime(10););for (; this.q = new S(n, 1, i), 0 != this.q.subtract(S.ONE).gcd(r).compareTo(S.ONE) || !this.q.isProbablePrime(10););if (this.p.compareTo(this.q) <= 0) {var a = this.p;this.p = this.q, this.q = a;}var l = this.q.subtract(this.p).abs();if (!(l.bitLength() < s || l.compareTo(o) <= 0)) {var c = this.p.subtract(S.ONE),h = this.q.subtract(S.ONE),u = c.multiply(h);if (0 == u.gcd(r).compareTo(S.ONE) && (this.n = this.p.multiply(this.q), this.n.bitLength() == t)) {this.d = r.modInverse(u), this.dmp1 = this.d.mod(c), this.dmq1 = this.d.mod(h), this.coeff = this.q.modInverse(this.p);break;}}}this.isPrivate = !0;}, rt.prototype.equals = function (t) {return t == this || this.q.equals(t.q) && this.x.equals(t.x);}, rt.prototype.toBigInteger = function () {return this.x;}, rt.prototype.negate = function () {return new rt(this.q, this.x.negate().mod(this.q));}, rt.prototype.add = function (t) {return new rt(this.q, this.x.add(t.toBigInteger()).mod(this.q));}, rt.prototype.subtract = function (t) {return new rt(this.q, this.x.subtract(t.toBigInteger()).mod(this.q));}, rt.prototype.multiply = function (t) {return new rt(this.q, this.x.multiply(t.toBigInteger()).mod(this.q));}, rt.prototype.square = function () {return new rt(this.q, this.x.square().mod(this.q));}, rt.prototype.divide = function (t) {return new rt(this.q, this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q));}, rt.prototype.sqrt = function () {return new rt(this.q, this.x.sqrt().mod(this.q));}, st.prototype.getX = function () {return null == this.zinv && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q));}, st.prototype.getY = function () {return null == this.zinv && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q));}, st.prototype.equals = function (t) {return t == this || (this.isInfinity() ? t.isInfinity() : t.isInfinity() ? this.isInfinity() : !!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(S.ZERO) && t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(S.ZERO));}, st.prototype.isInfinity = function () {return null == this.x && null == this.y || this.z.equals(S.ZERO) && !this.y.toBigInteger().equals(S.ZERO);}, st.prototype.negate = function () {return new st(this.curve, this.x, this.y.negate(), this.z);}, st.prototype.add = function (t) {if (this.isInfinity()) return t;if (t.isInfinity()) return this;var e = t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),i = t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if (S.ZERO.equals(i)) return S.ZERO.equals(e) ? this.twice() : this.curve.getInfinity();var n = new S("3"),r = this.x.toBigInteger(),s = this.y.toBigInteger(),o = (t.x.toBigInteger(), t.y.toBigInteger(), i.square()),a = o.multiply(i),l = r.multiply(o),c = e.square().multiply(this.z),h = c.subtract(l.shiftLeft(1)).multiply(t.z).subtract(a).multiply(i).mod(this.curve.q),u = l.multiply(n).multiply(e).subtract(s.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),d = a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new st(this.curve, this.curve.fromBigInteger(h), this.curve.fromBigInteger(u), d);}, st.prototype.twice = function () {if (this.isInfinity()) return this;if (0 == this.y.toBigInteger().signum()) return this.curve.getInfinity();var t = new S("3"),e = this.x.toBigInteger(),i = this.y.toBigInteger(),n = i.multiply(this.z),r = n.multiply(i).mod(this.curve.q),s = this.curve.a.toBigInteger(),o = e.square().multiply(t);S.ZERO.equals(s) || (o = o.add(this.z.square().multiply(s)));var a = (o = o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(r)).shiftLeft(1).multiply(n).mod(this.curve.q),l = o.multiply(t).multiply(e).subtract(r.shiftLeft(1)).shiftLeft(2).multiply(r).subtract(o.square().multiply(o)).mod(this.curve.q),c = n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new st(this.curve, this.curve.fromBigInteger(a), this.curve.fromBigInteger(l), c);}, st.prototype.multiply = function (t) {if (this.isInfinity()) return this;if (0 == t.signum()) return this.curve.getInfinity();var e,i = t,n = i.multiply(new S("3")),r = this.negate(),s = this,o = this.curve.q.subtract(t),a = o.multiply(new S("3")),l = new st(this.curve, this.x, this.y),c = l.negate();for (e = n.bitLength() - 2; e > 0; --e) {s = s.twice();var h = n.testBit(e);h != i.testBit(e) && (s = s.add(h ? this : r));}for (e = a.bitLength() - 2; e > 0; --e) {l = l.twice();var u = a.testBit(e);u != o.testBit(e) && (l = l.add(u ? l : c));}return s;}, st.prototype.multiplyTwo = function (t, e, i) {var n;n = t.bitLength() > i.bitLength() ? t.bitLength() - 1 : i.bitLength() - 1;for (var r = this.curve.getInfinity(), s = this.add(e); n >= 0;) r = r.twice(), t.testBit(n) ? r = i.testBit(n) ? r.add(s) : r.add(this) : i.testBit(n) && (r = r.add(e)), --n;return r;}, ot.prototype.getQ = function () {return this.q;}, ot.prototype.getA = function () {return this.a;}, ot.prototype.getB = function () {return this.b;}, ot.prototype.equals = function (t) {return t == this || this.q.equals(t.q) && this.a.equals(t.a) && this.b.equals(t.b);}, ot.prototype.getInfinity = function () {return this.infinity;}, ot.prototype.fromBigInteger = function (t) {return new rt(this.q, t);}, ot.prototype.decodePointHex = function (t) {switch (parseInt(t.substr(0, 2), 16)) {case 0:return this.infinity;case 2:case 3:var e = t.substr(0, 2),i = (t.substr(2), this.fromBigInteger(new S(a, 16))),n = this.getA(),r = this.getB(),s = i.square().add(n).multiply(i).add(r).sqrt();return "03" == e && (s = s.negate()), new st(this, i, s);case 4:case 6:case 7:var o = (t.length - 2) / 2,a = t.substr(2, o),l = t.substr(o + 2, o);return new st(this, this.fromBigInteger(new S(a, 16)), this.fromBigInteger(new S(l, 16)));default:return null;}}, rt.prototype.getByteLength = function () {return Math.floor((this.toBigInteger().bitLength() + 7) / 8);}, st.prototype.getEncoded = function (t) {var e = function (t, e) {var i = t.toByteArrayUnsigned();if (e < i.length) i = i.slice(i.length - e);else for (; e > i.length;) i.unshift(0);return i;},i = this.getX().toBigInteger(),n = this.getY().toBigInteger(),r = e(i, 32);return t ? n.isEven() ? r.unshift(2) : r.unshift(3) : (r.unshift(4), r = r.concat(e(n, 32))), r;}, st.decodeFrom = function (t, e) {e[0];var i = e.length - 1,n = e.slice(1, 1 + i / 2),r = e.slice(1 + i / 2, 1 + i);n.unshift(0), r.unshift(0);var s = new S(n),o = new S(r);return new st(t, t.fromBigInteger(s), t.fromBigInteger(o));}, st.decodeFromHex = function (t, e) {e.substr(0, 2);var i = e.length - 2,n = e.substr(2, i / 2),r = e.substr(2 + i / 2, i / 2),s = new S(n, 16),o = new S(r, 16);return new st(t, t.fromBigInteger(s), t.fromBigInteger(o));}, st.prototype.add2D = function (t) {if (this.isInfinity()) return t;if (t.isInfinity()) return this;if (this.x.equals(t.x)) return this.y.equals(t.y) ? this.twice() : this.curve.getInfinity();var e = t.x.subtract(this.x),i = t.y.subtract(this.y).divide(e),n = i.square().subtract(this.x).subtract(t.x),r = i.multiply(this.x.subtract(n)).subtract(this.y);return new st(this.curve, n, r);}, st.prototype.twice2D = function () {if (this.isInfinity()) return this;if (0 == this.y.toBigInteger().signum()) return this.curve.getInfinity();var t = this.curve.fromBigInteger(S.valueOf(2)),e = this.curve.fromBigInteger(S.valueOf(3)),i = this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n = i.square().subtract(this.x.multiply(t)),r = i.multiply(this.x.subtract(n)).subtract(this.y);return new st(this.curve, n, r);}, st.prototype.multiply2D = function (t) {if (this.isInfinity()) return this;if (0 == t.signum()) return this.curve.getInfinity();var e,i = t,n = i.multiply(new S("3")),r = this.negate(),s = this;for (e = n.bitLength() - 2; e > 0; --e) {s = s.twice();var o = n.testBit(e);o != i.testBit(e) && (s = s.add2D(o ? this : r));}return s;}, st.prototype.isOnCurve = function () {var t = this.getX().toBigInteger(),e = this.getY().toBigInteger(),i = this.curve.getA().toBigInteger(),n = this.curve.getB().toBigInteger(),r = this.curve.getQ(),s = e.multiply(e).mod(r),o = t.multiply(t).multiply(t).add(i.multiply(t)).add(n).mod(r);return s.equals(o);}, st.prototype.toString = function () {return "(" + this.getX().toBigInteger().toString() + "," + this.getY().toBigInteger().toString() + ")";}, st.prototype.validate = function () {var t = this.curve.getQ();if (this.isInfinity()) throw new Error("Point is at infinity.");var e = this.getX().toBigInteger(),i = this.getY().toBigInteger();if (e.compareTo(S.ONE) < 0 || e.compareTo(t.subtract(S.ONE)) > 0) throw new Error("x coordinate out of bounds");if (i.compareTo(S.ONE) < 0 || i.compareTo(t.subtract(S.ONE)) > 0) throw new Error("y coordinate out of bounds");if (!this.isOnCurve()) throw new Error("Point is not on the curve.");if (this.multiply(t).isInfinity()) throw new Error("Point is not a scalar multiple of G.");return !0;};var at = function () {var t = new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))', "g"),e = new RegExp("\\\\(?:([^u])|u(.{4}))", "g"),i = { '"': '"', "/": "/", "\\": "\\", b: "\b", f: "\f", n: "\n", r: "\r", t: "\t" };function n(t, e, n) {return e ? i[e] : String.fromCharCode(parseInt(n, 16));}var r = new String(""),s = Object.hasOwnProperty;return function (i, o) {var a,l,c = i.match(t),h = c[0],u = !1;"{" === h ? a = {} : "[" === h ? a = [] : (a = [], u = !0);for (var d = [a], p = 1 - u, f = c.length; p < f; ++p) {var g;switch ((h = c[p]).charCodeAt(0)) {default:(g = d[0])[l || g.length] = +h, l = void 0;break;case 34:if (-1 !== (h = h.substring(1, h.length - 1)).indexOf("\\") && (h = h.replace(e, n)), g = d[0], !l) {if (!(g instanceof Array)) {l = h || r;break;}l = g.length;}g[l] = h, l = void 0;break;case 91:g = d[0], d.unshift(g[l || g.length] = []), l = void 0;break;case 93:case 125:d.shift();break;case 102:(g = d[0])[l || g.length] = !1, l = void 0;break;case 110:(g = d[0])[l || g.length] = null, l = void 0;break;case 116:(g = d[0])[l || g.length] = !0, l = void 0;break;case 123:g = d[0], d.unshift(g[l || g.length] = {}), l = void 0;}}if (u) {if (1 !== d.length) throw new Error();a = a[0];} else if (d.length) throw new Error();if (o) {var m = function (t, e) {var i = t[e];if (i && "object" == typeof i) {var n = null;for (var r in i) if (s.call(i, r) && i !== t) {var a = m(i, r);void 0 !== a ? i[r] = a : (n || (n = []), n.push(r));}if (n) for (var l = n.length; --l >= 0;) delete i[n[l]];}return o.call(t, e, i);};a = m({ "": a }, "");}return a;};}();void 0 !== lt && lt || (lt = {}), void 0 !== lt.asn1 && lt.asn1 || (lt.asn1 = {}), lt.asn1.ASN1Util = new function () {this.integerToByteHex = function (t) {var e = t.toString(16);return e.length % 2 == 1 && (e = "0" + e), e;}, this.bigIntToMinTwosComplementsHex = function (t) {return zt(t);}, this.getPEMStringFromHex = function (t, e) {return Et(t, e);}, this.newObject = function (t) {var e = lt.asn1,i = e.ASN1Object,n = e.DERBoolean,r = e.DERInteger,s = e.DERBitString,o = e.DEROctetString,a = e.DERNull,l = e.DERObjectIdentifier,c = e.DEREnumerated,h = e.DERUTF8String,u = e.DERNumericString,d = e.DERPrintableString,p = e.DERTeletexString,f = e.DERIA5String,g = e.DERUTCTime,m = e.DERGeneralizedTime,v = e.DERVisibleString,y = e.DERBMPString,b = e.DERSequence,w = e.DERSet,x = e.DERTaggedObject,S = e.ASN1Util.newObject;if (t instanceof e.ASN1Object) return t;var E = Object.keys(t);if (1 != E.length) throw new Error("key of param shall be only one.");var C = E[0];if (-1 == ":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":" + C + ":")) throw new Error("undefined key: " + C);if ("bool" == C) return new n(t[C]);if ("int" == C) return new r(t[C]);if ("bitstr" == C) return new s(t[C]);if ("octstr" == C) return new o(t[C]);if ("null" == C) return new a(t[C]);if ("oid" == C) return new l(t[C]);if ("enum" == C) return new c(t[C]);if ("utf8str" == C) return new h(t[C]);if ("numstr" == C) return new u(t[C]);if ("prnstr" == C) return new d(t[C]);if ("telstr" == C) return new p(t[C]);if ("ia5str" == C) return new f(t[C]);if ("utctime" == C) return new g(t[C]);if ("gentime" == C) return new m(t[C]);if ("visstr" == C) return new v(t[C]);if ("bmpstr" == C) return new y(t[C]);if ("asn1" == C) return new i(t[C]);if ("seq" == C) {for (var k = t[C], T = [], A = 0; A < k.length; A++) {var M = S(k[A]);T.push(M);}return new b({ array: T });}if ("set" == C) {for (k = t[C], T = [], A = 0; A < k.length; A++) M = S(k[A]), T.push(M);return new w({ array: T });}if ("tag" == C) {var _ = t[C];if ("[object Array]" === Object.prototype.toString.call(_) && 3 == _.length) {var P = S(_[2]);return new x({ tag: _[0], explicit: _[1], obj: P });}return new x(_);}}, this.jsonToASN1HEX = function (t) {return this.newObject(t).tohex();};}(), lt.asn1.ASN1Util.oidHexToInt = function (t) {for (var e = "", i = parseInt(t.substr(0, 2), 16), n = (e = Math.floor(i / 40) + "." + i % 40, ""), r = 2; r < t.length; r += 2) {var s = ("00000000" + parseInt(t.substr(r, 2), 16).toString(2)).slice(-8);n += s.substr(1, 7), "0" == s.substr(0, 1) && (e = e + "." + new S(n, 2).toString(10), n = "");}return e;}, lt.asn1.ASN1Util.oidIntToHex = function (t) {var e = function (t) {var e = t.toString(16);return 1 == e.length && (e = "0" + e), e;},i = function (t) {var i = "",n = new S(t, 10).toString(2),r = 7 - n.length % 7;7 == r && (r = 0);for (var s = "", o = 0; o < r; o++) s += "0";for (n = s + n, o = 0; o < n.length - 1; o += 7) {var a = n.substr(o, 7);o != n.length - 7 && (a = "1" + a), i += e(parseInt(a, 2));}return i;};if (!t.match(/^[0-9.]+$/)) throw "malformed oid string: " + t;var n = "",r = t.split("."),s = 40 * parseInt(r[0]) + parseInt(r[1]);n += e(s), r.splice(0, 2);for (var o = 0; o < r.length; o++) n += i(r[o]);return n;}, lt.asn1.ASN1Object = function (t) {this.params = null, this.getLengthHexFromValue = function () {if (void 0 === this.hV || null == this.hV) throw new Error("this.hV is null or undefined");if (this.hV.length % 2 == 1) throw new Error("value hex must be even length: n=0,v=" + this.hV);var t = this.hV.length / 2,e = t.toString(16);if (e.length % 2 == 1 && (e = "0" + e), t < 128) return e;var i = e.length / 2;if (i > 15) throw new Error("ASN.1 length too long to represent by 8x: n = " + t.toString(16));return (128 + i).toString(16) + e;}, this.tohex = function () {return (null == this.hTLV || this.isModified) && (this.hV = this.getFreshValueHex(), this.hL = this.getLengthHexFromValue(), this.hTLV = this.hT + this.hL + this.hV, this.isModified = !1), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, this.getValueHex = function () {return this.tohex(), this.hV;}, this.getFreshValueHex = function () {return "";}, this.setByParam = function (t) {this.params = t;}, null != t && null != t.tlv && (this.hTLV = t.tlv, this.isModified = !1);}, lt.asn1.DERAbstractString = function (t) {lt.asn1.DERAbstractString.superclass.constructor.call(this), this.getString = function () {return this.s;}, this.setString = function (t) {this.hTLV = null, this.isModified = !0, this.s = t, this.hV = yt(this.s).toLowerCase();}, this.setStringHex = function (t) {this.hTLV = null, this.isModified = !0, this.s = null, this.hV = t;}, this.getFreshValueHex = function () {return this.hV;}, void 0 !== t && ("string" == typeof t ? this.setString(t) : void 0 !== t.str ? this.setString(t.str) : void 0 !== t.hex && this.setStringHex(t.hex));}, $t(lt.asn1.DERAbstractString, lt.asn1.ASN1Object), lt.asn1.DERAbstractTime = function (t) {lt.asn1.DERAbstractTime.superclass.constructor.call(this), this.localDateToUTC = function (t) {var e = t.getTime() + 6e4 * t.getTimezoneOffset();return new Date(e);}, this.formatDate = function (t, e, i) {var n = this.zeroPadding,r = this.localDateToUTC(t),s = String(r.getFullYear());"utc" == e && (s = s.substr(2, 2));var o = s + n(String(r.getMonth() + 1), 2) + n(String(r.getDate()), 2) + n(String(r.getHours()), 2) + n(String(r.getMinutes()), 2) + n(String(r.getSeconds()), 2);if (!0 === i) {var a = r.getMilliseconds();if (0 != a) {var l = n(String(a), 3);o = o + "." + (l = l.replace(/[0]+$/, ""));}}return o + "Z";}, this.zeroPadding = function (t, e) {return t.length >= e ? t : new Array(e - t.length + 1).join("0") + t;}, this.setByParam = function (t) {this.hV = null, this.hTLV = null, this.params = t;}, this.getString = function () {}, this.setString = function (t) {this.hTLV = null, this.isModified = !0, null == this.params && (this.params = {}), this.params.str = t;}, this.setByDate = function (t) {this.hTLV = null, this.isModified = !0, null == this.params && (this.params = {}), this.params.date = t;}, this.setByDateValue = function (t, e, i, n, r, s) {var o = new Date(Date.UTC(t, e - 1, i, n, r, s, 0));this.setByDate(o);}, this.getFreshValueHex = function () {return this.hV;};}, $t(lt.asn1.DERAbstractTime, lt.asn1.ASN1Object), lt.asn1.DERAbstractStructured = function (t) {lt.asn1.DERAbstractString.superclass.constructor.call(this), this.setByASN1ObjectArray = function (t) {this.hTLV = null, this.isModified = !0, this.asn1Array = t;}, this.appendASN1Object = function (t) {this.hTLV = null, this.isModified = !0, this.asn1Array.push(t);}, this.asn1Array = new Array(), void 0 !== t && void 0 !== t.array && (this.asn1Array = t.array);}, $t(lt.asn1.DERAbstractStructured, lt.asn1.ASN1Object), lt.asn1.DERBoolean = function (t) {lt.asn1.DERBoolean.superclass.constructor.call(this), this.hT = "01", this.hTLV = 0 == t ? "010100" : "0101ff";}, $t(lt.asn1.DERBoolean, lt.asn1.ASN1Object), lt.asn1.DERInteger = function (t) {lt.asn1.DERInteger.superclass.constructor.call(this), this.hT = "02", this.params = null;var e = zt;this.setByBigInteger = function (t) {this.isModified = !0, this.params = { bigint: t };}, this.setByInteger = function (t) {this.isModified = !0, this.params = t;}, this.setValueHex = function (t) {this.isModified = !0, this.params = { hex: t };}, this.getFreshValueHex = function () {var t = this.params,i = null;if (null == t) throw new Error("value not set");if ("object" == typeof t && null != t.hex) return this.hV = t.hex, this.hV;if ("number" == typeof t) i = new S(String(t), 10);else if (null != t.int) i = new S(String(t.int), 10);else {if (null == t.bigint) throw new Error("wrong parameter");i = t.bigint;}return this.hV = e(i), this.hV;}, null != t && (this.params = t);}, $t(lt.asn1.DERInteger, lt.asn1.ASN1Object), lt.asn1.DERBitString = function (t) {if (void 0 !== t && void 0 !== t.obj) {var e = lt.asn1.ASN1Util.newObject(t.obj);t.hex = "00" + e.tohex();}lt.asn1.DERBitString.superclass.constructor.call(this), this.hT = "03", this.setHexValueIncludingUnusedBits = function (t) {this.hTLV = null, this.isModified = !0, this.hV = t;}, this.setUnusedBitsAndHexValue = function (t, e) {if (t < 0 || 7 < t) throw "unused bits shall be from 0 to 7: u = " + t;var i = "0" + t;this.hTLV = null, this.isModified = !0, this.hV = i + e;}, this.setByBinaryString = function (t) {var e = 8 - (t = t.replace(/0+$/, "")).length % 8;8 == e && (e = 0), t += "0000000".substr(0, e);for (var i = "", n = 0; n < t.length - 1; n += 8) {var r = t.substr(n, 8),s = parseInt(r, 2).toString(16);1 == s.length && (s = "0" + s), i += s;}this.hTLV = null, this.isModified = !0, this.hV = "0" + e + i;}, this.setByBooleanArray = function (t) {for (var e = "", i = 0; i < t.length; i++) 1 == t[i] ? e += "1" : e += "0";this.setByBinaryString(e);}, this.newFalseArray = function (t) {for (var e = new Array(t), i = 0; i < t; i++) e[i] = !1;return e;}, this.getFreshValueHex = function () {return this.hV;}, void 0 !== t && ("string" == typeof t && t.toLowerCase().match(/^[0-9a-f]+$/) ? this.setHexValueIncludingUnusedBits(t) : void 0 !== t.hex ? this.setHexValueIncludingUnusedBits(t.hex) : void 0 !== t.bin ? this.setByBinaryString(t.bin) : void 0 !== t.array && this.setByBooleanArray(t.array));}, $t(lt.asn1.DERBitString, lt.asn1.ASN1Object), lt.asn1.DEROctetString = function (t) {if (void 0 !== t && void 0 !== t.obj) {var e = lt.asn1.ASN1Util.newObject(t.obj);t.hex = e.tohex();}lt.asn1.DEROctetString.superclass.constructor.call(this, t), this.hT = "04";}, $t(lt.asn1.DEROctetString, lt.asn1.DERAbstractString), lt.asn1.DERNull = function () {lt.asn1.DERNull.superclass.constructor.call(this), this.hT = "05", this.hTLV = "0500";}, $t(lt.asn1.DERNull, lt.asn1.ASN1Object), lt.asn1.DERObjectIdentifier = function (t) {lt.asn1.DERObjectIdentifier.superclass.constructor.call(this), this.hT = "06", this.setValueHex = function (t) {this.hTLV = null, this.isModified = !0, this.s = null, this.hV = t;}, this.setValueOidString = function (t) {var e = function (t) {var e = function (t) {var e = t.toString(16);return 1 == e.length && (e = "0" + e), e;},i = function (t) {var i = "",n = parseInt(t, 10).toString(2),r = 7 - n.length % 7;7 == r && (r = 0);for (var s = "", o = 0; o < r; o++) s += "0";for (n = s + n, o = 0; o < n.length - 1; o += 7) {var a = n.substr(o, 7);o != n.length - 7 && (a = "1" + a), i += e(parseInt(a, 2));}return i;};try {if (!t.match(/^[0-9.]+$/)) return null;var n = "",r = t.split("."),s = 40 * parseInt(r[0], 10) + parseInt(r[1], 10);n += e(s), r.splice(0, 2);for (var o = 0; o < r.length; o++) n += i(r[o]);return n;} catch (t) {return null;}}(t);if (null == e) throw new Error("malformed oid string: " + t);this.hTLV = null, this.isModified = !0, this.s = null, this.hV = e;}, this.setValueName = function (t) {var e = lt.asn1.x509.OID.name2oid(t);if ("" === e) throw new Error("DERObjectIdentifier oidName undefined: " + t);this.setValueOidString(e);}, this.setValueNameOrOid = function (t) {t.match(/^[0-2].[0-9.]+$/) ? this.setValueOidString(t) : this.setValueName(t);}, this.getFreshValueHex = function () {return this.hV;}, this.setByParam = function (t) {"string" == typeof t ? this.setValueNameOrOid(t) : void 0 !== t.oid ? this.setValueNameOrOid(t.oid) : void 0 !== t.name ? this.setValueNameOrOid(t.name) : void 0 !== t.hex && this.setValueHex(t.hex);}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.DERObjectIdentifier, lt.asn1.ASN1Object), lt.asn1.DEREnumerated = function (t) {lt.asn1.DEREnumerated.superclass.constructor.call(this), this.hT = "0a", this.setByBigInteger = function (t) {this.hTLV = null, this.isModified = !0, this.hV = zt(t);}, this.setByInteger = function (t) {var e = new S(String(t), 10);this.setByBigInteger(e);}, this.setValueHex = function (t) {this.hV = t;}, this.getFreshValueHex = function () {return this.hV;}, void 0 !== t && (void 0 !== t.int ? this.setByInteger(t.int) : "number" == typeof t ? this.setByInteger(t) : void 0 !== t.hex && this.setValueHex(t.hex));}, $t(lt.asn1.DEREnumerated, lt.asn1.ASN1Object), lt.asn1.DERUTF8String = function (t) {lt.asn1.DERUTF8String.superclass.constructor.call(this, t), this.hT = "0c";}, $t(lt.asn1.DERUTF8String, lt.asn1.DERAbstractString), lt.asn1.DERNumericString = function (t) {lt.asn1.DERNumericString.superclass.constructor.call(this, t), this.hT = "12";}, $t(lt.asn1.DERNumericString, lt.asn1.DERAbstractString), lt.asn1.DERPrintableString = function (t) {lt.asn1.DERPrintableString.superclass.constructor.call(this, t), this.hT = "13";}, $t(lt.asn1.DERPrintableString, lt.asn1.DERAbstractString), lt.asn1.DERTeletexString = function (t) {lt.asn1.DERTeletexString.superclass.constructor.call(this, t), this.hT = "14";}, $t(lt.asn1.DERTeletexString, lt.asn1.DERAbstractString), lt.asn1.DERIA5String = function (t) {lt.asn1.DERIA5String.superclass.constructor.call(this, t), this.hT = "16";}, $t(lt.asn1.DERIA5String, lt.asn1.DERAbstractString), lt.asn1.DERVisibleString = function (t) {lt.asn1.DERIA5String.superclass.constructor.call(this, t), this.hT = "1a";}, $t(lt.asn1.DERVisibleString, lt.asn1.DERAbstractString), lt.asn1.DERBMPString = function (t) {lt.asn1.DERBMPString.superclass.constructor.call(this, t), this.hT = "1e";}, $t(lt.asn1.DERBMPString, lt.asn1.DERAbstractString), lt.asn1.DERUTCTime = function (t) {lt.asn1.DERUTCTime.superclass.constructor.call(this, t), this.hT = "17", this.params = void 0, this.getFreshValueHex = function () {var t = this.params;if (null == this.params && (t = { date: new Date() }), "string" == typeof t) {if (!t.match(/^[0-9]{12}Z$/) && !t.match(/^[0-9]{12}\.[0-9]+Z$/)) throw new Error("malformed string for UTCTime: " + t);this.hV = pt(t);} else if (null != t.str) this.hV = pt(t.str);else if (null == t.date && 1 == t.millis) {var e = new Date();this.hV = pt(this.formatDate(e, "utc", !0));} else if (null != t.date && t.date instanceof Date) {var i = !0 === t.millis;this.hV = pt(this.formatDate(t.date, "utc", i));} else t instanceof Date && (this.hV = pt(this.formatDate(t, "utc")));if (null == this.hV) throw new Error("parameter not specified properly for UTCTime");return this.hV;}, null != t && this.setByParam(t);}, $t(lt.asn1.DERUTCTime, lt.asn1.DERAbstractTime), lt.asn1.DERGeneralizedTime = function (t) {lt.asn1.DERGeneralizedTime.superclass.constructor.call(this, t), this.hT = "18", this.params = t, this.getFreshValueHex = function () {var t = this.params;if (null == this.params && (t = { date: new Date() }), "string" == typeof t) {if (!t.match(/^[0-9]{14}Z$/) && !t.match(/^[0-9]{14}\.[0-9]+Z$/)) throw new Error("malformed string for GeneralizedTime: " + t);this.hV = pt(t);} else if (null != t.str) this.hV = pt(t.str);else if (null == t.date && 1 == t.millis) {var e = new Date();this.hV = pt(this.formatDate(e, "gen", !0));} else if (null != t.date && t.date instanceof Date) {var i = !0 === t.millis;this.hV = pt(this.formatDate(t.date, "gen", i));} else t instanceof Date && (this.hV = pt(this.formatDate(t, "gen")));if (null == this.hV) throw new Error("parameter not specified properly for GeneralizedTime");return this.hV;}, null != t && this.setByParam(t);}, $t(lt.asn1.DERGeneralizedTime, lt.asn1.DERAbstractTime), lt.asn1.DERSequence = function (t) {lt.asn1.DERSequence.superclass.constructor.call(this, t), this.hT = "30", this.getFreshValueHex = function () {for (var t = "", e = 0; e < this.asn1Array.length; e++) t += this.asn1Array[e].tohex();return this.hV = t, this.hV;};}, $t(lt.asn1.DERSequence, lt.asn1.DERAbstractStructured), lt.asn1.DERSet = function (t) {lt.asn1.DERSet.superclass.constructor.call(this, t), this.hT = "31", this.sortFlag = !0, this.getFreshValueHex = function () {for (var t = new Array(), e = 0; e < this.asn1Array.length; e++) {var i = this.asn1Array[e];t.push(i.tohex());}return 1 == this.sortFlag && t.sort(), this.hV = t.join(""), this.hV;}, void 0 !== t && void 0 !== t.sortflag && 0 == t.sortflag && (this.sortFlag = !1);}, $t(lt.asn1.DERSet, lt.asn1.DERAbstractStructured), lt.asn1.DERTaggedObject = function (t) {lt.asn1.DERTaggedObject.superclass.constructor.call(this);var e = lt.asn1,i = ut,n = i.getV,r = (i.isASN1HEX, e.ASN1Util.newObject);this.hT = "a0", this.hV = "", this.isExplicit = !0, this.asn1Object = null, this.params = { tag: "a0", explicit: !0 }, this.setASN1Object = function (t, e, i) {this.params = { tag: e, explicit: t, obj: i };}, this.getFreshValueHex = function () {var t = this.params;if (null == t.explicit && (t.explicit = !0), null != t.tage && (t.tag = t.tage, t.explicit = !0), null != t.tagi && (t.tag = t.tagi, t.explicit = !1), null != t.str) this.hV = yt(t.str);else if (null != t.hex) this.hV = t.hex;else {if (null == t.obj) throw new Error("str, hex nor obj not specified");var i;t.obj instanceof e.ASN1Object ? i = t.obj.tohex() : "object" == typeof t.obj && (i = r(t.obj).tohex()), t.explicit ? this.hV = i : this.hV = n(i, 0);}return null == t.tag && (t.tag = "a0"), this.hT = t.tag, this.hTLV = null, this.isModified = !0, this.hV;}, this.setByParam = function (t) {this.params = t;}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.DERTaggedObject, lt.asn1.ASN1Object);var lt,ct,ht,ut = new function () {}();function dt(t) {for (var e = "", i = 0; i < t.length; i++) {var n = t[i].toString(16);1 == n.length && (n = "0" + n), e += n;}return e;}function pt(t) {return dt(function (t) {for (var e = new Array(), i = 0; i < t.length; i++) e[i] = t.charCodeAt(i);return e;}(t));}function ft(t) {return (t = (t = t.replace(/\=/g, "")).replace(/\+/g, "-")).replace(/\//g, "_");}function gt(t) {return t.length % 4 == 2 ? t += "==" : t.length % 4 == 3 && (t += "="), (t = t.replace(/-/g, "+")).replace(/_/g, "/");}function mt(t) {return t.length % 2 == 1 && (t = "0" + t), ft(w(t));}function vt(t) {return x(gt(t));}function yt(t) {return Tt(Rt(t)).toLowerCase();}function bt(t) {try {return decodeURIComponent(At(t));} catch (t) {return null;}}function wt(t) {return bt(function (t) {for (var e = t.match(/.{1,2}/g), i = [], n = 0; n < e.length; n++) {var r = parseInt(e[n], 16);161 <= r && r <= 191 ? (i.push("c2"), i.push(e[n])) : 192 <= r && r <= 255 ? (i.push("c3"), i.push((r - 64).toString(16))) : i.push(e[n]);}return i.join("");}(t));}function xt(t) {for (var e = "", i = 0; i < t.length - 1; i += 2) e += String.fromCharCode(parseInt(t.substr(i, 2), 16));return e;}function St(t) {for (var e = "", i = 0; i < t.length; i++) e += ("0" + t.charCodeAt(i).toString(16)).slice(-2);return e;}function Et(t, e) {return "-----BEGIN " + e + "-----\r\n" + function (t, e) {return (t = t.replace(new RegExp("(.{" + e + "})", "g"), "$1\r\n")).replace(/\s+$/, "");}(function (t) {return w(t);}(t), 64) + "\r\n-----END " + e + "-----\r\n";}function Ct(t, e) {if (-1 == t.indexOf("-----BEGIN ")) throw new Error("can't find PEM header");return function (t) {return x(t.replace(/[^0-9A-Za-z\/+=]*/g, ""));}(t = void 0 !== e ? (t = t.replace(new RegExp("^[^]*-----BEGIN " + e + "-----"), "")).replace(new RegExp("-----END " + e + "-----[^]*$"), "") : (t = t.replace(/^[^]*-----BEGIN [^-]+-----/, "")).replace(/-----END [^-]+-----[^]*$/, ""));}function kt(t) {return Math.round(function (t) {var e, i, n, r, s, o, a, l, c, h;if (h = (t = function (t) {return t.match(/^[0-9]{12}Z$/) || t.match(/^[0-9]{12}[.][0-9]*Z$/) ? t.match(/^[0-4]/) ? "20" + t : "19" + t : t;}(t)).match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/)) return e = parseInt(h[1]), i = parseInt(h[2]) - 1, n = parseInt(h[3]), r = parseInt(h[4]), s = parseInt(h[5]), o = parseInt(h[6]), a = 0, "" !== (l = h[7]) && (c = (l.substr(1) + "00").substr(0, 3), a = parseInt(c)), Date.UTC(e, i, n, r, s, o, a);throw new Error("unsupported zulu format: " + t);}(t) / 1e3);}function Tt(t) {return t.replace(/%/g, "");}function At(t) {return t.replace(/(..)/g, "%$1");}function Mt(t) {var e = "malformed IPv6 address";if (!t.match(/^[0-9A-Fa-f:]+$/)) throw e;var i = (t = t.toLowerCase()).split(":").length - 1;if (i < 2) throw e;var n = ":".repeat(7 - i + 2),r = (t = t.replace("::", n)).split(":");if (8 != r.length) throw e;for (var s = 0; s < 8; s++) r[s] = ("0000" + r[s]).slice(-4);return r.join("");}function _t(t) {if (!t.match(/^[0-9A-Fa-f]{32}$/)) throw new Error("malformed IPv6 address: " + t);var e = (t = t.toLowerCase()).match(/.{1,4}/g);e = e.map(function (t) {return t.replace(/^0+/, "");}), e = e.map(function (t) {return "" == t ? "0" : t;});var i = (t = ":" + e.join(":") + ":").match(/:(0:){2,}/g);if (null == i) return t.slice(1, -1);var n = i.sort().slice(-1)[0];return "::" != (t = t.replace(n.substr(0, n.length - 1), ":")).substr(0, 2) && (t = t.substr(1)), "::" != t.substr(-2, 2) && (t = t.substr(0, t.length - 1)), t;}function Pt(t) {var e = new Error("malformed hex value");if (!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/)) throw e;if (8 == t.length) try {return parseInt(t.substr(0, 2), 16) + "." + parseInt(t.substr(2, 2), 16) + "." + parseInt(t.substr(4, 2), 16) + "." + parseInt(t.substr(6, 2), 16);} catch (t) {throw e;} else if (16 == t.length) try {return Pt(t.substr(0, 8)) + "/" + Dt(t.substr(8));} catch (t) {throw e;} else {if (32 == t.length) return _t(t);if (64 != t.length) return t;try {return _t(t.substr(0, 32)) + "/" + Dt(t.substr(32));} catch (t) {throw e;}}}function Dt(t) {var e,i = new Error("malformed mask");try {e = new S(t, 16).toString(2);} catch (t) {throw i;}if (!e.match(/^1*0*$/)) throw i;return e.replace(/0+$/, "").length;}function Ot(t) {var e = new Error("malformed IP address");if (!(t = t.toLowerCase(t)).match(/^[0-9a-f.:/]+$/)) throw e;if (!t.match(/^[0-9.]+$/)) {var i;if (t.match(/^[0-9.]+\/[0-9]+$/)) return Ot((i = t.split("/"))[0]) + It(parseInt(i[1]), 32);if (t.match(/^[0-9a-f:]+$/) && -1 !== t.indexOf(":")) return Mt(t);if (t.match(/^[0-9a-f:]+\/[0-9]+$/) && -1 !== t.indexOf(":")) return Mt((i = t.split("/"))[0]) + It(parseInt(i[1]), 128);throw e;}var n = t.split(".");if (4 !== n.length) throw e;var r = "";try {for (var s = 0; s < 4; s++) r += ("0" + parseInt(n[s]).toString(16)).slice(-2);return r;} catch (t) {throw e;}}function It(t, e) {return 32 == e && 0 == t ? "00000000" : 128 == e && 0 == t ? "00000000000000000000000000000000" : new S(Array(t + 1).join("1") + Array(e - t + 1).join("0"), 2).toString(16);}function Ft(t) {var e = t.match(/.{4}/g).map(function (t) {var e = parseInt(t.substr(0, 2), 16),i = parseInt(t.substr(2), 16);if (0 == e & i < 128) return String.fromCharCode(i);if (e < 8) {var n = 128 | 63 & i;return bt((192 | (7 & e) << 3 | (192 & i) >> 6).toString(16) + n.toString(16));}n = 128 | (15 & e) << 2 | (192 & i) >> 6;var r = 128 | 63 & i;return bt((224 | (240 & e) >> 4).toString(16) + n.toString(16) + r.toString(16));});return e.join("");}function Rt(t) {for (var e = encodeURIComponent(t), i = "", n = 0; n < e.length; n++) "%" == e[n] ? (i += e.substr(n, 3), n += 2) : i = i + "%" + pt(e[n]);return i;}function Lt(t) {return !(t.length % 2 != 0 || !t.match(/^[0-9a-f]+$/) && !t.match(/^[0-9A-F]+$/));}function Nt(t) {return !!t.match(/^[0-9A-Za-z-_.]+$/);}function Vt(t) {return t.length % 2 == 1 ? "0" + t : t.substr(0, 1) > "7" ? "00" + t : t;}function Bt(t) {if (!Lt(t)) return null;try {var e = [],i = t.substr(0, 2),n = parseInt(i, 16);e[0] = new String(Math.floor(n / 40)), e[1] = new String(n % 40);for (var r = t.substr(2), s = [], o = 0; o < r.length / 2; o++) s.push(parseInt(r.substr(2 * o, 2), 16));var a = [],l = "";for (o = 0; o < s.length; o++) 128 & s[o] ? l += Ut((127 & s[o]).toString(2), 7) : (l += Ut((127 & s[o]).toString(2), 7), a.push(new String(parseInt(l, 2))), l = "");var c = e.join(".");return a.length > 0 && (c = c + "." + a.join(".")), c;} catch (t) {return null;}}function jt(t) {return zt(new S(String(t), 10));}function zt(t) {var e = t.toString(16);if ("-" != e.substr(0, 1)) return e.length % 2 == 1 ? e = "0" + e : e.match(/^[0-7]/) || (e = "00" + e), e;var i = e.substr(1).length;i % 2 == 1 ? i += 1 : e.match(/^[0-7]/) || (i += 2);for (var n = "", r = 0; r < i; r++) n += "f";return new S(n, 16).xor(t).add(S.ONE).toString(16).replace(/^-/, "");}ut.getLblen = function (t, e) {if ("8" != t.substr(e + 2, 1)) return 1;var i = parseInt(t.substr(e + 3, 1));return 0 == i ? -1 : 0 < i && i < 10 ? i + 1 : -2;}, ut.getL = function (t, e) {var i = ut.getLblen(t, e);return i < 1 ? "" : t.substr(e + 2, 2 * i);}, ut.getVblen = function (t, e) {var i;return "" == (i = ut.getL(t, e)) ? -1 : ("8" === i.substr(0, 1) ? new S(i.substr(2), 16) : new S(i, 16)).intValue();}, ut.getVidx = function (t, e) {var i = ut.getLblen(t, e);return i < 0 ? i : e + 2 * (i + 1);}, ut.getV = function (t, e) {var i = ut.getVidx(t, e),n = ut.getVblen(t, e);return t.substr(i, 2 * n);}, ut.getTLV = function (t, e) {return t.substr(e, 2) + ut.getL(t, e) + ut.getV(t, e);}, ut.getTLVblen = function (t, e) {return 2 + 2 * ut.getLblen(t, e) + 2 * ut.getVblen(t, e);}, ut.getNextSiblingIdx = function (t, e) {return ut.getVidx(t, e) + 2 * ut.getVblen(t, e);}, ut.getChildIdx = function (t, e) {var i,n,r,s = ut,o = [];i = s.getVidx(t, e), n = 2 * s.getVblen(t, e), "03" == t.substr(e, 2) && (i += 2, n -= 2), r = 0;for (var a = i; r <= n;) {var l = s.getTLVblen(t, a);if ((r += l) <= n && o.push(a), a += l, r >= n) break;}return o;}, ut.getNthChildIdx = function (t, e, i) {return ut.getChildIdx(t, e)[i];}, ut.getIdxbyList = function (t, e, i, n) {var r,s,o = ut;return 0 == i.length ? void 0 !== n && t.substr(e, 2) !== n ? -1 : e : (r = i.shift()) >= (s = o.getChildIdx(t, e)).length ? -1 : o.getIdxbyList(t, s[r], i, n);}, ut.getIdxbyListEx = function (t, e, i, n) {var r,s,o = ut;if (0 == i.length) return void 0 !== n && t.substr(e, 2) !== n ? -1 : e;r = i.shift(), s = o.getChildIdx(t, e);for (var a = 0, l = 0; l < s.length; l++) {var c = t.substr(s[l], 2);if ("number" == typeof r && !o.isContextTag(c) && a == r || "string" == typeof r && o.isContextTag(c, r)) return o.getIdxbyListEx(t, s[l], i, n);o.isContextTag(c) || a++;}return -1;}, ut.getTLVbyList = function (t, e, i, n) {var r = ut,s = r.getIdxbyList(t, e, i, n);return -1 == s || s >= t.length ? null : r.getTLV(t, s);}, ut.getTLVbyListEx = function (t, e, i, n) {var r = ut,s = r.getIdxbyListEx(t, e, i, n);return -1 == s ? null : r.getTLV(t, s);}, ut.getVbyList = function (t, e, i, n, r) {var s,o,a = ut;return -1 == (s = a.getIdxbyList(t, e, i, n)) || s >= t.length ? null : (o = a.getV(t, s), !0 === r && (o = o.substr(2)), o);}, ut.getVbyListEx = function (t, e, i, n, r) {var s,o,a = ut;return -1 == (s = a.getIdxbyListEx(t, e, i, n)) ? null : (o = a.getV(t, s), "03" == t.substr(s, 2) && !1 !== r && (o = o.substr(2)), o);}, ut.getInt = function (t, e, i) {null == i && (i = -1);try {var n = t.substr(e, 2);if ("02" != n && "03" != n) return i;var r = ut.getV(t, e);return "02" == n ? parseInt(r, 16) : function (t) {if (t.length % 2 != 0) return -1;if (null == (t = t.toLowerCase()).match(/^[0-9a-f]+$/)) return -1;try {var e = t.substr(0, 2);if ("00" == e) return parseInt(t.substr(2), 16);var i = parseInt(e, 16);if (i > 7) return -1;var n = t.substr(2),r = parseInt(n, 16).toString(2);"0" == r && (r = "00000000"), r = r.slice(0, 0 - i);var s = parseInt(r, 2);return NaN == s ? -1 : s;} catch (t) {return -1;}}(r);} catch (t) {return i;}}, ut.getOID = function (t, e, i) {null == i && (i = null);try {return "06" != t.substr(e, 2) ? i : Bt(ut.getV(t, e));} catch (t) {return i;}}, ut.getOIDName = function (t, e, i) {null == i && (i = null);try {var n = ut.getOID(t, e, i);if (n == i) return i;var r = lt.asn1.x509.OID.oid2name(n);return "" == r ? n : r;} catch (t) {return i;}}, ut.getString = function (t, e, i) {null == i && (i = null);try {return xt(ut.getV(t, e));} catch (t) {return i;}}, ut.hextooidstr = function (t) {var e = function (t, e) {return t.length >= e ? t : new Array(e - t.length + 1).join("0") + t;},i = [],n = t.substr(0, 2),r = parseInt(n, 16);i[0] = new String(Math.floor(r / 40)), i[1] = new String(r % 40);for (var s = t.substr(2), o = [], a = 0; a < s.length / 2; a++) o.push(parseInt(s.substr(2 * a, 2), 16));var l = [],c = "";for (a = 0; a < o.length; a++) 128 & o[a] ? c += e((127 & o[a]).toString(2), 7) : (c += e((127 & o[a]).toString(2), 7), l.push(new String(parseInt(c, 2))), c = "");var h = i.join(".");return l.length > 0 && (h = h + "." + l.join(".")), h;}, ut.dump = function (t, e, i, n) {var r = ut,s = r.getV,o = r.dump,a = r.getChildIdx,l = t;t instanceof lt.asn1.ASN1Object && (l = t.tohex());var c = function (t, e) {return t.length <= 2 * e ? t : t.substr(0, e) + "..(total " + t.length / 2 + "bytes).." + t.substr(t.length - e, e);};void 0 === e && (e = { ommit_long_octet: 32 }), void 0 === i && (i = 0), void 0 === n && (n = "");var h,u = e.ommit_long_octet;if ("01" == (h = l.substr(i, 2))) return "00" == (d = s(l, i)) ? n + "BOOLEAN FALSE\n" : n + "BOOLEAN TRUE\n";if ("02" == h) return n + "INTEGER " + c(d = s(l, i), u) + "\n";if ("03" == h) {var d = s(l, i);return r.isASN1HEX(d.substr(2)) ? (x = n + "BITSTRING, encapsulates\n") + o(d.substr(2), e, 0, n + "  ") : n + "BITSTRING " + c(d, u) + "\n";}if ("04" == h) return d = s(l, i), r.isASN1HEX(d) ? (x = n + "OCTETSTRING, encapsulates\n") + o(d, e, 0, n + "  ") : n + "OCTETSTRING " + c(d, u) + "\n";if ("05" == h) return n + "NULL\n";if ("06" == h) {var p = s(l, i),f = lt.asn1.ASN1Util.oidHexToInt(p),g = lt.asn1.x509.OID.oid2name(f),m = f.replace(/\./g, " ");return "" != g ? n + "ObjectIdentifier " + g + " (" + m + ")\n" : n + "ObjectIdentifier (" + m + ")\n";}if ("0a" == h) return n + "ENUMERATED " + parseInt(s(l, i)) + "\n";if ("0c" == h) return n + "UTF8String '" + bt(s(l, i)) + "'\n";if ("13" == h) return n + "PrintableString '" + bt(s(l, i)) + "'\n";if ("14" == h) return n + "TeletexString '" + bt(s(l, i)) + "'\n";if ("16" == h) return n + "IA5String '" + bt(s(l, i)) + "'\n";if ("17" == h) return n + "UTCTime " + bt(s(l, i)) + "\n";if ("18" == h) return n + "GeneralizedTime " + bt(s(l, i)) + "\n";if ("1a" == h) return n + "VisualString '" + bt(s(l, i)) + "'\n";if ("1e" == h) return n + "BMPString '" + Ft(s(l, i)) + "'\n";if ("30" == h) {if ("3000" == l.substr(i, 4)) return n + "SEQUENCE {}\n";x = n + "SEQUENCE\n";var v = e;if ((2 == (w = a(l, i)).length || 3 == w.length) && "06" == l.substr(w[0], 2) && "04" == l.substr(w[w.length - 1], 2)) {g = r.oidname(s(l, w[0]));var y = JSON.parse(JSON.stringify(e));y.x509ExtName = g, v = y;}for (var b = 0; b < w.length; b++) x += o(l, v, w[b], n + "  ");return x;}if ("31" == h) {x = n + "SET\n";var w = a(l, i);for (b = 0; b < w.length; b++) x += o(l, e, w[b], n + "  ");return x;}if (128 & (h = parseInt(h, 16))) {var x,S = 31 & h;if (32 & h) {for (x = n + "[" + S + "]\n", w = a(l, i), b = 0; b < w.length; b++) x += o(l, e, w[b], n + "  ");return x;}return d = s(l, i), ut.isASN1HEX(d) ? (x = n + "[" + S + "]\n") + o(d, e, 0, n + "  ") : (("68747470" == d.substr(0, 8) || "subjectAltName" === e.x509ExtName && 2 == S) && (d = bt(d)), n + "[" + S + "] " + d + "\n");}return n + "UNKNOWN(" + h + ") " + s(l, i) + "\n";}, ut.parse = function (t) {var e = ut,i = e.parse,n = e.isASN1HEX,r = e.getV,s = e.getTLV,o = e.getChildIdx,a = lt.asn1,l = a.ASN1Util.oidHexToInt,c = a.x509.OID.oid2name,h = bt,u = Ft,d = wt,p = { "0c": "utf8str", 12: "numstr", 13: "prnstr", 14: "telstr", 16: "ia5str", 17: "utctime", 18: "gentime", "1a": "visstr", "1e": "bmpstr", 30: "seq", 31: "set" },f = t.substr(0, 2),g = {},m = r(t, 0);if ("01" == f) return "0101ff" == t ? { bool: !0 } : { bool: !1 };if ("02" == f) return { int: { hex: m } };if ("03" == f) try {if ("00" != m.substr(0, 2)) throw "not encap";var v = m.substr(2);if (!n(v)) throw "not encap";return { bitstr: { obj: i(v) } };} catch (t) {var y = null;return m.length <= 10 && (y = function (t) {if ("string" != typeof t) return null;if (t.length % 2 != 0) return null;if (!t.match(/^[0-9a-f]+$/)) return null;try {var e = parseInt(t.substr(0, 2), 16);if (e < 0 || 7 < e) return null;for (var i = t.substr(2), n = "", r = 0; r < i.length; r += 2) {var s = i.substr(r, 2),o = parseInt(s, 16).toString(2);n += o = ("0000000" + o).slice(-8);}return n.substr(0, n.length - e);} catch (t) {return null;}}(m)), null == y ? { bitstr: { hex: m } } : { bitstr: { bin: y } };} else if ("04" == f) try {if (!n(m)) throw "not encap";return { octstr: { obj: i(m) } };} catch (t) {return { octstr: { hex: m } };} else {if ("05" == f) return { null: "" };if ("06" == f) {var b = l(m),w = c(b);return "" == w ? { oid: b } : { oid: w };}if ("0a" == f) return m.length > 4 ? { enum: { hex: m } } : { enum: parseInt(m, 16) };if ("30" == f || "31" == f) return g[p[f]] = function (t) {for (var e = [], n = o(t, 0), r = 0; r < n.length; r++) {var a = n[r],l = s(t, a),c = i(l);e.push(c);}return e;}(t), g;if ("14" == f) {var x = d(m);return g[p[f]] = { str: x }, g;}if ("1e" == f) return x = u(m), g[p[f]] = { str: x }, g;if (-1 != ":0c:12:13:16:17:18:1a:".indexOf(f)) return x = h(m), g[p[f]] = { str: x }, g;if (f.match(/^8[0-9]$/)) return null == (x = h(m)) | "" == x || null != x.match(/[\x00-\x1F\x7F-\x9F]/) || null != x.match(/[\u0000-\u001F\u0080\u009F]/) ? { tag: { tag: f, explicit: !1, hex: m } } : { tag: { tag: f, explicit: !1, str: x } };if (!f.match(/^a[0-9]$/)) {var S = new lt.asn1.ASN1Object();return S.hV = m, { asn1: { tlv: f + S.getLengthHexFromValue() + m } };}try {if (!n(m)) throw new Error("not encap");return { tag: { tag: f, explicit: !0, obj: i(m) } };} catch (t) {return { tag: { tag: f, explicit: !0, hex: m } };}}}, ut.isContextTag = function (t, e) {var i, n;t = t.toLowerCase();try {i = parseInt(t, 16);} catch (t) {return -1;}if (void 0 === e) return 128 == (192 & i);try {return null != e.match(/^\[[0-9]+\]$/) && !((n = parseInt(e.substr(1, e.length - 1), 10)) > 31) && 128 == (192 & i) && (31 & i) == n;} catch (t) {return !1;}}, ut.isASN1HEX = function (t) {var e = ut;if (t.length % 2 == 1) return !1;var i = e.getVblen(t, 0),n = t.substr(0, 2),r = e.getL(t, 0);return t.length - n.length - r.length == 2 * i;}, ut.checkStrictDER = function (t, e, i, n, r) {var s = ut;if (void 0 === i) {if ("string" != typeof t) throw new Error("not hex string");if (t = t.toLowerCase(), !lt.lang.String.isHex(t)) throw new Error("not hex string");i = t.length, r = (n = t.length / 2) < 128 ? 1 : Math.ceil(n.toString(16)) + 1;}if (s.getL(t, e).length > 2 * r) throw new Error("L of TLV too long: idx=" + e);var o = s.getVblen(t, e);if (o > n) throw new Error("value of L too long than hex: idx=" + e);var a = s.getTLV(t, e),l = a.length - 2 - s.getL(t, e).length;if (l !== 2 * o) throw new Error("V string length and L's value not the same:" + l + "/" + 2 * o);if (0 === e && t.length != a.length) throw new Error("total length and TLV length unmatch:" + t.length + "!=" + a.length);var c = t.substr(e, 2);if ("02" === c) {var h = s.getVidx(t, e);if ("00" == t.substr(h, 2) && t.charCodeAt(h + 2) < 56) throw new Error("not least zeros for DER INTEGER");}if (32 & parseInt(c, 16)) {for (var u = s.getVblen(t, e), d = 0, p = s.getChildIdx(t, e), f = 0; f < p.length; f++) d += s.getTLV(t, p[f]).length, s.checkStrictDER(t, p[f], i, n, r);if (2 * u != d) throw new Error("sum of children's TLV length and L unmatch: " + 2 * u + "!=" + d);}}, ut.oidname = function (t) {var e = lt.asn1;lt.lang.String.isHex(t) && (t = e.ASN1Util.oidHexToInt(t));var i = e.x509.OID.oid2name(t);return "" === i && (i = t), i;}, void 0 !== lt && lt || (lt = {}), void 0 !== lt.asn1 && lt.asn1 || (lt.asn1 = {}), void 0 !== lt.asn1.x509 && lt.asn1.x509 || (lt.asn1.x509 = {}), lt.asn1.x509.Certificate = function (t) {lt.asn1.x509.Certificate.superclass.constructor.call(this);var e = lt.asn1,i = e.DERBitString,n = e.DERSequence,r = e.x509,s = r.TBSCertificate,o = r.AlgorithmIdentifier;this.params = void 0, this.setByParam = function (t) {this.params = t;}, this.sign = function () {var t = this.params,e = t.sigalg;null != t.sigalg.name && (e = t.sigalg.name);var i = t.tbsobj.tohex(),n = new lt.crypto.Signature({ alg: e });n.init(t.cakey), n.updateHex(i), t.sighex = n.sign();}, this.getPEM = function () {return Et(this.tohex(), "CERTIFICATE");}, this.tohex = function () {var t = this.params;if (null != t.tbsobj && null != t.tbsobj || (t.tbsobj = new s(t)), null == t.sighex && null != t.cakey && this.sign(), null == t.sighex) throw new Error("sighex or cakey parameter not defined");var e = [];return e.push(t.tbsobj), e.push(new o({ name: t.sigalg })), e.push(new i({ hex: "00" + t.sighex })), new n({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && (this.params = t);}, $t(lt.asn1.x509.Certificate, lt.asn1.ASN1Object), lt.asn1.x509.TBSCertificate = function (t) {lt.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e = lt.asn1,i = e.x509,n = e.DERTaggedObject,r = e.DERInteger,s = e.DERSequence,o = i.AlgorithmIdentifier,a = i.Time,l = i.X500Name,c = i.Extensions,h = i.SubjectPublicKeyInfo;this.params = null, this.setByParam = function (t) {this.params = t;}, this.tohex = function () {var t = [],e = this.params;if (null != e.version || 1 != e.version) {var i = 2;null != e.version && (i = e.version - 1);var u = new n({ obj: new r({ int: i }) });t.push(u);}return t.push(new r(e.serial)), t.push(new o({ name: e.sigalg })), t.push(new l(e.issuer)), t.push(new s({ array: [new a(e.notbefore), new a(e.notafter)] })), t.push(new l(e.subject)), t.push(new h(Gt.getKey(e.sbjpubkey))), void 0 !== e.ext && e.ext.length > 0 && t.push(new n({ tag: "a3", obj: new c(e.ext) })), new lt.asn1.DERSequence({ array: t }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.TBSCertificate, lt.asn1.ASN1Object), lt.asn1.x509.Extensions = function (t) {lt.asn1.x509.Extensions.superclass.constructor.call(this);var e = lt.asn1,i = e.DERSequence,n = e.x509;this.aParam = [], this.setByParam = function (t) {this.aParam = t;}, this.tohex = function () {for (var t = [], e = 0; e < this.aParam.length; e++) {var r = this.aParam[e],s = r.extname,o = null;if (null != r.extn) o = new n.PrivateExtension(r);else if ("subjectKeyIdentifier" == s) o = new n.SubjectKeyIdentifier(r);else if ("keyUsage" == s) o = new n.KeyUsage(r);else if ("subjectAltName" == s) o = new n.SubjectAltName(r);else if ("issuerAltName" == s) o = new n.IssuerAltName(r);else if ("basicConstraints" == s) o = new n.BasicConstraints(r);else if ("nameConstraints" == s) o = new n.NameConstraints(r);else if ("cRLDistributionPoints" == s) o = new n.CRLDistributionPoints(r);else if ("certificatePolicies" == s) o = new n.CertificatePolicies(r);else if ("policyMappings" == s) o = new n.PolicyMappings(r);else if ("policyConstraints" == s) o = new n.PolicyConstraints(r);else if ("inhibitAnyPolicy" == s) o = new n.InhibitAnyPolicy(r);else if ("authorityKeyIdentifier" == s) o = new n.AuthorityKeyIdentifier(r);else if ("extKeyUsage" == s) o = new n.ExtKeyUsage(r);else if ("authorityInfoAccess" == s) o = new n.AuthorityInfoAccess(r);else if ("cRLNumber" == s) o = new n.CRLNumber(r);else if ("cRLReason" == s) o = new n.CRLReason(r);else if ("ocspNonce" == s) o = new n.OCSPNonce(r);else if ("ocspNoCheck" == s) o = new n.OCSPNoCheck(r);else if ("adobeTimeStamp" == s) o = new n.AdobeTimeStamp(r);else {if ("subjectDirectoryAttributes" != s) throw new Error("extension not supported:" + JSON.stringify(r));o = new n.SubjectDirectoryAttributes(r);}null != o && t.push(o);}return new i({ array: t }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.x509.Extensions, lt.asn1.ASN1Object), lt.asn1.x509.Extension = function (t) {lt.asn1.x509.Extension.superclass.constructor.call(this);var e = lt.asn1,i = e.DERObjectIdentifier,n = e.DEROctetString,r = (e.DERBitString, e.DERBoolean),s = e.DERSequence;this.tohex = function () {var t = new i({ oid: this.oid }),e = new n({ hex: this.getExtnValueHex() }),o = new Array();return o.push(t), this.critical && o.push(new r()), o.push(e), new s({ array: o }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.critical = !1, void 0 !== t && void 0 !== t.critical && (this.critical = t.critical);}, $t(lt.asn1.x509.Extension, lt.asn1.ASN1Object), lt.asn1.x509.KeyUsage = function (t) {lt.asn1.x509.KeyUsage.superclass.constructor.call(this, t);var e = Error,i = { digitalSignature: 0, nonRepudiation: 1, keyEncipherment: 2, dataEncipherment: 3, keyAgreement: 4, keyCertSign: 5, cRLSign: 6, encipherOnly: 7, decipherOnly: 8 };this.getExtnValueHex = function () {var t = this.getBinValue();return this.asn1ExtnValue = new lt.asn1.DERBitString({ bin: t }), this.asn1ExtnValue.tohex();}, this.getBinValue = function () {var t = this.params;if ("object" != typeof t || "object" != typeof t.names && "string" != typeof t.bin) throw new e("parameter not yet set");if (null != t.names) return Ht(t.names, i);if (null != t.bin) return t.bin;throw new e("parameter not set properly");}, this.oid = "2.5.29.15", void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.KeyUsage, lt.asn1.x509.Extension), lt.asn1.x509.BasicConstraints = function (t) {lt.asn1.x509.BasicConstraints.superclass.constructor.call(this, t);var e = lt.asn1,i = e.DERBoolean,n = e.DERInteger,r = e.DERSequence;this.getExtnValueHex = function () {var t = new Array();this.cA && t.push(new i()), this.pathLen > -1 && t.push(new n({ int: this.pathLen }));var e = new r({ array: t });return this.asn1ExtnValue = e, this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.19", this.cA = !1, this.pathLen = -1, void 0 !== t && (void 0 !== t.cA && (this.cA = t.cA), void 0 !== t.pathLen && (this.pathLen = t.pathLen));}, $t(lt.asn1.x509.BasicConstraints, lt.asn1.x509.Extension), lt.asn1.x509.CRLDistributionPoints = function (t) {lt.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this, t);var e = lt.asn1,i = e.x509;this.getExtnValueHex = function () {return this.asn1ExtnValue.tohex();}, this.setByDPArray = function (t) {for (var n = [], r = 0; r < t.length; r++) if (t[r] instanceof lt.asn1.ASN1Object) n.push(t[r]);else {var s = new i.DistributionPoint(t[r]);n.push(s);}this.asn1ExtnValue = new e.DERSequence({ array: n });}, this.setByOneURI = function (t) {var e = new i.DistributionPoint({ fulluri: t });this.setByDPArray([e]);}, this.oid = "2.5.29.31", void 0 !== t && (void 0 !== t.array ? this.setByDPArray(t.array) : void 0 !== t.uri && this.setByOneURI(t.uri));}, $t(lt.asn1.x509.CRLDistributionPoints, lt.asn1.x509.Extension), lt.asn1.x509.DistributionPoint = function (t) {lt.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e = lt.asn1,i = e.x509.DistributionPointName;this.tohex = function () {var t = new e.DERSequence();if (null != this.asn1DP) {var i = new e.DERTaggedObject({ explicit: !0, tag: "a0", obj: this.asn1DP });t.appendASN1Object(i);}return this.hTLV = t.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && (void 0 !== t.dpobj ? this.asn1DP = t.dpobj : void 0 !== t.dpname ? this.asn1DP = new i(t.dpname) : void 0 !== t.fulluri && (this.asn1DP = new i({ full: [{ uri: t.fulluri }] })));}, $t(lt.asn1.x509.DistributionPoint, lt.asn1.ASN1Object), lt.asn1.x509.DistributionPointName = function (t) {lt.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e = lt.asn1,i = e.DERTaggedObject;if (this.tohex = function () {if ("full" != this.type) throw new Error("currently type shall be 'full': " + this.type);return this.asn1Obj = new i({ explicit: !1, tag: this.tag, obj: this.asn1V }), this.hTLV = this.asn1Obj.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t) if (e.x509.GeneralNames.prototype.isPrototypeOf(t)) this.type = "full", this.tag = "a0", this.asn1V = t;else {if (void 0 === t.full) throw new Error("This class supports GeneralNames only as argument");this.type = "full", this.tag = "a0", this.asn1V = new e.x509.GeneralNames(t.full);}}, $t(lt.asn1.x509.DistributionPointName, lt.asn1.ASN1Object), lt.asn1.x509.CertificatePolicies = function (t) {lt.asn1.x509.CertificatePolicies.superclass.constructor.call(this, t);var e = lt.asn1,i = e.x509,n = e.DERSequence,r = i.PolicyInformation;this.params = null, this.getExtnValueHex = function () {for (var t = [], e = 0; e < this.params.array.length; e++) t.push(new r(this.params.array[e]));var i = new n({ array: t });return this.asn1ExtnValue = i, this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.32", void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.CertificatePolicies, lt.asn1.x509.Extension), lt.asn1.x509.PolicyInformation = function (t) {lt.asn1.x509.PolicyInformation.superclass.constructor.call(this, t);var e = lt.asn1,i = e.DERSequence,n = e.DERObjectIdentifier,r = e.x509.PolicyQualifierInfo;this.params = null, this.tohex = function () {if (void 0 === this.params.policyoid && void 0 === this.params.array) throw new Error("parameter oid and array missing");var t = [new n(this.params.policyoid)];if (void 0 !== this.params.array) {for (var e = [], s = 0; s < this.params.array.length; s++) e.push(new r(this.params.array[s]));e.length > 0 && t.push(new i({ array: e }));}return new i({ array: t }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.PolicyInformation, lt.asn1.ASN1Object), lt.asn1.x509.PolicyQualifierInfo = function (t) {lt.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this, t);var e = lt.asn1,i = e.DERSequence,n = e.DERIA5String,r = e.DERObjectIdentifier,s = e.x509.UserNotice;this.params = null, this.tohex = function () {return void 0 !== this.params.cps ? new i({ array: [new r({ oid: "1.3.6.1.5.5.7.2.1" }), new n({ str: this.params.cps })] }).tohex() : null != this.params.unotice ? new i({ array: [new r({ oid: "1.3.6.1.5.5.7.2.2" }), new s(this.params.unotice)] }).tohex() : void 0;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.PolicyQualifierInfo, lt.asn1.ASN1Object), lt.asn1.x509.UserNotice = function (t) {lt.asn1.x509.UserNotice.superclass.constructor.call(this, t);var e = lt.asn1.DERSequence,i = (lt.asn1.DERInteger, lt.asn1.x509.DisplayText),n = lt.asn1.x509.NoticeReference;this.params = null, this.tohex = function () {var t = [];return void 0 !== this.params.noticeref && t.push(new n(this.params.noticeref)), void 0 !== this.params.exptext && t.push(new i(this.params.exptext)), new e({ array: t }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.UserNotice, lt.asn1.ASN1Object), lt.asn1.x509.NoticeReference = function (t) {lt.asn1.x509.NoticeReference.superclass.constructor.call(this, t);var e = lt.asn1.DERSequence,i = lt.asn1.DERInteger,n = lt.asn1.x509.DisplayText;this.params = null, this.tohex = function () {var t = [];if (void 0 !== this.params.org && t.push(new n(this.params.org)), void 0 !== this.params.noticenum) {for (var r = [], s = this.params.noticenum, o = 0; o < s.length; o++) r.push(new i(s[o]));t.push(new e({ array: r }));}if (0 == t.length) throw new Error("parameter is empty");return new e({ array: t }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.NoticeReference, lt.asn1.ASN1Object), lt.asn1.x509.DisplayText = function (t) {lt.asn1.x509.DisplayText.superclass.constructor.call(this, t), this.hT = "0c", void 0 !== t && ("ia5" === t.type ? this.hT = "16" : "vis" === t.type ? this.hT = "1a" : "bmp" === t.type && (this.hT = "1e"));}, $t(lt.asn1.x509.DisplayText, lt.asn1.DERAbstractString), lt.asn1.x509.PolicyMappings = function (t) {lt.asn1.x509.PolicyMappings.superclass.constructor.call(this, t);var e = lt.asn1,i = (e.x509, e.ASN1Util.newObject);this.params = null, this.getExtnValueHex = function () {for (var t = this.params, e = [], n = 0; n < t.array.length; n++) {var r = t.array[n];e.push({ seq: [{ oid: r[0] }, { oid: r[1] }] });}return this.asn1ExtnValue = i({ seq: e }), this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.33", void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.PolicyMappings, lt.asn1.x509.Extension), lt.asn1.x509.PolicyConstraints = function (t) {lt.asn1.x509.PolicyConstraints.superclass.constructor.call(this, t);var e = lt.asn1,i = (e.x509, e.ASN1Util.newObject);this.params = null, this.getExtnValueHex = function () {var t = this.params,e = [];return null != t.reqexp && e.push({ tag: { tagi: "80", obj: { int: t.reqexp } } }), null != t.inhibit && e.push({ tag: { tagi: "81", obj: { int: t.inhibit } } }), this.asn1ExtnValue = i({ seq: e }), this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.36", void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.PolicyConstraints, lt.asn1.x509.Extension), lt.asn1.x509.InhibitAnyPolicy = function (t) {lt.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this, t);var e = lt.asn1,i = (e.x509, e.ASN1Util.newObject);this.params = null, this.getExtnValueHex = function () {return this.asn1ExtnValue = i({ int: this.params.skip }), this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.54", void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.InhibitAnyPolicy, lt.asn1.x509.Extension), lt.asn1.x509.NameConstraints = function (t) {lt.asn1.x509.NameConstraints.superclass.constructor.call(this, t);var e = lt.asn1,i = e.x509,n = e.ASN1Util.newObject,r = i.GeneralSubtree;this.params = null, this.getExtnValueHex = function () {var t = this.params,e = [];if (null != t.permit && null != t.permit.length) {for (var i = [], s = 0; s < t.permit.length; s++) i.push(new r(t.permit[s]));e.push({ tag: { tagi: "a0", obj: { seq: i } } });}if (null != t.exclude && null != t.exclude.length) {var o = [];for (s = 0; s < t.exclude.length; s++) o.push(new r(t.exclude[s]));e.push({ tag: { tagi: "a1", obj: { seq: o } } });}return this.asn1ExtnValue = n({ seq: e }), this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.30", void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.NameConstraints, lt.asn1.x509.Extension), lt.asn1.x509.GeneralSubtree = function (t) {lt.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var e = lt.asn1,i = e.x509.GeneralName,n = e.ASN1Util.newObject;this.params = null, this.setByParam = function (t) {this.params = t;}, this.tohex = function () {var t = this.params,e = [new i(t)];return null != t.min && e.push({ tag: { tagi: "80", obj: { int: t.min } } }), null != t.max && e.push({ tag: { tagi: "81", obj: { int: t.max } } }), n({ seq: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.GeneralSubtree, lt.asn1.ASN1Object), lt.asn1.x509.ExtKeyUsage = function (t) {lt.asn1.x509.ExtKeyUsage.superclass.constructor.call(this, t);var e = lt.asn1;this.setPurposeArray = function (t) {this.asn1ExtnValue = new e.DERSequence();for (var i = 0; i < t.length; i++) {var n = new e.DERObjectIdentifier(t[i]);this.asn1ExtnValue.appendASN1Object(n);}}, this.getExtnValueHex = function () {return this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.37", void 0 !== t && void 0 !== t.array && this.setPurposeArray(t.array);}, $t(lt.asn1.x509.ExtKeyUsage, lt.asn1.x509.Extension), lt.asn1.x509.AuthorityKeyIdentifier = function (t) {lt.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this, t);var e = lt,i = e.asn1,n = i.DERTaggedObject,r = i.x509.GeneralNames;e.crypto.Util.isKey, this.asn1KID = null, this.asn1CertIssuer = null, this.asn1CertSN = null, this.getExtnValueHex = function () {var t = new Array();this.asn1KID && t.push(new n({ explicit: !1, tag: "80", obj: this.asn1KID })), this.asn1CertIssuer && t.push(new n({ explicit: !1, tag: "a1", obj: new r([{ dn: this.asn1CertIssuer }]) })), this.asn1CertSN && t.push(new n({ explicit: !1, tag: "82", obj: this.asn1CertSN }));var e = new i.DERSequence({ array: t });return this.asn1ExtnValue = e, this.asn1ExtnValue.tohex();}, this.setKIDByParam = function (t) {if (void 0 !== t.str || void 0 !== t.hex) this.asn1KID = new lt.asn1.DEROctetString(t);else if ("object" == typeof t && lt.crypto.Util.isKey(t) || "string" == typeof t && -1 != t.indexOf("BEGIN ")) {var e = t;"string" == typeof t && (e = Gt.getKey(t));var i = Gt.getKeyID(e);this.asn1KID = new lt.asn1.DEROctetString({ hex: i });}}, this.setCertIssuerByParam = function (t) {void 0 !== t.str || void 0 !== t.ldapstr || void 0 !== t.hex || void 0 !== t.certsubject || void 0 !== t.certissuer ? this.asn1CertIssuer = new lt.asn1.x509.X500Name(t) : "string" == typeof t && -1 != t.indexOf("BEGIN ") && -1 != t.indexOf("CERTIFICATE") && (this.asn1CertIssuer = new lt.asn1.x509.X500Name({ certissuer: t }));}, this.setCertSNByParam = function (t) {if (void 0 !== t.str || void 0 !== t.bigint || void 0 !== t.hex) this.asn1CertSN = new lt.asn1.DERInteger(t);else if ("string" == typeof t && -1 != t.indexOf("BEGIN ") && t.indexOf("CERTIFICATE")) {var e = new Yt();e.readCertPEM(t);var i = e.getSerialNumberHex();this.asn1CertSN = new lt.asn1.DERInteger({ hex: i });}}, this.oid = "2.5.29.35", void 0 !== t && (void 0 !== t.kid && this.setKIDByParam(t.kid), void 0 !== t.issuer && this.setCertIssuerByParam(t.issuer), void 0 !== t.sn && this.setCertSNByParam(t.sn), void 0 !== t.issuersn && "string" == typeof t.issuersn && -1 != t.issuersn.indexOf("BEGIN ") && t.issuersn.indexOf("CERTIFICATE") && (this.setCertSNByParam(t.issuersn), this.setCertIssuerByParam(t.issuersn)));}, $t(lt.asn1.x509.AuthorityKeyIdentifier, lt.asn1.x509.Extension), lt.asn1.x509.SubjectKeyIdentifier = function (t) {lt.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this, t);var e = lt.asn1.DEROctetString;this.asn1KID = null, this.getExtnValueHex = function () {return this.asn1ExtnValue = this.asn1KID, this.asn1ExtnValue.tohex();}, this.setKIDByParam = function (t) {if (void 0 !== t.str || void 0 !== t.hex) this.asn1KID = new e(t);else if ("object" == typeof t && lt.crypto.Util.isKey(t) || "string" == typeof t && -1 != t.indexOf("BEGIN")) {var i = t;"string" == typeof t && (i = Gt.getKey(t));var n = Gt.getKeyID(i);this.asn1KID = new lt.asn1.DEROctetString({ hex: n });}}, this.oid = "2.5.29.14", void 0 !== t && void 0 !== t.kid && this.setKIDByParam(t.kid);}, $t(lt.asn1.x509.SubjectKeyIdentifier, lt.asn1.x509.Extension), lt.asn1.x509.AuthorityInfoAccess = function (t) {lt.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this, t), this.setAccessDescriptionArray = function (t) {for (var e = new Array(), i = lt.asn1, n = i.DERSequence, r = i.DERObjectIdentifier, s = i.x509.GeneralName, o = 0; o < t.length; o++) {var a,l = t[o];if (void 0 !== l.ocsp) a = new n({ array: [new r({ oid: "1.3.6.1.5.5.7.48.1" }), new s({ uri: l.ocsp })] });else {if (void 0 === l.caissuer) throw new Error("unknown AccessMethod parameter: " + JSON.stringify(l));a = new n({ array: [new r({ oid: "1.3.6.1.5.5.7.48.2" }), new s({ uri: l.caissuer })] });}e.push(a);}this.asn1ExtnValue = new n({ array: e });}, this.getExtnValueHex = function () {return this.asn1ExtnValue.tohex();}, this.oid = "1.3.6.1.5.5.7.1.1", void 0 !== t && void 0 !== t.array && this.setAccessDescriptionArray(t.array);}, $t(lt.asn1.x509.AuthorityInfoAccess, lt.asn1.x509.Extension), lt.asn1.x509.SubjectAltName = function (t) {lt.asn1.x509.SubjectAltName.superclass.constructor.call(this, t), this.setNameArray = function (t) {this.asn1ExtnValue = new lt.asn1.x509.GeneralNames(t);}, this.getExtnValueHex = function () {return this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.17", void 0 !== t && void 0 !== t.array && this.setNameArray(t.array);}, $t(lt.asn1.x509.SubjectAltName, lt.asn1.x509.Extension), lt.asn1.x509.IssuerAltName = function (t) {lt.asn1.x509.IssuerAltName.superclass.constructor.call(this, t), this.setNameArray = function (t) {this.asn1ExtnValue = new lt.asn1.x509.GeneralNames(t);}, this.getExtnValueHex = function () {return this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.18", void 0 !== t && void 0 !== t.array && this.setNameArray(t.array);}, $t(lt.asn1.x509.IssuerAltName, lt.asn1.x509.Extension), lt.asn1.x509.SubjectDirectoryAttributes = function (t) {lt.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this, t);var e = lt.asn1,i = e.DERSequence,n = e.ASN1Util.newObject,r = e.x509.OID.name2oid;this.params = null, this.getExtnValueHex = function () {for (var t = [], e = 0; e < this.params.array.length; e++) {var s = this.params.array[e];if (null == s.attr || null == s.array) {var o = { seq: [{ oid: "1.2.3.4" }, { set: [{ utf8str: "DE" }] }] };if ("dateOfBirth" == s.attr) o.seq[0].oid = r(s.attr), o.seq[1].set[0] = { gentime: s.str };else if ("placeOfBirth" == s.attr) o.seq[0].oid = r(s.attr), o.seq[1].set[0] = { utf8str: s.str };else if ("gender" == s.attr) o.seq[0].oid = r(s.attr), o.seq[1].set[0] = { prnstr: s.str };else if ("countryOfCitizenship" == s.attr) o.seq[0].oid = r(s.attr), o.seq[1].set[0] = { prnstr: s.str };else {if ("countryOfResidence" != s.attr) throw new Error("unsupported attribute: " + s.attr);o.seq[0].oid = r(s.attr), o.seq[1].set[0] = { prnstr: s.str };}t.push(new n(o));} else {var a = { seq: [{ oid: s.attr }, { set: s.array }] };t.push(n(a));}}var l = new i({ array: t });return this.asn1ExtnValue = l, this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.9", void 0 !== t && (this.params = t);}, $t(lt.asn1.x509.SubjectDirectoryAttributes, lt.asn1.x509.Extension), lt.asn1.x509.PrivateExtension = function (t) {lt.asn1.x509.PrivateExtension.superclass.constructor.call(this, t);var e = lt,i = e.lang.String.isHex,n = e.asn1,r = n.x509.OID.name2oid,s = n.ASN1Util.newObject;this.params = null, this.setByParam = function (t) {this.oid = r(t.extname), this.params = t;}, this.getExtnValueHex = function () {if (null == this.params.extname || null == this.params.extn) throw new Error("extname or extnhex not specified");var t = this.params.extn;if ("string" == typeof t && i(t)) return t;if ("object" == typeof t) try {return s(t).tohex();} catch (t) {}throw new Error("unsupported extn value");}, null != t && this.setByParam(t);}, $t(lt.asn1.x509.PrivateExtension, lt.asn1.x509.Extension), lt.asn1.x509.CRL = function (t) {lt.asn1.x509.CRL.superclass.constructor.call(this);var e = lt.asn1,i = e.DERSequence,n = e.DERBitString,r = e.x509,s = r.AlgorithmIdentifier,o = r.TBSCertList;this.params = void 0, this.setByParam = function (t) {this.params = t;}, this.sign = function () {var t = new o(this.params).tohex(),e = new lt.crypto.Signature({ alg: this.params.sigalg });e.init(this.params.cakey), e.updateHex(t);var i = e.sign();this.params.sighex = i;}, this.getPEM = function () {return Et(this.tohex(), "X509 CRL");}, this.tohex = function () {var t = this.params;if (null == t.tbsobj && (t.tbsobj = new o(t)), null == t.sighex && null != t.cakey && this.sign(), null == t.sighex) throw new Error("sighex or cakey parameter not defined");var e = [];return e.push(t.tbsobj), e.push(new s({ name: t.sigalg })), e.push(new n({ hex: "00" + t.sighex })), new i({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && (this.params = t);}, $t(lt.asn1.x509.CRL, lt.asn1.ASN1Object), lt.asn1.x509.TBSCertList = function (t) {lt.asn1.x509.TBSCertList.superclass.constructor.call(this);var e = lt.asn1,i = e.DERInteger,n = e.DERSequence,r = e.DERTaggedObject,s = (e.DERObjectIdentifier, e.x509),o = s.AlgorithmIdentifier,a = s.Time,l = s.Extensions,c = s.X500Name;this.params = null, this.setByParam = function (t) {this.params = t;}, this.getRevCertSequence = function () {for (var t = [], e = this.params.revcert, r = 0; r < e.length; r++) {var s = [new i(e[r].sn), new a(e[r].date)];null != e[r].ext && s.push(new l(e[r].ext)), t.push(new n({ array: s }));}return new n({ array: t });}, this.tohex = function () {var t = [],e = this.params;if (null != e.version) {var s = e.version - 1,h = new i({ int: s });t.push(h);}if (t.push(new o({ name: e.sigalg })), t.push(new c(e.issuer)), t.push(new a(e.thisupdate)), null != e.nextupdate && t.push(new a(e.nextupdate)), null != e.revcert && t.push(this.getRevCertSequence()), null != e.ext) {var u = new l(e.ext);t.push(new r({ tag: "a0", explicit: !0, obj: u }));}return new n({ array: t }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.TBSCertList, lt.asn1.ASN1Object), lt.asn1.x509.CRLEntry = function (t) {lt.asn1.x509.CRLEntry.superclass.constructor.call(this);var e = lt.asn1;this.setCertSerial = function (t) {this.sn = new e.DERInteger(t);}, this.setRevocationDate = function (t) {this.time = new e.x509.Time(t);}, this.tohex = function () {var t = new e.DERSequence({ array: [this.sn, this.time] });return this.TLV = t.tohex(), this.TLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && (void 0 !== t.time && this.setRevocationDate(t.time), void 0 !== t.sn && this.setCertSerial(t.sn));}, $t(lt.asn1.x509.CRLEntry, lt.asn1.ASN1Object), lt.asn1.x509.CRLNumber = function (t) {lt.asn1.x509.CRLNumber.superclass.constructor.call(this, t), this.params = void 0, this.getExtnValueHex = function () {return this.asn1ExtnValue = new lt.asn1.DERInteger(this.params.num), this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.20", null != t && (this.params = t);}, $t(lt.asn1.x509.CRLNumber, lt.asn1.x509.Extension), lt.asn1.x509.CRLReason = function (t) {lt.asn1.x509.CRLReason.superclass.constructor.call(this, t), this.params = void 0, this.getExtnValueHex = function () {return this.asn1ExtnValue = new lt.asn1.DEREnumerated(this.params.code), this.asn1ExtnValue.tohex();}, this.oid = "2.5.29.21", null != t && (this.params = t);}, $t(lt.asn1.x509.CRLReason, lt.asn1.x509.Extension), lt.asn1.x509.OCSPNonce = function (t) {lt.asn1.x509.OCSPNonce.superclass.constructor.call(this, t), this.params = void 0, this.getExtnValueHex = function () {return this.asn1ExtnValue = new lt.asn1.DEROctetString(this.params), this.asn1ExtnValue.tohex();}, this.oid = "1.3.6.1.5.5.7.48.1.2", null != t && (this.params = t);}, $t(lt.asn1.x509.OCSPNonce, lt.asn1.x509.Extension), lt.asn1.x509.OCSPNoCheck = function (t) {lt.asn1.x509.OCSPNoCheck.superclass.constructor.call(this, t), this.params = void 0, this.getExtnValueHex = function () {return this.asn1ExtnValue = new lt.asn1.DERNull(), this.asn1ExtnValue.tohex();}, this.oid = "1.3.6.1.5.5.7.48.1.5", null != t && (this.params = t);}, $t(lt.asn1.x509.OCSPNoCheck, lt.asn1.x509.Extension), lt.asn1.x509.AdobeTimeStamp = function (t) {lt.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this, t);var e = lt.asn1,i = e.DERInteger,n = e.DERBoolean,r = e.DERSequence,s = e.x509.GeneralName;this.params = null, this.getExtnValueHex = function () {var t = this.params,e = [new i(1)];return e.push(new s({ uri: t.uri })), null != t.reqauth && e.push(new n(t.reqauth)), this.asn1ExtnValue = new r({ array: e }), this.asn1ExtnValue.tohex();}, this.oid = "1.2.840.113583.1.1.9.1", void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.AdobeTimeStamp, lt.asn1.x509.Extension), lt.asn1.x509.X500Name = function (t) {lt.asn1.x509.X500Name.superclass.constructor.call(this), this.asn1Array = [], this.paramArray = [], this.sRule = "utf8";var e = lt.asn1,i = e.x509,n = i.RDN;this.setByString = function (t, e) {void 0 !== e && (this.sRule = e);var i = t.split("/");i.shift();for (var r = [], s = 0; s < i.length; s++) if (i[s].match(/^[^=]+=.+$/)) r.push(i[s]);else {var o = r.length - 1;r[o] = r[o] + "/" + i[s];}for (s = 0; s < r.length; s++) this.asn1Array.push(new n({ str: r[s], rule: this.sRule }));}, this.setByLdapString = function (t, e) {void 0 !== e && (this.sRule = e);var n = i.X500Name.ldapToCompat(t);this.setByString(n, e);}, this.setByObject = function (t, e) {for (var i in void 0 !== e && (this.sRule = e), t) if (t.hasOwnProperty(i)) {var r = new n({ str: i + "=" + t[i], rule: this.sRule });this.asn1Array ? this.asn1Array.push(r) : this.asn1Array = [r];}}, this.setByParam = function (t) {var e;void 0 !== t.rule && (this.sRule = t.rule), void 0 !== t.array ? this.paramArray = t.array : void 0 !== t.str ? this.setByString(t.str) : void 0 !== t.ldapstr ? this.setByLdapString(t.ldapstr) : void 0 !== t.hex ? this.hTLV = t.hex : void 0 !== t.certissuer ? ((e = new Yt()).readCertPEM(t.certissuer), this.hTLV = e.getIssuerHex()) : void 0 !== t.certsubject ? ((e = new Yt()).readCertPEM(t.certsubject), this.hTLV = e.getSubjectHex()) : "object" == typeof t && void 0 === t.certsubject && void 0 === t.certissuer && this.setByObject(t);}, this.tohex = function () {if ("string" == typeof this.hTLV) return this.hTLV;if (0 == this.asn1Array.length && this.paramArray.length > 0) for (var t = 0; t < this.paramArray.length; t++) {var i = { array: this.paramArray[t] };"utf8" != this.sRule && (i.rule = this.sRule);var r = new n(i);this.asn1Array.push(r);}var s = new e.DERSequence({ array: this.asn1Array });return this.hTLV = s.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.X500Name, lt.asn1.ASN1Object), lt.asn1.x509.X500Name.compatToLDAP = function (t) {if ("/" !== t.substr(0, 1)) throw "malformed input";var e = (t = t.substr(1)).split("/");return e.reverse(), e = e.map(function (t) {return t.replace(/,/, "\\,");}), e.join(",");}, lt.asn1.x509.X500Name.onelineToLDAP = function (t) {return lt.asn1.x509.X500Name.compatToLDAP(t);}, lt.asn1.x509.X500Name.ldapToCompat = function (t) {for (var e = t.split(","), i = !1, n = [], r = 0; e.length > 0; r++) {var s = e.shift();if (!0 === i) {var o = (n.pop() + "," + s).replace(/\\,/g, ",");n.push(o), i = !1;} else n.push(s);"\\" === s.substr(-1, 1) && (i = !0);}return n = n.map(function (t) {return t.replace("/", "\\/");}), n.reverse(), "/" + n.join("/");}, lt.asn1.x509.X500Name.ldapToOneline = function (t) {return lt.asn1.x509.X500Name.ldapToCompat(t);}, lt.asn1.x509.RDN = function (t) {lt.asn1.x509.RDN.superclass.constructor.call(this), this.asn1Array = [], this.paramArray = [], this.sRule = "utf8";var e = lt.asn1.x509.AttributeTypeAndValue;this.setByParam = function (t) {void 0 !== t.rule && (this.sRule = t.rule), void 0 !== t.str && this.addByMultiValuedString(t.str), void 0 !== t.array && (this.paramArray = t.array);}, this.addByString = function (t) {this.asn1Array.push(new lt.asn1.x509.AttributeTypeAndValue({ str: t, rule: this.sRule }));}, this.addByMultiValuedString = function (t) {for (var e = lt.asn1.x509.RDN.parseString(t), i = 0; i < e.length; i++) this.addByString(e[i]);}, this.tohex = function () {if (0 == this.asn1Array.length && this.paramArray.length > 0) for (var t = 0; t < this.paramArray.length; t++) {var i = this.paramArray[t];void 0 !== i.rule && "utf8" != this.sRule && (i.rule = this.sRule);var n = new e(i);this.asn1Array.push(n);}var r = new lt.asn1.DERSet({ array: this.asn1Array });return this.TLV = r.tohex(), this.TLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.RDN, lt.asn1.ASN1Object), lt.asn1.x509.RDN.parseString = function (t) {for (var e = t.split(/\+/), i = !1, n = [], r = 0; e.length > 0; r++) {var s = e.shift();if (!0 === i) {var o = (n.pop() + "+" + s).replace(/\\\+/g, "+");n.push(o), i = !1;} else n.push(s);"\\" === s.substr(-1, 1) && (i = !0);}var a = !1,l = [];for (r = 0; n.length > 0; r++) {if (s = n.shift(), !0 === a) {var c = l.pop();s.match(/"$/) ? (o = (c + "+" + s).replace(/^([^=]+)="(.*)"$/, "$1=$2"), l.push(o), a = !1) : l.push(c + "+" + s);} else l.push(s);s.match(/^[^=]+="/) && (a = !0);}return l;}, lt.asn1.x509.AttributeTypeAndValue = function (t) {lt.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this), this.sRule = "utf8", this.sType = null, this.sValue = null, this.dsType = null;var e = lt,i = e.asn1,n = i.DERSequence,r = i.DERUTF8String,s = i.DERPrintableString,o = i.DERTeletexString,a = i.DERIA5String,l = i.DERVisibleString,c = i.DERBMPString,h = e.lang.String.isMail,u = e.lang.String.isPrintable;this.setByParam = function (t) {if (void 0 !== t.rule && (this.sRule = t.rule), void 0 !== t.ds && (this.dsType = t.ds), void 0 === t.value && void 0 !== t.str) {var e = t.str.match(/^([^=]+)=(.+)$/);if (!e) throw new Error("malformed attrTypeAndValueStr: " + attrTypeAndValueStr);this.sType = e[1], this.sValue = e[2];} else this.sType = t.type, this.sValue = t.value;}, this.setByString = function (t, e) {void 0 !== e && (this.sRule = e);var i = t.match(/^([^=]+)=(.+)$/);if (!i) throw new Error("malformed attrTypeAndValueStr: " + attrTypeAndValueStr);this.setByAttrTypeAndValueStr(i[1], i[2]);}, this._getDsType = function () {var t = this.sType,e = this.sValue,i = this.sRule;return "prn" === i ? "CN" == t && h(e) ? "ia5" : u(e) ? "prn" : "utf8" : "utf8" === i ? "CN" == t && h(e) ? "ia5" : "C" == t ? "prn" : "utf8" : "utf8";}, this.setByAttrTypeAndValueStr = function (t, e, i) {void 0 !== i && (this.sRule = i), this.sType = t, this.sValue = e;}, this.getValueObj = function (t, e) {if ("utf8" == t) return new r({ str: e });if ("prn" == t) return new s({ str: e });if ("tel" == t) return new o({ str: e });if ("ia5" == t) return new a({ str: e });if ("vis" == t) return new l({ str: e });if ("bmp" == t) return new c({ str: e });throw new Error("unsupported directory string type: type=" + t + " value=" + e);}, this.tohex = function () {null == this.dsType && (this.dsType = this._getDsType());var t = lt.asn1.x509.OID.atype2obj(this.sType),e = this.getValueObj(this.dsType, this.sValue),i = new n({ array: [t, e] });return this.TLV = i.tohex(), this.TLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.AttributeTypeAndValue, lt.asn1.ASN1Object), lt.asn1.x509.SubjectPublicKeyInfo = function (t) {lt.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e = lt,i = e.asn1,n = i.DERInteger,r = i.DERBitString,s = i.DERObjectIdentifier,o = i.DERSequence,a = i.ASN1Util.newObject,l = i.x509.AlgorithmIdentifier,c = e.crypto;c.ECDSA, c.DSA, this.getASN1Object = function () {if (null == this.asn1AlgId || null == this.asn1SubjPKey) throw "algId and/or subjPubKey not set";return new o({ array: [this.asn1AlgId, this.asn1SubjPKey] });}, this.tohex = function () {var t = this.getASN1Object();return this.hTLV = t.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, this.setPubKey = function (t) {try {if (t instanceof nt) {var e = a({ seq: [{ int: { bigint: t.n } }, { int: { int: t.e } }] }).tohex();this.asn1AlgId = new l({ name: "rsaEncryption" }), this.asn1SubjPKey = new r({ hex: "00" + e });}} catch (t) {}try {if (t instanceof lt.crypto.ECDSA) {var i = new s({ name: t.curveName });this.asn1AlgId = new l({ name: "ecPublicKey", asn1params: i }), this.asn1SubjPKey = new r({ hex: "00" + t.pubKeyHex });}} catch (t) {}try {if (t instanceof lt.crypto.DSA) {i = new a({ seq: [{ int: { bigint: t.p } }, { int: { bigint: t.q } }, { int: { bigint: t.g } }] }), this.asn1AlgId = new l({ name: "dsa", asn1params: i });var o = new n({ bigint: t.y });this.asn1SubjPKey = new r({ hex: "00" + o.tohex() });}} catch (t) {}}, void 0 !== t && this.setPubKey(t);}, $t(lt.asn1.x509.SubjectPublicKeyInfo, lt.asn1.ASN1Object), lt.asn1.x509.Time = function (t) {lt.asn1.x509.Time.superclass.constructor.call(this);var e = lt.asn1,i = e.DERUTCTime,n = e.DERGeneralizedTime;this.params = null, this.type = null, this.setTimeParams = function (t) {this.timeParams = t;}, this.setByParam = function (t) {this.params = t;}, this.getType = function (t) {return t.match(/^[0-9]{12}Z$/) ? "utc" : t.match(/^[0-9]{14}Z$/) ? "gen" : t.match(/^[0-9]{12}\.[0-9]+Z$/) ? "utc" : t.match(/^[0-9]{14}\.[0-9]+Z$/) ? "gen" : null;}, this.tohex = function () {var t = this.params,e = null;if ("string" == typeof t && (t = { str: t }), null == t || !t.str || null != t.type && null != t.type || (t.type = this.getType(t.str)), null != t && t.str ? ("utc" == t.type && (e = new i(t.str)), "gen" == t.type && (e = new n(t.str))) : e = "gen" == this.type ? new n() : new i(), null == e) throw new Error("wrong setting for Time");return this.TLV = e.tohex(), this.TLV;}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, lt.asn1.x509.Time_bak = function (t) {lt.asn1.x509.Time_bak.superclass.constructor.call(this);var e = lt.asn1,i = e.DERUTCTime,n = e.DERGeneralizedTime;this.setTimeParams = function (t) {this.timeParams = t;}, this.tohex = function () {var t = null;return t = null != this.timeParams ? "utc" == this.type ? new i(this.timeParams) : new n(this.timeParams) : "utc" == this.type ? new i() : new n(), this.TLV = t.tohex(), this.TLV;}, this.getEncodedHex = function () {return this.tohex();}, this.type = "utc", void 0 !== t && (void 0 !== t.type ? this.type = t.type : void 0 !== t.str && (t.str.match(/^[0-9]{12}Z$/) && (this.type = "utc"), t.str.match(/^[0-9]{14}Z$/) && (this.type = "gen")), this.timeParams = t);}, $t(lt.asn1.x509.Time, lt.asn1.ASN1Object), lt.asn1.x509.AlgorithmIdentifier = function (t) {lt.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this), this.nameAlg = null, this.asn1Alg = null, this.asn1Params = null, this.paramEmpty = !1;var e = lt.asn1,i = e.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if (this.tohex = function () {if (null === this.nameAlg && null === this.asn1Alg) throw new Error("algorithm not specified");if (null !== this.nameAlg) {var t = null;for (var n in i) n === this.nameAlg && (t = i[n]);if (null !== t) return this.hTLV = t, this.hTLV;}null !== this.nameAlg && null === this.asn1Alg && (this.asn1Alg = e.x509.OID.name2obj(this.nameAlg));var r = [this.asn1Alg];null !== this.asn1Params && r.push(this.asn1Params);var s = new e.DERSequence({ array: r });return this.hTLV = s.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && (void 0 !== t.name && (this.nameAlg = t.name), void 0 !== t.asn1params && (this.asn1Params = t.asn1params), void 0 !== t.paramempty && (this.paramEmpty = t.paramempty)), null === this.asn1Params && !1 === this.paramEmpty && null !== this.nameAlg) {void 0 !== this.nameAlg.name && (this.nameAlg = this.nameAlg.name);var n = this.nameAlg.toLowerCase();"withdsa" !== n.substr(-7, 7) && "withecdsa" !== n.substr(-9, 9) && (this.asn1Params = new e.DERNull());}}, $t(lt.asn1.x509.AlgorithmIdentifier, lt.asn1.ASN1Object), lt.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV = { SHAwithRSAandMGF1: "300d06092a864886f70d01010a3000", SHA256withRSAandMGF1: "303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120", SHA384withRSAandMGF1: "303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130", SHA512withRSAandMGF1: "303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140" }, lt.asn1.x509.GeneralName = function (t) {lt.asn1.x509.GeneralName.superclass.constructor.call(this);var e = lt.asn1,i = e.x509,n = i.X500Name,r = i.OtherName,s = e.DERIA5String,o = (e.DERPrintableString, e.DEROctetString),a = e.DERTaggedObject,l = e.ASN1Object,c = Error;this.params = null, this.setByParam = function (t) {this.params = t;}, this.tohex = function () {var t,e,i = this.params,h = !1;if (void 0 !== i.other) t = "a0", e = new r(i.other);else if (void 0 !== i.rfc822) t = "81", e = new s({ str: i.rfc822 });else if (void 0 !== i.dns) t = "82", e = new s({ str: i.dns });else if (void 0 !== i.dn) t = "a4", h = !0, e = "string" == typeof i.dn ? new n({ str: i.dn }) : i.dn instanceof lt.asn1.x509.X500Name ? i.dn : new n(i.dn);else if (void 0 !== i.ldapdn) t = "a4", h = !0, e = new n({ ldapstr: i.ldapdn });else if (void 0 !== i.certissuer || void 0 !== i.certsubj) {var u, d;t = "a4", h = !0;var p = null;if (void 0 !== i.certsubj ? (u = !1, d = i.certsubj) : (u = !0, d = i.certissuer), d.match(/^[0-9A-Fa-f]+$/), -1 != d.indexOf("-----BEGIN ") && (p = Ct(d)), null == p) throw new Error("certsubj/certissuer not cert");var f,g = new Yt();g.hex = p, f = u ? g.getIssuerHex() : g.getSubjectHex(), (e = new l()).hTLV = f;} else if (void 0 !== i.uri) t = "86", e = new s({ str: i.uri });else {if (void 0 === i.ip) throw new c("improper params");var m;t = "87";var v = i.ip;try {if (v.match(/^[0-9a-f]+$/)) {var y = v.length;if (8 != y && 16 != y && 32 != y && 64 != y) throw "err";m = v;} else m = Ot(v);} catch (t) {throw new c("malformed IP address: " + i.ip + ":" + t.message);}e = new o({ hex: m });}return new a({ tag: t, explicit: h, obj: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.GeneralName, lt.asn1.ASN1Object), lt.asn1.x509.GeneralNames = function (t) {lt.asn1.x509.GeneralNames.superclass.constructor.call(this);var e = lt.asn1;this.setByParamArray = function (t) {for (var i = 0; i < t.length; i++) {var n = new e.x509.GeneralName(t[i]);this.asn1Array.push(n);}}, this.tohex = function () {return new e.DERSequence({ array: this.asn1Array }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.asn1Array = new Array(), void 0 !== t && this.setByParamArray(t);}, $t(lt.asn1.x509.GeneralNames, lt.asn1.ASN1Object), lt.asn1.x509.OtherName = function (t) {lt.asn1.x509.OtherName.superclass.constructor.call(this);var e = lt.asn1,i = e.DERObjectIdentifier,n = e.DERSequence,r = e.ASN1Util.newObject;this.params = null, this.setByParam = function (t) {this.params = t;}, this.tohex = function () {var t = this.params;if (null == t.oid || null == t.value) throw new Error("oid or value not specified");var e = new i({ oid: t.oid }),s = r({ tag: { tag: "a0", explicit: !0, obj: t.value } });return new n({ array: [e, s] }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.x509.OtherName, lt.asn1.ASN1Object), lt.asn1.x509.OID = new function () {var t = lt.asn1.DERObjectIdentifier;this.name2oidList = { "aes128-CBC": "2.16.840.1.101.3.4.1.2", "aes256-CBC": "2.16.840.1.101.3.4.1.42", sha1: "1.3.14.3.2.26", sha256: "2.16.840.1.101.3.4.2.1", sha384: "2.16.840.1.101.3.4.2.2", sha512: "2.16.840.1.101.3.4.2.3", sha224: "2.16.840.1.101.3.4.2.4", md5: "1.2.840.113549.2.5", md2: "1.3.14.7.2.2.1", ripemd160: "1.3.36.3.2.1", hmacWithSHA1: "1.2.840.113549.2.7", hmacWithSHA224: "1.2.840.113549.2.8", hmacWithSHA256: "1.2.840.113549.2.9", hmacWithSHA384: "1.2.840.113549.2.10", hmacWithSHA512: "1.2.840.113549.2.11", MD2withRSA: "1.2.840.113549.1.1.2", MD4withRSA: "1.2.840.113549.1.1.3", MD5withRSA: "1.2.840.113549.1.1.4", SHA1withRSA: "1.2.840.113549.1.1.5", "pkcs1-MGF": "1.2.840.113549.1.1.8", rsaPSS: "1.2.840.113549.1.1.10", SHA224withRSA: "1.2.840.113549.1.1.14", SHA256withRSA: "1.2.840.113549.1.1.11", SHA384withRSA: "1.2.840.113549.1.1.12", SHA512withRSA: "1.2.840.113549.1.1.13", SHA1withECDSA: "1.2.840.10045.4.1", SHA224withECDSA: "1.2.840.10045.4.3.1", SHA256withECDSA: "1.2.840.10045.4.3.2", SHA384withECDSA: "1.2.840.10045.4.3.3", SHA512withECDSA: "1.2.840.10045.4.3.4", dsa: "1.2.840.10040.4.1", SHA1withDSA: "1.2.840.10040.4.3", SHA224withDSA: "2.16.840.1.101.3.4.3.1", SHA256withDSA: "2.16.840.1.101.3.4.3.2", rsaEncryption: "1.2.840.113549.1.1.1", commonName: "2.5.4.3", countryName: "2.5.4.6", localityName: "2.5.4.7", stateOrProvinceName: "2.5.4.8", streetAddress: "2.5.4.9", organizationName: "2.5.4.10", organizationalUnitName: "2.5.4.11", domainComponent: "0.9.2342.19200300.100.1.25", userId: "0.9.2342.19200300.100.1.1", surname: "2.5.4.4", givenName: "2.5.4.42", title: "2.5.4.12", distinguishedName: "2.5.4.49", emailAddress: "1.2.840.113549.1.9.1", description: "2.5.4.13", businessCategory: "2.5.4.15", postalCode: "2.5.4.17", uniqueIdentifier: "2.5.4.45", organizationIdentifier: "2.5.4.97", jurisdictionOfIncorporationL: "1.3.6.1.4.1.311.60.2.1.1", jurisdictionOfIncorporationSP: "1.3.6.1.4.1.311.60.2.1.2", jurisdictionOfIncorporationC: "1.3.6.1.4.1.311.60.2.1.3", subjectDirectoryAttributes: "2.5.29.9", subjectKeyIdentifier: "2.5.29.14", keyUsage: "2.5.29.15", subjectAltName: "2.5.29.17", issuerAltName: "2.5.29.18", basicConstraints: "2.5.29.19", cRLNumber: "2.5.29.20", cRLReason: "2.5.29.21", nameConstraints: "2.5.29.30", cRLDistributionPoints: "2.5.29.31", certificatePolicies: "2.5.29.32", anyPolicy: "2.5.29.32.0", policyMappings: "2.5.29.33", authorityKeyIdentifier: "2.5.29.35", policyConstraints: "2.5.29.36", extKeyUsage: "2.5.29.37", inhibitAnyPolicy: "2.5.29.54", authorityInfoAccess: "1.3.6.1.5.5.7.1.1", ocsp: "1.3.6.1.5.5.7.48.1", ocspBasic: "1.3.6.1.5.5.7.48.1.1", ocspNonce: "1.3.6.1.5.5.7.48.1.2", ocspNoCheck: "1.3.6.1.5.5.7.48.1.5", caIssuers: "1.3.6.1.5.5.7.48.2", anyExtendedKeyUsage: "2.5.29.37.0", serverAuth: "1.3.6.1.5.5.7.3.1", clientAuth: "1.3.6.1.5.5.7.3.2", codeSigning: "1.3.6.1.5.5.7.3.3", emailProtection: "1.3.6.1.5.5.7.3.4", timeStamping: "1.3.6.1.5.5.7.3.8", ocspSigning: "1.3.6.1.5.5.7.3.9", smtpUTF8Mailbox: "1.3.6.1.5.5.7.8.9", dateOfBirth: "1.3.6.1.5.5.7.9.1", placeOfBirth: "1.3.6.1.5.5.7.9.2", gender: "1.3.6.1.5.5.7.9.3", countryOfCitizenship: "1.3.6.1.5.5.7.9.4", countryOfResidence: "1.3.6.1.5.5.7.9.5", ecPublicKey: "1.2.840.10045.2.1", "P-256": "1.2.840.10045.3.1.7", secp256r1: "1.2.840.10045.3.1.7", secp256k1: "1.3.132.0.10", secp384r1: "1.3.132.0.34", secp521r1: "1.3.132.0.35", pkcs5PBES2: "1.2.840.113549.1.5.13", pkcs5PBKDF2: "1.2.840.113549.1.5.12", "des-EDE3-CBC": "1.2.840.113549.3.7", data: "1.2.840.113549.1.7.1", "signed-data": "1.2.840.113549.1.7.2", "enveloped-data": "1.2.840.113549.1.7.3", "digested-data": "1.2.840.113549.1.7.5", "encrypted-data": "1.2.840.113549.1.7.6", "authenticated-data": "1.2.840.113549.1.9.16.1.2", tstinfo: "1.2.840.113549.1.9.16.1.4", signingCertificate: "1.2.840.113549.1.9.16.2.12", timeStampToken: "1.2.840.113549.1.9.16.2.14", signaturePolicyIdentifier: "1.2.840.113549.1.9.16.2.15", etsArchiveTimeStamp: "1.2.840.113549.1.9.16.2.27", signingCertificateV2: "1.2.840.113549.1.9.16.2.47", etsArchiveTimeStampV2: "1.2.840.113549.1.9.16.2.48", extensionRequest: "1.2.840.113549.1.9.14", contentType: "1.2.840.113549.1.9.3", messageDigest: "1.2.840.113549.1.9.4", signingTime: "1.2.840.113549.1.9.5", counterSignature: "1.2.840.113549.1.9.6", archiveTimeStampV3: "0.4.0.1733.2.4", pdfRevocationInfoArchival: "1.2.840.113583.1.1.8", adobeTimeStamp: "1.2.840.113583.1.1.9.1", smimeMailboxLegacy: "2.23.140.1.5.1.1", smimeMailboxMulti: "2.23.140.1.5.1.2", smimeMailboxStrict: "2.23.140.1.5.1.3", smimeOrganizationLegacy: "2.23.140.1.5.2.1", smimeOrganizationMulti: "2.23.140.1.5.2.2", smimeOrganizationStrict: "2.23.140.1.5.2.3", smimeSponsorLegacy: "2.23.140.1.5.3.1", smimeSponsorMulti: "2.23.140.1.5.3.2", smimeSponsorStrict: "2.23.140.1.5.3.3", smimeIndividualLegacy: "2.23.140.1.5.4.1", smimeIndividualMulti: "2.23.140.1.5.4.2", smimeIndividualStrict: "2.23.140.1.5.4.3" }, this.atype2oidList = { CN: "2.5.4.3", L: "2.5.4.7", ST: "2.5.4.8", O: "2.5.4.10", OU: "2.5.4.11", C: "2.5.4.6", STREET: "2.5.4.9", DC: "0.9.2342.19200300.100.1.25", UID: "0.9.2342.19200300.100.1.1", SN: "2.5.4.4", T: "2.5.4.12", GN: "2.5.4.42", DN: "2.5.4.49", E: "1.2.840.113549.1.9.1", description: "2.5.4.13", businessCategory: "2.5.4.15", postalCode: "2.5.4.17", serialNumber: "2.5.4.5", uniqueIdentifier: "2.5.4.45", organizationIdentifier: "2.5.4.97", jurisdictionOfIncorporationL: "1.3.6.1.4.1.311.60.2.1.1", jurisdictionOfIncorporationSP: "1.3.6.1.4.1.311.60.2.1.2", jurisdictionOfIncorporationC: "1.3.6.1.4.1.311.60.2.1.3" }, this.objCache = {}, this.name2obj = function (e) {if (void 0 !== this.objCache[e]) return this.objCache[e];if (void 0 === this.name2oidList[e]) throw "Name of ObjectIdentifier not defined: " + e;var i = this.name2oidList[e],n = new t({ oid: i });return this.objCache[e] = n, n;}, this.atype2obj = function (e) {if (void 0 !== this.objCache[e]) return this.objCache[e];var i;if (e.match(/^\d+\.\d+\.[0-9.]+$/)) i = e;else if (void 0 !== this.atype2oidList[e]) i = this.atype2oidList[e];else {if (void 0 === this.name2oidList[e]) throw new Error("AttributeType name undefined: " + e);i = this.name2oidList[e];}var n = new t({ oid: i });return this.objCache[e] = n, n;}, this.registerOIDs = function (t) {if (this.checkOIDs(t)) for (var e in t) this.name2oidList[e] = t[e];}, this.checkOIDs = function (t) {try {var e = Object.keys(t);return 0 != e.length && (e.map(function (t, e, i) {if (!this[t].match(/^[0-2]\.[0-9.]+$/)) throw new Error("value is not OID");}, t), !0);} catch (t) {return !1;}};}(), lt.asn1.x509.OID.oid2name = function (t) {var e = lt.asn1.x509.OID.name2oidList;for (var i in e) if (e[i] == t) return i;return "";}, lt.asn1.x509.OID.oid2atype = function (t) {var e = lt.asn1.x509.OID.atype2oidList;for (var i in e) if (e[i] == t) return i;return t;}, lt.asn1.x509.OID.name2oid = function (t) {if (t.match(/^[0-9.]+$/)) return t;var e = lt.asn1.x509.OID.name2oidList;return void 0 === e[t] ? "" : e[t];}, lt.asn1.x509.X509Util = {}, lt.asn1.x509.X509Util.newCertPEM = function (t) {var e = lt.asn1.x509;return e.TBSCertificate, new (0, e.Certificate)(t).getPEM();}, void 0 !== lt && lt || (lt = {}), void 0 !== lt.asn1 && lt.asn1 || (lt.asn1 = {}), void 0 !== lt.asn1.cms && lt.asn1.cms || (lt.asn1.cms = {}), lt.asn1.cms.Attribute = function (t) {var e = Error,i = lt.asn1,n = i.DERSequence,r = i.DERSet,s = i.DERObjectIdentifier;this.params = null, this.typeOid = null, this.setByParam = function (t) {this.params = t;}, this.getValueArray = function () {throw new e("not yet implemented abstract");}, this.tohex = function () {var t = new s({ oid: this.typeOid }),e = new r({ array: this.getValueArray() });return new n({ array: [t, e] }).tohex();}, this.getEncodedHex = function () {return this.tohex();};}, $t(lt.asn1.cms.Attribute, lt.asn1.ASN1Object), lt.asn1.cms.ContentType = function (t) {var e = lt.asn1;e.cms.ContentType.superclass.constructor.call(this), this.typeOid = "1.2.840.113549.1.9.3", this.getValueArray = function () {return [new e.DERObjectIdentifier(this.params.type)];}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.ContentType, lt.asn1.cms.Attribute), lt.asn1.cms.MessageDigest = function (t) {var e = lt.asn1,i = e.DEROctetString;e.cms.MessageDigest.superclass.constructor.call(this), this.typeOid = "1.2.840.113549.1.9.4", this.getValueArray = function () {return [new i(this.params)];}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.MessageDigest, lt.asn1.cms.Attribute), lt.asn1.cms.SigningTime = function (t) {var e = lt.asn1;e.cms.SigningTime.superclass.constructor.call(this), this.typeOid = "1.2.840.113549.1.9.5", this.getValueArray = function () {return [new e.x509.Time(this.params)];}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.SigningTime, lt.asn1.cms.Attribute), lt.asn1.cms.SigningCertificate = function (t) {var e = Error,i = lt,n = i.asn1,r = n.DERSequence,s = n.cms,o = s.ESSCertID;i.crypto, s.SigningCertificate.superclass.constructor.call(this), this.typeOid = "1.2.840.113549.1.9.16.2.12", this.getValueArray = function () {if (null == this.params || null == this.params || null == this.params.array) throw new e("parameter 'array' not specified");for (var i = this.params.array, n = [], s = 0; s < i.length; s++) {var a = i[s];0 != t.hasis || "string" != typeof a || -1 == a.indexOf("-----BEGIN") && !ut.isASN1HEX(a) || (a = { cert: a }), 0 != a.hasis && 0 == t.hasis && (a.hasis = !1), n.push(new o(a));}var l = new r({ array: n });return [new r({ array: [l] })];}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.SigningCertificate, lt.asn1.cms.Attribute), lt.asn1.cms.ESSCertID = function (t) {lt.asn1.cms.ESSCertID.superclass.constructor.call(this);var e = Error,i = lt,n = i.asn1,r = n.DEROctetString,s = n.DERSequence,o = n.cms.IssuerSerial;this.params = null, this.getCertHash = function (t, n) {if (null != t.hash) return t.hash;if ("string" == typeof t && -1 == t.indexOf("-----BEGIN") && !ut.isASN1HEX(t)) return t;var r, s, o;if ("string" == typeof t) r = t;else {if (null == t.cert) throw new e("hash nor cert unspecified");r = t.cert;}if (s = -1 != r.indexOf("-----BEGIN") ? Ct(r) : r, "string" == typeof t && (-1 != t.indexOf("-----BEGIN") ? s = Ct(t) : ut.isASN1HEX(t) && (s = t)), null != t.alg) o = t.alg;else {if (null == n) throw new e("hash alg unspecified");o = n;}return i.crypto.Util.hashHex(s, o);}, this.tohex = function () {var t = this.params,e = this.getCertHash(t, "sha1"),i = [];return i.push(new r({ hex: e })), ("string" == typeof t && -1 != t.indexOf("-----BEGIN") || null != t.cert && 0 != t.hasis || null != t.issuer && null != t.serial) && i.push(new o(t)), new s({ array: i }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.ESSCertID, lt.asn1.ASN1Object), lt.asn1.cms.SigningCertificateV2 = function (t) {var e = Error,i = lt,n = i.asn1,r = n.DERSequence,s = (n.x509, n.cms),o = s.ESSCertIDv2;i.crypto, s.SigningCertificateV2.superclass.constructor.call(this), this.typeOid = "1.2.840.113549.1.9.16.2.47", this.getValueArray = function () {if (null == this.params || null == this.params || null == this.params.array) throw new e("parameter 'array' not specified");for (var i = this.params.array, n = [], s = 0; s < i.length; s++) {var a = i[s];null == t.alg && 0 != t.hasis || "string" != typeof a || -1 == a.indexOf("-----BEGIN") && !ut.isASN1HEX(a) || (a = { cert: a }), null == a.alg && null != t.alg && (a.alg = t.alg), 0 != a.hasis && 0 == t.hasis && (a.hasis = !1), n.push(new o(a));}var l = new r({ array: n });return [new r({ array: [l] })];}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.SigningCertificateV2, lt.asn1.cms.Attribute), lt.asn1.cms.ESSCertIDv2 = function (t) {lt.asn1.cms.ESSCertIDv2.superclass.constructor.call(this), Error;var e = lt.asn1,i = e.DEROctetString,n = e.DERSequence,r = e.cms.IssuerSerial,s = e.x509.AlgorithmIdentifier;this.params = null, this.tohex = function () {var t = this.params,e = this.getCertHash(t, "sha256"),o = [];return null != t.alg && "sha256" != t.alg && o.push(new s({ name: t.alg })), o.push(new i({ hex: e })), ("string" == typeof t && -1 != t.indexOf("-----BEGIN") || null != t.cert && 0 != t.hasis || null != t.issuer && null != t.serial) && o.push(new r(t)), new n({ array: o }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.ESSCertIDv2, lt.asn1.cms.ESSCertID), lt.asn1.cms.IssuerSerial = function (t) {var e = Error,i = lt.asn1,n = i.DERInteger,r = i.DERSequence,s = i.cms,o = i.x509.GeneralNames,a = Yt;s.IssuerSerial.superclass.constructor.call(this), this.setByParam = function (t) {this.params = t;}, this.tohex = function () {var t,i,s = this.params;if ("string" == typeof s && -1 != s.indexOf("-----BEGIN") || null != s.cert) {var l;l = null != s.cert ? s.cert : s;var c = new a();c.readCertPEM(l), t = c.getIssuer(), i = { hex: c.getSerialNumberHex() };} else {if (null == s.issuer || !s.serial) throw new e("cert or issuer and serial parameter not specified");t = s.issuer, i = s.serial;}var h = new o([{ dn: t }]),u = new n(i);return new r({ array: [h, u] }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.IssuerSerial, lt.asn1.ASN1Object), lt.asn1.cms.SignerIdentifier = function (t) {var e = lt.asn1,i = (e.DERInteger, e.DERSequence, e.cms),n = i.IssuerAndSerialNumber,r = i.SubjectKeyIdentifier;e.x509.X500Name, Error, i.SignerIdentifier.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params;if ("isssn" == t.type) return new n(t).tohex();if ("skid" == t.type) return new r(t).tohex();throw new Error("wrong property for isssn or skid");}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.SignerIdentifier, lt.asn1.ASN1Object), lt.asn1.cms.IssuerAndSerialNumber = function (t) {var e = lt.asn1,i = e.DERInteger,n = e.DERSequence,r = e.cms,s = e.x509.X500Name,o = Yt,a = Error;r.IssuerAndSerialNumber.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t,e,r = this.params;if ("string" == typeof r && -1 != r.indexOf("-----BEGIN") || null != r.cert) {var l;l = null != r.cert ? r.cert : r;var c = new o();c.readCertPEM(l), t = c.getIssuer(), e = { hex: c.getSerialNumberHex() };} else {if (null == r.issuer || !r.serial) throw new a("cert or issuer and serial parameter not specified");t = r.issuer, e = r.serial;}var h = new s(t),u = new i(e);return new n({ array: [h, u] }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.IssuerAndSerialNumber, lt.asn1.ASN1Object), lt.asn1.cms.SubjectKeyIdentifier = function (t) {var e = lt.asn1,i = (e.DERInteger, e.DERSequence, e.ASN1Util.newObject),n = e.cms,r = (n.IssuerAndSerialName, n.SubjectKeyIdentifier, e.x509.X500Name, Yt),s = Error;n.SubjectKeyIdentifier.superclass.constructor.call(this), this.tohex = function () {var t,e = this.params;if (null == e.cert && null == e.skid) throw new s("property cert nor skid undefined");return null != e.cert ? t = new r(e.cert).getExtSubjectKeyIdentifier().kid.hex : null != e.skid && (t = e.skid), i({ tag: { tage: "a0", obj: { octstr: { hex: t } } } }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.SubjectKeyIdentifier, lt.asn1.ASN1Object), lt.asn1.cms.AttributeList = function (t) {var e = Error,i = lt.asn1,n = i.DERSet,r = i.cms;r.AttributeList.superclass.constructor.call(this), this.params = null, this.hTLV = null, this.setByParam = function (t) {this.params = t;}, this.tohex = function () {var t = this.params;if (null != this.hTLV) return this.hTLV;var i = !0;null != t.sortflag && (i = t.sortflag);for (var s = t.array, o = [], a = 0; a < s.length; a++) {var l = s[a],c = l.attr;if ("contentType" == c) o.push(new r.ContentType(l));else if ("messageDigest" == c) o.push(new r.MessageDigest(l));else if ("signingTime" == c) o.push(new r.SigningTime(l));else if ("signingCertificate" == c) o.push(new r.SigningCertificate(l));else if ("signingCertificateV2" == c) o.push(new r.SigningCertificateV2(l));else if ("signaturePolicyIdentifier" == c) o.push(new lt.asn1.cades.SignaturePolicyIdentifier(l));else {if ("signatureTimeStamp" != c && "timeStampToken" != c) throw new e("unknown attr: " + c);o.push(new lt.asn1.cades.SignatureTimeStamp(l));}}var h = new n({ array: o, sortflag: i });return this.hTLV = h.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.AttributeList, lt.asn1.ASN1Object), lt.asn1.cms.SignerInfo = function (t) {var e = Error,i = lt,n = i.asn1,r = n.DERInteger,s = n.DEROctetString,o = n.DERSequence,a = n.DERTaggedObject,l = n.cms,c = l.SignerIdentifier,h = l.AttributeList,u = (l.ContentType, l.EncapsulatedContentInfo, l.MessageDigest, l.SignedData, n.x509.AlgorithmIdentifier),d = i.crypto,p = Gt;l.SignerInfo.superclass.constructor.call(this), this.params = null, this.sign = function () {var t = this.params,e = t.sigalg,i = new h(t.sattrs).tohex(),n = p.getKey(t.signkey),r = new d.Signature({ alg: e });r.init(n), r.updateHex(i);var s = r.sign();t.sighex = s;}, this.tohex = function () {var t = this.params,i = [];if (i.push(new r({ int: t.version })), i.push(new c(t.id)), i.push(new u({ name: t.hashalg })), null != t.sattrs) {var n = new h(t.sattrs);try {i.push(new a({ tag: "a0", explicit: !1, obj: n }));} catch (t) {throw new e("si sattr error: " + t);}}if (null != t.sigalgfield ? i.push(new u({ name: t.sigalgfield })) : i.push(new u({ name: t.sigalg })), null == t.sighex && null != t.signkey && this.sign(), i.push(new s({ hex: t.sighex })), null != t.uattrs) {n = new h(t.uattrs);try {i.push(new a({ tag: "a1", explicit: !1, obj: n }));} catch (t) {throw new e("si uattr error: " + t);}}return new o({ array: i }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.SignerInfo, lt.asn1.ASN1Object), lt.asn1.cms.EncapsulatedContentInfo = function (t) {var e = lt.asn1,i = e.DERTaggedObject,n = e.DERSequence,r = e.DERObjectIdentifier,s = e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,e = [];if (e.push(new r(t.type)), null != t.content && (null != t.content.hex || null != t.content.str) && 1 != t.isDetached) {var o = new s(t.content),a = new i({ tag: "a0", explicit: !0, obj: o });e.push(a);}return new n({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.EncapsulatedContentInfo, lt.asn1.ASN1Object), lt.asn1.cms.ContentInfo = function (t) {var e = lt.asn1,i = e.DERTaggedObject,n = e.DERSequence,r = e.DERObjectIdentifier;e.x509.OID.name2obj, lt.asn1.cms.ContentInfo.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,e = [];e.push(new r(t.type));var s = new i({ tag: "a0", explicit: !0, obj: t.obj });return e.push(s), new n({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.ContentInfo, lt.asn1.ASN1Object), lt.asn1.cms.SignedData = function (t) {Error;var e = lt.asn1,i = (e.ASN1Object, e.DERInteger),n = e.DERSet,r = e.DERSequence,s = (e.DERTaggedObject, e.cms),o = s.EncapsulatedContentInfo,a = s.SignerInfo,l = s.ContentInfo,c = s.CertificateSet,h = s.RevocationInfoChoices,u = e.x509.AlgorithmIdentifier;lt.asn1.cms.SignedData.superclass.constructor.call(this), this.params = null, this.checkAndFixParam = function () {var t = this.params;this._setDigestAlgs(t), this._setContentTypeByEContent(t), this._setMessageDigestByEContent(t), this._setSignerInfoVersion(t), this._setSignedDataVersion(t);}, this._setDigestAlgs = function (t) {for (var e = {}, i = t.sinfos, n = 0; n < i.length; n++) e[i[n].hashalg] = 1;t.hashalgs = Object.keys(e).sort();}, this._setContentTypeByEContent = function (t) {for (var e = t.econtent.type, i = t.sinfos, n = 0; n < i.length; n++) {var r = i[n];this._getAttrParamByName(r, "contentType").type = e;}}, this._setMessageDigestByEContent = function (t) {var e = t.econtent,i = (t.econtent.type, e.content.hex);null == i && "data" == e.type && null != e.content.str && (i = St(e.content.str));for (var n = t.sinfos, r = 0; r < n.length; r++) {var s = n[r],o = s.hashalg,a = this._getAttrParamByName(s, "messageDigest"),l = lt.crypto.Util.hashHex(i, o);a.hex = l;}}, this._getAttrParamByName = function (t, e) {for (var i = t.sattrs.array, n = 0; n < i.length; n++) if (i[n].attr == e) return i[n];}, this._setSignerInfoVersion = function (t) {for (var e = t.sinfos, i = 0; i < e.length; i++) {var n = e[i],r = 1;"skid" == n.id.type && (r = 3), n.version = r;}}, this._setSignedDataVersion = function (t) {var e = this._getSignedDataVersion(t);t.version = e;}, this._getSignedDataVersion = function (t) {if (null != t.revinfos) for (var e = t.revinfos, i = 0; i < e.length; i++) if (null != e[i].ocsp) return 5;var n = t.sinfos;for (i = 0; i < n.length; i++) if (3 == t.sinfos[i].version) return 3;return "data" != t.econtent.type ? 3 : 1;}, this.tohex = function () {var t = this.params;null != this.getEncodedHexPrepare && this.getEncodedHexPrepare(), 1 != t.fixed && this.checkAndFixParam();var e = [];e.push(new i({ int: t.version }));for (var s = [], l = 0; l < t.hashalgs.length; l++) {var d = t.hashalgs[l];s.push(new u({ name: d }));}e.push(new n({ array: s })), e.push(new o(t.econtent)), null != t.certs && e.push(new c(t.certs)), null != t.revinfos && e.push(new h(t.revinfos));var p = [];for (l = 0; l < t.sinfos.length; l++) {var f = t.sinfos[l];p.push(new a(f));}return e.push(new n({ array: p })), new r({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.getContentInfo = function () {return new l({ type: "signed-data", obj: this });}, this.getContentInfoEncodedHex = function () {return this.getContentInfo().tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.SignedData, lt.asn1.ASN1Object), lt.asn1.cms.CertificateSet = function (t) {lt.asn1.cms.CertificateSet.superclass.constructor.call(this);var e = Error,i = lt.asn1,n = i.DERTaggedObject,r = i.DERSet,s = i.ASN1Object;this.params = null, this.tohex = function () {var t,i = this.params,o = [];if (i instanceof Array) t = i;else {if (null == i.array) throw new e("cert array not specified");t = i.array;}for (var a = 0; a < t.length; a++) {var l = Ct(t[a]),c = new s();c.hTLV = l, o.push(c);}var h = { array: o };0 == i.sortflag && (h.sortflag = !1);var u = new r(h);return new n({ tag: "a0", explicit: !1, obj: u }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.CertificateSet, lt.asn1.ASN1Object), lt.asn1.cms.RevocationInfoChoices = function (t) {lt.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params;if (!t instanceof Array) throw new Error("params is not array");for (var e = [], i = 0; i < t.length; i++) e.push(new lt.asn1.cms.RevocationInfoChoice(t[i]));return lt.asn1.ASN1Util.newObject({ tag: { tagi: "a1", obj: { set: e } } }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.RevocationInfoChoices, lt.asn1.ASN1Object), lt.asn1.cms.RevocationInfoChoice = function (t) {lt.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params;if (null != t.crl && "string" == typeof t.crl) {var e = t.crl;return -1 != t.crl.indexOf("-----BEGIN") && (e = Ct(t.crl)), e;}if (null != t.ocsp) return lt.asn1.ASN1Util.newObject({ tag: { tagi: "a1", obj: new lt.asn1.cms.OtherRevocationFormat(t) } }).tohex();throw new Error("property crl or ocsp undefined");}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.RevocationInfoChoice, lt.asn1.ASN1Object), lt.asn1.cms.OtherRevocationFormat = function (t) {lt.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var e = Error,i = lt,n = i.asn1.ASN1Util.newObject,r = i.lang.String.isHex;this.params = null, this.tohex = function () {var t = this.params;if (null == t.ocsp) throw new e("property ocsp not specified");if (!r(t.ocsp) || !ut.isASN1HEX(t.ocsp)) throw new e("ocsp value not ASN.1 hex string");return n({ seq: [{ oid: "1.3.6.1.5.5.7.16.2" }, { asn1: { tlv: t.ocsp } }] }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cms.OtherRevocationFormat, lt.asn1.ASN1Object), lt.asn1.cms.CMSUtil = new function () {}(), lt.asn1.cms.CMSUtil.newSignedData = function (t) {return new lt.asn1.cms.SignedData(t);}, lt.asn1.cms.CMSUtil.verifySignedData = function (t) {var e = lt,i = e.asn1,n = i.cms,r = (n.SignerInfo, n.SignedData, n.SigningTime, n.SigningCertificate, n.SigningCertificateV2, i.cades.SignaturePolicyIdentifier, e.lang.String.isHex),s = ut,o = s.getVbyList,a = s.getTLVbyList,l = s.getIdxbyList,c = s.getChildIdx,h = s.getTLV,u = s.oidname,d = e.crypto.Util.hashHex;void 0 === t.cms && r(t.cms);var p = t.cms,f = function (t, e) {var i = e.idx;e.signerid_issuer1 = a(t, i, [1, 0], "30"), e.signerid_serial1 = o(t, i, [1, 1], "02"), e.hashalg = u(o(t, i, [2, 0], "06"));var n = l(t, i, [3], "a0");e.idxSignedAttrs = n, g(t, e, n);var r = c(t, i).length;if (r < 6) throw "malformed SignerInfo";e.sigalg = u(o(t, i, [r - 2, 0], "06")), e.sigval = o(t, i, [r - 1], "04");},g = function (t, e, i) {var n = c(t, i);e.signedAttrIdxList = n;for (var r = 0; r < n.length; r++) {var s,a = n[r],l = o(t, a, [0], "06");"2a864886f70d010905" === l ? (s = bt(o(t, a, [1, 0])), e.saSigningTime = s) : "2a864886f70d010904" === l && (s = o(t, a, [1, 0], "04"), e.saMessageDigest = s);}},m = function (t, e, i, n) {i.verifyDetail = {};var r = i.verifyDetail,s = e.parse.econtent,o = i.hashalg,a = i.saMessageDigest;r.validMessageDigest = !1, d(s, o) === a && (r.validMessageDigest = !0), function (t, e, i) {var n,r = e.parse.certsIdx;if (void 0 === e.certs) {n = [], e.certkeys = [];for (var s = c(t, r), o = 0; o < s.length; o++) {var a = h(t, s[o]),l = new Yt();l.readCertHex(a), n[o] = l, e.certkeys[o] = l.getPublicKey();}e.certs = n;} else n = e.certs;for (e.cccc = n.length, e.cccci = s.length, o = 0; o < n.length; o++) {var u = l.getIssuerHex(),d = l.getSerialNumberHex();i.signerid_issuer1 === u && i.signerid_serial1 === d && (i.certkey_idx = o);}}(t, e, i), r.validSignatureValue = !1;var l = i.sigalg,u = "31" + h(t, i.idxSignedAttrs).substr(2);i.signedattrshex = u;var p = e.certs[i.certkey_idx].getPublicKey(),f = new lt.crypto.Signature({ alg: l });f.init(p), f.updateHex(u);var g = f.verify(i.sigval);r.validSignatureValue_isValid = g, !0 === g && (r.validSignatureValue = !0), i.isValid = !1, r.validMessageDigest && r.validSignatureValue && (i.isValid = !0);},v = { isValid: !1, parse: {} };return function (t, e) {if ("2a864886f70d010702" !== o(t, 0, [0], "06")) return e;e.cmsType = "signedData", e.econtent = o(t, 0, [1, 0, 2, 1, 0]), function (t, e) {for (var i, n = 3; n < 6; n++) if (void 0 !== (i = l(t, 0, [1, 0, n]))) {var r = t.substr(i, 2);"a0" === r && (e.certsIdx = i), "a1" === r && (e.revinfosIdx = i), "31" === r && (e.signerinfosIdx = i);}}(t, e), e.signerInfos = [], function (t, e) {var i = e.signerinfosIdx;if (void 0 !== i) {var n = c(t, i);e.signerInfoIdxList = n;for (var r = 0; r < n.length; r++) {var s = { idx: n[r] };f(t, s), e.signerInfos.push(s);}}}(t, e);}(p, v.parse), function (t, e) {for (var i = e.parse.signerInfos, n = i.length, r = !0, s = 0; s < n; s++) {var o = i[s];m(t, e, o), o.isValid || (r = !1);}e.isValid = r;}(p, v), v;}, lt.asn1.cms.CMSParser = function () {var t = Error,e = Yt,i = new e(),n = ut,r = n.getV,s = n.getTLV,o = (n.getIdxbyList, n.getTLVbyList),a = n.getTLVbyListEx,l = n.getVbyList,c = n.getVbyListEx,h = n.getChildIdx;this.getCMSSignedData = function (t) {var e = o(t, 0, [1, 0]);return this.getSignedData(e);}, this.getSignedData = function (t) {var e = h(t, 0),i = {},n = r(t, e[0]),o = parseInt(n, 16);i.version = o;var l = s(t, e[1]);i.hashalgs = this.getHashAlgArray(l);var c = s(t, e[2]);i.econtent = this.getEContent(c);var u = a(t, 0, ["[0]"]);null != u && (i.certs = this.getCertificateSet(u)), a(t, 0, ["[1]"]);var d = a(t, 0, [3]);return i.sinfos = this.getSignerInfos(d), i;}, this.getHashAlgArray = function (t) {for (var i = h(t, 0), n = new e(), r = [], o = 0; o < i.length; o++) {var a = s(t, i[o]),l = n.getAlgorithmIdentifierName(a);r.push(l);}return r;}, this.getEContent = function (t) {var e = {},i = l(t, 0, [0]),n = l(t, 0, [1, 0]);return e.type = lt.asn1.x509.OID.oid2name(ut.hextooidstr(i)), e.content = { hex: n }, e;}, this.getSignerInfos = function (t) {for (var e = [], i = h(t, 0), n = 0; n < i.length; n++) {var r = s(t, i[n]),o = this.getSignerInfo(r);e.push(o);}return e;}, this.getSignerInfo = function (t) {var e = {},r = h(t, 0),o = n.getInt(t, r[0], -1);-1 != o && (e.version = o);var l = s(t, r[1]),u = this.getIssuerAndSerialNumber(l);e.id = u;var d = s(t, r[2]),p = i.getAlgorithmIdentifierName(d);e.hashalg = p;var f = a(t, 0, ["[0]"]);if (null != f) {var g = this.getAttributeList(f);e.sattrs = g;}var m = a(t, 0, [3]),v = i.getAlgorithmIdentifierName(m);e.sigalg = v;var y = c(t, 0, [4]);e.sighex = y;var b = a(t, 0, ["[1]"]);if (null != b) {var w = this.getAttributeList(b);e.uattrs = w;}return e;}, this.getSignerIdentifier = function (t) {if ("30" == t.substr(0, 2)) return this.getIssuerAndSerialNumber(t);throw new Error("SKID of signerIdentifier not supported");}, this.getIssuerAndSerialNumber = function (t) {var e = { type: "isssn" },n = h(t, 0),o = s(t, n[0]);e.issuer = i.getX500Name(o);var a = r(t, n[1]);return e.serial = { hex: a }, e;}, this.getAttributeList = function (t) {for (var e = [], i = h(t, 0), n = 0; n < i.length; n++) {var r = s(t, i[n]),o = this.getAttribute(r);e.push(o);}return { array: e };}, this.getAttribute = function (t) {var e = {},i = h(t, 0),r = n.getOID(t, i[0]),o = lt.asn1.x509.OID.oid2name(r);e.attr = o;var a = s(t, i[1]),l = h(a, 0);if (1 == l.length) e.valhex = s(a, l[0]);else {for (var c = [], u = 0; u < l.length; u++) c.push(s(a, l[u]));e.valhex = c;}return "contentType" == o ? this.setContentType(e) : "messageDigest" == o ? this.setMessageDigest(e) : "signingTime" == o ? this.setSigningTime(e) : "signingCertificate" == o ? this.setSigningCertificate(e) : "signingCertificateV2" == o ? this.setSigningCertificateV2(e) : "signaturePolicyIdentifier" == o && this.setSignaturePolicyIdentifier(e), e;}, this.setContentType = function (t) {var e = n.getOIDName(t.valhex, 0, null);null != e && (t.type = e, delete t.valhex);}, this.setSigningTime = function (t) {var e = bt(r(t.valhex, 0));t.str = e, delete t.valhex;}, this.setMessageDigest = function (t) {var e = r(t.valhex, 0);t.hex = e, delete t.valhex;}, this.setSigningCertificate = function (t) {var e = h(t.valhex, 0);if (e.length > 0) {for (var i = s(t.valhex, e[0]), n = h(i, 0), r = [], o = 0; o < n.length; o++) {var a = s(i, n[o]),l = this.getESSCertID(a);r.push(l);}t.array = r;}if (e.length > 1) {var c = s(t.valhex, e[1]);t.polhex = c;}delete t.valhex;}, this.setSignaturePolicyIdentifier = function (t) {var i = h(t.valhex, 0);if (i.length > 0) {var o = n.getOID(t.valhex, i[0]);t.oid = o;}if (i.length > 1) {var a = new e(),l = h(t.valhex, i[1]),c = s(t.valhex, l[0]),u = a.getAlgorithmIdentifierName(c);t.alg = u;var d = r(t.valhex, l[1]);t.hash = d;}delete t.valhex;}, this.setSigningCertificateV2 = function (t) {var e = h(t.valhex, 0);if (e.length > 0) {for (var i = s(t.valhex, e[0]), n = h(i, 0), r = [], o = 0; o < n.length; o++) {var a = s(i, n[o]),l = this.getESSCertIDv2(a);r.push(l);}t.array = r;}if (e.length > 1) {var c = s(t.valhex, e[1]);t.polhex = c;}delete t.valhex;}, this.getESSCertID = function (t) {var e = {},i = h(t, 0);if (i.length > 0) {var n = r(t, i[0]);e.hash = n;}if (i.length > 1) {var o = s(t, i[1]),a = this.getIssuerSerial(o);null != a.serial && (e.serial = a.serial), null != a.issuer && (e.issuer = a.issuer);}return e;}, this.getESSCertIDv2 = function (e) {var n = {},o = h(e, 0);if (o.length < 1 || 3 < o.length) throw new t("wrong number of elements");var a = 0;if ("30" == e.substr(o[0], 2)) {var l = s(e, o[0]);n.alg = i.getAlgorithmIdentifierName(l), a++;} else n.alg = "sha256";var c = r(e, o[a]);if (n.hash = c, o.length > a + 1) {var u = s(e, o[a + 1]),d = this.getIssuerSerial(u);n.issuer = d.issuer, n.serial = d.serial;}return n;}, this.getIssuerSerial = function (t) {var e = {},n = h(t, 0),o = s(t, n[0]),a = i.getGeneralNames(o)[0].dn;e.issuer = a;var l = r(t, n[1]);return e.serial = { hex: l }, e;}, this.getCertificateSet = function (t) {for (var e = h(t, 0), i = [], n = 0; n < e.length; n++) {var r = s(t, e[n]);if ("30" == r.substr(0, 2)) {var o = Et(r, "CERTIFICATE");i.push(o);}}return { array: i, sortflag: !1 };};}, void 0 !== lt && lt || (lt = {}), void 0 !== lt.asn1 && lt.asn1 || (lt.asn1 = {}), void 0 !== lt.asn1.tsp && lt.asn1.tsp || (lt.asn1.tsp = {}), lt.asn1.tsp.TimeStampToken = function (t) {var e = lt.asn1.tsp;e.TimeStampToken.superclass.constructor.call(this), this.params = null, this.getEncodedHexPrepare = function () {var t = new e.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex = t.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.tsp.TimeStampToken, lt.asn1.cms.SignedData), lt.asn1.tsp.TSTInfo = function (t) {Error;var e = lt.asn1,i = e.DERSequence,n = e.DERInteger,r = e.DERBoolean,s = e.DERGeneralizedTime,o = e.DERObjectIdentifier,a = e.DERTaggedObject,l = e.tsp,c = l.MessageImprint,h = l.Accuracy,u = (e.x509.X500Name, e.x509.GeneralName);if (l.TSTInfo.superclass.constructor.call(this), this.dVersion = new n({ int: 1 }), this.dPolicy = null, this.dMessageImprint = null, this.dSerial = null, this.dGenTime = null, this.dAccuracy = null, this.dOrdering = null, this.dNonce = null, this.dTsa = null, this.tohex = function () {var t = [this.dVersion];if (null == this.dPolicy) throw new Error("policy shall be specified.");if (t.push(this.dPolicy), null == this.dMessageImprint) throw new Error("messageImprint shall be specified.");if (t.push(this.dMessageImprint), null == this.dSerial) throw new Error("serialNumber shall be specified.");if (t.push(this.dSerial), null == this.dGenTime) throw new Error("genTime shall be specified.");t.push(this.dGenTime), null != this.dAccuracy && t.push(this.dAccuracy), null != this.dOrdering && t.push(this.dOrdering), null != this.dNonce && t.push(this.dNonce), null != this.dTsa && t.push(this.dTsa);var e = new i({ array: t });return this.hTLV = e.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t) {if ("string" == typeof t.policy) {if (!t.policy.match(/^[0-9.]+$/)) throw "policy shall be oid like 0.1.4.134";this.dPolicy = new o({ oid: t.policy });}void 0 !== t.messageImprint && (this.dMessageImprint = new c(t.messageImprint)), void 0 !== t.serial && (this.dSerial = new n(t.serial)), void 0 !== t.genTime && (this.dGenTime = new s(t.genTime)), void 0 !== t.accuracy && (this.dAccuracy = new h(t.accuracy)), void 0 !== t.ordering && 1 == t.ordering && (this.dOrdering = new r()), void 0 !== t.nonce && (this.dNonce = new n(t.nonce)), void 0 !== t.tsa && (this.dTsa = new a({ tag: "a0", explicit: !0, obj: new u({ dn: t.tsa }) }));}}, $t(lt.asn1.tsp.TSTInfo, lt.asn1.ASN1Object), lt.asn1.tsp.Accuracy = function (t) {var e = lt.asn1,i = e.ASN1Util.newObject;e.tsp.Accuracy.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,e = [];return null != t.seconds && "number" == typeof t.seconds && e.push({ int: t.seconds }), null != t.millis && "number" == typeof t.millis && e.push({ tag: { tagi: "80", obj: { int: t.millis } } }), null != t.micros && "number" == typeof t.micros && e.push({ tag: { tagi: "81", obj: { int: t.micros } } }), i({ seq: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.tsp.Accuracy, lt.asn1.ASN1Object), lt.asn1.tsp.MessageImprint = function (t) {var e = lt.asn1,i = e.DERSequence,n = e.DEROctetString,r = e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,e = new r({ name: t.alg }),s = new n({ hex: t.hash });return new i({ array: [e, s] }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.tsp.MessageImprint, lt.asn1.ASN1Object), lt.asn1.tsp.TimeStampReq = function (t) {var e = lt.asn1,i = e.DERSequence,n = e.DERInteger,r = e.DERBoolean,s = (e.ASN1Object, e.DERObjectIdentifier),o = e.tsp,a = o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,e = [];return e.push(new n({ int: 1 })), t.messageImprint instanceof lt.asn1.ASN1Object ? e.push(t.messageImprint) : e.push(new a(t.messageImprint)), null != t.policy && e.push(new s(t.policy)), null != t.nonce && e.push(new n(t.nonce)), 1 == t.certreq && e.push(new r()), new i({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.tsp.TimeStampReq, lt.asn1.ASN1Object), lt.asn1.tsp.TimeStampResp = function (t) {var e = lt.asn1,i = e.DERSequence,n = (e.ASN1Object, e.tsp),r = n.PKIStatusInfo;n.TimeStampResp.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,s = [];if (null != t.econtent || null != t.tst) {if (null != t.statusinfo ? s.push(new r(t.statusinfo)) : s.push(new r("granted")), null != t.econtent) s.push(new n.TimeStampToken(t).getContentInfo());else {if (!(t.tst instanceof e.ASN1Object)) throw new Error("improper member tst value");s.push(t.tst);}} else {if (null == t.statusinfo) throw new Error("parameter for token nor statusinfo not specified");s.push(new r(t.statusinfo));}return new i({ array: s }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.tsp.TimeStampResp, lt.asn1.ASN1Object), lt.asn1.tsp.PKIStatusInfo = function (t) {var e = Error,i = lt.asn1,n = i.DERSequence,r = i.tsp,s = r.PKIStatus,o = r.PKIFreeText,a = r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,i = [];if ("string" == typeof t) i.push(new s(t));else {if (null == t.status) throw new e("property 'status' unspecified");i.push(new s(t.status)), null != t.statusstr && i.push(new o(t.statusstr)), null != t.failinfo && i.push(new a(t.failinfo));}return new n({ array: i }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.tsp.PKIStatusInfo, lt.asn1.ASN1Object), lt.asn1.tsp.PKIStatus = function (t) {var e = Error,i = lt.asn1,n = i.DERInteger;i.tsp.PKIStatus.superclass.constructor.call(this);var r = { granted: 0, grantedWithMods: 1, rejection: 2, waiting: 3, revocationWarning: 4, revocationNotification: 5 };this.params = null, this.tohex = function () {var t,i = this.params;if ("string" == typeof i) try {t = r[i];} catch (t) {throw new e("undefined name: " + i);} else {if ("number" != typeof i) throw new e("unsupported params");t = i;}return new n({ int: t }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.tsp.PKIStatus, lt.asn1.ASN1Object), lt.asn1.tsp.PKIFreeText = function (t) {var e = Error,i = lt.asn1,n = i.DERSequence,r = i.DERUTF8String;i.tsp.PKIFreeText.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params;if (!t instanceof Array) throw new e("wrong params: not array");for (var i = [], s = 0; s < t.length; s++) i.push(new r({ str: t[s] }));return new n({ array: i }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.tsp.PKIFreeText, lt.asn1.ASN1Object), lt.asn1.tsp.PKIFailureInfo = function (t) {var e = Error,i = lt.asn1,n = i.DERBitString,r = i.tsp.PKIFailureInfo,s = { badAlg: 0, badRequest: 2, badDataFormat: 5, timeNotAvailable: 14, unacceptedPolicy: 15, unacceptedExtension: 16, addInfoNotAvailable: 17, systemFailure: 25 };r.superclass.constructor.call(this), this.params = null, this.getBinValue = function () {var t = this.params,i = 0;if ("number" == typeof t && 0 <= t && t <= 25) {for (var n = (i |= 1 << t).toString(2), r = "", o = n.length - 1; o >= 0; o--) r += n[o];return r;}if ("string" == typeof t && null != s[t]) return Ht([t], s);if ("object" == typeof t && null != t.length) return Ht(t, s);throw new e("wrong params");}, this.tohex = function () {this.params;var t = this.getBinValue();return new n({ bin: t }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.tsp.PKIFailureInfo, lt.asn1.ASN1Object), lt.asn1.tsp.AbstractTSAAdapter = function (t) {this.getTSTHex = function (t, e) {throw "not implemented yet";};}, lt.asn1.tsp.SimpleTSAAdapter = function (t) {var e = lt,i = e.asn1.tsp,n = e.crypto.Util.hashHex;i.SimpleTSAAdapter.superclass.constructor.call(this), this.params = null, this.serial = 0, this.getTSTHex = function (t, e) {var r = n(t, e);this.params.econtent.content.messageImprint = { alg: e, hash: r }, this.params.econtent.content.serial = { int: this.serial++ };var s = Math.floor(1e9 * Math.random());return this.params.econtent.content.nonce = { int: s }, new i.TimeStampToken(this.params).getContentInfoEncodedHex();}, void 0 !== t && (this.params = t);}, $t(lt.asn1.tsp.SimpleTSAAdapter, lt.asn1.tsp.AbstractTSAAdapter), lt.asn1.tsp.FixedTSAAdapter = function (t) {var e = lt,i = e.asn1.tsp,n = e.crypto.Util.hashHex;i.FixedTSAAdapter.superclass.constructor.call(this), this.params = null, this.getTSTHex = function (t, e) {var r = n(t, e);return this.params.econtent.content.messageImprint = { alg: e, hash: r }, new i.TimeStampToken(this.params).getContentInfoEncodedHex();}, void 0 !== t && (this.params = t);}, $t(lt.asn1.tsp.FixedTSAAdapter, lt.asn1.tsp.AbstractTSAAdapter), lt.asn1.tsp.TSPUtil = new function () {}(), lt.asn1.tsp.TSPUtil.newTimeStampToken = function (t) {return new lt.asn1.tsp.TimeStampToken(t);}, lt.asn1.tsp.TSPUtil.parseTimeStampReq = function (t) {return new lt.asn1.tsp.TSPParser().getTimeStampReq(t);}, lt.asn1.tsp.TSPUtil.parseMessageImprint = function (t) {return new lt.asn1.tsp.TSPParser().getMessageImprint(t);}, lt.asn1.tsp.TSPParser = function () {Error;var t = new Yt(),e = ut,i = e.getV,n = e.getTLV,r = e.getIdxbyList,s = (e.getTLVbyListEx, e.getChildIdx),o = ["granted", "grantedWithMods", "rejection", "waiting", "revocationWarning", "revocationNotification"],a = { 0: "badAlg", 2: "badRequest", 5: "badDataFormat", 14: "timeNotAvailable", 15: "unacceptedPolicy", 16: "unacceptedExtension", 17: "addInfoNotAvailable", 25: "systemFailure" };this.getResponse = function (t) {var e = s(t, 0);if (1 == e.length) return this.getPKIStatusInfo(n(t, e[0]));if (e.length > 1) {var i = this.getPKIStatusInfo(n(t, e[0])),r = n(t, e[1]),o = this.getToken(r);return o.statusinfo = i, o;}}, this.getToken = function (t) {var e = new lt.asn1.cms.CMSParser().getCMSSignedData(t);return this.setTSTInfo(e), e;}, this.setTSTInfo = function (t) {var e = t.econtent;if ("tstinfo" == e.type) {var i = e.content.hex,n = this.getTSTInfo(i);e.content = n;}}, this.getTSTInfo = function (e) {var r = {},o = s(e, 0),a = i(e, o[1]);r.policy = Bt(a);var l = n(e, o[2]);r.messageImprint = this.getMessageImprint(l);var c = i(e, o[3]);r.serial = { hex: c };var h = i(e, o[4]);r.genTime = { str: bt(h) };var u = 0;if (o.length > 5 && "30" == e.substr(o[5], 2)) {var d = n(e, o[5]);r.accuracy = this.getAccuracy(d), u++;}if (o.length > 5 + u && "01" == e.substr(o[5 + u], 2) && ("ff" == i(e, o[5 + u]) && (r.ordering = !0), u++), o.length > 5 + u && "02" == e.substr(o[5 + u], 2)) {var p = i(e, o[5 + u]);r.nonce = { hex: p }, u++;}if (o.length > 5 + u && "a0" == e.substr(o[5 + u], 2)) {var f = n(e, o[5 + u]);f = "30" + f.substr(2), pGeneralNames = t.getGeneralNames(f);var g = pGeneralNames[0].dn;r.tsa = g, u++;}if (o.length > 5 + u && "a1" == e.substr(o[5 + u], 2)) {var m = n(e, o[5 + u]);m = "30" + m.substr(2);var v = t.getExtParamArray(m);r.ext = v, u++;}return r;}, this.getAccuracy = function (t) {for (var e = {}, n = s(t, 0), r = 0; r < n.length; r++) {var o = t.substr(n[r], 2),a = i(t, n[r]),l = parseInt(a, 16);"02" == o ? e.seconds = l : "80" == o ? e.millis = l : "81" == o && (e.micros = l);}return e;}, this.getMessageImprint = function (t) {if ("30" != t.substr(0, 2)) throw new Error("head of messageImprint hex shall be x30");var n = {},o = (s(t, 0), r(t, 0, [0, 0])),a = i(t, o),l = e.hextooidstr(a),c = lt.asn1.x509.OID.oid2name(l);if ("" == c) throw new Error("hashAlg name undefined: " + l);var h = c,u = r(t, 0, [1]);return n.alg = h, n.hash = i(t, u), n;}, this.getPKIStatusInfo = function (t) {var e = {},r = s(t, 0),a = 0;try {var l = i(t, r[0]),c = parseInt(l, 16);e.status = o[c];} catch (t) {}if (r.length > 1 && "30" == t.substr(r[1], 2)) {var h = n(t, r[1]);e.statusstr = this.getPKIFreeText(h), a++;}if (r.length > a && "03" == t.substr(r[1 + a], 2)) {var u = n(t, r[1 + a]);e.failinfo = this.getPKIFailureInfo(u);}return e;}, this.getPKIFreeText = function (t) {for (var i = [], n = s(t, 0), r = 0; r < n.length; r++) i.push(e.getString(t, n[r]));return i;}, this.getPKIFailureInfo = function (t) {var i = e.getInt(t, 0);return null != a[i] ? a[i] : i;}, this.getTimeStampReq = function (t) {var r = { certreq: !1 },o = s(t, 0);if (o.length < 2) throw new Error("TimeStampReq must have at least 2 items");var a = n(t, o[1]);r.messageImprint = lt.asn1.tsp.TSPUtil.parseMessageImprint(a);for (var l = 2; l < o.length; l++) {var c = o[l],h = t.substr(c, 2);if ("06" == h) {var u = i(t, c);r.policy = e.hextooidstr(u);}"02" == h && (r.nonce = i(t, c)), "01" == h && (r.certreq = !0);}return r;};}, void 0 !== lt && lt || (lt = {}), void 0 !== lt.asn1 && lt.asn1 || (lt.asn1 = {}), void 0 !== lt.asn1.cades && lt.asn1.cades || (lt.asn1.cades = {}), lt.asn1.cades.SignaturePolicyIdentifier = function (t) {var e = lt.asn1.cades,i = e.SignaturePolicyId;e.SignaturePolicyIdentifier.superclass.constructor.call(this), this.typeOid = "1.2.840.113549.1.9.16.2.15", this.params = null, this.getValueArray = function () {return [new i(this.params)];}, this.setByParam = function (t) {this.params = t;}, null != t && this.setByParam(t);}, $t(lt.asn1.cades.SignaturePolicyIdentifier, lt.asn1.cms.Attribute), lt.asn1.cades.SignaturePolicyId = function (t) {var e = lt.asn1,i = e.DERSequence,n = e.DERObjectIdentifier,r = (e.x509.AlgorithmIdentifier, e.cades),s = r.SignaturePolicyId,o = r.OtherHashAlgAndValue;s.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,e = [];return e.push(new n(t.oid)), e.push(new o(t)), new i({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, null != t && this.setByParam(t);}, $t(lt.asn1.cades.SignaturePolicyId, lt.asn1.ASN1Object), lt.asn1.cades.OtherHashAlgAndValue = function (t) {var e = Error,i = lt.asn1,n = i.DERSequence,r = i.DEROctetString,s = i.x509.AlgorithmIdentifier;i.cades.OtherHashAlgAndValue.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params;if (null == t.alg) throw new e("property 'alg' not specified");if (null == t.hash && null == t.cert) throw new e("property 'hash' nor 'cert' not specified");var i = null;if (null != t.hash) i = t.hash;else if (null != t.cert) {if ("string" != typeof t.cert) throw new e("cert not string");var o = t.cert;-1 != t.cert.indexOf("-----BEGIN") && (o = Ct(t.cert)), i = lt.crypto.Util.hashHex(o, t.alg);}var a = [];return a.push(new s({ name: t.alg })), a.push(new r({ hex: i })), new n({ array: a }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cades.OtherHashAlgAndValue, lt.asn1.ASN1Object), lt.asn1.cades.OtherHashValue = function (t) {lt.asn1.cades.OtherHashValue.superclass.constructor.call(this);var e = Error,i = lt,n = (i.lang.String.isHex, i.asn1.DEROctetString);i.crypto.Util.hashHex, this.params = null, this.tohex = function () {var t = this.params;if (null == t.hash && null == t.cert) throw new e("hash or cert not specified");var i = null;if (null != t.hash) i = t.hash;else if (null != t.cert) {if ("string" != typeof t.cert) throw new e("cert not string");var r = t.cert;-1 != t.cert.indexOf("-----BEGIN") && (r = Ct(t.cert)), i = lt.crypto.Util.hashHex(r, "sha1");}return new n({ hex: i }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cades.OtherHashValue, lt.asn1.ASN1Object), lt.asn1.cades.SignatureTimeStamp = function (t) {var e = Error,i = lt,n = i.lang.String.isHex,r = i.asn1,s = r.ASN1Object;r.x509, r.cades.SignatureTimeStamp.superclass.constructor.call(this), this.typeOid = "1.2.840.113549.1.9.16.2.14", this.params = null, this.getValueArray = function () {var t = this.params;if (null != t.tst) {if (n(t.tst)) return (i = new s()).hTLV = t.tst, [i];if (t.tst instanceof s) return [t.tst];throw new e("params.tst has wrong value");}if (null != t.res) {var i,r = t.res;if (r instanceof s && (r = r.tohex()), "string" != typeof r || !n(r)) throw new e("params.res has wrong value");return ut.getTLVbyList(r, 0, [1]), (i = new s()).hTLV = t.tst, [i];}}, null != t && this.setByParam(t);}, $t(lt.asn1.cades.SignatureTimeStamp, lt.asn1.cms.Attribute), lt.asn1.cades.CompleteCertificateRefs = function (t) {var e = Error,i = lt,n = i.asn1,r = n.DERSequence,s = n.cades,o = s.OtherCertID,a = i.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this), this.typeOid = "1.2.840.113549.1.9.16.2.21", this.params = null, this.getValueArray = function () {for (var t = this.params, i = [], n = 0; n < t.array.length; n++) {var s = t.array[n];if ("string" == typeof s) if (-1 != s.indexOf("-----BEGIN")) s = { cert: s };else {if (!a(s)) throw new e("unsupported value: " + s);s = { hash: s };}null != t.alg && null == s.alg && (s.alg = t.alg), null != t.hasis && null == s.hasis && (s.hasis = t.hasis);var l = new o(s);i.push(l);}return [new r({ array: i })];}, null != t && this.setByParam(t);}, $t(lt.asn1.cades.CompleteCertificateRefs, lt.asn1.cms.Attribute), lt.asn1.cades.OtherCertID = function (t) {var e = lt.asn1,i = e.DERSequence,n = e.cms.IssuerSerial,r = e.cades,s = r.OtherHashValue,o = r.OtherHashAlgAndValue;r.OtherCertID.superclass.constructor.call(this), this.params = t, this.tohex = function () {var t = this.params;"string" == typeof t && (-1 != t.indexOf("-----BEGIN") ? t = { cert: t } : _isHex(t) && (t = { hash: t }));var e,r = [];if (e = null != t.alg ? new o(t) : new s(t), r.push(e), null != t.cert && 1 == t.hasis || null != t.issuer && null != t.serial) {var a = new n(t);r.push(a);}return new i({ array: r }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cades.OtherCertID, lt.asn1.ASN1Object), lt.asn1.cades.OtherHash = function (t) {Error;var e = lt,i = e.asn1,n = (i.cms, i.cades),r = n.OtherHashAlgAndValue,s = n.OtherHashValue,o = (e.crypto.Util.hashHex, e.lang.String.isHex);n.OtherHash.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params;return "string" == typeof t && (-1 != t.indexOf("-----BEGIN") ? t = { cert: t } : o(t) && (t = { hash: t })), (null != t.alg ? new r(t) : new s(t)).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.cades.OtherHash, lt.asn1.ASN1Object), lt.asn1.cades.CAdESUtil = new function () {}(), lt.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned = function (t) {return new lt.asn1.cms.CMSParser().getCMSSignedData(t);}, lt.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned = function (t, e, i) {var n = ut,r = n.getChildIdx,s = n.getTLV,o = n.getV,a = lt.asn1,l = a.ASN1Object,c = a.cms,h = c.AttributeList,u = c.SignerInfo,d = {},p = r(t, e);if (6 != p.length) throw "not supported items for SignerInfo (!=6)";var f = p.shift();d.version = s(t, f);var g = p.shift();d.si = s(t, g);var m = p.shift();d.digalg = s(t, m);var v = p.shift();d.sattrs = s(t, v);var y = p.shift();d.sigalg = s(t, y);var b = p.shift();d.sig = s(t, b), d.sigval = o(t, b);var w = null;return d.obj = new u(), (w = new l()).hTLV = d.version, d.obj.dCMSVersion = w, (w = new l()).hTLV = d.si, d.obj.dSignerIdentifier = w, (w = new l()).hTLV = d.digalg, d.obj.dDigestAlgorithm = w, (w = new l()).hTLV = d.sattrs, d.obj.dSignedAttrs = w, (w = new l()).hTLV = d.sigalg, d.obj.dSigAlg = w, (w = new l()).hTLV = d.sig, d.obj.dSig = w, d.obj.dUnsignedAttrs = new h(), d;}, void 0 !== lt.asn1.csr && lt.asn1.csr || (lt.asn1.csr = {}), lt.asn1.csr.CertificationRequest = function (t) {var e = lt.asn1,i = e.DERBitString,n = e.DERSequence,r = e.csr,s = (e.x509, r.CertificationRequestInfo);r.CertificationRequest.superclass.constructor.call(this), this.setByParam = function (t) {this.params = t;}, this.sign = function () {var t = new s(this.params).tohex(),e = new lt.crypto.Signature({ alg: this.params.sigalg });e.init(this.params.sbjprvkey), e.updateHex(t);var i = e.sign();this.params.sighex = i;}, this.getPEM = function () {return Et(this.tohex(), "CERTIFICATE REQUEST");}, this.tohex = function () {var t = this.params,e = new lt.asn1.csr.CertificationRequestInfo(this.params),r = new lt.asn1.x509.AlgorithmIdentifier({ name: t.sigalg });if (null == t.sighex && null != t.sbjprvkey && this.sign(), null == t.sighex) throw new Error("sighex or sbjprvkey parameter not defined");var s = new i({ hex: "00" + t.sighex });return new n({ array: [e, r, s] }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.csr.CertificationRequest, lt.asn1.ASN1Object), lt.asn1.csr.CertificationRequestInfo = function (t) {var e = lt.asn1,i = (e.DERBitString, e.DERSequence),n = e.DERInteger,r = e.DERUTF8String,s = e.DERTaggedObject,o = e.ASN1Util.newObject,a = e.csr,l = e.x509,c = l.X500Name,h = l.Extensions,u = l.SubjectPublicKeyInfo;a.AttributeList, a.CertificationRequestInfo.superclass.constructor.call(this), this.params = null, this.setByParam = function (t) {null != t && (this.params = t);}, this.tohex = function () {var t = this.params,e = [];if (e.push(new n({ int: 0 })), e.push(new c(t.subject)), e.push(new u(Gt.getKey(t.sbjpubkey))), null != t.attrs) {var a = function (t) {for (var e = Error, i = lt.asn1.x509.Extensions, n = [], r = 0; r < t.length; r++) {var s = t[r],o = s.attr;if ("extensionRequest" == o) {var a = { seq: [{ oid: "1.2.840.113549.1.9.14" }, { set: [new i(s.ext)] }] };n.push(a);} else if ("unstructuredName" == o) a = { seq: [{ oid: "1.2.840.113549.1.9.2" }, { set: s.names }] }, n.push(a);else {if ("challengePassword" != o) throw new e("unknown CSR attribute");a = { seq: [{ oid: "1.2.840.113549.1.9.7" }, { set: [{ utf8str: s.password }] }] }, n.push(a);}}return { set: n };}(t.attrs),l = o({ tag: { tage: "a0", obj: a } });e.push(l);} else if (null != t.extreq) {var d = new h(t.extreq);l = o({ tag: { tage: "a0", obj: { seq: [{ oid: "1.2.840.113549.1.9.14" }, { set: [d] }] } } }), e.push(l);} else e.push(new s({ tag: "a0", explicit: !1, obj: new r({ str: "" }) }));return new i({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, null != t && this.setByParam(t);}, $t(lt.asn1.csr.CertificationRequestInfo, lt.asn1.ASN1Object), lt.asn1.csr.AttributeList = function (t) {}, $t(lt.asn1.csr.AttributeList, lt.asn1.ASN1Object), lt.asn1.csr.CSRUtil = new function () {}(), lt.asn1.csr.CSRUtil.newCSRPEM = function (t) {return new lt.asn1.csr.CertificationRequest(t).getPEM();}, lt.asn1.csr.CSRUtil.getParam = function (t, e) {var i = ut,n = i.getV,r = i.getIdxbyList,s = i.getTLVbyList,o = i.getTLVbyListEx,a = i.getVbyListEx,l = {};if (-1 == t.indexOf("-----BEGIN CERTIFICATE REQUEST")) throw new Error("argument is not PEM file");var c = Ct(t, "CERTIFICATE REQUEST");e && (l.tbs = s(c, 0, [0]));try {var h = o(c, 0, [0, 1]);if ("3000" == h) l.subject = {};else {var u = new Yt();l.subject = u.getX500Name(h);}} catch (t) {}var d = o(c, 0, [0, 2]),p = Gt.getKey(d, null, "pkcs8pub");l.sbjpubkey = Gt.getPEM(p, "PKCS8PUB");var f = function (t) {var e = r(t, 0, [0, 3, 0, 0], "06");return "2a864886f70d01090e" != n(t, e) ? null : s(t, 0, [0, 3, 0, 1, 0], "30");}(c);u = new Yt(), null != f && (l.extreq = u.getExtParamArray(f));try {var g = o(c, 0, [1], "30");u = new Yt(), l.sigalg = u.getAlgorithmIdentifierName(g);} catch (t) {}try {var m = a(c, 0, [2]);l.sighex = m;} catch (t) {}return l;}, lt.asn1.csr.CSRUtil.verifySignature = function (t) {try {var e = null;if ("string" == typeof t && -1 != t.indexOf("-----BEGIN CERTIFICATE REQUEST") ? e = lt.asn1.csr.CSRUtil.getParam(t, !0) : "object" == typeof t && null != t.sbjpubkey && null != t.sigalg && null != t.sighex && null != t.tbs && (e = t), null == e) return !1;var i = new lt.crypto.Signature({ alg: e.sigalg });return i.init(e.sbjpubkey), i.updateHex(e.tbs), i.verify(e.sighex);} catch (t) {return alert(t), !1;}}, void 0 !== lt && lt || (lt = {}), void 0 !== lt.asn1 && lt.asn1 || (lt.asn1 = {}), void 0 !== lt.asn1.ocsp && lt.asn1.ocsp || (lt.asn1.ocsp = {}), lt.asn1.ocsp.DEFAULT_HASH = "sha1", lt.asn1.ocsp.OCSPResponse = function (t) {lt.asn1.ocsp.OCSPResponse.superclass.constructor.call(this), lt.asn1.DEREnumerated;var e = lt.asn1.ASN1Util.newObject,i = lt.asn1.ocsp.ResponseBytes,n = ["successful", "malformedRequest", "internalError", "tryLater", "_not_used_", "sigRequired", "unauthorized"];this.params = null, this._getStatusCode = function () {var t = this.params.resstatus;return "number" == typeof t ? t : "string" != typeof t ? -1 : n.indexOf(t);}, this.setByParam = function (t) {this.params = t;}, this.tohex = function () {var t = this.params,n = this._getStatusCode();if (-1 == n) throw new Error("responseStatus not supported: " + t.resstatus);if (0 != n) return e({ seq: [{ enum: { int: n } }] }).tohex();var r = new i(t);return e({ seq: [{ enum: { int: 0 } }, { tag: { tag: "a0", explicit: !0, obj: r } }] }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.OCSPResponse, lt.asn1.ASN1Object), lt.asn1.ocsp.ResponseBytes = function (t) {lt.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var e = lt.asn1,i = e.DERSequence,n = e.DERObjectIdentifier,r = e.DEROctetString,s = e.ocsp.BasicOCSPResponse;this.params = null, this.setByParam = function (t) {this.params = t;}, this.tohex = function () {var t = this.params;if ("ocspBasic" != t.restype) throw new Error("not supported responseType: " + t.restype);var e = new s(t),o = [];return o.push(new n({ name: "ocspBasic" })), o.push(new r({ hex: e.tohex() })), new i({ array: o }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.ResponseBytes, lt.asn1.ASN1Object), lt.asn1.ocsp.BasicOCSPResponse = function (t) {lt.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var e = Error,i = lt.asn1,n = i.ASN1Object,r = i.DERSequence,s = (i.DERGeneralizedTime, i.DERTaggedObject),o = i.DERBitString,a = (i.x509.Extensions, i.x509.AlgorithmIdentifier),l = i.ocsp;l.ResponderID, _SingleResponseList = l.SingleResponseList, _ResponseData = l.ResponseData, this.params = null, this.setByParam = function (t) {this.params = t;}, this.sign = function () {var t = this.params,e = t.tbsresp.tohex(),i = new lt.crypto.Signature({ alg: t.sigalg });i.init(t.reskey), i.updateHex(e), t.sighex = i.sign();}, this.tohex = function () {var t = this.params;null == t.tbsresp && (t.tbsresp = new _ResponseData(t)), null == t.sighex && null != t.reskey && this.sign();var i = [];if (i.push(t.tbsresp), i.push(new a({ name: t.sigalg })), i.push(new o({ hex: "00" + t.sighex })), null != t.certs && null != t.certs.length) {for (var l = [], c = 0; c < t.certs.length; c++) {var h = t.certs[c],u = null;if (ut.isASN1HEX(h)) u = h;else {if (!h.match(/-----BEGIN/)) throw new e("certs[" + c + "] not hex or PEM");u = Ct(h);}l.push(new n({ tlv: u }));}var d = new r({ array: l });i.push(new s({ tag: "a0", explicit: !0, obj: d }));}return new r({ array: i }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.BasicOCSPResponse, lt.asn1.ASN1Object), lt.asn1.ocsp.ResponseData = function (t) {lt.asn1.ocsp.ResponseData.superclass.constructor.call(this);var e = Error,i = lt.asn1,n = i.DERSequence,r = i.DERGeneralizedTime,s = i.DERTaggedObject,o = i.x509.Extensions,a = i.ocsp,l = a.ResponderID;_SingleResponseList = a.SingleResponseList, this.params = null, this.tohex = function () {var t = this.params;null != t.respid && new e("respid not specified"), null != t.prodat && new e("prodat not specified"), null != t.array && new e("array not specified");var i = [];if (i.push(new l(t.respid)), i.push(new r(t.prodat)), i.push(new _SingleResponseList(t.array)), null != t.ext) {var a = new o(t.ext);i.push(new s({ tag: "a1", explicit: !0, obj: a }));}return new n({ array: i }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.ResponseData, lt.asn1.ASN1Object), lt.asn1.ocsp.ResponderID = function (t) {lt.asn1.ocsp.ResponderID.superclass.constructor.call(this);var e = lt,i = e.asn1,n = i.ASN1Util.newObject,r = i.x509.X500Name,s = e.lang.String.isHex,o = Error;this.params = null, this.tohex = function () {var t = this.params;if (null != t.key) {var e,i = null;if ("string" == typeof t.key ? (s(t.key) && (i = t.key), t.key.match(/-----BEGIN CERTIFICATE/) && null != (e = new Yt(t.key).getExtSubjectKeyIdentifier()) && (i = e.kid.hex)) : t.key instanceof Yt && null != (e = t.key.getExtSubjectKeyIdentifier()) && (i = e.kid.hex), null == i) throw new o("wrong key member value");return n({ tag: { tag: "a2", explicit: !0, obj: { octstr: { hex: i } } } }).tohex();}if (null != t.name) {var a = null;if ("string" == typeof t.name && t.name.match(/-----BEGIN CERTIFICATE/) ? a = new Yt(t.name).getSubject() : t.name instanceof Yt ? a = t.name.getSubject() : "object" != typeof t.name || null == t.name.array && null == t.name.str || (a = t.name), null == a) throw new o("wrong name member value");return n({ tag: { tag: "a1", explicit: !0, obj: new r(a) } }).tohex();}throw new o("key or name not specified");}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.ResponderID, lt.asn1.ASN1Object), lt.asn1.ocsp.SingleResponseList = function (t) {lt.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var e = lt.asn1,i = e.DERSequence,n = e.ocsp.SingleResponse;this.params = null, this.tohex = function () {var t = this.params;if ("object" != typeof t || null == t.length) throw new Error("params not specified properly");for (var e = [], r = 0; r < t.length; r++) e.push(new n(t[r]));return new i({ array: e }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.SingleResponseList, lt.asn1.ASN1Object), lt.asn1.ocsp.SingleResponse = function (t) {var e = Error,i = lt.asn1,n = i.DERSequence,r = i.DERGeneralizedTime,s = i.DERTaggedObject,o = i.ocsp,a = o.CertID,l = o.CertStatus,c = i.x509.Extensions;o.SingleResponse.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params,i = [];if (null == t.certid) throw new e("certid unspecified");if (null == t.status) throw new e("status unspecified");if (null == t.thisupdate) throw new e("thisupdate unspecified");if (i.push(new a(t.certid)), i.push(new l(t.status)), i.push(new r(t.thisupdate)), null != t.nextupdate) {var o = new r(t.nextupdate);i.push(new s({ tag: "a0", explicit: !0, obj: o }));}if (null != t.ext) {var h = new c(t.ext);i.push(new s({ tag: "a1", explicit: !0, obj: h }));}return new n({ array: i }).tohex();}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.SingleResponse, lt.asn1.ASN1Object), lt.asn1.ocsp.CertID = function (t) {var e = lt,i = e.asn1,n = i.DEROctetString,r = i.DERInteger,s = i.DERSequence,o = i.x509.AlgorithmIdentifier,a = i.ocsp,l = (a.DEFAULT_HASH, e.crypto.Util.hashHex),c = Yt,h = ut.getVbyList;a.CertID.superclass.constructor.call(this), this.DEFAULT_HASH = "sha1", this.params = null, this.setByValue = function (t, e, i, n) {null == n && (n = this.DEFAULT_HASH), this.params = { alg: n, issname: t, isskey: e, sbjsn: i };}, this.setByCert = function (t, e, i) {null == i && (i = this.DEFAULT_HASH), this.params = { alg: i, issuerCert: t, subjectCert: e };}, this.getParamByCerts = function (t, e, i) {null == i && (i = this.DEFAULT_HASH);var n = new c(t),r = new c(e),s = l(n.getSubjectHex(), i),o = n.getPublicKeyHex();return { alg: i, issname: s, isskey: l(h(o, 0, [1], "03", !0), i), sbjsn: r.getSerialNumberHex() };}, this.tohex = function () {if ("object" != typeof this.params) throw new Error("params not set");var t,e,i,a,l = this.params;if (a = null == l.alg ? this.DEFAULT_HASH : l.alg, null != l.issuerCert && null != l.subjectCert) {var c = this.getParamByCerts(l.issuerCert, l.subjectCert, a);t = c.issname, e = c.isskey, i = c.sbjsn;} else {if (null == l.issname || null == l.isskey || null == l.sbjsn) throw new Error("required param members not defined");t = l.issname, e = l.isskey, i = l.sbjsn;}var h = new o({ name: a }),u = new n({ hex: t }),d = new n({ hex: e }),p = new r({ hex: i }),f = new s({ array: [h, u, d, p] });return this.hTLV = f.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.CertID, lt.asn1.ASN1Object), lt.asn1.ocsp.CertStatus = function (t) {lt.asn1.ocsp.CertStatus.superclass.constructor.call(this), this.params = null, this.tohex = function () {var t = this.params;if ("good" == t.status) return "8000";if ("unknown" == t.status) return "8200";if ("revoked" == t.status) {var e = [{ gentime: { str: t.time } }];null != t.reason && e.push({ tag: { tag: "a0", explicit: !0, obj: { enum: { int: t.reason } } } });var i = { tag: "a1", explicit: !1, obj: { seq: e } };return lt.asn1.ASN1Util.newObject({ tag: i }).tohex();}throw new Error("bad status");}, this.getEncodedHex = function () {return this.tohex();}, this.setByParam = function (t) {this.params = t;}, void 0 !== t && this.setByParam(t);}, $t(lt.asn1.ocsp.CertStatus, lt.asn1.ASN1Object), lt.asn1.ocsp.Request = function (t) {var e = lt.asn1,i = e.DERSequence,n = e.ocsp;if (n.Request.superclass.constructor.call(this), this.dReqCert = null, this.dExt = null, this.tohex = function () {var t = [];if (null === this.dReqCert) throw "reqCert not set";t.push(this.dReqCert);var e = new i({ array: t });return this.hTLV = e.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t) {var r = new n.CertID(t);this.dReqCert = r;}}, $t(lt.asn1.ocsp.Request, lt.asn1.ASN1Object), lt.asn1.ocsp.TBSRequest = function (t) {var e = lt.asn1,i = e.DERSequence,n = e.ocsp;n.TBSRequest.superclass.constructor.call(this), this.version = 0, this.dRequestorName = null, this.dRequestList = [], this.dRequestExt = null, this.setRequestListByParam = function (t) {for (var e = [], i = 0; i < t.length; i++) {var r = new n.Request(t[0]);e.push(r);}this.dRequestList = e;}, this.tohex = function () {var t = [];if (0 !== this.version) throw "not supported version: " + this.version;if (null !== this.dRequestorName) throw "requestorName not supported";var e = new i({ array: this.dRequestList });if (t.push(e), null !== this.dRequestExt) throw "requestExtensions not supported";var n = new i({ array: t });return this.hTLV = n.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && void 0 !== t.reqList && this.setRequestListByParam(t.reqList);}, $t(lt.asn1.ocsp.TBSRequest, lt.asn1.ASN1Object), lt.asn1.ocsp.OCSPRequest = function (t) {var e = lt.asn1,i = e.DERSequence,n = e.ocsp;if (n.OCSPRequest.superclass.constructor.call(this), this.dTbsRequest = null, this.dOptionalSignature = null, this.tohex = function () {var t = [];if (null === this.dTbsRequest) throw "tbsRequest not set";if (t.push(this.dTbsRequest), null !== this.dOptionalSignature) throw "optionalSignature not supported";var e = new i({ array: t });return this.hTLV = e.tohex(), this.hTLV;}, this.getEncodedHex = function () {return this.tohex();}, void 0 !== t && void 0 !== t.reqList) {var r = new n.TBSRequest(t);this.dTbsRequest = r;}}, $t(lt.asn1.ocsp.OCSPRequest, lt.asn1.ASN1Object), lt.asn1.ocsp.OCSPUtil = {}, lt.asn1.ocsp.OCSPUtil.getRequestHex = function (t, e, i) {var n = lt.asn1.ocsp;void 0 === i && (i = n.DEFAULT_HASH);var r = { alg: i, issuerCert: t, subjectCert: e };return new n.OCSPRequest({ reqList: [r] }).tohex();}, lt.asn1.ocsp.OCSPUtil.getOCSPResponseInfo = function (t) {var e = ut,i = e.getVbyList,n = e.getVbyListEx,r = e.getIdxbyList,s = (e.getIdxbyListEx, e.getV),o = {};try {var a = n(t, 0, [0], "0a");o.responseStatus = parseInt(a, 16);} catch (t) {}if (0 !== o.responseStatus) return o;try {var l = r(t, 0, [1, 0, 1, 0, 0, 2, 0, 1]);"80" === t.substr(l, 2) ? o.certStatus = "good" : "a1" === t.substr(l, 2) ? (o.certStatus = "revoked", o.revocationTime = bt(i(t, l, [0]))) : "82" === t.substr(l, 2) && (o.certStatus = "unknown");} catch (t) {}try {var c = r(t, 0, [1, 0, 1, 0, 0, 2, 0, 2]);o.thisUpdate = bt(s(t, c));} catch (t) {}try {var h = r(t, 0, [1, 0, 1, 0, 0, 2, 0, 3]);"a0" === t.substr(h, 2) && (o.nextUpdate = bt(i(t, h, [0])));} catch (t) {}return o;}, lt.asn1.ocsp.OCSPParser = function () {var t = Error,e = Yt,i = new e(),n = ut,r = n.getV,s = n.getTLV,o = n.getIdxbyList,a = n.getVbyList,l = n.getTLVbyList,c = n.getVbyListEx,h = n.getTLVbyListEx,u = n.getChildIdx;this.getOCSPRequest = function (e) {var i = u(e, 0);if (1 != i.length && 2 != i.length) throw new t("wrong number elements: " + i.length);return this.getTBSRequest(s(e, i[0]));}, this.getTBSRequest = function (t) {var e = {},n = h(t, 0, [0], "30");e.array = this.getRequestList(n);var r = h(t, 0, ["[2]", 0], "30");return null != r && (e.ext = i.getExtParamArray(r)), e;}, this.getRequestList = function (t) {for (var e = [], i = u(t, 0), n = 0; n < i.length; n++) t = s(t, i[n]), e.push(this.getRequest(t));return e;}, this.getRequest = function (e) {var n = u(e, 0);if (1 != n.length && 2 != n.length) throw new t("wrong number elements: " + n.length);var r = this.getCertID(s(e, n[0]));if (2 == n.length) {var a = o(e, 0, [1, 0]);r.ext = i.getExtParamArray(s(e, a));}return r;}, this.getCertID = function (i) {var n = u(i, 0);if (4 != n.length) throw new t("wrong number elements: " + n.length);var o = new e(),a = {};return a.alg = o.getAlgorithmIdentifierName(s(i, n[0])), a.issname = r(i, n[1]), a.isskey = r(i, n[2]), a.sbjsn = r(i, n[3]), a;}, this.getOCSPResponse = function (t) {var e,i = u(t, 0),n = r(t, i[0]),s = parseInt(n);if (1 == i.length) return { resstatus: s };var o = l(t, 0, [1, 0]);return (e = this.getResponseBytes(o)).resstatus = s, e;}, this.getResponseBytes = function (t) {var e,i = u(t, 0),n = l(t, 0, [1, 0]);e = this.getBasicOCSPResponse(n);var s = r(t, i[0]);return e.restype = lt.asn1.x509.OID.oid2name(Bt(s)), e;}, this.getBasicOCSPResponse = function (t) {var e,i = u(t, 0);e = this.getResponseData(s(t, i[0]));var n = new Yt();e.alg = n.getAlgorithmIdentifierName(s(t, i[1]));var o = r(t, i[2]);e.sighex = o.substr(2);var a = c(t, 0, ["[0]"]);if (null != a) {for (var l = u(a, 0), h = [], d = 0; d < l.length; d++) {var p = s(a, l[d]);h.push(p);}e.certs = h;}return e;}, this.getResponseData = function (t) {var e = u(t, 0),i = e.length,n = {},o = 0;"a0" == t.substr(e[0], 2) && o++, n.respid = this.getResponderID(s(t, e[o++]));var a = r(t, e[o++]);if (n.prodat = bt(a), n.array = this.getSingleResponseList(s(t, e[o++])), "a1" == t.substr(e[i - 1], 2)) {var c = l(t, e[i - 1], [0]),h = new Yt();n.ext = h.getExtParamArray(c);}return n;}, this.getResponderID = function (t) {var e = {};if ("a2" == t.substr(0, 2)) {var i = a(t, 0, [0]);e.key = i;}if ("a1" == t.substr(0, 2)) {var n = l(t, 0, [0]),r = new Yt();e.name = r.getX500Name(n);}return e;}, this.getSingleResponseList = function (t) {for (var e = u(t, 0), i = [], n = 0; n < e.length; n++) {var r = this.getSingleResponse(s(t, e[n]));i.push(r);}return i;}, this.getSingleResponse = function (t) {var e = u(t, 0),i = {},n = this.getCertID(s(t, e[0]));i.certid = n;var o = this.getCertStatus(s(t, e[1]));if (i.status = o, "18" == t.substr(e[2], 2)) {var c = r(t, e[2]);i.thisupdate = bt(c);}for (var h = 3; h < e.length; h++) {if ("a0" == t.substr(e[h], 2)) {var d = a(t, e[h], [0], "18");i.nextupdate = bt(d);}if ("a1" == t.substr(e[h], 2)) {var p = new Yt(),f = l(t, 0, [h, 0]);i.ext = p.getExtParamArray(f);}}return i;}, this.getCertStatus = function (t) {var e = {};if ("8000" == t) return { status: "good" };if ("8200" == t) return { status: "unknown" };if ("a1" == t.substr(0, 2)) {e.status = "revoked";var i = bt(a(t, 0, [0]));e.time = i;}return e;};}, void 0 !== lt && lt || (lt = {}), void 0 !== lt.lang && lt.lang || (lt.lang = {}), lt.lang.String = function () {}, "function" == typeof f ? (ct = function (t) {return ft(f.from(t, "utf8").toString("base64"));}, ht = function (t) {return f.from(gt(t), "base64").toString("utf8");}) : (ct = function (t) {return mt(Tt(Rt(t)));}, ht = function (t) {return decodeURIComponent(At(vt(t)));}), lt.lang.String.isInteger = function (t) {return !!t.match(/^[0-9]+$/) || !!t.match(/^-[0-9]+$/);}, lt.lang.String.isHex = function (t) {return Lt(t);}, lt.lang.String.isBase64 = function (t) {return !(!(t = t.replace(/\s+/g, "")).match(/^[0-9A-Za-z+\/]+={0,3}$/) || t.length % 4 != 0);}, lt.lang.String.isBase64URL = function (t) {return !t.match(/[+/=]/) && (t = gt(t), lt.lang.String.isBase64(t));}, lt.lang.String.isIntegerArray = function (t) {return !!(t = t.replace(/\s+/g, "")).match(/^\[[0-9,]+\]$/);}, lt.lang.String.isPrintable = function (t) {return null !== t.match(/^[0-9A-Za-z '()+,-./:=?]*$/);}, lt.lang.String.isIA5 = function (t) {return null !== t.match(/^[\x20-\x21\x23-\x7f]*$/);}, lt.lang.String.isMail = function (t) {return null !== t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/);};var Ut = function (t, e, i) {return null == i && (i = "0"), t.length >= e ? t : new Array(e - t.length + 1).join(i) + t;};function Ht(t, e) {for (var i = 0, n = 0; n < t.length; n++) i |= 1 << e[t[n]];var r = i.toString(2),s = "";for (n = r.length - 1; n >= 0; n--) s += r[n];return s;}function qt(t, e, i) {if ("object" == typeof t) {e = String(e).split(".");for (var n = 0; n < e.length && t; n++) {var r = e[n];r.match(/^[0-9]+$/) && (r = parseInt(r)), t = t[r];}return t || !1 === t ? t : i;}}function $t(t, e) {var i = function () {};i.prototype = e.prototype, t.prototype = new i(), t.prototype.constructor = t, t.superclass = e.prototype, e.prototype.constructor == Object.prototype.constructor && (e.prototype.constructor = e);}void 0 !== lt && lt || (lt = {}), void 0 !== lt.crypto && lt.crypto || (lt.crypto = {}), lt.crypto.Util = new function () {this.DIGESTINFOHEAD = { sha1: "3021300906052b0e03021a05000414", sha224: "302d300d06096086480165030402040500041c", sha256: "3031300d060960864801650304020105000420", sha384: "3041300d060960864801650304020205000430", sha512: "3051300d060960864801650304020305000440", md2: "3020300c06082a864886f70d020205000410", md5: "3020300c06082a864886f70d020505000410", ripemd160: "3021300906052b2403020105000414" }, this.DEFAULTPROVIDER = { md5: "cryptojs", sha1: "cryptojs", sha224: "cryptojs", sha256: "cryptojs", sha384: "cryptojs", sha512: "cryptojs", ripemd160: "cryptojs", hmacmd5: "cryptojs", hmacsha1: "cryptojs", hmacsha224: "cryptojs", hmacsha256: "cryptojs", hmacsha384: "cryptojs", hmacsha512: "cryptojs", hmacripemd160: "cryptojs", MD5withRSA: "cryptojs/jsrsa", SHA1withRSA: "cryptojs/jsrsa", SHA224withRSA: "cryptojs/jsrsa", SHA256withRSA: "cryptojs/jsrsa", SHA384withRSA: "cryptojs/jsrsa", SHA512withRSA: "cryptojs/jsrsa", RIPEMD160withRSA: "cryptojs/jsrsa", MD5withECDSA: "cryptojs/jsrsa", SHA1withECDSA: "cryptojs/jsrsa", SHA224withECDSA: "cryptojs/jsrsa", SHA256withECDSA: "cryptojs/jsrsa", SHA384withECDSA: "cryptojs/jsrsa", SHA512withECDSA: "cryptojs/jsrsa", RIPEMD160withECDSA: "cryptojs/jsrsa", SHA1withDSA: "cryptojs/jsrsa", SHA224withDSA: "cryptojs/jsrsa", SHA256withDSA: "cryptojs/jsrsa", MD5withRSAandMGF1: "cryptojs/jsrsa", SHAwithRSAandMGF1: "cryptojs/jsrsa", SHA1withRSAandMGF1: "cryptojs/jsrsa", SHA224withRSAandMGF1: "cryptojs/jsrsa", SHA256withRSAandMGF1: "cryptojs/jsrsa", SHA384withRSAandMGF1: "cryptojs/jsrsa", SHA512withRSAandMGF1: "cryptojs/jsrsa", RIPEMD160withRSAandMGF1: "cryptojs/jsrsa" }, this.CRYPTOJSMESSAGEDIGESTNAME = { md5: v.algo.MD5, sha1: v.algo.SHA1, sha224: v.algo.SHA224, sha256: v.algo.SHA256, sha384: v.algo.SHA384, sha512: v.algo.SHA512, ripemd160: v.algo.RIPEMD160 }, this.getDigestInfoHex = function (t, e) {if (void 0 === this.DIGESTINFOHEAD[e]) throw "alg not supported in Util.DIGESTINFOHEAD: " + e;return this.DIGESTINFOHEAD[e] + t;}, this.getPaddedDigestInfoHex = function (t, e, i) {var n = this.getDigestInfoHex(t, e),r = i / 4;if (n.length + 22 > r) throw "key is too short for SigAlg: keylen=" + i + "," + e;for (var s = "00" + n, o = "", a = r - 4 - s.length, l = 0; l < a; l += 2) o += "ff";return "0001" + o + s;}, this.hashString = function (t, e) {return new lt.crypto.MessageDigest({ alg: e }).digestString(t);}, this.hashHex = function (t, e) {return new lt.crypto.MessageDigest({ alg: e }).digestHex(t);}, this.sha1 = function (t) {return this.hashString(t, "sha1");}, this.sha256 = function (t) {return this.hashString(t, "sha256");}, this.sha256Hex = function (t) {return this.hashHex(t, "sha256");}, this.sha512 = function (t) {return this.hashString(t, "sha512");}, this.sha512Hex = function (t) {return this.hashHex(t, "sha512");}, this.isKey = function (t) {return t instanceof nt || t instanceof lt.crypto.DSA || t instanceof lt.crypto.ECDSA;};}(), lt.crypto.Util.md5 = function (t) {return new lt.crypto.MessageDigest({ alg: "md5", prov: "cryptojs" }).digestString(t);}, lt.crypto.Util.ripemd160 = function (t) {return new lt.crypto.MessageDigest({ alg: "ripemd160", prov: "cryptojs" }).digestString(t);}, lt.crypto.Util.SECURERANDOMGEN = new et(), lt.crypto.Util.getRandomHexOfNbytes = function (t) {var e = new Array(t);return lt.crypto.Util.SECURERANDOMGEN.nextBytes(e), dt(e);}, lt.crypto.Util.getRandomBigIntegerOfNbytes = function (t) {return new S(lt.crypto.Util.getRandomHexOfNbytes(t), 16);}, lt.crypto.Util.getRandomHexOfNbits = function (t) {var e = t % 8,i = new Array((t - e) / 8 + 1);return lt.crypto.Util.SECURERANDOMGEN.nextBytes(i), i[0] = (255 << e & 255 ^ 255) & i[0], dt(i);}, lt.crypto.Util.getRandomBigIntegerOfNbits = function (t) {return new S(lt.crypto.Util.getRandomHexOfNbits(t), 16);}, lt.crypto.Util.getRandomBigIntegerZeroToMax = function (t) {for (var e = t.bitLength();;) {var i = lt.crypto.Util.getRandomBigIntegerOfNbits(e);if (-1 != t.compareTo(i)) return i;}}, lt.crypto.Util.getRandomBigIntegerMinToMax = function (t, e) {var i = t.compareTo(e);if (1 == i) throw "biMin is greater than biMax";if (0 == i) return t;var n = e.subtract(t);return lt.crypto.Util.getRandomBigIntegerZeroToMax(n).add(t);}, lt.crypto.MessageDigest = function (t) {this.setAlgAndProvider = function (t, e) {if (null !== (t = lt.crypto.MessageDigest.getCanonicalAlgName(t)) && void 0 === e && (e = lt.crypto.Util.DEFAULTPROVIDER[t]), -1 != ":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t) && "cryptojs" == e) {try {this.md = lt.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create();} catch (e) {throw "setAlgAndProvider hash alg set fail alg=" + t + "/" + e;}this.updateString = function (t) {this.md.update(t);}, this.updateHex = function (t) {var e = v.enc.Hex.parse(t);this.md.update(e);}, this.digest = function () {return this.md.finalize().toString(v.enc.Hex);}, this.digestString = function (t) {return this.updateString(t), this.digest();}, this.digestHex = function (t) {return this.updateHex(t), this.digest();};}if (-1 != ":sha256:".indexOf(t) && "sjcl" == e) {try {this.md = new sjcl.hash.sha256();} catch (e) {throw "setAlgAndProvider hash alg set fail alg=" + t + "/" + e;}this.updateString = function (t) {this.md.update(t);}, this.updateHex = function (t) {var e = sjcl.codec.hex.toBits(t);this.md.update(e);}, this.digest = function () {var t = this.md.finalize();return sjcl.codec.hex.fromBits(t);}, this.digestString = function (t) {return this.updateString(t), this.digest();}, this.digestHex = function (t) {return this.updateHex(t), this.digest();};}}, this.updateString = function (t) {throw "updateString(str) not supported for this alg/prov: " + this.algName + "/" + this.provName;}, this.updateHex = function (t) {throw "updateHex(hex) not supported for this alg/prov: " + this.algName + "/" + this.provName;}, this.digest = function () {throw "digest() not supported for this alg/prov: " + this.algName + "/" + this.provName;}, this.digestString = function (t) {throw "digestString(str) not supported for this alg/prov: " + this.algName + "/" + this.provName;}, this.digestHex = function (t) {throw "digestHex(hex) not supported for this alg/prov: " + this.algName + "/" + this.provName;}, void 0 !== t && void 0 !== t.alg && (this.algName = t.alg, void 0 === t.prov && (this.provName = lt.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName));}, lt.crypto.MessageDigest.getCanonicalAlgName = function (t) {return "string" == typeof t && (t = (t = t.toLowerCase()).replace(/-/, "")), t;}, lt.crypto.MessageDigest.getHashLength = function (t) {var e = lt.crypto.MessageDigest,i = e.getCanonicalAlgName(t);if (void 0 === e.HASHLENGTH[i]) throw "not supported algorithm: " + t;return e.HASHLENGTH[i];}, lt.crypto.MessageDigest.HASHLENGTH = { md5: 16, sha1: 20, sha224: 28, sha256: 32, sha384: 48, sha512: 64, ripemd160: 20 }, lt.crypto.Mac = function (t) {this.setAlgAndProvider = function (t, e) {if (null == (t = t.toLowerCase()) && (t = "hmacsha1"), "hmac" != (t = t.toLowerCase()).substr(0, 4)) throw "setAlgAndProvider unsupported HMAC alg: " + t;void 0 === e && (e = lt.crypto.Util.DEFAULTPROVIDER[t]), this.algProv = t + "/" + e;var i = t.substr(4);if (-1 != ":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(i) && "cryptojs" == e) {try {var n = lt.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[i];this.mac = v.algo.HMAC.create(n, this.pass);} catch (t) {throw "setAlgAndProvider hash alg set fail hashAlg=" + i + "/" + t;}this.updateString = function (t) {this.mac.update(t);}, this.updateHex = function (t) {var e = v.enc.Hex.parse(t);this.mac.update(e);}, this.doFinal = function () {return this.mac.finalize().toString(v.enc.Hex);}, this.doFinalString = function (t) {return this.updateString(t), this.doFinal();}, this.doFinalHex = function (t) {return this.updateHex(t), this.doFinal();};}}, this.updateString = function (t) {throw "updateString(str) not supported for this alg/prov: " + this.algProv;}, this.updateHex = function (t) {throw "updateHex(hex) not supported for this alg/prov: " + this.algProv;}, this.doFinal = function () {throw "digest() not supported for this alg/prov: " + this.algProv;}, this.doFinalString = function (t) {throw "digestString(str) not supported for this alg/prov: " + this.algProv;}, this.doFinalHex = function (t) {throw "digestHex(hex) not supported for this alg/prov: " + this.algProv;}, this.setPassword = function (t) {if ("string" == typeof t) {var e = t;return t.length % 2 != 1 && t.match(/^[0-9A-Fa-f]+$/) || (e = St(t)), void (this.pass = v.enc.Hex.parse(e));}if ("object" != typeof t) throw "KJUR.crypto.Mac unsupported password type: " + t;if (e = null, void 0 !== t.hex) {if (t.hex.length % 2 != 0 || !t.hex.match(/^[0-9A-Fa-f]+$/)) throw "Mac: wrong hex password: " + t.hex;e = t.hex;}if (void 0 !== t.utf8 && (e = yt(t.utf8)), void 0 !== t.rstr && (e = St(t.rstr)), void 0 !== t.b64 && (e = x(t.b64)), void 0 !== t.b64u && (e = vt(t.b64u)), null == e) throw "KJUR.crypto.Mac unsupported password type: " + t;this.pass = v.enc.Hex.parse(e);}, void 0 !== t && (void 0 !== t.pass && this.setPassword(t.pass), void 0 !== t.alg && (this.algName = t.alg, void 0 === t.prov && (this.provName = lt.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName)));}, lt.crypto.Signature = function (t) {var e = null;if (this._setAlgNames = function () {var t = this.algName.match(/^(.+)with(.+)$/);t && (this.mdAlgName = t[1].toLowerCase(), this.pubkeyAlgName = t[2].toLowerCase(), "rsaandmgf1" == this.pubkeyAlgName && "sha" == this.mdAlgName && (this.mdAlgName = "sha1"));}, this._zeroPaddingOfSignature = function (t, e) {for (var i = "", n = e / 4 - t.length, r = 0; r < n; r++) i += "0";return i + t;}, this.setAlgAndProvider = function (t, e) {if (this._setAlgNames(), "cryptojs/jsrsa" != e) throw new Error("provider not supported: " + e);if (-1 != ":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)) {try {this.md = new lt.crypto.MessageDigest({ alg: this.mdAlgName });} catch (t) {throw new Error("setAlgAndProvider hash alg set fail alg=" + this.mdAlgName + "/" + t);}this.init = function (t, e) {var i = null;try {i = void 0 === e ? Gt.getKey(t) : Gt.getKey(t, e);} catch (t) {throw "init failed:" + t;}if (!0 === i.isPrivate) this.prvKey = i, this.state = "SIGN";else {if (!0 !== i.isPublic) throw "init failed.:" + i;this.pubKey = i, this.state = "VERIFY";}}, this.updateString = function (t) {this.md.updateString(t);}, this.updateHex = function (t) {this.md.updateHex(t);}, this.sign = function () {if (this.sHashHex = this.md.digest(), void 0 === this.prvKey && void 0 !== this.ecprvhex && void 0 !== this.eccurvename && void 0 !== lt.crypto.ECDSA && (this.prvKey = new lt.crypto.ECDSA({ curve: this.eccurvename, prv: this.ecprvhex })), this.prvKey instanceof nt && "rsaandmgf1" === this.pubkeyAlgName) this.hSign = this.prvKey.signWithMessageHashPSS(this.sHashHex, this.mdAlgName, this.pssSaltLen);else if (this.prvKey instanceof nt && "rsa" === this.pubkeyAlgName) this.hSign = this.prvKey.signWithMessageHash(this.sHashHex, this.mdAlgName);else if (this.prvKey instanceof lt.crypto.ECDSA) this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);else {if (!(this.prvKey instanceof lt.crypto.DSA)) throw "Signature: unsupported private key alg: " + this.pubkeyAlgName;this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);}return this.hSign;}, this.signString = function (t) {return this.updateString(t), this.sign();}, this.signHex = function (t) {return this.updateHex(t), this.sign();}, this.verify = function (t) {if (this.sHashHex = this.md.digest(), void 0 === this.pubKey && void 0 !== this.ecpubhex && void 0 !== this.eccurvename && void 0 !== lt.crypto.ECDSA && (this.pubKey = new lt.crypto.ECDSA({ curve: this.eccurvename, pub: this.ecpubhex })), this.pubKey instanceof nt && "rsaandmgf1" === this.pubkeyAlgName) return this.pubKey.verifyWithMessageHashPSS(this.sHashHex, t, this.mdAlgName, this.pssSaltLen);if (this.pubKey instanceof nt && "rsa" === this.pubkeyAlgName) return this.pubKey.verifyWithMessageHash(this.sHashHex, t);if (void 0 !== lt.crypto.ECDSA && this.pubKey instanceof lt.crypto.ECDSA) return this.pubKey.verifyWithMessageHash(this.sHashHex, t);if (void 0 !== lt.crypto.DSA && this.pubKey instanceof lt.crypto.DSA) return this.pubKey.verifyWithMessageHash(this.sHashHex, t);throw "Signature: unsupported public key alg: " + this.pubkeyAlgName;};}}, this.init = function (t, e) {throw "init(key, pass) not supported for this alg:prov=" + this.algProvName;}, this.updateString = function (t) {throw "updateString(str) not supported for this alg:prov=" + this.algProvName;}, this.updateHex = function (t) {throw "updateHex(hex) not supported for this alg:prov=" + this.algProvName;}, this.sign = function () {throw "sign() not supported for this alg:prov=" + this.algProvName;}, this.signString = function (t) {throw "digestString(str) not supported for this alg:prov=" + this.algProvName;}, this.signHex = function (t) {throw "digestHex(hex) not supported for this alg:prov=" + this.algProvName;}, this.verify = function (t) {throw "verify(hSigVal) not supported for this alg:prov=" + this.algProvName;}, this.initParams = t, void 0 !== t && (void 0 !== t.alg && (this.algName = t.alg, void 0 === t.prov ? this.provName = lt.crypto.Util.DEFAULTPROVIDER[this.algName] : this.provName = t.prov, this.algProvName = this.algName + ":" + this.provName, this.setAlgAndProvider(this.algName, this.provName), this._setAlgNames()), void 0 !== t.psssaltlen && (this.pssSaltLen = t.psssaltlen), void 0 !== t.prvkeypem)) {if (void 0 !== t.prvkeypas) throw "both prvkeypem and prvkeypas parameters not supported";try {e = Gt.getKey(t.prvkeypem), this.init(e);} catch (t) {throw "fatal error to load pem private key: " + t;}}}, lt.crypto.Cipher = function (t) {}, lt.crypto.Cipher.encrypt = function (t, e, i, n) {if (null != qt(n, "enclag") && (i = n.encalg), "string" == typeof i && "-CBC" == i.substr(-4)) {var r = e,s = t;null != qt(n, "key") && (r = n.key), null != qt(n, "enc") && (hEnc = n.enc);var o,a = v.enc.Hex.parse(r),l = v.enc.Hex.parse(s),c = v.enc.Hex.parse(n.iv);if ("des-EDE3-CBC" == i) o = v.TripleDES.encrypt(l, a, { iv: c });else {if ("aes128-CBC" != i && "aes256-CBC" != i) throw new Error("unsupported algorithm: " + i);o = v.AES.encrypt(l, a, { iv: c });}return o + "";}throw new Error("Cipher.encrypt: unsupported key or algorithm");}, lt.crypto.Cipher.decrypt = function (t, e, i, n) {if (null != qt(n, "enclag") && (i = n.encalg), "string" == typeof i && "-CBC" == i.substr(-4)) {var r = e,s = t;null != qt(n, "key") && (r = n.key), null != qt(n, "enc") && (s = n.enc);var o,a = v.enc.Hex.parse(r),l = v.enc.Hex.parse(s),c = v.enc.Hex.parse(n.iv);if ("des-EDE3-CBC" == i) o = v.TripleDES.decrypt({ ciphertext: l }, a, { iv: c });else {if ("aes128-CBC" != i && "aes256-CBC" != i) throw new Error("unsupported algorithm: " + i);o = v.AES.decrypt({ ciphertext: l }, a, { iv: c });}return v.enc.Hex.stringify(o);}throw new Error("Cipher.decrypt: unsupported key or algorithm");}, lt.crypto.OID = new function () {this.oidhex2name = { "2a864886f70d010101": "rsaEncryption", "2a8648ce3d0201": "ecPublicKey", "2a8648ce380401": "dsa", "2a8648ce3d030107": "secp256r1", "2b8104001f": "secp192k1", "2b81040021": "secp224r1", "2b8104000a": "secp256k1", "2b81040022": "secp384r1", "2b81040023": "secp521r1", "2a8648ce380403": "SHA1withDSA", "608648016503040301": "SHA224withDSA", "608648016503040302": "SHA256withDSA" };}(), void 0 !== lt && lt || (lt = {}), void 0 !== lt.crypto && lt.crypto || (lt.crypto = {}), lt.crypto.ECDSA = function (t) {var e = Error,i = S,n = st,r = lt.crypto.ECDSA,s = lt.crypto.ECParameterDB,o = r.getName,a = ut,l = a.getVbyListEx,c = a.isASN1HEX,h = new et();this.type = "EC", this.isPrivate = !1, this.isPublic = !1, this.getBigRandom = function (t) {return new i(t.bitLength(), h).mod(t.subtract(i.ONE)).add(i.ONE);}, this.setNamedCurve = function (t) {this.ecparams = s.getByName(t), this.prvKeyHex = null, this.pubKeyHex = null, this.curveName = t;}, this.setPrivateKeyHex = function (t) {this.isPrivate = !0, this.prvKeyHex = t;}, this.setPublicKeyHex = function (t) {this.isPublic = !0, this.pubKeyHex = t;}, this.getPublicKeyXYHex = function () {var t = this.pubKeyHex;if ("04" !== t.substr(0, 2)) throw "this method supports uncompressed format(04) only";var e = this.ecparams.keycharlen;if (t.length !== 2 + 2 * e) throw "malformed public key hex length";var i = {};return i.x = t.substr(2, e), i.y = t.substr(2 + e), i;}, this.getShortNISTPCurveName = function () {var t = this.curveName;return "secp256r1" === t || "NIST P-256" === t || "P-256" === t || "prime256v1" === t ? "P-256" : "secp384r1" === t || "NIST P-384" === t || "P-384" === t ? "P-384" : "secp521r1" === t || "NIST P-521" === t || "P-521" === t ? "P-521" : null;}, this.generateKeyPairHex = function () {var t = this.ecparams.n,e = this.getBigRandom(t),i = this.ecparams.keycharlen,n = ("0000000000" + e.toString(16)).slice(-i);return this.setPrivateKeyHex(n), { ecprvhex: n, ecpubhex: this.generatePublicKeyHex() };}, this.generatePublicKeyHex = function () {var t = new i(this.prvKeyHex, 16),e = this.ecparams.G.multiply(t),n = e.getX().toBigInteger(),r = e.getY().toBigInteger(),s = this.ecparams.keycharlen,o = "04" + ("0000000000" + n.toString(16)).slice(-s) + ("0000000000" + r.toString(16)).slice(-s);return this.setPublicKeyHex(o), o;}, this.signWithMessageHash = function (t) {return this.signHex(t, this.prvKeyHex);}, this.signHex = function (t, e) {var n = new i(e, 16),s = this.ecparams.n,o = new i(t.substring(0, this.ecparams.keycharlen), 16);do {var a = this.getBigRandom(s),l = this.ecparams.G.multiply(a).getX().toBigInteger().mod(s);} while (l.compareTo(i.ZERO) <= 0);var c = a.modInverse(s).multiply(o.add(n.multiply(l))).mod(s);return r.biRSSigToASN1Sig(l, c);}, this.sign = function (t, e) {var n = e,r = this.ecparams.n,s = i.fromByteArrayUnsigned(t);do {var o = this.getBigRandom(r),a = this.ecparams.G.multiply(o).getX().toBigInteger().mod(r);} while (a.compareTo(S.ZERO) <= 0);var l = o.modInverse(r).multiply(s.add(n.multiply(a))).mod(r);return this.serializeSig(a, l);}, this.verifyWithMessageHash = function (t, e) {return this.verifyHex(t, e, this.pubKeyHex);}, this.verifyHex = function (t, e, s) {try {var o,a,l = r.parseSigHex(e);o = l.r, a = l.s;var c = n.decodeFromHex(this.ecparams.curve, s),h = new i(t.substring(0, this.ecparams.keycharlen), 16);return this.verifyRaw(h, o, a, c);} catch (t) {return !1;}}, this.verify = function (t, e, r) {var s, o, a;if (Bitcoin.Util.isArray(e)) {var l = this.parseSig(e);s = l.r, o = l.s;} else {if ("object" != typeof e || !e.r || !e.s) throw "Invalid value for signature";s = e.r, o = e.s;}if (r instanceof st) a = r;else {if (!Bitcoin.Util.isArray(r)) throw "Invalid format for pubkey value, must be byte array or ECPointFp";a = n.decodeFrom(this.ecparams.curve, r);}var c = i.fromByteArrayUnsigned(t);return this.verifyRaw(c, s, o, a);}, this.verifyRaw = function (t, e, n, r) {var s = this.ecparams.n,o = this.ecparams.G;if (e.compareTo(i.ONE) < 0 || e.compareTo(s) >= 0) return !1;if (n.compareTo(i.ONE) < 0 || n.compareTo(s) >= 0) return !1;var a = n.modInverse(s),l = t.multiply(a).mod(s),c = e.multiply(a).mod(s);return o.multiply(l).add(r.multiply(c)).getX().toBigInteger().mod(s).equals(e);}, this.serializeSig = function (t, e) {var i = t.toByteArraySigned(),n = e.toByteArraySigned(),r = [];return r.push(2), r.push(i.length), (r = r.concat(i)).push(2), r.push(n.length), (r = r.concat(n)).unshift(r.length), r.unshift(48), r;}, this.parseSig = function (t) {var e;if (48 != t[0]) throw new Error("Signature not a valid DERSequence");if (2 != t[e = 2]) throw new Error("First element in signature must be a DERInteger");var n = t.slice(e + 2, e + 2 + t[e + 1]);if (2 != t[e += 2 + t[e + 1]]) throw new Error("Second element in signature must be a DERInteger");var r = t.slice(e + 2, e + 2 + t[e + 1]);return e += 2 + t[e + 1], { r: i.fromByteArrayUnsigned(n), s: i.fromByteArrayUnsigned(r) };}, this.parseSigCompact = function (t) {if (65 !== t.length) throw "Signature has the wrong length";var e = t[0] - 27;if (e < 0 || e > 7) throw "Invalid signature type";var n = this.ecparams.n;return { r: i.fromByteArrayUnsigned(t.slice(1, 33)).mod(n), s: i.fromByteArrayUnsigned(t.slice(33, 65)).mod(n), i: e };}, this.readPKCS5PrvKeyHex = function (t) {if (!1 === c(t)) throw new Error("not ASN.1 hex string");var e, i, n;try {e = l(t, 0, ["[0]", 0], "06"), i = l(t, 0, [1], "04");try {n = l(t, 0, ["[1]", 0], "03");} catch (t) {}} catch (t) {throw new Error("malformed PKCS#1/5 plain ECC private key");}if (this.curveName = o(e), void 0 === this.curveName) throw "unsupported curve name";this.setNamedCurve(this.curveName), this.setPublicKeyHex(n), this.setPrivateKeyHex(i), this.isPublic = !1;}, this.readPKCS8PrvKeyHex = function (t) {if (!1 === c(t)) throw new e("not ASN.1 hex string");var i, n, r;try {l(t, 0, [1, 0], "06"), i = l(t, 0, [1, 1], "06"), n = l(t, 0, [2, 0, 1], "04");try {r = l(t, 0, [2, 0, "[1]", 0], "03");} catch (t) {}} catch (t) {throw new e("malformed PKCS#8 plain ECC private key");}if (this.curveName = o(i), void 0 === this.curveName) throw new e("unsupported curve name");this.setNamedCurve(this.curveName), this.setPublicKeyHex(r), this.setPrivateKeyHex(n), this.isPublic = !1;}, this.readPKCS8PubKeyHex = function (t) {if (!1 === c(t)) throw new e("not ASN.1 hex string");var i, n;try {l(t, 0, [0, 0], "06"), i = l(t, 0, [0, 1], "06"), n = l(t, 0, [1], "03");} catch (t) {throw new e("malformed PKCS#8 ECC public key");}if (this.curveName = o(i), null === this.curveName) throw new e("unsupported curve name");this.setNamedCurve(this.curveName), this.setPublicKeyHex(n);}, this.readCertPubKeyHex = function (t, i) {if (!1 === c(t)) throw new e("not ASN.1 hex string");var n, r;try {n = l(t, 0, [0, 5, 0, 1], "06"), r = l(t, 0, [0, 5, 1], "03");} catch (t) {throw new e("malformed X.509 certificate ECC public key");}if (this.curveName = o(n), null === this.curveName) throw new e("unsupported curve name");this.setNamedCurve(this.curveName), this.setPublicKeyHex(r);}, void 0 !== t && void 0 !== t.curve && (this.curveName = t.curve), void 0 === this.curveName && (this.curveName = "secp256r1"), this.setNamedCurve(this.curveName), void 0 !== t && (void 0 !== t.prv && this.setPrivateKeyHex(t.prv), void 0 !== t.pub && this.setPublicKeyHex(t.pub));}, lt.crypto.ECDSA.parseSigHex = function (t) {var e = lt.crypto.ECDSA.parseSigHexInHexRS(t);return { r: new S(e.r, 16), s: new S(e.s, 16) };}, lt.crypto.ECDSA.parseSigHexInHexRS = function (t) {var e = ut,i = e.getChildIdx,n = e.getV;if (e.checkStrictDER(t, 0), "30" != t.substr(0, 2)) throw new Error("signature is not a ASN.1 sequence");var r = i(t, 0);if (2 != r.length) throw new Error("signature shall have two elements");var s = r[0],o = r[1];if ("02" != t.substr(s, 2)) throw new Error("1st item not ASN.1 integer");if ("02" != t.substr(o, 2)) throw new Error("2nd item not ASN.1 integer");return { r: n(t, s), s: n(t, o) };}, lt.crypto.ECDSA.asn1SigToConcatSig = function (t) {var e = lt.crypto.ECDSA.parseSigHexInHexRS(t),i = e.r,n = e.s;if (i.length >= 130 && i.length <= 134) {if (i.length % 2 != 0) throw Error("unknown ECDSA sig r length error");if (n.length % 2 != 0) throw Error("unknown ECDSA sig s length error");"00" == i.substr(0, 2) && (i = i.substr(2)), "00" == n.substr(0, 2) && (n = n.substr(2));var r = Math.max(i.length, n.length);return (i = ("000000" + i).slice(-r)) + ("000000" + n).slice(-r);}if ("00" == i.substr(0, 2) && i.length % 32 == 2 && (i = i.substr(2)), "00" == n.substr(0, 2) && n.length % 32 == 2 && (n = n.substr(2)), i.length % 32 == 30 && (i = "00" + i), n.length % 32 == 30 && (n = "00" + n), i.length % 32 != 0) throw Error("unknown ECDSA sig r length error");if (n.length % 32 != 0) throw Error("unknown ECDSA sig s length error");return i + n;}, lt.crypto.ECDSA.concatSigToASN1Sig = function (t) {if (t.length % 4 != 0) throw Error("unknown ECDSA concatinated r-s sig length error");var e = t.substr(0, t.length / 2),i = t.substr(t.length / 2);return lt.crypto.ECDSA.hexRSSigToASN1Sig(e, i);}, lt.crypto.ECDSA.hexRSSigToASN1Sig = function (t, e) {var i = new S(t, 16),n = new S(e, 16);return lt.crypto.ECDSA.biRSSigToASN1Sig(i, n);}, lt.crypto.ECDSA.biRSSigToASN1Sig = function (t, e) {var i = lt.asn1,n = new i.DERInteger({ bigint: t }),r = new i.DERInteger({ bigint: e });return new i.DERSequence({ array: [n, r] }).tohex();}, lt.crypto.ECDSA.getName = function (t) {return "2b8104001f" === t ? "secp192k1" : "2a8648ce3d030107" === t ? "secp256r1" : "2b8104000a" === t ? "secp256k1" : "2b81040021" === t ? "secp224r1" : "2b81040022" === t ? "secp384r1" : "2b81040023" === t ? "secp521r1" : -1 !== "|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t) ? "secp256r1" : -1 !== "|secp256k1|".indexOf(t) ? "secp256k1" : -1 !== "|secp224r1|NIST P-224|P-224|".indexOf(t) ? "secp224r1" : -1 !== "|secp384r1|NIST P-384|P-384|".indexOf(t) ? "secp384r1" : -1 !== "|secp521r1|NIST P-521|P-521|".indexOf(t) ? "secp521r1" : null;}, void 0 !== lt && lt || (lt = {}), void 0 !== lt.crypto && lt.crypto || (lt.crypto = {}), lt.crypto.ECParameterDB = new function () {var t = {},e = {};function i(t) {return new S(t, 16);}this.getByName = function (i) {var n = i;if (void 0 !== e[n] && (n = e[i]), void 0 !== t[n]) return t[n];throw "unregistered EC curve name: " + n;}, this.regist = function (n, r, s, o, a, l, c, h, u, d, p, f) {t[n] = {};var g = i(s),m = i(o),v = i(a),y = i(l),b = i(c),w = new ot(g, m, v),x = w.decodePointHex("04" + h + u);t[n].name = n, t[n].keylen = r, t[n].keycharlen = 2 * Math.ceil(r / 8), t[n].curve = w, t[n].G = x, t[n].n = y, t[n].h = b, t[n].oid = p, t[n].info = f;for (var S = 0; S < d.length; S++) e[d[S]] = n;};}(), lt.crypto.ECParameterDB.regist("secp128r1", 128, "FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF", "FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC", "E87579C11079F43DD824993C2CEE5ED3", "FFFFFFFE0000000075A30D1B9038A115", "1", "161FF7528B899B2D0C28607CA52C5B86", "CF5AC8395BAFEB13C02DA292DDED7A83", [], "", "secp128r1 : SECG curve over a 128 bit prime field"), lt.crypto.ECParameterDB.regist("secp160k1", 160, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73", "0", "7", "0100000000000000000001B8FA16DFAB9ACA16B6B3", "1", "3B4C382CE37AA192A4019E763036F4F5DD4D7EBB", "938CF935318FDCED6BC28286531733C3F03C4FEE", [], "", "secp160k1 : SECG curve over a 160 bit prime field"), lt.crypto.ECParameterDB.regist("secp160r1", 160, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC", "1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45", "0100000000000000000001F4C8F927AED3CA752257", "1", "4A96B5688EF573284664698968C38BB913CBFC82", "23A628553168947D59DCC912042351377AC5FB32", [], "", "secp160r1 : SECG curve over a 160 bit prime field"), lt.crypto.ECParameterDB.regist("secp192k1", 192, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37", "0", "3", "FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D", "1", "DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D", "9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D", []), lt.crypto.ECParameterDB.regist("secp192r1", 192, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC", "64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1", "FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831", "1", "188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012", "07192B95FFC8DA78631011ED6B24CDD573F977A11E794811", []), lt.crypto.ECParameterDB.regist("secp224r1", 224, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE", "B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4", "FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D", "1", "B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21", "BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34", []), lt.crypto.ECParameterDB.regist("secp256k1", 256, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F", "0", "7", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141", "1", "79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798", "483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8", []), lt.crypto.ECParameterDB.regist("secp256r1", 256, "FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF", "FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC", "5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B", "FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551", "1", "6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296", "4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5", ["NIST P-256", "P-256", "prime256v1"]), lt.crypto.ECParameterDB.regist("secp384r1", 384, "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC", "B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973", "1", "AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7", "3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f", ["NIST P-384", "P-384"]), lt.crypto.ECParameterDB.regist("secp521r1", 521, "1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF", "1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC", "051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00", "1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409", "1", "00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66", "011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650", ["NIST P-521", "P-521"]), void 0 !== lt && lt || (lt = {}), void 0 !== lt.crypto && lt.crypto || (lt.crypto = {}), lt.crypto.DSA = function () {var t = ut,e = (t.getVbyList, t.getVbyListEx),i = t.isASN1HEX,n = S;this.p = null, this.q = null, this.g = null, this.y = null, this.x = null, this.type = "DSA", this.isPrivate = !1, this.isPublic = !1, this.setPrivate = function (t, e, i, n, r) {this.isPrivate = !0, this.p = t, this.q = e, this.g = i, this.y = n, this.x = r;}, this.setPrivateHex = function (t, e, i, n, r) {var s, o, a, l, c;s = new S(t, 16), o = new S(e, 16), a = new S(i, 16), l = "string" == typeof n && n.length > 1 ? new S(n, 16) : null, c = new S(r, 16), this.setPrivate(s, o, a, l, c);}, this.setPublic = function (t, e, i, n) {this.isPublic = !0, this.p = t, this.q = e, this.g = i, this.y = n, this.x = null;}, this.setPublicHex = function (t, e, i, n) {var r, s, o, a;r = new S(t, 16), s = new S(e, 16), o = new S(i, 16), a = new S(n, 16), this.setPublic(r, s, o, a);}, this.signWithMessageHash = function (t) {var e = this.p,i = this.q,n = this.g,r = (this.y, this.x),s = lt.crypto.Util.getRandomBigIntegerMinToMax(S.ONE.add(S.ONE), i.subtract(S.ONE)),o = new S(t.substr(0, i.bitLength() / 4), 16),a = n.modPow(s, e).mod(i),l = s.modInverse(i).multiply(o.add(r.multiply(a))).mod(i);return lt.asn1.ASN1Util.jsonToASN1HEX({ seq: [{ int: { bigint: a } }, { int: { bigint: l } }] });}, this.verifyWithMessageHash = function (t, e) {var i = this.p,n = this.q,r = this.g,s = this.y,o = this.parseASN1Signature(e),a = o[0],l = o[1],c = new S(t.substr(0, n.bitLength() / 4), 16);if (S.ZERO.compareTo(a) > 0 || a.compareTo(n) > 0) throw "invalid DSA signature";if (S.ZERO.compareTo(l) >= 0 || l.compareTo(n) > 0) throw "invalid DSA signature";var h = l.modInverse(n),u = c.multiply(h).mod(n),d = a.multiply(h).mod(n);return 0 == r.modPow(u, i).multiply(s.modPow(d, i)).mod(i).mod(n).compareTo(a);}, this.parseASN1Signature = function (t) {try {return [new n(e(t, 0, [0], "02"), 16), new n(e(t, 0, [1], "02"), 16)];} catch (t) {throw new Error("malformed ASN.1 DSA signature");}}, this.readPKCS5PrvKeyHex = function (t) {var n, r, s, o, a;if (!1 === i(t)) throw new Error("not ASN.1 hex string");try {n = e(t, 0, [1], "02"), r = e(t, 0, [2], "02"), s = e(t, 0, [3], "02"), o = e(t, 0, [4], "02"), a = e(t, 0, [5], "02");} catch (t) {throw new Error("malformed PKCS#1/5 plain DSA private key");}this.setPrivateHex(n, r, s, o, a);}, this.readPKCS8PrvKeyHex = function (t) {var n, r, s, o;if (!1 === i(t)) throw new Error("not ASN.1 hex string");try {n = e(t, 0, [1, 1, 0], "02"), r = e(t, 0, [1, 1, 1], "02"), s = e(t, 0, [1, 1, 2], "02"), o = e(t, 0, [2, 0], "02");} catch (t) {throw new Error("malformed PKCS#8 plain DSA private key");}this.setPrivateHex(n, r, s, null, o);}, this.readPKCS8PubKeyHex = function (t) {var n, r, s, o;if (!1 === i(t)) throw new Error("not ASN.1 hex string");try {n = e(t, 0, [0, 1, 0], "02"), r = e(t, 0, [0, 1, 1], "02"), s = e(t, 0, [0, 1, 2], "02"), o = e(t, 0, [1, 0], "02");} catch (t) {throw new Error("malformed PKCS#8 DSA public key");}this.setPublicHex(n, r, s, o);}, this.readCertPubKeyHex = function (t, n) {var r, s, o, a;if (!1 === i(t)) throw new Error("not ASN.1 hex string");try {r = e(t, 0, [0, 5, 0, 1, 0], "02"), s = e(t, 0, [0, 5, 0, 1, 1], "02"), o = e(t, 0, [0, 5, 0, 1, 2], "02"), a = e(t, 0, [0, 5, 1, 0], "02");} catch (t) {throw new Error("malformed X.509 certificate DSA public key");}this.setPublicHex(r, s, o, a);};};var Gt = function () {var t = function (t, i, n) {return e(v.AES, t, i, n);},e = function (t, e, i, n) {var r = v.enc.Hex.parse(e),s = v.enc.Hex.parse(i),o = v.enc.Hex.parse(n),a = {};a.key = s, a.iv = o, a.ciphertext = r;var l = t.decrypt(a, s, { iv: o });return v.enc.Hex.stringify(l);},i = function (t, e, i) {return n(v.AES, t, e, i);},n = function (t, e, i, n) {var r = v.enc.Hex.parse(e),s = v.enc.Hex.parse(i),o = v.enc.Hex.parse(n),a = t.encrypt(r, s, { iv: o }),l = v.enc.Hex.parse(a.toString());return v.enc.Base64.stringify(l);},r = { "AES-256-CBC": { proc: t, eproc: i, keylen: 32, ivlen: 16 }, "AES-192-CBC": { proc: t, eproc: i, keylen: 24, ivlen: 16 }, "AES-128-CBC": { proc: t, eproc: i, keylen: 16, ivlen: 16 }, "DES-EDE3-CBC": { proc: function (t, i, n) {return e(v.TripleDES, t, i, n);}, eproc: function (t, e, i) {return n(v.TripleDES, t, e, i);}, keylen: 24, ivlen: 8 }, "DES-CBC": { proc: function (t, i, n) {return e(v.DES, t, i, n);}, eproc: function (t, e, i) {return n(v.DES, t, e, i);}, keylen: 8, ivlen: 8 } },s = function (t) {var e = {},i = t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)", "m"));i && (e.cipher = i[1], e.ivsalt = i[2]);var n = t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n && (e.type = n[1]);var r = -1,s = 0;-1 != t.indexOf("\r\n\r\n") && (r = t.indexOf("\r\n\r\n"), s = 2), -1 != t.indexOf("\n\n") && (r = t.indexOf("\n\n"), s = 1);var o = t.indexOf("-----END");if (-1 != r && -1 != o) {var a = t.substring(r + 2 * s, o - s);a = a.replace(/\s+/g, ""), e.data = a;}return e;},o = function (t, e, i) {for (var n = i.substring(0, 16), s = v.enc.Hex.parse(n), o = v.enc.Utf8.parse(e), a = r[t].keylen + r[t].ivlen, l = "", c = null;;) {var h = v.algo.MD5.create();if (null != c && h.update(c), h.update(o), h.update(s), c = h.finalize(), (l += v.enc.Hex.stringify(c)).length >= 2 * a) break;}var u = {};return u.keyhex = l.substr(0, 2 * r[t].keylen), u.ivhex = l.substr(2 * r[t].keylen, 2 * r[t].ivlen), u;},a = function (t, e, i, n) {var s = v.enc.Base64.parse(t),o = v.enc.Hex.stringify(s);return (0, r[e].proc)(o, i, n);};return { version: "1.0.0", parsePKCS5PEM: function (t) {return s(t);}, getKeyAndUnusedIvByPasscodeAndIvsalt: function (t, e, i) {return o(t, e, i);}, decryptKeyB64: function (t, e, i, n) {return a(t, e, i, n);}, getDecryptedKeyHex: function (t, e) {var i = s(t),n = (i.type, i.cipher),r = i.ivsalt,l = i.data,c = o(n, e, r).keyhex;return a(l, n, c, r);}, getEncryptedPKCS5PEMFromPrvKeyHex: function (t, e, i, n, s) {var a = "";if (void 0 !== n && null != n || (n = "AES-256-CBC"), void 0 === r[n]) throw new Error("KEYUTIL unsupported algorithm: " + n);if (void 0 === s || null == s) {var l = function (t) {var e = v.lib.WordArray.random(t);return v.enc.Hex.stringify(e);}(r[n].ivlen);s = l.toUpperCase();}var c = function (t, e, i, n) {return (0, r[e].eproc)(t, i, n);}(e, n, o(n, i, s).keyhex, s);return a = "-----BEGIN " + t + " PRIVATE KEY-----\r\n", a += "Proc-Type: 4,ENCRYPTED\r\n", a += "DEK-Info: " + n + "," + s + "\r\n", a += "\r\n", (a += c.replace(/(.{64})/g, "$1\r\n")) + "\r\n-----END " + t + " PRIVATE KEY-----\r\n";}, getEncryptedPKCS8PEM: function (t, e, i) {return Et(this.getEncryptedPKCS8Hex(t, e, i), "ENCRYPTED PRIVATE KEY");}, getEncryptedPKCS8Hex: function (t, e, i) {var n;(n = null == i || null == i ? {} : JSON.parse(JSON.stringify(i))).plain = t, this.initPBES2Param(n), this.encryptPBES2Param(n, e);var r = this.generatePBES2ASN1Param(n);return lt.asn1.ASN1Util.newObject(r).tohex();}, initPBES2Param: function (t) {var e;null == qt(t, "encalg") && (t.encalg = "aes256-CBC"), null == qt(t, "iter") && (t.iter = 2048), null == qt(t, "prf") && (t.prf = "hmacWithSHA256"), null == qt(t, "salt") && (t.salt = v.enc.Hex.stringify(v.lib.WordArray.random(8))), null == qt(t, "enciv") && ("des-EDE3-CBC" == t.encalg && (e = 8), "aes128-CBC" == t.encalg && (e = 16), "aes256-CBC" == t.encalg && (e = 16), t.enciv = v.enc.Hex.stringify(v.lib.WordArray.random(e)));}, encryptPBES2Param: function (t, e) {var i = Gt.getDKFromPBES2Param(t, e);try {var n = lt.crypto.Cipher.encrypt(t.plain, i, t.encalg, { iv: t.enciv });} catch (e) {throw new Error("encrypt error: " + t.plain + " " + i + " " + t.encalg + " " + t.enciv);}t.enc = n;}, generatePBES2ASN1Param: function (t) {var e = { seq: [{ seq: [{ oid: "pkcs5PBES2" }, { seq: [{ seq: [{ oid: "pkcs5PBKDF2" }, { seq: [{ octstr: { hex: t.salt } }, { int: { hex: jt(t.iter) } }] }] }, { seq: [{ oid: t.encalg }, { octstr: { hex: t.enciv } }] }] }] }, { octstr: { hex: t.enc } }] };return "hmacWithSHA1" != t.prf && e.seq[0].seq[1].seq[0].seq[1].seq.push({ seq: [{ oid: t.prf }, { null: "" }] }), e;}, parseHexOfEncryptedPKCS8: function (t) {var e = ut,i = e.getChildIdx,n = e.getV,r = {},s = i(t, 0);if (2 != s.length) throw new Error("malformed format: SEQUENCE(0).items != 2: " + s.length);r.ciphertext = n(t, s[1]);var o = i(t, s[0]);if (2 != o.length) throw new Error("malformed format: SEQUENCE(0.0).items != 2: " + o.length);if ("2a864886f70d01050d" != n(t, o[0])) throw new Error("this only supports pkcs5PBES2");var a = i(t, o[1]);if (2 != o.length) throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: " + a.length);var l = i(t, a[1]);if (2 != l.length) throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: " + l.length);if ("2a864886f70d0307" != n(t, l[0])) throw "this only supports TripleDES";r.encryptionSchemeAlg = "TripleDES", r.encryptionSchemeIV = n(t, l[1]);var c = i(t, a[0]);if (2 != c.length) throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: " + c.length);if ("2a864886f70d01050c" != n(t, c[0])) throw new Error("this only supports pkcs5PBKDF2");var h = i(t, c[1]);if (h.length < 2) throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: " + h.length);r.pbkdf2Salt = n(t, h[0]);var u = n(t, h[1]);try {r.pbkdf2Iter = parseInt(u, 16);} catch (t) {throw new Error("malformed format pbkdf2Iter: " + u);}return r;}, getPBKDF2KeyHexFromParam: function (t, e) {var i = v.enc.Hex.parse(t.pbkdf2Salt),n = t.pbkdf2Iter,r = v.PBKDF2(e, i, { keySize: 6, iterations: n });return v.enc.Hex.stringify(r);}, _getPlainPKCS8HexFromEncryptedPKCS8PEM: function (t, e) {var i = Ct(t, "ENCRYPTED PRIVATE KEY"),n = this.parseHexOfEncryptedPKCS8(i),r = Gt.getPBKDF2KeyHexFromParam(n, e),s = {};s.ciphertext = v.enc.Hex.parse(n.ciphertext);var o = v.enc.Hex.parse(r),a = v.enc.Hex.parse(n.encryptionSchemeIV),l = v.TripleDES.decrypt(s, o, { iv: a });return v.enc.Hex.stringify(l);}, parsePBES2: function (t) {var e = ut.parse(t);if ("pkcs5PBES2" != qt(e, "seq.0.seq.0.oid") || "pkcs5PBKDF2" != qt(e, "seq.0.seq.1.seq.0.seq.0.oid")) throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var i = qt(e, "seq.0.seq.1.seq.0.seq.1.seq");if (null == i) throw new Error("PBKDF2 parameter not found");var n = qt(i, "0.octstr.hex"),r = qt(i, "1.int.hex"),s = qt(i, "2.seq.0.oid", "hmacWithSHA1"),o = -1;try {o = parseInt(r, 16);} catch (t) {throw new Error("iter not proper value");}var a = qt(e, "seq.0.seq.1.seq.1.seq.0.oid"),l = qt(e, "seq.0.seq.1.seq.1.seq.1.octstr.hex"),c = qt(e, "seq.1.octstr.hex");if (null == a || null == l || null == c) throw new Error("encalg, enciv or enc is undefined");return { salt: n, iter: o, prf: s, encalg: a, enciv: l, enc: c };}, getDKFromPBES2Param: function (t, e) {var i = { hmacWithSHA1: v.algo.SHA1, hmacWithSHA224: v.algo.SHA224, hmacWithSHA256: v.algo.SHA256, hmacWithSHA384: v.algo.SHA384, hmacWithSHA512: v.algo.SHA512 }[t.prf];if (null == i) throw new Error("unsupported prf");var n = { "des-EDE3-CBC": 6, "aes128-CBC": 4, "aes256-CBC": 8 }[t.encalg];if (null == n) throw new Error("unsupported encalg");var r = v.enc.Hex.parse(t.salt),s = t.iter;try {var o = v.PBKDF2(e, r, { keySize: n, iterations: s, hasher: i });return v.enc.Hex.stringify(o);} catch (i) {throw new Error("PBKDF2 error: " + i + " " + JSON.stringify(t) + " " + e);}}, getPlainHexFromEncryptedPKCS8PEM: function (t, e) {if (-1 == t.indexOf("BEGIN ENCRYPTED PRIVATE KEY")) throw new Error("not Encrypted PKCS#8 PEM string");var i,n = Ct(t);try {i = Gt.parsePBES2(n);} catch (t) {throw new Error("malformed PBES2 format: " + t.message);}var r = Gt.getDKFromPBES2Param(i, e);return lt.crypto.Cipher.decrypt(i.enc, r, i.encalg, { iv: i.enciv });}, getKeyFromEncryptedPKCS8PEM: function (t, e) {var i = this.getPlainHexFromEncryptedPKCS8PEM(t, e);return this.getKeyFromPlainPrivatePKCS8Hex(i);}, parsePlainPrivatePKCS8Hex: function (t) {var e = ut,i = e.getChildIdx,n = e.getV,r = { algparam: null };if ("30" != t.substr(0, 2)) throw new Error("malformed plain PKCS8 private key(code:001)");var s = i(t, 0);if (s.length < 3) throw new Error("malformed plain PKCS8 private key(code:002)");if ("30" != t.substr(s[1], 2)) throw new Error("malformed PKCS8 private key(code:003)");var o = i(t, s[1]);if (2 != o.length) throw new Error("malformed PKCS8 private key(code:004)");if ("06" != t.substr(o[0], 2)) throw new Error("malformed PKCS8 private key(code:005)");if (r.algoid = n(t, o[0]), "06" == t.substr(o[1], 2) && (r.algparam = n(t, o[1])), "04" != t.substr(s[2], 2)) throw new Error("malformed PKCS8 private key(code:006)");return r.keyidx = e.getVidx(t, s[2]), r;}, getKeyFromPlainPrivatePKCS8PEM: function (t) {var e = Ct(t, "PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e);}, getKeyFromPlainPrivatePKCS8Hex: function (t) {var e,i = this.parsePlainPrivatePKCS8Hex(t);if ("2a864886f70d010101" == i.algoid) e = new nt();else if ("2a8648ce380401" == i.algoid) e = new lt.crypto.DSA();else {if ("2a8648ce3d0201" != i.algoid) throw new Error("unsupported private key algorithm");e = new lt.crypto.ECDSA();}return e.readPKCS8PrvKeyHex(t), e;}, _getKeyFromPublicPKCS8Hex: function (t) {var e,i = ut.getVbyList(t, 0, [0, 0], "06");if ("2a864886f70d010101" === i) e = new nt();else if ("2a8648ce380401" === i) e = new lt.crypto.DSA();else {if ("2a8648ce3d0201" !== i) throw new Error("unsupported PKCS#8 public key hex");e = new lt.crypto.ECDSA();}return e.readPKCS8PubKeyHex(t), e;}, parsePublicRawRSAKeyHex: function (t) {var e = ut,i = e.getChildIdx,n = e.getV,r = {};if ("30" != t.substr(0, 2)) throw new Error("malformed RSA key(code:001)");var s = i(t, 0);if (2 != s.length) throw new Error("malformed RSA key(code:002)");if ("02" != t.substr(s[0], 2)) throw new Error("malformed RSA key(code:003)");if (r.n = n(t, s[0]), "02" != t.substr(s[1], 2)) throw new Error("malformed RSA key(code:004)");return r.e = n(t, s[1]), r;}, parsePublicPKCS8Hex: function (t) {var e = ut,i = e.getChildIdx,n = e.getV,r = { algparam: null },s = i(t, 0);if (2 != s.length) throw new Error("outer DERSequence shall have 2 elements: " + s.length);var o = s[0];if ("30" != t.substr(o, 2)) throw new Error("malformed PKCS8 public key(code:001)");var a = i(t, o);if (2 != a.length) throw new Error("malformed PKCS8 public key(code:002)");if ("06" != t.substr(a[0], 2)) throw new Error("malformed PKCS8 public key(code:003)");if (r.algoid = n(t, a[0]), "06" == t.substr(a[1], 2) ? r.algparam = n(t, a[1]) : "30" == t.substr(a[1], 2) && (r.algparam = {}, r.algparam.p = e.getVbyList(t, a[1], [0], "02"), r.algparam.q = e.getVbyList(t, a[1], [1], "02"), r.algparam.g = e.getVbyList(t, a[1], [2], "02")), "03" != t.substr(s[1], 2)) throw new Error("malformed PKCS8 public key(code:004)");return r.key = n(t, s[1]).substr(2), r;} };}();function Wt(t, e) {for (var i = "", n = e / 4 - t.length, r = 0; r < n; r++) i += "0";return i + t;}function Kt(t, e, i) {for (var n = "", r = 0; n.length < e;) n += xt(i(St(t + String.fromCharCode.apply(String, [(4278190080 & r) >> 24, (16711680 & r) >> 16, (65280 & r) >> 8, 255 & r])))), r += 1;return n;}function Zt(t) {for (var e in lt.crypto.Util.DIGESTINFOHEAD) {var i = lt.crypto.Util.DIGESTINFOHEAD[e],n = i.length;if (t.substring(0, n) == i) return [e, t.substring(n)];}return [];}function Yt(t) {var e,i = ut,n = i.getChildIdx,r = i.getV,s = (i.dump, i.parse),o = i.getTLV,a = i.getVbyList,l = i.getVbyListEx,c = i.getTLVbyList,h = i.getTLVbyListEx,u = i.getIdxbyList,d = i.getIdxbyListEx,p = i.getVidx,f = i.getInt,g = i.oidname,m = i.hextooidstr,v = Ct,y = Error;try {e = lt.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;} catch (t) {}this.HEX2STAG = { "0c": "utf8", 13: "prn", 16: "ia5", "1a": "vis", "1e": "bmp" }, this.hex = null, this.version = 0, this.foffset = 0, this.aExtInfo = null, this.getVersion = function () {if (null === this.hex || 0 !== this.version) return this.version;var t = c(this.hex, 0, [0, 0]);if ("a0" == t.substr(0, 2)) {var e = c(t, 0, [0]),i = f(e, 0);if (i < 0 || 2 < i) throw new Error("malformed version field");return this.version = i + 1, this.version;}return this.version = 1, this.foffset = -1, 1;}, this.getSerialNumberHex = function () {return l(this.hex, 0, [0, 0], "02");}, this.getSignatureAlgorithmField = function () {var t = h(this.hex, 0, [0, 1]);return this.getAlgorithmIdentifierName(t);}, this.getAlgorithmIdentifierName = function (t) {for (var i in e) if (t === e[i]) return i;return g(l(t, 0, [0], "06"));}, this.getIssuer = function (t, e) {return this.getX500Name(this.getIssuerHex(), t, e);}, this.getIssuerHex = function () {return c(this.hex, 0, [0, 3 + this.foffset], "30");}, this.getIssuerString = function () {return this.getIssuer().str;}, this.getSubject = function (t, e) {return this.getX500Name(this.getSubjectHex(), t, e);}, this.getSubjectHex = function () {return c(this.hex, 0, [0, 5 + this.foffset], "30");}, this.getSubjectString = function () {return this.getSubject().str;}, this.getNotBefore = function () {var t = a(this.hex, 0, [0, 4 + this.foffset, 0]);return t = t.replace(/(..)/g, "%$1"), decodeURIComponent(t);}, this.getNotAfter = function () {var t = a(this.hex, 0, [0, 4 + this.foffset, 1]);return t = t.replace(/(..)/g, "%$1"), decodeURIComponent(t);}, this.getPublicKeyHex = function () {return this.getSPKI();}, this.getSPKI = function () {return c(this.hex, 0, [0, 6 + this.foffset], "30");}, this.getSPKIValue = function () {var t = this.getSPKI();return null == t ? null : a(t, 0, [1], "03", !0);}, this.getPublicKeyIdx = function () {return u(this.hex, 0, [0, 6 + this.foffset], "30");}, this.getPublicKeyContentIdx = function () {var t = this.getPublicKeyIdx();return u(this.hex, t, [1, 0], "30");}, this.getPublicKey = function () {return Gt.getKey(this.getPublicKeyHex(), null, "pkcs8pub");}, this.getSignatureAlgorithmName = function () {var t = c(this.hex, 0, [1], "30");return this.getAlgorithmIdentifierName(t);}, this.getSignatureValueHex = function () {return a(this.hex, 0, [2], "03", !0);}, this.verifySignature = function (t) {var e = this.getSignatureAlgorithmField(),i = this.getSignatureValueHex(),n = c(this.hex, 0, [0], "30"),r = new lt.crypto.Signature({ alg: e });return r.init(t), r.updateHex(n), r.verify(i);}, this.parseExt = function (t) {var e, s, o;if (void 0 === t) {if (o = this.hex, 3 !== this.version) return -1;e = u(o, 0, [0, 7, 0], "30"), s = n(o, e);} else {o = Ct(t);var l = u(o, 0, [0, 3, 0, 0], "06");if ("2a864886f70d01090e" != r(o, l)) return void (this.aExtInfo = new Array());e = u(o, 0, [0, 3, 0, 1, 0], "30"), s = n(o, e), this.hex = o;}this.aExtInfo = new Array();for (var c = 0; c < s.length; c++) {var h = { critical: !1 },d = 0;3 === n(o, s[c]).length && (h.critical = !0, d = 1), h.oid = i.hextooidstr(a(o, s[c], [0], "06"));var f = u(o, s[c], [1 + d]);h.vidx = p(o, f), this.aExtInfo.push(h);}}, this.getExtInfo = function (t) {var e = this.aExtInfo,i = t;if (t.match(/^[0-9.]+$/) || (i = lt.asn1.x509.OID.name2oid(t)), "" !== i) for (var n = 0; n < e.length; n++) if (e[n].oid === i) return e[n];}, this.getCriticalExtV = function (t, e, i) {if (null != e) return [e, i];var n = this.getExtInfo(t);return null == n ? [null, null] : [o(this.hex, n.vidx), n.critical];}, this.getExtBasicConstraints = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("basicConstraints");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var n = { extname: "basicConstraints" };if (e && (n.critical = !0), "3000" === t) return n;if ("30030101ff" === t) return n.cA = !0, n;if ("30060101ff02" === t.substr(0, 12)) {var s = r(t, 10),a = parseInt(s, 16);return n.cA = !0, n.pathLen = a, n;}throw new Error("hExtV parse error: " + t);}, this.getExtNameConstraints = function (t, e) {var i = this.getCriticalExtV("nameConstraints", t, e);if (t = i[0], e = i[1], null != t) {var r = { extname: "nameConstraints" };e && (r.critical = !0);for (var s = n(t, 0), a = 0; a < s.length; a++) {for (var l = [], c = n(t, s[a]), h = 0; h < c.length; h++) {var u = o(t, c[h]),d = this.getGeneralSubtree(u);l.push(d);}var p = t.substr(s[a], 2);"a0" == p ? r.permit = l : "a1" == p && (r.exclude = l);}return r;}}, this.getGeneralSubtree = function (t) {var e = n(t, 0),i = e.length;if (i < 1 || 2 < i) throw new Error("wrong num elements");for (var s = this.getGeneralName(o(t, e[0])), a = 1; a < i; a++) {var l = t.substr(e[a], 2),c = r(t, e[a]),h = parseInt(c, 16);"80" == l && (s.min = h), "81" == l && (s.max = h);}return s;}, this.getExtKeyUsage = function (t, e) {var i = this.getCriticalExtV("keyUsage", t, e);if (t = i[0], e = i[1], null != t) {var n = { extname: "keyUsage" };return e && (n.critical = !0), n.names = this.getExtKeyUsageString(t).split(","), n;}}, this.getExtKeyUsageBin = function (t) {if (void 0 === t) {var e = this.getExtInfo("keyUsage");if (void 0 === e) return "";t = o(this.hex, e.vidx);}if (8 != t.length && 10 != t.length) throw new Error("malformed key usage value: " + t);var i = "000000000000000" + parseInt(t.substr(6), 16).toString(2);return 8 == t.length && (i = i.slice(-8)), 10 == t.length && (i = i.slice(-16)), "" == (i = i.replace(/0+$/, "")) && (i = "0"), i;}, this.getExtKeyUsageString = function (t) {for (var e = this.getExtKeyUsageBin(t), i = new Array(), n = 0; n < e.length; n++) "1" == e.substr(n, 1) && i.push(Yt.KEYUSAGE_NAME[n]);return i.join(",");}, this.getExtSubjectKeyIdentifier = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("subjectKeyIdentifier");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var n = { extname: "subjectKeyIdentifier" };e && (n.critical = !0);var s = r(t, 0);return n.kid = { hex: s }, n;}, this.getExtAuthorityKeyIdentifier = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("authorityKeyIdentifier");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var s = { extname: "authorityKeyIdentifier" };e && (s.critical = !0);for (var a = n(t, 0), l = 0; l < a.length; l++) {var c = t.substr(a[l], 2);if ("80" === c && (s.kid = { hex: r(t, a[l]) }), "a1" === c) {var h = o(t, a[l]),u = this.getGeneralNames(h);s.issuer = u[0].dn;}"82" === c && (s.sn = { hex: r(t, a[l]) });}return s;}, this.getExtExtKeyUsage = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("extKeyUsage");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var s = { extname: "extKeyUsage", array: [] };e && (s.critical = !0);for (var a = n(t, 0), l = 0; l < a.length; l++) s.array.push(g(r(t, a[l])));return s;}, this.getExtExtKeyUsageName = function () {var t = this.getExtInfo("extKeyUsage");if (void 0 === t) return t;var e = new Array(),i = o(this.hex, t.vidx);if ("" === i) return e;for (var s = n(i, 0), a = 0; a < s.length; a++) e.push(g(r(i, s[a])));return e;}, this.getExtSubjectAltName = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("subjectAltName");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var n = { extname: "subjectAltName", array: [] };return e && (n.critical = !0), n.array = this.getGeneralNames(t), n;}, this.getExtIssuerAltName = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("issuerAltName");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var n = { extname: "issuerAltName", array: [] };return e && (n.critical = !0), n.array = this.getGeneralNames(t), n;}, this.getGeneralNames = function (t) {for (var e = n(t, 0), i = [], r = 0; r < e.length; r++) {var s = this.getGeneralName(o(t, e[r]));void 0 !== s && i.push(s);}return i;}, this.getGeneralName = function (t) {var e = t.substr(0, 2),i = r(t, 0),n = xt(i);return "81" == e ? { rfc822: n } : "82" == e ? { dns: n } : "86" == e ? { uri: n } : "87" == e ? { ip: Pt(i) } : "a4" == e ? { dn: this.getX500Name(i) } : "a0" == e ? { other: this.getOtherName(t) } : void 0;}, this.getExtSubjectAltName2 = function () {var t,e,i,s = this.getExtInfo("subjectAltName");if (void 0 === s) return s;for (var a = new Array(), l = o(this.hex, s.vidx), c = n(l, 0), h = 0; h < c.length; h++) i = l.substr(c[h], 2), t = r(l, c[h]), "81" === i && (e = bt(t), a.push(["MAIL", e])), "82" === i && (e = bt(t), a.push(["DNS", e])), "84" === i && (e = Yt.hex2dn(t, 0), a.push(["DN", e])), "86" === i && (e = bt(t), a.push(["URI", e])), "87" === i && (e = Pt(t), a.push(["IP", e]));return a;}, this.getExtCRLDistributionPoints = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("cRLDistributionPoints");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var r = { extname: "cRLDistributionPoints", array: [] };e && (r.critical = !0);for (var s = n(t, 0), a = 0; a < s.length; a++) {var l = o(t, s[a]);r.array.push(this.getDistributionPoint(l));}return r;}, this.getDistributionPoint = function (t) {for (var e = {}, i = n(t, 0), r = 0; r < i.length; r++) {var s = t.substr(i[r], 2),a = o(t, i[r]);"a0" == s && (e.dpname = this.getDistributionPointName(a));}return e;}, this.getDistributionPointName = function (t) {for (var e = {}, i = n(t, 0), r = 0; r < i.length; r++) {var s = t.substr(i[r], 2),a = o(t, i[r]);"a0" == s && (e.full = this.getGeneralNames(a));}return e;}, this.getExtCRLDistributionPointsURI = function () {var t = this.getExtCRLDistributionPoints();if (null == t) return t;for (var e = t.array, i = [], n = 0; n < e.length; n++) try {null != e[n].dpname.full[0].uri && i.push(e[n].dpname.full[0].uri);} catch (t) {}return i;}, this.getExtAIAInfo = function () {var t = this.getExtInfo("authorityInfoAccess");if (void 0 === t) return t;for (var e = { ocsp: [], caissuer: [] }, i = n(this.hex, t.vidx), r = 0; r < i.length; r++) {var s = a(this.hex, i[r], [0], "06"),o = a(this.hex, i[r], [1], "86");"2b06010505073001" === s && e.ocsp.push(bt(o)), "2b06010505073002" === s && e.caissuer.push(bt(o));}return e;}, this.getExtAuthorityInfoAccess = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("authorityInfoAccess");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var r = { extname: "authorityInfoAccess", array: [] };e && (r.critical = !0);for (var s = n(t, 0), c = 0; c < s.length; c++) {var h = l(t, s[c], [0], "06"),u = bt(a(t, s[c], [1], "86"));if ("2b06010505073001" == h) r.array.push({ ocsp: u });else {if ("2b06010505073002" != h) throw new Error("unknown method: " + h);r.array.push({ caissuer: u });}}return r;}, this.getExtCertificatePolicies = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("certificatePolicies");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var r = { extname: "certificatePolicies", array: [] };e && (r.critical = !0);for (var s = n(t, 0), a = 0; a < s.length; a++) {var l = o(t, s[a]),c = this.getPolicyInformation(l);r.array.push(c);}return r;}, this.getPolicyInformation = function (t) {var e = {},i = a(t, 0, [0], "06");e.policyoid = g(i);var r = d(t, 0, [1], "30");if (-1 != r) {e.array = [];for (var s = n(t, r), l = 0; l < s.length; l++) {var c = o(t, s[l]),h = this.getPolicyQualifierInfo(c);e.array.push(h);}}return e;}, this.getOtherName = function (t) {var e = {},i = n(t, 0),r = a(t, i[0], [], "06"),o = a(t, i[1], []);return e.oid = g(r), e.value = s(o), e;}, this.getPolicyQualifierInfo = function (t) {var e = {},i = a(t, 0, [0], "06");if ("2b06010505070201" === i) {var n = l(t, 0, [1], "16");e.cps = xt(n);} else if ("2b06010505070202" === i) {var r = c(t, 0, [1], "30");e.unotice = this.getUserNotice(r);}return e;}, this.getUserNotice = function (t) {var e = null;try {return e = i.parse(t), this._asn1ToUnotice(e);} catch (t) {return;}}, this._asn1ToUnotice = function (t) {try {for (var e = {}, i = qt(t, "seq"), n = 0; n < i.length; n++) {var r = this._asn1ToNoticeRef(i[n]);null != r && (e.noticeref = r);var s = this.asn1ToDisplayText(i[n]);null != s && (e.exptext = s);}return Object.keys(e).length > 0 ? e : void 0;} catch (t) {return;}}, this._asn1ToNoticeRef = function (t) {try {for (var e = {}, i = qt(t, "seq"), n = 0; n < i.length; n++) {var r = this._asn1ToNoticeNum(i[n]);null != r && (e.noticenum = r);var s = this.asn1ToDisplayText(i[n]);null != s && (e.org = s);}return Object.keys(e).length > 0 ? e : void 0;} catch (t) {return;}}, this._asn1ToNoticeNum = function (t) {try {for (var e = qt(t, "seq"), i = [], n = 0; n < e.length; n++) {var r = e[n];i.push(parseInt(qt(r, "int.hex"), 16));}return i;} catch (t) {return;}}, this.getDisplayText = function (t) {var e = {};return e.type = { "0c": "utf8", 16: "ia5", "1a": "vis", "1e": "bmp" }[t.substr(0, 2)], e.str = xt(r(t, 0)), e;}, this.asn1ToDisplayText = function (t) {return null != t.utf8str ? { type: "utf8", str: t.utf8str.str } : null != t.ia5str ? { type: "ia5", str: t.ia5str.str } : null != t.visstr ? { type: "vis", str: t.visstr.str } : null != t.bmpstr ? { type: "bmp", str: t.bmpstr.str } : null != t.prnstr ? { type: "prn", str: t.prnstr.str } : void 0;}, this.getExtPolicyMappings = function (t, e) {var i = this.getCriticalExtV("policyMappings", t, e);if (t = i[0], e = i[1], null != t) {var n = { extname: "policyMappings" };e && (n.critical = !0);try {for (var r = s(t).seq, o = [], a = 0; a < r.length; a++) {var l = r[a].seq;o.push([l[0].oid, l[1].oid]);}n.array = o;} catch (t) {throw new y("malformed policyMappings");}return n;}}, this.getExtPolicyConstraints = function (t, e) {var i = this.getCriticalExtV("policyConstraints", t, e);if (t = i[0], e = i[1], null != t) {var n = { extname: "policyConstraints" };e && (n.critical = !0);var r = s(t);try {for (var o = r.seq, a = 0; a < o.length; a++) {var l = o[a].tag;0 == l.explicit && ("80" == l.tag && (n.reqexp = parseInt(l.hex, 16)), "81" == l.tag && (n.inhibit = parseInt(l.hex, 16)));}} catch (t) {return new y("malformed policyConstraints value");}return n;}}, this.getExtInhibitAnyPolicy = function (t, e) {var i = this.getCriticalExtV("inhibitAnyPolicy", t, e);if (t = i[0], e = i[1], null != t) {var n = { extname: "inhibitAnyPolicy" };e && (n.critical = !0);var r = f(t, 0);return -1 == r ? new y("wrong value") : (n.skip = r, n);}}, this.getExtCRLNumber = function (t, e) {var i = { extname: "cRLNumber" };if (e && (i.critical = !0), "02" == t.substr(0, 2)) return i.num = { hex: r(t, 0) }, i;throw new y("hExtV parse error: " + t);}, this.getExtCRLReason = function (t, e) {var i = { extname: "cRLReason" };if (e && (i.critical = !0), "0a" == t.substr(0, 2)) return i.code = parseInt(r(t, 0), 16), i;throw new Error("hExtV parse error: " + t);}, this.getExtOcspNonce = function (t, e) {var i = { extname: "ocspNonce" };e && (i.critical = !0);var n = r(t, 0);return i.hex = n, i;}, this.getExtOcspNoCheck = function (t, e) {var i = { extname: "ocspNoCheck" };return e && (i.critical = !0), i;}, this.getExtAdobeTimeStamp = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("adobeTimeStamp");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var r = { extname: "adobeTimeStamp" };e && (r.critical = !0);var s = n(t, 0);if (s.length > 1) {var a = o(t, s[1]),l = this.getGeneralName(a);null != l.uri && (r.uri = l.uri);}if (s.length > 2) {var c = o(t, s[2]);"0101ff" == c && (r.reqauth = !0), "010100" == c && (r.reqauth = !1);}return r;}, this.getExtSubjectDirectoryAttributes = function (t, e) {if (void 0 === t && void 0 === e) {var i = this.getExtInfo("subjectDirectoryAttributes");if (void 0 === i) return;t = o(this.hex, i.vidx), e = i.critical;}var n = { extname: "subjectDirectoryAttributes" };e && (n.critical = !0);try {for (var r = s(t), a = [], l = 0; l < r.seq.length; l++) {var c = r.seq[l],h = qt(c, "seq.0.oid"),u = qt(c, "seq.1.set");if (null == h || null == u) throw "error";a.push({ attr: h, array: u });}return n.array = a, n;} catch (t) {throw new Error("malformed subjectDirectoryAttributes extension value");}};var b = function (t) {var e = {};try {var i = t.seq[0].oid,n = lt.asn1.x509.OID.name2oid(i);e.type = lt.asn1.x509.OID.oid2atype(n);var r = t.seq[1];if (null != r.utf8str) e.ds = "utf8", e.value = r.utf8str.str;else if (null != r.numstr) e.ds = "num", e.value = r.numstr.str;else if (null != r.telstr) e.ds = "tel", e.value = r.telstr.str;else if (null != r.prnstr) e.ds = "prn", e.value = r.prnstr.str;else if (null != r.ia5str) e.ds = "ia5", e.value = r.ia5str.str;else if (null != r.visstr) e.ds = "vis", e.value = r.visstr.str;else {if (null == r.bmpstr) throw "error";e.ds = "bmp", e.value = r.bmpstr.str;}return e;} catch (t) {throw new Erorr("improper ASN.1 parsed AttrTypeAndValue");}},w = function (t) {try {return t.set.map(function (t) {return b(t);});} catch (t) {throw new Error("improper ASN.1 parsed RDN: " + t);}};this.getX500NameRule = function (t) {for (var e = null, i = [], n = 0; n < t.length; n++) for (var r = t[n], s = 0; s < r.length; s++) i.push(r[s]);for (n = 0; n < i.length; n++) {var o = i[n],a = o.ds,l = o.value,c = o.type;if ("prn" != a && "utf8" != a && "ia5" != a) return "mixed";if ("ia5" == a) {if ("CN" != c) return "mixed";if (lt.lang.String.isMail(l)) continue;return "mixed";}if ("C" == c) {if ("prn" == a) continue;return "mixed";}if (null == e) e = a;else if (e !== a) return "mixed";}return null == e ? "prn" : e;}, this.getAttrTypeAndValue = function (t) {var e = s(t);return b(e);}, this.getRDN = function (t) {var e = s(t);return w(e);}, this.getX500NameArray = function (t) {return function (t) {try {return t.seq.map(function (t) {return w(t);});} catch (t) {throw new Error("improper ASN.1 parsed X500Name: " + t);}}(s(t));}, this.getX500Name = function (t, e, i) {var n = this.getX500NameArray(t),r = { str: this.dnarraytostr(n) };return r.array = n, 1 == i && (r.hex = t), 1 == e && (r.canon = this.c14nRDNArray(n)), r;}, this.readCertPEM = function (t) {this.readCertHex(v(t));}, this.readCertHex = function (t) {this.hex = t, this.getVersion();try {u(this.hex, 0, [0, 7], "a3"), this.parseExt();} catch (t) {}}, this.getParam = function (t) {var e = {};return null == t && (t = {}), e.version = this.getVersion(), e.serial = { hex: this.getSerialNumberHex() }, e.sigalg = this.getSignatureAlgorithmField(), e.issuer = this.getIssuer(t.dncanon, t.dnhex), e.notbefore = this.getNotBefore(), e.notafter = this.getNotAfter(), e.subject = this.getSubject(t.dncanon, t.dnhex), e.sbjpubkey = Et(this.getPublicKeyHex(), "PUBLIC KEY"), null != this.aExtInfo && this.aExtInfo.length > 0 && (e.ext = this.getExtParamArray()), e.sighex = this.getSignatureValueHex(), 1 == t.tbshex && (e.tbshex = c(this.hex, 0, [0])), 1 == t.nodnarray && (delete e.issuer.array, delete e.subject.array), e;}, this.getExtParamArray = function (t) {null == t && -1 != d(this.hex, 0, [0, "[3]"]) && (t = h(this.hex, 0, [0, "[3]", 0], "30"));for (var e = [], i = n(t, 0), r = 0; r < i.length; r++) {var s = o(t, i[r]),a = this.getExtParam(s);null != a && e.push(a);}return e;}, this.getExtParam = function (t) {var e = n(t, 0).length;if (2 != e && 3 != e) throw new Error("wrong number elements in Extension: " + e + " " + t);var i = m(a(t, 0, [0], "06")),r = !1;3 == e && "0101ff" == c(t, 0, [1]) && (r = !0);var o = c(t, 0, [e - 1, 0]),l = void 0;if ("2.5.29.14" == i ? l = this.getExtSubjectKeyIdentifier(o, r) : "2.5.29.15" == i ? l = this.getExtKeyUsage(o, r) : "2.5.29.17" == i ? l = this.getExtSubjectAltName(o, r) : "2.5.29.18" == i ? l = this.getExtIssuerAltName(o, r) : "2.5.29.19" == i ? l = this.getExtBasicConstraints(o, r) : "2.5.29.30" == i ? l = this.getExtNameConstraints(o, r) : "2.5.29.31" == i ? l = this.getExtCRLDistributionPoints(o, r) : "2.5.29.32" == i ? l = this.getExtCertificatePolicies(o, r) : "2.5.29.33" == i ? l = this.getExtPolicyMappings(o, r) : "2.5.29.35" == i ? l = this.getExtAuthorityKeyIdentifier(o, r) : "2.5.29.36" == i ? l = this.getExtPolicyConstraints(o, r) : "2.5.29.37" == i ? l = this.getExtExtKeyUsage(o, r) : "2.5.29.54" == i ? l = this.getExtInhibitAnyPolicy(o, r) : "1.3.6.1.5.5.7.1.1" == i ? l = this.getExtAuthorityInfoAccess(o, r) : "2.5.29.20" == i ? l = this.getExtCRLNumber(o, r) : "2.5.29.21" == i ? l = this.getExtCRLReason(o, r) : "2.5.29.9" == i ? l = this.getExtSubjectDirectoryAttributes(o, r) : "1.3.6.1.5.5.7.48.1.2" == i ? l = this.getExtOcspNonce(o, r) : "1.3.6.1.5.5.7.48.1.5" == i ? l = this.getExtOcspNoCheck(o, r) : "1.2.840.113583.1.1.9.1" == i ? l = this.getExtAdobeTimeStamp(o, r) : null != Yt.EXT_PARSER[i] && (l = Yt.EXT_PARSER[i](i, r, o)), null != l) return l;var h = { extname: i, extn: o };try {h.extn = s(o);} catch (t) {}return r && (h.critical = !0), h;}, this.findExt = function (t, e) {for (var i = 0; i < t.length; i++) if (t[i].extname == e) return t[i];return null;}, this.updateExtCDPFullURI = function (t, e) {var i = this.findExt(t, "cRLDistributionPoints");if (null != i && null != i.array) for (var n = i.array, r = 0; r < n.length; r++) if (null != n[r].dpname && null != n[r].dpname.full) for (var s = n[r].dpname.full, o = 0; o < s.length; o++) {var a = s[r];null != a.uri && (a.uri = e);}}, this.updateExtAIAOCSP = function (t, e) {var i = this.findExt(t, "authorityInfoAccess");if (null != i && null != i.array) for (var n = i.array, r = 0; r < n.length; r++) null != n[r].ocsp && (n[r].ocsp = e);}, this.updateExtAIACAIssuer = function (t, e) {var i = this.findExt(t, "authorityInfoAccess");if (null != i && null != i.array) for (var n = i.array, r = 0; r < n.length; r++) null != n[r].caissuer && (n[r].caissuer = e);}, this.dnarraytostr = function (t) {return "/" + t.map(function (t) {return function (t) {return t.map(function (t) {return function (t) {return t.type + "=" + t.value;}(t).replace(/\+/, "\\+");}).join("+");}(t).replace(/\//, "\\/");}).join("/");}, this.setCanonicalizedDN = function (t) {var e;if (null != t.str && null == t.array) {var i = new lt.asn1.x509.X500Name({ str: t.str }).tohex();e = this.getX500NameArray(i);} else e = t.array;null == t.canon && (t.canon = this.c14nRDNArray(e));}, this.c14nRDNArray = function (t) {for (var e = [], i = 0; i < t.length; i++) {for (var n = t[i], r = [], s = 0; s < n.length; s++) {var o = n[s],a = o.value;a = (a = (a = (a = a.replace(/^\s*/, "")).replace(/\s*$/, "")).replace(/\s+/g, " ")).toLowerCase(), r.push(o.type.toLowerCase() + "=" + a);}e.push(r.join("+"));}return "/" + e.join("/");}, this.getInfo = function () {var t,e,i,n = function (t) {for (var e = "", i = "    ", n = "\n", r = t.array, s = 0; s < r.length; s++) {var o = r[s];null != o.dn && (e += i + "dn: " + o.dn.str + n), null != o.ip && (e += i + "ip: " + o.ip + n), null != o.rfc822 && (e += i + "rfc822: " + o.rfc822 + n), null != o.dns && (e += i + "dns: " + o.dns + n), null != o.uri && (e += i + "uri: " + o.uri + n), null != o.other && (e += i + "other: " + o.other.oid + "=" + JSON.stringify(o.other.value).replace(/\"/g, "") + n);}return e.replace(/\n$/, "");},r = function (t) {for (var e = "", i = t.array, n = 0; n < i.length; n++) {var r = i[n];if (e += "    policy oid: " + r.policyoid + "\n", void 0 !== r.array) for (var s = 0; s < r.array.length; s++) {var o = r.array[s];void 0 !== o.cps && (e += "    cps: " + o.cps + "\n");}}return e;},s = function (t) {for (var e = "", i = t.array, n = 0; n < i.length; n++) {var r = i[n];try {void 0 !== r.dpname.full[0].uri && (e += "    " + r.dpname.full[0].uri + "\n");} catch (t) {}try {void 0 !== r.dname.full[0].dn.hex && (e += "    " + Yt.hex2dn(r.dpname.full[0].dn.hex) + "\n");} catch (t) {}}return e;},o = function (t) {for (var e = "", i = t.array, n = 0; n < i.length; n++) {var r = i[n];void 0 !== r.caissuer && (e += "    caissuer: " + r.caissuer + "\n"), void 0 !== r.ocsp && (e += "    ocsp: " + r.ocsp + "\n");}return e;};if (t = "Basic Fields\n", t += "  serial number: " + this.getSerialNumberHex() + "\n", t += "  signature algorithm: " + this.getSignatureAlgorithmField() + "\n", t += "  issuer: " + this.getIssuerString() + "\n", t += "  notBefore: " + this.getNotBefore() + "\n", t += "  notAfter: " + this.getNotAfter() + "\n", t += "  subject: " + this.getSubjectString() + "\n", t += "  subject public key info: \n", t += "    key algorithm: " + (e = this.getPublicKey()).type + "\n", "RSA" === e.type && (t += "    n=" + Vt(e.n.toString(16)).substr(0, 16) + "...\n", t += "    e=" + Vt(e.e.toString(16)) + "\n"), null != (i = this.aExtInfo)) {t += "X509v3 Extensions:\n";for (var a = 0; a < i.length; a++) {var l = i[a],c = lt.asn1.x509.OID.oid2name(l.oid);"" === c && (c = l.oid);var h = "";if (!0 === l.critical && (h = "CRITICAL"), t += "  " + c + " " + h + ":\n", "basicConstraints" === c) {var u = this.getExtBasicConstraints();void 0 === u.cA ? t += "    {}\n" : (t += "    cA=true", void 0 !== u.pathLen && (t += ", pathLen=" + u.pathLen), t += "\n");} else {var d;if ("policyMappings" == c) t += "    " + this.getExtPolicyMappings().array.map(function (t) {var e = t;return e[0] + ":" + e[1];}).join(", ") + "\n";else if ("policyConstraints" == c) t += "    ", null != (d = this.getExtPolicyConstraints()).reqexp && (t += " reqexp=" + d.reqexp), null != d.inhibit && (t += " inhibit=" + d.inhibit), t += "\n";else if ("inhibitAnyPolicy" == c) t += "    skip=" + (d = this.getExtInhibitAnyPolicy()).skip + "\n";else if ("keyUsage" == c) t += "    " + this.getExtKeyUsageString() + "\n";else if ("subjectKeyIdentifier" == c) t += "    " + this.getExtSubjectKeyIdentifier().kid.hex + "\n";else if ("authorityKeyIdentifier" == c) {var p = this.getExtAuthorityKeyIdentifier();void 0 !== p.kid && (t += "    kid=" + p.kid.hex + "\n");} else "extKeyUsage" == c ? t += "    " + this.getExtExtKeyUsage().array.join(", ") + "\n" : "subjectAltName" == c ? t += n(this.getExtSubjectAltName()) + "\n" : "cRLDistributionPoints" == c ? t += s(this.getExtCRLDistributionPoints()) : "authorityInfoAccess" == c ? t += o(this.getExtAuthorityInfoAccess()) : "certificatePolicies" == c && (t += r(this.getExtCertificatePolicies()));}}}return (t += "signature algorithm: " + this.getSignatureAlgorithmName() + "\n") + "signature: " + this.getSignatureValueHex().substr(0, 16) + "...\n";}, "string" == typeof t && (-1 != t.indexOf("-----BEGIN") ? this.readCertPEM(t) : lt.lang.String.isHex(t) && this.readCertHex(t));}Gt.getKey = function (t, e, i) {var n,r = (v = ut).getChildIdx,s = (v.getV, v.getVbyList),o = lt.crypto,a = o.ECDSA,l = o.DSA,c = nt,h = Ct,u = Gt;if (void 0 !== c && t instanceof c) return t;if (void 0 !== a && t instanceof a) return t;if (void 0 !== l && t instanceof l) return t;if (void 0 !== t.curve && void 0 !== t.xy && void 0 === t.d) return new a({ pub: t.xy, curve: t.curve });if (void 0 !== t.curve && void 0 !== t.d) return new a({ prv: t.d, curve: t.curve });if (void 0 === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 === t.d) return (_ = new c()).setPublic(t.n, t.e), _;if (void 0 === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 !== t.d && void 0 !== t.p && void 0 !== t.q && void 0 !== t.dp && void 0 !== t.dq && void 0 !== t.co && void 0 === t.qi) return (_ = new c()).setPrivateEx(t.n, t.e, t.d, t.p, t.q, t.dp, t.dq, t.co), _;if (void 0 === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 !== t.d && void 0 === t.p) return (_ = new c()).setPrivate(t.n, t.e, t.d), _;if (void 0 !== t.p && void 0 !== t.q && void 0 !== t.g && void 0 !== t.y && void 0 === t.x) return (_ = new l()).setPublic(t.p, t.q, t.g, t.y), _;if (void 0 !== t.p && void 0 !== t.q && void 0 !== t.g && void 0 !== t.y && void 0 !== t.x) return (_ = new l()).setPrivate(t.p, t.q, t.g, t.y, t.x), _;if ("RSA" === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 === t.d) return (_ = new c()).setPublic(vt(t.n), vt(t.e)), _;if ("RSA" === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 !== t.d && void 0 !== t.p && void 0 !== t.q && void 0 !== t.dp && void 0 !== t.dq && void 0 !== t.qi) return (_ = new c()).setPrivateEx(vt(t.n), vt(t.e), vt(t.d), vt(t.p), vt(t.q), vt(t.dp), vt(t.dq), vt(t.qi)), _;if ("RSA" === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 !== t.d) return (_ = new c()).setPrivate(vt(t.n), vt(t.e), vt(t.d)), _;if ("EC" === t.kty && void 0 !== t.crv && void 0 !== t.x && void 0 !== t.y && void 0 === t.d) {var d = (M = new a({ curve: t.crv })).ecparams.keycharlen,p = "04" + ("0000000000" + vt(t.x)).slice(-d) + ("0000000000" + vt(t.y)).slice(-d);return M.setPublicKeyHex(p), M;}if ("EC" === t.kty && void 0 !== t.crv && void 0 !== t.x && void 0 !== t.y && void 0 !== t.d) {d = (M = new a({ curve: t.crv })).ecparams.keycharlen, p = "04" + ("0000000000" + vt(t.x)).slice(-d) + ("0000000000" + vt(t.y)).slice(-d);var f = ("0000000000" + vt(t.d)).slice(-d);return M.setPublicKeyHex(p), M.setPrivateKeyHex(f), M;}if ("pkcs5prv" === i) {var g,m = t,v = ut;if (9 === (g = r(m, 0)).length) (_ = new c()).readPKCS5PrvKeyHex(m);else if (6 === g.length) (_ = new l()).readPKCS5PrvKeyHex(m);else {if (!(g.length > 2 && "04" === m.substr(g[1], 2))) throw new Error("unsupported PKCS#1/5 hexadecimal key");(_ = new a()).readPKCS5PrvKeyHex(m);}return _;}if ("pkcs8prv" === i) return u.getKeyFromPlainPrivatePKCS8Hex(t);if ("pkcs8pub" === i) return u._getKeyFromPublicPKCS8Hex(t);if ("x509pub" === i) return Yt.getPublicKeyFromCertHex(t);if (-1 != t.indexOf("-END CERTIFICATE-", 0) || -1 != t.indexOf("-END X509 CERTIFICATE-", 0) || -1 != t.indexOf("-END TRUSTED CERTIFICATE-", 0)) return Yt.getPublicKeyFromCertPEM(t);if (-1 != t.indexOf("-END PUBLIC KEY-")) {var y = Ct(t, "PUBLIC KEY");return u._getKeyFromPublicPKCS8Hex(y);}if (-1 != t.indexOf("-END RSA PRIVATE KEY-") && -1 == t.indexOf("4,ENCRYPTED")) {var b = h(t, "RSA PRIVATE KEY");return u.getKey(b, null, "pkcs5prv");}if (-1 != t.indexOf("-END DSA PRIVATE KEY-") && -1 == t.indexOf("4,ENCRYPTED")) {var w = s(n = h(t, "DSA PRIVATE KEY"), 0, [1], "02"),x = s(n, 0, [2], "02"),E = s(n, 0, [3], "02"),C = s(n, 0, [4], "02"),k = s(n, 0, [5], "02");return (_ = new l()).setPrivate(new S(w, 16), new S(x, 16), new S(E, 16), new S(C, 16), new S(k, 16)), _;}if (-1 != t.indexOf("-END EC PRIVATE KEY-") && -1 == t.indexOf("4,ENCRYPTED")) return b = h(t, "EC PRIVATE KEY"), u.getKey(b, null, "pkcs5prv");if (-1 != t.indexOf("-END PRIVATE KEY-")) return u.getKeyFromPlainPrivatePKCS8PEM(t);if (-1 != t.indexOf("-END RSA PRIVATE KEY-") && -1 != t.indexOf("4,ENCRYPTED")) {var T = u.getDecryptedKeyHex(t, e),A = new nt();return A.readPKCS5PrvKeyHex(T), A;}if (-1 != t.indexOf("-END EC PRIVATE KEY-") && -1 != t.indexOf("4,ENCRYPTED")) {var M,_ = s(n = u.getDecryptedKeyHex(t, e), 0, [1], "04"),P = s(n, 0, [2, 0], "06"),D = s(n, 0, [3, 0], "03").substr(2);if (void 0 === lt.crypto.OID.oidhex2name[P]) throw new Error("undefined OID(hex) in KJUR.crypto.OID: " + P);return (M = new a({ curve: lt.crypto.OID.oidhex2name[P] })).setPublicKeyHex(D), M.setPrivateKeyHex(_), M.isPublic = !1, M;}if (-1 != t.indexOf("-END DSA PRIVATE KEY-") && -1 != t.indexOf("4,ENCRYPTED")) return w = s(n = u.getDecryptedKeyHex(t, e), 0, [1], "02"), x = s(n, 0, [2], "02"), E = s(n, 0, [3], "02"), C = s(n, 0, [4], "02"), k = s(n, 0, [5], "02"), (_ = new l()).setPrivate(new S(w, 16), new S(x, 16), new S(E, 16), new S(C, 16), new S(k, 16)), _;if (-1 != t.indexOf("-END ENCRYPTED PRIVATE KEY-")) return u.getKeyFromEncryptedPKCS8PEM(t, e);throw new Error("not supported argument");}, Gt.generateKeypair = function (t, e) {if ("RSA" == t) {var i = e;(o = new nt()).generate(i, "10001"), o.isPrivate = !0, o.isPublic = !0;var n = new nt(),r = o.n.toString(16),s = o.e.toString(16);return n.setPublic(r, s), n.isPrivate = !1, n.isPublic = !0, (a = {}).prvKeyObj = o, a.pubKeyObj = n, a;}if ("EC" == t) {var o,a,l = e,c = new lt.crypto.ECDSA({ curve: l }).generateKeyPairHex();return (o = new lt.crypto.ECDSA({ curve: l })).setPublicKeyHex(c.ecpubhex), o.setPrivateKeyHex(c.ecprvhex), o.isPrivate = !0, o.isPublic = !1, (n = new lt.crypto.ECDSA({ curve: l })).setPublicKeyHex(c.ecpubhex), n.isPrivate = !1, n.isPublic = !0, (a = {}).prvKeyObj = o, a.pubKeyObj = n, a;}throw new Error("unknown algorithm: " + t);}, Gt.getPEM = function (t, e, i, n, r, s) {var o = lt,a = o.asn1,l = a.DERObjectIdentifier,c = a.DERInteger,h = a.ASN1Util.newObject,u = a.x509.SubjectPublicKeyInfo,d = o.crypto,p = d.DSA,f = d.ECDSA,g = nt;function m(t) {return h({ seq: [{ int: 0 }, { int: { bigint: t.n } }, { int: t.e }, { int: { bigint: t.d } }, { int: { bigint: t.p } }, { int: { bigint: t.q } }, { int: { bigint: t.dmp1 } }, { int: { bigint: t.dmq1 } }, { int: { bigint: t.coeff } }] });}function v(t) {return h({ seq: [{ int: 1 }, { octstr: { hex: t.prvKeyHex } }, { tag: ["a0", !0, { oid: { name: t.curveName } }] }, { tag: ["a1", !0, { bitstr: { hex: "00" + t.pubKeyHex } }] }] });}function y(t) {return h({ seq: [{ int: 0 }, { int: { bigint: t.p } }, { int: { bigint: t.q } }, { int: { bigint: t.g } }, { int: { bigint: t.y } }, { int: { bigint: t.x } }] });}if ((void 0 !== g && t instanceof g || void 0 !== p && t instanceof p || void 0 !== f && t instanceof f) && 1 == t.isPublic && (void 0 === e || "PKCS8PUB" == e)) return Et(S = new u(t).tohex(), "PUBLIC KEY");if ("PKCS1PRV" == e && void 0 !== g && t instanceof g && (void 0 === i || null == i) && 1 == t.isPrivate) return Et(S = m(t).tohex(), "RSA PRIVATE KEY");if ("PKCS1PRV" == e && void 0 !== f && t instanceof f && (void 0 === i || null == i) && 1 == t.isPrivate) {var b = new l({ name: t.curveName }).tohex(),w = v(t).tohex(),x = "";return (x += Et(b, "EC PARAMETERS")) + Et(w, "EC PRIVATE KEY");}if ("PKCS1PRV" == e && void 0 !== p && t instanceof p && (void 0 === i || null == i) && 1 == t.isPrivate) return Et(S = y(t).tohex(), "DSA PRIVATE KEY");if ("PKCS5PRV" == e && void 0 !== g && t instanceof g && void 0 !== i && null != i && 1 == t.isPrivate) {var S = m(t).tohex();return void 0 === n && (n = "DES-EDE3-CBC"), this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA", S, i, n, s);}if ("PKCS5PRV" == e && void 0 !== f && t instanceof f && void 0 !== i && null != i && 1 == t.isPrivate) return S = v(t).tohex(), void 0 === n && (n = "DES-EDE3-CBC"), this.getEncryptedPKCS5PEMFromPrvKeyHex("EC", S, i, n, s);if ("PKCS5PRV" == e && void 0 !== p && t instanceof p && void 0 !== i && null != i && 1 == t.isPrivate) return S = y(t).tohex(), void 0 === n && (n = "DES-EDE3-CBC"), this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA", S, i, n, s);var E = function (t, e) {if ("string" == typeof e) return Gt.getEncryptedPKCS8PEM(t, e);if ("object" == typeof e && null != qt(e, "passcode")) {var i = JSON.parse(JSON.stringify(e)),n = i.passcode;return delete i.passcode, Gt.getEncryptedPKCS8PEM(t, n, i);}};if ("PKCS8PRV" == e && null != g && t instanceof g && 1 == t.isPrivate) {var C = m(t).tohex();return S = h({ seq: [{ int: 0 }, { seq: [{ oid: { name: "rsaEncryption" } }, { null: !0 }] }, { octstr: { hex: C } }] }).tohex(), void 0 === i || null == i ? Et(S, "PRIVATE KEY") : E(S, i);}if ("PKCS8PRV" == e && void 0 !== f && t instanceof f && 1 == t.isPrivate) {var k = { seq: [{ int: 1 }, { octstr: { hex: t.prvKeyHex } }] };return "string" == typeof t.pubKeyHex && k.seq.push({ tag: ["a1", !0, { bitstr: { hex: "00" + t.pubKeyHex } }] }), C = new h(k).tohex(), S = h({ seq: [{ int: 0 }, { seq: [{ oid: { name: "ecPublicKey" } }, { oid: { name: t.curveName } }] }, { octstr: { hex: C } }] }).tohex(), void 0 === i || null == i ? Et(S, "PRIVATE KEY") : E(S, i);}if ("PKCS8PRV" == e && void 0 !== p && t instanceof p && 1 == t.isPrivate) return C = new c({ bigint: t.x }).tohex(), S = h({ seq: [{ int: 0 }, { seq: [{ oid: { name: "dsa" } }, { seq: [{ int: { bigint: t.p } }, { int: { bigint: t.q } }, { int: { bigint: t.g } }] }] }, { octstr: { hex: C } }] }).tohex(), void 0 === i || null == i ? Et(S, "PRIVATE KEY") : E(S, i);throw new Error("unsupported object nor format");}, Gt.getKeyFromCSRPEM = function (t) {var e = Ct(t, "CERTIFICATE REQUEST");return Gt.getKeyFromCSRHex(e);}, Gt.getKeyFromCSRHex = function (t) {var e = Gt.parseCSRHex(t);return Gt.getKey(e.p8pubkeyhex, null, "pkcs8pub");}, Gt.parseCSRHex = function (t) {var e = ut,i = e.getChildIdx,n = e.getTLV,r = {},s = t;if ("30" != s.substr(0, 2)) throw new Error("malformed CSR(code:001)");var o = i(s, 0);if (o.length < 1) throw new Error("malformed CSR(code:002)");if ("30" != s.substr(o[0], 2)) throw new Error("malformed CSR(code:003)");var a = i(s, o[0]);if (a.length < 3) throw new Error("malformed CSR(code:004)");return r.p8pubkeyhex = n(s, a[2]), r;}, Gt.getKeyID = function (t) {var e = Gt,i = ut;"string" == typeof t && -1 != t.indexOf("BEGIN ") && (t = e.getKey(t));var n = Ct(e.getPEM(t)),r = i.getIdxbyList(n, 0, [1]),s = i.getV(n, r).substring(2);return lt.crypto.Util.hashHex(s, "sha1");}, Gt.getJWK = function (t, e, i, n, r) {var s,o,a = {},l = lt.crypto.Util.hashHex;if ("string" == typeof t) s = Gt.getKey(t), -1 != t.indexOf("CERTIFICATE") && (o = Ct(t));else {if ("object" != typeof t) throw new Error("unsupported keyinfo type");t instanceof Yt ? (s = t.getPublicKey(), o = t.hex) : s = t;}if (s instanceof nt && s.isPrivate) a.kty = "RSA", a.n = mt(s.n.toString(16)), a.e = mt(s.e.toString(16)), a.d = mt(s.d.toString(16)), a.p = mt(s.p.toString(16)), a.q = mt(s.q.toString(16)), a.dp = mt(s.dmp1.toString(16)), a.dq = mt(s.dmq1.toString(16)), a.qi = mt(s.coeff.toString(16));else if (s instanceof nt && s.isPublic) a.kty = "RSA", a.n = mt(s.n.toString(16)), a.e = mt(s.e.toString(16));else if (s instanceof lt.crypto.ECDSA && s.isPrivate) {if ("P-256" !== (h = s.getShortNISTPCurveName()) && "P-384" !== h && "P-521" !== h) throw new Error("unsupported curve name for JWT: " + h);var c = s.getPublicKeyXYHex();a.kty = "EC", a.crv = h, a.x = mt(c.x), a.y = mt(c.y), a.d = mt(s.prvKeyHex);} else if (s instanceof lt.crypto.ECDSA && s.isPublic) {var h;if ("P-256" !== (h = s.getShortNISTPCurveName()) && "P-384" !== h && "P-521" !== h) throw new Error("unsupported curve name for JWT: " + h);c = s.getPublicKeyXYHex(), a.kty = "EC", a.crv = h, a.x = mt(c.x), a.y = mt(c.y);}if (null == a.kty) throw new Error("unsupported keyinfo");return s.isPrivate || 1 == e || (a.kid = lt.jws.JWS.getJWKthumbprint(a)), null != o && 1 != i && (a.x5c = [w(o)]), null != o && 1 != n && (a.x5t = ft(w(l(o, "sha1")))), null != o && 1 != r && (a["x5t#S256"] = ft(w(l(o, "sha256")))), a;}, Gt.getJWKFromKey = function (t) {return Gt.getJWK(t, !0, !0, !0, !0);}, nt.getPosArrayOfChildrenFromHex = function (t) {return ut.getChildIdx(t, 0);}, nt.getHexValueArrayOfChildrenFromHex = function (t) {var e,i = ut.getV,n = i(t, (e = nt.getPosArrayOfChildrenFromHex(t))[0]),r = i(t, e[1]),s = i(t, e[2]),o = i(t, e[3]),a = i(t, e[4]),l = i(t, e[5]),c = i(t, e[6]),h = i(t, e[7]),u = i(t, e[8]);return (e = new Array()).push(n, r, s, o, a, l, c, h, u), e;}, nt.prototype.readPrivateKeyFromPEMString = function (t) {var e = Ct(t),i = nt.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(i[1], i[2], i[3], i[4], i[5], i[6], i[7], i[8]);}, nt.prototype.readPKCS5PrvKeyHex = function (t) {var e = nt.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]);}, nt.prototype.readPKCS8PrvKeyHex = function (t) {var e,i,n,r,s,o,a,l,c = ut,h = c.getVbyListEx;if (!1 === c.isASN1HEX(t)) throw new Error("not ASN.1 hex string");try {e = h(t, 0, [2, 0, 1], "02"), i = h(t, 0, [2, 0, 2], "02"), n = h(t, 0, [2, 0, 3], "02"), r = h(t, 0, [2, 0, 4], "02"), s = h(t, 0, [2, 0, 5], "02"), o = h(t, 0, [2, 0, 6], "02"), a = h(t, 0, [2, 0, 7], "02"), l = h(t, 0, [2, 0, 8], "02");} catch (t) {throw new Error("malformed PKCS#8 plain RSA private key");}this.setPrivateEx(e, i, n, r, s, o, a, l);}, nt.prototype.readPKCS5PubKeyHex = function (t) {var e = ut,i = e.getV;if (!1 === e.isASN1HEX(t)) throw new Error("keyHex is not ASN.1 hex string");var n = e.getChildIdx(t, 0);if (2 !== n.length || "02" !== t.substr(n[0], 2) || "02" !== t.substr(n[1], 2)) throw new Error("wrong hex for PKCS#5 public key");var r = i(t, n[0]),s = i(t, n[1]);this.setPublic(r, s);}, nt.prototype.readPKCS8PubKeyHex = function (t) {var e = ut;if (!1 === e.isASN1HEX(t)) throw new Error("not ASN.1 hex string");if ("06092a864886f70d010101" !== e.getTLVbyListEx(t, 0, [0, 0])) throw new Error("not PKCS8 RSA public key");var i = e.getTLVbyListEx(t, 0, [1, 0]);this.readPKCS5PubKeyHex(i);}, nt.prototype.readCertPubKeyHex = function (t, e) {var i, n;(i = new Yt()).readCertHex(t), n = i.getPublicKeyHex(), this.readPKCS8PubKeyHex(n);}, nt.prototype.sign = function (t, e) {var i = function (t) {return lt.crypto.Util.hashString(t, e);}(t);return this.signWithMessageHash(i, e);}, nt.prototype.signWithMessageHash = function (t, e) {var i = it(lt.crypto.Util.getPaddedDigestInfoHex(t, e, this.n.bitLength()), 16);return Wt(this.doPrivate(i).toString(16), this.n.bitLength());}, nt.prototype.signPSS = function (t, e, i) {var n,r = (n = St(t), lt.crypto.Util.hashHex(n, e));return void 0 === i && (i = -1), this.signWithMessageHashPSS(r, e, i);}, nt.prototype.signWithMessageHashPSS = function (t, e, i) {var n,r = xt(t),s = r.length,o = this.n.bitLength() - 1,a = Math.ceil(o / 8),l = function (t) {return lt.crypto.Util.hashHex(t, e);};if (-1 === i || void 0 === i) i = s;else if (-2 === i) i = a - s - 2;else if (i < -2) throw new Error("invalid salt length");if (a < s + i + 2) throw new Error("data too long");var c = "";i > 0 && (c = new Array(i), new et().nextBytes(c), c = String.fromCharCode.apply(String, c));var h = xt(l(St("\0\0\0\0\0\0\0\0" + r + c))),u = [];for (n = 0; n < a - i - s - 2; n += 1) u[n] = 0;var d = String.fromCharCode.apply(String, u) + "" + c,p = Kt(h, d.length, l),f = [];for (n = 0; n < d.length; n += 1) f[n] = d.charCodeAt(n) ^ p.charCodeAt(n);var g = 65280 >> 8 * a - o & 255;for (f[0] &= ~g, n = 0; n < s; n++) f.push(h.charCodeAt(n));return f.push(188), Wt(this.doPrivate(new S(f)).toString(16), this.n.bitLength());}, nt.prototype.verify = function (t, e) {if (null == (e = e.toLowerCase()).match(/^[0-9a-f]+$/)) return !1;var i = it(e, 16),n = this.n.bitLength();if (i.bitLength() > n) return !1;var r = this.doPublic(i).toString(16);if (r.length + 3 != n / 4) return !1;var s = Zt(r.replace(/^1f+00/, ""));if (0 == s.length) return !1;var o = s[0],a = s[1],l = function (t) {return lt.crypto.Util.hashString(t, o);}(t);return a == l;}, nt.prototype.verifyWithMessageHash = function (t, e) {if (e.length != Math.ceil(this.n.bitLength() / 4)) return !1;var i = it(e, 16);if (i.bitLength() > this.n.bitLength()) return 0;var n = Zt(this.doPublic(i).toString(16).replace(/^1f+00/, ""));return 0 != n.length && (n[0], n[1] == t);}, nt.prototype.verifyPSS = function (t, e, i, n) {var r,s = (r = St(t), lt.crypto.Util.hashHex(r, i));return void 0 === n && (n = -1), this.verifyWithMessageHashPSS(s, e, i, n);}, nt.prototype.verifyWithMessageHashPSS = function (t, e, i, n) {if (e.length != Math.ceil(this.n.bitLength() / 4)) return !1;var r,s = new S(e, 16),o = function (t) {return lt.crypto.Util.hashHex(t, i);},a = xt(t),l = a.length,c = this.n.bitLength() - 1,h = Math.ceil(c / 8);if (-1 === n || void 0 === n) n = l;else if (-2 === n) n = h - l - 2;else if (n < -2) throw new Error("invalid salt length");if (h < l + n + 2) throw new Error("data too long");var u = this.doPublic(s).toByteArray();for (r = 0; r < u.length; r += 1) u[r] &= 255;for (; u.length < h;) u.unshift(0);if (188 !== u[h - 1]) throw new Error("encoded message does not end in 0xbc");var d = (u = String.fromCharCode.apply(String, u)).substr(0, h - l - 1),p = u.substr(d.length, l),f = 65280 >> 8 * h - c & 255;if (0 !== (d.charCodeAt(0) & f)) throw new Error("bits beyond keysize not zero");var g = Kt(p, d.length, o),m = [];for (r = 0; r < d.length; r += 1) m[r] = d.charCodeAt(r) ^ g.charCodeAt(r);m[0] &= ~f;var v = h - l - n - 2;for (r = 0; r < v; r += 1) if (0 !== m[r]) throw new Error("leftmost octets not zero");if (1 !== m[v]) throw new Error("0x01 marker not found");return p === xt(o(St("\0\0\0\0\0\0\0\0" + a + String.fromCharCode.apply(String, m.slice(-n)))));}, nt.SALT_LEN_HLEN = -1, nt.SALT_LEN_MAX = -2, nt.SALT_LEN_RECOVER = -2, Yt.EXT_PARSER = {}, Yt.registExtParser = function (t, e) {Yt.EXT_PARSER[t] = e;}, Yt.hex2dn = function (t, e) {void 0 === e && (e = 0);var i = new Yt();return ut.getTLV(t, e), i.getX500Name(t).str;}, Yt.hex2rdn = function (t, e) {if (void 0 === e && (e = 0), "31" !== t.substr(e, 2)) throw new Error("malformed RDN");for (var i = new Array(), n = ut.getChildIdx(t, e), r = 0; r < n.length; r++) i.push(Yt.hex2attrTypeValue(t, n[r]));return i = i.map(function (t) {return t.replace("+", "\\+");}), i.join("+");}, Yt.hex2attrTypeValue = function (t, e) {var i = ut,n = i.getV;if (void 0 === e && (e = 0), "30" !== t.substr(e, 2)) throw new Error("malformed attribute type and value");var r = i.getChildIdx(t, e);2 !== r.length || t.substr(r[0], 2);var s = n(t, r[0]),o = lt.asn1.ASN1Util.oidHexToInt(s);return lt.asn1.x509.OID.oid2atype(o) + "=" + xt(n(t, r[1]));}, Yt.getPublicKeyFromCertHex = function (t) {var e = new Yt();return e.readCertHex(t), e.getPublicKey();}, Yt.getPublicKeyFromCertPEM = function (t) {var e = new Yt();return e.readCertPEM(t), e.getPublicKey();}, Yt.getPublicKeyInfoPropOfCertPEM = function (t) {var e,i,n = ut.getVbyList,r = { algparam: null };return (e = new Yt()).readCertPEM(t), i = e.getPublicKeyHex(), r.keyhex = n(i, 0, [1], "03").substr(2), r.algoid = n(i, 0, [0, 0], "06"), "2a8648ce3d0201" === r.algoid && (r.algparam = n(i, 0, [0, 1], "06")), r;}, Yt.KEYUSAGE_NAME = ["digitalSignature", "nonRepudiation", "keyEncipherment", "dataEncipherment", "keyAgreement", "keyCertSign", "cRLSign", "encipherOnly", "decipherOnly"], void 0 !== lt && lt || (lt = {}), void 0 !== lt.jws && lt.jws || (lt.jws = {}), lt.jws.JWS = function () {var t = lt.jws.JWS.isSafeJSONString;this.parseJWS = function (e, i) {if (void 0 === this.parsedJWS || !i && void 0 === this.parsedJWS.sigvalH) {var n = e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if (null == n) throw "JWS signature is not a form of 'Head.Payload.SigValue'.";var r = n[1],s = n[2],o = n[3],a = r + "." + s;if (this.parsedJWS = {}, this.parsedJWS.headB64U = r, this.parsedJWS.payloadB64U = s, this.parsedJWS.sigvalB64U = o, this.parsedJWS.si = a, !i) {var l = vt(o),c = it(l, 16);this.parsedJWS.sigvalH = l, this.parsedJWS.sigvalBI = c;}var h = ht(r),u = ht(s);if (this.parsedJWS.headS = h, this.parsedJWS.payloadS = u, !t(h, this.parsedJWS, "headP")) throw "malformed JSON string for JWS Head: " + h;}};}, lt.jws.JWS.sign = function (t, e, i, n, r) {var s,o,a,l = lt,c = l.jws.JWS,h = c.readSafeJSONString,u = c.isSafeJSONString,d = l.crypto,p = (d.ECDSA, d.Mac),f = d.Signature,g = JSON;if ("string" != typeof e && "object" != typeof e) throw "spHeader must be JSON string or object: " + e;if ("object" == typeof e && (o = e, s = g.stringify(o)), "string" == typeof e) {if (!u(s = e)) throw "JWS Head is not safe JSON string: " + s;o = h(s);}if (a = i, "object" == typeof i && (a = g.stringify(i)), "" != t && null != t || void 0 === o.alg || (t = o.alg), "" != t && null != t && void 0 === o.alg && (o.alg = t, s = g.stringify(o)), t !== o.alg) throw "alg and sHeader.alg doesn't match: " + t + "!=" + o.alg;var m = null;if (void 0 === c.jwsalg2sigalg[t]) throw "unsupported alg name: " + t;m = c.jwsalg2sigalg[t];var v = ct(s) + "." + ct(a),y = "";if ("Hmac" == m.substr(0, 4)) {if (void 0 === n) throw "mac key shall be specified for HS* alg";var b = new p({ alg: m, prov: "cryptojs", pass: n });b.updateString(v), y = b.doFinal();} else if (-1 != m.indexOf("withECDSA")) {(x = new f({ alg: m })).init(n, r), x.updateString(v);var w = x.sign();y = lt.crypto.ECDSA.asn1SigToConcatSig(w);} else {var x;"none" != m && ((x = new f({ alg: m })).init(n, r), x.updateString(v), y = x.sign());}return v + "." + mt(y);}, lt.jws.JWS.verify = function (t, e, i) {var n,r = lt,s = r.jws.JWS,o = s.readSafeJSONString,a = r.crypto,l = a.ECDSA,c = a.Mac,h = a.Signature;if (n = nt, !Nt(t)) return !1;var u = t.split(".");if (3 !== u.length) return !1;var d,p = u[0] + "." + u[1],f = vt(u[2]),g = o(ht(u[0])),m = null;if (void 0 === g.alg) throw "algorithm not specified in header";if (d = (m = g.alg).substr(0, 2), null != i && "[object Array]" === Object.prototype.toString.call(i) && i.length > 0 && -1 == (":" + i.join(":") + ":").indexOf(":" + m + ":")) throw "algorithm '" + m + "' not accepted in the list";if ("none" != m && null === e) throw "key shall be specified to verify.";if ("string" == typeof e && -1 != e.indexOf("-----BEGIN ") && (e = Gt.getKey(e)), !("RS" != d && "PS" != d || e instanceof n)) throw "key shall be a RSAKey obj for RS* and PS* algs";if ("ES" == d && !(e instanceof l)) throw "key shall be a ECDSA obj for ES* algs";var v = null;if (void 0 === s.jwsalg2sigalg[g.alg]) throw "unsupported alg name: " + m;if ("none" == (v = s.jwsalg2sigalg[m])) throw "not supported";if ("Hmac" == v.substr(0, 4)) {if (void 0 === e) throw "hexadecimal key shall be specified for HMAC";var y = new c({ alg: v, pass: e });return y.updateString(p), f == y.doFinal();}if (-1 != v.indexOf("withECDSA")) {var b,w = null;try {w = l.concatSigToASN1Sig(f);} catch (t) {return !1;}return (b = new h({ alg: v })).init(e), b.updateString(p), b.verify(w);}return (b = new h({ alg: v })).init(e), b.updateString(p), b.verify(f);}, lt.jws.JWS.parse = function (t) {var e,i,n,r = t.split("."),s = {};if (2 != r.length && 3 != r.length) throw "malformed sJWS: wrong number of '.' splitted elements";return e = r[0], i = r[1], 3 == r.length && (n = r[2]), s.headerObj = lt.jws.JWS.readSafeJSONString(ht(e)), s.payloadObj = lt.jws.JWS.readSafeJSONString(ht(i)), s.headerPP = JSON.stringify(s.headerObj, null, "  "), null == s.payloadObj ? s.payloadPP = ht(i) : s.payloadPP = JSON.stringify(s.payloadObj, null, "  "), void 0 !== n && (s.sigHex = vt(n)), s;}, lt.jws.JWS.verifyJWT = function (t, e, i) {var n = lt.jws,r = n.JWS,s = r.readSafeJSONString,o = r.inArray,a = r.includedArray;if (!Nt(t)) return !1;var l = t.split(".");if (3 != l.length) return !1;var c = l[0],h = l[1],u = (vt(l[2]), s(ht(c))),d = s(ht(h));if (void 0 === u.alg) return !1;if (void 0 === i.alg) throw "acceptField.alg shall be specified";if (!o(u.alg, i.alg)) return !1;if (void 0 !== d.iss && "object" == typeof i.iss && !o(d.iss, i.iss)) return !1;if (void 0 !== d.sub && "object" == typeof i.sub && !o(d.sub, i.sub)) return !1;if (void 0 !== d.aud && "object" == typeof i.aud) if ("string" == typeof d.aud) {if (!o(d.aud, i.aud)) return !1;} else if ("object" == typeof d.aud && !a(d.aud, i.aud)) return !1;var p = n.IntDate.getNow();return void 0 !== i.verifyAt && "number" == typeof i.verifyAt && (p = i.verifyAt), void 0 !== i.gracePeriod && "number" == typeof i.gracePeriod || (i.gracePeriod = 0), !(void 0 !== d.exp && "number" == typeof d.exp && d.exp + i.gracePeriod < p || void 0 !== d.nbf && "number" == typeof d.nbf && p < d.nbf - i.gracePeriod || void 0 !== d.iat && "number" == typeof d.iat && p < d.iat - i.gracePeriod || void 0 !== d.jti && void 0 !== i.jti && d.jti !== i.jti || !r.verify(t, e, i.alg));}, lt.jws.JWS.includedArray = function (t, e) {var i = lt.jws.JWS.inArray;if (null === t) return !1;if ("object" != typeof t) return !1;if ("number" != typeof t.length) return !1;for (var n = 0; n < t.length; n++) if (!i(t[n], e)) return !1;return !0;}, lt.jws.JWS.inArray = function (t, e) {if (null === e) return !1;if ("object" != typeof e) return !1;if ("number" != typeof e.length) return !1;for (var i = 0; i < e.length; i++) if (e[i] == t) return !0;return !1;}, lt.jws.JWS.jwsalg2sigalg = { HS256: "HmacSHA256", HS384: "HmacSHA384", HS512: "HmacSHA512", RS256: "SHA256withRSA", RS384: "SHA384withRSA", RS512: "SHA512withRSA", ES256: "SHA256withECDSA", ES384: "SHA384withECDSA", ES512: "SHA512withECDSA", PS256: "SHA256withRSAandMGF1", PS384: "SHA384withRSAandMGF1", PS512: "SHA512withRSAandMGF1", none: "none" }, lt.jws.JWS.isSafeJSONString = function (t, e, i) {var n = null;try {return "object" != typeof (n = at(t)) || n.constructor === Array ? 0 : (e && (e[i] = n), 1);} catch (t) {return 0;}}, lt.jws.JWS.readSafeJSONString = function (t) {var e = null;try {return "object" != typeof (e = at(t)) || e.constructor === Array ? null : e;} catch (t) {return null;}}, lt.jws.JWS.getEncodedSignatureValueFromJWS = function (t) {var e = t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if (null == e) throw "JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1];}, lt.jws.JWS.getJWKthumbprint = function (t) {if ("RSA" !== t.kty && "EC" !== t.kty && "oct" !== t.kty) throw "unsupported algorithm for JWK Thumprint";var e = "{";if ("RSA" === t.kty) {if ("string" != typeof t.n || "string" != typeof t.e) throw "wrong n and e value for RSA key";e += '"e":"' + t.e + '",', e += '"kty":"' + t.kty + '",', e += '"n":"' + t.n + '"}';} else if ("EC" === t.kty) {if ("string" != typeof t.crv || "string" != typeof t.x || "string" != typeof t.y) throw "wrong crv, x and y value for EC key";e += '"crv":"' + t.crv + '",', e += '"kty":"' + t.kty + '",', e += '"x":"' + t.x + '",', e += '"y":"' + t.y + '"}';} else if ("oct" === t.kty) {if ("string" != typeof t.k) throw "wrong k value for oct(symmetric) key";e += '"kty":"' + t.kty + '",', e += '"k":"' + t.k + '"}';}var i = St(e);return mt(lt.crypto.Util.hashHex(i, "sha256"));}, lt.jws.IntDate = {}, lt.jws.IntDate.get = function (t) {var e = lt.jws.IntDate,i = e.getNow,n = e.getZulu;if ("now" == t) return i();if ("now + 1hour" == t) return i() + 3600;if ("now + 1day" == t) return i() + 86400;if ("now + 1month" == t) return i() + 2592e3;if ("now + 1year" == t) return i() + 31536e3;if (t.match(/Z$/)) return n(t);if (t.match(/^[0-9]+$/)) return parseInt(t);throw "unsupported format: " + t;}, lt.jws.IntDate.getZulu = function (t) {return kt(t);}, lt.jws.IntDate.getNow = function () {return ~~(new Date() / 1e3);}, lt.jws.IntDate.intDate2UTCString = function (t) {return new Date(1e3 * t).toUTCString();}, lt.jws.IntDate.intDate2Zulu = function (t) {var e = new Date(1e3 * t);return ("0000" + e.getUTCFullYear()).slice(-4) + ("00" + (e.getUTCMonth() + 1)).slice(-2) + ("00" + e.getUTCDate()).slice(-2) + ("00" + e.getUTCHours()).slice(-2) + ("00" + e.getUTCMinutes()).slice(-2) + ("00" + e.getUTCSeconds()).slice(-2) + "Z";}, void 0 !== lt && lt || (lt = {}), void 0 !== lt.jws && lt.jws || (lt.jws = {}), lt.jws.JWSJS = function () {var t = lt.jws.JWS,e = t.readSafeJSONString;this.aHeader = [], this.sPayload = "", this.aSignature = [], this.init = function () {this.aHeader = [], this.sPayload = void 0, this.aSignature = [];}, this.initWithJWS = function (t) {this.init();var e = t.split(".");if (3 != e.length) throw "malformed input JWS";this.aHeader.push(e[0]), this.sPayload = e[1], this.aSignature.push(e[2]);}, this.addSignature = function (t, e, i, n) {if (void 0 === this.sPayload || null === this.sPayload) throw "there's no JSON-JS signature to add.";var r = this.aHeader.length;if (this.aHeader.length != this.aSignature.length) throw "aHeader.length != aSignature.length";try {var s = lt.jws.JWS.sign(t, e, this.sPayload, i, n).split(".");s[0], s[2], this.aHeader.push(s[0]), this.aSignature.push(s[2]);} catch (t) {throw this.aHeader.length > r && this.aHeader.pop(), this.aSignature.length > r && this.aSignature.pop(), "addSignature failed: " + t;}}, this.verifyAll = function (t) {if (this.aHeader.length !== t.length || this.aSignature.length !== t.length) return !1;for (var e = 0; e < t.length; e++) {var i = t[e];if (2 !== i.length) return !1;if (!1 === this.verifyNth(e, i[0], i[1])) return !1;}return !0;}, this.verifyNth = function (e, i, n) {if (this.aHeader.length <= e || this.aSignature.length <= e) return !1;var r = this.aHeader[e],s = this.aSignature[e],o = r + "." + this.sPayload + "." + s,a = !1;try {a = t.verify(o, i, n);} catch (t) {return !1;}return a;}, this.readJWSJS = function (t) {if ("string" == typeof t) {var i = e(t);if (null == i) throw "argument is not safe JSON object string";this.aHeader = i.headers, this.sPayload = i.payload, this.aSignature = i.signatures;} else try {if (!(t.headers.length > 0)) throw "malformed header";if (this.aHeader = t.headers, "string" != typeof t.payload) throw "malformed signatures";if (this.sPayload = t.payload, !(t.signatures.length > 0)) throw "malformed signatures";this.aSignature = t.signatures;} catch (t) {throw "malformed JWS-JS JSON object: " + t;}}, this.getJSON = function () {return { headers: this.aHeader, payload: this.sPayload, signatures: this.aSignature };}, this.isEmpty = function () {return 0 == this.aHeader.length ? 1 : 0;};}, lt.crypto.ECDSA, lt.crypto.DSA, lt.crypto.Signature, lt.crypto.MessageDigest, lt.crypto.Mac, e.cV = ht, e.pj = lt, lt.crypto, lt.asn1, lt.jws, lt.lang;}, 5357: (t, e, i) => {"use strict";i.d(e, { Z: () => o });var n = i(1847),r = i(3242),s = i(3753);class o {static _instance;static get instance() {return o._instance || (o._instance = new this()), o._instance;}constructor() {if (o._instance) return o._instance;o._instance = this;}formatters = {};create(t) {t.value = 0 == t.displayUnitSystemType ? this.getThresholdValue(t.value) : t.displayUnitSystemType;const e = (0, s.Fx)(JSON.stringify(t));if ((0, r.cK)(this.formatters, e)) return this.formatters[e];const i = n.G2.create(t);return this.formatters[e] = i, i;}getThresholdValue(t) {if (!isNaN(t)) {const e = [1, 1e3, 1e6, 1e9, 1e12];for (let i = e.length - 1; i > 0; i--) if (t >= e[i]) return e[i];}return t;}}}, 5367: (t, e, i) => {"use strict";i.d(e, { HI: () => h, Hv: () => g, Lc: () => l, PJ: () => u, Ss: () => p, _3: () => m, fo: () => f, iE: () => o, k$: () => n, r2: () => s, wR: () => r });const n = ["image/svg+xml", "image/svg", "application/json", "application/xml", "text/xml", ".xml"];var r, s, o, a;!function (t) {t.Area = "area", t.Link = "link";}(r || (r = {})), function (t) {t[t.None = 0] = "None", t[t.Match = 1] = "Match", t[t.Unmatch = 2] = "Unmatch";}(s || (s = {})), function (t) {t.GroupMatched = "data-okviz-group-matched", t.GroupUnbound = "data-okviz-group-unbound", t.GroupLink = "data-okviz-group-link", t.Matched = "data-okviz-matched", t.JsvgId = "data-okviz-jsvg-id", t.AutoId = "data-okviz-auto-id", t.LinkToMap = "data-okviz-link-map", t.PreviousFillColor = "data-okviz-color", t.PreviousOutlineColor = "data-okviz-outline-color";}(o || (o = {})), function (t) {t.SvgAuthor = "data-okviz-svg-author", t.SvgAttribution = "data-okviz-svg-attribution", t.NoLabel = "data-okviz-svg-no-labels", t.Unbound = "data-okviz-unbound", t.Strong = "data-okviz-strong", t.AreaType = "data-okviz-area-type", t.DrillTo = "data-okviz-drill-url", t.LinkTo = "data-okviz-link-url", t.AutoFetch = "data-okviz-autofetch", t.CatHorizPos = "data-okviz-cat-x-position", t.CatVertPos = "data-okviz-cat-y-position", t.DataHorizPos = "data-okviz-data-x-position", t.DataVertPos = "data-okviz-data-y-position";}(a || (a = {}));const l = { ...o, ...a };function c(t) {return !("object" != typeof t || null === t || "string" != typeof t.url || "name" in t && "string" != typeof t.name || "mapSelector" in t && "string" != typeof t.mapSelector);}function h(t) {if (!Array.isArray(t)) return !1;for (const e of t) if (!c(e)) return !1;return !0;}function u(t, e = !1) {if (!t) return !1;const i = e ? "string" == typeof t.rects : "object" == typeof t.rects && function (t) {return t && Object.values(t).some(d);}(t.rects),n = e ? "string" == typeof t.dataMapping : "object" == typeof t.dataMapping && function (t) {return t && (void 0 === t.mapSelector || "string" == typeof t.mapSelector) && t.areas && "object" == typeof t.areas;}(t.dataMapping);return "string" == typeof t.id && "string" == typeof t.name && "string" == typeof t.source && "string" == typeof t.svg && i && n && (void 0 === t.meta || "object" == typeof t.meta);}function d(t) {return t && "number" == typeof t.x && "number" == typeof t.y && "number" == typeof t.width && "number" == typeof t.height;}function p(t) {return Object.values(r).includes(t);}function f(t) {return t instanceof File;}const g = { [r.Area]: [[l.DrillTo, "drillTo", "string"]], [r.Link]: [[l.LinkTo, "linkTo", "string"], [l.LinkToMap, "linkToMap", "string"]] };var m;!function (t) {t.Default = "default", t.Outline = "outline";}(m || (m = {}));}, 5370: (t, e, i) => {"use strict";i.d(e, { E0: () => C, bN: () => T, iP: () => k });var n = i(1807),r = i(3571),s = i(906),o = i(5923),a = i(4115),l = i(9857),c = i(100),h = i(6684),u = i(7492),d = i(3965),p = i(5367),f = i(7077),g = i(3895),m = i(7345),v = i(5888),y = i(3761),b = i(8862),w = i(1299),x = i(8174),S = i(2755),E = i(7112);const C = "add-selected-to-my-storage",k = "export-my-storage-urls";class T extends s.g {dropzone;svgPreviewer;mapList;selectedPreviewMapId;selectedIds = new Set();uploadBtn;previewMapContainer;searchBar;treeContainer;rootUl;listButtonBox;selectAllCheckbox;errorHandler;msgBox;myStorageContainer;listPane;refreshListBtn;emptySearchResult;storageInfoContainer;get isListEmpty() {return !this.mapList || !this.mapList.length;}get myStorage() {return this.config.mapsManager.myStorage;}get jsvgGenerator() {return this.config.mapsManager.jsvgGenerator;}get callbackData() {const t = this.mapList.filter((t) => this.selectedIds.has(t.id));return t.forEach((t) => {t.url = this.myStorage.getMapUrl(t.id), t.source = t.id;}), t;}constructor(t) {t.boxClass = "full-size", t.icon = "okviz-storage", t.title = t.mapsManager.myStorage.info.displayName, t.onlyBrowse ? t.hideCloseButton = !0 : t.size = { height: "90%", width: "90%" }, super(t), this.mapList = t.mapList, t.mapsManager.freeMemory();}getMemorySize() {return this.mapList.reduce((t, e) => e.jsvg ? t + (e.size ?? 0) : 0, 0);}freeMemory() {this.getMemorySize() > w.B5 && this.mapList.forEach((t) => t.jsvg = null);}drawUI() {this.config.onlyBrowse && this.boxContainer.classList.add("no-margins", "no-borders", "no-padding"), this.mapList && this.mapList.length ? this.drawStorage() : this.showEmptyStorage();}orderListAlphabetically() {this.mapList && this.mapList.sort((t, e) => t.name.localeCompare(e.name));}orderUiListAlphabetically() {if (!this.rootUl) return;const t = Array.from(this.rootUl.querySelectorAll(`[${d.pe}=${d.jX.Map}]`));t.sort((t, e) => t.querySelector(".text-content").textContent.localeCompare(e.querySelector(".text-content").textContent)), t.forEach((t) => this.rootUl.appendChild(t));}drawStorage() {this.titleBox.classList.add("no-margins"), this.boxContent.classList.add("my-storage-view", "no-margins"), !this.listPane && (this.myStorageContainer && this.myStorageContainer.remove(), this.storageInfoContainer && this.storageInfoContainer.remove(), (0, n.tTh)(".my-storage-info", this.boxContent, { middleware: (t) => this.storageInfoContainer = t }, [(0, n.tTh)(".info-section", [(0, n.tTh)(".label", "My Storage: "), (0, n.tTh)("div", `${this.myStorage.info.displayRegion}${this.myStorage.info.isEncrypted ? " (Encrypted)" : ""}`)]), (0, n.tTh)(".info-section.quota", [(0, n.tTh)(".quota-text"), (0, n.tTh)(".quota-bar-container", [(0, n.tTh)(".quota-bar")])])]), (0, n.tTh)(".my-storage.editor-panes.no-margins", this.boxContent, { middleware: (t) => this.myStorageContainer = t }, [(0, n.tTh)(".my-storage-list.pane", { middleware: (t) => this.listPane = t }, [(0, n.tTh)(".file-list", [(0, n.tTh)(".tree", [(0, n.tTh)(".filter", [(0, n.tTh)(".search-bar.no-margins", [(0, n.tTh)(".icon.icon-search.no-hover"), (0, n.tTh)("input.search", { middleware: (t) => this.searchBar = t, attr: { type: "search", placeholder: "Search by map name..." }, events: { input: () => this.handleSearch() } })])]), (0, n.tTh)(".tree-elements", { middleware: (t) => this.treeContainer = t }), (0, n.tTh)(".spacer")]), (0, n.tTh)(".button-box", { middleware: (t) => this.listButtonBox = t }, [(0, n.tTh)("icon.icon.icon-refresh.refresh-btn", { middleware: (t) => this.refreshListBtn = t, events: { click: () => this.refreshMaps() } }), (0, n.tTh)(".synoptic-btn.white.ctrl.end", { middleware: (t) => this.uploadBtn = t, events: { click: () => this.dropzone.handleBrowse() } }, [(0, n.tTh)(".group.white.small.border", [(0, n.tTh)(".icon.icon-upload.small.no-margins"), (0, n.tTh)("span.text.small", "Upload")])])])])]), (0, n.tTh)(".panes-gutter"), (0, n.tTh)(".selected-map-preview.pane", { middleware: (t) => this.previewMapContainer = t })]), (0, v.A)({ columnGutters: [{ track: 1, element: this.boxContent.querySelector(".panes-gutter") }], columnMinSize: 200 }), this.initPreviewer(), this.updateButtons(), this.initDropZone(this.listPane), this.updateDisplayQuota(0)), this.drawMapList();}showEmptyStorage() {this.storageInfoContainer && this.storageInfoContainer.remove(), this.myStorageContainer && this.myStorageContainer.remove(), this.listPane = null, (0, n.tTh)(".my-storage.empty", this.boxContent, { middleware: (t) => this.myStorageContainer = t }, [(0, n.tTh)(".no-maps", [(0, n.tTh)(".placeholder", "Your storage is empty"), (0, n.tTh)(".synoptic-btn.add-map-btn.ctrl", { events: { click: (t) => this.dropzone.handleBrowse() } }, [(0, n.tTh)(".group.small", [(0, n.tTh)(".icon.icon-upload.small"), (0, n.tTh)("span.text.small", "Upload")])])])]), this.hideButton([C, k]), this.initDropZone(this.myStorageContainer);}handleSearch() {const t = this.searchBar.value.toLowerCase().trim();t || this.toggleEmptySearchResult(!1);let e = !1;this.rootUl.querySelectorAll(`[${d.pe}=${d.jX.Map}]`).forEach((i) => {const n = i.querySelector(".text-content").textContent.includes(t);i.toggleAttribute("hidden", !n), e = e || n;}), this.toggleEmptySearchResult(!e);}toggleEmptySearchResult(t = !0) {this.emptySearchResult && this.emptySearchResult.remove(), this.rootUl.classList.remove("hide"), t && (this.rootUl.classList.add("hide"), this.emptySearchResult = (0, n.tTh)(".empty-search-result", this.treeContainer, "No results found"));}initPreviewer() {this.svgPreviewer && this.svgPreviewer.destroy(), this.svgPreviewer = new u.s({ previewContainer: this.previewMapContainer, showEditButton: !1, showProtection: !0 }), this.svgPreviewer.on("refreshMap", () => this.refreshMap(!0));}initDropZone(t) {this.dropzone && this.dropzone.destroy(), this.dropzone = new h.g({ container: t, multiple: !0, accept: p.k$, maxSize: w.YE }), this.dropzone.on("file", () => {this.dropzone.files?.length && this.handleMapsUpload(this.dropzone.files);}), this.dropzone.on("error", (t) => this.raiseError(t));}showMapContextMenu(t, e) {if (!e) return;const i = e.getAttribute(p.Lc.JsvgId);if (!i) return;const r = this.mapList.find((t) => t.id === i);if (!r) return;const s = r?.protection !== c.Qn.None,a = [...(s ? [{ label: "Unprotect", icon: "unlock", className: "small-text-contextual-menu-item", onClick: () => this.showProtectionMsgBox(r, o.sm.Unprotect) }, { label: "Change Password", icon: "lock", className: "small-text-contextual-menu-item", onClick: () => this.showProtectionMsgBox(r, o.sm.ChangePassword) }] : [{ label: "Protect", icon: "lock", className: "small-text-contextual-menu-item", onClick: () => this.showProtectionMsgBox(r, o.sm.Protect) }]), { type: n.KGh.Separator }, { label: "Rename", icon: "rename", className: "small-text-contextual-menu-item", onClick: () => this.showRenameMapMsgBox(r) }, { label: "Replace", icon: "open-folder", enabled: !s, className: "small-text-contextual-menu-item", onClick: () => this.handleReplaceBtnClick(i) }, { label: "Edit Metadata", icon: "edit", className: "small-text-contextual-menu-item", onClick: () => this.showEditMetaMsgBox(r) }, { label: "Copy URL", icon: "link", className: "small-text-contextual-menu-item", onClick: () => (0, n.lWL)(this.myStorage.getMapUrl(i, r.name)) }, { type: n.KGh.Separator }, { label: "Delete", icon: "delete", className: "small-text-contextual-menu-item", onClick: () => this.showRemoveMapMsgBox(r) }];n.tzH.Init("map-context-menu", { width: "auto", sticky: !0, items: a.flat() }).show(t);}clearSelectedPreviewMap() {this.svgPreviewer?.destroyMap(), this.svgPreviewer?.destroyMapInfo();}async refreshMaps() {this.showLoading(), this.refreshListBtn?.classList.add("refreshing");try {this.mapList = await this.myStorage.listMaps(), this.orderListAlphabetically(), this.drawUI();} catch (t) {const e = (0, m.T)(t);this.raiseError(e, "MS_INVALID_EDIT_KEY" == e.key);} finally {this.removeLoading(), this.refreshListBtn?.classList.remove("refreshing");}}async handleReplaceBtnClick(t) {try {const e = await h.g.browseFiles(p.k$);if (!e.length) return;const i = e[0];await this.replaceMap(i, t, !0);} catch (t) {const e = (0, m.T)(t);this.raiseError(e, "MS_INVALID_EDIT_KEY" == e.key);}}async replaceMap(t, e, i = !1) {const { jsvg: n, header: r } = await this.myStorage.getMap(e);if (r.protection !== c.Qn.None) return;const s = await this.jsvgGenerator.createFromFile(t, n.name, n.id, n),o = await this.myStorage.updateMap({ mapId: e, eTag: r.eTag, map: s }),a = r.size - o.size;if (a && this.updateDisplayQuota(a), this.isListEmpty) this.mapList.push(o), this.drawUI();else {const t = this.mapList.find((t) => t.id === e);if (t) {if (i) {const t = { ...o, jsvg: s };this.updateMapInList(e, t), this.selectedPreviewMapId = o.id, this.handlePreview();} else t.jsvg = null;} else this.mapList.push(o), this.addMapToUI(o.name, o.id, i, i);}}async uploadMap(t, e, i = !1) {const n = await this.getUniqueMyStorageMapName(e),r = await this.jsvgGenerator.createFromFile(t, n);r.source = r.id;const s = await this.myStorage.uploadMap({ map: r, ...(r.meta?.author ? { author: r.meta.author } : {}), ...(r.meta?.attribution ? { attribution: r.meta.attribution } : {}) });return this.mapList.push(s), this.isListEmpty ? this.drawUI() : this.addMapToUI(s.name, s.id, i, i), this.updateDisplayQuota(-s.size), s;}async getUniqueMyStorageMapName(t) {try {return await this.myStorage.searchMapByName(t), await this.getUniqueMyStorageMapName(`${t} copy`);} catch (e) {const i = (0, m.T)(e);if ("MS_MAP_NOT_FOUND" == i.key) return t;throw i;}}async handleMapsUpload(t) {try {(0, x.KN)();let e = !1,i = !1;for (let n = 0; n < t.length; n++) {const r = t[n],s = (0, S.lx)((0, f.T3)(r.name)),o = n === t.length - 1;(0, x.Uu)(r.name, [n + 1, t.length]);let a = "";try {a = await this.myStorage.searchMapByName(s);} catch (t) {if ("MS_MAP_NOT_FOUND" !== t.key) throw t;}if (a) {if (e) {(0, x.Uu)(r.name, [n + 1, t.length]), await this.replaceMap(r, a, o);continue;}if (!i) {(0, x.jj)("hide");const l = await this.showReplaceMapMsgBox(s);if ("cancel" === l.action) break;if ("replace" === l.action || "replaceAll" === l.action) {e = "replaceAll" === l.action, (0, x.Uu)(r.name, [n + 1, t.length]), await this.replaceMap(r, a, o);continue;}if ("keepBoth" === l.action || "keepAll" === l.action) {i = "keepAll" === l.action, (0, x.Uu)(r.name, [n + 1, t.length]), await this.uploadMap(r, s, o);continue;}}}!i && a || ((0, x.Uu)(r.name, [n + 1, t.length]), await this.uploadMap(r, s, o));}} catch (t) {const e = (0, m.T)(t);this.raiseError(e, "MS_INVALID_EDIT_KEY" == e.key);} finally {this.dropzone.removeFiles(), (0, x.hy)();}}updateDisplayQuota(t) {this.myStorage.info.availableQuota += t;const e = this.storageInfoContainer?.querySelector(".quota-text");e && (e.textContent = this.myStorage.displayAvailableQuota);const i = this.storageInfoContainer?.querySelector(".quota-bar");i && (i.style.width = `${this.myStorage.availableQuotaPercentage}%`);}onListClick(t) {const e = t.target;if (e && e.dataset.type) switch (e.dataset.type) {case d.jX.MapCheckbox:this.handleMapCheckboxClick(e);break;case d.jX.MapMenu:this.showMapContextMenu(t, e.closest(`[${d.pe}=${d.jX.Map}]`));break;case d.jX.MapSelectable:case d.jX.MapName:case d.jX.Map:this.selectMapUIElement(e);}}async removeMap(t, e) {try {return this.showLoading(), await this.myStorage.deleteMap(t.id, e), this.removeMapFromUI(t.id), this.removeMapFromList(t.id), this.updateDisplayQuota(t.size), this.mapList.length ? this.selectedPreviewMapId == t.id && this.selectMapUIElement(this.rootUl.querySelector(`[${d.pe}=${d.jX.Map}]`)) : this.drawUI(), { valid: !0 };} catch (t) {return this.handleMsgBoxValidationError(t);} finally {this.removeLoading();}}removeMapFromUI(t) {const e = this.rootUl.querySelector(`[${p.Lc.JsvgId}="${t}"]`);e && e.remove(), this.selectedPreviewMapId == t && this.clearSelectedPreviewMap();}removeMapFromList(t) {t && this.mapList && (this.deselectMap(t), this.mapList = this.mapList?.filter((e) => e.id !== t));}selectMapUIElement(t, e = !1) {if (!t) return;const i = t.dataset.type === d.jX.Map ? t : t.closest(`[${d.pe}=${d.jX.Map}]`),n = i.getAttribute(p.Lc.JsvgId);if (!n || this.selectedPreviewMapId == n && !e) return;const r = this.rootUl.querySelector(".selectable.selected");r && r.classList.remove("selected"), i.querySelector(".selectable").classList.add("selected"), this.selectedPreviewMapId = n, this.freeMemory(), this.handlePreview();}async handlePreview() {if (this.svgPreviewer?.destroyMap(), this.svgPreviewer?.destroyMapInfo(), !this.selectedPreviewMapId) return;const t = this.mapList.find((t) => t.id === this.selectedPreviewMapId);if (t) {this.showMapInfoPreview(t), this.svgPreviewer.loading();try {if (await this.ensureMapContent(), t.id !== this.selectedPreviewMapId) return;this.showMapInfoPreview(t), this.svgPreviewer.show(t.jsvg), this.svgPreviewer.endLoading();} catch (e) {if (t.id !== this.selectedPreviewMapId) return;const i = (0, m.T)(e);"MS_INVALID_EDIT_KEY" == i.key ? this.raiseError(i, !0) : this.svgPreviewer.raiseError(i);} finally {this.svgPreviewer.endLoading();}}}async ensureMapContent() {if (!this.selectedPreviewMapId) return;const t = this.mapList.find((t) => t.id === this.selectedPreviewMapId);t.jsvg && t.jsvg.svg || (await this.refreshMap());}async refreshMap(t = !1) {if (!this.mapList || !this.mapList.length) return;const e = await this.myStorage.getMap(this.selectedPreviewMapId),i = { ...e.header, source: e.header.id, jsvg: e.jsvg };this.updateMapInList(e.header.id, i), t && (await this.handlePreview());}showMapInfoPreview(t) {if (!t || !this.svgPreviewer) return;this.svgPreviewer.destroyMapInfo();const e = { ...t, location: g.k.MyStorage };this.svgPreviewer.showInfo(e);}updateMapInList(t, e) {if (!t || !e || !this.mapList) return;const i = this.mapList.find((e) => e.id === t);return i ? Object.assign(i, e) : void 0;}drawMapList() {if (!this.mapList || !this.mapList.length) return;this.orderListAlphabetically(), this.rootUl && this.rootUl.remove(), (0, n.tTh)("ul.ul-root", this.treeContainer, { middleware: (t) => this.rootUl = t }), (0, n.tTh)("li.tree-element.select-all", this.rootUl, { events: { click: () => this.toggleAllMaps() } }, [(0, n.tTh)(".container", [(0, n.tTh)(".selectable.my-storage-selectable", [(0, n.tTh)(".checkbox-new.icon.select-all", { middleware: (t) => {this.selectAllCheckbox = t;} }, [(0, n.tTh)("span.text-content.select-all", "Select all")])])])]), this.mapList.find((t) => t.id === this.selectedPreviewMapId) || (this.selectedPreviewMapId = null);const t = this.selectedPreviewMapId || this.mapList[0].id;this.mapList.forEach((e, i) => this.addMapToUI(e.name, e.id, t === e.id, this.mapList.length - 1 === i)), this.rootUl.addEventListener("click", (t) => this.onListClick(t));}addMapToUI(t, e, i = !1, r = !1) {let s;const o = this.config.currentDrillpathMapIds.includes(e),a = (0, n.tTh)("li.tree-element", this.rootUl, { data: { type: d.jX.Map }, middleware: (t) => {t.setAttribute(p.Lc.JsvgId, e);} }, [(0, n.tTh)(".container", [(0, n.tTh)(".selectable.my-storage-selectable", { data: { type: d.jX.MapSelectable } }, [...(o ? [(0, n.tTh)(".checkbox-new.icon.checked.force-checked", { attr: { title: "This map is already included in the current level" } })] : [(0, n.tTh)(".checkbox-new.icon", { middleware: (t) => s = t, data: { type: d.jX.MapCheckbox } })]), (0, n.tTh)("span.text-content", { data: { type: d.jX.MapName }, attr: { title: t } }, (0, f.xx)(t, 30)), (0, n.tTh)(".end", [(0, n.tTh)("span.icon.icon-ellipsis.context-menu.ctrl.map-menu", { data: { type: d.jX.MapMenu } })])])])]);o || this.handleMapCheckboxClick(s, this.selectedIds.has(e), r), r && this.orderUiListAlphabetically(), i && this.selectMapUIElement(a, !0);}updateUiMapName(t, e) {if (!t || !e) return;const i = this.rootUl.querySelector(`[${p.Lc.JsvgId}="${t}"]`);if (i) {const n = i.querySelector(".text-content");n && (n.textContent = e), this.selectedPreviewMapId == t && this.svgPreviewer?.updateMapName(e);}this.orderUiListAlphabetically();}isMapOnCurrentDrillPath(t) {return this.config.currentDrillpathMapIds?.includes(t);}handleMapCheckboxClick(t, e, i = !0) {t.classList.toggle("checked", e), this.toggleMapSelection(t.closest(`[${p.Lc.JsvgId}]`).getAttribute(p.Lc.JsvgId), e), i && this.updateSelectAllCheckbox();}toggleMapSelection(t, e) {(0, n.vMM)(e) ? e ? this.selectMap(t) : this.deselectMap(t) : this.selectedIds.has(t) ? this.deselectMap(t) : this.selectMap(t);}updateSelectAllCheckbox() {if (!this.rootUl || !this.mapList) return;const t = this.mapList.filter((t) => !this.isMapOnCurrentDrillPath(t.id)).length;this.selectAllCheckbox.classList.remove("checked", "partial"), this.selectedIds.size === t ? this.selectAllCheckbox.classList.add("checked") : 0 !== this.selectedIds.size && this.selectAllCheckbox.classList.add("partial"), this.updateButtons();}updateButtons() {if (this.config.onlyBrowse) this.hideButton(C);else {const t = this.selectedIds.size > 0 ? `Add selected (${this.selectedIds.size})` : "Add selected";this.showButton(C, t, 0 == this.selectedIds.size);}const t = this.selectedIds.size > 0 ? `Export URLs (${this.selectedIds.size})` : "Export URLs";this.showButton(k, t, 0 == this.selectedIds.size);}toggleAllMaps(t) {if (!this.rootUl || !this.mapList) return;const e = this.mapList.filter((t) => !this.isMapOnCurrentDrillPath(t.id));t = (0, n.vMM)(t) ? t : !!this.selectAllCheckbox.classList.contains("partial") || !this.selectAllCheckbox.classList.contains("checked"), this.selectAllCheckbox.classList.toggle("checked", t), this.rootUl.querySelectorAll(`[${d.pe}=${d.jX.MapCheckbox}]`).forEach((e) => {const i = e.closest(`[${p.Lc.JsvgId}]`).getAttribute(p.Lc.JsvgId);this.isMapOnCurrentDrillPath(i) || this.handleMapCheckboxClick(e, t);}), e.forEach((e) => t ? this.selectMap(e.id) : this.deselectMap(e.id));}selectMap(t) {this.isMapOnCurrentDrillPath(t) || this.selectedIds.add(t);}deselectMap(t) {this.isMapOnCurrentDrillPath(t) || this.selectedIds.delete(t);}async updateMapNameOrMeta(t) {try {this.showLoading();const e = t.map,{ jsvg: i, header: n } = await this.myStorage.getMap(e.id);e.eTag = n.eTag, t.newName && (i.name = t.newName), t.updateMeta && (i.meta.author = t.newAuthor ?? "", i.meta.attribution = t.newAttribution ?? "");const r = await this.myStorage.updateMap({ mapId: e.id, eTag: e.eTag, ...(t.password ? { password: t.password } : {}), map: i });return i.meta.updated = r.updated, e.jsvg = i, e.name = i.name, e.source = i.id, e.author = i.meta.author, e.attribution = i.meta.attribution, e.id = i.id, e.eTag = r.eTag, t.newName && this.updateUiMapName(t.map.id, t.newName), t.updateMeta && this.selectedPreviewMapId == t.map.id && this.svgPreviewer?.updateMapAuthor(t.newAuthor), { valid: !0 };} catch (t) {return this.handleMsgBoxValidationError(t);} finally {this.removeLoading();}}async createFromFile(t, e, i) {const n = [];for (let r = 0; r < t.length; r++) {(0, x.Uu)(t[r].name, [r + 1, t.length]);const s = await this.jsvgGenerator.createFromFile(t[r], e, i);n.push(s);}return n;}showRenameMapMsgBox(t) {const e = { element: this.boxContent, mapName: t.name, protected: t.protection !== c.Qn.None, buttons: [{ text: "Rename", id: l.A, validationCallback: async (e) => {const i = "" === (n = e.newName) ? { valid: !1, message: "The new name cannot be empty." } : n === t.name ? { valid: !1, message: "The new name must be different from the current name." } : (0, S._C)(n) ? (0, S.w8)(n) ? { valid: !0 } : { valid: !1, message: S.NX } : { valid: !1, message: S.l0 };var n;return i.valid ? this.updateMapNameOrMeta({ map: t, newName: e.newName, password: e.password, updateMeta: !1 }) : i;} }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new l._(e), this.msgBox.draw();}showEditMetaMsgBox(t) {const e = { element: this.boxContent, author: t.author ?? "", attribution: t.attribution ?? "", title: "Edit Map Metadata", description: `Update "${t.name}" map additional information.`, mapTitle: t.name, protected: t.protection !== c.Qn.None, buttons: [{ text: "Update", id: y.m, validationCallback: async (e) => this.updateMapNameOrMeta({ map: t, newAuthor: e.author, newAttribution: e.attribution, password: e.password, updateMeta: !0 }) }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new y.K(e), this.msgBox.draw();}showProtectionMsgBox(t, e = o.sm.ChangePassword) {const i = { type: e, mapTitle: t.name, element: this.boxContent, buttons: [{ text: o.Rl.getButtonText(e), disabled: !0, id: o.Wb, validationCallback: async (i) => this.handleProtectionChange({ map: t, type: e, newPassword: i.newPassword, password: i.existingPassword }) }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new o.Rl(i), this.msgBox.draw();}showMsgBoxEtagConflict() {this.msgBox && this.msgBox.destroy();const t = { element: this.boxContent, title: "Map Conflict", hideCloseButton: !0, description: "The map has been modified by another user. Select an action to resolve the conflict.", buttons: [{ text: "Discard My Changes", action: "cancel" }, { text: "Overwrite Map" }] };return this.msgBox = new b.V(t), this.msgBox.draw();}async handleProtectionChange(t) {try {this.showLoading();const e = t.type === o.sm.Unprotect ? c.Qn.None : c.Qn.Edit,i = { mapId: t.map.id, protection: e, ...(t.password ? { password: t.password } : {}), ...(t.newPassword ? { newPassword: t.newPassword } : {}) };return await this.myStorage.updateMapMetadata(i), this.updateMapInList(t.map.id, { ...t.map, protection: e }), this.selectedPreviewMapId == t.map.id && this.svgPreviewer.toggleProtectedMarker(e !== c.Qn.None), { valid: !0 };} catch (t) {return this.handleMsgBoxValidationError(t);} finally {this.removeLoading();}}showReplaceMapMsgBox(t) {const e = { element: this.boxContent, mapName: t, description: `A map named "${t}" already exists in ${this.myStorage.info?.displayName ?? "your"} storage. Do you want to replace it with the one you are uploading?`, alertMessage: "NOTE: maps protected with passwords will not be replaced." };return this.msgBox && this.msgBox.destroy(), this.msgBox = new E.J(e), this.msgBox.draw();}showRemoveMapMsgBox(t) {const e = { element: this.boxContent, mapName: t.name, protected: t.protection !== c.Qn.None, buttons: [{ text: "Delete", id: a.m, validationCallback: async (e) => this.removeMap(t, e) }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new a.w(e), this.msgBox.draw();}async handleMsgBoxValidationError(t) {const e = (0, m.T)(t);return "MS_NOT_ALLOWED" == e.key ? { valid: !1, message: "Invalid password." } : (this.raiseError(e, "MS_INVALID_EDIT_KEY" == e.key), { valid: !1, destroyOnInvalid: !0 });}async raiseError(t, e = !1, i = document.body) {this.errorHandler && this.errorHandler.destroy();const n = { error: t, container: i };e && (n.destroyCallback = () => this.destroy()), this.errorHandler = new r.z(n);const s = await this.errorHandler.render();"link" == s.type && this.config.parent.launchUrl(s.url);}showLoading() {this.removeLoading(), (0, n.tTh)(".full-size-loading.show", this.myStorageContainer, { middleware: (t) => this.loadingElement = t }, [(0, n.tTh)(".loading", [(0, n.tTh)(".loader")])]);}removeLoading() {this.loadingElement && this.loadingElement.remove();}destroy() {this.errorHandler && this.errorHandler.destroy(), this.msgBox && this.msgBox.destroy(), this.svgPreviewer && this.svgPreviewer.destroy(), this.dropzone && this.dropzone.destroy(), this.config = null, super.destroy();}draw() {return this.create(), this.drawUI(), super.draw();}}}, 5442: (t, e, i) => {"use strict";i.r(e), i.d(e, { DEFAULT_PRECISION: () => l, DEFAULT_PRECISION_IN_DECIMAL_DIGITS: () => c, EPSILON: () => a, LOG_E_10: () => h, MAX_EXP: () => o, MAX_VALUE: () => r, MIN_EXP: () => s, MIN_VALUE: () => n, NEGATIVE_POWERS: () => d, POSITIVE_POWERS: () => u, ceilToPrecision: () => C, ceilWithPrecision: () => S, detectPrecision: () => O, ensureInRange: () => T, equalWithPrecision: () => m, floorToPrecision: () => E, floorWithPrecision: () => x, getPrecision: () => g, greaterOrEqualWithPrecision: () => w, greaterWithPrecision: () => b, isInteger: () => P, lessOrEqualWithPrecision: () => y, lessWithPrecision: () => v, log10: () => f, pow10: () => p, project: () => M, removeDecimalNoise: () => _, round: () => A, roundToPrecision: () => k, toIncrement: () => D });const n = -Number.MAX_VALUE,r = Number.MAX_VALUE,s = -308,o = 308,a = 1e-323,l = 1e-4,c = 12,h = Math.log(10),u = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13, 1e14, 1e15, 1e16, 1e17, 1e18, 1e19, 1e20, 1e21, 1e22, 1e23, 1e24, 1e25, 1e26, 1e27, 1e28, 1e29, 1e30, 1e31, 1e32, 1e33, 1e34, 1e35, 1e36, 1e37, 1e38, 1e39, 1e40, 1e41, 1e42, 1e43, 1e44, 1e45, 1e46, 1e47, 1e48, 1e49, 1e50, 1e51, 1e52, 1e53, 1e54, 1e55, 1e56, 1e57, 1e58, 1e59, 1e60, 1e61, 1e62, 1e63, 1e64, 1e65, 1e66, 1e67, 1e68, 1e69, 1e70, 1e71, 1e72, 1e73, 1e74, 1e75, 1e76, 1e77, 1e78, 1e79, 1e80, 1e81, 1e82, 1e83, 1e84, 1e85, 1e86, 1e87, 1e88, 1e89, 1e90, 1e91, 1e92, 1e93, 1e94, 1e95, 1e96, 1e97, 1e98, 1e99, 1e100, 1e101, 1e102, 1e103, 1e104, 1e105, 1e106, 1e107, 1e108, 1e109, 1e110, 1e111, 1e112, 1e113, 1e114, 1e115, 1e116, 1e117, 1e118, 1e119, 1e120, 1e121, 1e122, 1e123, 1e124, 1e125, 1e126, 1e127, 1e128, 1e129, 1e130, 1e131, 1e132, 1e133, 1e134, 1e135, 1e136, 1e137, 1e138, 1e139, 1e140, 1e141, 1e142, 1e143, 1e144, 1e145, 1e146, 1e147, 1e148, 1e149, 1e150, 1e151, 1e152, 1e153, 1e154, 1e155, 1e156, 1e157, 1e158, 1e159, 1e160, 1e161, 1e162, 1e163, 1e164, 1e165, 1e166, 1e167, 1e168, 1e169, 1e170, 1e171, 1e172, 1e173, 1e174, 1e175, 1e176, 1e177, 1e178, 1e179, 1e180, 1e181, 1e182, 1e183, 1e184, 1e185, 1e186, 1e187, 1e188, 1e189, 1e190, 1e191, 1e192, 1e193, 1e194, 1e195, 1e196, 1e197, 1e198, 1e199, 1e200, 1e201, 1e202, 1e203, 1e204, 1e205, 1e206, 1e207, 1e208, 1e209, 1e210, 1e211, 1e212, 1e213, 1e214, 1e215, 1e216, 1e217, 1e218, 1e219, 1e220, 1e221, 1e222, 1e223, 1e224, 1e225, 1e226, 1e227, 1e228, 1e229, 1e230, 1e231, 1e232, 1e233, 1e234, 1e235, 1e236, 1e237, 1e238, 1e239, 1e240, 1e241, 1e242, 1e243, 1e244, 1e245, 1e246, 1e247, 1e248, 1e249, 1e250, 1e251, 1e252, 1e253, 1e254, 1e255, 1e256, 1e257, 1e258, 1e259, 1e260, 1e261, 1e262, 1e263, 1e264, 1e265, 1e266, 1e267, 1e268, 1e269, 1e270, 1e271, 1e272, 1e273, 1e274, 1e275, 1e276, 1e277, 1e278, 1e279, 1e280, 1e281, 1e282, 1e283, 1e284, 1e285, 1e286, 1e287, 1e288, 1e289, 1e290, 1e291, 1e292, 1e293, 1e294, 1e295, 1e296, 1e297, 1e298, 1e299, 1e300, 1e301, 1e302, 1e303, 1e304, 1e305, 1e306, 1e307, 1e308],d = [1, .1, .01, .001, 1e-4, 1e-5, 1e-6, 1e-7, 1e-8, 1e-9, 1e-10, 1e-11, 1e-12, 1e-13, 1e-14, 1e-15, 1e-16, 1e-17, 1e-18, 1e-19, 1e-20, 1e-21, 1e-22, 1e-23, 1e-24, 1e-25, 1e-26, 1e-27, 1e-28, 1e-29, 1e-30, 1e-31, 1e-32, 1e-33, 1e-34, 1e-35, 1e-36, 1e-37, 1e-38, 1e-39, 1e-40, 1e-41, 1e-42, 1e-43, 1e-44, 1e-45, 1e-46, 1e-47, 1e-48, 1e-49, 1e-50, 1e-51, 1e-52, 1e-53, 1e-54, 1e-55, 1e-56, 1e-57, 1e-58, 1e-59, 1e-60, 1e-61, 1e-62, 1e-63, 1e-64, 1e-65, 1e-66, 1e-67, 1e-68, 1e-69, 1e-70, 1e-71, 1e-72, 1e-73, 1e-74, 1e-75, 1e-76, 1e-77, 1e-78, 1e-79, 1e-80, 1e-81, 1e-82, 1e-83, 1e-84, 1e-85, 1e-86, 1e-87, 1e-88, 1e-89, 1e-90, 1e-91, 1e-92, 1e-93, 1e-94, 1e-95, 1e-96, 1e-97, 1e-98, 1e-99, 1e-100, 1e-101, 1e-102, 1e-103, 1e-104, 1e-105, 1e-106, 1e-107, 1e-108, 1e-109, 1e-110, 1e-111, 1e-112, 1e-113, 1e-114, 1e-115, 1e-116, 1e-117, 1e-118, 1e-119, 1e-120, 1e-121, 1e-122, 1e-123, 1e-124, 1e-125, 1e-126, 1e-127, 1e-128, 1e-129, 1e-130, 1e-131, 1e-132, 1e-133, 1e-134, 1e-135, 1e-136, 1e-137, 1e-138, 1e-139, 1e-140, 1e-141, 1e-142, 1e-143, 1e-144, 1e-145, 1e-146, 1e-147, 1e-148, 1e-149, 1e-150, 1e-151, 1e-152, 1e-153, 1e-154, 1e-155, 1e-156, 1e-157, 1e-158, 1e-159, 1e-160, 1e-161, 1e-162, 1e-163, 1e-164, 1e-165, 1e-166, 1e-167, 1e-168, 1e-169, 1e-170, 1e-171, 1e-172, 1e-173, 1e-174, 1e-175, 1e-176, 1e-177, 1e-178, 1e-179, 1e-180, 1e-181, 1e-182, 1e-183, 1e-184, 1e-185, 1e-186, 1e-187, 1e-188, 1e-189, 1e-190, 1e-191, 1e-192, 1e-193, 1e-194, 1e-195, 1e-196, 1e-197, 1e-198, 1e-199, 1e-200, 1e-201, 1e-202, 1e-203, 1e-204, 1e-205, 1e-206, 1e-207, 1e-208, 1e-209, 1e-210, 1e-211, 1e-212, 1e-213, 1e-214, 1e-215, 1e-216, 1e-217, 1e-218, 1e-219, 1e-220, 1e-221, 1e-222, 1e-223, 1e-224, 1e-225, 1e-226, 1e-227, 1e-228, 1e-229, 1e-230, 1e-231, 1e-232, 1e-233, 1e-234, 1e-235, 1e-236, 1e-237, 1e-238, 1e-239, 1e-240, 1e-241, 1e-242, 1e-243, 1e-244, 1e-245, 1e-246, 1e-247, 1e-248, 1e-249, 1e-250, 1e-251, 1e-252, 1e-253, 1e-254, 1e-255, 1e-256, 1e-257, 1e-258, 1e-259, 1e-260, 1e-261, 1e-262, 1e-263, 1e-264, 1e-265, 1e-266, 1e-267, 1e-268, 1e-269, 1e-270, 1e-271, 1e-272, 1e-273, 1e-274, 1e-275, 1e-276, 1e-277, 1e-278, 1e-279, 1e-280, 1e-281, 1e-282, 1e-283, 1e-284, 1e-285, 1e-286, 1e-287, 1e-288, 1e-289, 1e-290, 1e-291, 1e-292, 1e-293, 1e-294, 1e-295, 1e-296, 1e-297, 1e-298, 1e-299, 1e-300, 1e-301, 1e-302, 1e-303, 1e-304, 1e-305, 1e-306, 1e-307, 1e-308, 1e-309, 1e-310, 1e-311, 1e-312, 1e-313, 1e-314, 1e-315, 1e-316, 1e-317, 1e-318, 1e-319, 1e-320, 1e-321, 1e-322, 1e-323, 0];function p(t) {return t >= 0 ? t < u.length ? u[t] : 1 / 0 : (t = -t) > 0 && t < d.length ? d[t] : 0;}function f(t) {return t > 1 && t < 1e16 ? t < 1e8 ? t < 1e4 ? t < 100 ? t < 10 ? 0 : 1 : t < 1e3 ? 2 : 3 : t < 1e6 ? t < 1e5 ? 4 : 5 : t < 1e7 ? 6 : 7 : t < 1e12 ? t < 1e10 ? t < 1e9 ? 8 : 9 : t < 1e11 ? 10 : 11 : t < 1e14 ? t < 1e13 ? 12 : 13 : t < 1e15 ? 14 : 15 : t > 1e-16 && t < 1 ? t < 1e-8 ? t < 1e-12 ? t < 1e-14 ? t < 1e-15 ? -16 : -15 : t < 1e-13 ? -14 : -13 : t < 1e-10 ? t < 1e-11 ? -12 : -11 : t < 1e-9 ? -10 : -9 : t < 1e-4 ? t < 1e-6 ? t < 1e-7 ? -8 : -7 : t < 1e-5 ? -6 : -5 : t < .01 ? t < .001 ? -4 : -3 : t < .1 ? -2 : -1 : x(Math.log(t) / h);}function g(t, e) {if (void 0 === e && (e = c), !t || !isFinite(t)) return;const i = f(Math.abs(t));return i < s ? 0 : p(Math.max(i - e, 1 - d.length));}function m(t, e, i) {return i = O(i, t, e), t === e || Math.abs(t - e) < i;}function v(t, e, i) {return i = O(i, t, e), t < e && Math.abs(t - e) > i;}function y(t, e, i) {return i = O(i, t, e), t < e || Math.abs(t - e) < i;}function b(t, e, i) {return i = O(i, t, e), t > e && Math.abs(t - e) > i;}function w(t, e, i) {return i = O(i, t, e), t > e || Math.abs(t - e) < i;}function x(t, e) {e = null != e ? e : l;const i = Math.round(t);return Math.abs(t - i) < e ? i : Math.floor(t);}function S(t, e) {e = O(e, l);const i = Math.round(t);return Math.abs(t - i) < e ? i : Math.ceil(t);}function E(t, e) {return 0 === (e = O(e, l)) || 0 === t ? t : Math.floor(t / e) * e;}function C(t, e) {return 0 === (e = O(e, l)) || 0 === t ? t : Math.ceil(t / e) * e;}function k(t, e) {if (0 === (e = O(e, l)) || 0 === t) return t;let i = Math.round(t / e) * e;const n = Math.round(f(Math.abs(t)) - f(e)) + 1;return n > 0 && n < 16 && (i = parseFloat(i.toPrecision(n))), i;}function T(t, e, i) {return null == t ? t : t < e ? e : t > i ? i : t;}function A(t) {return .5 + t | 0;}function M(t, e, i, n, r) {return 0 === i || 0 === r ? e <= t && t <= e + i ? n : NaN : n + (t - e) / i * r;}function _(t) {return k(t, g(t));}function P(t) {return null !== t && t % 1 == 0;}function D(t, e) {return Math.round(t / e) * e;}function O(t, e, i) {if (void 0 !== t) return t;let n;return n = g(i ? e ? Math.min(Math.abs(e), Math.abs(i)) : i : e), n || l;}}, 5457: (t, e, i) => {"use strict";i.d(e, { F: () => g });var n = i(1807),r = i(5367),s = i(3179),o = i(309),a = i(3218),l = i(6481),c = i(3473),h = i(4771),u = i(7077),d = i(2755),p = i(5872);const f = ["matched", "unmatched", "unbound"];class g extends n.T0G {config;areaElements;map;svg;model;mapArea;jsvg;hasSelection = !1;selectedNode = null;treeRootNode = null;zoomer;labelDisabled = !1;scale = (0, l.Ii)();get id() {return this.jsvg?.id;}get isInChart() {return "chart" === this.config.context;}get isInEditor() {return "editor" === this.config.context;}get isInPreview() {return "preview" === this.config.context;}get serializedSvg() {let t = new XMLSerializer().serializeToString(this.map);t = t.replace(new RegExp(`(${Object.values(r.iE).join("|")})=".*?"`, "igm"), "");const e = ["matching-color", "edit-matching-color", "zoom-on-area", "has-selection", "selected", "highlighted", "map-element", "pointer", "has-tooltips", "matched", "unmatched", "unbound", "greyscale", "original", "custom", "link-to-type", "group-link"];return t = t.replace(new RegExp(`class="([^"]*\\b(${e.join("|")})\\b[^"]*)"`, "gm"), (t, i) => {const n = i.split(" ").filter((t) => !e.includes(t)).join(" ");return n ? `class="${n}"` : "";}), t;}constructor(t) {super(), this.config = t, this.mapArea = this.config.mapArea, this.model = this.config.model ?? null, this.jsvg = this.config.jsvg, this.parseSvgString();}getArea(t) {return this.jsvg.dataMapping?.areas[t] || null;}getMatchingDataPoint(t, e) {let i = t;return e && (0, n.cKq)(e.dataset, "name") && (i = e.dataset.name), this.model.drillMode.levelExpanded && e && !i.includes(d._5) && (i = (0, u.e7)(e, [r.Lc.AutoId]).map((t) => (0, d.ni)(t)).join(d._5)), (0, s.JF)(i, this.model, this.config.mapFieldUrl);}areaHasDontBind(t) {const e = this.getArea(t);return e?.strong === r.r2.Unmatch || !1;}elementIsExcluded(t) {if (!this.config.settings) return !1;const e = t.tagName.toLowerCase();return this.config.settings.areas.excludeLines.value && "line" === e || this.config.settings.areas.excludeUnclosed.value && "path" === e && !(0, l.wi)(t) || this.config.settings.areas.excludeSymbols.value && "symbol" === e || this.config.settings.areas.excludeText.value && ["text", "textpath"].includes(e);}getElementStatus(t) {return f.find((e) => t.classList.contains(e)) || "unmatched";}getStrongBoundArea(t) {const e = this.getArea(t);return e?.strong === r.r2.Match ? e : null;}updateSelectedArea() {const t = this.selectedNode?.mapElement ? this.selectedNode.mapElement.parentElement ? this.selectedNode.mapElement.parentElement : this.selectedNode.mapElement : null;t && this.setElementsStatus(t);}parseSvgString() {const t = new DOMParser();this.svg = t.parseFromString(this.jsvg.svg, "image/svg+xml"), this.treeRootNode = this.isInEditor ? this.getSvgTreeNode(this.svg.documentElement) : null;}getSvgTreeNode(t, e) {const i = [];for (let n = 0; n < t.children.length; n++) {const r = t.children[n];p.w.IgnoreTags.includes(r.tagName.toLowerCase()) || i.push(this.getSvgTreeNode(r, e));}const n = { mapElement: t, children: i, parent: e, treeElement: null };return i.forEach((t) => t.parent = n), n;}draw() {this.map?.remove(), this.map = this.svg.documentElement, "true" == this.map.getAttribute(r.Lc.NoLabel) && (this.labelDisabled = !0);const t = (0, l.VJ)(this.map, !0);t && (this.map.setAttribute("viewBox", `${t.x - 5} ${t.y - 5} ${t.width + 10} ${t.height + 10}`), this.config.settings?.appearance?.viewboxScale.value && (0, l.XB)(this.map, 1 / (this.config.settings.appearance.viewboxScale.value / 100))), this.map.setAttribute("width", "100%"), this.map.setAttribute("height", "100%"), this.isInPreview || this.map.classList.add("matching-color"), this.areaElements = {}, this.mapArea.appendChild(this.map), this.isInPreview || (this.setElementsStatus(this.map), this.isInEditor && (this.map.addEventListener("contextmenu", (t) => t.preventDefault()), this.map.addEventListener("mouseup", (t) => this.handleAreaClick(t), !0))), this.attachTooltips(this.map), this.initZoomer(), this.updateScale();}initZoomer() {if (this.config.zoomer && !this.isInPreview) {const t = { container: this.mapArea, wheelStep: this.config.settings ? this.config.settings.advanced.zoomSensitivity.value / 10 : .5, ...this.config.zoomerConfig };this.zoomer = new a.j(t), this.zoomer.on("zoom", (t) => this.trigger("zoom", t)), t.zoomState && this.zoomer.state.zoom !== t.zoomState.zoom && this.trigger("zoom", this.zoomer.state);}}updateScale() {this.scale = (0, l.hl)(this.map, this.config.settings?.appearance.keepAspectRatio.value, this.zoomer?.state.zoom);}handleAreaClick(t) {if (this.zoomer.panning == a.o.Panning) return;if (t.metaKey || t.altKey || t.ctrlKey || t.shiftKey) return;const e = t.target,i = this.findTreeNode(this.treeRootNode, e);i && this.selectTreeNode(i, !0);}findTreeNode(t, e) {if (t) {if (t.mapElement === e) return t;for (let i = 0; i < t.children.length; i++) {const n = this.findTreeNode(t.children[i], e);if (n) return n;}}return null;}selectTreeNode(t, e = !1) {t.mapElement.hasAttribute(r.Lc.GroupLink) && (t = t.parent), this.selectedNode === t || this.treeRootNode === t ? this.reset(e) : (this.treeRootNode.mapElement.classList.add("has-selection"), this.treeRootNode.mapElement.querySelectorAll(".selected, .highlighted").forEach((t) => t.classList.remove("selected", "highlighted")), t.mapElement.classList.add("selected", "highlighted"), t.mapElement.style.outlineWidth = 1 / this.scale.scale + "px", this.selectedNode = t, e ? this.trigger(o.u.Select) : t.mapElement.scrollIntoView({ block: "center", inline: "center", behavior: "smooth" }));}reset(t = !1) {this.map.querySelectorAll(".selected, .highlighted").forEach((t) => t.classList.remove("selected", "highlighted")), this.treeRootNode?.mapElement.classList.remove("has-selection"), this.selectedNode = null, t && this.trigger(o.u.Reset);}defineElementStatus(t, e, i, n, s) {if (t === this.map) return;this.resetElementBinding(t), this.areaElements[t.id] = t, t.classList.add("map-element"), "text" === t.tagName.toLowerCase() && t.classList.add("text-element");const o = this.getArea(t.id);if (!o) return;let a = o.type || r.wR.Area;if (e) return a = r.wR.Link, t.classList.add("group-link"), t.setAttribute(r.Lc.AreaType, a), void t.setAttribute(r.Lc.GroupLink, "true");if (a === r.wR.Area) {if (i || this.areaHasDontBind(t.id)) return void this.markElementAsUnbound(t, i);const e = this.getStrongBoundArea(t.id)?.dataPoint,o = n || e;let a;o ? (a = this.getMatchingDataPoint(o)?.id, t.setAttribute(r.Lc.Strong, o)) : a = s || this.getMatchingDataPoint(t.id, t)?.id, a ? this.markElementAsMatched(t, a, !(e || !s && !n)) : this.markElementAsUnmatched(t);} else a === r.wR.Link && (t.classList.add("link-to-type"), t.setAttribute(r.Lc.AreaType, a));this.ensureAreaAttributes(t, o);}ensureAreaAttributes(t, e) {const i = e.type || r.wR.Area;(0, r.Ss)(i) && r.Hv[i].forEach((i) => {const [n, r, s] = i,o = (0, u.jD)(e, r);null != o && ("!boolean" === s ? t.setAttribute(n, (!o).toString()) : t.setAttribute(n, o.toString()));});}setElementsStatus(t, e = !1, i = !1, n = "", s = "") {if (this.defineElementStatus(t, e, i, n, s), (0, l.Md)(t) && t.hasChildNodes()) {const o = e || this.getAreaType(t.id) === r.wR.Link,a = i || this.areaHasDontBind(t.id),l = n || this.getStrongBoundArea(t.id)?.dataPoint,c = s || this.getMatchingDataPoint(t.id, t)?.id;for (let e = 0; e < t.children.length; e++) {const i = t.children[e];p.w.IgnoreTags.includes(i.tagName.toLowerCase()) || this.setElementsStatus(i, o, a, l, c);}}}getAreaType(t) {const e = this.getArea(t);return e?.type || r.wR.Area;}resetElementBinding(t) {t.classList.remove("matched", "unmatched", "group-matched", "group-unbound", "group-link", "pointer", "original", "greyscale", "custom", "unbound", "link-to-type"), [r.Lc.AreaType, r.Lc.DrillTo, r.Lc.GroupLink, r.Lc.LinkTo, r.Lc.LinkToMap, r.Lc.GroupMatched, r.Lc.Matched, r.Lc.Strong, r.Lc.GroupUnbound, r.Lc.Unbound, r.Lc.PreviousFillColor].forEach((e) => t.removeAttribute(e));}markElementAsMatched(t, e, i = !1) {if (this.elementIsExcluded(t)) return;if (t.setAttribute(i ? r.Lc.GroupMatched : r.Lc.Matched, e), t.classList.add("matched"), (0, l.Md)(t) || this.isInEditor) return;t.classList.add("pointer", "has-tooltips");const n = (0, s.JF)(e, this.model, this.config.mapFieldUrl);this.applyElementStyle(t, !this.config.model.hasHighlights || n.dataValue.highlightValue, n);}markElementAsUnmatched(t) {if (this.elementIsExcluded(t)) return;t.classList.add("unmatched");const e = t.getAttribute("fill") || t.style.fill;t.style.setProperty("fill", e, "important"), t.removeAttribute("fill"), (0, l.Md)(t) || this.isInEditor || (this.config.settings?.tooltips.showCategories.value && this.config.settings.tooltips.showUnmatched.value && t.classList.add("has-tooltips"), this.applyElementStyle(t, !this.config.model.hasHighlights));}markElementAsUnbound(t, e) {this.elementIsExcluded(t) || (t.setAttribute(r.Lc.Unbound, "true"), e && t.setAttribute(r.Lc.GroupUnbound, "true"), t.classList.add("unbound"), (0, l.Md)(t) || this.isInEditor || this.applyElementStyle(t, !this.config.model.hasHighlights));}applyElementStyle(t, e, i) {const n = this.getElementStatus(t),r = (0, l.vW)(t);if (r) {const t = (r) => {r.children.length > 0 ? Array.from(r.children).forEach((e) => t(e)) : (this.applyColor(r, n, e, i), this.applyOpacity(r, n, e));};t(r);} else this.applyColor(t, n, e, i), this.applyOpacity(t, n, e);}attachTooltips(t) {this.isInChart && this.config.tooltipServiceWrapper && (this.map.addEventListener("mousemove", () => {this.zoomer.panning == a.o.Panning && this.config.tooltipServiceWrapper.hide();}), this.map.addEventListener("wheel", () => {this.config.tooltipServiceWrapper.hide();}), this.config.tooltipServiceWrapper.addTooltips(t, ".has-tooltips", (t) => {if (this.zoomer.panning == a.o.Panning || this.mapArea?.classList.contains("zoom-on-area")) return;const e = !!t.getAttribute(r.Lc.GroupMatched),i = (0, s.JF)(t.getAttribute(e ? r.Lc.GroupMatched : r.Lc.Matched), this.model, this.config.mapFieldUrl),n = t.getAttribute("title");if (i) return { selectionIds: i.selectionIds, items: (0, s.th)(i, this.model, this.config.settings, n) };{const e = t.id,i = { displayName: "Area", value: n && n !== e ? `${n} (${e})` : e };return "custom" === this.config.settings.areas.unmatchedColorType.value.value && (i.color = this.config.settings.areas.unmatchedColor.value.value), { selectionIds: [], items: [i] };}}));}applyColor(t, e, i, n) {const o = t.getAttribute("fill") || t.style.fill,a = this.config.settings.areas[`${e}ColorType`].value.value;let l;if (l = "custom" === a ? this.config.settings.areas[`${e}Color`]?.value.value : "greyscale" === a ? (0, h.bh)(o) : o, t.classList.toggle("transparent", "transparent" === a), "matched" == e && n) {if (this.model.legendField) {const t = this.model.legendField.values?.[n.dataIndex];l = t ? this.config.legendManager?.getColorFromItem(t.toString()) : n.color;} else "custom" === a && (l = n.color);this.config.colorRulesEnumerator?.hasRules && (l = this.config.colorRulesEnumerator.getColor(r._3.Default, (0, s.GZ)(n, this.model), l, n.dataValue.highlightValue), l !== o && t.classList.remove("transparent"));}i || this.config.settings.accessibility.greyscaleUnselected.value && (t.setAttribute(r.Lc.PreviousFillColor, l), l = (0, h.bh)(l)), "matched" == e && this.config.settings.advanced.fillNoneToTransparent.value && "none" == l && (l = "transparent"), l && (t.style.setProperty("fill", l, "important"), t.removeAttribute("fill")), this.applyOutline(t, l, e, i, n);}applyOutline(t, e, i, n, o) {const a = "original" == this.config.settings.areas[`${i}Outline`].value.value;if (a && ("matched" != i || !this.config.colorRulesEnumerator?.hasRules)) return;const l = t.getAttribute("stroke") || t.style.stroke;if ("hidden" == this.config.settings.areas[`${i}Outline`].value.value) return t.style.setProperty("stroke", "none", "important"), void t.removeAttribute("stroke");if ("forced" == this.config.settings.areas[`${i}Outline`].value.value && !(this.config.settings.areas[`${i}ForceOutline`].value || l && "none" != l || "matched" == i && this.config.colorRulesEnumerator?.hasRules)) return;const u = !a && !this.config.settings.areas[`${i}AutoColorOutline`].value;let d = l;if ("matched" == i && o) {if (this.config.colorRulesEnumerator?.hasRules) {const t = a ? l : u ? o.outlineColor : (0, h.g_)(e);d = this.config.colorRulesEnumerator.getColor(r._3.Outline, (0, s.GZ)(o, this.model), t, o.dataValue.highlightValue);} else d = u ? o.outlineColor : (0, h.g_)(e);} else d = u ? this.config.settings.areas[`${i}OutlineFill`]?.value?.value : (0, h.g_)(e);if (d && (n || this.config.settings.accessibility.greyscaleUnselected.value && (t.setAttribute(r.Lc.PreviousOutlineColor, d), d = (0, h.bh)(d)), t.style.setProperty("stroke", d, "important"), t.removeAttribute("stroke"), (0, c.V3)(this.config.settings, i))) {const e = this.config.settings.areas[`${i}OutlineWidth`].value;e && (t.style.setProperty("stroke-width", e / 10 + "px", "important"), t.removeAttribute("stroke-width"));}}applyOpacity(t, e, i) {const n = t.getAttribute("opacity") ? parseFloat(t.getAttribute("opacity")) : t.style.opacity ? parseFloat(t.style.opacity) : null,r = "custom" == this.config.settings.areas[`${e}TransparencyMode`].value.value,s = i ? r ? this.config.settings.areas[`${e}Transparency`].value : n : this.config.settings.accessibility.unselectedTransparency.value;r && (["opacity", "fill-opacity", "stroke-opacity"].forEach((e) => t.removeAttribute(e)), ["opacity", "fillOpacity", "strokeOpacity"].forEach((e) => t.style.removeProperty(e))), s && t.style.setProperty("opacity", "" + (100 - s) / 100, "important");}checkOpacity(t, e, i) {const n = (0, l.vW)(t);if (n) {const t = (n) => {n.children.length > 0 ? Array.from(n.children).forEach((e) => t(e)) : this.applyOpacity(n, e, i);};t(n);} else this.applyOpacity(t, e, i);}select(t, e) {if (this.elementIsExcluded(t)) return;if (e && (this.hasSelection = !0, this.map.classList.add("has-selection")), t.classList.toggle("selected", e), (0, l.Md)(t)) return;const i = this.getElementStatus(t);this.checkOpacity(t, i, e || !this.hasSelection);const n = (t) => {if (t.children.length > 0) Array.from(t.children).forEach((t) => n(t));else if (e || !this.hasSelection) {const e = t.getAttribute(r.Lc.PreviousFillColor),i = t.getAttribute(r.Lc.PreviousOutlineColor);e && (t.removeAttribute(r.Lc.PreviousFillColor), t.style.setProperty("fill", e, "important")), i && (t.removeAttribute(r.Lc.PreviousOutlineColor), t.style.setProperty("stroke", i, "important"));} else if (this.config.settings.accessibility.greyscaleUnselected.value) {const e = t.getAttribute(r.Lc.PreviousFillColor) || t.style.fill;e && (t.setAttribute(r.Lc.PreviousFillColor, e), t.style.setProperty("fill", (0, h.bh)(e), "important"));const i = t.getAttribute(r.Lc.PreviousOutlineColor) || t.style.stroke;i && (t.setAttribute(r.Lc.PreviousOutlineColor, i), t.style.setProperty("stroke", (0, h.bh)(i), "important"));}},s = (0, l.vW)(t);n(s || t);}clearSelection() {this.hasSelection = !1, this.map.classList.remove("has-selection");for (const t in this.areaElements) this.select(this.areaElements[t], !1);}destroy() {this.zoomer && this.zoomer.destroy(), this.zoomer = null, this.config.tooltipServiceWrapper?.hide(), this.jsvg = null, this.areaElements = null, this.svg = null, this.map?.remove(), this.map = null, this.selectedNode = null, this.treeRootNode = null, this.mapArea = null, this.config = null, super.destroy();}}}, 5478: (t, e, i) => {"use strict";function n(t) {return null == t ? [] : Array.isArray(t) ? t : Array.from(t);}i.d(e, { A: () => n });}, 5500: (t, e, i) => {"use strict";i.d(e, { M3: () => o, W2: () => s, ll: () => r, t9: () => a });var n = i(149);function r(t) {return (0, n.A)(t) && "string" == typeof t.kty;}function s(t) {return "oct" !== t.kty && "string" == typeof t.d;}function o(t) {return "oct" !== t.kty && void 0 === t.d;}function a(t) {return r(t) && "oct" === t.kty && "string" == typeof t.k;}}, 5509: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(9064),r = i(3363);function s() {for (var t = this._name, e = this._id, i = (0, n.Si)(), s = this._groups, o = s.length, a = 0; a < o; ++a) for (var l, c = s[a], h = c.length, u = 0; u < h; ++u) if (l = c[u]) {var d = (0, r.Jt)(l, e);(0, r.Ay)(l, t, i, u, c, { time: d.time + d.delay + d.duration, delay: 0, duration: d.duration, ease: d.ease });}return new n.eB(s, this._parents, t, i);}}, 5539: (t, e, i) => {"use strict";i.d(e, { JA: () => r.J, Sx: () => n.S });var n = i(8698),r = i(2137);i(3102);}, 5551: (t, e, i) => {"use strict";i.d(e, { K: () => b });var n = i(8820),r = i(1339);function s(t) {return 45 == t || 46 == t || 58 == t || t >= 65 && t <= 90 || 95 == t || t >= 97 && t <= 122 || t >= 161;}function o(t) {return 9 == t || 10 == t || 13 == t || 32 == t;}let a = null,l = null,c = 0;function h(t, e) {let i = t.pos + e;if (l == t && c == i) return a;for (; o(t.peek(e));) e++;let n = "";for (;;) {let i = t.peek(e);if (!s(i)) break;n += String.fromCharCode(i), e++;}return l = t, c = i, a = n || null;}function u(t, e) {this.name = t, this.parent = e;}const d = new n.Aj({ start: null, shift: (t, e, i, n) => 1 == e ? new u(h(n, 1) || "", t) : t, reduce: (t, e) => 11 == e && t ? t.parent : t, reuse(t, e, i, n) {let r = e.type.id;return 1 == r || 13 == r ? new u(h(n, 1) || "", t) : t;}, strict: !1 }),p = new n.Lu((t, e) => {if (60 == t.next) if (t.advance(), 47 == t.next) {t.advance();let i = h(t, 0);if (!i) return t.acceptToken(5);if (e.context && i == e.context.name) return t.acceptToken(2);for (let n = e.context; n; n = n.parent) if (n.name == i) return t.acceptToken(3, -2);t.acceptToken(4);} else if (33 != t.next && 63 != t.next) return t.acceptToken(1);}, { contextual: !0 });function f(t, e) {return new n.Lu((i) => {let n = 0,r = e.charCodeAt(0);t: for (; !(i.next < 0); i.advance(), n++) if (i.next == r) {for (let t = 1; t < e.length; t++) if (i.peek(t) != e.charCodeAt(t)) continue t;break;}n && i.acceptToken(t);});}const g = f(36, "--\x3e"),m = f(37, "?>"),v = f(38, "]]>"),y = (0, r.pn)({ Text: r._A.content, "StartTag StartCloseTag EndTag SelfCloseEndTag": r._A.angleBracket, TagName: r._A.tagName, "MismatchedCloseTag/TagName": [r._A.tagName, r._A.invalid], AttributeName: r._A.attributeName, AttributeValue: r._A.attributeValue, Is: r._A.definitionOperator, "EntityReference CharacterReference": r._A.character, Comment: r._A.blockComment, ProcessingInst: r._A.processingInstruction, DoctypeDecl: r._A.documentMeta, Cdata: r._A.special(r._A.string) }),b = n.U1.deserialize({ version: 14, states: ",lOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DT'#DTOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C|'#C|O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C}'#C}O$dOrO,59^OOOP,59^,59^OOOS'#DO'#DOO$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6z-E6zOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6{-E6{OOOP1G.x1G.xOOOS-E6|-E6|OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'mO!bO,59eOOOO-E6w-E6wO'{OpO1G.uO'{OpO1G.uOOOP1G.u1G.uO(TOpO7+$fOOOP7+$f7+$fO(]O!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(hO#tO'#CnO(vO&jO'#CnOOOO1G.q1G.qO)UOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO)^O#tO,59YOOOO,59Y,59YOOOO'#C{'#C{O)lO&jO,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.tOOOO-E6y-E6y", stateData: ")z~OPQOSVOTWOVWOWWOXWOiXOyPO!QTO!SUO~OvZOx]O~O^`Oz^O~OPQOQcOSVOTWOVWOWWOXWOyPO!QTO!SUO~ORdO~P!SOteO!PgO~OuhO!RjO~O^lOz^O~OvZOxoO~O^qOz^O~O[vO`sOdwOz^O~ORyO~P!SO^{Oz^O~OteO!P}O~OuhO!R!PO~O^!QOz^O~O[!SOz^O~O[!VO`sOd!WOz^O~Oa!YOz^O~Oz^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oz^O~O[!_Oz^O~O[!aOz^O~O[!cO`sOd!dOz^O~O[!cO`sOd!dO~Oa!eOz^O~Oz^O{!gO}!hO~Oz^O[ma`madma~O[!kOz^O~O[!lOz^O~O[!mO`sOd!nO~OW!qOX!qO{!sO|!qO~OW!tOX!tO}!sO!O!tO~O[!vOz^O~OW!qOX!qO{!yO|!qO~OW!tOX!tO}!yO!O!tO~O", goto: "%cxPPPPPPPPPPyyP!PP!VPP!`!jP!pyyyP!v!|#S$[$k$q$w$}%TPPPP%ZXWORYbXRORYb_t`qru!T!U!bQ!i!YS!p!e!fR!w!oQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!j!oQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!j!]R!o!eQu`S!UqrU![u!U!bR!b!TQ!r!gR!x!rQ!u!hR!z!uQbRRxbQfTR|fQiUR!OiSXOYTaRb", nodeNames: " StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl", maxTerm: 50, context: d, nodeProps: [["closedBy", 1, "SelfCloseEndTag EndTag", 13, "CloseTag MissingCloseTag"], ["openedBy", 12, "StartTag StartCloseTag", 19, "OpenTag", 20, "StartTag"], ["isolate", -6, 13, 18, 19, 21, 22, 24, ""]], propSources: [y], skippedNodes: [0], repeatNodeCount: 9, tokenData: "!)v~R!YOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs*vsv$qvw+fwx/ix}$q}!O0[!O!P$q!P!Q2z!Q![$q![!]4n!]!^$q!^!_8U!_!`!#t!`!a!$l!a!b!%d!b!c$q!c!}4n!}#P$q#P#Q!'W#Q#R$q#R#S4n#S#T$q#T#o4n#o%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U$q4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qi$zXVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qa%nVVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%gP&YTVPOv&Tw!^&T!_;'S&T;'S;=`&i<%lO&TP&lP;=`<%l&T`&tS!O`Ov&ox;'S&o;'S;=`'Q<%lO&o`'TP;=`<%l&oa'ZP;=`<%l%gX'eWVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^W(ST|WOr'}sv'}w;'S'};'S;=`(c<%lO'}W(fP;=`<%l'}X(lP;=`<%l'^h(vV|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oh)`P;=`<%l(oi)fP;=`<%l$qo)t`VP|W!O`zUOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk+PV{YVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%g~+iast,n![!]-r!c!}-r#R#S-r#T#o-r%W%o-r%p&a-r&b1p-r4U4d-r4e$IS-r$I`$Ib-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~,qQ!Q![,w#l#m-V~,zQ!Q![,w!]!^-Q~-VOX~~-YR!Q![-c!c!i-c#T#Z-c~-fS!Q![-c!]!^-Q!c!i-c#T#Z-c~-ug}!O-r!O!P-r!Q![-r![!]-r!]!^/^!c!}-r#R#S-r#T#o-r$}%O-r%W%o-r%p&a-r&b1p-r1p4U-r4U4d-r4e$IS-r$I`$Ib-r$Je$Jg-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~/cOW~~/fP;=`<%l-rk/rW}bVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^k0eZVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O1W!O!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk1aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a2S!a;'S$q;'S;=`)c<%lO$qk2_X!PQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qm3TZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a3v!a;'S$q;'S;=`)c<%lO$qm4RXdSVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo4{!P`S^QVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O4n!O!P4n!P!Q$q!Q![4n![!]4n!]!^$q!^!_(o!_!c$q!c!}4n!}#R$q#R#S4n#S#T$q#T#o4n#o$}$q$}%O4n%O%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U4n4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Je$q$Je$Jg4n$Jg$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qo8RP;=`<%l4ni8]Y|W!O`Oq(oqr8{rs&osv(owx'}x!a(o!a!b!#U!b;'S(o;'S;=`)]<%lO(oi9S_|W!O`Or(ors&osv(owx'}x}(o}!O:R!O!f(o!f!g;e!g!}(o!}#ODh#O#W(o#W#XLp#X;'S(o;'S;=`)]<%lO(oi:YX|W!O`Or(ors&osv(owx'}x}(o}!O:u!O;'S(o;'S;=`)]<%lO(oi;OV!QP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oi;lX|W!O`Or(ors&osv(owx'}x!q(o!q!r<X!r;'S(o;'S;=`)]<%lO(oi<`X|W!O`Or(ors&osv(owx'}x!e(o!e!f<{!f;'S(o;'S;=`)]<%lO(oi=SX|W!O`Or(ors&osv(owx'}x!v(o!v!w=o!w;'S(o;'S;=`)]<%lO(oi=vX|W!O`Or(ors&osv(owx'}x!{(o!{!|>c!|;'S(o;'S;=`)]<%lO(oi>jX|W!O`Or(ors&osv(owx'}x!r(o!r!s?V!s;'S(o;'S;=`)]<%lO(oi?^X|W!O`Or(ors&osv(owx'}x!g(o!g!h?y!h;'S(o;'S;=`)]<%lO(oi@QY|W!O`Or?yrs@psv?yvwA[wxBdx!`?y!`!aCr!a;'S?y;'S;=`Db<%lO?ya@uV!O`Ov@pvxA[x!`@p!`!aAy!a;'S@p;'S;=`B^<%lO@pPA_TO!`A[!`!aAn!a;'SA[;'S;=`As<%lOA[PAsOiPPAvP;=`<%lA[aBQSiP!O`Ov&ox;'S&o;'S;=`'Q<%lO&oaBaP;=`<%l@pXBiX|WOrBdrsA[svBdvwA[w!`Bd!`!aCU!a;'SBd;'S;=`Cl<%lOBdXC]TiP|WOr'}sv'}w;'S'};'S;=`(c<%lO'}XCoP;=`<%lBdiC{ViP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiDeP;=`<%l?yiDoZ|W!O`Or(ors&osv(owx'}x!e(o!e!fEb!f#V(o#V#WIr#W;'S(o;'S;=`)]<%lO(oiEiX|W!O`Or(ors&osv(owx'}x!f(o!f!gFU!g;'S(o;'S;=`)]<%lO(oiF]X|W!O`Or(ors&osv(owx'}x!c(o!c!dFx!d;'S(o;'S;=`)]<%lO(oiGPX|W!O`Or(ors&osv(owx'}x!v(o!v!wGl!w;'S(o;'S;=`)]<%lO(oiGsX|W!O`Or(ors&osv(owx'}x!c(o!c!dH`!d;'S(o;'S;=`)]<%lO(oiHgX|W!O`Or(ors&osv(owx'}x!}(o!}#OIS#O;'S(o;'S;=`)]<%lO(oiI]V|W!O`yPOr(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiIyX|W!O`Or(ors&osv(owx'}x#W(o#W#XJf#X;'S(o;'S;=`)]<%lO(oiJmX|W!O`Or(ors&osv(owx'}x#T(o#T#UKY#U;'S(o;'S;=`)]<%lO(oiKaX|W!O`Or(ors&osv(owx'}x#h(o#h#iK|#i;'S(o;'S;=`)]<%lO(oiLTX|W!O`Or(ors&osv(owx'}x#T(o#T#UH`#U;'S(o;'S;=`)]<%lO(oiLwX|W!O`Or(ors&osv(owx'}x#c(o#c#dMd#d;'S(o;'S;=`)]<%lO(oiMkX|W!O`Or(ors&osv(owx'}x#V(o#V#WNW#W;'S(o;'S;=`)]<%lO(oiN_X|W!O`Or(ors&osv(owx'}x#h(o#h#iNz#i;'S(o;'S;=`)]<%lO(oi! RX|W!O`Or(ors&osv(owx'}x#m(o#m#n! n#n;'S(o;'S;=`)]<%lO(oi! uX|W!O`Or(ors&osv(owx'}x#d(o#d#e!!b#e;'S(o;'S;=`)]<%lO(oi!!iX|W!O`Or(ors&osv(owx'}x#X(o#X#Y?y#Y;'S(o;'S;=`)]<%lO(oi!#_V!SP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(ok!$PXaQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo!$wX[UVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!%mZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!&`!a;'S$q;'S;=`)c<%lO$qk!&kX!RQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!'aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_#P$q#P#Q!(S#Q;'S$q;'S;=`)c<%lO$qk!(]ZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!)O!a;'S$q;'S;=`)c<%lO$qk!)ZXxQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$q", tokenizers: [p, g, m, v, 0, 1, 2, 3, 4], topRules: { Document: [0, 6] }, tokenPrec: 0 });}, 5571: (t, e, i) => {"use strict";const n = i(7075);t.exports = (t, e, i) => n(t, e, ">", i);}, 5580: (t, e, i) => {"use strict";const n = i(560);t.exports = (t, e, i) => n(t, e, i) > 0;}, 5606: (t) => {var e,i,n = t.exports = {};function r() {throw new Error("setTimeout has not been defined");}function s() {throw new Error("clearTimeout has not been defined");}function o(t) {if (e === setTimeout) return setTimeout(t, 0);if ((e === r || !e) && setTimeout) return e = setTimeout, setTimeout(t, 0);try {return e(t, 0);} catch (i) {try {return e.call(null, t, 0);} catch (i) {return e.call(this, t, 0);}}}!function () {try {e = "function" == typeof setTimeout ? setTimeout : r;} catch (t) {e = r;}try {i = "function" == typeof clearTimeout ? clearTimeout : s;} catch (t) {i = s;}}();var a,l = [],c = !1,h = -1;function u() {c && a && (c = !1, a.length ? l = a.concat(l) : h = -1, l.length && d());}function d() {if (!c) {var t = o(u);c = !0;for (var e = l.length; e;) {for (a = l, l = []; ++h < e;) a && a[h].run();h = -1, e = l.length;}a = null, c = !1, function (t) {if (i === clearTimeout) return clearTimeout(t);if ((i === s || !i) && clearTimeout) return i = clearTimeout, clearTimeout(t);try {return i(t);} catch (e) {try {return i.call(null, t);} catch (e) {return i.call(this, t);}}}(t);}}function p(t, e) {this.fun = t, this.array = e;}function f() {}n.nextTick = function (t) {var e = new Array(arguments.length - 1);if (arguments.length > 1) for (var i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];l.push(new p(t, e)), 1 !== l.length || c || o(d);}, p.prototype.run = function () {this.fun.apply(null, this.array);}, n.title = "browser", n.browser = !0, n.env = {}, n.argv = [], n.version = "", n.versions = {}, n.on = f, n.addListener = f, n.once = f, n.off = f, n.removeListener = f, n.removeAllListeners = f, n.emit = f, n.prependListener = f, n.prependOnceListener = f, n.listeners = function (t) {return [];}, n.binding = function (t) {throw new Error("process.binding is not supported");}, n.cwd = function () {return "/";}, n.chdir = function (t) {throw new Error("process.chdir is not supported");}, n.umask = function () {return 0;};}, 5609: (t, e, i) => {"use strict";i.d(e, { B: () => o });var n = i(3680),r = i(7493),s = i(9095);async function o(t, e, i) {if (t instanceof Uint8Array && (t = s.D0.decode(t)), "string" != typeof t) throw new r.Ye("Compact JWS must be a string or Uint8Array");const { 0: o, 1: a, 2: l, length: c } = t.split(".");if (3 !== c) throw new r.Ye("Invalid Compact JWS");const h = await (0, n.Z)({ payload: a, protected: o, signature: l }, e, i),u = { payload: h.payload, protectedHeader: h.protectedHeader };return "function" == typeof e ? { ...u, key: h.key } : u;}}, 5636: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(9064);function r(t) {if (t._id !== this._id) throw new Error();for (var e = this._groups, i = t._groups, r = e.length, s = i.length, o = Math.min(r, s), a = new Array(r), l = 0; l < o; ++l) for (var c, h = e[l], u = i[l], d = h.length, p = a[l] = new Array(d), f = 0; f < d; ++f) (c = h[f] || u[f]) && (p[f] = c);for (; l < r; ++l) a[l] = e[l];return new n.eB(a, this._parents, this._name, this._id);}}, 5670: (t, e, i) => {"use strict";i.d(e, { Dc: () => p, JU: () => d, PQ: () => h });var n = i(3179),r = i(1807),s = i(5079),o = i(5367),a = i(7077),l = i(4771),c = i(4072);const h = "glob-";var u;!function (t) {t.Category = "data-cat-label", t.Data = "data-label";}(u || (u = {}));class d {container;elementRect;element;jsPlumb;settings;config;mapId;dataPoint;margin = 2;textProps;textAnchor = "start";alignmentBaseline = "middle";labelContainer;labelElement;elementProxy;connector;isRendered = !1;get id() {return `okviz-l${this.config.type.slice(0, 1)}-${(0, r.aHV)(this.element.id)}`.toLowerCase();}get isCategory() {return "category" === this.config.type;}get isMatched() {return !!this.dataPoint;}get isAutoId() {return this.element.hasAttribute(o.Lc.AutoId);}get customGlobalSettings() {return this.settings?.internal?.customLabels?.value?.[this.mapId]?.[`${h}${this.config.type.slice(0, 1)}`];}get customLocalSettings() {return this.settings?.internal?.customLabels?.value?.[this.mapId]?.[this.fingerprint];}get customSettings() {const t = { ...this.customGlobalSettings, ...this.customLocalSettings };return (0, r.dld)(t) ? t : null;}get hasCustomAlignment() {return !!this.customSettings?.alignment;}get hasCustomPosition() {return null != this.customSettings?.coords?.x || null != this.customSettings?.coords?.y;}get hasCustomSize() {return !!this.customSettings?.size;}get hasCustomRotation() {return !!this.customSettings?.rotation;}get hasCustomTransform() {return this.hasCustomRotationX || this.hasCustomRotationY || this.hasCustomSkewX || this.hasCustomSkewY;}get hasCustomRotationX() {return !!this.customSettings?.rotationX;}get hasCustomRotationY() {return !!this.customSettings?.rotationY;}get hasCustomSkewX() {return !!this.customSettings?.skewX;}get hasCustomSkewY() {return !!this.customSettings?.skewY;}get hasCustomTextStyle() {return !!this.customSettings?.text;}get hasConnector() {return !!this.customSettings?.connector;}get connectorStyle() {return this.customSettings?.connector?.style || "straight";}get connectorCurviness() {return this.customSettings?.connector?.curviness || 0;}get connectorEndpoints() {return this.customSettings?.connector?.endpoints ?? ["none", "none"];}get connectorAnchors() {return this.customSettings?.connector?.anchors ?? ["continuous", "center"];}get connectorGap() {return this.customSettings?.connector?.gap || 1;}get connectorColor() {return this.customSettings?.connector?.color || "#000000";}get connectorWidth() {return this.customSettings?.connector?.width || 1;}get isHidden() {return this.customSettings?.hidden ?? !1;}get isInEditMode() {return this.config.isEditMode;}get placement() {return this.isCategory ? this.settings.categoryLabels.placement.value.value : this.settings.dataLabels.placement.value.value;}get minFontSize() {return this.isCategory ? this.settings.categoryLabels.minFontSize.value : this.settings.dataLabels.minFontSize.value;}get maxFontSize() {return this.isCategory ? this.settings.categoryLabels.maxFontSize.value : this.settings.dataLabels.maxFontSize.value;}get isOutside() {return !!this.hasCustomPosition || ("outside" !== this.placement || "center" !== this.horizontalPosition || "middle" !== this.verticalPosition) && "outside" === this.placement;}get isInside() {return !this.hasCustomPosition && ("inside" === this.placement || "outside" === this.placement && "center" === this.horizontalPosition && "middle" === this.verticalPosition);}get hasTextStroke() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.showMatchedStroke.value : this.settings.categoryLabels.showUnmatchedStroke.value : this.settings.dataLabels.showStroke.value;}get hasBackground() {return !this.forceNoBackground && (this.isCategory ? this.isMatched ? this.settings.categoryLabels.showMatchedBackground.value : this.settings.categoryLabels.showUnmatchedBackground.value : this.settings.dataLabels.showBackground.value);}get forceNoBackground() {return this.customSettings?.noBackground ?? !1;}get hasBackgroundStroke() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.showMatchedBackgroundStroke.value : this.settings.categoryLabels.showUnmatchedBackgroundStroke.value : this.settings.dataLabels.showBackgroundStroke.value;}get color() {return this.isCategory ? this.dataPoint ? (0, r.SN4)(this.settings.categoryLabels.matchedColor, this.dataPoint.dataIndex) : this.settings.categoryLabels.unmatchedColor.value.value : (0, r.SN4)(this.settings.dataLabels.color, this.dataPoint.dataIndex);}get isAutoBackgroundColor() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedAutoBackground.value : this.settings.categoryLabels.unmatchedAutoBackground.value : this.settings.dataLabels.autoBackground.value;}get backgroundColor() {return this.isCategory ? this.dataPoint ? (0, r.SN4)(this.settings.categoryLabels.matchedBackgroundColor, this.dataPoint.dataIndex) : this.settings.categoryLabels.unmatchedBackgroundColor.value?.value : (0, r.SN4)(this.settings.dataLabels.backgroundColor, this.dataPoint.dataIndex);}get backgroundTransparency() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedBackgroundTransparency.value : this.settings.categoryLabels.unmatchedBackgroundTransparency.value : this.settings.dataLabels.backgroundTransparency.value;}get backgroundCornerRadius() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedBackgroundCornerRadius.value : this.settings.categoryLabels.unmatchedBackgroundCornerRadius.value : this.settings.dataLabels.backgroundCornerRadius.value;}get backgroundPadding() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedBackgroundPadding.value : this.settings.categoryLabels.unmatchedBackgroundPadding.value : this.settings.dataLabels.backgroundPadding.value;}get backgroundStrokeColor() {return this.isCategory ? this.dataPoint ? (0, r.SN4)(this.settings.categoryLabels.matchedBackgroundStrokeColor, this.dataPoint.dataIndex) : this.settings.categoryLabels.unmatchedBackgroundStrokeColor.value?.value : (0, r.SN4)(this.settings.dataLabels.backgroundStrokeColor, this.dataPoint.dataIndex);}get backgroundStrokeTransparency() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedBackgroundStrokeTransparency.value : this.settings.categoryLabels.unmatchedBackgroundStrokeTransparency.value : this.settings.dataLabels.backgroundStrokeTransparency.value;}get backgroundStrokeWidth() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedBackgroundStrokeWidth.value : this.settings.categoryLabels.unmatchedBackgroundStrokeWidth.value : this.settings.dataLabels.backgroundStrokeWidth.value;}get backgroundStrokeStyle() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedBackgroundStrokeStyle.value.value : this.settings.categoryLabels.unmatchedBackgroundStrokeStyle.value.value : this.settings.dataLabels.backgroundStrokeStyle.value.value;}get strokeColor() {return this.isCategory ? this.dataPoint ? (0, r.SN4)(this.settings.categoryLabels.matchedStrokeColor, this.dataPoint.dataIndex) : this.settings.categoryLabels.unmatchedStrokeColor.value?.value : (0, r.SN4)(this.settings.dataLabels.strokeColor, this.dataPoint.dataIndex);}get strokeTransparency() {return this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedStrokeTransparency.value : this.settings.categoryLabels.unmatchedStrokeTransparency.value : this.settings.dataLabels.strokeTransparency.value;}get strokeWidth() {return Math.max(.1, parseInt(this.textProps.fontSize) / 30 * (this.isCategory ? this.isMatched ? this.settings.categoryLabels.matchedStrokeWidth.value : this.settings.categoryLabels.unmatchedStrokeWidth.value : this.settings.dataLabels.strokeWidth.value));}get horizontalPosition() {if (this.hasCustomAlignment) return this.customHorizontalPosition;const t = this.isCategory ? o.Lc.CatHorizPos : o.Lc.DataHorizPos;return this.getAttributeOrSetting(t, this.isCategory ? this.settings.categoryLabels.horizontalPosition.value : this.settings.dataLabels.horizontalPosition.value);}get customHorizontalPosition() {return this.customSettings?.alignment?.horizontal || "center";}get verticalPosition() {if (this.hasCustomAlignment) return this.customVerticalPosition;const t = this.isCategory ? o.Lc.CatVertPos : o.Lc.DataVertPos;return this.getAttributeOrSetting(t, this.isCategory ? this.settings.categoryLabels.verticalPosition.value : this.settings.dataLabels.verticalPosition.value);}get customVerticalPosition() {return this.customSettings?.alignment?.vertical || "middle";}get clipText() {return !(!this.hasCustomSize && this.isOutside || this.isAutoFontSize) && (this.isCategory ? this.settings.categoryLabels.clipText.value : this.settings.dataLabels.clipText.value);}get wordWrap() {return !this.isAutoFontSize && (this.isCategory ? this.settings.categoryLabels.wordWrap.value : this.settings.dataLabels.wordWrap.value);}get canDraw() {return !(!this.isCategory && !this.dataPoint || !this.isCategory && this.dataPoint && null === this.dataPoint.dataValue.highlightValue);}get isBold() {return null != this.customSettings?.text?.bold ? this.customIsBold : this.isCategory ? this.settings.categoryLabels.font.bold.value : this.settings.dataLabels.font.bold.value;}get customIsBold() {return this.customSettings?.text?.bold ?? !1;}get isItalic() {return null != this.customSettings?.text?.italic ? this.customIsItalic : this.isCategory ? this.settings.categoryLabels.font.italic.value : this.settings.dataLabels.font.italic.value;}get customIsItalic() {return this.customSettings?.text?.italic ?? !1;}get isUnderlined() {return null != this.customSettings?.text?.underline ? this.customIsUnderlined : this.isCategory ? this.settings.categoryLabels.font.underline.value : this.settings.dataLabels.font.underline.value;}get customIsUnderlined() {return this.customSettings?.text?.underline ?? !1;}get fontFamily() {return null != this.customSettings?.text?.fontFamily ? this.customFontFamily : this.isCategory ? this.settings.categoryLabels.font.fontFamily.value : this.settings.dataLabels.font.fontFamily.value;}get customFontFamily() {return this.customSettings?.text?.fontFamily;}get fontSize() {return this.customSettings?.text?.fontSize ? this.customFontSize : this.isCategory ? this.settings.categoryLabels.font.fontSize.value : this.settings.dataLabels.font.fontSize.value;}get customFontSize() {return this.customSettings?.text?.fontSize;}get isAutoFontSize() {return !this.customSettings?.text?.fontSize && (this.isCategory ? this.settings.categoryLabels.autoFontSize.value : this.settings.dataLabels.autoFontSize.value);}get autoFontSizeScale() {return (this.isCategory ? this.settings.categoryLabels.autoFontSizeScale.value : this.settings.dataLabels.autoFontSizeScale.value) / 100;}get fingerprint() {return this._fingerprint || (this._fingerprint = (0, r.WGQ)(`${(0, r.LIG)(this.elementRect.x, 2)}-${(0, r.LIG)(this.elementRect.y, 2)}-${(0, r.LIG)(this.elementRect.width, 2)}-${(0, r.LIG)(this.elementRect.height, 2)}-${this.config.type.slice(0, 1)}${this.element.id && !this.isAutoId ? `-${this.element.id}` : ""}`)), this._fingerprint;}_fingerprint;get textSize() {return this._textSize || (this._textSize = (0, r.teP)(this.textProps, "font")), this._textSize;}_textSize;get targetSvgRect() {return { x: (this.elementRect.x - this.config.mapScale.x.min) * this.config.mapScale.x.scale, y: (this.elementRect.y - this.config.mapScale.y.min) * this.config.mapScale.y.scale, width: this.elementRect.width * this.config.mapScale.x.scale, height: this.elementRect.height * this.config.mapScale.y.scale };}get containerCoords() {const t = { x: 0, y: 0 },e = this.targetSvgRect;return !this.hasCustomPosition && this.isOutside ? ("top" === this.verticalPosition ? t.y = e.y - this.textSize.height - this.margin : "bottom" === this.verticalPosition ? t.y = e.y + e.height + this.margin : t.y = e.y + e.height / 2 - this.textSize.height / 2, "left" === this.horizontalPosition ? t.x = e.x - this.textSize.width - this.margin : "right" === this.horizontalPosition ? t.x = e.x + e.width + this.margin : t.x = e.x + e.width / 2 - this.textSize.width / 2) : (t.x = e.x, t.y = e.y), t;}getAttributeOrSetting(t, e) {const i = this.element.getAttribute(t);return null == i ? e : (0, a.yl)(i);}constructor(t, e, i, n, r, s, o, a) {this.container = t, this.elementRect = e, this.element = i, this.jsPlumb = n, this.settings = r, this.config = s, this.mapId = o, this.dataPoint = a;}updateScale(t) {this.config.mapScale = t, this.draw();}updatePosition() {if (this.hasConnector && !this.connector && this.drawConnector(!0), this.connector) try {this.jsPlumb.revalidate(this.labelElement), this.jsPlumb.revalidate(this.elementProxy);} catch (t) {}}updateSize() {this.isAutoFontSize && (this.textProps.fontSize = this.getTextFitFontSize(this.textProps), this.labelElement.style.fontSize = this.textProps.fontSize, this.hasTextStroke && (this.labelElement.style.webkitTextStrokeWidth = `${this.strokeWidth}px`)), this.updatePosition();}getText() {if (this.isCategory) {let t = this.config.text;if (t.includes("\\n") && (t = t.replace(/\\n/g, "\n")), t.match(/{.+?}/)) for (const e in this.config.customFields) {const i = new RegExp(`{${e}}`, "ig"),n = "value" === e ? this.getFormattedValueText() : this.config.customFields[e];t = t.replace(i, n);}return t;}return this.getFormattedValueText();}getTextProps() {const t = { fontFamily: this.fontFamily, fontStyle: this.isItalic ? "italic" : "normal", fontWeight: this.isBold ? "bold" : "normal", fontSize: s.fromPoint(this.fontSize), text: this.getText() };return this.isAutoFontSize && (t.fontSize = this.getTextFitFontSize(t)), t;}getFormattedValueText() {if (!this.dataPoint) return "";const t = (0, n.yk)(this.dataPoint),e = r.ZA6.instance.create({ format: this.dataPoint.dataValue.format, formatSingleValues: !1, value: t, precision: this.isCategory ? this.settings.categoryLabels.decimalPlaces.value : this.settings.dataLabels.decimalPlaces.value, displayUnitSystemType: this.isCategory ? this.settings.categoryLabels.displayUnit.value : this.settings.dataLabels.displayUnit.value, allowFormatBeautification: !0, cultureSelector: this.settings.advanced.numberLocale.value.value.toString() });return e ? e.format(t) : "";}draw() {if (this.labelContainer && this.labelContainer.remove(), !this.canDraw) return;if (this.isRendered = !0, !this.isInEditMode && this.isHidden) return;const t = "top" === this.verticalPosition ? "flex-start" : "bottom" === this.verticalPosition ? "flex-end" : "center",e = "left" === this.horizontalPosition ? "flex-start" : "right" === this.horizontalPosition ? "flex-end" : "center";if (this.textProps = this.getTextProps(), this.clipText && !this.isInEditMode && this.isInside && this.textSize.height > this.targetSvgRect.height) return;const i = (0, r.tTh)(".area-label-element", { attr: { id: this.id, [this.isCategory ? u.Category : u.Data]: this.element.id }, style: { fontFamily: this.textProps.fontFamily, fontSize: this.textProps.fontSize, fontStyle: this.textProps.fontStyle, fontWeight: this.textProps.fontWeight, textDecoration: this.isUnderlined ? "underline" : "none", color: this.color, textAlign: this.horizontalPosition, alignContent: t, alignItems: e } }, this.textProps.text);i.style.textWrap = this.wordWrap ? "wrap" : "nowrap", this.hasCustomSize && (i.style.width = this.customSettings.size.width * this.config.mapScale.x.scale + "px", i.style.height = this.customSettings.size.height * this.config.mapScale.y.scale + "px");let n = "";if (this.hasCustomPosition && (n += `translate(${this.customSettings.coords.x * this.config.mapScale.x.scale}px, ${this.customSettings.coords.y * this.config.mapScale.y.scale}px) `), this.hasCustomRotation && (n += `rotate(${this.customSettings.rotation}deg) `), this.hasCustomRotationX && (n += `rotateX(${this.customSettings.rotationX}deg) `), this.hasCustomRotationY && (n += `rotateY(${this.customSettings.rotationY}deg) `), this.hasCustomSkewX && (n += `skewX(${this.customSettings.skewX}deg) `), this.hasCustomSkewY && (n += `skewY(${this.customSettings.skewY}deg) `), n && (i.style.transform = n.trim()), this.hasTextStroke) {const t = this.strokeColor ?? (0, r.sP2)(this.color),e = 1 - this.strokeTransparency / 100;i.style.webkitTextStroke = `${this.strokeWidth}px ${(0, r.aSW)((0, r.iNF)(t, e))}`, i.style.paintOrder = "stroke";}if (this.clipText && (this.isInside && (i.style.maxWidth = "100%"), i.style.overflow = "hidden", i.style.textOverflow = "ellipsis"), this.hasBackground) {const t = this.isAutoBackgroundColor ? (0, l.w5)(this.color) : this.backgroundColor;if (t) {const e = 1 - this.backgroundTransparency / 100;i.style.background = (0, r.aSW)((0, r.iNF)(t, e));}if (i.style.padding = `${this.backgroundPadding}px`, this.backgroundCornerRadius && (i.style.borderRadius = `${this.backgroundCornerRadius}px`), this.hasBackgroundStroke) {const t = this.backgroundStrokeColor ?? this.color,e = 1 - this.backgroundStrokeTransparency / 100;i.style.border = `${this.backgroundStrokeWidth}px ${this.backgroundStrokeStyle} ${(0, r.aSW)((0, r.iNF)(t, e))}`, i.style.paintOrder = "stroke";}}this.isInEditMode && this.isHidden && (i.classList.add("custom-hidden"), i.style.opacity = "0.5"), this.labelElement = i;const s = this.containerCoords;this.labelContainer = (0, r.tTh)(".area-label-group" + (this.isInEditMode ? ".editable" : ""), this.container, { style: { left: `${s.x}px`, top: `${s.y}px`, ...(this.isInside ? { justifyContent: t, alignItems: e, height: `${this.targetSvgRect.height}px`, width: `${this.targetSvgRect.width}px` } : {}) } }, [i]), this.drawConnector();}drawConnector(t = !1) {if (this.elementProxy && this.elementProxy.remove(), this.connector && (this.connector.endpoints?.forEach((t) => this.jsPlumb.deleteEndpoint(t)), this.connector.destroy(), this.connector = null), !(t || this.hasConnector && this.hasCustomPosition)) return;const e = (0, r.aSW)((0, r.iNF)(this.connectorColor, this.isHidden ? .5 : 1)),i = this.targetSvgRect;this.elementProxy = (0, r.tTh)(".area-label-proxy", this.container, { style: { left: `${i.x}px`, top: `${i.y}px`, width: `${i.width}px`, height: `${i.height}px` } });const n = (t) => {switch (t) {case "continuous":return c.QHG.Continuous;case "center":return c.QHG.Center;case "top":return c.QHG.Top;case "right":return c.QHG.Right;case "bottom":return c.QHG.Bottom;case "left":return c.QHG.Left;case "top-left":return c.QHG.TopLeft;case "top-right":return c.QHG.TopRight;case "bottom-left":return c.QHG.BottomLeft;case "bottom-right":return c.QHG.BottomRight;default:return c.QHG.AutoDefault;}},s = (t) => {switch (t) {case "circle":return c.RSQ.type;case "rect":return c.NlZ.type;default:return c.SYk.type;}};this.connector = this.jsPlumb.connect({ source: this.labelElement, target: this.elementProxy, connector: ((t) => {const e = this.connectorGap;switch (t) {case "curved":return { type: "Bezier", options: { curviness: Math.max(1, 5 * this.connectorCurviness), gap: e } };case "arc":return { type: "StateMachine", options: { curviness: this.connectorCurviness, gap: e } };case "step":return { type: "Flowchart", options: { cornerRadius: Math.max(0, this.connectorCurviness / 5), gap: e } };default:return { type: "Straight", options: { stub: this.connectorCurviness, gap: e } };}})(this.connectorStyle), paintStyle: { stroke: e, strokeWidth: this.connectorWidth }, anchors: [n(this.connectorAnchors[0]), n(this.connectorAnchors[1])], endpoints: [s(this.connectorEndpoints[0]), s(this.connectorEndpoints[1])], overlays: (() => this.connectorEndpoints.map((t, e) => "arrow" === t ? { type: "Arrow", options: { location: 0 === e ? .01 : .99, length: 5 * this.connectorWidth, width: 5 * this.connectorWidth, height: 5 * this.connectorWidth, direction: 0 === e ? -1 : 1, foldback: .8 } } : null).filter(Boolean))() }), this.connector.endpoints.forEach((t) => {t.setPaintStyle({ fill: e, stroke: e }), this.jsPlumb.repaint(t.element);});}getTextFitFontSize(t) {const e = this.hasTextStroke ? 1 : 0;let i = Math.max(.1, s.fromPointToPixel(this.minFontSize)),n = s.fromPointToPixel(this.maxFontSize),o = i;const { width: a, height: l } = this.hasCustomSize ? { width: this.customSettings.size.width * this.config.mapScale.x.scale, height: this.customSettings.size.height * this.config.mapScale.y.scale } : this.targetSvgRect;for (; n - i > .5;) {const s = (i + n) / 2,{ width: c, height: h } = (0, r.teP)({ ...t, fontSize: `${s}px` }, "font");c > a - 2 * e || h > l - 2 * e ? n = s - .5 : (i = s + .5, o = s);}return o * this.autoFontSizeScale + "px";}select() {this.isInEditMode && this.labelElement.classList.add("selected");}deselect() {this.isInEditMode && this.labelElement.classList.remove("selected");}}function p(t) {if (t.classList.contains("area-label-element")) {const e = (0, r.sxo)(t),i = t.parentElement,n = { x: parseFloat(i.style.left || "0"), y: parseFloat(i.style.top || "0") };return { x: e.translateX + n.x + t.offsetLeft, y: e.translateY + n.y + t.offsetTop };}return { x: parseFloat(t.style.left), y: parseFloat(t.style.top) };}}, 5807: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.splitByWidth = e.getMaxWordWidth = e.wordCount = e.hasBreakers = e.find = void 0;var i = /[\s\n]+/g;function n(t, e, i) {if (i) {for (var n = t - 1; n > -1; n--) if (r(e[n])) return n + 1;} else {n = t;for (var s = e.length; n < s; n++) if (r(e[n])) return n;}return i ? 0 : e.length;}function r(t) {return i.lastIndex = 0, i.test(t);}function s(t) {return t.split(i);}function o(t, e, i) {return e.text = t, i(e);}function a(t, e, i, n) {return e.text = t, i(e, n);}e.find = function (t, e) {var i = { start: 0, end: 0 };return 0 === e.length || (i.start = n(t, e, !0), i.end = n(t, e, !1)), i;}, e.hasBreakers = r, e.wordCount = function (t) {var e = 1;for (i.lastIndex = 0, i.exec(t); 0 !== i.lastIndex;) e++, i.exec(t);return e;}, e.getMaxWordWidth = function (t, e, i) {for (var n = 0, r = 0, o = s(t); r < o.length; r++) {var a = o[r];i.text = a, n = Math.max(n, e(i));}return n;}, e.splitByWidth = function (t, e, i, n, r, l) {l = l || function (t, e) {return t.text;};for (var c = [], h = 0, u = [], d = 0, p = s(t); d < p.length; d++) {var f = p[d];if (r > 0 && c.length >= r - 1) u.push(f);else {var g = 0 === u.length ? o(f, e, i) : o(" " + f, e, i);if (h + g > n) {if (0 === u.length) {c.push(a(f, e, l, n)), h = 0, u = [];continue;}c.push(a(u.join(" "), e, l, n)), h = 0, u = [];}u.push(f), h += g;}}return u && u.length && c.push(a(u.join(" "), e, l, n)), c;};}, 5868: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(7045);function r(t) {return this.each(function () {(0, n.A)(this, t);});}}, 5872: (t, e, i) => {"use strict";i.d(e, { w: () => d });var n = i(9418),r = i(5367),s = i(1807),o = i(7077),a = i(6481),l = i(7345),c = i(2755),h = i(1299);const { sanitize: u } = n.A;class d {static IgnoreTags = ["a", "animate", "animatecolor", "animatemotion", "animatetrans", "animatetransform", "clippath", "cursor", "defs", "desc", "discard", "feblend", "fecolormatrix", "fecomponenttransfer", "fecomposite", "feconvolvematrix", "fediffuselighting", "fedisplacementmap", "fedistantlight", "fedropshadow", "feflood", "fefunca", "fefuncb", "fefuncg", "fefuncr", "fegaussianblur", "feimage", "femerge", "femergenode", "femorphology", "feoffset", "fepointlight", "fespecularlighting", "fespotlight", "fetile", "feturbulence", "filter", "font", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignobject", "glyph", "glyphref", "hkern", "image", "lineargradient", "marker", "mask", "metadata", "missing-glyph", "mpath", "pattern", "radialgradient", "script", "set", "stop", "style", "switch", "title", "tref", "tspan", "view", "vkern"];allowedTypes = ["image/svg+xml", "application/json", "application/xml", "text/xml"];imageQuality;mapAreas(t, e = null) {let i = {};const n = t.getElementsByTagName("*");for (let t = 0; t < n.length; t++) {const e = n[t];if (!e.id) continue;if (d.IgnoreTags.includes(e.tagName.toLowerCase())) continue;if (e.closest("defs")) continue;const s = e.getAttribute("title"),o = { id: e.id };s && (o.label = s);const a = e.getAttribute(r.Lc.AreaType);a && (o.type = a === r.wR.Link ? r.wR.Link : r.wR.Area);const l = e.getAttribute(r.Lc.Strong);l ? (o.strong = r.r2.Match, o.dataPoint = l) : e.hasAttribute(r.Lc.Unbound) && (o.strong = r.r2.Unmatch), this.ensureProperties(o, e), i[o.id] = o;}return e && (i = { ...i, ...e }), i;}ensureProperties(t, e) {for (const i in r.Hv) r.Hv[i].forEach((i) => {const [n, r, s] = i;let a = e.getAttribute(n);if (a) {if ("function" == typeof s && !s(a)) return;if ("boolean" == s || "!boolean" == s) {if (a = (0, o.yl)(a), "boolean" != typeof a) return;"!boolean" == s && (a = !a);}if ("number" == s && (a = Number(a), isNaN(a))) return;(0, o.TP)(t, r, a);}});}getMapRects(t) {const e = new DOMParser().parseFromString(t, "image/svg+xml"),i = (0, s.tTh)("div", document.body, { style: { visibility: "hidden", position: "absolute" } }, [e.documentElement]),n = i.getElementsByTagName("*"),r = {};for (let t = 0; t < n.length; t++) {const e = n[t];if (!e.id) continue;if (d.IgnoreTags.includes(e.tagName.toLowerCase())) continue;if (e.closest("defs")) continue;let i = { x: 0, y: 0, width: 0, height: 0 };try {i = e.getBBox();} catch (t) {try {i = e.getBoundingClientRect();} catch (t) {}}r[e.id] = { x: (0, s.LIG)(i.x, 2), y: (0, s.LIG)(i.y, 2), width: (0, s.LIG)(i.width, 2), height: (0, s.LIG)(i.height, 2) };}return i.remove(), r;}assignIdsToSvg(t) {const e = {},i = new Set(),n = new Set(),s = t.getElementsByTagName("*");for (let t = 0; t < s.length; t++) {const e = s[t].id;e && (i.has(e) && n.add(e), i.add(e));}for (let t = 0; t < s.length; t++) {const o = s[t];let a = o.id;if (a) n.has(a) && o.setAttribute("id", (0, c.Jp)(a, `${t + 1}`));else {const t = o.nodeName;e[t] || (e[t] = 1);do {a = t + e[t]++;} while (i.has(a));i.add(a), o.setAttribute("id", a), o.setAttribute(r.Lc.AutoId, "true");}}return i.clear(), n.clear(), t;}async createFromFile(t, e, i, n) {if (!t || !t.type || !this.allowedTypes.includes(t.type)) throw (0, l.T)("INVALID_FILE_TYPE");if (t.size > h.$D) throw (0, l.T)("FILE_SIZE_EXCEEDED");let r;try {r = await this.getFileContentAsString(t);} catch (t) {throw (0, l.T)("INVALID_FILE_TYPE");}if (r) return this.createFromString({ content: r, source: t.name, sourceType: t.type, sanitize: !0, name: e, id: i, existingJsvg: n });}duplicateJsvg(t) {const e = new Date().toISOString(),i = (0, o.Pu)(t.svg),n = { id: (0, s.uRe)(), name: (0, c.lx)(t.name), source: t.source, dataMapping: t.dataMapping, svg: t.svg, rects: t.rects };return t.meta ? (t.meta.created = e, delete t.meta.updated, n.meta = t.meta, n.meta.size = i) : n.meta = { created: e, size: i }, n;}async createFromString(t) {if (!t || !t.content || !t.source) return null;const e = t.sourceType && "application/json" === t.sourceType;let i = ((t) => {if (!e) return t.existingJsvg ?? null;const i = JSON.parse(t.content);if ((0, r.PJ)(i)) return i;throw (0, l.T)("INVALID_JSVG");})(t),n = e ? i.svg : t.content;t.sanitize && (n = u(n, { USE_PROFILES: { svg: !0, svgFilters: !0 }, ADD_TAGS: ["use"], ADD_ATTR: ["title", "okviz"] }));const h = (0, a.$D)(n, !0);if (h.isValid && h.svgDoc) {1 !== this.imageQuality && (await (0, a.Us)(h.svgDoc, this.imageQuality));const e = h.svgDoc.documentElement,n = i?.name || t.name || (0, o.T3)(t.source),l = this.assignIdsToSvg(h.svgDoc),u = i?.dataMapping?.areas,p = this.mapAreas(l, u),f = new XMLSerializer().serializeToString(l),g = this.getMapRects(f),m = new Date().toISOString(),v = i?.meta?.created || m,y = { id: t.id ?? (0, s.uRe)(!1), name: (0, c.lx)(n), source: t.source, dataMapping: { areas: p }, meta: { created: v, updated: m }, svg: f, rects: g },b = i?.dataMapping?.mapSelector;b && (y.dataMapping.mapSelector = b);const w = i?.meta?.author || ("svg" !== (d = e).tagName.toLowerCase() ? "" : d.getAttribute(r.Lc.SvgAuthor) || "");w && (y.meta.author = w);const x = i?.meta?.attribution || ((t) => "svg" !== t.tagName.toLowerCase() ? "" : t.getAttribute(r.Lc.SvgAttribution) || "")(e);return x && (y.meta.attribution = x), y.meta.size = (0, o.Pu)(f), i = null, y;}throw i = null, h.error;var d;}async getFileContentAsString(t) {return new Promise((e, i) => {const n = new FileReader();n.onload = () => {"string" == typeof n.result ? e(n.result) : i();}, n.onerror = () => i(), n.readAsText(t);});}}}, 5874: (t, e, i) => {"use strict";i.d(e, { EI: () => M, KB: () => P, Lv: () => lt, Oh: () => D, Q_: () => At, SG: () => Tt, WD: () => V, Xt: () => T, Yy: () => C, Zt: () => vt, _v: () => _, b_: () => j, bj: () => p, f7: () => Q, jU: () => Pt, mv: () => f, tp: () => A, y9: () => ft });var n,r = i(365),s = i(6585),o = i(1371),a = i(1339),l = i(7417);const c = new r.uY();const h = new r.uY();class u {constructor(t, e, i = [], n = "") {this.data = t, this.name = n, s.$t.prototype.hasOwnProperty("tree") || Object.defineProperty(s.$t.prototype, "tree", { get() {return f(this);} }), this.parser = e, this.extension = [E.of(this), s.$t.languageData.of((t, e, i) => {let n = d(t, e, i),r = n.type.prop(c);if (!r) return [];let s = t.facet(r),o = n.type.prop(h);if (o) {let r = n.resolve(e - n.from, i);for (let e of o) if (e.test(r, t)) {let i = t.facet(e.facet);return "replace" == e.type ? i : i.concat(s);}}return s;})].concat(i);}isActiveAt(t, e, i = -1) {return d(t, e, i).type.prop(c) == this.data;}findRegions(t) {let e = t.facet(E);if ((null == e ? void 0 : e.data) == this.data) return [{ from: 0, to: t.doc.length }];if (!e || !e.allowsNesting) return [];let i = [],n = (t, e) => {if (t.prop(c) == this.data) return void i.push({ from: e, to: e + t.length });let s = t.prop(r.uY.mounted);if (s) {if (s.tree.prop(c) == this.data) {if (s.overlay) for (let t of s.overlay) i.push({ from: t.from + e, to: t.to + e });else i.push({ from: e, to: e + t.length });return;}if (s.overlay) {let t = i.length;if (n(s.tree, s.overlay[0].from + e), i.length > t) return;}}for (let i = 0; i < t.children.length; i++) {let s = t.children[i];s instanceof r.PH && n(s, t.positions[i] + e);}};return n(f(t), 0), i;}get allowsNesting() {return !0;}}function d(t, e, i) {let n = t.facet(E),s = f(t).topNode;if (!n || n.allowsNesting) for (let t = s; t; t = t.enter(e, i, r.Qj.ExcludeBuffers)) t.type.isTop && (s = t);return s;}u.setState = s.Pe.define();class p extends u {constructor(t, e, i) {super(t, e, [], i), this.parser = e;}static define(t) {let e = (i = t.languageData, s.sj.define({ combine: i ? (t) => t.concat(i) : void 0 }));var i;return new p(e, t.parser.configure({ props: [c.add((t) => t.isTop ? e : void 0)] }), t.name);}configure(t, e) {return new p(this.data, this.parser.configure(t), e || this.name);}get allowsNesting() {return this.parser.hasWrappers();}}function f(t) {let e = t.field(u.state, !1);return e ? e.tree : r.PH.empty;}class g {constructor(t) {this.doc = t, this.cursorPos = 0, this.string = "", this.cursor = t.iter();}get length() {return this.doc.length;}syncTo(t) {return this.string = this.cursor.next(t - this.cursorPos).value, this.cursorPos = t + this.string.length, this.cursorPos - this.string.length;}chunk(t) {return this.syncTo(t), this.string;}get lineChunks() {return !0;}read(t, e) {let i = this.cursorPos - this.string.length;return t < i || e >= this.cursorPos ? this.doc.sliceString(t, e) : this.string.slice(t - i, e - i);}}let m = null;class v {constructor(t, e, i = [], n, r, s, o, a) {this.parser = t, this.state = e, this.fragments = i, this.tree = n, this.treeLen = r, this.viewport = s, this.skipped = o, this.scheduleOn = a, this.parse = null, this.tempSkipped = [];}static create(t, e, i) {return new v(t, e, [], r.PH.empty, 0, i, [], null);}startParse() {return this.parser.startParse(new g(this.state.doc), this.fragments);}work(t, e) {return null != e && e >= this.state.doc.length && (e = void 0), this.tree != r.PH.empty && this.isDone(null != e ? e : this.state.doc.length) ? (this.takeTree(), !0) : this.withContext(() => {var i;if ("number" == typeof t) {let e = Date.now() + t;t = () => Date.now() > e;}for (this.parse || (this.parse = this.startParse()), null != e && (null == this.parse.stoppedAt || this.parse.stoppedAt > e) && e < this.state.doc.length && this.parse.stopAt(e);;) {let n = this.parse.advance();if (n) {if (this.fragments = this.withoutTempSkipped(r.rr.addTree(n, this.fragments, null != this.parse.stoppedAt)), this.treeLen = null !== (i = this.parse.stoppedAt) && void 0 !== i ? i : this.state.doc.length, this.tree = n, this.parse = null, !(this.treeLen < (null != e ? e : this.state.doc.length))) return !0;this.parse = this.startParse();}if (t()) return !1;}});}takeTree() {let t, e;this.parse && (t = this.parse.parsedPos) >= this.treeLen && ((null == this.parse.stoppedAt || this.parse.stoppedAt > t) && this.parse.stopAt(t), this.withContext(() => {for (; !(e = this.parse.advance()););}), this.treeLen = t, this.tree = e, this.fragments = this.withoutTempSkipped(r.rr.addTree(this.tree, this.fragments, !0)), this.parse = null);}withContext(t) {let e = m;m = this;try {return t();} finally {m = e;}}withoutTempSkipped(t) {for (let e; e = this.tempSkipped.pop();) t = y(t, e.from, e.to);return t;}changes(t, e) {let { fragments: i, tree: n, treeLen: s, viewport: o, skipped: a } = this;if (this.takeTree(), !t.empty) {let e = [];if (t.iterChangedRanges((t, i, n, r) => e.push({ fromA: t, toA: i, fromB: n, toB: r })), i = r.rr.applyChanges(i, e), n = r.PH.empty, s = 0, o = { from: t.mapPos(o.from, -1), to: t.mapPos(o.to, 1) }, this.skipped.length) {a = [];for (let e of this.skipped) {let i = t.mapPos(e.from, 1),n = t.mapPos(e.to, -1);i < n && a.push({ from: i, to: n });}}}return new v(this.parser, e, i, n, s, o, a, this.scheduleOn);}updateViewport(t) {if (this.viewport.from == t.from && this.viewport.to == t.to) return !1;this.viewport = t;let e = this.skipped.length;for (let e = 0; e < this.skipped.length; e++) {let { from: i, to: n } = this.skipped[e];i < t.to && n > t.from && (this.fragments = y(this.fragments, i, n), this.skipped.splice(e--, 1));}return !(this.skipped.length >= e || (this.reset(), 0));}reset() {this.parse && (this.takeTree(), this.parse = null);}skipUntilInView(t, e) {this.skipped.push({ from: t, to: e });}static getSkippingParser(t) {return new class extends r.iX {createParse(e, i, n) {let s = n[0].from,o = n[n.length - 1].to;return { parsedPos: s, advance() {let e = m;if (e) {for (let t of n) e.tempSkipped.push(t);t && (e.scheduleOn = e.scheduleOn ? Promise.all([e.scheduleOn, t]) : t);}return this.parsedPos = o, new r.PH(r.Z6.none, [], [], o - s);}, stoppedAt: null, stopAt() {} };}}();}isDone(t) {t = Math.min(t, this.state.doc.length);let e = this.fragments;return this.treeLen >= t && e.length && 0 == e[0].from && e[0].to >= t;}static get() {return m;}}function y(t, e, i) {return r.rr.applyChanges(t, [{ fromA: e, toA: i, fromB: e, toB: i }]);}class b {constructor(t) {this.context = t, this.tree = t.tree;}apply(t) {if (!t.docChanged && this.tree == this.context.tree) return this;let e = this.context.changes(t.changes, t.state),i = this.context.treeLen == t.startState.doc.length ? void 0 : Math.max(t.changes.mapPos(this.context.treeLen), e.viewport.to);return e.work(20, i) || e.takeTree(), new b(e);}static init(t) {let e = Math.min(3e3, t.doc.length),i = v.create(t.facet(E).parser, t, { from: 0, to: e });return i.work(20, e) || i.takeTree(), new b(i);}}u.state = s.sU.define({ create: b.init, update(t, e) {for (let t of e.effects) if (t.is(u.setState)) return t.value;return e.startState.facet(E) != e.state.facet(E) ? b.init(e.state) : t.apply(e);} });let w = (t) => {let e = setTimeout(() => t(), 500);return () => clearTimeout(e);};"undefined" != typeof requestIdleCallback && (w = (t) => {let e = -1,i = setTimeout(() => {e = requestIdleCallback(t, { timeout: 400 });}, 100);return () => e < 0 ? clearTimeout(i) : cancelIdleCallback(e);});const x = "undefined" != typeof navigator && (null === (n = navigator.scheduling) || void 0 === n ? void 0 : n.isInputPending) ? () => navigator.scheduling.isInputPending() : null,S = o.Z9.fromClass(class {constructor(t) {this.view = t, this.working = null, this.workScheduled = 0, this.chunkEnd = -1, this.chunkBudget = -1, this.work = this.work.bind(this), this.scheduleWork();}update(t) {let e = this.view.state.field(u.state).context;(e.updateViewport(t.view.viewport) || this.view.viewport.to > e.treeLen) && this.scheduleWork(), (t.docChanged || t.selectionSet) && (this.view.hasFocus && (this.chunkBudget += 50), this.scheduleWork()), this.checkAsyncSchedule(e);}scheduleWork() {if (this.working) return;let { state: t } = this.view,e = t.field(u.state);e.tree == e.context.tree && e.context.isDone(t.doc.length) || (this.working = w(this.work));}work(t) {this.working = null;let e = Date.now();if (this.chunkEnd < e && (this.chunkEnd < 0 || this.view.hasFocus) && (this.chunkEnd = e + 3e4, this.chunkBudget = 3e3), this.chunkBudget <= 0) return;let { state: i, viewport: { to: n } } = this.view,r = i.field(u.state);if (r.tree == r.context.tree && r.context.isDone(n + 1e5)) return;let s = Date.now() + Math.min(this.chunkBudget, 100, t && !x ? Math.max(25, t.timeRemaining() - 5) : 1e9),o = r.context.treeLen < n && i.doc.length > n + 1e3,a = r.context.work(() => x && x() || Date.now() > s, n + (o ? 0 : 1e5));this.chunkBudget -= Date.now() - e, (a || this.chunkBudget <= 0) && (r.context.takeTree(), this.view.dispatch({ effects: u.setState.of(new b(r.context)) })), this.chunkBudget > 0 && (!a || o) && this.scheduleWork(), this.checkAsyncSchedule(r.context);}checkAsyncSchedule(t) {t.scheduleOn && (this.workScheduled++, t.scheduleOn.then(() => this.scheduleWork()).catch((t) => (0, o.c_)(this.view.state, t)).then(() => this.workScheduled--), t.scheduleOn = null);}destroy() {this.working && this.working();}isWorking() {return !!(this.working || this.workScheduled > 0);}}, { eventHandlers: { focus() {this.scheduleWork();} } }),E = s.sj.define({ combine: (t) => t.length ? t[0] : null, enables: (t) => [u.state, S, o.Lz.contentAttributes.compute([t], (e) => {let i = e.facet(t);return i && i.name ? { "data-language": i.name } : {};})] });class C {constructor(t, e = []) {this.language = t, this.support = e, this.extension = [t, e];}}const k = s.sj.define(),T = s.sj.define({ combine: (t) => {if (!t.length) return "  ";let e = t[0];if (!e || /\S/.test(e) || Array.from(e).some((t) => t != e[0])) throw new Error("Invalid indent unit: " + JSON.stringify(t[0]));return e;} });function A(t) {let e = t.facet(T);return 9 == e.charCodeAt(0) ? t.tabSize * e.length : e.length;}function M(t, e) {let i = "",n = t.tabSize,r = t.facet(T)[0];if ("\t" == r) {for (; e >= n;) i += "\t", e -= n;r = " ";}for (let t = 0; t < e; t++) i += r;return i;}function _(t, e) {t instanceof s.$t && (t = new P(t));for (let i of t.state.facet(k)) {let n = i(t, e);if (void 0 !== n) return n;}let i = f(t.state);return i.length >= e ? function (t, e, i) {let n = e.resolveStack(i),r = e.resolveInner(i, -1).resolve(i, 0).enterUnfinishedNodesBefore(i);if (r != n.node) {let t = [];for (let e = r; e && !(e.from < n.node.from || e.to > n.node.to || e.from == n.node.from && e.type == n.node.type); e = e.parent) t.push(e);for (let e = t.length - 1; e >= 0; e--) n = { node: t[e], next: n };}return O(n, t, i);}(t, i, e) : null;}class P {constructor(t, e = {}) {this.state = t, this.options = e, this.unit = A(t);}lineAt(t, e = 1) {let i = this.state.doc.lineAt(t),{ simulateBreak: n, simulateDoubleBreak: r } = this.options;return null != n && n >= i.from && n <= i.to ? r && n == t ? { text: "", from: t } : (e < 0 ? n < t : n <= t) ? { text: i.text.slice(n - i.from), from: n } : { text: i.text.slice(0, n - i.from), from: i.from } : i;}textAfterPos(t, e = 1) {if (this.options.simulateDoubleBreak && t == this.options.simulateBreak) return "";let { text: i, from: n } = this.lineAt(t, e);return i.slice(t - n, Math.min(i.length, t + 100 - n));}column(t, e = 1) {let { text: i, from: n } = this.lineAt(t, e),r = this.countColumn(i, t - n),s = this.options.overrideIndentation ? this.options.overrideIndentation(n) : -1;return s > -1 && (r += s - this.countColumn(i, i.search(/\S|$/))), r;}countColumn(t, e = t.length) {return (0, s.y$)(t, this.state.tabSize, e);}lineIndent(t, e = 1) {let { text: i, from: n } = this.lineAt(t, e),r = this.options.overrideIndentation;if (r) {let t = r(n);if (t > -1) return t;}return this.countColumn(i, i.search(/\S|$/));}get simulatedBreak() {return this.options.simulateBreak || null;}}const D = new r.uY();function O(t, e, i) {for (let n = t; n; n = n.next) {let t = I(n.node);if (t) return t(R.create(e, i, n));}return 0;}function I(t) {let e = t.type.prop(D);if (e) return e;let i,n = t.firstChild;if (n && (i = n.type.prop(r.uY.closedBy))) {let e = t.lastChild,n = e && i.indexOf(e.name) > -1;return (t) => function (t, e, i, n, r) {let s = t.textAfter,o = s.match(/^\s*/)[0].length,a = n && s.slice(o, o + n.length) == n || r == t.pos + o,l = e ? function (t) {let e = t.node,i = e.childAfter(e.from),n = e.lastChild;if (!i) return null;let r = t.options.simulateBreak,s = t.state.doc.lineAt(i.from),o = null == r || r <= s.from ? s.to : Math.min(s.to, r);for (let t = i.to;;) {let r = e.childAfter(t);if (!r || r == n) return null;if (!r.type.isSkipped) {if (r.from >= o) return null;let t = /^ */.exec(s.text.slice(i.to - s.from))[0].length;return { from: i.from, to: i.to + t };}t = r.to;}}(t) : null;return l ? a ? t.column(l.from) : t.column(l.to) : t.baseIndent + (a ? 0 : t.unit * i);}(t, !0, 1, void 0, n && !function (t) {return t.pos == t.options.simulateBreak && t.options.simulateDoubleBreak;}(t) ? e.from : void 0);}return null == t.parent ? F : null;}function F() {return 0;}class R extends P {constructor(t, e, i) {super(t.state, t.options), this.base = t, this.pos = e, this.context = i;}get node() {return this.context.node;}static create(t, e, i) {return new R(t, e, i);}get textAfter() {return this.textAfterPos(this.pos);}get baseIndent() {return this.baseIndentFor(this.node);}baseIndentFor(t) {let e = this.state.doc.lineAt(t.from);for (;;) {let i = t.resolve(e.from);for (; i.parent && i.parent.from == i.from;) i = i.parent;if (L(i, t)) break;e = this.state.doc.lineAt(i.from);}return this.lineIndent(e.from);}continue() {return O(this.context.next, this.base, this.pos);}}function L(t, e) {for (let i = e; i; i = i.parent) if (t == i) return !0;return !1;}const N = 200;function V() {return s.$t.transactionFilter.of((t) => {if (!t.docChanged || !t.isUserEvent("input.type") && !t.isUserEvent("input.complete")) return t;let e = t.startState.languageDataAt("indentOnInput", t.startState.selection.main.head);if (!e.length) return t;let i = t.newDoc,{ head: n } = t.newSelection.main,r = i.lineAt(n);if (n > r.from + N) return t;let s = i.sliceString(r.from, n);if (!e.some((t) => t.test(s))) return t;let { state: o } = t,a = -1,l = [];for (let { head: t } of o.selection.ranges) {let e = o.doc.lineAt(t);if (e.from == a) continue;a = e.from;let i = _(o, e.from);if (null == i) continue;let n = /^\s*/.exec(e.text)[0],r = M(o, i);n != r && l.push({ from: e.from, to: e.from + n.length, insert: r });}return l.length ? [t, { changes: l, sequential: !0 }] : t;});}const B = s.sj.define(),j = new r.uY();function z(t) {let e = t.lastChild;return e && e.to == t.to && e.type.isError;}function U(t, e, i) {for (let n of t.facet(B)) {let r = n(t, e, i);if (r) return r;}return function (t, e, i) {let n = f(t);if (n.length < i) return null;let r = null;for (let s = n.resolveStack(i, 1); s; s = s.next) {let o = s.node;if (o.to <= i || o.from > i) continue;if (r && o.from < e) break;let a = o.type.prop(j);if (a && (o.to < n.length - 50 || n.length == t.doc.length || !z(o))) {let n = a(o, t);n && n.from <= i && n.from >= e && n.to > i && (r = n);}}return r;}(t, e, i);}function H(t, e) {let i = e.mapPos(t.from, 1),n = e.mapPos(t.to, -1);return i >= n ? void 0 : { from: i, to: n };}const q = s.Pe.define({ map: H }),$ = s.Pe.define({ map: H });function G(t) {let e = [];for (let { head: i } of t.state.selection.ranges) e.some((t) => t.from <= i && t.to >= i) || e.push(t.lineBlockAt(i));return e;}const W = s.sU.define({ create: () => o.NZ.none, update(t, e) {e.isUserEvent("delete") && e.changes.iterChangedRanges((e, i) => t = K(t, e, i)), t = t.map(e.changes);for (let i of e.effects) if (i.is(q) && !Y(t, i.value.from, i.value.to)) {let { preparePlaceholder: n } = e.state.facet(et),r = n ? o.NZ.replace({ widget: new st(n(e.state, i.value)) }) : rt;t = t.update({ add: [r.range(i.value.from, i.value.to)] });} else i.is($) && (t = t.update({ filter: (t, e) => i.value.from != t || i.value.to != e, filterFrom: i.value.from, filterTo: i.value.to }));return e.selection && (t = K(t, e.selection.main.head)), t;}, provide: (t) => o.Lz.decorations.from(t), toJSON(t, e) {let i = [];return t.between(0, e.doc.length, (t, e) => {i.push(t, e);}), i;}, fromJSON(t) {if (!Array.isArray(t) || t.length % 2) throw new RangeError("Invalid JSON for fold state");let e = [];for (let i = 0; i < t.length;) {let n = t[i++],r = t[i++];if ("number" != typeof n || "number" != typeof r) throw new RangeError("Invalid JSON for fold state");e.push(rt.range(n, r));}return o.NZ.set(e, !0);} });function K(t, e, i = e) {let n = !1;return t.between(e, i, (t, r) => {t < i && r > e && (n = !0);}), n ? t.update({ filterFrom: e, filterTo: i, filter: (t, n) => t >= i || n <= e }) : t;}function Z(t, e, i) {var n;let r = null;return null === (n = t.field(W, !1)) || void 0 === n || n.between(e, i, (t, e) => {(!r || r.from > t) && (r = { from: t, to: e });}), r;}function Y(t, e, i) {let n = !1;return t.between(e, e, (t, r) => {t == e && r == i && (n = !0);}), n;}function X(t, e) {return t.field(W, !1) ? e : e.concat(s.Pe.appendConfig.of(it()));}function J(t, e, i = !0) {let n = t.state.doc.lineAt(e.from).number,r = t.state.doc.lineAt(e.to).number;return o.Lz.announce.of(`${t.state.phrase(i ? "Folded lines" : "Unfolded lines")} ${n} ${t.state.phrase("to")} ${r}.`);}const Q = [{ key: "Ctrl-Shift-[", mac: "Cmd-Alt-[", run: (t) => {for (let e of G(t)) {let i = U(t.state, e.from, e.to);if (i) return t.dispatch({ effects: X(t.state, [q.of(i), J(t, i)]) }), !0;}return !1;} }, { key: "Ctrl-Shift-]", mac: "Cmd-Alt-]", run: (t) => {if (!t.state.field(W, !1)) return !1;let e = [];for (let i of G(t)) {let n = Z(t.state, i.from, i.to);n && e.push($.of(n), J(t, n, !1));}return e.length && t.dispatch({ effects: e }), e.length > 0;} }, { key: "Ctrl-Alt-[", run: (t) => {let { state: e } = t,i = [];for (let n = 0; n < e.doc.length;) {let r = t.lineBlockAt(n),s = U(e, r.from, r.to);s && i.push(q.of(s)), n = (s ? t.lineBlockAt(s.to) : r).to + 1;}return i.length && t.dispatch({ effects: X(t.state, i) }), !!i.length;} }, { key: "Ctrl-Alt-]", run: (t) => {let e = t.state.field(W, !1);if (!e || !e.size) return !1;let i = [];return e.between(0, t.state.doc.length, (t, e) => {i.push($.of({ from: t, to: e }));}), t.dispatch({ effects: i }), !0;} }],tt = { placeholderDOM: null, preparePlaceholder: null, placeholderText: "" },et = s.sj.define({ combine: (t) => (0, s.QR)(t, tt) });function it(t) {let e = [W, ct];return t && e.push(et.of(t)), e;}function nt(t, e) {let { state: i } = t,n = i.facet(et),r = (e) => {let i = t.lineBlockAt(t.posAtDOM(e.target)),n = Z(t.state, i.from, i.to);n && t.dispatch({ effects: $.of(n) }), e.preventDefault();};if (n.placeholderDOM) return n.placeholderDOM(t, r, e);let s = document.createElement("span");return s.textContent = n.placeholderText, s.setAttribute("aria-label", i.phrase("folded code")), s.title = i.phrase("unfold"), s.className = "cm-foldPlaceholder", s.onclick = r, s;}const rt = o.NZ.replace({ widget: new class extends o.xO {toDOM(t) {return nt(t, null);}}() });class st extends o.xO {constructor(t) {super(), this.value = t;}eq(t) {return this.value == t.value;}toDOM(t) {return nt(t, this.value);}}const ot = { openText: "", closedText: "", markerDOM: null, domEventHandlers: {}, foldingChanged: () => !1 };class at extends o.wJ {constructor(t, e) {super(), this.config = t, this.open = e;}eq(t) {return this.config == t.config && this.open == t.open;}toDOM(t) {if (this.config.markerDOM) return this.config.markerDOM(this.open);let e = document.createElement("span");return e.textContent = this.open ? this.config.openText : this.config.closedText, e.title = t.state.phrase(this.open ? "Fold line" : "Unfold line"), e;}}function lt(t = {}) {let e = { ...ot, ...t },i = new at(e, !0),n = new at(e, !1),r = o.Z9.fromClass(class {constructor(t) {this.from = t.viewport.from, this.markers = this.buildMarkers(t);}update(t) {(t.docChanged || t.viewportChanged || t.startState.facet(E) != t.state.facet(E) || t.startState.field(W, !1) != t.state.field(W, !1) || f(t.startState) != f(t.state) || e.foldingChanged(t)) && (this.markers = this.buildMarkers(t.view));}buildMarkers(t) {let e = new s.vB();for (let r of t.viewportLineBlocks) {let s = Z(t.state, r.from, r.to) ? n : U(t.state, r.from, r.to) ? i : null;s && e.add(r.from, r.from, s);}return e.finish();}}),{ domEventHandlers: a } = e;return [r, (0, o.cU)({ class: "cm-foldGutter", markers(t) {var e;return (null === (e = t.plugin(r)) || void 0 === e ? void 0 : e.markers) || s.om.empty;}, initialSpacer: () => new at(e, !1), domEventHandlers: { ...a, click: (t, e, i) => {if (a.click && a.click(t, e, i)) return !0;let n = Z(t.state, e.from, e.to);if (n) return t.dispatch({ effects: $.of(n) }), !0;let r = U(t.state, e.from, e.to);return !!r && (t.dispatch({ effects: q.of(r) }), !0);} } }), it()];}const ct = o.Lz.baseTheme({ ".cm-foldPlaceholder": { backgroundColor: "#eee", border: "1px solid #ddd", color: "#888", borderRadius: ".2em", margin: "0 1px", padding: "0 1px", cursor: "pointer" }, ".cm-foldGutter span": { padding: "0 1px", cursor: "pointer" } });class ht {constructor(t, e) {let i;function n(t) {let e = l.G.newName();return (i || (i = Object.create(null)))["." + e] = t, e;}this.specs = t;const r = "string" == typeof e.all ? e.all : e.all ? n(e.all) : void 0,s = e.scope;this.scope = s instanceof u ? (t) => t.prop(c) == s.data : s ? (t) => t == s : void 0, this.style = (0, a.az)(t.map((t) => ({ tag: t.tag, class: t.class || n(Object.assign({}, t, { tag: null })) })), { all: r }).style, this.module = i ? new l.G(i) : null, this.themeType = e.themeType;}static define(t, e) {return new ht(t, e || {});}}const ut = s.sj.define(),dt = s.sj.define({ combine: (t) => t.length ? [t[0]] : null });function pt(t) {let e = t.facet(ut);return e.length ? e : t.facet(dt);}function ft(t, e) {let i,n = [mt];return t instanceof ht && (t.module && n.push(o.Lz.styleModule.of(t.module)), i = t.themeType), (null == e ? void 0 : e.fallback) ? n.push(dt.of(t)) : i ? n.push(ut.computeN([o.Lz.darkTheme], (e) => e.facet(o.Lz.darkTheme) == ("dark" == i) ? [t] : [])) : n.push(ut.of(t)), n;}class gt {constructor(t) {this.markCache = Object.create(null), this.tree = f(t.state), this.decorations = this.buildDeco(t, pt(t.state)), this.decoratedTo = t.viewport.to;}update(t) {let e = f(t.state),i = pt(t.state),n = i != pt(t.startState),{ viewport: r } = t.view,s = t.changes.mapPos(this.decoratedTo, 1);e.length < r.to && !n && e.type == this.tree.type && s >= r.to ? (this.decorations = this.decorations.map(t.changes), this.decoratedTo = s) : (e != this.tree || t.viewportChanged || n) && (this.tree = e, this.decorations = this.buildDeco(t.view, i), this.decoratedTo = r.to);}buildDeco(t, e) {if (!e || !this.tree.length) return o.NZ.none;let i = new s.vB();for (let { from: n, to: r } of t.visibleRanges) (0, a.DM)(this.tree, e, (t, e, n) => {i.add(t, e, this.markCache[n] || (this.markCache[n] = o.NZ.mark({ class: n })));}, n, r);return i.finish();}}const mt = s.Nb.high(o.Z9.fromClass(gt, { decorations: (t) => t.decorations })),vt = ht.define([{ tag: a._A.meta, color: "#404740" }, { tag: a._A.link, textDecoration: "underline" }, { tag: a._A.heading, textDecoration: "underline", fontWeight: "bold" }, { tag: a._A.emphasis, fontStyle: "italic" }, { tag: a._A.strong, fontWeight: "bold" }, { tag: a._A.strikethrough, textDecoration: "line-through" }, { tag: a._A.keyword, color: "#708" }, { tag: [a._A.atom, a._A.bool, a._A.url, a._A.contentSeparator, a._A.labelName], color: "#219" }, { tag: [a._A.literal, a._A.inserted], color: "#164" }, { tag: [a._A.string, a._A.deleted], color: "#a11" }, { tag: [a._A.regexp, a._A.escape, a._A.special(a._A.string)], color: "#e40" }, { tag: a._A.definition(a._A.variableName), color: "#00f" }, { tag: a._A.local(a._A.variableName), color: "#30a" }, { tag: [a._A.typeName, a._A.namespace], color: "#085" }, { tag: a._A.className, color: "#167" }, { tag: [a._A.special(a._A.variableName), a._A.macroName], color: "#256" }, { tag: a._A.definition(a._A.propertyName), color: "#00c" }, { tag: a._A.comment, color: "#940" }, { tag: a._A.invalid, color: "#f00" }]),yt = o.Lz.baseTheme({ "&.cm-focused .cm-matchingBracket": { backgroundColor: "#328c8252" }, "&.cm-focused .cm-nonmatchingBracket": { backgroundColor: "#bb555544" } }),bt = 1e4,wt = "()[]{}",xt = s.sj.define({ combine: (t) => (0, s.QR)(t, { afterCursor: !0, brackets: wt, maxScanDistance: bt, renderMatch: Ct }) }),St = o.NZ.mark({ class: "cm-matchingBracket" }),Et = o.NZ.mark({ class: "cm-nonmatchingBracket" });function Ct(t) {let e = [],i = t.matched ? St : Et;return e.push(i.range(t.start.from, t.start.to)), t.end && e.push(i.range(t.end.from, t.end.to)), e;}const kt = [s.sU.define({ create: () => o.NZ.none, update(t, e) {if (!e.docChanged && !e.selection) return t;let i = [],n = e.state.facet(xt);for (let t of e.state.selection.ranges) {if (!t.empty) continue;let r = Pt(e.state, t.head, -1, n) || t.head > 0 && Pt(e.state, t.head - 1, 1, n) || n.afterCursor && (Pt(e.state, t.head, 1, n) || t.head < e.state.doc.length && Pt(e.state, t.head + 1, -1, n));r && (i = i.concat(n.renderMatch(r, e.state)));}return o.NZ.set(i, !0);}, provide: (t) => o.Lz.decorations.from(t) }), yt];function Tt(t = {}) {return [xt.of(t), kt];}const At = new r.uY();function Mt(t, e, i) {let n = t.prop(e < 0 ? r.uY.openedBy : r.uY.closedBy);if (n) return n;if (1 == t.name.length) {let n = i.indexOf(t.name);if (n > -1 && n % 2 == (e < 0 ? 1 : 0)) return [i[n + e]];}return null;}function _t(t) {let e = t.type.prop(At);return e ? e(t.node) : t;}function Pt(t, e, i, n = {}) {let r = n.maxScanDistance || bt,s = n.brackets || wt,o = f(t),a = o.resolveInner(e, i);for (let t = a; t; t = t.parent) {let n = Mt(t.type, i, s);if (n && t.from < t.to) {let r = _t(t);if (r && (i > 0 ? e >= r.from && e < r.to : e > r.from && e <= r.to)) return Dt(0, 0, i, t, r, n, s);}}return function (t, e, i, n, r, s, o) {let a = i < 0 ? t.sliceDoc(e - 1, e) : t.sliceDoc(e, e + 1),l = o.indexOf(a);if (l < 0 || l % 2 == 0 != i > 0) return null;let c = { from: i < 0 ? e - 1 : e, to: i > 0 ? e + 1 : e },h = t.doc.iterRange(e, i > 0 ? t.doc.length : 0),u = 0;for (let t = 0; !h.next().done && t <= s;) {let s = h.value;i < 0 && (t += s.length);let a = e + t * i;for (let t = i > 0 ? 0 : s.length - 1, e = i > 0 ? s.length : -1; t != e; t += i) {let e = o.indexOf(s[t]);if (!(e < 0 || n.resolveInner(a + t, 1).type != r)) if (e % 2 == 0 == i > 0) u++;else {if (1 == u) return { start: c, end: { from: a + t, to: a + t + 1 }, matched: e >> 1 == l >> 1 };u--;}}i > 0 && (t += s.length);}return h.done ? { start: c, matched: !1 } : null;}(t, e, i, o, a.type, r, s);}function Dt(t, e, i, n, r, s, o) {let a = n.parent,l = { from: r.from, to: r.to },c = 0,h = null == a ? void 0 : a.cursor();if (h && (i < 0 ? h.childBefore(n.from) : h.childAfter(n.to))) do {if (i < 0 ? h.to <= n.from : h.from >= n.to) {if (0 == c && s.indexOf(h.type.name) > -1 && h.from < h.to) {let t = _t(h);return { start: l, end: t ? { from: t.from, to: t.to } : void 0, matched: !0 };}if (Mt(h.type, i, o)) c++;else if (Mt(h.type, -i, o)) {if (0 == c) {let t = _t(h);return { start: l, end: t && t.from < t.to ? { from: t.from, to: t.to } : void 0, matched: !1 };}c--;}}} while (i < 0 ? h.prevSibling() : h.nextSibling());return { start: l, matched: !1 };}const Ot = Object.create(null),It = [r.Z6.none],Ft = [],Rt = Object.create(null),Lt = Object.create(null);for (let [t, e] of [["variable", "variableName"], ["variable-2", "variableName.special"], ["string-2", "string.special"], ["def", "variableName.definition"], ["tag", "tagName"], ["attribute", "attributeName"], ["type", "typeName"], ["builtin", "variableName.standard"], ["qualifier", "modifier"], ["error", "invalid"], ["header", "heading"], ["property", "propertyName"]]) Lt[t] = Vt(Ot, e);function Nt(t, e) {Ft.indexOf(t) > -1 || (Ft.push(t), console.warn(e));}function Vt(t, e) {let i = [];for (let n of e.split(" ")) {let e = [];for (let i of n.split(".")) {let n = t[i] || a._A[i];n ? "function" == typeof n ? e.length ? e = e.map(n) : Nt(i, `Modifier ${i} used at start of tag`) : e.length ? Nt(i, `Tag ${i} used as modifier`) : e = Array.isArray(n) ? n : [n] : Nt(i, `Unknown highlighting tag ${i}`);}for (let t of e) i.push(t);}if (!i.length) return 0;let n = e.replace(/ /g, "_"),s = n + " " + i.map((t) => t.id),o = Rt[s];if (o) return o.id;let l = Rt[s] = r.Z6.define({ id: It.length, name: n, props: [(0, a.pn)({ [n]: i })] });return It.push(l), l.id;}o.OP.RTL, o.OP.LTR;}, 5888: (t, e, i) => {"use strict";i.d(e, { A: () => m });var n = function (t, e) {return Number(t.slice(0, -1 * e.length));},r = function (t) {return t.endsWith("px") ? { value: t, type: "px", numeric: n(t, "px") } : t.endsWith("fr") ? { value: t, type: "fr", numeric: n(t, "fr") } : t.endsWith("%") ? { value: t, type: "%", numeric: n(t, "%") } : "auto" === t ? { value: t, type: "auto" } : null;},s = function (t) {return t.split(" ").map(r);},o = function (t, e, i) {return e.concat(i).map(function (e) {return e.style[t];}).filter(function (t) {return void 0 !== t && "" !== t;});},a = function (t) {for (var e = 0; e < t.length; e++) if (t[e].numeric > 0) return e;return null;},l = function () {return !1;},c = function (t, e, i) {t.style[e] = i;},h = function (t, e, i) {var n = t[e];return void 0 !== n ? n : i;};function u(t) {var e;return (e = []).concat.apply(e, Array.from(t.ownerDocument.styleSheets).map(function (t) {var e = [];try {e = Array.from(t.cssRules || []);} catch (t) {}return e;})).filter(function (e) {var i = !1;try {i = t.matches(e.selectorText);} catch (t) {}return i;});}var d = function (t, e, i) {this.direction = t, this.element = e.element, this.track = e.track, "column" === t ? (this.gridTemplateProp = "grid-template-columns", this.gridGapProp = "grid-column-gap", this.cursor = h(i, "columnCursor", h(i, "cursor", "col-resize")), this.snapOffset = h(i, "columnSnapOffset", h(i, "snapOffset", 30)), this.dragInterval = h(i, "columnDragInterval", h(i, "dragInterval", 1)), this.clientAxis = "clientX", this.optionStyle = h(i, "gridTemplateColumns")) : "row" === t && (this.gridTemplateProp = "grid-template-rows", this.gridGapProp = "grid-row-gap", this.cursor = h(i, "rowCursor", h(i, "cursor", "row-resize")), this.snapOffset = h(i, "rowSnapOffset", h(i, "snapOffset", 30)), this.dragInterval = h(i, "rowDragInterval", h(i, "dragInterval", 1)), this.clientAxis = "clientY", this.optionStyle = h(i, "gridTemplateRows")), this.onDragStart = h(i, "onDragStart", l), this.onDragEnd = h(i, "onDragEnd", l), this.onDrag = h(i, "onDrag", l), this.writeStyle = h(i, "writeStyle", c), this.startDragging = this.startDragging.bind(this), this.stopDragging = this.stopDragging.bind(this), this.drag = this.drag.bind(this), this.minSizeStart = e.minSizeStart, this.minSizeEnd = e.minSizeEnd, e.element && (this.element.addEventListener("mousedown", this.startDragging), this.element.addEventListener("touchstart", this.startDragging));};d.prototype.getDimensions = function () {var t = this.grid.getBoundingClientRect(),e = t.width,i = t.height,n = t.top,r = t.bottom,s = t.left,o = t.right;"column" === this.direction ? (this.start = n, this.end = r, this.size = i) : "row" === this.direction && (this.start = s, this.end = o, this.size = e);}, d.prototype.getSizeAtTrack = function (t, e) {return function (t, e, i, n) {void 0 === i && (i = 0), void 0 === n && (n = !1);var r = n ? t + 1 : t;return e.slice(0, r).reduce(function (t, e) {return t + e.numeric;}, 0) + (i ? t * i : 0);}(t, this.computedPixels, this.computedGapPixels, e);}, d.prototype.getSizeOfTrack = function (t) {return this.computedPixels[t].numeric;}, d.prototype.getRawTracks = function () {var t = o(this.gridTemplateProp, [this.grid], u(this.grid));if (!t.length) {if (this.optionStyle) return this.optionStyle;throw Error("Unable to determine grid template tracks from styles.");}return t[0];}, d.prototype.getGap = function () {var t = o(this.gridGapProp, [this.grid], u(this.grid));return t.length ? t[0] : null;}, d.prototype.getRawComputedTracks = function () {return window.getComputedStyle(this.grid)[this.gridTemplateProp];}, d.prototype.getRawComputedGap = function () {return window.getComputedStyle(this.grid)[this.gridGapProp];}, d.prototype.setTracks = function (t) {this.tracks = t.split(" "), this.trackValues = s(t);}, d.prototype.setComputedTracks = function (t) {this.computedTracks = t.split(" "), this.computedPixels = s(t);}, d.prototype.setGap = function (t) {this.gap = t;}, d.prototype.setComputedGap = function (t) {var e;this.computedGap = t, this.computedGapPixels = ((e = this.computedGap).endsWith("px") ? Number(e.slice(0, -2)) : null) || 0;}, d.prototype.getMousePosition = function (t) {return "touches" in t ? t.touches[0][this.clientAxis] : t[this.clientAxis];}, d.prototype.startDragging = function (t) {if (!("button" in t) || 0 === t.button) {t.preventDefault(), this.element ? this.grid = this.element.parentNode : this.grid = t.target.parentNode, this.getDimensions(), this.setTracks(this.getRawTracks()), this.setComputedTracks(this.getRawComputedTracks()), this.setGap(this.getGap()), this.setComputedGap(this.getRawComputedGap());var e = this.trackValues.filter(function (t) {return "%" === t.type;}),i = this.trackValues.filter(function (t) {return "fr" === t.type;});if (this.totalFrs = i.length, this.totalFrs) {var n = a(i);null !== n && (this.frToPixels = this.computedPixels[n].numeric / i[n].numeric);}if (e.length) {var r = a(e);null !== r && (this.percentageToPixels = this.computedPixels[r].numeric / e[r].numeric);}var s = this.getSizeAtTrack(this.track, !1) + this.start;if (this.dragStartOffset = this.getMousePosition(t) - s, this.aTrack = this.track - 1, !(this.track < this.tracks.length - 1)) throw Error("Invalid track index: " + this.track + ". Track must be between two other tracks and only " + this.tracks.length + " tracks were found.");this.bTrack = this.track + 1, this.aTrackStart = this.getSizeAtTrack(this.aTrack, !1) + this.start, this.bTrackEnd = this.getSizeAtTrack(this.bTrack, !0) + this.start, this.dragging = !0, window.addEventListener("mouseup", this.stopDragging), window.addEventListener("touchend", this.stopDragging), window.addEventListener("touchcancel", this.stopDragging), window.addEventListener("mousemove", this.drag), window.addEventListener("touchmove", this.drag), this.grid.addEventListener("selectstart", l), this.grid.addEventListener("dragstart", l), this.grid.style.userSelect = "none", this.grid.style.webkitUserSelect = "none", this.grid.style.MozUserSelect = "none", this.grid.style.pointerEvents = "none", this.grid.style.cursor = this.cursor, window.document.body.style.cursor = this.cursor, this.onDragStart(this.direction, this.track);}}, d.prototype.stopDragging = function () {this.dragging = !1, this.cleanup(), this.onDragEnd(this.direction, this.track), this.needsDestroy && (this.element && (this.element.removeEventListener("mousedown", this.startDragging), this.element.removeEventListener("touchstart", this.startDragging)), this.destroyCb(), this.needsDestroy = !1, this.destroyCb = null);}, d.prototype.drag = function (t) {var e = this.getMousePosition(t),i = this.getSizeOfTrack(this.track),n = this.aTrackStart + this.minSizeStart + this.dragStartOffset + this.computedGapPixels,r = this.bTrackEnd - this.minSizeEnd - this.computedGapPixels - (i - this.dragStartOffset);e < n + this.snapOffset && (e = n), e > r - this.snapOffset && (e = r), e < n ? e = n : e > r && (e = r);var s = e - this.aTrackStart - this.dragStartOffset - this.computedGapPixels,o = this.bTrackEnd - e + this.dragStartOffset - i - this.computedGapPixels;if (this.dragInterval > 1) {var a = Math.round(s / this.dragInterval) * this.dragInterval;o -= a - s, s = a;}if (s < this.minSizeStart && (s = this.minSizeStart), o < this.minSizeEnd && (o = this.minSizeEnd), "px" === this.trackValues[this.aTrack].type) this.tracks[this.aTrack] = s + "px";else if ("fr" === this.trackValues[this.aTrack].type) {if (1 === this.totalFrs) this.tracks[this.aTrack] = "1fr";else {var l = s / this.frToPixels;this.tracks[this.aTrack] = l + "fr";}} else if ("%" === this.trackValues[this.aTrack].type) {var c = s / this.percentageToPixels;this.tracks[this.aTrack] = c + "%";}if ("px" === this.trackValues[this.bTrack].type) this.tracks[this.bTrack] = o + "px";else if ("fr" === this.trackValues[this.bTrack].type) {if (1 === this.totalFrs) this.tracks[this.bTrack] = "1fr";else {var h = o / this.frToPixels;this.tracks[this.bTrack] = h + "fr";}} else if ("%" === this.trackValues[this.bTrack].type) {var u = o / this.percentageToPixels;this.tracks[this.bTrack] = u + "%";}var d = this.tracks.join(" ");this.writeStyle(this.grid, this.gridTemplateProp, d), this.onDrag(this.direction, this.track, d);}, d.prototype.cleanup = function () {window.removeEventListener("mouseup", this.stopDragging), window.removeEventListener("touchend", this.stopDragging), window.removeEventListener("touchcancel", this.stopDragging), window.removeEventListener("mousemove", this.drag), window.removeEventListener("touchmove", this.drag), this.grid && (this.grid.removeEventListener("selectstart", l), this.grid.removeEventListener("dragstart", l), this.grid.style.userSelect = "", this.grid.style.webkitUserSelect = "", this.grid.style.MozUserSelect = "", this.grid.style.pointerEvents = "", this.grid.style.cursor = ""), window.document.body.style.cursor = "";}, d.prototype.destroy = function (t, e) {void 0 === t && (t = !0), t || !1 === this.dragging ? (this.cleanup(), this.element && (this.element.removeEventListener("mousedown", this.startDragging), this.element.removeEventListener("touchstart", this.startDragging)), e && e()) : (this.needsDestroy = !0, e && (this.destroyCb = e));};var p = function (t, e, i) {return e in t ? t[e] : i;},f = function (t, e) {return function (i) {if (i.track < 1) throw Error("Invalid track index: " + i.track + ". Track must be between two other tracks.");var n = "column" === t ? e.columnMinSizes || {} : e.rowMinSizes || {},r = "column" === t ? "columnMinSize" : "rowMinSize";return new d(t, Object.assign({}, { minSizeStart: p(n, i.track - 1, h(e, r, h(e, "minSize", 0))), minSizeEnd: p(n, i.track + 1, h(e, r, h(e, "minSize", 0))) }, i), e);};},g = function (t) {var e = this;this.columnGutters = {}, this.rowGutters = {}, this.options = Object.assign({}, { columnGutters: t.columnGutters || [], rowGutters: t.rowGutters || [], columnMinSizes: t.columnMinSizes || {}, rowMinSizes: t.rowMinSizes || {} }, t), this.options.columnGutters.forEach(function (t) {e.columnGutters[t.track] = f("column", e.options)(t);}), this.options.rowGutters.forEach(function (t) {e.rowGutters[t.track] = f("row", e.options)(t);});};g.prototype.addColumnGutter = function (t, e) {this.columnGutters[e] && this.columnGutters[e].destroy(), this.columnGutters[e] = f("column", this.options)({ element: t, track: e });}, g.prototype.addRowGutter = function (t, e) {this.rowGutters[e] && this.rowGutters[e].destroy(), this.rowGutters[e] = f("row", this.options)({ element: t, track: e });}, g.prototype.removeColumnGutter = function (t, e) {var i = this;void 0 === e && (e = !0), this.columnGutters[t] && this.columnGutters[t].destroy(e, function () {delete i.columnGutters[t];});}, g.prototype.removeRowGutter = function (t, e) {var i = this;void 0 === e && (e = !0), this.rowGutters[t] && this.rowGutters[t].destroy(e, function () {delete i.rowGutters[t];});}, g.prototype.handleDragStart = function (t, e, i) {"column" === e ? (this.columnGutters[i] && this.columnGutters[i].destroy(), this.columnGutters[i] = f("column", this.options)({ track: i }), this.columnGutters[i].startDragging(t)) : "row" === e && (this.rowGutters[i] && this.rowGutters[i].destroy(), this.rowGutters[i] = f("row", this.options)({ track: i }), this.rowGutters[i].startDragging(t));}, g.prototype.destroy = function (t) {var e = this;void 0 === t && (t = !0), Object.keys(this.columnGutters).forEach(function (i) {return e.columnGutters[i].destroy(t, function () {delete e.columnGutters[i];});}), Object.keys(this.rowGutters).forEach(function (i) {return e.rowGutters[i].destroy(t, function () {delete e.rowGutters[i];});});};const m = function (t) {return new g(t);};}, 5923: (t, e, i) => {"use strict";i.d(e, { Rl: () => a, Wb: () => o, sm: () => n });var n,r = i(2216),s = i(906);!function (t) {t[t.Protect = 0] = "Protect", t[t.Unprotect = 1] = "Unprotect", t[t.ChangePassword = 2] = "ChangePassword";}(n || (n = {}));const o = "change-map-protection-btn";class a extends s.g {currentPasswordInput;newPasswordInput;repeatPasswordInput;get validationCallbackData() {return { newPassword: this.newPasswordInput?.value.trim(), existingPassword: this.currentPasswordInput?.value.trim() };}get needNewPasswordInput() {return this.config.type === n.Protect || this.config.type === n.ChangePassword;}get needExistingPasswordInput() {return this.config.type === n.Unprotect || this.config.type === n.ChangePassword;}get isCurrentPasswordTyped() {return !this.currentPasswordInput || this.currentPasswordInput.value.trim().length;}get isNewPasswordTyped() {return !this.newPasswordInput || this.newPasswordInput.value.trim().length;}get isRepeatPasswordTyped() {return !this.repeatPasswordInput || this.repeatPasswordInput.value.trim().length;}get isRepeatOk() {if (!this.newPasswordInput || !this.repeatPasswordInput) return !0;const t = this.newPasswordInput.value.trim(),e = this.repeatPasswordInput.value.trim();return t && e && t === e;}get isNewPasswordDifferentFromCurrent() {if (!this.newPasswordInput || !this.currentPasswordInput) return !0;const t = this.currentPasswordInput.value.trim(),e = this.newPasswordInput.value.trim();return t && e && t !== e;}constructor(t) {t.icon = a.getIcon(t.type), t.title = a.getTitle(t.type), t.description = a.getDescription(t.type, t.mapTitle), super(t);}static getIcon(t) {switch (t) {case n.Protect:return "lock";case n.Unprotect:return "unlock";case n.ChangePassword:return "lock";}}static getTitle(t) {switch (t) {case n.Protect:return "Protect Map";case n.Unprotect:return "Remove Protection";case n.ChangePassword:return "Change Password";}}static getDescription(t, e) {switch (t) {case n.Protect:return `Set a password to protect "${e}" map.`;case n.Unprotect:return `Remove protection from "${e}" map? \n                All users of your storage users will be able to edit this map.`;case n.ChangePassword:return `Set a new password for "${e}" map.`;}}static getButtonText(t) {switch (t) {case n.Protect:return "Protect";case n.Unprotect:return "Unprotect";case n.ChangePassword:return "Change";}}enableConfirm() {this.checkBanner();const t = this.isCurrentPasswordTyped && this.isNewPasswordDifferentFromCurrent && this.isRepeatOk;this.toggleButton(o, !t);}checkBanner() {this.isCurrentPasswordTyped && this.isNewPasswordTyped ? this.isNewPasswordDifferentFromCurrent ? !this.isRepeatPasswordTyped || this.isRepeatOk ? this.hideBanner() : this.showValidationError("Passwords do not match") : this.showValidationError("New password must be different from the current password") : this.hideBanner();}drawExistingPasswordInput() {this.needExistingPasswordInput && (this.currentPasswordInput = (0, r.O)(this.boxContent, { label: "Current Password", labelMinWidth: "120px", placeholder: "Enter current map password", visibilityToggle: !0 }).querySelector("input"), this.currentPasswordInput.focus());}drawNewAndRepeatPasswordInputs() {this.needNewPasswordInput && (this.newPasswordInput = (0, r.O)(this.boxContent, { label: "New Password", labelMinWidth: "120px", placeholder: "Enter new map password", visibilityToggle: !0 }).querySelector("input"), this.needExistingPasswordInput || this.newPasswordInput.focus(), this.repeatPasswordInput = (0, r.O)(this.boxContent, { label: "Repeat Password", labelMinWidth: "120px", placeholder: "Repeat new password", visibilityToggle: !0 }).querySelector("input"));}draw() {return this.create(), this.buttonBox.style.marginTop = "0", this.boxContent.classList.add("gap", "margin-top"), this.needExistingPasswordInput && this.drawExistingPasswordInput(), this.needNewPasswordInput && this.drawNewAndRepeatPasswordInputs(), this.addValidationErrorBox(), this.boxContent.addEventListener("input", (t) => {t.target instanceof HTMLInputElement && this.enableConfirm();}), super.draw();}}}, 5939: (t, e, i) => {"use strict";i.r(e), i.d(e, { TextSizeMax: () => r, TextSizeMin: () => n, getScale: () => o });const n = 8,r = 40,s = r - n;function o(t) {return (t - n) / s;}}, 5953: (t, e, i) => {"use strict";i.d(e, { Kw: () => r });var n = i(1299);const r = { UNKNOWN: { code: 1e3, title: "Unknown Error", description: "Something went wrong. Please try again.", icon: "alert", helpUrl: n.tl.docsIssues }, INVALID_FILE_TYPE: { code: 1001, title: "Invalid File Type", description: "The selected file is not valid. You can only upload file types as described in the documentation.", icon: "alert", helpUrl: n.tl.docsIssues }, INVALID_SVG: { code: 1002, title: "Invalid SVG", description: "The file contains an invalid SVG structure that cannot be parsed.", icon: "alert", helpUrl: n.tl.docsIssues }, INVALID_JSVG: { code: 1003, title: "Invalid JSVG", description: "This file cannot be parsed as a JSVG file.", icon: "alert", helpUrl: n.tl.docsIssues }, INVALID_JSON: { code: 1004, title: "Invalid JSON", description: "The selected file is not valid. You can only upload JSON files that match the structure described in the documentation.", icon: "alert", helpUrl: n.tl.docsIssues }, INVALID_LEVEL: { code: 1005, title: "Invalid Level", description: "Current level is not supported.", icon: "alert", helpUrl: n.tl.docsIssues }, BLANK: { code: 1006, title: "(Blank)", description: 'Cannot display maps without data points. Try changing the selection or set "Show items with no data".', icon: "alert", helpUrl: n.tl.docsIssues }, NO_SELECTOR_MAPS: { code: 1007, title: "No Maps", description: "No maps match the selector.", icon: "filter", helpUrl: n.tl.docsIssues }, UNREACHABLE: { code: 1008, title: "Unreachable", description: "The server is unreachable or the URL is invalid.", icon: "compass", helpUrl: n.tl.docsIssues }, UNAUTHORIZED: { code: 1009, title: "Unauthorized", description: "You are not authorized to access this resource.", icon: "disallow", helpUrl: n.tl.docsIssues }, NOT_FOUND: { code: 1010, title: "Not Found", description: "Map could not be found.", icon: "compass", helpUrl: n.tl.docsIssues }, DECRYPTION_FAILED: { code: 1011, title: "Decryption Failed", description: "The file could not be decrypted. Please check the encryption key and retry.", icon: "disallow", helpUrl: n.tl.docsIssues }, FILE_SIZE_EXCEEDED: { code: 1012, title: "File Size Exceeded", description: "The selected file is too large.", icon: "error", helpUrl: n.tl.docsIssues }, IMAGE_COMPRESSION_FAILED: { code: 1013, title: "Image Compression Failed", description: "Something went wrong while compressing some images in SVG.", icon: "error", helpUrl: n.tl.docsIssues }, UPLOAD_SIZE_EXCEEDED: { code: 1014, title: "Upload Size Exceeded", description: "The total size of the uploaded files exceeds the limit. ", icon: "error", helpUrl: n.tl.docsIssues }, TOTAL_LOCAL_MAPS_SIZE_EXCEEDED: { code: 1015, title: "Local Maps Size Exceeded", description: "The total size of the local maps exceeds the limit.", icon: "error", helpUrl: n.tl.docsIssues }, NETWORK_ERROR: { code: 1016, title: "Network Error", description: "A network error occurred. Please check your connection.", icon: "compass", helpUrl: n.tl.docsIssues }, MISSING_CATEGORY: { code: 1017, title: "Missing Category", description: "The map is missing a category. Please select a category to continue.", icon: "alert", helpUrl: n.tl.docsIssues }, INVALID_LEGEND: { code: 1018, title: "Invalid Legend", description: "The column in the Legend field well is also used as Category and is not the first column in the Category field well. Reorder the columns in the Category field well or change legend to fix this issue.", icon: "alert", helpUrl: n.tl.docsIssues }, MS_UNKNOWN: { code: 2e3, title: "Unknown Error", description: "Something went wrong. Please try again.", icon: "alert", helpUrl: n.tl.docsIssues }, MS_INVALID_EDIT_KEY: { code: 2001, title: "Invalid Edit Key", description: "Missing or invalid edit key.", icon: "disallow", helpUrl: n.tl.docsIssues }, MS_INVALID_ENCRYPTION_KEY: { code: 2002, title: "Invalid Encryption Key", description: "This storage is secured with a different encryption key or you did not provide the correct one.", icon: "disallow", helpUrl: n.tl.docsIssues }, MS_INACTIVE: { code: 2003, title: "Inactive Storage", description: "This storage is not active. Please contact our support.", icon: "alert", helpUrl: n.tl.docsIssues }, MS_NOT_FOUND: { code: 2004, title: "Storage Not Found", description: "Unable to find the specified storage.", icon: "compass", helpUrl: n.tl.docsIssues }, MS_QUOTA_EXCEEDED: { code: 2005, title: "Storage Quota Exceeded", description: "The storage quota has been reached. You cannot upload more files, please delete some files to free up space.", icon: "error", helpUrl: n.tl.docsIssues }, MS_MAP_NOT_FOUND: { code: 2006, title: "Map Not Found", description: "Map not found in the storage. It may have been deleted or moved.", icon: "compass", helpUrl: n.tl.docsIssues }, MS_OPERATION_FAILED: { code: 2007, title: "Operation Failed", description: "The requested operation failed.", icon: "alert", helpUrl: n.tl.docsIssues }, MS_ETAG_MISMATCH: { code: 2008, title: "Etag Mismatch", description: "The file has been modified by another user.", icon: "alert", helpUrl: n.tl.docsIssues }, MS_INVALID_JSVG: { code: 2009, title: "Invalid JSVG File", description: "The file could not be parsed as a JSVG file.", icon: "alert", helpUrl: n.tl.docsIssues }, MS_NOT_ALLOWED: { code: 2010, title: "Operation Not Allowed", description: "The requested operation is not allowed.", icon: "disallow", helpUrl: n.tl.docsIssues }, MS_NOT_CONNECTED: { code: 2011, title: "Retry Later", description: "License information is not yet available. Please try to connect to My Storage later.", icon: "alert", helpUrl: n.tl.docsIssues } };}, 5994: (t, e, i) => {"use strict";i.d(e, { A: () => r, g: () => s });var n = i(7991);const r = (t) => !!(0, n.R)(t) || "KeyObject" === t?.[Symbol.toStringTag],s = ["CryptoKey"];}, 6037: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(2902),r = i(1180);function s(t) {let e, i, s;function a(t, n, r = 0, s = t.length) {if (r < s) {if (0 !== e(n, n)) return s;do {const e = r + s >>> 1;i(t[e], n) < 0 ? r = e + 1 : s = e;} while (r < s);}return r;}return 2 !== t.length ? (e = n.A, i = (e, i) => (0, n.A)(t(e), i), s = (e, i) => t(e) - i) : (e = t === n.A || t === r.A ? t : o, i = t, s = t), { left: a, center: function (t, e, i = 0, n = t.length) {const r = a(t, e, i, n - 1);return r > i && s(t[r - 1], e) > -s(t[r], e) ? r - 1 : r;}, right: function (t, n, r = 0, s = t.length) {if (r < s) {if (0 !== e(n, n)) return s;do {const e = r + s >>> 1;i(t[e], n) <= 0 ? r = e + 1 : s = e;} while (r < s);}return r;} };}function o() {return 0;}}, 6066: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(3363);function r(t) {if ("function" != typeof t) throw new Error();return this.each(function (t, e) {return function () {var i = e.apply(this, arguments);if ("function" != typeof i) throw new Error();(0, n.hZ)(this, t).ease = i;};}(this._id, t));}}, 6160: (t, e, i) => {"use strict";function n(t, e, i, n, r) {var s = t * t,o = s * t;return ((1 - 3 * t + 3 * s - o) * e + (4 - 6 * s + 3 * o) * i + (1 + 3 * t + 3 * s - 3 * o) * n + o * r) / 6;}function r(t) {var e = t.length - 1;return function (i) {var r = i <= 0 ? i = 0 : i >= 1 ? (i = 1, e - 1) : Math.floor(i * e),s = t[r],o = t[r + 1],a = r > 0 ? t[r - 1] : 2 * s - o,l = r < e - 1 ? t[r + 2] : 2 * o - s;return n((i - r / e) * e, a, s, o, l);};}i.d(e, { A: () => r, H: () => n });}, 6170: (t, e, i) => {"use strict";const n = i(3908),r = i(144),{ safeRe: s, t: o } = i(9718);t.exports = (t, e) => {if (t instanceof n) return t;if ("number" == typeof t && (t = String(t)), "string" != typeof t) return null;let i = null;if ((e = e || {}).rtl) {const n = e.includePrerelease ? s[o.COERCERTLFULL] : s[o.COERCERTL];let r;for (; (r = n.exec(t)) && (!i || i.index + i[0].length !== t.length);) i && r.index + r[0].length === i.index + i[0].length || (i = r), n.lastIndex = r.index + r[1].length + r[2].length;n.lastIndex = -1;} else i = t.match(e.includePrerelease ? s[o.COERCEFULL] : s[o.COERCE]);if (null === i) return null;const a = i[2],l = i[3] || "0",c = i[4] || "0",h = e.includePrerelease && i[5] ? `-${i[5]}` : "",u = e.includePrerelease && i[6] ? `+${i[6]}` : "";return r(`${a}.${l}.${c}${h}${u}`, e);};}, 6254: (t, e, i) => {"use strict";const n = i(3908);t.exports = (t, e) => new n(t, e).minor;}, 6271: (t, e, i) => {"use strict";i.r(e), i.d(e, { getCommonValue: () => a, getFillColor: () => o, getObject: () => s, getValue: () => r });var n = i(1888);function r(t, e, i) {return t ? n.getValue(t[e.objectName], e.propertyName, i) : i;}function s(t, e, i) {return t && t[e] ? t[e] : i;}function o(t, e, i) {const n = r(t, e);return n && n.solid ? n.solid.color : i;}function a(t, e, i) {const n = r(t, e, i);return n && n.solid ? n.solid.color : null == n || "object" == typeof n && !n.solid ? i : n;}}, 6358: (t, e, i) => {"use strict";i.d(e, { b: () => l });var n = i(1807),r = i(906),s = i(100),o = i(1299),a = i(5112);class l extends r.g {encryptionCheckbox;storageNameInput;encryptionKeyInput;generateKeyButton;get isEncryptSelected() {return this.encryptionCheckbox.classList.contains("checked");}get storageName() {return this.storageNameInput.value.trim();}get validationCallbackData() {return { storageName: this.storageName, encryptionKey: this.isEncryptSelected ? this.encryptionKeyInput.value.trim() : null };}toggleEncryptionSection() {this.isEncryptSelected ? (this.encryptionKeyInput.removeAttribute("disabled"), this.generateKeyButton.classList.remove("disabled")) : (this.encryptionKeyInput.setAttribute("disabled", "true"), this.generateKeyButton.classList.add("disabled"));}constructor(t) {t.size = { height: "600px", width: "750px" }, t.title = "Setup My Storage", t.icon = "okviz-storage", t.description = "As part of your license, you have access to a dedicated space on our servers to store your maps. \n        Complete the setup to start using it:", super(t);}validateName(t) {const e = t.value.trim(),i = e.length >= 3 && e.length <= 50;this.toggleValidationError(t, i || "" == e ? "" : "The storage name must be between 3 and 50 chars long.");}validateEncryptionKey(t) {const e = t.value.trim(),i = e.length >= 8 && e.length <= 39 && !e.includes(" ");this.toggleValidationError(t, i || "" == e ? "" : "The encryption key must be between 8 and 39 chars long and cannot contain spaces.");}toggleValidationError(t, e) {const i = t.closest(".column-section").querySelector(".validation-error");i && (i.classList.toggle("hidden", !e), i.textContent = e), this.okButton.classList.toggle("disabled", document.querySelectorAll(".validation-error:not(.hidden)").length > 0);}drawStorageSetup() {this.boxContainer.classList.add("full-size"), this.boxContent.classList.add("storage-setup"), (0, n.tTh)(".flex.columns", this.boxContent, [(0, n.tTh)(".column", [(0, n.tTh)(".column-section", [(0, n.tTh)(".title", "Storage Name"), (0, n.tTh)("input.max", { middleware: (t) => this.storageNameInput = t, attr: { type: "text", placeholder: "My Storage" }, events: { input: (t, e) => this.validateName(e) } }), (0, n.tTh)(".validation-error.hidden")]), (0, n.tTh)(".column-section", [(0, n.tTh)(".title", "Encryption"), (0, n.tTh)(".encrypt-option", [(0, n.tTh)(".checkbox-new.icon", { middleware: (t) => this.encryptionCheckbox = t, events: { click: () => {this.encryptionCheckbox.classList.toggle("checked"), this.toggleEncryptionSection();} } }, [(0, n.tTh)("span", "Encrypt Storage")])]), (0, n.tTh)(".flex.gap", [(0, n.tTh)("input", { attr: { type: "text", placeholder: "Encryption Key", disabled: !0 }, middleware: (t) => this.encryptionKeyInput = t, events: { input: (t, e) => this.validateEncryptionKey(e) } }), (0, n.tTh)(".synoptic-btn.ctrl.disabled", { middleware: (t) => this.generateKeyButton = t, events: { click: () => {this.encryptionKeyInput.value = s.Lu.GenerateRandomEncryptionKey();} } }, [(0, n.tTh)(".group.white.small.border", [(0, n.tTh)("span.text.small", "Generate")])])]), (0, n.tTh)(".validation-error.hidden")])]), (0, n.tTh)(".column", [(0, n.tTh)(".column-section", [(0, n.tTh)(".flex.columns", [(0, n.tTh)(".column", [(0, n.tTh)(".title", "Storage Quota"), (0, n.tTh)(".quota", "100 MB")]), (0, n.tTh)(".column", [(0, n.tTh)(".title", "Region"), (0, n.tTh)(".region", this.config.displayRegion)])])]), (0, n.tTh)(".column-section", [(0, n.tTh)("p.encrypt-description", [(0, n.tTh)("span", "You may choose to encrypt your storage. In this case, it is your duty to keep the encryption key safe and to share it within your organization."), (0, n.tTh)("br"), (0, n.tTh)("strong", "The encryption is made by the client and the encryption key is not stored on our servers.")])])])]), (0, n.tTh)(".terms-section", this.boxContent, [(0, n.tTh)(".title", "Terms of Service"), (0, n.tTh)(".terms", o.hu)]), (0, n.tTh)("a.learn-more", this.leftButtonBox, { events: { click: () => {new a.y().draw();} } }, "Full Terms of Service"), setTimeout(() => this.storageNameInput.focus(), 250);}draw() {return this.create(), this.drawStorageSetup(), super.draw();}}}, 6363: (t, e, i) => {"use strict";i.d(e, { oQ: () => h });var n = i(1371),r = i(6585),s = i(5874),o = i(5230),a = i(4528),l = i(7404),c = i(1419);const h = (() => [(0, n.$K)(), (0, n.Wu)(), (0, n.N$)(), (0, o.b6)(), (0, s.Lv)(), (0, n.VH)(), (0, n.A)(), r.$t.allowMultipleSelections.of(!0), (0, s.WD)(), (0, s.y9)(s.Zt, { fallback: !0 }), (0, s.SG)(), (0, l.wm)(), (0, l.yU)(), (0, n.D4)(), (0, n.HJ)(), (0, n.dz)(), (0, a.gN)(), n.w4.of([...l.Bc, ...o.pw, ...a.Eo, ...o.cL, ...s.f7, ...l.OO, ...c.$w])])();}, 6394: (t, e, i) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.format = e.canFormat = void 0;var n,r,s = i(4932),o = i(6459),a = i(1248),l = i(7717);function c(t, e, i) {var n = i.calendar.patterns;!function (t) {var e = t.patterns;void 0 === e.g && (e.g = e.f.replace(e.D, e.d), e.G = e.F.replace(e.D, e.d));}(i.calendar);var r = (0, s.findDateFormat)(t, e, i.name);return e = 1 === r.format.length ? n[r.format] : r.format, i || (i = this.getCurrentCulture()), l.Globalize.format(r.value, e, i);}e.canFormat = function (t) {return t instanceof Date;}, e.format = function (t, e, i) {var h = 1 === (e = e || "G").length;try {return h ? c(t, e, i) : function (t, e, i) {var c,h = [];if ((e = o.preserveLiterals(e, h)).indexOf("F") > -1) {e = a.replaceAll(e, "FFFF", "FFF");var u = t.getMilliseconds();if (u % 10 >= 1 && (e = a.replaceAll(e, "FFF", "fff")), e = a.replaceAll(e, "FFF", "FF"), u % 100 / 10 >= 1 && (e = a.replaceAll(e, "FF", "ff")), e = a.replaceAll(e, "FF", "F"), u % 1e3 / 100 >= 1 && (e = a.replaceAll(e, "F", "f")), "" === (e = a.replaceAll(e, "F", "")) || "%" === e) return "";}return e = function (t) {return t === n ? r : (n = t, t = (0, s.fixDateTimeFormat)(t), r = t, t);}(e), c = function (t, e) {var i = e[":"];if (":" === i) return t;for (var n = "", r = t.length, s = 0; s < r; s++) {var o = t.charAt(s);n += ":" === o ? i : o;}return n;}(c = l.Globalize.format(t, e, i), i.calendar), o.restoreLiterals(c, h, !1);}(t, e, i);} catch (e) {return c(t, "G", i);}};}, 6410: (t, e, i) => {"use strict";i.d(e, { A: () => p });var n = i(7235),r = i(7168),s = i(1728),o = i(1631),a = i(6715),l = i(1866),c = i(3520),h = i(9986),u = Array.prototype.map,d = ["y", "z", "a", "f", "p", "n", "", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];function p(t) {var e = void 0 === t.grouping || void 0 === t.thousands ? h.A : (0, r.A)(u.call(t.grouping, Number), t.thousands + ""),i = void 0 === t.currency ? "" : t.currency[0] + "",p = void 0 === t.currency ? "" : t.currency[1] + "",f = void 0 === t.decimal ? "." : t.decimal + "",g = void 0 === t.numerals ? h.A : (0, s.A)(u.call(t.numerals, String)),m = void 0 === t.percent ? "%" : t.percent + "",v = void 0 === t.minus ? "" : t.minus + "",y = void 0 === t.nan ? "NaN" : t.nan + "";function b(t) {var n = (t = (0, o.A)(t)).fill,r = t.align,s = t.sign,h = t.symbol,u = t.zero,b = t.width,w = t.comma,x = t.precision,S = t.trim,E = t.type;"n" === E ? (w = !0, E = "g") : l.A[E] || (void 0 === x && (x = 12), S = !0, E = "g"), (u || "0" === n && "=" === r) && (u = !0, n = "0", r = "=");var C = "$" === h ? i : "#" === h && /[boxX]/.test(E) ? "0" + E.toLowerCase() : "",k = "$" === h ? p : /[%p]/.test(E) ? m : "",T = l.A[E],A = /[defgprs%]/.test(E);function M(t) {var i,o,l,h = C,p = k;if ("c" === E) p = T(t) + p, t = "";else {var m = (t = +t) < 0 || 1 / t < 0;if (t = isNaN(t) ? y : T(Math.abs(t), x), S && (t = (0, a.A)(t)), m && 0 === +t && "+" !== s && (m = !1), h = (m ? "(" === s ? s : v : "-" === s || "(" === s ? "" : s) + h, p = ("s" === E ? d[8 + c.u / 3] : "") + p + (m && "(" === s ? ")" : ""), A) for (i = -1, o = t.length; ++i < o;) if (48 > (l = t.charCodeAt(i)) || l > 57) {p = (46 === l ? f + t.slice(i + 1) : t.slice(i)) + p, t = t.slice(0, i);break;}}w && !u && (t = e(t, 1 / 0));var M = h.length + t.length + p.length,_ = M < b ? new Array(b - M + 1).join(n) : "";switch (w && u && (t = e(_ + t, _.length ? b - p.length : 1 / 0), _ = ""), r) {case "<":t = h + t + p + _;break;case "=":t = h + _ + t + p;break;case "^":t = _.slice(0, M = _.length >> 1) + h + t + p + _.slice(M);break;default:t = _ + h + t + p;}return g(t);}return x = void 0 === x ? 6 : /[gprs]/.test(E) ? Math.max(1, Math.min(21, x)) : Math.max(0, Math.min(20, x)), M.toString = function () {return t + "";}, M;}return { format: b, formatPrefix: function (t, e) {var i = b(((t = (0, o.A)(t)).type = "f", t)),r = 3 * Math.max(-8, Math.min(8, Math.floor((0, n.A)(e) / 3))),s = Math.pow(10, -r),a = d[8 + r / 3];return function (t) {return i(s * t) + a;};} };}}, 6459: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.restoreLiterals = e.preserveLiterals = e.removeLiterals = void 0;var i = new RegExp(["'[^']*'", '"[^"]*"', "\\\\.", "'[^']*$", '"[^"]*$', "\\\\$"].join("|"), "g");e.removeLiterals = function (t) {return i.lastIndex = 0, t.replace(i, "");}, e.preserveLiterals = function (t, e) {for (i.lastIndex = 0;;) {var n = i.exec(t);if (!n) break;var r = n[0],s = i.lastIndex - r.length,o = String.fromCharCode(57600 + e.length);e.push(r), t = t.substring(0, s) + o + t.substring(i.lastIndex), i.lastIndex = s + 1;}return t;}, e.restoreLiterals = function (t, e, i) {void 0 === i && (i = !0);for (var n = e.length, r = 0; r < n; r++) {var s = String.fromCharCode(57600 + r),o = e[r];if (!i) {var a = o[0];o = "\\" === a || 1 === o.length || o[o.length - 1] !== a ? o.substring(1) : o.substring(1, o.length - 1);}t = t.replace(s, o);}return t;};}, 6470: (t, e, i) => {"use strict";i(1943), i(3578);}, 6481: (t, e, i) => {"use strict";i.d(e, { $D: () => a, Ii: () => o, Md: () => l, UG: () => s, Us: () => g, Uw: () => p, VJ: () => h, XB: () => d, hl: () => u, vW: () => c, wi: () => f });var n = i(7345),r = i(7077);const s = "http://www.w3.org/2000/svg";function o() {return { x: { scale: 1, offset: 0, min: 0 }, y: { scale: 1, offset: 0, min: 0 }, scale: 1 };}function a(t, e = !1) {const i = { isValid: !1, error: (0, n.T)("INVALID_SVG") };if ("string" != typeof t) return i.error.details = `Expected a \`string\`, got \`${typeof t}\`.`, i;if (0 === (t = t.trim()).length) return i.error.details = "The content of the SVG is empty.", i;const r = new DOMParser();let o = null;try {if (o = r.parseFromString(t, "image/svg+xml"), o.getElementsByTagName("parsererror").length > 0) {const t = o.getElementsByTagName("parsererror")[0].textContent || "Unknown parsing error";throw new Error(`Error parsing SVG string: ${t}`);}if ("svg" !== o.documentElement.nodeName) throw new Error("Root element is not <svg>.");const e = o.documentElement.getAttribute("xmlns");e && [s].includes(e) || (t = t.replace(/<svg /, `<svg xmlns="${s}" `), o = r.parseFromString(t, "image/svg+xml"));} catch (t) {return i.error.details = t.message, i;}return e && (i.svgDoc = o), i.isValid = !0, delete i.error, i;}function l(t) {return ["g", "svg"].includes(t.tagName.toLowerCase());}function c(t) {const e = ((t) => "use" === t.tagName.toLowerCase())(t) ? t : null;if (!e) return null;const i = e.getAttribute("href") || e.getAttribute("xlink:href");return i && i.startsWith("#") ? (e.ownerSVGElement || document).getElementById(i.slice(1)) : null;}function h(t, e = !1) {let i = t.getAttribute("viewBox");if (!i && e) {let e = t.getAttribute("width"),n = t.getAttribute("height");(e?.includes("%") || n?.includes("%")) && (e = t.clientWidth, n = t.clientHeight), e && n && (i = `0 0 ${e} ${n}`);}if (!i) return null;const [n, r, s, o] = i.split(" ").map((t) => {const e = parseInt(t);return isNaN(e) ? 0 : e;});return new DOMRect(n, r, s, o);}function u(t, e = !0, i = 1) {const n = h(t),r = { x: { scale: 1, offset: 0, min: 0 }, y: { scale: 1, offset: 0, min: 0 }, scale: 1 };if (n) {const s = t.getBoundingClientRect(),o = s.width / i,a = s.height / i,l = o / n.width,c = a / n.height,h = Math.min(l, c);r.scale = h, r.x.scale = e ? h : l, r.y.scale = e ? h : c, r.x.offset = e ? (o - n.width * h) / 2 : 0, r.y.offset = e ? (a - n.height * h) / 2 : 0, r.x.min = n.x, r.y.min = n.y, r.naturalSize = { width: o - 2 * r.x.offset, height: a - 2 * r.y.offset };}return r;}function d(t, e) {const i = h(t);if (!i) return;const n = Math.round(i.width * e),r = Math.round(i.height * e),s = i.x - (n - i.width) / 2,o = i.y - (r - i.height) / 2;t.setAttribute("viewBox", `${s} ${o} ${n} ${r}`);}function p(t) {const e = (t) => ({ topLeft: { x: t.x, y: t.y }, bottomRight: { x: t.x + t.width, y: t.y + t.height } }),i = e(t[0]),n = e(t[1]);return !(i.topLeft.x > n.bottomRight.x || n.topLeft.x > i.bottomRight.x || n.bottomRight.y < i.topLeft.y || i.bottomRight.y < n.topLeft.y);}function f(t) {return "z" === t.getAttribute("d")?.trim().slice(-1).toLowerCase() || !1;}async function g(t, e = .7) {if (e < 0 || e >= 1) return;const i = Array.from(t.getElementsByTagName("image"));for (const t of i) {const i = t.getAttribute("xlink:href") || t.getAttribute("href");if (i && i.startsWith("data:image")) try {const n = await v(i, e);t.setAttribute("xlink:href", n);} catch (t) {throw new Error("IMAGE_COMPRESSION_FAILED: " + t.message);}}}let m;async function v(t, e) {const i = new Image();return new Promise((n, s) => {i.onload = () => {try {const t = 1e4,s = 1e4;let o = i.naturalWidth,a = i.naturalHeight;if (i.width > t || i.height > s) {const e = i.width / i.height;e > 1 ? (o = t, a = t / e) : (a = s, o = s * e);}m || (m = document.createElement("canvas")), m.width = o, m.height = a;const l = m.getContext("2d");if (!l) throw new Error("Failed to get 2D context from canvas.");l.drawImage(i, 0, 0, o, a);const c = m.toDataURL("image/" + ((0, r.nr)() ? "jpeg" : "webp"), e);m.width = 0, m.height = 0, n(c);} catch (t) {s(t);} finally {i.src = "", i.remove();}}, i.onerror = (t) => s(new Error("Failed to load image.")), i.src = t;});}}, 6496: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(7235);function r(t) {return Math.max(0, -(0, n.A)(Math.abs(t)));}}, 6502: (t, e, i) => {"use strict";i.d(e, { A: () => a });var n = i(6946),r = i(1052),s = i(9065),o = i(8993);function a() {var t = (0, r.Ay)();return t.copy = function () {return (0, r.C)(t, a());}, s.C.apply(t, arguments), function (t) {var e = t.domain;return t.ticks = function (t) {var i = e();return (0, n.Ay)(i[0], i[i.length - 1], null == t ? 10 : t);}, t.tickFormat = function (t, i) {var n = e();return (0, o.A)(n[0], n[n.length - 1], null == t ? 10 : t, i);}, t.nice = function (i) {null == i && (i = 10);var r,s,o = e(),a = 0,l = o.length - 1,c = o[a],h = o[l],u = 10;for (h < c && (s = c, c = h, h = s, s = a, a = l, l = s); u-- > 0;) {if ((s = (0, n.lq)(c, h, i)) === r) return o[a] = c, o[l] = h, e(o);if (s > 0) c = Math.floor(c / s) * s, h = Math.ceil(h / s) * s;else {if (!(s < 0)) break;c = Math.ceil(c * s) / s, h = Math.floor(h * s) / s;}r = s;}return t;}, t;}(t);}}, 6541: (t, e, i) => {"use strict";function n(t) {return function () {return this.matches(t);};}function r(t) {return function (e) {return e.matches(t);};}i.d(e, { A: () => n, j: () => r });}, 6558: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(3363);function r(t, e) {return function () {(0, n.hZ)(this, t).duration = +e.apply(this, arguments);};}function s(t, e) {return e = +e, function () {(0, n.hZ)(this, t).duration = e;};}function o(t) {var e = this._id;return arguments.length ? this.each(("function" == typeof t ? r : s)(e, t)) : (0, n.Jt)(this.node(), e).duration;}}, 6585: (t, e, i) => {"use strict";i.d(e, { $t: () => gt, EY: () => r, FB: () => vt, Fh: () => v, Gu: () => w, Je: () => dt, MK: () => m, Nb: () => z, OF: () => _, Pe: () => rt, QR: () => mt, VR: () => x, YH: () => et, ZX: () => st, iR: () => b, kn: () => Ft, om: () => xt, sU: () => B, sj: () => O, vB: () => St, vS: () => g, y$: () => It, zK: () => f });var n = i(1587);class r {lineAt(t) {if (t < 0 || t > this.length) throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t, !1, 1, 0);}line(t) {if (t < 1 || t > this.lines) throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t, !0, 1, 0);}replace(t, e, i) {[t, e] = p(this, t, e);let n = [];return this.decompose(0, t, n, 2), i.length && i.decompose(0, i.length, n, 3), this.decompose(e, this.length, n, 1), o.from(n, this.length - (e - t) + i.length);}append(t) {return this.replace(this.length, this.length, t);}slice(t, e = this.length) {[t, e] = p(this, t, e);let i = [];return this.decompose(t, e, i, 0), o.from(i, e - t);}eq(t) {if (t == this) return !0;if (t.length != this.length || t.lines != this.lines) return !1;let e = this.scanIdentical(t, 1),i = this.length - this.scanIdentical(t, -1),n = new c(this),r = new c(t);for (let t = e, s = e;;) {if (n.next(t), r.next(t), t = 0, n.lineBreak != r.lineBreak || n.done != r.done || n.value != r.value) return !1;if (s += n.value.length, n.done || s >= i) return !0;}}iter(t = 1) {return new c(this, t);}iterRange(t, e = this.length) {return new h(this, t, e);}iterLines(t, e) {let i;if (null == t) i = this.iter();else {null == e && (e = this.lines + 1);let n = this.line(t).from;i = this.iterRange(n, Math.max(n, e == this.lines + 1 ? this.length : e <= 1 ? 0 : this.line(e - 1).to));}return new u(i);}toString() {return this.sliceString(0);}toJSON() {let t = [];return this.flatten(t), t;}constructor() {}static of(t) {if (0 == t.length) throw new RangeError("A document must have at least one line");return 1 != t.length || t[0] ? t.length <= 32 ? new s(t) : o.from(s.split(t, [])) : r.empty;}}class s extends r {constructor(t, e = function (t) {let e = -1;for (let i of t) e += i.length + 1;return e;}(t)) {super(), this.text = t, this.length = e;}get lines() {return this.text.length;}get children() {return null;}lineInner(t, e, i, n) {for (let r = 0;; r++) {let s = this.text[r],o = n + s.length;if ((e ? i : o) >= t) return new d(n, o, i, s);n = o + 1, i++;}}decompose(t, e, i, n) {let r = t <= 0 && e >= this.length ? this : new s(l(this.text, t, e), Math.min(e, this.length) - Math.max(0, t));if (1 & n) {let t = i.pop(),e = a(r.text, t.text.slice(), 0, r.length);if (e.length <= 32) i.push(new s(e, t.length + r.length));else {let t = e.length >> 1;i.push(new s(e.slice(0, t)), new s(e.slice(t)));}} else i.push(r);}replace(t, e, i) {if (!(i instanceof s)) return super.replace(t, e, i);[t, e] = p(this, t, e);let n = a(this.text, a(i.text, l(this.text, 0, t)), e),r = this.length + i.length - (e - t);return n.length <= 32 ? new s(n, r) : o.from(s.split(n, []), r);}sliceString(t, e = this.length, i = "\n") {[t, e] = p(this, t, e);let n = "";for (let r = 0, s = 0; r <= e && s < this.text.length; s++) {let o = this.text[s],a = r + o.length;r > t && s && (n += i), t < a && e > r && (n += o.slice(Math.max(0, t - r), e - r)), r = a + 1;}return n;}flatten(t) {for (let e of this.text) t.push(e);}scanIdentical() {return 0;}static split(t, e) {let i = [],n = -1;for (let r of t) i.push(r), n += r.length + 1, 32 == i.length && (e.push(new s(i, n)), i = [], n = -1);return n > -1 && e.push(new s(i, n)), e;}}class o extends r {constructor(t, e) {super(), this.children = t, this.length = e, this.lines = 0;for (let e of t) this.lines += e.lines;}lineInner(t, e, i, n) {for (let r = 0;; r++) {let s = this.children[r],o = n + s.length,a = i + s.lines - 1;if ((e ? a : o) >= t) return s.lineInner(t, e, i, n);n = o + 1, i = a + 1;}}decompose(t, e, i, n) {for (let r = 0, s = 0; s <= e && r < this.children.length; r++) {let o = this.children[r],a = s + o.length;if (t <= a && e >= s) {let r = n & ((s <= t ? 1 : 0) | (a >= e ? 2 : 0));s >= t && a <= e && !r ? i.push(o) : o.decompose(t - s, e - s, i, r);}s = a + 1;}}replace(t, e, i) {if ([t, e] = p(this, t, e), i.lines < this.lines) for (let n = 0, r = 0; n < this.children.length; n++) {let s = this.children[n],a = r + s.length;if (t >= r && e <= a) {let l = s.replace(t - r, e - r, i),c = this.lines - s.lines + l.lines;if (l.lines < c >> 4 && l.lines > c >> 6) {let r = this.children.slice();return r[n] = l, new o(r, this.length - (e - t) + i.length);}return super.replace(r, a, l);}r = a + 1;}return super.replace(t, e, i);}sliceString(t, e = this.length, i = "\n") {[t, e] = p(this, t, e);let n = "";for (let r = 0, s = 0; r < this.children.length && s <= e; r++) {let o = this.children[r],a = s + o.length;s > t && r && (n += i), t < a && e > s && (n += o.sliceString(t - s, e - s, i)), s = a + 1;}return n;}flatten(t) {for (let e of this.children) e.flatten(t);}scanIdentical(t, e) {if (!(t instanceof o)) return 0;let i = 0,[n, r, s, a] = e > 0 ? [0, 0, this.children.length, t.children.length] : [this.children.length - 1, t.children.length - 1, -1, -1];for (;; n += e, r += e) {if (n == s || r == a) return i;let o = this.children[n],l = t.children[r];if (o != l) return i + o.scanIdentical(l, e);i += o.length + 1;}}static from(t, e = t.reduce((t, e) => t + e.length + 1, -1)) {let i = 0;for (let e of t) i += e.lines;if (i < 32) {let i = [];for (let e of t) e.flatten(i);return new s(i, e);}let n = Math.max(32, i >> 5),r = n << 1,a = n >> 1,l = [],c = 0,h = -1,u = [];function d(t) {let e;if (t.lines > r && t instanceof o) for (let e of t.children) d(e);else t.lines > a && (c > a || !c) ? (p(), l.push(t)) : t instanceof s && c && (e = u[u.length - 1]) instanceof s && t.lines + e.lines <= 32 ? (c += t.lines, h += t.length + 1, u[u.length - 1] = new s(e.text.concat(t.text), e.length + 1 + t.length)) : (c + t.lines > n && p(), c += t.lines, h += t.length + 1, u.push(t));}function p() {0 != c && (l.push(1 == u.length ? u[0] : o.from(u, h)), h = -1, c = u.length = 0);}for (let e of t) d(e);return p(), 1 == l.length ? l[0] : new o(l, e);}}function a(t, e, i = 0, n = 1e9) {for (let r = 0, s = 0, o = !0; s < t.length && r <= n; s++) {let a = t[s],l = r + a.length;l >= i && (l > n && (a = a.slice(0, n - r)), r < i && (a = a.slice(i - r)), o ? (e[e.length - 1] += a, o = !1) : e.push(a)), r = l + 1;}return e;}function l(t, e, i) {return a(t, [""], e, i);}r.empty = new s([""], 0);class c {constructor(t, e = 1) {this.dir = e, this.done = !1, this.lineBreak = !1, this.value = "", this.nodes = [t], this.offsets = [e > 0 ? 1 : (t instanceof s ? t.text.length : t.children.length) << 1];}nextInner(t, e) {for (this.done = this.lineBreak = !1;;) {let i = this.nodes.length - 1,n = this.nodes[i],r = this.offsets[i],o = r >> 1,a = n instanceof s ? n.text.length : n.children.length;if (o == (e > 0 ? a : 0)) {if (0 == i) return this.done = !0, this.value = "", this;e > 0 && this.offsets[i - 1]++, this.nodes.pop(), this.offsets.pop();} else if ((1 & r) == (e > 0 ? 0 : 1)) {if (this.offsets[i] += e, 0 == t) return this.lineBreak = !0, this.value = "\n", this;t--;} else if (n instanceof s) {let r = n.text[o + (e < 0 ? -1 : 0)];if (this.offsets[i] += e, r.length > Math.max(0, t)) return this.value = 0 == t ? r : e > 0 ? r.slice(t) : r.slice(0, r.length - t), this;t -= r.length;} else {let r = n.children[o + (e < 0 ? -1 : 0)];t > r.length ? (t -= r.length, this.offsets[i] += e) : (e < 0 && this.offsets[i]--, this.nodes.push(r), this.offsets.push(e > 0 ? 1 : (r instanceof s ? r.text.length : r.children.length) << 1));}}}next(t = 0) {return t < 0 && (this.nextInner(-t, -this.dir), t = this.value.length), this.nextInner(t, this.dir);}}class h {constructor(t, e, i) {this.value = "", this.done = !1, this.cursor = new c(t, e > i ? -1 : 1), this.pos = e > i ? t.length : 0, this.from = Math.min(e, i), this.to = Math.max(e, i);}nextInner(t, e) {if (e < 0 ? this.pos <= this.from : this.pos >= this.to) return this.value = "", this.done = !0, this;t += Math.max(0, e < 0 ? this.pos - this.to : this.from - this.pos);let i = e < 0 ? this.pos - this.from : this.to - this.pos;t > i && (t = i), i -= t;let { value: n } = this.cursor.next(t);return this.pos += (n.length + t) * e, this.value = n.length <= i ? n : e < 0 ? n.slice(n.length - i) : n.slice(0, i), this.done = !this.value, this;}next(t = 0) {return t < 0 ? t = Math.max(t, this.from - this.pos) : t > 0 && (t = Math.min(t, this.to - this.pos)), this.nextInner(t, this.cursor.dir);}get lineBreak() {return this.cursor.lineBreak && "" != this.value;}}class u {constructor(t) {this.inner = t, this.afterBreak = !0, this.value = "", this.done = !1;}next(t = 0) {let { done: e, lineBreak: i, value: n } = this.inner.next(t);return e && this.afterBreak ? (this.value = "", this.afterBreak = !1) : e ? (this.done = !0, this.value = "") : i ? this.afterBreak ? this.value = "" : (this.afterBreak = !0, this.next()) : (this.value = n, this.afterBreak = !1), this;}get lineBreak() {return !1;}}"undefined" != typeof Symbol && (r.prototype[Symbol.iterator] = function () {return this.iter();}, c.prototype[Symbol.iterator] = h.prototype[Symbol.iterator] = u.prototype[Symbol.iterator] = function () {return this;});class d {constructor(t, e, i, n) {this.from = t, this.to = e, this.number = i, this.text = n;}get length() {return this.to - this.from;}}function p(t, e, i) {return [e = Math.max(0, Math.min(t.length, e)), Math.max(e, Math.min(t.length, i))];}function f(t, e, i = !0, r = !0) {return (0, n.z)(t, e, i, r);}function g(t, e) {let i = t.charCodeAt(e);if (!((n = i) >= 55296 && n < 56320 && e + 1 != t.length)) return i;var n;let r = t.charCodeAt(e + 1);return function (t) {return t >= 56320 && t < 57344;}(r) ? r - 56320 + (i - 55296 << 10) + 65536 : i;}function m(t) {return t <= 65535 ? String.fromCharCode(t) : (t -= 65536, String.fromCharCode(55296 + (t >> 10), 56320 + (1023 & t)));}function v(t) {return t < 65536 ? 1 : 2;}const y = /\r\n?|\n/;var b = function (t) {return t[t.Simple = 0] = "Simple", t[t.TrackDel = 1] = "TrackDel", t[t.TrackBefore = 2] = "TrackBefore", t[t.TrackAfter = 3] = "TrackAfter", t;}(b || (b = {}));class w {constructor(t) {this.sections = t;}get length() {let t = 0;for (let e = 0; e < this.sections.length; e += 2) t += this.sections[e];return t;}get newLength() {let t = 0;for (let e = 0; e < this.sections.length; e += 2) {let i = this.sections[e + 1];t += i < 0 ? this.sections[e] : i;}return t;}get empty() {return 0 == this.sections.length || 2 == this.sections.length && this.sections[1] < 0;}iterGaps(t) {for (let e = 0, i = 0, n = 0; e < this.sections.length;) {let r = this.sections[e++],s = this.sections[e++];s < 0 ? (t(i, n, r), n += r) : n += s, i += r;}}iterChangedRanges(t, e = !1) {C(this, t, e);}get invertedDesc() {let t = [];for (let e = 0; e < this.sections.length;) {let i = this.sections[e++],n = this.sections[e++];n < 0 ? t.push(i, n) : t.push(n, i);}return new w(t);}composeDesc(t) {return this.empty ? t : t.empty ? this : T(this, t);}mapDesc(t, e = !1) {return t.empty ? this : k(this, t, e);}mapPos(t, e = -1, i = b.Simple) {let n = 0,r = 0;for (let s = 0; s < this.sections.length;) {let o = this.sections[s++],a = this.sections[s++],l = n + o;if (a < 0) {if (l > t) return r + (t - n);r += o;} else {if (i != b.Simple && l >= t && (i == b.TrackDel && n < t && l > t || i == b.TrackBefore && n < t || i == b.TrackAfter && l > t)) return null;if (l > t || l == t && e < 0 && !o) return t == n || e < 0 ? r : r + a;r += a;}n = l;}if (t > n) throw new RangeError(`Position ${t} is out of range for changeset of length ${n}`);return r;}touchesRange(t, e = t) {for (let i = 0, n = 0; i < this.sections.length && n <= e;) {let r = n + this.sections[i++];if (this.sections[i++] >= 0 && n <= e && r >= t) return !(n < t && r > e) || "cover";n = r;}return !1;}toString() {let t = "";for (let e = 0; e < this.sections.length;) {let i = this.sections[e++],n = this.sections[e++];t += (t ? " " : "") + i + (n >= 0 ? ":" + n : "");}return t;}toJSON() {return this.sections;}static fromJSON(t) {if (!Array.isArray(t) || t.length % 2 || t.some((t) => "number" != typeof t)) throw new RangeError("Invalid JSON representation of ChangeDesc");return new w(t);}static create(t) {return new w(t);}}class x extends w {constructor(t, e) {super(t), this.inserted = e;}apply(t) {if (this.length != t.length) throw new RangeError("Applying change set to a document with the wrong length");return C(this, (e, i, n, r, s) => t = t.replace(n, n + (i - e), s), !1), t;}mapDesc(t, e = !1) {return k(this, t, e, !0);}invert(t) {let e = this.sections.slice(),i = [];for (let n = 0, s = 0; n < e.length; n += 2) {let o = e[n],a = e[n + 1];if (a >= 0) {e[n] = a, e[n + 1] = o;let l = n >> 1;for (; i.length < l;) i.push(r.empty);i.push(o ? t.slice(s, s + o) : r.empty);}s += o;}return new x(e, i);}compose(t) {return this.empty ? t : t.empty ? this : T(this, t, !0);}map(t, e = !1) {return t.empty ? this : k(this, t, e, !0);}iterChanges(t, e = !1) {C(this, t, e);}get desc() {return w.create(this.sections);}filter(t) {let e = [],i = [],n = [],r = new A(this);t: for (let s = 0, o = 0;;) {let a = s == t.length ? 1e9 : t[s++];for (; o < a || o == a && 0 == r.len;) {if (r.done) break t;let t = Math.min(r.len, a - o);S(n, t, -1);let s = -1 == r.ins ? -1 : 0 == r.off ? r.ins : 0;S(e, t, s), s > 0 && E(i, e, r.text), r.forward(t), o += t;}let l = t[s++];for (; o < l;) {if (r.done) break t;let t = Math.min(r.len, l - o);S(e, t, -1), S(n, t, -1 == r.ins ? -1 : 0 == r.off ? r.ins : 0), r.forward(t), o += t;}}return { changes: new x(e, i), filtered: w.create(n) };}toJSON() {let t = [];for (let e = 0; e < this.sections.length; e += 2) {let i = this.sections[e],n = this.sections[e + 1];n < 0 ? t.push(i) : 0 == n ? t.push([i]) : t.push([i].concat(this.inserted[e >> 1].toJSON()));}return t;}static of(t, e, i) {let n = [],s = [],o = 0,a = null;function l(t = !1) {if (!t && !n.length) return;o < e && S(n, e - o, -1);let i = new x(n, s);a = a ? a.compose(i.map(a)) : i, n = [], s = [], o = 0;}return function t(c) {if (Array.isArray(c)) for (let e of c) t(e);else if (c instanceof x) {if (c.length != e) throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${e})`);l(), a = a ? a.compose(c.map(a)) : c;} else {let { from: t, to: a = t, insert: h } = c;if (t > a || t < 0 || a > e) throw new RangeError(`Invalid change range ${t} to ${a} (in doc of length ${e})`);let u = h ? "string" == typeof h ? r.of(h.split(i || y)) : h : r.empty,d = u.length;if (t == a && 0 == d) return;t < o && l(), t > o && S(n, t - o, -1), S(n, a - t, d), E(s, n, u), o = a;}}(t), l(!a), a;}static empty(t) {return new x(t ? [t, -1] : [], []);}static fromJSON(t) {if (!Array.isArray(t)) throw new RangeError("Invalid JSON representation of ChangeSet");let e = [],i = [];for (let n = 0; n < t.length; n++) {let s = t[n];if ("number" == typeof s) e.push(s, -1);else {if (!Array.isArray(s) || "number" != typeof s[0] || s.some((t, e) => e && "string" != typeof t)) throw new RangeError("Invalid JSON representation of ChangeSet");if (1 == s.length) e.push(s[0], 0);else {for (; i.length < n;) i.push(r.empty);i[n] = r.of(s.slice(1)), e.push(s[0], i[n].length);}}}return new x(e, i);}static createSet(t, e) {return new x(t, e);}}function S(t, e, i, n = !1) {if (0 == e && i <= 0) return;let r = t.length - 2;r >= 0 && i <= 0 && i == t[r + 1] ? t[r] += e : r >= 0 && 0 == e && 0 == t[r] ? t[r + 1] += i : n ? (t[r] += e, t[r + 1] += i) : t.push(e, i);}function E(t, e, i) {if (0 == i.length) return;let n = e.length - 2 >> 1;if (n < t.length) t[t.length - 1] = t[t.length - 1].append(i);else {for (; t.length < n;) t.push(r.empty);t.push(i);}}function C(t, e, i) {let n = t.inserted;for (let s = 0, o = 0, a = 0; a < t.sections.length;) {let l = t.sections[a++],c = t.sections[a++];if (c < 0) s += l, o += l;else {let h = s,u = o,d = r.empty;for (; h += l, u += c, c && n && (d = d.append(n[a - 2 >> 1])), !(i || a == t.sections.length || t.sections[a + 1] < 0);) l = t.sections[a++], c = t.sections[a++];e(s, h, o, u, d), s = h, o = u;}}}function k(t, e, i, n = !1) {let r = [],s = n ? [] : null,o = new A(t),a = new A(e);for (let t = -1;;) {if (o.done && a.len || a.done && o.len) throw new Error("Mismatched change set lengths");if (-1 == o.ins && -1 == a.ins) {let t = Math.min(o.len, a.len);S(r, t, -1), o.forward(t), a.forward(t);} else if (a.ins >= 0 && (o.ins < 0 || t == o.i || 0 == o.off && (a.len < o.len || a.len == o.len && !i))) {let e = a.len;for (S(r, a.ins, -1); e;) {let i = Math.min(o.len, e);o.ins >= 0 && t < o.i && o.len <= i && (S(r, 0, o.ins), s && E(s, r, o.text), t = o.i), o.forward(i), e -= i;}a.next();} else {if (!(o.ins >= 0)) {if (o.done && a.done) return s ? x.createSet(r, s) : w.create(r);throw new Error("Mismatched change set lengths");}{let e = 0,i = o.len;for (; i;) if (-1 == a.ins) {let t = Math.min(i, a.len);e += t, i -= t, a.forward(t);} else {if (!(0 == a.ins && a.len < i)) break;i -= a.len, a.next();}S(r, e, t < o.i ? o.ins : 0), s && t < o.i && E(s, r, o.text), t = o.i, o.forward(o.len - i);}}}}function T(t, e, i = !1) {let n = [],r = i ? [] : null,s = new A(t),o = new A(e);for (let t = !1;;) {if (s.done && o.done) return r ? x.createSet(n, r) : w.create(n);if (0 == s.ins) S(n, s.len, 0, t), s.next();else if (0 != o.len || o.done) {if (s.done || o.done) throw new Error("Mismatched change set lengths");{let e = Math.min(s.len2, o.len),i = n.length;if (-1 == s.ins) {let i = -1 == o.ins ? -1 : o.off ? 0 : o.ins;S(n, e, i, t), r && i && E(r, n, o.text);} else -1 == o.ins ? (S(n, s.off ? 0 : s.len, e, t), r && E(r, n, s.textBit(e))) : (S(n, s.off ? 0 : s.len, o.off ? 0 : o.ins, t), r && !o.off && E(r, n, o.text));t = (s.ins > e || o.ins >= 0 && o.len > e) && (t || n.length > i), s.forward2(e), o.forward(e);}} else S(n, 0, o.ins, t), r && E(r, n, o.text), o.next();}}class A {constructor(t) {this.set = t, this.i = 0, this.next();}next() {let { sections: t } = this.set;this.i < t.length ? (this.len = t[this.i++], this.ins = t[this.i++]) : (this.len = 0, this.ins = -2), this.off = 0;}get done() {return -2 == this.ins;}get len2() {return this.ins < 0 ? this.len : this.ins;}get text() {let { inserted: t } = this.set,e = this.i - 2 >> 1;return e >= t.length ? r.empty : t[e];}textBit(t) {let { inserted: e } = this.set,i = this.i - 2 >> 1;return i >= e.length && !t ? r.empty : e[i].slice(this.off, null == t ? void 0 : this.off + t);}forward(t) {t == this.len ? this.next() : (this.len -= t, this.off += t);}forward2(t) {-1 == this.ins ? this.forward(t) : t == this.ins ? this.next() : (this.ins -= t, this.off += t);}}class M {constructor(t, e, i) {this.from = t, this.to = e, this.flags = i;}get anchor() {return 32 & this.flags ? this.to : this.from;}get head() {return 32 & this.flags ? this.from : this.to;}get empty() {return this.from == this.to;}get assoc() {return 8 & this.flags ? -1 : 16 & this.flags ? 1 : 0;}get bidiLevel() {let t = 7 & this.flags;return 7 == t ? null : t;}get goalColumn() {let t = this.flags >> 6;return 16777215 == t ? void 0 : t;}map(t, e = -1) {let i, n;return this.empty ? i = n = t.mapPos(this.from, e) : (i = t.mapPos(this.from, 1), n = t.mapPos(this.to, -1)), i == this.from && n == this.to ? this : new M(i, n, this.flags);}extend(t, e = t) {if (t <= this.anchor && e >= this.anchor) return _.range(t, e);let i = Math.abs(t - this.anchor) > Math.abs(e - this.anchor) ? t : e;return _.range(this.anchor, i);}eq(t, e = !1) {return !(this.anchor != t.anchor || this.head != t.head || e && this.empty && this.assoc != t.assoc);}toJSON() {return { anchor: this.anchor, head: this.head };}static fromJSON(t) {if (!t || "number" != typeof t.anchor || "number" != typeof t.head) throw new RangeError("Invalid JSON representation for SelectionRange");return _.range(t.anchor, t.head);}static create(t, e, i) {return new M(t, e, i);}}class _ {constructor(t, e) {this.ranges = t, this.mainIndex = e;}map(t, e = -1) {return t.empty ? this : _.create(this.ranges.map((i) => i.map(t, e)), this.mainIndex);}eq(t, e = !1) {if (this.ranges.length != t.ranges.length || this.mainIndex != t.mainIndex) return !1;for (let i = 0; i < this.ranges.length; i++) if (!this.ranges[i].eq(t.ranges[i], e)) return !1;return !0;}get main() {return this.ranges[this.mainIndex];}asSingle() {return 1 == this.ranges.length ? this : new _([this.main], 0);}addRange(t, e = !0) {return _.create([t].concat(this.ranges), e ? 0 : this.mainIndex + 1);}replaceRange(t, e = this.mainIndex) {let i = this.ranges.slice();return i[e] = t, _.create(i, this.mainIndex);}toJSON() {return { ranges: this.ranges.map((t) => t.toJSON()), main: this.mainIndex };}static fromJSON(t) {if (!t || !Array.isArray(t.ranges) || "number" != typeof t.main || t.main >= t.ranges.length) throw new RangeError("Invalid JSON representation for EditorSelection");return new _(t.ranges.map((t) => M.fromJSON(t)), t.main);}static single(t, e = t) {return new _([_.range(t, e)], 0);}static create(t, e = 0) {if (0 == t.length) throw new RangeError("A selection needs at least one range");for (let i = 0, n = 0; n < t.length; n++) {let r = t[n];if (r.empty ? r.from <= i : r.from < i) return _.normalized(t.slice(), e);i = r.to;}return new _(t, e);}static cursor(t, e = 0, i, n) {return M.create(t, t, (0 == e ? 0 : e < 0 ? 8 : 16) | (null == i ? 7 : Math.min(6, i)) | (null != n ? n : 16777215) << 6);}static range(t, e, i, n) {let r = (null != i ? i : 16777215) << 6 | (null == n ? 7 : Math.min(6, n));return e < t ? M.create(e, t, 48 | r) : M.create(t, e, (e > t ? 8 : 0) | r);}static normalized(t, e = 0) {let i = t[e];t.sort((t, e) => t.from - e.from), e = t.indexOf(i);for (let i = 1; i < t.length; i++) {let n = t[i],r = t[i - 1];if (n.empty ? n.from <= r.to : n.from < r.to) {let s = r.from,o = Math.max(n.to, r.to);i <= e && e--, t.splice(--i, 2, n.anchor > n.head ? _.range(o, s) : _.range(s, o));}}return new _(t, e);}}function P(t, e) {for (let i of t.ranges) if (i.to > e) throw new RangeError("Selection points outside of document");}let D = 0;class O {constructor(t, e, i, n, r) {this.combine = t, this.compareInput = e, this.compare = i, this.isStatic = n, this.id = D++, this.default = t([]), this.extensions = "function" == typeof r ? r(this) : r;}get reader() {return this;}static define(t = {}) {return new O(t.combine || ((t) => t), t.compareInput || ((t, e) => t === e), t.compare || (t.combine ? (t, e) => t === e : I), !!t.static, t.enables);}of(t) {return new F([], this, 0, t);}compute(t, e) {if (this.isStatic) throw new Error("Can't compute a static facet");return new F(t, this, 1, e);}computeN(t, e) {if (this.isStatic) throw new Error("Can't compute a static facet");return new F(t, this, 2, e);}from(t, e) {return e || (e = (t) => t), this.compute([t], (i) => e(i.field(t)));}}function I(t, e) {return t == e || t.length == e.length && t.every((t, i) => t === e[i]);}class F {constructor(t, e, i, n) {this.dependencies = t, this.facet = e, this.type = i, this.value = n, this.id = D++;}dynamicSlot(t) {var e;let i = this.value,n = this.facet.compareInput,r = this.id,s = t[r] >> 1,o = 2 == this.type,a = !1,l = !1,c = [];for (let i of this.dependencies) "doc" == i ? a = !0 : "selection" == i ? l = !0 : 1 & (null !== (e = t[i.id]) && void 0 !== e ? e : 1) || c.push(t[i.id]);return { create: (t) => (t.values[s] = i(t), 1), update(t, e) {if (a && e.docChanged || l && (e.docChanged || e.selection) || L(t, c)) {let e = i(t);if (o ? !R(e, t.values[s], n) : !n(e, t.values[s])) return t.values[s] = e, 1;}return 0;}, reconfigure: (t, e) => {let a,l = e.config.address[r];if (null != l) {let r = W(e, l);if (this.dependencies.every((i) => i instanceof O ? e.facet(i) === t.facet(i) : !(i instanceof B) || e.field(i, !1) == t.field(i, !1)) || (o ? R(a = i(t), r, n) : n(a = i(t), r))) return t.values[s] = r, 0;} else a = i(t);return t.values[s] = a, 1;} };}}function R(t, e, i) {if (t.length != e.length) return !1;for (let n = 0; n < t.length; n++) if (!i(t[n], e[n])) return !1;return !0;}function L(t, e) {let i = !1;for (let n of e) 1 & G(t, n) && (i = !0);return i;}function N(t, e, i) {let n = i.map((e) => t[e.id]),r = i.map((t) => t.type),s = n.filter((t) => !(1 & t)),o = t[e.id] >> 1;function a(t) {let i = [];for (let e = 0; e < n.length; e++) {let s = W(t, n[e]);if (2 == r[e]) for (let t of s) i.push(t);else i.push(s);}return e.combine(i);}return { create(t) {for (let e of n) G(t, e);return t.values[o] = a(t), 1;}, update(t, i) {if (!L(t, s)) return 0;let n = a(t);return e.compare(n, t.values[o]) ? 0 : (t.values[o] = n, 1);}, reconfigure(t, r) {let s = L(t, n),l = r.config.facets[e.id],c = r.facet(e);if (l && !s && I(i, l)) return t.values[o] = c, 0;let h = a(t);return e.compare(h, c) ? (t.values[o] = c, 0) : (t.values[o] = h, 1);} };}const V = O.define({ static: !0 });class B {constructor(t, e, i, n, r) {this.id = t, this.createF = e, this.updateF = i, this.compareF = n, this.spec = r, this.provides = void 0;}static define(t) {let e = new B(D++, t.create, t.update, t.compare || ((t, e) => t === e), t);return t.provide && (e.provides = t.provide(e)), e;}create(t) {let e = t.facet(V).find((t) => t.field == this);return ((null == e ? void 0 : e.create) || this.createF)(t);}slot(t) {let e = t[this.id] >> 1;return { create: (t) => (t.values[e] = this.create(t), 1), update: (t, i) => {let n = t.values[e],r = this.updateF(n, i);return this.compareF(n, r) ? 0 : (t.values[e] = r, 1);}, reconfigure: (t, i) => {let n,r = t.facet(V),s = i.facet(V);return (n = r.find((t) => t.field == this)) && n != s.find((t) => t.field == this) ? (t.values[e] = n.create(t), 1) : null != i.config.address[this.id] ? (t.values[e] = i.field(this), 0) : (t.values[e] = this.create(t), 1);} };}init(t) {return [this, V.of({ field: this, create: t })];}get extension() {return this;}}function j(t) {return (e) => new U(e, t);}const z = { highest: j(0), high: j(1), default: j(2), low: j(3), lowest: j(4) };class U {constructor(t, e) {this.inner = t, this.prec = e;}}class H {of(t) {return new q(this, t);}reconfigure(t) {return H.reconfigure.of({ compartment: this, extension: t });}get(t) {return t.config.compartments.get(this);}}class q {constructor(t, e) {this.compartment = t, this.inner = e;}}class $ {constructor(t, e, i, n, r, s) {for (this.base = t, this.compartments = e, this.dynamicSlots = i, this.address = n, this.staticValues = r, this.facets = s, this.statusTemplate = []; this.statusTemplate.length < i.length;) this.statusTemplate.push(0);}staticFacet(t) {let e = this.address[t.id];return null == e ? t.default : this.staticValues[e >> 1];}static resolve(t, e, i) {let n = [],r = Object.create(null),s = new Map();for (let i of function (t, e, i) {let n = [[], [], [], [], []],r = new Map();return function t(s, o) {let a = r.get(s);if (null != a) {if (a <= o) return;let t = n[a].indexOf(s);t > -1 && n[a].splice(t, 1), s instanceof q && i.delete(s.compartment);}if (r.set(s, o), Array.isArray(s)) for (let e of s) t(e, o);else if (s instanceof q) {if (i.has(s.compartment)) throw new RangeError("Duplicate use of compartment in extensions");let n = e.get(s.compartment) || s.inner;i.set(s.compartment, n), t(n, o);} else if (s instanceof U) t(s.inner, s.prec);else if (s instanceof B) n[o].push(s), s.provides && t(s.provides, o);else if (s instanceof F) n[o].push(s), s.facet.extensions && t(s.facet.extensions, 2);else {let e = s.extension;if (!e) throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);t(e, o);}}(t, 2), n.reduce((t, e) => t.concat(e));}(t, e, s)) i instanceof B ? n.push(i) : (r[i.facet.id] || (r[i.facet.id] = [])).push(i);let o = Object.create(null),a = [],l = [];for (let t of n) o[t.id] = l.length << 1, l.push((e) => t.slot(e));let c = null == i ? void 0 : i.config.facets;for (let t in r) {let e = r[t],n = e[0].facet,s = c && c[t] || [];if (e.every((t) => 0 == t.type)) {if (o[n.id] = a.length << 1 | 1, I(s, e)) a.push(i.facet(n));else {let t = n.combine(e.map((t) => t.value));a.push(i && n.compare(t, i.facet(n)) ? i.facet(n) : t);}} else {for (let t of e) 0 == t.type ? (o[t.id] = a.length << 1 | 1, a.push(t.value)) : (o[t.id] = l.length << 1, l.push((e) => t.dynamicSlot(e)));o[n.id] = l.length << 1, l.push((t) => N(t, n, e));}}let h = l.map((t) => t(o));return new $(t, s, h, o, a, r);}}function G(t, e) {if (1 & e) return 2;let i = e >> 1,n = t.status[i];if (4 == n) throw new Error("Cyclic dependency between fields and/or facets");if (2 & n) return n;t.status[i] = 4;let r = t.computeSlot(t, t.config.dynamicSlots[i]);return t.status[i] = 2 | r;}function W(t, e) {return 1 & e ? t.config.staticValues[e >> 1] : t.values[e >> 1];}const K = O.define(),Z = O.define({ combine: (t) => t.some((t) => t), static: !0 }),Y = O.define({ combine: (t) => t.length ? t[0] : void 0, static: !0 }),X = O.define(),J = O.define(),Q = O.define(),tt = O.define({ combine: (t) => !!t.length && t[0] });class et {constructor(t, e) {this.type = t, this.value = e;}static define() {return new it();}}class it {of(t) {return new et(this, t);}}class nt {constructor(t) {this.map = t;}of(t) {return new rt(this, t);}}class rt {constructor(t, e) {this.type = t, this.value = e;}map(t) {let e = this.type.map(this.value, t);return void 0 === e ? void 0 : e == this.value ? this : new rt(this.type, e);}is(t) {return this.type == t;}static define(t = {}) {return new nt(t.map || ((t) => t));}static mapEffects(t, e) {if (!t.length) return t;let i = [];for (let n of t) {let t = n.map(e);t && i.push(t);}return i;}}rt.reconfigure = rt.define(), rt.appendConfig = rt.define();class st {constructor(t, e, i, n, r, s) {this.startState = t, this.changes = e, this.selection = i, this.effects = n, this.annotations = r, this.scrollIntoView = s, this._doc = null, this._state = null, i && P(i, e.newLength), r.some((t) => t.type == st.time) || (this.annotations = r.concat(st.time.of(Date.now())));}static create(t, e, i, n, r, s) {return new st(t, e, i, n, r, s);}get newDoc() {return this._doc || (this._doc = this.changes.apply(this.startState.doc));}get newSelection() {return this.selection || this.startState.selection.map(this.changes);}get state() {return this._state || this.startState.applyTransaction(this), this._state;}annotation(t) {for (let e of this.annotations) if (e.type == t) return e.value;}get docChanged() {return !this.changes.empty;}get reconfigured() {return this.startState.config != this.state.config;}isUserEvent(t) {let e = this.annotation(st.userEvent);return !(!e || !(e == t || e.length > t.length && e.slice(0, t.length) == t && "." == e[t.length]));}}function ot(t, e) {let i = [];for (let n = 0, r = 0;;) {let s, o;if (n < t.length && (r == e.length || e[r] >= t[n])) s = t[n++], o = t[n++];else {if (!(r < e.length)) return i;s = e[r++], o = e[r++];}!i.length || i[i.length - 1] < s ? i.push(s, o) : i[i.length - 1] < o && (i[i.length - 1] = o);}}function at(t, e, i) {var n;let r, s, o;return i ? (r = e.changes, s = x.empty(e.changes.length), o = t.changes.compose(e.changes)) : (r = e.changes.map(t.changes), s = t.changes.mapDesc(e.changes, !0), o = t.changes.compose(r)), { changes: o, selection: e.selection ? e.selection.map(s) : null === (n = t.selection) || void 0 === n ? void 0 : n.map(r), effects: rt.mapEffects(t.effects, r).concat(rt.mapEffects(e.effects, s)), annotations: t.annotations.length ? t.annotations.concat(e.annotations) : e.annotations, scrollIntoView: t.scrollIntoView || e.scrollIntoView };}function lt(t, e, i) {let n = e.selection,r = ut(e.annotations);return e.userEvent && (r = r.concat(st.userEvent.of(e.userEvent))), { changes: e.changes instanceof x ? e.changes : x.of(e.changes || [], i, t.facet(Y)), selection: n && (n instanceof _ ? n : _.single(n.anchor, n.head)), effects: ut(e.effects), annotations: r, scrollIntoView: !!e.scrollIntoView };}function ct(t, e, i) {let n = lt(t, e.length ? e[0] : {}, t.doc.length);e.length && !1 === e[0].filter && (i = !1);for (let r = 1; r < e.length; r++) {!1 === e[r].filter && (i = !1);let s = !!e[r].sequential;n = at(n, lt(t, e[r], s ? n.changes.newLength : t.doc.length), s);}let r = st.create(t, n.changes, n.selection, n.effects, n.annotations, n.scrollIntoView);return function (t) {let e = t.startState,i = e.facet(Q),n = t;for (let r = i.length - 1; r >= 0; r--) {let s = i[r](t);s && Object.keys(s).length && (n = at(n, lt(e, s, t.changes.newLength), !0));}return n == t ? t : st.create(e, t.changes, t.selection, n.effects, n.annotations, n.scrollIntoView);}(i ? function (t) {let e = t.startState,i = !0;for (let n of e.facet(X)) {let e = n(t);if (!1 === e) {i = !1;break;}Array.isArray(e) && (i = !0 === i ? e : ot(i, e));}if (!0 !== i) {let n, r;if (!1 === i) r = t.changes.invertedDesc, n = x.empty(e.doc.length);else {let e = t.changes.filter(i);n = e.changes, r = e.filtered.mapDesc(e.changes).invertedDesc;}t = st.create(e, n, t.selection && t.selection.map(r), rt.mapEffects(t.effects, r), t.annotations, t.scrollIntoView);}let n = e.facet(J);for (let i = n.length - 1; i >= 0; i--) {let r = n[i](t);t = r instanceof st ? r : Array.isArray(r) && 1 == r.length && r[0] instanceof st ? r[0] : ct(e, ut(r), !1);}return t;}(r) : r);}st.time = et.define(), st.userEvent = et.define(), st.addToHistory = et.define(), st.remote = et.define();const ht = [];function ut(t) {return null == t ? ht : Array.isArray(t) ? t : [t];}var dt = function (t) {return t[t.Word = 0] = "Word", t[t.Space = 1] = "Space", t[t.Other = 2] = "Other", t;}(dt || (dt = {}));const pt = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ft;try {ft = new RegExp("[\\p{Alphabetic}\\p{Number}_]", "u");} catch (t) {}class gt {constructor(t, e, i, n, r, s) {this.config = t, this.doc = e, this.selection = i, this.values = n, this.status = t.statusTemplate.slice(), this.computeSlot = r, s && (s._state = this);for (let t = 0; t < this.config.dynamicSlots.length; t++) G(this, t << 1);this.computeSlot = null;}field(t, e = !0) {let i = this.config.address[t.id];if (null != i) return G(this, i), W(this, i);if (e) throw new RangeError("Field is not present in this state");}update(...t) {return ct(this, t, !0);}applyTransaction(t) {let e,i = this.config,{ base: n, compartments: r } = i;for (let e of t.effects) e.is(H.reconfigure) ? (i && (r = new Map(), i.compartments.forEach((t, e) => r.set(e, t)), i = null), r.set(e.value.compartment, e.value.extension)) : e.is(rt.reconfigure) ? (i = null, n = e.value) : e.is(rt.appendConfig) && (i = null, n = ut(n).concat(e.value));i ? e = t.startState.values.slice() : (i = $.resolve(n, r, this), e = new gt(i, this.doc, this.selection, i.dynamicSlots.map(() => null), (t, e) => e.reconfigure(t, this), null).values);let s = t.startState.facet(Z) ? t.newSelection : t.newSelection.asSingle();new gt(i, t.newDoc, s, e, (e, i) => i.update(e, t), t);}replaceSelection(t) {return "string" == typeof t && (t = this.toText(t)), this.changeByRange((e) => ({ changes: { from: e.from, to: e.to, insert: t }, range: _.cursor(e.from + t.length) }));}changeByRange(t) {let e = this.selection,i = t(e.ranges[0]),n = this.changes(i.changes),r = [i.range],s = ut(i.effects);for (let i = 1; i < e.ranges.length; i++) {let o = t(e.ranges[i]),a = this.changes(o.changes),l = a.map(n);for (let t = 0; t < i; t++) r[t] = r[t].map(l);let c = n.mapDesc(a, !0);r.push(o.range.map(c)), n = n.compose(l), s = rt.mapEffects(s, l).concat(rt.mapEffects(ut(o.effects), c));}return { changes: n, selection: _.create(r, e.mainIndex), effects: s };}changes(t = []) {return t instanceof x ? t : x.of(t, this.doc.length, this.facet(gt.lineSeparator));}toText(t) {return r.of(t.split(this.facet(gt.lineSeparator) || y));}sliceDoc(t = 0, e = this.doc.length) {return this.doc.sliceString(t, e, this.lineBreak);}facet(t) {let e = this.config.address[t.id];return null == e ? t.default : (G(this, e), W(this, e));}toJSON(t) {let e = { doc: this.sliceDoc(), selection: this.selection.toJSON() };if (t) for (let i in t) {let n = t[i];n instanceof B && null != this.config.address[n.id] && (e[i] = n.spec.toJSON(this.field(t[i]), this));}return e;}static fromJSON(t, e = {}, i) {if (!t || "string" != typeof t.doc) throw new RangeError("Invalid JSON representation for EditorState");let n = [];if (i) for (let e in i) if (Object.prototype.hasOwnProperty.call(t, e)) {let r = i[e],s = t[e];n.push(r.init((t) => r.spec.fromJSON(s, t)));}return gt.create({ doc: t.doc, selection: _.fromJSON(t.selection), extensions: e.extensions ? n.concat([e.extensions]) : n });}static create(t = {}) {let e = $.resolve(t.extensions || [], new Map()),i = t.doc instanceof r ? t.doc : r.of((t.doc || "").split(e.staticFacet(gt.lineSeparator) || y)),n = t.selection ? t.selection instanceof _ ? t.selection : _.single(t.selection.anchor, t.selection.head) : _.single(0);return P(n, i.length), e.staticFacet(Z) || (n = n.asSingle()), new gt(e, i, n, e.dynamicSlots.map(() => null), (t, e) => e.create(t), null);}get tabSize() {return this.facet(gt.tabSize);}get lineBreak() {return this.facet(gt.lineSeparator) || "\n";}get readOnly() {return this.facet(tt);}phrase(t, ...e) {for (let e of this.facet(gt.phrases)) if (Object.prototype.hasOwnProperty.call(e, t)) {t = e[t];break;}return e.length && (t = t.replace(/\$(\$|\d*)/g, (t, i) => {if ("$" == i) return "$";let n = +(i || 1);return !n || n > e.length ? t : e[n - 1];})), t;}languageDataAt(t, e, i = -1) {let n = [];for (let r of this.facet(K)) for (let s of r(this, e, i)) Object.prototype.hasOwnProperty.call(s, t) && n.push(s[t]);return n;}charCategorizer(t) {return e = this.languageDataAt("wordChars", t).join(""), (t) => {if (!/\S/.test(t)) return dt.Space;if (function (t) {if (ft) return ft.test(t);for (let e = 0; e < t.length; e++) {let i = t[e];if (/\w/.test(i) || i > "" && (i.toUpperCase() != i.toLowerCase() || pt.test(i))) return !0;}return !1;}(t)) return dt.Word;for (let i = 0; i < e.length; i++) if (t.indexOf(e[i]) > -1) return dt.Word;return dt.Other;};var e;}wordAt(t) {let { text: e, from: i, length: n } = this.doc.lineAt(t),r = this.charCategorizer(t),s = t - i,o = t - i;for (; s > 0;) {let t = f(e, s, !1);if (r(e.slice(t, s)) != dt.Word) break;s = t;}for (; o < n;) {let t = f(e, o);if (r(e.slice(o, t)) != dt.Word) break;o = t;}return s == o ? null : _.range(s + i, o + i);}}function mt(t, e, i = {}) {let n = {};for (let e of t) for (let t of Object.keys(e)) {let r = e[t],s = n[t];if (void 0 === s) n[t] = r;else if (s === r || void 0 === r) ;else {if (!Object.hasOwnProperty.call(i, t)) throw new Error("Config merge conflict for field " + t);n[t] = i[t](s, r);}}for (let t in e) void 0 === n[t] && (n[t] = e[t]);return n;}gt.allowMultipleSelections = Z, gt.tabSize = O.define({ combine: (t) => t.length ? t[0] : 4 }), gt.lineSeparator = Y, gt.readOnly = tt, gt.phrases = O.define({ compare(t, e) {let i = Object.keys(t),n = Object.keys(e);return i.length == n.length && i.every((i) => t[i] == e[i]);} }), gt.languageData = K, gt.changeFilter = X, gt.transactionFilter = J, gt.transactionExtender = Q, H.reconfigure = rt.define();class vt {eq(t) {return this == t;}range(t, e = t) {return yt.create(t, e, this);}}vt.prototype.startSide = vt.prototype.endSide = 0, vt.prototype.point = !1, vt.prototype.mapMode = b.TrackDel;class yt {constructor(t, e, i) {this.from = t, this.to = e, this.value = i;}static create(t, e, i) {return new yt(t, e, i);}}function bt(t, e) {return t.from - e.from || t.value.startSide - e.value.startSide;}class wt {constructor(t, e, i, n) {this.from = t, this.to = e, this.value = i, this.maxPoint = n;}get length() {return this.to[this.to.length - 1];}findIndex(t, e, i, n = 0) {let r = i ? this.to : this.from;for (let s = n, o = r.length;;) {if (s == o) return s;let n = s + o >> 1,a = r[n] - t || (i ? this.value[n].endSide : this.value[n].startSide) - e;if (n == s) return a >= 0 ? s : o;a >= 0 ? o = n : s = n + 1;}}between(t, e, i, n) {for (let r = this.findIndex(e, -1e9, !0), s = this.findIndex(i, 1e9, !1, r); r < s; r++) if (!1 === n(this.from[r] + t, this.to[r] + t, this.value[r])) return !1;}map(t, e) {let i = [],n = [],r = [],s = -1,o = -1;for (let a = 0; a < this.value.length; a++) {let l,c,h = this.value[a],u = this.from[a] + t,d = this.to[a] + t;if (u == d) {let t = e.mapPos(u, h.startSide, h.mapMode);if (null == t) continue;if (l = c = t, h.startSide != h.endSide && (c = e.mapPos(u, h.endSide), c < l)) continue;} else if (l = e.mapPos(u, h.startSide), c = e.mapPos(d, h.endSide), l > c || l == c && h.startSide > 0 && h.endSide <= 0) continue;(c - l || h.endSide - h.startSide) < 0 || (s < 0 && (s = l), h.point && (o = Math.max(o, c - l)), i.push(h), n.push(l - s), r.push(c - s));}return { mapped: i.length ? new wt(n, r, i, o) : null, pos: s };}}class xt {constructor(t, e, i, n) {this.chunkPos = t, this.chunk = e, this.nextLayer = i, this.maxPoint = n;}static create(t, e, i, n) {return new xt(t, e, i, n);}get length() {let t = this.chunk.length - 1;return t < 0 ? 0 : Math.max(this.chunkEnd(t), this.nextLayer.length);}get size() {if (this.isEmpty) return 0;let t = this.nextLayer.size;for (let e of this.chunk) t += e.value.length;return t;}chunkEnd(t) {return this.chunkPos[t] + this.chunk[t].length;}update(t) {let { add: e = [], sort: i = !1, filterFrom: n = 0, filterTo: r = this.length } = t,s = t.filter;if (0 == e.length && !s) return this;if (i && (e = e.slice().sort(bt)), this.isEmpty) return e.length ? xt.of(e) : this;let o = new Ct(this, null, -1).goto(0),a = 0,l = [],c = new St();for (; o.value || a < e.length;) if (a < e.length && (o.from - e[a].from || o.startSide - e[a].value.startSide) >= 0) {let t = e[a++];c.addInner(t.from, t.to, t.value) || l.push(t);} else 1 == o.rangeIndex && o.chunkIndex < this.chunk.length && (a == e.length || this.chunkEnd(o.chunkIndex) < e[a].from) && (!s || n > this.chunkEnd(o.chunkIndex) || r < this.chunkPos[o.chunkIndex]) && c.addChunk(this.chunkPos[o.chunkIndex], this.chunk[o.chunkIndex]) ? o.nextChunk() : ((!s || n > o.to || r < o.from || s(o.from, o.to, o.value)) && (c.addInner(o.from, o.to, o.value) || l.push(yt.create(o.from, o.to, o.value))), o.next());return c.finishInner(this.nextLayer.isEmpty && !l.length ? xt.empty : this.nextLayer.update({ add: l, filter: s, filterFrom: n, filterTo: r }));}map(t) {if (t.empty || this.isEmpty) return this;let e = [],i = [],n = -1;for (let r = 0; r < this.chunk.length; r++) {let s = this.chunkPos[r],o = this.chunk[r],a = t.touchesRange(s, s + o.length);if (!1 === a) n = Math.max(n, o.maxPoint), e.push(o), i.push(t.mapPos(s));else if (!0 === a) {let { mapped: r, pos: a } = o.map(s, t);r && (n = Math.max(n, r.maxPoint), e.push(r), i.push(a));}}let r = this.nextLayer.map(t);return 0 == e.length ? r : new xt(i, e, r || xt.empty, n);}between(t, e, i) {if (!this.isEmpty) {for (let n = 0; n < this.chunk.length; n++) {let r = this.chunkPos[n],s = this.chunk[n];if (e >= r && t <= r + s.length && !1 === s.between(r, t - r, e - r, i)) return;}this.nextLayer.between(t, e, i);}}iter(t = 0) {return kt.from([this]).goto(t);}get isEmpty() {return this.nextLayer == this;}static iter(t, e = 0) {return kt.from(t).goto(e);}static compare(t, e, i, n, r = -1) {let s = t.filter((t) => t.maxPoint > 0 || !t.isEmpty && t.maxPoint >= r),o = e.filter((t) => t.maxPoint > 0 || !t.isEmpty && t.maxPoint >= r),a = Et(s, o, i),l = new At(s, a, r),c = new At(o, a, r);i.iterGaps((t, e, i) => Mt(l, t, c, e, i, n)), i.empty && 0 == i.length && Mt(l, 0, c, 0, 0, n);}static eq(t, e, i = 0, n) {null == n && (n = 999999999);let r = t.filter((t) => !t.isEmpty && e.indexOf(t) < 0),s = e.filter((e) => !e.isEmpty && t.indexOf(e) < 0);if (r.length != s.length) return !1;if (!r.length) return !0;let o = Et(r, s),a = new At(r, o, 0).goto(i),l = new At(s, o, 0).goto(i);for (;;) {if (a.to != l.to || !_t(a.active, l.active) || a.point && (!l.point || !a.point.eq(l.point))) return !1;if (a.to > n) return !0;a.next(), l.next();}}static spans(t, e, i, n, r = -1) {let s = new At(t, null, r).goto(e),o = e,a = s.openStart;for (;;) {let t = Math.min(s.to, i);if (s.point) {let i = s.activeForPoint(s.to),r = s.pointFrom < e ? i.length + 1 : s.point.startSide < 0 ? i.length : Math.min(i.length, a);n.point(o, t, s.point, i, r, s.pointRank), a = Math.min(s.openEnd(t), i.length);} else t > o && (n.span(o, t, s.active, a), a = s.openEnd(t));if (s.to > i) return a + (s.point && s.to > i ? 1 : 0);o = s.to, s.next();}}static of(t, e = !1) {let i = new St();for (let n of t instanceof yt ? [t] : e ? function (t) {if (t.length > 1) for (let e = t[0], i = 1; i < t.length; i++) {let n = t[i];if (bt(e, n) > 0) return t.slice().sort(bt);e = n;}return t;}(t) : t) i.add(n.from, n.to, n.value);return i.finish();}static join(t) {if (!t.length) return xt.empty;let e = t[t.length - 1];for (let i = t.length - 2; i >= 0; i--) for (let n = t[i]; n != xt.empty; n = n.nextLayer) e = new xt(n.chunkPos, n.chunk, e, Math.max(n.maxPoint, e.maxPoint));return e;}}xt.empty = new xt([], [], null, -1), xt.empty.nextLayer = xt.empty;class St {finishChunk(t) {this.chunks.push(new wt(this.from, this.to, this.value, this.maxPoint)), this.chunkPos.push(this.chunkStart), this.chunkStart = -1, this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint), this.maxPoint = -1, t && (this.from = [], this.to = [], this.value = []);}constructor() {this.chunks = [], this.chunkPos = [], this.chunkStart = -1, this.last = null, this.lastFrom = -1e9, this.lastTo = -1e9, this.from = [], this.to = [], this.value = [], this.maxPoint = -1, this.setMaxPoint = -1, this.nextLayer = null;}add(t, e, i) {this.addInner(t, e, i) || (this.nextLayer || (this.nextLayer = new St())).add(t, e, i);}addInner(t, e, i) {let n = t - this.lastTo || i.startSide - this.last.endSide;if (n <= 0 && (t - this.lastFrom || i.startSide - this.last.startSide) < 0) throw new Error("Ranges must be added sorted by `from` position and `startSide`");return !(n < 0 || (250 == this.from.length && this.finishChunk(!0), this.chunkStart < 0 && (this.chunkStart = t), this.from.push(t - this.chunkStart), this.to.push(e - this.chunkStart), this.last = i, this.lastFrom = t, this.lastTo = e, this.value.push(i), i.point && (this.maxPoint = Math.max(this.maxPoint, e - t)), 0));}addChunk(t, e) {if ((t - this.lastTo || e.value[0].startSide - this.last.endSide) < 0) return !1;this.from.length && this.finishChunk(!0), this.setMaxPoint = Math.max(this.setMaxPoint, e.maxPoint), this.chunks.push(e), this.chunkPos.push(t);let i = e.value.length - 1;return this.last = e.value[i], this.lastFrom = e.from[i] + t, this.lastTo = e.to[i] + t, !0;}finish() {return this.finishInner(xt.empty);}finishInner(t) {if (this.from.length && this.finishChunk(!1), 0 == this.chunks.length) return t;let e = xt.create(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(t) : t, this.setMaxPoint);return this.from = null, e;}}function Et(t, e, i) {let n = new Map();for (let e of t) for (let t = 0; t < e.chunk.length; t++) e.chunk[t].maxPoint <= 0 && n.set(e.chunk[t], e.chunkPos[t]);let r = new Set();for (let t of e) for (let e = 0; e < t.chunk.length; e++) {let s = n.get(t.chunk[e]);null == s || (i ? i.mapPos(s) : s) != t.chunkPos[e] || (null == i ? void 0 : i.touchesRange(s, s + t.chunk[e].length)) || r.add(t.chunk[e]);}return r;}class Ct {constructor(t, e, i, n = 0) {this.layer = t, this.skip = e, this.minPoint = i, this.rank = n;}get startSide() {return this.value ? this.value.startSide : 0;}get endSide() {return this.value ? this.value.endSide : 0;}goto(t, e = -1e9) {return this.chunkIndex = this.rangeIndex = 0, this.gotoInner(t, e, !1), this;}gotoInner(t, e, i) {for (; this.chunkIndex < this.layer.chunk.length;) {let e = this.layer.chunk[this.chunkIndex];if (!(this.skip && this.skip.has(e) || this.layer.chunkEnd(this.chunkIndex) < t || e.maxPoint < this.minPoint)) break;this.chunkIndex++, i = !1;}if (this.chunkIndex < this.layer.chunk.length) {let n = this.layer.chunk[this.chunkIndex].findIndex(t - this.layer.chunkPos[this.chunkIndex], e, !0);(!i || this.rangeIndex < n) && this.setRangeIndex(n);}this.next();}forward(t, e) {(this.to - t || this.endSide - e) < 0 && this.gotoInner(t, e, !0);}next() {for (;;) {if (this.chunkIndex == this.layer.chunk.length) {this.from = this.to = 1e9, this.value = null;break;}{let t = this.layer.chunkPos[this.chunkIndex],e = this.layer.chunk[this.chunkIndex],i = t + e.from[this.rangeIndex];if (this.from = i, this.to = t + e.to[this.rangeIndex], this.value = e.value[this.rangeIndex], this.setRangeIndex(this.rangeIndex + 1), this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint) break;}}}setRangeIndex(t) {if (t == this.layer.chunk[this.chunkIndex].value.length) {if (this.chunkIndex++, this.skip) for (; this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]);) this.chunkIndex++;this.rangeIndex = 0;} else this.rangeIndex = t;}nextChunk() {this.chunkIndex++, this.rangeIndex = 0, this.next();}compare(t) {return this.from - t.from || this.startSide - t.startSide || this.rank - t.rank || this.to - t.to || this.endSide - t.endSide;}}class kt {constructor(t) {this.heap = t;}static from(t, e = null, i = -1) {let n = [];for (let r = 0; r < t.length; r++) for (let s = t[r]; !s.isEmpty; s = s.nextLayer) s.maxPoint >= i && n.push(new Ct(s, e, i, r));return 1 == n.length ? n[0] : new kt(n);}get startSide() {return this.value ? this.value.startSide : 0;}goto(t, e = -1e9) {for (let i of this.heap) i.goto(t, e);for (let t = this.heap.length >> 1; t >= 0; t--) Tt(this.heap, t);return this.next(), this;}forward(t, e) {for (let i of this.heap) i.forward(t, e);for (let t = this.heap.length >> 1; t >= 0; t--) Tt(this.heap, t);(this.to - t || this.value.endSide - e) < 0 && this.next();}next() {if (0 == this.heap.length) this.from = this.to = 1e9, this.value = null, this.rank = -1;else {let t = this.heap[0];this.from = t.from, this.to = t.to, this.value = t.value, this.rank = t.rank, t.value && t.next(), Tt(this.heap, 0);}}}function Tt(t, e) {for (let i = t[e];;) {let n = 1 + (e << 1);if (n >= t.length) break;let r = t[n];if (n + 1 < t.length && r.compare(t[n + 1]) >= 0 && (r = t[n + 1], n++), i.compare(r) < 0) break;t[n] = i, t[e] = r, e = n;}}class At {constructor(t, e, i) {this.minPoint = i, this.active = [], this.activeTo = [], this.activeRank = [], this.minActive = -1, this.point = null, this.pointFrom = 0, this.pointRank = 0, this.to = -1e9, this.endSide = 0, this.openStart = -1, this.cursor = kt.from(t, e, i);}goto(t, e = -1e9) {return this.cursor.goto(t, e), this.active.length = this.activeTo.length = this.activeRank.length = 0, this.minActive = -1, this.to = t, this.endSide = e, this.openStart = -1, this.next(), this;}forward(t, e) {for (; this.minActive > -1 && (this.activeTo[this.minActive] - t || this.active[this.minActive].endSide - e) < 0;) this.removeActive(this.minActive);this.cursor.forward(t, e);}removeActive(t) {Pt(this.active, t), Pt(this.activeTo, t), Pt(this.activeRank, t), this.minActive = Ot(this.active, this.activeTo);}addActive(t) {let e = 0,{ value: i, to: n, rank: r } = this.cursor;for (; e < this.activeRank.length && (r - this.activeRank[e] || n - this.activeTo[e]) > 0;) e++;Dt(this.active, e, i), Dt(this.activeTo, e, n), Dt(this.activeRank, e, r), t && Dt(t, e, this.cursor.from), this.minActive = Ot(this.active, this.activeTo);}next() {let t = this.to,e = this.point;this.point = null;let i = this.openStart < 0 ? [] : null;for (;;) {let n = this.minActive;if (n > -1 && (this.activeTo[n] - this.cursor.from || this.active[n].endSide - this.cursor.startSide) < 0) {if (this.activeTo[n] > t) {this.to = this.activeTo[n], this.endSide = this.active[n].endSide;break;}this.removeActive(n), i && Pt(i, n);} else {if (!this.cursor.value) {this.to = this.endSide = 1e9;break;}if (this.cursor.from > t) {this.to = this.cursor.from, this.endSide = this.cursor.startSide;break;}{let t = this.cursor.value;if (t.point) {if (!(e && this.cursor.to == this.to && this.cursor.from < this.cursor.to)) {this.point = t, this.pointFrom = this.cursor.from, this.pointRank = this.cursor.rank, this.to = this.cursor.to, this.endSide = t.endSide, this.cursor.next(), this.forward(this.to, this.endSide);break;}this.cursor.next();} else this.addActive(i), this.cursor.next();}}}if (i) {this.openStart = 0;for (let e = i.length - 1; e >= 0 && i[e] < t; e--) this.openStart++;}}activeForPoint(t) {if (!this.active.length) return this.active;let e = [];for (let i = this.active.length - 1; i >= 0 && !(this.activeRank[i] < this.pointRank); i--) (this.activeTo[i] > t || this.activeTo[i] == t && this.active[i].endSide >= this.point.endSide) && e.push(this.active[i]);return e.reverse();}openEnd(t) {let e = 0;for (let i = this.activeTo.length - 1; i >= 0 && this.activeTo[i] > t; i--) e++;return e;}}function Mt(t, e, i, n, r, s) {t.goto(e), i.goto(n);let o = n + r,a = n,l = n - e;for (;;) {let e = t.to + l - i.to,n = e || t.endSide - i.endSide,r = n < 0 ? t.to + l : i.to,c = Math.min(r, o);if (t.point || i.point ? t.point && i.point && (t.point == i.point || t.point.eq(i.point)) && _t(t.activeForPoint(t.to), i.activeForPoint(i.to)) || s.comparePoint(a, c, t.point, i.point) : c > a && !_t(t.active, i.active) && s.compareRange(a, c, t.active, i.active), r > o) break;(e || t.openEnd != i.openEnd) && s.boundChange && s.boundChange(r), a = r, n <= 0 && t.next(), n >= 0 && i.next();}}function _t(t, e) {if (t.length != e.length) return !1;for (let i = 0; i < t.length; i++) if (t[i] != e[i] && !t[i].eq(e[i])) return !1;return !0;}function Pt(t, e) {for (let i = e, n = t.length - 1; i < n; i++) t[i] = t[i + 1];t.pop();}function Dt(t, e, i) {for (let i = t.length - 1; i >= e; i--) t[i + 1] = t[i];t[e] = i;}function Ot(t, e) {let i = -1,n = 1e9;for (let r = 0; r < e.length; r++) (e[r] - n || t[r].endSide - t[i].endSide) < 0 && (i = r, n = e[r]);return i;}function It(t, e, i = t.length) {let n = 0;for (let r = 0; r < i && r < t.length;) 9 == t.charCodeAt(r) ? (n += e - n % e, r++) : (n++, r = f(t, r));return n;}function Ft(t, e, i, n) {for (let n = 0, r = 0;;) {if (r >= e) return n;if (n == t.length) break;r += 9 == t.charCodeAt(n) ? i - r % i : 1, n = f(t, n);}return !0 === n ? -1 : t.length;}}, 6599: (t, e, i) => {"use strict";i.d(e, { s: () => l });var n = i(6639),r = i(4653),s = i(3753),o = i(4159);function a(t) {return t?.color ? t.colorEnd ? `linear-gradient(90deg, ${t.color}, ${t.colorEnd})` : t.color : null;}class l extends r.T {scale = 1;customColorDialogIsVisible = !1;colorPalette;dialog;dialogContent;static _instance;static get instance() {return l._instance || (l._instance = new this()), l._instance;}constructor(t) {if (super(), l._instance) return l._instance;l._instance = this, t || (t = thisVisual.host.colorPalette), this.colorPalette = t, this.listen();}listen() {document.addLiveEventListener("click", ".color-picker", (t, e) => {t.preventDefault();const i = e.parentElement;i.getAttribute("disabled") || i.classList.contains("readonly") || l.SHOW(e, JSON.parse(i.dataset.options));}), document.addLiveEventListener("click", ".color-picker-dialog .color-cell", (t, e) => {t.preventDefault(), t.stopPropagation(), this.changeColor(e, e.dataset.color), l.HIDE();}), document.addLiveEventListener("change", ".color-picker-dialog .custom-color-cell", (t, e) => {t.stopPropagation(), this.changeColor(e, e.value), l.HIDE();}), document.addLiveEventListener("click", ".color-picker-dialog .custom-color-cell", (t, e) => {t.stopPropagation();const i = e.closest(".color-picker-dialog");(0, n.kO)(".selected", i).forEach((t) => t.classList.remove("selected")), e.classList.add("selected"), this.customColorDialogIsVisible = !0;}), document.addLiveEventListener("click", ".color-picker-dialog .content", (t) => {t.stopPropagation(), t.stopImmediatePropagation();}), document.addLiveEventListener("click", ".color-picker-dialog", () => {this.customColorDialogIsVisible || l.HIDE();});}changeColor(t, e) {const i = t.closest(".color-picker-dialog"),r = i.dataset.id;(0, n.kO)(".selected", i).forEach((t) => t.classList.remove("selected")), t.classList.add("selected"), l.UPDATE_COLOR(r, e), this.trigger("change", { id: r, color: e });}static DOM(t, e) {return this.instance.dom(t, e);}dom(t, e) {(t = { nullable: !0, customColors: [], colorWheel: !0, title: "Choose a color", color: "", disabled: !1, readonly: !1, hiddenField: !0, id: "default", ...t }).color || (t.color = "");const i = (0, n.tT)(`#${(0, s.aH)(t.id)}.color-picker-container${t.readonly ? ".readonly" : ""}`, { attr: { disabled: t.disabled }, data: { options: t } }, [(0, n.tT)("button.color-picker", [(0, n.tT)(".color-cell" + (t.color ? "" : ".empty"), { style: { background: a(t) || "none" } }), (0, n.tT)(".dropdown.icon-bottom")])]);return t.hiddenField && (0, n.tT)("input.color-field", i, { attr: { type: "hidden", name: t.id, value: t.color } }), e && e.appendChild(i), i;}static UPDATE(t) {this.instance.update(t);}update(t) {this.scale = t.viewport.scale;}static UPDATE_COLOR(t, e) {const i = (0, n.VR)(`#${(0, s.aH)(t)}`);if (!i.isNull) {const t = JSON.parse(i.dataset.options);t.color = e, i.dataset.options = JSON.stringify(t);const r = (0, n.VR)(".color-cell", i);e ? (r.classList.remove("empty"), r.style.background = a(t)) : (r.classList.add("empty"), r.style.background = "none");const s = (0, n.VR)("input.color-field", i);s.isNull || (s.value = e, s.dispatchEvent(new Event("change")));}}static SHOW(t, e) {this.instance.showDialog(t, e);}showDialog(t, e) {if (this.dialog && this.dialog.dataset.id == e.id) return;this.hideDialog(), this.dialog = (0, n.tT)(".color-picker-dialog", document.body, { style: { transform: `scale(${1 / this.scale})` }, data: { id: e.id } }), this.dialogContent = (0, n.tT)(".content", this.dialog);const i = (0, n.tT)(".theme-colors", this.dialogContent);(0, n.tT)("h1", i, e.title);const r = (0, n.tT)("table.colors", i),s = this.dialogColors(e.customColors),o = (t, e = 1) => {const i = (0, n.tT)("tr", t),r = (0, n.tT)("td", i, { attr: { colspan: e } });(0, n.tT)("hr", r);},a = (t, e, i = !1, r, s = 1) => {const o = (0, n.tT)("td", t, { attr: { colspan: s } }),a = (0, n.tT)(".color-tile", o);(0, n.tT)(`.color-cell${e ? "" : ".empty"}${i ? ".selected" : ""}`, a, { style: { background: e }, attr: { title: e }, data: { color: e } }), r && (0, n.tT)("span", a, r);},l = (t, e, i = !1, r = 1) => {const s = (0, n.tT)("td", t, { attr: { colspan: r } }),o = (0, n.tT)(".color-tile", s);(0, n.tT)("input.custom-color-cell" + (i ? ".selected" : ""), o, { attr: { type: "color", value: e || "#ffffff" }, events: { blur: () => this.customColorDialogIsVisible = !1, input: (t) => {const e = t.target;this.changeColor(e, e.value);} } }), (0, n.tT)("span", o, "Custom color");},c = 10;let h = !1;for (let t = 0; t < 6; t++) {const i = (0, n.tT)("tr", r);for (let n = 0; n < c; n++) {const r = s[n][t],o = e.color ? e.color.toLowerCase() == r.toLowerCase() : !r;o && (h = !0), a(i, r, o);}0 == t && o(r, c);}e.nullable && (o(r, c), a((0, n.tT)("tr", r), "", !e.color, "No fill", c)), e.colorWheel && (o(r, c), l((0, n.tT)("tr", r), e.color, !(h || !e.color), c)), this.positionDialog(t);}dialogColors(t) {const e = [["#ffffff", "#E6E6E6", "#CCCCCC", "#B3B3B3", "#808080", "#666666"], ["#000000", "#999999", "#666666", "#333333", "#1A1A1A", "#000000"]];if (t) for (let i = 0; i < t.length; i++) {const n = t[i];e.push([n, (0, o.dy)(.45, n), (0, o.dy)(.25, n), (0, o.dy)(.1, n), (0, o.dy)(3 * -.15, n), (0, o.dy)(-.6, n), (0, o.dy)(-.75, n)]);}const i = Math.max(0, 10 - e.length);if (i && this.colorPalette) for (let t = 0; t < i; t++) {const i = this.colorPalette.colors[t].value;e.push([i, (0, o.dy)(.45, i), (0, o.dy)(.25, i), (0, o.dy)(.1, i), (0, o.dy)(3 * -.15, i), (0, o.dy)(-.6, i), (0, o.dy)(-.75, i)]);}return e;}positionDialog(t) {const e = t.getBoundingClientRect(),i = window.innerWidth,n = window.innerHeight,r = this.dialogContent.offsetWidth,s = this.dialogContent.offsetHeight,o = Math.max(0, e.left + r > i ? e.left - r + e.width : e.left),a = Math.max(0, e.top + e.height + s > n ? e.top - s - 3 : e.top + e.height + 3);this.dialogContent.style.left = `${o}px`, this.dialogContent.style.top = `${a}px`;}static HIDE() {this.instance.hideDialog();}hideDialog() {this.dialog && (this.dialog.remove(), this.dialog = null), this.customColorDialogIsVisible = !1;}}}, 6615: (t, e, i) => {"use strict";i.d(e, { KG: () => n, tz: () => o });var n,r = i(6639),s = i(3753);!function (t) {t[t.Separator = 0] = "Separator", t[t.Label = 1] = "Label", t[t.Custom = 2] = "Custom", t[t.Normal = 3] = "Normal", t[t.Check = 4] = "Check", t[t.Radio = 5] = "Radio", t[t.Header = 6] = "Header", t[t.Hint = 7] = "Hint", t[t.Submenu = 8] = "Submenu";}(n || (n = {}));class o {id;options;static current;menuControl;lastEvent;static Init(t, e, i) {e = { closeOnItemClick: !0, width: "auto", scale: 1, items: [], ...e }, o.current && o.current.destroy();const n = new o(t, e, i);return o.current = n, n;}constructor(t, e, i) {this.id = t, this.options = e, this.menuControl = (0, r.tT)("ul.contextualJs.contextualMenu", { attr: { id: this.id || (0, s.uR)() } }), "auto" != this.options.width && (this.menuControl.style.width = `${e.width || 200}px`), 1 != this.options.scale && (this.menuControl.style.transform = `scale(${1 / this.options.scale})`), this.render(), i && this.show(i), window.addEventListener("resize", o.Close);}get isVisible() {return this.menuControl && this.menuControl.parentElement == document.body;}add(t) {void 0 === t.closeMenuOnClick && (t.closeMenuOnClick = this.options.closeOnItemClick);const e = new a(t);this.menuControl.appendChild(e.element);}render() {const t = (t) => t.filter((t) => t.icon || t.checkable || t.type == n.Check || t.type == n.Radio).length;Array.isArray(this.options.items) ? (this.removeElementChildren(this.menuControl), this.options.items.forEach((t) => this.add(t)), t(this.options.items) || this.menuControl.classList.add("no-icons")) : ((0, r.tT)("li.contextualMenuLoader", this.menuControl, "..."), this.options.items().then((e) => {this.menuControl && (this.removeElementChildren(this.menuControl), e.forEach((t) => this.add(t)), t(e) || this.menuControl.classList.add("no-icons"), this.lastEvent && this.place(this.lastEvent, this.menuControl));}));}show(t) {if (t.stopPropagation(), o.Close(), o.ToggleCatcher(!0), this.options.sticky && "boolean" != typeof this.options.sticky) this.options.sticky.classList.add("context-hover");else {const e = t.target;e.parentElement.classList.add("context-hover"), e.classList.add("context-hover");}document.body.appendChild(this.menuControl), this.place(t, this.menuControl);}hide(t) {t && t.stopPropagation(), o.Close();}toggle(t) {this.isVisible ? this.hide(t) : this.show(t);}removeElementChildren(t) {let e = t.lastElementChild;for (; e;) t.removeChild(e), e = t.lastElementChild;}place(t, e) {e.style.maxHeight = "none";const i = e.getBoundingClientRect(),n = this.options.sticky ? "boolean" == typeof this.options.sticky ? t.target.getBoundingClientRect() : this.options.sticky.getBoundingClientRect() : new DOMRect(t.clientX, t.clientY, 0, 0),r = n.left + i.width >= window.innerWidth && n.left > i.width + 10 ? n.left - i.width + n.width : n.left,s = n.top + n.height + i.height >= window.innerHeight && n.top + n.height > i.height ? n.top - i.height : n.top + n.height;e.style.top = `${s}px`, e.style.left = `${r}px`, e.style.maxHeight = (window.innerHeight - s - 25) / (1 / this.options.scale) + "px", this.lastEvent = t;}destroy() {this.menuControl = null, this.options = null, this.lastEvent = null;}static ToggleCatcher(t) {if (t) {const t = document.createElement("div");t.classList.add("contextualMenuCatcher"), document.body.appendChild(t), t.addEventListener("click", o.CloseListener), t.addEventListener("contextmenu", o.CloseListener);} else (0, r.kO)(".contextualMenuCatcher").forEach((t) => {t.removeEventListener("click", o.CloseListener), t.removeEventListener("contextmenu", o.CloseListener), t.remove();});}static CloseListener(t) {t.target.classList.contains("contextualJs") || (t.preventDefault(), o.Close());}static Close() {o.ToggleCatcher(!1), (0, r.kO)(".contextualMenu").forEach((t) => t.remove()), (0, r.kO)(".context-hover").forEach((t) => t.classList.remove("context-hover"));}}class a {element;constructor(t) {switch ((t = { enabled: !0, clickable: !0, ...t }).type) {case n.Separator:this.separator();break;case n.Header:t.className = "header " + (t.className ? t.className : "");case n.Label:t.checkable = !1, t.clickable = !1, t.icon = null, this.item(t);break;case n.Custom:this.customItem(t);break;case n.Radio:t.radioGroup = t.radioGroup || "default";case n.Check:t.checkable = !0, t.icon = "done", this.item(t);break;case n.Hint:this.hintItem(t);break;case n.Submenu:this.subMenu(t);break;case n.Normal:default:this.item(t);}t.onLayout && t.onLayout(this.element), t.className && t.className.split(" ").filter(Boolean).forEach((t) => this.element.classList.add(t));}item(t) {this.element = (0, r.tT)("li.contextualJs.contextualMenuItemOuter" + (t.checkable ? ".checkable" + (t.checked ? ".checked" : "") : "")), t.enabled || this.element.setAttribute("disabled", ""), t.radioGroup && this.element.setAttribute("data-group", t.radioGroup);const e = (0, r.tT)(".contextualJs.contextualMenuItem" + (t.clickable ? "" : ".static"), this.element);t.type !== n.Header && (t.icon ? (0, r.tT)(`span.icon-${t.icon}.contextualJs.contextualMenuItemIcon`, e) : (0, r.tT)(".contextualJs.contextualMenuItemIcon", e)), (0, r.tT)("span.contextualJs.contextualMenuItemTitle", e, t.label), (0, r.tT)("span.contextualJs.contextualMenuItemTip", e, t.shortcut || ""), t.enabled && this.element.addEventListener("click", (e) => {if (e.stopPropagation(), t.clickable) {let i = !1;t.checkable && (t.radioGroup ? (i = !0, this.element.classList.add("checked"), (0, r.kO)(`[data-group="${t.radioGroup}"]`, this.element.closest("ul")).forEach((t) => {t != this.element && t.classList.remove("checked");})) : (this.element.toggleClass("checked"), i = this.element.classList.contains("checked"))), t.onClick && t.onClick(e, t.key, i), t.closeMenuOnClick && (t.checkable ? setTimeout(() => o.Close(), 100) : o.Close());}}, !1);}subMenu(t) {this.element = (0, r.tT)("li.contextualJs.contextualMenuItemOuter"), t.enabled || this.element.setAttribute("disabled", "");const e = (0, r.tT)(".contextualJs.contextualMenuItem", this.element);t.icon ? (0, r.tT)(`span.icon-${t.icon}.contextualJs.contextualMenuItemIcon`, e) : (0, r.tT)(".contextualJs.contextualMenuItemIcon", e), (0, r.tT)("span.contextualJs.contextualMenuItemTitle", e, t.label), (0, r.tT)("span.contextualJs.contextualMenuItemChevron", e), (0, r.tT)("ul.contextualJs.contextualSubMenu", this.element);const i = (0, r.VR)(".contextualSubMenu", this.element);t.items?.forEach((t) => {const e = new a(t);i.appendChild(e.element);});}hintItem(t) {this.element = (0, r.tT)("li.contextualJs.contextualMenuItemHint", t.label);}customItem(t) {this.element = (0, r.tT)("li.contextualJs.contextualCustomEl", t.label), t.closeMenuOnClick || this.element.addEventListener("click", (t) => t.stopPropagation());}separator() {this.element = (0, r.tT)("li.contextualJs.contextualMenuSeparator", [(0, r.tT)("span")]);}}}, 6633: (t, e, i) => {"use strict";i.d(e, { rJ: () => s, tj: () => n });var n,r = i(3242);function s(t) {return t && (0, r.cK)(t, "dataBoundType") ? t.dataBoundType : n.Static;}i(2174), function (t) {t[t.Static = 0] = "Static", t[t.Category = 1] = "Category", t[t.Measure = 2] = "Measure";}(n || (n = {}));}, 6639: (t, e, i) => {"use strict";i.d(e, { VR: () => a, kO: () => l, tT: () => s });var n = i(3242);function r(t) {const e = ["style", "attr", "data", "list", "middleware", "events"];if (t) for (let i = 0; i < e.length; i++) if ((0, n.cK)(t, e[i])) return !0;return !1;}function s(t, e, i, s, a) {return function (t, e, i, r, s) {const a = function (t) {const e = t.trim().replace(/ /g, ".").split(/([.#])/),i = [];let n = "";for (let t = 1; t < e.length; t += 2) switch (e[t]) {case ".":i.push(e[t + 1]);break;case "#":n = e[t + 1];}return { tagName: (e[0] || "div").toLowerCase(), classNames: i, id: n };}(t),l = document.createElement(a.tagName);if (a.id && (l.id = a.id), a.classNames.length && l.classList.add(...a.classNames), s && (l.innerText = s), i) {if (i.style) for (const t of Object.keys(i.style)) if (t && t in l.style) {null == i.style[t] ? l.style.removeProperty(t) : l.style[t] = o(t, i.style[t]);}if (i.attr) for (const t of Object.keys(i.attr)) if (t) {const e = i.attr[t];null == e || !1 === e ? l.removeAttribute(t) : l.setAttribute(t, e.toString());}if (i.data) for (const t of Object.keys(i.data)) if (t) {null == i.data[t] ? delete l.dataset[t] : l.dataset[t] = (0, n.Kg)(i.data[t]) ? i.data[t] : JSON.stringify(i.data[t]);}if (i.list && "select" == a.tagName && i.list.forEach((t) => {const e = document.createElement("option");e.value = t.value.toString(), e.text = void 0 === t.text ? e.value : t.text, t.selected && (e.selected = !0), t.disabled && (e.disabled = !0), void 0 !== t.data && (e.dataset.data = t.data), t.hidden && (e.hidden = !0), l.appendChild(e);}), i.events) for (const t of Object.keys(i.events)) l.addEventListener(t, (e) => i.events[t](e, e.target));i.middleware && i.middleware(l);}return r && r.forEach((t) => {t && l.appendChild(t);}), e && e.appendChild(l), l;}(t, e instanceof HTMLElement ? e : void 0, r(e) ? e : r(i) ? i : void 0, Array.isArray(e) ? e : Array.isArray(i) ? i : Array.isArray(s) ? s : void 0, "string" == typeof e ? e : "string" == typeof i ? i : "string" == typeof s ? s : a);}function o(t, e) {return "number" == typeof e && 0 != e && ["fontSize", "width", "minWidth", "maxWidth", "height", "minHeight", "maxHeight", "margin", "marginTop", "marginRight", "marginBottom", "marginLeft", "padding", "paddingTop", "paddingRight", "paddingBottom", "paddingRight", "top", "right", "bottom", "left", "borderRadius", "borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"].indexOf(t) >= 0 ? `${e}px` : e.toString();}function a(t, e = document) {let i = e.querySelector(t);return i || (i = document.createElement("null"), i.isNull = !0), i;}function l(t, e = document) {return Array.from(e.querySelectorAll(t));}Node.prototype.addLiveEventListener = function (t, e, i) {this.addEventListener(t, (t) => {const n = t.target;if (n) {const r = n.closest(e);r && i && i(t, r);}});}, HTMLElement.prototype.toggleClass = function (t, e) {null == e && (e = !this.classList.contains(t)), e ? this.classList.add(t) : this.classList.remove(t);}, HTMLElement.prototype.toggleAttr = function (t, e, i = "") {null == e && (e = !this.hasAttribute(t)), e ? this.setAttribute(t, i) : this.removeAttribute(t);}, HTMLElement.prototype.isVisible = function () {return !("none" === window.getComputedStyle(this).display);}, HTMLElement.prototype.toggle = function (t) {this.toggleAttr("hidden", !t);};}, 6642: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.locales = void 0, e.locales = { "en-US": ["en-US", "default", { englishName: "English (United States)" }], "fr-FR": ["fr-FR", "default", { name: "fr-FR", englishName: "French (France)", nativeName: "franais (France)", language: "fr", numberFormat: { ",": "", ".": ",", percent: { ",": "", ".": "," }, currency: { pattern: ["-n $", "n $"], ",": "", ".": ",", symbol: "" } }, calendars: { standard: { firstDay: 1, days: { names: ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], namesAbbr: ["dim.", "lun.", "mar.", "mer.", "jeu.", "ven.", "sam."], namesShort: ["di", "lu", "ma", "me", "je", "ve", "sa"] }, months: { names: ["janvier", "fvrier", "mars", "avril", "mai", "juin", "juillet", "aot", "septembre", "octobre", "novembre", "dcembre", ""], namesAbbr: ["janv.", "fvr.", "mars", "avr.", "mai", "juin", "juil.", "aot", "sept.", "oct.", "nov.", "dc.", ""] }, AM: null, PM: null, eras: [{ name: "ap. J.-C.", start: null, offset: 0 }], patterns: { d: "dd/MM/yyyy", D: "dddd d MMMM yyyy", t: "HH:mm", T: "HH:mm:ss", f: "dddd d MMMM yyyy HH:mm", F: "dddd d MMMM yyyy HH:mm:ss", M: "d MMMM", Y: "MMMM yyyy" } } } }], "it-IT": ["it-IT", "default", { name: "it-IT", englishName: "Italian (Italy)", nativeName: "italiano (Italia)", language: "it", numberFormat: { ",": ".", ".": ",", percent: { pattern: ["-n%", "n%"], ",": ".", ".": "," }, currency: { pattern: ["-$ n", "$ n"], ",": ".", ".": ",", symbol: "" } }, calendars: { standard: { firstDay: 1, days: { names: ["domenica", "luned", "marted", "mercoled", "gioved", "venerd", "sabato"], namesAbbr: ["dom", "lun", "mar", "mer", "gio", "ven", "sab"], namesShort: ["do", "lu", "ma", "me", "gi", "ve", "sa"] }, months: { names: ["gennaio", "febbraio", "marzo", "aprile", "maggio", "giugno", "luglio", "agosto", "settembre", "ottobre", "novembre", "dicembre", ""], namesAbbr: ["gen", "feb", "mar", "apr", "mag", "giu", "lug", "ago", "set", "ott", "nov", "dic", ""] }, AM: null, PM: null, eras: [{ name: "d.C.", start: null, offset: 0 }], patterns: { d: "dd/MM/yyyy", D: "dddd d MMMM yyyy", t: "HH:mm", T: "HH:mm:ss", f: "dddd d MMMM yyyy HH:mm", F: "dddd d MMMM yyyy HH:mm:ss", M: "dd MMMM", Y: "MMMM yyyy" } } } }], "hi-IN": ["hi-IN", "default", { name: "hi-IN", englishName: "Hindi (India)", nativeName: " ()", language: "hi", numberFormat: { groupSizes: [3, 2], percent: { groupSizes: [3, 2] }, currency: { pattern: ["$ -n", "$ n"], groupSizes: [3, 2], symbol: "" } }, calendars: { standard: { "/": "-", firstDay: 1, days: { names: ["", "", "", "", "", "", ""], namesAbbr: [".", ".", ".", ".", ".", ".", "."], namesShort: ["", "", "", "", "", "", ""] }, months: { names: ["", "", "", "", "", "", "", "", "", "", "", "", ""], namesAbbr: ["", "", "", "", "", "", "", "", "", "", "", "", ""] }, AM: ["", "", ""], PM: ["", "", ""], patterns: { d: "dd-MM-yyyy", D: "dd MMMM yyyy", t: "HH:mm", T: "HH:mm:ss", f: "dd MMMM yyyy HH:mm", F: "dd MMMM yyyy HH:mm:ss", M: "dd MMMM" } } } }] };}, 6648: (t, e, i) => {"use strict";i.d(e, { K: () => s });var n = i(9021),r = i(1807);class s extends r.T0G {options;editControl;scale = 1;editMode = !1;controlDisabled = !1;controlPinned = !1;updateOptions;constructor(t) {super(), this.options = t, null == this.options.title && (this.options.title = "Color Rules & Templates"), this.options.icon || (this.options.icon = "theme");}hasPlugin(t) {return (0, r.cKq)(this.options.plugins, t);}get envSupported() {return thisVisual.host.hostCapabilities.allowModalDialog;}update(t, e, i) {this.envSupported && Object.keys(this.options.plugins).length && t && t.dataViews && t.dataViews[0] ? (this.editMode = 0 != t.viewMode, this.controlDisabled = (0, r.PLM)(t.dataViews[0].metadata.objects, "editor", "hide", !1), this.controlPinned = this.editMode && !this.controlDisabled && (0, r.PLM)(t.dataViews[0].metadata.objects, "editor", "pin", !1), this.updateOptions = { visualUpdateOptions: t, settings: e, diagnostics: i }, r.s54.UPDATE(t), this.scale = t.viewport.scale, this.toggleControl(this.editMode), 1 == t.editMode && (this.show(), thisVisual.host.switchFocusModeState(!1))) : this.toggleControl(!1);}toggleControl(t) {this.envSupported && this.editMode && !this.options.hideEditControl && (t && !this.controlDisabled || this.controlPinned) ? (this.editControl || (this.editControl = (0, r.tTh)(`.okviz-editor-btn.icon-${this.options.icon}.show-on-hover`, thisVisual.element, { attr: { title: this.options.title }, events: { click: (t) => {t.preventDefault(), this.show();} } })), this.editControl.toggleClass("pinned", this.controlPinned), this.editControl.style.transform = `scale(${1 / this.scale})`) : (this.editControl && this.editControl.remove(), this.editControl = null);}show() {if (!this.envSupported) return;this.trigger("open");const t = { locale: thisVisual.host.locale, colorPalette: thisVisual.host.colorPalette };thisVisual.host.openModalDialog(n.q.id, { title: "", actionButtons: [1, 2], size: n.q.size }, { activePlugin: this.options.activePlugin, pluginsOptions: this.options.plugins, updateOptions: this.updateOptions, sourceHost: t }).then((t) => {if (t) {const e = t.resultState;if (this.trigger("close", t.actionId), e.activePlugin && (this.options.activePlugin = e.activePlugin), 1 == t.actionId) {if (e.changedSettings) {const t = [],i = "editor";for (const n of Object.keys(e.changedSettings)) e.changedSettings[n].forEach((t) => {r.XI0.BATCH(t, i);}), t.push(n);this.trigger("beforeChange", { changedPlugins: t, batchId: i }), r.XI0.BATCH_SAVE(i, !1);}e.download && thisVisual.host.downloadService.exportVisualsContent(e.download.content, e.download.fileName, e.download.fileType, e.download.fileDescription);}}}).catch((t) => {3 == t.error && r.s54.SHOW({ id: "dialog-box-disabled-editor", icon: "alert", iconAlign: "top", title: "Dialogs are disabled", text: "It appears you have disabled dialogs in this session, so the editor cannot be displayed. Close and reopen the report to restore the previous behavior.", zIndex: 99999999 });});}}}, 6667: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(9754),r = i(8639);const s = class {constructor(t) {this.localizationManager = t;}populateFormattingSettingsModel(t, e) {var i, r;const s = new t(),o = null === (i = null == e ? void 0 : e.metadata) || void 0 === i ? void 0 : i.objects;return o && (null === (r = s.cards) || void 0 === r || r.forEach((t) => {var e;t instanceof n.St && (null === (e = t.topLevelSlice) || void 0 === e || e.setPropertiesValues(o, t.name));const i = t instanceof n.Tn ? [t] : t.groups;null == i || i.forEach((e) => {var i, n, r, s;null === (i = e.topLevelSlice) || void 0 === i || i.setPropertiesValues(o, t.name), null === (n = null == e ? void 0 : e.slices) || void 0 === n || n.forEach((e) => {null == e || e.setPropertiesValues(o, t.name);}), null === (s = null === (r = null == e ? void 0 : e.container) || void 0 === r ? void 0 : r.containerItems) || void 0 === s || s.forEach((e) => {var i, n;null === (i = null == e ? void 0 : e.slices) || void 0 === i || i.forEach((e) => {null == e || e.setPropertiesValues(o, t.name);}), null === (n = null == e ? void 0 : e.groups) || void 0 === n || n.forEach((e) => {var i, n;null === (i = null == e ? void 0 : e.topLevelSlice) || void 0 === i || i.setPropertiesValues(o, t.name), null === (n = null == e ? void 0 : e.slices) || void 0 === n || n.forEach((e) => {null == e || e.setPropertiesValues(o, t.name);});});});});})), s;}buildFormattingModel(t) {const e = { cards: [] };return t.cards.filter(({ visible: t = !0 }) => t).forEach((t) => {var i;const s = { displayName: (0, r.Ld)(t, "displayName", this.localizationManager), description: (0, r.Ld)(t, "description", this.localizationManager), disabled: t.disabled, disabledReason: (0, r.Ld)(t, "disabledReason", this.localizationManager), groups: [], uid: t.name + "-card", analyticsPane: t.analyticsPane },o = t.name;this.setTopLevelToggleSliceClone(t, s, o), null === (i = t.onPreProcess) || void 0 === i || i.call(t);const a = t instanceof n.Tn,l = a ? [t].filter(({ visible: t = !0 }) => t) : t.groups.filter(({ visible: t = !0 }) => t);null == l || l.forEach((t) => {const e = this.buildCardGroupInstances(t, s, a, o);s.groups.push(e);}), s.revertToDefaultDescriptors = this.getRevertToDefaultDescriptor(t), e.cards.push(s);}), e;}buildCardGroupInstances(t, e, i, n) {const s = t.name + "-group",o = { displayName: i ? void 0 : (0, r.Ld)(t, "displayName", this.localizationManager), description: i ? void 0 : (0, r.Ld)(t, "description", this.localizationManager), slices: [], uid: s, collapsible: t.collapsible, delaySaveSlices: t.delaySaveSlices, disabled: t.disabled, disabledReason: (0, r.Ld)(t, "disabledReason", this.localizationManager) },a = {};if (t.container) {const e = o.uid + "-container",i = this.buildContainerGroupInstance(t.container, e, n, a);o.displayName = "Apply settings to", o.sliceWithContainer = !1, o.collapsible = !1, o.container = i;}return t.slices && (this.setTopLevelToggleSliceClone(t, null == o.displayName ? e : o, n), this.buildFormattingSlices({ slices: t.slices, objectName: n, sliceNames: a, formattingSlices: o.slices })), o;}buildContainerGroupInstance(t, e, i, n) {const s = { displayName: (0, r.Ld)(t, "displayName", this.localizationManager), description: (0, r.Ld)(t, "description", this.localizationManager), containerItems: [], uid: e };return t.containerItems.filter(({ visible: t = !0 }) => t).forEach((t) => {if (!t) return;const o = t.displayNameKey ? t.displayNameKey : t.displayName,a = e + o,l = { displayName: (0, r.Ld)(t, "displayName", this.localizationManager), slices: [], groups: [], uid: a };t.slices && this.buildFormattingSlices({ slices: t.slices, objectName: i, sliceNames: n, formattingSlices: l.slices }), t.groups && t.groups.forEach((t) => {const e = { displayName: (0, r.Ld)(t, "displayName", this.localizationManager), description: (0, r.Ld)(t, "description", this.localizationManager), slices: [], uid: t.name + "-container-group", collapsible: t.collapsible, delaySaveSlices: t.delaySaveSlices, disabled: t.disabled, disabledReason: (0, r.Ld)(t, "disabledReason", this.localizationManager) };this.setTopLevelToggleSliceClone(t, e, i), this.buildFormattingSlices({ slices: t.slices, objectName: i, sliceNames: n, formattingSlices: e.slices }), l.groups.push(e);}), s.containerItems.push(l);}), s;}buildFormattingSlices({ slices: t, objectName: e, sliceNames: i, formattingSlices: n }) {null == t || t.filter(({ visible: t = !0 }) => t).forEach((t) => {const r = null == t ? void 0 : t.getFormattingSlice(e, this.localizationManager);r && (void 0 === i[t.name] ? i[t.name] = 0 : (i[t.name]++, r.uid = `${r.uid}-${i[t.name]}`), n.push(r));});}getRevertToDefaultDescriptor(t) {var e;const i = {},r = [];let s,o = [];t instanceof n.St && t.topLevelSlice && r.push(...(null === (e = t.topLevelSlice) || void 0 === e ? void 0 : e.getRevertToDefaultDescriptor(t.name)));const a = t instanceof n.Tn ? [t].filter(({ visible: t = !0 }) => t) : t.groups.filter(({ visible: t = !0 }) => t);return null == a || a.forEach((e) => {var n, a;s = this.getSlicesRevertToDefaultDescriptor(t.name, e.slices, i, e.topLevelSlice), null === (a = null === (n = e.container) || void 0 === n ? void 0 : n.containerItems) || void 0 === a || a.forEach((e) => {var n;o = o.concat(this.getSlicesRevertToDefaultDescriptor(t.name, e.slices, i)), null === (n = e.groups) || void 0 === n || n.forEach((e) => {o = o.concat(this.getSlicesRevertToDefaultDescriptor(t.name, e.slices, i));});}), r.push(...s.concat(o));}), r;}getSlicesRevertToDefaultDescriptor(t, e, i, n) {let r = [];return n && (i[n.name] = !0, r = r.concat(n.getRevertToDefaultDescriptor(t))), null == e || e.forEach((e) => {e && !i[e.name] && (i[e.name] = !0, r = r.concat(e.getRevertToDefaultDescriptor(t)));}), r;}setTopLevelToggleSliceClone(t, e, i) {if (t.topLevelSlice) {const n = t.topLevelSlice.getFormattingSlice(i, this.localizationManager);n.suppressDisplayName = !0, e.topLevelToggle = n;}}};}, 6675: (t, e, i) => {"use strict";const n = i(3627),r = i(2608),s = i(1154),o = i(280),a = i(3940),l = (t, e, i = !1) => {if (Array.isArray(t)) {const n = t.map((t) => l(t, e, i)),r = (t) => {for (const e of n) {const i = e(t);if (i) return i;}return !1;};return r;}const n = (r = t) && "object" == typeof r && !Array.isArray(r) && t.tokens && t.input;var r;if ("" === t || "string" != typeof t && !n) throw new TypeError("Expected pattern to be a non-empty string");const s = e || {},a = o.isWindows(e),c = n ? l.compileRe(t, e) : l.makeRe(t, e, !1, !0),h = c.state;delete c.state;let u = () => !1;if (s.ignore) {const t = { ...e, ignore: null, onMatch: null, onResult: null };u = l(s.ignore, t, i);}const d = (i, n = !1) => {const { isMatch: r, match: o, output: d } = l.test(i, c, e, { glob: t, posix: a }),p = { glob: t, state: h, regex: c, posix: a, input: i, output: d, match: o, isMatch: r };return "function" == typeof s.onResult && s.onResult(p), !1 === r ? (p.isMatch = !1, !!n && p) : u(i) ? ("function" == typeof s.onIgnore && s.onIgnore(p), p.isMatch = !1, !!n && p) : ("function" == typeof s.onMatch && s.onMatch(p), !n || p);};return i && (d.state = h), d;};l.test = (t, e, i, { glob: n, posix: r } = {}) => {if ("string" != typeof t) throw new TypeError("Expected input to be a string");if ("" === t) return { isMatch: !1, output: "" };const s = i || {},a = s.format || (r ? o.toPosixSlashes : null);let c = t === n,h = c && a ? a(t) : t;return !1 === c && (h = a ? a(t) : t, c = h === n), !1 !== c && !0 !== s.capture || (c = !0 === s.matchBase || !0 === s.basename ? l.matchBase(t, e, i, r) : e.exec(h)), { isMatch: Boolean(c), match: c, output: h };}, l.matchBase = (t, e, i, r = o.isWindows(i)) => (e instanceof RegExp ? e : l.makeRe(e, i)).test(n.basename(t)), l.isMatch = (t, e, i) => l(e, i)(t), l.parse = (t, e) => Array.isArray(t) ? t.map((t) => l.parse(t, e)) : s(t, { ...e, fastpaths: !1 }), l.scan = (t, e) => r(t, e), l.compileRe = (t, e, i = !1, n = !1) => {if (!0 === i) return t.output;const r = e || {},s = r.contains ? "" : "^",o = r.contains ? "" : "$";let a = `${s}(?:${t.output})${o}`;t && !0 === t.negated && (a = `^(?!${a}).*$`);const c = l.toRegex(a, e);return !0 === n && (c.state = t), c;}, l.makeRe = (t, e = {}, i = !1, n = !1) => {if (!t || "string" != typeof t) throw new TypeError("Expected a non-empty string");let r = { negated: !1, fastpaths: !0 };return !1 === e.fastpaths || "." !== t[0] && "*" !== t[0] || (r.output = s.fastpaths(t, e)), r.output || (r = s(t, e)), l.compileRe(r, e, i, n);}, l.toRegex = (t, e) => {try {const i = e || {};return new RegExp(t, i.flags || (i.nocase ? "i" : ""));} catch (t) {if (e && !0 === e.debug) throw t;return /$^/;}}, l.constants = a, t.exports = l;}, 6684: (t, e, i) => {"use strict";i.d(e, { g: () => s });var n = i(1807),r = i(7345);class s extends n.T0G {config;abortController;get files() {return this._files;}_files;constructor(t) {super(), this.config = t, this.abortController = new AbortController(), this.initDropArea(), this.config.button && this.initButton();}handleDragOver(t) {t.preventDefault(), this.config.container.querySelector(".sortable-chosen") || this.config.container.classList.add("drag-over");}handleDragLeave(t) {t.preventDefault(), this.config.container.classList.remove("drag-over");}handleDrop(t) {t.preventDefault(), this.config.container.classList.remove("drag-over");const e = t.dataTransfer?.files;e?.length && (this.saveFiles(Array.from(e)), this.trigger("file"));}handleBrowse() {s.browseFiles(this.config.accept, !!this.config.multiple).then((t) => {t?.length && (this.saveFiles(t), this.trigger("file"));});}initButton() {this.config.button && this.config.button.addEventListener("click", () => this.handleBrowse(), { signal: this.abortController.signal });}initDropArea() {if (!this.config.container || this.config.onlyButton) return;this.config.container.classList.add("file-dropzone");const t = { signal: this.abortController.signal };this.config.container.addEventListener("dragover", (t) => this.handleDragOver(t), t), this.config.container.addEventListener("dragleave", (t) => this.handleDragLeave(t), t), this.config.container.addEventListener("drop", (t) => this.handleDrop(t), t), this.config.containerClickable && this.config.container.addEventListener("click", () => this.handleBrowse(), t);}saveFiles(t) {if (this.removeFiles(), !t?.length) return;let e = 0;for (let i = 0; i < t.length; i++) {let n;if (this.config.accept.includes(t[i].type) || (n = (0, r.T)("INVALID_FILE_TYPE")), e += t[i].size, e > this.config.maxSize && (n = (0, r.T)("UPLOAD_SIZE_EXCEEDED")), n) throw this.trigger("error", n), n;}this._files = t;}removeFiles() {this._files = null;}destroy() {this.removeFiles(), this.abortController?.abort(), this.abortController = null, this.config.container = null, super.destroy();}static browseFiles(t = [], e = !1) {return new Promise((i, n) => {const r = document.createElement("input");r.type = "file", r.multiple = e, r.accept = t ? t.join(",") : "";const s = (t) => {const e = t.target?.files;i(e ? Array.from(e) : []), r.removeEventListener("change", s), r.remove();};r.addEventListener("change", s), r.click();});}}}, 6698: (t) => {"function" == typeof Object.create ? t.exports = function (t, e) {t.super_ = e, t.prototype = Object.create(e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } });} : t.exports = function (t, e) {t.super_ = e;var i = function () {};i.prototype = e.prototype, t.prototype = new i(), t.prototype.constructor = t;};}, 6715: (t, e, i) => {"use strict";function n(t) {t: for (var e, i = t.length, n = 1, r = -1; n < i; ++n) switch (t[n]) {case ".":r = e = n;break;case "0":0 === r && (r = n), e = n;break;default:if (!+t[n]) break t;r > 0 && (r = 0);}return r > 0 ? t.slice(0, r) + t.slice(e + 1) : t;}i.d(e, { A: () => n });}, 6721: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.FamilyInfo = void 0;var i = function () {function t(t) {this.families = t;}return Object.defineProperty(t.prototype, "family", { get: function () {return this.getFamily();}, enumerable: !1, configurable: !0 }), t.prototype.getFamily = function (t) {if (void 0 === t && (t = /^wf_/), !this.families) return null;if (t) for (var e = 0, i = this.families; e < i.length; e++) {var n = i[e];if (t.test(n)) return n;}return this.families[0];}, Object.defineProperty(t.prototype, "css", { get: function () {return this.getCSS();}, enumerable: !1, configurable: !0 }), t.prototype.getCSS = function () {return this.families ? this.families.map(function (t) {return t.indexOf(" ") > 0 ? "'" + t + "'" : t;}).join(", ") : null;}, t;}();e.FamilyInfo = i;}, 6732: (t, e, i) => {"use strict";function n(t) {return new Array(t.length);}i.d(e, { A: () => n });}, 6747: (t, e, i) => {"use strict";function n(t) {return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView;}i.d(e, { A: () => n });}, 6780: (t, e, i) => {"use strict";const n = i(8311);t.exports = (t, e, i) => (t = new n(t, i), e = new n(e, i), t.intersects(e, i));}, 6874: (t) => {"use strict";const e = Number.MAX_SAFE_INTEGER || 9007199254740991;t.exports = { MAX_LENGTH: 256, MAX_SAFE_COMPONENT_LENGTH: 16, MAX_SAFE_BUILD_LENGTH: 250, MAX_SAFE_INTEGER: e, RELEASE_TYPES: ["major", "premajor", "minor", "preminor", "patch", "prepatch", "prerelease"], SEMVER_SPEC_VERSION: "2.0.0", FLAG_INCLUDE_PRERELEASE: 1, FLAG_LOOSE: 2 };}, 6946: (t, e, i) => {"use strict";i.d(e, { Ay: () => a, lq: () => l, sG: () => c });const n = Math.sqrt(50),r = Math.sqrt(10),s = Math.sqrt(2);function o(t, e, i) {const a = (e - t) / Math.max(0, i),l = Math.floor(Math.log10(a)),c = a / Math.pow(10, l),h = c >= n ? 10 : c >= r ? 5 : c >= s ? 2 : 1;let u, d, p;return l < 0 ? (p = Math.pow(10, -l) / h, u = Math.round(t * p), d = Math.round(e * p), u / p < t && ++u, d / p > e && --d, p = -p) : (p = Math.pow(10, l) * h, u = Math.round(t / p), d = Math.round(e / p), u * p < t && ++u, d * p > e && --d), d < u && .5 <= i && i < 2 ? o(t, e, 2 * i) : [u, d, p];}function a(t, e, i) {if (!((i = +i) > 0)) return [];if ((t = +t) === (e = +e)) return [t];const n = e < t,[r, s, a] = n ? o(e, t, i) : o(t, e, i);if (!(s >= r)) return [];const l = s - r + 1,c = new Array(l);if (n) {if (a < 0) for (let t = 0; t < l; ++t) c[t] = (s - t) / -a;else for (let t = 0; t < l; ++t) c[t] = (s - t) * a;} else if (a < 0) for (let t = 0; t < l; ++t) c[t] = (r + t) / -a;else for (let t = 0; t < l; ++t) c[t] = (r + t) * a;return c;}function l(t, e, i) {return o(t = +t, e = +e, i = +i)[2];}function c(t, e, i) {i = +i;const n = (e = +e) < (t = +t),r = n ? l(e, t, i) : l(t, e, i);return (n ? -1 : 1) * (r < 0 ? 1 / -r : r);}}, 6950: (t, e, i) => {"use strict";i.d(e, { AS: () => u, Ec: () => c.Ec, FA: () => c.FA, Gy: () => l.Gy, LF: () => l.LF, Lw: () => c.Lw, P0: () => l.P0, Qo: () => l.Qo, RQ: () => c.RQ, RU: () => l.RU, RY: () => c.RY, S7: () => l.S7, UA: () => l.UA, Uf: () => l.Uf, XP: () => l.XP, _Z: () => c._Z, a3: () => l.a3, bk: () => c.bk, e2: () => l.e2, f9: () => h.f, fr: () => c.fr, hz: () => c.hz, iq: () => l.iq, m: () => l.m, nf: () => c.nf, o5: () => c.o5, oF: () => c.oF, uC: () => c.uC, z1: () => c.z1 });var n = i(246),r = i(3124),s = i.n(r),o = i(3622),a = i(1807),l = i(3515),c = i(4939),h = i(8447);class u extends o.Z {options;updateOptions;rules = [];columnsByRole = {};levels = {};activeRule;activeLevel = l.UA;colorScaleSlider;ruleListElement;ruleDataElement;ruleWarningElement;baseColor = l.Gy;get displayName() {return "Color Rules";}getLevelName(t) {return t == l.UA ? Object.keys(this.levels).length > 1 ? this.options.defaultLevelName || "Any Level" : "Color Scale" : (0, a.TF7)(t);}constructor(t, e) {super(t, e), this.options = t, this.updateOptions = e, new a.skP(thisVisual.host.colorPalette);const i = this.updateOptions.visualUpdateOptions && this.updateOptions.visualUpdateOptions.dataViews && this.updateOptions.visualUpdateOptions.dataViews[0];if (i && (this.columnsByRole = (0, a.JYz)(i.metadata.columns), this.levels = this.generateLevels(i)), t.baseColorProperty && e.settings) {const [i, n] = t.baseColorProperty.split(".");(0, a.cKq)(e.settings, i) && (0, a.cKq)(e.settings[i], n) && e.settings[i][n] && (0, a.cKq)(e.settings[i][n], "solid") && (this.baseColor = e.settings[i][n].solid.color);}this.rules = e.settings && (0, a.cKq)(e.settings, "internal") && (0, a.cKq)(e.settings.internal, "colorRules") && Array.isArray(e.settings.internal.colorRules) ? (0, c.z1)(e.settings.internal.colorRules) : [];}generateLevels(t) {if (this.options.levels) return this.options.levels;const e = { [l.UA]: {} };return t.matrix || t.categorical && t.categorical.values && (t.categorical.values.forEach((t) => {e[l.UA][t.source.queryName] = (0, a.PVN)(t);}), t.categorical.categories && t.categorical.categories.forEach((t) => {e[l.UA][t.source.queryName] = { min: 0, max: 0 };})), e;}updateColorScaleSlider(t, e) {const i = (0, a.VR4)(".colorScale-slider"),n = (0, c._Z)(t, this.columnsByRole);if (!0 === n) {i.toggle(!0);let o = { min: 0, center: 50, max: 100 },h = o.min,u = o.max,d = null;const p = t.colorScales.scalesByLevel[e],f = (0, c.RY)(t.colorScales.field, this.columnsByRole),g = this.levels[e];if ((0, a.cKq)(g, f.queryName)) {const e = (0, c.uC)(g[f.queryName], t);h = e.min, u = e.max, o = (0, c.fr)(p, t, e, g, this.columnsByRole), d = [{ to: (i) => this.colorScaleSliderTooltips(t, "min", i, e, f) }, { to: (i) => this.colorScaleSliderTooltips(t, "max", i, e, f) }];}this.colorScaleSlider ? this.colorScaleSlider.updateOptions({ start: [o.min, o.max], range: { min: h, max: u }, pips: { mode: r.PipsMode.Count, values: 2, density: 10, stepped: !0, format: this.colorScaleSliderPipsFormatter(h, f) }, tooltips: d }, !0) : (this.colorScaleSlider = s().create(i, { start: [o.min, o.max], connect: [!0, !0, !0], range: { min: h, max: u }, pips: { mode: r.PipsMode.Count, values: 2, density: 10, stepped: !0, format: this.colorScaleSliderPipsFormatter(h, f) }, animate: !1, tooltips: d }), this.colorScaleSlider.on("slide", (e, i, n) => this.slideColorScaleSlider(t, n)), this.colorScaleSlider.on("change", () => this.saveRules())), i.toggleAttr("disabled", !n), (0, a.kOW)(".noUi-origin", i).forEach((t, e) => {0 == e ? t.toggleAttr("disabled", p.min.mode == l.LF.FieldValue || p.min.mode == l.LF.Calc) : 1 == e && t.toggleAttr("disabled", p.max.mode == l.LF.FieldValue || p.max.mode == l.LF.Calc);}), this.updateColorScaleSliderBands(p, h, u);} else this.colorScaleSlider && (this.colorScaleSlider.destroy(), this.colorScaleSlider = null), i.toggle(!1);}slideColorScaleSlider(t, e) {const i = (0, c.RY)(t.colorScales.field, this.columnsByRole);if (i) {const n = this.levels[this.activeLevel],r = (0, c.uC)(n[i.queryName], t),s = t.colorScales.type == l.Qo.Logarithmic;let o = e[0];t.colorScales.scalesByLevel[this.activeLevel].min.mode == l.LF.Percentage ? o = (0, c.nf)(o, r.min, r.max, "perc", s, !0) : o != r.min && o != r.max && (o = Math.round(o));let h = e[1];t.colorScales.scalesByLevel[this.activeLevel].max.mode == l.LF.Percentage ? h = (0, c.nf)(h, r.min, r.max, "perc", s, !0) : h != r.min && h != r.max && (h = Math.round(h)), t.colorScales.scalesByLevel[this.activeLevel].min.value = o, null != o && ((0, a.VR4)(`#tab-content-colorScale-${this.activeLevel} .rule-colorScale-col-min .rule-field-conditions-value`).value = String(o)), t.colorScales.scalesByLevel[this.activeLevel].max.value = h, null !== h && ((0, a.VR4)(`#tab-content-colorScale-${this.activeLevel} .rule-colorScale-col-max .rule-field-conditions-value`).value = String(h)), this.updateColorScaleSliderBands(t.colorScales.scalesByLevel[this.activeLevel], r.min, r.max);}}colorScaleSliderTooltips(t, e, i, n, r) {const s = (0, c.nf)(i, n.min, n.max, "perc", t.colorScales.type == l.Qo.Logarithmic),o = t.colorScales.scalesByLevel[this.activeLevel][e].mode == l.LF.Percentage,a = null !== s && r.aggregates;return `\n            <span class="abs ${o ? "inactive" : ""}">\n                ${this.colorScaleSliderPipsFormatter(n.min, r).to(i)}\n            </span>\n            ${a ? `<br>\n            <span class="perc ${o ? "" : "inactive"}">\n                ${s}%\n            </span>` : ""}\n        `;}colorScaleSliderPipsFormatter(t, e) {return { to: (i) => a.ZA6.instance.create({ format: e.format, formatSingleValues: !1, value: t, precision: 0, displayUnitSystemType: 0, allowFormatBeautification: !0 }).format(i) };}updateColorScaleSliderBands(t, e, i) {(0, a.kOW)(".colorScale-slider .noUi-connect").forEach((n, r) => {0 == r ? n.style.background = t.bottomColor ? t.bottomColor : "none" : 1 == r ? n.style.background = (0, c.o5)(t, e, i) : 2 == r && (n.style.background = t.topColor ? t.topColor : "none");});}updateColorScaleRelativeDomain(t) {if ("colorScale" == t.mode && t.colorScales.field) {const e = (0, a.VR4)(".relative-scale-switch input[type=checkbox]"),i = (0, c.RY)(t.colorScales.field, this.columnsByRole);i ? i.aggregates ? e.disabled = !1 : (e.checked = !1, e.disabled = !0, t.colorScales.relative = !1, this.saveRules()) : e.disabled = !0;}}draw(t) {super.draw(t), this.drawRules(t), n.Ay.create(this.ruleListElement, { draggable: "li", handle: ".rule-drag", filter: ".unsortable", direction: "vertical", onEnd: (t) => {this.rules.splice(t.newIndex, 0, this.rules.splice(t.oldIndex, 1)[0]), this.saveRules();} }), this.listen(), this.rules.length && this.selectRule(this.rules[this.rules.length - 1]);}listen() {document.addLiveEventListener("click", ".rules-list li", (t, e) => {const i = this.rules.find((t) => t.id == e.dataset.rule);i && this.selectRule(i);}), document.addLiveEventListener("change", ".rule-data input, .rule-data select", (t, e) => {e.classList.contains("ignore-change") || this.changeInput([e]);}), a.skP.instance.on("change", (t) => this.changeColor(t)), document.addLiveEventListener("change", ".rule-field-title", (t, e) => {(0, a.VR4)(`.rules-list li[data-rule="${this.activeRule.id}"] .rule-title`).innerText = e.value;}), document.addLiveEventListener("change", ".rule-field-property", (t, e) => {(0, a.VR4)(`.rules-list li[data-rule="${this.activeRule.id}"] .rule-property`).innerText = e.options[e.selectedIndex].text;}), document.addLiveEventListener("change", ".rule-field-mode", (t, e) => {(0, a.kOW)(".rule-mode").forEach((t) => t.toggle(!1)), (0, a.VR4)(`.rule-mode-${e.value}`).toggle(!0);}), document.addLiveEventListener("change", ".rule-field-enable input", (t, e) => {this.activeRule.enabled = e.checked, this.saveRules();}), document.addLiveEventListener("click", ".rule-delete", (t, e) => {if (t.preventDefault(), e.getAttribute("disabled")) return;const i = e.closest("li").dataset.rule;this.deleteRule(i);}), document.addLiveEventListener("click", ".rule-add", (t) => {t.preventDefault(), this.addRule();}), document.addLiveEventListener("change", ".rule-field-colorScale-blank", (t, e) => {(0, a.VR4)(".blank-color").toggle("color" == e.value);}), document.addLiveEventListener("change", ".rule-mode-colorScale input, .rule-mode-colorScale select", () => {this.updateColorScaleSlider(this.activeRule, this.activeLevel);}), document.addLiveEventListener("change", ".rule-field-colorScale-field", () => {this.updateColorScaleRelativeDomain(this.activeRule);}), document.addLiveEventListener("click", ".levels-tabs .tab", (t, e) => {t.preventDefault(), this.changeLevel(e);}), document.addLiveEventListener("change", ".advanced-switch input", (t, e) => {const i = e.checked;(0, a.kOW)(".levels-tabs .tab").forEach((t, e) => {t.toggle(0 == e ? !i : i), (0 == e && !i || 1 == e && i) && this.changeLevel(t);});}), document.addLiveEventListener("click", ".rule-conditions-add", (t) => {t.preventDefault(), this.addCondition();}), document.addLiveEventListener("click", ".rule-condition-delete", (t, e) => {t.preventDefault(), this.deleteCondition(e);}), document.addLiveEventListener("change", ".rule-conditions-field-operator", (t, e) => {(0, a.kOW)(".rule-conditions-field-operator").forEach((t) => t.value = e.value);}), document.addLiveEventListener("change", ".rule-field-conditions-mode", (t, e) => this.changeConditionMode(e)), document.addLiveEventListener("change", ".rule-field-conditions-comparison", (t, e) => this.changeConditionComparison(e)), document.addLiveEventListener("change", ".rule-field-conditions-field", (t, e) => this.changeConditionField(e, t));}async changeConditionField(t, e) {e.preventDefault(), e.stopPropagation();const i = t.closest("li").querySelector(".rule-field-conditions-comparison");this.updateRuleConditionComparisonOptions(i), this.changeConditionComparison(i), this.changeInput([t]);}changeColor(t) {this.updateRuleProperty(this.activeRule, t.id, t.color), this.updateRuleStatus(this.activeRule), this.saveRules(), this.updateColorScaleSlider(this.activeRule, this.activeLevel);}addCondition() {const t = (0, l.P0)(this.activeRule);this.activeRule.conditions.conditions[t.id] = t, this.drawRuleCondition(this.activeRule, t, (0, a.VR4)(".rule-mode-conditions ul")), this.updateRuleStatus(this.activeRule), this.saveRules();}deleteCondition(t) {const e = t.closest("li").dataset.condition;(0, a.VR4)(`.rule-mode-conditions li[data-condition="${e}"]`).remove(), delete this.activeRule.conditions.conditions[e], this.updateRuleStatus(this.activeRule), this.saveRules();}changeConditionMode(t) {const e = Number(t.value),i = e == l.LF.Value || e == l.LF.Percentage ? "value" : e == l.LF.FieldValue ? "fieldValue" : e == l.LF.Calc ? "calc" : "",n = t.closest("li");(0, a.kOW)(".rule-field-conditions-fieldValue, .rule-field-conditions-value, .rule-field-conditions-calc", n).forEach((t) => t.toggle(e == l.LF.Calc)), (0, a.VR4)(`.rule-field-conditions-${i}`, n).toggle(!0);const r = (0, c.RY)(this.activeRule.colorScales.field, this.columnsByRole),s = r ? (0, c.uC)(this.levels[this.activeLevel][r.queryName], this.activeRule) : null,o = s ? s.min : null,h = s ? s.max : null,u = this.activeRule.colorScales.type == l.Qo.Logarithmic,d = (0, a.VR4)(".rule-field-conditions-value", n),p = d.value,f = Number(t.dataset.prev),g = "" != p && s && f != l.LF.FieldValue && f != l.LF.Calc;e == l.LF.Value ? (d.setAttribute("min", String(o)), d.setAttribute("max", String(h)), d.value = g ? String((0, c.nf)(Number(p), o, h, "abs", u)) : "") : e == l.LF.Percentage ? (d.setAttribute("min", "0"), d.setAttribute("max", "100"), d.value = g ? String((0, c.nf)(Number(p), o, h, "perc", u)) : "") : (d.removeAttribute("min"), d.removeAttribute("max"), d.value = "0"), t.dataset.prev = String(e), this.changeInput([t, d]);}changeConditionComparison(t) {const e = Number(t.value),i = t.closest("li"),n = this.activeRule.conditions.conditions[i.dataset.condition];if (n.mode == l.LF.Text) (0, a.kOW)(".rule-conditions-col-value, .rule-conditions-col-value2, .rule-conditions-col-between, .rule-field-conditions-fieldValue, .rule-field-conditions-calc, .rule-conditions-col-mode", i).forEach((t) => t.toggle(!1)), (0, a.VR4)(".rule-conditions-col-text", i).toggle(!(e == l.Uf.Blank || e == l.Uf.NotBlank || e == l.Uf.IsEmpty || e == l.Uf.IsNotEmpty));else if ((0, a.VR4)(".rule-conditions-col-text", i).toggle(!1), (0, a.VR4)(".rule-field-conditions-value", i).toggle(!0), (0, a.kOW)(".rule-conditions-col-value, .rule-field-conditions-value, .rule-conditions-col-mode", i).forEach((t) => t.toggle(!(e == l.Uf.Blank || e == l.Uf.NotBlank))), n.mode == l.LF.FieldValue && (0, a.kOW)(".rule-field-conditions-value", i).forEach((t) => t.toggle(!1)), (0, a.kOW)(".rule-field-conditions-calc", i).forEach((t) => t.toggle(n.mode == l.LF.Calc)), (0, a.kOW)(".rule-conditions-col-value2, .rule-conditions-col-between", i).forEach((t) => t.toggle(e == l.Uf.Between)), e == l.Uf.Between) {n.mode = l.LF.Value;const t = (0, a.VR4)(".rule-field-conditions-mode", i);t.value = String(l.LF.Value), this.changeInput([t]), (0, a.kOW)(".rule-field-conditions-fieldValue, .rule-field-conditions-calc, .rule-conditions-col-mode", i).forEach((t) => t.toggle(!1)), (0, a.VR4)(".rule-field-conditions-value", i).toggle(!0);}}changeInput(t) {let e = !1;t.forEach((t) => {if (!t.hasAttribute("name")) return;const i = t.getAttribute("name"),n = t.getAttribute("type"),r = "checkbox" == n ? t.checked : "number" == n ? null !== t.value && "" !== t.value ? parseFloat(t.value) : null : t.value;this.updateRuleProperty(this.activeRule, i, r), e = !0;}), e && (this.updateRuleStatus(this.activeRule), "colorScale" == this.activeRule.mode && this.updateColorScaleSlider(this.activeRule, this.activeLevel), this.saveRules());}changeLevel(t) {t.classList.contains("active") || ((0, a.kOW)(".levels-tabs .tab.active").forEach((t) => t.classList.remove("active")), (0, a.kOW)(".levels-tabs-content .tab-content-colorScale").forEach((t) => t.toggle(!1)), t.classList.add("active"), (0, a.VR4)(t.dataset.content).toggle(!0), this.activeLevel = t.dataset.value, this.updateColorScaleSlider(this.activeRule, this.activeLevel), this.updateRuleStatus(this.activeRule));}updateRuleProperty(t, e, i) {let n = t;const r = e.split(".");for (let t = 0; t < r.length - 1; t++) null == n[r[t]] && (n[r[t]] = {}), n = n[r[t]];const s = r.length - 1;if (r[s].indexOf("|") >= 0) {const t = r[s].split("|"),e = String(i).split("|");for (let i = 0; i < t.length; i++) n[t[i]] = (0, a.cKq)(e, i) ? isNaN(Number(e[i])) ? e[i] : parseFloat(e[i]) : "";} else n[r[s]] = i;}selectRule(t) {(0, a.kOW)("li.active", this.ruleListElement).forEach((t) => t.classList.remove("active")), (0, a.VR4)(`li[data-rule="${t.id}"]`, this.ruleListElement).classList.add("active"), this.activeRule = t;const e = Object.keys(this.levels);this.activeLevel = e[t.colorScales.advanced && e.length > 1 ? 1 : 0], this.drawRuleData(t), this.toggleRuleWarning((0, c.Lw)(t, this.columnsByRole));}drawRules(t) {const e = (0, a.tTh)(".dialog-flex.color-rules-manager", t, [(0, a.tTh)(".dialog-col.rules-list", [(0, a.tTh)("ul"), (0, a.tTh)("button.rule-add.btn.icon.icon-add", "Add Rule")]), (0, a.tTh)(".dialog-col.rule-data")]);this.ruleListElement = (0, a.VR4)(".rules-list ul", e), this.ruleDataElement = (0, a.VR4)(".rule-data", e), this.rules.forEach((t) => this.drawRule(t)), this.drawRuleDataPlaceholder();}drawRule(t) {const e = this.options.properties[t.property] || "[Invalid]";(0, a.tTh)("li", this.ruleListElement, { data: { rule: t.id }, attr: { disabled: !t.enabled } }, [(0, a.tTh)(".rule-drag.icon.icon-sort", { attr: { title: "Re-order", disabled: t.locked && (t.locked.resort || t.locked.inclusive && !1 !== t.locked.resort) } }), (0, a.tTh)(".rule-color"), (0, a.tTh)("div", [(0, a.tTh)(".rule-title", (0, c.oF)(t, this.columnsByRole)), (0, a.tTh)(".rule-property", e)]), (0, a.tTh)(".rule-enabler", [(0, a.HGh)(".rule-field-enable.small", null, { checked: t.enabled, disabled: t.locked && (t.locked.enabled || t.locked.inclusive && !1 !== t.locked.enabled) }), (0, a.tTh)(".rule-invalid.icon.icon-alert", { attr: { title: "This rule contains errors", hidden: !0 } })]), (0, a.tTh)("a.control.rule-delete.icon.icon-close", { attr: { title: "Delete Rule", hidden: t.locked && (t.locked.delete || t.locked.inclusive && !1 !== t.locked.delete) } }), (0, a.tTh)(".rule-lock.icon.icon-lock", { attr: { title: "This rule is locked.", hidden: !(t.locked && (t.locked.delete || t.locked.inclusive && !1 !== t.locked.delete)) } })]), this.updateRuleStatus(t);}drawRuleData(t) {this.emptyRuleData();const e = (0, a.tTh)(".rule-options", this.ruleDataElement, [(0, a.tTh)(".dialog-field.dialog-flex", [(0, a.tTh)(".dialog-col", [(0, a.tTh)("label", "Rule Type"), (0, a.tTh)("select.rule-field-mode", { attr: { name: "mode", disabled: t.locked && (t.locked.mode || t.locked.inclusive && !1 !== t.locked.mode) }, list: [{ value: "colorScale", text: "Color Scale", selected: "colorScale" == t.mode }, { value: "conditions", text: "Conditions", selected: "conditions" == t.mode }] })]), (0, a.tTh)(".dialog-col.rule-col-title", [(0, a.tTh)("label", "Rule Name"), (0, a.tTh)("input.rule-field-title", { attr: { type: "text", name: "displayName", maxlength: 50, value: (0, c.oF)(t, this.columnsByRole), disabled: t.locked && (t.locked.displayName || t.locked.inclusive && !1 !== t.locked.displayName) } })]), (0, a.tTh)(".dialog-col", [(0, a.tTh)("label", "Apply to"), (0, a.tTh)("select.rule-field-property", { attr: { name: "property", required: !0, disabled: t.locked && (t.locked.property || t.locked.inclusive && !1 !== t.locked.property) }, list: Object.keys(this.options.properties).map((e) => ({ value: e, text: this.options.properties[e], selected: t.property == e })) })])]), (0, a.tTh)(".dialog-flex", [(0, a.tTh)(".dialog-col", { attr: { hidden: !this.options.hasLegend } }, [(0, a.HGh)(".rule-field-legend.small", null, { name: "legend", checked: t.legend, disabled: t.locked && (t.locked.legend || t.locked.inclusive && !1 !== t.locked.legend) }, "Show in Legend")]), (0, a.tTh)(".rule-info.rule-locked", { attr: { hidden: !t.locked } }, [(0, a.tTh)(".icon.icon-lock"), (0, a.tTh)("div", "This rule is partially locked.")]), (0, a.tTh)("div", { attr: { hidden: !!t.locked } }, [(0, a.HGh)(".rule-field-stop.small", null, { name: "stop", checked: t.stop, disabled: t.locked && (t.locked.stop || t.locked.inclusive && !1 !== t.locked.stop) }, "Stop other Rules")])])]);this.drawRuleColorScale(t, e), this.drawRuleConditions(t, e), this.ruleWarningElement = (0, a.tTh)(".rule-info.rule-warning", e, { attr: { hidden: !0 } }, [(0, a.tTh)(".icon.icon-alert"), (0, a.tTh)(".message")]);}drawRuleColorScale(t, e) {const [i, n] = this.domRuleColorScaleTabs(t),r = Object.keys(this.levels);(0, a.tTh)(".rule-mode.rule-mode-colorScale", e, { attr: { hidden: "colorScale" != t.mode } }, [(0, a.tTh)(".dialog-field.dialog-flex", [(0, a.tTh)(".dialog-col", [(0, a.tTh)("label", "Field"), (0, a.tTh)("select.rule-field-colorScale-field", { attr: { name: "colorScales.field.role|roleIndex", required: !0, disabled: t.locked && (t.locked.colorScale && t.locked.colorScale.field || t.locked.inclusive && (!t.locked.colorScale || !1 !== t.locked.colorScale.field)) }, list: this.domColumnOptions(t.colorScales.field) })]), (0, a.tTh)(".dialog-col", [(0, a.tTh)("label", "Scale Type"), (0, a.tTh)("select.rule-field-colorScale-type", { attr: { name: "colorScales.type", type: "number", disabled: t.locked && (t.locked.colorScale && t.locked.colorScale.type || t.locked.inclusive && (!t.locked.colorScale || !1 !== t.locked.colorScale.type)) }, list: [{ value: l.Qo.Linear, text: "Linear", selected: t.colorScales.type == l.Qo.Linear }, { value: l.Qo.Logarithmic, text: "Logarithmic", selected: t.colorScales.type == l.Qo.Logarithmic }] })]), (0, a.tTh)(".dialog-col.rule-col-colorScale-blank", [(0, a.tTh)("label", "Blank Values"), (0, a.tTh)(".dialog-flex", [(0, a.tTh)("select.rule-field-colorScale-blank dialog-col", { attr: { name: "colorScales.blank", disabled: t.locked && (t.locked.colorScale && t.locked.colorScale.blank || t.locked.inclusive && (!t.locked.colorScale || !1 !== t.locked.colorScale.blank)) }, list: [{ value: "ignore", text: "Ignore", selected: "ignore" == t.colorScales.blank }, { value: "zero", text: "Treat as Zero", selected: "zero" == t.colorScales.blank }, { value: "color", text: "Set Color", selected: "color" == t.colorScales.blank }] }), (0, a.tTh)("span.blank-color.dialog-col", { attr: { hidden: "color" != t.colorScales.blank } }, [a.skP.DOM({ id: "colorScales.blankColor", disabled: t.locked && (t.locked.colorScale && t.locked.colorScale.blank || t.locked.inclusive && (!t.locked.colorScale || !1 !== t.locked.colorScale.blank)), color: t.colorScales.blankColor })])])])]), (0, a.tTh)(r.length < 2 ? "label" : ".tabs.levels-tabs", [(0, a.HGh)(".advanced-switch.small", null, { name: "colorScales.advanced", checked: t.colorScales.advanced, hidden: r.length < 2, disabled: t.locked && (t.locked.colorScale && t.locked.colorScale.advanced || t.locked.inclusive && (!t.locked.colorScale || !1 !== t.locked.colorScale.advanced)) }, "Multiple Scales"), (0, a.tTh)("div", i)]), (0, a.tTh)(".dialog-field.levels-tabs-content", n), (0, a.tTh)(".relative-scale-switch-container", { style: { display: this.options.hideRelativeDomain ? "none" : null } }, [(0, a.HGh)(".relative-scale-switch.small", null, { name: "colorScales.relative", checked: t.colorScales.relative, disabled: t.locked && (t.locked.colorScale && t.locked.colorScale.relative || t.locked.inclusive && (!t.locked.colorScale || !1 !== t.locked.colorScale.relative)), title: "Change how the start of the scale is calculated. When enabled, the first data point of the column is considered the starting point. Otherwise the scale starts from 0 if contains positive values only, or ends to 0 if contains negative values only. It cannot be used with measures." }, "Relative Domain")]), (0, a.tTh)(".colorScale-preview-container.dialog-flex", [(0, a.tTh)(".colorScale-slider"), (0, a.tTh)(".colorScale-slider-warning.icon.icon-alert", { attr: { hidden: !0 } })])]), this.colorScaleSlider && (this.colorScaleSlider.destroy(), this.colorScaleSlider = null), this.updateColorScaleRelativeDomain(t), this.updateColorScaleSlider(t, this.activeLevel);}domRuleColorScaleTabs(t) {const e = [],i = [];return Object.keys(this.levels).forEach((n, r) => {const s = this.activeLevel == n;(0, c.hz)(t, n, this.baseColor), e.push((0, a.tTh)(".tab" + (s ? ".active" : ""), { attr: { hidden: t.colorScales.advanced && 0 == r || !t.colorScales.advanced && r > 0 }, data: { content: `#tab-content-colorScale-${n}`, value: n } }, this.getLevelName(n))), i.push((0, a.tTh)(`ul#tab-content-colorScale-${n}.tab-content-colorScale`, { attr: { hidden: !s } }, [this.domColorScaleCondition(t, n, "min"), this.domColorScaleCondition(t, n, "center"), this.domColorScaleCondition(t, n, "max")]));}), [e, i];}domColumnOptions(t, e = !1) {const i = [{ value: "", text: "(Choose a field)" }],n = t && t.roleIndex ? t.roleIndex : 0;return this.options.roles.forEach((r) => {if ((0, a.cKq)(this.columnsByRole, r)) for (let s = 0; s < this.columnsByRole[r].length; s++) {const o = this.columnsByRole[r][s];if (o) {if (!e && o.type?.text) continue;const a = t && t.role == r && n == s;i.push({ value: `${r}|${s}`, text: o.displayName, selected: a });}}}), i;}domColorScaleCondition(t, e, i) {const n = t.colorScales.scalesByLevel[e],r = t.locked && (t.locked.colorScale && t.locked.colorScale[i] && t.locked.colorScale[i].color || t.locked.inclusive && (!t.locked.colorScale || !t.locked.colorScale[i] || !1 !== t.locked.colorScale[i].color)),s = t.locked && (t.locked.colorScale && t.locked.colorScale[i] && t.locked.colorScale[i].mode || t.locked.inclusive && (!t.locked.colorScale || !t.locked.colorScale[i] || !1 === t.locked.colorScale[i].mode));return (0, a.tTh)(`li.dialog-flex.dialog-row.rule-colorScale-col-${i}`, { data: { type: i } }, [(0, a.tTh)(".dialog-col-label", "min" == i ? "Minimum" : "max" == i ? "Maximum" : "Center"), a.skP.DOM({ id: `colorScales.scalesByLevel.${e}.${i}.color`, color: (0, c.Ec)(i, n), disabled: r, customColors: [thisVisual.host.colorPalette.positive.value, (0, a.dyA)(.45, thisVisual.host.colorPalette.positive.value)] }), (0, a.tTh)(".dialog-col.rule-conditions-col-mode", [(0, a.tTh)("select.rule-field-conditions-mode.ignore-change", { attr: { name: `colorScales.scalesByLevel.${e}.${i}.mode`, type: "number", disabled: s }, list: [{ value: l.LF.Percentage, text: "Percentage", selected: n[i].mode == l.LF.Percentage }, { value: l.LF.Value, text: "Value", selected: n[i].mode == l.LF.Value }, { value: l.LF.FieldValue, text: "Field", selected: n[i].mode == l.LF.FieldValue }, { value: l.LF.Calc, text: "Calculation", selected: n[i].mode == l.LF.Calc }] })]), (0, a.tTh)(".dialog-col.dialog-flex.rule-conditions-col-value", [(0, a.tTh)("select.rule-field-conditions-fieldValue", { attr: { name: `colorScales.scalesByLevel.${e}.${i}.fieldValue.role|roleIndex`, required: !0, hidden: n[i].mode != l.LF.FieldValue && n[i].mode != l.LF.Calc, disabled: s }, list: this.domColumnOptions(n[i].fieldValue) }), (0, a.tTh)("select.rule-field-conditions-calc.math", { attr: { name: `colorScales.scalesByLevel.${e}.${i}.calc`, type: "number", disabled: s, hidden: n[i].mode != l.LF.Calc }, list: [{ value: l.m.Plus, text: "+", selected: n[i].calc == l.m.Plus }, { value: l.m.Minus, text: "", selected: n[i].calc == l.m.Minus }, { value: l.m.Divide, text: "", selected: n[i].calc == l.m.Divide }, { value: l.m.Times, text: "", selected: n[i].calc == l.m.Times }] }), (0, a.tTh)("input.rule-field-conditions-value", { attr: { name: `colorScales.scalesByLevel.${e}.${i}.value`, type: "number", placeholder: "Auto", hidden: n[i].mode != l.LF.Value && n[i].mode != l.LF.Percentage && n[i].mode != l.LF.Calc, value: null !== n[i].value ? n[i].value : "", step: 1, disabled: s, min: n[i].mode == l.LF.Percentage ? 0 : null, max: n[i].mode == l.LF.Percentage ? 100 : null } })]), (0, a.tTh)(".dialog-col.dialog-flex.rule-colorScale-col-topBottom", [(0, a.tTh)(".dialog-col-label", "min" == i ? "Below" : "max" == i ? "Above" : ""), (0, a.tTh)(".dialog-col", "center" == i ? [] : [a.skP.DOM({ id: "min" == i ? `colorScales.scalesByLevel.${e}.bottomColor` : `colorScales.scalesByLevel.${e}.topColor`, color: "min" == i ? n.bottomColor : n.topColor, customColors: [thisVisual.host.colorPalette.positive.value, (0, a.dyA)(.45, thisVisual.host.colorPalette.positive.value)] })])])]);}drawRuleConditions(t, e) {if (!t.conditions) return;const i = (0, a.tTh)("ul");for (const e of Object.keys(t.conditions.conditions)) this.drawRuleCondition(t, t.conditions.conditions[e], i);(0, a.tTh)(".rule-mode.rule-mode-conditions", e, { attr: { hidden: "conditions" != t.mode } }, [(0, a.tTh)("label", "Conditions"), (0, a.tTh)(".dialog-field.dialog-flex", [(0, a.tTh)(".dialog-col.rule-conditions-color", [a.skP.DOM({ id: "conditions.color", color: t.conditions.color, nullable: !1, customColors: [thisVisual.host.colorPalette.positive.value, thisVisual.host.colorPalette.negative.value] })]), (0, a.tTh)(".dialog-col", [i, (0, a.tTh)("button.rule-conditions-add.btn.icon.icon-add", { attr: { hidden: t.locked && (t.locked.conditions.add || t.locked.inclusive && (!t.locked.conditions || !1 !== t.locked.conditions.add)) } }, "Add Condition")])])]);}drawRuleCondition(t, e, i) {const n = t.locked && (t.locked.conditions.edit || t.locked.inclusive && (!t.locked.conditions || !1 !== t.locked.conditions.edit));(0, a.tTh)("li", i, { data: { condition: e.id } }, [...(0 != e.id ? [this.domRuleConditionOperator(t, e, n)] : []), ...(0 == e.id && Object.keys(this.levels).length > 1 ? [this.domRuleConditionLevel(t, e, n)] : []), this.domRuleConditionComparison(t, e, n), this.domRuleConditionCalcs(t, e, n)]);}domRuleConditionOperator(t, e, i) {return (0, a.tTh)(".dialog-field.dialog-flex", [(0, a.tTh)("select.rule-conditions-field-operator", { attr: { name: "conditions.operator", disabled: i }, list: [{ value: "or", text: "Or", selected: t.conditions.operator == l.XP.Or }, { value: "and", text: "And", selected: t.conditions.operator == l.XP.And }] }), (0, a.tTh)("a.control.rule-condition-delete.icon.icon-close", { attr: { href: "#", hidden: t.locked && (t.locked.conditions.delete || t.locked.inclusive && (!t.locked.conditions || !1 !== t.locked.conditions.delete)), title: "Delete condition" } })]);}domRuleConditionLevel(t, e, i) {return (0, a.tTh)(".dialog-flex.rule-conditions-col-level", [(0, a.tTh)("select.rule-field-conditions-field", { attr: { name: "conditions.level", disabled: i }, list: Object.keys(this.levels).map((e) => ({ value: e, text: this.getLevelName(e), selected: t.conditions.level == e })) })]);}domRuleConditionComparison(t, e, i) {let n;const r = (0, a.tTh)(".dialog-flex", [(0, a.tTh)(".dialog-col.rule-conditions-col-if", 0 == e.id ? "If" : ""), (0, a.tTh)(".dialog-col.rule-conditions-col-field", [(0, a.tTh)("select.rule-field-conditions-field", { attr: { name: `conditions.conditions.${e.id}.field.role|roleIndex`, required: !0, disabled: i }, list: this.domColumnOptions(e.field, !0) })]), (0, a.tTh)(".dialog-col.rule-conditions-col-comparison", [(0, a.tTh)("select.rule-field-conditions-comparison", { middleware: (t) => n = t, attr: { name: `conditions.conditions.${e.id}.comparison`, type: "number", disabled: i } })])]);return this.updateRuleConditionComparisonOptions(n, e.id), r;}updateRuleConditionComparisonOptions(t, e) {if (t.options.length = 0, null == e && (e = Number(t.closest("li")?.dataset.condition)), null == e) return;const i = this.activeRule.conditions.conditions[e],n = [];if (!(0, a.cKq)(this.columnsByRole, i.field?.role)) return;const r = this.columnsByRole[i.field?.role][i.field?.roleIndex ?? 0];r && r.type.text ? (i.mode = l.LF.Text, i.comparison == l.Uf.Blank || i.comparison == l.Uf.NotBlank || l.iq.has(i.comparison) || (i.comparison = l.Uf.Is), n.push({ value: l.Uf.Contains, text: "Contains", selected: i.comparison == l.Uf.Contains }, { value: l.Uf.NotContains, text: "Does Not Contain", selected: i.comparison == l.Uf.NotContains }, { value: l.Uf.StartsWith, text: "Starts With", selected: i.comparison == l.Uf.StartsWith }, { value: l.Uf.NotStartsWith, text: "Does Not Start With", selected: i.comparison == l.Uf.NotStartsWith }, { value: l.Uf.Is, text: "Is", selected: i.comparison == l.Uf.Is }, { value: l.Uf.IsNot, text: "Is Not", selected: i.comparison == l.Uf.IsNot }, { value: l.Uf.IsEmpty, text: "Is Empty", selected: i.comparison == l.Uf.IsEmpty }, { value: l.Uf.IsNotEmpty, text: "Is Not Empty", selected: i.comparison == l.Uf.IsNotEmpty })) : (i.mode = i.mode == l.LF.Text ? l.LF.Value : i.mode, n.push({ value: l.Uf.LessThan, text: "Is Less than", selected: i.comparison == l.Uf.LessThan }, { value: l.Uf.LessThanOrEqualTo, text: "Is Less than or Equal to", selected: i.comparison == l.Uf.LessThanOrEqualTo }, { value: l.Uf.EqualTo, text: "Is Equal to", selected: i.comparison == l.Uf.EqualTo }, { value: l.Uf.DifferentFrom, text: "Is Different from", selected: i.comparison == l.Uf.DifferentFrom }, { value: l.Uf.GreaterThan, text: "Is Greater than", selected: i.comparison == l.Uf.GreaterThan }, { value: l.Uf.GreaterThanOrEqualTo, text: "Is Greater than or Equal to", selected: i.comparison == l.Uf.GreaterThanOrEqualTo }, { value: l.Uf.Between, text: "Is Between", selected: i.comparison == l.Uf.Between })), n.push({ value: l.Uf.Blank, text: "Is Blank", selected: i.comparison == l.Uf.Blank }, { value: l.Uf.NotBlank, text: "Is Not Blank", selected: i.comparison == l.Uf.NotBlank }), n.forEach((e) => {(0, a.tTh)("option", t, { attr: { value: e.value, selected: e.selected } }, e.text), e.selected && (t.value = e.value);});}domRuleConditionCalcs(t, e, i) {const n = !(!e.field?.role || null == e.field?.roleIndex) && this.columnsByRole[e?.field?.role]?.[e?.field?.roleIndex]?.type?.text;return (0, a.tTh)(".dialog-flex.dialog-field", [(0, a.tTh)(".dialog-col.rule-conditions-col-if"), (0, a.tTh)(".dialog-col.rule-conditions-col-mode", { attr: { hidden: n || e.comparison == l.Uf.Blank || e.comparison == l.Uf.NotBlank || e.comparison == l.Uf.Between } }, [(0, a.tTh)("select.rule-field-conditions-mode", { attr: { name: `conditions.conditions.${e.id}.mode`, type: "number", disabled: i }, list: [{ value: l.LF.Value, text: "Value", selected: e.mode == l.LF.Value }, { value: l.LF.FieldValue, text: "Field", selected: e.mode == l.LF.FieldValue && e.comparison != l.Uf.Between }, { value: l.LF.Calc, text: "Calculation", selected: e.mode == l.LF.Calc && e.comparison != l.Uf.Between }] })]), (0, a.tTh)(".dialog-col.dialog-flex.rule-conditions-col-value", { attr: { hidden: n || e.comparison == l.Uf.Blank || e.comparison == l.Uf.NotBlank } }, [(0, a.tTh)("select.rule-field-conditions-fieldValue", { attr: { name: `conditions.conditions.${e.id}.fieldValue.role|roleIndex`, required: !0, hidden: n || !((e.mode == l.LF.FieldValue || e.mode == l.LF.Calc) && e.comparison != l.Uf.Between), disabled: i }, list: this.domColumnOptions(e.fieldValue) }), (0, a.tTh)("select.rule-field-conditions-calc.math", { attr: { name: `conditions.conditions.${e.id}.calc`, type: "number", hidden: n || !(e.mode == l.LF.Calc && e.comparison != l.Uf.Between), disabled: i }, list: [{ value: l.m.Plus, text: "+", selected: e.calc == l.m.Plus }, { value: l.m.Minus, text: "-", selected: e.calc == l.m.Minus }, { value: l.m.Divide, text: "", selected: e.calc == l.m.Divide }, { value: l.m.Times, text: "", selected: e.calc == l.m.Times }] }), (0, a.tTh)("input.rule-field-conditions-value", { attr: { name: `conditions.conditions.${e.id}.value`, type: "number", hidden: n || !(e.mode == l.LF.Value || e.mode == l.LF.Calc || e.comparison == l.Uf.Between), required: !0, step: 1, value: `${null != e.value ? e.value : ""}`, disabled: i, placeholder: "Enter a value" } })]), (0, a.tTh)(".dialog-col.dialog-flex.rule-conditions-col-between", { attr: { hidden: n || e.comparison != l.Uf.Between } }, "And"), (0, a.tTh)(".dialog-col.rule-conditions-col-value2", { attr: { hidden: n || e.comparison != l.Uf.Between } }, [(0, a.tTh)("input.rule-field-conditions-value2", { attr: { name: `conditions.conditions.${e.id}.value2`, type: "number", placeholder: "Enter a value", step: 1, value: `${null != e.value2 ? e.value2 : ""}`, required: !0, disabled: i } })]), (0, a.tTh)(".dialog-col.rule-conditions-col-text", { attr: { hidden: !n || e.comparison == l.Uf.Blank || e.comparison == l.Uf.NotBlank } }, [(0, a.tTh)("input.rule-field-conditions-text", { attr: { name: `conditions.conditions.${e.id}.text`, type: "text", placeholder: "Enter a text", value: `${null != e.text ? e.text : ""}`, required: !0, disabled: i } })])]);}drawRuleDataPlaceholder() {this.emptyRuleData(), (0, a.tTh)(".dialog-placeholder", this.ruleDataElement, "Select a rule to modify");}emptyRuleData() {this.ruleWarningElement = null, this.ruleDataElement.innerText = "";}updateRuleStatus(t) {const e = (0, a.VR4)(`li[data-rule="${t.id}"]`, this.ruleListElement),i = (0, c.Lw)(t, this.columnsByRole);(0, a.VR4)(".rule-enabler .rule-invalid", e).toggle(!0 !== i), (0, a.VR4)(".rule-enabler .rule-field-enable", e).toggle(!0 === i);let n = "#fff";if ("colorScale" == t.mode) {let e = Object.keys(this.levels)[t.colorScales.advanced ? 1 : 0];e || (e = this.activeLevel), n = (0, c.o5)(t.colorScales.scalesByLevel[e]);} else "conditions" == t.mode && (n = t.conditions.color);(0, a.VR4)(".rule-color", e).style.background = n, this.toggleRuleWarning(i);}toggleRuleWarning(t) {this.ruleWarningElement && (this.ruleWarningElement.toggle(!0 !== t), !0 !== t && ((0, a.VR4)(".message", this.ruleWarningElement).innerText = String(t)));}saveRules() {this.pending.internal = [{ objectName: "internal", properties: { colorRules: this.rules }, selector: null }], this.save();}addRule() {const t = (0, l.e2)(this.rules.length, Object.keys(this.options.properties)[0], this.levels, this.baseColor);this.rules.push(t), this.drawRule(t), this.selectRule(t), this.saveRules();}deleteRule(t) {let e = !1;for (let i = 0; i < this.rules.length; i++) if (this.rules[i].id == t) {(!this.rules[i].locked || this.rules[i].locked.inclusive && !1 === this.rules[i].locked.delete || !this.rules[i].locked.inclusive && !1 !== this.rules[i].locked.delete) && ((0, a.VR4)(`li[data-rule="${t}"]`, this.ruleListElement).remove(), this.rules.splice(i, 1), e = !0);break;}e && (this.activeRule && this.activeRule.id == t && (this.rules.length ? this.selectRule(this.rules[this.rules.length - 1]) : this.drawRuleDataPlaceholder()), this.saveRules());}}}, 6953: (t, e, i) => {"use strict";const n = i(144);t.exports = (t, e) => {const i = n(t, e);return i ? i.version : null;};}, 6957: (t, e, i) => {"use strict";i.d(e, { Ay: () => w, Qh: () => E });var n = i(871);function r() {}var s = .7,o = 1 / s,a = "\\s*([+-]?\\d+)\\s*",l = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h = /^#([0-9a-f]{3,8})$/,u = new RegExp(`^rgb\\(${a},${a},${a}\\)$`),d = new RegExp(`^rgb\\(${c},${c},${c}\\)$`),p = new RegExp(`^rgba\\(${a},${a},${a},${l}\\)$`),f = new RegExp(`^rgba\\(${c},${c},${c},${l}\\)$`),g = new RegExp(`^hsl\\(${l},${c},${c}\\)$`),m = new RegExp(`^hsla\\(${l},${c},${c},${l}\\)$`),v = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 };function y() {return this.rgb().formatHex();}function b() {return this.rgb().formatRgb();}function w(t) {var e, i;return t = (t + "").trim().toLowerCase(), (e = h.exec(t)) ? (i = e[1].length, e = parseInt(e[1], 16), 6 === i ? x(e) : 3 === i ? new C(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, (15 & e) << 4 | 15 & e, 1) : 8 === i ? S(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (255 & e) / 255) : 4 === i ? S(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, ((15 & e) << 4 | 15 & e) / 255) : null) : (e = u.exec(t)) ? new C(e[1], e[2], e[3], 1) : (e = d.exec(t)) ? new C(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, 1) : (e = p.exec(t)) ? S(e[1], e[2], e[3], e[4]) : (e = f.exec(t)) ? S(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, e[4]) : (e = g.exec(t)) ? P(e[1], e[2] / 100, e[3] / 100, 1) : (e = m.exec(t)) ? P(e[1], e[2] / 100, e[3] / 100, e[4]) : v.hasOwnProperty(t) ? x(v[t]) : "transparent" === t ? new C(NaN, NaN, NaN, 0) : null;}function x(t) {return new C(t >> 16 & 255, t >> 8 & 255, 255 & t, 1);}function S(t, e, i, n) {return n <= 0 && (t = e = i = NaN), new C(t, e, i, n);}function E(t, e, i, n) {return 1 === arguments.length ? ((s = t) instanceof r || (s = w(s)), s ? new C((s = s.rgb()).r, s.g, s.b, s.opacity) : new C()) : new C(t, e, i, null == n ? 1 : n);var s;}function C(t, e, i, n) {this.r = +t, this.g = +e, this.b = +i, this.opacity = +n;}function k() {return `#${_(this.r)}${_(this.g)}${_(this.b)}`;}function T() {const t = A(this.opacity);return `${1 === t ? "rgb(" : "rgba("}${M(this.r)}, ${M(this.g)}, ${M(this.b)}${1 === t ? ")" : `, ${t})`}`;}function A(t) {return isNaN(t) ? 1 : Math.max(0, Math.min(1, t));}function M(t) {return Math.max(0, Math.min(255, Math.round(t) || 0));}function _(t) {return ((t = M(t)) < 16 ? "0" : "") + t.toString(16);}function P(t, e, i, n) {return n <= 0 ? t = e = i = NaN : i <= 0 || i >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new O(t, e, i, n);}function D(t) {if (t instanceof O) return new O(t.h, t.s, t.l, t.opacity);if (t instanceof r || (t = w(t)), !t) return new O();if (t instanceof O) return t;var e = (t = t.rgb()).r / 255,i = t.g / 255,n = t.b / 255,s = Math.min(e, i, n),o = Math.max(e, i, n),a = NaN,l = o - s,c = (o + s) / 2;return l ? (a = e === o ? (i - n) / l + 6 * (i < n) : i === o ? (n - e) / l + 2 : (e - i) / l + 4, l /= c < .5 ? o + s : 2 - o - s, a *= 60) : l = c > 0 && c < 1 ? 0 : a, new O(a, l, c, t.opacity);}function O(t, e, i, n) {this.h = +t, this.s = +e, this.l = +i, this.opacity = +n;}function I(t) {return (t = (t || 0) % 360) < 0 ? t + 360 : t;}function F(t) {return Math.max(0, Math.min(1, t || 0));}function R(t, e, i) {return 255 * (t < 60 ? e + (i - e) * t / 60 : t < 180 ? i : t < 240 ? e + (i - e) * (240 - t) / 60 : e);}(0, n.A)(r, w, { copy(t) {return Object.assign(new this.constructor(), this, t);}, displayable() {return this.rgb().displayable();}, hex: y, formatHex: y, formatHex8: function () {return this.rgb().formatHex8();}, formatHsl: function () {return D(this).formatHsl();}, formatRgb: b, toString: b }), (0, n.A)(C, E, (0, n.X)(r, { brighter(t) {return t = null == t ? o : Math.pow(o, t), new C(this.r * t, this.g * t, this.b * t, this.opacity);}, darker(t) {return t = null == t ? s : Math.pow(s, t), new C(this.r * t, this.g * t, this.b * t, this.opacity);}, rgb() {return this;}, clamp() {return new C(M(this.r), M(this.g), M(this.b), A(this.opacity));}, displayable() {return -.5 <= this.r && this.r < 255.5 && -.5 <= this.g && this.g < 255.5 && -.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;}, hex: k, formatHex: k, formatHex8: function () {return `#${_(this.r)}${_(this.g)}${_(this.b)}${_(255 * (isNaN(this.opacity) ? 1 : this.opacity))}`;}, formatRgb: T, toString: T })), (0, n.A)(O, function (t, e, i, n) {return 1 === arguments.length ? D(t) : new O(t, e, i, null == n ? 1 : n);}, (0, n.X)(r, { brighter(t) {return t = null == t ? o : Math.pow(o, t), new O(this.h, this.s, this.l * t, this.opacity);}, darker(t) {return t = null == t ? s : Math.pow(s, t), new O(this.h, this.s, this.l * t, this.opacity);}, rgb() {var t = this.h % 360 + 360 * (this.h < 0),e = isNaN(t) || isNaN(this.s) ? 0 : this.s,i = this.l,n = i + (i < .5 ? i : 1 - i) * e,r = 2 * i - n;return new C(R(t >= 240 ? t - 240 : t + 120, r, n), R(t, r, n), R(t < 120 ? t + 240 : t - 120, r, n), this.opacity);}, clamp() {return new O(I(this.h), F(this.s), F(this.l), A(this.opacity));}, displayable() {return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;}, formatHsl() {const t = A(this.opacity);return `${1 === t ? "hsl(" : "hsla("}${I(this.h)}, ${100 * F(this.s)}%, ${100 * F(this.l)}%${1 === t ? ")" : `, ${t})`}`;} }));}, 6986: (t, e, i) => {"use strict";i.d(e, { IO: () => s, KY: () => r });var n = i(4708),r = n.KY,s = (n.lp, n.Bt, n.e$, n.j$, n.zO, n.ND, n.Zb, n.IO);n.$e, n.p8, n.NN, n.xq;}, 7028: (t, e, i) => {"use strict";const n = i(537),r = i(54),s = (t) => null !== t && "object" == typeof t && !Array.isArray(t),o = (t) => "number" == typeof t || "string" == typeof t && "" !== t,a = (t) => Number.isInteger(+t),l = (t) => {let e = `${t}`,i = -1;if ("-" === e[0] && (e = e.slice(1)), "0" === e) return !1;for (; "0" === e[++i];);return i > 0;},c = (t, e, i) => {if (e > 0) {let i = "-" === t[0] ? "-" : "";i && (t = t.slice(1)), t = i + t.padStart(i ? e - 1 : e, "0");}return !1 === i ? String(t) : t;},h = (t, e) => {let i = "-" === t[0] ? "-" : "";for (i && (t = t.slice(1), e--); t.length < e;) t = "0" + t;return i ? "-" + t : t;},u = (t, e, i, n) => {if (i) return r(t, e, { wrap: !1, ...n });let s = String.fromCharCode(t);return t === e ? s : `[${s}-${String.fromCharCode(e)}]`;},d = (t, e, i) => {if (Array.isArray(t)) {let e = !0 === i.wrap,n = i.capture ? "" : "?:";return e ? `(${n}${t.join("|")})` : t.join("|");}return r(t, e, i);},p = (...t) => new RangeError("Invalid range arguments: " + n.inspect(...t)),f = (t, e, i) => {if (!0 === i.strictRanges) throw p([t, e]);return [];},g = (t, e, i, n = {}) => {if (null == e && o(t)) return [t];if (!o(t) || !o(e)) return f(t, e, n);if ("function" == typeof i) return g(t, e, 1, { transform: i });if (s(i)) return g(t, e, 0, i);let r = { ...n };return !0 === r.capture && (r.wrap = !0), i = i || r.step || 1, a(i) ? a(t) && a(e) ? ((t, e, i = 1, n = {}) => {let r = Number(t),s = Number(e);if (!Number.isInteger(r) || !Number.isInteger(s)) {if (!0 === n.strictRanges) throw p([t, e]);return [];}0 === r && (r = 0), 0 === s && (s = 0);let o = r > s,a = String(t),f = String(e),g = String(i);i = Math.max(Math.abs(i), 1);let m = l(a) || l(f) || l(g),v = m ? Math.max(a.length, f.length, g.length) : 0,y = !1 === m && !1 === ((t, e, i) => "string" == typeof t || "string" == typeof e || !0 === i.stringify)(t, e, n),b = n.transform || ((t) => (e) => !0 === t ? Number(e) : String(e))(y);if (n.toRegex && 1 === i) return u(h(t, v), h(e, v), !0, n);let w = { negatives: [], positives: [] },x = (t) => w[t < 0 ? "negatives" : "positives"].push(Math.abs(t)),S = [],E = 0;for (; o ? r >= s : r <= s;) !0 === n.toRegex && i > 1 ? x(r) : S.push(c(b(r, E), v, y)), r = o ? r - i : r + i, E++;return !0 === n.toRegex ? i > 1 ? ((t, e, i) => {t.negatives.sort((t, e) => t < e ? -1 : t > e ? 1 : 0), t.positives.sort((t, e) => t < e ? -1 : t > e ? 1 : 0);let n,r = e.capture ? "" : "?:",s = "",o = "";return t.positives.length && (s = t.positives.map((t) => h(String(t), i)).join("|")), t.negatives.length && (o = `-(${r}${t.negatives.map((t) => h(String(t), i)).join("|")})`), n = s && o ? `${s}|${o}` : s || o, e.wrap ? `(${r}${n})` : n;})(w, n, v) : d(S, null, { wrap: !1, ...n }) : S;})(t, e, i, r) : ((t, e, i = 1, n = {}) => {if (!a(t) && t.length > 1 || !a(e) && e.length > 1) return f(t, e, n);let r = n.transform || ((t) => String.fromCharCode(t)),s = `${t}`.charCodeAt(0),o = `${e}`.charCodeAt(0),l = s > o,c = Math.min(s, o),h = Math.max(s, o);if (n.toRegex && 1 === i) return u(c, h, !1, n);let p = [],g = 0;for (; l ? s >= o : s <= o;) p.push(r(s, g)), s = l ? s - i : s + i, g++;return !0 === n.toRegex ? d(p, null, { wrap: !1, options: n }) : p;})(t, e, Math.max(Math.abs(i), 1), r) : null == i || s(i) ? g(t, e, 1, i) : ((t, e) => {if (!0 === e.strictRanges) throw new TypeError(`Expected step "${t}" to be a number`);return [];})(i, r);};t.exports = g;}, 7029: (t, e, i) => {"use strict";i.d(e, { A: () => C, L: () => n });var n,r = i(7492),s = i(7641),o = i(1807),a = i(6684),l = i(5367),c = i(5370),h = i(6358),u = i(8891),d = i(246),p = i(8862),f = i(7112),g = i(8174),m = i(7077),v = i(1514),y = i(4237),b = i(3895),w = i(5888),x = i(2755),S = i(7345),E = i(1299);!function (t) {t[t.Default = 0] = "Default", t[t.AddLocalMap = 1] = "AddLocalMap", t[t.AddRemoteMap = 2] = "AddRemoteMap", t[t.AddMyStorageMap = 3] = "AddMyStorageMap", t[t.MyStorage = 4] = "MyStorage", t[t.ImportUrls = 5] = "ImportUrls", t[t.EditUnsavedMap = 6] = "EditUnsavedMap";}(n || (n = {}));class C extends s._ {svgPreviewer;msgBox;sortableList;dropzone;selectedMap;topBar;listContainer;addMapContainer;mapsList;dropArea;selectedMapContainer;footerBar;removeAllButton;removedMaps = [];closeButton;split;warningLocalMapsSize;constructor(t, e) {super(t, e), this.mapsManager.ensureMapsOrder(this.drillPathId), this.mapsManager.on("mapAdded", (t) => this.addMapToUIList(t)), this.selectedMap = this.mapsManager.getSelectedMap(this.drillPathId);}get displayMaps() {return this.mapsManager.getDisplayMaps(this.drillPathId);}get maps() {return this.mapsManager.getMaps(this.drillPathId);}draw() {this.initViewContent(), this.applyState(), this.checkWarningLocalMapLimit();}async applyState() {switch (this.options.viewState) {case n.AddLocalMap:this.options.jsvgsToSave && (this.addLocalMaps(this.options.jsvgsToSave), this.options.jsvgsToSave = null);break;case n.AddRemoteMap:this.showAddRemoteMapMsgBox();break;case n.MyStorage:case n.AddMyStorageMap:this.connectMyStorage();break;case n.ImportUrls:this.options.importURLs && (this.addRemoteMapsFromJson(this.options.importURLs), this.options.importURLs = null);break;case n.EditUnsavedMap:this.options.unsavedJsvg && (this.selectMapUIElement(this.options.unsavedJsvg.jsvg.id), this.options.unsavedJsvg.location == b.k.MyStorage && (await this.connectMyStorage(!1)), this.editMap(this.selectedMap, this.options.unsavedJsvg));}}async connectMyStorage(t = !0, e = 0) {try {if (this.mapsManager?.myStorage) {if (this.showLoading(), !(await this.mapsManager.myStorage.connect())) {if (e < 5) return await (0, o.ukR)(1e3), this.connectMyStorage(t, e + 1);throw (0, S.T)("MS_NOT_CONNECTED");}if (this.mapsManager.myStorage.info.isActive) {let e = !0;this.mapsManager.myStorage.info.isSetup || "ok" !== (await this.showMyStorageSetup()).action && (e = !1), t && e && (await this.showMyStorageAddMap());}if (this.setResult(), !this.mapsManager.myStorage.info.isActive) throw (0, S.T)("MS_INACTIVE");this.removeLoading();}} catch (t) {this.raiseError(t), this.removeLoading();}}setResult() {this.result.removedMaps = this.removedMaps, this.parent.setDialogResult(), this.checkWarningLocalMapLimit(), this.changeCloseButtonToDone();}changeCloseButtonToDone() {this.closeButton && (this.closeButton.querySelector(".close").classList.remove("white", "border"), this.closeButton.querySelector(".text").textContent = "Done");}initViewContent() {this.options.viewState === n.MyStorage ? this.drawAccessMyStorageBtn() : (this.viewContainer.classList.add("user-select-none", "flex", "column"), this.topBar && this.topBar.remove(), (0, o.tTh)(".header-bar", this.viewContainer, { middleware: (t) => this.topBar = t }), this.drawDrillPathTitle(), this.displayMaps.length ? (this.drawUI(), this.addAllMapsToUIList()) : this.drawAddMapButton());}drawUI() {this.footerBar || (this.addMapContainer && this.addMapContainer.remove(), (0, o.tTh)(".subset-add-map.editor-panes", this.viewContainer, { middleware: (t) => this.addMapContainer = t }, [(0, o.tTh)(".subset-maps.pane", [(0, o.tTh)(".file-list", { middleware: (t) => this.dropArea = t }, [(0, o.tTh)(".list-box.drop", [(0, o.tTh)(".list-container", { middleware: (t) => this.listContainer = t }, [(0, o.tTh)(".subset-map", [(0, o.tTh)("ul.map-list", { middleware: (t) => this.mapsList = t })])])]), (0, o.tTh)(".button-box", [(0, o.tTh)(".icon.icon-delete.ctrl", { middleware: (t) => this.removeAllButton = t, attr: { title: "Remove all maps" }, events: { click: (t, e) => {e.hasAttribute("disabled") || this.showRemoveAllMapsMsgBox();} } }), (0, o.tTh)(".synoptic-btn.end.ctrl", { events: { click: (t) => this.showAddMapContextMenu(t) } }, [(0, o.tTh)(".group.small", [(0, o.tTh)(".icon.icon-plus.small"), (0, o.tTh)("span.text.small", "Add")])])])])]), (0, o.tTh)(".panes-gutter"), (0, o.tTh)(".selected-map-preview.pane", { middleware: (t) => this.selectedMapContainer = t })]), (0, o.tTh)(".footer-bar", this.viewContainer, { middleware: (t) => this.footerBar = t }, [(0, o.tTh)(".learn-more", { events: { click: () => this.parent.launchUrl(E.tl.docsMapEditor) } }, "Learn more on Map Editor"), (0, o.tTh)(".synoptic-btn.end.ctrl", { middleware: (t) => this.closeButton = t, events: { click: () => this.parent.closeDialog() } }, [(0, o.tTh)(".close.group.small.white.border", [(0, o.tTh)("span.text.small", "Close")])])]), this.initSplit(), this.initSortableList(), this.initDropZone(this.dropArea), this.initPreviewer(), this.addListenerOnList());}initSplit() {this.split && this.split.destroy(), this.split = (0, w.A)({ columnGutters: [{ track: 1, element: this.addMapContainer.querySelector(".panes-gutter") }], columnMinSize: 200 });}initPreviewer() {this.svgPreviewer && this.svgPreviewer.destroy(), this.svgPreviewer = new r.s({ previewContainer: this.selectedMapContainer }), this.svgPreviewer.on("editMap", () => this.editMap(this.selectedMap)), this.svgPreviewer.on("refreshMap", () => this.refreshMap()), this.svgPreviewer.on("launchUrl", (t) => this.parent.launchUrl(t));}drawAddMapButton() {this.addMapContainer && this.addMapContainer.remove(), this.footerBar && (this.footerBar.remove(), this.footerBar = null), (0, o.tTh)(".subset-add-map.empty", this.viewContainer, { middleware: (t) => this.addMapContainer = t }, [(0, o.tTh)(".no-subs-maps", [(0, o.tTh)(".placeholder", "No map set at this level"), (0, o.tTh)(".synoptic-btn.add-map-btn", { events: { click: (t) => this.showAddMapContextMenu(t) } }, [(0, o.tTh)(".group", [(0, o.tTh)(".icon.icon-plus.small"), (0, o.tTh)("span.text.small", "Add Map")])])])]), this.initDropZone(this.addMapContainer);}drawAccessMyStorageBtn() {(0, o.tTh)(".subset-add-map.empty", this.viewContainer, { middleware: (t) => this.addMapContainer = t }, [(0, o.tTh)(".no-subs-maps", [(0, o.tTh)(".placeholder", "Access My Storage to manage your maps"), (0, o.tTh)(".synoptic-btn.add-map-btn", { events: { click: (t) => this.connectMyStorage() } }, [(0, o.tTh)(".group", [(0, o.tTh)(".icon.icon-okviz-storage.small"), (0, o.tTh)("span.text.small", "My Storage")])])])]);}showAddMapContextMenu(t) {o.tzH.Init("add-map-context-menu", { sticky: t.currentTarget, width: "auto", items: [{ label: "Local Map", icon: "folder", onClick: () => this.dropzone.handleBrowse() }, { label: "Remote Map", enabled: this.options.visualFeatures.remoteMaps, icon: "world", onClick: () => this.showAddRemoteMapMsgBox() }, { label: "My Storage Map", enabled: this.options.visualFeatures.myStorageMaps, icon: "okviz-storage", onClick: () => this.connectMyStorage() }, { type: o.KGh.Separator }, { label: "Import URLs", icon: "upload", enabled: this.options.visualFeatures.remoteMaps, onClick: () => this.importUrls() }] }).show(t);}drawDrillPathTitle() {const t = (0, o.tTh)(".subset-title", this.topBar, [(0, o.tTh)(".icon.icon-branch.big")]),e = (0, v.xv)(this.drillPathId);e.forEach((i, n) => {const r = (0, o.tTh)("span.level", i);if (t.appendChild(r), n < e.length - 1) {const e = (0, o.tTh)(".icon.icon-right.small");t.appendChild(e);}}), t.setAttribute("title", `Drill Path: ${(0, v.pT)(e)}`);}checkWarningLocalMapLimit() {if (this.options.viewState === n.MyStorage) return;this.warningLocalMapsSize && this.warningLocalMapsSize.remove();const t = this.mapsManager.getMemorySize(b.k.Local);if (t > .8 * E.Ay) {const e = t > E.Ay;(0, o.tTh)(".banner.end" + (e ? ".error" : ".warning"), this.topBar, { middleware: (t) => this.warningLocalMapsSize = t }, [(0, o.tTh)(".icon.icon" + (e ? "-error" : "-alert")), (0, o.tTh)("span", `You ${e ? "have reached" : "are reaching"} the size limit (${(0, m.v7)(E.Ay)}) for local maps. Use remote or My Storage maps to free space.`)]);}}initDropZone(t) {this.dropzone && this.dropzone.destroy(), this.dropzone = new a.g({ container: t, multiple: !0, accept: l.k$ }), this.dropzone.on("file", () => {this.dropzone.files?.length && this.addLocalMaps(this.dropzone.files);}), this.dropzone.on("error", (t) => this.raiseError(t));}async importUrls() {const t = await a.g.browseFiles(["application/json"]);t && t.length && this.addRemoteMapsFromJson(t[0]);}initSortableList() {this.sortableList && this.sortableList.destroy(), this.sortableList = new d.Ay(this.mapsList, { direction: "vertical", animation: 150, handle: ".order", dataIdAttr: l.Lc.JsvgId, ghostClass: "ghost", dragClass: "dragging", filter: ".remove.location.map-title", onEnd: (t) => {t.stopPropagation(), this.mapsManager.updateMapsOrder(this.sortableList.toArray(), this.drillPathId), this.setResult();} });}addListenerOnList() {this.listContainer.addLiveEventListener("click", ".context-menu", (t, e) => {this.showMapContextMenu(t, e.closest("li").getAttribute(l.Lc.JsvgId));}), this.listContainer.addLiveEventListener("click", ".selectable", (t) => {const e = t.target;e.classList.contains("context-menu") || this.selectMapUIElement(e);});}addAllMapsToUIList() {const t = this.displayMaps;t.forEach((e, i) => this.addMapToUIList(e, this.selectedMap?.id === e.id, i === t.length - 1));}addMapToUIList(t, e = !1, i = !0) {this.drawUI();const n = t.location === b.k.Local ? "icon-map" : t.location === b.k.MyStorage ? "icon-okviz-map" : "icon-remote-map",r = t.location === b.k.Local ? "Local" : t.location === b.k.MyStorage ? "My Storage" : "Remote",s = (0, o.tTh)("li.map-file.selectable" + (t.parentMapId ? ".auto-map" : ""), this.mapsList, { middleware: (e) => {e.setAttribute(l.Lc.JsvgId, t.id);} }, [(0, o.tTh)(".start.selectable", [(0, o.tTh)("span.order.icon.icon-sort"), (0, o.tTh)(`span.location.icon.${n}.big`, { attr: { title: `Map location: ${r}` } }), (0, o.tTh)("span.map-title.selectable", { attr: { title: t.name } }, (0, m.xx)(t.name, 30))])]),a = (0, o.tTh)(".end", s);(0, o.tTh)("span.icon.icon-ellipsis.context-menu.ctrl", a), (e || i && !this.selectedMap) && this.selectMapUIElement(s), i && this.updateRemoveAllButtonState();}showMapContextMenu(t, e) {const i = this.mapsManager.findMapById(e);if (!i) return;const n = i.map.parentMapId ? "This map cannot be deleted because it has been added by another map." : (0, v.b4)(i.drillPathId) ? "This map cannot be deleted from here because it is available on multiple drill paths. Use the Map Manager to delete it." : null,r = i.map.location === b.k.Local;o.tzH.Init("map-context-menu", { width: n ? 230 : "auto", sticky: !0, items: [{ label: "Edit", icon: "edit", className: "small-text-contextual-menu-item", onClick: () => this.editMap(i.map) }, { label: "Rename", icon: "rename", className: "small-text-contextual-menu-item", onClick: () => this.showRenameMapMsgBox(i.map) }, { label: "Replace", icon: "open-folder", className: "small-text-contextual-menu-item", enabled: r, onClick: () => this.replaceLocalMap(i.map) }, { type: o.KGh.Separator }, { label: "Remove", icon: "delete", className: "small-text-contextual-menu-item", enabled: !n, onClick: () => {this.showRemoveMapMsgBox(i.map);} }, ...(n ? [{ type: o.KGh.Hint, label: n }] : [])] }).show(t);}async replaceLocalMap(t) {const e = await a.g.browseFiles(l.k$);if (!e.length) return;const i = await this.mapsManager.jsvgGenerator.createFromFile(e[0], t.name, t.id, t.jsvg);i && (this.mapsManager.updateMap(i, t.id, this.drillPathId), this.setResult(), this.handlePreview());}updateMapInList(t) {const e = this.listContainer.querySelector(`[${l.Lc.JsvgId}="${(0, o.z4e)(t.id)}"]`);if (e) {const i = e.querySelector(".map-title");i.textContent = t.name, i.setAttribute("title", t.name);}}selectMapUIElement(t) {if (!t) return;let e, i;if (t instanceof HTMLElement) {if (t === this.listContainer) return;if (e = "li" !== t.nodeName.toLowerCase() ? t.closest("li") : t, e.classList.contains("selected")) return;if (i = e.getAttribute(l.Lc.JsvgId), !i) return;} else i = t, e = this.listContainer.querySelector(`[${l.Lc.JsvgId}="${(0, o.z4e)(i)}"]`);this.selectMap(i), this.listContainer.querySelectorAll("li").forEach((t) => t.classList.remove("selected")), e.classList.add("selected"), this.handlePreview();}selectMap(t) {this.selectedMap = this.mapsManager.findMapById(t)?.map, this.mapsManager.freeMemory();}async handlePreview(t = !0) {if (this.svgPreviewer.destroyMap(), !this.selectedMap) return;const e = this.selectedMap.location === b.k.Local,i = this.selectedMap.id;if (this.svgPreviewer.showInfo(this.selectedMap, e), this.selectedMap.location === b.k.Local) this.svgPreviewer.show(this.selectedMap.jsvg);else {this.svgPreviewer.loading(), t || (await (0, o.ukR)(500));try {if (await this.ensureMapContent(this.selectedMap), i !== this.selectedMap.id) return;this.svgPreviewer.showInfo(this.selectedMap, e), this.svgPreviewer.show(this.selectedMap.jsvg), this.svgPreviewer.endLoading();} catch (t) {if (i !== this.selectedMap.id) return;this.svgPreviewer.endLoading(), this.svgPreviewer.raiseError(t);}}}refreshMap() {this.selectedMap && (this.mapsManager.removeMapContent(this.selectedMap, !1), this.handlePreview(!1));}async ensureMapContent(t) {return !!t && (!(t.location !== b.k.Local && !t.jsvg?.svg) || !!(await this.mapsManager.refreshMap(t.id)) && (this.setResult(), !0));}renameMap(t, e) {e && t && e !== t.name && this.mapsManager.renameMap(e, t.id) && (this.svgPreviewer.updateMapName(e), this.updateMapInList(t), this.setResult());}removeAllMaps() {const t = this.maps.filter((t) => !t.parentMapId);for (let e = 0; e < t.length; e++) this.removeMap(t[e], e === t.length - 1);}removeMap(t, e = !0) {if (!t) return;const i = this.selectedMap?.id === t.id;i && (this.svgPreviewer.destroyMap(), this.selectedMap = null);const n = this.listContainer.querySelector(`[${l.Lc.JsvgId}="${(0, o.z4e)(t.id)}"]`);n && n.remove(), i && e && this.selectMapUIElement(this.listContainer.querySelector("li")), this.mapsManager.removeMap(t.id), this.mapsManager.clearSearchIndex(), this.removedMaps.push(t.id), e && (this.setResult(), this.displayMaps.length ? this.updateRemoveAllButtonState() : this.drawAddMapButton());}updateRemoveAllButtonState() {!this.maps.length || this.maps.every((t) => t.parentMapId) ? this.removeAllButton.setAttribute("disabled", "") : this.removeAllButton.removeAttribute("disabled");}async editMap(t, e) {try {if (this.showLoading(), !t) return;if (t.location !== b.k.Local && !(await this.ensureMapContent(t))) return;this.parent.editMap(t, this.options.viewType, e);} catch (t) {this.raiseError(t);} finally {this.removeLoading();}}async addLocalMaps(t) {const e = async (t, e) => {const i = await this.mapsManager.jsvgGenerator.createFromFile(t, e.name, e.id, e.jsvg);return await this.mapsManager.updateMap(i, e.id, this.drillPathId);},i = async (t) => (await this.mapsManager.addLocalMaps([t], this.drillPathId))[0];(0, g.KN)();try {let n = null,r = !1,s = !1;if (t[0] instanceof File) for (let o = 0; o < t.length; o++) {const a = t[o];(0, g.Uu)(a.name, [o + 1, t.length]);const l = this.mapsManager.findMap((t) => t.location === b.k.Local && t.name.toLowerCase() === (0, m.T3)(a.name).toLowerCase(), this.drillPathId);if (l) {if (r) {const t = await e(a, l.map);0 === o && (n = t);continue;}if (!s) {(0, g.jj)("hide");const c = await this.showReplaceMapMsgBox(l.map.name);if ("cancel" === c.action) break;if ("replace" === c.action || "replaceAll" === c.action) {r = "replaceAll" === c.action, (0, g.Uu)(a.name, [o + 1, t.length]);const i = await e(a, l.map);0 === o && (n = i);continue;}if ("keepBoth" === c.action || "keepAll" === c.action) {s = "keepAll" === c.action, (0, g.Uu)(a.name, [o + 1, t.length]);const e = await i(a);0 === o && (n = e);continue;}}}if (s || !l) {(0, g.Uu)(a.name, [o + 1, t.length]);const e = await i(a);0 === o && (n = e);}} else for (let e = 0; e < t.length; e++) {const r = t[e];(0, g.Uu)(r.name, [e + 1, t.length]);const s = await i(r);0 === e && (n = s);}this.mapsManager.clearSearchIndex(), n && this.selectMapUIElement(n.id), this.setResult();} catch (t) {this.raiseError(t);} finally {this.dropzone?.removeFiles(), (0, g.hy)();}}async addRemoteMap(t) {this.showLoading();try {const e = await this.mapsManager.addRemoteMaps([t], this.drillPathId);this.mapsManager.clearSearchIndex(), this.selectMapUIElement(e[0].id), this.setResult();} catch (t) {this.raiseError(t);}this.removeLoading();}async addRemoteMapsFromJson(t) {this.showLoading();try {const e = await this.mapsManager.addRemoteMapsFromJson(t, this.drillPathId);this.mapsManager.clearSearchIndex(), this.selectMapUIElement(e.addedToDefaultDrillPath[0].id), this.setResult(), this.showSuccessfulImportUrlsMsgBox(e.discarded);} catch (t) {this.raiseError(t);}this.removeLoading();}addMyStorageMaps(t) {this.showLoading();const e = this.mapsManager.addMyStorageMaps(t, this.drillPathId);this.mapsManager.clearSearchIndex(), this.selectMapUIElement(e[0].id), this.setResult(), this.removeLoading();}showRemoveMapMsgBox(t) {const e = { element: this.viewContainer, icon: "delete", title: "Remove Map", description: `Are you sure you want to remove "${t.name}"?`, buttons: [{ text: "Remove", callback: () => this.removeMap(t) }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new p.V(e), this.msgBox.draw();}showRemoveAllMapsMsgBox() {const t = { element: this.viewContainer, title: "Remove All Maps", description: "Are you sure you want to remove all maps from the current drill path?\n            \n            Note that remote maps added by another map or on a virtual drill path cannot be removed from here.", buttons: [{ text: "Remove All", callback: () => this.removeAllMaps() }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new p.V(t), this.msgBox.draw();}showSuccessfulImportUrlsMsgBox(t) {const e = t.length > 0,i = t.length > 1,n = { element: this.viewContainer, title: "Import URL Maps", description: "Remote maps import complete. " + (e ? `The following URL${i ? "s are" : "is"} invalid and won't be added:` : "All maps have been added."), buttons: [{ text: "Ok" }] };if (e) {const e = (0, o.tTh)("ul");t.forEach((t) => e.appendChild((0, o.tTh)("li", t)));const i = (0, o.tTh)(".invalid-urls", [e]);n.content = i, n.boxContentClasses = ["no-margins", "overflow-y"];}this.msgBox && this.msgBox.destroy(), this.msgBox = new p.V(n), this.msgBox.draw();}setupMyStorage(t) {if (!t) return !1;const e = { storageName: t.storageName };return t.encryptionKey && this.mapsManager.myStorage.updateInfo({ encryptionKey: t.encryptionKey }), this.mapsManager.myStorage.setup(e);}async showMyStorageSetup() {const t = { ...this.mapsManager.myStorage.info, element: this.options.container, buttons: [{ text: "Accept Terms and Complete", disabled: !0, validationCallback: async (t) => ({ valid: await this.setupMyStorage(t) }) }] };return this.msgBox && this.msgBox.destroy(), this.msgBox = new h.b(t), await this.msgBox.draw();}async showMyStorageAddMap() {const t = await this.mapsManager.myStorage.listMaps(),e = { currentDrillpathMapIds: this.maps.filter((t) => t.location == b.k.MyStorage).map((t) => t.id), mapsManager: this.mapsManager, mapList: t, element: this.options.container, parent: this.parent, onlyBrowse: this.options.viewState === n.MyStorage, buttons: [{ text: "Export URLs", id: c.iP, action: "cancel", callback: (t) => this.exportMyStorageURLs(t) }, { text: "Add selected", id: c.E0, callback: (t) => this.addMyStorageMaps(t) }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new c.bN(e), await this.msgBox.draw();}exportMyStorageURLs(t) {const e = t.map((t) => this.mapsManager.myStorage.getMapUrl(t.id, t.name));this.parent.exportFile({ name: `${this.mapsManager.myStorage.info.displayName}.csv`, type: "csv", content: ["URL", ...e].join("\n"), description: "URLs export for My Storage maps" });}showAddRemoteMapMsgBox() {const t = { element: this.options.container, title: "Remote Map URL", description: "Insert the remote map URL.", placeholder: "https://", showValidationError: !0, buttons: [{ text: "Ok", callback: (t) => this.addRemoteMap(t), validationCallback: (t) => (0, y.Gz)(t) ? this.mapsManager.doesMapHaveProperty("url", t, this.drillPathId) ? { valid: !1, message: "The URL already exists at this level." } : { valid: !0 } : { valid: !1, message: "The URL is invalid." } }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new u.J(t), this.msgBox.draw();}showRenameMapMsgBox(t) {if (this.msgBox && this.msgBox.destroy(), !t) return;const e = t.name,i = { element: this.options.container, icon: "rename", title: "Rename Map", description: `Insert a new name for "${e}".`, value: e, placeholder: "Map name", showValidationError: !0, buttons: [{ text: "Rename", callback: (e) => this.renameMap(t, e), validationCallback: (e) => ((e) => "" === e ? { valid: !1, message: "The new name cannot be empty." } : e === t.name ? { valid: !1, message: "The new name must be different from the current name." } : (0, x._C)(e) ? (0, x.w8)(e) ? { valid: !0 } : { valid: !1, message: x.NX } : { valid: !1, message: x.l0 })(e) }, { text: "Cancel", action: "cancel" }] };this.msgBox && this.msgBox.destroy(), this.msgBox = new u.J(i), this.msgBox.draw();}showReplaceMapMsgBox(t) {const e = { element: this.options.container, mapName: t };return this.msgBox && this.msgBox.destroy(), this.msgBox = new f.J(e), this.msgBox.draw();}destroy() {this.svgPreviewer && this.svgPreviewer.destroy(), this.eventsAbortController.abort(), this.viewContainer && this.viewContainer.remove(), this.options.map = null, this.options.file = null, this.sortableList.destroy(), this.dropzone.destroy(), super.destroy();}}}, 7045: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(3363);function r(t, e) {var i,r,s,o = t.__transition,a = !0;if (o) {for (s in e = null == e ? null : e + "", o) (i = o[s]).name === e ? (r = i.state > n.xo && i.state < n.Op, i.state = n.hV, i.timer.stop(), i.on.call(r ? "interrupt" : "cancel", t, t.__data__, i.index, i.group), delete o[s]) : a = !1;a && delete t.__transition;}}}, 7059: (t, e, i) => {"use strict";const n = i(560);t.exports = (t, e, i) => n(t, e, i) < 0;}, 7075: (t, e, i) => {"use strict";const n = i(3908),r = i(3904),{ ANY: s } = r,o = i(8311),a = i(7638),l = i(5580),c = i(7059),h = i(5200),u = i(4089);t.exports = (t, e, i, d) => {let p, f, g, m, v;switch (t = new n(t, d), e = new o(e, d), i) {case ">":p = l, f = h, g = c, m = ">", v = ">=";break;case "<":p = c, f = u, g = l, m = "<", v = "<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if (a(t, e, d)) return !1;for (let i = 0; i < e.set.length; ++i) {const n = e.set[i];let o = null,a = null;if (n.forEach((t) => {t.semver === s && (t = new r(">=0.0.0")), o = o || t, a = a || t, p(t.semver, o.semver, d) ? o = t : g(t.semver, a.semver, d) && (a = t);}), o.operator === m || o.operator === v) return !1;if ((!a.operator || a.operator === m) && f(t, a.semver)) return !1;if (a.operator === v && g(t, a.semver)) return !1;}return !0;};}, 7077: (t, e, i) => {"use strict";i.d(e, { $T: () => x, Bo: () => a, JT: () => u, Pu: () => C, T3: () => c, TP: () => v, U4: () => d, UD: () => f, Yq: () => b, _1: () => g, dR: () => p, e7: () => m, jA: () => E, jD: () => y, k5: () => S, nr: () => k, rz: () => w, v7: () => l, xx: () => o, yl: () => h });var n = i(1807),r = i(3075),s = i(5367);function o(t, e = 15) {return t ? t?.length <= e ? t : `${t.slice(0, e)}...` : "";}function a(t) {return Array.isArray(t) && t.every((t) => "string" == typeof t);}function l(t, e = 2, i = !1) {const r = 1048576,s = 1073741824,o = (t) => i && t % 1 == 0 ? t.toFixed(0) : t;return t >= s ? `${o((0, n.LIG)(t / s, e))} GB` : t >= r ? `${o((0, n.LIG)(t / r, e))} MB` : t >= 1024 ? `${o((0, n.LIG)(t / 1024, e))} KB` : `${o(t)} bytes`;}function c(t) {const e = t.lastIndexOf(".");return -1 === e ? t : t.substring(0, e);}function h(t) {return "true" === t || "false" !== t && t;}function u(t, e = []) {const i = t.dataMapping.areas,n = new Set();for (const t in i) Object.keys(i[t]).forEach((t) => n.add(t));const r = Array.from(n).filter((t) => 0 === e.length || e.includes(t));return n.clear(), `${r.join(",")}\n${Object.values(i).map((t) => r.map((e) => {const i = t[e];return null != i ? `"${String(i)}"` : "";}).join(",")).join("\n")}`;}function d(t) {return !!t && !(!t.hasAttribute(s.Lc.GroupMatched) || !t.hasAttribute(s.Lc.Strong));}function p(t) {return !!t && !(!t.hasAttribute(s.Lc.GroupUnbound) || !t.hasAttribute(s.Lc.Unbound));}function f(t, e) {if (t === e || null == t && null == e) return !0;if (t && !e || !t && e) return !1;if (Array.isArray(t) && Array.isArray(e)) {if (t.length != e.length) return !1;for (let i = 0; i < t.length; i++) if (t[i] != e[i]) return !1;return !0;}return JSON.stringify(t) === JSON.stringify(e);}function g(t, e) {const i = parseFloat(t),n = parseFloat(e);return isNaN(i) || isNaN(n) ? t.localeCompare(e, void 0, { sensitivity: "base" }) : i - n;}function m(t, e = [], i = ["svg", "body", "html", "div"], n = !1) {const r = [];for (; t;) {const s = t.tagName.toLowerCase();let o = !0;(!t.id && !n || e.some((e) => t.hasAttribute(e)) || i.includes(s)) && (o = !1), o && r.unshift(t.id || s), t = t.parentElement;}return r;}function v(t, e, i) {const n = e.split(".");let r = t;if (1 === n.length) r[n[0]] = i;else {for (let t = 0; t < n.length - 1; t++) {const e = n[t];e in r || (r[e] = {}), r = r[e];}r[n[n.length - 1]] = i;}}function y(t, e) {const i = e.split(".");let n = t;for (let t = 0; t < i.length; t++) {const e = i[t];if (!(e in n)) return;n = n[e];}return n;}function b(t, e, i) {return e ? i ? n.ZA6.instance.create({ format: i, formatSingleValues: !1, cultureSelector: t }).format(e) : new Intl.DateTimeFormat(t, { year: "numeric", month: "2-digit", day: "2-digit" }).format(e) : "(Blank)";}function w(t) {return new Promise((e) => {setTimeout(() => {const i = r.Ay.gzip(t);e(i);}, 0);});}function x(t) {return r.Ay.ungzip(t, { to: "string" });}function S(t) {return t instanceof Blob ? t : new Blob([t], { type: "application/octet-stream" });}function E(t) {return new TextEncoder().encode(JSON.stringify(t));}function C(t, e = !1) {if (e) return new Blob([t]).size;{let e = 0;for (let i = 0; i < t.length; i++) t.charCodeAt(i) <= 127 && e++;return e + 2.5 * (t.length - e);}}function k() {const t = navigator.userAgent;return t.includes("Safari") && !t.includes("Chrome") && !t.includes("Android");}}, 7107: (t, e, i) => {"use strict";i.d(e, { g: () => p });var n = i(1371),r = i(6363),s = i(6585),o = i(5874),a = i(5230),l = i(4528),c = i(906),h = i(8862),u = i(1807),d = i(4652);class p extends c.g {cm;isDirty = !1;get svg() {return this.minifySvg(this.cm?.state.doc.toString() || "");}constructor(t) {super({ ...t, boxClass: "svg-editor", size: { height: "95%", width: "95%" }, buttons: [{ text: "Save & Close", disabled: !0, callback: () => this.save() }, { text: "Close", action: "cancel", callback: () => this.close() }] });}draw() {return this.create(), this.cm = new n.Lz({ parent: this.boxContent, state: s.$t.create({ doc: this.config.svg, extensions: [r.oQ, n.Lz.lineWrapping, n.Lz.updateListener.of((t) => {t.docChanged && (this.isDirty = !0, this.okButton?.classList.remove("disabled"));}), n.w4.of([a.Yc]), s.$t.tabSize.of(4), o.Xt.of("    "), (0, o.Lv)(), (0, o.SG)({ brackets: "<>" }), (0, d._n)()] }) }), (0, u.tTh)(".synoptic-btn.white.border", this.leftButtonBox, { events: { click: (t) => {t.preventDefault(), this.toggleSearchPanel();} } }, [(0, u.tTh)(".group.white.small.border.ctrl", [(0, u.tTh)(".icon.icon-search.small")])]), this.cm.focus(), super.draw();}minifySvg(t) {return t.replace(/>\s+</g, "><").replace(/\s{2,}/g, " ").trim();}toggleSearchPanel() {null !== this.boxContent.querySelector(".cm-search.cm-panel") ? (0, l.jO)(this.cm) : (0, l.pi)(this.cm);}save() {this.isDirty && this.config.onSave(this.svg);}close() {if (this.isDirty) return new h.V({ element: this.config.element, title: "Save Changes", description: "Do you want to save changes to the SVG before closing?", buttons: [{ text: "Save", callback: () => {this.save(), this.triggerAction("ok");} }, { text: "Discard Changes", callback: () => this.destroy(), action: "cancel" }] }).draw(), !1;}destroy() {this.cm.destroy(), super.destroy();}}}, 7111: (t, e, i) => {"use strict";var n = i(1882),r = i(5868),s = i(4620);n.Ay.prototype.interrupt = r.A, n.Ay.prototype.transition = s.A;}, 7112: (t, e, i) => {"use strict";i.d(e, { J: () => a });var n = i(906),r = i(1807);const s = "replace-map-btn",o = "keep-both-map-btn";class a extends n.g {checkbox;get applyToAll() {return this.checkbox.classList.contains("checked");}constructor(t) {t.title = "Existing Map", t.icon = "alert", t.description = t.description ?? `A map named "${t.mapName}" already exists at this level. Do you want to replace it with the one you are uploading?`, t.buttons = [{ text: "Cancel", action: "cancel" }, { id: o, text: "Keep Both", action: "keepBoth" }, { id: s, text: "Replace", action: "replace" }], super(t);}handleCheckboxClick() {this.changeButtonAction(o, this.applyToAll ? "keepAll" : "keepBoth"), this.changeButtonAction(s, this.applyToAll ? "replaceAll" : "replace");}maybeShowAlert() {this.config.alertMessage && (0, r.tTh)("span.alert-message", this.boxContent, this.config.alertMessage);}addCheckbox() {(0, r.tTh)(".apply-to-all", this.leftButtonBox, [(0, r.tTh)(".checkbox-new.icon", { middleware: (t) => this.checkbox = t, events: { click: (t, e) => {e.classList.toggle("checked"), this.handleCheckboxClick();} } }), (0, r.tTh)("span.text", "Apply to All")]);}changeButtonAction(t, e) {const i = this.config.buttons.find((e) => e.id === t);i && (i.action = e);}draw() {return this.create(), this.maybeShowAlert(), this.addCheckbox(), super.draw();}}}, 7125: (t, e, i) => {"use strict";i.d(e, { W: () => a, d: () => o });var n = i(1807),r = i(906),s = i(100);const o = "confirm-edit-key-btn";class a extends r.g {localStorageCheckbox;internalSaveCheckbox;textArea;get keyString() {return this.textArea.value.trim();}get callbackData() {return { key: this.keyString, localStorage: this.localStorageCheckbox.classList.contains("checked"), internal: this.internalSaveCheckbox.classList.contains("checked") };}get validationCallbackData() {return { key: this.keyString, localStorage: this.localStorageCheckbox.classList.contains("checked"), internal: this.internalSaveCheckbox.classList.contains("checked") };}constructor(t) {super(t);}updateButton() {const t = !this.keyString.length || !s.Lu.IsValidEditKeyFormat(this.keyString);this.toggleButton(o, t);}drawEditKeySection() {this.toggleButton(o, !0), (0, n.tTh)(".edit-key", this.boxContent, [(0, n.tTh)("textarea", { attr: { rows: 3, placeholder: "Insert your storage Edit key", spellcheck: "false" }, events: { input: () => this.updateButton() }, middleware: (t) => this.textArea = t }), (0, n.tTh)(".save-options", this.boxContainer, [(0, n.tTh)("label.option", [(0, n.tTh)(".checkbox-new.icon", { events: { click: (t) => t.currentTarget.classList.toggle("checked") }, middleware: (t) => this.localStorageCheckbox = t }, [(0, n.tTh)("span", "Remember key for 29 days")])]), (0, n.tTh)("label.option", [(0, n.tTh)(".checkbox-new.icon", { events: { click: (t) => t.currentTarget.classList.toggle("checked") }, middleware: (t) => this.internalSaveCheckbox = t }, [(0, n.tTh)("span", "Make key available for all users of this report")])])])]), setTimeout(() => this.textArea.focus(), 250);}draw() {return this.create(), this.drawEditKeySection(), this.addValidationErrorBox(), super.draw();}}}, 7134: (t, e, i) => {"use strict";i.d(e, { W: () => s });var n = i(1807),r = i(3179);class s {config;container;model;selectionManager;initialSelectionIds;table;constructor(t, e, i, n, r) {this.config = t, this.container = e, this.model = i, this.selectionManager = n, this.initialSelectionIds = r;}draw() {this.table?.remove();const t = this.config.columns * this.config.rows,e = Math.max(0, this.model.dataPoints.length - (t - 1));this.table = (0, n.tTh)("table.grid-placeholder", this.container, { style: { fontFamily: this.config.font.family, fontSize: `${this.config.font.size}px`, fontWeight: this.config.font.bold ? "bold" : "normal", fontStyle: this.config.font.italic ? "italic" : "normal", textDecoration: this.config.font.underline ? "underline" : "none", color: this.config.color } });for (let t = 0; t < this.config.rows; t++) {const i = (0, n.tTh)("tr", this.table);for (let r = 0; r < this.config.columns; r++) {const s = (0, n.tTh)("td", i);if (t === this.config.rows - 1 && r === this.config.columns - 1) s.classList.add("static"), e && (s.textContent = `+ ${e}`);else {const e = this.model.dataPoints[t * this.config.columns + r];if (e) {const t = e.label2 || e.label || "(Blank)";s.textContent = t, s.title = t, s.dataset.id = e.id;} else s.classList.add("empty", "static");}}}this.initialSelectionIds && this.handleSelection(this.initialSelectionIds), this.listen();}listen() {this.table.addLiveEventListener("click", "td", async (t, e) => {const i = e.dataset.id,n = (0, r.JF)(i, this.model);if (n) {const e = (0, r.wT)(this.selectionManager.getSelectionIds(), this.model);let i = [];if (n.selectionIds.length > 1 && 1 == e.length && e[0].id == n.id) this.selectionManager.clear();else for (let e = 0; e < n.selectionIds.length; e++) i = await this.selectionManager.select(n.selectionIds[e], t.ctrlKey || t.metaKey || e > 0);this.handleSelection(i);}}), this.table.addLiveEventListener("contextmenu", "td", (t, e) => {t.preventDefault();const i = e.dataset.id,n = (0, r.JF)(i, this.model);this.selectionManager?.showContextMenu(n ? n.selectionIds : {}, { x: t.clientX, y: t.clientY });});}handleSelection(t) {this.table.classList.toggle("has-selection", t.length > 0), this.table.querySelectorAll("td").forEach((t) => t.classList.remove("selected")), (0, r.wT)(t, this.model).forEach((t) => {const e = this.table.querySelector(`[data-id="${(0, n.z4e)(t.id)}"]`);e && e.classList.add("selected");});}destroy() {this.table?.remove(), this.table = null, this.container = null, this.selectionManager = null, this.initialSelectionIds = [];}}}, 7168: (t, e, i) => {"use strict";function n(t, e) {return function (i, n) {for (var r = i.length, s = [], o = 0, a = t[0], l = 0; r > 0 && a > 0 && (l + a + 1 > n && (a = Math.max(1, n - l)), s.push(i.substring(r -= a, r + a)), !((l += a + 1) > n));) a = t[o = (o + 1) % t.length];return s.reverse().join(e);};}i.d(e, { A: () => n });}, 7225: (t) => {t.exports = { visual: { version: "2.4.4.0", date: "2025-10-10", name: "synopticPanelLiteByOKVIZ", guid: "synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6", displayName: "Synoptic Panel Lite by OKVIZ", description: "Synoptic Panel by OKVIZ is a custom visual for Power BI that allows users to display data dynamically across custom images or maps, which are not restricted to geographic representations.", supportUrl: "https://okviz.com/synoptic-panel/", contactUrl: "https://okviz.com/support/", docsUrl: "https://docs.okviz.com/visuals/synoptic-panel/", changelogUrl: "https://docs.okviz.com/visuals/synoptic-panel/changelog/", visualClassName: "Visual", edition: "lite", appSourcePurchaseUrl: "https://appsource.microsoft.com/en-us/product/power-bi-visuals/okvizcorp1634637213047.synopticpanelbyokviz-lite?tab=PlansAndPrice", ls: { p: [0], ap: ["okvizcorp1634637213047.synopticpanelbyokviz-lite.*"] } }, author: { name: "OKVIZ", email: "support@okviz.com" }, apiVersion: "5.11.0", assets: { icon: "dist/tmp/icon.svg" }, externalJS: null, style: "style/visual.less", capabilities: "capabilities.json", stringResources: [] };}, 7235: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(5204);function r(t) {return (t = (0, n.f)(Math.abs(t))) ? t[1] : NaN;}}, 7268: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(7947);function r(t) {var e = t += "",i = e.indexOf(":");return i >= 0 && "xmlns" !== (e = t.slice(0, i)) && (t = t.slice(i + 1)), n.A.hasOwnProperty(e) ? { space: n.A[e], local: t } : t;}}, 7270: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(1882).Ay.prototype.constructor;function r() {return new n(this._groups, this._parents);}}, 7272: (t, e, i) => {"use strict";var n = i(5606);const r = "object" == typeof n && n.env && n.env.NODE_DEBUG && /\bsemver\b/i.test(n.env.NODE_DEBUG) ? (...t) => console.error("SEMVER", ...t) : () => {};t.exports = r;}, 7274: (t, e, i) => {"use strict";var n;function r(t, e, i) {const n = typeof i,r = typeof t;if ("undefined" !== n) {if ("undefined" !== r) {if (i) {if ("function" === r && n === r) return function (e) {return t(i(e));};if ((e = t.constructor) === i.constructor) {if (e === Array) return i.concat(t);if (e === Map) {var s = new Map(i);for (var o of t) s.set(o[0], o[1]);return s;}if (e === Set) {for (s of (o = new Set(i), t.values())) o.add(s);return o;}}}return t;}return i;}return "undefined" === r ? e : t;}function s(t, e) {return void 0 === t ? e : t;}function o() {return Object.create(null);}function a(t) {return "string" == typeof t;}function l(t) {return "object" == typeof t;}function c(t, e) {if (a(e)) t = t[e];else for (let i = 0; t && i < e.length; i++) t = t[e[i]];return t;}i.d(e, { yo: () => Ft });const h = /[^\p{L}\p{N}]+/u,u = /(\d{3})/g,d = /(\D)(\d{3})/g,p = /(\d{3})(\D)/g,f = /[\u0300-\u036f]/g;function g(t = {}) {if (!this || this.constructor !== g) return new g(...arguments);if (arguments.length) for (t = 0; t < arguments.length; t++) this.assign(arguments[t]);else this.assign(t);}function m(t) {t.F = null, t.B.clear(), t.D.clear();}function v(t, e, i) {i || (e || "object" != typeof t ? "object" == typeof e && (i = e, e = 0) : i = t), i && (t = i.query || t, e = i.limit || e);let n = "" + (e || 0);i && (n += (i.offset || 0) + !!i.context + !!i.suggest + (!1 !== i.resolve) + (i.resolution || this.resolution) + (i.boost || 0)), t = ("" + t).toLowerCase(), this.cache || (this.cache = new y());let r = this.cache.get(t + n);if (!r) {const s = i && i.cache;s && (i.cache = !1), r = this.search(t, e, i), s && (i.cache = s), this.cache.set(t + n, r);}return r;}function y(t) {this.limit = t && !0 !== t ? t : 1e3, this.cache = new Map(), this.h = "";}(n = g.prototype).assign = function (t) {this.normalize = r(t.normalize, !0, this.normalize);let e,i = t.include,n = i || t.exclude || t.split;if (n || "" === n) {if ("object" == typeof n && n.constructor !== RegExp) {let t = "";e = !i, i || (t += "\\p{Z}"), n.letter && (t += "\\p{L}"), n.number && (t += "\\p{N}", e = !!i), n.symbol && (t += "\\p{S}"), n.punctuation && (t += "\\p{P}"), n.control && (t += "\\p{C}"), (n = n.char) && (t += "object" == typeof n ? n.join("") : n);try {this.split = new RegExp("[" + (i ? "^" : "") + t + "]+", "u");} catch (t) {this.split = /\s+/;}} else this.split = n, e = !1 === n || "a1a".split(n).length < 2;this.numeric = r(t.numeric, e);} else {try {this.split = r(this.split, h);} catch (t) {this.split = /\s+/;}this.numeric = r(t.numeric, r(this.numeric, !0));}if (this.prepare = r(t.prepare, null, this.prepare), this.finalize = r(t.finalize, null, this.finalize), n = t.filter, this.filter = "function" == typeof n ? n : r(n && new Set(n), null, this.filter), this.dedupe = r(t.dedupe, !0, this.dedupe), this.matcher = r((n = t.matcher) && new Map(n), null, this.matcher), this.mapper = r((n = t.mapper) && new Map(n), null, this.mapper), this.stemmer = r((n = t.stemmer) && new Map(n), null, this.stemmer), this.replacer = r(t.replacer, null, this.replacer), this.minlength = r(t.minlength, 1, this.minlength), this.maxlength = r(t.maxlength, 1024, this.maxlength), this.rtl = r(t.rtl, !1, this.rtl), (this.cache = n = r(t.cache, !0, this.cache)) && (this.F = null, this.L = "number" == typeof n ? n : 2e5, this.B = new Map(), this.D = new Map(), this.I = this.H = 128), this.h = "", this.J = null, this.A = "", this.K = null, this.matcher) for (const t of this.matcher.keys()) this.h += (this.h ? "|" : "") + t;if (this.stemmer) for (const t of this.stemmer.keys()) this.A += (this.A ? "|" : "") + t;return this;}, n.addStemmer = function (t, e) {return this.stemmer || (this.stemmer = new Map()), this.stemmer.set(t, e), this.A += (this.A ? "|" : "") + t, this.K = null, this.cache && m(this), this;}, n.addFilter = function (t) {return "function" == typeof t ? this.filter = t : (this.filter || (this.filter = new Set()), this.filter.add(t)), this.cache && m(this), this;}, n.addMapper = function (t, e) {return "object" == typeof t ? this.addReplacer(t, e) : t.length > 1 ? this.addMatcher(t, e) : (this.mapper || (this.mapper = new Map()), this.mapper.set(t, e), this.cache && m(this), this);}, n.addMatcher = function (t, e) {return "object" == typeof t ? this.addReplacer(t, e) : t.length < 2 && (this.dedupe || this.mapper) ? this.addMapper(t, e) : (this.matcher || (this.matcher = new Map()), this.matcher.set(t, e), this.h += (this.h ? "|" : "") + t, this.J = null, this.cache && m(this), this);}, n.addReplacer = function (t, e) {return "string" == typeof t ? this.addMatcher(t, e) : (this.replacer || (this.replacer = []), this.replacer.push(t, e), this.cache && m(this), this);}, n.encode = function (t, e) {if (this.cache && t.length <= this.H) if (this.F) {if (this.B.has(t)) return this.B.get(t);} else this.F = setTimeout(m, 50, this);this.normalize && (t = "function" == typeof this.normalize ? this.normalize(t) : f ? t.normalize("NFKD").replace(f, "").toLowerCase() : t.toLowerCase()), this.prepare && (t = this.prepare(t)), this.numeric && t.length > 3 && (t = t.replace(d, "$1 $2").replace(p, "$1 $2").replace(u, "$1 "));const i = !(this.dedupe || this.mapper || this.filter || this.matcher || this.stemmer || this.replacer);let n,r,s = [],a = o(),l = this.split || "" === this.split ? t.split(this.split) : [t];for (let t, o, h = 0; h < l.length; h++) if ((t = o = l[h]) && !(t.length < this.minlength || t.length > this.maxlength)) {if (e) {if (a[t]) continue;a[t] = 1;} else {if (n === t) continue;n = t;}if (i) s.push(t);else if (!this.filter || ("function" == typeof this.filter ? this.filter(t) : !this.filter.has(t))) {if (this.cache && t.length <= this.I) if (this.F) {var c = this.D.get(t);if (c || "" === c) {c && s.push(c);continue;}} else this.F = setTimeout(m, 50, this);if (this.stemmer) {let e;for (this.K || (this.K = new RegExp("(?!^)(" + this.A + ")$")); e !== t && t.length > 2;) e = t, t = t.replace(this.K, (t) => this.stemmer.get(t));}if (t && (this.mapper || this.dedupe && t.length > 1)) {c = "";for (let e, i, n = 0, r = ""; n < t.length; n++) e = t.charAt(n), e === r && this.dedupe || ((i = this.mapper && this.mapper.get(e)) || "" === i ? i === r && this.dedupe || !(r = i) || (c += i) : c += r = e);t = c;}if (this.matcher && t.length > 1 && (this.J || (this.J = new RegExp("(" + this.h + ")", "g")), t = t.replace(this.J, (t) => this.matcher.get(t))), t && this.replacer) for (c = 0; t && c < this.replacer.length; c += 2) t = t.replace(this.replacer[c], this.replacer[c + 1]);if (this.cache && o.length <= this.I && (this.D.set(o, t), this.D.size > this.L && (this.D.clear(), this.I = this.I / 1.1 | 0)), t) {if (t !== o) if (e) {if (a[t]) continue;a[t] = 1;} else {if (r === t) continue;r = t;}s.push(t);}}}return this.finalize && (s = this.finalize(s) || s), this.cache && t.length <= this.H && (this.B.set(t, s), this.B.size > this.L && (this.B.clear(), this.H = this.H / 1.1 | 0)), s;}, y.prototype.set = function (t, e) {this.cache.set(this.h = t, e), this.cache.size > this.limit && this.cache.delete(this.cache.keys().next().value);}, y.prototype.get = function (t) {const e = this.cache.get(t);return e && this.h !== t && (this.cache.delete(t), this.cache.set(this.h = t, e)), e;}, y.prototype.remove = function (t) {for (const e of this.cache) {const i = e[0];e[1].includes(t) && this.cache.delete(i);}}, y.prototype.clear = function () {this.cache.clear(), this.h = "";};const b = { normalize: !1, numeric: !1, dedupe: !1 },w = {},x = new Map([["b", "p"], ["v", "f"], ["w", "f"], ["z", "s"], ["x", "s"], ["d", "t"], ["n", "m"], ["c", "k"], ["g", "k"], ["j", "k"], ["q", "k"], ["i", "e"], ["y", "e"], ["u", "o"]]),S = new Map([["ae", "a"], ["oe", "o"], ["sh", "s"], ["kh", "k"], ["th", "t"], ["ph", "f"], ["pf", "f"]]),E = [/([^aeo])h(.)/g, "$1$2", /([aeo])h([^aeo]|$)/g, "$1$2", /(.)\1+/g, "$1"],C = { a: "", e: "", i: "", o: "", u: "", y: "", b: 1, f: 1, p: 1, v: 1, c: 2, g: 2, j: 2, k: 2, q: 2, s: 2, x: 2, z: 2, : 2, d: 3, t: 3, l: 4, m: 5, n: 5, r: 6 };var k = { Exact: b, Default: w, Normalize: w, LatinBalance: { mapper: x }, LatinAdvanced: { mapper: x, matcher: S, replacer: E }, LatinExtra: { mapper: x, replacer: E.concat([/(?!^)[aeo]/g, ""]), matcher: S }, LatinSoundex: { dedupe: !1, include: { letter: !0 }, finalize: function (t) {for (let i = 0; i < t.length; i++) {var e = t[i];let n = e.charAt(0),r = C[n];for (let t, i = 1; i < e.length && (t = e.charAt(i), "h" === t || "w" === t || !(t = C[t]) || t === r || (n += t, r = t, 4 !== n.length)); i++);t[i] = n;}} }, CJK: { split: "" }, LatinExact: b, LatinDefault: w, LatinSimple: w };function T(t, e, i, n) {let r = [];for (let s, o = 0; o < t.index.length; o++) if (s = t.index[o], e >= s.length) e -= s.length;else {const o = (e = s[n ? "splice" : "slice"](e, i)).length;if (o && (r = r.length ? r.concat(e) : e, i -= o, n && (t.length -= o), !i)) break;e = 0;}return r;}function A(t) {if (!this || this.constructor !== A) return new A(t);this.index = t ? [t] : [], this.length = t ? t.length : 0;const e = this;return new Proxy([], { get: (t, i) => "length" === i ? e.length : "push" === i ? function (t) {e.index[e.index.length - 1].push(t), e.length++;} : "pop" === i ? function () {if (e.length) return e.length--, e.index[e.index.length - 1].pop();} : "indexOf" === i ? function (t) {let i = 0;for (let n, r, s = 0; s < e.index.length; s++) {if (n = e.index[s], r = n.indexOf(t), r >= 0) return i + r;i += n.length;}return -1;} : "includes" === i ? function (t) {for (let i = 0; i < e.index.length; i++) if (e.index[i].includes(t)) return !0;return !1;} : "slice" === i ? function (t, i) {return T(e, t || 0, i || e.length, !1);} : "splice" === i ? function (t, i) {return T(e, t || 0, i || e.length, !0);} : "constructor" === i ? Array : "symbol" != typeof i ? (t = e.index[i / 2 ** 31 | 0]) && t[i] : void 0, set: (t, i, n) => (t = i / 2 ** 31 | 0, (e.index[t] || (e.index[t] = []))[i] = n, e.length++, !0) });}function M(t = 8) {if (!this || this.constructor !== M) return new M(t);this.index = o(), this.h = [], this.size = 0, t > 32 ? (this.B = D, this.A = BigInt(t)) : (this.B = P, this.A = t);}function _(t = 8) {if (!this || this.constructor !== _) return new _(t);this.index = o(), this.h = [], this.size = 0, t > 32 ? (this.B = D, this.A = BigInt(t)) : (this.B = P, this.A = t);}function P(t) {let e = 2 ** this.A - 1;if ("number" == typeof t) return t & e;let i = 0,n = this.A + 1;for (let r = 0; r < t.length; r++) i = (i * n ^ t.charCodeAt(r)) & e;return 32 === this.A ? i + 2 ** 31 : i;}function D(t) {let e = BigInt(2) ** this.A - BigInt(1);var i = typeof t;if ("bigint" === i) return t & e;if ("number" === i) return BigInt(t) & e;i = BigInt(0);let n = this.A + BigInt(1);for (let r = 0; r < t.length; r++) i = (i * n ^ BigInt(t.charCodeAt(r))) & e;return i;}let O, I, F, R, L;async function N(t) {var e = (t = t.data).task;const i = t.id;let n = t.args;if ("init" === e) I = t.options || {}, (e = t.factory) ? (Function("return " + e)()(self), O = new self.FlexSearch.Index(I), delete self.FlexSearch) : O = new At(I), postMessage({ id: i });else {let r;"export" === e && (n[1] ? (n[0] = I.export, n[2] = 0, n[3] = 1) : n = null), "import" === e ? n[0] && (t = await I.import.call(O, n[0]), O.import(n[0], t)) : ((r = n && O[e].apply(O, n)) && r.then && (r = await r), r && r.await && (r = await r.await), "search" === e && r.result && (r = r.result)), postMessage("search" === e ? { id: i, msg: r } : { id: i });}}function V(t) {j.call(t, "add"), j.call(t, "append"), j.call(t, "search"), j.call(t, "update"), j.call(t, "remove"), j.call(t, "searchCache");}function B() {F = L = 0;}function j(t) {this[t + "Async"] = function () {const e = arguments;var i = e[e.length - 1];let n;if ("function" == typeof i && (n = i, delete e[e.length - 1]), F ? L || (L = Date.now() - R >= this.priority * this.priority * 3) : (F = setTimeout(B, 0), R = Date.now()), L) {const i = this;return new Promise((n) => {setTimeout(function () {n(i[t + "Async"].apply(i, e));}, 0);});}const r = this[t].apply(this, e);return i = r.then ? r : new Promise((t) => t(r)), n && i.then(n), i;};}A.prototype.clear = function () {this.index.length = 0;}, A.prototype.push = function () {}, M.prototype.get = function (t) {const e = this.index[this.B(t)];return e && e.get(t);}, M.prototype.set = function (t, e) {var i = this.B(t);let n = this.index[i];n ? (i = n.size, n.set(t, e), (i -= n.size) && this.size++) : (this.index[i] = n = new Map([[t, e]]), this.h.push(n), this.size++);}, _.prototype.add = function (t) {var e = this.B(t);let i = this.index[e];i ? (e = i.size, i.add(t), (e -= i.size) && this.size++) : (this.index[e] = i = new Set([t]), this.h.push(i), this.size++);}, (n = M.prototype).has = _.prototype.has = function (t) {const e = this.index[this.B(t)];return e && e.has(t);}, n.delete = _.prototype.delete = function (t) {const e = this.index[this.B(t)];e && e.delete(t) && this.size--;}, n.clear = _.prototype.clear = function () {this.index = o(), this.h = [], this.size = 0;}, n.values = _.prototype.values = function* () {for (let t = 0; t < this.h.length; t++) for (let e of this.h[t].values()) yield e;}, n.keys = _.prototype.keys = function* () {for (let t = 0; t < this.h.length; t++) for (let e of this.h[t].keys()) yield e;}, n.entries = _.prototype.entries = function* () {for (let t = 0; t < this.h.length; t++) for (let e of this.h[t].entries()) yield e;};let z = 0;function U(t = {}, e) {function n(i) {function n(t) {const e = (t = t.data || t).id,i = e && a.h[e];i && (i(t.msg), delete a.h[e]);}if (this.worker = i, this.h = o(), this.worker) return s ? this.worker.on("message", n) : this.worker.onmessage = n, t.config ? new Promise(function (e) {z > 1e9 && (z = 0), a.h[++z] = function () {e(a);}, a.worker.postMessage({ id: z, task: "init", factory: r, options: t });}) : (this.priority = t.priority || 4, this.encoder = e || null, this.worker.postMessage({ task: "init", factory: r, options: t }), this);}if (!this || this.constructor !== U) return new U(t);let r = "undefined" != typeof self ? self._factory : "undefined" != typeof window ? window._factory : null;r && (r = r.toString());const s = "undefined" == typeof window,a = this,l = function (t, e, n) {return e ? "undefined" != typeof module ? new (require("worker_threads").Worker)(__dirname + "/worker/node.js") : i.e(809).then(i.t.bind(i, 7809, 19)).then(function (t) {return new t.Worker(void 0 + "/node/node.mjs");}) : t ? new window.Worker(URL.createObjectURL(new Blob(["onmessage=" + N.toString()], { type: "text/javascript" }))) : new window.Worker("string" == typeof n ? n : "file:///home/runner/work/synoptic-panel/synoptic-panel/node_modules/flexsearch/dist/flexsearch.bundle.module.min.mjs".replace("/worker.js", "/worker/worker.js").replace("flexsearch.bundle.module.min.js", "module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs", "module/worker/worker.js"), { type: "module" });}(r, s, t.worker);return l.then ? l.then(function (t) {return n.call(a, t);}) : n.call(this, l);}function H(t) {U.prototype[t] = function () {const e = this,i = [].slice.call(arguments);var n = i[i.length - 1];let r;return "function" == typeof n && (r = n, i.pop()), n = new Promise(function (n) {"export" === t && "function" == typeof i[0] && (i[0] = null), z > 1e9 && (z = 0), e.h[++z] = n, e.worker.postMessage({ task: t, id: z, args: i });}), r ? (n.then(r), this) : n;};}function q(t, e, i, n, r, s) {if (t = t[r], n === i.length - 1) e[r] = s || t;else if (t) if (t.constructor === Array) for (e = e[r] = Array(t.length), r = 0; r < t.length; r++) q(t, e, i, n, r);else e = e[r] || (e[r] = o()), r = i[++n], q(t, e, i, n, r);}function $(t, e, i, n, r, s, o, a) {if (t = t[o]) if (n === e.length - 1) {if (t.constructor === Array) {if (i[n]) {for (e = 0; e < t.length; e++) r.add(s, t[e], !0, !0);return;}t = t.join(" ");}r.add(s, t, a, !0);} else if (t.constructor === Array) for (o = 0; o < t.length; o++) $(t, e, i, n, r, s, o, a);else o = e[++n], $(t, e, i, n, r, s, o, a);}function G(t, e, i, n) {if (!t.length) return t;if (1 === t.length) return t = t[0], t = i || t.length > e ? t.slice(i, i + e) : t, n ? at.call(this, t) : t;let r = [];for (let s, o, a = 0; a < t.length; a++) if ((s = t[a]) && (o = s.length)) {if (i) {if (i >= o) {i -= o;continue;}s = s.slice(i, i + e), o = s.length, i = 0;}if (o > e && (s = s.slice(0, e), o = e), !r.length && o >= e) return n ? at.call(this, s) : s;if (r.push(s), !(e -= o)) break;}return r = r.length > 1 ? [].concat.apply([], r) : r[0], n ? at.call(this, r) : r;}function W(t, e, i, n) {var r = n[0];if (r[0] && r[0].query) return t[e].apply(t, r);if (!("and" !== e && "not" !== e || t.result.length || t.await || r.suggest)) return n.length > 1 && (r = n[n.length - 1]), (n = r.resolve) ? t.await || t.result : t;let s,o,a,l,c,h = [],u = 0,d = 0;for (e = 0; e < n.length; e++) if (r = n[e]) {var p = void 0;if (r.constructor === tt) p = r.await || r.result;else if (r.then || r.constructor === Array) p = r;else {u = r.limit || 0, d = r.offset || 0, a = r.suggest, o = r.resolve, s = ((l = r.highlight || t.highlight) || r.enrich) && o, p = r.queue;let i = r.async || p,n = r.index,f = r.query;if (n ? t.index || (t.index = n) : n = t.index, f || r.tag) {const s = r.field || r.pluck;if (s && (!f || t.query && !l || (t.query = f, t.field = s, t.highlight = l), n = n.index.get(s)), p && (c || t.await)) {let s;c = 1;const o = t.C.length,a = new Promise(function (t) {s = t;});(function (e, n) {a.h = function () {n.index = null, n.resolve = !1;let r = i ? e.searchAsync(n) : e.search(n);return r.then ? r.then(function (e) {return t.C[o] = e = e.result || e, s(e), e;}) : (r = r.result || r, s(r), r);};})(n, Object.assign({}, r)), t.C.push(a), h[e] = a;continue;}r.resolve = !1, r.index = null, p = i ? n.searchAsync(r) : n.search(r), r.resolve = o, r.index = n;} else if (r.and) p = K(r, "and", n);else if (r.or) p = K(r, "or", n);else if (r.not) p = K(r, "not", n);else {if (!r.xor) continue;p = K(r, "xor", n);}}p.await ? (c = 1, p = p.await) : p.then ? (c = 1, p = p.then(function (t) {return t.result || t;})) : p = p.result || p, h[e] = p;}if (c && !t.await && (t.await = new Promise(function (e) {t.return = e;})), c) {const e = Promise.all(h).then(function (n) {for (let r = 0; r < t.C.length; r++) if (t.C[r] === e) {t.C[r] = function () {return i.call(t, n, u, d, s, o, a, l);};break;}et(t);});t.C.push(e);} else {if (!t.await) return i.call(t, h, u, d, s, o, a, l);t.C.push(function () {return i.call(t, h, u, d, s, o, a, l);});}return o ? t.await || t.result : t;}function K(t, e, i) {const n = (t = t[e])[0] || t;return n.index || (n.index = i), i = new tt(n), t.length > 1 && (i = i[e].apply(i, t.slice(1))), i;}function Z(t, e, i, n, r, s, o) {return t.length && (this.result.length && t.push(this.result), t.length < 2 ? this.result = t[0] : (this.result = nt(t, e, i, !1, this.h), i = 0)), r && (this.await = null), r ? this.resolve(e, i, n, o) : this;}function Y(t, e, i, n, r, s, o) {if (!s && !this.result.length) return r ? this.result : this;let a;if (t.length) {if (this.result.length && t.unshift(this.result), t.length < 2) this.result = t[0];else {let n = 0;for (let e, i, r = 0; r < t.length; r++) if ((e = t[r]) && (i = e.length)) n < i && (n = i);else if (!s) {n = 0;break;}n ? (this.result = it(t, n, e, i, s, this.h, r), a = !0) : this.result = [];}} else s || (this.result = t);return r && (this.await = null), r ? this.resolve(e, i, n, o, a) : this;}function X(t, e, i, n, r, s, a) {if (t.length) {if (this.result.length && t.unshift(this.result), t.length < 2) this.result = t[0];else {t: {s = i;var l = this.h;const n = [],a = o();let c = 0;for (let e, i = 0; i < t.length; i++) if (e = t[i]) {c < e.length && (c = e.length);for (let t, i = 0; i < e.length; i++) if (t = e[i]) for (let e, i = 0; i < t.length; i++) e = t[i], a[e] = a[e] ? 2 : 1;}for (let i, o = 0, h = 0; o < c; o++) for (let c, u = 0; u < t.length; u++) if ((c = t[u]) && (i = c[o])) for (let c, d = 0; d < i.length; d++) if (c = i[d], 1 === a[c]) if (s) s--;else if (r) {if (n.push(c), n.length === e) {t = n;break t;}} else {const i = o + (u ? l : 0);if (n[i] || (n[i] = []), n[i].push(c), ++h === e) {t = n;break t;}}t = n;}this.result = t, l = !0;}} else s || (this.result = t);return r && (this.await = null), r ? this.resolve(e, i, n, a, l) : this;}function J(t, e, i, n, r, s, o) {if (!s && !this.result.length) return r ? this.result : this;if (t.length && this.result.length) {t: {s = i;var a = [];t = new Set(t.flat().flat());for (let i, n = 0, o = 0; n < this.result.length; n++) if (i = this.result[n]) for (let l, c = 0; c < i.length; c++) if (l = i[c], !t.has(l)) if (s) s--;else if (r) {if (a.push(l), a.length === e) {t = a;break t;}} else if (a[n] || (a[n] = []), a[n].push(l), ++o === e) {t = a;break t;}t = a;}this.result = t, a = !0;}return r && (this.await = null), r ? this.resolve(e, i, n, o, a) : this;}function Q(t, e, i, n, r) {let s, o, a;"string" == typeof r ? (s = r, r = "") : s = r.template, o = s.indexOf("$1"), a = s.substring(o + 2), o = s.substring(0, o);let l = r && r.boundary,h = !r || !1 !== r.clip,u = r && r.merge && a && o && new RegExp(a + " " + o, "g");var d = 0;if ("object" == typeof (r = r && r.ellipsis)) {var p = r.template;d = p.length - 2, r = r.pattern;}let f, g;"string" != typeof r && (r = !1 === r ? "" : "..."), d && (r = p.replace("$1", r)), p = r.length - d, "object" == typeof l && (f = l.before, 0 === f && (f = -1), g = l.after, 0 === g && (g = -1), l = l.total || 9e5), d = new Map();for (let F, R, L, N = 0; N < e.length; N++) {let V;if (n) V = e, L = n;else {var m = e[N];if (L = m.field, !L) continue;V = m.result;}R = i.get(L), F = R.encoder, "string" != typeof (m = d.get(F)) && (m = F.encode(t), d.set(F, m));for (let t = 0; t < V.length; t++) {var v = V[t].doc;if (!v) continue;if (!(v = c(v, L))) continue;var y = v.trim().split(/\s+/);if (!y.length) continue;v = "";var b = [];let e = [];for (var w = -1, x = -1, S = 0, E = 0; E < y.length; E++) {var C = y[E],k = F.encode(C);let t;if ((k = k.length > 1 ? k.join(" ") : k[0]) && C) {for (var T = C.length, A = (F.split ? C.replace(F.split, "") : C).length - k.length, M = "", _ = 0, P = 0; P < m.length; P++) {var D = m[P];if (D) {var O = D.length;O += A < 0 ? 0 : A, _ && O <= _ || (D = k.indexOf(D)) > -1 && (M = (D ? C.substring(0, D) : "") + o + C.substring(D, D + O) + a + (D + O < T ? C.substring(D + O) : ""), _ = O, t = !0);}}M && (l && (w < 0 && (w = v.length + (v ? 1 : 0)), x = v.length + (v ? 1 : 0) + M.length, S += T, e.push(b.length), b.push({ match: M })), v += (v ? " " : "") + M);}if (t) {if (l && S >= l) break;} else v += (v ? " " : "") + (C = y[E]), l && b.push({ text: C });}if (S = e.length * (s.length - 2), f || g || l && v.length - S > l) if (E = x - w, f > 0 && (E += f), g > 0 && (E += g), E <= (S = l + S - 2 * p)) y = f ? w - (f > 0 ? f : 0) : w - ((S - E) / 2 | 0), b = g ? x + (g > 0 ? g : 0) : y + S, h || (y > 0 && " " !== v.charAt(y) && " " !== v.charAt(y - 1) && (y = v.indexOf(" ", y)) < 0 && (y = 0), b < v.length && " " !== v.charAt(b - 1) && " " !== v.charAt(b) && ((b = v.lastIndexOf(" ", b)) < x ? b = x : ++b)), v = (y ? r : "") + v.substring(y, b) + (b < v.length ? r : "");else {for (x = [], w = {}, S = {}, E = {}, C = {}, k = {}, M = A = T = 0, P = _ = 1;;) {var I = void 0;for (let t, i = 0; i < e.length; i++) {if (t = e[i], M) {if (A !== M) {if (E[i + 1]) continue;if (t += M, w[t]) {T -= p, S[i + 1] = 1, E[i + 1] = 1;continue;}if (t >= b.length - 1) {if (t >= b.length) {E[i + 1] = 1, t >= y.length && (S[i + 1] = 1);continue;}T -= p;}if (v = b[t].text, O = g && k[i]) {if (!(O > 0)) {E[i + 1] = 1;continue;}if (v.length > O) {if (E[i + 1] = 1, !h) continue;v = v.substring(0, O);}(O -= v.length) || (O = -1), k[i] = O;}if (T + v.length + 1 <= l) v = " " + v, x[i] += v;else {if (!h) {E[i + 1] = 1;continue;}(I = l - T - 1) > 0 && (v = " " + v.substring(0, I), x[i] += v), E[i + 1] = 1;}} else {if (E[i]) continue;if (t -= A, w[t]) {T -= p, E[i] = 1, S[i] = 1;continue;}if (t <= 0) {if (t < 0) {E[i] = 1, S[i] = 1;continue;}T -= p;}if (v = b[t].text, O = f && C[i]) {if (!(O > 0)) {E[i] = 1;continue;}if (v.length > O) {if (E[i] = 1, !h) continue;v = v.substring(v.length - O);}(O -= v.length) || (O = -1), C[i] = O;}if (T + v.length + 1 <= l) v += " ", x[i] = v + x[i];else {if (!h) {E[i] = 1;continue;}(I = v.length + 1 - (l - T)) >= 0 && I < v.length && (v = v.substring(I) + " ", x[i] = v + x[i]), E[i] = 1;}}} else {let e;if (v = b[t].match, f && (C[i] = f), g && (k[i] = g), i && T++, t ? !i && p && (T += p) : (S[i] = 1, E[i] = 1), t >= y.length - 1 || t < b.length - 1 && b[t + 1].match ? e = 1 : p && (T += p), T -= s.length - 2, i && !(T + v.length <= l)) {I = _ = P = S[i] = 0;break;}x[i] = v, e && (S[i + 1] = 1, E[i + 1] = 1);}T += v.length, I = w[t] = 1;}if (I) A === M ? M++ : A++;else {if (A === M ? _ = 0 : P = 0, !_ && !P) break;_ ? M = ++A : M++;}}v = "";for (let t, e = 0; e < x.length; e++) t = (S[e] ? e ? " " : "" : (e && !r ? " " : "") + r) + x[e], v += t;r && !S[x.length] && (v += r);}u && (v = v.replace(u, " ")), V[t].highlight = v;}if (n) break;}return e;}function tt(t, e) {if (!this || this.constructor !== tt) return new tt(t, e);let i,n,r,s,o,a,l = 0;if (t && t.index) {const i = t;if (e = i.index, l = i.boost || 0, n = i.query) {r = i.field || i.pluck, s = i.highlight;const n = i.resolve;t = i.async || i.queue, i.resolve = !1, i.index = null, t = t ? e.searchAsync(i) : e.search(i), i.resolve = n, i.index = e, t = t.result || t;} else t = [];}if (t && t.then) {const e = this;i = [t = t.then(function (t) {e.C[0] = e.result = t.result || t, et(e);})], t = [], o = new Promise(function (t) {a = t;});}this.index = e || null, this.result = t || [], this.h = l, this.C = i || [], this.await = o || null, this.return = a || null, this.highlight = s || null, this.query = n || "", this.field = r || "";}function et(t, e) {let i = t.result;var n = t.await;t.await = null;for (let e, r = 0; r < t.C.length; r++) if (e = t.C[r]) if ("function" == typeof e) i = e(), t.C[r] = i = i.result || i, r--;else if (e.h) i = e.h(), t.C[r] = i = i.result || i, r--;else if (e.then) return t.await = n;return n = t.return, t.C = [], t.return = null, e || n(i), i;}function it(t, e, i, n, r, s, a) {const l = t.length;let c,h,u = [];c = o();for (let o, d, p, f, g = 0; g < e; g++) for (let e = 0; e < l; e++) if (p = t[e], g < p.length && (o = p[g])) for (let t = 0; t < o.length; t++) {if (d = o[t], (h = c[d]) ? c[d]++ : (h = 0, c[d] = 1), f = u[h] || (u[h] = []), !a) {let t = g + (e || !r ? 0 : s || 0);f = f[t] || (f[t] = []);}if (f.push(d), a && i && h === l - 1 && f.length - n === i) return n ? f.slice(n) : f;}if (t = u.length) if (r) u = u.length > 1 ? nt(u, i, n, a, s) : (u = u[0]) && i && u.length > i || n ? u.slice(n, i + n) : u;else {if (t < l) return [];if (u = u[t - 1], i || n) if (a) (u.length > i || n) && (u = u.slice(n, i + n));else {r = [];for (let t, e = 0; e < u.length; e++) if (t = u[e]) if (n && t.length > n) n -= t.length;else if ((i && t.length > i || n) && (t = t.slice(n, i + n), i -= t.length, n && (n -= t.length)), r.push(t), !i) break;u = r;}}return u;}function nt(t, e, i, n, r) {const s = [],a = o();let l;var c = t.length;let h;if (n) {for (r = c - 1; r >= 0; r--) if (h = (n = t[r]) && n.length) for (c = 0; c < h; c++) if (l = n[c], !a[l]) if (a[l] = 1, i) i--;else if (s.push(l), s.length === e) return s;} else for (let o, u = c - 1, d = 0; u >= 0; u--) {o = t[u];for (let t = 0; t < o.length; t++) if (h = (n = o[t]) && n.length) for (let o = 0; o < h; o++) if (l = n[o], !a[l]) if (a[l] = 1, i) i--;else {let i = (t + (u < c - 1 && r || 0)) / (u + 1) | 0;if ((s[i] || (s[i] = [])).push(l), ++d === e) return s;}}return s;}function rt(t, e, i, n, r) {const s = o(),a = [];for (let t, i = 0; i < e.length; i++) {t = e[i];for (let e = 0; e < t.length; e++) s[t[e]] = 1;}if (r) {for (let e, r = 0; r < t.length; r++) if (e = t[r], s[e]) if (n) n--;else if (a.push(e), s[e] = 0, i && 0 === --i) break;} else for (let i, n, r = 0; r < t.result.length; r++) for (i = t.result[r], e = 0; e < i.length; e++) n = i[e], s[n] && ((a[r] || (a[r] = [])).push(n), s[n] = 0);return a;}function st(t) {const e = [],i = o(),n = o();for (let r, s, o, a, l, c, h, u = 0; u < t.length; u++) {r = t[u], s = r.field, o = r.result;for (let t = 0; t < o.length; t++) l = o[t], "object" != typeof l ? l = { id: a = l } : a = l.id, (c = i[a]) ? c.push(s) : (l.field = i[a] = [s], e.push(l)), (h = l.highlight) && (c = n[a], c || (n[a] = c = {}, l.highlight = c), c[s] = h);}return e;}function ot(t, e, i, n, r) {return (t = this.tag.get(t)) && (t = t.get(e)) ? ((e = t.length - n) > 0 && ((i && e > i || n) && (t = t.slice(n, n + i)), r && (t = at.call(this, t))), t) : [];}function at(t) {if (!this || !this.store) return t;if (this.db) return this.index.get(this.field[0]).db.enrich(t);const e = Array(t.length);for (let i, n = 0; n < t.length; n++) i = t[n], e[n] = { id: i, doc: this.store.get(i) };return e;}function lt(t) {if (!this || this.constructor !== lt) return new lt(t);const e = t.document || t.doc || t;let i, n;if (this.B = [], this.field = [], this.D = [], this.key = (i = e.key || e.id) && ht(i, this.D) || "id", (n = t.keystore || 0) && (this.keystore = n), this.fastupdate = !!t.fastupdate, this.reg = !this.fastupdate || t.worker || t.db ? n ? new _(n) : new Set() : n ? new M(n) : new Map(), this.h = (i = e.store || null) && i && !0 !== i && [], this.store = i ? n ? new M(n) : new Map() : null, this.cache = (i = t.cache || null) && new y(i), t.cache = !1, this.worker = t.worker || !1, this.priority = t.priority || 4, this.index = ct.call(this, t, e), this.tag = null, (i = e.tag) && ("string" == typeof i && (i = [i]), i.length)) {this.tag = new Map(), this.A = [], this.F = [];for (let t, e, n = 0; n < i.length; n++) {if (t = i[n], e = t.field || t, !e) throw Error("The tag field from the document descriptor is undefined.");t.custom ? this.A[n] = t.custom : (this.A[n] = ht(e, this.D), t.filter && ("string" == typeof this.A[n] && (this.A[n] = new String(this.A[n])), this.A[n].G = t.filter)), this.F[n] = e, this.tag.set(e, new Map());}}if (this.worker) {this.fastupdate = !1, t = [];for (const e of this.index.values()) e.then && t.push(e);if (t.length) {const e = this;return Promise.all(t).then(function (t) {let i = 0;for (const n of e.index.entries()) {const r = n[0];let s = n[1];s.then && (s = t[i], e.index.set(r, s), i++);}return e;});}} else t.db && (this.fastupdate = !1, this.mount(t.db));}function ct(t, e) {const i = new Map();let n = e.index || e.field || e;a(n) && (n = [n]);for (let e, s, o = 0; o < n.length; o++) {if (e = n[o], a(e) || (s = e, e = e.field), s = l(s) ? Object.assign({}, t, s) : t, this.worker) {var r = void 0;r = new U(s, r = (r = s.encoder) && r.encode ? r : new g("string" == typeof r ? k[r] : r || {})), i.set(e, r);}this.worker || i.set(e, new At(s, this.reg)), s.custom ? this.B[o] = s.custom : (this.B[o] = ht(e, this.D), s.filter && ("string" == typeof this.B[o] && (this.B[o] = new String(this.B[o])), this.B[o].G = s.filter)), this.field[o] = e;}if (this.h) {a(t = e.store) && (t = [t]);for (let e, i, n = 0; n < t.length; n++) e = t[n], i = e.field || e, e.custom ? (this.h[n] = e.custom, e.custom.O = i) : (this.h[n] = ht(i, this.D), e.filter && ("string" == typeof this.h[n] && (this.h[n] = new String(this.h[n])), this.h[n].G = e.filter));}return i;}function ht(t, e) {const i = t.split(":");let n = 0;for (let r = 0; r < i.length; r++) "]" === (t = i[r])[t.length - 1] && (t = t.substring(0, t.length - 2)) && (e[n] = !0), t && (i[n++] = t);return n < i.length && (i.length = n), n > 1 ? i : i[0];}function ut(t, e = 0) {let i = [],n = [];e && (e = 25e4 / e * 5e3 | 0);for (const r of t.entries()) n.push(r), n.length === e && (i.push(n), n = []);return n.length && i.push(n), i;}function dt(t, e) {e || (e = new Map());for (let i, n = 0; n < t.length; n++) i = t[n], e.set(i[0], i[1]);return e;}function pt(t, e = 0) {let i = [],n = [];e && (e = 25e4 / e * 1e3 | 0);for (const r of t.entries()) n.push([r[0], ut(r[1])[0] || []]), n.length === e && (i.push(n), n = []);return n.length && i.push(n), i;}function ft(t, e) {e || (e = new Map());for (let i, n, r = 0; r < t.length; r++) i = t[r], n = e.get(i[0]), e.set(i[0], dt(i[1], n));return e;}function gt(t) {let e = [],i = [];for (const n of t.keys()) i.push(n), 25e4 === i.length && (e.push(i), i = []);return i.length && e.push(i), e;}function mt(t, e) {e || (e = new Set());for (let i = 0; i < t.length; i++) e.add(t[i]);return e;}function vt(t, e, i, n, r, s, o = 0) {const a = n && n.constructor === Array;var l = a ? n.shift() : n;if (!l) return this.export(t, e, r, s + 1);if ((l = t((e ? e + "." : "") + (o + 1) + "." + i, JSON.stringify(l))) && l.then) {const c = this;return l.then(function () {return vt.call(c, t, e, i, a ? n : null, r, s, o + 1);});}return vt.call(this, t, e, i, a ? n : null, r, s, o + 1);}function yt(t, e) {let i = "";for (const n of t.entries()) {t = n[0];const r = n[1];let s = "";for (let t, i = 0; i < r.length; i++) {t = r[i] || [""];let n = "";for (let i = 0; i < t.length; i++) n += (n ? "," : "") + ("string" === e ? '"' + t[i] + '"' : t[i]);n = "[" + n + "]", s += (s ? "," : "") + n;}s = '["' + t + '",[' + s + "]]", i += (i ? "," : "") + s;}return i;}function bt(t, e) {let i = 0;var n = void 0 === e;if (t.constructor === Array) {for (let r, s, o, a = 0; a < t.length; a++) if ((r = t[a]) && r.length) {if (n) return 1;if (s = r.indexOf(e), s >= 0) {if (r.length > 1) return r.splice(s, 1), 1;if (delete t[a], i) return 1;o = 1;} else {if (o) return 1;i++;}}} else for (let r of t.entries()) n = r[0], bt(r[1], e) ? i++ : t.delete(n);return i;}H("add"), H("append"), H("search"), H("update"), H("remove"), H("clear"), H("export"), H("import"), U.prototype.searchCache = v, V(U.prototype), lt.prototype.add = function (t, e, i) {if (l(t) && (t = c(e = t, this.key)), e && (t || 0 === t)) {if (!i && this.reg.has(t)) return this.update(t, e);for (let s, o = 0; o < this.field.length; o++) {s = this.B[o];var n = this.index.get(this.field[o]);if ("function" == typeof s) {var r = s(e);r && n.add(t, r, i, !0);} else (!(r = s.G) || r(e)) && (s.constructor === String ? s = ["" + s] : a(s) && (s = [s]), $(e, s, this.D, 0, n, t, s[0], i));}if (this.tag) for (n = 0; n < this.A.length; n++) {var s = this.A[n];r = this.tag.get(this.F[n]);let l = o();if ("function" == typeof s) {if (!(s = s(e))) continue;} else {var h = s.G;if (h && !h(e)) continue;s.constructor === String && (s = "" + s), s = c(e, s);}if (r && s) {a(s) && (s = [s]);for (let e, n, o = 0; o < s.length; o++) if (e = s[o], !l[e] && (l[e] = 1, (h = r.get(e)) ? n = h : r.set(e, n = []), !i || !n.includes(t))) {if (n.length === 2 ** 31 - 1) {if (h = new A(n), this.fastupdate) for (let t of this.reg.values()) t.includes(n) && (t[t.indexOf(n)] = h);r.set(e, n = h);}n.push(t), this.fastupdate && ((h = this.reg.get(t)) ? h.push(n) : this.reg.set(t, [n]));}}}if (this.store && (!i || !this.store.has(t))) {let n;if (this.h) {n = o();for (let t, r = 0; r < this.h.length; r++) {if (t = this.h[r], (i = t.G) && !i(e)) continue;let s;if ("function" == typeof t) {if (s = t(e), !s) continue;t = [t.O];} else if (a(t) || t.constructor === String) {n[t] = e[t];continue;}q(e, n, t, 0, t[0], s);}}this.store.set(t, n || e);}this.worker && (this.fastupdate || this.reg.add(t));}return this;}, tt.prototype.or = function () {return W(this, "or", Z, arguments);}, tt.prototype.and = function () {return W(this, "and", Y, arguments);}, tt.prototype.xor = function () {return W(this, "xor", X, arguments);}, tt.prototype.not = function () {return W(this, "not", J, arguments);}, (n = tt.prototype).limit = function (t) {if (this.await) {const e = this;this.C.push(function () {return e.limit(t).result;});} else if (this.result.length) {const e = [];for (let i, n = 0; n < this.result.length; n++) if (i = this.result[n]) {if (!(i.length <= t)) {e[n] = i.slice(0, t);break;}if (e[n] = i, !(t -= i.length)) break;}this.result = e;}return this;}, n.offset = function (t) {if (this.await) {const e = this;this.C.push(function () {return e.offset(t).result;});} else if (this.result.length) {const e = [];for (let i, n = 0; n < this.result.length; n++) (i = this.result[n]) && (i.length <= t ? t -= i.length : (e[n] = i.slice(t), t = 0));this.result = e;}return this;}, n.boost = function (t) {if (this.await) {const e = this;this.C.push(function () {return e.boost(t).result;});} else this.h += t;return this;}, n.resolve = function (t, e, i, n, r) {let s = this.await ? et(this, !0) : this.result;if (s.then) {const o = this;return s.then(function () {return o.resolve(t, e, i, n, r);});}return s.length && ("object" == typeof t ? (n = t.highlight || this.highlight, i = !!n || t.enrich, e = t.offset, t = t.limit) : (n = n || this.highlight, i = !!n || i), s = r ? i ? at.call(this.index, s) : s : G.call(this.index, s, t || 100, e, i)), this.finalize(s, n);}, n.finalize = function (t, e) {if (t.then) {const i = this;return t.then(function (t) {return i.finalize(t, e);});}e && t.length && this.query && (t = Q(this.query, t, this.index.index, this.field, e));const i = this.return;return this.highlight = this.index = this.result = this.C = this.await = this.return = null, this.query = this.field = "", i && i(t), t;}, o(), lt.prototype.search = function (t, e, i, n) {i || (!e && l(t) ? (i = t, t = "") : l(e) && (i = e, e = 0));let r = [];var o = [];let c,h,u,d,p,f,g,m,v = 0,y = !0;if (i) {i.constructor === Array && (i = { index: i }), t = i.query || t, c = i.pluck, h = i.merge, d = i.boost, f = c || i.field || (f = i.index) && (f.index ? null : f);var b = this.tag && i.tag;u = i.suggest, y = !1 !== i.resolve, p = i.cache, g = y && this.store && i.highlight;var w = !!g || y && this.store && i.enrich;e = i.limit || e;var x = i.offset || 0;if (e || (e = y ? 100 : 0), b && (!this.db || !n)) {b.constructor !== Array && (b = [b]);var S = [];for (let t, e = 0; e < b.length; e++) if (t = b[e], t.field && t.tag) {var E = t.tag;if (E.constructor === Array) for (var C = 0; C < E.length; C++) S.push(t.field, E[C]);else S.push(t.field, E);} else {E = Object.keys(t);for (let e, i, n = 0; n < E.length; n++) if (e = E[n], i = t[e], i.constructor === Array) for (C = 0; C < i.length; C++) S.push(e, i[C]);else S.push(e, i);}if (b = S, !t) {if (o = [], S.length) for (b = 0; b < S.length; b += 2) {if (this.db) {if (!(n = this.index.get(S[b]))) continue;o.push(n = n.db.tag(S[b + 1], e, x, w));} else n = ot.call(this, S[b], S[b + 1], e, x, w);r.push(y ? { field: S[b], tag: S[b + 1], result: n } : [n]);}if (o.length) {const t = this;return Promise.all(o).then(function (e) {for (let t = 0; t < e.length; t++) y ? r[t].result = e[t] : r[t] = e[t];return y ? r : new tt(r.length > 1 ? it(r, 1, 0, 0, u, d) : r[0], t);});}return y ? r : new tt(r.length > 1 ? it(r, 1, 0, 0, u, d) : r[0], this);}}y || c || !(f = f || this.field) || (a(f) ? c = f : (f.constructor === Array && 1 === f.length && (f = f[0]), c = f.field || f.index)), f && f.constructor !== Array && (f = [f]);}f || (f = this.field), S = (this.worker || this.db) && !n && [];for (let l, c, h, d = 0; d < f.length; d++) {if (c = f[d], this.db && this.tag && !this.B[d]) continue;let T;if (a(c) || (T = c, c = T.field, t = T.query || t, e = s(T.limit, e), x = s(T.offset, x), u = s(T.suggest, u), g = y && this.store && s(T.highlight, g), w = !!g || y && this.store && s(T.enrich, w), p = s(T.cache, p)), n) l = n[d];else {C = (E = T || i || {}).enrich;var k = this.index.get(c);if (b && (this.db && (E.tag = b, E.field = f, m = k.db.support_tag_search), !m && C && (E.enrich = !1), m || (E.limit = 0, E.offset = 0)), l = p ? k.searchCache(t, b && !m ? 0 : e, E) : k.search(t, b && !m ? 0 : e, E), b && !m && (E.limit = e, E.offset = x), C && (E.enrich = C), S) {S[d] = l;continue;}}if (h = (l = l.result || l) && l.length, b && h) {if (E = [], C = 0, this.db && n) {if (!m) for (k = f.length; k < n.length; k++) {let t = n[k];if (t && t.length) C++, E.push(t);else if (!u) return y ? r : new tt(r, this);}} else for (let t, e, i = 0; i < b.length; i += 2) {if (t = this.tag.get(b[i]), !t) {if (u) continue;return y ? r : new tt(r, this);}if (e = (t = t && t.get(b[i + 1])) && t.length) C++, E.push(t);else if (!u) return y ? r : new tt(r, this);}if (C) {if (l = rt(l, E, e, x, y), h = l.length, !h && !u) return y ? l : new tt(l, this);C--;}}if (h) o[v] = c, r.push(l), v++;else if (1 === f.length) return y ? r : new tt(r, this);}if (S) {if (this.db && b && b.length && !m) for (w = 0; w < b.length; w += 2) {if (!(o = this.index.get(b[w]))) {if (u) continue;return y ? r : new tt(r, this);}S.push(o.db.tag(b[w + 1], e, x, !1));}const n = this;return Promise.all(S).then(function (r) {return i && (i.resolve = y), r.length && (r = n.search(t, e, i, r)), r;});}if (!v) return y ? r : new tt(r, this);if (c && (!w || !this.store)) return r = r[0], y ? r : new tt(r, this);for (S = [], x = 0; x < o.length; x++) {if (b = r[x], w && b.length && void 0 === b[0].doc && (this.db ? S.push(b = this.index.get(this.field[0]).db.enrich(b)) : b = at.call(this, b)), c) return y ? g ? Q(t, b, this.index, c, g) : b : new tt(b, this);r[x] = { field: o[x], result: b };}if (w && this.db && S.length) {const e = this;return Promise.all(S).then(function (i) {for (let t = 0; t < i.length; t++) r[t].result = i[t];return g && (r = Q(t, r, e.index, c, g)), h ? st(r) : r;});}return g && (r = Q(t, r, this.index, c, g)), h ? st(r) : r;}, (n = lt.prototype).mount = function (t) {let e = this.field;if (this.tag) for (let t, n = 0; n < this.F.length; n++) {t = this.F[n];var i = void 0;this.index.set(t, i = new At({}, this.reg)), e === this.field && (e = e.slice(0)), e.push(t), i.tag = this.tag.get(t);}i = [];const n = { db: t.db, type: t.type, fastupdate: t.fastupdate };for (let r, s, o = 0; o < e.length; o++) {n.field = s = e[o], r = this.index.get(s);const a = new t.constructor(t.id, n);a.id = t.id, i[o] = a.mount(r), r.document = !0, o ? r.bypass = !0 : r.store = this.store;}const r = this;return this.db = Promise.all(i).then(function () {r.db = !0;});}, n.commit = async function () {const t = [];for (const e of this.index.values()) t.push(e.commit());await Promise.all(t), this.reg.clear();}, n.destroy = function () {const t = [];for (const e of this.index.values()) t.push(e.destroy());return Promise.all(t);}, n.append = function (t, e) {return this.add(t, e, !0);}, n.update = function (t, e) {return this.remove(t).add(t, e);}, n.remove = function (t) {for (var e of (l(t) && (t = c(t, this.key)), this.index.values())) e.remove(t, !0);if (this.reg.has(t)) {if (this.tag && !this.fastupdate) for (let i of this.tag.values()) for (let n of i) {e = n[0];const r = n[1],s = r.indexOf(t);s > -1 && (r.length > 1 ? r.splice(s, 1) : i.delete(e));}this.store && this.store.delete(t), this.reg.delete(t);}return this.cache && this.cache.remove(t), this;}, n.clear = function () {const t = [];for (const e of this.index.values()) {const i = e.clear();i.then && t.push(i);}if (this.tag) for (const t of this.tag.values()) t.clear();return this.store && this.store.clear(), this.cache && this.cache.clear(), t.length ? Promise.all(t) : this;}, n.contain = function (t) {return this.db ? this.index.get(this.field[0]).db.has(t) : this.reg.has(t);}, n.cleanup = function () {for (const t of this.index.values()) t.cleanup();return this;}, n.get = function (t) {return this.db ? this.index.get(this.field[0]).db.enrich(t).then(function (t) {return t[0] && t[0].doc || null;}) : this.store.get(t) || null;}, n.set = function (t, e) {return "object" == typeof t && (t = c(e = t, this.key)), this.store.set(t, e), this;}, n.searchCache = v, n.export = function (t, e, i = 0, n = 0) {if (i < this.field.length) {const r = this.field[i];if ((e = this.index.get(r).export(t, r, i, n = 1)) && e.then) {const n = this;return e.then(function () {return n.export(t, r, i + 1);});}return this.export(t, r, i + 1);}let r, s;switch (n) {case 0:r = "reg", s = gt(this.reg), e = null;break;case 1:r = "tag", s = this.tag && pt(this.tag, this.reg.size), e = null;break;case 2:r = "doc", s = this.store && ut(this.store), e = null;break;default:return;}return vt.call(this, t, e, r, s || null, i, n);}, n.import = function (t, e) {var i = t.split(".");"json" === i[i.length - 1] && i.pop();const n = i.length > 2 ? i[0] : "";if (i = i.length > 2 ? i[2] : i[1], this.worker && n) return this.index.get(n).import(t);if (e) {if ("string" == typeof e && (e = JSON.parse(e)), n) return this.index.get(n).import(i, e);switch (i) {case "reg":this.fastupdate = !1, this.reg = mt(e, this.reg);for (let t, e = 0; e < this.field.length; e++) t = this.index.get(this.field[e]), t.fastupdate = !1, t.reg = this.reg;if (this.worker) {e = [];for (const i of this.index.values()) e.push(i.import(t));return Promise.all(e);}break;case "tag":this.tag = ft(e, this.tag);break;case "doc":this.store = dt(e, this.store);}}}, V(lt.prototype), At.prototype.remove = function (t, e) {const i = this.reg.size && (this.fastupdate ? this.reg.get(t) : this.reg.has(t));if (i) {if (this.fastupdate) {for (let e, n, r = 0; r < i.length; r++) if ((e = i[r]) && (n = e.length)) if (e[n - 1] === t) e.pop();else {const i = e.indexOf(t);i >= 0 && e.splice(i, 1);}} else bt(this.map, t), this.depth && bt(this.ctx, t);e || this.reg.delete(t);}return this.db && (this.commit_task.push({ del: t }), this.M && Mt(this)), this.cache && this.cache.remove(t), this;};const wt = { memory: { resolution: 1 }, performance: { resolution: 3, fastupdate: !0, context: { depth: 1, resolution: 1 } }, match: { tokenize: "forward" }, score: { resolution: 9, context: { depth: 2, resolution: 3 } } };function xt(t, e, i, n, r, s, a) {let l, c;if (!(l = e[i]) || a && !l[a]) {if (a ? ((e = l || (e[i] = o()))[a] = 1, c = t.ctx, (l = c.get(a)) ? c = l : c.set(a, c = t.keystore ? new M(t.keystore) : new Map())) : (c = t.map, e[i] = 1), (l = c.get(i)) ? c = l : c.set(i, c = l = []), s) for (let i, s = 0; s < l.length; s++) if ((i = l[s]) && i.includes(r)) {if (s <= n) return;i.splice(i.indexOf(r), 1), t.fastupdate && (e = t.reg.get(r)) && e.splice(e.indexOf(i), 1);break;}if (c = c[n] || (c[n] = []), c.push(r), c.length === 2 ** 31 - 1) {if (e = new A(c), t.fastupdate) for (let i of t.reg.values()) i.includes(c) && (i[i.indexOf(c)] = e);l[n] = c = e;}t.fastupdate && ((n = t.reg.get(r)) ? n.push(c) : t.reg.set(r, [c]));}}function St(t, e, i, n, r) {return i && t > 1 ? e + (n || 0) <= t ? i + (r || 0) : (t - 1) / (e + (n || 0)) * (i + (r || 0)) + 1 | 0 : 0;}function Et(t, e, i, n, r, s, o) {let a = t.length,l = t;if (a > 1) l = it(t, e, i, n, r, s, o);else if (1 === a) return o ? G.call(null, t[0], i, n) : new tt(t[0], this);return o ? l : new tt(l, this);}function Ct(t, e, i, n, r, s, o) {return t = Tt(this, t, e, i, n, r, s, o), this.db ? t.then(function (t) {return r ? t || [] : new tt(t, this);}) : t && t.length ? r ? G.call(this, t, i, n) : new tt(t, this) : r ? [] : new tt([], this);}function kt(t, e, i, n) {let r = [];if (t && t.length) {if (t.length <= n) return void e.push(t);for (let e, i = 0; i < n; i++) (e = t[i]) && (r[i] = e);if (r.length) return void e.push(r);}if (!i) return r;}function Tt(t, e, i, n, r, s, o, a) {let l;return i && (l = t.bidirectional && e > i) && (l = i, i = e, e = l), t.db ? t.db.get(e, i, n, r, s, o, a) : t = i ? (t = t.ctx.get(i)) && t.get(e) : t.map.get(e);}function At(t, e) {if (!this || this.constructor !== At) return new At(t);if (t) {var i = a(t) ? t : t.preset;i && (t = Object.assign({}, wt[i], t));} else t = {};const n = !0 === (i = t.context) ? { depth: 1 } : i || {},r = a(t.encoder) ? k[t.encoder] : t.encode || t.encoder || {};this.encoder = r.encode ? r : "object" == typeof r ? new g(r) : { encode: r }, this.resolution = t.resolution || 9, this.tokenize = i = (i = t.tokenize) && "default" !== i && "exact" !== i && i || "strict", this.depth = "strict" === i && n.depth || 0, this.bidirectional = !1 !== n.bidirectional, this.fastupdate = !!t.fastupdate, this.score = t.score || null, (i = t.keystore || 0) && (this.keystore = i), this.map = i ? new M(i) : new Map(), this.ctx = i ? new M(i) : new Map(), this.reg = e || (this.fastupdate ? i ? new M(i) : new Map() : i ? new _(i) : new Set()), this.N = n.resolution || 3, this.rtl = r.rtl || t.rtl || !1, this.cache = (i = t.cache || null) && new y(i), this.resolve = !1 !== t.resolve, (i = t.db) && (this.db = this.mount(i)), this.M = !1 !== t.commit, this.commit_task = [], this.commit_timer = null, this.priority = t.priority || 4;}function Mt(t) {t.commit_timer || (t.commit_timer = setTimeout(function () {t.commit_timer = null, t.db.commit(t);}, 1));}At.prototype.add = function (t, e, i, n) {if (e && (t || 0 === t)) {if (!n && !i && this.reg.has(t)) return this.update(t, e);n = this.depth;const h = (e = this.encoder.encode(e, !n)).length;if (h) {const u = o(),d = o(),p = this.resolution;for (let o = 0; o < h; o++) {let f = e[this.rtl ? h - 1 - o : o];var r = f.length;if (r && (n || !d[f])) {var s = this.score ? this.score(e, f, o, null, 0) : St(p, h, o),a = "";switch (this.tokenize) {case "tolerant":if (xt(this, d, f, s, t, i), r > 2) {for (let e, n, o, l, c = 1; c < r - 1; c++) e = f.charAt(c), n = f.charAt(c + 1), o = f.substring(0, c) + n, l = f.substring(c + 2), xt(this, d, a = o + e + l, s, t, i), xt(this, d, a = o + l, s, t, i);xt(this, d, f.substring(0, f.length - 1), s, t, i);}break;case "full":if (r > 2) {for (let n, c = 0; c < r; c++) for (s = r; s > c; s--) {a = f.substring(c, s), n = this.rtl ? r - 1 - c : c;var l = this.score ? this.score(e, f, o, a, n) : St(p, h, o, r, n);xt(this, d, a, l, t, i);}break;}case "bidirectional":case "reverse":if (r > 1) {for (l = r - 1; l > 0; l--) {a = f[this.rtl ? r - 1 - l : l] + a;var c = this.score ? this.score(e, f, o, a, l) : St(p, h, o, r, l);xt(this, d, a, c, t, i);}a = "";}case "forward":if (r > 1) {for (l = 0; l < r; l++) xt(this, d, a += f[this.rtl ? r - 1 - l : l], s, t, i);break;}default:if (xt(this, d, f, s, t, i), n && h > 1 && o < h - 1) for (r = this.N, a = f, s = Math.min(n + 1, this.rtl ? o + 1 : h - o), l = 1; l < s; l++) f = e[this.rtl ? h - 1 - o - l : o + l], xt(this, u, (c = this.bidirectional && f > a) ? a : f, this.score ? this.score(e, a, o, f, l - 1) : St(r + (h / 2 > r ? 0 : 1), h, o, s - 1, l - 1), t, i, c ? f : a);}}}this.fastupdate || this.reg.add(t);}}return this.db && (this.commit_task.push(i ? { ins: t } : { del: t }), this.M && Mt(this)), this;}, At.prototype.search = function (t, e, i) {if (i || (e || "object" != typeof t ? "object" == typeof e && (i = e, e = 0) : (i = t, t = "")), i && i.cache) return i.cache = !1, t = this.searchCache(t, e, i), i.cache = !0, t;let n,r,s,a,l,c,h,u,d = [],p = 0;i && (t = i.query || t, e = i.limit || e, p = i.offset || 0, r = i.context, s = i.suggest, u = (a = i.resolve) && i.enrich, c = i.boost, h = i.resolution, l = this.db && i.tag), void 0 === a && (a = this.resolve), r = this.depth && !1 !== r;let f = this.encoder.encode(t, !r);if (n = f.length, e = e || (a ? 100 : 0), 1 === n) return Ct.call(this, f[0], "", e, p, a, u, l);if (2 === n && r && !s) return Ct.call(this, f[1], f[0], e, p, a, u, l);let g,m = o(),v = 0;if (r && (g = f[0], v = 1), h || 0 === h || (h = g ? this.N : this.resolution), this.db) {if (this.db.search && !1 !== (i = this.db.search(this, f, e, p, s, a, u, l))) return i;const t = this;return async function () {for (let e, i; v < n; v++) {if ((i = f[v]) && !m[i]) {if (m[i] = 1, e = await Tt(t, i, g, 0, 0, !1, !1), e = kt(e, d, s, h)) {d = e;break;}g && (s && e && d.length || (g = i));}s && g && v === n - 1 && !d.length && (h = t.resolution, g = "", v = -1, m = o());}return Et(d, h, e, p, s, c, a);}();}for (let t, e; v < n; v++) {if ((e = f[v]) && !m[e]) {if (m[e] = 1, t = Tt(this, e, g, 0, 0, !1, !1), t = kt(t, d, s, h)) {d = t;break;}g && (s && t && d.length || (g = e));}s && g && v === n - 1 && !d.length && (h = this.resolution, g = "", v = -1, m = o());}return Et(d, h, e, p, s, c, a);}, (n = At.prototype).mount = function (t) {return this.commit_timer && (clearTimeout(this.commit_timer), this.commit_timer = null), t.mount(this);}, n.commit = function () {return this.commit_timer && (clearTimeout(this.commit_timer), this.commit_timer = null), this.db.commit(this);}, n.destroy = function () {return this.commit_timer && (clearTimeout(this.commit_timer), this.commit_timer = null), this.db.destroy();}, n.clear = function () {return this.map.clear(), this.ctx.clear(), this.reg.clear(), this.cache && this.cache.clear(), this.db ? (this.commit_timer && clearTimeout(this.commit_timer), this.commit_timer = null, this.commit_task = [], this.db.clear()) : this;}, n.append = function (t, e) {return this.add(t, e, !0);}, n.contain = function (t) {return this.db ? this.db.has(t) : this.reg.has(t);}, n.update = function (t, e) {const i = this,n = this.remove(t);return n && n.then ? n.then(() => i.add(t, e)) : this.add(t, e);}, n.cleanup = function () {return this.fastupdate ? (bt(this.map), this.depth && bt(this.ctx), this) : this;}, n.searchCache = v, n.export = function (t, e, i = 0, n = 0) {let r, s;switch (n) {case 0:r = "reg", s = gt(this.reg);break;case 1:r = "cfg", s = null;break;case 2:r = "map", s = ut(this.map, this.reg.size);break;case 3:r = "ctx", s = pt(this.ctx, this.reg.size);break;default:return;}return vt.call(this, t, e, r, s, i, n);}, n.import = function (t, e) {if (e) switch ("string" == typeof e && (e = JSON.parse(e)), t = t.split("."), "json" === t[t.length - 1] && t.pop(), 3 === t.length && t.shift(), t = t.length > 1 ? t[1] : t[0], t) {case "reg":this.fastupdate = !1, this.reg = mt(e, this.reg);break;case "map":this.map = dt(e, this.map);break;case "ctx":this.ctx = ft(e, this.ctx);}}, n.serialize = function (t = !0) {let e = "",i = "",n = "";if (this.reg.size) {let t;for (var r of this.reg.keys()) t || (t = typeof r), e += (e ? "," : "") + ("string" === t ? '"' + r + '"' : r);e = "index.reg=new Set([" + e + "]);", i = yt(this.map, t), i = "index.map=new Map([" + i + "]);";for (const e of this.ctx.entries()) {r = e[0];let i = yt(e[1], t);i = "new Map([" + i + "])", i = '["' + r + '",' + i + "]", n += (n ? "," : "") + i;}n = "index.ctx=new Map([" + n + "]);";}return t ? "function inject(index){" + e + i + n + "}" : e + i + n;}, V(At.prototype);const _t = "undefined" != typeof window && (window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB),Pt = ["map", "ctx", "tag", "reg", "cfg"],Dt = o();function Ot(t, e, i) {const n = t.value;let r,s = 0;for (let t, o = 0; o < n.length; o++) {if (t = i ? n : n[o]) {for (let i, s, a = 0; a < e.length; a++) if (s = e[a], i = t.indexOf(s), i >= 0) {if (r = 1, !(t.length > 1)) {n[o] = [];break;}t.splice(i, 1);}s += t.length;}if (i) break;}s ? r && t.update(n) : t.delete(), t.continue();}function It(t, e) {return new Promise((i, n) => {t.onsuccess = t.oncomplete = function () {e && e(this.result), e = null, i(this.result);}, t.onerror = t.onblocked = n, t = null;});}(n = function t(e, i = {}) {if (!this || this.constructor !== t) return new t(e, i);"object" == typeof e && (i = e, e = e.name), e || console.info("Default storage space was used, because a name was not passed."), this.id = "flexsearch" + (e ? ":" + e.toLowerCase().replace(/[^a-z0-9_\-]/g, "") : ""), this.field = i.field ? i.field.toLowerCase().replace(/[^a-z0-9_\-]/g, "") : "", this.type = i.type, this.fastupdate = this.support_tag_search = !1, this.db = null, this.h = {};}.prototype).mount = function (t) {return t.index ? t.mount(this) : (t.db = this, this.open());}, n.open = function () {if (this.db) return this.db;let t = this;navigator.storage && navigator.storage.persist && navigator.storage.persist(), Dt[t.id] || (Dt[t.id] = []), Dt[t.id].push(t.field);const e = _t.open(t.id, 1);return e.onupgradeneeded = function () {const e = t.db = this.result;for (let i, n = 0; n < Pt.length; n++) {i = Pt[n];for (let n, r = 0; r < Dt[t.id].length; r++) n = Dt[t.id][r], e.objectStoreNames.contains(i + ("reg" !== i && n ? ":" + n : "")) || e.createObjectStore(i + ("reg" !== i && n ? ":" + n : ""));}}, t.db = It(e, function (e) {t.db = e, t.db.onversionchange = function () {t.close();};});}, n.close = function () {this.db && this.db.close(), this.db = null;}, n.destroy = function () {return It(_t.deleteDatabase(this.id));}, n.clear = function () {const t = [];for (let e, i = 0; i < Pt.length; i++) {e = Pt[i];for (let i, n = 0; n < Dt[this.id].length; n++) i = Dt[this.id][n], t.push(e + ("reg" !== e && i ? ":" + i : ""));}const e = this.db.transaction(t, "readwrite");for (let i = 0; i < t.length; i++) e.objectStore(t[i]).clear();return It(e);}, n.get = function (t, e, i = 0, n = 0, r = !0, s = !1) {t = this.db.transaction((e ? "ctx" : "map") + (this.field ? ":" + this.field : ""), "readonly").objectStore((e ? "ctx" : "map") + (this.field ? ":" + this.field : "")).get(e ? e + ":" + t : t);const o = this;return It(t).then(function (t) {let e = [];if (!t || !t.length) return e;if (r) {if (!i && !n && 1 === t.length) return t[0];for (let r, s = 0; s < t.length; s++) if ((r = t[s]) && r.length) {if (n >= r.length) {n -= r.length;continue;}const t = i ? n + Math.min(r.length - n, i) : r.length;for (let i = n; i < t; i++) e.push(r[i]);if (n = 0, e.length === i) break;}return s ? o.enrich(e) : e;}return t;});}, n.tag = function (t, e = 0, i = 0, n = !1) {t = this.db.transaction("tag" + (this.field ? ":" + this.field : ""), "readonly").objectStore("tag" + (this.field ? ":" + this.field : "")).get(t);const r = this;return It(t).then(function (t) {return !t || !t.length || i >= t.length ? [] : e || i ? (t = t.slice(i, i + e), n ? r.enrich(t) : t) : t;});}, n.enrich = function (t) {"object" != typeof t && (t = [t]);const e = this.db.transaction("reg", "readonly").objectStore("reg"),i = [];for (let n = 0; n < t.length; n++) i[n] = It(e.get(t[n]));return Promise.all(i).then(function (e) {for (let i = 0; i < e.length; i++) e[i] = { id: t[i], doc: e[i] ? JSON.parse(e[i]) : null };return e;});}, n.has = function (t) {return It(t = this.db.transaction("reg", "readonly").objectStore("reg").getKey(t)).then(function (t) {return !!t;});}, n.search = null, n.info = function () {}, n.transaction = function (t, e, i) {t += "reg" !== t && this.field ? ":" + this.field : "";let n = this.h[t + ":" + e];if (n) return i.call(this, n);let r = this.db.transaction(t, e);this.h[t + ":" + e] = n = r.objectStore(t);const s = i.call(this, n);return this.h[t + ":" + e] = null, It(r).finally(function () {return s;});}, n.commit = async function (t) {let e = t.commit_task,i = [];t.commit_task = [];for (let t, n = 0; n < e.length; n++) t = e[n], t.del && i.push(t.del);i.length && (await this.remove(i)), t.reg.size && (await this.transaction("map", "readwrite", function (e) {for (const i of t.map) {const t = i[0],n = i[1];n.length && (e.get(t).onsuccess = function () {let i = this.result;var r;if (i && i.length) {const t = Math.max(i.length, n.length);for (let e, s, o = 0; o < t; o++) if ((s = n[o]) && s.length) {if ((e = i[o]) && e.length) for (r = 0; r < s.length; r++) e.push(s[r]);else i[o] = s;r = 1;}} else i = n, r = 1;r && e.put(i, t);});}}), await this.transaction("ctx", "readwrite", function (e) {for (const i of t.ctx) {const t = i[0],n = i[1];for (const i of n) {const n = i[0],r = i[1];r.length && (e.get(t + ":" + n).onsuccess = function () {let i = this.result;var s;if (i && i.length) {const t = Math.max(i.length, r.length);for (let e, n, o = 0; o < t; o++) if ((n = r[o]) && n.length) {if ((e = i[o]) && e.length) for (s = 0; s < n.length; s++) e.push(n[s]);else i[o] = n;s = 1;}} else i = r, s = 1;s && e.put(i, t + ":" + n);});}}}), t.store ? await this.transaction("reg", "readwrite", function (e) {for (const i of t.store) {const t = i[0],n = i[1];e.put("object" == typeof n ? JSON.stringify(n) : 1, t);}}) : t.bypass || (await this.transaction("reg", "readwrite", function (e) {for (const i of t.reg.keys()) e.put(1, i);})), t.tag && (await this.transaction("tag", "readwrite", function (e) {for (const i of t.tag) {const t = i[0],n = i[1];n.length && (e.get(t).onsuccess = function () {let i = this.result;i = i && i.length ? i.concat(n) : n, e.put(i, t);});}})), t.map.clear(), t.ctx.clear(), t.tag && t.tag.clear(), t.store && t.store.clear(), t.document || t.reg.clear());}, n.remove = function (t) {return "object" != typeof t && (t = [t]), Promise.all([this.transaction("map", "readwrite", function (e) {e.openCursor().onsuccess = function () {const e = this.result;e && Ot(e, t);};}), this.transaction("ctx", "readwrite", function (e) {e.openCursor().onsuccess = function () {const e = this.result;e && Ot(e, t);};}), this.transaction("tag", "readwrite", function (e) {e.openCursor().onsuccess = function () {const e = this.result;e && Ot(e, t, !0);};}), this.transaction("reg", "readwrite", function (e) {for (let i = 0; i < t.length; i++) e.delete(t[i]);})]);};const Ft = lt;}, 7339: (t, e, i) => {"use strict";i.d(e, { A: () => h });var n = i(7268);function r(t) {return function () {this.removeAttribute(t);};}function s(t) {return function () {this.removeAttributeNS(t.space, t.local);};}function o(t, e) {return function () {this.setAttribute(t, e);};}function a(t, e) {return function () {this.setAttributeNS(t.space, t.local, e);};}function l(t, e) {return function () {var i = e.apply(this, arguments);null == i ? this.removeAttribute(t) : this.setAttribute(t, i);};}function c(t, e) {return function () {var i = e.apply(this, arguments);null == i ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, i);};}function h(t, e) {var i = (0, n.A)(t);if (arguments.length < 2) {var h = this.node();return i.local ? h.getAttributeNS(i.space, i.local) : h.getAttribute(i);}return this.each((null == e ? i.local ? s : r : "function" == typeof e ? i.local ? c : l : i.local ? a : o)(i, e));}}, 7345: (t, e, i) => {"use strict";i.d(e, { T: () => s });var n = i(5953),r = i(2484);function s(t, e, i) {if ((o = t) && "object" == typeof o && ["title", "description", "code", "key"].every((t) => t in o)) return t;var o;if ("string" == typeof t) {const r = { key: t, ...(n.Kw[t] || n.Kw.UNKNOWN) };return e && (r.details = e), i && (r.sourceError = i), r;}return (0, r.AN)(t) ? (0, r.Vu)(t) : s("UNKNOWN", (0, r.bJ)(t) ? t.message : null, t);}}, 7404: (t, e, i) => {"use strict";i.d(e, { Bc: () => nt, OO: () => dt, wm: () => X, yU: () => ut });var n = i(6585),r = i(1371),s = i(5874);class o {constructor(t, e, i, n) {this.state = t, this.pos = e, this.explicit = i, this.view = n, this.abortListeners = [], this.abortOnDocChange = !1;}tokenBefore(t) {let e = (0, s.mv)(this.state).resolveInner(this.pos, -1);for (; e && t.indexOf(e.name) < 0;) e = e.parent;return e ? { from: e.from, to: this.pos, text: this.state.sliceDoc(e.from, this.pos), type: e.type } : null;}matchBefore(t) {let e = this.state.doc.lineAt(this.pos),i = Math.max(e.from, this.pos - 250),n = e.text.slice(i - e.from, this.pos - e.from),r = n.search(h(t, !1));return r < 0 ? null : { from: i + r, to: this.pos, text: n.slice(r) };}get aborted() {return null == this.abortListeners;}addEventListener(t, e, i) {"abort" == t && this.abortListeners && (this.abortListeners.push(e), i && i.onDocChange && (this.abortOnDocChange = !0));}}function a(t) {let e = Object.keys(t).join(""),i = /\w/.test(e);return i && (e = e.replace(/\w/g, "")), `[${i ? "\\w" : ""}${e.replace(/[^\w\s]/g, "\\$&")}]`;}class l {constructor(t, e, i, n) {this.completion = t, this.source = e, this.match = i, this.score = n;}}function c(t) {return t.selection.main.from;}function h(t, e) {var i;let { source: n } = t,r = e && "^" != n[0],s = "$" != n[n.length - 1];return r || s ? new RegExp(`${r ? "^" : ""}(?:${n})${s ? "$" : ""}`, null !== (i = t.flags) && void 0 !== i ? i : t.ignoreCase ? "i" : "") : t;}const u = n.YH.define();function d(t, e, i, r) {let { main: s } = t.selection,o = i - s.from,a = r - s.from;return { ...t.changeByRange((l) => {if (l != s && i != r && t.sliceDoc(l.from + o, l.from + a) != t.sliceDoc(i, r)) return { range: l };let c = t.toText(e);return { changes: { from: l.from + o, to: r == s.from ? l.to : l.from + a, insert: c }, range: n.OF.cursor(l.from + o + c.length) };}), scrollIntoView: !0, userEvent: "input.complete" };}const p = new WeakMap();function f(t) {if (!Array.isArray(t)) return t;let e = p.get(t);return e || p.set(t, e = function (t) {let e = t.map((t) => "string" == typeof t ? { label: t } : t),[i, n] = e.every((t) => /^\w+$/.test(t.label)) ? [/\w*$/, /\w+$/] : function (t) {let e = Object.create(null),i = Object.create(null);for (let { label: n } of t) {e[n[0]] = !0;for (let t = 1; t < n.length; t++) i[n[t]] = !0;}let n = a(e) + a(i) + "*$";return [new RegExp("^" + n), new RegExp(n)];}(e);return (t) => {let r = t.matchBefore(n);return r || t.explicit ? { from: r ? r.from : t.pos, options: e, validFor: i } : null;};}(t)), e;}const g = n.Pe.define(),m = n.Pe.define();class v {constructor(t) {this.pattern = t, this.chars = [], this.folded = [], this.any = [], this.precise = [], this.byWord = [], this.score = 0, this.matched = [];for (let e = 0; e < t.length;) {let i = (0, n.vS)(t, e),r = (0, n.Fh)(i);this.chars.push(i);let s = t.slice(e, e + r),o = s.toUpperCase();this.folded.push((0, n.vS)(o == s ? s.toLowerCase() : o, 0)), e += r;}this.astral = t.length != this.chars.length;}ret(t, e) {return this.score = t, this.matched = e, this;}match(t) {if (0 == this.pattern.length) return this.ret(-100, []);if (t.length < this.pattern.length) return null;let { chars: e, folded: i, any: r, precise: s, byWord: o } = this;if (1 == e.length) {let r = (0, n.vS)(t, 0),s = (0, n.Fh)(r),o = s == t.length ? 0 : -100;if (r == e[0]) ;else {if (r != i[0]) return null;o += -200;}return this.ret(o, [0, s]);}let a = t.indexOf(this.pattern);if (0 == a) return this.ret(t.length == this.pattern.length ? 0 : -100, [0, this.pattern.length]);let l = e.length,c = 0;if (a < 0) {for (let s = 0, o = Math.min(t.length, 200); s < o && c < l;) {let o = (0, n.vS)(t, s);o != e[c] && o != i[c] || (r[c++] = s), s += (0, n.Fh)(o);}if (c < l) return null;}let h = 0,u = 0,d = !1,p = 0,f = -1,g = -1,m = /[a-z]/.test(t),v = !0;for (let r = 0, c = Math.min(t.length, 200), y = 0; r < c && u < l;) {let c = (0, n.vS)(t, r);a < 0 && (h < l && c == e[h] && (s[h++] = r), p < l && (c == e[p] || c == i[p] ? (0 == p && (f = r), g = r + 1, p++) : p = 0));let b,w = c < 255 ? c >= 48 && c <= 57 || c >= 97 && c <= 122 ? 2 : c >= 65 && c <= 90 ? 1 : 0 : (b = (0, n.MK)(c)) != b.toLowerCase() ? 1 : b != b.toUpperCase() ? 2 : 0;(!r || 1 == w && m || 0 == y && 0 != w) && (e[u] == c || i[u] == c && (d = !0) ? o[u++] = r : o.length && (v = !1)), y = w, r += (0, n.Fh)(c);}return u == l && 0 == o[0] && v ? this.result((d ? -200 : 0) - 100, o, t) : p == l && 0 == f ? this.ret(-200 - t.length + (g == t.length ? 0 : -100), [0, g]) : a > -1 ? this.ret(-700 - t.length, [a, a + this.pattern.length]) : p == l ? this.ret(-900 - t.length, [f, g]) : u == l ? this.result((d ? -200 : 0) - 100 - 700 + (v ? 0 : -1100), o, t) : 2 == e.length ? null : this.result((r[0] ? -700 : 0) - 200 - 1100, r, t);}result(t, e, i) {let r = [],s = 0;for (let t of e) {let e = t + (this.astral ? (0, n.Fh)((0, n.vS)(i, t)) : 1);s && r[s - 1] == t ? r[s - 1] = e : (r[s++] = t, r[s++] = e);}return this.ret(t - i.length, r);}}class y {constructor(t) {this.pattern = t, this.matched = [], this.score = 0, this.folded = t.toLowerCase();}match(t) {if (t.length < this.pattern.length) return null;let e = t.slice(0, this.pattern.length),i = e == this.pattern ? 0 : e.toLowerCase() == this.folded ? -200 : null;return null == i ? null : (this.matched = [0, e.length], this.score = i + (t.length == this.pattern.length ? 0 : -100), this);}}const b = n.sj.define({ combine: (t) => (0, n.QR)(t, { activateOnTyping: !0, activateOnCompletion: () => !1, activateOnTypingDelay: 100, selectOnOpen: !0, override: null, closeOnBlur: !0, maxRenderedOptions: 100, defaultKeymap: !0, tooltipClass: () => "", optionClass: () => "", aboveCursor: !1, icons: !0, addToOptions: [], positionInfo: x, filterStrict: !1, compareCompletions: (t, e) => t.label.localeCompare(e.label), interactionDelay: 75, updateSyncTime: 100 }, { defaultKeymap: (t, e) => t && e, closeOnBlur: (t, e) => t && e, icons: (t, e) => t && e, tooltipClass: (t, e) => (i) => w(t(i), e(i)), optionClass: (t, e) => (i) => w(t(i), e(i)), addToOptions: (t, e) => t.concat(e), filterStrict: (t, e) => t || e }) });function w(t, e) {return t ? e ? t + " " + e : t : e;}function x(t, e, i, n, s, o) {let a,l,c = t.textDirection == r.OP.RTL,h = c,u = !1,d = "top",p = e.left - s.left,f = s.right - e.right,g = n.right - n.left,m = n.bottom - n.top;if (h && p < Math.min(g, f) ? h = !1 : !h && f < Math.min(g, p) && (h = !0), g <= (h ? p : f)) a = Math.max(s.top, Math.min(i.top, s.bottom - m)) - e.top, l = Math.min(400, h ? p : f);else {u = !0, l = Math.min(400, (c ? e.right : s.right - e.left) - 30);let t = s.bottom - e.bottom;t >= m || t > e.top ? a = i.bottom - e.top : (d = "bottom", a = e.bottom - i.top);}return { style: `${d}: ${a / ((e.bottom - e.top) / o.offsetHeight)}px; max-width: ${l / ((e.right - e.left) / o.offsetWidth)}px`, class: "cm-completionInfo-" + (u ? c ? "left-narrow" : "right-narrow" : h ? "left" : "right") };}function S(t, e, i) {if (t <= i) return { from: 0, to: t };if (e < 0 && (e = 0), e <= t >> 1) {let t = Math.floor(e / i);return { from: t * i, to: (t + 1) * i };}let n = Math.floor((t - e) / i);return { from: t - (n + 1) * i, to: t - n * i };}class E {constructor(t, e, i) {this.view = t, this.stateField = e, this.applyCompletion = i, this.info = null, this.infoDestroy = null, this.placeInfoReq = { read: () => this.measureInfo(), write: (t) => this.placeInfo(t), key: this }, this.space = null, this.currentClass = "";let n = t.state.field(e),{ options: r, selected: s } = n.open,o = t.state.facet(b);this.optionContent = function (t) {let e = t.addToOptions.slice();return t.icons && e.push({ render(t) {let e = document.createElement("div");return e.classList.add("cm-completionIcon"), t.type && e.classList.add(...t.type.split(/\s+/g).map((t) => "cm-completionIcon-" + t)), e.setAttribute("aria-hidden", "true"), e;}, position: 20 }), e.push({ render(t, e, i, n) {let r = document.createElement("span");r.className = "cm-completionLabel";let s = t.displayLabel || t.label,o = 0;for (let t = 0; t < n.length;) {let e = n[t++],i = n[t++];e > o && r.appendChild(document.createTextNode(s.slice(o, e)));let a = r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(s.slice(e, i))), a.className = "cm-completionMatchedText", o = i;}return o < s.length && r.appendChild(document.createTextNode(s.slice(o))), r;}, position: 50 }, { render(t) {if (!t.detail) return null;let e = document.createElement("span");return e.className = "cm-completionDetail", e.textContent = t.detail, e;}, position: 80 }), e.sort((t, e) => t.position - e.position).map((t) => t.render);}(o), this.optionClass = o.optionClass, this.tooltipClass = o.tooltipClass, this.range = S(r.length, s, o.maxRenderedOptions), this.dom = document.createElement("div"), this.dom.className = "cm-tooltip-autocomplete", this.updateTooltipClass(t.state), this.dom.addEventListener("mousedown", (i) => {let { options: n } = t.state.field(e).open;for (let e, r = i.target; r && r != this.dom; r = r.parentNode) if ("LI" == r.nodeName && (e = /-(\d+)$/.exec(r.id)) && +e[1] < n.length) return this.applyCompletion(t, n[+e[1]]), void i.preventDefault();}), this.dom.addEventListener("focusout", (e) => {let i = t.state.field(this.stateField, !1);i && i.tooltip && t.state.facet(b).closeOnBlur && e.relatedTarget != t.contentDOM && t.dispatch({ effects: m.of(null) });}), this.showOptions(r, n.id);}mount() {this.updateSel();}showOptions(t, e) {this.list && this.list.remove(), this.list = this.dom.appendChild(this.createListBox(t, e, this.range)), this.list.addEventListener("scroll", () => {this.info && this.view.requestMeasure(this.placeInfoReq);});}update(t) {var e;let i = t.state.field(this.stateField),n = t.startState.field(this.stateField);if (this.updateTooltipClass(t.state), i != n) {let { options: r, selected: s, disabled: o } = i.open;n.open && n.open.options == r || (this.range = S(r.length, s, t.state.facet(b).maxRenderedOptions), this.showOptions(r, i.id)), this.updateSel(), o != (null === (e = n.open) || void 0 === e ? void 0 : e.disabled) && this.dom.classList.toggle("cm-tooltip-autocomplete-disabled", !!o);}}updateTooltipClass(t) {let e = this.tooltipClass(t);if (e != this.currentClass) {for (let t of this.currentClass.split(" ")) t && this.dom.classList.remove(t);for (let t of e.split(" ")) t && this.dom.classList.add(t);this.currentClass = e;}}positioned(t) {this.space = t, this.info && this.view.requestMeasure(this.placeInfoReq);}updateSel() {let t = this.view.state.field(this.stateField),e = t.open;if ((e.selected > -1 && e.selected < this.range.from || e.selected >= this.range.to) && (this.range = S(e.options.length, e.selected, this.view.state.facet(b).maxRenderedOptions), this.showOptions(e.options, t.id)), this.updateSelectedOption(e.selected)) {this.destroyInfo();let { completion: i } = e.options[e.selected],{ info: n } = i;if (!n) return;let s = "string" == typeof n ? document.createTextNode(n) : n(i);if (!s) return;"then" in s ? s.then((e) => {e && this.view.state.field(this.stateField, !1) == t && this.addInfoPane(e, i);}).catch((t) => (0, r.c_)(this.view.state, t, "completion info")) : this.addInfoPane(s, i);}}addInfoPane(t, e) {this.destroyInfo();let i = this.info = document.createElement("div");if (i.className = "cm-tooltip cm-completionInfo", null != t.nodeType) i.appendChild(t), this.infoDestroy = null;else {let { dom: e, destroy: n } = t;i.appendChild(e), this.infoDestroy = n || null;}this.dom.appendChild(i), this.view.requestMeasure(this.placeInfoReq);}updateSelectedOption(t) {let e = null;for (let i = this.list.firstChild, n = this.range.from; i; i = i.nextSibling, n++) "LI" == i.nodeName && i.id ? n == t ? i.hasAttribute("aria-selected") || (i.setAttribute("aria-selected", "true"), e = i) : i.hasAttribute("aria-selected") && i.removeAttribute("aria-selected") : n--;return e && function (t, e) {let i = t.getBoundingClientRect(),n = e.getBoundingClientRect(),r = i.height / t.offsetHeight;n.top < i.top ? t.scrollTop -= (i.top - n.top) / r : n.bottom > i.bottom && (t.scrollTop += (n.bottom - i.bottom) / r);}(this.list, e), e;}measureInfo() {let t = this.dom.querySelector("[aria-selected]");if (!t || !this.info) return null;let e = this.dom.getBoundingClientRect(),i = this.info.getBoundingClientRect(),n = t.getBoundingClientRect(),r = this.space;if (!r) {let t = this.dom.ownerDocument.documentElement;r = { left: 0, top: 0, right: t.clientWidth, bottom: t.clientHeight };}return n.top > Math.min(r.bottom, e.bottom) - 10 || n.bottom < Math.max(r.top, e.top) + 10 ? null : this.view.state.facet(b).positionInfo(this.view, e, n, i, r, this.dom);}placeInfo(t) {this.info && (t ? (t.style && (this.info.style.cssText = t.style), this.info.className = "cm-tooltip cm-completionInfo " + (t.class || "")) : this.info.style.cssText = "top: -1e6px");}createListBox(t, e, i) {const n = document.createElement("ul");n.id = e, n.setAttribute("role", "listbox"), n.setAttribute("aria-expanded", "true"), n.setAttribute("aria-label", this.view.state.phrase("Completions")), n.addEventListener("mousedown", (t) => {t.target == n && t.preventDefault();});let r = null;for (let s = i.from; s < i.to; s++) {let { completion: o, match: a } = t[s],{ section: l } = o;if (l) {let t = "string" == typeof l ? l : l.name;t != r && (s > i.from || 0 == i.from) && (r = t, "string" != typeof l && l.header ? n.appendChild(l.header(l)) : n.appendChild(document.createElement("completion-section")).textContent = t);}const c = n.appendChild(document.createElement("li"));c.id = e + "-" + s, c.setAttribute("role", "option");let h = this.optionClass(o);h && (c.className = h);for (let t of this.optionContent) {let e = t(o, this.view.state, this.view, a);e && c.appendChild(e);}}return i.from && n.classList.add("cm-completionListIncompleteTop"), i.to < t.length && n.classList.add("cm-completionListIncompleteBottom"), n;}destroyInfo() {this.info && (this.infoDestroy && this.infoDestroy(), this.info.remove(), this.info = null);}destroy() {this.destroyInfo();}}function C(t, e) {return (i) => new E(i, t, e);}function k(t) {return 100 * (t.boost || 0) + (t.apply ? 10 : 0) + (t.info ? 5 : 0) + (t.type ? 1 : 0);}class T {constructor(t, e, i, n, r, s) {this.options = t, this.attrs = e, this.tooltip = i, this.timestamp = n, this.selected = r, this.disabled = s;}setSelected(t, e) {return t == this.selected || t >= this.options.length ? this : new T(this.options, P(e, t), this.tooltip, this.timestamp, t, this.disabled);}static build(t, e, i, n, r, s) {if (n && !s && t.some((t) => t.isPending)) return n.setDisabled();let o = function (t, e) {let i = [],n = null,r = null,s = (t) => {i.push(t);let { section: e } = t.completion;if (e) {n || (n = []);let t = "string" == typeof e ? e : e.name;n.some((e) => e.name == t) || n.push("string" == typeof e ? { name: t } : e);}},o = e.facet(b);for (let n of t) if (n.hasResult()) {let t = n.result.getMatch;if (!1 === n.result.filter) for (let e of n.result.options) s(new l(e, n.source, t ? t(e) : [], 1e9 - i.length));else {let i,a = e.sliceDoc(n.from, n.to),c = o.filterStrict ? new y(a) : new v(a);for (let e of n.result.options) if (i = c.match(e.label)) {let o = e.displayLabel ? t ? t(e, i.matched) : [] : i.matched,a = i.score + (e.boost || 0);if (s(new l(e, n.source, o, a)), "object" == typeof e.section && "dynamic" === e.section.rank) {let { name: t } = e.section;r || (r = Object.create(null)), r[t] = Math.max(a, r[t] || -1e9);}}}}if (n) {let t = Object.create(null),e = 0,s = (t, e) => ("dynamic" === t.rank && "dynamic" === e.rank ? r[e.name] - r[t.name] : 0) || ("number" == typeof t.rank ? t.rank : 1e9) - ("number" == typeof e.rank ? e.rank : 1e9) || (t.name < e.name ? -1 : 1);for (let i of n.sort(s)) e -= 1e5, t[i.name] = e;for (let e of i) {let { section: i } = e.completion;i && (e.score += t["string" == typeof i ? i : i.name]);}}let a = [],c = null,h = o.compareCompletions;for (let t of i.sort((t, e) => e.score - t.score || h(t.completion, e.completion))) {let e = t.completion;!c || c.label != e.label || c.detail != e.detail || null != c.type && null != e.type && c.type != e.type || c.apply != e.apply || c.boost != e.boost ? a.push(t) : k(t.completion) > k(c) && (a[a.length - 1] = t), c = t.completion;}return a;}(t, e);if (!o.length) return n && t.some((t) => t.isPending) ? n.setDisabled() : null;let a = e.facet(b).selectOnOpen ? 0 : -1;if (n && n.selected != a && -1 != n.selected) {let t = n.options[n.selected].completion;for (let e = 0; e < o.length; e++) if (o[e].completion == t) {a = e;break;}}return new T(o, P(i, a), { pos: t.reduce((t, e) => e.hasResult() ? Math.min(t, e.from) : t, 1e8), create: B, above: r.aboveCursor }, n ? n.timestamp : Date.now(), a, !1);}map(t) {return new T(this.options, this.attrs, { ...this.tooltip, pos: t.mapPos(this.tooltip.pos) }, this.timestamp, this.selected, this.disabled);}setDisabled() {return new T(this.options, this.attrs, this.tooltip, this.timestamp, this.selected, !0);}}class A {constructor(t, e, i) {this.active = t, this.id = e, this.open = i;}static start() {return new A(D, "cm-ac-" + Math.floor(2e6 * Math.random()).toString(36), null);}update(t) {let { state: e } = t,i = e.facet(b),n = (i.override || e.languageDataAt("autocomplete", c(e)).map(f)).map((e) => (this.active.find((t) => t.source == e) || new I(e, this.active.some((t) => 0 != t.state) ? 1 : 0)).update(t, i));n.length == this.active.length && n.every((t, e) => t == this.active[e]) && (n = this.active);let r = this.open,s = t.effects.some((t) => t.is(R));r && t.docChanged && (r = r.map(t.changes)), t.selection || n.some((e) => e.hasResult() && t.changes.touchesRange(e.from, e.to)) || !function (t, e) {if (t == e) return !0;for (let i = 0, n = 0;;) {for (; i < t.length && !t[i].hasResult();) i++;for (; n < e.length && !e[n].hasResult();) n++;let r = i == t.length,s = n == e.length;if (r || s) return r == s;if (t[i++].result != e[n++].result) return !1;}}(n, this.active) || s ? r = T.build(n, e, this.id, r, i, s) : r && r.disabled && !n.some((t) => t.isPending) && (r = null), !r && n.every((t) => !t.isPending) && n.some((t) => t.hasResult()) && (n = n.map((t) => t.hasResult() ? new I(t.source, 0) : t));for (let e of t.effects) e.is(L) && (r = r && r.setSelected(e.value, this.id));return n == this.active && r == this.open ? this : new A(n, this.id, r);}get tooltip() {return this.open ? this.open.tooltip : null;}get attrs() {return this.open ? this.open.attrs : this.active.length ? M : _;}}const M = { "aria-autocomplete": "list" },_ = {};function P(t, e) {let i = { "aria-autocomplete": "list", "aria-haspopup": "listbox", "aria-controls": t };return e > -1 && (i["aria-activedescendant"] = t + "-" + e), i;}const D = [];function O(t, e) {if (t.isUserEvent("input.complete")) {let i = t.annotation(u);if (i && e.activateOnCompletion(i)) return 12;}let i = t.isUserEvent("input.type");return i && e.activateOnTyping ? 5 : i ? 1 : t.isUserEvent("delete.backward") ? 2 : t.selection ? 8 : t.docChanged ? 16 : 0;}class I {constructor(t, e, i = !1) {this.source = t, this.state = e, this.explicit = i;}hasResult() {return !1;}get isPending() {return 1 == this.state;}update(t, e) {let i = O(t, e),n = this;(8 & i || 16 & i && this.touches(t)) && (n = new I(n.source, 0)), 4 & i && 0 == n.state && (n = new I(this.source, 1)), n = n.updateFor(t, i);for (let e of t.effects) if (e.is(g)) n = new I(n.source, 1, e.value);else if (e.is(m)) n = new I(n.source, 0);else if (e.is(R)) for (let t of e.value) t.source == n.source && (n = t);return n;}updateFor(t, e) {return this.map(t.changes);}map(t) {return this;}touches(t) {return t.changes.touchesRange(c(t.state));}}class F extends I {constructor(t, e, i, n, r, s) {super(t, 3, e), this.limit = i, this.result = n, this.from = r, this.to = s;}hasResult() {return !0;}updateFor(t, e) {var i;if (!(3 & e)) return this.map(t.changes);let n = this.result;n.map && !t.changes.empty && (n = n.map(n, t.changes));let r = t.changes.mapPos(this.from),s = t.changes.mapPos(this.to, 1),a = c(t.state);if (a > s || !n || 2 & e && (c(t.startState) == this.from || a < this.limit)) return new I(this.source, 4 & e ? 1 : 0);let l = t.changes.mapPos(this.limit);return function (t, e, i, n) {if (!t) return !1;let r = e.sliceDoc(i, n);return "function" == typeof t ? t(r, i, n, e) : h(t, !0).test(r);}(n.validFor, t.state, r, s) ? new F(this.source, this.explicit, l, n, r, s) : n.update && (n = n.update(n, r, s, new o(t.state, a, !1))) ? new F(this.source, this.explicit, l, n, n.from, null !== (i = n.to) && void 0 !== i ? i : c(t.state)) : new I(this.source, 1, this.explicit);}map(t) {return t.empty ? this : (this.result.map ? this.result.map(this.result, t) : this.result) ? new F(this.source, this.explicit, t.mapPos(this.limit), this.result, t.mapPos(this.from), t.mapPos(this.to, 1)) : new I(this.source, 0);}touches(t) {return t.changes.touchesRange(this.from, this.to);}}const R = n.Pe.define({ map: (t, e) => t.map((t) => t.map(e)) }),L = n.Pe.define(),N = n.sU.define({ create: () => A.start(), update: (t, e) => t.update(e), provide: (t) => [r.DK.from(t, (t) => t.tooltip), r.Lz.contentAttributes.from(t, (t) => t.attrs)] });function V(t, e) {const i = e.completion.apply || e.completion.label;let n = t.state.field(N).active.find((t) => t.source == e.source);return n instanceof F && ("string" == typeof i ? t.dispatch({ ...d(t.state, i, n.from, n.to), annotations: u.of(e.completion) }) : i(t, e.completion, n.from, n.to), !0);}const B = C(N, V);function j(t, e = "option") {return (i) => {let n = i.state.field(N, !1);if (!n || !n.open || n.open.disabled || Date.now() - n.open.timestamp < i.state.facet(b).interactionDelay) return !1;let s,o = 1;"page" == e && (s = (0, r.Eg)(i, n.open.tooltip)) && (o = Math.max(2, Math.floor(s.dom.offsetHeight / s.dom.querySelector("li").offsetHeight) - 1));let { length: a } = n.open.options,l = n.open.selected > -1 ? n.open.selected + o * (t ? 1 : -1) : t ? 0 : a - 1;return l < 0 ? l = "page" == e ? 0 : a - 1 : l >= a && (l = "page" == e ? a - 1 : 0), i.dispatch({ effects: L.of(l) }), !0;};}const z = (t) => !!t.state.field(N, !1) && (t.dispatch({ effects: g.of(!0) }), !0);class U {constructor(t, e) {this.active = t, this.context = e, this.time = Date.now(), this.updates = [], this.done = void 0;}}const H = r.Z9.fromClass(class {constructor(t) {this.view = t, this.debounceUpdate = -1, this.running = [], this.debounceAccept = -1, this.pendingStart = !1, this.composing = 0;for (let e of t.state.field(N).active) e.isPending && this.startQuery(e);}update(t) {let e = t.state.field(N),i = t.state.facet(b);if (!t.selectionSet && !t.docChanged && t.startState.field(N) == e) return;let n = t.transactions.some((t) => {let e = O(t, i);return 8 & e || (t.selection || t.docChanged) && !(3 & e);});for (let e = 0; e < this.running.length; e++) {let i = this.running[e];if (n || i.context.abortOnDocChange && t.docChanged || i.updates.length + t.transactions.length > 50 && Date.now() - i.time > 1e3) {for (let t of i.context.abortListeners) try {t();} catch (t) {(0, r.c_)(this.view.state, t);}i.context.abortListeners = null, this.running.splice(e--, 1);} else i.updates.push(...t.transactions);}this.debounceUpdate > -1 && clearTimeout(this.debounceUpdate), t.transactions.some((t) => t.effects.some((t) => t.is(g))) && (this.pendingStart = !0);let s = this.pendingStart ? 50 : i.activateOnTypingDelay;if (this.debounceUpdate = e.active.some((t) => t.isPending && !this.running.some((e) => e.active.source == t.source)) ? setTimeout(() => this.startUpdate(), s) : -1, 0 != this.composing) for (let e of t.transactions) e.isUserEvent("input.type") ? this.composing = 2 : 2 == this.composing && e.selection && (this.composing = 3);}startUpdate() {this.debounceUpdate = -1, this.pendingStart = !1;let { state: t } = this.view,e = t.field(N);for (let t of e.active) t.isPending && !this.running.some((e) => e.active.source == t.source) && this.startQuery(t);this.running.length && e.open && e.open.disabled && (this.debounceAccept = setTimeout(() => this.accept(), this.view.state.facet(b).updateSyncTime));}startQuery(t) {let { state: e } = this.view,i = c(e),n = new o(e, i, t.explicit, this.view),s = new U(t, n);this.running.push(s), Promise.resolve(t.source(n)).then((t) => {s.context.aborted || (s.done = t || null, this.scheduleAccept());}, (t) => {this.view.dispatch({ effects: m.of(null) }), (0, r.c_)(this.view.state, t);});}scheduleAccept() {this.running.every((t) => void 0 !== t.done) ? this.accept() : this.debounceAccept < 0 && (this.debounceAccept = setTimeout(() => this.accept(), this.view.state.facet(b).updateSyncTime));}accept() {var t;this.debounceAccept > -1 && clearTimeout(this.debounceAccept), this.debounceAccept = -1;let e = [],i = this.view.state.facet(b),n = this.view.state.field(N);for (let r = 0; r < this.running.length; r++) {let s = this.running[r];if (void 0 === s.done) continue;if (this.running.splice(r--, 1), s.done) {let n = c(s.updates.length ? s.updates[0].startState : this.view.state),r = Math.min(n, s.done.from + (s.active.explicit ? 0 : 1)),o = new F(s.active.source, s.active.explicit, r, s.done, s.done.from, null !== (t = s.done.to) && void 0 !== t ? t : n);for (let t of s.updates) o = o.update(t, i);if (o.hasResult()) {e.push(o);continue;}}let o = n.active.find((t) => t.source == s.active.source);if (o && o.isPending) if (null == s.done) {let t = new I(s.active.source, 0);for (let e of s.updates) t = t.update(e, i);t.isPending || e.push(t);} else this.startQuery(o);}(e.length || n.open && n.open.disabled) && this.view.dispatch({ effects: R.of(e) });}}, { eventHandlers: { blur(t) {let e = this.view.state.field(N, !1);if (e && e.tooltip && this.view.state.facet(b).closeOnBlur) {let i = e.open && (0, r.Eg)(this.view, e.open.tooltip);i && i.dom.contains(t.relatedTarget) || setTimeout(() => this.view.dispatch({ effects: m.of(null) }), 10);}}, compositionstart() {this.composing = 1;}, compositionend() {3 == this.composing && setTimeout(() => this.view.dispatch({ effects: g.of(!1) }), 20), this.composing = 0;} } }),q = "object" == typeof navigator && /Win/.test(navigator.platform),$ = n.Nb.highest(r.Lz.domEventHandlers({ keydown(t, e) {let i = e.state.field(N, !1);if (!i || !i.open || i.open.disabled || i.open.selected < 0 || t.key.length > 1 || t.ctrlKey && (!q || !t.altKey) || t.metaKey) return !1;let n = i.open.options[i.open.selected],r = i.active.find((t) => t.source == n.source),s = n.completion.commitCharacters || r.result.commitCharacters;return s && s.indexOf(t.key) > -1 && V(e, n), !1;} })),G = r.Lz.baseTheme({ ".cm-tooltip.cm-tooltip-autocomplete": { "& > ul": { fontFamily: "monospace", whiteSpace: "nowrap", overflow: "hidden auto", maxWidth_fallback: "700px", maxWidth: "min(700px, 95vw)", minWidth: "250px", maxHeight: "10em", height: "100%", listStyle: "none", margin: 0, padding: 0, "& > li, & > completion-section": { padding: "1px 3px", lineHeight: 1.2 }, "& > li": { overflowX: "hidden", textOverflow: "ellipsis", cursor: "pointer" }, "& > completion-section": { display: "list-item", borderBottom: "1px solid silver", paddingLeft: "0.5em", opacity: .7 } } }, "&light .cm-tooltip-autocomplete ul li[aria-selected]": { background: "#17c", color: "white" }, "&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]": { background: "#777" }, "&dark .cm-tooltip-autocomplete ul li[aria-selected]": { background: "#347", color: "white" }, "&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]": { background: "#444" }, ".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after": { content: '""', opacity: .5, display: "block", textAlign: "center" }, ".cm-tooltip.cm-completionInfo": { position: "absolute", padding: "3px 9px", width: "max-content", maxWidth: "400px", boxSizing: "border-box", whiteSpace: "pre-line" }, ".cm-completionInfo.cm-completionInfo-left": { right: "100%" }, ".cm-completionInfo.cm-completionInfo-right": { left: "100%" }, ".cm-completionInfo.cm-completionInfo-left-narrow": { right: "30px" }, ".cm-completionInfo.cm-completionInfo-right-narrow": { left: "30px" }, "&light .cm-snippetField": { backgroundColor: "#00000022" }, "&dark .cm-snippetField": { backgroundColor: "#ffffff22" }, ".cm-snippetFieldPosition": { verticalAlign: "text-top", width: 0, height: "1.15em", display: "inline-block", margin: "0 -0.7px -.7em", borderLeft: "1.4px dotted #888" }, ".cm-completionMatchedText": { textDecoration: "underline" }, ".cm-completionDetail": { marginLeft: "0.5em", fontStyle: "italic" }, ".cm-completionIcon": { fontSize: "90%", width: ".8em", display: "inline-block", textAlign: "center", paddingRight: ".6em", opacity: "0.6", boxSizing: "content-box" }, ".cm-completionIcon-function, .cm-completionIcon-method": { "&:after": { content: "''" } }, ".cm-completionIcon-class": { "&:after": { content: "''" } }, ".cm-completionIcon-interface": { "&:after": { content: "''" } }, ".cm-completionIcon-variable": { "&:after": { content: "''" } }, ".cm-completionIcon-constant": { "&:after": { content: "''" } }, ".cm-completionIcon-type": { "&:after": { content: "''" } }, ".cm-completionIcon-enum": { "&:after": { content: "''" } }, ".cm-completionIcon-property": { "&:after": { content: "''" } }, ".cm-completionIcon-keyword": { "&:after": { content: "''" } }, ".cm-completionIcon-namespace": { "&:after": { content: "''" } }, ".cm-completionIcon-text": { "&:after": { content: "'abc'", fontSize: "50%", verticalAlign: "middle" } } }),W = { brackets: ["(", "[", "{", "'", '"'], before: ")]}:;>", stringPrefixes: [] },K = n.Pe.define({ map(t, e) {let i = e.mapPos(t, -1, n.iR.TrackAfter);return null == i ? void 0 : i;} }),Z = new class extends n.FB {}();Z.startSide = 1, Z.endSide = -1;const Y = n.sU.define({ create: () => n.om.empty, update(t, e) {if (t = t.map(e.changes), e.selection) {let i = e.state.doc.lineAt(e.selection.main.head);t = t.update({ filter: (t) => t >= i.from && t <= i.to });}for (let i of e.effects) i.is(K) && (t = t.update({ add: [Z.range(i.value, i.value + 1)] }));return t;} });function X() {return [it, Y];}const J = "()[]{}<>";function Q(t) {for (let e = 0; e < 16; e += 2) if (J.charCodeAt(e) == t) return J.charAt(e + 1);return (0, n.MK)(t < 128 ? t : t + 1);}function tt(t, e) {return t.languageDataAt("closeBrackets", e)[0] || W;}const et = "object" == typeof navigator && /Android\b/.test(navigator.userAgent),it = r.Lz.inputHandler.of((t, e, i, r) => {if ((et ? t.composing : t.compositionStarted) || t.state.readOnly) return !1;let s = t.state.selection.main;if (r.length > 2 || 2 == r.length && 1 == (0, n.Fh)((0, n.vS)(r, 0)) || e != s.from || i != s.to) return !1;let o = function (t, e) {let i = tt(t, t.selection.main.head),r = i.brackets || W.brackets;for (let s of r) {let o = Q((0, n.vS)(s, 0));if (e == s) return o == s ? lt(t, s, r.indexOf(s + s + s) > -1, i) : ot(t, s, o, i.before || W.before);if (e == o && rt(t, t.selection.main.from)) return at(t, 0, o);}return null;}(t.state, r);return !!o && (t.dispatch(o), !0);}),nt = [{ key: "Backspace", run: ({ state: t, dispatch: e }) => {if (t.readOnly) return !1;let i = tt(t, t.selection.main.head).brackets || W.brackets,r = null,s = t.changeByRange((e) => {if (e.empty) {let r = function (t, e) {let i = t.sliceString(e - 2, e);return (0, n.Fh)((0, n.vS)(i, 0)) == i.length ? i : i.slice(1);}(t.doc, e.head);for (let s of i) if (s == r && st(t.doc, e.head) == Q((0, n.vS)(s, 0))) return { changes: { from: e.head - s.length, to: e.head + s.length }, range: n.OF.cursor(e.head - s.length) };}return { range: r = e };});return r || e(t.update(s, { scrollIntoView: !0, userEvent: "delete.backward" })), !r;} }];function rt(t, e) {let i = !1;return t.field(Y).between(0, t.doc.length, (t) => {t == e && (i = !0);}), i;}function st(t, e) {let i = t.sliceString(e, e + 2);return i.slice(0, (0, n.Fh)((0, n.vS)(i, 0)));}function ot(t, e, i, r) {let s = null,o = t.changeByRange((o) => {if (!o.empty) return { changes: [{ insert: e, from: o.from }, { insert: i, from: o.to }], effects: K.of(o.to + e.length), range: n.OF.range(o.anchor + e.length, o.head + e.length) };let a = st(t.doc, o.head);return !a || /\s/.test(a) || r.indexOf(a) > -1 ? { changes: { insert: e + i, from: o.head }, effects: K.of(o.head + e.length), range: n.OF.cursor(o.head + e.length) } : { range: s = o };});return s ? null : t.update(o, { scrollIntoView: !0, userEvent: "input.type" });}function at(t, e, i) {let r = null,s = t.changeByRange((e) => e.empty && st(t.doc, e.head) == i ? { changes: { from: e.head, to: e.head + i.length, insert: i }, range: n.OF.cursor(e.head + i.length) } : r = { range: e });return r ? null : t.update(s, { scrollIntoView: !0, userEvent: "input.type" });}function lt(t, e, i, r) {let o = r.stringPrefixes || W.stringPrefixes,a = null,l = t.changeByRange((r) => {if (!r.empty) return { changes: [{ insert: e, from: r.from }, { insert: e, from: r.to }], effects: K.of(r.to + e.length), range: n.OF.range(r.anchor + e.length, r.head + e.length) };let l,c = r.head,h = st(t.doc, c);if (h == e) {if (ct(t, c)) return { changes: { insert: e + e, from: c }, effects: K.of(c + e.length), range: n.OF.cursor(c + e.length) };if (rt(t, c)) {let r = i && t.sliceDoc(c, c + 3 * e.length) == e + e + e ? e + e + e : e;return { changes: { from: c, to: c + r.length, insert: r }, range: n.OF.cursor(c + r.length) };}} else {if (i && t.sliceDoc(c - 2 * e.length, c) == e + e && (l = ht(t, c - 2 * e.length, o)) > -1 && ct(t, l)) return { changes: { insert: e + e + e + e, from: c }, effects: K.of(c + e.length), range: n.OF.cursor(c + e.length) };if (t.charCategorizer(c)(h) != n.Je.Word && ht(t, c, o) > -1 && !function (t, e, i, n) {let r = (0, s.mv)(t).resolveInner(e, -1),o = n.reduce((t, e) => Math.max(t, e.length), 0);for (let s = 0; s < 5; s++) {let s = t.sliceDoc(r.from, Math.min(r.to, r.from + i.length + o)),a = s.indexOf(i);if (!a || a > -1 && n.indexOf(s.slice(0, a)) > -1) {let e = r.firstChild;for (; e && e.from == r.from && e.to - e.from > i.length + a;) {if (t.sliceDoc(e.to - i.length, e.to) == i) return !1;e = e.firstChild;}return !0;}let l = r.to == e && r.parent;if (!l) break;r = l;}return !1;}(t, c, e, o)) return { changes: { insert: e + e, from: c }, effects: K.of(c + e.length), range: n.OF.cursor(c + e.length) };}return { range: a = r };});return a ? null : t.update(l, { scrollIntoView: !0, userEvent: "input.type" });}function ct(t, e) {let i = (0, s.mv)(t).resolveInner(e + 1);return i.parent && i.from == e;}function ht(t, e, i) {let r = t.charCategorizer(e);if (r(t.sliceDoc(e - 1, e)) != n.Je.Word) return e;for (let s of i) {let i = e - s.length;if (t.sliceDoc(i, e) == s && r(t.sliceDoc(i - 1, i)) != n.Je.Word) return i;}return -1;}function ut(t = {}) {return [$, N, b.of(t), H, pt, G];}const dt = [{ key: "Ctrl-Space", run: z }, { mac: "Alt-`", run: z }, { mac: "Alt-i", run: z }, { key: "Escape", run: (t) => {let e = t.state.field(N, !1);return !(!e || !e.active.some((t) => 0 != t.state) || (t.dispatch({ effects: m.of(null) }), 0));} }, { key: "ArrowDown", run: j(!0) }, { key: "ArrowUp", run: j(!1) }, { key: "PageDown", run: j(!0, "page") }, { key: "PageUp", run: j(!1, "page") }, { key: "Enter", run: (t) => {let e = t.state.field(N, !1);return !(t.state.readOnly || !e || !e.open || e.open.selected < 0 || e.open.disabled || Date.now() - e.open.timestamp < t.state.facet(b).interactionDelay) && V(t, e.open.options[e.open.selected]);} }],pt = n.Nb.highest(r.w4.computeN([b], (t) => t.facet(b).defaultKeymap ? [dt] : []));}, 7408: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(6541),r = Array.prototype.find;function s() {return this.firstElementChild;}function o(t) {return this.select(null == t ? s : function (t) {return function () {return r.call(this.children, t);};}("function" == typeof t ? t : (0, n.j)(t)));}}, 7414: (t, e, i) => {"use strict";const n = i(144);t.exports = (t, e) => {const i = n(t.trim().replace(/^[=v]+/, ""), e);return i ? i.version : null;};}, 7417: (t, e, i) => {"use strict";i.d(e, { G: () => o });const n = "undefined" == typeof Symbol ? "__" : Symbol.for(""),r = "undefined" == typeof Symbol ? "__styleSet" + Math.floor(1e8 * Math.random()) : Symbol("styleSet"),s = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : {};class o {constructor(t, e) {this.rules = [];let { finish: i } = e || {};function n(t) {return /^@/.test(t) ? [t] : t.split(/,\s*/);}function r(t, e, s, o) {let a = [],l = /^@(\w+)\b/.exec(t[0]),c = l && "keyframes" == l[1];if (l && null == e) return s.push(t[0] + ";");for (let i in e) {let o = e[i];if (/&/.test(i)) r(i.split(/,\s*/).map((e) => t.map((t) => e.replace(/&/, t))).reduce((t, e) => t.concat(e)), o, s);else if (o && "object" == typeof o) {if (!l) throw new RangeError("The value of a property (" + i + ") should be a primitive value.");r(n(i), o, a, c);} else null != o && a.push(i.replace(/_.*/, "").replace(/[A-Z]/g, (t) => "-" + t.toLowerCase()) + ": " + o + ";");}(a.length || c) && s.push((!i || l || o ? t : t.map(i)).join(", ") + " {" + a.join(" ") + "}");}for (let e in t) r(n(e), t[e], this.rules);}getRules() {return this.rules.join("\n");}static newName() {let t = s[n] || 1;return s[n] = t + 1, "" + t.toString(36);}static mount(t, e, i) {let n = t[r],s = i && i.nonce;n ? s && n.setNonce(s) : n = new l(t, s), n.mount(Array.isArray(e) ? e : [e], t);}}let a = new Map();class l {constructor(t, e) {let i = t.ownerDocument || t,n = i.defaultView;if (!t.head && t.adoptedStyleSheets && n.CSSStyleSheet) {let e = a.get(i);if (e) return t[r] = e;this.sheet = new n.CSSStyleSheet(), a.set(i, this);} else this.styleTag = i.createElement("style"), e && this.styleTag.setAttribute("nonce", e);this.modules = [], t[r] = this;}mount(t, e) {let i = this.sheet,n = 0,r = 0;for (let e = 0; e < t.length; e++) {let s = t[e],o = this.modules.indexOf(s);if (o < r && o > -1 && (this.modules.splice(o, 1), r--, o = -1), -1 == o) {if (this.modules.splice(r++, 0, s), i) for (let t = 0; t < s.rules.length; t++) i.insertRule(s.rules[t], n++);} else {for (; r < o;) n += this.modules[r++].rules.length;n += s.rules.length, r++;}}if (i) e.adoptedStyleSheets.indexOf(this.sheet) < 0 && (e.adoptedStyleSheets = [this.sheet, ...e.adoptedStyleSheets]);else {let t = "";for (let e = 0; e < this.modules.length; e++) t += this.modules[e].getRules() + "\n";this.styleTag.textContent = t;let i = e.head || e;this.styleTag.parentNode != i && i.insertBefore(this.styleTag, i.firstChild);}}setNonce(t) {this.styleTag && this.styleTag.getAttribute("nonce") != t && this.styleTag.setAttribute("nonce", t);}}}, 7447: (t, e, i) => {"use strict";i.d(e, { b: () => s });var n = i(4653);class r extends n.T {element;data;settings;pending = {};constructor(t, e, i) {super(), this.element = t, this.data = e, this.settings = i;}save() {const t = [].concat(...Object.values(this.pending));this.trigger("save", t);}close(t = 1) {this.trigger("close", t);}}class s extends r {get title() {return "Step";}draw() {return null;}}}, 7479: (t, e, i) => {"use strict";i.d(e, { A: () => a });var n = i(6957),r = i(8981),s = i(7737),o = i(1197);function a(t, e) {var i;return ("number" == typeof e ? r.A : e instanceof n.Ay ? o.Ay : (i = (0, n.Ay)(e)) ? (e = i, o.Ay) : s.A)(t, e);}}, 7492: (t, e, i) => {"use strict";i.d(e, { s: () => c });var n = i(3895),r = i(5457),s = i(3571),o = i(1807),a = i(7077),l = i(100);class c extends o.T0G {config;svgMap;errorHandler;previewContainer;svgContainer;mapMainDetails;mapSizeDetails;refreshBtn;editBtn;loadingEl;protectedMarker;constructor(t) {super(), this.config = t;const e = { previewContainer: document.body, showEditButton: !0, showProtection: !1, noMargin: !1, model: null };this.config = { ...e, ...t }, this.previewContainer = t.previewContainer, (0, o.tTh)(".map-preview-box" + (this.config.noMargin ? "" : ".margin"), this.previewContainer, [(0, o.tTh)(".map-svg-container", { middleware: (t) => this.svgContainer = t })]);}show(t) {t && t.svg && (this.svgMap = new r.F({ model: this.config.model, mapArea: this.svgContainer, jsvg: t, context: "preview" }), this.svgMap.draw());}showInfo(t, e = !0) {t && (this.drawMapFooterDetails(t, e), this.drawMapMainDetails(t), this.drawRefreshButton(t), this.config.showEditButton && this.drawEditButton(t), this.config.showProtection && t.protection !== l.Qn.None && this.toggleProtectedMarker(!0));}updateMapName(t) {if (t && this.mapMainDetails) {const e = this.mapMainDetails.querySelector(".map-title");e && (e.textContent = t, e.setAttribute("title", t));}}updateMapAuthor(t) {if (this.mapMainDetails) {const e = this.mapMainDetails.querySelector(".map-author");e && ("" == t ? (e.textContent = "", e.removeAttribute("title")) : (e.textContent = `By ${t}`, e.setAttribute("title", `Author: ${t}`)));}}toggleProtectedMarker(t) {this.protectedMarker?.remove(), t && (this.protectedMarker = (0, o.tTh)(".protected-marker", this.previewContainer, { attr: { title: "This map is protected with a password" } }, [(0, o.tTh)(".icon.icon-lock.small"), (0, o.tTh)("span.text.small", "Protected")]));}loading() {this.loadingEl && this.loadingEl.remove(), this.refreshBtn?.classList.add("refreshing"), (0, o.tTh)(".loading", this.previewContainer, { middleware: (t) => this.loadingEl = t }, [(0, o.tTh)(".loader")]);}endLoading() {this.loadingEl && this.loadingEl.remove(), this.refreshBtn?.classList.remove("refreshing");}drawEditButton(t) {if (!t || !t.jsvg) return;const e = t.protection !== l.Qn.None;this.editBtn && this.editBtn.remove(), (0, o.tTh)(".synoptic-btn.white.edit-btn.ctrl", this.previewContainer, { middleware: (t) => this.editBtn = t, events: { click: () => {this.trigger("editMap");} } }, [(0, o.tTh)(".group.white.small.edit", { attr: { title: "Edit this map" + (e ? " (protected with a password)" : "") } }, [(0, o.tTh)(`.icon.icon-${e ? "lock" : "edit"}.small`), (0, o.tTh)("span.text.small", "Edit")])]);}drawMapMainDetails(t) {if (!t) return;let e;this.mapMainDetails && this.mapMainDetails.remove(), (0, o.tTh)(".map-main-details", this.previewContainer, { middleware: (t) => this.mapMainDetails = t }, [(0, o.tTh)(".det-container", { middleware: (t) => e = t }, [(0, o.tTh)("span.map-title", t.name)])]), t.source && (0, o.tTh)("span.map-source" + (t.location === n.k.Remote ? ".link" : ""), e, { events: { click: (e, i) => {i.classList.contains("link") && this.trigger("launchUrl", t.source);} } }, t.source ?? ""), t.author && (0, o.tTh)("span.map-author", e, { attr: { title: `Author: ${t.author}` } }, `By ${t.author}`);}drawMapFooterDetails(t, e = !0) {if (!t) return;this.mapSizeDetails && this.mapSizeDetails.remove();const i = t.updated ? new Date(t.updated) : null,n = i ? i.toLocaleString(navigator.language, { month: "short", day: "numeric", year: "numeric", hour: "numeric", minute: "numeric" }) : null,r = e && t.size ? (0, a.v7)(t.size) : null;i && n && (0, o.tTh)(".map-file-details", this.previewContainer, { middleware: (t) => this.mapSizeDetails = t }, `${n}${r ? ` - ${r}` : ""}`);}drawRefreshButton(t) {this.refreshBtn && this.refreshBtn.remove(), t.location !== n.k.Local && (0, o.tTh)(".icon-refresh.refresh-btn.preview-refresh.ctrl", this.previewContainer, { middleware: (t) => this.refreshBtn = t, events: { click: (t, e) => {e.classList.contains("refreshing") || (e.classList.add("refreshing"), this.trigger("refreshMap"));} } });}raiseError(t) {this.errorHandler && this.errorHandler.destroy(), this.endLoading(), this.errorHandler = new s.z({ error: t, container: this.previewContainer }), this.errorHandler.render();}destroyMap() {this.svgContainer && this.svgContainer.firstChild?.remove(), this.errorHandler && (this.errorHandler.destroy(), this.errorHandler = null), this.svgMap && (this.svgMap.destroy(), this.svgMap = null);}destroyMapInfo() {this.mapMainDetails && this.mapMainDetails.remove(), this.mapSizeDetails && this.mapSizeDetails.remove(), this.protectedMarker && this.protectedMarker.remove(), this.editBtn && this.editBtn.remove();}destroy() {this.destroyMap(), this.loadingEl && this.loadingEl.remove(), this.editBtn && this.editBtn.remove(), this.mapMainDetails && this.mapMainDetails.remove(), this.mapSizeDetails && this.mapSizeDetails.remove(), this.refreshBtn && this.refreshBtn.remove(), this.svgContainer && this.svgContainer.remove(), this.previewContainer = null, super.destroy();}}}, 7493: (t, e, i) => {"use strict";i.d(e, { Dp: () => c, Rb: () => o, T0: () => a, Ye: () => l, h2: () => h, ie: () => r, n: () => s });class n extends Error {constructor(t, e) {super(t, e), this.code = "ERR_JOSE_GENERIC", this.name = this.constructor.name, Error.captureStackTrace?.(this, this.constructor);}}n.code = "ERR_JOSE_GENERIC";class r extends n {constructor(t, e, i = "unspecified", n = "unspecified") {super(t, { cause: { claim: i, reason: n, payload: e } }), this.code = "ERR_JWT_CLAIM_VALIDATION_FAILED", this.claim = i, this.reason = n, this.payload = e;}}r.code = "ERR_JWT_CLAIM_VALIDATION_FAILED";class s extends n {constructor(t, e, i = "unspecified", n = "unspecified") {super(t, { cause: { claim: i, reason: n, payload: e } }), this.code = "ERR_JWT_EXPIRED", this.claim = i, this.reason = n, this.payload = e;}}s.code = "ERR_JWT_EXPIRED";class o extends n {constructor() {super(...arguments), this.code = "ERR_JOSE_ALG_NOT_ALLOWED";}}o.code = "ERR_JOSE_ALG_NOT_ALLOWED";class a extends n {constructor() {super(...arguments), this.code = "ERR_JOSE_NOT_SUPPORTED";}}a.code = "ERR_JOSE_NOT_SUPPORTED", class extends n {constructor(t = "decryption operation failed", e) {super(t, e), this.code = "ERR_JWE_DECRYPTION_FAILED";}}.code = "ERR_JWE_DECRYPTION_FAILED", class extends n {constructor() {super(...arguments), this.code = "ERR_JWE_INVALID";}}.code = "ERR_JWE_INVALID";class l extends n {constructor() {super(...arguments), this.code = "ERR_JWS_INVALID";}}l.code = "ERR_JWS_INVALID";class c extends n {constructor() {super(...arguments), this.code = "ERR_JWT_INVALID";}}c.code = "ERR_JWT_INVALID", class extends n {constructor() {super(...arguments), this.code = "ERR_JWK_INVALID";}}.code = "ERR_JWK_INVALID", class extends n {constructor() {super(...arguments), this.code = "ERR_JWKS_INVALID";}}.code = "ERR_JWKS_INVALID", class extends n {constructor(t = "no applicable key found in the JSON Web Key Set", e) {super(t, e), this.code = "ERR_JWKS_NO_MATCHING_KEY";}}.code = "ERR_JWKS_NO_MATCHING_KEY", Symbol.asyncIterator, class extends n {constructor(t = "multiple matching keys found in the JSON Web Key Set", e) {super(t, e), this.code = "ERR_JWKS_MULTIPLE_MATCHING_KEYS";}}.code = "ERR_JWKS_MULTIPLE_MATCHING_KEYS", class extends n {constructor(t = "request timed out", e) {super(t, e), this.code = "ERR_JWKS_TIMEOUT";}}.code = "ERR_JWKS_TIMEOUT";class h extends n {constructor(t = "signature verification failed", e) {super(t, e), this.code = "ERR_JWS_SIGNATURE_VERIFICATION_FAILED";}}h.code = "ERR_JWS_SIGNATURE_VERIFICATION_FAILED";}, 7499: (t, e, i) => {"use strict";function n() {this.textContent = "";}function r(t) {return function () {this.textContent = t;};}function s(t) {return function () {var e = t.apply(this, arguments);this.textContent = null == e ? "" : e;};}function o(t) {return arguments.length ? this.each(null == t ? n : ("function" == typeof t ? s : r)(t)) : this.node().textContent;}i.d(e, { A: () => o });}, 7512: (t, e, i) => {"use strict";i.d(e, { V: () => o });var n = i(6639),r = i(641),s = i(2140);class o extends s.c {min;max;step;round = !0;suffix;placeholder;hasSlider;inputElement;sliderElement;constructor(t) {t.optionType = "number", super(t), Object.assign(this, t);}render(t) {super.render(t);const e = this.displayValue,i = null != e && this.round ? Math.round(e) : e;(0, n.tT)(".oop-number", this.element, [(0, r.W)("", null, { min: this.min, max: this.max, step: this.step, suffix: this.suffix, placeholder: this.placeholder || "", upDown: !0, value: i, change: (t, e) => {this.value = this.sanitizeValue(e), this.updateValue(this.value), this.onChange && this.onChange(this.value);}, middleware: (t) => this.inputElement = t.querySelector("input") }), ...(this.hasSlider ? [(0, n.tT)(".slider-container", [(0, n.tT)("input", { attr: { type: "range", min: this.min, max: this.max, value: i }, events: { input: (t, e) => {this.value = this.sanitizeValue(e.value), this.updateValue(this.value), this.onChange && this.onChange(this.value);} }, middleware: (t) => this.sliderElement = t })])] : [])]), this.updateTrack();}sanitizeValue(t) {return "string" == typeof t && (t = parseFloat(t)), null != t && (t = Math.max(this.min || -1 / 0, Math.min(this.max || 1 / 0, t)), this.round && (t = Math.round(t))), t;}refresh() {this.updateValue(this.sanitizeValue(this.displayValue));const t = this.isMixed;this.inputElement.placeholder = t ? "(Mixed)" : this.placeholder || "", this.element.querySelector(".input-buttons").toggleAttribute("disabled", t);}updateValue(t) {const e = null == t ? "" : t.toString();this.inputElement.value = e, this.sliderElement && (this.sliderElement.value = e, this.updateTrack());}updateTrack() {if (!this.sliderElement) return;const t = parseFloat(this.sliderElement.value),e = parseFloat(this.sliderElement.max),i = parseFloat(this.sliderElement.min),n = (t - i) / (e - i) * 100;this.sliderElement.style.background = `linear-gradient(to right, #605e5c ${n}%, #c8c6c4 ${n}%)`;}destroy() {this.inputElement = null, this.sliderElement = null, super.destroy();}}}, 7530: (t, e, i) => {"use strict";i.d(e, { h: () => u });var n = i(2017),r = i(1807),s = i(631),o = i(8689),a = i(9048),l = i(457),c = i(2459);const h = "licman";class u extends r.T0G {meta;options;featurePropsResetSeconds = 60;resetFeaturePropsTimeout;watermarkTimeout;watermarkAppearAfterSeconds = 30;currentNotificationProps;visualUpdate;iconElement;watermarkElement;services = [];get service() {return this.services.length ? this.services.find((t) => t.isActive) || this.services[0] : null;}get okvizService() {return this.services.find((t) => "okviz" == t.type);}get appSourceService() {return this.services.find((t) => "appSource" == t.type);}get isReadingView() {return 0 == this.visualUpdate?.viewMode;}get status() {return this.service?.status;}get type() {return this.service?.type ?? "notSet";}get isValid() {return !!this.service && (this.service.isActive || this.service.isTrial || this.service.isGracePeriod);}get isActive() {return this.service?.isActive || !1;}get isInactive() {return this.service?.isInactive || !1;}get isGracePeriod() {return this.service?.isGracePeriod || !1;}get isSuspended() {return this.service?.isSuspended || !1;}get isTrial() {return this.service?.isTrial || !1;}get isSupported() {return this.service?.isSupported ?? !0;}get isEmbedded() {return this._isEmbedded;}_isEmbedded = !1;constructor(t, e = {}) {super(), this.meta = t, this.options = e;let i = this.meta.config.visual.ls;if (this.meta.isDev && !i) {const t = this.meta.config.editions?.find((t) => t.type == this.meta.config.visual.edition);t?.licensing && (i = { p: t.licensing.platforms.map((t) => "appSource" == t ? r.Exh.AppSource : r.Exh.OKVIZ), ap: t.licensing.appSourcePlans });}(i?.p ?? []).forEach((n) => {n == r.Exh.AppSource ? this.services.push(new a.f(i, t, this.meta.isDev ? e.dev?.appSource : null)) : n == r.Exh.OKVIZ && this.services.push(new o.U(i, t, this.meta.isDev ? e.dev?.okviz : null, e.fetchingOptions));});try {thisVisual.host.licenseManager.getAvailableServicePlans().then((t) => {this._isEmbedded = t.isLicenseUnsupportedEnv;});} catch {}this.services.forEach((t) => t.on("fetched", () => {this.check(), this.trigger("fetched", { service: t.type });}));}async update(t) {if (this.services.length && !thisVisual.internalUpdate && !(0, r.p_R)(t.dataViews) && (this.visualUpdate = t, r.s54.UPDATE(t), this.updateIcon(), 2 & t.type && (0, r.PLM)(t.dataViews[0].metadata.objects, l.c, "dialog", !1) && this.openDialog(), this.options.required)) {for (let e = 0; e < this.services.length; e++) await this.services[e].update(t);this.check();}}check() {if (this.isActive || this.isTrial) return void this.clearNotifications();const t = this.getRequiredNotification();if (t) {if (this.isSupported) {if (this.isSuspended) this.showNotification({ type: s.uW.BlockOrBanner, icon: "alert", iconColor: "#ff0000", label: "Suspended", title: "Suspended License", text: "The license was cancelled or suspended due to a payment problem or policy violation.", callToAction: !1 });else if (this.isGracePeriod) this.showNotification({ type: s.uW.NoneOrBanner, icon: "alert", iconColor: "#ff0000", label: "Grace Period", title: "Expired License (Grace Period)", text: "The license is expired, but the visual is still working for a limited time. Please renew the license as soon as possible.", callToAction: !1, dismissible: !0 });else {this.showNotification(t);const e = t.type == s.uW.Block || this.isReadingView && (t.type == s.uW.BlockOrBanner || t.type == s.uW.BlockOrIcon);this.options.showWatermark && !e && (this.watermarkTimeout || (this.watermarkTimeout = window.setTimeout(() => {this.showWatermark(), this.watermarkTimeout = null;}, 1e3 * this.watermarkAppearAfterSeconds)));}} else this.showNotification({ type: s.uW.Block, icon: "error", iconColor: "#ff0000", label: "Unsupported", title: "Unsupported Environment", text: this.service?.unsupportedMessage || "This visual is not supported in the current environment.", callToAction: !1 });} else this.clearNotifications();}getRequiredNotification() {let t;if (!this.meta.isDemo) {if (this.options.required) {if (this.options.required.if) {const e = this.options.required.if();"boolean" == typeof e ? !0 === e && (t = { type: s.uW.BlockOrIcon, label: "Activate", title: "Invalid or Expired License", text: "This visual requires a valid license to be used." }) : t = e;}if (this.options.required.ifRoles?.length && this.visualUpdate?.dataViews?.[0] && this.hasChangedFeatureRoles(this.visualUpdate.dataViews[0]) && (t = { type: s.uW.BlockOrIcon, label: "Activate", title: "Invalid or Expired License", text: "This visual uses some fields that are not available with free license. Clear them or activate a license to continue." }), this.options.required.ifProperties?.length && this.visualUpdate?.dataViews?.[0]) {const e = this.getChangedFeatureProps(this.visualUpdate.dataViews[0]);e.length && (this.options.required.autoResetProperties ? this.resetFeatures(e) : t = { type: s.uW.BlockOrIcon, title: "Unlicensed Features", text: "This visual uses some premium features. Disable them or activate a license to continue." });}this.options.required.ifEmbedded && this.isEmbedded && (t = { type: s.uW.BlockOrIcon, label: "Activate", title: "Unlicensed Environment", text: "This visual requires a valid license to be used in embedded or special environments such as Power BI Report Server, Power BI Embedded (Publish to Web, PaaS embed), and National Clouds." });}return t;}}getChangedFeatureProps(t) {if (!t.metadata.objects) return [];if (!this.options.required?.ifProperties) return [];const e = [],i = (t) => {e.push({ propertyPath: t.propertyPath, defaultValue: t.defaultValue });};return this.options.required.ifProperties.forEach((e) => {const [s, o] = e.propertyPath.split("."),a = (0, r.PLM)(t.metadata.objects, s, o, e.defaultValue);e.equalTo ? n(a, e.equalTo) && i(e) : e.differentFrom ? n(a, e.differentFrom) || i(e) : e.in ? e.in.includes(a) && i(e) : e.notIn ? e.notIn.includes(a) || i(e) : e.greaterThan ? a > e.greaterThan && i(e) : e.greaterOrEqualThan ? a >= e.greaterOrEqualThan && i(e) : e.lessThan ? a < e.lessThan && i(e) : e.lessOrEqualThan ? a <= e.lessOrEqualThan && i(e) : null != e.defaultValue ? n(a, e.defaultValue) || i(e) : null != a && i(e);}), e;}hasChangedFeatureRoles(t) {if (this.options.required?.ifRoles) for (let e = 0; e < this.options.required.ifRoles.length; e++) if (t.metadata.columns.find((t) => t.roles[this.options.required.ifRoles[e]])) return !0;return !1;}resetFeatures(t) {t.length && this.options.required?.autoResetProperties && (window.clearTimeout(this.resetFeaturePropsTimeout), this.resetFeaturePropsTimeout = window.setTimeout(() => {t.forEach((t) => {const [e, i] = t.propertyPath.split(".");r.XI0.BATCH({ objectName: e, properties: { [i]: t.defaultValue }, selector: null });}), r.XI0.BATCH_SAVE(!1), r.s54.SHOW({ icon: "certificate", iconAlign: "top", title: "Features Reset", text: "Some features have been reset to their default values since require a premium license to be used." });}, 1e3 * this.featurePropsResetSeconds));}adjustNotification(t) {const e = s.uW[t.type];if (e) {const [i, n] = e.split("Or");!this.isReadingView && n ? t.type = s.uW[n] : t.type = s.uW[i];}return t.icon || (t.icon = "certificate"), t.iconColor || (t.iconColor = "#117865"), null == t.callToAction && (t.callToAction = !0), t;}showNotification(t) {t = this.adjustNotification(t);const e = JSON.stringify(t);if (this.currentNotificationProps != e) if (this.clearNotifications(), this.currentNotificationProps = e, t.type == s.uW.Icon) this.iconElement = (0, r.tTh)(".licman-icon", document.body, { events: { click: () => this.openDialog() }, attr: { title: t.text || t.title } }, [(0, r.tTh)(`.icon.icon-${t.icon}`), (0, r.tTh)(".label", t.label || "Activate")]), this.updateIcon();else if (t.type == s.uW.Banner || t.type == s.uW.Block) {const e = t.type == s.uW.Banner;r.s54.SHOW({ id: h, icon: t.icon, iconColor: t.iconColor, uncloseable: !t.dismissible, force: !0, important: !0, ...(e ? { iconAlign: "top", position: "bottom" } : { iconAlign: "middle", fullSize: !0 }), title: t.title, text: t.text, callToAction: t.callToAction ? { ...(this.isReadingView ? { text: "Get a License", url: this.service?.purchaseUrl } : { text: "Activate" + (e ? "" : " License"), button: !0, onClick: () => this.openDialog() }) } : null });}}showWatermark() {this.watermarkElement || (this.watermarkElement = (0, r.tTh)(".licman-watermark", document.body, "Unlicensed"));}updateIcon() {if (!this.iconElement || !this.visualUpdate) return;const t = this.visualUpdate.viewport.scale;this.iconElement.style.transform = `scale(${1 / t})`;}async openDialog() {const t = { showAppSource: this.meta.isDev || !!this.meta.config.visual.appSourcePurchaseUrl, showOkviz: this.meta.isDev || !!this.meta.config.visual.okvizPurchaseUrl, showOkvizActivation: this.services.length > 1, pbiviz: this.meta.config },e = { width: t.showOkviz && t.showAppSource ? 800 : 375, height: (t.showAppSource ? 400 : 320) + (t.showOkvizActivation ? 100 : 0) },i = await this.okvizService?.getToken();"entra" == i?.type && (t.entraToken = i.token), thisVisual.host.openModalDialog(c.G.ID, { title: null, actionButtons: [], size: e }, t).then(async (t) => {if (t.resultState) if (t.resultState.targetUrl) thisVisual.host.launchUrl(t.resultState.targetUrl);else if (t.resultState.okviz) return void this.okvizService?.setLicense(t.resultState.okviz.license);r.XI0.SAVE({ objectName: l.c, properties: { dialog: !1 }, selector: null }, !1);}).catch((t) => {t.error && 3 == t.error && (0, r.ShP)();});}clearNotifications() {this.currentNotificationProps = null, r.s54.HIDE(h), this.iconElement && (this.iconElement.remove(), this.iconElement = null), window.clearTimeout(this.watermarkTimeout), this.watermarkTimeout = null, this.watermarkElement && (this.watermarkElement.remove(), this.watermarkElement = null);}enumerateSettings(t) {if (!this.services.length) return void (t.visible = !1);const e = this.status.statusCode == s.e2.Found;t.groups.find((t) => t.name == `${l.c}.status`).displayName = e ? `Status: ${this.status.status}` : this.status.status, t.status.value = e ? `This license is managed by ${"okviz" == this.type ? "OKVIZ" + (this.status.license?.refUrl ? ` (${this.status.license.refUrl})` : "") : "Microsoft (AppSource)"}.` : "", t.activate.visible = this.status.statusCode == s.e2.NotFound || this.isInactive || this.isTrial, t.groups.find((t) => t.name == `${l.c}.details`).visible = e, t.id.value = this.status.license?.id, t.id.visible = !!this.status.license?.id;const i = this.status.license?.customer || this.status.license?.tenantId;if (t.customer.displayName = this.status.license?.customer ? "Licensee:" : "Tenant:", t.customer.value = i, t.customer.visible = !!i, this.isTrial) {t.expiry.displayName = "Trial Ends on:";const e = new Date(this.status.license?.trialEnd);e && (t.expiry.value = e.toLocaleDateString()), t.expiry.visible = !!e;} else {t.expiry.displayName = "Expiration Date:";const e = new Date(this.status.license?.expiry);e && (t.expiry.value = e.toLocaleDateString()), t.expiry.visible = !!e;}}enumerateSettingsLegacy() {if (!this.services.length) return {};const t = this.status.license?.customer || this.status.license?.tenantId;return { [l.c]: [{ name: "status", value: this.status.status }, { name: "dialog", value: !1, if: () => this.status.statusCode == s.e2.NotFound || this.isInactive || this.isTrial }, { name: "id", value: this.status.license?.id, if: () => !!this.status.license?.id }, { name: "customer", value: t, if: () => !!t }, { name: "expiry", value: new Date(this.status.license?.expiry).toLocaleDateString(), if: () => !!this.status.license?.expiry }, { name: "platform", value: `Managed by ${"okviz" == this.type ? "OKVIZ" : "Microsoft (AppSource)"}.`, if: () => this.status.statusCode == s.e2.Found || this.status.statusCode == s.e2.Unsupported }] };}destroy() {this.clearNotifications(), this.visualUpdate = null, this.services.forEach((t) => t.destroy()), super.destroy();}}}, 7534: (t, e, i) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.getCustomFormatMetadata = e.formatWithCustomOverride = e.format = e.isStandardFormat = e.canFormat = e.getComponents = e.hasFormatComponents = e.addDecimalsToFormat = e.getNumericFormat = e.NumberFormatComponentsDelimeter = void 0;var n,r = i(7717),s = i(2087),o = i(1248),a = i(6459),l = i(3100),c = /\{.+\}/,h = /e[+-]*[0#]+/i,u = /^[a-z]\d{0,2}$/i,d = /0+$/,p = /\.([0#]*)/g,f = /[0#,\.]+[0,#]*/g,g = /([0#])(?=[^0#]*$)/,m = "0",v = "#",y = new RegExp([m, v].join("|"), "g");function b(t, e) {if (null == e) return e;if (S(e)) {var i = E(e),n = i.positive,r = i.negative,s = i.zero;return w(0, t > 0 ? n : 0 === t ? s : r);}return w(0, e);}function w(t, e) {var i = s.regExpExtensions.run(f, e);return i ? i[0] : e;}function x(t, e, i) {if ((e = Math.abs(e)) >= 0) {var n = [];t = a.preserveLiterals(t, n);var r = i ? m : v,l = o.repeat(r, Math.abs(e)),c = s.regExpExtensions.run(p, t);if (c) {var h = t.substring(0, c.index),u = t.substring(c.index + 1, c[1].length + c.index + 1),d = t.substring(c.index + c[0].length);if (i) u = l;else {var f = l.length - u.length;f > 0 ? u += l.slice(-f) : f < 0 && (u = u.slice(0, f));}u.length > 0 && (u = "." + u), t = h + u + d;} else l.length > 0 && (t = t.replace(g, "$1." + l));0 !== n.length && (t = a.restoreLiterals(t, n));}return t;}function S(t) {return -1 !== a.removeLiterals(t).indexOf(e.NumberFormatComponentsDelimeter);}function E(t) {var i = { hasNegative: !1, positive: t, negative: t, zero: t },n = [],r = (t = a.preserveLiterals(t, n)).split(e.NumberFormatComponentsDelimeter),s = r.length;return s > 1 && (0 !== n.length && (r = r.map(function (t) {return a.restoreLiterals(t, n);})), i.hasNegative = !0, i.positive = i.zero = r[0], i.negative = r[1], s > 2 && (i.zero = r[2])), i;}function C(t) {return u.test(t);}function k(t, e, i, o) {var c,u = i.numberFormat;if (!isFinite(t)) return r.Globalize.format(t, void 0);var d = E(e);e = t > 0 ? d.positive : 0 === t ? d.zero : d.negative, d.hasNegative && (t = Math.abs(t));var p = A(e, !0),f = [];if (p.hasLiterals && (e = a.preserveLiterals(e, f)), p.hasE && !o) {var g = s.regExpExtensions.run(h, e);if (g) {var m = e.substring(0, g.index),v = e.substring(g.index + 2),y = M(m, p);if (1 !== (O = P(m, p)) && (t *= O), "number" != typeof t) return String(t);var w = t.toExponential(y),x = w.indexOf("e"),S = w.substring(0, x),C = w.substring(x + 1),k = D(S, m, u),_ = D(C, v, u);"+" === _.charAt(0) && "+" !== g[0].charAt(1) && (_ = _.substring(1)), c = k + g[0].charAt(0) + _;}}if (void 0 === c) {var O,I = void 0,F = !1;if (y = M(e, p), 1 !== (O = P(e, p)) && (t *= O), t = parseFloat(T(t, y)), !isFinite(t)) return r.Globalize.format(t, void 0);o ? (o = function (t, e) {if (!e || void 0 === t) return t;var i = "{0:" + e + "}";return t.replace("{0}", i);}(o, b(t, e)), I = l.formattingService.format(o, [t], i.name), F = !0) : I = T(t, y), c = D(I, e, u, o, F);}return p.hasLiterals && (c = a.restoreLiterals(c, f, !1)), n = p, c;}function T(t, e) {var i = "",n = 0;e > 16 && (n = e - 16, e = 16);var r = s.double.log10(Math.abs(t));if (r < 16) {if (r > 0) {var a = 16 - r;e > a && (n += e - a, e = a);}i = t.toFixed(e);} else if (16 === r) i = t.toFixed(0), (n += e) > 0 && (i += ".");else {if ("number" != typeof t) return String(t);var l = (i = t.toExponential(15)).indexOf("e");if (l > 0) {var c = i.indexOf("."),h = i.substring(0, l),u = i.substring(l + 1),d = parseInt(u, 10) - (h.length - c - 1);i = h.replace(".", "") + o.repeat("0", d), e > 0 && (i = i + "." + o.repeat("0", e));}}return n > 0 && (i += o.repeat("0", n)), i;}function A(t, e, i, r) {if (void 0 !== n && t === n.format) return n;for (var s = [], o = a.preserveLiterals(t, s), l = { format: t, hasLiterals: 0 !== s.length, hasE: !1, hasCommas: !1, hasDots: !1, hasPercent: !1, hasPermile: !1, precision: void 0, scale: void 0, partsPerScale: void 0 }, c = 0, h = o.length; c < h; c++) switch (o.charAt(c)) {case "e":case "E":l.hasE = !0;break;case ",":l.hasCommas = !0;break;case ".":l.hasDots = !0;break;case "%":l.hasPercent = !0;break;case "":l.hasPermile = !0;}var u = E(t);return e && (l.precision = M(u.positive, l)), r && (l.partsPerScale = _(u.positive, l)), i && (l.scale = P(u.positive, l)), l;}function M(t, e) {if (e.precision > -1) return e.precision;var i = 0;if (e.hasDots) {e.hasLiterals && (t = a.removeLiterals(t));var n = t.indexOf(".");if (n > -1) {for (var r = t.length, s = n; s < r; s++) {var o = t.charAt(s);if (o.match(y) && i++, "E" === o) break;}i = Math.min(19, i);}}return e.precision = i, i;}function _(t, e) {if (null != e.partsPerScale) return e.partsPerScale;var i = 1;return e.hasPercent && t.indexOf("%") > -1 && (i *= 100), e.hasPermile && t.indexOf("") > -1 && (i *= 1e3), e.partsPerScale = i, i;}function P(t, e) {if (e.scale > -1) return e.scale;var i = _(t, e);if (e.hasCommas) {var n = t.indexOf(".");-1 === n && (n = t.length);for (var r = n - 1; r > -1 && "," === t.charAt(r); r--) i /= 1e3;}return e.scale = i, i;}function D(t, e, i, n, r) {var s = !!n,o = e.split(".", 2);if (2 === o.length) {var a = o[0],l = o[1],h = "";n && (h = n.replace(c, ""), t = t.replace(h, ""));var u = i["."],p = r ? u : ".",f = t.split(p, 2),g = 1 === f.length ? f[0] + h : f[0],b = 2 === f.length ? f[1] + h : "";b = b.replace(d, "");var w = O(g, a, i, s),x = function (t, e, i) {var n = e.length,r = t.length;if (i) {var s = e.charAt(n - 1);return s.match(y) ? { value: t, fmtOnly: "" === t } : { value: t + s, fmtOnly: "" === t };}for (var o = "", a = !0, l = 0, c = 0; c < n; c++) {var h = e.charAt(c);if (l < r) switch (h) {case m:case v:o += t[l++], a = !1;break;default:o += h;} else h !== v && (o += h, a = a && h !== m);}return { value: o, fmtOnly: a };}(b, l, s);return x.fmtOnly || "" === x.value ? w + x.value : w + u + x.value;}return O(t, e, i, s);}function O(t, e, i, n) {var r = e.indexOf(","),s = r > -1 && r < Math.max(e.lastIndexOf("0"), e.lastIndexOf("#")) && i[","],o = 0,a = 0,l = i.groupSizes || [3],c = l[0],h = i[","],u = "",d = t.charAt(0);"+" !== d && "-" !== d || (u = i[d], t = t.substring(1));for (var p = "0" === t, f = "", g = "", y = t.length - 1, b = !0, w = e.length - 1; w > -1; w--) {var x = e.charAt(w);switch (x) {case m:case v:b = !1, "" !== g && (f = g + f, g = ""), n || ((y > -1 || x === m) && s && (o === c ? (f = h + f, ++a < l.length && (c = l[a]), o = 1) : o++), y > -1 ? (p && x === v || (f = t.charAt(y) + f), y--) : x !== v && (f = x + f));break;case ",":break;default:g = x + g;}}if (!n) {if (y > -1 && "" !== f) if (s) for (; y > -1;) o === c ? (f = h + f, ++a < l.length && (c = l[a]), o = 1) : o++, f = t.charAt(y) + f, y--;else f = t.substring(0, y + 1) + f;return u + g + f;}return b ? u + g + f : u + g + t + f;}function I(t, e) {var i = e["+"],n = e["-"],r = e["."],s = e[","];if ("+" === i && "-" === n && "." === r && "," === s) return t;for (var o = t.length, a = "", l = 0; l < o; l++) {var c = t.charAt(l);switch (c) {case "+":a += i;break;case "-":a += n;break;case ".":a += r;break;case ",":a += s;break;default:a += c;}}return a;}e.NumberFormatComponentsDelimeter = ";", e.getNumericFormat = b, e.addDecimalsToFormat = function (t, i, n) {if (null == i) return t;if (null == t && (t = m), S(t)) {for (var r = E(t), s = [r.positive, r.negative, r.zero], o = 0; o < s.length; o++) s[o] = x(s[o], i, n);return s.join(e.NumberFormatComponentsDelimeter);}return x(t, i, n);}, e.hasFormatComponents = S, e.getComponents = E, e.canFormat = function (t) {return "number" == typeof t;}, e.isStandardFormat = C, e.format = function (t, e, i) {e = e || "G";try {return C(e) ? function (t, e, i) {var n,s = e.length > 1 ? parseInt(e.substring(1, e.length), 10) : void 0,a = i.numberFormat,l = e.charAt(0),c = Math.abs(t);switch (l) {case "e":case "E":void 0 === s && (s = 6), n = k(t, e = "0." + o.repeat("0", s) + l + "+000", i);break;case "f":case "F":n = I(n = void 0 !== s ? t.toFixed(s) : t.toFixed(a.decimals), a);break;case "g":case "G":if (0 === c || 1e-4 <= c && c < 1e15) n = void 0 !== s ? t.toPrecision(s) : t.toString();else {if ("number" != typeof t) return String(t);n = (n = void 0 !== s ? t.toExponential(s) : t.toExponential()).replace("e", "E");}n = I(n, a);break;case "r":case "R":n = I(n = t.toString(), a);break;case "x":case "X":if (n = t.toString(16), "X" === l && (n = n.toUpperCase()), void 0 !== s) {var h = n.length,u = t < 0;u && h--;var d = s - h,p = void 0;d > 0 && (p = o.repeat("0", d)), n = u ? "-" + p + n.substring(1) : p + n;}n = I(n, a);break;default:n = r.Globalize.format(t, e, i);}return n;}(t, e, i) : k(t, e, i);} catch (e) {return r.Globalize.format(t, void 0, i);}}, e.formatWithCustomOverride = function (t, e, i, n) {return k(t, e, n, i);}, e.getCustomFormatMetadata = A;}, 7590: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(7235);function r(t, e) {return Math.max(0, 3 * Math.max(-8, Math.min(8, Math.floor((0, n.A)(e) / 3))) - (0, n.A)(Math.abs(t)));}}, 7610: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(1882);function r(t) {for (var e = t.selection ? t.selection() : t, i = this._groups, r = e._groups, s = i.length, o = r.length, a = Math.min(s, o), l = new Array(s), c = 0; c < a; ++c) for (var h, u = i[c], d = r[c], p = u.length, f = l[c] = new Array(p), g = 0; g < p; ++g) (h = u[g] || d[g]) && (f[g] = h);for (; c < s; ++c) l[c] = i[c];return new n.LN(l, this._parents);}}, 7612: (t, e) => {"use strict";e.isInteger = (t) => "number" == typeof t ? Number.isInteger(t) : "string" == typeof t && "" !== t.trim() && Number.isInteger(Number(t)), e.find = (t, e) => t.nodes.find((t) => t.type === e), e.exceedsLimit = (t, i, n = 1, r) => !1 !== r && !(!e.isInteger(t) || !e.isInteger(i)) && (Number(i) - Number(t)) / Number(n) >= r, e.escapeNode = (t, e = 0, i) => {const n = t.nodes[e];n && (i && n.type === i || "open" === n.type || "close" === n.type) && !0 !== n.escaped && (n.value = "\\" + n.value, n.escaped = !0);}, e.encloseBrace = (t) => !("brace" !== t.type || t.commas >> 0 + t.ranges | 0 || (t.invalid = !0, 0)), e.isInvalidBrace = (t) => !("brace" !== t.type || !0 !== t.invalid && !t.dollar && (t.commas >> 0 + t.ranges | 0 && !0 === t.open && !0 === t.close || (t.invalid = !0, 0))), e.isOpenOrClose = (t) => "open" === t.type || "close" === t.type || !0 === t.open || !0 === t.close, e.reduce = (t) => t.reduce((t, e) => ("text" === e.type && t.push(e.value), "range" === e.type && (e.type = "text"), t), []), e.flatten = (...t) => {const e = [],i = (t) => {for (let n = 0; n < t.length; n++) {const r = t[n];Array.isArray(r) ? i(r) : void 0 !== r && e.push(r);}return e;};return i(t), e;};}, 7630: (t, e, i) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.DateTimeSequence = void 0;var n = i(7925),r = i(2087),s = r.numericSequence.NumericSequence,o = r.numericSequenceRange.NumericSequenceRange,a = i(3351),l = function () {function t(t) {this.unit = t, this.sequence = [], this.min = new Date("9999-12-31T23:59:59.999"), this.max = new Date("0001-01-01T00:00:00.000");}return t.prototype.add = function (t) {t < this.min && (this.min = t), t > this.max && (this.max = t), this.sequence.push(t);}, t.prototype.extendToCover = function (e, i) {for (var n = this.min; e < n;) n = t.ADD_INTERVAL(n, -this.interval, this.unit), this.sequence.splice(0, 0, n);for (this.min = n, n = this.max; n < i;) n = t.ADD_INTERVAL(n, this.interval, this.unit), this.sequence.push(n);this.max = n;}, t.prototype.moveToCover = function (e, i) {var n = t.getDelta(e, i, this.unit),r = Math.floor(n / this.interval);for (this.min = t.ADD_INTERVAL(this.min, r * this.interval, this.unit), this.sequence = [], this.sequence.push(this.min), this.max = this.min; this.max < i;) this.max = t.ADD_INTERVAL(this.max, this.interval, this.unit), this.sequence.push(this.max);}, t.CALCULATE = function (e, i, n, r) {switch (r || (r = t.GET_INTERVAL_UNIT(e, i, n)), r) {case a.DateTimeUnit.Year:return t.CALCULATE_YEARS(e, i, n);case a.DateTimeUnit.Month:return t.CALCULATE_MONTHS(e, i, n);case a.DateTimeUnit.Week:return t.CALCULATE_WEEKS(e, i, n);case a.DateTimeUnit.Day:return t.CALCULATE_DAYS(e, i, n);case a.DateTimeUnit.Hour:return t.CALCULATE_HOURS(e, i, n);case a.DateTimeUnit.Minute:return t.CALCULATE_MINUTES(e, i, n);case a.DateTimeUnit.Second:return t.CALCULATE_SECONDS(e, i, n);case a.DateTimeUnit.Millisecond:return t.CALCULATE_MILLISECONDS(e, i, n);}}, t.CALCULATE_YEARS = function (e, i, n) {var r = o.calculateDataRange(e.getFullYear(), i.getFullYear(), !1),l = s.calculate(o.calculate(0, r.max - r.min), n, 0, null, null, [1, 2, 5]),c = Math.floor(r.min / l.interval) * l.interval,h = new Date(c, 0, 1);return t.fromNumericSequence(h, l, a.DateTimeUnit.Year);}, t.CALCULATE_MONTHS = function (e, i, n) {var r = e.getFullYear(),o = i.getFullYear(),l = e.getMonth(),c = 12 * (o - r) + i.getMonth(),h = new Date(r, 0, 1),u = s.calculateUnits(l, c, n, [1, 2, 3, 6, 12]);return t.fromNumericSequence(h, u, a.DateTimeUnit.Month);}, t.CALCULATE_WEEKS = function (e, i, n) {var o = (e.getDay() - 0 + 7) % 7,l = e.getDate() - o,c = new Date(e.getFullYear(), e.getMonth(), l),h = r.double.ceilWithPrecision(t.getDelta(c, i, a.DateTimeUnit.Week)),u = s.calculateUnits(0, h, n, [1, 2, 4, 8]);return t.fromNumericSequence(c, u, a.DateTimeUnit.Week);}, t.CALCULATE_DAYS = function (e, i, n) {var o = new Date(e.getFullYear(), e.getMonth(), e.getDate()),l = r.double.ceilWithPrecision(t.getDelta(e, i, a.DateTimeUnit.Day)),c = s.calculateUnits(0, l, n, [1, 2, 7, 14]);return t.fromNumericSequence(o, c, a.DateTimeUnit.Day);}, t.CALCULATE_HOURS = function (e, i, n) {var o = new Date(e.getFullYear(), e.getMonth(), e.getDate()),l = r.double.floorWithPrecision(t.getDelta(o, e, a.DateTimeUnit.Hour)),c = r.double.ceilWithPrecision(t.getDelta(o, i, a.DateTimeUnit.Hour)),h = s.calculateUnits(l, c, n, [1, 2, 3, 6, 12, 24]);return t.fromNumericSequence(o, h, a.DateTimeUnit.Hour);}, t.CALCULATE_MINUTES = function (e, i, n) {var o = new Date(e.getFullYear(), e.getMonth(), e.getDate(), e.getHours()),l = r.double.floorWithPrecision(t.getDelta(o, e, a.DateTimeUnit.Minute)),c = r.double.ceilWithPrecision(t.getDelta(o, i, a.DateTimeUnit.Minute)),h = s.calculateUnits(l, c, n, [1, 2, 5, 10, 15, 30, 60, 120, 180, 360, 720, 1440]);return t.fromNumericSequence(o, h, a.DateTimeUnit.Minute);}, t.CALCULATE_SECONDS = function (e, i, n) {var o = new Date(e.getFullYear(), e.getMonth(), e.getDate(), e.getHours(), e.getMinutes()),l = r.double.floorWithPrecision(t.getDelta(o, e, a.DateTimeUnit.Second)),c = r.double.ceilWithPrecision(t.getDelta(o, i, a.DateTimeUnit.Second)),h = s.calculateUnits(l, c, n, [1, 2, 5, 10, 15, 30, 60, 120, 300, 600, 900, 1800, 3600]);return t.fromNumericSequence(o, h, a.DateTimeUnit.Second);}, t.CALCULATE_MILLISECONDS = function (e, i, n) {var r = new Date(e.getFullYear(), e.getMonth(), e.getDate(), e.getHours(), e.getMinutes(), e.getSeconds()),l = t.getDelta(r, e, a.DateTimeUnit.Millisecond),c = t.getDelta(r, i, a.DateTimeUnit.Millisecond),h = s.calculate(o.calculate(l, c), n, 0);return t.fromNumericSequence(r, h, a.DateTimeUnit.Millisecond);}, t.ADD_INTERVAL = function (t, e, i) {switch (e = Math.round(e), i) {case a.DateTimeUnit.Year:return n.addYears(t, e);case a.DateTimeUnit.Month:return n.addMonths(t, e);case a.DateTimeUnit.Week:return n.addWeeks(t, e);case a.DateTimeUnit.Day:return n.addDays(t, e);case a.DateTimeUnit.Hour:return n.addHours(t, e);case a.DateTimeUnit.Minute:return n.addMinutes(t, e);case a.DateTimeUnit.Second:return n.addSeconds(t, e);case a.DateTimeUnit.Millisecond:return n.addMilliseconds(t, e);}}, t.fromNumericSequence = function (e, i, n) {for (var r = new t(n), s = 0; s < i.sequence.length; s++) {var o = i.sequence[s],a = t.ADD_INTERVAL(e, o, n);r.add(a);}return r.interval = i.interval, r.intervalOffset = i.intervalOffset, r;}, t.getDelta = function (t, e, i) {var n = 0;switch (i) {case a.DateTimeUnit.Year:n = e.getFullYear() - t.getFullYear();break;case a.DateTimeUnit.Month:n = 12 * (e.getFullYear() - t.getFullYear()) + e.getMonth() - t.getMonth();break;case a.DateTimeUnit.Week:n = (e.getTime() - t.getTime()) / 6048e5;break;case a.DateTimeUnit.Day:n = (e.getTime() - t.getTime()) / 864e5;break;case a.DateTimeUnit.Hour:n = (e.getTime() - t.getTime()) / 36e5;break;case a.DateTimeUnit.Minute:n = (e.getTime() - t.getTime()) / 6e4;break;case a.DateTimeUnit.Second:n = (e.getTime() - t.getTime()) / 1e3;break;case a.DateTimeUnit.Millisecond:n = e.getTime() - t.getTime();}return n;}, t.GET_INTERVAL_UNIT = function (e, i, n) {n = Math.max(n, 2);var r = t.getDelta(e, i, a.DateTimeUnit.Day);if (r > 356 && r >= 180 * n) return a.DateTimeUnit.Year;if (r > 60 && r > 7 * n) return a.DateTimeUnit.Month;if (r > 14 && r > 2 * n) return a.DateTimeUnit.Week;var s = t.getDelta(e, i, a.DateTimeUnit.Hour);if (r > 2 && s > 12 * n) return a.DateTimeUnit.Day;if (s >= 24 && s >= n) return a.DateTimeUnit.Hour;var o = t.getDelta(e, i, a.DateTimeUnit.Minute);if (o > 2 && o >= n) return a.DateTimeUnit.Minute;var l = t.getDelta(e, i, a.DateTimeUnit.Second);if (l > 2 && l >= .8 * n) return a.DateTimeUnit.Second;if (t.getDelta(e, i, a.DateTimeUnit.Millisecond) > 0) return a.DateTimeUnit.Millisecond;var c = e;return 0 !== c.getMilliseconds() ? a.DateTimeUnit.Millisecond : 0 !== c.getSeconds() ? a.DateTimeUnit.Second : 0 !== c.getMinutes() ? a.DateTimeUnit.Minute : 0 !== c.getHours() ? a.DateTimeUnit.Hour : 1 !== c.getDate() ? a.DateTimeUnit.Day : 0 !== c.getMonth() ? a.DateTimeUnit.Month : a.DateTimeUnit.Year;}, t.MIN_COUNT = 1, t.MAX_COUNT = 1e3, t;}();e.DateTimeSequence = l;}, 7631: (t, e, i) => {"use strict";const n = i(8311);t.exports = (t, e) => new n(t, e).set.map((t) => t.map((t) => t.value).join(" ").trim().split(" "));}, 7638: (t, e, i) => {"use strict";const n = i(8311);t.exports = (t, e, i) => {try {e = new n(e, i);} catch (t) {return !1;}return e.test(t);};}, 7641: (t, e, i) => {"use strict";i.d(e, { _: () => s });var n = i(1807),r = i(3571);class s extends n.T0G {options;parent;viewContainer;loadingElement;eventsAbortController;isVisible;errorHandler;constructor(t, e) {super(), this.options = t, this.parent = e, this.eventsAbortController = new AbortController(), this.viewContainer = (0, n.tTh)(".dialog-view-container", this.options.container);}get model() {return this.parent.model;}get result() {return this.parent.result;}get mapsManager() {return this.parent.mapsManager;}get drillPathId() {return this.parent.drillPathId;}showLoading(t = "") {this.removeLoading(), (0, n.tTh)(".full-size-loading.show", this.viewContainer, { middleware: (t) => this.loadingElement = t }, [(0, n.tTh)(".loading", [(0, n.tTh)(".loader"), t ? (0, n.tTh)(".message", t) : null])]);}removeLoading() {this.loadingElement && this.loadingElement.remove();}destroy() {this.eventsAbortController.abort(), this.viewContainer && this.viewContainer.remove(), this.options.map = null, this.options.file = null, this.viewContainer = null, this.loadingElement = null, super.destroy();}toggleVisibility(t = !0) {this.viewContainer && (this.viewContainer.classList.toggle("hide", !t), this.isVisible = t);}async raiseError(t, e = document.body) {this.errorHandler && this.errorHandler.destroy(), this.errorHandler = new r.z({ error: t, container: e });const i = await this.errorHandler.render();"link" == i.type && this.parent.launchUrl(i.url);}}}, 7674: (t, e, i) => {"use strict";i.d(e, { OZ: () => r.A, z0: () => n });var n = i(9754),r = i(6667);}, 7717: (t, e) => {"use strict";var i, n, r, s, o, a, l, c;Object.defineProperty(e, "__esModule", { value: !0 }), e.parseNegativePattern = e.parseExact = e.getEraYear = e.getEra = e.getTokenRegExp = e.formatNumber = e.formatDate = e.expandFormat = e.appendPreOrPostMatch = e.zeroPad = e.trim = e.startsWith = e.isObject = e.isFunction = e.isArray = e.extend = e.endsWith = e.arrayIndexOf = e.regexTrim = e.regexParseFloat = e.regexInfinity = e.regexHex = e.Globalize = void 0, e.Globalize = function (t) {return new e.Globalize.prototype.init(t);}, e.Globalize.cultures = {}, e.Globalize.prototype = { constructor: e.Globalize, init: function (t) {return this.cultures = e.Globalize.cultures, this.cultureSelector = t, this;} }, e.Globalize.prototype.init.prototype = e.Globalize.prototype, e.Globalize.cultures.default = { name: "en", englishName: "English", nativeName: "English", isRTL: !1, language: "en", numberFormat: { pattern: ["-n"], decimals: 2, ",": ",", ".": ".", groupSizes: [3], "+": "+", "-": "-", percent: { pattern: ["-n %", "n %"], decimals: 2, groupSizes: [3], ",": ",", ".": ".", symbol: "%" }, currency: { pattern: ["($n)", "$n"], decimals: 2, groupSizes: [3], ",": ",", ".": ".", symbol: "$" } }, calendars: { standard: { name: "Gregorian_USEnglish", "/": "/", ":": ":", firstDay: 0, days: { names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], namesAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], namesShort: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"] }, months: { names: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], namesAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""] }, AM: ["AM", "am", "AM"], PM: ["PM", "pm", "PM"], eras: [{ name: "A.D.", start: null, offset: 0 }], twoDigitYearMax: 2029, patterns: { d: "M/d/yyyy", D: "dddd, MMMM dd, yyyy", t: "h:mm tt", T: "h:mm:ss tt", f: "dddd, MMMM dd, yyyy h:mm tt", F: "dddd, MMMM dd, yyyy h:mm:ss tt", M: "MMMM dd", Y: "yyyy MMMM", S: "yyyy'-'MM'-'dd'T'HH':'mm':'ss" } } }, messages: {} }, e.Globalize.cultures.default.calendar = e.Globalize.cultures.default.calendars.standard, e.Globalize.cultures.en = e.Globalize.cultures.default, e.Globalize.cultureSelector = "en", e.regexHex = /^0x[a-f0-9]+$/i, e.regexInfinity = /^[+-]?infinity$/i, e.regexParseFloat = /^[+-]?\d*\.?\d*(e[+-]?\d+)?$/, e.regexTrim = /^\s+|\s+$/g, e.arrayIndexOf = function (t, e) {if (t.indexOf) return t.indexOf(e);for (var i = 0, n = t.length; i < n; i++) if (t[i] === e) return i;return -1;}, e.endsWith = function (t, e) {return t.substring(t.length - e.length) === e;}, e.extend = function (t) {var i,n,r,s,o,a,l = arguments[0] || {},c = 1,h = arguments.length;for (t = !1, "boolean" == typeof l && (t = l, l = arguments[1] || {}, c = 2), "object" == typeof l || (0, e.isFunction)(l) || (l = {}); c < h; c++) if (null != (i = arguments[c])) for (n in i) r = l[n], l !== (s = i[n]) && (t && s && ((0, e.isObject)(s) || (o = (0, e.isArray)(s))) ? (o ? (o = !1, a = r && (0, e.isArray)(r) ? r : []) : a = r && (0, e.isObject)(r) ? r : {}, l[n] = (0, e.extend)(t, a, s)) : void 0 !== s && (l[n] = s));return l;}, e.isArray = Array.isArray || function (t) {return "[object Array]" === Object.prototype.toString.call(t);}, e.isFunction = function (t) {return "[object Function]" === Object.prototype.toString.call(t);}, e.isObject = function (t) {return "[object Object]" === Object.prototype.toString.call(t);}, e.startsWith = function (t, e) {return 0 === t.indexOf(e);}, e.trim = function (t) {return (t + "").replace(e.regexTrim, "");}, e.zeroPad = function (t, e, i) {var n;for (n = t.length; n < e; n += 1) t = i ? "0" + t : t + "0";return t;}, e.appendPreOrPostMatch = function (t, e) {for (var i = 0, n = !1, r = 0, s = t.length; r < s; r++) {var o = t.charAt(r);switch (o) {case "'":n ? e.push("'") : i++, n = !1;break;case "\\":n && e.push("\\"), n = !n;break;default:e.push(o), n = !1;}}return i;}, e.expandFormat = function (t, e) {e = e || "F";var i,n = t.patterns,r = e.length;if (1 === r) {if (!(i = n[e])) throw "Invalid date format string '" + e + "'.";e = i;} else 2 === r && "%" === e.charAt(0) && (e = e.charAt(1));return e;}, e.formatDate = function (t, i, n) {var r = n.calendar,s = r.convert;if (!i || !i.length || "i" === i) {var o;if (n && n.name.length) {if (s) o = (0, e.formatDate)(t, r.patterns.F, n);else {var a = new Date(t.getTime()),l = (0, e.getEra)(t, r.eras);a.setFullYear((0, e.getEraYear)(t, r, l)), o = a.toLocaleString();}} else o = t.toString();return o;}var c = r.eras,h = "s" === i;i = (0, e.expandFormat)(r, i), o = [];var u,d,p,f,g = ["0", "00", "000"],m = /([^d]|^)(d|dd)([^d]|$)/g,v = 0,y = (0, e.getTokenRegExp)();function b(t, e) {var i,n = t + "";return e > 1 && n.length < e ? (i = g[e - 2] + n).substring(i.length - e, i.length) : i = n;}function w() {return d || p || (d = m.test(i), p = !0), d;}function x(t, e) {if (f) return f[e];switch (e) {case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();}}for (!h && s && (f = s.fromGregorian(t));;) {var S = y.lastIndex,E = y.exec(i),C = i.slice(S, E ? E.index : i.length);if (v += (0, e.appendPreOrPostMatch)(C, o), !E) break;if (v % 2) o.push(E[0]);else {var k = E[0],T = k.length;switch (k) {case "ddd":case "dddd":var A = 3 === T ? r.days.namesAbbr : r.days.names;o.push(A[t.getDay()]);break;case "d":case "dd":d = !0, o.push(b(x(t, 2), T));break;case "MMM":case "MMMM":var M = x(t, 1);o.push(r.monthsGenitive && w() ? r.monthsGenitive[3 === T ? "namesAbbr" : "names"][M] : r.months[3 === T ? "namesAbbr" : "names"][M]);break;case "M":case "MM":o.push(b(x(t, 1) + 1, T));break;case "y":case "yy":case "yyyy":M = f ? f[0] : (0, e.getEraYear)(t, r, (0, e.getEra)(t, c), h), T < 4 && (M %= 100), o.push(b(M, T));break;case "h":case "hh":0 == (u = t.getHours() % 12) && (u = 12), o.push(b(u, T));break;case "H":case "HH":o.push(b(t.getHours(), T));break;case "m":case "mm":o.push(b(t.getMinutes(), T));break;case "s":case "ss":o.push(b(t.getSeconds(), T));break;case "t":case "tt":M = t.getHours() < 12 ? r.AM ? r.AM[0] : " " : r.PM ? r.PM[0] : " ", o.push(1 === T ? M.charAt(0) : M);break;case "f":case "ff":case "fff":o.push(b(t.getMilliseconds(), 3).substring(0, T));break;case "z":case "zz":u = t.getTimezoneOffset() / 60, o.push((u <= 0 ? "+" : "-") + b(Math.floor(Math.abs(u)), T));break;case "zzz":u = t.getTimezoneOffset() / 60, o.push((u <= 0 ? "+" : "-") + b(Math.floor(Math.abs(u)), 2) + ":" + b(Math.abs(t.getTimezoneOffset() % 60), 2));break;case "g":case "gg":r.eras && o.push(r.eras[(0, e.getEra)(t, c)].name);break;case "/":o.push(r["/"]);break;default:throw "Invalid date format pattern '" + k + "'.";}}}return o.join("");}, i = function (t, i, n) {var r = n.groupSizes,s = r[0],o = 1,a = Math.pow(10, i),l = Math.round(t * a) / a;isFinite(l) || (l = t);var c = (t = l) + "",h = "",u = c.split(/e/i),d = u.length > 1 ? parseInt(u[1], 10) : 0;u = (c = u[0]).split("."), c = u[0], h = u.length > 1 ? u[1] : "", d > 0 ? (c += (h = (0, e.zeroPad)(h, d, !1)).slice(0, d), h = h.substring(d)) : d < 0 && (d = -d, h = (c = (0, e.zeroPad)(c, d + 1)).slice(-d, c.length) + h, c = c.slice(0, -d)), h = i > 0 ? n["."] + (h.length > i ? h.slice(0, i) : (0, e.zeroPad)(h, i)) : "";for (var p = c.length - 1, f = n[","], g = ""; p >= 0;) {if (0 === s || s > p) return c.slice(0, p + 1) + (g.length ? f + g + h : h);g = c.slice(p - s + 1, p + 1) + (g.length ? f + g : ""), p -= s, o < r.length && (s = r[o], o++);}return c.slice(0, p + 1) + f + g + h;}, e.formatNumber = function (t, n, r) {if (!n || "i" === n) return r.name.length ? t.toLocaleString() : t.toString();n = n || "D";var s,o = r.numberFormat,a = Math.abs(t),l = -1;n.length > 1 && (l = parseInt(n.slice(1), 10));var c,h = n.charAt(0).toUpperCase();switch (h) {case "D":s = "n", -1 !== l && (a = (0, e.zeroPad)("" + a, l, !0)), t < 0 && (a = -a);break;case "N":c = o;case "C":c = c || o.currency;case "P":c = c || o.percent, s = t < 0 ? c.pattern[0] : c.pattern[1] || "n", -1 === l && (l = c.decimals), a = i(a * ("P" === h ? 100 : 1), l, c);break;default:throw "Bad number format specifier: " + h;}for (var u = /n|\$|-|%/g, d = "";;) {var p = u.lastIndex,f = u.exec(s);if (d += s.slice(p, f ? f.index : s.length), !f) break;switch (f[0]) {case "n":d += a;break;case "$":d += o.currency.symbol;break;case "-":/[1-9]/.test(a.toString()) && (d += o["-"]);break;case "%":d += o.percent.symbol;}}return d;}, e.getTokenRegExp = function () {return /\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;}, e.getEra = function (t, e) {if (!e) return 0;for (var i, n = t.getTime(), r = 0, s = e.length; r < s; r++) if (null === (i = e[r].start) || n >= i) return r;return 0;}, e.getEraYear = function (t, e, i, n) {var r = t.getFullYear();return !n && e.eras && (r -= e.eras[i].offset), r;}, n = function (t, i) {var n = new Date(),r = (0, e.getEra)(n);if (i < 100) {var s = t.twoDigitYearMax;s = "string" == typeof s ? new Date().getFullYear() % 100 + parseInt(s, 10) : s;var o = (0, e.getEraYear)(n, t, r);(i += o - o % 100) > s && (i -= 100);}return i;}, r = function (t, i, n) {var r,s = t.days,o = t._upperDays;return o || (t._upperDays = o = [c(s.names), c(s.namesAbbr), c(s.namesShort)]), i = l(i), n ? -1 === (r = (0, e.arrayIndexOf)(o[1], i)) && (r = (0, e.arrayIndexOf)(o[2], i)) : r = (0, e.arrayIndexOf)(o[0], i), r;}, s = function (t, i, n) {var r = t.months,s = t.monthsGenitive || t.months,o = t._upperMonths,a = t._upperMonthsGen;o || (t._upperMonths = o = [c(r.names), c(r.namesAbbr)], t._upperMonthsGen = a = [c(s.names), c(s.namesAbbr)]), i = l(i);var h = (0, e.arrayIndexOf)(n ? o[1] : o[0], i);return h < 0 && (h = (0, e.arrayIndexOf)(n ? a[1] : a[0], i)), h;}, o = function (t, i) {var n = t._parseRegExp;if (n) {var r = n[i];if (r) return r;} else t._parseRegExp = n = {};for (var s, o = (0, e.expandFormat)(t, i).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g, "\\\\$1"), a = ["^"], l = [], c = 0, h = 0, u = (0, e.getTokenRegExp)(); null !== (s = u.exec(o));) {var d = o.slice(c, s.index);if (c = u.lastIndex, (h += (0, e.appendPreOrPostMatch)(d, a)) % 2) a.push(s[0]);else {var p,f = s[0],g = f.length;switch (f) {case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":p = "(\\D+)";break;case "tt":case "t":p = "(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":p = "(\\d{" + g + "})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":p = "(\\d\\d?)";break;case "zzz":p = "([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":p = "([+-]?\\d\\d?)";break;case "/":p = "(\\" + t["/"] + ")";break;default:throw "Invalid date format pattern '" + f + "'.";}p && a.push(p), l.push(s[0]);}}(0, e.appendPreOrPostMatch)(o.slice(c), a), a.push("$");var m = { regExp: a.join("").replace(/\s+/g, "\\s+"), groups: l };return n[i] = m;}, a = function (t, e, i) {return t < e || t > i;}, l = function (t) {return t.split("").join(" ").toUpperCase();}, c = function (t) {for (var e = [], i = 0, n = t.length; i < n; i++) e[i] = l(t[i]);return e;}, e.parseExact = function (t, i, l) {t = (0, e.trim)(t);var c = l.calendar,h = o(c, i),u = new RegExp(h.regExp).exec(t);if (null === u) return null;for (var d, p = h.groups, f = null, g = null, m = null, v = null, y = null, b = 0, w = 0, x = 0, S = 0, E = null, C = !1, k = 0, T = p.length; k < T; k++) {var A = u[k + 1];if (A) {var M = p[k],_ = M.length,P = parseInt(A, 10);switch (M) {case "dd":case "d":if (a(v = P, 1, 31)) return null;break;case "MMM":case "MMMM":if (m = s(c, A, 3 === _), a(m, 0, 11)) return null;break;case "M":case "MM":if (a(m = P - 1, 0, 11)) return null;break;case "y":case "yy":case "yyyy":if (g = _ < 4 ? n(c, P) : P, a(g, 0, 9999)) return null;break;case "h":case "hh":if (12 === (b = P) && (b = 0), a(b, 0, 11)) return null;break;case "H":case "HH":if (a(b = P, 0, 23)) return null;break;case "m":case "mm":if (a(w = P, 0, 59)) return null;break;case "s":case "ss":if (a(x = P, 0, 59)) return null;break;case "tt":case "t":if (!(C = c.PM && (A === c.PM[0] || A === c.PM[1] || A === c.PM[2])) && (!c.AM || A !== c.AM[0] && A !== c.AM[1] && A !== c.AM[2])) return null;break;case "f":case "ff":case "fff":if (S = P * Math.pow(10, 3 - _), a(S, 0, 999)) return null;break;case "ddd":case "dddd":if (y = r(c, A, 3 === _), a(y, 0, 6)) return null;break;case "zzz":var D = A.split(/:/);if (2 !== D.length) return null;if (d = parseInt(D[0], 10), a(d, -12, 13)) return null;var O = parseInt(D[1], 10);if (a(O, 0, 59)) return null;E = 60 * d + ((0, e.startsWith)(A, "-") ? -O : O);break;case "z":case "zz":if (a(d = P, -12, 13)) return null;E = 60 * d;break;case "g":case "gg":var I = A;if (!I || !c.eras) return null;I = (0, e.trim)(I.toLowerCase());for (var F = 0, R = c.eras.length; F < R; F++) if (I === c.eras[F].name.toLowerCase()) {f = F;break;}if (null === f) return null;}}}var L,N = new Date(),V = c.convert;if (L = V ? V.fromGregorian(N)[0] : N.getFullYear(), null === g ? g = L : c.eras && (g += c.eras[f || 0].offset), null === m && (m = 0), null === v && (v = 1), V) {if (null === (N = V.toGregorian(g, m, v))) return null;} else {if (N.setFullYear(g, m, v), N.getDate() !== v) return null;if (null !== y && N.getDay() !== y) return null;}if (C && b < 12 && (b += 12), N.setHours(b, w, x, S), null !== E) {var B = N.getMinutes() - (E + N.getTimezoneOffset());N.setHours(N.getHours() + parseInt((B / 60).toString(), 10), B % 60);}return N;}, e.parseNegativePattern = function (t, i, n) {var r,s = i["-"],o = i["+"];switch (n) {case "n -":s = " " + s, o = " " + o;case "n-":(0, e.endsWith)(t, s) ? r = ["-", t.substring(0, t.length - s.length)] : (0, e.endsWith)(t, o) && (r = ["+", t.substring(0, t.length - o.length)]);break;case "- n":s += " ", o += " ";case "-n":(0, e.startsWith)(t, s) ? r = ["-", t.substring(s.length)] : (0, e.startsWith)(t, o) && (r = ["+", t.substring(o.length)]);break;case "(n)":(0, e.startsWith)(t, "(") && (0, e.endsWith)(t, ")") && (r = ["-", t.substring(1, t.length - 1)]);}return r || ["", t];}, e.Globalize.prototype.findClosestCulture = function (t) {return e.Globalize.findClosestCulture.call(this, t);}, e.Globalize.prototype.format = function (t, i, n) {return e.Globalize.format.call(this, t, i, n);}, e.Globalize.prototype.localize = function (t, i) {return e.Globalize.localize.call(this, t, i);}, e.Globalize.prototype.parseInt = function (t, i, n) {return e.Globalize.parseInt.call(this, t, i, n);}, e.Globalize.prototype.parseFloat = function (t, i, n) {return e.Globalize.parseFloat.call(this, t, i, n);}, e.Globalize.prototype.culture = function (t) {return e.Globalize.culture.call(this, t);}, e.Globalize.addCultureInfo = function (t, i, n) {var r = {},s = !1;"string" != typeof t ? (n = t, t = this.culture().name, r = this.cultures[t]) : "string" != typeof i ? (n = i, s = null == this.cultures[t], r = this.cultures[t] || this.cultures.default) : (s = !0, r = this.cultures[i]), this.cultures[t] = (0, e.extend)(!0, {}, r, n), s && (this.cultures[t].calendar = this.cultures[t].calendars.standard);}, e.Globalize.findClosestCulture = function (t) {var i;if (!t) return this.cultures[this.cultureSelector] || this.cultures.default;if ("string" == typeof t && (t = t.split(",")), (0, e.isArray)(t)) {var n,r,s = this.cultures,o = t,a = o.length,l = [];for (r = 0; r < a; r++) {var c,h = (t = (0, e.trim)(o[r])).split(";");n = (0, e.trim)(h[0]), 1 === h.length ? c = 1 : 0 === (t = (0, e.trim)(h[1])).indexOf("q=") ? (t = t.substring(2), c = parseFloat(t), c = isNaN(c) ? 0 : c) : c = 1, l.push({ lang: n, pri: c });}for (l.sort(function (t, e) {return t.pri < e.pri ? 1 : -1;}), r = 0; r < a; r++) if (i = s[n = l[r].lang]) return i;for (r = 0; r < a; r++) for (n = l[r].lang;;) {var u = n.lastIndexOf("-");if (-1 === u) break;if (i = s[n = n.substring(0, u)]) return i;}for (r = 0; r < a; r++) for (var d in n = l[r].lang, s) {var p = s[d];if (p.language == n) return p;}} else if ("object" == typeof t) return t;return i || null;}, e.Globalize.format = function (t, i, n) {var r = this.findClosestCulture(n);return t instanceof Date ? t = (0, e.formatDate)(t, i, r) : "number" == typeof t && (t = (0, e.formatNumber)(t, i, r)), t;}, e.Globalize.localize = function (t, e) {return this.findClosestCulture(e).messages[t] || this.cultures.default.messages.key;}, e.Globalize.parseDate = function (t, i, n) {var r, s, o;if (n = this.findClosestCulture(n), i) {if ("string" == typeof i && (i = [i]), i.length) for (var a = 0, l = i.length; a < l; a++) {var c = i[a];if (c && (r = (0, e.parseExact)(t, c, n))) break;}} else for (s in o = n.calendar.patterns) if (r = (0, e.parseExact)(t, o[s], n)) break;return r || null;}, e.Globalize.parseInt = function (t, i, n) {return Math.floor(e.Globalize.parseFloat(t, i, n));}, e.Globalize.parseFloat = function (t, i, n) {"number" != typeof i && (n = i, i = 10);var r = this.findClosestCulture(n),s = NaN,o = r.numberFormat;if (t.indexOf(r.numberFormat.currency.symbol) > -1 && (t = (t = t.replace(r.numberFormat.currency.symbol, "")).replace(r.numberFormat.currency["."], r.numberFormat["."])), t = (0, e.trim)(t), e.regexInfinity.test(t)) s = parseFloat(t);else if (!i && e.regexHex.test(t)) s = parseInt(t, 16);else {var a = (0, e.parseNegativePattern)(t, o, o.pattern[0]),l = a[0],c = a[1];"" === l && "-n" !== o.pattern[0] && (l = (a = (0, e.parseNegativePattern)(t, o, "-n"))[0], c = a[1]), l = l || "+";var h,u,d = c.indexOf("e");d < 0 && (d = c.indexOf("E")), d < 0 ? (u = c, h = null) : (u = c.substring(0, d), h = c.substring(d + 1));var p,f,g = o["."],m = u.indexOf(g);m < 0 ? (p = u, f = null) : (p = u.substring(0, m), f = u.substring(m + g.length));var v = o[","];p = p.split(v).join("");var y = v.replace(/\u00A0/g, " ");v !== y && (p = p.split(y).join(""));var b = l + p;if (null !== f && (b += "." + f), null !== h) {var w = (0, e.parseNegativePattern)(h, o, "-n");b += "e" + (w[0] || "+") + w[1];}e.regexParseFloat.test(b) && (s = parseFloat(b));}return s;}, e.Globalize.culture = function (t) {return void 0 !== t && (this.cultureSelector = t), this.findClosestCulture(t) || this.culture.default;};}, 7728: (t, e, i) => {"use strict";i.d(e, { BI: () => R, BP: () => Z, Ct: () => K, Et: () => y, G8: () => z, Gv: () => g, I6: () => D, Kg: () => v, Ll: () => ot, Mu: () => U, Nn: () => tt, Om: () => p, PT: () => A, SL: () => P, Tn: () => b, Tq: () => N, W2: () => Q, YE: () => et, Z3: () => E, _4: () => u, aj: () => M, b0: () => f, cC: () => G, cM: () => C, cy: () => m, cz: () => j, ep: () => it, ft: () => k, hJ: () => W, hg: () => T, iQ: () => X, jc: () => L, l$: () => q, l6: () => st, nB: () => Y, nF: () => $, rB: () => H, tB: () => _, u0: () => B, uD: () => nt, uU: () => I, vy: () => J, xD: () => F, xi: () => O, zk: () => rt });var n = "function",r = "object",s = "string",o = "number",a = "undefined",l = typeof window !== a,c = typeof document !== a && document,h = [{ open: "(", close: ")" }, { open: '"', close: '"' }, { open: "'", close: "'" }, { open: '\\"', close: '\\"' }, { open: "\\'", close: "\\'" }],u = 1e-7,d = { cm: function (t) {return 96 * t / 2.54;}, mm: function (t) {return 96 * t / 254;}, in: function (t) {return 96 * t;}, pt: function (t) {return 96 * t / 72;}, pc: function (t) {return 96 * t / 6;}, "%": function (t, e) {return t * e / 100;}, vw: function (t, e) {return void 0 === e && (e = window.innerWidth), t / 100 * e;}, vh: function (t, e) {return void 0 === e && (e = window.innerHeight), t / 100 * e;}, vmax: function (t, e) {return void 0 === e && (e = Math.max(window.innerWidth, window.innerHeight)), t / 100 * e;}, vmin: function (t, e) {return void 0 === e && (e = Math.min(window.innerWidth, window.innerHeight)), t / 100 * e;} };function p(t, e, i, n) {return (t * n + e * i) / (i + n);}function f(t) {return typeof t === a;}function g(t) {return t && typeof t === r;}function m(t) {return Array.isArray(t);}function v(t) {return typeof t === s;}function y(t) {return typeof t === o;}function b(t) {return typeof t === n;}function w(t, e, i, n, r) {return x(t, e, i) ? i : function (t, e, i, n, r) {for (var s, o = function (i) {var o = e[i].trim();if (o === t.close && !x(t, e, i)) return { value: i };var a = i,l = D(r, function (t) {return t.open === o;});if (l && (a = w(l, e, i, n, r)), -1 === a) return s = i, "break";s = i = a;}, a = i; a < n; ++a) {var l = o(a);if (a = s, "object" == typeof l) return l.value;if ("break" === l) break;}return -1;}(t, e, i + 1, n, r);}function x(t, e, i) {if (!t.ignore) return null;var n = e.slice(Math.max(i - 3, 0), i + 3).join("");return new RegExp(t.ignore).exec(n);}function S(t, e) {var i = v(e) ? { separator: e } : e,n = i.separator,r = void 0 === n ? "," : n,s = i.isSeparateFirst,o = i.isSeparateOnlyOpenClose,a = i.isSeparateOpenClose,l = void 0 === a ? o : a,c = i.openCloseCharacters,u = void 0 === c ? h : c,d = u.map(function (t) {var e = t.open,i = t.close;return e === i ? e : e + "|" + i;}).join("|"),p = new RegExp("(\\s*" + r + "\\s*|" + d + "|\\s+)", "g"),f = t.split(p).filter(function (t) {return t && "undefined" !== t;}),g = f.length,m = [],y = [];function b() {return !!y.length && (m.push(y.join("")), y = [], !0);}for (var E, C = function (e) {var i = f[e].trim(),n = e,a = D(u, function (t) {return t.open === i;}),c = D(u, function (t) {return t.close === i;});if (a) {if (-1 !== (n = w(a, f, e, g, u)) && l) return b() && s ? (E = e, "break") : (m.push(f.slice(e, n + 1).join("")), e = n, s ? (E = e, "break") : (E = e, "continue"));} else {if (c && !x(c, f, e)) {var h = function () {for (var t = 0, e = 0, i = arguments.length; e < i; e++) t += arguments[e].length;var n = Array(t),r = 0;for (e = 0; e < i; e++) for (var s = arguments[e], o = 0, a = s.length; o < a; o++, r++) n[r] = s[o];return n;}(u);return h.splice(u.indexOf(c), 1), { value: S(t, { separator: r, isSeparateFirst: s, isSeparateOnlyOpenClose: o, isSeparateOpenClose: l, openCloseCharacters: h }) };}if (function (t, e) {return ("" === e || " " == e) && ("" === t || " " == t) || t === e;}(i, r) && !o) return b(), s ? (E = e, "break") : (E = e, "continue");}-1 === n && (n = g - 1), y.push(f.slice(e, n + 1).join("")), E = e = n;}, k = 0; k < g; ++k) {var T = C(k);if (k = E, "object" == typeof T) return T.value;if ("break" === T) break;}return y.length && m.push(y.join("")), m;}function E(t) {return S(t, "");}function C(t) {return S(t, ",");}function k(t) {var e = /([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return !e || e.length < 4 ? {} : { prefix: e[1], value: e[2], suffix: e[3] };}function T(t) {var e = /^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if (!e) return { prefix: "", unit: "", value: NaN };var i = e[1],n = e[2];return { prefix: i, unit: e[3], value: parseFloat(n) };}function A(t) {return t.replace(/[\s-_]+([^\s-_])/g, function (t, e) {return e.toUpperCase();});}function M(t, e) {return void 0 === e && (e = "-"), t.replace(/([a-z])([A-Z])/g, function (t, i, n) {return "" + i + e + n.toLowerCase();});}function _() {return Date.now ? Date.now() : new Date().getTime();}function P(t, e, i) {void 0 === i && (i = -1);for (var n = t.length, r = 0; r < n; ++r) if (e(t[r], r, t)) return r;return i;}function D(t, e, i) {var n = P(t, e);return n > -1 ? t[n] : i;}var O = function () {var t = _(),e = l && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame);return e ? e.bind(window) : function (e) {var i = _();return setTimeout(function () {e(i - t);}, 1e3 / 60);};}(),I = function () {var t = l && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame);return t ? t.bind(window) : function (t) {clearTimeout(t);};}();function F(t) {return Object.keys(t);}function R(t) {return F(t).map(function (e) {return t[e];});}function L(t, e) {var i = T(t),n = i.value,r = i.unit;if (g(e)) {var s = e[r];if (s) {if (b(s)) return s(n);if (d[r]) return d[r](n, s);}} else if ("%" === r) return n * e / 100;return d[r] ? d[r](n) : n;}function N(t, e, i) {return Math.max(e, Math.min(t, i));}function V(t, e, i, n) {return void 0 === n && (n = t[0] / t[1]), [[$(e[0], u), $(e[0] / n, u)], [$(e[1] * n, u), $(e[1], u)]].filter(function (t) {return t.every(function (t, n) {var r = e[n],s = $(r, u);return i ? t <= r || t <= s : t >= r || t >= s;});})[0] || t;}function B(t, e, i, n) {if (!n) return t.map(function (t, n) {return N(t, e[n], i[n]);});var r = t[0],s = t[1],o = !0 === n ? r / s : n,a = V(t, e, !1, o),l = a[0],c = a[1],h = V(t, i, !0, o),u = h[0],d = h[1];return r < l || s < c ? (r = l, s = c) : (r > u || s > d) && (r = u, s = d), [r, s];}function j(t) {for (var e = 0, i = t.length - 1; i >= 0; --i) e += t[i];return e;}function z(t) {for (var e = t.length, i = 0, n = e - 1; n >= 0; --n) i += t[n];return e ? i / e : 0;}function U(t, e) {var i = e[0] - t[0],n = e[1] - t[1],r = Math.atan2(n, i);return r >= 0 ? r : r + 2 * Math.PI;}function H(t) {var e = function (t) {return [0, 1].map(function (e) {return z(t.map(function (t) {return t[e];}));});}(t),i = U(e, t[0]),n = U(e, t[1]);return i < n && n - i < Math.PI || i > n && n - i < -Math.PI ? 1 : -1;}function q(t, e) {return Math.sqrt(Math.pow((e ? e[0] : 0) - t[0], 2) + Math.pow((e ? e[1] : 0) - t[1], 2));}function $(t, e) {if (!e) return t;var i = 1 / e;return Math.round(t / e) / i;}function G(t, e) {return t.forEach(function (i, n) {t[n] = $(t[n], e);}), t;}function W(t) {for (var e = [], i = 0; i < t; ++i) e.push(i);return e;}function K(t) {return t.reduce(function (t, e) {return t.concat(e);}, []);}function Z(t, e) {-1 === t.indexOf(e) && t.push(e);}function Y(t, e) {return t.classList ? t.classList.contains(e) : !!t.className.match(new RegExp("(\\s|^)" + e + "(\\s|$)"));}function X(t, e) {t.classList ? t.classList.add(e) : t.className += " " + e;}function J(t, e) {if (t.classList) t.classList.remove(e);else {var i = new RegExp("(\\s|^)" + e + "(\\s|$)");t.className = t.className.replace(i, " ");}}function Q(t, e, i, n) {t.addEventListener(e, i, n);}function tt(t, e, i, n) {t.removeEventListener(e, i, n);}function et(t) {return (null == t ? void 0 : t.ownerDocument) || c;}function it(t) {return et(t).documentElement;}function nt(t) {return et(t).body;}function rt(t) {var e;return (null === (e = null == t ? void 0 : t.ownerDocument) || void 0 === e ? void 0 : e.defaultView) || window;}function st(t) {return t && "postMessage" in t && "blur" in t && "self" in t;}function ot(t) {return g(t) && t.nodeName && t.nodeType && "ownerDocument" in t;}}, 7735: (t, e, i) => {"use strict";i.d(e, { t: () => r });var n = i(1807);class r extends n.T0G {container;tabs;selectedTabId;tabElements = {};abortController;constructor(t, e) {super(), this.container = t, this.tabs = e, this.selectedTabId = e[0].id, this.abortController = new AbortController(), this.render();}handleClick(t) {this.selectedTabId !== t && this.selectTab(t);}selectTab(t) {this.tabElements[t].classList.contains("disabled") || (this.selectedTabId = t, this.container.querySelector(".selected")?.classList.remove("selected"), this.tabElements[t]?.classList.add("selected"), this.trigger("tabSelected", t));}render() {this.emptyContainer();const t = (0, n.tTh)(".section-tabs");this.tabs.forEach((e) => {const i = (0, n.tTh)(".section-tab" + (e.id === this.selectedTabId ? ".selected" : ""), t, { attr: { id: e.id } }, e.label);e.hidden && (i.style.display = "none"), e.disabled && i.classList.add("disabled"), this.tabElements[e.id] = i;}), t.addEventListener("click", (t) => {const e = t.target.id;e && this.handleClick(e);}, { signal: this.abortController.signal }), this.container.appendChild(t);}emptyContainer() {for (; this.container.firstChild;) this.container.removeChild(this.container.firstChild);}hide(t, e) {if ("all" === t) {this.tabs.forEach((t) => t.hidden = !0);for (const t in this.tabElements) this.tabElements[t].style.display = "none";this.selectedTabId = e || "";} else t.forEach((t) => {const e = this.tabs.find((e) => e.id === t);e && (e.hidden = !0, this.tabElements[t].style.display = "none");}), e && (this.selectedTabId = e);}show(t, e) {if ("all" === t) {this.tabs.forEach((t) => t.hidden = !1);for (const t in this.tabElements) this.tabElements[t].style.display = "";this.selectedTabId = e || this.tabs[0].id;} else t.forEach((t) => {const e = this.tabs.find((e) => e.id === t);e && (e.hidden = !1, this.tabElements[t].style.display = "");}), e && (this.selectedTabId = e);}disable(t, e) {"all" === t ? (this.tabs.forEach((t) => this.tabElements[t.id].classList.add("disabled")), this.selectedTabId = e || "") : (t.forEach((t) => {this.tabs.find((e) => e.id === t) && this.tabElements[t].classList.add("disabled");}), e && (this.selectedTabId = e));}enable(t, e) {"all" === t ? (this.tabs.forEach((t) => this.tabElements[t.id].classList.remove("disabled")), this.selectedTabId = e || this.tabs[0].id) : (t.forEach((t) => {this.tabs.find((e) => e.id === t) && this.tabElements[t].classList.remove("disabled");}), e && (this.selectedTabId = e));}destroy() {this.abortController?.abort(), this.abortController = null, this.emptyContainer(), this.selectedTabId = null, this.tabElements = null, this.tabs = null, super.destroy();}}}, 7737: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(8981),r = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s = new RegExp(r.source, "g");function o(t, e) {var i,o,a,l = r.lastIndex = s.lastIndex = 0,c = -1,h = [],u = [];for (t += "", e += ""; (i = r.exec(t)) && (o = s.exec(e));) (a = o.index) > l && (a = e.slice(l, a), h[c] ? h[c] += a : h[++c] = a), (i = i[0]) === (o = o[0]) ? h[c] ? h[c] += o : h[++c] = o : (h[++c] = null, u.push({ i: c, x: (0, n.A)(i, o) })), l = s.lastIndex;return l < e.length && (a = e.slice(l), h[c] ? h[c] += a : h[++c] = a), h.length < 2 ? u[0] ? function (t) {return function (e) {return t(e) + "";};}(u[0].x) : function (t) {return function () {return t;};}(e) : (e = u.length, function (t) {for (var i, n = 0; n < e; ++n) h[(i = u[n]).i] = i.x(t);return h.join("");});}}, 7753: (t, e, i) => {"use strict";i.d(e, { AA: () => l, Yx: () => c, Z3: () => a, di: () => o, nY: () => s, ss: () => h });var n = i(1807);const r = ["about"];var s;function o(t, e, i = [], o = !0) {const a = { id: t.id || (0, n.uRe)(), type: s.User, name: t.name ? t.name.substring(0, 80) : "Untitled", description: t.description ? t.description.substring(0, 500) : "", required: Array.isArray(t.required) ? t.required : [], premium: !!t.premium, category: t.category || "", dataIndex: t.dataIndex || 0, settings: h(e, t.settings), dataSettings: t.dataSettings || {} },l = [...r, ...i];for (const t of Object.keys(a.settings)) if (l.find((e) => e == t)) delete a.settings[t];else for (const e of Object.keys(a.settings[t])) l.find((i) => i == `${t}.${e}`) && delete a.settings[t][e];for (const t of Object.keys(a.settings)) for (const e of Object.keys(a.settings[t])) {const i = (0, n.rJE)(a.settings[t][e]);if (i) {if (o && (!(0, n.cKq)(a.dataSettings, t) || !(0, n.cKq)(a.dataSettings[t], e))) {const r = (0, n.o8B)(a.settings[t][e]);for (let t = 0; t < r.values.length; t++) delete r.values[t].displayName, i == n.tj4.Measure && delete r.values[t].selector;(0, n.cKq)(a.dataSettings, t) || (a.dataSettings[t] = {}), a.dataSettings[t][e] = r;}delete a.settings[t][e];}}return a;}function a(t, e) {const i = (0, n.o8B)(t);if (i.settings = h(e, i.settings), i.dataSettings) {for (const t of Object.keys(i.dataSettings)) for (const e of Object.keys(i.dataSettings[t])) if ((0, n.cKq)(i.settings, t) && (0, n.cKq)(i.settings[t], e) && (0, n.rJE)(i.settings[t][e])) for (let r = 0; r < i.settings[t][e].values.length; r++) (0, n.cKq)(i.dataSettings[t][e], "values") && i.dataSettings[t][e].values[r] && (i.settings[t][e].values[r].value = i.dataSettings[t][e].values[r].value);delete i.dataSettings;}return i;}function l(t, e) {const i = e && e.dataViews && e.dataViews[0],r = [];for (const e of Object.keys(t.settings)) {const s = { objectName: e, properties: {}, selector: null };for (const o of Object.keys(t.settings[e])) {const a = (0, n.rJE)(t.settings[e][o]);if (a) {if (i && i.categorical) {const s = t.settings[e][o];a == n.tj4.Measure ? i.categorical.values && (0, n.pHJ)(i.categorical.values, s.columnRole).forEach((t, i) => {r.push({ objectName: e, properties: { [o]: s.values[i].value }, selector: { metadata: t.source.queryName } });}) : a == n.tj4.Category && i.categorical.categories && s.values.forEach((t) => {r.push({ objectName: e, properties: { [o]: t.value }, selector: t.selector });});}} else s.properties[o] = t.settings[e][o];}(0, n.Ime)(s.properties) || r.push(s);}return r;}function c(t, e = [], i = !0, r = s.User, a) {const l = o({ id: (0, n.uRe)(!1), name: a ? a.substring(0, 80) : "Untitled", settings: t }, t, e, i);return l.type = r, l;}function h(t, e) {const i = (0, n.o8B)(t),r = (0, n.o8B)(e);for (const t of Object.keys(i)) if ((0, n.cKq)(r, t)) for (const e of Object.keys(i[t])) (0, n.cKq)(r[t], e) || (r[t][e] = i[t][e]);else r[t] = i[t];return r;}!function (t) {t[t.Builtin = 0] = "Builtin", t[t.User = 1] = "User", t[t.Current = 2] = "Current";}(s || (s = {}));}, 7757: (t, e, i) => {"use strict";i.d(e, { V: () => n });const n = ["circle", "ring", "square", "line-h", "line-v", "up", "down", "blank"];}, 7790: (t, e, i) => {"use strict";function n(t) {return null === t ? "null" : typeof t;}function r(t) {return !!t && "object" == typeof t;}function s(t) {if (void 0 === t) return "";if (null === t) return "Object";if ("object" == typeof t && !t.constructor) return "Object";var e = /function ([^(]*)/.exec(t.constructor.toString());return e && e.length > 1 ? e[1] : "";}function o(t, e, i) {return "null" === t || "undefined" === t ? t : ("string" !== t && "stringifiable" !== t || (i = '"' + i.replace(/"/g, '\\"') + '"'), "function" === t ? e.toString().replace(/[\r\n]/g, "").replace(/\{.*\}/, "") + "{}" : i);}function a(t) {var e = "";return r(t) ? (e = s(t), Array.isArray(t) && (e += "[" + t.length + "]")) : e = o(n(t), t, t), e;}function l(t) {return "json-formatter-".concat(t);}function c(t, e, i) {var n = document.createElement(t);return e && n.classList.add(l(e)), void 0 !== i && (i instanceof Node ? n.appendChild(i) : n.appendChild(document.createTextNode(String(i)))), n;}i.d(e, { A: () => m }), function (t) {if (t && "undefined" != typeof window) {var e = document.createElement("style");e.setAttribute("media", "screen"), e.innerHTML = t, document.head.appendChild(e);}}('.json-formatter-row {\n  font-family: monospace;\n}\n.json-formatter-row,\n.json-formatter-row a,\n.json-formatter-row a:hover {\n  color: black;\n  text-decoration: none;\n}\n.json-formatter-row .json-formatter-row {\n  margin-left: 1rem;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty {\n  opacity: 0.5;\n  margin-left: 1rem;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty:after {\n  display: none;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\n  content: "No properties";\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\n  content: "[]";\n}\n.json-formatter-row .json-formatter-string,\n.json-formatter-row .json-formatter-stringifiable {\n  color: green;\n  white-space: pre;\n  word-wrap: break-word;\n}\n.json-formatter-row .json-formatter-number {\n  color: blue;\n}\n.json-formatter-row .json-formatter-boolean {\n  color: red;\n}\n.json-formatter-row .json-formatter-null {\n  color: #855a00;\n}\n.json-formatter-row .json-formatter-undefined {\n  color: #ca0b69;\n}\n.json-formatter-row .json-formatter-function {\n  color: #FF20ED;\n}\n.json-formatter-row .json-formatter-date {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.json-formatter-row .json-formatter-url {\n  text-decoration: underline;\n  color: blue;\n  cursor: pointer;\n}\n.json-formatter-row .json-formatter-bracket {\n  color: blue;\n}\n.json-formatter-row .json-formatter-key {\n  color: #00008b;\n  padding-right: 0.2rem;\n}\n.json-formatter-row .json-formatter-toggler-link {\n  cursor: pointer;\n}\n.json-formatter-row .json-formatter-toggler {\n  line-height: 1.2rem;\n  font-size: 0.7rem;\n  vertical-align: middle;\n  opacity: 0.6;\n  cursor: pointer;\n  padding-right: 0.2rem;\n}\n.json-formatter-row .json-formatter-toggler:after {\n  display: inline-block;\n  transition: transform 100ms ease-in;\n  content: "";\n}\n.json-formatter-row > a > .json-formatter-preview-text {\n  opacity: 0;\n  transition: opacity 0.15s ease-in;\n  font-style: italic;\n}\n.json-formatter-row:hover > a > .json-formatter-preview-text {\n  opacity: 0.6;\n}\n.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\n  transform: rotate(90deg);\n}\n.json-formatter-row.json-formatter-open > .json-formatter-children:after {\n  display: inline-block;\n}\n.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\n  display: none;\n}\n.json-formatter-row.json-formatter-open.json-formatter-empty:after {\n  display: block;\n}\n.json-formatter-dark.json-formatter-row {\n  font-family: monospace;\n}\n.json-formatter-dark.json-formatter-row,\n.json-formatter-dark.json-formatter-row a,\n.json-formatter-dark.json-formatter-row a:hover {\n  color: white;\n  text-decoration: none;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-row {\n  margin-left: 1rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty {\n  opacity: 0.5;\n  margin-left: 1rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty:after {\n  display: none;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\n  content: "No properties";\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\n  content: "[]";\n}\n.json-formatter-dark.json-formatter-row .json-formatter-string,\n.json-formatter-dark.json-formatter-row .json-formatter-stringifiable {\n  color: #31f031;\n  white-space: pre;\n  word-wrap: break-word;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-number {\n  color: #66c2ff;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-boolean {\n  color: #EC4242;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-null {\n  color: #EEC97D;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-undefined {\n  color: #ef8fbe;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-function {\n  color: #FD48CB;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-date {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n.json-formatter-dark.json-formatter-row .json-formatter-url {\n  text-decoration: underline;\n  color: #027bff;\n  cursor: pointer;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-bracket {\n  color: #9494ff;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-key {\n  color: #23a0db;\n  padding-right: 0.2rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler-link {\n  cursor: pointer;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler {\n  line-height: 1.2rem;\n  font-size: 0.7rem;\n  vertical-align: middle;\n  opacity: 0.6;\n  cursor: pointer;\n  padding-right: 0.2rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler:after {\n  display: inline-block;\n  transition: transform 100ms ease-in;\n  content: "";\n}\n.json-formatter-dark.json-formatter-row > a > .json-formatter-preview-text {\n  opacity: 0;\n  transition: opacity 0.15s ease-in;\n  font-style: italic;\n}\n.json-formatter-dark.json-formatter-row:hover > a > .json-formatter-preview-text {\n  opacity: 0.6;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\n  transform: rotate(90deg);\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-children:after {\n  display: inline-block;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\n  display: none;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open.json-formatter-empty:after {\n  display: block;\n}\n');var h = /(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,u = /\d{2}:\d{2}:\d{2} GMT-\d{4}/,d = /\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,p = /^https?:\/\//,f = window.requestAnimationFrame || function (t) {return t(), 0;},g = { hoverPreviewEnabled: !1, hoverPreviewArrayCount: 100, hoverPreviewFieldCount: 5, animateOpen: !0, animateClose: !0, theme: null, useToJSON: !0, sortPropertiesBy: null, maxArrayItems: 100, exposePath: !1 },m = function () {function t(t, e, i, n, r, s, o) {void 0 === e && (e = 1), void 0 === i && (i = g), void 0 === s && (s = []), this.json = t, this.open = e, this.config = i, this.key = n, this.displayKey = r, this.path = s, this.arrayRange = o, this._isOpen = null, void 0 === this.config.hoverPreviewEnabled && (this.config.hoverPreviewEnabled = g.hoverPreviewEnabled), void 0 === this.config.hoverPreviewArrayCount && (this.config.hoverPreviewArrayCount = g.hoverPreviewArrayCount), void 0 === this.config.hoverPreviewFieldCount && (this.config.hoverPreviewFieldCount = g.hoverPreviewFieldCount), void 0 === this.config.useToJSON && (this.config.useToJSON = g.useToJSON), void 0 === this.config.maxArrayItems && (this.config.maxArrayItems = g.maxArrayItems), "" === this.key && (this.key = '""'), void 0 === this.displayKey && (this.displayKey = this.key);}return Object.defineProperty(t.prototype, "isOpen", { get: function () {return null !== this._isOpen ? this._isOpen : this.open > 0;}, set: function (t) {this._isOpen = t;}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isDate", { get: function () {return this.json instanceof Date || "string" === this.type && (h.test(this.json) || d.test(this.json) || u.test(this.json));}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isUrl", { get: function () {return "string" === this.type && p.test(this.json);}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isArray", { get: function () {return Array.isArray(this.json);}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isLargeArray", { get: function () {return this.isArray && this.json.length > this.config.maxArrayItems;}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isArrayRange", { get: function () {return this.isArray && void 0 !== this.arrayRange && 2 == this.arrayRange.length;}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isObject", { get: function () {return r(this.json);}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isEmptyObject", { get: function () {return !this.keys.length && !this.isArray;}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isEmpty", { get: function () {return this.isEmptyObject || this.keys && !this.keys.length && this.isArray;}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "useToJSON", { get: function () {return this.config.useToJSON && "stringifiable" === this.type;}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "hasKey", { get: function () {return void 0 !== this.key;}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "constructorName", { get: function () {return s(this.json);}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "type", { get: function () {return this.config.useToJSON && this.json && this.json.toJSON ? "stringifiable" : n(this.json);}, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "keys", { get: function () {if (this.isObject) {var t = Object.keys(this.json);if (this.isLargeArray) {var e = Math.ceil(this.json.length / this.config.maxArrayItems);t = [];for (var i = 0; i < e; i++) {var n = i * this.config.maxArrayItems,r = Math.min(this.json.length - 1, n + (this.config.maxArrayItems - 1));t.push("".concat(n, "  ").concat(r));}}return !this.isArray && this.config.sortPropertiesBy ? t.sort(this.config.sortPropertiesBy) : t;}return [];}, enumerable: !1, configurable: !0 }), t.prototype.toggleOpen = function () {this.isOpen = !this.isOpen, this.element && (this.isOpen ? this.appendChildren(this.config.animateOpen) : this.removeChildren(this.config.animateClose), this.element.classList.toggle(l("open")));}, t.prototype.openAtDepth = function (t) {void 0 === t && (t = 1), t < 0 || (this.open = t, this.isOpen = 0 !== t, this.element && (this.removeChildren(!1), 0 === t ? this.element.classList.remove(l("open")) : (this.appendChildren(this.config.animateOpen), this.element.classList.add(l("open")))));}, t.prototype.getInlinepreview = function () {var t = this;if (this.isArray) return this.json.length > this.config.hoverPreviewArrayCount ? "Array[".concat(this.json.length, "]") : "[".concat(this.json.map(a).join(", "), "]");var e = this.keys,i = e.slice(0, this.config.hoverPreviewFieldCount).map(function (e) {return "".concat(e, ":").concat(a(t.json[e]));}),n = e.length >= this.config.hoverPreviewFieldCount ? "" : "";return "{".concat(i.join(", ")).concat(n, "}");}, t.prototype.render = function () {this.element = c("div", "row");var t = this.isObject ? c("a", "toggler-link") : c("span");if (this.isObject && !this.useToJSON && t.appendChild(c("span", "toggler")), this.isArrayRange ? t.appendChild(c("span", "range", "[".concat(this.displayKey, "]"))) : this.hasKey && (t.appendChild(c("span", "key", "".concat(this.displayKey, ":"))), this.config.exposePath && (this.element.dataset.path = JSON.stringify(this.path))), this.isObject && !this.useToJSON) {var e = c("span", "value"),i = c("span");if (!this.isArrayRange) {var n = c("span", "constructor-name", this.constructorName);i.appendChild(n);}if (this.isArray && !this.isArrayRange) {var r = c("span");r.appendChild(c("span", "bracket", "[")), r.appendChild(c("span", "number", this.json.length)), r.appendChild(c("span", "bracket", "]")), i.appendChild(r);}e.appendChild(i), t.appendChild(e);} else {(e = this.isUrl ? c("a") : c("span")).classList.add(l(this.type)), this.isDate && e.classList.add(l("date")), this.isUrl && (e.classList.add(l("url")), e.setAttribute("href", this.json));var s = o(this.type, this.json, this.useToJSON ? this.json.toJSON() : this.json);e.appendChild(document.createTextNode(s)), t.appendChild(e);}if (this.isObject && this.config.hoverPreviewEnabled) {var a = c("span", "preview-text");a.appendChild(document.createTextNode(this.getInlinepreview())), t.appendChild(a);}var h = c("div", "children");return this.isObject && h.classList.add(l("object")), this.isArray && h.classList.add(l("array")), this.isEmpty && h.classList.add(l("empty")), this.config && this.config.theme && this.element.classList.add(l(this.config.theme)), this.isOpen && this.element.classList.add(l("open")), this.element.appendChild(t), this.element.appendChild(h), this.isObject && this.isOpen && this.appendChildren(), this.isObject && !this.useToJSON && t.addEventListener("click", this.toggleOpen.bind(this)), this.element;}, t.prototype.appendChildren = function (e) {var i = this;void 0 === e && (e = !1);var n = this.element.querySelector("div.".concat(l("children")));if (n && !this.isEmpty) {var r = function (e, r) {var s = i.isLargeArray ? [r * i.config.maxArrayItems, Math.min(i.json.length - 1, r * i.config.maxArrayItems + (i.config.maxArrayItems - 1))] : void 0,o = i.isArrayRange ? (i.arrayRange[0] + r).toString() : e,a = new t(s ? i.json.slice(s[0], s[1] + 1) : i.json[e], i.open - 1, i.config, e, o, s ? i.path : i.path.concat(o), s);n.appendChild(a.render());};if (e) {var s = 0,o = function () {var t = i.keys[s];r(t, s), (s += 1) < i.keys.length && (s > 10 ? o() : f(o));};f(o);} else this.keys.forEach(function (t, e) {return r(t, e);});}}, t.prototype.removeChildren = function (t) {void 0 === t && (t = !1);var e = this.element.querySelector("div.".concat(l("children")));if (t) {var i = 0,n = function () {e && e.children.length && (e.removeChild(e.children[0]), (i += 1) > 10 ? n() : f(n));};f(n);} else e && (e.innerHTML = "");}, t;}();}, 7800: (t, e, i) => {"use strict";i.r(e), i.d(e, { DataType: () => s.pe, DialogAdd: () => n.A, DialogAddState: () => n.L, DialogEdit: () => r.Pv, DialogManager: () => s.KU, DialogSearch: () => o.z, EditorColorMode: () => r.MJ, MapListDataType: () => s.jX, SearchBy: () => o.G, SelectOptionType: () => r.iw, TabsMenu: () => r.yD });var n = i(7029),r = i(9512),s = i(3965),o = i(8928);}, 7867: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(6541),r = Array.prototype.filter;function s() {return Array.from(this.children);}function o(t) {return this.selectAll(null == t ? s : function (t) {return function () {return r.call(this.children, t);};}("function" == typeof t ? t : (0, n.j)(t)));}}, 7875: (t, e, i) => {"use strict";new Map();}, 7890: (t, e, i) => {"use strict";function n(t) {var e = "text";if (arguments.length < 1) return (e = this.tween(e)) && e._value;if (null == t) return this.tween(e, null);if ("function" != typeof t) throw new Error();return this.tween(e, function (t) {var e, i;function n() {var n = t.apply(this, arguments);return n !== i && (e = (i = n) && function (t) {return function (e) {this.textContent = t.call(this, e);};}(n)), e;}return n._value = t, n;}(t));}i.d(e, { A: () => n });}, 7925: (t, e) => {"use strict";Object.defineProperty(e, "__esModule", { value: !0 }), e.addMilliseconds = e.addSeconds = e.addMinutes = e.addHours = e.addDays = e.addWeeks = e.addMonths = e.addYears = void 0;var i = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],n = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];function r(t) {return t % 4 == 0 && t % 100 != 0 || t % 400 == 0;}function s(t, e) {var i = t.getFullYear(),n = t.getMonth(),r = t.getDate(),s = new Date(t.getTime());return s.setFullYear(i, n, r + e), s;}e.addYears = function (t, e) {var i = t.getFullYear(),n = t.getMonth(),s = t.getDate(),o = 2 === n && 29 === s,a = new Date(t.getTime());return i += e, o && !r(i) && (s = 28), a.setFullYear(i, n, s), a;}, e.addMonths = function (t, e) {var s = t.getFullYear(),o = t.getMonth(),a = t.getDate(),l = new Date(t.getTime());return s += (e - e % 12) / 12, (o += e % 12) > 11 && (o %= 12, s++), a = Math.min(a, function (t, e) {return r(t) ? n[e] : i[e];}(s, o)), l.setFullYear(s, o, a), l;}, e.addWeeks = function (t, e) {return s(t, 7 * e);}, e.addDays = s, e.addHours = function (t, e) {return new Date(t.getTime() + 36e5 * e);}, e.addMinutes = function (t, e) {return new Date(t.getTime() + 6e4 * e);}, e.addSeconds = function (t, e) {return new Date(t.getTime() + 1e3 * e);}, e.addMilliseconds = function (t, e) {return new Date(t.getTime() + e);};}, 7947: (t, e, i) => {"use strict";i.d(e, { A: () => r, g: () => n });var n = "http://www.w3.org/1999/xhtml";const r = { svg: "http://www.w3.org/2000/svg", xhtml: n, xlink: "http://www.w3.org/1999/xlink", xml: "http://www.w3.org/XML/1998/namespace", xmlns: "http://www.w3.org/2000/xmlns/" };}, 7949: (t, e, i) => {"use strict";i.d(e, { A: () => p });var n = i(1957),r = i(7268),s = i(123),o = i(7479);function a(t) {return function () {this.removeAttribute(t);};}function l(t) {return function () {this.removeAttributeNS(t.space, t.local);};}function c(t, e, i) {var n,r,s = i + "";return function () {var o = this.getAttribute(t);return o === s ? null : o === n ? r : r = e(n = o, i);};}function h(t, e, i) {var n,r,s = i + "";return function () {var o = this.getAttributeNS(t.space, t.local);return o === s ? null : o === n ? r : r = e(n = o, i);};}function u(t, e, i) {var n, r, s;return function () {var o,a,l = i(this);if (null != l) return (o = this.getAttribute(t)) === (a = l + "") ? null : o === n && a === r ? s : (r = a, s = e(n = o, l));this.removeAttribute(t);};}function d(t, e, i) {var n, r, s;return function () {var o,a,l = i(this);if (null != l) return (o = this.getAttributeNS(t.space, t.local)) === (a = l + "") ? null : o === n && a === r ? s : (r = a, s = e(n = o, l));this.removeAttributeNS(t.space, t.local);};}function p(t, e) {var i = (0, r.A)(t),p = "transform" === i ? n.I : o.A;return this.attrTween(t, "function" == typeof e ? (i.local ? d : u)(i, p, (0, s.J)(this, "attr." + t, e)) : null == e ? (i.local ? l : a)(i) : (i.local ? h : c)(i, p, e));}}, 7952: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(1882),r = i(574);function s(t) {"function" != typeof t && (t = (0, r.A)(t));for (var e = this._groups, i = e.length, s = new Array(i), o = 0; o < i; ++o) for (var a, l, c = e[o], h = c.length, u = s[o] = new Array(h), d = 0; d < h; ++d) (a = c[d]) && (l = t.call(a, a.__data__, d, c)) && ("__data__" in a && (l.__data__ = a.__data__), u[d] = l);return new n.LN(s, this._parents);}}, 7991: (t, e, i) => {"use strict";i.d(e, { A: () => n, R: () => r });const n = crypto,r = (t) => t instanceof CryptoKey;}, 8072: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(3663);function r(t) {var e = "function" == typeof t ? t : (0, n.A)(t);return this.select(function () {return this.appendChild(e.apply(this, arguments));});}}, 8079: (t, e, i) => {"use strict";i.d(e, { $: () => r });var n = i(8503);function r(t, e) {var i,r = e ? e.length : 0,s = t ? Math.min(r, t.length) : 0,o = new Array(s),a = new Array(r);for (i = 0; i < s; ++i) o[i] = (0, n.A)(t[i], e[i]);for (; i < r; ++i) a[i] = e[i];return function (t) {for (i = 0; i < s; ++i) a[i] = o[i](t);return a;};}}, 8101: (t, e, i) => {"use strict";function n() {return t = "desktop", function () {const t = document.location.href;return t.includes("app.powerbi.com") ? /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent) ? "mobile" : "service" : t.includes("ms-pbi.pbi.microsoft.com") ? "desktop" : "unknown";}() === t;var t;}i.d(e, { zb: () => n });}, 8172: (t, e, i) => {"use strict";function n(t, e) {var i = new Date();return t = +t, e = +e, function (n) {return i.setTime(t * (1 - n) + e * n), i;};}i.d(e, { A: () => n });}, 8174: (t, e, i) => {"use strict";i.d(e, { KN: () => h, Uu: () => p, hy: () => d, jj: () => u });var n = i(7077),r = i(906),s = i(1807);const o = "maps-upload-loading",a = `${o}-message`,l = `${o}-progress`;class c extends r.g {constructor(t) {t.hideCloseButton = !0, t.title = "Processing Maps", t.containerId = o, t.description = "Uploaded maps are being processed and optimized before saving. This might take a while. Please wait.", super(t);}addProcessing() {this.boxContent.appendChild((0, s.tTh)(".processing", { attr: { id: o } }, [(0, s.tTh)("span.text", { attr: { id: a } }, "Processing map"), (0, s.tTh)("span.progress", { attr: { id: l } }, "")]));}draw() {return this.create(), this.addProcessing(), super.draw();}}function h() {new c({ element: document.body }).draw();}function u(t, e) {const i = e ?? document.getElementById(o);i && ("show" === t ? (i.classList.remove("hide"), i.classList.add("show")) : (i.classList.remove("show"), i.classList.add("hide")));}function d() {document.getElementById(o)?.remove();}function p(t, e) {if (!t) return;const i = document.getElementById(o);if (i) {u("show", i);const r = i.querySelector(`#${a}`),s = i.querySelector(`#${l}`);r && (r.textContent = `Processing "${(0, n.T3)(t)}" map.`), s && e && (s.textContent = `(${e[0]}/${e[1]})`);}}}, 8206: (t, e, i) => {"use strict";function n(t, e) {var i,n = 0,r = (t = t.slice()).length - 1,s = t[n],o = t[r];return o < s && (i = n, n = r, r = i, i = s, s = o, o = i), t[n] = e.floor(s), t[r] = e.ceil(o), t;}i.d(e, { A: () => n });}, 8235: (t, e, i) => {"use strict";function n(t) {return t.trim().split(/^|\s+/);}function r(t) {return t.classList || new s(t);}function s(t) {this._node = t, this._names = n(t.getAttribute("class") || "");}function o(t, e) {for (var i = r(t), n = -1, s = e.length; ++n < s;) i.add(e[n]);}function a(t, e) {for (var i = r(t), n = -1, s = e.length; ++n < s;) i.remove(e[n]);}function l(t) {return function () {o(this, t);};}function c(t) {return function () {a(this, t);};}function h(t, e) {return function () {(e.apply(this, arguments) ? o : a)(this, t);};}function u(t, e) {var i = n(t + "");if (arguments.length < 2) {for (var s = r(this.node()), o = -1, a = i.length; ++o < a;) if (!s.contains(i[o])) return !1;return !0;}return this.each(("function" == typeof e ? h : e ? l : c)(i, e));}i.d(e, { A: () => u }), s.prototype = { add: function (t) {this._names.indexOf(t) < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" ")));}, remove: function (t) {var e = this._names.indexOf(t);e >= 0 && (this._names.splice(e, 1), this._node.setAttribute("class", this._names.join(" ")));}, contains: function (t) {return this._names.indexOf(t) >= 0;} };}, 8278: (t, e, i) => {"use strict";i.d(e, { Og: () => c, jU: () => l });var n = i(1436),r = i(2827),s = i(1542),o = i(7493),a = i(149);async function l(t, e, i) {if ("string" != typeof t || 0 !== t.indexOf("-----BEGIN PUBLIC KEY-----")) throw new TypeError('"spki" must be SPKI formatted string');return (0, r.sc)(t, e, i);}async function c(t, e) {if (!(0, a.A)(t)) throw new TypeError("JWK must be an object");switch (e || (e = t.alg), t.kty) {case "oct":if ("string" != typeof t.k || !t.k) throw new TypeError('missing "k" (Key Value) Parameter value');return (0, n.D4)(t.k);case "RSA":if ("oth" in t && void 0 !== t.oth) throw new o.T0('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case "EC":case "OKP":return (0, s.A)({ ...t, alg: e });default:throw new o.T0('Unsupported "kty" (Key Type) Parameter value');}}}, 8311: (t, e, i) => {"use strict";const n = /\s+/g;class r {constructor(t, e) {if (e = o(e), t instanceof r) return t.loose === !!e.loose && t.includePrerelease === !!e.includePrerelease ? t : new r(t.raw, e);if (t instanceof a) return this.raw = t.value, this.set = [[t]], this.formatted = void 0, this;if (this.options = e, this.loose = !!e.loose, this.includePrerelease = !!e.includePrerelease, this.raw = t.trim().replace(n, " "), this.set = this.raw.split("||").map((t) => this.parseRange(t.trim())).filter((t) => t.length), !this.set.length) throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if (this.set.length > 1) {const t = this.set[0];if (this.set = this.set.filter((t) => !v(t[0])), 0 === this.set.length) this.set = [t];else if (this.set.length > 1) for (const t of this.set) if (1 === t.length && y(t[0])) {this.set = [t];break;}}this.formatted = void 0;}get range() {if (void 0 === this.formatted) {this.formatted = "";for (let t = 0; t < this.set.length; t++) {t > 0 && (this.formatted += "||");const e = this.set[t];for (let t = 0; t < e.length; t++) t > 0 && (this.formatted += " "), this.formatted += e[t].toString().trim();}}return this.formatted;}format() {return this.range;}toString() {return this.range;}parseRange(t) {const e = ((this.options.includePrerelease && g) | (this.options.loose && m)) + ":" + t,i = s.get(e);if (i) return i;const n = this.options.loose,r = n ? h[u.HYPHENRANGELOOSE] : h[u.HYPHENRANGE];t = t.replace(r, P(this.options.includePrerelease)), l("hyphen replace", t), t = t.replace(h[u.COMPARATORTRIM], d), l("comparator trim", t), t = t.replace(h[u.TILDETRIM], p), l("tilde trim", t), t = t.replace(h[u.CARETTRIM], f), l("caret trim", t);let o = t.split(" ").map((t) => w(t, this.options)).join(" ").split(/\s+/).map((t) => _(t, this.options));n && (o = o.filter((t) => (l("loose invalid filter", t, this.options), !!t.match(h[u.COMPARATORLOOSE])))), l("range list", o);const c = new Map(),y = o.map((t) => new a(t, this.options));for (const t of y) {if (v(t)) return [t];c.set(t.value, t);}c.size > 1 && c.has("") && c.delete("");const b = [...c.values()];return s.set(e, b), b;}intersects(t, e) {if (!(t instanceof r)) throw new TypeError("a Range is required");return this.set.some((i) => b(i, e) && t.set.some((t) => b(t, e) && i.every((i) => t.every((t) => i.intersects(t, e)))));}test(t) {if (!t) return !1;if ("string" == typeof t) try {t = new c(t, this.options);} catch (t) {return !1;}for (let e = 0; e < this.set.length; e++) if (D(this.set[e], t, this.options)) return !0;return !1;}}t.exports = r;const s = new (i(8794))(),o = i(8587),a = i(3904),l = i(7272),c = i(3908),{ safeRe: h, t: u, comparatorTrimReplace: d, tildeTrimReplace: p, caretTrimReplace: f } = i(9718),{ FLAG_INCLUDE_PRERELEASE: g, FLAG_LOOSE: m } = i(6874),v = (t) => "<0.0.0-0" === t.value,y = (t) => "" === t.value,b = (t, e) => {let i = !0;const n = t.slice();let r = n.pop();for (; i && n.length;) i = n.every((t) => r.intersects(t, e)), r = n.pop();return i;},w = (t, e) => (t = t.replace(h[u.BUILD], ""), l("comp", t, e), t = C(t, e), l("caret", t), t = S(t, e), l("tildes", t), t = T(t, e), l("xrange", t), t = M(t, e), l("stars", t), t),x = (t) => !t || "x" === t.toLowerCase() || "*" === t,S = (t, e) => t.trim().split(/\s+/).map((t) => E(t, e)).join(" "),E = (t, e) => {const i = e.loose ? h[u.TILDELOOSE] : h[u.TILDE];return t.replace(i, (e, i, n, r, s) => {let o;return l("tilde", t, e, i, n, r, s), x(i) ? o = "" : x(n) ? o = `>=${i}.0.0 <${+i + 1}.0.0-0` : x(r) ? o = `>=${i}.${n}.0 <${i}.${+n + 1}.0-0` : s ? (l("replaceTilde pr", s), o = `>=${i}.${n}.${r}-${s} <${i}.${+n + 1}.0-0`) : o = `>=${i}.${n}.${r} <${i}.${+n + 1}.0-0`, l("tilde return", o), o;});},C = (t, e) => t.trim().split(/\s+/).map((t) => k(t, e)).join(" "),k = (t, e) => {l("caret", t, e);const i = e.loose ? h[u.CARETLOOSE] : h[u.CARET],n = e.includePrerelease ? "-0" : "";return t.replace(i, (e, i, r, s, o) => {let a;return l("caret", t, e, i, r, s, o), x(i) ? a = "" : x(r) ? a = `>=${i}.0.0${n} <${+i + 1}.0.0-0` : x(s) ? a = "0" === i ? `>=${i}.${r}.0${n} <${i}.${+r + 1}.0-0` : `>=${i}.${r}.0${n} <${+i + 1}.0.0-0` : o ? (l("replaceCaret pr", o), a = "0" === i ? "0" === r ? `>=${i}.${r}.${s}-${o} <${i}.${r}.${+s + 1}-0` : `>=${i}.${r}.${s}-${o} <${i}.${+r + 1}.0-0` : `>=${i}.${r}.${s}-${o} <${+i + 1}.0.0-0`) : (l("no pr"), a = "0" === i ? "0" === r ? `>=${i}.${r}.${s}${n} <${i}.${r}.${+s + 1}-0` : `>=${i}.${r}.${s}${n} <${i}.${+r + 1}.0-0` : `>=${i}.${r}.${s} <${+i + 1}.0.0-0`), l("caret return", a), a;});},T = (t, e) => (l("replaceXRanges", t, e), t.split(/\s+/).map((t) => A(t, e)).join(" ")),A = (t, e) => {t = t.trim();const i = e.loose ? h[u.XRANGELOOSE] : h[u.XRANGE];return t.replace(i, (i, n, r, s, o, a) => {l("xRange", t, i, n, r, s, o, a);const c = x(r),h = c || x(s),u = h || x(o),d = u;return "=" === n && d && (n = ""), a = e.includePrerelease ? "-0" : "", c ? i = ">" === n || "<" === n ? "<0.0.0-0" : "*" : n && d ? (h && (s = 0), o = 0, ">" === n ? (n = ">=", h ? (r = +r + 1, s = 0, o = 0) : (s = +s + 1, o = 0)) : "<=" === n && (n = "<", h ? r = +r + 1 : s = +s + 1), "<" === n && (a = "-0"), i = `${n + r}.${s}.${o}${a}`) : h ? i = `>=${r}.0.0${a} <${+r + 1}.0.0-0` : u && (i = `>=${r}.${s}.0${a} <${r}.${+s + 1}.0-0`), l("xRange return", i), i;});},M = (t, e) => (l("replaceStars", t, e), t.trim().replace(h[u.STAR], "")),_ = (t, e) => (l("replaceGTE0", t, e), t.trim().replace(h[e.includePrerelease ? u.GTE0PRE : u.GTE0], "")),P = (t) => (e, i, n, r, s, o, a, l, c, h, u, d) => `${i = x(n) ? "" : x(r) ? `>=${n}.0.0${t ? "-0" : ""}` : x(s) ? `>=${n}.${r}.0${t ? "-0" : ""}` : o ? `>=${i}` : `>=${i}${t ? "-0" : ""}`} ${l = x(c) ? "" : x(h) ? `<${+c + 1}.0.0-0` : x(u) ? `<${c}.${+h + 1}.0-0` : d ? `<=${c}.${h}.${u}-${d}` : t ? `<${c}.${h}.${+u + 1}-0` : `<=${l}`}`.trim(),D = (t, e, i) => {for (let i = 0; i < t.length; i++) if (!t[i].test(e)) return !1;if (e.prerelease.length && !i.includePrerelease) {for (let i = 0; i < t.length; i++) if (l(t[i].semver), t[i].semver !== a.ANY && t[i].semver.prerelease.length > 0) {const n = t[i].semver;if (n.major === e.major && n.minor === e.minor && n.patch === e.patch) return !0;}return !1;}return !0;};}, 8352: (t, e, i) => {"use strict";i.d(e, { X: () => r });var n = i(3242);class r {static defaultQueue = "default";queue = {};static _instance;static get instance() {return r._instance || (r._instance = new this()), r._instance;}constructor() {if (r._instance) return r._instance;r._instance = this;}sanitizeValues(t) {const e = (0, n.o8)(t);for (const t of Object.keys(e)) {let i = e[t];null !== i && (0, n.Gv)(i) && (i = (0, n.cK)(i, "solid") ? i.solid.color : JSON.stringify(i)), e[t] = i;}return e;}updateParsedSettings(t, e) {t.forEach((t) => {if ((0, n.cK)(e, t.objectName)) for (const i of Object.keys(t.properties)) if ((0, n.cK)(e[t.objectName], i)) {let n = t.properties[i];if (void 0 !== n && "string" == typeof n) try {n = JSON.parse(n);} catch (t) {}e[t.objectName][i] = n;}});}static SAVE(t, e = !0, i) {this.BATCH(t), this.BATCH_SAVE(r.defaultQueue, e, i);}static save = r.SAVE;static BATCH(t, e = r.defaultQueue) {const i = this.instance;i.queue[e] || (i.queue[e] = []), t.properties = i.sanitizeValues(t.properties), i.queue[e].push(t);}static batch = r.BATCH;static BATCH_SAVE(t, e, i) {let n = "string" == typeof t ? t : "string" == typeof e ? e : void 0;void 0 === n && (n = r.defaultQueue);let s = "boolean" == typeof t ? t : "boolean" == typeof e ? e : void 0;void 0 === s && (s = !0);const o = "object" == typeof t ? t : "object" == typeof e ? e : i,a = this.instance;a.queue[n] && a.queue[n].length && (s && (globalThis.thisVisual.internalUpdate = !0), thisVisual.host.persistProperties({ merge: a.queue[n] }), o && a.updateParsedSettings(a.queue[n], o), a.queue[n].find((t) => null != t.selector) && thisVisual.host.refreshHostData(), this.CLEAR(n));}static batchSave = r.BATCH_SAVE;static CLEAR(t) {const e = this.instance;t ? delete e.queue[t] : e.queue = {};}static clear = r.CLEAR;}}, 8358: (t, e, i) => {"use strict";i.d(e, { VI: () => g, wf: () => f, zq: () => m });var n = i(1807),r = i(3365),s = i(5670),o = i(3341),a = i(891),l = i(3218),c = i(4624);const h = "label-edit-box",u = ["moveable-area", "moveable-control", "moveable-line", "moveable-origin", "moveable-origin-direction"];function d(t) {return t.ctrlKey || t.metaKey || t.shiftKey;}class p extends s.JU {constructor(t, e, i) {super(null, null, null, null, t, e, i);}get id() {return `${s.PQ}${this.config.type.slice(0, 1)}`;}get fingerprint() {return this.id;}draw() {}select() {}deselect() {}updatePosition() {}updateSize() {}updateScale() {}}class f {labels;svgMap;container;settings;viewportScale;saveTimeout;designerPanel;abortController;selectedLabels = [];moveable;selecto;updateMoveableTimeout;get id() {return `${this.svgMap.id}-designer`;}get isMoveableLocked() {return this.svgMap.zoomer.canPanWithoutKeys || this.svgMap.zoomer.panning == l.o.Panning || this.svgMap.zoomer.isSpacePressed;}get moveableGuidelines() {const t = [];for (const e in this.labels) t.push(this.labels[e].labelElement);return t;}constructor(t, e, i, n, r) {this.labels = t, this.svgMap = e, this.container = i, this.settings = n, this.viewportScale = r, this.abortController = new AbortController(), this.initMoveable(), this.initSelecto(), this.initPanel(), this.restoreSelectedLabels(), this.listen();}updateMoveableStyles() {const t = 1 / (this.viewportScale * this.svgMap.zoomer.state.zoom),e = Math.max(1, 10 * t),i = 2 * t,r = Math.max(1, t),s = [`.area-label-element{outline-width:${t}px !important;}`, `.moveable-control{width:${e}px !important;height:${e}px !important;margin-left:${-e / 2}px !important;margin-top:${-e / 2}px !important;outline-width:${i}px !important;}`, `.moveable-n,.moveable-s,.moveable-w,.moveable-e{height:${r}px !important;}`, `.moveable-rotation-line{width:${r}px !important;}`, `.moveable-vertical{width:${r}px !important;}`, `.moveable-horizontal{height:${r}px !important;}`];(0, n.fXq)("movable-styles", s);}updateViewportScale(t) {this.viewportScale = t, this.updateMoveableStyles(), this.designerPanel.updateScale(t), window.clearTimeout(this.updateMoveableTimeout), this.updateMoveableTimeout = window.setTimeout(() => this.updateMoveableTarget(), 10);}updatePanelSelection() {this.designerPanel.mode = this.selectedLabels[0] instanceof p ? this.selectedLabels[0].isCategory ? "category" : "data" : "selection", this.designerPanel.selectLabels(this.selectedLabels);}restoreSelectedLabels() {const t = globalThis.labelDesignerState;if (t.selectedLabelsIds?.length) {for (const e of t.selectedLabelsIds) if (e.startsWith(s.PQ)) this.selectedLabels.push(new p(this.settings, { type: e.endsWith("c") ? "category" : "data" }, this.svgMap.id));else {const t = this.labels[e];t && (this.selectedLabels.push(t), t.select());}this.updateMoveableTarget();}this.updatePanelSelection();}listen() {this.svgMap.zoomer.on("zoom", () => this.updateMoveableStyles(), this.id), this.container.addEventListener("mousedown", (t) => this.onLabelClick(t), { signal: this.abortController.signal }), document.addEventListener("keydown", (t) => this.onKeyboardMove(t), { signal: this.abortController.signal }), this.container.addLiveEventListener("dblclick", ".moveable-control", () => this.onRotationHandlerDoubleClick());}onLabelClick(t) {if (this.isMoveableLocked || 0 != t.button) return;const e = t.target;for (const t of u) if (e.classList.contains(t)) return;e.classList.contains("area-label-element") ? (this.selectLabel(this.labels[e.id], !d(t), !0, t), t.stopPropagation()) : "selection" == this.designerPanel.mode && this.deselectLabels();}onKeyboardMove(t) {if (this.isMoveableLocked) return;if (!this.selectedLabels.length || !this.moveable) return;if (t.target instanceof HTMLInputElement || t.target instanceof HTMLTextAreaElement || t.target instanceof HTMLSelectElement) return;const e = (t.shiftKey ? 10 : 1) * this.svgMap.scale.scale;let i = 0,r = 0;switch (t.key) {case "ArrowLeft":i = -e;break;case "ArrowRight":i = e;break;case "ArrowUp":r = -e;break;case "ArrowDown":r = e;break;default:return;}const s = {};for (const t of this.selectedLabels) {const e = t.labelElement,o = (0, n.sxo)(e),a = o.translateX + i,l = o.translateY + r;(0, n.vm6)(e, `translate(${a}px, ${l}px)`), s[t.id] = { coords: this.convertCoords(t.id, { x: a, y: l }) }, t?.updatePosition();}this.updateCustomLabels(s), this.updatePanelSelection(), this.moveable.updateRect(), t.preventDefault();}onRotationHandlerDoubleClick() {if (!this.moveable || !this.selectedLabels.length) return;const t = {};this.selectedLabels.forEach((e) => {(0, n.CXM)(e.labelElement, "rotate"), t[e.id] = { rotation: 0 };}), this.moveable.updateRect(), this.updateCustomLabels(t), this.updatePanelSelection();}onMoveableDragStart(t) {this.isMoveableLocked && t.stop();}onMoveableDragGroupStart(t) {this.isMoveableLocked && t.stop();}onMoveableDrag(t) {t.target.style.transform = t.transform;const e = this.labels[t.target.id];e?.updatePosition();}onMoveableDragGroup(t) {t.events.forEach((t) => this.onMoveableDrag(t));}onMoveableDragEnd(t, e = !0) {if (!t.lastEvent) return;const [i, n] = t.lastEvent.beforeTranslate;this.updateCustomLabels({ [t.target.id]: { coords: this.convertCoords(t.target.id, { x: i, y: n }) } }, !0, e), this.updatePanelSelection();}onMoveableDragGroupEnd(t) {t.events.forEach((t) => this.onMoveableDragEnd(t, !1)), this.saveCustomLabels();}onMoveableRotate(t) {t.target.style.transform = t.transform;}onMoveableRotateGroup(t) {t.events.forEach((t) => this.onMoveableRotate(t));}onMoveableRotateEnd(t, e = !0) {if (!t.lastEvent) return;const i = (0, n.H_l)(t.lastEvent.afterTransform);let r = t.lastEvent.rotation;r > 360 && (r %= 360), r < -360 && (r %= -360), this.updateCustomLabels({ [t.target.id]: { rotation: r, coords: this.convertCoords(t.target.id, { x: i.translateX, y: i.translateY }) } }, !0, e), this.updatePanelSelection();}onMoveableRotateGroupEnd(t) {t.events.forEach((t) => this.onMoveableRotateEnd(t, !1)), this.saveCustomLabels();}onMoveableResize(t) {const e = Math.max(10, t.width),i = Math.max(10, t.height);t.target.style.width = `${e}px`, t.target.style.height = `${i}px`, t.target.style.transform = t.drag.transform;}onMoveableResizeGroup(t) {t.events.forEach((t) => this.onMoveableResize(t));}onMoveableResizeEnd(t, e = !0) {if (!t.lastEvent) return;const i = (0, n.H_l)(t.lastEvent.afterTransform);this.updateCustomLabels({ [t.target.id]: { size: this.convertSize({ width: t.lastEvent.width, height: t.lastEvent.height }), coords: this.convertCoords(t.target.id, { x: i.translateX, y: i.translateY }) } }, !0, e);const r = this.labels[t.target.id];r?.updateSize(), this.updatePanelSelection();}onMoveableResizeGroupEnd(t) {t.events.forEach((t) => this.onMoveableResizeEnd(t, !1)), this.saveCustomLabels();}onMoveableClickGroup(t) {if (this.isMoveableLocked || !d(t.inputEvent)) return;let e;t.moveableTarget ? e = this.labels[t.moveableTarget.id] : t.inputTarget.classList.contains("area-label-element") && (e = this.labels[t.inputTarget.id]), e && this.toggleSelection(e);}toggleSelection(t) {this.selectedLabels.includes(t) ? this.deselectLabel(t) : this.selectLabel(t, !1);}selectLabel(t, e, i = !0, n) {this.selectedLabels.includes(t) || ((e || this.selectedLabels[0] instanceof p) && this.deselectLabels(), t && (t.select(), this.selectedLabels.push(t), this.updateMoveableTarget(n), i && (globalThis.labelDesignerState.selectedLabelsIds = this.selectedLabels.map((t) => t.id), this.updatePanelSelection())));}deselectLabel(t, e = !0) {const i = this.selectedLabels.indexOf(t);-1 !== i && (this.selectedLabels.splice(i, 1), t.deselect(), this.updateMoveableTarget(), e && (globalThis.labelDesignerState.selectedLabelsIds = this.selectedLabels.map((t) => t.id), this.updatePanelSelection()));}initMoveable() {this.destroyMoveable(), this.moveable = new o.Ay(this.container, { rootContainer: this.container.parentElement, className: h, draggable: !0, resizable: !0, scalable: !0, rotatable: !0, origin: !1, edge: !0, throttleResize: 0, snappable: !0, useAccuratePosition: !0, isDisplaySnapDigit: !1, elementGuidelines: this.moveableGuidelines }).on("dragStart", (t) => this.onMoveableDragStart(t)).on("drag", (t) => this.onMoveableDrag(t)).on("dragEnd", (t) => this.onMoveableDragEnd(t)).on("dragGroupStart", (t) => this.onMoveableDragGroupStart(t)).on("dragGroup", (t) => this.onMoveableDragGroup(t)).on("dragGroupEnd", (t) => this.onMoveableDragGroupEnd(t)).on("rotate", (t) => this.onMoveableRotate(t)).on("rotateEnd", (t) => this.onMoveableRotateEnd(t)).on("rotateGroup", (t) => this.onMoveableRotateGroup(t)).on("rotateGroupEnd", (t) => this.onMoveableRotateGroupEnd(t)).on("resize", (t) => this.onMoveableResize(t)).on("resizeEnd", (t) => this.onMoveableResizeEnd(t)).on("resizeGroup", (t) => this.onMoveableResizeGroup(t)).on("resizeGroupEnd", (t) => this.onMoveableResizeGroupEnd(t)).on("clickGroup", (t) => this.onMoveableClickGroup(t)), this.updateMoveableStyles();}initSelecto() {this.selecto = new a.Ay({ container: this.container, rootContainer: this.container.parentElement, selectableTargets: [".area-label-element"], hitRate: 0, selectByClick: !1, selectFromInside: !1, toggleContinueSelect: ["shift"], ratio: 0 }).on("dragStart", (t) => {const e = t.inputEvent.target;(this.isMoveableLocked || this.moveable.isMoveableElement(e)) && t.stop();}).on("select", (t) => {const { added: e, removed: i, isDragStartEnd: n } = t;n || (e?.forEach((t, i) => {const n = this.labels[t.id];n && this.selectLabel(n, !1, i == e.length - 1);}), i?.forEach((t, e) => {const n = this.labels[t.id];n && this.deselectLabel(n, e == i.length - 1);}));});}updateMoveableTarget(t) {this.moveable?.setState({ target: this.selectedLabels.map((t) => t.labelElement), elementGuidelines: this.moveableGuidelines }, () => {t && this.moveable.dragStart(t);});}initPanel() {const t = globalThis.thisVisual.element.querySelector(".label-designer-panel");this.designerPanel = new r.c(this.viewportScale, this.settings), this.designerPanel.draw(t), globalThis.labelDesignerState.panelState && this.designerPanel.restoreInterfaceState(globalThis.labelDesignerState.panelState), this.designerPanel.on("change", () => {this.selectedLabels.forEach((t, e) => {const i = (0, c.v4)(this.designerPanel.state, e);this.updateCustomLabels({ [t.id]: i }, !1, !1), t.draw(), t.select();}), this.updateMoveableTarget(), "selection" == this.designerPanel.mode ? this.saveCustomLabels(300) : this.saveCustomLabels(0, !1);}), this.designerPanel.on("interface", () => {globalThis.labelDesignerState.panelState = this.designerPanel.interfaceState;}), this.designerPanel.on("deselect", () => {this.deselectLabels();}), this.designerPanel.on("select", (t) => {const e = Object.keys(this.labels);if ("*" == t) e.forEach((t, i) => this.selectLabel(this.labels[t], !1, i == e.length - 1));else {this.deselectLabels();const i = e.map((t) => this.labels[t]).filter((e) => "category" == t && e.isCategory || "data" == t && !e.isCategory || "matched" == t && e.isCategory && e.isMatched || "unmatched" == t && e.isCategory && !e.isMatched);i.forEach((t, e) => this.selectLabel(t, !1, e == i.length - 1));}}), this.designerPanel.on("mode", () => {"selection" == this.designerPanel.mode ? this.deselectLabels() : this.selectLabel(new p(this.settings, { type: this.designerPanel.mode }, this.svgMap.id), !0);}), this.designerPanel.on("reset", () => {this.removeCustomLabels(this.selectedLabels);});}convertCoords(t, e) {const i = this.labels[t];return i ? { x: (0, n.LIG)((e.x + i.labelElement.offsetLeft) / this.svgMap.scale.x.scale, 2), y: (0, n.LIG)((e.y + i.labelElement.offsetTop) / this.svgMap.scale.y.scale, 2) } : e;}convertSize(t) {return { width: (0, n.LIG)(t.width / this.svgMap.scale.x.scale, 2), height: (0, n.LIG)(t.height / this.svgMap.scale.y.scale, 2) };}updateCustomLabels(t, e = !0, i = !0) {this.settings.internal?.customLabels?.value || (this.settings.internal.customLabels.value = {});const r = this.settings.internal.customLabels.value;r[this.svgMap.id] || (r[this.svgMap.id] = {});for (const i in t) if (i.startsWith(s.PQ)) (0, n.dld)(t[i]) ? r[this.svgMap.id][i] = t[i] : delete r[this.svgMap.id][i];else {const s = this.labels[i];s && (r[this.svgMap.id][s.fingerprint] = e ? { ...r[this.svgMap.id][s.fingerprint], ...t[i] } : t[i], (0, n.dld)(r[this.svgMap.id][s.fingerprint]) || delete r[this.svgMap.id][s.fingerprint]);}i && this.saveCustomLabels();}removeCustomLabels(t) {if (!this.settings.internal?.customLabels?.value) return;const e = this.settings.internal.customLabels.value;e[this.svgMap.id] && (t ? t.forEach((t) => delete e[this.svgMap.id][t.fingerprint]) : delete e[this.svgMap.id], m(this.settings, !1, !1));}deselectLabels() {this.selectedLabels.forEach((t) => t.deselect()), this.selectedLabels = [], this.moveable?.setState({ target: null }), delete globalThis.labelDesignerState.selectedLabelsIds, this.updatePanelSelection();}saveCustomLabels(t = 0, e = !0) {clearTimeout(this.saveTimeout), this.saveTimeout = window.setTimeout(() => {m(this.settings, !1, e), this.saveTimeout = null;}, t);}destroyMoveable() {this.moveable && (this.moveable.destroy(), this.moveable = null), this.selecto && (this.selecto.destroy(), this.selecto = null);}destroy() {this.selectedLabels = [], this.labels = {}, this.destroyMoveable(), this.designerPanel && (this.designerPanel.destroy(), this.designerPanel = null), this.abortController && (this.abortController.abort(), this.abortController = null), this.svgMap?.zoomer && (this.svgMap.zoomer.off("zoom", this.id), this.svgMap.zoomer = null), this.svgMap = null;}}function g() {document.querySelectorAll(`.${h}`).forEach((t) => t.remove());}function m(t, e = !1, i = !0) {n.XI0.BATCH({ objectName: "internal", properties: { customLabels: t.internal.customLabels.value, update: Date.now().toString() }, selector: null }), e || n.XI0.BATCH_SAVE(i);}}, 8443: (t, e, i) => {"use strict";i.d(e, { C: () => u });var n,r = i(1807),s = i(309),o = i(7077),a = i(5367),l = i(2755),c = i(5872),h = i(6481);!function (t) {t.Matched = "matched", t.Unmatched = "unmatched", t.DontBind = "dontbind", t.None = "none";}(n || (n = {}));class u extends r.T0G {element;svgString;rootUl;treeContainer;searchBar;filterType = n.None;selectedNode = null;treeRootNode = null;constructor(t, e, i) {if (super(), this.element = t, this.svgString = e, i) this.treeRootNode = i;else {const t = this.parseSvgString();this.treeRootNode = this.getSvgTreeNode(t);}}create() {this.setContainer(), this.drawTreeUI(this.treeRootNode, this.rootUl);}setContainer() {this.treeContainer = (0, r.tTh)(".tree", this.element, [(0, r.tTh)(".filter", [(0, r.tTh)(".search-bar.margin-right", [(0, r.tTh)(".icon.icon-search.no-hover"), (0, r.tTh)("input.search", { middleware: (t) => {this.searchBar = t;}, attr: { type: "search", placeholder: "Search..." }, events: { input: () => {this.filterTreeBySearch();} } })]), (0, r.tTh)(".icon.ctrl.icon-filter-new", { attr: { title: "Filter" }, events: { click: (t) => {this.showFilterContextMenu(t);} } })]), (0, r.tTh)(".tree-elements", [(0, r.tTh)("ul.ul-root", { middleware: (t) => {this.rootUl = t;}, events: { click: (t) => {this.handleTreeClick(t);} } })])]);}showFilterContextMenu(t) {r.tzH.Init("filter-context-menu", { width: "auto", sticky: t.currentTarget, items: [{ type: r.KGh.Header, label: "Filter" }, { label: "(All)", type: r.KGh.Radio, checked: this.filterType == n.None, className: "small-text-contextual-menu-item", onClick: () => this.filterTreeByType(n.None) }, { label: "Matched", type: r.KGh.Radio, checked: this.filterType == n.Matched, className: "small-text-contextual-menu-item", onClick: () => this.filterTreeByType(n.Matched) }, { label: "Unmatched", type: r.KGh.Radio, checked: this.filterType == n.Unmatched, className: "small-text-contextual-menu-item", onClick: () => this.filterTreeByType(n.Unmatched) }, { label: "Unbound", type: r.KGh.Radio, checked: this.filterType == n.DontBind, className: "small-text-contextual-menu-item", onClick: () => this.filterTreeByType(n.DontBind) }] }).show(t);}filterTreeBySearch() {const t = this.searchBar.value.toLowerCase();if (!t) return this.showAllNodes(), void this.collapseAllNodes();const e = this.filterType !== n.None ? ".filtered" : "";this.treeContainer.querySelectorAll(`li${e}`).forEach((e) => {if ((e.textContent || e.innerText).toLowerCase().includes(t)) {e.hidden = !1;let t = e.parentElement;for (; t && t !== this.treeRootNode.treeElement;) t.hidden = !1, t = t.parentElement, this.expandAllParentGroup(e);} else e.hidden = !0;}), this.changeCaretVisibility();}showAllNodes() {const t = this.filterType !== n.None ? ".filtered" : "",e = this.treeContainer.querySelectorAll(`li${t}`);e && e.forEach((t) => {t.hidden = !1, this.filterType == n.None && t.classList.remove("filtered");}), this.changeCaretVisibility();}changeCaretVisibility() {this.treeContainer.querySelectorAll(".nested").forEach((t) => {const e = t.parentElement.querySelector(".caret");if (e) {const i = t.querySelectorAll("li");Array.from(i).every((t) => t.hidden) ? e.classList.add("hidden") : e.classList.remove("hidden");}});}filterTreeByType(t) {this.filterType = t, t !== n.None ? (this.treeContainer.querySelectorAll("li").forEach((e) => {if (e.classList.contains(t)) e.hidden = !1, e.classList.add("filtered");else {const i = e.querySelectorAll("li");Array.from(i).some((e) => e.classList.contains(t)) ? (e.hidden = !1, e.classList.add("filtered")) : e.hidden = !0;}}), this.changeCaretVisibility()) : this.showAllNodes();}parseSvgString() {return new DOMParser().parseFromString(this.svgString, "image/svg+xml").documentElement;}getSvgTreeNode(t, e = null) {const i = [];for (let n = 0; n < t.children.length; n++) {const r = t.children[n];c.w.IgnoreTags.includes(r.tagName.toLowerCase()) || i.push(this.getSvgTreeNode(r, e));}const n = { mapElement: t, children: i, parent: e, treeElement: null };return i.forEach((t) => t.parent = n), n;}handleExpandCollapse(t, e = !0) {const i = t.closest("li").querySelector(".nested");i.classList.toggle("active"), t.classList.contains("icon-right") ? this.setCaret(t, "expanded") : (this.setCaret(t, "collapsed"), e && (i.querySelectorAll(".nested").forEach((t) => t.classList.remove("active")), i.querySelectorAll(".caret").forEach((t) => this.setCaret(t, "collapsed"))));}collapseAllNodes() {const t = this.treeContainer.querySelectorAll(".caret");t && t.forEach((t) => {const e = t.closest("li").querySelector(".nested");e && (e.classList.remove("active"), this.setCaret(t, "collapsed"));});}setCaret(t, e) {switch (e) {case "expanded":t.classList.remove("icon-right"), t.classList.add("icon-bottom");break;case "collapsed":t.classList.remove("icon-bottom"), t.classList.add("icon-right");}}expandAllParentGroup(t) {if (!t) return;const e = t.parentElement,i = t.querySelector(".caret"),n = e && e.classList.contains("ul-root");i && this.setCaret(i, "expanded"), e && !n && (e.classList.add("active"), e.parentElement && e.parentElement.parentElement && this.expandAllParentGroup(t.parentElement.parentElement));}selectNode(t, e = !1) {this.selectedNode !== t && this.treeRootNode !== t ? (t.treeElement && (t.treeElement.classList.add("selected"), !e) && (this.expandAllParentGroup(t.treeElement), t.treeElement.querySelector(".selectable").scrollIntoView({ block: "center", inline: "center" })), this.selectedNode && this.selectedNode.treeElement && this.selectedNode.treeElement.classList.remove("selected"), this.selectedNode = t, e && this.trigger(s.u.Select)) : this.resetSelection(e);}updateSelectedNode() {this.selectedNode && this.selectedNode.treeElement && this.checkTreeElementBinding(this.selectedNode);}drawTreeUI(t, e, i = 1) {if (t === this.treeRootNode) {for (const n of t.children) this.drawTreeUI(n, e, i);return;}const n = (0, l.eJ)(t.mapElement) || t.mapElement.tagName,s = (0, r.tTh)("li.tree-element", e);(0, h.Md)(t.mapElement) && s.classList.add("is-group"), t.treeElement = s, (0, r.tTh)("span.eye.ctrl.icon.icon-visible", s);const o = (0, r.tTh)(".container", s),a = (0, r.tTh)(".selectable", o),c = (0, r.tTh)("span.text-content", a, n),u = (0, r.tTh)(".end", a);(0, r.tTh)("span.area-type.icon-label", u), (0, r.tTh)("span.dot", u), this.setTreeElementStatus(t);const d = 8 + 10 * (i - 1);a.style.paddingLeft = `${d}px`;const p = (0, r.tTh)("span.caret.icon.icon-right");if (a.insertBefore(p, c), t.children.length > 0) {const e = (0, r.tTh)("ul.nested", s);i++;for (const n of t.children) this.drawTreeUI(n, e, i);} else p.style.visibility = "hidden";}handleTreeClick(t) {t.stopPropagation();const e = t.target;if (!e) return;const i = e.classList.contains("text-content") || e.classList.contains("selectable"),n = e.classList.contains("caret"),r = e.classList.contains("eye");if (i) {const t = this.findTreeNode(this.treeRootNode, e.closest("li"));this.selectNode(t, !0);}if (n && this.handleExpandCollapse(e), r) {const t = this.findTreeNode(this.treeRootNode, e.closest("li"));this.handleEyeClick(t, e);}}findTreeNode(t, e) {if (t) {if (t.treeElement === e) return t;for (let i = 0; i < t.children.length; i++) {const n = this.findTreeNode(t.children[i], e);if (n) return n;}}return null;}setTreeElementStatus(t) {const e = t.mapElement,i = t.treeElement;if (e && i) {const n = i.querySelector(".dot"),r = i.querySelector(".area-type"),s = i.querySelector(".text-content"),l = i.querySelector(".selectable");this.resetTreeElement(t);const c = e.getAttribute(a.Lc.AreaType) ?? a.wR.Area,h = c === a.wR.Area ? "" : "link-to-type";h && i.classList.add(h);const u = (0, o.yl)(e.getAttribute(a.Lc.GroupLink)),d = (0, o.yl)(e.getAttribute(a.Lc.Unbound)),p = (0, o.yl)(e.getAttribute(a.Lc.GroupUnbound)),f = e.getAttribute(a.Lc.GroupMatched),g = e.getAttribute(a.Lc.Matched),m = e.getAttribute(a.Lc.Strong);let v = s.textContent;c === a.wR.Area ? d ? (this.changeDot(n, "dontbind"), i.classList.add("dontbind"), p && i.classList.add("group-unbound"), v += "\nDo Not Bind" + (p ? " (Inherited)" : "")) : g || f ? (i.classList.add("matched"), f && i.classList.add("group-matched"), this.changeDot(n, "none"), m && (i.classList.add("strong"), this.changeDot(n, "strong")), v += `\nBound to: ${g || f}${f ? " (Inherited)" : ""}`) : (this.changeDot(n, "unmatched"), i.classList.add("unmatched"), v += "\nAuto Bind") : (this.changeDot(n, "none"), c === a.wR.Link && (i.classList.add("link-to-type"), u && i.classList.add("group-link"), v += "\nLink")), this.setAreaTypeIcon(r, c), l.setAttribute("title", v);}}resetTreeElement(t) {t.treeElement.classList.remove("matched", "group-matched", "unmatched", "dontbind", "group-unbound", "link-to-type", "group-link");}changeDot(t, e) {switch (e) {case "none":t.classList.remove("show", "strong", "unmatched", "dontbind"), t.classList.add("hide");break;case "strong":t.classList.remove("hide", "unmatched", "dontbind"), t.classList.add("show", e);break;case "unmatched":t.classList.remove("show", "strong", "dontbind"), t.classList.add("hide", e);break;case "dontbind":t.classList.remove("hide", "strong", "unmatched"), t.classList.add("show", e);}}setAreaTypeIcon(t, e) {e && e !== a.wR.Area ? e === a.wR.Link && (t.classList.remove("hide", "icon-label"), t.classList.add("icon-link")) : t.classList.add("hide");}checkTreeElementBinding(t) {if (this.setTreeElementStatus(t), t.children.length > 0) for (const e of t.children) this.checkTreeElementBinding(e);}handleEyeClick(t, e) {const i = e.parentElement;if (!this.hasHiddenParent(i)) {i?.classList.toggle("element-hidden"), t.mapElement.style.display = "none" === t.mapElement.style.display ? "block" : "none";const e = i.querySelector("ul");e && e.querySelectorAll(".eye").forEach((t) => {this.changeEyeStatus(t, !0);});}}hasHiddenParent(t) {let e = t.parentElement;for (; e;) {if (e.classList.contains("element-hidden")) return !0;e = e.parentElement;}return !1;}changeEyeStatus(t, e = !0) {t && t.parentElement?.classList.toggle("element-hidden", !e);}resetSelection(t = !1) {this.selectedNode && this.selectedNode.treeElement && (this.selectedNode.treeElement.querySelector(".text-content").classList.remove("selected"), this.selectedNode.treeElement.classList.remove("selected")), this.selectedNode = null, t && this.trigger(s.u.Reset);}destroy() {this.treeContainer && this.treeContainer.remove(), this.treeContainer = null, this.svgString = null, this.selectedNode = null, this.treeRootNode = null, super.destroy();}}}, 8447: (t, e, i) => {"use strict";i.d(e, { f: () => o });var n = i(3515),r = i(4939),s = i(1807);class o {rules = [];columnsByRole = {};get hasRules() {return this.rules && this.rules.length;}update(t, e) {const i = t && t.dataViews && t.dataViews[0];i && (this.columnsByRole = (0, s.JYz)(i.metadata.columns), i.metadata.objects && (e && Array.isArray(e) || (e = (0, s.PLM)(i.metadata.objects, "internal", "colorRules", [])))), e && Array.isArray(this.rules) || (e = []), this.rules = e;}getColor(t, e, i, s, o = n.UA) {const a = "string" == typeof i;let l = a ? { solid: { color: i } } : i;if (this.rules.length) for (let i = 0; i < this.rules.length; i++) {const a = this.rules[i];if (a.enabled && a.property == t && !0 === (0, r.Lw)(a, this.columnsByRole)) {let t = !1;if ("colorScale" == a.mode) {const i = (0, r.RY)(a.colorScales.field, this.columnsByRole);if (i) for (const n of Object.keys(e)) if (n == i.queryName) {const i = this.getColorScaleColor(e[n], e, a, s, o);i && i.solid && i.solid.color && (l = i), t = !0;break;}} else if ("conditions" == a.mode) {if (void 0 !== o && a.conditions.level && a.conditions.level != n.UA && a.conditions.level != o) continue;t = a.conditions.operator == n.XP.And;for (const i of Object.keys(a.conditions.conditions)) {const r = this.conditionApplies(e, a.conditions.conditions[i], s);if (r && a.conditions.operator == n.XP.Or) {t = !0;break;}if (!r && a.conditions.operator == n.XP.And) {t = !1;break;}}t && a.conditions.color && (l = { solid: { color: a.conditions.color } });}if (t && a.stop) break;}}return l ? a ? l.solid.color : l : null;}getColorScaleColor(t, e, i, s, o) {i.colorScales.advanced || (o = n.UA);let a = s ? t.highlightValue : t.value;if (null === a) {if ("ignore" == i.colorScales.blank) return null;if ("color" == i.colorScales.blank) return i.colorScales.blankColor ? { solid: { color: i.colorScales.blankColor } } : null;"zero" == i.colorScales.blank && (a = 0);}const l = i.colorScales.scalesByLevel[o],c = {};for (const t of Object.keys(e)) c[t] = (0, r.uC)(e[t].domain, i);const h = (0, r.fr)(l, i, (0, r.uC)(t.domain, i), c, this.columnsByRole);return a > h.max ? { solid: { color: l.topColor } } : a < h.min ? { solid: { color: l.bottomColor } } : (0, r.RQ)(a, h.min, (0, r.Ec)("min", l), h.max, (0, r.Ec)("max", l), h.center, l.center.color, i.colorScales.type == n.Qo.Logarithmic);}conditionApplies(t, e, i) {let s = null;for (const n of Object.keys(t)) {const o = (0, r.RY)(e.field, this.columnsByRole);if (o && n == o.queryName) {s = i ? t[n].highlightValue : t[n].value;break;}}s = Array.isArray(s) ? s : [s];const o = (s) => {let o = null;if (e.mode == n.LF.FieldValue || e.mode == n.LF.Calc) {const s = (0, r.RY)(e.fieldValue, this.columnsByRole);if (s) {for (const e of Object.keys(t)) if (e == s.queryName) {o = i ? t[e].highlightValue : t[e].value;break;}e.mode == n.LF.Calc && (e.calc == n.m.Minus ? o -= e.value : e.calc == n.m.Divide ? o /= e.value : e.calc == n.m.Times ? o *= e.value : o += e.value);}} else e.mode == n.LF.Text ? (o = e.text || "", o = String(o).toLowerCase(), s = String(s).toLowerCase()) : o = e.value;if (e.comparison == n.Uf.LessThan) return s < o;if (e.comparison == n.Uf.LessThanOrEqualTo) return s <= o;if (e.comparison == n.Uf.EqualTo) return s == o;if (e.comparison == n.Uf.DifferentFrom) return s != o;if (e.comparison == n.Uf.GreaterThan) return s > o;if (e.comparison == n.Uf.GreaterThanOrEqualTo) return s >= o;if (e.comparison == n.Uf.Between) return s >= o && s <= e.value2;if (e.comparison == n.Uf.Blank) return null === s;if (e.comparison == n.Uf.NotBlank) return null !== s;if (e.comparison == n.Uf.Is) return s == o;if (e.comparison == n.Uf.IsNot) return s != o;if (e.comparison == n.Uf.Contains) {if (s && o) return String(s).includes(o);} else if (e.comparison == n.Uf.NotContains) {if (s && o) return !String(s).includes(o);} else {if (e.comparison == n.Uf.IsEmpty) return 0 === s?.length;if (e.comparison == n.Uf.IsNotEmpty) return s?.length > 0;if (e.comparison == n.Uf.StartsWith) {if (s && o) return 0 == s.indexOf(o);} else if (e.comparison == n.Uf.NotStartsWith && s && o) return 0 != s.indexOf(o);}return !1;};return e.comparison === n.Uf.Contains || e.comparison === n.Uf.StartsWith ? s.some(o) : s.every(o);}getLegendDataPoints(t = n.UA) {const e = [];if (this.rules) for (let i = 0; i < this.rules.length; i++) {const n = this.rules[i];if (n.enabled && n.legend && !0 === (0, r.Lw)(n, this.columnsByRole)) if ("colorScale" == n.mode) {const i = (0, r.RY)(n.colorScales.field, this.columnsByRole);if (i) {const s = thisVisual.host.createSelectionIdBuilder().withMeasure(i.queryName).createSelectionId(),o = n.colorScales.scalesByLevel[t];o.min.color && e.push({ label: o.max.color ? "" : n.displayName, color: o.min.color, selected: !1, identity: s }), o.center.color && e.push({ label: "", color: o.center.color, selected: !1, identity: s }), o.max.color && e.push({ label: n.displayName, color: o.max.color, selected: !1, identity: s }), o.bottomColor && e.push({ label: `${n.displayName}: < ${(0, r.bk)(o.min, i.format, this.columnsByRole)}`, color: o.bottomColor, selected: !1, identity: s }), o.topColor && e.push({ label: `${n.displayName}: > ${(0, r.bk)(o.max, i.format, this.columnsByRole)}`, color: o.topColor, selected: !1, identity: s });}} else if ("conditions" == n.mode) {const t = (0, r.RY)(n.conditions.conditions[0].field, this.columnsByRole);t && e.push({ label: n.displayName, color: n.conditions.color, selected: !1, identity: thisVisual.host.createSelectionIdBuilder().withMeasure(t.queryName).createSelectionId() });}}return e;}getLegendItems(t = n.UA) {const e = [];if (this.rules) for (let i = 0; i < this.rules.length; i++) {const n = this.rules[i];if (n.enabled && n.legend && !0 === (0, r.Lw)(n, this.columnsByRole)) {const i = `_rule_${n.id}`;if ("colorScale" == n.mode) {const s = (0, r.RY)(n.colorScales.field, this.columnsByRole);if (s) {const o = n.colorScales.scalesByLevel[t];if (e.push({ key: i, label: n.displayName, color: o.min.color || o.center.color || o.max.color, colorEnd: o.max.color || o.center.color, static: !0 }), o.bottomColor) {const t = (0, r.bk)(o.min, s.format, this.columnsByRole);t && e.push({ key: `${i}_b`, label: `${n.displayName}: < ${t}`, color: o.bottomColor, static: !0 });}if (o.topColor) {const t = (0, r.bk)(o.max, s.format, this.columnsByRole);t && e.push({ key: `${i}_t`, label: `${n.displayName}: > ${t}`, color: o.topColor, static: !0 });}}} else "conditions" == n.mode && (0, r.RY)(n.conditions.conditions[0].field, this.columnsByRole) && e.push({ key: i, label: n.displayName, color: n.conditions.color, static: !0 });}}return e;}}}, 8503: (t, e, i) => {"use strict";i.d(e, { A: () => d });var n = i(6957),r = i(1197),s = i(8079),o = i(8172),a = i(8981),l = i(4287),c = i(7737),h = i(735),u = i(128);function d(t, e) {var i,d = typeof e;return null == e || "boolean" === d ? (0, h.A)(e) : ("number" === d ? a.A : "string" === d ? (i = (0, n.Ay)(e)) ? (e = i, r.Ay) : c.A : e instanceof n.Ay ? r.Ay : e instanceof Date ? o.A : (0, u.p)(e) ? u.A : Array.isArray(e) ? s.$ : "function" != typeof e.valueOf && "function" != typeof e.toString || isNaN(e) ? l.A : a.A)(t, e);}}, 8587: (t) => {"use strict";const e = Object.freeze({ loose: !0 }),i = Object.freeze({});t.exports = (t) => t ? "object" != typeof t ? e : t : i;}, 8639: (t, e, i) => {"use strict";function n(t, e) {return { objectName: t, propertyName: e.name, selector: e.selector, altConstantValueSelector: e.altConstantSelector, instanceKind: e.instanceKind };}function r(t, e, i) {return null == e || "object" == typeof e && !e.solid ? i : e.solid ? { value: null == e ? void 0 : e.solid.color } : "Dropdown" === (null == t ? void 0 : t.type) && t.items ? t.items.find((t) => t.value == e) : e;}function s(t, e, i) {var n;return i && t[e.toString() + "Key"] ? i.getDisplayName(t[e.toString() + "Key"]) : null === (n = t[e]) || void 0 === n ? void 0 : n.toString();}i.d(e, { De: () => r, Ld: () => s, yp: () => n });}, 8655: (t, e, i) => {"use strict";i.d(e, { A: () => a });var n = i(1020),r = i(7991),s = i(4495),o = i(676);const a = async (t, e, i, a) => {const l = await (0, o.A)(t, e, "verify");(0, s.A)(t, l);const c = (0, n.A)(t, l.algorithm);try {return await r.A.subtle.verify(c, l, i, a);} catch {return !1;}};}, 8664: (t, e, i) => {"use strict";i.d(e, { A: () => c });var n = i(1882),r = i(2535),s = i(9731);function o(t, e, i, n, s, o) {for (var a, l = 0, c = e.length, h = o.length; l < h; ++l) (a = e[l]) ? (a.__data__ = o[l], n[l] = a) : i[l] = new r.L(t, o[l]);for (; l < c; ++l) (a = e[l]) && (s[l] = a);}function a(t, e, i, n, s, o, a) {var l,c,h,u = new Map(),d = e.length,p = o.length,f = new Array(d);for (l = 0; l < d; ++l) (c = e[l]) && (f[l] = h = a.call(c, c.__data__, l, e) + "", u.has(h) ? s[l] = c : u.set(h, c));for (l = 0; l < p; ++l) h = a.call(t, o[l], l, o) + "", (c = u.get(h)) ? (n[l] = c, c.__data__ = o[l], u.delete(h)) : i[l] = new r.L(t, o[l]);for (l = 0; l < d; ++l) (c = e[l]) && u.get(f[l]) === c && (s[l] = c);}function l(t) {return t.__data__;}function c(t, e) {if (!arguments.length) return Array.from(this, l);var i = e ? a : o,r = this._parents,c = this._groups;"function" != typeof t && (t = (0, s.A)(t));for (var u = c.length, d = new Array(u), p = new Array(u), f = new Array(u), g = 0; g < u; ++g) {var m = r[g],v = c[g],y = v.length,b = h(t.call(m, m && m.__data__, g, r)),w = b.length,x = p[g] = new Array(w),S = d[g] = new Array(w);i(m, v, x, S, f[g] = new Array(y), b, e);for (var E, C, k = 0, T = 0; k < w; ++k) if (E = x[k]) {for (k >= T && (T = k + 1); !(C = S[T]) && ++T < w;);E._next = C || null;}}return (d = new n.LN(d, r))._enter = p, d._exit = f, d;}function h(t) {return "object" == typeof t && "length" in t ? t : Array.from(t);}}, 8674: (t, e, i) => {"use strict";function n(t, e, i) {var n = "style." + (t += "");if (arguments.length < 2) return (n = this.tween(n)) && n._value;if (null == e) return this.tween(n, null);if ("function" != typeof e) throw new Error();return this.tween(n, function (t, e, i) {var n, r;function s() {var s = e.apply(this, arguments);return s !== r && (n = (r = s) && function (t, e, i) {return function (n) {this.style.setProperty(t, e.call(this, n), i);};}(t, s, i)), n;}return s._value = e, s;}(t, e, null == i ? "" : i));}i.d(e, { A: () => n });}, 8689: (t, e, i) => {"use strict";i.d(e, { U: () => f });var n = i(1807),r = i(8923),s = i(631),o = i(5179),a = i(9380),l = i(8278),c = i(5355),h = i(457),u = i(8985);const d = "https://api.okviz.com",p = "ol";class f extends r.v {config;meta;simulated;storageService;canFetchLicense = !0;license;get licenseId() {return this.license?.id;}get type() {return "okviz";}getLicenseStatus(t) {switch (t) {case s.xJ.Active:return "Active";case s.xJ.GracePeriod:return "Grace Period";case s.xJ.Trial:return "Trial Mode";case s.xJ.Expired:return "Expired";case s.xJ.Suspended:return "Suspended";default:return "Unknown";}}get status() {return this.isSupported ? this.license ? { statusCode: s.e2.Found, status: this.getLicenseStatus(this.license.statusCode), license: this.license } : this.isFetched ? { statusCode: s.e2.NotFound, status: "Unlicensed" } : { statusCode: s.e2.Pending, status: "Pending..." } : { statusCode: s.e2.Unsupported, status: "Unsupported" };}get isActive() {return !!this.isSupported && (!this.isFetched || !!this.license && this.license.statusCode === s.xJ.Active);}get isInactive() {return !(!this.isSupported || this.isGracePeriod) && this.license?.statusCode == s.xJ.Expired;}get isGracePeriod() {return !(!this.isSupported || !this.license) && this.license.statusCode === s.xJ.GracePeriod;}get isSuspended() {return !(!this.isSupported || !this.license) && this.license.statusCode === s.xJ.Suspended;}get isTrial() {return !(!this.isSupported || !this.license) && this.license.statusCode === s.xJ.Trial;}get unsupportedMessage() {return "This visual cannot access the OKVIZ licensing system because the current environment does not support it or web access has been disabled by the administrator.";}get purchaseUrl() {return this.meta.config.visual.okvizPurchaseUrl || this.meta.config.visual.contactUrl;}constructor(t, e, i, r) {super(t, e, r), this.config = t, this.meta = e, this.simulated = i, this.meta.isDev || (this.simulated = null), this.simulated && n.C7A.ERROR("Licensing (OKVIZ)", "You are using a simulated license!"), this.initLocalStorage(), this.checkWebAccess();}async initLocalStorage() {if (this.storageService = thisVisual.host.storageV2Service, this.storageService) try {0 !== (await this.storageService.status()) && (this.storageService = null);} catch (t) {this.storageService = null;}}async checkWebAccess() {const t = await thisVisual.host.webAccessService.webAccessStatus(d);this.canFetchLicense = 0 === t;}async getToken() {let t = "okviz",e = this.config?.ot;if (!e) {const i = u.R.instance;e = await i.getToken(), t = "entra";}return e ? { type: t, token: e } : null;}async update(t) {await this.getLocalLicense(t), await this.fetchLicenses(), super.update(t);}setLicense(t) {this.license = t, this.saveLicenseLocally();}async getLocalLicense(t) {let e, i;if (t) {const i = t.dataViews?.[0];if (i?.metadata?.objects) {const t = (0, n.PLM)(i.metadata.objects, h.c, p, null, !1);if (t) try {e = JSON.parse((0, n.y4v)(t));} catch (t) {}}}if (this.config) {const t = this.config[p],e = (0, n.y4v)("LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF3SkpoOGZiM2h4a0dISGc4aXFyOApBZDNvSHNkbWFjVUxBY3lET2N4RWtTenBERnV6V3lOaVBvbzFnVWp2U3B0WEZucjZhcU9vaHVva0xoSXBHMGo5CkdIUmxCSzFHZVNnOEVod2dyNmw4QXFKZFc3YkVCM2orRGk0dlNmNXpJOVdsVmVkY0xEcC9iMEdtY0JTbGlHeVIKbUVUbjd6M2RYOXRLM2ZoRGRYSzNiNXM4dmw2QjlVMHZobjlNOFppUVRQNHQwb2Y4K09OUisrV3pwWmZ1QzNJRgp3anAvaFJCOStKYmxQRFc4S05pQVg4QVRzQndFRTNnTnlETFVmeWlBOFdDWjZNemZyU0o5ME9ETUVXQVUvNGE1CmZHS0tNZzdGRjVQZU1hTFpxM0JScXJ4dFZlUmdRazQvSVh2UWtFM1h3dXJQNUw1V0p4aW5sdXNLcExjUldhRXIKNVFJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0t");i = await async function (t, e) {const i = "RS256";try {const n = await (0, l.jU)(e, i),{ payload: r } = await (0, a.V)(t, n);return r;} catch {try {if (!c.pj.jws.JWS.verifyJWT(t, e, { alg: [i] })) return;const [, n] = t.split(".");return JSON.parse((0, c.cV)(n));} catch {return;}}}(t, e);}(e || i) && (this.license = function (...t) {if (!t?.length) return null;const e = [s.xJ.Active, s.xJ.GracePeriod, s.xJ.Trial, s.xJ.Expired, s.xJ.Suspended, s.xJ.Unknown];return t.sort((t, i) => {const n = e.indexOf(t.statusCode),r = e.indexOf(i.statusCode);return n !== r ? n - r : t.expiry ? i.expiry ? new Date(i.expiry).getTime() - new Date(t.expiry).getTime() : -1 : 1;}), t[0];}(e, i));}saveLicenseLocally() {n.XI0.SAVE({ objectName: h.c, properties: { dialog: !1, [p]: this.license ? (0, n.WGQ)(JSON.stringify(this.license)) : null }, selector: null }, !1);}async getSession() {const t = await (0, n.vxu)(this.storageService, "sid", (0, n.uRe)(!1)),e = await (0, n.vxu)(this.storageService, "uid", (0, n.uRe)(!1));return await (0, n.Fgm)(this.storageService, "sid", t, new Date(Date.now() + 36e5)), await (0, n.Fgm)(this.storageService, "uid", e), { sessionId: t, userId: e };}async fetchLicenses() {if (!this.isFetching && !this.isFetched && this.isSupported) if (this.isFetching = !0, this.canFetchLicense) try {const t = await this.getSession();this.fetchSimulatedLicense() || (await this.fetchLicenseByTenant(t)) || (await this.fetchLicenseById(t)), this.isFetched = !0;} catch (t) {} else this.isFetched = !0;super.fetchLicenses(), this.isFetched && this.log();}fetchSimulatedLicense() {return !!this.simulated && (this.setLicense(this.simulated), !0);}async fetchLicenseByTenant(t) {const e = await this.getToken();if (e && "entra" === e.type) {const i = await f.ApiGetTenantLicense(this.meta.name, e.token, t.sessionId, this.meta.version);if (i) return this.setLicense(i), !0;}return !1;}async fetchLicenseById(t) {if (this.licenseId) {const e = await this.getToken();if (e && "okviz" === e.type) {const i = await f.ApiGetLicense(this.meta.name, this.licenseId, e.token, t, this.meta.version);return this.setLicense(i), !0;}}return !1;}log() {globalThis.okvizLicenseLogged || (globalThis.okvizLicenseLogged = !0, n.C7A.INFO("Licensing (OKVIZ)", { license: this.license && (0, n.cJW)(this.license, "attributes", "plan", "vendorId"), isSupported: this.isSupported, isActive: this.isActive, isInactive: this.isInactive, isGracePeriod: this.isGracePeriod, isSuspended: this.isSuspended, isTrial: this.isTrial }));}static async ApiGetLicense(t, e, i, n, r) {return g(`${d}/v1/license/${t.toLowerCase()}/${e}?sid=${n.sessionId}&uid=${n.userId}&ver=${r}`, i);}static async ApiGetTenantLicense(t, e, i, n) {return g(`${d}/v1/tenant/license/okviz/${t.toLowerCase()}?sid=${i}&ver=${n}`, e);}static async ApiActivateLicense(t, e, i) {return g(`${d}/v1/tenant/license/okviz/${t.toLowerCase()}/activate?key=${i}`, e, "POST");}}async function g(t, e, i = "GET") {const r = await http(t, { method: i, headers: { "Content-Type": "application/json", "Access-Control-Allow-Origin": "*", Authorization: `Bearer ${e}` } });if (r.ok) {const t = await r.json();return (0, o.A)(t) ? (n.C7A.ERROR("Licensing (OKVIZ)", t), null) : t;}throw new Error();}}, 8697: (t, e, i) => {"use strict";const n = i(7028),r = i(3720),s = i(7612),o = (t = "", e = "", i = !1) => {const n = [];if (t = [].concat(t), !(e = [].concat(e)).length) return t;if (!t.length) return i ? s.flatten(e).map((t) => `{${t}}`) : e;for (const r of t) if (Array.isArray(r)) for (const t of r) n.push(o(t, e, i));else for (let t of e) !0 === i && "string" == typeof t && (t = `{${t}}`), n.push(Array.isArray(t) ? o(r, t, i) : r + t);return s.flatten(n);};t.exports = (t, e = {}) => {const i = void 0 === e.rangeLimit ? 1e3 : e.rangeLimit,a = (t, l = {}) => {t.queue = [];let c = l,h = l.queue;for (; "brace" !== c.type && "root" !== c.type && c.parent;) c = c.parent, h = c.queue;if (t.invalid || t.dollar) return void h.push(o(h.pop(), r(t, e)));if ("brace" === t.type && !0 !== t.invalid && 2 === t.nodes.length) return void h.push(o(h.pop(), ["{}"]));if (t.nodes && t.ranges > 0) {const a = s.reduce(t.nodes);if (s.exceedsLimit(...a, e.step, i)) throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l = n(...a, e);return 0 === l.length && (l = r(t, e)), h.push(o(h.pop(), l)), void (t.nodes = []);}const u = s.encloseBrace(t);let d = t.queue,p = t;for (; "brace" !== p.type && "root" !== p.type && p.parent;) p = p.parent, d = p.queue;for (let e = 0; e < t.nodes.length; e++) {const i = t.nodes[e];"comma" !== i.type || "brace" !== t.type ? "close" !== i.type ? i.value && "open" !== i.type ? d.push(o(d.pop(), i.value)) : i.nodes && a(i, t) : h.push(o(h.pop(), d, u)) : (1 === e && d.push(""), d.push(""));}return d;};return s.flatten(a(t));};}, 8698: (t, e, i) => {"use strict";i.d(e, { S: () => o });var n = i(1807),r = i(2137),s = i(3102);class o {meta;checkTimeout;checkIntervalSeconds = 60;canCheck = !0;alreadyChecked = !1;newestVersion;get storageKey() {return `cv${this.meta.version}`;}get isSupported() {return !!this.meta.config.visual.updateUrl;}constructor(t) {this.meta = t;}async update(t) {this.isSupported && 0 !== t.viewMode && (this.canCheck = (0, n.PLM)(t.dataViews?.[0]?.metadata?.objects, "updater", "check", !0), this.canCheck ? (this.alreadyChecked = !!(await (0, n.vxu)(thisVisual.host.storageV2Service, this.storageKey, null)), this.alreadyChecked || this.checkTimeout || (this.checkTimeout = window.setTimeout(async () => {await this.check(), this.checkTimeout = null;}, 1e3 * this.checkIntervalSeconds))) : await (0, n.Fgm)(thisVisual.host.storageV2Service, this.storageKey, null));}async check() {if (this.newestVersion = null, this.isSupported) try {const t = await http(this.meta.config.visual.updateUrl),e = await t.text();1 == (0, s.Z)(e, this.meta.version, { patch: !1 }) && (this.newestVersion = e, this.notify(e)), this.alreadyChecked = !0;const i = new Date();i.setDate(i.getDate() + 1), await (0, n.Fgm)(thisVisual.host.storageV2Service, this.storageKey, "true", i);} catch (t) {}}notify(t) {n.s54.SHOW({ id: "updater", icon: "info", important: !0, iconAlign: "top", position: "bottom", hideOnClick: !1, title: "New Version Available", text: `A new version of ${this.meta.displayName} (v${t}) is now available. Visit your account area to download it.`, callToAction: this.meta.config.visual.changelogUrl ? { text: "Changelog", url: this.meta.config.visual.changelogUrl } : null });}enumerateSettings(t) {this.isSupported ? (t.groups.find((t) => t.name == `${r.q}.version`).visible = !!this.newestVersion, this.newestVersion && (t.version.value = `A new version of ${this.meta.displayName} is available: v${this.newestVersion}`)) : t.visible = !1;}enumerateSettingsLegacy() {return this.isSupported ? { [r.q]: [{ name: "check", value: this.canCheck }] } : {};}}}, 8701: (t, e, i) => {"use strict";var n, r, s, o;i.d(e, { GP: () => r, s: () => s }), o = { thousands: ",", grouping: [3], currency: ["$", ""] }, n = (0, i(6410).A)(o), r = n.format, s = n.formatPrefix;}, 8712: (t, e, i) => {"use strict";const n = i(7028),r = i(7612);t.exports = (t, e = {}) => {const i = (t, s = {}) => {const o = r.isInvalidBrace(s),a = !0 === t.invalid && !0 === e.escapeInvalid,l = !0 === o || !0 === a,c = !0 === e.escapeInvalid ? "\\" : "";let h = "";if (!0 === t.isOpen) return c + t.value;if (!0 === t.isClose) return console.log("node.isClose", c, t.value), c + t.value;if ("open" === t.type) return l ? c + t.value : "(";if ("close" === t.type) return l ? c + t.value : ")";if ("comma" === t.type) return "comma" === t.prev.type ? "" : l ? t.value : "|";if (t.value) return t.value;if (t.nodes && t.ranges > 0) {const i = r.reduce(t.nodes),s = n(...i, { ...e, wrap: !1, toRegex: !0, strictZeros: !0 });if (0 !== s.length) return i.length > 1 && s.length > 1 ? `(${s})` : s;}if (t.nodes) for (const e of t.nodes) h += i(e, t);return h;};return i(t);};}, 8776: (t) => {"use strict";t.exports = { MAX_LENGTH: 1e4, CHAR_0: "0", CHAR_9: "9", CHAR_UPPERCASE_A: "A", CHAR_LOWERCASE_A: "a", CHAR_UPPERCASE_Z: "Z", CHAR_LOWERCASE_Z: "z", CHAR_LEFT_PARENTHESES: "(", CHAR_RIGHT_PARENTHESES: ")", CHAR_ASTERISK: "*", CHAR_AMPERSAND: "&", CHAR_AT: "@", CHAR_BACKSLASH: "\\", CHAR_BACKTICK: "`", CHAR_CARRIAGE_RETURN: "\r", CHAR_CIRCUMFLEX_ACCENT: "^", CHAR_COLON: ":", CHAR_COMMA: ",", CHAR_DOLLAR: "$", CHAR_DOT: ".", CHAR_DOUBLE_QUOTE: '"', CHAR_EQUAL: "=", CHAR_EXCLAMATION_MARK: "!", CHAR_FORM_FEED: "\f", CHAR_FORWARD_SLASH: "/", CHAR_HASH: "#", CHAR_HYPHEN_MINUS: "-", CHAR_LEFT_ANGLE_BRACKET: "<", CHAR_LEFT_CURLY_BRACE: "{", CHAR_LEFT_SQUARE_BRACKET: "[", CHAR_LINE_FEED: "\n", CHAR_NO_BREAK_SPACE: "", CHAR_PERCENT: "%", CHAR_PLUS: "+", CHAR_QUESTION_MARK: "?", CHAR_RIGHT_ANGLE_BRACKET: ">", CHAR_RIGHT_CURLY_BRACE: "}", CHAR_RIGHT_SQUARE_BRACKET: "]", CHAR_SEMICOLON: ";", CHAR_SINGLE_QUOTE: "'", CHAR_SPACE: " ", CHAR_TAB: "\t", CHAR_UNDERSCORE: "_", CHAR_VERTICAL_LINE: "|", CHAR_ZERO_WIDTH_NOBREAK_SPACE: "\ufeff" };}, 8794: (t) => {"use strict";t.exports = class {constructor() {this.max = 1e3, this.map = new Map();}get(t) {const e = this.map.get(t);return void 0 === e ? void 0 : (this.map.delete(t), this.map.set(t, e), e);}delete(t) {return this.map.delete(t);}set(t, e) {if (!this.delete(t) && void 0 !== e) {if (this.map.size >= this.max) {const t = this.map.keys().next().value;this.delete(t);}this.map.set(t, e);}return this;}};}, 8820: (t, e, i) => {"use strict";i.d(e, { Aj: () => T, Lu: () => f, U1: () => A });var n = i(365),r = i(5606);class s {constructor(t, e, i, n, r, s, o, a, l, c = 0, h) {this.p = t, this.stack = e, this.state = i, this.reducePos = n, this.pos = r, this.score = s, this.buffer = o, this.bufferBase = a, this.curContext = l, this.lookAhead = c, this.parent = h;}toString() {return `[${this.stack.filter((t, e) => e % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? "!" + this.score : ""}`;}static start(t, e, i = 0) {let n = t.parser.context;return new s(t, [], e, i, i, 0, [], 0, n ? new o(n, n.start) : null, 0, null);}get context() {return this.curContext ? this.curContext.context : null;}pushState(t, e) {this.stack.push(this.state, e, this.bufferBase + this.buffer.length), this.state = t;}reduce(t) {var e;let i = t >> 19,n = 65535 & t,{ parser: r } = this.p,s = this.reducePos < this.pos - 25;s && this.setLookAhead(this.pos);let o = r.dynamicPrecedence(n);if (o && (this.score += o), 0 == i) return this.pushState(r.getGoto(this.state, n, !0), this.reducePos), n < r.minRepeatTerm && this.storeNode(n, this.reducePos, this.reducePos, s ? 8 : 4, !0), void this.reduceContext(n, this.reducePos);let a = this.stack.length - 3 * (i - 1) - (262144 & t ? 6 : 0),l = a ? this.stack[a - 2] : this.p.ranges[0].from,c = this.reducePos - l;c >= 2e3 && !(null === (e = this.p.parser.nodeSet.types[n]) || void 0 === e ? void 0 : e.isAnonymous) && (l == this.p.lastBigReductionStart ? (this.p.bigReductionCount++, this.p.lastBigReductionSize = c) : this.p.lastBigReductionSize < c && (this.p.bigReductionCount = 1, this.p.lastBigReductionStart = l, this.p.lastBigReductionSize = c));let h = a ? this.stack[a - 1] : 0,u = this.bufferBase + this.buffer.length - h;if (n < r.minRepeatTerm || 131072 & t) {let t = r.stateFlag(this.state, 1) ? this.pos : this.reducePos;this.storeNode(n, l, t, u + 4, !0);}if (262144 & t) this.state = this.stack[a];else {let t = this.stack[a - 3];this.state = r.getGoto(t, n, !0);}for (; this.stack.length > a;) this.stack.pop();this.reduceContext(n, l);}storeNode(t, e, i, n = 4, r = !1) {if (0 == t && (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {let t = this,n = this.buffer.length;if (0 == n && t.parent && (n = t.bufferBase - t.parent.bufferBase, t = t.parent), n > 0 && 0 == t.buffer[n - 4] && t.buffer[n - 1] > -1) {if (e == i) return;if (t.buffer[n - 2] >= e) return void (t.buffer[n - 2] = i);}}if (r && this.pos != i) {let r = this.buffer.length;if (r > 0 && 0 != this.buffer[r - 4]) {let t = !1;for (let e = r; e > 0 && this.buffer[e - 2] > i; e -= 4) if (this.buffer[e - 1] >= 0) {t = !0;break;}if (t) for (; r > 0 && this.buffer[r - 2] > i;) this.buffer[r] = this.buffer[r - 4], this.buffer[r + 1] = this.buffer[r - 3], this.buffer[r + 2] = this.buffer[r - 2], this.buffer[r + 3] = this.buffer[r - 1], r -= 4, n > 4 && (n -= 4);}this.buffer[r] = t, this.buffer[r + 1] = e, this.buffer[r + 2] = i, this.buffer[r + 3] = n;} else this.buffer.push(t, e, i, n);}shift(t, e, i, n) {if (131072 & t) this.pushState(65535 & t, this.pos);else if (262144 & t) this.pos = n, this.shiftContext(e, i), e <= this.p.parser.maxNode && this.buffer.push(e, i, n, 4);else {let r = t,{ parser: s } = this.p;(n > this.pos || e <= s.maxNode) && (this.pos = n, s.stateFlag(r, 1) || (this.reducePos = n)), this.pushState(r, i), this.shiftContext(e, i), e <= s.maxNode && this.buffer.push(e, i, n, 4);}}apply(t, e, i, n) {65536 & t ? this.reduce(t) : this.shift(t, e, i, n);}useNode(t, e) {let i = this.p.reused.length - 1;(i < 0 || this.p.reused[i] != t) && (this.p.reused.push(t), i++);let n = this.pos;this.reducePos = this.pos = n + t.length, this.pushState(e, n), this.buffer.push(i, n, this.reducePos, -1), this.curContext && this.updateContext(this.curContext.tracker.reuse(this.curContext.context, t, this, this.p.stream.reset(this.pos - t.length)));}split() {let t = this,e = t.buffer.length;for (; e > 0 && t.buffer[e - 2] > t.reducePos;) e -= 4;let i = t.buffer.slice(e),n = t.bufferBase + e;for (; t && n == t.bufferBase;) t = t.parent;return new s(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, i, n, this.curContext, this.lookAhead, t);}recoverByDelete(t, e) {let i = t <= this.p.parser.maxNode;i && this.storeNode(t, this.pos, e, 4), this.storeNode(0, this.pos, e, i ? 8 : 4), this.pos = this.reducePos = e, this.score -= 190;}canShift(t) {for (let e = new a(this);;) {let i = this.p.parser.stateSlot(e.state, 4) || this.p.parser.hasAction(e.state, t);if (0 == i) return !1;if (!(65536 & i)) return !0;e.reduce(i);}}recoverByInsert(t) {if (this.stack.length >= 300) return [];let e = this.p.parser.nextStates(this.state);if (e.length > 8 || this.stack.length >= 120) {let i = [];for (let n, r = 0; r < e.length; r += 2) (n = e[r + 1]) != this.state && this.p.parser.hasAction(n, t) && i.push(e[r], n);if (this.stack.length < 120) for (let t = 0; i.length < 8 && t < e.length; t += 2) {let n = e[t + 1];i.some((t, e) => 1 & e && t == n) || i.push(e[t], n);}e = i;}let i = [];for (let t = 0; t < e.length && i.length < 4; t += 2) {let n = e[t + 1];if (n == this.state) continue;let r = this.split();r.pushState(n, this.pos), r.storeNode(0, r.pos, r.pos, 4, !0), r.shiftContext(e[t], this.pos), r.reducePos = this.pos, r.score -= 200, i.push(r);}return i;}forceReduce() {let { parser: t } = this.p,e = t.stateSlot(this.state, 5);if (!(65536 & e)) return !1;if (!t.validAction(this.state, e)) {let i = e >> 19,n = 65535 & e,r = this.stack.length - 3 * i;if (r < 0 || t.getGoto(this.stack[r], n, !1) < 0) {let t = this.findForcedReduction();if (null == t) return !1;e = t;}this.storeNode(0, this.pos, this.pos, 4, !0), this.score -= 100;}return this.reducePos = this.pos, this.reduce(e), !0;}findForcedReduction() {let { parser: t } = this.p,e = [],i = (n, r) => {if (!e.includes(n)) return e.push(n), t.allActions(n, (e) => {if (393216 & e) ;else if (65536 & e) {let i = (e >> 19) - r;if (i > 1) {let n = 65535 & e,r = this.stack.length - 3 * i;if (r >= 0 && t.getGoto(this.stack[r], n, !1) >= 0) return i << 19 | 65536 | n;}} else {let t = i(e, r + 1);if (null != t) return t;}});};return i(this.state, 0);}forceAll() {for (; !this.p.parser.stateFlag(this.state, 2);) if (!this.forceReduce()) {this.storeNode(0, this.pos, this.pos, 4, !0);break;}return this;}get deadEnd() {if (3 != this.stack.length) return !1;let { parser: t } = this.p;return 65535 == t.data[t.stateSlot(this.state, 1)] && !t.stateSlot(this.state, 4);}restart() {this.storeNode(0, this.pos, this.pos, 4, !0), this.state = this.stack[0], this.stack.length = 0;}sameState(t) {if (this.state != t.state || this.stack.length != t.stack.length) return !1;for (let e = 0; e < this.stack.length; e += 3) if (this.stack[e] != t.stack[e]) return !1;return !0;}get parser() {return this.p.parser;}dialectEnabled(t) {return this.p.parser.dialect.flags[t];}shiftContext(t, e) {this.curContext && this.updateContext(this.curContext.tracker.shift(this.curContext.context, t, this, this.p.stream.reset(e)));}reduceContext(t, e) {this.curContext && this.updateContext(this.curContext.tracker.reduce(this.curContext.context, t, this, this.p.stream.reset(e)));}emitContext() {let t = this.buffer.length - 1;(t < 0 || -3 != this.buffer[t]) && this.buffer.push(this.curContext.hash, this.pos, this.pos, -3);}emitLookAhead() {let t = this.buffer.length - 1;(t < 0 || -4 != this.buffer[t]) && this.buffer.push(this.lookAhead, this.pos, this.pos, -4);}updateContext(t) {if (t != this.curContext.context) {let e = new o(this.curContext.tracker, t);e.hash != this.curContext.hash && this.emitContext(), this.curContext = e;}}setLookAhead(t) {t > this.lookAhead && (this.emitLookAhead(), this.lookAhead = t);}close() {this.curContext && this.curContext.tracker.strict && this.emitContext(), this.lookAhead > 0 && this.emitLookAhead();}}class o {constructor(t, e) {this.tracker = t, this.context = e, this.hash = t.strict ? t.hash(e) : 0;}}class a {constructor(t) {this.start = t, this.state = t.state, this.stack = t.stack, this.base = this.stack.length;}reduce(t) {let e = 65535 & t,i = t >> 19;0 == i ? (this.stack == this.start.stack && (this.stack = this.stack.slice()), this.stack.push(this.state, 0, 0), this.base += 3) : this.base -= 3 * (i - 1);let n = this.start.p.parser.getGoto(this.stack[this.base - 3], e, !0);this.state = n;}}class l {constructor(t, e, i) {this.stack = t, this.pos = e, this.index = i, this.buffer = t.buffer, 0 == this.index && this.maybeNext();}static create(t, e = t.bufferBase + t.buffer.length) {return new l(t, e, e - t.bufferBase);}maybeNext() {let t = this.stack.parent;null != t && (this.index = this.stack.bufferBase - t.bufferBase, this.stack = t, this.buffer = t.buffer);}get id() {return this.buffer[this.index - 4];}get start() {return this.buffer[this.index - 3];}get end() {return this.buffer[this.index - 2];}get size() {return this.buffer[this.index - 1];}next() {this.index -= 4, this.pos -= 4, 0 == this.index && this.maybeNext();}fork() {return new l(this.stack, this.pos, this.index);}}function c(t, e = Uint16Array) {if ("string" != typeof t) return t;let i = null;for (let n = 0, r = 0; n < t.length;) {let s = 0;for (;;) {let e = t.charCodeAt(n++),i = !1;if (126 == e) {s = 65535;break;}e >= 92 && e--, e >= 34 && e--;let r = e - 32;if (r >= 46 && (r -= 46, i = !0), s += r, i) break;s *= 46;}i ? i[r++] = s : i = new e(s);}return i;}class h {constructor() {this.start = -1, this.value = -1, this.end = -1, this.extended = -1, this.lookAhead = 0, this.mask = 0, this.context = 0;}}const u = new h();class d {constructor(t, e) {this.input = t, this.ranges = e, this.chunk = "", this.chunkOff = 0, this.chunk2 = "", this.chunk2Pos = 0, this.next = -1, this.token = u, this.rangeIndex = 0, this.pos = this.chunkPos = e[0].from, this.range = e[0], this.end = e[e.length - 1].to, this.readNext();}resolveOffset(t, e) {let i = this.range,n = this.rangeIndex,r = this.pos + t;for (; r < i.from;) {if (!n) return null;let t = this.ranges[--n];r -= i.from - t.to, i = t;}for (; e < 0 ? r > i.to : r >= i.to;) {if (n == this.ranges.length - 1) return null;let t = this.ranges[++n];r += t.from - i.to, i = t;}return r;}clipPos(t) {if (t >= this.range.from && t < this.range.to) return t;for (let e of this.ranges) if (e.to > t) return Math.max(t, e.from);return this.end;}peek(t) {let e,i,n = this.chunkOff + t;if (n >= 0 && n < this.chunk.length) e = this.pos + t, i = this.chunk.charCodeAt(n);else {let n = this.resolveOffset(t, 1);if (null == n) return -1;if (e = n, e >= this.chunk2Pos && e < this.chunk2Pos + this.chunk2.length) i = this.chunk2.charCodeAt(e - this.chunk2Pos);else {let t = this.rangeIndex,n = this.range;for (; n.to <= e;) n = this.ranges[++t];this.chunk2 = this.input.chunk(this.chunk2Pos = e), e + this.chunk2.length > n.to && (this.chunk2 = this.chunk2.slice(0, n.to - e)), i = this.chunk2.charCodeAt(0);}}return e >= this.token.lookAhead && (this.token.lookAhead = e + 1), i;}acceptToken(t, e = 0) {let i = e ? this.resolveOffset(e, -1) : this.pos;if (null == i || i < this.token.start) throw new RangeError("Token end out of bounds");this.token.value = t, this.token.end = i;}acceptTokenTo(t, e) {this.token.value = t, this.token.end = e;}getChunk() {if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {let { chunk: t, chunkPos: e } = this;this.chunk = this.chunk2, this.chunkPos = this.chunk2Pos, this.chunk2 = t, this.chunk2Pos = e, this.chunkOff = this.pos - this.chunkPos;} else {this.chunk2 = this.chunk, this.chunk2Pos = this.chunkPos;let t = this.input.chunk(this.pos),e = this.pos + t.length;this.chunk = e > this.range.to ? t.slice(0, this.range.to - this.pos) : t, this.chunkPos = this.pos, this.chunkOff = 0;}}readNext() {return this.chunkOff >= this.chunk.length && (this.getChunk(), this.chunkOff == this.chunk.length) ? this.next = -1 : this.next = this.chunk.charCodeAt(this.chunkOff);}advance(t = 1) {for (this.chunkOff += t; this.pos + t >= this.range.to;) {if (this.rangeIndex == this.ranges.length - 1) return this.setDone();t -= this.range.to - this.pos, this.range = this.ranges[++this.rangeIndex], this.pos = this.range.from;}return this.pos += t, this.pos >= this.token.lookAhead && (this.token.lookAhead = this.pos + 1), this.readNext();}setDone() {return this.pos = this.chunkPos = this.end, this.range = this.ranges[this.rangeIndex = this.ranges.length - 1], this.chunk = "", this.next = -1;}reset(t, e) {if (e ? (this.token = e, e.start = t, e.lookAhead = t + 1, e.value = e.extended = -1) : this.token = u, this.pos != t) {if (this.pos = t, t == this.end) return this.setDone(), this;for (; t < this.range.from;) this.range = this.ranges[--this.rangeIndex];for (; t >= this.range.to;) this.range = this.ranges[++this.rangeIndex];t >= this.chunkPos && t < this.chunkPos + this.chunk.length ? this.chunkOff = t - this.chunkPos : (this.chunk = "", this.chunkOff = 0), this.readNext();}return this;}read(t, e) {if (t >= this.chunkPos && e <= this.chunkPos + this.chunk.length) return this.chunk.slice(t - this.chunkPos, e - this.chunkPos);if (t >= this.chunk2Pos && e <= this.chunk2Pos + this.chunk2.length) return this.chunk2.slice(t - this.chunk2Pos, e - this.chunk2Pos);if (t >= this.range.from && e <= this.range.to) return this.input.read(t, e);let i = "";for (let n of this.ranges) {if (n.from >= e) break;n.to > t && (i += this.input.read(Math.max(n.from, t), Math.min(n.to, e)));}return i;}}class p {constructor(t, e) {this.data = t, this.id = e;}token(t, e) {let { parser: i } = e.p;!function (t, e, i, n, r, s) {let o = 0,a = 1 << n,{ dialect: l } = i.p.parser;t: for (; 0 != (a & t[o]);) {let i = t[o + 1];for (let n = o + 3; n < i; n += 2) if ((t[n + 1] & a) > 0) {let i = t[n];if (l.allows(i) && (-1 == e.token.value || e.token.value == i || m(i, e.token.value, r, s))) {e.acceptToken(i);break;}}let n = e.next,c = 0,h = t[o + 2];if (!(e.next < 0 && h > c && 65535 == t[i + 3 * h - 3])) {for (; c < h;) {let r = c + h >> 1,s = i + r + (r << 1),a = t[s],l = t[s + 1] || 65536;if (n < a) h = r;else {if (!(n >= l)) {o = t[s + 2], e.advance();continue t;}c = r + 1;}}break;}o = t[i + 3 * h - 1];}}(this.data, t, e, this.id, i.data, i.tokenPrecTable);}}p.prototype.contextual = p.prototype.fallback = p.prototype.extend = !1, p.prototype.fallback = p.prototype.extend = !1;class f {constructor(t, e = {}) {this.token = t, this.contextual = !!e.contextual, this.fallback = !!e.fallback, this.extend = !!e.extend;}}function g(t, e, i) {for (let n, r = e; 65535 != (n = t[r]); r++) if (n == i) return r - e;return -1;}function m(t, e, i, n) {let r = g(i, n, e);return r < 0 || g(i, n, t) < r;}const v = void 0 !== r && r.env && /\bparse\b/.test(r.env.LOG);let y = null;function b(t, e, i) {let r = t.cursor(n.Qj.IncludeAnonymous);for (r.moveTo(e);;) if (!(i < 0 ? r.childBefore(e) : r.childAfter(e))) for (;;) {if ((i < 0 ? r.to < e : r.from > e) && !r.type.isError) return i < 0 ? Math.max(0, Math.min(r.to - 1, e - 25)) : Math.min(t.length, Math.max(r.from + 1, e + 25));if (i < 0 ? r.prevSibling() : r.nextSibling()) break;if (!r.parent()) return i < 0 ? 0 : t.length;}}class w {constructor(t, e) {this.fragments = t, this.nodeSet = e, this.i = 0, this.fragment = null, this.safeFrom = -1, this.safeTo = -1, this.trees = [], this.start = [], this.index = [], this.nextFragment();}nextFragment() {let t = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];if (t) {for (this.safeFrom = t.openStart ? b(t.tree, t.from + t.offset, 1) - t.offset : t.from, this.safeTo = t.openEnd ? b(t.tree, t.to + t.offset, -1) - t.offset : t.to; this.trees.length;) this.trees.pop(), this.start.pop(), this.index.pop();this.trees.push(t.tree), this.start.push(-t.offset), this.index.push(0), this.nextStart = this.safeFrom;} else this.nextStart = 1e9;}nodeAt(t) {if (t < this.nextStart) return null;for (; this.fragment && this.safeTo <= t;) this.nextFragment();if (!this.fragment) return null;for (;;) {let e = this.trees.length - 1;if (e < 0) return this.nextFragment(), null;let i = this.trees[e],r = this.index[e];if (r == i.children.length) {this.trees.pop(), this.start.pop(), this.index.pop();continue;}let s = i.children[r],o = this.start[e] + i.positions[r];if (o > t) return this.nextStart = o, null;if (s instanceof n.PH) {if (o == t) {if (o < this.safeFrom) return null;let t = o + s.length;if (t <= this.safeTo) {let e = s.prop(n.uY.lookAhead);if (!e || t + e < this.fragment.to) return s;}}this.index[e]++, o + s.length >= Math.max(this.safeFrom, t) && (this.trees.push(s), this.start.push(o), this.index.push(0));} else this.index[e]++, this.nextStart = o + s.length;}}}class x {constructor(t, e) {this.stream = e, this.tokens = [], this.mainToken = null, this.actions = [], this.tokens = t.tokenizers.map((t) => new h());}getActions(t) {let e = 0,i = null,{ parser: n } = t.p,{ tokenizers: r } = n,s = n.stateSlot(t.state, 3),o = t.curContext ? t.curContext.hash : 0,a = 0;for (let n = 0; n < r.length; n++) {if (!(1 << n & s)) continue;let l = r[n],c = this.tokens[n];if ((!i || l.fallback) && ((l.contextual || c.start != t.pos || c.mask != s || c.context != o) && (this.updateCachedToken(c, l, t), c.mask = s, c.context = o), c.lookAhead > c.end + 25 && (a = Math.max(c.lookAhead, a)), 0 != c.value)) {let n = e;if (c.extended > -1 && (e = this.addActions(t, c.extended, c.end, e)), e = this.addActions(t, c.value, c.end, e), !l.extend && (i = c, e > n)) break;}}for (; this.actions.length > e;) this.actions.pop();return a && t.setLookAhead(a), i || t.pos != this.stream.end || (i = new h(), i.value = t.p.parser.eofTerm, i.start = i.end = t.pos, e = this.addActions(t, i.value, i.end, e)), this.mainToken = i, this.actions;}getMainToken(t) {if (this.mainToken) return this.mainToken;let e = new h(),{ pos: i, p: n } = t;return e.start = i, e.end = Math.min(i + 1, n.stream.end), e.value = i == n.stream.end ? n.parser.eofTerm : 0, e;}updateCachedToken(t, e, i) {let n = this.stream.clipPos(i.pos);if (e.token(this.stream.reset(n, t), i), t.value > -1) {let { parser: e } = i.p;for (let n = 0; n < e.specialized.length; n++) if (e.specialized[n] == t.value) {let r = e.specializers[n](this.stream.read(t.start, t.end), i);if (r >= 0 && i.p.parser.dialect.allows(r >> 1)) {1 & r ? t.extended = r >> 1 : t.value = r >> 1;break;}}} else t.value = 0, t.end = this.stream.clipPos(n + 1);}putAction(t, e, i, n) {for (let e = 0; e < n; e += 3) if (this.actions[e] == t) return n;return this.actions[n++] = t, this.actions[n++] = e, this.actions[n++] = i, n;}addActions(t, e, i, n) {let { state: r } = t,{ parser: s } = t.p,{ data: o } = s;for (let t = 0; t < 2; t++) for (let a = s.stateSlot(r, t ? 2 : 1);; a += 3) {if (65535 == o[a]) {if (1 != o[a + 1]) {0 == n && 2 == o[a + 1] && (n = this.putAction(M(o, a + 2), e, i, n));break;}a = M(o, a + 2);}o[a] == e && (n = this.putAction(M(o, a + 1), e, i, n));}return n;}}class S {constructor(t, e, i, n) {this.parser = t, this.input = e, this.ranges = n, this.recovering = 0, this.nextStackID = 9812, this.minStackPos = 0, this.reused = [], this.stoppedAt = null, this.lastBigReductionStart = -1, this.lastBigReductionSize = 0, this.bigReductionCount = 0, this.stream = new d(e, n), this.tokens = new x(t, this.stream), this.topTerm = t.top[1];let { from: r } = n[0];this.stacks = [s.start(this, t.top[0], r)], this.fragments = i.length && this.stream.end - r > 4 * t.bufferLength ? new w(i, t.nodeSet) : null;}get parsedPos() {return this.minStackPos;}advance() {let t,e,i = this.stacks,n = this.minStackPos,r = this.stacks = [];if (this.bigReductionCount > 300 && 1 == i.length) {let [t] = i;for (; t.forceReduce() && t.stack.length && t.stack[t.stack.length - 2] >= this.lastBigReductionStart;);this.bigReductionCount = this.lastBigReductionSize = 0;}for (let s = 0; s < i.length; s++) {let o = i[s];for (;;) {if (this.tokens.mainToken = null, o.pos > n) r.push(o);else {if (this.advanceStack(o, r, i)) continue;{t || (t = [], e = []), t.push(o);let i = this.tokens.getMainToken(o);e.push(i.value, i.end);}}break;}}if (!r.length) {let e = t && function (t) {let e = null;for (let i of t) {let t = i.p.stoppedAt;(i.pos == i.p.stream.end || null != t && i.pos > t) && i.p.parser.stateFlag(i.state, 2) && (!e || e.score < i.score) && (e = i);}return e;}(t);if (e) return v && console.log("Finish with " + this.stackID(e)), this.stackToTree(e);if (this.parser.strict) throw v && t && console.log("Stuck with token " + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : "none")), new SyntaxError("No parse at " + n);this.recovering || (this.recovering = 5);}if (this.recovering && t) {let i = null != this.stoppedAt && t[0].pos > this.stoppedAt ? t[0] : this.runRecovery(t, e, r);if (i) return v && console.log("Force-finish " + this.stackID(i)), this.stackToTree(i.forceAll());}if (this.recovering) {let t = 1 == this.recovering ? 1 : 3 * this.recovering;if (r.length > t) for (r.sort((t, e) => e.score - t.score); r.length > t;) r.pop();r.some((t) => t.reducePos > n) && this.recovering--;} else if (r.length > 1) {t: for (let t = 0; t < r.length - 1; t++) {let e = r[t];for (let i = t + 1; i < r.length; i++) {let n = r[i];if (e.sameState(n) || e.buffer.length > 500 && n.buffer.length > 500) {if (!((e.score - n.score || e.buffer.length - n.buffer.length) > 0)) {r.splice(t--, 1);continue t;}r.splice(i--, 1);}}}r.length > 12 && r.splice(12, r.length - 12);}this.minStackPos = r[0].pos;for (let t = 1; t < r.length; t++) r[t].pos < this.minStackPos && (this.minStackPos = r[t].pos);return null;}stopAt(t) {if (null != this.stoppedAt && this.stoppedAt < t) throw new RangeError("Can't move stoppedAt forward");this.stoppedAt = t;}advanceStack(t, e, i) {let r = t.pos,{ parser: s } = this,o = v ? this.stackID(t) + " -> " : "";if (null != this.stoppedAt && r > this.stoppedAt) return t.forceReduce() ? t : null;if (this.fragments) {let e = t.curContext && t.curContext.tracker.strict,i = e ? t.curContext.hash : 0;for (let a = this.fragments.nodeAt(r); a;) {let r = this.parser.nodeSet.types[a.type.id] == a.type ? s.getGoto(t.state, a.type.id) : -1;if (r > -1 && a.length && (!e || (a.prop(n.uY.contextHash) || 0) == i)) return t.useNode(a, r), v && console.log(o + this.stackID(t) + ` (via reuse of ${s.getName(a.type.id)})`), !0;if (!(a instanceof n.PH) || 0 == a.children.length || a.positions[0] > 0) break;let l = a.children[0];if (!(l instanceof n.PH && 0 == a.positions[0])) break;a = l;}}let a = s.stateSlot(t.state, 4);if (a > 0) return t.reduce(a), v && console.log(o + this.stackID(t) + ` (via always-reduce ${s.getName(65535 & a)})`), !0;if (t.stack.length >= 8400) for (; t.stack.length > 6e3 && t.forceReduce(););let l = this.tokens.getActions(t);for (let n = 0; n < l.length;) {let a = l[n++],c = l[n++],h = l[n++],u = n == l.length || !i,d = u ? t : t.split(),p = this.tokens.mainToken;if (d.apply(a, c, p ? p.start : d.pos, h), v && console.log(o + this.stackID(d) + ` (via ${65536 & a ? `reduce of ${s.getName(65535 & a)}` : "shift"} for ${s.getName(c)} @ ${r}${d == t ? "" : ", split"})`), u) return !0;d.pos > r ? e.push(d) : i.push(d);}return !1;}advanceFully(t, e) {let i = t.pos;for (;;) {if (!this.advanceStack(t, null, null)) return !1;if (t.pos > i) return E(t, e), !0;}}runRecovery(t, e, i) {let n = null,r = !1;for (let s = 0; s < t.length; s++) {let o = t[s],a = e[s << 1],l = e[1 + (s << 1)],c = v ? this.stackID(o) + " -> " : "";if (o.deadEnd) {if (r) continue;if (r = !0, o.restart(), v && console.log(c + this.stackID(o) + " (restarted)"), this.advanceFully(o, i)) continue;}let h = o.split(),u = c;for (let t = 0; h.forceReduce() && t < 10 && (v && console.log(u + this.stackID(h) + " (via force-reduce)"), !this.advanceFully(h, i)); t++) v && (u = this.stackID(h) + " -> ");for (let t of o.recoverByInsert(a)) v && console.log(c + this.stackID(t) + " (via recover-insert)"), this.advanceFully(t, i);this.stream.end > o.pos ? (l == o.pos && (l++, a = 0), o.recoverByDelete(a, l), v && console.log(c + this.stackID(o) + ` (via recover-delete ${this.parser.getName(a)})`), E(o, i)) : (!n || n.score < o.score) && (n = o);}return n;}stackToTree(t) {return t.close(), n.PH.build({ buffer: l.create(t), nodeSet: this.parser.nodeSet, topID: this.topTerm, maxBufferLength: this.parser.bufferLength, reused: this.reused, start: this.ranges[0].from, length: t.pos - this.ranges[0].from, minRepeatType: this.parser.minRepeatTerm });}stackID(t) {let e = (y || (y = new WeakMap())).get(t);return e || y.set(t, e = String.fromCodePoint(this.nextStackID++)), e + t;}}function E(t, e) {for (let i = 0; i < e.length; i++) {let n = e[i];if (n.pos == t.pos && n.sameState(t)) return void (e[i].score < t.score && (e[i] = t));}e.push(t);}class C {constructor(t, e, i) {this.source = t, this.flags = e, this.disabled = i;}allows(t) {return !this.disabled || 0 == this.disabled[t];}}const k = (t) => t;class T {constructor(t) {this.start = t.start, this.shift = t.shift || k, this.reduce = t.reduce || k, this.reuse = t.reuse || k, this.hash = t.hash || (() => 0), this.strict = !1 !== t.strict;}}class A extends n.iX {constructor(t) {if (super(), this.wrappers = [], 14 != t.version) throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e = t.nodeNames.split(" ");this.minRepeatTerm = e.length;for (let i = 0; i < t.repeatNodeCount; i++) e.push("");let i = Object.keys(t.topRules).map((e) => t.topRules[e][1]),r = [];for (let t = 0; t < e.length; t++) r.push([]);function s(t, e, i) {r[t].push([e, e.deserialize(String(i))]);}if (t.nodeProps) for (let e of t.nodeProps) {let t = e[0];"string" == typeof t && (t = n.uY[t]);for (let i = 1; i < e.length;) {let n = e[i++];if (n >= 0) s(n, t, e[i++]);else {let r = e[i + -n];for (let o = -n; o > 0; o--) s(e[i++], t, r);i++;}}}this.nodeSet = new n.fI(e.map((e, s) => n.Z6.define({ name: s >= this.minRepeatTerm ? void 0 : e, id: s, props: r[s], top: i.indexOf(s) > -1, error: 0 == s, skipped: t.skippedNodes && t.skippedNodes.indexOf(s) > -1 }))), t.propSources && (this.nodeSet = this.nodeSet.extend(...t.propSources)), this.strict = !1, this.bufferLength = n.cF;let o = c(t.tokenData);this.context = t.context, this.specializerSpecs = t.specialized || [], this.specialized = new Uint16Array(this.specializerSpecs.length);for (let t = 0; t < this.specializerSpecs.length; t++) this.specialized[t] = this.specializerSpecs[t].term;this.specializers = this.specializerSpecs.map(_), this.states = c(t.states, Uint32Array), this.data = c(t.stateData), this.goto = c(t.goto), this.maxTerm = t.maxTerm, this.tokenizers = t.tokenizers.map((t) => "number" == typeof t ? new p(o, t) : t), this.topRules = t.topRules, this.dialects = t.dialects || {}, this.dynamicPrecedences = t.dynamicPrecedences || null, this.tokenPrecTable = t.tokenPrec, this.termNames = t.termNames || null, this.maxNode = this.nodeSet.types.length - 1, this.dialect = this.parseDialect(), this.top = this.topRules[Object.keys(this.topRules)[0]];}createParse(t, e, i) {let n = new S(this, t, e, i);for (let r of this.wrappers) n = r(n, t, e, i);return n;}getGoto(t, e, i = !1) {let n = this.goto;if (e >= n[0]) return -1;for (let r = n[e + 1];;) {let e = n[r++],s = 1 & e,o = n[r++];if (s && i) return o;for (let i = r + (e >> 1); r < i; r++) if (n[r] == t) return o;if (s) return -1;}}hasAction(t, e) {let i = this.data;for (let n = 0; n < 2; n++) for (let r, s = this.stateSlot(t, n ? 2 : 1);; s += 3) {if (65535 == (r = i[s])) {if (1 != i[s + 1]) {if (2 == i[s + 1]) return M(i, s + 2);break;}r = i[s = M(i, s + 2)];}if (r == e || 0 == r) return M(i, s + 1);}return 0;}stateSlot(t, e) {return this.states[6 * t + e];}stateFlag(t, e) {return (this.stateSlot(t, 0) & e) > 0;}validAction(t, e) {return !!this.allActions(t, (t) => t == e || null);}allActions(t, e) {let i = this.stateSlot(t, 4),n = i ? e(i) : void 0;for (let i = this.stateSlot(t, 1); null == n; i += 3) {if (65535 == this.data[i]) {if (1 != this.data[i + 1]) break;i = M(this.data, i + 2);}n = e(M(this.data, i + 1));}return n;}nextStates(t) {let e = [];for (let i = this.stateSlot(t, 1);; i += 3) {if (65535 == this.data[i]) {if (1 != this.data[i + 1]) break;i = M(this.data, i + 2);}if (!(1 & this.data[i + 2])) {let t = this.data[i + 1];e.some((e, i) => 1 & i && e == t) || e.push(this.data[i], t);}}return e;}configure(t) {let e = Object.assign(Object.create(A.prototype), this);if (t.props && (e.nodeSet = this.nodeSet.extend(...t.props)), t.top) {let i = this.topRules[t.top];if (!i) throw new RangeError(`Invalid top rule name ${t.top}`);e.top = i;}return t.tokenizers && (e.tokenizers = this.tokenizers.map((e) => {let i = t.tokenizers.find((t) => t.from == e);return i ? i.to : e;})), t.specializers && (e.specializers = this.specializers.slice(), e.specializerSpecs = this.specializerSpecs.map((i, n) => {let r = t.specializers.find((t) => t.from == i.external);if (!r) return i;let s = Object.assign(Object.assign({}, i), { external: r.to });return e.specializers[n] = _(s), s;})), t.contextTracker && (e.context = t.contextTracker), t.dialect && (e.dialect = this.parseDialect(t.dialect)), null != t.strict && (e.strict = t.strict), t.wrap && (e.wrappers = e.wrappers.concat(t.wrap)), null != t.bufferLength && (e.bufferLength = t.bufferLength), e;}hasWrappers() {return this.wrappers.length > 0;}getName(t) {return this.termNames ? this.termNames[t] : String(t <= this.maxNode && this.nodeSet.types[t].name || t);}get eofTerm() {return this.maxNode + 1;}get topNode() {return this.nodeSet.types[this.top[1]];}dynamicPrecedence(t) {let e = this.dynamicPrecedences;return null == e ? 0 : e[t] || 0;}parseDialect(t) {let e = Object.keys(this.dialects),i = e.map(() => !1);if (t) for (let n of t.split(" ")) {let t = e.indexOf(n);t >= 0 && (i[t] = !0);}let n = null;for (let t = 0; t < e.length; t++) if (!i[t]) for (let i, r = this.dialects[e[t]]; 65535 != (i = this.data[r++]);) (n || (n = new Uint8Array(this.maxTerm + 1)))[i] = 1;return new C(t, i, n);}static deserialize(t) {return new A(t);}}function M(t, e) {return t[e] | t[e + 1] << 16;}function _(t) {if (t.external) {let e = t.extend ? 1 : 0;return (i, n) => t.external(i, n) << 1 | e;}return t.get;}}, 8853: (t, e, i) => {"use strict";i.d(e, { s: () => o });var n = i(6639),r = i(3753),s = i(4653);class o {static enabled = !0;previousAlerts = {};current;viewMode;static _instance;static get instance() {return o._instance || (o._instance = new this()), o._instance;}constructor() {if (o._instance) return o._instance;o._instance = this;}static UPDATE(t) {this.instance.update(t);}update(t) {this.viewMode = t.viewMode;}static SHOW(t) {this.instance.show(t);}show(t) {if (t = { id: (0, r.uR)(), element: thisVisual.element, titleColor: "#333", textColor: "#333", fontSize: 13, backgroundColor: "#f4f4f4", backBlur: !1, icon: "info", iconAlign: "middle", position: "bottom", requiredHeight: 0, mustBeContained: !1, uncloseable: !1, closeButton: !0, hideOnClick: !0, important: !1, fullSize: !1, force: !1, hideAfter: 0, reshowEvery: 0, allowOnce: !1, ...t }, !o.enabled && !t.force) return;if (this.current && this.current.id == t.id) return;const e = t.element.getBoundingClientRect().height;if (!(t.requiredHeight && e < t.requiredHeight || t.limitToMode && t.limitToMode != this.viewMode)) {if (this.current) {if (!t.important) return;this.hide();}t.allowOnce && this.previousAlerts[t.id] || (this.previousAlerts[t.id] = !0, this.current = new a(t), !t.fullSize && t.mustBeContained && e < this.current.height ? (this.current.destroy(), this.current = null) : (this.current.show(), this.current.on("close", (t) => this.hide(t))));}}static HIDE(t) {this.instance.hide(t);}hide(t) {!this.current || t && this.current.id != t || (this.current.hide(), this.current = null);}}class a extends s.T {options;element;reshowTimeout;showTimeout;hideTimeout;_id;get id() {return this._id;}get height() {return this.element ? this.element.getBoundingClientRect().height + 20 : 0;}constructor(t) {super(), this.options = t, this._id = t.id, this.element = this.create();}show() {this.element && (window.clearTimeout(this.showTimeout), window.clearTimeout(this.hideTimeout), window.clearTimeout(this.reshowTimeout), this.options.hideAfter && (this.hideTimeout = window.setTimeout(() => {this.hide();}, 1e3 * this.options.hideAfter + 300)), this.showTimeout = window.setTimeout(() => {this.options.element.appendChild(this.element), this.options.fullSize || this.reveal();}, 300));}hide() {window.clearTimeout(this.showTimeout), window.clearTimeout(this.hideTimeout), this.conceal();}destroy() {this.element && (this.element.remove(), this.element = null);}create() {const t = thisVisual.host.colorPalette,e = t && t.isHighContrast,i = (0, n.tT)(`#${this.id}.slide-alert${this.options.uncloseable ? ".fixed" : ""}${this.options.fullSize ? ".fit" : ""}`, { style: { width: "100%", background: e ? t.background.value : this.options.backgroundColor, ...(this.options.backBlur ? { backdropFilter: "blur(5px)" } : {}), zIndex: this.options.zIndex ? this.options.zIndex.toString() : this.options.fullSize ? "10001" : "9980", ...(this.options.fullSize ? { height: "100%" } : { borderTop: e ? `1px solid ${t.foreground.value}` : "none" }) } });if (this.options.uncloseable || this.options.fullSize || !this.options.hideOnClick || (i.style.cursor = "pointer", i.addEventListener("click", () => {this.hide();})), this.options.customRender) this.options.customRender(i);else {if (this.options.icon && (0, n.tT)(`.alert-icon.item.icon.icon-${this.options.icon}`, i, { style: { color: e ? t.foreground.value : this.options.iconColor, alignSelf: "top" == this.options.iconAlign ? "flex-start" : "bottom" == this.options.iconAlign ? "flex-end" : "center" } }), this.options.title || this.options.text) {const r = (0, n.tT)(".alert-text", i);this.options.title && (0, n.tT)(".alert-title", r, { style: { fontSize: `${Math.ceil(1.2 * this.options.fontSize)}px`, color: e ? t.foreground.value : this.options.titleColor } }, this.options.title), this.options.text && (0, n.tT)(".alert-message", r, { style: { fontSize: `${this.options.fontSize}px`, color: e ? t.foreground.value : this.options.textColor } }, this.options.text);}this.options.callToAction && (0, n.tT)(this.options.callToAction.button ? ".btn.alert-cta" : "a.alert-cta", i, { style: { fontSize: `${this.options.fontSize}px`, color: this.options.callToAction.button ? "#fff" : t.hyperlink.value }, ...(this.options.callToAction.button ? {} : { attr: { href: this.options.callToAction.url || "#", target: "_blank" } }), events: { click: (t) => {t.stopPropagation(), t.preventDefault(), this.options.callToAction.onClick ? this.options.callToAction.onClick(t) : thisVisual.host.launchUrl(this.options.callToAction.url);} } }, this.options.callToAction.text);}return !this.options.uncloseable && this.options.closeButton && (0, n.tT)("a.alert-close.icon.icon-close.control", i, { style: { color: e ? t.foreground.value : this.options.titleColor }, events: { click: (t) => {t.preventDefault(), this.hide();} } }), i;}reveal(t = 400) {this.element && this.element.animate([{ [this.options.position]: "-100%" }, { [this.options.position]: 0 }], { duration: t, iterations: 1, easing: "ease-in-out", fill: "forwards" });}conceal(t = 400) {this.element && this.element.animate([{ [this.options.position]: "-100%" }], { duration: this.element.classList.contains("fit") ? 0 : t, iterations: 1, easing: "ease-in-out", fill: "forwards" }).addEventListener("finish", () => {this.options.reshowEvery ? this.reshowTimeout = window.setTimeout(() => this.reveal(), 1e3 * this.options.reshowEvery) : (this.destroy(), this.trigger("close", this.id));});}}}, 8858: (t, e, i) => {"use strict";i.d(e, { I: () => c });var n = i(1575),r = i(5994),s = i(5500);const o = (t) => t?.[Symbol.toStringTag],a = (t, e, i) => {if (void 0 !== e.use && "sig" !== e.use) throw new TypeError("Invalid key for this operation, when present its use must be sig");if (void 0 !== e.key_ops && !0 !== e.key_ops.includes?.(i)) throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${i}`);if (void 0 !== e.alg && e.alg !== t) throw new TypeError(`Invalid key for this operation, when present its alg must be ${t}`);return !0;};function l(t, e, i, l) {e.startsWith("HS") || "dir" === e || e.startsWith("PBES2") || /^A\d{3}(?:GCM)?KW$/.test(e) ? ((t, e, i, l) => {if (!(e instanceof Uint8Array)) {if (l && s.ll(e)) {if (s.t9(e) && a(t, e, i)) return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present');}if (!(0, r.A)(e)) throw new TypeError((0, n.t)(t, e, ...r.g, "Uint8Array", l ? "JSON Web Key" : null));if ("secret" !== e.type) throw new TypeError(`${o(e)} instances for symmetric algorithms must be of type "secret"`);}})(e, i, l, t) : ((t, e, i, l) => {if (l && s.ll(e)) switch (i) {case "sign":if (s.W2(e) && a(t, e, i)) return;throw new TypeError("JSON Web Key for this operation be a private JWK");case "verify":if (s.M3(e) && a(t, e, i)) return;throw new TypeError("JSON Web Key for this operation be a public JWK");}if (!(0, r.A)(e)) throw new TypeError((0, n.t)(t, e, ...r.g, l ? "JSON Web Key" : null));if ("secret" === e.type) throw new TypeError(`${o(e)} instances for asymmetric algorithms must not be of type "secret"`);if ("sign" === i && "public" === e.type) throw new TypeError(`${o(e)} instances for asymmetric algorithm signing must be of type "private"`);if ("decrypt" === i && "public" === e.type) throw new TypeError(`${o(e)} instances for asymmetric algorithm decryption must be of type "private"`);if (e.algorithm && "verify" === i && "private" === e.type) throw new TypeError(`${o(e)} instances for asymmetric algorithm verifying must be of type "public"`);if (e.algorithm && "encrypt" === i && "private" === e.type) throw new TypeError(`${o(e)} instances for asymmetric algorithm encryption must be of type "public"`);})(e, i, l, t);}l.bind(void 0, !1);const c = l.bind(void 0, !0);}, 8862: (t, e, i) => {"use strict";i.d(e, { V: () => r });var n = i(906);class r extends n.g {draw() {return this.create(), this.boxContent.firstChild || this.boxContent.remove(), super.draw();}}}, 8891: (t, e, i) => {"use strict";i.d(e, { J: () => s });var n = i(1807),r = i(906);class s extends r.g {input;get callbackData() {return this.input.value;}get validationCallbackData() {return this.input.value;}constructor(t) {super(t);}addInput() {(0, n.tTh)("input.max", this.boxContent, { events: { input: (t) => {this.validationErrorBox && this.validationErrorBox.classList.add("hide");} }, attr: { type: this.config.type ?? "text", placeholder: this.config.placeholder ?? "", value: this.config.value ?? "" }, middleware: (t) => this.input = t }), setTimeout(() => this.input.focus(), 250), this.input.setSelectionRange(this.input.value.length, this.input.value.length);}draw() {return this.create(), this.boxContent.classList.add("margin-top"), this.addInput(), this.config.showValidationError && this.addValidationErrorBox(), super.draw();}}}, 8923: (t, e, i) => {"use strict";i.d(e, { v: () => r });var n = i(1807);class r extends n.T0G {config;meta;fetchingTimeout;fetchCount = 0;fetchingOptions;isFetching = !1;isFetched = !1;isSupported = !0;get purchaseUrl() {return this.meta.config.visual.okvizPurchaseUrl || this.meta.config.visual.contactUrl;}constructor(t, e, i) {super(), this.config = t, this.meta = e, this.fetchingOptions = { intervalSeconds: 30, attempts: 3, ...i };}async update(t) {}fetchLicenses() {this.isFetching = !1, this.isFetched || !this.isSupported ? this.trigger("fetched") : (this.fetchCount++, this.fetchCount >= this.fetchingOptions.attempts ? (this.isFetched = !0, this.trigger("fetched")) : this.scheduleFetching());}scheduleFetching() {window.clearTimeout(this.fetchingTimeout), this.fetchingTimeout = window.setTimeout(() => {this.fetchLicenses();}, 1e3 * this.fetchingOptions.intervalSeconds);}}}, 8928: (t, e, i) => {"use strict";i.d(e, { G: () => n, z: () => f });var n,r = i(7492),s = i(7641),o = i(1807),a = i(1514),l = i(3895),c = i(3858),h = i(4237),u = i(2159),d = i(7077),p = i(8862);!function (t) {t[t.All = 0] = "All", t[t.Title = 1] = "Title", t[t.Datapoint = 2] = "Datapoint";}(n || (n = {}));class f extends s._ {searchManager;currentSearchFields;searchBy;onlyCurrentDrillPath;onlyCurrentMapSelector;progressBar;orOperator;hasMapSelector;listContainer;fileList;emptyResult;mapsList;searchBar;searchResultCount;searchResult = [];previewObserver;searchTimeout;constructor(t, e) {super(t, e), this.viewContainer.classList.add("search-dialog"), this.hasMapSelector = this.model.mapSelector?.values?.length > 0, this.initSearchManager(), this.onlyCurrentDrillPath = t.sessionSettings.searchFilterOnlyCurrentDrillPath, this.onlyCurrentMapSelector = t.sessionSettings.searchFilterOnlyCurrentMapSelector, this.orOperator = t.sessionSettings.searchOrOperator, this.searchBy = t.sessionSettings.searchBy, this.updateSearchFields();}updateSearchFields() {this.searchBy === n.Datapoint ? this.currentSearchFields = ["id", "dataPoint"] : this.searchBy === n.Title ? this.currentSearchFields = ["label"] : this.currentSearchFields = ["dataPoint", "label", "id"];}initSearchManager() {this.searchManager = new c.g(this.mapsManager), this.searchManager.on("startIndexing", (t) => {this.progressBar = new u.z(this.viewContainer, "Generating map index...");}), this.searchManager.on("updateProgress", (t) => {this.progressBar && this.progressBar.setProgress(t.perc, !0, `${t.processedMaps} of ${t.totalMaps} maps`);}), this.searchManager.on("endIndexing", () => {setTimeout(() => {this.progressBar?.destroy(), this.progressBar = null, this.toggleSearchView(!0);}, 300), this.parent.result.updateSearchIndex = !0;}), this.searchManager.on("endImporting", () => {setTimeout(() => {this.toggleSearchView(!0);}, 150);});}draw() {this.viewContainer.classList.add("user-select-none", "flex", "column"), this.drawUi();}async drawUi() {this.fileList?.remove(), (0, o.tTh)(".file-list.no-margins", this.viewContainer, { middleware: (t) => this.fileList = t, attr: { hidden: !0 } }, [(0, o.tTh)(".tree.no-margins", [(0, o.tTh)(".filter.no-margins", [(0, o.tTh)(".search-bar.margin-right", [(0, o.tTh)(".icon.icon-search.no-hover"), (0, o.tTh)("input.search", { middleware: (t) => this.searchBar = t, attr: { type: "search", placeholder: "Search..." }, events: { input: (t) => this.handleSearch() } }), (0, o.tTh)(".icon.suggest.ctrl", { events: { click: (t, e) => {this.orOperator = !this.orOperator, this.options.sessionSettings.searchOrOperator = this.orOperator, this.parent.setDialogResult(), e.textContent = this.orOperator ? "OR" : "AND", this.handleSearch(0);} }, attr: { title: "Switch between requiring all or any search keywords to match." } }, this.orOperator ? "OR" : "AND")]), (0, o.tTh)(".icon.icon-settings.ctrl", { events: { click: (t) => this.showFilterContextMenu(t) }, attr: { title: "Search By" } })]), (0, o.tTh)(".index-info", [(0, o.tTh)(".search-result-count", { middleware: (t) => this.searchResultCount = t }), (0, o.tTh)(".update-index.ctrl", this.viewContainer, { events: { click: () => this.refreshIndex() } }, "Rebuild Index")]), (0, o.tTh)(".list-box", [(0, o.tTh)(".list-container", { middleware: (t) => this.listContainer = t })])])]), this.createIndex();}handleSearch(t = 300) {window.clearTimeout(this.searchTimeout), this.searchTimeout = window.setTimeout(async () => {this.cleanResultList();const t = this.searchBar.value.trim();this.searchResultCount.innerText = "", t && (await (0, o.ukR)(50), this.searchResult = this.searchManager.search(t, this.currentSearchFields, this.orOperator), this.filterSearchResult(), this.searchResult.length ? (this.searchResultCount.innerText = `${this.searchResult.length} map${this.searchResult.length > 1 ? "s" : ""} found.`, await this.drawResultList()) : this.drawEmptyResult());}, t);}async createIndex() {await this.searchManager.ensure(), this.parent.setDialogResult();}async refreshIndex() {this.toggleSearchView(!1), await this.searchManager.build(), this.handleSearch(0), this.parent.setDialogResult();}async drawResultList() {this.cleanResultList(), (0, o.tTh)("ul.search-result", this.listContainer, { middleware: (t) => this.mapsList = t, events: { click: (t, e) => {const i = "li" == e.tagName.toLowerCase() ? e : e.closest("li");if (!i) return;const n = i.dataset.id;if (n) if (i.classList.contains("selectable-result")) this.parent.selectSearchedMap(n, this.searchResult.find((t) => t.map.id === n)?.match);else {let t = "",e = "";const r = i.classList.contains("other-drillpath");if (r) {if (t = this.searchResult.find((t) => t.map.id === n)?.drillPathId, !t) return;} else e = i.dataset.mapSelector || "";new p.V({ element: document.body, icon: r ? "branch" : "filter", title: r ? "Different Drill Path" : e ? "Different Map Selector" : "No Map Selector", description: r ? `This map is located on a different drill path. Synoptic Panel is not able to navigate to it automatically. \n                            \n                                    You have to close the search dialog and drill to that path "${(0, a.pT)(t)}".` : e ? `This map has a map selector that is not included in the current filter. \n                                \n                                        You have to close the search dialog and include "${e}" in the map selector filter.` : 'This map has no map selector assigned. \n                                        \n                                        To select maps without selector, you have to close the search dialog and enable the "Show Maps Without Selector" in the visual settings.', buttons: [{ text: "Ok, Close", action: "ok", callback: () => this.parent.closeDialog() }, { text: "Cancel", action: "cancel" }] }).draw();}} } }), this.searchResult.forEach(async (t) => await this.addMapToList(t));}drawEmptyResult() {this.cleanResultList(), (0, o.tTh)(".empty-search-result", this.listContainer, { middleware: (t) => this.emptyResult = t }, [(0, o.tTh)("span", "No maps found.")]);}toggleSearchView(t) {this.fileList.toggleAttribute("hidden", !t), t && this.searchBar.focus();}cleanResultList() {window.clearTimeout(this.searchTimeout), this.previewObserver?.disconnect(), this.previewObserver = null, this.mapsList?.remove(), this.emptyResult?.remove();}filterSearchResult() {0 !== this.searchResult.length && (this.onlyCurrentDrillPath || this.onlyCurrentMapSelector) && (this.searchResult = this.searchResult.filter((t) => {if (t.drillPathId !== this.drillPathId && this.onlyCurrentDrillPath) return !1;const e = t.map.mapSelector || "";return !(!this.hasCurrentMapSelector(e) && this.onlyCurrentMapSelector);}));}async addMapToList(t) {const e = t.drillPathId === this.drillPathId;if (!e && this.onlyCurrentDrillPath) return;const i = t.map.mapSelector || "",n = this.hasCurrentMapSelector(i);if (!n && this.onlyCurrentMapSelector) return;const r = t.map,s = r.location === l.k.MyStorage ? "okviz-map" : r.location === l.k.Local ? "map" : "remote-map",c = (0, o.tTh)(".preview"),h = (0, o.tTh)(".bottom"),u = (0, o.tTh)("li", this.mapsList, { data: { id: r.id } }, [c, (0, o.tTh)(".content", [(0, o.tTh)(".map-info", [(0, o.tTh)(".top", [(0, o.tTh)(".title", [(0, o.tTh)(`.icon.icon-${s}`), (0, o.tTh)("span", r.name)]), (0, o.tTh)(".source", r.source), (0, o.tTh)(".matching-result", t.matchCount ? `${t.matchCount} match${1 == t.matchCount ? "" : "es"}` : "")]), h])])]);e ? n ? u.classList.add("selectable-result", "ctrl") : (u.classList.add("other-map-selector"), this.drawMapSelector(h, i), i && (u.dataset.mapSelector = i)) : (u.classList.add("other-drillpath"), this.drawDrillPath(h, (0, a.pT)(t.drillPathId))), this.observePreview(c);}hasCurrentMapSelector(t) {return !this.hasMapSelector || (t ? this.model.mapSelector.values.includes(t) : this.options.canSelectMapWithoutSelector);}observePreview(t) {this.previewObserver || (this.previewObserver = new IntersectionObserver((t) => {t.forEach((t) => {if (t.isIntersecting) {const e = t.target,i = e.closest("li").dataset.id;if (i) {const t = this.searchResult.find((t) => t.map.id === i)?.map;if (!t) return;this.showMapPreview(t, e), this.previewObserver.unobserve(e);}}});}, { root: this.listContainer, threshold: .2 })), this.previewObserver.observe(t);}async showMapPreview(t, e) {if (t.location === l.k.Remote || t.location === l.k.DataField && !(0, h.tO)(t.url)) (0, o.tTh)("img", e, { attr: { src: t.url || "", alt: "Map preview", loading: "lazy" } });else if (t.jsvg) new r.s({ previewContainer: e, showEditButton: !1, noMargin: !0 }).show(t.jsvg);else if (t.location === l.k.MyStorage) {e.classList.add("fetching");try {const i = await this.mapsManager.myStorage.getMapFromUrl(t.url);i && (t.jsvg = i.jsvg), new r.s({ previewContainer: e, showEditButton: !1, noMargin: !0 }).show(t.jsvg);} catch (t) {} finally {e.classList.remove("fetching");}}}drawDrillPath(t, e) {const i = (0, o.tTh)(".navigate-to.drill-path", t, [(0, o.tTh)(".icon.icon-branch.big")]),n = e.split(a.gT);n.forEach((t, e) => {const r = e === n.length - 1;(0, o.tTh)("span.subset-level", i, (0, d.xx)(t)), r || (0, o.tTh)(".icon.icon-right.small", i);});}drawMapSelector(t, e) {const i = (0, o.tTh)(".navigate-to.map-selector", t, [(0, o.tTh)(".icon.icon-filter.big")]);(0, o.tTh)("span.map-selector", i, e ? (0, d.xx)(e) : "No map selector");}showFilterContextMenu(t) {o.tzH.Init("filter-context-menu", { width: "auto", sticky: t.currentTarget, items: [{ type: o.KGh.Header, label: "Search By" }, { label: "(All)", type: o.KGh.Radio, checked: this.searchBy === n.All, className: "small-text-contextual-menu-item", onClick: () => this.applySearchBy(n.All) }, { label: "Data Point", type: o.KGh.Radio, checked: this.searchBy === n.Datapoint, className: "small-text-contextual-menu-item", onClick: () => this.applySearchBy(n.Datapoint) }, { label: "Title", type: o.KGh.Radio, checked: this.searchBy === n.Title, className: "small-text-contextual-menu-item", onClick: () => this.applySearchBy(n.Title) }, { type: o.KGh.Separator }, { type: o.KGh.Header, label: "Filter By" }, ...(this.hasMapSelector ? [{ label: "Current Selector", closeMenuOnClick: !1, type: o.KGh.Check, checked: this.onlyCurrentMapSelector, className: "small-text-contextual-menu-item", onClick: () => {this.onlyCurrentMapSelector = !this.onlyCurrentMapSelector, this.applyFilterBy();} }] : []), { label: "Current Drill Path", closeMenuOnClick: !1, type: o.KGh.Check, checked: this.onlyCurrentDrillPath, enabled: !0, className: "small-text-contextual-menu-item", onClick: () => {this.onlyCurrentDrillPath = !this.onlyCurrentDrillPath, this.applyFilterBy();} }] }).show(t);}applyFilterBy() {this.options.sessionSettings.searchFilterOnlyCurrentMapSelector = this.onlyCurrentMapSelector, this.options.sessionSettings.searchFilterOnlyCurrentDrillPath = this.onlyCurrentDrillPath, this.parent.setDialogResult(), this.handleSearch(0);}applySearchBy(t) {this.options.sessionSettings.searchBy = t, this.parent.setDialogResult(), this.searchBy = t, this.updateSearchFields(), this.handleSearch(0);}destroy() {this.viewContainer?.remove(), this.progressBar?.destroy(), this.searchManager?.destroy(), this.fileList?.remove(), this.emptyResult?.remove(), this.progressBar = null, this.searchManager = null, this.searchBar = null, this.fileList = null, this.listContainer = null, this.mapsList = null, this.currentSearchFields = null, this.emptyResult = null, this.searchBy = null, this.searchResult = null, this.previewObserver?.disconnect(), this.previewObserver = null, super.destroy();}}}, 8965: (t, e, i) => {"use strict";i(9902);const { abs: n, max: r, min: s } = Math;function o(t) {return { type: t };}["w", "e"].map(o), ["n", "s"].map(o), ["n", "w", "e", "s", "nw", "ne", "sw", "se"].map(o);}, 8981: (t, e, i) => {"use strict";function n(t, e) {return t = +t, e = +e, function (i) {return t * (1 - i) + e * i;};}i.d(e, { A: () => n });}, 8985: (t, e, i) => {"use strict";i.d(e, { R: () => n });class n {static _instance;static get instance() {return n._instance || (n._instance = new this()), n._instance;}constructor() {if (n._instance) return n._instance;n._instance = this;}token;async isAvailable() {return 0 === (await thisVisual.host.acquireAADTokenService.acquireAADTokenstatus());}async getToken() {if (this.token?.expiresOn < new Date().getTime() && (this.token = null), !this.token) try {const t = thisVisual.host.acquireAADTokenService,e = await t.acquireAADToken();this.token = e;} catch (t) {}return this.token?.accessToken;}}}, 8993: (t, e, i) => {"use strict";i.d(e, { A: () => c });var n = i(6946),r = i(8701),s = i(1631),o = i(6496),a = i(7590),l = i(9460);function c(t, e, i, c) {var h,u = (0, n.sG)(t, e, i);switch ((c = (0, s.A)(null == c ? ",f" : c)).type) {case "s":var d = Math.max(Math.abs(t), Math.abs(e));return null != c.precision || isNaN(h = (0, a.A)(u, d)) || (c.precision = h), (0, r.s)(c, d);case "":case "e":case "g":case "p":case "r":null != c.precision || isNaN(h = (0, l.A)(u, Math.max(Math.abs(t), Math.abs(e)))) || (c.precision = h - ("e" === c.type));break;case "f":case "%":null != c.precision || isNaN(h = (0, o.A)(u)) || (c.precision = h - 2 * ("%" === c.type));}return (0, r.GP)(c);}}, 9021: (t, e, i) => {"use strict";i.d(e, { q: () => s });var n = i(4061),r = i(1807);class s {static id = "OKVIZEditorDialog";static size = { width: 880, height: 670 };dialogHost;result;constructor(t, e) {this.dialogHost = t.host, this.result = {}, t.element.classList.add("okviz-editor"), globalThis.thisVisual = { element: t.element, host: new r.O50(e.sourceHost.colorPalette, e.sourceHost.locale), internalUpdate: !0 }, r.C7A.instance.status = e.updateOptions.diagnostics ? r.cFy.Enabled : r.cFy.Disabled;const i = (0, r.tTh)(".okviz-editor-dialog", t.element),s = (0, r.tTh)(".okviz-editor-tabs.tabs", i),o = (0, r.tTh)(".okviz-editor-tab-content", i);let a = 0;for (const t of Object.keys(e.pluginsOptions)) if ("function" == typeof n[t]) {const l = e.activePlugin ? e.activePlugin === t : !a,c = new n[t](e.pluginsOptions[t], e.updateOptions);c.on("save", (e) => {this.result.changedSettings || (this.result.changedSettings = {}), this.result.changedSettings[t] = e, this.dialogHost.setResult(this.result);}), c.on("download", (t) => {this.result.download = t, this.dialogHost.close(1, this.result);}), c.on("close", (t) => {this.dialogHost.close(t, this.result);});const h = (0, r.aHV)(t),u = (0, r.tTh)(`#${h}.tab-content`, o, { attr: { hidden: !l } });l && c.draw(u), (0, r.tTh)(".tab" + (l ? ".active" : ""), s, { data: { content: `#${h}`, plugin: t }, events: { click: (t) => {t.preventDefault();const e = t.currentTarget;e.classList.contains("active") || ((0, r.kOW)(".okviz-editor-tabs .tab", i).forEach((t) => t.classList.remove("active")), (0, r.kOW)(".okviz-editor-tab-content .tab-content", i).forEach((t) => t.toggle(!1)), e.classList.add("active"), (0, r.VR4)(e.dataset.content, i).toggle(!0), this.result.activePlugin = e.dataset.plugin, this.dialogHost.setResult(this.result)), c.rendered || c.draw(u);} } }, c.displayName), a++;}}}globalThis.dialogRegistry = globalThis.dialogRegistry || {}, globalThis.dialogRegistry[s.id] = s;}, 9045: (t, e, i) => {"use strict";i.d(e, { i: () => u });var n = i(9589),r = i(3753),s = i(8853),o = i(1470),a = i(6639),l = i(649),c = i(4827),h = i(5268);class u {config;featureFlags;enabledFeatures = {};demoWatermark;demoAlertShown = !1;get name() {return this.config.visual.name;}get displayName() {return this.config.visual.displayName;}get shortName() {return this.displayName.replace(/by .+/gi, "").trim();}get version() {const t = n.parse(n.coerce(this.config.visual.version));return t ? t.version : this.config.visual.version;}get versionDisplayName() {let t = this.version;this.isDev && (t += "-dev"), this.isInternal && (t += "-internal"), this.onOrgStore && (t += "-org");const e = this.expiry;return e && (t += ` (${new Date().getTime() > e ? "Expired" : `Expires ${new Date(e).toLocaleDateString(thisVisual.host.locale, { day: "2-digit", month: "2-digit", year: "numeric" })}`})`), t;}get date() {return this.config.visual.date;}get guid() {return this.config.visual.guid;}get supportUrl() {return this.config.visual.supportUrl;}get expiry() {let t = 0;return this.isPreview && thisVisual.element.classList.forEach((e) => {const i = e.indexOf("___");if (i >= 0) {const n = e.substring(i + 3);let r = parseInt(n);isNaN(r) || (r < new Date(1970, 1, 1).getTime() && (r *= 1e3), t = r);}}), t;}get isExpired() {const t = this.expiry;return !!t && new Date().getTime() > t;}get isInternal() {const t = thisVisual.element.getAttribute("class"),e = this.version.replace(/\./g, "_");return !this.isDev && !this.isPreview && t.indexOf(`_${e}`) >= 0;}get isPreview() {return thisVisual.element.getAttribute("class").indexOf("___") >= 0;}get isDemo() {return this.hasFeatureFlag(c.W);}get isDev() {return thisVisual.element.getAttribute("class").toUpperCase().indexOf("_DEBUG") >= 0;}get onOrgStore() {return thisVisual.element.getAttribute("class").toUpperCase().indexOf("_ORGSTORE") >= 0;}constructor(t, e = []) {this.config = t, this.featureFlags = e;}hasFeatureFlag(t) {return !!this.enabledFeatures[t];}isEdition(t) {return this.config.visual.edition === t;}logMe() {this.update(), console.info(`%c${this.displayName}`, `font-family: ${r.Q9}; font-size:20px; font-weight:600`), console.info(`%cVersion: ${this.versionDisplayName}`, "font-weight:bold"), o.C7.SET_PREFIX(this.shortName);}update(t) {this.populateFeatureFlags(t), this.isExpired && this.showExpiredScreen(), this.isDemo && (this.showDemoAlert(), this.showDemoWatermark());}populateFeatureFlags(t) {this.featureFlags.length && (this.enabledFeatures = {}, t?.dataViews?.[0]?.metadata?.objects) && (0, h.PL)(t.dataViews[0].metadata.objects, l.h, "flags", "").split(",").map((t) => t.trim()).forEach((t) => {const e = this.featureFlags.find((e) => e.flag === t);e && (this.enabledFeatures[e.name] = !0);});}showExpiredScreen() {s.s.SHOW({ id: "expired-visual", zIndex: 9999999999, icon: "error", force: !0, fullSize: !0, uncloseable: !0, title: "Visual Expired", text: `You are using an expired private version of ${this.shortName}. Replace it with the latest version available on AppSource.`, callToAction: { text: "Contact Us", url: this.supportUrl, button: !0 } });}showDemoAlert() {this.demoAlertShown || (this.demoAlertShown = !0, s.s.SHOW({ id: "demo-visual", zIndex: 9999999999, icon: "info", force: !0, closeButton: !1, reshowEvery: 300, title: "For Demo Purposes Only", text: `You are using a demo version of ${this.shortName}. Not for production use.` }));}showDemoWatermark() {this.demoWatermark && document.getElementById("demo") || (this.demoWatermark = (0, a.tT)("#demo.demo-watermark", thisVisual.element, "Demo"));}}}, 9048: (t, e, i) => {"use strict";i.d(e, { f: () => a });var n = i(628),r = i(1807),s = i(8923),o = i(631);class a extends s.v {config;meta;simulated;plans = [];get type() {return "appSource";}get status() {let t,e = o.e2.Pending,i = "Pending...";if (this.isSupported) {if (this.isFetched) if (this.plans.length) switch (e = o.e2.Found, t = { statusCode: o.xJ.Unknown, plan: this.plans[0].spIdentifier }, this.plans[0].state) {case 1:t.statusCode = o.xJ.Active, i = "Active";break;case 2:t.statusCode = o.xJ.Active, i = "Grace Period";break;case 0:t.statusCode = o.xJ.Expired, i = "Expired";break;case 3:t.statusCode = o.xJ.Suspended, i = "Suspended";} else e = o.e2.NotFound, i = "Unlicensed";} else e = o.e2.Unsupported, i = "Unsupported";return { statusCode: e, status: i, license: t };}get isActive() {return !!this.isSupported && (!this.isFetched || !!this.plans.length && 1 === this.plans[0].state);}get isInactive() {return !(!this.isSupported || !this.isFetched || this.plans.length && 0 !== this.plans[0].state);}get isGracePeriod() {return !!(this.isSupported && this.isFetched && this.plans.length) && 2 === this.plans[0].state;}get isSuspended() {return !!(this.isSupported && this.isFetched && this.plans.length) && 3 === this.plans[0].state;}get isTrial() {return !1;}get unsupportedMessage() {return "This visual cannot access the AppSource licensing system because the current environment does not support it. Please note that Power BI Report Server, Power BI Embedded (Publish to Web, PaaS embed), and National Clouds cannot be used with this licensing system.";}get purchaseUrl() {return this.meta.config.visual.appSourcePurchaseUrl || this.meta.config.visual.contactUrl;}constructor(t, e, i) {super(t, e), this.config = t, this.meta = e, this.simulated = i, this.meta.isDev || (this.simulated = null), this.simulated && (thisVisual.host.licenseManager.getAvailableServicePlans = () => Promise.resolve(this.simulated), r.C7A.ERROR("Licensing (AppSource)", "You are using a simulated license!")), thisVisual.host.licenseManager.clearLicenseNotification(), this.fetchLicenses();}async fetchLicenses() {if (!this.isFetching && !this.isFetched && this.isSupported) {this.isFetching = !0;try {const t = await thisVisual.host.licenseManager.getAvailableServicePlans();if (this.isSupported = !t.isLicenseUnsupportedEnv, this.isFetched = t.isLicenseInfoAvailable, this.isFetched && this.isSupported) {this.plans = t.plans || [];const e = this.config?.ap || [];this.plans = this.plans.filter((t) => {for (const i of e) if (i && n.isMatch(t.spIdentifier, i, { nocase: !0 })) return !0;return !1;});const i = [1, 2, 3, 0, 4];this.plans.sort((t, e) => i.indexOf(t.state) - i.indexOf(e.state));}this.log();} catch (t) {r.C7A.ERROR("Licensing (AppSource)", t);}}super.fetchLicenses();}log() {r.C7A.INFO("Licensing (AppSource)", { plans: this.plans, isSupported: this.isSupported, isActive: this.isActive, isInactive: this.isInactive, isGracePeriod: this.isGracePeriod, isSuspended: this.isSuspended });}}}, 9063: (t, e, i) => {"use strict";function n() {var t = this.cloneNode(!1),e = this.parentNode;return e ? e.insertBefore(t, this.nextSibling) : t;}function r() {var t = this.cloneNode(!0),e = this.parentNode;return e ? e.insertBefore(t, this.nextSibling) : t;}function s(t) {return this.select(t ? r : n);}i.d(e, { A: () => s });}, 9064: (t, e, i) => {"use strict";i.d(e, { Si: () => T, eB: () => k });var n = i(1882),r = i(7949),s = i(3446),o = i(1375),a = i(6558),l = i(4228),c = i(6066),h = i(4876),u = i(5636),d = i(5207),p = i(5182),f = i(3206),g = i(1683),m = i(7270),v = i(9353),y = i(8674),b = i(2518),w = i(7890),x = i(5509),S = i(123),E = i(3589),C = 0;function k(t, e, i, n) {this._groups = t, this._parents = e, this._name = i, this._id = n;}function T() {return ++C;}var A = n.Ay.prototype;k.prototype = function (t) {return (0, n.Ay)().transition(t);}.prototype = { constructor: k, select: f.A, selectAll: g.A, selectChild: A.selectChild, selectChildren: A.selectChildren, filter: h.A, merge: u.A, selection: m.A, transition: x.A, call: A.call, nodes: A.nodes, node: A.node, size: A.size, empty: A.empty, each: A.each, on: d.A, attr: r.A, attrTween: s.A, style: v.A, styleTween: y.A, text: b.A, textTween: w.A, remove: p.A, tween: S.A, delay: o.A, duration: a.A, ease: l.A, easeVarying: c.A, end: E.A, [Symbol.iterator]: A[Symbol.iterator] };}, 9065: (t, e, i) => {"use strict";function n(t, e) {switch (arguments.length) {case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);}return this;}i.d(e, { C: () => n });}, 9095: (t, e, i) => {"use strict";i.d(e, { D0: () => r, Rd: () => n, xW: () => s });const n = new TextEncoder(),r = new TextDecoder();function s(...t) {const e = t.reduce((t, { length: e }) => t + e, 0),i = new Uint8Array(e);let n = 0;for (const e of t) i.set(e, n), n += e.length;return i;}}, 9215: (t, e, i) => {"use strict";function n() {this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);}function r() {return this.each(n);}i.d(e, { A: () => r });}, 9279: (t, e, i) => {"use strict";function n(t) {return function () {return t;};}i.d(e, { A: () => n });}, 9338: (t, e, i) => {"use strict";i.d(e, { A: () => r });const n = /^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,r = (t) => {const e = n.exec(t);if (!e || e[4] && e[1]) throw new TypeError("Invalid time period format");const i = parseFloat(e[2]);let r;switch (e[3].toLowerCase()) {case "sec":case "secs":case "second":case "seconds":case "s":r = Math.round(i);break;case "minute":case "minutes":case "min":case "mins":case "m":r = Math.round(60 * i);break;case "hour":case "hours":case "hr":case "hrs":case "h":r = Math.round(3600 * i);break;case "day":case "days":case "d":r = Math.round(86400 * i);break;case "week":case "weeks":case "w":r = Math.round(604800 * i);break;default:r = Math.round(31557600 * i);}return "-" === e[1] || "ago" === e[4] ? -r : r;};}, 9353: (t, e, i) => {"use strict";i.d(e, { A: () => c });var n = i(1957),r = i(3683),s = i(3363),o = i(123),a = i(7479);function l(t) {return function () {this.style.removeProperty(t);};}function c(t, e, i) {var c = "transform" == (t += "") ? n.T : a.A;return null == e ? this.styleTween(t, function (t, e) {var i, n, s;return function () {var o = (0, r.j)(this, t),a = (this.style.removeProperty(t), (0, r.j)(this, t));return o === a ? null : o === i && a === n ? s : s = e(i = o, n = a);};}(t, c)).on("end.style." + t, l(t)) : "function" == typeof e ? this.styleTween(t, function (t, e, i) {var n, s, o;return function () {var a = (0, r.j)(this, t),l = i(this),c = l + "";return null == l && (this.style.removeProperty(t), c = l = (0, r.j)(this, t)), a === c ? null : a === n && c === s ? o : (s = c, o = e(n = a, l));};}(t, c, (0, o.J)(this, "style." + t, e))).each(function (t, e) {var i,n,r,o,a = "style." + e,c = "end." + a;return function () {var h = (0, s.hZ)(this, t),u = h.on,d = null == h.value[a] ? o || (o = l(e)) : void 0;u === i && r === d || (n = (i = u).copy()).on(c, r = d), h.on = n;};}(this._id, t)) : this.styleTween(t, function (t, e, i) {var n,s,o = i + "";return function () {var a = (0, r.j)(this, t);return a === o ? null : a === n ? s : s = e(n = a, i);};}(t, c, e), i).on("end.style." + t, null);}}, 9380: (t, e, i) => {"use strict";i.d(e, { V: () => o });var n = i(5609),r = i(9803),s = i(7493);async function o(t, e, i) {const o = await (0, n.B)(t, e, i);if (o.protectedHeader.crit?.includes("b64") && !1 === o.protectedHeader.b64) throw new s.Dp("JWTs MUST NOT use unencoded payload");const a = { payload: (0, r.A)(o.protectedHeader, o.payload, i), protectedHeader: o.protectedHeader };return "function" == typeof e ? { ...a, key: o.key } : a;}}, 9418: (t, e, i) => {"use strict";i.d(e, { A: () => it });const { entries: n, setPrototypeOf: r, isFrozen: s, getPrototypeOf: o, getOwnPropertyDescriptor: a } = Object;let { freeze: l, seal: c, create: h } = Object,{ apply: u, construct: d } = "undefined" != typeof Reflect && Reflect;l || (l = function (t) {return t;}), c || (c = function (t) {return t;}), u || (u = function (t, e) {for (var i = arguments.length, n = new Array(i > 2 ? i - 2 : 0), r = 2; r < i; r++) n[r - 2] = arguments[r];return t.apply(e, n);}), d || (d = function (t) {for (var e = arguments.length, i = new Array(e > 1 ? e - 1 : 0), n = 1; n < e; n++) i[n - 1] = arguments[n];return new t(...i);});const p = M(Array.prototype.forEach),f = M(Array.prototype.lastIndexOf),g = M(Array.prototype.pop),m = M(Array.prototype.push),v = M(Array.prototype.splice),y = M(String.prototype.toLowerCase),b = M(String.prototype.toString),w = M(String.prototype.match),x = M(String.prototype.replace),S = M(String.prototype.indexOf),E = M(String.prototype.trim),C = M(Object.prototype.hasOwnProperty),k = M(RegExp.prototype.test),T = (A = TypeError, function () {for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i];return d(A, e);});var A;function M(t) {return function (e) {e instanceof RegExp && (e.lastIndex = 0);for (var i = arguments.length, n = new Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];return u(t, e, n);};}function _(t, e) {let i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : y;r && r(t, null);let n = e.length;for (; n--;) {let r = e[n];if ("string" == typeof r) {const t = i(r);t !== r && (s(e) || (e[n] = t), r = t);}t[r] = !0;}return t;}function P(t) {for (let e = 0; e < t.length; e++) C(t, e) || (t[e] = null);return t;}function D(t) {const e = h(null);for (const [i, r] of n(t)) C(t, i) && (Array.isArray(r) ? e[i] = P(r) : r && "object" == typeof r && r.constructor === Object ? e[i] = D(r) : e[i] = r);return e;}function O(t, e) {for (; null !== t;) {const i = a(t, e);if (i) {if (i.get) return M(i.get);if ("function" == typeof i.value) return M(i.value);}t = o(t);}return function () {return null;};}const I = l(["a", "abbr", "acronym", "address", "area", "article", "aside", "audio", "b", "bdi", "bdo", "big", "blink", "blockquote", "body", "br", "button", "canvas", "caption", "center", "cite", "code", "col", "colgroup", "content", "data", "datalist", "dd", "decorator", "del", "details", "dfn", "dialog", "dir", "div", "dl", "dt", "element", "em", "fieldset", "figcaption", "figure", "font", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "img", "input", "ins", "kbd", "label", "legend", "li", "main", "map", "mark", "marquee", "menu", "menuitem", "meter", "nav", "nobr", "ol", "optgroup", "option", "output", "p", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "search", "section", "select", "shadow", "slot", "small", "source", "spacer", "span", "strike", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "template", "textarea", "tfoot", "th", "thead", "time", "tr", "track", "tt", "u", "ul", "var", "video", "wbr"]),F = l(["svg", "a", "altglyph", "altglyphdef", "altglyphitem", "animatecolor", "animatemotion", "animatetransform", "circle", "clippath", "defs", "desc", "ellipse", "enterkeyhint", "exportparts", "filter", "font", "g", "glyph", "glyphref", "hkern", "image", "inputmode", "line", "lineargradient", "marker", "mask", "metadata", "mpath", "part", "path", "pattern", "polygon", "polyline", "radialgradient", "rect", "slot", "stop", "style", "switch", "symbol", "text", "textpath", "title", "tref", "tspan", "view", "vkern"]),R = l(["feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feDropShadow", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence"]),L = l(["animate", "color-profile", "cursor", "discard", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignobject", "hatch", "hatchpath", "mesh", "meshgradient", "meshpatch", "meshrow", "missing-glyph", "script", "set", "solidcolor", "unknown", "use"]),N = l(["math", "menclose", "merror", "mfenced", "mfrac", "mglyph", "mi", "mlabeledtr", "mmultiscripts", "mn", "mo", "mover", "mpadded", "mphantom", "mroot", "mrow", "ms", "mspace", "msqrt", "mstyle", "msub", "msup", "msubsup", "mtable", "mtd", "mtext", "mtr", "munder", "munderover", "mprescripts"]),V = l(["maction", "maligngroup", "malignmark", "mlongdiv", "mscarries", "mscarry", "msgroup", "mstack", "msline", "msrow", "semantics", "annotation", "annotation-xml", "mprescripts", "none"]),B = l(["#text"]),j = l(["accept", "action", "align", "alt", "autocapitalize", "autocomplete", "autopictureinpicture", "autoplay", "background", "bgcolor", "border", "capture", "cellpadding", "cellspacing", "checked", "cite", "class", "clear", "color", "cols", "colspan", "controls", "controlslist", "coords", "crossorigin", "datetime", "decoding", "default", "dir", "disabled", "disablepictureinpicture", "disableremoteplayback", "download", "draggable", "enctype", "enterkeyhint", "exportparts", "face", "for", "headers", "height", "hidden", "high", "href", "hreflang", "id", "inert", "inputmode", "integrity", "ismap", "kind", "label", "lang", "list", "loading", "loop", "low", "max", "maxlength", "media", "method", "min", "minlength", "multiple", "muted", "name", "nonce", "noshade", "novalidate", "nowrap", "open", "optimum", "part", "pattern", "placeholder", "playsinline", "popover", "popovertarget", "popovertargetaction", "poster", "preload", "pubdate", "radiogroup", "readonly", "rel", "required", "rev", "reversed", "role", "rows", "rowspan", "spellcheck", "scope", "selected", "shape", "size", "sizes", "slot", "span", "srclang", "start", "src", "srcset", "step", "style", "summary", "tabindex", "title", "translate", "type", "usemap", "valign", "value", "width", "wrap", "xmlns", "slot"]),z = l(["accent-height", "accumulate", "additive", "alignment-baseline", "amplitude", "ascent", "attributename", "attributetype", "azimuth", "basefrequency", "baseline-shift", "begin", "bias", "by", "class", "clip", "clippathunits", "clip-path", "clip-rule", "color", "color-interpolation", "color-interpolation-filters", "color-profile", "color-rendering", "cx", "cy", "d", "dx", "dy", "diffuseconstant", "direction", "display", "divisor", "dur", "edgemode", "elevation", "end", "exponent", "fill", "fill-opacity", "fill-rule", "filter", "filterunits", "flood-color", "flood-opacity", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-weight", "fx", "fy", "g1", "g2", "glyph-name", "glyphref", "gradientunits", "gradienttransform", "height", "href", "id", "image-rendering", "in", "in2", "intercept", "k", "k1", "k2", "k3", "k4", "kerning", "keypoints", "keysplines", "keytimes", "lang", "lengthadjust", "letter-spacing", "kernelmatrix", "kernelunitlength", "lighting-color", "local", "marker-end", "marker-mid", "marker-start", "markerheight", "markerunits", "markerwidth", "maskcontentunits", "maskunits", "max", "mask", "media", "method", "mode", "min", "name", "numoctaves", "offset", "operator", "opacity", "order", "orient", "orientation", "origin", "overflow", "paint-order", "path", "pathlength", "patterncontentunits", "patterntransform", "patternunits", "points", "preservealpha", "preserveaspectratio", "primitiveunits", "r", "rx", "ry", "radius", "refx", "refy", "repeatcount", "repeatdur", "restart", "result", "rotate", "scale", "seed", "shape-rendering", "slope", "specularconstant", "specularexponent", "spreadmethod", "startoffset", "stddeviation", "stitchtiles", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke", "stroke-width", "style", "surfacescale", "systemlanguage", "tabindex", "tablevalues", "targetx", "targety", "transform", "transform-origin", "text-anchor", "text-decoration", "text-rendering", "textlength", "type", "u1", "u2", "unicode", "values", "viewbox", "visibility", "version", "vert-adv-y", "vert-origin-x", "vert-origin-y", "width", "word-spacing", "wrap", "writing-mode", "xchannelselector", "ychannelselector", "x", "x1", "x2", "xmlns", "y", "y1", "y2", "z", "zoomandpan"]),U = l(["accent", "accentunder", "align", "bevelled", "close", "columnsalign", "columnlines", "columnspan", "denomalign", "depth", "dir", "display", "displaystyle", "encoding", "fence", "frame", "height", "href", "id", "largeop", "length", "linethickness", "lspace", "lquote", "mathbackground", "mathcolor", "mathsize", "mathvariant", "maxsize", "minsize", "movablelimits", "notation", "numalign", "open", "rowalign", "rowlines", "rowspacing", "rowspan", "rspace", "rquote", "scriptlevel", "scriptminsize", "scriptsizemultiplier", "selection", "separator", "separators", "stretchy", "subscriptshift", "supscriptshift", "symmetric", "voffset", "width", "xmlns"]),H = l(["xlink:href", "xml:id", "xlink:title", "xml:space", "xmlns:xlink"]),q = c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$ = c(/<%[\w\W]*|[\w\W]*%>/gm),G = c(/\$\{[\w\W]*/gm),W = c(/^data-[\-\w.\u00B7-\uFFFF]+$/),K = c(/^aria-[\-\w]+$/),Z = c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y = c(/^(?:\w+script|data):/i),X = c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J = c(/^html$/i),Q = c(/^[a-z][.\w]*(-[.\w]+)+$/i);var tt = Object.freeze({ __proto__: null, ARIA_ATTR: K, ATTR_WHITESPACE: X, CUSTOM_ELEMENT: Q, DATA_ATTR: W, DOCTYPE_NAME: J, ERB_EXPR: $, IS_ALLOWED_URI: Z, IS_SCRIPT_OR_DATA: Y, MUSTACHE_EXPR: q, TMPLIT_EXPR: G });const et = function () {return "undefined" == typeof window ? null : window;};var it = function t() {let e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : et();const i = (e) => t(e);if (i.version = "3.2.7", i.removed = [], !e || !e.document || 9 !== e.document.nodeType || !e.Element) return i.isSupported = !1, i;let { document: r } = e;const s = r,o = s.currentScript,{ DocumentFragment: a, HTMLTemplateElement: c, Node: u, Element: d, NodeFilter: A, NamedNodeMap: M = e.NamedNodeMap || e.MozNamedAttrMap, HTMLFormElement: P, DOMParser: q, trustedTypes: $ } = e,G = d.prototype,W = O(G, "cloneNode"),K = O(G, "remove"),Y = O(G, "nextSibling"),X = O(G, "childNodes"),Q = O(G, "parentNode");if ("function" == typeof c) {const t = r.createElement("template");t.content && t.content.ownerDocument && (r = t.content.ownerDocument);}let it,nt = "";const { implementation: rt, createNodeIterator: st, createDocumentFragment: ot, getElementsByTagName: at } = r,{ importNode: lt } = s;let ct = { afterSanitizeAttributes: [], afterSanitizeElements: [], afterSanitizeShadowDOM: [], beforeSanitizeAttributes: [], beforeSanitizeElements: [], beforeSanitizeShadowDOM: [], uponSanitizeAttribute: [], uponSanitizeElement: [], uponSanitizeShadowNode: [] };i.isSupported = "function" == typeof n && "function" == typeof Q && rt && void 0 !== rt.createHTMLDocument;const { MUSTACHE_EXPR: ht, ERB_EXPR: ut, TMPLIT_EXPR: dt, DATA_ATTR: pt, ARIA_ATTR: ft, IS_SCRIPT_OR_DATA: gt, ATTR_WHITESPACE: mt, CUSTOM_ELEMENT: vt } = tt;let { IS_ALLOWED_URI: yt } = tt,bt = null;const wt = _({}, [...I, ...F, ...R, ...N, ...B]);let xt = null;const St = _({}, [...j, ...z, ...U, ...H]);let Et = Object.seal(h(null, { tagNameCheck: { writable: !0, configurable: !1, enumerable: !0, value: null }, attributeNameCheck: { writable: !0, configurable: !1, enumerable: !0, value: null }, allowCustomizedBuiltInElements: { writable: !0, configurable: !1, enumerable: !0, value: !1 } })),Ct = null,kt = null,Tt = !0,At = !0,Mt = !1,_t = !0,Pt = !1,Dt = !0,Ot = !1,It = !1,Ft = !1,Rt = !1,Lt = !1,Nt = !1,Vt = !0,Bt = !1,jt = !0,zt = !1,Ut = {},Ht = null;const qt = _({}, ["annotation-xml", "audio", "colgroup", "desc", "foreignobject", "head", "iframe", "math", "mi", "mn", "mo", "ms", "mtext", "noembed", "noframes", "noscript", "plaintext", "script", "style", "svg", "template", "thead", "title", "video", "xmp"]);let $t = null;const Gt = _({}, ["audio", "video", "img", "source", "image", "track"]);let Wt = null;const Kt = _({}, ["alt", "class", "for", "id", "label", "name", "pattern", "placeholder", "role", "summary", "title", "value", "style", "xmlns"]),Zt = "http://www.w3.org/1998/Math/MathML",Yt = "http://www.w3.org/2000/svg",Xt = "http://www.w3.org/1999/xhtml";let Jt = Xt,Qt = !1,te = null;const ee = _({}, [Zt, Yt, Xt], b);let ie = _({}, ["mi", "mo", "mn", "ms", "mtext"]),ne = _({}, ["annotation-xml"]);const re = _({}, ["title", "style", "font", "a", "script"]);let se = null;const oe = ["application/xhtml+xml", "text/html"];let ae = null,le = null;const ce = r.createElement("form"),he = function (t) {return t instanceof RegExp || t instanceof Function;},ue = function () {let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};if (!le || le !== t) {if (t && "object" == typeof t || (t = {}), t = D(t), se = -1 === oe.indexOf(t.PARSER_MEDIA_TYPE) ? "text/html" : t.PARSER_MEDIA_TYPE, ae = "application/xhtml+xml" === se ? b : y, bt = C(t, "ALLOWED_TAGS") ? _({}, t.ALLOWED_TAGS, ae) : wt, xt = C(t, "ALLOWED_ATTR") ? _({}, t.ALLOWED_ATTR, ae) : St, te = C(t, "ALLOWED_NAMESPACES") ? _({}, t.ALLOWED_NAMESPACES, b) : ee, Wt = C(t, "ADD_URI_SAFE_ATTR") ? _(D(Kt), t.ADD_URI_SAFE_ATTR, ae) : Kt, $t = C(t, "ADD_DATA_URI_TAGS") ? _(D(Gt), t.ADD_DATA_URI_TAGS, ae) : Gt, Ht = C(t, "FORBID_CONTENTS") ? _({}, t.FORBID_CONTENTS, ae) : qt, Ct = C(t, "FORBID_TAGS") ? _({}, t.FORBID_TAGS, ae) : D({}), kt = C(t, "FORBID_ATTR") ? _({}, t.FORBID_ATTR, ae) : D({}), Ut = !!C(t, "USE_PROFILES") && t.USE_PROFILES, Tt = !1 !== t.ALLOW_ARIA_ATTR, At = !1 !== t.ALLOW_DATA_ATTR, Mt = t.ALLOW_UNKNOWN_PROTOCOLS || !1, _t = !1 !== t.ALLOW_SELF_CLOSE_IN_ATTR, Pt = t.SAFE_FOR_TEMPLATES || !1, Dt = !1 !== t.SAFE_FOR_XML, Ot = t.WHOLE_DOCUMENT || !1, Rt = t.RETURN_DOM || !1, Lt = t.RETURN_DOM_FRAGMENT || !1, Nt = t.RETURN_TRUSTED_TYPE || !1, Ft = t.FORCE_BODY || !1, Vt = !1 !== t.SANITIZE_DOM, Bt = t.SANITIZE_NAMED_PROPS || !1, jt = !1 !== t.KEEP_CONTENT, zt = t.IN_PLACE || !1, yt = t.ALLOWED_URI_REGEXP || Z, Jt = t.NAMESPACE || Xt, ie = t.MATHML_TEXT_INTEGRATION_POINTS || ie, ne = t.HTML_INTEGRATION_POINTS || ne, Et = t.CUSTOM_ELEMENT_HANDLING || {}, t.CUSTOM_ELEMENT_HANDLING && he(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck) && (Et.tagNameCheck = t.CUSTOM_ELEMENT_HANDLING.tagNameCheck), t.CUSTOM_ELEMENT_HANDLING && he(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck) && (Et.attributeNameCheck = t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck), t.CUSTOM_ELEMENT_HANDLING && "boolean" == typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (Et.allowCustomizedBuiltInElements = t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements), Pt && (At = !1), Lt && (Rt = !0), Ut && (bt = _({}, B), xt = [], !0 === Ut.html && (_(bt, I), _(xt, j)), !0 === Ut.svg && (_(bt, F), _(xt, z), _(xt, H)), !0 === Ut.svgFilters && (_(bt, R), _(xt, z), _(xt, H)), !0 === Ut.mathMl && (_(bt, N), _(xt, U), _(xt, H))), t.ADD_TAGS && (bt === wt && (bt = D(bt)), _(bt, t.ADD_TAGS, ae)), t.ADD_ATTR && (xt === St && (xt = D(xt)), _(xt, t.ADD_ATTR, ae)), t.ADD_URI_SAFE_ATTR && _(Wt, t.ADD_URI_SAFE_ATTR, ae), t.FORBID_CONTENTS && (Ht === qt && (Ht = D(Ht)), _(Ht, t.FORBID_CONTENTS, ae)), jt && (bt["#text"] = !0), Ot && _(bt, ["html", "head", "body"]), bt.table && (_(bt, ["tbody"]), delete Ct.tbody), t.TRUSTED_TYPES_POLICY) {if ("function" != typeof t.TRUSTED_TYPES_POLICY.createHTML) throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if ("function" != typeof t.TRUSTED_TYPES_POLICY.createScriptURL) throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');it = t.TRUSTED_TYPES_POLICY, nt = it.createHTML("");} else void 0 === it && (it = function (t, e) {if ("object" != typeof t || "function" != typeof t.createPolicy) return null;let i = null;const n = "data-tt-policy-suffix";e && e.hasAttribute(n) && (i = e.getAttribute(n));const r = "dompurify" + (i ? "#" + i : "");try {return t.createPolicy(r, { createHTML: (t) => t, createScriptURL: (t) => t });} catch (t) {return console.warn("TrustedTypes policy " + r + " could not be created."), null;}}($, o)), null !== it && "string" == typeof nt && (nt = it.createHTML(""));l && l(t), le = t;}},de = _({}, [...F, ...R, ...L]),pe = _({}, [...N, ...V]),fe = function (t) {m(i.removed, { element: t });try {Q(t).removeChild(t);} catch (e) {K(t);}},ge = function (t, e) {try {m(i.removed, { attribute: e.getAttributeNode(t), from: e });} catch (t) {m(i.removed, { attribute: null, from: e });}if (e.removeAttribute(t), "is" === t) if (Rt || Lt) try {fe(e);} catch (t) {} else try {e.setAttribute(t, "");} catch (t) {}},me = function (t) {let e = null,i = null;if (Ft) t = "<remove></remove>" + t;else {const e = w(t, /^[\r\n\t ]+/);i = e && e[0];}"application/xhtml+xml" === se && Jt === Xt && (t = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + t + "</body></html>");const n = it ? it.createHTML(t) : t;if (Jt === Xt) try {e = new q().parseFromString(n, se);} catch (t) {}if (!e || !e.documentElement) {e = rt.createDocument(Jt, "template", null);try {e.documentElement.innerHTML = Qt ? nt : n;} catch (t) {}}const s = e.body || e.documentElement;return t && i && s.insertBefore(r.createTextNode(i), s.childNodes[0] || null), Jt === Xt ? at.call(e, Ot ? "html" : "body")[0] : Ot ? e.documentElement : s;},ve = function (t) {return st.call(t.ownerDocument || t, t, A.SHOW_ELEMENT | A.SHOW_COMMENT | A.SHOW_TEXT | A.SHOW_PROCESSING_INSTRUCTION | A.SHOW_CDATA_SECTION, null);},ye = function (t) {return t instanceof P && ("string" != typeof t.nodeName || "string" != typeof t.textContent || "function" != typeof t.removeChild || !(t.attributes instanceof M) || "function" != typeof t.removeAttribute || "function" != typeof t.setAttribute || "string" != typeof t.namespaceURI || "function" != typeof t.insertBefore || "function" != typeof t.hasChildNodes);},be = function (t) {return "function" == typeof u && t instanceof u;};function we(t, e, n) {p(t, (t) => {t.call(i, e, n, le);});}const xe = function (t) {let e = null;if (we(ct.beforeSanitizeElements, t, null), ye(t)) return fe(t), !0;const n = ae(t.nodeName);if (we(ct.uponSanitizeElement, t, { tagName: n, allowedTags: bt }), Dt && t.hasChildNodes() && !be(t.firstElementChild) && k(/<[/\w!]/g, t.innerHTML) && k(/<[/\w!]/g, t.textContent)) return fe(t), !0;if (7 === t.nodeType) return fe(t), !0;if (Dt && 8 === t.nodeType && k(/<[/\w]/g, t.data)) return fe(t), !0;if (!bt[n] || Ct[n]) {if (!Ct[n] && Ee(n)) {if (Et.tagNameCheck instanceof RegExp && k(Et.tagNameCheck, n)) return !1;if (Et.tagNameCheck instanceof Function && Et.tagNameCheck(n)) return !1;}if (jt && !Ht[n]) {const e = Q(t) || t.parentNode,i = X(t) || t.childNodes;if (i && e) for (let n = i.length - 1; n >= 0; --n) {const r = W(i[n], !0);r.__removalCount = (t.__removalCount || 0) + 1, e.insertBefore(r, Y(t));}}return fe(t), !0;}return t instanceof d && !function (t) {let e = Q(t);e && e.tagName || (e = { namespaceURI: Jt, tagName: "template" });const i = y(t.tagName),n = y(e.tagName);return !!te[t.namespaceURI] && (t.namespaceURI === Yt ? e.namespaceURI === Xt ? "svg" === i : e.namespaceURI === Zt ? "svg" === i && ("annotation-xml" === n || ie[n]) : Boolean(de[i]) : t.namespaceURI === Zt ? e.namespaceURI === Xt ? "math" === i : e.namespaceURI === Yt ? "math" === i && ne[n] : Boolean(pe[i]) : t.namespaceURI === Xt ? !(e.namespaceURI === Yt && !ne[n]) && !(e.namespaceURI === Zt && !ie[n]) && !pe[i] && (re[i] || !de[i]) : !("application/xhtml+xml" !== se || !te[t.namespaceURI]));}(t) ? (fe(t), !0) : "noscript" !== n && "noembed" !== n && "noframes" !== n || !k(/<\/no(script|embed|frames)/i, t.innerHTML) ? (Pt && 3 === t.nodeType && (e = t.textContent, p([ht, ut, dt], (t) => {e = x(e, t, " ");}), t.textContent !== e && (m(i.removed, { element: t.cloneNode() }), t.textContent = e)), we(ct.afterSanitizeElements, t, null), !1) : (fe(t), !0);},Se = function (t, e, i) {if (Vt && ("id" === e || "name" === e) && (i in r || i in ce)) return !1;if (At && !kt[e] && k(pt, e)) ;else if (Tt && k(ft, e)) ;else if (!xt[e] || kt[e]) {if (!(Ee(t) && (Et.tagNameCheck instanceof RegExp && k(Et.tagNameCheck, t) || Et.tagNameCheck instanceof Function && Et.tagNameCheck(t)) && (Et.attributeNameCheck instanceof RegExp && k(Et.attributeNameCheck, e) || Et.attributeNameCheck instanceof Function && Et.attributeNameCheck(e, t)) || "is" === e && Et.allowCustomizedBuiltInElements && (Et.tagNameCheck instanceof RegExp && k(Et.tagNameCheck, i) || Et.tagNameCheck instanceof Function && Et.tagNameCheck(i)))) return !1;} else if (Wt[e]) ;else if (k(yt, x(i, mt, ""))) ;else if ("src" !== e && "xlink:href" !== e && "href" !== e || "script" === t || 0 !== S(i, "data:") || !$t[t]) if (Mt && !k(gt, x(i, mt, ""))) ;else if (i) return !1;return !0;},Ee = function (t) {return "annotation-xml" !== t && w(t, vt);},Ce = function (t) {we(ct.beforeSanitizeAttributes, t, null);const { attributes: e } = t;if (!e || ye(t)) return;const n = { attrName: "", attrValue: "", keepAttr: !0, allowedAttributes: xt, forceKeepAttr: void 0 };let r = e.length;for (; r--;) {const s = e[r],{ name: o, namespaceURI: a, value: l } = s,c = ae(o),h = l;let u = "value" === o ? h : E(h);if (n.attrName = c, n.attrValue = u, n.keepAttr = !0, n.forceKeepAttr = void 0, we(ct.uponSanitizeAttribute, t, n), u = n.attrValue, !Bt || "id" !== c && "name" !== c || (ge(o, t), u = "user-content-" + u), Dt && k(/((--!?|])>)|<\/(style|title|textarea)/i, u)) {ge(o, t);continue;}if ("attributename" === c && w(u, "href")) {ge(o, t);continue;}if (n.forceKeepAttr) continue;if (!n.keepAttr) {ge(o, t);continue;}if (!_t && k(/\/>/i, u)) {ge(o, t);continue;}Pt && p([ht, ut, dt], (t) => {u = x(u, t, " ");});const d = ae(t.nodeName);if (Se(d, c, u)) {if (it && "object" == typeof $ && "function" == typeof $.getAttributeType) if (a) ;else switch ($.getAttributeType(d, c)) {case "TrustedHTML":u = it.createHTML(u);break;case "TrustedScriptURL":u = it.createScriptURL(u);}if (u !== h) try {a ? t.setAttributeNS(a, o, u) : t.setAttribute(o, u), ye(t) ? fe(t) : g(i.removed);} catch (e) {ge(o, t);}} else ge(o, t);}we(ct.afterSanitizeAttributes, t, null);},ke = function t(e) {let i = null;const n = ve(e);for (we(ct.beforeSanitizeShadowDOM, e, null); i = n.nextNode();) we(ct.uponSanitizeShadowNode, i, null), xe(i), Ce(i), i.content instanceof a && t(i.content);we(ct.afterSanitizeShadowDOM, e, null);};return i.sanitize = function (t) {let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},n = null,r = null,o = null,l = null;if (Qt = !t, Qt && (t = "\x3c!--\x3e"), "string" != typeof t && !be(t)) {if ("function" != typeof t.toString) throw T("toString is not a function");if ("string" != typeof (t = t.toString())) throw T("dirty is not a string, aborting");}if (!i.isSupported) return t;if (It || ue(e), i.removed = [], "string" == typeof t && (zt = !1), zt) {if (t.nodeName) {const e = ae(t.nodeName);if (!bt[e] || Ct[e]) throw T("root node is forbidden and cannot be sanitized in-place");}} else if (t instanceof u) n = me("\x3c!----\x3e"), r = n.ownerDocument.importNode(t, !0), 1 === r.nodeType && "BODY" === r.nodeName || "HTML" === r.nodeName ? n = r : n.appendChild(r);else {if (!Rt && !Pt && !Ot && -1 === t.indexOf("<")) return it && Nt ? it.createHTML(t) : t;if (n = me(t), !n) return Rt ? null : Nt ? nt : "";}n && Ft && fe(n.firstChild);const c = ve(zt ? t : n);for (; o = c.nextNode();) xe(o), Ce(o), o.content instanceof a && ke(o.content);if (zt) return t;if (Rt) {if (Lt) for (l = ot.call(n.ownerDocument); n.firstChild;) l.appendChild(n.firstChild);else l = n;return (xt.shadowroot || xt.shadowrootmode) && (l = lt.call(s, l, !0)), l;}let h = Ot ? n.outerHTML : n.innerHTML;return Ot && bt["!doctype"] && n.ownerDocument && n.ownerDocument.doctype && n.ownerDocument.doctype.name && k(J, n.ownerDocument.doctype.name) && (h = "<!DOCTYPE " + n.ownerDocument.doctype.name + ">\n" + h), Pt && p([ht, ut, dt], (t) => {h = x(h, t, " ");}), it && Nt ? it.createHTML(h) : h;}, i.setConfig = function () {ue(arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}), It = !0;}, i.clearConfig = function () {le = null, It = !1;}, i.isValidAttribute = function (t, e, i) {le || ue({});const n = ae(t),r = ae(e);return Se(n, r, i);}, i.addHook = function (t, e) {"function" == typeof e && m(ct[t], e);}, i.removeHook = function (t, e) {if (void 0 !== e) {const i = f(ct[t], e);return -1 === i ? void 0 : v(ct[t], i, 1)[0];}return g(ct[t]);}, i.removeHooks = function (t) {ct[t] = [];}, i.removeAllHooks = function () {ct = { afterSanitizeAttributes: [], afterSanitizeElements: [], afterSanitizeShadowDOM: [], beforeSanitizeAttributes: [], beforeSanitizeElements: [], beforeSanitizeShadowDOM: [], uponSanitizeAttribute: [], uponSanitizeElement: [], uponSanitizeShadowNode: [] };}, i;}();}, 9433: (t, e, i) => {"use strict";function n(t) {return arguments.length ? this.property("__data__", t) : this.node().__data__;}i.d(e, { A: () => n });}, 9460: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(7235);function r(t, e) {return t = Math.abs(t), e = Math.abs(e) - t, Math.max(0, (0, n.A)(e) - (0, n.A)(t)) + 1;}}, 9512: (t, e, i) => {"use strict";i.d(e, { MJ: () => n, Pv: () => T, iw: () => s, yD: () => r });var n,r,s,o = i(2056),a = i(7641),l = i(8862),c = i(3761),h = i(1807),u = i(5367),d = i(5457),p = i(8443),f = i(309),g = i(100),m = i(7077),v = i(3914),y = i(2755),b = i(3895),w = i(7107),x = i(5888),S = i(7735),E = i(3571),C = i(7345),k = i(8174);!function (t) {t[t.Default = 0] = "Default", t[t.Matching = 2] = "Matching";}(n || (n = {})), function (t) {t.General = "general-area", t.DrillTo = "drill-to";}(r || (r = {})), function (t) {t.Empty = "(None)", t.Unbound = "okviz-unbound", t.Auto = "okviz-auto-bind";}(s || (s = {}));class T extends a._ {minZoom = 1;maxZoom = 100;controlMode = v.Z.Select;jsvg;userModified = !1;mapLocation;msgBox;currentZoom = 1;topBar;footerBar;zoomToolbar = {};controlsToolbar = {};mapSelectorDropdown;svgMap;navTree;navTreeContainer;areaInfo;dataPointSelector;autoOption;unboundOption;saveBtn;saveAndCloseBtn;inputLabelSelectedArea;colorMode;editorContainer;previewContainer;mapContainer;editMapELementArea;noSelectionPlaceholder;menu;typeSelector;tabs;selectedJsvgArea;bindingSection;sectionContainer;get isZoomed() {return this.currentZoom && this.currentZoom > this.minZoom;}get isAutoPanMode() {return this.options.autoPanMode;}get displayMaps() {return this.mapsManager.getDisplayMaps(this.drillPathId);}constructor(t, e) {super(t, e), this.colorMode = this.options.sessionSettings.mapEditorColorMode;}draw() {this.initViewContent(), this.initMap(), this.addMapSelector();}initViewContent() {this.viewContainer.classList.add("flex", "column"), this.drawTopBar(), this.drawMainContent(), this.drawFooterBar(), this.drawSvgEditorButton(), this.drawToolBar();}drawTopBar() {(0, h.tTh)(".header-bar", this.viewContainer, { middleware: (t) => {this.topBar = t;} });const t = this.options.map,e = (0, h.tTh)(".start", this.topBar);(0, h.tTh)(".synoptic-btn.white.border", e, { events: { click: (t) => {t.preventDefault(), this.userModified ? this.showMsgBoxSaveChanges(() => this.goBackToAddView()) : this.goBackToAddView();} } }, [(0, h.tTh)(".group.white.small.border.ctrl", [(0, h.tTh)(".icon.icon-left.small"), (0, h.tTh)("span.text.small", "Maps")])]);const i = t.location === b.k.Local ? ".icon-map" : t.location === b.k.MyStorage ? ".icon-okviz-map" : ".icon-remote-map";(0, h.tTh)(".map-title-container", e, [(0, h.tTh)(`.icon${i}.big`), (0, h.tTh)(".title", t.name)]);const n = (0, h.tTh)(".end", this.topBar);(0, h.tTh)(".synoptic-btn.white.ctrl", n, { events: { click: (t) => {t.preventDefault(), this.showMsgBoxEditMeta();} } }, [(0, h.tTh)(".group.white.small.border", [(0, h.tTh)(".icon.icon-edit.small"), (0, h.tTh)("span.text.small", "Metadata")])]), (0, h.tTh)(".synoptic-btn.white.ctrl", n, { events: { click: (t) => {t.preventDefault(), this.showExportContextMenu(t);} } }, [(0, h.tTh)(".group.white.small.border", [(0, h.tTh)(".icon.icon-download.small"), (0, h.tTh)("span.text.small", "Export")])]);}showExportContextMenu(t) {h.tzH.Init("export-context-menu", { sticky: t.currentTarget, items: [{ label: "Export to", type: h.KGh.Header }, { label: "Map (XML/SVG)", checkable: !1, className: "small-text-contextual-menu-item", onClick: () => this.exportSvg() }, { label: "Map with Binding (JSON)", checkable: !1, className: "small-text-contextual-menu-item", onClick: () => this.exportJsvg() }] }).show(t);}drawMainContent() {this.editorContainer = (0, h.tTh)(".edit-map-container.editor-panes", this.viewContainer, [(0, h.tTh)(".edit-map-preview.pane", { middleware: (t) => this.previewContainer = t }, [(0, h.tTh)(".preview-container", [(0, h.tTh)(".edit-svg-container.zoomable.center.highlight-on-hover", { middleware: (t) => this.mapContainer = t })])]), (0, h.tTh)(".panes-gutter"), (0, h.tTh)(".edit-map-elements.pane", [(0, h.tTh)(".user-select-map-elements.svg-tree-container", { middleware: (t) => this.navTreeContainer = t }), (0, h.tTh)(".user-edit-map-elements.edit-map-element-area", { middleware: (t) => this.editMapELementArea = t })])]), this.showNoSelectionPlaceholder(), (0, x.A)({ columnGutters: [{ track: 1, element: this.editorContainer.querySelector(".panes-gutter") }], columnMinSize: 200 });}createAreaInfo() {if (!this.selectedJsvgArea) return;this.noSelectionPlaceholder && this.noSelectionPlaceholder.remove(), this.areaInfo && this.areaInfo.remove();const t = this.selectedJsvgArea.type ?? u.wR.Area,e = this.svgMap.selectedNode.mapElement.tagName.toLowerCase();(0, h.tTh)(".edit-element-container", this.editMapELementArea, { middleware: (t) => this.areaInfo = t }, [(0, h.tTh)(".element-info", [(0, h.tTh)(`.${this.getAreaIcon(e)}.icon`, { style: { fontWeight: "600 !important" }, attr: { title: "g" === e ? "group" : e } }), (0, h.tTh)(".id", (0, y.eJ)(this.svgMap.selectedNode.mapElement)), (0, h.tTh)("select.type-selector", { middleware: (t) => this.typeSelector = t, events: { change: (t) => {this.selectedJsvgArea.type = t.target.value, this.selectedJsvgArea.type !== u.wR.Area && this.svgMap.selectedNode.mapElement.setAttribute(u.Lc.AreaType, this.selectedJsvgArea.type), this.change(), this.svgMap.updateSelectedArea(), this.navTree.updateSelectedNode(), this.createSection();} } }, [(0, h.tTh)("option", { attr: { value: u.wR.Area, selected: t === u.wR.Area } }, "Area"), (0, h.tTh)("option", { attr: { value: u.wR.Link, selected: t === u.wR.Link } }, "Link")])])]), this.createSection();}getAreaIcon(t) {const e = "icon-svg-";return t ? "g" === t ? e + "group" : ["circle", "ellipse", "line", "path", "polygon", "polyline", "rect", "text"].includes(t) ? e + t : e + "path" : e + "path";}createSection() {this.tabs && this.tabs.destroy(), this.menu && this.menu.remove(), (0, h.tTh)(".section-menu", this.areaInfo, { middleware: (t) => this.menu = t }), this.sectionContainer && this.sectionContainer.remove(), (0, h.tTh)(".section-container", this.areaInfo, { middleware: (t) => this.sectionContainer = t });const t = this.selectedJsvgArea.type ?? u.wR.Area;t === u.wR.Area ? (this.createAreaTypeMenu(), this.createAreaGeneralSection()) : t === u.wR.Link && (this.createLinkTypeMenu(), this.createLinkSection());}createAreaTypeMenu() {this.selectedJsvgArea && (this.tabs = new S.t(this.menu, [{ id: r.General, label: "General" }, { id: r.DrillTo, label: "Drill To" }]), this.tabs.on("tabSelected", (t) => {this.emptySectionContainer(), t === r.General ? this.createAreaGeneralSection() : this.createAreaDrillToSection();}));}emptySectionContainer() {if (this.sectionContainer) for (; this.sectionContainer.firstChild;) this.sectionContainer.removeChild(this.sectionContainer.firstChild);}createAreaGeneralSection() {this.bindingSection && this.bindingSection.remove(), this.bindingSection = (0, h.tTh)(".binding-section", this.sectionContainer), this.addAreaDataPointSelect(), this.addAreaTitleInput(), this.updateBindingArea();}createAreaDrillToSection() {(0, h.tTh)(".drill-to-section", this.sectionContainer, [(0, h.tTh)("input.input", { attr: { type: "text", placeholder: "https://", value: this.selectedJsvgArea.drillTo || "" }, events: { input: (t) => {t.target.value.trim() ? this.selectedJsvgArea.drillTo = t.target.value : delete this.selectedJsvgArea.drillTo, this.change();} } }), (0, h.tTh)(".description", "Insert the URL of a map that must be loaded when the user drill down on this area.")]);}createLinkSection() {this.selectedJsvgArea && (this.selectedJsvgArea.linkTo ? this.createLintToWebSection() : this.createLinkToMapSection());}createLintToWebSection() {this.selectedJsvgArea.linkToMap && delete this.selectedJsvgArea.linkToMap, (0, h.tTh)(".link-to-web-section", this.sectionContainer, [(0, h.tTh)("input.input", { attr: { type: "text", placeholder: "https://", value: this.selectedJsvgArea.linkTo || "" }, events: { input: (t) => {t.target.value.trim() ? this.selectedJsvgArea.linkTo = t.target.value : delete this.selectedJsvgArea.linkTo, this.change();} } }), (0, h.tTh)(".description", "Clicking on this area will bring the user to the provided external URL.")]);}createLinkToMapSection() {this.selectedJsvgArea.linkTo && delete this.selectedJsvgArea.linkTo;const t = (0, h.tTh)(".link-to-map-section", this.sectionContainer),e = (0, h.tTh)("select.link-to-map-selector.spaced", t);this.displayMaps && (e.appendChild((0, h.tTh)("option", { attr: { value: "", selected: !this.selectedJsvgArea.linkToMap } }, "(Select a Map)")), this.displayMaps.forEach((t) => {t.id !== this.jsvg.id && e.appendChild((0, h.tTh)("option", { attr: { value: t.id, selected: t.id === this.selectedJsvgArea.linkToMap } }, t.name));})), e.addEventListener("change", () => {"" === e.value ? delete this.selectedJsvgArea.linkToMap : this.selectedJsvgArea.linkToMap = e.value, this.change();}), (0, h.tTh)(".description", this.sectionContainer, "Clicking on this area will bring the user to the selected map.");}createLinkTypeMenu() {const t = !!this.selectedJsvgArea.linkTo,e = (t) => {this.emptySectionContainer(), "map" === t ? this.createLinkToMapSection() : this.createLintToWebSection(), this.change();};(0, h.Wx1)(".link-type", this.menu, { list: [{ value: "map", text: "Switch to Map", selected: !t }, { value: "web", text: "Go to URL", selected: t }], change: (t, i) => e(i) });}drawFooterBar() {const t = this.options.map.protection !== g.Qn.None;this.footerBar && this.footerBar.remove(), (0, h.tTh)(".footer-bar", this.viewContainer, { middleware: (t) => this.footerBar = t }, [...(t ? [(0, h.tTh)(".banner.error", this.footerBar, [(0, h.tTh)(".icon.icon-lock"), (0, h.tTh)("span", "This map is protected. You can use it, but need password to save changes.")])] : []), (0, h.tTh)(".btn-box.end", [(0, h.tTh)(".synoptic-btn" + (this.userModified ? "" : ".disabled"), { middleware: (t) => this.saveBtn = t, events: { click: async () => {this.userModified && (this.mapLocation === b.k.MyStorage ? this.showMsgBoxSaveMyStorageMap(() => this.goBackToAddView()) : (await this.saveMap(), this.goBackToAddView()));} } }, [(0, h.tTh)(".group.small.ctrl", [(0, h.tTh)(".icon.icon-left.small"), (0, h.tTh)("span.text.small", "Save & Back")])]), (0, h.tTh)(".synoptic-btn" + (this.userModified ? "" : ".disabled"), { middleware: (t) => this.saveAndCloseBtn = t, events: { click: async () => {this.userModified && (this.mapLocation === b.k.MyStorage ? this.showMsgBoxSaveMyStorageMap(() => this.parent.closeDialog()) : (await this.saveMap(), this.parent.closeDialog()));} } }, [(0, h.tTh)(".group.small.ctrl", [(0, h.tTh)("span.text.small", "Save & Close")])]), (0, h.tTh)(".synoptic-btn", { events: { click: () => {this.userModified ? this.showMsgBoxSaveChanges(() => this.parent.closeDialog()) : this.parent.closeDialog();} } }, [(0, h.tTh)(".group.small.white.border.ctrl", [(0, h.tTh)("span.text.small", "Close")])])])]);}drawSvgEditorButton() {const t = this.options.map.location !== b.k.Local && this.options.map.location !== b.k.MyStorage;(0, h.tTh)(".edit-svg-btn.synoptic-btn.ctrl", this.previewContainer, { attr: { disabled: t ? "true" : void 0 }, events: { click: (t) => {t.preventDefault(), new w.g({ element: document.body, title: `Edit ${this.options.map.name}`, svg: this.svgMap.serializedSvg, onSave: (t) => this.changeMapSvg(t) }).draw();} } }, [(0, h.tTh)(".group.white.small.edit", [(0, h.tTh)(".icon.icon-edit.small"), (0, h.tTh)("span.text.small", "SVG")])]);}drawToolBar() {const t = (0, h.tTh)(".toolbar.show-on-hover.bottom.left.pinned", this.previewContainer, { style: { position: "absolute", bottom: "5px", left: "5px" } }, [(0, h.tTh)(".group.zoom", { style: { backgroundColor: "#fff", color: "#000" } }, [(0, h.tTh)(".icon.icon-minus.disabled.default", { attr: { title: "Reduce Zoom" }, middleware: (t) => this.zoomToolbar.minus = t, events: { click: (t) => {t.preventDefault(), this.svgMap?.zoomer.zoomOut();} } }), (0, h.tTh)("span.zoom-state", { attr: { title: `Zoom: ${Math.round(100 * this.currentZoom)}%` }, middleware: (t) => this.zoomToolbar.percentage = t }, `${Math.round(100 * this.currentZoom)}%`), (0, h.tTh)(".icon.icon-plus.default", { attr: { title: "Increase Zoom" }, middleware: (t) => this.zoomToolbar.plus = t, events: { click: (t) => {t.preventDefault(), this.svgMap?.zoomer.zoomIn();} } }), (0, h.tTh)(".icon.icon-actual-size.big.default", { attr: { title: "Reset Zoom and Center" }, middleware: (t) => this.zoomToolbar.reset = t, events: { click: (t) => {t.preventDefault(), this.svgMap?.zoomer.resetZoom();} } })])]),e = (0, h.tTh)(".group.circle", { style: { backgroundColor: "#fff", color: "#000" }, attr: { title: `${this.colorModeTitle(this.colorMode)} Colors` }, middleware: (t) => this.controlsToolbar.colors = t, events: { click: (t) => {t.preventDefault(), this.showColorModeContextMenu(t);} } }, [(0, h.tTh)(".circle" + (this.isAutoPanMode ? "" : ".spaced"), { data: { color: this.colorMode } })]);this.isAutoPanMode || ((0, h.tTh)(".icon.icon-tool-pointer.selected.default", e, { attr: { title: "Select Area" }, middleware: (t) => this.controlsToolbar.select = t, events: { click: (t) => {t.preventDefault(), this.changeControlMode(v.Z.Select);} } }), (0, h.tTh)(".icon.icon-tool-hand.disabled.default", e, { attr: { title: "Drag Map" }, middleware: (t) => this.controlsToolbar.pan = t, events: { click: (t) => {t.preventDefault(), this.changeControlMode(v.Z.Pan);} } }), (0, h.tTh)("span.divider")), t.appendChild(e);}showColorModeContextMenu(t) {h.tzH.Init("color-mode--context-menu", { width: "auto", sticky: t.currentTarget, items: [{ type: h.KGh.Header, label: "Map Colors" }, { label: this.colorModeTitle(n.Matching), type: h.KGh.Radio, checked: this.colorMode == n.Matching, className: "small-text-contextual-menu-item", onClick: () => this.changeMapColorMode(n.Matching) }, { label: this.colorModeTitle(n.Default), type: h.KGh.Radio, checked: this.colorMode == n.Default, className: "small-text-contextual-menu-item", onClick: () => this.changeMapColorMode(n.Default) }] }).show(t);}changeMapColorMode(t) {this.colorMode = t, this.controlsToolbar.colors.firstElementChild.dataset.color = t.toString(), this.controlsToolbar.colors.title = `${this.colorModeTitle(t)} Colors`, t === n.Matching ? this.svgMap.map.classList.add("matching-color", "edit-matching-color") : t === n.Default && this.svgMap.map.classList.remove("matching-color", "edit-matching-color"), this.options.sessionSettings.mapEditorColorMode = t, this.parent.setDialogResult();}colorModeTitle(t) {return t === n.Matching ? "Matching" : "Original";}changeControlMode(t) {this.controlsToolbar && !this.isAutoPanMode && (this.isZoomed || t !== v.Z.Pan) && (this.controlMode = t, this.controlsToolbar.select.classList.toggle("selected", t === v.Z.Select), this.controlsToolbar.pan.classList.toggle("selected", t === v.Z.Pan), this.svgMap?.zoomer?.togglePanMode(t === v.Z.Pan));}togglePanningIcon() {this.controlsToolbar && this.currentZoom && !this.isAutoPanMode && (this.isZoomed || this.changeControlMode(v.Z.Select), this.controlsToolbar.pan.classList.toggle("disabled", !this.isZoomed));}updateZoomToolbar() {this.currentZoom && this.zoomToolbar && (this.zoomToolbar.minus.classList.toggle("disabled", !this.isZoomed), this.zoomToolbar.reset.classList.toggle("disabled", 1 == this.currentZoom), this.zoomToolbar.plus.classList.toggle("disabled", this.currentZoom >= this.maxZoom), this.zoomToolbar.percentage && (this.zoomToolbar.percentage.textContent = `${Math.round(100 * this.currentZoom)}%`));}addMapSelector() {if (!this.model.mapSelector && !this.jsvg.dataMapping.mapSelector) return;(0, h.tTh)(".map-selector", this.previewContainer, [(0, h.tTh)(".label", "Selector"), (0, h.tTh)("select.select", { middleware: (t) => {this.mapSelectorDropdown = t;}, events: { change: () => {this.handleMapSelectorChange();} } })]);const t = this.jsvg.dataMapping?.mapSelector,e = t && this.model.mapSelector?.values.includes(t);t && !e && (0, h.tTh)("option", this.mapSelectorDropdown, { attr: { selected: !0, value: this.jsvg.dataMapping.mapSelector } }, `${this.jsvg.dataMapping.mapSelector} (Not available)`);const i = (0, h.tTh)("option", this.mapSelectorDropdown, { attr: { selected: !t, value: s.Empty } }, s.Empty),n = this.model.mapSelector?.values?.map((e) => (0, h.tTh)("option", { attr: { selected: t && e == t } }, `${e}`)) ?? [];this.mapSelectorDropdown.add(i, 0), this.mapSelectorDropdown.append(...n);}addAreaDataPointSelect() {this.dataPointSelector = (0, h.tTh)("select.data-point-selector"), this.autoOption = (0, h.tTh)("option.auto", { attr: { selected: !0, value: s.Auto } }, "(Auto Bind)"), this.dataPointSelector.add(this.autoOption, 0), this.unboundOption = (0, h.tTh)("option.unbound", { attr: { selected: !1, value: s.Unbound } }, "(Do Not Bind)"), this.dataPointSelector.appendChild(this.unboundOption), this.model && this.model.dataPoints && Object.keys(this.model.index).sort(m._1).forEach((t) => {const e = this.model.index[t];this.dataPointSelector.appendChild((0, h.tTh)("option.data-point", { attr: { value: e.id } }, e.label2 || e.label));}), this.dataPointSelector.addEventListener("change", () => this.handleDataPointSelection()), (0, h.tTh)(".control-section", this.bindingSection, [(0, h.tTh)(".label", "Data Point"), this.dataPointSelector]);}addAreaTitleInput() {(0, h.tTh)(".control-section", this.bindingSection, [(0, h.tTh)(".label", "Title"), (0, h.tTh)("input.input", { middleware: (t) => this.inputLabelSelectedArea = t, events: { input: (t) => {t.preventDefault(), this.handleAreaLabelInput();} }, attr: { type: "text", placeholder: "(Auto)" } })]);}changeAutoOptDisplayText(t) {this.dataPointSelector && (this.autoOption.innerText = t ?? "(Auto Bind)");}changeUnboundOptDisplayText(t) {this.dataPointSelector && (this.unboundOption.innerText = t ?? "(Do Not Bind)");}resetDefaultDataPointSelectorOptions() {this.dataPointSelector && (this.dataPointSelector.classList.remove("strong-group-matched", "strong-group-unbound"), this.dataPointSelector.options[0].value !== s.Auto && this.dataPointSelector.options[0].remove(), this.changeAutoOptDisplayText(), this.changeUnboundOptDisplayText());}handleDataPointSelection() {if (!this.selectedJsvgArea) return;const t = this.dataPointSelector.value === s.Unbound,e = this.dataPointSelector.value === s.Auto;this.selectedJsvgArea.label = this.inputLabelSelectedArea.value || void 0, e ? (delete this.selectedJsvgArea.strong, delete this.selectedJsvgArea.dataPoint) : t ? (this.selectedJsvgArea.strong = u.r2.Unmatch, delete this.selectedJsvgArea.dataPoint) : (this.selectedJsvgArea.strong = u.r2.Match, this.selectedJsvgArea.dataPoint = this.dataPointSelector.value), this.change(), this.svgMap.updateSelectedArea(), this.navTree.updateSelectedNode(), this.updateBindingArea();}showNoSelectionPlaceholder() {this.noSelectionPlaceholder?.remove(), this.areaInfo?.remove(), (0, h.tTh)(".no-selection-placeholder", this.editMapELementArea, { middleware: (t) => this.noSelectionPlaceholder = t }, "Select an area");}goBackToAddView() {this.parent.backToInitialView(this.options.viewType);}discardChanges() {this.result.unsavedJsvg?.jsvg.id == this.jsvg.id && (delete this.result.unsavedJsvg, this.parent.setDialogResult());}handleAreaLabelInput = () => {this.svgMap.selectedNode.mapElement && this.svgMap.selectedNode.mapElement.id && (this.selectedJsvgArea && (this.selectedJsvgArea.label = this.inputLabelSelectedArea.value), this.change());};initMap() {this.options.map && (this.jsvg = this.options.unsavedJsvg?.jsvg ?? structuredClone(this.options.map.jsvg), this.mapLocation = this.options.map.location, this.drawMapElements(), this.options.unsavedJsvg && this.change());}drawMapElements() {this.svgMap && this.svgMap.destroy(), this.navTree && this.navTree.destroy(), this.removeLoading(), this.svgMap = new d.F({ model: this.model, mapArea: this.mapContainer, jsvg: this.jsvg, context: "editor", zoomer: !0, zoomerConfig: { container: this.previewContainer.firstElementChild, minZoom: this.minZoom, maxZoom: this.maxZoom, panMode: this.controlMode === v.Z.Pan, autoPan: this.isAutoPanMode } }), this.svgMap.draw(), this.svgMap.on("zoom", (t) => {this.currentZoom = t.zoom, this.updateZoomToolbar(), this.togglePanningIcon();}), this.changeMapColorMode(this.colorMode), this.navTree = new p.C(this.navTreeContainer, this.jsvg.svg, this.svgMap.treeRootNode), this.navTree.create(), this.svgMap.on(f.u.Select, () => {this.navTree.selectNode(this.svgMap.selectedNode), this.selectedJsvgArea = this.jsvg?.dataMapping?.areas[this.svgMap.selectedNode.mapElement.id] ?? null, this.createAreaInfo();}), this.svgMap.on(f.u.Reset, () => {this.navTree.resetSelection(), this.selectedJsvgArea = null, this.showNoSelectionPlaceholder();}), this.navTree.on(f.u.Select, () => {this.svgMap.selectTreeNode(this.navTree.selectedNode), this.selectedJsvgArea = this.jsvg?.dataMapping?.areas[this.svgMap.selectedNode.mapElement.id] ?? null, this.createAreaInfo();}), this.navTree.on(f.u.Reset, () => {this.svgMap.reset(), this.selectedJsvgArea = null, this.showNoSelectionPlaceholder();}), this.updateZoomToolbar();}updateBindingArea() {if (this.resetDefaultDataPointSelectorOptions(), this.resetTabsMenu(), (0, m.U4)(this.svgMap.selectedNode.mapElement)) {const t = this.svgMap.selectedNode.mapElement.getAttribute(u.Lc.Strong);return this.autoOption.selected = !0, this.changeAutoOptDisplayText(`${t} (Inherited)`), void this.dataPointSelector.classList.add("strong-group-matched");}if ((0, m.dR)(this.svgMap.selectedNode.mapElement)) return this.unboundOption.selected = !0, this.changeUnboundOptDisplayText("(Do Not Bind - Inherited)"), this.dataPointSelector.classList.add("strong-group-unbound"), this.dataPointSelector.disabled = !0, this.typeSelector.disabled = !0, void this.tabs.disable([r.DrillTo], r.General);if (!this.selectedJsvgArea) return;const t = this.selectedJsvgArea.strong === u.r2.Unmatch;if (this.selectedJsvgArea.strong === u.r2.Match) {let t = !1;const e = this.selectedJsvgArea.dataPoint;for (let i = 0; i < this.dataPointSelector.options.length; i++) {const n = this.dataPointSelector.options[i];if (n.value === e) {n.selected = !0, t = !0;break;}}if (!t) {const t = (0, h.tTh)("option", { attr: { value: e, selected: !0 } }, `${e} (Not available)`);this.dataPointSelector.add(t, 0);}this.inputLabelSelectedArea.value = this.selectedJsvgArea.label ?? "";} else this.inputLabelSelectedArea.value = this.selectedJsvgArea?.label || null, this.dataPointSelector.selectedIndex = t ? 1 : 0;t ? this.tabs.disable([r.DrillTo], r.General) : this.tabs.enable([r.DrillTo]);}resetTabsMenu() {this.tabs && (this.tabs.show("all"), this.tabs.enable("all"));}async saveMap() {this.showLoading(), await (0, h.ukR)(500), (await this.mapsManager.updateMap(this.jsvg, this.jsvg.id, this.drillPathId)) && (this.result.unsavedJsvg?.jsvg.id == this.jsvg.id && delete this.result.unsavedJsvg, this.mapsManager.clearSearchIndex(), this.parent.setDialogResult()), this.saveBtn?.classList.add("disabled"), this.saveAndCloseBtn?.classList.add("disabled"), this.userModified = !1;}async changeMapSvg(t) {this.showLoading(), await (0, h.ukR)(500);try {this.jsvg = await this.mapsManager.jsvgGenerator.createFromString({ source: this.jsvg.source, id: this.jsvg.id, name: this.jsvg.name, content: t, sanitize: !0, existingJsvg: this.jsvg }), this.change(), this.drawMapElements();} catch (t) {const e = new E.z({ error: t }),i = await e.render();"link" == i.type && this.parent.launchUrl(i.url);}}change() {this.result.unsavedJsvg = { jsvg: this.jsvg, location: this.mapLocation }, this.parent.setDialogResult(), this.userModified = !0, this.saveBtn.classList.remove("disabled"), this.saveAndCloseBtn.classList.remove("disabled");}exportIdsList() {const t = (0, m.JT)(this.jsvg, ["id", "label", "dataPoint", "strong"]);this.parent.exportFile({ name: `${this.jsvg.name}.csv`, type: "csv", content: t, description: "All ids list" });}exportJsvg() {this.parent.exportFile({ name: `${this.jsvg.name}.json`, type: "json", content: JSON.stringify(this.jsvg, null, 2), description: "JSVG file" });}exportSvg() {this.parent.exportFile({ name: `${this.jsvg.name}.xml`, type: "application/xml", content: this.jsvg.svg, description: "SVG file" });}async showMsgBoxSaveMyStorageMap(t) {this.msgBox && this.msgBox.destroy();const e = { mapName: this.options.map.name, protected: this.options.map.protection !== g.Qn.None, element: this.options.container, buttons: [{ text: "Save", id: o.n, validationCallback: async (e) => {const i = await this.saveMyStorageMap(e);return t && i.valid && !i.destroyOnInvalid && t(), i;} }, { text: "Cancel", action: "cancel" }] };this.msgBox = new o.D(e), await this.msgBox.draw();}async saveMyStorageMap(t) {let e = !1;try {return "local" === t.saveTo ? ((0, k.KN)(), await this.mapsManager?.addLocalMaps([this.jsvg], this.drillPathId), e = !0) : (this.showLoading(), e = await this.handleMyStorageMapUpdate(t)), e && (this.result.unsavedJsvg?.jsvg.id == this.jsvg.id && delete this.result.unsavedJsvg, this.mapsManager.clearSearchIndex(), this.parent.setDialogResult(), this.saveBtn.classList.add("disabled"), this.saveAndCloseBtn.classList.add("disabled"), this.userModified = !1), { valid: e };} catch (t) {const e = (0, C.T)(t);return "MS_NOT_ALLOWED" == e.key ? { valid: !1, message: "Invalid password." } : (this.raiseError(e), { valid: !1, destroyOnInvalid: !0 });} finally {this.removeLoading(), (0, k.hy)();}}async handleMyStorageMapUpdate(t) {try {return await this.mapsManager?.updateMap(this.jsvg, this.jsvg.id, this.drillPathId, t.password), !0;} catch (e) {const i = (0, C.T)(e);if ("MS_ETAG_MISMATCH" == i.key) {if ("cancel" === (await this.showMsgBoxEtagConflict()).action) return !0;{const e = await this.mapsManager.myStorage.getMapMetadata(this.jsvg.id);return this.mapsManager.findMapById(this.jsvg.id).map.eTag = e.eTag, await this.mapsManager.updateMap(this.jsvg, this.jsvg.id, this.drillPathId, t.password), !0;}}throw i;}}updateMetadata(t) {this.jsvg && (this.jsvg.meta.author = t.author ?? "", this.jsvg.meta.attribution = t.attribution ?? "", this.change());}handleMapSelectorChange() {this.mapSelectorDropdown && (this.mapSelectorDropdown.value === s.Empty ? this.jsvg.dataMapping.mapSelector = null : this.jsvg.dataMapping.mapSelector = this.mapSelectorDropdown.value, this.change());}showMsgBoxSaveChanges(t) {const e = { element: this.options.container, title: "Save Changes", description: "This map has some unsaved changes. Before continuing, do you want to save or discard them?", buttons: [{ text: "Save", callback: async () => {this.mapLocation === b.k.MyStorage ? await this.showMsgBoxSaveMyStorageMap(() => t()) : (await this.saveMap(), t());} }, { text: "Discard Changes", callback: () => {this.discardChanges(), t();}, action: "cancel" }] };this.showMsgBoxConfirm(e);}showMsgBoxEtagConflict() {this.msgBox && this.msgBox.destroy();const t = { element: this.options.container, title: "Map Conflict", hideCloseButton: !0, description: "The map has been modified by another user. Select an action to resolve the conflict.", buttons: [{ text: "Discard My Changes", action: "cancel" }, { text: "Overwrite Map" }] };return this.msgBox = new l.V(t), this.msgBox.draw();}showMsgBoxEditMeta() {this.msgBox && this.msgBox.destroy();const t = { element: this.options.container, author: this.jsvg.meta.author, attribution: this.jsvg.meta.attribution, title: "Edit Map Metadata", description: "Update map additional information.", protected: !1, buttons: [{ text: "Update", callback: (t) => this.updateMetadata(t) }, { text: "Cancel", action: "cancel" }] };this.msgBox = new c.K(t), this.msgBox.draw();}showMsgBoxConfirm(t) {this.msgBox && this.msgBox.destroy(), this.msgBox = new l.V(t), this.msgBox.draw();}}}, 9589: (t, e, i) => {"use strict";const n = i(9718),r = i(6874),s = i(3908),o = i(1123),a = i(144),l = i(6953),c = i(7414),h = i(3007),u = i(1832),d = i(2938),p = i(6254),f = i(4493),g = i(1729),m = i(560),v = i(9970),y = i(1763),b = i(909),w = i(3927),x = i(4277),S = i(5580),E = i(7059),C = i(4641),k = i(3999),T = i(4089),A = i(5200),M = i(2111),_ = i(6170),P = i(3904),D = i(8311),O = i(7638),I = i(7631),F = i(9628),R = i(270),L = i(1261),N = i(3874),V = i(7075),B = i(5571),j = i(5342),z = i(6780),U = i(2525),H = i(5032);t.exports = { parse: a, valid: l, clean: c, inc: h, diff: u, major: d, minor: p, patch: f, prerelease: g, compare: m, rcompare: v, compareLoose: y, compareBuild: b, sort: w, rsort: x, gt: S, lt: E, eq: C, neq: k, gte: T, lte: A, cmp: M, coerce: _, Comparator: P, Range: D, satisfies: O, toComparators: I, maxSatisfying: F, minSatisfying: R, minVersion: L, validRange: N, outside: V, gtr: B, ltr: j, intersects: z, simplifyRange: U, subset: H, SemVer: s, re: n.re, src: n.src, tokens: n.t, SEMVER_SPEC_VERSION: r.SEMVER_SPEC_VERSION, RELEASE_TYPES: r.RELEASE_TYPES, compareIdentifiers: o.compareIdentifiers, rcompareIdentifiers: o.rcompareIdentifiers };}, 9605: (t, e, i) => {"use strict";i.d(e, { OK: () => c, ap: () => h, c4: () => l, qg: () => u, uK: () => o, yV: () => a });var n = i(7728),r = i(4338),s = function () {return s = Object.assign || function (t) {for (var e, i = 1, n = arguments.length; i < n; i++) for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);return t;}, s.apply(this, arguments);};function o() {return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];}function a(t, e) {return void 0 === e && (e = 0), h(u(t, e));}function l(t, e) {var i = (0, r.Di)(t, [e[0], e[1] || 0, e[2] || 0, 1], 4),n = i[3] || 1;return [i[0] / n, i[1] / n, i[2] / n];}function c(t, e) {void 0 === e && (e = document.body);for (var i = t, n = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]; i;) {var s = getComputedStyle(i).transform;if (n = (0, r.n_)(a(s), n), i === e) break;i = i.parentElement;}return (n = (0, r.B8)(n, 4))[12] = 0, n[13] = 0, n[14] = 0, n;}function h(t) {var e = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];return t.forEach(function (t) {var i = t.matrixFunction,n = t.functionValue;i && (e = i(e, n));}), e;}function u(t, e) {return void 0 === e && (e = 0), ((0, n.cy)(t) ? t : (0, n.Z3)(t)).map(function (t) {var i = (0, n.ft)(t),o = i.prefix,a = i.value,l = null,c = o,h = "";if ("translate" === o || "translateX" === o || "translate3d" === o) {var u = (0, n.Gv)(e) ? s(s({}, e), { "o%": e["%"] }) : { "%": e, "o%": e },d = (0, n.cM)(a).map(function (t, i) {return u["%"] = 0 === i && "x%" in u ? e["x%"] : 1 === i && "y%" in u ? e["y%"] : e["o%"], (0, n.jc)(t, u);}),p = d[0],f = d[1],g = void 0 === f ? 0 : f,m = d[2],v = void 0 === m ? 0 : m;l = r.iv, h = [p, g, v];} else if ("translateY" === o) {var y = (0, n.Gv)(e) ? s({ "%": e["y%"] }, e) : { "%": e };g = (0, n.jc)(a, y), l = r.iv, h = [0, g, 0];} else if ("translateZ" === o) v = parseFloat(a), l = r.iv, h = [0, 0, v];else if ("scale" === o || "scale3d" === o) {var b = (0, n.cM)(a).map(function (t) {return parseFloat(t);}),w = b[0],x = b[1],S = void 0 === x ? w : x,E = b[2],C = void 0 === E ? 1 : E;l = r.YO, h = [w, S, C];} else if ("scaleX" === o) w = parseFloat(a), l = r.YO, h = [w, 1, 1];else if ("scaleY" === o) S = parseFloat(a), l = r.YO, h = [1, S, 1];else if ("scaleZ" === o) C = parseFloat(a), l = r.YO, h = [1, 1, C];else if ("rotate" === o || "rotateZ" === o || "rotateX" === o || "rotateY" === o) {var k = (0, n.hg)(a),T = k.unit,A = k.value,M = "rad" === T ? A : A * Math.PI / 180;"rotate" === o || "rotateZ" === o ? (c = "rotateZ", l = r.Zt) : "rotateX" === o ? l = r.pE : "rotateY" === o && (l = r.qh), h = M;} else if ("matrix3d" === o) l = r.n_, h = (0, n.cM)(a).map(function (t) {return parseFloat(t);});else if ("matrix" === o) {var _ = (0, n.cM)(a).map(function (t) {return parseFloat(t);});l = r.n_, h = [_[0], _[1], 0, 0, _[2], _[3], 0, 0, 0, 0, 1, 0, _[4], _[5], 0, 1];} else c = "";return { name: o, functionName: c, value: a, matrixFunction: l, functionValue: h };});}}, 9628: (t, e, i) => {"use strict";const n = i(3908),r = i(8311);t.exports = (t, e, i) => {let s = null,o = null,a = null;try {a = new r(e, i);} catch (t) {return null;}return t.forEach((t) => {a.test(t) && (s && -1 !== o.compare(t) || (s = t, o = new n(s, i)));}), s;};}, 9713: (t, e, i) => {"use strict";i.d(e, { A: () => o });var n = i(1882),r = i(5478),s = i(747);function o(t) {t = "function" == typeof t ? function (t) {return function () {return (0, r.A)(t.apply(this, arguments));};}(t) : (0, s.A)(t);for (var e = this._groups, i = e.length, o = [], a = [], l = 0; l < i; ++l) for (var c, h = e[l], u = h.length, d = 0; d < u; ++d) (c = h[d]) && (o.push(t.call(c, c.__data__, d, h)), a.push(c));return new n.LN(o, a);}}, 9715: (t, e, i) => {"use strict";i.d(e, { A: () => c, U: () => l });var n = function () {function t() {this.keys = [], this.values = [];}var e = t.prototype;return e.get = function (t) {return this.values[this.keys.indexOf(t)];}, e.set = function (t, e) {var i = this.keys,n = this.values,r = i.indexOf(t),s = -1 === r ? i.length : r;i[s] = t, n[s] = e;}, t;}(),r = function () {function t() {this.object = {};}var e = t.prototype;return e.get = function (t) {return this.object[t];}, e.set = function (t, e) {this.object[t] = e;}, t;}(),s = "function" == typeof Map,o = function () {function t() {}var e = t.prototype;return e.connect = function (t, e) {this.prev = t, this.next = e, t && (t.next = this), e && (e.prev = this);}, e.disconnect = function () {var t = this.prev,e = this.next;t && (t.next = e), e && (e.prev = t);}, e.getIndex = function () {for (var t = this, e = -1; t;) t = t.prev, ++e;return e;}, t;}(),a = function () {function t(t, e, i, n, r, s, o, a) {this.prevList = t, this.list = e, this.added = i, this.removed = n, this.changed = r, this.maintained = s, this.changedBeforeAdded = o, this.fixed = a;}var e = t.prototype;return Object.defineProperty(e, "ordered", { get: function () {return this.cacheOrdered || this.caculateOrdered(), this.cacheOrdered;}, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "pureChanged", { get: function () {return this.cachePureChanged || this.caculateOrdered(), this.cachePureChanged;}, enumerable: !0, configurable: !0 }), e.caculateOrdered = function () {var t = function (t, e) {var i = [],n = [];return t.forEach(function (t) {var e = t[0],r = t[1],s = new o();i[e] = s, n[r] = s;}), i.forEach(function (t, e) {t.connect(i[e - 1]);}), t.filter(function (t, i) {return !e[i];}).map(function (t, e) {var r = t[0],s = t[1];if (r === s) return [0, 0];var o = i[r],a = n[s - 1],l = o.getIndex();return o.disconnect(), a ? o.connect(a, a.next) : o.connect(void 0, i[0]), [l, o.getIndex()];});}(this.changedBeforeAdded, this.fixed),e = this.changed,i = [];this.cacheOrdered = t.filter(function (t, n) {var r = t[0],s = t[1],o = e[n],a = o[0],l = o[1];if (r !== s) return i.push([a, l]), !0;}), this.cachePureChanged = i;}, t;}();function l(t, e, i) {var o = s ? Map : i ? r : n,l = i || function (t) {return t;},c = [],h = [],u = [],d = t.map(l),p = e.map(l),f = new o(),g = new o(),m = [],v = [],y = {},b = [],w = 0,x = 0;return d.forEach(function (t, e) {f.set(t, e);}), p.forEach(function (t, e) {g.set(t, e);}), d.forEach(function (t, e) {var i = g.get(t);void 0 === i ? (++x, h.push(e)) : y[i] = x;}), p.forEach(function (t, e) {var i = f.get(t);void 0 === i ? (c.push(e), ++w) : (u.push([i, e]), x = y[e] || 0, m.push([i - x, e - w]), v.push(e === i), i !== e && b.push([i, e]));}), h.reverse(), new a(t, e, c, h, b, u, m, v);}const c = function () {function t(t, e) {void 0 === t && (t = []), this.findKeyCallback = e, this.list = [].slice.call(t);}return t.prototype.update = function (t) {var e = [].slice.call(t),i = l(this.list, e, this.findKeyCallback);return this.list = e, i;}, t;}();}, 9718: (t, e, i) => {"use strict";const { MAX_SAFE_COMPONENT_LENGTH: n, MAX_SAFE_BUILD_LENGTH: r, MAX_LENGTH: s } = i(6874),o = i(7272),a = (e = t.exports = {}).re = [],l = e.safeRe = [],c = e.src = [],h = e.safeSrc = [],u = e.t = {};let d = 0;const p = "[a-zA-Z0-9-]",f = [["\\s", 1], ["\\d", s], [p, r]],g = (t, e, i) => {const n = ((t) => {for (const [e, i] of f) t = t.split(`${e}*`).join(`${e}{0,${i}}`).split(`${e}+`).join(`${e}{1,${i}}`);return t;})(e),r = d++;o(t, r, e), u[t] = r, c[r] = e, h[r] = n, a[r] = new RegExp(e, i ? "g" : void 0), l[r] = new RegExp(n, i ? "g" : void 0);};g("NUMERICIDENTIFIER", "0|[1-9]\\d*"), g("NUMERICIDENTIFIERLOOSE", "\\d+"), g("NONNUMERICIDENTIFIER", `\\d*[a-zA-Z-]${p}*`), g("MAINVERSION", `(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`), g("MAINVERSIONLOOSE", `(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`), g("PRERELEASEIDENTIFIER", `(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`), g("PRERELEASEIDENTIFIERLOOSE", `(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`), g("PRERELEASE", `(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`), g("PRERELEASELOOSE", `(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`), g("BUILDIDENTIFIER", `${p}+`), g("BUILD", `(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`), g("FULLPLAIN", `v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`), g("FULL", `^${c[u.FULLPLAIN]}$`), g("LOOSEPLAIN", `[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`), g("LOOSE", `^${c[u.LOOSEPLAIN]}$`), g("GTLT", "((?:<|>)?=?)"), g("XRANGEIDENTIFIERLOOSE", `${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`), g("XRANGEIDENTIFIER", `${c[u.NUMERICIDENTIFIER]}|x|X|\\*`), g("XRANGEPLAIN", `[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`), g("XRANGEPLAINLOOSE", `[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`), g("XRANGE", `^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`), g("XRANGELOOSE", `^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`), g("COERCEPLAIN", `(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`), g("COERCE", `${c[u.COERCEPLAIN]}(?:$|[^\\d])`), g("COERCEFULL", c[u.COERCEPLAIN] + `(?:${c[u.PRERELEASE]})?` + `(?:${c[u.BUILD]})?(?:$|[^\\d])`), g("COERCERTL", c[u.COERCE], !0), g("COERCERTLFULL", c[u.COERCEFULL], !0), g("LONETILDE", "(?:~>?)"), g("TILDETRIM", `(\\s*)${c[u.LONETILDE]}\\s+`, !0), e.tildeTrimReplace = "$1~", g("TILDE", `^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`), g("TILDELOOSE", `^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`), g("LONECARET", "(?:\\^)"), g("CARETTRIM", `(\\s*)${c[u.LONECARET]}\\s+`, !0), e.caretTrimReplace = "$1^", g("CARET", `^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`), g("CARETLOOSE", `^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`), g("COMPARATORLOOSE", `^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`), g("COMPARATOR", `^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`), g("COMPARATORTRIM", `(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`, !0), e.comparatorTrimReplace = "$1$2$3", g("HYPHENRANGE", `^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`), g("HYPHENRANGELOOSE", `^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`), g("STAR", "(<|>)?=?\\s*\\*"), g("GTE0", "^\\s*>=\\s*0\\.0\\.0\\s*$"), g("GTE0PRE", "^\\s*>=\\s*0\\.0\\.0-0\\s*$");}, 9731: (t, e, i) => {"use strict";function n(t) {return function () {return t;};}i.d(e, { A: () => n });}, 9734: (t, e, i) => {"use strict";i.d(e, { A: () => s });var n = i(1882),r = i(6541);function s(t) {"function" != typeof t && (t = (0, r.A)(t));for (var e = this._groups, i = e.length, s = new Array(i), o = 0; o < i; ++o) for (var a, l = e[o], c = l.length, h = s[o] = [], u = 0; u < c; ++u) (a = l[u]) && t.call(a, a.__data__, u, l) && h.push(a);return new n.LN(s, this._parents);}}, 9754: (t, e, i) => {"use strict";i.d(e, { $n: () => u, Ap: () => g, Cx: () => w, D: () => h, Kx: () => o, PA: () => v, St: () => a, Tn: () => c, YJ: () => l, YS: () => S, iB: () => f, jF: () => d, ks: () => b, lp: () => y, lr: () => m, sk: () => p, tc: () => E, uI: () => x });var n = i(8639);class r {}class s extends r {}class o {}class a extends r {}class l extends s {constructor(t) {super(), Object.assign(this, null != t ? t : new Object({}));}}class c extends s {}class h extends r {constructor(t) {super(), Object.assign(this, t);}getFormattingSlice(t, e) {const i = this.type,r = this.name,s = { displayName: (0, n.Ld)(this, "displayName", e), description: (0, n.Ld)(this, "description", e), uid: t + "-" + r };return Object.assign(Object.assign({}, s), { control: { type: i, properties: this.getFormattingComponent(t, e) }, disabled: this.disabled, disabledReason: (0, n.Ld)(this, "disabledReason", e) });}getFormattingComponent(t, e) {let i = this.value;return (null == i ? void 0 : i.displayNameKey) && (i = { displayName: null == e ? void 0 : e.getDisplayName(i.displayNameKey), value: i.value }), { descriptor: n.yp(t, this), value: i };}getRevertToDefaultDescriptor(t) {return [{ objectName: t, propertyName: this.name }];}setPropertiesValues(t, e) {var i;const r = null === (i = null == t ? void 0 : t[e]) || void 0 === i ? void 0 : i[this.name];this.value = n.De(this, r, this.value);}}class u extends h {constructor(t) {super(t), this.type = "AlignmentGroup";}getFormattingComponent(t) {return Object.assign(Object.assign({}, super.getFormattingComponent(t)), { mode: this.mode, supportsNoSelection: this.supportsNoSelection });}}class d extends h {constructor(t) {super(t), this.type = "ToggleSwitch";}}class p extends h {constructor(t) {super(t), this.type = "ColorPicker";}getFormattingComponent(t) {return Object.assign(Object.assign({}, super.getFormattingComponent(t)), { defaultColor: this.defaultColor, isNoFillItemSupported: this.isNoFillItemSupported });}}class f extends h {constructor(t) {super(t), this.type = "NumUpDown";}getFormattingComponent(t) {return Object.assign(Object.assign({}, super.getFormattingComponent(t)), { options: this.options });}}class g extends f {constructor() {super(...arguments), this.type = "Slider";}}class m extends h {constructor(t) {super(t), this.type = "DatePicker";}getFormattingComponent(t, e) {return Object.assign(Object.assign({}, super.getFormattingComponent(t)), { placeholder: (0, n.Ld)(this, "placeholder", e), validators: this.validators });}}class v extends h {constructor(t) {super(t), this.type = "Dropdown";}getFormattingComponent(t, e) {return Object.assign(Object.assign({}, super.getFormattingComponent(t, e)), { items: this.getFormattingItems(e, this.items) });}getFormattingItems(t, e) {return e.map((e) => Object.assign(Object.assign({}, e), { displayName: (0, n.Ld)(e, "displayName", t) }));}setValue(t, e) {const i = this.getFormattingItems(e, this.items).find((e) => e.value === t);this.value = i || this.items[0];}}class y extends h {constructor(t) {super(t), this.type = "Dropdown";}getFormattingComponent(t, e) {return Object.assign(Object.assign({}, super.getFormattingComponent(t, e)), { mergeValues: this.getFormattingItems(e, this.mergeValues), filterValues: this.filterValues });}getFormattingItems(t, e) {return null == e ? void 0 : e.map((e) => Object.assign(Object.assign({}, e), { displayName: (0, n.Ld)(e, "displayName", t) }));}}class b extends h {constructor(t) {super(t), this.type = "TextInput";}getFormattingComponent(t) {return Object.assign(Object.assign({}, super.getFormattingComponent(t)), { placeholder: this.placeholder });}}class w extends h {constructor() {super(...arguments), this.type = "FontPicker";}}class x extends h {constructor() {super(...arguments), this.type = "ReadOnlyText";}}class S extends r {constructor(t) {super(), Object.assign(this, t);}getFormattingSlice(t, e) {const i = this.type,r = this.name,s = { displayName: (0, n.Ld)(this, "displayName", e), description: (0, n.Ld)(this, "description", e), uid: t + "-" + r };return Object.assign(Object.assign({}, s), { disabled: this.disabled, control: { type: i, properties: this.getFormattingComponent(t) } });}}class E extends S {constructor(t) {super(t), this.type = "FontControl";}getFormattingComponent(t) {var e, i, n;return { fontFamily: this.fontFamily.getFormattingComponent(t), fontSize: this.fontSize.getFormattingComponent(t), bold: null === (e = this.bold) || void 0 === e ? void 0 : e.getFormattingComponent(t), italic: null === (i = this.italic) || void 0 === i ? void 0 : i.getFormattingComponent(t), underline: null === (n = this.underline) || void 0 === n ? void 0 : n.getFormattingComponent(t) };}getRevertToDefaultDescriptor(t) {return this.fontFamily.getRevertToDefaultDescriptor(t).concat(this.fontSize.getRevertToDefaultDescriptor(t)).concat(this.bold ? this.bold.getRevertToDefaultDescriptor(t) : []).concat(this.italic ? this.italic.getRevertToDefaultDescriptor(t) : []).concat(this.underline ? this.underline.getRevertToDefaultDescriptor(t) : []);}setPropertiesValues(t, e) {var i, n, r;this.fontFamily.setPropertiesValues(t, e), this.fontSize.setPropertiesValues(t, e), null === (i = this.bold) || void 0 === i || i.setPropertiesValues(t, e), null === (n = this.italic) || void 0 === n || n.setPropertiesValues(t, e), null === (r = this.underline) || void 0 === r || r.setPropertiesValues(t, e);}}}, 9770: (t, e, i) => {"use strict";function n(t, e) {return t = +t, e = +e, function (i) {return Math.round(t * (1 - i) + e * i);};}i.d(e, { A: () => n });}, 9803: (t, e, i) => {"use strict";i.d(e, { A: () => c });var n = i(7493),r = i(9095),s = i(2222),o = i(9338),a = i(149);const l = (t) => t.toLowerCase().replace(/^application\//, ""),c = (t, e, i = {}) => {let c;try {c = JSON.parse(r.D0.decode(e));} catch {}if (!(0, a.A)(c)) throw new n.Dp("JWT Claims Set must be a top-level JSON object");const { typ: h } = i;if (h && ("string" != typeof t.typ || l(t.typ) !== l(h))) throw new n.ie('unexpected "typ" JWT header value', c, "typ", "check_failed");const { requiredClaims: u = [], issuer: d, subject: p, audience: f, maxTokenAge: g } = i,m = [...u];void 0 !== g && m.push("iat"), void 0 !== f && m.push("aud"), void 0 !== p && m.push("sub"), void 0 !== d && m.push("iss");for (const t of new Set(m.reverse())) if (!(t in c)) throw new n.ie(`missing required "${t}" claim`, c, t, "missing");if (d && !(Array.isArray(d) ? d : [d]).includes(c.iss)) throw new n.ie('unexpected "iss" claim value', c, "iss", "check_failed");if (p && c.sub !== p) throw new n.ie('unexpected "sub" claim value', c, "sub", "check_failed");if (f && (y = "string" == typeof f ? [f] : f, !("string" == typeof (v = c.aud) ? y.includes(v) : Array.isArray(v) && y.some(Set.prototype.has.bind(new Set(v)))))) throw new n.ie('unexpected "aud" claim value', c, "aud", "check_failed");var v, y;let b;switch (typeof i.clockTolerance) {case "string":b = (0, o.A)(i.clockTolerance);break;case "number":b = i.clockTolerance;break;case "undefined":b = 0;break;default:throw new TypeError("Invalid clockTolerance option type");}const { currentDate: w } = i,x = (0, s.A)(w || new Date());if ((void 0 !== c.iat || g) && "number" != typeof c.iat) throw new n.ie('"iat" claim must be a number', c, "iat", "invalid");if (void 0 !== c.nbf) {if ("number" != typeof c.nbf) throw new n.ie('"nbf" claim must be a number', c, "nbf", "invalid");if (c.nbf > x + b) throw new n.ie('"nbf" claim timestamp check failed', c, "nbf", "check_failed");}if (void 0 !== c.exp) {if ("number" != typeof c.exp) throw new n.ie('"exp" claim must be a number', c, "exp", "invalid");if (c.exp <= x - b) throw new n.n('"exp" claim timestamp check failed', c, "exp", "check_failed");}if (g) {const t = x - c.iat;if (t - b > ("number" == typeof g ? g : (0, o.A)(g))) throw new n.n('"iat" claim timestamp check failed (too far in the past)', c, "iat", "check_failed");if (t < 0 - b) throw new n.ie('"iat" claim timestamp check failed (it should be in the past)', c, "iat", "check_failed");}return c;};}, 9804: (t, e, i) => {"use strict";i.d(e, { A: () => r });var n = i(6160);function r(t) {var e = t.length;return function (i) {var r = Math.floor(((i %= 1) < 0 ? ++i : i) * e),s = t[(r + e - 1) % e],o = t[r % e],a = t[(r + 1) % e],l = t[(r + 2) % e];return (0, n.H)((i - r / e) * e, s, o, a, l);};}}, 9857: (t, e, i) => {"use strict";i.d(e, { A: () => o, _: () => a });var n = i(906),r = i(2216),s = i(1807);const o = "rename-ms-map-btn";class a extends n.g {nameInput;passwordInput;get validationCallbackData() {return { newName: this.nameValue, password: this.passwordValue };}get passwordValue() {return this.passwordInput?.value.trim();}get nameValue() {return this.nameInput?.value.trim();}constructor(t) {t.icon = "rename", t.title = "Rename Map", t.description = t.protected ? `Map "${t.mapName}" is protected. Enter existing password for this map to change its name` : `Enter a new name for "${t.mapName}" map.`, super(t);}updateButton() {const t = this.nameValue == this.config.mapName,e = this.config.protected && !this.passwordValue.length;this.toggleButton(o, t || e);}addNameInput() {(0, s.tTh)(".section-input", this.boxContent, [...(this.config.protected ? [(0, s.tTh)("label.label", { style: { maxWidth: "80px" } }, "New Name")] : []), (0, s.tTh)("input.max", { attr: { type: "text", placeholder: "New name", value: this.config.mapName ?? "" }, events: { input: () => this.updateButton() }, middleware: (t) => this.nameInput = t })]), setTimeout(() => this.nameInput.focus(), 250), this.nameInput.setSelectionRange(this.nameInput.value.length, this.nameInput.value.length);}addPasswordInput() {this.toggleButton(o, !0), this.passwordInput = (0, r.O)(this.boxContent, { label: "Password", labelMinWidth: "80px", placeholder: "Insert map password", visibilityToggle: !0, onInput: () => this.updateButton() }).querySelector("input");}draw() {return this.create(), this.boxContent.classList.add("gap", "margin-top"), this.addNameInput(), this.config.protected && (this.addPasswordInput(), this.addValidationErrorBox()), super.draw();}}}, 9874: (t, e, i) => {"use strict";i.d(e, { A: () => n });const n = (...t) => {const e = t.filter(Boolean);if (0 === e.length || 1 === e.length) return !0;let i;for (const t of e) {const e = Object.keys(t);if (i && 0 !== i.size) for (const t of e) {if (i.has(t)) return !1;i.add(t);} else i = new Set(e);}return !0;};}, 9902: (t, e, i) => {"use strict";i(7111);}, 9953: (t, e, i) => {"use strict";i.d(e, { KE: () => n.K, f9: () => r.ColorRulesEnumerator });var n = i(6648),r = i(4061);}, 9970: (t, e, i) => {"use strict";const n = i(560);t.exports = (t, e, i) => n(e, t, i);}, 9986: (t, e, i) => {"use strict";function n(t) {return t;}i.d(e, { A: () => n });} },s = {};function o(t) {var e = s[t];if (void 0 !== e) return e.exports;var i = s[t] = { exports: {} };return r[t].call(i.exports, i, i.exports, o), i.exports;}o.m = r, o.n = (t) => {var e = t && t.__esModule ? () => t.default : () => t;return o.d(e, { a: e }), e;}, e = Object.getPrototypeOf ? (t) => Object.getPrototypeOf(t) : (t) => t.__proto__, o.t = function (i, n) {if (1 & n && (i = this(i)), 8 & n) return i;if ("object" == typeof i && i) {if (4 & n && i.__esModule) return i;if (16 & n && "function" == typeof i.then) return i;}var r = Object.create(null);o.r(r);var s = {};t = t || [null, e({}), e([]), e(e)];for (var a = 2 & n && i; ("object" == typeof a || "function" == typeof a) && !~t.indexOf(a); a = e(a)) Object.getOwnPropertyNames(a).forEach((t) => s[t] = () => i[t]);return s.default = () => i, o.d(r, s), r;}, o.d = (t, e) => {for (var i in e) o.o(e, i) && !o.o(t, i) && Object.defineProperty(t, i, { enumerable: !0, get: e[i] });}, o.f = {}, o.e = (t) => Promise.all(Object.keys(o.f).reduce((e, i) => (o.f[i](t, e), e), [])), o.u = (t) => "" + t, o.miniCssF = (t) => {}, o.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e), i = {}, n = "synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6:", o.l = (t, e, r, s) => {if (i[t]) i[t].push(e);else {var a, l;if (void 0 !== r) for (var c = document.getElementsByTagName("script"), h = 0; h < c.length; h++) {var u = c[h];if (u.getAttribute("src") == t || u.getAttribute("data-webpack") == n + r) {a = u;break;}}a || (l = !0, (a = document.createElement("script")).charset = "utf-8", o.nc && a.setAttribute("nonce", o.nc), a.setAttribute("data-webpack", n + r), a.src = t), i[t] = [e];var d = (e, n) => {a.onerror = a.onload = null, clearTimeout(p);var r = i[t];if (delete i[t], a.parentNode && a.parentNode.removeChild(a), r && r.forEach((t) => t(n)), e) return e(n);},p = setTimeout(d.bind(null, void 0, { type: "timeout", target: a }), 12e4);a.onerror = d.bind(null, a.onerror), a.onload = d.bind(null, a.onload), l && document.head.appendChild(a);}}, o.r = (t) => {"undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 });}, o.p = "assets", (() => {var t = { 262: 0 };o.f.j = (e, i) => {var n = o.o(t, e) ? t[e] : void 0;if (0 !== n) if (n) i.push(n[2]);else {var r = new Promise((i, r) => n = t[e] = [i, r]);i.push(n[2] = r);var s = o.p + o.u(e),a = new Error();o.l(s, (i) => {if (o.o(t, e) && (0 !== (n = t[e]) && (t[e] = void 0), n)) {var r = i && ("load" === i.type ? "missing" : i.type),s = i && i.target && i.target.src;a.message = "Loading chunk " + e + " failed.\n(" + r + ": " + s + ")", a.name = "ChunkLoadError", a.type = r, a.request = s, n[1](a);}}, "chunk-" + e, e);}};var e = (e, i) => {var n,r,[s, a, l] = i,c = 0;if (s.some((e) => 0 !== t[e])) {for (n in a) o.o(a, n) && (o.m[n] = a[n]);l && l(o);}for (e && e(i); c < s.length; c++) r = s[c], o.o(t, r) && t[r] && t[r][0](), t[r] = 0;},i = self.webpackChunksynopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6 = self.webpackChunksynopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6 || [];i.forEach(e.bind(null, 0)), i.push = e.bind(null, i.push.bind(i));})();var a = {};(() => {"use strict";o.r(a), o.d(a, { default: () => n });var t = o(1848),e = window.powerbi,i = { name: "synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6", displayName: "Synoptic Panel Lite by OKVIZ", class: "Visual", apiVersion: "5.11.0", create: (e) => {if (t.b) return new t.b(e);throw "Visual instance not found";}, createModalDialog: (t, e, i) => {const n = globalThis.dialogRegistry;t in n && new n[t](e, i);}, custom: !0 };void 0 !== e && (e.visuals = e.visuals || {}, e.visuals.plugins = e.visuals.plugins || {}, e.visuals.plugins.synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6 = i);const n = i;})(), synopticPanelLiteByOKVIZ9D9A1ACC481B452E9EF8DF049888BAF6 = a;})();