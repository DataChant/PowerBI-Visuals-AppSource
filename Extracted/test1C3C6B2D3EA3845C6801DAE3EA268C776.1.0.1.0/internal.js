var test1C3C6B2D3EA3845C6801DAE3EA268C776;(()=>{"use strict";var e={217:(e,t,s)=>{s.d(t,{b:()=>r});class r{target;host;selectionManager;selectionId;measureValue=0;hedefValue=0;settings={headerText:"Hacim Performansı",currencySymbol:"₺",targetText:"Hedef",progressText:"Gerçekleşme",headerIcon:"1F4B0",targetIcon:"1F3AF",backgroundTheme:"blue",barTheme:"default-blue",headerColor:"turquoise-blue",targetBackgroundColor:"rgba(0, 184, 212, 0.2)",targetTextColor:"#003366",measureTextColor:"#003366"};constructor(e){this.target=e.element,this.host=e.host,this.selectionManager=this.host.createSelectionManager(),this.selectionId=this.host.createSelectionIdBuilder().withMeasure("default").createSelectionId(),this.target.addEventListener("contextmenu",this.handleContextMenu.bind(this))}handleContextMenu(e){e.preventDefault();const t=this.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;this.selectionManager.showContextMenu(this.selectionId,{x:s,y:r})}onContextMenuSelect(e){const t=e?.detail?.id;if(t)switch(t){case"refresh":this.refreshData();break;case"showDetails":this.showDetails();break;case"printReport":this.printReport()}}refreshData(){console.log("Veriler yenileniyor...")}showDetails(){const e=[{displayName:"Hacim (Volume)",value:this.measureValue.toString()},{displayName:"Hedef (Target)",value:this.hedefValue.toString()},{displayName:"Gerçekleşme Oranı (Achievement Rate)",value:`${(this.measureValue/this.hedefValue*100).toFixed(2)}%`}];this.host.tooltipService.show({dataItems:e,identities:[this.selectionId],coordinates:[10,10],isTouchEvent:!1})}printReport(){window.print()}enumerateObjectInstances(e){const t=e.objectName,s=[];switch(t){case"textSettings":s.push({objectName:t,properties:{headerText:this.settings.headerText,currencySymbol:this.settings.currencySymbol,targetText:this.settings.targetText,progressText:this.settings.progressText},selector:null});break;case"iconSettings":s.push({objectName:t,properties:{headerIcon:this.settings.headerIcon,targetIcon:this.settings.targetIcon},selector:null});break;case"colorSettings":s.push({objectName:t,properties:{backgroundTheme:this.settings.backgroundTheme,barTheme:this.settings.barTheme,headerColor:this.settings.headerColor,targetBackgroundColor:this.settings.targetBackgroundColor,targetTextColor:this.settings.targetTextColor,measureTextColor:this.settings.measureTextColor},selector:null})}return s}getUnicodeIcon(e){return e=e.replace(/^(U\+|0x)/i,""),String.fromCodePoint(parseInt(e,16))}clearData(){this.target&&(this.target.innerHTML="<p>No data available</p>")}calculateProgress(){return this.measureValue&&this.hedefValue?this.measureValue/this.hedefValue*100:0}animateBar(){const e=this.calculateProgress(),t=this.target.querySelector(".hedef-gerceklesme"),s=this.target.querySelector(".hedef-bar-text");let r=0;const i=()=>{r<e?(r+=2,r>e&&(r=e),t.style.width=`${r}%`,s.textContent=`${this.settings.progressText}: ${r.toFixed(1)}%`,requestAnimationFrame(i)):(t.style.width=`${e}%`,s.textContent=`${this.settings.progressText}: ${e.toFixed(1)}%`)};requestAnimationFrame(i)}update(e){if(e.dataViews&&e.dataViews[0]){const t=e.dataViews[0];if(t.metadata.objects){const e=t.metadata.objects.textSettings;e&&(this.settings.headerText=e.headerText||this.settings.headerText,this.settings.currencySymbol=e.currencySymbol||this.settings.currencySymbol,this.settings.targetText=e.targetText||this.settings.targetText,this.settings.progressText=e.progressText||this.settings.progressText);const s=t.metadata.objects.iconSettings;s&&(this.settings.headerIcon=s.headerIcon||this.settings.headerIcon,this.settings.targetIcon=s.targetIcon||this.settings.targetIcon);const r=t.metadata.objects.colorSettings;r&&(this.settings.backgroundTheme=r.backgroundTheme||this.settings.backgroundTheme,this.settings.barTheme=r.barTheme||this.settings.barTheme,this.settings.headerColor=r.headerColor||this.settings.headerColor,this.settings.targetBackgroundColor=r.targetBackgroundColor||this.settings.targetBackgroundColor,this.settings.targetTextColor=r.targetTextColor||this.settings.targetTextColor,this.settings.measureTextColor=r.measureTextColor||this.settings.measureTextColor)}const s=t.categorical.values.find((e=>e.source.roles.measure)),r=t.categorical.values.find((e=>e.source.roles.hedef));s&&r?(this.measureValue=Number(s.values[0]),this.hedefValue=Number(r.values[0]),this.target.innerHTML=`\n                <div class="visual-container theme-${this.settings.backgroundTheme}">\n                    <div class="visual-container">\n                        <div class="header-container">\n                            <span class="header-icon">${this.getUnicodeIcon(this.settings.headerIcon)}</span>\n                            <div class="header header-theme-${this.settings.headerColor}">${this.settings.headerText}\n                            </div>\n                        </div>\n                        <div class="container">\n                            <p class="measure" style="color: ${this.settings.measureTextColor}">\n                            ${this.settings.currencySymbol} ${this.measureValue}\n                            </p>\n                           \n                            \n                            <div class="hedef" style="background-color: ${this.settings.targetBackgroundColor}; color: ${this.settings.targetTextColor};">\n                            <span class="icon">${this.getUnicodeIcon(this.settings.targetIcon)}</span>\n                            ${this.settings.targetText}: ${this.settings.currencySymbol} ${this.hedefValue}\n                            </div>\n                            \n                            \n                            \n                        </div>\n                        <div class="hedef-bar-container">\n                            <div class="hedef-bar">\n                            <div class="hedef-gerceklesme bar-theme-${this.settings.barTheme}">\n                                <div class="hedef-gerceklesme" style="width: 0;"></div>\n                                </div>\n                            </div>\n                            <div class="hedef-bar-text">${this.settings.progressText}: 0%</div>\n                        </div>\n                    </div>\n                     </div>\n                `,this.animateBar()):s?(this.measureValue=Number(s.values[0]),this.target.innerHTML=`<p class="measure">${this.settings.currencySymbol} ${this.measureValue}</p>`):r?(this.hedefValue=Number(r.values[0]),this.target.innerHTML=`\n                    <div class="hedef">\n                        <span class="icon">${this.getUnicodeIcon(this.settings.targetIcon)}</span>\n                        ${this.settings.targetText}: ${this.settings.currencySymbol} ${this.hedefValue}\n                    </div>\n                `):this.clearData()}}}}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{s.r(r),s.d(r,{default:()=>a});var e=s(217),t=window.powerbi,i={name:"test1C3C6B2D3EA3845C6801DAE3EA268C776",displayName:"KPI Performance Card",class:"Visual",apiVersion:"5.10.0",create:t=>{if(e.b)return new e.b(t);throw"Visual instance not found"},createModalDialog:(e,t,s)=>{const r=globalThis.dialogRegistry;e in r&&new r[e](t,s)},custom:!0};void 0!==t&&(t.visuals=t.visuals||{},t.visuals.plugins=t.visuals.plugins||{},t.visuals.plugins.test1C3C6B2D3EA3845C6801DAE3EA268C776=i);const a=i})(),test1C3C6B2D3EA3845C6801DAE3EA268C776=r})();