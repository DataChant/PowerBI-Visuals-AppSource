/*! For license information please see visual.js.LICENSE.txt */
var iconMapV34089C0EB522B416294AA926F71B4FDBB;(()=>{var t={6680:()=>{!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){L.Curve=L.Path.extend({options:{},initialize:function(t,e){L.setOptions(this,e),this._setPath(t)},setLatLngs:function(t){return this.setPath(t)},_updateBounds:function(){var t=this._clickTolerance(),e=new L.Point(t,t);this._pxBounds=new L.Bounds([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},getPath:function(){return this._coords},setPath:function(t){return this._setPath(t),this.redraw()},getBounds:function(){return this._bounds},_setPath:function(t){this._coords=t,this._bounds=this._computeBounds()},_computeBounds:function(){for(var t,e,i,n=new L.LatLngBounds,r=0;r<this._coords.length;r++)if("string"==typeof(i=this._coords[r])||i instanceof String)e=i;else if("H"==e)n.extend([t.lat,i[0]]),t=new L.latLng(t.lat,i[0]);else if("V"==e)n.extend([i[0],t.lng]),t=new L.latLng(i[0],t.lng);else if("C"==e){var a=new L.latLng(i[0],i[1]);i=this._coords[++r];var s=new L.latLng(i[0],i[1]);i=this._coords[++r];var o=new L.latLng(i[0],i[1]);n.extend(a),n.extend(s),n.extend(o),o.controlPoint1=a,o.controlPoint2=s,t=o}else if("S"==e){if(s=new L.latLng(i[0],i[1]),i=this._coords[++r],o=new L.latLng(i[0],i[1]),a=t,t.controlPoint2){var l=t.lat-t.controlPoint2.lat,h=t.lng-t.controlPoint2.lng;a=new L.latLng(t.lat+l,t.lng+h)}n.extend(a),n.extend(s),n.extend(o),o.controlPoint1=a,o.controlPoint2=s,t=o}else if("Q"==e){var u=new L.latLng(i[0],i[1]);i=this._coords[++r],o=new L.latLng(i[0],i[1]),n.extend(u),n.extend(o),o.controlPoint=u,t=o}else"T"==e?(o=new L.latLng(i[0],i[1]),u=t,t.controlPoint&&(l=t.lat-t.controlPoint.lat,h=t.lng-t.controlPoint.lng,u=new L.latLng(t.lat+l,t.lng+h)),n.extend(u),n.extend(o),o.controlPoint=u,t=o):(n.extend(i),t=new L.latLng(i[0],i[1]));return n},getCenter:function(){return this._bounds.getCenter()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._usingCanvas?this._updateCurveCanvas():this._updateCurveSvg()},_project:function(){var t,e,i,n;this._points=[];for(var r=0;r<this._coords.length;r++)if("string"==typeof(t=this._coords[r])||t instanceof String)this._points.push(t),i=t;else{switch(t.length){case 2:n=this._map.latLngToLayerPoint(t),e=t;break;case 1:"H"==i?(n=this._map.latLngToLayerPoint([e[0],t[0]]),e=[e[0],t[0]]):(n=this._map.latLngToLayerPoint([t[0],e[1]]),e=[t[0],e[1]])}this._points.push(n)}if(this._bounds.isValid()){var a=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),s=this._map.latLngToLayerPoint(this._bounds.getSouthEast());this._rawPxBounds=new L.Bounds(a,s),this._updateBounds()}},_curvePointsToPath:function(t){for(var e,i,n="",r=0;r<t.length;r++)if("string"==typeof(e=t[r])||e instanceof String)n+=i=e;else switch(i){case"H":n+=e.x+" ";break;case"V":n+=e.y+" ";break;default:n+=e.x+","+e.y+" "}return n||"M0 0"},beforeAdd:function(t){L.Path.prototype.beforeAdd.call(this,t),this._usingCanvas=this._renderer instanceof L.Canvas,this._usingCanvas&&(this._pathSvgElement=document.createElementNS("http://www.w3.org/2000/svg","path"))},onAdd:function(t){if(this._usingCanvas&&(this._canvasSetDashArray=!this.options.dashArray),L.Path.prototype.onAdd.call(this,t),this._usingCanvas)this.options.animate&&"object"==typeof TWEEN?(this._normalizeCanvasAnimationOptions(),this._tweenedObject={offset:this._pathSvgElement.getTotalLength()},this._tween=new TWEEN.Tween(this._tweenedObject).to({offset:0},this.options.animate.duration).delay(this.options.animate.delay).repeat(this.options.animate.iterations-1).onComplete(function(t){return function(){t._canvasAnimating=!1}}(this)).start(),this._canvasAnimating=!0,this._animateCanvas()):this._canvasAnimating=!1;else if(this.options.animate&&this._path.animate){var e=this._svgSetDashArray();this._path.animate([{strokeDashoffset:e},{strokeDashoffset:0}],this.options.animate)}},_updateCurveSvg:function(){this._renderer._setPath(this,this._curvePointsToPath(this._points)),this.options.animate&&this._svgSetDashArray()},_svgSetDashArray:function(){var t=this._path,e=t.getTotalLength();return this.options.dashArray||(t.style.strokeDasharray=e+" "+e),e},_containsPoint:function(t){return this._bounds.contains(this._map.layerPointToLatLng(t))},_normalizeCanvasAnimationOptions:function(){var t={delay:0,duration:0,iterations:1};"number"==typeof this.options.animate?t.duration=this.options.animate:(this.options.animate.duration&&(t.duration=this.options.animate.duration),this.options.animate.delay&&(t.delay=this.options.animate.delay),this.options.animate.iterations&&(t.iterations=this.options.animate.iterations)),this.options.animate=t},_updateCurveCanvas:function(){var t=this._curvePointsToPath(this._points);this._pathSvgElement.setAttribute("d",t),this.options.animate&&"object"==typeof TWEEN&&this._canvasSetDashArray&&(this.options.dashArray=this._pathSvgElement.getTotalLength()+"",this._renderer._updateDashArray(this)),this._curveFillStroke(new Path2D(t),this._renderer._ctx)},_animateCanvas:function(){TWEEN.update(),this._renderer._updatePaths(),this._canvasAnimating&&(this._animationFrameId=L.Util.requestAnimFrame(this._animateCanvas,this))},_curveFillStroke:function(t,e){e.lineDashOffset=this._canvasAnimating?this._tweenedObject.offset:0;var i=this.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(t,i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(e.setLineDash&&e.setLineDash(this.options&&this.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke(t))},trace:function(t){if(void 0===this._map||null===this._map)return[];var e,i,n,r,a,s,o;t=t.filter((function(t){return t>=0&&t<=1}));for(var l=[],h=0;h<this._points.length;h++)if("string"==typeof(e=this._points[h])||e instanceof String)"Z"==(i=e)&&(l=l.concat(this._linearTrace(t,r,n)));else switch(i){case"M":n=e,r=e;break;case"L":case"H":case"V":l=l.concat(this._linearTrace(t,r,e)),r=e;break;case"C":a=e,s=this._points[++h],o=this._points[++h],l=l.concat(this._cubicTrace(t,r,a,s,o)),r=o;break;case"S":a=this._reflectPoint(s,r),s=e,o=this._points[++h],l=l.concat(this._cubicTrace(t,r,a,s,o)),r=o;break;case"Q":a=e,s=this._points[++h],l=l.concat(this._quadraticTrace(t,r,a,s)),r=s;break;case"T":a=this._reflectPoint(a,r),s=e,l=l.concat(this._quadraticTrace(t,r,a,s)),r=s}return l},_linearTrace:function(t,e,i){return t.map((t=>{var n=this._singleLinearTrace(t,e.x,i.x),r=this._singleLinearTrace(t,e.y,i.y);return this._map.layerPointToLatLng([n,r])}))},_quadraticTrace:function(t,e,i,n){return t.map((t=>{var r=this._singleQuadraticTrace(t,e.x,i.x,n.x),a=this._singleQuadraticTrace(t,e.y,i.y,n.y);return this._map.layerPointToLatLng([r,a])}))},_cubicTrace:function(t,e,i,n,r){return t.map((t=>{var a=this._singleCubicTrace(t,e.x,i.x,n.x,r.x),s=this._singleCubicTrace(t,e.y,i.y,n.y,r.y);return this._map.layerPointToLatLng([a,s])}))},_singleLinearTrace:function(t,e,i){return e+t*(i-e)},_singleQuadraticTrace:function(t,e,i,n){var r=1-t;return Math.pow(r,2)*e+2*r*t*i+Math.pow(t,2)*n},_singleCubicTrace:function(t,e,i,n,r){var a=1-t;return Math.pow(a,3)*e+3*Math.pow(a,2)*t*i+3*a*Math.pow(t,2)*n+Math.pow(t,3)*r},_reflectPoint:function(t,e){return x=e.x+(e.x-t.x),y=e.y+(e.y-t.y),L.point(x,y)}}),L.curve=function(t,e){return new L.Curve(t,e)}}])},6838:function(t,e,i){t.exports=function(t){"use strict";var e=(t=t&&t.hasOwnProperty("default")?t.default:t).Polygon.extend({options:{color:"#00",opacity:.5,fillColor:"#00",fillOpacity:.5,resolution:2},initialize:function(e){this.version="0.1.0",this._R2D=180/Math.PI,this._D2R=Math.PI/180,t.Util.setOptions(this,e);var i=this._compute(this.options.time);this.setLatLngs(i)},setTime:function(t){this.options.time=t;var e=this._compute(t);this.setLatLngs(e)},_sunEclipticPosition:function(t){var e=t-2451545,i=280.46+.9856474*e,n=357.528+.9856003*e;return n%=360,{lambda:(i%=360)+1.915*Math.sin(n*this._D2R)+.02*Math.sin(2*n*this._D2R),R:1.00014-.01671*Math.cos(n*this._D2R)-.0014*Math.cos(2*n*this._D2R)}},_eclipticObliquity:function(t){var e=(t-2451545)/36525;return 23.43929111-e*(46.836769/3600-e*(1831e-7/3600+e*(5.565e-7-e*(1.6e-10-4.34e-8*e/3600))))},_sunEquatorialPosition:function(t,e){var i=Math.atan(Math.cos(e*this._D2R)*Math.tan(t*this._D2R))*this._R2D,n=Math.asin(Math.sin(e*this._D2R)*Math.sin(t*this._D2R))*this._R2D;return{alpha:i+=90*Math.floor(t/90)-90*Math.floor(i/90),delta:n}},_hourAngle:function(t,e,i){return 15*(i+t/15)-e.alpha},_latitude:function(t,e){return Math.atan(-Math.cos(t*this._D2R)/Math.tan(e.delta*this._D2R))*this._R2D},_compute:function(t){for(var e=(t?new Date(t):new Date)/864e5+2440587.5,i=function(t){return(18.697374558+24.06570982441908*(t-2451545))%24}(e),n=[],r=this._sunEclipticPosition(e),a=this._eclipticObliquity(e),s=this._sunEquatorialPosition(r.lambda,a),o=0;o<=720*this.options.resolution;o++){var l=o/this.options.resolution-360,h=this._hourAngle(l,s,i);n[o+1]=[this._latitude(h,s),l]}return s.delta<0?(n[0]=[90,-360],n[n.length]=[90,360]):(n[0]=[-90,-360],n[n.length]=[-90,360]),n}});return function(t){return new e(t)}}(i(3481))},7600:function(t,e,i){var n;"undefined"!=typeof globalThis?globalThis:this||self,n=function(t,e){t.MaplibreGL=t.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(e){t.setOptions(this,e),this._throttledUpdate=t.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(e){this._container||this._initContainer();var i=this.getPaneName();e.getPane(i).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&t.DomEvent.on(e._proxy,t.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(e){this._map._proxy&&this._map.options.zoomAnimation&&t.DomEvent.off(this._map._proxy,t.DomUtil.TRANSITION_END,this._transitionEnd,this);var i=this.getPaneName();e.getPane(i).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var e=this.getSize().multiplyBy(.5),i=this._map.latLngToContainerPoint(this._map.getCenter());return t.latLngBounds(this._map.containerPointToLatLng(i.subtract(e)),this._map.containerPointToLatLng(i.add(e)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(t){return{x:Math.round(t.x),y:Math.round(t.y)}},_initContainer:function(){var e=this._container=t.DomUtil.create("div","leaflet-gl-layer"),i=this.getSize(),n=this._map.getSize().multiplyBy(this.options.padding);e.style.width=i.x+"px",e.style.height=i.y+"px";var r=this._map.containerPointToLayerPoint([0,0]).subtract(n);t.DomUtil.setPosition(e,this._roundPoint(r))},_initGL:function(){var i=this._map.getCenter(),n=t.extend({},this.options,{container:this._container,center:[i.lng,i.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new e.Map(n),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var r=this._glMap._actualCanvas;t.DomUtil.addClass(r,"leaflet-image-layer"),t.DomUtil.addClass(r,"leaflet-zoom-animated"),this.options.interactive&&t.DomUtil.addClass(r,"leaflet-interactive"),this.options.className&&t.DomUtil.addClass(r,this.options.className)},_update:function(e){if(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming){var i=this.getSize(),n=this._container,r=this._glMap,a=this._map.getSize().multiplyBy(this.options.padding),s=this._map.containerPointToLayerPoint([0,0]).subtract(a);t.DomUtil.setPosition(n,this._roundPoint(s)),this._transformGL(r),r.transform.width!==i.x||r.transform.height!==i.y?(n.style.width=i.x+"px",n.style.height=i.y+"px",null!==r._resize&&void 0!==r._resize?r._resize():r.resize()):null!==r._update&&void 0!==r._update?r._update():r.update()}},_transformGL:function(t){var i=this._map.getCenter(),n=t.transform;n.center=e.LngLat.convert([i.lng,i.lat]),n.zoom=this._map.getZoom()-1},_pinchZoom:function(t){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),n=this._map.getSize().multiplyBy(this.options.padding*i),r=this.getSize()._divideBy(2),a=this._map.project(e.center,e.zoom)._subtract(r)._add(this._map._getMapPanePos().add(n))._round(),s=this._map.project(this._map.getBounds().getNorthWest(),e.zoom)._subtract(a);t.DomUtil.setTransform(this._glMap._actualCanvas,s.subtract(this._offset),i)},_zoomStart:function(t){this._zooming=!0},_zoomEnd:function(){var e=this._map.getZoomScale(this._map.getZoom());t.DomUtil.setTransform(this._glMap._actualCanvas,null,e),this._zooming=!1,this._update()},_transitionEnd:function(e){t.Util.requestAnimFrame((function(){var e=this._map.getZoom(),i=this._map.getCenter(),n=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());t.DomUtil.setTransform(this._glMap._actualCanvas,n,1),this._glMap.once("moveend",t.Util.bind((function(){this._zoomEnd()}),this)),this._glMap.jumpTo({center:i,zoom:e-1})}),this)},_resize:function(t){this._transitionEnd(t)}}),t.maplibreGL=function(e){return new t.MaplibreGL(e)}},"function"==typeof define&&define.amd?define(["leaflet","maplibre-gl"],n):t.exports=n(i(3481),i(6443))},9279:(t,e,i)=>{i(3534),i(7727),i(590),i(8290),i(2619),i(4216),i(2957),i(6195),i(4100),i(3006),i(4910),i(2820),i(6611),i(9576),i(9747),i(9218),i(7755),i(5852),i(6012),i(4095),i(2824),i(5670),i(678),i(3101),i(7579),i(1412),i(3023),i(5933),i(9250),i(4484),i(7899),i(8240),i(7258),i(4632),i(345),i(5086),i(8538),i(6582),i(4641),i(9437),i(4189),i(8741),i(7514),i(5195),i(4895),i(2630),i(115),i(1408),i(3604),i(2982),i(17),i(8636),i(2157),i(1128),i(5755),i(8476),i(7746),i(9693),i(475),i(4582),i(9581),i(533),i(9958),i(557),i(4913),i(3555),i(5231),i(8763),i(5941),i(5843),i(9432),i(8665),i(5784),i(7287),i(4657),i(7500),i(3148),i(6255),i(7870),i(3848),i(8825),i(1890),i(173),i(785),i(8649),i(4989),i(8329),i(5336),i(825),i(9979),i(9596),i(4607),i(8915),i(5594),i(9607),i(5193),i(8505),i(3024),i(7249),i(5038),i(4427),i(5987),i(8293),i(9073),i(7136),i(8802),i(6048),i(2231),i(6088),i(4009),i(6943),i(577),i(4038),i(5365),i(6316),i(2006),i(8844),i(6161),i(1902),i(4867),i(769),i(8252),i(2799),i(6772),i(5483),i(7956),i(3733),i(9639),i(9570),i(956),i(9323),i(1145),i(9897),i(3212),i(4538),i(1610),i(6097),i(6982),i(5812),i(9560),i(3270),i(2169),i(9389),i(7787),i(1586),i(9193),i(5880),i(3396),i(7918),i(5708),i(121),i(863),i(3446),i(3016),i(1772),i(3734),i(5679),i(3746),i(9513),i(9096),i(6395),i(7950),i(2357),i(5889),i(4758),i(6148),i(6609),i(861),i(1905),i(5213),i(7182),i(2279),i(9302),i(147),i(6217),i(7966),i(5186),i(5944),i(4787),i(632),i(2278),i(4245),i(2492),i(3266),i(7192),i(7220),i(2432),i(2483),i(6696),i(8083),i(7811),i(4606),i(7948),i(436),i(2091),i(8182),i(2276),i(5031),i(9853),i(4308),i(4912),i(7759),i(7144),t.exports=i(9720)},9085:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},7473:(t,e,i)=>{var n=i(5335);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},298:(t,e,i)=>{var n=i(1602),r=i(3105),a=i(1395),s=n("unscopables"),o=Array.prototype;null==o[s]&&a(o,s,r(null)),t.exports=function(t){o[s][t]=!0}},7234:(t,e,i)=>{"use strict";var n=i(7804).charAt;t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},5190:t=>{t.exports=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t}},3938:(t,e,i)=>{var n=i(5335);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},5343:(t,e,i)=>{"use strict";var n,r=i(5077),a=i(200),s=i(5335),o=i(1883),l=i(3062),h=i(1395),u=i(7485),c=i(3610).f,d=i(7970),m=i(9686),p=i(1602),f=i(665),y=a.DataView,g=y&&y.prototype,_=a.Int8Array,v=_&&_.prototype,b=a.Uint8ClampedArray,M=b&&b.prototype,x=_&&d(_),w=v&&d(v),S=Object.prototype,A=S.isPrototypeOf,T=p("toStringTag"),C=f("TYPED_ARRAY_TAG"),I=!(!a.ArrayBuffer||!y),k=I&&!!m&&"Opera"!==l(a.opera),P=!1,E={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D=function(t){return s(t)&&o(E,l(t))};for(n in E)a[n]||(k=!1);if((!k||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},k))for(n in E)a[n]&&m(a[n],x);if((!k||!w||w===S)&&(w=x.prototype,k))for(n in E)a[n]&&m(a[n].prototype,w);if(k&&d(M)!==w&&m(M,w),r&&!o(w,T))for(n in P=!0,c(w,T,{get:function(){return s(this)?this[C]:void 0}}),E)a[n]&&h(a[n],C,n);I&&m&&d(g)!==S&&m(g,S),t.exports={NATIVE_ARRAY_BUFFER:I,NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:P&&C,aTypedArray:function(t){if(D(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(m){if(A.call(x,t))return t}else for(var e in E)if(o(E,n)){var i=a[e];if(i&&(t===i||A.call(i,t)))return t}throw TypeError("Target is not a typed array constructor")},exportProto:function(t,e,i){if(r){if(i)for(var n in E){var s=a[n];s&&o(s.prototype,t)&&delete s.prototype[t]}w[t]&&!i||u(w,t,i?e:k&&v[t]||e)}},exportStatic:function(t,e,i){var n,s;if(r){if(m){if(i)for(n in E)(s=a[n])&&o(s,t)&&delete s[t];if(x[t]&&!i)return;try{return u(x,t,i?e:k&&_[t]||e)}catch(t){}}for(n in E)!(s=a[n])||s[t]&&!i||u(s,t,e)}},isView:function(t){var e=l(t);return"DataView"===e||o(E,e)},isTypedArray:D,TypedArray:x,TypedArrayPrototype:w}},4497:(t,e,i)=>{"use strict";var n=i(200),r=i(5077),a=i(5343).NATIVE_ARRAY_BUFFER,s=i(1395),o=i(3075),l=i(2074),h=i(5190),u=i(7317),c=i(3747),d=i(6283),m=i(4789).f,p=i(3610).f,f=i(7806),y=i(5282),g=i(9206),_=g.get,v=g.set,b="ArrayBuffer",M="DataView",x="prototype",w="Wrong index",S=n[b],A=S,T=n[M],C=n.Math,I=n.RangeError,k=1/0,P=C.abs,E=C.pow,D=C.floor,L=C.log,z=C.LN2,F=function(t,e,i){var n,r,a,s=new Array(i),o=8*i-e-1,l=(1<<o)-1,h=l>>1,u=23===e?E(2,-24)-E(2,-77):0,c=t<0||0===t&&1/t<0?1:0,d=0;for((t=P(t))!=t||t===k?(r=t!=t?1:0,n=l):(n=D(L(t)/z),t*(a=E(2,-n))<1&&(n--,a*=2),(t+=n+h>=1?u/a:u*E(2,1-h))*a>=2&&(n++,a/=2),n+h>=l?(r=0,n=l):n+h>=1?(r=(t*a-1)*E(2,e),n+=h):(r=t*E(2,h-1)*E(2,e),n=0));e>=8;s[d++]=255&r,r/=256,e-=8);for(n=n<<e|r,o+=e;o>0;s[d++]=255&n,n/=256,o-=8);return s[--d]|=128*c,s},O=function(t,e){var i,n=t.length,r=8*n-e-1,a=(1<<r)-1,s=a>>1,o=r-7,l=n-1,h=t[l--],u=127&h;for(h>>=7;o>0;u=256*u+t[l],l--,o-=8);for(i=u&(1<<-o)-1,u>>=-o,o+=e;o>0;i=256*i+t[l],l--,o-=8);if(0===u)u=1-s;else{if(u===a)return i?NaN:h?-1/0:k;i+=E(2,e),u-=s}return(h?-1:1)*i*E(2,u-e)},R=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},N=function(t){return[255&t]},B=function(t){return[255&t,t>>8&255]},j=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},H=function(t){return F(t,23,4)},U=function(t){return F(t,52,8)},V=function(t,e){p(t[x],e,{get:function(){return _(this)[e]}})},G=function(t,e,i,n){var r=d(+i),a=_(t);if(r+e>a.byteLength)throw I(w);var s=_(a.buffer).bytes,o=r+a.byteOffset,l=s.slice(o,o+e);return n?l:l.reverse()},$=function(t,e,i,n,r,a){var s=d(+i),o=_(t);if(s+e>o.byteLength)throw I(w);for(var l=_(o.buffer).bytes,h=s+o.byteOffset,u=n(+r),c=0;c<e;c++)l[h+c]=u[a?c:e-c-1]};if(a){if(!l((function(){S(1)}))||!l((function(){new S(-1)}))||l((function(){return new S,new S(1.5),new S(NaN),S.name!=b}))){for(var Z,q=(A=function(t){return h(this,A),new S(d(t))})[x]=S[x],Y=m(S),W=0;Y.length>W;)(Z=Y[W++])in A||s(A,Z,S[Z]);q.constructor=A}var J=new T(new A(2)),X=T[x].setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||o(T[x],{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},{unsafe:!0})}else A=function(t){h(this,A,b);var e=d(t);v(this,{bytes:f.call(new Array(e),0),byteLength:e}),r||(this.byteLength=e)},T=function(t,e,i){h(this,T,M),h(t,A,M);var n=_(t).byteLength,a=u(e);if(a<0||a>n)throw I("Wrong offset");if(a+(i=void 0===i?n-a:c(i))>n)throw I("Wrong length");v(this,{buffer:t,byteLength:i,byteOffset:a}),r||(this.buffer=t,this.byteLength=i,this.byteOffset=a)},r&&(V(A,"byteLength"),V(T,"buffer"),V(T,"byteLength"),V(T,"byteOffset")),o(T[x],{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return R(G(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return R(G(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return O(G(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return O(G(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){$(this,1,t,N,e)},setUint8:function(t,e){$(this,1,t,N,e)},setInt16:function(t,e){$(this,2,t,B,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){$(this,2,t,B,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){$(this,4,t,j,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){$(this,4,t,j,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){$(this,4,t,H,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){$(this,8,t,U,e,arguments.length>2?arguments[2]:void 0)}});y(A,b),y(T,M),e[b]=A,e[M]=T},9688:(t,e,i)=>{"use strict";var n=i(2612),r=i(6539),a=i(3747),s=Math.min;t.exports=[].copyWithin||function(t,e){var i=n(this),o=a(i.length),l=r(t,o),h=r(e,o),u=arguments.length>2?arguments[2]:void 0,c=s((void 0===u?o:r(u,o))-h,o-l),d=1;for(h<l&&l<h+c&&(d=-1,h+=c-1,l+=c-1);c-- >0;)h in i?i[l]=i[h]:delete i[l],l+=d,h+=d;return i}},7806:(t,e,i)=>{"use strict";var n=i(2612),r=i(6539),a=i(3747);t.exports=function(t){for(var e=n(this),i=a(e.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,h=void 0===l?i:r(l,i);h>o;)e[o++]=t;return e}},516:(t,e,i)=>{"use strict";var n=i(1344).forEach,r=i(5144);t.exports=r("forEach")?function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},1027:(t,e,i)=>{"use strict";var n=i(9862),r=i(2612),a=i(1332),s=i(9034),o=i(3747),l=i(2057),h=i(1898);t.exports=function(t){var e,i,u,c,d=r(t),m="function"==typeof this?this:Array,p=arguments.length,f=p>1?arguments[1]:void 0,y=void 0!==f,g=0,_=h(d);if(y&&(f=n(f,p>2?arguments[2]:void 0,2)),null==_||m==Array&&s(_))for(i=new m(e=o(d.length));e>g;g++)l(i,g,y?f(d[g],g):d[g]);else for(c=_.call(d),i=new m;!(u=c.next()).done;g++)l(i,g,y?a(c,f,[u.value,g],!0):u.value);return i.length=g,i}},8186:(t,e,i)=>{var n=i(5476),r=i(3747),a=i(6539),s=function(t){return function(e,i,s){var o,l=n(e),h=r(l.length),u=a(s,h);if(t&&i!=i){for(;h>u;)if((o=l[u++])!=o)return!0}else for(;h>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},1344:(t,e,i)=>{var n=i(9862),r=i(8664),a=i(2612),s=i(3747),o=i(2998),l=[].push,h=function(t){var e=1==t,i=2==t,h=3==t,u=4==t,c=6==t,d=5==t||c;return function(m,p,f,y){for(var g,_,v=a(m),b=r(v),M=n(p,f,3),x=s(b.length),w=0,S=y||o,A=e?S(m,x):i?S(m,0):void 0;x>w;w++)if((d||w in b)&&(_=M(g=b[w],w,v),t))if(e)A[w]=_;else if(_)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:l.call(A,g)}else if(u)return!1;return c?-1:h||u?u:A}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},3470:(t,e,i)=>{"use strict";var n=i(5476),r=i(7317),a=i(3747),s=i(5144),o=Math.min,l=[].lastIndexOf,h=!!l&&1/[1].lastIndexOf(1,-0)<0,u=s("lastIndexOf");t.exports=h||u?function(t){if(h)return l.apply(this,arguments)||0;var e=n(this),i=a(e.length),s=i-1;for(arguments.length>1&&(s=o(s,r(arguments[1]))),s<0&&(s=i+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:l},5634:(t,e,i)=>{var n=i(2074),r=i(1602)("species");t.exports=function(t){return!n((function(){var e=[];return(e.constructor={})[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2237:(t,e,i)=>{var n=i(9085),r=i(2612),a=i(8664),s=i(3747),o=function(t){return function(e,i,o,l){n(i);var h=r(e),u=a(h),c=s(h.length),d=t?c-1:0,m=t?-1:1;if(o<2)for(;;){if(d in u){l=u[d],d+=m;break}if(d+=m,t?d<0:c<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:c>d;d+=m)d in u&&(l=i(l,u[d],d,h));return l}};t.exports={left:o(!1),right:o(!0)}},2998:(t,e,i)=>{var n=i(5335),r=i(8679),a=i(1602)("species");t.exports=function(t,e){var i;return r(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!r(i.prototype)?n(i)&&null===(i=i[a])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},9862:(t,e,i)=>{var n=i(9085);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},1332:(t,e,i)=>{var n=i(3938);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var a=t.return;throw void 0!==a&&n(a.call(t)),e}}},7499:(t,e,i)=>{var n=i(1602)("iterator"),r=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){r=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var a={};a[n]=function(){return{next:function(){return{done:i=!0}}}},t(a)}catch(t){}return i}},8569:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},3062:(t,e,i)=>{var n=i(8569),r=i(1602)("toStringTag"),a="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:a?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},5959:(t,e,i)=>{"use strict";var n=i(3610).f,r=i(3105),a=i(3075),s=i(9862),o=i(5190),l=i(2929),h=i(5723),u=i(3524),c=i(5077),d=i(2014).fastKey,m=i(9206),p=m.set,f=m.getterFor;t.exports={getConstructor:function(t,e,i,h){var u=t((function(t,n){o(t,u,e),p(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),c||(t.size=0),null!=n&&l(n,t[h],t,i)})),m=f(e),y=function(t,e,i){var n,r,a=m(t),s=g(t,e);return s?s.value=i:(a.last=s={index:r=d(e,!0),key:e,value:i,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=s),n&&(n.next=s),c?a.size++:t.size++,"F"!==r&&(a.index[r]=s)),t},g=function(t,e){var i,n=m(t),r=d(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return a(u.prototype,{clear:function(){for(var t=m(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,c?t.size=0:this.size=0},delete:function(t){var e=this,i=m(e),n=g(e,t);if(n){var r=n.next,a=n.previous;delete i.index[n.index],n.removed=!0,a&&(a.next=r),r&&(r.previous=a),i.first==n&&(i.first=r),i.last==n&&(i.last=a),c?i.size--:e.size--}return!!n},forEach:function(t){for(var e,i=m(this),n=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),a(u.prototype,i?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return y(this,0===t?0:t,e)}}:{add:function(t){return y(this,t=0===t?0:t,t)}}),c&&n(u.prototype,"size",{get:function(){return m(this).size}}),u},setStrong:function(t,e,i){var n=e+" Iterator",r=f(e),a=f(n);h(t,e,(function(t,e){p(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=a(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),u(e)}}},6784:(t,e,i)=>{"use strict";var n=i(3075),r=i(2014).getWeakData,a=i(3938),s=i(5335),o=i(5190),l=i(2929),h=i(1344),u=i(1883),c=i(9206),d=c.set,m=c.getterFor,p=h.find,f=h.findIndex,y=0,g=function(t){return t.frozen||(t.frozen=new _)},_=function(){this.entries=[]},v=function(t,e){return p(t.entries,(function(t){return t[0]===e}))};_.prototype={get:function(t){var e=v(this,t);if(e)return e[1]},has:function(t){return!!v(this,t)},set:function(t,e){var i=v(this,t);i?i[1]=e:this.entries.push([t,e])},delete:function(t){var e=f(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,h){var c=t((function(t,n){o(t,c,e),d(t,{type:e,id:y++,frozen:void 0}),null!=n&&l(n,t[h],t,i)})),p=m(e),f=function(t,e,i){var n=p(t),s=r(a(e),!0);return!0===s?g(n).set(e,i):s[n.id]=i,t};return n(c.prototype,{delete:function(t){var e=p(this);if(!s(t))return!1;var i=r(t);return!0===i?g(e).delete(t):i&&u(i,e.id)&&delete i[e.id]},has:function(t){var e=p(this);if(!s(t))return!1;var i=r(t);return!0===i?g(e).has(t):i&&u(i,e.id)}}),n(c.prototype,i?{get:function(t){var e=p(this);if(s(t)){var i=r(t);return!0===i?g(e).get(t):i?i[e.id]:void 0}},set:function(t,e){return f(this,t,e)}}:{add:function(t){return f(this,t,!0)}}),c}}},2327:(t,e,i)=>{"use strict";var n=i(1605),r=i(200),a=i(4977),s=i(7485),o=i(2014),l=i(2929),h=i(5190),u=i(5335),c=i(2074),d=i(7499),m=i(5282),p=i(3054);t.exports=function(t,e,i,f,y){var g=r[t],_=g&&g.prototype,v=g,b=f?"set":"add",M={},x=function(t){var e=_[t];s(_,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(y&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!u(t))&&e.call(this,0===t?0:t)}:function(t,i){return e.call(this,0===t?0:t,i),this})};if(a(t,"function"!=typeof g||!(y||_.forEach&&!c((function(){(new g).entries().next()})))))v=i.getConstructor(e,t,f,b),o.REQUIRED=!0;else if(a(t,!0)){var w=new v,S=w[b](y?{}:-0,1)!=w,A=c((function(){w.has(1)})),T=d((function(t){new g(t)})),C=!y&&c((function(){for(var t=new g,e=5;e--;)t[b](e,e);return!t.has(-0)}));T||((v=e((function(e,i){h(e,v,t);var n=p(new g,e,v);return null!=i&&l(i,n[b],n,f),n}))).prototype=_,_.constructor=v),(A||C)&&(x("delete"),x("has"),f&&x("get")),(C||S)&&x(b),y&&_.clear&&delete _.clear}return M[t]=v,n({global:!0,forced:v!=g},M),m(v,t),y||i.setStrong(v,t,f),v}},4361:(t,e,i)=>{var n=i(1883),r=i(5816),a=i(7632),s=i(3610);t.exports=function(t,e){for(var i=r(e),o=s.f,l=a.f,h=0;h<i.length;h++){var u=i[h];n(t,u)||o(t,u,l(e,u))}}},4177:(t,e,i)=>{var n=i(1602)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},7168:(t,e,i)=>{var n=i(2074);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},9877:(t,e,i)=>{var n=i(1229),r=/"/g;t.exports=function(t,e,i,a){var s=String(n(t)),o="<"+e;return""!==i&&(o+=" "+i+'="'+String(a).replace(r,"&quot;")+'"'),o+">"+s+"</"+e+">"}},2147:(t,e,i)=>{"use strict";var n=i(9306).IteratorPrototype,r=i(3105),a=i(6843),s=i(5282),o=i(2228),l=function(){return this};t.exports=function(t,e,i){var h=e+" Iterator";return t.prototype=r(n,{next:a(1,i)}),s(t,h,!1,!0),o[h]=l,t}},6843:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2057:(t,e,i)=>{"use strict";var n=i(874),r=i(3610),a=i(6843);t.exports=function(t,e,i){var s=n(e);s in t?r.f(t,s,a(0,i)):t[s]=i}},8523:(t,e,i)=>{"use strict";var n=i(2074),r=i(5214).start,a=Math.abs,s=Date.prototype,o=s.getTime,l=s.toISOString;t.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!n((function(){l.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),i=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+r(a(e),n?6:4,0)+"-"+r(t.getUTCMonth()+1,2,0)+"-"+r(t.getUTCDate(),2,0)+"T"+r(t.getUTCHours(),2,0)+":"+r(t.getUTCMinutes(),2,0)+":"+r(t.getUTCSeconds(),2,0)+"."+r(i,3,0)+"Z"}:l},1137:(t,e,i)=>{"use strict";var n=i(3938),r=i(874);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(n(this),"number"!==t)}},5723:(t,e,i)=>{"use strict";var n=i(1605),r=i(2147),a=i(7970),s=i(9686),o=i(5282),l=i(1395),h=i(7485),u=i(1602),c=i(6926),d=i(2228),m=i(9306),p=m.IteratorPrototype,f=m.BUGGY_SAFARI_ITERATORS,y=u("iterator"),g="keys",_="values",v="entries",b=function(){return this};t.exports=function(t,e,i,u,m,M,x){r(i,e,u);var w,S,A,T=function(t){if(t===m&&E)return E;if(!f&&t in k)return k[t];switch(t){case g:case _:case v:return function(){return new i(this,t)}}return function(){return new i(this)}},C=e+" Iterator",I=!1,k=t.prototype,P=k[y]||k["@@iterator"]||m&&k[m],E=!f&&P||T(m),D="Array"==e&&k.entries||P;if(D&&(w=a(D.call(new t)),p!==Object.prototype&&w.next&&(c||a(w)===p||(s?s(w,p):"function"!=typeof w[y]&&l(w,y,b)),o(w,C,!0,!0),c&&(d[C]=b))),m==_&&P&&P.name!==_&&(I=!0,E=function(){return P.call(this)}),c&&!x||k[y]===E||l(k,y,E),d[e]=E,m)if(S={values:T(_),keys:M?E:T(g),entries:T(v)},x)for(A in S)(f||I||!(A in k))&&h(k,A,S[A]);else n({target:e,proto:!0,forced:f||I},S);return S}},1272:(t,e,i)=>{var n=i(9720),r=i(1883),a=i(66),s=i(3610).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||s(e,t,{value:a.f(t)})}},5077:(t,e,i)=>{var n=i(2074);t.exports=!n((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},3262:(t,e,i)=>{var n=i(200),r=i(5335),a=n.document,s=r(a)&&r(a.createElement);t.exports=function(t){return s?a.createElement(t):{}}},5549:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},290:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1605:(t,e,i)=>{var n=i(200),r=i(7632).f,a=i(1395),s=i(7485),o=i(5975),l=i(4361),h=i(4977);t.exports=function(t,e){var i,u,c,d,m,p=t.target,f=t.global,y=t.stat;if(i=f?n:y?n[p]||o(p,{}):(n[p]||{}).prototype)for(u in e){if(d=e[u],c=t.noTargetGet?(m=r(i,u))&&m.value:i[u],!h(f?u:p+(y?".":"#")+u,t.forced)&&void 0!==c){if(typeof d==typeof c)continue;l(d,c)}(t.sham||c&&c.sham)&&a(d,"sham",!0),s(i,u,d,t)}}},2074:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},779:(t,e,i)=>{"use strict";var n=i(1395),r=i(7485),a=i(2074),s=i(1602),o=i(54),l=s("species"),h=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));t.exports=function(t,e,i,c){var d=s(t),m=!a((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),p=m&&!a((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[l]=function(){return i}),i[d](""),!e}));if(!m||!p||"replace"===t&&!h||"split"===t&&!u){var f=/./[d],y=i(d,""[t],(function(t,e,i,n,r){return e.exec===o?m&&!r?{done:!0,value:f.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),g=y[0],_=y[1];r(String.prototype,t,g),r(RegExp.prototype,d,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)}),c&&n(RegExp.prototype[d],"sham",!0)}}},9608:(t,e,i)=>{"use strict";var n=i(8679),r=i(3747),a=i(9862),s=function(t,e,i,o,l,h,u,c){for(var d,m=l,p=0,f=!!u&&a(u,c,3);p<o;){if(p in i){if(d=f?f(i[p],p,e):i[p],h>0&&n(d))m=s(t,e,d,r(d.length),m,h-1)-1;else{if(m>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[m]=d}m++}p++}return m};t.exports=s},7137:(t,e,i)=>{"use strict";var n=i(6926),r=i(200),a=i(2074);t.exports=n||!a((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete r[t]}))},626:(t,e,i)=>{var n=i(2074);t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},4653:(t,e,i)=>{var n=i(2074),r=i(5073);t.exports=function(t){return n((function(){return!!r[t]()||"​᠎"!="​᠎"[t]()||r[t].name!==t}))}},5159:(t,e,i)=>{var n=i(2074);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},8891:(t,e,i)=>{"use strict";var n=i(9085),r=i(5335),a=[].slice,s={};t.exports=Function.bind||function(t){var e=n(this),i=a.call(arguments,1),o=function(){var n=i.concat(a.call(arguments));return this instanceof o?function(t,e,i){if(!(e in s)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";s[e]=Function("C,a","return new C("+n.join(",")+")")}return s[e](t,i)}(e,n.length,n):e.apply(t,n)};return r(e.prototype)&&(o.prototype=e.prototype),o}},3467:(t,e,i)=>{var n=i(2);t.exports=n("native-function-to-string",Function.toString)},6492:(t,e,i)=>{var n=i(9720),r=i(200),a=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?a(n[t])||a(r[t]):n[t]&&n[t][e]||r[t]&&r[t][e]}},1898:(t,e,i)=>{var n=i(3062),r=i(2228),a=i(1602)("iterator");t.exports=function(t){if(null!=t)return t[a]||t["@@iterator"]||r[n(t)]}},9526:(t,e,i)=>{var n=i(3938),r=i(1898);t.exports=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return n(e.call(t))}},200:t=>{var e="object",i=function(t){return t&&t.Math==Math&&t};t.exports=i(typeof globalThis==e&&globalThis)||i(typeof window==e&&window)||i(typeof self==e&&self)||i(typeof global==e&&global)||Function("return this")()},1883:t=>{var e={}.hasOwnProperty;t.exports=function(t,i){return e.call(t,i)}},7708:t=>{t.exports={}},1395:(t,e,i)=>{var n=i(5077),r=i(3610),a=i(6843);t.exports=n?function(t,e,i){return r.f(t,e,a(1,i))}:function(t,e,i){return t[e]=i,t}},9778:(t,e,i)=>{var n=i(200);t.exports=function(t,e){var i=n.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}},8890:(t,e,i)=>{var n=i(6492);t.exports=n("document","documentElement")},7694:(t,e,i)=>{var n=i(5077),r=i(2074),a=i(3262);t.exports=!n&&!r((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},8664:(t,e,i)=>{var n=i(2074),r=i(8569),a="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?a.call(t,""):Object(t)}:Object},3054:(t,e,i)=>{var n=i(5335),r=i(9686);t.exports=function(t,e,i){var a,s;return r&&"function"==typeof(a=e.constructor)&&a!==i&&n(s=a.prototype)&&s!==i.prototype&&r(t,s),t}},2014:(t,e,i)=>{var n=i(7708),r=i(5335),a=i(1883),s=i(3610).f,o=i(665),l=i(5159),h=o("meta"),u=0,c=Object.isExtensible||function(){return!0},d=function(t){s(t,h,{value:{objectID:"O"+ ++u,weakData:{}}})},m=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,h)){if(!c(t))return"F";if(!e)return"E";d(t)}return t[h].objectID},getWeakData:function(t,e){if(!a(t,h)){if(!c(t))return!0;if(!e)return!1;d(t)}return t[h].weakData},onFreeze:function(t){return l&&m.REQUIRED&&c(t)&&!a(t,h)&&d(t),t}};n[h]=!0},9206:(t,e,i)=>{var n,r,a,s=i(2886),o=i(200),l=i(5335),h=i(1395),u=i(1883),c=i(5904),d=i(7708),m=o.WeakMap;if(s){var p=new m,f=p.get,y=p.has,g=p.set;n=function(t,e){return g.call(p,t,e),e},r=function(t){return f.call(p,t)||{}},a=function(t){return y.call(p,t)}}else{var _=c("state");d[_]=!0,n=function(t,e){return h(t,_,e),e},r=function(t){return u(t,_)?t[_]:{}},a=function(t){return u(t,_)}}t.exports={set:n,get:r,has:a,enforce:function(t){return a(t)?r(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!l(e)||(i=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}}},9034:(t,e,i)=>{var n=i(1602),r=i(2228),a=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[a]===t)}},8679:(t,e,i)=>{var n=i(8569);t.exports=Array.isArray||function(t){return"Array"==n(t)}},4977:(t,e,i)=>{var n=i(2074),r=/#|\.prototype\./,a=function(t,e){var i=o[s(t)];return i==h||i!=l&&("function"==typeof e?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(r,".").toLowerCase()},o=a.data={},l=a.NATIVE="N",h=a.POLYFILL="P";t.exports=a},9136:(t,e,i)=>{var n=i(5335),r=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&r(t)===t}},5335:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},6926:t=>{t.exports=!1},2449:(t,e,i)=>{var n=i(5335),r=i(8569),a=i(1602)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==r(t))}},2929:(t,e,i)=>{var n=i(3938),r=i(9034),a=i(3747),s=i(9862),o=i(1898),l=i(1332),h=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,i,u,c){var d,m,p,f,y,g,_=s(e,i,u?2:1);if(c)d=t;else{if("function"!=typeof(m=o(t)))throw TypeError("Target is not iterable");if(r(m)){for(p=0,f=a(t.length);f>p;p++)if((y=u?_(n(g=t[p])[0],g[1]):_(t[p]))&&y instanceof h)return y;return new h(!1)}d=m.call(t)}for(;!(g=d.next()).done;)if((y=l(d,_,g.value,u))&&y instanceof h)return y;return new h(!1)}).stop=function(t){return new h(!0,t)}},9306:(t,e,i)=>{"use strict";var n,r,a,s=i(7970),o=i(1395),l=i(1883),h=i(1602),u=i(6926),c=h("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(r=s(s(a)))!==Object.prototype&&(n=r):d=!0),null==n&&(n={}),u||l(n,c)||o(n,c,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},2228:t=>{t.exports={}},6709:t=>{var e=Math.expm1,i=Math.exp;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:i(t)-1}:e},4812:(t,e,i)=>{var n=i(1211),r=Math.abs,a=Math.pow,s=a(2,-52),o=a(2,-23),l=a(2,127)*(2-o),h=a(2,-126);t.exports=Math.fround||function(t){var e,i,a=r(t),u=n(t);return a<h?u*(a/h/o+1/s-1/s)*h*o:(i=(e=(1+o/s)*a)-(e-a))>l||i!=i?u*(1/0):u*i}},1855:t=>{var e=Math.log;t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:e(1+t)}},1211:t=>{t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},7462:(t,e,i)=>{var n,r,a,s,o,l,h,u,c=i(200),d=i(7632).f,m=i(8569),p=i(4922).set,f=i(6992),y=c.MutationObserver||c.WebKitMutationObserver,g=c.process,_=c.Promise,v="process"==m(g),b=d(c,"queueMicrotask"),M=b&&b.value;M||(n=function(){var t,e;for(v&&(t=g.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?s():a=void 0,t}}a=void 0,t&&t.enter()},v?s=function(){g.nextTick(n)}:y&&!/(iphone|ipod|ipad).*applewebkit/i.test(f)?(o=!0,l=document.createTextNode(""),new y(n).observe(l,{characterData:!0}),s=function(){l.data=o=!o}):_&&_.resolve?(h=_.resolve(void 0),u=h.then,s=function(){u.call(h,n)}):s=function(){p.call(c,n)}),t.exports=M||function(t){var e={fn:t,next:void 0};a&&(a.next=e),r||(r=e,s()),a=e}},3737:(t,e,i)=>{var n=i(200);t.exports=n.Promise},1849:(t,e,i)=>{var n=i(2074);t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},4516:(t,e,i)=>{var n=i(2074),r=i(1602),a=i(6926),s=r("iterator");t.exports=!n((function(){var t=new URL("b?e=1","http://a"),e=t.searchParams;return t.pathname="c%20d",a&&!t.toJSON||!e.sort||"http://a/c%20d?e=1"!==t.href||"1"!==e.get("e")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash}))},2886:(t,e,i)=>{var n=i(200),r=i(3467),a=n.WeakMap;t.exports="function"==typeof a&&/native code/.test(r.call(a))},9836:(t,e,i)=>{"use strict";var n=i(9085),r=function(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)};t.exports.f=function(t){return new r(t)}},2588:(t,e,i)=>{var n=i(2449);t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},1071:(t,e,i)=>{var n=i(200).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&n(t)}},1688:(t,e,i)=>{"use strict";var n=i(5077),r=i(2074),a=i(1641),s=i(8916),o=i(9304),l=i(2612),h=i(8664),u=Object.assign;t.exports=!u||r((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=u({},t)[i]||a(u({},e)).join("")!=n}))?function(t,e){for(var i=l(t),r=arguments.length,u=1,c=s.f,d=o.f;r>u;)for(var m,p=h(arguments[u++]),f=c?a(p).concat(c(p)):a(p),y=f.length,g=0;y>g;)m=f[g++],n&&!d.call(p,m)||(i[m]=p[m]);return i}:u},3105:(t,e,i)=>{var n=i(3938),r=i(5318),a=i(290),s=i(7708),o=i(8890),l=i(3262),h=i(5904)("IE_PROTO"),u="prototype",c=function(){},d=function(){var t,e=l("iframe"),i=a.length,n="script",r="java"+n+":";for(e.style.display="none",o.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write("<"+n+">document.F=Object</"+n+">"),t.close(),d=t.F;i--;)delete d[u][a[i]];return d()};t.exports=Object.create||function(t,e){var i;return null!==t?(c[u]=n(t),i=new c,c[u]=null,i[h]=t):i=d(),void 0===e?i:r(i,e)},s[h]=!0},5318:(t,e,i)=>{var n=i(5077),r=i(3610),a=i(3938),s=i(1641);t.exports=n?Object.defineProperties:function(t,e){a(t);for(var i,n=s(e),o=n.length,l=0;o>l;)r.f(t,i=n[l++],e[i]);return t}},3610:(t,e,i)=>{var n=i(5077),r=i(7694),a=i(3938),s=i(874),o=Object.defineProperty;e.f=n?o:function(t,e,i){if(a(t),e=s(e,!0),a(i),r)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},7632:(t,e,i)=>{var n=i(5077),r=i(9304),a=i(6843),s=i(5476),o=i(874),l=i(1883),h=i(7694),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=s(t),e=o(e,!0),h)try{return u(t,e)}catch(t){}if(l(t,e))return a(!r.f.call(t,e),t[e])}},6509:(t,e,i)=>{var n=i(5476),r=i(4789).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==a.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(n(t))}},4789:(t,e,i)=>{var n=i(6347),r=i(290).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},8916:(t,e)=>{e.f=Object.getOwnPropertySymbols},7970:(t,e,i)=>{var n=i(1883),r=i(2612),a=i(5904),s=i(7168),o=a("IE_PROTO"),l=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},6347:(t,e,i)=>{var n=i(1883),r=i(5476),a=i(8186).indexOf,s=i(7708);t.exports=function(t,e){var i,o=r(t),l=0,h=[];for(i in o)!n(s,i)&&n(o,i)&&h.push(i);for(;e.length>l;)n(o,i=e[l++])&&(~a(h,i)||h.push(i));return h}},1641:(t,e,i)=>{var n=i(6347),r=i(290);t.exports=Object.keys||function(t){return n(t,r)}},9304:(t,e)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);e.f=r?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},9686:(t,e,i)=>{var n=i(3938),r=i(7473);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(t){}return function(i,a){return n(i),r(a),e?t.call(i,a):i.__proto__=a,i}}():void 0)},3172:(t,e,i)=>{var n=i(5077),r=i(1641),a=i(5476),s=i(9304).f,o=function(t){return function(e){for(var i,o=a(e),l=r(o),h=l.length,u=0,c=[];h>u;)i=l[u++],n&&!s.call(o,i)||c.push(t?[i,o[i]]:o[i]);return c}};t.exports={entries:o(!0),values:o(!1)}},4972:(t,e,i)=>{"use strict";var n=i(3062),r={};r[i(1602)("toStringTag")]="z",t.exports="[object z]"!==String(r)?function(){return"[object "+n(this)+"]"}:r.toString},5816:(t,e,i)=>{var n=i(6492),r=i(4789),a=i(8916),s=i(3938);t.exports=n("Reflect","ownKeys")||function(t){var e=r.f(s(t)),i=a.f;return i?e.concat(i(t)):e}},5175:(t,e,i)=>{var n=i(200),r=i(9163).trim,a=i(5073),s=n.parseFloat,o=1/s(a+"-0")!=-1/0;t.exports=o?function(t){var e=r(String(t)),i=s(e);return 0===i&&"-"==e.charAt(0)?-0:i}:s},1880:(t,e,i)=>{var n=i(200),r=i(9163).trim,a=i(5073),s=n.parseInt,o=/^[+-]?0[Xx]/,l=8!==s(a+"08")||22!==s(a+"0x16");t.exports=l?function(t,e){var i=r(String(t));return s(i,e>>>0||(o.test(i)?16:10))}:s},9720:(t,e,i)=>{t.exports=i(200)},242:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},9803:(t,e,i)=>{var n=i(3938),r=i(5335),a=i(9836);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=a.f(t);return(0,i.resolve)(e),i.promise}},1818:t=>{"use strict";var e=2147483647,i=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,r="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,o=function(t){return t+22+75*(t<26)},l=function(t,e,i){var n=0;for(t=i?a(t/700):t>>1,t+=a(t/e);t>455;n+=36)t=a(t/35);return a(n+36*t/(t+38))},h=function(t){var i=[];t=function(t){for(var e=[],i=0,n=t.length;i<n;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var a=t.charCodeAt(i++);56320==(64512&a)?e.push(((1023&r)<<10)+(1023&a)+65536):(e.push(r),i--)}else e.push(r)}return e}(t);var n,h,u=t.length,c=128,d=0,m=72;for(n=0;n<t.length;n++)(h=t[n])<128&&i.push(s(h));var p=i.length,f=p;for(p&&i.push("-");f<u;){var y=e;for(n=0;n<t.length;n++)(h=t[n])>=c&&h<y&&(y=h);var g=f+1;if(y-c>a((e-d)/g))throw RangeError(r);for(d+=(y-c)*g,c=y,n=0;n<t.length;n++){if((h=t[n])<c&&++d>e)throw RangeError(r);if(h==c){for(var _=d,v=36;;v+=36){var b=v<=m?1:v>=m+26?26:v-m;if(_<b)break;var M=_-b,x=36-b;i.push(s(o(b+M%x))),_=a(M/x)}i.push(s(o(_))),m=l(d,g,f==p),d=0,++f}}++d,++c}return i.join("")};t.exports=function(t){var e,r,a=[],s=t.toLowerCase().replace(n,".").split(".");for(e=0;e<s.length;e++)r=s[e],a.push(i.test(r)?"xn--"+h(r):r);return a.join(".")}},3075:(t,e,i)=>{var n=i(7485);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},7485:(t,e,i)=>{var n=i(200),r=i(2),a=i(1395),s=i(1883),o=i(5975),l=i(3467),h=i(9206),u=h.get,c=h.enforce,d=String(l).split("toString");r("inspectSource",(function(t){return l.call(t)})),(t.exports=function(t,e,i,r){var l=!!r&&!!r.unsafe,h=!!r&&!!r.enumerable,u=!!r&&!!r.noTargetGet;"function"==typeof i&&("string"!=typeof e||s(i,"name")||a(i,"name",e),c(i).source=d.join("string"==typeof e?e:"")),t!==n?(l?!u&&t[e]&&(h=!0):delete t[e],h?t[e]=i:a(t,e,i)):h?t[e]=i:o(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||l.call(this)}))},6793:(t,e,i)=>{var n=i(8569),r=i(54);t.exports=function(t,e){var i=t.exec;if("function"==typeof i){var a=i.call(t,e);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},54:(t,e,i)=>{"use strict";var n,r,a=i(6844),s=RegExp.prototype.exec,o=String.prototype.replace,l=s,h=(n=/a/,r=/b*/g,s.call(n,"a"),s.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),u=void 0!==/()??/.exec("")[1];(h||u)&&(l=function(t){var e,i,n,r,l=this;return u&&(i=new RegExp("^"+l.source+"$(?!\\s)",a.call(l))),h&&(e=l.lastIndex),n=s.call(l,t),h&&n&&(l.lastIndex=l.global?n.index+n[0].length:e),u&&n&&n.length>1&&o.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),t.exports=l},6844:(t,e,i)=>{"use strict";var n=i(3938);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1229:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},4741:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},5975:(t,e,i)=>{var n=i(200),r=i(1395);t.exports=function(t,e){try{r(n,t,e)}catch(i){n[t]=e}return e}},3524:(t,e,i)=>{"use strict";var n=i(6492),r=i(3610),a=i(1602),s=i(5077),o=a("species");t.exports=function(t){var e=n(t),i=r.f;s&&e&&!e[o]&&i(e,o,{configurable:!0,get:function(){return this}})}},5282:(t,e,i)=>{var n=i(3610).f,r=i(1883),a=i(1602)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,a)&&n(t,a,{configurable:!0,value:e})}},5904:(t,e,i)=>{var n=i(2),r=i(665),a=n("keys");t.exports=function(t){return a[t]||(a[t]=r(t))}},2:(t,e,i)=>{var n=i(200),r=i(5975),a=i(6926),s="__core-js_shared__",o=n[s]||r(s,{});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.2.1",mode:a?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},5144:(t,e,i)=>{"use strict";var n=i(2074);t.exports=function(t,e){var i=[][t];return!i||!n((function(){i.call(null,e||function(){throw 1},1)}))}},3444:(t,e,i)=>{var n=i(3938),r=i(9085),a=i(1602)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||null==(i=n(s)[a])?e:r(i)}},7804:(t,e,i)=>{var n=i(7317),r=i(1229),a=function(t){return function(e,i){var a,s,o=String(r(e)),l=n(i),h=o.length;return l<0||l>=h?t?"":void 0:(a=o.charCodeAt(l))<55296||a>56319||l+1===h||(s=o.charCodeAt(l+1))<56320||s>57343?t?o.charAt(l):a:t?o.slice(l,l+2):s-56320+(a-55296<<10)+65536}};t.exports={codeAt:a(!1),charAt:a(!0)}},5214:(t,e,i)=>{var n=i(3747),r=i(140),a=i(1229),s=Math.ceil,o=function(t){return function(e,i,o){var l,h,u=String(a(e)),c=u.length,d=void 0===o?" ":String(o),m=n(i);return m<=c||""==d?u:(l=m-c,(h=r.call(d,s(l/d.length))).length>l&&(h=h.slice(0,l)),t?u+h:h+u)}};t.exports={start:o(!1),end:o(!0)}},140:(t,e,i)=>{"use strict";var n=i(7317),r=i(1229);t.exports="".repeat||function(t){var e=String(r(this)),i="",a=n(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(i+=e);return i}},9163:(t,e,i)=>{var n=i(1229),r="["+i(5073)+"]",a=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),o=function(t){return function(e){var i=String(n(e));return 1&t&&(i=i.replace(a,"")),2&t&&(i=i.replace(s,"")),i}};t.exports={start:o(1),end:o(2),trim:o(3)}},4922:(t,e,i)=>{var n,r,a,s=i(200),o=i(2074),l=i(8569),h=i(9862),u=i(8890),c=i(3262),d=s.location,m=s.setImmediate,p=s.clearImmediate,f=s.process,y=s.MessageChannel,g=s.Dispatch,_=0,v={},b="onreadystatechange",M=function(t){if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},x=function(t){return function(){M(t)}},w=function(t){M(t.data)},S=function(t){s.postMessage(t+"",d.protocol+"//"+d.host)};m&&p||(m=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return v[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},n(_),_},p=function(t){delete v[t]},"process"==l(f)?n=function(t){f.nextTick(x(t))}:g&&g.now?n=function(t){g.now(x(t))}:y?(a=(r=new y).port2,r.port1.onmessage=w,n=h(a.postMessage,a,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||o(S)?n=b in c("script")?function(t){u.appendChild(c("script"))[b]=function(){u.removeChild(this),M(t)}}:function(t){setTimeout(x(t),0)}:(n=S,s.addEventListener("message",w,!1))),t.exports={set:m,clear:p}},7809:(t,e,i)=>{var n=i(8569);t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},6539:(t,e,i)=>{var n=i(7317),r=Math.max,a=Math.min;t.exports=function(t,e){var i=n(t);return i<0?r(i+e,0):a(i,e)}},6283:(t,e,i)=>{var n=i(7317),r=i(3747);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length or index");return i}},5476:(t,e,i)=>{var n=i(8664),r=i(1229);t.exports=function(t){return n(r(t))}},7317:t=>{var e=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:e)(t)}},3747:(t,e,i)=>{var n=i(7317),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},2612:(t,e,i)=>{var n=i(1229);t.exports=function(t){return Object(n(t))}},3720:(t,e,i)=>{var n=i(7317);t.exports=function(t,e){var i=n(t);if(i<0||i%e)throw RangeError("Wrong offset");return i}},874:(t,e,i)=>{var n=i(5335);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},3106:(t,e,i)=>{"use strict";var n=i(1605),r=i(200),a=i(5077),s=i(1328),o=i(5343),l=i(4497),h=i(5190),u=i(6843),c=i(1395),d=i(3747),m=i(6283),p=i(3720),f=i(874),y=i(1883),g=i(3062),_=i(5335),v=i(3105),b=i(9686),M=i(4789).f,x=i(2180),w=i(1344).forEach,S=i(3524),A=i(3610),T=i(7632),C=i(9206),I=C.get,k=C.set,P=A.f,E=T.f,D=Math.round,L=r.RangeError,z=l.ArrayBuffer,F=l.DataView,O=o.NATIVE_ARRAY_BUFFER_VIEWS,R=o.TYPED_ARRAY_TAG,N=o.TypedArray,B=o.TypedArrayPrototype,j=o.aTypedArrayConstructor,H=o.isTypedArray,U="BYTES_PER_ELEMENT",V="Wrong length",G=function(t,e){for(var i=0,n=e.length,r=new(j(t))(n);n>i;)r[i]=e[i++];return r},$=function(t,e){P(t,e,{get:function(){return I(this)[e]}})},Z=function(t){var e;return t instanceof z||"ArrayBuffer"==(e=g(t))||"SharedArrayBuffer"==e},q=function(t,e){return H(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Y=function(t,e){return q(t,e=f(e,!0))?u(2,t[e]):E(t,e)},W=function(t,e,i){return!(q(t,e=f(e,!0))&&_(i)&&y(i,"value"))||y(i,"get")||y(i,"set")||i.configurable||y(i,"writable")&&!i.writable||y(i,"enumerable")&&!i.enumerable?P(t,e,i):(t[e]=i.value,t)};a?(O||(T.f=Y,A.f=W,$(B,"buffer"),$(B,"byteOffset"),$(B,"byteLength"),$(B,"length")),n({target:"Object",stat:!0,forced:!O},{getOwnPropertyDescriptor:Y,defineProperty:W}),t.exports=function(t,e,i,a){var o=t+(a?"Clamped":"")+"Array",l="get"+t,u="set"+t,f=r[o],y=f,g=y&&y.prototype,A={},T=function(t,i){P(t,i,{get:function(){return function(t,i){var n=I(t);return n.view[l](i*e+n.byteOffset,!0)}(this,i)},set:function(t){return function(t,i,n){var r=I(t);a&&(n=(n=D(n))<0?0:n>255?255:255&n),r.view[u](i*e+r.byteOffset,n,!0)}(this,i,t)},enumerable:!0})};O?s&&(y=i((function(t,i,n,r){return h(t,y,o),_(i)?Z(i)?void 0!==r?new f(i,p(n,e),r):void 0!==n?new f(i,p(n,e)):new f(i):H(i)?G(y,i):x.call(y,i):new f(m(i))})),b&&b(y,N),w(M(f),(function(t){t in y||c(y,t,f[t])})),y.prototype=g):(y=i((function(t,i,n,r){h(t,y,o);var a,s,l,u=0,c=0;if(_(i)){if(!Z(i))return H(i)?G(y,i):x.call(y,i);a=i,c=p(n,e);var f=i.byteLength;if(void 0===r){if(f%e)throw L(V);if((s=f-c)<0)throw L(V)}else if((s=d(r)*e)+c>f)throw L(V);l=s/e}else l=m(i),a=new z(s=l*e);for(k(t,{buffer:a,byteOffset:c,byteLength:s,length:l,view:new F(a)});u<l;)T(t,u++)})),b&&b(y,N),g=y.prototype=v(B)),g.constructor!==y&&c(g,"constructor",y),R&&c(g,R,o),A[o]=y,n({global:!0,forced:y!=f,sham:!O},A),U in y||c(y,U,e),U in g||c(g,U,e),S(o)}):t.exports=function(){}},2180:(t,e,i)=>{var n=i(2612),r=i(3747),a=i(1898),s=i(9034),o=i(9862),l=i(5343).aTypedArrayConstructor;t.exports=function(t){var e,i,h,u,c,d=n(t),m=arguments.length,p=m>1?arguments[1]:void 0,f=void 0!==p,y=a(d);if(null!=y&&!s(y))for(c=y.call(d),d=[];!(u=c.next()).done;)d.push(u.value);for(f&&m>2&&(p=o(p,arguments[2],2)),i=r(d.length),h=new(l(this))(i),e=0;i>e;e++)h[e]=f?p(d[e],e):d[e];return h}},1328:(t,e,i)=>{var n=i(200),r=i(2074),a=i(7499),s=i(5343).NATIVE_ARRAY_BUFFER_VIEWS,o=n.ArrayBuffer,l=n.Int8Array;t.exports=!s||!r((function(){l(1)}))||!r((function(){new l(-1)}))||!a((function(t){new l,new l(null),new l(1.5),new l(t)}),!0)||r((function(){return 1!==new l(new o(2),1,void 0).length}))},665:t=>{var e=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+i).toString(36)}},6992:(t,e,i)=>{var n=i(6492);t.exports=n("navigator","userAgent")||""},1156:(t,e,i)=>{var n=i(6992);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},1602:(t,e,i)=>{var n=i(200),r=i(2),a=i(665),s=i(1849),o=n.Symbol,l=r("wks");t.exports=function(t){return l[t]||(l[t]=s&&o[t]||(s?o:a)("Symbol."+t))}},5073:t=>{t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},66:(t,e,i)=>{e.f=i(1602)},3446:(t,e,i)=>{"use strict";var n=i(1605),r=i(200),a=i(4497),s=i(3524),o="ArrayBuffer",l=a[o];n({global:!0,forced:r[o]!==l},{ArrayBuffer:l}),s(o)},3016:(t,e,i)=>{var n=i(1605),r=i(5343);n({target:"ArrayBuffer",stat:!0,forced:!r.NATIVE_ARRAY_BUFFER_VIEWS},{isView:r.isView})},1772:(t,e,i)=>{"use strict";var n=i(1605),r=i(2074),a=i(4497),s=i(3938),o=i(6539),l=i(3747),h=i(3444),u=a.ArrayBuffer,c=a.DataView,d=u.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(void 0!==d&&void 0===e)return d.call(s(this),t);for(var i=s(this).byteLength,n=o(t,i),r=o(void 0===e?i:e,i),a=new(h(this,u))(l(r-n)),m=new c(this),p=new c(a),f=0;n<r;)p.setUint8(f++,m.getUint8(n++));return a}})},115:(t,e,i)=>{"use strict";var n=i(1605),r=i(2074),a=i(8679),s=i(5335),o=i(2612),l=i(3747),h=i(2057),u=i(2998),c=i(5634),d=i(1602)("isConcatSpreadable"),m=9007199254740991,p="Maximum allowed index exceeded",f=!r((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=c("concat"),g=function(t){if(!s(t))return!1;var e=t[d];return void 0!==e?!!e:a(t)};n({target:"Array",proto:!0,forced:!f||!y},{concat:function(t){var e,i,n,r,a,s=o(this),c=u(s,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(g(a=-1===e?s:arguments[e])){if(d+(r=l(a.length))>m)throw TypeError(p);for(i=0;i<r;i++,d++)i in a&&h(c,d,a[i])}else{if(d>=m)throw TypeError(p);h(c,d++,a)}return c.length=d,c}})},1408:(t,e,i)=>{var n=i(1605),r=i(9688),a=i(298);n({target:"Array",proto:!0},{copyWithin:r}),a("copyWithin")},3604:(t,e,i)=>{"use strict";var n=i(1605),r=i(1344).every;n({target:"Array",proto:!0,forced:i(5144)("every")},{every:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},2982:(t,e,i)=>{var n=i(1605),r=i(7806),a=i(298);n({target:"Array",proto:!0},{fill:r}),a("fill")},17:(t,e,i)=>{"use strict";var n=i(1605),r=i(1344).filter;n({target:"Array",proto:!0,forced:!i(5634)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},2157:(t,e,i)=>{"use strict";var n=i(1605),r=i(1344).findIndex,a=i(298),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},8636:(t,e,i)=>{"use strict";var n=i(1605),r=i(1344).find,a=i(298),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},5755:(t,e,i)=>{"use strict";var n=i(1605),r=i(9608),a=i(2612),s=i(3747),o=i(9085),l=i(2998);n({target:"Array",proto:!0},{flatMap:function(t){var e,i=a(this),n=s(i.length);return o(t),(e=l(i,0)).length=r(e,i,i,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},1128:(t,e,i)=>{"use strict";var n=i(1605),r=i(9608),a=i(2612),s=i(3747),o=i(7317),l=i(2998);n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=a(this),i=s(e.length),n=l(e,0);return n.length=r(n,e,e,i,0,void 0===t?1:o(t)),n}})},8476:(t,e,i)=>{"use strict";var n=i(1605),r=i(516);n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},5195:(t,e,i)=>{var n=i(1605),r=i(1027);n({target:"Array",stat:!0,forced:!i(7499)((function(t){Array.from(t)}))},{from:r})},7746:(t,e,i)=>{"use strict";var n=i(1605),r=i(8186).includes,a=i(298);n({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},9693:(t,e,i)=>{"use strict";var n=i(1605),r=i(8186).indexOf,a=i(5144),s=[].indexOf,o=!!s&&1/[1].indexOf(1,-0)<0,l=a("indexOf");n({target:"Array",proto:!0,forced:o||l},{indexOf:function(t){return o?s.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},4895:(t,e,i)=>{i(1605)({target:"Array",stat:!0},{isArray:i(8679)})},8665:(t,e,i)=>{"use strict";var n=i(5476),r=i(298),a=i(2228),s=i(9206),o=i(5723),l="Array Iterator",h=s.set,u=s.getterFor(l);t.exports=o(Array,"Array",(function(t,e){h(this,{type:l,target:n(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},475:(t,e,i)=>{"use strict";var n=i(1605),r=i(8664),a=i(5476),s=i(5144),o=[].join,l=r!=Object,h=s("join",",");n({target:"Array",proto:!0,forced:l||h},{join:function(t){return o.call(a(this),void 0===t?",":t)}})},4582:(t,e,i)=>{var n=i(1605),r=i(3470);n({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},9581:(t,e,i)=>{"use strict";var n=i(1605),r=i(1344).map;n({target:"Array",proto:!0,forced:!i(5634)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},2630:(t,e,i)=>{"use strict";var n=i(1605),r=i(2074),a=i(2057);n({target:"Array",stat:!0,forced:r((function(){function t(){}return!(Array.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)a(i,t,arguments[t++]);return i.length=e,i}})},9958:(t,e,i)=>{"use strict";var n=i(1605),r=i(2237).right;n({target:"Array",proto:!0,forced:i(5144)("reduceRight")},{reduceRight:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},533:(t,e,i)=>{"use strict";var n=i(1605),r=i(2237).left;n({target:"Array",proto:!0,forced:i(5144)("reduce")},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},557:(t,e,i)=>{"use strict";var n=i(1605),r=i(8679),a=[].reverse,s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),a.call(this)}})},4913:(t,e,i)=>{"use strict";var n=i(1605),r=i(5335),a=i(8679),s=i(6539),o=i(3747),l=i(5476),h=i(2057),u=i(5634),c=i(1602)("species"),d=[].slice,m=Math.max;n({target:"Array",proto:!0,forced:!u("slice")},{slice:function(t,e){var i,n,u,p=l(this),f=o(p.length),y=s(t,f),g=s(void 0===e?f:e,f);if(a(p)&&("function"!=typeof(i=p.constructor)||i!==Array&&!a(i.prototype)?r(i)&&null===(i=i[c])&&(i=void 0):i=void 0,i===Array||void 0===i))return d.call(p,y,g);for(n=new(void 0===i?Array:i)(m(g-y,0)),u=0;y<g;y++,u++)y in p&&h(n,u,p[y]);return n.length=u,n}})},3555:(t,e,i)=>{"use strict";var n=i(1605),r=i(1344).some;n({target:"Array",proto:!0,forced:i(5144)("some")},{some:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},5231:(t,e,i)=>{"use strict";var n=i(1605),r=i(9085),a=i(2612),s=i(2074),o=i(5144),l=[].sort,h=[1,2,3],u=s((function(){h.sort(void 0)})),c=s((function(){h.sort(null)})),d=o("sort");n({target:"Array",proto:!0,forced:u||!c||d},{sort:function(t){return void 0===t?l.call(a(this)):l.call(a(this),r(t))}})},5941:(t,e,i)=>{i(3524)("Array")},8763:(t,e,i)=>{"use strict";var n=i(1605),r=i(6539),a=i(7317),s=i(3747),o=i(2612),l=i(2998),h=i(2057),u=i(5634),c=Math.max,d=Math.min;n({target:"Array",proto:!0,forced:!u("splice")},{splice:function(t,e){var i,n,u,m,p,f,y=o(this),g=s(y.length),_=r(t,g),v=arguments.length;if(0===v?i=n=0:1===v?(i=0,n=g-_):(i=v-2,n=d(c(a(e),0),g-_)),g+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=l(y,n),m=0;m<n;m++)(p=_+m)in y&&h(u,m,y[p]);if(u.length=n,i<n){for(m=_;m<g-n;m++)f=m+i,(p=m+n)in y?y[f]=y[p]:delete y[f];for(m=g;m>g-n+i;m--)delete y[m-1]}else if(i>n)for(m=g-n;m>_;m--)f=m+i-1,(p=m+n-1)in y?y[f]=y[p]:delete y[f];for(m=0;m<i;m++)y[m+_]=arguments[m+2];return y.length=g-n+i,u}})},9432:(t,e,i)=>{i(298)("flatMap")},5843:(t,e,i)=>{i(298)("flat")},3734:(t,e,i)=>{var n=i(1605),r=i(4497);n({global:!0,forced:!i(5343).NATIVE_ARRAY_BUFFER},{DataView:r.DataView})},9560:(t,e,i)=>{i(1605)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},2169:(t,e,i)=>{var n=i(1605),r=i(8523);n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==r},{toISOString:r})},3270:(t,e,i)=>{"use strict";var n=i(1605),r=i(2074),a=i(2612),s=i(874);n({target:"Date",proto:!0,forced:r((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=a(this),i=s(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},7787:(t,e,i)=>{var n=i(1395),r=i(1137),a=i(1602)("toPrimitive"),s=Date.prototype;a in s||n(s,a,r)},9389:(t,e,i)=>{var n=i(7485),r=Date.prototype,a="Invalid Date",s="toString",o=r[s],l=r.getTime;new Date(NaN)+""!=a&&n(r,s,(function(){var t=l.call(this);return t==t?o.call(this):a}))},4189:(t,e,i)=>{i(1605)({target:"Function",proto:!0},{bind:i(8891)})},7514:(t,e,i)=>{"use strict";var n=i(5335),r=i(3610),a=i(7970),s=i(1602)("hasInstance"),o=Function.prototype;s in o||r.f(o,s,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=a(t);)if(this.prototype===t)return!0;return!1}})},8741:(t,e,i)=>{var n=i(5077),r=i(3610).f,a=Function.prototype,s=a.toString,o=/^\s*function ([^ (]*)/,l="name";n&&!(l in a)&&r(a,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},1586:(t,e,i)=>{var n=i(200);i(5282)(n.JSON,"JSON",!0)},7918:(t,e,i)=>{"use strict";var n=i(2327),r=i(5959);t.exports=n("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r,!0)},8252:(t,e,i)=>{var n=i(1605),r=i(1855),a=Math.acosh,s=Math.log,o=Math.sqrt,l=Math.LN2;n({target:"Math",stat:!0,forced:!a||710!=Math.floor(a(Number.MAX_VALUE))||a(1/0)!=1/0},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?s(t)+l:r(t-1+o(t-1)*o(t+1))}})},2799:(t,e,i)=>{var n=i(1605),r=Math.asinh,a=Math.log,s=Math.sqrt;n({target:"Math",stat:!0,forced:!(r&&1/r(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):a(e+s(e*e+1)):e}})},6772:(t,e,i)=>{var n=i(1605),r=Math.atanh,a=Math.log;n({target:"Math",stat:!0,forced:!(r&&1/r(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:a((1+t)/(1-t))/2}})},5483:(t,e,i)=>{var n=i(1605),r=i(1211),a=Math.abs,s=Math.pow;n({target:"Math",stat:!0},{cbrt:function(t){return r(t=+t)*s(a(t),1/3)}})},7956:(t,e,i)=>{var n=i(1605),r=Math.floor,a=Math.log,s=Math.LOG2E;n({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-r(a(t+.5)*s):32}})},3733:(t,e,i)=>{var n=i(1605),r=i(6709),a=Math.cosh,s=Math.abs,o=Math.E;n({target:"Math",stat:!0,forced:!a||a(710)===1/0},{cosh:function(t){var e=r(s(t)-1)+1;return(e+1/(e*o*o))*(o/2)}})},9639:(t,e,i)=>{var n=i(1605),r=i(6709);n({target:"Math",stat:!0,forced:r!=Math.expm1},{expm1:r})},9570:(t,e,i)=>{i(1605)({target:"Math",stat:!0},{fround:i(4812)})},956:(t,e,i)=>{var n=i(1605),r=Math.hypot,a=Math.abs,s=Math.sqrt;n({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(t,e){for(var i,n,r=0,o=0,l=arguments.length,h=0;o<l;)h<(i=a(arguments[o++]))?(r=r*(n=h/i)*n+1,h=i):r+=i>0?(n=i/h)*n:i;return h===1/0?1/0:h*s(r)}})},9323:(t,e,i)=>{var n=i(1605),r=i(2074),a=Math.imul;n({target:"Math",stat:!0,forced:r((function(){return-5!=a(4294967295,5)||2!=a.length}))},{imul:function(t,e){var i=65535,n=+t,r=+e,a=i&n,s=i&r;return 0|a*s+((i&n>>>16)*s+a*(i&r>>>16)<<16>>>0)}})},1145:(t,e,i)=>{var n=i(1605),r=Math.log,a=Math.LOG10E;n({target:"Math",stat:!0},{log10:function(t){return r(t)*a}})},9897:(t,e,i)=>{i(1605)({target:"Math",stat:!0},{log1p:i(1855)})},3212:(t,e,i)=>{var n=i(1605),r=Math.log,a=Math.LN2;n({target:"Math",stat:!0},{log2:function(t){return r(t)/a}})},4538:(t,e,i)=>{i(1605)({target:"Math",stat:!0},{sign:i(1211)})},1610:(t,e,i)=>{var n=i(1605),r=i(2074),a=i(6709),s=Math.abs,o=Math.exp,l=Math.E;n({target:"Math",stat:!0,forced:r((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(t){return s(t=+t)<1?(a(t)-a(-t))/2:(o(t-1)-o(-t-1))*(l/2)}})},6097:(t,e,i)=>{var n=i(1605),r=i(6709),a=Math.exp;n({target:"Math",stat:!0},{tanh:function(t){var e=r(t=+t),i=r(-t);return e==1/0?1:i==1/0?-1:(e-i)/(a(t)+a(-t))}})},6982:(t,e,i)=>{i(5282)(Math,"Math",!0)},5812:(t,e,i)=>{var n=i(1605),r=Math.ceil,a=Math.floor;n({target:"Math",stat:!0},{trunc:function(t){return(t>0?a:r)(t)}})},4009:(t,e,i)=>{"use strict";var n=i(5077),r=i(200),a=i(4977),s=i(7485),o=i(1883),l=i(8569),h=i(3054),u=i(874),c=i(2074),d=i(3105),m=i(4789).f,p=i(7632).f,f=i(3610).f,y=i(9163).trim,g="Number",_=r[g],v=_.prototype,b=l(d(v))==g,M=function(t){var e,i,n,r,a,s,o,l,h=u(t,!1);if("string"==typeof h&&h.length>2)if(43===(e=(h=y(h)).charCodeAt(0))||45===e){if(88===(i=h.charCodeAt(2))||120===i)return NaN}else if(48===e){switch(h.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+h}for(s=(a=h.slice(2)).length,o=0;o<s;o++)if((l=a.charCodeAt(o))<48||l>r)return NaN;return parseInt(a,n)}return+h};if(a(g,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var x,w=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof w&&(b?c((function(){v.valueOf.call(i)})):l(i)!=g)?h(new _(M(e)),i,w):M(e)},S=n?m(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;S.length>A;A++)o(_,x=S[A])&&!o(w,x)&&f(w,x,p(_,x));w.prototype=v,v.constructor=w,s(r,g,w)}},6943:(t,e,i)=>{i(1605)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},577:(t,e,i)=>{i(1605)({target:"Number",stat:!0},{isFinite:i(1071)})},4038:(t,e,i)=>{i(1605)({target:"Number",stat:!0},{isInteger:i(9136)})},5365:(t,e,i)=>{i(1605)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},6316:(t,e,i)=>{var n=i(1605),r=i(9136),a=Math.abs;n({target:"Number",stat:!0},{isSafeInteger:function(t){return r(t)&&a(t)<=9007199254740991}})},2006:(t,e,i)=>{i(1605)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},8844:(t,e,i)=>{i(1605)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},6161:(t,e,i)=>{var n=i(1605),r=i(5175);n({target:"Number",stat:!0,forced:Number.parseFloat!=r},{parseFloat:r})},1902:(t,e,i)=>{var n=i(1605),r=i(1880);n({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},4867:(t,e,i)=>{"use strict";var n=i(1605),r=i(7317),a=i(7809),s=i(140),o=i(2074),l=1..toFixed,h=Math.floor,u=function(t,e,i){return 0===e?i:e%2==1?u(t,e-1,i*t):u(t*t,e/2,i)};n({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}))},{toFixed:function(t){var e,i,n,o,l=a(this),c=r(t),d=[0,0,0,0,0,0],m="",p="0",f=function(t,e){for(var i=-1,n=e;++i<6;)n+=t*d[i],d[i]=n%1e7,n=h(n/1e7)},y=function(t){for(var e=6,i=0;--e>=0;)i+=d[e],d[e]=h(i/t),i=i%t*1e7},g=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==d[t]){var i=String(d[t]);e=""===e?i:e+s.call("0",7-i.length)+i}return e};if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(l*u(2,69,1))-69)<0?l*u(2,-e,1):l/u(2,e,1),i*=4503599627370496,(e=52-e)>0){for(f(0,i),n=c;n>=7;)f(1e7,0),n-=7;for(f(u(10,n,1),0),n=e-1;n>=23;)y(1<<23),n-=23;y(1<<n),f(1,1),y(2),p=g()}else f(0,i),f(1<<-e,0),p=g()+s.call("0",c);return c>0?m+((o=p.length)<=c?"0."+s.call("0",c-o)+p:p.slice(0,o-c)+"."+p.slice(o-c)):m+p}})},769:(t,e,i)=>{"use strict";var n=i(1605),r=i(2074),a=i(7809),s=1..toPrecision;n({target:"Number",proto:!0,forced:r((function(){return"1"!==s.call(1,void 0)}))||!r((function(){s.call({})}))},{toPrecision:function(t){return void 0===t?s.call(a(this)):s.call(a(this),t)}})},9218:(t,e,i)=>{var n=i(1605),r=i(1688);n({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},7755:(t,e,i)=>{i(1605)({target:"Object",stat:!0,sham:!i(5077)},{create:i(3105)})},8538:(t,e,i)=>{"use strict";var n=i(1605),r=i(5077),a=i(7137),s=i(2612),o=i(9085),l=i(3610);r&&n({target:"Object",proto:!0,forced:a},{__defineGetter__:function(t,e){l.f(s(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},6012:(t,e,i)=>{var n=i(1605),r=i(5077);n({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperties:i(5318)})},5852:(t,e,i)=>{var n=i(1605),r=i(5077);n({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:i(3610).f})},6582:(t,e,i)=>{"use strict";var n=i(1605),r=i(5077),a=i(7137),s=i(2612),o=i(9085),l=i(3610);r&&n({target:"Object",proto:!0,forced:a},{__defineSetter__:function(t,e){l.f(s(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},4095:(t,e,i)=>{var n=i(1605),r=i(3172).entries;n({target:"Object",stat:!0},{entries:function(t){return r(t)}})},2824:(t,e,i)=>{var n=i(1605),r=i(5159),a=i(2074),s=i(5335),o=i(2014).onFreeze,l=Object.freeze;n({target:"Object",stat:!0,forced:a((function(){l(1)})),sham:!r},{freeze:function(t){return l&&s(t)?l(o(t)):t}})},5670:(t,e,i)=>{var n=i(1605),r=i(2929),a=i(2057);n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return r(t,(function(t,i){a(e,t,i)}),void 0,!0),e}})},678:(t,e,i)=>{var n=i(1605),r=i(2074),a=i(5476),s=i(7632).f,o=i(5077),l=r((function(){s(1)}));n({target:"Object",stat:!0,forced:!o||l,sham:!o},{getOwnPropertyDescriptor:function(t,e){return s(a(t),e)}})},3101:(t,e,i)=>{var n=i(1605),r=i(5077),a=i(5816),s=i(5476),o=i(7632),l=i(2057);n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){for(var e,i,n=s(t),r=o.f,h=a(n),u={},c=0;h.length>c;)void 0!==(i=r(n,e=h[c++]))&&l(u,e,i);return u}})},7579:(t,e,i)=>{var n=i(1605),r=i(2074),a=i(6509).f;n({target:"Object",stat:!0,forced:r((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:a})},1412:(t,e,i)=>{var n=i(1605),r=i(2074),a=i(2612),s=i(7970),o=i(7168);n({target:"Object",stat:!0,forced:r((function(){s(1)})),sham:!o},{getPrototypeOf:function(t){return s(a(t))}})},5933:(t,e,i)=>{var n=i(1605),r=i(2074),a=i(5335),s=Object.isExtensible;n({target:"Object",stat:!0,forced:r((function(){s(1)}))},{isExtensible:function(t){return!!a(t)&&(!s||s(t))}})},9250:(t,e,i)=>{var n=i(1605),r=i(2074),a=i(5335),s=Object.isFrozen;n({target:"Object",stat:!0,forced:r((function(){s(1)}))},{isFrozen:function(t){return!a(t)||!!s&&s(t)}})},4484:(t,e,i)=>{var n=i(1605),r=i(2074),a=i(5335),s=Object.isSealed;n({target:"Object",stat:!0,forced:r((function(){s(1)}))},{isSealed:function(t){return!a(t)||!!s&&s(t)}})},3023:(t,e,i)=>{i(1605)({target:"Object",stat:!0},{is:i(4741)})},7899:(t,e,i)=>{var n=i(1605),r=i(2612),a=i(1641);n({target:"Object",stat:!0,forced:i(2074)((function(){a(1)}))},{keys:function(t){return a(r(t))}})},4641:(t,e,i)=>{"use strict";var n=i(1605),r=i(5077),a=i(7137),s=i(2612),o=i(874),l=i(7970),h=i(7632).f;r&&n({target:"Object",proto:!0,forced:a},{__lookupGetter__:function(t){var e,i=s(this),n=o(t,!0);do{if(e=h(i,n))return e.get}while(i=l(i))}})},9437:(t,e,i)=>{"use strict";var n=i(1605),r=i(5077),a=i(7137),s=i(2612),o=i(874),l=i(7970),h=i(7632).f;r&&n({target:"Object",proto:!0,forced:a},{__lookupSetter__:function(t){var e,i=s(this),n=o(t,!0);do{if(e=h(i,n))return e.set}while(i=l(i))}})},8240:(t,e,i)=>{var n=i(1605),r=i(5335),a=i(2014).onFreeze,s=i(5159),o=i(2074),l=Object.preventExtensions;n({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!s},{preventExtensions:function(t){return l&&r(t)?l(a(t)):t}})},7258:(t,e,i)=>{var n=i(1605),r=i(5335),a=i(2014).onFreeze,s=i(5159),o=i(2074),l=Object.seal;n({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!s},{seal:function(t){return l&&r(t)?l(a(t)):t}})},4632:(t,e,i)=>{i(1605)({target:"Object",stat:!0},{setPrototypeOf:i(9686)})},5086:(t,e,i)=>{var n=i(7485),r=i(4972),a=Object.prototype;r!==a.toString&&n(a,"toString",r,{unsafe:!0})},345:(t,e,i)=>{var n=i(1605),r=i(3172).values;n({target:"Object",stat:!0},{values:function(t){return r(t)}})},6088:(t,e,i)=>{var n=i(1605),r=i(5175);n({global:!0,forced:parseFloat!=r},{parseFloat:r})},2231:(t,e,i)=>{var n=i(1605),r=i(1880);n({global:!0,forced:parseInt!=r},{parseInt:r})},5880:(t,e,i)=>{"use strict";var n=i(1605),r=i(9085),a=i(9836),s=i(242),o=i(2929);n({target:"Promise",stat:!0},{allSettled:function(t){var e=this,i=a.f(e),n=i.resolve,l=i.reject,h=s((function(){var i=r(e.resolve),a=[],s=0,l=1;o(t,(function(t){var r=s++,o=!1;a.push(void 0),l++,i.call(e,t).then((function(t){o||(o=!0,a[r]={status:"fulfilled",value:t},--l||n(a))}),(function(t){o||(o=!0,a[r]={status:"rejected",reason:t},--l||n(a))}))})),--l||n(a)}));return h.error&&l(h.value),i.promise}})},3396:(t,e,i)=>{"use strict";var n=i(1605),r=i(6926),a=i(3737),s=i(6492),o=i(3444),l=i(9803),h=i(7485);n({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=o(this,s("Promise")),i="function"==typeof t;return this.then(i?function(i){return l(e,t()).then((function(){return i}))}:t,i?function(i){return l(e,t()).then((function(){throw i}))}:t)}}),r||"function"!=typeof a||a.prototype.finally||h(a.prototype,"finally",s("Promise").prototype.finally)},9193:(t,e,i)=>{"use strict";var n,r,a,s,o=i(1605),l=i(6926),h=i(200),u=i(9720),c=i(3737),d=i(7485),m=i(3075),p=i(5282),f=i(3524),y=i(5335),g=i(9085),_=i(5190),v=i(8569),b=i(2929),M=i(7499),x=i(3444),w=i(4922).set,S=i(7462),A=i(9803),T=i(9778),C=i(9836),I=i(242),k=i(6992),P=i(9206),E=i(4977),D=i(1602)("species"),L="Promise",z=P.get,F=P.set,O=P.getterFor(L),R=c,N=h.TypeError,B=h.document,j=h.process,H=h.fetch,U=j&&j.versions,V=U&&U.v8||"",G=C.f,$=G,Z="process"==v(j),q=!!(B&&B.createEvent&&h.dispatchEvent),Y="unhandledrejection",W=E(L,(function(){var t=R.resolve(1),e=function(){},i=(t.constructor={})[D]=function(t){t(e,e)};return!((Z||"function"==typeof PromiseRejectionEvent)&&(!l||t.finally)&&t.then(e)instanceof i&&0!==V.indexOf("6.6")&&-1===k.indexOf("Chrome/66"))})),J=W||!M((function(t){R.all(t).catch((function(){}))})),X=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},K=function(t,e,i){if(!e.notified){e.notified=!0;var n=e.reactions;S((function(){for(var r=e.value,a=1==e.state,s=0;n.length>s;){var o,l,h,u=n[s++],c=a?u.ok:u.fail,d=u.resolve,m=u.reject,p=u.domain;try{c?(a||(2===e.rejection&&it(t,e),e.rejection=1),!0===c?o=r:(p&&p.enter(),o=c(r),p&&(p.exit(),h=!0)),o===u.promise?m(N("Promise-chain cycle")):(l=X(o))?l.call(o,d,m):d(o)):m(r)}catch(t){p&&!h&&p.exit(),m(t)}}e.reactions=[],e.notified=!1,i&&!e.rejection&&tt(t,e)}))}},Q=function(t,e,i){var n,r;q?((n=B.createEvent("Event")).promise=e,n.reason=i,n.initEvent(t,!1,!0),h.dispatchEvent(n)):n={promise:e,reason:i},(r=h["on"+t])?r(n):t===Y&&T("Unhandled promise rejection",i)},tt=function(t,e){w.call(h,(function(){var i,n=e.value;if(et(e)&&(i=I((function(){Z?j.emit("unhandledRejection",n,t):Q(Y,t,n)})),e.rejection=Z||et(e)?2:1,i.error))throw i.value}))},et=function(t){return 1!==t.rejection&&!t.parent},it=function(t,e){w.call(h,(function(){Z?j.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)}))},nt=function(t,e,i,n){return function(r){t(e,i,r,n)}},rt=function(t,e,i,n){e.done||(e.done=!0,n&&(e=n),e.value=i,e.state=2,K(t,e,!0))},at=function(t,e,i,n){if(!e.done){e.done=!0,n&&(e=n);try{if(t===i)throw N("Promise can't be resolved itself");var r=X(i);r?S((function(){var n={done:!1};try{r.call(i,nt(at,t,n,e),nt(rt,t,n,e))}catch(i){rt(t,n,i,e)}})):(e.value=i,e.state=1,K(t,e,!1))}catch(i){rt(t,{done:!1},i,e)}}};W&&(R=function(t){_(this,R,L),g(t),n.call(this);var e=z(this);try{t(nt(at,this,e),nt(rt,this,e))}catch(t){rt(this,e,t)}},(n=function(t){F(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=m(R.prototype,{then:function(t,e){var i=O(this),n=G(x(this,R));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Z?j.domain:void 0,i.parent=!0,i.reactions.push(n),0!=i.state&&K(this,i,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new n,e=z(t);this.promise=t,this.resolve=nt(at,t,e),this.reject=nt(rt,t,e)},C.f=G=function(t){return t===R||t===a?new r(t):$(t)},l||"function"!=typeof c||(s=c.prototype.then,d(c.prototype,"then",(function(t,e){var i=this;return new R((function(t,e){s.call(i,t,e)})).then(t,e)})),"function"==typeof H&&o({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return A(R,H.apply(h,arguments))}}))),o({global:!0,wrap:!0,forced:W},{Promise:R}),p(R,L,!1,!0),f(L),a=u[L],o({target:L,stat:!0,forced:W},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),o({target:L,stat:!0,forced:l||W},{resolve:function(t){return A(l&&this===a?R:this,t)}}),o({target:L,stat:!0,forced:J},{all:function(t){var e=this,i=G(e),n=i.resolve,r=i.reject,a=I((function(){var i=g(e.resolve),a=[],s=0,o=1;b(t,(function(t){var l=s++,h=!1;a.push(void 0),o++,i.call(e,t).then((function(t){h||(h=!0,a[l]=t,--o||n(a))}),r)})),--o||n(a)}));return a.error&&r(a.value),i.promise},race:function(t){var e=this,i=G(e),n=i.reject,r=I((function(){var r=g(e.resolve);b(t,(function(t){r.call(e,t).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}})},7811:(t,e,i)=>{var n=i(1605),r=i(6492),a=i(9085),s=i(3938),o=i(2074),l=r("Reflect","apply"),h=Function.apply;n({target:"Reflect",stat:!0,forced:!o((function(){l((function(){}))}))},{apply:function(t,e,i){return a(t),s(i),l?l(t,e,i):h.call(t,e,i)}})},4606:(t,e,i)=>{var n=i(1605),r=i(6492),a=i(9085),s=i(3938),o=i(5335),l=i(3105),h=i(8891),u=i(2074),c=r("Reflect","construct"),d=u((function(){function t(){}return!(c((function(){}),[],t)instanceof t)})),m=!u((function(){c((function(){}))})),p=d||m;n({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){a(t),s(e);var i=arguments.length<3?t:a(arguments[2]);if(m&&!d)return c(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(h.apply(t,n))}var r=i.prototype,u=l(o(r)?r:Object.prototype),p=Function.apply.call(t,u,e);return o(p)?p:u}})},7948:(t,e,i)=>{var n=i(1605),r=i(5077),a=i(3938),s=i(874),o=i(3610);n({target:"Reflect",stat:!0,forced:i(2074)((function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})})),sham:!r},{defineProperty:function(t,e,i){a(t);var n=s(e,!0);a(i);try{return o.f(t,n,i),!0}catch(t){return!1}}})},436:(t,e,i)=>{var n=i(1605),r=i(3938),a=i(7632).f;n({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var i=a(r(t),e);return!(i&&!i.configurable)&&delete t[e]}})},8182:(t,e,i)=>{var n=i(1605),r=i(5077),a=i(3938),s=i(7632);n({target:"Reflect",stat:!0,sham:!r},{getOwnPropertyDescriptor:function(t,e){return s.f(a(t),e)}})},2276:(t,e,i)=>{var n=i(1605),r=i(3938),a=i(7970);n({target:"Reflect",stat:!0,sham:!i(7168)},{getPrototypeOf:function(t){return a(r(t))}})},2091:(t,e,i)=>{var n=i(1605),r=i(5335),a=i(3938),s=i(1883),o=i(7632),l=i(7970);n({target:"Reflect",stat:!0},{get:function t(e,i){var n,h,u=arguments.length<3?e:arguments[2];return a(e)===u?e[i]:(n=o.f(e,i))?s(n,"value")?n.value:void 0===n.get?void 0:n.get.call(u):r(h=l(e))?t(h,i,u):void 0}})},5031:(t,e,i)=>{i(1605)({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})},9853:(t,e,i)=>{var n=i(1605),r=i(3938),a=Object.isExtensible;n({target:"Reflect",stat:!0},{isExtensible:function(t){return r(t),!a||a(t)}})},4308:(t,e,i)=>{i(1605)({target:"Reflect",stat:!0},{ownKeys:i(5816)})},4912:(t,e,i)=>{var n=i(1605),r=i(6492),a=i(3938);n({target:"Reflect",stat:!0,sham:!i(5159)},{preventExtensions:function(t){a(t);try{var e=r("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}})},7144:(t,e,i)=>{var n=i(1605),r=i(3938),a=i(7473),s=i(9686);s&&n({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){r(t),a(e);try{return s(t,e),!0}catch(t){return!1}}})},7759:(t,e,i)=>{var n=i(1605),r=i(3938),a=i(5335),s=i(1883),o=i(3610),l=i(7632),h=i(7970),u=i(6843);n({target:"Reflect",stat:!0},{set:function t(e,i,n){var c,d,m=arguments.length<4?e:arguments[3],p=l.f(r(e),i);if(!p){if(a(d=h(e)))return t(d,i,n,m);p=u(0)}if(s(p,"value")){if(!1===p.writable||!a(m))return!1;if(c=l.f(m,i)){if(c.get||c.set||!1===c.writable)return!1;c.value=n,o.f(m,i,c)}else o.f(m,i,u(0,n));return!0}return void 0!==p.set&&(p.set.call(m,n),!0)}})},9073:(t,e,i)=>{var n=i(5077),r=i(200),a=i(4977),s=i(3054),o=i(3610).f,l=i(4789).f,h=i(2449),u=i(6844),c=i(7485),d=i(2074),m=i(3524),p=i(1602)("match"),f=r.RegExp,y=f.prototype,g=/a/g,_=/a/g,v=new f(g)!==g;if(n&&a("RegExp",!v||d((function(){return _[p]=!1,f(g)!=g||f(_)==_||"/a/i"!=f(g,"i")})))){for(var b=function(t,e){var i=this instanceof b,n=h(t),r=void 0===e;return!i&&n&&t.constructor===b&&r?t:s(v?new f(n&&!r?t.source:t,e):f((n=t instanceof b)?t.source:t,n&&r?u.call(t):e),i?this:y,b)},M=function(t){t in b||o(b,t,{configurable:!0,get:function(){return f[t]},set:function(e){f[t]=e}})},x=l(f),w=0;x.length>w;)M(x[w++]);y.constructor=b,b.prototype=y,c(r,"RegExp",b)}m("RegExp")},7136:(t,e,i)=>{"use strict";var n=i(1605),r=i(54);n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},8802:(t,e,i)=>{var n=i(5077),r=i(3610),a=i(6844);n&&"g"!=/./g.flags&&r.f(RegExp.prototype,"flags",{configurable:!0,get:a})},6048:(t,e,i)=>{"use strict";var n=i(7485),r=i(3938),a=i(2074),s=i(6844),o="toString",l=RegExp.prototype,h=l[o],u=a((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),c=h.name!=o;(u||c)&&n(RegExp.prototype,o,(function(){var t=r(this),e=String(t.source),i=t.flags;return"/"+e+"/"+String(void 0===i&&t instanceof RegExp&&!("flags"in l)?s.call(t):i)}),{unsafe:!0})},5708:(t,e,i)=>{"use strict";var n=i(2327),r=i(5959);t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},9596:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("anchor")},{anchor:function(t){return r(this,"a","name",t)}})},4607:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("big")},{big:function(){return r(this,"big","","")}})},8915:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("blink")},{blink:function(){return r(this,"blink","","")}})},5594:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("bold")},{bold:function(){return r(this,"b","","")}})},4657:(t,e,i)=>{"use strict";var n=i(1605),r=i(7804).codeAt;n({target:"String",proto:!0},{codePointAt:function(t){return r(this,t)}})},7500:(t,e,i)=>{"use strict";var n=i(1605),r=i(3747),a=i(2588),s=i(1229),o=i(4177),l="".endsWith,h=Math.min;n({target:"String",proto:!0,forced:!o("endsWith")},{endsWith:function(t){var e=String(s(this));a(t);var i=arguments.length>1?arguments[1]:void 0,n=r(e.length),o=void 0===i?n:h(r(i),n),u=String(t);return l?l.call(e,u,o):e.slice(o-u.length,o)===u}})},9607:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("fixed")},{fixed:function(){return r(this,"tt","","")}})},5193:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("fontcolor")},{fontcolor:function(t){return r(this,"font","color",t)}})},8505:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("fontsize")},{fontsize:function(t){return r(this,"font","size",t)}})},5784:(t,e,i)=>{var n=i(1605),r=i(6539),a=String.fromCharCode,s=String.fromCodePoint;n({target:"String",stat:!0,forced:!!s&&1!=s.length},{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},3148:(t,e,i)=>{"use strict";var n=i(1605),r=i(2588),a=i(1229);n({target:"String",proto:!0,forced:!i(4177)("includes")},{includes:function(t){return!!~String(a(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},3024:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("italics")},{italics:function(){return r(this,"i","","")}})},9979:(t,e,i)=>{"use strict";var n=i(7804).charAt,r=i(9206),a=i(5723),s="String Iterator",o=r.set,l=r.getterFor(s);a(String,"String",(function(t){o(this,{type:s,string:String(t),index:0})}),(function(){var t,e=l(this),i=e.string,r=e.index;return r>=i.length?{value:void 0,done:!0}:(t=n(i,r),e.index+=t.length,{value:t,done:!1})}))},7249:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("link")},{link:function(t){return r(this,"a","href",t)}})},7870:(t,e,i)=>{"use strict";var n=i(1605),r=i(2147),a=i(1229),s=i(3747),o=i(9085),l=i(3938),h=i(3062),u=i(6844),c=i(1395),d=i(1602),m=i(3444),p=i(7234),f=i(9206),y=i(6926),g=d("matchAll"),_="RegExp String",v=_+" Iterator",b=f.set,M=f.getterFor(v),x=RegExp.prototype,w=x.exec,S=r((function(t,e,i,n){b(this,{type:v,regexp:t,string:e,global:i,unicode:n,done:!1})}),_,(function(){var t=M(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,i=t.string,n=function(t,e){var i,n=t.exec;if("function"==typeof n){if("object"!=typeof(i=n.call(t,e)))throw TypeError("Incorrect exec result");return i}return w.call(t,e)}(e,i);return null===n?{value:void 0,done:t.done=!0}:t.global?(""==String(n[0])&&(e.lastIndex=p(i,s(e.lastIndex),t.unicode)),{value:n,done:!1}):(t.done=!0,{value:n,done:!1})})),A=function(t){var e,i,n,r,a,o,h=l(this),c=String(t);return e=m(h,RegExp),void 0===(i=h.flags)&&h instanceof RegExp&&!("flags"in x)&&(i=u.call(h)),n=void 0===i?"":String(i),r=new e(e===RegExp?h.source:h,n),a=!!~n.indexOf("g"),o=!!~n.indexOf("u"),r.lastIndex=s(h.lastIndex),new S(r,c,a,o)};n({target:"String",proto:!0},{matchAll:function(t){var e,i,n,r=a(this);return null!=t&&(void 0===(i=t[g])&&y&&"RegExp"==h(t)&&(i=A),null!=i)?o(i).call(t,r):(e=String(r),n=new RegExp(t,"g"),y?A.call(n,e):n[g](e))}}),y||g in x||c(x,g,A)},6255:(t,e,i)=>{"use strict";var n=i(779),r=i(3938),a=i(3747),s=i(1229),o=i(7234),l=i(6793);n("match",1,(function(t,e,i){return[function(e){var i=s(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var s=r(t),h=String(this);if(!s.global)return l(s,h);var u=s.unicode;s.lastIndex=0;for(var c,d=[],m=0;null!==(c=l(s,h));){var p=String(c[0]);d[m]=p,""===p&&(s.lastIndex=o(h,a(s.lastIndex),u)),m++}return 0===m?null:d}]}))},3848:(t,e,i)=>{"use strict";var n=i(1605),r=i(5214).end;n({target:"String",proto:!0,forced:i(1156)},{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},8825:(t,e,i)=>{"use strict";var n=i(1605),r=i(5214).start;n({target:"String",proto:!0,forced:i(1156)},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},7287:(t,e,i)=>{var n=i(1605),r=i(5476),a=i(3747);n({target:"String",stat:!0},{raw:function(t){for(var e=r(t.raw),i=a(e.length),n=arguments.length,s=[],o=0;i>o;)s.push(String(e[o++])),o<n&&s.push(String(arguments[o]));return s.join("")}})},1890:(t,e,i)=>{i(1605)({target:"String",proto:!0},{repeat:i(140)})},173:(t,e,i)=>{"use strict";var n=i(779),r=i(3938),a=i(2612),s=i(3747),o=i(7317),l=i(1229),h=i(7234),u=i(6793),c=Math.max,d=Math.min,m=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g;n("replace",2,(function(t,e,i){return[function(i,n){var r=l(this),a=null==i?void 0:i[t];return void 0!==a?a.call(i,r,n):e.call(String(r),i,n)},function(t,a){var l=i(e,t,this,a);if(l.done)return l.value;var m=r(t),p=String(this),f="function"==typeof a;f||(a=String(a));var y=m.global;if(y){var g=m.unicode;m.lastIndex=0}for(var _=[];;){var v=u(m,p);if(null===v)break;if(_.push(v),!y)break;""===String(v[0])&&(m.lastIndex=h(p,s(m.lastIndex),g))}for(var b,M="",x=0,w=0;w<_.length;w++){v=_[w];for(var S=String(v[0]),A=c(d(o(v.index),p.length),0),T=[],C=1;C<v.length;C++)T.push(void 0===(b=v[C])?b:String(b));var I=v.groups;if(f){var k=[S].concat(T,A,p);void 0!==I&&k.push(I);var P=String(a.apply(void 0,k))}else P=n(S,p,A,T,I,a);A>=x&&(M+=p.slice(x,A)+P,x=A+S.length)}return M+p.slice(x)}];function n(t,i,n,r,s,o){var l=n+t.length,h=r.length,u=f;return void 0!==s&&(s=a(s),u=p),e.call(o,u,(function(e,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,n);case"'":return i.slice(l);case"<":o=s[a.slice(1,-1)];break;default:var u=+a;if(0===u)return e;if(u>h){var c=m(u/10);return 0===c?e:c<=h?void 0===r[c-1]?a.charAt(1):r[c-1]+a.charAt(1):e}o=r[u-1]}return void 0===o?"":o}))}}))},785:(t,e,i)=>{"use strict";var n=i(779),r=i(3938),a=i(1229),s=i(4741),o=i(6793);n("search",1,(function(t,e,i){return[function(e){var i=a(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var a=r(t),l=String(this),h=a.lastIndex;s(h,0)||(a.lastIndex=0);var u=o(a,l);return s(a.lastIndex,h)||(a.lastIndex=h),null===u?-1:u.index}]}))},5038:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("small")},{small:function(){return r(this,"small","","")}})},8649:(t,e,i)=>{"use strict";var n=i(779),r=i(2449),a=i(3938),s=i(1229),o=i(3444),l=i(7234),h=i(3747),u=i(6793),c=i(54),d=i(2074),m=[].push,p=Math.min,f=4294967295,y=!d((function(){return!RegExp(f,"y")}));n("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(s(this)),a=void 0===i?f:i>>>0;if(0===a)return[];if(void 0===t)return[n];if(!r(t))return e.call(n,t,a);for(var o,l,h,u=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,y=new RegExp(t.source,d+"g");(o=c.call(y,n))&&!((l=y.lastIndex)>p&&(u.push(n.slice(p,o.index)),o.length>1&&o.index<n.length&&m.apply(u,o.slice(1)),h=o[0].length,p=l,u.length>=a));)y.lastIndex===o.index&&y.lastIndex++;return p===n.length?!h&&y.test("")||u.push(""):u.push(n.slice(p)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var r=s(this),a=null==e?void 0:e[t];return void 0!==a?a.call(e,r,i):n.call(String(r),e,i)},function(t,r){var s=i(n,t,this,r,n!==e);if(s.done)return s.value;var c=a(t),d=String(this),m=o(c,RegExp),g=c.unicode,_=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(y?"y":"g"),v=new m(y?c:"^(?:"+c.source+")",_),b=void 0===r?f:r>>>0;if(0===b)return[];if(0===d.length)return null===u(v,d)?[d]:[];for(var M=0,x=0,w=[];x<d.length;){v.lastIndex=y?x:0;var S,A=u(v,y?d:d.slice(x));if(null===A||(S=p(h(v.lastIndex+(y?0:x)),d.length))===M)x=l(d,x,g);else{if(w.push(d.slice(M,x)),w.length===b)return w;for(var T=1;T<=A.length-1;T++)if(w.push(A[T]),w.length===b)return w;x=M=S}}return w.push(d.slice(M)),w}]}),!y)},4989:(t,e,i)=>{"use strict";var n=i(1605),r=i(3747),a=i(2588),s=i(1229),o=i(4177),l="".startsWith,h=Math.min;n({target:"String",proto:!0,forced:!o("startsWith")},{startsWith:function(t){var e=String(s(this));a(t);var i=r(h(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return l?l.call(e,n,i):e.slice(i,i+n.length)===n}})},4427:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("strike")},{strike:function(){return r(this,"strike","","")}})},5987:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("sub")},{sub:function(){return r(this,"sub","","")}})},8293:(t,e,i)=>{"use strict";var n=i(1605),r=i(9877);n({target:"String",proto:!0,forced:i(626)("sup")},{sup:function(){return r(this,"sup","","")}})},825:(t,e,i)=>{"use strict";var n=i(1605),r=i(9163).end,a=i(4653)("trimEnd"),s=a?function(){return r(this)}:"".trimEnd;n({target:"String",proto:!0,forced:a},{trimEnd:s,trimRight:s})},5336:(t,e,i)=>{"use strict";var n=i(1605),r=i(9163).start,a=i(4653)("trimStart"),s=a?function(){return r(this)}:"".trimStart;n({target:"String",proto:!0,forced:a},{trimStart:s,trimLeft:s})},8329:(t,e,i)=>{"use strict";var n=i(1605),r=i(9163).trim;n({target:"String",proto:!0,forced:i(4653)("trim")},{trim:function(){return r(this)}})},7727:(t,e,i)=>{i(1272)("asyncIterator")},590:(t,e,i)=>{"use strict";var n=i(1605),r=i(5077),a=i(200),s=i(1883),o=i(5335),l=i(3610).f,h=i(4361),u=a.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var c={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new u(t):void 0===t?u():u(t);return""===t&&(c[e]=!0),e};h(d,u);var m=d.prototype=u.prototype;m.constructor=d;var p=m.toString,f="Symbol(test)"==String(u("test")),y=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=p.call(t);if(s(c,t))return"";var i=f?e.slice(7,-1):e.replace(y,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:d})}},8290:(t,e,i)=>{i(1272)("hasInstance")},2619:(t,e,i)=>{i(1272)("isConcatSpreadable")},4216:(t,e,i)=>{i(1272)("iterator")},3534:(t,e,i)=>{"use strict";var n=i(1605),r=i(200),a=i(6926),s=i(5077),o=i(1849),l=i(2074),h=i(1883),u=i(8679),c=i(5335),d=i(3938),m=i(2612),p=i(5476),f=i(874),y=i(6843),g=i(3105),_=i(1641),v=i(4789),b=i(6509),M=i(8916),x=i(7632),w=i(3610),S=i(9304),A=i(1395),T=i(7485),C=i(2),I=i(5904),k=i(7708),P=i(665),E=i(1602),D=i(66),L=i(1272),z=i(5282),F=i(9206),O=i(1344).forEach,R=I("hidden"),N="Symbol",B="prototype",j=E("toPrimitive"),H=F.set,U=F.getterFor(N),V=Object[B],G=r.Symbol,$=r.JSON,Z=$&&$.stringify,q=x.f,Y=w.f,W=b.f,J=S.f,X=C("symbols"),K=C("op-symbols"),Q=C("string-to-symbol-registry"),tt=C("symbol-to-string-registry"),et=C("wks"),it=r.QObject,nt=!it||!it[B]||!it[B].findChild,rt=s&&l((function(){return 7!=g(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=q(V,e);n&&delete V[e],Y(t,e,i),n&&t!==V&&Y(V,e,n)}:Y,at=function(t,e){var i=X[t]=g(G[B]);return H(i,{type:N,tag:t,description:e}),s||(i.description=e),i},st=o&&"symbol"==typeof G.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},ot=function(t,e,i){t===V&&ot(K,e,i),d(t);var n=f(e,!0);return d(i),h(X,n)?(i.enumerable?(h(t,R)&&t[R][n]&&(t[R][n]=!1),i=g(i,{enumerable:y(0,!1)})):(h(t,R)||Y(t,R,y(1,{})),t[R][n]=!0),rt(t,n,i)):Y(t,n,i)},lt=function(t,e){d(t);var i=p(e),n=_(i).concat(dt(i));return O(n,(function(e){s&&!ht.call(i,e)||ot(t,e,i[e])})),t},ht=function(t){var e=f(t,!0),i=J.call(this,e);return!(this===V&&h(X,e)&&!h(K,e))&&(!(i||!h(this,e)||!h(X,e)||h(this,R)&&this[R][e])||i)},ut=function(t,e){var i=p(t),n=f(e,!0);if(i!==V||!h(X,n)||h(K,n)){var r=q(i,n);return!r||!h(X,n)||h(i,R)&&i[R][n]||(r.enumerable=!0),r}},ct=function(t){var e=W(p(t)),i=[];return O(e,(function(t){h(X,t)||h(k,t)||i.push(t)})),i},dt=function(t){var e=t===V,i=W(e?K:p(t)),n=[];return O(i,(function(t){!h(X,t)||e&&!h(V,t)||n.push(X[t])})),n};o||(T((G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=P(t),i=function(t){this===V&&i.call(K,t),h(this,R)&&h(this[R],e)&&(this[R][e]=!1),rt(this,e,y(1,t))};return s&&nt&&rt(V,e,{configurable:!0,set:i}),at(e,t)})[B],"toString",(function(){return U(this).tag})),S.f=ht,w.f=ot,x.f=ut,v.f=b.f=ct,M.f=dt,s&&(Y(G[B],"description",{configurable:!0,get:function(){return U(this).description}}),a||T(V,"propertyIsEnumerable",ht,{unsafe:!0})),D.f=function(t){return at(E(t),t)}),n({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:G}),O(_(et),(function(t){L(t)})),n({target:N,stat:!0,forced:!o},{for:function(t){var e=String(t);if(h(Q,e))return Q[e];var i=G(e);return Q[e]=i,tt[i]=e,i},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(h(tt,t))return tt[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),n({target:"Object",stat:!0,forced:!o,sham:!s},{create:function(t,e){return void 0===e?g(t):lt(g(t),e)},defineProperty:ot,defineProperties:lt,getOwnPropertyDescriptor:ut}),n({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:ct,getOwnPropertySymbols:dt}),n({target:"Object",stat:!0,forced:l((function(){M.f(1)}))},{getOwnPropertySymbols:function(t){return M.f(m(t))}}),$&&n({target:"JSON",stat:!0,forced:!o||l((function(){var t=G();return"[null]"!=Z([t])||"{}"!=Z({a:t})||"{}"!=Z(Object(t))}))},{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(c(e)||void 0!==t)&&!st(t))return u(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!st(e))return e}),n[1]=e,Z.apply($,n)}}),G[B][j]||A(G[B],j,G[B].valueOf),z(G,N),k[R]=!0},6195:(t,e,i)=>{i(1272)("matchAll")},2957:(t,e,i)=>{i(1272)("match")},4100:(t,e,i)=>{i(1272)("replace")},3006:(t,e,i)=>{i(1272)("search")},4910:(t,e,i)=>{i(1272)("species")},2820:(t,e,i)=>{i(1272)("split")},6611:(t,e,i)=>{i(1272)("toPrimitive")},9576:(t,e,i)=>{i(1272)("toStringTag")},9747:(t,e,i)=>{i(1272)("unscopables")},861:(t,e,i)=>{"use strict";var n=i(5343),r=i(9688),a=n.aTypedArray;n.exportProto("copyWithin",(function(t,e){return r.call(a(this),t,e,arguments.length>2?arguments[2]:void 0)}))},1905:(t,e,i)=>{"use strict";var n=i(5343),r=i(1344).every,a=n.aTypedArray;n.exportProto("every",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},5213:(t,e,i)=>{"use strict";var n=i(5343),r=i(7806),a=n.aTypedArray;n.exportProto("fill",(function(t){return r.apply(a(this),arguments)}))},7182:(t,e,i)=>{"use strict";var n=i(5343),r=i(1344).filter,a=i(3444),s=n.aTypedArray,o=n.aTypedArrayConstructor;n.exportProto("filter",(function(t){for(var e=r(s(this),t,arguments.length>1?arguments[1]:void 0),i=a(this,this.constructor),n=0,l=e.length,h=new(o(i))(l);l>n;)h[n]=e[n++];return h}))},9302:(t,e,i)=>{"use strict";var n=i(5343),r=i(1344).findIndex,a=n.aTypedArray;n.exportProto("findIndex",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},2279:(t,e,i)=>{"use strict";var n=i(5343),r=i(1344).find,a=n.aTypedArray;n.exportProto("find",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},5889:(t,e,i)=>{i(3106)("Float32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},4758:(t,e,i)=>{i(3106)("Float64",8,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},147:(t,e,i)=>{"use strict";var n=i(5343),r=i(1344).forEach,a=n.aTypedArray;n.exportProto("forEach",(function(t){r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},6148:(t,e,i)=>{"use strict";var n=i(1328),r=i(5343),a=i(2180);r.exportStatic("from",a,n)},6217:(t,e,i)=>{"use strict";var n=i(5343),r=i(8186).includes,a=n.aTypedArray;n.exportProto("includes",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},7966:(t,e,i)=>{"use strict";var n=i(5343),r=i(8186).indexOf,a=n.aTypedArray;n.exportProto("indexOf",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},9096:(t,e,i)=>{i(3106)("Int16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},7950:(t,e,i)=>{i(3106)("Int32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},5679:(t,e,i)=>{i(3106)("Int8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},5186:(t,e,i)=>{"use strict";var n=i(200),r=i(5343),a=i(8665),s=i(1602)("iterator"),o=n.Uint8Array,l=a.values,h=a.keys,u=a.entries,c=r.aTypedArray,d=r.exportProto,m=o&&o.prototype[s],p=!!m&&("values"==m.name||null==m.name),f=function(){return l.call(c(this))};d("entries",(function(){return u.call(c(this))})),d("keys",(function(){return h.call(c(this))})),d("values",f,!p),d(s,f,!p)},5944:(t,e,i)=>{"use strict";var n=i(5343),r=n.aTypedArray,a=[].join;n.exportProto("join",(function(t){return a.apply(r(this),arguments)}))},4787:(t,e,i)=>{"use strict";var n=i(5343),r=i(3470),a=n.aTypedArray;n.exportProto("lastIndexOf",(function(t){return r.apply(a(this),arguments)}))},632:(t,e,i)=>{"use strict";var n=i(5343),r=i(1344).map,a=i(3444),s=n.aTypedArray,o=n.aTypedArrayConstructor;n.exportProto("map",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(a(t,t.constructor)))(e)}))}))},6609:(t,e,i)=>{"use strict";var n=i(5343),r=i(1328),a=n.aTypedArrayConstructor;n.exportStatic("of",(function(){for(var t=0,e=arguments.length,i=new(a(this))(e);e>t;)i[t]=arguments[t++];return i}),r)},4245:(t,e,i)=>{"use strict";var n=i(5343),r=i(2237).right,a=n.aTypedArray;n.exportProto("reduceRight",(function(t){return r(a(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2278:(t,e,i)=>{"use strict";var n=i(5343),r=i(2237).left,a=n.aTypedArray;n.exportProto("reduce",(function(t){return r(a(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2492:(t,e,i)=>{"use strict";var n=i(5343),r=n.aTypedArray,a=Math.floor;n.exportProto("reverse",(function(){for(var t,e=this,i=r(e).length,n=a(i/2),s=0;s<n;)t=e[s],e[s++]=e[--i],e[i]=t;return e}))},3266:(t,e,i)=>{"use strict";var n=i(5343),r=i(3747),a=i(3720),s=i(2612),o=i(2074),l=n.aTypedArray,h=o((function(){new Int8Array(1).set({})}));n.exportProto("set",(function(t){l(this);var e=a(arguments.length>1?arguments[1]:void 0,1),i=this.length,n=s(t),o=r(n.length),h=0;if(o+e>i)throw RangeError("Wrong length");for(;h<o;)this[e+h]=n[h++]}),h)},7192:(t,e,i)=>{"use strict";var n=i(5343),r=i(3444),a=i(2074),s=n.aTypedArray,o=n.aTypedArrayConstructor,l=[].slice,h=a((function(){new Int8Array(1).slice()}));n.exportProto("slice",(function(t,e){for(var i=l.call(s(this),t,e),n=r(this,this.constructor),a=0,h=i.length,u=new(o(n))(h);h>a;)u[a]=i[a++];return u}),h)},7220:(t,e,i)=>{"use strict";var n=i(5343),r=i(1344).some,a=n.aTypedArray;n.exportProto("some",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},2432:(t,e,i)=>{"use strict";var n=i(5343),r=n.aTypedArray,a=[].sort;n.exportProto("sort",(function(t){return a.call(r(this),t)}))},2483:(t,e,i)=>{"use strict";var n=i(5343),r=i(3747),a=i(6539),s=i(3444),o=n.aTypedArray;n.exportProto("subarray",(function(t,e){var i=o(this),n=i.length,l=a(t,n);return new(s(i,i.constructor))(i.buffer,i.byteOffset+l*i.BYTES_PER_ELEMENT,r((void 0===e?n:a(e,n))-l))}))},6696:(t,e,i)=>{"use strict";var n=i(200),r=i(5343),a=i(2074),s=n.Int8Array,o=r.aTypedArray,l=[].toLocaleString,h=[].slice,u=!!s&&a((function(){l.call(new s(1))})),c=a((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!a((function(){s.prototype.toLocaleString.call([1,2])}));r.exportProto("toLocaleString",(function(){return l.apply(u?h.call(o(this)):o(this),arguments)}),c)},8083:(t,e,i)=>{"use strict";var n=i(200),r=i(5343),a=i(2074),s=n.Uint8Array,o=s&&s.prototype,l=[].toString,h=[].join;a((function(){l.call({})}))&&(l=function(){return h.call(this)}),r.exportProto("toString",l,(o||{}).toString!=l)},6395:(t,e,i)=>{i(3106)("Uint16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},2357:(t,e,i)=>{i(3106)("Uint32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},3746:(t,e,i)=>{i(3106)("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},9513:(t,e,i)=>{i(3106)("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}),!0)},121:(t,e,i)=>{"use strict";var n,r=i(200),a=i(3075),s=i(2014),o=i(2327),l=i(6784),h=i(5335),u=i(9206).enforce,c=i(2886),d=!r.ActiveXObject&&"ActiveXObject"in r,m=Object.isExtensible,p=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},f=t.exports=o("WeakMap",p,l,!0,!0);if(c&&d){n=l.getConstructor(p,"WeakMap",!0),s.REQUIRED=!0;var y=f.prototype,g=y.delete,_=y.has,v=y.get,b=y.set;a(y,{delete:function(t){if(h(t)&&!m(t)){var e=u(this);return e.frozen||(e.frozen=new n),g.call(this,t)||e.frozen.delete(t)}return g.call(this,t)},has:function(t){if(h(t)&&!m(t)){var e=u(this);return e.frozen||(e.frozen=new n),_.call(this,t)||e.frozen.has(t)}return _.call(this,t)},get:function(t){if(h(t)&&!m(t)){var e=u(this);return e.frozen||(e.frozen=new n),_.call(this,t)?v.call(this,t):e.frozen.get(t)}return v.call(this,t)},set:function(t,e){if(h(t)&&!m(t)){var i=u(this);i.frozen||(i.frozen=new n),_.call(this,t)?b.call(this,t,e):i.frozen.set(t,e)}else b.call(this,t,e);return this}})}},863:(t,e,i)=>{"use strict";i(2327)("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i(6784),!1,!0)},8379:(t,e,i)=>{var n=i(200),r=i(5549),a=i(516),s=i(1395);for(var o in r){var l=n[o],h=l&&l.prototype;if(h&&h.forEach!==a)try{s(h,"forEach",a)}catch(t){h.forEach=a}}},4602:(t,e,i)=>{var n=i(200),r=i(5549),a=i(8665),s=i(1395),o=i(1602),l=o("iterator"),h=o("toStringTag"),u=a.values;for(var c in r){var d=n[c],m=d&&d.prototype;if(m){if(m[l]!==u)try{s(m,l,u)}catch(t){m[l]=u}if(m[h]||s(m,h,c),r[c])for(var p in a)if(m[p]!==a[p])try{s(m,p,a[p])}catch(t){m[p]=a[p]}}}},5417:(t,e,i)=>{var n=i(200),r=i(4922),a=!n.setImmediate||!n.clearImmediate;i(1605)({global:!0,bind:!0,enumerable:!0,forced:a},{setImmediate:r.set,clearImmediate:r.clear})},5183:(t,e,i)=>{var n=i(1605),r=i(200),a=i(7462),s=i(8569),o=r.process,l="process"==s(o);n({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=l&&o.domain;a(e?e.bind(t):t)}})},8772:(t,e,i)=>{var n=i(1605),r=i(200),a=i(6992),s=[].slice,o=function(t){return function(e,i){var n=arguments.length>2,r=n?s.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:o(r.setTimeout),setInterval:o(r.setInterval)})},933:(t,e,i)=>{"use strict";i(8665);var n=i(1605),r=i(4516),a=i(7485),s=i(3075),o=i(5282),l=i(2147),h=i(9206),u=i(5190),c=i(1883),d=i(9862),m=i(3938),p=i(5335),f=i(9526),y=i(1898),g=i(1602)("iterator"),_="URLSearchParams",v=_+"Iterator",b=h.set,M=h.getterFor(_),x=h.getterFor(v),w=/\+/g,S=Array(4),A=function(t){return S[t-1]||(S[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},T=function(t){try{return decodeURIComponent(t)}catch(e){return t}},C=function(t){var e=t.replace(w," "),i=4;try{return decodeURIComponent(e)}catch(t){for(;i;)e=e.replace(A(i--),T);return e}},I=/[!'()~]|%20/g,k={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},P=function(t){return k[t]},E=function(t){return encodeURIComponent(t).replace(I,P)},D=function(t,e){if(e)for(var i,n,r=e.split("&"),a=0;a<r.length;)(i=r[a++]).length&&(n=i.split("="),t.push({key:C(n.shift()),value:C(n.join("="))}))},L=function(t){this.entries.length=0,D(this.entries,t)},z=function(t,e){if(t<e)throw TypeError("Not enough arguments")},F=l((function(t,e){b(this,{type:v,iterator:f(M(t).entries),kind:e})}),"Iterator",(function(){var t=x(this),e=t.kind,i=t.iterator.next(),n=i.value;return i.done||(i.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),i})),O=function(){u(this,O,_);var t,e,i,n,r,a,s,o=arguments.length>0?arguments[0]:void 0,l=[];if(b(this,{type:_,entries:l,updateURL:function(){},updateSearchParams:L}),void 0!==o)if(p(o))if("function"==typeof(t=y(o)))for(e=t.call(o);!(i=e.next()).done;){if((r=(n=f(m(i.value))).next()).done||(a=n.next()).done||!n.next().done)throw TypeError("Expected sequence with length 2");l.push({key:r.value+"",value:a.value+""})}else for(s in o)c(o,s)&&l.push({key:s,value:o[s]+""});else D(l,"string"==typeof o?"?"===o.charAt(0)?o.slice(1):o:o+"")},R=O.prototype;s(R,{append:function(t,e){z(arguments.length,2);var i=M(this);i.entries.push({key:t+"",value:e+""}),i.updateURL()},delete:function(t){z(arguments.length,1);for(var e=M(this),i=e.entries,n=t+"",r=0;r<i.length;)i[r].key===n?i.splice(r,1):r++;e.updateURL()},get:function(t){z(arguments.length,1);for(var e=M(this).entries,i=t+"",n=0;n<e.length;n++)if(e[n].key===i)return e[n].value;return null},getAll:function(t){z(arguments.length,1);for(var e=M(this).entries,i=t+"",n=[],r=0;r<e.length;r++)e[r].key===i&&n.push(e[r].value);return n},has:function(t){z(arguments.length,1);for(var e=M(this).entries,i=t+"",n=0;n<e.length;)if(e[n++].key===i)return!0;return!1},set:function(t,e){z(arguments.length,1);for(var i,n=M(this),r=n.entries,a=!1,s=t+"",o=e+"",l=0;l<r.length;l++)(i=r[l]).key===s&&(a?r.splice(l--,1):(a=!0,i.value=o));a||r.push({key:s,value:o}),n.updateURL()},sort:function(){var t,e,i,n=M(this),r=n.entries,a=r.slice();for(r.length=0,i=0;i<a.length;i++){for(t=a[i],e=0;e<i;e++)if(r[e].key>t.key){r.splice(e,0,t);break}e===i&&r.push(t)}n.updateURL()},forEach:function(t){for(var e,i=M(this).entries,n=d(t,arguments.length>1?arguments[1]:void 0,3),r=0;r<i.length;)n((e=i[r++]).value,e.key,this)},keys:function(){return new F(this,"keys")},values:function(){return new F(this,"values")},entries:function(){return new F(this,"entries")}},{enumerable:!0}),a(R,g,R.entries),a(R,"toString",(function(){for(var t,e=M(this).entries,i=[],n=0;n<e.length;)t=e[n++],i.push(E(t.key)+"="+E(t.value));return i.join("&")}),{enumerable:!0}),o(O,_),n({global:!0,forced:!r},{URLSearchParams:O}),t.exports={URLSearchParams:O,getState:M}},789:(t,e,i)=>{"use strict";i(9979);var n,r=i(1605),a=i(5077),s=i(4516),o=i(200),l=i(5318),h=i(7485),u=i(5190),c=i(1883),d=i(1688),m=i(1027),p=i(7804).codeAt,f=i(1818),y=i(5282),g=i(933),_=i(9206),v=o.URL,b=g.URLSearchParams,M=g.getState,x=_.set,w=_.getterFor("URL"),S=Math.floor,A=Math.pow,T="Invalid scheme",C="Invalid host",I="Invalid port",k=/[A-Za-z]/,P=/[\d+\-.A-Za-z]/,E=/\d/,D=/^(0x|0X)/,L=/^[0-7]+$/,z=/^\d+$/,F=/^[\dA-Fa-f]+$/,O=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,R=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,N=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,B=/[\u0009\u000A\u000D]/g,j=function(t,e){var i,n,r;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return C;if(!(i=U(e.slice(1,-1))))return C;t.host=i}else if(J(t)){if(e=f(e),O.test(e))return C;if(null===(i=H(e)))return C;t.host=i}else{if(R.test(e))return C;for(i="",n=m(e),r=0;r<n.length;r++)i+=Y(n[r],G);t.host=i}},H=function(t){var e,i,n,r,a,s,o,l=t.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(e=l.length)>4)return t;for(i=[],n=0;n<e;n++){if(""==(r=l[n]))return t;if(a=10,r.length>1&&"0"==r.charAt(0)&&(a=D.test(r)?16:8,r=r.slice(8==a?1:2)),""===r)s=0;else{if(!(10==a?z:8==a?L:F).test(r))return t;s=parseInt(r,a)}i.push(s)}for(n=0;n<e;n++)if(s=i[n],n==e-1){if(s>=A(256,5-e))return null}else if(s>255)return null;for(o=i.pop(),n=0;n<i.length;n++)o+=i[n]*A(256,3-n);return o},U=function(t){var e,i,n,r,a,s,o,l=[0,0,0,0,0,0,0,0],h=0,u=null,c=0,d=function(){return t.charAt(c)};if(":"==d()){if(":"!=t.charAt(1))return;c+=2,u=++h}for(;d();){if(8==h)return;if(":"!=d()){for(e=i=0;i<4&&F.test(d());)e=16*e+parseInt(d(),16),c++,i++;if("."==d()){if(0==i)return;if(c-=i,h>6)return;for(n=0;d();){if(r=null,n>0){if(!("."==d()&&n<4))return;c++}if(!E.test(d()))return;for(;E.test(d());){if(a=parseInt(d(),10),null===r)r=a;else{if(0==r)return;r=10*r+a}if(r>255)return;c++}l[h]=256*l[h]+r,2!=++n&&4!=n||h++}if(4!=n)return;break}if(":"==d()){if(c++,!d())return}else if(d())return;l[h++]=e}else{if(null!==u)return;c++,u=++h}}if(null!==u)for(s=h-u,h=7;0!=h&&s>0;)o=l[h],l[h--]=l[u+s-1],l[u+--s]=o;else if(8!=h)return;return l},V=function(t){var e,i,n,r;if("number"==typeof t){for(e=[],i=0;i<4;i++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,i=1,n=null,r=0,a=0;a<8;a++)0!==t[a]?(r>i&&(e=n,i=r),n=null,r=0):(null===n&&(n=a),++r);return r>i&&(e=n,i=r),e}(t),i=0;i<8;i++)r&&0===t[i]||(r&&(r=!1),n===i?(e+=i?":":"::",r=!0):(e+=t[i].toString(16),i<7&&(e+=":")));return"["+e+"]"}return t},G={},$=d({},G,{" ":1,'"':1,"<":1,">":1,"`":1}),Z=d({},$,{"#":1,"?":1,"{":1,"}":1}),q=d({},Z,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Y=function(t,e){var i=p(t,0);return i>32&&i<127&&!c(e,t)?t:encodeURIComponent(t)},W={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},J=function(t){return c(W,t.scheme)},X=function(t){return""!=t.username||""!=t.password},K=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},Q=function(t,e){var i;return 2==t.length&&k.test(t.charAt(0))&&(":"==(i=t.charAt(1))||!e&&"|"==i)},tt=function(t){var e;return t.length>1&&Q(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},et=function(t){var e=t.path,i=e.length;!i||"file"==t.scheme&&1==i&&Q(e[0],!0)||e.pop()},it=function(t){return"."===t||"%2e"===t.toLowerCase()},nt={},rt={},at={},st={},ot={},lt={},ht={},ut={},ct={},dt={},mt={},pt={},ft={},yt={},gt={},_t={},vt={},bt={},Mt={},xt={},wt={},St=function(t,e,i,r){var a,s,o,l,h,u=i||nt,d=0,p="",f=!1,y=!1,g=!1;for(i||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(N,"")),e=e.replace(B,""),a=m(e);d<=a.length;){switch(s=a[d],u){case nt:if(!s||!k.test(s)){if(i)return T;u=at;continue}p+=s.toLowerCase(),u=rt;break;case rt:if(s&&(P.test(s)||"+"==s||"-"==s||"."==s))p+=s.toLowerCase();else{if(":"!=s){if(i)return T;p="",u=at,d=0;continue}if(i&&(J(t)!=c(W,p)||"file"==p&&(X(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=p,i)return void(J(t)&&W[t.scheme]==t.port&&(t.port=null));p="","file"==t.scheme?u=yt:J(t)&&r&&r.scheme==t.scheme?u=st:J(t)?u=ut:"/"==a[d+1]?(u=ot,d++):(t.cannotBeABaseURL=!0,t.path.push(""),u=Mt)}break;case at:if(!r||r.cannotBeABaseURL&&"#"!=s)return T;if(r.cannotBeABaseURL&&"#"==s){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,u=wt;break}u="file"==r.scheme?yt:lt;continue;case st:if("/"!=s||"/"!=a[d+1]){u=lt;continue}u=ct,d++;break;case ot:if("/"==s){u=dt;break}u=bt;continue;case lt:if(t.scheme=r.scheme,s==n)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==s||"\\"==s&&J(t))u=ht;else if("?"==s)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",u=xt;else{if("#"!=s){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),u=bt;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=wt}break;case ht:if(!J(t)||"/"!=s&&"\\"!=s){if("/"!=s){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,u=bt;continue}u=dt}else u=ct;break;case ut:if(u=ct,"/"!=s||"/"!=p.charAt(d+1))continue;d++;break;case ct:if("/"!=s&&"\\"!=s){u=dt;continue}break;case dt:if("@"==s){f&&(p="%40"+p),f=!0,o=m(p);for(var _=0;_<o.length;_++){var v=o[_];if(":"!=v||g){var b=Y(v,q);g?t.password+=b:t.username+=b}else g=!0}p=""}else if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&J(t)){if(f&&""==p)return"Invalid authority";d-=m(p).length+1,p="",u=mt}else p+=s;break;case mt:case pt:if(i&&"file"==t.scheme){u=_t;continue}if(":"!=s||y){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&J(t)){if(J(t)&&""==p)return C;if(i&&""==p&&(X(t)||null!==t.port))return;if(l=j(t,p))return l;if(p="",u=vt,i)return;continue}"["==s?y=!0:"]"==s&&(y=!1),p+=s}else{if(""==p)return C;if(l=j(t,p))return l;if(p="",u=ft,i==pt)return}break;case ft:if(!E.test(s)){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&J(t)||i){if(""!=p){var M=parseInt(p,10);if(M>65535)return I;t.port=J(t)&&M===W[t.scheme]?null:M,p=""}if(i)return;u=vt;continue}return I}p+=s;break;case yt:if(t.scheme="file","/"==s||"\\"==s)u=gt;else{if(!r||"file"!=r.scheme){u=bt;continue}if(s==n)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==s)t.host=r.host,t.path=r.path.slice(),t.query="",u=xt;else{if("#"!=s){tt(a.slice(d).join(""))||(t.host=r.host,t.path=r.path.slice(),et(t)),u=bt;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=wt}}break;case gt:if("/"==s||"\\"==s){u=_t;break}r&&"file"==r.scheme&&!tt(a.slice(d).join(""))&&(Q(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),u=bt;continue;case _t:if(s==n||"/"==s||"\\"==s||"?"==s||"#"==s){if(!i&&Q(p))u=bt;else if(""==p){if(t.host="",i)return;u=vt}else{if(l=j(t,p))return l;if("localhost"==t.host&&(t.host=""),i)return;p="",u=vt}continue}p+=s;break;case vt:if(J(t)){if(u=bt,"/"!=s&&"\\"!=s)continue}else if(i||"?"!=s)if(i||"#"!=s){if(s!=n&&(u=bt,"/"!=s))continue}else t.fragment="",u=wt;else t.query="",u=xt;break;case bt:if(s==n||"/"==s||"\\"==s&&J(t)||!i&&("?"==s||"#"==s)){if(".."===(h=(h=p).toLowerCase())||"%2e."===h||".%2e"===h||"%2e%2e"===h?(et(t),"/"==s||"\\"==s&&J(t)||t.path.push("")):it(p)?"/"==s||"\\"==s&&J(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Q(p)&&(t.host&&(t.host=""),p=p.charAt(0)+":"),t.path.push(p)),p="","file"==t.scheme&&(s==n||"?"==s||"#"==s))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==s?(t.query="",u=xt):"#"==s&&(t.fragment="",u=wt)}else p+=Y(s,Z);break;case Mt:"?"==s?(t.query="",u=xt):"#"==s?(t.fragment="",u=wt):s!=n&&(t.path[0]+=Y(s,G));break;case xt:i||"#"!=s?s!=n&&("'"==s&&J(t)?t.query+="%27":t.query+="#"==s?"%23":Y(s,G)):(t.fragment="",u=wt);break;case wt:s!=n&&(t.fragment+=Y(s,$))}d++}},At=function(t){var e,i,n=u(this,At,"URL"),r=arguments.length>1?arguments[1]:void 0,s=String(t),o=x(n,{type:"URL"});if(void 0!==r)if(r instanceof At)e=w(r);else if(i=St(e={},String(r)))throw TypeError(i);if(i=St(o,s,null,e))throw TypeError(i);var l=o.searchParams=new b,h=M(l);h.updateSearchParams(o.query),h.updateURL=function(){o.query=String(l)||null},a||(n.href=Ct.call(n),n.origin=It.call(n),n.protocol=kt.call(n),n.username=Pt.call(n),n.password=Et.call(n),n.host=Dt.call(n),n.hostname=Lt.call(n),n.port=zt.call(n),n.pathname=Ft.call(n),n.search=Ot.call(n),n.searchParams=Rt.call(n),n.hash=Nt.call(n))},Tt=At.prototype,Ct=function(){var t=w(this),e=t.scheme,i=t.username,n=t.password,r=t.host,a=t.port,s=t.path,o=t.query,l=t.fragment,h=e+":";return null!==r?(h+="//",X(t)&&(h+=i+(n?":"+n:"")+"@"),h+=V(r),null!==a&&(h+=":"+a)):"file"==e&&(h+="//"),h+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==o&&(h+="?"+o),null!==l&&(h+="#"+l),h},It=function(){var t=w(this),e=t.scheme,i=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&J(t)?e+"://"+V(t.host)+(null!==i?":"+i:""):"null"},kt=function(){return w(this).scheme+":"},Pt=function(){return w(this).username},Et=function(){return w(this).password},Dt=function(){var t=w(this),e=t.host,i=t.port;return null===e?"":null===i?V(e):V(e)+":"+i},Lt=function(){var t=w(this).host;return null===t?"":V(t)},zt=function(){var t=w(this).port;return null===t?"":String(t)},Ft=function(){var t=w(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ot=function(){var t=w(this).query;return t?"?"+t:""},Rt=function(){return w(this).searchParams},Nt=function(){var t=w(this).fragment;return t?"#"+t:""},Bt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(a&&l(Tt,{href:Bt(Ct,(function(t){var e=w(this),i=String(t),n=St(e,i);if(n)throw TypeError(n);M(e.searchParams).updateSearchParams(e.query)})),origin:Bt(It),protocol:Bt(kt,(function(t){var e=w(this);St(e,String(t)+":",nt)})),username:Bt(Pt,(function(t){var e=w(this),i=m(String(t));if(!K(e)){e.username="";for(var n=0;n<i.length;n++)e.username+=Y(i[n],q)}})),password:Bt(Et,(function(t){var e=w(this),i=m(String(t));if(!K(e)){e.password="";for(var n=0;n<i.length;n++)e.password+=Y(i[n],q)}})),host:Bt(Dt,(function(t){var e=w(this);e.cannotBeABaseURL||St(e,String(t),mt)})),hostname:Bt(Lt,(function(t){var e=w(this);e.cannotBeABaseURL||St(e,String(t),pt)})),port:Bt(zt,(function(t){var e=w(this);K(e)||(""==(t=String(t))?e.port=null:St(e,t,ft))})),pathname:Bt(Ft,(function(t){var e=w(this);e.cannotBeABaseURL||(e.path=[],St(e,t+"",vt))})),search:Bt(Ot,(function(t){var e=w(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",St(e,t,xt)),M(e.searchParams).updateSearchParams(e.query)})),searchParams:Bt(Rt),hash:Bt(Nt,(function(t){var e=w(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",St(e,t,wt)):e.fragment=null}))}),h(Tt,"toJSON",(function(){return Ct.call(this)}),{enumerable:!0}),h(Tt,"toString",(function(){return Ct.call(this)}),{enumerable:!0}),v){var jt=v.createObjectURL,Ht=v.revokeObjectURL;jt&&h(At,"createObjectURL",(function(t){return jt.apply(v,arguments)})),Ht&&h(At,"revokeObjectURL",(function(t){return Ht.apply(v,arguments)}))}y(At,"URL"),r({global:!0,forced:!s,sham:!a},{URL:At})},8565:(t,e,i)=>{"use strict";i(1605)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},5108:(t,e,i)=>{i(9279),i(3415),i(9720)},3415:(t,e,i)=>{i(8379),i(4602),i(5417),i(5183),i(8772),i(789),i(8565),i(933),t.exports=i(9720)},3926:function(t,e,i){!function(t,e){"use strict";var i=function(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}(e),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var a=function(){return(a=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e,i){if(i||2===arguments.length)for(var n,r=0,a=e.length;r<a;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}var o=function(t){function e(e,n){var r=t.call(this)||this;return r.polyline=i.polyline(e,n),r.polygon=i.polygon(e,a(a({},n),{weight:0})),r}return r(e,t),e.prototype.onAdd=function(t){return this.polyline.addTo(t),this.polygon.addTo(t),this},e.prototype.onRemove=function(){return this.polyline.remove(),this.polygon.remove(),this},e.prototype.addLatLng=function(t){return this.polyline.addLatLng(t),this.polygon.addLatLng(t),this},e.prototype.getLatLngs=function(){return this.polygon.getLatLngs()[0]},e.prototype.toGeoJSON=function(){return this.polygon.toGeoJSON()},e}(i.Layer),l=function(t){for(var e=null,i=null,n=null,r=null,a=0;a<t.length;a++){var s=t[a],o=s[0],l=s[1];(null===e||o<e)&&(e=o),(null===i||o>i)&&(i=o),(null===n||l<n)&&(n=l),(null===r||l>r)&&(r=l)}return[e,n,i,r]},h=function t(e){if(e.type)switch(e.type){case"Point":return[e.coordinates[0],e.coordinates[1],e.coordinates[0],e.coordinates[1]];case"MultiPoint":case"LineString":return l(e.coordinates);case"MultiLineString":case"Polygon":return function(t){for(var e=null,i=null,n=null,r=null,a=0;a<t.length;a++)for(var s=t[a],o=0;o<s.length;o++){var l=s[o],h=l[0],u=l[1];(null===e||h<e)&&(e=h),(null===i||h>i)&&(i=h),(null===n||u<n)&&(n=u),(null===r||u>r)&&(r=u)}return[e,n,i,r]}(e.coordinates);case"MultiPolygon":return function(t){for(var e=null,i=null,n=null,r=null,a=0;a<t.length;a++)for(var s=t[a],o=0;o<s.length;o++)for(var l=s[o],h=0;h<l.length;h++){var u=l[h],c=u[0],d=u[1];(null===e||c<e)&&(e=c),(null===i||c>i)&&(i=c),(null===n||d<n)&&(n=d),(null===r||d>r)&&(r=d)}return[e,n,i,r]}(e.coordinates);case"Feature":return e.geometry?t(e.geometry):null;case"FeatureCollection":return function(t){for(var e=[],i=t.features.length-1;i>=0;i--){var n=h(t.features[i].geometry);e.push([n[0],n[1]]),e.push([n[2],n[3]])}return l(e)}(e);case"GeometryCollection":return function(t){for(var e=[],i=t.geometries.length-1;i>=0;i--){var n=h(t.geometries[i]);e.push([n[0],n[1]]),e.push([n[2],n[3]])}return l(e)}(e);default:throw new Error("Unknown type: "+e.type)}return null},u=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},c=function(t,e,i,n){var r=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),a=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),s=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!==s){var o=r/s,l=a/s;if(o>=0&&o<=1&&l>=0&&l<=1)return!0}return!1},d=function t(e,i){if(u(e[0][0])){if(u(i[0][0])){for(var n=0;n<e.length-1;n++)for(var r=0;r<i.length-1;r++)if(c(e[n],e[n+1],i[r],i[r+1]))return!0}else for(var a=0;a<i.length;a++)if(t(e,i[a]))return!0}else for(var s=0;s<e.length;s++)if(t(e[s],i))return!0;return!1},m=function(t,e){for(var i=!1,n=-1,r=t.length,a=r-1;++n<r;a=n)(t[n][1]<=e[1]&&e[1]<t[a][1]||t[a][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[a][0]-t[n][0])*(e[1]-t[n][1])/(t[a][1]-t[n][1])+t[n][0]&&(i=!i);return i},p=function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},f=function(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:t[1]>e[1]?-1:t[1]<e[1]?1:0},y=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].slice();!1===p(n[0],n[n.length-1])&&n.push(n[0]),e.push(n)}return e},g=function(t,e){if(t.length!==e.length)return!1;for(var i=t.slice().sort(f),n=e.slice().sort(f),r=0;r<i.length;r++){if(i[r].length!==n[r].length)return!1;for(var a=0;a<i.length;a++)if(i[r][a]!==n[r][a])return!1}return!0},_=function(t,e){if(t&&t.length){if(1===t.length)return m(t[0],e);if(m(t[0],e)){for(var i=1;i<t.length;i++)if(m(t[i],e))return!1;return!0}return!1}return!1},v=function t(e,i){var n,r,a;if("Feature"===i.type&&(i=i.geometry),"Point"===i.type&&"Point"===e.type)return p(e.coordinates,i.coordinates);if("MultiLineString"===i.type&&"Point"===e.type)for(r=0;r<e.coordinates.length;r++)if(t(e,{type:"LineString",coordinates:i.coordinates[r]}))return!0;if(("LineString"===i.type||"MultiPoint"===i.type)&&"Point"===e.type)for(r=0;r<i.coordinates.length;r++){if(e.coordinates.length!==i.coordinates[r].length)return!1;if(p(e.coordinates,i.coordinates[r]))return!0}if("Polygon"===i.type){if("Polygon"===e.type){if(i.coordinates.length===e.coordinates.length)for(r=0;r<e.coordinates.length;r++)if(g(e.coordinates[r],i.coordinates[r]))return!0;return!(!e.coordinates.length||!_(i.coordinates,e.coordinates[0][0])||d(y(e.coordinates),y(i.coordinates)))}if("Point"===e.type)return _(i.coordinates,e.coordinates);if("LineString"===e.type||"MultiPoint"===e.type){if(!e.coordinates||0===e.coordinates.length)return!1;for(r=0;r<e.coordinates.length;r++)if(!1===_(i.coordinates,e.coordinates[r]))return!1;return!0}if("MultiLineString"===e.type){for(r=0;r<e.coordinates.length;r++)if(!1===t({type:"LineString",coordinates:e.coordinates[r]},i))return a++,!1;return!0}if("MultiPolygon"===e.type){for(r=0;r<e.coordinates.length;r++)if(!1===t({type:"Polygon",coordinates:e.coordinates[r]},i))return!1;return!0}}if("MultiPolygon"===i.type){if("Point"===e.type){if(i.coordinates.length)for(r=0;r<i.coordinates.length;r++)if(n=i.coordinates[r],_(n,e.coordinates)&&!1===d([e.coordinates],i.coordinates))return!0;return!1}if("Polygon"===e.type){for(r=0;r<e.coordinates.length;r++)if(i.coordinates[r].length===e.coordinates.length)for(var s=0;s<e.coordinates.length;s++)if(g(e.coordinates[s],i.coordinates[r][s]))return!0;if(!1===d(e.coordinates,i.coordinates)&&i.coordinates.length){for(r=0;r<i.coordinates.length;r++)n=i.coordinates[r],a=!1!==_(n,e.coordinates[0][0]);return a}}else if("LineString"===e.type||"MultiPoint"===e.type)for(r=0;r<i.coordinates.length;r++)return!!t(e,{type:"Polygon",coordinates:i.coordinates[r]});else{if("MultiLineString"===e.type){for(r=0;r<e.coordinates.length;r++)if(!1===t({type:"LineString",coordinates:e.coordinates[r]},i))return!1;return!0}if("MultiPolygon"===e.type){for(r=0;r<i.coordinates.length;r++)if(!1===t(e,{type:"Polygon",coordinates:i.coordinates[r]}))return!1;return!0}}}return!1},b=function(t,e){return v(e,t)},M=function t(e,i){return"Feature"===i.type&&(i=i.geometry),!(!v(e,i)&&!v(i,e))||!("MultiPolygon"!==e.type||!function(t,e){return t.coordinates.some((function(t){var i={type:"Polygon",coordinates:t};return v(i,e)||v(e,i)}))}(e,i))||("Point"!==e.type&&"MultiPoint"!==e.type&&"Point"!==i.type&&"MultiPoint"!==i.type?d(e.coordinates,i.coordinates):"Feature"===e.type?t(e.geometry,i):(function(){var t=Array.prototype.slice.apply(arguments);"undefined"!=typeof console&&console.warn&&console.warn.apply(console,t)}("Type "+e.type+" to "+i.type+" intersection is not supported by intersects"),!1))},x=1/298.257223563,w=function(t,e,i){for(var n,r=i||64,a={type:"Polygon",coordinates:[[]]},s=0;s<r;s++)n=360*s/r,a.coordinates[0].push(S(t,n,e));return a.coordinates=y(a.coordinates),a},S=function(t,e,i){for(var n,r,a,s=6378137,o=6356752.3142,l=x,h=t[0],u=t[1],c=i,d=Math.PI,m=e*d/180,p=Math.sin(m),f=Math.cos(m),y=(1-l)*Math.tan(u*d/180),g=1/Math.sqrt(1+y*y),_=y*g,v=Math.atan2(y,f),b=g*p,M=1-b*b,w=M*(s*s-o*o)/(o*o),S=1+w/16384*(4096+w*(w*(320-175*w)-768)),A=w/1024*(256+w*(w*(74-47*w)-128)),T=c/(o*S),C=2*Math.PI;Math.abs(T-C)>1e-12;)n=Math.cos(2*v+T),C=T,T=c/(o*S)+A*(r=Math.sin(T))*(n+A/4*((a=Math.cos(T))*(2*n*n-1)-A/6*n*(4*r*r-3)*(4*n*n-3)));var I=_*r-g*a*f,k=Math.atan2(_*a+g*r*f,(1-l)*Math.sqrt(b*b+I*I)),P=l/16*M*(4+l*(4-3*M));return[h+180*(Math.atan2(r*p,g*a-_*r*f)-(1-P)*l*b*(T+P*r*(n+P*a*(2*n*n-1))))/d,180*k/d]};function A(t,e){return function(t,e){var i=e||250;if(!t||t.length<2||!i)throw new Error("Terraformer: missing parameter for Terraformer.Circle");return{type:"Feature",geometry:w(t,i,64),properties:{radius:i,center:t,steps:64}}}(i.GeoJSON.latLngToCoords(t),e).geometry}function T(t,e){return void 0===e&&(e={}),t instanceof i.Circle?A(t.getLatLng(),t.getRadius()):t instanceof i.CircleMarker?null!=e.zoom&&null!=e.crs?A(t.getLatLng(),function(t,e,n){var r=t.getLatLng(),a=e.latLngToPoint(r,n),s=t.getRadius()/Math.SQRT2,o=i.point([a.x-s,a.y-s]),l=e.pointToLatLng(o,n);return e.distance(r,l)}(t,e.crs,e.zoom)):(console.warn("Zoom and CRS is required for calculating CircleMarker polygon, falling back to center point only"),t.toGeoJSON().geometry):t instanceof i.Marker||t instanceof i.Polyline?t.toGeoJSON().geometry:void console.warn("Layer GeoJSON geometry is not available",t)}function C(t,e,n){void 0===n&&(n={});var r=t.toGeoJSON().geometry,a=t.getBounds();return e.filter((function(t){var e,s,o;return t instanceof i.Polyline?s=t.getBounds():(e=T(t,n))&&(o=h(e),s=i.latLngBounds([o[1],o[0]],[o[3],o[2]])),!(!s||!s.isValid())&&!!(n.intersect?a.intersects(s):a.contains(s))&&(e||(e=T(t,n)),!!e&&(n.intersect?function(t,e){return"Point"===e.type?b(t,e):M(t,e)}(r,e):function(t,e){return b(t,e)}(r,e)))}))}function I(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}I(".leaflet-lasso-active {\n    cursor: crosshair;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n}\n\n.leaflet-lasso-active .leaflet-interactive {\n    cursor: crosshair;\n    pointer-events: none;\n}");var k="lasso.enabled",P="lasso.disabled",E="lasso.finished",D="leaflet-lasso-active",L=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,e)||this;return r.options={polygon:{color:"#00C3FF",weight:2},intersect:!1},r.onMapMouseDownBound=r.onMapMouseDown.bind(r),r.onDocumentMouseMoveBound=r.onDocumentMouseMove.bind(r),r.onDocumentMouseUpBound=r.onDocumentMouseUp.bind(r),r.map=e,i.Util.setOptions(r,n),r}return r(e,t),e.prototype.setOptions=function(t){this.options=a(a({},this.options),t)},e.prototype.toggle=function(){this.enabled()?this.disable():this.enable()},e.prototype.addHooks=function(){this.map.getPane("mapPane"),this.map.getContainer().addEventListener("mousedown",this.onMapMouseDownBound),this.map.getContainer().addEventListener("touchstart",this.onMapMouseDownBound),this.map.getContainer().classList.add(D),this.map.dragging.disable(),this.map.fire(k)},e.prototype.removeHooks=function(){this.polygon&&(this.map.removeLayer(this.polygon),this.polygon=void 0),this.map.getContainer().removeEventListener("mousedown",this.onMapMouseDownBound),this.map.getContainer().removeEventListener("touchstart",this.onMapMouseDownBound),document.removeEventListener("mousemove",this.onDocumentMouseMoveBound),document.removeEventListener("touchmove",this.onDocumentMouseMoveBound),document.removeEventListener("mouseup",this.onDocumentMouseUpBound),document.removeEventListener("touchend",this.onDocumentMouseUpBound),this.map.getContainer().classList.remove(D),document.body.classList.remove(D),this.map.dragging.enable(),this.map.fire(P)},e.prototype.onMapMouseDown=function(t){t.stopPropagation();var e=this.eventToMouseEvent("down",t);if(e)if(t instanceof MouseEvent&&!t._simulated&&1!==t.buttons)this.disable();else if(!t.target.closest(".leaflet-control-container")){var i=this.map.mouseEventToLatLng(e);this.polygon=new o([i],this.options.polygon).addTo(this.map),document.body.classList.add(D),document.addEventListener("mousemove",this.onDocumentMouseMoveBound),document.addEventListener("touchmove",this.onDocumentMouseMoveBound),document.addEventListener("mouseup",this.onDocumentMouseUpBound),document.addEventListener("touchend",this.onDocumentMouseUpBound),t.preventDefault()}},e.prototype.onDocumentMouseMove=function(t){t.stopPropagation();var e=this.eventToMouseEvent("move",t);if(e&&this.polygon)if(t instanceof MouseEvent&&!t._simulated&&1!==t.buttons)this.finish(t);else{var i=this.map.mouseEventToLatLng(e);this.polygon.addLatLng(i),t.preventDefault()}},e.prototype.onDocumentMouseUp=function(t){this.finish(t),t.stopPropagation(),t.preventDefault()},e.prototype.eventToMouseEvent=function(t,e){return e instanceof MouseEvent?e:e instanceof TouchEvent&&1===e.touches.length?new MouseEvent(t,{screenX:e.touches[0].screenX,screenY:e.touches[0].screenY,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,buttons:1}):void 0},e.prototype.finish=function(t){var e=this;if(this.polygon){var n=[];this.map.eachLayer((function(t){t!==e.polygon&&t!==e.polygon.polyline&&t!==e.polygon.polygon&&(i.MarkerCluster&&t instanceof i.MarkerCluster?n.push.apply(n,t.getAllChildMarkers()):(t instanceof i.Marker||t instanceof i.Path)&&n.push(t))}));var r=C(this.polygon.polygon,n,{zoom:this.map.getZoom(),crs:this.map.options.crs,intersect:this.options.intersect});this.map.fire(E,{originalEvent:t,latLngs:this.polygon.getLatLngs(),layers:r}),this.disable()}},e}(i.Handler);I(".leaflet-control-lasso {\n    background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAAD6UlEQVR4nO1b7XHbMAwFfP0fdYKqE8QbRJ0gGUEjaAR3A4/gbuBOUHWCKhs4E1SegD06jzmYpWhJpiRKNu58Tix+AA8gCQIQK6Xolml109LfAbgDcAfg5gH4NPQEzJwSkf4kRLR2NKmJqNLfSqlqaH7+4y/0McjML0SUQdinHkO8ApCSiPZKqToogxYFAQBC50T03NDkN74raFzSGtahreSLo+9PALG7mlEXaQD6fMD0BgIp8TkQ0ZaINChpl7ExZoZxK2vcGr8nfXl2ztm5g1twI/Q6KHPvVlFg/DMgJgEAWpWCay3lIYX2zJ1bQFQhAO+i9b2l8VEEd/BSWEooBgUAm5REPvg67AGCrZDdIABgQ6qF1oOu8QBAbK4FwTd4bq23SbXeks/OIPg0f7V5TQRCpz3BNdhamH30wgu+CwFC66VqD5IIByRas/eAYDbGqi8AW+FszEp4ocC6y1KQneW6z+YmvJDDLIVDVwBKdNzPVXghi/FbLjprp4AIM2fi6loMcusal8zN8eXirOp885jNrn/BAlKxnL17GWPj+As8viqlDguwAG3V+hR7JKJvSqmyqd1KmMnrUoQHGaEzX6OVaLAfg6sRyUSeUt+UKxGobDSTmZKR5yIAj/h79IhsDPSRFxg6+ho9AAukpI1IgydGxiY4dSRON+/SXgwAyE1sHbkF79JmeEuaPs91H4DWf+Ffk1nSgDwQ0RH5iUbZqgXcAI0MG/FbKn7f+i5DZo14PabISR/lb0qpjWETXq252LmSsidaCYfh8s0pbnKZuFHuEzNvmNl5MiR9YmmRLYHaxb8VJ3SG+UzD3ZyvwyI/UEPozMoZFE2xTjOADId1yuhGBMLO0raSUSE74HsGgDoPiZULsIISPkFqtUlEuOx0YsiHadeIakTC57bGPW0zAVRiP+yVXJhY+M6JHLFcCtfDvUAoahCseoXW0Wz0Oy1310O5WUQLgmX2ZddEzkffhoc2CJMUQ3h4kzt+v7S4ke/CRKWYaBtBYURmF2tcMda7bC0absWEk5TG4ISyS3Suury1BqAB+XIMIDCv7eAEsUTvHtDQoak8bhPSexSlcXadYBlqHu8p0BMIZRVIti9QeD/Hc/S1hVawgKDuufQDriqVZeYcAjeVyL4BGBc1lcaSKY8dolaYmTXgf0ykKFStcCIKpM33Q8vuR1EcXeEuMkhoDnyWCKB81wGUQV+aEhFaJ/mSlgPwYvyHZ8QN9SlS38RbY3hnYQ/NHyH8KVq0+DdGdCgMS+sRe1ImX8xYvAUw8wGb7Q9c88/2l1sAIEPBlPM0ur85GgEPk9IdgAh4mJTuAETAw3RERP8Ab2Uzgrad13wAAAAASUVORK5CYII=');\n    background-size: 22px;\n}");var z=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.options={position:"topright",title:"Toggle Lasso"},i.Util.setOptions(n,e),n}return r(e,t),e.prototype.setOptions=function(t){this.options=a(a({},this.options),t),this.lasso&&this.lasso.setOptions(this.options)},e.prototype.onAdd=function(t){this.lasso=new L(t,this.options);var e=i.DomUtil.create("div","leaflet-bar leaflet-control"),n=i.DomUtil.create("a","leaflet-control-lasso",e);return n.href="javascript:void(0)",n.title=this.options.title,n.setAttribute("role","button"),n.setAttribute("aria-label",n.title),i.DomEvent.addListener(n,"click",this.toggle,this),i.DomEvent.disableClickPropagation(n),e},e.prototype.enabled=function(){return!!this.lasso&&this.lasso.enabled()},e.prototype.enable=function(){this.lasso&&this.lasso.enable()},e.prototype.disable=function(){this.lasso&&this.lasso.disable()},e.prototype.toggle=function(){this.lasso&&this.lasso.toggle()},e}(i.Control);void 0!==window.L&&(window.L.Lasso=L,window.L.lasso=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(L.bind.apply(L,s([void 0],t,!1)))},window.L.Control.Lasso=z,window.L.control.lasso=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(z.bind.apply(z,s([void 0],t,!1)))}),t.ACTIVE_CLASS=D,t.DISABLED_EVENT=P,t.ENABLED_EVENT=k,t.FINISHED_EVENT=E,t.LassoControl=z,t.LassoHandler=L,Object.defineProperty(t,"__esModule",{value:!0})}(e,i(3481))},601:function(t,e,i){!function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(t,e){return(180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI+90+360)%360},i=function(t,e){var i=t.value;return t.isInPixels?i/e:i};function n(t){if("string"==typeof t&&-1!==t.indexOf("%"))return{value:parseFloat(t)/100,isInPixels:!1};var e=t?parseFloat(t):0;return{value:e,isInPixels:e>0}}var r,a,s,o=function(t,e){return t.x===e.x&&t.y===e.y};function l(t){return t.reduce((function(t,i,n,r){if(n>0&&!o(i,r[n-1])){var a=r[n-1],s=t.length>0?t[t.length-1].distB:0,l=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}(a,i);t.push({a,b:i,distA:s,distB:s+l,heading:e(a,i)})}return t}),[])}r=L.Marker.prototype._initIcon,a=L.Marker.prototype._setPos,s="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),L.Marker.include({_initIcon:function(){r.call(this)},_setPos:function(t){a.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,s?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}}),t.Symbol=t.Symbol||{},t.Symbol.Dash=t.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(e){t.Util.setOptions(this,e),this.options.pathOptions.clickable=!1},buildSymbol:function(e,i,n,r,a){var s=this.options,o=Math.PI/180;if(s.pixelSize<=1)return t.polyline([e.latLng,e.latLng],s.pathOptions);var l=n.project(e.latLng),h=-(e.heading-90)*o,u=t.point(l.x+s.pixelSize*Math.cos(h+Math.PI)/2,l.y+s.pixelSize*Math.sin(h)/2),c=l.add(l.subtract(u));return t.polyline([n.unproject(u),n.unproject(c)],s.pathOptions)}}),t.Symbol.dash=function(e){return new t.Symbol.Dash(e)},t.Symbol.ArrowHead=t.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(e){t.Util.setOptions(this,e),this.options.pathOptions.clickable=!1},buildSymbol:function(e,i,n,r,a){return this.options.polygon?t.polygon(this._buildArrowPath(e,n),this.options.pathOptions):t.polyline(this._buildArrowPath(e,n),this.options.pathOptions)},_buildArrowPath:function(e,i){var n=Math.PI/180,r=i.project(e.latLng),a=-(e.heading-90)*n,s=this.options.headAngle/2*n,o=a+s,l=a-s,h=t.point(r.x-this.options.pixelSize*Math.cos(o),r.y+this.options.pixelSize*Math.sin(o)),u=t.point(r.x-this.options.pixelSize*Math.cos(l),r.y+this.options.pixelSize*Math.sin(l));return[i.unproject(h),e.latLng,i.unproject(u)]}}),t.Symbol.arrowHead=function(e){return new t.Symbol.ArrowHead(e)},t.Symbol.Marker=t.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(e){t.Util.setOptions(this,e),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(e,i,n,r,a){return this.options.rotate&&(this.options.markerOptions.rotationAngle=e.heading+(this.options.angleCorrection||0)),t.marker(e.latLng,this.options.markerOptions)}}),t.Symbol.marker=function(e){return new t.Symbol.Marker(e)};var h=function(e){return Array.isArray(e)&&((i=e[0])instanceof t.LatLng||Array.isArray(i)&&2===i.length&&"number"==typeof i[0]);var i};t.PolylineDecorator=t.FeatureGroup.extend({options:{patterns:[]},initialize:function(e,i){t.FeatureGroup.prototype.initialize.call(this),t.Util.setOptions(this,i),this._map=null,this._paths=this._initPaths(e),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(e,i){var n=this;return h(e)?[i?e.concat([e[0]]):e]:e instanceof t.Polyline?this._initPaths(e.getLatLngs(),e instanceof t.Polygon):Array.isArray(e)?e.reduce((function(t,e){return t.concat(n._initPaths(e,i))}),[]):[]},_initPatterns:function(t){return t.map(this._parsePatternDef)},setPatterns:function(t){this.options.patterns=t,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(t){this._paths=this._initPaths(t),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(t,e){return{symbolFactory:t.symbol,offset:n(t.offset),endOffset:n(t.endOffset),repeat:n(t.repeat)}},onAdd:function(t){this._map=t,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(e){this._map.off("moveend",this.redraw,this),this._map=null,t.FeatureGroup.prototype.onRemove.call(this,e)},_initBounds:function(){var e=this._paths.reduce((function(t,e){return t.concat(e)}),[]);return t.latLngBounds(e)},getBounds:function(){return this._bounds},_buildSymbols:function(t,e,i){var n=this;return i.map((function(r,a){return e.buildSymbol(r,t,n._map,a,i.length)}))},_getDirectionPoints:function(e,n){var r=this;return e.length<2?[]:function(t,e){var n=l(t),r=n.length;if(0===r)return[];var a=n[r-1].distB,s=i(e.offset,a),o=i(e.endOffset,a),h=a*i(e.repeat,a),u=o>0?a*o:0,c=[],d=s>0?a*s:0;do{c.push(d),d+=h}while(h>0&&d<a-u);var m=0,p=n[0];return c.map((function(t){for(;t>p.distB&&m<r-1;)m++,p=n[m];var e,i,a,s=(t-p.distA)/(p.distB-p.distA);return{pt:(e=p.a,i=p.b,a=s,i.x!==e.x?{x:e.x+a*(i.x-e.x),y:e.y+a*(i.y-e.y)}:{x:e.x,y:e.y+(i.y-e.y)*a}),heading:p.heading}}))}(e.map((function(t){return r._map.project(t)})),n).map((function(e){return{latLng:r._map.unproject(t.point(e.pt)),heading:e.heading}}))},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(e){var i=this,n=this._map.getBounds().pad(.1);return this._paths.map((function(r){var a=i._getDirectionPoints(r,e).filter((function(t){return n.contains(t.latLng)}));return t.featureGroup(i._buildSymbols(r,e.symbolFactory,a))}))},_draw:function(){var e=this;this._patterns.map((function(t){return e._getPatternLayers(t)})).forEach((function(i){e.addLayer(t.featureGroup(i))}))}}),t.polylineDecorator=function(e,i){return new t.PolylineDecorator(e,i)}}(i(3481))},1180:()=>{var t,e,i;t=L.Marker.prototype._initIcon,e=L.Marker.prototype._setPos,i="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),L.Marker.include({_initIcon:function(){t.call(this)},_setPos:function(t){e.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,i?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}})},1378:()=>{var t;window,t=document,L.Pattern=L.Class.extend({includes:[L.Mixin.Events],options:{x:0,y:0,width:8,height:8,patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse"},_addShapes:L.Util.falseFn,_update:L.Util.falseFn,initialize:function(t){this._shapes={},L.setOptions(this,t)},onAdd:function(t){for(var e in this._map=t.target?t.target:t,this._map._initDefRoot(),this._initDom(),this._shapes)this._shapes[e].onAdd(this);this._addShapes(),this._addDom(),this.redraw(),this.getEvents&&this._map.on(this.getEvents(),this),this.fire("add"),this._map.fire("patternadd",{pattern:this})},onRemove:function(){this._removeDom()},redraw:function(){if(this._map)for(var t in this._update(),this._shapes)this._shapes[t].redraw();return this},setStyle:function(t){return L.setOptions(this,t),this._map&&(this._updateStyle(),this.redraw()),this},addTo:function(t){return t.addPattern(this),this},remove:function(){return this.removeFrom(this._map)},removeFrom:function(t){return t&&t.removePattern(this),this}}),L.Map.addInitHook((function(){this._patterns={}})),L.Map.include({addPattern:function(t){var e=L.stamp(t);return this._patterns[e]?t:(this._patterns[e]=t,this.whenReady(t.onAdd,t),this)},removePattern:function(t){var e=L.stamp(t);return this._patterns[e]?(this._loaded&&t.onRemove(this),t.getEvents&&this.off(t.getEvents(),t),delete this._patterns[e],this._loaded&&(this.fire("patternremove",{pattern:t}),t.fire("remove")),t._map=null,this):this},hasPattern:function(t){return!!t&&L.stamp(t)in this._patterns}}),L.Pattern.SVG_NS="http://www.w3.org/2000/svg",L.Pattern=L.Pattern.extend({_createElement:function(e){return t.createElementNS(L.Pattern.SVG_NS,e)},_initDom:function(){this._dom=this._createElement("pattern"),this.options.className&&L.DomUtil.addClass(this._dom,this.options.className),this._updateStyle()},_addDom:function(){this._map._defRoot.appendChild(this._dom)},_removeDom:function(){L.DomUtil.remove(this._dom)},_updateStyle:function(){var t=this._dom,e=this.options;if(t){if(t.setAttribute("id",L.stamp(this)),t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("patternUnits",e.patternUnits),t.setAttribute("patternContentUnits",e.patternContentUnits),e.patternTransform||e.angle){var i=e.patternTransform?e.patternTransform+" ":"";i+=e.angle?"rotate("+e.angle+") ":"",t.setAttribute("patternTransform",i)}else t.removeAttribute("patternTransform");for(var n in this._shapes)this._shapes[n]._updateStyle()}}}),L.Map.include({_initDefRoot:function(){if(!this._defRoot)if("function"==typeof this.getRenderer){var t=this.getRenderer(this);this._defRoot=L.Pattern.prototype._createElement("defs"),t._container.appendChild(this._defRoot)}else this._pathRoot||this._initPathRoot(),this._defRoot=L.Pattern.prototype._createElement("defs"),this._pathRoot.appendChild(this._defRoot)}}),L.SVG?L.SVG.include({_superUpdateStyle:L.SVG.prototype._updateStyle,_updateStyle:function(t){this._superUpdateStyle(t),t.options.fill&&t.options.fillPattern&&t._path.setAttribute("fill","url(#"+L.stamp(t.options.fillPattern)+")")}}):L.Path.include({_superUpdateStyle:L.Path.prototype._updateStyle,_updateStyle:function(){this._superUpdateStyle(),this.options.fill&&this.options.fillPattern&&this._path.setAttribute("fill","url(#"+L.stamp(this.options.fillPattern)+")")}}),L.StripePattern=L.Pattern.extend({options:{weight:4,spaceWeight:4,color:"#000000",spaceColor:"#ffffff",opacity:1,spaceOpacity:0},_addShapes:function(){this._stripe=new L.PatternPath({stroke:!0,weight:this.options.weight,color:this.options.color,opacity:this.options.opacity}),this._space=new L.PatternPath({stroke:!0,weight:this.options.spaceWeight,color:this.options.spaceColor,opacity:this.options.spaceOpacity}),this.addShape(this._stripe),this.addShape(this._space),this._update()},_update:function(){this._stripe.options.d="M0 "+this._stripe.options.weight/2+" H "+this.options.width,this._space.options.d="M0 "+(this._stripe.options.weight+this._space.options.weight/2)+" H "+this.options.width},setStyle:L.Pattern.prototype.setStyle}),L.stripePattern=function(t){return new L.StripePattern(t)},L.PatternShape=L.Class.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",fillOpacity:.2,fillRule:"evenodd"},initialize:function(t){L.setOptions(this,t)},onAdd:function(t){this._pattern=t,this._pattern._dom&&(this._initDom(),this._addDom())},addTo:function(t){return t.addShape(this),this},redraw:function(){return this._pattern&&this._updateShape(),this},setStyle:function(t){return L.setOptions(this,t),this._pattern&&this._updateStyle(),this},setShape:function(t){this.options=L.extend({},this.options,t),this._updateShape()}}),L.Pattern.include({addShape:function(t){var e=L.stamp(t);return this._shapes[e]?t:(this._shapes[e]=t,void t.onAdd(this))}}),L.PatternShape.SVG_NS="http://www.w3.org/2000/svg",L.PatternShape=L.PatternShape.extend({_createElement:function(e){return t.createElementNS(L.PatternShape.SVG_NS,e)},_initDom:L.Util.falseFn,_updateShape:L.Util.falseFn,_initDomElement:function(t){this._dom=this._createElement(t),this.options.className&&L.DomUtil.addClass(this._dom,this.options.className),this._updateStyle()},_addDom:function(){this._pattern._dom.appendChild(this._dom)},_updateStyle:function(){var t=this._dom,e=this.options;t&&(e.stroke?(t.setAttribute("stroke",e.color),t.setAttribute("stroke-opacity",e.opacity),t.setAttribute("stroke-width",e.weight),t.setAttribute("stroke-linecap",e.lineCap),t.setAttribute("stroke-linejoin",e.lineJoin),e.dashArray?t.setAttribute("stroke-dasharray",e.dashArray):t.removeAttribute("stroke-dasharray"),e.dashOffset?t.setAttribute("stroke-dashoffset",e.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),e.fill?(e.fillPattern?t.setAttribute("fill","url(#"+L.stamp(e.fillPattern)+")"):t.setAttribute("fill",e.fillColor||e.color),t.setAttribute("fill-opacity",e.fillOpacity),t.setAttribute("fill-rule",e.fillRule||"evenodd")):t.setAttribute("fill","none"),t.setAttribute("pointer-events",e.pointerEvents||(e.interactive?"visiblePainted":"none")))}}),L.PatternPath=L.PatternShape.extend({_initDom:function(){this._initDomElement("path")},_updateShape:function(){this._dom&&this._dom.setAttribute("d",this.options.d)}}),L.PatternCircle=L.PatternShape.extend({options:{x:0,y:0,radius:0},_initDom:function(){this._initDomElement("circle")},_updateShape:function(){this._dom&&(this._dom.setAttribute("cx",this.options.x),this._dom.setAttribute("cy",this.options.y),this._dom.setAttribute("r",this.options.radius))}}),L.PatternRect=L.PatternShape.extend({options:{x:0,y:0,width:10,height:10},_initDom:function(){this._initDomElement("rect")},_updateShape:function(){this._dom&&(this._dom.setAttribute("x",this.options.x),this._dom.setAttribute("y",this.options.y),this._dom.setAttribute("width",this.options.width),this._dom.setAttribute("height",this.options.height),this.options.rx&&this._dom.setAttribute("rx",this.options.rx),this.options.ry&&this._dom.setAttribute("ry",this.options.ry))}})},7423:(t,e,i)=>{var n;n=function(t){var e="polyline-measure-unicode-icon";return t.Control.PolylineMeasure=t.Control.extend({options:{position:"topleft",unit:"metres",clearMeasurementsOnStop:!0,showBearings:!1,bearingTextIn:"In",bearingTextOut:"Out",tooltipTextFinish:"Click to <b>finish line</b><br>",tooltipTextDelete:"Press SHIFT-key and click to <b>delete point</b>",tooltipTextMove:"Click and drag to <b>move point</b><br>",tooltipTextResume:"<br>Press CTRL-key and click to <b>resume line</b>",tooltipTextAdd:"Press CTRL-key and click to <b>add point</b>",measureControlTitleOn:"Turn on PolylineMeasure",measureControlTitleOff:"Turn off PolylineMeasure",measureControlLabel:"&#8614;",measureControlClasses:[],showClearControl:!1,clearControlTitle:"Clear Measurements",clearControlLabel:"&times;",clearControlClasses:[],showUnitControl:!1,distanceShowSameUnit:!1,unitControlTitle:{text:"Change Units",metres:"metres",landmiles:"land miles",nauticalmiles:"nautical miles"},unitControlLabel:{metres:"m",kilometres:"km",feet:"ft",landmiles:"mi",nauticalmiles:"nm"},tempLine:{color:"#00f",weight:2},fixedLine:{color:"#006",weight:2},startCircle:{color:"#000",weight:1,fillColor:"#0f0",fillOpacity:1,radius:3},intermedCircle:{color:"#000",weight:1,fillColor:"#ff0",fillOpacity:1,radius:3},currentCircle:{color:"#000",weight:1,fillColor:"#f0f",fillOpacity:1,radius:6},endCircle:{color:"#000",weight:1,fillColor:"#f00",fillOpacity:1,radius:3}},_arcpoints:100,_circleNr:-1,_lineNr:-1,_createControl:function(e,i,n,r,a,s){var o=document.createElement("a");return o.innerHTML=e,o.setAttribute("title",i),n.forEach((function(t){o.classList.add(t)})),t.DomEvent.on(o,"click",a,s),r.appendChild(o),o},onAdd:function(i){var n=this;i.on("movestart ",(function(){n._mapdragging=!0})),this._container=document.createElement("div"),this._container.classList.add("leaflet-bar"),t.DomEvent.disableClickPropagation(this._container);var r=this.options.measureControlTitleOn,a=this.options.measureControlLabel,s=this.options.measureControlClasses;return-1!=a.indexOf("&")&&s.push(e),this._arrPolylines=[],this._measureControl=this._createControl(a,r,s,this._container,this._toggleMeasure,this),this._defaultControlBgColor=this._measureControl.style.backgroundColor,this._measureControl.setAttribute("id","polyline-measure-control"),this.options.showClearControl&&(r=this.options.clearControlTitle,a=this.options.clearControlLabel,s=this.options.clearControlClasses,-1!=a.indexOf("&")&&s.push(e),this._clearMeasureControl=this._createControl(a,r,s,this._container,this._clearAllMeasurements,this),this._clearMeasureControl.classList.add("polyline-measure-clearControl")),this.options.showUnitControl&&("metres"==this.options.unit?(a=this.options.unitControlLabel.metres,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"):"landmiles"==this.options.unit?(a=this.options.unitControlLabel.landmiles,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):(a=this.options.unitControlLabel.nauticalmiles,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"),s=[],this._unitControl=this._createControl(a,r,s,this._container,this._changeUnit,this),this._unitControl.setAttribute("id","unitControlId")),this._container},onRemove:function(){this._measuring&&this._toggleMeasure()},_saveNonpolylineEvents:function(){this._nonpolylineTargets=this._map._targets,void 0!==this._polylineTargets?this._map._targets=this._polylineTargets:this._map._targets={}},_savePolylineEvents:function(){this._polylineTargets=this._map._targets,this._map._targets=this._nonpolylineTargets},_toggleMeasure:function(){this._measuring=!this._measuring,this._measuring?(this._mapdragging=!1,this._saveNonpolylineEvents(),this._measureControl.classList.add("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this.options.backgroundColor,this._measureControl.title=this.options.measureControlTitleOff,this._oldCursor=this._map._container.style.cursor,this._map._container.style.cursor="crosshair",this._doubleClickZoom=this._map.doubleClickZoom.enabled(),this._map.doubleClickZoom.disable(),this._layerPaint||(this._layerPaint=t.layerGroup().addTo(this._map)),this._map.on("mousemove",this._mouseMove,this),this._map.on("click",this._mouseClick,this),t.DomEvent.on(document,"keydown",this._onKeyDown,this),this._resetPathVariables()):(this._savePolylineEvents(),this._measureControl.classList.remove("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this._defaultControlBgColor,this._measureControl.title=this.options.measureControlTitleOn,this._map._container.style.cursor=this._oldCursor,this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.off("mouseup",this._dragCircleMouseup,this),t.DomEvent.off(document,"keydown",this._onKeyDown,this),this._doubleClickZoom&&this._map.doubleClickZoom.enable(),this.options.clearMeasurementsOnStop&&this._layerPaint&&this._clearAllMeasurements(),0!==this._cntCircle&&this._finishPolylinePath()),this._map.fire("polylinemeasure:toggle",{sttus:this._measuring})},_clearAllMeasurements:function(){void 0!==this._cntCircle&&0!==this._cntCircle&&this._finishPolylinePath(),this._layerPaint&&this._layerPaint.clearLayers(),this._arrPolylines=[],this._map.fire("polylinemeasure:clear")},_changeUnit:function(){"metres"==this.options.unit?(this.options.unit="landmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.landmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):"landmiles"==this.options.unit?(this.options.unit="nauticalmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.nauticalmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"):(this.options.unit="metres",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.metres,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"),this._currentLine&&this._computeDistance(this._currentLine),this._arrPolylines.map(this._computeDistance.bind(this))},_computeDistance:function(t){var e=0;t.circleCoords.map(function(i,n){if(n>=1){var r=t.circleCoords[n-1].distanceTo(t.circleCoords[n]);e+=r,this._updateTooltip(t.tooltips[n],t.tooltips[n-1],e,r,t.circleCoords[n-1],t.circleCoords[n])}}.bind(this))},_onKeyDown:function(t){if(27===t.keyCode){if(!0===this._resumeFirstpointFlag){this._resumeFirstpointFlag=!1;var e=this._lineNr;this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._layerPaint.removeLayer(this._tooltipNew),this._arrPolylines[e].circleMarkers[0].setStyle(this.options.startCircle);var i="",n=0;return!0===this.options.showBearings&&(i=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),i+='<div class="polyline-measure-tooltip-difference">+0</div>',i+='<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[e].tooltips[0]._icon.innerHTML=i,this._arrPolylines[e].tooltips.map(function(t,i){if(i>=1){var r=this._arrPolylines[e].circleCoords[i-1].distanceTo(this._arrPolylines[e].circleCoords[i]),a=this._arrPolylines[e].circleCoords[i-1],s=this._arrPolylines[e].circleCoords[i];n+=r;var o=this._arrPolylines[e].tooltips[i-1];this._updateTooltip(t,o,n,r,a,s)}}.bind(this)),void this._map.on("mousemove",this._mouseMove,this)}this._currentLine?this._finishPolylinePath(t):this._toggleMeasure()}},_getDistance:function(t){var e,i=t;return"nauticalmiles"===this.options.unit?(e=this.options.unitControlLabel.nauticalmiles,i>=185200?i=(i/1852).toFixed(0):i>=18520?i=(i/1852).toFixed(1):i>=1852?i=(i/1852).toFixed(2):this.options.distanceShowSameUnit?i=(i/1852).toFixed(3):(i=(i/.3048).toFixed(0),e=this.options.unitControlLabel.feet)):"landmiles"===this.options.unit?(e=this.options.unitControlLabel.landmiles,i>=160934.4?i=(i/1609.344).toFixed(0):i>=16093.44?i=(i/1609.344).toFixed(1):i>=1609.344?i=(i/1609.344).toFixed(2):this.options.distanceShowSameUnit?i=(i/1609.344).toFixed(3):(i=(i/.3048).toFixed(0),e=this.options.unitControlLabel.feet)):(e=this.options.unitControlLabel.kilometres,i>=1e5?i=(i/1e3).toFixed(0):i>=1e4?i=(i/1e3).toFixed(1):i>=1e3?i=(i/1e3).toFixed(2):this.options.distanceShowSameUnit?i=(i/1e3).toFixed(3):(i=i.toFixed(0),e=this.options.unitControlLabel.metres)),{value:i,unit:e}},_polylineArc:function(t,e){function i(t){var e=Math.sin((1-t)*o)/Math.sin(o),i=Math.sin(t*o)/Math.sin(o),l=e*Math.cos(n)*Math.cos(r)+i*Math.cos(a)*Math.cos(s),h=e*Math.cos(n)*Math.sin(r)+i*Math.cos(a)*Math.sin(s),u=e*Math.sin(n)+i*Math.sin(a),c=180/Math.PI*Math.atan2(u,Math.sqrt(Math.pow(l,2)+Math.pow(h,2))),d=180/Math.PI*Math.atan2(h,l),m=d-180*r/Math.PI;function p(t){return Math[t>0?"floor":"ceil"](t)}return[c,d-=m<0?360*p((m-180)/360):360*p((m+180)/360)]}var n=t.lat,r=t.lng,a=e.lat,s=e.lng;n=n*Math.PI/180,r=r*Math.PI/180,a=a*Math.PI/180,s=s*Math.PI/180;var o=2*Math.asin(Math.sqrt(Math.pow(Math.sin((n-a)/2),2)+Math.cos(n)*Math.cos(a)*Math.pow(Math.sin((r-s)/2),2)));return 0===o?[[n,r]]:function(t){for(var e=[],n=1/(t-1),r=0;r<t;r++){var a=i(n*r);e.push(a)}return e}(this._arcpoints)},_updateTooltip:function(t,e,i,n,r,a){var s=function(t,e,i){var n=t.lat/180*Math.PI,r=e.lat/180*Math.PI,a=t.lng/180*Math.PI,s=e.lng/180*Math.PI,o=Math.sin(s-a)*Math.cos(r),l=Math.cos(n)*Math.sin(r)-Math.sin(n)*Math.cos(r)*Math.cos(s-a);if("inbound"===i)var h=(180*Math.atan2(o,l)/Math.PI+180).toFixed(0);else h=(180*Math.atan2(o,l)/Math.PI+360).toFixed(0);return h%360},o=s(a,r,"inbound"),l=s(r,a,"outbound"),h=this._getDistance(i),u=this._getDistance(n),c="";if(u.value>0&&(!0===this.options.showBearings&&(c=this.options.bearingTextIn+": "+o+"°<br>"+this.options.bearingTextOut+":---°"),c+='<div class="polyline-measure-tooltip-difference">+'+u.value+"&nbsp;"+u.unit+"</div>"),c+='<div class="polyline-measure-tooltip-total">'+h.value+"&nbsp;"+h.unit+"</div>",t._icon.innerHTML=c,!0===this.options.showBearings&&e){var d=e._icon.innerHTML,m=new RegExp(this.options.bearingTextOut+".*°"),p=d.replace(m,this.options.bearingTextOut+": "+l+"°");e._icon.innerHTML=p}},_drawArrow:function(e){var i=Math.round(e.length/2),n=e[i-1],r=e[i],a=r[1]-n[1],s=r[0]-n[0],o=[n[0]+s/2,n[1]+a/2],l=57.29578*-Math.atan2(s,a),h=t.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:"<div style = 'font-size: 16px; line-height: 16px; vertical-align:top; transform: rotate("+l+"deg)'>&#x27a4;</div>"}),u=t.marker(o,{icon:h,zIndexOffset:-50}).addTo(this._layerPaint);return this._currentLine||u.bindTooltip(this.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),u.on("click",this._clickedArrow,this),u},_mouseMove:function(t){var e=t.latlng;if(this._map.on("click",this._mouseClick,this),e&&this._currentLine){var i=this._currentLine.circleCoords.last();this._rubberlinePath.setLatLngs(this._polylineArc(i,e));var n=this._currentLine.tooltips.last(),r=this._currentLine.tooltips.slice(-2,-1)[0];n.setLatLng(e);var a=e.distanceTo(i);this._updateTooltip(n,r,this._currentLine.distance+a,a,i,e)}},_startLine:function(e){var i=t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),n=function(){return this.slice(-1)[0]};this._rubberlinePath=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack();var r=this;this._currentLine={id:0,circleCoords:[],circleMarkers:[],arrowMarkers:[],tooltips:[],distance:0,polylinePath:t.polyline([],{color:this.options.fixedLine.color,weight:this.options.fixedLine.weight,interactive:!1}).addTo(this._layerPaint).bringToBack(),handleMarkers:function(e){var i=this.circleMarkers.last();i&&(i.bindTooltip(r.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),i.off("click",r._finishPolylinePath,r),1===this.circleMarkers.length?i.setStyle(r.options.startCircle):i.setStyle(r.options.intermedCircle));var n=new t.CircleMarker(e,r.options.currentCircle).addTo(r._layerPaint);n.bindTooltip(r.options.tooltipTextFinish+r.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),n.cntLine=r._currentLine.id,n.cntCircle=r._cntCircle,r._cntCircle++,n.on("mousedown",r._dragCircle,r),n.on("click",r._finishPolylinePath,r),this.circleMarkers.push(n)},getNewToolTip:function(e){return t.marker(e,{icon:i,interactive:!1})},addPoint:function(t){var e=this.circleCoords.last();if(!e||!e.equals(t)){if(this.circleCoords.push(t),this.circleCoords.length>1){var i=r._polylineArc(e,t);this.circleCoords.length>2&&i.shift(),this.polylinePath.setLatLngs(this.polylinePath.getLatLngs().concat(i));var n=r._drawArrow(i);n.cntLine=r._currentLine.id,n.cntArrow=r._cntCircle-1,r._currentLine.arrowMarkers.push(n);var a=e.distanceTo(t);this.distance+=a;var s=r._currentLine.tooltips.last(),o=r._currentLine.tooltips.slice(-1,-2)[0];r._updateTooltip(s,o,this.distance,a,e,t)}s&&s.setLatLng(t);var l=this.getNewToolTip(t);l.addTo(r._layerPaint),this.tooltips.push(l),this.handleMarkers(t)}},finalize:function(){if(r._layerPaint.removeLayer(this.tooltips.last()),this.tooltips.pop(),r._layerPaint.removeLayer(r._rubberlinePath),this.circleCoords.length>1){this.tooltips.last()._icon.classList.add("polyline-measure-tooltip-end");var t=this.circleMarkers.last();t.setStyle(r.options.endCircle),t.unbindTooltip(),r._currentLine.circleMarkers.map((function(t){t.bindTooltip(r.options.tooltipTextMove+r.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})})),r._currentLine.circleMarkers[0].bindTooltip(r.options.tooltipTextMove+r.options.tooltipTextDelete+r.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),t.bindTooltip(r.options.tooltipTextMove+r.options.tooltipTextDelete+r.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),r._currentLine.arrowMarkers.map((function(t){t.bindTooltip(r.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})})),t.off("click",r._finishPolylinePath,r),t.on("click",r._resumePolylinePath,r),r._arrPolylines.push(this)}else r._layerPaint.removeLayer(this.circleMarkers.last()),r._layerPaint.removeLayer(this.tooltips.last());r._resetPathVariables()}};var a=t.marker(e,{icon:i,interactive:!1});a.addTo(this._layerPaint);var s="";!0===this.options.showBearings&&(s=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),s+='<div class="polyline-measure-tooltip-difference">+0</div>',s+='<div class="polyline-measure-tooltip-total">0</div>',a._icon.innerHTML=s,this._currentLine.tooltips.push(a),this._currentLine.circleCoords.last=n,this._currentLine.tooltips.last=n,this._currentLine.circleMarkers.last=n,this._currentLine.id=this._arrPolylines.length},_mouseClick:function(t){!t.latlng||this._finishCircleScreencoords&&this._finishCircleScreencoords.equals(t.containerPoint)||(this._currentLine||this._mapdragging||(this._startLine(t.latlng),this._map.fire("polylinemeasure:start",this._currentLine)),this._mapdragging?this._mapdragging=!1:(this._currentLine.addPoint(t.latlng),this._map.fire("polylinemeasure:add",t),this._map.fire("polylinemeasure:change",this._currentLine)))},_finishPolylinePath:function(t){this._map.fire("polylinemeasure:finish",this._currentLine),this._currentLine.finalize(),t&&(this._finishCircleScreencoords=t.containerPoint)},_resumePolylinePath:function(e){if(!0===e.originalEvent.ctrlKey){this._currentLine=this._arrPolylines[e.target.cntLine],this._rubberlinePath=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._currentLine.tooltips.last()._icon.classList.remove("polyline-measure-tooltip-end");var i=this._currentLine.getNewToolTip(e.latlng);i.addTo(this._layerPaint),this._currentLine.tooltips.push(i),this._currentLine.circleMarkers.last().unbindTooltip(),this._currentLine.circleMarkers.last().bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.last().setStyle(this.options.currentCircle),this._cntCircle=this._currentLine.circleCoords.length,this._map.fire("polylinemeasure:resume",this._currentLine)}},_resetPathVariables:function(){this._cntCircle=0,this._currentLine=null},_clickedArrow:function(e){if(e.originalEvent.ctrlKey){var i=e.target.cntLine,n=e.target.cntArrow;this._arrPolylines[i].arrowMarkers[n].removeFrom(this._layerPaint);var r=new t.CircleMarker(e.latlng,this.options.intermedCircle).addTo(this._layerPaint);r.cntLine=i,r.on("mousedown",this._dragCircle,this),r.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[i].circleMarkers.splice(n+1,0,r),this._arrPolylines[i].circleMarkers.map((function(t,e){t.cntCircle=e})),this._arrPolylines[i].circleCoords.splice(n+1,0,e.latlng),lineCoords=this._arrPolylines[i].polylinePath.getLatLngs();var a=this._polylineArc(this._arrPolylines[i].circleCoords[n],e.latlng);a.pop();var s=this._polylineArc(e.latlng,this._arrPolylines[i].circleCoords[n+2]);Array.prototype.splice.apply(lineCoords,[n*(this._arcpoints-1),this._arcpoints].concat(a,s)),this._arrPolylines[i].polylinePath.setLatLngs(lineCoords);var o=this._drawArrow(a);this._arrPolylines[i].arrowMarkers[n]=o,o=this._drawArrow(s),this._arrPolylines[i].arrowMarkers.splice(n+1,0,o),this._arrPolylines[i].arrowMarkers.map((function(t,e){t.cntLine=i,t.cntArrow=e})),this._tooltipNew=t.marker(e.latlng,{icon:t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint),this._arrPolylines[i].tooltips.splice(n+1,0,this._tooltipNew);var l=0;this._arrPolylines[i].tooltips.map(function(t,e){if(e>=1){var n=this._arrPolylines[i].circleCoords[e-1].distanceTo(this._arrPolylines[i].circleCoords[e]),r=this._arrPolylines[i].circleCoords[e-1],a=this._arrPolylines[i].circleCoords[e];l+=n;var s=this._arrPolylines[i].tooltips[e-1];this._updateTooltip(t,s,l,n,r,a)}}.bind(this)),this._map.fire("polylinemeasure:insert",e),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])}},_dragCircleMouseup:function(){0===this._circleNr||this._circleNr===this._arrPolylines[this._lineNr].circleCoords.length-1?this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}):this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._resetPathVariables(),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.dragging.enable(),this._map.on("mousemove",this._mouseMove,this),this._map.off("mouseup",this._dragCircleMouseup,this),this._map.fire("polylinemeasure:move",this._e1),this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])},_dragCircleMousemove:function(e){var i=e.latlng.lat,n=e.latlng.lng,r=i-this._mouseStartingLat,a=n-this._mouseStartingLng,s=t.latLng(this._circleStartingLat+r,this._circleStartingLng+a),o=this._arcpoints,l=this._e1.target.cntLine;this._lineNr=l;var h=this._e1.target.cntCircle;this._circleNr=h,this._e1.target.setLatLng(s),this._e1.target.unbindTooltip(),this._arrPolylines[l].circleCoords[h]=s;var u=this._arrPolylines[l].polylinePath.getLatLngs();if(h>=1){var c=this._polylineArc(this._arrPolylines[l].circleCoords[h-1],s);Array.prototype.splice.apply(u,[(h-1)*(o-1),o].concat(c));var d=this._drawArrow(c);d.cntLine=l,d.cntArrow=h-1,this._arrPolylines[l].arrowMarkers[h-1].removeFrom(this._layerPaint),this._arrPolylines[l].arrowMarkers[h-1]=d}if(h<this._arrPolylines[l].circleCoords.length-1){var m=this._polylineArc(s,this._arrPolylines[l].circleCoords[h+1]);Array.prototype.splice.apply(u,[h*(o-1),o].concat(m)),(d=this._drawArrow(m)).cntLine=l,d.cntArrow=h,this._arrPolylines[l].arrowMarkers[h].removeFrom(this._layerPaint),this._arrPolylines[l].arrowMarkers[h]=d}this._arrPolylines[l].polylinePath.setLatLngs(u),h>=0&&this._arrPolylines[l].tooltips[h].setLatLng(s);var p=0;this._arrPolylines[l].tooltips.map(function(t,e){if(e>=1){var i=this._arrPolylines[l].circleCoords[e-1].distanceTo(this._arrPolylines[l].circleCoords[e]),n=this._arrPolylines[l].circleCoords[e-1],r=this._arrPolylines[l].circleCoords[e];p+=i,this._arrPolylines[l].distance=p;var a=this._arrPolylines[l].tooltips[e-1];this._updateTooltip(t,a,p,i,n,r)}}.bind(this)),this._map.on("mouseup",this._dragCircleMouseup,this)},_resumeFirstpointMousemove:function(t){var e=this._lineNr;this._map.on("click",this._resumeFirstpointClick,this);var i=t.latlng;this._rubberlinePath2.setLatLngs(this._polylineArc(i,currentCircleCoords)),this._tooltipNew.setLatLng(i);var n=0,r=i.distanceTo(this._arrPolylines[e].circleCoords[0]),a=i,s=this._arrPolylines[e].circleCoords[0];n+=r;var o=this._tooltipNew,l=this._arrPolylines[e].tooltips[0];this._updateTooltip(l,o,n,r,a,s),this._arrPolylines[e].tooltips.map(function(t,i){if(i>=1){var r=this._arrPolylines[e].circleCoords[i-1].distanceTo(this._arrPolylines[e].circleCoords[i]),a=this._arrPolylines[e].circleCoords[i-1],s=this._arrPolylines[e].circleCoords[i];n+=r;var o=this._arrPolylines[e].tooltips[i-1];this._updateTooltip(t,o,n,r,a,s)}}.bind(this))},_resumeFirstpointClick:function(e){var i=this._lineNr;this._resumeFirstpointFlag=!1,this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._arrPolylines[i].circleMarkers[0].setStyle(this.options.intermedCircle),this._arrPolylines[i].circleMarkers[0].unbindTooltip(),this._arrPolylines[i].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"});var n=new t.CircleMarker(e.latlng,this.options.startCircle).addTo(this._layerPaint);n.cntLine=i,n.cntCircle=0,n.on("mousedown",this._dragCircle,this),n.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[i].circleMarkers.unshift(n),this._arrPolylines[i].circleMarkers.map((function(t,e){t.cntCircle=e})),this._arrPolylines[i].circleCoords.unshift(e.latlng);var r=this._polylineArc(e.latlng,currentCircleCoords),a=this._drawArrow(r);this._arrPolylines[i].arrowMarkers.unshift(a),this._arrPolylines[i].arrowMarkers.map((function(t,e){t.cntLine=i,t.cntArrow=e})),r.pop(),this._arrPolylines[i].polylinePath.setLatLngs(r.concat(this._arrPolylines[i].polylinePath.getLatLngs())),this._arrPolylines[i].tooltips.unshift(this._tooltipNew),this._map.on("mousemove",this._mouseMove,this)},_dragCircle:function(e){var i=this._arcpoints;if(e.originalEvent.ctrlKey){if(this._map.off("click",this._mouseClick,this),0===e.target.cntCircle){this._resumeFirstpointFlag=!0,this._lineNr=e.target.cntLine;var n=this._lineNr;this._circleNr=e.target.cntCircle,currentCircleCoords=e.latlng,this._arrPolylines[n].circleMarkers[0].setStyle(this.options.currentCircle),this._rubberlinePath2=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._tooltipNew=t.marker(currentCircleCoords,{icon:t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint);var r="";!0===this.options.showBearings&&(r=r+this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),r+='<div class="polyline-measure-tooltip-difference">+0</div>',r+='<div class="polyline-measure-tooltip-total">0</div>',this._tooltipNew._icon.innerHTML=r,this._map.off("mousemove",this._mouseMove,this),this._map.on("mousemove",this._resumeFirstpointMousemove,this)}}else{if(e.originalEvent.shiftKey){this._lineNr=e.target.cntLine,n=this._lineNr,this._circleNr=e.target.cntCircle;var a=this._circleNr;if(this._arrPolylines[n]){if(2===this._arrPolylines[n].circleMarkers.length)return this._layerPaint.removeLayer(this._arrPolylines[n].circleMarkers[1]),this._layerPaint.removeLayer(this._arrPolylines[n].tooltips[1]),this._layerPaint.removeLayer(this._arrPolylines[n].circleMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[n].tooltips[0]),this._layerPaint.removeLayer(this._arrPolylines[n].arrowMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[n].polylinePath),this._map.fire("polylinemeasure:remove",e),void this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr]);this._arrPolylines[n].circleCoords.splice(a,1),this._arrPolylines[n].circleMarkers[a].removeFrom(this._layerPaint),this._arrPolylines[n].circleMarkers.splice(a,1),this._arrPolylines[n].circleMarkers.map((function(t,e){t.cntCircle=e}));var s=this._arrPolylines[n].polylinePath.getLatLngs();if(this._arrPolylines[n].tooltips[a].removeFrom(this._layerPaint),this._arrPolylines[n].tooltips.splice(a,1),!this._arrPolylines[n].circleMarkers.length)return this._arrPolylines.splice(n,1),void this._arrPolylines.forEach((function(t,e){t.circleMarkers.map((function(t){t.cntLine=e})),t.arrowMarkers.map((function(t){t.cntLine=e}))}));if(0===a)this._arrPolylines[n].circleMarkers[0].setStyle(this.options.startCircle),s.splice(0,i-1),this._arrPolylines[n].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[n].arrowMarkers[a].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers.splice(0,1),r="",!0===this.options.showBearings&&(r=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),r+='<div class="polyline-measure-tooltip-difference">+0</div>',r+='<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[n].tooltips[0]._icon.innerHTML=r;else if(a===this._arrPolylines[n].circleCoords.length)this._arrPolylines[n].circleMarkers[a-1].on("click",this._resumePolylinePath,this),this._arrPolylines[n].circleMarkers[a-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[n].circleMarkers.slice(-1)[0].setStyle(this.options.endCircle),this._arrPolylines[n].tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),s.splice(-(i-1),i-1),this._arrPolylines[n].arrowMarkers[a-1].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers.splice(-1,1);else{newLineSegment=this._polylineArc(this._arrPolylines[n].circleCoords[a-1],this._arrPolylines[n].circleCoords[a]),Array.prototype.splice.apply(s,[(a-1)*(i-1),2*i-1].concat(newLineSegment)),this._arrPolylines[n].arrowMarkers[a-1].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers[a].removeFrom(this._layerPaint);var o=this._drawArrow(newLineSegment);this._arrPolylines[n].arrowMarkers.splice(a-1,2,o)}this._arrPolylines[n].polylinePath.setLatLngs(s),this._arrPolylines[n].arrowMarkers.map((function(t,e){t.cntLine=n,t.cntArrow=e}));var l=0;this._arrPolylines[n].tooltips.map(function(t,e){if(e>=1){var i=this._arrPolylines[n].circleCoords[e-1].distanceTo(this._arrPolylines[n].circleCoords[e]),r=this._arrPolylines[n].circleCoords[e-1],a=this._arrPolylines[n].circleCoords[e];l+=i,this._arrPolylines[n].distance=l;var s=this._arrPolylines[n].tooltips[e-1];this._updateTooltip(t,s,l,i,r,a)}}.bind(this))}else{if(this._cntCircle--,1===this._currentLine.circleMarkers.length)return void this._currentLine.finalize();this._currentLine.circleCoords.splice(a,1),this._currentLine.circleMarkers[a].removeFrom(this._layerPaint),this._currentLine.circleMarkers.splice(a,1),this._currentLine.circleMarkers.map((function(t,e){t.cntCircle=e})),s=this._currentLine.polylinePath.getLatLngs(),this._currentLine.tooltips[a].removeFrom(this._layerPaint),this._currentLine.tooltips.splice(a,1),0===a?(1===this._currentLine.circleMarkers.length?this._currentLine.circleMarkers[0].setStyle(this.options.currentCircle):this._currentLine.circleMarkers[0].setStyle(this.options.startCircle),s.splice(0,i-1),this._currentLine.circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.arrowMarkers[a].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(0,1),r="",!0===this.options.showBearings&&(r=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),r+='<div class="polyline-measure-tooltip-difference">+0</div>',r+='<div class="polyline-measure-tooltip-total">0</div>',this._currentLine.tooltips[0]._icon.innerHTML=r):a===this._currentLine.circleCoords.length?(this._currentLine.circleMarkers[a-1].on("click",this._resumePolylinePath,this),this._currentLine.circleMarkers[a-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.slice(-1)[0].setStyle(this.options.currentCircle),this._currentLine.tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),s.splice(-(i-1),i-1),this._currentLine.arrowMarkers[a-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(-1,1)):(newLineSegment=this._polylineArc(this._currentLine.circleCoords[a-1],this._currentLine.circleCoords[a]),Array.prototype.splice.apply(s,[(a-1)*(i-1),2*i-1].concat(newLineSegment)),this._currentLine.arrowMarkers[a-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers[a].removeFrom(this._layerPaint),o=this._drawArrow(newLineSegment),this._currentLine.arrowMarkers.splice(a-1,2,o)),this._currentLine.polylinePath.setLatLngs(s),this._currentLine.arrowMarkers.map((function(t,e){t.cntLine=n,t.cntArrow=e}));var h=0;this._currentLine.tooltips.map(function(t,i,n){if(i>=1){var r,a,s=this._currentLine.tooltips[i-1],o=this._currentLine.circleCoords[i-1];i===n.length-1?(r=this._currentLine.circleCoords[i-1].distanceTo(e.latlng),a=e.latlng,this._updateTooltip(t,s,h+r,r,o,a)):(r=this._currentLine.circleCoords[i-1].distanceTo(this._currentLine.circleCoords[i]),a=this._currentLine.circleCoords[i],h+=r,this._updateTooltip(t,s,h,r,o,a))}}.bind(this)),this._currentLine.distance=h}return this._map.fire("polylinemeasure:remove",e),void this._map.fire("polylinemeasure:change",this._arrPolylines[this._lineNr])}this._e1=e,this._measuring&&0===this._cntCircle&&(this._map.dragging.disable(),this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._mouseStartingLat=e.latlng.lat,this._mouseStartingLng=e.latlng.lng,this._circleStartingLat=e.target._latlng.lat,this._circleStartingLng=e.target._latlng.lng,this._map.on("mousemove",this._dragCircleMousemove,this))}},seed:function(e){e.forEach((e=>{this._toggleMeasure(),this._startLine(e[0]),e.forEach(((i,n)=>{const r=t.latLng(i);this._mouseMove({latLng:r}),this._currentLine.addPoint(r),n===e.length-1&&(this._finishPolylinePath(),this._toggleMeasure())}))}))}}),t.Map.mergeOptions({PolylineMeasureControl:!1}),t.Map.addInitHook((function(){this.options.polylineMeasureControl&&(this.PMControl=new t.Control.PolylineMeasure,this.addControl(this.PMControl))})),t.control.polylineMeasure=function(e){return new t.Control.PolylineMeasure(e)},t.Control.PolylineMeasure},"function"==typeof define&&define.amd?define(["leaflet"],n):t.exports=n(i(3481))},3481:function(t,e){!function(t){"use strict";function e(t){var e,i,n,r;for(i=1,n=arguments.length;i<n;i++)for(e in r=arguments[i])t[e]=r[e];return t}var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function n(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var r=0;function a(t){return"_leaflet_id"in t||(t._leaflet_id=++r),t._leaflet_id}function s(t,e,i){var n,r,a,s;return s=function(){n=!1,r&&(a.apply(i,r),r=!1)},a=function(){n?r=arguments:(t.apply(i,arguments),setTimeout(s,e),n=!0)},a}function o(t,e,i){var n=e[1],r=e[0],a=n-r;return t===n&&i?t:((t-r)%a+a)%a+r}function l(){return!1}function h(t,e){if(!1===e)return t;var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return u(t).split(/\s+/)}function d(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function m(t,e,i){var n=[];for(var r in t)n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var p=/\{ *([\w_ -]+) *\}/g;function f(t,e){return t.replace(p,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n}))}var y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function g(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function v(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function M(t){var e=+new Date,i=Math.max(0,16-(e-b));return b=e+i,window.setTimeout(t,i)}var x=window.requestAnimationFrame||v("RequestAnimationFrame")||M,w=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function S(t,e,i){if(!i||x!==M)return x.call(window,n(t,e));t.call(e)}function A(t){t&&w.call(window,t)}var T={__proto__:null,extend:e,create:i,bind:n,get lastId(){return r},stamp:a,throttle:s,wrapNum:o,falseFn:l,formatNum:h,trim:u,splitWords:c,setOptions:d,getParamString:m,template:f,isArray:y,indexOf:g,emptyImageUrl:_,requestFn:x,cancelFn:w,requestAnimFrame:S,cancelAnimFrame:A};function C(){}C.extend=function(t){var n=function(){d(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,a=i(r);for(var s in a.constructor=n,n.prototype=a,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(n[s]=this[s]);return t.statics&&e(n,t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=y(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[a].concat(t.includes))),e(a,t),delete a.statics,delete a.includes,a.options&&(a.options=r.options?i(r.options):{},e(a.options,t.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=a._initHooks.length;t<e;t++)a._initHooks[t].call(this)}},n},C.include=function(t){var i=this.prototype.options;return e(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},C.mergeOptions=function(t){return e(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var I={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var r=0,a=(t=c(t)).length;r<a;r++)this._on(t[r],e,i);return this},off:function(t,e,i){if(arguments.length)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=c(t);for(var r=1===arguments.length,a=0,s=t.length;a<s;a++)r?this._off(t[a]):this._off(t[a],e,i)}else delete this._events;return this},_on:function(t,e,i,n){if("function"==typeof e){if(!1===this._listens(t,e,i)){i===this&&(i=void 0);var r={fn:e,ctx:i};n&&(r.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(r)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,i){var n,r,a;if(this._events&&(n=this._events[t]))if(1!==arguments.length)if("function"==typeof e){var s=this._listens(t,e,i);if(!1!==s){var o=n[s];this._firingCount&&(o.fn=l,this._events[t]=n=n.slice()),n.splice(s,1)}}else console.warn("wrong listener type: "+typeof e);else{if(this._firingCount)for(r=0,a=n.length;r<a;r++)n[r].fn=l;delete this._events[t]}},fire:function(t,i,n){if(!this.listens(t,n))return this;var r=e({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var s=0,o=a.length;s<o;s++){var l=a[s],h=l.fn;l.once&&this.off(t,h,l.ctx),h.call(l.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e,i,n){"string"!=typeof t&&console.warn('"string" type argument expected');var r=e;"function"!=typeof e&&(n=!!e,r=void 0,i=void 0);var a=this._events&&this._events[t];if(a&&a.length&&!1!==this._listens(t,r,i))return!0;if(n)for(var s in this._eventParents)if(this._eventParents[s].listens(t,e,i,n))return!0;return!1},_listens:function(t,e,i){if(!this._events)return!1;var n=this._events[t]||[];if(!e)return!!n.length;i===this&&(i=void 0);for(var r=0,a=n.length;r<a;r++)if(n[r].fn===e&&n[r].ctx===i)return r;return!1},once:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e,!0);else for(var r=0,a=(t=c(t)).length;r<a;r++)this._on(t[r],e,i,!0);return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var k=C.extend(I);function P(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var E=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function D(t,e,i){return t instanceof P?t:y(t)?new P(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new P(t.x,t.y):new P(t,e,i)}function z(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function F(t,e){return!t||t instanceof z?t:new z(t,e)}function O(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function R(t,e){return t instanceof O?t:new O(t,e)}function N(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function B(t,e,i){return t instanceof N?t:y(t)&&"object"!=typeof t[0]?3===t.length?new N(t[0],t[1],t[2]):2===t.length?new N(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new N(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new N(t,e,i)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new P(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new P(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=E(this.x),this.y=E(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}},z.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof P||"number"==typeof t[0]||"x"in t)e=i=D(t);else if(e=(t=F(t)).min,i=t.max,!e||!i)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=e.clone(),this.max=i.clone()),this},getCenter:function(t){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof P?D(t):F(t))instanceof z?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=F(t);var e=this.min,i=this.max,n=t.min,r=t.max,a=r.x>=e.x&&n.x<=i.x,s=r.y>=e.y&&n.y<=i.y;return a&&s},overlaps:function(t){t=F(t);var e=this.min,i=this.max,n=t.min,r=t.max,a=r.x>e.x&&n.x<i.x,s=r.y>e.y&&n.y<i.y;return a&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,i=this.max,n=Math.abs(e.x-i.x)*t,r=Math.abs(e.y-i.y)*t;return F(D(e.x-n,e.y-r),D(i.x+n,i.y+r))},equals:function(t){return!!t&&(t=F(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},O.prototype={extend:function(t){var e,i,n=this._southWest,r=this._northEast;if(t instanceof N)e=t,i=t;else{if(!(t instanceof O))return t?this.extend(B(t)||R(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||r?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new N(e.lat,e.lng),this._northEast=new N(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,r=Math.abs(e.lng-i.lng)*t;return new O(new N(e.lat-n,e.lng-r),new N(i.lat+n,i.lng+r))},getCenter:function(){return new N((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new N(this.getNorth(),this.getWest())},getSouthEast:function(){return new N(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof N||"lat"in t?B(t):R(t);var e,i,n=this._southWest,r=this._northEast;return t instanceof O?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=r.lat&&e.lng>=n.lng&&i.lng<=r.lng},intersects:function(t){t=R(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),a=r.lat>=e.lat&&n.lat<=i.lat,s=r.lng>=e.lng&&n.lng<=i.lng;return a&&s},overlaps:function(t){t=R(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),a=r.lat>e.lat&&n.lat<i.lat,s=r.lng>e.lng&&n.lng<i.lng;return a&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=R(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},N.prototype={equals:function(t,e){return!!t&&(t=B(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+h(this.lat,t)+", "+h(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,B(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return R([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new N(this.lat,this.lng,this.alt)}};var j,H={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new z(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?o(t.lng,this.wrapLng,!0):t.lng;return new N(this.wrapLat?o(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,r=e.lng-i.lng;if(0===n&&0===r)return t;var a=t.getSouthWest(),s=t.getNorthEast();return new O(new N(a.lat-n,a.lng-r),new N(s.lat-n,s.lng-r))}},U=e({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,a=Math.sin((e.lat-t.lat)*i/2),s=Math.sin((e.lng-t.lng)*i/2),o=a*a+Math.cos(n)*Math.cos(r)*s*s,l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return this.R*l}}),V=6378137,G={R:V,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=Math.sin(n*e);return new P(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new N((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(j=V*Math.PI,new z([-j,-j],[j,j]))};function $(t,e,i,n){if(y(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function Z(t,e,i,n){return new $(t,e,i,n)}$.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new P((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var q=e({},U,{code:"EPSG:3857",projection:G,transformation:function(){var t=.5/(Math.PI*G.R);return Z(t,.5,-t,.5)}()}),Y=e({},q,{code:"EPSG:900913"});function W(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){var i,n,r,a,s,o,l="";for(i=0,r=t.length;i<r;i++){for(n=0,a=(s=t[i]).length;n<a;n++)l+=(n?"L":"M")+(o=s[n]).x+" "+o.y;l+=e?zt.svg?"z":"x":""}return l||"M0 0"}var X,K=document.documentElement.style,Q="ActiveXObject"in window,tt=Q&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=Lt("webkit"),nt=Lt("android"),rt=Lt("android 2")||Lt("android 3"),at=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=nt&&Lt("Google")&&at<537&&!("AudioNode"in window),ot=!!window.opera,lt=!et&&Lt("chrome"),ht=Lt("gecko")&&!it&&!ot&&!Q,ut=!lt&&Lt("safari"),ct=Lt("phantom"),dt="OTransition"in K,mt=0===navigator.platform.indexOf("Win"),pt=Q&&"transition"in K,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,yt="MozPerspective"in K,gt=!window.L_DISABLE_3D&&(pt||ft||yt)&&!dt&&!ct,_t="undefined"!=typeof orientation||Lt("mobile"),vt=_t&&it,bt=_t&&ft,Mt=!window.PointerEvent&&window.MSPointerEvent,xt=!(!window.PointerEvent&&!Mt),wt="ontouchstart"in window||!!window.TouchEvent,St=!window.L_NO_TOUCH&&(wt||xt),At=_t&&ot,Tt=_t&&ht,Ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,It=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),kt=!!document.createElement("canvas").getContext,Pt=!(!document.createElementNS||!W("svg").createSVGRect),Et=!!Pt&&((X=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(X.firstChild&&X.firstChild.namespaceURI)),Dt=!Pt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Lt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var zt={ie:Q,ielt9:tt,edge:et,webkit:it,android:nt,android23:rt,androidStock:st,opera:ot,chrome:lt,gecko:ht,safari:ut,phantom:ct,opera12:dt,win:mt,ie3d:pt,webkit3d:ft,gecko3d:yt,any3d:gt,mobile:_t,mobileWebkit:vt,mobileWebkit3d:bt,msPointer:Mt,pointer:xt,touch:St,touchNative:wt,mobileOpera:At,mobileGecko:Tt,retina:Ct,passiveEvents:It,canvas:kt,svg:Pt,vml:Dt,inlineSvg:Et,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Ft=zt.msPointer?"MSPointerDown":"pointerdown",Ot=zt.msPointer?"MSPointerMove":"pointermove",Rt=zt.msPointer?"MSPointerUp":"pointerup",Nt=zt.msPointer?"MSPointerCancel":"pointercancel",Bt={touchstart:Ft,touchmove:Ot,touchend:Rt,touchcancel:Nt},jt={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ne(e),qt(t,e)},touchmove:qt,touchend:qt,touchcancel:qt},Ht={},Ut=!1;function Vt(t,e,i){return"touchstart"===e&&(Ut||(document.addEventListener(Ft,Gt,!0),document.addEventListener(Ot,$t,!0),document.addEventListener(Rt,Zt,!0),document.addEventListener(Nt,Zt,!0),Ut=!0)),jt[e]?(i=jt[e].bind(this,i),t.addEventListener(Bt[e],i,!1),i):(console.warn("wrong event specified:",e),l)}function Gt(t){Ht[t.pointerId]=t}function $t(t){Ht[t.pointerId]&&(Ht[t.pointerId]=t)}function Zt(t){delete Ht[t.pointerId]}function qt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var i in e.touches=[],Ht)e.touches.push(Ht[i]);e.changedTouches=[e],t(e)}}var Yt=200;var Wt,Jt,Xt,Kt,Qt,te=ye(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ee=ye(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ie="webkitTransition"===ee||"OTransition"===ee?ee+"End":"transitionend";function ne(t){return"string"==typeof t?document.getElementById(t):t}function re(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function ae(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function oe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function he(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ue(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=pe(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function ce(t,e){if(void 0!==t.classList)for(var i=c(e),n=0,r=i.length;n<r;n++)t.classList.add(i[n]);else if(!ue(t,e)){var a=pe(t);me(t,(a?a+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):me(t,u((" "+pe(t)+" ").replace(" "+e+" "," ")))}function me(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function pe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function fe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function ye(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function ge(t,e,i){var n=e||new P(0,0);t.style[te]=(zt.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function _e(t,e){t._leaflet_pos=e,zt.any3d?ge(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ve(t){return t._leaflet_pos||new P(0,0)}if("onselectstart"in document)Wt=function(){Ie(window,"selectstart",Ne)},Jt=function(){Pe(window,"selectstart",Ne)};else{var be=ye(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wt=function(){if(be){var t=document.documentElement.style;Xt=t[be],t[be]="none"}},Jt=function(){be&&(document.documentElement.style[be]=Xt,Xt=void 0)}}function Me(){Ie(window,"dragstart",Ne)}function xe(){Pe(window,"dragstart",Ne)}function we(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Se(),Kt=t,Qt=t.style.outline,t.style.outline="none",Ie(window,"keydown",Se))}function Se(){Kt&&(Kt.style.outline=Qt,Kt=void 0,Qt=void 0,Pe(window,"keydown",Se))}function Ae(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Te(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ce={__proto__:null,TRANSFORM:te,TRANSITION:ee,TRANSITION_END:ie,get:ne,getStyle:re,create:ae,remove:se,empty:oe,toFront:le,toBack:he,hasClass:ue,addClass:ce,removeClass:de,setClass:me,getClass:pe,setOpacity:fe,testProp:ye,setTransform:ge,setPosition:_e,getPosition:ve,get disableTextSelection(){return Wt},get enableTextSelection(){return Jt},disableImageDrag:Me,enableImageDrag:xe,preventOutline:we,restoreOutline:Se,getSizedParentNode:Ae,getScale:Te};function Ie(t,e,i,n){if(e&&"object"==typeof e)for(var r in e)Le(t,r,e[r],i);else for(var a=0,s=(e=c(e)).length;a<s;a++)Le(t,e[a],i,n);return this}var ke="_leaflet_events";function Pe(t,e,i,n){if(1===arguments.length)Ee(t),delete t[ke];else if(e&&"object"==typeof e)for(var r in e)ze(t,r,e[r],i);else if(e=c(e),2===arguments.length)Ee(t,(function(t){return-1!==g(e,t)}));else for(var a=0,s=e.length;a<s;a++)ze(t,e[a],i,n);return this}function Ee(t,e){for(var i in t[ke]){var n=i.split(/\d/)[0];e&&!e(n)||ze(t,n,null,null,i)}}var De={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Le(t,e,i,n){var r=e+a(i)+(n?"_"+a(n):"");if(t[ke]&&t[ke][r])return this;var s=function(e){return i.call(n||t,e||window.event)},o=s;!zt.touchNative&&zt.pointer&&0===e.indexOf("touch")?s=Vt(t,e,s):zt.touch&&"dblclick"===e?s=function(t,e){t.addEventListener("dblclick",e);var i,n=0;function r(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var r=je(t);if(!r.some((function(t){return t instanceof HTMLLabelElement&&t.attributes.for}))||r.some((function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement}))){var a=Date.now();a-n<=Yt?2==++i&&e(function(t){var e,i,n={};for(i in t)e=t[i],n[i]=e&&e.bind?e.bind(t):e;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}(t)):i=1,n=a}}}else i=t.detail}return t.addEventListener("click",r),{dblclick:e,simDblclick:r}}(t,s):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(De[e]||e,s,!!zt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,Ge(t,e)&&o(e)},t.addEventListener(De[e],s,!1)):t.addEventListener(e,o,!1):t.attachEvent("on"+e,s),t[ke]=t[ke]||{},t[ke][r]=s}function ze(t,e,i,n,r){r=r||e+a(i)+(n?"_"+a(n):"");var s=t[ke]&&t[ke][r];if(!s)return this;!zt.touchNative&&zt.pointer&&0===e.indexOf("touch")?function(t,e,i){Bt[e]?t.removeEventListener(Bt[e],i,!1):console.warn("wrong event specified:",e)}(t,e,s):zt.touch&&"dblclick"===e?function(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}(t,s):"removeEventListener"in t?t.removeEventListener(De[e]||e,s,!1):t.detachEvent("on"+e,s),t[ke][r]=null}function Fe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Oe(t){return Le(t,"wheel",Fe),this}function Re(t){return Ie(t,"mousedown touchstart dblclick contextmenu",Fe),t._leaflet_disable_click=!0,this}function Ne(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Be(t){return Ne(t),Fe(t),this}function je(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function He(t,e){if(!e)return new P(t.clientX,t.clientY);var i=Te(e),n=i.boundingClientRect;return new P((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Ue=zt.linux&&zt.chrome?window.devicePixelRatio:zt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ve(t){return zt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ue:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function Ge(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var $e={__proto__:null,on:Ie,off:Pe,stopPropagation:Fe,disableScrollPropagation:Oe,disableClickPropagation:Re,preventDefault:Ne,stop:Be,getPropagationPath:je,getMousePosition:He,getWheelDelta:Ve,isExternalTarget:Ge,addListener:Ie,removeListener:Pe},Ze=k.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ve(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),_e(this._el,i),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),qe=k.extend({options:{crs:q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(B(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ee&&zt.any3d&&!zt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ie(this._proxy,ie,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,n){return i=void 0===i?this._zoom:this._limitZoom(i),t=this._limitCenter(B(t),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=e({animate:n.animate},n.zoom),n.pan=e({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,i,n.pan&&n.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(zt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(zt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),a=(t instanceof P?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/n),s=this.containerPointToLatLng(r.add(a));return this.setView(s,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():R(t);var i=D(e.paddingTopLeft||e.padding||[0,0]),n=D(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,i.add(n));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var a=n.subtract(i).divideBy(2),s=this.project(t.getSouthWest(),r),o=this.project(t.getNorthEast(),r);return{center:this.unproject(s.add(o).divideBy(2).add(a),r),zoom:r}},fitBounds:function(t,e){if(!(t=R(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=D(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ze,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ce(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!zt.any3d)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),r=this.project(t),a=this.getSize(),s=this._zoom;t=B(t),e=void 0===e?s:e;var o=Math.max(a.x,a.y),l=o*this.getZoomScale(s,e),h=r.distanceTo(n)||1,u=1.42,c=u*u;function d(t){var e=(l*l-o*o+(t?-1:1)*c*c*h*h)/(2*(t?l:o)*c*h),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function m(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var f=d(0);function y(t){return o*(p(f)*(m(e=f+u*t)/p(e))-m(f))/c;var e}var g=Date.now(),_=(d(1)-f)/u,v=i.duration?1e3*i.duration:1e3*_*.8;return this._moveStart(!0,i.noMoveStart),function i(){var a=(Date.now()-g)/v,l=function(t){return 1-Math.pow(1-t,1.5)}(a)*_;a<=1?(this._flyToFrame=S(i,this),this._move(this.unproject(n.add(r.subtract(n).multiplyBy(y(l)/h)),s),this.getScaleZoom(o/function(t){return o*(p(f)/p(f+u*t))}(l),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=R(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,R(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=D(e.paddingBottomRight||e.padding||[0,0]),r=this.project(this.getCenter()),a=this.project(t),s=this.getPixelBounds(),o=F([s.min.add(i),s.max.subtract(n)]),l=o.getSize();if(!o.contains(a)){this._enforcingBounds=!0;var h=a.subtract(o.getCenter()),u=o.extend(a).getSize().subtract(l);r.x+=h.x<0?-u.x:u.x,r.y+=h.y<0?-u.y:u.y,this.panTo(this.unproject(r),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=i.divideBy(2).round(),s=r.divideBy(2).round(),o=a.subtract(s);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),r=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,r,t):navigator.geolocation.getCurrentPosition(i,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new N(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var r=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(r,n.maxZoom):r)}var a={latlng:e,bounds:i,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(a[s]=t.coords[s]);this.fire("locationfound",a)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ae("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new O(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=R(t),i=D(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),a=this.getMaxZoom(),s=t.getNorthWest(),o=t.getSouthEast(),l=this.getSize().subtract(i),h=F(this.project(o,n),this.project(s,n)).getSize(),u=zt.any3d?this.options.zoomSnap:1,c=l.x/h.x,d=l.y/h.y,m=e?Math.max(c,d):Math.min(c,d);return n=this.getScaleZoom(m,n),u&&(n=Math.round(n/(u/100))*(u/100),n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(r,Math.min(a,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new z(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(B(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(B(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(R(t))},distance:function(t,e){return this.options.crs.distance(B(t),B(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return He(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ne(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ie(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&zt.any3d,ce(t,"leaflet-container"+(zt.touch?" leaflet-touch":"")+(zt.retina?" leaflet-retina":"")+(zt.ielt9?" leaflet-oldie":"")+(zt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=re(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ce(t.markerPane,"leaflet-zoom-hide"),ce(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){_e(this._mapPane,new P(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,i)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),n?i&&i.pinch&&this.fire("zoom",i):((r||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_e(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Pe:Ie;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),zt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=S((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,o=!1;s;){if((i=this._targets[a(s)])&&("click"===e||"preclick"===e)&&this._draggableMoved(i)){o=!0;break}if(i&&i.listens(e,!0)){if(r&&!Ge(s,t))break;if(n.push(i),r)break}if(s===this._container)break;s=s.parentNode}return n.length||o||r||!this.listens(e,!0)||(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var i=t.type;"mousedown"===i&&we(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,n){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}var a=this._findEventTargets(t,i);if(n){for(var s=[],o=0;o<n.length;o++)n[o].listens(i,!0)&&s.push(n[o]);a=s.concat(a)}if(a.length){"contextmenu"===i&&Ne(t);var l=a[0],h={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);h.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),h.layerPoint=this.containerPointToLayerPoint(h.containerPoint),h.latlng=u?l.getLatLng():this.layerPointToLatLng(h.layerPoint)}for(o=0;o<a.length;o++)if(a[o].fire(i,h,!0),h.originalEvent._stopped||!1===a[o].options.bubblingMouseEvents&&-1!==g(this._mouseEvents,i))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ve(this._mapPane)||new P(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return F([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),r=this.getSize().divideBy(2),a=new z(n.subtract(r),n.add(r)),s=this._getBoundsOffset(a,i,e);return Math.abs(s.x)<=1&&Math.abs(s.y)<=1?t:this.unproject(n.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new z(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=F(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),r=n.min.subtract(t.min),a=n.max.subtract(t.max);return new P(this._rebound(r.x,-a.x),this._rebound(r.y,-a.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=zt.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=te,i=this._proxy.style[e];ge(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ge(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(r)||(S((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,i,r){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Ye=C.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return ce(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),We=function(t){return new Ye(t)};qe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ae("div",e+"control-container",this._container);function n(n,r){var a=e+n+" "+e+r;t[n+r]=ae("div",a,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Je=Ye.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ye.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):de(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Re(e),Oe(e);var n=this._section=ae("section",t+"-list");i&&(this._map.on("click",this.collapse,this),Ie(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=ae("a",t+"-toggle",e);r.href="#",r.title="Layers",r.setAttribute("role","button"),Ie(r,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){Ne(t),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=ae("div",t+"-base",n),this._separator=ae("div",t+"-separator",n),this._overlaysList=ae("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(n((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oe(this._baseLayersList),oe(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,r=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,r+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+a(this),n),this._layerControlInputs.push(e),e.layerId=a(t.layer),Ie(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var s=document.createElement("span");return i.appendChild(s),s.appendChild(e),s.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var a=i.length-1;a>=0;a--)t=i[a],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||r.push(e);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])&&this._map.removeLayer(r[a]);for(a=0;a<n.length;a++)this._map.hasLayer(n[a])||this._map.addLayer(n[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;r>=0;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;Ie(t,"click",Ne),this.expand(),setTimeout((function(){Pe(t,"click",Ne)}))}}),Xe=Ye.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ae("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,r){var a=ae("a",i,n);return a.innerHTML=t,a.href="#",a.title=e,a.setAttribute("role","button"),a.setAttribute("aria-label",e),Re(a),Ie(a,"click",Be),Ie(a,"click",r,this),Ie(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ce(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ce(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});qe.mergeOptions({zoomControl:!0}),qe.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Xe,this.addControl(this.zoomControl))}));var Ke=Ye.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ae("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ae("div",e,i)),t.imperial&&(this._iScale=ae("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,r=3.2808399*t;r>5280?(e=r/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(r),this._updateScale(this._iScale,n+" ft",n/r))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),Qe=Ye.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(zt.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),Re(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});qe.mergeOptions({attributionControl:!0}),qe.addInitHook((function(){this.options.attributionControl&&(new Qe).addTo(this)}));Ye.Layers=Je,Ye.Zoom=Xe,Ye.Scale=Ke,Ye.Attribution=Qe,We.layers=function(t,e,i){return new Je(t,e,i)},We.zoom=function(t){return new Xe(t)},We.scale=function(t){return new Ke(t)},We.attribution=function(t){return new Qe(t)};var ti=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ti.addTo=function(t,e){return t.addHandler(e,this),this};var ei,ii={Events:I},ni=zt.touch?"touchstart mousedown":"mousedown",ri=k.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){d(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Ie(this._dragStartTarget,ni,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ri._dragging===this&&this.finishDrag(!0),Pe(this._dragStartTarget,ni,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ue(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)ri._dragging===this&&this.finishDrag();else if(!(ri._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(ri._dragging=this,this._preventOutline&&we(this._element),Me(),Wt(),this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,i=Ae(this._element);this._startPoint=new P(e.clientX,e.clientY),this._startPos=ve(this._element),this._parentScale=Te(i);var n="mousedown"===t.type;Ie(document,n?"mousemove":"touchmove",this._onMove,this),Ie(document,n?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new P(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ne(t),this._moved||(this.fire("dragstart"),this._moved=!0,ce(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_e(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Pe(document,"mousemove touchmove",this._onMove,this),Pe(document,"mouseup touchend touchcancel",this._onUp,this),xe(),Jt(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,ri._dragging=!1}});function ai(t,e){if(!e||!t.length)return t.slice();var i=e*e;return function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,oi(t,n,e,0,i-1);var r,a=[];for(r=0;r<i;r++)n[r]&&a.push(t[r]);return a}(t=function(t,e){for(var i=[t[0]],n=1,r=0,a=t.length;n<a;n++)ci(t[n],t[r])>e&&(i.push(t[n]),r=n);return r<a-1&&i.push(t[a-1]),i}(t,i),i)}function si(t,e,i){return Math.sqrt(di(t,e,i,!0))}function oi(t,e,i,n,r){var a,s,o,l=0;for(s=n+1;s<=r-1;s++)(o=di(t[s],t[n],t[r],!0))>l&&(a=s,l=o);l>i&&(e[a]=1,oi(t,e,i,n,a),oi(t,e,i,a,r))}function li(t,e,i,n,r){var a,s,o,l=n?ei:ui(t,i),h=ui(e,i);for(ei=h;;){if(!(l|h))return[t,e];if(l&h)return!1;o=ui(s=hi(t,e,a=l||h,i,r),i),a===l?(t=s,l=o):(e=s,h=o)}}function hi(t,e,i,n,r){var a,s,o=e.x-t.x,l=e.y-t.y,h=n.min,u=n.max;return 8&i?(a=t.x+o*(u.y-t.y)/l,s=u.y):4&i?(a=t.x+o*(h.y-t.y)/l,s=h.y):2&i?(a=u.x,s=t.y+l*(u.x-t.x)/o):1&i&&(a=h.x,s=t.y+l*(h.x-t.x)/o),new P(a,s,r)}function ui(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function ci(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function di(t,e,i,n){var r,a=e.x,s=e.y,o=i.x-a,l=i.y-s,h=o*o+l*l;return h>0&&((r=((t.x-a)*o+(t.y-s)*l)/h)>1?(a=i.x,s=i.y):r>0&&(a+=o*r,s+=l*r)),o=t.x-a,l=t.y-s,n?o*o+l*l:new P(a,s)}function mi(t){return!y(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function pi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mi(t)}function fi(t,e){var i,n,r,a,s,o,l,h;if(!t||0===t.length)throw new Error("latlngs not passed");mi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var u=[];for(var c in t)u.push(e.project(B(t[c])));var d=u.length;for(i=0,n=0;i<d-1;i++)n+=u[i].distanceTo(u[i+1])/2;if(0===n)h=u[0];else for(i=0,a=0;i<d-1;i++)if(s=u[i],o=u[i+1],(a+=r=s.distanceTo(o))>n){l=(a-n)/r,h=[o.x-l*(o.x-s.x),o.y-l*(o.y-s.y)];break}return e.unproject(D(h))}var yi={__proto__:null,simplify:ai,pointToSegmentDistance:si,closestPointOnSegment:function(t,e,i){return di(t,e,i)},clipSegment:li,_getEdgeIntersection:hi,_getBitCode:ui,_sqClosestPointOnSegment:di,isFlat:mi,_flat:pi,polylineCenter:fi};function gi(t,e,i){var n,r,a,s,o,l,h,u,c,d=[1,4,2,8];for(r=0,h=t.length;r<h;r++)t[r]._code=ui(t[r],e);for(s=0;s<4;s++){for(u=d[s],n=[],r=0,a=(h=t.length)-1;r<h;a=r++)o=t[r],l=t[a],o._code&u?l._code&u||((c=hi(l,o,u,e,i))._code=ui(c,e),n.push(c)):(l._code&u&&((c=hi(l,o,u,e,i))._code=ui(c,e),n.push(c)),n.push(o));t=n}return t}function _i(t,e){var i,n,r,a,s,o,l,h,u;if(!t||0===t.length)throw new Error("latlngs not passed");mi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var c=[];for(var d in t)c.push(e.project(B(t[d])));var m=c.length;for(o=l=h=0,i=0,n=m-1;i<m;n=i++)r=c[i],a=c[n],s=r.y*a.x-a.y*r.x,l+=(r.x+a.x)*s,h+=(r.y+a.y)*s,o+=3*s;return u=0===o?c[0]:[l/o,h/o],e.unproject(D(u))}var vi={__proto__:null,clipPolygon:gi,polygonCenter:_i},bi={project:function(t){return new P(t.lng,t.lat)},unproject:function(t){return new N(t.y,t.x)},bounds:new z([-180,-90],[180,90])},Mi={R:6378137,R_MINOR:6356752.314245179,bounds:new z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,r=this.R_MINOR/i,a=Math.sqrt(1-r*r),s=a*Math.sin(n),o=Math.tan(Math.PI/4-n/2)/Math.pow((1-s)/(1+s),a/2);return n=-i*Math.log(Math.max(o,1e-10)),new P(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,a=Math.sqrt(1-r*r),s=Math.exp(-t.y/n),o=Math.PI/2-2*Math.atan(s),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)e=a*Math.sin(o),e=Math.pow((1-e)/(1+e),a/2),o+=h=Math.PI/2-2*Math.atan(s*e)-o;return new N(o*i,t.x*i/n)}},xi={__proto__:null,LonLat:bi,Mercator:Mi,SphericalMercator:G},wi=e({},U,{code:"EPSG:3395",projection:Mi,transformation:function(){var t=.5/(Math.PI*Mi.R);return Z(t,.5,-t,.5)}()}),Si=e({},U,{code:"EPSG:4326",projection:bi,transformation:Z(1/180,1,-1/180,.5)}),Ai=e({},H,{projection:bi,transformation:Z(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});H.Earth=U,H.EPSG3395=wi,H.EPSG3857=q,H.EPSG900913=Y,H.EPSG4326=Si,H.Simple=Ai;var Ti=k.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});qe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return a(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?y(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ci=Ti.extend({initialize:function(t,e){var i,n;if(d(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Ii=Ci.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ci.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ci.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new O;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),ki=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var r=D(n),a=D("shadow"===e&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),a&&(t.style.marginLeft=-a.x+"px",t.style.marginTop=-a.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return zt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Pi=ki.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof Pi.imagePath&&(Pi.imagePath=this._detectIconPath()),(this.options.imagePath||Pi.imagePath)+ki.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,i){var n=e.exec(t);return n&&n[i]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=re(t,"background-image")||re(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),Ei=ti.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ri(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ce(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,a=ve(e._icon),s=i.getPixelBounds(),o=i.getPixelOrigin(),l=F(s.min._subtract(o).add(r),s.max._subtract(o).subtract(r));if(!l.contains(a)){var h=D((Math.max(l.max.x,a.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,a.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,a.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,a.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(n);i.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),_e(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=S(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=ve(e._icon),r=e._map.layerPointToLatLng(n);i&&_e(i,n),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Di=Ti.extend({options:{icon:new Pi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),ce(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(i,"focus",this._panOnFocus,this);var r=t.icon.createShadow(this._shadow),a=!1;r!==this._shadow&&(this._removeShadow(),a=!0),r&&(ce(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&a&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(this._icon,"focus",this._panOnFocus,this),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&_e(this._icon,t),this._shadow&&_e(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ei)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ei(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&fe(this._icon,t),this._shadow&&fe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?D(e.iconSize):D(0,0),n=e.iconAnchor?D(e.iconAnchor):D(0,0);t.panInside(this._latlng,{paddingTopLeft:n,paddingBottomRight:i.subtract(n)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Li=Ti.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),zi=Li.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Li.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new z(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Fi=zi.extend({initialize:function(t,i,n){if("number"==typeof i&&(i=e({},n,{radius:i})),d(this,i),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new O(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Li.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===U.distance){var r=Math.PI/180,a=this._mRadius/U.R/r,s=i.project([e+a,t]),o=i.project([e-a,t]),l=s.add(o).divideBy(2),h=i.unproject(l).lat,u=Math.acos((Math.cos(a*r)-Math.sin(e*r)*Math.sin(h*r))/(Math.cos(e*r)*Math.cos(h*r)))/r;(isNaN(u)||0===u)&&(u=a/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([h,t-u]).x,this._radiusY=l.y-s.y}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}});var Oi=Li.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,r=null,a=di,s=0,o=this._parts.length;s<o;s++)for(var l=this._parts[s],h=1,u=l.length;h<u;h++){var c=a(t,e=l[h-1],i=l[h],!0);c<n&&(n=c,r=a(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=B(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new O,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=mi(t),n=0,r=t.length;n<r;n++)i?(e[n]=B(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new P(t,t);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var n,r,a=t[0]instanceof N,s=t.length;if(a){for(r=[],n=0;n<s;n++)r[n]=this._map.latLngToLayerPoint(t[n]),i.extend(r[n]);e.push(r)}else for(n=0;n<s;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,r,a,s,o,l=this._parts;for(e=0,n=0,r=this._rings.length;e<r;e++)for(i=0,a=(o=this._rings[e]).length;i<a-1;i++)(s=li(o[i],o[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(s[0]),s[1]===o[i+1]&&i!==a-2||(l[n].push(s[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=ai(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,r,a,s,o,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,a=this._parts.length;i<a;i++)for(n=0,r=(s=(o=this._parts[i]).length)-1;n<s;r=n++)if((e||0!==n)&&si(t,o[r],o[n])<=l)return!0;return!1}});Oi._flat=pi;var Ri=Oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _i(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Oi.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof N&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Oi.prototype._setLatLngs.call(this,t),mi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new P(e,e);if(t=new z(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,r=0,a=this._rings.length;r<a;r++)(n=gi(this._rings[r],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,r,a,s,o,l,h=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,o=this._parts.length;r<o;r++)for(a=0,s=(l=(e=this._parts[r]).length)-1;a<l;s=a++)i=e[a],n=e[s],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h);return h||Oi.prototype._containsPoint.call(this,t,!0)}});var Ni=Ii.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,r=y(t)?t:t.features;if(r){for(e=0,i=r.length;e<i;e++)((n=r[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var a=this.options;if(a.filter&&!a.filter(t))return this;var s=Bi(t,a);return s?(s.feature=Zi(t),s.defaultOptions=s.options,this.resetStyle(s),a.onEachFeature&&a.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Bi(t,e){var i,n,r,a,s="Feature"===t.type?t.geometry:t,o=s?s.coordinates:null,l=[],h=e&&e.pointToLayer,u=e&&e.coordsToLatLng||Hi;if(!o&&!s)return null;switch(s.type){case"Point":return ji(h,t,i=u(o),e);case"MultiPoint":for(r=0,a=o.length;r<a;r++)i=u(o[r]),l.push(ji(h,t,i,e));return new Ii(l);case"LineString":case"MultiLineString":return n=Ui(o,"LineString"===s.type?0:1,u),new Oi(n,e);case"Polygon":case"MultiPolygon":return n=Ui(o,"Polygon"===s.type?1:2,u),new Ri(n,e);case"GeometryCollection":for(r=0,a=s.geometries.length;r<a;r++){var c=Bi({geometry:s.geometries[r],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new Ii(l);case"FeatureCollection":for(r=0,a=s.features.length;r<a;r++){var d=Bi(s.features[r],e);d&&l.push(d)}return new Ii(l);default:throw new Error("Invalid GeoJSON object.")}}function ji(t,e,i,n){return t?t(e,i):new Di(i,n&&n.markersInheritOptions&&n)}function Hi(t){return new N(t[1],t[0],t[2])}function Ui(t,e,i){for(var n,r=[],a=0,s=t.length;a<s;a++)n=e?Ui(t[a],e-1,i):(i||Hi)(t[a]),r.push(n);return r}function Vi(t,e){return void 0!==(t=B(t)).alt?[h(t.lng,e),h(t.lat,e),h(t.alt,e)]:[h(t.lng,e),h(t.lat,e)]}function Gi(t,e,i,n){for(var r=[],a=0,s=t.length;a<s;a++)r.push(e?Gi(t[a],mi(t[a])?0:e-1,i,n):Vi(t[a],n));return!e&&i&&r.push(r[0].slice()),r}function $i(t,i){return t.feature?e({},t.feature,{geometry:i}):Zi(i)}function Zi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var qi={toGeoJSON:function(t){return $i(this,{type:"Point",coordinates:Vi(this.getLatLng(),t)})}};function Yi(t,e){return new Ni(t,e)}Di.include(qi),Fi.include(qi),zi.include(qi),Oi.include({toGeoJSON:function(t){var e=!mi(this._latlngs);return $i(this,{type:(e?"Multi":"")+"LineString",coordinates:Gi(this._latlngs,e?1:0,!1,t)})}}),Ri.include({toGeoJSON:function(t){var e=!mi(this._latlngs),i=e&&!mi(this._latlngs[0]),n=Gi(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),$i(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Ci.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),$i(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(i)n.push(r.geometry);else{var a=Zi(r);"FeatureCollection"===a.type?n.push.apply(n,a.features):n.push(a)}}})),i?$i(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Wi=Yi,Ji=Ti.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=R(e),d(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&he(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=R(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");ce(e,"leaflet-image-layer"),this._zoomAnimated&&ce(e,"leaflet-zoom-animated"),this.options.className&&ce(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ge(this._image,i,e)},_reset:function(){var t=this._image,e=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();_e(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){fe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Xi=Ji.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(ce(e,"leaflet-image-layer"),this._zoomAnimated&&ce(e,"leaflet-zoom-animated"),this.options.className&&ce(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=n(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),r=[],a=0;a<i.length;a++)r.push(i[a].src);this._url=i.length>0?r:[e.src]}else{y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var s=0;s<this._url.length;s++){var o=ae("source");o.src=this._url[s],e.appendChild(o)}}}});var Ki=Ji.extend({_initImage:function(){var t=this._image=this._url;ce(t,"leaflet-image-layer"),this._zoomAnimated&&ce(t,"leaflet-zoom-animated"),this.options.className&&ce(t,this.options.className),t.onselectstart=l,t.onmousemove=l}});var Qi=Ti.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof N||y(t))?(this._latlng=B(t),d(this,e)):(d(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&fe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&fe(this._container,1),this.bringToFront(),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(fe(this._container,0),this._removeTimeout=setTimeout(n(se,void 0,this._container),200)):se(this._container),this.options.interactive&&(de(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&he(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Ii){e=null;var i=this._source._layers;for(var n in i)if(i[n]._map){e=i[n];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),i=this._getAnchor();this._zoomAnimated?_e(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});qe.include({_initOverlay:function(t,e,i,n){var r=e;return r instanceof t||(r=new t(n).setContent(e)),i&&r.setLatLng(i),r}}),Ti.include({_initOverlay:function(t,e,i,n){var r=i;return r instanceof t?(d(r,n),r._source=this):(r=e&&!n?e:new t(n,this)).setContent(i),r}});var tn=Qi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Qi.prototype.openOn.call(this,t)},onAdd:function(t){Qi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Li||this._source.on("preclick",Fe))},onRemove:function(t){Qi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Li||this._source.off("preclick",Fe))},getEvents:function(){var t=Qi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",i),Re(e),Oe(this._contentNode),Ie(e,"contextmenu",Fe),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=ae("a",t+"-close-button",e);n.setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',Ie(n,"click",(function(t){Ne(t),this.close()}),this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,r=this.options.maxHeight,a="leaflet-popup-scrolled";r&&n>r?(e.height=r+"px",ce(t,a)):de(t,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();_e(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var t=this._map,e=parseInt(re(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,r=new P(this._containerLeft,-i-this._containerBottom);r._add(ve(this._container));var a=t.layerPointToContainerPoint(r),s=D(this.options.autoPanPadding),o=D(this.options.autoPanPaddingTopLeft||s),l=D(this.options.autoPanPaddingBottomRight||s),h=t.getSize(),u=0,c=0;a.x+n+l.x>h.x&&(u=a.x+n-h.x+l.x),a.x-u-o.x<0&&(u=a.x-o.x),a.y+i+l.y>h.y&&(c=a.y+i-h.y+l.y),a.y-c-o.y<0&&(c=a.y-o.y),(u||c)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([u,c]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});qe.mergeOptions({closePopupOnClick:!0}),qe.include({openPopup:function(t,e,i){return this._initOverlay(tn,t,e,i).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),Ti.include({bindPopup:function(t,e){return this._popup=this._initOverlay(tn,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Ii||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){Be(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof Li?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var en=Qi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Qi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Qi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Qi.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,r=this._container,a=n.latLngToContainerPoint(n.getCenter()),s=n.layerPointToContainerPoint(t),o=this.options.direction,l=r.offsetWidth,h=r.offsetHeight,u=D(this.options.offset),c=this._getAnchor();"top"===o?(e=l/2,i=h):"bottom"===o?(e=l/2,i=0):"center"===o?(e=l/2,i=h/2):"right"===o?(e=0,i=h/2):"left"===o?(e=l,i=h/2):s.x<a.x?(o="right",e=0,i=h/2):(o="left",e=l+2*(u.x+c.x),i=h/2),t=t.subtract(D(e,i,!0)).add(u).add(c),de(r,"leaflet-tooltip-right"),de(r,"leaflet-tooltip-left"),de(r,"leaflet-tooltip-top"),de(r,"leaflet-tooltip-bottom"),ce(r,"leaflet-tooltip-"+o),_e(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&fe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});qe.include({openTooltip:function(t,e,i){return this._initOverlay(en,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ti.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(en,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Ii||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=t.getElement();e&&(Ie(e,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),Ie(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var nn=ki.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(oe(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=D(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});ki.Default=Pi;var rn=Ti.extend({options:{tileSize:256,opacity:1,updateWhenIdle:zt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(he(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof P?t:new P(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),r=0,a=i.length;r<a;r++)e=i[r].style.zIndex,i[r]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!zt.ielt9){fe(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var r=this._tiles[n];if(r.current&&r.loaded){var a=Math.min(1,(t-r.loaded)/200);fe(r.el,a),a<1?e=!0:(r.active?i=!0:this._onOpaqueTile(r),r.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(A(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(se(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],r=this._map;return n||((n=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,r.getCenter(),r.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),a=Math.floor(e/2),s=i-1,o=new P(+r,+a);o.z=+s;var l=this._tileCoordsToKey(o),h=this._tiles[l];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),s>n&&this._retainParent(r,a,s,n))},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++)for(var a=2*e;a<2*e+2;a++){var s=new P(r,a);s.z=i+1;var o=this._tileCoordsToKey(s),l=this._tiles[o];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(r,a,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var a=this.options.updateWhenZooming&&r!==this._tileZoom;n&&!a||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),r=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();zt.any3d?ge(t.el,r,n):_e(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),r=e.project(t,this._tileZoom).floor(),a=e.getSize().divideBy(2*n);return new z(r.subtract(a),r.add(a))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(n),a=r.getCenter(),s=[],o=this.options.keepBuffer,l=new z(r.getBottomLeft().subtract([o,-o]),r.getTopRight().add([o,-o]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var u=this._tiles[h].coords;u.z===this._tileZoom&&l.contains(new P(u.x,u.y))||(this._tiles[h].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var c=r.min.y;c<=r.max.y;c++)for(var d=r.min.x;d<=r.max.x;d++){var m=new P(d,c);if(m.z=this._tileZoom,this._isValidTile(m)){var p=this._tiles[this._tileCoordsToKey(m)];p?p.current=!0:s.push(m)}}if(s.sort((function(t,e){return t.distanceTo(a)-e.distanceTo(a)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return R(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),r=n.add(i);return[e.unproject(n,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new O(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new P(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ce(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,zt.ielt9&&this.options.opacity<1&&fe(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),r=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&S(n(this._tileReady,this,t,null,a)),_e(a,i),this._tiles[r]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var r=this._tileCoordsToKey(t);(i=this._tiles[r])&&(i.loaded=+new Date,this._map._fadeAnimated?(fe(i.el,0),A(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(ce(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),zt.ielt9||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new P(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new z(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var an=rn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&zt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Ie(i,"load",n(this._tileOnLoad,this,e,i)),Ie(i,"error",n(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var i={r:zt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=n),i["-y"]=n}return f(this._url,e(i,this.options))},_tileOnLoad:function(t,e){zt.ielt9?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,!e.complete)){e.src=_;var i=this._tiles[t].coords;se(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",_),rn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==_))return rn.prototype._tileReady.call(this,t,e,i)}});function sn(t,e){return new an(t,e)}var on=an.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var n=e({},this.defaultWmsParams);for(var r in i)r in this.options||(n[r]=i[r]);var a=(i=d(this,i)).detectRetina&&zt.retina?2:1,s=this.getTileSize();n.width=s.x*a,n.height=s.y*a,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,an.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=F(i.project(e[0]),i.project(e[1])),r=n.min,a=n.max,s=(this._wmsVersion>=1.3&&this._crs===Si?[r.y,r.x,a.y,a.x]:[r.x,r.y,a.x,a.y]).join(","),o=an.prototype.getTileUrl.call(this,t);return o+m(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,i){return e(this.wmsParams,t),i||this.redraw(),this}});an.WMS=on,sn.wms=function(t,e){return new on(t,e)};var ln=Ti.extend({options:{padding:.1},initialize:function(t){d(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=n.multiplyBy(-i).add(r).subtract(this._map._getNewPixelOrigin(t,e));zt.any3d?ge(this._container,a,i):_e(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new z(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hn=ln.extend({options:{tolerance:0},getEvents:function(){var t=ln.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ie(t,"mousemove",this._onMouseMove,this),Ie(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ie(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,se(this._container),Pe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ln.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=zt.retina?2:1;_e(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",zt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),r=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,r,a,s=t._parts,o=s.length,l=this._ctx;if(o){for(l.beginPath(),i=0;i<o;i++){for(n=0,r=s[i].length;n<r;n++)a=s[i][n],l[n?"lineTo":"moveTo"](a.x,a.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==r&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(e.x,e.y/r,n,0,2*Math.PI,!1),1!==r&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(i=e);this._fireEvent(!!i&&[i],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,r,a=this._drawFirst;a;a=a.next)(i=a.layer).options.interactive&&i._containsPoint(e)&&(r=i);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(ce(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(n((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function un(t){return zt.canvas?new hn(t):null}var cn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dn={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ln.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=cn("shape");ce(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=cn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,r=t._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(e||(e=t._stroke=cn("stroke")),r.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=y(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(r.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=cn("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){he(t._container)}},mn=zt.vml?cn:W,pn=ln.extend({_initContainer:function(){this._container=mn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=mn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Pe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){ln.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),_e(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=mn("path");t.options.className&&ce(e,t.options.className),t.options.interactive&&ce(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){he(t._path)}});function fn(t){return zt.svg||zt.vml?new pn(t):null}zt.vml&&pn.include(dn),qe.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&un(t)||fn(t)}});var yn=Ri.extend({initialize:function(t,e){Ri.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=R(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});pn.create=mn,pn.pointsToPath=J,Ni.geometryToLayer=Bi,Ni.coordsToLatLng=Hi,Ni.coordsToLatLngs=Ui,Ni.latLngToCoords=Vi,Ni.latLngsToCoords=Gi,Ni.getFeature=$i,Ni.asFeature=Zi,qe.mergeOptions({boxZoom:!0});var gn=ti.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Wt(),Me(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ie(document,{contextmenu:Be,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new z(this._point,this._startPoint),i=e.getSize();_e(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(se(this._box),de(this._container,"leaflet-crosshair")),Jt(),xe(),Pe(document,{contextmenu:Be,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new O(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});qe.addInitHook("addHandler","boxZoom",gn),qe.mergeOptions({doubleClickZoom:!0});var _n=ti.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,r=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});qe.addInitHook("addHandler","doubleClickZoom",_n),qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vn=ti.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ri(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=R(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-e+i)%t+e-i,a=(n+e+i)%t-e-i,s=Math.abs(r+i)<Math.abs(a+i)?r:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,s=i.easeLinearity,o=r.multiplyBy(s/a),l=o.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),u=o.multiplyBy(h/l),c=h/(i.inertiaDeceleration*s),d=u.multiplyBy(-c/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),S((function(){e.panBy(d,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});qe.addInitHook("addHandler","dragging",vn),qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bn=ti.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ie(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},r=this.keyCodes;for(e=0,i=r.left.length;e<i;e++)n[r.left[e]]=[-1*t,0];for(e=0,i=r.right.length;e<i;e++)n[r.right[e]]=[t,0];for(e=0,i=r.down.length;e<i;e++)n[r.down[e]]=[0,t];for(e=0,i=r.up.length;e<i;e++)n[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},r=this.keyCodes;for(e=0,i=r.zoomIn.length;e<i;e++)n[r.zoomIn[e]]=t;for(e=0,i=r.zoomOut.length;e<i;e++)n[r.zoomOut[e]]=-t},_addHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(e=this._panKeys[i],t.shiftKey&&(e=D(e).multiplyBy(3)),n.options.maxBounds&&(e=n._limitOffset(D(e),n.options.maxBounds)),n.options.worldCopyJump){var r=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(e)));n.panTo(r)}else n.panBy(e)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Be(t)}}});qe.addInitHook("addHandler","keyboard",bn),qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Mn=ti.extend({addHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ve(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),r),Be(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,a=i?Math.ceil(r/i)*i:r,s=t._limitZoom(e+(this._delta>0?a:-a))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});qe.addInitHook("addHandler","scrollWheelZoom",Mn);qe.mergeOptions({tapHold:zt.touchNative&&zt.safari&&zt.mobile,tapTolerance:15});var xn=ti.extend({addHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new P(e.clientX,e.clientY),this._holdTimeout=setTimeout(n((function(){this._cancel(),this._isTapValid()&&(Ie(document,"touchend",Ne),Ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),600),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Pe(document,"touchend",Ne),Pe(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new P(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});qe.addInitHook("addHandler","tapHold",xn),qe.mergeOptions({touchZoom:zt.touch,bounceAtZoomLimits:!0});var wn=ti.extend({addHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),Ne(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),a=i.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var s=i._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var o=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=S(o,this,!0),Ne(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,A(this._animRequest),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});qe.addInitHook("addHandler","touchZoom",wn),qe.BoxZoom=gn,qe.DoubleClickZoom=_n,qe.Drag=vn,qe.Keyboard=bn,qe.ScrollWheelZoom=Mn,qe.TapHold=xn,qe.TouchZoom=wn,t.Bounds=z,t.Browser=zt,t.CRS=H,t.Canvas=hn,t.Circle=Fi,t.CircleMarker=zi,t.Class=C,t.Control=Ye,t.DivIcon=nn,t.DivOverlay=Qi,t.DomEvent=$e,t.DomUtil=Ce,t.Draggable=ri,t.Evented=k,t.FeatureGroup=Ii,t.GeoJSON=Ni,t.GridLayer=rn,t.Handler=ti,t.Icon=ki,t.ImageOverlay=Ji,t.LatLng=N,t.LatLngBounds=O,t.Layer=Ti,t.LayerGroup=Ci,t.LineUtil=yi,t.Map=qe,t.Marker=Di,t.Mixin=ii,t.Path=Li,t.Point=P,t.PolyUtil=vi,t.Polygon=Ri,t.Polyline=Oi,t.Popup=tn,t.PosAnimation=Ze,t.Projection=xi,t.Rectangle=yn,t.Renderer=ln,t.SVG=pn,t.SVGOverlay=Ki,t.TileLayer=an,t.Tooltip=en,t.Transformation=$,t.Util=T,t.VideoOverlay=Xi,t.bind=n,t.bounds=F,t.canvas=un,t.circle=function(t,e,i){return new Fi(t,e,i)},t.circleMarker=function(t,e){return new zi(t,e)},t.control=We,t.divIcon=function(t){return new nn(t)},t.extend=e,t.featureGroup=function(t,e){return new Ii(t,e)},t.geoJSON=Yi,t.geoJson=Wi,t.gridLayer=function(t){return new rn(t)},t.icon=function(t){return new ki(t)},t.imageOverlay=function(t,e,i){return new Ji(t,e,i)},t.latLng=B,t.latLngBounds=R,t.layerGroup=function(t,e){return new Ci(t,e)},t.map=function(t,e){return new qe(t,e)},t.marker=function(t,e){return new Di(t,e)},t.point=D,t.polygon=function(t,e){return new Ri(t,e)},t.polyline=function(t,e){return new Oi(t,e)},t.popup=function(t,e){return new tn(t,e)},t.rectangle=function(t,e){return new yn(t,e)},t.setOptions=d,t.stamp=a,t.svg=fn,t.svgOverlay=function(t,e,i){return new Ki(t,e,i)},t.tileLayer=sn,t.tooltip=function(t,e){return new en(t,e)},t.transformation=Z,t.version="1.9.3",t.videoOverlay=function(t,e,i){return new Xi(t,e,i)};var Sn=window.L;t.noConflict=function(){return window.L=Sn,this},window.L=t}(e)},3559:function(t,e,i){var n;n=function(t,e){t.MapboxGL=t.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(i){t.setOptions(this,i),i.accessToken&&(e.accessToken=i.accessToken),this._throttledUpdate=t.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(e){this._container||this._initContainer();var i=this.getPaneName();e.getPane(i).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&t.DomEvent.on(e._proxy,t.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(e){this._map._proxy&&this._map.options.zoomAnimation&&t.DomEvent.off(this._map._proxy,t.DomUtil.TRANSITION_END,this._transitionEnd,this);var i=this.getPaneName();e.getPane(i).removeChild(this._container)},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMapboxMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var e=this.getSize().multiplyBy(.5),i=this._map.latLngToContainerPoint(this._map.getCenter());return t.latLngBounds(this._map.containerPointToLatLng(i.subtract(e)),this._map.containerPointToLatLng(i.add(e)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_initContainer:function(){var e=this._container=t.DomUtil.create("div","leaflet-gl-layer"),i=this.getSize(),n=this._map.getSize().multiplyBy(this.options.padding);e.style.width=i.x+"px",e.style.height=i.y+"px";var r=this._map.containerPointToLayerPoint([0,0]).subtract(n);t.DomUtil.setPosition(e,r)},_initGL:function(){var i=this._map.getCenter(),n=t.extend({},this.options,{container:this._container,center:[i.lng,i.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap?(this._glMap.setCenter(n.center),this._glMap.setZoom(n.zoom)):this._glMap=new e.Map(n),this._glMap.transform.latRange=null,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var r=this._glMap._actualCanvas;t.DomUtil.addClass(r,"leaflet-image-layer"),t.DomUtil.addClass(r,"leaflet-zoom-animated"),this.options.interactive&&t.DomUtil.addClass(r,"leaflet-interactive"),this.options.className&&t.DomUtil.addClass(r,this.options.className)},_update:function(e){if(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming){var i=this.getSize(),n=this._container,r=this._glMap,a=this._map.getSize().multiplyBy(this.options.padding),s=this._map.containerPointToLayerPoint([0,0]).subtract(a);t.DomUtil.setPosition(n,s),this._transformGL(r),r.transform.width!==i.x||r.transform.height!==i.y?(n.style.width=i.x+"px",n.style.height=i.y+"px",null!==r._resize&&void 0!==r._resize?r._resize():r.resize()):null!==r._update&&void 0!==r._update?r._update():r.update()}},_transformGL:function(t){var i=this._map.getCenter(),n=t.transform;n.center=e.LngLat.convert([i.lng,i.lat]),n.zoom=this._map.getZoom()-1},_pinchZoom:function(t){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),n=this._map.getSize().multiplyBy(this.options.padding*i),r=this.getSize()._divideBy(2),a=this._map.project(e.center,e.zoom)._subtract(r)._add(this._map._getMapPanePos().add(n))._round(),s=this._map.project(this._map.getBounds().getNorthWest(),e.zoom)._subtract(a);t.DomUtil.setTransform(this._glMap._actualCanvas,s.subtract(this._offset),i)},_zoomStart:function(t){this._zooming=!0},_zoomEnd:function(){var e=this._map.getZoomScale(this._map.getZoom());t.DomUtil.setTransform(this._glMap._actualCanvas,null,e),this._zooming=!1,this._update()},_transitionEnd:function(e){t.Util.requestAnimFrame((function(){var e=this._map.getZoom(),i=this._map.getCenter(),n=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());t.DomUtil.setTransform(this._glMap._actualCanvas,n,1),this._glMap.once("moveend",t.Util.bind((function(){this._zoomEnd()}),this)),this._glMap.jumpTo({center:i,zoom:e-1})}),this)},_resize:function(t){this._transitionEnd(t)}}),t.mapboxGL=function(e){return new t.MapboxGL(e)}},"function"==typeof define&&define.amd?define(["leaflet","mapbox-gl"],n):t.exports=n(i(3481),i(842))},842:function(t){t.exports=function(){"use strict";var t,e,i;function n(n,r){if(t)if(e){var a="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",s={};t(s),i=r(s),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else e=r;else t=r}return n(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n;function n(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var i,n,r,a,s;for(void 0===e&&(e=1e-6),r=t,s=0;s<8;s++){if(a=this.sampleCurveX(r)-t,Math.abs(a)<e)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r-=a/o}if((r=t)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(a=this.sampleCurveX(r),Math.abs(a-t)<e)return r;t>a?i=r:n=r,r=.5*(n-i)+i}return r},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=a;function a(t,e){this.x=t,this.y=e}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),r=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-n*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var s="undefined"!=typeof self?self:{};function o(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!o(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!o(t[i],e[i]))return!1;return!0}return t===e}const l=Math.pow(2,53)-1,h=Math.PI/180,u=180/Math.PI;function c(t){return t*h}function d(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}function m(t,e,n,r){const a=new i(t,e,n,r);return function(t){return a.solve(t)}}const p=m(.25,.1,.25,1);function f(t,e,i){return Math.min(i,Math.max(e,t))}function y(t,e,i){const n=i-e,r=((t-e)%n+n)%n+e;return r===e?i:r}function g(t){const e=[];for(const i in t)e.push(t[i]);return e}function _(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}let v=1;function b(){return v++}function M(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function x(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function w(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function S(t,e){return-1!==t.indexOf(e,t.length-e.length)}function A(t,e,i){const n={};for(const r in t)n[r]=e.call(i||this,t[r],r,t);return n}function T(t,e,i){const n={};for(const r in t)e.call(i||this,t[r],r,t)&&(n[r]=t[r]);return n}function C(t){return Array.isArray(t)?t.map(C):"object"==typeof t&&t?A(t,C):t}const I={};function k(t){I[t]||("undefined"!=typeof console&&console.warn(t),I[t]=!0)}function P(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function E(t){let e=0;for(let i,n,r=0,a=t.length,s=a-1;r<a;s=r++)i=t[r],n=t[s],e+=(n.x-i.x)*(i.y+n.y);return e}function D(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function L(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,i,n,r)=>{const a=n||r;return e[i]=!a||a.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let z=null;function F(t){if(null==z){const e=t.navigator?t.navigator.userAgent:null;z=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return z}function O(t){try{const e=s[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}const R=s.performance&&s.performance.now?s.performance.now.bind(s.performance):Date.now.bind(Date),N=s.requestAnimationFrame||s.mozRequestAnimationFrame||s.webkitRequestAnimationFrame||s.msRequestAnimationFrame,B=s.cancelAnimationFrame||s.mozCancelAnimationFrame||s.webkitCancelAnimationFrame||s.msCancelAnimationFrame;let j,H,U=!1;const V={now:R,setErrorState(){U=!0},setNow(t){V.now=()=>t},restoreNow(){V.now=R},frame(t){if(U)return{cancel:()=>{}};const e=N(t);return{cancel:()=>B(e)}},getImageData(t,e=0){const i=s.document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(j||(j=s.document.createElement("a")),j.href=t,j.href),get devicePixelRatio(){return s.devicePixelRatio},get prefersReducedMotion(){return!!s.matchMedia&&(null==H&&(H=s.matchMedia("(prefers-reduced-motion: reduce)")),H.matches)}},G={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},$={supported:!1,testSupport:function(t){!Y&&q&&(W?J(t):Z=t)}};let Z,q,Y=!1,W=!1;function J(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,q),t.isContextLost())return;$.supported=!0}catch(t){}t.deleteTexture(e),Y=!0}s.document&&(q=s.document.createElement("img"),q.onload=function(){Z&&J(Z),Z=null,W=!0},q.onerror=function(){Y=!0,Z=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const X="01";function K(t){return 0===t.indexOf("mapbox:")}const Q=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function tt(t){return Q.test(t)}const et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function it(t){const e=t.match(et);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function nt(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}function rt(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(s.atob(e[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class at{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const e=rt(G.ACCESS_TOKEN);let i="";return i=e&&e.u?s.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):G.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${i}`:`mapbox.eventData:${i}`}fetchEventData(){const t=O("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{const t=s.localStorage.getItem(e);t&&(this.eventData=JSON.parse(t));const n=s.localStorage.getItem(i);n&&(this.anonId=n)}catch(t){k("Unable to read from LocalStorage")}}saveEventData(){const t=O("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{s.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&s.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){k("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,i,n){if(!G.EVENTS_URL)return;const r=it(G.EVENTS_URL);r.params.push(`access_token=${n||G.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.0.0",skuId:X,userId:this.anonId},s=e?_(a,e):a,o={url:nt(r),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Tt(o,(t=>{this.pendingRequest=null,i(t),this.saveEventData(),this.processRequests(n)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const st=new class extends at{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){G.EVENTS_URL&&G.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>K(t)||tt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=rt(G.ACCESS_TOKEN),i=e?e.u:G.ACCESS_TOKEN;let n=i!==this.eventData.tokenU;x(this.anonId)||(this.anonId=M(),n=!0);const r=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(r),i=(r-this.eventData.lastSuccess)/864e5;n=n||i>=1||i<-1||t.getDate()!==e.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(r,{"enabled.telemetry":!1},(t=>{t||(this.eventData.lastSuccess=r,this.eventData.tokenU=i)}),t)}},ot=st.postTurnstileEvent.bind(st),lt=new class extends at{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,i,n){this.skuToken=e,this.errorCb=n,G.EVENTS_URL&&(i||G.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},i):this.errorCb(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=M()),this.postEvent(i,{skuToken:this.skuToken},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},ht=lt.postMapLoadEvent.bind(lt),ut=new class extends at{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,i,n){if(!G.API_URL||!G.SESSION_PATH)return;const r=it(G.API_URL+G.SESSION_PATH);r.params.push(`sku=${e||""}`),r.params.push(`access_token=${n||G.ACCESS_TOKEN||""}`);const a={url:nt(r),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Ct(a,(t=>{this.pendingRequest=null,i(t),this.saveEventData(),this.processRequests(n)}))}getSessionAPI(t,e,i,n){this.skuToken=e,this.errorCb=n,G.SESSION_PATH&&G.API_URL&&(i||G.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},i):this.errorCb(new Error("NO_ACCESS_TOKEN")))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||this.getSession(i,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},ct=ut.getSessionAPI.bind(ut);let dt,mt,pt=500,ft=50;function yt(){s.caches&&!dt&&(dt=s.caches.open("mapbox-tiles"))}function gt(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}let _t,vt=1/0;function bt(){return null==_t&&(_t=s.OffscreenCanvas&&new s.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof s.createImageBitmap),_t}const Mt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Mt);class xt extends Error{constructor(t,e,i){401===e&&tt(i)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=i}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const wt=D()?()=>self.worker&&self.worker.referrer:()=>("blob:"===s.location.protocol?s.parent:s).location.href,St=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(wt())&&!/^\w+:/.test(i))){if(s.fetch&&s.Request&&s.AbortController&&s.Request.prototype.hasOwnProperty("signal"))return function(t,e){const i=new s.AbortController,n=new s.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:wt(),signal:i.signal});let r=!1,a=!1;const o=(l=n.url).indexOf("sku=")>0&&tt(l);var l;"json"===t.type&&n.headers.set("Accept","application/json");const h=(i,r,l)=>{if(a)return;if(i&&"SecurityError"!==i.message&&k(i),r&&l)return u(r);const h=Date.now();s.fetch(n).then((i=>{if(i.ok){const t=o?i.clone():null;return u(i,t,h)}return e(new xt(i.statusText,i.status,t.url))})).catch((t=>{20!==t.code&&e(new Error(t.message))}))},u=(i,o,l)=>{("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((t=>{a||(o&&l&&function(t,e,i){if(yt(),!dt)return;const n={status:e.status,statusText:e.statusText,headers:new s.Headers};e.headers.forEach(((t,e)=>n.headers.set(e,t)));const r=L(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&n.headers.set("Expires",new Date(i+1e3*r["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===mt)try{new Response(new ReadableStream),mt=!0}catch(t){mt=!1}mt?e(t.body):t.blob().then(e)}(e,(e=>{const i=new s.Response(e,n);yt(),dt&&dt.then((e=>e.put(gt(t.url),i))).catch((t=>k(t.message)))})))}(n,o,l),r=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((t=>{a||e(new Error(t.message))}))};return o?function(t,e){if(yt(),!dt)return e(null);const i=gt(t.url);dt.then((t=>{t.match(i).then((n=>{const r=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),i=L(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(n);t.delete(i),r&&t.put(i,n.clone()),e(null,n,r)})).catch(e)})).catch(e)}(n,h):h(null,null),{cancel:()=>{a=!0,r||i.abort()}}}(t,e);if(D()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){const i=new s.XMLHttpRequest;i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer");for(const e in t.headers)i.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=()=>{e(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let n=i.response;if("json"===t.type)try{n=JSON.parse(i.response)}catch(t){return e(t)}e(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new xt(i.statusText,i.status,t.url))},i.send(t.body),{cancel:()=>i.abort()}}(t,e)},At=function(t,e){return St(_(t,{type:"arrayBuffer"}),e)},Tt=function(t,e){return St(_(t,{method:"POST"}),e)},Ct=function(t,e){return St(_(t,{method:"GET"}),e)};function It(t){const e=s.document.createElement("a");return e.href=t,e.protocol===s.document.location.protocol&&e.host===s.document.location.host}const kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Pt,Et;Pt=[],Et=0;const Dt=function(t,e){if($.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Et>=G.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Pt.push(i),i}Et++;let i=!1;const n=()=>{if(!i)for(i=!0,Et--;Pt.length&&Et<G.MAX_PARALLEL_IMAGE_REQUESTS;){const t=Pt.shift(),{requestParameters:e,callback:i,cancelled:n}=t;n||(t.cancel=Dt(e,i).cancel)}},r=At(t,((t,i,r,a)=>{n(),t?e(t):i&&(bt()?function(t,e){const i=new s.Blob([new Uint8Array(t)],{type:"image/png"});s.createImageBitmap(i).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(i,e):function(t,e,i,n){const r=new s.Image,a=s.URL;r.onload=()=>{e(null,r),a.revokeObjectURL(r.src),r.onload=null,r.src=kt},r.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new s.Blob([new Uint8Array(t)],{type:"image/png"});r.cacheControl=i,r.expires=n,r.src=t.byteLength?a.createObjectURL(o):kt}(i,e,r,a))}));return{cancel:()=>{r.cancel(),n()}}};function Lt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function zt(t,e,i){if(i&&i[t]){const n=i[t].indexOf(e);-1!==n&&i[t].splice(n,1)}}class Ft{constructor(t,e={}){_(this,e),this.type=t}}class Ot extends Ft{constructor(t,e={}){super("error",_({error:t},e))}}class Rt{on(t,e){return this._listeners=this._listeners||{},Lt(t,e,this._listeners),this}off(t,e){return zt(t,e,this._listeners),zt(t,e,this._oneTimeListeners),this}once(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Lt(t,e,this._oneTimeListeners),this}fire(t,e){"string"==typeof t&&(t=new Ft(t,e||{}));const i=t.type;if(this.listens(i)){t.target=this;const e=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of e)i.call(this,t);const n=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const e of n)zt(i,e,this._oneTimeListeners),e.call(this,t);const r=this._eventedParent;r&&(_(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof Ot&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Nt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Bt{constructor(t,e,i,n){this.message=(t?`${t}: `:"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)}}function jt(t){const e=t.value;return e?[new Bt(t.key,e,"constants have been deprecated as of v8")]:[]}function Ht(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}function Ut(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Vt(t){if(Array.isArray(t))return t.map(Vt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=Vt(t[i]);return e}return Ut(t)}class Gt extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class $t{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,i]of e)this.bindings[t]=i}concat(t){return new $t(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Zt={kind:"null"},qt={kind:"number"},Yt={kind:"string"},Wt={kind:"boolean"},Jt={kind:"color"},Xt={kind:"object"},Kt={kind:"value"},Qt={kind:"collator"},te={kind:"formatted"},ee={kind:"resolvedImage"};function ie(t,e){return{kind:"array",itemType:t,N:e}}function ne(t){if("array"===t.kind){const e=ne(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const re=[Zt,qt,Yt,Wt,Jt,te,Xt,ie(Kt),ee];function ae(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!ae(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of re)if(!ae(t,e))return null}return`Expected ${ne(t)} but found ${ne(e)} instead.`}function se(t,e){return e.some((e=>e.kind===t.kind))}function oe(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var le=e((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function s(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,o=t.replace(/ /g,"").toLowerCase();if(o in i)return i[o].slice();if("#"===o[0])return 4===o.length?(e=parseInt(o.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===o.length&&(e=parseInt(o.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=o.indexOf("("),h=o.indexOf(")");if(-1!==l&&h+1===o.length){var u=o.substr(0,l),c=o.substr(l+1,h-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==c.length)return null;d=a(c.pop());case"rgb":return 3!==c.length?null:[r(c[0]),r(c[1]),r(c[2]),d];case"hsla":if(4!==c.length)return null;d=a(c.pop());case"hsl":if(3!==c.length)return null;var m=(parseFloat(c[0])%360+360)%360/360,p=a(c[1]),f=a(c[2]),y=f<=.5?f*(p+1):f+p-f*p,g=2*f-y;return[n(255*s(g,y,m+1/3)),n(255*s(g,y,m)),n(255*s(g,y,m-1/3)),d];default:return null}}return null}}catch(t){}})).parseCSSColor;class he{constructor(t,e,i,n=1){this.r=t,this.g=e,this.b=i,this.a=n}static parse(t){if(!t)return;if(t instanceof he)return t;if("string"!=typeof t)return;const e=le(t);return e?new he(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${n})`}toArray(){const{r:t,g:e,b:i,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*i/n,n]}}he.black=new he(0,0,0,1),he.white=new he(1,1,1,1),he.transparent=new he(0,0,0,0),he.red=new he(1,0,0,1),he.blue=new he(0,0,1,1);class ue{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ce{constructor(t,e,i,n,r){this.text=t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=r}}class de{constructor(t){this.sections=t}static fromString(t){return new de([new ce(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof de?t:de.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const i={};e.fontStack&&(i["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(i["font-scale"]=e.scale),e.textColor&&(i["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(i)}return t}}class me{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new me({name:t,available:!1}):null}serialize(){return["image",this.name]}}function pe(t,e,i,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,i,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fe(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof he)return!0;if(t instanceof ue)return!0;if(t instanceof de)return!0;if(t instanceof me)return!0;if(Array.isArray(t)){for(const e of t)if(!fe(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!fe(t[e]))return!1;return!0}return!1}function ye(t){if(null===t)return Zt;if("string"==typeof t)return Yt;if("boolean"==typeof t)return Wt;if("number"==typeof t)return qt;if(t instanceof he)return Jt;if(t instanceof ue)return Qt;if(t instanceof de)return te;if(t instanceof me)return ee;if(Array.isArray(t)){const e=t.length;let i;for(const e of t){const t=ye(e);if(i){if(i===t)continue;i=Kt;break}i=t}return ie(i||Kt,e)}return Xt}function ge(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof he||t instanceof de||t instanceof me?t.toString():JSON.stringify(t)}class _e{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!fe(t[1]))return e.error("invalid value");const i=t[1];let n=ye(i);const r=e.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new _e(n,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof he?["rgba"].concat(this.value.toArray()):this.value instanceof de?this.value.serialize():this.value}}class ve{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const be={string:Yt,number:qt,boolean:Wt,object:Xt};class Me{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,n=1;const r=t[0];if("array"===r){let r,a;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in be)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=be[i],n++}else r=Kt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}i=ie(r,a)}else i=be[r];const a=[];for(;n<t.length;n++){const i=e.parse(t[n],n,Kt);if(!i)return null;a.push(i)}return new Me(i,a)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!ae(this.type,ye(i)))return i;if(e===this.args.length-1)throw new ve(`Expected value to be of type ${ne(this.type)}, but found ${ne(ye(i))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((t=>t.serialize())))}}class xe{constructor(t){this.type=te,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const n=[];let r=!1;for(let i=1;i<=t.length-1;++i){const a=t[i];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;let t=null;if(a["font-scale"]&&(t=e.parse(a["font-scale"],1,qt),!t))return null;let i=null;if(a["text-font"]&&(i=e.parse(a["text-font"],1,ie(Yt)),!i))return null;let s=null;if(a["text-color"]&&(s=e.parse(a["text-color"],1,Jt),!s))return null;const o=n[n.length-1];o.scale=t,o.font=i,o.textColor=s}else{const a=e.parse(t[i],1,Kt);if(!a)return null;const s=a.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,n.push({content:a,scale:null,font:null,textColor:null})}}return new xe(n)}evaluate(t){return new de(this.sections.map((e=>{const i=e.content.evaluate(t);return ye(i)===ee?new ce("",i,null,null,null):new ce(ge(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const i={};e.scale&&(i["font-scale"]=e.scale.serialize()),e.font&&(i["text-font"]=e.font.serialize()),e.textColor&&(i["text-color"]=e.textColor.serialize()),t.push(i)}return t}}class we{constructor(t){this.type=ee,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,Yt);return i?new we(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=me.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Se={"to-boolean":Wt,"to-color":Jt,"to-number":qt,"to-string":Yt};class Ae{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const n=Se[i],r=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],i,Kt);if(!n)return null;r.push(n)}return new Ae(n,r)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,i;for(const n of this.args){if(e=n.evaluate(t),i=null,e instanceof he)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:pe(e[0],e[1],e[2],e[3]),!i))return new he(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ve(i||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new ve(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?de.fromString(ge(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?me.fromString(ge(this.args[0].evaluate(t))):ge(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new xe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new we(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Te=["Unknown","Point","LineString","Polygon"];class Ce{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Te[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=he.parse(t)),e}}class Ie{constructor(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const i=t[0],n=Ie.definitions[i];if(!n)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let o=null;for(const[n,a]of s){o=new Je(e.registry,e.path,null,e.scope);const s=[];let l=!1;for(let e=1;e<t.length;e++){const i=t[e],r=Array.isArray(n)?n[e-1]:n.type,a=o.parse(i,1+s.length,r);if(!a){l=!0;break}s.push(a)}if(!l)if(Array.isArray(n)&&n.length!==s.length)o.error(`Expected ${n.length} arguments, but found ${s.length} instead.`);else{for(let t=0;t<s.length;t++){const e=Array.isArray(n)?n[t]:n.type,i=s[t];o.concat(t+1).checkSubtype(e,i.type)}if(0===o.errors.length)return new Ie(i,r,a,s)}}if(1===s.length)e.errors.push(...o.errors);else{const i=(s.length?s:a).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(ne).join(", ")})`:`(${ne(e.type)}...)`;var e})).join(" | "),n=[];for(let i=1;i<t.length;i++){const r=e.parse(t[i],1+n.length);if(!r)return null;n.push(ne(r.type))}e.error(`Expected arguments of type ${i}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){Ie.definitions=e;for(const i in e)t[i]=Ie}}class ke{constructor(t,e,i){this.type=Qt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Wt);if(!n)return null;const r=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Wt);if(!r)return null;let a=null;return i.locale&&(a=e.parse(i.locale,1,Yt),!a)?null:new ke(n,r,a)}evaluate(t){return new ue(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}function Pe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ee(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function De(t,e){const i=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(i*r*8192),Math.round(n*r*8192)]}function Le(t,e,i){const n=t[0]-e[0],r=t[1]-e[1],a=t[0]-i[0],s=t[1]-i[1];return n*s-a*r==0&&n*a<=0&&r*s<=0}function ze(t,e){let i=!1;for(let s=0,o=e.length;s<o;s++){const o=e[s];for(let e=0,s=o.length;e<s-1;e++){if(Le(t,o[e],o[e+1]))return!1;(r=o[e])[1]>(n=t)[1]!=(a=o[e+1])[1]>n[1]&&n[0]<(a[0]-r[0])*(n[1]-r[1])/(a[1]-r[1])+r[0]&&(i=!i)}}var n,r,a;return i}function Fe(t,e){for(let i=0;i<e.length;i++)if(ze(t,e[i]))return!0;return!1}function Oe(t,e,i,n){const r=n[0]-i[0],a=n[1]-i[1],s=(t[0]-i[0])*a-r*(t[1]-i[1]),o=(e[0]-i[0])*a-r*(e[1]-i[1]);return s>0&&o<0||s<0&&o>0}function Re(t,e,i){for(const h of i)for(let i=0;i<h.length-1;++i)if(0!=(o=[(s=h[i+1])[0]-(a=h[i])[0],s[1]-a[1]])[0]*(l=[(r=e)[0]-(n=t)[0],r[1]-n[1]])[1]-o[1]*l[0]&&Oe(n,r,a,s)&&Oe(a,s,n,r))return!0;var n,r,a,s,o,l;return!1}function Ne(t,e){for(let i=0;i<t.length;++i)if(!ze(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(Re(t[i],t[i+1],e))return!1;return!0}function Be(t,e){for(let i=0;i<e.length;i++)if(Ne(t,e[i]))return!0;return!1}function je(t,e,i){const n=[];for(let r=0;r<t.length;r++){const a=[];for(let n=0;n<t[r].length;n++){const s=De(t[r][n],i);Pe(e,s),a.push(s)}n.push(a)}return n}function He(t,e,i){const n=[];for(let r=0;r<t.length;r++){const a=je(t[r],e,i);n.push(a)}return n}function Ue(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){const e=.5*n;let r=t[0]-i[0]>e?-n:i[0]-t[0]>e?n:0;0===r&&(r=t[0]-i[2]>e?-n:i[2]-t[0]>e?n:0),t[0]+=r}Pe(e,t)}function Ve(t,e,i,n){const r=8192*Math.pow(2,n.z),a=[8192*n.x,8192*n.y],s=[];for(const n of t)for(const t of n){const n=[t.x+a[0],t.y+a[1]];Ue(n,e,i,r),s.push(n)}return s}function Ge(t,e,i,n){const r=8192*Math.pow(2,n.z),a=[8192*n.x,8192*n.y],s=[];for(const i of t){const t=[];for(const n of i){const i=[n.x+a[0],n.y+a[1]];Pe(e,i),t.push(i)}s.push(t)}if(e[2]-e[0]<=r/2){(o=e)[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(const t of s)for(const n of t)Ue(n,e,i,r)}var o;return s}class $e{constructor(t,e){this.type=Wt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(fe(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const i=e.features[t].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new $e(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new $e(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new $e(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const a=je(e.coordinates,n,r),s=Ve(t.geometry(),i,n,r);if(!Ee(i,n))return!1;for(const t of s)if(!ze(t,a))return!1}if("MultiPolygon"===e.type){const a=He(e.coordinates,n,r),s=Ve(t.geometry(),i,n,r);if(!Ee(i,n))return!1;for(const t of s)if(!Fe(t,a))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const a=je(e.coordinates,n,r),s=Ge(t.geometry(),i,n,r);if(!Ee(i,n))return!1;for(const t of s)if(!Ne(t,a))return!1}if("MultiPolygon"===e.type){const a=He(e.coordinates,n,r),s=Ge(t.geometry(),i,n,r);if(!Ee(i,n))return!1;for(const t of s)if(!Be(t,a))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ze(t){if(t instanceof Ie){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof $e)return!1;let e=!0;return t.eachChild((t=>{e&&!Ze(t)&&(e=!1)})),e}function qe(t){if(t instanceof Ie&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!qe(t)&&(e=!1)})),e}function Ye(t,e){if(t instanceof Ie&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild((t=>{i&&!Ye(t,e)&&(i=!1)})),i}class We{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new We(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Je{constructor(t,e=[],i,n=new $t,r=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=n,this.errors=r,this.expectedType=i}parse(t,e,i,n,r={}){return e?this.concat(e,i,n)._parse(t,r):this._parse(t,r)}_parse(t,e){function i(t,e,i){return"assert"===i?new Me(e,[t]):"coerce"===i?new Ae(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[n];if(r){let n=r.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,r=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(t,r))return null}else n=i(n,t,e.typeAnnotation||"coerce");else n=i(n,t,e.typeAnnotation||"assert")}if(!(n instanceof _e)&&"resolvedImage"!==n.type.kind&&function t(e){if(e instanceof We)return t(e.boundExpression);if(e instanceof Ie&&"error"===e.name)return!1;if(e instanceof ke)return!1;if(e instanceof $e)return!1;const i=e instanceof Ae||e instanceof Me;let n=!0;return e.eachChild((e=>{n=i?n&&t(e):n&&e instanceof _e})),!!n&&Ze(e)&&Ye(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}(n)){const e=new Ce;try{n=new _e(n.type,n.evaluate(e))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const n="number"==typeof t?this.path.concat(t):this.path,r=i?this.scope.concat(i):this.scope;return new Je(this.registry,n,e||null,r,this.errors)}error(t,...e){const i=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new Gt(i,t))}checkSubtype(t,e){const i=ae(t,e);return i&&this.error(i),i}}function Xe(t,e){const i=t.length-1;let n,r,a=0,s=i,o=0;for(;a<=s;)if(o=Math.floor((a+s)/2),n=t[o],r=t[o+1],n<=e){if(o===i||e<r)return o;a=o+1}else{if(!(n>e))throw new ve("Input is not a number.");s=o-1}return 0}class Ke{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,qt);if(!i)return null;const n=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let i=1;i<t.length;i+=2){const a=1===i?-1/0:t[i],s=t[i+1],o=i,l=i+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',o);if(n.length&&n[n.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',o);const h=e.parse(s,l,r);if(!h)return null;r=r||h.type,n.push([a,h])}return new Ke(r,i,n)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const r=e.length;return n>=e[r-1]?i[r-1].evaluate(t):i[Xe(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function Qe(t,e,i){return t*(1-i)+e*i}var ti=Object.freeze({__proto__:null,number:Qe,color:function(t,e,i){return new he(Qe(t.r,e.r,i),Qe(t.g,e.g,i),Qe(t.b,e.b,i),Qe(t.a,e.a,i))},array:function(t,e,i){return t.map(((t,n)=>Qe(t,e[n],i)))}});const ei=6/29*3*(6/29),ii=Math.PI/180,ni=180/Math.PI;function ri(t){return t>.008856451679035631?Math.pow(t,1/3):t/ei+4/29}function ai(t){return t>6/29?t*t*t:ei*(t-4/29)}function si(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function oi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function li(t){const e=oi(t.r),i=oi(t.g),n=oi(t.b),r=ri((.4124564*e+.3575761*i+.1804375*n)/.95047),a=ri((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*a-16,a:500*(r-a),b:200*(a-ri((.0193339*e+.119192*i+.9503041*n)/1.08883)),alpha:t.a}}function hi(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*ai(e),i=.95047*ai(i),n=1.08883*ai(n),new he(si(3.2404542*i-1.5371385*e-.4985314*n),si(-.969266*i+1.8760108*e+.041556*n),si(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function ui(t,e,i){const n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}const ci={forward:li,reverse:hi,interpolate:function(t,e,i){return{l:Qe(t.l,e.l,i),a:Qe(t.a,e.a,i),b:Qe(t.b,e.b,i),alpha:Qe(t.alpha,e.alpha,i)}}},di={forward:function(t){const{l:e,a:i,b:n}=li(t),r=Math.atan2(n,i)*ni;return{h:r<0?r+360:r,c:Math.sqrt(i*i+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*ii,i=t.c;return hi({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:ui(t.h,e.h,i),c:Qe(t.c,e.c,i),l:Qe(t.l,e.l,i),alpha:Qe(t.alpha,e.alpha,i)}}};var mi=Object.freeze({__proto__:null,lab:ci,hcl:di});class pi{constructor(t,e,i,n,r){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,r){let a=0;if("exponential"===t.name)a=fi(e,t.base,n,r);else if("linear"===t.name)a=fi(e,1,n,r);else if("cubic-bezier"===t.name){const s=t.controlPoints;a=new i(s[0],s[1],s[2],s[3]).solve(fi(e,1,n,r))}return a}static parse(t,e){let[i,n,r,...a]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,qt),!r)return null;const s=[];let o=null;"interpolate-hcl"===i||"interpolate-lab"===i?o=Jt:e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(let t=0;t<a.length;t+=2){const i=a[t],n=a[t+1],r=t+3,l=t+4;if("number"!=typeof i)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(s.length&&s[s.length-1][0]>=i)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const h=e.parse(n,l,o);if(!h)return null;o=o||h.type,s.push([i,h])}return"number"===o.kind||"color"===o.kind||"array"===o.kind&&"number"===o.itemType.kind&&"number"==typeof o.N?new pi(o,i,n,r,s):e.error(`Type ${ne(o)} is not interpolatable.`)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const r=e.length;if(n>=e[r-1])return i[r-1].evaluate(t);const a=Xe(e,n),s=pi.interpolationFactor(this.interpolation,n,e[a],e[a+1]),o=i[a].evaluate(t),l=i[a+1].evaluate(t);return"interpolate"===this.operator?ti[this.type.kind.toLowerCase()](o,l,s):"interpolate-hcl"===this.operator?di.reverse(di.interpolate(di.forward(o),di.forward(l),s)):ci.reverse(ci.interpolate(ci.forward(o),ci.forward(l),s))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function fi(t,e,i,n){const r=n-i,a=t-i;return 0===r?0:1===e?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}class yi{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const n=e.expectedType;n&&"value"!==n.kind&&(i=n);const r=[];for(const n of t.slice(1)){const t=e.parse(n,1+r.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,r.push(t)}const a=n&&r.some((t=>ae(n,t.type)));return new yi(a?Kt:i,r)}evaluate(t){let e,i=null,n=0;for(const r of this.args)if(n++,i=r.evaluate(t),i&&i instanceof me&&!i.available&&(e||(e=i.name),i=null,n===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class gi{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let n=1;n<t.length-1;n+=2){const r=t[n];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,n);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const a=e.parse(t[n+1],n+1);if(!a)return null;i.push([r,a])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return n?new gi(i,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,i]of this.bindings)t.push(e,i.serialize());return t.push(this.result.serialize()),t}}class _i{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,qt),n=e.parse(t[2],2,ie(e.expectedType||Kt));return i&&n?new _i(n.type.itemType,i,n):null}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new ve(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new ve(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new ve(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class vi{constructor(t,e){this.type=Wt,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Kt),n=e.parse(t[2],2,Kt);return i&&n?se(i.type,[Wt,Yt,qt,Zt,Kt])?new vi(i,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ne(i.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!oe(e,["boolean","string","number","null"]))throw new ve(`Expected first argument to be of type boolean, string, number or null, but found ${ne(ye(e))} instead.`);if(!oe(i,["string","array"]))throw new ve(`Expected second argument to be of type array or string, but found ${ne(ye(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class bi{constructor(t,e,i){this.type=qt,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Kt),n=e.parse(t[2],2,Kt);if(!i||!n)return null;if(!se(i.type,[Wt,Yt,qt,Zt,Kt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ne(i.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,qt);return r?new bi(i,n,r):null}return new bi(i,n)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!oe(e,["boolean","string","number","null"]))throw new ve(`Expected first argument to be of type boolean, string, number or null, but found ${ne(ye(e))} instead.`);if(!oe(i,["string","array"]))throw new ve(`Expected second argument to be of type array or string, but found ${ne(ye(i))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Mi{constructor(t,e,i,n,r,a){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=r,this.otherwise=a}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r={},a=[];for(let s=2;s<t.length-1;s+=2){let o=t[s];const l=t[s+1];Array.isArray(o)||(o=[o]);const h=e.concat(s);if(0===o.length)return h.error("Expected at least one branch label.");for(const t of o){if("number"!=typeof t&&"string"!=typeof t)return h.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return h.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return h.error("Numeric branch labels must be integer values.");if(i){if(h.checkSubtype(i,ye(t)))return null}else i=ye(t);if(void 0!==r[String(t)])return h.error("Branch labels must be unique.");r[String(t)]=a.length}const u=e.parse(l,s,n);if(!u)return null;n=n||u.type,a.push(u)}const s=e.parse(t[1],1,Kt);if(!s)return null;const o=e.parse(t[t.length-1],t.length-1,n);return o?"value"!==s.type.kind&&e.concat(1).checkSubtype(i,s.type)?null:new Mi(i,n,s,r,a,o):null}evaluate(t){const e=this.input.evaluate(t);return(ye(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),i=[],n={};for(const t of e){const e=n[this.cases[t]];void 0===e?(n[this.cases[t]]=i.length,i.push([this.cases[t],[t]])):i[e][1].push(t)}const r=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,n]of i)t.push(1===n.length?r(n[0]):n.map(r)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class xi{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const n=[];for(let r=1;r<t.length-1;r+=2){const a=e.parse(t[r],r,Wt);if(!a)return null;const s=e.parse(t[r+1],r+1,i);if(!s)return null;n.push([a,s]),i=i||s.type}const r=e.parse(t[t.length-1],t.length-1,i);return r?new xi(i,n,r):null}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class wi{constructor(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Kt),n=e.parse(t[2],2,qt);if(!i||!n)return null;if(!se(i.type,[ie(Kt),Yt,Kt]))return e.error(`Expected first argument to be of type array or string, but found ${ne(i.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,qt);return r?new wi(i.type,i,n,r):null}return new wi(i.type,i,n)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!oe(e,["string","array"]))throw new ve(`Expected first argument to be of type array or string, but found ${ne(ye(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Si(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Ai(t,e,i,n){return 0===n.compare(e,i)}function Ti(t,e,i){const n="=="!==t&&"!="!==t;return class r{constructor(t,e,i){this.type=Wt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let a=e.parse(t[1],1,Kt);if(!a)return null;if(!Si(i,a.type))return e.concat(1).error(`"${i}" comparisons are not supported for type '${ne(a.type)}'.`);let s=e.parse(t[2],2,Kt);if(!s)return null;if(!Si(i,s.type))return e.concat(2).error(`"${i}" comparisons are not supported for type '${ne(s.type)}'.`);if(a.type.kind!==s.type.kind&&"value"!==a.type.kind&&"value"!==s.type.kind)return e.error(`Cannot compare types '${ne(a.type)}' and '${ne(s.type)}'.`);n&&("value"===a.type.kind&&"value"!==s.type.kind?a=new Me(s.type,[a]):"value"!==a.type.kind&&"value"===s.type.kind&&(s=new Me(a.type,[s])));let o=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==s.type.kind&&"value"!==a.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(o=e.parse(t[3],3,Qt),!o)return null}return new r(a,s,o)}evaluate(r){const a=this.lhs.evaluate(r),s=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){const e=ye(a),i=ye(s);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new ve(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${i.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=ye(a),i=ye(s);if("string"!==t.kind||"string"!==i.kind)return e(r,a,s)}return this.collator?i(r,a,s,this.collator.evaluate(r)):e(r,a,s)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const Ci=Ti("==",(function(t,e,i){return e===i}),Ai),Ii=Ti("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!Ai(0,e,i,n)})),ki=Ti("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),Pi=Ti(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),Ei=Ti("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0}));class Di{constructor(t,e,i,n,r){this.type=Yt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=r}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,qt);if(!i)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let r=null;if(n.locale&&(r=e.parse(n.locale,1,Yt),!r))return null;let a=null;if(n.currency&&(a=e.parse(n.currency,1,Yt),!a))return null;let s=null;if(n["min-fraction-digits"]&&(s=e.parse(n["min-fraction-digits"],1,qt),!s))return null;let o=null;return n["max-fraction-digits"]&&(o=e.parse(n["max-fraction-digits"],1,qt),!o)?null:new Di(i,r,a,s,o)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Li{constructor(t){this.type=qt,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${ne(i.type)} instead.`):new Li(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ve(`Expected value to be of type string or array, but found ${ne(ye(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const zi={"==":Ci,"!=":Ii,">":Pi,"<":ki,">=":Ti(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0})),"<=":Ei,array:Me,at:_i,boolean:Me,case:xi,coalesce:yi,collator:ke,format:xe,image:we,in:vi,"index-of":bi,interpolate:pi,"interpolate-hcl":pi,"interpolate-lab":pi,length:Li,let:gi,literal:_e,match:Mi,number:Me,"number-format":Di,object:Me,slice:wi,step:Ke,string:Me,"to-boolean":Ae,"to-color":Ae,"to-number":Ae,"to-string":Ae,var:We,within:$e};function Fi(t,[e,i,n,r]){e=e.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);const a=r?r.evaluate(t):1,s=pe(e,i,n,a);if(s)throw new ve(s);return new he(e/255*a,i/255*a,n/255*a,a)}function Oi(t,e){return t in e}function Ri(t,e){const i=e[t];return void 0===i?null:i}function Ni(t){return{type:t}}function Bi(t){return{result:"success",value:t}}function ji(t){return{result:"error",value:t}}function Hi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ui(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Vi(t){return!!t.expression&&t.expression.interpolated}function Gi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function $i(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Zi(t){return t}function qi(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Yi(t,e,i,n,r){return qi(typeof i===r?n[i]:void 0,t.default,e.default)}function Wi(t,e,i){if("number"!==Gi(i))return qi(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];const r=Xe(t.stops.map((t=>t[0])),i);return t.stops[r][1]}function Ji(t,e,i){const n=void 0!==t.base?t.base:1;if("number"!==Gi(i))return qi(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];const a=Xe(t.stops.map((t=>t[0])),i),s=function(t,e,i,n){const r=n-i,a=t-i;return 0===r?0:1===e?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}(i,n,t.stops[a][0],t.stops[a+1][0]),o=t.stops[a][1],l=t.stops[a+1][1];let h=ti[e.type]||Zi;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=mi[t.colorSpace];h=(t,i)=>e.reverse(e.interpolate(e.forward(t),e.forward(i),s))}return"function"==typeof o.evaluate?{evaluate(...t){const e=o.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==i)return h(e,i,s)}}:h(o,l,s)}function Xi(t,e,i){return"color"===e.type?i=he.parse(i):"formatted"===e.type?i=de.fromString(i.toString()):"resolvedImage"===e.type?i=me.fromString(i.toString()):Gi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),qi(i,t.default,e.default)}Ie.register(zi,{error:[{kind:"error"},[Yt],(t,[e])=>{throw new ve(e.evaluate(t))}],typeof:[Yt,[Kt],(t,[e])=>ne(ye(e.evaluate(t)))],"to-rgba":[ie(qt,4),[Jt],(t,[e])=>e.evaluate(t).toArray()],rgb:[Jt,[qt,qt,qt],Fi],rgba:[Jt,[qt,qt,qt,qt],Fi],has:{type:Wt,overloads:[[[Yt],(t,[e])=>Oi(e.evaluate(t),t.properties())],[[Yt,Xt],(t,[e,i])=>Oi(e.evaluate(t),i.evaluate(t))]]},get:{type:Kt,overloads:[[[Yt],(t,[e])=>Ri(e.evaluate(t),t.properties())],[[Yt,Xt],(t,[e,i])=>Ri(e.evaluate(t),i.evaluate(t))]]},"feature-state":[Kt,[Yt],(t,[e])=>Ri(e.evaluate(t),t.featureState||{})],properties:[Xt,[],t=>t.properties()],"geometry-type":[Yt,[],t=>t.geometryType()],id:[Kt,[],t=>t.id()],zoom:[qt,[],t=>t.globals.zoom],"heatmap-density":[qt,[],t=>t.globals.heatmapDensity||0],"line-progress":[qt,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[qt,[],t=>t.globals.skyRadialProgress||0],accumulated:[Kt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[qt,Ni(qt),(t,e)=>{let i=0;for(const n of e)i+=n.evaluate(t);return i}],"*":[qt,Ni(qt),(t,e)=>{let i=1;for(const n of e)i*=n.evaluate(t);return i}],"-":{type:qt,overloads:[[[qt,qt],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[qt],(t,[e])=>-e.evaluate(t)]]},"/":[qt,[qt,qt],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[qt,[qt,qt],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[qt,[],()=>Math.LN2],pi:[qt,[],()=>Math.PI],e:[qt,[],()=>Math.E],"^":[qt,[qt,qt],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[qt,[qt],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[qt,[qt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[qt,[qt],(t,[e])=>Math.log(e.evaluate(t))],log2:[qt,[qt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[qt,[qt],(t,[e])=>Math.sin(e.evaluate(t))],cos:[qt,[qt],(t,[e])=>Math.cos(e.evaluate(t))],tan:[qt,[qt],(t,[e])=>Math.tan(e.evaluate(t))],asin:[qt,[qt],(t,[e])=>Math.asin(e.evaluate(t))],acos:[qt,[qt],(t,[e])=>Math.acos(e.evaluate(t))],atan:[qt,[qt],(t,[e])=>Math.atan(e.evaluate(t))],min:[qt,Ni(qt),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[qt,Ni(qt),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[qt,[qt],(t,[e])=>Math.abs(e.evaluate(t))],round:[qt,[qt],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[qt,[qt],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[qt,[qt],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Wt,[Yt,Kt],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[Wt,[Kt],(t,[e])=>t.id()===e.value],"filter-type-==":[Wt,[Yt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Wt,[Yt,Kt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<r}],"filter-id-<":[Wt,[Kt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<n}],"filter->":[Wt,[Yt,Kt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>r}],"filter-id->":[Wt,[Kt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>n}],"filter-<=":[Wt,[Yt,Kt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<=r}],"filter-id-<=":[Wt,[Kt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<=n}],"filter->=":[Wt,[Yt,Kt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>=r}],"filter-id->=":[Wt,[Kt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>=n}],"filter-has":[Wt,[Kt],(t,[e])=>e.value in t.properties()],"filter-has-id":[Wt,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Wt,[ie(Yt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Wt,[ie(Kt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Wt,[Yt,ie(Kt)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Wt,[Yt,ie(Kt)],(t,[e,i])=>function(t,e,i,n){for(;i<=n;){const r=i+n>>1;if(e[r]===t)return!0;e[r]>t?n=r-1:i=r+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:Wt,overloads:[[[Wt,Wt],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[Ni(Wt),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:Wt,overloads:[[[Wt,Wt],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[Ni(Wt),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[Wt,[Wt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Wt,[Yt],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[Yt,[Yt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Yt,[Yt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Yt,Ni(Kt),(t,e)=>e.map((e=>ge(e.evaluate(t)))).join("")],"resolved-locale":[Yt,[Qt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Ki{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Ce,this._defaultValue=e?function(t){return"color"===t.type&&$i(t.default)?new he(0,0,0,0):"color"===t.type?he.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,n,r,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,n,r,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new ve(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Qi(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in zi}function tn(t,e){const i=new Je(zi,[],e?function(t){const e={color:Jt,string:Yt,number:qt,enum:Yt,boolean:Wt,formatted:te,resolvedImage:ee};return"array"===t.type?ie(e[t.value]||Kt,t.length):e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Bi(new Ki(n,e)):ji(i.errors)}class en{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!qe(e.expression)}evaluateWithoutErrorHandling(t,e,i,n,r,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,a)}evaluate(t,e,i,n,r,a){return this._styleExpression.evaluate(t,e,i,n,r,a)}}class nn{constructor(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!qe(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,i,n,r,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,a)}evaluate(t,e,i,n,r,a){return this._styleExpression.evaluate(t,e,i,n,r,a)}interpolationFactor(t,e,i){return this.interpolationType?pi.interpolationFactor(this.interpolationType,t,e,i):0}}function rn(t,e){if("error"===(t=tn(t,e)).result)return t;const i=t.value.expression,n=Ze(i);if(!n&&!Hi(e))return ji([new Gt("","data expressions not supported")]);const r=Ye(i,["zoom"]);if(!r&&!Ui(e))return ji([new Gt("","zoom expressions not supported")]);const a=function t(e){let i=null;if(e instanceof gi)i=t(e.result);else if(e instanceof yi){for(const n of e.args)if(i=t(n),i)break}else(e instanceof Ke||e instanceof pi)&&e.input instanceof Ie&&"zoom"===e.input.name&&(i=e);return i instanceof Gt||e.eachChild((e=>{const n=t(e);n instanceof Gt?i=n:!i&&n?i=new Gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&n&&i!==n&&(i=new Gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return a||r?a instanceof Gt?ji([a]):a instanceof pi&&!Vi(e)?ji([new Gt("",'"interpolate" expressions cannot be used with this property')]):Bi(a?new nn(n?"camera":"composite",t.value,a.labels,a instanceof pi?a.interpolation:void 0):new en(n?"constant":"source",t.value)):ji([new Gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class an{constructor(t,e){this._parameters=t,this._specification=e,Ht(this,function t(e,i){const n="color"===i.type,r=e.stops&&"object"==typeof e.stops[0][0],a=r||!(r||void 0!==e.property),s=e.type||(Vi(i)?"exponential":"interval");if(n&&((e=Ht({},e)).stops&&(e.stops=e.stops.map((t=>[t[0],he.parse(t[1])]))),e.default=he.parse(e.default?e.default:i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!mi[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let o,l,h;if("exponential"===s)o=Ji;else if("interval"===s)o=Wi;else if("categorical"===s){o=Yi,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];h=typeof e.stops[0][0]}else{if("identity"!==s)throw new Error(`Unknown function type "${s}"`);o=Xi}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],a=i[0].zoom;void 0===n[a]&&(n[a]={zoom:a,type:e.type,property:e.property,default:e.default,stops:[]},r.push(a)),n[a].stops.push([i[0].value,i[1]])}const a=[];for(const e of r)a.push([n[e].zoom,t(n[e],i)]);const s={name:"linear"};return{kind:"composite",interpolationType:s,interpolationFactor:pi.interpolationFactor.bind(void 0,s),zoomStops:a.map((t=>t[0])),evaluate:({zoom:t},n)=>Ji({stops:a,base:e.base},i,t).evaluate(t,n)}}if(a){const t="exponential"===s?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:t,interpolationFactor:pi.interpolationFactor.bind(void 0,t),zoomStops:e.stops.map((t=>t[0])),evaluate:({zoom:t})=>o(e,i,t,l,h)}}return{kind:"source",evaluate(t,n){const r=n&&n.properties?n.properties[e.property]:void 0;return void 0===r?qi(e.default,i.default):o(e,i,r,l,h)}}}(this._parameters,this._specification))}static deserialize(t){return new an(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function sn(t){const e=t.key,i=t.value,n=t.valueSpec||{},r=t.objectElementValidators||{},a=t.style,s=t.styleSpec;let o=[];const l=Gi(i);if("object"!==l)return[new Bt(e,i,`object expected, ${l} found`)];for(const t in i){const l=t.split(".")[0],h=n[l]||n["*"];let u;if(r[l])u=r[l];else if(n[l])u=Dn;else if(r["*"])u=r["*"];else{if(!n["*"]){o.push(new Bt(e,i[t],`unknown property "${t}"`));continue}u=Dn}o=o.concat(u({key:(e?`${e}.`:e)+t,value:i[t],valueSpec:h,style:a,styleSpec:s,object:i,objectKey:t},i))}for(const t in n)r[t]||n[t].required&&void 0===n[t].default&&void 0===i[t]&&o.push(new Bt(e,i,`missing required property "${t}"`));return o}function on(t){const e=t.value,i=t.valueSpec,n=t.style,r=t.styleSpec,a=t.key,s=t.arrayElementValidator||Dn;if("array"!==Gi(e))return[new Bt(a,e,`array expected, ${Gi(e)} found`)];if(i.length&&e.length!==i.length)return[new Bt(a,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new Bt(a,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let o={type:i.value,values:i.values};r.$version<7&&(o.function=i.function),"object"===Gi(i.value)&&(o=i.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(s({array:e,arrayIndex:t,value:e[t],valueSpec:o,style:n,styleSpec:r,key:`${a}[${t}]`}));return l}function ln(t){const e=t.key,i=t.value,n=t.valueSpec;let r=Gi(i);return"number"===r&&i!=i&&(r="NaN"),"number"!==r?[new Bt(e,i,`number expected, ${r} found`)]:"minimum"in n&&i<n.minimum?[new Bt(e,i,`${i} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&i>n.maximum?[new Bt(e,i,`${i} is greater than the maximum value ${n.maximum}`)]:[]}function hn(t){const e=t.valueSpec,i=Ut(t.value.type);let n,r,a,s={};const o="categorical"!==i&&void 0===t.value.property,l=!o,h="array"===Gi(t.value.stops)&&"array"===Gi(t.value.stops[0])&&"object"===Gi(t.value.stops[0][0]),u=sn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new Bt(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;return e=e.concat(on({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===Gi(n)&&0===n.length&&e.push(new Bt(t.key,n,"array must have at least one stop")),e},default:function(t){return Dn({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&o&&u.push(new Bt(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new Bt(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!Vi(t.valueSpec)&&u.push(new Bt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Hi(t.valueSpec)?u.push(new Bt(t.key,t.value,"property functions not supported")):o&&!Ui(t.valueSpec)&&u.push(new Bt(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!h||void 0!==t.value.property||u.push(new Bt(t.key,t.value,'"property" property is required')),u;function c(t){let i=[];const n=t.value,o=t.key;if("array"!==Gi(n))return[new Bt(o,n,`array expected, ${Gi(n)} found`)];if(2!==n.length)return[new Bt(o,n,`array length 2 expected, length ${n.length} found`)];if(h){if("object"!==Gi(n[0]))return[new Bt(o,n,`object expected, ${Gi(n[0])} found`)];if(void 0===n[0].zoom)return[new Bt(o,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new Bt(o,n,"object stop key must have value")];if(a&&a>Ut(n[0].zoom))return[new Bt(o,n[0].zoom,"stop zoom values must appear in ascending order")];Ut(n[0].zoom)!==a&&(a=Ut(n[0].zoom),r=void 0,s={}),i=i.concat(sn({key:`${o}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:ln,value:d}}))}else i=i.concat(d({key:`${o}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return Qi(Vt(n[1]))?i.concat([new Bt(`${o}[1]`,n[1],"expressions are not allowed in function stops.")]):i.concat(Dn({key:`${o}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,a){const o=Gi(t.value),l=Ut(t.value),h=null!==t.value?t.value:a;if(n){if(o!==n)return[new Bt(t.key,h,`${o} stop domain type must match previous stop domain type ${n}`)]}else n=o;if("number"!==o&&"string"!==o&&"boolean"!==o)return[new Bt(t.key,h,"stop domain value must be a number, string, or boolean")];if("number"!==o&&"categorical"!==i){let n=`number expected, ${o} found`;return Hi(e)&&void 0===i&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Bt(t.key,h,n)]}return"categorical"!==i||"number"!==o||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===o&&void 0!==r&&l<r?[new Bt(t.key,h,"stop domain values must appear in ascending order")]:(r=l,"categorical"===i&&l in s?[new Bt(t.key,h,"stop domain values must be unique")]:(s[l]=!0,[])):[new Bt(t.key,h,`integer expected, found ${l}`)]}}function un(t){const e=("property"===t.expressionContext?rn:tn)(Vt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new Bt(`${t.key}${e.key}`,t.value,e.message)));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new Bt(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!qe(i))return[new Bt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!qe(i))return[new Bt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Ye(i,["zoom","feature-state"]))return[new Bt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ze(i))return[new Bt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cn(t){const e=t.key,i=t.value,n=t.valueSpec,r=[];return Array.isArray(n.values)?-1===n.values.indexOf(Ut(i))&&r.push(new Bt(e,i,`expected one of [${n.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(n.values).indexOf(Ut(i))&&r.push(new Bt(e,i,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(i)} found`)),r}function dn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!dn(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const mn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function pn(t){if(null==t)return{filter:()=>!0,needGeometry:!1};dn(t)||(t=yn(t));const e=tn(t,mn);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,i,n)=>e.value.evaluate(t,i,{},n),needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(t)}}function fn(t,e){return t<e?-1:t>e?1:0}function yn(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?gn(t[1],t[2],"=="):"!="===e?bn(gn(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?gn(t[1],t[2],e):"any"===e?(i=t.slice(1),["any"].concat(i.map(yn))):"all"===e?["all"].concat(t.slice(1).map(yn)):"none"===e?["all"].concat(t.slice(1).map(yn).map(bn)):"in"===e?_n(t[1],t.slice(2)):"!in"===e?bn(_n(t[1],t.slice(2))):"has"===e?vn(t[1]):"!has"===e?bn(vn(t[1])):"within"!==e||t;var i}function gn(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function _n(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(fn)]]:["filter-in-small",t,["literal",e]]}}function vn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function bn(t){return["!",t]}function Mn(t){return dn(Vt(t.value))?un(Ht({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){const i=e.value,n=e.key;if("array"!==Gi(i))return[new Bt(n,i,`array expected, ${Gi(i)} found`)];const r=e.styleSpec;let a,s=[];if(i.length<1)return[new Bt(n,i,"filter array must have at least 1 element")];switch(s=s.concat(cn({key:`${n}[0]`,value:i[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),Ut(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===Ut(i[1])&&s.push(new Bt(n,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":3!==i.length&&s.push(new Bt(n,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(a=Gi(i[1]),"string"!==a&&s.push(new Bt(`${n}[1]`,i[1],`string expected, ${a} found`)));for(let t=2;t<i.length;t++)a=Gi(i[t]),"$type"===Ut(i[1])?s=s.concat(cn({key:`${n}[${t}]`,value:i[t],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&s.push(new Bt(`${n}[${t}]`,i[t],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let r=1;r<i.length;r++)s=s.concat(t({key:`${n}[${r}]`,value:i[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=Gi(i[1]),2!==i.length?s.push(new Bt(n,i,`filter array for "${i[0]}" operator must have 2 elements`)):"string"!==a&&s.push(new Bt(`${n}[1]`,i[1],`string expected, ${a} found`));break;case"within":a=Gi(i[1]),2!==i.length?s.push(new Bt(n,i,`filter array for "${i[0]}" operator must have 2 elements`)):"object"!==a&&s.push(new Bt(`${n}[1]`,i[1],`object expected, ${a} found`))}return s}(t)}function xn(t,e){const i=t.key,n=t.style,r=t.styleSpec,a=t.value,s=t.objectKey,o=r[`${e}_${t.layerType}`];if(!o)return[];const l=s.match(/^(.*)-transition$/);if("paint"===e&&l&&o[l[1]]&&o[l[1]].transition)return Dn({key:i,value:a,valueSpec:r.transition,style:n,styleSpec:r});const h=t.valueSpec||o[s];if(!h)return[new Bt(i,a,`unknown property "${s}"`)];let u;if("string"===Gi(a)&&Hi(h)&&!h.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new Bt(i,a,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const c=[];return"symbol"===t.layerType&&("text-field"===s&&n&&!n.glyphs&&c.push(new Bt(i,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&$i(Vt(a))&&"identity"===Ut(a.type)&&c.push(new Bt(i,a,'"text-font" does not support identity functions'))),c.concat(Dn({key:t.key,value:a,valueSpec:h,style:n,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:s}))}function wn(t){return xn(t,"paint")}function Sn(t){return xn(t,"layout")}function An(t){let e=[];const i=t.value,n=t.key,r=t.style,a=t.styleSpec;i.type||i.ref||e.push(new Bt(n,i,'either "type" or "ref" is required'));let s=Ut(i.type);const o=Ut(i.ref);if(i.id){const a=Ut(i.id);for(let s=0;s<t.arrayIndex;s++){const t=r.layers[s];Ut(t.id)===a&&e.push(new Bt(n,i.id,`duplicate layer id "${i.id}", previously used at line ${t.id.__line__}`))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in i&&e.push(new Bt(n,i[t],`"${t}" is prohibited for ref layers`))})),r.layers.forEach((e=>{Ut(e.id)===o&&(t=e)})),t?t.ref?e.push(new Bt(n,i.ref,"ref cannot reference another ref layer")):s=Ut(t.type):e.push(new Bt(n,i.ref,`ref layer "${o}" not found`))}else if("background"!==s&&"sky"!==s)if(i.source){const t=r.sources&&r.sources[i.source],a=t&&Ut(t.type);t?"vector"===a&&"raster"===s?e.push(new Bt(n,i.source,`layer "${i.id}" requires a raster source`)):"raster"===a&&"raster"!==s?e.push(new Bt(n,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==a||i["source-layer"]?"raster-dem"===a&&"hillshade"!==s?e.push(new Bt(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===a&&t.lineMetrics||e.push(new Bt(n,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Bt(n,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new Bt(n,i.source,`source "${i.source}" not found`))}else e.push(new Bt(n,i,'missing required property "source"'));return e=e.concat(sn({key:n,value:i,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Dn({key:`${n}.type`,value:i.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"}),filter:Mn,layout:t=>sn({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Sn(Ht({layerType:s},t))}}),paint:t=>sn({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>wn(Ht({layerType:s},t))}})}})),e}function Tn(t){const e=t.value,i=t.key,n=Gi(e);return"string"!==n?[new Bt(i,e,`string expected, ${n} found`)]:[]}const Cn={promoteId:function({key:t,value:e}){if("string"===Gi(e))return Tn({key:t,value:e});{const i=[];for(const n in e)i.push(...Tn({key:`${t}.${n}`,value:e[n]}));return i}}};function In(t){const e=t.value,i=t.key,n=t.styleSpec,r=t.style;if(!e.type)return[new Bt(i,e,'"type" is required')];const a=Ut(e.type);let s;switch(a){case"vector":case"raster":case"raster-dem":return s=sn({key:i,value:e,valueSpec:n[`source_${a.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:Cn}),s;case"geojson":if(s=sn({key:i,value:e,valueSpec:n.source_geojson,style:r,styleSpec:n,objectElementValidators:Cn}),e.cluster)for(const t in e.clusterProperties){const[n,r]=e.clusterProperties[t],a="string"==typeof n?[n,["accumulated"],["get",t]]:n;s.push(...un({key:`${i}.${t}.map`,value:r,expressionContext:"cluster-map"})),s.push(...un({key:`${i}.${t}.reduce`,value:a,expressionContext:"cluster-reduce"}))}return s;case"video":return sn({key:i,value:e,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return sn({key:i,value:e,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new Bt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return cn({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function kn(t){const e=t.value,i=t.styleSpec,n=i.light,r=t.style;let a=[];const s=Gi(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new Bt("light",e,`object expected, ${s} found`)]),a;for(const t in e){const s=t.match(/^(.*)-transition$/);a=a.concat(s&&n[s[1]]&&n[s[1]].transition?Dn({key:t,value:e[t],valueSpec:i.transition,style:r,styleSpec:i}):n[t]?Dn({key:t,value:e[t],valueSpec:n[t],style:r,styleSpec:i}):[new Bt(t,e[t],`unknown property "${t}"`)])}return a}function Pn(t){const e=t.value,i=t.key,n=t.style,r=t.styleSpec,a=r.terrain;let s=[];const o=Gi(e);if(void 0===e)return s;if("object"!==o)return s=s.concat([new Bt("terrain",e,`object expected, ${o} found`)]),s;for(const t in e){const i=t.match(/^(.*)-transition$/);s=s.concat(i&&a[i[1]]&&a[i[1]].transition?Dn({key:t,value:e[t],valueSpec:r.transition,style:n,styleSpec:r}):a[t]?Dn({key:t,value:e[t],valueSpec:a[t],style:n,styleSpec:r}):[new Bt(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=n.sources&&n.sources[e.source],r=t&&Ut(t.type);t?"raster-dem"!==r&&s.push(new Bt(i,e.source,`terrain cannot be used with a source of type ${r}, it only be used with a "raster-dem" source type`)):s.push(new Bt(i,e.source,`source "${e.source}" not found`))}else s.push(new Bt(i,e,'terrain is missing required property "source"'));return s}const En={"*":()=>[],array:on,boolean:function(t){const e=t.value,i=t.key,n=Gi(e);return"boolean"!==n?[new Bt(i,e,`boolean expected, ${n} found`)]:[]},number:ln,color:function(t){const e=t.key,i=t.value,n=Gi(i);return"string"!==n?[new Bt(e,i,`color expected, ${n} found`)]:null===le(i)?[new Bt(e,i,`color expected, "${i}" found`)]:[]},constants:jt,enum:cn,filter:Mn,function:hn,layer:An,object:sn,source:In,light:kn,terrain:Pn,string:Tn,formatted:function(t){return 0===Tn(t).length?[]:un(t)},resolvedImage:function(t){return 0===Tn(t).length?[]:un(t)}};function Dn(t){const e=t.value,i=t.valueSpec,n=t.styleSpec;return i.expression&&$i(Ut(e))?hn(t):i.expression&&Qi(Vt(e))?un(t):i.type&&En[i.type]?En[i.type](t):sn(Ht({},t,{valueSpec:i.type?n[i.type]:i}))}function Ln(t){const e=t.value,i=t.key,n=Tn(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new Bt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Bt(i,e,'"glyphs" url must include a "{range}" token'))),n}function zn(t,e=Nt){let i=[];return i=i.concat(Dn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ln,"*":()=>[]}})),t.constants&&(i=i.concat(jt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Fn(i)}function Fn(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function On(t){return function(...e){return Fn(t.apply(this,e))}}zn.source=On(In),zn.light=On(kn),zn.terrain=On(Pn),zn.layer=On(An),zn.filter=On(Mn),zn.paintProperty=On(wn),zn.layoutProperty=On(Sn);const Rn=zn,Nn=Rn.light,Bn=Rn.paintProperty,jn=Rn.layoutProperty;function Hn(t,e){let i=!1;if(e&&e.length)for(const n of e)t.fire(new Ot(new Error(n.message))),i=!0;return i}var Un=Vn;function Vn(t,e,i){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(i=r[2]);for(var a=0;a<this.d*this.d;a++){var s=r[3+a],o=r[3+a+1];n.push(s===o?null:r.subarray(s,o))}var l=r[3+n.length+1];this.keys=r.subarray(r[3+n.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var h=0;h<this.d*this.d;h++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var u=i/e*t;this.min=-u,this.max=t+u}Vn.prototype.insert=function(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)},Vn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vn.prototype._insertCell=function(t,e,i,n,r,a){this.cells[r].push(a)},Vn.prototype.query=function(t,e,i,n,r){var a=this.min,s=this.max;if(t<=a&&e<=a&&s<=i&&s<=n&&!r)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(t,e,i,n,this._queryCell,o,{},r),o},Vn.prototype._queryCell=function(t,e,i,n,r,a,s,o){var l=this.cells[r];if(null!==l)for(var h=this.keys,u=this.bboxes,c=0;c<l.length;c++){var d=l[c];if(void 0===s[d]){var m=4*d;(o?o(u[m+0],u[m+1],u[m+2],u[m+3]):t<=u[m+2]&&e<=u[m+3]&&i>=u[m+0]&&n>=u[m+1])?(s[d]=!0,a.push(h[d])):s[d]=!1}}},Vn.prototype._forEachCell=function(t,e,i,n,r,a,s,o){for(var l=this._convertToCellCoord(t),h=this._convertToCellCoord(e),u=this._convertToCellCoord(i),c=this._convertToCellCoord(n),d=l;d<=u;d++)for(var m=h;m<=c;m++){var p=this.d*m+d;if((!o||o(this._convertFromCellCoord(d),this._convertFromCellCoord(m),this._convertFromCellCoord(d+1),this._convertFromCellCoord(m+1)))&&r.call(this,t,e,i,n,p,a,s,o))return}},Vn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Vn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Vn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,n=0;n<this.cells.length;n++)i+=this.cells[n].length;var r=new Int32Array(e+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var a=e,s=0;s<t.length;s++){var o=t[s];r[3+s]=a,r.set(o,a),a+=o.length}return r[3+t.length]=a,r.set(this.keys,a),r[3+t.length+1]=a+=this.keys.length,r.set(this.bboxes,a),a+=this.bboxes.length,r.buffer};const{ImageData:Gn,ImageBitmap:$n}=s,Zn={};function qn(t,e,i={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Zn[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}qn("Object",Object),Un.serialize=function(t,e){const i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Un.deserialize=function(t){return new Un(t.buffer)},qn("Grid",Un),qn("Color",he),qn("Error",Error),qn("ResolvedImage",me),qn("StylePropertyFunction",an),qn("StyleExpression",Ki,{omit:["_evaluator"]}),qn("ZoomDependentExpression",nn),qn("ZoomConstantExpression",en),qn("CompoundExpression",Ie,{omit:["_evaluate"]});for(const t in zi)zi[t]._classRegistryKey||qn(`Expression_${t}`,zi[t]);function Yn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Wn(t){return $n&&t instanceof $n}function Jn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Yn(t)||Wn(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const i=t;return e&&e.push(i.buffer),i}if(t instanceof Gn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const i=[];for(const n of t)i.push(Jn(n,e));return i}if("object"==typeof t){const i=t.constructor,n=i._classRegistryKey;if(!n)throw new Error("can't serialize object of unregistered class");const r=i.serialize?i.serialize(t,e):{};if(!i.serialize){for(const i in t){if(!t.hasOwnProperty(i))continue;if(Zn[n].omit.indexOf(i)>=0)continue;const a=t[i];r[i]=Zn[n].shallow.indexOf(i)>=0?a:Jn(a,e)}t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(r.$name=n),r}throw new Error("can't serialize object of type "+typeof t)}function Xn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Yn(t)||Wn(t)||ArrayBuffer.isView(t)||t instanceof Gn)return t;if(Array.isArray(t))return t.map(Xn);if("object"==typeof t){const e=t.$name||"Object",{klass:i}=Zn[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(t);const n=Object.create(i.prototype);for(const i of Object.keys(t)){if("$name"===i)continue;const r=t[i];n[i]=Zn[e].shallow.indexOf(i)>=0?r:Xn(r)}return n}throw new Error("can't deserialize object of type "+typeof t)}class Kn{constructor(){this.first=!0}update(t,e){const i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))}}const Qn={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function tr(t){for(const e of t)if(nr(e.charCodeAt(0)))return!0;return!1}function er(t){for(const e of t)if(!ir(e.charCodeAt(0)))return!1;return!0}function ir(t){return!(Qn.Arabic(t)||Qn["Arabic Supplement"](t)||Qn["Arabic Extended-A"](t)||Qn["Arabic Presentation Forms-A"](t)||Qn["Arabic Presentation Forms-B"](t))}function nr(t){return!(746!==t&&747!==t&&(t<4352||!(Qn["Bopomofo Extended"](t)||Qn.Bopomofo(t)||Qn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Qn["CJK Compatibility Ideographs"](t)||Qn["CJK Compatibility"](t)||Qn["CJK Radicals Supplement"](t)||Qn["CJK Strokes"](t)||!(!Qn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Qn["CJK Unified Ideographs Extension A"](t)||Qn["CJK Unified Ideographs"](t)||Qn["Enclosed CJK Letters and Months"](t)||Qn["Hangul Compatibility Jamo"](t)||Qn["Hangul Jamo Extended-A"](t)||Qn["Hangul Jamo Extended-B"](t)||Qn["Hangul Jamo"](t)||Qn["Hangul Syllables"](t)||Qn.Hiragana(t)||Qn["Ideographic Description Characters"](t)||Qn.Kanbun(t)||Qn["Kangxi Radicals"](t)||Qn["Katakana Phonetic Extensions"](t)||Qn.Katakana(t)&&12540!==t||!(!Qn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Qn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Qn["Unified Canadian Aboriginal Syllabics"](t)||Qn["Unified Canadian Aboriginal Syllabics Extended"](t)||Qn["Vertical Forms"](t)||Qn["Yijing Hexagram Symbols"](t)||Qn["Yi Syllables"](t)||Qn["Yi Radicals"](t))))}function rr(t){return!(nr(t)||function(t){return!!(Qn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Qn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Qn["Letterlike Symbols"](t)||Qn["Number Forms"](t)||Qn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Qn["Control Pictures"](t)&&9251!==t||Qn["Optical Character Recognition"](t)||Qn["Enclosed Alphanumerics"](t)||Qn["Geometric Shapes"](t)||Qn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Qn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Qn["CJK Symbols and Punctuation"](t)||Qn.Katakana(t)||Qn["Private Use Area"](t)||Qn["CJK Compatibility Forms"](t)||Qn["Small Form Variants"](t)||Qn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function ar(t){return t>=1424&&t<=2303||Qn["Arabic Presentation Forms-A"](t)||Qn["Arabic Presentation Forms-B"](t)}function sr(t,e){return!(!e&&ar(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Qn.Khmer(t))}function or(t){for(const e of t)if(ar(e.charCodeAt(0)))return!0;return!1}let lr=null,hr="unavailable",ur=null;const cr=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(hr="error"),lr&&lr(t)};function dr(){mr.fire(new Ft("pluginStateChange",{pluginStatus:hr,pluginURL:ur}))}const mr=new Rt,pr=function(){return hr},fr=function(){if("deferred"!==hr||!ur)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");hr="loading",dr(),ur&&At({url:ur},(t=>{t?cr(t):(hr="loaded",dr())}))},yr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>"loaded"===hr||null!=yr.applyArabicShaping,isLoading:()=>"loading"===hr,setState(t){hr=t.pluginStatus,ur=t.pluginURL},isParsed:()=>null!=yr.applyArabicShaping&&null!=yr.processBidirectionalText&&null!=yr.processStyledBidirectionalText,getPluginURL:()=>ur};class gr{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Kn,this.transition={})}isSupportedScript(t){return function(t,e){for(const i of t)if(!sr(i.charCodeAt(0),e))return!1;return!0}(t,yr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}}}class _r{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if($i(t))return new an(t,e);if(Qi(t)){const i=rn(t,e);if("error"===i.result)throw new Error(i.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return i.value}{let i=t;return"string"==typeof t&&"color"===e.type&&(i=he.parse(t)),{kind:"constant",evaluate:()=>i}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)}}class vr{constructor(t){this.property=t,this.value=new _r(t,void 0)}transitioned(t,e){return new Mr(this.property,this.value,e,_({},t.transition,this.transition),t.now)}untransitioned(){return new Mr(this.property,this.value,null,{},0)}}class br{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return C(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new vr(this._values[t].property)),this._values[t].value=new _r(this._values[t].property,null===e?void 0:C(e))}getTransition(t){return C(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new vr(this._values[t].property)),this._values[t].transition=C(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i);const n=this.getTransition(e);void 0!==n&&(t[`${e}-transition`]=n)}return t}transitioned(t,e){const i=new xr(this._properties);for(const n of Object.keys(this._values))i._values[n]=this._values[n].transitioned(t,e._values[n]);return i}untransitioned(){const t=new xr(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Mr{constructor(t,e,i,n,r){this.property=t,this.value=e,this.begin=r+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=i)}possiblyEvaluate(t,e,i){const n=t.now||0,r=this.value.possiblyEvaluate(t,e,i),a=this.prior;if(a){if(n>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(n<this.begin)return a.possiblyEvaluate(t,e,i);{const s=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(t,e,i),r,d(s))}}return r}}class xr{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,i){const n=new Ar(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].possiblyEvaluate(t,e,i);return n}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class wr{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return C(this._values[t].value)}setValue(t,e){this._values[t]=new _r(this._values[t].property,null===e?void 0:C(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(t,e,i){const n=new Ar(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].possiblyEvaluate(t,e,i);return n}}class Sr{constructor(t,e,i){this.property=t,this.value=e,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,i,n){return this.property.evaluate(this.value,this.parameters,t,e,i,n)}}class Ar{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Tr{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,i){const n=ti[this.specification.type];return n?n(t,e,i):t}}class Cr{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,i,n){return new Sr(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,n)}:t.expression,e)}interpolate(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Sr(this,{kind:"constant",value:void 0},t.parameters);const n=ti[this.specification.type];return n?new Sr(this,{kind:"constant",value:n(t.value.value,e.value.value,i)},t.parameters):t}evaluate(t,e,i,n,r,a){return"constant"===t.kind?t.value:t.evaluate(e,i,n,r,a)}}class Ir extends Cr{possiblyEvaluate(t,e,i,n){if(void 0===t.value)return new Sr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},i,n),a="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,s=this._calculate(a,a,a,e);return new Sr(this,{kind:"constant",value:s},e)}if("camera"===t.expression.kind){const i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Sr(this,{kind:"constant",value:i},e)}return new Sr(this,t.expression,e)}evaluate(t,e,i,n,r,a){if("source"===t.kind){const s=t.evaluate(e,i,n,r,a);return this._calculate(s,s,s,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,n),t.evaluate({zoom:Math.floor(e.zoom)},i,n),t.evaluate({zoom:Math.floor(e.zoom)+1},i,n),e):t.value}_calculate(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class kr{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,n){if(void 0!==t.value){if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},i,n);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new gr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new gr(Math.floor(e.zoom),e)),t.expression.evaluate(new gr(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class Pr{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,n){return!!t.expression.evaluate(e,null,{},i,n)}interpolate(){return!1}}class Er{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const i=t[e];i.specification.overridable&&this.overridableProperties.push(e);const n=this.defaultPropertyValues[e]=new _r(i,void 0),r=this.defaultTransitionablePropertyValues[e]=new vr(i);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}}}function Dr(t,e){return 256*(t=f(Math.floor(t),0,255))+f(Math.floor(e),0,255)}qn("DataDrivenProperty",Cr),qn("DataConstantProperty",Tr),qn("CrossFadedDataDrivenProperty",Ir),qn("CrossFadedProperty",kr),qn("ColorRampProperty",Pr);const Lr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zr{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Fr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Or(t,e=1){let i=0,n=0;return{members:t.map((t=>{const r=Lr[t.type].BYTES_PER_ELEMENT,a=i=Rr(i,Math.max(e,r)),s=t.components||1;return n=Math.max(n,r),i+=r*s,{name:t.name,type:t.type,components:s,offset:a}})),size:Rr(i,Math.max(n,e)),alignment:e}}function Rr(t,e){return Math.ceil(t/e)*e}class Nr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.int16[n+0]=e,this.int16[n+1]=i,t}}Nr.prototype.bytesPerElement=4,qn("StructArrayLayout2i4",Nr);class Br extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const a=4*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.int16[a+2]=n,this.int16[a+3]=r,t}}Br.prototype.bytesPerElement=8,qn("StructArrayLayout4i8",Br);class jr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,n,r,a,s)}emplace(t,e,i,n,r,a,s,o){const l=6*t,h=12*t,u=3*t;return this.int16[l+0]=e,this.int16[l+1]=i,this.uint8[h+4]=n,this.uint8[h+5]=r,this.uint8[h+6]=a,this.uint8[h+7]=s,this.float32[u+2]=o,t}}jr.prototype.bytesPerElement=12,qn("StructArrayLayout2i4ub1f12",jr);class Hr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.float32[n+0]=e,this.float32[n+1]=i,t}}Hr.prototype.bytesPerElement=8,qn("StructArrayLayout2f8",Hr);class Ur extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,n,r,a,s,o,l,h)}emplace(t,e,i,n,r,a,s,o,l,h,u){const c=10*t;return this.uint16[c+0]=e,this.uint16[c+1]=i,this.uint16[c+2]=n,this.uint16[c+3]=r,this.uint16[c+4]=a,this.uint16[c+5]=s,this.uint16[c+6]=o,this.uint16[c+7]=l,this.uint16[c+8]=h,this.uint16[c+9]=u,t}}Ur.prototype.bytesPerElement=20,qn("StructArrayLayout10ui20",Ur);class Vr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h,u,c){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,i,n,r,a,s,o,l,h,u,c)}emplace(t,e,i,n,r,a,s,o,l,h,u,c,d){const m=12*t;return this.int16[m+0]=e,this.int16[m+1]=i,this.int16[m+2]=n,this.int16[m+3]=r,this.uint16[m+4]=a,this.uint16[m+5]=s,this.uint16[m+6]=o,this.uint16[m+7]=l,this.int16[m+8]=h,this.int16[m+9]=u,this.int16[m+10]=c,this.int16[m+11]=d,t}}Vr.prototype.bytesPerElement=24,qn("StructArrayLayout4i4ui4i24",Vr);class Gr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=i,this.float32[r+2]=n,t}}Gr.prototype.bytesPerElement=12,qn("StructArrayLayout3f12",Gr);class $r extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}$r.prototype.bytesPerElement=4,qn("StructArrayLayout1ul4",$r);class Zr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,n,r,a,s,o,l,h)}emplace(t,e,i,n,r,a,s,o,l,h,u){const c=16*t,d=8*t;return this.int16[c+0]=e,this.int16[c+1]=i,this.float32[d+1]=n,this.float32[d+2]=r,this.float32[d+3]=a,this.float32[d+4]=s,this.int16[c+10]=o,this.uint32[d+6]=l,this.uint16[c+14]=h,this.uint16[c+15]=u,t}}Zr.prototype.bytesPerElement=32,qn("StructArrayLayout2i4f1i1ul2ui32",Zr);class qr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,n,r,a)}emplace(t,e,i,n,r,a,s){const o=6*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=n,this.int16[o+3]=r,this.int16[o+4]=a,this.int16[o+5]=s,t}}qr.prototype.bytesPerElement=12,qn("StructArrayLayout2i2i2i12",qr);class Yr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n,r)}emplace(t,e,i,n,r,a){const s=4*t,o=8*t;return this.float32[s+0]=e,this.float32[s+1]=i,this.float32[s+2]=n,this.int16[o+6]=r,this.int16[o+7]=a,t}}Yr.prototype.bytesPerElement=16,qn("StructArrayLayout2f1f2i16",Yr);class Wr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const a=12*t,s=3*t;return this.uint8[a+0]=e,this.uint8[a+1]=i,this.float32[s+1]=n,this.float32[s+2]=r,t}}Wr.prototype.bytesPerElement=12,qn("StructArrayLayout2ub2f12",Wr);class Jr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,this.uint16[r+2]=n,t}}Jr.prototype.bytesPerElement=6,qn("StructArrayLayout3ui6",Jr);class Xr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y){const g=this.length;return this.resize(g+1),this.emplace(g,t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y)}emplace(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g){const _=24*t,v=12*t,b=48*t;return this.int16[_+0]=e,this.int16[_+1]=i,this.uint16[_+2]=n,this.uint16[_+3]=r,this.uint32[v+2]=a,this.uint32[v+3]=s,this.uint32[v+4]=o,this.uint16[_+10]=l,this.uint16[_+11]=h,this.uint16[_+12]=u,this.float32[v+7]=c,this.float32[v+8]=d,this.uint8[b+36]=m,this.uint8[b+37]=p,this.uint8[b+38]=f,this.uint32[v+10]=y,this.int16[_+22]=g,t}}Xr.prototype.bytesPerElement=48,qn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Xr);class Kr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C){const I=this.length;return this.resize(I+1),this.emplace(I,t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C)}emplace(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C,I){const k=34*t,P=17*t;return this.int16[k+0]=e,this.int16[k+1]=i,this.int16[k+2]=n,this.int16[k+3]=r,this.int16[k+4]=a,this.int16[k+5]=s,this.int16[k+6]=o,this.int16[k+7]=l,this.uint16[k+8]=h,this.uint16[k+9]=u,this.uint16[k+10]=c,this.uint16[k+11]=d,this.uint16[k+12]=m,this.uint16[k+13]=p,this.uint16[k+14]=f,this.uint16[k+15]=y,this.uint16[k+16]=g,this.uint16[k+17]=_,this.uint16[k+18]=v,this.uint16[k+19]=b,this.uint16[k+20]=M,this.uint16[k+21]=x,this.uint16[k+22]=w,this.uint32[P+12]=S,this.float32[P+13]=A,this.float32[P+14]=T,this.float32[P+15]=C,this.float32[P+16]=I,t}}Kr.prototype.bytesPerElement=68,qn("StructArrayLayout8i15ui1ul4f68",Kr);class Qr extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Qr.prototype.bytesPerElement=4,qn("StructArrayLayout1f4",Qr);class ta extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=i,this.int16[r+2]=n,t}}ta.prototype.bytesPerElement=6,qn("StructArrayLayout3i6",ta);class ea extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=i,this.uint16[r+3]=n,t}}ea.prototype.bytesPerElement=8,qn("StructArrayLayout1ul2ui8",ea);class ia extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,t}}ia.prototype.bytesPerElement=4,qn("StructArrayLayout2ui4",ia);class na extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}na.prototype.bytesPerElement=2,qn("StructArrayLayout1ui2",na);class ra extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const a=4*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=n,this.float32[a+3]=r,t}}ra.prototype.bytesPerElement=16,qn("StructArrayLayout4f16",ra);class aa extends zr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new r(this.anchorPointX,this.anchorPointY)}}aa.prototype.size=32;class sa extends Zr{get(t){return new aa(this,t)}}qn("CollisionBoxArray",sa);class oa extends zr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}oa.prototype.size=48;class la extends Xr{get(t){return new oa(this,t)}}qn("PlacedSymbolArray",la);class ha extends zr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}ha.prototype.size=68;class ua extends Kr{get(t){return new ha(this,t)}}qn("SymbolInstanceArray",ua);class ca extends Qr{getoffsetX(t){return this.float32[1*t+0]}}qn("GlyphOffsetArray",ca);class da extends ta{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}qn("SymbolLineVertexArray",da);class ma extends zr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ma.prototype.size=8;class pa extends ea{get(t){return new ma(this,t)}}qn("FeatureIndexArray",pa);const fa=Or([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ya=e((function(t){t.exports=function(t,e){var i,n,r,a,s,o,l,h;for(n=t.length-(i=3&t.length),r=e,s=3432918353,o=461845907,h=0;h<n;)l=255&t.charCodeAt(h)|(255&t.charCodeAt(++h))<<8|(255&t.charCodeAt(++h))<<16|(255&t.charCodeAt(++h))<<24,++h,r=27492+(65535&(a=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(h+2))<<16;case 2:l^=(255&t.charCodeAt(h+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(h)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),ga=e((function(t){t.exports=function(t,e){for(var i,n=t.length,r=e^n,a=0;n>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:r^=(255&t.charCodeAt(a+2))<<16;case 2:r^=(255&t.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),_a=ya,va=ga;_a.murmur3=ya,_a.murmur2=va;class ba{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,i,n){this.ids.push(Ma(t)),this.positions.push(e,i,n)}getPositions(t){const e=Ma(t);let i=0,n=this.ids.length-1;for(;i<n;){const t=i+n>>1;this.ids[t]>=e?n=t:i=t+1}const r=[];for(;this.ids[i]===e;)r.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return r}static serialize(t,e){const i=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,i,n,r){for(;n<r;){const a=e[n+r>>1];let s=n-1,o=r+1;for(;;){do{s++}while(e[s]<a);do{o--}while(e[o]>a);if(s>=o)break;xa(e,s,o),xa(i,3*s,3*o),xa(i,3*s+1,3*o+1),xa(i,3*s+2,3*o+2)}o-n<r-o?(t(e,i,n,o),n=o+1):(t(e,i,o+1,r),r=o)}}(i,n,0,i.length-1),e&&e.push(i.buffer,n.buffer),{ids:i,positions:n}}static deserialize(t){const e=new ba;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Ma(t){const e=+t;return!isNaN(e)&&e<=l?e:_a(String(t))}function xa(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}qn("FeaturePositionMap",ba);class wa{constructor(t,e){this.gl=t.gl,this.location=e}}class Sa extends wa{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Aa extends wa{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Ta extends wa{constructor(t,e){super(t,e),this.current=he.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Ca=new Float32Array(16),Ia=new Float32Array(9);function ka(t){return[Dr(255*t.r,255*t.g),Dr(255*t.b,255*t.a)]}class Pa{constructor(t,e,i){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=i}setUniform(t,e,i){t.set(i.constantOr(this.value))}getBinding(t,e,i){return"color"===this.type?new Ta(t,e):new Sa(t,e)}}class Ea{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,i,n){const r="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;r&&t.set(r)}getBinding(t,e,i){return"u_pattern"===i.substr(0,9)?new Aa(t,e):new Sa(t,e)}}class Da{constructor(t,e,i,n){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===i?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(t,e,i,n,r){const a=this.paintVertexArray.length,s=this.expression.evaluate(new gr(0),e,{},n,[],r);this.paintVertexArray.resize(t),this._setPaintValue(a,t,s)}updatePaintArray(t,e,i,n){const r=this.expression.evaluate({zoom:0},i,n);this._setPaintValue(t,e,r)}_setPaintValue(t,e,i){if("color"===this.type){const n=ka(i);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class La{constructor(t,e,i,n,r,a){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=i,this.useIntegerZoom=n,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===i?4:2,offset:0}))),this.paintVertexArray=new a}populatePaintArray(t,e,i,n,r){const a=this.expression.evaluate(new gr(this.zoom),e,{},n,[],r),s=this.expression.evaluate(new gr(this.zoom+1),e,{},n,[],r),o=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(o,t,a,s)}updatePaintArray(t,e,i,n){const r=this.expression.evaluate({zoom:this.zoom},i,n),a=this.expression.evaluate({zoom:this.zoom+1},i,n);this._setPaintValue(t,e,r,a)}_setPaintValue(t,e,i,n){if("color"===this.type){const r=ka(i),a=ka(n);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1],a[0],a[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i,n);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=f(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(n)}getBinding(t,e,i){return new Sa(t,e)}}class za{constructor(t,e,i,n,r,a){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=n,this.layerId=a,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r}populatePaintArray(t,e,i){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],i)}updatePaintArray(t,e,i,n,r){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],r)}_setPaintValues(t,e,i,n){if(!n||!i)return;const{min:r,mid:a,max:s}=i,o=n[r],l=n[a],h=n[s];if(o&&l&&h)for(let i=t;i<e;i++)this.zoomInPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],l.pixelRatio,o.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],l.pixelRatio,h.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,fa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,fa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fa{constructor(t,e,i=()=>!0){this.binders={},this._buffers=[];const n=[];for(const r in t.paint._values){if(!i(r))continue;const a=t.paint.get(r);if(!(a instanceof Sr&&Hi(a.property.specification)))continue;const s=Ra(r,t.type),o=a.value,l=a.property.specification.type,h=a.property.useIntegerZoom,u=a.property.specification["property-type"],c="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===o.kind)this.binders[r]=c?new Ea(o.value,s):new Pa(o.value,s,l),n.push(`/u_${r}`);else if("source"===o.kind||c){const i=Na(r,l,"source");this.binders[r]=c?new za(o,l,h,e,i,t.id):new Da(o,s,l,i),n.push(`/a_${r}`)}else{const t=Na(r,l,"composite");this.binders[r]=new La(o,s,l,h,e,t),n.push(`/z_${r}`)}}this.cacheKey=n.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Da||e instanceof La?e.maxValue:0}populatePaintArrays(t,e,i,n,r){for(const a in this.binders){const s=this.binders[a];(s instanceof Da||s instanceof La||s instanceof za)&&s.populatePaintArray(t,e,i,n,r)}}setConstantPatternPositions(t,e){for(const i in this.binders){const n=this.binders[i];n instanceof Ea&&n.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,i,n,r){let a=!1;for(const s in t){const o=e.getPositions(s);for(const e of o){const o=i.feature(e.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof Da||l instanceof La||l instanceof za)&&!0===l.expression.isStateDependent){const h=n.paint.get(i);l.expression=h.value,l.updatePaintArray(e.start,e.end,o,t[s],r),a=!0}}}}return a}defines(){const t=[];for(const e in this.binders){const i=this.binders[e];(i instanceof Pa||i instanceof Ea)&&t.push(...i.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Da||i instanceof La)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name);else if(i instanceof za)for(let e=0;e<fa.members.length;e++)t.push(fa.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Pa||i instanceof Ea||i instanceof La)for(const e of i.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const i=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof Pa||r instanceof Ea||r instanceof La)for(const a of r.uniformNames)if(e[a]){const s=r.getBinding(t,e[a],a);i.push({name:a,property:n,binding:s})}}return i}setUniforms(t,e,i,n){for(const{name:t,property:r,binding:a}of e)this.binders[r].setUniform(a,n,i.get(r),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const i=this.binders[e];if(t&&i instanceof za){const e=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(i instanceof Da||i instanceof La)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(const e in this.binders){const i=this.binders[e];(i instanceof Da||i instanceof La||i instanceof za)&&i.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Da||e instanceof La||e instanceof za)&&e.destroy()}}}class Oa{constructor(t,e,i=()=>!0){this.programConfigurations={};for(const n of t)this.programConfigurations[n.id]=new Fa(n,e,i);this.needsUpload=!1,this._featureMap=new ba,this._bufferOffset=0}populatePaintArrays(t,e,i,n,r,a){for(const i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,n,r,a);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,i,n){for(const r of i)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,e,r,n)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Ra(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Na(t,e,i){const n={color:{source:Hr,composite:ra},number:{source:Qr,composite:Hr}},r=function(t){return{"line-pattern":{source:Ur,composite:Ur},"fill-pattern":{source:Ur,composite:Ur},"fill-extrusion-pattern":{source:Ur,composite:Ur}}[t]}(t);return r&&r[i]||n[e][i]}qn("ConstantBinder",Pa),qn("CrossFadedConstantBinder",Ea),qn("SourceExpressionBinder",Da),qn("CrossFadedCompositeBinder",za),qn("CompositeExpressionBinder",La),qn("ProgramConfiguration",Fa,{omit:["_buffers"]}),qn("ProgramConfigurationSet",Oa);class Ba extends Rt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new wr(e.layout)),e.paint)){this._transitionablePaint=new br(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ar(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,i={}){null!=e&&this._validate(jn,`layers.${this.id}.layout.${t}`,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return S(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,i={}){if(null!=e&&this._validate(Bn,`layers.${this.id}.paint.${t}`,t,e,i))return!1;if(S(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const i=this._transitionablePaint._values[t],n="cross-faded-data-driven"===i.property.specification["property-type"],r=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value;return s.isDataDriven()||r||n||this._handleOverridablePaintPropertyUpdate(t,a,s)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,i){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),T(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,i,n,r={}){return(!r||!1!==r.validate)&&Hn(this,t.call(Rn,{key:e,layerType:this.type,objectKey:i,value:n,styleSpec:Nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Sr&&Hi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const ja=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ha}=ja;class Ua{constructor(t=[]){this.segments=t}prepareSegment(t,e,i,n){let r=this.segments[this.segments.length-1];return t>Ua.MAX_VERTEX_ARRAY_LENGTH&&k(`Max vertices per segment is ${Ua.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!r||r.vertexLength+t>Ua.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==n)&&(r={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==n&&(r.sortKey=n),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,i,n){return new Ua([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:n,vaos:{},sortKey:0}])}}Ua.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qn("SegmentVector",Ua);const Va=Math.pow(2,14)-1,Ga=-Va-1;function $a(t){const e=8192/t.extent,i=t.loadGeometry();for(let t=0;t<i.length;t++){const n=i[t];for(let t=0;t<n.length;t++){const i=n[t],r=Math.round(i.x*e),a=Math.round(i.y*e);i.x=f(r,Ga,Va),i.y=f(a,Ga,Va),(r<i.x||r>i.x+1||a<i.y||a>i.y+1)&&k("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Za(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?$a(t):[]}}function qa(t,e,i,n,r){t.emplaceBack(2*e+(n+1)/2,2*i+(r+1)/2)}class Ya{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Nr,this.indexArray=new Jr,this.segments=new Ua,this.programConfigurations=new Oa(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){const n=this.layers[0],r=[];let a=null;"circle"===n.type&&(a=n.layout.get("circle-sort-key"));for(const{feature:e,id:n,index:s,sourceLayerIndex:o}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Za(e,t);if(!this.layers[0]._featureFilter.filter(new gr(this.zoom),l,i))continue;const h=a?a.evaluate(l,{},i):void 0,u={id:n,properties:e.properties,type:e.type,sourceLayerIndex:o,index:s,geometry:t?l.geometry:$a(e),patterns:{},sortKey:h};r.push(u)}a&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of r){const{geometry:r,index:a,sourceLayerIndex:s}=n,o=t[a].feature;this.addFeature(n,r,a,i),e.featureIndex.insert(o,r,a,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ha),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,n){for(const i of e)for(const e of i){const i=e.x,n=e.y;if(i<0||i>=8192||n<0||n>=8192)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),a=r.vertexLength;qa(this.layoutVertexArray,i,n,-1,-1),qa(this.layoutVertexArray,i,n,1,-1),qa(this.layoutVertexArray,i,n,1,1),qa(this.layoutVertexArray,i,n,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+3,a+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},n)}}function Wa(t,e){for(let i=0;i<t.length;i++)if(rs(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(rs(t,e[i]))return!0;return!!Qa(t,e)}function Ja(t,e,i){return!!rs(t,e)||!!es(e,t,i)}function Xa(t,e){if(1===t.length)return ns(e,t[0]);for(let i=0;i<e.length;i++){const n=e[i];for(let e=0;e<n.length;e++)if(rs(t,n[e]))return!0}for(let i=0;i<t.length;i++)if(ns(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(Qa(t,e[i]))return!0;return!1}function Ka(t,e,i){if(t.length>1){if(Qa(t,e))return!0;for(let n=0;n<e.length;n++)if(es(e[n],t,i))return!0}for(let n=0;n<t.length;n++)if(es(t[n],e,i))return!0;return!1}function Qa(t,e){if(0===t.length||0===e.length)return!1;for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1];for(let t=0;t<e.length-1;t++)if(ts(n,r,e[t],e[t+1]))return!0}return!1}function ts(t,e,i,n){return P(t,i,n)!==P(e,i,n)&&P(t,e,i)!==P(t,e,n)}function es(t,e,i){const n=i*i;if(1===e.length)return t.distSqr(e[0])<n;for(let i=1;i<e.length;i++)if(is(t,e[i-1],e[i])<n)return!0;return!1}function is(t,e,i){const n=e.distSqr(i);if(0===n)return t.distSqr(e);const r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return t.distSqr(r<0?e:r>1?i:i.sub(e)._mult(r)._add(e))}function ns(t,e){let i,n,r,a=!1;for(let s=0;s<t.length;s++){i=t[s];for(let t=0,s=i.length-1;t<i.length;s=t++)n=i[t],r=i[s],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(a=!a)}return a}function rs(t,e){let i=!1;for(let n=0,r=t.length-1;n<t.length;r=n++){const a=t[n],s=t[r];a.y>e.y!=s.y>e.y&&e.x<(s.x-a.x)*(e.y-a.y)/(s.y-a.y)+a.x&&(i=!i)}return i}function as(t,e,i,n,a){for(const r of t)if(e<=r.x&&i<=r.y&&n>=r.x&&a>=r.y)return!0;const s=[new r(e,i),new r(e,a),new r(n,a),new r(n,i)];if(t.length>2)for(const e of s)if(rs(t,e))return!0;for(let e=0;e<t.length-1;e++)if(ss(t[e],t[e+1],s))return!0;return!1}function ss(t,e,i){const n=i[0],r=i[2];if(t.x<n.x&&e.x<n.x||t.x>r.x&&e.x>r.x||t.y<n.y&&e.y<n.y||t.y>r.y&&e.y>r.y)return!1;const a=P(t,e,i[0]);return a!==P(t,e,i[1])||a!==P(t,e,i[2])||a!==P(t,e,i[3])}function os(t,e,i){const n=e.paint.get(t).value;return"constant"===n.kind?n.value:i.programConfigurations.get(e.id).getMaxValue(t)}function ls(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function hs(t,e,i,n,a){if(!e[0]&&!e[1])return t;const s=r.convert(e)._mult(a);"viewport"===i&&s._rotate(-n);const o=[];for(let e=0;e<t.length;e++)o.push(t[e].sub(s));return o}function us(t,e,i,n){const a=r.convert(t)._mult(n);return"viewport"===e&&a._rotate(-i),a}qn("CircleBucket",Ya,{omit:["layers"]});const cs=new Er({"circle-sort-key":new Cr(Nt.layout_circle["circle-sort-key"])});var ds={paint:new Er({"circle-radius":new Cr(Nt.paint_circle["circle-radius"]),"circle-color":new Cr(Nt.paint_circle["circle-color"]),"circle-blur":new Cr(Nt.paint_circle["circle-blur"]),"circle-opacity":new Cr(Nt.paint_circle["circle-opacity"]),"circle-translate":new Tr(Nt.paint_circle["circle-translate"]),"circle-translate-anchor":new Tr(Nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tr(Nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tr(Nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Cr(Nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Cr(Nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Cr(Nt.paint_circle["circle-stroke-opacity"])}),layout:cs},ms="undefined"!=typeof Float32Array?Float32Array:Array;function ps(){var t=new ms(9);return ms!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function fs(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ys(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],d=e[9],m=e[10],p=e[11],f=e[12],y=e[13],g=e[14],_=e[15],v=i[0],b=i[1],M=i[2],x=i[3];return t[0]=v*n+b*o+M*c+x*f,t[1]=v*r+b*l+M*d+x*y,t[2]=v*a+b*h+M*m+x*g,t[3]=v*s+b*u+M*p+x*_,t[4]=(v=i[4])*n+(b=i[5])*o+(M=i[6])*c+(x=i[7])*f,t[5]=v*r+b*l+M*d+x*y,t[6]=v*a+b*h+M*m+x*g,t[7]=v*s+b*u+M*p+x*_,t[8]=(v=i[8])*n+(b=i[9])*o+(M=i[10])*c+(x=i[11])*f,t[9]=v*r+b*l+M*d+x*y,t[10]=v*a+b*h+M*m+x*g,t[11]=v*s+b*u+M*p+x*_,t[12]=(v=i[12])*n+(b=i[13])*o+(M=i[14])*c+(x=i[15])*f,t[13]=v*r+b*l+M*d+x*y,t[14]=v*a+b*h+M*m+x*g,t[15]=v*s+b*u+M*p+x*_,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var gs=ys;function _s(){var t=new ms(3);return ms!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function vs(t){var e=new ms(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function bs(t){return Math.hypot(t[0],t[1],t[2])}function Ms(t,e,i){var n=new ms(3);return n[0]=t,n[1]=e,n[2]=i,n}function xs(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function ws(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Ss(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function As(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function Ts(t,e){var i=e[0],n=e[1],r=e[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function Cs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Is(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],l=i[2];return t[0]=r*l-a*o,t[1]=a*s-n*l,t[2]=n*o-r*s,t}function ks(t,e,i){var n=i[0],r=i[1],a=i[2],s=e[0],o=e[1],l=e[2],h=r*l-a*o,u=a*s-n*l,c=n*o-r*s,d=r*c-a*u,m=a*h-n*c,p=n*u-r*h,f=2*i[3];return u*=f,c*=f,m*=2,p*=2,t[0]=s+(h*=f)+(d*=2),t[1]=o+u+m,t[2]=l+c+p,t}var Ps,Es=ws,Ds=bs;function Ls(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*s,t}function zs(){var t=new ms(4);return ms!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Fs(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Os(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),l=Math.cos(i);return t[0]=n*l+s*o,t[1]=r*l+a*o,t[2]=a*l-r*o,t[3]=s*l-n*o,t}_s(),Ps=new ms(4),ms!=Float32Array&&(Ps[0]=0,Ps[1]=0,Ps[2]=0,Ps[3]=0),_s(),Ms(1,0,0),Ms(0,1,0),zs(),zs(),ps();class Rs{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,i){const n=Math.pow(2,i),r=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((i=>{const r=Ls([],i,t),a=1/r[3]/e*n;return function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}(r,r,[a,a,1/r[3],a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=Ts([],Is([],Es([],r[t[0]],r[t[1]]),Es([],r[t[2]],r[t[1]]))),i=-Cs(e,r[t[1]]);return e.concat(i)}));return new Rs(r,a)}}class Ns{constructor(t,e){this.min=t,this.max=e,this.center=Ss([],xs([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],i=vs(this.min),n=vs(this.max);for(let t=0;t<e.length;t++)i[t]=e[t]?this.min[t]:this.center[t],n[t]=e[t]?this.center[t]:this.max[t];return n[2]=this.max[2],new Ns(i,n)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}intersects(t){const e=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let a=0;a<t.planes.length;a++){const s=t.planes[a];let o=0;for(let t=0;t<e.length;t++)o+=(n=s)[0]*(r=e[t])[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]>=0;if(0===o)return 0;o!==e.length&&(i=!1)}var n,r;if(i)return 2;for(let e=0;e<3;e++){let i=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let r=0;r<t.points.length;r++){const a=t.points[r][e]-this.min[e];i=Math.min(i,a),n=Math.max(n,a)}if(n<0||i>this.max[e]-this.min[e])return 0}return 1}}function Bs(t,e,i){const n=Ls([],[t.x,t.y,e,1],i);return new r(n[0]/n[3],n[1]/n[3])}const js=Ms(0,0,0),Hs=Ms(0,0,1);function Us(t,e){const i=_s();return js[2]=e,t.intersectsPlane(js,Hs,i),new r(i[0],i[1])}class Vs extends Ya{}function Gs(t,{width:e,height:i},n,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==e*i*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(e*i*n);return t.width=e,t.height=i,t.data=r,t}function $s(t,{width:e,height:i},n){if(e===t.width&&i===t.height)return;const r=Gs({},{width:e,height:i},n);Zs(t,r,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,i)},n),t.width=e,t.height=i,t.data=r.data}function Zs(t,e,i,n,r,a){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const s=t.data,o=e.data;for(let l=0;l<r.height;l++){const h=((i.y+l)*t.width+i.x)*a,u=((n.y+l)*e.width+n.x)*a;for(let t=0;t<r.width*a;t++)o[u+t]=s[h+t]}return e}qn("HeatmapBucket",Vs,{omit:["layers"]});class qs{constructor(t,e){Gs(this,t,1,e)}resize(t){$s(this,t,1)}clone(){return new qs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,n,r){Zs(t,e,i,n,r,1)}}class Ys{constructor(t,e){Gs(this,t,4,e)}resize(t){$s(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Ys({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,n,r){Zs(t,e,i,n,r,4)}}qn("AlphaImage",qs),qn("RGBAImage",Ys);var Ws={paint:new Er({"heatmap-radius":new Cr(Nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Cr(Nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tr(Nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pr(Nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tr(Nt.paint_heatmap["heatmap-opacity"])})};function Js(t){const e={},i=t.resolution||256,n=t.clips?t.clips.length:1,r=t.image||new Ys({width:i,height:n}),a=(i,n,a)=>{e[t.evaluationKey]=a;const s=t.expression.evaluate(e);r.data[i+n+0]=Math.floor(255*s.r/s.a),r.data[i+n+1]=Math.floor(255*s.g/s.a),r.data[i+n+2]=Math.floor(255*s.b/s.a),r.data[i+n+3]=Math.floor(255*s.a)};if(t.clips)for(let e=0,r=0;e<n;++e,r+=4*i)for(let n=0,s=0;n<i;n++,s+=4){const o=n/(i-1),{start:l,end:h}=t.clips[e];a(r,s,l*(1-o)+h*o)}else for(let t=0,e=0;t<i;t++,e+=4)a(0,e,t/(i-1));return r}var Xs={paint:new Er({"hillshade-illumination-direction":new Tr(Nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Tr(Nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tr(Nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tr(Nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tr(Nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tr(Nt.paint_hillshade["hillshade-accent-color"])})};const Ks=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qs}=Ks;var to=io,eo=io;function io(t,e,i){i=i||2;var n,r,a,s,o,l,h,u=e&&e.length,c=u?e[0]*i:t.length,d=no(t,0,c,i,!0),m=[];if(!d||d.next===d.prev)return m;if(u&&(d=function(t,e,i,n){var r,a,s,o=[];for(r=0,a=e.length;r<a;r++)(s=no(t,e[r]*n,r<a-1?e[r+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),o.push(fo(s));for(o.sort(uo),r=0;r<o.length;r++)co(o[r],i),i=ro(i,i.next);return i}(t,e,d,i)),t.length>80*i){n=a=t[0],r=s=t[1];for(var p=i;p<c;p+=i)(o=t[p])<n&&(n=o),(l=t[p+1])<r&&(r=l),o>a&&(a=o),l>s&&(s=l);h=0!==(h=Math.max(a-n,s-r))?1/h:0}return ao(d,m,i,n,r,h),m}function no(t,e,i,n,r){var a,s;if(r===Io(t,e,i,n)>0)for(a=e;a<i;a+=n)s=Ao(a,t[a],t[a+1],s);else for(a=i-n;a>=e;a-=n)s=Ao(a,t[a],t[a+1],s);return s&&vo(s,s.next)&&(To(s),s=s.next),s}function ro(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!vo(n,n.next)&&0!==_o(n.prev,n,n.next))n=n.next;else{if(To(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function ao(t,e,i,n,r,a,s){if(t){!s&&a&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=po(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,a,s,o,l,h=1;do{for(i=t,t=null,a=null,s=0;i;){for(s++,n=i,o=0,e=0;e<h&&(o++,n=n.nextZ);e++);for(l=h;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=n}a.nextZ=null,h*=2}while(s>1)}(r)}(t,n,r,a);for(var o,l,h=t;t.prev!==t.next;)if(o=t.prev,l=t.next,a?oo(t,n,r,a):so(t))e.push(o.i/i),e.push(t.i/i),e.push(l.i/i),To(t),t=l.next,h=l.next;else if((t=l)===h){s?1===s?ao(t=lo(ro(t),e,i),e,i,n,r,a,2):2===s&&ho(t,e,i,n,r,a):ao(ro(t),e,i,n,r,a,1);break}}}function so(t){var e=t.prev,i=t,n=t.next;if(_o(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(yo(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&_o(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function oo(t,e,i,n){var r=t.prev,a=t,s=t.next;if(_o(r,a,s)>=0)return!1;for(var o=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,l=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,h=po(r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,e,i,n),u=po(o,l,e,i,n),c=t.prevZ,d=t.nextZ;c&&c.z>=h&&d&&d.z<=u;){if(c!==t.prev&&c!==t.next&&yo(r.x,r.y,a.x,a.y,s.x,s.y,c.x,c.y)&&_o(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,d!==t.prev&&d!==t.next&&yo(r.x,r.y,a.x,a.y,s.x,s.y,d.x,d.y)&&_o(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;c&&c.z>=h;){if(c!==t.prev&&c!==t.next&&yo(r.x,r.y,a.x,a.y,s.x,s.y,c.x,c.y)&&_o(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;d&&d.z<=u;){if(d!==t.prev&&d!==t.next&&yo(r.x,r.y,a.x,a.y,s.x,s.y,d.x,d.y)&&_o(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function lo(t,e,i){var n=t;do{var r=n.prev,a=n.next.next;!vo(r,a)&&bo(r,n,n.next,a)&&wo(r,a)&&wo(a,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(a.i/i),To(n),To(n.next),n=t=a),n=n.next}while(n!==t);return ro(n)}function ho(t,e,i,n,r,a){var s=t;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&go(s,o)){var l=So(s,o);return s=ro(s,s.next),l=ro(l,l.next),ao(s,e,i,n,r,a),void ao(l,e,i,n,r,a)}o=o.next}s=s.next}while(s!==t)}function uo(t,e){return t.x-e.x}function co(t,e){if(e=function(t,e){var i,n=e,r=t.x,a=t.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var o=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=r&&o>s){if(s=o,o===r){if(a===n.y)return n;if(a===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===s)return i;var l,h=i,u=i.x,c=i.y,d=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&yo(a<c?r:s,a,u,c,a<c?s:r,a,n.x,n.y)&&(l=Math.abs(a-n.y)/(r-n.x),wo(n,t)&&(l<d||l===d&&(n.x>i.x||n.x===i.x&&mo(i,n)))&&(i=n,d=l)),n=n.next}while(n!==h);return i}(t,e)){var i=So(e,t);ro(e,e.next),ro(i,i.next)}}function mo(t,e){return _o(t.prev,t,e.prev)<0&&_o(e.next,t,t.next)<0}function po(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function fo(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function yo(t,e,i,n,r,a,s,o){return(r-s)*(e-o)-(t-s)*(a-o)>=0&&(t-s)*(n-o)-(i-s)*(e-o)>=0&&(i-s)*(a-o)-(r-s)*(n-o)>=0}function go(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&bo(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(wo(t,e)&&wo(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(_o(t.prev,t,e.prev)||_o(t,e.prev,e))||vo(t,e)&&_o(t.prev,t,t.next)>0&&_o(e.prev,e,e.next)>0)}function _o(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function vo(t,e){return t.x===e.x&&t.y===e.y}function bo(t,e,i,n){var r=xo(_o(t,e,i)),a=xo(_o(t,e,n)),s=xo(_o(i,n,t)),o=xo(_o(i,n,e));return r!==a&&s!==o||!(0!==r||!Mo(t,i,e))||!(0!==a||!Mo(t,n,e))||!(0!==s||!Mo(i,t,n))||!(0!==o||!Mo(i,e,n))}function Mo(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function xo(t){return t>0?1:t<0?-1:0}function wo(t,e){return _o(t.prev,t,t.next)<0?_o(t,e,t.next)>=0&&_o(t,t.prev,e)>=0:_o(t,e,t.prev)<0||_o(t,t.next,e)<0}function So(t,e){var i=new Co(t.i,t.x,t.y),n=new Co(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function Ao(t,e,i,n){var r=new Co(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function To(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Co(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Io(t,e,i,n){for(var r=0,a=e,s=i-n;a<i;a+=n)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}function ko(t,e,i,n,r){!function t(e,i,n,r,a){for(;r>n;){if(r-n>600){var s=r-n+1,o=i-n+1,l=Math.log(s),h=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*h*(s-h)/s)*(o-s/2<0?-1:1);t(e,i,Math.max(n,Math.floor(i-o*h/s+u)),Math.min(r,Math.floor(i+(s-o)*h/s+u)),a)}var c=e[i],d=n,m=r;for(Po(e,n,i),a(e[r],c)>0&&Po(e,n,r);d<m;){for(Po(e,d,m),d++,m--;a(e[d],c)<0;)d++;for(;a(e[m],c)>0;)m--}0===a(e[n],c)?Po(e,n,m):Po(e,++m,r),m<=i&&(n=m+1),i<=m&&(r=m-1)}}(t,e,i||0,n||t.length-1,r||Eo)}function Po(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function Eo(t,e){return t<e?-1:t>e?1:0}function Do(t,e){const i=t.length;if(i<=1)return[t];const n=[];let r,a;for(let e=0;e<i;e++){const i=E(t[e]);0!==i&&(t[e].area=Math.abs(i),void 0===a&&(a=i<0),a===i<0?(r&&n.push(r),r=[t[e]]):r.push(t[e]))}if(r&&n.push(r),e>1)for(let t=0;t<n.length;t++)n[t].length<=e||(ko(n[t],e,1,n[t].length-1,Lo),n[t]=n[t].slice(0,e));return n}function Lo(t,e){return e.area-t.area}function zo(t,e,i){const n=i.patternDependencies;let r=!1;for(const i of e){const e=i.paint.get(`${t}-pattern`);e.isConstant()||(r=!0);const a=e.constantOr(null);a&&(r=!0,n[a.to]=!0,n[a.from]=!0)}return r}function Fo(t,e,i,n,r){const a=r.patternDependencies;for(const s of e){const e=s.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:n-1},i,{},r.availableImages),o=e.evaluate({zoom:n},i,{},r.availableImages),l=e.evaluate({zoom:n+1},i,{},r.availableImages);t=t&&t.name?t.name:t,o=o&&o.name?o.name:o,l=l&&l.name?l.name:l,a[t]=!0,a[o]=!0,a[l]=!0,i.patterns[s.id]={min:t,mid:o,max:l}}}return i}io.deviation=function(t,e,i,n){var r=e&&e.length,a=Math.abs(Io(t,0,r?e[0]*i:t.length,i));if(r)for(var s=0,o=e.length;s<o;s++)a-=Math.abs(Io(t,e[s]*i,s<o-1?e[s+1]*i:t.length,i));var l=0;for(s=0;s<n.length;s+=3){var h=n[s]*i,u=n[s+1]*i,c=n[s+2]*i;l+=Math.abs((t[h]-t[c])*(t[u+1]-t[h+1])-(t[h]-t[u])*(t[c+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},io.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var s=0;s<e;s++)i.vertices.push(t[r][a][s]);r>0&&i.holes.push(n+=t[r-1].length)}return i},to.default=eo;class Oo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Nr,this.indexArray=new Jr,this.indexArray2=new ia,this.programConfigurations=new Oa(t.layers,t.zoom),this.segments=new Ua,this.segments2=new Ua,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=zo("fill",this.layers,e);const n=this.layers[0].layout.get("fill-sort-key"),r=[];for(const{feature:a,id:s,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,h=Za(a,t);if(!this.layers[0]._featureFilter.filter(new gr(this.zoom),h,i))continue;const u=n?n.evaluate(h,{},i,e.availableImages):void 0,c={id:s,properties:a.properties,type:a.type,sourceLayerIndex:l,index:o,geometry:t?h.geometry:$a(a),patterns:{},sortKey:u};r.push(c)}n&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of r){const{geometry:r,index:a,sourceLayerIndex:s}=n;if(this.hasPattern){const t=Fo("fill",this.layers,n,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(n,r,a,i,{});e.featureIndex.insert(t[a].feature,r,a,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qs),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,i,n,r){for(const t of Do(e,500)){let e=0;for(const i of t)e+=i.length;const i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=i.vertexLength,r=[],a=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&a.push(r.length/2);const i=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),n=i.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(n+e.length-1,n),r.push(e[0].x),r.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(n+t-1,n+t),r.push(e[t].x),r.push(e[t].y);i.vertexLength+=e.length,i.primitiveLength+=e.length}const s=to(r,a);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(n+s[t],n+s[t+1],n+s[t+2]);i.vertexLength+=e,i.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}}qn("FillBucket",Oo,{omit:["layers","patternFeatures"]});const Ro=new Er({"fill-sort-key":new Cr(Nt.layout_fill["fill-sort-key"])});var No={paint:new Er({"fill-antialias":new Tr(Nt.paint_fill["fill-antialias"]),"fill-opacity":new Cr(Nt.paint_fill["fill-opacity"]),"fill-color":new Cr(Nt.paint_fill["fill-color"]),"fill-outline-color":new Cr(Nt.paint_fill["fill-outline-color"]),"fill-translate":new Tr(Nt.paint_fill["fill-translate"]),"fill-translate-anchor":new Tr(Nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ir(Nt.paint_fill["fill-pattern"])}),layout:Ro};const Bo=Or([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),jo=Or([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Ho}=Bo;var Uo=Vo;function Vo(t,e,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(Go,this,e)}function Go(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function $o(t){for(var e,i,n=0,r=0,a=t.length,s=a-1;r<a;s=r++)n+=((i=t[s]).x-(e=t[r]).x)*(e.y+i.y);return n}Vo.types=["Unknown","Point","LineString","Polygon"],Vo.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,a=0,s=0,o=0,l=[];t.pos<i;){if(a<=0){var h=t.readVarint();n=7&h,a=h>>3}if(a--,1===n||2===n)s+=t.readSVarint(),o+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new r(s,o));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},Vo.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,r=0,a=0,s=1/0,o=-1/0,l=1/0,h=-1/0;t.pos<e;){if(n<=0){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)(r+=t.readSVarint())<s&&(s=r),r>o&&(o=r),(a+=t.readSVarint())<l&&(l=a),a>h&&(h=a);else if(7!==i)throw new Error("unknown command "+i)}return[s,l,o,h]},Vo.prototype.toGeoJSON=function(t,e,i){var n,r,a=this.extent*Math.pow(2,i),s=this.extent*t,o=this.extent*e,l=this.loadGeometry(),h=Vo.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+s)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+o)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(n=0;n<l.length;n++)c[n]=l[n][0];u(l=c);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,r=[],a=0;a<e;a++){var s=$o(t[a]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(i&&r.push(i),i=[t[a]]):i.push(t[a]))}return i&&r.push(i),r}(l),n=0;n<l.length;n++)for(r=0;r<l[n].length;r++)u(l[n][r])}1===l.length?l=l[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Zo=qo;function qo(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Yo,this,e),this.length=this._features.length}function Yo(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(i))}function Wo(t,e,i){if(3===t){var n=new Zo(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}qo.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Uo(this._pbf,e,this.extent,this._keys,this._values)};var Jo={VectorTile:function(t,e){this.layers=t.readFields(Wo,{},e)},VectorTileFeature:Uo,VectorTileLayer:Zo};const Xo=Jo.VectorTileFeature.types,Ko=Math.pow(2,13);function Qo(t,e,i,n,r,a,s,o){t.emplaceBack((e<<1)+s,(i<<1)+a,(Math.floor(n*Ko)<<1)+r,Math.round(o))}class tl{constructor(){this.acc=new r(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new r(t.x,t.y),this.max=new r(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);let i=!!this.borders;const n=this.min,r=this.max;t.x<n.x?(n.x=t.x,i=!0):t.x>r.x&&(r.x=t.x,i=!0),t.y<n.y?(n.y=t.y,i=!0):t.y>r.y&&(r.y=t.y,i=!0),((0===t.x||8192===t.x)&&t.x===e.x)!=((0===t.y||8192===t.y)&&t.y===e.y)&&this.processBorderOverlap(t,e),i&&this.checkBorderIntersection(t,e)}checkBorderIntersection(t,e){e.x<0!=t.x<0&&this.addBorderIntersection(0,Qe(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>8192!=t.x>8192&&this.addBorderIntersection(1,Qe(e.y,t.y,(8192-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,Qe(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>8192!=t.y>8192&&this.addBorderIntersection(3,Qe(e.x,t.x,(8192-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const i=this.borders[t];e<i[0]&&(i[0]=e),e>i[1]&&(i[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const i=0===t.x?0:1;this.addBorderIntersection(i,e.y),this.addBorderIntersection(i,t.y)}else{const i=0===t.y?2:3;this.addBorderIntersection(i,e.x),this.addBorderIntersection(i,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new r(0,0)}span(){return new r(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class el{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.centroidVertexArray=new ia,this.indexArray=new Jr,this.programConfigurations=new Oa(t.layers,t.zoom),this.segments=new Ua,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,i){this.features=[],this.hasPattern=zo("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/8192/(1<<t.z)}(i);for(const{feature:n,id:r,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,o=Za(n,t);if(!this.layers[0]._featureFilter.filter(new gr(this.zoom),o,i))continue;const l={id:r,sourceLayerIndex:s,index:a,geometry:t?o.geometry:$a(n),properties:n.properties,type:n.type,patterns:{}};this.hasPattern?this.features.push(Fo("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,a,i,{}),e.featureIndex.insert(n,l.geometry,a,s,this.index)}this.sortBorders()}addFeatures(t,e,i){for(const t of this.features){const{geometry:n}=t;this.addFeature(t,n,t.index,e,i)}this.sortBorders()}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ho),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,jo.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,n,r){const a=this.enableTerrain&&t.properties&&t.properties.hasOwnProperty("type")&&t.properties.hasOwnProperty("height")&&"Polygon"===Xo[t.type]?new tl:null;for(const i of Do(e,500)){let e=0,n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===i.length||(s=i[0]).every((t=>t.x<=0))||s.every((t=>t.x>=8192))||s.every((t=>t.y<=0))||s.every((t=>t.y>=8192)))continue;for(let t=0;t<i.length;t++){const r=i[t];if(0===r.length)continue;e+=r.length;let s=0;a&&a.startRing(r[0]);for(let t=0;t<r.length;t++){const e=r[t];if(t>=1){const i=r[t-1];if(!il(e,i)){a&&a.append(e,i),n.vertexLength+4>Ua.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=e.sub(i)._perp(),r=t.x/(Math.abs(t.x)+Math.abs(t.y)),o=t.y>0?1:0,l=i.dist(e);s+l>32768&&(s=0),Qo(this.layoutVertexArray,e.x,e.y,r,o,0,0,s),Qo(this.layoutVertexArray,e.x,e.y,r,o,0,1,s),s+=l,Qo(this.layoutVertexArray,i.x,i.y,r,o,0,0,s),Qo(this.layoutVertexArray,i.x,i.y,r,o,0,1,s);const h=n.vertexLength;this.indexArray.emplaceBack(h,h+2,h+1),this.indexArray.emplaceBack(h+1,h+2,h+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+e>Ua.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Xo[t.type])continue;const r=[],o=[],l=n.vertexLength;for(let t=0;t<i.length;t++){const e=i[t];if(0!==e.length){e!==i[0]&&o.push(r.length/2);for(let t=0;t<e.length;t++){const i=e[t];Qo(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),r.push(i.x),r.push(i.y),a&&a.currentPolyCount.top++}}}const h=to(r,o);for(let t=0;t<h.length;t+=3)this.indexArray.emplaceBack(l+h[t],l+h[t+2],l+h[t+1]);n.primitiveLength+=h.length/3,n.vertexLength+=e}var s;if(a&&a.polyCount.length>0){if(a.borders){a.vertexArrayOffset=this.centroidVertexArray.length;const t=a.borders,e=this.featuresOnBorder.push(a)-1;for(let i=0;i<4;i++)t[i][0]!==Number.MAX_VALUE&&this.borders[i].push(e)}this.encodeCentroid(a.borders?void 0:a.centroid(),a)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,i)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[i].borders[t][0]))}encodeCentroid(t,e,i=!0){let n,r;if(t)if(0!==t.y){const i=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(i.x/10)),r=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else n=Math.ceil(7.3*t.x),r=0;else n=0,r=+i;let a=i?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(a++,0,r),this.centroidVertexArray.emplace(a++,n,r);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(a++,n,r)}}}function il(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}qn("FillExtrusionBucket",el,{omit:["layers","features"]}),qn("PartMetadata",tl);var nl={paint:new Er({"fill-extrusion-opacity":new Tr(Nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Cr(Nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tr(Nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tr(Nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ir(Nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Cr(Nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Cr(Nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tr(Nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function rl(t,e){return t.x*e.x+t.y*e.y}function al(t,e){if(1===t.length){let i=0;const n=e[i++];let r;for(;!r||n.equals(r);)if(r=e[i++],!r)return 1/0;for(;i<e.length;i++){const a=e[i],s=t[0],o=r.sub(n),l=a.sub(n),h=s.sub(n),u=rl(o,o),c=rl(o,l),d=rl(l,l),m=rl(h,o),p=rl(h,l),f=u*d-c*c,y=(d*m-c*p)/f,g=(u*p-c*m)/f,_=n.z*(1-y-g)+r.z*y+a.z*g;if(isFinite(_))return _}return 1/0}{let t=1/0;for(const i of e)t=Math.min(t,i.z);return t}}const sl=Or([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:ol}=sl,ll=Or([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:hl}=ll,ul=Jo.VectorTileFeature.types,cl=Math.cos(Math.PI/180*37.5);class dl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new jr,this.layoutVertexArray2=new Hr,this.indexArray=new Jr,this.programConfigurations=new Oa(t.layers,t.zoom),this.segments=new Ua,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=zo("line",this.layers,e);const n=this.layers[0].layout.get("line-sort-key"),r=[];for(const{feature:e,id:a,index:s,sourceLayerIndex:o}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Za(e,t);if(!this.layers[0]._featureFilter.filter(new gr(this.zoom),l,i))continue;const h=n?n.evaluate(l,{},i):void 0,u={id:a,properties:e.properties,type:e.type,sourceLayerIndex:o,index:s,geometry:t?l.geometry:$a(e),patterns:{},sortKey:h};r.push(u)}n&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of r){const{geometry:r,index:a,sourceLayerIndex:s}=n;if(this.hasPattern){const t=Fo("line",this.layers,n,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(n,r,a,i,{});e.featureIndex.insert(t[a].feature,r,a,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,hl)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ol),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,i,n,r){const a=this.layers[0].layout,s=a.get("line-join").evaluate(t,{}),o=a.get("line-cap"),l=a.get("line-miter-limit"),h=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const i of e)this.addLine(i,t,s,o,l,h);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}addLine(t,e,i,n,r,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const s="Polygon"===ul[e.type];let o=t.length;for(;o>=2&&t[o-1].equals(t[o-2]);)o--;let l=0;for(;l<o-1&&t[l].equals(t[l+1]);)l++;if(o<(s?3:2))return;"bevel"===i&&(r=1.05);const h=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*o,this.layoutVertexArray,this.indexArray);let c,d,m,p,f;this.e1=this.e2=-1,s&&(c=t[o-2],f=t[l].sub(c)._unit()._perp());for(let e=l;e<o;e++){if(m=e===o-1?s?t[l+1]:void 0:t[e+1],m&&t[e].equals(m))continue;f&&(p=f),c&&(d=c),c=t[e],f=m?m.sub(c)._unit()._perp():p,p=p||f;let y=p.add(f);0===y.x&&0===y.y||y._unit();const g=p.x*f.x+p.y*f.y,_=y.x*f.x+y.y*f.y,v=0!==_?1/_:1/0,b=2*Math.sqrt(2-2*_),M=_<cl&&d&&m,x=p.x*f.y-p.y*f.x>0;if(M&&e>l){const t=c.dist(d);if(t>2*h){const e=c.sub(c.sub(d)._mult(h/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,p,0,0,u),d=e}}const w=d&&m;let S=w?i:s?"butt":n;if(w&&"round"===S&&(v<a?S="miter":v<=2&&(S="fakeround")),"miter"===S&&v>r&&(S="bevel"),"bevel"===S&&(v>2&&(S="flipbevel"),v<r&&(S="miter")),d&&this.updateDistance(d,c),"miter"===S)y._mult(v),this.addCurrentVertex(c,y,0,0,u);else if("flipbevel"===S){if(v>100)y=f.mult(-1);else{const t=v*p.add(f).mag()/p.sub(f).mag();y._perp()._mult(t*(x?-1:1))}this.addCurrentVertex(c,y,0,0,u),this.addCurrentVertex(c,y.mult(-1),0,0,u)}else if("bevel"===S||"fakeround"===S){const t=-Math.sqrt(v*v-1),e=x?t:0,i=x?0:t;if(d&&this.addCurrentVertex(c,p,e,i,u),"fakeround"===S){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let i=e/t;if(.5!==i){const t=i-.5;i+=i*t*(i-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*t*t+(.848013+g*(.215638*g-1.06021)))}const n=f.sub(p)._mult(i)._add(p)._unit()._mult(x?-1:1);this.addHalfVertex(c,n.x,n.y,!1,x,0,u)}}m&&this.addCurrentVertex(c,f,-e,-i,u)}else if("butt"===S)this.addCurrentVertex(c,y,0,0,u);else if("square"===S){const t=d?1:-1;this.addCurrentVertex(c,y,t,t,u)}else"round"===S&&(d&&(this.addCurrentVertex(c,p,0,0,u),this.addCurrentVertex(c,p,1,1,u,!0)),m&&(this.addCurrentVertex(c,f,-1,-1,u,!0),this.addCurrentVertex(c,f,0,0,u)));if(M&&e<o-1){const t=c.dist(m);if(t>2*h){const e=c.add(m.sub(c)._mult(h/t)._round());this.updateDistance(c,e),this.addCurrentVertex(e,f,0,0,u),c=e}}}}addCurrentVertex(t,e,i,n,r,a=!1){const s=e.y*n-e.x,o=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,a,!1,i,r),this.addHalfVertex(t,s,o,a,!0,-n,r)}addHalfVertex({x:t,y:e},i,n,r,a,s,o){this.layoutVertexArray.emplaceBack((t<<1)+(r?1:0),(e<<1)+(a?1:0),Math.round(63*i)+128,Math.round(63*n)+128,1+(0===s?0:s<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),a?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}qn("LineBucket",dl,{omit:["layers","patternFeatures"]});const ml=new Er({"line-cap":new Tr(Nt.layout_line["line-cap"]),"line-join":new Cr(Nt.layout_line["line-join"]),"line-miter-limit":new Tr(Nt.layout_line["line-miter-limit"]),"line-round-limit":new Tr(Nt.layout_line["line-round-limit"]),"line-sort-key":new Cr(Nt.layout_line["line-sort-key"])});var pl={paint:new Er({"line-opacity":new Cr(Nt.paint_line["line-opacity"]),"line-color":new Cr(Nt.paint_line["line-color"]),"line-translate":new Tr(Nt.paint_line["line-translate"]),"line-translate-anchor":new Tr(Nt.paint_line["line-translate-anchor"]),"line-width":new Cr(Nt.paint_line["line-width"]),"line-gap-width":new Cr(Nt.paint_line["line-gap-width"]),"line-offset":new Cr(Nt.paint_line["line-offset"]),"line-blur":new Cr(Nt.paint_line["line-blur"]),"line-dasharray":new kr(Nt.paint_line["line-dasharray"]),"line-pattern":new Ir(Nt.paint_line["line-pattern"]),"line-gradient":new Pr(Nt.paint_line["line-gradient"])}),layout:ml};const fl=new class extends Cr{possiblyEvaluate(t,e){return e=new gr(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,i,n){return e=_({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,i,n)}}(pl.paint.properties["line-width"].specification);function yl(t,e){return e>0?e+2*t:t}fl.useIntegerZoom=!0;const gl=Or([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_l=Or([{name:"a_projected_pos",components:3,type:"Float32"}],4),vl=(Or([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Or([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),bl=Or([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]),Ml=(Or([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),xl=Or([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function wl(t,e){const{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new gr(t+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:n}=i;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let a=r;for(;a<e.length&&e[a]<t+1;)a++;a=Math.min(e.length-1,a);const s=e[r],o=e[a];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:o,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:o,minSize:i.evaluate(new gr(s)),maxSize:i.evaluate(new gr(o)),interpolationType:n}}}function Sl(t,{uSize:e,uSizeT:i},{lowerSize:n,upperSize:r}){return"source"===t.kind?n/128:"composite"===t.kind?Qe(n/128,r/128,i):e}function Al(t,e){let i=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:a,maxZoom:s}=t,o=r?f(pi.interpolationFactor(r,e,a,s),0,1):0;"camera"===t.kind?n=Qe(t.minSize,t.maxSize,o):i=o}return{uSizeT:i,uSize:n}}Or([{name:"triangle",components:3,type:"Uint16"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Or([{type:"Float32",name:"offsetX"}]),Or([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Tl=Object.freeze({__proto__:null,getSizeData:wl,evaluateSizeForFeature:Sl,evaluateSizeForZoom:Al,SIZE_PACK_FACTOR:128});function Cl(t,e,i){return t.sections.forEach((t=>{t.text=function(t,e,i){const n=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),yr.applyArabicShaping&&(t=yr.applyArabicShaping(t)),t}(t.text,e,i)})),t}const Il={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var kl=function(t,e,i,n,r){var a,s,o=8*r-n-1,l=(1<<o)-1,h=l>>1,u=-7,c=i?r-1:0,d=i?-1:1,m=t[e+c];for(c+=d,a=m&(1<<-u)-1,m>>=-u,u+=o;u>0;a=256*a+t[e+c],c+=d,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=n;u>0;s=256*s+t[e+c],c+=d,u-=8);if(0===a)a=1-h;else{if(a===l)return s?NaN:1/0*(m?-1:1);s+=Math.pow(2,n),a-=h}return(m?-1:1)*s*Math.pow(2,a-n)},Pl=function(t,e,i,n,r,a){var s,o,l,h=8*a-r-1,u=(1<<h)-1,c=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:a-1,p=n?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(s++,l/=2),s+c>=u?(o=0,s=u):s+c>=1?(o=(e*l-1)*Math.pow(2,r),s+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;t[i+m]=255&o,m+=p,o/=256,r-=8);for(s=s<<r|o,h+=r;h>0;t[i+m]=255&s,m+=p,s/=256,h-=8);t[i+m-p]|=128*f},El=Dl;function Dl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Dl.Varint=0,Dl.Fixed64=1,Dl.Bytes=2,Dl.Fixed32=5;var Ll="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function zl(t){return t.type===Dl.Bytes?t.readVarint()+t.pos:t.pos+1}function Fl(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Ol(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function Rl(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Nl(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Bl(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function jl(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Hl(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Ul(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Vl(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Gl(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function $l(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function Zl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ql(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Yl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Wl(t,e,i){1===t&&i.readMessage(Jl,e)}function Jl(t,e,i){if(3===t){const{id:t,bitmap:n,width:r,height:a,left:s,top:o,advance:l}=i.readMessage(Xl,{});e.push({id:t,bitmap:new qs({width:r+6,height:a+6},n),metrics:{width:r,height:a,left:s,top:o,advance:l}})}}function Xl(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Kl(t){let e=0,i=0;for(const n of t)e+=n.w*n.h,i=Math.max(i,n.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let r=0,a=0;for(const e of t)for(let t=n.length-1;t>=0;t--){const i=n[t];if(!(e.w>i.w||e.h>i.h)){if(e.x=i.x,e.y=i.y,a=Math.max(a,e.y+e.h),r=Math.max(r,e.x+e.w),e.w===i.w&&e.h===i.h){const e=n.pop();t<n.length&&(n[t]=e)}else e.h===i.h?(i.x+=e.w,i.w-=e.w):e.w===i.w?(i.y+=e.h,i.h-=e.h):(n.push({x:i.x+e.w,y:i.y,w:i.w-e.w,h:e.h}),i.y+=e.h,i.h-=e.h);break}}return{w:r,h:a,fill:e/(r*a)||0}}Dl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,a=this.pos;this.type=7&n,t(r,e,this),this.pos===a&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Zl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Yl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Zl(this.buf,this.pos)+4294967296*Zl(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Zl(this.buf,this.pos)+4294967296*Yl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=kl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=kl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,a=i.buf;if(n=(112&(r=a[i.pos++]))>>4,r<128)return Fl(t,n,e);if(n|=(127&(r=a[i.pos++]))<<3,r<128)return Fl(t,n,e);if(n|=(127&(r=a[i.pos++]))<<10,r<128)return Fl(t,n,e);if(n|=(127&(r=a[i.pos++]))<<17,r<128)return Fl(t,n,e);if(n|=(127&(r=a[i.pos++]))<<24,r<128)return Fl(t,n,e);if(n|=(1&(r=a[i.pos++]))<<31,r<128)return Fl(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Ll?function(t,e,i){return Ll.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",r=e;r<i;){var a,s,o,l=t[r],h=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>i)break;1===u?l<128&&(h=l):2===u?128==(192&(a=t[r+1]))&&(h=(31&l)<<6|63&a)<=127&&(h=null):3===u?(s=t[r+2],128==(192&(a=t[r+1]))&&128==(192&s)&&((h=(15&l)<<12|(63&a)<<6|63&s)<=2047||h>=55296&&h<=57343)&&(h=null)):4===u&&(s=t[r+2],o=t[r+3],128==(192&(a=t[r+1]))&&128==(192&s)&&128==(192&o)&&((h=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,u=1):h>65535&&(h-=65536,n+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),n+=String.fromCharCode(h),r+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Dl.Bytes)return t.push(this.readVarint(e));var i=zl(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Dl.Bytes)return t.push(this.readSVarint());var e=zl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Dl.Bytes)return t.push(this.readBoolean());var e=zl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Dl.Bytes)return t.push(this.readFloat());var e=zl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Dl.Bytes)return t.push(this.readDouble());var e=zl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Dl.Bytes)return t.push(this.readFixed32());var e=zl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Dl.Bytes)return t.push(this.readSFixed32());var e=zl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Dl.Bytes)return t.push(this.readFixed64());var e=zl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Dl.Bytes)return t.push(this.readSFixed64());var e=zl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Dl.Varint)for(;this.buf[this.pos++]>127;);else if(e===Dl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Dl.Fixed32)this.pos+=4;else{if(e!==Dl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ql(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ql(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ql(this.buf,-1&t,this.pos),ql(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ql(this.buf,-1&t,this.pos),ql(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,a=0;a<e.length;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){n>56319||a+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&Ol(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Pl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Pl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&Ol(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,Dl.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Rl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Nl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Hl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Bl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,jl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Ul,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Vl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Gl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,$l,e)},writeBytesField:function(t,e){this.writeTag(t,Dl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Dl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Dl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Dl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Dl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Dl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Dl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Dl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Dl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Dl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Ql{constructor(t,{pixelRatio:e,version:i,stretchX:n,stretchY:r,content:a}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=n,this.stretchY=r,this.content=a,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class th{constructor(t,e){const i={},n={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,i,r),this.addImages(e,n,r);const{w:a,h:s}=Kl(r),o=new Ys({width:a||1,height:s||1});for(const e in t){const n=t[e],r=i[e].paddedRect;Ys.copy(n.data,o,{x:0,y:0},{x:r.x+1,y:r.y+1},n.data)}for(const t in e){const i=e[t],r=n[t].paddedRect,a=r.x+1,s=r.y+1,l=i.data.width,h=i.data.height;Ys.copy(i.data,o,{x:0,y:0},{x:a,y:s},i.data),Ys.copy(i.data,o,{x:0,y:h-1},{x:a,y:s-1},{width:l,height:1}),Ys.copy(i.data,o,{x:0,y:0},{x:a,y:s+h},{width:l,height:1}),Ys.copy(i.data,o,{x:l-1,y:0},{x:a-1,y:s},{width:1,height:h}),Ys.copy(i.data,o,{x:0,y:0},{x:a+l,y:s},{width:1,height:h})}this.image=o,this.iconPositions=i,this.patternPositions=n}addImages(t,e,i){for(const n in t){const r=t[n],a={x:0,y:0,w:r.data.width+2,h:r.data.height+2};i.push(a),e[n]=new Ql(a,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)}patchUpdatedImage(t,e,i){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[n,r]=t.tl;i.update(e.data,void 0,{x:n,y:r})}}qn("ImagePosition",Ql),qn("ImageAtlas",th);const eh={horizontal:1,vertical:2,horizontalOnly:3};class ih{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const i=new ih;return i.scale=t||1,i.fontStack=e,i}static forImage(t){const e=new ih;return e.imageName=t,e}}class nh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const i=new nh;for(let n=0;n<t.sections.length;n++){const r=t.sections[n];r.image?i.addImageSection(r):i.addTextSection(r,e)}return i}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i+1)||null,r=t.charCodeAt(i-1)||null;e+=n&&rr(n)&&!Il[t[i+1]]||r&&rr(r)&&!Il[t[i-1]]||!Il[t[i]]?t[i]:Il[t[i]]}return e}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&ah[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let i=this.text.length-1;i>=0&&i>=t&&ah[this.text.charCodeAt(i)];i--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const i=new nh;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(ih.forText(t.scale,t.fontStack||e));const i=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(i)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void k("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(ih.forImage(e)),this.sectionIndex.push(this.sections.length-1)):k("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function rh(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f){const y=nh.fromFeature(t,r);let g;c===eh.vertical&&y.verticalizePunctuation();const{processBidirectionalText:_,processStyledBidirectionalText:v}=yr;if(_&&1===y.sections.length){g=[];const t=_(y.toString(),ch(y,h,a,e,n,m,p));for(const e of t){const t=new nh;t.text=e,t.sections=y.sections;for(let i=0;i<e.length;i++)t.sectionIndex.push(0);g.push(t)}}else if(v){g=[];const t=v(y.text,y.sectionIndex,ch(y,h,a,e,n,m,p));for(const e of t){const t=new nh;t.text=e[0],t.sectionIndex=e[1],t.sections=y.sections,g.push(t)}}else g=function(t,e){const i=[],n=t.text;let r=0;for(const n of e)i.push(t.substring(r,n)),r=n;return r<n.length&&i.push(t.substring(r,n.length)),i}(y,ch(y,h,a,e,n,m,p));const b=[],M={positionedLines:b,text:y.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:c,iconsInText:!1,verticalizable:!1};return function(t,e,i,n,r,a,s,o,l,h,u,c){let d=0,m=-17,p=0,f=0;const y="right"===o?1:"left"===o?0:.5;let g=0;for(const s of r){s.trim();const r=s.getMaxScale(),o=24*(r-1),v={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=v;const b=v.positionedGlyphs;let M=0;if(!s.length()){m+=a,++g;continue}for(let a=0;a<s.length();a++){const p=s.getSection(a),f=s.getSectionIndex(a),y=s.getCharCode(a);let g=0,v=null,x=null,w=null,S=24;const A=!(l===eh.horizontal||!u&&!nr(y)||u&&(ah[y]||(_=y,Qn.Arabic(_)||Qn["Arabic Supplement"](_)||Qn["Arabic Extended-A"](_)||Qn["Arabic Presentation Forms-A"](_)||Qn["Arabic Presentation Forms-B"](_))));if(p.imageName){const e=n[p.imageName];if(!e)continue;w=p.imageName,t.iconsInText=t.iconsInText||!0,x=e.paddedRect;const i=e.displaySize;p.scale=24*p.scale/c,v={width:i[0],height:i[1],left:1,top:-3,advance:A?i[1]:i[0]},g=o+(24-i[1]*p.scale),S=v.advance;const a=A?i[0]*p.scale-24*r:i[1]*p.scale-24*r;a>0&&a>M&&(M=a)}else{const t=i[p.fontStack],n=t&&t[y];if(n&&n.rect)x=n.rect,v=n.metrics;else{const t=e[p.fontStack],i=t&&t[y];if(!i)continue;v=i.metrics}g=24*(r-p.scale)}A?(t.verticalizable=!0,b.push({glyph:y,imageName:w,x:d,y:m+g,vertical:A,scale:p.scale,fontStack:p.fontStack,sectionIndex:f,metrics:v,rect:x}),d+=S*p.scale+h):(b.push({glyph:y,imageName:w,x:d,y:m+g,vertical:A,scale:p.scale,fontStack:p.fontStack,sectionIndex:f,metrics:v,rect:x}),d+=v.advance*p.scale+h)}0!==b.length&&(p=Math.max(d-h,p),mh(b,0,b.length-1,y,M)),d=0;const x=a*r+M;v.lineOffset=Math.max(M,o),m+=x,f=Math.max(x,f),++g}var _;const v=m- -17,{horizontalAlign:b,verticalAlign:M}=dh(s);(function(t,e,i,n,r,a,s,o,l){const h=(e-i)*r;let u=0;u=a!==s?-o*n- -17:(-n*l+.5)*s;for(const e of t)for(const t of e.positionedGlyphs)t.x+=h,t.y+=u})(t.positionedLines,y,b,M,p,f,a,v,r.length),t.top+=-M*v,t.bottom=t.top+v,t.left+=-b*p,t.right=t.left+p}(M,e,i,n,g,s,o,l,c,h,d,f),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&M}const ah={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},sh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function oh(t,e,i,n,r,a){if(e.imageName){const t=n[e.imageName];return t?t.displaySize[0]*e.scale*24/a+r:0}{const n=i[e.fontStack],a=n&&n[t];return a?a.metrics.advance*e.scale+r:0}}function lh(t,e,i,n){const r=Math.pow(t-e,2);return n?t<e?r/2:2*r:r+Math.abs(i)*i}function hh(t,e,i){let n=0;return 10===t&&(n-=1e4),i&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function uh(t,e,i,n,r,a){let s=null,o=lh(e,i,r,a);for(const t of n){const n=lh(e-t.x,i,r,a)+t.badness;n<=o&&(s=t,o=n)}return{index:t,x:e,priorBreak:s,badness:o}}function ch(t,e,i,n,r,a,s){if("point"!==a)return[];if(!t)return[];const o=[],l=function(t,e,i,n,r,a){let s=0;for(let i=0;i<t.length();i++){const o=t.getSection(i);s+=oh(t.getCharCode(i),o,n,r,e,a)}return s/Math.max(1,Math.ceil(s/i))}(t,e,i,n,r,s),h=t.text.indexOf("​")>=0;let u=0;for(let i=0;i<t.length();i++){const a=t.getSection(i),d=t.getCharCode(i);if(ah[d]||(u+=oh(d,a,n,r,e,s)),i<t.length()-1){const e=!((c=d)<11904||!(Qn["Bopomofo Extended"](c)||Qn.Bopomofo(c)||Qn["CJK Compatibility Forms"](c)||Qn["CJK Compatibility Ideographs"](c)||Qn["CJK Compatibility"](c)||Qn["CJK Radicals Supplement"](c)||Qn["CJK Strokes"](c)||Qn["CJK Symbols and Punctuation"](c)||Qn["CJK Unified Ideographs Extension A"](c)||Qn["CJK Unified Ideographs"](c)||Qn["Enclosed CJK Letters and Months"](c)||Qn["Halfwidth and Fullwidth Forms"](c)||Qn.Hiragana(c)||Qn["Ideographic Description Characters"](c)||Qn["Kangxi Radicals"](c)||Qn["Katakana Phonetic Extensions"](c)||Qn.Katakana(c)||Qn["Vertical Forms"](c)||Qn["Yi Radicals"](c)||Qn["Yi Syllables"](c)));(sh[d]||e||a.imageName)&&o.push(uh(i+1,u,l,o,hh(d,t.getCharCode(i+1),e&&h),!1))}}var c;return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(uh(t.length(),u,l,o,0,!0))}function dh(t){let e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function mh(t,e,i,n,r){if(!n&&!r)return;const a=t[i],s=(t[i].x+a.metrics.advance*a.scale)*n;for(let n=e;n<=i;n++)t[n].x-=s,t[n].y+=r}function ph(t,e,i){const{horizontalAlign:n,verticalAlign:r}=dh(i),a=e[0]-t.displaySize[0]*n,s=e[1]-t.displaySize[1]*r;return{image:t,top:s,bottom:s+t.displaySize[1],left:a,right:a+t.displaySize[0]}}function fh(t,e,i,n,r,a){const s=t.image;let o;if(s.content){const t=s.content,e=s.pixelRatio||1;o=[t[0]/e,t[1]/e,s.displaySize[0]-t[2]/e,s.displaySize[1]-t[3]/e]}const l=e.left*a,h=e.right*a;let u,c,d,m;"width"===i||"both"===i?(m=r[0]+l-n[3],c=r[0]+h+n[1]):(m=r[0]+(l+h-s.displaySize[0])/2,c=m+s.displaySize[0]);const p=e.top*a,f=e.bottom*a;return"height"===i||"both"===i?(u=r[1]+p-n[0],d=r[1]+f+n[2]):(u=r[1]+(p+f-s.displaySize[1])/2,d=u+s.displaySize[1]),{image:s,top:u,right:c,bottom:d,left:m,collisionPadding:o}}class yh extends r{constructor(t,e,i,n){super(t,e),this.angle=i,void 0!==n&&(this.segment=n)}clone(){return new yh(this.x,this.y,this.angle,this.segment)}}function gh(t,e,i,n,r){if(void 0===e.segment)return!0;let a=e,s=e.segment+1,o=0;for(;o>-i/2;){if(s--,s<0)return!1;o-=t[s].dist(a),a=t[s]}o+=t[s].dist(t[s+1]),s++;const l=[];let h=0;for(;o<i/2;){const e=t[s],i=t[s+1];if(!i)return!1;let a=t[s-1].angleTo(e)-e.angleTo(i);for(a=Math.abs((a+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:o,angleDelta:a}),h+=a;o-l[0].distance>n;)h-=l.shift().angleDelta;if(h>r)return!1;s++,o+=e.dist(i)}return!0}function _h(t){let e=0;for(let i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function vh(t,e,i){return t?.6*e*i:0}function bh(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Mh(t,e,i,n,r,a){const s=vh(i,r,a),o=bh(i,n)*a;let l=0;const h=_h(t)/2;for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1],a=n.dist(r);if(l+a>h){const u=(h-l)/a,c=Qe(n.x,r.x,u),d=Qe(n.y,r.y,u),m=new yh(c,d,r.angleTo(n),i);return m._round(),!s||gh(t,m,o,s,e)?m:void 0}l+=a}}function xh(t,e,i,n,r,a,s,o,l){const h=vh(n,a,s),u=bh(n,r),c=u*s,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-c<e/4&&(e=c+e/4),function t(e,i,n,r,a,s,o,l,h){const u=s/2,c=_h(e);let d=0,m=i-n,p=[];for(let t=0;t<e.length-1;t++){const i=e[t],o=e[t+1],l=i.dist(o),f=o.angleTo(i);for(;m+n<d+l;){m+=n;const y=(m-d)/l,g=Qe(i.x,o.x,y),_=Qe(i.y,o.y,y);if(g>=0&&g<h&&_>=0&&_<h&&m-u>=0&&m+u<=c){const i=new yh(g,_,f,t);i._round(),r&&!gh(e,i,s,r,a)||p.push(i)}}d+=l}return l||p.length||o||(p=t(e,d/2,n,r,a,s,o,!0,h)),p}(t,d?e/2*o%e:(u/2+2*a)*s*o%e,e,h,i,c,d,!1,l)}function wh(t,e,i,n,a){const s=[];for(let o=0;o<t.length;o++){const l=t[o];let h;for(let t=0;t<l.length-1;t++){let o=l[t],u=l[t+1];o.x<e&&u.x<e||(o.x<e?o=new r(e,o.y+(e-o.x)/(u.x-o.x)*(u.y-o.y))._round():u.x<e&&(u=new r(e,o.y+(e-o.x)/(u.x-o.x)*(u.y-o.y))._round()),o.y<i&&u.y<i||(o.y<i?o=new r(o.x+(i-o.y)/(u.y-o.y)*(u.x-o.x),i)._round():u.y<i&&(u=new r(o.x+(i-o.y)/(u.y-o.y)*(u.x-o.x),i)._round()),o.x>=n&&u.x>=n||(o.x>=n?o=new r(n,o.y+(n-o.x)/(u.x-o.x)*(u.y-o.y))._round():u.x>=n&&(u=new r(n,o.y+(n-o.x)/(u.x-o.x)*(u.y-o.y))._round()),o.y>=a&&u.y>=a||(o.y>=a?o=new r(o.x+(a-o.y)/(u.y-o.y)*(u.x-o.x),a)._round():u.y>=a&&(u=new r(o.x+(a-o.y)/(u.y-o.y)*(u.x-o.x),a)._round()),h&&o.equals(h[h.length-1])||(h=[o],s.push(h)),h.push(u)))))}}return s}function Sh(t,e,i,n){const a=[],s=t.image,o=s.pixelRatio,l=s.paddedRect.w-2,h=s.paddedRect.h-2,u=t.right-t.left,c=t.bottom-t.top,d=s.stretchX||[[0,l]],m=s.stretchY||[[0,h]],p=(t,e)=>t+e[1]-e[0],f=d.reduce(p,0),y=m.reduce(p,0),g=l-f,_=h-y;let v=0,b=f,M=0,x=y,w=0,S=g,A=0,T=_;if(s.content&&n){const t=s.content;v=Ah(d,0,t[0]),M=Ah(m,0,t[1]),b=Ah(d,t[0],t[2]),x=Ah(m,t[1],t[3]),w=t[0]-v,A=t[1]-M,S=t[2]-t[0]-b,T=t[3]-t[1]-x}const C=(n,a,l,h)=>{const d=Ch(n.stretch-v,b,u,t.left),m=Ih(n.fixed-w,S,n.stretch,f),p=Ch(a.stretch-M,x,c,t.top),g=Ih(a.fixed-A,T,a.stretch,y),_=Ch(l.stretch-v,b,u,t.left),C=Ih(l.fixed-w,S,l.stretch,f),I=Ch(h.stretch-M,x,c,t.top),k=Ih(h.fixed-A,T,h.stretch,y),P=new r(d,p),E=new r(_,p),D=new r(_,I),L=new r(d,I),z=new r(m/o,g/o),F=new r(C/o,k/o),O=e*Math.PI/180;if(O){const t=Math.sin(O),e=Math.cos(O),i=[e,-t,t,e];P._matMult(i),E._matMult(i),L._matMult(i),D._matMult(i)}const R=n.stretch+n.fixed,N=a.stretch+a.fixed;return{tl:P,tr:E,bl:L,br:D,tex:{x:s.paddedRect.x+1+R,y:s.paddedRect.y+1+N,w:l.stretch+l.fixed-R,h:h.stretch+h.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:F,minFontScaleX:S/o/u,minFontScaleY:T/o/c,isSDF:i}};if(n&&(s.stretchX||s.stretchY)){const t=Th(d,g,f),e=Th(m,_,y);for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1];for(let t=0;t<e.length-1;t++)a.push(C(n,e[t],r,e[t+1]))}}else a.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:h+1}));return a}function Ah(t,e,i){let n=0;for(const r of t)n+=Math.max(e,Math.min(i,r[1]))-Math.max(e,Math.min(i,r[0]));return n}function Th(t,e,i){const n=[{fixed:-1,stretch:0}];for(const[e,i]of t){const t=n[n.length-1];n.push({fixed:e-t.stretch,stretch:t.stretch}),n.push({fixed:e-t.stretch,stretch:t.stretch+(i-e)})}return n.push({fixed:e+1,stretch:i}),n}function Ch(t,e,i,n){return t/e*i+n}function Ih(t,e,i,n){return t-e*i/n}qn("Anchor",yh);class kh{constructor(t=[],e=Ph){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,n=e[t];for(;t>0;){const r=t-1>>1,a=e[r];if(i(n,a)>=0)break;e[t]=a,t=r}e[t]=n}_down(t){const{data:e,compare:i}=this,n=this.length>>1,r=e[t];for(;t<n;){let n=1+(t<<1),a=e[n];const s=n+1;if(s<this.length&&i(e[s],a)<0&&(n=s,a=e[s]),i(a,r)>=0)break;e[t]=a,t=n}e[t]=r}}function Ph(t,e){return t<e?-1:t>e?1:0}function Eh(t,e=1,i=!1){let n=1/0,a=1/0,s=-1/0,o=-1/0;const l=t[0];for(let t=0;t<l.length;t++){const e=l[t];(!t||e.x<n)&&(n=e.x),(!t||e.y<a)&&(a=e.y),(!t||e.x>s)&&(s=e.x),(!t||e.y>o)&&(o=e.y)}const h=Math.min(s-n,o-a);let u=h/2;const c=new kh([],Dh);if(0===h)return new r(n,a);for(let e=n;e<s;e+=h)for(let i=a;i<o;i+=h)c.push(new Lh(e+u,i+u,u,t));let d=function(t){let e=0,i=0,n=0;const r=t[0];for(let t=0,a=r.length,s=a-1;t<a;s=t++){const a=r[t],o=r[s],l=a.x*o.y-o.x*a.y;i+=(a.x+o.x)*l,n+=(a.y+o.y)*l,e+=3*l}return new Lh(i/e,n/e,0,t)}(t),m=c.length;for(;c.length;){const n=c.pop();(n.d>d.d||!d.d)&&(d=n,i&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,m)),n.max-d.d<=e||(u=n.h/2,c.push(new Lh(n.p.x-u,n.p.y-u,u,t)),c.push(new Lh(n.p.x+u,n.p.y-u,u,t)),c.push(new Lh(n.p.x-u,n.p.y+u,u,t)),c.push(new Lh(n.p.x+u,n.p.y+u,u,t)),m+=4)}return i&&(console.log(`num probes: ${m}`),console.log(`best distance: ${d.d}`)),d.p}function Dh(t,e){return e.max-t.max}function Lh(t,e,i,n){this.p=new r(t,e),this.h=i,this.d=function(t,e){let i=!1,n=1/0;for(let r=0;r<e.length;r++){const a=e[r];for(let e=0,r=a.length,s=r-1;e<r;s=e++){const r=a[e],o=a[s];r.y>t.y!=o.y>t.y&&t.x<(o.x-r.x)*(t.y-r.y)/(o.y-r.y)+r.x&&(i=!i),n=Math.min(n,is(t,r,o))}}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const zh=Number.POSITIVE_INFINITY;function Fh(t,e){return e[1]!==zh?function(t,e,i){let n=0,r=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":r=i-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-i}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,r]}(t,e[0],e[1]):function(t,e){let i=0,n=0;e<0&&(e=0);const r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=r-7;break;case"bottom-right":case"bottom-left":n=7-r;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":i=-r;break;case"top-left":case"bottom-left":i=r;break;case"left":i=e;break;case"right":i=-e}return[i,n]}(t,e[0])}function Oh(t,e,i,n,r,a,s,o){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const l=t.layers[0].layout,h=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:i}=t.textSizeData;u.compositeTextSizes=[h["text-size"].possiblyEvaluate(new gr(e),s),h["text-size"].possiblyEvaluate(new gr(i),s)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:i}=t.iconSizeData;u.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new gr(e),s),h["icon-size"].possiblyEvaluate(new gr(i),s)]}u.layoutTextSize=h["text-size"].possiblyEvaluate(new gr(o+1),s),u.layoutIconSize=h["icon-size"].possiblyEvaluate(new gr(o+1),s),u.textMaxSize=h["text-size"].possiblyEvaluate(new gr(18),s);const c=24*l.get("text-line-height"),d="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),m=l.get("text-keep-upright"),p=l.get("text-size");for(const a of t.features){const o=l.get("text-font").evaluate(a,{},s).join(","),h=p.evaluate(a,{},s),f=u.layoutTextSize.evaluate(a,{},s),y=(u.layoutIconSize.evaluate(a,{},s),{horizontal:{},vertical:void 0}),g=a.text;let _,v=[0,0];if(g){const n=g.toString(),u=24*l.get("text-letter-spacing").evaluate(a,{},s),p=er(n)?u:0,_=l.get("text-anchor").evaluate(a,{},s),b=l.get("text-variable-anchor");if(!b){const t=l.get("text-radial-offset").evaluate(a,{},s);v=t?Fh(_,[24*t,zh]):l.get("text-offset").evaluate(a,{},s).map((t=>24*t))}let M=d?"center":l.get("text-justify").evaluate(a,{},s);const x=l.get("symbol-placement"),w="point"===x?24*l.get("text-max-width").evaluate(a,{},s):0,S=()=>{t.allowVerticalPlacement&&tr(n)&&(y.vertical=rh(g,e,i,r,o,w,c,_,"left",p,v,eh.vertical,!0,x,f,h))};if(!d&&b){const t="auto"===M?b.map((t=>Rh(t))):[M];let n=!1;for(let a=0;a<t.length;a++){const s=t[a];if(!y.horizontal[s])if(n)y.horizontal[s]=y.horizontal[0];else{const t=rh(g,e,i,r,o,w,c,"center",s,p,v,eh.horizontal,!1,x,f,h);t&&(y.horizontal[s]=t,n=1===t.positionedLines.length)}}S()}else{"auto"===M&&(M=Rh(_));const t=rh(g,e,i,r,o,w,c,_,M,p,v,eh.horizontal,!1,x,f,h);t&&(y.horizontal[M]=t),S(),tr(n)&&d&&m&&(y.vertical=rh(g,e,i,r,o,w,c,_,M,p,v,eh.vertical,!1,x,f,h))}}let b=!1;if(a.icon&&a.icon.name){const e=n[a.icon.name];e&&(_=ph(r[a.icon.name],l.get("icon-offset").evaluate(a,{},s),l.get("icon-anchor").evaluate(a,{},s)),b=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&k("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const M=jh(y.horizontal)||y.vertical;t.iconsInText=!!M&&M.iconsInText,(M||_)&&Nh(t,a,y,_,n,u,f,0,v,b,s)}a&&t.generateCollisionDebugBuffers(o,t.collisionBoxArray)}function Rh(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Nh(t,e,i,n,r,a,s,o,l,h,u){let d=a.textMaxSize.evaluate(e,{},u);void 0===d&&(d=s);const m=t.layers[0].layout,p=m.get("icon-offset").evaluate(e,{},u),f=jh(i.horizontal),y=s/24,g=t.tilePixelRatio*y,_=t.tilePixelRatio*d/24,v=t.tilePixelRatio*m.get("symbol-spacing"),b=m.get("text-padding")*t.tilePixelRatio,M=m.get("icon-padding")*t.tilePixelRatio,x=c(m.get("text-max-angle")),w="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),S="map"===m.get("icon-rotation-alignment")&&"point"!==m.get("symbol-placement"),A=m.get("symbol-placement"),T=v/2,C=m.get("icon-text-fit");let I;n&&"none"!==C&&(t.allowVerticalPlacement&&i.vertical&&(I=fh(n,i.vertical,C,m.get("icon-text-fit-padding"),p,y)),f&&(n=fh(n,f,C,m.get("icon-text-fit-padding"),p,y)));const P=(o,c)=>{c.x<0||c.x>=8192||c.y<0||c.y>=8192||function(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b,M,x,w,S){const A=t.addToLineVertexArray(e,i);let T,C,I,P,E,D,L,z=0,F=0,O=0,R=0,N=-1,B=-1;const j={};let H=_a(""),U=0,V=0;if(void 0===o._unevaluatedLayout.getValue("text-radial-offset")?[U,V]=o.layout.get("text-offset").evaluate(b,{},w).map((t=>24*t)):(U=24*o.layout.get("text-radial-offset").evaluate(b,{},w),V=zh),t.allowVerticalPlacement&&n.vertical){const t=n.vertical;if(p)D=Uh(t),s&&(L=Uh(s));else{const i=o.layout.get("text-rotate").evaluate(b,{},w)+90;I=Hh(l,e,h,u,c,t,0,m,i),s&&(P=Hh(l,e,h,u,c,s,0,g,i))}}if(r){const i=o.layout.get("icon-rotate").evaluate(b,{},w),n="none"!==o.layout.get("icon-text-fit"),a=Sh(r,i,x,n),d=s?Sh(s,i,x,n):void 0;C=Hh(l,e,h,u,c,r,0,g,i),z=4*a.length;const m=t.iconSizeData;let p=null;"source"===m.kind?(p=[128*o.layout.get("icon-size").evaluate(b,{},w)],p[0]>32640&&k(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===m.kind&&(p=[128*M.compositeIconSizes[0].evaluate(b,{},w),128*M.compositeIconSizes[1].evaluate(b,{},w)],(p[0]>32640||p[1]>32640)&&k(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,a,p,v,_,b,!1,e,A.lineStartIndex,A.lineLength,-1,w),N=t.icon.placedSymbolArray.length-1,d&&(F=4*d.length,t.addSymbols(t.icon,d,p,v,_,b,eh.vertical,e,A.lineStartIndex,A.lineLength,-1,w),B=t.icon.placedSymbolArray.length-1)}for(const i in n.horizontal){const r=n.horizontal[i];T||(H=_a(r.text),p?E=Uh(r):T=Hh(l,e,h,u,c,r,0,m,o.layout.get("text-rotate").evaluate(b,{},w)));const s=1===r.positionedLines.length;if(O+=Bh(t,e,r,a,o,p,b,f,A,n.vertical?eh.horizontal:eh.horizontalOnly,s?Object.keys(n.horizontal):[i],j,N,M,w),s)break}n.vertical&&(R+=Bh(t,e,n.vertical,a,o,p,b,f,A,eh.vertical,["vertical"],j,B,M,w));let G=-1;const $=(t,e)=>t?Math.max(t,e):e;G=$(E,G),G=$(D,G),G=$(L,G);const Z=G>-1?1:0;Z&&(G*=S/24),t.glyphOffsetArray.length>=Xh.MAX_GLYPHS&&k("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical||-1,N,B,H,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==I?I:t.collisionBoxArray.length,void 0!==I?I+1:t.collisionBoxArray.length,void 0!==C?C:t.collisionBoxArray.length,void 0!==C?C+1:t.collisionBoxArray.length,P||t.collisionBoxArray.length,P?P+1:t.collisionBoxArray.length,h,O,R,z,F,Z,0,d,U,V,G)}(t,c,o,i,n,r,I,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,g,b,w,l,0,M,S,p,e,a,h,u,s)};if("line"===A)for(const r of wh(e.geometry,0,0,8192,8192)){const e=xh(r,v,x,i.vertical||f,n,24,_,t.overscaling,8192);for(const i of e)f&&Vh(t,f.text,T,i)||P(r,i)}else if("line-center"===A){for(const t of e.geometry)if(t.length>1){const e=Mh(t,x,i.vertical||f,n,24,_);e&&P(t,e)}}else if("Polygon"===e.type)for(const t of Do(e.geometry,0)){const e=Eh(t,16);P(t[0],new yh(e.x,e.y,0))}else if("LineString"===e.type)for(const t of e.geometry)P(t,new yh(t[0].x,t[0].y,0));else if("Point"===e.type)for(const t of e.geometry)for(const e of t)P([e],new yh(e.x,e.y,0))}function Bh(t,e,i,n,a,s,o,l,h,u,c,d,m,p,f){const y=function(t,e,i,n,a,s,o,l){const h=n.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,u=[];for(const t of e.positionedLines)for(const n of t.positionedGlyphs){if(!n.rect)continue;const s=n.rect||{};let c=4,d=!0,m=1,p=0;const f=(a||l)&&n.vertical,y=n.metrics.advance*n.scale/2;if(l&&e.verticalizable){const e=24*(n.scale-1),i=(24-n.metrics.width*n.scale)/2;p=t.lineOffset/2-(n.imageName?-i:e)}if(n.imageName){const t=o[n.imageName];d=t.sdf,m=t.pixelRatio,c=1/m}const g=a?[n.x+y,n.y]:[0,0];let _=a?[0,0]:[n.x+y+i[0],n.y+i[1]-p],v=[0,0];f&&(v=_,_=[0,0]);const b=(n.metrics.left-c)*n.scale-y+_[0],M=(-n.metrics.top-c)*n.scale+_[1],x=b+s.w*n.scale/m,w=M+s.h*n.scale/m,S=new r(b,M),A=new r(x,M),T=new r(b,w),C=new r(x,w);if(f){const t=new r(-y,y- -17),e=-Math.PI/2,i=12-y,a=new r(22-i,-(n.imageName?i:0)),s=new r(...v);S._rotateAround(e,t)._add(a)._add(s),A._rotateAround(e,t)._add(a)._add(s),T._rotateAround(e,t)._add(a)._add(s),C._rotateAround(e,t)._add(a)._add(s)}if(h){const t=Math.sin(h),e=Math.cos(h),i=[e,-t,t,e];S._matMult(i),A._matMult(i),T._matMult(i),C._matMult(i)}const I=new r(0,0),k=new r(0,0);u.push({tl:S,tr:A,bl:T,br:C,tex:s,writingMode:e.writingMode,glyphOffset:g,sectionIndex:n.sectionIndex,isSDF:d,pixelOffsetTL:I,pixelOffsetBR:k,minFontScaleX:0,minFontScaleY:0})}return u}(0,i,l,a,s,o,n,t.allowVerticalPlacement),g=t.textSizeData;let _=null;"source"===g.kind?(_=[128*a.layout.get("text-size").evaluate(o,{},f)],_[0]>32640&&k(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===g.kind&&(_=[128*p.compositeTextSizes[0].evaluate(o,{},f),128*p.compositeTextSizes[1].evaluate(o,{},f)],(_[0]>32640||_[1]>32640)&&k(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,y,_,l,s,o,u,e,h.lineStartIndex,h.lineLength,m,f);for(const e of c)d[e]=t.text.placedSymbolArray.length-1;return 4*y.length}function jh(t){for(const e in t)return t[e];return null}function Hh(t,e,i,n,a,s,o,l,h){let u=s.top,d=s.bottom,m=s.left,p=s.right;const f=s.collisionPadding;if(f&&(m-=f[0],u-=f[1],p+=f[2],d+=f[3]),h){const t=new r(m,u),e=new r(p,u),i=new r(m,d),n=new r(p,d),a=c(h);t._rotate(a),e._rotate(a),i._rotate(a),n._rotate(a),m=Math.min(t.x,e.x,i.x,n.x),p=Math.max(t.x,e.x,i.x,n.x),u=Math.min(t.y,e.y,i.y,n.y),d=Math.max(t.y,e.y,i.y,n.y)}return t.emplaceBack(e.x,e.y,m,u,p,d,l,i,n,a),t.length-1}function Uh(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Vh(t,e,i,n){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(n.dist(t[e])<i)return!0}else r[e]=[];return r[e].push(n),!1}const Gh=Jo.VectorTileFeature.types,$h=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zh(t,e,i,n,r,a,s,o,l,h,u,c,d){const m=o?Math.min(32640,Math.round(o[0])):0,p=o?Math.min(32640,Math.round(o[1])):0;t.emplaceBack(e,i,Math.round(32*n),Math.round(32*r),a,s,(m<<1)+(l?1:0),p,16*h,16*u,256*c,256*d)}function qh(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function Yh(t){for(const e of t.sections)if(or(e.text))return!0;return!1}class Wh{constructor(t){this.layoutVertexArray=new Vr,this.indexArray=new Jr,this.programConfigurations=t,this.segments=new Ua,this.dynamicLayoutVertexArray=new Gr,this.opacityVertexArray=new $r,this.placedSymbolArray=new la}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,i,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gl.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,_l.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,$h,!0),this.opacityVertexBuffer.itemSize=1),(i||n)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qn("SymbolBuffers",Wh);class Jh{constructor(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new Ua,this.collisionVertexArray=new Wr,this.collisionVertexArrayExt=new Gr}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,vl.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,bl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}qn("CollisionBuffers",Jh);class Xh{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fs([]),this.placementViewportMatrix=fs([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wl(this.zoom,e["text-size"]),this.iconSizeData=wl(this.zoom,e["icon-size"]);const i=this.layers[0].layout,n=i.get("symbol-sort-key"),r=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((t=>eh[t]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID}createArrays(){this.text=new Wh(new Oa(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Wh(new Oa(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new ca,this.lineVertexArray=new da,this.symbolInstances=new ua}calculateGlyphDependencies(t,e,i,n,r){for(let a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(i||n)&&r){const i=Il[t.charAt(a)];i&&(e[i.charCodeAt(0)]=!0)}}populate(t,e,i){const n=this.layers[0],r=n.layout,a=r.get("text-font"),s=r.get("text-field"),o=r.get("icon-image"),l=("constant"!==s.value.kind||s.value.value instanceof de&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),h="constant"!==o.value.kind||!!o.value.value||Object.keys(o.parameters).length>0,u=r.get("symbol-sort-key");if(this.features=[],!l&&!h)return;const c=e.iconDependencies,d=e.glyphDependencies,m=e.availableImages,p=new gr(this.zoom);for(const{feature:e,id:s,index:o,sourceLayerIndex:f}of t){const t=n._featureFilter.needGeometry,y=Za(e,t);if(!n._featureFilter.filter(p,y,i))continue;let g,_;if(t||(y.geometry=$a(e)),l){const t=n.getValueAndResolveTokens("text-field",y,i,m),e=de.factory(t);Yh(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===pr()||this.hasRTLText&&yr.isParsed())&&(g=Cl(e,n,y))}if(h){const t=n.getValueAndResolveTokens("icon-image",y,i,m);_=t instanceof me?t:me.fromString(t)}if(!g&&!_)continue;const v=this.sortFeaturesByKey?u.evaluate(y,{},i):void 0;if(this.features.push({id:s,text:g,icon:_,index:o,sourceLayerIndex:f,geometry:y.geometry,properties:e.properties,type:Gh[e.type],sortKey:v}),_&&(c[_.name]=!0),g){const t=a.evaluate(y,{},i).join(","),e="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(eh.vertical)>=0;for(const i of g.sections)if(i.image)c[i.image.name]=!0;else{const n=tr(g.toString()),r=i.fontStack||t,a=d[r]=d[r]||{};this.calculateGlyphDependencies(i.text,a,e,this.allowVerticalPlacement,n)}}}"line"===r.get("symbol-placement")&&(this.features=function(t){const e={},i={},n=[];let r=0;function a(e){n.push(t[e]),r++}function s(t,e,r){const a=i[t];return delete i[t],i[e]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(r[0]),a}function o(t,i,r){const a=e[i];return delete e[i],e[t]=a,n[a].geometry[0].shift(),n[a].geometry[0]=r[0].concat(n[a].geometry[0]),a}function l(t,e,i){const n=i?e[0][e[0].length-1]:e[0][0];return`${t}:${n.x}:${n.y}`}for(let h=0;h<t.length;h++){const u=t[h],c=u.geometry,d=u.text?u.text.toString():null;if(!d){a(h);continue}const m=l(d,c),p=l(d,c,!0);if(m in i&&p in e&&i[m]!==e[p]){const t=o(m,p,c),r=s(m,p,n[t].geometry);delete e[m],delete i[p],i[l(d,n[r].geometry,!0)]=r,n[t].geometry=null}else m in i?s(m,p,c):p in e?o(m,p,c):(a(h),e[m]=r-1,i[p]=r-1)}return n.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const i=this.lineVertexArray.length;if(void 0!==t.segment){let i=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]);const r={};for(let n=t.segment+1;n<e.length;n++)r[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:i},n<e.length-1&&(i+=e[n+1].dist(e[n]));for(let i=t.segment||0;i>=0;i--)r[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:n},i>0&&(n+=e[i-1].dist(e[i]));for(let t=0;t<e.length;t++){const e=r[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(t,e,i,n,r,a,s,o,l,h,u,c){const d=t.indexArray,m=t.layoutVertexArray,p=t.segments.prepareSegment(4*e.length,m,d,this.canOverlap?a.sortKey:void 0),f=this.glyphOffsetArray.length,y=p.vertexLength,g=this.allowVerticalPlacement&&s===eh.vertical?Math.PI/2:0,_=a.text&&a.text.sections;for(let n=0;n<e.length;n++){const{tl:r,tr:s,bl:l,br:h,tex:u,pixelOffsetTL:f,pixelOffsetBR:y,minFontScaleX:v,minFontScaleY:b,glyphOffset:M,isSDF:x,sectionIndex:w}=e[n],S=p.vertexLength,A=M[1];Zh(m,o.x,o.y,r.x,A+r.y,u.x,u.y,i,x,f.x,f.y,v,b),Zh(m,o.x,o.y,s.x,A+s.y,u.x+u.w,u.y,i,x,y.x,f.y,v,b),Zh(m,o.x,o.y,l.x,A+l.y,u.x,u.y+u.h,i,x,f.x,y.y,v,b),Zh(m,o.x,o.y,h.x,A+h.y,u.x+u.w,u.y+u.h,i,x,y.x,y.y,v,b),qh(t.dynamicLayoutVertexArray,o,g),d.emplaceBack(S,S+1,S+2),d.emplaceBack(S+1,S+2,S+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),n!==e.length-1&&w===e[n+1].sectionIndex||t.programConfigurations.populatePaintArrays(m.length,a,a.index,{},c,_&&_[w])}t.placedSymbolArray.emplaceBack(o.x,o.y,f,this.glyphOffsetArray.length-f,y,l,h,o.segment,i?i[0]:0,i?i[1]:0,n[0],n[1],s,0,!1,0,u)}_commitLayoutVertex(t,e,i,n,r){t.emplaceBack(e.x,e.y,i,n,Math.round(r.x),Math.round(r.y))}_addCollisionDebugVertices(t,e,i,n,a){const s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),o=s.vertexLength,l=a.anchorX,h=a.anchorY;for(let t=0;t<4;t++)i.collisionVertexArray.emplaceBack(0,0,0,0);i.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),i.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),i.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),i.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(i.layoutVertexArray,n,l,h,new r(t.x1,t.y1)),this._commitLayoutVertex(i.layoutVertexArray,n,l,h,new r(t.x2,t.y1)),this._commitLayoutVertex(i.layoutVertexArray,n,l,h,new r(t.x2,t.y2)),this._commitLayoutVertex(i.layoutVertexArray,n,l,h,new r(t.x1,t.y2)),s.vertexLength+=4;const u=i.indexArray;u.emplaceBack(o,o+1),u.emplaceBack(o+1,o+2),u.emplaceBack(o+2,o+3),u.emplaceBack(o+3,o),s.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,i,n,r,a){for(let s=n;s<r;s++){const n=i.get(s),r=this.getSymbolInstanceTextSize(t,a,e,s);this._addCollisionDebugVertices(n,r,this.textCollisionBox,n.anchorPoint,a)}}_addIconDebugCollisionBoxes(t,e,i,n,r,a){for(let s=n;s<r;s++){const n=i.get(s),r=this.getSymbolInstanceIconSize(t,e,s);this._addCollisionDebugVertices(n,r,this.iconCollisionBox,n.anchorPoint,a)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Jh(qr,Ml.members,ia),this.iconCollisionBox=new Jh(qr,Ml.members,ia);const i=Al(this.iconSizeData,t),n=Al(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(n,t,e,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(n,t,e,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(i,t,e,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(i,t,e,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}getSymbolInstanceTextSize(t,e,i,n){const r=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:n),a=Sl(this.textSizeData,t,r)/24;return this.tilePixelRatio*a}getSymbolInstanceIconSize(t,e,i){const n=this.icon.placedSymbolArray.get(i),r=Sl(this.iconSizeData,t,n);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(t,e,i){t.emplaceBack(e,-i,-i),t.emplaceBack(e,i,-i),t.emplaceBack(e,i,i),t.emplaceBack(e,-i,i)}_updateTextDebugCollisionBoxes(t,e,i,n,r,a){for(let s=n;s<r;s++){const n=i.get(s),r=this.getSymbolInstanceTextSize(t,a,e,s);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,r,n.padding)}}_updateIconDebugCollisionBoxes(t,e,i,n,r){for(let a=n;a<r;a++){const n=i.get(a),r=this.getSymbolInstanceIconSize(t,e,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,r,n.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const i=Al(this.iconSizeData,t),n=Al(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(n,t,e,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(n,t,e,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(i,t,e,a.iconBoxStartIndex,a.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(i,t,e,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,i,n,r,a,s,o,l){const h={};for(let n=e;n<i;n++){const e=t.get(n);h.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},h.textFeatureIndex=e.featureIndex;break}for(let e=n;e<r;e++){const i=t.get(e);h.verticalTextBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.verticalTextFeatureIndex=i.featureIndex;break}for(let e=a;e<s;e++){const i=t.get(e);h.iconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.iconFeatureIndex=i.featureIndex;break}for(let e=o;e<l;e++){const i=t.get(e);h.verticalIconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.verticalIconFeatureIndex=i.featureIndex;break}return h}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const i=t.placedSymbolArray.get(e),n=i.vertexStartIndex+4*i.numGlyphs;for(let e=i.vertexStartIndex;e<n;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),i=Math.cos(t),n=[],r=[],a=[];for(let t=0;t<this.symbolInstances.length;++t){a.push(t);const s=this.symbolInstances.get(t);n.push(0|Math.round(e*s.anchorX+i*s.anchorY)),r.push(s.featureIndex)}return a.sort(((t,e)=>n[t]-n[e]||r[e]-r[t])),a}addToSortKeyRanges(t,e){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,i)=>{t>=0&&i.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}qn("SymbolBucket",Xh,{omit:["layers","collisionBoxArray","features","compareText"]}),Xh.MAX_GLYPHS=65535,Xh.addDynamicAttributes=qh;const Kh=new Er({"symbol-placement":new Tr(Nt.layout_symbol["symbol-placement"]),"symbol-spacing":new Tr(Nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tr(Nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Cr(Nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tr(Nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tr(Nt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Tr(Nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tr(Nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tr(Nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Cr(Nt.layout_symbol["icon-size"]),"icon-text-fit":new Tr(Nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tr(Nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Cr(Nt.layout_symbol["icon-image"]),"icon-rotate":new Cr(Nt.layout_symbol["icon-rotate"]),"icon-padding":new Tr(Nt.layout_symbol["icon-padding"]),"icon-keep-upright":new Tr(Nt.layout_symbol["icon-keep-upright"]),"icon-offset":new Cr(Nt.layout_symbol["icon-offset"]),"icon-anchor":new Cr(Nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tr(Nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tr(Nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tr(Nt.layout_symbol["text-rotation-alignment"]),"text-field":new Cr(Nt.layout_symbol["text-field"]),"text-font":new Cr(Nt.layout_symbol["text-font"]),"text-size":new Cr(Nt.layout_symbol["text-size"]),"text-max-width":new Cr(Nt.layout_symbol["text-max-width"]),"text-line-height":new Tr(Nt.layout_symbol["text-line-height"]),"text-letter-spacing":new Cr(Nt.layout_symbol["text-letter-spacing"]),"text-justify":new Cr(Nt.layout_symbol["text-justify"]),"text-radial-offset":new Cr(Nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tr(Nt.layout_symbol["text-variable-anchor"]),"text-anchor":new Cr(Nt.layout_symbol["text-anchor"]),"text-max-angle":new Tr(Nt.layout_symbol["text-max-angle"]),"text-writing-mode":new Tr(Nt.layout_symbol["text-writing-mode"]),"text-rotate":new Cr(Nt.layout_symbol["text-rotate"]),"text-padding":new Tr(Nt.layout_symbol["text-padding"]),"text-keep-upright":new Tr(Nt.layout_symbol["text-keep-upright"]),"text-transform":new Cr(Nt.layout_symbol["text-transform"]),"text-offset":new Cr(Nt.layout_symbol["text-offset"]),"text-allow-overlap":new Tr(Nt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Tr(Nt.layout_symbol["text-ignore-placement"]),"text-optional":new Tr(Nt.layout_symbol["text-optional"])});var Qh={paint:new Er({"icon-opacity":new Cr(Nt.paint_symbol["icon-opacity"]),"icon-color":new Cr(Nt.paint_symbol["icon-color"]),"icon-halo-color":new Cr(Nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Cr(Nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Cr(Nt.paint_symbol["icon-halo-blur"]),"icon-translate":new Tr(Nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tr(Nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Cr(Nt.paint_symbol["text-opacity"]),"text-color":new Cr(Nt.paint_symbol["text-color"],{runtimeType:Jt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Cr(Nt.paint_symbol["text-halo-color"]),"text-halo-width":new Cr(Nt.paint_symbol["text-halo-width"]),"text-halo-blur":new Cr(Nt.paint_symbol["text-halo-blur"]),"text-translate":new Tr(Nt.paint_symbol["text-translate"]),"text-translate-anchor":new Tr(Nt.paint_symbol["text-translate-anchor"])}),layout:Kh};class tu{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Zt,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qn("FormatSectionOverride",tu,{omit:["defaultValue"]});class eu extends Ba{constructor(t){super(t,Qh)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const i of t)e.indexOf(i)<0&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,i,n){const r=this.layout.get(t).evaluate(e,{},i,n),a=this._unevaluatedLayout._values[t];return a.isDataDriven()||Qi(a.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,i)=>i in t?String(t[i]):""))}(e.properties,r)}createBucket(t){return new Xh(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of Qh.paint.overridableProperties){if(!eu.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),i=new tu(e),n=new Ki(i,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new en("source",n):new nn("composite",n,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Sr(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&eu.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const i=t.get("text-field"),n=Qh.paint.properties[e];let r=!1;const a=t=>{for(const e of t)if(n.overrides&&n.overrides.hasOverride(e))return void(r=!0)};if("constant"===i.value.kind&&i.value.value instanceof de)a(i.value.value.sections);else if("source"===i.value.kind){const t=e=>{r||(e instanceof _e&&ye(e.value)===te?a(e.value.sections):e instanceof xe?a(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return r}getProgramConfiguration(t){return new Fa(this,t)}}var iu={paint:new Er({"background-color":new Tr(Nt.paint_background["background-color"]),"background-pattern":new kr(Nt.paint_background["background-pattern"]),"background-opacity":new Tr(Nt.paint_background["background-opacity"])})},nu={paint:new Er({"raster-opacity":new Tr(Nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tr(Nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tr(Nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tr(Nt.paint_raster["raster-brightness-max"]),"raster-saturation":new Tr(Nt.paint_raster["raster-saturation"]),"raster-contrast":new Tr(Nt.paint_raster["raster-contrast"]),"raster-resampling":new Tr(Nt.paint_raster["raster-resampling"]),"raster-fade-duration":new Tr(Nt.paint_raster["raster-fade-duration"])})};class ru extends Ba{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var au={paint:new Er({"sky-type":new Tr(Nt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Tr(Nt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Tr(Nt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Tr(Nt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Tr(Nt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Pr(Nt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Tr(Nt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Tr(Nt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Tr(Nt.paint_sky["sky-opacity"])})};function su(t,e,i){const n=Ms(0,0,1),r=Fs(zs());return function(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),l=Math.cos(i);t[0]=n*l-a*o,t[1]=r*l+s*o,t[2]=a*l+n*o,t[3]=s*l-r*o}(r,r,i?-c(t)+Math.PI:c(t)),Os(r,r,-c(e)),ks(n,n,r),Ts(n,n)}const ou={circle:class extends Ba{constructor(t){super(t,ds)}createBucket(t){return new Ya(t)}queryRadius(t){const e=t;return os("circle-radius",this,e)+os("circle-stroke-width",this,e)+ls(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,i,n,r,a,s,o){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&t.queryGeometry.isAboveHorizon)return!1;const h=us(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,t.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),c=l?u*t.pixelToTileUnitsFactor:u;for(const e of n)for(const i of e){const e=i.add(h),n=o&&a.elevation?a.elevation.exaggeration()*o.getElevationAt(e.x,e.y,!0):0,r=l?e:Bs(e,n,s),u=l?t.tilespaceRays.map((t=>Us(t,n))):t.queryGeometry.screenGeometry;let d=c;const m=Ls([],[i.x,i.y,n,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?d*=m[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(d*=a.cameraToCenterDistance/m[3]),Ja(u,r,d))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Fa(this,t)}},heatmap:class extends Ba{createBucket(t){return new Vs(t)}constructor(t){super(t,Ws),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Js({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Fa(this,t)}},hillshade:class extends Ba{constructor(t){super(t,Xs)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(t){return new Fa(this,t)}},fill:class extends Ba{constructor(t){super(t,No)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),i=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(t){return new Fa(this,t)}recalculate(t,e){super.recalculate(t,e);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Oo(t)}queryRadius(){return ls(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,i,n,r,a){return!t.queryGeometry.isAboveHorizon&&Xa(hs(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,t.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends Ba{constructor(t){super(t,nl)}createBucket(t){return new el(t)}queryRadius(){return ls(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Fa(this,t)}queryIntersectsFeature(t,e,i,n,a,s,o){const l=us(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),h=this.paint.get("fill-extrusion-height").evaluate(e,i),u=this.paint.get("fill-extrusion-base").evaluate(e,i),c=t.queryGeometry.screenGeometry,d=function(t,e,i,n,a){const s=[],o=[],l=a[8]*e,h=a[9]*e,u=a[10]*e,c=a[11]*e,d=a[8]*i,m=a[9]*i,p=a[10]*i,f=a[11]*i;for(const e of t){const t=[],i=[];for(const s of e){const e=s.x+n.x,o=s.y+n.y,y=a[0]*e+a[4]*o+a[12],g=a[1]*e+a[5]*o+a[13],_=a[2]*e+a[6]*o+a[14],v=a[3]*e+a[7]*o+a[15],b=_+u,M=v+c,x=y+d,w=g+m,S=_+p,A=v+f,T=new r((y+l)/M,(g+h)/M);T.z=b/M,t.push(T);const C=new r(x/A,w/A);C.z=S/A,i.push(C)}s.push(t),o.push(i)}return[s,o]}(n,u,h,l,o);return function(t,e,i){let n=1/0;Xa(i,e)&&(n=al(i,e[0]));for(let r=0;r<e.length;r++){const a=e[r],s=t[r];for(let t=0;t<a.length-1;t++){const e=a[t],r=[e,a[t+1],s[t+1],s[t],e];Wa(i,r)&&(n=Math.min(n,al(i,r)))}}return n!==1/0&&n}(d[0],d[1],c)}},line:class extends Ba{constructor(t){super(t,pl),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ke,this.gradientVersion=(this.gradientVersion+1)%l)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=fl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new dl(t)}getProgramIds(){const t=this.paint.get("line-dasharray"),e=this.paint.get("line-pattern").constantOr(1),i=this.paint.get("line-gradient");return[e?"linePattern":t?"lineSDF":i?"lineGradient":"line"]}getProgramConfiguration(t){return new Fa(this,t)}queryRadius(t){const e=t,i=yl(os("line-width",this,e),os("line-gap-width",this,e)),n=os("line-offset",this,e);return i/2+Math.abs(n)+ls(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,i,n,a,s){if(t.queryGeometry.isAboveHorizon)return!1;const o=hs(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),l=t.pixelToTileUnitsFactor/2*yl(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),h=this.paint.get("line-offset").evaluate(e,i);return h&&(n=function(t,e){const i=[],n=new r(0,0);for(let r=0;r<t.length;r++){const a=t[r],s=[];for(let t=0;t<a.length;t++){const i=a[t-1],r=a[t],o=a[t+1],l=0===t?n:r.sub(i)._unit()._perp(),h=t===a.length-1?n:o.sub(r)._unit()._perp(),u=l._add(h)._unit();u._mult(1/(u.x*h.x+u.y*h.y)),s.push(u._mult(e)._add(r))}i.push(s)}return i}(n,h*t.pixelToTileUnitsFactor)),function(t,e,i){for(let n=0;n<e.length;n++){const r=e[n];if(t.length>=3)for(let e=0;e<r.length;e++)if(rs(t,r[e]))return!0;if(Ka(t,r,i))return!0}return!1}(o,n,l)}isTileClipped(){return!0}},symbol:eu,background:class extends Ba{constructor(t){super(t,iu)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ba{constructor(t){super(t,nu)}getProgramIds(){return["raster"]}},sky:class extends Ba{constructor(t){super(t,au),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Js({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(t,e){const i=this.paint.get("sky-type");if("atmosphere"===i){const i=this.paint.get("sky-atmosphere-sun"),n=!i,r=t.style.light,a=r.properties.get("position");return n&&"viewport"===r.properties.get("anchor")&&k("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?su(a.azimuthal,90-a.polar,e):su(i[0],90-i[1],e)}if("gradient"===i){const t=this.paint.get("sky-gradient-center");return su(t[0],90-t[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}},{HTMLImageElement:lu,HTMLCanvasElement:hu,HTMLVideoElement:uu,ImageData:cu,ImageBitmap:du}=s;class mu{constructor(t,e,i,n){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,n)}update(t,e,i){const{width:n,height:r}=t,a=!(this.size&&this.size[0]===n&&this.size[1]===r||i),{context:s}=this,{gl:o}=s;if(this.useMipmap=Boolean(e&&e.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!e||!1!==e.premultiply)),a)this.size=[n,r],t instanceof lu||t instanceof hu||t instanceof uu||t instanceof cu||du&&t instanceof du?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,n,r,0,this.format,o.UNSIGNED_BYTE,t.data);else{const{x:e,y:a}=i||{x:0,y:0};t instanceof lu||t instanceof hu||t instanceof uu||t instanceof cu||du&&t instanceof du?o.texSubImage2D(o.TEXTURE_2D,0,e,a,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,e,a,n,r,o.RGBA,o.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)}bind(t,e,i){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class pu{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const fu=s.performance;class yu{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},fu.mark(this._marks.start)}finish(){fu.mark(this._marks.end);let t=fu.getEntriesByName(this._marks.measure);return 0===t.length&&(fu.measure(this._marks.measure,this._marks.start,this._marks.end),t=fu.getEntriesByName(this._marks.measure),fu.clearMarks(this._marks.start),fu.clearMarks(this._marks.end),fu.clearMeasures(this._marks.measure)),t}}class gu{constructor(){this.tasks={},this.taskQueue=[],w(["process"],this),this.invoker=new pu(this.process),this.nextId=0}add(t,e){const i=this.nextId++;return this.tasks[i]={fn:t,metadata:e,priority:_u(e),id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}}}process(){D();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let i=0;i<this.taskQueue.length;i++){const n=this.tasks[this.taskQueue[i]];n.priority<e&&(e=n.priority,t=i)}if(null===t)return null;const i=this.taskQueue[t];return this.taskQueue.splice(t,1),i}remove(){this.invoker.remove()}}function _u({type:t,isSymbolTile:e,zoom:i}){return i=i||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-i:"maybePrepare"===t&&e?400-i:500:200-i:100-i}class vu{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof bu?new bu(t.lng,t.lat):bu.convert(t),this}setSouthWest(t){return this._sw=t instanceof bu?new bu(t.lng,t.lat):bu.convert(t),this}extend(t){const e=this._sw,i=this._ne;let n,r;if(t instanceof bu)n=t,r=t;else{if(!(t instanceof vu))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(vu.convert(t)):this.extend(bu.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return e||i?(e.lng=Math.min(n.lng,e.lng),e.lat=Math.min(n.lat,e.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new bu(n.lng,n.lat),this._ne=new bu(r.lng,r.lat)),this}getCenter(){return new bu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new bu(this.getWest(),this.getNorth())}getSouthEast(){return new bu(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:i}=bu.convert(t);let n=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&n}static convert(t){return!t||t instanceof vu?t:new vu(t)}}class bu{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new bu(y(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,i=this.lat*e,n=t.lat*e,r=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(r,1))}toBounds(t=0){const e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new vu(new bu(this.lng-i,this.lat-e),new bu(this.lng+i,this.lat+e))}static convert(t){if(t instanceof bu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new bu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new bu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Mu=2*Math.PI*6371008.8;function xu(t){return Mu*Math.cos(t*Math.PI/180)}function wu(t){return(180+t)/360}function Su(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Au(t,e){return t/xu(e)}function Tu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Cu(t,e){return t*xu(Tu(e))}class Iu{constructor(t,e,i=0){this.x=+t,this.y=+e,this.z=+i}static fromLngLat(t,e=0){const i=bu.convert(t);return new Iu(wu(i.lng),Su(i.lat),Au(e,i.lat))}toLngLat(){return new bu(360*this.x-180,Tu(this.y))}toAltitude(){return Cu(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Mu*(t=Tu(this.y),1/Math.cos(t*Math.PI/180));var t}}function ku(t,e,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class Pu{constructor(t,e,i){this.z=t,this.x=e,this.y=i,this.key=Lu(0,t,t,e,i)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const i=(r=this.y,a=this.z,s=ku(256*(n=this.x),256*(r=Math.pow(2,a)-r-1),a),o=ku(256*(n+1),256*(r+1),a),s[0]+","+s[1]+","+o[0]+","+o[1]);var n,r,a,s,o;const l=function(t,e,i){let n,r="";for(let a=t;a>0;a--)n=1<<a-1,r+=(e&n?1:0)+(i&n?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",i)}getTilePoint(t){const e=Math.pow(2,this.z);return new r(8192*(t.x*e-this.x),8192*(t.y*e-this.y))}getTileVec3(t){const e=Math.pow(2,this.z);return Ms(8192*(t.x*e-this.x),8192*(t.y*e-this.y),Cu(t.z,t.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class Eu{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Lu(t,e.z,e.z,e.x,e.y)}}class Du{constructor(t,e,i,n,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Pu(i,+n,+r),this.key=0===e&&t===i?this.canonical.key:Lu(e,t,i,n,r)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Du(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Du(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return Lu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const i=this.canonical.z-t;return Lu(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Du(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,i=2*this.canonical.x,n=2*this.canonical.y;return[new Du(e,this.wrap,e,i,n),new Du(e,this.wrap,e,i+1,n),new Du(e,this.wrap,e,i,n+1),new Du(e,this.wrap,e,i+1,n+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Du(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Du(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Eu(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Iu(t.x-this.wrap,t.y))}getTileVec3(t){return this.canonical.getTileVec3(new Iu(t.x-this.wrap,t.y,t.z))}}function Lu(t,e,i,n,r){const a=1<<Math.min(i,22);let s=a*(r%a)+n%a;return t&&i<22&&(s+=a*a*((t<0?-2*t-1:2*t)%(1<<2*(22-i)))),16*(32*s+i)+(e-i)}qn("CanonicalTileID",Pu),qn("OverscaledTileID",Du,{omit:["posMatrix"]});class zu{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class Fu{constructor(t,e,i,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=n,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}var Ou=Or([{name:"a_pos",type:"Int16",components:2}]);class Ru{constructor(t,e,i){this.tileID=t,this.uid=b(),this.uses=0,this.tileSize=e,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const e=t+this.timeAdded;e<V.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const i={};if(!e)return i;for(const n of t){const t=n.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){n.layers=t,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)i[e.id]=n}}return i}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof Xh){if(this.hasSymbolBuckets=!0,!i)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof Xh&&e.hasRTLText){this.hasRTLText=!0,yr.isLoading()||yr.isLoaded()||"deferred"!==pr()||fr();break}}this.queryPadding=0;for(const t in this.buckets){const i=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(i))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new sa}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const i=this.buckets[e];i.uploadPending()&&i.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mu(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mu(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,i,n,r,a,s,o){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:s,transform:a,params:r},t,e,i):{}}querySourceFeatures(t,e){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const n=i.loadVTLayers(),r=e?e.sourceLayer:"",a=n._geojsonTileLayer||n[r];if(!a)return;const s=pn(e&&e.filter),{z:o,x:l,y:h}=this.tileID.canonical,u={z:o,x:l,y:h};for(let e=0;e<a.length;e++){const n=a.feature(e);if(s.needGeometry){const t=Za(n,!0);if(!s.filter(new gr(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!s.filter(new gr(this.tileID.overscaledZ),n))continue;const c=i.getId(n,r),d=new Fu(n,o,l,h,c);d.tile=u,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=L(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let i=!1;if(this.expirationTime>t)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{const n=this.expirationTime-e;n?this.expirationTime=t+Math.max(n,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const n in this.buckets){if(!e.style.hasLayer(n))continue;const r=this.buckets[n],a=r.layers[0].sourceLayer||"_geojsonTileLayer",s=i[a],o=t[a];if(!s||!o||0===Object.keys(o).length)continue;r.update(o,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<V.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=V.now()+t}setDependencies(t,e){const i={};for(const t of e)i[t]=!0;this.dependencies[t]=i}hasDependency(t,e){for(const i of t){const t=this.dependencies[i];if(t)for(const i of e)if(t[i])return!0}return!1}clearQueryDebugViz(){}}class Nu{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,i){const n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},_(this.stateChanges[t][n],i),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==n&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(const e in this.state[t][n])i[e]||(this.deletedStates[t][n][e]=null)}else for(const e in i)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][e]&&delete this.deletedStates[t][n][e]}removeFeatureState(t,e,i){if(null===this.deletedStates[t])return;const n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(i in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][i]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}getState(t,e){const i=String(e),n=_({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const i=this.deletedStates[t][e];if(null===i)return{};for(const t in i)delete n[t]}return n}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const i={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const e={};for(const i in this.stateChanges[t])this.state[t][i]||(this.state[t][i]={}),_(this.state[t][i],this.stateChanges[t][i]),e[i]=this.state[t][i];i[t]=e}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const e={};if(null===this.deletedStates[t])for(const i in this.state[t])e[i]={},this.state[t][i]={};else for(const i in this.deletedStates[t]){if(null===this.deletedStates[t][i])this.state[t][i]={};else for(const e of Object.keys(this.deletedStates[t][i]))delete this.state[t][i][e];e[i]=this.state[t][i]}i[t]=i[t]||{},_(i[t],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const n in t)t[n].setFeatureState(i,e)}}class Bu{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const i=this.toIdx(t,e);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function ju(t,e,i,n){let r=0,a=Number.MAX_VALUE;for(let s=0;s<3;s++)if(Math.abs(n[s])<1e-15){if(i[s]<t[s]||i[s]>e[s])return null}else{const o=1/n[s];let l=(t[s]-i[s])*o,h=(e[s]-i[s])*o;if(l>h){const t=l;l=h,h=t}if(l>r&&(r=l),h<a&&(a=h),r>a)return null}return r}function Hu(t,e,i,n,r,a,s,o,l,h,u){const c=n-t,d=r-e,m=a-i,p=s-t,f=o-e,y=l-i,g=u[1]*y-u[2]*f,_=u[2]*p-u[0]*y,v=u[0]*f-u[1]*p,b=c*g+d*_+m*v;if(Math.abs(b)<1e-15)return null;const M=1/b,x=h[0]-t,w=h[1]-e,S=h[2]-i,A=(x*g+w*_+S*v)*M;if(A<0||A>1)return null;const T=w*m-S*d,C=S*c-x*m,I=x*d-w*c,k=(u[0]*T+u[1]*C+u[2]*I)*M;return k<0||A+k>1?null:(p*T+f*C+y*I)*M}function Uu(t,e,i){return(t-e)/(i-e)}function Vu(t,e,i,n,r,a,s,o,l){const h=1<<i,u=a-n,c=s-r,d=(t+1)/h*u+n,m=(e+0)/h*c+r,p=(e+1)/h*c+r;o[0]=(t+0)/h*u+n,o[1]=m,l[0]=d,l[1]=p}class Gu{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),i=[];let n=Math.ceil(Math.pow(2,e));const r=1/n,a=(t,e,i,n,r)=>{const a=n?1:0,s=(t+1)*i-a,o=e*i,l=(e+1)*i-a;r[0]=t*i,r[1]=o,r[2]=s,r[3]=l};let s=new Bu(n);const o=[];for(let e=0;e<n*n;e++){a(e%n,Math.floor(e/n),r,!1,o);const i=Zu(o[0],o[1],t),l=Zu(o[2],o[1],t),h=Zu(o[2],o[3],t),u=Zu(o[0],o[3],t);s.minimums.push(Math.min(i,l,h,u)),s.maximums.push(Math.max(i,l,h,u)),s.leaves.push(1)}for(i.push(s),n/=2;n>=1;n/=2){const t=i[i.length-1];s=new Bu(n);for(let e=0;e<n*n;e++){a(e%n,Math.floor(e/n),2,!0,o);const i=t.getElevation(o[0],o[1]),r=t.getElevation(o[2],o[1]),l=t.getElevation(o[2],o[3]),h=t.getElevation(o[0],o[3]),u=t.isLeaf(o[0],o[1]),c=t.isLeaf(o[2],o[1]),d=t.isLeaf(o[2],o[3]),m=t.isLeaf(o[0],o[3]),p=Math.min(i.min,r.min,l.min,h.min),f=Math.max(i.max,r.max,l.max,h.max),y=u&&c&&d&&m;s.maximums.push(f),s.minimums.push(p),s.leaves.push(f-p<=5&&y?1:0)}i.push(s)}return i}(this.dem),i=e.length-1,n=e[i];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(e,0,0,i,0)}raycastRoot(t,e,i,n,r,a,s=1){return ju([t,e,-100],[i,n,this.maximums[0]*s],r,a)}raycast(t,e,i,n,r,a,s=1){if(!this.nodeCount)return null;const o=this.raycastRoot(t,e,i,n,r,a,s);if(null==o)return null;const l=[],h=[],u=[],c=[],d=[{idx:0,t:o,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:o,t:m,nodex:p,nodey:f,depth:y}=d.pop();if(this.leaves[o]){Vu(p,f,y,t,e,i,n,u,c);const o=1<<y,l=(p+0)/o,h=(p+1)/o,d=(f+0)/o,g=(f+1)/o,_=Zu(l,d,this.dem)*s,v=Zu(h,d,this.dem)*s,b=Zu(h,g,this.dem)*s,M=Zu(l,g,this.dem)*s,x=Hu(u[0],u[1],_,c[0],u[1],v,c[0],c[1],b,r,a),w=Hu(c[0],c[1],b,u[0],c[1],M,u[0],u[1],_,r,a),S=Math.min(null!==x?x:Number.MAX_VALUE,null!==w?w:Number.MAX_VALUE);if(S!==Number.MAX_VALUE)return S;{const t=As([],r,a,m);if($u(_,v,M,b,Uu(t[0],u[0],c[0]),Uu(t[1],u[1],c[1]))>=t[2])return m}continue}let g=0;for(let d=0;d<this._siblingOffset.length;d++){Vu((p<<1)+this._siblingOffset[d][0],(f<<1)+this._siblingOffset[d][1],y+1,t,e,i,n,u,c),u[2]=-100,c[2]=this.maximums[this.childOffsets[o]+d]*s;const m=ju(u,c,r,a);if(null!=m){const t=m;l[d]=t;let e=!1;for(let i=0;i<g&&!e;i++)t>=l[h[i]]&&(h.splice(i,0,d),e=!0);e||(h[g]=d),g++}}for(let t=0;t<g;t++){const e=h[t];d.push({idx:this.childOffsets[o]+e,t:l[e],nodex:(p<<1)+this._siblingOffset[e][0],nodey:(f<<1)+this._siblingOffset[e][1],depth:y+1})}}return null}_addNode(t,e,i){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,i,n,r){if(1===t[n].isLeaf(e,i))return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const a=n-1,s=t[a];let o,l=0;for(let t=0;t<this._siblingOffset.length;t++){const n=2*e+this._siblingOffset[t][0],r=2*i+this._siblingOffset[t][1],a=s.getElevation(n,r),h=s.isLeaf(n,r),u=this._addNode(a.min,a.max,h);h&&(l|=1<<t),o||(o=u)}for(let n=0;n<this._siblingOffset.length;n++)l&1<<n||this._construct(t,2*e+this._siblingOffset[n][0],2*i+this._siblingOffset[n][1],a,o+n)}}function $u(t,e,i,n,r,a){return Qe(Qe(t,i,a),Qe(e,n,a),r)}function Zu(t,e,i){const n=i.dim,r=f(t*n-.5,0,n-1),a=f(e*n-.5,0,n-1),s=Math.floor(r),o=Math.floor(a),l=Math.min(s+1,n-1),h=Math.min(o+1,n-1);return $u(i.get(s,o),i.get(l,o),i.get(s,h),i.get(l,h),r-s,a-o)}const qu={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Yu{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,i,n=!1,r=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return k(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const a=this.dim=e.height-2;if(this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox",this.borderReady=n,!n){for(let t=0;t<a;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(a,t)]=this.data[this._idx(a-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,a)]=this.data[this._idx(t,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)],r&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Gu(this)}get(t,e){const i=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[n],i[n+1],i[n+2])}static getUnpackVector(t){return qu[t]}get unpackVector(){return qu[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,i){return(256*t*256+256*e+i)/10-1e4}_unpackTerrarium(t,e,i){return 256*t+e+i/256-32768}static pack(t,e){const i=[0,0,0,0],n=Yu.getUnpackVector(e);let r=Math.floor((t+n[3])/n[2]);return i[2]=r%256,r=Math.floor(r/256),i[1]=r%256,r=Math.floor(r/256),i[0]=r,i}getPixels(){return new Ys({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let n=e*this.dim,r=e*this.dim+this.dim,a=i*this.dim,s=i*this.dim+this.dim;switch(e){case-1:n=r-1;break;case 1:r=n+1}switch(i){case-1:a=s-1;break;case 1:s=a+1}const o=-e*this.dim,l=-i*this.dim;for(let e=a;e<s;e++)for(let i=n;i<r;i++)this.data[this._idx(i,e)]=t.data[this._idx(i+o,e+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}qn("DEMData",Yu),qn("DemMinMaxQuadTree",Gu,{omit:["dem"]});class Wu{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,i){const n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const r={value:e,timeout:void 0};if(void 0!==i&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),i)),this.data[n].push(r),this.order.push(n),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const i=t.wrapped().key,n=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][n];return this.data[i].splice(n,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const i in this.data)for(const n of this.data[i])t(n.value)||e.push(n);for(const t of e)this.remove(t.value.tileID,t)}}class Ju{constructor(t,e,i){this.context=t;const n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ku{constructor(t,e,i,n){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let i=0;i<this.attributes.length;i++){const n=e.attributes[this.attributes[i].name];void 0!==n&&t.enableVertexAttribArray(n)}}setVertexAttribPointers(t,e,i){for(let n=0;n<this.attributes.length;n++){const r=this.attributes[n],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[Xu[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Qu{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class tc extends Qu{getDefault(){return he.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ec extends Qu{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class ic extends Qu{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class nc extends Qu{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class rc extends Qu{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class ac extends Qu{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class sc extends Qu{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class oc extends Qu{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class lc extends Qu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class hc extends Qu{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class uc extends Qu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class cc extends Qu{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class dc extends Qu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class mc extends Qu{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class pc extends Qu{getDefault(){return he.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class fc extends Qu{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class yc extends Qu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class gc extends Qu{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class _c extends Qu{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class vc extends Qu{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class bc extends Qu{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Mc extends Qu{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class xc extends Qu{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class wc extends Qu{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Sc extends Qu{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Ac extends Qu{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Tc extends Qu{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Cc extends Qu{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class Ic extends Qu{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class kc extends Qu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Pc extends Qu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ec extends Qu{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class Dc extends Ec{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Lc extends Ec{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class zc{constructor(t,e,i,n){this.context=t,this.width=e,this.height=i;const r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Dc(t,r),n&&(this.depthAttachment=new Lc(t,r))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class Fc{constructor(t,e,i){this.func=t,this.mask=e,this.range=i}}Fc.ReadOnly=!1,Fc.ReadWrite=!0,Fc.disabled=new Fc(519,Fc.ReadOnly,[0,1]);class Oc{constructor(t,e,i,n,r,a){this.test=t,this.ref=e,this.mask=i,this.fail=n,this.depthFail=r,this.pass=a}}Oc.disabled=new Oc({func:519,mask:0},0,0,7680,7680,7680);class Rc{constructor(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i}}Rc.Replace=[1,0],Rc.disabled=new Rc(Rc.Replace,he.transparent,[!1,!1,!1,!1]),Rc.unblended=new Rc(Rc.Replace,he.transparent,[!0,!0,!0,!0]),Rc.alphaBlended=new Rc([1,771],he.transparent,[!0,!0,!0,!0]);class Nc{constructor(t,e,i){this.enable=t,this.mode=e,this.frontFace=i}}Nc.disabled=new Nc(!1,1029,2305),Nc.backCCW=new Nc(!0,1029,2305),Nc.backCW=new Nc(!0,1029,2304),Nc.frontCW=new Nc(!0,1028,2304),Nc.frontCCW=new Nc(!0,1028,2305);class Bc extends Rt{constructor(t,e,i){super(),this.id=t,this._onlySymbols=i,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new Wu(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nu}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}}getIds(){return g(this._tiles).map((t=>t.tileID)).sort(jc).map((t=>t.key))}getRenderableIds(t){const e=[];for(const i in this._tiles)this._isIdRenderable(+i,t)&&e.push(this._tiles[i]);return t?e.sort(((t,e)=>{const i=t.tileID,n=e.tileID,a=new r(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),s=new r(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-n.overscaledZ||s.y-a.y||s.x-a.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(jc).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))}_tileLoaded(t,e,i,n){if(n)return t.state="errored",void(404!==n.status?this._source.fire(new Ot(n,{tile:t})):this.update(this.transform));t.timeAdded=V.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Ft("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let n=0;n<e.length;n++){const r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);i(t,e),i(e,t)}}function i(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let i=e.tileID.canonical.x-t.tileID.canonical.x;const n=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===i&&0===n||Math.abs(n)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,n),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,i,n){for(const r in this._tiles){let a=this._tiles[r];if(n[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>i)continue;let s=a.tileID;for(;a&&a.tileID.overscaledZ>e+1;){const t=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[t.key],a&&a.hasData()&&(s=t)}let o=s;for(;o.overscaledZ>e;)if(o=o.scaledTo(o.overscaledZ-1),t[o.key]){n[s.key]=s;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(let i=t.overscaledZ-1;i>=e;i--){const e=t.scaledTo(i),n=this._getLoadedTile(e);if(n)return n}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const i=Math.ceil(t.width/e)+1,n=Math.ceil(t.height/e)+1,r=Math.floor(i*n*5),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(a)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const i in this._tiles){const n=this._tiles[i];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),t[n.tileID.key]=n}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(t,e,i){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!i)return;let n;this.updateCacheSize(t,e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new Du(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(n=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!!this.transform.elevation&&!this.usedForTerrain}),this._source.hasTile&&(n=n.filter((t=>this._source.hasTile(t))))):n=[];const r=this._updateRetainedTiles(n);if(Hc(this._source.type)&&0!==n.length){const t={},e={},i=Object.keys(r);for(const n of i){const i=r[n],a=this._tiles[n];if(!a||a.fadeEndTime&&a.fadeEndTime<=V.now())continue;const s=this.findLoadedParent(i,Math.max(i.overscaledZ-Bc.maxOverzooming,this._source.minzoom));s&&(this._addTile(s.tileID),t[s.tileID.key]=s.tileID),e[n]=i}const a=n[n.length-1].overscaledZ;for(const t in this._tiles){const i=this._tiles[t];if(r[t]||!i.hasData())continue;let n=i.tileID;for(;n.overscaledZ>a;){n=n.scaledTo(n.overscaledZ-1);const a=this._tiles[n.key];if(a&&a.hasData()&&e[n.key]){r[t]=i.tileID;break}}}for(const e in t)r[e]||(this._coveredTiles[e]=!0,r[e]=t[e])}for(const t in r)this._tiles[t].clearFadeHold();const a=function(t,e){const i=[];for(const n in t)n in e||i.push(n);return i}(this._tiles,r);for(const t of a){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+t)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const i={},n=t[t.length-1].overscaledZ,r=t[0].overscaledZ,a=Math.max(r-Bc.maxOverzooming,this._source.minzoom),s=Math.max(r+Bc.maxUnderzooming,this._source.minzoom),o={};for(const i of t){const t=this._addTile(i);e[i.key]=i,t.hasData()||n<this._source.maxzoom&&(o[i.key]=i)}this._retainLoadedChildren(o,n,s,e);for(const n of t){let t=this._tiles[n.key];if(t.hasData())continue;if(n.canonical.z>=this._source.maxzoom){const t=n.children(this._source.maxzoom)[0],i=this.getTile(t);if(i&&i.hasData()){e[t.key]=t;continue}}else{const t=n.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let r=t.wasRequested();for(let s=n.overscaledZ-1;s>=a;--s){const a=n.scaledTo(s);if(i[a.key])break;if(i[a.key]=!0,t=this.getTile(a),!t&&r&&(t=this._addTile(a)),t&&(e[a.key]=a,r=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let i,n=this._tiles[t].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){i=this._loadedParentTiles[n.key];break}e.push(n.key);const t=n.scaledTo(n.overscaledZ-1);if(i=this._getLoadedTile(t),i)break;n=t}for(const t of e)this._loadedParentTiles[t]=i}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const i=Boolean(e);return i||(e=new Ru(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,i||this._source.fire(new Ft("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),i))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._cache.reset()}tilesIn(t,e,i){const n=[],r=this.transform;if(!r)return n;for(const a in this._tiles){const s=this._tiles[a];if(i&&s.clearQueryDebugViz(),s.holdingForFade())continue;const o=t.containsTile(s,r,e);o&&n.push(o)}return n}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.posMatrix=this.transform.calculatePosMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(Hc(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=V.now())return!0}return!1}setFeatureState(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)}removeFeatureState(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,i){const n=this._tiles[t];n&&n.setDependencies(e,i)}reloadTilesForDependencies(t,e){for(const i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(+i,"reloading");this._cache.filter((i=>!i.hasDependency(t,e)))}}function jc(t,e){const i=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Hc(t){return"raster"===t||"image"===t||"video"===t}Bc.maxOverzooming=10,Bc.maxUnderzooming=3;class Uc{constructor(t,e,i){this._dem=t,this._scale=e,this._offset=i}static create(t,e,i){const n=i||t.findDEMTileFor(e);if(!n||!n.dem)return;const r=n.dem,a=n.tileID,s=1<<e.canonical.z-a.canonical.z;return new Uc(r,n.tileSize/8192/s,[(e.canonical.x/s-a.canonical.x)*r.dim,(e.canonical.y/s-a.canonical.y)*r.dim])}getElevationAt(t,e,i){const n=t*this._scale+this._offset[0],r=e*this._scale+this._offset[1],a=Math.floor(n),s=Math.floor(r),o=this._dem;return i?Qe(Qe(o.get(a,s),o.get(a,s+1),r-s),Qe(o.get(a+1,s),o.get(a+1,s+1),r-s),n-a):o.get(a,s)}}class Vc{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Un(8192,16,0),this.featureIndexArray=new pa,this.promoteId=e}insert(t,e,i,n,r){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,r);const s=this.grid;for(let t=0;t<e.length;t++){const i=e[t],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<i.length;t++){const e=i[t];n[0]=Math.min(n[0],e.x),n[1]=Math.min(n[1],e.y),n[2]=Math.max(n[2],e.x),n[3]=Math.max(n[3],e.y)}n[0]<8192&&n[1]<8192&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Jo.VectorTile(new El(this.rawTileData)).layers,this.sourceLayerCoder=new zu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,i,n){this.loadVTLayers();const r=t.params||{},a=pn(r.filter),s=t.tileResult,o=t.transform,l=s.bufferedTilespaceBounds,h=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((t,e,i,n)=>as(s.bufferedTilespaceGeometry,t,e,i,n)));h.sort($c);let u=null;o.elevation&&h.length>0&&(u=Uc.create(o.elevation,this.tileID));const c={};let d;for(let o=0;o<h.length;o++){const l=h[o];if(l===d)continue;d=l;const m=this.featureIndexArray.get(l);let p=null;this.loadMatchingFeature(c,m.bucketIndex,m.sourceLayerIndex,m.featureIndex,a,r.layers,r.availableImages,e,i,n,((e,i,n)=>(p||(p=$a(e)),i.queryIntersectsFeature(s,e,n,p,this.z,t.transform,t.pixelPosMatrix,u))))}return c}loadMatchingFeature(t,e,i,n,r,a,s,o,l,h,u){const c=this.bucketLayerIDs[e];if(a&&!function(t,e){for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(a,c))return;const d=this.sourceLayerCoder.decode(i),m=this.vtLayers[d].feature(n);if(r.needGeometry){const t=Za(m,!0);if(!r.filter(new gr(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!r.filter(new gr(this.tileID.overscaledZ),m))return;const p=this.getId(m,d);for(let e=0;e<c.length;e++){const i=c[e];if(a&&a.indexOf(i)<0)continue;const r=o[i];if(!r)continue;let d={};void 0!==p&&h&&(d=h.getState(r.sourceLayer||"_geojsonTileLayer",p));const f=_({},l[i]);f.paint=Gc(f.paint,r.paint,m,d,s),f.layout=Gc(f.layout,r.layout,m,d,s);const y=!u||u(m,r,d);if(!y)continue;const g=new Fu(m,this.z,this.x,this.y,p);g.layer=f;let v=t[i];void 0===v&&(v=t[i]=[]),v.push({featureIndex:n,feature:g,intersectionZ:y})}}lookupSymbolFeatures(t,e,i,n,r,a,s,o){const l={};this.loadVTLayers();const h=pn(r);for(const r of t)this.loadMatchingFeature(l,i,n,r,h,a,s,o,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const i of e)if(t===i)return!0;return!1}getId(t,e){let i=t.id;return this.promoteId&&(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof i&&(i=Number(i))),i}}function Gc(t,e,i,n,r){return A(t,((t,a)=>{const s=e instanceof Ar?e.get(a):null;return s&&s.evaluate?s.evaluate(i,n,r):s}))}function $c(t,e){return e-t}qn("FeatureIndex",Vc,{omit:["rawTileData","sourceLayerCoder"]});class Zc{constructor(t){const e={},i=[];for(const n in t){const r=t[n],a=e[n]={};for(const t in r){const e=r[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const n={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};i.push(n),a[t]={rect:n,metrics:e.metrics}}}const{w:n,h:r}=Kl(i),a=new qs({width:n||1,height:r||1});for(const i in t){const n=t[i];for(const t in n){const r=n[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const s=e[i][t].rect;qs.copy(r.bitmap,a,{x:0,y:0},{x:s.x+1,y:s.y+1},r.bitmap)}}this.image=a,this.positions=e}}qn("GlyphAtlas",Zc);class qc{constructor(t){this.tileID=new Du(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile}parse(t,e,i,n,r){this.status="parsing",this.data=t,this.collisionBoxArray=new sa;const a=new zu(Object.keys(t.layers).sort()),s=new Vc(this.tileID,this.promoteId);s.bucketLayerIDs=[];const o={},l={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},h=e.familiesBySource[this.source];for(const e in h){const n=t.layers[e];if(!n)continue;let r=!1,u=!1;for(const t of h[e])"symbol"===t[0].type?r=!0:u=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!u)continue;1===n.version&&k(`Vector tile source "${this.source}" layer "${e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const c=a.encode(e),d=[];for(let t=0;t<n.length;t++){const i=n.feature(t),r=s.getId(i,e);d.push({feature:i,id:r,index:t,sourceLayerIndex:c})}for(const t of h[e]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(Yc(t,this.zoom,i),(o[e.id]=e.createBucket({index:s.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:c,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(d,l,this.tileID.canonical),s.bucketLayerIDs.push(t.map((t=>t.id))))}}let u,c,d,m;const p={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},f=A(l.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(f).length?n.send("getGlyphs",{uid:this.uid,stacks:f},((t,e)=>{u||(u=t,c=e,v.call(this))}),void 0,void 0,p):c={};const y=Object.keys(l.iconDependencies);y.length?n.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{u||(u=t,d=e,v.call(this))}),void 0,void 0,p):d={};const _=Object.keys(l.patternDependencies);function v(){if(u)return r(u);if(c&&d&&m){const t=new Zc(c),e=new th(d,m);for(const n in o){const r=o[n];r instanceof Xh?(Yc(r.layers,this.zoom,i),Oh(r,c,t.positions,d,e.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):r.hasPattern&&(r instanceof dl||r instanceof Oo||r instanceof el)&&(Yc(r.layers,this.zoom,i),r.addFeatures(l,this.tileID.canonical,e.patternPositions))}this.status="done",r(null,{buckets:g(o).filter((t=>!t.isEmpty())),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:e,glyphMap:this.returnDependencies?c:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null})}}_.length?n.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{u||(u=t,m=e,v.call(this))}),void 0,void 0,p):m={},v.call(this)}}function Yc(t,e,i){const n=new gr(e);for(const e of t)e.recalculate(n,i)}class Wc{constructor(t){this.entries={},this.scheduler=t}request(t,e,i,n){const r=this.entries[t]=this.entries[t]||{callbacks:[]};if(r.result){const[t,i]=r.result;return this.scheduler?this.scheduler.add((()=>{n(t,i)}),e):n(t,i),()=>{}}return r.callbacks.push(n),r.cancel||(r.cancel=i(((i,n)=>{r.result=[i,n];for(const t of r.callbacks)this.scheduler?this.scheduler.add((()=>{t(i,n)}),e):t(i,n);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{r.result||(r.callbacks=r.callbacks.filter((t=>t!==n)),r.callbacks.length||(r.cancel(),delete this.entries[t]))}}}function Jc(t,e,i){const n=JSON.stringify(t.request);return t.data&&(this.deduped.entries[n]={result:[null,t.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const n=At(t.request,((t,n,r,a)=>{t?e(t):n&&e(null,{vectorTile:i?void 0:new Jo.VectorTile(new El(n)),rawData:n,cacheControl:r,expires:a})}));return()=>{n.cancel(),e()}}),e)}t.AUTH_ERR_MSG="NO_ACCESS_TOKEN",t.Aabb=Ns,t.Actor=class{constructor(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.cancelCallbacks={},w(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=D()?t:s,this.scheduler=new gu}send(t,e,i,n,r=!1,a){const s=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=a,this.callbacks[s]=i);const o=F(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:t,hasCallback:!!i,targetMapId:n,mustQueue:r,sourceMapId:this.mapId,data:Jn(e,o)},o),{cancel:()=>{i&&delete this.callbacks[s],this.target.postMessage({id:s,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(t){const e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[i];delete this.cancelCallbacks[i],t&&t.cancel()}else if(D()||e.mustQueue){const t=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add((()=>this.processTask(i,e)),t&&t.metadata||{type:"message"})}else this.processTask(i,e)}processTask(t,e){if("<response>"===e.type){const i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Xn(e.error)):i(null,Xn(e.data)))}else{const i=F(this.globalScope)?void 0:[],n=e.hasCallback?(e,n)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Jn(e):null,data:Jn(n,i)},i)}:t=>{},r=Xn(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,r,n);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],r.source)[t[1]](r,n)}else n(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.AlphaImage=qs,t.CanonicalTileID=Pu,t.Color=he,t.ColorMode=Rc,t.Context=class{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new tc(this),this.clearDepth=new ec(this),this.clearStencil=new ic(this),this.colorMask=new nc(this),this.depthMask=new rc(this),this.stencilMask=new ac(this),this.stencilFunc=new sc(this),this.stencilOp=new oc(this),this.stencilTest=new lc(this),this.depthRange=new hc(this),this.depthTest=new uc(this),this.depthFunc=new cc(this),this.blend=new dc(this),this.blendFunc=new mc(this),this.blendColor=new pc(this),this.blendEquation=new fc(this),this.cullFace=new yc(this),this.cullFaceSide=new gc(this),this.frontFace=new _c(this),this.program=new vc(this),this.activeTexture=new bc(this),this.viewport=new Mc(this),this.bindFramebuffer=new xc(this),this.bindRenderbuffer=new wc(this),this.bindTexture=new Sc(this),this.bindVertexBuffer=new Ac(this),this.bindElementBuffer=new Tc(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Cc(this),this.pixelStoreUnpack=new Ic(this),this.pixelStoreUnpackPremultiplyAlpha=new kc(this),this.pixelStoreUnpackFlipY=new Pc(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Ju(this,t,e)}createVertexBuffer(t,e,i){return new Ku(this,t,e,i)}createRenderbuffer(t,e,i){const n=this.gl,r=n.createRenderbuffer();return this.bindRenderbuffer.set(r),n.renderbufferStorage(n.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,i){return new zc(this,t,e,i)}clear({color:t,depth:e,stencil:i}){const n=this.gl;let r=0;t&&(r|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==i&&(r|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),n.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){o(t.blendFunction,Rc.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}},t.CullFaceMode=Nc,t.DEMData=Yu,t.DataConstantProperty=Tr,t.DedupedRequest=Wc,t.DepthMode=Fc,t.DepthStencilAttachment=class extends Lc{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}},t.EXTENT=8192,t.Elevation=class{getAtPoint(t,e=0){const i=this._source();if(!i)return e;if(t.y<0||t.y>1)return e;const n=i.getSource().maxzoom,r=1<<n,a=Math.floor(t.x),s=t.x-a,o=new Du(n,a,n,Math.floor(s*r),Math.floor(t.y*r)),l=this.findDEMTileFor(o);if(!l||!l.dem)return e;const h=l.dem,u=1<<l.tileID.canonical.z,c=(s*u-l.tileID.canonical.x)*h.dim,d=(t.y*u-l.tileID.canonical.y)*h.dim,m=Math.floor(c),p=Math.floor(d);return this.exaggeration()*Qe(Qe(h.get(m,p),h.get(m,p+1),d-p),Qe(h.get(m+1,p),h.get(m+1,p+1),d-p),c-m)}getAtTileOffset(t,e,i){const n=1<<t.canonical.z;return this.getAtPoint(new Iu(t.wrap+(t.canonical.x+e/8192)/n,(t.canonical.y+i/8192)/n))}getForTilePoints(t,e,i,n){const r=Uc.create(this,t,n);return!!r&&(e.forEach((t=>{t[2]=this.exaggeration()*r.getElevationAt(t[0],t[1],i)})),!0)}getMinMaxForTile(t){const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const i=e.dem.tree,n=e.tileID,r=1<<t.canonical.z-n.canonical.z;let a=t.canonical.x/r-n.canonical.x,s=t.canonical.y/r-n.canonical.y,o=0;for(let e=0;e<t.canonical.z-n.canonical.z&&!i.leaves[o];e++){a*=2,s*=2;const t=2*Math.floor(s)+Math.floor(a);o=i.childOffsets[o]+t,a%=1,s%=1}return{min:this.exaggeration()*i.minimums[o],max:this.exaggeration()*i.maximums[o]}}raycast(t,e,i){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Ot,t.EvaluationParameters=gr,t.Event=Ft,t.Evented=Rt,t.Frustum=Rs,t.ImagePosition=Ql,t.LngLat=bu,t.LngLatBounds=vu,t.MAX_SAFE_INTEGER=l,t.MercatorCoordinate=Iu,t.ONE_EM=24,t.OverscaledTileID=Du,t.Point=r,t.Point$1=r,t.Properties=Er,t.RGBAImage=Ys,t.Ray=class{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,i){const n=Cs(e,this.dir);if(Math.abs(n)<1e-6)return!1;const r=Cs(Es(_s(),t,this.pos),e)/n;return function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]}(i,As(_s(),this.pos,this.dir,r)),!0}},t.RequestManager=class{constructor(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",X,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!K(t))return t;const i=it(t);return i.path=`/styles/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!K(t))return t;const i=it(t);return i.path=`/fonts/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||e)}normalizeSourceURL(t,e){if(!K(t))return t;const i=it(t);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,i,n){const r=it(t);return K(t)?(r.path=`/styles/v1${r.path}/sprite${e}${i}`,this._makeAPIURL(r,this._customAccessToken||n)):(r.path+=`${e}${i}`,nt(r))}normalizeTileURL(t,e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!K(t))return t;const n=it(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||i&&"raster"!==n.authority&&512===i?"@2x":""}${$.supported?".webp":"$1"}`),"raster"===n.authority?n.path=`/${G.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path=`/${G.TILE_URL_VERSION}${n.path}`);const r=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(n.params)||G.ACCESS_TOKEN;return G.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,r)}canonicalizeTileURL(t,e){const i=it(t);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return t;let n="mapbox://";i.path.match(/^\/raster\/v1\//)?n+=`raster/${i.path.replace(`/${G.RASTER_URL_PREFIX}/`,"")}`:n+=`tiles/${i.path.replace(`/${G.TILE_URL_VERSION}/`,"")}`;let r=i.params;return e&&(r=r.filter((t=>!t.match(/^access_token=/)))),r.length&&(n+=`?${r.join("&")}`),n}canonicalizeTileset(t,e){const i=!!e&&K(e),n=[];for(const e of t.tiles||[])tt(e)?n.push(this.canonicalizeTileURL(e,i)):n.push(e);return n}_makeAPIURL(t,e){const i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=it(G.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==n.path&&(t.path=`${n.path}${t.path}`),!G.REQUIRE_ACCESS_TOKEN)return nt(t);if(!(e=e||G.ACCESS_TOKEN))throw new Error(`An API access token is required to use Mapbox GL. ${i}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${i}`);return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push(`access_token=${e}`),nt(t)}},t.RequestPerformance=yu,t.ResourceType=Mt,t.SegmentVector=Ua,t.SourceCache=Bc,t.StencilMode=Oc,t.StructArrayLayout1ui2=na,t.StructArrayLayout2f1f2i16=Yr,t.StructArrayLayout2i4=Nr,t.StructArrayLayout3f12=Gr,t.StructArrayLayout3ui6=Jr,t.StructArrayLayout4i8=Br,t.Texture=mu,t.Tile=Ru,t.Transitionable=br,t.Uniform1f=Sa,t.Uniform1i=class extends wa{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends wa{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends wa{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=Aa,t.UniformColor=Ta,t.UniformMatrix3f=class extends wa{constructor(t,e){super(t,e),this.current=Ia}set(t){for(let e=0;e<9;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix3fv(this.location,!1,t);break}}},t.UniformMatrix4f=class extends wa{constructor(t,e){super(t,e),this.current=Ca}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=Eu,t.ValidationError=Bt,t.VectorTileWorkerSource=class{constructor(t,e,i,n){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=n||Jc,this.loading={},this.loaded={},this.deduped=new Wc(t.scheduler)}loadTile(t,e){const i=t.uid,n=!!(t&&t.request&&t.request.collectResourceTiming)&&new yu(t.request),r=this.loading[i]=new qc(t);r.abort=this.loadVectorData(t,((t,a)=>{const s=!this.loading[i];if(delete this.loading[i],s||t||!a)return r.status="done",s||(this.loaded[i]=r),e(t);const o=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl);const h={};if(n){const t=n.finish();t&&(h.resourceTiming=JSON.parse(JSON.stringify(t)))}r.vectorTile=a.vectorTile||new Jo.VectorTile(new El(o)),r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,i)=>{if(t||!i)return e(t);e(null,_({rawTileData:o.slice(0)},i,l,h))})),this.loaded=this.loaded||{},this.loaded[i]=r}))}reloadTile(t,e){const i=this.loaded,n=t.uid,r=this;if(i&&i[n]){const a=i[n];a.showCollisionBoxes=t.showCollisionBoxes,a.enableTerrain=!!t.enableTerrain;const s=(t,i)=>{const n=a.reloadCallback;n&&(delete a.reloadCallback,a.parse(a.vectorTile,r.layerIndex,this.availableImages,r.actor,n)),e(t,i)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}abortTile(t,e){const i=t.uid,n=this.loading[i];n&&(n.abort&&n.abort(),delete this.loading[i]),e()}removeTile(t,e){const i=this.loaded,n=t.uid;i&&i[n]&&delete i[n],e()}},t.WritingMode=eh,t.ZoomHistory=Kn,t.add=xs,t.addDynamicAttributes=qh,t.altitudeFromMercatorZ=Cu,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);let n=t.length;const r=new Array(t.length);let a=null;t.forEach(((t,s)=>{e(t,((t,e)=>{t&&(a=t),r[s]=e,0==--n&&i(a,r)}))}))},t.bezier=m,t.bindAll=w,t.browser=V,t.bufferConvexPolygon=function(t,e){const i=[];for(let n=0;n<t.length;n++){const r=y(n-1,-1,t.length-1),a=y(n+1,-1,t.length-1),s=t[n],o=t[a],l=t[r].sub(s).unit(),h=o.sub(s).unit(),u=h.angleWithSep(l.x,l.y),c=l.add(h).unit().mult(-1*e/Math.sin(u/2));i.push(s.add(c))}return i},t.cacheEntryPossiblyAdded=function(t){vt++,vt>ft&&(t.getActor().send("enforceCacheSizeLimit",pt),vt=0)},t.clamp=f,t.clearTileCache=function(t){const e=s.caches.delete("mapbox-tiles");t&&e.catch(t).then((()=>t()))},t.clipLine=wh,t.clone=function(t){var e=new ms(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=C,t.collisionCircleLayout=xl,t.config=G,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new ms(16);return ms!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=ps,t.create$2=function(){var t=new ms(4);return ms!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=tn,t.createLayout=Or,t.createStyleLayer=function(t){return"custom"===t.type?new ru(t):new ou[t.type](t)},t.cross=Is,t.deepEqual=o,t.degToRad=c,t.div=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},t.dot=Cs,t.ease=p,t.easeCubicInOut=d,t.emitValidationErrors=Hn,t.endsWith=S,t.enforceCacheSizeLimit=function(t){yt(),dt&&dt.then((e=>{e.keys().then((i=>{for(let n=0;n<i.length-t;n++)e.delete(i[n])}))}))},t.evaluateSizeForFeature=Sl,t.evaluateSizeForZoom=Al,t.evaluateVariableOffset=Fh,t.evented=mr,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.extend=_,t.featureFilter=pn,t.filterObject=T,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i+i,o=n+n,l=r+r,h=i*s,u=n*s,c=n*o,d=r*s,m=r*o,p=r*l,f=a*s,y=a*o,g=a*l;return t[0]=1-c-p,t[1]=u+g,t[2]=d-y,t[3]=0,t[4]=u-g,t[5]=1-h-p,t[6]=m+f,t[7]=0,t[8]=d+y,t[9]=m-f,t[10]=1-h-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=dh,t.getAnchorJustification=Rh,t.getArrayBuffer=At,t.getBounds=function(t){let e=1/0,i=1/0,n=-1/0,a=-1/0;for(const r of t)e=Math.min(e,r.x),i=Math.min(i,r.y),n=Math.max(n,r.x),a=Math.max(a,r.y);return{min:new r(e,i),max:new r(n,a)}},t.getImage=Dt,t.getJSON=function(t,e){return St(_(t,{type:"json"}),e)},t.getMapSessionAPI=ct,t.getRTLTextPluginStatus=pr,t.getReferrer=wt,t.getVideo=function(t,e){const i=s.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(let e=0;e<t.length;e++){const n=s.document.createElement("source");It(t[e])||(i.crossOrigin="Anonymous"),n.src=t[e],i.appendChild(n)}return{cancel:()=>{}}},t.identity=fs,t.identity$1=Fs,t.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],h=e[7],u=e[8],c=e[9],d=e[10],m=e[11],p=e[12],f=e[13],y=e[14],g=e[15],_=i*o-n*s,v=i*l-r*s,b=i*h-a*s,M=n*l-r*o,x=n*h-a*o,w=r*h-a*l,S=u*f-c*p,A=u*y-d*p,T=u*g-m*p,C=c*y-d*f,I=c*g-m*f,k=d*g-m*y,P=_*k-v*I+b*C+M*T-x*A+w*S;return P?(t[0]=(o*k-l*I+h*C)*(P=1/P),t[1]=(r*I-n*k-a*C)*P,t[2]=(f*w-y*x+g*M)*P,t[3]=(d*x-c*w-m*M)*P,t[4]=(l*T-s*k-h*A)*P,t[5]=(i*k-r*T+a*A)*P,t[6]=(y*b-p*w-g*v)*P,t[7]=(u*w-d*b+m*v)*P,t[8]=(s*I-o*T+h*S)*P,t[9]=(n*T-i*I-a*S)*P,t[10]=(p*x-f*b+g*_)*P,t[11]=(c*b-u*x-m*_)*P,t[12]=(o*A-s*C-l*S)*P,t[13]=(i*C-n*A+r*S)*P,t[14]=(f*v-p*M-y*_)*P,t[15]=(u*M-c*v+d*_)*P,t):null},t.isChar=Qn,t.isMapboxURL=K,t.latFromMercatorY=Tu,t.len=Ds,t.length=bs,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.loadVectorTile=Jc,t.makeRequest=St,t.mercatorXfromLng=wu,t.mercatorYfromLat=Su,t.mercatorZfromAltitude=Au,t.mul=gs,t.mul$1=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},t.multiply=ys,t.mvt=Jo,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=Ts,t.normalize$1=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i*i+n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),t[0]=i*s,t[1]=n*s,t[2]=r*s,t[3]=a*s,t},t.number=Qe,t.offscreenCanvasSupported=bt,t.ortho=function(t,e,i,n,r,a,s){var o=1/(e-i),l=1/(n-r),h=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*o,t[13]=(r+n)*l,t[14]=(s+a)*h,t[15]=1,t},t.parseGlyphPBF=function(t){return new El(t).readFields(Wl,[])},t.pbf=El,t.perspective=function(t,e,i,n,r){var a,s=1/Math.tan(e/2);return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+n)*(a=1/(n-r)),t[14]=2*r*n*a):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){const i={};for(let n=0;n<e.length;n++){const r=e[n];r in t&&(i[r]=t[r])}return i},t.plugin=yr,t.polygonIntersectsBox=as,t.polygonIntersectsPolygon=Wa,t.polygonizeBounds=function(t,e,i=0){const n=new r(i,i),a=t.sub(n),s=e.add(n);return[a,new r(s.x,a.y),s,new r(a.x,s.y),a]},t.posAttributes=Ou,t.postMapLoadEvent=ht,t.postTurnstileEvent=ot,t.potpack=Kl,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=function(t){return t*u},t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:hr,pluginURL:ur}),mr.on("pluginStateChange",t),t},t.renderColorRamp=Js,t.rotate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),l=Math.cos(i);return t[0]=n*l+a*o,t[1]=r*l+s*o,t[2]=n*-o+a*l,t[3]=r*-o+s*l,t},t.rotateX=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[4],s=e[5],o=e[6],l=e[7],h=e[8],u=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+h*n,t[5]=s*r+u*n,t[6]=o*r+c*n,t[7]=l*r+d*n,t[8]=h*r-a*n,t[9]=u*r-s*n,t[10]=c*r-o*n,t[11]=d*r-l*n,t},t.rotateX$1=Os,t.rotateY=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],h=e[8],u=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r-h*n,t[1]=s*r-u*n,t[2]=o*r-c*n,t[3]=l*r-d*n,t[8]=a*n+h*r,t[9]=s*n+u*r,t[10]=o*n+c*r,t[11]=l*n+d*r,t},t.rotateZ=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],h=e[4],u=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+h*n,t[1]=s*r+u*n,t[2]=o*r+c*n,t[3]=l*r+d*n,t[4]=h*r-a*n,t[5]=u*r-s*n,t[6]=c*r-o*n,t[7]=d*r-l*n,t},t.rotateZ$1=function(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),l=Math.cos(i);return t[0]=n*l+r*o,t[1]=r*l-n*o,t[2]=a*l+s*o,t[3]=s*l-a*o,t},t.scale=function(t,e,i){var n=i[0],r=i[1],a=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scale$2=Ss,t.scaleAndAdd=As,t.setCacheLimits=function(t,e){pt=t,ft=e},t.setRTLTextPlugin=function(t,e,i=!1){if("deferred"===hr||"loading"===hr||"loaded"===hr)throw new Error("setRTLTextPlugin cannot be called multiple times.");ur=V.resolveURL(t),hr="deferred",lr=e,dr(),i||fr()},t.styleSpec=Nt,t.sub=Es,t.subtract=ws,t.symbolSize=Tl,t.transformMat3=function(t,e,i){var n=e[0],r=e[1],a=e[2];return t[0]=n*i[0]+r*i[3]+a*i[6],t[1]=n*i[1]+r*i[4]+a*i[7],t[2]=n*i[2]+r*i[5]+a*i[8],t},t.transformMat4=Ls,t.transformQuat=ks,t.translate=function(t,e,i){var n,r,a,s,o,l,h,u,c,d,m,p,f=i[0],y=i[1],g=i[2];return e===t?(t[12]=e[0]*f+e[4]*y+e[8]*g+e[12],t[13]=e[1]*f+e[5]*y+e[9]*g+e[13],t[14]=e[2]*f+e[6]*y+e[10]*g+e[14],t[15]=e[3]*f+e[7]*y+e[11]*g+e[15]):(r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],d=e[9],m=e[10],p=e[11],t[0]=n=e[0],t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=l,t[6]=h,t[7]=u,t[8]=c,t[9]=d,t[10]=m,t[11]=p,t[12]=n*f+o*y+c*g+e[12],t[13]=r*f+l*y+d*g+e[13],t[14]=a*f+h*y+m*g+e[14],t[15]=s*f+u*y+p*g+e[15]),t},t.triggerPluginCompletionEvent=cr,t.uniqueId=b,t.validateCustomStyleLayer=function(t){const e=[],i=t.id;return void 0===i&&e.push({message:`layers.${i}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${i}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateLight=Nn,t.validateStyle=Rn,t.values=g,t.vectorTile=Jo,t.version="2.0.0",t.warnOnce=k,t.webpSupported=$,t.window=s,t.wrap=y})),n(0,(function(t){function e(t){const i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){let i="[";for(const n of t)i+=`${e(n)},`;return`${i}]`}const n=Object.keys(t).sort();let r="{";for(let i=0;i<n.length;i++)r+=`${JSON.stringify(n[i])}:${e(t[n[i]])},`;return`${r}}`}function i(i){let n="";for(const r of t.refProperties)n+=`/${e(i[r])}`;return n}class n{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,n){for(const i of e){this._layerConfigs[i.id]=i;const e=this._layers[i.id]=t.createStyleLayer(i);e._featureFilter=t.featureFilter(e.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const t of n)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const n={};for(let r=0;r<t.length;r++){const a=e&&e[t[r].id]||i(t[r]);e&&(e[t[r].id]=a);let s=n[a];s||(s=n[a]=[]),s.push(t[r])}const r=[];for(const t in n)r.push(n[t]);return r}(t.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),i=e[0];if("none"===i.visibility)continue;const n=i.source||"";let r=this.familiesBySource[n];r||(r=this.familiesBySource[n]={});const a=i.sourceLayer||"_geojsonTileLayer";let s=r[a];s||(s=r[a]=[]),s.push(e)}}}const{ImageBitmap:r}=t.window;class a{loadTile(e,i){const{uid:n,encoding:a,rawImageData:s,padding:o,buildQuadTree:l}=e,h=r&&s instanceof r?this.getImageData(s,o):s;i(null,new t.DEMData(n,h,a,o<1,l))}getImageData(e,i){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-i,-i,e.width+2*i,e.height+2*i);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)}}function s(t,e){if(0!==t.length){o(t[0],e);for(var i=1;i<t.length;i++)o(t[i],!e)}}function o(t,e){for(var i=0,n=0,r=t.length,a=r-1;n<r;a=n++)i+=(t[n][0]-t[a][0])*(t[a][1]+t[n][1]);i>=0!=!!e&&t.reverse()}const l=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class h{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const i of this._feature.geometry)e.push([new t.Point$1(i[0],i[1])]);return e}{const e=[];for(const i of this._feature.geometry){const n=[];for(const e of i)n.push(new t.Point$1(e[0],e[1]));e.push(n)}return e}}toGeoJSON(t,e,i){return l.call(this,t,e,i)}}class u{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new h(this._features[t])}}var c=t.vectorTile.VectorTileFeature,d=m;function m(t,e){this.options=e||{},this.features=t,this.length=t.length}function p(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}m.prototype.feature=function(t){return new p(this.features[t],this.options.extent)},p.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var n=e[i],r=[],a=0;a<n.length;a++)r.push(new t.Point$1(n[a][0],n[a][1]));this.geometry.push(r)}return this.geometry},p.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,n=1/0,r=-1/0,a=0;a<t.length;a++)for(var s=t[a],o=0;o<s.length;o++){var l=s[o];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y)}return[e,n,i,r]},p.prototype.toGeoJSON=c.prototype.toGeoJSON;var f=g,y=d;function g(e){var i=new t.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,_,t.layers[i])}(e,i),i.finish()}function _(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,v,n);var r=n.keys;for(i=0;i<r.length;i++)e.writeStringField(3,r[i]);var a=n.values;for(i=0;i<a.length;i++)e.writeMessage(4,S,a[i])}function v(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,b,t),e.writeVarintField(3,i.type),e.writeMessage(4,w,i)}function b(t,e){var i=t.feature,n=t.keys,r=t.values,a=t.keycache,s=t.valuecache;for(var o in i.properties){var l=a[o];void 0===l&&(n.push(o),a[o]=l=n.length-1),e.writeVarint(l);var h=i.properties[o],u=typeof h;"string"!==u&&"boolean"!==u&&"number"!==u&&(h=JSON.stringify(h));var c=u+":"+h,d=s[c];void 0===d&&(r.push(h),s[c]=d=r.length-1),e.writeVarint(d)}}function M(t,e){return(e<<3)+(7&t)}function x(t){return t<<1^t>>31}function w(t,e){for(var i=t.loadGeometry(),n=t.type,r=0,a=0,s=i.length,o=0;o<s;o++){var l=i[o],h=1;1===n&&(h=l.length),e.writeVarint(M(1,h));for(var u=3===n?l.length-1:l.length,c=0;c<u;c++){1===c&&1!==n&&e.writeVarint(M(2,u-1));var d=l[c].x-r,m=l[c].y-a;e.writeVarint(x(d)),e.writeVarint(x(m)),r+=d,a+=m}3===n&&e.writeVarint(M(7,1))}}function S(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function A(t,e,i,n){T(t,i,n),T(e,2*i,2*n),T(e,2*i+1,2*n+1)}function T(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function C(t,e,i,n){const r=t-i,a=e-n;return r*r+a*a}f.fromVectorTileJs=g,f.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var n in t)i[n]=new d(t[n].features,e),i[n].name=n,i[n].version=e.version,i[n].extent=e.extent;return g({layers:i})},f.GeoJSONWrapper=y;const I=t=>t[0],k=t=>t[1];class P{constructor(t,e=I,i=k,n=64,r=Float64Array){this.nodeSize=n,this.points=t;const a=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new a(t.length),o=this.coords=new r(2*t.length);for(let n=0;n<t.length;n++)s[n]=n,o[2*n]=e(t[n]),o[2*n+1]=i(t[n]);!function t(e,i,n,r,a,s){if(a-r<=n)return;const o=r+a>>1;!function t(e,i,n,r,a,s){for(;a>r;){if(a-r>600){const o=a-r+1,l=n-r+1,h=Math.log(o),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(o-u)/o)*(l-o/2<0?-1:1);t(e,i,n,Math.max(r,Math.floor(n-l*u/o+c)),Math.min(a,Math.floor(n+(o-l)*u/o+c)),s)}const o=i[2*n+s];let l=r,h=a;for(A(e,i,r,n),i[2*a+s]>o&&A(e,i,r,a);l<h;){for(A(e,i,l,h),l++,h--;i[2*l+s]<o;)l++;for(;i[2*h+s]>o;)h--}i[2*r+s]===o?A(e,i,r,h):(h++,A(e,i,h,a)),h<=n&&(r=h+1),n<=h&&(a=h-1)}}(e,i,o,r,a,s%2),t(e,i,n,r,o-1,s+1),t(e,i,n,o+1,a,s+1)}(s,o,n,0,s.length-1,0)}range(t,e,i,n){return function(t,e,i,n,r,a,s){const o=[0,t.length-1,0],l=[];let h,u;for(;o.length;){const c=o.pop(),d=o.pop(),m=o.pop();if(d-m<=s){for(let s=m;s<=d;s++)h=e[2*s],u=e[2*s+1],h>=i&&h<=r&&u>=n&&u<=a&&l.push(t[s]);continue}const p=Math.floor((m+d)/2);h=e[2*p],u=e[2*p+1],h>=i&&h<=r&&u>=n&&u<=a&&l.push(t[p]);const f=(c+1)%2;(0===c?i<=h:n<=u)&&(o.push(m),o.push(p-1),o.push(f)),(0===c?r>=h:a>=u)&&(o.push(p+1),o.push(d),o.push(f))}return l}(this.ids,this.coords,t,e,i,n,this.nodeSize)}within(t,e,i){return function(t,e,i,n,r,a){const s=[0,t.length-1,0],o=[],l=r*r;for(;s.length;){const h=s.pop(),u=s.pop(),c=s.pop();if(u-c<=a){for(let r=c;r<=u;r++)C(e[2*r],e[2*r+1],i,n)<=l&&o.push(t[r]);continue}const d=Math.floor((c+u)/2),m=e[2*d],p=e[2*d+1];C(m,p,i,n)<=l&&o.push(t[d]);const f=(h+1)%2;(0===h?i-r<=m:n-r<=p)&&(s.push(c),s.push(d-1),s.push(f)),(0===h?i+r>=m:n+r>=p)&&(s.push(d+1),s.push(u),s.push(f))}return o}(this.ids,this.coords,t,e,i,this.nodeSize)}}const E={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t};class D{constructor(t){this.options=j(Object.create(E),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:i,maxZoom:n,nodeSize:r}=this.options;e&&console.time("total time");const a=`prepare ${t.length} points`;e&&console.time(a),this.points=t;let s=[];for(let e=0;e<t.length;e++)t[e].geometry&&s.push(z(t[e],e));this.trees[n+1]=new P(s,H,U,r,Float32Array),e&&console.timeEnd(a);for(let t=n;t>=i;t--){const i=+Date.now();s=this._cluster(s,t),this.trees[t]=new P(s,H,U,r,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,s.length,+Date.now()-i)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let i=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,r=180;else if(i>r){const t=this.getClusters([i,n,180,a],e),s=this.getClusters([-180,n,r,a],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],o=s.range(R(i),N(a),R(r),N(n)),l=[];for(const t of o){const e=s.points[t];l.push(e.numPoints?F(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),i=this._getOriginZoom(t),n="No cluster with the specified id.",r=this.trees[i];if(!r)throw new Error(n);const a=r.points[e];if(!a)throw new Error(n);const s=this.options.radius/(this.options.extent*Math.pow(2,i-1)),o=r.within(a.x,a.y,s),l=[];for(const e of o){const i=r.points[e];i.parentId===t&&l.push(i.numPoints?F(i):this.points[i.index])}if(0===l.length)throw new Error(n);return l}getLeaves(t,e,i){const n=[];return this._appendLeaves(n,t,e=e||10,i=i||0,0),n}getTile(t,e,i){const n=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:a,radius:s}=this.options,o=s/a,l=(i-o)/r,h=(i+1+o)/r,u={features:[]};return this._addTileFeatures(n.range((e-o)/r,l,(e+1+o)/r,h),n.points,e,i,r,u),0===e&&this._addTileFeatures(n.range(1-o/r,l,1,h),n.points,r,i,r,u),e===r-1&&this._addTileFeatures(n.range(0,l,o/r,h),n.points,-1,i,r,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}_appendLeaves(t,e,i,n,r){const a=this.getChildren(e);for(const e of a){const a=e.properties;if(a&&a.cluster?r+a.point_count<=n?r+=a.point_count:r=this._appendLeaves(t,a.cluster_id,i,n,r):r<n?r++:t.push(e),t.length===i)break}return r}_addTileFeatures(t,e,i,n,r,a){for(const s of t){const t=e[s],o=t.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(t.x*r-i)),Math.round(this.options.extent*(t.y*r-n))]],tags:o?O(t):this.points[t.index].properties};let h;o?h=t.id:this.options.generateId?h=t.index:this.points[t.index].id&&(h=this.points[t.index].id),void 0!==h&&(l.id=h),a.features.push(l)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const i=[],{radius:n,extent:r,reduce:a,minPoints:s}=this.options,o=n/(r*Math.pow(2,e));for(let n=0;n<t.length;n++){const r=t[n];if(r.zoom<=e)continue;r.zoom=e;const l=this.trees[e+1],h=l.within(r.x,r.y,o),u=r.numPoints||1;let c=u;for(const t of h){const i=l.points[t];i.zoom>e&&(c+=i.numPoints||1)}if(c>=s){let t=r.x*u,s=r.y*u,o=a&&u>1?this._map(r,!0):null;const d=(n<<5)+(e+1)+this.points.length;for(const i of h){const n=l.points[i];if(n.zoom<=e)continue;n.zoom=e;const h=n.numPoints||1;t+=n.x*h,s+=n.y*h,n.parentId=d,a&&(o||(o=this._map(r,!0)),a(o,this._map(n)))}r.parentId=d,i.push(L(t/c,s/c,d,c,o))}else if(i.push(r),c>1)for(const t of h){const n=l.points[t];n.zoom<=e||(n.zoom=e,i.push(n))}}return i}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?j({},t.properties):t.properties;const i=this.points[t.index].properties,n=this.options.map(i);return e&&n===i?j({},n):n}}function L(t,e,i,n,r){return{x:t,y:e,zoom:1/0,id:i,parentId:-1,numPoints:n,properties:r}}function z(t,e){const[i,n]=t.geometry.coordinates;return{x:R(i),y:N(n),zoom:1/0,index:e,parentId:-1}}function F(t){return{type:"Feature",id:t.id,properties:O(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),B(t.y)]}};var e}function O(t){const e=t.numPoints,i=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return j(j({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function R(t){return t/360+.5}function N(t){const e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function B(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function j(t,e){for(const i in e)t[i]=e[i];return t}function H(t){return t.x}function U(t){return t.y}function V(t,e,i,n,r,a){var s=r-i,o=a-n;if(0!==s||0!==o){var l=((t-i)*s+(e-n)*o)/(s*s+o*o);l>1?(i=r,n=a):l>0&&(i+=s*l,n+=o*l)}return(s=t-i)*s+(o=e-n)*o}function G(t,e,i,n){var r={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)$(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)$(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)$(t,e[n][r])}(r),r}function $(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function Z(t,e,i,n){if(e.geometry){var r=e.geometry.coordinates,a=e.geometry.type,s=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),o=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===a)q(r,o);else if("MultiPoint"===a)for(var h=0;h<r.length;h++)q(r[h],o);else if("LineString"===a)Y(r,o,s,!1);else if("MultiLineString"===a){if(i.lineMetrics){for(h=0;h<r.length;h++)Y(r[h],o=[],s,!1),t.push(G(l,"LineString",o,e.properties));return}W(r,o,s,!1)}else if("Polygon"===a)W(r,o,s,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(h=0;h<e.geometry.geometries.length;h++)Z(t,{id:l,geometry:e.geometry.geometries[h],properties:e.properties},i,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(h=0;h<r.length;h++){var u=[];W(r[h],u,s,!0),o.push(u)}}t.push(G(l,a,o,e.properties))}}function q(t,e){e.push(J(t[0])),e.push(X(t[1])),e.push(0)}function Y(t,e,i,n){for(var r,a,s=0,o=0;o<t.length;o++){var l=J(t[o][0]),h=X(t[o][1]);e.push(l),e.push(h),e.push(0),o>0&&(s+=n?(r*h-l*a)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(h-a,2))),r=l,a=h}var u=e.length-3;e[2]=1,function t(e,i,n,r){for(var a,s=r,o=n-i>>1,l=n-i,h=e[i],u=e[i+1],c=e[n],d=e[n+1],m=i+3;m<n;m+=3){var p=V(e[m],e[m+1],h,u,c,d);if(p>s)a=m,s=p;else if(p===s){var f=Math.abs(m-o);f<l&&(a=m,l=f)}}s>r&&(a-i>3&&t(e,i,a,r),e[a+2]=s,n-a>3&&t(e,a,n,r))}(e,0,u,i),e[u+2]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function W(t,e,i,n){for(var r=0;r<t.length;r++){var a=[];Y(t[r],a,i,n),e.push(a)}}function J(t){return t/360+.5}function X(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function K(t,e,i,n,r,a,s,o){if(n/=e,a>=(i/=e)&&s<n)return t;if(s<i||a>=n)return null;for(var l=[],h=0;h<t.length;h++){var u=t[h],c=u.geometry,d=u.type,m=0===r?u.minX:u.minY,p=0===r?u.maxX:u.maxY;if(m>=i&&p<n)l.push(u);else if(!(p<i||m>=n)){var f=[];if("Point"===d||"MultiPoint"===d)Q(c,f,i,n,r);else if("LineString"===d)tt(c,f,i,n,r,!1,o.lineMetrics);else if("MultiLineString"===d)it(c,f,i,n,r,!1);else if("Polygon"===d)it(c,f,i,n,r,!0);else if("MultiPolygon"===d)for(var y=0;y<c.length;y++){var g=[];it(c[y],g,i,n,r,!0),g.length&&f.push(g)}if(f.length){if(o.lineMetrics&&"LineString"===d){for(y=0;y<f.length;y++)l.push(G(u.id,d,f[y],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===f.length?(d="LineString",f=f[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===f.length?"Point":"MultiPoint"),l.push(G(u.id,d,f,u.tags))}}}return l.length?l:null}function Q(t,e,i,n,r){for(var a=0;a<t.length;a+=3){var s=t[a+r];s>=i&&s<=n&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}function tt(t,e,i,n,r,a,s){for(var o,l,h=et(t),u=0===r?rt:at,c=t.start,d=0;d<t.length-3;d+=3){var m=t[d],p=t[d+1],f=t[d+2],y=t[d+3],g=t[d+4],_=0===r?m:p,v=0===r?y:g,b=!1;s&&(o=Math.sqrt(Math.pow(m-y,2)+Math.pow(p-g,2))),_<i?v>i&&(l=u(h,m,p,y,g,i),s&&(h.start=c+o*l)):_>n?v<n&&(l=u(h,m,p,y,g,n),s&&(h.start=c+o*l)):nt(h,m,p,f),v<i&&_>=i&&(l=u(h,m,p,y,g,i),b=!0),v>n&&_<=n&&(l=u(h,m,p,y,g,n),b=!0),!a&&b&&(s&&(h.end=c+o*l),e.push(h),h=et(t)),s&&(c+=o)}var M=t.length-3;m=t[M],p=t[M+1],f=t[M+2],(_=0===r?m:p)>=i&&_<=n&&nt(h,m,p,f),M=h.length-3,a&&M>=3&&(h[M]!==h[0]||h[M+1]!==h[1])&&nt(h,h[0],h[1],h[2]),h.length&&e.push(h)}function et(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function it(t,e,i,n,r,a){for(var s=0;s<t.length;s++)tt(t[s],e,i,n,r,a,!1)}function nt(t,e,i,n){t.push(e),t.push(i),t.push(n)}function rt(t,e,i,n,r,a){var s=(a-e)/(n-e);return t.push(a),t.push(i+(r-i)*s),t.push(1),s}function at(t,e,i,n,r,a){var s=(a-i)/(r-i);return t.push(e+(n-e)*s),t.push(a),t.push(1),s}function st(t,e){for(var i=[],n=0;n<t.length;n++){var r,a=t[n],s=a.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)r=ot(a.geometry,e);else if("MultiLineString"===s||"Polygon"===s){r=[];for(var o=0;o<a.geometry.length;o++)r.push(ot(a.geometry[o],e))}else if("MultiPolygon"===s)for(r=[],o=0;o<a.geometry.length;o++){for(var l=[],h=0;h<a.geometry[o].length;h++)l.push(ot(a.geometry[o][h],e));r.push(l)}i.push(G(a.id,s,r,a.tags))}return i}function ot(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function lt(t,e){if(t.transformed)return t;var i,n,r,a=1<<t.z,s=t.x,o=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],h=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<h.length;n+=2)l.geometry.push(ht(h[n],h[n+1],e,a,s,o));else for(n=0;n<h.length;n++){var c=[];for(r=0;r<h[n].length;r+=2)c.push(ht(h[n][r],h[n][r+1],e,a,s,o));l.geometry.push(c)}}return t.transformed=!0,t}function ht(t,e,i,n,r,a){return[Math.round(i*(t*n-r)),Math.round(i*(e*n-a))]}function ut(t,e,i,n,r){for(var a=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},o=0;o<t.length;o++){s.numFeatures++,ct(s,t[o],a,r);var l=t[o].minX,h=t[o].minY,u=t[o].maxX,c=t[o].maxY;l<s.minX&&(s.minX=l),h<s.minY&&(s.minY=h),u>s.maxX&&(s.maxX=u),c>s.maxY&&(s.maxY=c)}return s}function ct(t,e,i,n){var r=e.geometry,a=e.type,s=[];if("Point"===a||"MultiPoint"===a)for(var o=0;o<r.length;o+=3)s.push(r[o]),s.push(r[o+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)dt(s,r,t,i,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(o=0;o<r.length;o++)dt(s,r[o],t,i,"Polygon"===a,0===o);else if("MultiPolygon"===a)for(var l=0;l<r.length;l++){var h=r[l];for(o=0;o<h.length;o++)dt(s,h[o],t,i,!0,0===o)}if(s.length){var u=e.tags||null;if("LineString"===a&&n.lineMetrics){for(var c in u={},e.tags)u[c]=e.tags[c];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var d={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function dt(t,e,i,n,r,a){var s=n*n;if(n>0&&e.size<(r?s:n))i.numPoints+=e.length/3;else{for(var o=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>s)&&(i.numSimplified++,o.push(e[l]),o.push(e[l+1])),i.numPoints++;r&&function(t,e){for(var i=0,n=0,r=t.length,a=r-2;n<r;a=n,n+=2)i+=(t[n]-t[a])*(t[n+1]+t[a+1]);if(i>0===e)for(n=0,r=t.length;n<r/2;n+=2){var s=t[n],o=t[n+1];t[n]=t[r-2-n],t[n+1]=t[r-1-n],t[r-2-n]=s,t[r-1-n]=o}}(o,a),t.push(o)}}function mt(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)Z(i,t.features[n],e,n);else Z(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(t,e){var i=e.buffer/e.extent,n=t,r=K(t,1,-1-i,i,0,-1,2,e),a=K(t,1,1-i,2+i,0,-1,2,e);return(r||a)&&(n=K(t,1,-i,1+i,0,-1,2,e)||[],r&&(n=st(r,1).concat(n)),a&&(n=n.concat(st(a,-1)))),n}(n,e)).length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pt(t,e,i){return 32*((1<<t)*i+e)+t}function ft(t,e){const i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const n=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!n)return e(null,null);const r=new u(n.features);let a=f(r);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:r,rawData:a.buffer})}mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},mt.prototype.splitTile=function(t,e,i,n,r,a,s){for(var o=[t,e,i,n],l=this.options,h=l.debug;o.length;){n=o.pop(),i=o.pop(),e=o.pop(),t=o.pop();var u=1<<e,c=pt(e,i,n),d=this.tiles[c];if(!d&&(h>1&&console.time("creation"),d=this.tiles[c]=ut(t,e,i,n,l),this.tileCoords.push({z:e,x:i,y:n}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var m="z"+e;this.stats[m]=(this.stats[m]||0)+1,this.total++}if(d.source=t,r){if(e===l.maxZoom||e===r)continue;var p=1<<r-e;if(i!==Math.floor(a/p)||n!==Math.floor(s/p))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){h>1&&console.time("clipping");var f,y,g,_,v,b,M=.5*l.buffer/l.extent,x=.5-M,w=.5+M,S=1+M;f=y=g=_=null,v=K(t,u,i-M,i+w,0,d.minX,d.maxX,l),b=K(t,u,i+x,i+S,0,d.minX,d.maxX,l),t=null,v&&(f=K(v,u,n-M,n+w,1,d.minY,d.maxY,l),y=K(v,u,n+x,n+S,1,d.minY,d.maxY,l),v=null),b&&(g=K(b,u,n-M,n+w,1,d.minY,d.maxY,l),_=K(b,u,n+x,n+S,1,d.minY,d.maxY,l),b=null),h>1&&console.timeEnd("clipping"),o.push(f||[],e+1,2*i,2*n),o.push(y||[],e+1,2*i,2*n+1),o.push(g||[],e+1,2*i+1,2*n),o.push(_||[],e+1,2*i+1,2*n+1)}}},mt.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent,a=n.debug;if(t<0||t>24)return null;var s=1<<t,o=pt(t,e=(e%s+s)%s,i);if(this.tiles[o])return lt(this.tiles[o],r);a>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,h=t,u=e,c=i;!l&&h>0;)h--,u=Math.floor(u/2),c=Math.floor(c/2),l=this.tiles[pt(h,u,c)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",h,u,c),a>1&&console.time("drilling down"),this.splitTile(l.source,h,u,c,t,e,i),a>1&&console.timeEnd("drilling down"),this.tiles[o]?lt(this.tiles[o],r):null):null};class yt extends t.VectorTileWorkerSource{constructor(t,e,i,n){super(t,e,i,ft),n&&(this.loadGeoJSON=n)}loadData(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const e=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const n=!!(i&&i.request&&i.request.collectResourceTiming)&&new t.RequestPerformance(i.request);this.loadGeoJSON(i,((r,a)=>{if(r||!a)return e(r);if("object"!=typeof a)return e(new Error(`Input data given to '${i.source}' is not a valid GeoJSON object.`));{!function t(e,i){var n,r=e&&e.type;if("FeatureCollection"===r)for(n=0;n<e.features.length;n++)t(e.features[n],i);else if("GeometryCollection"===r)for(n=0;n<e.geometries.length;n++)t(e.geometries[n],i);else if("Feature"===r)t(e.geometry,i);else if("Polygon"===r)s(e.coordinates,i);else if("MultiPolygon"===r)for(n=0;n<e.coordinates.length;n++)s(e.coordinates[n],i);return e}(a,!0);try{if(i.filter){const e=t.createExpression(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const n=a.features.filter((t=>e.value.evaluate({zoom:0},t)));a={type:"FeatureCollection",features:n}}this._geoJSONIndex=i.cluster?new D(function({superclusterOptions:e,clusterProperties:i}){if(!i||!e)return e;const n={},r={},a={accumulated:null,zoom:0},s={properties:null},o=Object.keys(i);for(const e of o){const[a,s]=i[e],o=t.createExpression(s),l=t.createExpression("string"==typeof a?[a,["accumulated"],["get",e]]:a);n[e]=o.value,r[e]=l.value}return e.map=t=>{s.properties=t;const e={};for(const t of o)e[t]=n[t].evaluate(a,s);return e},e.reduce=(t,e)=>{s.properties=e;for(const e of o)a.accumulated=t[e],t[e]=r[e].evaluate(a,s)},e}(i)).load(a.features):function(t,e){return new mt(t,e)}(a,i.geojsonVtOptions)}catch(r){return e(r)}this.loaded={};const o={};if(n){const t=n.finish();t&&(o.resourceTiming={},o.resourceTiming[i.source]=JSON.parse(JSON.stringify(t)))}e(null,o)}}))}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(t,e){const i=this.loaded;return i&&i[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,i){if(e.request)t.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}removeSource(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class gt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:yt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}checkIfReady(t,e,i){i()}setReferrer(t,e){this.referrer=e}setImages(t,e,i){this.availableImages[t]=e;for(const i in this.workerSources[t]){const n=this.workerSources[t][i];for(const t in n)n[t].availableImages=e}i()}enableTerrain(t,e,i){this.terrain=e,i()}setLayers(t,e,i){this.getLayerIndex(t).replace(e),i()}updateLayers(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()}loadTile(e,i,n){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(e,i.type,i.source).loadTile(r,n)}loadDEMTile(e,i,n){const r=this.enableTerrain?t.extend({buildQuadTree:this.terrain},i):i;this.getDEMWorkerSource(e,i.source).loadTile(r,n)}reloadTile(e,i,n){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(e,i.type,i.source).reloadTile(r,n)}abortTile(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)}removeTile(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)}removeSource(t,e,i){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,i):i()}loadWorkerSource(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}}syncRTLPluginState(e,i,n){try{t.plugin.setState(i);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const i=t.plugin.isParsed();n(i?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),i)}}catch(t){n(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e}getWorkerSource(t,e,i){return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][i]||(this.workerSources[t][e][i]=new this.workerSourceTypes[e]({send:(e,i,n,r,a,s)=>{this.actor.send(e,i,n,t,r,s)},scheduler:this.actor.scheduler},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][i]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new a),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,i){t.enforceCacheSizeLimit(i)}getWorkerPerformanceMetrics(t,e,i){i(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new gt(self)),gt})),n(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!i(t)}function i(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){const t=document.createElement("canvas");t.width=t.height=1;const e=t.getContext("2d");if(!e)return!1;const i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===n[i=t&&t.failIfMajorPerformanceCaveat]&&(n[i]=function(t){const i=function(t){var i=document.createElement("canvas"),n=Object.create(e.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",n)||i.probablySupportsContext("experimental-webgl",n):i.supportsContext?i.supportsContext("webgl",n)||i.supportsContext("experimental-webgl",n):i.getContext("webgl",n)||i.getContext("experimental-webgl",n)}(t);if(!i)return!1;const n=i.createShader(i.VERTEX_SHADER);return!(!n||i.isContextLost())&&(i.shaderSource(n,"void main() {}"),i.compileShader(n),!0===i.getShaderParameter(n,i.COMPILE_STATUS))}(i)),n[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}));const i={create:function(e,i,n){const r=t.window.document.createElement(e);return void 0!==i&&(r.className=i),n&&n.appendChild(r),r},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},n=t.window.document&&t.window.document.documentElement.style;function r(t){if(!n)return t[0];for(let e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}const a=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);let s;i.disableDrag=function(){n&&a&&(s=n[a],n[a]="none")},i.enableDrag=function(){n&&a&&(n[a]=s)};const o=r(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[o]=e};let l=!1;try{const e=Object.defineProperty({},"passive",{get(){l=!0}});t.window.addEventListener("test",e,e),t.window.removeEventListener("test",e,e)}catch(t){l=!1}i.addEventListener=function(t,e,i,n={}){t.addEventListener(e,i,"passive"in n&&l?n:n.capture)},i.removeEventListener=function(t,e,i,n={}){t.removeEventListener(e,i,"passive"in n&&l?n:n.capture)};const h=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",h,!0)};function u(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}i.suppressClick=function(){t.window.addEventListener("click",h,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",h,!0)}),0)},i.mousePos=function(e,i){const n=e.getBoundingClientRect();return new t.Point(i.clientX-n.left-e.clientLeft,i.clientY-n.top-e.clientTop)},i.touchPos=function(e,i){const n=e.getBoundingClientRect(),r=[];for(let a=0;a<i.length;a++)r.push(new t.Point(i[a].clientX-n.left-e.clientLeft,i[a].clientY-n.top-e.clientTop));return r},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};class c extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,i){let n=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),n=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),n=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),n=!1),n}_validateStretch(t,e){if(!t)return!0;let i=0;for(const n of t){if(n[0]<i||n[1]<n[0]||e<n[1])return!1;i=n[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let i=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,i){const n={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?n[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,n)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const i=this.patterns[e],n=this.getImage(e);if(!n)return null;if(i&&i.position.version===n.version)return i.position;if(i)i.position.version=n.version;else{const i={w:n.data.width+2,h:n.data.height+2,x:0,y:0},r=new t.ImagePosition(i,n);this.patterns[e]={bin:i,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:i,h:n}=t.potpack(e),r=this.atlasImage;r.resize({width:i||1,height:n||1});for(const e in this.patterns){const{bin:i}=this.patterns[e],n=i.x+1,a=i.y+1,s=this.images[e].data,o=s.width,l=s.height;t.RGBAImage.copy(s,r,{x:0,y:0},{x:n,y:a},{width:o,height:l}),t.RGBAImage.copy(s,r,{x:0,y:l-1},{x:n,y:a-1},{width:o,height:1}),t.RGBAImage.copy(s,r,{x:0,y:0},{x:n,y:a+l},{width:o,height:1}),t.RGBAImage.copy(s,r,{x:o-1,y:0},{x:n-1,y:a},{width:1,height:l}),t.RGBAImage.copy(s,r,{x:0,y:0},{x:n+o,y:a},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];u(t)&&this.updateImage(e,t)}}}var d=f,m=f,p=1e20;function f(t,e,i,n,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var s=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.d=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Int16Array(s),this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(t,e,i,n,r,a,s){for(var o=0;o<e;o++){for(var l=0;l<i;l++)n[l]=t[l*e+o];for(g(n,r,a,s,i),l=0;l<i;l++)t[l*e+o]=r[l]}for(l=0;l<i;l++){for(o=0;o<e;o++)n[o]=t[l*e+o];for(g(n,r,a,s,e),o=0;o<e;o++)t[l*e+o]=Math.sqrt(r[o])}}function g(t,e,i,n,r){i[0]=0,n[0]=-p,n[1]=+p;for(var a=1,s=0;a<r;a++){for(var o=(t[a]+a*a-(t[i[s]]+i[s]*i[s]))/(2*a-2*i[s]);o<=n[s];)s--,o=(t[a]+a*a-(t[i[s]]+i[s]*i[s]))/(2*a-2*i[s]);i[++s]=a,n[s]=o,n[s+1]=+p}for(a=0,s=0;a<r;a++){for(;n[s+1]<a;)s++;e[a]=(a-i[s])*(a-i[s])+t[i[s]]}}f.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var r=e.data[4*n+3]/255;this.gridOuter[n]=1===r?0:0===r?p:Math.pow(Math.max(0,.5-r),2),this.gridInner[n]=1===r?p:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++)i[n]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[n]-this.gridInner[n])/this.radius+this.cutoff))));return i},d.default=m;class _{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(e,i){const n=[];for(const t in e)for(const i of e[t])n.push({stack:t,id:i});t.asyncAll(n,(({stack:t,id:e},i)=>{let n=this.entries[t];n||(n=this.entries[t]={glyphs:{},requests:{},ranges:{}});let r=n.glyphs[e];if(void 0!==r)return void i(null,{stack:t,id:e,glyph:r});if(r=this._tinySDF(n,t,e),r)return n.glyphs[e]=r,void i(null,{stack:t,id:e,glyph:r});const a=Math.floor(e/256);if(256*a>65535)return void i(new Error("glyphs > 65535 not supported"));if(n.ranges[a])return void i(null,{stack:t,id:e,glyph:r});let s=n.requests[a];s||(s=n.requests[a]=[],_.loadGlyphRange(t,a,this.url,this.requestManager,((t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(n.glyphs[+t]=e[+t]);n.ranges[a]=!0}for(const i of s)i(t,e);delete n.requests[a]}))),s.push(((n,r)=>{n?i(n):r&&i(null,{stack:t,id:e,glyph:r[e]||null})}))}),((t,e)=>{if(t)i(t);else if(e){const t={};for(const{stack:i,id:n,glyph:r}of e)(t[i]||(t[i]={}))[n]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics};i(null,t)}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))}_tinySDF(e,i,n){const r=this.localIdeographFontFamily;if(!r)return;if(!this._doesCharSupportLocalGlyph(n))return;let a=e.tinySDF;if(!a){let t="400";/bold/i.test(i)?t="900":/medium/i.test(i)?t="500":/light/i.test(i)&&(t="200"),a=e.tinySDF=new _.TinySDF(24,3,8,.25,r,t)}return{id:n,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}}_.loadGlyphRange=function(e,i,n,r,a){const s=256*i,o=s+255,l=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${s}-${o}`),t.ResourceType.Glyphs);t.getArrayBuffer(l,((e,i)=>{if(e)a(e);else if(i){const e={};for(const n of t.parseGlyphPBF(i))e[n.id]=n;a(null,e)}}))},_.TinySDF=d;const v=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new class{constructor(){this.specification=t.styleSpec.light.position}possiblyEvaluate(e,i){return function([e,i,n]){const r=t.degToRad(i+90),a=t.degToRad(n);return{x:e*Math.cos(r)*Math.sin(a),y:e*Math.sin(r)*Math.sin(a),z:e*Math.cos(a),azimuthal:i,polar:n}}(e.expression.evaluate(i))}interpolate(e,i,n){return{x:t.number(e.x,i.x,n),y:t.number(e.y,i.y,n),z:t.number(e.z,i.z,n),azimuthal:t.number(e.azimuthal,i.azimuthal,n),polar:t.number(e.polar,i.polar,n)}}},color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)});class b extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(v),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,i={}){if(!this._validate(t.validateLight,e,i))for(const i in e){const n=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),n):this._transitionable.setValue(i,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,i,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))}}const M=new t.Properties({source:new t.DataConstantProperty(t.styleSpec.terrain.source),exaggeration:new t.DataConstantProperty(t.styleSpec.terrain.exaggeration)});class x extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(M),this.set(e),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(e){for(const i in e){const n=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),n):this._transitionable.setValue(i,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}class w{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]}getDashRanges(t,e,i){const n=[];let r=t.length%2==1?-t[t.length-1]*i:0,a=t[0]*i,s=!0;n.push({left:r,right:a,isDash:s,zeroLength:0===t[0]});let o=t[0];for(let e=1;e<t.length;e++){s=!s;const l=t[e];r=o*i,o+=l,a=o*i,n.push({left:r,right:a,isDash:s,zeroLength:0===l})}return n}addRoundDash(t,e,i){const n=e/2;for(let e=-i;e<=i;e++){const r=this.width*(this.nextRow+i+e);let a=0,s=t[a];for(let o=0;o<this.width;o++){o/s.right>1&&(s=t[++a]);const l=Math.abs(o-s.left),h=Math.abs(o-s.right),u=Math.min(l,h);let c;const d=e/i*(n+1);if(s.isDash){const t=n-Math.abs(d);c=Math.sqrt(u*u+t*t)}else c=n-Math.sqrt(u*u+d*d);this.data[r+o]=Math.max(0,Math.min(255,c+128))}}}addRegularDash(t){for(let e=t.length-1;e>=0;--e){const i=t[e],n=t[e+1];i.zeroLength?t.splice(e,1):n&&n.isDash===i.isDash&&(n.left=i.left,t.splice(e,1))}const e=t[0],i=t[t.length-1];e.isDash===i.isDash&&(e.left=i.left-this.width,i.right=e.right+this.width);const n=this.width*this.nextRow;let r=0,a=t[r];for(let e=0;e<this.width;e++){e/a.right>1&&(a=t[++r]);const i=Math.abs(e-a.left),s=Math.abs(e-a.right),o=Math.min(i,s);this.data[n+e]=Math.max(0,Math.min(255,(a.isDash?o:-o)+128))}}addDash(e,i){const n=i?7:0,r=2*n+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let i=0;i<e.length;i++)e[i]<0&&(t.warnOnce("Negative value is found in line dasharray, replacing values with 0"),e[i]=0),a+=e[i];if(0!==a){const t=this.width/a,r=this.getDashRanges(e,this.width,t);i?this.addRoundDash(r,t,n):this.addRegularDash(r)}const s={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:a};return this.nextRow+=r,this.dirty=!0,s}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class S{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const n=this.workerPool.acquire(this.id);for(let t=0;t<n.length;t++){const e=new S.Actor(n[t],i,this.id);e.name=`Worker ${t}`,this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,i,n){t.asyncAll(this.actors,((t,n)=>{t.send(e,i,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function A(e,i,n){return i*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}S.Actor=t.Actor;class T{constructor(t,e,i,n){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((t=>n.pointCoordinate3D(t))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(e,i){let n,r;if(e instanceof t.Point||"number"==typeof e[0]){const a=t.Point.convert(e);n=[t.Point.convert(e)],r=i.isPointAboveHorizon(a)}else{const a=t.Point.convert(e[0]),s=t.Point.convert(e[1]);n=[a,s],r=t.polygonizeBounds(a,s).every((t=>i.isPointAboveHorizon(t)))}return new T(n,i.getCameraPoint(),r,i)}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const i=[this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,0)):this.screenBounds[1],this.cameraPoint];return t.bufferConvexPolygon(i,e)}containsTile(e,i,n){const r=e.queryPadding+1,a=n?this._bufferedCameraMercator(r,i).map((t=>e.tileID.getTilePoint(t))):this._bufferedScreenMercator(r,i).map((t=>e.tileID.getTilePoint(t))),s=this.screenGeometryMercator.map((t=>e.tileID.getTileVec3(t))),o=s.map((e=>new t.Point(e[0],e[1]))),l=i.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),h=e.tileID.getTileVec3(l),u=s.map((e=>{const i=t.sub(e,e,h);return t.normalize(i,i),new t.Ray(h,i)})),c=A(e,1,i.zoom);if(t.polygonIntersectsBox(a,0,0,t.EXTENT,t.EXTENT))return{queryGeometry:this,tilespaceGeometry:o,tilespaceRays:u,bufferedTilespaceGeometry:a,bufferedTilespaceBounds:(d=t.getBounds(a),d.min.x=t.clamp(d.min.x,0,t.EXTENT),d.min.y=t.clamp(d.min.y,0,t.EXTENT),d.max.x=t.clamp(d.max.x,0,t.EXTENT),d.max.y=t.clamp(d.max.y,0,t.EXTENT),d),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:c};var d}_bufferedScreenMercator(t,e){const i=C(t);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{const n=this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._screenRaycastCache[i]=n,n}}_bufferedCameraMercator(t,e){const i=C(t);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{const n=this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._cameraRaycastCache[i]=n,n}}}function C(t){return 100*t|0}function I(e,i,n){const r=function(r,a){if(r)return n(r);if(a){const r=t.pick(t.extend(a,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(r.vectorLayers=a.vector_layers,r.vectorLayerIds=r.vectorLayers.map((t=>t.id))),r.tiles=i.canonicalizeTileset(r,e.url),n(null,r)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame((()=>r(null,e)))}class k{constructor(e,i,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=n||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),s=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=n&&e.x<a&&e.y>=r&&e.y<s}}class P extends t.Evented{constructor(e,i,n,r){super(),this.id=e,this.dispatcher=n,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new k(i.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(i.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,i){const n=t.browser.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),n,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((n,r)=>{if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;const n=this.map.painter.context,a=n.gl;e.texture=this.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new t.Texture(n,r,a.RGBA,{useMipmap:!0}),e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),i(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}var E=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class D extends t.Evented{constructor(t,e,i,n){super(),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=e}load(e,i){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,r)=>{this._loaded=!0,n?this.fire(new t.ErrorEvent(n)):r&&(this.image=r,e&&(this.coordinates=e),i&&i(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let i=1/0,n=1/0,r=-1/0,a=-1/0;for(const t of e)i=Math.min(i,t.x),n=Math.min(n,t.y),r=Math.max(r,t.x),a=Math.max(a,t.y);const s=Math.max(r-i,a-n),o=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),l=Math.pow(2,o);return new t.CanonicalTileID(o,Math.floor((i+r)/2*l),Math.floor((n+a)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const n=i.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const L={vector:class extends t.Evented{constructor(e,i,n,r){if(super(),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new k(i.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t();const e=this.map.style._getSourceCaches(this.id);for(const t of e)t.clearTiles();this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,i){const n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",r,a.bind(this));else if(e.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",r,a.bind(this));else{const i=t.loadVectorTile.call({deduped:this._deduped},r,((t,i)=>{t||!i?a.call(this,t):(r.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},e.actor&&e.actor.send("loadTile",r,a.bind(this)))}),!0);e.request={cancel:i}}function a(n,r){return delete e.request,e.aborted?i(null):n&&404!==n.status?i(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:P,"raster-dem":class extends P{constructor(e,i,n,r){super(e,i,n,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,i){const n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(t,n){t&&(e.state="errored",i(t)),n&&(e.dem=n,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),function(n,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(a){this.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;const i=t.window.ImageBitmap&&a instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported(),n=1-(a.width-t.prevPowerOfTwo(a.width))/2;n<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const s=i?a:t.browser.getImageData(a,n),o={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:s,encoding:this.encoding,padding:n};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",o,r.bind(this)))}}.bind(this))}_getNeighboringTiles(e){const i=e.canonical,n=Math.pow(2,i.z),r=(i.x-1+n)%n,a=0===i.x?e.wrap-1:e.wrap,s=(i.x+1+n)%n,o=i.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,o,i.z,s,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,o,i.z,s,i.y-1).key]={backfilled:!1}),i.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,o,i.z,s,i.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,i,n,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(r),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((e=>{if(e)return void this.fire(new t.ErrorEvent(e));const i={dataType:"source",sourceDataType:"metadata"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(i.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new t.Event("data",i))}))}onAdd(t){this.map=t,this.load()}setData(e){return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((e=>{if(e)return void this.fire(new t.ErrorEvent(e));const i={dataType:"source",sourceDataType:"content"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(i.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new t.Event("data",i))})),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},n),this}_updateWorkerData(e){this._loaded=!1;const i=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(n),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(n),this.actor.send(`${this.type}.loadData`,i,((t,n)=>{this._removed||n&&n.abandoned||(this._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[this.id]&&(this._resourceTiming=n.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:i.source},null),e(t))}))}loaded(){return this._loaded}loadTile(e,i){const n=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(n,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,r)=>(delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(r,this.map.painter,"reloadTile"===n),i(null)))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends D{constructor(t,e,i,n){super(t,e,i,n),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const i of e.urls)this.urls.push(this.map._requestManager.transformRequest(i,t.ResourceType.Source).url);t.getVideo(this.urls,((e,i)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:D,canvas:class extends D{constructor(e,i,n,r){super(e,i,n,r),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,n=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,n.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}},z=function(e,i,n,r){const a=new L[i.type](e,i,n,r);if(a.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${a.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a};function F(e,i){const n=t.identity([]);return t.scale(n,n,[.5*e.width,.5*-e.height,1]),t.translate(n,n,[1,-1,0]),t.multiply(n,n,e.calculatePosMatrix(i.toUnwrapped()))}function O(t,e,i,n,r,a,s,o=!1){const l=t.tilesIn(n,s,o);l.sort(N);const h=[];for(const n of l)h.push({wrappedTileID:n.tile.tileID.wrapped().key,queryResults:n.tile.queryRenderedFeatures(e,i,t._state,n,r,a,F(t.transform,n.tile.tileID),o)});const u=function(t){const e={},i={};for(const n of t){const t=n.queryResults,r=n.wrappedTileID,a=i[r]=i[r]||{};for(const i in t){const n=t[i],r=a[i]=a[i]||{},s=e[i]=e[i]||[];for(const t of n)r[t.featureIndex]||(r[t.featureIndex]=!0,s.push(t))}}return e}(h);for(const e in u)u[e].forEach((e=>{const i=e.feature,n=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return u}function R(t,e){const i=t.getRenderableIds().map((e=>t.getTileByID(e))),n=[],r={};for(let t=0;t<i.length;t++){const a=i[t],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(n,e))}return n}function N(t,e){const i=t.tileID,n=e.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}function B(){return new t.window.Worker(wr.workerUrl)}const j="mapboxgl_preloaded_worker_pool";class H{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<H.workerCount;)this.workers.push(new B);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[j]}numActive(){return Object.keys(this.active).length}}let U;function V(){return U||(U=new H),U}function G(e,i){const n={};for(const t in e)"ref"!==t&&(n[t]=e[t]);return t.refProperties.forEach((t=>{t in i&&(n[t]=i[t])})),n}function $(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=G(t[i],e[t[i].ref]));return t}H.workerCount=2;const Z={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain"};function q(t,e,i){i.push({command:Z.addSource,args:[t,e[t]]})}function Y(t,e,i){e.push({command:Z.removeSource,args:[t]}),i[t]=!0}function W(t,e,i,n){Y(t,i,n),q(t,e,i)}function J(e,i,n){let r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[n][r],i[n][r]))return!1;for(r in i[n])if(i[n].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[n][r],i[n][r]))return!1;return!0}function X(e,i,n,r,a,s){let o;for(o in i=i||{},e=e||{})e.hasOwnProperty(o)&&(t.deepEqual(e[o],i[o])||n.push({command:s,args:[r,o,i[o],a]}));for(o in i)i.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(t.deepEqual(e[o],i[o])||n.push({command:s,args:[r,o,i[o],a]}))}function K(t){return t.id}function Q(t,e){return t[e.id]=e,t}class tt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let i=1,n=this._distances[i];const r=e*this.paddedLength+this.padding;for(;n<r&&i<this._distances.length;)n=this._distances[++i];const a=i-1,s=this._distances[a],o=n-s,l=o>0?(r-s)/o:0;return this.points[a].mult(1-l).add(this.points[i].mult(l))}}class et{constructor(t,e,i){const n=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(let t=0;t<this.xCellCount*this.yCellCount;t++)n.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)}insertCircle(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n)}_insertBoxCell(t,e,i,n,r,a){this.boxCells[r].push(a)}_insertCircleCell(t,e,i,n,r,a){this.circleCells[r].push(a)}_query(t,e,i,n,r,a){if(i<0||t>this.width||n<0||e>this.height)return!r&&[];const s=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(r)return!0;for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],i=this.circles[3*t+1],n=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-n,y1:i-n,x2:e+n,y2:i+n})}return a?s.filter(a):s}return this._forEachCell(t,e,i,n,this._queryCell,s,{hitTest:r,seenUids:{box:{},circle:{}}},a),r?s.length>0:s}_queryCircle(t,e,i,n,r){const a=t-i,s=t+i,o=e-i,l=e+i;if(s<0||a>this.width||l<0||o>this.height)return!n&&[];const h=[];return this._forEachCell(a,o,s,l,this._queryCellCircle,h,{hitTest:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},r),n?h.length>0:h}query(t,e,i,n,r){return this._query(t,e,i,n,!1,r)}hitTest(t,e,i,n,r){return this._query(t,e,i,n,!0,r)}hitTestCircle(t,e,i,n){return this._queryCircle(t,e,i,!0,n)}_queryCell(t,e,i,n,r,a,s,o){const l=s.seenUids,h=this.boxCells[r];if(null!==h){const r=this.bboxes;for(const u of h)if(!l.box[u]){l.box[u]=!0;const h=4*u;if(t<=r[h+2]&&e<=r[h+3]&&i>=r[h+0]&&n>=r[h+1]&&(!o||o(this.boxKeys[u]))){if(s.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[u],x1:r[h],y1:r[h+1],x2:r[h+2],y2:r[h+3]})}}}const u=this.circleCells[r];if(null!==u){const r=this.circles;for(const h of u)if(!l.circle[h]){l.circle[h]=!0;const u=3*h;if(this._circleAndRectCollide(r[u],r[u+1],r[u+2],t,e,i,n)&&(!o||o(this.circleKeys[h]))){if(s.hitTest)return a.push(!0),!0;{const t=r[u],e=r[u+1],i=r[u+2];a.push({key:this.circleKeys[h],x1:t-i,y1:e-i,x2:t+i,y2:e+i})}}}}}_queryCellCircle(t,e,i,n,r,a,s,o){const l=s.circle,h=s.seenUids,u=this.boxCells[r];if(null!==u){const t=this.bboxes;for(const e of u)if(!h.box[e]){h.box[e]=!0;const i=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[i+0],t[i+1],t[i+2],t[i+3])&&(!o||o(this.boxKeys[e])))return a.push(!0),!0}}const c=this.circleCells[r];if(null!==c){const t=this.circles;for(const e of c)if(!h.circle[e]){h.circle[e]=!0;const i=3*e;if(this._circlesCollide(t[i],t[i+1],t[i+2],l.x,l.y,l.radius)&&(!o||o(this.circleKeys[e])))return a.push(!0),!0}}}_forEachCell(t,e,i,n,r,a,s,o){const l=this._convertToXCellCoord(t),h=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),c=this._convertToYCellCoord(n);for(let d=l;d<=u;d++)for(let l=h;l<=c;l++)if(r.call(this,t,e,i,n,this.xCellCount*l+d,a,s,o))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,i,n,r,a){const s=n-t,o=r-e,l=i+a;return l*l>s*s+o*o}_circleAndRectCollide(t,e,i,n,r,a,s){const o=(a-n)/2,l=Math.abs(t-(n+o));if(l>o+i)return!1;const h=(s-r)/2,u=Math.abs(e-(r+h));if(u>h+i)return!1;if(l<=o||u<=h)return!0;const c=l-o,d=u-h;return c*c+d*d<=i*i}}function it(e,i,n,r,a){const s=t.create();return i?(t.scale(s,s,[1/a,1/a,1]),n||t.rotateZ(s,s,r.angle)):t.multiply(s,r.labelPlaneMatrix,e),s}function nt(e,i,n,r,a){if(i){const i=t.clone(e);return t.scale(i,i,[a,a,1]),n||t.rotateZ(i,i,-r.angle),i}return r.glCoordMatrix}function rt(e,i,n=0){const r=[e.x,e.y,n,1];n?t.transformMat4(r,r,i):ft(r,r,i);const a=r[3];return{point:new t.Point(r[0]/a,r[1]/a),signedDistanceFromCamera:a}}function at(t,e){return Math.min(.5+t/e*.5,1.5)}function st(t,e){const i=t[0]/t[3],n=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&n>=-e[1]&&n<=e[1]}function ot(e,i,n,r,a,s,o,l,h){const u=r?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,n.transform.zoom),d=[256/n.width*2+1,256/n.height*2+1],m=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;m.clear();const p=e.lineVertexArray,f=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,y=n.transform.width/n.transform.height;let g=!1;for(let r=0;r<f.length;r++){const _=f.get(r);if(_.hidden||_.writingMode===t.WritingMode.vertical&&!g){pt(_.numGlyphs,m);continue}g=!1;const v=h?h({x:_.anchorX,y:_.anchorY}):0,b=[_.anchorX,_.anchorY,v,1];if(t.transformMat4(b,b,i),!st(b,d)){pt(_.numGlyphs,m);continue}const M=at(n.transform.cameraToCenterDistance,b[3]),x=t.evaluateSizeForFeature(u,c,_),w=o?x/M:x*M,S=new t.Point(_.anchorX,_.anchorY),A=rt(S,a,v);if(A.signedDistanceFromCamera<=0){pt(_.numGlyphs,m);continue}const T=A.point;let C={};const I=o?null:h,k=ut(_,w,!1,l,i,a,s,e.glyphOffsetArray,p,m,T,S,C,y,I);g=k.useVertical,I&&k.needsFlipping&&(C={}),(k.notEnoughRoom||g||k.needsFlipping&&ut(_,w,!0,l,i,a,s,e.glyphOffsetArray,p,m,T,S,C,y,I).notEnoughRoom)&&pt(_.numGlyphs,m)}r?e.text.dynamicLayoutVertexBuffer.updateData(m):e.icon.dynamicLayoutVertexBuffer.updateData(m)}function lt(t,e,i,n,r,a,s,o,l,h,u,c,d){const m=o.glyphStartIndex+o.numGlyphs,p=o.lineStartIndex,f=o.lineStartIndex+o.lineLength,y=e.getoffsetX(o.glyphStartIndex),g=e.getoffsetX(m-1),_=dt(t*y,i,n,r,a,s,o.segment,p,f,l,h,u,c,d,!0);if(!_)return null;const v=dt(t*g,i,n,r,a,s,o.segment,p,f,l,h,u,c,d,!0);return v?{first:_,last:v}:null}function ht(e,i,n,r){return e===t.WritingMode.horizontal&&Math.abs(n.y-i.y)>Math.abs(n.x-i.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<n.y:i.x>n.x)?{needsFlipping:!0}:null}function ut(e,i,n,r,a,s,o,l,h,u,c,d,m,p,f){const y=i/24,g=e.lineOffsetX*y,_=e.lineOffsetY*y;let v;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,i=e.lineStartIndex,a=e.lineStartIndex+e.lineLength,u=lt(y,l,g,_,n,c,d,e,h,s,m,f);if(!u)return{notEnoughRoom:!0};const b=rt(u.first.point,o).point,M=rt(u.last.point,o).point;if(r&&!n){const t=ht(e.writingMode,b,M,p);if(t)return t}v=[u.first];for(let r=e.glyphStartIndex+1;r<t-1;r++)v.push(dt(y*l.getoffsetX(r),g,_,n,c,d,e.segment,i,a,h,s,m,f));v.push(u.last)}else{if(r&&!n){const i=rt(d,a).point,n=e.lineStartIndex+e.segment+1,r=new t.Point(h.getx(n),h.gety(n)),s=rt(r,a),o=s.signedDistanceFromCamera>0?s.point:ct(d,r,i,1,a),l=ht(e.writingMode,i,o,p);if(l)return l}const i=dt(y*l.getoffsetX(e.glyphStartIndex),g,_,n,c,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,h,s,m,f);if(!i)return{notEnoughRoom:!0};v=[i]}for(const e of v)t.addDynamicAttributes(u,e.point,e.angle);return{}}function ct(t,e,i,n,r,a){const s=t.add(t.sub(e)._unit()),o=rt(s,r,a?a(s):0).point,l=i.sub(o);return i.add(l._mult(n/l.mag()))}function dt(e,i,n,r,a,s,o,l,h,u,c,d,m,p,f){const y=r?e-i:e+i;let g=y>0?1:-1,_=0;r&&(g*=-1,_=Math.PI),g<0&&(_+=Math.PI);let v=g>0?l+o:l+o+1,b=a,M=a,x=0,w=0;const S=Math.abs(y),A=[],T=[];let C=s;const I=()=>{const e=v-g;return 0===x?s:new t.Point(u.getx(e),u.gety(e))},k=()=>ct(I(),C,M,S-x+1,c,m);for(;x+w<=S;){if(v+=g,v<l||v>=h)return null;if(M=b,A.push(b),p&&T.push(C||I()),b=d[v],void 0===b){C=new t.Point(u.getx(v),u.gety(v));const e=rt(C,c,m?m(C):0);b=e.signedDistanceFromCamera>0?d[v]=e.point:k()}else C=null;x+=w,w=M.dist(b)}f&&m&&(C=C||new t.Point(u.getx(v),u.gety(v)),d[v]=b=void 0===d[v]?b:k(),w=M.dist(b));const P=(S-x)/w,E=b.sub(M),D=E.mult(P)._add(M);n&&D._add(E._unit()._perp()._mult(n*g));const L=_+Math.atan2(b.y-M.y,b.x-M.x);return A.push(D),p&&(C=C||new t.Point(u.getx(v),u.gety(v)),T.push(function(e,i,n){const r=1-n;return new t.Point(e.x*r+i.x*n,e.y*r+i.y*n)}(T.length>0?T[T.length-1]:C,C,P))),{point:D,angle:L,path:A,tilePath:T}}const mt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pt(t,e){for(let i=0;i<t;i++){const t=e.length;e.resize(t+4),e.float32.set(mt,3*t)}}function ft(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t[3]=i[3]*n+i[7]*r+i[15],t}class yt{constructor(t,e=new et(t.width+200,t.height+200,25),i=new et(t.width+200,t.height+200,25)){this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}placeCollisionBox(t,e,i,n,r,a,s){const o=this.projectAndGetPerspectiveRatio(a,e.anchorPointX,e.anchorPointY,e.elevation),l=r*o.perspectiveRatio,h=(e.x1*t+i.x-e.padding)*l+o.point.x,u=(e.y1*t+i.y-e.padding)*l+o.point.y,c=(e.x2*t+i.x+e.padding)*l+o.point.x,d=(e.y2*t+i.y+e.padding)*l+o.point.y,m=o.perspectiveRatio<=.55;return!this.isInsideGrid(h,u,c,d)||!n&&this.grid.hitTest(h,u,c,d,s)||m?{box:[],offscreen:!1}:{box:[h,u,c,d],offscreen:this.isOffscreen(h,u,c,d)}}placeCollisionCircles(e,i,n,r,a,s,o,l,h,u,c,d,m,p){const f=[],y=this.transform.elevation,g=y?t=>y.getAtTileOffset(p,t.x,t.y):t=>0,_=new t.Point(i.anchorX,i.anchorY),v=g(_),b=rt(_,s,v),M=at(this.transform.cameraToCenterDistance,b.signedDistanceFromCamera),x=(u?a/M:a*M)/t.ONE_EM,w=rt(_,o,v).point,S=b.signedDistanceFromCamera>0?lt(x,r,i.lineOffsetX*x,i.lineOffsetY*x,!1,w,_,i,n,o,{},y&&!u?g:null,u&&!!y):null;let A=!1,T=!1,C=!0;if(S){const i=.5*d*M+m,n=new t.Point(-100,-100),r=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),a=new tt,s=S.first,o=S.last;let u=[];for(let t=s.path.length-1;t>=1;t--)u.push(s.path[t]);for(let t=1;t<o.path.length;t++)u.push(o.path[t]);const p=2.5*i;if(l){const t=u.map(y?(t,e)=>{const i=g(e<s.path.length-1?s.tilePath[s.path.length-1-e]:o.tilePath[e-s.path.length+2]);return rt(t,l,i)}:t=>rt(t,l));u=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let _=[];if(u.length>0){const e=u[0].clone(),i=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),i.x=Math.max(i.x,u[t].x),i.y=Math.max(i.y,u[t].y);_=e.x>=n.x&&i.x<=r.x&&e.y>=n.y&&i.y<=r.y?[u]:i.x<n.x||e.x>r.x||i.y<n.y||e.y>r.y?[]:t.clipLine([u],n.x,n.y,r.x,r.y)}for(const t of _){a.reset(t,.25*i);let n=0;n=a.length<=.5*i?1:Math.ceil(a.paddedLength/p)+1;for(let t=0;t<n;t++){const r=t/Math.max(n-1,1),s=a.lerp(r),o=s.x+100,l=s.y+100;f.push(o,l,i,0);const u=o-i,d=l-i,m=o+i,p=l+i;if(C=C&&this.isOffscreen(u,d,m,p),T=T||this.isInsideGrid(u,d,m,p),!e&&this.grid.hitTestCircle(o,l,i,c)&&(A=!0,!h))return{circles:[],offscreen:!1,collisionDetected:A}}}}return{circles:!h&&A||!T?[]:f,offscreen:C,collisionDetected:A}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let n=1/0,r=1/0,a=-1/0,s=-1/0;for(const o of e){const e=new t.Point(o.x+100,o.y+100);n=Math.min(n,e.x),r=Math.min(r,e.y),a=Math.max(a,e.x),s=Math.max(s,e.y),i.push(e)}const o=this.grid.query(n,r,a,s).concat(this.ignoredGrid.query(n,r,a,s)),l={},h={};for(const e of o){const n=e.key;if(void 0===l[n.bucketInstanceId]&&(l[n.bucketInstanceId]={}),l[n.bucketInstanceId][n.featureIndex])continue;const r=[new t.Point(e.x1,e.y1),new t.Point(e.x2,e.y1),new t.Point(e.x2,e.y2),new t.Point(e.x1,e.y2)];t.polygonIntersectsPolygon(i,r)&&(l[n.bucketInstanceId][n.featureIndex]=!0,void 0===h[n.bucketInstanceId]&&(h[n.bucketInstanceId]=[]),h[n.bucketInstanceId].push(n.featureIndex))}return h}insertCollisionBox(t,e,i,n,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:n,collisionGroupID:r},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,i,n,r){const a=e?this.ignoredGrid:this.grid,s={bucketInstanceId:i,featureIndex:n,collisionGroupID:r};for(let e=0;e<t.length;e+=4)a.insertCircle(s,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,i,n,r){const a=[i,n,0,1];return r?(a[2]=r,t.transformMat4(a,a,e)):ft(a,a,e),{point:new t.Point((a[0]/a[3]+1)/2*this.transform.width+100,(-a[1]/a[3]+1)/2*this.transform.height+100),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5)}}isOffscreen(t,e,i,n){return i<100||t>=this.screenRightBoundary||n<100||e>this.screenBottomBoundary}isInsideGrid(t,e,i,n){return i>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}class gt{constructor(t,e,i,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class _t{constructor(t,e,i,n,r){this.text=new gt(t?t.text:null,e,i,r),this.icon=new gt(t?t.icon:null,e,n,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class vt{constructor(t,e,i){this.text=t,this.icon=e,this.skipFade=i}}class bt{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Mt{constructor(t,e,i,n,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=r}}class xt{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function wt(e,i,n,r,a){const{horizontalAlign:s,verticalAlign:o}=t.getAnchorAlignment(e),l=-(s-.5)*i,h=-(o-.5)*n,u=t.evaluateVariableOffset(e,r);return new t.Point(l+u[0]*a,h+u[1]*a)}function St(e,i,n,r,a){const s=new t.Point(e,i);return n&&s._rotate(r?a:-a),s}class At{constructor(t,e,i,n){this.transform=t.clone(),this.collisionIndex=new yt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new xt(i),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,i,n,r){const a=n.getBucket(i),s=n.latestFeatureIndex;if(!a||!s||i.id!==a.layerIds[0])return;const o=n.collisionBoxArray,l=a.layers[0].layout,h=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/t.EXTENT,c=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),m="map"===l.get("text-rotation-alignment"),p=A(n,1,this.transform.zoom),f=it(c,d,m,this.transform,p);let y=null;if(d){const e=nt(c,d,m,this.transform,p);y=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[a.bucketInstanceId]=new Mt(a.bucketInstanceId,s,a.sourceLayerIndex,a.index,n.tileID);const g={bucket:a,layout:l,posMatrix:c,textLabelPlaneMatrix:f,labelToScreenMatrix:y,scale:h,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:o,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(r)for(const t of a.sortKeyRanges){const{sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:r}=t;e.push({sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:r,parameters:g})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:g})}attemptAnchorPlacement(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g){const _=[c.textOffset0,c.textOffset1],v=m.getSymbolInstanceTextSize(y,c,this.transform.zoom,d),b=wt(t,i,n,_,r),M=this.collisionIndex.placeCollisionBox(v,e,St(b.x,b.y,a,s,this.transform.angle),u,o,l,h.predicate);if((!f||0!==this.collisionIndex.placeCollisionBox(m.getSymbolInstanceIconSize(g,this.transform.zoom,d),f,St(b.x,b.y,a,s,this.transform.angle),u,o,l,h.predicate).box.length)&&M.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[c.crossTileID]&&this.prevPlacement.placements[c.crossTileID]&&this.prevPlacement.placements[c.crossTileID].text&&(e=this.prevPlacement.variableOffsets[c.crossTileID].anchor),this.variableOffsets[c.crossTileID]={textOffset:_,width:i,height:n,anchor:t,textBoxScale:r,prevAnchor:e},this.markUsedJustification(m,t,c,p),m.allowVerticalPlacement&&(this.markUsedOrientation(m,p,c),this.placedOrientations[c.crossTileID]=p),{shift:b,placedGlyphBoxes:M}}}placeLayerBucketPart(e,i,n){const{bucket:r,layout:a,posMatrix:s,textLabelPlaneMatrix:o,labelToScreenMatrix:l,textPixelRatio:h,holdingForFade:u,collisionBoxArray:c,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:m,collisionGroup:p}=e.parameters,f=a.get("text-optional"),y=a.get("icon-optional"),g=a.get("text-allow-overlap"),_=a.get("icon-allow-overlap"),v="map"===a.get("text-rotation-alignment"),b="map"===a.get("text-pitch-alignment"),M="none"!==a.get("icon-text-fit"),x="viewport-y"===a.get("symbol-z-order"),w=g&&(_||!r.hasIconData()||y),S=_&&(g||!r.hasTextData()||f);!r.collisionArrays&&c&&r.deserializeCollisionBoxes(c),n&&r.updateCollisionDebugBuffers(this.transform.zoom,c);const A=(e,c,x)=>{if(i[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new vt(!1,!1,!1));let A=!1,T=!1,C=!0,I=null,k={box:null,offscreen:null},P={box:null,offscreen:null},E=null,D=null,L=null,z=0,F=0,O=0;x.textFeatureIndex?z=x.textFeatureIndex:e.useRuntimeCollisionCircles&&(z=e.featureIndex),x.verticalTextFeatureIndex&&(F=x.verticalTextFeatureIndex);const R=t=>{(this.transform.elevation||t.elevation)&&(t.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[r.bucketInstanceId].tileID,t.anchorPointX,t.anchorPointY):0)},N=x.textBox;if(N){R(N);const i=i=>{let n=t.WritingMode.horizontal;if(r.allowVerticalPlacement&&!i&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,n=t,this.markUsedOrientation(r,n,e))}return n},n=(i,n)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&x.verticalTextBox){for(const e of r.writingModes)if(e===t.WritingMode.vertical?(k=n(),P=k):k=i(),k&&k.box&&k.box.length)break}else k=i()};if(a.get("text-variable-anchor")){let o=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];o.indexOf(t.anchor)>0&&(o=o.filter((e=>e!==t.anchor)),o.unshift(t.anchor))}const l=(t,i,n)=>{const a=e.textBoxScale,l=(t.x2-t.x1)*a+2*t.padding,u=(t.y2-t.y1)*a+2*t.padding,f=M&&!_?i:null;f&&R(f);let y={box:[],offscreen:!1};const x=g?2*o.length:o.length;for(let i=0;i<x;++i){const g=this.attemptAnchorPlacement(o[i%o.length],t,l,u,a,v,b,h,s,p,i>=o.length,e,c,r,n,f,d,m);if(g&&(y=g.placedGlyphBoxes,y&&y.box&&y.box.length)){A=!0,I=g.shift;break}}return y};n((()=>l(N,x.iconBox,t.WritingMode.horizontal)),(()=>{const i=x.verticalTextBox;return i&&R(i),r.allowVerticalPlacement&&!(k&&k.box&&k.box.length)&&e.numVerticalGlyphVertices>0&&i?l(i,x.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),k&&(A=k.box,C=k.offscreen);const u=i(k&&k.box);if(!A&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,u))}}else{const a=(i,n)=>{const a=r.getSymbolInstanceTextSize(d,e,this.transform.zoom,c),o=this.collisionIndex.placeCollisionBox(a,i,new t.Point(0,0),g,h,s,p.predicate);return o&&o.box&&o.box.length&&(this.markUsedOrientation(r,n,e),this.placedOrientations[e.crossTileID]=n),o};n((()=>a(N,t.WritingMode.horizontal)),(()=>{const i=x.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?(R(i),a(i,t.WritingMode.vertical)):{box:null,offscreen:null}})),i(k&&k.box&&k.box.length)}}if(E=k,A=E&&E.box&&E.box.length>0,C=E&&E.offscreen,e.useRuntimeCollisionCircles){const i=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),h=t.evaluateSizeForFeature(r.textSizeData,d,i),u=a.get("text-padding");D=this.collisionIndex.placeCollisionCircles(g,i,r.lineVertexArray,r.glyphOffsetArray,h,s,o,l,n,b,p.predicate,e.collisionCircleDiameter,u,this.retainedQueryData[r.bucketInstanceId].tileID),A=g||D.circles.length>0&&!D.collisionDetected,C=C&&D.offscreen}if(x.iconFeatureIndex&&(O=x.iconFeatureIndex),x.iconBox){const e=e=>{R(e);const i=M&&I?St(I.x,I.y,v,b,this.transform.angle):new t.Point(0,0),n=r.getSymbolInstanceIconSize(m,this.transform.zoom,c);return this.collisionIndex.placeCollisionBox(n,e,i,_,h,s,p.predicate)};P&&P.box&&P.box.length&&x.verticalIconBox?(L=e(x.verticalIconBox),T=L.box.length>0):(L=e(x.iconBox),T=L.box.length>0),C=C&&L.offscreen}const B=f||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,j=y||0===e.numIconVertices;if(B||j?j?B||(T=T&&A):A=T&&A:T=A=T&&A,A&&E&&E.box&&this.collisionIndex.insertCollisionBox(E.box,a.get("text-ignore-placement"),r.bucketInstanceId,P&&P.box&&F?F:z,p.ID),T&&L&&this.collisionIndex.insertCollisionBox(L.box,a.get("icon-ignore-placement"),r.bucketInstanceId,O,p.ID),D&&(A&&this.collisionIndex.insertCollisionCircles(D.circles,a.get("text-ignore-placement"),r.bucketInstanceId,z,p.ID),n)){const t=r.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new bt);for(let t=0;t<D.circles.length;t+=4)e.circles.push(D.circles[t+0]),e.circles.push(D.circles[t+1]),e.circles.push(D.circles[t+2]),e.circles.push(D.collisionDetected?1:0)}this.placements[e.crossTileID]=new vt(A||w,T||S,C||r.justReloaded),i[e.crossTileID]=!0};if(x){const t=r.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const i=t[e];A(r.symbolInstances.get(i),i,r.collisionArrays[i])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)A(r.symbolInstances.get(t),t,r.collisionArrays[t]);if(n&&r.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[r.bucketInstanceId];t.invert(e.invProjMatrix,s),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1}markUsedJustification(e,i,n,r){let a;a=r===t.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];const s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=a>=0&&t!==a?0:n.crossTileID)}markUsedOrientation(e,i,n){const r=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,a=i===t.WritingMode.vertical?i:0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];for(const t of s)e.text.placedSymbolArray.get(t).placedOrientation=r;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=a)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const n=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},a=e?e.variableOffsets:{},s=e?e.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],a=r[t];a?(this.opacities[t]=new _t(a,n,e.text,e.icon),i=i||e.text!==a.text.placed||e.icon!==a.icon.placed):(this.opacities[t]=new _t(null,n,e.text,e.icon,e.skipFade),i=i||e.text||e.icon)}for(const t in r){const e=r[t];if(!this.opacities[t]){const r=new _t(e,n,!1,!1);r.isHidden()||(this.opacities[t]=r,i=i||e.text.placed||e.icon.placed)}}for(const t in a)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=a[t]);for(const t in s)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=s[t]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const i={};for(const n of e){const e=n.getBucket(t);e&&n.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,i,n.collisionBoxArray)}}updateBucketOpacities(e,i,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const r=e.layers[0].layout,a=new _t(null,0,!1,!1,!0),s=r.get("text-allow-overlap"),o=r.get("icon-allow-overlap"),l=r.get("text-variable-anchor"),h="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),c="none"!==r.get("icon-text-fit"),d=new _t(null,0,s&&(o||!e.hasIconData()||r.get("icon-optional")),o&&(s||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);const m=(t,e,i)=>{for(let n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(i)};for(let n=0;n<e.symbolInstances.length;n++){const r=e.symbolInstances.get(n),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:o,crossTileID:p}=r;let f=this.opacities[p];i[p]?f=a:f||(f=d,this.opacities[p]=f),i[p]=!0;const y=r.numIconVertices>0,g=this.placedOrientations[r.crossTileID],_=g===t.WritingMode.vertical,v=g===t.WritingMode.horizontal||g===t.WritingMode.horizontalOnly;if(s>0||o>0){const t=zt(f.text);m(e.text,s,_?Ft:t),m(e.text,o,v?Ft:t);const i=f.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||_?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=i||v?1:0);const n=this.variableOffsets[r.crossTileID];n&&this.markUsedJustification(e,n.anchor,r,g);const a=this.placedOrientations[r.crossTileID];a&&(this.markUsedJustification(e,"left",r,a),this.markUsedOrientation(e,a,r))}if(y){const t=zt(f.icon),i=!(c&&r.verticalPlacedIconSymbolIndex&&_);r.placedIconSymbolIndex>=0&&(m(e.icon,r.numIconVertices,i?t:Ft),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=f.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,r.numVerticalIconVertices,i?Ft:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=f.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const i=e.collisionArrays[n];if(i){let n=new t.Point(0,0);if(i.textBox||i.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[p];e?(n=wt(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),h&&n._rotate(u?this.transform.angle:-this.transform.angle)):t=!1}i.textBox&&Tt(e.textCollisionBox.collisionVertexArray,f.text.placed,!t||_,n.x,n.y),i.verticalTextBox&&Tt(e.textCollisionBox.collisionVertexArray,f.text.placed,!t||v,n.x,n.y)}const r=Boolean(!v&&i.verticalIconBox);i.iconBox&&Tt(e.iconCollisionBox.collisionVertexArray,f.icon.placed,r,c?n.x:0,c?n.y:0),i.verticalIconBox&&Tt(e.iconCollisionBox.collisionVertexArray,f.icon.placed,!r,c?n.x:0,c?n.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t}setStale(){this.stale=!0}}function Tt(t,e,i,n,r){t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0)}const Ct=Math.pow(2,25),It=Math.pow(2,24),kt=Math.pow(2,17),Pt=Math.pow(2,16),Et=Math.pow(2,9),Dt=Math.pow(2,8),Lt=Math.pow(2,1);function zt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Ct+e*It+i*kt+e*Pt+i*Et+e*Dt+i*Lt+e}const Ft=0;class Ot{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,i,n,r){const a=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(a,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<a.length;)if(e.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,r())return!0;return!1}}class Rt{constructor(t,e,i,n,r,a,s){this.placement=new At(t,r,a,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(e,i,n){const r=t.browser.now(),a=()=>{const e=t.browser.now()-r;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=i[e[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=r)&&(!t.maxzoom||t.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new Ot(t)),this._inProgressLayer.continuePlacement(n[t.source],this.placement,this._showCollisionBoxes,t,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Nt=512/t.EXTENT/2;class Bt{constructor(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let i=0;i<e.length;i++){const n=e.get(i),r=n.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}getScaledCoordinates(e,i){const n=Nt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*n),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*n)}}findMatches(t,e,i){const n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let r=0;r<t.length;r++){const a=t.get(r);if(a.crossTileID)continue;const s=this.indexedSymbolInstances[a.key];if(!s)continue;const o=this.getScaledCoordinates(a,e);for(const t of s)if(Math.abs(t.coord.x-o.x)<=n&&Math.abs(t.coord.y-o.y)<=n&&!i[t.crossTileID]){i[t.crossTileID]=!0,a.crossTileID=t.crossTileID;break}}}}class jt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ht{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const i=this.indexes[t],n={};for(const t in i){const r=i[t];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),n[r.tileID.key]=r}this.indexes[t]=n}this.lng=t}addBucket(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const n=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const r=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in r){const a=r[i];a.tileID.isChildOf(t)&&a.findMatches(e.symbolInstances,t,n)}else{const a=r[t.scaledTo(Number(i)).key];a&&a.findMatches(e.symbolInstances,t,n)}}for(let t=0;t<e.symbolInstances.length;t++){const r=e.symbolInstances.get(t);r.crossTileID||(r.crossTileID=i.generate(),n[r.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Bt(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const i in e.indexedSymbolInstances)for(const n of e.indexedSymbolInstances[i])delete this.usedCrossTileIDs[t][n.crossTileID]}removeStaleBuckets(t){let e=!1;for(const i in this.indexes){const n=this.indexes[i];for(const r in n)t[n[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[r]),delete n[r],e=!0)}return e}}class Ut{constructor(){this.layerIndexes={},this.crossTileIDs=new jt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,i){let n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Ht);let r=!1;const a={};n.handleWrapJump(i);for(const i of e){const e=i.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(i.tileID,e,this.crossTileIDs)&&(r=!0),a[e.bucketInstanceId]=!0)}return n.removeStaleBuckets(a)&&(r=!0),r}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}const Vt=(e,i)=>t.emitValidationErrors(e,i&&i.filter((t=>"source.canvas"!==t.identifier))),Gt=t.pick(Z,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain"]),$t=t.pick(Z,["setCenter","setZoom","setBearing","setPitch"]),Zt=function(){const e={},i=t.styleSpec.$version;for(const n in t.styleSpec.$root){const r=t.styleSpec.$root[n];if(r.required){let t=null;t="version"===n?i:"array"===r.type?[]:{},null!=t&&(e[n]=t)}}return e}();class qt extends t.Evented{constructor(e,i={}){super(),this.map=e,this.dispatcher=new S(V(),this),this.imageManager=new c,this.imageManager.setEventedParent(this),this.glyphManager=new _(e._requestManager,i.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new Ut,this._layers={},this._num3DLayers=0,this._serializedLayers={},this._order=[],this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const n=this;this._rtlTextPluginCallback=qt.registerForPluginStateChange((e=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,i)=>{if(t.triggerPluginCompletionEvent(e),i&&i.every((t=>t)))for(const t in n._sourceCaches){const e=n._sourceCaches[t],i=e.getSource().type;"vector"!==i&&"geojson"!==i||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const t in this._layers){const i=this._layers[t];i.source===e.id&&this._validateLayer(i)}}))}loadURL(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const n="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);const r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,((e,i)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):i&&this._load(i,n)}))}loadJSON(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((()=>{this._request=null,this._load(e,!1!==i.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Zt,!1)}_load(e,i){if(i&&Vt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);const n=$(this.stylesheet.layers);this._order=n.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let e of n)e=t.createStyleLayer(e),e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize(),e.is3D()&&this._num3DLayers++;this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,i,n){let r,a,s;const o=t.browser.devicePixelRatio>1?"@2x":"";let l=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,o,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,s||(s=t,r=e,u())})),h=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,o,".png"),t.ResourceType.SpriteImage),((t,e)=>{h=null,s||(s=t,a=e,u())}));function u(){if(s)n(s);else if(r&&a){const e=t.browser.getImageData(a),i={};for(const n in r){const{width:a,height:s,x:o,y:l,sdf:h,pixelRatio:u,stretchX:c,stretchY:d,content:m}=r[n],p=new t.RGBAImage({width:a,height:s});t.RGBAImage.copy(e,p,{x:o,y:l},{x:0,y:0},{width:a,height:s}),i[n]={data:p,pixelRatio:u,sdf:h,stretchX:c,stretchY:d,content:m}}n(null,i)}}return{cancel(){l&&(l.cancel(),l=null),h&&(h.cancel(),h=null)}}}(e,this.map._requestManager,((e,i)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(i)for(const t in i)this.imageManager.addImage(t,i[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const i=this.getSource(e.source);if(!i)return;const n=e.sourceLayer;n&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${n}" does not exist on source "${i.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const i of t){const t=this._layers[i];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const i=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(t.length||i.length)&&this._updateWorkerLayers(t,i);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const n={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];n[t]=e.used,e.used=!1}for(const t of this._order){const i=this._layers[t];if(i.recalculate(e,this._availableImages),!i.isHidden(e.zoom)){const t=this._getLayerSourceCache(i);t&&(t.used=!0)}const n=this.map.painter;if(n){const t=i.getProgramIds();if(!t)continue;const r=i.getProgramConfiguration(e.zoom);for(const e of t)n.useProgram(e,r)}}for(const e in n){const i=this._sourceCaches[e];n[e]!==i.used&&i.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:i.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Vt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=$(e.layers);const i=function(e,i){if(!e)return[{command:Z.setStyle,args:[i]}];let n=[];try{if(!t.deepEqual(e.version,i.version))return[{command:Z.setStyle,args:[i]}];t.deepEqual(e.center,i.center)||n.push({command:Z.setCenter,args:[i.center]}),t.deepEqual(e.zoom,i.zoom)||n.push({command:Z.setZoom,args:[i.zoom]}),t.deepEqual(e.bearing,i.bearing)||n.push({command:Z.setBearing,args:[i.bearing]}),t.deepEqual(e.pitch,i.pitch)||n.push({command:Z.setPitch,args:[i.pitch]}),t.deepEqual(e.sprite,i.sprite)||n.push({command:Z.setSprite,args:[i.sprite]}),t.deepEqual(e.glyphs,i.glyphs)||n.push({command:Z.setGlyphs,args:[i.glyphs]}),t.deepEqual(e.transition,i.transition)||n.push({command:Z.setTransition,args:[i.transition]}),t.deepEqual(e.light,i.light)||n.push({command:Z.setLight,args:[i.light]}),t.deepEqual(e.terrain,i.terrain)||n.push({command:Z.setTerrain,args:[i.terrain]});const r={},a=[];!function(e,i,n,r){let a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(i.hasOwnProperty(a)||Y(a,n,r));for(a in i)i.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.deepEqual(e[a],i[a])||("geojson"===e[a].type&&"geojson"===i[a].type&&J(e,i,a)?n.push({command:Z.setGeoJSONSourceData,args:[a,i[a].data]}):W(a,i,n,r)):q(a,i,n))}(e.sources,i.sources,a,r);const s=[];e.layers&&e.layers.forEach((t=>{r[t.source]?n.push({command:Z.removeLayer,args:[t.id]}):s.push(t)})),n=n.concat(a),function(e,i,n){i=i||[];const r=(e=e||[]).map(K),a=i.map(K),s=e.reduce(Q,{}),o=i.reduce(Q,{}),l=r.slice(),h=Object.create(null);let u,c,d,m,p,f,y;for(u=0,c=0;u<r.length;u++)d=r[u],o.hasOwnProperty(d)?c++:(n.push({command:Z.removeLayer,args:[d]}),l.splice(l.indexOf(d,c),1));for(u=0,c=0;u<a.length;u++)d=a[a.length-1-u],l[l.length-1-u]!==d&&(s.hasOwnProperty(d)?(n.push({command:Z.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-c),1)):c++,f=l[l.length-u],n.push({command:Z.addLayer,args:[o[d],f]}),l.splice(l.length-u,0,d),h[d]=!0);for(u=0;u<a.length;u++)if(d=a[u],m=s[d],p=o[d],!h[d]&&!t.deepEqual(m,p))if(t.deepEqual(m.source,p.source)&&t.deepEqual(m["source-layer"],p["source-layer"])&&t.deepEqual(m.type,p.type)){for(y in X(m.layout,p.layout,n,d,null,Z.setLayoutProperty),X(m.paint,p.paint,n,d,null,Z.setPaintProperty),t.deepEqual(m.filter,p.filter)||n.push({command:Z.setFilter,args:[d,p.filter]}),t.deepEqual(m.minzoom,p.minzoom)&&t.deepEqual(m.maxzoom,p.maxzoom)||n.push({command:Z.setLayerZoomRange,args:[d,p.minzoom,p.maxzoom]}),m)m.hasOwnProperty(y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?X(m[y],p[y],n,d,y.slice(6),Z.setPaintProperty):t.deepEqual(m[y],p[y])||n.push({command:Z.setLayerProperty,args:[d,y,p[y]]}));for(y in p)p.hasOwnProperty(y)&&!m.hasOwnProperty(y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?X(m[y],p[y],n,d,y.slice(6),Z.setPaintProperty):t.deepEqual(m[y],p[y])||n.push({command:Z.setLayerProperty,args:[d,y,p[y]]}))}else n.push({command:Z.removeLayer,args:[d]}),f=l[l.lastIndexOf(d)+1],n.push({command:Z.addLayer,args:[p,f]})}(s,i.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:Z.setStyle,args:[i]}]}return n}(this.serialize(),e).filter((t=>!(t.command in $t)));if(0===i.length)return!1;const n=i.filter((t=>!(t.command in Gt)));if(n.length>0)throw new Error(`Unimplemented: ${n.map((t=>t.command)).join(", ")}.`);return i.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,i,n={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,i,null,n))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const r=z(e,i,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:r.serialize(),sourceId:e})));const a=i=>{const n=(i?"symbol:":"other:")+e,a=this._sourceCaches[n]=new t.SourceCache(n,r,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[e]=a,a.style=this,a.onAdd(this.map)};a(!1),"vector"!==i.type&&"geojson"!==i.type||a(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const i=this.getSource(e);if(void 0===i)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const n=this._getSourceCaches(e);for(const e of n)delete this._sourceCaches[e.id],delete this._updatedSources[e.id],e.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e.getSource().id})),e.setEventedParent(null),e.clearTiles();delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}addLayer(e,i,n={}){this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${r}" already exists on this map`)));let a;if("custom"===e.type){if(Vt(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,`layers.${r}`,e,{arrayIndex:-1},n))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[a.id]=a.serialize(),a.is3D()&&this._num3DLayers++}const s=i?this._order.indexOf(i):this._order.length;if(i&&-1===s)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`)));this._order.splice(s,0,r),this._layerOrderChanged=!0,this._layers[r]=a;const o=this._getLayerSourceCache(a);if(this._removedLayers[r]&&a.source&&o&&"custom"!==a.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",o.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}moveLayer(e,i){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===i)return;const n=this._order.indexOf(e);this._order.splice(n,1);const r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const i=this._layers[e];if(!i)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));i.setEventedParent(null),i.is3D()&&this._num3DLayers--;const n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(e,i,n){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===n||(null!=i&&(r.minzoom=i),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(e,i,n={}){this._checkLoaded();const r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,i))return null==i?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,`layers.${r.id}.filter`,i,null,n)||(r.filter=t.clone$1(i),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,i,n,r={}){this._checkLoaded();const a=this.getLayer(e);a?t.deepEqual(a.getLayoutProperty(i),n)||(a.setLayoutProperty(i,n,r),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,i){const n=this.getLayer(e);if(n)return n.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(e,i,n,r={}){this._checkLoaded();const a=this.getLayer(e);a?t.deepEqual(a.getPaintProperty(i),n)||(a.setPaintProperty(i,n,r)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,i){this._checkLoaded();const n=e.source,r=e.sourceLayer,a=this.getSource(n);if(void 0===a)return void this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const s=a.type;if("geojson"===s&&r)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===s&&!r)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const o=this._getSourceCaches(n);for(const t of o)t.setFeatureState(r,e.id,i)}removeFeatureState(e,i){this._checkLoaded();const n=e.source,r=this.getSource(n);if(void 0===r)return void this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const a=r.type,s="vector"===a?e.sourceLayer:void 0;if("vector"===a&&!s)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const o=this._getSourceCaches(n);for(const t of o)t.removeFeatureState(s,e.id,i)}getFeatureState(e){this._checkLoaded();const i=e.source,n=e.sourceLayer,r=this.getSource(i);if(void 0!==r){if("vector"!==r.type||n)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(i)[0].getFeatureState(n,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const i=this._sourceCaches[t].getSource();e[i.id]||(e[i.id]=i.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,i={},n=[];for(let r=this._order.length-1;r>=0;r--){const a=this._order[r];if(e(a)){i[a]=r;for(const e of t){const t=e[a];if(t)for(const e of t)n.push(e)}}}n.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let a=this._order.length-1;a>=0;a--){const s=this._order[a];if(e(s))for(let t=n.length-1;t>=0;t--){const e=n[t].feature;if(i[e.layer.id]<a)break;r.push(e),n.pop()}else for(const e of t){const t=e[s];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(e,i,n){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of i.layers){const i=this._layers[e];if(!i)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];r[i.source]=!0}}const a=[];i.availableImages=this._availableImages;const s=i&&i.layers?i.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),o=T.createFromScreenPoints(e,n);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;i.layers&&!r[e]||a.push(O(this._sourceCaches[t],this._layers,this._serializedLayers,o,i,n,s,!!this.map._showQueryGeometry))}return this.placement&&a.push(function(t,e,i,n,r,a,s){const o={},l=a.queryRenderedSymbols(n),h=[];for(const t of Object.keys(l).map(Number))h.push(s[t]);h.sort(N);for(const i of h){const n=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(const t in n){const e=o[t]=o[t]||[],r=n[t];r.sort(((t,e)=>{const n=i.featureSortOrder;if(n){const i=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const e in o)o[e].forEach((n=>{const r=n.feature,a=i(t[e]).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}));return o}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),o.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a)}querySourceFeatures(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const n=this._getSourceCaches(e);let r=[];for(const t of n)r=r.concat(R(t,i));return r}addSourceType(t,e,i){return qt.getSourceType(t)?i(new Error(`A source type called "${t}" already exists.`)):(qt.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const n=this.light.getLight();let r=!1;for(const i in e)if(!t.deepEqual(e[i],n[i])){r=!0;break}if(!r)return;const a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(a)}setTerrain(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),void this._force3DLayerUpdate();if("object"==typeof e.source){const i="terrain-dem-src";this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})}if(!this._validate(t.validateStyle.terrain,"terrain",e))if(this.terrain){const i=this.terrain,n=i.get();for(const r in e)if(!t.deepEqual(e[r],n[r])){i.set(e),this.stylesheet.terrain=e;const n={now:t.browser.now(),transition:t.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(n);break}}else this._createTerrain(e)}_createTerrain(e){const i=this.terrain=new x(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const n={now:t.browser.now(),transition:t.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(n)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_validate(e,i,n,r,a={}){return(!a||!1!==a.validate)&&Vt(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:n,styleSpec:t.styleSpec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const t of e)t.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const t of e)t.resume(),t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,i,n,r,a=!1){let s=!1,o=!1;const l={};for(const t of this._order){const i=this._layers[t];if("symbol"!==i.type)continue;if(!l[i.source]){const t=this._getLayerSourceCache(i);if(!t)continue;l[i.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(i,l[i.source],e.center.lng);s=s||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((a=a||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Rt(e,this._order,a,i,n,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),o=!0),s&&this.pauseablePlacement.placement.setStale()),o||s)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();const n=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};n(this._otherSourceCaches[e.source]),n(this._symbolSourceCaches[e.source])}getGlyphs(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)}getResource(e,i,n){return t.makeRequest(i,n)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}has3DLayers(){return this._num3DLayers>0}}qt.getSourceType=function(t){return L[t]},qt.setSourceType=function(t,e){L[t]=e},qt.registerForPluginStateChange=t.registerForPluginStateChange;var Yt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Wt={};Wt=Ce("","#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/7.3;}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0);const Jt=Ce("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nconst float PI=3.141592653589793;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Xt=Ce("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Kt=Ce("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Qt=Ce("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),te=Ce("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ee=Ce("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),ie=Ce("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ne=Ce("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),re=Ce("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ae=Ce("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),se=Ce("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),oe=Ce("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),le=Ce("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),he=Ce("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ue=Ce("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ce=Ce("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),de=Ce("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),me=Ce("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),pe=Ce("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),fe=Ce("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),ye=Ce("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),ge=Ce("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),_e=Ce("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ve=Ce("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),be=Ce("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Me=Ce("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),xe=Ce("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}"),we=Ce("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),Se=Ce("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Yt),Ae=Ce("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Yt),Te=Ce("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}");function Ce(t,e,i){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=t.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=e.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g);let o=s?s.concat(a):a;i||(o=Wt.staticUniforms.concat(o));const l={};return{fragmentSource:t=t.replace(n,((t,e,i,n,r)=>(l[r]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nvarying ${i} ${n} ${r};\n#else\nuniform ${i} ${n} u_${r};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${r}\n    ${i} ${n} ${r} = u_${r};\n#endif\n`))),vertexSource:e=e.replace(n,((t,e,i,n,r)=>{const a="float"===n?"vec2":"vec4",s=r.match(/color/)?"color":a;return l[r]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${i} ${a} a_${r};\nvarying ${i} ${n} ${r};\n#else\nuniform ${i} ${n} u_${r};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = a_${r};\n#else\n    ${i} ${n} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = unpack_mix_${s}(a_${r}, u_${r}_t);\n#else\n    ${i} ${n} ${r} = u_${r};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${i} ${a} a_${r};\n#else\nuniform ${i} ${n} u_${r};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${i} ${n} ${r} = a_${r};\n#else\n    ${i} ${n} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${i} ${n} ${r} = unpack_mix_${s}(a_${r}, u_${r}_t);\n#else\n    ${i} ${n} ${r} = u_${r};\n#endif\n`})),staticAttributes:r,staticUniforms:o}}var Ie=Object.freeze({__proto__:null,get preludeTerrain(){return Wt},prelude:Jt,background:Xt,backgroundPattern:Kt,circle:Qt,clippingMask:te,heatmap:ee,heatmapTexture:ie,collisionBox:ne,collisionCircle:re,debug:ae,fill:se,fillOutline:oe,fillOutlinePattern:le,fillPattern:he,fillExtrusion:ue,fillExtrusionPattern:ce,hillshadePrepare:de,hillshade:me,line:pe,lineGradient:fe,linePattern:ye,lineSDF:ge,raster:_e,symbolIcon:ve,symbolSDF:be,symbolTextAndIcon:Me,terrainRaster:xe,terrainDepth:we,skybox:Se,skyboxGradient:Ae,skyboxCapture:Te});class ke{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,i,n,r,a,s,o){this.context=t;let l=this.boundPaintVertexBuffers.length!==n.length;for(let t=0;!l&&t<n.length;t++)this.boundPaintVertexBuffers[t]!==n[t]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===s&&this.boundDynamicVertexBuffer2===o?(t.bindVertexArrayOES.set(this.vao),s&&s.bind(),r&&r.dynamicDraw&&r.bind(),o&&o.bind()):this.freshBind(e,i,n,r,a,s,o)}freshBind(t,e,i,n,r,a,s){let o;const l=t.numAttributes,h=this.context,u=h.gl;if(h.extVertexArrayObject)this.vao&&this.destroy(),this.vao=h.extVertexArrayObject.createVertexArrayOES(),h.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=s;else{o=h.currentNumAttributes||0;for(let t=l;t<o;t++)u.disableVertexAttribArray(t)}e.enableAttributes(u,t);for(const e of i)e.enableAttributes(u,t);a&&a.enableAttributes(u,t),s&&s.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(const e of i)e.bind(),e.setVertexAttribPointers(u,t,r);a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),n&&n.bind(),s&&(s.bind(),s.setVertexAttribPointers(u,t,r)),h.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Pe(e,i){const n=Math.pow(2,i.canonical.z),r=i.canonical.y;return[new t.MercatorCoordinate(0,r/n).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/n).toLngLat().lat]}function Ee(e,i,n,r,a,s,o){const l=e.context,h=l.gl,u=n.fbo;if(!u)return;e.prepareDrawTile(i);const c=e.useProgram("hillshade");l.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,u.colorAttachment.get());const d=((t,e,i,n)=>{const r=i.paint.get("hillshade-shadow-color"),a=i.paint.get("hillshade-highlight-color"),s=i.paint.get("hillshade-accent-color");let o=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(o-=t.transform.angle);const l=!t.options.moving;return{u_matrix:n||t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:Pe(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),o],u_shadow:r,u_highlight:a,u_accent:s}})(e,n,r,e.terrain?i.posMatrix:null);c.draw(l,h.TRIANGLES,a,s,o,t.CullFaceMode.disabled,d,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function De(e,i,n){if(!i.needsDEMTextureUpload)return;const r=e.context,a=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(n.stride);const s=n.getPixels();i.demTexture?i.demTexture.update(s,{premultiply:!1}):i.demTexture=new t.Texture(r,s,a.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Le(e,i,n,r,a,s){const o=e.context,l=o.gl;if(!i.dem)return;const h=i.dem;if(o.activeTexture.set(l.TEXTURE1),De(e,i,h),!i.demTexture)return;i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=h.dim;o.activeTexture.set(l.TEXTURE0);let c=i.fbo;if(!c){const e=new t.Texture(o,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),c=i.fbo=o.createFramebuffer(u,u,!0),c.colorAttachment.set(e.texture)}o.bindFramebuffer.set(c.framebuffer),o.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(o,l.TRIANGLES,r,a,s,t.CullFaceMode.disabled,((e,i)=>{const n=i.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:i.unpackVector}})(i.tileID,h),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}const ze=(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image0:new t.Uniform1i(e,i.u_image0),u_skirt_height:new t.Uniform1f(e,i.u_skirt_height)}),Fe=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),Oe=new class{constructor(){this.operations={}}newMorphing(t,e,i,n,r){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==i.tileID.key&&(e.queued=i)}else this.operations[t]={startTime:n,phase:0,duration:r,from:e,to:i,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const i=this.operations[e];for(i.phase=(t-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},Re={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Ne(e,i,n,r,a){const s=e.context,o=s.gl;let l=e.useProgram("terrainRaster"),h=0;const u=e.colorModeForRenderPass(),c=new t.DepthMode(o.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);Oe.update(a);const d=e.transform,m=6*Math.pow(1.5,22-d.zoom)*i.exaggeration();var p,f,y;for(const g of r){const r=n.getTile(g),_=t.StencilMode.disabled,v=i.prevTerrainTileForTile[g.key],b=i.terrainTileForTile[g.key];y=b,null!=(f=v)&&null!=y&&f.hasData()&&y.hasData()&&null!=f.demTexture&&null!=y.demTexture&&f.tileID.key!==y.tileID.key&&Oe.newMorphing(g.key,v,b,a,250),s.activeTexture.set(o.TEXTURE0),r.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const M=Oe.getMorphValuesForProxy(g.key),x=M?1:0;let w;M&&(w={morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:t.easeCubicInOut(M.phase)}});const S=Fe(g.posMatrix,Be(g.canonical,d.renderWorldCopies)?m/10:m);h!==(p=x)&&(l=e.useProgram("terrainRaster",null,Re[p]),h=p),i.setupElevationDraw(r,l,w),l.draw(s,o.TRIANGLES,c,_,u,t.CullFaceMode.backCCW,S,"terrain_raster",i.gridBuffer,i.gridIndexBuffer,i.gridSegments)}}function Be(t,e){const i=1<<t.z;return!e&&(0===t.x||t.x===i-1)||0===t.y||t.y===i-1}const je=t=>({u_matrix:t});function He(e,i,n,r,a){if(a>0){const s=t.browser.now(),o=(s-e.timeAdded)/a,l=i?(s-i.timeAdded)/a:-1,h=n.getSource(),u=r.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),c=!i||Math.abs(i.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=c&&e.refreshedUponExpiration?1:t.clamp(c?o:1-l,0,1);return e.refreshedUponExpiration&&o>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}const Ue={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ve extends t.SourceCache{constructor(t){const e=z("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new S(V(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,i,n){if(e.freezeTileCoverage)return;this.transform=e;const r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!0}).reduce(((i,n)=>{if(i[n.key]="",!this._tiles[n.key]){const i=new t.Tile(n,this._source.tileSize*n.overscaleFactor(),e.tileZoom);i.state="loaded",this._tiles[n.key]=i}return i}),{});for(const t in this._tiles)t in r||(this.freeFBO(t),this._tiles[t].state="unloaded",delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];void 0!==e&&(this.renderCachePool.push(e),delete this.proxyCachedFBO[t])}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ge extends t.OverscaledTileID{constructor(t,e,i){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.posMatrix=i}}class $e extends t.Elevation{constructor(e,i){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[n,r,a]=function(){const e=new t.StructArrayLayout4i8,i=new t.StructArrayLayout3ui6;e.reserve(17161),i.reserve(33800);const n=t.EXTENT/128,r=t.EXTENT+n/2,a=r+n;for(let i=-n;i<a;i+=n)for(let s=-n;s<a;s+=n){const n=s<0||s>r||i<0||i>r?24575:0,a=t.clamp(Math.round(s),0,t.EXTENT),o=t.clamp(Math.round(i),0,t.EXTENT);e.emplaceBack(a+n,o,a,o)}const s=(t,e)=>{const n=131*e+t;i.emplaceBack(n+1,n,n+131),i.emplaceBack(n+131,n+131+1,n+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)s(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)s(e,t),s(t,e)})),[e,i,32768]}(),s=e.context;this.gridBuffer=s.createVertexBuffer(n,E.members),this.gridIndexBuffer=s.createIndexBuffer(r),this.gridSegments=t.SegmentVector.simpleSegment(0,0,n.length,r.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,n.length,a),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ve(i.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,0,t.EXTENT,0,t.EXTENT,0,1);const o=s.gl;this._overlapStencilMode=new t.StencilMode({func:o.GEQUAL,mask:255},0,255,o.KEEP,o.KEEP,o.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,i.on("data",this._onStyleDataEvent.bind(this))}update(e,i,n){if(e&&e.terrain){this.style!==e&&(e.on("data",this._onStyleDataEvent.bind(this)),this.style=e),this.enabled=!0;const r=e.terrain.properties;this.sourceCache=e._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const a=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const e=this.sourceCache.getSource().tileSize/128,n=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(i,e*n,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,a(),this._initializing=!0),a(),i.updateElevation(!n),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(i),this._depthDone=!1,this._emptyDEMTextureDirty=!0}else this._disable()}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this.proxySourceCache.deallocRenderCache(),this.painter.style))for(const t in this.painter.style._sourceCaches)this.painter.style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,n=this.painter.transform;this._initializing&&(this._initializing=0===n._centerAltitude&&-1===this.getAtPoint(t.MercatorCoordinate.fromLngLat(n.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.painter.options;this.drapeFirst=(r.zooming||r.moving||r.rotating||!!this.forceDrapeFirst)&&!this._invalidateRenderCache,this._invalidateRenderCache=!1;const a=this.proxyCoords=i.getIds().map((t=>{const e=i.getTileByID(t).tileID;return e.posMatrix=n.calculatePosMatrix(e.toUnwrapped()),e}));!function(e,i){const n=i.transform.pointCoordinate(i.transform.getCameraPoint()),r=new t.Point(n.x,n.y);e.sort(((e,i)=>{if(i.overscaledZ-e.overscaledZ)return i.overscaledZ-e.overscaledZ;const n=new t.Point(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),a=new t.Point(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),s=r.mult(1<<e.canonical.z);return s.x-=.5,s.y-=.5,s.distSqr(n)-s.distSqr(a)}))}(a,this.painter),this._previousZoom=n.zoom;const s=this.proxyToSource||{};this.proxyToSource={},a.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const o=this.painter.style._sourceCaches;for(const t in o){const i=o[t];if(!i.used)continue;if(i!==this.sourceCache&&(this._findCoveringTileCache[i.id]={}),this._setupProxiedCoordsForOrtho(i,e[t],s),i.usedForTerrain)continue;const n=e[t];i.getSource().reparseOverscaled&&this._assignTerrainTiles(n)}this.proxiedCoords[i.id]=a.map((t=>new Ge(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupRenderCache(s),this.drapeFirstPending=this.drapeFirst,this.renderingToTexture=!1,this._initFBOPool(),this._updateTimestamp=t.browser.now();const l={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const i=e.tileID.key;i in l||(this._visibleDemTiles.push(e),l[i]=i)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const i in this.terrainTileForTile){const n=this.terrainTileForTile[i],r=n.dem;!r||n.demTexture&&!n.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),De(this.painter,n,r))}}_prepareDemTileUniforms(t,e,i,n){if(!e||null==e.demTexture)return!1;const r=t.tileID.canonical,a=Math.pow(2,e.tileID.canonical.z-r.z),s=n||"";return i[`u_dem_tl${s}`]=[r.x*a%1,r.y*a%1],i[`u_dem_scale${s}`]=a,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,i)=>{if(!i.dem)return e;const n=i.dem.tree.minimums[0];return n>0&&t++,e+n}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,i=e.gl;e.activeTexture.set(i.TEXTURE2);const n=this._getLoadedAreaMinimum(),r={width:1,height:1,data:new Uint8Array(t.DEMData.pack(n,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let a=this._emptyDEMTexture;return a?a.update(r,{premultiply:!1}):a=this._emptyDEMTexture=new t.Texture(e,r,i.RGBA,{premultiply:!1}),a}setupElevationDraw(e,i,n){const r=this.painter.context,a=r.gl,s=(o=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(o),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var o;s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();let l=null,h=null,u=1;if(n&&n.morphing){const t=n.morphing.srcDemTile,i=n.morphing.dstDemTile;u=n.morphing.phase,t&&i&&(this._prepareDemTileUniforms(e,t,s,"_prev")&&(h=t),this._prepareDemTileUniforms(e,i,s)&&(l=i))}if(h&&l?(r.activeTexture.set(a.TEXTURE2),l.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),r.activeTexture.set(a.TEXTURE4),h.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),s.u_dem_lerp=u):(l=this.terrainTileForTile[e.tileID.key],r.activeTexture.set(a.TEXTURE2),(this._prepareDemTileUniforms(e,l,s)?l.demTexture:this.emptyDEMTexture).bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST)),n&&n.useDepthForOcclusion&&(r.activeTexture.set(a.TEXTURE3),this._depthTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),n&&n.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=e}n&&n.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),i.setTerrainUniformValues(r,s)}renderLayer(t,e){return"translucent"!==this.painter.renderPass?(this._depthDone||"symbol"!==t.type&&"circle"!==t.type||this.drawDepth(),!0):this.drapeFirst&&this.drapeFirstPending?(this.render(),this.drapeFirstPending=!1,!0):!!this._isLayerDrapedOverTerrain(t)&&(this.drapeFirst&&!this.renderingToTexture||this.render(),!0)}render(){this.renderingToTexture=!0;const e=this.painter,i=this.painter.context,n=this.proxySourceCache,r=this.proxiedCoords[n.id],a=()=>{i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height]),this.renderingToTexture=!1},s=e.currentLayer;let o=s,l=[];const h=e.style._order;let u=0;for(let c=0;c<r.length;c++){const d=r[c],m=n.getTileByID(d.proxyTileKey),p=n.proxyCachedFBO[d.key],f=this.currentFBO=void 0!==p?n.renderCache[p]:this.pool[u++];if(m.texture=f.tex,void 0!==p&&!f.dirty){l.push(m.tileID);continue}let y;for(i.bindFramebuffer.set(f.fb.framebuffer),this.renderedToTile=!1,f.dirty&&(i.clear({color:t.Color.transparent}),f.dirty=!1),e.currentLayer=s;e.currentLayer<h.length;e.currentLayer++){const t=e.style._layers[h[e.currentLayer]],n=t.isHidden(e.transform.zoom),r=this._isLayerDrapedOverTerrain(t);if(this.drapeFirst&&!r)continue;if(e.currentLayer>o){if(!n&&!r)break;o++}if(n)continue;const a=this.painter.style._getLayerSourceCache(t),s=a?this.proxyToSource[d.key][a.id]:[d];if(!s)continue;const l=s;i.viewport.set([0,0,f.fb.width,f.fb.height]),y!==(a?a.id:null)&&(this._setupStencil(s,t,a),y=a?a.id:null),e.renderLayer(e,a,t,l)}f.dirty=this.renderedToTile,this.renderedToTile&&l.push(m.tileID),5===u&&(u=0,l.length>0&&(a(),Ne(e,this,n,l,this._updateTimestamp),this.renderingToTexture=!0,l=[]))}a(),l.length>0&&Ne(e,this,n,l,this._updateTimestamp),e.currentLayer=this.drapeFirst?-1:o}raycast(t,e,i){if(!this._visibleDemTiles)return null;const n=this._visibleDemTiles.filter((t=>t.dem)).map((n=>{const r=n.tileID,a=Math.pow(2,r.overscaledZ),{x:s,y:o}=r.canonical,l=s/a,h=(s+1)/a,u=o/a,c=(o+1)/a;return{minx:l,miny:u,maxx:h,maxy:c,t:n.dem.tree.raycastRoot(l,u,h,c,t,e,i),tile:n}}));n.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const r of n){if(null==r.t)return null;const n=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,t,e,i);if(null!=n)return n}return null}_createFBO(){const e=this.painter.context,i=e.gl,n=this.drapeBufferSize;e.activeTexture.set(i.TEXTURE0);const r=new t.Texture(e,{width:n[0],height:n[1],data:null},i.RGBA);r.bind(i.LINEAR,i.CLAMP_TO_EDGE);const a=e.createFramebuffer(n[0],n[1],!1);return a.colorAttachment.set(r.texture),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:a,tex:r,dirty:!1,ref:1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){return!this.drapeFirst||this.painter.style._order.some((t=>{const e=this.painter.style._layers[t],i=!e.isHidden(this.painter.transform.zoom),n=e.getCrossfadeParameters();return"custom"!==e.type&&!i&&!!n&&1!==n.t}))}_clearRasterFadeFromRenderCache(){for(const t in this.painter.style._sourceCaches)if(!(this.painter.style._sourceCaches[t]._source instanceof P))return;for(let t=0;t<this.painter.style._order.length;++t){const e=this.painter.style._layers[this.painter.style._order[t]],i=e.isHidden(this.painter.transform.zoom),n=this.painter.style._getLayerSourceCache(e);if("raster"!==e.type||i||!n)continue;const r=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][n.id];if(e)for(const t of e){const e=He(n.getTile(t),n.findLoadedParent(t,0),n,this.painter.transform,r);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(n.id,t)}}}}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()){if(e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={},e.renderCachePool=e.renderCachePool.concat(t)}return}this._clearRasterFadeFromRenderCache();const i=this.proxyCoords,n=this._tilesDirty;for(let r=i.length-1;r>=0;r--){const a=i[r];if(e.getTileByID(a.key),void 0!==e.proxyCachedFBO[a.key]){const i=t[a.key],r=this.proxyToSource[a.key];let s=0;for(const t in r){const e=r[t],a=i[t];if(!a||a.length!==e.length||e.some(((e,i)=>e!==a[i]||n[t]&&n[t].hasOwnProperty(e.key)))){s=-1;break}++s}e.renderCache[e.proxyCachedFBO[a.key]].dirty=s<0||s!==Object.values(i).length}else{let t=e.renderCachePool.pop();void 0===t&&e.renderCache.length<50&&(t=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==t&&(e.proxyCachedFBO[a.key]=t,e.renderCache[t].dirty=!0)}}this._tilesDirty={}}_setupStencil(e,i,n){if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,a=r.gl;if(e.length<=1)return void(this._overlapStencilType=!1);const s=this.currentFBO,o=s.fb;let l;if(i.isTileClipped())l=e.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);l=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}if(!o.depthAttachment){const e=r.createRenderbuffer(r.gl.DEPTH_STENCIL,o.width,o.height);o.depthAttachment=new t.DepthStencilAttachment(r,o.framebuffer),o.depthAttachment.set(e),r.clear({stencil:0})}s.ref+l>255&&(r.clear({stencil:0}),s.ref=0),s.ref+=l,this._overlapStencilMode.ref=s.ref,i.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,i){const n=this.painter,r=this.painter.context,a=r.gl;n._tileClippingMaskIDs={},r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const s=n.useProgram("clippingMask");for(const o of e){const e=n._tileClippingMaskIDs[o.key]=--i;s.draw(r,a.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:a.ALWAYS,mask:0},e,255,a.KEEP,a.KEEP,a.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,je(o.posMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}pointCoordinate(e){const i=this.painter.transform;if(e.x<0||e.x>i.width||e.y<0||e.y>i.height)return null;const n=[e.x,e.y,1,1];t.transformMat4(n,n,i.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),n[0]/=i.worldSize,n[1]/=i.worldSize;const r=i._camera.position,a=t.mercatorZfromAltitude(1,i.center.lat),s=[r[0],r[1],r[2]/a,0],o=t.subtract([],n.slice(0,3),s);t.normalize(o,o);const l=this.raycast(s,o,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(s,s,o,l),s[3]=s[2],s[2]*=a,s):null}drawDepth(){const e=this.painter,i=e.context,n=this.proxySourceCache,r=Math.ceil(e.width),a=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===a||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const e=i.gl,n=i.createFramebuffer(r,a,!0);i.activeTexture.set(e.TEXTURE0);const s=new t.Texture(i,{width:r,height:a,data:null},e.RGBA);s.bind(e.NEAREST,e.CLAMP_TO_EDGE),n.colorAttachment.set(s.texture);const o=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,r,a);n.depthAttachment.set(o),this._depthFBO=n,this._depthTexture=s}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,r,a]),function(e,i,n,r){const a=e.context,s=a.gl;a.clear({depth:1});const o=e.useProgram("terrainDepth"),l=new t.DepthMode(s.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const e of r){const r=n.getTile(e),h=Fe(e.posMatrix,0);i.setupElevationDraw(r,o),o.draw(a,s.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,h,"terrain_depth",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments)}}(e,this,n,this.proxyCoords),i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height]),this._depthDone=!0}_isLayerDrapedOverTerrain(t){return!!this.enabled&&Ue.hasOwnProperty(t.type)}_setupProxiedCoordsForOrtho(t,e,i){if(t.getSource()instanceof D)return this._setupProxiedCoordsForImageSource(t,e,i);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const n=this.proxiedCoords[t.id]=[],r=this.proxyCoords;for(let e=0;e<r.length;e++){const a=r[e],s=this._findTileCoveringTileID(a,t);if(s){const e=this._createProxiedId(a,s,i[a.key]&&i[a.key][t.id]);n.push(e),this.proxyToSource[a.key][t.id]=[e]}}let a=!1;for(let r=0;r<e.length;r++){const s=t.getTile(e[r]);if(!s||!s.hasData())continue;const o=this._findTileCoveringTileID(s.tileID,this.proxySourceCache);if(o&&o.tileID.canonical.z!==s.tileID.canonical.z){const e=this.proxyToSource[o.tileID.key][t.id],r=this._createProxiedId(o.tileID,s,i[o.tileID.key]&&i[o.tileID.key][t.id]);e?e.splice(e.length-1,0,r):this.proxyToSource[o.tileID.key][t.id]=[r],n.push(r),a=!0}}this._sourceTilesOverlap[t.id]=a}_setupProxiedCoordsForImageSource(e,i,n){if(!e.getSource().loaded())return;const r=this.proxiedCoords[e.id]=[],a=this.proxyCoords,s=e.getSource(),o=new t.Point(s.tileID.x,s.tileID.y)._div(1<<s.tileID.z),l=s.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-o.x),t.min.y=Math.min(t.min.y,e.y-o.y),t.max.x=Math.max(t.max.x,e.x-o.x),t.max.y=Math.max(t.max.y,e.y-o.y),t)),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),h=(e,i)=>{const n=e.wrap+e.canonical.x/(1<<e.canonical.z),r=e.canonical.y/(1<<e.canonical.z),a=t.EXTENT/(1<<e.canonical.z),s=i.wrap+i.canonical.x/(1<<i.canonical.z),o=i.canonical.y/(1<<i.canonical.z);return n+a<s+l.min.x||n>s+l.max.x||r+a<o+l.min.y||r>o+l.max.y};for(let t=0;t<a.length;t++){const s=a[t];for(let t=0;t<i.length;t++){const a=e.getTile(i[t]);if(!a||!a.hasData())continue;if(h(s,a.tileID))continue;const o=this._createProxiedId(s,a,n[s.key]&&n[s.key][e.id]),l=this.proxyToSource[s.key][e.id];l?l.push(o):this.proxyToSource[s.key][e.id]=[o],r.push(o)}}}_createProxiedId(e,i,n){let r=this.orthoMatrix;if(n){const t=n.find((t=>t.key===i.tileID.key));if(t)return t}if(i.tileID.key!==e.key){const n=e.canonical.z-i.tileID.canonical.z;let a,s,o;r=t.create();const l=i.tileID.wrap-e.wrap<<e.overscaledZ;n>0?(a=t.EXTENT>>n,s=a*((i.tileID.canonical.x<<n)-e.canonical.x+l),o=a*((i.tileID.canonical.y<<n)-e.canonical.y)):(a=t.EXTENT<<-n,s=t.EXTENT*(i.tileID.canonical.x-(e.canonical.x+l<<-n)),o=t.EXTENT*(i.tileID.canonical.y-(e.canonical.y<<-n))),t.ortho(r,0,a,0,a,0,1),t.translate(r,r,[s,o,0])}return new Ge(i.tileID,e.key,r)}_findTileCoveringTileID(e,i){let n=i.getTile(e);if(n&&n.hasData())return n;const r=this._findCoveringTileCache[i.id],a=r[e.key];if(n=a?i.getTileByID(a):null,n&&n.hasData()||null===a)return n;let s=n?n.tileID:e,o=s.overscaledZ;const l=i.getSource().minzoom,h=[];if(!a){const r=i.getSource().maxzoom;if(e.canonical.z>=r){const n=e.canonical.z-r;i.getSource().reparseOverscaled?(o=Math.max(e.canonical.z+2,i.transform.tileZoom),s=new t.OverscaledTileID(o,e.wrap,r,e.canonical.x>>n,e.canonical.y>>n)):0!==n&&(o=r,s=new t.OverscaledTileID(o,e.wrap,r,e.canonical.x>>n,e.canonical.y>>n))}s.key!==e.key&&(h.push(s.key),n=i.getTile(s))}const u=t=>{h.forEach((e=>{r[e]=t})),h.length=0};for(o-=1;o>=l&&(!n||!n.hasData());o--){n&&u(n.tileID.key);const t=s.calculateScaledKey(o);if(n=i.getTileByID(t),n&&n.hasData())break;const e=r[t];if(null===e)break;void 0===e?h.push(t):n=i.getTileByID(e)}return u(n?n.tileID.key:null),n&&n.hasData()?n:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(t){this.renderedToTile||(this.renderedToTile=!0)}_clearRenderCacheForTile(t,e){let i=this._tilesDirty[t];i||(i=this._tilesDirty[t]={}),i[e.key]=!0}}function Ze(t){const e=[];for(let i=0;i<t.length;i++){if(null===t[i])continue;const n=t[i].split(" ");e.push(n.pop())}return e}class qe{static cacheKey(t,e,i){let n=`${t}${i?i.cacheKey:""}`;for(const t of e)n+=`/${t}`;return n}constructor(e,i,n,r,a,s){const o=e.gl;this.program=o.createProgram();const l=Ze(n.staticAttributes),h=r?r.getBinderAttributes():[],u=l.concat(h),c=n.staticUniforms?Ze(n.staticUniforms):[],d=r?r.getBinderUniforms():[],m=c.concat(d),p=[];for(const t of m)p.indexOf(t)<0&&p.push(t);let f=r?r.defines():[];f=f.concat(s.map((t=>`#define ${t}`)));const y=f.concat(Jt.fragmentSource,n.fragmentSource).join("\n"),g=f.concat(Jt.vertexSource,Wt.vertexSource,n.vertexSource).join("\n"),_=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost())return void(this.failedToCreate=!0);o.shaderSource(_,y),o.compileShader(_),o.attachShader(this.program,_);const v=o.createShader(o.VERTEX_SHADER);if(o.isContextLost())return void(this.failedToCreate=!0);o.shaderSource(v,g),o.compileShader(v),o.attachShader(this.program,v),this.attributes={};const b={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(o.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);o.linkProgram(this.program),o.deleteShader(v),o.deleteShader(_);for(let t=0;t<p.length;t++){const e=p[t];if(e&&!b[e]){const t=o.getUniformLocation(this.program,e);t&&(b[e]=t)}}this.fixedUniforms=a(e,b),this.binderUniforms=r?r.getUniforms(e,b):[],-1!==s.indexOf("TERRAIN")&&(this.terrainUniforms=((e,i)=>({u_dem:new t.Uniform1i(e,i.u_dem),u_dem_prev:new t.Uniform1i(e,i.u_dem_prev),u_dem_unpack:new t.Uniform4f(e,i.u_dem_unpack),u_dem_tl:new t.Uniform2f(e,i.u_dem_tl),u_dem_scale:new t.Uniform1f(e,i.u_dem_scale),u_dem_tl_prev:new t.Uniform2f(e,i.u_dem_tl_prev),u_dem_scale_prev:new t.Uniform1f(e,i.u_dem_scale_prev),u_dem_size:new t.Uniform1f(e,i.u_dem_size),u_dem_lerp:new t.Uniform1f(e,i.u_dem_lerp),u_exaggeration:new t.Uniform1f(e,i.u_exaggeration),u_depth:new t.Uniform1i(e,i.u_depth),u_depth_size_inv:new t.Uniform2f(e,i.u_depth_size_inv),u_meter_to_dem:new t.Uniform1f(e,i.u_meter_to_dem),u_label_plane_matrix_inv:new t.UniformMatrix4f(e,i.u_label_plane_matrix_inv)}))(e,b))}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const i=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)i[t].set(e[t])}}draw(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f){const y=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(n),t.setColorMode(r),t.setCullFace(a);for(const t in this.fixedUniforms)this.fixedUniforms[t].set(s[t]);m&&m.setUniforms(t,this.binderUniforms,c,{zoom:d});const g={[y.LINES]:2,[y.TRIANGLES]:3,[y.LINE_STRIP]:1}[e];for(const i of u.get()){const n=i.vaos||(i.vaos={});(n[o]||(n[o]=new ke)).bind(t,this,l,m?m.getPaintVertexBuffers():[],h,i.vertexOffset,p,f),y.drawElements(e,i.primitiveLength*g,y.UNSIGNED_SHORT,i.primitiveOffset*g*2)}}}function Ye(t,e,i){const n=1/A(i,1,e.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,e.transform.tileZoom)/r,s=a*(i.tileID.canonical.x+i.tileID.wrap*r),o=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[s>>16,o>>16],u_pixel_coord_lower:[65535&s,65535&o]}}const We=(e,i,n,r)=>{const a=i.style.light,s=a.properties.get("position"),o=[s.x,s.y,s.z],l=t.create$1();"viewport"===a.properties.get("anchor")&&(t.fromRotation(l,-i.transform.angle),t.transformMat3(o,o,l));const h=a.properties.get("color");return{u_matrix:e,u_lightpos:o,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[h.r,h.g,h.b],u_vertical_gradient:+n,u_opacity:r}},Je=(e,i,n,r,a,s,o)=>t.extend(We(e,i,n,r),Ye(s,i,o),{u_height_factor:-Math.pow(2,a.overscaledZ)/o.tileSize/8}),Xe=t=>({u_matrix:t}),Ke=(e,i,n,r)=>t.extend(Xe(e),Ye(n,i,r)),Qe=(t,e)=>({u_matrix:t,u_world:e}),ti=(e,i,n,r,a)=>t.extend(Ke(e,i,n,r),{u_world:a}),ei=(e,i,n,r)=>{const a=e.transform;let s;if("map"===r.paint.get("circle-pitch-alignment")){const t=A(n,1,a.zoom);s=[t,t]}else s=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:e.translatePosMatrix(i.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:s}},ii=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},ni=(e,i,n)=>{const r=t.EXTENT/n.tileSize;return{u_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/r,i.pixelsToGLUnits[1]/r]}},ri=(t,e,i=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}),ai=(t,e,i,n)=>({u_matrix:t,u_extrude_scale:A(e,1,i),u_intensity:n}),si=(e,i,n,r)=>{const a=e.transform;return{u_matrix:ci(e,i,n,r),u_ratio:1/A(i,1,a.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},oi=(e,i,n,r,a)=>t.extend(si(e,i,n,r),{u_image:0,u_image_height:a}),li=(e,i,n,r,a)=>{const s=e.transform,o=ui(i,s);return{u_matrix:ci(e,i,n,a),u_texsize:i.imageAtlasTexture.size,u_ratio:1/A(i,1,s.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},hi=(e,i,n,r,a,s)=>{const o=e.lineAtlas,l=ui(i,e.transform),h="round"===n.layout.get("line-cap"),u=o.getDash(r.from,h),c=o.getDash(r.to,h),d=u.width*a.fromScale,m=c.width*a.toScale;return t.extend(si(e,i,n,s),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/m,-c.height/2],u_sdfgamma:o.width/(256*Math.min(d,m)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:a.t})};function ui(t,e){return 1/A(t,1,e.tileZoom)}function ci(t,e,i,n){return t.translatePosMatrix(n||e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const di=(t,e,i,n,r)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(s=r.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=r.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:mi(r.paint.get("raster-hue-rotate"))};var a,s};function mi(t){t*=Math.PI/180;const e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}const pi=(t,e,i,n,r,a,s,o,l,h)=>{const u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:o,u_is_text:+l,u_pitch_with_map:+n,u_texsize:h,u_texture:0}},fi=(e,i,n,r,a,s,o,l,h,u,c)=>{const d=a.transform;return t.extend(pi(e,i,n,r,a,s,o,l,h,u),{u_gamma_scale:r?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+c})},yi=(e,i,n,r,a,s,o,l,h,u)=>t.extend(fi(e,i,n,r,a,s,o,l,!0,h,!0),{u_texsize_icon:u,u_texture_icon:1}),gi=(t,e,i)=>({u_matrix:t,u_opacity:e,u_color:i}),_i=(e,i,n,r,a,s)=>t.extend(function(t,e,i,n){const r=i.imageManager.getPattern(t.from.toString()),a=i.imageManager.getPattern(t.to.toString()),{width:s,height:o}=i.imageManager.getPixelSize(),l=Math.pow(2,n.tileID.overscaledZ),h=n.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=h*(n.tileID.canonical.x+n.tileID.wrap*l),c=h*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,o],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/A(n,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,c>>16],u_pixel_coord_lower:[65535&u,65535&c]}}(r,s,n,a),{u_matrix:e,u_opacity:i}),vi={fillExtrusion:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fillExtrusionPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fill:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),fillPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),fillOutline:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}),fillOutlinePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),circle:(e,i)=>({u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),collisionBox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale)}),collisionCircle:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}),debug:(e,i)=>({u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}),clippingMask:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmap:(e,i)=>({u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmapTexture:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}),hillshade:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}),hillshadePrepare:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}),line:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}),lineGradient:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image),u_image_height:new t.Uniform1f(e,i.u_image_height)}),linePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),lineSDF:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}),raster:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}),symbolIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}),symbolSDF:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),symbolTextAndIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),background:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}),backgroundPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}),terrainRaster:ze,terrainDepth:ze,skybox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_sun_direction:new t.Uniform3f(e,i.u_sun_direction),u_cubemap:new t.Uniform1i(e,i.u_cubemap),u_opacity:new t.Uniform1f(e,i.u_opacity),u_temporal_offset:new t.Uniform1f(e,i.u_temporal_offset)}),skyboxGradient:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_center_direction:new t.Uniform3f(e,i.u_center_direction),u_radius:new t.Uniform1f(e,i.u_radius),u_opacity:new t.Uniform1f(e,i.u_opacity),u_temporal_offset:new t.Uniform1f(e,i.u_temporal_offset)}),skyboxCapture:(e,i)=>({u_matrix_3f:new t.UniformMatrix3f(e,i.u_matrix_3f),u_sun_direction:new t.Uniform3f(e,i.u_sun_direction),u_sun_intensity:new t.Uniform1f(e,i.u_sun_intensity),u_color_tint_r:new t.Uniform4f(e,i.u_color_tint_r),u_color_tint_m:new t.Uniform4f(e,i.u_color_tint_m),u_luminance:new t.Uniform1f(e,i.u_luminance)})};let bi;function Mi(e,i,n,r,a,s,o){const l=e.context,h=l.gl,u=e.useProgram("collisionBox"),c=[];let d=0,m=0;for(let p=0;p<r.length;p++){const f=r[p],y=i.getTile(f),g=y.getBucket(n);if(!g)continue;let _=f.posMatrix;0===a[0]&&0===a[1]||(_=e.translatePosMatrix(f.posMatrix,y,a,s));const v=o?g.textCollisionBox:g.iconCollisionBox,b=g.collisionCircleArray;if(b.length>0){const i=t.create(),n=_;t.mul(i,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(i,i,g.placementViewportMatrix),c.push({circleArray:b,circleOffset:m,transform:n,invTransform:i}),d+=b.length/4,m=d}v&&(e.terrain&&e.terrain.setupElevationDraw(y,u),u.draw(l,h.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,ni(_,e.transform,y),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,v.collisionVertexBuffer,v.collisionVertexBufferExt))}if(!o||!c.length)return;const p=e.useProgram("collisionCircle"),f=new t.StructArrayLayout2f1f2i16;f.resize(4*d),f._trim();let y=0;for(const t of c)for(let e=0;e<t.circleArray.length/4;e++){const i=4*e,n=t.circleArray[i+0],r=t.circleArray[i+1],a=t.circleArray[i+2],s=t.circleArray[i+3];f.emplace(y++,n,r,a,s,0),f.emplace(y++,n,r,a,s,1),f.emplace(y++,n,r,a,s,2),f.emplace(y++,n,r,a,s,3)}(!bi||bi.length<2*d)&&(bi=function(e){const i=2*e,n=new t.StructArrayLayout3ui6;n.resize(i),n._trim();for(let t=0;t<i;t++){const e=6*t;n.uint16[e+0]=4*t+0,n.uint16[e+1]=4*t+1,n.uint16[e+2]=4*t+2,n.uint16[e+3]=4*t+2,n.uint16[e+4]=4*t+3,n.uint16[e+5]=4*t+0}return n}(d));const g=l.createIndexBuffer(bi,!0),_=l.createVertexBuffer(f,t.collisionCircleLayout.members,!0);for(const i of c){const r={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(v=e.transform).cameraToCenterDistance,u_viewport_size:[v.width,v.height]};p.draw(l,h.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,r,n.id,_,g,t.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,e.transform.zoom,null,null,null)}var v;_.destroy(),g.destroy()}const xi=t.identity(new Float32Array(16));function wi(e,i,n,r,a,s){const{horizontalAlign:o,verticalAlign:l}=t.getAnchorAlignment(e),h=-(o-.5)*i,u=-(l-.5)*n,c=t.evaluateVariableOffset(e,r);return new t.Point((h/a+c[0])*s,(u/a+c[1])*s)}function Si(e,i,n,r,a,s,o,l,h,u,c,d){const m=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,y={};p.clear();for(let f=0;f<m.length;f++){const g=m.get(f),_=e.allowVerticalPlacement&&!g.placedOrientation,v=g.hidden||!g.crossTileID||_?null:r[g.crossTileID];if(v){const r=new t.Point(g.anchorX,g.anchorY),m=d(r),f=rt(r,n?l:o,m),_=at(s.cameraToCenterDistance,f.signedDistanceFromCamera);let b=a.evaluateSizeForFeature(e.textSizeData,u,g)*_/t.ONE_EM;n&&(b*=e.tilePixelRatio/h);const{width:M,height:x,anchor:w,textOffset:S,textBoxScale:A}=v,T=wi(w,M,x,S,A,b),C=n?rt(r.add(T),o,m).point:f.point.add(i?T.rotate(-s.angle):T),I=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<g.numGlyphs;e++)t.addDynamicAttributes(p,C,I);c&&g.associatedIconIndex>=0&&(y[g.associatedIconIndex]={shiftedAnchor:C,angle:I})}else pt(g.numGlyphs,p)}if(c){f.clear();const i=e.icon.placedSymbolArray;for(let e=0;e<i.length;e++){const n=i.get(e);if(n.hidden)pt(n.numGlyphs,f);else{const i=y[e];if(i)for(let e=0;e<n.numGlyphs;e++)t.addDynamicAttributes(f,i.shiftedAnchor,i.angle);else pt(n.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function Ai(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Ti(e,i,n,r,a,s,o,l,h,u,c,d){const m=e.context,p=m.gl,f=e.transform,y="map"===l,g="map"===h,_=y&&"point"!==n.layout.get("symbol-placement"),v=y&&!g&&!_,b=void 0!==n.layout.get("symbol-sort-key").constantOr(1);let M=!1;const x=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),w=n.layout.get("text-variable-anchor"),S=[],T=e.terrain&&g?["PITCH_WITH_MAP_TERRAIN"]:null;for(const l of r){const r=i.getTile(l),h=r.getBucket(n);if(!h)continue;const c=a?h.text:h.icon;if(!c||!c.segments.get().length)continue;const d=c.programConfigurations.get(n.id),m=a||h.sdfIcons,x=a?h.textSizeData:h.iconSizeData,C=g||0!==f.pitch,I=e.useProgram(Ai(m,a,h),d,T),k=t.evaluateSizeForZoom(x,f.zoom);let P,E,D,L,z=[0,0],F=null;if(a){if(E=r.glyphAtlasTexture,D=p.LINEAR,P=r.glyphAtlasTexture.size,h.iconsInText){z=r.imageAtlasTexture.size,F=r.imageAtlasTexture;const t="composite"===x.kind||"camera"===x.kind;L=C||e.options.rotating||e.options.zooming||t?p.LINEAR:p.NEAREST}}else{const t=1!==n.layout.get("icon-size").constantOr(0)||h.iconsNeedLinear;E=r.imageAtlasTexture,D=m||e.options.rotating||e.options.zooming||t||C?p.LINEAR:p.NEAREST,P=r.imageAtlasTexture.size}const O=A(r,1,e.transform.zoom),R=it(l.posMatrix,g,y,e.transform,O),N=e.terrain&&g&&_?t.invert(new Float32Array(16),R):xi,B=nt(l.posMatrix,g,y,e.transform,O),j=w&&h.hasTextData(),H="none"!==n.layout.get("icon-text-fit")&&j&&h.hasIconData();if(_){const t=f.elevation;ot(h,l.posMatrix,e,a,R,B,g,u,t?e=>t.getAtTileOffset(l,e.x,e.y):null)}const U=e.translatePosMatrix(l.posMatrix,r,s,o),V=_||a&&w||H?xi:R,G=e.translatePosMatrix(B,r,s,o,!0),$=m&&0!==n.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);let Z;Z=m?h.iconsInText?yi(x.kind,k,v,g,e,U,V,G,P,z):fi(x.kind,k,v,g,e,U,V,G,a,P,!0):pi(x.kind,k,v,g,e,U,V,G,a,P);const q={program:I,buffers:c,uniformValues:Z,atlasTexture:E,atlasTextureIcon:F,atlasInterpolation:D,atlasInterpolationIcon:L,isSDF:m,hasHalo:$,tile:r,labelPlaneMatrixInv:N};if(b&&h.canOverlap){M=!0;const e=c.segments.get();for(const i of e)S.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:q})}else S.push({segments:c.segments,sortKey:0,state:q})}M&&S.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of S){const i=t.state;if(e.terrain&&e.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:i.labelPlaneMatrixInv}),m.activeTexture.set(p.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,p.CLAMP_TO_EDGE),i.atlasTextureIcon&&(m.activeTexture.set(p.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),i.isSDF){const r=i.uniformValues;i.hasHalo&&(r.u_is_halo=1,Ci(i.buffers,t.segments,n,e,i.program,x,c,d,r)),r.u_is_halo=0}Ci(i.buffers,t.segments,n,e,i.program,x,c,d,i.uniformValues)}}function Ci(e,i,n,r,a,s,o,l,h){const u=r.context;a.draw(u,u.gl.TRIANGLES,s,o,l,t.CullFaceMode.disabled,h,n.id,e.layoutVertexBuffer,e.indexBuffer,i,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Ii(e,i,n,r,a,s,o){const l=e.context.gl,h=n.paint.get("fill-pattern"),u=h&&h.constantOr(1),c=n.getCrossfadeParameters();let d,m,p,f,y;o?(m=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(m=u?"fillPattern":"fill",d=l.TRIANGLES);for(const g of r){const r=i.getTile(g);if(u&&!r.patternsLoaded())continue;const _=r.getBucket(n);if(!_)continue;e.prepareDrawTile(g);const v=_.programConfigurations.get(n.id),b=e.useProgram(m,v);u&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(c));const M=h.constantOr(null);if(M&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[M.to.toString()],i=t.patternPositions[M.from.toString()];e&&i&&v.setConstantPatternPositions(e,i)}const x=e.translatePosMatrix(g.posMatrix,r,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){f=_.indexBuffer2,y=_.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];p="fillOutlinePattern"===m&&u?ti(x,e,c,r,t):Qe(x,t)}else f=_.indexBuffer,y=_.segments,p=u?Ke(x,e,c,r):Xe(x);b.draw(e.context,d,a,e.stencilModeForClipping(g),s,t.CullFaceMode.disabled,p,n.id,_.layoutVertexBuffer,f,y,n.paint,e.transform.zoom,v)}}function ki(e,i,n,r,a,s,o){const l=e.context,h=l.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),d=n.getCrossfadeParameters(),m=n.paint.get("fill-extrusion-opacity");for(const p of r){const r=i.getTile(p),f=r.getBucket(n);if(!f)continue;const y=f.programConfigurations.get(n.id),g=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);if(e.terrain){const t=e.terrain;if(!f.enableTerrain)continue;if(t.setupElevationDraw(r,g,{useMeterToDem:!0}),Pi(l,i,p,f,n,t),!f.centroidVertexBuffer){const t=g.attributes.a_centroid_pos;void 0!==t&&h.vertexAttrib2f(t,0,0)}}c&&(e.context.activeTexture.set(h.TEXTURE0),r.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),y.updatePaintBuffers(d));const _=u.constantOr(null);if(_&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[_.to.toString()],i=t.patternPositions[_.from.toString()];e&&i&&y.setConstantPatternPositions(e,i)}const v=e.translatePosMatrix(p.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),b=n.paint.get("fill-extrusion-vertical-gradient"),M=c?Je(v,e,b,m,p,d,r):We(v,e,b,m);g.draw(l,l.gl.TRIANGLES,a,s,o,t.CullFaceMode.backCCW,M,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,n.paint,e.transform.zoom,y,e.terrain?f.centroidVertexBuffer:null)}}function Pi(e,i,n,r,a,s){const o=[e=>{let i=e.canonical.x-1,n=e.wrap;return i<0&&(i=(1<<e.canonical.z)-1,n--),new t.OverscaledTileID(e.overscaledZ,n,e.canonical.z,i,e.canonical.y)},e=>{let i=e.canonical.x+1,n=e.wrap;return i===1<<e.canonical.z&&(i=0,n++),new t.OverscaledTileID(e.overscaledZ,n,e.canonical.z,i,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=i.getSource().maxzoom;for(const n of[0,-1,1]){if(t.overscaledZ+n<e)continue;if(n>0&&t.overscaledZ<e)continue;const r=i.getTileByID(t.calculateScaledKey(t.overscaledZ+n));if(r&&r.hasData()){const t=r.getBucket(a);if(t)return t}}},h=[0,0,0],u=(e,i)=>(h[0]=Math.min(e.min.y,i.min.y),h[1]=Math.max(e.max.y,i.max.y),h[2]=t.EXTENT-i.min.x>e.max.x?i.min.x-t.EXTENT:e.max.x,h),c=(e,i)=>(h[0]=Math.min(e.min.x,i.min.x),h[1]=Math.max(e.max.x,i.max.x),h[2]=t.EXTENT-i.min.y>e.max.y?i.min.y-t.EXTENT:e.max.y,h),d=[(t,e)=>u(t,e),(t,e)=>u(e,t),(t,e)=>c(t,e),(t,e)=>c(e,t)],m=new t.Point(0,0);let p,f,y;const g=(e,i,r,a,o)=>{const l=[[a?r:e,a?e:r,0],[a?r:i,a?i:r,0]],h=o<0?t.EXTENT+o:o,u=[a?h:(e+i)/2,a?(e+i)/2:h,0];return 0===r&&o<0||0!==r&&o>0?s.getForTilePoints(y,[u],!0,f):l.push(u),s.getForTilePoints(n,l,!0,p),Math.max(l[0][2],l[1][2],u[2])/s.exaggeration()};for(let e=0;e<4;e++){const i=r.borders[e];if(0===i.length&&(r.borderDone[e]=!0),r.borderDone[e])continue;const a=y=o[e](n),h=l(a);if(!h||!h.enableTerrain)continue;if(f=s.findDEMTileFor(a),!f||!f.dem)continue;if(!p){const t=s.findDEMTileFor(n);if(!t||!t.dem)return;p=t}const u=(e<2?1:5)-e,c=h.borders[u];let _=0;for(let n=0;n<i.length;n++){const a=r.featuresOnBorder[i[n]],s=a.borders[e];let o;for(;_<c.length&&(o=h.featuresOnBorder[c[_]],!(o.borders[u][1]>s[0]+3));)h.borderDone[u]||h.encodeCentroid(void 0,o,!1),_++;if(o&&_<c.length){const i=_;let n=0;for(;!(o.borders[u][0]>s[1]-3)&&(n++,++_!==c.length);)o=h.featuresOnBorder[c[_]];if(o=h.featuresOnBorder[c[i]],a.intersectsCount()>1||o.intersectsCount()>1||1!==n){1!==n&&(_=i),r.encodeCentroid(void 0,a,!1),h.borderDone[u]||h.encodeCentroid(void 0,o,!1);continue}const l=d[e](a,o),p=e%2?t.EXTENT-1:0;m.x=g(l[0],Math.min(t.EXTENT-1,l[1]),p,e<2,l[2]),m.y=0,r.encodeCentroid(m,a,!1),h.borderDone[u]||h.encodeCentroid(m,o,!1)}else r.encodeCentroid(void 0,a,!1)}r.borderDone[e]=r.needsCentroidUpdate=!0,h.borderDone[u]||(h.borderDone[u]=h.needsCentroidUpdate=!0)}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(e)}const Ei=new t.Color(1,0,0,1),Di=new t.Color(0,1,0,1),Li=new t.Color(0,0,1,1),zi=new t.Color(1,0,1,1),Fi=new t.Color(0,1,1,1);function Oi(t,e,i,n){Ni(t,0,e+i/2,t.transform.width,i,n)}function Ri(t,e,i,n){Ni(t,e-i/2,0,i,t.transform.height,n)}function Ni(e,i,n,r,a,s){const o=e.context,l=o.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*t.browser.devicePixelRatio,n*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,a*t.browser.devicePixelRatio),o.clear({color:s}),l.disable(l.SCISSOR_TEST)}function Bi(e,i,n){const r=e.context,a=r.gl,s=n.posMatrix,o=e.useProgram("debug"),l=i.getTileByID(n.key);e.terrain&&e.terrain.setupElevationDraw(l,o);const h=t.DepthMode.disabled,u=t.StencilMode.disabled,c=e.colorModeForRenderPass();r.activeTexture.set(a.TEXTURE0),e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),o.draw(r,a.LINE_STRIP,h,u,c,t.CullFaceMode.disabled,ri(s,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);const d=l.latestRawTileData,m=Math.floor((d&&d.byteLength||0)/1024),p=i.getTile(n).tileSize,f=512/Math.min(p,512)*(n.overscaledZ/e.transform.zoom)*.5;let y=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(y+=` => ${n.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const i=t.debugOverlayCanvas,n=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,`${y} ${m}kb`),o.draw(r,a.TRIANGLES,h,u,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,ri(s,t.Color.transparent,f),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const ji=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Hi}=ji;function Ui(t,e,i,n){t.emplaceBack(e,i,n)}class Vi{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,Ui(this.vertexArray,-1,-1,1),Ui(this.vertexArray,1,-1,1),Ui(this.vertexArray,-1,1,1),Ui(this.vertexArray,1,1,1),Ui(this.vertexArray,-1,-1,-1),Ui(this.vertexArray,1,-1,-1),Ui(this.vertexArray,-1,1,-1),Ui(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Hi),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Gi(e,i,n,r,a,s){const o=e.gl,l=i.paint.get("sky-atmosphere-color"),h=i.paint.get("sky-atmosphere-halo-color"),u=i.paint.get("sky-atmosphere-sun-intensity"),c=((t,e,i,n,r)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:i,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(t.fromMat4([],r),a,u,l,h);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+s,i.skyboxTexture,0),n.draw(e,o.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,c,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const $i={symbol:function(e,i,n,r,a){if("translucent"!==e.renderPass)return;const s=t.StencilMode.disabled,o=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,i,n,r,a,s,o){const l=i.transform,h="map"===a,u="map"===s;for(const a of e){const e=r.getTile(a),s=e.getBucket(n);if(!s||!s.text||!s.text.segments.get().length)continue;const c=t.evaluateSizeForZoom(s.textSizeData,l.zoom),d=A(e,1,i.transform.zoom),m=it(a.posMatrix,u,h,i.transform,d),p="none"!==n.layout.get("icon-text-fit")&&s.hasIconData();if(c){const i=Math.pow(2,l.zoom-e.tileID.overscaledZ),n=l.elevation;Si(s,h,u,o,t.symbolSize,l,m,a.posMatrix,i,c,p,n?t=>n.getAtTileOffset(a,t.x,t.y):t=>0)}}}(r,e,n,i,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),a),0!==n.paint.get("icon-opacity").constantOr(1)&&Ti(e,i,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),s,o),0!==n.paint.get("text-opacity").constantOr(1)&&Ti(e,i,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),s,o),i.map.showCollisionBoxes&&(Mi(e,i,n,r,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Mi(e,i,n,r,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(e,i,n,r){if("translucent"!==e.renderPass)return;const a=n.paint.get("circle-opacity"),s=n.paint.get("circle-stroke-width"),o=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0===a.constantOr(1)&&(0===s.constantOr(1)||0===o.constantOr(1)))return;const h=e.context,u=h.gl,c=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,m=e.colorModeForRenderPass(),p=[];for(let a=0;a<r.length;a++){const s=r[a],o=i.getTile(s),h=o.getBucket(n);if(!h)continue;const u=h.programConfigurations.get(n.id),c=ii(n),d={programConfiguration:u,program:e.useProgram("circle",u,c),layoutVertexBuffer:h.layoutVertexBuffer,indexBuffer:h.indexBuffer,uniformValues:ei(e,s,o,n),tile:o};if(l){const e=h.segments.get();for(const i of e)p.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:d})}else p.push({segments:h.segments,sortKey:0,state:d})}l&&p.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of p){const{programConfiguration:r,program:a,layoutVertexBuffer:s,indexBuffer:o,uniformValues:l,tile:p}=i.state,f=i.segments;e.terrain&&e.terrain.setupElevationDraw(p,a,{useDepthForOcclusion:!0}),a.draw(h,u.TRIANGLES,c,d,m,t.CullFaceMode.disabled,l,n.id,s,o,f,n.paint,e.transform.zoom,r)}},heatmap:function(e,i,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const a=e.context,s=a.gl,o=t.StencilMode.disabled,l=new t.ColorMode([s.ONE,s.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){const n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let r=i.heatmapFbo;if(r)n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{const a=n.createTexture();n.bindTexture(n.TEXTURE_2D,a),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,n){const r=t.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),n.colorAttachment.set(i)}(t,e,a,r)}}(a,e,n),a.clear({color:t.Color.transparent});for(let h=0;h<r.length;h++){const u=r[h];if(i.hasRenderableParent(u))continue;const c=i.getTile(u),d=c.getBucket(n);if(!d)continue;const m=d.programConfigurations.get(n.id),p=e.useProgram("heatmap",m),{zoom:f}=e.transform;e.terrain&&e.terrain.setupElevationDraw(c,p),p.draw(a,s.TRIANGLES,t.DepthMode.disabled,o,l,t.CullFaceMode.disabled,ai(u.posMatrix,c,f,n.paint.get("heatmap-intensity")),n.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,n.paint,e.transform.zoom,m)}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){const n=e.context,r=n.gl,a=i.heatmapFbo;if(!a)return;n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);let s=i.colorRampTexture;s||(s=i.colorRampTexture=new t.Texture(n,i.colorRamp,r.RGBA)),s.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,r.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((e,i)=>{const n=t.create();t.ortho(n,0,e.width,e.height,0,0,1);const r=e.context.gl;return{u_matrix:n,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(e,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}(e,n))},line:function(e,i,n,r){if("translucent"!==e.renderPass)return;const a=n.paint.get("line-opacity"),s=n.paint.get("line-width");if(0===a.constantOr(1)||0===s.constantOr(1))return;const o=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),h=n.paint.get("line-dasharray"),u=n.paint.get("line-pattern"),c=u.constantOr(1),d=n.paint.get("line-gradient"),m=n.getCrossfadeParameters(),p=c?"linePattern":h?"lineSDF":d?"lineGradient":"line",f=e.context,y=f.gl;let g=!0;for(const a of r){const r=i.getTile(a);if(c&&!r.patternsLoaded())continue;const s=r.getBucket(n);if(!s)continue;e.prepareDrawTile(a);const _=s.programConfigurations.get(n.id),v=e.context.program.get(),b=e.useProgram(p,_),M=g||b.program!==v,x=u.constantOr(null);if(x&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[x.to.toString()],i=t.patternPositions[x.from.toString()];e&&i&&_.setConstantPatternPositions(e,i)}const w=e.terrain?a.posMatrix:null,S=c?li(e,r,n,m,w):h?hi(e,r,n,h,m,w):d?oi(e,r,n,w,s.lineClipsArray.length):si(e,r,n,w);if(c)f.activeTexture.set(y.TEXTURE0),r.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),_.updatePaintBuffers(m);else if(h&&(M||e.lineAtlas.dirty))f.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(f);else if(d){const r=s.gradients[n.id];let o=r.texture;if(n.gradientVersion!==r.version){let l=256;if(n.stepInterpolant){const n=i.getSource().maxzoom,r=a.canonical.z===n?Math.ceil(1<<e.transform.maxZoom-a.canonical.z):1;l=t.clamp(t.nextPowerOfTwo(s.maxLineLength/t.EXTENT*1024*r),256,f.maxTextureSize)}r.gradient=t.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:r.gradient||void 0,clips:s.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new t.Texture(f,r.gradient,y.RGBA),r.version=n.gradientVersion,o=r.texture}f.activeTexture.set(y.TEXTURE0),o.bind(n.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}b.draw(f,y.TRIANGLES,o,e.stencilModeForClipping(a),l,t.CullFaceMode.disabled,S,n.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,n.paint,e.transform.zoom,_,s.layoutVertexBuffer2),g=!1}},fill:function(e,i,n,r){const a=n.paint.get("fill-color"),s=n.paint.get("fill-opacity");if(0===s.constantOr(1))return;const o=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),h=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t.Color.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(e.renderPass===h){const a=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);Ii(e,i,n,r,a,o,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){const a=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);Ii(e,i,n,r,a,o,!0)}},"fill-extrusion":function(e,i,n,r){const a=n.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===e.renderPass){const s=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==a||n.paint.get("fill-extrusion-pattern").constantOr(1))ki(e,i,n,r,s,t.StencilMode.disabled,t.ColorMode.disabled),ki(e,i,n,r,s,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const a=e.colorModeForRenderPass();ki(e,i,n,r,s,t.StencilMode.disabled,a)}}},hillshade:function(e,i,n,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const a=e.context,s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),o=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[h,u]="translucent"!==e.renderPass||l?[{},r]:e.stencilConfigForOverlap(r);for(const r of u){const a=i.getTile(r);if(a.needsHillshadePrepare&&"offscreen"===e.renderPass)Le(e,a,n,s,t.StencilMode.disabled,o);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(r):h[r.overscaledZ];Ee(e,r,a,n,s,t,o)}}a.viewport.set([0,0,e.width,e.height])},raster:function(e,i,n,r,a,s){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!r.length)return;const o=e.context,l=o.gl,h=i.getSource(),u=e.useProgram("raster"),c=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,[m,p]=h instanceof D||d?[{},r]:e.stencilConfigForOverlap(r),f=p[p.length-1].overscaledZ,y=!e.options.moving;for(const r of p){const a=d?t.DepthMode.disabled:e.depthModeForSublayer(r.overscaledZ-f,1===n.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),p=i.getTile(r);if(d&&(!p||!p.hasData()))continue;const g=d?r.posMatrix:e.transform.calculatePosMatrix(r.toUnwrapped(),y),_=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(r):m[r.overscaledZ],v=s?0:n.paint.get("raster-fade-duration");p.registerFadeDuration(v);const b=i.findLoadedParent(r,0),M=He(p,b,i,e.transform,v);let x,w;e.terrain&&e.terrain.prepareDrawTile(r);const S="nearest"===n.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;o.activeTexture.set(l.TEXTURE0),p.texture.bind(S,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),o.activeTexture.set(l.TEXTURE1),b?(b.texture.bind(S,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,b.tileID.overscaledZ-p.tileID.overscaledZ),w=[p.tileID.canonical.x*x%1,p.tileID.canonical.y*x%1]):p.texture.bind(S,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const A=di(g,w||[0,0],x||1,M,n);h instanceof D?u.draw(o,l.TRIANGLES,a,t.StencilMode.disabled,c,t.CullFaceMode.disabled,A,n.id,h.boundsBuffer,e.quadTriangleIndexBuffer,h.boundsSegments):u.draw(o,l.TRIANGLES,a,_,c,t.CullFaceMode.disabled,A,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,i,n,r){const a=n.paint.get("background-color"),s=n.paint.get("background-opacity");if(0===s)return;const o=e.context,l=o.gl,h=e.transform,u=h.tileSize,c=n.paint.get("background-pattern");if(e.isPatternMissing(c))return;const d=!c&&1===a.a&&1===s&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const m=t.StencilMode.disabled,p=e.depthModeForSublayer(0,"opaque"===d?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),f=e.colorModeForRenderPass(),y=e.useProgram(c?"backgroundPattern":"background"),g=r||h.coveringTiles({tileSize:u});c&&(o.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const _=n.getCrossfadeParameters();for(const i of g){const h=r?i.posMatrix:e.transform.calculatePosMatrix(i.toUnwrapped());e.prepareDrawTile(i);const d=c?_i(h,s,e,c,{tileID:i,tileSize:u},_):gi(h,s,a);y.draw(o,l.TRIANGLES,p,m,f,t.CullFaceMode.disabled,d,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},sky:function(e,i,n){const r=n.paint.get("sky-opacity");if(0===r)return;const a=e.context,s=n.paint.get("sky-type"),o=new t.DepthMode(a.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),l=e.frameCounter/1e3%1;"atmosphere"===s?"offscreen"===e.renderPass?n.needsSkyboxCapture(e)&&(function(e,i){const n=e.context,r=n.gl;let a=i.skyboxFbo;if(!a){a=i.skyboxFbo=n.createFramebuffer(32,32,!1),i.skyboxGeometry=new Vi(n),i.skyboxTexture=n.gl.createTexture(),r.bindTexture(r.TEXTURE_CUBE_MAP,i.skyboxTexture),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR);for(let t=0;t<6;++t)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,r.RGBA,32,32,0,r.RGBA,r.UNSIGNED_BYTE,null)}n.bindFramebuffer.set(a.framebuffer),n.viewport.set([0,0,32,32]);const s=i.getCenter(e,!0),o=e.useProgram("skyboxCapture"),l=new Float64Array(16);t.identity(l),t.rotateY(l,l,.5*-Math.PI),Gi(n,i,o,l,s,0),t.identity(l),t.rotateY(l,l,.5*Math.PI),Gi(n,i,o,l,s,1),t.identity(l),t.rotateX(l,l,.5*-Math.PI),Gi(n,i,o,l,s,2),t.identity(l),t.rotateX(l,l,.5*Math.PI),Gi(n,i,o,l,s,3),t.identity(l),Gi(n,i,o,l,s,4),t.identity(l),t.rotateY(l,l,Math.PI),Gi(n,i,o,l,s,5),n.viewport.set([0,0,e.width,e.height])}(e,n),n.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,i,n,r,a){const s=e.context,o=s.gl,l=e.transform,h=e.useProgram("skybox");s.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_CUBE_MAP,i.skyboxTexture);const u=((t,e,i,n,r)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:n,u_temporal_offset:r}))(l.skyboxMatrix,i.getCenter(e,!1),0,r,a);h.draw(s,o.TRIANGLES,n,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skybox",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(e,n,o,r,l):"gradient"===s&&"sky"===e.renderPass&&function(e,i,n,r,a){const s=e.context,o=s.gl,l=e.transform,h=e.useProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new Vi(s)),s.activeTexture.set(o.TEXTURE0);let u=i.colorRampTexture;u||(u=i.colorRampTexture=new t.Texture(s,i.colorRamp,o.RGBA)),u.bind(o.LINEAR,o.CLAMP_TO_EDGE);const c=((e,i,n,r,a)=>({u_matrix:e,u_color_ramp:0,u_center_direction:i,u_radius:t.degToRad(n),u_opacity:r,u_temporal_offset:a}))(l.skyboxMatrix,i.getCenter(e,!1),i.paint.get("sky-gradient-radius"),r,a);h.draw(s,o.TRIANGLES,n,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,c,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(e,n,o,r,l)},debug:function(t,e,i){for(let n=0;n<i.length;n++)Bi(t,e,i[n])},custom:function(e,i,n){const r=e.context,a=n.implementation;if("offscreen"===e.renderPass){const t=a.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(a,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(t.StencilMode.disabled);const i="3d"===a.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);r.setDepthMode(i),a.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}};class Zi{constructor(e,i){this.context=new t.Context(e),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ut,this.gpuTimers={},this.frameCounter=0}updateTerrain(t,e){const i=!!t&&!!t.terrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new $e(this,t));const n=this._terrain;this.transform.elevation=i?n:null,n.update(t,this.transform,e)}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,i){if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style._order)this.style._layers[t].resize()}setup(){const e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,E.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const s=new t.StructArrayLayout1ui2;s.emplaceBack(0),s.emplaceBack(1),s.emplaceBack(3),s.emplaceBack(2),s.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(s);const o=new t.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(o),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now())}clearStencil(){const e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const n=t.create();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,je(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,i,n){if(!(i&&this.currentStencilSource!==i.id&&e.isTileClipped()&&n&&n.length))return;this.currentStencilSource=i.id;const r=this.context,a=r.gl;this.nextStencilID+n.length>256&&this.clearStencil(),r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const s=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of n){const i=this._tileClippingMaskIDs[e.key]=this.nextStencilID++;s.draw(r,a.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:a.ALWAYS,mask:0},i,255,a.KEEP,a.KEEP,a.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,je(e.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,i=this.context.gl;return new t.StencilMode({func:i.NOTEQUAL,mask:255},e,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const i=this.context.gl;return new t.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(e){const i=this.context.gl,n=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=n[n.length-1].overscaledZ,a=n[0].overscaledZ-r+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();const e={};for(let n=0;n<a;n++)e[n+r]=new t.StencilMode({func:i.GEQUAL,mask:255},n+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=a,[e,n]}return[{[r]:t.StencilMode.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,i,n){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(n||this.context.gl.LEQUAL,i,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();const n=this.style._order,r=this.style._sourceCaches;for(const t in r){const e=r[t];e.used&&e.prepare(this.context)}const a={},s={},o={};for(const t in r){const e=r[t];a[t]=e.getVisibleCoordinates(),s[t]=a[t].slice().reverse(),o[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<n.length;t++)if(this.style._layers[n[t]].is3D()){this.opaquePassCutoff=t;break}this.terrain&&(this.terrain.updateTileBinding(o),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of n){const i=this.style._layers[t],n=e._getLayerSourceCache(i);if(!i.hasOffscreenPass()||i.isHidden(this.transform.zoom))continue;const r=n?s[n.id]:void 0;("custom"===i.type||i.isSky()||r&&r.length)&&this.renderLayer(this,n,i,r)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[n[this.currentLayer]],i=e._getLayerSourceCache(t);if(this.terrain&&this.terrain.renderLayer(t,i)||t.isSky())continue;const r=i?s[i.id]:void 0;this._renderTileClippingMasks(t,i,r),this.renderLayer(this,i,t,r)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const t=this.style._layers[n[this.currentLayer]],i=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,i,t,i?s[i.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const t=this.style._layers[n[this.currentLayer]],i=e._getLayerSourceCache(t);if(this.terrain&&this.terrain.renderLayer(t,i)||t.isSky())continue;const r=i?("symbol"===t.type?o:s)[i.id]:void 0;this._renderTileClippingMasks(t,i,i?a[i.id]:void 0),this.renderLayer(this,i,t,r)}if(this.options.showTileBoundaries||this.options.showQueryGeometry){let i=null;t.values(this.style._layers).forEach((t=>{const n=e._getLayerSourceCache(t);n&&!t.isHidden(this.transform.zoom)&&(!i||i.getSource().maxzoom<n.getSource().maxzoom)&&(i=n)})),i&&this.options.showTileBoundaries&&$i.debug(this,i,i.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Oi(t,t.transform.height-(e.top||0),3,Ei),Oi(t,e.bottom||0,3,Di),Ri(t,e.left||0,3,Li),Ri(t,t.transform.width-(e.right||0),3,zi);const i=t.transform.centerPoint;!function(t,e,i,n){Ni(t,e-1,i-10,2,20,n),Ni(t,e-10,i-1,20,2,n)}(t,i.x,t.transform.height-i.y,Fi)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%t.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||n&&n.length)&&(this.id=i.id,this.gpuTimingStart(i),$i[i.type](t,e,i,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const i in t){const n=t[i],r=this.context.extTimerQuery,a=r.getQueryObjectEXT(n.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n.query),e[i]=a}return e}translatePosMatrix(e,i,n,r,a){if(!n[0]&&!n[1])return e;const s=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(s){const t=Math.sin(s),e=Math.cos(s);n=[n[0]*e-n[1]*t,n[0]*t+n[1]*e]}const o=[a?n[0]:A(i,n[0],this.transform.zoom),a?n[1]:A(i,n[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,o),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=[];return this.terrain&&!this.terrain.renderingToTexture&&e.push("TERRAIN"),t&&e.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&e.push("OVERDRAW_INSPECTOR"),e}useProgram(t,e,i){this.cache=this.cache||{};const n=i||[],r=this.currentGlobalDefines().concat(n),a=qe.cacheKey(t,r,e);return this.cache[a]||(this.cache[a]=new qe(this.context,t,Ie[t],e,vi[t],r)),this.cache[a]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(t){this.terrain&&this.terrain.prepareDrawTile(t)}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}}class qi{constructor(t=0,e=0,i=0,n=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=n}interpolate(e,i,n){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,n)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,n)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,n)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,n)),this}getCenter(e,i){const n=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.Point(n,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new qi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Yi(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function Wi(t,e,i){t[4*e+0]=i[0],t[4*e+1]=i[1],t[4*e+2]=i[2],t[4*e+3]=i[3]}function Ji(e,i){const n=Yi(e,3);t.fromQuat(e,i),Wi(e,3,n)}function Xi(t,e){Wi(t,3,[e[0],e[1],e[2],1])}function Ki(e,i){const n=t.identity$1([]);return t.rotateZ$1(n,n,-i),t.rotateX$1(n,n,-e),n}function Qi(e,i){const n=[e[0],e[1],0],r=[i[0],i[1],0];if(t.length(n)>=1e-15){const e=t.normalize([],n);t.scale$2(r,e,t.dot(r,e)),i[0]=r[0],i[1]=r[1]}const a=t.cross([],i,e);if(t.len(a)<1e-15)return null;const s=Math.atan2(-a[1],a[0]);return Ki(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),s)}class tn{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){this._position=this._renderWorldCopies?function(e){if(!e)return;const i=Array.isArray(e)?new t.MercatorCoordinate(e[0],e[1],e[2]):e;return i.x=t.wrap(i.x,0,1),i}(e):e}lookAtPoint(e,i){if(this.orientation=null,!this.position)return;const n=this._elevation?this._elevation.getAtPoint(t.MercatorCoordinate.fromLngLat(e)):0,r=this.position,a=t.MercatorCoordinate.fromLngLat(e,n),s=[a.x-r.x,a.y-r.y,a.z-r.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=Qi(s,i)}setPitchBearing(e,i){this.orientation=Ki(t.degToRad(e),t.degToRad(-i))}}class en{constructor(e,i){this._transform=t.identity([]),this._orientation=t.identity$1([]),i&&(this._orientation=i,Ji(this._transform,this._orientation)),e&&Xi(this._transform,e)}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const t=Yi(this._transform,3);return[t[0],t[1],t[2]]}set position(t){Xi(this._transform,t)}get orientation(){return this._orientation}set orientation(t){this._orientation=t,Ji(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Ki(t,e),Ji(this._transform,this._orientation)}forward(){const t=Yi(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=Yi(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=Yi(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(e,i){const n=new Float64Array(16);return t.invert(n,this.getWorldToCamera(e,i)),n}getWorldToCamera(e,i){const n=new Float64Array(16),r=new Float64Array(4),a=this.position;return t.conjugate(r,this._orientation),t.scale$2(a,a,-e),t.fromQuat(n,r),t.translate(n,n,a),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=i,n[9]*=i,n[10]*=i,n[11]*=i,n}getCameraToClipPerspective(e,i,n,r){const a=new Float64Array(16);return t.perspective(a,e,i,n,r),a}clone(){return new en([...this.position],[...this.orientation])}}class nn{constructor(e,i,n,r,a){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||a,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==n?0:n,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new qi,this._posMatrixCache={},this._alignedPosMatrixCache={},this._camera=new en,this._centerAltitude=0,this.cameraElevationReference="ground"}clone(){const t=new nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,t?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(t){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),t&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const e=this._elevation.getAtPoint(t.MercatorCoordinate.fromLngLat(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}_updateCameraOnTerrain(){const e=this.cameraToCenterDistance/this.worldSize,i=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(i+e)}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const e=this._cameraZoom,i=this._elevation.getAtPoint(t.MercatorCoordinate.fromLngLat(this.center)),n=t.mercatorZfromAltitude(i,this.center.lat),r=this._mercatorZfromZoom(e),a=this._mercatorZfromZoom(this._maxZoom),s=Math.max(r-n,a);this._setZoom(this._zoomFromMercatorZ(s))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let n;n=e.z<this._camera.position[2]?[i.x,i.y,i.z]:[e.x,e.y,e.z];const r=t.length(t.sub([],this._camera.position,n));return t.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let i=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(e.orientation)),e.position){const n=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,i=new tn;return i.position=new t.MercatorCoordinate(e[0],e[1],e[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this._renderWorldCopies,i}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const i=t.transformQuat([],[0,0,-1],e),n=t.transformQuat([],[0,-1,0],e);if(n[2]<0)return!1;const r=Qi(i,n);return!!r&&(this._camera.orientation=r,!0)}_setCameraPosition(e){const i=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;e[2]=t.clamp(e[2],r/n,r/i),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const n=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),a=this.pointCoordinate(new t.Point(this.width,this.height)),s=this.pointCoordinate(new t.Point(0,this.height)),o=Math.floor(Math.min(n.x,r.x,a.x,s.x)),l=Math.floor(Math.max(n.x,r.x,a.x,s.x)),h=1;for(let n=o-h;n<=l+h;n++)0!==n&&i.push(new t.UnwrappedTileID(n,e))}return i}coveringTiles(e){let i=this.coveringZoomLevel(e);const n=i,r=!!e.useElevationData;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const a=t.MercatorCoordinate.fromLngLat(this.center),s=1<<i,o=[s*a.x,s*a.y,0],l=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),h=this.pointCoordinate(this.getCameraPoint()),u=s*t.mercatorZfromAltitude(1,this.center.lat),c=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),d=[s*h.x,s*h.y,c],m=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),p=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?i:0,f=this.elevation?1e4*this.elevation.exaggeration():0,y=e=>({aabb:new t.Aabb([e*s,0,-f],[(e+1)*s,s,f]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),g=[],_=[],v=i,b=e.reparseOverscaled?n:i,M=(t,e)=>{if(!this._elevation)return;const i=this._elevation.getMinMaxForTile(e);i&&(t.min[2]=i.min,t.max[2]=i.max,t.center[2]=(t.min[2]+t.max[2])/2)},x=t=>t*t,w=x((c-this._centerAltitude)*u),S=(t,e)=>{if(e*x(.707)<t)return 1;const i=Math.sqrt(e/t);return i/(1/.707+(Math.pow(1.1,i-1/.707+1)-1)/(1.1-1)-1)};if(this._renderWorldCopies)for(let t=1;t<=3;t++)g.push(y(-t)),g.push(y(t));for(g.push(y(0));g.length>0;){const n=g.pop(),a=n.x,s=n.y;let h=n.fullyVisible;if(!h){const t=n.aabb.intersects(l);if(0===t)continue;h=2===t}let c=!0;if(p<=n.zoom&&n.zoom<v){const t=n.aabb.distanceX(d),e=n.aabb.distanceY(d);let i=w;r&&(i=x(n.aabb.distanceZ(d)*u));const a=t*t+e*e+i;c=a<x((1<<v-n.zoom)*m*S(Math.max(i,w),a))}if(n.zoom!==v&&c)for(let e=0;e<4;e++){const i=(a<<1)+e%2,o=(s<<1)+(e>>1),l=n.aabb.quadrant(e);let u=null;r&&n.zoom>v-6&&(u=new t.OverscaledTileID(n.zoom+1===v?b:n.zoom+1,n.wrap,n.zoom+1,i,o),M(l,u)),g.push({aabb:l,zoom:n.zoom+1,x:i,y:o,wrap:n.wrap,fullyVisible:h,tileID:u})}else{const r=n.zoom===v?b:n.zoom;if(e.minzoom&&e.minzoom>r)continue;const l=o[0]-(.5+a+(n.wrap<<n.zoom))*(1<<i-n.zoom),h=o[1]-.5-s,u=n.tileID?n.tileID:new t.OverscaledTileID(r,n.wrap,n.zoom,a,s);_.push({tileID:u,distanceSq:l*l+h*h})}}return _.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(e,i){const n=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),s=new t.MercatorCoordinate(a.x-(n.x-r.x),a.y-(n.y-r.y));this.center=this.coordinateLocation(s),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(t){this.center=this.coordinateLocation(t),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this._coordinatePoint(this.locationCoordinate(t),!1)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t.toLngLat()}pointRayIntersection(e,i){const n=null!=i?i:this._centerAltitude,r=[e.x,e.y,0,1],a=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(a,a,this.pixelMatrixInverse);const s=a[3];t.scale$1(r,r,1/r[3]),t.scale$1(a,a,1/s);const o=r[2],l=a[2];return{p0:r,p1:a,t:o===l?0:(n-o)/(l-o)}}screenPointToMercatorRay(e){const i=[e.x,e.y,0,1],n=[e.x,e.y,1,1];return t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(n,n,this.pixelMatrixInverse),t.scale$1(i,i,1/i[3]),t.scale$1(n,n,1/n[3]),i[2]=t.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,t.scale$1(i,i,1/this.worldSize),t.scale$1(n,n,1/this.worldSize),new t.Ray([i[0],i[1],i[2]],t.normalize([],t.sub([],n,i)))}rayIntersectionCoordinate(e){const{p0:i,p1:n,t:r}=e,a=t.mercatorZfromAltitude(i[2],this._center.lat),s=t.mercatorZfromAltitude(n[2],this._center.lat);return new t.MercatorCoordinate(t.number(i[0],n[0],r)/this.worldSize,t.number(i[1],n[1],r)/this.worldSize,t.number(a,s,r))}pointCoordinate(e){const i=this.horizonLineFromTop(),n=i>e.y?new t.Point(e.x,i):e;return this.rayIntersectionCoordinate(this.pointRayIntersection(n))}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);const i=this.elevation;let n=this.elevation.pointCoordinate(e);if(n)return new t.MercatorCoordinate(n[0],n[1],n[2]);let r=0,a=this.horizonLineFromTop();if(e.y>a)return this.pointCoordinate(e);const s=.02*a,o=e.clone();for(let e=0;e<10&&a-r>s;e++){o.y=t.number(r,a,.66);const e=i.pointCoordinate(o);e?(a=o.y,n=e):r=o.y}return n?new t.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const e=this.horizonLineFromTop();return t.y<e}}_coordinatePoint(e,i){const n=i&&this.elevation?this.elevation.getAtPoint(e,this._centerAltitude):this._centerAltitude,r=[e.x*this.worldSize,e.y*this.worldSize,n+e.toAltitude(),1];return t.transformMat4(r,r,this.pixelMatrix),r[3]>0?new t.Point(r[0]/r[3],r[1]/r[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))}_getBounds3D(){const e=this.elevation,i=e.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const i=e.dem.tree;t.min=Math.min(t.min,i.minimums[0]),t.max=Math.max(t.max,i.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});i.min*=e.exaggeration(),i.max*=e.exaggeration();const n=this.horizonLineFromTop();return[new t.Point(0,n),new t.Point(this.width,n),new t.Point(this.width,this.height),new t.Point(0,this.height)].reduce(((t,e)=>t.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,i.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,i.max))))),new t.LngLatBounds)}horizonLineFromTop(){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y;return Math.max(0,this.height/2-.97*t)}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,i=!1){const n=e.key,r=i?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];const a=e.canonical,s=this.worldSize/this.zoomScale(a.z),o=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[o*s,a.y*s,0]),t.scale(l,l,[s/t.EXTENT,s/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),r[n]=new Float32Array(l),r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const i=this._camera.position,n=this._camera.forward();if(i.z<=0||n[2]>=0)return;const r=t.mercatorZfromAltitude(1,this._center.lat);i[2]/=r,n[2]/=r,t.normalize(n,n);const a=e.raycast(i,n,e.exaggeration());if(a){const e=t.scaleAndAdd([],i,n,a),r=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),s=this._camera.position,o=r.z+t.length([r.x-s[0],r.y-s[1],r.z-s[2]]);this._cameraZoom=this._zoomFromMercatorZ(o),this._centerAltitude=r.toAltitude(),this._center=r.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const i=e.getAtPoint(this._camera.mercatorPosition),n=this._minimumHeightOverTerrain()*Math.cos(t.degToRad(this._maxPitch)),r=t.mercatorZfromAltitude(i,this._center.lat),a=this._camera.position[2]-r;if(a<n){const e=t.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),i=this._camera.mercatorPosition,r=[e.x-i.x,e.y-i.y,e.z-i.z],s=t.length(r);r[2]-=n-a;const o=t.length(r);if(0===o)return;t.scale$2(r,r,s/o),this._camera.position=[e.x-r[0],e.y-r[1],e.z-r[2]],this._camera.orientation=Qi(r,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,i,n,r,a=-90,s=90,o=-180,l=180;const h=this.size,u=this._unmodified;if(this.latRange){const i=this.latRange;a=t.mercatorYfromLat(i[1])*this.worldSize,s=t.mercatorYfromLat(i[0])*this.worldSize,e=s-a<h.y?h.y/(s-a):0}if(this.lngRange){const e=this.lngRange;o=t.mercatorXfromLng(e[0])*this.worldSize,l=t.mercatorXfromLng(e[1])*this.worldSize,i=l-o<h.x?h.x/(l-o):0}const c=this.point,d=Math.max(i||0,e||0);if(d)return this.center=this.unproject(new t.Point(i?(l+o)/2:c.x,e?(s+a)/2:c.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const t=c.y,e=h.y/2;t-e<a&&(r=a+e),t+e>s&&(r=s-e)}if(this.lngRange){const t=c.x,e=h.x/2;t-e<o&&(n=o+e),t+e>l&&(n=l-e)}void 0===n&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==n?n:c.x,void 0!==r?r:c.y))),this._constrainCameraAltitude(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){const e=(t,e)=>Math.log2(t/(this.tileSize*Math.abs(e[1]-e[0])));let i=0;if(this.latRange){const n=this.latRange;i=e(this.height,[t.mercatorYfromLat(n[0]),t.mercatorYfromLat(n[1])])}let n=0;if(this.lngRange){const i=this.lngRange;n=e(this.width,[t.mercatorXfromLng(i[0]),t.mercatorXfromLng(i[1])])}return Math.max(i,n)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const i=t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;this._updateCameraState();const n=Math.PI/2+this._pitch,r=this.fovAboveCenter,a=this._camera.position[2]*this.worldSize/Math.cos(this._pitch),s=Math.sin(r)*a/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,l=o.x,h=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*s+a),c=this.height/50,d=this._camera.getWorldToCamera(this.worldSize,i),m=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,c,u);m[8]=2*-e.x/this.width,m[9]=2*e.y/this.height;let p=t.mul([],m,d);this.mercatorMatrix=t.scale([],p,[this.worldSize,this.worldSize,this.worldSize/i]),this.projMatrix=p,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const f=new Float32Array(16);t.identity(f),t.scale(f,f,[1,-1,1]),t.rotateX(f,f,this._pitch),t.rotateZ(f,f,this.angle);const y=t.perspective(new Float32Array(16),this._fov,this.width/this.height,c,u);this.skyboxMatrix=t.multiply(f,y,f);const g=this.width%2/2,_=this.height%2/2,v=Math.cos(this.angle),b=Math.sin(this.angle),M=l-Math.round(l)+v*g+b*_,x=h-Math.round(h)+v*_+b*g,w=new Float64Array(p);if(t.translate(w,w,[M>.5?M-1:M,x>.5?x-1:x,0]),this.alignedProjMatrix=w,p=t.create(),t.scale(p,p,[this.width/2,-this.height/2,1]),t.translate(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=t.create(),t.scale(p,p,[1,-1,1]),t.translate(p,p,[-1,-1,0]),t.scale(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),p=t.invert(new Float64Array(16),this.pixelMatrix),!p)throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={}}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const e=this._camera.forward(),i=this.cameraToCenterDistance,n=this.point,r=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this.cameraToCenterDistance/r;this._camera.position=[n.x/this.worldSize-e[0]*i/a,n.y/this.worldSize-e[1]*i/a,t.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-e[2]*i/a]}_translateCameraConstrained(e){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=e[2];let r=1;n>0&&(r=Math.min((i-this._camera.position[2])/n,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,r),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,i=this._camera.forward(),{pitch:n,bearing:r}=this._camera.getPitchBearing(),a=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),o=Math.max((e[2]-a)/Math.cos(n),s),l=this._zoomFromMercatorZ(o);t.scaleAndAdd(e,e,i,o),this._pitch=t.clamp(n,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(r,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new t.MercatorCoordinate(e[0],e[1],e[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(e,i){const n=Math.min(e.x,i.x),r=Math.max(e.x,i.x),a=Math.min(e.y,i.y),s=Math.max(e.y,i.y),o=[new t.Point(n,a),new t.Point(r,s),new t.Point(n,s),new t.Point(r,a)],l=this._renderWorldCopies?-3:0,h=this._renderWorldCopies?4:1;for(const t of o){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const i=this.rayIntersectionCoordinate(e);if(i.x<l||i.y<0||i.x>h||i.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new t.Point(0,0),new t.Point(this.width,this.height))}zoomDeltaToMovement(e,i){const n=t.length(t.sub([],this._camera.position,e)),r=this._zoomFromMercatorZ(n)+i;return n-this._mercatorZfromZoom(r)}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))}}class rn{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t){let e=!1,i=null;const n=()=>{i=null,e&&(t(),i=setTimeout(n,300),e=!1)};return()=>(e=!0,i||n(),i)}(this._updateHashUnthrottled.bind(this))}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const i=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,r),s=Math.round(i.lng*a)/a,o=Math.round(i.lat*a)/a,l=this._map.getBearing(),h=this._map.getPitch();let u="";if(u+=e?`/${s}/${o}/${n}`:`${n}/${o}/${s}`,(l||h)&&(u+="/"+Math.round(10*l)/10),h&&(u+=`/${Math.round(h)}`),this._hashName){const e=this._hashName;let i=!1;const n=t.window.location.hash.slice(1).split("&").map((t=>{const n=t.split("=")[0];return n===e?(i=!0,`${n}=${u}`):t})).filter((t=>t));return i||n.push(`${e}=${u}`),`#${n.join("&")}`}return`#${u}`}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,e)}catch(t){}}}const an={linearity:.3,easing:t.bezier(0,0,.3,1)},sn=t.extend({deceleration:2500,maxSpeed:1400},an),on=t.extend({deceleration:20,maxSpeed:1400},an),ln=t.extend({deceleration:1e3,maxSpeed:360},an),hn=t.extend({deceleration:1e3,maxSpeed:90},an);class un{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,i=t.browser.now();for(;e.length>0&&i-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)i.zoom+=t.zoomDelta||0,i.bearing+=t.bearingDelta||0,i.pitch+=t.pitchDelta||0,t.panDelta&&i.pan._add(t.panDelta),t.around&&(i.around=t.around),t.pinchAround&&(i.pinchAround=t.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(i.pan.mag()){const a=dn(i.pan.mag(),n,t.extend({},sn,e||{}));r.offset=i.pan.mult(a.amount/i.pan.mag()),r.center=this._map.transform.center,cn(r,a)}if(i.zoom){const t=dn(i.zoom,n,on);r.zoom=this._map.transform.zoom+t.amount,cn(r,t)}if(i.bearing){const e=dn(i.bearing,n,ln);r.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),cn(r,e)}if(i.pitch){const t=dn(i.pitch,n,hn);r.pitch=this._map.transform.pitch+t.amount,cn(r,t)}if(r.zoom||r.bearing){const t=void 0===i.pinchAround?i.around:i.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(r,{noMoveStart:!0})}}function cn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function dn(e,i,n){const{maxSpeed:r,linearity:a,deceleration:s}=n,o=t.clamp(e*a/(i/1e3),-r,r),l=Math.abs(o)/(s*a);return{easing:n.easing,duration:1e3*l,amount:o*(l/2)}}class mn extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r,a={}){const s=i.mousePos(n.getCanvasContainer(),r),o=n.unproject(s);super(e,t.extend({point:s,lngLat:o,originalEvent:r},a)),this._defaultPrevented=!1,this.target=n}}class pn extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){const a="touchend"===e?r.changedTouches:r.touches,s=i.touchPos(n.getCanvasContainer(),a),o=s.map((t=>n.unproject(t))),l=s.reduce(((t,e,i,n)=>t.add(e.div(n.length))),new t.Point(0,0));super(e,{points:s,point:l,lngLats:o,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class fn extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,i){super(t,{originalEvent:i}),this._defaultPrevented=!1}}class yn{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new fn(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new mn(t.type,this._map,t))}mouseup(t){this._map.fire(new mn(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new mn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new mn(t.type,this._map,t))}mouseover(t){this._map.fire(new mn(t.type,this._map,t))}mouseout(t){this._map.fire(new mn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new pn(t.type,this._map,t))}touchmove(t){this._map.fire(new pn(t.type,this._map,t))}touchend(t){this._map.fire(new pn(t.type,this._map,t))}touchcancel(t){this._map.fire(new pn(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gn{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new mn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new mn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _n{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(i.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const a=Math.min(r.x,n.x),s=Math.max(r.x,n.x),o=Math.min(r.y,n.y),l=Math.max(r.y,n.y);i.setTransform(this._box,`translate(${a}px,${o}px)`),this._box.style.width=s-a+"px",this._box.style.height=l-o+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,a=n;if(this.reset(),i.suppressClick(),r.x!==a.x||r.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,a,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))}}function vn(t,e){const i={};for(let n=0;n<t.length;n++)i[t[n].identifier]=e[n];return i}class bn{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,i,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){const i=new t.Point(0,0);for(const t of e)i._add(t);return i.div(e.length)}(i),this.touches=vn(n,i)))}touchmove(t,e,i){if(this.aborted||!this.centroid)return;const n=vn(i,e);for(const t in this.touches){const e=this.touches[t],i=n[t];(!i||i.dist(e)>30)&&(this.aborted=!0)}}touchend(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class Mn{constructor(t){this.singleTap=new bn(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,i){this.singleTap.touchstart(t,e,i)}touchmove(t,e,i){this.singleTap.touchmove(t,e,i)}touchend(t,e,i){const n=this.singleTap.touchend(t,e,i);if(n){const e=t.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(n)<30;if(e&&i||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class xn{constructor(){this._zoomIn=new Mn({numTouches:1,numTaps:2}),this._zoomOut=new Mn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)}touchmove(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)}touchend(t,e,i){const n=this._zoomIn.touchend(t,e,i),r=this._zoomOut.touchend(t,e,i);return n?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wn={0:1,2:2};class Sn{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=i.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){const i=wn[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)}mouseupWindow(t){this._lastPoint&&i.mouseButton(t)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class An extends Sn{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Tn extends Sn{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(t){t.preventDefault()}}class Cn extends Sn{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(t){t.preventDefault()}}class In{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}touchstart(t,e,i){return this._calculateTransform(t,e,i)}touchmove(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)}touchend(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,i,n){n.length>0&&(this._active=!0);const r=vn(n,i),a=new t.Point(0,0),s=new t.Point(0,0);let o=0;for(const t in r){const e=r[t],i=this._touches[t];i&&(a._add(e),s._add(e.sub(i)),o++,r[t]=e)}if(this._touches=r,o<this._minTouches||!s.mag())return;const l=s.div(o);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(o),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,i){return{}}touchstart(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,i){if(!this._firstTwoTouches)return;t.preventDefault();const[n,r]=this._firstTwoTouches,a=Pn(i,e,n),s=Pn(i,e,r);if(!a||!s)return;const o=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],o,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[r,a]=this._firstTwoTouches,s=Pn(n,e,r),o=Pn(n,e,a);s&&o||(this._active&&i.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Pn(t,e,i){for(let n=0;n<t.length;n++)if(t[n].identifier===i)return e[n]}function En(t,e){return Math.log(t/e)/Math.LN2}class Dn extends kn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(En(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:En(this._distance,i),pinchAround:e}}}function Ln(t,e){return 180*t.angleWith(e)/Math.PI}class zn extends kn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ln(this._vector,i),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,i=Ln(t,this._startVector);return Math.abs(i)<e}}function Fn(t){return Math.abs(t.y)>Math.abs(t.x)}class On extends kn{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,Fn(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,i){const n=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(n,r,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+r.y)/2*-.5}}gestureBeginsVertically(t,e,i){if(void 0!==this._valid)return this._valid;const n=t.mag()>=2,r=e.mag()>=2;if(!n&&!r)return;if(!n||!r)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const a=t.y>0==e.y>0;return Fn(t)&&Fn(e)&&a}}const Rn={panStep:100,bearingStep:15,pitchStep:10};class Nn{constructor(){const t=Rn;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,i=0,n=0,r=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(i=0,n=0),{cameraAnimation:s=>{const o=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Bn,zoom:e?Math.round(o)+e*(t.shiftKey?2:1):o,bearing:s.getBearing()+i*this._bearingStep,pitch:s.getPitch()+n*this._pitchStep,offset:[-r*this._panStep,-a*this._panStep],center:s.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bn(t){return t*(2-t)}class jn{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;let i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=t.browser.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=i.mousePos(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform,i=()=>e._terrainEnabled()?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const r=i(),a=Math.pow(2,r),s="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):a;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(s*n))),"wheel"===this._type&&(this._startZoom=i(),this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:i(),r=this._startZoom,a=this._easing;let s,o=!1;if("wheel"===this._type&&r&&a){const e=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),i=a(e);s=t.number(r,n,i),e<1?this._frameId||(this._frameId=!0):o=!0}else s=n,o=!0;return this._active=!0,o&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!o,zoomDelta:s-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=t.ease;if(this._prevEase){const e=this._prevEase,n=(t.browser.now()-e.start)/e.duration,r=e.easing(n+.01)-e.easing(n),a=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-a*a);i=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i}reset(){this._active=!1}}class Hn{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Un{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vn{constructor(){this._tap=new Mn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))}touchmove(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const n=e[0],r=n.y-this._swipePoint.y;return this._swipePoint=n,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,i)}touchend(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gn{constructor(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $n{constructor(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zn{constructor(t,e,i,n){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qn=t=>t.zoom||t.drag||t.pitch||t.rotate;class Yn extends t.Event{}class Wn{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,i){const n=t.sub([],i,e);this.radius=t.length(n[2]<0?t.div([],n,this.constants):[n[0],n[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const i=t.scale$2([],e,this.radius);if(i[2]>0){const e=t.scale$2([],[0,0,1],t.dot(i,[0,0,1])),n=t.scale$2([],t.normalize([],[i[0],i[1],0]),this.radius),r=t.add([],i,t.scale$2([],t.sub([],t.add([],n,e),i),2));i[0]=r[0],i[1]=r[1]}return i}}function Jn(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Xn{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new un(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Wn,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[e,n,r]of this._listeners)i.addEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(const[e,n,r]of this._listeners)i.removeEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(t){const e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new yn(e,t));const n=e.boxZoom=new _n(e,t);this._add("boxZoom",n);const r=new xn,a=new Un;e.doubleClickZoom=new Hn(a,r),this._add("tapZoom",r),this._add("clickZoom",a);const s=new Vn;this._add("tapDragZoom",s);const o=e.touchPitch=new On;this._add("touchPitch",o);const l=new Tn(t),h=new Cn(t);e.dragRotate=new $n(t,l,h),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]);const u=new An(t),c=new In(t);e.dragPan=new Gn(i,u,c),this._add("mousePan",u),this._add("touchPan",c,["touchZoom","touchRotate"]);const d=new zn,m=new Dn;e.touchZoomRotate=new Zn(i,m,d,s),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]);const p=e.scrollZoom=new jn(e,this);this._add("scrollZoom",p,["mousePan"]);const f=e.keyboard=new Nn;this._add("keyboard",f),this._add("blockableMapEvent",new gn(e));for(const i of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[i]&&e[i].enable(t[i])}_add(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(qn(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,i){for(const n in t)if(n!==i&&(!e||e.indexOf(n)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const i of t)this._el.contains(i.target)&&e.push(i);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},a={},s={},o=t.touches?this._getMapTouches(t.touches):void 0,l=o?i.touchPos(this._el,o):i.mousePos(this._el,t);for(const{handlerName:i,handler:h,allowed:u}of this._handlers){if(!h.isEnabled())continue;let c;this._blockedByActive(s,u,i)?h.reset():h[e||t.type]&&(c=h[e||t.type](t,l,o),this.mergeHandlerResult(r,a,c,i,n),c&&c.needsRenderFrame&&this._triggerRenderFrame()),(c||h.isActive())&&(s[i]=h)}const h={};for(const t in this._previousActiveHandlers)s[t]||(h[t]=n);this._previousActiveHandlers=s,(Object.keys(h).length||Jn(r))&&(this._changes.push([r,a,h]),this._triggerRenderFrame()),(Object.keys(s).length||Jn(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=r;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(e,i,n,r,a){if(!n)return;t.extend(e,n);const s={handlerName:r,originalEvent:n.originalEvent||a};void 0!==n.zoomDelta&&(i.zoom=s),void 0!==n.panDelta&&(i.drag=s),void 0!==n.pitchDelta&&(i.pitch=s),void 0!==n.bearingDelta&&(i.rotate=s)}_applyChanges(){const e={},i={},n={};for(const[r,a,s]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.aroundCoord&&(e.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.extend(i,a),t.extend(n,s);this._updateMapTransform(e,i,n),this._changes=[]}_updateMapTransform(e,i,n){const r=this._map,a=r.transform,s=t=>[t.x,t.y,t.z];if((()=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Jn(e)){const t=a.zoom;a.cameraElevationReference="sea",a.recenterOnTerrain(),a.cameraElevationReference="ground",t!==a.zoom&&this._map._update(!0)}if(!Jn(e))return this._fireEvents(i,n,!0);let{panDelta:o,zoomDelta:l,bearingDelta:h,pitchDelta:u,around:c,aroundCoord:d,pinchAround:m}=e;void 0!==m&&(c=m),(()=>i.drag&&!this._eventsInProgress.drag)()&&c&&(this._dragOrigin=s(a.pointCoordinate3D(c)),this._trackingEllipsoid.setup(a._camera.position,this._dragOrigin)),a.cameraElevationReference="sea",r._stop(!0),c=c||r.transform.centerPoint,h&&(a.bearing+=h),u&&(a.pitch+=u),a._updateCameraState();const p=[0,0,0];if(o){const t=a.screenPointToMercatorRay(c),e=a.screenPointToMercatorRay(c.sub(o)),i=this._trackingEllipsoid.projectRay(t.dir),n=this._trackingEllipsoid.projectRay(e.dir);p[0]=n[0]-i[0],p[1]=n[1]-i[1]}const f=a.zoom,y=[0,0,0];if(l){const e=s(d||a.pointCoordinate3D(c)),i={dir:t.normalize([],t.sub([],e,a._camera.position))},n=a.screenPointToMercatorRay(a.centerPoint);if(i.dir[2]<0){const r=t.altitudeFromMercatorZ(e[2],e[1]),o=a.rayIntersectionCoordinate(a.pointRayIntersection(a.centerPoint,r)),h=a.zoomDeltaToMovement(s(o),l)*(n.dir[2]/i.dir[2]);t.scale$2(y,i.dir,h)}else if(a._terrainEnabled()){const n=a.zoomDeltaToMovement(e,l);t.scale$2(y,i.dir,n)}}const g=t.add(p,p,y);a._translateCameraConstrained(g),l&&Math.abs(a.zoom-f)>1e-4&&a.recenterOnTerrain(),a.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(i,n,!0)}_fireEvents(e,i,n){const r=qn(this._eventsInProgress),a=qn(e),s={};for(const t in e){const{originalEvent:i}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=i),this._eventsInProgress[t]=e[t]}!r&&a&&this._fireEvent("movestart",a.originalEvent);for(const t in s)this._fireEvent(t,s[t]);a&&this._fireEvent("move",a.originalEvent);for(const t in e){const{originalEvent:i}=e[t];this._fireEvent(t,i)}const o={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:n}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=i[e]||n,o[`${t}end`]=l)}for(const t in o)this._fireEvent(t,o[t]);const h=qn(this._eventsInProgress);if(n&&(r||a)&&!h){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(i(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Yn("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Kn extends t.Evented{constructor(e,i){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,i,n){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),n)}panTo(e,i,n){return this.easeTo(t.extend({center:e},i),n)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,i,n){return this.easeTo(t.extend({zoom:e},i),n)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,i,n){return this.easeTo(t.extend({bearing:e},i),n)}resetNorth(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,i){e=t.LngLatBounds.convert(e);const n=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,i)}_extendCameraOptions(e){const i={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(i,e.padding),e}_cameraForBoxAndBearing(e,i,n,r){const a=this._extendCameraOptions(r),s=this.transform,o=s.padding,l=s.project(t.LngLat.convert(e)),h=s.project(t.LngLat.convert(i)),u=l.rotate(-t.degToRad(n)),c=h.rotate(-t.degToRad(n)),d=new t.Point(Math.max(u.x,c.x),Math.max(u.y,c.y)),m=new t.Point(Math.min(u.x,c.x),Math.min(u.y,c.y)),p=d.sub(m),f=(s.width-(o.left+o.right+a.padding.left+a.padding.right))/p.x,y=(s.height-(o.top+o.bottom+a.padding.top+a.padding.bottom))/p.y;if(y<0||f<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const g=Math.min(s.scaleZoom(s.scale*Math.min(f,y)),a.maxZoom),_="number"==typeof a.offset.x?new t.Point(a.offset.x,a.offset.y):t.Point.convert(a.offset),v=new t.Point((a.padding.left-a.padding.right)/2,(a.padding.top-a.padding.bottom)/2).rotate(n*Math.PI/180),b=_.add(v).mult(s.scale/s.zoomScale(g));return{center:s.unproject(l.add(h).div(2).sub(b)),zoom:g,bearing:n}}_cameraForBox(e,i,n,r,a){const s=this._extendCameraOptions(a);n=n||0,r=r||0,e=t.LngLat.convert(e),i=t.LngLat.convert(i);const o=this.transform.clone();o.padding=s.padding;const l=this.getFreeCameraOptions(),h=new t.LngLat(.5*(e.lng+i.lng),.5*(e.lat+i.lat)),u=.5*(n+r);if(o._camera.position[2]<t.mercatorZfromAltitude(u,h.lat))return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(h),o.setFreeCameraOptions(l);const c=t.MercatorCoordinate.fromLngLat(e),d=t.MercatorCoordinate.fromLngLat(i),m=o.pointRayIntersection(o.centerPoint,u),p=[(f=o.rayIntersectionCoordinate(m)).x,f.y,f.z];var f;const y=o.screenPointToMercatorRay(o.centerPoint);let g,_=0;do{const i=Math.floor(o.zoom),a=1<<i,s=Math.min(a*c.x,a*d.x),l=Math.min(a*c.y,a*d.y),h=Math.max(a*c.x,a*d.x),u=Math.max(a*c.y,a*d.y),m=new t.Aabb([s,l,n],[h,u,r]),f=t.Frustum.fromInvProjectionMatrix(o.invProjMatrix,o.worldSize,i);if(2!==m.intersects(f)){g&&(o._camera.position=t.scaleAndAdd([],o._camera.position,y.dir,-g),o._updateStateFromCamera());break}const _=t.sub([],o._camera.position,p);g=.5*t.length(_),o._camera.position=t.scaleAndAdd([],o._camera.position,y.dir,g);try{o._updateStateFromCamera()}catch(e){return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++_<10);return{center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}}fitBounds(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)}_raycastElevationBox(e,i){const n=this.transform.elevation;if(!n)return;const r=new t.Point(e.x,i.y),a=new t.Point(i.x,e.y),s=n.pointCoordinate(e);if(!s)return;const o=n.pointCoordinate(i);if(!o)return;const l=n.pointCoordinate(r);if(!l)return;const h=n.pointCoordinate(a);if(!h)return;const u=new t.MercatorCoordinate(s[0],s[1]).toLngLat(),c=new t.MercatorCoordinate(o[0],o[1]).toLngLat(),d=new t.MercatorCoordinate(l[0],l[1]).toLngLat(),m=new t.MercatorCoordinate(h[0],h[1]).toLngLat(),p=Math.min(u.lng,Math.min(c.lng,Math.min(d.lng,m.lng))),f=Math.min(u.lat,Math.min(c.lat,Math.min(d.lat,m.lat))),y=Math.max(u.lng,Math.max(c.lng,Math.max(d.lng,m.lng))),g=Math.max(u.lat,Math.max(c.lat,Math.max(d.lat,m.lat))),_=Math.min(s[3],Math.min(o[3],Math.min(l[3],h[3]))),v=Math.max(s[3],Math.max(o[3],Math.max(l[3],h[3])));return{minLngLat:new t.LngLat(p,f),maxLngLat:new t.LngLat(y,g),minAltitude:_,maxAltitude:v}}fitScreenCoordinates(e,i,n,r,a){let s,o,l,h;const u=t.Point.convert(e),c=t.Point.convert(i),d=this._raycastElevationBox(u,c);if(d)s=d.minLngLat,o=d.maxLngLat,l=d.minAltitude,h=d.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(u,c))return this;s=this.transform.pointLocation(u),o=this.transform.pointLocation(c)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),n,r):this._cameraForBox(s,o,l,h,r),r,a)}_fitInternal(e,i,n){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,n):this.flyTo(i,n)):this}jumpTo(e,i){this.stop();const n=this.transform;let r=!1,a=!1,s=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(a=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(s=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),r&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),a&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),s&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,i){this.stop();const n=this.transform,r=n.zoom,a=n.pitch,s=n.bearing;n.setFreeCameraOptions(e);const o=r!==n.zoom,l=a!==n.pitch,h=s!==n.bearing;return this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),o&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),h&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),l&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i)),this}easeTo(e,i){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);const n=this.transform,r=this.getZoom(),a=this.getBearing(),s=this.getPitch(),o=this.getPadding(),l="zoom"in e?+e.zoom:r,h="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:s,c="padding"in e?e.padding:n.padding,d=t.Point.convert(e.offset);let m=n.centerPoint.add(d);const p=n.pointLocation(m),f=t.LngLat.convert(e.center||p);this._normalizeCenter(f);const y=n.project(p),g=n.project(f).sub(y),_=n.zoomScale(l-r);let v,b;e.around&&(v=t.LngLat.convert(e.around),b=n.locationPoint(v));const M={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==r,this._rotating=this._rotating||a!==h,this._pitching=this._pitching||u!==s,this._padding=!n.isPaddingEqual(c),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,M),this._ease((e=>{if(this._zooming&&(n.zoom=t.number(r,l,e)),this._rotating&&(n.bearing=t.number(a,h,e)),this._pitching&&(n.pitch=t.number(s,u,e)),this._padding&&(n.interpolatePadding(o,c,e),m=n.centerPoint.add(d)),v)n.setLocationAtPoint(v,b);else{const t=n.zoomScale(n.zoom-r),i=l>r?Math.min(2,_):Math.max(.5,_),a=Math.pow(i,1-e),s=n.unproject(y.add(g.mult(e*a)).mult(t));n.setLocationAtPoint(n.renderWorldCopies?s.wrap():s,m)}this._fireMoveEvents(i)}),(t=>{n.recenterOnTerrain(),this._afterEase(i,t)}),e),this}_prepareEase(e,i,n={}){this._moving=!0,this.transform.cameraElevationReference="sea",i||n.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId,this.transform.cameraElevationReference="ground";const n=this._zooming,r=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),a&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,i){if(!e.essential&&t.browser.prefersReducedMotion){const n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const n=this.transform,r=this.getZoom(),a=this.getBearing(),s=this.getPitch(),o=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,n.minZoom,n.maxZoom):r,h="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:s,c="padding"in e?e.padding:n.padding,d=n.zoomScale(l-r),m=t.Point.convert(e.offset);let p=n.centerPoint.add(m);const f=n.pointLocation(p),y=t.LngLat.convert(e.center||f);this._normalizeCenter(y);const g=n.project(f),_=n.project(y).sub(g);let v=e.curve;const b=Math.max(n.width,n.height),M=b/d,x=_.mag();if("minZoom"in e){const i=t.clamp(Math.min(e.minZoom,r,l),n.minZoom,n.maxZoom),a=b/n.zoomScale(i-r);v=Math.sqrt(a/x*2)}const w=v*v;function S(t){const e=(M*M-b*b+(t?-1:1)*w*w*x*x)/(2*(t?M:b)*w*x);return Math.log(Math.sqrt(e*e+1)-e)}function A(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}const C=S(0);let I=function(t){return T(C)/T(C+v*t)},k=function(t){return b*((T(C)*(A(e=C+v*t)/T(e))-A(C))/w)/x;var e},P=(S(1)-C)/v;if(Math.abs(x)<1e-6||!isFinite(P)){if(Math.abs(b-M)<1e-6)return this.easeTo(e,i);const t=M<b?-1:1;P=Math.abs(Math.log(M/b))/v,k=function(){return 0},I=function(e){return Math.exp(t*v*e)}}return e.duration="duration"in e?+e.duration:1e3*P/("screenSpeed"in e?+e.screenSpeed/v:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==h,this._pitching=u!==s,this._padding=!n.isPaddingEqual(c),this._prepareEase(i,!1),this._ease((e=>{const d=e*P,f=1/I(d);n.zoom=1===e?l:r+n.scaleZoom(f),this._rotating&&(n.bearing=t.number(a,h,e)),this._pitching&&(n.pitch=t.number(s,u,e)),this._padding&&(n.interpolatePadding(o,c,e),p=n.centerPoint.add(m));const v=1===e?y:n.unproject(g.add(_.mult(k(d))).mult(f));n.setLocationAtPoint(n.renderWorldCopies?v.wrap():v,p),n._updateCenterElevation(),this._fireMoveEvents(i)}),(()=>this._afterEase(i)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,i,n){!1===n.animate||0===n.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,i){e=t.wrap(e,-180,180);const n=Math.abs(e-i);return Math.abs(e-360-i)<n&&(e-=360),Math.abs(e+360-i)<n&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}}class Qn{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const i=this._map._getUIString(`AttributionControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const n=i.reduce(((t,e,n)=>(e.value&&(t+=`${e.key}=${e.value}${n<i.length-1?"&":""}`),t)),"?");e.href=`${t.config.FEEDBACK_URL}/${n}${this._map._hash?this._map._hash.getHashString(!0):""}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const i in e){const n=e[i];if(n.used){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,i)=>{for(let n=i+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0}));const i=t.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,t.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class tr{constructor(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)}onAdd(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");const e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const i=t[e].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class er{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,i=e?this._queue.concat(e):this._queue;for(const e of i)if(e.id===t)return void(e.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const i of e)if(!i.cancelled&&(i.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ir={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:nr,HTMLElement:rr,ImageBitmap:ar}=t.window,sr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function or(t){t.parentNode&&t.parentNode.removeChild(t)}const lr={showCompass:!0,showZoom:!0,visualizePitch:!1};class hr{constructor(e,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new Tn({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new Cn({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(n,"mousedown",this.mousedown),i.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(n,"touchmove",this.touchmove),i.addEventListener(n,"touchend",this.touchend),i.addEventListener(n,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),i.disableDrag()}move(t,e){const i=this.map,n=this.mouseRotate.mousemoveWindow(t,e);if(n&&n.bearingDelta&&i.setBearing(i.getBearing()+n.bearingDelta),this.mousePitch){const n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}}off(){const t=this.element;i.removeEventListener(t,"mousedown",this.mousedown),i.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(t,"touchmove",this.touchmove),i.removeEventListener(t,"touchend",this.touchend),i.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){i.enableDrag(),i.removeEventListener(t.window,"mousemove",this.mousemove),i.removeEventListener(t.window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),i.mousePos(this.element,e)),i.addEventListener(t.window,"mousemove",this.mousemove),i.addEventListener(t.window,"mouseup",this.mouseup)}mousemove(t){this.move(t,i.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ur(e,i,n){if(e=new t.LngLat(e.lng,e.lat),i){const r=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),s=360*Math.ceil(Math.abs(e.lng-n.center.lng)/360),o=n.locationPoint(e).distSqr(i),l=i.x<0||i.y<0||i.x>n.width||i.y>n.height;n.locationPoint(r).distSqr(i)<o&&(l||Math.abs(r.lng-n.center.lng)<s)?e=r:n.locationPoint(a).distSqr(i)<o&&(l||Math.abs(a.lng-n.center.lng)<s)&&(e=a)}for(;Math.abs(e.lng-n.center.lng)>180;){const t=n.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=n.width&&t.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}const cr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function dr(t,e,i){const n=t.classList;for(const t in cr)n.remove(`mapboxgl-${i}-anchor-${t}`);n.add(`mapboxgl-${i}-anchor-${e}`)}class mr extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");const n=i.createNS("http://www.w3.org/2000/svg","svg"),r=41,a=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${r}px`),n.setAttributeNS(null,"width",`${a}px`),n.setAttributeNS(null,"viewBox",`0 0 ${a} ${r}`);const s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");const o=i.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill-rule","nonzero");const l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of h){const e=i.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const c=i.createNS("http://www.w3.org/2000/svg","path");c.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(c);const d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(m);const p=i.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(6.0, 7.0)"),p.setAttributeNS(null,"fill","#FFFFFF");const f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(8.0, 8.0)");const y=i.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");const g=i.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),f.appendChild(y),f.appendChild(g),o.appendChild(l),o.appendChild(u),o.appendChild(d),o.appendChild(p),o.appendChild(f),n.appendChild(o),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",a*this._scale+"px"),this._element.appendChild(n),this._offset=t.Point.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),dr(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,i=13.5,n=Math.sqrt(Math.pow(i,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[n,-1*(e-i+n)],"bottom-right":[-n,-1*(e-i+n)],left:[i,-1*(e-i)],right:[-i,-1*(e-i)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_updateOcclusion(){this._occlusionTimer||(this._occlusionTimer=setTimeout(this._onOcclusionTimer.bind(this),60))}_onOcclusionTimer(){const t=this._map.transform,e=this._pos?this._pos.sub(this._transformedOffset()):null;if(e&&e.x>=0&&e.x<t.width&&e.y>=0&&e.y<t.height){const t=this._map.unproject(e),i=this._map.getFreeCameraOptions();if(i.position){const e=i.position.toLngLat(),n=e.distanceTo(t),r=e.distanceTo(this._lngLat);this._element.classList.toggle("mapboxgl-marker-occluded",n<.9*r)}}this._occlusionTimer=null}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ur(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),this._map.transform.elevation&&this._updateOcclusion();let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,`${cr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${e}`)}_transformedOffset(){if(!this._defaultMarker)return this._offset;const t=this._map.transform,e=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&e._rotate(t.angle),"map"===this._pitchAlignment&&(e.y*=Math.cos(t._pitch)),e}getOffset(){return this._offset}setOffset(e){return this._offset=t.Point.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const pr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let fr,yr=0,gr=!1;const _r={maxWidth:100,unit:"metric"};function vr(t,e,i){const n=i&&i.maxWidth||100,r=t._container.clientHeight/2,a=t.unproject([0,r]),s=t.unproject([n,r]),o=a.distanceTo(s);if(i&&"imperial"===i.unit){const i=3.2808*o;i>5280?br(e,n,i/5280,t._getUIString("ScaleControl.Miles")):br(e,n,i,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?br(e,n,o/1852,t._getUIString("ScaleControl.NauticalMiles")):o>=1e3?br(e,n,o/1e3,t._getUIString("ScaleControl.Kilometers")):br(e,n,o,t._getUIString("ScaleControl.Meters"))}function br(t,e,i,n){const r=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(i),e*i}(i);t.style.width=e*(r/i)+"px",t.innerHTML=`${r}&nbsp;${n}`}const Mr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),wr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Kn{constructor(e){if(null!=(e=t.extend({},sr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new nn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new er,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ir,e.locale),this._clickTolerance=e.clickTolerance,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof rr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Xn(this,e),this._hash=e.hash&&new rn("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Qn({customAttribution:e.customAttribution})),this._logoControl=new tr,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))}))}_getMapId(){return this._mapId}addControl(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}resize(e){const i=this._containerDimensions(),n=i[0],r=i[1];this._resizeCanvas(n,r),this.transform.resize(n,r),this.painter.resize(n,r);const a=!this._moving;return a&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),a&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.Point.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(t,e,i){if("mouseenter"===t||"mouseover"===t){let n=!1;const r=r=>{const a=this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?n||(n=!0,i.call(this,new mn(t,this,r.originalEvent,{features:a}))):n=!1};return{layer:e,listener:i,delegates:{mousemove:r,mouseout:()=>{n=!1}}}}if("mouseleave"===t||"mouseout"===t){let n=!1;const r=r=>{(this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?n=!0:n&&(n=!1,i.call(this,new mn(t,this,r.originalEvent)))},a=e=>{n&&(n=!1,i.call(this,new mn(t,this,e.originalEvent)))};return{layer:e,listener:i,delegates:{mousemove:r,mouseout:a}}}{const n=t=>{const n=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,i.call(this,t),delete t.features)};return{layer:e,listener:i,delegates:{[t]:n}}}}on(t,e,i){if(void 0===i)return super.on(t,e);const n=this._createDelegatedListener(t,e,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n);for(const t in n.delegates)this.on(t,n.delegates[t]);return this}once(t,e,i){if(void 0===i)return super.once(t,e);const n=this._createDelegatedListener(t,e,i);for(const t in n.delegates)this.once(t,n.delegates[t]);return this}off(t,e,i){return void 0===i?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(()=>{const n=this._delegatedListeners[t];for(let t=0;t<n.length;t++){const r=n[t];if(r.layer===e&&r.listener===i){for(const t in r.delegates)this.off(t,r.delegates[t]);return n.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,i){return this.style?(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),t&&(this.style=new qt(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new qt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,i){if("string"==typeof e){const n=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(n,t.ResourceType.Style);t.getJSON(r,((e,n)=>{e?this.fire(new t.ErrorEvent(e)):n&&this._updateDiff(n,i)}))}else"object"==typeof e&&this._updateDiff(e,i)}_updateDiff(e,i){try{this.style.setState(e)&&(this._update(!0),this._updateTerrain())}catch(n){t.warnOnce(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(e,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const i=this.style&&this.style._getSourceCaches(e);if(0!==i.length)return i.every((t=>t.loaded()));this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const i=t[e]._tiles;for(const t in i){const e=i[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,i,{pixelRatio:n=1,sdf:r=!1,stretchX:a,stretchY:s,content:o}={}){if(this._lazyInitEmptyStyle(),i instanceof nr||ar&&i instanceof ar){const{width:l,height:h,data:u}=t.browser.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:h},u),pixelRatio:n,stretchX:a,stretchY:s,content:o,sdf:r,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:h,data:u}=i,c=i;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:h},new Uint8Array(u)),pixelRatio:n,stretchX:a,stretchY:s,content:o,sdf:r,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}}}updateImage(e,i){const n=this.style.getImage(e);if(!n)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=i instanceof nr||ar&&i instanceof ar?t.browser.getImageData(i):i,{width:a,height:s,data:o}=r;return void 0===a||void 0===s?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):a!==n.data.width||s!==n.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(n.data.replace(o,!(i instanceof nr||ar&&i instanceof ar)),void this.style.updateImage(e,n))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)}setFilter(t,e,i={}){return this.style.setFilter(t,e,i),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,i,n={}){return this.style.setPaintProperty(t,e,i,n),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,i,n={}){return this.style.setLayoutProperty(t,e,i,n),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),this.style.setTerrain(t),this._update(!0)}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);const r=this._controlContainer=i.create("div","mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{a[t]=i.create("div",`mapboxgl-ctrl-${t}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,i){const n=t.browser.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*i,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);n?(this.painter=new Zi(n,this.transform),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.webpSupported.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(e){let i,n=0;const r=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),n=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let a=!1;const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=t.browser.now();this.style.zoomHistory.update(e,i);const n=new t.EvaluationParameters(e,{now:i,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=n.crossFadingFactor();1===r&&r===this._crossFadingFactor||(a=!0,this._crossFadingFactor=r),this.style.update(n)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.browser.now()-n;r.endQueryEXT(r.TIME_ELAPSED_EXT,i),setTimeout((()=>{const n=r.getQueryObjectEXT(i,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:n}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const i=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:i}))}),50)}const o=this._sourcesDirty||this._styleDirty||this._placementDirty;if(o||this._repaint)this.triggerRepaint();else if(this._triggerFrame(!1),!this.isMoving()&&this.loaded()&&(this.fire(new t.Event("idle")),this._isInitialLoad&&this._authenticate(),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}return!this._loaded||this._fullyLoaded||o||(this._fullyLoaded=!0),this}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){console.error("Error: A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/"),t.browser.setErrorState();const e=this.painter.context.gl;this._logoControl instanceof tr&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const i=this.painter.context.gl,n=i.createFramebuffer();function r(t){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0);const e=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,e),e}return i.bindFramebuffer(i.FRAMEBUFFER,n),this._canvasPixelComparison(r(t),e.canvasCopies.map(r),e.timeStamps)}_canvasPixelComparison(t,e,i){let n=i[1]-i[0];const r=t.length/4;for(let a=0;a<e.length;a++){const s=e[a];let o=0;for(let e=0;e<s.length;e+=4)s[e]===t[e]&&s[e+1]===t[e+1]&&s[e+2]===t[e+2]&&s[e+3]===t[e+3]&&(o+=1);n+=(i[a+2]-i[a+1])*(1-o/r)}return n}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),or(this._canvasContainer),or(this._controlContainer),or(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.browser.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,i){t.setCacheLimits(e,i)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},lr,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=i.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){const i=this._map._getUIString(`NavigationControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},pr,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(e){var n;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==fr?n(fr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>{fr="denied"!==t.state,n(fr)})):(fr=!!t.window.navigator.geolocation,n(fr)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,yr=0,gr=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=this._map.getBearing(),a=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(n),a,{geolocateSource:!0})}_updateMarker(e){if(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),n=e.distanceTo(i),r=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&gr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new mr(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new mr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":yr--,gr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),yr++,yr>1?(e={maximumAge:6e5,timeout:0},gr=!0):(e=this.options.positionOptions,gr=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Qn,ScaleControl:class{constructor(e){this.options=t.extend({},_r,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){vr(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,vr(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(Mr),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const i=t.window.document.createDocumentFragment(),n=t.window.document.createElement("body");let r;for(n.innerHTML=e;r=n.firstChild,r;)i.appendChild(r);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(e){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ur(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!e)return;const n=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);let r=this.options.anchor;const a=function e(i){if(i){if("number"==typeof i){const e=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(e,e),"top-right":new t.Point(-e,e),bottom:new t.Point(0,-i),"bottom-left":new t.Point(e,-e),"bottom-right":new t.Point(-e,-e),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){const e=t.Point.convert(i);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!r){const t=this._container.offsetWidth,e=this._container.offsetHeight;let i;i=n.y+a.bottom.y<e?["top"]:n.y>this._map.transform.height-e?["bottom"]:[],n.x<t/2?i.push("left"):n.x>this._map.transform.width-t/2&&i.push("right"),r=0===i.length?"bottom":i.join("-")}const s=n.add(a[r]).round();i.setTransform(this._container,`${cr[r]} translate(${s.x}px,${s.y}px)`),dr(this._container,r,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(xr);t&&t.focus()}_onClose(){this.remove()}},Marker:mr,Style:qt,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:tn,Evented:t.Evented,config:t.config,prewarm:function(){V().acquire(j)},clearPrewarmedResources:function(){const t=U;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(j),U=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return H.workerCount},set workerCount(t){H.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:""};return wr})),i}()},3367:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>c,gK:()=>m,sY:()=>d});var n=6,r="AJSAJS",a="AFAFAF",s=65,o=73,l=79,h=86,u=90;const c={forward:d,inverse:function(t){var e=y(_(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:m};function d(t,e){return e=e||5,function(t,e){var i,n,c,d,m,p,f,y,_,v,b,M="00000"+t.easting,x="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(_=t.easting,v=t.northing,b=g(t.zoneNumber),i=Math.floor(_/1e5),n=Math.floor(v/1e5)%20,c=b-1,d=r.charCodeAt(c),m=a.charCodeAt(c),y=!1,(p=d+i-1)>u&&(p=p-u+s-1,y=!0),(p===o||d<o&&p>o||(p>o||d<o)&&y)&&p++,(p===l||d<l&&p>l||(p>l||d<l)&&y)&&++p===o&&p++,p>u&&(p=p-u+s-1),(f=m+n)>h?(f=f-h+s-1,y=!0):y=!1,(f===o||m<o&&f>o||(f>o||m<o)&&y)&&f++,(f===l||m<l&&f>l||(f>l||m<l)&&y)&&++f===o&&f++,f>h&&(f=f-h+s-1),String.fromCharCode(p)+String.fromCharCode(f))+M.substr(M.length-5,e)+x.substr(x.length-5,e)}(function(t){var e,i,n,r,a,s,o,l=t.lat,h=t.lon,u=6378137,c=.00669438,d=.9996,m=p(l),f=p(h);o=Math.floor((h+180)/6)+1,180===h&&(o=60),l>=56&&l<64&&h>=3&&h<12&&(o=32),l>=72&&l<84&&(h>=0&&h<9?o=31:h>=9&&h<21?o=33:h>=21&&h<33?o=35:h>=33&&h<42&&(o=37)),s=p(6*(o-1)-180+3),e=.006739496752268451,i=u/Math.sqrt(1-c*Math.sin(m)*Math.sin(m)),n=Math.tan(m)*Math.tan(m),r=e*Math.cos(m)*Math.cos(m);var y,g,_=d*i*((a=Math.cos(m)*(f-s))+(1-n+r)*a*a*a/6+(5-18*n+n*n+72*r-58*e)*a*a*a*a*a/120)+5e5,v=d*(u*(.9983242984503243*m-.002514607064228144*Math.sin(2*m)+2639046602129982e-21*Math.sin(4*m)-3.418046101696858e-9*Math.sin(6*m))+i*Math.tan(m)*(a*a/2+(5-n+9*r+4*r*r)*a*a*a*a/24+(61-58*n+n*n+600*r-2.2240339282485886)*a*a*a*a*a*a/720));return l<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(_),zoneNumber:o,zoneLetter:(y=l,g="Z",84>=y&&y>=72?g="X":72>y&&y>=64?g="W":64>y&&y>=56?g="V":56>y&&y>=48?g="U":48>y&&y>=40?g="T":40>y&&y>=32?g="S":32>y&&y>=24?g="R":24>y&&y>=16?g="Q":16>y&&y>=8?g="P":8>y&&y>=0?g="N":0>y&&y>=-8?g="M":-8>y&&y>=-16?g="L":-16>y&&y>=-24?g="K":-24>y&&y>=-32?g="J":-32>y&&y>=-40?g="H":-40>y&&y>=-48?g="G":-48>y&&y>=-56?g="F":-56>y&&y>=-64?g="E":-64>y&&y>=-72?g="D":-72>y&&y>=-80&&(g="C"),g)}}({lat:t[1],lon:t[0]}),e)}function m(t){var e=y(_(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function p(t){return t*(Math.PI/180)}function f(t){return t/Math.PI*180}function y(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var a,s,o,l,h,u,c,d,m,p=.9996,g=6378137,_=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),b=i-5e5,M=e;n<"N"&&(M-=1e7),c=6*(r-1)-180+3,a=.006739496752268451,m=(d=M/p/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*d)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*d)+151*v*v*v/96*Math.sin(6*d),s=g/Math.sqrt(1-_*Math.sin(m)*Math.sin(m)),o=Math.tan(m)*Math.tan(m),l=a*Math.cos(m)*Math.cos(m),h=.99330562*g/Math.pow(1-_*Math.sin(m)*Math.sin(m),1.5),u=b/(s*p);var x=m-s*Math.tan(m)/h*(u*u/2-(5+3*o+10*l-4*l*l-9*a)*u*u*u*u/24+(61+90*o+298*l+45*o*o-1.6983531815716497-3*l*l)*u*u*u*u*u*u/720);x=f(x);var w,S=(u-(1+2*o+l)*u*u*u/6+(5-2*l+28*o-3*l*l+8*a+24*o*o)*u*u*u*u*u/120)/Math.cos(m);if(S=c+f(S),t.accuracy){var A=y({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:A.lat,right:A.lon,bottom:x,left:S}}else w={lat:x,lon:S};return w}function g(t){var e=t%n;return 0===e&&(e=n),e}function _(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,c="",d=0;!/[A-Z]/.test(e=t.charAt(d));){if(d>=2)throw"MGRSPoint bad conversion from: "+t;c+=e,d++}var m=parseInt(c,10);if(0===d||d+3>i)throw"MGRSPoint bad conversion from: "+t;var p=t.charAt(d++);if(p<="A"||"B"===p||"Y"===p||p>="Z"||"I"===p||"O"===p)throw"MGRSPoint zone letter "+p+" not handled: "+t;n=t.substring(d,d+=2);for(var f=g(m),y=function(t,e){for(var i=r.charCodeAt(e-1),n=1e5,a=!1;i!==t.charCodeAt(0);){if(++i===o&&i++,i===l&&i++,i>u){if(a)throw"Bad character: "+t;i=s,a=!0}n+=1e5}return n}(n.charAt(0),f),_=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=a.charCodeAt(e-1),n=0,r=!1;i!==t.charCodeAt(0);){if(++i===o&&i++,i===l&&i++,i>h){if(r)throw"Bad character: "+t;i=s,r=!0}n+=1e5}return n}(n.charAt(1),f);_<v(p);)_+=2e6;var b=i-d;if(b%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var M,x,w,S=b/2,A=0,T=0;return S>0&&(M=1e5/Math.pow(10,S),x=t.substring(d,d+S),A=parseFloat(x)*M,w=t.substring(d+S),T=parseFloat(w)*M),{easting:A+y,northing:T+_,zoneLetter:p,zoneNumber:m,accuracy:M}}function v(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}},4806:(t,e,i)=>{"use strict";function n(t,e){if(!t||!t.length)return-1;let i=t[0];if(i.values&&i.values.length>0)for(let t=0,n=i.values.length;t<n;++t){let n=i.values[t];if(n&&n.source&&r(n.source,e))return t}return-1}function r(t,e){let i=t.roles;return i&&i[e]}i.d(e,{i3:()=>n})},1888:(t,e,i)=>{"use strict";function n(t,e,i){if(!t)return i;let n=t[e];return void 0===n?i:n}i.d(e,{_:()=>n})},6271:(t,e,i)=>{"use strict";i.d(e,{Bl:()=>r});var n=i(1888);function r(t,e,i){const r=function(t,e,i){return t?n._(t[e.objectName],e.propertyName,i):i}(t,e,i);return r&&r.solid?r.solid.color:null==r||"object"==typeof r&&!r.solid?i:r}},3116:(t,e,i)=>{"use strict";i.d(e,{P:()=>r});var n=i(6271);class r{static getDefault(){return new this}static createPropertyIdentifier(t,e){return{objectName:t,propertyName:e}}static parse(t){let e,i=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return i;e=i.getProperties();for(let r in e)for(let a in e[r]){const s=i[r][a];i[r][a]=n.Bl(t.metadata.objects,e[r][a],s)}return i}static isPropertyEnumerable(t){return!r.InnumerablePropertyPrefix.test(t)}static enumerateObjectInstances(t,e){let i=t&&t[e.objectName];if(!i)return[];let n={objectName:e.objectName,selector:null,properties:{}};for(let t in i)i.hasOwnProperty(t)&&(n.properties[t]=i[t]);return{instances:[n]}}getProperties(){let t={};return Object.keys(this).forEach((e=>{if(r.isPropertyEnumerable(e)){let i=Object.keys(this[e]);t[e]={},i.forEach((i=>{r.isPropertyEnumerable(e)&&(t[e][i]=r.createPropertyIdentifier(e,i))}))}})),t}}r.InnumerablePropertyPrefix=/^_/},889:(t,e,i)=>{"use strict";function n(t){return null==t&&(t=0),{data:[{dataViewWildcard:{matchingOption:t}}]}}i.d(e,{Z:()=>n})},8599:(t,e,i)=>{"use strict";function n(t){t.addCultureInfo("ar","default",{name:"ar",englishName:"Arabic",nativeName:"العربية",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"ر.س.‏"}},calendars:{standard:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_Localized:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("bg","default",{name:"bg",englishName:"Bulgarian",nativeName:"български",language:"bg",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"лв."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["неделя","понеделник","вторник","сряда","четвъртък","петък","събота"],namesAbbr:["нед","пон","вт","ср","четв","пет","съб"],namesShort:["н","п","в","с","ч","п","с"]},months:{names:["януари","февруари","март","април","май","юни","юли","август","септември","октомври","ноември","декември",""],namesAbbr:["ян","февр","март","апр","май","юни","юли","авг","септ","окт","ноември","дек",""]},AM:null,PM:null,eras:[{name:"след новата ера",start:null,offset:0}],patterns:{d:"d.M.yyyy 'г.'",D:"dd MMMM yyyy 'г.'",t:"HH:mm 'ч.'",T:"HH:mm:ss 'ч.'",f:"dd MMMM yyyy 'г.' HH:mm 'ч.'",F:"dd MMMM yyyy 'г.' HH:mm:ss 'ч.'",M:"dd MMMM",Y:"MMMM yyyy 'г.'"}}}}),t.addCultureInfo("ca","default",{name:"ca",englishName:"Catalan",nativeName:"català",language:"ca",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],namesAbbr:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],namesShort:["dg","dl","dt","dc","dj","dv","ds"]},months:{names:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre",""],namesAbbr:["gen","feb","març","abr","maig","juny","jul","ag","set","oct","nov","des",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, d' / 'MMMM' / 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' / 'MMMM' / 'yyyy HH:mm",F:"dddd, d' / 'MMMM' / 'yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM' / 'yyyy"}}}}),t.addCultureInfo("zh-Hans","default",{name:"zh-Hans",englishName:"Chinese (Simplified)",nativeName:"中文(简体)",language:"zh-Hans",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$n"],symbol:"¥"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["周日","周一","周二","周三","周四","周五","周六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"公元",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("cs","default",{name:"cs",englishName:"Czech",nativeName:"čeština",language:"cs",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"Kč"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],namesAbbr:["ne","po","út","st","čt","pá","so"],namesShort:["ne","po","út","st","čt","pá","so"]},months:{names:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},monthsGenitive:{names:["ledna","února","března","dubna","května","června","července","srpna","září","října","listopadu","prosince",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["dop.","dop.","DOP."],PM:["odp.","odp.","ODP."],eras:[{name:"n. l.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("da","default",{name:"da",englishName:"Danish",nativeName:"dansk",language:"da",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"kr."}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],namesAbbr:["sø","ma","ti","on","to","fr","lø"],namesShort:["sø","ma","ti","on","to","fr","lø"]},months:{names:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("de","default",{name:"de",englishName:"German",nativeName:"Deutsch",language:"de",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],namesAbbr:["So","Mo","Di","Mi","Do","Fr","Sa"],namesShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},months:{names:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd, d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d. MMMM yyyy HH:mm",F:"dddd, d. MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("el","default",{name:"el",englishName:"Greek",nativeName:"Ελληνικά",language:"el",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],namesAbbr:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],namesShort:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σά"]},months:{names:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος",""],namesAbbr:["Ιαν","Φεβ","Μαρ","Απρ","Μαϊ","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ",""]},monthsGenitive:{names:["Ιανουαρίου","Φεβρουαρίου","Μαρτίου","Απριλίου","Μαΐου","Ιουνίου","Ιουλίου","Αυγούστου","Σεπτεμβρίου","Οκτωβρίου","Νοεμβρίου","Δεκεμβρίου",""],namesAbbr:["Ιαν","Φεβ","Μαρ","Απρ","Μαϊ","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ",""]},AM:["πμ","πμ","ΠΜ"],PM:["μμ","μμ","ΜΜ"],eras:[{name:"μ.Χ.",start:null,offset:0}],patterns:{d:"d/M/yyyy",D:"dddd, d MMMM yyyy",f:"dddd, d MMMM yyyy h:mm tt",F:"dddd, d MMMM yyyy h:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("es","default",{name:"es",englishName:"Spanish",nativeName:"español",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("fi","default",{name:"fi",englishName:"Finnish",nativeName:"suomi",language:"fi",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],namesAbbr:["su","ma","ti","ke","to","pe","la"],namesShort:["su","ma","ti","ke","to","pe","la"]},months:{names:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu",""],namesAbbr:["tammi","helmi","maalis","huhti","touko","kesä","heinä","elo","syys","loka","marras","joulu",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM'ta 'yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM'ta 'yyyy H:mm",F:"d. MMMM'ta 'yyyy H:mm:ss",M:"d. MMMM'ta'",Y:"MMMM yyyy"}}}}),t.addCultureInfo("fr","default",{name:"fr",englishName:"French",nativeName:"français",language:"fr",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("he","default",{name:"he",englishName:"Hebrew",nativeName:"עברית",language:"he",isRTL:!0,numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$ n"],symbol:"₪"}},calendars:{standard:{days:{names:["יום ראשון","יום שני","יום שלישי","יום רביעי","יום חמישי","יום שישי","שבת"],namesAbbr:["יום א","יום ב","יום ג","יום ד","יום ה","יום ו","שבת"],namesShort:["א","ב","ג","ד","ה","ו","ש"]},months:{names:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר",""],namesAbbr:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ",""]},eras:[{name:"לספירה",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd dd MMMM yyyy HH:mm",F:"dddd dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}},Hebrew:{name:"Hebrew","/":" ",days:{names:["יום ראשון","יום שני","יום שלישי","יום רביעי","יום חמישי","יום שישי","שבת"],namesAbbr:["א","ב","ג","ד","ה","ו","ש"],namesShort:["א","ב","ג","ד","ה","ו","ש"]},months:{names:["תשרי","חשון","כסלו","טבת","שבט","אדר","אדר ב","ניסן","אייר","סיון","תמוז","אב","אלול"],namesAbbr:["תשרי","חשון","כסלו","טבת","שבט","אדר","אדר ב","ניסן","אייר","סיון","תמוז","אב","אלול"]},eras:[{name:"C.E.",start:null,offset:0}],twoDigitYearMax:5790,patterns:{d:"dd MMMM yyyy",D:"dddd dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd dd MMMM yyyy HH:mm",F:"dddd dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hu","default",{name:"hu",englishName:"Hungarian",nativeName:"magyar",language:"hu",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"Ft"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],namesAbbr:["V","H","K","Sze","Cs","P","Szo"],namesShort:["V","H","K","Sze","Cs","P","Szo"]},months:{names:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december",""],namesAbbr:["jan.","febr.","márc.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec.",""]},AM:["de.","de.","DE."],PM:["du.","du.","DU."],eras:[{name:"i.sz.",start:null,offset:0}],patterns:{d:"yyyy.MM.dd.",D:"yyyy. MMMM d.",t:"H:mm",T:"H:mm:ss",f:"yyyy. MMMM d. H:mm",F:"yyyy. MMMM d. H:mm:ss",M:"MMMM d.",Y:"yyyy. MMMM"}}}}),t.addCultureInfo("is","default",{name:"is",englishName:"Icelandic",nativeName:"íslenska",language:"is",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],decimals:0,",":".",".":",",symbol:"kr."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sunnudagur","mánudagur","þriðjudagur","miðvikudagur","fimmtudagur","föstudagur","laugardagur"],namesAbbr:["sun.","mán.","þri.","mið.","fim.","fös.","lau."],namesShort:["su","má","þr","mi","fi","fö","la"]},months:{names:["janúar","febrúar","mars","apríl","maí","júní","júlí","ágúst","september","október","nóvember","desember",""],namesAbbr:["jan.","feb.","mar.","apr.","maí","jún.","júl.","ágú.","sep.","okt.","nóv.","des.",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("it","default",{name:"it",englishName:"Italian",nativeName:"italiano",language:"it",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],namesAbbr:["dom","lun","mar","mer","gio","ven","sab"],namesShort:["do","lu","ma","me","gi","ve","sa"]},months:{names:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],namesAbbr:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ja","default",{name:"ja",englishName:"Japanese",nativeName:"日本語",language:"ja",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["-$n","$n"],decimals:0,symbol:"¥"}},calendars:{standard:{days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"西暦",start:null,offset:0}],patterns:{d:"yyyy/MM/dd",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}},Japanese:{name:"Japanese",days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"平成",start:null,offset:1867},{name:"昭和",start:-18121536e5,offset:1911},{name:"大正",start:-13576032e5,offset:1925},{name:"明治",start:6002208e4,offset:1988}],twoDigitYearMax:99,patterns:{d:"gg y/M/d",D:"gg y'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"gg y'年'M'月'd'日' H:mm",F:"gg y'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"gg y'年'M'月'"}}}}),t.addCultureInfo("ko","default",{name:"ko",englishName:"Korean",nativeName:"한국어",language:"ko",numberFormat:{currency:{pattern:["-$n","$n"],decimals:0,symbol:"₩"}},calendars:{standard:{"/":"-",days:{names:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],namesAbbr:["일","월","화","수","목","금","토"],namesShort:["일","월","화","수","목","금","토"]},months:{names:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["오전","오전","오전"],PM:["오후","오후","오후"],eras:[{name:"서기",start:null,offset:0}],patterns:{d:"yyyy-MM-dd",D:"yyyy'년' M'월' d'일' dddd",t:"tt h:mm",T:"tt h:mm:ss",f:"yyyy'년' M'월' d'일' dddd tt h:mm",F:"yyyy'년' M'월' d'일' dddd tt h:mm:ss",M:"M'월' d'일'",Y:"yyyy'년' M'월'"}},Korean:{name:"Korean","/":"-",days:{names:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],namesAbbr:["일","월","화","수","목","금","토"],namesShort:["일","월","화","수","목","금","토"]},months:{names:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["오전","오전","오전"],PM:["오후","오후","오후"],eras:[{name:"단기",start:null,offset:-2333}],twoDigitYearMax:4362,patterns:{d:"gg yyyy-MM-dd",D:"gg yyyy'년' M'월' d'일' dddd",t:"tt h:mm",T:"tt h:mm:ss",f:"gg yyyy'년' M'월' d'일' dddd tt h:mm",F:"gg yyyy'년' M'월' d'일' dddd tt h:mm:ss",M:"M'월' d'일'",Y:"gg yyyy'년' M'월'"}}}}),t.addCultureInfo("nl","default",{name:"nl",englishName:"Dutch",nativeName:"Nederlands",language:"nl",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],namesAbbr:["zo","ma","di","wo","do","vr","za"],namesShort:["zo","ma","di","wo","do","vr","za"]},months:{names:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],namesAbbr:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d-M-yyyy",D:"dddd d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd d MMMM yyyy H:mm",F:"dddd d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("no","default",{name:"no",englishName:"Norwegian",nativeName:"norsk",language:"no",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],namesAbbr:["sø","ma","ti","on","to","fr","lø"],namesShort:["sø","ma","ti","on","to","fr","lø"]},months:{names:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("pl","default",{name:"pl",englishName:"Polish",nativeName:"polski",language:"pl",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"zł"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],namesAbbr:["N","Pn","Wt","Śr","Cz","Pt","So"],namesShort:["N","Pn","Wt","Śr","Cz","Pt","So"]},months:{names:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień",""],namesAbbr:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru",""]},monthsGenitive:{names:["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","września","października","listopada","grudnia",""],namesAbbr:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d MMMM yyyy HH:mm",F:"d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("pt","default",{name:"pt",englishName:"Portuguese",nativeName:"Português",language:"pt",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"R$"}},calendars:{standard:{days:{names:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"],namesAbbr:["dom","seg","ter","qua","qui","sex","sáb"],namesShort:["D","S","T","Q","Q","S","S"]},months:{names:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],namesAbbr:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, d' de 'MMMM' de 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' de 'MMMM' de 'yyyy HH:mm",F:"dddd, d' de 'MMMM' de 'yyyy HH:mm:ss",M:"dd' de 'MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("rm","default",{name:"rm",englishName:"Romansh",nativeName:"Rumantsch",language:"rm",numberFormat:{",":"'",percent:{pattern:["-n%","n%"],",":"'"},currency:{pattern:["$-n","$ n"],",":"'",symbol:"fr."}},calendars:{standard:{firstDay:1,days:{names:["dumengia","glindesdi","mardi","mesemna","gievgia","venderdi","sonda"],namesAbbr:["du","gli","ma","me","gie","ve","so"],namesShort:["du","gli","ma","me","gie","ve","so"]},months:{names:["schaner","favrer","mars","avrigl","matg","zercladur","fanadur","avust","settember","october","november","december",""],namesAbbr:["schan","favr","mars","avr","matg","zercl","fan","avust","sett","oct","nov","dec",""]},AM:null,PM:null,eras:[{name:"s. Cr.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d MMMM yyyy HH:mm",F:"dddd, d MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ro","default",{name:"ro",englishName:"Romanian",nativeName:"română",language:"ro",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"lei"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["duminică","luni","marţi","miercuri","joi","vineri","sâmbătă"],namesAbbr:["D","L","Ma","Mi","J","V","S"],namesShort:["D","L","Ma","Mi","J","V","S"]},months:{names:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie",""],namesAbbr:["ian.","feb.","mar.","apr.","mai.","iun.","iul.","aug.","sep.","oct.","nov.","dec.",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d MMMM yyyy HH:mm",F:"d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ru","default",{name:"ru",englishName:"Russian",nativeName:"русский",language:"ru",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"р."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],namesAbbr:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],namesShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},months:{names:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь",""],namesAbbr:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек",""]},monthsGenitive:{names:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря",""],namesAbbr:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy 'г.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy 'г.' H:mm",F:"d MMMM yyyy 'г.' H:mm:ss",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hr","default",{name:"hr",englishName:"Croatian",nativeName:"hrvatski",language:"hr",numberFormat:{pattern:["- n"],",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kn"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sri","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["siječanj","veljača","ožujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac",""],namesAbbr:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""]},monthsGenitive:{names:["siječnja","veljače","ožujka","travnja","svibnja","lipnja","srpnja","kolovoza","rujna","listopada","studenog","prosinca",""],namesAbbr:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy.",D:"d. MMMM yyyy.",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy. H:mm",F:"d. MMMM yyyy. H:mm:ss",M:"d. MMMM"}}}}),t.addCultureInfo("sk","default",{name:"sk",englishName:"Slovak",nativeName:"slovenčina",language:"sk",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":". ",firstDay:1,days:{names:["nedeľa","pondelok","utorok","streda","štvrtok","piatok","sobota"],namesAbbr:["ne","po","ut","st","št","pi","so"],namesShort:["ne","po","ut","st","št","pi","so"]},months:{names:["január","február","marec","apríl","máj","jún","júl","august","september","október","november","december",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},monthsGenitive:{names:["januára","februára","marca","apríla","mája","júna","júla","augusta","septembra","októbra","novembra","decembra",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:null,PM:null,eras:[{name:"n. l.",start:null,offset:0}],patterns:{d:"d. M. yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sq","default",{name:"sq",englishName:"Albanian",nativeName:"shqipe",language:"sq",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n$","n$"],",":".",".":",",symbol:"Lek"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["e diel","e hënë","e martë","e mërkurë","e enjte","e premte","e shtunë"],namesAbbr:["Die","Hën","Mar","Mër","Enj","Pre","Sht"],namesShort:["Di","Hë","Ma","Më","En","Pr","Sh"]},months:{names:["janar","shkurt","mars","prill","maj","qershor","korrik","gusht","shtator","tetor","nëntor","dhjetor",""],namesAbbr:["Jan","Shk","Mar","Pri","Maj","Qer","Kor","Gsh","Sht","Tet","Nën","Dhj",""]},AM:["PD","pd","PD"],PM:["MD","md","MD"],patterns:{d:"yyyy-MM-dd",D:"yyyy-MM-dd",t:"h:mm.tt",T:"h:mm:ss.tt",f:"yyyy-MM-dd h:mm.tt",F:"yyyy-MM-dd h:mm:ss.tt",Y:"yyyy-MM"}}}}),t.addCultureInfo("sv","default",{name:"sv",englishName:"Swedish",nativeName:"svenska",language:"sv",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kr"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],namesAbbr:["sö","må","ti","on","to","fr","lö"],namesShort:["sö","må","ti","on","to","fr","lö"]},months:{names:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"'den 'd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"'den 'd MMMM yyyy HH:mm",F:"'den 'd MMMM yyyy HH:mm:ss",M:"'den 'd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("th","default",{name:"th",englishName:"Thai",nativeName:"ไทย",language:"th",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"฿"}},calendars:{standard:{name:"ThaiBuddhist",firstDay:1,days:{names:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],namesAbbr:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],namesShort:["อ","จ","อ","พ","พ","ศ","ส"]},months:{names:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม",""],namesAbbr:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค.",""]},eras:[{name:"พ.ศ.",start:null,offset:-543}],twoDigitYearMax:2572,patterns:{d:"d/M/yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}},Gregorian_Localized:{firstDay:1,days:{names:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],namesAbbr:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],namesShort:["อ","จ","อ","พ","พ","ศ","ส"]},months:{names:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม",""],namesAbbr:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค.",""]},patterns:{d:"d/M/yyyy",D:"'วัน'dddd'ที่' d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"'วัน'dddd'ที่' d MMMM yyyy H:mm",F:"'วัน'dddd'ที่' d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("tr","default",{name:"tr",englishName:"Turkish",nativeName:"Türkçe",language:"tr",numberFormat:{",":".",".":",",percent:{pattern:["-%n","%n"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"TL"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],namesAbbr:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"],namesShort:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"]},months:{names:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık",""],namesAbbr:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"dd MMMM yyyy dddd",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy dddd HH:mm",F:"dd MMMM yyyy dddd HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ur","default",{name:"ur",englishName:"Urdu",nativeName:"اُردو",language:"ur",isRTL:!0,numberFormat:{currency:{pattern:["$n-","$n"],symbol:"Rs"}},calendars:{standard:{firstDay:1,days:{names:["اتوار","پير","منگل","بدھ","جمعرات","جمعه","هفته"],namesAbbr:["اتوار","پير","منگل","بدھ","جمعرات","جمعه","هفته"],namesShort:["ا","پ","م","ب","ج","ج","ه"]},months:{names:["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر",""],namesAbbr:["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر",""]},patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",f:"dd MMMM, yyyy h:mm tt",F:"dd MMMM, yyyy h:mm:ss tt",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",f:"dd/MM/yyyy h:mm tt",F:"dd/MM/yyyy h:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}}}}),t.addCultureInfo("id","default",{name:"id",englishName:"Indonesian",nativeName:"Bahasa Indonesia",language:"id",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{decimals:0,",":".",".":",",symbol:"Rp"}},calendars:{standard:{firstDay:1,days:{names:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],namesAbbr:["Minggu","Sen","Sel","Rabu","Kamis","Jumat","Sabtu"],namesShort:["M","S","S","R","K","J","S"]},months:{names:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember",""],namesAbbr:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agust","Sep","Okt","Nop","Des",""]},AM:null,PM:null,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM yyyy H:mm",F:"dd MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("uk","default",{name:"uk",englishName:"Ukrainian",nativeName:"українська",language:"uk",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"₴"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["неділя","понеділок","вівторок","середа","четвер","п'ятниця","субота"],namesAbbr:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],namesShort:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},months:{names:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень",""],namesAbbr:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру",""]},monthsGenitive:{names:["січня","лютого","березня","квітня","травня","червня","липня","серпня","вересня","жовтня","листопада","грудня",""],namesAbbr:["січ","лют","бер","кві","тра","чер","лип","сер","вер","жов","лис","гру",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy' р.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy' р.' H:mm",F:"d MMMM yyyy' р.' H:mm:ss",M:"d MMMM",Y:"MMMM yyyy' р.'"}}}}),t.addCultureInfo("be","default",{name:"be",englishName:"Belarusian",nativeName:"Беларускі",language:"be",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"р."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["нядзеля","панядзелак","аўторак","серада","чацвер","пятніца","субота"],namesAbbr:["нд","пн","аў","ср","чц","пт","сб"],namesShort:["нд","пн","аў","ср","чц","пт","сб"]},months:{names:["Студзень","Люты","Сакавік","Красавік","Май","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Снежань",""],namesAbbr:["Сту","Лют","Сак","Кра","Май","Чэр","Ліп","Жні","Вер","Кас","Ліс","Сне",""]},monthsGenitive:{names:["студзеня","лютага","сакавіка","красавіка","мая","чэрвеня","ліпеня","жніўня","верасня","кастрычніка","лістапада","снежня",""],namesAbbr:["Сту","Лют","Сак","Кра","Май","Чэр","Ліп","Жні","Вер","Кас","Ліс","Сне",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sl","default",{name:"sl",englishName:"Slovenian",nativeName:"slovenski",language:"sl",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedelja","ponedeljek","torek","sreda","četrtek","petek","sobota"],namesAbbr:["ned","pon","tor","sre","čet","pet","sob"],namesShort:["ne","po","to","sr","če","pe","so"]},months:{names:["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("et","default",{name:"et",englishName:"Estonian",nativeName:"eesti",language:"et",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["pühapäev","esmaspäev","teisipäev","kolmapäev","neljapäev","reede","laupäev"],namesAbbr:["P","E","T","K","N","R","L"],namesShort:["P","E","T","K","N","R","L"]},months:{names:["jaanuar","veebruar","märts","aprill","mai","juuni","juuli","august","september","oktoober","november","detsember",""],namesAbbr:["jaan","veebr","märts","apr","mai","juuni","juuli","aug","sept","okt","nov","dets",""]},AM:["EL","el","EL"],PM:["PL","pl","PL"],patterns:{d:"d.MM.yyyy",D:"d. MMMM yyyy'. a.'",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy'. a.' H:mm",F:"d. MMMM yyyy'. a.' H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy'. a.'"}}}}),t.addCultureInfo("lv","default",{name:"lv",englishName:"Latvian",nativeName:"latviešu",language:"lv",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-$ n","$ n"],",":" ",".":",",symbol:"Ls"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["svētdiena","pirmdiena","otrdiena","trešdiena","ceturtdiena","piektdiena","sestdiena"],namesAbbr:["sv","pr","ot","tr","ce","pk","se"],namesShort:["sv","pr","ot","tr","ce","pk","se"]},months:{names:["janvāris","februāris","marts","aprīlis","maijs","jūnijs","jūlijs","augusts","septembris","oktobris","novembris","decembris",""],namesAbbr:["jan","feb","mar","apr","mai","jūn","jūl","aug","sep","okt","nov","dec",""]},monthsGenitive:{names:["janvārī","februārī","martā","aprīlī","maijā","jūnijā","jūlijā","augustā","septembrī","oktobrī","novembrī","decembrī",""],namesAbbr:["jan","feb","mar","apr","mai","jūn","jūl","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"yyyy.MM.dd.",D:"dddd, yyyy'. gada 'd. MMMM",t:"H:mm",T:"H:mm:ss",f:"dddd, yyyy'. gada 'd. MMMM H:mm",F:"dddd, yyyy'. gada 'd. MMMM H:mm:ss",M:"d. MMMM",Y:"yyyy. MMMM"}}}}),t.addCultureInfo("lt","default",{name:"lt",englishName:"Lithuanian",nativeName:"lietuvių",language:"lt",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Lt"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sekmadienis","pirmadienis","antradienis","trečiadienis","ketvirtadienis","penktadienis","šeštadienis"],namesAbbr:["Sk","Pr","An","Tr","Kt","Pn","Št"],namesShort:["S","P","A","T","K","Pn","Š"]},months:{names:["sausis","vasaris","kovas","balandis","gegužė","birželis","liepa","rugpjūtis","rugsėjis","spalis","lapkritis","gruodis",""],namesAbbr:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rgp","Rgs","Spl","Lap","Grd",""]},monthsGenitive:{names:["sausio","vasario","kovo","balandžio","gegužės","birželio","liepos","rugpjūčio","rugsėjo","spalio","lapkričio","gruodžio",""],namesAbbr:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rgp","Rgs","Spl","Lap","Grd",""]},AM:null,PM:null,patterns:{d:"yyyy.MM.dd",D:"yyyy 'm.' MMMM d 'd.'",t:"HH:mm",T:"HH:mm:ss",f:"yyyy 'm.' MMMM d 'd.' HH:mm",F:"yyyy 'm.' MMMM d 'd.' HH:mm:ss",M:"MMMM d 'd.'",Y:"yyyy 'm.' MMMM"}}}}),t.addCultureInfo("tg","default",{name:"tg",englishName:"Tajik",nativeName:"Тоҷикӣ",language:"tg",numberFormat:{",":" ",".":",",groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0],",":" ",".":","},currency:{pattern:["-n $","n $"],groupSizes:[3,0],",":" ",".":";",symbol:"т.р."}},calendars:{standard:{"/":".",days:{names:["Яш","Душанбе","Сешанбе","Чоршанбе","Панҷшанбе","Ҷумъа","Шанбе"],namesAbbr:["Яш","Дш","Сш","Чш","Пш","Ҷм","Шн"],namesShort:["Яш","Дш","Сш","Чш","Пш","Ҷм","Шн"]},months:{names:["Январ","Феврал","Март","Апрел","Май","Июн","Июл","Август","Сентябр","Октябр","Ноябр","Декабр",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},monthsGenitive:{names:["январи","феврали","марти","апрели","маи","июни","июли","августи","сентябри","октябри","ноябри","декабри",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",Y:"MMMM yyyy"}}}}),t.addCultureInfo("fa","default",{name:"fa",englishName:"Persian",nativeName:"فارسى",language:"fa",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],".":"/",symbol:"ريال"}},calendars:{standard:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ق.ظ","ق.ظ","ق.ظ"],PM:["ب.ظ","ب.ظ","ب.ظ"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_Localized:{firstDay:6,days:{names:["يكشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],namesAbbr:["يكشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],namesShort:["ی","د","س","چ","پ","ج","ش"]},months:{names:["ژانويه","فوريه","مارس","آوريل","مى","ژوئن","ژوئيه","اوت","سپتامبر","اُكتبر","نوامبر","دسامبر",""],namesAbbr:["ژانويه","فوريه","مارس","آوريل","مى","ژوئن","ژوئيه","اوت","سپتامبر","اُكتبر","نوامبر","دسامبر",""]},AM:["ق.ظ","ق.ظ","ق.ظ"],PM:["ب.ظ","ب.ظ","ب.ظ"],patterns:{d:"yyyy/MM/dd",D:"yyyy/MM/dd",t:"hh:mm tt",T:"hh:mm:ss tt",f:"yyyy/MM/dd hh:mm tt",F:"yyyy/MM/dd hh:mm:ss tt",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ق.ظ","ق.ظ","ق.ظ"],PM:["ب.ظ","ب.ظ","ب.ظ"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ق.ظ","ق.ظ","ق.ظ"],PM:["ب.ظ","ب.ظ","ب.ظ"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("vi","default",{name:"vi",englishName:"Vietnamese",nativeName:"Tiếng Việt",language:"vi",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"₫"}},calendars:{standard:{firstDay:1,days:{names:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],namesAbbr:["CN","Hai","Ba","Tư","Năm","Sáu","Bảy"],namesShort:["C","H","B","T","N","S","B"]},months:{names:["Tháng Giêng","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai",""],namesAbbr:["Thg1","Thg2","Thg3","Thg4","Thg5","Thg6","Thg7","Thg8","Thg9","Thg10","Thg11","Thg12",""]},AM:["SA","sa","SA"],PM:["CH","ch","CH"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",f:"dd MMMM yyyy h:mm tt",F:"dd MMMM yyyy h:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hy","default",{name:"hy",englishName:"Armenian",nativeName:"Հայերեն",language:"hy",numberFormat:{currency:{pattern:["-n $","n $"],symbol:"դր."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Կիրակի","Երկուշաբթի","Երեքշաբթի","Չորեքշաբթի","Հինգշաբթի","ՈՒրբաթ","Շաբաթ"],namesAbbr:["Կիր","Երկ","Երք","Չրք","Հնգ","ՈՒր","Շբթ"],namesShort:["Կ","Ե","Ե","Չ","Հ","Ո","Շ"]},months:{names:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր",""],namesAbbr:["ՀՆՎ","ՓՏՎ","ՄՐՏ","ԱՊՐ","ՄՅՍ","ՀՆՍ","ՀԼՍ","ՕԳՍ","ՍԵՊ","ՀՈԿ","ՆՈՅ","ԴԵԿ",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM, yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM, yyyy H:mm",F:"d MMMM, yyyy H:mm:ss",M:"d MMMM"}}}}),t.addCultureInfo("az","default",{name:"az",englishName:"Azeri",nativeName:"Azərbaycan­ılı",language:"az",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"man."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"],namesAbbr:["B","Be","Ça","Ç","Ca","C","Ş"],namesShort:["B","Be","Ça","Ç","Ca","C","Ş"]},months:{names:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avgust","Sentyabr","Oktyabr","Noyabr","Dekabr",""],namesAbbr:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avg","Sen","Okt","Noy","Dek",""]},monthsGenitive:{names:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""],namesAbbr:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avg","Sen","Okt","Noy","Dek",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("eu","default",{name:"eu",englishName:"Basque",nativeName:"euskara",language:"eu",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],namesAbbr:["ig.","al.","as.","az.","og.","or.","lr."],namesShort:["ig","al","as","az","og","or","lr"]},months:{names:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua",""],namesAbbr:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe.",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"yyyy/MM/dd",D:"dddd, yyyy.'eko' MMMM'k 'd",t:"HH:mm",T:"H:mm:ss",f:"dddd, yyyy.'eko' MMMM'k 'd HH:mm",F:"dddd, yyyy.'eko' MMMM'k 'd H:mm:ss",Y:"yyyy.'eko' MMMM"}}}}),t.addCultureInfo("hsb","default",{name:"hsb",englishName:"Upper Sorbian",nativeName:"hornjoserbšćina",language:"hsb",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":". ",firstDay:1,days:{names:["njedźela","póndźela","wutora","srjeda","štwórtk","pjatk","sobota"],namesAbbr:["nje","pón","wut","srj","štw","pja","sob"],namesShort:["n","p","w","s","š","p","s"]},months:{names:["januar","februar","měrc","apryl","meja","junij","julij","awgust","september","oktober","nowember","december",""],namesAbbr:["jan","feb","měr","apr","mej","jun","jul","awg","sep","okt","now","dec",""]},monthsGenitive:{names:["januara","februara","měrca","apryla","meje","junija","julija","awgusta","septembra","oktobra","nowembra","decembra",""],namesAbbr:["jan","feb","měr","apr","mej","jun","jul","awg","sep","okt","now","dec",""]},AM:null,PM:null,eras:[{name:"po Chr.",start:null,offset:0}],patterns:{d:"d. M. yyyy",D:"dddd, 'dnja' d. MMMM yyyy",t:"H.mm 'hodź.'",T:"H:mm:ss",f:"dddd, 'dnja' d. MMMM yyyy H.mm 'hodź.'",F:"dddd, 'dnja' d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("mk","default",{name:"mk",englishName:"Macedonian (FYROM)",nativeName:"македонски јазик",language:"mk",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"ден."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недела","понеделник","вторник","среда","четврток","петок","сабота"],namesAbbr:["нед","пон","втр","срд","чет","пет","саб"],namesShort:["не","по","вт","ср","че","пе","са"]},months:{names:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември",""],namesAbbr:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"dddd, dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, dd MMMM yyyy HH:mm",F:"dddd, dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("tn","default",{name:"tn",englishName:"Setswana",nativeName:"Setswana",language:"tn",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["Latshipi","Mosupologo","Labobedi","Laboraro","Labone","Labotlhano","Lamatlhatso"],namesAbbr:["Ltp.","Mos.","Lbd.","Lbr.","Lbn.","Lbt.","Lmt."],namesShort:["Lp","Ms","Lb","Lr","Ln","Lt","Lm"]},months:{names:["Ferikgong","Tlhakole","Mopitloe","Moranang","Motsheganong","Seetebosigo","Phukwi","Phatwe","Lwetse","Diphalane","Ngwanatsele","Sedimothole",""],namesAbbr:["Fer.","Tlhak.","Mop.","Mor.","Motsh.","Seet.","Phukw.","Phatw.","Lwets.","Diph.","Ngwan.","Sed.",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("xh","default",{name:"xh",englishName:"isiXhosa",nativeName:"isiXhosa",language:"xh",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["iCawa","uMvulo","uLwesibini","uLwesithathu","uLwesine","uLwesihlanu","uMgqibelo"],namesShort:["Ca","Mv","Lb","Lt","Ln","Lh","Mg"]},months:{names:["Mqungu","Mdumba","Kwindla","Tshazimpuzi","Canzibe","Silimela","Khala","Thupha","Msintsi","Dwarha","Nkanga","Mnga",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("zu","default",{name:"zu",englishName:"isiZulu",nativeName:"isiZulu",language:"zu",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["iSonto","uMsombuluko","uLwesibili","uLwesithathu","uLwesine","uLwesihlanu","uMgqibelo"],namesAbbr:["Son.","Mso.","Bi.","Tha.","Ne.","Hla.","Mgq."]},months:{names:["uMasingana","uNhlolanja","uNdasa","uMbaso","uNhlaba","uNhlangulana","uNtulikazi","uNcwaba","uMandulo","uMfumfu","uLwezi","uZibandlela",""],namesAbbr:["Mas.","Nhlo.","Nda.","Mba.","Nhla.","Nhlang.","Ntu.","Ncwa.","Man.","Mfu.","Lwe.","Zib.",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("af","default",{name:"af",englishName:"Afrikaans",nativeName:"Afrikaans",language:"af",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["Sondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrydag","Saterdag"],namesAbbr:["Son","Maan","Dins","Woen","Dond","Vry","Sat"],namesShort:["So","Ma","Di","Wo","Do","Vr","Sa"]},months:{names:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember",""],namesAbbr:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ka","default",{name:"ka",englishName:"Georgian",nativeName:"ქართული",language:"ka",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"Lari"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"],namesAbbr:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"],namesShort:["კ","ო","ს","ო","ხ","პ","შ"]},months:{names:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი",""],namesAbbr:["იან","თებ","მარ","აპრ","მაის","ივნ","ივლ","აგვ","სექ","ოქტ","ნოემ","დეკ",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"yyyy 'წლის' dd MM, dddd",t:"H:mm",T:"H:mm:ss",f:"yyyy 'წლის' dd MM, dddd H:mm",F:"yyyy 'წლის' dd MM, dddd H:mm:ss",M:"dd MM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("fo","default",{name:"fo",englishName:"Faroese",nativeName:"føroyskt",language:"fo",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"kr."}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["sunnudagur","mánadagur","týsdagur","mikudagur","hósdagur","fríggjadagur","leygardagur"],namesAbbr:["sun","mán","týs","mik","hós","frí","leyg"],namesShort:["su","má","tý","mi","hó","fr","ley"]},months:{names:["januar","februar","mars","apríl","mai","juni","juli","august","september","oktober","november","desember",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hi","default",{name:"hi",englishName:"Hindi",nativeName:"हिंदी",language:"hi",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["रविवार","सोमवार","मंगलवार","बुधवार","गुरुवार","शुक्रवार","शनिवार"],namesAbbr:["रवि.","सोम.","मंगल.","बुध.","गुरु.","शुक्र.","शनि."],namesShort:["र","स","म","ब","ग","श","श"]},months:{names:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""],namesAbbr:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""]},AM:["पूर्वाह्न","पूर्वाह्न","पूर्वाह्न"],PM:["अपराह्न","अपराह्न","अपराह्न"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("mt","default",{name:"mt",englishName:"Maltese",nativeName:"Malti",language:"mt",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["-$n","$n"],symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Il-Ħadd","It-Tnejn","It-Tlieta","L-Erbgħa","Il-Ħamis","Il-Ġimgħa","Is-Sibt"],namesAbbr:["Ħad","Tne","Tli","Erb","Ħam","Ġim","Sib"],namesShort:["I","I","I","L","I","I","I"]},months:{names:["Jannar","Frar","Marzu","April","Mejju","Ġunju","Lulju","Awissu","Settembru","Ottubru","Novembru","Diċembru",""],namesAbbr:["Jan","Fra","Mar","Apr","Mej","Ġun","Lul","Awi","Set","Ott","Nov","Diċ",""]},patterns:{d:"dd/MM/yyyy",D:"dddd, d' ta\\' 'MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' ta\\' 'MMMM yyyy HH:mm",F:"dddd, d' ta\\' 'MMMM yyyy HH:mm:ss",M:"d' ta\\' 'MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("se","default",{name:"se",englishName:"Sami (Northern)",nativeName:"davvisámegiella",language:"se",numberFormat:{",":" ",".":",",percent:{pattern:["-%n","%n"],",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sotnabeaivi","vuossárga","maŋŋebárga","gaskavahkku","duorastat","bearjadat","lávvardat"],namesAbbr:["sotn","vuos","maŋ","gask","duor","bear","láv"],namesShort:["s","m","d","g","d","b","l"]},months:{names:["ođđajagemánnu","guovvamánnu","njukčamánnu","cuoŋománnu","miessemánnu","geassemánnu","suoidnemánnu","borgemánnu","čakčamánnu","golggotmánnu","skábmamánnu","juovlamánnu",""],namesAbbr:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov",""]},monthsGenitive:{names:["ođđajagimánu","guovvamánu","njukčamánu","cuoŋománu","miessemánu","geassemánu","suoidnemánu","borgemánu","čakčamánu","golggotmánu","skábmamánu","juovlamánu",""],namesAbbr:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ga","default",{name:"ga",englishName:"Irish",nativeName:"Gaeilge",language:"ga",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Sathairn"],namesAbbr:["Domh","Luan","Máir","Céad","Déar","Aoi","Sath"],namesShort:["Do","Lu","Má","Cé","De","Ao","Sa"]},months:{names:["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Meitheamh","Iúil","Lúnasa","Meán Fómhair","Deireadh Fómhair","Samhain","Nollaig",""],namesAbbr:["Ean","Feabh","Már","Aib","Bealt","Meith","Iúil","Lún","M.Fómh","D.Fómh","Samh","Noll",""]},AM:["r.n.","r.n.","R.N."],PM:["i.n.","i.n.","I.N."],patterns:{d:"dd/MM/yyyy",D:"d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d MMMM yyyy HH:mm",F:"d MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ms","default",{name:"ms",englishName:"Malay",nativeName:"Bahasa Melayu",language:"ms",numberFormat:{currency:{decimals:0,symbol:"RM"}},calendars:{standard:{firstDay:1,days:{names:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],namesAbbr:["Ahad","Isnin","Sel","Rabu","Khamis","Jumaat","Sabtu"],namesShort:["A","I","S","R","K","J","S"]},months:{names:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember",""],namesAbbr:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogos","Sept","Okt","Nov","Dis",""]},AM:null,PM:null,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM yyyy H:mm",F:"dd MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("kk","default",{name:"kk",englishName:"Kazakh",nativeName:"Қазақ",language:"kk",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-$n","$n"],",":" ",".":"-",symbol:"Т"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Жексенбі","Дүйсенбі","Сейсенбі","Сәрсенбі","Бейсенбі","Жұма","Сенбі"],namesAbbr:["Жк","Дс","Сс","Ср","Бс","Жм","Сн"],namesShort:["Жк","Дс","Сс","Ср","Бс","Жм","Сн"]},months:{names:["қаңтар","ақпан","наурыз","сәуір","мамыр","маусым","шілде","тамыз","қыркүйек","қазан","қараша","желтоқсан",""],namesAbbr:["Қаң","Ақп","Нау","Сәу","Мам","Мау","Шіл","Там","Қыр","Қаз","Қар","Жел",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy 'ж.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy 'ж.' H:mm",F:"d MMMM yyyy 'ж.' H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ky","default",{name:"ky",englishName:"Kyrgyz",nativeName:"Кыргыз",language:"ky",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":"-",symbol:"сом"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Жекшемби","Дүйшөмбү","Шейшемби","Шаршемби","Бейшемби","Жума","Ишемби"],namesAbbr:["Жш","Дш","Шш","Шр","Бш","Жм","Иш"],namesShort:["Жш","Дш","Шш","Шр","Бш","Жм","Иш"]},months:{names:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"d'-'MMMM yyyy'-ж.'",t:"H:mm",T:"H:mm:ss",f:"d'-'MMMM yyyy'-ж.' H:mm",F:"d'-'MMMM yyyy'-ж.' H:mm:ss",M:"d MMMM",Y:"MMMM yyyy'-ж.'"}}}}),t.addCultureInfo("sw","default",{name:"sw",englishName:"Kiswahili",nativeName:"Kiswahili",language:"sw",numberFormat:{currency:{symbol:"S"}},calendars:{standard:{days:{names:["Jumapili","Jumatatu","Jumanne","Jumatano","Alhamisi","Ijumaa","Jumamosi"],namesAbbr:["Jumap.","Jumat.","Juman.","Jumat.","Alh.","Iju.","Jumam."],namesShort:["P","T","N","T","A","I","M"]},months:{names:["Januari","Februari","Machi","Aprili","Mei","Juni","Julai","Agosti","Septemba","Oktoba","Novemba","Decemba",""],namesAbbr:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ago","Sep","Okt","Nov","Dec",""]}}}}),t.addCultureInfo("tk","default",{name:"tk",englishName:"Turkmen",nativeName:"türkmençe",language:"tk",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"m."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Duşenbe","Sişenbe","Çarşenbe","Penşenbe","Anna","Şenbe","Ýekşenbe"],namesAbbr:["Db","Sb","Çb","Pb","An","Şb","Ýb"],namesShort:["D","S","Ç","P","A","Ş","Ý"]},months:{names:["Ýanwar","Fewral","Mart","Aprel","Maý","lýun","lýul","Awgust","Sentýabr","Oktýabr","Noýabr","Dekabr",""],namesAbbr:["Ýan","Few","Mart","Apr","Maý","lýun","lýul","Awg","Sen","Okt","Not","Dek",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"yyyy 'ý.' MMMM d",t:"H:mm",T:"H:mm:ss",f:"yyyy 'ý.' MMMM d H:mm",F:"yyyy 'ý.' MMMM d H:mm:ss",Y:"yyyy 'ý.' MMMM"}}}}),t.addCultureInfo("uz","default",{name:"uz",englishName:"Uzbek",nativeName:"U'zbek",language:"uz",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],decimals:0,",":" ",".":",",symbol:"so'm"}},calendars:{standard:{firstDay:1,days:{names:["yakshanba","dushanba","seshanba","chorshanba","payshanba","juma","shanba"],namesAbbr:["yak.","dsh.","sesh.","chr.","psh.","jm.","sh."],namesShort:["ya","d","s","ch","p","j","sh"]},months:{names:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""],namesAbbr:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""]},AM:null,PM:null,patterns:{d:"dd/MM yyyy",D:"yyyy 'yil' d-MMMM",t:"HH:mm",T:"HH:mm:ss",f:"yyyy 'yil' d-MMMM HH:mm",F:"yyyy 'yil' d-MMMM HH:mm:ss",M:"d-MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("tt","default",{name:"tt",englishName:"Tatar",nativeName:"Татар",language:"tt",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"р."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Якшәмбе","Дүшәмбе","Сишәмбе","Чәршәмбе","Пәнҗешәмбе","Җомга","Шимбә"],namesAbbr:["Якш","Дүш","Сиш","Чәрш","Пәнҗ","Җом","Шим"],namesShort:["Я","Д","С","Ч","П","Җ","Ш"]},months:{names:["Гыйнвар","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь",""],namesAbbr:["Гыйн.","Фев.","Мар.","Апр.","Май","Июнь","Июль","Авг.","Сен.","Окт.","Нояб.","Дек.",""]},monthsGenitive:{names:["Гыйнварның","Февральнең","Мартның","Апрельнең","Майның","Июньнең","Июльнең","Августның","Сентябрьның","Октябрьның","Ноябрьның","Декабрьның",""],namesAbbr:["Гыйн.-ның","Фев.-нең","Мар.-ның","Апр.-нең","Майның","Июньнең","Июльнең","Авг.-ның","Сен.-ның","Окт.-ның","Нояб.-ның","Дек.-ның",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("bn","default",{name:"bn",englishName:"Bengali",nativeName:"বাংলা",language:"bn",numberFormat:{groupSizes:[3,2],percent:{pattern:["-%n","%n"],groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"টা"}},calendars:{standard:{"/":"-",":":".",firstDay:1,days:{names:["রবিবার","সোমবার","মঙ্গলবার","বুধবার","বৃহস্পতিবার","শুক্রবার","শনিবার"],namesAbbr:["রবি.","সোম.","মঙ্গল.","বুধ.","বৃহস্পতি.","শুক্র.","শনি."],namesShort:["র","স","ম","ব","ব","শ","শ"]},months:{names:["জানুয়ারী","ফেব্রুয়ারী","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগস্ট","সেপ্টেম্বর","অক্টোবর","নভেম্বর","ডিসেম্বর",""],namesAbbr:["জানু.","ফেব্রু.","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগ.","সেপ্টে.","অক্টো.","নভে.","ডিসে.",""]},AM:["পুর্বাহ্ন","পুর্বাহ্ন","পুর্বাহ্ন"],PM:["অপরাহ্ন","অপরাহ্ন","অপরাহ্ন"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH.mm",T:"HH.mm.ss",f:"dd MMMM yyyy HH.mm",F:"dd MMMM yyyy HH.mm.ss",M:"dd MMMM"}}}}),t.addCultureInfo("pa","default",{name:"pa",englishName:"Punjabi",nativeName:"ਪੰਜਾਬੀ",language:"pa",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ਰੁ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ਐਤਵਾਰ","ਸੋਮਵਾਰ","ਮੰਗਲਵਾਰ","ਬੁੱਧਵਾਰ","ਵੀਰਵਾਰ","ਸ਼ੁੱਕਰਵਾਰ","ਸ਼ਨਿੱਚਰਵਾਰ"],namesAbbr:["ਐਤ.","ਸੋਮ.","ਮੰਗਲ.","ਬੁੱਧ.","ਵੀਰ.","ਸ਼ੁਕਰ.","ਸ਼ਨਿੱਚਰ."],namesShort:["ਐ","ਸ","ਮ","ਬ","ਵ","ਸ਼","ਸ਼"]},months:{names:["ਜਨਵਰੀ","ਫ਼ਰਵਰੀ","ਮਾਰਚ","ਅਪ੍ਰੈਲ","ਮਈ","ਜੂਨ","ਜੁਲਾਈ","ਅਗਸਤ","ਸਤੰਬਰ","ਅਕਤੂਬਰ","ਨਵੰਬਰ","ਦਸੰਬਰ",""],namesAbbr:["ਜਨਵਰੀ","ਫ਼ਰਵਰੀ","ਮਾਰਚ","ਅਪ੍ਰੈਲ","ਮਈ","ਜੂਨ","ਜੁਲਾਈ","ਅਗਸਤ","ਸਤੰਬਰ","ਅਕਤੂਬਰ","ਨਵੰਬਰ","ਦਸੰਬਰ",""]},AM:["ਸਵੇਰ","ਸਵੇਰ","ਸਵੇਰ"],PM:["ਸ਼ਾਮ","ਸ਼ਾਮ","ਸ਼ਾਮ"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy dddd",t:"tt hh:mm",T:"tt hh:mm:ss",f:"dd MMMM yyyy dddd tt hh:mm",F:"dd MMMM yyyy dddd tt hh:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("gu","default",{name:"gu",englishName:"Gujarati",nativeName:"ગુજરાતી",language:"gu",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"રૂ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["રવિવાર","સોમવાર","મંગળવાર","બુધવાર","ગુરુવાર","શુક્રવાર","શનિવાર"],namesAbbr:["રવિ","સોમ","મંગળ","બુધ","ગુરુ","શુક્ર","શનિ"],namesShort:["ર","સ","મ","બ","ગ","શ","શ"]},months:{names:["જાન્યુઆરી","ફેબ્રુઆરી","માર્ચ","એપ્રિલ","મે","જૂન","જુલાઈ","ઑગસ્ટ","સપ્ટેમ્બર","ઑક્ટ્બર","નવેમ્બર","ડિસેમ્બર",""],namesAbbr:["જાન્યુ","ફેબ્રુ","માર્ચ","એપ્રિલ","મે","જૂન","જુલાઈ","ઑગસ્ટ","સપ્ટે","ઑક્ટો","નવે","ડિસે",""]},AM:["પૂર્વ મધ્યાહ્ન","પૂર્વ મધ્યાહ્ન","પૂર્વ મધ્યાહ્ન"],PM:["ઉત્તર મધ્યાહ્ન","ઉત્તર મધ્યાહ્ન","ઉત્તર મધ્યાહ્ન"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("or","default",{name:"or",englishName:"Oriya",nativeName:"ଓଡ଼ିଆ",language:"or",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ଟ"}},calendars:{standard:{"/":"-",days:{names:["ରବିବାର","ସୋମବାର","ମଙ୍ଗଳବାର","ବୁଧବାର","ଗୁରୁବାର","ଶୁକ୍ରବାର","ଶନିବାର"],namesAbbr:["ରବି.","ସୋମ.","ମଙ୍ଗଳ.","ବୁଧ.","ଗୁରୁ.","ଶୁକ୍ର.","ଶନି."],namesShort:["ର","ସୋ","ମ","ବୁ","ଗୁ","ଶୁ","ଶ"]},months:{names:["ଜାନୁୟାରୀ","ଫ୍ରେବୃୟାରୀ","ମାର୍ଚ୍ଚ","ଏପ୍ରିଲ୍‌","ମେ","ଜୁନ୍‌","ଜୁଲାଇ","ଅଗଷ୍ଟ","ସେପ୍ଟେମ୍ବର","ଅକ୍ଟୋବର","ନଭେମ୍ବର","(ଡିସେମ୍ବର",""],namesAbbr:["ଜାନୁୟାରୀ","ଫ୍ରେବୃୟାରୀ","ମାର୍ଚ୍ଚ","ଏପ୍ରିଲ୍‌","ମେ","ଜୁନ୍‌","ଜୁଲାଇ","ଅଗଷ୍ଟ","ସେପ୍ଟେମ୍ବର","ଅକ୍ଟୋବର","ନଭେମ୍ବର","(ଡିସେମ୍ବର",""]},eras:[{name:"ଖ୍ରୀଷ୍ଟାବ୍ଦ",start:null,offset:0}],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("ta","default",{name:"ta",englishName:"Tamil",nativeName:"தமிழ்",language:"ta",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ரூ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ஞாயிற்றுக்கிழமை","திங்கள்கிழமை","செவ்வாய்கிழமை","புதன்கிழமை","வியாழக்கிழமை","வெள்ளிக்கிழமை","சனிக்கிழமை"],namesAbbr:["ஞாயிறு","திங்கள்","செவ்வாய்","புதன்","வியாழன்","வெள்ளி","சனி"],namesShort:["ஞா","தி","செ","பு","வி","வெ","ச"]},months:{names:["ஜனவரி","பிப்ரவரி","மார்ச்","ஏப்ரல்","மே","ஜூன்","ஜூலை","ஆகஸ்ட்","செப்டம்பர்","அக்டோபர்","நவம்பர்","டிசம்பர்",""],namesAbbr:["ஜனவரி","பிப்ரவரி","மார்ச்","ஏப்ரல்","மே","ஜூன்","ஜூலை","ஆகஸ்ட்","செப்டம்பர்","அக்டோபர்","நவம்பர்","டிசம்பர்",""]},AM:["காலை","காலை","காலை"],PM:["மாலை","மாலை","மாலை"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("te","default",{name:"te",englishName:"Telugu",nativeName:"తెలుగు",language:"te",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"రూ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ఆదివారం","సోమవారం","మంగళవారం","బుధవారం","గురువారం","శుక్రవారం","శనివారం"],namesAbbr:["ఆది.","సోమ.","మంగళ.","బుధ.","గురు.","శుక్ర.","శని."],namesShort:["ఆ","సో","మం","బు","గు","శు","శ"]},months:{names:["జనవరి","ఫిబ్రవరి","మార్చి","ఏప్రిల్","మే","జూన్","జూలై","ఆగస్టు","సెప్టెంబర్","అక్టోబర్","నవంబర్","డిసెంబర్",""],namesAbbr:["జనవరి","ఫిబ్రవరి","మార్చి","ఏప్రిల్","మే","జూన్","జూలై","ఆగస్టు","సెప్టెంబర్","అక్టోబర్","నవంబర్","డిసెంబర్",""]},AM:["పూర్వాహ్న","పూర్వాహ్న","పూర్వాహ్న"],PM:["అపరాహ్న","అపరాహ్న","అపరాహ్న"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("kn","default",{name:"kn",englishName:"Kannada",nativeName:"ಕನ್ನಡ",language:"kn",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ರೂ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ಭಾನುವಾರ","ಸೋಮವಾರ","ಮಂಗಳವಾರ","ಬುಧವಾರ","ಗುರುವಾರ","ಶುಕ್ರವಾರ","ಶನಿವಾರ"],namesAbbr:["ಭಾನು.","ಸೋಮ.","ಮಂಗಳ.","ಬುಧ.","ಗುರು.","ಶುಕ್ರ.","ಶನಿ."],namesShort:["ರ","ಸ","ಮ","ಬ","ಗ","ಶ","ಶ"]},months:{names:["ಜನವರಿ","ಫೆಬ್ರವರಿ","ಮಾರ್ಚ್","ಎಪ್ರಿಲ್","ಮೇ","ಜೂನ್","ಜುಲೈ","ಆಗಸ್ಟ್","ಸೆಪ್ಟಂಬರ್","ಅಕ್ಟೋಬರ್","ನವೆಂಬರ್","ಡಿಸೆಂಬರ್",""],namesAbbr:["ಜನವರಿ","ಫೆಬ್ರವರಿ","ಮಾರ್ಚ್","ಎಪ್ರಿಲ್","ಮೇ","ಜೂನ್","ಜುಲೈ","ಆಗಸ್ಟ್","ಸೆಪ್ಟಂಬರ್","ಅಕ್ಟೋಬರ್","ನವೆಂಬರ್","ಡಿಸೆಂಬರ್",""]},AM:["ಪೂರ್ವಾಹ್ನ","ಪೂರ್ವಾಹ್ನ","ಪೂರ್ವಾಹ್ನ"],PM:["ಅಪರಾಹ್ನ","ಅಪರಾಹ್ನ","ಅಪರಾಹ್ನ"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("ml","default",{name:"ml",englishName:"Malayalam",nativeName:"മലയാളം",language:"ml",numberFormat:{groupSizes:[3,2],percent:{pattern:["-%n","%n"],groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ക"}},calendars:{standard:{"/":"-",":":".",firstDay:1,days:{names:["ഞായറാഴ്ച","തിങ്കളാഴ്ച","ചൊവ്വാഴ്ച","ബുധനാഴ്ച","വ്യാഴാഴ്ച","വെള്ളിയാഴ്ച","ശനിയാഴ്ച"],namesAbbr:["ഞായർ.","തിങ്കൾ.","ചൊവ്വ.","ബുധൻ.","വ്യാഴം.","വെള്ളി.","ശനി."],namesShort:["ഞ","ത","ച","ബ","വ","വെ","ശ"]},months:{names:["ജനുവരി","ഫെബ്റുവരി","മാറ്ച്ച്","ഏപ്റില്","മെയ്","ജൂണ്","ജൂലൈ","ഓഗസ്ററ്","സെപ്ററംബറ്","ഒക്ടോബറ്","നവംബറ്","ഡിസംബറ്",""],namesAbbr:["ജനുവരി","ഫെബ്റുവരി","മാറ്ച്ച്","ഏപ്റില്","മെയ്","ജൂണ്","ജൂലൈ","ഓഗസ്ററ്","സെപ്ററംബറ്","ഒക്ടോബറ്","നവംബറ്","ഡിസംബറ്",""]},patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH.mm",T:"HH.mm.ss",f:"dd MMMM yyyy HH.mm",F:"dd MMMM yyyy HH.mm.ss",M:"dd MMMM"}}}}),t.addCultureInfo("as","default",{name:"as",englishName:"Assamese",nativeName:"অসমীয়া",language:"as",numberFormat:{groupSizes:[3,2],percent:{pattern:["-n%","n%"],groupSizes:[3,2]},currency:{pattern:["$ -n","n$"],groupSizes:[3,2],symbol:"ট"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["সোমবাৰ","মঙ্গলবাৰ","বুধবাৰ","বৃহস্পতিবাৰ","শুক্রবাৰ","শনিবাৰ","ৰবিবাৰ"],namesAbbr:["সোম.","মঙ্গল.","বুধ.","বৃহ.","শুক্র.","শনি.","ৰবি."],namesShort:["সো","ম","বু","বৃ","শু","শ","র"]},months:{names:["জানুৱাৰী","ফেব্রুৱাৰী","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগষ্ট","চেপ্টেম্বর","অক্টোবর","নবেম্বর","ডিচেম্বর",""],namesAbbr:["জানু","ফেব্রু","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগষ্ট","চেপ্টে","অক্টো","নবে","ডিচে",""]},AM:["ৰাতিপু","ৰাতিপু","ৰাতিপু"],PM:["আবেলি","আবেলি","আবেলি"],eras:[{name:"খ্রীষ্টাব্দ",start:null,offset:0}],patterns:{d:"dd-MM-yyyy",D:"yyyy,MMMM dd, dddd",t:"tt h:mm",T:"tt h:mm:ss",f:"yyyy,MMMM dd, dddd tt h:mm",F:"yyyy,MMMM dd, dddd tt h:mm:ss",M:"dd MMMM",Y:"MMMM,yy"}}}}),t.addCultureInfo("mr","default",{name:"mr",englishName:"Marathi",nativeName:"मराठी",language:"mr",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["रविवार","सोमवार","मंगळवार","बुधवार","गुरुवार","शुक्रवार","शनिवार"],namesAbbr:["रवि.","सोम.","मंगळ.","बुध.","गुरु.","शुक्र.","शनि."],namesShort:["र","स","म","ब","ग","श","श"]},months:{names:["जानेवारी","फेब्रुवारी","मार्च","एप्रिल","मे","जून","जुलै","ऑगस्ट","सप्टेंबर","ऑक्टोबर","नोव्हेंबर","डिसेंबर",""],namesAbbr:["जाने.","फेब्रु.","मार्च","एप्रिल","मे","जून","जुलै","ऑगस्ट","सप्टें.","ऑक्टो.","नोव्हें.","डिसें.",""]},AM:["म.पू.","म.पू.","म.पू."],PM:["म.नं.","म.नं.","म.नं."],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("sa","default",{name:"sa",englishName:"Sanskrit",nativeName:"संस्कृत",language:"sa",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",days:{names:["रविवासरः","सोमवासरः","मङ्गलवासरः","बुधवासरः","गुरुवासरः","शुक्रवासरः","शनिवासरः"],namesAbbr:["रविवासरः","सोमवासरः","मङ्गलवासरः","बुधवासरः","गुरुवासरः","शुक्रवासरः","शनिवासरः"],namesShort:["र","स","म","ब","ग","श","श"]},months:{names:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""],namesAbbr:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""]},AM:["पूर्वाह्न","पूर्वाह्न","पूर्वाह्न"],PM:["अपराह्न","अपराह्न","अपराह्न"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy dddd",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy dddd HH:mm",F:"dd MMMM yyyy dddd HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("mn","default",{name:"mn",englishName:"Mongolian",nativeName:"Монгол хэл",language:"mn",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"₮"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Ням","Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба"],namesAbbr:["Ня","Да","Мя","Лх","Пү","Ба","Бя"],namesShort:["Ня","Да","Мя","Лх","Пү","Ба","Бя"]},months:{names:["1 дүгээр сар","2 дугаар сар","3 дугаар сар","4 дүгээр сар","5 дугаар сар","6 дугаар сар","7 дугаар сар","8 дугаар сар","9 дүгээр сар","10 дугаар сар","11 дүгээр сар","12 дугаар сар",""],namesAbbr:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""]},monthsGenitive:{names:["1 дүгээр сарын","2 дугаар сарын","3 дугаар сарын","4 дүгээр сарын","5 дугаар сарын","6 дугаар сарын","7 дугаар сарын","8 дугаар сарын","9 дүгээр сарын","10 дугаар сарын","11 дүгээр сарын","12 дугаар сарын",""],namesAbbr:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""]},AM:null,PM:null,patterns:{d:"yy.MM.dd",D:"yyyy 'оны' MMMM d",t:"H:mm",T:"H:mm:ss",f:"yyyy 'оны' MMMM d H:mm",F:"yyyy 'оны' MMMM d H:mm:ss",M:"d MMMM",Y:"yyyy 'он' MMMM"}}}}),t.addCultureInfo("bo","default",{name:"bo",englishName:"Tibetan",nativeName:"བོད་ཡིག",language:"bo",numberFormat:{groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{pattern:["$-n","$n"],groupSizes:[3,0],symbol:"¥"}},calendars:{standard:{firstDay:1,days:{names:["གཟའ་ཉི་མ།","གཟའ་ཟླ་བ།","གཟའ་མིག་དམར།","གཟའ་ལྷག་པ།","གཟའ་ཕུར་བུ།","གཟའ་པ་སངས།","གཟའ་སྤེན་པ།"],namesAbbr:["ཉི་མ།","ཟླ་བ།","མིག་དམར།","ལྷག་པ།","ཕུར་བུ།","པ་སངས།","སྤེན་པ།"],namesShort:["༧","༡","༢","༣","༤","༥","༦"]},months:{names:["སྤྱི་ཟླ་དང་པོ།","སྤྱི་ཟླ་གཉིས་པ།","སྤྱི་ཟླ་གསུམ་པ།","སྤྱི་ཟླ་བཞི་པ།","སྤྱི་ཟླ་ལྔ་པ།","སྤྱི་ཟླ་དྲུག་པ།","སྤྱི་ཟླ་བདུན་པ།","སྤྱི་ཟླ་བརྒྱད་པ།","སྤྱི་ཟླ་དགུ་པ།","སྤྱི་ཟླ་བཅུ་པོ།","སྤྱི་ཟླ་བཅུ་གཅིག་པ།","སྤྱི་ཟླ་བཅུ་གཉིས་པ།",""],namesAbbr:["ཟླ་ ༡","ཟླ་ ༢","ཟླ་ ༣","ཟླ་ ༤","ཟླ་ ༥","ཟླ་ ༦","ཟླ་ ༧","ཟླ་ ༨","ཟླ་ ༩","ཟླ་ ༡༠","ཟླ་ ༡༡","ཟླ་ ༡༢",""]},AM:["སྔ་དྲོ","སྔ་དྲོ","སྔ་དྲོ"],PM:["ཕྱི་དྲོ","ཕྱི་དྲོ","ཕྱི་དྲོ"],eras:[{name:"སྤྱི་ལོ",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'ལོའི་ཟླ' M'ཚེས' d",t:"HH:mm",T:"HH:mm:ss",f:"yyyy'ལོའི་ཟླ' M'ཚེས' d HH:mm",F:"yyyy'ལོའི་ཟླ' M'ཚེས' d HH:mm:ss",M:"'ཟླ་' M'ཚེས'd",Y:"yyyy.M"}}}}),t.addCultureInfo("cy","default",{name:"cy",englishName:"Welsh",nativeName:"Cymraeg",language:"cy",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,days:{names:["Dydd Sul","Dydd Llun","Dydd Mawrth","Dydd Mercher","Dydd Iau","Dydd Gwener","Dydd Sadwrn"],namesAbbr:["Sul","Llun","Maw","Mer","Iau","Gwe","Sad"],namesShort:["Su","Ll","Ma","Me","Ia","Gw","Sa"]},months:{names:["Ionawr","Chwefror","Mawrth","Ebrill","Mai","Mehefin","Gorffennaf","Awst","Medi","Hydref","Tachwedd","Rhagfyr",""],namesAbbr:["Ion","Chwe","Maw","Ebr","Mai","Meh","Gor","Aws","Med","Hyd","Tach","Rhag",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("km","default",{name:"km",englishName:"Khmer",nativeName:"ខ្មែរ",language:"km",numberFormat:{pattern:["- n"],groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{pattern:["-n$","n$"],symbol:"៛"}},calendars:{standard:{"/":"-",days:{names:["ថ្ងៃអាទិត្យ","ថ្ងៃច័ន្ទ","ថ្ងៃអង្គារ","ថ្ងៃពុធ","ថ្ងៃព្រហស្បតិ៍","ថ្ងៃសុក្រ","ថ្ងៃសៅរ៍"],namesAbbr:["អាទិ.","ច.","អ.","ពុ","ព្រហ.","សុ.","ស."],namesShort:["អា","ច","អ","ពុ","ព្","សុ","ស"]},months:{names:["មករា","កុម្ភៈ","មិនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ",""],namesAbbr:["១","២","៣","៤","៥","៦","៧","៨","៩","១០","១១","១២",""]},AM:["ព្រឹក","ព្រឹក","ព្រឹក"],PM:["ល្ងាច","ល្ងាច","ល្ងាច"],eras:[{name:"មុនគ.ស.",start:null,offset:0}],patterns:{d:"yyyy-MM-dd",D:"d MMMM yyyy",t:"H:mm tt",T:"HH:mm:ss",f:"d MMMM yyyy H:mm tt",F:"d MMMM yyyy HH:mm:ss",M:"'ថ្ងៃទី' dd 'ខែ' MM",Y:"'ខែ' MM 'ឆ្នាំ' yyyy"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ព្រឹក","ព្រឹក","ព្រឹក"],PM:["ល្ងាច","ល្ងាច","ល្ងាច"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm tt",T:"HH:mm:ss",f:"dddd, MMMM dd, yyyy H:mm tt",F:"dddd, MMMM dd, yyyy HH:mm:ss"}}}}),t.addCultureInfo("lo","default",{name:"lo",englishName:"Lao",nativeName:"ລາວ",language:"lo",numberFormat:{pattern:["(n)"],groupSizes:[3,0],percent:{groupSizes:[3,0]},currency:{pattern:["(n$)","n$"],groupSizes:[3,0],symbol:"₭"}},calendars:{standard:{days:{names:["ວັນອາທິດ","ວັນຈັນ","ວັນອັງຄານ","ວັນພຸດ","ວັນພະຫັດ","ວັນສຸກ","ວັນເສົາ"],namesAbbr:["ອາທິດ","ຈັນ","ອັງຄານ","ພຸດ","ພະຫັດ","ສຸກ","ເສົາ"],namesShort:["ອ","ຈ","ອ","ພ","ພ","ສ","ເ"]},months:{names:["ມັງກອນ","ກຸມພາ","ມີນາ","ເມສາ","ພຶດສະພາ","ມິຖຸນາ","ກໍລະກົດ","ສິງຫາ","ກັນຍາ","ຕຸລາ","ພະຈິກ","ທັນວາ",""],namesAbbr:["ມັງກອນ","ກຸມພາ","ມີນາ","ເມສາ","ພຶດສະພາ","ມິຖຸນາ","ກໍລະກົດ","ສິງຫາ","ກັນຍາ","ຕຸລາ","ພະຈິກ","ທັນວາ",""]},AM:["ເຊົ້າ","ເຊົ້າ","ເຊົ້າ"],PM:["ແລງ","ແລງ","ແລງ"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"H:mm tt",T:"HH:mm:ss",f:"dd MMMM yyyy H:mm tt",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("gl","default",{name:"gl",englishName:"Galician",nativeName:"galego",language:"gl",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domingo","luns","martes","mércores","xoves","venres","sábado"],namesAbbr:["dom","luns","mar","mér","xov","ven","sáb"],namesShort:["do","lu","ma","mé","xo","ve","sá"]},months:{names:["xaneiro","febreiro","marzo","abril","maio","xuño","xullo","agosto","setembro","outubro","novembro","decembro",""],namesAbbr:["xan","feb","mar","abr","maio","xuñ","xull","ago","set","out","nov","dec",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("kok","default",{name:"kok",englishName:"Konkani",nativeName:"कोंकणी",language:"kok",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["आयतार","सोमार","मंगळार","बुधवार","बिरेस्तार","सुक्रार","शेनवार"],namesAbbr:["आय.","सोम.","मंगळ.","बुध.","बिरे.","सुक्र.","शेन."],namesShort:["आ","स","म","ब","ब","स","श"]},months:{names:["जानेवारी","फेब्रुवारी","मार्च","एप्रिल","मे","जून","जुलै","ऑगस्ट","सप्टेंबर","ऑक्टोबर","नोवेम्बर","डिसेंबर",""],namesAbbr:["जानेवारी","फेब्रुवारी","मार्च","एप्रिल","मे","जून","जुलै","ऑगस्ट","सप्टेंबर","ऑक्टोबर","नोवेम्बर","डिसेंबर",""]},AM:["म.पू.","म.पू.","म.पू."],PM:["म.नं.","म.नं.","म.नं."],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("syr","default",{name:"syr",englishName:"Syriac",nativeName:"ܣܘܪܝܝܐ",language:"syr",isRTL:!0,numberFormat:{currency:{pattern:["$n-","$ n"],symbol:"ل.س.‏"}},calendars:{standard:{firstDay:6,days:{names:["ܚܕ ܒܫܒܐ","ܬܪܝܢ ܒܫܒܐ","ܬܠܬܐ ܒܫܒܐ","ܐܪܒܥܐ ܒܫܒܐ","ܚܡܫܐ ܒܫܒܐ","ܥܪܘܒܬܐ","ܫܒܬܐ"],namesAbbr:["܏ܐ ܏ܒܫ","܏ܒ ܏ܒܫ","܏ܓ ܏ܒܫ","܏ܕ ܏ܒܫ","܏ܗ ܏ܒܫ","܏ܥܪܘܒ","܏ܫܒ"],namesShort:["ܐ","ܒ","ܓ","ܕ","ܗ","ܥ","ܫ"]},months:{names:["ܟܢܘܢ ܐܚܪܝ","ܫܒܛ","ܐܕܪ","ܢܝܣܢ","ܐܝܪ","ܚܙܝܪܢ","ܬܡܘܙ","ܐܒ","ܐܝܠܘܠ","ܬܫܪܝ ܩܕܝܡ","ܬܫܪܝ ܐܚܪܝ","ܟܢܘܢ ܩܕܝܡ",""],namesAbbr:["܏ܟܢ ܏ܒ","ܫܒܛ","ܐܕܪ","ܢܝܣܢ","ܐܝܪ","ܚܙܝܪܢ","ܬܡܘܙ","ܐܒ","ܐܝܠܘܠ","܏ܬܫ ܏ܐ","܏ܬܫ ܏ܒ","܏ܟܢ ܏ܐ",""]},AM:["ܩ.ܛ","ܩ.ܛ","ܩ.ܛ"],PM:["ܒ.ܛ","ܒ.ܛ","ܒ.ܛ"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}}}}),t.addCultureInfo("si","default",{name:"si",englishName:"Sinhala",nativeName:"සිංහල",language:"si",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["($ n)","$ n"],symbol:"රු."}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ඉරිදා","සඳුදා","අඟහරුවාදා","බදාදා","බ්‍රහස්පතින්දා","සිකුරාදා","සෙනසුරාදා"],namesAbbr:["ඉරිදා","සඳුදා","කුජදා","බුදදා","ගුරුදා","කිවිදා","ශනිදා"],namesShort:["ඉ","ස","අ","බ","බ්‍ර","සි","සෙ"]},months:{names:["ජනවාරි","පෙබරවාරි","මාර්තු","අ‌ප්‍රේල්","මැයි","ජූනි","ජූලි","අ‌ගෝස්තු","සැප්තැම්බර්","ඔක්තෝබර්","නොවැම්බර්","දෙසැම්බර්",""],namesAbbr:["ජන.","පෙබ.","මාර්තු.","අප්‍රේල්.","මැයි.","ජූනි.","ජූලි.","අගෝ.","සැප්.","ඔක්.","නොවැ.","දෙසැ.",""]},AM:["පෙ.ව.","පෙ.ව.","පෙ.ව."],PM:["ප.ව.","ප.ව.","ප.ව."],eras:[{name:"ක්‍රි.ව.",start:null,offset:0}],patterns:{d:"yyyy-MM-dd",D:"yyyy MMMM' මස 'dd' වැනිදා 'dddd",f:"yyyy MMMM' මස 'dd' වැනිදා 'dddd h:mm tt",F:"yyyy MMMM' මස 'dd' වැනිදා 'dddd h:mm:ss tt",Y:"yyyy MMMM"}}}}),t.addCultureInfo("iu","default",{name:"iu",englishName:"Inuktitut",nativeName:"Inuktitut",language:"iu",numberFormat:{groupSizes:[3,0],percent:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["Naattiinguja","Naggajjau","Aippiq","Pingatsiq","Sitammiq","Tallirmiq","Sivataarvik"],namesAbbr:["Nat","Nag","Aip","Pi","Sit","Tal","Siv"],namesShort:["N","N","A","P","S","T","S"]},months:{names:["Jaannuari","Viivvuari","Maatsi","Iipuri","Mai","Juuni","Julai","Aaggiisi","Sitipiri","Utupiri","Nuvipiri","Tisipiri",""],namesAbbr:["Jan","Viv","Mas","Ipu","Mai","Jun","Jul","Agi","Sii","Uut","Nuv","Tis",""]},patterns:{d:"d/MM/yyyy",D:"ddd, MMMM dd,yyyy",f:"ddd, MMMM dd,yyyy h:mm tt",F:"ddd, MMMM dd,yyyy h:mm:ss tt"}}}}),t.addCultureInfo("am","default",{name:"am",englishName:"Amharic",nativeName:"አማርኛ",language:"am",numberFormat:{decimals:1,groupSizes:[3,0],percent:{pattern:["-n%","n%"],decimals:1,groupSizes:[3,0]},currency:{pattern:["-$n","$n"],groupSizes:[3,0],symbol:"ETB"}},calendars:{standard:{days:{names:["እሑድ","ሰኞ","ማክሰኞ","ረቡዕ","ሐሙስ","ዓርብ","ቅዳሜ"],namesAbbr:["እሑድ","ሰኞ","ማክሰ","ረቡዕ","ሐሙስ","ዓርብ","ቅዳሜ"],namesShort:["እ","ሰ","ማ","ረ","ሐ","ዓ","ቅ"]},months:{names:["ጃንዩወሪ","ፌብሩወሪ","ማርች","ኤፕረል","ሜይ","ጁን","ጁላይ","ኦገስት","ሴፕቴምበር","ኦክተውበር","ኖቬምበር","ዲሴምበር",""],namesAbbr:["ጃንዩ","ፌብሩ","ማርች","ኤፕረ","ሜይ","ጁን","ጁላይ","ኦገስ","ሴፕቴ","ኦክተ","ኖቬም","ዲሴም",""]},AM:["ጡዋት","ጡዋት","ጡዋት"],PM:["ከሰዓት","ከሰዓት","ከሰዓት"],eras:[{name:"ዓመተ  ምሕረት",start:null,offset:0}],patterns:{d:"d/M/yyyy",D:"dddd '፣' MMMM d 'ቀን' yyyy",f:"dddd '፣' MMMM d 'ቀን' yyyy h:mm tt",F:"dddd '፣' MMMM d 'ቀን' yyyy h:mm:ss tt",M:"MMMM d ቀን",Y:"MMMM yyyy"}}}}),t.addCultureInfo("tzm","default",{name:"tzm",englishName:"Tamazight",nativeName:"Tamazight",language:"tzm",numberFormat:{pattern:["n-"],",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],symbol:"DZD"}},calendars:{standard:{"/":"-",firstDay:6,days:{names:["Acer","Arime","Aram","Ahad","Amhadh","Sem","Sedh"],namesAbbr:["Ace","Ari","Ara","Aha","Amh","Sem","Sed"],namesShort:["Ac","Ar","Ar","Ah","Am","Se","Se"]},months:{names:["Yenayer","Furar","Maghres","Yebrir","Mayu","Yunyu","Yulyu","Ghuct","Cutenber","Ktuber","Wambir","Dujanbir",""],namesAbbr:["Yen","Fur","Mag","Yeb","May","Yun","Yul","Ghu","Cut","Ktu","Wam","Duj",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"dd MMMM, yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM, yyyy H:mm",F:"dd MMMM, yyyy H:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("ne","default",{name:"ne",englishName:"Nepali",nativeName:"नेपाली",language:"ne",numberFormat:{groupSizes:[3,2],percent:{pattern:["-n%","n%"],groupSizes:[3,2]},currency:{pattern:["-$n","$n"],symbol:"रु"}},calendars:{standard:{days:{names:["आइतवार","सोमवार","मङ्गलवार","बुधवार","बिहीवार","शुक्रवार","शनिवार"],namesAbbr:["आइत","सोम","मङ्गल","बुध","बिही","शुक्र","शनि"],namesShort:["आ","सो","म","बु","बि","शु","श"]},months:{names:["जनवरी","फेब्रुअरी","मार्च","अप्रिल","मे","जून","जुलाई","अगस्त","सेप्टेम्बर","अक्टोबर","नोभेम्बर","डिसेम्बर",""],namesAbbr:["जन","फेब","मार्च","अप्रिल","मे","जून","जुलाई","अग","सेप्ट","अक्ट","नोभ","डिस",""]},AM:["विहानी","विहानी","विहानी"],PM:["बेलुकी","बेलुकी","बेलुकी"],eras:[{name:"a.d.",start:null,offset:0}],patterns:{Y:"MMMM,yyyy"}}}}),t.addCultureInfo("fy","default",{name:"fy",englishName:"Frisian",nativeName:"Frysk",language:"fy",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["Snein","Moandei","Tiisdei","Woansdei","Tongersdei","Freed","Sneon"],namesAbbr:["Sn","Mo","Ti","Wo","To","Fr","Sn"],namesShort:["S","M","T","W","T","F","S"]},months:{names:["jannewaris","febrewaris","maart","april","maaie","juny","july","augustus","septimber","oktober","novimber","desimber",""],namesAbbr:["jann","febr","mrt","apr","maaie","jun","jul","aug","sept","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"d-M-yyyy",D:"dddd d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd d MMMM yyyy H:mm",F:"dddd d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ps","default",{name:"ps",englishName:"Pashto",nativeName:"پښتو",language:"ps",isRTL:!0,numberFormat:{pattern:["n-"],",":"،",".":",",percent:{pattern:["%n-","%n"],",":"،",".":","},currency:{pattern:["$n-","$n"],",":"٬",".":"٫",symbol:"؋"}},calendars:{standard:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["غ.م","غ.م","غ.م"],PM:["غ.و","غ.و","غ.و"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",f:"dd/MM/yyyy h:mm tt",F:"dd/MM/yyyy h:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_Localized:{firstDay:6,days:{names:["یکشنبه","دوشنبه","سه‌شنبه","چارشنبه","پنجشنبه","جمعه","شنبه"],namesAbbr:["یکشنبه","دوشنبه","سه‌شنبه","چارشنبه","پنجشنبه","جمعه","شنبه"],namesShort:["ی","د","س","چ","پ","ج","ش"]},months:{names:["سلواغه","كب","ورى","غويى","غبرګولى","چنګا ښزمرى","زمرى","وږى","تله","لړم","لنڈ ۍ","مرغومى",""],namesAbbr:["سلواغه","كب","ورى","غويى","غبرګولى","چنګا ښ","زمرى","وږى","تله","لړم","لنڈ ۍ","مرغومى",""]},AM:["غ.م","غ.م","غ.م"],PM:["غ.و","غ.و","غ.و"],eras:[{name:"ل.ه",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy, dd, MMMM, dddd",f:"yyyy, dd, MMMM, dddd h:mm tt",F:"yyyy, dd, MMMM, dddd h:mm:ss tt",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("fil","default",{name:"fil",englishName:"Filipino",nativeName:"Filipino",language:"fil",numberFormat:{currency:{symbol:"PhP"}},calendars:{standard:{days:{names:["Linggo","Lunes","Martes","Mierkoles","Huebes","Biernes","Sabado"],namesAbbr:["Lin","Lun","Mar","Mier","Hueb","Bier","Saba"],namesShort:["L","L","M","M","H","B","S"]},months:{names:["Enero","Pebrero","Marso","Abril","Mayo","Hunyo","Hulyo","Agosto","Septyembre","Oktubre","Nobyembre","Disyembre",""],namesAbbr:["En","Peb","Mar","Abr","Mayo","Hun","Hul","Agos","Sept","Okt","Nob","Dis",""]},eras:[{name:"Anno Domini",start:null,offset:0}]}}}),t.addCultureInfo("dv","default",{name:"dv",englishName:"Divehi",nativeName:"ދިވެހިބަސް",language:"dv",isRTL:!0,numberFormat:{currency:{pattern:["n $-","n $"],symbol:"ރ."}},calendars:{standard:{name:"Hijri",days:{names:["އާދީއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"],namesAbbr:["އާދީއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"],namesShort:["އާ","ހޯ","އަ","ބު","ބު","ހު","ހޮ"]},months:{names:["މުޙައްރަމް","ޞަފަރު","ރަބީޢުލްއައްވަލް","ރަބީޢުލްއާޚިރު","ޖުމާދަލްއޫލާ","ޖުމާދަލްއާޚިރާ","ރަޖަބް","ޝަޢްބާން","ރަމަޟާން","ޝައްވާލް","ޛުލްޤަޢިދާ","ޛުލްޙިއްޖާ",""],namesAbbr:["މުޙައްރަމް","ޞަފަރު","ރަބީޢުލްއައްވަލް","ރަބީޢުލްއާޚިރު","ޖުމާދަލްއޫލާ","ޖުމާދަލްއާޚިރާ","ރަޖަބް","ޝަޢްބާން","ރަމަޟާން","ޝައްވާލް","ޛުލްޤަޢިދާ","ޛުލްޙިއްޖާ",""]},AM:["މކ","މކ","މކ"],PM:["މފ","މފ","މފ"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd/MM/yyyy HH:mm",F:"dd/MM/yyyy HH:mm:ss",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_Localized:{days:{names:["އާދީއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"],namesAbbr:["އާދީއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"],namesShort:["އާ","ހޯ","އަ","ބު","ބު","ހު","ހޮ"]},months:{names:["ޖަނަވަރީ","ފެބްރުއަރީ","މާޗް","އޭޕްރިލް","މެއި","ޖޫން","ޖުލައި","އޯގަސްޓް","ސެޕްޓެމްބަރ","އޮކްޓޯބަރ","ނޮވެމްބަރ","ޑިސެމްބަރ",""],namesAbbr:["ޖަނަވަރީ","ފެބްރުއަރީ","މާޗް","އޭޕްރިލް","މެއި","ޖޫން","ޖުލައި","އޯގަސްޓް","ސެޕްޓެމްބަރ","އޮކްޓޯބަރ","ނޮވެމްބަރ","ޑިސެމްބަރ",""]},AM:["މކ","މކ","މކ"],PM:["މފ","މފ","މފ"],eras:[{name:"މީލާދީ",start:null,offset:0}],patterns:{d:"dd/MM/yy",D:"ddd, yyyy MMMM dd",t:"HH:mm",T:"HH:mm:ss",f:"ddd, yyyy MMMM dd HH:mm",F:"ddd, yyyy MMMM dd HH:mm:ss",Y:"yyyy, MMMM"}}}}),t.addCultureInfo("ha","default",{name:"ha",englishName:"Hausa",nativeName:"Hausa",language:"ha",numberFormat:{currency:{pattern:["$-n","$ n"],symbol:"N"}},calendars:{standard:{days:{names:["Lahadi","Litinin","Talata","Laraba","Alhamis","Juma'a","Asabar"],namesAbbr:["Lah","Lit","Tal","Lar","Alh","Jum","Asa"],namesShort:["L","L","T","L","A","J","A"]},months:{names:["Januwaru","Febreru","Maris","Afrilu","Mayu","Yuni","Yuli","Agusta","Satumba","Oktocba","Nuwamba","Disamba",""],namesAbbr:["Jan","Feb","Mar","Afr","May","Yun","Yul","Agu","Sat","Okt","Nuw","Dis",""]},AM:["Safe","safe","SAFE"],PM:["Yamma","yamma","YAMMA"],eras:[{name:"AD",start:null,offset:0}],patterns:{d:"d/M/yyyy"}}}}),t.addCultureInfo("yo","default",{name:"yo",englishName:"Yoruba",nativeName:"Yoruba",language:"yo",numberFormat:{currency:{pattern:["$-n","$ n"],symbol:"N"}},calendars:{standard:{days:{names:["Aiku","Aje","Isegun","Ojo'ru","Ojo'bo","Eti","Abameta"],namesAbbr:["Aik","Aje","Ise","Ojo","Ojo","Eti","Aba"],namesShort:["A","A","I","O","O","E","A"]},months:{names:["Osu kinni","Osu keji","Osu keta","Osu kerin","Osu karun","Osu kefa","Osu keje","Osu kejo","Osu kesan","Osu kewa","Osu kokanla","Osu keresi",""],namesAbbr:["kin.","kej.","ket.","ker.","kar.","kef.","kej.","kej.","kes.","kew.","kok.","ker.",""]},AM:["Owuro","owuro","OWURO"],PM:["Ale","ale","ALE"],eras:[{name:"AD",start:null,offset:0}],patterns:{d:"d/M/yyyy"}}}}),t.addCultureInfo("quz","default",{name:"quz",englishName:"Quechua",nativeName:"runasimi",language:"quz",numberFormat:{",":".",".":",",percent:{pattern:["-%n","%n"],",":".",".":","},currency:{pattern:["($ n)","$ n"],",":".",".":",",symbol:"$b"}},calendars:{standard:{days:{names:["intichaw","killachaw","atipachaw","quyllurchaw","Ch' askachaw","Illapachaw","k'uychichaw"],namesAbbr:["int","kil","ati","quy","Ch'","Ill","k'u"],namesShort:["d","k","a","m","h","b","k"]},months:{names:["Qulla puquy","Hatun puquy","Pauqar waray","ayriwa","Aymuray","Inti raymi","Anta Sitwa","Qhapaq Sitwa","Uma raymi","Kantaray","Ayamarq'a","Kapaq Raymi",""],namesAbbr:["Qul","Hat","Pau","ayr","Aym","Int","Ant","Qha","Uma","Kan","Aya","Kap",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("nso","default",{name:"nso",englishName:"Sesotho sa Leboa",nativeName:"Sesotho sa Leboa",language:"nso",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["Lamorena","Mošupologo","Labobedi","Laboraro","Labone","Labohlano","Mokibelo"],namesAbbr:["Lam","Moš","Lbb","Lbr","Lbn","Lbh","Mok"],namesShort:["L","M","L","L","L","L","M"]},months:{names:["Pherekgong","Hlakola","Mopitlo","Moranang","Mosegamanye","Ngoatobošego","Phuphu","Phato","Lewedi","Diphalana","Dibatsela","Manthole",""],namesAbbr:["Pher","Hlak","Mop","Mor","Mos","Ngwat","Phup","Phat","Lew","Dip","Dib","Man",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ba","default",{name:"ba",englishName:"Bashkir",nativeName:"Башҡорт",language:"ba",numberFormat:{",":" ",".":",",groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0],",":" ",".":","},currency:{pattern:["-n $","n $"],groupSizes:[3,0],",":" ",".":",",symbol:"һ."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Йәкшәмбе","Дүшәмбе","Шишәмбе","Шаршамбы","Кесаҙна","Йома","Шәмбе"],namesAbbr:["Йш","Дш","Шш","Шр","Кс","Йм","Шб"],namesShort:["Йш","Дш","Шш","Шр","Кс","Йм","Шб"]},months:{names:["ғинуар","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь",""],namesAbbr:["ғин","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"d MMMM yyyy 'й'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy 'й' H:mm",F:"d MMMM yyyy 'й' H:mm:ss",Y:"MMMM yyyy"}}}}),t.addCultureInfo("lb","default",{name:"lb",englishName:"Luxembourgish",nativeName:"Lëtzebuergesch",language:"lb",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Sonndeg","Méindeg","Dënschdeg","Mëttwoch","Donneschdeg","Freideg","Samschdeg"],namesAbbr:["Son","Méi","Dën","Mët","Don","Fre","Sam"],namesShort:["So","Mé","Dë","Më","Do","Fr","Sa"]},months:{names:["Januar","Februar","Mäerz","Abrëll","Mee","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mäe","Abr","Mee","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("kl","default",{name:"kl",englishName:"Greenlandic",nativeName:"kalaallisut",language:"kl",numberFormat:{",":".",".":",",groupSizes:[3,0],percent:{groupSizes:[3,0],",":".",".":","},currency:{pattern:["$ -n","$ n"],groupSizes:[3,0],",":".",".":",",symbol:"kr."}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["sapaat","ataasinngorneq","marlunngorneq","pingasunngorneq","sisamanngorneq","tallimanngorneq","arfininngorneq"],namesAbbr:["sap","ata","mar","ping","sis","tal","arf"],namesShort:["sa","at","ma","pi","si","ta","ar"]},months:{names:["januari","februari","martsi","apriili","maaji","juni","juli","aggusti","septembari","oktobari","novembari","decembari",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ig","default",{name:"ig",englishName:"Igbo",nativeName:"Igbo",language:"ig",numberFormat:{currency:{pattern:["$-n","$ n"],symbol:"N"}},calendars:{standard:{days:{names:["Aiku","Aje","Isegun","Ojo'ru","Ojo'bo","Eti","Abameta"],namesAbbr:["Aik","Aje","Ise","Ojo","Ojo","Eti","Aba"],namesShort:["A","A","I","O","O","E","A"]},months:{names:["Onwa mbu","Onwa ibua","Onwa ato","Onwa ano","Onwa ise","Onwa isi","Onwa asa","Onwa asato","Onwa itolu","Onwa iri","Onwa iri n'ofu","Onwa iri n'ibua",""],namesAbbr:["mbu.","ibu.","ato.","ano.","ise","isi","asa","asa.","ito.","iri.","n'of.","n'ib.",""]},AM:["Ututu","ututu","UTUTU"],PM:["Efifie","efifie","EFIFIE"],eras:[{name:"AD",start:null,offset:0}],patterns:{d:"d/M/yyyy"}}}}),t.addCultureInfo("ii","default",{name:"ii",englishName:"Yi",nativeName:"ꆈꌠꁱꂷ",language:"ii",numberFormat:{groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{pattern:["$-n","$n"],symbol:"¥"}},calendars:{standard:{firstDay:1,days:{names:["ꑭꆏꑍ","ꆏꊂ꒔","ꆏꊂꑍ","ꆏꊂꌕ","ꆏꊂꇖ","ꆏꊂꉬ","ꆏꊂꃘ"],namesAbbr:["ꑭꆏ","ꆏ꒔","ꆏꑍ","ꆏꌕ","ꆏꇖ","ꆏꉬ","ꆏꃘ"],namesShort:["ꆏ","꒔","ꑍ","ꌕ","ꇖ","ꉬ","ꃘ"]},months:{names:["ꋍꆪ","ꑍꆪ","ꌕꆪ","ꇖꆪ","ꉬꆪ","ꃘꆪ","ꏃꆪ","ꉆꆪ","ꈬꆪ","ꊰꆪ","ꊯꊪꆪ","ꊰꑋꆪ",""],namesAbbr:["ꋍꆪ","ꑍꆪ","ꌕꆪ","ꇖꆪ","ꉬꆪ","ꃘꆪ","ꏃꆪ","ꉆꆪ","ꈬꆪ","ꊰꆪ","ꊯꊪꆪ","ꊰꑋꆪ",""]},AM:["ꂵꆪꈌꈐ","ꂵꆪꈌꈐ","ꂵꆪꈌꈐ"],PM:["ꂵꆪꈌꉈ","ꂵꆪꈌꉈ","ꂵꆪꈌꉈ"],eras:[{name:"ꇬꑼ",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'ꈎ' M'ꆪ' d'ꑍ'",t:"tt h:mm",T:"H:mm:ss",f:"yyyy'ꈎ' M'ꆪ' d'ꑍ' tt h:mm",F:"yyyy'ꈎ' M'ꆪ' d'ꑍ' H:mm:ss",M:"M'ꆪ' d'ꑍ'",Y:"yyyy'ꈎ' M'ꆪ'"}}}}),t.addCultureInfo("arn","default",{name:"arn",englishName:"Mapudungun",nativeName:"Mapudungun",language:"arn",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":","}},calendars:{standard:{"/":"-",days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd-MM-yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("moh","default",{name:"moh",englishName:"Mohawk",nativeName:"Kanien'kéha",language:"moh",numberFormat:{groupSizes:[3,0],percent:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["Awentatokentì:ke","Awentataón'ke","Ratironhia'kehronòn:ke","Soséhne","Okaristiiáhne","Ronwaia'tanentaktonhne","Entákta"],namesShort:["S","M","T","W","T","F","S"]},months:{names:["Tsothohrkó:Wa","Enniska","Enniskó:Wa","Onerahtókha","Onerahtohkó:Wa","Ohiari:Ha","Ohiarihkó:Wa","Seskéha","Seskehkó:Wa","Kenténha","Kentenhkó:Wa","Tsothóhrha",""]}}}}),t.addCultureInfo("br","default",{name:"br",englishName:"Breton",nativeName:"brezhoneg",language:"br",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Sul","Lun","Meurzh","Merc'her","Yaou","Gwener","Sadorn"],namesAbbr:["Sul","Lun","Meu.","Mer.","Yaou","Gwe.","Sad."],namesShort:["Su","Lu","Mz","Mc","Ya","Gw","Sa"]},months:{names:["Genver","C'hwevrer","Meurzh","Ebrel","Mae","Mezheven","Gouere","Eost","Gwengolo","Here","Du","Kerzu",""],namesAbbr:["Gen.","C'hwe.","Meur.","Ebr.","Mae","Mezh.","Goue.","Eost","Gwen.","Here","Du","Kzu",""]},AM:null,PM:null,eras:[{name:"g. J.-K.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ug","default",{name:"ug",englishName:"Uyghur",nativeName:"ئۇيغۇرچە",language:"ug",isRTL:!0,numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$n"],symbol:"¥"}},calendars:{standard:{"/":"-",days:{names:["يەكشەنبە","دۈشەنبە","سەيشەنبە","چارشەنبە","پەيشەنبە","جۈمە","شەنبە"],namesAbbr:["يە","دۈ","سە","چا","پە","جۈ","شە"],namesShort:["ي","د","س","چ","پ","ج","ش"]},months:{names:["1-ئاي","2-ئاي","3-ئاي","4-ئاي","5-ئاي","6-ئاي","7-ئاي","8-ئاي","9-ئاي","10-ئاي","11-ئاي","12-ئاي",""],namesAbbr:["1-ئاي","2-ئاي","3-ئاي","4-ئاي","5-ئاي","6-ئاي","7-ئاي","8-ئاي","9-ئاي","10-ئاي","11-ئاي","12-ئاي",""]},AM:["چۈشتىن بۇرۇن","چۈشتىن بۇرۇن","چۈشتىن بۇرۇن"],PM:["چۈشتىن كېيىن","چۈشتىن كېيىن","چۈشتىن كېيىن"],eras:[{name:"مىلادى",start:null,offset:0}],patterns:{d:"yyyy-M-d",D:"yyyy-'يىلى' MMMM d-'كۈنى،'",t:"H:mm",T:"H:mm:ss",f:"yyyy-'يىلى' MMMM d-'كۈنى،' H:mm",F:"yyyy-'يىلى' MMMM d-'كۈنى،' H:mm:ss",M:"MMMM d'-كۈنى'",Y:"yyyy-'يىلى' MMMM"}}}}),t.addCultureInfo("mi","default",{name:"mi",englishName:"Maori",nativeName:"Reo Māori",language:"mi",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["-$n","$n"]}},calendars:{standard:{firstDay:1,days:{names:["Rātapu","Rāhina","Rātū","Rāapa","Rāpare","Rāmere","Rāhoroi"],namesAbbr:["Ta","Hi","Tū","Apa","Pa","Me","Ho"],namesShort:["Ta","Hi","Tū","Aa","Pa","Me","Ho"]},months:{names:["Kohi-tātea","Hui-tanguru","Poutū-te-rangi","Paenga-whāwhā","Haratua","Pipiri","Hōngongoi","Here-turi-kōkā","Mahuru","Whiringa-ā-nuku","Whiringa-ā-rangi","Hakihea",""],namesAbbr:["Kohi","Hui","Pou","Pae","Hara","Pipi","Hōngo","Here","Mahu","Nuku","Rangi","Haki",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],patterns:{d:"dd/MM/yyyy",D:"dddd, dd MMMM, yyyy",f:"dddd, dd MMMM, yyyy h:mm tt",F:"dddd, dd MMMM, yyyy h:mm:ss tt",M:"dd MMMM",Y:"MMMM, yy"}}}}),t.addCultureInfo("oc","default",{name:"oc",englishName:"Occitan",nativeName:"Occitan",language:"oc",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimenge","diluns","dimars","dimècres","dijòus","divendres","dissabte"],namesAbbr:["dim.","lun.","mar.","mèc.","jòu.","ven.","sab."],namesShort:["di","lu","ma","mè","jò","ve","sa"]},months:{names:["genier","febrier","març","abril","mai","junh","julh","agost","setembre","octobre","novembre","desembre",""],namesAbbr:["gen.","feb.","mar.","abr.","mai.","jun.","jul.","ag.","set.","oct.","nov.","des.",""]},monthsGenitive:{names:["de genier","de febrier","de març","d'abril","de mai","de junh","de julh","d'agost","de setembre","d'octobre","de novembre","de desembre",""],namesAbbr:["gen.","feb.","mar.","abr.","mai.","jun.","jul.","ag.","set.","oct.","nov.","des.",""]},AM:null,PM:null,eras:[{name:"après Jèsus-Crist",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd,' lo 'd MMMM' de 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd,' lo 'd MMMM' de 'yyyy HH:mm",F:"dddd,' lo 'd MMMM' de 'yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("co","default",{name:"co",englishName:"Corsican",nativeName:"Corsu",language:"co",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dumenica","luni","marti","mercuri","ghjovi","venderi","sabbatu"],namesAbbr:["dum.","lun.","mar.","mer.","ghj.","ven.","sab."],namesShort:["du","lu","ma","me","gh","ve","sa"]},months:{names:["ghjennaghju","ferraghju","marzu","aprile","maghju","ghjunghju","lugliu","aostu","settembre","ottobre","nuvembre","dicembre",""],namesAbbr:["ghje","ferr","marz","apri","magh","ghju","lugl","aost","sett","otto","nuve","dice",""]},AM:null,PM:null,eras:[{name:"dopu J-C",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("gsw","default",{name:"gsw",englishName:"Alsatian",nativeName:"Elsässisch",language:"gsw",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Sundàà","Mondàà","Dienschdàà","Mittwuch","Dunnerschdàà","Fridàà","Sàmschdàà"],namesAbbr:["Su.","Mo.","Di.","Mi.","Du.","Fr.","Sà."],namesShort:["Su","Mo","Di","Mi","Du","Fr","Sà"]},months:{names:["Jänner","Feverje","März","Àpril","Mai","Jüni","Jüli","Augscht","September","Oktower","Nowember","Dezember",""],namesAbbr:["Jän.","Fev.","März","Apr.","Mai","Jüni","Jüli","Aug.","Sept.","Okt.","Now.","Dez.",""]},AM:null,PM:null,eras:[{name:"Vor J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sah","default",{name:"sah",englishName:"Yakut",nativeName:"саха",language:"sah",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"с."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["баскыһыанньа","бэнидиэнньик","оптуорунньук","сэрэдэ","чэппиэр","бээтинсэ","субуота"],namesAbbr:["Бс","Бн","Оп","Ср","Чп","Бт","Сб"],namesShort:["Бс","Бн","Оп","Ср","Чп","Бт","Сб"]},months:{names:["Тохсунньу","Олунньу","Кулун тутар","Муус устар","Ыам ыйа","Бэс ыйа","От ыйа","Атырдьах ыйа","Балаҕан ыйа","Алтынньы","Сэтинньи","Ахсынньы",""],namesAbbr:["тхс","олн","кул","мст","ыам","бэс","отй","атр","блҕ","алт","стн","ахс",""]},monthsGenitive:{names:["тохсунньу","олунньу","кулун тутар","муус устар","ыам ыйын","бэс ыйын","от ыйын","атырдьах ыйын","балаҕан ыйын","алтынньы","сэтинньи","ахсынньы",""],namesAbbr:["тхс","олн","кул","мст","ыам","бэс","отй","атр","блҕ","алт","стн","ахс",""]},AM:null,PM:null,patterns:{d:"MM.dd.yyyy",D:"MMMM d yyyy 'с.'",t:"H:mm",T:"H:mm:ss",f:"MMMM d yyyy 'с.' H:mm",F:"MMMM d yyyy 'с.' H:mm:ss",Y:"MMMM yyyy 'с.'"}}}}),t.addCultureInfo("qut","default",{name:"qut",englishName:"K'iche",nativeName:"K'iche",language:"qut",numberFormat:{currency:{symbol:"Q"}},calendars:{standard:{days:{names:["juq'ij","kaq'ij","oxq'ij","kajq'ij","joq'ij","waqq'ij","wuqq'ij"],namesAbbr:["juq","kaq","oxq","kajq","joq","waqq","wuqq"],namesShort:["ju","ka","ox","ka","jo","wa","wu"]},months:{names:["nab'e ik'","ukab' ik'","rox ik'","ukaj ik'","uro' ik'","uwaq ik'","uwuq ik'","uwajxaq ik'","ub'elej ik'","ulaj ik'","ujulaj ik'","ukab'laj ik'",""],namesAbbr:["nab'e","ukab","rox","ukaj","uro","uwaq","uwuq","uwajxaq","ub'elej","ulaj","ujulaj","ukab'laj",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("rw","default",{name:"rw",englishName:"Kinyarwanda",nativeName:"Kinyarwanda",language:"rw",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["$-n","$ n"],",":" ",".":",",symbol:"RWF"}},calendars:{standard:{days:{names:["Ku wa mbere","Ku wa kabiri","Ku wa gatatu","Ku wa kane","Ku wa gatanu","Ku wa gatandatu","Ku cyumweru"],namesAbbr:["mbe.","kab.","gat.","kan.","gat.","gat.","cyu."],namesShort:["mb","ka","ga","ka","ga","ga","cy"]},months:{names:["Mutarama","Gashyantare","Werurwe","Mata","Gicurasi","Kamena","Nyakanga","Kanama","Nzeli","Ukwakira","Ugushyingo","Ukuboza",""],namesAbbr:["Mut","Gas","Wer","Mat","Gic","Kam","Nya","Kan","Nze","Ukwa","Ugu","Uku",""]},AM:["saa moya z.m.","saa moya z.m.","SAA MOYA Z.M."],PM:["saa moya z.n.","saa moya z.n.","SAA MOYA Z.N."],eras:[{name:"AD",start:null,offset:0}]}}}),t.addCultureInfo("wo","default",{name:"wo",englishName:"Wolof",nativeName:"Wolof",language:"wo",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"XOF"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("prs","default",{name:"prs",englishName:"Dari",nativeName:"درى",language:"prs",isRTL:!0,numberFormat:{pattern:["n-"],",":".",".":",",percent:{pattern:["%n-","%n"],",":".",".":","},currency:{pattern:["$n-","$n"],symbol:"؋"}},calendars:{standard:{name:"Hijri",firstDay:5,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["غ.م","غ.م","غ.م"],PM:["غ.و","غ.و","غ.و"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",f:"dd/MM/yyyy h:mm tt",F:"dd/MM/yyyy h:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_Localized:{firstDay:5,days:{names:["یکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],namesAbbr:["یکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],namesShort:["ی","د","س","چ","پ","ج","ش"]},months:{names:["سلواغه","كب","ورى","غويى","غبرګولى","چنګاښ","زمرى","وږى","تله","لړم","ليندۍ","مرغومى",""],namesAbbr:["سلواغه","كب","ورى","غويى","غبرګولى","چنګاښ","زمرى","وږى","تله","لړم","ليندۍ","مرغومى",""]},AM:["غ.م","غ.م","غ.م"],PM:["غ.و","غ.و","غ.و"],eras:[{name:"ل.ه",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy, dd, MMMM, dddd",f:"yyyy, dd, MMMM, dddd h:mm tt",F:"yyyy, dd, MMMM, dddd h:mm:ss tt",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("gd","default",{name:"gd",englishName:"Scottish Gaelic",nativeName:"Gàidhlig",language:"gd",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,days:{names:["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],namesAbbr:["Dòm","Lua","Mài","Cia","Ard","Hao","Sat"],namesShort:["D","L","M","C","A","H","S"]},months:{names:["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd",""],namesAbbr:["Fao","Gea","Màr","Gib","Cèi","Ògm","Iuc","Lùn","Sul","Dàm","Sam","Dùb",""]},AM:["m","m","M"],PM:["f","f","F"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-SA","default",{name:"ar-SA",englishName:"Arabic (Saudi Arabia)",nativeName:"العربية (المملكة العربية السعودية)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"ر.س.‏"}},calendars:{standard:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_Localized:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("bg-BG","default",{name:"bg-BG",englishName:"Bulgarian (Bulgaria)",nativeName:"български (България)",language:"bg",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"лв."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["неделя","понеделник","вторник","сряда","четвъртък","петък","събота"],namesAbbr:["нед","пон","вт","ср","четв","пет","съб"],namesShort:["н","п","в","с","ч","п","с"]},months:{names:["януари","февруари","март","април","май","юни","юли","август","септември","октомври","ноември","декември",""],namesAbbr:["ян","февр","март","апр","май","юни","юли","авг","септ","окт","ноември","дек",""]},AM:null,PM:null,eras:[{name:"след новата ера",start:null,offset:0}],patterns:{d:"d.M.yyyy 'г.'",D:"dd MMMM yyyy 'г.'",t:"HH:mm 'ч.'",T:"HH:mm:ss 'ч.'",f:"dd MMMM yyyy 'г.' HH:mm 'ч.'",F:"dd MMMM yyyy 'г.' HH:mm:ss 'ч.'",M:"dd MMMM",Y:"MMMM yyyy 'г.'"}}}}),t.addCultureInfo("ca-ES","default",{name:"ca-ES",englishName:"Catalan (Catalan)",nativeName:"català (català)",language:"ca",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],namesAbbr:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],namesShort:["dg","dl","dt","dc","dj","dv","ds"]},months:{names:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre",""],namesAbbr:["gen","feb","març","abr","maig","juny","jul","ag","set","oct","nov","des",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, d' / 'MMMM' / 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' / 'MMMM' / 'yyyy HH:mm",F:"dddd, d' / 'MMMM' / 'yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM' / 'yyyy"}}}}),t.addCultureInfo("zh-TW","default",{name:"zh-TW",englishName:"Chinese (Traditional, Taiwan)",nativeName:"中文(台灣)",language:"zh-CHT",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["-$n","$n"],symbol:"NT$"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["週日","週一","週二","週三","週四","週五","週六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"西元",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",t:"tt hh:mm",T:"tt hh:mm:ss",f:"yyyy'年'M'月'd'日' tt hh:mm",F:"yyyy'年'M'月'd'日' tt hh:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}},Taiwan:{name:"Taiwan",days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["週日","週一","週二","週三","週四","週五","週六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"",start:null,offset:1911}],twoDigitYearMax:99,patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",t:"tt hh:mm",T:"tt hh:mm:ss",f:"yyyy'年'M'月'd'日' tt hh:mm",F:"yyyy'年'M'月'd'日' tt hh:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("cs-CZ","default",{name:"cs-CZ",englishName:"Czech (Czech Republic)",nativeName:"čeština (Česká republika)",language:"cs",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"Kč"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],namesAbbr:["ne","po","út","st","čt","pá","so"],namesShort:["ne","po","út","st","čt","pá","so"]},months:{names:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},monthsGenitive:{names:["ledna","února","března","dubna","května","června","července","srpna","září","října","listopadu","prosince",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["dop.","dop.","DOP."],PM:["odp.","odp.","ODP."],eras:[{name:"n. l.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("da-DK","default",{name:"da-DK",englishName:"Danish (Denmark)",nativeName:"dansk (Danmark)",language:"da",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"kr."}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],namesAbbr:["sø","ma","ti","on","to","fr","lø"],namesShort:["sø","ma","ti","on","to","fr","lø"]},months:{names:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("de-DE","default",{name:"de-DE",englishName:"German (Germany)",nativeName:"Deutsch (Deutschland)",language:"de",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],namesAbbr:["So","Mo","Di","Mi","Do","Fr","Sa"],namesShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},months:{names:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd, d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d. MMMM yyyy HH:mm",F:"dddd, d. MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("el-GR","default",{name:"el-GR",englishName:"Greek (Greece)",nativeName:"Ελληνικά (Ελλάδα)",language:"el",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],namesAbbr:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],namesShort:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σά"]},months:{names:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος",""],namesAbbr:["Ιαν","Φεβ","Μαρ","Απρ","Μαϊ","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ",""]},monthsGenitive:{names:["Ιανουαρίου","Φεβρουαρίου","Μαρτίου","Απριλίου","Μαΐου","Ιουνίου","Ιουλίου","Αυγούστου","Σεπτεμβρίου","Οκτωβρίου","Νοεμβρίου","Δεκεμβρίου",""],namesAbbr:["Ιαν","Φεβ","Μαρ","Απρ","Μαϊ","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ",""]},AM:["πμ","πμ","ΠΜ"],PM:["μμ","μμ","ΜΜ"],eras:[{name:"μ.Χ.",start:null,offset:0}],patterns:{d:"d/M/yyyy",D:"dddd, d MMMM yyyy",f:"dddd, d MMMM yyyy h:mm tt",F:"dddd, d MMMM yyyy h:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("en-US","default",{englishName:"English (United States)"}),t.addCultureInfo("fi-FI","default",{name:"fi-FI",englishName:"Finnish (Finland)",nativeName:"suomi (Suomi)",language:"fi",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],namesAbbr:["su","ma","ti","ke","to","pe","la"],namesShort:["su","ma","ti","ke","to","pe","la"]},months:{names:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu",""],namesAbbr:["tammi","helmi","maalis","huhti","touko","kesä","heinä","elo","syys","loka","marras","joulu",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM'ta 'yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM'ta 'yyyy H:mm",F:"d. MMMM'ta 'yyyy H:mm:ss",M:"d. MMMM'ta'",Y:"MMMM yyyy"}}}}),t.addCultureInfo("fr-FR","default",{name:"fr-FR",englishName:"French (France)",nativeName:"français (France)",language:"fr",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("he-IL","default",{name:"he-IL",englishName:"Hebrew (Israel)",nativeName:"עברית (ישראל)",language:"he",isRTL:!0,numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$ n"],symbol:"₪"}},calendars:{standard:{days:{names:["יום ראשון","יום שני","יום שלישי","יום רביעי","יום חמישי","יום שישי","שבת"],namesAbbr:["יום א","יום ב","יום ג","יום ד","יום ה","יום ו","שבת"],namesShort:["א","ב","ג","ד","ה","ו","ש"]},months:{names:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר",""],namesAbbr:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ",""]},eras:[{name:"לספירה",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd dd MMMM yyyy HH:mm",F:"dddd dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}},Hebrew:{name:"Hebrew","/":" ",days:{names:["יום ראשון","יום שני","יום שלישי","יום רביעי","יום חמישי","יום שישי","שבת"],namesAbbr:["א","ב","ג","ד","ה","ו","ש"],namesShort:["א","ב","ג","ד","ה","ו","ש"]},months:{names:["תשרי","חשון","כסלו","טבת","שבט","אדר","אדר ב","ניסן","אייר","סיון","תמוז","אב","אלול"],namesAbbr:["תשרי","חשון","כסלו","טבת","שבט","אדר","אדר ב","ניסן","אייר","סיון","תמוז","אב","אלול"]},eras:[{name:"C.E.",start:null,offset:0}],twoDigitYearMax:5790,patterns:{d:"dd MMMM yyyy",D:"dddd dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd dd MMMM yyyy HH:mm",F:"dddd dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hu-HU","default",{name:"hu-HU",englishName:"Hungarian (Hungary)",nativeName:"magyar (Magyarország)",language:"hu",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"Ft"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],namesAbbr:["V","H","K","Sze","Cs","P","Szo"],namesShort:["V","H","K","Sze","Cs","P","Szo"]},months:{names:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december",""],namesAbbr:["jan.","febr.","márc.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec.",""]},AM:["de.","de.","DE."],PM:["du.","du.","DU."],eras:[{name:"i.sz.",start:null,offset:0}],patterns:{d:"yyyy.MM.dd.",D:"yyyy. MMMM d.",t:"H:mm",T:"H:mm:ss",f:"yyyy. MMMM d. H:mm",F:"yyyy. MMMM d. H:mm:ss",M:"MMMM d.",Y:"yyyy. MMMM"}}}}),t.addCultureInfo("is-IS","default",{name:"is-IS",englishName:"Icelandic (Iceland)",nativeName:"íslenska (Ísland)",language:"is",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],decimals:0,",":".",".":",",symbol:"kr."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sunnudagur","mánudagur","þriðjudagur","miðvikudagur","fimmtudagur","föstudagur","laugardagur"],namesAbbr:["sun.","mán.","þri.","mið.","fim.","fös.","lau."],namesShort:["su","má","þr","mi","fi","fö","la"]},months:{names:["janúar","febrúar","mars","apríl","maí","júní","júlí","ágúst","september","október","nóvember","desember",""],namesAbbr:["jan.","feb.","mar.","apr.","maí","jún.","júl.","ágú.","sep.","okt.","nóv.","des.",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("it-IT","default",{name:"it-IT",englishName:"Italian (Italy)",nativeName:"italiano (Italia)",language:"it",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],namesAbbr:["dom","lun","mar","mer","gio","ven","sab"],namesShort:["do","lu","ma","me","gi","ve","sa"]},months:{names:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],namesAbbr:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ja-JP","default",{name:"ja-JP",englishName:"Japanese (Japan)",nativeName:"日本語 (日本)",language:"ja",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["-$n","$n"],decimals:0,symbol:"¥"}},calendars:{standard:{days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"西暦",start:null,offset:0}],patterns:{d:"yyyy/MM/dd",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}},Japanese:{name:"Japanese",days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"平成",start:null,offset:1867},{name:"昭和",start:-18121536e5,offset:1911},{name:"大正",start:-13576032e5,offset:1925},{name:"明治",start:6002208e4,offset:1988}],twoDigitYearMax:99,patterns:{d:"gg y/M/d",D:"gg y'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"gg y'年'M'月'd'日' H:mm",F:"gg y'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"gg y'年'M'月'"}}}}),t.addCultureInfo("ko-KR","default",{name:"ko-KR",englishName:"Korean (Korea)",nativeName:"한국어 (대한민국)",language:"ko",numberFormat:{currency:{pattern:["-$n","$n"],decimals:0,symbol:"₩"}},calendars:{standard:{"/":"-",days:{names:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],namesAbbr:["일","월","화","수","목","금","토"],namesShort:["일","월","화","수","목","금","토"]},months:{names:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["오전","오전","오전"],PM:["오후","오후","오후"],eras:[{name:"서기",start:null,offset:0}],patterns:{d:"yyyy-MM-dd",D:"yyyy'년' M'월' d'일' dddd",t:"tt h:mm",T:"tt h:mm:ss",f:"yyyy'년' M'월' d'일' dddd tt h:mm",F:"yyyy'년' M'월' d'일' dddd tt h:mm:ss",M:"M'월' d'일'",Y:"yyyy'년' M'월'"}},Korean:{name:"Korean","/":"-",days:{names:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],namesAbbr:["일","월","화","수","목","금","토"],namesShort:["일","월","화","수","목","금","토"]},months:{names:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["오전","오전","오전"],PM:["오후","오후","오후"],eras:[{name:"단기",start:null,offset:-2333}],twoDigitYearMax:4362,patterns:{d:"gg yyyy-MM-dd",D:"gg yyyy'년' M'월' d'일' dddd",t:"tt h:mm",T:"tt h:mm:ss",f:"gg yyyy'년' M'월' d'일' dddd tt h:mm",F:"gg yyyy'년' M'월' d'일' dddd tt h:mm:ss",M:"M'월' d'일'",Y:"gg yyyy'년' M'월'"}}}}),t.addCultureInfo("nl-NL","default",{name:"nl-NL",englishName:"Dutch (Netherlands)",nativeName:"Nederlands (Nederland)",language:"nl",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],namesAbbr:["zo","ma","di","wo","do","vr","za"],namesShort:["zo","ma","di","wo","do","vr","za"]},months:{names:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],namesAbbr:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d-M-yyyy",D:"dddd d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd d MMMM yyyy H:mm",F:"dddd d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("nb-NO","default",{name:"nb-NO",englishName:"Norwegian, Bokmål (Norway)",nativeName:"norsk, bokmål (Norge)",language:"nb",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],namesAbbr:["sø","ma","ti","on","to","fr","lø"],namesShort:["sø","ma","ti","on","to","fr","lø"]},months:{names:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("pl-PL","default",{name:"pl-PL",englishName:"Polish (Poland)",nativeName:"polski (Polska)",language:"pl",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"zł"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],namesAbbr:["N","Pn","Wt","Śr","Cz","Pt","So"],namesShort:["N","Pn","Wt","Śr","Cz","Pt","So"]},months:{names:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień",""],namesAbbr:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru",""]},monthsGenitive:{names:["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","września","października","listopada","grudnia",""],namesAbbr:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d MMMM yyyy HH:mm",F:"d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("pt-BR","default",{name:"pt-BR",englishName:"Portuguese (Brazil)",nativeName:"Português (Brasil)",language:"pt",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"R$"}},calendars:{standard:{days:{names:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"],namesAbbr:["dom","seg","ter","qua","qui","sex","sáb"],namesShort:["D","S","T","Q","Q","S","S"]},months:{names:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],namesAbbr:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, d' de 'MMMM' de 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' de 'MMMM' de 'yyyy HH:mm",F:"dddd, d' de 'MMMM' de 'yyyy HH:mm:ss",M:"dd' de 'MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("rm-CH","default",{name:"rm-CH",englishName:"Romansh (Switzerland)",nativeName:"Rumantsch (Svizra)",language:"rm",numberFormat:{",":"'",percent:{pattern:["-n%","n%"],",":"'"},currency:{pattern:["$-n","$ n"],",":"'",symbol:"fr."}},calendars:{standard:{firstDay:1,days:{names:["dumengia","glindesdi","mardi","mesemna","gievgia","venderdi","sonda"],namesAbbr:["du","gli","ma","me","gie","ve","so"],namesShort:["du","gli","ma","me","gie","ve","so"]},months:{names:["schaner","favrer","mars","avrigl","matg","zercladur","fanadur","avust","settember","october","november","december",""],namesAbbr:["schan","favr","mars","avr","matg","zercl","fan","avust","sett","oct","nov","dec",""]},AM:null,PM:null,eras:[{name:"s. Cr.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d MMMM yyyy HH:mm",F:"dddd, d MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ro-RO","default",{name:"ro-RO",englishName:"Romanian (Romania)",nativeName:"română (România)",language:"ro",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"lei"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["duminică","luni","marţi","miercuri","joi","vineri","sâmbătă"],namesAbbr:["D","L","Ma","Mi","J","V","S"],namesShort:["D","L","Ma","Mi","J","V","S"]},months:{names:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie",""],namesAbbr:["ian.","feb.","mar.","apr.","mai.","iun.","iul.","aug.","sep.","oct.","nov.","dec.",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d MMMM yyyy HH:mm",F:"d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ru-RU","default",{name:"ru-RU",englishName:"Russian (Russia)",nativeName:"русский (Россия)",language:"ru",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"р."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],namesAbbr:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],namesShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},months:{names:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь",""],namesAbbr:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек",""]},monthsGenitive:{names:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря",""],namesAbbr:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy 'г.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy 'г.' H:mm",F:"d MMMM yyyy 'г.' H:mm:ss",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hr-HR","default",{name:"hr-HR",englishName:"Croatian (Croatia)",nativeName:"hrvatski (Hrvatska)",language:"hr",numberFormat:{pattern:["- n"],",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kn"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sri","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["siječanj","veljača","ožujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac",""],namesAbbr:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""]},monthsGenitive:{names:["siječnja","veljače","ožujka","travnja","svibnja","lipnja","srpnja","kolovoza","rujna","listopada","studenog","prosinca",""],namesAbbr:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy.",D:"d. MMMM yyyy.",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy. H:mm",F:"d. MMMM yyyy. H:mm:ss",M:"d. MMMM"}}}}),t.addCultureInfo("sk-SK","default",{name:"sk-SK",englishName:"Slovak (Slovakia)",nativeName:"slovenčina (Slovenská republika)",language:"sk",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":". ",firstDay:1,days:{names:["nedeľa","pondelok","utorok","streda","štvrtok","piatok","sobota"],namesAbbr:["ne","po","ut","st","št","pi","so"],namesShort:["ne","po","ut","st","št","pi","so"]},months:{names:["január","február","marec","apríl","máj","jún","júl","august","september","október","november","december",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},monthsGenitive:{names:["januára","februára","marca","apríla","mája","júna","júla","augusta","septembra","októbra","novembra","decembra",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:null,PM:null,eras:[{name:"n. l.",start:null,offset:0}],patterns:{d:"d. M. yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sq-AL","default",{name:"sq-AL",englishName:"Albanian (Albania)",nativeName:"shqipe (Shqipëria)",language:"sq",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n$","n$"],",":".",".":",",symbol:"Lek"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["e diel","e hënë","e martë","e mërkurë","e enjte","e premte","e shtunë"],namesAbbr:["Die","Hën","Mar","Mër","Enj","Pre","Sht"],namesShort:["Di","Hë","Ma","Më","En","Pr","Sh"]},months:{names:["janar","shkurt","mars","prill","maj","qershor","korrik","gusht","shtator","tetor","nëntor","dhjetor",""],namesAbbr:["Jan","Shk","Mar","Pri","Maj","Qer","Kor","Gsh","Sht","Tet","Nën","Dhj",""]},AM:["PD","pd","PD"],PM:["MD","md","MD"],patterns:{d:"yyyy-MM-dd",D:"yyyy-MM-dd",t:"h:mm.tt",T:"h:mm:ss.tt",f:"yyyy-MM-dd h:mm.tt",F:"yyyy-MM-dd h:mm:ss.tt",Y:"yyyy-MM"}}}}),t.addCultureInfo("sv-SE","default",{name:"sv-SE",englishName:"Swedish (Sweden)",nativeName:"svenska (Sverige)",language:"sv",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kr"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],namesAbbr:["sö","må","ti","on","to","fr","lö"],namesShort:["sö","må","ti","on","to","fr","lö"]},months:{names:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"'den 'd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"'den 'd MMMM yyyy HH:mm",F:"'den 'd MMMM yyyy HH:mm:ss",M:"'den 'd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("th-TH","default",{name:"th-TH",englishName:"Thai (Thailand)",nativeName:"ไทย (ไทย)",language:"th",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"฿"}},calendars:{standard:{name:"ThaiBuddhist",firstDay:1,days:{names:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],namesAbbr:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],namesShort:["อ","จ","อ","พ","พ","ศ","ส"]},months:{names:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม",""],namesAbbr:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค.",""]},eras:[{name:"พ.ศ.",start:null,offset:-543}],twoDigitYearMax:2572,patterns:{d:"d/M/yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}},Gregorian_Localized:{firstDay:1,days:{names:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],namesAbbr:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],namesShort:["อ","จ","อ","พ","พ","ศ","ส"]},months:{names:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม",""],namesAbbr:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค.",""]},patterns:{d:"d/M/yyyy",D:"'วัน'dddd'ที่' d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"'วัน'dddd'ที่' d MMMM yyyy H:mm",F:"'วัน'dddd'ที่' d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("tr-TR","default",{name:"tr-TR",englishName:"Turkish (Turkey)",nativeName:"Türkçe (Türkiye)",language:"tr",numberFormat:{",":".",".":",",percent:{pattern:["-%n","%n"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"TL"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],namesAbbr:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"],namesShort:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"]},months:{names:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık",""],namesAbbr:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"dd MMMM yyyy dddd",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy dddd HH:mm",F:"dd MMMM yyyy dddd HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ur-PK","default",{name:"ur-PK",englishName:"Urdu (Islamic Republic of Pakistan)",nativeName:"اُردو (پاکستان)",language:"ur",isRTL:!0,numberFormat:{currency:{pattern:["$n-","$n"],symbol:"Rs"}},calendars:{standard:{firstDay:1,days:{names:["اتوار","پير","منگل","بدھ","جمعرات","جمعه","هفته"],namesAbbr:["اتوار","پير","منگل","بدھ","جمعرات","جمعه","هفته"],namesShort:["ا","پ","م","ب","ج","ج","ه"]},months:{names:["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر",""],namesAbbr:["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر",""]},patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",f:"dd MMMM, yyyy h:mm tt",F:"dd MMMM, yyyy h:mm:ss tt",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",f:"dd/MM/yyyy h:mm tt",F:"dd/MM/yyyy h:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}}}}),t.addCultureInfo("id-ID","default",{name:"id-ID",englishName:"Indonesian (Indonesia)",nativeName:"Bahasa Indonesia (Indonesia)",language:"id",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{decimals:0,",":".",".":",",symbol:"Rp"}},calendars:{standard:{firstDay:1,days:{names:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],namesAbbr:["Minggu","Sen","Sel","Rabu","Kamis","Jumat","Sabtu"],namesShort:["M","S","S","R","K","J","S"]},months:{names:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember",""],namesAbbr:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agust","Sep","Okt","Nop","Des",""]},AM:null,PM:null,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM yyyy H:mm",F:"dd MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("uk-UA","default",{name:"uk-UA",englishName:"Ukrainian (Ukraine)",nativeName:"українська (Україна)",language:"uk",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"₴"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["неділя","понеділок","вівторок","середа","четвер","п'ятниця","субота"],namesAbbr:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],namesShort:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},months:{names:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень",""],namesAbbr:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру",""]},monthsGenitive:{names:["січня","лютого","березня","квітня","травня","червня","липня","серпня","вересня","жовтня","листопада","грудня",""],namesAbbr:["січ","лют","бер","кві","тра","чер","лип","сер","вер","жов","лис","гру",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy' р.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy' р.' H:mm",F:"d MMMM yyyy' р.' H:mm:ss",M:"d MMMM",Y:"MMMM yyyy' р.'"}}}}),t.addCultureInfo("be-BY","default",{name:"be-BY",englishName:"Belarusian (Belarus)",nativeName:"Беларускі (Беларусь)",language:"be",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"р."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["нядзеля","панядзелак","аўторак","серада","чацвер","пятніца","субота"],namesAbbr:["нд","пн","аў","ср","чц","пт","сб"],namesShort:["нд","пн","аў","ср","чц","пт","сб"]},months:{names:["Студзень","Люты","Сакавік","Красавік","Май","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Снежань",""],namesAbbr:["Сту","Лют","Сак","Кра","Май","Чэр","Ліп","Жні","Вер","Кас","Ліс","Сне",""]},monthsGenitive:{names:["студзеня","лютага","сакавіка","красавіка","мая","чэрвеня","ліпеня","жніўня","верасня","кастрычніка","лістапада","снежня",""],namesAbbr:["Сту","Лют","Сак","Кра","Май","Чэр","Ліп","Жні","Вер","Кас","Ліс","Сне",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sl-SI","default",{name:"sl-SI",englishName:"Slovenian (Slovenia)",nativeName:"slovenski (Slovenija)",language:"sl",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedelja","ponedeljek","torek","sreda","četrtek","petek","sobota"],namesAbbr:["ned","pon","tor","sre","čet","pet","sob"],namesShort:["ne","po","to","sr","če","pe","so"]},months:{names:["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("et-EE","default",{name:"et-EE",englishName:"Estonian (Estonia)",nativeName:"eesti (Eesti)",language:"et",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["pühapäev","esmaspäev","teisipäev","kolmapäev","neljapäev","reede","laupäev"],namesAbbr:["P","E","T","K","N","R","L"],namesShort:["P","E","T","K","N","R","L"]},months:{names:["jaanuar","veebruar","märts","aprill","mai","juuni","juuli","august","september","oktoober","november","detsember",""],namesAbbr:["jaan","veebr","märts","apr","mai","juuni","juuli","aug","sept","okt","nov","dets",""]},AM:["EL","el","EL"],PM:["PL","pl","PL"],patterns:{d:"d.MM.yyyy",D:"d. MMMM yyyy'. a.'",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy'. a.' H:mm",F:"d. MMMM yyyy'. a.' H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy'. a.'"}}}}),t.addCultureInfo("lv-LV","default",{name:"lv-LV",englishName:"Latvian (Latvia)",nativeName:"latviešu (Latvija)",language:"lv",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-$ n","$ n"],",":" ",".":",",symbol:"Ls"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["svētdiena","pirmdiena","otrdiena","trešdiena","ceturtdiena","piektdiena","sestdiena"],namesAbbr:["sv","pr","ot","tr","ce","pk","se"],namesShort:["sv","pr","ot","tr","ce","pk","se"]},months:{names:["janvāris","februāris","marts","aprīlis","maijs","jūnijs","jūlijs","augusts","septembris","oktobris","novembris","decembris",""],namesAbbr:["jan","feb","mar","apr","mai","jūn","jūl","aug","sep","okt","nov","dec",""]},monthsGenitive:{names:["janvārī","februārī","martā","aprīlī","maijā","jūnijā","jūlijā","augustā","septembrī","oktobrī","novembrī","decembrī",""],namesAbbr:["jan","feb","mar","apr","mai","jūn","jūl","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"yyyy.MM.dd.",D:"dddd, yyyy'. gada 'd. MMMM",t:"H:mm",T:"H:mm:ss",f:"dddd, yyyy'. gada 'd. MMMM H:mm",F:"dddd, yyyy'. gada 'd. MMMM H:mm:ss",M:"d. MMMM",Y:"yyyy. MMMM"}}}}),t.addCultureInfo("lt-LT","default",{name:"lt-LT",englishName:"Lithuanian (Lithuania)",nativeName:"lietuvių (Lietuva)",language:"lt",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Lt"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sekmadienis","pirmadienis","antradienis","trečiadienis","ketvirtadienis","penktadienis","šeštadienis"],namesAbbr:["Sk","Pr","An","Tr","Kt","Pn","Št"],namesShort:["S","P","A","T","K","Pn","Š"]},months:{names:["sausis","vasaris","kovas","balandis","gegužė","birželis","liepa","rugpjūtis","rugsėjis","spalis","lapkritis","gruodis",""],namesAbbr:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rgp","Rgs","Spl","Lap","Grd",""]},monthsGenitive:{names:["sausio","vasario","kovo","balandžio","gegužės","birželio","liepos","rugpjūčio","rugsėjo","spalio","lapkričio","gruodžio",""],namesAbbr:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rgp","Rgs","Spl","Lap","Grd",""]},AM:null,PM:null,patterns:{d:"yyyy.MM.dd",D:"yyyy 'm.' MMMM d 'd.'",t:"HH:mm",T:"HH:mm:ss",f:"yyyy 'm.' MMMM d 'd.' HH:mm",F:"yyyy 'm.' MMMM d 'd.' HH:mm:ss",M:"MMMM d 'd.'",Y:"yyyy 'm.' MMMM"}}}}),t.addCultureInfo("tg-Cyrl-TJ","default",{name:"tg-Cyrl-TJ",englishName:"Tajik (Cyrillic, Tajikistan)",nativeName:"Тоҷикӣ (Тоҷикистон)",language:"tg-Cyrl",numberFormat:{",":" ",".":",",groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0],",":" ",".":","},currency:{pattern:["-n $","n $"],groupSizes:[3,0],",":" ",".":";",symbol:"т.р."}},calendars:{standard:{"/":".",days:{names:["Яш","Душанбе","Сешанбе","Чоршанбе","Панҷшанбе","Ҷумъа","Шанбе"],namesAbbr:["Яш","Дш","Сш","Чш","Пш","Ҷм","Шн"],namesShort:["Яш","Дш","Сш","Чш","Пш","Ҷм","Шн"]},months:{names:["Январ","Феврал","Март","Апрел","Май","Июн","Июл","Август","Сентябр","Октябр","Ноябр","Декабр",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},monthsGenitive:{names:["январи","феврали","марти","апрели","маи","июни","июли","августи","сентябри","октябри","ноябри","декабри",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",Y:"MMMM yyyy"}}}}),t.addCultureInfo("fa-IR","default",{name:"fa-IR",englishName:"Persian",nativeName:"فارسى (ایران)",language:"fa",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],".":"/",symbol:"ريال"}},calendars:{standard:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ق.ظ","ق.ظ","ق.ظ"],PM:["ب.ظ","ب.ظ","ب.ظ"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_Localized:{firstDay:6,days:{names:["يكشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],namesAbbr:["يكشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],namesShort:["ی","د","س","چ","پ","ج","ش"]},months:{names:["ژانويه","فوريه","مارس","آوريل","مى","ژوئن","ژوئيه","اوت","سپتامبر","اُكتبر","نوامبر","دسامبر",""],namesAbbr:["ژانويه","فوريه","مارس","آوريل","مى","ژوئن","ژوئيه","اوت","سپتامبر","اُكتبر","نوامبر","دسامبر",""]},AM:["ق.ظ","ق.ظ","ق.ظ"],PM:["ب.ظ","ب.ظ","ب.ظ"],patterns:{d:"yyyy/MM/dd",D:"yyyy/MM/dd",t:"hh:mm tt",T:"hh:mm:ss tt",f:"yyyy/MM/dd hh:mm tt",F:"yyyy/MM/dd hh:mm:ss tt",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ق.ظ","ق.ظ","ق.ظ"],PM:["ب.ظ","ب.ظ","ب.ظ"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ق.ظ","ق.ظ","ق.ظ"],PM:["ب.ظ","ب.ظ","ب.ظ"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("vi-VN","default",{name:"vi-VN",englishName:"Vietnamese (Vietnam)",nativeName:"Tiếng Việt (Việt Nam)",language:"vi",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"₫"}},calendars:{standard:{firstDay:1,days:{names:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],namesAbbr:["CN","Hai","Ba","Tư","Năm","Sáu","Bảy"],namesShort:["C","H","B","T","N","S","B"]},months:{names:["Tháng Giêng","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai",""],namesAbbr:["Thg1","Thg2","Thg3","Thg4","Thg5","Thg6","Thg7","Thg8","Thg9","Thg10","Thg11","Thg12",""]},AM:["SA","sa","SA"],PM:["CH","ch","CH"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",f:"dd MMMM yyyy h:mm tt",F:"dd MMMM yyyy h:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hy-AM","default",{name:"hy-AM",englishName:"Armenian (Armenia)",nativeName:"Հայերեն (Հայաստան)",language:"hy",numberFormat:{currency:{pattern:["-n $","n $"],symbol:"դր."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Կիրակի","Երկուշաբթի","Երեքշաբթի","Չորեքշաբթի","Հինգշաբթի","ՈՒրբաթ","Շաբաթ"],namesAbbr:["Կիր","Երկ","Երք","Չրք","Հնգ","ՈՒր","Շբթ"],namesShort:["Կ","Ե","Ե","Չ","Հ","Ո","Շ"]},months:{names:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր",""],namesAbbr:["ՀՆՎ","ՓՏՎ","ՄՐՏ","ԱՊՐ","ՄՅՍ","ՀՆՍ","ՀԼՍ","ՕԳՍ","ՍԵՊ","ՀՈԿ","ՆՈՅ","ԴԵԿ",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM, yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM, yyyy H:mm",F:"d MMMM, yyyy H:mm:ss",M:"d MMMM"}}}}),t.addCultureInfo("az-Latn-AZ","default",{name:"az-Latn-AZ",englishName:"Azeri (Latin, Azerbaijan)",nativeName:"Azərbaycan­ılı (Azərbaycan)",language:"az-Latn",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"man."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"],namesAbbr:["B","Be","Ça","Ç","Ca","C","Ş"],namesShort:["B","Be","Ça","Ç","Ca","C","Ş"]},months:{names:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avgust","Sentyabr","Oktyabr","Noyabr","Dekabr",""],namesAbbr:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avg","Sen","Okt","Noy","Dek",""]},monthsGenitive:{names:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""],namesAbbr:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avg","Sen","Okt","Noy","Dek",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("eu-ES","default",{name:"eu-ES",englishName:"Basque (Basque)",nativeName:"euskara (euskara)",language:"eu",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],namesAbbr:["ig.","al.","as.","az.","og.","or.","lr."],namesShort:["ig","al","as","az","og","or","lr"]},months:{names:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua",""],namesAbbr:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe.",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"yyyy/MM/dd",D:"dddd, yyyy.'eko' MMMM'k 'd",t:"HH:mm",T:"H:mm:ss",f:"dddd, yyyy.'eko' MMMM'k 'd HH:mm",F:"dddd, yyyy.'eko' MMMM'k 'd H:mm:ss",Y:"yyyy.'eko' MMMM"}}}}),t.addCultureInfo("hsb-DE","default",{name:"hsb-DE",englishName:"Upper Sorbian (Germany)",nativeName:"hornjoserbšćina (Němska)",language:"hsb",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":". ",firstDay:1,days:{names:["njedźela","póndźela","wutora","srjeda","štwórtk","pjatk","sobota"],namesAbbr:["nje","pón","wut","srj","štw","pja","sob"],namesShort:["n","p","w","s","š","p","s"]},months:{names:["januar","februar","měrc","apryl","meja","junij","julij","awgust","september","oktober","nowember","december",""],namesAbbr:["jan","feb","měr","apr","mej","jun","jul","awg","sep","okt","now","dec",""]},monthsGenitive:{names:["januara","februara","měrca","apryla","meje","junija","julija","awgusta","septembra","oktobra","nowembra","decembra",""],namesAbbr:["jan","feb","měr","apr","mej","jun","jul","awg","sep","okt","now","dec",""]},AM:null,PM:null,eras:[{name:"po Chr.",start:null,offset:0}],patterns:{d:"d. M. yyyy",D:"dddd, 'dnja' d. MMMM yyyy",t:"H.mm 'hodź.'",T:"H:mm:ss",f:"dddd, 'dnja' d. MMMM yyyy H.mm 'hodź.'",F:"dddd, 'dnja' d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("mk-MK","default",{name:"mk-MK",englishName:"Macedonian (Former Yugoslav Republic of Macedonia)",nativeName:"македонски јазик (Македонија)",language:"mk",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"ден."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недела","понеделник","вторник","среда","четврток","петок","сабота"],namesAbbr:["нед","пон","втр","срд","чет","пет","саб"],namesShort:["не","по","вт","ср","че","пе","са"]},months:{names:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември",""],namesAbbr:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"dddd, dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, dd MMMM yyyy HH:mm",F:"dddd, dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("tn-ZA","default",{name:"tn-ZA",englishName:"Setswana (South Africa)",nativeName:"Setswana (Aforika Borwa)",language:"tn",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["Latshipi","Mosupologo","Labobedi","Laboraro","Labone","Labotlhano","Lamatlhatso"],namesAbbr:["Ltp.","Mos.","Lbd.","Lbr.","Lbn.","Lbt.","Lmt."],namesShort:["Lp","Ms","Lb","Lr","Ln","Lt","Lm"]},months:{names:["Ferikgong","Tlhakole","Mopitloe","Moranang","Motsheganong","Seetebosigo","Phukwi","Phatwe","Lwetse","Diphalane","Ngwanatsele","Sedimothole",""],namesAbbr:["Fer.","Tlhak.","Mop.","Mor.","Motsh.","Seet.","Phukw.","Phatw.","Lwets.","Diph.","Ngwan.","Sed.",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("xh-ZA","default",{name:"xh-ZA",englishName:"isiXhosa (South Africa)",nativeName:"isiXhosa (uMzantsi Afrika)",language:"xh",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["iCawa","uMvulo","uLwesibini","uLwesithathu","uLwesine","uLwesihlanu","uMgqibelo"],namesShort:["Ca","Mv","Lb","Lt","Ln","Lh","Mg"]},months:{names:["Mqungu","Mdumba","Kwindla","Tshazimpuzi","Canzibe","Silimela","Khala","Thupha","Msintsi","Dwarha","Nkanga","Mnga",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("zu-ZA","default",{name:"zu-ZA",englishName:"isiZulu (South Africa)",nativeName:"isiZulu (iNingizimu Afrika)",language:"zu",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["iSonto","uMsombuluko","uLwesibili","uLwesithathu","uLwesine","uLwesihlanu","uMgqibelo"],namesAbbr:["Son.","Mso.","Bi.","Tha.","Ne.","Hla.","Mgq."]},months:{names:["uMasingana","uNhlolanja","uNdasa","uMbaso","uNhlaba","uNhlangulana","uNtulikazi","uNcwaba","uMandulo","uMfumfu","uLwezi","uZibandlela",""],namesAbbr:["Mas.","Nhlo.","Nda.","Mba.","Nhla.","Nhlang.","Ntu.","Ncwa.","Man.","Mfu.","Lwe.","Zib.",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("af-ZA","default",{name:"af-ZA",englishName:"Afrikaans (South Africa)",nativeName:"Afrikaans (Suid Afrika)",language:"af",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["Sondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrydag","Saterdag"],namesAbbr:["Son","Maan","Dins","Woen","Dond","Vry","Sat"],namesShort:["So","Ma","Di","Wo","Do","Vr","Sa"]},months:{names:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember",""],namesAbbr:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ka-GE","default",{name:"ka-GE",englishName:"Georgian (Georgia)",nativeName:"ქართული (საქართველო)",language:"ka",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"Lari"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"],namesAbbr:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"],namesShort:["კ","ო","ს","ო","ხ","პ","შ"]},months:{names:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი",""],namesAbbr:["იან","თებ","მარ","აპრ","მაის","ივნ","ივლ","აგვ","სექ","ოქტ","ნოემ","დეკ",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"yyyy 'წლის' dd MM, dddd",t:"H:mm",T:"H:mm:ss",f:"yyyy 'წლის' dd MM, dddd H:mm",F:"yyyy 'წლის' dd MM, dddd H:mm:ss",M:"dd MM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("fo-FO","default",{name:"fo-FO",englishName:"Faroese (Faroe Islands)",nativeName:"føroyskt (Føroyar)",language:"fo",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"kr."}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["sunnudagur","mánadagur","týsdagur","mikudagur","hósdagur","fríggjadagur","leygardagur"],namesAbbr:["sun","mán","týs","mik","hós","frí","leyg"],namesShort:["su","má","tý","mi","hó","fr","ley"]},months:{names:["januar","februar","mars","apríl","mai","juni","juli","august","september","oktober","november","desember",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hi-IN","default",{name:"hi-IN",englishName:"Hindi (India)",nativeName:"हिंदी (भारत)",language:"hi",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["रविवार","सोमवार","मंगलवार","बुधवार","गुरुवार","शुक्रवार","शनिवार"],namesAbbr:["रवि.","सोम.","मंगल.","बुध.","गुरु.","शुक्र.","शनि."],namesShort:["र","स","म","ब","ग","श","श"]},months:{names:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""],namesAbbr:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""]},AM:["पूर्वाह्न","पूर्वाह्न","पूर्वाह्न"],PM:["अपराह्न","अपराह्न","अपराह्न"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("mt-MT","default",{name:"mt-MT",englishName:"Maltese (Malta)",nativeName:"Malti (Malta)",language:"mt",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["-$n","$n"],symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Il-Ħadd","It-Tnejn","It-Tlieta","L-Erbgħa","Il-Ħamis","Il-Ġimgħa","Is-Sibt"],namesAbbr:["Ħad","Tne","Tli","Erb","Ħam","Ġim","Sib"],namesShort:["I","I","I","L","I","I","I"]},months:{names:["Jannar","Frar","Marzu","April","Mejju","Ġunju","Lulju","Awissu","Settembru","Ottubru","Novembru","Diċembru",""],namesAbbr:["Jan","Fra","Mar","Apr","Mej","Ġun","Lul","Awi","Set","Ott","Nov","Diċ",""]},patterns:{d:"dd/MM/yyyy",D:"dddd, d' ta\\' 'MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' ta\\' 'MMMM yyyy HH:mm",F:"dddd, d' ta\\' 'MMMM yyyy HH:mm:ss",M:"d' ta\\' 'MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("se-NO","default",{name:"se-NO",englishName:"Sami, Northern (Norway)",nativeName:"davvisámegiella (Norga)",language:"se",numberFormat:{",":" ",".":",",percent:{pattern:["-%n","%n"],",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sotnabeaivi","vuossárga","maŋŋebárga","gaskavahkku","duorastat","bearjadat","lávvardat"],namesAbbr:["sotn","vuos","maŋ","gask","duor","bear","láv"],namesShort:["s","m","d","g","d","b","l"]},months:{names:["ođđajagemánnu","guovvamánnu","njukčamánnu","cuoŋománnu","miessemánnu","geassemánnu","suoidnemánnu","borgemánnu","čakčamánnu","golggotmánnu","skábmamánnu","juovlamánnu",""],namesAbbr:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov",""]},monthsGenitive:{names:["ođđajagimánu","guovvamánu","njukčamánu","cuoŋománu","miessemánu","geassemánu","suoidnemánu","borgemánu","čakčamánu","golggotmánu","skábmamánu","juovlamánu",""],namesAbbr:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ms-MY","default",{name:"ms-MY",englishName:"Malay (Malaysia)",nativeName:"Bahasa Melayu (Malaysia)",language:"ms",numberFormat:{currency:{decimals:0,symbol:"RM"}},calendars:{standard:{firstDay:1,days:{names:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],namesAbbr:["Ahad","Isnin","Sel","Rabu","Khamis","Jumaat","Sabtu"],namesShort:["A","I","S","R","K","J","S"]},months:{names:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember",""],namesAbbr:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogos","Sept","Okt","Nov","Dis",""]},AM:null,PM:null,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM yyyy H:mm",F:"dd MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("kk-KZ","default",{name:"kk-KZ",englishName:"Kazakh (Kazakhstan)",nativeName:"Қазақ (Қазақстан)",language:"kk",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-$n","$n"],",":" ",".":"-",symbol:"Т"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Жексенбі","Дүйсенбі","Сейсенбі","Сәрсенбі","Бейсенбі","Жұма","Сенбі"],namesAbbr:["Жк","Дс","Сс","Ср","Бс","Жм","Сн"],namesShort:["Жк","Дс","Сс","Ср","Бс","Жм","Сн"]},months:{names:["қаңтар","ақпан","наурыз","сәуір","мамыр","маусым","шілде","тамыз","қыркүйек","қазан","қараша","желтоқсан",""],namesAbbr:["Қаң","Ақп","Нау","Сәу","Мам","Мау","Шіл","Там","Қыр","Қаз","Қар","Жел",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy 'ж.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy 'ж.' H:mm",F:"d MMMM yyyy 'ж.' H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ky-KG","default",{name:"ky-KG",englishName:"Kyrgyz (Kyrgyzstan)",nativeName:"Кыргыз (Кыргызстан)",language:"ky",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":"-",symbol:"сом"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Жекшемби","Дүйшөмбү","Шейшемби","Шаршемби","Бейшемби","Жума","Ишемби"],namesAbbr:["Жш","Дш","Шш","Шр","Бш","Жм","Иш"],namesShort:["Жш","Дш","Шш","Шр","Бш","Жм","Иш"]},months:{names:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"d'-'MMMM yyyy'-ж.'",t:"H:mm",T:"H:mm:ss",f:"d'-'MMMM yyyy'-ж.' H:mm",F:"d'-'MMMM yyyy'-ж.' H:mm:ss",M:"d MMMM",Y:"MMMM yyyy'-ж.'"}}}}),t.addCultureInfo("sw-KE","default",{name:"sw-KE",englishName:"Kiswahili (Kenya)",nativeName:"Kiswahili (Kenya)",language:"sw",numberFormat:{currency:{symbol:"S"}},calendars:{standard:{days:{names:["Jumapili","Jumatatu","Jumanne","Jumatano","Alhamisi","Ijumaa","Jumamosi"],namesAbbr:["Jumap.","Jumat.","Juman.","Jumat.","Alh.","Iju.","Jumam."],namesShort:["P","T","N","T","A","I","M"]},months:{names:["Januari","Februari","Machi","Aprili","Mei","Juni","Julai","Agosti","Septemba","Oktoba","Novemba","Decemba",""],namesAbbr:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ago","Sep","Okt","Nov","Dec",""]}}}}),t.addCultureInfo("tk-TM","default",{name:"tk-TM",englishName:"Turkmen (Turkmenistan)",nativeName:"türkmençe (Türkmenistan)",language:"tk",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"m."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Duşenbe","Sişenbe","Çarşenbe","Penşenbe","Anna","Şenbe","Ýekşenbe"],namesAbbr:["Db","Sb","Çb","Pb","An","Şb","Ýb"],namesShort:["D","S","Ç","P","A","Ş","Ý"]},months:{names:["Ýanwar","Fewral","Mart","Aprel","Maý","lýun","lýul","Awgust","Sentýabr","Oktýabr","Noýabr","Dekabr",""],namesAbbr:["Ýan","Few","Mart","Apr","Maý","lýun","lýul","Awg","Sen","Okt","Not","Dek",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"yyyy 'ý.' MMMM d",t:"H:mm",T:"H:mm:ss",f:"yyyy 'ý.' MMMM d H:mm",F:"yyyy 'ý.' MMMM d H:mm:ss",Y:"yyyy 'ý.' MMMM"}}}}),t.addCultureInfo("uz-Latn-UZ","default",{name:"uz-Latn-UZ",englishName:"Uzbek (Latin, Uzbekistan)",nativeName:"U'zbek (U'zbekiston Respublikasi)",language:"uz-Latn",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],decimals:0,",":" ",".":",",symbol:"so'm"}},calendars:{standard:{firstDay:1,days:{names:["yakshanba","dushanba","seshanba","chorshanba","payshanba","juma","shanba"],namesAbbr:["yak.","dsh.","sesh.","chr.","psh.","jm.","sh."],namesShort:["ya","d","s","ch","p","j","sh"]},months:{names:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""],namesAbbr:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""]},AM:null,PM:null,patterns:{d:"dd/MM yyyy",D:"yyyy 'yil' d-MMMM",t:"HH:mm",T:"HH:mm:ss",f:"yyyy 'yil' d-MMMM HH:mm",F:"yyyy 'yil' d-MMMM HH:mm:ss",M:"d-MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("tt-RU","default",{name:"tt-RU",englishName:"Tatar (Russia)",nativeName:"Татар (Россия)",language:"tt",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"р."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Якшәмбе","Дүшәмбе","Сишәмбе","Чәршәмбе","Пәнҗешәмбе","Җомга","Шимбә"],namesAbbr:["Якш","Дүш","Сиш","Чәрш","Пәнҗ","Җом","Шим"],namesShort:["Я","Д","С","Ч","П","Җ","Ш"]},months:{names:["Гыйнвар","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь",""],namesAbbr:["Гыйн.","Фев.","Мар.","Апр.","Май","Июнь","Июль","Авг.","Сен.","Окт.","Нояб.","Дек.",""]},monthsGenitive:{names:["Гыйнварның","Февральнең","Мартның","Апрельнең","Майның","Июньнең","Июльнең","Августның","Сентябрьның","Октябрьның","Ноябрьның","Декабрьның",""],namesAbbr:["Гыйн.-ның","Фев.-нең","Мар.-ның","Апр.-нең","Майның","Июньнең","Июльнең","Авг.-ның","Сен.-ның","Окт.-ның","Нояб.-ның","Дек.-ның",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("bn-IN","default",{name:"bn-IN",englishName:"Bengali (India)",nativeName:"বাংলা (ভারত)",language:"bn",numberFormat:{groupSizes:[3,2],percent:{pattern:["-%n","%n"],groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"টা"}},calendars:{standard:{"/":"-",":":".",firstDay:1,days:{names:["রবিবার","সোমবার","মঙ্গলবার","বুধবার","বৃহস্পতিবার","শুক্রবার","শনিবার"],namesAbbr:["রবি.","সোম.","মঙ্গল.","বুধ.","বৃহস্পতি.","শুক্র.","শনি."],namesShort:["র","স","ম","ব","ব","শ","শ"]},months:{names:["জানুয়ারী","ফেব্রুয়ারী","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগস্ট","সেপ্টেম্বর","অক্টোবর","নভেম্বর","ডিসেম্বর",""],namesAbbr:["জানু.","ফেব্রু.","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগ.","সেপ্টে.","অক্টো.","নভে.","ডিসে.",""]},AM:["পুর্বাহ্ন","পুর্বাহ্ন","পুর্বাহ্ন"],PM:["অপরাহ্ন","অপরাহ্ন","অপরাহ্ন"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH.mm",T:"HH.mm.ss",f:"dd MMMM yyyy HH.mm",F:"dd MMMM yyyy HH.mm.ss",M:"dd MMMM"}}}}),t.addCultureInfo("pa-IN","default",{name:"pa-IN",englishName:"Punjabi (India)",nativeName:"ਪੰਜਾਬੀ (ਭਾਰਤ)",language:"pa",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ਰੁ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ਐਤਵਾਰ","ਸੋਮਵਾਰ","ਮੰਗਲਵਾਰ","ਬੁੱਧਵਾਰ","ਵੀਰਵਾਰ","ਸ਼ੁੱਕਰਵਾਰ","ਸ਼ਨਿੱਚਰਵਾਰ"],namesAbbr:["ਐਤ.","ਸੋਮ.","ਮੰਗਲ.","ਬੁੱਧ.","ਵੀਰ.","ਸ਼ੁਕਰ.","ਸ਼ਨਿੱਚਰ."],namesShort:["ਐ","ਸ","ਮ","ਬ","ਵ","ਸ਼","ਸ਼"]},months:{names:["ਜਨਵਰੀ","ਫ਼ਰਵਰੀ","ਮਾਰਚ","ਅਪ੍ਰੈਲ","ਮਈ","ਜੂਨ","ਜੁਲਾਈ","ਅਗਸਤ","ਸਤੰਬਰ","ਅਕਤੂਬਰ","ਨਵੰਬਰ","ਦਸੰਬਰ",""],namesAbbr:["ਜਨਵਰੀ","ਫ਼ਰਵਰੀ","ਮਾਰਚ","ਅਪ੍ਰੈਲ","ਮਈ","ਜੂਨ","ਜੁਲਾਈ","ਅਗਸਤ","ਸਤੰਬਰ","ਅਕਤੂਬਰ","ਨਵੰਬਰ","ਦਸੰਬਰ",""]},AM:["ਸਵੇਰ","ਸਵੇਰ","ਸਵੇਰ"],PM:["ਸ਼ਾਮ","ਸ਼ਾਮ","ਸ਼ਾਮ"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy dddd",t:"tt hh:mm",T:"tt hh:mm:ss",f:"dd MMMM yyyy dddd tt hh:mm",F:"dd MMMM yyyy dddd tt hh:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("gu-IN","default",{name:"gu-IN",englishName:"Gujarati (India)",nativeName:"ગુજરાતી (ભારત)",language:"gu",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"રૂ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["રવિવાર","સોમવાર","મંગળવાર","બુધવાર","ગુરુવાર","શુક્રવાર","શનિવાર"],namesAbbr:["રવિ","સોમ","મંગળ","બુધ","ગુરુ","શુક્ર","શનિ"],namesShort:["ર","સ","મ","બ","ગ","શ","શ"]},months:{names:["જાન્યુઆરી","ફેબ્રુઆરી","માર્ચ","એપ્રિલ","મે","જૂન","જુલાઈ","ઑગસ્ટ","સપ્ટેમ્બર","ઑક્ટ્બર","નવેમ્બર","ડિસેમ્બર",""],namesAbbr:["જાન્યુ","ફેબ્રુ","માર્ચ","એપ્રિલ","મે","જૂન","જુલાઈ","ઑગસ્ટ","સપ્ટે","ઑક્ટો","નવે","ડિસે",""]},AM:["પૂર્વ મધ્યાહ્ન","પૂર્વ મધ્યાહ્ન","પૂર્વ મધ્યાહ્ન"],PM:["ઉત્તર મધ્યાહ્ન","ઉત્તર મધ્યાહ્ન","ઉત્તર મધ્યાહ્ન"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("or-IN","default",{name:"or-IN",englishName:"Oriya (India)",nativeName:"ଓଡ଼ିଆ (ଭାରତ)",language:"or",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ଟ"}},calendars:{standard:{"/":"-",days:{names:["ରବିବାର","ସୋମବାର","ମଙ୍ଗଳବାର","ବୁଧବାର","ଗୁରୁବାର","ଶୁକ୍ରବାର","ଶନିବାର"],namesAbbr:["ରବି.","ସୋମ.","ମଙ୍ଗଳ.","ବୁଧ.","ଗୁରୁ.","ଶୁକ୍ର.","ଶନି."],namesShort:["ର","ସୋ","ମ","ବୁ","ଗୁ","ଶୁ","ଶ"]},months:{names:["ଜାନୁୟାରୀ","ଫ୍ରେବୃୟାରୀ","ମାର୍ଚ୍ଚ","ଏପ୍ରିଲ୍‌","ମେ","ଜୁନ୍‌","ଜୁଲାଇ","ଅଗଷ୍ଟ","ସେପ୍ଟେମ୍ବର","ଅକ୍ଟୋବର","ନଭେମ୍ବର","(ଡିସେମ୍ବର",""],namesAbbr:["ଜାନୁୟାରୀ","ଫ୍ରେବୃୟାରୀ","ମାର୍ଚ୍ଚ","ଏପ୍ରିଲ୍‌","ମେ","ଜୁନ୍‌","ଜୁଲାଇ","ଅଗଷ୍ଟ","ସେପ୍ଟେମ୍ବର","ଅକ୍ଟୋବର","ନଭେମ୍ବର","(ଡିସେମ୍ବର",""]},eras:[{name:"ଖ୍ରୀଷ୍ଟାବ୍ଦ",start:null,offset:0}],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("ta-IN","default",{name:"ta-IN",englishName:"Tamil (India)",nativeName:"தமிழ் (இந்தியா)",language:"ta",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ரூ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ஞாயிற்றுக்கிழமை","திங்கள்கிழமை","செவ்வாய்கிழமை","புதன்கிழமை","வியாழக்கிழமை","வெள்ளிக்கிழமை","சனிக்கிழமை"],namesAbbr:["ஞாயிறு","திங்கள்","செவ்வாய்","புதன்","வியாழன்","வெள்ளி","சனி"],namesShort:["ஞா","தி","செ","பு","வி","வெ","ச"]},months:{names:["ஜனவரி","பிப்ரவரி","மார்ச்","ஏப்ரல்","மே","ஜூன்","ஜூலை","ஆகஸ்ட்","செப்டம்பர்","அக்டோபர்","நவம்பர்","டிசம்பர்",""],namesAbbr:["ஜனவரி","பிப்ரவரி","மார்ச்","ஏப்ரல்","மே","ஜூன்","ஜூலை","ஆகஸ்ட்","செப்டம்பர்","அக்டோபர்","நவம்பர்","டிசம்பர்",""]},AM:["காலை","காலை","காலை"],PM:["மாலை","மாலை","மாலை"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("te-IN","default",{name:"te-IN",englishName:"Telugu (India)",nativeName:"తెలుగు (భారత దేశం)",language:"te",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"రూ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ఆదివారం","సోమవారం","మంగళవారం","బుధవారం","గురువారం","శుక్రవారం","శనివారం"],namesAbbr:["ఆది.","సోమ.","మంగళ.","బుధ.","గురు.","శుక్ర.","శని."],namesShort:["ఆ","సో","మం","బు","గు","శు","శ"]},months:{names:["జనవరి","ఫిబ్రవరి","మార్చి","ఏప్రిల్","మే","జూన్","జూలై","ఆగస్టు","సెప్టెంబర్","అక్టోబర్","నవంబర్","డిసెంబర్",""],namesAbbr:["జనవరి","ఫిబ్రవరి","మార్చి","ఏప్రిల్","మే","జూన్","జూలై","ఆగస్టు","సెప్టెంబర్","అక్టోబర్","నవంబర్","డిసెంబర్",""]},AM:["పూర్వాహ్న","పూర్వాహ్న","పూర్వాహ్న"],PM:["అపరాహ్న","అపరాహ్న","అపరాహ్న"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("kn-IN","default",{name:"kn-IN",englishName:"Kannada (India)",nativeName:"ಕನ್ನಡ (ಭಾರತ)",language:"kn",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ರೂ"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ಭಾನುವಾರ","ಸೋಮವಾರ","ಮಂಗಳವಾರ","ಬುಧವಾರ","ಗುರುವಾರ","ಶುಕ್ರವಾರ","ಶನಿವಾರ"],namesAbbr:["ಭಾನು.","ಸೋಮ.","ಮಂಗಳ.","ಬುಧ.","ಗುರು.","ಶುಕ್ರ.","ಶನಿ."],namesShort:["ರ","ಸ","ಮ","ಬ","ಗ","ಶ","ಶ"]},months:{names:["ಜನವರಿ","ಫೆಬ್ರವರಿ","ಮಾರ್ಚ್","ಎಪ್ರಿಲ್","ಮೇ","ಜೂನ್","ಜುಲೈ","ಆಗಸ್ಟ್","ಸೆಪ್ಟಂಬರ್","ಅಕ್ಟೋಬರ್","ನವೆಂಬರ್","ಡಿಸೆಂಬರ್",""],namesAbbr:["ಜನವರಿ","ಫೆಬ್ರವರಿ","ಮಾರ್ಚ್","ಎಪ್ರಿಲ್","ಮೇ","ಜೂನ್","ಜುಲೈ","ಆಗಸ್ಟ್","ಸೆಪ್ಟಂಬರ್","ಅಕ್ಟೋಬರ್","ನವೆಂಬರ್","ಡಿಸೆಂಬರ್",""]},AM:["ಪೂರ್ವಾಹ್ನ","ಪೂರ್ವಾಹ್ನ","ಪೂರ್ವಾಹ್ನ"],PM:["ಅಪರಾಹ್ನ","ಅಪರಾಹ್ನ","ಅಪರಾಹ್ನ"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("ml-IN","default",{name:"ml-IN",englishName:"Malayalam (India)",nativeName:"മലയാളം (ഭാരതം)",language:"ml",numberFormat:{groupSizes:[3,2],percent:{pattern:["-%n","%n"],groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"ക"}},calendars:{standard:{"/":"-",":":".",firstDay:1,days:{names:["ഞായറാഴ്ച","തിങ്കളാഴ്ച","ചൊവ്വാഴ്ച","ബുധനാഴ്ച","വ്യാഴാഴ്ച","വെള്ളിയാഴ്ച","ശനിയാഴ്ച"],namesAbbr:["ഞായർ.","തിങ്കൾ.","ചൊവ്വ.","ബുധൻ.","വ്യാഴം.","വെള്ളി.","ശനി."],namesShort:["ഞ","ത","ച","ബ","വ","വെ","ശ"]},months:{names:["ജനുവരി","ഫെബ്റുവരി","മാറ്ച്ച്","ഏപ്റില്","മെയ്","ജൂണ്","ജൂലൈ","ഓഗസ്ററ്","സെപ്ററംബറ്","ഒക്ടോബറ്","നവംബറ്","ഡിസംബറ്",""],namesAbbr:["ജനുവരി","ഫെബ്റുവരി","മാറ്ച്ച്","ഏപ്റില്","മെയ്","ജൂണ്","ജൂലൈ","ഓഗസ്ററ്","സെപ്ററംബറ്","ഒക്ടോബറ്","നവംബറ്","ഡിസംബറ്",""]},patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH.mm",T:"HH.mm.ss",f:"dd MMMM yyyy HH.mm",F:"dd MMMM yyyy HH.mm.ss",M:"dd MMMM"}}}}),t.addCultureInfo("as-IN","default",{name:"as-IN",englishName:"Assamese (India)",nativeName:"অসমীয়া (ভাৰত)",language:"as",numberFormat:{groupSizes:[3,2],percent:{pattern:["-n%","n%"],groupSizes:[3,2]},currency:{pattern:["$ -n","n$"],groupSizes:[3,2],symbol:"ট"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["সোমবাৰ","মঙ্গলবাৰ","বুধবাৰ","বৃহস্পতিবাৰ","শুক্রবাৰ","শনিবাৰ","ৰবিবাৰ"],namesAbbr:["সোম.","মঙ্গল.","বুধ.","বৃহ.","শুক্র.","শনি.","ৰবি."],namesShort:["সো","ম","বু","বৃ","শু","শ","র"]},months:{names:["জানুৱাৰী","ফেব্রুৱাৰী","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগষ্ট","চেপ্টেম্বর","অক্টোবর","নবেম্বর","ডিচেম্বর",""],namesAbbr:["জানু","ফেব্রু","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগষ্ট","চেপ্টে","অক্টো","নবে","ডিচে",""]},AM:["ৰাতিপু","ৰাতিপু","ৰাতিপু"],PM:["আবেলি","আবেলি","আবেলি"],eras:[{name:"খ্রীষ্টাব্দ",start:null,offset:0}],patterns:{d:"dd-MM-yyyy",D:"yyyy,MMMM dd, dddd",t:"tt h:mm",T:"tt h:mm:ss",f:"yyyy,MMMM dd, dddd tt h:mm",F:"yyyy,MMMM dd, dddd tt h:mm:ss",M:"dd MMMM",Y:"MMMM,yy"}}}}),t.addCultureInfo("mr-IN","default",{name:"mr-IN",englishName:"Marathi (India)",nativeName:"मराठी (भारत)",language:"mr",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["रविवार","सोमवार","मंगळवार","बुधवार","गुरुवार","शुक्रवार","शनिवार"],namesAbbr:["रवि.","सोम.","मंगळ.","बुध.","गुरु.","शुक्र.","शनि."],namesShort:["र","स","म","ब","ग","श","श"]},months:{names:["जानेवारी","फेब्रुवारी","मार्च","एप्रिल","मे","जून","जुलै","ऑगस्ट","सप्टेंबर","ऑक्टोबर","नोव्हेंबर","डिसेंबर",""],namesAbbr:["जाने.","फेब्रु.","मार्च","एप्रिल","मे","जून","जुलै","ऑगस्ट","सप्टें.","ऑक्टो.","नोव्हें.","डिसें.",""]},AM:["म.पू.","म.पू.","म.पू."],PM:["म.नं.","म.नं.","म.नं."],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("sa-IN","default",{name:"sa-IN",englishName:"Sanskrit (India)",nativeName:"संस्कृत (भारतम्)",language:"sa",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",days:{names:["रविवासरः","सोमवासरः","मङ्गलवासरः","बुधवासरः","गुरुवासरः","शुक्रवासरः","शनिवासरः"],namesAbbr:["रविवासरः","सोमवासरः","मङ्गलवासरः","बुधवासरः","गुरुवासरः","शुक्रवासरः","शनिवासरः"],namesShort:["र","स","म","ब","ग","श","श"]},months:{names:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""],namesAbbr:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्तूबर","नवम्बर","दिसम्बर",""]},AM:["पूर्वाह्न","पूर्वाह्न","पूर्वाह्न"],PM:["अपराह्न","अपराह्न","अपराह्न"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy dddd",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy dddd HH:mm",F:"dd MMMM yyyy dddd HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("mn-MN","default",{name:"mn-MN",englishName:"Mongolian (Cyrillic, Mongolia)",nativeName:"Монгол хэл (Монгол улс)",language:"mn-Cyrl",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"₮"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Ням","Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба"],namesAbbr:["Ня","Да","Мя","Лх","Пү","Ба","Бя"],namesShort:["Ня","Да","Мя","Лх","Пү","Ба","Бя"]},months:{names:["1 дүгээр сар","2 дугаар сар","3 дугаар сар","4 дүгээр сар","5 дугаар сар","6 дугаар сар","7 дугаар сар","8 дугаар сар","9 дүгээр сар","10 дугаар сар","11 дүгээр сар","12 дугаар сар",""],namesAbbr:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""]},monthsGenitive:{names:["1 дүгээр сарын","2 дугаар сарын","3 дугаар сарын","4 дүгээр сарын","5 дугаар сарын","6 дугаар сарын","7 дугаар сарын","8 дугаар сарын","9 дүгээр сарын","10 дугаар сарын","11 дүгээр сарын","12 дугаар сарын",""],namesAbbr:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""]},AM:null,PM:null,patterns:{d:"yy.MM.dd",D:"yyyy 'оны' MMMM d",t:"H:mm",T:"H:mm:ss",f:"yyyy 'оны' MMMM d H:mm",F:"yyyy 'оны' MMMM d H:mm:ss",M:"d MMMM",Y:"yyyy 'он' MMMM"}}}}),t.addCultureInfo("bo-CN","default",{name:"bo-CN",englishName:"Tibetan (PRC)",nativeName:"བོད་ཡིག (ཀྲུང་ཧྭ་མི་དམངས་སྤྱི་མཐུན་རྒྱལ་ཁབ།)",language:"bo",numberFormat:{groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{pattern:["$-n","$n"],groupSizes:[3,0],symbol:"¥"}},calendars:{standard:{firstDay:1,days:{names:["གཟའ་ཉི་མ།","གཟའ་ཟླ་བ།","གཟའ་མིག་དམར།","གཟའ་ལྷག་པ།","གཟའ་ཕུར་བུ།","གཟའ་པ་སངས།","གཟའ་སྤེན་པ།"],namesAbbr:["ཉི་མ།","ཟླ་བ།","མིག་དམར།","ལྷག་པ།","ཕུར་བུ།","པ་སངས།","སྤེན་པ།"],namesShort:["༧","༡","༢","༣","༤","༥","༦"]},months:{names:["སྤྱི་ཟླ་དང་པོ།","སྤྱི་ཟླ་གཉིས་པ།","སྤྱི་ཟླ་གསུམ་པ།","སྤྱི་ཟླ་བཞི་པ།","སྤྱི་ཟླ་ལྔ་པ།","སྤྱི་ཟླ་དྲུག་པ།","སྤྱི་ཟླ་བདུན་པ།","སྤྱི་ཟླ་བརྒྱད་པ།","སྤྱི་ཟླ་དགུ་པ།","སྤྱི་ཟླ་བཅུ་པོ།","སྤྱི་ཟླ་བཅུ་གཅིག་པ།","སྤྱི་ཟླ་བཅུ་གཉིས་པ།",""],namesAbbr:["ཟླ་ ༡","ཟླ་ ༢","ཟླ་ ༣","ཟླ་ ༤","ཟླ་ ༥","ཟླ་ ༦","ཟླ་ ༧","ཟླ་ ༨","ཟླ་ ༩","ཟླ་ ༡༠","ཟླ་ ༡༡","ཟླ་ ༡༢",""]},AM:["སྔ་དྲོ","སྔ་དྲོ","སྔ་དྲོ"],PM:["ཕྱི་དྲོ","ཕྱི་དྲོ","ཕྱི་དྲོ"],eras:[{name:"སྤྱི་ལོ",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'ལོའི་ཟླ' M'ཚེས' d",t:"HH:mm",T:"HH:mm:ss",f:"yyyy'ལོའི་ཟླ' M'ཚེས' d HH:mm",F:"yyyy'ལོའི་ཟླ' M'ཚེས' d HH:mm:ss",M:"'ཟླ་' M'ཚེས'd",Y:"yyyy.M"}}}}),t.addCultureInfo("cy-GB","default",{name:"cy-GB",englishName:"Welsh (United Kingdom)",nativeName:"Cymraeg (y Deyrnas Unedig)",language:"cy",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,days:{names:["Dydd Sul","Dydd Llun","Dydd Mawrth","Dydd Mercher","Dydd Iau","Dydd Gwener","Dydd Sadwrn"],namesAbbr:["Sul","Llun","Maw","Mer","Iau","Gwe","Sad"],namesShort:["Su","Ll","Ma","Me","Ia","Gw","Sa"]},months:{names:["Ionawr","Chwefror","Mawrth","Ebrill","Mai","Mehefin","Gorffennaf","Awst","Medi","Hydref","Tachwedd","Rhagfyr",""],namesAbbr:["Ion","Chwe","Maw","Ebr","Mai","Meh","Gor","Aws","Med","Hyd","Tach","Rhag",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("km-KH","default",{name:"km-KH",englishName:"Khmer (Cambodia)",nativeName:"ខ្មែរ (កម្ពុជា)",language:"km",numberFormat:{pattern:["- n"],groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{pattern:["-n$","n$"],symbol:"៛"}},calendars:{standard:{"/":"-",days:{names:["ថ្ងៃអាទិត្យ","ថ្ងៃច័ន្ទ","ថ្ងៃអង្គារ","ថ្ងៃពុធ","ថ្ងៃព្រហស្បតិ៍","ថ្ងៃសុក្រ","ថ្ងៃសៅរ៍"],namesAbbr:["អាទិ.","ច.","អ.","ពុ","ព្រហ.","សុ.","ស."],namesShort:["អា","ច","អ","ពុ","ព្","សុ","ស"]},months:{names:["មករា","កុម្ភៈ","មិនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ",""],namesAbbr:["១","២","៣","៤","៥","៦","៧","៨","៩","១០","១១","១២",""]},AM:["ព្រឹក","ព្រឹក","ព្រឹក"],PM:["ល្ងាច","ល្ងាច","ល្ងាច"],eras:[{name:"មុនគ.ស.",start:null,offset:0}],patterns:{d:"yyyy-MM-dd",D:"d MMMM yyyy",t:"H:mm tt",T:"HH:mm:ss",f:"d MMMM yyyy H:mm tt",F:"d MMMM yyyy HH:mm:ss",M:"'ថ្ងៃទី' dd 'ខែ' MM",Y:"'ខែ' MM 'ឆ្នាំ' yyyy"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ព្រឹក","ព្រឹក","ព្រឹក"],PM:["ល្ងាច","ល្ងាច","ល្ងាច"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm tt",T:"HH:mm:ss",f:"dddd, MMMM dd, yyyy H:mm tt",F:"dddd, MMMM dd, yyyy HH:mm:ss"}}}}),t.addCultureInfo("lo-LA","default",{name:"lo-LA",englishName:"Lao (Lao P.D.R.)",nativeName:"ລາວ (ສ.ປ.ປ. ລາວ)",language:"lo",numberFormat:{pattern:["(n)"],groupSizes:[3,0],percent:{groupSizes:[3,0]},currency:{pattern:["(n$)","n$"],groupSizes:[3,0],symbol:"₭"}},calendars:{standard:{days:{names:["ວັນອາທິດ","ວັນຈັນ","ວັນອັງຄານ","ວັນພຸດ","ວັນພະຫັດ","ວັນສຸກ","ວັນເສົາ"],namesAbbr:["ອາທິດ","ຈັນ","ອັງຄານ","ພຸດ","ພະຫັດ","ສຸກ","ເສົາ"],namesShort:["ອ","ຈ","ອ","ພ","ພ","ສ","ເ"]},months:{names:["ມັງກອນ","ກຸມພາ","ມີນາ","ເມສາ","ພຶດສະພາ","ມິຖຸນາ","ກໍລະກົດ","ສິງຫາ","ກັນຍາ","ຕຸລາ","ພະຈິກ","ທັນວາ",""],namesAbbr:["ມັງກອນ","ກຸມພາ","ມີນາ","ເມສາ","ພຶດສະພາ","ມິຖຸນາ","ກໍລະກົດ","ສິງຫາ","ກັນຍາ","ຕຸລາ","ພະຈິກ","ທັນວາ",""]},AM:["ເຊົ້າ","ເຊົ້າ","ເຊົ້າ"],PM:["ແລງ","ແລງ","ແລງ"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"H:mm tt",T:"HH:mm:ss",f:"dd MMMM yyyy H:mm tt",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("gl-ES","default",{name:"gl-ES",englishName:"Galician (Galician)",nativeName:"galego (galego)",language:"gl",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domingo","luns","martes","mércores","xoves","venres","sábado"],namesAbbr:["dom","luns","mar","mér","xov","ven","sáb"],namesShort:["do","lu","ma","mé","xo","ve","sá"]},months:{names:["xaneiro","febreiro","marzo","abril","maio","xuño","xullo","agosto","setembro","outubro","novembro","decembro",""],namesAbbr:["xan","feb","mar","abr","maio","xuñ","xull","ago","set","out","nov","dec",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("kok-IN","default",{name:"kok-IN",englishName:"Konkani (India)",nativeName:"कोंकणी (भारत)",language:"kok",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"रु"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["आयतार","सोमार","मंगळार","बुधवार","बिरेस्तार","सुक्रार","शेनवार"],namesAbbr:["आय.","सोम.","मंगळ.","बुध.","बिरे.","सुक्र.","शेन."],namesShort:["आ","स","म","ब","ब","स","श"]},months:{names:["जानेवारी","फेब्रुवारी","मार्च","एप्रिल","मे","जून","जुलै","ऑगस्ट","सप्टेंबर","ऑक्टोबर","नोवेम्बर","डिसेंबर",""],namesAbbr:["जानेवारी","फेब्रुवारी","मार्च","एप्रिल","मे","जून","जुलै","ऑगस्ट","सप्टेंबर","ऑक्टोबर","नोवेम्बर","डिसेंबर",""]},AM:["म.पू.","म.पू.","म.पू."],PM:["म.नं.","म.नं.","म.नं."],patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("syr-SY","default",{name:"syr-SY",englishName:"Syriac (Syria)",nativeName:"ܣܘܪܝܝܐ (سوريا)",language:"syr",isRTL:!0,numberFormat:{currency:{pattern:["$n-","$ n"],symbol:"ل.س.‏"}},calendars:{standard:{firstDay:6,days:{names:["ܚܕ ܒܫܒܐ","ܬܪܝܢ ܒܫܒܐ","ܬܠܬܐ ܒܫܒܐ","ܐܪܒܥܐ ܒܫܒܐ","ܚܡܫܐ ܒܫܒܐ","ܥܪܘܒܬܐ","ܫܒܬܐ"],namesAbbr:["܏ܐ ܏ܒܫ","܏ܒ ܏ܒܫ","܏ܓ ܏ܒܫ","܏ܕ ܏ܒܫ","܏ܗ ܏ܒܫ","܏ܥܪܘܒ","܏ܫܒ"],namesShort:["ܐ","ܒ","ܓ","ܕ","ܗ","ܥ","ܫ"]},months:{names:["ܟܢܘܢ ܐܚܪܝ","ܫܒܛ","ܐܕܪ","ܢܝܣܢ","ܐܝܪ","ܚܙܝܪܢ","ܬܡܘܙ","ܐܒ","ܐܝܠܘܠ","ܬܫܪܝ ܩܕܝܡ","ܬܫܪܝ ܐܚܪܝ","ܟܢܘܢ ܩܕܝܡ",""],namesAbbr:["܏ܟܢ ܏ܒ","ܫܒܛ","ܐܕܪ","ܢܝܣܢ","ܐܝܪ","ܚܙܝܪܢ","ܬܡܘܙ","ܐܒ","ܐܝܠܘܠ","܏ܬܫ ܏ܐ","܏ܬܫ ܏ܒ","܏ܟܢ ܏ܐ",""]},AM:["ܩ.ܛ","ܩ.ܛ","ܩ.ܛ"],PM:["ܒ.ܛ","ܒ.ܛ","ܒ.ܛ"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}}}}),t.addCultureInfo("si-LK","default",{name:"si-LK",englishName:"Sinhala (Sri Lanka)",nativeName:"සිංහල (ශ්‍රී ලංකා)",language:"si",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["($ n)","$ n"],symbol:"රු."}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ඉරිදා","සඳුදා","අඟහරුවාදා","බදාදා","බ්‍රහස්පතින්දා","සිකුරාදා","සෙනසුරාදා"],namesAbbr:["ඉරිදා","සඳුදා","කුජදා","බුදදා","ගුරුදා","කිවිදා","ශනිදා"],namesShort:["ඉ","ස","අ","බ","බ්‍ර","සි","සෙ"]},months:{names:["ජනවාරි","පෙබරවාරි","මාර්තු","අ‌ප්‍රේල්","මැයි","ජූනි","ජූලි","අ‌ගෝස්තු","සැප්තැම්බර්","ඔක්තෝබර්","නොවැම්බර්","දෙසැම්බර්",""],namesAbbr:["ජන.","පෙබ.","මාර්තු.","අප්‍රේල්.","මැයි.","ජූනි.","ජූලි.","අගෝ.","සැප්.","ඔක්.","නොවැ.","දෙසැ.",""]},AM:["පෙ.ව.","පෙ.ව.","පෙ.ව."],PM:["ප.ව.","ප.ව.","ප.ව."],eras:[{name:"ක්‍රි.ව.",start:null,offset:0}],patterns:{d:"yyyy-MM-dd",D:"yyyy MMMM' මස 'dd' වැනිදා 'dddd",f:"yyyy MMMM' මස 'dd' වැනිදා 'dddd h:mm tt",F:"yyyy MMMM' මස 'dd' වැනිදා 'dddd h:mm:ss tt",Y:"yyyy MMMM"}}}}),t.addCultureInfo("iu-Cans-CA","default",{name:"iu-Cans-CA",englishName:"Inuktitut (Syllabics, Canada)",nativeName:"ᐃᓄᒃᑎᑐᑦ (ᑲᓇᑕᒥ)",language:"iu-Cans",numberFormat:{groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["ᓈᑦᑏᖑᔭ","ᓇᒡᒐᔾᔭᐅ","ᐊᐃᑉᐱᖅ","ᐱᖓᑦᓯᖅ","ᓯᑕᒻᒥᖅ","ᑕᓪᓕᕐᒥᖅ","ᓯᕙᑖᕐᕕᒃ"],namesAbbr:["ᓈᑦᑏ","ᓇᒡᒐ","ᐊᐃᑉᐱ","ᐱᖓᑦᓯ","ᓯᑕ","ᑕᓪᓕ","ᓯᕙᑖᕐᕕᒃ"],namesShort:["ᓈ","ᓇ","ᐊ","ᐱ","ᓯ","ᑕ","ᓯ"]},months:{names:["ᔮᓐᓄᐊᕆ","ᕖᕝᕗᐊᕆ","ᒫᑦᓯ","ᐄᐳᕆ","ᒪᐃ","ᔫᓂ","ᔪᓚᐃ","ᐋᒡᒌᓯ","ᓯᑎᐱᕆ","ᐅᑐᐱᕆ","ᓄᕕᐱᕆ","ᑎᓯᐱᕆ",""],namesAbbr:["ᔮᓐᓄ","ᕖᕝᕗ","ᒫᑦᓯ","ᐄᐳᕆ","ᒪᐃ","ᔫᓂ","ᔪᓚᐃ","ᐋᒡᒌ","ᓯᑎᐱ","ᐅᑐᐱ","ᓄᕕᐱ","ᑎᓯᐱ",""]},patterns:{d:"d/M/yyyy",D:"dddd,MMMM dd,yyyy",f:"dddd,MMMM dd,yyyy h:mm tt",F:"dddd,MMMM dd,yyyy h:mm:ss tt",Y:"MMMM,yyyy"}}}}),t.addCultureInfo("am-ET","default",{name:"am-ET",englishName:"Amharic (Ethiopia)",nativeName:"አማርኛ (ኢትዮጵያ)",language:"am",numberFormat:{decimals:1,groupSizes:[3,0],percent:{pattern:["-n%","n%"],decimals:1,groupSizes:[3,0]},currency:{pattern:["-$n","$n"],groupSizes:[3,0],symbol:"ETB"}},calendars:{standard:{days:{names:["እሑድ","ሰኞ","ማክሰኞ","ረቡዕ","ሐሙስ","ዓርብ","ቅዳሜ"],namesAbbr:["እሑድ","ሰኞ","ማክሰ","ረቡዕ","ሐሙስ","ዓርብ","ቅዳሜ"],namesShort:["እ","ሰ","ማ","ረ","ሐ","ዓ","ቅ"]},months:{names:["ጃንዩወሪ","ፌብሩወሪ","ማርች","ኤፕረል","ሜይ","ጁን","ጁላይ","ኦገስት","ሴፕቴምበር","ኦክተውበር","ኖቬምበር","ዲሴምበር",""],namesAbbr:["ጃንዩ","ፌብሩ","ማርች","ኤፕረ","ሜይ","ጁን","ጁላይ","ኦገስ","ሴፕቴ","ኦክተ","ኖቬም","ዲሴም",""]},AM:["ጡዋት","ጡዋት","ጡዋት"],PM:["ከሰዓት","ከሰዓት","ከሰዓት"],eras:[{name:"ዓመተ  ምሕረት",start:null,offset:0}],patterns:{d:"d/M/yyyy",D:"dddd '፣' MMMM d 'ቀን' yyyy",f:"dddd '፣' MMMM d 'ቀን' yyyy h:mm tt",F:"dddd '፣' MMMM d 'ቀን' yyyy h:mm:ss tt",M:"MMMM d ቀን",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ne-NP","default",{name:"ne-NP",englishName:"Nepali (Nepal)",nativeName:"नेपाली (नेपाल)",language:"ne",numberFormat:{groupSizes:[3,2],percent:{pattern:["-n%","n%"],groupSizes:[3,2]},currency:{pattern:["-$n","$n"],symbol:"रु"}},calendars:{standard:{days:{names:["आइतवार","सोमवार","मङ्गलवार","बुधवार","बिहीवार","शुक्रवार","शनिवार"],namesAbbr:["आइत","सोम","मङ्गल","बुध","बिही","शुक्र","शनि"],namesShort:["आ","सो","म","बु","बि","शु","श"]},months:{names:["जनवरी","फेब्रुअरी","मार्च","अप्रिल","मे","जून","जुलाई","अगस्त","सेप्टेम्बर","अक्टोबर","नोभेम्बर","डिसेम्बर",""],namesAbbr:["जन","फेब","मार्च","अप्रिल","मे","जून","जुलाई","अग","सेप्ट","अक्ट","नोभ","डिस",""]},AM:["विहानी","विहानी","विहानी"],PM:["बेलुकी","बेलुकी","बेलुकी"],eras:[{name:"a.d.",start:null,offset:0}],patterns:{Y:"MMMM,yyyy"}}}}),t.addCultureInfo("fy-NL","default",{name:"fy-NL",englishName:"Frisian (Netherlands)",nativeName:"Frysk (Nederlân)",language:"fy",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["Snein","Moandei","Tiisdei","Woansdei","Tongersdei","Freed","Sneon"],namesAbbr:["Sn","Mo","Ti","Wo","To","Fr","Sn"],namesShort:["S","M","T","W","T","F","S"]},months:{names:["jannewaris","febrewaris","maart","april","maaie","juny","july","augustus","septimber","oktober","novimber","desimber",""],namesAbbr:["jann","febr","mrt","apr","maaie","jun","jul","aug","sept","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"d-M-yyyy",D:"dddd d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd d MMMM yyyy H:mm",F:"dddd d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ps-AF","default",{name:"ps-AF",englishName:"Pashto (Afghanistan)",nativeName:"پښتو (افغانستان)",language:"ps",isRTL:!0,numberFormat:{pattern:["n-"],",":"،",".":",",percent:{pattern:["%n-","%n"],",":"،",".":","},currency:{pattern:["$n-","$n"],",":"٬",".":"٫",symbol:"؋"}},calendars:{standard:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["غ.م","غ.م","غ.م"],PM:["غ.و","غ.و","غ.و"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",f:"dd/MM/yyyy h:mm tt",F:"dd/MM/yyyy h:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_Localized:{firstDay:6,days:{names:["یکشنبه","دوشنبه","سه‌شنبه","چارشنبه","پنجشنبه","جمعه","شنبه"],namesAbbr:["یکشنبه","دوشنبه","سه‌شنبه","چارشنبه","پنجشنبه","جمعه","شنبه"],namesShort:["ی","د","س","چ","پ","ج","ش"]},months:{names:["سلواغه","كب","ورى","غويى","غبرګولى","چنګا ښزمرى","زمرى","وږى","تله","لړم","لنڈ ۍ","مرغومى",""],namesAbbr:["سلواغه","كب","ورى","غويى","غبرګولى","چنګا ښ","زمرى","وږى","تله","لړم","لنڈ ۍ","مرغومى",""]},AM:["غ.م","غ.م","غ.م"],PM:["غ.و","غ.و","غ.و"],eras:[{name:"ل.ه",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy, dd, MMMM, dddd",f:"yyyy, dd, MMMM, dddd h:mm tt",F:"yyyy, dd, MMMM, dddd h:mm:ss tt",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("fil-PH","default",{name:"fil-PH",englishName:"Filipino (Philippines)",nativeName:"Filipino (Pilipinas)",language:"fil",numberFormat:{currency:{symbol:"PhP"}},calendars:{standard:{days:{names:["Linggo","Lunes","Martes","Mierkoles","Huebes","Biernes","Sabado"],namesAbbr:["Lin","Lun","Mar","Mier","Hueb","Bier","Saba"],namesShort:["L","L","M","M","H","B","S"]},months:{names:["Enero","Pebrero","Marso","Abril","Mayo","Hunyo","Hulyo","Agosto","Septyembre","Oktubre","Nobyembre","Disyembre",""],namesAbbr:["En","Peb","Mar","Abr","Mayo","Hun","Hul","Agos","Sept","Okt","Nob","Dis",""]},eras:[{name:"Anno Domini",start:null,offset:0}]}}}),t.addCultureInfo("dv-MV","default",{name:"dv-MV",englishName:"Divehi (Maldives)",nativeName:"ދިވެހިބަސް (ދިވެހި ރާއްޖެ)",language:"dv",isRTL:!0,numberFormat:{currency:{pattern:["n $-","n $"],symbol:"ރ."}},calendars:{standard:{name:"Hijri",days:{names:["އާދީއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"],namesAbbr:["އާދީއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"],namesShort:["އާ","ހޯ","އަ","ބު","ބު","ހު","ހޮ"]},months:{names:["މުޙައްރަމް","ޞަފަރު","ރަބީޢުލްއައްވަލް","ރަބީޢުލްއާޚިރު","ޖުމާދަލްއޫލާ","ޖުމާދަލްއާޚިރާ","ރަޖަބް","ޝަޢްބާން","ރަމަޟާން","ޝައްވާލް","ޛުލްޤަޢިދާ","ޛުލްޙިއްޖާ",""],namesAbbr:["މުޙައްރަމް","ޞަފަރު","ރަބީޢުލްއައްވަލް","ރަބީޢުލްއާޚިރު","ޖުމާދަލްއޫލާ","ޖުމާދަލްއާޚިރާ","ރަޖަބް","ޝަޢްބާން","ރަމަޟާން","ޝައްވާލް","ޛުލްޤަޢިދާ","ޛުލްޙިއްޖާ",""]},AM:["މކ","މކ","މކ"],PM:["މފ","މފ","މފ"],eras:[{name:"ހިޖްރީ",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd/MM/yyyy HH:mm",F:"dd/MM/yyyy HH:mm:ss",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_Localized:{days:{names:["އާދީއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"],namesAbbr:["އާދީއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"],namesShort:["އާ","ހޯ","އަ","ބު","ބު","ހު","ހޮ"]},months:{names:["ޖަނަވަރީ","ފެބްރުއަރީ","މާޗް","އޭޕްރިލް","މެއި","ޖޫން","ޖުލައި","އޯގަސްޓް","ސެޕްޓެމްބަރ","އޮކްޓޯބަރ","ނޮވެމްބަރ","ޑިސެމްބަރ",""],namesAbbr:["ޖަނަވަރީ","ފެބްރުއަރީ","މާޗް","އޭޕްރިލް","މެއި","ޖޫން","ޖުލައި","އޯގަސްޓް","ސެޕްޓެމްބަރ","އޮކްޓޯބަރ","ނޮވެމްބަރ","ޑިސެމްބަރ",""]},AM:["މކ","މކ","މކ"],PM:["މފ","މފ","މފ"],eras:[{name:"މީލާދީ",start:null,offset:0}],patterns:{d:"dd/MM/yy",D:"ddd, yyyy MMMM dd",t:"HH:mm",T:"HH:mm:ss",f:"ddd, yyyy MMMM dd HH:mm",F:"ddd, yyyy MMMM dd HH:mm:ss",Y:"yyyy, MMMM"}}}}),t.addCultureInfo("ha-Latn-NG","default",{name:"ha-Latn-NG",englishName:"Hausa (Latin, Nigeria)",nativeName:"Hausa (Nigeria)",language:"ha-Latn",numberFormat:{currency:{pattern:["$-n","$ n"],symbol:"N"}},calendars:{standard:{days:{names:["Lahadi","Litinin","Talata","Laraba","Alhamis","Juma'a","Asabar"],namesAbbr:["Lah","Lit","Tal","Lar","Alh","Jum","Asa"],namesShort:["L","L","T","L","A","J","A"]},months:{names:["Januwaru","Febreru","Maris","Afrilu","Mayu","Yuni","Yuli","Agusta","Satumba","Oktocba","Nuwamba","Disamba",""],namesAbbr:["Jan","Feb","Mar","Afr","May","Yun","Yul","Agu","Sat","Okt","Nuw","Dis",""]},AM:["Safe","safe","SAFE"],PM:["Yamma","yamma","YAMMA"],eras:[{name:"AD",start:null,offset:0}],patterns:{d:"d/M/yyyy"}}}}),t.addCultureInfo("yo-NG","default",{name:"yo-NG",englishName:"Yoruba (Nigeria)",nativeName:"Yoruba (Nigeria)",language:"yo",numberFormat:{currency:{pattern:["$-n","$ n"],symbol:"N"}},calendars:{standard:{days:{names:["Aiku","Aje","Isegun","Ojo'ru","Ojo'bo","Eti","Abameta"],namesAbbr:["Aik","Aje","Ise","Ojo","Ojo","Eti","Aba"],namesShort:["A","A","I","O","O","E","A"]},months:{names:["Osu kinni","Osu keji","Osu keta","Osu kerin","Osu karun","Osu kefa","Osu keje","Osu kejo","Osu kesan","Osu kewa","Osu kokanla","Osu keresi",""],namesAbbr:["kin.","kej.","ket.","ker.","kar.","kef.","kej.","kej.","kes.","kew.","kok.","ker.",""]},AM:["Owuro","owuro","OWURO"],PM:["Ale","ale","ALE"],eras:[{name:"AD",start:null,offset:0}],patterns:{d:"d/M/yyyy"}}}}),t.addCultureInfo("quz-BO","default",{name:"quz-BO",englishName:"Quechua (Bolivia)",nativeName:"runasimi (Qullasuyu)",language:"quz",numberFormat:{",":".",".":",",percent:{pattern:["-%n","%n"],",":".",".":","},currency:{pattern:["($ n)","$ n"],",":".",".":",",symbol:"$b"}},calendars:{standard:{days:{names:["intichaw","killachaw","atipachaw","quyllurchaw","Ch' askachaw","Illapachaw","k'uychichaw"],namesAbbr:["int","kil","ati","quy","Ch'","Ill","k'u"],namesShort:["d","k","a","m","h","b","k"]},months:{names:["Qulla puquy","Hatun puquy","Pauqar waray","ayriwa","Aymuray","Inti raymi","Anta Sitwa","Qhapaq Sitwa","Uma raymi","Kantaray","Ayamarq'a","Kapaq Raymi",""],namesAbbr:["Qul","Hat","Pau","ayr","Aym","Int","Ant","Qha","Uma","Kan","Aya","Kap",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("nso-ZA","default",{name:"nso-ZA",englishName:"Sesotho sa Leboa (South Africa)",nativeName:"Sesotho sa Leboa (Afrika Borwa)",language:"nso",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$-n","$ n"],symbol:"R"}},calendars:{standard:{days:{names:["Lamorena","Mošupologo","Labobedi","Laboraro","Labone","Labohlano","Mokibelo"],namesAbbr:["Lam","Moš","Lbb","Lbr","Lbn","Lbh","Mok"],namesShort:["L","M","L","L","L","L","M"]},months:{names:["Pherekgong","Hlakola","Mopitlo","Moranang","Mosegamanye","Ngoatobošego","Phuphu","Phato","Lewedi","Diphalana","Dibatsela","Manthole",""],namesAbbr:["Pher","Hlak","Mop","Mor","Mos","Ngwat","Phup","Phat","Lew","Dip","Dib","Man",""]},patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ba-RU","default",{name:"ba-RU",englishName:"Bashkir (Russia)",nativeName:"Башҡорт (Россия)",language:"ba",numberFormat:{",":" ",".":",",groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0],",":" ",".":","},currency:{pattern:["-n $","n $"],groupSizes:[3,0],",":" ",".":",",symbol:"һ."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Йәкшәмбе","Дүшәмбе","Шишәмбе","Шаршамбы","Кесаҙна","Йома","Шәмбе"],namesAbbr:["Йш","Дш","Шш","Шр","Кс","Йм","Шб"],namesShort:["Йш","Дш","Шш","Шр","Кс","Йм","Шб"]},months:{names:["ғинуар","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь",""],namesAbbr:["ғин","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"d MMMM yyyy 'й'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy 'й' H:mm",F:"d MMMM yyyy 'й' H:mm:ss",Y:"MMMM yyyy"}}}}),t.addCultureInfo("lb-LU","default",{name:"lb-LU",englishName:"Luxembourgish (Luxembourg)",nativeName:"Lëtzebuergesch (Luxembourg)",language:"lb",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Sonndeg","Méindeg","Dënschdeg","Mëttwoch","Donneschdeg","Freideg","Samschdeg"],namesAbbr:["Son","Méi","Dën","Mët","Don","Fre","Sam"],namesShort:["So","Mé","Dë","Më","Do","Fr","Sa"]},months:{names:["Januar","Februar","Mäerz","Abrëll","Mee","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mäe","Abr","Mee","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("kl-GL","default",{name:"kl-GL",englishName:"Greenlandic (Greenland)",nativeName:"kalaallisut (Kalaallit Nunaat)",language:"kl",numberFormat:{",":".",".":",",groupSizes:[3,0],percent:{groupSizes:[3,0],",":".",".":","},currency:{pattern:["$ -n","$ n"],groupSizes:[3,0],",":".",".":",",symbol:"kr."}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["sapaat","ataasinngorneq","marlunngorneq","pingasunngorneq","sisamanngorneq","tallimanngorneq","arfininngorneq"],namesAbbr:["sap","ata","mar","ping","sis","tal","arf"],namesShort:["sa","at","ma","pi","si","ta","ar"]},months:{names:["januari","februari","martsi","apriili","maaji","juni","juli","aggusti","septembari","oktobari","novembari","decembari",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ig-NG","default",{name:"ig-NG",englishName:"Igbo (Nigeria)",nativeName:"Igbo (Nigeria)",language:"ig",numberFormat:{currency:{pattern:["$-n","$ n"],symbol:"N"}},calendars:{standard:{days:{names:["Aiku","Aje","Isegun","Ojo'ru","Ojo'bo","Eti","Abameta"],namesAbbr:["Aik","Aje","Ise","Ojo","Ojo","Eti","Aba"],namesShort:["A","A","I","O","O","E","A"]},months:{names:["Onwa mbu","Onwa ibua","Onwa ato","Onwa ano","Onwa ise","Onwa isi","Onwa asa","Onwa asato","Onwa itolu","Onwa iri","Onwa iri n'ofu","Onwa iri n'ibua",""],namesAbbr:["mbu.","ibu.","ato.","ano.","ise","isi","asa","asa.","ito.","iri.","n'of.","n'ib.",""]},AM:["Ututu","ututu","UTUTU"],PM:["Efifie","efifie","EFIFIE"],eras:[{name:"AD",start:null,offset:0}],patterns:{d:"d/M/yyyy"}}}}),t.addCultureInfo("ii-CN","default",{name:"ii-CN",englishName:"Yi (PRC)",nativeName:"ꆈꌠꁱꂷ (ꍏꉸꏓꂱꇭꉼꇩ)",language:"ii",numberFormat:{groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{pattern:["$-n","$n"],symbol:"¥"}},calendars:{standard:{firstDay:1,days:{names:["ꑭꆏꑍ","ꆏꊂ꒔","ꆏꊂꑍ","ꆏꊂꌕ","ꆏꊂꇖ","ꆏꊂꉬ","ꆏꊂꃘ"],namesAbbr:["ꑭꆏ","ꆏ꒔","ꆏꑍ","ꆏꌕ","ꆏꇖ","ꆏꉬ","ꆏꃘ"],namesShort:["ꆏ","꒔","ꑍ","ꌕ","ꇖ","ꉬ","ꃘ"]},months:{names:["ꋍꆪ","ꑍꆪ","ꌕꆪ","ꇖꆪ","ꉬꆪ","ꃘꆪ","ꏃꆪ","ꉆꆪ","ꈬꆪ","ꊰꆪ","ꊯꊪꆪ","ꊰꑋꆪ",""],namesAbbr:["ꋍꆪ","ꑍꆪ","ꌕꆪ","ꇖꆪ","ꉬꆪ","ꃘꆪ","ꏃꆪ","ꉆꆪ","ꈬꆪ","ꊰꆪ","ꊯꊪꆪ","ꊰꑋꆪ",""]},AM:["ꂵꆪꈌꈐ","ꂵꆪꈌꈐ","ꂵꆪꈌꈐ"],PM:["ꂵꆪꈌꉈ","ꂵꆪꈌꉈ","ꂵꆪꈌꉈ"],eras:[{name:"ꇬꑼ",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'ꈎ' M'ꆪ' d'ꑍ'",t:"tt h:mm",T:"H:mm:ss",f:"yyyy'ꈎ' M'ꆪ' d'ꑍ' tt h:mm",F:"yyyy'ꈎ' M'ꆪ' d'ꑍ' H:mm:ss",M:"M'ꆪ' d'ꑍ'",Y:"yyyy'ꈎ' M'ꆪ'"}}}}),t.addCultureInfo("arn-CL","default",{name:"arn-CL",englishName:"Mapudungun (Chile)",nativeName:"Mapudungun (Chile)",language:"arn",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":","}},calendars:{standard:{"/":"-",days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd-MM-yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("moh-CA","default",{name:"moh-CA",englishName:"Mohawk (Mohawk)",nativeName:"Kanien'kéha",language:"moh",numberFormat:{groupSizes:[3,0],percent:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["Awentatokentì:ke","Awentataón'ke","Ratironhia'kehronòn:ke","Soséhne","Okaristiiáhne","Ronwaia'tanentaktonhne","Entákta"],namesShort:["S","M","T","W","T","F","S"]},months:{names:["Tsothohrkó:Wa","Enniska","Enniskó:Wa","Onerahtókha","Onerahtohkó:Wa","Ohiari:Ha","Ohiarihkó:Wa","Seskéha","Seskehkó:Wa","Kenténha","Kentenhkó:Wa","Tsothóhrha",""]}}}}),t.addCultureInfo("br-FR","default",{name:"br-FR",englishName:"Breton (France)",nativeName:"brezhoneg (Frañs)",language:"br",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Sul","Lun","Meurzh","Merc'her","Yaou","Gwener","Sadorn"],namesAbbr:["Sul","Lun","Meu.","Mer.","Yaou","Gwe.","Sad."],namesShort:["Su","Lu","Mz","Mc","Ya","Gw","Sa"]},months:{names:["Genver","C'hwevrer","Meurzh","Ebrel","Mae","Mezheven","Gouere","Eost","Gwengolo","Here","Du","Kerzu",""],namesAbbr:["Gen.","C'hwe.","Meur.","Ebr.","Mae","Mezh.","Goue.","Eost","Gwen.","Here","Du","Kzu",""]},AM:null,PM:null,eras:[{name:"g. J.-K.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ug-CN","default",{name:"ug-CN",englishName:"Uyghur (PRC)",nativeName:"ئۇيغۇرچە (جۇڭخۇا خەلق جۇمھۇرىيىتى)",language:"ug",isRTL:!0,numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$n"],symbol:"¥"}},calendars:{standard:{"/":"-",days:{names:["يەكشەنبە","دۈشەنبە","سەيشەنبە","چارشەنبە","پەيشەنبە","جۈمە","شەنبە"],namesAbbr:["يە","دۈ","سە","چا","پە","جۈ","شە"],namesShort:["ي","د","س","چ","پ","ج","ش"]},months:{names:["1-ئاي","2-ئاي","3-ئاي","4-ئاي","5-ئاي","6-ئاي","7-ئاي","8-ئاي","9-ئاي","10-ئاي","11-ئاي","12-ئاي",""],namesAbbr:["1-ئاي","2-ئاي","3-ئاي","4-ئاي","5-ئاي","6-ئاي","7-ئاي","8-ئاي","9-ئاي","10-ئاي","11-ئاي","12-ئاي",""]},AM:["چۈشتىن بۇرۇن","چۈشتىن بۇرۇن","چۈشتىن بۇرۇن"],PM:["چۈشتىن كېيىن","چۈشتىن كېيىن","چۈشتىن كېيىن"],eras:[{name:"مىلادى",start:null,offset:0}],patterns:{d:"yyyy-M-d",D:"yyyy-'يىلى' MMMM d-'كۈنى،'",t:"H:mm",T:"H:mm:ss",f:"yyyy-'يىلى' MMMM d-'كۈنى،' H:mm",F:"yyyy-'يىلى' MMMM d-'كۈنى،' H:mm:ss",M:"MMMM d'-كۈنى'",Y:"yyyy-'يىلى' MMMM"}}}}),t.addCultureInfo("mi-NZ","default",{name:"mi-NZ",englishName:"Maori (New Zealand)",nativeName:"Reo Māori (Aotearoa)",language:"mi",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["-$n","$n"]}},calendars:{standard:{firstDay:1,days:{names:["Rātapu","Rāhina","Rātū","Rāapa","Rāpare","Rāmere","Rāhoroi"],namesAbbr:["Ta","Hi","Tū","Apa","Pa","Me","Ho"],namesShort:["Ta","Hi","Tū","Aa","Pa","Me","Ho"]},months:{names:["Kohi-tātea","Hui-tanguru","Poutū-te-rangi","Paenga-whāwhā","Haratua","Pipiri","Hōngongoi","Here-turi-kōkā","Mahuru","Whiringa-ā-nuku","Whiringa-ā-rangi","Hakihea",""],namesAbbr:["Kohi","Hui","Pou","Pae","Hara","Pipi","Hōngo","Here","Mahu","Nuku","Rangi","Haki",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],patterns:{d:"dd/MM/yyyy",D:"dddd, dd MMMM, yyyy",f:"dddd, dd MMMM, yyyy h:mm tt",F:"dddd, dd MMMM, yyyy h:mm:ss tt",M:"dd MMMM",Y:"MMMM, yy"}}}}),t.addCultureInfo("oc-FR","default",{name:"oc-FR",englishName:"Occitan (France)",nativeName:"Occitan (França)",language:"oc",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimenge","diluns","dimars","dimècres","dijòus","divendres","dissabte"],namesAbbr:["dim.","lun.","mar.","mèc.","jòu.","ven.","sab."],namesShort:["di","lu","ma","mè","jò","ve","sa"]},months:{names:["genier","febrier","març","abril","mai","junh","julh","agost","setembre","octobre","novembre","desembre",""],namesAbbr:["gen.","feb.","mar.","abr.","mai.","jun.","jul.","ag.","set.","oct.","nov.","des.",""]},monthsGenitive:{names:["de genier","de febrier","de març","d'abril","de mai","de junh","de julh","d'agost","de setembre","d'octobre","de novembre","de desembre",""],namesAbbr:["gen.","feb.","mar.","abr.","mai.","jun.","jul.","ag.","set.","oct.","nov.","des.",""]},AM:null,PM:null,eras:[{name:"après Jèsus-Crist",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd,' lo 'd MMMM' de 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd,' lo 'd MMMM' de 'yyyy HH:mm",F:"dddd,' lo 'd MMMM' de 'yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("co-FR","default",{name:"co-FR",englishName:"Corsican (France)",nativeName:"Corsu (France)",language:"co",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dumenica","luni","marti","mercuri","ghjovi","venderi","sabbatu"],namesAbbr:["dum.","lun.","mar.","mer.","ghj.","ven.","sab."],namesShort:["du","lu","ma","me","gh","ve","sa"]},months:{names:["ghjennaghju","ferraghju","marzu","aprile","maghju","ghjunghju","lugliu","aostu","settembre","ottobre","nuvembre","dicembre",""],namesAbbr:["ghje","ferr","marz","apri","magh","ghju","lugl","aost","sett","otto","nuve","dice",""]},AM:null,PM:null,eras:[{name:"dopu J-C",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("gsw-FR","default",{name:"gsw-FR",englishName:"Alsatian (France)",nativeName:"Elsässisch (Frànkrisch)",language:"gsw",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Sundàà","Mondàà","Dienschdàà","Mittwuch","Dunnerschdàà","Fridàà","Sàmschdàà"],namesAbbr:["Su.","Mo.","Di.","Mi.","Du.","Fr.","Sà."],namesShort:["Su","Mo","Di","Mi","Du","Fr","Sà"]},months:{names:["Jänner","Feverje","März","Àpril","Mai","Jüni","Jüli","Augscht","September","Oktower","Nowember","Dezember",""],namesAbbr:["Jän.","Fev.","März","Apr.","Mai","Jüni","Jüli","Aug.","Sept.","Okt.","Now.","Dez.",""]},AM:null,PM:null,eras:[{name:"Vor J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sah-RU","default",{name:"sah-RU",englishName:"Yakut (Russia)",nativeName:"саха (Россия)",language:"sah",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"с."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["баскыһыанньа","бэнидиэнньик","оптуорунньук","сэрэдэ","чэппиэр","бээтинсэ","субуота"],namesAbbr:["Бс","Бн","Оп","Ср","Чп","Бт","Сб"],namesShort:["Бс","Бн","Оп","Ср","Чп","Бт","Сб"]},months:{names:["Тохсунньу","Олунньу","Кулун тутар","Муус устар","Ыам ыйа","Бэс ыйа","От ыйа","Атырдьах ыйа","Балаҕан ыйа","Алтынньы","Сэтинньи","Ахсынньы",""],namesAbbr:["тхс","олн","кул","мст","ыам","бэс","отй","атр","блҕ","алт","стн","ахс",""]},monthsGenitive:{names:["тохсунньу","олунньу","кулун тутар","муус устар","ыам ыйын","бэс ыйын","от ыйын","атырдьах ыйын","балаҕан ыйын","алтынньы","сэтинньи","ахсынньы",""],namesAbbr:["тхс","олн","кул","мст","ыам","бэс","отй","атр","блҕ","алт","стн","ахс",""]},AM:null,PM:null,patterns:{d:"MM.dd.yyyy",D:"MMMM d yyyy 'с.'",t:"H:mm",T:"H:mm:ss",f:"MMMM d yyyy 'с.' H:mm",F:"MMMM d yyyy 'с.' H:mm:ss",Y:"MMMM yyyy 'с.'"}}}}),t.addCultureInfo("qut-GT","default",{name:"qut-GT",englishName:"K'iche (Guatemala)",nativeName:"K'iche (Guatemala)",language:"qut",numberFormat:{currency:{symbol:"Q"}},calendars:{standard:{days:{names:["juq'ij","kaq'ij","oxq'ij","kajq'ij","joq'ij","waqq'ij","wuqq'ij"],namesAbbr:["juq","kaq","oxq","kajq","joq","waqq","wuqq"],namesShort:["ju","ka","ox","ka","jo","wa","wu"]},months:{names:["nab'e ik'","ukab' ik'","rox ik'","ukaj ik'","uro' ik'","uwaq ik'","uwuq ik'","uwajxaq ik'","ub'elej ik'","ulaj ik'","ujulaj ik'","ukab'laj ik'",""],namesAbbr:["nab'e","ukab","rox","ukaj","uro","uwaq","uwuq","uwajxaq","ub'elej","ulaj","ujulaj","ukab'laj",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("rw-RW","default",{name:"rw-RW",englishName:"Kinyarwanda (Rwanda)",nativeName:"Kinyarwanda (Rwanda)",language:"rw",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["$-n","$ n"],",":" ",".":",",symbol:"RWF"}},calendars:{standard:{days:{names:["Ku wa mbere","Ku wa kabiri","Ku wa gatatu","Ku wa kane","Ku wa gatanu","Ku wa gatandatu","Ku cyumweru"],namesAbbr:["mbe.","kab.","gat.","kan.","gat.","gat.","cyu."],namesShort:["mb","ka","ga","ka","ga","ga","cy"]},months:{names:["Mutarama","Gashyantare","Werurwe","Mata","Gicurasi","Kamena","Nyakanga","Kanama","Nzeli","Ukwakira","Ugushyingo","Ukuboza",""],namesAbbr:["Mut","Gas","Wer","Mat","Gic","Kam","Nya","Kan","Nze","Ukwa","Ugu","Uku",""]},AM:["saa moya z.m.","saa moya z.m.","SAA MOYA Z.M."],PM:["saa moya z.n.","saa moya z.n.","SAA MOYA Z.N."],eras:[{name:"AD",start:null,offset:0}]}}}),t.addCultureInfo("wo-SN","default",{name:"wo-SN",englishName:"Wolof (Senegal)",nativeName:"Wolof (Sénégal)",language:"wo",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"XOF"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("prs-AF","default",{name:"prs-AF",englishName:"Dari (Afghanistan)",nativeName:"درى (افغانستان)",language:"prs",isRTL:!0,numberFormat:{pattern:["n-"],",":".",".":",",percent:{pattern:["%n-","%n"],",":".",".":","},currency:{pattern:["$n-","$n"],symbol:"؋"}},calendars:{standard:{name:"Hijri",firstDay:5,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["غ.م","غ.م","غ.م"],PM:["غ.و","غ.و","غ.و"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",f:"dd/MM/yyyy h:mm tt",F:"dd/MM/yyyy h:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_Localized:{firstDay:5,days:{names:["یکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],namesAbbr:["یکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],namesShort:["ی","د","س","چ","پ","ج","ش"]},months:{names:["سلواغه","كب","ورى","غويى","غبرګولى","چنګاښ","زمرى","وږى","تله","لړم","ليندۍ","مرغومى",""],namesAbbr:["سلواغه","كب","ورى","غويى","غبرګولى","چنګاښ","زمرى","وږى","تله","لړم","ليندۍ","مرغومى",""]},AM:["غ.م","غ.م","غ.م"],PM:["غ.و","غ.و","غ.و"],eras:[{name:"ل.ه",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy, dd, MMMM, dddd",f:"yyyy, dd, MMMM, dddd h:mm tt",F:"yyyy, dd, MMMM, dddd h:mm:ss tt",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("gd-GB","default",{name:"gd-GB",englishName:"Scottish Gaelic (United Kingdom)",nativeName:"Gàidhlig (An Rìoghachd Aonaichte)",language:"gd",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,days:{names:["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],namesAbbr:["Dòm","Lua","Mài","Cia","Ard","Hao","Sat"],namesShort:["D","L","M","C","A","H","S"]},months:{names:["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd",""],namesAbbr:["Fao","Gea","Màr","Gib","Cèi","Ògm","Iuc","Lùn","Sul","Dàm","Sam","Dùb",""]},AM:["m","m","M"],PM:["f","f","F"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-IQ","default",{name:"ar-IQ",englishName:"Arabic (Iraq)",nativeName:"العربية (العراق)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"د.ع.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("zh-CN","default",{name:"zh-CN",englishName:"Chinese (Simplified, PRC)",nativeName:"中文(中华人民共和国)",language:"zh-CHS",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$n"],symbol:"¥"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["周日","周一","周二","周三","周四","周五","周六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"公元",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("de-CH","default",{name:"de-CH",englishName:"German (Switzerland)",nativeName:"Deutsch (Schweiz)",language:"de",numberFormat:{",":"'",percent:{pattern:["-n%","n%"],",":"'"},currency:{pattern:["$-n","$ n"],",":"'",symbol:"Fr."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],namesAbbr:["So","Mo","Di","Mi","Do","Fr","Sa"],namesShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},months:{names:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd, d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d. MMMM yyyy HH:mm",F:"dddd, d. MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("en-GB","default",{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("es-MX","default",{name:"es-MX",englishName:"Spanish (Mexico)",nativeName:"Español (México)",language:"es",numberFormat:{currency:{pattern:["-$n","$n"]}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("fr-BE","default",{name:"fr-BE",englishName:"French (Belgium)",nativeName:"français (Belgique)",language:"fr",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"d/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("it-CH","default",{name:"it-CH",englishName:"Italian (Switzerland)",nativeName:"italiano (Svizzera)",language:"it",numberFormat:{",":"'",percent:{pattern:["-n%","n%"],",":"'"},currency:{pattern:["$-n","$ n"],",":"'",symbol:"fr."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],namesAbbr:["dom","lun","mar","mer","gio","ven","sab"],namesShort:["do","lu","ma","me","gi","ve","sa"]},months:{names:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],namesAbbr:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd, d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d. MMMM yyyy HH:mm",F:"dddd, d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("nl-BE","default",{name:"nl-BE",englishName:"Dutch (Belgium)",nativeName:"Nederlands (België)",language:"nl",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],namesAbbr:["zo","ma","di","wo","do","vr","za"],namesShort:["zo","ma","di","wo","do","vr","za"]},months:{names:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],namesAbbr:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d/MM/yyyy",D:"dddd d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd d MMMM yyyy H:mm",F:"dddd d MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("nn-NO","default",{name:"nn-NO",englishName:"Norwegian, Nynorsk (Norway)",nativeName:"norsk, nynorsk (Noreg)",language:"nn",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["søndag","måndag","tysdag","onsdag","torsdag","fredag","laurdag"],namesAbbr:["sø","må","ty","on","to","fr","la"],namesShort:["sø","må","ty","on","to","fr","la"]},months:{names:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("pt-PT","default",{name:"pt-PT",englishName:"Portuguese (Portugal)",nativeName:"português (Portugal)",language:"pt",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"],namesAbbr:["dom","seg","ter","qua","qui","sex","sáb"],namesShort:["D","S","T","Q","Q","S","S"]},months:{names:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro",""],namesAbbr:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd-MM-yyyy",D:"dddd, d' de 'MMMM' de 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d' de 'MMMM' de 'yyyy HH:mm",F:"dddd, d' de 'MMMM' de 'yyyy HH:mm:ss",M:"d/M",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("sr-Latn-CS","default",{name:"sr-Latn-CS",englishName:"Serbian (Latin, Serbia and Montenegro (Former))",nativeName:"srpski (Srbija i Crna Gora (Prethodno))",language:"sr-Latn",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Din."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sre","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,eras:[{name:"n.e.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sv-FI","default",{name:"sv-FI",englishName:"Swedish (Finland)",nativeName:"svenska (Finland)",language:"sv",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],namesAbbr:["sö","må","ti","on","to","fr","lö"],namesShort:["sö","må","ti","on","to","fr","lö"]},months:{names:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"'den 'd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"'den 'd MMMM yyyy HH:mm",F:"'den 'd MMMM yyyy HH:mm:ss",M:"'den 'd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("az-Cyrl-AZ","default",{name:"az-Cyrl-AZ",englishName:"Azeri (Cyrillic, Azerbaijan)",nativeName:"Азәрбајҹан (Азәрбајҹан)",language:"az-Cyrl",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"ман."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Базар","Базар ертәси","Чәршәнбә ахшамы","Чәршәнбә","Ҹүмә ахшамы","Ҹүмә","Шәнбә"],namesAbbr:["Б","Бе","Ча","Ч","Ҹа","Ҹ","Ш"],namesShort:["Б","Бе","Ча","Ч","Ҹа","Ҹ","Ш"]},months:{names:["Јанвар","Феврал","Март","Апрел","Мај","Ијун","Ијул","Август","Сентјабр","Октјабр","Нојабр","Декабр",""],namesAbbr:["Јан","Фев","Мар","Апр","Мај","Ијун","Ијул","Авг","Сен","Окт","Ноя","Дек",""]},monthsGenitive:{names:["јанвар","феврал","март","апрел","мај","ијун","ијул","август","сентјабр","октјабр","нојабр","декабр",""],namesAbbr:["Јан","Фев","Мар","Апр","мая","ијун","ијул","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("dsb-DE","default",{name:"dsb-DE",englishName:"Lower Sorbian (Germany)",nativeName:"dolnoserbšćina (Nimska)",language:"dsb",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":". ",firstDay:1,days:{names:["njeźela","ponjeźele","wałtora","srjoda","stwortk","pětk","sobota"],namesAbbr:["nje","pon","wał","srj","stw","pět","sob"],namesShort:["n","p","w","s","s","p","s"]},months:{names:["januar","februar","měrc","apryl","maj","junij","julij","awgust","september","oktober","nowember","december",""],namesAbbr:["jan","feb","měr","apr","maj","jun","jul","awg","sep","okt","now","dec",""]},monthsGenitive:{names:["januara","februara","měrca","apryla","maja","junija","julija","awgusta","septembra","oktobra","nowembra","decembra",""],namesAbbr:["jan","feb","měr","apr","maj","jun","jul","awg","sep","okt","now","dec",""]},AM:null,PM:null,eras:[{name:"po Chr.",start:null,offset:0}],patterns:{d:"d. M. yyyy",D:"dddd, 'dnja' d. MMMM yyyy",t:"H.mm 'goź.'",T:"H:mm:ss",f:"dddd, 'dnja' d. MMMM yyyy H.mm 'goź.'",F:"dddd, 'dnja' d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("se-SE","default",{name:"se-SE",englishName:"Sami, Northern (Sweden)",nativeName:"davvisámegiella (Ruoŧŧa)",language:"se",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kr"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["sotnabeaivi","mánnodat","disdat","gaskavahkku","duorastat","bearjadat","lávvardat"],namesAbbr:["sotn","mán","dis","gask","duor","bear","láv"],namesShort:["s","m","d","g","d","b","l"]},months:{names:["ođđajagemánnu","guovvamánnu","njukčamánnu","cuoŋománnu","miessemánnu","geassemánnu","suoidnemánnu","borgemánnu","čakčamánnu","golggotmánnu","skábmamánnu","juovlamánnu",""],namesAbbr:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov",""]},monthsGenitive:{names:["ođđajagimánu","guovvamánu","njukčamánu","cuoŋománu","miessemánu","geassemánu","suoidnemánu","borgemánu","čakčamánu","golggotmánu","skábmamánu","juovlamánu",""],namesAbbr:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ga-IE","default",{name:"ga-IE",englishName:"Irish (Ireland)",nativeName:"Gaeilge (Éire)",language:"ga",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Sathairn"],namesAbbr:["Domh","Luan","Máir","Céad","Déar","Aoi","Sath"],namesShort:["Do","Lu","Má","Cé","De","Ao","Sa"]},months:{names:["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Meitheamh","Iúil","Lúnasa","Meán Fómhair","Deireadh Fómhair","Samhain","Nollaig",""],namesAbbr:["Ean","Feabh","Már","Aib","Bealt","Meith","Iúil","Lún","M.Fómh","D.Fómh","Samh","Noll",""]},AM:["r.n.","r.n.","R.N."],PM:["i.n.","i.n.","I.N."],patterns:{d:"dd/MM/yyyy",D:"d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d MMMM yyyy HH:mm",F:"d MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ms-BN","default",{name:"ms-BN",englishName:"Malay (Brunei Darussalam)",nativeName:"Bahasa Melayu (Brunei Darussalam)",language:"ms",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{decimals:0,",":".",".":","}},calendars:{standard:{firstDay:1,days:{names:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],namesAbbr:["Ahad","Isnin","Sel","Rabu","Khamis","Jumaat","Sabtu"],namesShort:["A","I","S","R","K","J","S"]},months:{names:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember",""],namesAbbr:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogos","Sept","Okt","Nov","Dis",""]},AM:null,PM:null,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM yyyy H:mm",F:"dd MMMM yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("uz-Cyrl-UZ","default",{name:"uz-Cyrl-UZ",englishName:"Uzbek (Cyrillic, Uzbekistan)",nativeName:"Ўзбек (Ўзбекистон)",language:"uz-Cyrl",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"сўм"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["якшанба","душанба","сешанба","чоршанба","пайшанба","жума","шанба"],namesAbbr:["якш","дш","сш","чш","пш","ж","ш"],namesShort:["я","д","с","ч","п","ж","ш"]},months:{names:["Январ","Феврал","Март","Апрел","Май","Июн","Июл","Август","Сентябр","Октябр","Ноябр","Декабр",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},monthsGenitive:{names:["январ","феврал","март","апрел","май","июн","июл","август","сентябр","октябр","ноябр","декабр",""],namesAbbr:["Янв","Фев","Мар","Апр","мая","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"yyyy 'йил' d-MMMM",t:"HH:mm",T:"HH:mm:ss",f:"yyyy 'йил' d-MMMM HH:mm",F:"yyyy 'йил' d-MMMM HH:mm:ss",M:"d-MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("bn-BD","default",{name:"bn-BD",englishName:"Bengali (Bangladesh)",nativeName:"বাংলা (বাংলাদেশ)",language:"bn",numberFormat:{groupSizes:[3,2],percent:{pattern:["-%n","%n"],groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"৳"}},calendars:{standard:{"/":"-",":":".",firstDay:1,days:{names:["রবিবার","সোমবার","মঙ্গলবার","বুধবার","বৃহস্পতিবার","শুক্রবার","শনিবার"],namesAbbr:["রবি.","সোম.","মঙ্গল.","বুধ.","বৃহস্পতি.","শুক্র.","শনি."],namesShort:["র","স","ম","ব","ব","শ","শ"]},months:{names:["জানুয়ারী","ফেব্রুয়ারী","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগস্ট","সেপ্টেম্বর","অক্টোবর","নভেম্বর","ডিসেম্বর",""],namesAbbr:["জানু.","ফেব্রু.","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগ.","সেপ্টে.","অক্টো.","নভে.","ডিসে.",""]},AM:["পুর্বাহ্ন","পুর্বাহ্ন","পুর্বাহ্ন"],PM:["অপরাহ্ন","অপরাহ্ন","অপরাহ্ন"],patterns:{d:"dd-MM-yy",D:"dd MMMM yyyy",t:"HH.mm",T:"HH.mm.ss",f:"dd MMMM yyyy HH.mm",F:"dd MMMM yyyy HH.mm.ss",M:"dd MMMM"}}}}),t.addCultureInfo("mn-Mong-CN","default",{name:"mn-Mong-CN",englishName:"Mongolian (Traditional Mongolian, PRC)",nativeName:"ᠮᠤᠨᠭᠭᠤᠯ ᠬᠡᠯᠡ (ᠪᠦᠭᠦᠳᠡ ᠨᠠᠢᠷᠠᠮᠳᠠᠬᠤ ᠳᠤᠮᠳᠠᠳᠤ ᠠᠷᠠᠳ ᠣᠯᠣᠰ)",language:"mn-Mong",numberFormat:{groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{pattern:["$-n","$n"],groupSizes:[3,0],symbol:"¥"}},calendars:{standard:{firstDay:1,days:{names:["ᠭᠠᠷᠠᠭ ᠤᠨ ᠡᠳᠦᠷ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠨᠢᠭᠡᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠬᠣᠶᠠᠷ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠭᠤᠷᠪᠠᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠳᠥᠷᠪᠡᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠲᠠᠪᠤᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠵᠢᠷᠭᠤᠭᠠᠨ"],namesAbbr:["ᠭᠠᠷᠠᠭ ᠤᠨ ᠡᠳᠦᠷ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠨᠢᠭᠡᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠬᠣᠶᠠᠷ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠭᠤᠷᠪᠠᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠳᠥᠷᠪᠡᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠲᠠᠪᠤᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠵᠢᠷᠭᠤᠭᠠᠨ"],namesShort:["ᠡ‍","ᠨᠢ‍","ᠬᠣ‍","ᠭᠤ‍","ᠳᠥ‍","ᠲᠠ‍","ᠵᠢ‍"]},months:{names:["ᠨᠢᠭᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠬᠤᠶ᠋ᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠭᠤᠷᠪᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠦᠷᠪᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠠᠪᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠵᠢᠷᠭᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠤᠯᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠨᠠᠢᠮᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠶᠢᠰᠦᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠨ ᠨᠢᠭᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠨ ᠬᠤᠶ᠋ᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ",""],namesAbbr:["ᠨᠢᠭᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠬᠤᠶ᠋ᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠭᠤᠷᠪᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠦᠷᠪᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠠᠪᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠵᠢᠷᠭᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠤᠯᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠨᠠᠢᠮᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠶᠢᠰᠦᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠨ ᠨᠢᠭᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠨ ᠬᠤᠶ᠋ᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ",""]},AM:null,PM:null,eras:[{name:"ᠣᠨ ᠲᠣᠭᠠᠯᠠᠯ ᠤᠨ",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'ᠣᠨ ᠤ᠋' M'ᠰᠠᠷ᠎ᠠ  ᠢᠢᠨ 'd' ᠤ᠋ ᠡᠳᠦᠷ'",t:"H:mm",T:"H:mm:ss",f:"yyyy'ᠣᠨ ᠤ᠋' M'ᠰᠠᠷ᠎ᠠ  ᠢᠢᠨ 'd' ᠤ᠋ ᠡᠳᠦᠷ' H:mm",F:"yyyy'ᠣᠨ ᠤ᠋' M'ᠰᠠᠷ᠎ᠠ  ᠢᠢᠨ 'd' ᠤ᠋ ᠡᠳᠦᠷ' H:mm:ss",M:"M'ᠰᠠᠷ᠎ᠠ' d'ᠡᠳᠦᠷ'",Y:"yyyy'ᠣᠨ' M'ᠰᠠᠷ᠎ᠠ'"}}}}),t.addCultureInfo("iu-Latn-CA","default",{name:"iu-Latn-CA",englishName:"Inuktitut (Latin, Canada)",nativeName:"Inuktitut (Kanatami)",language:"iu-Latn",numberFormat:{groupSizes:[3,0],percent:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["Naattiinguja","Naggajjau","Aippiq","Pingatsiq","Sitammiq","Tallirmiq","Sivataarvik"],namesAbbr:["Nat","Nag","Aip","Pi","Sit","Tal","Siv"],namesShort:["N","N","A","P","S","T","S"]},months:{names:["Jaannuari","Viivvuari","Maatsi","Iipuri","Mai","Juuni","Julai","Aaggiisi","Sitipiri","Utupiri","Nuvipiri","Tisipiri",""],namesAbbr:["Jan","Viv","Mas","Ipu","Mai","Jun","Jul","Agi","Sii","Uut","Nuv","Tis",""]},patterns:{d:"d/MM/yyyy",D:"ddd, MMMM dd,yyyy",f:"ddd, MMMM dd,yyyy h:mm tt",F:"ddd, MMMM dd,yyyy h:mm:ss tt"}}}}),t.addCultureInfo("tzm-Latn-DZ","default",{name:"tzm-Latn-DZ",englishName:"Tamazight (Latin, Algeria)",nativeName:"Tamazight (Djazaïr)",language:"tzm-Latn",numberFormat:{pattern:["n-"],",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],symbol:"DZD"}},calendars:{standard:{"/":"-",firstDay:6,days:{names:["Acer","Arime","Aram","Ahad","Amhadh","Sem","Sedh"],namesAbbr:["Ace","Ari","Ara","Aha","Amh","Sem","Sed"],namesShort:["Ac","Ar","Ar","Ah","Am","Se","Se"]},months:{names:["Yenayer","Furar","Maghres","Yebrir","Mayu","Yunyu","Yulyu","Ghuct","Cutenber","Ktuber","Wambir","Dujanbir",""],namesAbbr:["Yen","Fur","Mag","Yeb","May","Yun","Yul","Ghu","Cut","Ktu","Wam","Duj",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"dd MMMM, yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM, yyyy H:mm",F:"dd MMMM, yyyy H:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("quz-EC","default",{name:"quz-EC",englishName:"Quechua (Ecuador)",nativeName:"runasimi (Ecuador)",language:"quz",numberFormat:{",":".",".":",",percent:{pattern:["-%n","%n"],",":".",".":","},currency:{pattern:["($ n)","$ n"],",":".",".":","}},calendars:{standard:{days:{names:["intichaw","killachaw","atipachaw","quyllurchaw","Ch' askachaw","Illapachaw","k'uychichaw"],namesAbbr:["int","kil","ati","quy","Ch'","Ill","k'u"],namesShort:["d","k","a","m","h","b","k"]},months:{names:["Qulla puquy","Hatun puquy","Pauqar waray","ayriwa","Aymuray","Inti raymi","Anta Sitwa","Qhapaq Sitwa","Uma raymi","Kantaray","Ayamarq'a","Kapaq Raymi",""],namesAbbr:["Qul","Hat","Pau","ayr","Aym","Int","Ant","Qha","Uma","Kan","Aya","Kap",""]},AM:null,PM:null,patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("ar-EG","default",{name:"ar-EG",englishName:"Arabic (Egypt)",nativeName:"العربية (مصر)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],decimals:3,percent:{decimals:3},currency:{pattern:["$n-","$ n"],symbol:"ج.م.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("zh-HK","default",{name:"zh-HK",englishName:"Chinese (Traditional, Hong Kong S.A.R.)",nativeName:"中文(香港特別行政區)",language:"zh-CHT",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{symbol:"HK$"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["週日","週一","週二","週三","週四","週五","週六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"公元",start:null,offset:0}],patterns:{d:"d/M/yyyy",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("de-AT","default",{name:"de-AT",englishName:"German (Austria)",nativeName:"Deutsch (Österreich)",language:"de",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],namesAbbr:["So","Mo","Di","Mi","Do","Fr","Sa"],namesShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},months:{names:["Jänner","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jän","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd, dd. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, dd. MMMM yyyy HH:mm",F:"dddd, dd. MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("en-AU","default",{name:"en-AU",englishName:"English (Australia)",nativeName:"English (Australia)",numberFormat:{currency:{pattern:["-$n","$n"]}},calendars:{standard:{firstDay:1,patterns:{d:"d/MM/yyyy",D:"dddd, d MMMM yyyy",f:"dddd, d MMMM yyyy h:mm tt",F:"dddd, d MMMM yyyy h:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("es-ES","default",{name:"es-ES",englishName:"Spanish (Spain, International Sort)",nativeName:"Español (España, alfabetización internacional)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("fr-CA","default",{name:"fr-CA",englishName:"French (Canada)",nativeName:"français (Canada)",language:"fr",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["(n $)","n $"],",":" ",".":","}},calendars:{standard:{"/":"-",days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"yyyy-MM-dd",D:"d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d MMMM yyyy HH:mm",F:"d MMMM yyyy HH:mm:ss",M:"d MMMM"}}}}),t.addCultureInfo("sr-Cyrl-CS","default",{name:"sr-Cyrl-CS",englishName:"Serbian (Cyrillic, Serbia and Montenegro (Former))",nativeName:"српски (Србија и Црна Гора (Претходно))",language:"sr-Cyrl",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Дин."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],namesAbbr:["нед","пон","уто","сре","чет","пет","суб"],namesShort:["не","по","ут","ср","че","пе","су"]},months:{names:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар",""],namesAbbr:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец",""]},AM:null,PM:null,eras:[{name:"н.е.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("se-FI","default",{name:"se-FI",englishName:"Sami, Northern (Finland)",nativeName:"davvisámegiella (Suopma)",language:"se",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sotnabeaivi","vuossárga","maŋŋebárga","gaskavahkku","duorastat","bearjadat","lávvardat"],namesAbbr:["sotn","vuos","maŋ","gask","duor","bear","láv"],namesShort:["s","m","d","g","d","b","l"]},months:{names:["ođđajagemánnu","guovvamánnu","njukčamánnu","cuoŋománnu","miessemánnu","geassemánnu","suoidnemánnu","borgemánnu","čakčamánnu","golggotmánnu","skábmamánnu","juovlamánnu",""],namesAbbr:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov",""]},monthsGenitive:{names:["ođđajagimánu","guovvamánu","njukčamánu","cuoŋománu","miessemánu","geassemánu","suoidnemánu","borgemánu","čakčamánu","golggotmánu","skábmamánu","juovlamánu",""],namesAbbr:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"MMMM d'. b. 'yyyy",t:"H:mm",T:"H:mm:ss",f:"MMMM d'. b. 'yyyy H:mm",F:"MMMM d'. b. 'yyyy H:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("quz-PE","default",{name:"quz-PE",englishName:"Quechua (Peru)",nativeName:"runasimi (Piruw)",language:"quz",numberFormat:{percent:{pattern:["-%n","%n"]},currency:{pattern:["$ -n","$ n"],symbol:"S/."}},calendars:{standard:{days:{names:["intichaw","killachaw","atipachaw","quyllurchaw","Ch' askachaw","Illapachaw","k'uychichaw"],namesAbbr:["int","kil","ati","quy","Ch'","Ill","k'u"],namesShort:["d","k","a","m","h","b","k"]},months:{names:["Qulla puquy","Hatun puquy","Pauqar waray","ayriwa","Aymuray","Inti raymi","Anta Sitwa","Qhapaq Sitwa","Uma raymi","Kantaray","Ayamarq'a","Kapaq Raymi",""],namesAbbr:["Qul","Hat","Pau","ayr","Aym","Int","Ant","Qha","Uma","Kan","Aya","Kap",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("ar-LY","default",{name:"ar-LY",englishName:"Arabic (Libya)",nativeName:"العربية (ليبيا)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],decimals:3,percent:{decimals:3},currency:{pattern:["$n-","$n"],decimals:3,symbol:"د.ل.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("zh-SG","default",{name:"zh-SG",englishName:"Chinese (Simplified, Singapore)",nativeName:"中文(新加坡)",language:"zh-CHS",numberFormat:{percent:{pattern:["-n%","n%"]}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["周日","周一","周二","周三","周四","周五","周六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},patterns:{d:"d/M/yyyy",D:"yyyy'年'M'月'd'日'",t:"tt h:mm",T:"tt h:mm:ss",f:"yyyy'年'M'月'd'日' tt h:mm",F:"yyyy'年'M'月'd'日' tt h:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("de-LU","default",{name:"de-LU",englishName:"German (Luxembourg)",nativeName:"Deutsch (Luxemburg)",language:"de",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],namesAbbr:["So","Mo","Di","Mi","Do","Fr","Sa"],namesShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},months:{names:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd, d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d. MMMM yyyy HH:mm",F:"dddd, d. MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("en-CA","default",{name:"en-CA",englishName:"English (Canada)",nativeName:"English (Canada)",numberFormat:{currency:{pattern:["-$n","$n"]}},calendars:{standard:{patterns:{d:"dd/MM/yyyy",D:"MMMM-dd-yy",f:"MMMM-dd-yy h:mm tt",F:"MMMM-dd-yy h:mm:ss tt"}}}}),t.addCultureInfo("es-GT","default",{name:"es-GT",englishName:"Spanish (Guatemala)",nativeName:"Español (Guatemala)",language:"es",numberFormat:{currency:{symbol:"Q"}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("fr-CH","default",{name:"fr-CH",englishName:"French (Switzerland)",nativeName:"français (Suisse)",language:"fr",numberFormat:{",":"'",percent:{",":"'"},currency:{pattern:["$-n","$ n"],",":"'",symbol:"fr."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("hr-BA","default",{name:"hr-BA",englishName:"Croatian (Latin, Bosnia and Herzegovina)",nativeName:"hrvatski (Bosna i Hercegovina)",language:"hr",numberFormat:{pattern:["- n"],",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"KM"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sri","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["siječanj","veljača","ožujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac",""],namesAbbr:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""]},monthsGenitive:{names:["siječnja","veljače","ožujka","travnja","svibnja","lipnja","srpnja","kolovoza","rujna","listopada","studenog","prosinca",""],namesAbbr:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy.",D:"d. MMMM yyyy.",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy. H:mm",F:"d. MMMM yyyy. H:mm:ss",M:"d. MMMM"}}}}),t.addCultureInfo("smj-NO","default",{name:"smj-NO",englishName:"Sami, Lule (Norway)",nativeName:"julevusámegiella (Vuodna)",language:"smj",numberFormat:{",":" ",".":",",percent:{pattern:["-%n","%n"],",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["sådnåbiejvve","mánnodahka","dijstahka","gasskavahkko","duorastahka","bierjjedahka","lávvodahka"],namesAbbr:["såd","mán","dis","gas","duor","bier","láv"],namesShort:["s","m","d","g","d","b","l"]},months:{names:["ådåjakmánno","guovvamánno","sjnjuktjamánno","vuoratjismánno","moarmesmánno","biehtsemánno","sjnjilltjamánno","bårggemánno","ragátmánno","gålgådismánno","basádismánno","javllamánno",""],namesAbbr:["ådåj","guov","snju","vuor","moar","bieh","snji","bårg","ragá","gålg","basá","javl",""]},monthsGenitive:{names:["ådåjakmáno","guovvamáno","sjnjuktjamáno","vuoratjismáno","moarmesmáno","biehtsemáno","sjnjilltjamáno","bårggemáno","ragátmáno","gålgådismáno","basádismáno","javllamáno",""],namesAbbr:["ådåj","guov","snju","vuor","moar","bieh","snji","bårg","ragá","gålg","basá","javl",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-DZ","default",{name:"ar-DZ",englishName:"Arabic (Algeria)",nativeName:"العربية (الجزائر)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"د.ج.‏"}},calendars:{standard:{"/":"-",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM, yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM, yyyy H:mm",F:"dd MMMM, yyyy H:mm:ss",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"H:mm",T:"H:mm:ss",f:"dd/MM/yyyy H:mm",F:"dd/MM/yyyy H:mm:ss",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"H:mm",T:"H:mm:ss",f:"dd/MMMM/yyyy H:mm",F:"dd/MMMM/yyyy H:mm:ss",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss"}}}}),t.addCultureInfo("zh-MO","default",{name:"zh-MO",englishName:"Chinese (Traditional, Macao S.A.R.)",nativeName:"中文(澳門特別行政區)",language:"zh-CHT",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{symbol:"MOP"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["週日","週一","週二","週三","週四","週五","週六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"公元",start:null,offset:0}],patterns:{d:"d/M/yyyy",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("de-LI","default",{name:"de-LI",englishName:"German (Liechtenstein)",nativeName:"Deutsch (Liechtenstein)",language:"de",numberFormat:{",":"'",percent:{pattern:["-n%","n%"],",":"'"},currency:{pattern:["$-n","$ n"],",":"'",symbol:"CHF"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],namesAbbr:["So","Mo","Di","Mi","Do","Fr","Sa"],namesShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},months:{names:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd, d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d. MMMM yyyy HH:mm",F:"dddd, d. MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("en-NZ","default",{name:"en-NZ",englishName:"English (New Zealand)",nativeName:"English (New Zealand)",numberFormat:{currency:{pattern:["-$n","$n"]}},calendars:{standard:{firstDay:1,AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],patterns:{d:"d/MM/yyyy",D:"dddd, d MMMM yyyy",f:"dddd, d MMMM yyyy h:mm tt",F:"dddd, d MMMM yyyy h:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("es-CR","default",{name:"es-CR",englishName:"Spanish (Costa Rica)",nativeName:"Español (Costa Rica)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{",":".",".":",",symbol:"₡"}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("fr-LU","default",{name:"fr-LU",englishName:"French (Luxembourg)",nativeName:"français (Luxembourg)",language:"fr",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("bs-Latn-BA","default",{name:"bs-Latn-BA",englishName:"Bosnian (Latin, Bosnia and Herzegovina)",nativeName:"bosanski (Bosna i Hercegovina)",language:"bs-Latn",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"KM"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sri","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","juni","juli","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("smj-SE","default",{name:"smj-SE",englishName:"Sami, Lule (Sweden)",nativeName:"julevusámegiella (Svierik)",language:"smj",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kr"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ájllek","mánnodahka","dijstahka","gasskavahkko","duorastahka","bierjjedahka","lávvodahka"],namesAbbr:["ájl","mán","dis","gas","duor","bier","láv"],namesShort:["á","m","d","g","d","b","l"]},months:{names:["ådåjakmánno","guovvamánno","sjnjuktjamánno","vuoratjismánno","moarmesmánno","biehtsemánno","sjnjilltjamánno","bårggemánno","ragátmánno","gålgådismánno","basádismánno","javllamánno",""],namesAbbr:["ådåj","guov","snju","vuor","moar","bieh","snji","bårg","ragá","gålg","basá","javl",""]},monthsGenitive:{names:["ådåjakmáno","guovvamáno","sjnjuktjamáno","vuoratjismáno","moarmesmáno","biehtsemáno","sjnjilltjamáno","bårggemáno","ragátmáno","gålgådismáno","basádismáno","javllamáno",""],namesAbbr:["ådåj","guov","snju","vuor","moar","bieh","snji","bårg","ragá","gålg","basá","javl",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-MA","default",{name:"ar-MA",englishName:"Arabic (Morocco)",nativeName:"العربية (المملكة المغربية)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"د.م.‏"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","ماي","يونيو","يوليوز","غشت","شتنبر","أكتوبر","نونبر","دجنبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","ماي","يونيو","يوليوز","غشت","شتنبر","أكتوبر","نونبر","دجنبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM, yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM, yyyy H:mm",F:"dd MMMM, yyyy H:mm:ss",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"H:mm",T:"H:mm:ss",f:"dd/MM/yyyy H:mm",F:"dd/MM/yyyy H:mm:ss",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},UmAlQura:{name:"UmAlQura",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"H:mm",T:"H:mm:ss",f:"dd/MMMM/yyyy H:mm",F:"dd/MMMM/yyyy H:mm:ss",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss"}}}}),t.addCultureInfo("en-IE","default",{name:"en-IE",englishName:"English (Ireland)",nativeName:"English (Ireland)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"€"}},calendars:{standard:{firstDay:1,AM:null,PM:null,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("es-PA","default",{name:"es-PA",englishName:"Spanish (Panama)",nativeName:"Español (Panamá)",language:"es",numberFormat:{currency:{pattern:["($ n)","$ n"],symbol:"B/."}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("fr-MC","default",{name:"fr-MC",englishName:"French (Monaco)",nativeName:"français (Principauté de Monaco)",language:"fr",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sr-Latn-BA","default",{name:"sr-Latn-BA",englishName:"Serbian (Latin, Bosnia and Herzegovina)",nativeName:"srpski (Bosna i Hercegovina)",language:"sr-Latn",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"KM"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sre","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,eras:[{name:"n.e.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sma-NO","default",{name:"sma-NO",englishName:"Sami, Southern (Norway)",nativeName:"åarjelsaemiengiele (Nöörje)",language:"sma",numberFormat:{",":" ",".":",",percent:{pattern:["-%n","%n"],",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["aejlege","måanta","dæjsta","gaskevåhkoe","duarsta","bearjadahke","laavvardahke"],namesAbbr:["aej","måa","dæj","gask","duar","bearj","laav"],namesShort:["a","m","d","g","d","b","l"]},months:{names:["tsïengele","goevte","njoktje","voerhtje","suehpede","ruffie","snjaltje","mïetske","skïerede","golke","rahka","goeve",""],namesAbbr:["tsïen","goevt","njok","voer","sueh","ruff","snja","mïet","skïer","golk","rahk","goev",""]},monthsGenitive:{names:["tsïengelen","goevten","njoktjen","voerhtjen","suehpeden","ruffien","snjaltjen","mïetsken","skïereden","golken","rahkan","goeven",""],namesAbbr:["tsïen","goevt","njok","voer","sueh","ruff","snja","mïet","skïer","golk","rahk","goev",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-TN","default",{name:"ar-TN",englishName:"Arabic (Tunisia)",nativeName:"العربية (تونس)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],decimals:3,percent:{decimals:3},currency:{pattern:["$n-","$ n"],decimals:3,symbol:"د.ت.‏"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd-MM-yyyy",D:"dd MMMM, yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM, yyyy H:mm",F:"dd MMMM, yyyy H:mm:ss",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"H:mm",T:"H:mm:ss",f:"dd/MM/yyyy H:mm",F:"dd/MM/yyyy H:mm:ss",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},UmAlQura:{name:"UmAlQura",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"H:mm",T:"H:mm:ss",f:"dd/MMMM/yyyy H:mm",F:"dd/MMMM/yyyy H:mm:ss",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, MMMM dd, yyyy H:mm",F:"dddd, MMMM dd, yyyy H:mm:ss"}}}}),t.addCultureInfo("en-ZA","default",{name:"en-ZA",englishName:"English (South Africa)",nativeName:"English (South Africa)",numberFormat:{",":" ",percent:{pattern:["-n%","n%"],",":" "},currency:{pattern:["$-n","$ n"],",":" ",".":",",symbol:"R"}},calendars:{standard:{patterns:{d:"yyyy/MM/dd",D:"dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM yyyy hh:mm tt",F:"dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("es-DO","default",{name:"es-DO",englishName:"Spanish (Dominican Republic)",nativeName:"Español (República Dominicana)",language:"es",numberFormat:{currency:{symbol:"RD$"}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("sr-Cyrl-BA","default",{name:"sr-Cyrl-BA",englishName:"Serbian (Cyrillic, Bosnia and Herzegovina)",nativeName:"српски (Босна и Херцеговина)",language:"sr-Cyrl",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"КМ"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],namesAbbr:["нед","пон","уто","сре","чет","пет","суб"],namesShort:["н","п","у","с","ч","п","с"]},months:{names:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар",""],namesAbbr:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец",""]},AM:null,PM:null,eras:[{name:"н.е.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM"}}}}),t.addCultureInfo("sma-SE","default",{name:"sma-SE",englishName:"Sami, Southern (Sweden)",nativeName:"åarjelsaemiengiele (Sveerje)",language:"sma",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kr"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["aejlege","måanta","dæjsta","gaskevåhkoe","duarsta","bearjadahke","laavvardahke"],namesAbbr:["aej","måa","dæj","gask","duar","bearj","laav"],namesShort:["a","m","d","g","d","b","l"]},months:{names:["tsïengele","goevte","njoktje","voerhtje","suehpede","ruffie","snjaltje","mïetske","skïerede","golke","rahka","goeve",""],namesAbbr:["tsïen","goevt","njok","voer","sueh","ruff","snja","mïet","skïer","golk","rahk","goev",""]},monthsGenitive:{names:["tsïengelen","goevten","njoktjen","voerhtjen","suehpeden","ruffien","snjaltjen","mïetsken","skïereden","golken","rahkan","goeven",""],namesAbbr:["tsïen","goevt","njok","voer","sueh","ruff","snja","mïet","skïer","golk","rahk","goev",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-OM","default",{name:"ar-OM",englishName:"Arabic (Oman)",nativeName:"العربية (عمان)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],decimals:3,symbol:"ر.ع.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("en-JM","default",{name:"en-JM",englishName:"English (Jamaica)",nativeName:"English (Jamaica)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"J$"}},calendars:{standard:{patterns:{d:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("es-VE","default",{name:"es-VE",englishName:"Spanish (Bolivarian Republic of Venezuela)",nativeName:"Español (Republica Bolivariana de Venezuela)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$ -n","$ n"],",":".",".":",",symbol:"Bs. F."}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("bs-Cyrl-BA","default",{name:"bs-Cyrl-BA",englishName:"Bosnian (Cyrillic, Bosnia and Herzegovina)",nativeName:"босански (Босна и Херцеговина)",language:"bs-Cyrl",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"КМ"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недјеља","понедјељак","уторак","сриједа","четвртак","петак","субота"],namesAbbr:["нед","пон","уто","сре","чет","пет","суб"],namesShort:["н","п","у","с","ч","п","с"]},months:{names:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар",""],namesAbbr:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец",""]},AM:null,PM:null,eras:[{name:"н.е.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM"}}}}),t.addCultureInfo("sms-FI","default",{name:"sms-FI",englishName:"Sami, Skolt (Finland)",nativeName:"sääm´ǩiõll (Lää´ddjânnam)",language:"sms",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["pâ´sspei´vv","vuõssargg","mââibargg","seärad","nelljdpei´vv","piâtnâc","sue´vet"],namesAbbr:["pâ","vu","mâ","se","ne","pi","su"],namesShort:["p","v","m","s","n","p","s"]},months:{names:["ođđee´jjmään","tä´lvvmään","pâ´zzlâšttammään","njuhččmään","vue´ssmään","ǩie´ssmään","suei´nnmään","på´rǧǧmään","čõhččmään","kålggmään","skamm´mään","rosttovmään",""],namesAbbr:["ođjm","tä´lvv","pâzl","njuh","vue","ǩie","suei","på´r","čõh","kålg","ska","rost",""]},monthsGenitive:{names:["ođđee´jjmannu","tä´lvvmannu","pâ´zzlâšttammannu","njuhččmannu","vue´ssmannu","ǩie´ssmannu","suei´nnmannu","på´rǧǧmannu","čõhččmannu","kålggmannu","skamm´mannu","rosttovmannu",""],namesAbbr:["ođjm","tä´lvv","pâzl","njuh","vue","ǩie","suei","på´r","čõh","kålg","ska","rost",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"MMMM d'. p. 'yyyy",t:"H:mm",T:"H:mm:ss",f:"MMMM d'. p. 'yyyy H:mm",F:"MMMM d'. p. 'yyyy H:mm:ss",M:"MMMM d'. p. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-YE","default",{name:"ar-YE",englishName:"Arabic (Yemen)",nativeName:"العربية (اليمن)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"ر.ي.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("en-029","default",{name:"en-029",englishName:"English (Caribbean)",nativeName:"English (Caribbean)",numberFormat:{currency:{pattern:["-$n","$n"]}},calendars:{standard:{firstDay:1,patterns:{d:"MM/dd/yyyy"}}}}),t.addCultureInfo("es-CO","default",{name:"es-CO",englishName:"Spanish (Colombia)",nativeName:"Español (Colombia)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["($ n)","$ n"],",":".",".":","}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("sr-Latn-RS","default",{name:"sr-Latn-RS",englishName:"Serbian (Latin, Serbia)",nativeName:"srpski (Srbija)",language:"sr-Latn",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Din."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sre","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,eras:[{name:"n.e.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("smn-FI","default",{name:"smn-FI",englishName:"Sami, Inari (Finland)",nativeName:"sämikielâ (Suomâ)",language:"smn",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["pasepeivi","vuossargâ","majebargâ","koskokko","tuorâstâh","vástuppeivi","lávárdâh"],namesAbbr:["pa","vu","ma","ko","tu","vá","lá"],namesShort:["p","v","m","k","t","v","l"]},months:{names:["uđđâivemáánu","kuovâmáánu","njuhčâmáánu","cuáŋuimáánu","vyesimáánu","kesimáánu","syeinimáánu","porgemáánu","čohčâmáánu","roovvâdmáánu","skammâmáánu","juovlâmáánu",""],namesAbbr:["uđiv","kuov","njuh","cuoŋ","vyes","kesi","syei","porg","čoh","roov","ska","juov",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"MMMM d'. p. 'yyyy",t:"H:mm",T:"H:mm:ss",f:"MMMM d'. p. 'yyyy H:mm",F:"MMMM d'. p. 'yyyy H:mm:ss",M:"MMMM d'. p. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-SY","default",{name:"ar-SY",englishName:"Arabic (Syria)",nativeName:"العربية (سوريا)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"ل.س.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("en-BZ","default",{name:"en-BZ",englishName:"English (Belize)",nativeName:"English (Belize)",numberFormat:{currency:{groupSizes:[3,0],symbol:"BZ$"}},calendars:{standard:{patterns:{d:"dd/MM/yyyy",D:"dddd, dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd MMMM yyyy hh:mm tt",F:"dddd, dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("es-PE","default",{name:"es-PE",englishName:"Spanish (Peru)",nativeName:"Español (Perú)",language:"es",numberFormat:{currency:{pattern:["$ -n","$ n"],symbol:"S/."}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("sr-Cyrl-RS","default",{name:"sr-Cyrl-RS",englishName:"Serbian (Cyrillic, Serbia)",nativeName:"српски (Србија)",language:"sr-Cyrl",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Дин."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],namesAbbr:["нед","пон","уто","сре","чет","пет","суб"],namesShort:["не","по","ут","ср","че","пе","су"]},months:{names:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар",""],namesAbbr:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец",""]},AM:null,PM:null,eras:[{name:"н.е.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-JO","default",{name:"ar-JO",englishName:"Arabic (Jordan)",nativeName:"العربية (الأردن)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],decimals:3,percent:{decimals:3},currency:{pattern:["$n-","$ n"],decimals:3,symbol:"د.ا.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("en-TT","default",{name:"en-TT",englishName:"English (Trinidad and Tobago)",nativeName:"English (Trinidad y Tobago)",numberFormat:{currency:{groupSizes:[3,0],symbol:"TT$"}},calendars:{standard:{patterns:{d:"dd/MM/yyyy",D:"dddd, dd MMMM yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd MMMM yyyy hh:mm tt",F:"dddd, dd MMMM yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("es-AR","default",{name:"es-AR",englishName:"Spanish (Argentina)",nativeName:"Español (Argentina)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["$-n","$ n"],",":".",".":","}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("sr-Latn-ME","default",{name:"sr-Latn-ME",englishName:"Serbian (Latin, Montenegro)",nativeName:"srpski (Crna Gora)",language:"sr-Latn",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sre","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,eras:[{name:"n.e.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-LB","default",{name:"ar-LB",englishName:"Arabic (Lebanon)",nativeName:"العربية (لبنان)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"ل.ل.‏"}},calendars:{standard:{firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_TransliteratedEnglish:{name:"Gregorian_TransliteratedEnglish",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["أ","ا","ث","أ","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:1,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("en-ZW","default",{name:"en-ZW",englishName:"English (Zimbabwe)",nativeName:"English (Zimbabwe)",numberFormat:{currency:{symbol:"Z$"}}}),t.addCultureInfo("es-EC","default",{name:"es-EC",englishName:"Spanish (Ecuador)",nativeName:"Español (Ecuador)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["($ n)","$ n"],",":".",".":","}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("sr-Cyrl-ME","default",{name:"sr-Cyrl-ME",englishName:"Serbian (Cyrillic, Montenegro)",nativeName:"српски (Црна Гора)",language:"sr-Cyrl",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],namesAbbr:["нед","пон","уто","сре","чет","пет","суб"],namesShort:["не","по","ут","ср","че","пе","су"]},months:{names:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар",""],namesAbbr:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец",""]},AM:null,PM:null,eras:[{name:"н.е.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("ar-KW","default",{name:"ar-KW",englishName:"Arabic (Kuwait)",nativeName:"العربية (الكويت)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],decimals:3,percent:{decimals:3},currency:{pattern:["$n-","$ n"],decimals:3,symbol:"د.ك.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("en-PH","default",{name:"en-PH",englishName:"English (Republic of the Philippines)",nativeName:"English (Philippines)",numberFormat:{currency:{symbol:"Php"}}}),t.addCultureInfo("es-CL","default",{name:"es-CL",englishName:"Spanish (Chile)",nativeName:"Español (Chile)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-$ n","$ n"],",":".",".":","}},calendars:{standard:{"/":"-",days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd-MM-yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("ar-AE","default",{name:"ar-AE",englishName:"Arabic (U.A.E.)",nativeName:"العربية (الإمارات العربية المتحدة)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"د.إ.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("es-UY","default",{name:"es-UY",englishName:"Spanish (Uruguay)",nativeName:"Español (Uruguay)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["($ n)","$ n"],",":".",".":",",symbol:"$U"}},calendars:{standard:{firstDay:1,days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("ar-BH","default",{name:"ar-BH",englishName:"Arabic (Bahrain)",nativeName:"العربية (البحرين)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],decimals:3,percent:{decimals:3},currency:{pattern:["$n-","$ n"],decimals:3,symbol:"د.ب.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","اغسطس","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("es-PY","default",{name:"es-PY",englishName:"Spanish (Paraguay)",nativeName:"Español (Paraguay)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["($ n)","$ n"],",":".",".":",",symbol:"Gs"}},calendars:{standard:{firstDay:1,days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("ar-QA","default",{name:"ar-QA",englishName:"Arabic (Qatar)",nativeName:"العربية (قطر)",language:"ar",isRTL:!0,numberFormat:{pattern:["n-"],currency:{pattern:["$n-","$ n"],symbol:"ر.ق.‏"}},calendars:{standard:{firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],patterns:{d:"dd/MM/yyyy",D:"dd MMMM, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd MMMM, yyyy hh:mm tt",F:"dd MMMM, yyyy hh:mm:ss tt",M:"dd MMMM"}},UmAlQura:{name:"UmAlQura",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MMMM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MMMM/yyyy hh:mm tt",F:"dd/MMMM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{_yearInfo:[[746,-21987072e5],[1769,-21681216e5],[3794,-21374496e5],[3748,-21067776e5],[3402,-2076192e6],[2710,-20456064e5],[1334,-20150208e5],[2741,-19844352e5],[3498,-19537632e5],[2980,-19230912e5],[2889,-18925056e5],[2707,-186192e7],[1323,-18313344e5],[2647,-18007488e5],[1206,-17700768e5],[2741,-17394912e5],[1450,-17088192e5],[3413,-16782336e5],[3370,-16475616e5],[2646,-1616976e6],[1198,-15863904e5],[2397,-15558048e5],[748,-15251328e5],[1749,-14945472e5],[1706,-14638752e5],[1365,-14332896e5],[1195,-1402704e6],[2395,-13721184e5],[698,-13414464e5],[1397,-13108608e5],[2994,-12801888e5],[1892,-12495168e5],[1865,-12189312e5],[1621,-11883456e5],[683,-115776e7],[1371,-11271744e5],[2778,-10965024e5],[1748,-10658304e5],[3785,-10352448e5],[3474,-10045728e5],[3365,-9739872e5],[2637,-9434016e5],[685,-912816e6],[1389,-8822304e5],[2922,-8515584e5],[2898,-8208864e5],[2725,-7903008e5],[2635,-7597152e5],[1175,-7291296e5],[2359,-698544e6],[694,-667872e6],[1397,-6372864e5],[3434,-6066144e5],[3410,-5759424e5],[2710,-5453568e5],[2349,-5147712e5],[605,-4841856e5],[1245,-4536e8],[2778,-422928e6],[1492,-392256e6],[3497,-3616704e5],[3410,-3309984e5],[2730,-3004128e5],[1238,-2698272e5],[2486,-2392416e5],[884,-2085696e5],[1897,-177984e6],[1874,-147312e6],[1701,-1167264e5],[1355,-861408e5],[2731,-555552e5],[1370,-248832e5],[2773,57024e5],[3538,363744e5],[3492,670464e5],[3401,97632e6],[2709,1282176e5],[1325,1588032e5],[2653,1893888e5],[1370,2200608e5],[2773,2506464e5],[1706,2813184e5],[1685,311904e6],[1323,3424896e5],[2647,3730752e5],[1198,4037472e5],[2422,4343328e5],[1388,4650048e5],[2901,4955904e5],[2730,5262624e5],[2645,556848e6],[1197,5874336e5],[2397,6180192e5],[730,6486912e5],[1497,6792768e5],[3506,7099488e5],[2980,7406208e5],[2890,7712064e5],[2645,801792e6],[693,8323776e5],[1397,8629632e5],[2922,8936352e5],[3026,9243072e5],[3012,9549792e5],[2953,9855648e5],[2709,10161504e5],[1325,1046736e6],[1453,10773216e5],[2922,11079936e5],[1748,11386656e5],[3529,11692512e5],[3474,11999232e5],[2726,12305088e5],[2390,12610944e5],[686,129168e7],[1389,13222656e5],[874,13529376e5],[2901,13835232e5],[2730,14141952e5],[2381,14447808e5],[1181,14753664e5],[2397,1505952e6],[698,1536624e6],[1461,15672096e5],[1450,15978816e5],[3413,16284672e5],[2714,16591392e5],[2350,16897248e5],[622,17203104e5],[1373,1750896e6],[2778,1781568e6],[1748,181224e7],[1701,18428256e5],[0,18734112e5]],minDate:-21987072e5,maxDate:1873411199999,toGregorian:function(t,e,i){let n=i-1,r=t-1318;if(r<0||r>=this._yearInfo.length)return null;let a=this._yearInfo[r],s=new Date(a[1]),o=a[0];s.setMinutes(s.getMinutes()+s.getTimezoneOffset());for(let t=0;t<e;t++)n+=29+(1&o),o>>=1;return s.setDate(s.getDate()+n),s},fromGregorian:function(t){let e=t-6e4*t.getTimezoneOffset();if(e<this.minDate||e>this.maxDate)return null;let i=0,n=1;for(;e>this._yearInfo[++i][1];);e!==this._yearInfo[i][1]&&i--;let r=this._yearInfo[i],a=Math.floor((e-r[1])/864e5),s=r[0];i+=1318;let o=29+(1&s);for(;a>=o;)a-=o,s>>=1,o=29+(1&s),n++;return[i,n-1,a+1]}}},Hijri:{name:"Hijri",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""],namesAbbr:["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الثانية","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"بعد الهجرة",start:null,offset:0}],twoDigitYearMax:1451,patterns:{d:"dd/MM/yy",D:"dd/MM/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dd/MM/yyyy hh:mm tt",F:"dd/MM/yyyy hh:mm:ss tt",M:"dd MMMM"},convert:{ticks1970:621355968e5,monthDays:[0,30,59,89,118,148,177,207,236,266,295,325,355],minDate:-425216736e5,maxDate:0xe677d21fdbff,hijriAdjustment:0,toGregorian:function(t,e,i){let n=this.daysToYear(t)+this.monthDays[e]+i-1-this.hijriAdjustment,r=new Date(864e5*n-this.ticks1970);return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r},fromGregorian:function(t){if(t<this.minDate||t>this.maxDate)return null;let e,i,n=this.ticks1970+(t-0)-6e4*t.getTimezoneOffset(),r=Math.floor(n/864e5)+1+this.hijriAdjustment,a=Math.floor(30*(r-227013)/10631)+1,s=this.daysToYear(a),o=this.isLeapYear(a)?355:354;r<s?(a--,s-=o):r===s?(a--,s=this.daysToYear(a)):r>s+o&&(s+=o,a++),i=0;let l=r-s;for(;i<=11&&l>this.monthDays[i];)i++;return i--,e=l-this.monthDays[i],[a,i,e]},daysToYear:function(t){let e=30*Math.floor((t-1)/30),i=t-e-1,n=Math.floor(10631*e/30)+227013;for(;i>0;)n+=this.isLeapYear(i)?355:354,i--;return n},isLeapYear:function(t){return(11*t+14)%30<11}}},Gregorian_MiddleEastFrench:{name:"Gregorian_MiddleEastFrench",firstDay:6,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt",M:"dd MMMM"}},Gregorian_Arabic:{name:"Gregorian_Arabic",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""],namesAbbr:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}},Gregorian_TransliteratedFrench:{name:"Gregorian_TransliteratedFrench",firstDay:6,days:{names:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesAbbr:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],namesShort:["ح","ن","ث","ر","خ","ج","س"]},months:{names:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""],namesAbbr:["جانفييه","فيفرييه","مارس","أفريل","مي","جوان","جوييه","أوت","سبتمبر","اكتوبر","نوفمبر","ديسمبر",""]},AM:["ص","ص","ص"],PM:["م","م","م"],eras:[{name:"م",start:null,offset:0}],patterns:{d:"MM/dd/yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, MMMM dd, yyyy hh:mm tt",F:"dddd, MMMM dd, yyyy hh:mm:ss tt"}}}}),t.addCultureInfo("en-IN","default",{name:"en-IN",englishName:"English (India)",nativeName:"English (India)",numberFormat:{groupSizes:[3,2],percent:{groupSizes:[3,2]},currency:{pattern:["$ -n","$ n"],groupSizes:[3,2],symbol:"Rs."}},calendars:{standard:{"/":"-",firstDay:1,patterns:{d:"dd-MM-yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("es-BO","default",{name:"es-BO",englishName:"Spanish (Bolivia)",nativeName:"Español (Bolivia)",language:"es",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["($ n)","$ n"],",":".",".":",",symbol:"$b"}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("en-MY","default",{name:"en-MY",englishName:"English (Malaysia)",nativeName:"English (Malaysia)",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{symbol:"RM"}},calendars:{standard:{days:{namesShort:["S","M","T","W","T","F","S"]},patterns:{d:"d/M/yyyy",D:"dddd, d MMMM, yyyy",f:"dddd, d MMMM, yyyy h:mm tt",F:"dddd, d MMMM, yyyy h:mm:ss tt",M:"d MMMM"}}}}),t.addCultureInfo("es-SV","default",{name:"es-SV",englishName:"Spanish (El Salvador)",nativeName:"Español (El Salvador)",language:"es",numberFormat:{currency:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("en-SG","default",{name:"en-SG",englishName:"English (Singapore)",nativeName:"English (Singapore)",numberFormat:{percent:{pattern:["-n%","n%"]}},calendars:{standard:{days:{namesShort:["S","M","T","W","T","F","S"]},patterns:{d:"d/M/yyyy",D:"dddd, d MMMM, yyyy",f:"dddd, d MMMM, yyyy h:mm tt",F:"dddd, d MMMM, yyyy h:mm:ss tt",M:"d MMMM"}}}}),t.addCultureInfo("es-HN","default",{name:"es-HN",englishName:"Spanish (Honduras)",nativeName:"Español (Honduras)",language:"es",numberFormat:{currency:{pattern:["$ -n","$ n"],groupSizes:[3,0],symbol:"L."}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("es-NI","default",{name:"es-NI",englishName:"Spanish (Nicaragua)",nativeName:"Español (Nicaragua)",language:"es",numberFormat:{currency:{pattern:["($ n)","$ n"],groupSizes:[3,0],symbol:"C$"}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("es-PR","default",{name:"es-PR",englishName:"Spanish (Puerto Rico)",nativeName:"Español (Puerto Rico)",language:"es",numberFormat:{currency:{pattern:["($ n)","$ n"],groupSizes:[3,0]}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:["a.m.","a.m.","A.M."],PM:["p.m.","p.m.","P.M."],eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"dddd, dd' de 'MMMM' de 'yyyy hh:mm tt",F:"dddd, dd' de 'MMMM' de 'yyyy hh:mm:ss tt",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("es-US","default",{name:"es-US",englishName:"Spanish (United States)",nativeName:"Español (Estados Unidos)",language:"es",numberFormat:{groupSizes:[3,0],percent:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sa"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},eras:[{name:"d.C.",start:null,offset:0}],patterns:{M:"dd' de 'MMMM",Y:"MMMM' de 'yyyy"}}}}),t.addCultureInfo("bs-Cyrl","default",{name:"bs-Cyrl",englishName:"Bosnian (Cyrillic)",nativeName:"босански",language:"bs-Cyrl",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"КМ"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недјеља","понедјељак","уторак","сриједа","четвртак","петак","субота"],namesAbbr:["нед","пон","уто","сре","чет","пет","суб"],namesShort:["н","п","у","с","ч","п","с"]},months:{names:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар",""],namesAbbr:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец",""]},AM:null,PM:null,eras:[{name:"н.е.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM"}}}}),t.addCultureInfo("bs-Latn","default",{name:"bs-Latn",englishName:"Bosnian (Latin)",nativeName:"bosanski",language:"bs-Latn",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"KM"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sri","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","juni","juli","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sr-Cyrl","default",{name:"sr-Cyrl",englishName:"Serbian (Cyrillic)",nativeName:"српски",language:"sr-Cyrl",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Дин."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],namesAbbr:["нед","пон","уто","сре","чет","пет","суб"],namesShort:["не","по","ут","ср","че","пе","су"]},months:{names:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар",""],namesAbbr:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец",""]},AM:null,PM:null,eras:[{name:"н.е.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sr-Latn","default",{name:"sr-Latn",englishName:"Serbian (Latin)",nativeName:"srpski",language:"sr-Latn",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Din."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sre","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,eras:[{name:"n.e.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("smn","default",{name:"smn",englishName:"Sami (Inari)",nativeName:"sämikielâ",language:"smn",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["pasepeivi","vuossargâ","majebargâ","koskokko","tuorâstâh","vástuppeivi","lávárdâh"],namesAbbr:["pa","vu","ma","ko","tu","vá","lá"],namesShort:["p","v","m","k","t","v","l"]},months:{names:["uđđâivemáánu","kuovâmáánu","njuhčâmáánu","cuáŋuimáánu","vyesimáánu","kesimáánu","syeinimáánu","porgemáánu","čohčâmáánu","roovvâdmáánu","skammâmáánu","juovlâmáánu",""],namesAbbr:["uđiv","kuov","njuh","cuoŋ","vyes","kesi","syei","porg","čoh","roov","ska","juov",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"MMMM d'. p. 'yyyy",t:"H:mm",T:"H:mm:ss",f:"MMMM d'. p. 'yyyy H:mm",F:"MMMM d'. p. 'yyyy H:mm:ss",M:"MMMM d'. p. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("az-Cyrl","default",{name:"az-Cyrl",englishName:"Azeri (Cyrillic)",nativeName:"Азәрбајҹан дили",language:"az-Cyrl",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"ман."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Базар","Базар ертәси","Чәршәнбә ахшамы","Чәршәнбә","Ҹүмә ахшамы","Ҹүмә","Шәнбә"],namesAbbr:["Б","Бе","Ча","Ч","Ҹа","Ҹ","Ш"],namesShort:["Б","Бе","Ча","Ч","Ҹа","Ҹ","Ш"]},months:{names:["Јанвар","Феврал","Март","Апрел","Мај","Ијун","Ијул","Август","Сентјабр","Октјабр","Нојабр","Декабр",""],namesAbbr:["Јан","Фев","Мар","Апр","Мај","Ијун","Ијул","Авг","Сен","Окт","Ноя","Дек",""]},monthsGenitive:{names:["јанвар","феврал","март","апрел","мај","ијун","ијул","август","сентјабр","октјабр","нојабр","декабр",""],namesAbbr:["Јан","Фев","Мар","Апр","мая","ијун","ијул","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sms","default",{name:"sms",englishName:"Sami (Skolt)",nativeName:"sääm´ǩiõll",language:"sms",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["pâ´sspei´vv","vuõssargg","mââibargg","seärad","nelljdpei´vv","piâtnâc","sue´vet"],namesAbbr:["pâ","vu","mâ","se","ne","pi","su"],namesShort:["p","v","m","s","n","p","s"]},months:{names:["ođđee´jjmään","tä´lvvmään","pâ´zzlâšttammään","njuhččmään","vue´ssmään","ǩie´ssmään","suei´nnmään","på´rǧǧmään","čõhččmään","kålggmään","skamm´mään","rosttovmään",""],namesAbbr:["ođjm","tä´lvv","pâzl","njuh","vue","ǩie","suei","på´r","čõh","kålg","ska","rost",""]},monthsGenitive:{names:["ođđee´jjmannu","tä´lvvmannu","pâ´zzlâšttammannu","njuhččmannu","vue´ssmannu","ǩie´ssmannu","suei´nnmannu","på´rǧǧmannu","čõhččmannu","kålggmannu","skamm´mannu","rosttovmannu",""],namesAbbr:["ođjm","tä´lvv","pâzl","njuh","vue","ǩie","suei","på´r","čõh","kålg","ska","rost",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"MMMM d'. p. 'yyyy",t:"H:mm",T:"H:mm:ss",f:"MMMM d'. p. 'yyyy H:mm",F:"MMMM d'. p. 'yyyy H:mm:ss",M:"MMMM d'. p. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("zh","default",{name:"zh",englishName:"Chinese",nativeName:"中文",language:"zh",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$n"],symbol:"¥"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["周日","周一","周二","周三","周四","周五","周六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"公元",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("nn","default",{name:"nn",englishName:"Norwegian (Nynorsk)",nativeName:"norsk (nynorsk)",language:"nn",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["søndag","måndag","tysdag","onsdag","torsdag","fredag","laurdag"],namesAbbr:["sø","må","ty","on","to","fr","la"],namesShort:["sø","må","ty","on","to","fr","la"]},months:{names:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("bs","default",{name:"bs",englishName:"Bosnian",nativeName:"bosanski",language:"bs",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"KM"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sri","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","juni","juli","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("az-Latn","default",{name:"az-Latn",englishName:"Azeri (Latin)",nativeName:"Azərbaycan­ılı",language:"az-Latn",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"man."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"],namesAbbr:["B","Be","Ça","Ç","Ca","C","Ş"],namesShort:["B","Be","Ça","Ç","Ca","C","Ş"]},months:{names:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avgust","Sentyabr","Oktyabr","Noyabr","Dekabr",""],namesAbbr:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avg","Sen","Okt","Noy","Dek",""]},monthsGenitive:{names:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""],namesAbbr:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avg","Sen","Okt","Noy","Dek",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sma","default",{name:"sma",englishName:"Sami (Southern)",nativeName:"åarjelsaemiengiele",language:"sma",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kr"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["aejlege","måanta","dæjsta","gaskevåhkoe","duarsta","bearjadahke","laavvardahke"],namesAbbr:["aej","måa","dæj","gask","duar","bearj","laav"],namesShort:["a","m","d","g","d","b","l"]},months:{names:["tsïengele","goevte","njoktje","voerhtje","suehpede","ruffie","snjaltje","mïetske","skïerede","golke","rahka","goeve",""],namesAbbr:["tsïen","goevt","njok","voer","sueh","ruff","snja","mïet","skïer","golk","rahk","goev",""]},monthsGenitive:{names:["tsïengelen","goevten","njoktjen","voerhtjen","suehpeden","ruffien","snjaltjen","mïetsken","skïereden","golken","rahkan","goeven",""],namesAbbr:["tsïen","goevt","njok","voer","sueh","ruff","snja","mïet","skïer","golk","rahk","goev",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("uz-Cyrl","default",{name:"uz-Cyrl",englishName:"Uzbek (Cyrillic)",nativeName:"Ўзбек",language:"uz-Cyrl",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"сўм"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["якшанба","душанба","сешанба","чоршанба","пайшанба","жума","шанба"],namesAbbr:["якш","дш","сш","чш","пш","ж","ш"],namesShort:["я","д","с","ч","п","ж","ш"]},months:{names:["Январ","Феврал","Март","Апрел","Май","Июн","Июл","Август","Сентябр","Октябр","Ноябр","Декабр",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},monthsGenitive:{names:["январ","феврал","март","апрел","май","июн","июл","август","сентябр","октябр","ноябр","декабр",""],namesAbbr:["Янв","Фев","Мар","Апр","мая","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"yyyy 'йил' d-MMMM",t:"HH:mm",T:"HH:mm:ss",f:"yyyy 'йил' d-MMMM HH:mm",F:"yyyy 'йил' d-MMMM HH:mm:ss",M:"d-MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("mn-Cyrl","default",{name:"mn-Cyrl",englishName:"Mongolian (Cyrillic)",nativeName:"Монгол хэл",language:"mn-Cyrl",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"₮"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Ням","Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба"],namesAbbr:["Ня","Да","Мя","Лх","Пү","Ба","Бя"],namesShort:["Ня","Да","Мя","Лх","Пү","Ба","Бя"]},months:{names:["1 дүгээр сар","2 дугаар сар","3 дугаар сар","4 дүгээр сар","5 дугаар сар","6 дугаар сар","7 дугаар сар","8 дугаар сар","9 дүгээр сар","10 дугаар сар","11 дүгээр сар","12 дугаар сар",""],namesAbbr:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""]},monthsGenitive:{names:["1 дүгээр сарын","2 дугаар сарын","3 дугаар сарын","4 дүгээр сарын","5 дугаар сарын","6 дугаар сарын","7 дугаар сарын","8 дугаар сарын","9 дүгээр сарын","10 дугаар сарын","11 дүгээр сарын","12 дугаар сарын",""],namesAbbr:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""]},AM:null,PM:null,patterns:{d:"yy.MM.dd",D:"yyyy 'оны' MMMM d",t:"H:mm",T:"H:mm:ss",f:"yyyy 'оны' MMMM d H:mm",F:"yyyy 'оны' MMMM d H:mm:ss",M:"d MMMM",Y:"yyyy 'он' MMMM"}}}}),t.addCultureInfo("iu-Cans","default",{name:"iu-Cans",englishName:"Inuktitut (Syllabics)",nativeName:"ᐃᓄᒃᑎᑐᑦ",language:"iu-Cans",numberFormat:{groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["ᓈᑦᑏᖑᔭ","ᓇᒡᒐᔾᔭᐅ","ᐊᐃᑉᐱᖅ","ᐱᖓᑦᓯᖅ","ᓯᑕᒻᒥᖅ","ᑕᓪᓕᕐᒥᖅ","ᓯᕙᑖᕐᕕᒃ"],namesAbbr:["ᓈᑦᑏ","ᓇᒡᒐ","ᐊᐃᑉᐱ","ᐱᖓᑦᓯ","ᓯᑕ","ᑕᓪᓕ","ᓯᕙᑖᕐᕕᒃ"],namesShort:["ᓈ","ᓇ","ᐊ","ᐱ","ᓯ","ᑕ","ᓯ"]},months:{names:["ᔮᓐᓄᐊᕆ","ᕖᕝᕗᐊᕆ","ᒫᑦᓯ","ᐄᐳᕆ","ᒪᐃ","ᔫᓂ","ᔪᓚᐃ","ᐋᒡᒌᓯ","ᓯᑎᐱᕆ","ᐅᑐᐱᕆ","ᓄᕕᐱᕆ","ᑎᓯᐱᕆ",""],namesAbbr:["ᔮᓐᓄ","ᕖᕝᕗ","ᒫᑦᓯ","ᐄᐳᕆ","ᒪᐃ","ᔫᓂ","ᔪᓚᐃ","ᐋᒡᒌ","ᓯᑎᐱ","ᐅᑐᐱ","ᓄᕕᐱ","ᑎᓯᐱ",""]},patterns:{d:"d/M/yyyy",D:"dddd,MMMM dd,yyyy",f:"dddd,MMMM dd,yyyy h:mm tt",F:"dddd,MMMM dd,yyyy h:mm:ss tt",Y:"MMMM,yyyy"}}}}),t.addCultureInfo("zh-Hant","default",{name:"zh-Hant",englishName:"Chinese (Traditional)",nativeName:"中文(繁體)",language:"zh-Hant",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{symbol:"HK$"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["週日","週一","週二","週三","週四","週五","週六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"公元",start:null,offset:0}],patterns:{d:"d/M/yyyy",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("nb","default",{name:"nb",englishName:"Norwegian (Bokmål)",nativeName:"norsk (bokmål)",language:"nb",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["$ -n","$ n"],",":" ",".":",",symbol:"kr"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],namesAbbr:["sø","ma","ti","on","to","fr","lø"],namesShort:["sø","ma","ti","on","to","fr","lø"]},months:{names:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],namesAbbr:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"d. MMMM yyyy HH:mm",F:"d. MMMM yyyy HH:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("sr","default",{name:"sr",englishName:"Serbian",nativeName:"srpski",language:"sr",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"Din."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],namesAbbr:["ned","pon","uto","sre","čet","pet","sub"],namesShort:["ne","po","ut","sr","če","pe","su"]},months:{names:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar",""],namesAbbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]},AM:null,PM:null,eras:[{name:"n.e.",start:null,offset:0}],patterns:{d:"d.M.yyyy",D:"d. MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d. MMMM yyyy H:mm",F:"d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("tg-Cyrl","default",{name:"tg-Cyrl",englishName:"Tajik (Cyrillic)",nativeName:"Тоҷикӣ",language:"tg-Cyrl",numberFormat:{",":" ",".":",",groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0],",":" ",".":","},currency:{pattern:["-n $","n $"],groupSizes:[3,0],",":" ",".":";",symbol:"т.р."}},calendars:{standard:{"/":".",days:{names:["Яш","Душанбе","Сешанбе","Чоршанбе","Панҷшанбе","Ҷумъа","Шанбе"],namesAbbr:["Яш","Дш","Сш","Чш","Пш","Ҷм","Шн"],namesShort:["Яш","Дш","Сш","Чш","Пш","Ҷм","Шн"]},months:{names:["Январ","Феврал","Март","Апрел","Май","Июн","Июл","Август","Сентябр","Октябр","Ноябр","Декабр",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},monthsGenitive:{names:["январи","феврали","марти","апрели","маи","июни","июли","августи","сентябри","октябри","ноябри","декабри",""],namesAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yy",D:"d MMMM yyyy",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy H:mm",F:"d MMMM yyyy H:mm:ss",Y:"MMMM yyyy"}}}}),t.addCultureInfo("dsb","default",{name:"dsb",englishName:"Lower Sorbian",nativeName:"dolnoserbšćina",language:"dsb",numberFormat:{",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":". ",firstDay:1,days:{names:["njeźela","ponjeźele","wałtora","srjoda","stwortk","pětk","sobota"],namesAbbr:["nje","pon","wał","srj","stw","pět","sob"],namesShort:["n","p","w","s","s","p","s"]},months:{names:["januar","februar","měrc","apryl","maj","junij","julij","awgust","september","oktober","nowember","december",""],namesAbbr:["jan","feb","měr","apr","maj","jun","jul","awg","sep","okt","now","dec",""]},monthsGenitive:{names:["januara","februara","měrca","apryla","maja","junija","julija","awgusta","septembra","oktobra","nowembra","decembra",""],namesAbbr:["jan","feb","měr","apr","maj","jun","jul","awg","sep","okt","now","dec",""]},AM:null,PM:null,eras:[{name:"po Chr.",start:null,offset:0}],patterns:{d:"d. M. yyyy",D:"dddd, 'dnja' d. MMMM yyyy",t:"H.mm 'goź.'",T:"H:mm:ss",f:"dddd, 'dnja' d. MMMM yyyy H.mm 'goź.'",F:"dddd, 'dnja' d. MMMM yyyy H:mm:ss",M:"d. MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("smj","default",{name:"smj",englishName:"Sami (Lule)",nativeName:"julevusámegiella",language:"smj",numberFormat:{",":" ",".":",",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"kr"}},calendars:{standard:{"/":"-",firstDay:1,days:{names:["ájllek","mánnodahka","dijstahka","gasskavahkko","duorastahka","bierjjedahka","lávvodahka"],namesAbbr:["ájl","mán","dis","gas","duor","bier","láv"],namesShort:["á","m","d","g","d","b","l"]},months:{names:["ådåjakmánno","guovvamánno","sjnjuktjamánno","vuoratjismánno","moarmesmánno","biehtsemánno","sjnjilltjamánno","bårggemánno","ragátmánno","gålgådismánno","basádismánno","javllamánno",""],namesAbbr:["ådåj","guov","snju","vuor","moar","bieh","snji","bårg","ragá","gålg","basá","javl",""]},monthsGenitive:{names:["ådåjakmáno","guovvamáno","sjnjuktjamáno","vuoratjismáno","moarmesmáno","biehtsemáno","sjnjilltjamáno","bårggemáno","ragátmáno","gålgådismáno","basádismáno","javllamáno",""],namesAbbr:["ådåj","guov","snju","vuor","moar","bieh","snji","bårg","ragá","gålg","basá","javl",""]},AM:null,PM:null,patterns:{d:"yyyy-MM-dd",D:"MMMM d'. b. 'yyyy",t:"HH:mm",T:"HH:mm:ss",f:"MMMM d'. b. 'yyyy HH:mm",F:"MMMM d'. b. 'yyyy HH:mm:ss",M:"MMMM d'. b. '",Y:"MMMM yyyy"}}}}),t.addCultureInfo("uz-Latn","default",{name:"uz-Latn",englishName:"Uzbek (Latin)",nativeName:"U'zbek",language:"uz-Latn",numberFormat:{",":" ",".":",",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n $","n $"],decimals:0,",":" ",".":",",symbol:"so'm"}},calendars:{standard:{firstDay:1,days:{names:["yakshanba","dushanba","seshanba","chorshanba","payshanba","juma","shanba"],namesAbbr:["yak.","dsh.","sesh.","chr.","psh.","jm.","sh."],namesShort:["ya","d","s","ch","p","j","sh"]},months:{names:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""],namesAbbr:["yanvar","fevral","mart","aprel","may","iyun","iyul","avgust","sentyabr","oktyabr","noyabr","dekabr",""]},AM:null,PM:null,patterns:{d:"dd/MM yyyy",D:"yyyy 'yil' d-MMMM",t:"HH:mm",T:"HH:mm:ss",f:"yyyy 'yil' d-MMMM HH:mm",F:"yyyy 'yil' d-MMMM HH:mm:ss",M:"d-MMMM",Y:"MMMM yyyy"}}}}),t.addCultureInfo("mn-Mong","default",{name:"mn-Mong",englishName:"Mongolian (Traditional Mongolian)",nativeName:"ᠮᠤᠨᠭᠭᠤᠯ ᠬᠡᠯᠡ",language:"mn-Mong",numberFormat:{groupSizes:[3,0],percent:{pattern:["-n%","n%"],groupSizes:[3,0]},currency:{pattern:["$-n","$n"],groupSizes:[3,0],symbol:"¥"}},calendars:{standard:{firstDay:1,days:{names:["ᠭᠠᠷᠠᠭ ᠤᠨ ᠡᠳᠦᠷ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠨᠢᠭᠡᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠬᠣᠶᠠᠷ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠭᠤᠷᠪᠠᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠳᠥᠷᠪᠡᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠲᠠᠪᠤᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠵᠢᠷᠭᠤᠭᠠᠨ"],namesAbbr:["ᠭᠠᠷᠠᠭ ᠤᠨ ᠡᠳᠦᠷ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠨᠢᠭᠡᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠬᠣᠶᠠᠷ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠭᠤᠷᠪᠠᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠳᠥᠷᠪᠡᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠲᠠᠪᠤᠨ","ᠭᠠᠷᠠᠭ ᠤᠨ ᠵᠢᠷᠭᠤᠭᠠᠨ"],namesShort:["ᠡ‍","ᠨᠢ‍","ᠬᠣ‍","ᠭᠤ‍","ᠳᠥ‍","ᠲᠠ‍","ᠵᠢ‍"]},months:{names:["ᠨᠢᠭᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠬᠤᠶ᠋ᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠭᠤᠷᠪᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠦᠷᠪᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠠᠪᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠵᠢᠷᠭᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠤᠯᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠨᠠᠢᠮᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠶᠢᠰᠦᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠨ ᠨᠢᠭᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠨ ᠬᠤᠶ᠋ᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ",""],namesAbbr:["ᠨᠢᠭᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠬᠤᠶ᠋ᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠭᠤᠷᠪᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠦᠷᠪᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠠᠪᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠵᠢᠷᠭᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠲᠤᠯᠤᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠨᠠᠢᠮᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠶᠢᠰᠦᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠨ ᠨᠢᠭᠡᠳᠦᠭᠡᠷ ᠰᠠᠷ᠎ᠠ","ᠠᠷᠪᠠᠨ ᠬᠤᠶ᠋ᠠᠳᠤᠭᠠᠷ ᠰᠠᠷ᠎ᠠ",""]},AM:null,PM:null,eras:[{name:"ᠣᠨ ᠲᠣᠭᠠᠯᠠᠯ ᠤᠨ",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'ᠣᠨ ᠤ᠋' M'ᠰᠠᠷ᠎ᠠ  ᠢᠢᠨ 'd' ᠤ᠋ ᠡᠳᠦᠷ'",t:"H:mm",T:"H:mm:ss",f:"yyyy'ᠣᠨ ᠤ᠋' M'ᠰᠠᠷ᠎ᠠ  ᠢᠢᠨ 'd' ᠤ᠋ ᠡᠳᠦᠷ' H:mm",F:"yyyy'ᠣᠨ ᠤ᠋' M'ᠰᠠᠷ᠎ᠠ  ᠢᠢᠨ 'd' ᠤ᠋ ᠡᠳᠦᠷ' H:mm:ss",M:"M'ᠰᠠᠷ᠎ᠠ' d'ᠡᠳᠦᠷ'",Y:"yyyy'ᠣᠨ' M'ᠰᠠᠷ᠎ᠠ'"}}}}),t.addCultureInfo("iu-Latn","default",{name:"iu-Latn",englishName:"Inuktitut (Latin)",nativeName:"Inuktitut",language:"iu-Latn",numberFormat:{groupSizes:[3,0],percent:{groupSizes:[3,0]}},calendars:{standard:{days:{names:["Naattiinguja","Naggajjau","Aippiq","Pingatsiq","Sitammiq","Tallirmiq","Sivataarvik"],namesAbbr:["Nat","Nag","Aip","Pi","Sit","Tal","Siv"],namesShort:["N","N","A","P","S","T","S"]},months:{names:["Jaannuari","Viivvuari","Maatsi","Iipuri","Mai","Juuni","Julai","Aaggiisi","Sitipiri","Utupiri","Nuvipiri","Tisipiri",""],namesAbbr:["Jan","Viv","Mas","Ipu","Mai","Jun","Jul","Agi","Sii","Uut","Nuv","Tis",""]},patterns:{d:"d/MM/yyyy",D:"ddd, MMMM dd,yyyy",f:"ddd, MMMM dd,yyyy h:mm tt",F:"ddd, MMMM dd,yyyy h:mm:ss tt"}}}}),t.addCultureInfo("tzm-Latn","default",{name:"tzm-Latn",englishName:"Tamazight (Latin)",nativeName:"Tamazight",language:"tzm-Latn",numberFormat:{pattern:["n-"],",":".",".":",",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],symbol:"DZD"}},calendars:{standard:{"/":"-",firstDay:6,days:{names:["Acer","Arime","Aram","Ahad","Amhadh","Sem","Sedh"],namesAbbr:["Ace","Ari","Ara","Aha","Amh","Sem","Sed"],namesShort:["Ac","Ar","Ar","Ah","Am","Se","Se"]},months:{names:["Yenayer","Furar","Maghres","Yebrir","Mayu","Yunyu","Yulyu","Ghuct","Cutenber","Ktuber","Wambir","Dujanbir",""],namesAbbr:["Yen","Fur","Mag","Yeb","May","Yun","Yul","Ghu","Cut","Ktu","Wam","Duj",""]},AM:null,PM:null,patterns:{d:"dd-MM-yyyy",D:"dd MMMM, yyyy",t:"H:mm",T:"H:mm:ss",f:"dd MMMM, yyyy H:mm",F:"dd MMMM, yyyy H:mm:ss",M:"dd MMMM"}}}}),t.addCultureInfo("ha-Latn","default",{name:"ha-Latn",englishName:"Hausa (Latin)",nativeName:"Hausa",language:"ha-Latn",numberFormat:{currency:{pattern:["$-n","$ n"],symbol:"N"}},calendars:{standard:{days:{names:["Lahadi","Litinin","Talata","Laraba","Alhamis","Juma'a","Asabar"],namesAbbr:["Lah","Lit","Tal","Lar","Alh","Jum","Asa"],namesShort:["L","L","T","L","A","J","A"]},months:{names:["Januwaru","Febreru","Maris","Afrilu","Mayu","Yuni","Yuli","Agusta","Satumba","Oktocba","Nuwamba","Disamba",""],namesAbbr:["Jan","Feb","Mar","Afr","May","Yun","Yul","Agu","Sat","Okt","Nuw","Dis",""]},AM:["Safe","safe","SAFE"],PM:["Yamma","yamma","YAMMA"],eras:[{name:"AD",start:null,offset:0}],patterns:{d:"d/M/yyyy"}}}}),t.addCultureInfo("zh-CHS","default",{name:"zh-CHS",englishName:"Chinese (Simplified) Legacy",nativeName:"中文(简体) 旧版",language:"zh-CHS",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{pattern:["$-n","$n"],symbol:"¥"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["周日","周一","周二","周三","周四","周五","周六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"公元",start:null,offset:0}],patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}}),t.addCultureInfo("zh-CHT","default",{name:"zh-CHT",englishName:"Chinese (Traditional) Legacy",nativeName:"中文(繁體) 舊版",language:"zh-CHT",numberFormat:{percent:{pattern:["-n%","n%"]},currency:{symbol:"HK$"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["週日","週一","週二","週三","週四","週五","週六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],eras:[{name:"公元",start:null,offset:0}],patterns:{d:"d/M/yyyy",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}}}})}i.d(e,{A:()=>n})},7717:(t,e,i)=>{"use strict";var n,r,a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C,I,k,P,E,D,L;i.d(e,{ae:()=>n}),(n=function(t){return new n.prototype.init(t)}).cultures={},n.prototype={constructor:n,init:function(t){return this.cultures=n.cultures,this.cultureSelector=t,this}},n.prototype.init.prototype=n.prototype,n.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},n.cultures.default.calendar=n.cultures.default.calendars.standard,n.cultures.en=n.cultures.default,n.cultureSelector="en",r=/^0x[a-f0-9]+$/i,a=/^[+-]?infinity$/i,s=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,o=/^\s+|\s+$/g,l=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},h=function(t,e){return t.substr(t.length-e.length)===e},u=function(t){var e,i,n,r,a,s,o=arguments[0]||{},l=1,h=arguments.length;for(t=!1,"boolean"==typeof o&&(t=o,o=arguments[1]||{},l=2),"object"==typeof o||d(o)||(o={});l<h;l++)if(null!=(e=arguments[l]))for(i in e)n=o[i],o!==(r=e[i])&&(t&&r&&(m(r)||(a=c(r)))?(a?(a=!1,s=n&&c(n)?n:[]):s=n&&m(n)?n:{},o[i]=u(t,s,r)):void 0!==r&&(o[i]=r));return o},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},d=function(t){return"[object Function]"===Object.prototype.toString.call(t)},m=function(t){return"[object Object]"===Object.prototype.toString.call(t)},p=function(t,e){return 0===t.indexOf(e)},f=function(t){return(t+"").replace(o,"")},y=function(t,e,i){var n;for(n=t.length;n<e;n+=1)t=i?"0"+t:t+"0";return t},g=function(t,e){for(var i=0,n=!1,r=0,a=t.length;r<a;r++){var s=t.charAt(r);switch(s){case"'":n?e.push("'"):i++,n=!1;break;case"\\":n&&e.push("\\"),n=!n;break;default:e.push(s),n=!1}}return i},_=function(t,e){e=e||"F";var i,n=t.patterns,r=e.length;if(1===r){if(!(i=n[e]))throw"Invalid date format string '"+e+"'.";e=i}else 2===r&&"%"===e.charAt(0)&&(e=e.charAt(1));return e},v=function(t,e,i){var n=i.calendar,r=n.convert;if(!e||!e.length||"i"===e){var a;if(i&&i.name.length)if(r)a=v(t,n.patterns.F,i);else{var s=new Date(t.getTime()),o=x(t,n.eras);s.setFullYear(w(t,n,o)),a=s.toLocaleString()}else a=t.toString();return a}var l=n.eras,h="s"===e;e=_(n,e),a=[];var u,c,d,m,p=["0","00","000"],f=/([^d]|^)(d|dd)([^d]|$)/g,y=0,b=M();function S(t,e){var i,n=t+"";return e>1&&n.length<e?(i=p[e-2]+n).substr(i.length-e,e):i=n}function A(t,e){if(m)return m[e];switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate()}}for(!h&&r&&(m=r.fromGregorian(t));;){var T=b.lastIndex,C=b.exec(e),I=e.slice(T,C?C.index:e.length);if(y+=g(I,a),!C)break;if(y%2)a.push(C[0]);else{var k=C[0],P=k.length;switch(k){case"ddd":case"dddd":var E=3===P?n.days.namesAbbr:n.days.names;a.push(E[t.getDay()]);break;case"d":case"dd":c=!0,a.push(S(A(t,2),P));break;case"MMM":case"MMMM":var D=A(t,1);a.push(n.monthsGenitive&&(c||d||(c=f.test(e),d=!0),c)?n.monthsGenitive[3===P?"namesAbbr":"names"][D]:n.months[3===P?"namesAbbr":"names"][D]);break;case"M":case"MM":a.push(S(A(t,1)+1,P));break;case"y":case"yy":case"yyyy":D=m?m[0]:w(t,n,x(t,l),h),P<4&&(D%=100),a.push(S(D,P));break;case"h":case"hh":0==(u=t.getHours()%12)&&(u=12),a.push(S(u,P));break;case"H":case"HH":a.push(S(t.getHours(),P));break;case"m":case"mm":a.push(S(t.getMinutes(),P));break;case"s":case"ss":a.push(S(t.getSeconds(),P));break;case"t":case"tt":D=t.getHours()<12?n.AM?n.AM[0]:" ":n.PM?n.PM[0]:" ",a.push(1===P?D.charAt(0):D);break;case"f":case"ff":case"fff":a.push(S(t.getMilliseconds(),3).substr(0,P));break;case"z":case"zz":u=t.getTimezoneOffset()/60,a.push((u<=0?"+":"-")+S(Math.floor(Math.abs(u)),P));break;case"zzz":u=t.getTimezoneOffset()/60,a.push((u<=0?"+":"-")+S(Math.floor(Math.abs(u)),2)+":"+S(Math.abs(t.getTimezoneOffset()%60),2));break;case"g":case"gg":n.eras&&a.push(n.eras[x(t,l)].name);break;case"/":a.push(n["/"]);break;default:throw"Invalid date format pattern '"+k+"'."}}}return a.join("")},T=function(t,e,i){var n=i.groupSizes,r=n[0],a=1,s=Math.pow(10,e),o=Math.round(t*s)/s;isFinite(o)||(o=t);var l=(t=o)+"",h="",u=l.split(/e/i),c=u.length>1?parseInt(u[1],10):0;u=(l=u[0]).split("."),l=u[0],h=u.length>1?u[1]:"",c>0?(l+=(h=y(h,c,!1)).slice(0,c),h=h.substr(c)):c<0&&(h=(l=y(l,1+(c=-c))).slice(-c,l.length)+h,l=l.slice(0,-c)),h=e>0?i["."]+(h.length>e?h.slice(0,e):y(h,e)):"";for(var d=l.length-1,m=i[","],p="";d>=0;){if(0===r||r>d)return l.slice(0,d+1)+(p.length?m+p+h:h);p=l.slice(d-r+1,d+1)+(p.length?m+p:""),d-=r,a<n.length&&(r=n[a],a++)}return l.slice(0,d+1)+m+p+h},b=function(t,e,i){if(!e||"i"===e)return i.name.length?t.toLocaleString():t.toString();e=e||"D";var n,r=i.numberFormat,a=Math.abs(t),s=-1;e.length>1&&(s=parseInt(e.slice(1),10));var o,l=e.charAt(0).toUpperCase();switch(l){case"D":n="n",-1!==s&&(a=y(""+a,s,!0)),t<0&&(a=-a);break;case"N":o=r;case"C":o=o||r.currency;case"P":o=o||r.percent,n=t<0?o.pattern[0]:o.pattern[1]||"n",-1===s&&(s=o.decimals),a=T(a*("P"===l?100:1),s,o);break;default:throw"Bad number format specifier: "+l}for(var h=/n|\$|-|%/g,u="";;){var c=h.lastIndex,d=h.exec(n);if(u+=n.slice(c,d?d.index:n.length),!d)break;switch(d[0]){case"n":u+=a;break;case"$":u+=r.currency.symbol;break;case"-":/[1-9]/.test(a.toString())&&(u+=r["-"]);break;case"%":u+=r.percent.symbol}}return u},M=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},x=function(t,e){if(!e)return 0;for(var i,n=t.getTime(),r=0,a=e.length;r<a;r++)if(null===(i=e[r].start)||n>=i)return r;return 0},w=function(t,e,i,n){var r=t.getFullYear();return!n&&e.eras&&(r-=e.eras[i].offset),r},C=function(t,e){var i=new Date,n=x(i);if(e<100){var r=t.twoDigitYearMax;r="string"==typeof r?(new Date).getFullYear()%100+parseInt(r,10):r;var a=w(i,t,n);(e+=a-a%100)>r&&(e-=100)}return e},I=function(t,e,i){var n,r=t.days,a=t._upperDays;return a||(t._upperDays=a=[L(r.names),L(r.namesAbbr),L(r.namesShort)]),e=D(e),i?-1===(n=l(a[1],e))&&(n=l(a[2],e)):n=l(a[0],e),n},k=function(t,e,i){var n=t.months,r=t.monthsGenitive||t.months,a=t._upperMonths,s=t._upperMonthsGen;a||(t._upperMonths=a=[L(n.names),L(n.namesAbbr)],t._upperMonthsGen=s=[L(r.names),L(r.namesAbbr)]),e=D(e);var o=l(i?a[1]:a[0],e);return o<0&&(o=l(i?s[1]:s[0],e)),o},P=function(t,e){var i=t._parseRegExp;if(i){var n=i[e];if(n)return n}else t._parseRegExp=i={};for(var r,a=_(t,e).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),s=["^"],o=[],l=0,h=0,u=M();null!==(r=u.exec(a));){var c=a.slice(l,r.index);if(l=u.lastIndex,(h+=g(c,s))%2)s.push(r[0]);else{var d,m=r[0],p=m.length;switch(m){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":d="(\\D+)";break;case"tt":case"t":d="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":d="(\\d{"+p+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":d="(\\d\\d?)";break;case"zzz":d="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":d="([+-]?\\d\\d?)";break;case"/":d="(\\"+t["/"]+")";break;default:throw"Invalid date format pattern '"+m+"'."}d&&s.push(d),o.push(r[0])}}g(a.slice(l),s),s.push("$");var f={regExp:s.join("").replace(/\s+/g,"\\s+"),groups:o};return i[e]=f},E=function(t,e,i){return t<e||t>i},D=function(t){return t.split(" ").join(" ").toUpperCase()},L=function(t){for(var e=[],i=0,n=t.length;i<n;i++)e[i]=D(t[i]);return e},S=function(t,e,i){t=f(t);var n=i.calendar,r=P(n,e),a=new RegExp(r.regExp).exec(t);if(null===a)return null;for(var s,o=r.groups,l=null,h=null,u=null,c=null,d=null,m=0,y=0,g=0,_=0,v=null,b=!1,M=0,x=o.length;M<x;M++){var w=a[M+1];if(w){var S=o[M],A=S.length,T=parseInt(w,10);switch(S){case"dd":case"d":if(E(c=T,1,31))return null;break;case"MMM":case"MMMM":if(u=k(n,w,3===A),E(u,0,11))return null;break;case"M":case"MM":if(E(u=T-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(h=A<4?C(n,T):T,E(h,0,9999))return null;break;case"h":case"hh":if(12===(m=T)&&(m=0),E(m,0,11))return null;break;case"H":case"HH":if(E(m=T,0,23))return null;break;case"m":case"mm":if(E(y=T,0,59))return null;break;case"s":case"ss":if(E(g=T,0,59))return null;break;case"tt":case"t":if(!(b=n.PM&&(w===n.PM[0]||w===n.PM[1]||w===n.PM[2]))&&(!n.AM||w!==n.AM[0]&&w!==n.AM[1]&&w!==n.AM[2]))return null;break;case"f":case"ff":case"fff":if(_=T*Math.pow(10,3-A),E(_,0,999))return null;break;case"ddd":case"dddd":if(d=I(n,w,3===A),E(d,0,6))return null;break;case"zzz":var D=w.split(/:/);if(2!==D.length)return null;if(s=parseInt(D[0],10),E(s,-12,13))return null;var L=parseInt(D[1],10);if(E(L,0,59))return null;v=60*s+(p(w,"-")?-L:L);break;case"z":case"zz":if(E(s=T,-12,13))return null;v=60*s;break;case"g":case"gg":var z=w;if(!z||!n.eras)return null;z=f(z.toLowerCase());for(var F=0,O=n.eras.length;F<O;F++)if(z===n.eras[F].name.toLowerCase()){l=F;break}if(null===l)return null}}}var R,N=new Date,B=n.convert;if(R=B?B.fromGregorian(N)[0]:N.getFullYear(),null===h?h=R:n.eras&&(h+=n.eras[l||0].offset),null===u&&(u=0),null===c&&(c=1),B){if(null===(N=B.toGregorian(h,u,c)))return null}else{if(N.setFullYear(h,u,c),N.getDate()!==c)return null;if(null!==d&&N.getDay()!==d)return null}if(b&&m<12&&(m+=12),N.setHours(m,y,g,_),null!==v){var j=N.getMinutes()-(v+N.getTimezoneOffset());N.setHours(N.getHours()+parseInt((j/60).toString(),10),j%60)}return N},A=function(t,e,i){var n,r=e["-"],a=e["+"];switch(i){case"n -":r=" "+r,a=" "+a;case"n-":h(t,r)?n=["-",t.substr(0,t.length-r.length)]:h(t,a)&&(n=["+",t.substr(0,t.length-a.length)]);break;case"- n":r+=" ",a+=" ";case"-n":p(t,r)?n=["-",t.substr(r.length)]:p(t,a)&&(n=["+",t.substr(a.length)]);break;case"(n)":p(t,"(")&&h(t,")")&&(n=["-",t.substr(1,t.length-2)])}return n||["",t]},n.prototype.findClosestCulture=function(t){return n.findClosestCulture.call(this,t)},n.prototype.format=function(t,e,i){return n.format.call(this,t,e,i)},n.prototype.localize=function(t,e){return n.localize.call(this,t,e)},n.prototype.parseInt=function(t,e,i){return n.parseInt.call(this,t,e,i)},n.prototype.parseFloat=function(t,e,i){return n.parseFloat.call(this,t,e,i)},n.prototype.culture=function(t){return n.culture.call(this,t)},n.addCultureInfo=function(t,e,i){var n={},r=!1;"string"!=typeof t?(i=t,t=this.culture().name,n=this.cultures[t]):"string"!=typeof e?(i=e,r=null==this.cultures[t],n=this.cultures[t]||this.cultures.default):(r=!0,n=this.cultures[e]),this.cultures[t]=u(!0,{},n,i),r&&(this.cultures[t].calendar=this.cultures[t].calendars.standard)},n.findClosestCulture=function(t){var e;if(!t)return this.cultures[this.cultureSelector]||this.cultures.default;if("string"==typeof t&&(t=t.split(",")),c(t)){var i,n,r=this.cultures,a=t,s=a.length,o=[];for(n=0;n<s;n++){var l,h=(t=f(a[n])).split(";");i=f(h[0]),1===h.length?l=1:0===(t=f(h[1])).indexOf("q=")?(t=t.substr(2),l=parseFloat(t),l=isNaN(l)?0:l):l=1,o.push({lang:i,pri:l})}for(o.sort((function(t,e){return t.pri<e.pri?1:-1})),n=0;n<s;n++)if(e=r[i=o[n].lang])return e;for(n=0;n<s;n++)for(i=o[n].lang;;){var u=i.lastIndexOf("-");if(-1===u)break;if(e=r[i=i.substr(0,u)])return e}for(n=0;n<s;n++)for(var d in i=o[n].lang,r){var m=r[d];if(m.language==i)return m}}else if("object"==typeof t)return t;return e||null},n.format=function(t,e,i){var n=this.findClosestCulture(i);return t instanceof Date?t=v(t,e,n):"number"==typeof t&&(t=b(t,e,n)),t},n.localize=function(t,e){return this.findClosestCulture(e).messages[t]||this.cultures.default.messages.key},n.parseDate=function(t,e,i){var n,r,a;if(i=this.findClosestCulture(i),e){if("string"==typeof e&&(e=[e]),e.length)for(var s=0,o=e.length;s<o;s++){var l=e[s];if(l&&(n=S(t,l,i)))break}}else for(r in a=i.calendar.patterns)if(n=S(t,a[r],i))break;return n||null},n.parseInt=function(t,e,i){return Math.floor(n.parseFloat(t,e,i))},n.parseFloat=function(t,e,i){"number"!=typeof e&&(i=e,e=10);var n=this.findClosestCulture(i),o=NaN,l=n.numberFormat;if(t.indexOf(n.numberFormat.currency.symbol)>-1&&(t=(t=t.replace(n.numberFormat.currency.symbol,"")).replace(n.numberFormat.currency["."],n.numberFormat["."])),t=f(t),a.test(t))o=parseFloat(t);else if(!e&&r.test(t))o=parseInt(t,16);else{var h=A(t,l,l.pattern[0]),u=h[0],c=h[1];""===u&&"-n"!==l.pattern[0]&&(u=(h=A(t,l,"-n"))[0],c=h[1]),u=u||"+";var d,m,p=c.indexOf("e");p<0&&(p=c.indexOf("E")),p<0?(m=c,d=null):(m=c.substr(0,p),d=c.substr(p+1));var y,g,_=l["."],v=m.indexOf(_);v<0?(y=m,g=null):(y=m.substr(0,v),g=m.substr(v+_.length));var b=l[","];y=y.split(b).join("");var M=b.replace(/\u00A0/g," ");b!==M&&(y=y.split(M).join(""));var x=u+y;if(null!==g&&(x+="."+g),null!==d){var w=A(d,l,"-n");x+="e"+(w[0]||"+")+w[1]}s.test(x)&&(o=parseFloat(x))}return o},n.culture=function(t){return void 0!==t&&(this.cultureSelector=t),this.findClosestCulture(t)||this.culture.default}},5249:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(7925),r=i(372),a=i(67),s=i(5442),o=i(3351),l=r.j,h=a.S;class u{constructor(t){this.unit=t,this.sequence=[],this.min=new Date("9999-12-31T23:59:59.999"),this.max=new Date("0001-01-01T00:00:00.000")}add(t){t<this.min&&(this.min=t),t>this.max&&(this.max=t),this.sequence.push(t)}extendToCover(t,e){let i=this.min;for(;t<i;)i=u.ADD_INTERVAL(i,-this.interval,this.unit),this.sequence.splice(0,0,i);for(this.min=i,i=this.max;i<e;)i=u.ADD_INTERVAL(i,this.interval,this.unit),this.sequence.push(i);this.max=i}moveToCover(t,e){let i=u.getDelta(t,e,this.unit),n=Math.floor(i/this.interval);for(this.min=u.ADD_INTERVAL(this.min,n*this.interval,this.unit),this.sequence=[],this.sequence.push(this.min),this.max=this.min;this.max<e;)this.max=u.ADD_INTERVAL(this.max,this.interval,this.unit),this.sequence.push(this.max)}static CALCULATE(t,e,i,n){switch(n||(n=u.GET_INTERVAL_UNIT(t,e,i)),n){case o.k.Year:return u.CALCULATE_YEARS(t,e,i);case o.k.Month:return u.CALCULATE_MONTHS(t,e,i);case o.k.Week:return u.CALCULATE_WEEKS(t,e,i);case o.k.Day:return u.CALCULATE_DAYS(t,e,i);case o.k.Hour:return u.CALCULATE_HOURS(t,e,i);case o.k.Minute:return u.CALCULATE_MINUTES(t,e,i);case o.k.Second:return u.CALCULATE_SECONDS(t,e,i);case o.k.Millisecond:return u.CALCULATE_MILLISECONDS(t,e,i)}}static CALCULATE_YEARS(t,e,i){let n=h.calculateDataRange(t.getFullYear(),e.getFullYear(),!1),r=l.calculate(h.calculate(0,n.max-n.min),i,0,null,null,[1,2,5]),a=Math.floor(n.min/r.interval)*r.interval,s=new Date(a,0,1);return u.fromNumericSequence(s,r,o.k.Year)}static CALCULATE_MONTHS(t,e,i){let n=t.getFullYear(),r=e.getFullYear(),a=t.getMonth(),s=12*(r-n)+e.getMonth(),h=new Date(n,0,1),c=l.calculateUnits(a,s,i,[1,2,3,6,12]);return u.fromNumericSequence(h,c,o.k.Month)}static CALCULATE_WEEKS(t,e,i){let n=(t.getDay()-0+7)%7,r=t.getDate()-n,a=new Date(t.getFullYear(),t.getMonth(),r),h=s.w1(u.getDelta(a,e,o.k.Week)),c=l.calculateUnits(0,h,i,[1,2,4,8]);return u.fromNumericSequence(a,c,o.k.Week)}static CALCULATE_DAYS(t,e,i){let n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=s.w1(u.getDelta(t,e,o.k.Day)),a=l.calculateUnits(0,r,i,[1,2,7,14]);return u.fromNumericSequence(n,a,o.k.Day)}static CALCULATE_HOURS(t,e,i){let n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=s.pp(u.getDelta(n,t,o.k.Hour)),a=s.w1(u.getDelta(n,e,o.k.Hour)),h=l.calculateUnits(r,a,i,[1,2,3,6,12,24]);return u.fromNumericSequence(n,h,o.k.Hour)}static CALCULATE_MINUTES(t,e,i){let n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()),r=s.pp(u.getDelta(n,t,o.k.Minute)),a=s.w1(u.getDelta(n,e,o.k.Minute)),h=l.calculateUnits(r,a,i,[1,2,5,10,15,30,60,120,180,360,720,1440]);return u.fromNumericSequence(n,h,o.k.Minute)}static CALCULATE_SECONDS(t,e,i){let n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),r=s.pp(u.getDelta(n,t,o.k.Second)),a=s.w1(u.getDelta(n,e,o.k.Second)),h=l.calculateUnits(r,a,i,[1,2,5,10,15,30,60,120,300,600,900,1800,3600]);return u.fromNumericSequence(n,h,o.k.Second)}static CALCULATE_MILLISECONDS(t,e,i){let n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),r=u.getDelta(n,t,o.k.Millisecond),a=u.getDelta(n,e,o.k.Millisecond),s=l.calculate(h.calculate(r,a),i,0);return u.fromNumericSequence(n,s,o.k.Millisecond)}static ADD_INTERVAL(t,e,i){switch(e=Math.round(e),i){case o.k.Year:return n.s.addYears(t,e);case o.k.Month:return n.s.addMonths(t,e);case o.k.Week:return n.s.addWeeks(t,e);case o.k.Day:return n.s.addDays(t,e);case o.k.Hour:return n.s.addHours(t,e);case o.k.Minute:return n.s.addMinutes(t,e);case o.k.Second:return n.s.addSeconds(t,e);case o.k.Millisecond:return n.s.addMilliseconds(t,e)}}static fromNumericSequence(t,e,i){let n=new u(i);for(let r=0;r<e.sequence.length;r++){let a=e.sequence[r],s=u.ADD_INTERVAL(t,a,i);n.add(s)}return n.interval=e.interval,n.intervalOffset=e.intervalOffset,n}static getDelta(t,e,i){let n=0;switch(i){case o.k.Year:n=e.getFullYear()-t.getFullYear();break;case o.k.Month:n=12*(e.getFullYear()-t.getFullYear())+e.getMonth()-t.getMonth();break;case o.k.Week:n=(e.getTime()-t.getTime())/6048e5;break;case o.k.Day:n=(e.getTime()-t.getTime())/864e5;break;case o.k.Hour:n=(e.getTime()-t.getTime())/36e5;break;case o.k.Minute:n=(e.getTime()-t.getTime())/6e4;break;case o.k.Second:n=(e.getTime()-t.getTime())/1e3;break;case o.k.Millisecond:n=e.getTime()-t.getTime()}return n}static GET_INTERVAL_UNIT(t,e,i){i=Math.max(i,2);let n=u.getDelta(t,e,o.k.Day);if(n>356&&n>=180*i)return o.k.Year;if(n>60&&n>7*i)return o.k.Month;if(n>14&&n>2*i)return o.k.Week;let r=u.getDelta(t,e,o.k.Hour);if(n>2&&r>12*i)return o.k.Day;if(r>=24&&r>=i)return o.k.Hour;let a=u.getDelta(t,e,o.k.Minute);if(a>2&&a>=i)return o.k.Minute;let s=u.getDelta(t,e,o.k.Second);if(s>2&&s>=.8*i)return o.k.Second;if(u.getDelta(t,e,o.k.Millisecond)>0)return o.k.Millisecond;let l=t;return 0!==l.getMilliseconds()?o.k.Millisecond:0!==l.getSeconds()?o.k.Second:0!==l.getMinutes()?o.k.Minute:0!==l.getHours()?o.k.Hour:1!==l.getDate()?o.k.Day:0!==l.getMonth()?o.k.Month:o.k.Year}}u.MIN_COUNT=1,u.MAX_COUNT=1e3},7925:(t,e,i)=>{"use strict";var n;i.d(e,{s:()=>n}),function(t){let e=[31,28,31,30,31,30,31,31,30,31,30,31],i=[31,29,31,30,31,30,31,31,30,31,30,31];function n(t){return t%4==0&&t%100!=0||t%400==0}function r(t,e){let i=t.getFullYear(),n=t.getMonth(),r=t.getDate(),a=new Date(t.getTime());return a.setFullYear(i,n,r+e),a}t.addYears=function(t,e){let i=t.getFullYear(),r=t.getMonth(),a=t.getDate(),s=2===r&&29===a,o=new Date(t.getTime());return i+=e,s&&!n(i)&&(a=28),o.setFullYear(i,r,a),o},t.addMonths=function(t,r){let a=t.getFullYear(),s=t.getMonth(),o=t.getDate(),l=new Date(t.getTime());return a+=(r-r%12)/12,s+=r%12,s>11&&(s%=12,a++),o=Math.min(o,function(t,r){return n(t)?i[r]:e[r]}(a,s)),l.setFullYear(a,s,o),l},t.addWeeks=function(t,e){return r(t,7*e)},t.addDays=r,t.addHours=function(t,e){return new Date(t.getTime()+36e5*e)},t.addMinutes=function(t,e){return new Date(t.getTime()+6e4*e)},t.addSeconds=function(t,e){return new Date(t.getTime()+1e3*e)},t.addMilliseconds=function(t,e){return new Date(t.getTime()+e)}}(n||(n={}))},3224:(t,e,i)=>{"use strict";i.d(e,{XQ:()=>l,b4:()=>h,kX:()=>u,ny:()=>c});var n=i(3100),r=i(5442);const a=/^([0\#,]*\.[0\#]+|[0\#,]+|g)$/i;class s{project(t){return this.value?r.c4(t/this.value):t}reverseProject(t){return this.value?t*this.value:t}isApplicableTo(t){t=Math.abs(t);let e=r.XV(t,3);return r.Id(t,this.applicableRangeMin,e)&&r.Yt(t,this.applicableRangeMax,e)}isScaling(){return this.value>1}}class o{constructor(t){this.units=t||[]}get title(){return this.displayUnit?this.displayUnit.title:void 0}update(t){void 0!==t&&(this.unitBaseValue=t,this.displayUnit=this.findApplicableDisplayUnit(t))}findApplicableDisplayUnit(t){for(let e of this.units)if(e.isApplicableTo(t))return e}format(t,e,i,n,r){i=this.getNumberOfDecimalsForFormatting(e,i);let a="";return this.isFormatSupported(e)&&!this.hasScientitifcFormat(e)&&this.isScalingUnit()&&this.shouldRespectScalingUnit(e)&&(t=this.displayUnit.project(t),a=this.displayUnit.labelFormat),this.formatHelper({value:t,nonScientificFormat:a,format:e,decimals:i,trailingZeros:n,cultureSelector:r})}isFormatSupported(t){return!o.UNSUPPORTED_FORMATS.test(t)}isPercentageFormat(t){return t&&t.indexOf("%")>=0}shouldRespectScalingUnit(t){return!0}getNumberOfDecimalsForFormatting(t,e){return e}isScalingUnit(){return this.displayUnit&&this.displayUnit.isScaling()}formatHelper(t){let{value:e,nonScientificFormat:i,cultureSelector:r,format:a,decimals:s,trailingZeros:o}=t;if("g"!==a&&"G"!==a||null==s||(a="#,0.00"),a=n.jq.addDecimalsToFormat(a,s,o),a&&!n.r9.isStandardNumberFormat(a))return n.r9.formatNumberWithCustomOverride(e,a,i,r);a||(a="G"),i||(i="{0}");let l=n.r9.formatValue(e,a,r);return n.r9.format(i,[l])}formatSingleValue(t,e,i,n,a){return this.update(this.shouldUseValuePrecision(t)?r.XV(t,8):t),this.format(t,e,i,n,a)}shouldUseValuePrecision(t){if(0===this.units.length)return!0;let e=0;for(let t=0;t<this.units.length;t++)if(this.units[t].isScaling()){e=this.units[t].applicableRangeMin;break}return Math.abs(t)<e}isScientific(t){return t<-1e15||t>1e15||-1e-4<t&&t<1e-4&&0!==t}hasScientitifcFormat(t){return t&&-1!==t.toUpperCase().indexOf("E")}supportsScientificFormat(t){return!t||a.test(t)}shouldFallbackToScientific(t,e){return!this.hasScientitifcFormat(e)&&this.supportsScientificFormat(e)&&this.isScientific(t)}getScientificFormat(t,e,i,r){if(this.isFormatSupported(e)&&this.shouldFallbackToScientific(t,e)){let a=n.jq.getNumericFormat(t,e);return i&&(a=n.jq.addDecimalsToFormat(a||"0",Math.abs(i),r)),a?a+"E+0":"0.##E+0"}return e}}o.UNSUPPORTED_FORMATS=/^(p\d*)|(e\d*)$/i;class l extends o{constructor(){super([])}}class h extends o{constructor(t){super(h.getUnits(t))}format(t,e,i,n,r){return e=this.getScientificFormat(t,e,i,n),super.format(t,e,i,n,r)}static RESET(){h.units=null}static getUnits(t){return h.units||(h.units=d(t,((t,e,i)=>t-e>=1e3?t/10:i)),h.units[h.units.length-1].applicableRangeMax=1/0),h.units}}class u extends o{constructor(t){super(u.getUnits(t))}static RESET(){u.units=null}static getUnits(t){return u.units||(u.units=d(t),u.units[u.units.length-1].applicableRangeMax=1/0),u.units}format(t,e,i,n,r){return e=this.getScientificFormat(t,e,i,n),super.format(t,e,i,n,r)}}class c extends o{constructor(t){super(c.getUnits(t))}isFormatSupported(t){return!c.UNSUPPORTED_FORMATS.test(t)}static getUnits(t){if(!c.units){let e=[],i=(t,e,i)=>-1===t&&t-e>=1e3?t/10:i,n=t(-1);m(e,c.AUTO_DISPLAYUNIT_VALUE,n.title,n.format,i),n=t(0),m(e,c.NONE_DISPLAYUNIT_VALUE,n.title,n.format,i),c.units=e.concat(d(t,i)),c.units[c.units.length-1].applicableRangeMax=1/0}return c.units}format(t,e,i,n,r){return e=this.getScientificFormat(t,e,i,n),super.format(t,e,i,n,r)}}function d(t,e){let i=[];for(let n=3;n<24;n++){let a=t(n);a&&m(i,r.eC(n),a.title,a.format,e)}return i}function m(t,e,i,n,r){if(i||n){let a=e;if(t.length>0){let i=t[t.length-1];r&&(a=r(e,i.value,a)),i.applicableRangeMax=a}let o=new s;o.value=e,o.applicableRangeMin=a,o.applicableRangeMax=1e3*a,o.title=i,o.labelFormat=n,t.push(o)}}c.AUTO_DISPLAYUNIT_VALUE=0,c.NONE_DISPLAYUNIT_VALUE=1,c.UNSUPPORTED_FORMATS=/^(e\d*)$/i},1520:(t,e,i)=>{"use strict";var n;i.d(e,{I:()=>n}),function(t){t[t.Default=0]="Default",t[t.Verbose=1]="Verbose",t[t.WholeUnits=2]="WholeUnits",t[t.DataLabels=3]="DataLabels"}(n||(n={}))},4932:(t,e,i)=>{"use strict";let n;function r(t,e,i){switch(e){case"m":e="M";break;case"O":case"o":e="yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fff'0000'";break;case"R":case"r":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e="ddd, dd MMM yyyy HH':'mm':'ss 'GMT'";break;case"s":e="S";break;case"u":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e="yyyy'-'MM'-'dd HH':'mm':'ss'Z'";break;case"U":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e="F";break;case"y":case"Y":switch(i){case"default":case"en":case"en-US":e="MMMM, yyyy";break;default:e="Y"}}return{value:t,format:e}}function a(t){if(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/%K/g,"zzz")).replace(/K/g,"zzz")).replace(/fffffff/g,"fff0000")).replace(/ffffff/g,"fff000")).replace(/fffff/g,"fff00")).replace(/ffff/g,"fff0")).replace(/yyyyy/g,"0yyyy")).replace(/(^y|^)yyy(^y|$)/g,"yyyy"),n||(n=["d","f","F","g","h","H","K","m","M","s","t","y","z",":","/"].map((t=>({r:new RegExp("%"+t+"(?!"+t+")","g"),s:t})))),-1!==t.indexOf("%")&&t.length>2)for(let e=0;e<n.length;e++)t=t.replace(n[e].r,n[e].s);return t}i.d(e,{r:()=>r,w:()=>a})},3100:(t,e,i)=>{"use strict";i.d(e,{jq:()=>v,r9:()=>M});var n=i(7717),r=i(8599),a=i(3051),s=i(5442),o=i(1248),l=i(4932),h=i(3351),u=i(1210),c=i.n(u);(0,r.A)(n.ae);var d,m=a.A;!function(t){const e=new RegExp(["'[^']*'",'"[^"]*"',"\\\\.","'[^']*$",'"[^"]*$',"\\\\$"].join("|"),"g");t.removeLiterals=function(t){return e.lastIndex=0,t.replace(e,"")},t.preserveLiterals=function(t,i){for(e.lastIndex=0;;){let n=e.exec(t);if(!n)break;let r=n[0],a=e.lastIndex-r.length,s=String.fromCharCode(57600+i.length);i.push(r),t=t.substr(0,a)+s+t.substr(e.lastIndex),e.lastIndex=a+1}return t},t.restoreLiterals=function(t,e,i=!0){let n=e.length;for(let r=0;r<n;r++){let n=String.fromCharCode(57600+r),a=e[r];if(!i){let t=a[0];a="\\"===t||1===a.length||a[a.length-1]!==t?a.substring(1):a.substring(1,a.length-1)}t=t.replace(n,a)}return t}}(d||(d={}));const p=/({{)|(}})|{(\d+[^}]*)}/g,f="0",y="#",g=new RegExp([f,y].join("|"),"g");var _,v;!function(t){let e,i;function r(t,e,i){let r=i.calendar.patterns;!function(t){let e=t.patterns;void 0===e.g&&(e.g=e.f.replace(e.D,e.d),e.G=e.F.replace(e.D,e.d))}(i.calendar);let a=(0,l.r)(t,e,i.name);return e=1===a.format.length?r[a.format]:a.format,i||(i=this.getCurrentCulture()),n.ae.format(a.value,e,i)}t.canFormat=function(t){return t instanceof Date},t.format=function(t,a,s){let h=1===(a=a||"G").length;try{return h?r(t,a,s):function(t,r,a){let s,h=[];if((r=d.preserveLiterals(r,h)).indexOf("F")>-1){r=o.replaceAll(r,"FFFF","FFF");let e=t.getMilliseconds();if(e%10>=1&&(r=o.replaceAll(r,"FFF","fff")),r=o.replaceAll(r,"FFF","FF"),e%100/10>=1&&(r=o.replaceAll(r,"FF","ff")),r=o.replaceAll(r,"FF","F"),e%1e3/100>=1&&(r=o.replaceAll(r,"F","f")),""===(r=o.replaceAll(r,"F",""))||"%"===r)return""}return r=function(t){return t===e?i:(e=t,t=(0,l.w)(t),i=t,t)}(r),s=n.ae.format(t,r,a),s=function(t,e){let i=e[":"];if(":"===i)return t;let n="",r=t.length;for(let e=0;e<r;e++){let r=t.charAt(e);n+=":"===r?i:r}return n}(s,a.calendar),s=d.restoreLiterals(s,h,!1),s}(t,a,s)}catch(e){return r(t,"G",s)}}}(_||(_={})),function(t){const e=/\{.+\}/,i=/e[+-]*[0#]+/i,r=/^[a-z]\d{0,2}$/i,a=/0+$/,l=/\.([0#]*)/g,h=/[0#,\.]+[0,#]*/g,u=/([0#])(?=[^0#]*$)/;function c(t,e){let i=m.run(h,e);return i?i[0]:e}function p(t,e,i){if((e=Math.abs(e))>=0){let n=[];t=d.preserveLiterals(t,n);let r=i?f:y,a=o.repeat(r,Math.abs(e)),s=m.run(l,t);if(s){let e=t.substr(0,s.index),n=t.substr(s.index+1,s[1].length),r=t.substr(s.index+s[0].length);if(i)n=a;else{let t=a.length-n.length;t>0?n+=a.slice(-t):t<0&&(n=n.slice(0,t))}n.length>0&&(n="."+n),t=e+n+r}else a.length>0&&(t=t.replace(u,"$1."+a));0!==n.length&&(t=d.restoreLiterals(t,n))}return t}function _(e){return-1!==d.removeLiterals(e).indexOf(t.NumberFormatComponentsDelimeter)}function v(e){let i={hasNegative:!1,positive:e,negative:e,zero:e},n=[],r=(e=d.preserveLiterals(e,n)).split(t.NumberFormatComponentsDelimeter),a=r.length;return a>1&&(0!==n.length&&(r=r.map((t=>d.restoreLiterals(t,n)))),i.hasNegative=!0,i.positive=i.zero=r[0],i.negative=r[1],a>2&&(i.zero=r[2])),i}let b;function x(t){return r.test(t)}function w(e,r,a,s){let o,l=a.numberFormat;if(!isFinite(e))return n.ae.format(e,void 0);{let h=v(r);r=e>0?h.positive:0===e?h.zero:h.negative,h.hasNegative&&(e=Math.abs(e));let u=A(r,!0),c=[];if(u.hasLiterals&&(r=d.preserveLiterals(r,c)),u.hasE&&!s){let t=m.run(i,r);if(t){let i=r.substr(0,t.index),n=r.substr(t.index+2),a=T(i,u),s=I(i,u);if(1!==s&&(e*=s),"number"!=typeof e)return String(e);let h=e.toExponential(a),c=h.indexOf("e"),d=h.substr(0,c),m=h.substr(c+1),p=k(d,i,l),f=k(m,n,l);"+"===f.charAt(0)&&"+"!==t[0].charAt(1)&&(f=f.substr(1)),o=p+t[0].charAt(0)+f}}if(void 0===o){let i,h=!1,c=T(r,u),d=I(r,u);if(1!==d&&(e*=d),e=parseFloat(S(e,c)),!isFinite(e))return n.ae.format(e,void 0);s?(s=function(t,e){if(!e||void 0===t)return t;let i="{0:"+e+"}";return t.replace("{0}",i)}(s,t.getNumericFormat(e,r)),i=M.format(s,[e],a.name),h=!0):i=S(e,c),o=k(i,r,l,s,h)}u.hasLiterals&&(o=d.restoreLiterals(o,c,!1)),b=u}return o}function S(t,e){let i="",n=0;e>16&&(n=e-16,e=16);let r=s.YL(Math.abs(t));if(r<16){if(r>0){let t=16-r;e>t&&(n+=e-t,e=t)}i=t.toFixed(e)}else if(16===r)i=t.toFixed(0),n+=e,n>0&&(i+=".");else{if("number"!=typeof t)return String(t);i=t.toExponential(15);let n=i.indexOf("e");if(n>0){let t=i.indexOf("."),r=i.substr(0,n),a=i.substr(n+1),s=parseInt(a,10)-(r.length-t-1);i=r.replace(".","")+o.repeat("0",s),e>0&&(i=i+"."+o.repeat("0",e))}}return n>0&&(i+=o.repeat("0",n)),i}function A(t,e,i,n){if(void 0!==b&&t===b.format)return b;let r=[],a=d.preserveLiterals(t,r),s={format:t,hasLiterals:0!==r.length,hasE:!1,hasCommas:!1,hasDots:!1,hasPercent:!1,hasPermile:!1,precision:void 0,scale:void 0,partsPerScale:void 0};for(let t=0,e=a.length;t<e;t++)switch(a.charAt(t)){case"e":case"E":s.hasE=!0;break;case",":s.hasCommas=!0;break;case".":s.hasDots=!0;break;case"%":s.hasPercent=!0;break;case"‰":s.hasPermile=!0}let o=v(t);return e&&(s.precision=T(o.positive,s)),n&&(s.partsPerScale=C(o.positive,s)),i&&(s.scale=I(o.positive,s)),s}function T(t,e){if(e.precision>-1)return e.precision;let i=0;if(e.hasDots){e.hasLiterals&&(t=d.removeLiterals(t));let n=t.indexOf(".");if(n>-1){let e=t.length;for(let r=n;r<e;r++){let e=t.charAt(r);if(e.match(g)&&i++,"E"===e)break}i=Math.min(19,i)}}return e.precision=i,i}function C(t,e){if(null!=e.partsPerScale)return e.partsPerScale;let i=1;return e.hasPercent&&t.indexOf("%")>-1&&(i*=100),e.hasPermile&&t.indexOf("‰")>-1&&(i*=1e3),e.partsPerScale=i,i}function I(t,e){if(e.scale>-1)return e.scale;let i=C(t,e);if(e.hasCommas){let e=t.indexOf(".");-1===e&&(e=t.length);for(let n=e-1;n>-1&&","===t.charAt(n);n--)i/=1e3}return e.scale=i,i}function k(t,i,n,r,s){let o=!!r,l=i.split(".",2);if(2===l.length){let i=l[0],h=l[1],u="";r&&(u=r.replace(e,""),t=t.replace(u,""));let c=n["."],d=s?c:".",m=t.split(d,2),p=1===m.length?m[0]+u:m[0],_=2===m.length?m[1]+u:"";_=_.replace(a,"");let v=P(p,i,n,o),b=function(t,e,i){let n=0,r=e.length,a=t.length;if(i){let i=e.charAt(r-1);return i.match(g)?{value:t,fmtOnly:""===t}:{value:t+i,fmtOnly:""===t}}let s="",o=!0;for(let i=0;i<r;i++){let r=e.charAt(i);if(n<a)switch(r){case f:case y:s+=t[n++],o=!1;break;default:s+=r}else r!==y&&(s+=r,o=o&&r!==f)}return{value:s,fmtOnly:o}}(_,h,o);return b.fmtOnly||""===b.value?v+b.value:v+c+b.value}return P(t,i,n,o)}function P(t,e,i,n){let r=e.indexOf(","),a=r>-1&&r<Math.max(e.lastIndexOf("0"),e.lastIndexOf("#"))&&i[","],s=0,o=0,l=i.groupSizes||[3],h=l[0],u=i[","],c="",d=t.charAt(0);"+"!==d&&"-"!==d||(c=i[d],t=t.substr(1));let m="0"===t,p="",g="",_=t.length-1,v=!0;for(let i=e.length-1;i>-1;i--){let r=e.charAt(i);switch(r){case f:case y:v=!1,""!==g&&(p=g+p,g=""),n||((_>-1||r===f)&&a&&(s===h?(p=u+p,o++,o<l.length&&(h=l[o]),s=1):s++),_>-1?(m&&r===y||(p=t.charAt(_)+p),_--):r!==y&&(p=r+p));break;case",":break;default:g=r+g}}if(!n){if(_>-1&&""!==p)if(a)for(;_>-1;)s===h?(p=u+p,o++,o<l.length&&(h=l[o]),s=1):s++,p=t.charAt(_)+p,_--;else p=t.substr(0,_+1)+p;return c+g+p}return v?c+g+p:c+g+t+p}function E(t,e){let i=e["+"],n=e["-"],r=e["."],a=e[","];if("+"===i&&"-"===n&&"."===r&&","===a)return t;let s=t.length,o="";for(let e=0;e<s;e++){let s=t.charAt(e);switch(s){case"+":o+=i;break;case"-":o+=n;break;case".":o+=r;break;case",":o+=a;break;default:o+=s}}return o}t.NumberFormatComponentsDelimeter=";",t.getNumericFormat=function(e,i){if(null==i)return i;if(_(i)){let{positive:n,negative:r,zero:a}=t.getComponents(i);return c(0,e>0?n:0===e?a:r)}return c(0,i)},t.addDecimalsToFormat=function(e,i,n){if(null==i)return e;if(null==e&&(e=f),_(e)){let{positive:r,negative:a,zero:s}=t.getComponents(e),o=[r,a,s];for(let t=0;t<o.length;t++)o[t]=p(o[t],i,n);return o.join(t.NumberFormatComponentsDelimeter)}return p(e,i,n)},t.hasFormatComponents=_,t.getComponents=v,t.canFormat=function(t){return"number"==typeof t},t.isStandardFormat=x,t.format=function(t,e,i){e=e||"G";try{return x(e)?function(t,e,i){let r,a=e.length>1?parseInt(e.substr(1,e.length-1),10):void 0,s=i.numberFormat,l=e.charAt(0);switch(l){case"e":case"E":void 0===a&&(a=6),r=w(t,e="0."+o.repeat("0",a)+l+"+000",i);break;case"f":case"F":r=void 0!==a?t.toFixed(a):t.toFixed(s.decimals),r=E(r,s);break;case"g":case"G":let h=Math.abs(t);if(0===h||1e-4<=h&&h<1e15)r=void 0!==a?t.toPrecision(a):t.toString();else{if("number"!=typeof t)return String(t);r=void 0!==a?t.toExponential(a):t.toExponential(),r=r.replace("e","E")}r=E(r,s);break;case"r":case"R":r=t.toString(),r=E(r,s);break;case"x":case"X":if(r=t.toString(16),"X"===l&&(r=r.toUpperCase()),void 0!==a){let e=r.length,i=t<0;i&&e--;let n,s=a-e;s>0&&(n=o.repeat("0",s)),r=i?"-"+n+r.substr(1):n+r}r=E(r,s);break;default:r=n.ae.format(t,e,i)}return r}(t,e,i):w(t,e,i)}catch(e){return n.ae.format(t,void 0,i)}},t.formatWithCustomOverride=function(t,e,i,n){return w(t,e,n,i)},t.getCustomFormatMetadata=A}(v||(v={}));class b{constructor(t){let e=t.calendar,i=e.patterns,n=e.months.namesAbbr,r=n&&n[0],a=i.Y,s=i.M,o=i.f,l=i.T,h=i.t,u=o.indexOf(",")>-1?", ":" ",c=0===a.indexOf("yyyy'")&&a.length>6&&"'"===a[6];this.YearPattern=c?a.substr(0,7):"yyyy";let d=o.indexOf("yy"),m=o.indexOf("MMMM");this.MonthPattern=r&&m>-1?d>m?"MMM yyyy":"yyyy MMM":a,this.DayPattern=r?s.replace("MMMM","MMM"):s;let p=o.indexOf("mm"),f=o.indexOf("tt")>-1?h.replace(":mm ",""):h;this.HourPattern=d<p?this.DayPattern+u+f:f+u+this.DayPattern,this.MinutePattern=h,this.SecondPattern=l,this.MillisecondPattern=l.replace("ss","ss.fff"),"fi-FI"===t.name&&(this.DayPattern=this.DayPattern.replace("'ta'",""),this.HourPattern=this.HourPattern.replace("'ta'",""))}getFormatString(t){switch(t){case h.k.Year:return this.YearPattern;case h.k.Month:return this.MonthPattern;case h.k.Week:case h.k.Day:return this.DayPattern;case h.k.Hour:return this.HourPattern;case h.k.Minute:return this.MinutePattern;case h.k.Second:return this.SecondPattern;case h.k.Millisecond:return this.MillisecondPattern}}}const M=new class{formatValue(t,e,i){if(null==t)return"";const n=this.getCulture(i);return _.canFormat(t)?_.format(t,e,n):v.canFormat(t)?v.format(t,e,n):t.toString()}format(t,e,i){return t?t.replace(p,((t,n,r,a)=>{if(n)return"{";if(r)return"}";{let t=a.split(":"),n=parseInt(t[0],10),r=t[1];return this.formatValue(e[n],r,i)}})):""}isStandardNumberFormat(t){return v.isStandardFormat(t)}formatNumberWithCustomOverride(t,e,i,n){let r=this.getCulture(n);return v.formatWithCustomOverride(t,e,i,r)}dateFormatString(t){return this._dateTimeScaleFormatInfo||this.initialize(),this._dateTimeScaleFormatInfo.getFormatString(t)}setCurrentCulture(t){this._currentCultureSelector!==t&&(this._currentCulture=this.getCulture(t),this._currentCultureSelector=t,this._dateTimeScaleFormatInfo=new b(this._currentCulture))}getCulture(t){if(null==t)return null==this._currentCulture&&this.initialize(),this._currentCulture;{let e=n.ae.findClosestCulture(t);return e||(e=n.ae.culture("en-US")),e}}initialize(){let t=this.getCurrentCulture();this.setCurrentCulture(t);let e=this.getUrlParam("calendar");if(e){let t=this._currentCulture,i=t.calendars[e];i&&(t.calendar=i)}}getCurrentCulture(){return this.getUrlParam("language")||(c()&&c().common&&c().common.cultureInfo?c().common.cultureInfo:window.navigator.userLanguage||window.navigator.language||"en-US")}getUrlParam(t){let e=window.location.search.match(RegExp("[?&]"+t+"=([^&]*)"));return e?e[1]:void 0}}},3351:(t,e,i)=>{"use strict";var n;i.d(e,{k:()=>n}),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.Week=2]="Week",t[t.Day=3]="Day",t[t.Hour=4]="Hour",t[t.Minute=5]="Minute",t[t.Second=6]="Second",t[t.Millisecond=7]="Millisecond"}(n||(n={}))},167:(t,e,i)=>{"use strict";i.d(e,{Y:()=>r});class n{constructor(t){this.cache={},this.clearCacheInterval=null!=t?t:n.defaultClearCacheInterval,this.clearCache()}getData(t){return this.cache[t]}setData(t,e){this.cache[t]=e,null==this.clearCacheTimerId&&(this.clearCacheTimerId=setTimeout((()=>this.clearCache()),this.clearCacheInterval))}clearCache(){this.cache={},this.clearCacheTimerId=void 0}}n.defaultClearCacheInterval=864e5;const r=new n},1248:(t,e,i)=>{"use strict";i.r(e),i.d(e,{constructNameFromList:()=>S,contains:()=>h,containsIgnoreCase:()=>u,containsWhitespace:()=>f,deriveClsCompliantName:()=>I,endsWith:()=>r,ensureUniqueNames:()=>x,equalIgnoreCase:()=>s,escapeStringForRegex:()=>A,findUniqueName:()=>w,format:()=>a,getLengthDifference:()=>v,isNullOrEmpty:()=>m,isNullOrUndefinedOrWhiteSpaceString:()=>p,isWhitespace:()=>y,normalizeCase:()=>c,normalizeFileName:()=>T,repeat:()=>b,replaceAll:()=>M,startsWith:()=>l,startsWithIgnoreCase:()=>o,stringToArrayBuffer:()=>d,stringifyAsPrettyJSON:()=>C,stripTagDelimiters:()=>k,trimTrailingWhitespace:()=>g,trimWhitespace:()=>_});const n=new RegExp("[<>]","g");function r(t,e){return-1!==t.indexOf(e,t.length-e.length)}function a(...t){let e=t[0];if(p(e))return e;for(let i=0;i<t.length-1;i++){let n=new RegExp("\\{"+i+"\\}","gm");e=e.replace(n,t[i+1])}return e}function s(t,e){return c(t)===c(e)}function o(t,e){let i=c(e);return 0===c(t).indexOf(i)}function l(t,e){return 0===t.indexOf(e)}function h(t,e){return null!=t&&-1!==t.indexOf(e)}function u(t,e){return null!=t&&h(c(t),c(e))}function c(t){return t.toUpperCase()}function d(t){if(m(t))return null;let e=new ArrayBuffer(t.length),i=new Uint8Array(e);for(let e=0,n=t.length;e<n;e++)i[e]=t.charCodeAt(e);return i}function m(t){return null==t||0===t.length}function p(t){return m(t)||m(t.trim())}function f(t){return/\s/.test(t)}function y(t){return""===t.trim()}function g(t){return t.replace(/\s+$/,"")}function _(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function v(t,e){return Math.abs(t.length-e.length)}function b(t,e){let i="";for(let n=0;n<e;n++)i+=t;return i}function M(t,e,i){if(!e)return t;let n=A(e);return t.replace(new RegExp(n,"gi"),i)}function x(t){let e={};for(let i of t)e[i]=!1;let i=[];for(let n of t){let t=n;if(e[t]){let i=0;for(;void 0!==e[t];)t=n+"."+ ++i}i.push(t),e[t]=!0}return i}function w(t,e){let i=0,n=e;for(;t[n];)n=e+ ++i;return n}function S(t,e,i){let n,r=[],a=0;for(let e of t){if(a+e.length>i&&r.length>0){n=!0;break}r.push(e),a+=e.length}let s=" "+e+" ",o=r.join(s);return n&&(o+=s+"..."),o}function A(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function T(t){return t.replace(/[\<\>\:"\/\\\|\?*]/g,"")}function C(t){return JSON.stringify(t)}function I(t,e){let i=t.replace(/^[^A-Za-z]*/g,"").replace(/[ :\.\/\\\-\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000]/g,"_").replace(/[\W]/g,"");return i.length>0?i:e}function k(t){return t.replace(n,"")}},2391:(t,e,i)=>{"use strict";i.d(e,{T:()=>n});var n,r=i(421),a=i(5079),s=i(5807),o=i(167);!function(t){const e="...";let i,n,l,h;function u(){if(i)return;i=document.createElement("span"),document.body.appendChild(i);const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","0"),t.setAttribute("width","0"),t.setAttribute("position","absolute"),t.style.top="0px",t.style.left="0px",t.style.position="absolute",t.style.height="0px",t.style.width="0px",n=document.createElementNS("http://www.w3.org/2000/svg","text"),t.appendChild(n),document.body.appendChild(t);let e=document.createElement("canvas");l=e.getContext("2d");let r=window.getComputedStyle(n);h=r?r.fontFamily:""}function c(t,e){return u(),l.font=(t.fontStyle||"")+" "+(t.fontVariant||"")+" "+(t.fontWeight||"")+" "+t.fontSize+" "+(t.fontFamily||h),l.measureText(e||t.text).width}function d(t,e){for(u();n.firstChild;)n.removeChild(n.firstChild);return n.setAttribute("style",null),n.style.visibility="hidden",n.style.fontFamily=t.fontFamily||h,n.style.fontVariant=t.fontVariant,n.style.fontSize=t.fontSize,n.style.fontWeight=t.fontWeight,n.style.fontStyle=t.fontStyle,n.style.whiteSpace=t.whiteSpace||"nowrap",n.appendChild(document.createTextNode(e||t.text)),n.getBBox()}function m(e){let i=e.fontFamily+e.fontSize,n=o.Y.getData(i);if(null==n){let r={fontFamily:e.fontFamily,fontSize:e.fontSize,text:"M"};n=t.measureSvgTextRect(r),n.height>0&&o.Y.setData(i,n)}return n}function p(t,e=!1){let i=m(t).height;return e&&(i*=.7),i}function f(t){let e=window.getComputedStyle(t);return e?{text:t.textContent,fontFamily:e.fontFamily,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant,whiteSpace:e.whiteSpace}:{text:t.textContent,fontFamily:"",fontSize:"0"}}function y(t,i){if(u(),0===t.text.length)return t.text;let n=c(t);if(n<i)return t.text;let a=r.IL(t),s=a.text=e+a.text,o=1,l=s.length,h=3;for(;o<=l;)if(h=(o+l)/2|0,a.text=s.substr(0,h),n=c(a),i>n)o=h+1;else{if(!(i<n))break;l=h-1}return a.text=s.substr(0,h),n=c(a),n>i&&h--,s.substr(3,h-3)+e}t.removeSpanElement=function(){i&&i.remove&&i.remove(),i=null},t.measureSvgTextWidth=c,t.measureSvgTextRect=d,t.measureSvgTextHeight=function(t,e){return d(t,e).height},t.estimateSvgTextBaselineDelta=function(t){let e=m(t);return e.y+e.height},t.estimateSvgTextHeight=p,t.measureSvgTextElementWidth=function(t){return c(f(t))},t.getMeasurementProperties=function(t){const e=window.getComputedStyle(t);return{text:t.value||t.textContent,fontFamily:e.fontFamily,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant,whiteSpace:e.whiteSpace}},t.getSvgMeasurementProperties=f,t.getDivElementWidth=function(t){const e=window.getComputedStyle(t);return e?e.width:"0"},t.getTailoredTextOrDefault=y,t.svgEllipsis=function(t,e){let i=f(t),n=i.text,r=y(i,e);n!==r&&(t.textContent=r)},t.wordBreak=function(t,e,i,n=0){let r=f(t),a=p(r)+n,o=Math.max(1,Math.floor(i/a)),l=t?t.getAttribute("y"):null,h=t?t.textContent:null;t.textContent=null;let u=s.cA(h,r,c,e,o);const d=document.createDocumentFragment();for(let t=0,i=u.length;t<i;t++){const i=0===t?l:a;r.text=u[t];const n=document.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttribute("x","0"),n.setAttribute("dy",i?i.toString():null),n.appendChild(document.createTextNode(y(r,e))),d.appendChild(n)}t.appendChild(d)},t.wordBreakOverflowingText=function(t,e,i,n=0){const r=f(t);let o=p(r)+n,l=Math.max(1,Math.floor(i/o));const h=t.textContent;t.textContent=null;const u=s.cA(h,r,c,e,l),d=document.createDocumentFragment();for(let t=0;t<u.length;t++){const i=document.createElement("span");i.classList.add("overflowingText"),i.style.overflow="hidden",i.style.whiteSpace="nowrap",i.style.textOverflow="ellipsis",i.style.display="block",i.style.width=a.dI(e),i.appendChild(document.createTextNode(u[t])),i.appendChild(document.createTextNode(y(r,e))),d.appendChild(i)}t.appendChild(d)}}(n||(n={}))},5062:(t,e,i)=>{"use strict";i.d(e,{vt:()=>b});var n=i(3224),r=i(1520),a=i(1248),s=i(3100),o=i(5249),l=i(4182),h=i(5442),u=l.eV,c=l.WR,d=a;const m={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"},p={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",RestatementComma:"{0}, {1}",RestatementCompoundAnd:"{0} and {1}",RestatementCompoundOr:"{0} or {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlighted)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlighted)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"};let f={nullValue:p.NullValue,trueValue:p.BooleanTrue,falseValue:p.BooleanFalse,NaN:p.NaNValue,infinity:p.InfinityValue,negativeInfinity:p.NegativeInfinityValue,beautify:t=>function(t){let e=m[t];return e&&p[e]||t}(t),describe:t=>function(t){let e=-1===t?"Auto":t.toString(),i=p["DisplayUnitSystem_E"+e+"_Title"],n=t<=0?"{0}":p["DisplayUnitSystem_E"+e+"_LabelFormat"];if(i||n)return{title:i,format:n}}(t),restatementComma:p.RestatementComma,restatementCompoundAnd:p.RestatementCompoundAnd,restatementCompoundOr:p.RestatementCompoundOr};const y=2,g=1e3,_=1e4,v=2;function b(t){const e=t.allowFormatBeautification?f.beautify(t.format):t.format,{cultureSelector:i}=t;if(function(t){let e=t.value,i=t.value2,n=t.format;if(t.formatSingleValues&&n&&Math.abs(e)<_)if(s.jq.isStandardFormat(n)){if(h.Fq(e))return!1}else if(s.jq.getCustomFormatMetadata(n,!0).precision<v)return!1;if("number"==typeof e||"number"==typeof i)return!0}(t)){let a=function(t){if(null==t)return new n.b4(f.describe);switch(t){case r.I.Default:return new n.b4(f.describe);case r.I.WholeUnits:return new n.kX(f.describe);case r.I.Verbose:return new n.XQ;case r.I.DataLabels:return new n.ny(f.describe);default:return new n.b4(f.describe)}}(t.displayUnitSystemType),s=!!t.formatSingleValues;a.update(Math.max(Math.abs(t.value||0),Math.abs(t.value2||0)));let o,l=null!=t.precision;return l?o=-t.precision:a.displayUnit&&a.displayUnit.value>1&&(o=-y),{format:t=>{let n=x(t,!0);return d.isNullOrUndefinedOrWhiteSpaceString(n)?(t&&!a.isScalingUnit()&&Math.abs(t)<g&&!l&&(t=h.CR(t)),s?a.formatSingleValue(t,e,o,l,i):a.format(t,e,o,l,i)):n},displayUnit:a.displayUnit,options:t}}if(a=t.value,l=t.value2,u=t.tickCount,a instanceof Date&&l instanceof Date&&null!=u){const e=o.Z.GET_INTERVAL_UNIT(t.value,t.value2,t.tickCount);return{format:t=>{if(null==t)return f.nullValue;let n=s.r9.dateFormatString(e);return M({value:t,cultureSelector:i,format:n})},options:t}}var a,l,u;return function(t,e,i){const n=t;return{format:t=>null==t?f.nullValue:M({value:t,cultureSelector:i,format:n})}}(e,0,i)}function M(t){const{value:e,format:i,nullsAreBlank:n,cultureSelector:r}=t;let a=x(e,n||!1);return d.isNullOrUndefinedOrWhiteSpaceString(a)?s.r9.formatValue(e,i,r):a}function x(t,e){return null==t&&e?f.nullValue:!0===t?f.trueValue:!1===t?f.falseValue:"number"==typeof t&&isNaN(t)?f.NaN:t===Number.NEGATIVE_INFINITY?f.negativeInfinity:t===Number.POSITIVE_INFINITY?f.infinity:""}u.fromPrimitiveTypeAndCategory(c.DateTime)},5807:(t,e,i)=>{"use strict";i.d(e,{cA:()=>o});const n=" ",r=/[\s\n]+/g;function a(t,e,i){return e.text=t,i(e)}function s(t,e,i,n){return e.text=t,i(e,n)}function o(t,e,i,o,l,h){h=h||((t,e)=>t.text);let u=[],c=function(t){return t.split(r)}(t),d=0,m=[];for(let t of c){if(l>0&&u.length>=l-1){m.push(t);continue}let r=0===m.length?a(t,e,i):a(n+t,e,i);if(d+r>o){if(0===m.length){u.push(s(t,e,h,o)),d=0,m=[];continue}u.push(s(m.join(n),e,h,o)),d=0,m=[]}m.push(t),d+=r}return m&&m.length&&u.push(s(m.join(n),e,h,o)),u}},5442:(t,e,i)=>{"use strict";i.d(e,{CR:()=>_,Fq:()=>M,Id:()=>m,Vi:()=>r,XV:()=>c,Xm:()=>g,YL:()=>u,Yt:()=>d,c4:()=>b,eC:()=>h,h1:()=>n,hA:()=>v,iW:()=>y,pp:()=>p,w1:()=>f}),Number.MAX_VALUE,Number.MAX_VALUE;const n=-308,r=1e-4,a=12,s=Math.log(10),o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,1e23,1e24,1e25,1e26,1e27,1e28,1e29,1e30,1e31,1e32,1e33,1e34,1e35,1e36,1e37,1e38,1e39,1e40,1e41,1e42,1e43,1e44,1e45,1e46,1e47,1e48,1e49,1e50,1e51,1e52,1e53,1e54,1e55,1e56,1e57,1e58,1e59,1e60,1e61,1e62,1e63,1e64,1e65,1e66,1e67,1e68,1e69,1e70,1e71,1e72,1e73,1e74,1e75,1e76,1e77,1e78,1e79,1e80,1e81,1e82,1e83,1e84,1e85,1e86,1e87,1e88,1e89,1e90,1e91,1e92,1e93,1e94,1e95,1e96,1e97,1e98,1e99,1e100,1e101,1e102,1e103,1e104,1e105,1e106,1e107,1e108,1e109,1e110,1e111,1e112,1e113,1e114,1e115,1e116,1e117,1e118,1e119,1e120,1e121,1e122,1e123,1e124,1e125,1e126,1e127,1e128,1e129,1e130,1e131,1e132,1e133,1e134,1e135,1e136,1e137,1e138,1e139,1e140,1e141,1e142,1e143,1e144,1e145,1e146,1e147,1e148,1e149,1e150,1e151,1e152,1e153,1e154,1e155,1e156,1e157,1e158,1e159,1e160,1e161,1e162,1e163,1e164,1e165,1e166,1e167,1e168,1e169,1e170,1e171,1e172,1e173,1e174,1e175,1e176,1e177,1e178,1e179,1e180,1e181,1e182,1e183,1e184,1e185,1e186,1e187,1e188,1e189,1e190,1e191,1e192,1e193,1e194,1e195,1e196,1e197,1e198,1e199,1e200,1e201,1e202,1e203,1e204,1e205,1e206,1e207,1e208,1e209,1e210,1e211,1e212,1e213,1e214,1e215,1e216,1e217,1e218,1e219,1e220,1e221,1e222,1e223,1e224,1e225,1e226,1e227,1e228,1e229,1e230,1e231,1e232,1e233,1e234,1e235,1e236,1e237,1e238,1e239,1e240,1e241,1e242,1e243,1e244,1e245,1e246,1e247,1e248,1e249,1e250,1e251,1e252,1e253,1e254,1e255,1e256,1e257,1e258,1e259,1e260,1e261,1e262,1e263,1e264,1e265,1e266,1e267,1e268,1e269,1e270,1e271,1e272,1e273,1e274,1e275,1e276,1e277,1e278,1e279,1e280,1e281,1e282,1e283,1e284,1e285,1e286,1e287,1e288,1e289,1e290,1e291,1e292,1e293,1e294,1e295,1e296,1e297,1e298,1e299,1e300,1e301,1e302,1e303,1e304,1e305,1e306,1e307,1e308],l=[1,.1,.01,.001,1e-4,1e-5,1e-6,1e-7,1e-8,1e-9,1e-10,1e-11,1e-12,1e-13,1e-14,1e-15,1e-16,1e-17,1e-18,1e-19,1e-20,1e-21,1e-22,1e-23,1e-24,1e-25,1e-26,1e-27,1e-28,1e-29,1e-30,1e-31,1e-32,1e-33,1e-34,1e-35,1e-36,1e-37,1e-38,1e-39,1e-40,1e-41,1e-42,1e-43,1e-44,1e-45,1e-46,1e-47,1e-48,1e-49,1e-50,1e-51,1e-52,1e-53,1e-54,1e-55,1e-56,1e-57,1e-58,1e-59,1e-60,1e-61,1e-62,1e-63,1e-64,1e-65,1e-66,1e-67,1e-68,1e-69,1e-70,1e-71,1e-72,1e-73,1e-74,1e-75,1e-76,1e-77,1e-78,1e-79,1e-80,1e-81,1e-82,1e-83,1e-84,1e-85,1e-86,1e-87,1e-88,1e-89,1e-90,1e-91,1e-92,1e-93,1e-94,1e-95,1e-96,1e-97,1e-98,1e-99,1e-100,1e-101,1e-102,1e-103,1e-104,1e-105,1e-106,1e-107,1e-108,1e-109,1e-110,1e-111,1e-112,1e-113,1e-114,1e-115,1e-116,1e-117,1e-118,1e-119,1e-120,1e-121,1e-122,1e-123,1e-124,1e-125,1e-126,1e-127,1e-128,1e-129,1e-130,1e-131,1e-132,1e-133,1e-134,1e-135,1e-136,1e-137,1e-138,1e-139,1e-140,1e-141,1e-142,1e-143,1e-144,1e-145,1e-146,1e-147,1e-148,1e-149,1e-150,1e-151,1e-152,1e-153,1e-154,1e-155,1e-156,1e-157,1e-158,1e-159,1e-160,1e-161,1e-162,1e-163,1e-164,1e-165,1e-166,1e-167,1e-168,1e-169,1e-170,1e-171,1e-172,1e-173,1e-174,1e-175,1e-176,1e-177,1e-178,1e-179,1e-180,1e-181,1e-182,1e-183,1e-184,1e-185,1e-186,1e-187,1e-188,1e-189,1e-190,1e-191,1e-192,1e-193,1e-194,1e-195,1e-196,1e-197,1e-198,1e-199,1e-200,1e-201,1e-202,1e-203,1e-204,1e-205,1e-206,1e-207,1e-208,1e-209,1e-210,1e-211,1e-212,1e-213,1e-214,1e-215,1e-216,1e-217,1e-218,1e-219,1e-220,1e-221,1e-222,1e-223,1e-224,1e-225,1e-226,1e-227,1e-228,1e-229,1e-230,1e-231,1e-232,1e-233,1e-234,1e-235,1e-236,1e-237,1e-238,1e-239,1e-240,1e-241,1e-242,1e-243,1e-244,1e-245,1e-246,1e-247,1e-248,1e-249,1e-250,1e-251,1e-252,1e-253,1e-254,1e-255,1e-256,1e-257,1e-258,1e-259,1e-260,1e-261,1e-262,1e-263,1e-264,1e-265,1e-266,1e-267,1e-268,1e-269,1e-270,1e-271,1e-272,1e-273,1e-274,1e-275,1e-276,1e-277,1e-278,1e-279,1e-280,1e-281,1e-282,1e-283,1e-284,1e-285,1e-286,1e-287,1e-288,1e-289,1e-290,1e-291,1e-292,1e-293,1e-294,1e-295,1e-296,1e-297,1e-298,1e-299,1e-300,1e-301,1e-302,1e-303,1e-304,1e-305,1e-306,1e-307,1e-308,1e-309,1e-310,1e-311,1e-312,1e-313,1e-314,1e-315,1e-316,1e-317,1e-318,1e-319,1e-320,1e-321,1e-322,1e-323,0];function h(t){return t>=0?t<o.length?o[t]:1/0:(t=-t)>0&&t<l.length?l[t]:0}function u(t){return t>1&&t<1e16?t<1e8?t<1e4?t<100?t<10?0:1:t<1e3?2:3:t<1e6?t<1e5?4:5:t<1e7?6:7:t<1e12?t<1e10?t<1e9?8:9:t<1e11?10:11:t<1e14?t<1e13?12:13:t<1e15?14:15:t>1e-16&&t<1?t<1e-8?t<1e-12?t<1e-14?t<1e-15?-16:-15:t<1e-13?-14:-13:t<1e-10?t<1e-11?-12:-11:t<1e-9?-10:-9:t<1e-4?t<1e-6?t<1e-7?-8:-7:t<1e-5?-6:-5:t<.01?t<.001?-4:-3:t<.1?-2:-1:p(Math.log(t)/s)}function c(t,e){if(void 0===e&&(e=a),!t||!isFinite(t))return;let i=u(Math.abs(t));return i<n?0:h(Math.max(i-e,1-l.length))}function d(t,e,i){return i=x(i,t,e),t<e&&Math.abs(t-e)>i}function m(t,e,i){return i=x(i,t,e),t>e||Math.abs(t-e)<i}function p(t,e){e=null!=e?e:r;let i=Math.round(t);return Math.abs(t-i)<e?i:Math.floor(t)}function f(t,e){e=x(e,r);let i=Math.round(t);return Math.abs(t-i)<e?i:Math.ceil(t)}function y(t,e){return 0===(e=x(e,r))||0===t?t:Math.floor(t/e)*e}function g(t,e){return 0===(e=x(e,r))||0===t?t:Math.ceil(t/e)*e}function _(t,e){if(0===(e=x(e,r))||0===t)return t;let i=Math.round(t/e)*e,n=Math.round(u(Math.abs(t))-u(e))+1;return n>0&&n<16&&(i=parseFloat(i.toPrecision(n))),i}function v(t,e,i){return null==t?t:t<e?e:t>i?i:t}function b(t){return _(t,c(t))}function M(t){return null!==t&&t%1==0}function x(t,e,i){if(void 0!==t)return t;let n;return n=c(i?e?Math.min(Math.abs(e),Math.abs(i)):i:e),n||r}},2879:(t,e,i)=>{"use strict";i.d(e,{e:()=>n});var n,r=i(5442);!function(t){t.hasFlag=function(t,e){return(t&e)===e},t.setFlag=function(t,e){return t|e},t.resetFlag=function(t,e){return t&~e},t.toString=function(t,e){return t[e]},t.getBitCount=function(t){if(!(0,r.Fq)(t))return 0;let e=0,i=t;for(;0!==i;)1&~i||e++,i>>>=1;return e}}(n||(n={}))},3051:(t,e,i)=>{"use strict";var n;i.d(e,{A:()=>n}),function(t){t.run=function(t,e,i){return t.lastIndex=i||0,t.exec(e)}}(n||(n={}))},2657:(t,e,i)=>{"use strict";function n(t,e){return t===e||JSON.stringify(t)===JSON.stringify(e)}i.d(e,{a:()=>n})},372:(t,e,i)=>{"use strict";i.d(e,{j:()=>a});var n=i(5442),r=i(67);class a{static calculate(t,e,i,s,o,l){let h=new a;if(e=void 0===e?10:n.hA(e,a.MIN_COUNT,a.MAX_COUNT),void 0===s&&(s=n.h1),void 0===o&&(o=!1),void 0===i&&(i=1),void 0===l&&(l=[1,2,5]),t.forcedSingleStop)return h.interval=t.getSize(),h.intervalOffset=h.interval-(t.forcedSingleStop-t.min),h.min=t.min,h.max=t.max,h.sequence=[t.forcedSingleStop],h;let u,c=0,d=0,m=9,p=i>0&&!t.hasFixedMin,f=i>0&&!t.hasFixedMax,y=t.getSize(),g=n.YL(y),_=n.YL(l[0]);if(g-=_,g-=n.YL(e),g=Math.max(g,s-_+1),0!==c){let e=n.eC(g),i=n.iW(t.min,e),a=n.Xm(t.max,e),s=r.S.calculateFixedRange(i,a);s.shrinkByStep(t,c),d=s.min,m=s.max,u=Math.floor(s.getSize()/c)}else{let a;for(a=0;a<3;a++){let s=g+a,h=n.eC(s),y=n.iW(t.min,h),_=n.Xm(t.max,h),v=l.length,b=n.eC(s-1);for(let s=0;s<v;s++){let h=l[s]*b,g=r.S.calculateFixedRange(y,_,o);if(g.shrinkByStep(t,h),p&&t.min===g.min&&i>=1&&(g.min-=h),f&&t.max===g.max&&i>=1&&(g.max+=h),u=n.w1(g.getSize()/h,n.Vi),u<=e||2===a&&s===v-1||1===e&&2===u&&(h>t.getSize()||t.min<0&&t.max>0&&2*h>=t.getSize())){c=h,d=g.min,m=g.max;break}}if(0!==c)break}}(u>32*e||u>a.MAX_COUNT)&&(u=Math.min(32*e,a.MAX_COUNT),c=(m-d)/u),h.min=d,h.max=m,h.interval=c,h.intervalOffset=d-t.min,h.maxAllowedMargin=i,h.canExtendMin=p,h.canExtendMax=f;let v=n.XV(c,0);h.precision=v;let b=[],M=n.CR(d,v);b.push(M);for(let t=0;t<u;t++)M=n.CR(M+c,v),b.push(M);return h.sequence=b,h.trimMinMax(t.min,t.max),h}static calculateUnits(t,e,i,r){i=n.hA(i,a.MIN_COUNT,a.MAX_COUNT),t===e&&(e=t+1);let s=0,o=0;for(let a=0;a<r.length&&(o=r[a],s=n.w1(e/o)-n.pp(t/o),!(s<=i));a++);let l=-t;l%=o;let h=new a;h.sequence=[];for(let i=t+l;h.sequence.push(i),!(i>=e);i+=o);return h.interval=o,h.intervalOffset=l,h.min=h.sequence[0],h.max=h.sequence[h.sequence.length-1],h}trimMinMax(t,e){let i=(t-this.min)/this.interval,n=(this.max-e)/this.interval;(!this.canExtendMin||i>this.maxAllowedMargin&&i>.001)&&(this.min=t),(!this.canExtendMax||n>this.maxAllowedMargin&&n>.001)&&(this.max=e)}}a.MIN_COUNT=1,a.MAX_COUNT=1e3},67:(t,e,i)=>{"use strict";i.d(e,{S:()=>a});var n,r=i(5442);class a{_ensureIncludeZero(){this.includeZero&&(this.min>0&&!this.hasFixedMin&&(this.min=0),this.max<0&&!this.hasFixedMax&&(this.max=0))}_ensureNotEmpty(){if(this.min===this.max)if(this.min){let t,e=this.min,i=r.YL(Math.abs(e));i>=0&&i<4?(t=.5,this.forcedSingleStop=e):(t=r.eC(i)/2,this.forcedSingleStop=null),this.min=e-t,this.max=e+t}else this.min=0,this.max=a.DEFAULT_MAX,this.hasFixedMin=!0,this.hasFixedMax=!0}_ensureDirection(){if(this.min>this.max){let t=this.min;this.min=this.max,this.max=t}}getSize(){return this.max-this.min}shrinkByStep(t,e){let i=this.min/e,n=t.min/e,r=Math.floor(n-i);this.min+=r*e,i=this.max/e,n=t.max/e,r=Math.ceil(n-i),this.max+=r*e}static calculate(t,e,i,s,o){let l=new a;return l.includeZero=!!o,l.hasDataRange=n.hasValue(t)&&n.hasValue(e),l.hasFixedMin=n.hasValue(i),l.hasFixedMax=n.hasValue(s),t=r.hA(t,a.MIN_SUPPORTED_DOUBLE,a.MAX_SUPPORTED_DOUBLE),e=r.hA(e,a.MIN_SUPPORTED_DOUBLE,a.MAX_SUPPORTED_DOUBLE),l.hasFixedMin&&l.hasFixedMax?(l.min=i,l.max=s):l.hasFixedMin?(l.min=i,l.max=e>i?e:i):l.hasFixedMax?(l.min=t<s?t:s,l.max=s):l.hasDataRange?(l.min=t,l.max=e):(l.min=0,l.max=0),l._ensureIncludeZero(),l._ensureNotEmpty(),l._ensureDirection(),0===l.min?l.hasFixedMin=!0:0===l.max&&(l.hasFixedMax=!0),l}static calculateDataRange(t,e,i){return n.hasValue(t)&&n.hasValue(e)?a.calculate(t,e,null,null,i):a.calculateFixedRange(0,a.DEFAULT_MAX)}static calculateFixedRange(t,e,i){let n=new a;return n.hasDataRange=!1,n.includeZero=i,n.min=t,n.max=e,n._ensureIncludeZero(),n._ensureNotEmpty(),n._ensureDirection(),n.hasFixedMin=!0,n.hasFixedMax=!0,n}}a.DEFAULT_MAX=10,a.MIN_SUPPORTED_DOUBLE=-1e307,a.MAX_SUPPORTED_DOUBLE=1e307,function(t){t.hasValue=function(t){return null!=t}}(n||(n={}))},5079:(t,e,i)=>{"use strict";i.d(e,{dI:()=>r});const n="px";function r(t){return t+n}},421:(t,e,i)=>{"use strict";function n(t,e){function i(){}i.prototype=t;let n=new i;return e&&e(n),n}i.d(e,{IL:()=>n})},4182:(t,e,i)=>{"use strict";i.d(e,{WR:()=>n,eV:()=>h});var n,r,a,s,o=i(2879),l=i(2657);class h{constructor(t,e,i,n){this.underlyingType=t,this.category=e,o.e.hasFlag(t,a.Temporal)&&(this.temporalType=new c(t)),o.e.hasFlag(t,a.Geography)&&(this.geographyType=new d(t)),o.e.hasFlag(t,a.Miscellaneous)&&(this.miscType=new m(t)),o.e.hasFlag(t,a.Formatting)&&(this.formattingType=new p(t)),o.e.hasFlag(t,a.Enumeration)&&(this.enumType=i),o.e.hasFlag(t,a.Scripting)&&(this.scriptingType=new u(t)),o.e.hasFlag(t,a.Variant)&&(this.variationTypes=n)}static fromDescriptor(t){if((t=t||{}).text)return h.fromExtendedType(a.Text);if(t.integer)return h.fromExtendedType(a.Integer);if(t.numeric)return h.fromExtendedType(a.Double);if(t.bool)return h.fromExtendedType(a.Boolean);if(t.dateTime)return h.fromExtendedType(a.DateTime);if(t.duration)return h.fromExtendedType(a.Duration);if(t.binary)return h.fromExtendedType(a.Binary);if(t.none)return h.fromExtendedType(a.None);if(t.scripting&&t.scripting.source)return h.fromExtendedType(a.ScriptSource);if(t.enumeration)return h.fromEnum(t.enumeration);if(t.temporal){if(t.temporal.year)return h.fromExtendedType(a.Years_Integer);if(t.temporal.quarter)return h.fromExtendedType(a.Quarters_Integer);if(t.temporal.month)return h.fromExtendedType(a.Months_Integer);if(t.temporal.day)return h.fromExtendedType(a.DayOfMonth_Integer);if(t.temporal.paddedDateTableDate)return h.fromExtendedType(a.PaddedDateTableDates)}if(t.geography){if(t.geography.address)return h.fromExtendedType(a.Address);if(t.geography.city)return h.fromExtendedType(a.City);if(t.geography.continent)return h.fromExtendedType(a.Continent);if(t.geography.country)return h.fromExtendedType(a.Country);if(t.geography.county)return h.fromExtendedType(a.County);if(t.geography.region)return h.fromExtendedType(a.Region);if(t.geography.postalCode)return h.fromExtendedType(a.PostalCode_Text);if(t.geography.stateOrProvince)return h.fromExtendedType(a.StateOrProvince);if(t.geography.place)return h.fromExtendedType(a.Place);if(t.geography.latitude)return h.fromExtendedType(a.Latitude_Double);if(t.geography.longitude)return h.fromExtendedType(a.Longitude_Double)}if(t.misc){if(t.misc.image)return h.fromExtendedType(a.Image);if(t.misc.imageUrl)return h.fromExtendedType(a.ImageUrl);if(t.misc.webUrl)return h.fromExtendedType(a.WebUrl);if(t.misc.barcode)return h.fromExtendedType(a.Barcode_Text)}if(t.formatting){if(t.formatting.color)return h.fromExtendedType(a.Color);if(t.formatting.formatString)return h.fromExtendedType(a.FormatString);if(t.formatting.alignment)return h.fromExtendedType(a.Alignment);if(t.formatting.labelDisplayUnits)return h.fromExtendedType(a.LabelDisplayUnits);if(t.formatting.fontSize)return h.fromExtendedType(a.FontSize);if(t.formatting.labelDensity)return h.fromExtendedType(a.LabelDensity)}if(t.extendedType)return h.fromExtendedType(t.extendedType);if(t.operations&&t.operations.searchEnabled)return h.fromExtendedType(a.SearchEnabled);if(t.variant){let e=t.variant.map((t=>h.fromDescriptor(t)));return h.fromVariant(e)}return h.fromExtendedType(a.Null)}static fromExtendedType(t){let e=_(t=t||a.Null),i=function(t){if(function(t){return(t&y)===t}(t))return null;let e=s[t];if(e){let t=e.lastIndexOf("_");if(t>0){let i=e.slice(0,t);s[i]&&(e=i)}}return e||null}(t);return h.fromPrimitiveTypeAndCategory(e,i)}static fromPrimitiveTypeAndCategory(t,e){e=e||null;let i=(t=t||n.Null).toString();return e&&(i+="|"+e),h.typeCache[i]||(h.typeCache[i]=new h(function(t,e){let i=r[t],o=s[i];if(null==o&&(o=a.Null),t&&e){let i=s[e];if(i){let e=_(i);e===n.Null?(i|=o,s[i]&&(o=i)):e===t&&(o=i)}}return o}(t,e),e))}static fromEnum(t){return new h(a.Enumeration,null,t)}static fromVariant(t){return new h(a.Variant,null,null,t)}static isCompatibleTo(t,e){let i=h.fromDescriptor(t);for(let t of e)if(h.fromDescriptor(t).isCompatibleFrom(i))return!0;return!1}isCompatibleFrom(t){let e=t.primitiveType;return!!(this===t||this.primitiveType===e||e===n.Null||this.numeric&&t.numeric)}equals(t){return(0,l.a)(this,t)}get primitiveType(){return _(this.underlyingType)}get extendedType(){return this.underlyingType}get categoryString(){return this.category}get text(){return this.primitiveType===n.Text}get numeric(){return o.e.hasFlag(this.underlyingType,a.Numeric)}get integer(){return this.primitiveType===n.Integer}get bool(){return this.primitiveType===n.Boolean}get dateTime(){return this.primitiveType===n.DateTime||this.primitiveType===n.Date||this.primitiveType===n.Time}get duration(){return this.primitiveType===n.Duration}get binary(){return this.primitiveType===n.Binary}get none(){return this.primitiveType===n.None}get temporal(){return this.temporalType}get geography(){return this.geographyType}get misc(){return this.miscType}get formatting(){return this.formattingType}get enumeration(){return this.enumType}get scripting(){return this.scriptingType}get variant(){return this.variationTypes}}h.typeCache={};class u{constructor(t){this.underlyingType=t}get source(){return v(this.underlyingType,a.ScriptSource)}}class c{constructor(t){this.underlyingType=t}get year(){return v(this.underlyingType,a.Years)}get quarter(){return v(this.underlyingType,a.Quarters)}get month(){return v(this.underlyingType,a.Months)}get day(){return v(this.underlyingType,a.DayOfMonth)}get paddedDateTableDate(){return v(this.underlyingType,a.PaddedDateTableDates)}}class d{constructor(t){this.underlyingType=t}get address(){return v(this.underlyingType,a.Address)}get city(){return v(this.underlyingType,a.City)}get continent(){return v(this.underlyingType,a.Continent)}get country(){return v(this.underlyingType,a.Country)}get county(){return v(this.underlyingType,a.County)}get region(){return v(this.underlyingType,a.Region)}get postalCode(){return v(this.underlyingType,a.PostalCode)}get stateOrProvince(){return v(this.underlyingType,a.StateOrProvince)}get place(){return v(this.underlyingType,a.Place)}get latitude(){return v(this.underlyingType,a.Latitude)}get longitude(){return v(this.underlyingType,a.Longitude)}}class m{constructor(t){this.underlyingType=t}get image(){return v(this.underlyingType,a.Image)}get imageUrl(){return v(this.underlyingType,a.ImageUrl)}get webUrl(){return v(this.underlyingType,a.WebUrl)}get barcode(){return v(this.underlyingType,a.Barcode)}}class p{constructor(t){this.underlyingType=t}get color(){return v(this.underlyingType,a.Color)}get formatString(){return v(this.underlyingType,a.FormatString)}get alignment(){return v(this.underlyingType,a.Alignment)}get labelDisplayUnits(){return v(this.underlyingType,a.LabelDisplayUnits)}get fontSize(){return v(this.underlyingType,a.FontSize)}get labelDensity(){return v(this.underlyingType,a.LabelDensity)}}!function(t){t[t.Null=0]="Null",t[t.Text=1]="Text",t[t.Decimal=2]="Decimal",t[t.Double=3]="Double",t[t.Integer=4]="Integer",t[t.Boolean=5]="Boolean",t[t.Date=6]="Date",t[t.DateTime=7]="DateTime",t[t.DateTimeZone=8]="DateTimeZone",t[t.Time=9]="Time",t[t.Duration=10]="Duration",t[t.Binary=11]="Binary",t[t.None=12]="None",t[t.Variant=13]="Variant"}(n||(n={})),function(t){t[t.Null=0]="Null",t[t.Text=1]="Text",t[t.Decimal=2]="Decimal",t[t.Double=3]="Double",t[t.Integer=4]="Integer",t[t.Boolean=5]="Boolean",t[t.Date=6]="Date",t[t.DateTime=7]="DateTime",t[t.DateTimeZone=8]="DateTimeZone",t[t.Time=9]="Time",t[t.Duration=10]="Duration",t[t.Binary=11]="Binary",t[t.None=12]="None",t[t.Variant=13]="Variant"}(r||(r={})),function(t){t[t.Numeric=256]="Numeric",t[t.Temporal=512]="Temporal",t[t.Geography=1024]="Geography",t[t.Miscellaneous=2048]="Miscellaneous",t[t.Formatting=4096]="Formatting",t[t.Scripting=8192]="Scripting",t[t.Null=0]="Null",t[t.Text=1]="Text",t[t.Decimal=258]="Decimal",t[t.Double=259]="Double",t[t.Integer=260]="Integer",t[t.Boolean=5]="Boolean",t[t.Date=518]="Date",t[t.DateTime=519]="DateTime",t[t.DateTimeZone=520]="DateTimeZone",t[t.Time=521]="Time",t[t.Duration=10]="Duration",t[t.Binary=11]="Binary",t[t.None=12]="None",t[t.Variant=13]="Variant",t[t.Years=66048]="Years",t[t.Years_Text=66049]="Years_Text",t[t.Years_Integer=66308]="Years_Integer",t[t.Years_Date=66054]="Years_Date",t[t.Years_DateTime=66055]="Years_DateTime",t[t.Months=131584]="Months",t[t.Months_Text=131585]="Months_Text",t[t.Months_Integer=131844]="Months_Integer",t[t.Months_Date=131590]="Months_Date",t[t.Months_DateTime=131591]="Months_DateTime",t[t.PaddedDateTableDates=197127]="PaddedDateTableDates",t[t.Quarters=262656]="Quarters",t[t.Quarters_Text=262657]="Quarters_Text",t[t.Quarters_Integer=262916]="Quarters_Integer",t[t.Quarters_Date=262662]="Quarters_Date",t[t.Quarters_DateTime=262663]="Quarters_DateTime",t[t.DayOfMonth=328192]="DayOfMonth",t[t.DayOfMonth_Text=328193]="DayOfMonth_Text",t[t.DayOfMonth_Integer=328452]="DayOfMonth_Integer",t[t.DayOfMonth_Date=328198]="DayOfMonth_Date",t[t.DayOfMonth_DateTime=328199]="DayOfMonth_DateTime",t[t.Address=6554625]="Address",t[t.City=6620161]="City",t[t.Continent=6685697]="Continent",t[t.Country=6751233]="Country",t[t.County=6816769]="County",t[t.Region=6882305]="Region",t[t.PostalCode=6947840]="PostalCode",t[t.PostalCode_Text=6947841]="PostalCode_Text",t[t.PostalCode_Integer=6948100]="PostalCode_Integer",t[t.StateOrProvince=7013377]="StateOrProvince",t[t.Place=7078913]="Place",t[t.Latitude=7144448]="Latitude",t[t.Latitude_Decimal=7144706]="Latitude_Decimal",t[t.Latitude_Double=7144707]="Latitude_Double",t[t.Longitude=7209984]="Longitude",t[t.Longitude_Decimal=7210242]="Longitude_Decimal",t[t.Longitude_Double=7210243]="Longitude_Double",t[t.Image=13109259]="Image",t[t.ImageUrl=13174785]="ImageUrl",t[t.WebUrl=13240321]="WebUrl",t[t.Barcode=13305856]="Barcode",t[t.Barcode_Text=13305857]="Barcode_Text",t[t.Barcode_Integer=13306116]="Barcode_Integer",t[t.Color=19664897]="Color",t[t.FormatString=19730433]="FormatString",t[t.Alignment=20058113]="Alignment",t[t.LabelDisplayUnits=20123649]="LabelDisplayUnits",t[t.FontSize=20189443]="FontSize",t[t.LabelDensity=20254979]="LabelDensity",t[t.Enumeration=26214401]="Enumeration",t[t.ScriptSource=32776193]="ScriptSource",t[t.SearchEnabled=65541]="SearchEnabled"}(a||(a={})),function(t){t[t.Numeric=256]="Numeric",t[t.Temporal=512]="Temporal",t[t.Geography=1024]="Geography",t[t.Miscellaneous=2048]="Miscellaneous",t[t.Formatting=4096]="Formatting",t[t.Scripting=8192]="Scripting",t[t.Null=0]="Null",t[t.Text=1]="Text",t[t.Decimal=258]="Decimal",t[t.Double=259]="Double",t[t.Integer=260]="Integer",t[t.Boolean=5]="Boolean",t[t.Date=518]="Date",t[t.DateTime=519]="DateTime",t[t.DateTimeZone=520]="DateTimeZone",t[t.Time=521]="Time",t[t.Duration=10]="Duration",t[t.Binary=11]="Binary",t[t.None=12]="None",t[t.Variant=13]="Variant",t[t.Years=66048]="Years",t[t.Years_Text=66049]="Years_Text",t[t.Years_Integer=66308]="Years_Integer",t[t.Years_Date=66054]="Years_Date",t[t.Years_DateTime=66055]="Years_DateTime",t[t.Months=131584]="Months",t[t.Months_Text=131585]="Months_Text",t[t.Months_Integer=131844]="Months_Integer",t[t.Months_Date=131590]="Months_Date",t[t.Months_DateTime=131591]="Months_DateTime",t[t.PaddedDateTableDates=197127]="PaddedDateTableDates",t[t.Quarters=262656]="Quarters",t[t.Quarters_Text=262657]="Quarters_Text",t[t.Quarters_Integer=262916]="Quarters_Integer",t[t.Quarters_Date=262662]="Quarters_Date",t[t.Quarters_DateTime=262663]="Quarters_DateTime",t[t.DayOfMonth=328192]="DayOfMonth",t[t.DayOfMonth_Text=328193]="DayOfMonth_Text",t[t.DayOfMonth_Integer=328452]="DayOfMonth_Integer",t[t.DayOfMonth_Date=328198]="DayOfMonth_Date",t[t.DayOfMonth_DateTime=328199]="DayOfMonth_DateTime",t[t.Address=6554625]="Address",t[t.City=6620161]="City",t[t.Continent=6685697]="Continent",t[t.Country=6751233]="Country",t[t.County=6816769]="County",t[t.Region=6882305]="Region",t[t.PostalCode=6947840]="PostalCode",t[t.PostalCode_Text=6947841]="PostalCode_Text",t[t.PostalCode_Integer=6948100]="PostalCode_Integer",t[t.StateOrProvince=7013377]="StateOrProvince",t[t.Place=7078913]="Place",t[t.Latitude=7144448]="Latitude",t[t.Latitude_Decimal=7144706]="Latitude_Decimal",t[t.Latitude_Double=7144707]="Latitude_Double",t[t.Longitude=7209984]="Longitude",t[t.Longitude_Decimal=7210242]="Longitude_Decimal",t[t.Longitude_Double=7210243]="Longitude_Double",t[t.Image=13109259]="Image",t[t.ImageUrl=13174785]="ImageUrl",t[t.WebUrl=13240321]="WebUrl",t[t.Barcode=13305856]="Barcode",t[t.Barcode_Text=13305857]="Barcode_Text",t[t.Barcode_Integer=13306116]="Barcode_Integer",t[t.Color=19664897]="Color",t[t.FormatString=19730433]="FormatString",t[t.Alignment=20058113]="Alignment",t[t.LabelDisplayUnits=20123649]="LabelDisplayUnits",t[t.FontSize=20189443]="FontSize",t[t.LabelDensity=20254979]="LabelDensity",t[t.Enumeration=26214401]="Enumeration",t[t.ScriptSource=32776193]="ScriptSource",t[t.SearchEnabled=65541]="SearchEnabled"}(s||(s={}));const f=255,y=65535,g=4294901760;function _(t){return t&f}function v(t,e){return(t&g)==(e&g)}},6812:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(3367);function r(t,e,i){if(!(this instanceof r))return new r(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}r.fromMGRS=function(t){return new r((0,n.gK)(t))},r.prototype.toMGRS=function(t){return(0,n.sY)([this.x,this.y],t)};const a=r},9499:(t,e,i)=>{"use strict";i.d(e,{A:()=>d});var n=i(7900),r=i(7404),a=i(2776),s=i(9334),o=i(8371),l=i(8277),h=i(4999),u=i(8025);function c(t,e){if(!(this instanceof c))return new c(t);e=e||function(t){if(t)throw t};var i=(0,n.A)(t);if("object"==typeof i){var a=c.projections.get(i.projName);if(a){if(i.datumCode&&"none"!==i.datumCode){var d=(0,h.A)(o.A,i.datumCode);d&&(i.datum_params=i.datum_params||(d.towgs84?d.towgs84.split(","):null),i.ellps=d.ellipse,i.datumName=d.datumName?d.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var m=(0,s.K)(i.a,i.b,i.rf,i.ellps,i.sphere),p=(0,s.P)(m.a,m.b,m.rf,i.R_A),f=(0,u.f)(i.nadgrids),y=i.datum||(0,l.A)(i.datumCode,i.datum_params,m.a,m.b,p.es,p.ep2,f);(0,r.A)(this,i),(0,r.A)(this,a),this.a=m.a,this.b=m.b,this.rf=m.rf,this.sphere=m.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=y,this.init(),e(null,this)}else e(t)}else e(t)}c.projections=a.Ay,c.projections.start();const d=c},1603:(t,e,i)=>{"use strict";function n(t,e,i){var n,r,a,s=i.x,o=i.y,l=i.z||0,h={};for(a=0;a<3;a++)if(!e||2!==a||void 0!==i.z)switch(0===a?(n=s,r=-1!=="ew".indexOf(t.axis[a])?"x":"y"):1===a?(n=o,r=-1!=="ns".indexOf(t.axis[a])?"y":"x"):(n=l,r="z"),t.axis[a]){case"e":case"n":h[r]=n;break;case"w":case"s":h[r]=-n;break;case"u":void 0!==i[r]&&(h.z=n);break;case"d":void 0!==i[r]&&(h.z=-n);break;default:return null}return h}i.d(e,{A:()=>n})},3471:(t,e,i)=>{"use strict";function n(t){r(t.x),r(t.y)}function r(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}i.d(e,{A:()=>n})},9013:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(8248),r=i(1393);function a(t){return Math.abs(t)<n.sK?t:t-(0,r.A)(t)*Math.PI}},7037:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(8248),r=i(1393);function a(t){return Math.abs(t)<=n.DF?t:t-(0,r.A)(t)*n.JM}},5280:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(7037);function r(t,e){if(void 0===t){if((t=Math.floor(30*((0,n.A)(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}},6356:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6344),r=i(714);function a(t){var e=Math.abs(t);return e=(0,r.A)(e*(1+e/((0,n.A)(1,e)+1))),t<0?-e:e}},8213:(t,e,i)=>{"use strict";function n(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}i.d(e,{A:()=>n})},8539:(t,e,i)=>{"use strict";function n(t,e){for(var i,n=2*Math.cos(e),r=t.length-1,a=t[r],s=0;--r>=0;)i=n*a-s+t[r],s=a,a=i;return Math.sin(e)*i}i.d(e,{A:()=>n})},3748:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(1782),r=i(1777);function a(t,e,i){for(var a,s,o=Math.sin(e),l=Math.cos(e),h=(0,n.A)(i),u=(0,r.A)(i),c=2*l*u,d=-2*o*h,m=t.length-1,p=t[m],f=0,y=0,g=0;--m>=0;)a=y,s=f,p=c*(y=p)-a-d*(f=g)+t[m],g=d*y-s+c*f;return[(c=o*u)*p-(d=l*h)*g,c*g+d*p]}},1777:(t,e,i)=>{"use strict";function n(t){var e=Math.exp(t);return(e+1/e)/2}i.d(e,{A:()=>n})},4733:(t,e,i)=>{"use strict";function n(t){return 1-.25*t*(1+t/16*(3+1.25*t))}i.d(e,{A:()=>n})},8834:(t,e,i)=>{"use strict";function n(t){return.375*t*(1+.25*t*(1+.46875*t))}i.d(e,{A:()=>n})},9195:(t,e,i)=>{"use strict";function n(t){return.05859375*t*t*(1+.75*t)}i.d(e,{A:()=>n})},9624:(t,e,i)=>{"use strict";function n(t){return t*t*t*(35/3072)}i.d(e,{A:()=>n})},5433:(t,e,i)=>{"use strict";function n(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}i.d(e,{A:()=>n})},1069:(t,e,i)=>{"use strict";function n(t,e){for(var i,n=2*Math.cos(2*e),r=t.length-1,a=t[r],s=0;--r>=0;)i=n*a-s+t[r],s=a,a=i;return e+i*Math.sin(2*e)}i.d(e,{A:()=>n})},6344:(t,e,i)=>{"use strict";function n(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}i.d(e,{A:()=>n})},364:(t,e,i)=>{"use strict";function n(t,e,i,n,r){var a,s;a=t/e;for(var o=0;o<15;o++)if(a+=s=(t-(e*a-i*Math.sin(2*a)+n*Math.sin(4*a)-r*Math.sin(6*a)))/(e-2*i*Math.cos(2*a)+4*n*Math.cos(4*a)-6*r*Math.cos(6*a)),Math.abs(s)<=1e-10)return a;return NaN}i.d(e,{A:()=>n})},3851:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(8248);function r(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*n.sK:n.sK;for(var r,a,s,o,l=Math.asin(.5*e),h=0;h<30;h++)if(a=Math.sin(l),s=Math.cos(l),o=t*a,l+=r=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-a/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(r)<=1e-10)return l;return NaN}},714:(t,e,i)=>{"use strict";function n(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}i.d(e,{A:()=>n})},2537:(t,e,i)=>{"use strict";function n(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}i.d(e,{A:()=>n})},3824:(t,e,i)=>{"use strict";function n(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}i.d(e,{A:()=>n})},8557:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(8248);function r(t,e){for(var i,r,a=.5*t,s=n.sK-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(s),s+=r=n.sK-2*Math.atan(e*Math.pow((1-i)/(1+i),a))-s,Math.abs(r)<=1e-10)return s;return-9999}},6882:(t,e,i)=>{"use strict";i.d(e,{A:()=>f});var n=1,r=.25,a=.046875,s=.01953125,o=.01068115234375,l=.75,h=.46875,u=.013020833333333334,c=.007120768229166667,d=.3645833333333333,m=.005696614583333333,p=.3076171875;function f(t){var e=[];e[0]=n-t*(r+t*(a+t*(s+t*o))),e[1]=t*(l-t*(a+t*(s+t*o)));var i=t*t;return e[2]=i*(h-t*(u+t*c)),i*=t,e[3]=i*(d-t*m),e[4]=i*t*p,e}},3667:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(688),r=i(8248),a=20;function s(t,e,i){for(var s=1/(1-e),o=t,l=a;l;--l){var h=Math.sin(o),u=1-e*h*h;if(o-=u=((0,n.A)(o,h,Math.cos(o),i)-t)*(u*Math.sqrt(u))*s,Math.abs(u)<r.H0)return o}return o}},688:(t,e,i)=>{"use strict";function n(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}i.d(e,{A:()=>n})},8300:(t,e,i)=>{"use strict";function n(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}i.d(e,{A:()=>n})},1393:(t,e,i)=>{"use strict";function n(t){return t<0?-1:1}i.d(e,{A:()=>n})},1782:(t,e,i)=>{"use strict";function n(t){var e=Math.exp(t);return(e-1/e)/2}i.d(e,{A:()=>n})},9640:(t,e,i)=>{"use strict";function n(t,e){return Math.pow((1-t)/(1+t),e)}i.d(e,{A:()=>n})},247:(t,e,i)=>{"use strict";function n(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}i.d(e,{A:()=>n})},5683:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(8248);function r(t,e,i){var r=t*i,a=.5*t;return r=Math.pow((1-r)/(1+r),a),Math.tan(.5*(n.sK-e))/r}},8371:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var n={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}}},1057:(t,e,i)=>{"use strict";i.d(e,{A:()=>n,w:()=>r});var n={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},r=n.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};n.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},9052:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var n={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667}},8619:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}},8248:(t,e,i)=>{"use strict";i.d(e,{A1:()=>o,DF:()=>M,G9:()=>a,H0:()=>y,JM:()=>b,Q1:()=>p,Vj:()=>v,Y$:()=>r,_3:()=>c,a8:()=>n,bA:()=>m,bv:()=>l,dX:()=>_,ej:()=>f,gS:()=>u,sK:()=>d,xK:()=>s,zp:()=>h,zq:()=>g});var n=1,r=2,a=3,s=4,o=5,l=6378137,h=6356752.314,u=.0066943799901413165,c=484813681109536e-20,d=Math.PI/2,m=.16666666666666666,p=.04722222222222222,f=.022156084656084655,y=1e-10,g=.017453292519943295,_=57.29577951308232,v=Math.PI/4,b=2*Math.PI,M=3.14159265359},8131:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var n=i(9499),r=i(1314),a=(0,n.A)("WGS84");function s(t,e,i,n){var a,s,o;return Array.isArray(i)?(a=(0,r.A)(t,e,i,n)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof a.z?[a.x,a.y,a.z].concat(i.splice(3)):[a.x,a.y,i[2]].concat(i.splice(3)):[a.x,a.y].concat(i.splice(2)):[a.x,a.y]):(s=(0,r.A)(t,e,i,n),2===(o=Object.keys(i)).length||o.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;s[n]=i[n]})),s)}function o(t){return t instanceof n.A?t:t.oProj?t.oProj:(0,n.A)(t)}const l=function(t,e,i){t=o(t);var n,r=!1;return void 0===e?(e=t,t=a,r=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=a,r=!0),e=o(e),i?s(t,e,i):(n={forward:function(i,n){return s(t,e,i,n)},inverse:function(i,n){return s(e,t,i,n)}},r&&(n.oProj=e),n)}},8277:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(8248);const r=function(t,e,i,r,a,s,o){var l={};return l.datum_type=void 0===t||"none"===t?n.A1:n.xK,e&&(l.datum_params=e.map(parseFloat),0===l.datum_params[0]&&0===l.datum_params[1]&&0===l.datum_params[2]||(l.datum_type=n.a8),l.datum_params.length>3&&(0===l.datum_params[3]&&0===l.datum_params[4]&&0===l.datum_params[5]&&0===l.datum_params[6]||(l.datum_type=n.Y$,l.datum_params[3]*=n._3,l.datum_params[4]*=n._3,l.datum_params[5]*=n._3,l.datum_params[6]=l.datum_params[6]/1e6+1))),o&&(l.datum_type=n.G9,l.grids=o),l.a=i,l.b=r,l.es=a,l.ep2=s,l}},5468:(t,e,i)=>{"use strict";i.d(e,{Fs:()=>l,OI:()=>r,Rw:()=>s,jX:()=>a,mj:()=>o});var n=i(8248);function r(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===n.a8?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==n.Y$||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}function a(t,e,i){var r,a,s,o,l=t.x,h=t.y,u=t.z?t.z:0;if(h<-n.sK&&h>-1.001*n.sK)h=-n.sK;else if(h>n.sK&&h<1.001*n.sK)h=n.sK;else{if(h<-n.sK)return{x:-1/0,y:-1/0,z:t.z};if(h>n.sK)return{x:1/0,y:1/0,z:t.z}}return l>Math.PI&&(l-=2*Math.PI),a=Math.sin(h),o=Math.cos(h),s=a*a,{x:((r=i/Math.sqrt(1-e*s))+u)*o*Math.cos(l),y:(r+u)*o*Math.sin(l),z:(r*(1-e)+u)*a}}function s(t,e,i,r){var a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b=t.x,M=t.y,x=t.z?t.z:0;if(a=Math.sqrt(b*b+M*M),s=Math.sqrt(b*b+M*M+x*x),a/i<1e-12){if(_=0,s/i<1e-12)return n.sK,v=-r,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(M,b);o=x/s,d=(l=a/s)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*l*l)),m=o*h,g=0;do{g++,u=e*(c=i/Math.sqrt(1-e*m*m))/(c+(v=a*d+x*m-c*(1-e*m*m))),y=(f=o*(h=1/Math.sqrt(1-u*(2-u)*l*l)))*d-(p=l*(1-u)*h)*m,d=p,m=f}while(y*y>1e-24&&g<30);return{x:_,y:Math.atan(f/Math.abs(p)),z:v}}function o(t,e,i){if(e===n.a8)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===n.Y$){var r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],h=i[5],u=i[6];return{x:u*(t.x-h*t.y+l*t.z)+r,y:u*(h*t.x+t.y-o*t.z)+a,z:u*(-l*t.x+o*t.y+t.z)+s}}}function l(t,e,i){if(e===n.a8)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===n.Y$){var r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],h=i[5],u=i[6],c=(t.x-r)/u,d=(t.y-a)/u,m=(t.z-s)/u;return{x:c+h*d-l*m,y:-h*c+d+o*m,z:l*c-o*d+m}}}},2738:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(8248),r=i(5468),a=i(7037);function s(t){return t===n.a8||t===n.Y$}function o(t,e,i){if((0,r.OI)(t,e))return i;if(t.datum_type===n.A1||e.datum_type===n.A1)return i;var a=t.a,o=t.es;if(t.datum_type===n.G9){if(0!==l(t,!1,i))return;a=n.bv,o=n.gS}var h=e.a,u=e.b,c=e.es;return e.datum_type===n.G9&&(h=n.bv,u=n.zp,c=n.gS),o!==c||a!==h||s(t.datum_type)||s(e.datum_type)?(i=(0,r.jX)(i,o,a),s(t.datum_type)&&(i=(0,r.mj)(i,t.datum_type,t.datum_params)),s(e.datum_type)&&(i=(0,r.Fs)(i,e.datum_type,e.datum_params)),i=(0,r.Rw)(i,c,h,u),e.datum_type!==n.G9||0===l(e,!0,i)?i:void 0):i}function l(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-i.x,y:i.y},a={x:Number.NaN,y:Number.NaN},s=[],o=0;o<t.grids.length;o++){var l=t.grids[o];if(s.push(l.name),l.isNull){a=r;break}if(l.mandatory,null!==l.grid){var u=l.grid.subgrids[0],c=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,d=u.ll[0]-c,m=u.ll[1]-c,p=u.ll[0]+(u.lim[0]-1)*u.del[0]+c,f=u.ll[1]+(u.lim[1]-1)*u.del[1]+c;if(!(m>r.y||d>r.x||f<r.y||p<r.x||(a=h(r,e,u),isNaN(a.x))))break}else if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1}return isNaN(a.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*n.dX+" "+r.y*n.dX+" tried: '"+s+"'"),-1):(i.x=-a.x,i.y=a.y,0)}function h(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var r={x:t.x,y:t.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=(0,a.A)(r.x-Math.PI)+Math.PI;var s=u(r,i);if(e){if(isNaN(s.x))return n;s.x=r.x-s.x,s.y=r.y-s.y;var o,l,h=9;do{if(l=u(s,i),isNaN(l.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:r.x-(l.x+s.x),y:r.y-(l.y+s.y)},s.x+=o.x,s.y+=o.y}while(h--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=(0,a.A)(s.x+i.ll[0]),n.y=s.y+i.ll[1]}else isNaN(s.x)||(n.x=t.x+s.x,n.y=t.y+s.y);return n}function u(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(n.x),a=Math.floor(n.y),s=n.x-1*r,o=n.y-1*a,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return l;if(a<0||a>=e.lim[1])return l;i=a*e.lim[0]+r;var h=e.cvs[i][0],u=e.cvs[i][1];i++;var c=e.cvs[i][0],d=e.cvs[i][1];i+=e.lim[0];var m=e.cvs[i][0],p=e.cvs[i][1];i--;var f=e.cvs[i][0],y=e.cvs[i][1],g=s*o,_=s*(1-o),v=(1-s)*(1-o),b=(1-s)*o;return l.x=v*h+_*c+b*f+g*m,l.y=v*u+_*d+b*y+g*p,l}},1076:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(5939),r=i(7358),a=i(1119);function s(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?s[t]=(0,r.A)(arguments[1]):s[t]=(0,a.A)(arguments[1]):s[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?s.apply(e,t):s(t)}));if("string"==typeof t){if(t in s)return s[t]}else"EPSG"in t?s["EPSG:"+t.EPSG]=t:"ESRI"in t?s["ESRI:"+t.ESRI]=t:"IAU2000"in t?s["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(0,n.A)(s);const o=s},9334:(t,e,i)=>{"use strict";i.d(e,{K:()=>o,P:()=>s});var n=i(8248),r=i(1057),a=i(4999);function s(t,e,i,r){var a=t*t,s=e*e,o=(a-s)/a,l=0;return r?(a=(t*=1-o*(n.bA+o*(n.Q1+o*n.ej)))*t,o=0):l=Math.sqrt(o),{es:o,e:l,ep2:(a-s)/s}}function o(t,e,i,s,o){if(!t){var l=(0,a.A)(r.A,s);l||(l=r.w),t=l.a,e=l.b,i=l.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<n.H0)&&(o=!0,e=t),{a:t,b:e,rf:i,sphere:o}}},7404:(t,e,i)=>{"use strict";function n(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t}i.d(e,{A:()=>n})},5939:(t,e,i)=>{"use strict";function n(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}i.d(e,{A:()=>n})},190:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>d});var n=i(8131),r=i(9499),a=i(6812),s=i(247),o=i(1076),l=i(8025),h=i(1314),u=i(3367),c=i(5002);n.A.defaultDatum="WGS84",n.A.Proj=r.A,n.A.WGS84=new n.A.Proj("WGS84"),n.A.Point=a.A,n.A.toPoint=s.A,n.A.defs=o.A,n.A.nadgrid=l.A,n.A.transform=h.A,n.A.mgrs=u.Ay,n.A.version="__VERSION__",(0,c.A)(n.A);const d=n.A},4999:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=/[\s_\-\/\(\)]/g;function r(t,e){if(t[e])return t[e];for(var i,r=Object.keys(t),a=e.toLowerCase().replace(n,""),s=-1;++s<r.length;)if((i=r[s]).toLowerCase().replace(n,"")===a)return t[i]}},8025:(t,e,i)=>{"use strict";i.d(e,{A:()=>r,f:()=>a});var n={};function r(t,e){var i=new DataView(e),r=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(i),a=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:l(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,r);a.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s=function(t,e,i){for(var n=[],r=0;r<e.nSubgrids;r++){var a=u(t,176,i),s=c(t,176,a,i),l=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),d=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);n.push({ll:[o(a.lowerLongitude),o(a.lowerLatitude)],del:[o(a.longitudeInterval),o(a.latitudeInterval)],lim:[l,d],count:a.gridNodeCount,cvs:h(s)})}return n}(i,a,r),d={header:a,subgrids:s};return n[t]=d,d}function a(t){return void 0===t?null:t.split(",").map(s)}function s(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:n[t]||null,isNull:!1}}function o(t){return t/3600*Math.PI/180}function l(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function h(t){return t.map((function(t){return[o(t.longitudeShift),o(t.latitudeShift)]}))}function u(t,e,i){return{name:l(t,e+8,e+16).trim(),parent:l(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function c(t,e,i,n){for(var r=e+176,a=[],s=0;s<i.gridNodeCount;s++){var o={latitudeShift:t.getFloat32(r+16*s,n),longitudeShift:t.getFloat32(r+16*s+4,n),latitudeAccuracy:t.getFloat32(r+16*s+8,n),longitudeAccuracy:t.getFloat32(r+16*s+12,n)};a.push(o)}return a}},7900:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var n=i(1076),r=i(1119),a=i(7358),s=i(4999),o=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],l=["3857","900913","3785","102113"];const h=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in n.A}(t))return n.A[t];if(function(t){return o.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=(0,r.A)(t);if(function(t){var e=(0,s.A)(t,"authority");if(e){var i=(0,s.A)(e,"epsg");return i&&l.indexOf(i)>-1}}(e))return n.A["EPSG:3857"];var i=function(t){var e=(0,s.A)(t,"extension");if(e)return(0,s.A)(e,"proj4")}(e);return i?(0,a.A)(i):e}return function(t){return"+"===t[0]}(t)?(0,a.A)(t):void 0}},7358:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(8248),r=i(9052),a=i(8619),s=i(4999);function o(t){var e,i,o,l={},h=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),u={proj:"projName",datum:"datumCode",rf:function(t){l.rf=parseFloat(t)},lat_0:function(t){l.lat0=t*n.zq},lat_1:function(t){l.lat1=t*n.zq},lat_2:function(t){l.lat2=t*n.zq},lat_ts:function(t){l.lat_ts=t*n.zq},lon_0:function(t){l.long0=t*n.zq},lon_1:function(t){l.long1=t*n.zq},lon_2:function(t){l.long2=t*n.zq},alpha:function(t){l.alpha=parseFloat(t)*n.zq},gamma:function(t){l.rectified_grid_angle=parseFloat(t)},lonc:function(t){l.longc=t*n.zq},x_0:function(t){l.x0=parseFloat(t)},y_0:function(t){l.y0=parseFloat(t)},k_0:function(t){l.k0=parseFloat(t)},k:function(t){l.k0=parseFloat(t)},a:function(t){l.a=parseFloat(t)},b:function(t){l.b=parseFloat(t)},r_a:function(){l.R_A=!0},zone:function(t){l.zone=parseInt(t,10)},south:function(){l.utmSouth=!0},towgs84:function(t){l.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){l.to_meter=parseFloat(t)},units:function(t){l.units=t;var e=(0,s.A)(a.A,t);e&&(l.to_meter=e.to_meter)},from_greenwich:function(t){l.from_greenwich=t*n.zq},pm:function(t){var e=(0,s.A)(r.A,t);l.from_greenwich=(e||parseFloat(t))*n.zq},nadgrids:function(t){"@null"===t?l.datumCode="none":l.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(l.axis=t)},approx:function(){l.approx=!0}};for(e in h)i=h[e],e in u?"function"==typeof(o=u[e])?o(i):l[o]=i:l[e]=i;return"string"==typeof l.datumCode&&"WGS84"!==l.datumCode&&(l.datumCode=l.datumCode.toLowerCase()),l}},2776:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>h});var n=i(4954),r=i(2948),a=[n.Ay,r.Ay],s={},o=[];function l(t,e){var i=o.length;return t.names?(o[i]=t,t.names.forEach((function(t){s[t.toLowerCase()]=i})),this):(console.log(e),!0)}const h={start:function(){a.forEach(l)},add:l,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==s[e]&&o[s[e]]?o[s[e]]:void 0}}},5566:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>l});var n=i(3824),r=i(8300),a=i(7037),s=i(8213),o=i(8248);const l={init:function(){Math.abs(this.lat1+this.lat2)<o.H0||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,n.A)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,r.A)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,n.A)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,r.A)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,r.A)(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>o.H0?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=(0,r.A)(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*(0,a.A)(e-this.long0),l=s*Math.sin(o)+this.x0,h=this.rh-s*Math.cos(o)+this.y0;return t.x=l,t.y=h,t},inverse:function(t){var e,i,n,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,0!==e&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,i)),s=(0,a.A)(r/this.ns0+this.long0),t.x=s,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,r,a,l=(0,s.A)(.5*e);if(t<o.H0)return l;for(var h=t*t,u=1;u<=25;u++)if(l+=a=.5*(r=1-(n=t*(i=Math.sin(l)))*n)*r/Math.cos(l)*(e/(1-h)-i/r+.5/t*Math.log((1-n)/(1+n))),Math.abs(a)<=1e-7)return l;return null}}},9344:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>m});var n=i(7037),r=i(8248),a=i(2537),s=i(4733),o=i(8834),l=i(9195),h=i(9624),u=i(5433),c=i(8213),d=i(364);const m={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,c,d,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C,I,k,P,E=t.x,D=t.y,L=Math.sin(t.y),z=Math.cos(t.y),F=(0,n.A)(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=r.H0?(t.x=this.x0+this.a*(r.sK-D)*Math.sin(F),t.y=this.y0-this.a*(r.sK-D)*Math.cos(F),t):Math.abs(this.sin_p12+1)<=r.H0?(t.x=this.x0+this.a*(r.sK+D)*Math.sin(F),t.y=this.y0+this.a*(r.sK+D)*Math.cos(F),t):(T=this.sin_p12*L+this.cos_p12*z*Math.cos(F),A=(S=Math.acos(T))?S/Math.sin(S):1,t.x=this.x0+this.a*A*z*Math.sin(F),t.y=this.y0+this.a*A*(this.cos_p12*L-this.sin_p12*z*Math.cos(F)),t):(e=(0,s.A)(this.es),i=(0,o.A)(this.es),c=(0,l.A)(this.es),d=(0,h.A)(this.es),Math.abs(this.sin_p12-1)<=r.H0?(m=this.a*(0,a.A)(e,i,c,d,r.sK),p=this.a*(0,a.A)(e,i,c,d,D),t.x=this.x0+(m-p)*Math.sin(F),t.y=this.y0-(m-p)*Math.cos(F),t):Math.abs(this.sin_p12+1)<=r.H0?(m=this.a*(0,a.A)(e,i,c,d,r.sK),p=this.a*(0,a.A)(e,i,c,d,D),t.x=this.x0+(m+p)*Math.sin(F),t.y=this.y0+(m+p)*Math.cos(F),t):(f=L/z,y=(0,u.A)(this.a,this.e,this.sin_p12),g=(0,u.A)(this.a,this.e,L),_=Math.atan((1-this.es)*f+this.es*y*this.sin_p12/(g*z)),C=0===(v=Math.atan2(Math.sin(F),this.cos_p12*Math.tan(_)-this.sin_p12*Math.cos(F)))?Math.asin(this.cos_p12*Math.sin(_)-this.sin_p12*Math.cos(_)):Math.abs(Math.abs(v)-Math.PI)<=r.H0?-Math.asin(this.cos_p12*Math.sin(_)-this.sin_p12*Math.cos(_)):Math.asin(Math.sin(F)*Math.cos(_)/Math.sin(v)),b=this.e*this.sin_p12/Math.sqrt(1-this.es),S=y*C*(1-(I=C*C)*(w=(M=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es))*M)*(1-w)/6+(k=I*C)/8*(x=b*M)*(1-2*w)+(P=k*C)/120*(w*(4-7*w)-3*b*b*(1-7*w))-P*C/48*x),t.x=this.x0+S*Math.sin(v),t.y=this.y0+S*Math.cos(v),t))},inverse:function(t){var e,i,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C,I,k,P,E,D,L,z;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*r.sK*this.a)return;return i=e/this.a,m=Math.sin(i),p=Math.cos(i),f=this.long0,Math.abs(e)<=r.H0?y=this.lat0:(y=(0,c.A)(p*this.sin_p12+t.y*m*this.cos_p12/e),g=Math.abs(this.lat0)-r.sK,f=Math.abs(g)<=r.H0?this.lat0>=0?(0,n.A)(this.long0+Math.atan2(t.x,-t.y)):(0,n.A)(this.long0-Math.atan2(-t.x,t.y)):(0,n.A)(this.long0+Math.atan2(t.x*m,e*this.cos_p12*p-t.y*this.sin_p12*m))),t.x=f,t.y=y,t}return _=(0,s.A)(this.es),v=(0,o.A)(this.es),b=(0,l.A)(this.es),M=(0,h.A)(this.es),Math.abs(this.sin_p12-1)<=r.H0?(w=(x=this.a*(0,a.A)(_,v,b,M,r.sK))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),y=(0,d.A)(w/this.a,_,v,b,M),f=(0,n.A)(this.long0+Math.atan2(t.x,-1*t.y)),t.x=f,t.y=y,t):Math.abs(this.sin_p12+1)<=r.H0?(x=this.a*(0,a.A)(_,v,b,M,r.sK),w=(e=Math.sqrt(t.x*t.x+t.y*t.y))-x,y=(0,d.A)(w/this.a,_,v,b,M),f=(0,n.A)(this.long0+Math.atan2(t.x,t.y)),t.x=f,t.y=y,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),T=Math.atan2(t.x,t.y),S=(0,u.A)(this.a,this.e,this.sin_p12),C=Math.cos(T),k=-(I=this.e*this.cos_p12*C)*I/(1-this.es),P=3*this.es*(1-k)*this.sin_p12*this.cos_p12*C/(1-this.es),L=1-k*(D=(E=e/S)-k*(1+k)*Math.pow(E,3)/6-P*(1+3*k)*Math.pow(E,4)/24)*D/2-E*D*D*D/6,A=Math.asin(this.sin_p12*Math.cos(D)+this.cos_p12*Math.sin(D)*C),f=(0,n.A)(this.long0+Math.asin(Math.sin(T)*Math.sin(D)/Math.cos(A))),z=Math.sin(A),y=Math.atan2((z-this.es*L*this.sin_p12)*Math.tan(A),z*(1-this.es)),t.x=f,t.y=y,t)},names:["Azimuthal_Equidistant","aeqd"]}},7213:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>m});var n=i(2537),r=i(4733),a=i(8834),s=i(9195),o=i(9624),l=i(5433),h=i(7037),u=i(9013),c=i(364),d=i(8248);const m={init:function(){this.sphere||(this.e0=(0,r.A)(this.es),this.e1=(0,a.A)(this.es),this.e2=(0,s.A)(this.es),this.e3=(0,o.A)(this.es),this.ml0=this.a*(0,n.A)(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,r=t.x,a=t.y;if(r=(0,h.A)(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(a)*Math.sin(r)),i=this.a*(Math.atan2(Math.tan(a),Math.cos(r))-this.lat0);else{var s=Math.sin(a),o=Math.cos(a),u=(0,l.A)(this.a,this.e,s),c=Math.tan(a)*Math.tan(a),d=r*Math.cos(a),m=d*d,p=this.es*o*o/(1-this.es);e=u*d*(1-m*c*(1/6-(8-c+8*p)*m/120)),i=this.a*(0,n.A)(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+u*s/o*m*(.5+(5-c+6*p)*m/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,r=t.y/this.a;if(this.sphere){var a=r+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(a))}else{var s=this.ml0/this.a+r,o=(0,c.A)(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-d.sK)<=d.H0)return t.x=this.long0,t.y=d.sK,r<0&&(t.y*=-1),t;var m=(0,l.A)(this.a,this.e,Math.sin(o)),p=m*m*m/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(o),2),y=n*this.a/m,g=y*y;e=o-m*Math.tan(o)/p*y*y*(.5-(1+3*f)*y*y/24),i=y*(1-g*(f/3+(1+3*f)*f*g/15))/Math.cos(o)}return t.x=(0,h.A)(i+this.long0),t.y=(0,u.A)(e),t},names:["Cassini","Cassini_Soldner","cass"]}},5912:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>o});var n=i(7037),r=i(8300),a=i(3824),s=i(3851);const o={init:function(){this.sphere||(this.k0=(0,a.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,a=t.x,s=t.y,o=(0,n.A)(a-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var l=(0,r.A)(this.e,Math.sin(s));e=this.x0+this.a*this.k0*o,i=this.y0+this.a*l*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=(0,n.A)(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=(0,s.A)(this.e,2*t.y*this.k0/this.a),e=(0,n.A)(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]}},2316:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>a});var n=i(7037),r=i(9013);const a={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,a=(0,n.A)(e-this.long0),s=(0,r.A)(i-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*s,t},inverse:function(t){var e=t.x,i=t.y;return t.x=(0,n.A)(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=(0,r.A)(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]}},3935:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>m});var n=i(4733),r=i(8834),a=i(9195),s=i(9624),o=i(3824),l=i(2537),h=i(7037),u=i(9013),c=i(364),d=i(8248);const m={init:function(){Math.abs(this.lat1+this.lat2)<d.H0||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,n.A)(this.es),this.e1=(0,r.A)(this.es),this.e2=(0,a.A)(this.es),this.e3=(0,s.A)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,o.A)(this.e,this.sinphi,this.cosphi),this.ml1=(0,l.A)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<d.H0?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,o.A)(this.e,this.sinphi,this.cosphi),this.ml2=(0,l.A)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,l.A)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var r=(0,l.A)(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-r)}var a=this.ns*(0,h.A)(i-this.long0),s=this.x0+e*Math.sin(a),o=this.y0+this.rh-e*Math.cos(a);return t.x=s,t.y=o,t},inverse:function(t){var e,i,n,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;if(0!==i&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=(0,h.A)(this.long0+a/this.ns),n=(0,u.A)(this.g-i/this.a),t.x=r,t.y=n,t;var s=this.g-i/this.a;return n=(0,c.A)(s,this.e0,this.e1,this.e2,this.e3),r=(0,h.A)(this.long0+a/this.ns),t.x=r,t.y=n,t},names:["Equidistant_Conic","eqdc"]}},7483:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>c});var n=i(2766),r=i(1782),a=i(6344),s=i(6356),o=i(1069),l=i(8539),h=i(3748),u=i(7037);const c={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(n.Ay.init.apply(this),this.forward=n.Ay.forward,this.inverse=n.Ay.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var r=(0,o.A)(this.cbg,this.lat0);this.Zb=-this.Qn*(r+(0,l.A)(this.gtu,2*r))},forward:function(t){var e=(0,u.A)(t.x-this.long0),i=t.y;i=(0,o.A)(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),l=Math.sin(e),c=Math.cos(e);i=Math.atan2(n,c*r),e=Math.atan2(l*r,(0,a.A)(n,r*c)),e=(0,s.A)(Math.tan(e));var d,m,p=(0,h.A)(this.gtu,2*i,2*e);return i+=p[0],e+=p[1],Math.abs(e)<=2.623395162778?(d=this.a*(this.Qn*e)+this.x0,m=this.a*(this.Qn*i+this.Zb)+this.y0):(d=1/0,m=1/0),t.x=d,t.y=m,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var l=(0,h.A)(this.utg,2*s,2*n);s+=l[0],n+=l[1],n=Math.atan((0,r.A)(n));var c=Math.sin(s),d=Math.cos(s),m=Math.sin(n),p=Math.cos(n);s=Math.atan2(c*p,(0,a.A)(m,p*d)),n=Math.atan2(m,p*d),e=(0,u.A)(n+this.long0),i=(0,o.A)(this.cgb,s)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]}},2246:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>a});var n=i(9640),r=i(8248);const a={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+r.Vj)/(Math.pow(Math.tan(.5*this.lat0+r.Vj),this.C)*(0,n.A)(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+r.Vj),this.C)*(0,n.A)(this.e*Math.sin(i),this.ratexp))-r.sK,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,a=Math.pow(Math.tan(.5*i+r.Vj)/this.K,1/this.C),s=20;s>0&&(i=2*Math.atan(a*(0,n.A)(this.e*Math.sin(t.y),-.5*this.e))-r.sK,!(Math.abs(i-t.y)<1e-14));--s)t.y=i;return s?(t.x=e,t.y=i,t):null},names:["gauss"]}},9056:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>r});var n=i(5468);const r={init:function(){this.name="geocent"},forward:function(t){return(0,n.jX)(t,this.es,this.a)},inverse:function(t){return(0,n.Rw)(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]}},2873:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>r});var n=i(6344);const r={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,r,a,s=t.x,o=t.y;if(s-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var l=this.radius_p/(0,n.A)(this.radius_p*Math.cos(o),Math.sin(o));if(i=l*Math.cos(s)*Math.cos(o),r=l*Math.sin(s)*Math.cos(o),a=l*Math.sin(o),(this.radius_g-i)*i-r*r-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/(0,n.A)(a,e)),t.y=this.radius_g_1*Math.atan(a/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(a/(0,n.A)(r,e)))}else"sphere"===this.shape&&(e=Math.cos(o),i=Math.cos(s)*e,r=Math.sin(s)*e,a=Math.sin(o),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/(0,n.A)(a,e)),t.y=this.radius_g_1*Math.atan(a/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(a/(0,n.A)(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,r,a,s=-1,o=0,l=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*(0,n.A)(1,l)):(o=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*(0,n.A)(1,o));var h=l/this.radius_p;if(e=o*o+h*h+s*s,(r=(i=2*this.radius_g*s)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-i-Math.sqrt(r))/(2*e),s=this.radius_g+a*s,o*=a,l*=a,t.x=Math.atan2(o,s),t.y=Math.atan(l*Math.cos(t.x)/s),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+l*l)):(o=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+l*l+s*s,(r=(i=2*this.radius_g*s)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-i-Math.sqrt(r))/(2*e),s=this.radius_g+a*s,o*=a,l*=a,t.x=Math.atan2(o,s),t.y=Math.atan(l*Math.cos(t.x)/s)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]}},4562:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>s});var n=i(7037),r=i(8213),a=i(8248);const s={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,r,s,o,l,h,u=t.x,c=t.y;return r=(0,n.A)(u-this.long0),e=Math.sin(c),i=Math.cos(c),s=Math.cos(r),(o=this.sin_p14*e+this.cos_p14*i*s)>0||Math.abs(o)<=a.H0?(l=this.x0+1*this.a*i*Math.sin(r)/o,h=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*s)/o):(l=this.x0+this.infinity_dist*i*Math.sin(r),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*s)),t.x=l,t.y=h,t},inverse:function(t){var e,i,a,s,o,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),i=Math.sin(s),a=Math.cos(s),l=(0,r.A)(a*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*a-t.y*this.sin_p14*i),o=(0,n.A)(this.long0+o)):(l=this.phic0,o=0),t.x=o,t.y=l,t},names:["gnom"]}},2615:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>r});var n=i(7037);const r={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,r,a,s,o,l,h=t.x,u=t.y,c=(0,n.A)(h-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),s=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(a)),o=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),t.y=l*Math.cos(o)/1,t.x=l*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,r,a,s,o,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,s=e,o=0;var h=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(o=1),s=t.y,h+=1}while(0===o&&h<15);return h>=15?null:t},names:["Krovak","krovak"]}},2218:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>s});var n=i(8248),r=i(8300),a=i(7037);const s={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-n.sK)<n.H0?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<n.H0?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=(0,r.A)(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=.3333333333333333*t,e=t*t,i[0]+=.17222222222222222*e,i[1]=.06388888888888888*e,e*=t,i[0]+=.10257936507936508*e,i[1]+=.0664021164021164*e,i[2]=.016415012942191543*e,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=(0,r.A)(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,s,o,l,h,u,c,d,m,p=t.x,f=t.y;if(p=(0,a.A)(p-this.long0),this.sphere){if(l=Math.sin(f),m=Math.cos(f),s=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+m*s:1+this.sinph0*l+this.cosph0*m*s)<=n.H0)return null;e=(i=Math.sqrt(2/i))*m*Math.sin(p),i*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*m*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(f+this.lat0)<n.H0)return null;i=n.Vj-.5*f,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(p),i*=s}}else{switch(u=0,c=0,d=0,s=Math.cos(p),o=Math.sin(p),l=Math.sin(f),h=(0,r.A)(this.e,l),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(u=h/this.qp,c=Math.sqrt(1-u*u)),this.mode){case this.OBLIQ:d=1+this.sinb1*u+this.cosb1*c*s;break;case this.EQUIT:d=1+c*s;break;case this.N_POLE:d=n.sK+f,h=this.qp-h;break;case this.S_POLE:d=f-n.sK,h=this.qp+h}if(Math.abs(d)<n.H0)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),i=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*u-this.sinb1*c*s):(d=Math.sqrt(2/(1+c*s)))*u*this.ymf,e=this.xmf*d*c*o;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(d=Math.sqrt(h))*o,i=s*(this.mode===this.S_POLE?d:-d)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,r,s,o,l,h,u,c,d,m=t.x/this.a,p=t.y/this.a;if(this.sphere){var f,y=0,g=0;if((i=.5*(f=Math.sqrt(m*m+p*p)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(i),y=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(f)<=n.H0?0:Math.asin(p*g/f),m*=g,p=y*f;break;case this.OBLIQ:i=Math.abs(f)<=n.H0?this.lat0:Math.asin(y*this.sinph0+p*g*this.cosph0/f),m*=g*this.cosph0,p=(y-Math.sin(i)*this.sinph0)*f;break;case this.N_POLE:p=-p,i=n.sK-i;break;case this.S_POLE:i-=n.sK}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(m,p):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(m/=this.dd,p*=this.dd,(l=Math.sqrt(m*m+p*p))<n.H0)return t.x=this.long0,t.y=this.lat0,t;s=2*Math.asin(.5*l/this.rq),r=Math.cos(s),m*=s=Math.sin(s),this.mode===this.OBLIQ?(h=r*this.sinb1+p*s*this.cosb1/l,o=this.qp*h,p=l*this.cosb1*r-p*this.sinb1*s):(h=p*s/l,o=this.qp*h,p=l*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(o=m*m+p*p))return t.x=this.long0,t.y=this.lat0,t;h=1-o/this.qp,this.mode===this.S_POLE&&(h=-h)}e=Math.atan2(m,p),d=(u=Math.asin(h))+u,i=u+(c=this.apa)[0]*Math.sin(d)+c[1]*Math.sin(d+d)+c[2]*Math.sin(d+d+d)}return t.x=(0,a.A)(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4}},9857:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>h});var n=i(3824),r=i(5683),a=i(1393),s=i(7037),o=i(8557),l=i(8248);const h={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<l.H0)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),a=(0,n.A)(this.e,e,i),s=(0,r.A)(this.e,this.lat1,e),o=Math.sin(this.lat2),h=Math.cos(this.lat2),u=(0,n.A)(this.e,o,h),c=(0,r.A)(this.e,this.lat2,o),d=(0,r.A)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>l.H0?this.ns=Math.log(a/u)/Math.log(s/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=l.H0&&(i=(0,a.A)(i)*(l.sK-2*l.H0));var n,o,h=Math.abs(Math.abs(i)-l.sK);if(h>l.H0)n=(0,r.A)(this.e,i,Math.sin(i)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((h=i*this.ns)<=0)return null;o=0}var u=this.ns*(0,s.A)(e-this.long0);return t.x=this.k0*(o*Math.sin(u))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(u))+this.y0,t},inverse:function(t){var e,i,n,r,a,h=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(h*h+u*u),i=1):(e=-Math.sqrt(h*h+u*u),i=-1);var c=0;if(0!==e&&(c=Math.atan2(i*h,i*u)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(r=(0,o.A)(this.e,n)))return null}else r=-l.sK;return a=(0,s.A)(c/this.ns+this.long0),t.x=a,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]}},2948:(t,e,i)=>{"use strict";function n(t){return t}i.d(e,{Ay:()=>r});const r={init:function(){},forward:n,inverse:n,names:["longlat","identity"]}},4954:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>l});var n=i(3824),r=i(7037),a=i(5683),s=i(8557),o=i(8248);const l={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,n.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,s=t.y;if(s*o.dX>90&&s*o.dX<-90&&n*o.dX>180&&n*o.dX<-180)return null;if(Math.abs(Math.abs(s)-o.sK)<=o.H0)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,r.A)(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(o.Vj+.5*s));else{var l=Math.sin(s),h=(0,a.A)(this.e,s,l);e=this.x0+this.a*this.k0*(0,r.A)(n-this.long0),i=this.y0-this.a*this.k0*Math.log(h)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,a=t.y-this.y0;if(this.sphere)i=o.sK-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var l=Math.exp(-a/(this.a*this.k0));if(-9999===(i=(0,s.A)(this.e,l)))return null}return e=(0,r.A)(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]}},9993:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>r});var n=i(7037);const r={init:function(){},forward:function(t){var e=t.x,i=t.y,r=(0,n.A)(e-this.long0),a=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=a,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=(0,n.A)(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]}},6203:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>a});var n=i(7037),r=i(8248);const a={init:function(){},forward:function(t){for(var e=t.x,i=t.y,a=(0,n.A)(e-this.long0),s=i,o=Math.PI*Math.sin(i);;){var l=-(s+Math.sin(s)-o)/(1+Math.cos(s));if(s+=l,Math.abs(l)<r.H0)break}s/=2,Math.PI/2-Math.abs(i)<r.H0&&(a=0);var h=.900316316158*this.a*a*Math.cos(s)+this.x0,u=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=h,t.y=u,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var r=(0,n.A)(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var a=Math.asin(i);return t.x=r,t.y=a,t},names:["Mollweide","moll"]}},9931:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>r});var n=i(8248);const r={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,r=t.y-this.lat0,a=i-this.long0,s=r/n._3*1e-5,o=a,l=1,h=0;for(e=1;e<=10;e++)l*=s,h+=this.A[e]*l;var u,c=h,d=o,m=1,p=0,f=0,y=0;for(e=1;e<=6;e++)u=p*c+m*d,m=m*c-p*d,p=u,f=f+this.B_re[e]*m-this.B_im[e]*p,y=y+this.B_im[e]*m+this.B_re[e]*p;return t.x=y*this.a+this.x0,t.y=f*this.a+this.y0,t},inverse:function(t){var e,i,r=t.x,a=t.y,s=r-this.x0,o=(a-this.y0)/this.a,l=s/this.a,h=1,u=0,c=0,d=0;for(e=1;e<=6;e++)i=u*o+h*l,h=h*o-u*l,u=i,c=c+this.C_re[e]*h-this.C_im[e]*u,d=d+this.C_im[e]*h+this.C_re[e]*u;for(var m=0;m<this.iterations;m++){var p,f=c,y=d,g=o,_=l;for(e=2;e<=6;e++)p=y*c+f*d,f=f*c-y*d,y=p,g+=(e-1)*(this.B_re[e]*f-this.B_im[e]*y),_+=(e-1)*(this.B_im[e]*f+this.B_re[e]*y);f=1,y=0;var v=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)p=y*c+f*d,f=f*c-y*d,y=p,v+=e*(this.B_re[e]*f-this.B_im[e]*y),b+=e*(this.B_im[e]*f+this.B_re[e]*y);var M=v*v+b*b;c=(g*v+_*b)/M,d=(_*v-g*b)/M}var x=c,w=d,S=1,A=0;for(e=1;e<=9;e++)S*=x,A+=this.D[e]*S;var T=this.lat0+A*n._3*1e5,C=this.long0+w;return t.x=C,t.y=T,t},names:["New_Zealand_Map_Grid","nzmg"]}},6207:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>l});var n=i(5683),r=i(7037),a=i(8557),s=i(8248),o=1e-7;const l={init:function(){var t,e,i,a,l,h,u,c,d,m,p,f,y,g=0,_=0,v=0,b=0,M=0,x=0,w=0;this.no_off=(y="object"==typeof(f=this).PROJECTION?Object.keys(f.PROJECTION)[0]:f.PROJECTION,"no_uoff"in f||"no_off"in f||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(y)),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var A=!1;if("rectified_grid_angle"in this&&(A=!0),S&&(w=this.alpha),A&&(g=this.rectified_grid_angle*s.zq),S||A)_=this.longc;else if(v=this.long1,M=this.lat1,b=this.long2,x=this.lat2,Math.abs(M-x)<=o||(t=Math.abs(M))<=o||Math.abs(t-s.sK)<=o||Math.abs(Math.abs(this.lat0)-s.sK)<=o||Math.abs(Math.abs(x)-s.sK)<=o)throw new Error;var T=1-this.es;e=Math.sqrt(T),Math.abs(this.lat0)>s.H0?(c=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*c*c,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/T),this.A=this.B*this.k0*e/t,(l=(a=this.B*e/(i*Math.sqrt(t)))*a-1)<=0?l=0:(l=Math.sqrt(l),this.lat0<0&&(l=-l)),this.E=l+=a,this.E*=Math.pow((0,n.A)(this.e,this.lat0,c),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=l=1),S||A?(S?(p=Math.asin(Math.sin(w)/a),A||(g=w)):(p=g,w=Math.asin(a*Math.sin(p))),this.lam0=_-Math.asin(.5*(l-1/l)*Math.tan(p))/this.B):(h=Math.pow((0,n.A)(this.e,M,Math.sin(M)),this.B),u=Math.pow((0,n.A)(this.e,x,Math.sin(x)),this.B),l=this.E/h,d=(u-h)/(u+h),m=((m=this.E*this.E)-u*h)/(m+u*h),(t=v-b)<-Math.pi?b-=s.JM:t>Math.pi&&(b+=s.JM),this.lam0=(0,r.A)(.5*(v+b)-Math.atan(m*Math.tan(.5*this.B*(v-b))/d)/this.B),p=Math.atan(2*Math.sin(this.B*(0,r.A)(v-this.lam0))/(l-1/l)),g=w=Math.asin(a*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(g),this.cosrot=Math.cos(g),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(w))),this.lat0<0&&(this.u_0=-this.u_0)),l=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(s.Vj-l)),this.v_pole_s=this.ArB*Math.log(Math.tan(s.Vj+l))},forward:function(t){var e,i,r,a,l,h,u,c,d={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-s.sK)>s.H0){if(e=.5*((l=this.E/Math.pow((0,n.A)(this.e,t.y,Math.sin(t.y)),this.B))-(h=1/l)),i=.5*(l+h),a=Math.sin(this.B*t.x),r=(e*this.singam-a*this.cosgam)/i,Math.abs(Math.abs(r)-1)<s.H0)throw new Error;c=.5*this.ArB*Math.log((1-r)/(1+r)),h=Math.cos(this.B*t.x),u=Math.abs(h)<o?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+a*this.singam,h)}else c=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(d.x=u,d.y=c):(u-=this.u_0,d.x=c*this.cosrot+u*this.sinrot,d.y=u*this.cosrot-c*this.sinrot),d.x=this.a*d.x+this.x0,d.y=this.a*d.y+this.y0,d},inverse:function(t){var e,i,n,r,o,l,h,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((n=Math.exp(-this.BrA*i))-1/n),o=.5*(n+1/n),h=((l=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(h)-1)<s.H0)u.x=0,u.y=h<0?-s.sK:s.sK;else{if(u.y=this.E/Math.sqrt((1+h)/(1-h)),u.y=(0,a.A)(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(r*this.cosgam-l*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]}},9105:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>s});var n=i(7037),r=i(8213),a=i(8248);const s={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,r,s,o,l,h,u=t.x,c=t.y;return r=(0,n.A)(u-this.long0),e=Math.sin(c),i=Math.cos(c),s=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*i*s)>0||Math.abs(o)<=a.H0)&&(l=1*this.a*i*Math.sin(r),h=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*s)),t.x=l,t.y=h,t},inverse:function(t){var e,i,s,o,l,h,u;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=(0,r.A)(e/this.a),s=Math.sin(i),o=Math.cos(i),h=this.long0,Math.abs(e)<=a.H0?(u=this.lat0,t.x=h,t.y=u,t):(u=(0,r.A)(o*this.sin_p14+t.y*s*this.cos_p14/e),l=Math.abs(this.lat0)-a.sK,Math.abs(l)<=a.H0?(h=this.lat0>=0?(0,n.A)(this.long0+Math.atan2(t.x,-t.y)):(0,n.A)(this.long0-Math.atan2(-t.x,t.y)),t.x=h,t.y=u,t):(h=(0,n.A)(this.long0+Math.atan2(t.x*s,e*this.cos_p14*o-t.y*this.sin_p14*s)),t.x=h,t.y=u,t))},names:["ortho"]}},8325:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>d});var n=i(4733),r=i(8834),a=i(9195),s=i(9624),o=i(7037),l=i(9013),h=i(2537),u=i(8248),c=i(5433);const d={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,n.A)(this.es),this.e1=(0,r.A)(this.es),this.e2=(0,a.A)(this.es),this.e3=(0,s.A)(this.es),this.ml0=this.a*(0,h.A)(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,r=t.x,a=t.y,s=(0,o.A)(r-this.long0);if(n=s*Math.sin(a),this.sphere)Math.abs(a)<=u.H0?(e=this.a*s,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(a),i=this.a*((0,l.A)(a-this.lat0)+(1-Math.cos(n))/Math.tan(a)));else if(Math.abs(a)<=u.H0)e=this.a*s,i=-1*this.ml0;else{var d=(0,c.A)(this.a,this.e,Math.sin(a))/Math.tan(a);e=d*Math.sin(n),i=this.a*(0,h.A)(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+d*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,r,a,s,l,c,d;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=u.H0)e=(0,o.A)(n/this.a+this.long0),i=0;else{var m;for(s=this.lat0+r/this.a,l=n*n/this.a/this.a+s*s,c=s,a=20;a;--a)if(c+=d=-1*(s*(c*(m=Math.tan(c))+1)-c-.5*(c*c+l)*m)/((c-s)/m-1),Math.abs(d)<=u.H0){i=c;break}e=(0,o.A)(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=u.H0)i=0,e=(0,o.A)(this.long0+n/this.a);else{var p,f,y,g,_;for(s=(this.ml0+r)/this.a,l=n*n/this.a/this.a+s*s,c=s,a=20;a;--a)if(_=this.e*Math.sin(c),p=Math.sqrt(1-_*_)*Math.tan(c),f=this.a*(0,h.A)(this.e0,this.e1,this.e2,this.e3,c),y=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),c-=d=(s*(p*(g=f/this.a)+1)-g-.5*p*(g*g+l))/(this.es*Math.sin(2*c)*(g*g+l-2*s*g)/(4*p)+(s-g)*(p*y-2/Math.sin(2*c))-y),Math.abs(d)<=u.H0){i=c;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=(0,o.A)(this.long0+Math.asin(n*p/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]}},7630:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>u});var n=i(8248),r=1,a=2,s=3,o=4;function l(t,e,i,l){var h;return t<n.H0?(l.value=r,h=0):(h=Math.atan2(e,i),Math.abs(h)<=n.Vj?l.value=r:h>n.Vj&&h<=n.sK+n.Vj?(l.value=a,h-=n.sK):h>n.sK+n.Vj||h<=-(n.sK+n.Vj)?(l.value=s,h=h>=0?h-n.DF:h+n.DF):(l.value=o,h+=n.sK)),h}function h(t,e){var i=t+e;return i<-n.DF?i+=n.JM:i>+n.DF&&(i-=n.JM),i}const u={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=n.sK-n.Vj/2?this.face=5:this.lat0<=-(n.sK-n.Vj/2)?this.face=6:Math.abs(this.long0)<=n.Vj?this.face=1:Math.abs(this.long0)<=n.sK+n.Vj?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,u,c,d,m,p={x:0,y:0},f={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,5===this.face)c=n.sK-e,i>=n.Vj&&i<=n.sK+n.Vj?(f.value=r,u=i-n.sK):i>n.sK+n.Vj||i<=-(n.sK+n.Vj)?(f.value=a,u=i>0?i-n.DF:i+n.DF):i>-(n.sK+n.Vj)&&i<=-n.Vj?(f.value=s,u=i+n.sK):(f.value=o,u=i);else if(6===this.face)c=n.sK+e,i>=n.Vj&&i<=n.sK+n.Vj?(f.value=r,u=-i+n.sK):i<n.Vj&&i>=-n.Vj?(f.value=a,u=-i):i<-n.Vj&&i>=-(n.sK+n.Vj)?(f.value=s,u=-i-n.sK):(f.value=o,u=i>0?-i+n.DF:-i-n.DF);else{var y,g,_,v,b,M;2===this.face?i=h(i,+n.sK):3===this.face?i=h(i,+n.DF):4===this.face&&(i=h(i,-n.sK)),v=Math.sin(e),b=Math.cos(e),M=Math.sin(i),y=b*Math.cos(i),g=b*M,_=v,1===this.face?u=l(c=Math.acos(y),_,g,f):2===this.face?u=l(c=Math.acos(g),_,-y,f):3===this.face?u=l(c=Math.acos(-y),_,-g,f):4===this.face?u=l(c=Math.acos(-g),_,y,f):(c=u=0,f.value=r)}return m=Math.atan(12/n.DF*(u+Math.acos(Math.sin(u)*Math.cos(n.Vj))-n.sK)),d=Math.sqrt((1-Math.cos(c))/(Math.cos(m)*Math.cos(m))/(1-Math.cos(Math.atan(1/Math.cos(u))))),f.value===a?m+=n.sK:f.value===s?m+=n.DF:f.value===o&&(m+=1.5*n.DF),p.x=d*Math.cos(m),p.y=d*Math.sin(m),p.x=p.x*this.a+this.x0,p.y=p.y*this.a+this.y0,t.x=p.x,t.y=p.y,t},inverse:function(t){var e,i,l,u,c,d,m,p,f,y,g,_,v={lam:0,phi:0},b={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?b.value=r:t.y>=0&&t.y>=Math.abs(t.x)?(b.value=a,e-=n.sK):t.x<0&&-t.x>=Math.abs(t.y)?(b.value=s,e=e<0?e+n.DF:e-n.DF):(b.value=o,e+=n.sK),f=n.DF/12*Math.tan(e),c=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),d=Math.atan(c),(m=1-(l=Math.cos(e))*l*(u=Math.tan(i))*u*(1-Math.cos(Math.atan(1/Math.cos(d)))))<-1?m=-1:m>1&&(m=1),5===this.face)p=Math.acos(m),v.phi=n.sK-p,b.value===r?v.lam=d+n.sK:b.value===a?v.lam=d<0?d+n.DF:d-n.DF:b.value===s?v.lam=d-n.sK:v.lam=d;else if(6===this.face)p=Math.acos(m),v.phi=p-n.sK,b.value===r?v.lam=-d+n.sK:b.value===a?v.lam=-d:b.value===s?v.lam=-d-n.sK:v.lam=d<0?-d-n.DF:-d+n.DF;else{var M,x,w;f=(M=m)*M,x=(f+=(w=f>=1?0:Math.sqrt(1-f)*Math.sin(d))*w)>=1?0:Math.sqrt(1-f),b.value===a?(f=x,x=-w,w=f):b.value===s?(x=-x,w=-w):b.value===o&&(f=x,x=w,w=-f),2===this.face?(f=M,M=-x,x=f):3===this.face?(M=-M,x=-x):4===this.face&&(f=M,M=x,x=-f),v.phi=Math.acos(-w)-n.sK,v.lam=Math.atan2(x,M),2===this.face?v.lam=h(v.lam,-n.sK):3===this.face?v.lam=h(v.lam,-n.DF):4===this.face&&(v.lam=h(v.lam,+n.sK))}return 0!==this.es&&(y=v.phi<0?1:0,g=Math.tan(v.phi),_=this.b/Math.sqrt(g*g+this.one_minus_f_squared),v.phi=Math.atan(Math.sqrt(this.a*this.a-_*_)/(this.one_minus_f*_)),y&&(v.phi=-v.phi)),v.lam+=this.long0,t.x=v.lam,t.y=v.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]}},9475:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>d});var n=i(8248),r=i(7037),a=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],s=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],o=.8487,l=1.3523,h=n.dX/5,u=1/h,c=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const d={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=(0,r.A)(t.x-this.long0),i=Math.abs(t.y),d=Math.floor(i*h);d<0?d=0:d>=18&&(d=17),i=n.dX*(i-u*d);var m={x:c(a[d],i)*e,y:c(s[d],i)};return t.y<0&&(m.y=-m.y),m.x=m.x*this.a*o+this.x0,m.y=m.y*this.a*l+this.y0,m},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*o),y:Math.abs(t.y-this.y0)/(this.a*l)};if(e.y>=1)e.x/=a[18][0],e.y=t.y<0?-n.sK:n.sK;else{var i=Math.floor(18*e.y);for(i<0?i=0:i>=18&&(i=17);;)if(s[i][0]>e.y)--i;else{if(!(s[i+1][0]<=e.y))break;++i}var h=s[i],u=5*(e.y-h[0])/(s[i+1][0]-h[0]);u=function(t,e,i,n){for(var r=e;n;--n){var a=t(r);if(r-=a,Math.abs(a)<i)break}return r}((function(t){return(c(h,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(h,t)}),u,n.H0,100),e.x/=c(a[i],u),e.y=(5*i+u)*n.zq,t.y<0&&(e.y=-e.y)}return e.x=(0,r.A)(e.x+this.long0),e},names:["Robinson","robin"]}},1786:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>u});var n=i(7037),r=i(9013),a=i(6882),s=i(688),o=i(3667),l=i(8248),h=i(8213);const u={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,a.A)(this.es)},forward:function(t){var e,i,r=t.x,a=t.y;if(r=(0,n.A)(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(a),h=20;h;--h){var u=(this.m*a+Math.sin(a)-o)/(this.m+Math.cos(a));if(a-=u,Math.abs(u)<l.H0)break}else a=1!==this.n?Math.asin(this.n*Math.sin(a)):a;e=this.a*this.C_x*r*(this.m+Math.cos(a)),i=this.a*this.C_y*a}else{var c=Math.sin(a),d=Math.cos(a);i=this.a*(0,s.A)(a,c,d,this.en),e=this.a*r*d/Math.sqrt(1-this.es*c*c)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,a,s;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,h.A)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,h.A)(Math.sin(e)/this.n)),a=(0,n.A)(a+this.long0),e=(0,r.A)(e)):(e=(0,o.A)(t.y/this.a,this.es,this.en),(s=Math.abs(e))<l.sK?(s=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),a=(0,n.A)(i)):s-l.H0<l.sK&&(a=this.long0)),t.x=a,t.y=e,t},names:["Sinusoidal","sinu"]}},496:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>n});const n={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,r=2*n-Math.pow(n,2),a=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+a*e)/(1-a*e));this.K=s-this.alpha*o+this.alpha*a/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),o=this.lambda0+s/this.alpha,l=0,h=a,u=-1e3,c=0;Math.abs(h-u)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=o,t.y=h,t},names:["somerc"]}},7084:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>h});var n=i(8248),r=i(1393),a=i(3824),s=i(5683),o=i(8557),l=i(7037);const h={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n.H0&&(this.k0=.5*(1+(0,r.A)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=n.H0&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n.H0&&(this.k0=.5*this.cons*(0,a.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,s.A)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,a.A)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-n.sK,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,r,a,o,h,u=t.x,c=t.y,d=Math.sin(c),m=Math.cos(c),p=(0,l.A)(u-this.long0);return Math.abs(Math.abs(u-this.long0)-Math.PI)<=n.H0&&Math.abs(c+this.lat0)<=n.H0?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*d+this.coslat0*m*Math.cos(p)),t.x=this.a*e*m*Math.sin(p)+this.x0,t.y=this.a*e*(this.coslat0*d-this.sinlat0*m*Math.cos(p))+this.y0,t):(i=2*Math.atan(this.ssfn_(c,d,this.e))-n.sK,a=Math.cos(i),r=Math.sin(i),Math.abs(this.coslat0)<=n.H0?(o=(0,s.A)(this.e,c*this.con,this.con*d),h=2*this.a*this.k0*o/this.cons,t.x=this.x0+h*Math.sin(u-this.long0),t.y=this.y0-this.con*h*Math.cos(u-this.long0),t):(Math.abs(this.sinlat0)<n.H0?(e=2*this.a*this.k0/(1+a*Math.cos(p)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*a*Math.cos(p))),t.y=e*(this.cosX0*r-this.sinX0*a*Math.cos(p))+this.y0),t.x=e*a*Math.sin(p)+this.x0,t))},inverse:function(t){var e,i,r,a,s;t.x-=this.x0,t.y-=this.y0;var h=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(h/(2*this.a*this.k0));return e=this.long0,i=this.lat0,h<=n.H0?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/h),e=Math.abs(this.coslat0)<n.H0?this.lat0>0?(0,l.A)(this.long0+Math.atan2(t.x,-1*t.y)):(0,l.A)(this.long0+Math.atan2(t.x,t.y)):(0,l.A)(this.long0+Math.atan2(t.x*Math.sin(u),h*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=n.H0){if(h<=n.H0)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,r=h*this.cons/(2*this.a*this.k0),i=this.con*(0,o.A)(this.e,r),e=this.con*(0,l.A)(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else a=2*Math.atan(h*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,h<=n.H0?s=this.X0:(s=Math.asin(Math.cos(a)*this.sinX0+t.y*Math.sin(a)*this.cosX0/h),e=(0,l.A)(this.long0+Math.atan2(t.x*Math.sin(a),h*this.cosX0*Math.cos(a)-t.y*this.sinX0*Math.sin(a)))),i=-1*(0,o.A)(this.e,Math.tan(.5*(n.sK+s)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(n.sK+t))*Math.pow((1-e)/(1+e),.5*i)}}},6581:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>a});var n=i(2246),r=i(7037);const a={init:function(){n.Ay.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,a,s;return t.x=(0,r.A)(t.x-this.long0),n.Ay.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*a),t.x=s*i*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*i*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,a,s,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var l=2*Math.atan2(o,this.R2);e=Math.sin(l),i=Math.cos(l),s=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),a=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else s=this.phic0,a=0;return t.x=a,t.y=s,n.Ay.inverse.apply(this,[t]),t.x=(0,r.A)(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]}},2766:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>h});var n=i(6882),r=i(688),a=i(3667),s=i(7037),o=i(8248),l=i(1393);const h={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,n.A)(this.es),this.ml0=(0,r.A)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,a=t.x,l=t.y,h=(0,s.A)(a-this.long0),u=Math.sin(l),c=Math.cos(l);if(this.es){var d=c*h,m=Math.pow(d,2),p=this.ep2*Math.pow(c,2),f=Math.pow(p,2),y=Math.abs(c)>o.H0?Math.tan(l):0,g=Math.pow(y,2),_=Math.pow(g,2);e=1-this.es*Math.pow(u,2),d/=Math.sqrt(e);var v=(0,r.A)(l,u,c,this.en);i=this.a*(this.k0*d*(1+m/6*(1-g+p+m/20*(5-18*g+_+14*p-58*g*p+m/42*(61+179*_-_*g-479*g)))))+this.x0,n=this.a*(this.k0*(v-this.ml0+u*h*d/2*(1+m/12*(5-g+9*p+4*f+m/30*(61+_-58*g+270*p-330*g*p+m/56*(1385+543*_-_*g-3111*g))))))+this.y0}else{var b=c*Math.sin(h);if(Math.abs(Math.abs(b)-1)<o.H0)return 93;if(i=.5*this.a*this.k0*Math.log((1+b)/(1-b))+this.x0,n=c*Math.cos(h)/Math.sqrt(1-Math.pow(b,2)),(b=Math.abs(n))>=1){if(b-1>o.H0)return 93;n=0}else n=Math.acos(n);l<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,r,h=(t.x-this.x0)*(1/this.a),u=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+u/this.k0,i=(0,a.A)(e,this.es,this.en),Math.abs(i)<o.sK){var c=Math.sin(i),d=Math.cos(i),m=Math.abs(d)>o.H0?Math.tan(i):0,p=this.ep2*Math.pow(d,2),f=Math.pow(p,2),y=Math.pow(m,2),g=Math.pow(y,2);e=1-this.es*Math.pow(c,2);var _=h*Math.sqrt(e)/this.k0,v=Math.pow(_,2);n=i-(e*=m)*v/(1-this.es)*.5*(1-v/12*(5+3*y-9*p*y+p-4*f-v/30*(61+90*y-252*p*y+45*g+46*p-v/56*(1385+3633*y+4095*g+1574*g*y)))),r=(0,s.A)(this.long0+_*(1-v/6*(1+2*y+p-v/20*(5+28*y+24*g+8*p*y+6*p-v/42*(61+662*y+1320*g+720*g*y))))/d)}else n=o.sK*(0,l.A)(u),r=0;else{var b=Math.exp(h/this.k0),M=.5*(b-1/b),x=this.lat0+u/this.k0,w=Math.cos(x);e=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(M,2))),n=Math.asin(e),u<0&&(n=-n),r=0===M&&0===w?0:(0,s.A)(Math.atan2(M,w)+this.long0)}return t.x=r,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]}},1659:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>s});var n=i(8248),r=i(6344),a={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const s={init:function(){if(Object.keys(a).forEach(function(t){if(void 0===this[t])this[t]=a[t].def;else{if(a[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);a[t].num&&(this[t]=parseFloat(this[t]))}a[t].degrees&&(this[t]=this[t]*n.zq)}.bind(this)),Math.abs(Math.abs(this.lat0)-n.sK)<n.H0?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<n.H0?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,r,a=Math.sin(t.y),s=Math.cos(t.y),o=Math.cos(t.x);switch(this.mode){case 3:i=this.sinph0*a+this.cosph0*s*o;break;case 2:i=s*o;break;case 1:i=-a;break;case 0:i=a}switch(e=(i=this.pn1/(this.p-i))*s*Math.sin(t.x),this.mode){case 3:i*=this.cosph0*a-this.sinph0*s*o;break;case 2:i*=a;break;case 0:i*=-s*o;break;case 1:i*=s*o}return r=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*r,i=n*r,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,a,s={x:t.x,y:t.y};a=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*a,i=this.pn1*t.y*this.cw*a,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var o=(0,r.A)(t.x,t.y);if(Math.abs(o)<n.H0)s.x=0,s.y=t.y;else{var l,h;switch(h=1-o*o*this.pfact,h=(this.p-Math.sqrt(h))/(this.pn1/o+o/this.pn1),l=Math.sqrt(1-h*h),this.mode){case 3:s.y=Math.asin(l*this.sinph0+t.y*h*this.cosph0/o),t.y=(l-this.sinph0*Math.sin(s.y))*o,t.x*=h*this.cosph0;break;case 2:s.y=Math.asin(t.y*h/o),t.y=l*o,t.x*=h;break;case 0:s.y=Math.asin(l),t.y=-t.y;break;case 1:s.y=-Math.asin(l)}s.x=Math.atan2(t.x,t.y)}return t.x=s.x+this.long0,t.y=s.y,t},names:["Tilted_Perspective","tpers"]}},7623:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>s});var n=i(5280),r=i(7483),a=i(8248);const s={init:function(){var t=(0,n.A)(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*a.zq,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,r.Ay.init.apply(this),this.forward=r.Ay.forward,this.inverse=r.Ay.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"}},8652:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>s});var n=i(7037),r=i(8248),a=i(8213);const s={init:function(){this.R=this.a},forward:function(t){var e,i,s=t.x,o=t.y,l=(0,n.A)(s-this.long0);Math.abs(o)<=r.H0&&(e=this.x0+this.R*l,i=this.y0);var h=(0,a.A)(2*Math.abs(o/Math.PI));(Math.abs(l)<=r.H0||Math.abs(Math.abs(o)-r.sK)<=r.H0)&&(e=this.x0,i=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*h):this.y0+Math.PI*this.R*-Math.tan(.5*h));var u=.5*Math.abs(Math.PI/l-l/Math.PI),c=u*u,d=Math.sin(h),m=Math.cos(h),p=m/(d+m-1),f=p*p,y=p*(2/d-1),g=y*y,_=Math.PI*this.R*(u*(p-g)+Math.sqrt(c*(p-g)*(p-g)-(g+c)*(f-g)))/(g+c);l<0&&(_=-_),e=this.x0+_;var v=c+p;return _=Math.PI*this.R*(y*v-u*Math.sqrt((g+c)*(c+1)-v*v))/(g+c),i=o>=0?this.y0+_:this.y0-_,t.x=e,t.y=i,t},inverse:function(t){var e,i,a,s,o,l,h,u,c,d,m,p;return t.x-=this.x0,t.y-=this.y0,m=Math.PI*this.R,o=(a=t.x/m)*a+(s=t.y/m)*s,m=3*(s*s/(u=-2*(l=-Math.abs(s)*(1+o))+1+2*s*s+o*o)+(2*(h=l-2*s*s+a*a)*h*h/u/u/u-9*l*h/u/u)/27)/(c=(l-h*h/3/u)/u)/(d=2*Math.sqrt(-c/3)),Math.abs(m)>1&&(m=m>=0?1:-1),p=Math.acos(m)/3,i=t.y>=0?(-d*Math.cos(p+Math.PI/3)-h/3/u)*Math.PI:-(-d*Math.cos(p+Math.PI/3)-h/3/u)*Math.PI,e=Math.abs(a)<r.H0?this.long0:(0,n.A)(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(a*a-s*s)+o*o))/2/a),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]}},1314:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var n=i(8248),r=i(2738),a=i(1603),s=i(9499),o=i(247),l=i(3471);function h(t,e,i,u){var c;if(Array.isArray(i)&&(i=(0,o.A)(i)),(0,l.A)(i),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===n.a8||t.datum.datum_type===n.Y$)&&"WGS84"!==e.datumCode||(e.datum.datum_type===n.a8||e.datum.datum_type===n.Y$)&&"WGS84"!==t.datumCode}(t,e)&&(i=h(t,c=new s.A("WGS84"),i,u),t=c),u&&"enu"!==t.axis&&(i=(0,a.A)(t,!1,i)),"longlat"===t.projName)i={x:i.x*n.zq,y:i.y*n.zq,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=(0,r.A)(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*n.dX,y:i.y*n.dX,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),u&&"enu"!==e.axis?(0,a.A)(e,!0,i):i}},5002:(t,e,i)=>{"use strict";i.d(e,{A:()=>D});var n=i(2766),r=i(7483),a=i(7623),s=i(6581),o=i(7084),l=i(496),h=i(6207),u=i(9857),c=i(2615),d=i(7213),m=i(2218),p=i(5566),f=i(4562),y=i(5912),g=i(2316),_=i(8325),v=i(9931),b=i(9993),M=i(1786),x=i(6203),w=i(3935),S=i(8652),A=i(9344),T=i(9105),C=i(7630),I=i(9475),k=i(9056),P=i(1659),E=i(2873);function D(t){t.Proj.projections.add(n.Ay),t.Proj.projections.add(r.Ay),t.Proj.projections.add(a.Ay),t.Proj.projections.add(s.Ay),t.Proj.projections.add(o.Ay),t.Proj.projections.add(l.Ay),t.Proj.projections.add(h.Ay),t.Proj.projections.add(u.Ay),t.Proj.projections.add(c.Ay),t.Proj.projections.add(d.Ay),t.Proj.projections.add(m.Ay),t.Proj.projections.add(p.Ay),t.Proj.projections.add(f.Ay),t.Proj.projections.add(y.Ay),t.Proj.projections.add(g.Ay),t.Proj.projections.add(_.Ay),t.Proj.projections.add(v.Ay),t.Proj.projections.add(b.Ay),t.Proj.projections.add(M.Ay),t.Proj.projections.add(x.Ay),t.Proj.projections.add(w.Ay),t.Proj.projections.add(S.Ay),t.Proj.projections.add(A.Ay),t.Proj.projections.add(T.Ay),t.Proj.projections.add(C.Ay),t.Proj.projections.add(I.Ay),t.Proj.projections.add(k.Ay),t.Proj.projections.add(P.Ay),t.Proj.projections.add(E.Ay)}},7142:(t,e,i)=>{!function(e){var n,r;if("function"==typeof define&&define.amd)define(["leaflet","proj4"],e);else if("object"==typeof t.exports)n=i(3481),r=i(190),t.exports=e(n,r);else{if(void 0===window.L||void 0===window.proj4)throw"Leaflet and proj4 must be loaded first";e(window.L,window.proj4)}}((function(t,e){return e.__esModule&&e.default&&(e=e.default),t.Proj={},t.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},t.Proj.Projection=t.Class.extend({initialize:function(e,i,n){var r=t.Proj._isProj4Obj(e);this._proj=r?e:this._projFromCodeDef(e,i),this.bounds=r?i:n},project:function(e){var i=this._proj.forward([e.lng,e.lat]);return new t.Point(i[0],i[1])},unproject:function(e,i){var n=this._proj.inverse([e.x,e.y]);return new t.LatLng(n[1],n[0],i)},_projFromCodeDef:function(t,i){if(i)e.defs(t,i);else if(void 0===e.defs[t]){var n=t.split(":");if(n.length>3&&(t=n[n.length-3]+":"+n[n.length-1]),void 0===e.defs[t])throw"No projection definition for code "+t}return e(t)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(e,i,n){var r,a,s,o;if(t.Proj._isProj4Obj(e)?(r=(a=e).srsCode,o=i||{},this.projection=new t.Proj.Projection(a,o.bounds)):(r=e,s=i,o=n||{},this.projection=new t.Proj.Projection(r,s,o.bounds)),t.Util.setOptions(this,o),this.code=r,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var l=this.options.resolutions.length-1;l>=0;l--)this.options.resolutions[l]&&(this._scales[l]=1/this.options.resolutions[l])}this.infinite=!this.options.bounds},scale:function(t){var e,i=Math.floor(t);return t===i?this._scales[t]:(e=this._scales[i])+(this._scales[i+1]-e)*(t-i)},zoom:function(t){var e,i,n=this._closestElement(this._scales,t),r=this._scales.indexOf(n);return t===n?r:void 0===n?-1/0:(i=r+1,void 0===(e=this._scales[i])?1/0:(t-n)/(e-n)+r)},distance:t.CRS.Earth.distance,R:t.CRS.Earth.R,_closestElement:function(t,e){for(var i,n=t.length;n--;)t[n]<=e&&(void 0===i||i<t[n])&&(i=t[n]);return i}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(e,i){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,e,i)},addData:function(e){var i;e&&(e.crs&&"name"===e.crs.type?i=new t.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(i=new t.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==i&&(this.options.coordsToLatLng=function(e){var n=t.point(e[0],e[1]);return i.projection.unproject(n)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(e,i){return new t.Proj.GeoJSON(e,i)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(e,i,n){t.ImageOverlay.prototype.initialize.call(this,e,null,n),this._projectedBounds=i},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),n=t.point(this._projectedBounds.min.x,this._projectedBounds.max.y),r=this._projectedToNewLayerPoint(n,e.zoom,e.center);t.DomUtil.setTransform(this._image,r,i)},_reset:function(){var e=this._map.getZoom(),i=this._map.getPixelOrigin(),n=t.bounds(this._transform(this._projectedBounds.min,e)._subtract(i),this._transform(this._projectedBounds.max,e)._subtract(i)),r=n.getSize();t.DomUtil.setPosition(this._image,n.min),this._image.style.width=r.x+"px",this._image.style.height=r.y+"px"},_projectedToNewLayerPoint:function(t,e,i){var n=this._map.getSize()._divideBy(2),r=this._map.project(i,e)._subtract(n)._round().add(this._map._getMapPanePos());return this._transform(t,e)._subtract(r)},_transform:function(t,e){var i=this._map.options.crs,n=i.transformation,r=i.scale(e);return n.transform(t,r)}}),t.Proj.imageOverlay=function(e,i,n){return new t.Proj.ImageOverlay(e,i,n)},t.Proj}))},980:(t,e,i)=>{"use strict";i.d(e,{Mb:()=>g});var n=i(3116).P;class r{constructor(){this.backgroundMapLayer="Open Street Map - Standard",this.customLayerURI="",this.customLayerProjection="",this.customLayerResolutions="",this.customLayerOrigin="",this.customLayerProjectionCode="",this.mapboxAccessToken="",this.minZoom=1,this.maxZoom=16,this.grayscale=0,this.transparency=0}}class a{constructor(){this.backgroundMapLayer="Open Street Map - Standard",this.customLayerURI="",this.customLayerProjection="",this.customLayerResolutions="",this.customLayerOrigin="",this.customLayerProjectionCode="",this.mapboxAccessToken="",this.minZoom=1,this.maxZoom=16,this.grayscale=0,this.transparency=0}}class s{constructor(){this.customOverlay=!1,this.customVectorOverlay=!1,this.customMapboxVectorOverlay=!1,this.transparency=0,this.mapboxVectorTransparency=0,this.customMapboxAPIKey="",this.vectorTransparency=0,this.customOverlayURI="",this.customVectorOverlayURI="",this.customMapboxVectorOverlayURI="",this.customOverlayProjection="",this.customLayerProjectionCode="",this.daylightTerminator=!1,this.seaLayer=!1,this.railLayer=!1}}class o{constructor(){this.show=!1,this.url="",this.layerName="",this.format="",this.attribution="",this.styles="",this.transparency=0}}class l{constructor(){this.show=!1,this.geoJSON1="",this.geoJSON2="",this.geoJSON3="",this.geoJSON4="",this.geoJSON5="",this.noOfLevels=1,this.autoZoomInactivePolygons=!1,this.hideMissing=!1,this.missingFillColor="#AAAAAA",this.missingLineColor="#000000",this.lineWidth=1,this.useFileFormatting=!1}}class h{constructor(){this.show=!1,this.url="",this.hideMissing=!1,this.missingFillColor="#AAAAAA",this.missingLineColor="#000000",this.lineWidth=1,this.noOfLevels=1,this.url2="",this.url3="",this.url4="",this.url5="",this.borderTransparency=10,this.fillTransparency=30,this.dashArray="",this.coordinateUse="No"}}class u{constructor(){this.includeInZoom="Yes",this.zoomOnHighlight=!1,this.zoomOnSelect=!1,this.defaultLatitude=51,this.defaultLongitude=0,this.defaultZoom=10,this.zoomOnSingleItem=!0,this.zoomOnSingleLevel=8,this.zoomIncrement=.5,this.lockMap=!1}}class c{constructor(){this.show=!1,this.text="",this.fontSize=10,this.fontFamily="Segoe UI",this.textColor="#000000",this.fillColor="#FFFFFF",this.borderColor="#000000",this.borderWidth=1,this.transparency=10,this.padding=2,this.alignment="center",this.borderRadius=0,this.paddingLeft=0,this.paddingRight=0,this.paddingTop=0,this.paddingBottom=0}}class d{constructor(){this.highlightTransparency=20,this.unhighlightTransparency=80,this.includeLabels=!0}}class m{constructor(){this.showSize=!0,this.showCategory=!0}}class p{constructor(){this.zoom=!0,this.autoZoomOverride=!1,this.scale=!1,this.lasso=!1,this.lassoIntersect=!1,this.controlSize=30,this.attribution="",this.measure=!1}}class f{constructor(){this.fillStyle="Solid",this.hatchSpacing=5,this.hatchAngle=45,this.hatchWidth=2,this.fillColour=null,this.borderColour="#000000",this.borderWidth=1,this.borderTransparency=0,this.fillTransparency=30,this.dashArray=""}}class y{constructor(){this.minSize=10,this.maxSize=50,this.icon="",this.icon2="",this.showTooltip="Yes",this.allowSelection="Yes",this.sizeBehaviour="Relative",this.circleSizeType="Variable",this.lineBehaviour="Straight",this.circleAndLines=!0,this.imageRotation=0,this.iconWidth=20,this.iconHeight=20,this.displayNull=!1}}class g extends n{constructor(){super(...arguments),this.zoom=new u,this.mapLayers=new r,this.mapLayersPro=new a,this.overlays=new s,this.points=new y,this.formatting=new f,this.controls=new p,this.highlighting=new d,this.mapTooltips=new m,this.labels=new c,this.wms=new o,this.geoJSON=new l,this.crs=new _,this.vectorLayer=new h}}class _{constructor(){this.CRS="EPSG3857",this.boundsStartY=0,this.boundsStartX=0,this.minZoom=0,this.maxZoom=16,this.boundsEndY=1e3,this.boundsEndX=1e3,this.baseImage="",this.flipYAxis=!1,this.transparency=0,this.customLayerProjectionCode="",this.customLayerProjection="",this.customLayerOriginX=null,this.customLayerOriginY=null,this.customLayerResolutions="",this.reprojectMapObjects=!1}}},5789:(t,e,i)=>{"use strict";i.d(e,{bF:()=>M}),i(5108);var n=i(980),r=i(4806),a=i(889),s=i(2391),o=i(5062),l=i(3481),h=(i(3926),i(9020)),u=(i(1180),i(80)),c=(i(6680),i(6838)),d=i.n(c),m=(i(7142),i(190));function p(t,e,i,n,r){let a=t.objects;if(a){let t=a[e];if(t){let e=t[i];if(e){let t=e[n];if(void 0!==t)return"string"==typeof t&&""==t.toString()?r:t}}}return r}function f(t,e){if(0==e.length)return!1;for(let i=0;i<e.length;i++)if(e[i].key===t.key)return!0;return!1}function y(t,e){return t.item<e.item?-1:t.item>e.item?1:0}function g(t,e){if(t instanceof Function)return e instanceof Function&&t.toString()===e.toString();if(null==t||null==e)return t===e;if(t===e||t.valueOf()===e.valueOf())return!0;if(t instanceof Date)return!1;if(e instanceof Date)return!1;if(!(t instanceof Object))return!1;if(!(e instanceof Object))return!1;let i=Object.keys(t);return!!Object.keys(e).every((function(t){return-1!==i.indexOf(t)}))&&i.every((function(i){return g(t[i],e[i])}))}function _(t,e){function i(t){var e=Math.sin((1-t)*o)/Math.sin(o),i=Math.sin(t*o)/Math.sin(o),l=e*Math.cos(n)*Math.cos(r)+i*Math.cos(a)*Math.cos(s),h=e*Math.cos(n)*Math.sin(r)+i*Math.cos(a)*Math.sin(s),u=e*Math.sin(n)+i*Math.sin(a),c=180/Math.PI*Math.atan2(u,Math.sqrt(Math.pow(l,2)+Math.pow(h,2))),d=180/Math.PI*Math.atan2(h,l),m=d-180*r/Math.PI;function p(t){return Math[t>0?"floor":"ceil"](t)}return[c,d-=m<0?360*p((m-180)/360):360*p((m+180)/360)]}var n=t[0],r=t[1],a=e[0],s=e[1];n=n*Math.PI/180,r=r*Math.PI/180,a=a*Math.PI/180,s=s*Math.PI/180;var o=2*Math.asin(Math.sqrt(Math.pow(Math.sin((n-a)/2),2)+Math.cos(n)*Math.cos(a)*Math.pow(Math.sin((r-s)/2),2)));return 0===o?[[n,r]]:function(){for(var t=[],e=1/98,n=0;n<99;n++){var r=i(e*n);t.push(r)}return t}()}i(7600),i(3559),i(601),i(7423),i(1378);class v{}class b{}class M{constructor(t){this.IconMapVersion="3.2.4.5",this.IconMapSVG="<svg style='padding-right: 4px' viewBox='0 0 61 61' width='60' height='60' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' overflow='hidden'><defs><clipPath id='clip0'><rect x='269' y='249' width='61' height='61'/></clipPath></defs><g clip-path='url(#clip0)' transform='translate(-269 -249)'><rect x='270.5' y='250.5' width='59' height='59' stroke='#3B3B38' stroke-width='1.33333' stroke-miterlimit='8' fill='#FFFFFF'/><path d='M294.515 251.257 285.828 258.065 282.252 263.865 281.741 268.404 284.296 272.187 293.493 277.483 299.113 281.517 304.989 286.561 305.5 290.091 303.712 295.387 297.836 301.691 288.383 308.5 270.5 308.248C270.67 288.999 270.841 269.749 271.011 250.5L294.515 251.257Z' stroke='#83BEEC' stroke-width='1.33333' stroke-miterlimit='8' fill='#83BEEC' fill-rule='evenodd'/><path d='M329.5 258.5 293.5 278.597 304.829 287.5 329.248 273.509C329.164 268.506 329.081 263.503 329.5 258.5Z' stroke='#3B3B38' stroke-width='1.33333' stroke-miterlimit='8' fill='#C8C6C4' fill-rule='evenodd'/><path d='M294.498 251.5C287.737 257.171 280.977 262.842 282.802 269.077 284.627 275.313 304.451 282.344 305.446 288.914 306.442 295.485 293.336 306.324 288.774 308.5' stroke='#0062B1' stroke-width='3' stroke-linecap='round' stroke-miterlimit='8' fill='none' fill-rule='evenodd'/><rect x='270.5' y='250.5' width='59' height='59' stroke='#3B3B38' stroke-width='1.33333' stroke-miterlimit='8' fill='none'/><path d='M316.5 281.421 329.009 298.5C329.173 290.167 329.336 281.833 329.5 273.5L316.5 281.421Z' stroke='#3B3B38' stroke-width='1.33333' stroke-miterlimit='8' fill='#F2F2F2' fill-rule='evenodd'/><path d='M308 297.5C308 293.91 310.686 291 314 291 317.314 291 320 293.91 320 297.5 320 301.09 317.314 304 314 304 310.686 304 308 301.09 308 297.5Z' stroke='#DD6700' stroke-width='2' stroke-miterlimit='8' fill='#F8DB8F' fill-rule='evenodd'/><path d='M276.5 278.15 280.966 272.406 279.372 265.244 286.534 265.244 291 259.5 295.466 265.244 302.628 265.244 301.034 272.406 305.5 278.15 299.047 281.338 297.453 288.5 291 285.313 284.547 288.5 282.953 281.338Z' stroke='#DD6700' stroke-width='3' stroke-miterlimit='8' fill='#F8DB8F' fill-rule='evenodd'/></g></svg>",this.IconMapAttributionURL="#",this.IconMapAttributionText="Icon Map",this.debug=!1,this.previousMapLayer="",this.previousCustomURI="",this.previousAttribution="",this.previousCustomOverlayURI="",this.previousCustomVectorOverlayURI="",this.previousCustomMapboxVectorOverlayURI="",this.previousImageOverlay="",this.previousSelectedIds=[],this.loading=!1,this.geoJSONTimeoutCounter=0,this.geoJSONTimeoutMax=120,this.persistingSettings=!1,this.initialLoad=!0,this.noOfZoomableItems=0,this.zoomLocked=!1,this.markerSprites=new Array,this.needPixiRedraw=2,this.proActive=!1,this.host=t.host,this.colorPalette=t.host.colorPalette,this.selectionManager=t.host.createSelectionManager(),this.events=t.host.eventService,document&&this.renderVisualElements(t)}readTextFile(t,e,i,n){var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",t,!0),r.onerror=function(t){var i=document.getElementById("MessageBox");i.style.display="block",i.innerText="An error occurred loading the GeoJSON file - In most cases this is caused by CORS policy on the hosting website.",n(e,null)},r.onreadystatechange=function(){if(4===r.readyState&&200==r.status&&(document.getElementById("MessageBox").style.display="none",n(r.responseText,e,i)),4===r.readyState&&("4"==r.status.toString().substring(0,1)||"5"==r.status.toString().substring(0,1))){var t=document.getElementById("MessageBox");t.style.display="block",t.innerText="An error occurred loading the GeoJSON file",n(e,null)}},r.send(null)}loadGeoJSONFiles(t){this.debug&&console.log("loadGeoJSONFiles",new Date);let e=p(t,0,"geoJSON","geoJSON1",this.mapSettings.geoJSON.geoJSON1),i=p(t,0,"geoJSON","geoJSON2",this.mapSettings.geoJSON.geoJSON2),n=p(t,0,"geoJSON","geoJSON3",this.mapSettings.geoJSON.geoJSON3),r=p(t,0,"geoJSON","geoJSON4",this.mapSettings.geoJSON.geoJSON4),a=p(t,0,"geoJSON","geoJSON5",this.mapSettings.geoJSON.geoJSON5);if(this.mapSettings.geoJSON.show&&""!=e)if(null==this.geoJSON){this.loading=!0;let t=document.getElementById("loader");t.style.display="block";var s=this.mapSettings.geoJSON.noOfLevels;null==this.geoJSONSettings&&(this.geoJSONSettings=new b),this.geoJSONSettings.noOfFilesToLoad=0,this.geoJSONSettings.noOfFilesLoaded=0,this.geoJSONSettings.geoJSONLevels=new Array(s);for(var o=0;o<s;o++){this.geoJSONSettings.geoJSONLevels[o]=new v;var l="";switch(o){case 0:l=e;break;case 1:l=i;break;case 2:l=n;break;case 3:l=r;break;case 4:l=a}var h=l.split(",");this.geoJSONSettings.geoJSONLevels[o].source=l,this.geoJSONSettings.noOfFilesToLoad=this.geoJSONSettings.noOfFilesToLoad+h.length,this.geoJSONSettings.geoJSONLevels[o].noOfFiles=h.length,this.geoJSONSettings.geoJSONLevels[o].geoJsonJson=new Array(h.length)}for(o=0;o<s;o++)for(var u=this.geoJSONSettings.geoJSONLevels[o].source.split(","),c=0;c<u.length;c++){var d=this;this.readTextFile(u[c],c,o,(function(e,i,n){d.geoJSON=e,d.loading=!1,d.geoJSONSettings.noOfFilesLoaded++;var r=!1;d.geoJSONSettings.geoJSONLevels[n].geoJsonJson[i]=JSON.parse(e),d.geoJSONSettings.noOfFilesLoaded==d.geoJSONSettings.noOfFilesToLoad&&(r=!0),r&&(t.style.display="none")}))}}else for(s=this.mapSettings.geoJSON.noOfLevels,o=0;o<s;o++){switch(l="",o){case 0:l=e;break;case 1:l=i;break;case 2:l=n;break;case 3:l=r;break;case 4:l=a}this.geoJSONSettings.geoJSONLevels[o].source!=l&&this.updateGEOJsonFile(o,l)}this.debug&&console.log("loadGeoJSONFiles END",new Date)}updateGEOJsonFile(t,e){this.loading=!0;var i=this;let n=document.getElementById("loader");n.style.display="block",this.geoJSONSettings.geoJSONLevels[t].source=e,this.readTextFile(e,t,t,(function(t,e,r){i.geoJSON=t,i.loading=!1,i.geoJSONSettings.geoJSONLevels[r].geoJsonJson[0]=JSON.parse(t),n.style.display="none",i.loading=!1}))}parseTextToArray(t){let e=[];if(""!=t){let n=t.split(",");for(var i=0;i<n.length;i++)e.push(parseFloat(n[i].trim()))}return e}stripHTML(t){let e=document.implementation.createHTMLDocument("New").body;return e.innerHTML=t,e.textContent||e.innerText||""}isWKT(t){return t.length>=18&&"GEOMETRYCOLLECTION"==t.substring(0,18)||t.length>=8&&"TRIANGLE"==t.substring(0,8)||t.length>=5&&"POINT"==t.substring(0,5)||t.length>=10&&"MULTIPOINT"==t.substring(0,10)||t.length>=7&&"POLYGON"==t.substring(0,7)||t.length>=15&&"MULTILINESTRING"==t.substring(0,15)||t.length>=10&&"LINESTRING"==t.substring(0,10)||t.length>=12&&"MULTIPOLYGON"==t.substring(0,12)}fixWKT(t){let e=t.toUpperCase();return e=e.replace("\n","").replace("\r","").replace("\t",""),e=e.replace(/POLYGON\(/g,"POLYGON ("),e=e.replace(/TRIANGLE\(/g,"TRIANGLE ("),e=e.replace(/POINT\(/g,"POINT ("),e=e.replace(/MULTIPOINT\(/g,"MULTIPOINT ("),e=e.replace(/GEOMETRYCOLLECTION\(/g,"GEOMETRYCOLLECTION ("),e=e.replace(/MULTILINESTRING\(/g,"MULTILINESTRING ("),e=e.replace(/LINESTRING\(/g,"LINESTRING ("),e=e.replace(/MULTIPOLYGON\(/g,"MULTIPOLYGON ("),e=e.replace(/\( /g,"("),e}HandleLandingPage(t){if(this.debug&&console.log("HandleLandingPage",new Date),t.dataViews&&t.dataViews.length)this.isLandingPageOn&&!this.LandingPageRemoved&&(this.LandingPageRemoved=!0,this.element.removeChild(this.landingDiv),document.getElementById("map").style.display="",this.map.invalidateSize());else if(!this.isLandingPageOn){this.isLandingPageOn=!0,this.landingDiv=document.createElement("div");let t=document.createElement("p"),e=document.createElement("p"),i=document.createElement("s1"),n=document.createElement("s2"),r=document.createElement("s3");this.landingDiv.innerHTML="<h1 class='IntroTextTitle'>"+this.IconMapSVG+" Icon Map ("+this.IconMapVersion+")</h1><p class='IntroText'>This visual enables placing combinations of circles, images, SVG images, lines, WKT (well known text) objects and geoJSON boundaries on a map.</p>",i.innerHTML="Please refer to ",n.innerHTML="www.icon-map.com",r.innerHTML=" for instructions.",e.innerHTML="A field must be present for Category and Size. Circles, Images, SVGs and Lines all require Longitude and Latitude to be present as well.",e.className="IntroText",n.style.textDecoration="underline",this.element.appendChild(this.landingDiv),t.className="IntroText",this.landingDiv.appendChild(t),this.landingDiv.appendChild(e),n.addEventListener("click",(()=>{this.host.launchUrl("https://www.icon-map.com/")})),document.getElementById("map").style.display="none"}this.debug&&console.log("HandleLandingPage END",new Date)}renderVisualElements(t){this.debug&&console.log("renderVisualElements",new Date);let e=document.createElement("div");try{let t=document.createAttribute("data-tap-disable");t.value="true",e.attributes.setNamedItem(t)}catch(t){console.error(t)}e.style.width="100%",e.style.height="100%",e.id="map",e.className="none",this.loader=document.createElement("div"),this.loader.className="loader",this.loader.id="loader",this.messagebox=document.createElement("div"),this.messagebox.className="MessageBox",this.messagebox.innerHTML="",this.messagebox.id="MessageBox",t.element.appendChild(this.loader),t.element.appendChild(e),t.element.appendChild(this.messagebox),this.element=t.element,this.debug&&console.log("renderVisualElements END",new Date)}intanciateMap(){var t;switch(this.debug&&console.log("intanciateMap",new Date),this.mapSettings.crs.CRS){case"EPSG3857":default:t=l.CRS.EPSG3857;break;case"EPSG3395":t=l.CRS.EPSG3395;break;case"EPSG4326":t=l.CRS.EPSG4326;break;case"Simple":t=l.CRS.Simple;break;case"Proj4":case"EPSG27700":case"EPSG3009":case"EPSG3006":t=new l.Proj.CRS(this.mapSettings.crs.customLayerProjectionCode,this.mapSettings.crs.customLayerProjection,{resolutions:this.parseTextToArray(this.mapSettings.crs.customLayerResolutions),origin:[this.mapSettings.crs.customLayerOriginY,this.mapSettings.crs.customLayerOriginX]})}if("Simple"!=this.mapSettings.crs.CRS){let e=new l.LatLng(51.505,-.09),i=12;null!=this.mapSettings.zoom.defaultLatitude&&null!=this.mapSettings.zoom.defaultLongitude&&null!=this.mapSettings.zoom.defaultZoom&&(e=new l.LatLng(this.mapSettings.zoom.defaultLatitude,this.mapSettings.zoom.defaultLongitude),i=this.mapSettings.zoom.defaultZoom),"Custom URI"==this.mapSettings.mapLayers.backgroundMapLayer?this.map=new l.Map("map",{center:e,zoomSnap:this.mapSettings.zoom.zoomIncrement,zoomDelta:this.mapSettings.zoom.zoomIncrement,zoomControl:!1,attributionControl:!1,zoom:i,crs:t,minZoom:this.mapSettings.mapLayers.minZoom,maxZoom:this.mapSettings.mapLayers.maxZoom}):this.map=new l.Map("map",{center:e,zoomSnap:this.mapSettings.zoom.zoomIncrement,zoomDelta:this.mapSettings.zoom.zoomIncrement,zoomControl:!1,attributionControl:!1,zoom:i,crs:t})}else{var e=[[this.mapSettings.crs.boundsStartY,this.mapSettings.crs.boundsStartX],[this.mapSettings.crs.boundsEndY,this.mapSettings.crs.boundsEndX]];t.projection.bounds=e,t.code=this.mapSettings.crs.CRS,this.map=new l.Map("map",{crs:t,zoomSnap:this.mapSettings.zoom.zoomIncrement,zoomDelta:this.mapSettings.zoom.zoomIncrement,zoomControl:!1,attributionControl:!1,minZoom:this.mapSettings.crs.minZoom,maxZoom:this.mapSettings.crs.maxZoom})}this.debug&&console.log("intanciateMap END",new Date)}setupDaylightTerminator(t){if(this.debug&&console.log("setupDaylightTerminator",new Date),this.mapSettings.overlays.daylightTerminator){let e;null!=t&&(null!=t.max?e=t.max:null!=t.maxLocal?e=t.maxLocal:t.values.length>0&&(e=t.values[0]));let i=this;if(null==this.daylightTerminatorOverlay){function n(t){null!=t.daylightTerminatorOverlay&&t.daylightTerminatorOverlay.setTime()}this.daylightTerminatorOverlay=d()({fillOpacity:.3}),this.map.addLayer(this.daylightTerminatorOverlay),null==e&&(this.terminatorTimer=setInterval((function(){n(i)}),1e3))}null!=e&&this.daylightTerminatorOverlay.setTime(e)}else null!=this.daylightTerminatorOverlay&&(this.map.removeLayer(this.daylightTerminatorOverlay),null!=this.terminatorTimer&&(clearInterval(this.terminatorTimer),this.daylightTerminatorOverlay=null));this.debug&&console.log("setupDaylightTerminator END",new Date)}setupOpenSeaMapLayer(){if(this.debug&&console.log("setupOpenSeaMapLayer",new Date),this.mapSettings.overlays.seaLayer){var t=l.tileLayer("https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",{maxZoom:19,attribution:'Sea data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors',opacity:1});null!=this.OpenSeaMapLayer||(this.OpenSeaMapLayer=t,this.map.addLayer(this.OpenSeaMapLayer))}else null!=this.OpenSeaMapLayer&&(this.map.removeLayer(this.OpenSeaMapLayer),this.OpenSeaMapLayer=null);this.debug&&console.log("setupOpenSeaMapLayer END",new Date)}setupOpenRailMapLayer(){if(this.debug&&console.log("setupOpenRailMapLayer",new Date),this.mapSettings.overlays.railLayer){var t=l.tileLayer("https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",{minZoom:2,tileSize:256,maxZoom:19,attribution:'Rail style: <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA 2.0</a> <a href="http://www.openrailwaymap.org/">OpenRailwayMap</a> and OpenStreetMap',opacity:1});null!=this.OpenRailMapLayer||(this.OpenRailMapLayer=t,this.map.addLayer(this.OpenRailMapLayer))}else null!=this.OpenRailMapLayer&&(this.map.removeLayer(this.OpenRailMapLayer),this.OpenRailMapLayer=null);this.debug&&console.log("setupOpenRailMapLayer END",new Date)}setupCustomOverlay(t){if(this.debug&&console.log("setupCustomOverlay",new Date),null==this.mapSettings)return;let e=p(t,0,"overlays","customOverlayURI",this.mapSettings.overlays.customOverlayURI);if(this.mapSettings.overlays.customOverlay){if(null==this.overlayLayer){let t=l.tileLayer(e,{opacity:(100-this.mapSettings.overlays.transparency)/100});this.overlayLayer=t,this.map.addLayer(this.overlayLayer)}else if(e!=this.previousCustomOverlayURI){this.map.removeLayer(this.overlayLayer);let t=l.tileLayer(e,{opacity:(100-this.mapSettings.overlays.transparency)/100});this.overlayLayer=t,this.map.addLayer(this.overlayLayer)}this.previousCustomOverlayURI=e}else null!=this.overlayLayer&&(this.map.removeLayer(this.overlayLayer),this.overlayLayer=null);this.previousCustomOverlayURI=e,this.debug&&console.log("setupCustomOverlay END",new Date)}setupCustomVectorOverlay(t){if(this.debug&&console.log("setupCustomVectorOverlay",new Date),null==this.mapSettings)return;let e=p(t,0,"overlays","customVectorOverlayURI",this.mapSettings.overlays.customVectorOverlayURI);if(this.mapSettings.overlays.customVectorOverlay&&this.proActive){if(null==this.vectorOverlayLayer){var i={style:e},n=l.maplibreGL(i);this.vectorOverlayLayer=n,this.map.addLayer(this.vectorOverlayLayer)}else e!=this.previousCustomVectorOverlayURI&&(this.map.removeLayer(this.vectorOverlayLayer),i={style:e},n=l.maplibreGL(i),this.vectorOverlayLayer=n,this.map.addLayer(this.vectorOverlayLayer));this.previousCustomVectorOverlayURI=e}else null!=this.vectorOverlayLayer&&(this.map.removeLayer(this.vectorOverlayLayer),this.vectorOverlayLayer=null);this.previousCustomVectorOverlayURI=e,this.debug&&console.log("setupCustomVectorOverlay END",new Date)}setupCustomMapboxVectorOverlay(t){if(this.debug&&console.log("setupCustomMapboxVectorOverlay",new Date),null==this.mapSettings)return;let e=p(t,0,"overlays","customMapboxVectorOverlayURI",this.mapSettings.overlays.customMapboxVectorOverlayURI);if(this.mapSettings.overlays.customMapboxVectorOverlay&&this.proActive){if(null==this.mapboxVectorOverlayLayer){var i=l.mapboxGL({accessToken:this.mapSettings.overlays.customMapboxAPIKey,style:e});this.mapboxVectorOverlayLayer=i,this.map.addLayer(this.mapboxVectorOverlayLayer)}else e!=this.previousCustomMapboxVectorOverlayURI&&(this.map.removeLayer(this.mapboxVectorOverlayLayer),i=l.mapboxGL({accessToken:this.mapSettings.overlays.customMapboxAPIKey,style:e}),this.mapboxVectorOverlayLayer=i,this.map.addLayer(this.mapboxVectorOverlayLayer));this.previousCustomMapboxVectorOverlayURI=e}else null!=this.mapboxVectorOverlayLayer&&(this.map.removeLayer(this.mapboxVectorOverlayLayer),this.mapboxVectorOverlayLayer=null);this.previousCustomMapboxVectorOverlayURI=e,this.debug&&console.log("setupCustomMapboxVectorOverlay END",new Date)}setupWMSLayer(t){if(this.debug&&console.log("setupWMSLayer",new Date),null==this.mapSettings)return;let e=p(t,0,"wms","url",this.mapSettings.wms.url),i=p(t,0,"wms","layerName",this.mapSettings.wms.layerName),n=p(t,0,"wms","format",this.mapSettings.wms.format),r=p(t,0,"wms","styles",this.mapSettings.wms.styles),a=p(t,0,"wms","attribution",this.mapSettings.wms.attribution),s=p(t,0,"wms","transparency",this.mapSettings.wms.transparency);if(""!=e&&""!=i&&this.mapSettings.wms.show){let t,u=!0;if(null!=this.previousWmsSettings&&g(this.previousWmsSettings,this.mapSettings.wms)&&(u=!1),u){let u=e;-1==u.indexOf("?")&&(u+="?"),!u.endsWith("&")&&u.endsWith("?"),""==n&&(n="image/png");var o=18;null!=this.mapSettings.mapLayers.maxZoom&&(o=this.mapSettings.mapLayers.maxZoom);var h={layers:i,opacity:(100-s)/100,transparent:"TRUE",format:n,attribution:a,maxZoom:o};""!=r&&(h={layers:i,transparent:"TRUE",opacity:(100-s)/100,format:n,styles:r,attribution:a,maxZoom:o}),t=l.tileLayer.wms(u,h)}if(null!=this.wmsLayer){if(u){this.map.removeLayer(this.wmsLayer),this.wmsLayer=t;try{this.map.addLayer(this.wmsLayer)}catch(t){}}}else{this.wmsLayer=t;try{this.map.addLayer(this.wmsLayer)}catch(t){}}}else null!=this.wmsLayer&&(this.map.removeLayer(this.wmsLayer),this.wmsLayer=null);this.debug&&console.log("setupWMSLayer END",new Date)}setMapLayer(t,e){if(this.debug&&console.log("setMapLayer",new Date),null==this.mapSettings)return;let i="";i=this.mapSettings.mapLayers.backgroundMapLayer;let n=p(t,0,"mapLayers","backgroundMapLayer",i);""==n&&(n=i);let r,a="";if(null!=this.mapSettings.mapLayers&&(a=this.mapSettings.mapLayers.mapboxAccessToken),n.toUpperCase().startsWith("CUSTOM MAPBOX VECTOR LAYER")&&this.proActive&&(r=l.mapboxGL({accessToken:a,style:this.mapSettings.mapLayers.customLayerURI}),r.options.attribution='<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+"</a>"),n.toUpperCase().startsWith("CUSTOM VECTOR LAYER")&&this.proActive){var s={style:this.mapSettings.mapLayers.customLayerURI,maxZoom:this.mapSettings.mapLayers.maxZoom,minZoom:this.mapSettings.mapLayers.minZoom};r=l.maplibreGL(s),r.options.attribution='<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+"</a>"}if("Open Street Map - Standard"==n){let t='<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>';1==e&&(t+=" - <strong style='color:red'>OPENSTREETMAP SERVERS ARE NOT INTENDED FOR PRODUCTION USE</strong>"),r=l.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:t,maxZoom:18,zIndex:0})}if("Open Street Map - Humanitarian"==n){let t=l.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>',maxZoom:18,zIndex:0});1==e&&(t.options.attribution+=" - <strong style='color:red'>OPENSTREETMAP SERVERS ARE NOT INTENDED FOR PRODUCTION USE</strong>"),r=t}if("OpenTopoMap"==n){let t=l.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,zIndex:0,attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'});1==e&&(t.options.attribution+=" - <strong style='color:red'>OPENSTREETMAP SERVERS ARE NOT INTENDED FOR PRODUCTION USE</strong>"),r=t}"Mapbox - Streets"==n&&(r=l.tileLayer("https://api.mapbox.com/styles/v1/mapbox/streets-v10/tiles/256/{z}/{x}/{y}?access_token="+a,{attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Tiles &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:22,zIndex:0})),"Mapbox - Outdoors"==n&&(r=l.tileLayer("https://api.mapbox.com/styles/v1/mapbox/outdoors-v10/tiles/256/{z}/{x}/{y}?access_token="+a,{attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Tiles &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:22,zIndex:0})),"Mapbox - Dark"==n&&(r=l.tileLayer("https://api.mapbox.com/styles/v1/mapbox/dark-v9/tiles/256/{z}/{x}/{y}?access_token="+a,{attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Tiles &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:22,zIndex:0})),"Mapbox - Light"==n&&(r=l.tileLayer("https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token="+a,{attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Tiles &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:22,zIndex:0})),"Mapbox - Satellite"==n&&(r=l.tileLayer("https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/{z}/{x}/{y}?access_token="+a,{attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Tiles &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="https://www.digitalglobe.com/">DigitalGlobe</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:22,zIndex:0})),"Mapbox - Satellite Streets"==n&&(r=l.tileLayer("https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v10/tiles/256/{z}/{x}/{y}?access_token="+a,{attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | Tiles &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="https://www.digitalglobe.com/">DigitalGlobe</a>  &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:22,zIndex:0})),"Open Street Map - wmflabs OSM no labels"==n&&(r=l.tileLayer("https://tiles.wmflabs.org/osm-no-labels/{z}/{x}/{y}.png",{maxZoom:18,zIndex:0,attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'})),"Open Street Map - wmflabs OSM B&W"==n&&(r=l.tileLayer("https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",{maxZoom:18,zIndex:0,attribution:'<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+'</a> | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}));let o=p(t,0,"controls","attribution",this.mapSettings.controls.attribution);""!=o?"Custom URI"==n?o='<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+"</a>| "+o:r.options.attribution+=" | "+o:o='<a id="IconMapLink" href="'+this.IconMapAttributionURL+'">'+this.IconMapAttributionText+"</a>";let h=p(t,0,"mapLayers","customLayerURI",this.mapSettings.mapLayers.customLayerURI);"Custom URI"==n&&(r=l.tileLayer(h,{attribution:o,maxZoom:this.mapSettings.mapLayers.maxZoom,minZoom:this.mapSettings.mapLayers.minZoom,zIndex:0})),"None"==n&&(r=null);let u=!1;h!=this.previousCustomURI&&(u=!0);let c=!1;o!=this.previousAttribution&&(c=!0);try{if(null!=this.backgroundLayer){if(this.previousMapLayer!=n||u||c){this.map.removeLayer(this.backgroundLayer),this.backgroundLayer=r;var d=this.host;this.backgroundLayer.on("load",(function(){document.getElementById("IconMapLink").addEventListener("click",(()=>{d.launchUrl("https://www.icon-map.com/")}))})),this.map.addLayer(this.backgroundLayer)}}else this.backgroundLayer=r,null!=this.backgroundLayer&&(d=this.host,this.backgroundLayer.on("load",(function(){document.getElementById("IconMapLink").addEventListener("click",(()=>{d.launchUrl("https://www.icon-map.com/")}))})),this.map.addLayer(this.backgroundLayer))}catch(t){this.host.displayWarningIcon("An error occurred adding the background layer",t.toString())}this.previousMapLayer=n,this.previousCustomURI=h,this.previousAttribution=o,this.debug&&console.log("setMapLayer END",new Date)}setImageOverlay(t){this.debug&&console.log("intanciasetImageOverlay",new Date);let e=p(t,0,"crs","baseImage",this.mapSettings.crs.baseImage);if(null!=this.imageOverlay&&this.map.removeLayer(this.imageOverlay),""!=e){let t=1-this.mapSettings.crs.transparency/100;var i=[[this.mapSettings.crs.boundsStartY,this.mapSettings.crs.boundsStartX],[this.mapSettings.crs.boundsEndY,this.mapSettings.crs.boundsEndX]];this.imageOverlay=l.imageOverlay(e,i,{opacity:t}).addTo(this.map),this.previousImageOverlay=e}this.debug&&console.log("intanciasetImageOverlay END",new Date)}addMapControls(){if(this.debug&&console.log("addMapControls",new Date),null!=this.mapSettings.controls&&(this.mapSettings.controls.zoom?null==this.zoomControl&&(this.zoomControl=l.control.zoom({position:"topleft"}),this.zoomControl.addTo(this.map)):null!=this.zoomControl&&(this.zoomControl.remove(),this.zoomControl=null)),null!=this.mapSettings.controls)if(this.mapSettings.controls.autoZoomOverride){if(null==this.zoomOverrideControl){var t=this,e=l.Control.extend({onAdd:function(e){const i=l.DomUtil.create("div","leaflet-bar leaflet-control"),n=l.DomUtil.create("a","leaflet-control-zoomlock",i);return n.href="javascript:void(0)",n.title="Prevent auto zoom to data points",n.setAttribute("role","button"),n.setAttribute("aria-label",n.title),l.DomEvent.addListener(n,"click",(function(){n.classList.contains("active")?(n.classList.remove("active"),n.title="Prevent auto zoom to data points",t.zoomLocked=!1):(n.classList.add("active"),t.zoomLocked=!0,n.title="Re-enable auto zoom to data points")})),i}});this.zoomOverrideControl=new e({position:"topleft"}),this.zoomOverrideControl.addTo(this.map)}}else null!=this.zoomOverrideControl&&(this.zoomOverrideControl.remove(),this.zoomOverrideControl=null);if(null!=this.mapSettings.controls&&(this.mapSettings.controls.scale?null==this.scaleControl&&(this.scaleControl=l.control.scale(),this.scaleControl.addTo(this.map)):null!=this.scaleControl&&(this.scaleControl.remove(),this.scaleControl=null)),null!=this.mapSettings.controls&&(this.mapSettings.controls.measure?null==this.measureControl&&(this.measureControl=l.control.polylineMeasure({position:"topleft",unit:"metres",clearMeasurementsOnStop:!0,showBearings:!1,bearingTextIn:"In",bearingTextOut:"Out",tooltipTextFinish:"Click to <b>finish line</b><br>",tooltipTextDelete:"Press SHIFT-key and click to <b>delete point</b>",tooltipTextMove:"Click and drag to <b>move point</b><br>",tooltipTextResume:"<br>Press CTRL-key and click to <b>resume line</b>",tooltipTextAdd:"Press CTRL-key and click to <b>add point</b>",measureControlTitleOn:"Turn on Measure Tool",measureControlTitleOff:"Turn off Measure Tool",measureControlLabel:"&#8614;",measureControlClasses:[],showClearControl:!1,clearControlTitle:"Clear Measurements",clearControlLabel:"&times",clearControlClasses:[],showUnitControl:!0,distanceShowSameUnit:!1,unitControlTitle:{text:"Change Units",metres:"metres",landmiles:"land miles",nauticalmiles:"nautical miles"},unitControlLabel:{metres:"m",kilometres:"km",feet:"ft",landmiles:"mi",nauticalmiles:"nm"},tempLine:{color:"#00f",weight:2},fixedLine:{color:"#006",weight:2},startCircle:{color:"#000",weight:1,fillColor:"#0f0",fillOpacity:1,radius:3},intermedCircle:{color:"#000",weight:1,fillColor:"#ff0",fillOpacity:1,radius:3},currentCircle:{color:"#000",weight:1,fillColor:"#f0f",fillOpacity:1,radius:3},endCircle:{color:"#000",weight:1,fillColor:"#f00",fillOpacity:1,radius:3}}),this.measureControl.addTo(this.map)):null!=this.measureControl&&(this.measureControl.remove(),this.measureControl=null)),null!=this.mapSettings.mapLayers&&("None"!=this.mapSettings.mapLayers.backgroundMapLayer?null==this.attributionControl&&(this.attributionControl=l.control.attribution(),this.attributionControl.addTo(this.map)):null!=this.attributionControl&&(this.attributionControl.remove(),this.attributionControl=null)),null!=this.mapSettings.controls)if(this.mapSettings.controls.lasso){if(null==this.lasso){this.lasso=l.control.lasso({position:"topleft",polygon:{color:"#000000",weight:1.5,fillColor:"#AAAAAA",fillOpacity:.5,dashArray:"3 3"}}),this.lasso.options.intersect=this.mapSettings.controls.lassoIntersect,this.lasso.addTo(this.map);let t=!0;this.map.on("lasso.finished",(e=>{if(this.debug&&console.log("lasso.finished",new Date),t){let t=[],i=e.layers;if(0==e.layers.length){let t=e;null!=t.target&&null!=t.target._layers&&t.target._layers.length>0&&(i=t.target._layers)}for(let e=0;e<i.length;e++){let n=i[e];null!=n.options.selectionId?t.push(n.options.selectionId):null!=n.feature&&null!=n.feature.properties&&null!=n.feature.properties.selectionId&&t.push(n.feature.properties.selectionId)}this.clickHandler(t,!1,this,!1)}this.debug&&console.log("lasso.finished END",new Date)}))}}else null!=this.lasso&&(this.lasso.remove(),this.lasso=null);this.debug&&console.log("addMapControls END",new Date)}addClickEvents(t,e,i){let n=p(t,e,"points","allowSelection",this.mapSettings.points.allowSelection);if(("TRUE"==n.toUpperCase()||"YES"==n.toUpperCase())&&this.host.hostCapabilities.allowInteractions){const n=this.host.createSelectionIdBuilder().withCategory(t,e).createSelectionId();let r=this.selectionManager,a=this;i.on("click",(function(t){var e=t.originalEvent||t.data.originalEvent;r.clear(),a.clickHandler([t.target.feature.properties.selectionId],!1,a,e.ctrlKey||e.shiftKey)})),i.on("contextmenu",(function(t){r.showContextMenu(t.target.feature.properties.selectionId,{x:t.originalEvent.clientX,y:t.originalEvent.clientY})})),null==i.feature&&(i.feature={type:void 0,properties:{},geometry:void 0}),i.feature.properties.selectionId=n}}createLabel(t,e,i,n,r){if(this.mapSettings.labels.show){let h=p(t,e,"labels","text",this.mapSettings.labels.text);if(null!=h&&""!=h&&null!=i){let u,c=this.mapSettings.labels.fontFamily,d=this.mapSettings.labels.fontSize,m=p(t,e,"labels","textColor",this.mapSettings.labels.textColor),f=p(t,e,"labels","fillColor",this.mapSettings.labels.fillColor),y=p(t,e,"labels","borderColor",this.mapSettings.labels.borderColor),g=this.mapSettings.labels.borderWidth,_=this.mapSettings.labels.padding,v=1-this.mapSettings.labels.transparency/100;if("object"==typeof f&&null!=f&&(f=f.solid.color),"object"==typeof m&&null!=m&&(m=m.solid.color),"object"==typeof y&&null!=y&&(y=y.solid.color),null==f&&(f="transparent"),null==m&&(m="transparent"),null==y&&(y="transparent"),"function"==typeof i.getBounds)if(null!=i._latlng)u=i._latlng;else if(null!==i.feature&&null!==i.feature.geometry&&("MultiLineString"==i.feature.geometry.type||"LineString"==i.feature.geometry.type)&&null!==i.feature.geometry.coordinates&&i.feature.geometry.coordinates.length>0)if("MultiLineString"==i.feature.geometry.type){var a=i.feature.geometry.coordinates[0].length,o=Math.floor(a/2);u=new l.LatLng(i.feature.geometry.coordinates[0][o][1],i.feature.geometry.coordinates[0][o][0])}else a=i.feature.geometry.coordinates.length,o=Math.floor(a/2),u=new l.LatLng(i.feature.geometry.coordinates[o][1],i.feature.geometry.coordinates[o][0]);else u=i.getBounds().getCenter();else null!=i._latlng&&(u=i._latlng);if(null==u)return;let b={text:h,fontFamily:c,fontSize:d+"pt"},M=s.T.measureSvgTextWidth(b),x="margin-left: -"+M/2+"px;";x+="margin-top: -"+(s.T.measureSvgTextHeight(b)/2-500)+"px;";let w="background-color: "+f+";",S=_.toString()+"px "+_.toString()+"px "+_.toString()+"px "+_.toString()+"px",A=this.mapSettings.labels.borderRadius;document.documentElement.style.setProperty("--LabelFont",c),document.documentElement.style.setProperty("--LabelFontSize",d+"pt"),document.documentElement.style.setProperty("--LabelBorderWidth",g.toString()+"px"),document.documentElement.style.setProperty("--LabelPadding",S),document.documentElement.style.setProperty("--LabelOpacity",v.toString()),document.documentElement.style.setProperty("--LabelBorderRadius",A.toString()+"px");let T='<div class="iconmap-label" style="width:'+M+"px;"+w+";"+x+";border-color: "+y+"; color: "+m+'">';T+=this.stripHTML(h),T+="</div>";let C=l.divIcon({html:T}),I=l.marker(u,{icon:C});return null==I.feature&&(I.feature={type:void 0,properties:{},geometry:void 0}),I.feature.properties.isLabel=!0,null!=r&&(I.feature.properties.relatedSelectionId=r),n.push(I),I}}}generateTooltip(t,e,i,n,r){let a=p(t,i,"points","showTooltip",this.mapSettings.points.showTooltip);if(null!=a&&("TRUE"==a.toUpperCase()||"YES"==a.toUpperCase())&&this.host.hostCapabilities.allowInteractions){let a=new Array,l=this.host;if(null!=r){r.sort(((t,e)=>{const i=t.source.rolesIndex.tooltip[0],n=e.source.rolesIndex.tooltip[0];return i<n?-1:i>n?1:0}));for(var s=0;s<r.length;s++){let t=r[s],e=o.vt({format:t.source.format}).format(t.values[i]);a.push({displayName:t.source.displayName,value:e})}}else{if(this.mapSettings.mapTooltips.showCategory){let e="";null!=t.values[i]&&(e=t.values[i].toString()),a.push({displayName:t.source.displayName,value:e})}if(this.mapSettings.mapTooltips.showSize){let t=o.vt({format:e.source.format}).format(e.values[i]);a.push({displayName:e.source.displayName,value:t})}}n.on("mouseover",(function(t){var e=t.originalEvent||t.data.originalEvent;l.tooltipService.show({coordinates:[e.clientX,e.clientY],isTouchEvent:!1,dataItems:t.target.feature.properties.tooltipData,identities:[t.target.feature.properties.selectionId]})})),n.on("mouseout",(function(t){l.tooltipService.hide({isTouchEvent:!1,immediately:!1})})),null==n.feature&&(n.feature={type:void 0,properties:{},geometry:void 0}),n.feature.properties.tooltipData=a}}renderImageLayer(t,e,i,n,r,a,s,o){this.debug&&console.log("renderImageLayer",new Date);const h=this.mapSettings.points.icon,u=this.mapSettings.points.icon2,c=this.mapSettings.zoom.includeInZoom,d=this.mapSettings.points.imageRotation,f=this.mapSettings.formatting.fillTransparency,y=this.mapSettings.points.iconHeight,g=this.mapSettings.points.iconWidth;let _,v,b=t.length;if(this.images=new Array,null!=s.maxLocal&&(_=parseFloat(s.maxLocal.toString())),null!=s.minLocal&&(v=parseFloat(s.minLocal.toString())),null==s.maxLocal&&null!=s.max&&(_=parseFloat(s.max.toString())),null==s.minLocal&&null!=s.min&&(v=parseFloat(s.min.toString())),null==_)return;_==v&&(_=v+1);let M=this.mapSettings.points.minSize,x=this.mapSettings.points.maxSize;if(null!=n&&null!=i&&null!=s){for(let t=0;t<b;t++){let b,w,S,A,T;null!=n&&null!=n.values[t]&&(b=parseFloat(n.values[t].toString())),null!=i&&null!=i.values[t]&&(w=parseFloat(i.values[t].toString())),null!=a&&null!=a.values[t]&&(A=parseFloat(a.values[t].toString())),null!=r&&null!=r.values[t]&&(T=parseFloat(r.values[t].toString()));let C=!0;if(this.mapSettings.points.circleAndLines||null==A||null==T||(C=!1),null!=s&&(null!=s.values[t]?S=parseFloat(s.values[t].toString()):this.mapSettings.points.displayNull&&(S=M)),null!=b&&null!=w&&null!=S&&C){if(this.mapSettings.crs.reprojectMapObjects&&""!=this.mapSettings.crs.customLayerProjection){let t=m.default(this.mapSettings.crs.customLayerProjection,"EPSG:4326",[w,b]);b=t[1],w=t[0]}S=parseFloat(s.values[t].toString());let i=p(e,t,"points","imageRotation",d),n=p(e,t,"formatting","fillTransparency",f),r=p(e,t,"points","iconWidth",g),a=p(e,t,"points","iconHeight",y);n=(100-n)/100;let C=p(e,t,"points","icon",h);null==C&&(C="");let I=p(e,t,"points","icon2",u);null==I&&(I="");let k=!1;""!=C&&("http"!=C.substring(0,4).toLowerCase()&&"data"!=C.substring(0,4).toLowerCase()||(k=!0),"<svg"!=C.substring(0,4).toLowerCase()&&"<?xml"!=C.substring(0,5).toLowerCase()||(C="data:image/svg+xml;utf8,"+encodeURIComponent(C),k=!0));let P=!1;""!=I&&("http"!=I.substring(0,4).toLowerCase()&&"data"!=I.substring(0,4).toLowerCase()||(P=!0),"<svg"!=I.substring(0,4).toLowerCase()&&"<?xml"!=I.substring(0,5).toLowerCase()||(I="data:image/svg+xml;utf8,"+encodeURIComponent(I),P=!0));let E=p(e,t,"zoom","includeInZoom",c);if(!Number.isNaN(b)&&!Number.isNaN(w)&&!Number.isNaN(S)&&k){let h=S;"Relative"==this.mapSettings.points.sizeBehaviour&&(h=(S-v)/(_-v)*(x-M)+M,r=h,a=h);let u,c=0,d=l.icon({iconUrl:C,iconSize:[r,a],iconAnchor:[+r/2+c,+a/2]}),m=new l.Marker([b,w],{icon:d,rotationAngle:i,opacity:n,riseOnHover:!0});"Simple"==this.mapSettings.crs.CRS&&this.mapSettings.crs.flipYAxis&&(b=this.mapSettings.crs.boundsEndY-b+this.mapSettings.crs.boundsStartY),"TRUE"!=E.toUpperCase()&&"YES"!=E.toUpperCase()||(null==m.feature&&(m.feature={type:void 0,properties:{},geometry:void 0}),m.feature.properties.bounds=l.latLngBounds([b,w],[b,w]),null==this.autoZoomBounds?this.autoZoomBounds=l.latLngBounds([b,w],[b,w]):this.autoZoomBounds.extend([b,w]),this.noOfZoomableItems++),this.addClickEvents(e,t,m),this.generateTooltip(e,s,t,m,o),null!=m.feature&&null!=m.feature.properties&&null!=m.feature.properties.selectionId&&(u=m.feature.properties.selectionId),null==A&&null==T&&this.createLabel(e,t,m,this.images,u),this.images.push(m)}if(null!=A&&!Number.isNaN(A)&&null!=T&&!Number.isNaN(T)&&!Number.isNaN(S)&&P){let r=S;"Relative"==this.mapSettings.points.sizeBehaviour&&(r=(S-v)/(_-v)*(x-M)+M);let a=0,h=l.icon({iconUrl:I,iconSize:[r,r],iconAnchor:[+r/2+a,+r/2]}),u=new l.Marker([A,T],{icon:h,rotationAngle:i,opacity:n,riseOnHover:!0});"TRUE"!=E.toUpperCase()&&"YES"!=E.toUpperCase()||(null==u.feature&&(u.feature={type:void 0,properties:{},geometry:void 0}),u.feature.properties.bounds=l.latLngBounds([A,T],[A,T]),"Simple"==this.mapSettings.crs.CRS&&this.mapSettings.crs.flipYAxis&&(A=this.mapSettings.crs.boundsEndY-A+this.mapSettings.crs.boundsStartY),null==this.autoZoomBounds?this.autoZoomBounds=l.latLngBounds([A,T],[A,T]):this.autoZoomBounds.extend([A,T]),this.noOfZoomableItems++),this.addClickEvents(e,t,u),this.generateTooltip(e,s,t,u,o),this.images.push(u)}}}null!=this.imageLayerGroup&&this.map.removeLayer(this.imageLayerGroup),this.imageLayerGroup=l.featureGroup(this.images),this.map.addLayer(this.imageLayerGroup),this.debug&&console.log("renderImageLayer END",new Date)}}renderCircleLayer(t,e,i,n,r,a,s,o){this.debug&&console.log("renderCircleLayer",new Date);const h={solid:{color:this.mapSettings.formatting.fillColour}},u={solid:{color:this.mapSettings.formatting.borderColour}},c=this.mapSettings.formatting.borderTransparency,d=this.mapSettings.formatting.fillTransparency,f=this.mapSettings.points.icon,y=this.mapSettings.formatting.dashArray,g=this.mapSettings.points.circleSizeType,_=this.mapSettings.zoom.includeInZoom,v=this.mapSettings.formatting.borderWidth,b=this.mapSettings.vectorLayer.coordinateUse,M=this.mapSettings.formatting.fillStyle,x=this.mapSettings.formatting.hatchAngle,w=this.mapSettings.formatting.hatchWidth;let S,A,T=t.length;if(this.circles=new Array,null!=s&&null!=s.maxLocal&&(S=parseFloat(s.maxLocal.toString())),null!=s&&null!=s.minLocal&&(A=parseFloat(s.minLocal.toString())),null!=s&&null==s.maxLocal&&null!=s.max&&(S=parseFloat(s.max.toString())),null!=s&&null==s.minLocal&&null!=s.min&&(A=parseFloat(s.min.toString())),null==S)return;S==A&&(S=A+1);let C=this.mapSettings.points.minSize,I=this.mapSettings.points.maxSize;if(null!=n&&null!=i&&null!=s){for(let t=0;t<T;t++){let T,D,L,z,F;if(null!=n&&null!=n.values[t]&&(T=parseFloat(n.values[t].toString())),null!=i&&null!=i.values[t]&&(D=parseFloat(i.values[t].toString())),null!=s&&(null!=s.values[t]?L=parseFloat(s.values[t].toString()):this.mapSettings.points.displayNull&&(L=C)),null!=a&&null!=a.values[t]&&(z=parseFloat(a.values[t].toString())),null!=r&&null!=r.values[t]&&(F=parseFloat(r.values[t].toString())),this.mapSettings.points.circleAndLines&&(z=null,F=null),null!=T&&null!=D&&null!=L&&null==z&&null==F){if(this.mapSettings.crs.reprojectMapObjects&&""!=this.mapSettings.crs.customLayerProjection){let t=m.default(this.mapSettings.crs.customLayerProjection,"EPSG:4326",[D,T]);T=t[1],D=t[0]}let i=p(e,t,"points","icon",f);null==i&&(i="");let n=p(e,t,"vectorLayer","coordinateUse",b);if(n=null==n?"NO":n.toUpperCase(),!Number.isNaN(T)&&!Number.isNaN(D)&&!Number.isNaN(L)&&""==i&&"YES"!=n){"Simple"==this.mapSettings.crs.CRS&&this.mapSettings.crs.flipYAxis&&(T=this.mapSettings.crs.boundsEndY-T+this.mapSettings.crs.boundsStartY);let i=p(e,t,"formatting","fillColour",h).solid.color,n=p(e,t,"formatting","borderColour",u).solid.color,r=p(e,t,"formatting","fillTransparency",d),a=p(e,t,"formatting","borderTransparency",c),m=p(e,t,"formatting","dashArray",y),f=p(e,t,"points","circleSizeType",g),b=p(e,t,"zoom","includeInZoom",_),z=p(e,t,"formatting","borderWidth",v),F=p(e,t,"formatting","fillStyle",M),O=p(e,t,"formatting","hatchAngle",x),R=p(e,t,"formatting","hatchWidth",w);a=(100-a)/100,r=(100-r)/100;let N,B=L;var k,P;if("Relative"==this.mapSettings.points.sizeBehaviour&&(B=(L-A)/(S-A)*(I-C)+C),"HATCHED"==F.toUpperCase()){var E={weight:R,color:i,angle:O};(P=new l.StripePattern(E)).addTo(this.map),k={radius:B,dashArray:m,weight:z,color:n,fillOpacity:r,opacity:a,fillPattern:P}}else k={radius:B,dashArray:m,weight:z,color:n,fillColor:i,fillOpacity:r,opacity:a};let j;N="fixed"==f.toLowerCase()?l.circle([T,D],k):l.circleMarker([T,D],k),"TRUE"!=b.toUpperCase()&&"YES"!=b.toUpperCase()||(null==N.feature&&(N.feature={type:void 0,properties:{},geometry:void 0}),N.feature.properties.bounds=l.latLngBounds([T,D],[T,D]),null==this.autoZoomBounds?this.autoZoomBounds=l.latLngBounds([T,D],[T,D]):this.autoZoomBounds.extend([T,D]),this.noOfZoomableItems++),this.addClickEvents(e,t,N),this.generateTooltip(e,s,t,N,o),null!=N.feature&&null!=N.feature.properties&&null!=N.feature.properties.selectionId&&(j=N.feature.properties.selectionId),this.createLabel(e,t,N,this.circles,j),this.circles.push(N)}}}null!=this.circleLayerGroup&&this.map.removeLayer(this.circleLayerGroup),this.circleLayerGroup=l.featureGroup(this.circles),this.map.addLayer(this.circleLayerGroup),this.debug&&console.log("renderCircleLayer END",new Date)}else null!=this.circleLayerGroup&&this.map.removeLayer(this.circleLayerGroup)}renderLineLayer(t,e,i,n,r,a,s,o){this.debug&&console.log("renderLineLayer",new Date);const h={solid:{color:this.mapSettings.formatting.borderColour}},u=this.mapSettings.formatting.borderTransparency,c=this.mapSettings.formatting.dashArray,d=this.mapSettings.zoom.includeInZoom,f=this.mapSettings.vectorLayer.coordinateUse;let y=this.mapSettings.formatting.borderWidth,g=t.length;if(this.lines=new Array,null!=n&&null!=i&&null!=s&&null!=a&&null!=r){for(let t=0;t<g;t++){let g,P,E,D;if(null!=n&&null!=n.values[t]&&(g=parseFloat(n.values[t].toString())),null!=i&&null!=i.values[t]&&(P=parseFloat(i.values[t].toString())),null!=a&&null!=a.values[t]&&(E=parseFloat(a.values[t].toString())),null!=r&&null!=r.values[t]&&(D=parseFloat(r.values[t].toString())),null!=g&&null!=P&&null!=E&&null!=D){let i=p(e,t,"vectorLayer","coordinateUse",f);if(i=null==i?"NO":i.toUpperCase(),!(Number.isNaN(g)||Number.isNaN(P)||Number.isNaN(E)||Number.isNaN(D)||"YES"==i)){let i=p(e,t,"formatting","borderColour",h).solid.color,n=u,r=p(e,t,"formatting","dashArray",c),a=p(e,t,"zoom","includeInZoom",d),f=p(e,t,"formatting","borderWidth",y);if(n=(100-n)/100,this.mapSettings.crs.reprojectMapObjects&&""!=this.mapSettings.crs.customLayerProjection){let t=m,e=t.default(this.mapSettings.crs.customLayerProjection,"EPSG:4326",[P,g]);g=e[1],P=e[0],e=t.default(this.mapSettings.crs.customLayerProjection,"EPSG:4326",[D,E]),E=e[1],D=e[0]}"Simple"==this.mapSettings.crs.CRS&&this.mapSettings.crs.flipYAxis&&(g=this.mapSettings.crs.boundsEndY-g+this.mapSettings.crs.boundsStartY,E=this.mapSettings.crs.boundsEndY-E+this.mapSettings.crs.boundsStartY);let L,z=l.latLng(g,P),F=l.latLng(E,D),O=[z,F];if("Straight"==this.mapSettings.points.lineBehaviour)L=l.polyline(O,{color:i,weight:f,opacity:n,smoothFactor:1,dashArray:r});else if(z.toString()!=F.toString()){var v=[g,P],b=[E,D],M={weight:f,opacity:n,color:i,dashArray:r};if("Curved"==this.mapSettings.points.lineBehaviour){var x=b[1]-v[1],w=b[0]-v[0],S=Math.sqrt(Math.pow(x,2)+Math.pow(w,2)),A=Math.atan2(w,x),T=S/2/Math.cos(.314),C=A+.314,I=T*Math.cos(C)+v[1],k=[T*Math.sin(C)+v[0],I];[].push(v,k,b),L=l.curve(["M",v,"Q",k,b],M)}else L=l.polyline(_(v,b),M)}if(null!=L){let i;"TRUE"!=a.toUpperCase()&&"YES"!=a.toUpperCase()||(null==L.feature&&(L.feature={type:void 0,properties:{},geometry:void 0}),L.feature.properties.bounds=L.getBounds(),null==this.autoZoomBounds?this.autoZoomBounds=L.getBounds():this.autoZoomBounds.extend(L.getBounds()),this.noOfZoomableItems++),this.addClickEvents(e,t,L),this.generateTooltip(e,s,t,L,o),null!=L.feature&&null!=L.feature.properties&&null!=L.feature.properties.selectionId&&(i=L.feature.properties.selectionId),this.createLabel(e,t,L,this.lines,i),this.lines.push(L)}}}}null!=this.lineLayerGroup&&this.map.removeLayer(this.lineLayerGroup),this.lineLayerGroup=l.featureGroup(this.lines),this.map.addLayer(this.lineLayerGroup),this.debug&&console.log("renderLineLayer END",new Date)}else null!=this.lineLayerGroup&&this.map.removeLayer(this.lineLayerGroup)}renderGeoJSONLayer(t,e,i,n,r,a,s){if(this.debug&&console.log("renderGeoJSONLayer",new Date),!this.mapSettings.geoJSON.show)return null!=this.geoJSONLayer&&(this.map.removeLayer(this.geoJSONLayer),this.geoJSONLayer=null),void(null!=this.geoJsonLabelsLayerGroup&&(this.map.removeLayer(this.geoJsonLabelsLayerGroup),this.geoJsonLabelsLayerGroup=null));let o=p(e,0,"geoJSON","geoJSON1",this.mapSettings.geoJSON.geoJSON1);p(e,0,"geoJSON","geoJSON2",this.mapSettings.geoJSON.geoJSON2),p(e,0,"geoJSON","geoJSON3",this.mapSettings.geoJSON.geoJSON3),p(e,0,"geoJSON","geoJSON4",this.mapSettings.geoJSON.geoJSON4),p(e,0,"geoJSON","geoJSON5",this.mapSettings.geoJSON.geoJSON5);const h={solid:{color:this.mapSettings.formatting.fillColour}},u={solid:{color:this.mapSettings.formatting.borderColour}},c=this.mapSettings.formatting.borderTransparency,d=this.mapSettings.formatting.fillTransparency,m=this.mapSettings.formatting.fillStyle,f=this.mapSettings.formatting.hatchAngle,y=this.mapSettings.formatting.hatchWidth,g=this.mapSettings.formatting.hatchSpacing,_=this.mapSettings.points.icon,v=this.mapSettings.formatting.dashArray,b=this.mapSettings.zoom.includeInZoom,M=this.mapSettings.geoJSON.lineWidth;let x=t.length,w=new Array,S=[];for(let t=0;t<x;t++){let a,s=!1;null!=n&&null!=n.values[t]&&(s=!0),null!=i&&null!=i.values[t]&&(s=!0),null!=r&&null!=r.values&&r.values[t]&&(a=parseFloat(r.values[t].toString()));let o=p(e,t,"points","icon",_);if(null==o&&(o=""),!Number.isNaN(a)&&""==o&&!s&&null!=e.values&&null!=e.values[t]){var A={index:t,label:e.values[t].toString()};S.push(A)}}if(null!=this.geoJsonLabelsLayerGroup&&(this.map.removeLayer(this.geoJsonLabelsLayerGroup),this.geoJsonLabelsLayerGroup=null),""!=o&&this.mapSettings.geoJSON.show){let t=this;if(""!=o&&null!=this.geoJSON&&""!=this.geoJSON){null!=this.geoJSONLayer&&this.map.removeLayer(this.geoJSONLayer);let i=this.mapSettings;if(null==this.geoJSONSettings.geoJSONLevels[a])return;var T=this;this.geoJSONSettings.geoJSONLayers=new Array(this.geoJSONSettings.geoJSONLevels[a].noOfFiles);for(var C=0;C<this.geoJSONSettings.geoJSONLevels[a].noOfFiles;C++)try{var I=this.geoJSONSettings.geoJSONLevels[a].geoJsonJson[C];let n={pointToLayer:function(t,e){return l.circleMarker(e)},filter:function(t){if(!i.geoJSON.hideMissing)return!0;for(var e=!1,n=0;n<S.length;n++)for(var r in t.properties.selectionId=null,t.properties)if(null!=S[n].label&&null!=t.properties[r]&&S[n].label.toUpperCase()==t.properties[r].toString().toUpperCase()){e=!0;break}return e},style:function(n){for(var a=0;a<S.length;a++)for(var s in n.properties.selectionId=null,n.properties)if(null!=S[a].label&&null!=n.properties[s]&&S[a].label.toUpperCase()==n.properties[s].toString().toUpperCase()){n.properties.pointId=S[a].index;let s=p(e,S[a].index,"formatting","fillColour",h).solid.color,x=p(e,S[a].index,"formatting","borderColour",u).solid.color,w=p(e,S[a].index,"formatting","fillTransparency",d),A=p(e,S[a].index,"formatting","borderTransparency",c),T=p(e,S[a].index,"formatting","dashArray",v),C=p(e,S[a].index,"geoJSON","lineWidth",M),I=p(e,S[a].index,"formatting","fillStyle",m),k=p(e,S[a].index,"formatting","hatchAngle",f),P=p(e,S[a].index,"formatting","hatchWidth",y);if(p(e,S[a].index,"formatting","hatchSpacing",g),"point"==n.geometry.type.toLowerCase()){let e,n;if(null!=r.maxLocal&&(e=parseFloat(r.maxLocal.toString())),null!=r.minLocal&&(n=parseFloat(r.minLocal.toString())),null==r.maxLocal&&null!=r.max&&(e=parseFloat(r.max.toString())),null==r.minLocal&&null!=r.min&&(n=parseFloat(r.min.toString())),null==e)return;e==n&&(e=n+1);let h,u=i.points.minSize,c=i.points.maxSize;null!=r&&null!=r.values[S[a].index]&&(h=parseFloat(r.values[S[a].index].toString()));let d=h;if("Relative"==i.points.sizeBehaviour&&(d=(h-n)/(e-n)*(c-u)+u),"HATCHED"==I.toUpperCase()){var o={weight:P,color:s,angle:k};(_=new l.StripePattern(o)).addTo(t.map),b={radius:d,dashArray:T,weight:C,color:x,fillOpacity:(100-w)/100,opacity:(100-A)/100,fillPattern:_}}else b={radius:d,dashArray:T,weight:C,color:x,fillColor:s,fillOpacity:(100-w)/100,opacity:(100-A)/100};return b}var _,b;return"HATCHED"==I.toUpperCase()?(o={weight:P,color:s,angle:k},(_=new l.StripePattern(o)).addTo(t.map),b={dashArray:T,weight:C,color:x,fillOpacity:(100-w)/100,opacity:(100-A)/100,fillPattern:_}):b={dashArray:T,weight:C,color:x,fillColor:s,fillOpacity:(100-w)/100,opacity:(100-A)/100},b}if(i.geoJSON.autoZoomInactivePolygons){let e;if(null==l.latLngBounds(n.geometry.coordinates).getSouthWest()){var x={lng:n.geometry.coordinates[0],lat:n.geometry.coordinates[1]};e=l.latLngBounds(x,x)}else{var w={lng:l.latLngBounds(n.geometry.coordinates).getSouthWest().lat,lat:l.latLngBounds(n.geometry.coordinates).getSouthWest().lng},A={lng:l.latLngBounds(n.geometry.coordinates).getNorthEast().lat,lat:l.latLngBounds(n.geometry.coordinates).getNorthEast().lng};T.noOfZoomableItems++,e=l.latLngBounds(w,A)}n.properties.bounds=e,null==t.autoZoomBounds?t.autoZoomBounds=e:t.autoZoomBounds.extend(e)}const C={solid:{color:i.geoJSON.missingFillColor}},I={solid:{color:i.geoJSON.missingLineColor}};let k=p(e,0,"geoJSON","missingFillColor",C).solid.color,P=p(e,0,"geoJSON","missingLineColor",I).solid.color,E=M,D=(100-c)/100,L=(100-d)/100;return t.mapSettings.geoJSON.useFileFormatting&&null!=n.properties&&(null!=n.properties.colour&&(k=n.properties.colour),null!=n.properties.color&&(k=n.properties.color),null!=n.properties.fill&&(k=n.properties.fill),null!=n.properties.stroke&&(P=n.properties.stroke),null!=n.properties.strokeWidth&&(E=n.properties.strokeWidth),null!=n.properties.strokeOpacity&&(D=n.properties.strokeOpacity),null!=n.properties.fillOpacity&&(L=n.properties.fillOpacity)),"point"==n.geometry.type.toLowerCase()?{radius:i.points.minSize,dashArray:v,weight:E,color:P,fillColor:k,fillOpacity:L,opacity:D}:{dashArray:v,weight:E,color:P,fillColor:k,fillOpacity:L,opacity:D}},onEachFeature:function(i,n){if(null!=i.properties&&null!=i.properties.pointId){let u;t.addClickEvents(e,i.properties.pointId,n),t.generateTooltip(e,r,i.properties.pointId,n,s),null!=i&&null!=i.properties&&null!=i.properties.selectionId&&(u=i.properties.selectionId);let c=p(e,i.properties.pointId,"zoom","includeInZoom",b);if("YES"==c.toUpperCase()||"TRUE"==c.toUpperCase()){let e;if(null==l.latLngBounds(i.geometry.coordinates).getSouthWest()){var a={lng:i.geometry.coordinates[0],lat:i.geometry.coordinates[1]};e=l.latLngBounds(a,a)}else{var o,h;o={lng:l.latLngBounds(i.geometry.coordinates).getSouthWest().lat,lat:l.latLngBounds(i.geometry.coordinates).getSouthWest().lng},h={lng:l.latLngBounds(i.geometry.coordinates).getNorthEast().lat,lat:l.latLngBounds(i.geometry.coordinates).getNorthEast().lng},e=l.latLngBounds(o,h)}i.properties.bounds=e,null==t.autoZoomBounds?t.autoZoomBounds=e:t.autoZoomBounds.extend(e),this.noOfZoomableItems++}t.createLabel(e,i.properties.pointId,n,w,u)}}};this.mapSettings.crs.reprojectMapObjects&&""!=this.mapSettings.crs.customLayerProjectionCode?this.geoJSONSettings.geoJSONLayers[C]=l.Proj.geoJson(I,n):this.geoJSONSettings.geoJSONLayers[C]=l.geoJSON(I,n),this.geoJSONSettings.geoJSONLayers[C].addTo(this.map),this.geoJSONLayer=this.geoJSONSettings.geoJSONLayers[C],this.geoJsonLabelsLayerGroup=l.featureGroup(w),this.map.addLayer(this.geoJsonLabelsLayerGroup)}catch(t){this.host.displayWarningIcon("An error occurred rendering your geoJSON layer",t.toString())}}else null!=this.geoJSONLayer&&(null!=this.geoJsonLabelsLayerGroup&&(this.map.removeLayer(this.geoJsonLabelsLayerGroup),this.geoJsonLabelsLayerGroup=null),this.map.removeLayer(this.geoJSONLayer),this.geoJSONLayer=null)}this.debug&&console.log("renderGeoJSONLayer END",new Date)}renderVectorTileLayer(t,e,i,n,r,a,s,u,c,d){if(this.debug&&console.log("renderVectorLayer",new Date),!this.mapSettings.vectorLayer.show)return void(null!=this.vectorLayer&&(this.map.removeLayer(this.vectorLayer),this.vectorLayer=null));const y={solid:{color:this.mapSettings.formatting.fillColour}},g={solid:{color:this.mapSettings.formatting.borderColour}},_=this.mapSettings.formatting.borderTransparency,v=this.mapSettings.formatting.fillTransparency,b=this.mapSettings.points.icon,M=this.mapSettings.vectorLayer.coordinateUse,x=this.mapSettings.formatting.dashArray,w=this.mapSettings.formatting.borderWidth,S=this.mapSettings.formatting.hatchAngle,A=this.mapSettings.formatting.hatchWidth,T=this.mapSettings.formatting.fillStyle;let C=t.length,I=[],k=s.highlights,P=[],E=[];for(let t=0;t<C;t++){let o,h=!1;null!=n&&null!=n.values[t]&&(h=!0),null!=i&&null!=i.values[t]&&(h=!0),null!=s&&null!=s.values&&s.values[t]&&(o=parseFloat(s.values[t].toString()));let u=p(e,t,"points","icon",b);null==u&&(u="");let c=p(e,t,"vectorLayer","coordinateUse",M);if(null==c&&(c=""),"YES"==c.toUpperCase()&&(h=!1),!Number.isNaN(o)&&""==u&&!h&&null!=e.values&&null!=e.values[t]){var D={index:t,label:e.values[t].toString()};I.push(D);let s=p(e,t,"vectorLayer","coordinateUse",M);if(null!=s&&"YES"==s.toUpperCase()&&null!=n&&null!=n.values[t]&&null!=i&&null!=i.values[t]){let s=parseFloat(n.values[t].toString()),o=parseFloat(i.values[t].toString()),h=!1;if(null!=k&&k.length>0&&this.mapSettings.zoom.zoomOnHighlight&&null!=k[t]){h=!0;let i=this.host.createSelectionIdBuilder().withCategory(e,t).createSelectionId();P.push(i)}if(null!=a&&null!=a.values[t]&&null!=r&&null!=r.values[t]){let e=parseFloat(a.values[t].toString()),i=parseFloat(r.values[t].toString());if(this.mapSettings.crs.reprojectMapObjects&&""!=this.mapSettings.crs.customLayerProjection){let t=m,n=t.default(this.mapSettings.crs.customLayerProjection,"EPSG:4326",[o,s]);s=n[1],o=n[0],n=t.default(this.mapSettings.crs.customLayerProjection,"EPSG:4326",[i,e]),e=n[1],i=n[0]}var L={lng:o,lat:s},z={lng:o,lat:e},F=l.latLngBounds(L,z);null!=k&&k.length>0?h&&E.push(F):(null==this.autoZoomBounds?this.autoZoomBounds=F:this.autoZoomBounds.extend(F),this.noOfZoomableItems++)}else{if(this.mapSettings.crs.reprojectMapObjects&&""!=this.mapSettings.crs.customLayerProjection){let t=m.default(this.mapSettings.crs.customLayerProjection,"EPSG:4326",[o,s]);s=t[1],o=t[0]}var O={lng:o,lat:s};F=l.latLngBounds(O,O),null!=k&&k.length>0?h&&E.push(F):(null==this.autoZoomBounds?this.autoZoomBounds=F:this.autoZoomBounds.extend(F),this.noOfZoomableItems++)}}}}var R=this.mapSettings.vectorLayer.url;if(R=p(e,0,"vectorLayer","url",R),1==c&&(R=this.mapSettings.vectorLayer.url2),2==c&&(R=this.mapSettings.vectorLayer.url3),3==c&&(R=this.mapSettings.vectorLayer.url4),4==c&&(R=this.mapSettings.vectorLayer.url5),null!=R&&""!=R&&this.mapSettings.vectorLayer.show){const d=I.map((t=>t.label.toUpperCase()));let m=this,b=this.mapSettings;P.length>0&&(u=P);let M={style:function(t,i){for(var n in t.properties)if(null!=t.properties[n]){var r=d.indexOf(t.properties[n].toString().toUpperCase());if(r>-1){t.properties.pointId=I[r].index;let i=p(e,I[r].index,"formatting","fillColour",y).solid.color,n=p(e,I[r].index,"formatting","borderColour",g).solid.color,c=p(e,I[r].index,"formatting","fillTransparency",v),d=p(e,I[r].index,"formatting","borderTransparency",_),b=p(e,I[r].index,"formatting","dashArray",x),M=p(e,I[r].index,"formatting","borderWidth",w),C=p(e,I[r].index,"formatting","fillStyle",T),k=p(e,I[r].index,"formatting","hatchAngle",S),P=p(e,I[r].index,"formatting","hatchWidth",A),E=p(e,I[r].index,"points","allowSelection",m.mapSettings.points.allowSelection);if(("TRUE"==E.toUpperCase()||"YES"==E.toUpperCase())&&m.host.hostCapabilities.allowInteractions){const i=m.host.createSelectionIdBuilder().withCategory(e,I[r].index).createSelectionId();null==t&&(t={type:void 0,properties:{},geometry:void 0}),t.properties.selectionId=i;let n=90,a=30;if(null!=m.mapSettings&&(n=m.mapSettings.highlighting.highlightTransparency,a=m.mapSettings.highlighting.unhighlightTransparency),null!=u&&u.length>0){let t=!1;null!=i&&(t=f(i,u)),c=t?n:a}}let D=p(e,I[r].index,"points","showTooltip",m.mapSettings.points.showTooltip);if(("TRUE"==D.toUpperCase()||"YES"==D.toUpperCase())&&m.host.hostCapabilities.allowInteractions){let i=new Array;if(m.mapSettings.mapTooltips.showCategory){let t="";null!=e.values[I[r].index]&&(t=e.values[I[r].index].toString()),i.push({displayName:e.source.displayName,value:t})}if(m.mapSettings.mapTooltips.showSize){let t=o.vt({format:s.source.format}).format(s.values[I[r].index]);i.push({displayName:s.source.displayName,value:t})}t.properties.tooltipData=i}var a;if(t.properties.originalOpacity=(100-d)/100,t.properties.originalFillOpacity=(100-c)/100,"HATCHED"==C.toUpperCase()){var h={weight:P,color:i,angle:k};return(a=new l.StripePattern(h)).addTo(m.map),{fillPattern:a,dashArray:b,weight:M,color:n,fillColor:i,fillOpacity:(100-c)/100,opacity:(100-d)/100}}return{dashArray:b,weight:M,color:n,fillColor:i,fillOpacity:(100-c)/100,opacity:(100-d)/100}}}const c={solid:{color:b.vectorLayer.missingFillColor}},M={solid:{color:b.vectorLayer.missingLineColor}},C=b.vectorLayer.borderTransparency,k=b.vectorLayer.fillTransparency,P=b.vectorLayer.dashArray,E=b.vectorLayer.lineWidth;let D=p(e,0,"vectorLayer","missingFillColor",c).solid.color,L=p(e,0,"vectorLayer","missingLineColor",M).solid.color,z=p(e,0,"vectorLayer","fillTransparency",k),F=p(e,0,"vectorLayer","borderTransparency",C);return{dashArray:p(e,0,"vectorLayer","dashArray",P),weight:p(e,0,"vectorLayer","borderWidth",E),color:L,fillColor:D,fillOpacity:(100-z)/100,opacity:(100-F)/100}}},C=R,k=(0,h.A)(C,M),D=m.selectionManager,L=this;k.on("click",(function(o){if(null!=o.layer.feature.properties.selectionId){D.clear();var l=[o.layer.feature.properties.selectionId],h=L.previousSelectedIds,u=!1;null!=h&&h.length>0&&h[0].key==l[0].key&&(u=!0),u?(D.clear(),l=[]):D.select(l,!1),L.clickHandler(l,!0,L,!1),L.previousSelectedIds=l,0==l.length&&(l=null),L.renderVectorTileLayer(t,e,i,n,r,a,s,l,c)}})),k.on("contextmenu",(function(t){null!=t.layer.feature.properties.selectionId&&D.showContextMenu(t.layer.feature.properties.selectionId,{x:t.originalEvent.clientX,y:t.originalEvent.clientY})}));let z=this.host;k.on("mouseover",(function(t){null!=t.layer.feature.properties.selectionId&&z.tooltipService.show({coordinates:[t.originalEvent.clientX,t.originalEvent.clientY],isTouchEvent:!1,dataItems:t.layer.feature.properties.tooltipData,identities:[t.layer.feature.properties.selectionId]})})),E.length>0&&this.mapSettings.zoom.zoomOnHighlight&&!this.zoomLocked&&this.map.fitBounds(E),k.addTo(this.map),null!=this.vectorLayer&&this.map.removeLayer(this.vectorLayer),this.vectorLayer=k}else null!=this.vectorLayer&&(this.map.removeLayer(this.vectorLayer),this.vectorLayer=null);this.debug&&console.log("renderVectorLayer END",new Date)}renderWKTAsTGeoJSONLayer(t,e,i,n,r,a){this.debug&&console.log("renderWKAsTGeoJSONLayer",new Date);const s={solid:{color:this.mapSettings.formatting.fillColour}},o={solid:{color:this.mapSettings.formatting.borderColour}},h=this.mapSettings.formatting.borderTransparency,c=this.mapSettings.formatting.fillTransparency,d=this.mapSettings.points.icon,m=this.mapSettings.formatting.dashArray,f=this.mapSettings.zoom.includeInZoom,y=this.mapSettings.formatting.borderWidth,g=this.mapSettings.formatting.fillStyle,_=this.mapSettings.formatting.hatchAngle,v=this.mapSettings.formatting.hatchWidth,b=this.mapSettings.points.icon2,M=this.mapSettings.points.imageRotation,x=this.mapSettings.points.iconHeight,w=this.mapSettings.points.iconWidth;let S,A,T=t.length;if(this.wktShapes=new Array,null!=r.maxLocal&&(S=parseFloat(r.maxLocal.toString())),null!=r.minLocal&&(A=parseFloat(r.minLocal.toString())),null==r.maxLocal&&null!=r.max&&(S=parseFloat(r.max.toString())),null==r.minLocal&&null!=r.min&&(A=parseFloat(r.min.toString())),null==S)return;S==A&&(S=A+1);let C=this.mapSettings,I=this,k=this.mapSettings.points.minSize,P=this.mapSettings.points.maxSize;for(let t=0;t<T;t++){let T;null!=r&&null!=r.values[t]&&(T=parseFloat(r.values[t].toString()));let F=!1,O=!1;null!=n&&null!=n.values[t]&&(O=!0),null!=i&&null!=i.values[t]&&(O=!0);let R=p(e,t,"points","icon",d),N=!1;if(O||(null==R&&(R=""),""!=R&&(this.isWKT(R.toUpperCase())&&(R=R.toUpperCase(),F=!0),"{"==R.charAt(0)&&(F=!0,N=!0))),null!=r&&(null!=r.values[t]?T=parseFloat(r.values[t].toString()):this.mapSettings.points.displayNull&&(T=k)),!Number.isNaN(T)&&F){var E;N?E=JSON.parse(R):(R=this.fixWKT(R),E=u(R));let i=p(e,t,"formatting","fillColour",s).solid.color,n=p(e,t,"formatting","borderColour",o).solid.color,d=p(e,t,"formatting","fillTransparency",c),F=p(e,t,"formatting","borderTransparency",h),O=p(e,t,"formatting","dashArray",m),B=p(e,t,"formatting","fillStyle",g),j=p(e,t,"formatting","hatchAngle",_),H=p(e,t,"formatting","hatchWidth",v),U=p(e,t,"formatting","borderWidth",y);F=(100-F)/100,d=(100-d)/100,null!=r&&null!=r.values[t]&&(T=parseFloat(r.values[t].toString()));let V=T;if("Relative"==this.mapSettings.points.sizeBehaviour&&(V=(T-A)/(S-A)*(P-k)+k),"Simple"==I.mapSettings.crs.CRS&&I.mapSettings.crs.flipYAxis)for(var D=0;D<E.coordinates.length;D++)if(null!=E.coordinates[D][0])for(var L=0;L<E.coordinates[D].length;L++)if(null!=E.coordinates[D][L][0]&&E.coordinates[D][L][0].length>2)for(var z=0;z<E.coordinates[D][L].length;z++)E.coordinates[D][L][z][1]=this.mapSettings.crs.boundsEndY-E.coordinates[D][L][z][1]+this.mapSettings.crs.boundsStartY;else E.coordinates[D][L][1]=this.mapSettings.crs.boundsEndY-E.coordinates[D][L][1]+this.mapSettings.crs.boundsStartY;else E.coordinates[D][1]=this.mapSettings.crs.boundsEndY-E.coordinates[D][1]+this.mapSettings.crs.boundsStartY;let G={pointToLayer:function(t,e){return l.circleMarker(e)},style:function(e){var r;if("HATCHED"==B.toUpperCase()){var a={weight:H,color:i,angle:j};(r=new l.StripePattern(a)).addTo(I.map)}return e.properties.selectionId=null,e.properties.pointId=t,"point"==e.geometry.type.toLowerCase()||"multipoint"==e.geometry.type.toLowerCase()?"HATCHED"==B.toUpperCase()?{fillPattern:r,radius:V,dashArray:O,weight:U,color:n,fillColor:i,fillOpacity:d,opacity:F}:{radius:V,dashArray:O,weight:U,color:n,fillColor:i,fillOpacity:d,opacity:F}:"HATCHED"==B.toUpperCase()?{fillPattern:r,dashArray:O,weight:U,color:n,fillColor:i,fillOpacity:d,opacity:F}:{dashArray:O,weight:U,color:n,fillColor:i,fillOpacity:d,opacity:F}},onEachFeature:function(i,n){if(null==i.properties){i.properties={};let n=p(e,t,"points","allowSelection",C.points.allowSelection);if(("TRUE"==n.toUpperCase()||"YES"==n.toUpperCase())&&I.host.hostCapabilities.allowInteractions){const n=I.host.createSelectionIdBuilder().withCategory(e,t).createSelectionId();i.properties.selectionId=n}let h=p(e,t,"points","icon2",b);if(null==h&&(h=""),""!=h&&("MultiLineString"==i.type||"LineString"==i.type)&&null!==i.coordinates&&i.coordinates.length>0){var s;let n=p(e,t,"points","iconWidth",w),u=p(e,t,"points","iconHeight",x);if("MultiLineString"==i.type){var o=i.coordinates[0].length;s=new l.LatLng(i.coordinates[0][o-1][1],i.coordinates[0][o-1][0])}else o=i.coordinates.length,s=new l.LatLng(i.coordinates[o-1][1],i.coordinates[o-1][0]);null!=r&&null!=r.values[t]&&(T=parseFloat(r.values[t].toString()));let c=T;"Relative"==I.mapSettings.points.sizeBehaviour&&(c=(T-A)/(S-A)*(P-k)+k,n=c,u=c);let m=p(e,t,"points","imageRotation",M),f=0,y=l.icon({iconUrl:h,iconSize:[n,u],iconAnchor:[+n/2+f,+u/2]}),g=new l.Marker([s.lat,s.lng],{icon:y,rotationAngle:m,opacity:d,riseOnHover:!0});I.wktShapes.push(g),I.addClickEvents(e,t,g),I.generateTooltip(e,r,t,g,a)}}let h;I.addClickEvents(e,t,n),I.generateTooltip(e,r,t,n,a),null!=i&&null!=i.properties&&null!=i.properties.selectionId&&(h=i.properties.selectionId);let u=p(e,t,"zoom","includeInZoom",f);if("YES"==u.toUpperCase()||"TRUE"==u.toUpperCase()){let t,e;if(e=null!=i.geometry?i.geometry.coordinates:i.coordinates,null==l.latLngBounds(e).getSouthWest()){var c={lng:e[0],lat:e[1]};t=l.latLngBounds(c,c)}else{var m={lng:l.latLngBounds(e).getSouthWest().lat,lat:l.latLngBounds(e).getSouthWest().lng},y={lng:l.latLngBounds(e).getNorthEast().lat,lat:l.latLngBounds(e).getNorthEast().lng};t=l.latLngBounds(m,y)}null==i.properties&&(i.properties={}),i.properties.bounds=t,null==I.autoZoomBounds?I.autoZoomBounds=t:I.autoZoomBounds.extend(t),this.noOfZoomableItems++}I.createLabel(e,t,n,I.wktShapes,h)}};this.mapSettings.crs.reprojectMapObjects&&""!=this.mapSettings.crs.customLayerProjectionCode?this.wktShapes.push(l.Proj.geoJson(E,G)):this.wktShapes.push(l.geoJSON(E,G))}}null!=this.wktLayerGroup&&this.map.removeLayer(this.wktLayerGroup),this.wktLayerGroup=l.featureGroup(this.wktShapes),this.map.addLayer(this.wktLayerGroup),this.debug&&console.log("renderWKTAsGeoJSONLayer END",new Date)}highlightItems(t,e){this.debug&&console.log("highlightItems",new Date);let i=e,n=t.values[0].highlights;null!=n&&n.length>0&&n.every(((t,e,i)=>t===i[0]))&&(n=t.values[i].highlights);let r=[];if(null!=n&&n.length>0)for(let e=0;e<n.length;e++)if(null!=n[e]){let i=this.host.createSelectionIdBuilder().withCategory(t.categories[0],e).createSelectionId();r.push(i)}r.length>0&&this.clickHandler(r,!0,this,!1),this.debug&&console.log("highlightItems END",new Date)}clickHandler(t,e,i,n){this.debug&&console.log("clickHandler",new Date);let r=this.selectionManager,a=[];if(e||(function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;t.sort(y),e.sort(y);for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}(t,this.previousSelectedIds)?(r.clear(),t=[]):(n&&(t=this.previousSelectedIds.concat(t)),t=function(t){t.concat();for(let e=0;e<t.length;++e)for(let i=e+1;i<t.length;++i)t[e]===t[i]&&t.splice(i--,1);return t}(t),this.debug&&console.log("clickHandler - selectionManager",new Date,t),r.select(t,n),this.debug&&console.log("clickHandler - selectionManager END",new Date))),0==t.length&&0==this.previousSelectedIds.length)return!1;let s=this.map,o=90,l=30;null!=this.mapSettings&&(o=100-this.mapSettings.highlighting.highlightTransparency,l=100-this.mapSettings.highlighting.unhighlightTransparency),s.eachLayer((function(e){let n,r,h=!1;if(null!=e.feature&&null!=e.feature.properties&&null!=e.feature.properties.selectionId&&(n=e.feature.properties.selectionId),i.mapSettings.highlighting.includeLabels&&null!=e.feature&&null!=e.feature.properties&&null!=e.feature.properties.isLabel&&e.feature.properties.isLabel&&(h=!0,null!=e.feature.properties.relatedSelectionId&&(r=e.feature.properties.relatedSelectionId)),null!=n||h){if(null==e.feature.properties.originalOpacity&&(e.feature.properties.originalOpacity=e.options.opacity,e.feature.properties.originalFillOpacity=e.options.fillOpacity),s.removeLayer(e),0==t.length)null!=e.options.icon?e.options.opacity=e.feature.properties.originalOpacity:(e.options.opacity=e.feature.properties.originalOpacity,e.options.fillOpacity=e.feature.properties.originalFillOpacity);else{let i=!1;null!=n&&(i=f(n,t)),null!=r&&(i=f(r,t)),i?(null==e.options.icon&&(e.options.fillOpacity=o/100),e.options.opacity=o/100,null!=e.feature&&null!=e.feature.properties&&null!=e.feature.properties.bounds?a.push(e.feature.properties.bounds):null!=e.feature&&null!=e.feature.properties&&null!=e._bounds&&a.push(e._bounds)):(e.options.opacity=l/100,null==e.options.icon&&(e.options.fillOpacity=l/100))}s.addLayer(e)}})),0==t.length&&(null==i.autoZoomBounds||this.zoomLocked||i.map.fitBounds(i.autoZoomBounds)),a.length>0&&(!i.mapSettings.zoom.zoomOnSelect||e||this.zoomLocked||i.map.fitBounds(a),i.mapSettings.zoom.zoomOnHighlight&&e&&!this.zoomLocked&&i.map.fitBounds(a)),this.previousSelectedIds=t,this.debug&&console.log("clickHandler END",new Date)}updateCRSSettings(t){if(this.debug&&console.log("updateCRSSettings",new Date),"EPSG3857"==this.mapSettings.crs.CRS&&(this.mapSettings.crs.reprojectMapObjects=!1),"EPSG27700"==this.mapSettings.crs.CRS){this.mapSettings.crs.customLayerProjectionCode="EPSG:27700",this.mapSettings.crs.customLayerProjection="+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs",this.mapSettings.crs.customLayerResolutions="896.0, 448.0, 224.0, 112.0, 56.0, 28.0, 14.0, 7.0, 3.5, 1.75",this.mapSettings.crs.customLayerOriginX=1376256,this.mapSettings.crs.customLayerOriginY=-238375;let t={merge:[{objectName:"crs",properties:{CRS:"EPSG27700",customLayerProjectionCode:"EPSG:27700",customLayerProjection:"+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs",customLayerResolutions:"896.0, 448.0, 224.0, 112.0, 56.0, 28.0, 14.0, 7.0, 3.5, 1.75",customLayerOriginX:1376256,customLayerOriginY:-238375,boundsStartY:0,boundsStartX:0,boundsEndY:1e3,boundsEndX:1e3,minZoom:0,maxZoom:16,baseImage:"",flipYAxis:!1,transparency:0,reprojectMapObjects:this.mapSettings.crs.reprojectMapObjects},selector:null}]};this.host.persistProperties(t)}if("EPSG3006"==this.mapSettings.crs.CRS){this.mapSettings.crs.customLayerProjectionCode="EPSG:3006",this.mapSettings.crs.customLayerProjection="+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",this.mapSettings.crs.customLayerResolutions="8192, 4096, 2048, 1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, 0.5",this.mapSettings.crs.customLayerOriginX=0,this.mapSettings.crs.customLayerOriginY=0;let t={merge:[{objectName:"crs",properties:{CRS:"EPSG3006",customLayerProjectionCode:"EPSG:3006",customLayerProjection:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",customLayerResolutions:"8192, 4096, 2048, 1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, 0.5",customLayerOriginX:0,customLayerOriginY:0,boundsStartY:0,boundsStartX:0,boundsEndY:1e3,boundsEndX:1e3,minZoom:0,maxZoom:16,baseImage:"",flipYAxis:!1,transparency:0,reprojectMapObjects:this.mapSettings.crs.reprojectMapObjects},selector:null}]};this.host.persistProperties(t)}if("EPSG3009"==this.mapSettings.crs.CRS){this.mapSettings.crs.customLayerProjectionCode="EPSG:3009",this.mapSettings.crs.customLayerProjection="+proj=tmerc +lat_0=0 +lon_0=15 +k=1 +x_0=150000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",this.mapSettings.crs.customLayerResolutions="8192, 4096, 2048, 1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, 0.5",this.mapSettings.crs.customLayerOriginX=0,this.mapSettings.crs.customLayerOriginY=0;let t={merge:[{objectName:"crs",properties:{CRS:"EPSG3009",customLayerProjectionCode:"EPSG:3009",customLayerProjection:"+proj=tmerc +lat_0=0 +lon_0=15 +k=1 +x_0=150000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",customLayerResolutions:"8192, 4096, 2048, 1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, 0.5",customLayerOriginX:0,customLayerOriginY:0,boundsStartY:0,boundsStartX:0,boundsEndY:1e3,boundsEndX:1e3,minZoom:0,maxZoom:16,baseImage:"",flipYAxis:!1,transparency:0,reprojectMapObjects:this.mapSettings.crs.reprojectMapObjects},selector:null}]};this.host.persistProperties(t)}let e=!0,i=p(t,0,"crs","baseImage",this.mapSettings.crs.baseImage),n=!1;this.previousImageOverlay!=i&&(n=!0),null!=this.previousCRSSettings&&g(this.previousCRSSettings,this.mapSettings.crs)&&!n&&(e=!1),this.previousCRSSettings=this.mapSettings.crs,e&&(this.map.remove(),this.previousMapLayer="",this.previousCustomURI="",this.previousAttribution="",this.previousCustomOverlayURI="",this.previousWmsSettings=null,this.intanciateMap(),this.setImageOverlay(t),this.scaleControl=null,this.zoomControl=null,this.attributionControl=null,this.lasso=null,this.addMapControls()),this.debug&&console.log("updateCRSSettings END",new Date)}persistZoom(t,e,i,n,r){this.debug&&console.log("persistZoom",new Date),t.zoom.defaultLatitude=i,t.zoom.defaultLongitude=n,t.zoom.defaultZoom=r;let a={merge:[{objectName:"zoom",properties:{zoomOnHighlight:t.zoom.zoomOnHighlight,zoomOnSelect:t.zoom.zoomOnSelect,defaultLatitude:i,defaultLongitude:n,defaultZoom:r,zoomOnSingleItem:t.zoom.zoomOnSingleItem,zoomOnSingleLevel:t.zoom.zoomOnSingleLevel,zoomIncrement:t.zoom.zoomIncrement,lockMap:t.zoom.lockMap},selector:null}]};e.persistingSettings=!0,e.host.persistProperties(a),this.debug&&console.log("persistZoom END",new Date)}update(t){this.debug&&console.log("update",new Date),this.mapSettings=n.Mb.parse(t.dataViews[0]),this.proActive&&(this.mapSettings.mapLayers=this.mapSettings.mapLayersPro);var e=this;if(null==e.map&&e.intanciateMap(),e.persistingSettings)return void(e.persistingSettings=!1);e.events.renderingStarted(t),e.HandleLandingPage(t);let i,a,s,o,h,u,c=t.dataViews[0].categorical,d=0;if(null!=c.categories)for(var m=0;m<c.categories.length;m++)1==c.categories[m].source.roles.category&&(d=m);e.loading||e.loadGeoJSONFiles(c.categories[d]),document.documentElement.style.setProperty("--ControlSize",e.mapSettings.controls.controlSize.toString()+"px"),document.documentElement.style.setProperty("--GrayScaleAmount",(e.mapSettings.mapLayers.grayscale/100).toString()),document.documentElement.style.setProperty("--BackGroundOpacity",((100-e.mapSettings.mapLayers.transparency)/100).toString());const p=c.values;let f=this;if(e.loading)return e.geoJSONTimeoutCounter++,void(e.geoJSONTimeoutCounter<=e.geoJSONTimeoutMax&&setTimeout((function(){f.update(t)}),1e3));if(null==p)return;0==c.categories[0].values.length&&(null!=e.wktLayerGroup&&e.map.removeLayer(e.wktLayerGroup),null!=e.lineLayerGroup&&e.map.removeLayer(e.lineLayerGroup),null!=e.imageLayerGroup&&e.map.removeLayer(e.imageLayerGroup),null!=e.circleLayerGroup&&e.map.removeLayer(e.circleLayerGroup));const y=p.grouped();var _=[];if(null!=c&&null!=c.values)for(var v=0;v<c.values.length;v++)1==c.values[v].source.roles.tooltip&&_.push(c.values[v]);null!=c.values&&(i=r.i3(y,"Longitude"),a=r.i3(y,"Latitude"),o=r.i3(y,"DestinationLongitude"),h=r.i3(y,"DestinationLatitude"),s=r.i3(y,"Size"),u=r.i3(y,"Time")),e.updateCRSSettings(c.categories[0]);let b,M,x,w,S,A,T=y?y.length:0;for(let t=0;t<T;++t){let e=y[t];b=e.values[i],M=e.values[a],w=e.values[o],S=e.values[h],x=e.values[s],A=e.values[u]}null==e.mapSettings.formatting.fillColour&&(e.mapSettings.formatting.fillColour=e.colorPalette.getColor(c[0]).value),e.setMapLayer(c.categories[0],t.viewMode),e.setupOpenRailMapLayer(),e.setupOpenSeaMapLayer(),e.setupCustomOverlay(c.categories[0]),e.setupCustomVectorOverlay(c.categories[0]),e.setupCustomMapboxVectorOverlay(c.categories[0]),e.setupWMSLayer(c.categories[0]),e.setupDaylightTerminator(A),e.addMapControls(),e.autoZoomBounds=null,e.noOfZoomableItems=0,e.needPixiRedraw=0,e.renderVectorTileLayer(y[0].values[0].values,c.categories[d],b,M,w,S,x,null,d,_),e.renderGeoJSONLayer(y[0].values[0].values,c.categories[d],b,M,x,d,_),e.renderWKTAsTGeoJSONLayer(y[0].values[0].values,c.categories[0],b,M,x,_),e.renderLineLayer(y[0].values[0].values,c.categories[0],b,M,w,S,x,_),e.renderCircleLayer(y[0].values[0].values,c.categories[0],b,M,w,S,x,_),e.renderImageLayer(y[0].values[0].values,c.categories[0],b,M,w,S,x,_),e.highlightItems(c,s);let C=e.mapSettings,I=e.map,k=e.events;null!=e.autoZoomBounds?e.zoomLocked||(1==e.noOfZoomableItems?e.mapSettings.zoom.zoomOnSingleItem?(e.map.once("zoomend",(function(e){k.renderingFinished(t)})),g(e.autoZoomBounds.getNorthEast(),e.autoZoomBounds.getSouthWest())?e.map.setView(e.autoZoomBounds.getCenter(),e.mapSettings.zoom.zoomOnSingleLevel):e.map.fitBounds(e.autoZoomBounds,{maxZoom:e.mapSettings.zoom.zoomOnSingleLevel})):g(e.autoZoomBounds.getNorthEast(),e.autoZoomBounds.getSouthWest())?e.map.setView(e.autoZoomBounds.getCenter()):e.map.fitBounds(e.autoZoomBounds):(e.map.once("zoomend",(function(e){k.renderingFinished(t)})),e.map.fitBounds(e.autoZoomBounds))):(e.initialLoad&&"NO"==e.mapSettings.zoom.includeInZoom.toUpperCase()&&(e.map.setView(l.latLng(e.mapSettings.zoom.defaultLatitude,e.mapSettings.zoom.defaultLongitude)),e.map.setZoom(e.mapSettings.zoom.defaultZoom)),e.events.renderingFinished(t)),0!=t.viewMode&&"NO"==e.mapSettings.zoom.includeInZoom.toUpperCase()&&e.map.on("moveend",(function(t){f.persistZoom(C,f,I.getCenter().lat,I.getCenter().lng,I.getZoom())})),C.zoom.lockMap?e.map.dragging.enabled()&&(e.map.dragging.disable(),e.map.scrollWheelZoom.disable(),e.map.doubleClickZoom.disable(),e.map.touchZoom.disable()):e.map.dragging.enabled()||(e.map.dragging.enable(),e.map.scrollWheelZoom.enable(),e.map.touchZoom.enable(),e.map.doubleClickZoom.enable()),e.initialLoad=!1,this.debug&&console.log("update END",new Date)}enumerateObjectInstances(t){this.debug&&console.log("enumerateObjectInstances",new Date);const e=this.mapSettings||n.Mb.getDefault();let i=n.Mb.enumerateObjectInstances(e,t),r=new Array,s=t.objectName;switch(s){case"mapLayers":if(this.proActive){i=[];break}let t,e={backgroundMapLayer:this.mapSettings.mapLayers.backgroundMapLayer,grayscale:this.mapSettings.mapLayers.grayscale,transparency:this.mapSettings.mapLayers.transparency};if(t=Object.assign({},e),"Custom URI"==this.mapSettings.mapLayers.backgroundMapLayer||this.mapSettings.mapLayers.backgroundMapLayer.toUpperCase().startsWith("CUSTOM VECTOR LAYER")){let e={customLayerURI:this.mapSettings.mapLayers.customLayerURI,minZoom:this.mapSettings.mapLayers.minZoom,maxZoom:this.mapSettings.mapLayers.maxZoom};t=Object.assign({},t,e)}if(this.mapSettings.mapLayers.backgroundMapLayer.toUpperCase().startsWith("CUSTOM MAPBOX VECTOR LAYER")){let e={customLayerURI:this.mapSettings.mapLayers.customLayerURI};t=Object.assign({},t,e)}-1!=this.mapSettings.mapLayers.backgroundMapLayer.toUpperCase().search("MAPBOX")&&(t=Object.assign({},t,{mapboxAccessToken:this.mapSettings.mapLayers.mapboxAccessToken})),r.push({objectName:s,properties:t,propertyInstanceKind:{backgroundMapLayer:3,customLayerURI:3,customLayerProjectionCode:3,customLayerProjection:3,customLayerOrigin:3,customLayerResolutions:3,customOverlayProjection:3,customOverlayURI:3},validValues:{grayscale:{numberRange:{min:0,max:100}},transparency:{numberRange:{min:0,max:100}}},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"mapLayersPro":if(!this.proActive){i=[];break}let n,l={backgroundMapLayer:this.mapSettings.mapLayers.backgroundMapLayer,grayscale:this.mapSettings.mapLayers.grayscale,transparency:this.mapSettings.mapLayers.transparency};if(n=Object.assign({},l),"Custom URI"==this.mapSettings.mapLayers.backgroundMapLayer||this.mapSettings.mapLayers.backgroundMapLayer.toUpperCase().startsWith("CUSTOM VECTOR LAYER")){let t={customLayerURI:this.mapSettings.mapLayers.customLayerURI,minZoom:this.mapSettings.mapLayers.minZoom,maxZoom:this.mapSettings.mapLayers.maxZoom};n=Object.assign({},n,t)}if(this.mapSettings.mapLayers.backgroundMapLayer.toUpperCase().startsWith("CUSTOM MAPBOX VECTOR LAYER")){let t={customLayerURI:this.mapSettings.mapLayers.customLayerURI};n=Object.assign({},n,t)}-1!=this.mapSettings.mapLayers.backgroundMapLayer.toUpperCase().search("MAPBOX")&&(n=Object.assign({},n,{mapboxAccessToken:this.mapSettings.mapLayers.mapboxAccessToken})),r.push({objectName:s,properties:n,propertyInstanceKind:{backgroundMapLayer:3,customLayerURI:3,customLayerProjectionCode:3,customLayerProjection:3,customLayerOrigin:3,customLayerResolutions:3,customOverlayProjection:3,customOverlayURI:3},validValues:{grayscale:{numberRange:{min:0,max:100}},transparency:{numberRange:{min:0,max:100}}},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"overlays":let h,u={customOverlay:this.mapSettings.overlays.customOverlay},c={daylightTerminator:this.mapSettings.overlays.daylightTerminator,seaLayer:this.mapSettings.overlays.seaLayer,railLayer:this.mapSettings.overlays.railLayer};if(h=Object.assign({},u),this.mapSettings.overlays.customOverlay){let t={customOverlayURI:this.mapSettings.overlays.customOverlayURI,transparency:this.mapSettings.overlays.transparency,customOverlayProjection:this.mapSettings.overlays.customOverlayProjection};h=Object.assign({},h,t)}if(this.proActive){let t={customVectorOverlay:this.mapSettings.overlays.customVectorOverlay};if(h=Object.assign({},h,t),this.mapSettings.overlays.customVectorOverlay&&this.proActive){let t={customVectorOverlayURI:this.mapSettings.overlays.customVectorOverlayURI};h=Object.assign({},h,t)}let e={customMapboxVectorOverlay:this.mapSettings.overlays.customMapboxVectorOverlay};if(h=Object.assign({},h,e),this.mapSettings.overlays.customMapboxVectorOverlay){let t={customMapboxVectorOverlayURI:this.mapSettings.overlays.customMapboxVectorOverlayURI,customMapboxAPIKey:this.mapSettings.overlays.customMapboxAPIKey};h=Object.assign({},h,t)}}h=Object.assign({},h,c),r.push({objectName:s,properties:h,validValues:{transparency:{numberRange:{min:0,max:100}},mapboxVectorTransparency:{numberRange:{min:0,max:100}},vectorTransparency:{numberRange:{min:0,max:100}}},propertyInstanceKind:{customOverlayProjection:3,customOverlayURI:3,customVectorOverlayURI:3,customMapboxVectorOverlayURI:3},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"crs":let d,m={CRS:this.mapSettings.crs.CRS},p={boundsStartY:this.mapSettings.crs.boundsStartY,boundsStartX:this.mapSettings.crs.boundsStartX,boundsEndY:this.mapSettings.crs.boundsEndY,boundsEndX:this.mapSettings.crs.boundsEndX,flipYAxis:this.mapSettings.crs.flipYAxis,baseImage:this.mapSettings.crs.baseImage,minZoom:this.mapSettings.crs.minZoom,maxZoom:this.mapSettings.crs.maxZoom,transparency:this.mapSettings.crs.transparency},f={customLayerProjectionCode:this.mapSettings.crs.customLayerProjectionCode,customLayerProjection:this.mapSettings.crs.customLayerProjection,customLayerResolutions:this.mapSettings.crs.customLayerResolutions,customLayerOriginX:this.mapSettings.crs.customLayerOriginX,customLayerOriginY:this.mapSettings.crs.customLayerOriginY,reprojectMapObjects:this.mapSettings.crs.reprojectMapObjects};d="Simple"==this.mapSettings.crs.CRS?Object.assign({},m,p):"Proj4"==this.mapSettings.crs.CRS||"EPSG27700"==this.mapSettings.crs.CRS||"EPSG3006"==this.mapSettings.crs.CRS||"EPSG3009"==this.mapSettings.crs.CRS?Object.assign({},m,f):m,r.push({objectName:s,properties:d,validValues:{transparency:{numberRange:{min:0,max:100}}},propertyInstanceKind:{baseImage:3},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"wms":r.push({objectName:s,properties:{show:this.mapSettings.wms.show,url:this.mapSettings.wms.url,layerName:this.mapSettings.wms.layerName,format:this.mapSettings.wms.format,styles:this.mapSettings.wms.styles,attribution:this.mapSettings.wms.attribution,transparency:this.mapSettings.wms.transparency},validValues:{transparency:{numberRange:{min:0,max:100}}},propertyInstanceKind:{url:3,layerName:3,format:3,styles:3,attribution:3,transparency:3},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"zoom":let y;y="NO"==this.mapSettings.zoom.includeInZoom.toUpperCase()?{includeInZoom:this.mapSettings.zoom.includeInZoom,defaultLongitude:this.mapSettings.zoom.defaultLongitude,defaultLatitude:this.mapSettings.zoom.defaultLatitude,defaultZoom:this.mapSettings.zoom.defaultZoom,zoomOnHighlight:this.mapSettings.zoom.zoomOnHighlight,zoomOnSelect:this.mapSettings.zoom.zoomOnSelect,zoomOnSingleItem:this.mapSettings.zoom.zoomOnSingleItem,zoomIncrement:this.mapSettings.zoom.zoomIncrement,lockMap:this.mapSettings.zoom.lockMap}:{includeInZoom:this.mapSettings.zoom.includeInZoom,zoomOnHighlight:this.mapSettings.zoom.zoomOnHighlight,zoomOnSelect:this.mapSettings.zoom.zoomOnSelect,zoomOnSingleItem:this.mapSettings.zoom.zoomOnSingleItem,zoomIncrement:this.mapSettings.zoom.zoomIncrement,lockMap:this.mapSettings.zoom.lockMap},this.mapSettings.zoom.zoomOnSingleItem&&(y.zoomOnSingleLevel=this.mapSettings.zoom.zoomOnSingleLevel),r.push({objectName:s,properties:y,propertyInstanceKind:{includeInZoom:3},selector:a.Z(1),altConstantValueSelector:null,validValues:{zoomOnSingleLevel:{numberRange:{min:0,max:20}}}}),i=r;break;case"highlighting":r.push({objectName:s,properties:{highlightTransparency:this.mapSettings.highlighting.highlightTransparency,unhighlightTransparency:this.mapSettings.highlighting.unhighlightTransparency,includeLabels:this.mapSettings.highlighting.includeLabels},validValues:{highlightTransparency:{numberRange:{min:0,max:100}},unhighlightTransparency:{numberRange:{min:0,max:100}}},selector:null,altConstantValueSelector:null}),i=r;break;case"mapTooltips":r.push({objectName:s,properties:{showCategory:this.mapSettings.mapTooltips.showCategory,showSize:this.mapSettings.mapTooltips.showSize},validValues:{highlightTransparency:{numberRange:{min:0,max:100}},unhighlightTransparency:{numberRange:{min:0,max:100}}},selector:null,altConstantValueSelector:null}),i=r;break;case"formatting":{let t={fillStyle:this.mapSettings.formatting.fillStyle,fillColour:this.mapSettings.formatting.fillColour,borderColour:this.mapSettings.formatting.borderColour,borderWidth:this.mapSettings.formatting.borderWidth,fillTransparency:this.mapSettings.formatting.fillTransparency,borderTransparency:this.mapSettings.formatting.borderTransparency,dashArray:this.mapSettings.formatting.dashArray},e={fillStyle:this.mapSettings.formatting.fillStyle,hatchAngle:this.mapSettings.formatting.hatchAngle,hatchSpacing:this.mapSettings.formatting.hatchSpacing,hatchWidth:this.mapSettings.formatting.hatchWidth,fillColour:this.mapSettings.formatting.fillColour,borderColour:this.mapSettings.formatting.borderColour,borderWidth:this.mapSettings.formatting.borderWidth,fillTransparency:this.mapSettings.formatting.fillTransparency,borderTransparency:this.mapSettings.formatting.borderTransparency,dashArray:this.mapSettings.formatting.dashArray},n=null;n="HATCHED"==this.mapSettings.formatting.fillStyle.toUpperCase()?e:t,r.push({objectName:s,properties:n,validValues:{borderTransparency:{numberRange:{min:0,max:100}},fillTransparency:{numberRange:{min:0,max:100}}},propertyInstanceKind:{fillStyle:3,hatchAngle:3,hatchSpacing:3,hatchWidth:3,fillColour:3,borderColour:3,dashArray:3,borderWidth:3,fillTransparency:3,borderTransparency:3},selector:a.Z(1),altConstantValueSelector:null}),i=r;break}case"points":let g;g="Relative"==this.mapSettings.points.sizeBehaviour?{icon:this.mapSettings.points.icon,icon2:this.mapSettings.points.icon2,imageRotation:this.mapSettings.points.imageRotation,circleAndLines:this.mapSettings.points.circleAndLines,circleSizeType:this.mapSettings.points.circleSizeType,lineBehaviour:this.mapSettings.points.lineBehaviour,sizeBehaviour:this.mapSettings.points.sizeBehaviour,minSize:this.mapSettings.points.minSize,maxSize:this.mapSettings.points.maxSize,displayNull:this.mapSettings.points.displayNull,showTooltip:this.mapSettings.points.showTooltip,allowSelection:this.mapSettings.points.allowSelection}:{imageRotation:this.mapSettings.points.imageRotation,circleAndLines:this.mapSettings.points.circleAndLines,circleSizeType:this.mapSettings.points.circleSizeType,lineBehaviour:this.mapSettings.points.lineBehaviour,sizeBehaviour:this.mapSettings.points.sizeBehaviour,iconWidth:this.mapSettings.points.iconWidth,iconHeight:this.mapSettings.points.iconHeight,displayNull:this.mapSettings.points.displayNull,icon:this.mapSettings.points.icon,icon2:this.mapSettings.points.icon2,showTooltip:this.mapSettings.points.showTooltip,allowSelection:this.mapSettings.points.allowSelection},r.push({objectName:s,properties:g,validValues:{minSize:{numberRange:{min:1,max:1e5}},maxSize:{numberRange:{min:1,max:1e5}},imageRotation:{numberRange:{min:0,max:360}}},propertyInstanceKind:{icon:3,icon2:3,includeInZoom:3,showTooltip:3,allowSelection:3,circleSizeType:3,imageRotation:3,iconWidth:3,iconHeight:3},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"labels":r.push({objectName:s,properties:{show:this.mapSettings.labels.show,text:this.mapSettings.labels.text,fontFamily:this.mapSettings.labels.fontFamily,fontSize:this.mapSettings.labels.fontSize,alignment:this.mapSettings.labels.alignment,textColor:this.mapSettings.labels.textColor,fillColor:this.mapSettings.labels.fillColor,borderColor:this.mapSettings.labels.borderColor,borderWidth:this.mapSettings.labels.borderWidth,borderRadius:this.mapSettings.labels.borderRadius,padding:this.mapSettings.labels.padding,transparency:this.mapSettings.labels.transparency,paddingTop:this.mapSettings.labels.paddingTop,paddingBottom:this.mapSettings.labels.paddingBottom,paddingLeft:this.mapSettings.labels.paddingLeft,paddingRight:this.mapSettings.labels.paddingRight},validValues:{borderWidth:{numberRange:{min:0,max:20}},borderRadius:{numberRange:{min:0,max:100}},padding:{numberRange:{min:0,max:20}}},propertyInstanceKind:{fillColor:3,textColor:3,text:3,borderColor:3},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"controls":var o;o=this.mapSettings.controls.lasso?{zoom:this.mapSettings.controls.zoom,autoZoomOverride:this.mapSettings.controls.autoZoomOverride,scale:this.mapSettings.controls.scale,measure:this.mapSettings.controls.measure,lasso:this.mapSettings.controls.lasso,lassoIntersect:this.mapSettings.controls.lassoIntersect,controlSize:this.mapSettings.controls.controlSize,attribution:this.mapSettings.controls.attribution}:{zoom:this.mapSettings.controls.zoom,autoZoomOverride:this.mapSettings.controls.autoZoomOverride,scale:this.mapSettings.controls.scale,measure:this.mapSettings.controls.measure,lasso:this.mapSettings.controls.lasso,controlSize:this.mapSettings.controls.controlSize,attribution:this.mapSettings.controls.attribution},r.push({objectName:s,properties:o,validValues:{controlSize:{numberRange:{min:5,max:100}}},propertyInstanceKind:{attribution:3},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"vectorLayer":let _={show:this.mapSettings.vectorLayer.show,noOfLevels:this.mapSettings.vectorLayer.noOfLevels,url:this.mapSettings.vectorLayer.url};this.mapSettings.vectorLayer.noOfLevels>=2&&(_=Object.assign({},_,{url2:this.mapSettings.vectorLayer.url2})),this.mapSettings.vectorLayer.noOfLevels>=3&&(_=Object.assign({},_,{url3:this.mapSettings.vectorLayer.url3})),this.mapSettings.vectorLayer.noOfLevels>=4&&(_=Object.assign({},_,{url4:this.mapSettings.vectorLayer.url4})),this.mapSettings.vectorLayer.noOfLevels>=5&&(_=Object.assign({},_,{url5:this.mapSettings.vectorLayer.url5})),_=Object.assign({},_,{missingFillColor:this.mapSettings.vectorLayer.missingFillColor,fillTransparency:this.mapSettings.vectorLayer.fillTransparency,missingLineColor:this.mapSettings.vectorLayer.missingLineColor,borderTransparency:this.mapSettings.vectorLayer.borderTransparency,lineWidth:this.mapSettings.vectorLayer.lineWidth,dashArray:this.mapSettings.vectorLayer.dashArray,coordinateUse:this.mapSettings.vectorLayer.coordinateUse}),r.push({objectName:s,properties:_,validValues:{noOfLevels:{numberRange:{min:1,max:5}},lineWidth:{numberRange:{min:0,max:20}},fillTransparency:{numberRange:{min:0,max:100}},borderTransparency:{numberRange:{min:0,max:100}}},propertyInstanceKind:{missingFillColor:3,missingLineColor:3,lineWidth:3,dashArray:3,borderTransparency:3,fillTransparency:3,coordinateUse:3},selector:a.Z(1),altConstantValueSelector:null}),i=r;break;case"geoJSON":let v={show:this.mapSettings.geoJSON.show,noOfLevels:this.mapSettings.geoJSON.noOfLevels,geoJSON1:this.mapSettings.geoJSON.geoJSON1},b={missingFillColor:3,missingLineColor:3,lineWidth:3};this.mapSettings.geoJSON.noOfLevels>=2&&(v=Object.assign({},v,{geoJSON2:this.mapSettings.geoJSON.geoJSON2}),b=Object.assign({},b,{geoJSON2:3})),this.mapSettings.geoJSON.noOfLevels>=3&&(v=Object.assign({},v,{geoJSON3:this.mapSettings.geoJSON.geoJSON3}),b=Object.assign({},b,{geoJSON3:3})),this.mapSettings.geoJSON.noOfLevels>=4&&(v=Object.assign({},v,{geoJSON4:this.mapSettings.geoJSON.geoJSON4}),b=Object.assign({},b,{geoJSON4:3})),this.mapSettings.geoJSON.noOfLevels>=5&&(v=Object.assign({},v,{geoJSON5:this.mapSettings.geoJSON.geoJSON5}),b=Object.assign({},b,{geoJSON5:3})),v=Object.assign({},v,{autoZoomInactivePolygons:this.mapSettings.geoJSON.autoZoomInactivePolygons,hideMissing:this.mapSettings.geoJSON.hideMissing,lineWidth:this.mapSettings.geoJSON.lineWidth,missingFillColor:this.mapSettings.geoJSON.missingFillColor,missingLineColor:this.mapSettings.geoJSON.missingLineColor,useFileFormatting:this.mapSettings.geoJSON.useFileFormatting}),r.push({objectName:s,properties:v,validValues:{noOfLevels:{numberRange:{min:1,max:5}},lineWidth:{numberRange:{min:0,max:20}}},propertyInstanceKind:b,selector:a.Z(1),altConstantValueSelector:null}),i=r}return this.debug&&console.log("enumerateObjectInstances END",new Date),i}}},80:t=>{t.exports=n,t.exports.parse=n,t.exports.stringify=function t(e){function i(t){return t.join(" ")}function n(t){return t.map(i).join(", ")}function r(t){return t.map(n).map(a).join(", ")}function a(t){return"("+t+")"}switch("Feature"===e.type&&(e=e.geometry),e.type){case"Point":return"POINT ("+i(e.coordinates)+")";case"LineString":return"LINESTRING ("+n(e.coordinates)+")";case"Polygon":return"POLYGON ("+r(e.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+n(e.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+e.coordinates.map(r).map(a).join(", ")+")";case"MultiLineString":return"MULTILINESTRING ("+r(e.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(t).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var e=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,i=new RegExp("^"+e.source+"(\\s"+e.source+"){1,}");function n(t){var e,n=t.split(";"),r=n.pop(),a=(n.shift()||"").split("=").pop(),s=0;function o(t){var e=r.substring(s).match(t);return e?(s+=e[0].length,e[0]):null}function l(){o(/^\s*/)}function h(){l();for(var t,e=0,n=[],r=[n],a=n;t=o(/^(\()/)||o(/^(\))/)||o(/^(,)/)||o(i);){if("("===t)r.push(a),a=[],r[r.length-1].push(a),e++;else if(")"===t){if(0===a.length)return null;if(!(a=r.pop()))return null;if(0==--e)break}else if(","===t)a=[],r[r.length-1].push(a);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(a,t.split(/\s/g).map(parseFloat))}l()}return 0!==e?null:n}function u(){for(var t,e,n=[];e=o(i)||o(/^(,)/);)","===e?(n.push(t),t=[]):e.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,e.split(/\s/g).map(parseFloat))),l();return t?(n.push(t),n.length?n:null):null}return(e=function t(){return function(){if(!o(/^(point(\sz)?)/i))return null;if(l(),!o(/^(\()/))return null;var t=u();return t?(l(),o(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!o(/^(linestring(\sz)?)/i))return null;if(l(),!o(/^(\()/))return null;var t=u();return t&&o(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!o(/^(polygon(\sz)?)/i))return null;l();var t=h();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!o(/^(multipoint)/i))return null;l();var t=r.substring(r.indexOf("(")+1,r.length-1).replace(/\(/g,"").replace(/\)/g,"");r="MULTIPOINT ("+t+")";var e=h();return e?(l(),{type:"MultiPoint",coordinates:e}):null}()||function(){if(!o(/^(multilinestring)/i))return null;l();var t=h();return t?(l(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!o(/^(multipolygon)/i))return null;l();var t=h();return t?{type:"MultiPolygon",coordinates:t}:null}()||function(){var e,i=[];if(!o(/^(geometrycollection)/i))return null;if(l(),!o(/^(\()/))return null;for(;e=t();)i.push(e),l(),o(/^(,)/),l();return o(/^(\))/)?{type:"GeometryCollection",geometries:i}:null}()}())&&a.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+a}}),e}},1119:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(8947),r=i(5114),a=.017453292519943295;function s(t){return t*a}function o(t){var e=(0,n.A)(t),i=e.shift(),a=e.shift();e.unshift(["name",a]),e.unshift(["type",i]);var o={};return(0,r.J)(e,o),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,n=t.AXIS.length;i<n;++i){var r=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",s],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["azimuth","Azimuth"],["alpha","azimuth",s],["srsCode","name"]].forEach((function(e){return i=t,r=(n=e)[0],a=n[1],void(!(r in i)&&a in i&&(i[r]=i[a],3===n.length&&(i[r]=n[2](i[r]))));var i,n,r,a})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=s(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(o),o}},8947:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n=function(t){return new u(t).output()};var r=1,a=/\s/,s=/[A-Za-z]/,o=/[A-Za-z84_]/,l=/[,\]]/,h=/[\d\.E\-\+]/;function u(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=r}u.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;a.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case r:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},u.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(l.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},u.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=r)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=r,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},u.prototype.number=function(t){if(!h.test(t)){if(l.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},u.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},u.prototype.keyword=function(t){if(o.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=r)}if(!l.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},u.prototype.neutral=function(t){if(s.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(h.test(t))return this.word=t,void(this.state=3);if(!l.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},u.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)}},5114:(t,e,i)=>{"use strict";function n(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,a=i.reduce((function(t,e){return r(e,t),t}),n);e&&(t[e]=a)}function r(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void r(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var a;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&r(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&r(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void n(e,i,t);default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return r(t,e[i]);return n(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}i.d(e,{J:()=>r})},9020:(t,e,i)=>{"use strict";i.d(e,{A:()=>q});var n=i(3481),r=a;function a(t,e){this.x=t,this.y=e}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=e*this.x-i*this.y,r=i*this.x+e*this.y;return this.x=n,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),r=e.x+i*(this.x-e.x)-n*(this.y-e.y),a=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=r,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var s=r,o=l;function l(t,e,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(h,this,e)}function h(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function u(t){for(var e,i,n=0,r=0,a=t.length,s=a-1;r<a;s=r++)e=t[r],n+=((i=t[s]).x-e.x)*(e.y+i.y);return n}l.types=["Unknown","Point","LineString","Polygon"],l.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,r=0,a=0,o=0,l=[];t.pos<i;){if(r<=0){var h=t.readVarint();n=7&h,r=h>>3}if(r--,1===n||2===n)a+=t.readSVarint(),o+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new s(a,o));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},l.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,r=0,a=0,s=1/0,o=-1/0,l=1/0,h=-1/0;t.pos<e;){if(n<=0){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)(r+=t.readSVarint())<s&&(s=r),r>o&&(o=r),(a+=t.readSVarint())<l&&(l=a),a>h&&(h=a);else if(7!==i)throw new Error("unknown command "+i)}return[s,l,o,h]},l.prototype.toGeoJSON=function(t,e,i){var n,r,a=this.extent*Math.pow(2,i),s=this.extent*t,o=this.extent*e,h=this.loadGeometry(),c=l.types[this.type];function d(t){for(var e=0;e<t.length;e++){var i=t[e],n=180-360*(i.y+o)/a;t[e]=[360*(i.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var m=[];for(n=0;n<h.length;n++)m[n]=h[n][0];d(h=m);break;case 2:for(n=0;n<h.length;n++)d(h[n]);break;case 3:for(h=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,r=[],a=0;a<e;a++){var s=u(t[a]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(i&&r.push(i),i=[t[a]]):i.push(t[a]))}return i&&r.push(i),r}(h),n=0;n<h.length;n++)for(r=0;r<h[n].length;r++)d(h[n][r])}1===h.length?h=h[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:h},properties:this.properties};return"id"in this&&(p.id=this.id),p};var c=o,d=m;function m(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(p,this,e),this.length=this._features.length}function p(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(i))}m.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,e,this.extent,this._keys,this._values)};var f=d;function y(t,e,i){if(3===t){var n=new f(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}var g=function(t,e){this.layers=t.readFields(y,{},e)},_=o,v=Object.freeze((function(t,e,i,r,a){const s=new n.Layer(a),o=n.SVG.create("path"),l=_.types[t.type];switch(a=(0,n.extend)({},a),s.feature=t,s.layerName=e,s.properties=t.properties,s.addTo=function(t){s._map=t,s.addInteractiveTarget(o)},s.removeFrom=function(){s.removeInteractiveTarget(o),delete s._map},s.setStyle=function(t){const e=o;return(t=(0,n.extend)({},"Polygon"===l?n.Polygon.prototype.options:n.Path.prototype.options,t)).stroke?(e.setAttribute("stroke",t.color),e.setAttribute("stroke-opacity",t.opacity),e.setAttribute("stroke-width",t.weight),e.setAttribute("stroke-linecap",t.lineCap),e.setAttribute("stroke-linejoin",t.lineJoin),t.dashArray?e.setAttribute("stroke-dasharray",t.dashArray):e.removeAttribute("stroke-dasharray"),t.dashOffset?e.setAttribute("stroke-dashoffset",t.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),t.fill?(e.setAttribute("fill",t.fillColor||t.color),e.setAttribute("fill-opacity",t.fillOpacity),e.setAttribute("fill-rule",t.fillRule||"evenodd")):e.setAttribute("fill","none"),t.fillPattern&&e.setAttribute("fill","url(#"+L.stamp(t.fillPattern)+")"),t.interactive?(e.setAttribute("pointer-events","auto"),n.DomUtil.addClass(e,"leaflet-interactive")):(n.DomUtil.removeClass(e,"leaflet-interactive"),e.removeAttribute("pointer-events")),e},l){case"Point":break;case"LineString":case"Polygon":o.setAttribute("d",n.SVG.pointsToPath(t.loadGeometry().map((t=>t.map((t=>(0,n.point)(t).scaleBy(r))))),"Polygon"===l)),a.className&&n.DomUtil.addClass(o,a.className),s.setStyle(a),i.appendChild(o)}return s})),b=Object.freeze((function(t,e){const i={},r=e.getTileSize(),a=n.SVG.create("svg"),s=n.SVG.create("g"),o=[];function l(t,i,n){const r=e.getFeatureStyle(t,i);if(!r)return;const a=v(t,i,s,n,r);o.push(a),e.addFeatureLayer(a)}return a.setAttribute("viewBox",`0 0 ${r.x} ${r.y}`),a.appendChild(s),i.addVectorTile=function(t){return Object.keys(t.layers).forEach((function(e){const i=t.layers[e],n=r.divideBy(i.extent);let a=0;for(;a!==i.length;)l(i.feature(a),e,n),a+=1})),i},i.eachFeatureLayer=t=>o.map(t),i.domElement=()=>a,i.coords=()=>t,i}));let M;M="function"==typeof window.fetch?window.fetch:function(t){const e=new XMLHttpRequest;return e.open("GET",t),e.responseType="arraybuffer",new Promise((function(t){e.onload=()=>t({ok:200===e.status,status:e.status,statusText:e.statusText,arrayBuffer:()=>e.response}),e.send()}))};var x=Object.freeze(M),w=A,S={read:function(t,e,i,n,r){var a,s,o=8*r-n-1,l=(1<<o)-1,h=l>>1,u=-7,c=i?r-1:0,d=i?-1:1,m=t[e+c];for(c+=d,a=m&(1<<-u)-1,m>>=-u,u+=o;u>0;a=256*a+t[e+c],c+=d,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=n;u>0;s=256*s+t[e+c],c+=d,u-=8);if(0===a)a=1-h;else{if(a===l)return s?NaN:1/0*(m?-1:1);s+=Math.pow(2,n),a-=h}return(m?-1:1)*s*Math.pow(2,a-n)},write:function(t,e,i,n,r,a){var s,o,l,h=8*a-r-1,u=(1<<h)-1,c=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:a-1,p=n?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(s++,l/=2),s+c>=u?(o=0,s=u):s+c>=1?(o=(e*l-1)*Math.pow(2,r),s+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;t[i+m]=255&o,m+=p,o/=256,r-=8);for(s=s<<r|o,h+=r;h>0;t[i+m]=255&s,m+=p,s/=256,h-=8);t[i+m-p]|=128*f}};function A(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}A.Varint=0,A.Fixed64=1,A.Bytes=2,A.Fixed32=5;var T=4294967296,C=1/T,I="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function k(t){return t.type===A.Bytes?t.readVarint()+t.pos:t.pos+1}function P(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function E(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function D(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function z(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function F(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function O(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function R(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function N(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function B(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function j(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function H(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function U(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function V(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function G(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function $(t){return`${t.x}|${t.y}|${t.z}`}A.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,a=this.pos;this.type=7&n,t(r,e,this),this.pos===a&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=U(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=G(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=U(this.buf,this.pos)+U(this.buf,this.pos+4)*T;return this.pos+=8,t},readSFixed64:function(){var t=U(this.buf,this.pos)+G(this.buf,this.pos+4)*T;return this.pos+=8,t},readFloat:function(){var t=S.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=S.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,a=i.buf;if(n=(112&(r=a[i.pos++]))>>4,r<128)return P(t,n,e);if(n|=(127&(r=a[i.pos++]))<<3,r<128)return P(t,n,e);if(n|=(127&(r=a[i.pos++]))<<10,r<128)return P(t,n,e);if(n|=(127&(r=a[i.pos++]))<<17,r<128)return P(t,n,e);if(n|=(127&(r=a[i.pos++]))<<24,r<128)return P(t,n,e);if(n|=(1&(r=a[i.pos++]))<<31,r<128)return P(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&I?function(t,e,i){return I.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",r=e;r<i;){var a,s,o,l=t[r],h=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>i)break;1===u?l<128&&(h=l):2===u?128==(192&(a=t[r+1]))&&(h=(31&l)<<6|63&a)<=127&&(h=null):3===u?(a=t[r+1],s=t[r+2],128==(192&a)&&128==(192&s)&&((h=(15&l)<<12|(63&a)<<6|63&s)<=2047||h>=55296&&h<=57343)&&(h=null)):4===u&&(a=t[r+1],s=t[r+2],o=t[r+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&((h=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,u=1):h>65535&&(h-=65536,n+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),n+=String.fromCharCode(h),r+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==A.Bytes)return t.push(this.readVarint(e));var i=k(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==A.Bytes)return t.push(this.readSVarint());var e=k(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==A.Bytes)return t.push(this.readBoolean());var e=k(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==A.Bytes)return t.push(this.readFloat());var e=k(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==A.Bytes)return t.push(this.readDouble());var e=k(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==A.Bytes)return t.push(this.readFixed32());var e=k(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==A.Bytes)return t.push(this.readSFixed32());var e=k(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==A.Bytes)return t.push(this.readFixed64());var e=k(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==A.Bytes)return t.push(this.readSFixed64());var e=k(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===A.Varint)for(;this.buf[this.pos++]>127;);else if(e===A.Bytes)this.pos=this.readVarint()+this.pos;else if(e===A.Fixed32)this.pos+=4;else{if(e!==A.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),V(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),V(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),V(this.buf,-1&t,this.pos),V(this.buf,Math.floor(t*C),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),V(this.buf,-1&t,this.pos),V(this.buf,Math.floor(t*C),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,a=0;a<e.length;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){n>56319||a+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&E(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),S.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),S.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&E(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,A.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,D,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,z,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,R,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,F,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,O,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,N,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,B,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,j,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,H,e)},writeBytesField:function(t,e){this.writeTag(t,A.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,A.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,A.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,A.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,A.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,A.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,A.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,A.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,A.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,A.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};const Z={minZoom:0,maxZoom:18,maxDetailZoom:void 0,minDetailZoom:void 0,subdomains:"abc",zoomOffset:0,zoomReverse:!1};var q=Object.freeze((function(t,e){const i=new n.GridLayer(e),r=Object.getPrototypeOf(i),a={};"string"==typeof(e=n.Util.extend({},Z,e)).subdomains&&(e.subdomains=e.subdomains.split("")),e.vectorTileLayerStyles&&(e.style=function(t,i,n){const{getFeatureId:r,vectorTileLayerStyles:s}=e;let o=s[i];if(r){const e=r(t);a[e]&&(o=a[e])}if("function"==typeof o&&(o=o(t.properties,n)),Array.isArray(o)){if(!o.length)return;o=o[0]}return o});const s={};let o,l;function h(){l=o.getZoom()}function u(t){const i=Math.abs(t.x+t.y)%e.subdomains.length;return e.subdomains[i]}function c(t){const{minDetailZoom:i,maxDetailZoom:n}=e;return void 0!==i&&t<i?i:void 0!==n&&n<t?n:t}function d(t){const{maxZoom:i,zoomReverse:n,zoomOffset:r}=e;return n&&(t=i-t),c(t+r)}return i.on("tileunload",(function(t){const e=$(t.coords),n=s[e];n&&(n.eachFeatureLayer((t=>i.removeFeatureLayer(t))),delete s[e])})),i.onAdd=function(t,...e){return o=t,o.on("zoomend",h),h(),r.onAdd.call(i,t,...e)},i.onRemove=function(...t){return o.off("zoomend",h),o=void 0,r.onRemove.call(i,...t)},i.createTile=function(t,e){const n=$(t),r=b(t,i);return s[n]=r,function(t){return x(t).then((function(e){if(e.ok)return e.arrayBuffer();if(404!==e.status)throw function(...t){return new Error(t.join(": "))}(t,e.status,e.statusText)}))}(i.getTileUrl(t)).then((function(t){r.addVectorTile(new g(new w(t))),e(null,r)}),(function(t){e(t,r)})),r.domElement()},i.getTileUrl=function(i){const r={s:u(i),x:i.x,y:i.y,z:d(i.z)};return n.Util.template(t,n.Util.extend(r,e))},i.setStyle=function(t){var n;return e.style=t,n=function(t){const{feature:e,layerName:n}=t,r=i.getFeatureStyle(e,n);t.setStyle(r)},Object.keys(s).forEach((t=>s[t].eachFeatureLayer(n))),i},i.setFeatureStyle=function(t,n){return a[t]=n,i.setStyle(e.style),i},i.resetFeatureStyle=function(t){return delete a[t],i.setStyle(e.style),i},i.getTileSize=function(){const t=r.getTileSize.call(i),e=i._tileZoom;return t.divideBy(o.getZoomScale(c(e),e)).round()},i.getFeatureStyle=function(t,i){const n=e.style;return"function"==typeof n?n(t,i,l):n},i.addFeatureLayer=function(t){return t.addTo(o),t.addEventParent(i),i},i.removeFeatureLayer=function(t){return t.removeEventParent(i),t.removeFrom(o),i},i}))},1210:t=>{"use strict";t.exports=null},6443:function(t){t.exports=function(){"use strict";var t,e,i;function n(n,r){if(t)if(e){var a="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",s={};t(s),i=r(s),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else e=r;else t=r}return n(0,(function(t){var e=i;function i(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=n}function n(t,i,n,r){const a=new e(t,i,n,r);return function(t){return a.solve(t)}}i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,n=0;n<8;n++){var r=this.sampleCurveX(i)-t;if(Math.abs(r)<e)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i-=r/a}var s=0,o=1;for(i=t,n=0;n<20&&(r=this.sampleCurveX(i),!(Math.abs(r-t)<e));n++)t>r?s=i:o=i,i=.5*(o-s)+s;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};const r=n(.25,.1,.25,1);function a(t,e,i){return Math.min(i,Math.max(e,t))}function s(t,e,i){const n=i-e,r=((t-e)%n+n)%n+e;return r===e?i:r}function o(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}let l=1;function h(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function u(t,e,i){const n={};for(const r in t)n[r]=e.call(i||this,t[r],r,t);return n}function c(t,e,i){const n={};for(const r in t)e.call(i||this,t[r],r,t)&&(n[r]=t[r]);return n}function d(t){return Array.isArray(t)?t.map(d):"object"==typeof t&&t?u(t,d):t}const m={};function p(t){m[t]||("undefined"!=typeof console&&console.warn(t),m[t]=!0)}function f(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function y(t){let e=0;for(let i,n,r=0,a=t.length,s=a-1;r<a;s=r++)i=t[r],n=t[s],e+=(n.x-i.x)*(i.y+n.y);return e}function g(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function _(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,i,n,r)=>{const a=n||r;return e[i]=!a||a.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let v,b,M=null;function x(t){if(null==M){const e=t.navigator?t.navigator.userAgent:null;M=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return M}function w(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const S={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(t){const e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t,e=0){const i=window.document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(v||(v=document.createElement("a")),v.href=t,v.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==b&&(b=matchMedia("(prefers-reduced-motion: reduce)")),b.matches)}};var A=T;function T(t,e){this.x=t,this.y=e}T.prototype={clone:function(){return new T(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),r=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-n*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},T.convert=function(t){return t instanceof T?t:Array.isArray(t)?new T(t[0],t[1]):t};const C={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},I="mapbox-tiles";let k,P=500,E=50;function D(){"undefined"==typeof caches||k||(k=caches.open(I))}let L=1/0;const z={supported:!1,testSupport:function(t){!R&&O&&(N?B(t):F=t)}};let F,O,R=!1,N=!1;function B(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,O),t.isContextLost())return;z.supported=!0}catch(t){}t.deleteTexture(e),R=!0}"undefined"!=typeof document&&(O=document.createElement("img"),O.onload=function(){F&&B(F),F=null,N=!0},O.onerror=function(){R=!0,F=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const j={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(j);class H extends Error{constructor(t,e,i,n){super(`AJAXError: ${e} (${t}): ${i}`),this.status=t,this.statusText=e,this.url=i,this.body=n}}const U=g()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function V(t,e){const i=new AbortController,n=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:U(),signal:i.signal});let r=!1,a=!1;return"json"===t.type&&n.headers.set("Accept","application/json"),(()=>{if(a)return;Date.now();fetch(n).then((i=>i.ok?(i=>{("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((t=>{a||(r=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((t=>{a||e(new Error(t.message))}))})(i):i.blob().then((n=>e(new H(i.status,i.statusText,t.url,n)))))).catch((t=>{20!==t.code&&e(new Error(t.message))}))})(),{cancel:()=>{a=!0,r||i.abort()}}}const G=function(t,e){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){if(g()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e);if(!g()){const i=t.url.substring(0,t.url.indexOf("://"));return(C.REGISTERED_PROTOCOLS[i]||V)(t,e)}}if(!(/^file:/.test(i=t.url)||/^file:/.test(U())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return V(t,e);if(g()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){const i=new XMLHttpRequest;i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer");for(const e in t.headers)i.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=()=>{e(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let n=i.response;if("json"===t.type)try{n=JSON.parse(i.response)}catch(t){return e(t)}e(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else{const n=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});e(new H(i.status,i.statusText,t.url,n))}},i.send(t.body),{cancel:()=>i.abort()}}(t,e)},$=function(t,e){return G(o(t,{type:"arrayBuffer"}),e)};function Z(t){const e=window.document.createElement("a");return e.href=t,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Y,W;Y=[],W=0;const J=function(t,e){if(z.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),W>=C.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Y.push(i),i}W++;let i=!1;const n=()=>{if(!i)for(i=!0,W--;Y.length&&W<C.MAX_PARALLEL_IMAGE_REQUESTS;){const t=Y.shift(),{requestParameters:e,callback:i,cancelled:n}=t;n||(t.cancel=J(e,i).cancel)}},r=$(t,((t,i,r,a)=>{n(),t?e(t):i&&function(t,e){"function"==typeof createImageBitmap?function(t,e){const i=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(i).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(t,e):function(t,e){const i=new Image;i.onload=()=>{e(null,i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame((()=>{i.src=q}))},i.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const n=new Blob([new Uint8Array(t)],{type:"image/png"});i.src=t.byteLength?URL.createObjectURL(n):q}(t,e)}(i,((t,i)=>{null!=t?e(t):null!=i&&e(null,i,{cacheControl:r,expires:a})}))}));return{cancel:()=>{r.cancel(),n()}}};function X(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function K(t,e,i){if(i&&i[t]){const n=i[t].indexOf(e);-1!==n&&i[t].splice(n,1)}}class Q{constructor(t,e={}){o(this,e),this.type=t}}class tt extends Q{constructor(t,e={}){super("error",o({error:t},e))}}class et{on(t,e){return this._listeners=this._listeners||{},X(t,e,this._listeners),this}off(t,e){return K(t,e,this._listeners),K(t,e,this._oneTimeListeners),this}once(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},X(t,e,this._oneTimeListeners),this}fire(t,e){"string"==typeof t&&(t=new Q(t,e||{}));const i=t.type;if(this.listens(i)){t.target=this;const e=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of e)i.call(this,t);const n=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const e of n)K(i,e,this._oneTimeListeners),e.call(this,t);const r=this._eventedParent;r&&(o(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof tt&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var it={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class nt{constructor(t,e,i,n){this.message=(t?`${t}: `:"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)}}function rt(t){const e=t.value;return e?[new nt(t.key,e,"constants have been deprecated as of v8")]:[]}function at(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}function st(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ot(t){if(Array.isArray(t))return t.map(ot);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=ot(t[i]);return e}return st(t)}class lt extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class ht{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,i]of e)this.bindings[t]=i}concat(t){return new ht(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ut={kind:"null"},ct={kind:"number"},dt={kind:"string"},mt={kind:"boolean"},pt={kind:"color"},ft={kind:"object"},yt={kind:"value"},gt={kind:"collator"},_t={kind:"formatted"},vt={kind:"padding"},bt={kind:"resolvedImage"};function Mt(t,e){return{kind:"array",itemType:t,N:e}}function xt(t){if("array"===t.kind){const e=xt(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const wt=[ut,ct,dt,mt,pt,_t,ft,Mt(yt),vt,bt];function St(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!St(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of wt)if(!St(t,e))return null}return`Expected ${xt(t)} but found ${xt(e)} instead.`}function At(t,e){return e.some((e=>e.kind===t.kind))}function Tt(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Ct,It={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function kt(t){return(t=Math.round(t))<0?0:t>255?255:t}function Pt(t){return kt("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Et(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Dt(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{Ct={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in It)return It[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=i.indexOf("("),r=i.indexOf(")");if(-1!==n&&r+1===i.length){var a=i.substr(0,n),s=i.substr(n+1,r-(n+1)).split(","),o=1;switch(a){case"rgba":if(4!==s.length)return null;o=Et(s.pop());case"rgb":return 3!==s.length?null:[Pt(s[0]),Pt(s[1]),Pt(s[2]),o];case"hsla":if(4!==s.length)return null;o=Et(s.pop());case"hsl":if(3!==s.length)return null;var l=(parseFloat(s[0])%360+360)%360/360,h=Et(s[1]),u=Et(s[2]),c=u<=.5?u*(h+1):u+h-u*h,d=2*u-c;return[kt(255*Dt(d,c,l+1/3)),kt(255*Dt(d,c,l)),kt(255*Dt(d,c,l-1/3)),o];default:return null}}return null}}catch(t){}class Lt{constructor(t,e,i,n=1){this.r=t,this.g=e,this.b=i,this.a=n}static parse(t){if(!t)return;if(t instanceof Lt)return t;if("string"!=typeof t)return;const e=Ct(t);return e?new Lt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${n})`}toArray(){const{r:t,g:e,b:i,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*i/n,n]}}Lt.black=new Lt(0,0,0,1),Lt.white=new Lt(1,1,1,1),Lt.transparent=new Lt(0,0,0,0),Lt.red=new Lt(1,0,0,1);class zt{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ft{constructor(t,e,i,n,r){this.text=t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=r}}class Ot{constructor(t){this.sections=t}static fromString(t){return new Ot([new Ft(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Ot?t:Ot.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}}class Rt{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Rt)return t;if("number"==typeof t)return new Rt([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Rt(t)}}toString(){return JSON.stringify(this.values)}}class Nt{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Nt({name:t,available:!1}):null}}function Bt(t,e,i,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,i,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function jt(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Lt)return!0;if(t instanceof zt)return!0;if(t instanceof Ot)return!0;if(t instanceof Rt)return!0;if(t instanceof Nt)return!0;if(Array.isArray(t)){for(const e of t)if(!jt(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!jt(t[e]))return!1;return!0}return!1}function Ht(t){if(null===t)return ut;if("string"==typeof t)return dt;if("boolean"==typeof t)return mt;if("number"==typeof t)return ct;if(t instanceof Lt)return pt;if(t instanceof zt)return gt;if(t instanceof Ot)return _t;if(t instanceof Rt)return vt;if(t instanceof Nt)return bt;if(Array.isArray(t)){const e=t.length;let i;for(const e of t){const t=Ht(e);if(i){if(i===t)continue;i=yt;break}i=t}return Mt(i||yt,e)}return ft}function Ut(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Lt||t instanceof Ot||t instanceof Rt||t instanceof Nt?t.toString():JSON.stringify(t)}class Vt{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!jt(t[1]))return e.error("invalid value");const i=t[1];let n=Ht(i);const r=e.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new Vt(n,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Gt{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const $t={string:dt,number:ct,boolean:mt,object:ft};class Zt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,n=1;const r=t[0];if("array"===r){let r,a;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in $t)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=$t[i],n++}else r=yt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}i=Mt(r,a)}else{if(!$t[r])throw new Error(`Types doesn't contain name = ${r}`);i=$t[r]}const a=[];for(;n<t.length;n++){const i=e.parse(t[n],n,yt);if(!i)return null;a.push(i)}return new Zt(i,a)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!St(this.type,Ht(i)))return i;if(e===this.args.length-1)throw new Gt(`Expected value to be of type ${xt(this.type)}, but found ${xt(Ht(i))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const qt={"to-boolean":mt,"to-color":pt,"to-number":ct,"to-string":dt};class Yt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(!qt[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const n=qt[i],r=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],i,yt);if(!n)return null;r.push(n)}return new Yt(n,r)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,i;for(const n of this.args){if(e=n.evaluate(t),i=null,e instanceof Lt)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Bt(e[0],e[1],e[2],e[3]),!i))return new Lt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Gt(i||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("padding"===this.type.kind){let e;for(const i of this.args){e=i.evaluate(t);const n=Rt.parse(e);if(n)return n}throw new Gt(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("number"===this.type.kind){let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new Gt(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Ot.fromString(Ut(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Nt.fromString(Ut(this.args[0].evaluate(t))):Ut(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Wt=["Unknown","Point","LineString","Polygon"];class Jt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Wt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Lt.parse(t)),e}}class Xt{constructor(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const i=t[0],n=Xt.definitions[i];if(!n)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let o=null;for(const[n,a]of s){o=new be(e.registry,e.path,null,e.scope);const s=[];let l=!1;for(let e=1;e<t.length;e++){const i=t[e],r=Array.isArray(n)?n[e-1]:n.type,a=o.parse(i,1+s.length,r);if(!a){l=!0;break}s.push(a)}if(!l)if(Array.isArray(n)&&n.length!==s.length)o.error(`Expected ${n.length} arguments, but found ${s.length} instead.`);else{for(let t=0;t<s.length;t++){const e=Array.isArray(n)?n[t]:n.type,i=s[t];o.concat(t+1).checkSubtype(e,i.type)}if(0===o.errors.length)return new Xt(i,r,a,s)}}if(1===s.length)e.errors.push(...o.errors);else{const i=(s.length?s:a).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(xt).join(", ")})`:`(${xt(e.type)}...)`;var e})).join(" | "),n=[];for(let i=1;i<t.length;i++){const r=e.parse(t[i],1+n.length);if(!r)return null;n.push(xt(r.type))}e.error(`Expected arguments of type ${i}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){Xt.definitions=e;for(const i in e)t[i]=Xt}}class Kt{constructor(t,e,i){this.type=gt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,mt);if(!n)return null;const r=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,mt);if(!r)return null;let a=null;return i.locale&&(a=e.parse(i.locale,1,dt),!a)?null:new Kt(n,r,a)}evaluate(t){return new zt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const Qt=8192;function te(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ee(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ie(t,e){const i=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(i*r*Qt),Math.round(n*r*Qt)]}function ne(t,e,i){const n=t[0]-e[0],r=t[1]-e[1],a=t[0]-i[0],s=t[1]-i[1];return n*s-a*r==0&&n*a<=0&&r*s<=0}function re(t,e){let i=!1;for(let s=0,o=e.length;s<o;s++){const o=e[s];for(let e=0,s=o.length;e<s-1;e++){if(ne(t,o[e],o[e+1]))return!1;(r=o[e])[1]>(n=t)[1]!=(a=o[e+1])[1]>n[1]&&n[0]<(a[0]-r[0])*(n[1]-r[1])/(a[1]-r[1])+r[0]&&(i=!i)}}var n,r,a;return i}function ae(t,e){for(let i=0;i<e.length;i++)if(re(t,e[i]))return!0;return!1}function se(t,e,i,n){const r=n[0]-i[0],a=n[1]-i[1],s=(t[0]-i[0])*a-r*(t[1]-i[1]),o=(e[0]-i[0])*a-r*(e[1]-i[1]);return s>0&&o<0||s<0&&o>0}function oe(t,e,i){for(const h of i)for(let i=0;i<h.length-1;++i)if(0!=(o=[(s=h[i+1])[0]-(a=h[i])[0],s[1]-a[1]])[0]*(l=[(r=e)[0]-(n=t)[0],r[1]-n[1]])[1]-o[1]*l[0]&&se(n,r,a,s)&&se(a,s,n,r))return!0;var n,r,a,s,o,l;return!1}function le(t,e){for(let i=0;i<t.length;++i)if(!re(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(oe(t[i],t[i+1],e))return!1;return!0}function he(t,e){for(let i=0;i<e.length;i++)if(le(t,e[i]))return!0;return!1}function ue(t,e,i){const n=[];for(let r=0;r<t.length;r++){const a=[];for(let n=0;n<t[r].length;n++){const s=ie(t[r][n],i);te(e,s),a.push(s)}n.push(a)}return n}function ce(t,e,i){const n=[];for(let r=0;r<t.length;r++){const a=ue(t[r],e,i);n.push(a)}return n}function de(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){const e=.5*n;let r=t[0]-i[0]>e?-n:i[0]-t[0]>e?n:0;0===r&&(r=t[0]-i[2]>e?-n:i[2]-t[0]>e?n:0),t[0]+=r}te(e,t)}function me(t,e,i,n){const r=Math.pow(2,n.z)*Qt,a=[n.x*Qt,n.y*Qt],s=[];for(const n of t)for(const t of n){const n=[t.x+a[0],t.y+a[1]];de(n,e,i,r),s.push(n)}return s}function pe(t,e,i,n){const r=Math.pow(2,n.z)*Qt,a=[n.x*Qt,n.y*Qt],s=[];for(const i of t){const t=[];for(const n of i){const i=[n.x+a[0],n.y+a[1]];te(e,i),t.push(i)}s.push(t)}if(e[2]-e[0]<=r/2){(o=e)[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(const t of s)for(const n of t)de(n,e,i,r)}var o;return s}class fe{constructor(t,e){this.type=mt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(jt(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const i=e.features[t].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new fe(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new fe(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new fe(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const a=ue(e.coordinates,n,r),s=me(t.geometry(),i,n,r);if(!ee(i,n))return!1;for(const t of s)if(!re(t,a))return!1}if("MultiPolygon"===e.type){const a=ce(e.coordinates,n,r),s=me(t.geometry(),i,n,r);if(!ee(i,n))return!1;for(const t of s)if(!ae(t,a))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const a=ue(e.coordinates,n,r),s=pe(t.geometry(),i,n,r);if(!ee(i,n))return!1;for(const t of s)if(!le(t,a))return!1}if("MultiPolygon"===e.type){const a=ce(e.coordinates,n,r),s=pe(t.geometry(),i,n,r);if(!ee(i,n))return!1;for(const t of s)if(!he(t,a))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function ye(t){if(t instanceof Xt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof fe)return!1;let e=!0;return t.eachChild((t=>{e&&!ye(t)&&(e=!1)})),e}function ge(t){if(t instanceof Xt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ge(t)&&(e=!1)})),e}function _e(t,e){if(t instanceof Xt&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild((t=>{i&&!_e(t,e)&&(i=!1)})),i}class ve{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new ve(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class be{constructor(t,e=[],i,n=new ht,r=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=n,this.errors=r,this.expectedType=i}parse(t,e,i,n,r={}){return e?this.concat(e,i,n)._parse(t,r):this._parse(t,r)}_parse(t,e){function i(t,e,i){return"assert"===i?new Zt(e,[t]):"coerce"===i?new Yt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[n];if(r){let n=r.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,r=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind)if("padding"!==t.kind||"value"!==r.kind&&"number"!==r.kind&&"array"!==r.kind){if(this.checkSubtype(t,r))return null}else n=i(n,t,e.typeAnnotation||"coerce");else n=i(n,t,e.typeAnnotation||"coerce");else n=i(n,t,e.typeAnnotation||"assert")}if(!(n instanceof Vt)&&"resolvedImage"!==n.type.kind&&Me(n)){const e=new Jt;try{n=new Vt(n.type,n.evaluate(e))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const n="number"==typeof t?this.path.concat(t):this.path,r=i?this.scope.concat(i):this.scope;return new be(this.registry,n,e||null,r,this.errors)}error(t,...e){const i=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new lt(i,t))}checkSubtype(t,e){const i=St(t,e);return i&&this.error(i),i}}function Me(t){if(t instanceof ve)return Me(t.boundExpression);if(t instanceof Xt&&"error"===t.name)return!1;if(t instanceof Kt)return!1;if(t instanceof fe)return!1;const e=t instanceof Yt||t instanceof Zt;let i=!0;return t.eachChild((t=>{i=e?i&&Me(t):i&&t instanceof Vt})),!!i&&ye(t)&&_e(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function xe(t,e){const i=t.length-1;let n,r,a=0,s=i,o=0;for(;a<=s;)if(o=Math.floor((a+s)/2),n=t[o],r=t[o+1],n<=e){if(o===i||e<r)return o;a=o+1}else{if(!(n>e))throw new Gt("Input is not a number.");s=o-1}return 0}class we{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,ct);if(!i)return null;const n=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let i=1;i<t.length;i+=2){const a=1===i?-1/0:t[i],s=t[i+1],o=i,l=i+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',o);if(n.length&&n[n.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',o);const h=e.parse(s,l,r);if(!h)return null;r=r||h.type,n.push([a,h])}return new we(r,i,n)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const r=e.length;return n>=e[r-1]?i[r-1].evaluate(t):i[xe(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Se(t,e,i){return t*(1-i)+e*i}var Ae=Object.freeze({__proto__:null,number:Se,color:function(t,e,i){return new Lt(Se(t.r,e.r,i),Se(t.g,e.g,i),Se(t.b,e.b,i),Se(t.a,e.a,i))},array:function(t,e,i){return t.map(((t,n)=>Se(t,e[n],i)))},padding:function(t,e,i){const n=t.values,r=e.values;return new Rt([Se(n[0],r[0],i),Se(n[1],r[1],i),Se(n[2],r[2],i),Se(n[3],r[3],i)])}});const Te=.95047,Ce=1.08883,Ie=4/29,ke=6/29,Pe=3*ke*ke,Ee=Math.PI/180,De=180/Math.PI;function Le(t){return t>.008856451679035631?Math.pow(t,1/3):t/Pe+Ie}function ze(t){return t>ke?t*t*t:Pe*(t-Ie)}function Fe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Oe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Re(t){const e=Oe(t.r),i=Oe(t.g),n=Oe(t.b),r=Le((.4124564*e+.3575761*i+.1804375*n)/Te),a=Le((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*a-16,a:500*(r-a),b:200*(a-Le((.0193339*e+.119192*i+.9503041*n)/Ce)),alpha:t.a}}function Ne(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*ze(e),i=Te*ze(i),n=Ce*ze(n),new Lt(Fe(3.2404542*i-1.5371385*e-.4985314*n),Fe(-.969266*i+1.8760108*e+.041556*n),Fe(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function Be(t,e,i){const n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}const je={forward:Re,reverse:Ne,interpolate:function(t,e,i){return{l:Se(t.l,e.l,i),a:Se(t.a,e.a,i),b:Se(t.b,e.b,i),alpha:Se(t.alpha,e.alpha,i)}}},He={forward:function(t){const{l:e,a:i,b:n}=Re(t),r=Math.atan2(n,i)*De;return{h:r<0?r+360:r,c:Math.sqrt(i*i+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Ee,i=t.c;return Ne({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:Be(t.h,e.h,i),c:Se(t.c,e.c,i),l:Se(t.l,e.l,i),alpha:Se(t.alpha,e.alpha,i)}}};var Ue=Object.freeze({__proto__:null,lab:je,hcl:He});class Ve{constructor(t,e,i,n,r){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,i,n,r){let a=0;if("exponential"===t.name)a=Ge(i,t.base,n,r);else if("linear"===t.name)a=Ge(i,1,n,r);else if("cubic-bezier"===t.name){const s=t.controlPoints;a=new e(s[0],s[1],s[2],s[3]).solve(Ge(i,1,n,r))}return a}static parse(t,e){let[i,n,r,...a]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,ct),!r)return null;const s=[];let o=null;"interpolate-hcl"===i||"interpolate-lab"===i?o=pt:e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(let t=0;t<a.length;t+=2){const i=a[t],n=a[t+1],r=t+3,l=t+4;if("number"!=typeof i)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(s.length&&s[s.length-1][0]>=i)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const h=e.parse(n,l,o);if(!h)return null;o=o||h.type,s.push([i,h])}return"number"===o.kind||"color"===o.kind||"padding"===o.kind||"array"===o.kind&&"number"===o.itemType.kind&&"number"==typeof o.N?new Ve(o,i,n,r,s):e.error(`Type ${xt(o)} is not interpolatable.`)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const r=e.length;if(n>=e[r-1])return i[r-1].evaluate(t);const a=xe(e,n),s=Ve.interpolationFactor(this.interpolation,n,e[a],e[a+1]),o=i[a].evaluate(t),l=i[a+1].evaluate(t);return"interpolate"===this.operator?Ae[this.type.kind.toLowerCase()](o,l,s):"interpolate-hcl"===this.operator?He.reverse(He.interpolate(He.forward(o),He.forward(l),s)):je.reverse(je.interpolate(je.forward(o),je.forward(l),s))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Ge(t,e,i,n){const r=n-i,a=t-i;return 0===r?0:1===e?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}class $e{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const n=e.expectedType;n&&"value"!==n.kind&&(i=n);const r=[];for(const n of t.slice(1)){const t=e.parse(n,1+r.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,r.push(t)}if(!i)throw new Error("No output type");const a=n&&r.some((t=>St(n,t.type)));return new $e(a?yt:i,r)}evaluate(t){let e,i=null,n=0;for(const r of this.args)if(n++,i=r.evaluate(t),i&&i instanceof Nt&&!i.available&&(e||(e=i.name),i=null,n===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}class Ze{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let n=1;n<t.length-1;n+=2){const r=t[n];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,n);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const a=e.parse(t[n+1],n+1);if(!a)return null;i.push([r,a])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return n?new Ze(i,n):null}outputDefined(){return this.result.outputDefined()}}class qe{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ct),n=e.parse(t[2],2,Mt(e.expectedType||yt));return i&&n?new qe(n.type.itemType,i,n):null}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new Gt(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new Gt(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new Gt(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Ye{constructor(t,e){this.type=mt,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,yt),n=e.parse(t[2],2,yt);return i&&n?At(i.type,[mt,dt,ct,ut,yt])?new Ye(i,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${xt(i.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Tt(e,["boolean","string","number","null"]))throw new Gt(`Expected first argument to be of type boolean, string, number or null, but found ${xt(Ht(e))} instead.`);if(!Tt(i,["string","array"]))throw new Gt(`Expected second argument to be of type array or string, but found ${xt(Ht(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class We{constructor(t,e,i){this.type=ct,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,yt),n=e.parse(t[2],2,yt);if(!i||!n)return null;if(!At(i.type,[mt,dt,ct,ut,yt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${xt(i.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,ct);return r?new We(i,n,r):null}return new We(i,n)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Tt(e,["boolean","string","number","null"]))throw new Gt(`Expected first argument to be of type boolean, string, number or null, but found ${xt(Ht(e))} instead.`);if(!Tt(i,["string","array"]))throw new Gt(`Expected second argument to be of type array or string, but found ${xt(Ht(i))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Je{constructor(t,e,i,n,r,a){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=r,this.otherwise=a}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r={},a=[];for(let s=2;s<t.length-1;s+=2){let o=t[s];const l=t[s+1];Array.isArray(o)||(o=[o]);const h=e.concat(s);if(0===o.length)return h.error("Expected at least one branch label.");for(const t of o){if("number"!=typeof t&&"string"!=typeof t)return h.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return h.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return h.error("Numeric branch labels must be integer values.");if(i){if(h.checkSubtype(i,Ht(t)))return null}else i=Ht(t);if(void 0!==r[String(t)])return h.error("Branch labels must be unique.");r[String(t)]=a.length}const u=e.parse(l,s,n);if(!u)return null;n=n||u.type,a.push(u)}const s=e.parse(t[1],1,yt);if(!s)return null;const o=e.parse(t[t.length-1],t.length-1,n);return o?"value"!==s.type.kind&&e.concat(1).checkSubtype(i,s.type)?null:new Je(i,n,s,r,a,o):null}evaluate(t){const e=this.input.evaluate(t);return(Ht(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Xe{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const n=[];for(let r=1;r<t.length-1;r+=2){const a=e.parse(t[r],r,mt);if(!a)return null;const s=e.parse(t[r+1],r+1,i);if(!s)return null;n.push([a,s]),i=i||s.type}const r=e.parse(t[t.length-1],t.length-1,i);if(!r)return null;if(!i)throw new Error("Can't infer output type");return new Xe(i,n,r)}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}}class Ke{constructor(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,yt),n=e.parse(t[2],2,ct);if(!i||!n)return null;if(!At(i.type,[Mt(yt),dt,yt]))return e.error(`Expected first argument to be of type array or string, but found ${xt(i.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,ct);return r?new Ke(i.type,i,n,r):null}return new Ke(i.type,i,n)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Tt(e,["string","array"]))throw new Gt(`Expected first argument to be of type array or string, but found ${xt(Ht(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Qe(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ti(t,e,i,n){return 0===n.compare(e,i)}function ei(t,e,i){const n="=="!==t&&"!="!==t;return class r{constructor(t,e,i){this.type=mt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let a=e.parse(t[1],1,yt);if(!a)return null;if(!Qe(i,a.type))return e.concat(1).error(`"${i}" comparisons are not supported for type '${xt(a.type)}'.`);let s=e.parse(t[2],2,yt);if(!s)return null;if(!Qe(i,s.type))return e.concat(2).error(`"${i}" comparisons are not supported for type '${xt(s.type)}'.`);if(a.type.kind!==s.type.kind&&"value"!==a.type.kind&&"value"!==s.type.kind)return e.error(`Cannot compare types '${xt(a.type)}' and '${xt(s.type)}'.`);n&&("value"===a.type.kind&&"value"!==s.type.kind?a=new Zt(s.type,[a]):"value"!==a.type.kind&&"value"===s.type.kind&&(s=new Zt(a.type,[s])));let o=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==s.type.kind&&"value"!==a.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(o=e.parse(t[3],3,gt),!o)return null}return new r(a,s,o)}evaluate(r){const a=this.lhs.evaluate(r),s=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){const e=Ht(a),i=Ht(s);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new Gt(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${i.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=Ht(a),i=Ht(s);if("string"!==t.kind||"string"!==i.kind)return e(r,a,s)}return this.collator?i(r,a,s,this.collator.evaluate(r)):e(r,a,s)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}}}const ii=ei("==",(function(t,e,i){return e===i}),ti),ni=ei("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!ti(0,e,i,n)})),ri=ei("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),ai=ei(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),si=ei("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0})),oi=ei(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0}));class li{constructor(t,e,i,n,r){this.type=dt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=r}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,ct);if(!i)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let r=null;if(n.locale&&(r=e.parse(n.locale,1,dt),!r))return null;let a=null;if(n.currency&&(a=e.parse(n.currency,1,dt),!a))return null;let s=null;if(n["min-fraction-digits"]&&(s=e.parse(n["min-fraction-digits"],1,ct),!s))return null;let o=null;return n["max-fraction-digits"]&&(o=e.parse(n["max-fraction-digits"],1,ct),!o)?null:new li(i,r,a,s,o)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class hi{constructor(t){this.type=_t,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const n=[];let r=!1;for(let i=1;i<=t.length-1;++i){const a=t[i];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;let t=null;if(a["font-scale"]&&(t=e.parse(a["font-scale"],1,ct),!t))return null;let i=null;if(a["text-font"]&&(i=e.parse(a["text-font"],1,Mt(dt)),!i))return null;let s=null;if(a["text-color"]&&(s=e.parse(a["text-color"],1,pt),!s))return null;const o=n[n.length-1];o.scale=t,o.font=i,o.textColor=s}else{const a=e.parse(t[i],1,yt);if(!a)return null;const s=a.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,n.push({content:a,scale:null,font:null,textColor:null})}}return new hi(n)}evaluate(t){return new Ot(this.sections.map((e=>{const i=e.content.evaluate(t);return Ht(i)===bt?new Ft("",i,null,null,null):new Ft(Ut(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}}class ui{constructor(t){this.type=bt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,dt);return i?new ui(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=Nt.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}}class ci{constructor(t){this.type=ct,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${xt(i.type)} instead.`):new ci(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Gt(`Expected value to be of type string or array, but found ${xt(Ht(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const di={"==":ii,"!=":ni,">":ai,"<":ri,">=":oi,"<=":si,array:Zt,at:qe,boolean:Zt,case:Xe,coalesce:$e,collator:Kt,format:hi,image:ui,in:Ye,"index-of":We,interpolate:Ve,"interpolate-hcl":Ve,"interpolate-lab":Ve,length:ci,let:Ze,literal:Vt,match:Je,number:Zt,"number-format":li,object:Zt,slice:Ke,step:we,string:Zt,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:ve,within:fe};function mi(t,[e,i,n,r]){e=e.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);const a=r?r.evaluate(t):1,s=Bt(e,i,n,a);if(s)throw new Gt(s);return new Lt(e/255*a,i/255*a,n/255*a,a)}function pi(t,e){return t in e}function fi(t,e){const i=e[t];return void 0===i?null:i}function yi(t){return{type:t}}function gi(t){return{result:"success",value:t}}function _i(t){return{result:"error",value:t}}function vi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function bi(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Mi(t){return!!t.expression&&t.expression.interpolated}function xi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function wi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Si(t){return t}function Ai(t,e){const i="color"===e.type,n=t.stops&&"object"==typeof t.stops[0][0],r=n||!(n||void 0!==t.property),a=t.type||(Mi(e)?"exponential":"interval");if(i||"padding"===e.type){const n=i?Lt.parse:Rt.parse;(t=at({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],n(t[1])]))),t.default=n(t.default?t.default:e.default)}if(t.colorSpace&&"rgb"!==t.colorSpace&&!Ue[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,o,l;if("exponential"===a)s=ki;else if("interval"===a)s=Ii;else if("categorical"===a){s=Ci,o=Object.create(null);for(const e of t.stops)o[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=Pi}if(n){const i={},n=[];for(let e=0;e<t.stops.length;e++){const r=t.stops[e],a=r[0].zoom;void 0===i[a]&&(i[a]={zoom:a,type:t.type,property:t.property,default:t.default,stops:[]},n.push(a)),i[a].stops.push([r[0].value,r[1]])}const r=[];for(const t of n)r.push([i[t].zoom,Ai(i[t],e)]);const a={name:"linear"};return{kind:"composite",interpolationType:a,interpolationFactor:Ve.interpolationFactor.bind(void 0,a),zoomStops:r.map((t=>t[0])),evaluate:({zoom:i},n)=>ki({stops:r,base:t.base},e,i).evaluate(i,n)}}if(r){const i="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:i,interpolationFactor:Ve.interpolationFactor.bind(void 0,i),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:i})=>s(t,e,i,o,l)}}return{kind:"source",evaluate(i,n){const r=n&&n.properties?n.properties[t.property]:void 0;return void 0===r?Ti(t.default,e.default):s(t,e,r,o,l)}}}function Ti(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Ci(t,e,i,n,r){return Ti(typeof i===r?n[i]:void 0,t.default,e.default)}function Ii(t,e,i){if("number"!==xi(i))return Ti(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];const r=xe(t.stops.map((t=>t[0])),i);return t.stops[r][1]}function ki(t,e,i){const n=void 0!==t.base?t.base:1;if("number"!==xi(i))return Ti(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];const a=xe(t.stops.map((t=>t[0])),i),s=function(t,e,i,n){const r=n-i,a=t-i;return 0===r?0:1===e?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}(i,n,t.stops[a][0],t.stops[a+1][0]),o=t.stops[a][1],l=t.stops[a+1][1];let h=Ae[e.type]||Si;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Ue[t.colorSpace];h=(t,i)=>e.reverse(e.interpolate(e.forward(t),e.forward(i),s))}return"function"==typeof o.evaluate?{evaluate(...t){const e=o.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==i)return h(e,i,s)}}:h(o,l,s)}function Pi(t,e,i){switch(e.type){case"color":i=Lt.parse(i);break;case"formatted":i=Ot.fromString(i.toString());break;case"resolvedImage":i=Nt.fromString(i.toString());break;case"padding":i=Rt.parse(i);break;default:xi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0)}return Ti(i,t.default,e.default)}Xt.register(di,{error:[{kind:"error"},[dt],(t,[e])=>{throw new Gt(e.evaluate(t))}],typeof:[dt,[yt],(t,[e])=>xt(Ht(e.evaluate(t)))],"to-rgba":[Mt(ct,4),[pt],(t,[e])=>e.evaluate(t).toArray()],rgb:[pt,[ct,ct,ct],mi],rgba:[pt,[ct,ct,ct,ct],mi],has:{type:mt,overloads:[[[dt],(t,[e])=>pi(e.evaluate(t),t.properties())],[[dt,ft],(t,[e,i])=>pi(e.evaluate(t),i.evaluate(t))]]},get:{type:yt,overloads:[[[dt],(t,[e])=>fi(e.evaluate(t),t.properties())],[[dt,ft],(t,[e,i])=>fi(e.evaluate(t),i.evaluate(t))]]},"feature-state":[yt,[dt],(t,[e])=>fi(e.evaluate(t),t.featureState||{})],properties:[ft,[],t=>t.properties()],"geometry-type":[dt,[],t=>t.geometryType()],id:[yt,[],t=>t.id()],zoom:[ct,[],t=>t.globals.zoom],"heatmap-density":[ct,[],t=>t.globals.heatmapDensity||0],"line-progress":[ct,[],t=>t.globals.lineProgress||0],accumulated:[yt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[ct,yi(ct),(t,e)=>{let i=0;for(const n of e)i+=n.evaluate(t);return i}],"*":[ct,yi(ct),(t,e)=>{let i=1;for(const n of e)i*=n.evaluate(t);return i}],"-":{type:ct,overloads:[[[ct,ct],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[ct],(t,[e])=>-e.evaluate(t)]]},"/":[ct,[ct,ct],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[ct,[ct,ct],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[ct,[],()=>Math.LN2],pi:[ct,[],()=>Math.PI],e:[ct,[],()=>Math.E],"^":[ct,[ct,ct],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[ct,[ct],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[ct,[ct],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[ct,[ct],(t,[e])=>Math.log(e.evaluate(t))],log2:[ct,[ct],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[ct,[ct],(t,[e])=>Math.sin(e.evaluate(t))],cos:[ct,[ct],(t,[e])=>Math.cos(e.evaluate(t))],tan:[ct,[ct],(t,[e])=>Math.tan(e.evaluate(t))],asin:[ct,[ct],(t,[e])=>Math.asin(e.evaluate(t))],acos:[ct,[ct],(t,[e])=>Math.acos(e.evaluate(t))],atan:[ct,[ct],(t,[e])=>Math.atan(e.evaluate(t))],min:[ct,yi(ct),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[ct,yi(ct),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[ct,[ct],(t,[e])=>Math.abs(e.evaluate(t))],round:[ct,[ct],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[ct,[ct],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[ct,[ct],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[mt,[dt,yt],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[mt,[yt],(t,[e])=>t.id()===e.value],"filter-type-==":[mt,[dt],(t,[e])=>t.geometryType()===e.value],"filter-<":[mt,[dt,yt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<r}],"filter-id-<":[mt,[yt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<n}],"filter->":[mt,[dt,yt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>r}],"filter-id->":[mt,[yt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>n}],"filter-<=":[mt,[dt,yt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<=r}],"filter-id-<=":[mt,[yt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<=n}],"filter->=":[mt,[dt,yt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>=r}],"filter-id->=":[mt,[yt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>=n}],"filter-has":[mt,[yt],(t,[e])=>e.value in t.properties()],"filter-has-id":[mt,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[mt,[Mt(dt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[mt,[Mt(yt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[mt,[dt,Mt(yt)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[mt,[dt,Mt(yt)],(t,[e,i])=>function(t,e,i,n){for(;i<=n;){const r=i+n>>1;if(e[r]===t)return!0;e[r]>t?n=r-1:i=r+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:mt,overloads:[[[mt,mt],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[yi(mt),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:mt,overloads:[[[mt,mt],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[yi(mt),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[mt,[mt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[mt,[dt],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[dt,[dt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[dt,[dt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[dt,yi(yt),(t,e)=>e.map((e=>Ut(e.evaluate(t)))).join("")],"resolved-locale":[dt,[gt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Ei{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Jt,this._defaultValue=e?function(t){return"color"===t.type&&wi(t.default)?new Lt(0,0,0,0):"color"===t.type?Lt.parse(t.default)||null:"padding"===t.type?Rt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,n,r,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,n,r,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Gt(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Di(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in di}function Li(t,e){const i=new be(di,[],e?function(t){const e={color:pt,string:dt,number:ct,enum:dt,boolean:mt,formatted:_t,padding:vt,resolvedImage:bt};return"array"===t.type?Mt(e[t.value]||yt,t.length):e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?gi(new Ei(n,e)):_i(i.errors)}class zi{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ge(e.expression)}evaluateWithoutErrorHandling(t,e,i,n,r,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,a)}evaluate(t,e,i,n,r,a){return this._styleExpression.evaluate(t,e,i,n,r,a)}}class Fi{constructor(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ge(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,i,n,r,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,a)}evaluate(t,e,i,n,r,a){return this._styleExpression.evaluate(t,e,i,n,r,a)}interpolationFactor(t,e,i){return this.interpolationType?Ve.interpolationFactor(this.interpolationType,t,e,i):0}}function Oi(t,e){const i=Li(t,e);if("error"===i.result)return i;const n=i.value.expression,r=ye(n);if(!r&&!vi(e))return _i([new lt("","data expressions not supported")]);const a=_e(n,["zoom"]);if(!a&&!bi(e))return _i([new lt("","zoom expressions not supported")]);const s=Ni(n);return s||a?s instanceof lt?_i([s]):s instanceof Ve&&!Mi(e)?_i([new lt("",'"interpolate" expressions cannot be used with this property')]):gi(s?new Fi(r?"camera":"composite",i.value,s.labels,s instanceof Ve?s.interpolation:void 0):new zi(r?"constant":"source",i.value)):_i([new lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ri{constructor(t,e){this._parameters=t,this._specification=e,at(this,Ai(this._parameters,this._specification))}static deserialize(t){return new Ri(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ni(t){let e=null;if(t instanceof Ze)e=Ni(t.result);else if(t instanceof $e){for(const i of t.args)if(e=Ni(i),e)break}else(t instanceof we||t instanceof Ve)&&t.input instanceof Xt&&"zoom"===t.input.name&&(e=t);return e instanceof lt||t.eachChild((t=>{const i=Ni(t);i instanceof lt?e=i:!e&&i?e=new lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new lt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Bi(t){const e=t.key,i=t.value,n=t.valueSpec||{},r=t.objectElementValidators||{},a=t.style,s=t.styleSpec;let o=[];const l=xi(i);if("object"!==l)return[new nt(e,i,`object expected, ${l} found`)];for(const t in i){const l=t.split(".")[0],h=n[l]||n["*"];let u;if(r[l])u=r[l];else if(n[l])u=pn;else if(r["*"])u=r["*"];else{if(!n["*"]){o.push(new nt(e,i[t],`unknown property "${t}"`));continue}u=pn}o=o.concat(u({key:(e?`${e}.`:e)+t,value:i[t],valueSpec:h,style:a,styleSpec:s,object:i,objectKey:t},i))}for(const t in n)r[t]||n[t].required&&void 0===n[t].default&&void 0===i[t]&&o.push(new nt(e,i,`missing required property "${t}"`));return o}function ji(t){const e=t.value,i=t.valueSpec,n=t.style,r=t.styleSpec,a=t.key,s=t.arrayElementValidator||pn;if("array"!==xi(e))return[new nt(a,e,`array expected, ${xi(e)} found`)];if(i.length&&e.length!==i.length)return[new nt(a,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new nt(a,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let o={type:i.value,values:i.values};r.$version<7&&(o.function=i.function),"object"===xi(i.value)&&(o=i.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(s({array:e,arrayIndex:t,value:e[t],valueSpec:o,style:n,styleSpec:r,key:`${a}[${t}]`}));return l}function Hi(t){const e=t.key,i=t.value,n=t.valueSpec;let r=xi(i);return"number"===r&&i!=i&&(r="NaN"),"number"!==r?[new nt(e,i,`number expected, ${r} found`)]:"minimum"in n&&i<n.minimum?[new nt(e,i,`${i} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&i>n.maximum?[new nt(e,i,`${i} is greater than the maximum value ${n.maximum}`)]:[]}function Ui(t){const e=t.valueSpec,i=st(t.value.type);let n,r,a,s={};const o="categorical"!==i&&void 0===t.value.property,l=!o,h="array"===xi(t.value.stops)&&"array"===xi(t.value.stops[0])&&"object"===xi(t.value.stops[0][0]),u=Bi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new nt(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;return e=e.concat(ji({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===xi(n)&&0===n.length&&e.push(new nt(t.key,n,"array must have at least one stop")),e},default:function(t){return pn({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&o&&u.push(new nt(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new nt(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!Mi(t.valueSpec)&&u.push(new nt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!vi(t.valueSpec)?u.push(new nt(t.key,t.value,"property functions not supported")):o&&!bi(t.valueSpec)&&u.push(new nt(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!h||void 0!==t.value.property||u.push(new nt(t.key,t.value,'"property" property is required')),u;function c(t){let i=[];const n=t.value,o=t.key;if("array"!==xi(n))return[new nt(o,n,`array expected, ${xi(n)} found`)];if(2!==n.length)return[new nt(o,n,`array length 2 expected, length ${n.length} found`)];if(h){if("object"!==xi(n[0]))return[new nt(o,n,`object expected, ${xi(n[0])} found`)];if(void 0===n[0].zoom)return[new nt(o,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new nt(o,n,"object stop key must have value")];if(a&&a>st(n[0].zoom))return[new nt(o,n[0].zoom,"stop zoom values must appear in ascending order")];st(n[0].zoom)!==a&&(a=st(n[0].zoom),r=void 0,s={}),i=i.concat(Bi({key:`${o}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Hi,value:d}}))}else i=i.concat(d({key:`${o}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return Di(ot(n[1]))?i.concat([new nt(`${o}[1]`,n[1],"expressions are not allowed in function stops.")]):i.concat(pn({key:`${o}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,a){const o=xi(t.value),l=st(t.value),h=null!==t.value?t.value:a;if(n){if(o!==n)return[new nt(t.key,h,`${o} stop domain type must match previous stop domain type ${n}`)]}else n=o;if("number"!==o&&"string"!==o&&"boolean"!==o)return[new nt(t.key,h,"stop domain value must be a number, string, or boolean")];if("number"!==o&&"categorical"!==i){let n=`number expected, ${o} found`;return vi(e)&&void 0===i&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(t.key,h,n)]}return"categorical"!==i||"number"!==o||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===o&&void 0!==r&&l<r?[new nt(t.key,h,"stop domain values must appear in ascending order")]:(r=l,"categorical"===i&&l in s?[new nt(t.key,h,"stop domain values must be unique")]:(s[l]=!0,[])):[new nt(t.key,h,`integer expected, found ${l}`)]}}function Vi(t){const e=("property"===t.expressionContext?Oi:Li)(ot(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new nt(`${t.key}${e.key}`,t.value,e.message)));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new nt(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ge(i))return[new nt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ge(i))return[new nt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!_e(i,["zoom","feature-state"]))return[new nt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ye(i))return[new nt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gi(t){const e=t.key,i=t.value,n=t.valueSpec,r=[];return Array.isArray(n.values)?-1===n.values.indexOf(st(i))&&r.push(new nt(e,i,`expected one of [${n.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(n.values).indexOf(st(i))&&r.push(new nt(e,i,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(i)} found`)),r}function $i(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!$i(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Zi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qi(t){if(null==t)return{filter:()=>!0,needGeometry:!1};$i(t)||(t=Ji(t));const e=Li(t,Zi);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,i,n)=>e.value.evaluate(t,i,{},n),needGeometry:Wi(t)}}function Yi(t,e){return t<e?-1:t>e?1:0}function Wi(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Wi(t[e]))return!0;return!1}function Ji(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Xi(t[1],t[2],"=="):"!="===e?tn(Xi(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Xi(t[1],t[2],e):"any"===e?(i=t.slice(1),["any"].concat(i.map(Ji))):"all"===e?["all"].concat(t.slice(1).map(Ji)):"none"===e?["all"].concat(t.slice(1).map(Ji).map(tn)):"in"===e?Ki(t[1],t.slice(2)):"!in"===e?tn(Ki(t[1],t.slice(2))):"has"===e?Qi(t[1]):"!has"===e?tn(Qi(t[1])):"within"!==e||t;var i}function Xi(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function Ki(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Yi)]]:["filter-in-small",t,["literal",e]]}}function Qi(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function tn(t){return["!",t]}function en(t){return $i(ot(t.value))?Vi(at({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):nn(t)}function nn(t){const e=t.value,i=t.key;if("array"!==xi(e))return[new nt(i,e,`array expected, ${xi(e)} found`)];const n=t.styleSpec;let r,a=[];if(e.length<1)return[new nt(i,e,"filter array must have at least 1 element")];switch(a=a.concat(Gi({key:`${i}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),st(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===st(e[1])&&a.push(new nt(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&a.push(new nt(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=xi(e[1]),"string"!==r&&a.push(new nt(`${i}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=xi(e[s]),"$type"===st(e[1])?a=a.concat(Gi({key:`${i}[${s}]`,value:e[s],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new nt(`${i}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let n=1;n<e.length;n++)a=a.concat(nn({key:`${i}[${n}]`,value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=xi(e[1]),2!==e.length?a.push(new nt(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==r&&a.push(new nt(`${i}[1]`,e[1],`string expected, ${r} found`));break;case"within":r=xi(e[1]),2!==e.length?a.push(new nt(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==r&&a.push(new nt(`${i}[1]`,e[1],`object expected, ${r} found`))}return a}function rn(t,e){const i=t.key,n=t.style,r=t.styleSpec,a=t.value,s=t.objectKey,o=r[`${e}_${t.layerType}`];if(!o)return[];const l=s.match(/^(.*)-transition$/);if("paint"===e&&l&&o[l[1]]&&o[l[1]].transition)return pn({key:i,value:a,valueSpec:r.transition,style:n,styleSpec:r});const h=t.valueSpec||o[s];if(!h)return[new nt(i,a,`unknown property "${s}"`)];let u;if("string"===xi(a)&&vi(h)&&!h.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new nt(i,a,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const c=[];return"symbol"===t.layerType&&("text-field"===s&&n&&!n.glyphs&&c.push(new nt(i,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&wi(ot(a))&&"identity"===st(a.type)&&c.push(new nt(i,a,'"text-font" does not support identity functions'))),c.concat(pn({key:t.key,value:a,valueSpec:h,style:n,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:s}))}function an(t){return rn(t,"paint")}function sn(t){return rn(t,"layout")}function on(t){let e=[];const i=t.value,n=t.key,r=t.style,a=t.styleSpec;i.type||i.ref||e.push(new nt(n,i,'either "type" or "ref" is required'));let s=st(i.type);const o=st(i.ref);if(i.id){const a=st(i.id);for(let s=0;s<t.arrayIndex;s++){const t=r.layers[s];st(t.id)===a&&e.push(new nt(n,i.id,`duplicate layer id "${i.id}", previously used at line ${t.id.__line__}`))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in i&&e.push(new nt(n,i[t],`"${t}" is prohibited for ref layers`))})),r.layers.forEach((e=>{st(e.id)===o&&(t=e)})),t?t.ref?e.push(new nt(n,i.ref,"ref cannot reference another ref layer")):s=st(t.type):e.push(new nt(n,i.ref,`ref layer "${o}" not found`))}else if("background"!==s)if(i.source){const t=r.sources&&r.sources[i.source],a=t&&st(t.type);t?"vector"===a&&"raster"===s?e.push(new nt(n,i.source,`layer "${i.id}" requires a raster source`)):"raster"===a&&"raster"!==s?e.push(new nt(n,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==a||i["source-layer"]?"raster-dem"===a&&"hillshade"!==s?e.push(new nt(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===a&&t.lineMetrics||e.push(new nt(n,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new nt(n,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new nt(n,i.source,`source "${i.source}" not found`))}else e.push(new nt(n,i,'missing required property "source"'));return e=e.concat(Bi({key:n,value:i,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>pn({key:`${n}.type`,value:i.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"}),filter:en,layout:t=>Bi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>sn(at({layerType:s},t))}}),paint:t=>Bi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>an(at({layerType:s},t))}})}})),e}function ln(t){const e=t.value,i=t.key,n=xi(e);return"string"!==n?[new nt(i,e,`string expected, ${n} found`)]:[]}const hn={promoteId:function({key:t,value:e}){if("string"===xi(e))return ln({key:t,value:e});{const i=[];for(const n in e)i.push(...ln({key:`${t}.${n}`,value:e[n]}));return i}}};function un(t){const e=t.value,i=t.key,n=t.styleSpec,r=t.style;if(!e.type)return[new nt(i,e,'"type" is required')];const a=st(e.type);let s;switch(a){case"vector":case"raster":case"raster-dem":return s=Bi({key:i,value:e,valueSpec:n[`source_${a.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:hn}),s;case"geojson":if(s=Bi({key:i,value:e,valueSpec:n.source_geojson,style:r,styleSpec:n,objectElementValidators:hn}),e.cluster)for(const t in e.clusterProperties){const[n,r]=e.clusterProperties[t],a="string"==typeof n?[n,["accumulated"],["get",t]]:n;s.push(...Vi({key:`${i}.${t}.map`,value:r,expressionContext:"cluster-map"})),s.push(...Vi({key:`${i}.${t}.reduce`,value:a,expressionContext:"cluster-reduce"}))}return s;case"video":return Bi({key:i,value:e,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return Bi({key:i,value:e,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new nt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gi({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function cn(t){const e=t.value,i=t.styleSpec,n=i.light,r=t.style;let a=[];const s=xi(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new nt("light",e,`object expected, ${s} found`)]),a;for(const t in e){const s=t.match(/^(.*)-transition$/);a=a.concat(s&&n[s[1]]&&n[s[1]].transition?pn({key:t,value:e[t],valueSpec:i.transition,style:r,styleSpec:i}):n[t]?pn({key:t,value:e[t],valueSpec:n[t],style:r,styleSpec:i}):[new nt(t,e[t],`unknown property "${t}"`)])}return a}function dn(t){const e=t.value,i=t.styleSpec,n=i.terrain,r=t.style;let a=[];const s=xi(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new nt("terrain",e,`object expected, ${s} found`)]),a;for(const t in e)a=a.concat(n[t]?pn({key:t,value:e[t],valueSpec:n[t],style:r,styleSpec:i}):[new nt(t,e[t],`unknown property "${t}"`)]);return a}const mn={"*":()=>[],array:ji,boolean:function(t){const e=t.value,i=t.key,n=xi(e);return"boolean"!==n?[new nt(i,e,`boolean expected, ${n} found`)]:[]},number:Hi,color:function(t){const e=t.key,i=t.value,n=xi(i);return"string"!==n?[new nt(e,i,`color expected, ${n} found`)]:null===Ct(i)?[new nt(e,i,`color expected, "${i}" found`)]:[]},constants:rt,enum:Gi,filter:en,function:Ui,layer:on,object:Bi,source:un,light:cn,terrain:dn,string:ln,formatted:function(t){return 0===ln(t).length?[]:Vi(t)},resolvedImage:function(t){return 0===ln(t).length?[]:Vi(t)},padding:function(t){const e=t.key,i=t.value;if("array"===xi(i)){if(i.length<1||i.length>4)return[new nt(e,i,`padding requires 1 to 4 values; ${i.length} values found`)];const t={type:"number"};let n=[];for(let r=0;r<i.length;r++)n=n.concat(pn({key:`${e}[${r}]`,value:i[r],valueSpec:t}));return n}return Hi({key:e,value:i,valueSpec:{}})}};function pn(t){const e=t.value,i=t.valueSpec,n=t.styleSpec;return i.expression&&wi(st(e))?Ui(t):i.expression&&Di(ot(e))?Vi(t):i.type&&mn[i.type]?mn[i.type](t):Bi(at({},t,{valueSpec:i.type?n[i.type]:i}))}function fn(t){const e=t.value,i=t.key,n=ln(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new nt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new nt(i,e,'"glyphs" url must include a "{range}" token'))),n}function yn(t,e=it){let i=[];return i=i.concat(pn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:fn,"*":()=>[]}})),t.constants&&(i=i.concat(rt({key:"constants",value:t.constants,style:t,styleSpec:e}))),gn(i)}function gn(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function _n(t){return function(...e){return gn(t.apply(this,e))}}yn.source=_n(un),yn.light=_n(cn),yn.terrain=_n(dn),yn.layer=_n(on),yn.filter=_n(en),yn.paintProperty=_n(an),yn.layoutProperty=_n(sn);const vn=yn,bn=vn.light,Mn=vn.paintProperty,xn=vn.layoutProperty;function wn(t,e){let i=!1;if(e&&e.length)for(const n of e)t.fire(new tt(new Error(n.message))),i=!0;return i}class Sn{constructor(t,e,i){const n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(i=r[2]);for(let t=0;t<this.d*this.d;t++){const e=r[3+t],i=r[3+t+1];n.push(e===i?null:r.subarray(e,i))}const a=r[3+n.length+1];this.keys=r.subarray(r[3+n.length],a),this.bboxes=r.subarray(a),this.insert=this._insertReadonly}else{this.d=e+2*i;for(let t=0;t<this.d*this.d;t++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;const r=i/e*t;this.min=-r,this.max=t+r}insert(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,i,n,r,a){this.cells[r].push(a)}query(t,e,i,n,r){const a=this.min,s=this.max;if(t<=a&&e<=a&&s<=i&&s<=n&&!r)return Array.prototype.slice.call(this.keys);{const a=[];return this._forEachCell(t,e,i,n,this._queryCell,a,{},r),a}}_queryCell(t,e,i,n,r,a,s,o){const l=this.cells[r];if(null!==l){const r=this.keys,h=this.bboxes;for(let u=0;u<l.length;u++){const c=l[u];if(void 0===s[c]){const l=4*c;(o?o(h[l+0],h[l+1],h[l+2],h[l+3]):t<=h[l+2]&&e<=h[l+3]&&i>=h[l+0]&&n>=h[l+1])?(s[c]=!0,a.push(r[c])):s[c]=!1}}}}_forEachCell(t,e,i,n,r,a,s,o){const l=this._convertToCellCoord(t),h=this._convertToCellCoord(e),u=this._convertToCellCoord(i),c=this._convertToCellCoord(n);for(let d=l;d<=u;d++)for(let l=h;l<=c;l++){const h=this.d*l+d;if((!o||o(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&r.call(this,t,e,i,n,h,a,s,o))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let i=0;for(let t=0;t<this.cells.length;t++)i+=this.cells[t].length;const n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;let r=e;for(let e=0;e<t.length;e++){const i=t[e];n[3+e]=r,n.set(i,r),r+=i.length}return n[3+t.length]=r,n.set(this.keys,r),r+=this.keys.length,n[3+t.length+1]=r,n.set(this.bboxes,r),r+=this.bboxes.length,n.buffer}static serialize(t,e){const i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}}static deserialize(t){return new Sn(t.buffer)}}const An={};function Tn(t,e,i={}){if(An[t])throw new Error(`${t} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),An[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}Tn("Object",Object),Tn("TransferableGridIndex",Sn),Tn("Color",Lt),Tn("Error",Error),Tn("AJAXError",H),Tn("ResolvedImage",Nt),Tn("StylePropertyFunction",Ri),Tn("StyleExpression",Ei,{omit:["_evaluator"]}),Tn("ZoomDependentExpression",Fi),Tn("ZoomConstantExpression",zi),Tn("CompoundExpression",Xt,{omit:["_evaluate"]});for(const t in di)di[t]._classRegistryKey||Tn(`Expression_${t}`,di[t]);function Cn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function In(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob)return t;if(Cn(t))return e&&e.push(t),t;if(w(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const i=t;return e&&e.push(i.buffer),i}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const i=[];for(const n of t)i.push(In(n,e));return i}if("object"==typeof t){const i=t.constructor,n=i._classRegistryKey;if(!n)throw new Error("can't serialize object of unregistered class");if(!An[n])throw new Error(`${n} is not registered.`);const r=i.serialize?i.serialize(t,e):{};if(i.serialize){if(e&&r===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in t){if(!t.hasOwnProperty(i))continue;if(An[n].omit.indexOf(i)>=0)continue;const a=t[i];r[i]=An[n].shallow.indexOf(i)>=0?a:In(a,e)}t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(r.$name=n),r}throw new Error("can't serialize object of type "+typeof t)}function kn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||Cn(t)||w(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(kn);if("object"==typeof t){const e=t.$name||"Object";if(!An[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:i}=An[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(t);const n=Object.create(i.prototype);for(const i of Object.keys(t)){if("$name"===i)continue;const r=t[i];n[i]=An[e].shallow.indexOf(i)>=0?r:kn(r)}return n}throw new Error("can't deserialize object of type "+typeof t)}class Pn{constructor(){this.first=!0}update(t,e){const i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))}}const En={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function Dn(t){for(const e of t)if(Fn(e.charCodeAt(0)))return!0;return!1}function Ln(t){for(const e of t)if(!zn(e.charCodeAt(0)))return!1;return!0}function zn(t){return!(En.Arabic(t)||En["Arabic Supplement"](t)||En["Arabic Extended-A"](t)||En["Arabic Presentation Forms-A"](t)||En["Arabic Presentation Forms-B"](t))}function Fn(t){return!(746!==t&&747!==t&&(t<4352||!(En["Bopomofo Extended"](t)||En.Bopomofo(t)||En["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||En["CJK Compatibility Ideographs"](t)||En["CJK Compatibility"](t)||En["CJK Radicals Supplement"](t)||En["CJK Strokes"](t)||!(!En["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||En["CJK Unified Ideographs Extension A"](t)||En["CJK Unified Ideographs"](t)||En["Enclosed CJK Letters and Months"](t)||En["Hangul Compatibility Jamo"](t)||En["Hangul Jamo Extended-A"](t)||En["Hangul Jamo Extended-B"](t)||En["Hangul Jamo"](t)||En["Hangul Syllables"](t)||En.Hiragana(t)||En["Ideographic Description Characters"](t)||En.Kanbun(t)||En["Kangxi Radicals"](t)||En["Katakana Phonetic Extensions"](t)||En.Katakana(t)&&12540!==t||!(!En["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!En["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||En["Unified Canadian Aboriginal Syllabics"](t)||En["Unified Canadian Aboriginal Syllabics Extended"](t)||En["Vertical Forms"](t)||En["Yijing Hexagram Symbols"](t)||En["Yi Syllables"](t)||En["Yi Radicals"](t))))}function On(t){return!(Fn(t)||function(t){return!!(En["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||En["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||En["Letterlike Symbols"](t)||En["Number Forms"](t)||En["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||En["Control Pictures"](t)&&9251!==t||En["Optical Character Recognition"](t)||En["Enclosed Alphanumerics"](t)||En["Geometric Shapes"](t)||En["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||En["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||En["CJK Symbols and Punctuation"](t)||En.Katakana(t)||En["Private Use Area"](t)||En["CJK Compatibility Forms"](t)||En["Small Form Variants"](t)||En["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Rn(t){return t>=1424&&t<=2303||En["Arabic Presentation Forms-A"](t)||En["Arabic Presentation Forms-B"](t)}function Nn(t,e){return!(!e&&Rn(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||En.Khmer(t))}function Bn(t){for(const e of t)if(Rn(e.charCodeAt(0)))return!0;return!1}const jn="deferred",Hn="loading",Un="loaded";let Vn=null,Gn="unavailable",$n=null;const Zn=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Gn="error"),Vn&&Vn(t)};function qn(){Yn.fire(new Q("pluginStateChange",{pluginStatus:Gn,pluginURL:$n}))}const Yn=new et,Wn=function(){return Gn},Jn=function(){if(Gn!==jn||!$n)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Gn=Hn,qn(),$n&&$({url:$n},(t=>{t?Zn(t):(Gn=Un,qn())}))},Xn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Gn===Un||null!=Xn.applyArabicShaping,isLoading:()=>Gn===Hn,setState(t){if(!g())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Gn=t.pluginStatus,$n=t.pluginURL},isParsed(){if(!g())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Xn.applyArabicShaping&&null!=Xn.processBidirectionalText&&null!=Xn.processStyledBidirectionalText},getPluginURL(){if(!g())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return $n}};class Kn{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pn,this.transition={})}isSupportedScript(t){return function(t,e){for(const i of t)if(!Nn(i.charCodeAt(0),e))return!1;return!0}(t,Xn.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}}}class Qn{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(wi(t))return new Ri(t,e);if(Di(t)){const i=Oi(t,e);if("error"===i.result)throw new Error(i.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return i.value}{let i=t;return"color"===e.type&&"string"==typeof t?i=Lt.parse(t):"padding"!==e.type||"number"!=typeof t&&!Array.isArray(t)||(i=Rt.parse(t)),{kind:"constant",evaluate:()=>i}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)}}class tr{constructor(t){this.property=t,this.value=new Qn(t,void 0)}transitioned(t,e){return new ir(this.property,this.value,e,o({},t.transition,this.transition),t.now)}untransitioned(){return new ir(this.property,this.value,null,{},0)}}class er{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return d(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new tr(this._values[t].property)),this._values[t].value=new Qn(this._values[t].property,null===e?void 0:d(e))}getTransition(t){return d(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new tr(this._values[t].property)),this._values[t].transition=d(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i);const n=this.getTransition(e);void 0!==n&&(t[`${e}-transition`]=n)}return t}transitioned(t,e){const i=new nr(this._properties);for(const n of Object.keys(this._values))i._values[n]=this._values[n].transitioned(t,e._values[n]);return i}untransitioned(){const t=new nr(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class ir{constructor(t,e,i,n,r){this.property=t,this.value=e,this.begin=r+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=i)}possiblyEvaluate(t,e,i){const n=t.now||0,r=this.value.possiblyEvaluate(t,e,i),a=this.prior;if(a){if(n>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(n<this.begin)return a.possiblyEvaluate(t,e,i);{const s=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(t,e,i),r,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(s))}}return r}}class nr{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,i){const n=new sr(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].possiblyEvaluate(t,e,i);return n}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class rr{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return d(this._values[t].value)}setValue(t,e){this._values[t]=new Qn(this._values[t].property,null===e?void 0:d(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(t,e,i){const n=new sr(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].possiblyEvaluate(t,e,i);return n}}class ar{constructor(t,e,i){this.property=t,this.value=e,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,i,n){return this.property.evaluate(this.value,this.parameters,t,e,i,n)}}class sr{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class or{constructor(t){this.specification=t}possiblyEvaluate(t,e){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(e)}interpolate(t,e,i){const n=Ae[this.specification.type];return n?n(t,e,i):t}}class lr{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,i,n){return new ar(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,n)}:t.expression,e)}interpolate(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new ar(this,{kind:"constant",value:void 0},t.parameters);const n=Ae[this.specification.type];return n?new ar(this,{kind:"constant",value:n(t.value.value,e.value.value,i)},t.parameters):t}evaluate(t,e,i,n,r,a){return"constant"===t.kind?t.value:t.evaluate(e,i,n,r,a)}}class hr extends lr{possiblyEvaluate(t,e,i,n){if(void 0===t.value)return new ar(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},i,n),a="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,s=this._calculate(a,a,a,e);return new ar(this,{kind:"constant",value:s},e)}if("camera"===t.expression.kind){const i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new ar(this,{kind:"constant",value:i},e)}return new ar(this,t.expression,e)}evaluate(t,e,i,n,r,a){if("source"===t.kind){const s=t.evaluate(e,i,n,r,a);return this._calculate(s,s,s,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,n),t.evaluate({zoom:Math.floor(e.zoom)},i,n),t.evaluate({zoom:Math.floor(e.zoom)+1},i,n),e):t.value}_calculate(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class ur{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,n){if(void 0!==t.value){if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},i,n);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new Kn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Kn(Math.floor(e.zoom),e)),t.expression.evaluate(new Kn(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class cr{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,n){return!!t.expression.evaluate(e,null,{},i,n)}interpolate(){return!1}}class dr{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const i=t[e];i.specification.overridable&&this.overridableProperties.push(e);const n=this.defaultPropertyValues[e]=new Qn(i,void 0),r=this.defaultTransitionablePropertyValues[e]=new tr(i);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}}}Tn("DataDrivenProperty",lr),Tn("DataConstantProperty",or),Tn("CrossFadedDataDrivenProperty",hr),Tn("CrossFadedProperty",ur),Tn("ColorRampProperty",cr);const mr="-transition";class pr extends et{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new rr(e.layout)),e.paint)){this._transitionablePaint=new er(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sr(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,i={}){null!=e&&this._validate(xn,`layers.${this.id}.layout.${t}`,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith(mr)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,i={}){if(null!=e&&this._validate(Mn,`layers.${this.id}.paint.${t}`,t,e,i))return!1;if(t.endsWith(mr))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const i=this._transitionablePaint._values[t],n="cross-faded-data-driven"===i.property.specification["property-type"],r=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value;return s.isDataDriven()||r||n||this._handleOverridablePaintPropertyUpdate(t,a,s)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,i){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),c(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,i,n,r={}){return(!r||!1!==r.validate)&&wn(this,t.call(vn,{key:e,layerType:this.type,objectKey:i,value:n,styleSpec:it,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof ar&&vi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const fr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class yr{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _r(t,e=1){let i=0,n=0;return{members:t.map((t=>{const r=fr[t.type].BYTES_PER_ELEMENT,a=i=vr(i,Math.max(e,r)),s=t.components||1;return n=Math.max(n,r),i+=r*s,{name:t.name,type:t.type,components:s,offset:a}})),size:vr(i,Math.max(n,e)),alignment:e}}function vr(t,e){return Math.ceil(t/e)*e}class br extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.int16[n+0]=e,this.int16[n+1]=i,t}}br.prototype.bytesPerElement=4,Tn("StructArrayLayout2i4",br);class Mr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const a=4*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.int16[a+2]=n,this.int16[a+3]=r,t}}Mr.prototype.bytesPerElement=8,Tn("StructArrayLayout4i8",Mr);class xr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,n,r,a)}emplace(t,e,i,n,r,a,s){const o=6*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=n,this.int16[o+3]=r,this.int16[o+4]=a,this.int16[o+5]=s,t}}xr.prototype.bytesPerElement=12,Tn("StructArrayLayout2i4i12",xr);class wr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,n,r,a)}emplace(t,e,i,n,r,a,s){const o=4*t,l=8*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.uint8[l+4]=n,this.uint8[l+5]=r,this.uint8[l+6]=a,this.uint8[l+7]=s,t}}wr.prototype.bytesPerElement=8,Tn("StructArrayLayout2i4ub8",wr);class Sr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.float32[n+0]=e,this.float32[n+1]=i,t}}Sr.prototype.bytesPerElement=8,Tn("StructArrayLayout2f8",Sr);class Ar extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,n,r,a,s,o,l,h)}emplace(t,e,i,n,r,a,s,o,l,h,u){const c=10*t;return this.uint16[c+0]=e,this.uint16[c+1]=i,this.uint16[c+2]=n,this.uint16[c+3]=r,this.uint16[c+4]=a,this.uint16[c+5]=s,this.uint16[c+6]=o,this.uint16[c+7]=l,this.uint16[c+8]=h,this.uint16[c+9]=u,t}}Ar.prototype.bytesPerElement=20,Tn("StructArrayLayout10ui20",Ar);class Tr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h,u,c){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,i,n,r,a,s,o,l,h,u,c)}emplace(t,e,i,n,r,a,s,o,l,h,u,c,d){const m=12*t;return this.int16[m+0]=e,this.int16[m+1]=i,this.int16[m+2]=n,this.int16[m+3]=r,this.uint16[m+4]=a,this.uint16[m+5]=s,this.uint16[m+6]=o,this.uint16[m+7]=l,this.int16[m+8]=h,this.int16[m+9]=u,this.int16[m+10]=c,this.int16[m+11]=d,t}}Tr.prototype.bytesPerElement=24,Tn("StructArrayLayout4i4ui4i24",Tr);class Cr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=i,this.float32[r+2]=n,t}}Cr.prototype.bytesPerElement=12,Tn("StructArrayLayout3f12",Cr);class Ir extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Ir.prototype.bytesPerElement=4,Tn("StructArrayLayout1ul4",Ir);class kr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l){const h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,n,r,a,s,o,l)}emplace(t,e,i,n,r,a,s,o,l,h){const u=10*t,c=5*t;return this.int16[u+0]=e,this.int16[u+1]=i,this.int16[u+2]=n,this.int16[u+3]=r,this.int16[u+4]=a,this.int16[u+5]=s,this.uint32[c+3]=o,this.uint16[u+8]=l,this.uint16[u+9]=h,t}}kr.prototype.bytesPerElement=20,Tn("StructArrayLayout6i1ul2ui20",kr);class Pr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,n,r,a)}emplace(t,e,i,n,r,a,s){const o=6*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=n,this.int16[o+3]=r,this.int16[o+4]=a,this.int16[o+5]=s,t}}Pr.prototype.bytesPerElement=12,Tn("StructArrayLayout2i2i2i12",Pr);class Er extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n,r)}emplace(t,e,i,n,r,a){const s=4*t,o=8*t;return this.float32[s+0]=e,this.float32[s+1]=i,this.float32[s+2]=n,this.int16[o+6]=r,this.int16[o+7]=a,t}}Er.prototype.bytesPerElement=16,Tn("StructArrayLayout2f1f2i16",Er);class Dr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const a=12*t,s=3*t;return this.uint8[a+0]=e,this.uint8[a+1]=i,this.float32[s+1]=n,this.float32[s+2]=r,t}}Dr.prototype.bytesPerElement=12,Tn("StructArrayLayout2ub2f12",Dr);class Lr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,this.uint16[r+2]=n,t}}Lr.prototype.bytesPerElement=6,Tn("StructArrayLayout3ui6",Lr);class zr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y){const g=this.length;return this.resize(g+1),this.emplace(g,t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y)}emplace(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g){const _=24*t,v=12*t,b=48*t;return this.int16[_+0]=e,this.int16[_+1]=i,this.uint16[_+2]=n,this.uint16[_+3]=r,this.uint32[v+2]=a,this.uint32[v+3]=s,this.uint32[v+4]=o,this.uint16[_+10]=l,this.uint16[_+11]=h,this.uint16[_+12]=u,this.float32[v+7]=c,this.float32[v+8]=d,this.uint8[b+36]=m,this.uint8[b+37]=p,this.uint8[b+38]=f,this.uint32[v+10]=y,this.int16[_+22]=g,t}}zr.prototype.bytesPerElement=48,Tn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",zr);class Fr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C){const I=this.length;return this.resize(I+1),this.emplace(I,t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C)}emplace(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g,_,v,b,M,x,w,S,A,T,C,I){const k=34*t,P=17*t;return this.int16[k+0]=e,this.int16[k+1]=i,this.int16[k+2]=n,this.int16[k+3]=r,this.int16[k+4]=a,this.int16[k+5]=s,this.int16[k+6]=o,this.int16[k+7]=l,this.uint16[k+8]=h,this.uint16[k+9]=u,this.uint16[k+10]=c,this.uint16[k+11]=d,this.uint16[k+12]=m,this.uint16[k+13]=p,this.uint16[k+14]=f,this.uint16[k+15]=y,this.uint16[k+16]=g,this.uint16[k+17]=_,this.uint16[k+18]=v,this.uint16[k+19]=b,this.uint16[k+20]=M,this.uint16[k+21]=x,this.uint16[k+22]=w,this.uint32[P+12]=S,this.float32[P+13]=A,this.float32[P+14]=T,this.float32[P+15]=C,this.float32[P+16]=I,t}}Fr.prototype.bytesPerElement=68,Tn("StructArrayLayout8i15ui1ul4f68",Fr);class Or extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Or.prototype.bytesPerElement=4,Tn("StructArrayLayout1f4",Or);class Rr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=i,this.int16[r+2]=n,t}}Rr.prototype.bytesPerElement=6,Tn("StructArrayLayout3i6",Rr);class Nr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=i,this.uint16[r+3]=n,t}}Nr.prototype.bytesPerElement=8,Tn("StructArrayLayout1ul2ui8",Nr);class Br extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,t}}Br.prototype.bytesPerElement=4,Tn("StructArrayLayout2ui4",Br);class jr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}jr.prototype.bytesPerElement=2,Tn("StructArrayLayout1ui2",jr);class Hr extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const a=4*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=n,this.float32[a+3]=r,t}}Hr.prototype.bytesPerElement=16,Tn("StructArrayLayout4f16",Hr);class Ur extends yr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}Ur.prototype.size=20;class Vr extends kr{get(t){return new Ur(this,t)}}Tn("CollisionBoxArray",Vr);class Gr extends yr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Gr.prototype.size=48;class $r extends zr{get(t){return new Gr(this,t)}}Tn("PlacedSymbolArray",$r);class Zr extends yr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Zr.prototype.size=68;class qr extends Fr{get(t){return new Zr(this,t)}}Tn("SymbolInstanceArray",qr);class Yr extends Or{getoffsetX(t){return this.float32[1*t+0]}}Tn("GlyphOffsetArray",Yr);class Wr extends Rr{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Tn("SymbolLineVertexArray",Wr);class Jr extends yr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Jr.prototype.size=8;class Xr extends Nr{get(t){return new Jr(this,t)}}Tn("FeatureIndexArray",Xr);class Kr extends br{}class Qr extends br{}class ta extends br{}class ea extends xr{}class ia extends wr{}class na extends Sr{}class ra extends Ar{}class aa extends Tr{}class sa extends Cr{}class oa extends Ir{}class la extends Pr{}class ha extends Dr{}class ua extends Lr{}class ca extends Br{}const da=_r([{name:"a_pos",components:2,type:"Int16"}],4),{members:ma}=da;class pa{constructor(t=[]){this.segments=t}prepareSegment(t,e,i,n){let r=this.segments[this.segments.length-1];return t>pa.MAX_VERTEX_ARRAY_LENGTH&&p(`Max vertices per segment is ${pa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!r||r.vertexLength+t>pa.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==n)&&(r={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==n&&(r.sortKey=n),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,i,n){return new pa([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:n,vaos:{},sortKey:0}])}}function fa(t,e){return 256*(t=a(Math.floor(t),0,255))+a(Math.floor(e),0,255)}pa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tn("SegmentVector",pa);const ya=_r([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ga={exports:{}},_a=function(t,e){var i,n,r,a,s,o,l,h;for(n=t.length-(i=3&t.length),r=e,s=3432918353,o=461845907,h=0;h<n;)l=255&t.charCodeAt(h)|(255&t.charCodeAt(++h))<<8|(255&t.charCodeAt(++h))<<16|(255&t.charCodeAt(++h))<<24,++h,r=27492+(65535&(a=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(h+2))<<16;case 2:l^=(255&t.charCodeAt(h+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(h)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0},va=function(t,e){for(var i,n=t.length,r=e^n,a=0;n>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:r^=(255&t.charCodeAt(a+2))<<16;case 2:r^=(255&t.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0};ga.exports=_a,ga.exports.murmur3=_a,ga.exports.murmur2=va;class ba{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,i,n){this.ids.push(Ma(t)),this.positions.push(e,i,n)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const e=Ma(t);let i=0,n=this.ids.length-1;for(;i<n;){const t=i+n>>1;this.ids[t]>=e?n=t:i=t+1}const r=[];for(;this.ids[i]===e;)r.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return r}static serialize(t,e){const i=new Float64Array(t.ids),n=new Uint32Array(t.positions);return xa(i,n,0,i.length-1),e&&e.push(i.buffer,n.buffer),{ids:i,positions:n}}static deserialize(t){const e=new ba;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Ma(t){const e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:ga.exports(String(t))}function xa(t,e,i,n){for(;i<n;){const r=t[i+n>>1];let a=i-1,s=n+1;for(;;){do{a++}while(t[a]<r);do{s--}while(t[s]>r);if(a>=s)break;wa(t,a,s),wa(e,3*a,3*s),wa(e,3*a+1,3*s+1),wa(e,3*a+2,3*s+2)}s-i<n-s?(xa(t,e,i,s),i=s+1):(xa(t,e,s+1,n),n=s)}}function wa(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}Tn("FeaturePositionMap",ba);class Sa{constructor(t,e){this.gl=t.gl,this.location=e}}class Aa extends Sa{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Ta extends Sa{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Ca extends Sa{constructor(t,e){super(t,e),this.current=Lt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Ia=new Float32Array(16);function ka(t){return[fa(255*t.r,255*t.g),fa(255*t.b,255*t.a)]}class Pa{constructor(t,e,i){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=i}setUniform(t,e,i){t.set(i.constantOr(this.value))}getBinding(t,e,i){return"color"===this.type?new Ca(t,e):new Aa(t,e)}}class Ea{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,i,n){const r="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;r&&t.set(r)}getBinding(t,e,i){return"u_pattern"===i.substr(0,9)?new Ta(t,e):new Aa(t,e)}}class Da{constructor(t,e,i,n){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===i?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(t,e,i,n,r){const a=this.paintVertexArray.length,s=this.expression.evaluate(new Kn(0),e,{},n,[],r);this.paintVertexArray.resize(t),this._setPaintValue(a,t,s)}updatePaintArray(t,e,i,n){const r=this.expression.evaluate({zoom:0},i,n);this._setPaintValue(t,e,r)}_setPaintValue(t,e,i){if("color"===this.type){const n=ka(i);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class La{constructor(t,e,i,n,r,a){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=i,this.useIntegerZoom=n,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===i?4:2,offset:0}))),this.paintVertexArray=new a}populatePaintArray(t,e,i,n,r){const a=this.expression.evaluate(new Kn(this.zoom),e,{},n,[],r),s=this.expression.evaluate(new Kn(this.zoom+1),e,{},n,[],r),o=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(o,t,a,s)}updatePaintArray(t,e,i,n){const r=this.expression.evaluate({zoom:this.zoom},i,n),a=this.expression.evaluate({zoom:this.zoom+1},i,n);this._setPaintValue(t,e,r,a)}_setPaintValue(t,e,i,n){if("color"===this.type){const r=ka(i),a=ka(n);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1],a[0],a[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i,n);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=a(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(n)}getBinding(t,e,i){return new Aa(t,e)}}class za{constructor(t,e,i,n,r,a){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=n,this.layerId=a,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r}populatePaintArray(t,e,i){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],i)}updatePaintArray(t,e,i,n,r){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],r)}_setPaintValues(t,e,i,n){if(!n||!i)return;const{min:r,mid:a,max:s}=i,o=n[r],l=n[a],h=n[s];if(o&&l&&h)for(let i=t;i<e;i++)this.zoomInPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],l.pixelRatio,o.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],l.pixelRatio,h.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,ya.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,ya.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fa{constructor(t,e,i){this.binders={},this._buffers=[];const n=[];for(const r in t.paint._values){if(!i(r))continue;const a=t.paint.get(r);if(!(a instanceof ar&&vi(a.property.specification)))continue;const s=Ra(r,t.type),o=a.value,l=a.property.specification.type,h=a.property.useIntegerZoom,u=a.property.specification["property-type"],c="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===o.kind)this.binders[r]=c?new Ea(o.value,s):new Pa(o.value,s,l),n.push(`/u_${r}`);else if("source"===o.kind||c){const i=Na(r,l,"source");this.binders[r]=c?new za(o,l,h,e,i,t.id):new Da(o,s,l,i),n.push(`/a_${r}`)}else{const t=Na(r,l,"composite");this.binders[r]=new La(o,s,l,h,e,t),n.push(`/z_${r}`)}}this.cacheKey=n.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Da||e instanceof La?e.maxValue:0}populatePaintArrays(t,e,i,n,r){for(const a in this.binders){const s=this.binders[a];(s instanceof Da||s instanceof La||s instanceof za)&&s.populatePaintArray(t,e,i,n,r)}}setConstantPatternPositions(t,e){for(const i in this.binders){const n=this.binders[i];n instanceof Ea&&n.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,i,n,r){let a=!1;for(const s in t){const o=e.getPositions(s);for(const e of o){const o=i.feature(e.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof Da||l instanceof La||l instanceof za)&&!0===l.expression.isStateDependent){const h=n.paint.get(i);l.expression=h.value,l.updatePaintArray(e.start,e.end,o,t[s],r),a=!0}}}}return a}defines(){const t=[];for(const e in this.binders){const i=this.binders[e];(i instanceof Pa||i instanceof Ea)&&t.push(...i.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Da||i instanceof La)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name);else if(i instanceof za)for(let e=0;e<ya.members.length;e++)t.push(ya.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Pa||i instanceof Ea||i instanceof La)for(const e of i.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const i=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof Pa||r instanceof Ea||r instanceof La)for(const a of r.uniformNames)if(e[a]){const s=r.getBinding(t,e[a],a);i.push({name:a,property:n,binding:s})}}return i}setUniforms(t,e,i,n){for(const{name:t,property:r,binding:a}of e)this.binders[r].setUniform(a,n,i.get(r),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const i=this.binders[e];if(t&&i instanceof za){const e=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(i instanceof Da||i instanceof La)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(const e in this.binders){const i=this.binders[e];(i instanceof Da||i instanceof La||i instanceof za)&&i.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Da||e instanceof La||e instanceof za)&&e.destroy()}}}class Oa{constructor(t,e,i=()=>!0){this.programConfigurations={};for(const n of t)this.programConfigurations[n.id]=new Fa(n,e,i);this.needsUpload=!1,this._featureMap=new ba,this._bufferOffset=0}populatePaintArrays(t,e,i,n,r,a){for(const i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,n,r,a);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,i,n){for(const r of i)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,e,r,n)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Ra(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Na(t,e,i){const n={color:{source:Sr,composite:Hr},number:{source:Or,composite:Sr}},r=function(t){return{"line-pattern":{source:ra,composite:ra},"fill-pattern":{source:ra,composite:ra},"fill-extrusion-pattern":{source:ra,composite:ra}}[t]}(t);return r&&r[i]||n[e][i]}Tn("ConstantBinder",Pa),Tn("CrossFadedConstantBinder",Ea),Tn("SourceExpressionBinder",Da),Tn("CrossFadedCompositeBinder",za),Tn("CompositeExpressionBinder",La),Tn("ProgramConfiguration",Fa,{omit:["_buffers"]}),Tn("ProgramConfigurationSet",Oa);var Ba=8192;const ja=Math.pow(2,14)-1,Ha=-ja-1;function Ua(t){const e=Ba/t.extent,i=t.loadGeometry();for(let t=0;t<i.length;t++){const n=i[t];for(let t=0;t<n.length;t++){const i=n[t],r=Math.round(i.x*e),s=Math.round(i.y*e);i.x=a(r,Ha,ja),i.y=a(s,Ha,ja),(r<i.x||r>i.x+1||s<i.y||s>i.y+1)&&p("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Va(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Ua(t):[]}}function Ga(t,e,i,n,r){t.emplaceBack(2*e+(n+1)/2,2*i+(r+1)/2)}class $a{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Qr,this.indexArray=new ua,this.segments=new pa,this.programConfigurations=new Oa(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){const n=this.layers[0],r=[];let a=null,s=!1;"circle"===n.type&&(a=n.layout.get("circle-sort-key"),s=!a.isConstant());for(const{feature:e,id:n,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,h=Va(e,t);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),h,i))continue;const u=s?a.evaluate(h,{},i):void 0,c={id:n,properties:e.properties,type:e.type,sourceLayerIndex:l,index:o,geometry:t?h.geometry:Ua(e),patterns:{},sortKey:u};r.push(c)}s&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of r){const{geometry:r,index:a,sourceLayerIndex:s}=n,o=t[a].feature;this.addFeature(n,r,a,i),e.featureIndex.insert(o,r,a,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ma),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,n){for(const i of e)for(const e of i){const i=e.x,n=e.y;if(i<0||i>=Ba||n<0||n>=Ba)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),a=r.vertexLength;Ga(this.layoutVertexArray,i,n,-1,-1),Ga(this.layoutVertexArray,i,n,1,-1),Ga(this.layoutVertexArray,i,n,1,1),Ga(this.layoutVertexArray,i,n,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+3,a+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},n)}}function Za(t,e){for(let i=0;i<t.length;i++)if(es(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(es(t,e[i]))return!0;return!!Ja(t,e)}function qa(t,e,i){return!!es(t,e)||!!Ka(e,t,i)}function Ya(t,e){if(1===t.length)return ts(e,t[0]);for(let i=0;i<e.length;i++){const n=e[i];for(let e=0;e<n.length;e++)if(es(t,n[e]))return!0}for(let i=0;i<t.length;i++)if(ts(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(Ja(t,e[i]))return!0;return!1}function Wa(t,e,i){if(t.length>1){if(Ja(t,e))return!0;for(let n=0;n<e.length;n++)if(Ka(e[n],t,i))return!0}for(let n=0;n<t.length;n++)if(Ka(t[n],e,i))return!0;return!1}function Ja(t,e){if(0===t.length||0===e.length)return!1;for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1];for(let t=0;t<e.length-1;t++)if(Xa(n,r,e[t],e[t+1]))return!0}return!1}function Xa(t,e,i,n){return f(t,i,n)!==f(e,i,n)&&f(t,e,i)!==f(t,e,n)}function Ka(t,e,i){const n=i*i;if(1===e.length)return t.distSqr(e[0])<n;for(let i=1;i<e.length;i++)if(Qa(t,e[i-1],e[i])<n)return!0;return!1}function Qa(t,e,i){const n=e.distSqr(i);if(0===n)return t.distSqr(e);const r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return t.distSqr(r<0?e:r>1?i:i.sub(e)._mult(r)._add(e))}function ts(t,e){let i,n,r,a=!1;for(let s=0;s<t.length;s++){i=t[s];for(let t=0,s=i.length-1;t<i.length;s=t++)n=i[t],r=i[s],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(a=!a)}return a}function es(t,e){let i=!1;for(let n=0,r=t.length-1;n<t.length;r=n++){const a=t[n],s=t[r];a.y>e.y!=s.y>e.y&&e.x<(s.x-a.x)*(e.y-a.y)/(s.y-a.y)+a.x&&(i=!i)}return i}function is(t,e,i){const n=i[0],r=i[2];if(t.x<n.x&&e.x<n.x||t.x>r.x&&e.x>r.x||t.y<n.y&&e.y<n.y||t.y>r.y&&e.y>r.y)return!1;const a=f(t,e,i[0]);return a!==f(t,e,i[1])||a!==f(t,e,i[2])||a!==f(t,e,i[3])}function ns(t,e,i){const n=e.paint.get(t).value;return"constant"===n.kind?n.value:i.programConfigurations.get(e.id).getMaxValue(t)}function rs(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function as(t,e,i,n,r){if(!e[0]&&!e[1])return t;const a=A.convert(e)._mult(r);"viewport"===i&&a._rotate(-n);const s=[];for(let e=0;e<t.length;e++)s.push(t[e].sub(a));return s}Tn("CircleBucket",$a,{omit:["layers"]});const ss=new dr({"circle-sort-key":new lr(it.layout_circle["circle-sort-key"])});var os={paint:new dr({"circle-radius":new lr(it.paint_circle["circle-radius"]),"circle-color":new lr(it.paint_circle["circle-color"]),"circle-blur":new lr(it.paint_circle["circle-blur"]),"circle-opacity":new lr(it.paint_circle["circle-opacity"]),"circle-translate":new or(it.paint_circle["circle-translate"]),"circle-translate-anchor":new or(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new or(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new or(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new lr(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new lr(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new lr(it.paint_circle["circle-stroke-opacity"])}),layout:ss},ls=1e-6,hs="undefined"!=typeof Float32Array?Float32Array:Array;function us(){var t=new hs(9);return hs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function cs(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ds(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],d=e[9],m=e[10],p=e[11],f=e[12],y=e[13],g=e[14],_=e[15],v=i[0],b=i[1],M=i[2],x=i[3];return t[0]=v*n+b*o+M*c+x*f,t[1]=v*r+b*l+M*d+x*y,t[2]=v*a+b*h+M*m+x*g,t[3]=v*s+b*u+M*p+x*_,t[4]=(v=i[4])*n+(b=i[5])*o+(M=i[6])*c+(x=i[7])*f,t[5]=v*r+b*l+M*d+x*y,t[6]=v*a+b*h+M*m+x*g,t[7]=v*s+b*u+M*p+x*_,t[8]=(v=i[8])*n+(b=i[9])*o+(M=i[10])*c+(x=i[11])*f,t[9]=v*r+b*l+M*d+x*y,t[10]=v*a+b*h+M*m+x*g,t[11]=v*s+b*u+M*p+x*_,t[12]=(v=i[12])*n+(b=i[13])*o+(M=i[14])*c+(x=i[15])*f,t[13]=v*r+b*l+M*d+x*y,t[14]=v*a+b*h+M*m+x*g,t[15]=v*s+b*u+M*p+x*_,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ms,ps=ds;function fs(){var t=new hs(3);return hs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ys(t,e,i){var n=new hs(3);return n[0]=t,n[1]=e,n[2]=i,n}function gs(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*s,t}function _s(){var t=new hs(4);return hs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function vs(t,e){const i=gs([],[t.x,t.y,0,1],e);return new A(i[0]/i[3],i[1]/i[3])}fs(),ms=new hs(4),hs!=Float32Array&&(ms[0]=0,ms[1]=0,ms[2]=0,ms[3]=0),fs(),ys(1,0,0),ys(0,1,0),_s(),_s(),us(),function(){var t;t=new hs(2),hs!=Float32Array&&(t[0]=0,t[1]=0)}();class bs extends $a{}Tn("HeatmapBucket",bs,{omit:["layers"]});var Ms={paint:new dr({"heatmap-radius":new lr(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new lr(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new or(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new cr(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new or(it.paint_heatmap["heatmap-opacity"])})};function xs(t,{width:e,height:i},n,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==e*i*n)throw new RangeError(`mismatched image size. expected: ${r.length} but got: ${e*i*n}`)}else r=new Uint8Array(e*i*n);return t.width=e,t.height=i,t.data=r,t}function ws(t,{width:e,height:i},n){if(e===t.width&&i===t.height)return;const r=xs({},{width:e,height:i},n);Ss(t,r,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,i)},n),t.width=e,t.height=i,t.data=r.data}function Ss(t,e,i,n,r,a){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const s=t.data,o=e.data;if(s===o)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<r.height;l++){const h=((i.y+l)*t.width+i.x)*a,u=((n.y+l)*e.width+n.x)*a;for(let t=0;t<r.width*a;t++)o[u+t]=s[h+t]}return e}class As{constructor(t,e){xs(this,t,1,e)}resize(t){ws(this,t,1)}clone(){return new As({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,n,r){Ss(t,e,i,n,r,1)}}class Ts{constructor(t,e){xs(this,t,4,e)}resize(t){ws(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Ts({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,n,r){Ss(t,e,i,n,r,4)}}function Cs(t){const e={},i=t.resolution||256,n=t.clips?t.clips.length:1,r=t.image||new Ts({width:i,height:n});if(Math.log(i)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${i}`);const a=(i,n,a)=>{e[t.evaluationKey]=a;const s=t.expression.evaluate(e);r.data[i+n+0]=Math.floor(255*s.r/s.a),r.data[i+n+1]=Math.floor(255*s.g/s.a),r.data[i+n+2]=Math.floor(255*s.b/s.a),r.data[i+n+3]=Math.floor(255*s.a)};if(t.clips)for(let e=0,r=0;e<n;++e,r+=4*i)for(let n=0,s=0;n<i;n++,s+=4){const o=n/(i-1),{start:l,end:h}=t.clips[e];a(r,s,l*(1-o)+h*o)}else for(let t=0,e=0;t<i;t++,e+=4)a(0,e,t/(i-1));return r}Tn("AlphaImage",As),Tn("RGBAImage",Ts);var Is={paint:new dr({"hillshade-illumination-direction":new or(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new or(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new or(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new or(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new or(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new or(it.paint_hillshade["hillshade-accent-color"])})};const ks=_r([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ps}=ks;var Es={exports:{}};function Ds(t,e,i){i=i||2;var n,r,a,s,o,l,h,u=e&&e.length,c=u?e[0]*i:t.length,d=Ls(t,0,c,i,!0),m=[];if(!d||d.next===d.prev)return m;if(u&&(d=function(t,e,i,n){var r,a,s,o=[];for(r=0,a=e.length;r<a;r++)(s=Ls(t,e[r]*n,r<a-1?e[r+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),o.push(Gs(s));for(o.sort(js),r=0;r<o.length;r++)i=Hs(o[r],i);return i}(t,e,d,i)),t.length>80*i){n=a=t[0],r=s=t[1];for(var p=i;p<c;p+=i)(o=t[p])<n&&(n=o),(l=t[p+1])<r&&(r=l),o>a&&(a=o),l>s&&(s=l);h=0!==(h=Math.max(a-n,s-r))?32767/h:0}return Fs(d,m,i,n,r,h,0),m}function Ls(t,e,i,n,r){var a,s;if(r===no(t,e,i,n)>0)for(a=e;a<i;a+=n)s=to(a,t[a],t[a+1],s);else for(a=i-n;a>=e;a-=n)s=to(a,t[a],t[a+1],s);return s&&Ys(s,s.next)&&(eo(s),s=s.next),s}function zs(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!Ys(n,n.next)&&0!==qs(n.prev,n,n.next))n=n.next;else{if(eo(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function Fs(t,e,i,n,r,a,s){if(t){!s&&a&&function(t,e,i,n){var r=t;do{0===r.z&&(r.z=Vs(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,a,s,o,l,h=1;do{for(i=t,t=null,a=null,s=0;i;){for(s++,n=i,o=0,e=0;e<h&&(o++,n=n.nextZ);e++);for(l=h;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=n}a.nextZ=null,h*=2}while(s>1)}(r)}(t,n,r,a);for(var o,l,h=t;t.prev!==t.next;)if(o=t.prev,l=t.next,a?Rs(t,n,r,a):Os(t))e.push(o.i/i|0),e.push(t.i/i|0),e.push(l.i/i|0),eo(t),t=l.next,h=l.next;else if((t=l)===h){s?1===s?Fs(t=Ns(zs(t),e,i),e,i,n,r,a,2):2===s&&Bs(t,e,i,n,r,a):Fs(zs(t),e,i,n,r,a,1);break}}}function Os(t){var e=t.prev,i=t,n=t.next;if(qs(e,i,n)>=0)return!1;for(var r=e.x,a=i.x,s=n.x,o=e.y,l=i.y,h=n.y,u=r<a?r<s?r:s:a<s?a:s,c=o<l?o<h?o:h:l<h?l:h,d=r>a?r>s?r:s:a>s?a:s,m=o>l?o>h?o:h:l>h?l:h,p=n.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=m&&$s(r,o,a,l,s,h,p.x,p.y)&&qs(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Rs(t,e,i,n){var r=t.prev,a=t,s=t.next;if(qs(r,a,s)>=0)return!1;for(var o=r.x,l=a.x,h=s.x,u=r.y,c=a.y,d=s.y,m=o<l?o<h?o:h:l<h?l:h,p=u<c?u<d?u:d:c<d?c:d,f=o>l?o>h?o:h:l>h?l:h,y=u>c?u>d?u:d:c>d?c:d,g=Vs(m,p,e,i,n),_=Vs(f,y,e,i,n),v=t.prevZ,b=t.nextZ;v&&v.z>=g&&b&&b.z<=_;){if(v.x>=m&&v.x<=f&&v.y>=p&&v.y<=y&&v!==r&&v!==s&&$s(o,u,l,c,h,d,v.x,v.y)&&qs(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,b.x>=m&&b.x<=f&&b.y>=p&&b.y<=y&&b!==r&&b!==s&&$s(o,u,l,c,h,d,b.x,b.y)&&qs(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;v&&v.z>=g;){if(v.x>=m&&v.x<=f&&v.y>=p&&v.y<=y&&v!==r&&v!==s&&$s(o,u,l,c,h,d,v.x,v.y)&&qs(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;b&&b.z<=_;){if(b.x>=m&&b.x<=f&&b.y>=p&&b.y<=y&&b!==r&&b!==s&&$s(o,u,l,c,h,d,b.x,b.y)&&qs(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Ns(t,e,i){var n=t;do{var r=n.prev,a=n.next.next;!Ys(r,a)&&Ws(r,n,n.next,a)&&Ks(r,a)&&Ks(a,r)&&(e.push(r.i/i|0),e.push(n.i/i|0),e.push(a.i/i|0),eo(n),eo(n.next),n=t=a),n=n.next}while(n!==t);return zs(n)}function Bs(t,e,i,n,r,a){var s=t;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&Zs(s,o)){var l=Qs(s,o);return s=zs(s,s.next),l=zs(l,l.next),Fs(s,e,i,n,r,a,0),void Fs(l,e,i,n,r,a,0)}o=o.next}s=s.next}while(s!==t)}function js(t,e){return t.x-e.x}function Hs(t,e){var i=function(t,e){var i,n=e,r=t.x,a=t.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var o=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=r&&o>s&&(s=o,i=n.x<n.next.x?n:n.next,o===r))return i}n=n.next}while(n!==e);if(!i)return null;var l,h=i,u=i.x,c=i.y,d=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&$s(a<c?r:s,a,u,c,a<c?s:r,a,n.x,n.y)&&(l=Math.abs(a-n.y)/(r-n.x),Ks(n,t)&&(l<d||l===d&&(n.x>i.x||n.x===i.x&&Us(i,n)))&&(i=n,d=l)),n=n.next}while(n!==h);return i}(t,e);if(!i)return e;var n=Qs(i,t);return zs(n,n.next),zs(i,i.next)}function Us(t,e){return qs(t.prev,t,e.prev)<0&&qs(e.next,t,t.next)<0}function Vs(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Gs(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function $s(t,e,i,n,r,a,s,o){return(r-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(n-o)>=(i-s)*(e-o)&&(i-s)*(a-o)>=(r-s)*(n-o)}function Zs(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Ws(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(Ks(t,e)&&Ks(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(qs(t.prev,t,e.prev)||qs(t,e.prev,e))||Ys(t,e)&&qs(t.prev,t,t.next)>0&&qs(e.prev,e,e.next)>0)}function qs(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Ys(t,e){return t.x===e.x&&t.y===e.y}function Ws(t,e,i,n){var r=Xs(qs(t,e,i)),a=Xs(qs(t,e,n)),s=Xs(qs(i,n,t)),o=Xs(qs(i,n,e));return r!==a&&s!==o||!(0!==r||!Js(t,i,e))||!(0!==a||!Js(t,n,e))||!(0!==s||!Js(i,t,n))||!(0!==o||!Js(i,e,n))}function Js(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Xs(t){return t>0?1:t<0?-1:0}function Ks(t,e){return qs(t.prev,t,t.next)<0?qs(t,e,t.next)>=0&&qs(t,t.prev,e)>=0:qs(t,e,t.prev)<0||qs(t,t.next,e)<0}function Qs(t,e){var i=new io(t.i,t.x,t.y),n=new io(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function to(t,e,i,n){var r=new io(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function eo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function io(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function no(t,e,i,n){for(var r=0,a=e,s=i-n;a<i;a+=n)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}function ro(t,e,i,n,r){ao(t,e,i||0,n||t.length-1,r||oo)}function ao(t,e,i,n,r){for(;n>i;){if(n-i>600){var a=n-i+1,s=e-i+1,o=Math.log(a),l=.5*Math.exp(2*o/3),h=.5*Math.sqrt(o*l*(a-l)/a)*(s-a/2<0?-1:1);ao(t,e,Math.max(i,Math.floor(e-s*l/a+h)),Math.min(n,Math.floor(e+(a-s)*l/a+h)),r)}var u=t[e],c=i,d=n;for(so(t,i,e),r(t[n],u)>0&&so(t,i,n);c<d;){for(so(t,c,d),c++,d--;r(t[c],u)<0;)c++;for(;r(t[d],u)>0;)d--}0===r(t[i],u)?so(t,i,d):so(t,++d,n),d<=e&&(i=d+1),e<=d&&(n=d-1)}}function so(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function oo(t,e){return t<e?-1:t>e?1:0}function lo(t,e){const i=t.length;if(i<=1)return[t];const n=[];let r,a;for(let e=0;e<i;e++){const i=y(t[e]);0!==i&&(t[e].area=Math.abs(i),void 0===a&&(a=i<0),a===i<0?(r&&n.push(r),r=[t[e]]):r.push(t[e]))}if(r&&n.push(r),e>1)for(let t=0;t<n.length;t++)n[t].length<=e||(ro(n[t],e,1,n[t].length-1,ho),n[t]=n[t].slice(0,e));return n}function ho(t,e){return e.area-t.area}function uo(t,e,i){const n=i.patternDependencies;let r=!1;for(const i of e){const e=i.paint.get(`${t}-pattern`);e.isConstant()||(r=!0);const a=e.constantOr(null);a&&(r=!0,n[a.to]=!0,n[a.from]=!0)}return r}function co(t,e,i,n,r){const a=r.patternDependencies;for(const s of e){const e=s.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:n-1},i,{},r.availableImages),o=e.evaluate({zoom:n},i,{},r.availableImages),l=e.evaluate({zoom:n+1},i,{},r.availableImages);t=t&&t.name?t.name:t,o=o&&o.name?o.name:o,l=l&&l.name?l.name:l,a[t]=!0,a[o]=!0,a[l]=!0,i.patterns[s.id]={min:t,mid:o,max:l}}}return i}Es.exports=Ds,Es.exports.default=Ds,Ds.deviation=function(t,e,i,n){var r=e&&e.length,a=Math.abs(no(t,0,r?e[0]*i:t.length,i));if(r)for(var s=0,o=e.length;s<o;s++)a-=Math.abs(no(t,e[s]*i,s<o-1?e[s+1]*i:t.length,i));var l=0;for(s=0;s<n.length;s+=3){var h=n[s]*i,u=n[s+1]*i,c=n[s+2]*i;l+=Math.abs((t[h]-t[c])*(t[u+1]-t[h+1])-(t[h]-t[u])*(t[c+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},Ds.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var s=0;s<e;s++)i.vertices.push(t[r][a][s]);r>0&&i.holes.push(n+=t[r-1].length)}return i};class mo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ta,this.indexArray=new ua,this.indexArray2=new ca,this.programConfigurations=new Oa(t.layers,t.zoom),this.segments=new pa,this.segments2=new pa,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=uo("fill",this.layers,e);const n=this.layers[0].layout.get("fill-sort-key"),r=!n.isConstant(),a=[];for(const{feature:s,id:o,index:l,sourceLayerIndex:h}of t){const t=this.layers[0]._featureFilter.needGeometry,u=Va(s,t);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),u,i))continue;const c=r?n.evaluate(u,{},i,e.availableImages):void 0,d={id:o,properties:s.properties,type:s.type,sourceLayerIndex:h,index:l,geometry:t?u.geometry:Ua(s),patterns:{},sortKey:c};a.push(d)}r&&a.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of a){const{geometry:r,index:a,sourceLayerIndex:s}=n;if(this.hasPattern){const t=co("fill",this.layers,n,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(n,r,a,i,{});e.featureIndex.insert(t[a].feature,r,a,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ps),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,i,n,r){for(const t of lo(e,500)){let e=0;for(const i of t)e+=i.length;const i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=i.vertexLength,r=[],a=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&a.push(r.length/2);const i=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),n=i.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(n+e.length-1,n),r.push(e[0].x),r.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(n+t-1,n+t),r.push(e[t].x),r.push(e[t].y);i.vertexLength+=e.length,i.primitiveLength+=e.length}const s=Es.exports(r,a);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(n+s[t],n+s[t+1],n+s[t+2]);i.vertexLength+=e,i.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}}Tn("FillBucket",mo,{omit:["layers","patternFeatures"]});const po=new dr({"fill-sort-key":new lr(it.layout_fill["fill-sort-key"])});var fo={paint:new dr({"fill-antialias":new or(it.paint_fill["fill-antialias"]),"fill-opacity":new lr(it.paint_fill["fill-opacity"]),"fill-color":new lr(it.paint_fill["fill-color"]),"fill-outline-color":new lr(it.paint_fill["fill-outline-color"]),"fill-translate":new or(it.paint_fill["fill-translate"]),"fill-translate-anchor":new or(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new hr(it.paint_fill["fill-pattern"])}),layout:po};const yo=_r([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),go=_r([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_o}=yo;var vo={},bo=A,Mo=xo;function xo(t,e,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(wo,this,e)}function wo(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function So(t){for(var e,i,n=0,r=0,a=t.length,s=a-1;r<a;s=r++)n+=((i=t[s]).x-(e=t[r]).x)*(e.y+i.y);return n}xo.types=["Unknown","Point","LineString","Polygon"],xo.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,r=0,a=0,s=0,o=[];t.pos<i;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)a+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&o.push(e),e=[]),e.push(new bo(a,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&o.push(e),o},xo.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,r=0,a=0,s=1/0,o=-1/0,l=1/0,h=-1/0;t.pos<e;){if(n<=0){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)(r+=t.readSVarint())<s&&(s=r),r>o&&(o=r),(a+=t.readSVarint())<l&&(l=a),a>h&&(h=a);else if(7!==i)throw new Error("unknown command "+i)}return[s,l,o,h]},xo.prototype.toGeoJSON=function(t,e,i){var n,r,a=this.extent*Math.pow(2,i),s=this.extent*t,o=this.extent*e,l=this.loadGeometry(),h=xo.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+s)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+o)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(n=0;n<l.length;n++)c[n]=l[n][0];u(l=c);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,r=[],a=0;a<e;a++){var s=So(t[a]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(i&&r.push(i),i=[t[a]]):i.push(t[a]))}return i&&r.push(i),r}(l),n=0;n<l.length;n++)for(r=0;r<l[n].length;r++)u(l[n][r])}1===l.length?l=l[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Ao=Mo,To=Co;function Co(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Io,this,e),this.length=this._features.length}function Io(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(i))}Co.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ao(this._pbf,e,this.extent,this._keys,this._values)};var ko=To;function Po(t,e,i){if(3===t){var n=new ko(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}vo.VectorTile=function(t,e){this.layers=t.readFields(Po,{},e)},vo.VectorTileFeature=Mo,vo.VectorTileLayer=To;const Eo=vo.VectorTileFeature.types,Do=Math.pow(2,13);function Lo(t,e,i,n,r,a,s,o){t.emplaceBack(e,i,2*Math.floor(n*Do)+s,r*Do*2,a*Do*2,Math.round(o))}class zo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ea,this.centroidVertexArray=new Kr,this.indexArray=new ua,this.programConfigurations=new Oa(t.layers,t.zoom),this.segments=new pa,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.features=[],this.hasPattern=uo("fill-extrusion",this.layers,e);for(const{feature:n,id:r,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,o=Va(n,t);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),o,i))continue;const l={id:r,sourceLayerIndex:s,index:a,geometry:t?o.geometry:Ua(n),properties:n.properties,type:n.type,patterns:{}};this.hasPattern?this.features.push(co("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,a,i,{}),e.featureIndex.insert(n,l.geometry,a,s,this.index,!0)}}addFeatures(t,e,i){for(const t of this.features){const{geometry:n}=t;this.addFeature(t,n,t.index,e,i)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_o),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,go.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,e,i,n,r){const a={x:0,y:0,vertexCount:0};for(const i of lo(e,500)){let e=0;for(const t of i)e+=t.length;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const t of i){if(0===t.length)continue;if(Oo(t))continue;let e=0;for(let i=0;i<t.length;i++){const r=t[i];if(i>=1){const s=t[i-1];if(!Fo(r,s)){n.vertexLength+4>pa.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=r.sub(s)._perp()._unit(),i=s.dist(r);e+i>32768&&(e=0),Lo(this.layoutVertexArray,r.x,r.y,t.x,t.y,0,0,e),Lo(this.layoutVertexArray,r.x,r.y,t.x,t.y,0,1,e),a.x+=2*r.x,a.y+=2*r.y,a.vertexCount+=2,e+=i,Lo(this.layoutVertexArray,s.x,s.y,t.x,t.y,0,0,e),Lo(this.layoutVertexArray,s.x,s.y,t.x,t.y,0,1,e),a.x+=2*s.x,a.y+=2*s.y,a.vertexCount+=2;const o=n.vertexLength;this.indexArray.emplaceBack(o,o+2,o+1),this.indexArray.emplaceBack(o+1,o+2,o+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+e>pa.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Eo[t.type])continue;const r=[],s=[],o=n.vertexLength;for(const t of i)if(0!==t.length){t!==i[0]&&s.push(r.length/2);for(let e=0;e<t.length;e++){const i=t[e];Lo(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),a.x+=i.x,a.y+=i.y,a.vertexCount+=1,r.push(i.x),r.push(i.y)}}const l=Es.exports(r,s);for(let t=0;t<l.length;t+=3)this.indexArray.emplaceBack(o+l[t],o+l[t+2],o+l[t+1]);n.primitiveLength+=l.length/3,n.vertexLength+=e}for(let t=0;t<a.vertexCount;t++)this.centroidVertexArray.emplaceBack(Math.floor(a.x/a.vertexCount),Math.floor(a.y/a.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}}function Fo(t,e){return t.x===e.x&&(t.x<0||t.x>Ba)||t.y===e.y&&(t.y<0||t.y>Ba)}function Oo(t){return t.every((t=>t.x<0))||t.every((t=>t.x>Ba))||t.every((t=>t.y<0))||t.every((t=>t.y>Ba))}Tn("FillExtrusionBucket",zo,{omit:["layers","features"]});var Ro={paint:new dr({"fill-extrusion-opacity":new or(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new lr(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new or(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new or(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hr(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new lr(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new lr(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new or(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function No(t,e){return t.x*e.x+t.y*e.y}function Bo(t,e){if(1===t.length){let i=0;const n=e[i++];let r;for(;!r||n.equals(r);)if(r=e[i++],!r)return 1/0;for(;i<e.length;i++){const a=e[i],s=t[0],o=r.sub(n),l=a.sub(n),h=s.sub(n),u=No(o,o),c=No(o,l),d=No(l,l),m=No(h,o),p=No(h,l),f=u*d-c*c,y=(d*m-c*p)/f,g=(u*p-c*m)/f,_=n.z*(1-y-g)+r.z*y+a.z*g;if(isFinite(_))return _}return 1/0}{let t=1/0;for(const i of e)t=Math.min(t,i.z);return t}}const jo=_r([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ho}=jo,Uo=_r([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Vo}=Uo,Go=vo.VectorTileFeature.types,$o=Math.cos(Math.PI/180*37.5),Zo=Math.pow(2,14)/.5;class qo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new ia,this.layoutVertexArray2=new na,this.indexArray=new ua,this.programConfigurations=new Oa(t.layers,t.zoom),this.segments=new pa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=uo("line",this.layers,e);const n=this.layers[0].layout.get("line-sort-key"),r=!n.isConstant(),a=[];for(const{feature:e,id:s,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,h=Va(e,t);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),h,i))continue;const u=r?n.evaluate(h,{},i):void 0,c={id:s,properties:e.properties,type:e.type,sourceLayerIndex:l,index:o,geometry:t?h.geometry:Ua(e),patterns:{},sortKey:u};a.push(c)}r&&a.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of a){const{geometry:r,index:a,sourceLayerIndex:s}=n;if(this.hasPattern){const t=co("line",this.layers,n,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(n,r,a,i,{});e.featureIndex.insert(t[a].feature,r,a,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Vo)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ho),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,i,n,r){const a=this.layers[0].layout,s=a.get("line-join").evaluate(t,{}),o=a.get("line-cap"),l=a.get("line-miter-limit"),h=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const i of e)this.addLine(i,t,s,o,l,h);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}addLine(t,e,i,n,r,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const s="Polygon"===Go[e.type];let o=t.length;for(;o>=2&&t[o-1].equals(t[o-2]);)o--;let l=0;for(;l<o-1&&t[l].equals(t[l+1]);)l++;if(o<(s?3:2))return;"bevel"===i&&(r=1.05);const h=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*o,this.layoutVertexArray,this.indexArray);let c,d,m,p,f;this.e1=this.e2=-1,s&&(c=t[o-2],f=t[l].sub(c)._unit()._perp());for(let e=l;e<o;e++){if(m=e===o-1?s?t[l+1]:void 0:t[e+1],m&&t[e].equals(m))continue;f&&(p=f),c&&(d=c),c=t[e],f=m?m.sub(c)._unit()._perp():p,p=p||f;let y=p.add(f);0===y.x&&0===y.y||y._unit();const g=p.x*f.x+p.y*f.y,_=y.x*f.x+y.y*f.y,v=0!==_?1/_:1/0,b=2*Math.sqrt(2-2*_),M=_<$o&&d&&m,x=p.x*f.y-p.y*f.x>0;if(M&&e>l){const t=c.dist(d);if(t>2*h){const e=c.sub(c.sub(d)._mult(h/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,p,0,0,u),d=e}}const w=d&&m;let S=w?i:s?"butt":n;if(w&&"round"===S&&(v<a?S="miter":v<=2&&(S="fakeround")),"miter"===S&&v>r&&(S="bevel"),"bevel"===S&&(v>2&&(S="flipbevel"),v<r&&(S="miter")),d&&this.updateDistance(d,c),"miter"===S)y._mult(v),this.addCurrentVertex(c,y,0,0,u);else if("flipbevel"===S){if(v>100)y=f.mult(-1);else{const t=v*p.add(f).mag()/p.sub(f).mag();y._perp()._mult(t*(x?-1:1))}this.addCurrentVertex(c,y,0,0,u),this.addCurrentVertex(c,y.mult(-1),0,0,u)}else if("bevel"===S||"fakeround"===S){const t=-Math.sqrt(v*v-1),e=x?t:0,i=x?0:t;if(d&&this.addCurrentVertex(c,p,e,i,u),"fakeround"===S){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let i=e/t;if(.5!==i){const t=i-.5;i+=i*t*(i-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*t*t+(.848013+g*(.215638*g-1.06021)))}const n=f.sub(p)._mult(i)._add(p)._unit()._mult(x?-1:1);this.addHalfVertex(c,n.x,n.y,!1,x,0,u)}}m&&this.addCurrentVertex(c,f,-e,-i,u)}else if("butt"===S)this.addCurrentVertex(c,y,0,0,u);else if("square"===S){const t=d?1:-1;this.addCurrentVertex(c,y,t,t,u)}else"round"===S&&(d&&(this.addCurrentVertex(c,p,0,0,u),this.addCurrentVertex(c,p,1,1,u,!0)),m&&(this.addCurrentVertex(c,f,-1,-1,u,!0),this.addCurrentVertex(c,f,0,0,u)));if(M&&e<o-1){const t=c.dist(m);if(t>2*h){const e=c.add(m.sub(c)._mult(h/t)._round());this.updateDistance(c,e),this.addCurrentVertex(e,f,0,0,u),c=e}}}}addCurrentVertex(t,e,i,n,r,a=!1){const s=e.y*n-e.x,o=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,a,!1,i,r),this.addHalfVertex(t,s,o,a,!0,-n,r),this.distance>Zo/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,n,r,a))}addHalfVertex({x:t,y:e},i,n,r,a,s,o){const l=.5*(this.lineClips?this.scaledDistance*(Zo-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(r?1:0),(e<<1)+(a?1:0),Math.round(63*i)+128,Math.round(63*n)+128,1+(0===s?0:s<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const h=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,h),o.primitiveLength++),a?this.e2=h:this.e1=h}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Tn("LineBucket",qo,{omit:["layers","patternFeatures"]});const Yo=new dr({"line-cap":new or(it.layout_line["line-cap"]),"line-join":new lr(it.layout_line["line-join"]),"line-miter-limit":new or(it.layout_line["line-miter-limit"]),"line-round-limit":new or(it.layout_line["line-round-limit"]),"line-sort-key":new lr(it.layout_line["line-sort-key"])});var Wo={paint:new dr({"line-opacity":new lr(it.paint_line["line-opacity"]),"line-color":new lr(it.paint_line["line-color"]),"line-translate":new or(it.paint_line["line-translate"]),"line-translate-anchor":new or(it.paint_line["line-translate-anchor"]),"line-width":new lr(it.paint_line["line-width"]),"line-gap-width":new lr(it.paint_line["line-gap-width"]),"line-offset":new lr(it.paint_line["line-offset"]),"line-blur":new lr(it.paint_line["line-blur"]),"line-dasharray":new ur(it.paint_line["line-dasharray"]),"line-pattern":new hr(it.paint_line["line-pattern"]),"line-gradient":new cr(it.paint_line["line-gradient"])}),layout:Yo};const Jo=new class extends lr{possiblyEvaluate(t,e){return e=new Kn(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,i,n){return e=o({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,i,n)}}(Wo.paint.properties["line-width"].specification);function Xo(t,e){return e>0?e+2*t:t}Jo.useIntegerZoom=!0;const Ko=_r([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qo=_r([{name:"a_projected_pos",components:3,type:"Float32"}],4);_r([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tl=_r([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);_r([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const el=_r([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),il=_r([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function nl(t,e,i){return t.sections.forEach((t=>{t.text=function(t,e,i){const n=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),Xn.applyArabicShaping&&(t=Xn.applyArabicShaping(t)),t}(t.text,e,i)})),t}_r([{name:"triangle",components:3,type:"Uint16"}]),_r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),_r([{type:"Float32",name:"offsetX"}]),_r([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const rl={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var al=24,sl=hl,ol=function(t,e,i,n,r){var a,s,o=8*r-n-1,l=(1<<o)-1,h=l>>1,u=-7,c=i?r-1:0,d=i?-1:1,m=t[e+c];for(c+=d,a=m&(1<<-u)-1,m>>=-u,u+=o;u>0;a=256*a+t[e+c],c+=d,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=n;u>0;s=256*s+t[e+c],c+=d,u-=8);if(0===a)a=1-h;else{if(a===l)return s?NaN:1/0*(m?-1:1);s+=Math.pow(2,n),a-=h}return(m?-1:1)*s*Math.pow(2,a-n)},ll=function(t,e,i,n,r,a){var s,o,l,h=8*a-r-1,u=(1<<h)-1,c=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:a-1,p=n?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(s++,l/=2),s+c>=u?(o=0,s=u):s+c>=1?(o=(e*l-1)*Math.pow(2,r),s+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;t[i+m]=255&o,m+=p,o/=256,r-=8);for(s=s<<r|o,h+=r;h>0;t[i+m]=255&s,m+=p,s/=256,h-=8);t[i+m-p]|=128*f};function hl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}hl.Varint=0,hl.Fixed64=1,hl.Bytes=2,hl.Fixed32=5;var ul,cl=4294967296,dl=1/cl,ml="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function pl(t){return t.type===hl.Bytes?t.readVarint()+t.pos:t.pos+1}function fl(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function yl(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function gl(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function _l(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function vl(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function bl(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Ml(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function xl(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function wl(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Sl(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Al(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function Tl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Cl(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Il(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function kl(t,e,i){1===t&&i.readMessage(Pl,e)}function Pl(t,e,i){if(3===t){const{id:t,bitmap:n,width:r,height:a,left:s,top:o,advance:l}=i.readMessage(El,{});e.push({id:t,bitmap:new As({width:r+6,height:a+6},n),metrics:{width:r,height:a,left:s,top:o,advance:l}})}}function El(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Dl(t){let e=0,i=0;for(const n of t)e+=n.w*n.h,i=Math.max(i,n.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let r=0,a=0;for(const e of t)for(let t=n.length-1;t>=0;t--){const i=n[t];if(!(e.w>i.w||e.h>i.h)){if(e.x=i.x,e.y=i.y,a=Math.max(a,e.y+e.h),r=Math.max(r,e.x+e.w),e.w===i.w&&e.h===i.h){const e=n.pop();t<n.length&&(n[t]=e)}else e.h===i.h?(i.x+=e.w,i.w-=e.w):e.w===i.w?(i.y+=e.h,i.h-=e.h):(n.push({x:i.x+e.w,y:i.y,w:i.w-e.w,h:e.h}),i.y+=e.h,i.h-=e.h);break}}return{w:r,h:a,fill:e/(r*a)||0}}hl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,a=this.pos;this.type=7&n,t(r,e,this),this.pos===a&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Tl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Il(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Tl(this.buf,this.pos)+Tl(this.buf,this.pos+4)*cl;return this.pos+=8,t},readSFixed64:function(){var t=Tl(this.buf,this.pos)+Il(this.buf,this.pos+4)*cl;return this.pos+=8,t},readFloat:function(){var t=ol(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=ol(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,a=i.buf;if(n=(112&(r=a[i.pos++]))>>4,r<128)return fl(t,n,e);if(n|=(127&(r=a[i.pos++]))<<3,r<128)return fl(t,n,e);if(n|=(127&(r=a[i.pos++]))<<10,r<128)return fl(t,n,e);if(n|=(127&(r=a[i.pos++]))<<17,r<128)return fl(t,n,e);if(n|=(127&(r=a[i.pos++]))<<24,r<128)return fl(t,n,e);if(n|=(1&(r=a[i.pos++]))<<31,r<128)return fl(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ml?function(t,e,i){return ml.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",r=e;r<i;){var a,s,o,l=t[r],h=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>i)break;1===u?l<128&&(h=l):2===u?128==(192&(a=t[r+1]))&&(h=(31&l)<<6|63&a)<=127&&(h=null):3===u?(s=t[r+2],128==(192&(a=t[r+1]))&&128==(192&s)&&((h=(15&l)<<12|(63&a)<<6|63&s)<=2047||h>=55296&&h<=57343)&&(h=null)):4===u&&(s=t[r+2],o=t[r+3],128==(192&(a=t[r+1]))&&128==(192&s)&&128==(192&o)&&((h=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,u=1):h>65535&&(h-=65536,n+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),n+=String.fromCharCode(h),r+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==hl.Bytes)return t.push(this.readVarint(e));var i=pl(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==hl.Bytes)return t.push(this.readSVarint());var e=pl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==hl.Bytes)return t.push(this.readBoolean());var e=pl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==hl.Bytes)return t.push(this.readFloat());var e=pl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==hl.Bytes)return t.push(this.readDouble());var e=pl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==hl.Bytes)return t.push(this.readFixed32());var e=pl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==hl.Bytes)return t.push(this.readSFixed32());var e=pl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==hl.Bytes)return t.push(this.readFixed64());var e=pl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==hl.Bytes)return t.push(this.readSFixed64());var e=pl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===hl.Varint)for(;this.buf[this.pos++]>127;);else if(e===hl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===hl.Fixed32)this.pos+=4;else{if(e!==hl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Cl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Cl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Cl(this.buf,-1&t,this.pos),Cl(this.buf,Math.floor(t*dl),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Cl(this.buf,-1&t,this.pos),Cl(this.buf,Math.floor(t*dl),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,a=0;a<e.length;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){n>56319||a+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&yl(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),ll(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),ll(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&yl(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,hl.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,gl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,_l,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Ml,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,vl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,bl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,xl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,wl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Sl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Al,e)},writeBytesField:function(t,e){this.writeTag(t,hl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,hl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,hl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,hl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,hl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,hl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,hl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,hl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,hl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,hl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Ll{constructor(t,{pixelRatio:e,version:i,stretchX:n,stretchY:r,content:a}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=n,this.stretchY=r,this.content=a,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class zl{constructor(t,e){const i={},n={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,i,r),this.addImages(e,n,r);const{w:a,h:s}=Dl(r),o=new Ts({width:a||1,height:s||1});for(const e in t){const n=t[e],r=i[e].paddedRect;Ts.copy(n.data,o,{x:0,y:0},{x:r.x+1,y:r.y+1},n.data)}for(const t in e){const i=e[t],r=n[t].paddedRect,a=r.x+1,s=r.y+1,l=i.data.width,h=i.data.height;Ts.copy(i.data,o,{x:0,y:0},{x:a,y:s},i.data),Ts.copy(i.data,o,{x:0,y:h-1},{x:a,y:s-1},{width:l,height:1}),Ts.copy(i.data,o,{x:0,y:0},{x:a,y:s+h},{width:l,height:1}),Ts.copy(i.data,o,{x:l-1,y:0},{x:a-1,y:s},{width:1,height:h}),Ts.copy(i.data,o,{x:0,y:0},{x:a+l,y:s},{width:1,height:h})}this.image=o,this.iconPositions=i,this.patternPositions=n}addImages(t,e,i){for(const n in t){const r=t[n],a={x:0,y:0,w:r.data.width+2,h:r.data.height+2};i.push(a),e[n]=new Ll(a,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)}patchUpdatedImage(t,e,i){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[n,r]=t.tl;i.update(e.data,void 0,{x:n,y:r})}}Tn("ImagePosition",Ll),Tn("ImageAtlas",zl),t.WritingMode=void 0,(ul=t.WritingMode||(t.WritingMode={}))[ul.none=0]="none",ul[ul.horizontal=1]="horizontal",ul[ul.vertical=2]="vertical",ul[ul.horizontalOnly=3]="horizontalOnly";const Fl=-17;class Ol{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const i=new Ol;return i.scale=t||1,i.fontStack=e,i}static forImage(t){const e=new Ol;return e.imageName=t,e}}class Rl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const i=new Rl;for(let n=0;n<t.sections.length;n++){const r=t.sections[n];r.image?i.addImageSection(r):i.addTextSection(r,e)}return i}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i+1)||null,r=t.charCodeAt(i-1)||null;e+=n&&On(n)&&!rl[t[i+1]]||r&&On(r)&&!rl[t[i-1]]||!rl[t[i]]?t[i]:rl[t[i]]}return e}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&Bl[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let i=this.text.length-1;i>=0&&i>=t&&Bl[this.text.charCodeAt(i)];i--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const i=new Rl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Ol.forText(t.scale,t.fontStack||e));const i=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(i)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void p("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Ol.forImage(e)),this.sectionIndex.push(this.sections.length-1)):p("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Nl(e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y){const g=Rl.fromFeature(e,a);let _;d===t.WritingMode.vertical&&g.verticalizePunctuation();const{processBidirectionalText:v,processStyledBidirectionalText:b}=Xn;if(v&&1===g.sections.length){_=[];const t=v(g.toString(),Zl(g,u,s,i,r,p,f));for(const e of t){const t=new Rl;t.text=e,t.sections=g.sections;for(let i=0;i<e.length;i++)t.sectionIndex.push(0);_.push(t)}}else if(b){_=[];const t=b(g.text,g.sectionIndex,Zl(g,u,s,i,r,p,f));for(const e of t){const t=new Rl;t.text=e[0],t.sectionIndex=e[1],t.sections=g.sections,_.push(t)}}else _=function(t,e){const i=[],n=t.text;let r=0;for(const n of e)i.push(t.substring(r,n)),r=n;return r<n.length&&i.push(t.substring(r,n.length)),i}(g,Zl(g,u,s,i,r,p,f));const M=[],x={positionedLines:M,text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(e,i,n,r,a,s,o,l,h,u,c,d){let m=0,p=Fl,f=0,y=0;const g="right"===l?1:"left"===l?0:.5;let _=0;for(const o of a){o.trim();const a=o.getMaxScale(),l=(a-1)*al,b={positionedGlyphs:[],lineOffset:0};e.positionedLines[_]=b;const M=b.positionedGlyphs;let x=0;if(!o.length()){p+=s,++_;continue}for(let s=0;s<o.length();s++){const f=o.getSection(s),y=o.getSectionIndex(s),g=o.getCharCode(s);let _=0,b=null,w=null,S=null,A=al;const T=!(h===t.WritingMode.horizontal||!c&&!Fn(g)||c&&(Bl[g]||(v=g,En.Arabic(v)||En["Arabic Supplement"](v)||En["Arabic Extended-A"](v)||En["Arabic Presentation Forms-A"](v)||En["Arabic Presentation Forms-B"](v))));if(f.imageName){const t=r[f.imageName];if(!t)continue;S=f.imageName,e.iconsInText=e.iconsInText||!0,w=t.paddedRect;const i=t.displaySize;f.scale=f.scale*al/d,b={width:i[0],height:i[1],left:1,top:-3,advance:T?i[1]:i[0]},_=l+(al-i[1]*f.scale),A=b.advance;const n=T?i[0]*f.scale-al*a:i[1]*f.scale-al*a;n>0&&n>x&&(x=n)}else{const t=n[f.fontStack],e=t&&t[g];if(e&&e.rect)w=e.rect,b=e.metrics;else{const t=i[f.fontStack],e=t&&t[g];if(!e)continue;b=e.metrics}_=(a-f.scale)*al}T?(e.verticalizable=!0,M.push({glyph:g,imageName:S,x:m,y:p+_,vertical:T,scale:f.scale,fontStack:f.fontStack,sectionIndex:y,metrics:b,rect:w}),m+=A*f.scale+u):(M.push({glyph:g,imageName:S,x:m,y:p+_,vertical:T,scale:f.scale,fontStack:f.fontStack,sectionIndex:y,metrics:b,rect:w}),m+=b.advance*f.scale+u)}0!==M.length&&(f=Math.max(m-u,f),Yl(M,0,M.length-1,g,x)),m=0;const w=s*a+x;b.lineOffset=Math.max(x,l),p+=w,y=Math.max(w,y),++_}var v;const b=p-Fl,{horizontalAlign:M,verticalAlign:x}=ql(o);(function(t,e,i,n,r,a,s,o,l){const h=(e-i)*r;let u=0;u=a!==s?-o*n-Fl:(-n*l+.5)*s;for(const e of t)for(const t of e.positionedGlyphs)t.x+=h,t.y+=u})(e.positionedLines,g,M,x,f,y,s,b,a.length),e.top+=-x*b,e.bottom=e.top+b,e.left+=-M*f,e.right=e.left+f}(x,i,n,r,_,o,l,h,d,u,m,y),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(M)&&x}const Bl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},jl={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Hl(t,e,i,n,r,a){if(e.imageName){const t=n[e.imageName];return t?t.displaySize[0]*e.scale*al/a+r:0}{const n=i[e.fontStack],a=n&&n[t];return a?a.metrics.advance*e.scale+r:0}}function Ul(t,e,i,n){const r=Math.pow(t-e,2);return n?t<e?r/2:2*r:r+Math.abs(i)*i}function Vl(t,e,i){let n=0;return 10===t&&(n-=1e4),i&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Gl(t,e,i,n,r,a){let s=null,o=Ul(e,i,r,a);for(const t of n){const n=Ul(e-t.x,i,r,a)+t.badness;n<=o&&(s=t,o=n)}return{index:t,x:e,priorBreak:s,badness:o}}function $l(t){return t?$l(t.priorBreak).concat(t.index):[]}function Zl(t,e,i,n,r,a,s){if("point"!==a)return[];if(!t)return[];const o=[],l=function(t,e,i,n,r,a){let s=0;for(let i=0;i<t.length();i++){const o=t.getSection(i);s+=Hl(t.getCharCode(i),o,n,r,e,a)}return s/Math.max(1,Math.ceil(s/i))}(t,e,i,n,r,s),h=t.text.indexOf("​")>=0;let u=0;for(let i=0;i<t.length();i++){const a=t.getSection(i),d=t.getCharCode(i);if(Bl[d]||(u+=Hl(d,a,n,r,e,s)),i<t.length()-1){const e=!((c=d)<11904||!(En["Bopomofo Extended"](c)||En.Bopomofo(c)||En["CJK Compatibility Forms"](c)||En["CJK Compatibility Ideographs"](c)||En["CJK Compatibility"](c)||En["CJK Radicals Supplement"](c)||En["CJK Strokes"](c)||En["CJK Symbols and Punctuation"](c)||En["CJK Unified Ideographs Extension A"](c)||En["CJK Unified Ideographs"](c)||En["Enclosed CJK Letters and Months"](c)||En["Halfwidth and Fullwidth Forms"](c)||En.Hiragana(c)||En["Ideographic Description Characters"](c)||En["Kangxi Radicals"](c)||En["Katakana Phonetic Extensions"](c)||En.Katakana(c)||En["Vertical Forms"](c)||En["Yi Radicals"](c)||En["Yi Syllables"](c)));(jl[d]||e||a.imageName)&&o.push(Gl(i+1,u,l,o,Vl(d,t.getCharCode(i+1),e&&h),!1))}}var c;return $l(Gl(t.length(),u,l,o,0,!0))}function ql(t){let e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function Yl(t,e,i,n,r){if(!n&&!r)return;const a=t[i],s=(t[i].x+a.metrics.advance*a.scale)*n;for(let n=e;n<=i;n++)t[n].x-=s,t[n].y+=r}function Wl(t,e,i){const{horizontalAlign:n,verticalAlign:r}=ql(i),a=e[0]-t.displaySize[0]*n,s=e[1]-t.displaySize[1]*r;return{image:t,top:s,bottom:s+t.displaySize[1],left:a,right:a+t.displaySize[0]}}function Jl(t,e,i,n,r,a){const s=t.image;let o;if(s.content){const t=s.content,e=s.pixelRatio||1;o=[t[0]/e,t[1]/e,s.displaySize[0]-t[2]/e,s.displaySize[1]-t[3]/e]}const l=e.left*a,h=e.right*a;let u,c,d,m;"width"===i||"both"===i?(m=r[0]+l-n[3],c=r[0]+h+n[1]):(m=r[0]+(l+h-s.displaySize[0])/2,c=m+s.displaySize[0]);const p=e.top*a,f=e.bottom*a;return"height"===i||"both"===i?(u=r[1]+p-n[0],d=r[1]+f+n[2]):(u=r[1]+(p+f-s.displaySize[1])/2,d=u+s.displaySize[1]),{image:s,top:u,right:c,bottom:d,left:m,collisionPadding:o}}const Xl=128;function Kl(t,e){const{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new Kn(t+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:n}=i;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let a=r;for(;a<e.length&&e[a]<t+1;)a++;a=Math.min(e.length-1,a);const s=e[r],o=e[a];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:o,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:o,minSize:i.evaluate(new Kn(s)),maxSize:i.evaluate(new Kn(o)),interpolationType:n}}}class Ql extends A{constructor(t,e,i,n){super(t,e),this.angle=i,void 0!==n&&(this.segment=n)}clone(){return new Ql(this.x,this.y,this.angle,this.segment)}}function th(t,e,i,n,r){if(void 0===e.segment)return!0;let a=e,s=e.segment+1,o=0;for(;o>-i/2;){if(s--,s<0)return!1;o-=t[s].dist(a),a=t[s]}o+=t[s].dist(t[s+1]),s++;const l=[];let h=0;for(;o<i/2;){const e=t[s],i=t[s+1];if(!i)return!1;let a=t[s-1].angleTo(e)-e.angleTo(i);for(a=Math.abs((a+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:o,angleDelta:a}),h+=a;o-l[0].distance>n;)h-=l.shift().angleDelta;if(h>r)return!1;s++,o+=e.dist(i)}return!0}function eh(t){let e=0;for(let i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function ih(t,e,i){return t?.6*e*i:0}function nh(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function rh(t,e,i,n,r,a){const s=ih(i,r,a),o=nh(i,n)*a;let l=0;const h=eh(t)/2;for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1],a=n.dist(r);if(l+a>h){const u=(h-l)/a,c=Se(n.x,r.x,u),d=Se(n.y,r.y,u),m=new Ql(c,d,r.angleTo(n),i);return m._round(),!s||th(t,m,o,s,e)?m:void 0}l+=a}}function ah(t,e,i,n,r,a,s,o,l){const h=ih(n,a,s),u=nh(n,r),c=u*s,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-c<e/4&&(e=c+e/4),sh(t,d?e/2*o%e:(u/2+2*a)*s*o%e,e,h,i,c,d,!1,l)}function sh(t,e,i,n,r,a,s,o,l){const h=a/2,u=eh(t);let c=0,d=e-i,m=[];for(let e=0;e<t.length-1;e++){const s=t[e],o=t[e+1],p=s.dist(o),f=o.angleTo(s);for(;d+i<c+p;){d+=i;const y=(d-c)/p,g=Se(s.x,o.x,y),_=Se(s.y,o.y,y);if(g>=0&&g<l&&_>=0&&_<l&&d-h>=0&&d+h<=u){const i=new Ql(g,_,f,e);i._round(),n&&!th(t,i,a,n,r)||m.push(i)}}c+=p}return o||m.length||s||(m=sh(t,c/2,i,n,r,a,s,!0,l)),m}function oh(t,e,i,n,r){const a=[];for(let s=0;s<t.length;s++){const o=t[s];let l;for(let t=0;t<o.length-1;t++){let s=o[t],h=o[t+1];s.x<e&&h.x<e||(s.x<e?s=new A(e,s.y+(e-s.x)/(h.x-s.x)*(h.y-s.y))._round():h.x<e&&(h=new A(e,s.y+(e-s.x)/(h.x-s.x)*(h.y-s.y))._round()),s.y<i&&h.y<i||(s.y<i?s=new A(s.x+(i-s.y)/(h.y-s.y)*(h.x-s.x),i)._round():h.y<i&&(h=new A(s.x+(i-s.y)/(h.y-s.y)*(h.x-s.x),i)._round()),s.x>=n&&h.x>=n||(s.x>=n?s=new A(n,s.y+(n-s.x)/(h.x-s.x)*(h.y-s.y))._round():h.x>=n&&(h=new A(n,s.y+(n-s.x)/(h.x-s.x)*(h.y-s.y))._round()),s.y>=r&&h.y>=r||(s.y>=r?s=new A(s.x+(r-s.y)/(h.y-s.y)*(h.x-s.x),r)._round():h.y>=r&&(h=new A(s.x+(r-s.y)/(h.y-s.y)*(h.x-s.x),r)._round()),l&&s.equals(l[l.length-1])||(l=[s],a.push(l)),l.push(h)))))}}return a}function lh(t,e,i,n){const r=[],a=t.image,s=a.pixelRatio,o=a.paddedRect.w-2,l=a.paddedRect.h-2,h=t.right-t.left,u=t.bottom-t.top,c=a.stretchX||[[0,o]],d=a.stretchY||[[0,l]],m=(t,e)=>t+e[1]-e[0],p=c.reduce(m,0),f=d.reduce(m,0),y=o-p,g=l-f;let _=0,v=p,b=0,M=f,x=0,w=y,S=0,T=g;if(a.content&&n){const t=a.content;_=hh(c,0,t[0]),b=hh(d,0,t[1]),v=hh(c,t[0],t[2]),M=hh(d,t[1],t[3]),x=t[0]-_,S=t[1]-b,w=t[2]-t[0]-v,T=t[3]-t[1]-M}const C=(n,r,o,l)=>{const c=ch(n.stretch-_,v,h,t.left),d=dh(n.fixed-x,w,n.stretch,p),m=ch(r.stretch-b,M,u,t.top),y=dh(r.fixed-S,T,r.stretch,f),g=ch(o.stretch-_,v,h,t.left),C=dh(o.fixed-x,w,o.stretch,p),I=ch(l.stretch-b,M,u,t.top),k=dh(l.fixed-S,T,l.stretch,f),P=new A(c,m),E=new A(g,m),D=new A(g,I),L=new A(c,I),z=new A(d/s,y/s),F=new A(C/s,k/s),O=e*Math.PI/180;if(O){const t=Math.sin(O),e=Math.cos(O),i=[e,-t,t,e];P._matMult(i),E._matMult(i),L._matMult(i),D._matMult(i)}const R=n.stretch+n.fixed,N=r.stretch+r.fixed;return{tl:P,tr:E,bl:L,br:D,tex:{x:a.paddedRect.x+1+R,y:a.paddedRect.y+1+N,w:o.stretch+o.fixed-R,h:l.stretch+l.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:F,minFontScaleX:w/s/h,minFontScaleY:T/s/u,isSDF:i}};if(n&&(a.stretchX||a.stretchY)){const t=uh(c,y,p),e=uh(d,g,f);for(let i=0;i<t.length-1;i++){const n=t[i],a=t[i+1];for(let t=0;t<e.length-1;t++)r.push(C(n,e[t],a,e[t+1]))}}else r.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:o+1},{fixed:0,stretch:l+1}));return r}function hh(t,e,i){let n=0;for(const r of t)n+=Math.max(e,Math.min(i,r[1]))-Math.max(e,Math.min(i,r[0]));return n}function uh(t,e,i){const n=[{fixed:-1,stretch:0}];for(const[e,i]of t){const t=n[n.length-1];n.push({fixed:e-t.stretch,stretch:t.stretch}),n.push({fixed:e-t.stretch,stretch:t.stretch+(i-e)})}return n.push({fixed:e+1,stretch:i}),n}function ch(t,e,i,n){return t/e*i+n}function dh(t,e,i,n){return t-e*i/n}Tn("Anchor",Ql);class mh{constructor(t,e,i,n,r,a,s,o,l,h){if(this.boxStartIndex=t.length,l){let t=a.top,e=a.bottom;const i=a.collisionPadding;i&&(t-=i[1],e+=i[3]);let n=e-t;n>0&&(n=Math.max(10,n),this.circleDiameter=n)}else{let l=a.top*s-o[0],u=a.bottom*s+o[2],c=a.left*s-o[3],d=a.right*s+o[1];const m=a.collisionPadding;if(m&&(c-=m[0]*s,l-=m[1]*s,d+=m[2]*s,u+=m[3]*s),h){const t=new A(c,l),e=new A(d,l),i=new A(c,u),n=new A(d,u),r=h*Math.PI/180;t._rotate(r),e._rotate(r),i._rotate(r),n._rotate(r),c=Math.min(t.x,e.x,i.x,n.x),d=Math.max(t.x,e.x,i.x,n.x),l=Math.min(t.y,e.y,i.y,n.y),u=Math.max(t.y,e.y,i.y,n.y)}t.emplaceBack(e.x,e.y,c,l,d,u,i,n,r)}this.boxEndIndex=t.length}}class ph{constructor(t=[],e=fh){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,n=e[t];for(;t>0;){const r=t-1>>1,a=e[r];if(i(n,a)>=0)break;e[t]=a,t=r}e[t]=n}_down(t){const{data:e,compare:i}=this,n=this.length>>1,r=e[t];for(;t<n;){let n=1+(t<<1),a=e[n];const s=n+1;if(s<this.length&&i(e[s],a)<0&&(n=s,a=e[s]),i(a,r)>=0)break;e[t]=a,t=n}e[t]=r}}function fh(t,e){return t<e?-1:t>e?1:0}function yh(t,e=1,i=!1){let n=1/0,r=1/0,a=-1/0,s=-1/0;const o=t[0];for(let t=0;t<o.length;t++){const e=o[t];(!t||e.x<n)&&(n=e.x),(!t||e.y<r)&&(r=e.y),(!t||e.x>a)&&(a=e.x),(!t||e.y>s)&&(s=e.y)}const l=Math.min(a-n,s-r);let h=l/2;const u=new ph([],gh);if(0===l)return new A(n,r);for(let e=n;e<a;e+=l)for(let i=r;i<s;i+=l)u.push(new _h(e+h,i+h,h,t));let c=function(t){let e=0,i=0,n=0;const r=t[0];for(let t=0,a=r.length,s=a-1;t<a;s=t++){const a=r[t],o=r[s],l=a.x*o.y-o.x*a.y;i+=(a.x+o.x)*l,n+=(a.y+o.y)*l,e+=3*l}return new _h(i/e,n/e,0,t)}(t),d=u.length;for(;u.length;){const n=u.pop();(n.d>c.d||!c.d)&&(c=n,i&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,d)),n.max-c.d<=e||(h=n.h/2,u.push(new _h(n.p.x-h,n.p.y-h,h,t)),u.push(new _h(n.p.x+h,n.p.y-h,h,t)),u.push(new _h(n.p.x-h,n.p.y+h,h,t)),u.push(new _h(n.p.x+h,n.p.y+h,h,t)),d+=4)}return i&&(console.log(`num probes: ${d}`),console.log(`best distance: ${c.d}`)),c.p}function gh(t,e){return e.max-t.max}function _h(t,e,i,n){this.p=new A(t,e),this.h=i,this.d=function(t,e){let i=!1,n=1/0;for(let r=0;r<e.length;r++){const a=e[r];for(let e=0,r=a.length,s=r-1;e<r;s=e++){const r=a[e],o=a[s];r.y>t.y!=o.y>t.y&&t.x<(o.x-r.x)*(t.y-r.y)/(o.y-r.y)+r.x&&(i=!i),n=Math.min(n,Qa(t,r,o))}}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const vh=Number.POSITIVE_INFINITY;function bh(t,e){return e[1]!==vh?function(t,e,i){let n=0,r=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":r=i-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-i}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,r]}(t,e[0],e[1]):function(t,e){let i=0,n=0;e<0&&(e=0);const r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=r-7;break;case"bottom-right":case"bottom-left":n=7-r;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":i=-r;break;case"top-left":case"bottom-left":i=r;break;case"left":i=e;break;case"right":i=-e}return[i,n]}(t,e[0])}function Mh(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xh(e,i,n,r,a,s,o,l,h,u,c){let d=s.textMaxSize.evaluate(i,{});void 0===d&&(d=o);const m=e.layers[0].layout,f=m.get("icon-offset").evaluate(i,{},c),y=Ah(n.horizontal),g=o/24,_=e.tilePixelRatio*g,v=e.tilePixelRatio*d/24,b=e.tilePixelRatio*l,M=e.tilePixelRatio*m.get("symbol-spacing"),x=m.get("text-padding")*e.tilePixelRatio,w=function(t,e,i,n=1){const r=t.get("icon-padding").evaluate(e,{},i),a=r&&r.values;return[a[0]*n,a[1]*n,a[2]*n,a[3]*n]}(m,i,c,e.tilePixelRatio),S=m.get("text-max-angle")/180*Math.PI,A="viewport"!==m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),T="map"===m.get("icon-rotation-alignment")&&"point"!==m.get("symbol-placement"),C=m.get("symbol-placement"),I=M/2,k=m.get("icon-text-fit");let P;r&&"none"!==k&&(e.allowVerticalPlacement&&n.vertical&&(P=Jl(r,n.vertical,k,m.get("icon-text-fit-padding"),f,g)),y&&(r=Jl(r,y,k,m.get("icon-text-fit-padding"),f,g)));const E=(l,d)=>{d.x<0||d.x>=Ba||d.y<0||d.y>=Ba||function(e,i,n,r,a,s,o,l,h,u,c,d,m,f,y,g,_,v,b,M,x,w,S,A,T){const C=e.addToLineVertexArray(i,n);let I,k,P,E,D=0,L=0,z=0,F=0,O=-1,R=-1;const N={};let B=ga.exports(""),j=0,H=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[j,H]=l.layout.get("text-offset").evaluate(x,{},A).map((t=>t*al)):(j=l.layout.get("text-radial-offset").evaluate(x,{},A)*al,H=vh),e.allowVerticalPlacement&&r.vertical){const t=l.layout.get("text-rotate").evaluate(x,{},A)+90;P=new mh(h,i,u,c,d,r.vertical,m,f,y,t),o&&(E=new mh(h,i,u,c,d,o,_,v,y,t))}if(a){const n=l.layout.get("icon-rotate").evaluate(x,{}),r="none"!==l.layout.get("icon-text-fit"),s=lh(a,n,S,r),m=o?lh(o,n,S,r):void 0;k=new mh(h,i,u,c,d,a,_,v,!1,n),D=4*s.length;const f=e.iconSizeData;let y=null;"source"===f.kind?(y=[Xl*l.layout.get("icon-size").evaluate(x,{})],y[0]>wh&&p(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===f.kind&&(y=[Xl*w.compositeIconSizes[0].evaluate(x,{},A),Xl*w.compositeIconSizes[1].evaluate(x,{},A)],(y[0]>wh||y[1]>wh)&&p(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,s,y,M,b,x,t.WritingMode.none,i,C.lineStartIndex,C.lineLength,-1,A),O=e.icon.placedSymbolArray.length-1,m&&(L=4*m.length,e.addSymbols(e.icon,m,y,M,b,x,t.WritingMode.vertical,i,C.lineStartIndex,C.lineLength,-1,A),R=e.icon.placedSymbolArray.length-1)}const U=Object.keys(r.horizontal);for(const n of U){const a=r.horizontal[n];if(!I){B=ga.exports(a.text);const t=l.layout.get("text-rotate").evaluate(x,{},A);I=new mh(h,i,u,c,d,a,m,f,y,t)}const o=1===a.positionedLines.length;if(z+=Sh(e,i,a,s,l,y,x,g,C,r.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,o?U:[n],N,O,w,A),o)break}r.vertical&&(F+=Sh(e,i,r.vertical,s,l,y,x,g,C,t.WritingMode.vertical,["vertical"],N,R,w,A));const V=I?I.boxStartIndex:e.collisionBoxArray.length,G=I?I.boxEndIndex:e.collisionBoxArray.length,$=P?P.boxStartIndex:e.collisionBoxArray.length,Z=P?P.boxEndIndex:e.collisionBoxArray.length,q=k?k.boxStartIndex:e.collisionBoxArray.length,Y=k?k.boxEndIndex:e.collisionBoxArray.length,W=E?E.boxStartIndex:e.collisionBoxArray.length,J=E?E.boxEndIndex:e.collisionBoxArray.length;let X=-1;const K=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;X=K(I,X),X=K(P,X),X=K(k,X),X=K(E,X);const Q=X>-1?1:0;Q&&(X*=T/al),e.glyphOffsetArray.length>=zh.MAX_GLYPHS&&p("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey),e.symbolInstances.emplaceBack(i.x,i.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical||-1,O,R,B,V,G,$,Z,q,Y,W,J,u,z,F,D,L,Q,0,m,j,H,X)}(e,d,l,n,r,a,P,e.layers[0],e.collisionBoxArray,i.index,i.sourceLayerIndex,e.index,_,[x,x,x,x],A,h,b,w,T,f,i,s,u,c,o)};if("line"===C)for(const t of oh(i.geometry,0,0,Ba,Ba)){const i=ah(t,M,S,n.vertical||y,r,24,v,e.overscaling,Ba);for(const n of i)y&&Th(e,y.text,I,n)||E(t,n)}else if("line-center"===C){for(const t of i.geometry)if(t.length>1){const e=rh(t,S,n.vertical||y,r,24,v);e&&E(t,e)}}else if("Polygon"===i.type)for(const t of lo(i.geometry,0)){const e=yh(t,16);E(t[0],new Ql(e.x,e.y,0))}else if("LineString"===i.type)for(const t of i.geometry)E(t,new Ql(t[0].x,t[0].y,0));else if("Point"===i.type)for(const t of i.geometry)for(const e of t)E([e],new Ql(e.x,e.y,0))}const wh=32640;function Sh(t,e,i,n,r,a,s,o,l,h,u,c,d,m,f){const y=function(t,e,i,n,r,a,s,o){const l=n.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,h=[];for(const t of e.positionedLines)for(const n of t.positionedGlyphs){if(!n.rect)continue;const a=n.rect||{};let u=4,c=!0,d=1,m=0;const p=(r||o)&&n.vertical,f=n.metrics.advance*n.scale/2;if(o&&e.verticalizable){const e=(n.scale-1)*al,i=(al-n.metrics.width*n.scale)/2;m=t.lineOffset/2-(n.imageName?-i:e)}if(n.imageName){const t=s[n.imageName];c=t.sdf,d=t.pixelRatio,u=1/d}const y=r?[n.x+f,n.y]:[0,0];let g=r?[0,0]:[n.x+f+i[0],n.y+i[1]-m],_=[0,0];p&&(_=g,g=[0,0]);const v=(n.metrics.left-u)*n.scale-f+g[0],b=(-n.metrics.top-u)*n.scale+g[1],M=v+a.w*n.scale/d,x=b+a.h*n.scale/d,w=new A(v,b),S=new A(M,b),T=new A(v,x),C=new A(M,x);if(p){const t=new A(-f,f-Fl),e=-Math.PI/2,i=12-f,r=new A(22-i,-(n.imageName?i:0)),a=new A(..._);w._rotateAround(e,t)._add(r)._add(a),S._rotateAround(e,t)._add(r)._add(a),T._rotateAround(e,t)._add(r)._add(a),C._rotateAround(e,t)._add(r)._add(a)}if(l){const t=Math.sin(l),e=Math.cos(l),i=[e,-t,t,e];w._matMult(i),S._matMult(i),T._matMult(i),C._matMult(i)}const I=new A(0,0),k=new A(0,0);h.push({tl:w,tr:S,bl:T,br:C,tex:a,writingMode:e.writingMode,glyphOffset:y,sectionIndex:n.sectionIndex,isSDF:c,pixelOffsetTL:I,pixelOffsetBR:k,minFontScaleX:0,minFontScaleY:0})}return h}(0,i,o,r,a,s,n,t.allowVerticalPlacement),g=t.textSizeData;let _=null;"source"===g.kind?(_=[Xl*r.layout.get("text-size").evaluate(s,{})],_[0]>wh&&p(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===g.kind&&(_=[Xl*m.compositeTextSizes[0].evaluate(s,{},f),Xl*m.compositeTextSizes[1].evaluate(s,{},f)],(_[0]>wh||_[1]>wh)&&p(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,y,_,o,a,s,h,e,l.lineStartIndex,l.lineLength,d,f);for(const e of u)c[e]=t.text.placedSymbolArray.length-1;return 4*y.length}function Ah(t){for(const e in t)return t[e];return null}function Th(t,e,i,n){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(n.dist(t[e])<i)return!0}else r[e]=[];return r[e].push(n),!1}const Ch=vo.VectorTileFeature.types,Ih=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function kh(t,e,i,n,r,a,s,o,l,h,u,c,d){const m=o?Math.min(wh,Math.round(o[0])):0,p=o?Math.min(wh,Math.round(o[1])):0;t.emplaceBack(e,i,Math.round(32*n),Math.round(32*r),a,s,(m<<1)+(l?1:0),p,16*h,16*u,256*c,256*d)}function Ph(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function Eh(t){for(const e of t.sections)if(Bn(e.text))return!0;return!1}class Dh{constructor(t){this.layoutVertexArray=new aa,this.indexArray=new ua,this.programConfigurations=t,this.segments=new pa,this.dynamicLayoutVertexArray=new sa,this.opacityVertexArray=new oa,this.placedSymbolArray=new $r}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,i,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ko.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Qo.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Ih,!0),this.opacityVertexBuffer.itemSize=1),(i||n)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Tn("SymbolBuffers",Dh);class Lh{constructor(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new pa,this.collisionVertexArray=new ha}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,tl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Tn("CollisionBuffers",Lh);class zh{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cs([]),this.placementViewportMatrix=cs([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Kl(this.zoom,i["text-size"]),this.iconSizeData=Kl(this.zoom,i["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),a=n.get("symbol-z-order");this.canOverlap="never"!==Bh(n,"text-overlap","text-allow-overlap")||"never"!==Bh(n,"icon-overlap","icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&!r.isConstant(),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((e=>t.WritingMode[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Dh(new Oa(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Dh(new Oa(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Yr,this.lineVertexArray=new Wr,this.symbolInstances=new qr}calculateGlyphDependencies(t,e,i,n,r){for(let a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(i||n)&&r){const i=rl[t.charAt(a)];i&&(e[i.charCodeAt(0)]=!0)}}populate(e,i,n){const r=this.layers[0],a=r.layout,s=a.get("text-font"),o=a.get("text-field"),l=a.get("icon-image"),h=("constant"!==o.value.kind||o.value.value instanceof Ot&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,c=a.get("symbol-sort-key");if(this.features=[],!h&&!u)return;const d=i.iconDependencies,m=i.glyphDependencies,p=i.availableImages,f=new Kn(this.zoom);for(const{feature:i,id:o,index:l,sourceLayerIndex:y}of e){const e=r._featureFilter.needGeometry,g=Va(i,e);if(!r._featureFilter.filter(f,g,n))continue;let _,v;if(e||(g.geometry=Ua(i)),h){const t=r.getValueAndResolveTokens("text-field",g,n,p),e=Ot.factory(t);Eh(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Wn()||this.hasRTLText&&Xn.isParsed())&&(_=nl(e,r,g))}if(u){const t=r.getValueAndResolveTokens("icon-image",g,n,p);v=t instanceof Nt?t:Nt.fromString(t)}if(!_&&!v)continue;const b=this.sortFeaturesByKey?c.evaluate(g,{},n):void 0;if(this.features.push({id:o,text:_,icon:v,index:l,sourceLayerIndex:y,geometry:g.geometry,properties:i.properties,type:Ch[i.type],sortKey:b}),v&&(d[v.name]=!0),_){const e=s.evaluate(g,{},n).join(","),i="viewport"!==a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.WritingMode.vertical)>=0;for(const t of _.sections)if(t.image)d[t.image.name]=!0;else{const n=Dn(_.toString()),r=t.fontStack||e,a=m[r]=m[r]||{};this.calculateGlyphDependencies(t.text,a,i,this.allowVerticalPlacement,n)}}}"line"===a.get("symbol-placement")&&(this.features=function(t){const e={},i={},n=[];let r=0;function a(e){n.push(t[e]),r++}function s(t,e,r){const a=i[t];return delete i[t],i[e]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(r[0]),a}function o(t,i,r){const a=e[i];return delete e[i],e[t]=a,n[a].geometry[0].shift(),n[a].geometry[0]=r[0].concat(n[a].geometry[0]),a}function l(t,e,i){const n=i?e[0][e[0].length-1]:e[0][0];return`${t}:${n.x}:${n.y}`}for(let h=0;h<t.length;h++){const u=t[h],c=u.geometry,d=u.text?u.text.toString():null;if(!d){a(h);continue}const m=l(d,c),p=l(d,c,!0);if(m in i&&p in e&&i[m]!==e[p]){const t=o(m,p,c),r=s(m,p,n[t].geometry);delete e[m],delete i[p],i[l(d,n[r].geometry,!0)]=r,n[t].geometry=null}else m in i?s(m,p,c):p in e?o(m,p,c):(a(h),e[m]=r-1,i[p]=r-1)}return n.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const i=this.lineVertexArray.length;if(void 0!==t.segment){let i=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]);const r={};for(let n=t.segment+1;n<e.length;n++)r[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:i},n<e.length-1&&(i+=e[n+1].dist(e[n]));for(let i=t.segment||0;i>=0;i--)r[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:n},i>0&&(n+=e[i-1].dist(e[i]));for(let t=0;t<e.length;t++){const e=r[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,i,n,r,a,s,o,l,h,u,c,d){const m=e.indexArray,p=e.layoutVertexArray,f=e.segments.prepareSegment(4*i.length,p,m,this.canOverlap?s.sortKey:void 0),y=this.glyphOffsetArray.length,g=f.vertexLength,_=this.allowVerticalPlacement&&o===t.WritingMode.vertical?Math.PI/2:0,v=s.text&&s.text.sections;for(let t=0;t<i.length;t++){const{tl:r,tr:a,bl:o,br:h,tex:u,pixelOffsetTL:c,pixelOffsetBR:y,minFontScaleX:g,minFontScaleY:b,glyphOffset:M,isSDF:x,sectionIndex:w}=i[t],S=f.vertexLength,A=M[1];kh(p,l.x,l.y,r.x,A+r.y,u.x,u.y,n,x,c.x,c.y,g,b),kh(p,l.x,l.y,a.x,A+a.y,u.x+u.w,u.y,n,x,y.x,c.y,g,b),kh(p,l.x,l.y,o.x,A+o.y,u.x,u.y+u.h,n,x,c.x,y.y,g,b),kh(p,l.x,l.y,h.x,A+h.y,u.x+u.w,u.y+u.h,n,x,y.x,y.y,g,b),Ph(e.dynamicLayoutVertexArray,l,_),m.emplaceBack(S,S+1,S+2),m.emplaceBack(S+1,S+2,S+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),t!==i.length-1&&w===i[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(p.length,s,s.index,{},d,v&&v[w])}e.placedSymbolArray.emplaceBack(l.x,l.y,y,this.glyphOffsetArray.length-y,g,h,u,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],o,0,!1,0,c)}_addCollisionDebugVertex(t,e,i,n,r,a){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,n,r,Math.round(a.x),Math.round(a.y))}addCollisionDebugVertices(t,e,i,n,r,a,s){const o=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=o.vertexLength,h=r.layoutVertexArray,u=r.collisionVertexArray,c=s.anchorX,d=s.anchorY;this._addCollisionDebugVertex(h,u,a,c,d,new A(t,e)),this._addCollisionDebugVertex(h,u,a,c,d,new A(i,e)),this._addCollisionDebugVertex(h,u,a,c,d,new A(i,n)),this._addCollisionDebugVertex(h,u,a,c,d,new A(t,n)),o.vertexLength+=4;const m=r.indexArray;m.emplaceBack(l,l+1),m.emplaceBack(l+1,l+2),m.emplaceBack(l+2,l+3),m.emplaceBack(l+3,l),o.primitiveLength+=4}addDebugCollisionBoxes(t,e,i,n){for(let r=t;r<e;r++){const t=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,n?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,i)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lh(la,el.members,ca),this.iconCollisionBox=new Lh(la,el.members,ca);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,i,n,r,a,s,o,l){const h={};for(let n=e;n<i;n++){const e=t.get(n);h.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},h.textFeatureIndex=e.featureIndex;break}for(let e=n;e<r;e++){const i=t.get(e);h.verticalTextBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.verticalTextFeatureIndex=i.featureIndex;break}for(let e=a;e<s;e++){const i=t.get(e);h.iconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.iconFeatureIndex=i.featureIndex;break}for(let e=o;e<l;e++){const i=t.get(e);h.verticalIconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.verticalIconFeatureIndex=i.featureIndex;break}return h}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const i=t.placedSymbolArray.get(e),n=i.vertexStartIndex+4*i.numGlyphs;for(let e=i.vertexStartIndex;e<n;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),i=Math.cos(t),n=[],r=[],a=[];for(let t=0;t<this.symbolInstances.length;++t){a.push(t);const s=this.symbolInstances.get(t);n.push(0|Math.round(e*s.anchorX+i*s.anchorY)),r.push(s.featureIndex)}return a.sort(((t,e)=>n[t]-n[e]||r[e]-r[t])),a}addToSortKeyRanges(t,e){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,i)=>{t>=0&&i.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Tn("SymbolBucket",zh,{omit:["layers","collisionBoxArray","features","compareText"]}),zh.MAX_GLYPHS=65535,zh.addDynamicAttributes=Ph;const Fh=new dr({"symbol-placement":new or(it.layout_symbol["symbol-placement"]),"symbol-spacing":new or(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new or(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new lr(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new or(it.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new or(it.layout_symbol["icon-allow-overlap"]),"icon-overlap":new or(it.layout_symbol["icon-overlap"]),"icon-ignore-placement":new or(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new or(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new or(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new lr(it.layout_symbol["icon-size"]),"icon-text-fit":new or(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new or(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new lr(it.layout_symbol["icon-image"]),"icon-rotate":new lr(it.layout_symbol["icon-rotate"]),"icon-padding":new lr(it.layout_symbol["icon-padding"]),"icon-keep-upright":new or(it.layout_symbol["icon-keep-upright"]),"icon-offset":new lr(it.layout_symbol["icon-offset"]),"icon-anchor":new lr(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new or(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new or(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new or(it.layout_symbol["text-rotation-alignment"]),"text-field":new lr(it.layout_symbol["text-field"]),"text-font":new lr(it.layout_symbol["text-font"]),"text-size":new lr(it.layout_symbol["text-size"]),"text-max-width":new lr(it.layout_symbol["text-max-width"]),"text-line-height":new or(it.layout_symbol["text-line-height"]),"text-letter-spacing":new lr(it.layout_symbol["text-letter-spacing"]),"text-justify":new lr(it.layout_symbol["text-justify"]),"text-radial-offset":new lr(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new or(it.layout_symbol["text-variable-anchor"]),"text-anchor":new lr(it.layout_symbol["text-anchor"]),"text-max-angle":new or(it.layout_symbol["text-max-angle"]),"text-writing-mode":new or(it.layout_symbol["text-writing-mode"]),"text-rotate":new lr(it.layout_symbol["text-rotate"]),"text-padding":new or(it.layout_symbol["text-padding"]),"text-keep-upright":new or(it.layout_symbol["text-keep-upright"]),"text-transform":new lr(it.layout_symbol["text-transform"]),"text-offset":new lr(it.layout_symbol["text-offset"]),"text-allow-overlap":new or(it.layout_symbol["text-allow-overlap"]),"text-overlap":new or(it.layout_symbol["text-overlap"]),"text-ignore-placement":new or(it.layout_symbol["text-ignore-placement"]),"text-optional":new or(it.layout_symbol["text-optional"])});var Oh={paint:new dr({"icon-opacity":new lr(it.paint_symbol["icon-opacity"]),"icon-color":new lr(it.paint_symbol["icon-color"]),"icon-halo-color":new lr(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new lr(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new lr(it.paint_symbol["icon-halo-blur"]),"icon-translate":new or(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new or(it.paint_symbol["icon-translate-anchor"]),"text-opacity":new lr(it.paint_symbol["text-opacity"]),"text-color":new lr(it.paint_symbol["text-color"],{runtimeType:pt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new lr(it.paint_symbol["text-halo-color"]),"text-halo-width":new lr(it.paint_symbol["text-halo-width"]),"text-halo-blur":new lr(it.paint_symbol["text-halo-blur"]),"text-translate":new or(it.paint_symbol["text-translate"]),"text-translate-anchor":new or(it.paint_symbol["text-translate-anchor"])}),layout:Fh};class Rh{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ut,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tn("FormatSectionOverride",Rh,{omit:["defaultValue"]});class Nh extends pr{constructor(t){super(t,Oh)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const i of t)e.indexOf(i)<0&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,i,n){const r=this.layout.get(t).evaluate(e,{},i,n),a=this._unevaluatedLayout._values[t];return a.isDataDriven()||Di(a.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,i)=>i in t?String(t[i]):""))}(e.properties,r)}createBucket(t){return new zh(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Oh.paint.overridableProperties){if(!Nh.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),i=new Rh(e),n=new Ei(i,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new zi("source",n):new Fi("composite",n,e.value.zoomStops),this.paint._values[t]=new ar(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&Nh.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const i=t.get("text-field"),n=Oh.paint.properties[e];let r=!1;const a=t=>{for(const e of t)if(n.overrides&&n.overrides.hasOverride(e))return void(r=!0)};if("constant"===i.value.kind&&i.value.value instanceof Ot)a(i.value.value.sections);else if("source"===i.value.kind){const t=e=>{r||(e instanceof Vt&&Ht(e.value)===_t?a(e.value.sections):e instanceof hi?a(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return r}}function Bh(t,e,i){let n="never";const r=t.get(e);return r?n=r:t.get(i)&&(n="always"),n}var jh={paint:new dr({"background-color":new or(it.paint_background["background-color"]),"background-pattern":new ur(it.paint_background["background-pattern"]),"background-opacity":new or(it.paint_background["background-opacity"])})},Hh={paint:new dr({"raster-opacity":new or(it.paint_raster["raster-opacity"]),"raster-hue-rotate":new or(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new or(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new or(it.paint_raster["raster-brightness-max"]),"raster-saturation":new or(it.paint_raster["raster-saturation"]),"raster-contrast":new or(it.paint_raster["raster-contrast"]),"raster-resampling":new or(it.paint_raster["raster-resampling"]),"raster-fade-duration":new or(it.paint_raster["raster-fade-duration"])})};class Uh extends pr{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Vh={circle:class extends pr{constructor(t){super(t,os)}createBucket(t){return new $a(t)}queryRadius(t){const e=t;return ns("circle-radius",this,e)+ns("circle-stroke-width",this,e)+rs(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,i,n,r,a,s,o){const l=as(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,s),h=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),u="map"===this.paint.get("circle-pitch-alignment"),c=u?l:function(t,e){return t.map((t=>vs(t,e)))}(l,o),d=u?h*s:h;for(const t of n)for(const e of t){const t=u?e:vs(e,o);let i=d;const n=gs([],[e.x,e.y,0,1],o);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?i*=n[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(i*=a.cameraToCenterDistance/n[3]),qa(c,t,i))return!0}return!1}},heatmap:class extends pr{constructor(t){super(t,Ms),this._updateColorRamp()}createBucket(t){return new bs(t)}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cs({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends pr{constructor(t){super(t,Is)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends pr{constructor(t){super(t,fo)}recalculate(t,e){super.recalculate(t,e);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new mo(t)}queryRadius(){return rs(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,i,n,r,a,s){return Ya(as(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,s),n)}isTileClipped(){return!0}},"fill-extrusion":class extends pr{constructor(t){super(t,Ro)}createBucket(t){return new zo(t)}queryRadius(){return rs(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,i,n,r,a,s,o){const l=as(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),h=this.paint.get("fill-extrusion-height").evaluate(e,i),u=this.paint.get("fill-extrusion-base").evaluate(e,i),c=function(t,e){const i=[];for(const n of t){const t=[n.x,n.y,0,1];gs(t,t,e),i.push(new A(t[0]/t[3],t[1]/t[3]))}return i}(l,o),d=function(t,e,i,n){const r=[],a=[],s=n[8]*e,o=n[9]*e,l=n[10]*e,h=n[11]*e,u=n[8]*i,c=n[9]*i,d=n[10]*i,m=n[11]*i;for(const e of t){const t=[],i=[];for(const r of e){const e=r.x,a=r.y,p=n[0]*e+n[4]*a+n[12],f=n[1]*e+n[5]*a+n[13],y=n[2]*e+n[6]*a+n[14],g=n[3]*e+n[7]*a+n[15],_=y+l,v=g+h,b=p+u,M=f+c,x=y+d,w=g+m,S=new A((p+s)/v,(f+o)/v);S.z=_/v,t.push(S);const T=new A(b/w,M/w);T.z=x/w,i.push(T)}r.push(t),a.push(i)}return[r,a]}(n,u,h,o);return function(t,e,i){let n=1/0;Ya(i,e)&&(n=Bo(i,e[0]));for(let r=0;r<e.length;r++){const a=e[r],s=t[r];for(let t=0;t<a.length-1;t++){const e=a[t],r=[e,a[t+1],s[t+1],s[t],e];Za(i,r)&&(n=Math.min(n,Bo(i,r)))}}return n!==1/0&&n}(d[0],d[1],c)}},line:class extends pr{constructor(t){super(t,Wo),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof we,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Jo.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new qo(t)}queryRadius(t){const e=t,i=Xo(ns("line-width",this,e),ns("line-gap-width",this,e)),n=ns("line-offset",this,e);return i/2+Math.abs(n)+rs(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,i,n,r,a,s){const o=as(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*Xo(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),h=this.paint.get("line-offset").evaluate(e,i);return h&&(n=function(t,e){const i=[];for(let n=0;n<t.length;n++){const r=t[n],a=[];for(let t=0;t<r.length;t++){const i=r[t-1],n=r[t],s=r[t+1],o=0===t?new A(0,0):n.sub(i)._unit()._perp(),l=t===r.length-1?new A(0,0):s.sub(n)._unit()._perp(),h=o._add(l)._unit(),u=h.x*l.x+h.y*l.y;0!==u&&h._mult(1/u),a.push(h._mult(e)._add(n))}i.push(a)}return i}(n,h*s)),function(t,e,i){for(let n=0;n<e.length;n++){const r=e[n];if(t.length>=3)for(let e=0;e<r.length;e++)if(es(t,r[e]))return!0;if(Wa(t,r,i))return!0}return!1}(o,n,l)}isTileClipped(){return!0}},symbol:Nh,background:class extends pr{constructor(t){super(t,jh)}},raster:class extends pr{constructor(t){super(t,Hh)}}};class Gh{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const $h=6371008.8;class Zh{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Zh(s(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,i=this.lat*e,n=t.lat*e,r=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return $h*Math.acos(Math.min(r,1))}toBounds(t=0){const e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new qh(new Zh(this.lng-i,this.lat-e),new Zh(this.lng+i,this.lat+e))}static convert(t){if(t instanceof Zh)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Zh(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Zh(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class qh{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Zh?new Zh(t.lng,t.lat):Zh.convert(t),this}setSouthWest(t){return this._sw=t instanceof Zh?new Zh(t.lng,t.lat):Zh.convert(t),this}extend(t){const e=this._sw,i=this._ne;let n,r;if(t instanceof Zh)n=t,r=t;else{if(!(t instanceof qh))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(qh.convert(t)):this.extend(Zh.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return e||i?(e.lng=Math.min(n.lng,e.lng),e.lat=Math.min(n.lat,e.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new Zh(n.lng,n.lat),this._ne=new Zh(r.lng,r.lat)),this}getCenter(){return new Zh((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Zh(this.getWest(),this.getNorth())}getSouthEast(){return new Zh(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:i}=Zh.convert(t);let n=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&n}static convert(t){return t instanceof qh?t:t?new qh(t):t}}const Yh=2*Math.PI*$h;function Wh(t){return Yh*Math.cos(t*Math.PI/180)}function Jh(t){return(180+t)/360}function Xh(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Kh(t,e){return t/Wh(e)}function Qh(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class tu{constructor(t,e,i=0){this.x=+t,this.y=+e,this.z=+i}static fromLngLat(t,e=0){const i=Zh.convert(t);return new tu(Jh(i.lng),Xh(i.lat),Kh(e,i.lat))}toLngLat(){return new Zh(360*this.x-180,Qh(this.y))}toAltitude(){return this.z*Wh(Qh(this.y))}meterInMercatorCoordinateUnits(){return 1/Yh*(t=Qh(this.y),1/Math.cos(t*Math.PI/180));var t}}function eu(t,e,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class iu{constructor(t,e,i){if(t<0||t>25||i<0||i>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))throw new Error(`x=${e}, y=${i}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=e,this.y=i,this.key=au(0,t,t,e,i)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,i){const n=(a=this.y,s=this.z,o=eu(256*(r=this.x),256*(a=Math.pow(2,s)-a-1),s),l=eu(256*(r+1),256*(a+1),s),o[0]+","+o[1]+","+l[0]+","+l[1]);var r,a,s,o,l;const h=function(t,e,i){let n,r="";for(let a=t;a>0;a--)n=1<<a-1,r+=(e&n?1:0)+(i&n?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,h).replace(/{bbox-epsg-3857}/g,n)}isChildOf(t){const e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}getTilePoint(t){const e=Math.pow(2,this.z);return new A((t.x*e-this.x)*Ba,(t.y*e-this.y)*Ba)}toString(){return`${this.z}/${this.x}/${this.y}`}}class nu{constructor(t,e){this.wrap=t,this.canonical=e,this.key=au(t,e.z,e.z,e.x,e.y)}}class ru{constructor(t,e,i,n,r){if(t<i)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${i}`);this.overscaledZ=t,this.wrap=e,this.canonical=new iu(i,+n,+r),this.key=au(e,t,i,n,r)}clone(){return new ru(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const e=this.canonical.z-t;return t>this.canonical.z?new ru(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ru(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const i=this.canonical.z-t;return t>this.canonical.z?au(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):au(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new ru(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,i=2*this.canonical.x,n=2*this.canonical.y;return[new ru(e,this.wrap,e,i,n),new ru(e,this.wrap,e,i+1,n),new ru(e,this.wrap,e,i,n+1),new ru(e,this.wrap,e,i+1,n+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new ru(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new ru(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new nu(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new tu(t.x-this.wrap,t.y))}}function au(t,e,i,n,r){(t*=2)<0&&(t=-1*t-1);const a=1<<i;return(a*a*t+a*r+n).toString(36)+i.toString(36)+e.toString(36)}Tn("CanonicalTileID",iu),Tn("OverscaledTileID",ru,{omit:["posMatrix"]});class su{constructor(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return void p(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(let t=0;t<n;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(n,t)]=this.data[this._idx(n-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,n)]=this.data[this._idx(t,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let t=0;t<n;t++)for(let e=0;e<n;e++){const i=this.get(t,e);i>this.max&&(this.max=i),i<this.min&&(this.min=i)}}get(t,e){const i=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[n],i[n+1],i[n+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,i){return(256*t*256+256*e+i)/10-1e4}_unpackTerrarium(t,e,i){return 256*t+e+i/256-32768}getPixels(){return new Ts({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let n=e*this.dim,r=e*this.dim+this.dim,a=i*this.dim,s=i*this.dim+this.dim;switch(e){case-1:n=r-1;break;case 1:r=n+1}switch(i){case-1:a=s-1;break;case 1:s=a+1}const o=-e*this.dim,l=-i*this.dim;for(let e=a;e<s;e++)for(let i=n;i<r;i++)this.data[this._idx(i,e)]=t.data[this._idx(i+o,e+l)]}}Tn("DEMData",su);class ou{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class lu{constructor(t,e,i,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=n,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class hu{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Sn(Ba,16,0),this.grid3D=new Sn(Ba,16,0),this.featureIndexArray=new Xr,this.promoteId=e}insert(t,e,i,n,r,a){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,r);const o=a?this.grid3D:this.grid;for(let t=0;t<e.length;t++){const i=e[t],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<i.length;t++){const e=i[t];n[0]=Math.min(n[0],e.x),n[1]=Math.min(n[1],e.y),n[2]=Math.max(n[2],e.x),n[3]=Math.max(n[3],e.y)}n[0]<Ba&&n[1]<Ba&&n[2]>=0&&n[3]>=0&&o.insert(s,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new vo.VectorTile(new sl(this.rawTileData)).layers,this.sourceLayerCoder=new ou(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,i,n){this.loadVTLayers();const r=t.params||{},a=Ba/t.tileSize/t.scale,s=qi(r.filter),o=t.queryGeometry,l=t.queryPadding*a,h=cu(o),u=this.grid.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l),c=cu(t.cameraQueryGeometry),d=this.grid3D.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l,((e,i,n,r)=>function(t,e,i,n,r){for(const a of t)if(e<=a.x&&i<=a.y&&n>=a.x&&r>=a.y)return!0;const a=[new A(e,i),new A(e,r),new A(n,r),new A(n,i)];if(t.length>2)for(const e of a)if(es(t,e))return!0;for(let e=0;e<t.length-1;e++)if(is(t[e],t[e+1],a))return!0;return!1}(t.cameraQueryGeometry,e-l,i-l,n+l,r+l)));for(const t of d)u.push(t);u.sort(du);const m={};let p;for(let l=0;l<u.length;l++){const h=u[l];if(h===p)continue;p=h;const c=this.featureIndexArray.get(h);let d=null;this.loadMatchingFeature(m,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,s,r.layers,r.availableImages,e,i,n,((e,i,n)=>(d||(d=Ua(e)),i.queryIntersectsFeature(o,e,n,d,this.z,t.transform,a,t.pixelPosMatrix))))}return m}loadMatchingFeature(t,e,i,n,r,a,s,l,h,u,c){const d=this.bucketLayerIDs[e];if(a&&!function(t,e){for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(a,d))return;const m=this.sourceLayerCoder.decode(i),p=this.vtLayers[m].feature(n);if(r.needGeometry){const t=Va(p,!0);if(!r.filter(new Kn(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!r.filter(new Kn(this.tileID.overscaledZ),p))return;const f=this.getId(p,m);for(let e=0;e<d.length;e++){const i=d[e];if(a&&a.indexOf(i)<0)continue;const r=l[i];if(!r)continue;let m={};f&&u&&(m=u.getState(r.sourceLayer||"_geojsonTileLayer",f));const y=o({},h[i]);y.paint=uu(y.paint,r.paint,p,m,s),y.layout=uu(y.layout,r.layout,p,m,s);const g=!c||c(p,r,m);if(!g)continue;const _=new lu(p,this.z,this.x,this.y,f);_.layer=y;let v=t[i];void 0===v&&(v=t[i]=[]),v.push({featureIndex:n,feature:_,intersectionZ:g})}}lookupSymbolFeatures(t,e,i,n,r,a,s,o){const l={};this.loadVTLayers();const h=qi(r);for(const r of t)this.loadMatchingFeature(l,i,n,r,h,a,s,o,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const i of e)if(t===i)return!0;return!1}getId(t,e){let i=t.id;return this.promoteId&&(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof i&&(i=Number(i))),i}}function uu(t,e,i,n,r){return u(t,((t,a)=>{const s=e instanceof sr?e.get(a):null;return s&&s.evaluate?s.evaluate(i,n,r):s}))}function cu(t){let e=1/0,i=1/0,n=-1/0,r=-1/0;for(const a of t)e=Math.min(e,a.x),i=Math.min(i,a.y),n=Math.max(n,a.x),r=Math.max(r,a.y);return{minX:e,minY:i,maxX:n,maxY:r}}function du(t,e){return e-t}var mu;Tn("FeatureIndex",hu,{omit:["rawTileData","sourceLayerCoder"]}),t.PerformanceMarkers=void 0,(mu=t.PerformanceMarkers||(t.PerformanceMarkers={})).create="create",mu.load="load",mu.fullLoad="fullLoad";let pu=null,fu=[];const yu=1e3/30,gu={mark(t){performance.mark(t)},frame(t){const e=t;null!=pu&&fu.push(e-pu),pu=e},clearMetrics(){pu=null,fu=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const e in t.PerformanceMarkers)performance.clearMarks(t.PerformanceMarkers[e])},getPerformanceMetrics(){performance.measure("loadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.load),performance.measure("fullLoadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.fullLoad);const e=performance.getEntriesByName("loadTime")[0].duration,i=performance.getEntriesByName("fullLoadTime")[0].duration,n=fu.length,r=1/(fu.reduce(((t,e)=>t+e),0)/n/1e3),a=fu.filter((t=>t>yu)).reduce(((t,e)=>t+(e-yu)/yu),0);return{loadTime:e,fullLoadTime:i,fps:r,percentDroppedFrames:a/(n+a)*100}}};t.AJAXError=H,t.ARRAY_TYPE=hs,t.Actor=class{constructor(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},h(["receive","process"],this),this.invoker=new Gh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=g()?t:window}send(t,e,i,n,r=!1){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[a]=i);const s=x(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!i,targetMapId:n,mustQueue:r,sourceMapId:this.mapId,data:In(e,s)},s),{cancel:()=>{i&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(t){const e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];const t=this.cancelCallbacks[i];delete this.cancelCallbacks[i],t&&t()}else g()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)}process(){if(!this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,e){if("<response>"===e.type){const i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(kn(e.error)):i(null,kn(e.data)))}else{let i=!1;const n=x(this.globalScope)?void 0:[],r=e.hasCallback?(e,r)=>{i=!0,delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?In(e):null,data:In(r,n)},n)}:t=>{i=!0};let a=null;const s=kn(e.data);if(this.parent[e.type])a=this.parent[e.type](e.sourceMapId,s,r);else if(this.parent.getWorkerSource){const t=e.type.split(".");a=this.parent.getWorkerSource(e.sourceMapId,t[0],s.source)[t[1]](s,r)}else r(new Error(`Could not find function ${e.type}`));!i&&a&&a.cancel&&(this.cancelCallbacks[t]=a.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.AlphaImage=As,t.CanonicalTileID=iu,t.CollisionBoxArray=Vr,t.CollisionCircleLayoutArray=class extends Er{},t.Color=Lt,t.DEMData=su,t.DataConstantProperty=or,t.DictionaryCoder=ou,t.EXTENT=Ba,t.ErrorEvent=tt,t.EvaluationParameters=Kn,t.Event=Q,t.Evented=et,t.FeatureIndex=hu,t.FillBucket=mo,t.FillExtrusionBucket=zo,t.GeoJSONFeature=lu,t.ImageAtlas=zl,t.ImagePosition=Ll,t.LineBucket=qo,t.LineStripIndexArray=class extends jr{},t.LngLat=Zh,t.LngLatBounds=qh,t.MercatorCoordinate=tu,t.ONE_EM=al,t.OverscaledTileID=ru,t.PerformanceUtils=gu,t.PosArray=Kr,t.Properties=dr,t.QuadTriangleArray=class extends Lr{},t.RGBAImage=Ts,t.RasterBoundsArray=class extends Mr{},t.RequestPerformance=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.ResourceType=j,t.SegmentVector=pa,t.SymbolBucket=zh,t.Transitionable=er,t.TriangleIndexArray=ua,t.Uniform1f=Aa,t.Uniform1i=class extends Sa{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends Sa{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends Sa{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=Ta,t.UniformColor=Ca,t.UniformMatrix4f=class extends Sa{constructor(t,e){super(t,e),this.current=Ia}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=nu,t.ValidationError=nt,t.ZoomHistory=Pn,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=Ph,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);let n=t.length;const r=new Array(t.length);let a=null;t.forEach(((t,s)=>{e(t,((t,e)=>{t&&(a=t),r[s]=e,0==--n&&i(a,r)}))}))},t.bezier=n,t.bindAll=h,t.cacheEntryPossiblyAdded=function(t){L++,L>E&&(t.getActor().send("enforceCacheSizeLimit",P),L=0)},t.clamp=a,t.clearTileCache=function(t){const e=caches.delete(I);t&&e.catch(t).then((()=>t()))},t.clipLine=oh,t.clone=function(t){var e=new hs(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=d,t.clone$2=function(t){var e=new hs(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=il,t.config=C,t.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.create=function(){var t=new hs(16);return hs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=us,t.createExpression=Li,t.createFilter=qi,t.createLayout=_r,t.createStyleLayer=function(t){return"custom"===t.type?new Uh(t):new Vh[t.type](t)},t.cross=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],l=i[2];return t[0]=r*l-a*o,t[1]=a*s-n*l,t[2]=n*o-r*s,t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=r,t.emitValidationErrors=wn,t.enforceCacheSizeLimit=function(t){D(),k&&k.then((e=>{e.keys().then((i=>{for(let n=0;n<i.length-t;n++)e.delete(i[n])}))}))},t.equals=function(t,e){var i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],h=t[7],u=t[8],c=t[9],d=t[10],m=t[11],p=t[12],f=t[13],y=t[14],g=t[15],_=e[0],v=e[1],b=e[2],M=e[3],x=e[4],w=e[5],S=e[6],A=e[7],T=e[8],C=e[9],I=e[10],k=e[11],P=e[12],E=e[13],D=e[14],L=e[15];return Math.abs(i-_)<=ls*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(n-v)<=ls*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=ls*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(a-M)<=ls*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-x)<=ls*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(o-w)<=ls*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(l-S)<=ls*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-A)<=ls*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(u-T)<=ls*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-C)<=ls*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(d-I)<=ls*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(m-k)<=ls*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(p-P)<=ls*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(f-E)<=ls*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(y-D)<=ls*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(g-L)<=ls*Math.max(1,Math.abs(g),Math.abs(L))},t.evaluateSizeForFeature=function(t,{uSize:e,uSizeT:i},{lowerSize:n,upperSize:r}){return"source"===t.kind?n/Xl:"composite"===t.kind?Se(n/Xl,r/Xl,i):e},t.evaluateSizeForZoom=function(t,e){let i=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:s,maxZoom:o}=t,l=r?a(Ve.interpolationFactor(r,e,s,o),0,1):0;"camera"===t.kind?n=Se(t.minSize,t.maxSize,l):i=l}return{uSizeT:i,uSize:n}},t.evaluateVariableOffset=bh,t.evented=Yn,t.exported=S,t.exported$1=z,t.extend=o,t.filterObject=c,t.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.getAnchorAlignment=ql,t.getAnchorJustification=Mh,t.getArrayBuffer=$,t.getImage=J,t.getJSON=function(t,e){return G(o(t,{type:"json"}),e)},t.getOverlapMode=Bh,t.getRTLTextPluginStatus=Wn,t.getReferrer=U,t.getVideo=function(t,e){const i=window.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(let e=0;e<t.length;e++){const n=window.document.createElement("source");Z(t[e])||(i.crossOrigin="Anonymous"),n.src=t[e],i.appendChild(n)}return{cancel:()=>{}}},t.identity=cs,t.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],h=e[7],u=e[8],c=e[9],d=e[10],m=e[11],p=e[12],f=e[13],y=e[14],g=e[15],_=i*o-n*s,v=i*l-r*s,b=i*h-a*s,M=n*l-r*o,x=n*h-a*o,w=r*h-a*l,S=u*f-c*p,A=u*y-d*p,T=u*g-m*p,C=c*y-d*f,I=c*g-m*f,k=d*g-m*y,P=_*k-v*I+b*C+M*T-x*A+w*S;return P?(t[0]=(o*k-l*I+h*C)*(P=1/P),t[1]=(r*I-n*k-a*C)*P,t[2]=(f*w-y*x+g*M)*P,t[3]=(d*x-c*w-m*M)*P,t[4]=(l*T-s*k-h*A)*P,t[5]=(i*k-r*T+a*A)*P,t[6]=(y*b-p*w-g*v)*P,t[7]=(u*w-d*b+m*v)*P,t[8]=(s*I-o*T+h*S)*P,t[9]=(n*T-i*I-a*S)*P,t[10]=(p*x-f*b+g*_)*P,t[11]=(c*b-u*x-m*_)*P,t[12]=(o*A-s*C-l*S)*P,t[13]=(i*C-n*A+r*S)*P,t[14]=(f*v-p*M-y*_)*P,t[15]=(u*M-c*v+d*_)*P,t):null},t.isImageBitmap=w,t.isSafari=x,t.isWorker=g,t.keysDifference=function(t,e){const i=[];for(const n in t)n in e||i.push(n);return i},t.lazyLoadRTLTextPlugin=function(){Xn.isLoading()||Xn.isLoaded()||"deferred"!==Wn()||Jn()},t.makeRequest=G,t.mapObject=u,t.mercatorXfromLng=Jh,t.mercatorYfromLat=Xh,t.mercatorZfromAltitude=Kh,t.mul=ps,t.mul$1=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},t.multiply=ds,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t},t.number=Se,t.ortho=function(t,e,i,n,r,a,s){var o=1/(e-i),l=1/(n-r),h=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*o,t[13]=(r+n)*l,t[14]=(s+a)*h,t[15]=1,t},t.parseCacheControl=_,t.parseGlyphPbf=function(t){return new sl(t).readFields(kl,[])},t.pbf=sl,t.performSymbolLayout=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=Ba/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;const i=e.bucket.layers[0].layout,n=e.bucket.layers[0]._unevaluatedLayout._values,r={layoutIconSize:n["icon-size"].possiblyEvaluate(new Kn(e.bucket.zoom+1),e.canonical),layoutTextSize:n["text-size"].possiblyEvaluate(new Kn(e.bucket.zoom+1),e.canonical),textMaxSize:n["text-size"].possiblyEvaluate(new Kn(18))};if("composite"===e.bucket.textSizeData.kind){const{minZoom:t,maxZoom:i}=e.bucket.textSizeData;r.compositeTextSizes=[n["text-size"].possiblyEvaluate(new Kn(t),e.canonical),n["text-size"].possiblyEvaluate(new Kn(i),e.canonical)]}if("composite"===e.bucket.iconSizeData.kind){const{minZoom:t,maxZoom:i}=e.bucket.iconSizeData;r.compositeIconSizes=[n["icon-size"].possiblyEvaluate(new Kn(t),e.canonical),n["icon-size"].possiblyEvaluate(new Kn(i),e.canonical)]}const a=i.get("text-line-height")*al,s="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),o=i.get("text-keep-upright"),l=i.get("text-size");for(const n of e.bucket.features){const h=i.get("text-font").evaluate(n,{},e.canonical).join(","),u=l.evaluate(n,{},e.canonical),c=r.layoutTextSize.evaluate(n,{},e.canonical),d=r.layoutIconSize.evaluate(n,{},e.canonical),m={horizontal:{},vertical:void 0},f=n.text;let y,g=[0,0];if(f){const r=f.toString(),l=i.get("text-letter-spacing").evaluate(n,{},e.canonical)*al,d=Ln(r)?l:0,p=i.get("text-anchor").evaluate(n,{},e.canonical),y=i.get("text-variable-anchor");if(!y){const t=i.get("text-radial-offset").evaluate(n,{},e.canonical);g=t?bh(p,[t*al,vh]):i.get("text-offset").evaluate(n,{},e.canonical).map((t=>t*al))}let _=s?"center":i.get("text-justify").evaluate(n,{},e.canonical);const v=i.get("symbol-placement"),b="point"===v?i.get("text-max-width").evaluate(n,{},e.canonical)*al:0,M=()=>{e.bucket.allowVerticalPlacement&&Dn(r)&&(m.vertical=Nl(f,e.glyphMap,e.glyphPositions,e.imagePositions,h,b,a,p,"left",d,g,t.WritingMode.vertical,!0,v,c,u))};if(!s&&y){const i="auto"===_?y.map((t=>Mh(t))):[_];let n=!1;for(let r=0;r<i.length;r++){const s=i[r];if(!m.horizontal[s])if(n)m.horizontal[s]=m.horizontal[0];else{const i=Nl(f,e.glyphMap,e.glyphPositions,e.imagePositions,h,b,a,"center",s,d,g,t.WritingMode.horizontal,!1,v,c,u);i&&(m.horizontal[s]=i,n=1===i.positionedLines.length)}}M()}else{"auto"===_&&(_=Mh(p));const i=Nl(f,e.glyphMap,e.glyphPositions,e.imagePositions,h,b,a,p,_,d,g,t.WritingMode.horizontal,!1,v,c,u);i&&(m.horizontal[_]=i),M(),Dn(r)&&s&&o&&(m.vertical=Nl(f,e.glyphMap,e.glyphPositions,e.imagePositions,h,b,a,p,_,d,g,t.WritingMode.vertical,!1,v,c,u))}}let _=!1;if(n.icon&&n.icon.name){const t=e.imageMap[n.icon.name];t&&(y=Wl(e.imagePositions[n.icon.name],i.get("icon-offset").evaluate(n,{},e.canonical),i.get("icon-anchor").evaluate(n,{},e.canonical)),_=!!t.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=_:e.bucket.sdfIcons!==_&&p("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.bucket.pixelRatio||0!==i.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0))}const v=Ah(m.horizontal)||m.vertical;e.bucket.iconsInText=!!v&&v.iconsInText,(v||y)&&xh(e.bucket,n,m,y,e.imageMap,r,c,d,g,_,e.canonical)}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,n,r){var a,s=1/Math.tan(e/2);return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+n)*(a=1/(n-r)),t[14]=2*r*n*a):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){const i={};for(let n=0;n<e.length;n++){const r=e[n];r in t&&(i[r]=t[r])}return i},t.plugin=Xn,t.pointGeometry=A,t.polygonIntersectsPolygon=Za,t.potpack=Dl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Tn,t.registerForPluginStateChange=function(t){return t({pluginStatus:Gn,pluginURL:$n}),Yn.on("pluginStateChange",t),t},t.renderColorRamp=Cs,t.rotateX=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[4],s=e[5],o=e[6],l=e[7],h=e[8],u=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+h*n,t[5]=s*r+u*n,t[6]=o*r+c*n,t[7]=l*r+d*n,t[8]=h*r-a*n,t[9]=u*r-s*n,t[10]=c*r-o*n,t[11]=d*r-l*n,t},t.rotateZ=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],h=e[4],u=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+h*n,t[1]=s*r+u*n,t[2]=o*r+c*n,t[3]=l*r+d*n,t[4]=h*r-a*n,t[5]=u*r-s*n,t[6]=c*r-o*n,t[7]=d*r-l*n,t},t.scale=function(t,e,i){var n=i[0],r=i[1],a=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.setCacheLimits=function(t,e){P=t,E=e},t.setRTLTextPlugin=function(t,e,i=!1){if(Gn===jn||Gn===Hn||Gn===Un)throw new Error("setRTLTextPlugin cannot be called multiple times.");$n=S.resolveURL(t),Gn=jn,Vn=e,qn(),i||Jn()},t.spec=it,t.sphericalToCartesian=function([t,e,i]){return e+=90,e*=Math.PI/180,i*=Math.PI/180,{x:t*Math.cos(e)*Math.sin(i),y:t*Math.sin(e)*Math.sin(i),z:t*Math.cos(i)}},t.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},t.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},t.toEvaluationFeature=Va,t.transformMat3=function(t,e,i){var n=e[0],r=e[1],a=e[2];return t[0]=n*i[0]+r*i[3]+a*i[6],t[1]=n*i[1]+r*i[4]+a*i[7],t[2]=n*i[2]+r*i[5]+a*i[8],t},t.transformMat4=gs,t.transformMat4$1=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t},t.translate=function(t,e,i){var n,r,a,s,o,l,h,u,c,d,m,p,f=i[0],y=i[1],g=i[2];return e===t?(t[12]=e[0]*f+e[4]*y+e[8]*g+e[12],t[13]=e[1]*f+e[5]*y+e[9]*g+e[13],t[14]=e[2]*f+e[6]*y+e[10]*g+e[14],t[15]=e[3]*f+e[7]*y+e[11]*g+e[15]):(r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],d=e[9],m=e[10],p=e[11],t[0]=n=e[0],t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=l,t[6]=h,t[7]=u,t[8]=c,t[9]=d,t[10]=m,t[11]=p,t[12]=n*f+o*y+c*g+e[12],t[13]=r*f+l*y+d*g+e[13],t[14]=a*f+h*y+m*g+e[14],t[15]=s*f+u*y+p*g+e[15]),t},t.triggerPluginCompletionEvent=Zn,t.unicodeBlockLookup=En,t.uniqueId=function(){return l++},t.validateCustomStyleLayer=function(t){const e=[],i=t.id;return void 0===i&&e.push({message:`layers.${i}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${i}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateLight=bn,t.validateStyle=vn,t.vectorTile=vo,t.warnOnce=p,t.wrap=s})),n(0,(function(t){function e(t){const i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){let i="[";for(const n of t)i+=`${e(n)},`;return`${i}]`}const n=Object.keys(t).sort();let r="{";for(let i=0;i<n.length;i++)r+=`${JSON.stringify(n[i])}:${e(t[n[i]])},`;return`${r}}`}function i(i){let n="";for(const r of t.refProperties)n+=`/${e(i[r])}`;return n}class n{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,n){for(const i of e){this._layerConfigs[i.id]=i;const e=this._layers[i.id]=t.createStyleLayer(i);e._featureFilter=t.createFilter(e.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const t of n)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const n={};for(let r=0;r<t.length;r++){const a=e&&e[t[r].id]||i(t[r]);e&&(e[t[r].id]=a);let s=n[a];s||(s=n[a]=[]),s.push(t[r])}const r=[];for(const t in n)r.push(n[t]);return r}(Object.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),i=e[0];if("none"===i.visibility)continue;const n=i.source||"";let r=this.familiesBySource[n];r||(r=this.familiesBySource[n]={});const a=i.sourceLayer||"_geojsonTileLayer";let s=r[a];s||(s=r[a]=[]),s.push(e)}}}class r{constructor(e){const i={},n=[];for(const t in e){const r=e[t],a=i[t]={};for(const t in r){const e=r[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const i={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};n.push(i),a[t]={rect:i,metrics:e.metrics}}}const{w:r,h:a}=t.potpack(n),s=new t.AlphaImage({width:r||1,height:a||1});for(const n in e){const r=e[n];for(const e in r){const a=r[+e];if(!a||0===a.bitmap.width||0===a.bitmap.height)continue;const o=i[n][e].rect;t.AlphaImage.copy(a.bitmap,s,{x:0,y:0},{x:o.x+1,y:o.y+1},a.bitmap)}}this.image=s,this.positions=i}}t.register("GlyphAtlas",r);class a{constructor(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId}parse(e,i,n,a,o){this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;const l=new t.DictionaryCoder(Object.keys(e.layers).sort()),h=new t.FeatureIndex(this.tileID,this.promoteId);h.bucketLayerIDs=[];const u={},c={featureIndex:h,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n},d=i.familiesBySource[this.source];for(const i in d){const r=e.layers[i];if(!r)continue;1===r.version&&t.warnOnce(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const a=l.encode(i),o=[];for(let t=0;t<r.length;t++){const e=r.feature(t),n=h.getId(e,i);o.push({feature:e,id:n,index:t,sourceLayerIndex:a})}for(const e of d[i]){const i=e[0];i.source!==this.source&&t.warnOnce(`layer.source = ${i.source} does not equal this.source = ${this.source}`),i.minzoom&&this.zoom<Math.floor(i.minzoom)||i.maxzoom&&this.zoom>=i.maxzoom||"none"!==i.visibility&&(s(e,this.zoom,n),(u[i.id]=i.createBucket({index:h.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:a,sourceID:this.source})).populate(o,c,this.tileID.canonical),h.bucketLayerIDs.push(e.map((t=>t.id))))}}let m,p,f,y;const g=t.mapObject(c.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(g).length?a.send("getGlyphs",{uid:this.uid,stacks:g},((t,e)=>{m||(m=t,p=e,b.call(this))})):p={};const _=Object.keys(c.iconDependencies);_.length?a.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{m||(m=t,f=e,b.call(this))})):f={};const v=Object.keys(c.patternDependencies);function b(){if(m)return o(m);if(p&&f&&y){const e=new r(p),i=new t.ImageAtlas(f,y);for(const r in u){const a=u[r];a instanceof t.SymbolBucket?(s(a.layers,this.zoom,n),t.performSymbolLayout({bucket:a,glyphMap:p,glyphPositions:e.positions,imageMap:f,imagePositions:i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):a.hasPattern&&(a instanceof t.LineBucket||a instanceof t.FillBucket||a instanceof t.FillExtrusionBucket)&&(s(a.layers,this.zoom,n),a.addFeatures(c,this.tileID.canonical,i.patternPositions))}this.status="done",o(null,{buckets:Object.values(u).filter((t=>!t.isEmpty())),featureIndex:h,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:i,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}}v.length?a.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{m||(m=t,y=e,b.call(this))})):y={},b.call(this)}}function s(e,i,n){const r=new t.EvaluationParameters(i);for(const t of e)t.recalculate(r,n)}function o(e,i){const n=t.getArrayBuffer(e.request,((e,n,r,a)=>{e?i(e):n&&i(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(n)),rawData:n,cacheControl:r,expires:a})}));return()=>{n.cancel(),i()}}class l{constructor(t,e,i,n){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=n||o,this.loading={},this.loaded={}}loadTile(e,i){const n=e.uid;this.loading||(this.loading={});const r=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[n]=new a(e);s.abort=this.loadVectorData(e,((e,a)=>{if(delete this.loading[n],e||!a)return s.status="done",this.loaded[n]=s,i(e);const o=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl);const h={};if(r){const t=r.finish();t&&(h.resourceTiming=JSON.parse(JSON.stringify(t)))}s.vectorTile=a.vectorTile,s.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return i(e);i(null,t.extend({rawTileData:o.slice(0)},n,l,h))})),this.loaded=this.loaded||{},this.loaded[n]=s}))}reloadTile(t,e){const i=this.loaded,n=t.uid,r=this;if(i&&i[n]){const a=i[n];a.showCollisionBoxes=t.showCollisionBoxes;const s=(t,i)=>{const n=a.reloadCallback;n&&(delete a.reloadCallback,a.parse(a.vectorTile,r.layerIndex,this.availableImages,r.actor,n)),e(t,i)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}abortTile(t,e){const i=this.loading,n=t.uid;i&&i[n]&&i[n].abort&&(i[n].abort(),delete i[n]),e()}removeTile(t,e){const i=this.loaded,n=t.uid;i&&i[n]&&delete i[n],e()}}class h{constructor(){this.loaded={}}loadTile(e,i){const{uid:n,encoding:r,rawImageData:a}=e,s=t.isImageBitmap(a)?this.getImageData(a):a,o=new t.DEMData(n,s,r);this.loaded=this.loaded||{},this.loaded[n]=o,i(null,o)}getImageData(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const i=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)}removeTile(t){const e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]}}var u=function t(e,i){var n,r=e&&e.type;if("FeatureCollection"===r)for(n=0;n<e.features.length;n++)t(e.features[n],i);else if("GeometryCollection"===r)for(n=0;n<e.geometries.length;n++)t(e.geometries[n],i);else if("Feature"===r)t(e.geometry,i);else if("Polygon"===r)c(e.coordinates,i);else if("MultiPolygon"===r)for(n=0;n<e.coordinates.length;n++)c(e.coordinates[n],i);return e};function c(t,e){if(0!==t.length){d(t[0],e);for(var i=1;i<t.length;i++)d(t[i],!e)}}function d(t,e){for(var i=0,n=0,r=0,a=t.length,s=a-1;r<a;s=r++){var o=(t[r][0]-t[s][0])*(t[s][1]+t[r][1]),l=i+o;n+=Math.abs(i)>=Math.abs(o)?i-l+o:o-l+i,i=l}i+n>=0!=!!e&&t.reverse()}const m=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class p{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const i of this._feature.geometry)e.push([new t.pointGeometry(i[0],i[1])]);return e}{const e=[];for(const i of this._feature.geometry){const n=[];for(const e of i)n.push(new t.pointGeometry(e[0],e[1]));e.push(n)}return e}}toGeoJSON(t,e,i){return m.call(this,t,e,i)}}class f{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new p(this._features[t])}}var y={exports:{}},g=t.pointGeometry,_=t.vectorTile.VectorTileFeature,v=b;function b(t,e){this.options=e||{},this.features=t,this.length=t.length}function M(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}b.prototype.feature=function(t){return new M(this.features[t],this.options.extent)},M.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],n=[],r=0;r<i.length;r++)n.push(new g(i[r][0],i[r][1]));this.geometry.push(n)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,n=1/0,r=-1/0,a=0;a<t.length;a++)for(var s=t[a],o=0;o<s.length;o++){var l=s[o];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y)}return[e,n,i,r]},M.prototype.toGeoJSON=_.prototype.toGeoJSON;var x=t.pbf,w=v;function S(t){var e=new x;return function(t,e){for(var i in t.layers)e.writeMessage(3,A,t.layers[i])}(t,e),e.finish()}function A(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,T,n);var r=n.keys;for(i=0;i<r.length;i++)e.writeStringField(3,r[i]);var a=n.values;for(i=0;i<a.length;i++)e.writeMessage(4,E,a[i])}function T(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,C,t),e.writeVarintField(3,i.type),e.writeMessage(4,P,i)}function C(t,e){var i=t.feature,n=t.keys,r=t.values,a=t.keycache,s=t.valuecache;for(var o in i.properties){var l=i.properties[o],h=a[o];if(null!==l){void 0===h&&(n.push(o),a[o]=h=n.length-1),e.writeVarint(h);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var c=u+":"+l,d=s[c];void 0===d&&(r.push(l),s[c]=d=r.length-1),e.writeVarint(d)}}}function I(t,e){return(e<<3)+(7&t)}function k(t){return t<<1^t>>31}function P(t,e){for(var i=t.loadGeometry(),n=t.type,r=0,a=0,s=i.length,o=0;o<s;o++){var l=i[o],h=1;1===n&&(h=l.length),e.writeVarint(I(1,h));for(var u=3===n?l.length-1:l.length,c=0;c<u;c++){1===c&&1!==n&&e.writeVarint(I(2,u-1));var d=l[c].x-r,m=l[c].y-a;e.writeVarint(k(d)),e.writeVarint(k(m)),r+=d,a+=m}3===n&&e.writeVarint(I(7,1))}}function E(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function D(t,e,i,n,r,a){if(r-n<=i)return;const s=n+r>>1;L(t,e,s,n,r,a%2),D(t,e,i,n,s-1,a+1),D(t,e,i,s+1,r,a+1)}function L(t,e,i,n,r,a){for(;r>n;){if(r-n>600){const s=r-n+1,o=i-n+1,l=Math.log(s),h=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*h*(s-h)/s)*(o-s/2<0?-1:1);L(t,e,i,Math.max(n,Math.floor(i-o*h/s+u)),Math.min(r,Math.floor(i+(s-o)*h/s+u)),a)}const s=e[2*i+a];let o=n,l=r;for(z(t,e,n,i),e[2*r+a]>s&&z(t,e,n,r);o<l;){for(z(t,e,o,l),o++,l--;e[2*o+a]<s;)o++;for(;e[2*l+a]>s;)l--}e[2*n+a]===s?z(t,e,n,l):(l++,z(t,e,l,r)),l<=i&&(n=l+1),i<=l&&(r=l-1)}}function z(t,e,i,n){F(t,i,n),F(e,2*i,2*n),F(e,2*i+1,2*n+1)}function F(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function O(t,e,i,n){const r=t-i,a=e-n;return r*r+a*a}y.exports=S,y.exports.fromVectorTileJs=S,y.exports.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var n in t)i[n]=new w(t[n].features,e),i[n].name=n,i[n].version=e.version,i[n].extent=e.extent;return S({layers:i})},y.exports.GeoJSONWrapper=w;const R=t=>t[0],N=t=>t[1];class B{constructor(t,e=R,i=N,n=64,r=Float64Array){this.nodeSize=n,this.points=t;const a=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new a(t.length),o=this.coords=new r(2*t.length);for(let n=0;n<t.length;n++)s[n]=n,o[2*n]=e(t[n]),o[2*n+1]=i(t[n]);D(s,o,n,0,s.length-1,0)}range(t,e,i,n){return function(t,e,i,n,r,a,s){const o=[0,t.length-1,0],l=[];let h,u;for(;o.length;){const c=o.pop(),d=o.pop(),m=o.pop();if(d-m<=s){for(let s=m;s<=d;s++)h=e[2*s],u=e[2*s+1],h>=i&&h<=r&&u>=n&&u<=a&&l.push(t[s]);continue}const p=Math.floor((m+d)/2);h=e[2*p],u=e[2*p+1],h>=i&&h<=r&&u>=n&&u<=a&&l.push(t[p]);const f=(c+1)%2;(0===c?i<=h:n<=u)&&(o.push(m),o.push(p-1),o.push(f)),(0===c?r>=h:a>=u)&&(o.push(p+1),o.push(d),o.push(f))}return l}(this.ids,this.coords,t,e,i,n,this.nodeSize)}within(t,e,i){return function(t,e,i,n,r,a){const s=[0,t.length-1,0],o=[],l=r*r;for(;s.length;){const h=s.pop(),u=s.pop(),c=s.pop();if(u-c<=a){for(let r=c;r<=u;r++)O(e[2*r],e[2*r+1],i,n)<=l&&o.push(t[r]);continue}const d=Math.floor((c+u)/2),m=e[2*d],p=e[2*d+1];O(m,p,i,n)<=l&&o.push(t[d]);const f=(h+1)%2;(0===h?i-r<=m:n-r<=p)&&(s.push(c),s.push(d-1),s.push(f)),(0===h?i+r>=m:n+r>=p)&&(s.push(d+1),s.push(u),s.push(f))}return o}(this.ids,this.coords,t,e,i,this.nodeSize)}}const j={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},H=Math.fround||(U=new Float32Array(1),t=>(U[0]=+t,U[0]));var U;class V{constructor(t){this.options=X(Object.create(j),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:i,maxZoom:n,nodeSize:r}=this.options;e&&console.time("total time");const a=`prepare ${t.length} points`;e&&console.time(a),this.points=t;let s=[];for(let e=0;e<t.length;e++)t[e].geometry&&s.push($(t[e],e));this.trees[n+1]=new B(s,K,Q,r,Float32Array),e&&console.timeEnd(a);for(let t=n;t>=i;t--){const i=+Date.now();s=this._cluster(s,t),this.trees[t]=new B(s,K,Q,r,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,s.length,+Date.now()-i)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let i=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,r=180;else if(i>r){const t=this.getClusters([i,n,180,a],e),s=this.getClusters([-180,n,r,a],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],o=s.range(Y(i),W(a),Y(r),W(n)),l=[];for(const t of o){const e=s.points[t];l.push(e.numPoints?Z(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),i=this._getOriginZoom(t),n="No cluster with the specified id.",r=this.trees[i];if(!r)throw new Error(n);const a=r.points[e];if(!a)throw new Error(n);const s=this.options.radius/(this.options.extent*Math.pow(2,i-1)),o=r.within(a.x,a.y,s),l=[];for(const e of o){const i=r.points[e];i.parentId===t&&l.push(i.numPoints?Z(i):this.points[i.index])}if(0===l.length)throw new Error(n);return l}getLeaves(t,e,i){const n=[];return this._appendLeaves(n,t,e=e||10,i=i||0,0),n}getTile(t,e,i){const n=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:a,radius:s}=this.options,o=s/a,l=(i-o)/r,h=(i+1+o)/r,u={features:[]};return this._addTileFeatures(n.range((e-o)/r,l,(e+1+o)/r,h),n.points,e,i,r,u),0===e&&this._addTileFeatures(n.range(1-o/r,l,1,h),n.points,r,i,r,u),e===r-1&&this._addTileFeatures(n.range(0,l,o/r,h),n.points,-1,i,r,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}_appendLeaves(t,e,i,n,r){const a=this.getChildren(e);for(const e of a){const a=e.properties;if(a&&a.cluster?r+a.point_count<=n?r+=a.point_count:r=this._appendLeaves(t,a.cluster_id,i,n,r):r<n?r++:t.push(e),t.length===i)break}return r}_addTileFeatures(t,e,i,n,r,a){for(const s of t){const t=e[s],o=t.numPoints;let l,h,u;if(o)l=q(t),h=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,h=Y(e.geometry.coordinates[0]),u=W(e.geometry.coordinates[1])}const c={type:1,geometry:[[Math.round(this.options.extent*(h*r-i)),Math.round(this.options.extent*(u*r-n))]],tags:l};let d;o?d=t.id:this.options.generateId?d=t.index:this.points[t.index].id&&(d=this.points[t.index].id),void 0!==d&&(c.id=d),a.features.push(c)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const i=[],{radius:n,extent:r,reduce:a,minPoints:s}=this.options,o=n/(r*Math.pow(2,e));for(let n=0;n<t.length;n++){const r=t[n];if(r.zoom<=e)continue;r.zoom=e;const l=this.trees[e+1],h=l.within(r.x,r.y,o),u=r.numPoints||1;let c=u;for(const t of h){const i=l.points[t];i.zoom>e&&(c+=i.numPoints||1)}if(c>u&&c>=s){let t=r.x*u,s=r.y*u,o=a&&u>1?this._map(r,!0):null;const d=(n<<5)+(e+1)+this.points.length;for(const i of h){const n=l.points[i];if(n.zoom<=e)continue;n.zoom=e;const h=n.numPoints||1;t+=n.x*h,s+=n.y*h,n.parentId=d,a&&(o||(o=this._map(r,!0)),a(o,this._map(n)))}r.parentId=d,i.push(G(t/c,s/c,d,c,o))}else if(i.push(r),c>1)for(const t of h){const n=l.points[t];n.zoom<=e||(n.zoom=e,i.push(n))}}return i}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?X({},t.properties):t.properties;const i=this.points[t.index].properties,n=this.options.map(i);return e&&n===i?X({},n):n}}function G(t,e,i,n,r){return{x:H(t),y:H(e),zoom:1/0,id:i,parentId:-1,numPoints:n,properties:r}}function $(t,e){const[i,n]=t.geometry.coordinates;return{x:H(Y(i)),y:H(W(n)),zoom:1/0,index:e,parentId:-1}}function Z(t){return{type:"Feature",id:t.id,properties:q(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),J(t.y)]}};var e}function q(t){const e=t.numPoints,i=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return X(X({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function Y(t){return t/360+.5}function W(t){const e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function J(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function X(t,e){for(const i in e)t[i]=e[i];return t}function K(t){return t.x}function Q(t){return t.y}function tt(t,e,i,n){for(var r,a=n,s=i-e>>1,o=i-e,l=t[e],h=t[e+1],u=t[i],c=t[i+1],d=e+3;d<i;d+=3){var m=et(t[d],t[d+1],l,h,u,c);if(m>a)r=d,a=m;else if(m===a){var p=Math.abs(d-s);p<o&&(r=d,o=p)}}a>n&&(r-e>3&&tt(t,e,r,n),t[r+2]=a,i-r>3&&tt(t,r,i,n))}function et(t,e,i,n,r,a){var s=r-i,o=a-n;if(0!==s||0!==o){var l=((t-i)*s+(e-n)*o)/(s*s+o*o);l>1?(i=r,n=a):l>0&&(i+=s*l,n+=o*l)}return(s=t-i)*s+(o=e-n)*o}function it(t,e,i,n){var r={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)nt(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)nt(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)nt(t,e[n][r])}(r),r}function nt(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function rt(t,e,i,n){if(e.geometry){var r=e.geometry.coordinates,a=e.geometry.type,s=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),o=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===a)at(r,o);else if("MultiPoint"===a)for(var h=0;h<r.length;h++)at(r[h],o);else if("LineString"===a)st(r,o,s,!1);else if("MultiLineString"===a){if(i.lineMetrics){for(h=0;h<r.length;h++)st(r[h],o=[],s,!1),t.push(it(l,"LineString",o,e.properties));return}ot(r,o,s,!1)}else if("Polygon"===a)ot(r,o,s,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(h=0;h<e.geometry.geometries.length;h++)rt(t,{id:l,geometry:e.geometry.geometries[h],properties:e.properties},i,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(h=0;h<r.length;h++){var u=[];ot(r[h],u,s,!0),o.push(u)}}t.push(it(l,a,o,e.properties))}}function at(t,e){e.push(lt(t[0])),e.push(ht(t[1])),e.push(0)}function st(t,e,i,n){for(var r,a,s=0,o=0;o<t.length;o++){var l=lt(t[o][0]),h=ht(t[o][1]);e.push(l),e.push(h),e.push(0),o>0&&(s+=n?(r*h-l*a)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(h-a,2))),r=l,a=h}var u=e.length-3;e[2]=1,tt(e,0,u,i),e[u+2]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function ot(t,e,i,n){for(var r=0;r<t.length;r++){var a=[];st(t[r],a,i,n),e.push(a)}}function lt(t){return t/360+.5}function ht(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function ut(t,e,i,n,r,a,s,o){if(n/=e,a>=(i/=e)&&s<n)return t;if(s<i||a>=n)return null;for(var l=[],h=0;h<t.length;h++){var u=t[h],c=u.geometry,d=u.type,m=0===r?u.minX:u.minY,p=0===r?u.maxX:u.maxY;if(m>=i&&p<n)l.push(u);else if(!(p<i||m>=n)){var f=[];if("Point"===d||"MultiPoint"===d)ct(c,f,i,n,r);else if("LineString"===d)dt(c,f,i,n,r,!1,o.lineMetrics);else if("MultiLineString"===d)pt(c,f,i,n,r,!1);else if("Polygon"===d)pt(c,f,i,n,r,!0);else if("MultiPolygon"===d)for(var y=0;y<c.length;y++){var g=[];pt(c[y],g,i,n,r,!0),g.length&&f.push(g)}if(f.length){if(o.lineMetrics&&"LineString"===d){for(y=0;y<f.length;y++)l.push(it(u.id,d,f[y],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===f.length?(d="LineString",f=f[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===f.length?"Point":"MultiPoint"),l.push(it(u.id,d,f,u.tags))}}}return l.length?l:null}function ct(t,e,i,n,r){for(var a=0;a<t.length;a+=3){var s=t[a+r];s>=i&&s<=n&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}function dt(t,e,i,n,r,a,s){for(var o,l,h=mt(t),u=0===r?yt:gt,c=t.start,d=0;d<t.length-3;d+=3){var m=t[d],p=t[d+1],f=t[d+2],y=t[d+3],g=t[d+4],_=0===r?m:p,v=0===r?y:g,b=!1;s&&(o=Math.sqrt(Math.pow(m-y,2)+Math.pow(p-g,2))),_<i?v>i&&(l=u(h,m,p,y,g,i),s&&(h.start=c+o*l)):_>n?v<n&&(l=u(h,m,p,y,g,n),s&&(h.start=c+o*l)):ft(h,m,p,f),v<i&&_>=i&&(l=u(h,m,p,y,g,i),b=!0),v>n&&_<=n&&(l=u(h,m,p,y,g,n),b=!0),!a&&b&&(s&&(h.end=c+o*l),e.push(h),h=mt(t)),s&&(c+=o)}var M=t.length-3;m=t[M],p=t[M+1],f=t[M+2],(_=0===r?m:p)>=i&&_<=n&&ft(h,m,p,f),M=h.length-3,a&&M>=3&&(h[M]!==h[0]||h[M+1]!==h[1])&&ft(h,h[0],h[1],h[2]),h.length&&e.push(h)}function mt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function pt(t,e,i,n,r,a){for(var s=0;s<t.length;s++)dt(t[s],e,i,n,r,a,!1)}function ft(t,e,i,n){t.push(e),t.push(i),t.push(n)}function yt(t,e,i,n,r,a){var s=(a-e)/(n-e);return t.push(a),t.push(i+(r-i)*s),t.push(1),s}function gt(t,e,i,n,r,a){var s=(a-i)/(r-i);return t.push(e+(n-e)*s),t.push(a),t.push(1),s}function _t(t,e){for(var i=[],n=0;n<t.length;n++){var r,a=t[n],s=a.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)r=vt(a.geometry,e);else if("MultiLineString"===s||"Polygon"===s){r=[];for(var o=0;o<a.geometry.length;o++)r.push(vt(a.geometry[o],e))}else if("MultiPolygon"===s)for(r=[],o=0;o<a.geometry.length;o++){for(var l=[],h=0;h<a.geometry[o].length;h++)l.push(vt(a.geometry[o][h],e));r.push(l)}i.push(it(a.id,s,r,a.tags))}return i}function vt(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function bt(t,e){if(t.transformed)return t;var i,n,r,a=1<<t.z,s=t.x,o=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],h=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<h.length;n+=2)l.geometry.push(Mt(h[n],h[n+1],e,a,s,o));else for(n=0;n<h.length;n++){var c=[];for(r=0;r<h[n].length;r+=2)c.push(Mt(h[n][r],h[n][r+1],e,a,s,o));l.geometry.push(c)}}return t.transformed=!0,t}function Mt(t,e,i,n,r,a){return[Math.round(i*(t*n-r)),Math.round(i*(e*n-a))]}function xt(t,e,i,n,r){for(var a=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},o=0;o<t.length;o++){s.numFeatures++,wt(s,t[o],a,r);var l=t[o].minX,h=t[o].minY,u=t[o].maxX,c=t[o].maxY;l<s.minX&&(s.minX=l),h<s.minY&&(s.minY=h),u>s.maxX&&(s.maxX=u),c>s.maxY&&(s.maxY=c)}return s}function wt(t,e,i,n){var r=e.geometry,a=e.type,s=[];if("Point"===a||"MultiPoint"===a)for(var o=0;o<r.length;o+=3)s.push(r[o]),s.push(r[o+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)St(s,r,t,i,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(o=0;o<r.length;o++)St(s,r[o],t,i,"Polygon"===a,0===o);else if("MultiPolygon"===a)for(var l=0;l<r.length;l++){var h=r[l];for(o=0;o<h.length;o++)St(s,h[o],t,i,!0,0===o)}if(s.length){var u=e.tags||null;if("LineString"===a&&n.lineMetrics){for(var c in u={},e.tags)u[c]=e.tags[c];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var d={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function St(t,e,i,n,r,a){var s=n*n;if(n>0&&e.size<(r?s:n))i.numPoints+=e.length/3;else{for(var o=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>s)&&(i.numSimplified++,o.push(e[l]),o.push(e[l+1])),i.numPoints++;r&&function(t,e){for(var i=0,n=0,r=t.length,a=r-2;n<r;a=n,n+=2)i+=(t[n]-t[a])*(t[n+1]+t[a+1]);if(i>0===e)for(n=0,r=t.length;n<r/2;n+=2){var s=t[n],o=t[n+1];t[n]=t[r-2-n],t[n+1]=t[r-1-n],t[r-2-n]=s,t[r-1-n]=o}}(o,a),t.push(o)}}function At(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)rt(i,t.features[n],e,n);else rt(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=function(t,e){var i=e.buffer/e.extent,n=t,r=ut(t,1,-1-i,i,0,-1,2,e),a=ut(t,1,1-i,2+i,0,-1,2,e);return(r||a)&&(n=ut(t,1,-i,1+i,0,-1,2,e)||[],r&&(n=_t(r,1).concat(n)),a&&(n=n.concat(_t(a,-1)))),n}(n,e),n.length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tt(t,e,i){return 32*((1<<t)*i+e)+t}function Ct(t,e){const i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const n=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!n)return e(null,null);const r=new f(n.features);let a=y.exports(r);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:r,rawData:a.buffer})}At.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},At.prototype.splitTile=function(t,e,i,n,r,a,s){for(var o=[t,e,i,n],l=this.options,h=l.debug;o.length;){n=o.pop(),i=o.pop(),e=o.pop(),t=o.pop();var u=1<<e,c=Tt(e,i,n),d=this.tiles[c];if(!d&&(h>1&&console.time("creation"),d=this.tiles[c]=xt(t,e,i,n,l),this.tileCoords.push({z:e,x:i,y:n}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var m="z"+e;this.stats[m]=(this.stats[m]||0)+1,this.total++}if(d.source=t,r){if(e===l.maxZoom||e===r)continue;var p=1<<r-e;if(i!==Math.floor(a/p)||n!==Math.floor(s/p))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){h>1&&console.time("clipping");var f,y,g,_,v,b,M=.5*l.buffer/l.extent,x=.5-M,w=.5+M,S=1+M;f=y=g=_=null,v=ut(t,u,i-M,i+w,0,d.minX,d.maxX,l),b=ut(t,u,i+x,i+S,0,d.minX,d.maxX,l),t=null,v&&(f=ut(v,u,n-M,n+w,1,d.minY,d.maxY,l),y=ut(v,u,n+x,n+S,1,d.minY,d.maxY,l),v=null),b&&(g=ut(b,u,n-M,n+w,1,d.minY,d.maxY,l),_=ut(b,u,n+x,n+S,1,d.minY,d.maxY,l),b=null),h>1&&console.timeEnd("clipping"),o.push(f||[],e+1,2*i,2*n),o.push(y||[],e+1,2*i,2*n+1),o.push(g||[],e+1,2*i+1,2*n),o.push(_||[],e+1,2*i+1,2*n+1)}}},At.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent,a=n.debug;if(t<0||t>24)return null;var s=1<<t,o=Tt(t,e=(e%s+s)%s,i);if(this.tiles[o])return bt(this.tiles[o],r);a>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,h=t,u=e,c=i;!l&&h>0;)h--,u=Math.floor(u/2),c=Math.floor(c/2),l=this.tiles[Tt(h,u,c)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",h,u,c),a>1&&console.time("drilling down"),this.splitTile(l.source,h,u,c,t,e,i),a>1&&console.timeEnd("drilling down"),this.tiles[o]?bt(this.tiles[o],r):null):null};class It extends l{constructor(t,e,i,n){super(t,e,i,Ct),n&&(this.loadGeoJSON=n)}loadData(e,i){var n;null===(n=this._pendingRequest)||void 0===n||n.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const r=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request);this._pendingCallback=i,this._pendingRequest=this.loadGeoJSON(e,((n,a)=>{if(delete this._pendingCallback,delete this._pendingRequest,n||!a)return i(n);if("object"!=typeof a)return i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{u(a,!0);try{if(e.filter){const i=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw new Error(i.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const n=a.features.filter((t=>i.value.evaluate({zoom:0},t)));a={type:"FeatureCollection",features:n}}this._geoJSONIndex=e.cluster?new V(function({superclusterOptions:e,clusterProperties:i}){if(!i||!e)return e;const n={},r={},a={accumulated:null,zoom:0},s={properties:null},o=Object.keys(i);for(const e of o){const[a,s]=i[e],o=t.createExpression(s),l=t.createExpression("string"==typeof a?[a,["accumulated"],["get",e]]:a);n[e]=o.value,r[e]=l.value}return e.map=t=>{s.properties=t;const e={};for(const t of o)e[t]=n[t].evaluate(a,s);return e},e.reduce=(t,e)=>{s.properties=e;for(const e of o)a.accumulated=t[e],t[e]=r[e].evaluate(a,s)},e}(e)).load(a.features):function(t,e){return new At(t,e)}(a,e.geojsonVtOptions)}catch(n){return i(n)}this.loaded={};const s={};if(r){const t=r.finish();t&&(s.resourceTiming={},s.resourceTiming[e.source]=JSON.parse(JSON.stringify(t)))}i(null,s)}}))}reloadTile(t,e){const i=this.loaded;return i&&i[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,i){if(e.request)return t.getJSON(e.request,i);if("string"==typeof e.data)try{i(null,JSON.parse(e.data))}catch(t){i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}else i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class kt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:It},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}setReferrer(t,e){this.referrer=e}setImages(t,e,i){this.availableImages[t]=e;for(const i in this.workerSources[t]){const n=this.workerSources[t][i];for(const t in n)n[t].availableImages=e}i()}setLayers(t,e,i){this.getLayerIndex(t).replace(e),i()}updateLayers(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()}loadTile(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)}loadDEMTile(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)}reloadTile(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)}abortTile(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)}removeTile(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)}removeDEMTile(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)}removeSource(t,e,i){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,i):i()}loadWorkerSource(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}}syncRTLPluginState(e,i,n){try{t.plugin.setState(i);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const i=t.plugin.isParsed();n(i?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),i)}}catch(t){n(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e}getWorkerSource(t,e,i){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][i]){const n={send:(e,i,n)=>{this.actor.send(e,i,n,t)}};this.workerSources[t][e][i]=new this.workerSourceTypes[e](n,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][i]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new h),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,i){t.enforceCacheSizeLimit(i)}}return t.isWorker()&&(self.worker=new kt(self)),kt})),n(0,(function(t){var e=i;function i(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===n[e=t&&t.failIfMajorPerformanceCaveat]&&(n[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),n[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var n={};function r(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!r(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!r(t[i],e[i]))return!1;return!0}return t===e}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class a{static testProp(t){if(!a.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in a.docStyle)return t[e];return t[0]}static create(t,e,i){const n=window.document.createElement(t);return void 0!==e&&(n.className=e),i&&i.appendChild(n),n}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){a.docStyle&&a.selectProp&&(a.userSelect=a.docStyle[a.selectProp],a.docStyle[a.selectProp]="none")}static enableDrag(){a.docStyle&&a.selectProp&&(a.docStyle[a.selectProp]=a.userSelect)}static setTransform(t,e){t.style[a.transformProp]=e}static addEventListener(t,e,i,n={}){t.addEventListener(e,i,"passive"in n?n:n.capture)}static removeEventListener(t,e,i,n={}){t.removeEventListener(e,i,"passive"in n?n:n.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",a.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",a.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",a.suppressClickInternal,!0)}),0)}static mousePos(e,i){const n=e.getBoundingClientRect();return new t.pointGeometry(i.clientX-n.left-e.clientLeft,i.clientY-n.top-e.clientTop)}static touchPos(e,i){const n=e.getBoundingClientRect(),r=[];for(let a=0;a<i.length;a++)r.push(new t.pointGeometry(i[a].clientX-n.left-e.clientLeft,i[a].clientY-n.top-e.clientTop));return r}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}a.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,a.selectProp=a.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),a.transformProp=a.testProp(["transform","WebkitTransform"]);class s{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeSpriteURL(t,e,i){const n=function(t){const e=t.match(o);if(!e)throw new Error(`Unable to parse URL "${t}"`);return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}(t);return n.path+=`${e}${i}`,function(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}(n)}setTransformRequest(t){this._transformRequestFn=t}}const o=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class l{constructor(t,e,i,n){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,n)}update(e,i,n){const{width:r,height:a}=e,s=!(this.size&&this.size[0]===r&&this.size[1]===a||n),{context:o}=this,{gl:l}=o;if(this.useMipmap=Boolean(i&&i.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!i||!1!==i.premultiply)),s)this.size=[r,a],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,r,a,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:i,y:s}=n||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texSubImage2D(l.TEXTURE_2D,0,i,s,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,i,s,r,a,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(t,e,i){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function h(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class u extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,e)&&(this.images[t]=e)}_validate(e,i){let n=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),n=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),n=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),n=!1),n}_validateStretch(t,e){if(!t)return!0;let i=0;for(const n of t){if(n[0]<i||n[1]<n[0]||e<n[1])return!1;i=n[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){const i=this.images[t];if(i.data.width!==e.data.width||i.data.height!==e.data.height)throw new Error(`size mismatch between old image (${i.data.width}x${i.data.height}) and new image (${e.data.width}x${e.data.height}).`);e.version=i.version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let i=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,i){const n={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?n[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,n)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const i=this.patterns[e],n=this.getImage(e);if(!n)return null;if(i&&i.position.version===n.version)return i.position;if(i)i.position.version=n.version;else{const i={w:n.data.width+2,h:n.data.height+2,x:0,y:0},r=new t.ImagePosition(i,n);this.patterns[e]={bin:i,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(t){const e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:i,h:n}=t.potpack(e),r=this.atlasImage;r.resize({width:i||1,height:n||1});for(const e in this.patterns){const{bin:i}=this.patterns[e],n=i.x+1,a=i.y+1,s=this.images[e].data,o=s.width,l=s.height;t.RGBAImage.copy(s,r,{x:0,y:0},{x:n,y:a},{width:o,height:l}),t.RGBAImage.copy(s,r,{x:0,y:l-1},{x:n,y:a-1},{width:o,height:1}),t.RGBAImage.copy(s,r,{x:0,y:0},{x:n,y:a+l},{width:o,height:1}),t.RGBAImage.copy(s,r,{x:o-1,y:0},{x:n-1,y:a},{width:1,height:l}),t.RGBAImage.copy(s,r,{x:0,y:0},{x:n+o,y:a},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const i of e){if(this.callbackDispatchedThisFrame[i])continue;this.callbackDispatchedThisFrame[i]=!0;const e=this.images[i];e||t.warnOnce(`Image with ID: "${i}" was not found`),h(e)&&this.updateImage(i,e)}}}const c=1e20;function d(t,e,i,n,r,a,s,o,l){for(let h=e;h<e+n;h++)m(t,i*a+h,a,r,s,o,l);for(let h=i;h<i+r;h++)m(t,h*a+e,1,n,s,o,l)}function m(t,e,i,n,r,a,s){a[0]=0,s[0]=-c,s[1]=c,r[0]=t[e];for(let o=1,l=0,h=0;o<n;o++){r[o]=t[e+o*i];const n=o*o;do{const t=a[l];h=(r[o]-r[t]+n-t*t)/(o-t)/2}while(h<=s[l]&&--l>-1);l++,a[l]=o,s[l]=h,s[l+1]=c}for(let o=0,l=0;o<n;o++){for(;s[l+1]<o;)l++;const n=a[l],h=o-n;t[e+o*i]=r[n]+h*h}}class p{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(e,i){const n=[];for(const t in e)for(const i of e[t])n.push({stack:t,id:i});t.asyncAll(n,(({stack:t,id:e},i)=>{let n=this.entries[t];n||(n=this.entries[t]={glyphs:{},requests:{},ranges:{}});let r=n.glyphs[e];if(void 0!==r)return void i(null,{stack:t,id:e,glyph:r});if(r=this._tinySDF(n,t,e),r)return n.glyphs[e]=r,void i(null,{stack:t,id:e,glyph:r});const a=Math.floor(e/256);if(256*a>65535)return void i(new Error("glyphs > 65535 not supported"));if(n.ranges[a])return void i(null,{stack:t,id:e,glyph:r});let s=n.requests[a];s||(s=n.requests[a]=[],p.loadGlyphRange(t,a,this.url,this.requestManager,((t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(n.glyphs[+t]=e[+t]);n.ranges[a]=!0}for(const i of s)i(t,e);delete n.requests[a]}))),s.push(((n,r)=>{n?i(n):r&&i(null,{stack:t,id:e,glyph:r[e]||null})}))}),((t,e)=>{if(t)i(t);else if(e){const t={};for(const{stack:i,id:n,glyph:r}of e)(t[i]||(t[i]={}))[n]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics};i(null,t)}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.unicodeBlockLookup["CJK Unified Ideographs"](e)||t.unicodeBlockLookup["Hangul Syllables"](e)||t.unicodeBlockLookup.Hiragana(e)||t.unicodeBlockLookup.Katakana(e))}_tinySDF(e,i,n){const r=this.localIdeographFontFamily;if(!r)return;if(!this._doesCharSupportLocalGlyph(n))return;let a=e.tinySDF;if(!a){let t="400";/bold/i.test(i)?t="900":/medium/i.test(i)?t="500":/light/i.test(i)&&(t="200"),a=e.tinySDF=new p.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:r,fontWeight:t})}const s=a.draw(String.fromCharCode(n));return{id:n,bitmap:new t.AlphaImage({width:s.width||30,height:s.height||30},s.data),metrics:{width:s.glyphWidth||24,height:s.glyphHeight||24,left:s.glyphLeft||0,top:s.glyphTop-27||-8,advance:s.glyphAdvance||24}}}}p.loadGlyphRange=function(e,i,n,r,a){const s=256*i,o=s+255,l=r.transformRequest(n.replace("{fontstack}",e).replace("{range}",`${s}-${o}`),t.ResourceType.Glyphs);t.getArrayBuffer(l,((e,i)=>{if(e)a(e);else if(i){const e={};for(const n of t.parseGlyphPbf(i))e[n.id]=n;a(null,e)}}))},p.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:i=8,cutoff:n=.25,fontFamily:r="sans-serif",fontWeight:a="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=n,this.radius=i;const o=this.size=t+4*e,l=this._createCanvas(o),h=this.ctx=l.getContext("2d",{willReadFrequently:!0});h.font=`${s} ${a} ${t}px ${r}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:n,actualBoundingBoxLeft:r,actualBoundingBoxRight:a}=this.ctx.measureText(t),s=Math.ceil(i),o=Math.min(this.size-this.buffer,Math.ceil(a-r)),l=Math.min(this.size-this.buffer,s+Math.ceil(n)),h=o+2*this.buffer,u=l+2*this.buffer,m=Math.max(h*u,0),p=new Uint8ClampedArray(m),f={data:p,width:h,height:u,glyphWidth:o,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===o||0===l)return f;const{ctx:y,buffer:g,gridInner:_,gridOuter:v}=this;y.clearRect(g,g,o,l),y.fillText(t,g,g+s);const b=y.getImageData(g,g,o,l);v.fill(c,0,m),_.fill(0,0,m);for(let t=0;t<l;t++)for(let e=0;e<o;e++){const i=b.data[4*(t*o+e)+3]/255;if(0===i)continue;const n=(t+g)*h+e+g;if(1===i)v[n]=0,_[n]=c;else{const t=.5-i;v[n]=t>0?t*t:0,_[n]=t<0?t*t:0}}d(v,0,0,h,u,h,this.f,this.v,this.z),d(_,g,g,o,l,h,this.f,this.v,this.z);for(let t=0;t<m;t++){const e=Math.sqrt(v[t])-Math.sqrt(_[t]);p[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return f}};const f=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))}interpolate(e,i,n){return{x:t.number(e.x,i.x,n),y:t.number(e.y,i.y,n),z:t.number(e.z,i.z,n)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),y="-transition";class g extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(f),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,i={}){if(!this._validate(t.validateLight,e,i))for(const t in e){const i=e[t];t.endsWith(y)?this._transitionable.setTransition(t.slice(0,-11),i):this._transitionable.setValue(t,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,i,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class _{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]}getDashRanges(t,e,i){const n=[];let r=t.length%2==1?-t[t.length-1]*i:0,a=t[0]*i,s=!0;n.push({left:r,right:a,isDash:s,zeroLength:0===t[0]});let o=t[0];for(let e=1;e<t.length;e++){s=!s;const l=t[e];r=o*i,o+=l,a=o*i,n.push({left:r,right:a,isDash:s,zeroLength:0===l})}return n}addRoundDash(t,e,i){const n=e/2;for(let e=-i;e<=i;e++){const r=this.width*(this.nextRow+i+e);let a=0,s=t[a];for(let o=0;o<this.width;o++){o/s.right>1&&(s=t[++a]);const l=Math.abs(o-s.left),h=Math.abs(o-s.right),u=Math.min(l,h);let c;const d=e/i*(n+1);if(s.isDash){const t=n-Math.abs(d);c=Math.sqrt(u*u+t*t)}else c=n-Math.sqrt(u*u+d*d);this.data[r+o]=Math.max(0,Math.min(255,c+128))}}}addRegularDash(t){for(let e=t.length-1;e>=0;--e){const i=t[e],n=t[e+1];i.zeroLength?t.splice(e,1):n&&n.isDash===i.isDash&&(n.left=i.left,t.splice(e,1))}const e=t[0],i=t[t.length-1];e.isDash===i.isDash&&(e.left=i.left-this.width,i.right=e.right+this.width);const n=this.width*this.nextRow;let r=0,a=t[r];for(let e=0;e<this.width;e++){e/a.right>1&&(a=t[++r]);const i=Math.abs(e-a.left),s=Math.abs(e-a.right),o=Math.min(i,s);this.data[n+e]=Math.max(0,Math.min(255,(a.isDash?o:-o)+128))}}addDash(e,i){const n=i?7:0,r=2*n+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;let a=0;for(let t=0;t<e.length;t++)a+=e[t];if(0!==a){const t=this.width/a,r=this.getDashRanges(e,this.width,t);i?this.addRoundDash(r,t,n):this.addRegularDash(r)}const s={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:a};return this.nextRow+=r,this.dirty=!0,s}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class v{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const n=this.workerPool.acquire(this.id);for(let t=0;t<n.length;t++){const e=new v.Actor(n[t],i,this.id);e.name=`Worker ${t}`,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,i,n){t.asyncAll(this.actors,((t,n)=>{t.send(e,i,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function b(e,i,n){const r=function(i,r){if(i)return n(i);if(r){const i=t.pick(t.extend(r,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);r.vector_layers&&(i.vectorLayers=r.vector_layers,i.vectorLayerIds=i.vectorLayers.map((t=>t.id))),n(null,i)}};return e.url?t.getJSON(i.transformRequest(e.url,t.ResourceType.Source),r):t.exported.frame((()=>r(null,e)))}v.Actor=t.Actor;class M{constructor(e,i,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=n||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),s=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=n&&e.x<a&&e.y>=r&&e.y<s}}class x extends t.Evented{constructor(e,i,n,r){if(super(),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=b(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new M(i.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,i){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function a(n,r){return delete e.request,e.aborted?i(null):n&&404!==n.status?i(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",r,a.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",r,a.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class w extends t.Evented{constructor(e,i,n,r){super(),this.id=e,this.dispatcher=n,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=b(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new M(i.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,i){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),((n,r,a)=>{if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(a);const n=this.map.painter.context,s=n.gl;e.texture=this.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new l(n,r,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),i(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let S;class A extends w{constructor(e,i,n,r){super(e,i,n,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,i){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function r(t,n){t&&(e.state="errored",i(t)),n&&(e.dem=n,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),function(n,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(a){this.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;const i=t.isImageBitmap(a)&&(null==S&&(S="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),S)?a:t.exported.getImageData(a,1),n={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:i,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",n,r.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)}_getNeighboringTiles(e){const i=e.canonical,n=Math.pow(2,i.z),r=(i.x-1+n)%n,a=0===i.x?e.wrap-1:e.wrap,s=(i.x+1+n)%n,o=i.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,o,i.z,s,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,o,i.z,s,i.y-1).key]={backfilled:!1}),i.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,o,i.z,s,i.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class T extends t.Evented{constructor(e,i,n,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=n.getActor(),this.setEventedParent(r),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},n),this}_updateWorkerData(e){const i=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(i.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(n),this._pendingLoads++,this.fire(new t.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,i,((i,n)=>{if(this._pendingLoads--,this._removed||n&&n.abandoned)return void this.fire(new t.Event("dataabort",{dataType:"source",sourceDataType:e}));let r=null;if(n&&n.resourceTiming&&n.resourceTiming[this.id]&&(r=n.resourceTiming[this.id].slice(0)),i)return void this.fire(new t.ErrorEvent(i));const a={dataType:"source",sourceDataType:e};this._collectResourceTiming&&r&&r.length>0&&t.extend(a,{resourceTiming:r}),this.fire(new t.Event("data",a))}))}loaded(){return 0===this._pendingLoads}loadTile(t,e){const i=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const n={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(i,n,((n,r)=>(delete t.request,t.unloadVectorData(),t.aborted?e(null):n?e(n):(t.loadVectorData(r,this.map.painter,"reloadTile"===i),e(null)))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var C=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class I extends t.Evented{constructor(t,e,i,n){super(),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=e}load(e,i){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,r)=>{this._loaded=!0,n?this.fire(new t.ErrorEvent(n)):r&&(this.image=r,e&&(this.coordinates=e),i&&i(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let i=1/0,n=1/0,r=-1/0,a=-1/0;for(const t of e)i=Math.min(i,t.x),n=Math.min(n,t.y),r=Math.max(r,t.x),a=Math.max(a,t.y);const s=Math.max(r-i,a-n),o=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),l=Math.pow(2,o);return new t.CanonicalTileID(o,Math.floor((i+r)/2*l),Math.floor((n+a)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const n=i.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,C.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class k extends I{constructor(t,e,i,n){super(t,e,i,n),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const i of e.urls)this.urls.push(this.map._requestManager.transformRequest(i,t.ResourceType.Source).url);t.getVideo(this.urls,((e,i)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,C.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new l(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class P extends I{constructor(e,i,n,r){super(e,i,n,r),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,n=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,C.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l(i,this.canvas,n.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const E={vector:x,raster:w,"raster-dem":A,geojson:T,video:k,image:I,canvas:P};function D(e,i){const n=t.create();return t.translate(n,n,[1,1,0]),t.scale(n,n,[.5*e.width,.5*e.height,1]),t.multiply(n,n,e.calculatePosMatrix(i.toUnwrapped()))}function L(t,e,i,n,r,a){const s=function(t,e,i){if(t)for(const n of t){const t=e[n];if(t&&t.source===i&&"fill-extrusion"===t.type)return!0}else for(const t in e){const n=e[t];if(n.source===i&&"fill-extrusion"===n.type)return!0}return!1}(r&&r.layers,e,t.id),o=a.maxPitchScaleFactor(),l=t.tilesIn(n,o,s);l.sort(z);const h=[];for(const n of l)h.push({wrappedTileID:n.tileID.wrapped().key,queryResults:n.tile.queryRenderedFeatures(e,i,t._state,n.queryGeometry,n.cameraQueryGeometry,n.scale,r,a,o,D(t.transform,n.tileID))});const u=function(t){const e={},i={};for(const n of t){const t=n.queryResults,r=n.wrappedTileID,a=i[r]=i[r]||{};for(const i in t){const n=t[i],r=a[i]=a[i]||{},s=e[i]=e[i]||[];for(const t of n)r[t.featureIndex]||(r[t.featureIndex]=!0,s.push(t))}}return e}(h);for(const e in u)u[e].forEach((e=>{const i=e.feature,n=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return u}function z(t,e){const i=t.tileID,n=e.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}class F{constructor(e,i){this.tileID=e,this.uid=t.uniqueId(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const i=e+this.timeAdded;i<t.exported.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.textures.forEach((e=>t.saveTileTexture(e))),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(e,i,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){const i={};if(!e)return i;for(const n of t){const t=n.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){n.layers=t,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)i[e.id]=n}}return i}(e.buckets,i.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const i=this.buckets[e];if(i instanceof t.SymbolBucket){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const i=this.buckets[e];if(i instanceof t.SymbolBucket&&i.hasRTLText){this.hasRTLText=!0,t.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const t in this.buckets){const e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(t).queryRadius(e))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const i=this.buckets[e];i.uploadPending()&&i.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,i,n,r,a,s,o,l,h){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:a,tileSize:this.tileSize,pixelPosMatrix:h,transform:o,params:s,queryPadding:this.queryPadding*l},t,e,i):{}}querySourceFeatures(e,i){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),a=i?i.sourceLayer:"",s=r._geojsonTileLayer||r[a];if(!s)return;const o=t.createFilter(i&&i.filter),{z:l,x:h,y:u}=this.tileID.canonical,c={z:l,x:h,y:u};for(let i=0;i<s.length;i++){const r=s.feature(i);if(o.needGeometry){const e=t.toEvaluationFeature(r,!0);if(!o.filter(new t.EvaluationParameters(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!o.filter(new t.EvaluationParameters(this.tileID.overscaledZ),r))continue;const d=n.getId(r,a),m=new t.GeoJSONFeature(r,l,h,u,d);m.tile=c,e.push(m)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const i=this.expirationTime;if(e.cacheControl){const i=t.parseCacheControl(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const t=Date.now();let e=!1;if(this.expirationTime>t)e=!1;else if(i)if(this.expirationTime<i)e=!0;else{const n=this.expirationTime-i;n?this.expirationTime=t+Math.max(n,3e4):e=!0}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const n in this.buckets){if(!e.style.hasLayer(n))continue;const r=this.buckets[n],a=r.layers[0].sourceLayer||"_geojsonTileLayer",s=i[a],o=t[a];if(!s||!o||0===Object.keys(o).length)continue;r.update(o,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=t.exported.now()+e}setDependencies(t,e){const i={};for(const t of e)i[t]=!0;this.dependencies[t]=i}hasDependency(t,e){for(const i of t){const t=this.dependencies[i];if(t)for(const i of e)if(t[i])return!0}return!1}}class O{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,i){const n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const r={value:e,timeout:void 0};if(void 0!==i&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),i)),this.data[n].push(r),this.order.push(n),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const i=t.wrapped().key,n=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][n];return this.data[i].splice(n,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const i in this.data)for(const n of this.data[i])t(n.value)||e.push(n);for(const t of e)this.remove(t.value.tileID,t)}}class R{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,i,n){const r=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},t.extend(this.stateChanges[e][r],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])n[t]||(this.deletedStates[e][r][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][t]&&delete this.deletedStates[e][r][t]}removeFeatureState(t,e,i){if(null===this.deletedStates[t])return;const n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(i in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][i]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}getState(e,i){const n=String(i),r=t.extend({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][i];if(null===t)return{};for(const e in t)delete r[e]}return r}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(e,i){const n={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const i={};for(const n in this.stateChanges[e])this.state[e][n]||(this.state[e][n]={}),t.extend(this.state[e][n],this.stateChanges[e][n]),i[n]=this.state[e][n];n[e]=i}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const i={};if(null===this.deletedStates[e])for(const t in this.state[e])i[t]={},this.state[e][t]={};else for(const t in this.deletedStates[e]){if(null===this.deletedStates[e][t])this.state[e][t]={};else for(const i of Object.keys(this.deletedStates[e][t]))delete this.state[e][t][i];i[t]=this.state[e][t]}n[e]=n[e]||{},t.extend(n[e],i)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const t in e)e[t].setFeatureState(n,i)}}class N extends t.Evented{constructor(e,i,n){super(),this.id=e,this.dispatcher=n,this.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(e,i,n,r){const a=new E[i.type](e,i,n,r);if(a.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${a.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a}(e,i,n,this),this._tiles={},this._cache=new O(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new R}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,e){return this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(e){this._source.abortTile&&this._source.abortTile(e,(()=>{})),this._source.fire(new t.Event("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(B).map((t=>t.key))}getRenderableIds(e){const i=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&i.push(this._tiles[t]);return e?i.sort(((e,i)=>{const n=e.tileID,r=i.tileID,a=new t.pointGeometry(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),s=new t.pointGeometry(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||s.y-a.y||s.x-a.x})).map((t=>t.tileID.key)):i.map((t=>t.tileID)).sort(B).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,e){const i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))}_tileLoaded(e,i,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform,this.terrain));e.timeAdded=t.exported.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(t){const e=this.getRenderableIds();for(let n=0;n<e.length;n++){const r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);i(t,e),i(e,t)}}function i(t,e){t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0;let i=e.tileID.canonical.x-t.tileID.canonical.x;const n=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===i&&0===n||Math.abs(n)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,n),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,i,n){for(const r in this._tiles){let a=this._tiles[r];if(n[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>i)continue;let s=a.tileID;for(;a&&a.tileID.overscaledZ>e+1;){const t=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[t.key],a&&a.hasData()&&(s=t)}let o=s;for(;o.overscaledZ>e;)if(o=o.scaledTo(o.overscaledZ-1),t[o.key]){n[s.key]=s;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(let i=t.overscaledZ-1;i>=e;i--){const e=t.scaledTo(i),n=this._getLoadedTile(e);if(n)return n}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,n=Math.floor(e*i*5),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const i in this._tiles){const n=this._tiles[i];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),t[n.tileID.key]=n}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}update(e,i){if(this.transform=e,this.terrain=i,!this._sourceLoaded||this._paused)return;let n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:i}),this._source.hasTile&&(n=n.filter((t=>this._source.hasTile(t))))):n=[];const r=e.coveringZoomLevel(this._source),a=Math.max(r-N.maxOverzooming,this._source.minzoom),s=Math.max(r+N.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const t={};for(const e of n)if(e.canonical.z>this._source.minzoom){const i=e.scaledTo(e.canonical.z-1);t[i.key]=i;const n=e.scaledTo(Math.max(this._source.minzoom,Math.min(e.canonical.z,5)));t[n.key]=n}n=n.concat(Object.values(t))}const o=this._updateRetainedTiles(n,r);if(j(this._source.type)){const e={},l={},h=Object.keys(o);for(const i of h){const n=o[i],r=this._tiles[i];if(!r||r.fadeEndTime&&r.fadeEndTime<=t.exported.now())continue;const s=this.findLoadedParent(n,a);s&&(this._addTile(s.tileID),e[s.tileID.key]=s.tileID),l[i]=n}this._retainLoadedChildren(l,r,s,o);for(const t in e)o[t]||(this._coveredTiles[t]=!0,o[t]=e[t]);if(i){const t={},e={};for(const i of n)this._tiles[i.key].hasData()?t[i.key]=i:e[i.key]=i;for(const i in e){const n=e[i].children(this._source.maxzoom);this._tiles[n[0].key]&&this._tiles[n[1].key]&&this._tiles[n[2].key]&&this._tiles[n[3].key]&&(t[n[0].key]=o[n[0].key]=n[0],t[n[1].key]=o[n[1].key]=n[1],t[n[2].key]=o[n[2].key]=n[2],t[n[3].key]=o[n[3].key]=n[3],delete e[i])}for(const i in e){const n=this.findLoadedParent(e[i],this._source.minzoom);if(n){t[n.tileID.key]=o[n.tileID.key]=n.tileID;for(const e in t)t[e].isChildOf(n.tileID)&&delete t[e]}}for(const e in this._tiles)t[e]||(this._coveredTiles[e]=!0)}}for(const t in o)this._tiles[t].clearFadeHold();const l=t.keysDifference(this._tiles,o);for(const t of l){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){const i={},n={},r=Math.max(e-N.maxOverzooming,this._source.minzoom),a=Math.max(e+N.maxUnderzooming,this._source.minzoom),s={};for(const n of t){const t=this._addTile(n);i[n.key]=n,t.hasData()||e<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,e,a,i);for(const a of t){let t=this._tiles[a.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){const t=a.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){i[t.key]=t;continue}}else{const t=a.children(this._source.maxzoom);if(i[t[0].key]&&i[t[1].key]&&i[t[2].key]&&i[t[3].key])continue}let s=t.wasRequested();for(let e=a.overscaledZ-1;e>=r;--e){const r=a.scaledTo(e);if(n[r.key])break;if(n[r.key]=!0,t=this.getTile(r),!t&&s&&(t=this._addTile(r)),t&&(i[r.key]=r,s=t.wasRequested(),t.hasData()))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let i,n=this._tiles[t].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){i=this._loadedParentTiles[n.key];break}e.push(n.key);const t=n.scaledTo(n.overscaledZ-1);if(i=this._getLoadedTile(t),i)break;n=t}for(const t of e)this._loadedParentTiles[t]=i}}_addTile(e){let i=this._tiles[e.key];if(i)return i;i=this._cache.getAndRemove(e),i&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));const n=i;return i||(i=new F(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i.uses++,this._tiles[e.key]=i,n||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),i))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(e,i,n){const r=[],a=this.transform;if(!a)return r;const s=n?a.getCameraQueryGeometry(e):e,o=e.map((t=>a.pointCoordinate(t,this.terrain))),l=s.map((t=>a.pointCoordinate(t,this.terrain))),h=this.getIds();let u=1/0,c=1/0,d=-1/0,m=-1/0;for(const t of l)u=Math.min(u,t.x),c=Math.min(c,t.y),d=Math.max(d,t.x),m=Math.max(m,t.y);for(let e=0;e<h.length;e++){const n=this._tiles[h[e]];if(n.holdingForFade())continue;const s=n.tileID,p=Math.pow(2,a.zoom-n.tileID.overscaledZ),f=i*n.queryPadding*t.EXTENT/n.tileSize/p,y=[s.getTilePoint(new t.MercatorCoordinate(u,c)),s.getTilePoint(new t.MercatorCoordinate(d,m))];if(y[0].x-f<t.EXTENT&&y[0].y-f<t.EXTENT&&y[1].x+f>=0&&y[1].y+f>=0){const t=o.map((t=>s.getTilePoint(t))),e=l.map((t=>s.getTilePoint(t)));r.push({tile:n,tileID:s,queryGeometry:t,cameraQueryGeometry:e,scale:p})}}return r}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.posMatrix=this.transform.calculatePosMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(j(this._source.type))for(const e in this._tiles){const i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.exported.now())return!0}return!1}setFeatureState(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)}removeFeatureState(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,i){const n=this._tiles[t];n&&n.setDependencies(e,i)}reloadTilesForDependencies(t,e){for(const i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((i=>!i.hasDependency(t,e)))}}function B(t,e){const i=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function j(t){return"raster"===t||"image"===t||"video"===t}N.maxOverzooming=10,N.maxUnderzooming=3;const H="mapboxgl_preloaded_worker_pool";class U{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<U.workerCount;)this.workers.push(new Worker(Mr.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[H]}numActive(){return Object.keys(this.active).length}}const V=Math.floor(t.exported.hardwareConcurrency/2);let G;function $(){return G||(G=new U),G}function Z(e,i){const n={};for(const t in e)"ref"!==t&&(n[t]=e[t]);return t.refProperties.forEach((t=>{t in i&&(n[t]=i[t])})),n}function q(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Z(t[i],e[t[i].ref]));return t}U.workerCount=Math.max(Math.min(V,6),1);const Y={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function W(t,e,i){i.push({command:Y.addSource,args:[t,e[t]]})}function J(t,e,i){e.push({command:Y.removeSource,args:[t]}),i[t]=!0}function X(t,e,i,n){J(t,i,n),W(t,e,i)}function K(t,e,i){let n;for(n in t[i])if(Object.prototype.hasOwnProperty.call(t[i],n)&&"data"!==n&&!r(t[i][n],e[i][n]))return!1;for(n in e[i])if(Object.prototype.hasOwnProperty.call(e[i],n)&&"data"!==n&&!r(t[i][n],e[i][n]))return!1;return!0}function Q(t,e,i,n,a,s){let o;for(o in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,o)&&(r(t[o],e[o])||i.push({command:s,args:[n,o,e[o],a]}));for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&!Object.prototype.hasOwnProperty.call(t,o)&&(r(t[o],e[o])||i.push({command:s,args:[n,o,e[o],a]}))}function tt(t){return t.id}function et(t,e){return t[e.id]=e,t}class it{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let i=1,n=this._distances[i];const r=e*this.paddedLength+this.padding;for(;n<r&&i<this._distances.length;)n=this._distances[++i];const a=i-1,s=this._distances[a],o=n-s,l=o>0?(r-s)/o:0;return this.points[a].mult(1-l).add(this.points[i].mult(l))}}function nt(t,e){let i=!0;return"always"===t||"never"!==t&&"never"!==e||(i=!1),i}class rt{constructor(t,e,i){const n=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(let t=0;t<this.xCellCount*this.yCellCount;t++)n.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)}insertCircle(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n)}_insertBoxCell(t,e,i,n,r,a){this.boxCells[r].push(a)}_insertCircleCell(t,e,i,n,r,a){this.circleCells[r].push(a)}_query(t,e,i,n,r,a,s){if(i<0||t>this.width||n<0||e>this.height)return[];const o=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(r)return[{key:null,x1:t,y1:e,x2:i,y2:n}];for(let t=0;t<this.boxKeys.length;t++)o.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],i=this.circles[3*t+1],n=this.circles[3*t+2];o.push({key:this.circleKeys[t],x1:e-n,y1:i-n,x2:e+n,y2:i+n})}}else this._forEachCell(t,e,i,n,this._queryCell,o,{hitTest:r,overlapMode:a,seenUids:{box:{},circle:{}}},s);return o}query(t,e,i,n){return this._query(t,e,i,n,!1,null)}hitTest(t,e,i,n,r,a){return this._query(t,e,i,n,!0,r,a).length>0}hitTestCircle(t,e,i,n,r){const a=t-i,s=t+i,o=e-i,l=e+i;if(s<0||a>this.width||l<0||o>this.height)return!1;const h=[];return this._forEachCell(a,o,s,l,this._queryCellCircle,h,{hitTest:!0,overlapMode:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},r),h.length>0}_queryCell(t,e,i,n,r,a,s,o){const{seenUids:l,hitTest:h,overlapMode:u}=s,c=this.boxCells[r];if(null!==c){const r=this.bboxes;for(const s of c)if(!l.box[s]){l.box[s]=!0;const c=4*s,d=this.boxKeys[s];if(t<=r[c+2]&&e<=r[c+3]&&i>=r[c+0]&&n>=r[c+1]&&(!o||o(d))&&(!h||!nt(u,d.overlapMode))&&(a.push({key:d,x1:r[c],y1:r[c+1],x2:r[c+2],y2:r[c+3]}),h))return!0}}const d=this.circleCells[r];if(null!==d){const r=this.circles;for(const s of d)if(!l.circle[s]){l.circle[s]=!0;const c=3*s,d=this.circleKeys[s];if(this._circleAndRectCollide(r[c],r[c+1],r[c+2],t,e,i,n)&&(!o||o(d))&&(!h||!nt(u,d.overlapMode))){const t=r[c],e=r[c+1],i=r[c+2];if(a.push({key:d,x1:t-i,y1:e-i,x2:t+i,y2:e+i}),h)return!0}}}return!1}_queryCellCircle(t,e,i,n,r,a,s,o){const{circle:l,seenUids:h,overlapMode:u}=s,c=this.boxCells[r];if(null!==c){const t=this.bboxes;for(const e of c)if(!h.box[e]){h.box[e]=!0;const i=4*e,n=this.boxKeys[e];if(this._circleAndRectCollide(l.x,l.y,l.radius,t[i+0],t[i+1],t[i+2],t[i+3])&&(!o||o(n))&&!nt(u,n.overlapMode))return a.push(!0),!0}}const d=this.circleCells[r];if(null!==d){const t=this.circles;for(const e of d)if(!h.circle[e]){h.circle[e]=!0;const i=3*e,n=this.circleKeys[e];if(this._circlesCollide(t[i],t[i+1],t[i+2],l.x,l.y,l.radius)&&(!o||o(n))&&!nt(u,n.overlapMode))return a.push(!0),!0}}}_forEachCell(t,e,i,n,r,a,s,o){const l=this._convertToXCellCoord(t),h=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),c=this._convertToYCellCoord(n);for(let d=l;d<=u;d++)for(let l=h;l<=c;l++)if(r.call(this,t,e,i,n,this.xCellCount*l+d,a,s,o))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,i,n,r,a){const s=n-t,o=r-e,l=i+a;return l*l>s*s+o*o}_circleAndRectCollide(t,e,i,n,r,a,s){const o=(a-n)/2,l=Math.abs(t-(n+o));if(l>o+i)return!1;const h=(s-r)/2,u=Math.abs(e-(r+h));if(u>h+i)return!1;if(l<=o||u<=h)return!0;const c=l-o,d=u-h;return c*c+d*d<=i*i}}function at(e,i,n,r,a){const s=t.create();return i?(t.scale(s,s,[1/a,1/a,1]),n||t.rotateZ(s,s,r.angle)):t.multiply(s,r.labelPlaneMatrix,e),s}function st(e,i,n,r,a){if(i){const i=t.clone(e);return t.scale(i,i,[a,a,1]),n||t.rotateZ(i,i,-r.angle),i}return r.glCoordMatrix}function ot(e,i,n){let r;n?(r=[e.x,e.y,n(e.x,e.y),1],t.transformMat4(r,r,i)):(r=[e.x,e.y,0,1],_t(r,r,i));const a=r[3];return{point:new t.pointGeometry(r[0]/a,r[1]/a),signedDistanceFromCamera:a}}function lt(t,e){return.5+t/e*.5}function ht(t,e){const i=t[0]/t[3],n=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&n>=-e[1]&&n<=e[1]}function ut(e,i,n,r,a,s,o,l,h,u){const c=r?e.textSizeData:e.iconSizeData,d=t.evaluateSizeForZoom(c,n.transform.zoom),m=[256/n.width*2+1,256/n.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();const f=e.lineVertexArray,y=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=n.transform.width/n.transform.height;let _=!1;for(let r=0;r<y.length;r++){const v=y.get(r);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!_){gt(v.numGlyphs,p);continue}let b;if(_=!1,u?(b=[v.anchorX,v.anchorY,u(v.anchorX,v.anchorY),1],t.transformMat4(b,b,i)):(b=[v.anchorX,v.anchorY,0,1],_t(b,b,i)),!ht(b,m)){gt(v.numGlyphs,p);continue}const M=lt(n.transform.cameraToCenterDistance,b[3]),x=t.evaluateSizeForFeature(c,d,v),w=o?x/M:x*M,S=new t.pointGeometry(v.anchorX,v.anchorY),A=ot(S,a,u).point,T={},C=mt(v,w,!1,l,i,a,s,e.glyphOffsetArray,f,p,A,S,T,g,h,u);_=C.useVertical,(C.notEnoughRoom||_||C.needsFlipping&&mt(v,w,!0,l,i,a,s,e.glyphOffsetArray,f,p,A,S,T,g,h,u).notEnoughRoom)&&gt(v.numGlyphs,p)}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function ct(t,e,i,n,r,a,s,o,l,h,u,c,d){const m=o.glyphStartIndex+o.numGlyphs,p=o.lineStartIndex,f=o.lineStartIndex+o.lineLength,y=e.getoffsetX(o.glyphStartIndex),g=e.getoffsetX(m-1),_=ft(t*y,i,n,r,a,s,o.segment,p,f,l,h,u,c,d);if(!_)return null;const v=ft(t*g,i,n,r,a,s,o.segment,p,f,l,h,u,c,d);return v?{first:_,last:v}:null}function dt(e,i,n,r){return e===t.WritingMode.horizontal&&Math.abs(n.y-i.y)>Math.abs(n.x-i.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<n.y:i.x>n.x)?{needsFlipping:!0}:null}function mt(e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y){const g=i/24,_=e.lineOffsetX*g,v=e.lineOffsetY*g;let b;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,i=e.lineStartIndex,a=e.lineStartIndex+e.lineLength,u=ct(g,l,_,v,n,c,d,e,h,s,m,f,y);if(!u)return{notEnoughRoom:!0};const M=ot(u.first.point,o,y).point,x=ot(u.last.point,o,y).point;if(r&&!n){const t=dt(e.writingMode,M,x,p);if(t)return t}b=[u.first];for(let r=e.glyphStartIndex+1;r<t-1;r++)b.push(ft(g*l.getoffsetX(r),_,v,n,c,d,e.segment,i,a,h,s,m,f,y));b.push(u.last)}else{if(r&&!n){const i=ot(d,a,y).point,n=e.lineStartIndex+e.segment+1,r=new t.pointGeometry(h.getx(n),h.gety(n)),s=ot(r,a,y),o=s.signedDistanceFromCamera>0?s.point:pt(d,r,i,1,a,y),l=dt(e.writingMode,i,o,p);if(l)return l}const i=ft(g*l.getoffsetX(e.glyphStartIndex),_,v,n,c,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,h,s,m,f,y);if(!i)return{notEnoughRoom:!0};b=[i]}for(const e of b)t.addDynamicAttributes(u,e.point,e.angle);return{}}function pt(t,e,i,n,r,a){const s=ot(t.add(t.sub(e)._unit()),r,a).point,o=i.sub(s);return i.add(o._mult(n/o.mag()))}function ft(e,i,n,r,a,s,o,l,h,u,c,d,m,p){const f=r?e-i:e+i;let y=f>0?1:-1,g=0;r&&(y*=-1,g=Math.PI),y<0&&(g+=Math.PI);let _=y>0?l+o:l+o+1,v=a,b=a,M=0,x=0;const w=Math.abs(f),S=[];for(;M+x<=w;){if(_+=y,_<l||_>=h)return null;if(b=v,S.push(v),v=d[_],void 0===v){const e=new t.pointGeometry(u.getx(_),u.gety(_)),i=ot(e,c,p);if(i.signedDistanceFromCamera>0)v=d[_]=i.point;else{const i=_-y;v=pt(0===M?s:new t.pointGeometry(u.getx(i),u.gety(i)),e,b,w-M+1,c,p)}}M+=x,x=b.dist(v)}const A=(w-M)/x,T=v.sub(b),C=T.mult(A)._add(b);C._add(T._unit()._perp()._mult(n*y));const I=g+Math.atan2(v.y-b.y,v.x-b.x);return S.push(C),{point:C,angle:m?I:0,path:S}}const yt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gt(t,e){for(let i=0;i<t;i++){const t=e.length;e.resize(t+4),e.float32.set(yt,3*t)}}function _t(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t[3]=i[3]*n+i[7]*r+i[15],t}const vt=100;class bt{constructor(t,e=new rt(t.width+200,t.height+200,25),i=new rt(t.width+200,t.height+200,25)){this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+vt,this.screenBottomBoundary=t.height+vt,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,e,i,n,r,a){const s=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY,a),o=i*s.perspectiveRatio,l=t.x1*o+s.point.x,h=t.y1*o+s.point.y,u=t.x2*o+s.point.x,c=t.y2*o+s.point.y;return!this.isInsideGrid(l,h,u,c)||"always"!==e&&this.grid.hitTest(l,h,u,c,e,r)||s.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,h,u,c],offscreen:this.isOffscreen(l,h,u,c)}}placeCollisionCircles(e,i,n,r,a,s,o,l,h,u,c,d,m,p){const f=[],y=new t.pointGeometry(i.anchorX,i.anchorY),g=ot(y,s,p),_=lt(this.transform.cameraToCenterDistance,g.signedDistanceFromCamera),v=(u?a/_:a*_)/t.ONE_EM,b=ot(y,o,p).point,M=ct(v,r,i.lineOffsetX*v,i.lineOffsetY*v,!1,b,y,i,n,o,{},!1,p);let x=!1,w=!1,S=!0;if(M){const i=.5*d*_+m,n=new t.pointGeometry(-100,-100),r=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),a=new it,s=M.first,o=M.last;let u=[];for(let t=s.path.length-1;t>=1;t--)u.push(s.path[t]);for(let t=1;t<o.path.length;t++)u.push(o.path[t]);const y=2.5*i;if(l){const t=u.map((t=>ot(t,l,p)));u=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let g=[];if(u.length>0){const e=u[0].clone(),i=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),i.x=Math.max(i.x,u[t].x),i.y=Math.max(i.y,u[t].y);g=e.x>=n.x&&i.x<=r.x&&e.y>=n.y&&i.y<=r.y?[u]:i.x<n.x||e.x>r.x||i.y<n.y||e.y>r.y?[]:t.clipLine([u],n.x,n.y,r.x,r.y)}for(const t of g){a.reset(t,.25*i);let n=0;n=a.length<=.5*i?1:Math.ceil(a.paddedLength/y)+1;for(let t=0;t<n;t++){const r=t/Math.max(n-1,1),s=a.lerp(r),o=s.x+vt,l=s.y+vt;f.push(o,l,i,0);const u=o-i,d=l-i,m=o+i,p=l+i;if(S=S&&this.isOffscreen(u,d,m,p),w=w||this.isInsideGrid(u,d,m,p),"always"!==e&&this.grid.hitTestCircle(o,l,i,e,c)&&(x=!0,!h))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!h&&x||!w||_<this.perspectiveRatioCutoff?[]:f,offscreen:S,collisionDetected:x}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let n=1/0,r=1/0,a=-1/0,s=-1/0;for(const o of e){const e=new t.pointGeometry(o.x+vt,o.y+vt);n=Math.min(n,e.x),r=Math.min(r,e.y),a=Math.max(a,e.x),s=Math.max(s,e.y),i.push(e)}const o=this.grid.query(n,r,a,s).concat(this.ignoredGrid.query(n,r,a,s)),l={},h={};for(const e of o){const n=e.key;if(void 0===l[n.bucketInstanceId]&&(l[n.bucketInstanceId]={}),l[n.bucketInstanceId][n.featureIndex])continue;const r=[new t.pointGeometry(e.x1,e.y1),new t.pointGeometry(e.x2,e.y1),new t.pointGeometry(e.x2,e.y2),new t.pointGeometry(e.x1,e.y2)];t.polygonIntersectsPolygon(i,r)&&(l[n.bucketInstanceId][n.featureIndex]=!0,void 0===h[n.bucketInstanceId]&&(h[n.bucketInstanceId]=[]),h[n.bucketInstanceId].push(n.featureIndex))}return h}insertCollisionBox(t,e,i,n,r,a){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:a,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,i,n,r,a){const s=i?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:r,collisionGroupID:a,overlapMode:e};for(let e=0;e<t.length;e+=4)s.insertCircle(o,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,i,n,r){let a;return r?(a=[i,n,r(i,n),1],t.transformMat4(a,a,e)):(a=[i,n,0,1],_t(a,a,e)),{point:new t.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+vt,(-a[1]/a[3]+1)/2*this.transform.height+vt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5}}isOffscreen(t,e,i,n){return i<vt||t>=this.screenRightBoundary||n<vt||e>this.screenBottomBoundary}isInsideGrid(t,e,i,n){return i>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function Mt(e,i,n){return i*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}class xt{constructor(t,e,i,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class wt{constructor(t,e,i,n,r){this.text=new xt(t?t.text:null,e,i,r),this.icon=new xt(t?t.icon:null,e,n,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class St{constructor(t,e,i){this.text=t,this.icon=e,this.skipFade=i}}class At{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Tt{constructor(t,e,i,n,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=r}}class Ct{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function It(e,i,n,r,a){const{horizontalAlign:s,verticalAlign:o}=t.getAnchorAlignment(e),l=-(s-.5)*i,h=-(o-.5)*n,u=t.evaluateVariableOffset(e,r);return new t.pointGeometry(l+u[0]*a,h+u[1]*a)}function kt(e,i,n,r,a,s){const{x1:o,x2:l,y1:h,y2:u,anchorPointX:c,anchorPointY:d}=e,m=new t.pointGeometry(i,n);return r&&m._rotate(a?s:-s),{x1:o+m.x,y1:h+m.y,x2:l+m.x,y2:u+m.y,anchorPointX:c,anchorPointY:d}}class Pt{constructor(t,e,i,n,r){this.transform=t.clone(),this.terrain=e,this.collisionIndex=new bt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new Ct(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,i,n,r){const a=n.getBucket(i),s=n.latestFeatureIndex;if(!a||!s||i.id!==a.layerIds[0])return;const o=n.collisionBoxArray,l=a.layers[0].layout,h=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/t.EXTENT,c=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),m="map"===l.get("text-rotation-alignment"),p=Mt(n,1,this.transform.zoom),f=at(c,d,m,this.transform,p);let y=null;if(d){const e=st(c,d,m,this.transform,p);y=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[a.bucketInstanceId]=new Tt(a.bucketInstanceId,s,a.sourceLayerIndex,a.index,n.tileID);const g={bucket:a,layout:l,posMatrix:c,textLabelPlaneMatrix:f,labelToScreenMatrix:y,scale:h,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:o,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(r)for(const t of a.sortKeyRanges){const{sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:r}=t;e.push({sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:r,parameters:g})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:g})}attemptAnchorPlacement(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f){const y=[c.textOffset0,c.textOffset1],g=It(t,i,n,y,r),_=this.collisionIndex.placeCollisionBox(kt(e,g.x,g.y,a,s,this.transform.angle),u,o,l,h.predicate,f);if((!p||0!==this.collisionIndex.placeCollisionBox(kt(p,g.x,g.y,a,s,this.transform.angle),u,o,l,h.predicate,f).box.length)&&_.box.length>0){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[c.crossTileID]&&this.prevPlacement.placements[c.crossTileID]&&this.prevPlacement.placements[c.crossTileID].text&&(e=this.prevPlacement.variableOffsets[c.crossTileID].anchor),0===c.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[c.crossTileID]={textOffset:y,width:i,height:n,anchor:t,textBoxScale:r,prevAnchor:e},this.markUsedJustification(d,t,c,m),d.allowVerticalPlacement&&(this.markUsedOrientation(d,m,c),this.placedOrientations[c.crossTileID]=m),{shift:g,placedGlyphBoxes:_}}}placeLayerBucketPart(e,i,n){const{bucket:r,layout:a,posMatrix:s,textLabelPlaneMatrix:o,labelToScreenMatrix:l,textPixelRatio:h,holdingForFade:u,collisionBoxArray:c,partiallyEvaluatedTextSize:d,collisionGroup:m}=e.parameters,p=a.get("text-optional"),f=a.get("icon-optional"),y=t.getOverlapMode(a,"text-overlap","text-allow-overlap"),g="always"===y,_=t.getOverlapMode(a,"icon-overlap","icon-allow-overlap"),v="always"===_,b="map"===a.get("text-rotation-alignment"),M="map"===a.get("text-pitch-alignment"),x="none"!==a.get("icon-text-fit"),w="viewport-y"===a.get("symbol-z-order"),S=g&&(v||!r.hasIconData()||f),A=v&&(g||!r.hasTextData()||p);!r.collisionArrays&&c&&r.deserializeCollisionBoxes(c);const T=(e,c)=>{if(i[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new St(!1,!1,!1));let v=!1,w=!1,T=!0,C=null,I={box:null,offscreen:null},k={box:null,offscreen:null},P=null,E=null,D=null,L=0,z=0,F=0;c.textFeatureIndex?L=c.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),c.verticalTextFeatureIndex&&(z=c.verticalTextFeatureIndex);const O=this.retainedQueryData[r.bucketInstanceId].tileID,R=this.terrain?(t,e)=>this.terrain.getElevation(O,t,e):null;for(const t of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const e=c[t];e&&(e.elevation=R?R(e.anchorPointX,e.anchorPointY):0)}const N=c.textBox;if(N){const i=i=>{let n=t.WritingMode.horizontal;if(r.allowVerticalPlacement&&!i&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,n=t,this.markUsedOrientation(r,n,e))}return n},n=(i,n)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&c.verticalTextBox){for(const e of r.writingModes)if(e===t.WritingMode.vertical?(I=n(),k=I):I=i(),I&&I.box&&I.box.length)break}else I=i()};if(a.get("text-variable-anchor")){let o=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];o.indexOf(t.anchor)>0&&(o=o.filter((e=>e!==t.anchor)),o.unshift(t.anchor))}const l=(t,i,n)=>{const a=t.x2-t.x1,l=t.y2-t.y1,u=e.textBoxScale,c=x&&"never"===_?i:null;let d={box:[],offscreen:!1};const p="never"!==y?2*o.length:o.length;for(let i=0;i<p;++i){const p=this.attemptAnchorPlacement(o[i%o.length],t,a,l,u,b,M,h,s,m,i>=o.length?y:"never",e,r,n,c,R);if(p&&(d=p.placedGlyphBoxes,d&&d.box&&d.box.length)){v=!0,C=p.shift;break}}return d};n((()=>l(N,c.iconBox,t.WritingMode.horizontal)),(()=>{const i=c.verticalTextBox;return r.allowVerticalPlacement&&!(I&&I.box&&I.box.length)&&e.numVerticalGlyphVertices>0&&i?l(i,c.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),I&&(v=I.box,T=I.offscreen);const u=i(I&&I.box);if(!v&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,u))}}else{const a=(t,i)=>{const n=this.collisionIndex.placeCollisionBox(t,y,h,s,m.predicate,R);return n&&n.box&&n.box.length&&(this.markUsedOrientation(r,i,e),this.placedOrientations[e.crossTileID]=i),n};n((()=>a(N,t.WritingMode.horizontal)),(()=>{const i=c.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?a(i,t.WritingMode.vertical):{box:null,offscreen:null}})),i(I&&I.box&&I.box.length)}}if(P=I,v=P&&P.box&&P.box.length>0,T=P&&P.offscreen,e.useRuntimeCollisionCircles){const i=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),h=t.evaluateSizeForFeature(r.textSizeData,d,i),u=a.get("text-padding");E=this.collisionIndex.placeCollisionCircles(y,i,r.lineVertexArray,r.glyphOffsetArray,h,s,o,l,n,M,m.predicate,e.collisionCircleDiameter,u,R),E.circles.length&&E.collisionDetected&&!n&&t.warnOnce("Collisions detected, but collision boxes are not shown"),v=g||E.circles.length>0&&!E.collisionDetected,T=T&&E.offscreen}if(c.iconFeatureIndex&&(F=c.iconFeatureIndex),c.iconBox){const t=t=>{const e=x&&C?kt(t,C.x,C.y,b,M,this.transform.angle):t;return this.collisionIndex.placeCollisionBox(e,_,h,s,m.predicate,R)};k&&k.box&&k.box.length&&c.verticalIconBox?(D=t(c.verticalIconBox),w=D.box.length>0):(D=t(c.iconBox),w=D.box.length>0),T=T&&D.offscreen}const B=p||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,j=f||0===e.numIconVertices;if(B||j?j?B||(w=w&&v):v=w&&v:w=v=w&&v,v&&P&&P.box&&this.collisionIndex.insertCollisionBox(P.box,y,a.get("text-ignore-placement"),r.bucketInstanceId,k&&k.box&&z?z:L,m.ID),w&&D&&this.collisionIndex.insertCollisionBox(D.box,_,a.get("icon-ignore-placement"),r.bucketInstanceId,F,m.ID),E&&(v&&this.collisionIndex.insertCollisionCircles(E.circles,y,a.get("text-ignore-placement"),r.bucketInstanceId,L,m.ID),n)){const t=r.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new At);for(let t=0;t<E.circles.length;t+=4)e.circles.push(E.circles[t+0]),e.circles.push(E.circles[t+1]),e.circles.push(E.circles[t+2]),e.circles.push(E.collisionDetected?1:0)}if(0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===r.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new St(v||S,w||A,T||r.justReloaded),i[e.crossTileID]=!0};if(w){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=r.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const i=t[e];T(r.symbolInstances.get(i),r.collisionArrays[i])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)T(r.symbolInstances.get(t),r.collisionArrays[t]);if(n&&r.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[r.bucketInstanceId];t.invert(e.invProjMatrix,s),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1}markUsedJustification(e,i,n,r){let a;a=r===t.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];const s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=a>=0&&t!==a?0:n.crossTileID)}markUsedOrientation(e,i,n){const r=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,a=i===t.WritingMode.vertical?i:0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];for(const t of s)e.text.placedSymbolArray.get(t).placedOrientation=r;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=a)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const n=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},a=e?e.variableOffsets:{},s=e?e.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],a=r[t];a?(this.opacities[t]=new wt(a,n,e.text,e.icon),i=i||e.text!==a.text.placed||e.icon!==a.icon.placed):(this.opacities[t]=new wt(null,n,e.text,e.icon,e.skipFade),i=i||e.text||e.icon)}for(const t in r){const e=r[t];if(!this.opacities[t]){const r=new wt(e,n,!1,!1);r.isHidden()||(this.opacities[t]=r,i=i||e.text.placed||e.icon.placed)}}for(const t in a)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=a[t]);for(const t in s)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=s[t]);if(e&&void 0===e.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const i={};for(const n of e){const e=n.getBucket(t);e&&n.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,i,n.collisionBoxArray)}}updateBucketOpacities(e,i,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const r=e.layers[0].layout,a=new wt(null,0,!1,!1,!0),s=r.get("text-allow-overlap"),o=r.get("icon-allow-overlap"),l=r.get("text-variable-anchor"),h="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),c="none"!==r.get("icon-text-fit"),d=new wt(null,0,s&&(o||!e.hasIconData()||r.get("icon-optional")),o&&(s||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);const m=(t,e,i)=>{for(let n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(i)};for(let n=0;n<e.symbolInstances.length;n++){const r=e.symbolInstances.get(n),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:o,crossTileID:p}=r;let f=this.opacities[p];i[p]?f=a:f||(f=d,this.opacities[p]=f),i[p]=!0;const y=r.numIconVertices>0,g=this.placedOrientations[r.crossTileID],_=g===t.WritingMode.vertical,v=g===t.WritingMode.horizontal||g===t.WritingMode.horizontalOnly;if(s>0||o>0){const t=Bt(f.text);m(e.text,s,_?jt:t),m(e.text,o,v?jt:t);const i=f.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||_?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=i||v?1:0);const n=this.variableOffsets[r.crossTileID];n&&this.markUsedJustification(e,n.anchor,r,g);const a=this.placedOrientations[r.crossTileID];a&&(this.markUsedJustification(e,"left",r,a),this.markUsedOrientation(e,a,r))}if(y){const t=Bt(f.icon),i=!(c&&r.verticalPlacedIconSymbolIndex&&_);r.placedIconSymbolIndex>=0&&(m(e.icon,r.numIconVertices,i?t:jt),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=f.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,r.numVerticalIconVertices,i?jt:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=f.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const i=e.collisionArrays[n];if(i){let n=new t.pointGeometry(0,0);if(i.textBox||i.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[p];e?(n=It(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),h&&n._rotate(u?this.transform.angle:-this.transform.angle)):t=!1}i.textBox&&Et(e.textCollisionBox.collisionVertexArray,f.text.placed,!t||_,n.x,n.y),i.verticalTextBox&&Et(e.textCollisionBox.collisionVertexArray,f.text.placed,!t||v,n.x,n.y)}const r=Boolean(!v&&i.verticalIconBox);i.iconBox&&Et(e.iconCollisionBox.collisionVertexArray,f.icon.placed,r,c?n.x:0,c?n.y:0),i.verticalIconBox&&Et(e.iconCollisionBox.collisionVertexArray,f.icon.placed,!r,c?n.x:0,c?n.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t}setStale(){this.stale=!0}}function Et(t,e,i,n,r){t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0)}const Dt=Math.pow(2,25),Lt=Math.pow(2,24),zt=Math.pow(2,17),Ft=Math.pow(2,16),Ot=Math.pow(2,9),Rt=Math.pow(2,8),Nt=Math.pow(2,1);function Bt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Dt+e*Lt+i*zt+e*Ft+i*Ot+e*Rt+i*Nt+e}const jt=0;class Ht{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,i,n,r){const a=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(a,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<a.length;)if(e.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,r())return!0;return!1}}class Ut{constructor(t,e,i,n,r,a,s,o){this.placement=new Pt(t,e,a,s,o),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,i,n){const r=t.exported.now(),a=()=>{const e=t.exported.now()-r;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=i[e[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=r)&&(!t.maxzoom||t.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new Ht(t)),this._inProgressLayer.continuePlacement(n[t.source],this.placement,this._showCollisionBoxes,t,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Vt=512/t.EXTENT/2;class Gt{constructor(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let i=0;i<e.length;i++){const n=e.get(i),r=n.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}getScaledCoordinates(e,i){const n=Vt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*n),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*n)}}findMatches(t,e,i){const n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let r=0;r<t.length;r++){const a=t.get(r);if(a.crossTileID)continue;const s=this.indexedSymbolInstances[a.key];if(!s)continue;const o=this.getScaledCoordinates(a,e);for(const t of s)if(Math.abs(t.coord.x-o.x)<=n&&Math.abs(t.coord.y-o.y)<=n&&!i[t.crossTileID]){i[t.crossTileID]=!0,a.crossTileID=t.crossTileID;break}}}}class $t{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const i=this.indexes[t],n={};for(const t in i){const r=i[t];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),n[r.tileID.key]=r}this.indexes[t]=n}this.lng=t}addBucket(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const n=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const r=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in r){const a=r[i];a.tileID.isChildOf(t)&&a.findMatches(e.symbolInstances,t,n)}else{const a=r[t.scaledTo(Number(i)).key];a&&a.findMatches(e.symbolInstances,t,n)}}for(let t=0;t<e.symbolInstances.length;t++){const r=e.symbolInstances.get(t);r.crossTileID||(r.crossTileID=i.generate(),n[r.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Gt(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const i in e.indexedSymbolInstances)for(const n of e.indexedSymbolInstances[i])delete this.usedCrossTileIDs[t][n.crossTileID]}removeStaleBuckets(t){let e=!1;for(const i in this.indexes){const n=this.indexes[i];for(const r in n)t[n[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[r]),delete n[r],e=!0)}return e}}class qt{constructor(){this.layerIndexes={},this.crossTileIDs=new $t,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,i){let n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Zt);let r=!1;const a={};n.handleWrapJump(i);for(const i of e){const e=i.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(i.tileID,e,this.crossTileIDs)&&(r=!0),a[e.bucketInstanceId]=!0)}return n.removeStaleBuckets(a)&&(r=!0),r}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}var Yt=t.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Wt extends t.Evented{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=t._cache.max,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const t in this._tiles){const e=this._tiles[t];e.textures.forEach((t=>t.destroy())),e.textures=[]}}update(e,i){this.sourceCache.update(e,i),this._renderableTilesKeys=[];for(const n of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:i}))this._renderableTilesKeys.push(n.key),this._tiles[n.key]||(n.posMatrix=new Float64Array(16),t.ortho(n.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),this._tiles[n.key]=new F(n,this.tileSize))}removeOutdated(t){const e={};this.renderHistory=this.renderHistory.filter(((t,e)=>this.renderHistory.indexOf(t)===e)).slice(0,this.renderHistorySize);for(const t of this._renderableTilesKeys)e[t]=!0;for(const t of this.renderHistory)e[t]=!0;for(const i in this._tiles)e[i]||(this._tiles[i].clearTextures(t),delete this._tiles[i])}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(e){const i={};for(const n of this._renderableTilesKeys){const r=this._tiles[n].tileID;if(r.canonical.equals(e.canonical)){const r=e.clone();r.posMatrix=new Float64Array(16),t.ortho(r.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),i[n]=r}else if(r.canonical.isChildOf(e.canonical)){const a=e.clone();a.posMatrix=new Float64Array(16);const s=r.canonical.z-e.canonical.z,o=r.canonical.x-(r.canonical.x>>s<<s),l=r.canonical.y-(r.canonical.y>>s<<s),h=t.EXTENT>>s;t.ortho(a.posMatrix,0,h,0,h,0,1),t.translate(a.posMatrix,a.posMatrix,[-o*h,-l*h,0]),i[n]=a}else if(e.canonical.isChildOf(r.canonical)){const a=e.clone();a.posMatrix=new Float64Array(16);const s=e.canonical.z-r.canonical.z,o=e.canonical.x-(e.canonical.x>>s<<s),l=e.canonical.y-(e.canonical.y>>s<<s),h=t.EXTENT>>s;t.ortho(a.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),t.translate(a.posMatrix,a.posMatrix,[o*h,l*h,0]),t.scale(a.posMatrix,a.posMatrix,[1/2**s,1/2**s,0]),i[n]=a}}return i}getSourceTile(t,e){const i=this.sourceCache._source;let n=t.overscaledZ-this.deltaZoom;if(n>i.maxzoom&&(n=i.maxzoom),n<i.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(n).key);let r=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!r||!r.dem)&&e)for(;n>=i.minzoom&&(!r||!r.dem);)r=this.sourceCache.getTileByID(t.scaledTo(n--).key);return r}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter((e=>e.timeLoaded>=t))}}class Jt{constructor(t,e,i){this.style=t,this.sourceCache=new Wt(e),this.options=i,this.exaggeration="number"==typeof i.exaggeration?i.exaggeration:1,this.elevationOffset="number"==typeof i.elevationOffset?i.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(e,i,n,r=t.EXTENT){if(!(i>=0&&i<r&&n>=0&&n<r))return this.elevationOffset;let a=0;const s=this.getTerrainData(e);if(s.tile&&s.tile.dem){const e=t.transformMat4$1([],[i/r*t.EXTENT,n/r*t.EXTENT],s.u_terrain_matrix),o=[e[0]*s.tile.dem.dim,e[1]*s.tile.dem.dim],l=[Math.floor(o[0]),Math.floor(o[1])],h=s.tile.dem.get(l[0],l[1]),u=s.tile.dem.get(l[0],l[1]+1),c=s.tile.dem.get(l[0]+1,l[1]),d=s.tile.dem.get(l[0]+1,l[1]+1);a=t.number(t.number(h,u,o[0]-l[0]),t.number(c,d,o[0]-l[0]),o[1]-l[1])}return a}rememberForRerender(t,e){for(const i in this.sourceCache._tiles){const n=this.sourceCache._tiles[i];(n.tileID.equals(e)||n.tileID.isChildOf(e))&&(t===this.sourceCache.sourceCache.id&&(n.timeLoaded=Date.now()),this._rerender[t]=this._rerender[t]||{},this._rerender[t][n.tileID.key]=!0)}}needsRerender(t,e){return this._rerender[t]&&this._rerender[t][e.key]}clearRerenderCache(){this._rerender={}}getElevation(e,i,n,r=t.EXTENT){return(this.getDEMElevation(e,i,n,r)+this.elevationOffset)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.style.map.painter.context,i=new t.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l(e,i,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l(e,new t.RGBAImage({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.identity([])}const i=this.sourceCache.getSourceTile(e,!0);if(i&&i.dem&&(!i.demTexture||i.needsTerrainPrepare)){const t=this.style.map.painter.context;i.demTexture=this.style.map.painter.getTileTexture(i.dem.stride),i.demTexture?i.demTexture.update(i.dem.getPixels(),{premultiply:!1}):i.demTexture=new l(t,i.dem.getPixels(),t.gl.RGBA,{premultiply:!1}),i.demTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),i.needsTerrainPrepare=!1}const n=i&&i+i.tileID.key+e.key;if(n&&!this._demMatrixCache[n]){const n=this.sourceCache.sourceCache._source.maxzoom;let r=e.canonical.z-i.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=n?r=e.canonical.z-n:t.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const a=e.canonical.x-(e.canonical.x>>r<<r),s=e.canonical.y-(e.canonical.y>>r<<r),o=t.fromScaling(new Float64Array(16),[1/(t.EXTENT<<r),1/(t.EXTENT<<r),0]);t.translate(o,o,[a*t.EXTENT,s*t.EXTENT,0]),this._demMatrixCache[e.key]={matrix:o,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:i&&i.dem&&i.dem.dim||1,u_terrain_matrix:n?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:i&&i.dem&&i.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(i&&i.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:i}}getRTTFramebuffer(){const t=this.style.map.painter;if(!this._rttFramebuffer){const e=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=t.context.createFramebuffer(e,e,!0),this._rttFramebuffer.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,e,e))}return this._rttFramebuffer}getFramebuffer(t){const e=this.style.map.painter,i=e.width/devicePixelRatio,n=e.height/devicePixelRatio;return!this._fbo||this._fbo.width===i&&this._fbo.height===n||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l(e.context,{width:i,height:n,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l(e.context,{width:i,height:n,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=e.context.createFramebuffer(i,n,!0),this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,i,n))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const i=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,e=0;t<this._coordsTextureSize;t++)for(let n=0;n<this._coordsTextureSize;n++,e+=4)i[e+0]=255&n,i[e+1]=255&t,i[e+2]=n>>8<<4|t>>8,i[e+3]=0;const n=new t.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(i.buffer)),r=new l(e,n,e.gl.RGBA,{premultiply:!1});return r.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=r,r}pointCoordinate(e){const i=new Uint8Array(4),n=this.style.map.painter,r=n.context,a=r.gl;r.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),a.readPixels(e.x,n.height/devicePixelRatio-e.y-1,1,1,a.RGBA,a.UNSIGNED_BYTE,i),r.bindFramebuffer.set(null);const s=i[0]+(i[2]>>4<<8),o=i[1]+((15&i[2])<<8),l=this.coordsIndex[255-i[3]],h=l&&this.sourceCache.getTileByID(l);if(!h)return null;const u=this._coordsTextureSize,c=(1<<h.tileID.canonical.z)*u;return new t.MercatorCoordinate((h.tileID.canonical.x*u+s)/c,(h.tileID.canonical.y*u+o)/c,this.getElevation(h.tileID,s,o,u))}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.style.map.painter.context,i=new t.PosArray,n=new t.TriangleIndexArray,r=this.meshSize,a=t.EXTENT/r,s=r*r;for(let t=0;t<=r;t++)for(let e=0;e<=r;e++)i.emplaceBack(e*a,t*a);for(let t=0;t<s;t+=r+1)for(let e=0;e<r;e++)n.emplaceBack(e+t,r+e+t+1,r+e+t+2),n.emplaceBack(e+t,r+e+t+2,e+t+1);return this._mesh={indexBuffer:e.createIndexBuffer(n),vertexBuffer:e.createVertexBuffer(i,Yt.members),segments:t.SegmentVector.simpleSegment(0,0,i.length,n.length)},this._mesh}getMinMaxElevation(t){const e=this.getTerrainData(t).tile,i={minElevation:null,maxElevation:null};return e&&e.dem&&(i.minElevation=(e.dem.min+this.elevationOffset)*this.exaggeration,i.maxElevation=(e.dem.max+this.elevationOffset)*this.exaggeration),i}}const Xt=(e,i)=>t.emitValidationErrors(e,i&&i.filter((t=>"source.canvas"!==t.identifier))),Kt=t.pick(Y,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Qt=t.pick(Y,["setCenter","setZoom","setBearing","setPitch"]),te=function(){const e={},i=t.spec.$version;for(const n in t.spec.$root){const r=t.spec.$root[n];if(r.required){let t=null;t="version"===n?i:"array"===r.type?[]:{},null!=t&&(e[n]=t)}}return e}();class ee extends t.Evented{constructor(e,i={}){super(),this.map=e,this.dispatcher=new v($(),this),this.imageManager=new u,this.imageManager.setEventedParent(this),this.glyphManager=new p(e._requestManager,i.localIdeographFontFamily),this.lineAtlas=new _(256,512),this.crossTileSymbolIndex=new qt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const n=this;this._rtlTextPluginCallback=ee.registerForPluginStateChange((e=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,i)=>{if(t.triggerPluginCompletionEvent(e),i&&i.every((t=>t)))for(const t in n.sourceCaches)n.sourceCaches[t].reload()}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.sourceCaches[t.sourceId];if(!e)return;const i=e.getSource();if(i&&i.vectorLayerIds)for(const t in this._layers){const e=this._layers[t];e.source===i.id&&this._validateLayer(e)}}))}loadURL(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const n="boolean"!=typeof i.validate||i.validate,r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,((e,i)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):i&&this._load(i,n)}))}loadJSON(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==i.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(te,!1)}_load(e,i){if(i&&Xt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);const n=q(this.stylesheet.layers);this._order=n.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let e of n)e=t.createStyleLayer(e),e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new g(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,i,n,r){let a,s,o;const l=n>1?"@2x":"";let h=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,l,".json"),t.ResourceType.SpriteJSON),((t,e)=>{h=null,o||(o=t,a=e,c())})),u=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,l,".png"),t.ResourceType.SpriteImage),((t,e)=>{u=null,o||(o=t,s=e,c())}));function c(){if(o)r(o);else if(a&&s){const e=t.exported.getImageData(s),i={};for(const n in a){const{width:r,height:s,x:o,y:l,sdf:h,pixelRatio:u,stretchX:c,stretchY:d,content:m}=a[n],p=new t.RGBAImage({width:r,height:s});t.RGBAImage.copy(e,p,{x:o,y:l},{x:0,y:0},{width:r,height:s}),i[n]={data:p,pixelRatio:u,sdf:h,stretchX:c,stretchY:d,content:m}}r(null,i)}}return{cancel(){h&&(h.cancel(),h=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,this.map.getPixelRatio(),((e,i)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(i)for(const t in i)this.imageManager.addImage(t,i[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const i=this.sourceCaches[e.source];if(!i)return;const n=e.sourceLayer;if(!n)return;const r=i.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${n}" does not exist on source "${r.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const i of t){const t=this._layers[i];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const i=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(t.length||i.length)&&this._updateWorkerLayers(t,i);for(const t in this._updatedSources){const e=this._updatedSources[t];if("reload"===e)this._reloadSource(t);else{if("clear"!==e)throw new Error(`Invalid action ${e}`);this._clearSource(t)}}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const n={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];n[t]=e.used,e.used=!1}for(const t of this._order){const i=this._layers[t];i.recalculate(e,this._availableImages),!i.isHidden(e.zoom)&&i.source&&(this.sourceCaches[i.source].used=!0)}for(const e in n){const i=this.sourceCaches[e];n[e]!==i.used&&i.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e}))}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(e){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),e){const t=this.sourceCaches[e.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);this.terrain=new Jt(this,t,e),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=t=>{t.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=t=>{t.tile&&(t.sourceId===e.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(t.sourceId,t.tile.tileID)):"geojson"===t.source.type&&this.terrain.rememberForRerender(t.sourceId,t.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new t.Event("terrain",{terrain:e}))}setState(e){if(this._checkLoaded(),Xt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=q(e.layers);const i=function(t,e){if(!t)return[{command:Y.setStyle,args:[e]}];let i=[];try{if(!r(t.version,e.version))return[{command:Y.setStyle,args:[e]}];r(t.center,e.center)||i.push({command:Y.setCenter,args:[e.center]}),r(t.zoom,e.zoom)||i.push({command:Y.setZoom,args:[e.zoom]}),r(t.bearing,e.bearing)||i.push({command:Y.setBearing,args:[e.bearing]}),r(t.pitch,e.pitch)||i.push({command:Y.setPitch,args:[e.pitch]}),r(t.sprite,e.sprite)||i.push({command:Y.setSprite,args:[e.sprite]}),r(t.glyphs,e.glyphs)||i.push({command:Y.setGlyphs,args:[e.glyphs]}),r(t.transition,e.transition)||i.push({command:Y.setTransition,args:[e.transition]}),r(t.light,e.light)||i.push({command:Y.setLight,args:[e.light]});const n={},a=[];!function(t,e,i,n){let a;for(a in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,a)&&(Object.prototype.hasOwnProperty.call(e,a)||J(a,i,n));for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&(Object.prototype.hasOwnProperty.call(t,a)?r(t[a],e[a])||("geojson"===t[a].type&&"geojson"===e[a].type&&K(t,e,a)?i.push({command:Y.setGeoJSONSourceData,args:[a,e[a].data]}):X(a,e,i,n)):W(a,e,i))}(t.sources,e.sources,a,n);const s=[];t.layers&&t.layers.forEach((t=>{n[t.source]?i.push({command:Y.removeLayer,args:[t.id]}):s.push(t)})),i=i.concat(a),function(t,e,i){e=e||[];const n=(t=t||[]).map(tt),a=e.map(tt),s=t.reduce(et,{}),o=e.reduce(et,{}),l=n.slice(),h=Object.create(null);let u,c,d,m,p,f,y;for(u=0,c=0;u<n.length;u++)d=n[u],Object.prototype.hasOwnProperty.call(o,d)?c++:(i.push({command:Y.removeLayer,args:[d]}),l.splice(l.indexOf(d,c),1));for(u=0,c=0;u<a.length;u++)d=a[a.length-1-u],l[l.length-1-u]!==d&&(Object.prototype.hasOwnProperty.call(s,d)?(i.push({command:Y.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-c),1)):c++,f=l[l.length-u],i.push({command:Y.addLayer,args:[o[d],f]}),l.splice(l.length-u,0,d),h[d]=!0);for(u=0;u<a.length;u++)if(d=a[u],m=s[d],p=o[d],!h[d]&&!r(m,p))if(r(m.source,p.source)&&r(m["source-layer"],p["source-layer"])&&r(m.type,p.type)){for(y in Q(m.layout,p.layout,i,d,null,Y.setLayoutProperty),Q(m.paint,p.paint,i,d,null,Y.setPaintProperty),r(m.filter,p.filter)||i.push({command:Y.setFilter,args:[d,p.filter]}),r(m.minzoom,p.minzoom)&&r(m.maxzoom,p.maxzoom)||i.push({command:Y.setLayerZoomRange,args:[d,p.minzoom,p.maxzoom]}),m)Object.prototype.hasOwnProperty.call(m,y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?Q(m[y],p[y],i,d,y.slice(6),Y.setPaintProperty):r(m[y],p[y])||i.push({command:Y.setLayerProperty,args:[d,y,p[y]]}));for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&!Object.prototype.hasOwnProperty.call(m,y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?Q(m[y],p[y],i,d,y.slice(6),Y.setPaintProperty):r(m[y],p[y])||i.push({command:Y.setLayerProperty,args:[d,y,p[y]]}))}else i.push({command:Y.removeLayer,args:[d]}),f=l[l.lastIndexOf(d)+1],i.push({command:Y.addLayer,args:[p,f]})}(s,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Y.setStyle,args:[e]}]}return i}(this.serialize(),e).filter((t=>!(t.command in Qt)));if(0===i.length)return!1;const n=i.filter((t=>!(t.command in Kt)));if(n.length>0)throw new Error(`Unimplemented: ${n.map((t=>t.command)).join(", ")}.`);return i.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,i),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,i,n={}){if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,i,null,n))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const r=this.sourceCaches[e]=new N(e,i,this.dispatcher);r.style=this,r.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:r.serialize(),sourceId:e}))),r.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${i}" is using it.`)));const i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error(`There is no source with this ID=${t}`);const i=this.sourceCaches[t].getSource();if("geojson"!==i.type)throw new Error(`geojsonSource.type is ${i.type}, which is !== 'geojson`);i.setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(e,i,n={}){this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.ErrorEvent(new Error(`Layer "${r}" already exists on this map.`)));let a;if("custom"===e.type){if(Xt(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,`layers.${r}`,e,{arrayIndex:-1},n))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[a.id]=a.serialize()}const s=i?this._order.indexOf(i):this._order.length;if(i&&-1===s)this.fire(new t.ErrorEvent(new Error(`Cannot add layer "${r}" before non-existing layer "${i}".`)));else{if(this._order.splice(s,0,r),this._layerOrderChanged=!0,this._layers[r]=a,this._removedLayers[r]&&a.source&&"custom"!==a.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}moveLayer(e,i){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===i)return;const n=this._order.indexOf(e);this._order.splice(n,1);const r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.ErrorEvent(new Error(`Cannot move layer "${e}" before non-existing layer "${i}".`))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const i=this._layers[e];if(!i)return void this.fire(new t.ErrorEvent(new Error(`Cannot remove non-existing layer "${e}".`)));i.setEventedParent(null);const n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(e,i,n){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===n||(null!=i&&(r.minzoom=i),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,i,n={}){this._checkLoaded();const a=this.getLayer(e);if(a){if(!r(a.filter,i))return null==i?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(t.validateStyle.filter,`layers.${a.id}.filter`,i,null,n)||(a.filter=t.clone$1(i),this._updateLayer(a)))}else this.fire(new t.ErrorEvent(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,i,n,a={}){this._checkLoaded();const s=this.getLayer(e);s?r(s.getLayoutProperty(i),n)||(s.setLayoutProperty(i,n,a),this._updateLayer(s)):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,i){const n=this.getLayer(e);if(n)return n.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,i,n,a={}){this._checkLoaded();const s=this.getLayer(e);s?r(s.getPaintProperty(i),n)||(s.setPaintProperty(i,n,a)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,i){this._checkLoaded();const n=e.source,r=e.sourceLayer,a=this.sourceCaches[n];if(void 0===a)return void this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const s=a.getSource().type;"geojson"===s&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),a.setFeatureState(r,e.id,i)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,i){this._checkLoaded();const n=e.source,r=this.sourceCaches[n];if(void 0===r)return void this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const a=r.getSource().type,s="vector"===a?e.sourceLayer:void 0;"vector"!==a||s?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(s,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const i=e.source,n=e.sourceLayer,r=this.sourceCaches[i];if(void 0!==r)return"vector"!==r.getSource().type||n?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),r.getFeatureState(n,e.id)):void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(t=>t.serialize())),layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,i={},n=[];for(let r=this._order.length-1;r>=0;r--){const a=this._order[r];if(e(a)){i[a]=r;for(const e of t){const t=e[a];if(t)for(const e of t)n.push(e)}}}n.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let a=this._order.length-1;a>=0;a--){const s=this._order[a];if(e(s))for(let t=n.length-1;t>=0;t--){const e=n[t].feature;if(i[e.layer.id]<a)break;r.push(e),n.pop()}else for(const e of t){const t=e[s];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(e,i,n){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of i.layers){const i=this._layers[e];if(!i)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];r[i.source]=!0}}const a=[];i.availableImages=this._availableImages;for(const t in this.sourceCaches)i.layers&&!r[t]||a.push(L(this.sourceCaches[t],this._layers,this._serializedLayers,e,i,n));return this.placement&&a.push(function(t,e,i,n,r,a,s){const o={},l=a.queryRenderedSymbols(n),h=[];for(const t of Object.keys(l).map(Number))h.push(s[t]);h.sort(z);for(const i of h){const n=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(const t in n){const e=o[t]=o[t]||[],r=n[t];r.sort(((t,e)=>{const n=i.featureSortOrder;if(n){const i=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const e in o)o[e].forEach((n=>{const r=n.feature,a=i[t[e].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}));return o}(this._layers,this._serializedLayers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a)}querySourceFeatures(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const n=this.sourceCaches[e];return n?function(t,e){const i=t.getRenderableIds().map((e=>t.getTileByID(e))),n=[],r={};for(let t=0;t<i.length;t++){const a=i[t],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(n,e))}return n}(n,i):[]}addSourceType(t,e,i){return ee.getSourceType(t)?i(new Error(`A source type called "${t}" already exists.`)):(ee.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const n=this.light.getLight();let a=!1;for(const t in e)if(!r(e[t],n[t])){a=!0;break}if(!a)return;const s={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(s)}_validate(e,i,n,r,a={}){return(!a||!1!==a.validate)&&Xt(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:n,styleSpec:t.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const e in this.sourceCaches)this.sourceCaches[e].update(t,this.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(e,i,n,r,a=!1){let s=!1,o=!1;const l={};for(const t of this._order){const i=this._layers[t];if("symbol"!==i.type)continue;if(!l[i.source]){const t=this.sourceCaches[i.source];l[i.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(i,l[i.source],e.center.lng);s=s||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((a=a||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Ut(e,this.terrain,this._order,a,i,n,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),o=!0),s&&this.pauseablePlacement.placement.setStale()),o||s)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();const n=this.sourceCaches[e.source];n&&n.setDependencies(e.tileID.key,e.type,e.icons)}getGlyphs(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)}getResource(e,i,n){return t.makeRequest(i,n)}}ee.getSourceType=function(t){return E[t]},ee.setSourceType=function(t,e){E[t]=e},ee.registerForPluginStateChange=t.registerForPluginStateChange;var ie="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const ne={prelude:re("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:re("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:re("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:re("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:re("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:re("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:re("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:re("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:re("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:re("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:re("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:re("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:re("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:re("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:re("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:re("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:re("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:re("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:re("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:re("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:re("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:re("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:re("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:re("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:re("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:re("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:re("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ie),terrainDepth:re("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ie),terrainCoords:re("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ie)};function re(t,e){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=e.match(/attribute ([\w]+) ([\w]+)/g),r=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=a?a.concat(r):r,o={};return{fragmentSource:t=t.replace(i,((t,e,i,n,r)=>(o[r]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nvarying ${i} ${n} ${r};\n#else\nuniform ${i} ${n} u_${r};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${r}\n    ${i} ${n} ${r} = u_${r};\n#endif\n`))),vertexSource:e=e.replace(i,((t,e,i,n,r)=>{const a="float"===n?"vec2":"vec4",s=r.match(/color/)?"color":a;return o[r]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${i} ${a} a_${r};\nvarying ${i} ${n} ${r};\n#else\nuniform ${i} ${n} u_${r};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = a_${r};\n#else\n    ${i} ${n} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = unpack_mix_${s}(a_${r}, u_${r}_t);\n#else\n    ${i} ${n} ${r} = u_${r};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${i} ${a} a_${r};\n#else\nuniform ${i} ${n} u_${r};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${i} ${n} ${r} = a_${r};\n#else\n    ${i} ${n} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${i} ${n} ${r} = unpack_mix_${s}(a_${r}, u_${r}_t);\n#else\n    ${i} ${n} ${r} = u_${r};\n#endif\n`})),staticAttributes:n,staticUniforms:s}}class ae{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,i,n,r,a,s,o,l){this.context=t;let h=this.boundPaintVertexBuffers.length!==n.length;for(let t=0;!h&&t<n.length;t++)this.boundPaintVertexBuffers[t]!==n[t]&&(h=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!h&&this.boundIndexBuffer===r&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===s&&this.boundDynamicVertexBuffer2===o&&this.boundDynamicVertexBuffer3===l?(t.bindVertexArrayOES.set(this.vao),s&&s.bind(),r&&r.dynamicDraw&&r.bind(),o&&o.bind(),l&&l.bind()):this.freshBind(e,i,n,r,a,s,o,l)}freshBind(t,e,i,n,r,a,s,o){let l;const h=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=s,this.boundDynamicVertexBuffer3=o;else{l=u.currentNumAttributes||0;for(let t=h;t<l;t++)c.disableVertexAttribArray(t)}e.enableAttributes(c,t);for(const e of i)e.enableAttributes(c,t);a&&a.enableAttributes(c,t),s&&s.enableAttributes(c,t),o&&o.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(const e of i)e.bind(),e.setVertexAttribPointers(c,t,r);a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),n&&n.bind(),s&&(s.bind(),s.setVertexAttribPointers(c,t,r)),o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),u.currentNumAttributes=h}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function se(t){const e=[];for(let i=0;i<t.length;i++){if(null===t[i])continue;const n=t[i].split(" ");e.push(n.pop())}return e}class oe{constructor(e,i,n,r,a,s,o){const l=e.gl;this.program=l.createProgram();const h=se(n.staticAttributes),u=r?r.getBinderAttributes():[],c=h.concat(u),d=ne.prelude.staticUniforms?se(ne.prelude.staticUniforms):[],m=n.staticUniforms?se(n.staticUniforms):[],p=r?r.getBinderUniforms():[],f=d.concat(m).concat(p),y=[];for(const t of f)y.indexOf(t)<0&&y.push(t);const g=r?r.defines():[];s&&g.push("#define OVERDRAW_INSPECTOR;"),o&&g.push("#define TERRAIN3D;");const _=g.concat(ne.prelude.fragmentSource,n.fragmentSource).join("\n"),v=g.concat(ne.prelude.vertexSource,n.vertexSource).join("\n"),b=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(b,_),l.compileShader(b),l.attachShader(this.program,b);const M=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(M,v),l.compileShader(M),l.attachShader(this.program,M),this.attributes={};const x={};this.numAttributes=c.length;for(let t=0;t<this.numAttributes;t++)c[t]&&(l.bindAttribLocation(this.program,t,c[t]),this.attributes[c[t]]=t);l.linkProgram(this.program),l.deleteShader(M),l.deleteShader(b);for(let t=0;t<y.length;t++){const e=y[t];if(e&&!x[e]){const t=l.getUniformLocation(this.program,e);t&&(x[e]=t)}}this.fixedUniforms=a(e,x),this.terrainUniforms=((e,i)=>({u_depth:new t.Uniform1i(e,i.u_depth),u_terrain:new t.Uniform1i(e,i.u_terrain),u_terrain_dim:new t.Uniform1f(e,i.u_terrain_dim),u_terrain_matrix:new t.UniformMatrix4f(e,i.u_terrain_matrix),u_terrain_unpack:new t.Uniform4f(e,i.u_terrain_unpack),u_terrain_offset:new t.Uniform1f(e,i.u_terrain_offset),u_terrain_exaggeration:new t.Uniform1f(e,i.u_terrain_exaggeration)}))(e,x),this.binderUniforms=r?r.getUniforms(e,x):[]}draw(t,e,i,n,r,a,s,o,l,h,u,c,d,m,p,f,y,g){const _=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(n),t.setColorMode(r),t.setCullFace(a),o){t.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,o.depthTexture),t.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,o.texture);for(const t in this.terrainUniforms)this.terrainUniforms[t].set(o[t])}for(const t in this.fixedUniforms)this.fixedUniforms[t].set(s[t]);p&&p.setUniforms(t,this.binderUniforms,d,{zoom:m});let v=0;switch(e){case _.LINES:v=2;break;case _.TRIANGLES:v=3;break;case _.LINE_STRIP:v=1}for(const i of c.get()){const n=i.vaos||(i.vaos={});(n[l]||(n[l]=new ae)).bind(t,this,h,p?p.getPaintVertexBuffers():[],u,i.vertexOffset,f,y,g),_.drawElements(e,i.primitiveLength*v,_.UNSIGNED_SHORT,i.primitiveOffset*v*2)}}}function le(t,e,i){const n=1/Mt(i,1,e.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,e.transform.tileZoom)/r,s=a*(i.tileID.canonical.x+i.tileID.wrap*r),o=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[s>>16,o>>16],u_pixel_coord_lower:[65535&s,65535&o]}}const he=(e,i,n,r)=>{const a=i.style.light,s=a.properties.get("position"),o=[s.x,s.y,s.z],l=t.create$1();"viewport"===a.properties.get("anchor")&&t.fromRotation(l,-i.transform.angle),t.transformMat3(o,o,l);const h=a.properties.get("color");return{u_matrix:e,u_lightpos:o,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[h.r,h.g,h.b],u_vertical_gradient:+n,u_opacity:r}},ue=(e,i,n,r,a,s,o)=>t.extend(he(e,i,n,r),le(s,i,o),{u_height_factor:-Math.pow(2,a.overscaledZ)/o.tileSize/8}),ce=t=>({u_matrix:t}),de=(e,i,n,r)=>t.extend(ce(e),le(n,i,r)),me=(t,e)=>({u_matrix:t,u_world:e}),pe=(e,i,n,r,a)=>t.extend(de(e,i,n,r),{u_world:a}),fe=(t,e,i,n)=>{const r=t.transform;let a,s;if("map"===n.paint.get("circle-pitch-alignment")){const t=Mt(i,1,r.zoom);a=!0,s=[t,t]}else a=!1,s=r.pixelsToGLUnits;return{u_camera_to_center_distance:r.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:s}},ye=(t,e,i)=>{const n=Mt(i,1,e.zoom),r=Math.pow(2,e.zoom-i.tileID.overscaledZ),a=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[e.pixelsToGLUnits[0]/(n*r),e.pixelsToGLUnits[1]/(n*r)],u_overscale_factor:a}},ge=(t,e,i=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}),_e=t=>({u_matrix:t}),ve=(t,e,i,n)=>({u_matrix:t,u_extrude_scale:Mt(e,1,i),u_intensity:n});function be(e,i){const n=Math.pow(2,i.canonical.z),r=i.canonical.y;return[new t.MercatorCoordinate(0,r/n).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/n).toLngLat().lat]}const Me=(t,e,i,n)=>{const r=t.transform;return{u_matrix:Te(t,e,i,n),u_ratio:1/Mt(e,1,r.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},xe=(e,i,n,r,a)=>t.extend(Me(e,i,n,a),{u_image:0,u_image_height:r}),we=(t,e,i,n,r)=>{const a=t.transform,s=Ae(e,a);return{u_matrix:Te(t,e,i,r),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Mt(e,1,a.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[s,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Se=(e,i,n,r,a,s)=>{const o=e.lineAtlas,l=Ae(i,e.transform),h="round"===n.layout.get("line-cap"),u=o.getDash(r.from,h),c=o.getDash(r.to,h),d=u.width*a.fromScale,m=c.width*a.toScale;return t.extend(Me(e,i,n,s),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/m,-c.height/2],u_sdfgamma:o.width/(256*Math.min(d,m)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:a.t})};function Ae(t,e){return 1/Mt(t,1,e.tileZoom)}function Te(t,e,i,n){return t.translatePosMatrix(n?n.posMatrix:e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const Ce=(t,e,i,n,r)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(s=r.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=r.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Ie(r.paint.get("raster-hue-rotate"))};var a,s};function Ie(t){t*=Math.PI/180;const e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}const ke=(t,e,i,n,r,a,s,o,l,h)=>{const u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:o,u_is_text:+l,u_pitch_with_map:+n,u_texsize:h,u_texture:0}},Pe=(e,i,n,r,a,s,o,l,h,u,c)=>{const d=a.transform;return t.extend(ke(e,i,n,r,a,s,o,l,h,u),{u_gamma_scale:r?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:a.pixelRatio,u_is_halo:+c})},Ee=(e,i,n,r,a,s,o,l,h,u)=>t.extend(Pe(e,i,n,r,a,s,o,l,!0,h,!0),{u_texsize_icon:u,u_texture_icon:1}),De=(t,e,i)=>({u_matrix:t,u_opacity:e,u_color:i}),Le=(e,i,n,r,a,s)=>t.extend(function(t,e,i,n){const r=i.imageManager.getPattern(t.from.toString()),a=i.imageManager.getPattern(t.to.toString()),{width:s,height:o}=i.imageManager.getPixelSize(),l=Math.pow(2,n.tileID.overscaledZ),h=n.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=h*(n.tileID.canonical.x+n.tileID.wrap*l),c=h*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,o],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/Mt(n,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,c>>16],u_pixel_coord_lower:[65535&u,65535&c]}}(r,s,n,a),{u_matrix:e,u_opacity:i}),ze={fillExtrusion:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fillExtrusionPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fill:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),fillPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),fillOutline:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}),fillOutlinePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),circle:(e,i)=>({u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),collisionBox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}),collisionCircle:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}),debug:(e,i)=>({u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}),clippingMask:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmap:(e,i)=>({u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmapTexture:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}),hillshade:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}),hillshadePrepare:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}),line:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}),lineGradient:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image),u_image_height:new t.Uniform1f(e,i.u_image_height)}),linePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),lineSDF:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}),raster:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}),symbolIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}),symbolSDF:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),symbolTextAndIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),background:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}),backgroundPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}),terrain:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texture:new t.Uniform1i(e,i.u_texture)}),terrainDepth:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),terrainCoords:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texture:new t.Uniform1i(e,i.u_texture),u_terrain_coords_id:new t.Uniform1f(e,i.u_terrain_coords_id)})};class Fe{constructor(t,e,i){this.context=t;const n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Oe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Re{constructor(t,e,i,n){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let i=0;i<this.attributes.length;i++){const n=e.attributes[this.attributes[i].name];void 0!==n&&t.enableVertexAttribArray(n)}}setVertexAttribPointers(t,e,i){for(let n=0;n<this.attributes.length;n++){const r=this.attributes[n],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[Oe[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ne{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Be extends Ne{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class je extends Ne{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class He extends Ne{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Ue extends Ne{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Ve extends Ne{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Ge extends Ne{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class $e extends Ne{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Ze extends Ne{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class qe extends Ne{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class Ye extends Ne{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class We extends Ne{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Je extends Ne{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Xe extends Ne{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class Ke extends Ne{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Qe extends Ne{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ti extends Ne{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class ei extends Ne{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class ii extends Ne{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class ni extends Ne{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class ri extends Ne{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ai extends Ne{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class si extends Ne{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class oi extends Ne{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class li extends Ne{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class hi extends Ne{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ui extends Ne{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ci extends Ne{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class di extends Ne{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class mi extends Ne{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class pi extends Ne{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class fi extends Ne{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class yi extends Ne{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class gi extends yi{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class _i extends yi{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class vi{constructor(t,e,i,n){this.context=t,this.width=e,this.height=i;const r=t.gl,a=this.framebuffer=r.createFramebuffer();if(this.colorAttachment=new gi(t,a),n&&(this.depthAttachment=new _i(t,a)),r.checkFramebufferStatus(r.FRAMEBUFFER)!==r.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class bi{constructor(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i}}bi.Replace=[1,0],bi.disabled=new bi(bi.Replace,t.Color.transparent,[!1,!1,!1,!1]),bi.unblended=new bi(bi.Replace,t.Color.transparent,[!0,!0,!0,!0]),bi.alphaBlended=new bi([1,771],t.Color.transparent,[!0,!0,!0,!0]);class Mi{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Be(this),this.clearDepth=new je(this),this.clearStencil=new He(this),this.colorMask=new Ue(this),this.depthMask=new Ve(this),this.stencilMask=new Ge(this),this.stencilFunc=new $e(this),this.stencilOp=new Ze(this),this.stencilTest=new qe(this),this.depthRange=new Ye(this),this.depthTest=new We(this),this.depthFunc=new Je(this),this.blend=new Xe(this),this.blendFunc=new Ke(this),this.blendColor=new Qe(this),this.blendEquation=new ti(this),this.cullFace=new ei(this),this.cullFaceSide=new ii(this),this.frontFace=new ni(this),this.program=new ri(this),this.activeTexture=new ai(this),this.viewport=new si(this),this.bindFramebuffer=new oi(this),this.bindRenderbuffer=new li(this),this.bindTexture=new hi(this),this.bindVertexBuffer=new ui(this),this.bindElementBuffer=new ci(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new di(this),this.pixelStoreUnpack=new mi(this),this.pixelStoreUnpackPremultiplyAlpha=new pi(this),this.pixelStoreUnpackFlipY=new fi(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Fe(this,t,e)}createVertexBuffer(t,e,i){return new Re(this,t,e,i)}createRenderbuffer(t,e,i){const n=this.gl,r=n.createRenderbuffer();return this.bindRenderbuffer.set(r),n.renderbufferStorage(n.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,i){return new vi(this,t,e,i)}clear({color:t,depth:e}){const i=this.gl;let n=0;t&&(n|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(n|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),i.clear(n)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){r(t.blendFunction,bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class xi{constructor(t,e,i){this.func=t,this.mask=e,this.range=i}}xi.ReadOnly=!1,xi.ReadWrite=!0,xi.disabled=new xi(519,xi.ReadOnly,[0,1]);const wi=7680;class Si{constructor(t,e,i,n,r,a){this.test=t,this.ref=e,this.mask=i,this.fail=n,this.depthFail=r,this.pass=a}}Si.disabled=new Si({func:519,mask:0},0,0,wi,wi,wi);class Ai{constructor(t,e,i){this.enable=t,this.mode=e,this.frontFace=i}}let Ti;function Ci(e,i,n,r,a,s,o){const l=e.context,h=l.gl,u=e.useProgram("collisionBox"),c=[];let d=0,m=0;for(let p=0;p<r.length;p++){const f=r[p],y=i.getTile(f),g=y.getBucket(n);if(!g)continue;let _=f.posMatrix;0===a[0]&&0===a[1]||(_=e.translatePosMatrix(f.posMatrix,y,a,s));const v=o?g.textCollisionBox:g.iconCollisionBox,b=g.collisionCircleArray;if(b.length>0){const i=t.create(),n=_;t.mul(i,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(i,i,g.placementViewportMatrix),c.push({circleArray:b,circleOffset:m,transform:n,invTransform:i,coord:f}),d+=b.length/4,m=d}v&&u.draw(l,h.LINES,xi.disabled,Si.disabled,e.colorModeForRenderPass(),Ai.disabled,ye(_,e.transform,y),e.style.terrain&&e.style.terrain.getTerrainData(f),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,null,v.collisionVertexBuffer)}if(!o||!c.length)return;const p=e.useProgram("collisionCircle"),f=new t.CollisionCircleLayoutArray;f.resize(4*d),f._trim();let y=0;for(const t of c)for(let e=0;e<t.circleArray.length/4;e++){const i=4*e,n=t.circleArray[i+0],r=t.circleArray[i+1],a=t.circleArray[i+2],s=t.circleArray[i+3];f.emplace(y++,n,r,a,s,0),f.emplace(y++,n,r,a,s,1),f.emplace(y++,n,r,a,s,2),f.emplace(y++,n,r,a,s,3)}(!Ti||Ti.length<2*d)&&(Ti=function(e){const i=2*e,n=new t.QuadTriangleArray;n.resize(i),n._trim();for(let t=0;t<i;t++){const e=6*t;n.uint16[e+0]=4*t+0,n.uint16[e+1]=4*t+1,n.uint16[e+2]=4*t+2,n.uint16[e+3]=4*t+2,n.uint16[e+4]=4*t+3,n.uint16[e+5]=4*t+0}return n}(d));const g=l.createIndexBuffer(Ti,!0),_=l.createVertexBuffer(f,t.collisionCircleLayout.members,!0);for(const i of c){const r={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(v=e.transform).cameraToCenterDistance,u_viewport_size:[v.width,v.height]};p.draw(l,h.TRIANGLES,xi.disabled,Si.disabled,e.colorModeForRenderPass(),Ai.disabled,r,e.style.terrain&&e.style.terrain.getTerrainData(i.coord),n.id,_,g,t.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,e.transform.zoom,null,null,null)}var v;_.destroy(),g.destroy()}Ai.disabled=new Ai(!1,1029,2305),Ai.backCCW=new Ai(!0,1029,2305);const Ii=t.identity(new Float32Array(16));function ki(e,i,n,r,a,s){const{horizontalAlign:o,verticalAlign:l}=t.getAnchorAlignment(e),h=-(o-.5)*i,u=-(l-.5)*n,c=t.evaluateVariableOffset(e,r);return new t.pointGeometry((h/a+c[0])*s,(u/a+c[1])*s)}function Pi(e,i,n,r,a,s,o,l,h,u,c){const d=e.text.placedSymbolArray,m=e.text.dynamicLayoutVertexArray,p=e.icon.dynamicLayoutVertexArray,f={};m.clear();for(let p=0;p<d.length;p++){const y=d.get(p),g=e.allowVerticalPlacement&&!y.placedOrientation,_=y.hidden||!y.crossTileID||g?null:r[y.crossTileID];if(_){const r=new t.pointGeometry(y.anchorX,y.anchorY),d=ot(r,n?o:s,c),p=lt(a.cameraToCenterDistance,d.signedDistanceFromCamera);let g=t.evaluateSizeForFeature(e.textSizeData,h,y)*p/t.ONE_EM;n&&(g*=e.tilePixelRatio/l);const{width:v,height:b,anchor:M,textOffset:x,textBoxScale:w}=_,S=ki(M,v,b,x,w,g),A=n?ot(r.add(S),s,c).point:d.point.add(i?S.rotate(-a.angle):S),T=e.allowVerticalPlacement&&y.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<y.numGlyphs;e++)t.addDynamicAttributes(m,A,T);u&&y.associatedIconIndex>=0&&(f[y.associatedIconIndex]={shiftedAnchor:A,angle:T})}else gt(y.numGlyphs,m)}if(u){p.clear();const i=e.icon.placedSymbolArray;for(let e=0;e<i.length;e++){const n=i.get(e);if(n.hidden)gt(n.numGlyphs,p);else{const i=f[e];if(i)for(let e=0;e<n.numGlyphs;e++)t.addDynamicAttributes(p,i.shiftedAnchor,i.angle);else gt(n.numGlyphs,p)}}e.icon.dynamicLayoutVertexBuffer.updateData(p)}e.text.dynamicLayoutVertexBuffer.updateData(m)}function Ei(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Di(e,i,n,r,a,s,o,l,h,u,c,d){const m=e.context,p=m.gl,f=e.transform,y="map"===l,g="map"===h,_="viewport"!==l&&"point"!==n.layout.get("symbol-placement"),v=y&&!g&&!_,b=!n.layout.get("symbol-sort-key").isConstant();let M=!1;const x=e.depthModeForSublayer(0,xi.ReadOnly),w=n.layout.get("text-variable-anchor"),S=[];for(const l of r){const r=i.getTile(l),h=r.getBucket(n);if(!h)continue;const c=a?h.text:h.icon;if(!c||!c.segments.get().length)continue;const d=c.programConfigurations.get(n.id),m=a||h.sdfIcons,x=a?h.textSizeData:h.iconSizeData,A=g||0!==f.pitch,T=e.useProgram(Ei(m,a,h),d),C=t.evaluateSizeForZoom(x,f.zoom),I=e.style.terrain&&e.style.terrain.getTerrainData(l);let k,P,E,D,L=[0,0],z=null;if(a){if(P=r.glyphAtlasTexture,E=p.LINEAR,k=r.glyphAtlasTexture.size,h.iconsInText){L=r.imageAtlasTexture.size,z=r.imageAtlasTexture;const t="composite"===x.kind||"camera"===x.kind;D=A||e.options.rotating||e.options.zooming||t?p.LINEAR:p.NEAREST}}else{const t=1!==n.layout.get("icon-size").constantOr(0)||h.iconsNeedLinear;P=r.imageAtlasTexture,E=m||e.options.rotating||e.options.zooming||t||A?p.LINEAR:p.NEAREST,k=r.imageAtlasTexture.size}const F=Mt(r,1,e.transform.zoom),O=at(l.posMatrix,g,y,e.transform,F),R=st(l.posMatrix,g,y,e.transform,F),N=w&&h.hasTextData(),B="none"!==n.layout.get("icon-text-fit")&&N&&h.hasIconData();if(_){const t=e.style.terrain?(t,i)=>e.style.terrain.getElevation(l,t,i):null,i="map"===n.layout.get("text-rotation-alignment");ut(h,l.posMatrix,e,a,O,R,g,u,i,t)}const j=e.translatePosMatrix(l.posMatrix,r,s,o),H=_||a&&w||B?Ii:O,U=e.translatePosMatrix(R,r,s,o,!0),V=m&&0!==n.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);let G;G=m?h.iconsInText?Ee(x.kind,C,v,g,e,j,H,U,k,L):Pe(x.kind,C,v,g,e,j,H,U,a,k,!0):ke(x.kind,C,v,g,e,j,H,U,a,k);const $={program:T,buffers:c,uniformValues:G,atlasTexture:P,atlasTextureIcon:z,atlasInterpolation:E,atlasInterpolationIcon:D,isSDF:m,hasHalo:V};if(b&&h.canOverlap){M=!0;const e=c.segments.get();for(const i of e)S.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:$,terrainData:I})}else S.push({segments:c.segments,sortKey:0,state:$,terrainData:I})}M&&S.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of S){const i=t.state;if(m.activeTexture.set(p.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,p.CLAMP_TO_EDGE),i.atlasTextureIcon&&(m.activeTexture.set(p.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),i.isSDF){const r=i.uniformValues;i.hasHalo&&(r.u_is_halo=1,Li(i.buffers,t.segments,n,e,i.program,x,c,d,r,t.terrainData)),r.u_is_halo=0}Li(i.buffers,t.segments,n,e,i.program,x,c,d,i.uniformValues,t.terrainData)}}function Li(t,e,i,n,r,a,s,o,l,h){const u=n.context;r.draw(u,u.gl.TRIANGLES,a,s,o,Ai.disabled,l,h,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,n.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function zi(t,e,i,n,r,a,s){const o=t.context.gl,l=i.paint.get("fill-pattern"),h=l&&l.constantOr(1),u=i.getCrossfadeParameters();let c,d,m,p,f;s?(d=h&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",c=o.LINES):(d=h?"fillPattern":"fill",c=o.TRIANGLES);for(const y of n){const n=e.getTile(y);if(h&&!n.patternsLoaded())continue;const g=n.getBucket(i);if(!g)continue;const _=g.programConfigurations.get(i.id),v=t.useProgram(d,_),b=t.style.terrain&&t.style.terrain.getTerrainData(y);h&&(t.context.activeTexture.set(o.TEXTURE0),n.imageAtlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),_.updatePaintBuffers(u));const M=l.constantOr(null);if(M&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[M.to.toString()],i=t.patternPositions[M.from.toString()];e&&i&&_.setConstantPatternPositions(e,i)}const x=b?y:null,w=t.translatePosMatrix(x?x.posMatrix:y.posMatrix,n,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(s){p=g.indexBuffer2,f=g.segments2;const e=[o.drawingBufferWidth,o.drawingBufferHeight];m="fillOutlinePattern"===d&&h?pe(w,t,u,n,e):me(w,e)}else p=g.indexBuffer,f=g.segments,m=h?de(w,t,u,n):ce(w);v.draw(t.context,c,r,t.stencilModeForClipping(y),a,Ai.disabled,m,b,i.id,g.layoutVertexBuffer,p,f,i.paint,t.transform.zoom,_)}}function Fi(t,e,i,n,r,a,s){const o=t.context,l=o.gl,h=i.paint.get("fill-extrusion-pattern"),u=h.constantOr(1),c=i.getCrossfadeParameters(),d=i.paint.get("fill-extrusion-opacity");for(const m of n){const n=e.getTile(m),p=n.getBucket(i);if(!p)continue;const f=t.style.terrain&&t.style.terrain.getTerrainData(m),y=p.programConfigurations.get(i.id),g=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",y);u&&(t.context.activeTexture.set(l.TEXTURE0),n.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(c));const _=h.constantOr(null);if(_&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[_.to.toString()],i=t.patternPositions[_.from.toString()];e&&i&&y.setConstantPatternPositions(e,i)}const v=t.translatePosMatrix(m.posMatrix,n,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),b=i.paint.get("fill-extrusion-vertical-gradient"),M=u?ue(v,t,b,d,m,c,n):he(v,t,b,d);g.draw(o,o.gl.TRIANGLES,r,a,s,Ai.backCCW,M,f,i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,i.paint,t.transform.zoom,y,t.style.terrain&&p.centroidVertexBuffer)}}function Oi(t,e,i,n,r,a,s){const o=t.context,l=o.gl,h=i.fbo;if(!h)return;const u=t.useProgram("hillshade"),c=t.style.terrain&&t.style.terrain.getTerrainData(e);o.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,h.colorAttachment.get()),u.draw(o,l.TRIANGLES,r,a,s,Ai.disabled,((t,e,i,n)=>{const r=i.paint.get("hillshade-shadow-color"),a=i.paint.get("hillshade-highlight-color"),s=i.paint.get("hillshade-accent-color");let o=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(o-=t.transform.angle);const l=!t.options.moving;return{u_matrix:n?n.posMatrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:be(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),o],u_shadow:r,u_highlight:a,u_accent:s}})(t,i,n,c?e:null),c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function Ri(e,i,n,r,a,s){const o=e.context,h=o.gl,u=i.dem;if(u&&u.data){const c=u.dim,d=u.stride,m=u.getPixels();if(o.activeTexture.set(h.TEXTURE1),o.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(d),i.demTexture){const t=i.demTexture;t.update(m,{premultiply:!1}),t.bind(h.NEAREST,h.CLAMP_TO_EDGE)}else i.demTexture=new l(o,m,h.RGBA,{premultiply:!1}),i.demTexture.bind(h.NEAREST,h.CLAMP_TO_EDGE);o.activeTexture.set(h.TEXTURE0);let p=i.fbo;if(!p){const t=new l(o,{width:c,height:c,data:null},h.RGBA);t.bind(h.LINEAR,h.CLAMP_TO_EDGE),p=i.fbo=o.createFramebuffer(c,c,!0),p.colorAttachment.set(t.texture)}o.bindFramebuffer.set(p.framebuffer),o.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(o,h.TRIANGLES,r,a,s,Ai.disabled,((e,i)=>{const n=i.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:i.getUnpackVector()}})(i.tileID,u),null,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ni(e,i,n,r,a,s){const o=r.paint.get("raster-fade-duration");if(!s&&o>0){const r=t.exported.now(),s=(r-e.timeAdded)/o,l=i?(r-i.timeAdded)/o:-1,h=n.getSource(),u=a.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),c=!i||Math.abs(i.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=c&&e.refreshedUponExpiration?1:t.clamp(c?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}const Bi=new t.Color(1,0,0,1),ji=new t.Color(0,1,0,1),Hi=new t.Color(0,0,1,1),Ui=new t.Color(1,0,1,1),Vi=new t.Color(0,1,1,1);function Gi(t,e,i,n){Zi(t,0,e+i/2,t.transform.width,i,n)}function $i(t,e,i,n){Zi(t,e-i/2,0,i,t.transform.height,n)}function Zi(t,e,i,n,r,a){const s=t.context,o=s.gl;o.enable(o.SCISSOR_TEST),o.scissor(e*t.pixelRatio,i*t.pixelRatio,n*t.pixelRatio,r*t.pixelRatio),s.clear({color:a}),o.disable(o.SCISSOR_TEST)}function qi(e,i,n){const r=e.context,a=r.gl,s=n.posMatrix,o=e.useProgram("debug"),l=xi.disabled,h=Si.disabled,u=e.colorModeForRenderPass(),c="$debug",d=e.style.terrain&&e.style.terrain.getTerrainData(n);r.activeTexture.set(a.TEXTURE0),e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const m=i.getTileByID(n.key).latestRawTileData,p=Math.floor((m&&m.byteLength||0)/1024),f=i.getTile(n).tileSize,y=512/Math.min(f,512)*(n.overscaledZ/e.transform.zoom)*.5;let g=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(g+=` => ${n.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const i=t.debugOverlayCanvas,n=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,`${g} ${p}kB`),o.draw(r,a.TRIANGLES,l,h,bi.alphaBlended,Ai.disabled,ge(s,t.Color.transparent,y),null,c,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),o.draw(r,a.LINE_STRIP,l,h,u,Ai.disabled,ge(s,t.Color.red),d,c,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function Yi(t,e,i){const n=t.context,r=n.gl,a=t.colorModeForRenderPass(),s=new xi(r.LEQUAL,xi.ReadWrite,t.depthRangeFor3D),o=t.useProgram("terrain"),l=e.getTerrainMesh(),h=e.getTerrainData(i.tileID);n.bindFramebuffer.set(null),n.viewport.set([0,0,t.width,t.height]),n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,e.getRTTFramebuffer().colorAttachment.get());const u=t.transform.calculatePosMatrix(i.tileID.toUnwrapped());o.draw(n,r.TRIANGLES,s,Si.disabled,a,Ai.backCCW,{u_matrix:u,u_texture:0},h,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}function Wi(t,e,i,n){const r=t.context,a=i.tileSize*e.qualityFactor;i.textures[n]||(i.textures[n]=t.getTileTexture(a)||new l(r,{width:a,height:a,data:null},r.gl.RGBA),i.textures[n].bind(r.gl.LINEAR,r.gl.CLAMP_TO_EDGE),0===n&&e.sourceCache.renderHistory.unshift(i.tileID.key));const s=e.getRTTFramebuffer();s.colorAttachment.set(i.textures[n].texture),r.bindFramebuffer.set(s.framebuffer),r.viewport.set([0,0,a,a])}class Ji{constructor(t){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=t,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=t.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const t=this.painter.style,e=t.terrain;for(const i in t.sourceCaches){this._coordsDescendingInv[i]={};const n=t.sourceCaches[i].getVisibleCoordinates();for(const t of n){const n=e.sourceCache.getTerrainCoords(t);for(const t in n)this._coordsDescendingInv[i][t]||(this._coordsDescendingInv[i][t]=[]),this._coordsDescendingInv[i][t].push(n[t])}}for(const e of t._order){const i=t._layers[e],n=i.source;if(this._renderToTexture[i.type]&&!this._coordsDescendingInvStr[n]){this._coordsDescendingInvStr[n]={};for(const t in this._coordsDescendingInv[n])this._coordsDescendingInvStr[n][t]=this._coordsDescendingInv[n][t].map((t=>t.key)).sort().join()}}return this._renderableTiles.forEach((t=>{for(const i in this._coordsDescendingInvStr){const n=this._coordsDescendingInvStr[i][t.tileID.key];n&&n!==t.textureCoords[i]&&t.clearTextures(this.painter),e.needsRerender(i,t.tileID)&&t.clearTextures(this.painter)}this._rerender[t.tileID.key]=!t.textures.length})),e.clearRerenderCache(),e.sourceCache.removeOutdated(this.painter),this}renderLayer(e){const i=e.type,n=this.painter,r=n.style._order,a=n.currentLayer,s=a+1===r.length;if(this._renderToTexture[i]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=i,this._stacks[this._stacks.length-1].push(r[a]),!s))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===i||this._renderToTexture[i]&&s){this._prevType=i;const s=this._stacks.length-1,o=this._stacks[s]||[];for(const e of this._renderableTiles){if(Wi(n,n.style.terrain,e,s),this._rerender[e.tileID.key]){n.context.clear({color:t.Color.transparent});for(let t=0;t<o.length;t++){const i=n.style._layers[o[t]],r=i.source?this._coordsDescendingInv[i.source][e.tileID.key]:[e.tileID];n._renderTileClippingMasks(i,r),n.renderLayer(n,n.style.sourceCaches[i.source],i,r),i.source&&(e.textureCoords[i.source]=this._coordsDescendingInvStr[i.source][e.tileID.key])}}Yi(n,n.style.terrain,e)}if("hillshade"===i){this._stacks.push([r[a]]);for(const i of this._renderableTiles){const r=this._coordsDescendingInv[e.source][i.tileID.key];Wi(n,n.style.terrain,i,this._stacks.length-1),n.context.clear({color:t.Color.transparent}),n._renderTileClippingMasks(e,r),n.renderLayer(n,n.style.sourceCaches[e.source],e,r),Yi(n,n.style.terrain,i)}return!0}return this._renderToTexture[i]}return!1}}const Xi={symbol:function(e,i,n,r,a){if("translucent"!==e.renderPass)return;const s=Si.disabled,o=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,i,n,r,a,s,o){const l=i.transform,h="map"===a,u="map"===s;for(const a of e){const e=r.getTile(a),s=e.getBucket(n);if(!s||!s.text||!s.text.segments.get().length)continue;const c=t.evaluateSizeForZoom(s.textSizeData,l.zoom),d=Mt(e,1,i.transform.zoom),m=at(a.posMatrix,u,h,i.transform,d),p="none"!==n.layout.get("icon-text-fit")&&s.hasIconData();if(c){const t=Math.pow(2,l.zoom-e.tileID.overscaledZ);Pi(s,h,u,o,l,m,a.posMatrix,t,c,p,i.style.terrain?(t,e)=>i.style.terrain.getElevation(a,t,e):null)}}}(r,e,n,i,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),a),0!==n.paint.get("icon-opacity").constantOr(1)&&Di(e,i,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),s,o),0!==n.paint.get("text-opacity").constantOr(1)&&Di(e,i,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),s,o),i.map.showCollisionBoxes&&(Ci(e,i,n,r,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Ci(e,i,n,r,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(e,i,n,r){if("translucent"!==e.renderPass)return;const a=n.paint.get("circle-opacity"),s=n.paint.get("circle-stroke-width"),o=n.paint.get("circle-stroke-opacity"),l=!n.layout.get("circle-sort-key").isConstant();if(0===a.constantOr(1)&&(0===s.constantOr(1)||0===o.constantOr(1)))return;const h=e.context,u=h.gl,c=e.depthModeForSublayer(0,xi.ReadOnly),d=Si.disabled,m=e.colorModeForRenderPass(),p=[];for(let a=0;a<r.length;a++){const s=r[a],o=i.getTile(s),h=o.getBucket(n);if(!h)continue;const u=h.programConfigurations.get(n.id),c=e.useProgram("circle",u),d=h.layoutVertexBuffer,m=h.indexBuffer,f=e.style.terrain&&e.style.terrain.getTerrainData(s),y={programConfiguration:u,program:c,layoutVertexBuffer:d,indexBuffer:m,uniformValues:fe(e,s,o,n),terrainData:f};if(l){const e=h.segments.get();for(const i of e)p.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:y})}else p.push({segments:h.segments,sortKey:0,state:y})}l&&p.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of p){const{programConfiguration:i,program:r,layoutVertexBuffer:a,indexBuffer:s,uniformValues:o,terrainData:l}=t.state;r.draw(h,u.TRIANGLES,c,d,m,Ai.disabled,o,l,n.id,a,s,t.segments,n.paint,e.transform.zoom,i)}},heatmap:function(e,i,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const a=e.context,s=a.gl,o=Si.disabled,l=new bi([s.ONE,s.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){const n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let r=i.heatmapFbo;if(r)n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{const a=n.createTexture();n.bindTexture(n.TEXTURE_2D,a),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,n){const r=t.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),n.colorAttachment.set(i)}(t,e,a,r)}}(a,e,n),a.clear({color:t.Color.transparent});for(let t=0;t<r.length;t++){const h=r[t];if(i.hasRenderableParent(h))continue;const u=i.getTile(h),c=u.getBucket(n);if(!c)continue;const d=c.programConfigurations.get(n.id),m=e.useProgram("heatmap",d),{zoom:p}=e.transform;m.draw(a,s.TRIANGLES,xi.disabled,o,l,Ai.disabled,ve(h.posMatrix,u,p,n.paint.get("heatmap-intensity")),null,n.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,n.paint,e.transform.zoom,d)}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){const n=e.context,r=n.gl,a=i.heatmapFbo;if(!a)return;n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);let s=i.colorRampTexture;s||(s=i.colorRampTexture=new l(n,i.colorRamp,r.RGBA)),s.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,r.TRIANGLES,xi.disabled,Si.disabled,e.colorModeForRenderPass(),Ai.disabled,((e,i)=>{const n=t.create();t.ortho(n,0,e.width,e.height,0,0,1);const r=e.context.gl;return{u_matrix:n,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(e,i),null,i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}(e,n))},line:function(e,i,n,r){if("translucent"!==e.renderPass)return;const a=n.paint.get("line-opacity"),s=n.paint.get("line-width");if(0===a.constantOr(1)||0===s.constantOr(1))return;const o=e.depthModeForSublayer(0,xi.ReadOnly),h=e.colorModeForRenderPass(),u=n.paint.get("line-dasharray"),c=n.paint.get("line-pattern"),d=c.constantOr(1),m=n.paint.get("line-gradient"),p=n.getCrossfadeParameters(),f=d?"linePattern":u?"lineSDF":m?"lineGradient":"line",y=e.context,g=y.gl;let _=!0;for(const a of r){const r=i.getTile(a);if(d&&!r.patternsLoaded())continue;const s=r.getBucket(n);if(!s)continue;const v=s.programConfigurations.get(n.id),b=e.context.program.get(),M=e.useProgram(f,v),x=_||M.program!==b,w=e.style.terrain&&e.style.terrain.getTerrainData(a),S=c.constantOr(null);if(S&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[S.to.toString()],i=t.patternPositions[S.from.toString()];e&&i&&v.setConstantPatternPositions(e,i)}const A=w?a:null,T=d?we(e,r,n,p,A):u?Se(e,r,n,u,p,A):m?xe(e,r,n,s.lineClipsArray.length,A):Me(e,r,n,A);if(d)y.activeTexture.set(g.TEXTURE0),r.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),v.updatePaintBuffers(p);else if(u&&(x||e.lineAtlas.dirty))y.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(y);else if(m){const r=s.gradients[n.id];let o=r.texture;if(n.gradientVersion!==r.version){let h=256;if(n.stepInterpolant){const n=i.getSource().maxzoom,r=a.canonical.z===n?Math.ceil(1<<e.transform.maxZoom-a.canonical.z):1;h=t.clamp(t.nextPowerOfTwo(s.maxLineLength/t.EXTENT*1024*r),256,y.maxTextureSize)}r.gradient=t.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:h,image:r.gradient||void 0,clips:s.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new l(y,r.gradient,g.RGBA),r.version=n.gradientVersion,o=r.texture}y.activeTexture.set(g.TEXTURE0),o.bind(n.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}M.draw(y,g.TRIANGLES,o,e.stencilModeForClipping(a),h,Ai.disabled,T,w,n.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,n.paint,e.transform.zoom,v,s.layoutVertexBuffer2),_=!1}},fill:function(e,i,n,r){const a=n.paint.get("fill-color"),s=n.paint.get("fill-opacity");if(0===s.constantOr(1))return;const o=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),h=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t.Color.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(e.renderPass===h){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?xi.ReadWrite:xi.ReadOnly);zi(e,i,n,r,t,o,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){const t=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,xi.ReadOnly);zi(e,i,n,r,t,o,!0)}},"fill-extrusion":function(t,e,i,n){const r=i.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){const a=new xi(t.context.gl.LEQUAL,xi.ReadWrite,t.depthRangeFor3D);if(1!==r||i.paint.get("fill-extrusion-pattern").constantOr(1))Fi(t,e,i,n,a,Si.disabled,bi.disabled),Fi(t,e,i,n,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const r=t.colorModeForRenderPass();Fi(t,e,i,n,a,Si.disabled,r)}}},hillshade:function(t,e,i,n){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const r=t.context,a=t.depthModeForSublayer(0,xi.ReadOnly),s=t.colorModeForRenderPass(),[o,l]="translucent"===t.renderPass?t.stencilConfigForOverlap(n):[{},n];for(const n of l){const r=e.getTile(n);void 0!==r.needsHillshadePrepare&&r.needsHillshadePrepare&&"offscreen"===t.renderPass?Ri(t,r,i,a,Si.disabled,s):"translucent"===t.renderPass&&Oi(t,n,r,i,a,o[n.overscaledZ],s)}r.viewport.set([0,0,t.width,t.height])},raster:function(t,e,i,n){if("translucent"!==t.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!n.length)return;const r=t.context,a=r.gl,s=e.getSource(),o=t.useProgram("raster"),l=t.colorModeForRenderPass(),[h,u]=s instanceof I?[{},n]:t.stencilConfigForOverlap(n),c=u[u.length-1].overscaledZ,d=!t.options.moving;for(const n of u){const u=t.depthModeForSublayer(n.overscaledZ-c,1===i.paint.get("raster-opacity")?xi.ReadWrite:xi.ReadOnly,a.LESS),m=e.getTile(n);m.registerFadeDuration(i.paint.get("raster-fade-duration"));const p=e.findLoadedParent(n,0),f=Ni(m,p,e,i,t.transform,t.style.terrain);let y,g;const _="nearest"===i.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;r.activeTexture.set(a.TEXTURE0),m.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(a.TEXTURE1),p?(p.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,p.tileID.overscaledZ-m.tileID.overscaledZ),g=[m.tileID.canonical.x*y%1,m.tileID.canonical.y*y%1]):m.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const v=t.style.terrain&&t.style.terrain.getTerrainData(n),b=v?n:null,M=b?b.posMatrix:t.transform.calculatePosMatrix(n.toUnwrapped(),d),x=Ce(M,g||[0,0],y||1,f,i);s instanceof I?o.draw(r,a.TRIANGLES,u,Si.disabled,l,Ai.disabled,x,v,i.id,s.boundsBuffer,t.quadTriangleIndexBuffer,s.boundsSegments):o.draw(r,a.TRIANGLES,u,h[n.overscaledZ],l,Ai.disabled,x,v,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i,n){const r=i.paint.get("background-color"),a=i.paint.get("background-opacity");if(0===a)return;const s=t.context,o=s.gl,l=t.transform,h=l.tileSize,u=i.paint.get("background-pattern");if(t.isPatternMissing(u))return;const c=!u&&1===r.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==c)return;const d=Si.disabled,m=t.depthModeForSublayer(0,"opaque"===c?xi.ReadWrite:xi.ReadOnly),p=t.colorModeForRenderPass(),f=t.useProgram(u?"backgroundPattern":"background"),y=n||l.coveringTiles({tileSize:h,terrain:t.style.terrain});u&&(s.activeTexture.set(o.TEXTURE0),t.imageManager.bind(t.context));const g=i.getCrossfadeParameters();for(const e of y){const l=n?e.posMatrix:t.transform.calculatePosMatrix(e.toUnwrapped()),c=u?Le(l,a,t,u,{tileID:e,tileSize:h},g):De(l,a,r),y=t.style.terrain&&t.style.terrain.getTerrainData(e);f.draw(s,o.TRIANGLES,m,d,p,Ai.disabled,c,y,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},debug:function(t,e,i){for(let n=0;n<i.length;n++)qi(t,e,i[n])},custom:function(t,e,i){const n=t.context,r=i.implementation;if("offscreen"===t.renderPass){const e=r.prerender;e&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),e.call(r,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(Si.disabled);const e="3d"===r.renderingMode?new xi(t.context.gl.LEQUAL,xi.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,xi.ReadOnly);n.setDepthMode(e),r.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}};class Ki{constructor(e,i){this.context=new Mi(e),this.transform=i,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.create(),renderTime:0},this.setup(),this.numSublayers=N.maxUnderzooming+N.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new qt,this.gpuTimers={}}resize(t,e,i){if(this.width=t*i,this.height=e*i,this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style._order)this.style._layers[t].resize()}setup(){const e=this.context,i=new t.PosArray;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,Yt.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,Yt.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const r=new t.RasterBoundsArray;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,C.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.PosArray;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,Yt.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const s=new t.LineStripIndexArray;s.emplaceBack(0),s.emplaceBack(1),s.emplaceBack(3),s.emplaceBack(2),s.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(s);const o=new t.TriangleIndexArray;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(o),this.emptyTexture=new l(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);const h=this.context.gl;this.stencilClearMode=new Si({func:h.ALWAYS,mask:0},0,255,h.ZERO,h.ZERO,h.ZERO)}clearStencil(){const e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const n=t.create();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,xi.disabled,this.stencilClearMode,bi.disabled,Ai.disabled,_e(n),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;const i=this.context,n=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(bi.disabled),i.setDepthMode(xi.disabled);const r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of e){const e=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,a=this.style.terrain&&this.style.terrain.getTerrainData(t);r.draw(i,n.TRIANGLES,xi.disabled,new Si({func:n.ALWAYS,mask:0},e,255,n.KEEP,n.KEEP,n.REPLACE),bi.disabled,Ai.disabled,_e(t.posMatrix),a,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,e=this.context.gl;return new Si({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){const e=this.context.gl;return new Si({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){const e=this.context.gl,i=t.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),n=i[i.length-1].overscaledZ,r=i[0].overscaledZ-n+1;if(r>1){this.currentStencilSource=void 0,this.nextStencilID+r>256&&this.clearStencil();const t={};for(let i=0;i<r;i++)t[i+n]=new Si({func:e.GEQUAL,mask:255},i+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=r,[t,i]}return[{[n]:Si.disabled},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new bi([e.CONSTANT_COLOR,e.ONE],new t.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?bi.unblended:bi.alphaBlended}depthModeForSublayer(t,e,i){if(!this.opaquePassEnabledForLayer())return xi.disabled;const n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new xi(i||this.context.gl.LEQUAL,e,[n,n])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const n=this.style._order,r=this.style.sourceCaches,a=this.style.terrain&&new Ji(this);for(const t in r){const e=r[t];e.used&&e.prepare(this.context)}const s={},o={},l={};for(const t in r){const e=r[t];s[t]=e.getVisibleCoordinates(),o[t]=s[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<n.length;t++)if(this.style._layers[n[t]].is3D()){this.opaquePassCutoff=t;break}if(a){this.opaquePassCutoff=0;const e=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!t.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||e.length)&&(t.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,i){const n=e.context,r=n.gl,a=bi.unblended,s=new xi(r.LEQUAL,xi.ReadWrite,[0,1]),o=i.getTerrainMesh(),l=i.sourceCache.getRenderableTiles(),h=e.useProgram("terrainDepth");n.bindFramebuffer.set(i.getFramebuffer("depth").framebuffer),n.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),n.clear({color:t.Color.transparent,depth:1});for(const t of l){const l=i.getTerrainData(t.tileID),u=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());h.draw(n,r.TRIANGLES,s,Si.disabled,a,Ai.backCCW,{u_matrix:u},l,"terrain",o.vertexBuffer,o.indexBuffer,o.segments)}n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height])}(this,this.style.terrain),function(e,i){const n=e.context,r=n.gl,a=bi.unblended,s=new xi(r.LEQUAL,xi.ReadWrite,[0,1]),o=i.getTerrainMesh(),l=i.getCoordsTexture(),h=i.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");n.bindFramebuffer.set(i.getFramebuffer("coords").framebuffer),n.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),n.clear({color:t.Color.transparent,depth:1}),i.coordsIndex=[];for(const t of h){const h=i.getTerrainData(t.tileID);n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l.texture);const c=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());u.draw(n,r.TRIANGLES,s,Si.disabled,a,Ai.backCCW,{u_matrix:c,u_terrain_coords_id:(255-i.coordsIndex.length)/255,u_texture:0},h,"terrain",o.vertexBuffer,o.indexBuffer,o.segments),i.coordsIndex.push(t.tileID.key)}n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const t of n){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const i=o[e.source];("custom"===e.type||i.length)&&this.renderLayer(this,r[e.source],e,i)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!a)for(this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[n[this.currentLayer]],e=r[t.source],i=s[t.source];this._renderTileClippingMasks(t,i),this.renderLayer(this,e,t,i)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const t=this.style._layers[n[this.currentLayer]],e=r[t.source];if(a&&a.renderLayer(t))continue;const i=("symbol"===t.type?l:o)[t.source];this._renderTileClippingMasks(t,s[t.source]),this.renderLayer(this,e,t,i)}if(this.options.showTileBoundaries){let t,e;Object.values(this.style._layers).forEach((i=>{i.source&&!i.isHidden(this.transform.zoom)&&(i.source!==(e&&e.id)&&(e=this.style.sourceCaches[i.source]),(!t||t.getSource().maxzoom<e.getSource().maxzoom)&&(t=e))})),t&&Xi.debug(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Gi(t,t.transform.height-(e.top||0),3,Bi),Gi(t,e.bottom||0,3,ji),$i(t,e.left||0,3,Hi),$i(t,t.transform.width-(e.right||0),3,Ui);const i=t.transform.centerPoint;!function(t,e,i,n){Zi(t,e-1,i-10,2,20,n),Zi(t,e-10,i-1,20,2,n)}(t,i.x,t.transform.height-i.y,Vi)}(this),this.context.setDefault()}renderLayer(t,e,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||(n||[]).length)&&(this.id=i.id,this.gpuTimingStart(i),Xi[i.type](t,e,i,n,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const i in t){const n=t[i],r=this.context.extTimerQuery,a=r.getQueryObjectEXT(n.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n.query),e[i]=a}return e}translatePosMatrix(e,i,n,r,a){if(!n[0]&&!n[1])return e;const s=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(s){const t=Math.sin(s),e=Math.cos(s);n=[n[0]*e-n[1]*t,n[0]*t+n[1]*e]}const o=[a?n[0]:Mt(i,n[0],this.transform.zoom),a?n[1]:Mt(i,n[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,o),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i}useProgram(t,e){this.cache=this.cache||{};const i=t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[i]||(this.cache[i]=new oe(this.context,t,ne[t],e,ze[t],this._showOverdrawInspector,this.style.terrain)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Qi{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,i,n){const r=Math.pow(2,n),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const a=1/(n=t.transformMat4([],n,e))[3]/i*r;return t.mul$1(n,n,[a,a,1/n[3],a])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const i=t.sub([],a[e[0]],a[e[1]]),n=t.sub([],a[e[2]],a[e[1]]),r=t.normalize([],t.cross([],i,n)),s=-t.dot(r,a[e[1]]);return r.concat(s)}));return new Qi(a,s)}}class tn{constructor(e,i){this.min=e,this.max=i,this.center=t.scale$1([],t.add([],this.min,this.max),.5)}quadrant(e){const i=[e%2==0,e<2],n=t.clone$2(this.min),r=t.clone$2(this.max);for(let t=0;t<i.length;t++)n[t]=i[t]?this.min[t]:this.center[t],r[t]=i[t]?this.center[t]:this.max[t];return r[2]=this.max[2],new tn(n,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(e){const i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let r=0;r<e.planes.length;r++){const a=e.planes[r];let s=0;for(let e=0;e<i.length;e++)t.dot$1(a,i[e])>=0&&s++;if(0===s)return 0;s!==i.length&&(n=!1)}if(n)return 2;for(let t=0;t<3;t++){let i=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let r=0;r<e.points.length;r++){const a=e.points[r][t]-this.min[t];i=Math.min(i,a),n=Math.max(n,a)}if(n<0||i>this.max[t]-this.min[t])return 0}return 1}}class en{constructor(t=0,e=0,i=0,n=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=n}interpolate(e,i,n){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,n)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,n)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,n)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,n)),this}getCenter(e,i){const n=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.pointGeometry(n,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new en(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class nn{constructor(e,i,n,r,a){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===a||!!a,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==n?0:n,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new en,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t._elevation=this._elevation,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const i=-t.wrap(e,-180,180)*Math.PI/180;var n;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=(n=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),l=Math.cos(i);t[0]=n*l+a*o,t[1]=r*l+s*o,t[2]=n*-o+a*l,t[3]=r*-o+s*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const n=this.pointCoordinate(new t.pointGeometry(0,0)),r=this.pointCoordinate(new t.pointGeometry(this.width,0)),a=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),s=this.pointCoordinate(new t.pointGeometry(0,this.height)),o=Math.floor(Math.min(n.x,r.x,a.x,s.x)),l=Math.floor(Math.max(n.x,r.x,a.x,s.x)),h=1;for(let n=o-h;n<=l+h;n++)0!==n&&i.push(new t.UnwrappedTileID(n,e))}return i}coveringTiles(e){var i,n;let r=this.coveringZoomLevel(e);const a=r;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);const s=this.pointCoordinate(this.getCameraPoint()),o=t.MercatorCoordinate.fromLngLat(this.center),l=Math.pow(2,r),h=[l*s.x,l*s.y,0],u=[l*o.x,l*o.y,0],c=Qi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r);let d=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(d=r);const m=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,p=t=>({aabb:new tn([t*l,0,0],[(t+1)*l,l,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),f=[],y=[],g=r,_=e.reparseOverscaled?a:r;if(this._renderWorldCopies)for(let t=1;t<=3;t++)f.push(p(-t)),f.push(p(t));for(f.push(p(0));f.length>0;){const r=f.pop(),a=r.x,s=r.y;let o=r.fullyVisible;if(!o){const t=r.aabb.intersects(c);if(0===t)continue;o=2===t}const l=e.terrain?h:u,p=r.aabb.distanceX(l),v=r.aabb.distanceY(l),b=Math.max(Math.abs(p),Math.abs(v)),M=m+(1<<g-r.zoom)-2;if(r.zoom===g||b>M&&r.zoom>=d){const e=g-r.zoom,i=h[0]-.5-(a<<e),n=h[1]-.5-(s<<e);y.push({tileID:new t.OverscaledTileID(r.zoom===g?_:r.zoom,r.wrap,r.zoom,a,s),distanceSq:t.sqrLen([u[0]-.5-a,u[1]-.5-s]),tileDistanceToCamera:Math.sqrt(i*i+n*n)})}else for(let l=0;l<4;l++){const h=(a<<1)+l%2,u=(s<<1)+(l>>1),c=r.zoom+1;let d=r.aabb.quadrant(l);if(e.terrain){const a=new t.OverscaledTileID(c,r.wrap,c,h,u),s=e.terrain.getMinMaxElevation(a),o=null!==(i=s.minElevation)&&void 0!==i?i:this.elevation,l=null!==(n=s.maxElevation)&&void 0!==n?n:this.elevation;d=new tn([d.min[0],d.min[1],o],[d.max[0],d.max[1],l])}f.push({aabb:d,zoom:c,x:h,y:u,wrap:r.wrap,fullyVisible:o})}}return y.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(t){this.freezeElevation||(this.elevation=t?this.getElevation(this._center,t):0)}getElevation(e,i){const n=t.MercatorCoordinate.fromLngLat(e),r=(1<<this.tileZoom)*t.EXTENT,a=n.x*r,s=n.y*r,o=Math.floor(a/t.EXTENT),l=Math.floor(s/t.EXTENT),h=new t.OverscaledTileID(this.tileZoom,0,this.tileZoom,o,l);return i.getElevation(h,a%t.EXTENT,s%t.EXTENT,t.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const i=this.pointLocation(this.centerPoint,e),n=this.getElevation(i,e);if(!(this.elevation-n))return;const r=this.getCameraPosition(),a=t.MercatorCoordinate.fromLngLat(r.lngLat,r.altitude),s=t.MercatorCoordinate.fromLngLat(i,n),o=a.x-s.x,l=a.y-s.y,h=a.z-s.z,u=Math.sqrt(o*o+l*l+h*h),c=this.scaleZoom(this.cameraToCenterDistance/u/this.tileSize);this._elevation=n,this._center=i,this.zoom=c}setLocationAtPoint(e,i){const n=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),s=new t.MercatorCoordinate(a.x-(n.x-r.x),a.y-(n.y-r.y));this.center=this.coordinateLocation(s),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,e){return e?this.coordinatePoint(this.locationCoordinate(t),this.getElevation(t,e),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,e){return this.coordinateLocation(this.pointCoordinate(t,e))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(e,i){if(i){const t=i.pointCoordinate(e);if(null!=t)return t}const n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);const a=n[3],s=r[3],o=n[1]/a,l=r[1]/s,h=n[2]/a,u=r[2]/s,c=h===u?0:(0-h)/(u-h);return new t.MercatorCoordinate(t.number(n[0]/a,r[0]/s,c)/this.worldSize,t.number(o,l,c)/this.worldSize)}coordinatePoint(e,i=0,n=this.pixelMatrix){const r=[e.x*this.worldSize,e.y*this.worldSize,i,1];return t.transformMat4(r,r,n),new t.pointGeometry(r[0]/r[3],r[1]/r[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(0,e))).extend(this.pointLocation(new t.pointGeometry(this.width,e))).extend(this.pointLocation(new t.pointGeometry(this.width,this.height))).extend(this.pointLocation(new t.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,i=!1){const n=e.key,r=i?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];const a=e.canonical,s=this.worldSize/this.zoomScale(a.z),o=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[o*s,a.y*s,0]),t.scale(l,l,[s/t.EXTENT,s/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),r[n]=new Float32Array(l),r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,i,n,r,a=-90,s=90,o=-180,l=180;const h=this.size,u=this._unmodified;if(this.latRange){const i=this.latRange;a=t.mercatorYfromLat(i[1])*this.worldSize,s=t.mercatorYfromLat(i[0])*this.worldSize,e=s-a<h.y?h.y/(s-a):0}if(this.lngRange){const e=this.lngRange;o=t.wrap(t.mercatorXfromLng(e[0])*this.worldSize,0,this.worldSize),l=t.wrap(t.mercatorXfromLng(e[1])*this.worldSize,0,this.worldSize),l<o&&(l+=this.worldSize),i=l-o<h.x?h.x/(l-o):0}const c=this.point,d=Math.max(i||0,e||0);if(d)return this.center=this.unproject(new t.pointGeometry(i?(l+o)/2:c.x,e?(s+a)/2:c.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const t=c.y,e=h.y/2;t-e<a&&(r=a+e),t+e>s&&(r=s-e)}if(this.lngRange){const e=(o+l)/2,i=t.wrap(c.x,e-this.worldSize/2,e+this.worldSize/2),r=h.x/2;i-r<o&&(n=o+r),i+r>l&&(n=l-r)}void 0===n&&void 0===r||(this.center=this.unproject(new t.pointGeometry(void 0!==n?n:c.x,void 0!==r?r:c.y)).wrap()),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,i=this.point.x,n=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let r=t.identity(new Float64Array(16));t.scale(r,r,[this.width/2,-this.height/2,1]),t.translate(r,r,[1,-1,0]),this.labelPlaneMatrix=r,r=t.identity(new Float64Array(16)),t.scale(r,r,[1,-1,1]),t.translate(r,r,[-1,-1,0]),t.scale(r,r,[2/this.width,2/this.height,1]),this.glCoordMatrix=r,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const a=Math.PI/2+this._pitch,s=this._fov*(.5+e.y/this.height),o=Math.sin(s)*this.cameraToSeaLevelDistance/Math.sin(t.clamp(Math.PI-a-s,.01,Math.PI-.01)),l=this.getHorizon(),h=2*Math.atan(l/this.cameraToCenterDistance)*(.5+e.y/(2*l)),u=Math.sin(h)*this.cameraToSeaLevelDistance/Math.sin(t.clamp(Math.PI-a-h,.01,Math.PI-.01)),c=Math.cos(Math.PI/2-this._pitch)*o+this.cameraToSeaLevelDistance,d=Math.cos(Math.PI/2-this._pitch)*u+this.cameraToSeaLevelDistance,m=1.01*Math.min(c,d),p=this.height/50;r=new Float64Array(16),t.perspective(r,this._fov,this.width/this.height,p,m),r[8]=2*-e.x/this.width,r[9]=2*e.y/this.height,t.scale(r,r,[1,-1,1]),t.translate(r,r,[0,0,-this.cameraToCenterDistance]),t.rotateX(r,r,this._pitch),t.rotateZ(r,r,this.angle),t.translate(r,r,[-i,-n,0]),this.mercatorMatrix=t.scale([],r,[this.worldSize,this.worldSize,this.worldSize]),t.scale(r,r,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,r),t.translate(r,r,[0,0,-this.elevation]),this.projMatrix=r,this.invProjMatrix=t.invert([],r),this.pixelMatrix3D=t.multiply(new Float64Array(16),this.labelPlaneMatrix,r);const f=this.width%2/2,y=this.height%2/2,g=Math.cos(this.angle),_=Math.sin(this.angle),v=i-Math.round(i)+g*f+_*y,b=n-Math.round(n)+g*y+_*f,M=new Float64Array(r);if(t.translate(M,M,[v>.5?v-1:v,b>.5?b-1:b,0]),this.alignedProjMatrix=M,r=t.invert(new Float64Array(16),this.pixelMatrix),!r)throw new Error("failed to invert matrix");this.pixelMatrixInverse=r,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.pointGeometry(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}getCameraQueryGeometry(e){const i=this.getCameraPoint();if(1===e.length)return[e[0],i];{let n=i.x,r=i.y,a=i.x,s=i.y;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),a=Math.max(a,t.x),s=Math.max(s,t.y);return[new t.pointGeometry(n,r),new t.pointGeometry(a,r),new t.pointGeometry(a,s),new t.pointGeometry(n,s),new t.pointGeometry(n,r)]}}}class rn{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t){let e=!1,i=null;const n=()=>{i=null,e&&(t(),i=setTimeout(n,300),e=!1)};return()=>(e=!0,i||n(),i)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,n),a=Math.round(e.lng*r)/r,s=Math.round(e.lat*r)/r,o=this._map.getBearing(),l=this._map.getPitch();let h="";if(h+=t?`/${a}/${s}/${i}`:`${i}/${s}/${a}`,(o||l)&&(h+="/"+Math.round(10*o)/10),l&&(h+=`/${Math.round(l)}`),this._hashName){const t=this._hashName;let e=!1;const i=window.location.hash.slice(1).split("&").map((i=>{const n=i.split("=")[0];return n===t?(e=!0,`${n}=${h}`):i})).filter((t=>t));return e||i.push(`${t}=${h}`),`#${i.join("&")}`}return`#${h}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((t=>t.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}}}const an={linearity:.3,easing:t.bezier(0,0,.3,1)},sn=t.extend({deceleration:2500,maxSpeed:1400},an),on=t.extend({deceleration:20,maxSpeed:1400},an),ln=t.extend({deceleration:1e3,maxSpeed:360},an),hn=t.extend({deceleration:1e3,maxSpeed:90},an);class un{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,i=t.exported.now();for(;e.length>0&&i-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)i.zoom+=t.zoomDelta||0,i.bearing+=t.bearingDelta||0,i.pitch+=t.pitchDelta||0,t.panDelta&&i.pan._add(t.panDelta),t.around&&(i.around=t.around),t.pinchAround&&(i.pinchAround=t.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(i.pan.mag()){const a=dn(i.pan.mag(),n,t.extend({},sn,e||{}));r.offset=i.pan.mult(a.amount/i.pan.mag()),r.center=this._map.transform.center,cn(r,a)}if(i.zoom){const t=dn(i.zoom,n,on);r.zoom=this._map.transform.zoom+t.amount,cn(r,t)}if(i.bearing){const e=dn(i.bearing,n,ln);r.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),cn(r,e)}if(i.pitch){const t=dn(i.pitch,n,hn);r.pitch=this._map.transform.pitch+t.amount,cn(r,t)}if(r.zoom||r.bearing){const t=void 0===i.pinchAround?i.around:i.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(r,{noMoveStart:!0})}}function cn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function dn(e,i,n){const{maxSpeed:r,linearity:a,deceleration:s}=n,o=t.clamp(e*a/(i/1e3),-r,r),l=Math.abs(o)/(s*a);return{easing:n.easing,duration:1e3*l,amount:o*(l/2)}}class mn extends t.Event{constructor(e,i,n,r={}){const s=a.mousePos(i.getCanvasContainer(),n),o=i.unproject(s);super(e,t.extend({point:s,lngLat:o,originalEvent:n},r)),this._defaultPrevented=!1,this.target=i}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class pn extends t.Event{constructor(e,i,n){const r="touchend"===e?n.changedTouches:n.touches,s=a.touchPos(i.getCanvasContainer(),r),o=s.map((t=>i.unproject(t))),l=s.reduce(((t,e,i,n)=>t.add(e.div(n.length))),new t.pointGeometry(0,0));super(e,{points:s,point:l,lngLats:o,lngLat:i.unproject(l),originalEvent:n}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fn extends t.Event{constructor(t,e,i){super(t,{originalEvent:i}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class yn{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new fn(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new mn(t.type,this._map,t))}mouseup(t){this._map.fire(new mn(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new mn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new mn(t.type,this._map,t))}mouseover(t){this._map.fire(new mn(t.type,this._map,t))}mouseout(t){this._map.fire(new mn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new pn(t.type,this._map,t))}touchmove(t){this._map.fire(new pn(t.type,this._map,t))}touchend(t){this._map.fire(new pn(t.type,this._map,t))}touchcancel(t){this._map.fire(new pn(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gn{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new mn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new mn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _n{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(a.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const i=e;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;const n=this._startPos;this._lastPos=i,this._box||(this._box=a.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const r=Math.min(n.x,i.x),s=Math.max(n.x,i.x),o=Math.min(n.y,i.y),l=Math.max(n.y,i.y);a.setTransform(this._box,`translate(${r}px,${o}px)`),this._box.style.width=s-r+"px",this._box.style.height=l-o+"px"}mouseupWindow(e,i){if(!this._active)return;if(0!==e.button)return;const n=this._startPos,r=i;if(this.reset(),a.suppressClick(),n.x!==r.x||n.y!==r.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(n,r,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))}}function vn(t,e){if(t.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${t.length}, points ${e.length}`);const i={};for(let n=0;n<t.length;n++)i[t[n].identifier]=e[n];return i}class bn{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,i,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){const i=new t.pointGeometry(0,0);for(const t of e)i._add(t);return i.div(e.length)}(i),this.touches=vn(n,i)))}touchmove(t,e,i){if(this.aborted||!this.centroid)return;const n=vn(i,e);for(const t in this.touches){const e=this.touches[t],i=n[t];(!i||i.dist(e)>30)&&(this.aborted=!0)}}touchend(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class Mn{constructor(t){this.singleTap=new bn(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,i){this.singleTap.touchstart(t,e,i)}touchmove(t,e,i){this.singleTap.touchmove(t,e,i)}touchend(t,e,i){const n=this.singleTap.touchend(t,e,i);if(n){const e=t.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(n)<30;if(e&&i||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class xn{constructor(){this._zoomIn=new Mn({numTouches:1,numTaps:2}),this._zoomOut=new Mn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)}touchmove(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)}touchend(t,e,i){const n=this._zoomIn.touchend(t,e,i),r=this._zoomOut.touchend(t,e,i);return n?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wn={0:1,2:2};class Sn{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const i=a.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}mousemoveWindow(t,e){const i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){const i=wn[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)}mouseupWindow(t){this._lastPoint&&a.mouseButton(t)===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class An extends Sn{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Tn extends Sn{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(t){t.preventDefault()}}class Cn extends Sn{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(t){t.preventDefault()}}class In{constructor(t,e){this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=e,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(t,e,i){return this._calculateTransform(t,e,i)}touchmove(t,e,i){if(this._map._cooperativeGestures&&(2===this._minTouches&&i.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,i.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)}touchend(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,i,n){n.length>0&&(this._active=!0);const r=vn(n,i),a=new t.pointGeometry(0,0),s=new t.pointGeometry(0,0);let o=0;for(const t in r){const e=r[t],i=this._touches[t];i&&(a._add(e),s._add(e.sub(i)),o++,r[t]=e)}if(this._touches=r,o<this._minTouches||!s.mag())return;const l=s.div(o);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(o),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,i){return{}}touchstart(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,i){if(!this._firstTwoTouches)return;t.preventDefault();const[n,r]=this._firstTwoTouches,a=Pn(i,e,n),s=Pn(i,e,r);if(!a||!s)return;const o=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],o,t)}touchend(t,e,i){if(!this._firstTwoTouches)return;const[n,r]=this._firstTwoTouches,s=Pn(i,e,n),o=Pn(i,e,r);s&&o||(this._active&&a.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Pn(t,e,i){for(let n=0;n<t.length;n++)if(t[n].identifier===i)return e[n]}function En(t,e){return Math.log(t/e)/Math.LN2}class Dn extends kn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(En(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:En(this._distance,i),pinchAround:e}}}function Ln(t,e){return 180*t.angleWith(e)/Math.PI}class zn extends kn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ln(this._vector,i),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,i=Ln(t,this._startVector);return Math.abs(i)<e}}function Fn(t){return Math.abs(t.y)>Math.abs(t.x)}class On extends kn{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,e,i){super.touchstart(t,e,i),this._currentTouchCount=i.length}_start(t){this._lastPoints=t,Fn(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,i){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const n=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(n,r,i.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+r.y)/2*-.5}):void 0}gestureBeginsVertically(t,e,i){if(void 0!==this._valid)return this._valid;const n=t.mag()>=2,r=e.mag()>=2;if(!n&&!r)return;if(!n||!r)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const a=t.y>0==e.y>0;return Fn(t)&&Fn(e)&&a}}const Rn={panStep:100,bearingStep:15,pitchStep:10};class Nn{constructor(){const t=Rn;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,i=0,n=0,r=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(i=0,n=0),{cameraAnimation:s=>{const o=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Bn,zoom:e?Math.round(o)+e*(t.shiftKey?2:1):o,bearing:s.getBearing()+i*this._bearingStep,pitch:s.getPitch()+n*this._pitchStep,offset:[-r*this._panStep,-a*this._panStep],center:s.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bn(t){return t*(2-t)}const jn=4.000244140625;class Hn{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;e.preventDefault()}let i=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=t.exported.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==i&&i%jn==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const i=a.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>jn?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==i&&(i=1/i);const n="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(n*i))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:e.zoom,n=this._startZoom,r=this._easing;let a,s=!1;if("wheel"===this._type&&n&&r){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),o=r(e);a=t.number(n,i,o),e<1?this._frameId||(this._frameId=!0):s=!0}else a=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=t.ease;if(this._prevEase){const e=this._prevEase,n=(t.exported.now()-e.start)/e.duration,r=e.easing(n+.01)-e.easing(n),a=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-a*a);i=t.bezier(a,s,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:i},i}reset(){this._active=!1}}class Un{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vn{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gn{constructor(){this._tap=new Mn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))}touchmove(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const n=e[0],r=n.y-this._swipePoint.y;return this._swipePoint=n,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,i)}touchend(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $n{constructor(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zn{constructor(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class qn{constructor(t,e,i,n){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Yn=t=>t.zoom||t.drag||t.pitch||t.rotate;class Wn extends t.Event{}function Jn(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Xn{constructor(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new un(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,e,i]of this._listeners)a.addEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[t,e,i]of this._listeners)a.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new yn(e,t));const n=e.boxZoom=new _n(e,t);this._add("boxZoom",n);const r=new xn,a=new Vn;e.doubleClickZoom=new Un(a,r),this._add("tapZoom",r),this._add("clickZoom",a);const s=new Gn;this._add("tapDragZoom",s);const o=e.touchPitch=new On(e);this._add("touchPitch",o);const l=new Tn(t),h=new Cn(t);e.dragRotate=new Zn(t,l,h),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]);const u=new An(t),c=new In(t,e);e.dragPan=new $n(i,u,c),this._add("mousePan",u),this._add("touchPan",c,["touchZoom","touchRotate"]);const d=new zn,m=new Dn;e.touchZoomRotate=new qn(i,m,d,s),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]);const p=e.scrollZoom=new Hn(e,this);this._add("scrollZoom",p,["mousePan"]);const f=e.keyboard=new Nn;this._add("keyboard",f),this._add("blockableMapEvent",new gn(e));for(const i of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[i]&&e[i].enable(t[i])}_add(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Yn(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,i){for(const n in t)if(n!==i&&(!e||e.indexOf(n)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const i of t)this._el.contains(i.target)&&e.push(i);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const i="renderFrame"===t.type?void 0:t,n={needsRenderFrame:!1},r={},s={},o=t.touches,l=o?this._getMapTouches(o):void 0,h=l?a.touchPos(this._el,l):a.mousePos(this._el,t);for(const{handlerName:a,handler:o,allowed:u}of this._handlers){if(!o.isEnabled())continue;let c;this._blockedByActive(s,u,a)?o.reset():o[e||t.type]&&(c=o[e||t.type](t,h,l),this.mergeHandlerResult(n,r,c,a,i),c&&c.needsRenderFrame&&this._triggerRenderFrame()),(c||o.isActive())&&(s[a]=o)}const u={};for(const t in this._previousActiveHandlers)s[t]||(u[t]=i);this._previousActiveHandlers=s,(Object.keys(u).length||Jn(n))&&(this._changes.push([n,r,u]),this._triggerRenderFrame()),(Object.keys(s).length||Jn(n))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:c}=n;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))}mergeHandlerResult(e,i,n,r,a){if(!n)return;t.extend(e,n);const s={handlerName:r,originalEvent:n.originalEvent||a};void 0!==n.zoomDelta&&(i.zoom=s),void 0!==n.panDelta&&(i.drag=s),void 0!==n.pitchDelta&&(i.pitch=s),void 0!==n.bearingDelta&&(i.rotate=s)}_applyChanges(){const e={},i={},n={};for(const[r,a,s]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.extend(i,a),t.extend(n,s);this._updateMapTransform(e,i,n),this._changes=[]}_updateMapTransform(e,i,n){const r=this._map,a=r.transform,s=r.style&&r.style.terrain;if(!(Jn(e)||s&&this._drag))return this._fireEvents(i,n,!0);let{panDelta:o,zoomDelta:l,bearingDelta:h,pitchDelta:u,around:c,pinchAround:d}=e;void 0!==d&&(c=d),r._stop(!0),c=c||r.transform.centerPoint;const m=a.pointLocation(o?c.sub(o):c);h&&(a.bearing+=h),u&&(a.pitch+=u),l&&(a.zoom+=l),s?i.drag&&!this._drag?(this._drag={center:a.centerPoint,lngLat:a.pointLocation(c),point:c,handlerName:i.drag.handlerName},r.fire(new t.Event("freezeElevation",{freeze:!0}))):this._drag&&n[this._drag.handlerName]?(r.fire(new t.Event("freezeElevation",{freeze:!1})),this._drag=null):i.drag&&this._drag&&(a.center=a.pointLocation(a.centerPoint.sub(o))):a.setLocationAtPoint(m,c),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(i,n,!0)}_fireEvents(e,i,n){const r=Yn(this._eventsInProgress),a=Yn(e),s={};for(const t in e){const{originalEvent:i}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=i),this._eventsInProgress[t]=e[t]}!r&&a&&this._fireEvent("movestart",a.originalEvent);for(const t in s)this._fireEvent(t,s[t]);a&&this._fireEvent("move",a.originalEvent);for(const t in e){const{originalEvent:i}=e[t];this._fireEvent(t,i)}const o={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:n}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=i[e]||n,o[`${t}end`]=l)}for(const t in o)this._fireEvent(t,o[t]);const h=Yn(this._eventsInProgress);if(n&&(r||a)&&!h){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(i(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Wn("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Kn={extend:(e,...i)=>t.extend(e,...i),run(t){t()},logToElement(t,e=!1,i="log"){const n=window.document.getElementById(i);n&&(e&&(n.innerHTML=""),n.innerHTML+=`<br>${t}`)}};class Qn extends t.Evented{constructor(e,i){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,i,n){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),n)}panTo(e,i,n){return this.easeTo(t.extend({center:e},i),n)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,i,n){return this.easeTo(t.extend({zoom:e},i),n)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,i,n){return this.easeTo(t.extend({bearing:e},i),n)}resetNorth(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,i){e=t.LngLatBounds.convert(e);const n=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,i)}_cameraForBoxAndBearing(e,i,n,r){const a={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.extend({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){const t=r.padding;r.padding={top:t,bottom:t,right:t,left:t}}r.padding=t.extend(a,r.padding);const s=this.transform,o=s.padding,l=s.project(t.LngLat.convert(e)),h=s.project(t.LngLat.convert(i)),u=l.rotate(-n*Math.PI/180),c=h.rotate(-n*Math.PI/180),d=new t.pointGeometry(Math.max(u.x,c.x),Math.max(u.y,c.y)),m=new t.pointGeometry(Math.min(u.x,c.x),Math.min(u.y,c.y)),p=d.sub(m),f=(s.width-(o.left+o.right+r.padding.left+r.padding.right))/p.x,y=(s.height-(o.top+o.bottom+r.padding.top+r.padding.bottom))/p.y;if(y<0||f<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const g=Math.min(s.scaleZoom(s.scale*Math.min(f,y)),r.maxZoom),_=t.pointGeometry.convert(r.offset),v=new t.pointGeometry((r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2).rotate(n*Math.PI/180),b=_.add(v).mult(s.scale/s.zoomScale(g));return{center:s.unproject(l.add(h).div(2).sub(b)),zoom:g,bearing:n}}fitBounds(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)}fitScreenCoordinates(e,i,n,r,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(i)),n,r),r,a)}_fitInternal(e,i,n){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,n):this.flyTo(i,n)):this}jumpTo(e,i){this.stop();const n=this.transform;let r=!1,a=!1,s=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(a=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(s=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),r&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),a&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),s&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))}calculateCameraOptionsFromTo(e,i,n,r=0){const a=t.MercatorCoordinate.fromLngLat(e,i),s=t.MercatorCoordinate.fromLngLat(n,r),o=s.x-a.x,l=s.y-a.y,h=s.z-a.z,u=Math.hypot(o,l,h);if(0===u)throw new Error("Can't calculate camera options with same From and To");const c=Math.hypot(o,l),d=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),m=180*Math.atan2(o,-l)/Math.PI;let p=180*Math.acos(c/u)/Math.PI;return p=h<0?90-p:90+p,{center:s.toLngLat(),zoom:d,pitch:p,bearing:m}}easeTo(e,i){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const n=this.transform,r=this.getZoom(),a=this.getBearing(),s=this.getPitch(),o=this.getPadding(),l="zoom"in e?+e.zoom:r,h="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:s,c="padding"in e?e.padding:n.padding,d=t.pointGeometry.convert(e.offset);let m=n.centerPoint.add(d);const p=n.pointLocation(m),f=t.LngLat.convert(e.center||p);this._normalizeCenter(f);const y=n.project(p),g=n.project(f).sub(y),_=n.zoomScale(l-r);let v,b;e.around&&(v=t.LngLat.convert(e.around),b=n.locationPoint(v));const M={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==r,this._rotating=this._rotating||a!==h,this._pitching=this._pitching||u!==s,this._padding=!n.isPaddingEqual(c),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,M),this._ease((e=>{if(this._zooming&&(n.zoom=t.number(r,l,e)),this._rotating&&(n.bearing=t.number(a,h,e)),this._pitching&&(n.pitch=t.number(s,u,e)),this._padding&&(n.interpolatePadding(o,c,e),m=n.centerPoint.add(d)),v)n.setLocationAtPoint(v,b);else{const t=n.zoomScale(n.zoom-r),i=l>r?Math.min(2,_):Math.max(.5,_),a=Math.pow(i,1-e),s=n.unproject(y.add(g.mult(e*a)).mult(t));n.setLocationAtPoint(n.renderWorldCopies?s.wrap():s,m)}this._fireMoveEvents(i)}),(t=>{this._afterEase(i,t)}),e),this}_prepareEase(e,i,n={}){this._moving=!0,this.fire(new t.Event("freezeElevation",{freeze:!0})),i||n.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId,this.fire(new t.Event("freezeElevation",{freeze:!1}));const n=this._zooming,r=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),a&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,i){if(!e.essential&&t.exported.prefersReducedMotion){const n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const n=this.transform,r=this.getZoom(),a=this.getBearing(),s=this.getPitch(),o=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,n.minZoom,n.maxZoom):r,h="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:s,c="padding"in e?e.padding:n.padding,d=n.zoomScale(l-r),m=t.pointGeometry.convert(e.offset);let p=n.centerPoint.add(m);const f=n.pointLocation(p),y=t.LngLat.convert(e.center||f);this._normalizeCenter(y);const g=n.project(f),_=n.project(y).sub(g);let v=e.curve;const b=Math.max(n.width,n.height),M=b/d,x=_.mag();if("minZoom"in e){const i=t.clamp(Math.min(e.minZoom,r,l),n.minZoom,n.maxZoom),a=b/n.zoomScale(i-r);v=Math.sqrt(a/x*2)}const w=v*v;function S(t){const e=(M*M-b*b+(t?-1:1)*w*w*x*x)/(2*(t?M:b)*w*x);return Math.log(Math.sqrt(e*e+1)-e)}function A(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}const C=S(0);let I=function(t){return T(C)/T(C+v*t)},k=function(t){return b*((T(C)*(A(e=C+v*t)/T(e))-A(C))/w)/x;var e},P=(S(1)-C)/v;if(Math.abs(x)<1e-6||!isFinite(P)){if(Math.abs(b-M)<1e-6)return this.easeTo(e,i);const t=M<b?-1:1;P=Math.abs(Math.log(M/b))/v,k=function(){return 0},I=function(e){return Math.exp(t*v*e)}}return e.duration="duration"in e?+e.duration:1e3*P/("screenSpeed"in e?+e.screenSpeed/v:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==h,this._pitching=u!==s,this._padding=!n.isPaddingEqual(c),this._prepareEase(i,!1),this._ease((e=>{const d=e*P,f=1/I(d);n.zoom=1===e?l:r+n.scaleZoom(f),this._rotating&&(n.bearing=t.number(a,h,e)),this._pitching&&(n.pitch=t.number(s,u,e)),this._padding&&(n.interpolatePadding(o,c,e),p=n.centerPoint.add(m));const v=1===e?y:n.unproject(g.add(_.mult(k(d))).mult(f));n.setLocationAtPoint(n.renderWorldCopies?v.wrap():v,p),this._fireMoveEvents(i)}),(()=>this._afterEase(i)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,i,n){!1===n.animate||0===n.duration?(e(1),i()):(this._easeStart=t.exported.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,i){e=t.wrap(e,-180,180);const n=Math.abs(e-i);return Math.abs(e-360-i)<n&&(e-=360),Math.abs(e+360-i)<n&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}}class tr{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=a.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=a.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const i=this._map._getUIString(`AttributionControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style.sourceCaches;for(const i in e){const n=e[i];if(n.used||n.usedForTerrain){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t=t.filter((t=>String(t).trim())),t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,i)=>{for(let n=i+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0}));const i=t.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,t.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class er{constructor(e={}){this.options=e,t.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=a.create("div","maplibregl-ctrl mapboxgl-ctrl");const e=a.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){a.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact","mapboxgl-compact"):e.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class ir{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,i=e?this._queue.concat(e):this._queue;for(const e of i)if(e.id===t)return void(e.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const e=this._currentlyRunning=this._queue;this._queue=[];for(const i of e)if(!i.cancelled&&(i.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const nr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},rr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},ar={showCompass:!0,showZoom:!0,visualizePitch:!1};class sr{constructor(e,i,n=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new Tn({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,n&&(this.mousePitch=new Cn({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(i,"mousedown",this.mousedown),a.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(i,"touchmove",this.touchmove),a.addEventListener(i,"touchend",this.touchend),a.addEventListener(i,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),a.disableDrag()}move(t,e){const i=this.map,n=this.mouseRotate.mousemoveWindow(t,e);if(n&&n.bearingDelta&&i.setBearing(i.getBearing()+n.bearingDelta),this.mousePitch){const n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}}off(){const t=this.element;a.removeEventListener(t,"mousedown",this.mousedown),a.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(t,"touchmove",this.touchmove),a.removeEventListener(t,"touchend",this.touchend),a.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){a.enableDrag(),a.removeEventListener(window,"mousemove",this.mousemove),a.removeEventListener(window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),a.mousePos(this.element,e)),a.addEventListener(window,"mousemove",this.mousemove),a.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,a.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function or(e,i,n){if(e=new t.LngLat(e.lng,e.lat),i){const r=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),s=n.locationPoint(e).distSqr(i);n.locationPoint(r).distSqr(i)<s?e=r:n.locationPoint(a).distSqr(i)<s&&(e=a)}for(;Math.abs(e.lng-n.center.lng)>180;){const t=n.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=n.width&&t.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}const lr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function hr(t,e,i){const n=t.classList;for(const t in lr)n.remove(`maplibregl-${i}-anchor-${t}`,`mapboxgl-${i}-anchor-${t}`);n.add(`maplibregl-${i}-anchor-${e}`,`mapboxgl-${i}-anchor-${e}`)}class ur extends t.Evented{constructor(e,i){if(super(),(e instanceof HTMLElement||i)&&(e=t.extend({element:e},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");const i=a.createNS("http://www.w3.org/2000/svg","svg"),n=41,r=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height",`${n}px`),i.setAttributeNS(null,"width",`${r}px`),i.setAttributeNS(null,"viewBox",`0 0 ${r} ${n}`);const s=a.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");const o=a.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill-rule","nonzero");const l=a.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of h){const e=a.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=a.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const c=a.createNS("http://www.w3.org/2000/svg","path");c.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(c);const d=a.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const m=a.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(m);const p=a.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(6.0, 7.0)"),p.setAttributeNS(null,"fill","#FFFFFF");const f=a.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(8.0, 8.0)");const y=a.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");const g=a.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),f.appendChild(y),f.appendChild(g),o.appendChild(l),o.appendChild(u),o.appendChild(d),o.appendChild(p),o.appendChild(f),i.appendChild(o),i.setAttributeNS(null,"height",n*this._scale+"px"),i.setAttributeNS(null,"width",r*this._scale+"px"),this._element.appendChild(i),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),hr(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,i=13.5,n=Math.sqrt(Math.pow(i,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[n,-1*(e-i+n)],"bottom-right":[-n,-1*(e-i+n)],left:[i,-1*(e-i)],right:[-i,-1*(e-i)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=or(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),a.setTransform(this._element,`${lr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${i} ${e}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const t=this._map.unproject(this._pos),e=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=t.distanceTo(this._lngLat)>20*e?"0.2":"1.0",this._opacityTimeout=null}),100))}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const cr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let dr,mr=0,pr=!1;const fr={maxWidth:100,unit:"metric"};function yr(t,e,i){const n=i&&i.maxWidth||100,r=t._container.clientHeight/2,a=t.unproject([0,r]),s=t.unproject([n,r]),o=a.distanceTo(s);if(i&&"imperial"===i.unit){const i=3.2808*o;i>5280?gr(e,n,i/5280,t._getUIString("ScaleControl.Miles")):gr(e,n,i,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?gr(e,n,o/1852,t._getUIString("ScaleControl.NauticalMiles")):o>=1e3?gr(e,n,o/1e3,t._getUIString("ScaleControl.Kilometers")):gr(e,n,o,t._getUIString("ScaleControl.Meters"))}function gr(t,e,i,n){const r=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(i),e*i}(i);t.style.width=e*(r/i)+"px",t.innerHTML=`${r}&nbsp;${n}`}const _r={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},vr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function br(e){if(e){if("number"==typeof e){const i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(i,i),"top-right":new t.pointGeometry(-i,i),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(i,-i),"bottom-right":new t.pointGeometry(-i,-i),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const i=t.pointGeometry.convert(e);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return br(new t.pointGeometry(0,0))}const Mr={supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Qn{constructor(e){var i;if(t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},rr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new nn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._interactive=e.interactive,this._cooperativeGestures=e.cooperativeGestures,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new ir,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},nr,e.locale),this._clickTolerance=e.clickTolerance,this._pixelRatio=null!==(i=e.pixelRatio)&&void 0!==i?i:devicePixelRatio,this._requestManager=new s(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Xn(this,e),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=e.hash&&new rn("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new tr({customAttribution:e.customAttribution})),e.maplibreLogo&&this.addControl(new er,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.Event("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}calculateCameraOptionsFromTo(t,e,i,n){return null==n&&this.style.terrain&&(n=this.transform.getElevation(i,this.style.terrain)),super.calculateCameraOptionsFromTo(t,e,i,n)}resize(e){const i=this._containerDimensions(),n=i[0],r=i[1];this._resizeCanvas(n,r,this.getPixelRatio()),this.transform.resize(n,r),this.painter.resize(n,r,this.getPixelRatio());const a=!this._moving;return a&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),a&&this.fire(new t.Event("moveend",e)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){const[e,i]=this._containerDimensions();this._pixelRatio=t,this._resizeCanvas(e,i,t),this.painter.resize(e,i,t)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint(t.LngLat.convert(e),this.style&&this.style.terrain)}unproject(e){return this.transform.pointLocation(t.pointGeometry.convert(e),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(t,e,i){if("mouseenter"===t||"mouseover"===t){let n=!1;const r=r=>{const a=this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?n||(n=!0,i.call(this,new mn(t,this,r.originalEvent,{features:a}))):n=!1};return{layer:e,listener:i,delegates:{mousemove:r,mouseout:()=>{n=!1}}}}if("mouseleave"===t||"mouseout"===t){let n=!1;const r=r=>{(this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?n=!0:n&&(n=!1,i.call(this,new mn(t,this,r.originalEvent)))},a=e=>{n&&(n=!1,i.call(this,new mn(t,this,e.originalEvent)))};return{layer:e,listener:i,delegates:{mousemove:r,mouseout:a}}}{const n=t=>{const n=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,i.call(this,t),delete t.features)};return{layer:e,listener:i,delegates:{[t]:n}}}}on(t,e,i){if(void 0===i)return super.on(t,e);const n=this._createDelegatedListener(t,e,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n);for(const t in n.delegates)this.on(t,n.delegates[t]);return this}once(t,e,i){if(void 0===i)return super.once(t,e);const n=this._createDelegatedListener(t,e,i);for(const t in n.delegates)this.once(t,n.delegates[t]);return this}off(t,e,i){return void 0===i?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(()=>{const n=this._delegatedListeners[t];for(let t=0;t<n.length;t++){const r=n[t];if(r.layer===e&&r.listener===i){for(const t in r.delegates)this.off(t,r.delegates[t]);return n.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,i){if(!this.style)return[];let n;if(void 0!==i||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.pointGeometry||"number"==typeof e[0])n=[t.pointGeometry.convert(e)];else{const i=t.pointGeometry.convert(e[0]),r=t.pointGeometry.convert(e[1]);n=[i,new t.pointGeometry(r.x,i.y),r,new t.pointGeometry(i.x,r.y),i]}return this.style.queryRenderedFeatures(n,i,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new ee(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ee(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,i){if("string"==typeof e){const n=this._requestManager.transformRequest(e,t.ResourceType.Style);t.getJSON(n,((e,n)=>{e?this.fire(new t.ErrorEvent(e)):n&&this._updateDiff(n,i)}))}else"object"==typeof e&&this._updateDiff(e,i)}_updateDiff(e,i){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(e,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}setTerrain(t){return this.style.setTerrain(t),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const t=this.style&&this.style.sourceCaches;for(const e in t){const i=t[e]._tiles;for(const t in i){const e=i[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,i,{pixelRatio:n=1,sdf:r=!1,stretchX:a,stretchY:s,content:o}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||t.isImageBitmap(i)){const{width:l,height:h,data:u}=t.exported.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:h},u),pixelRatio:n,stretchX:a,stretchY:s,content:o,sdf:r,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:h,data:u}=i,c=i;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:h},new Uint8Array(u)),pixelRatio:n,stretchX:a,stretchY:s,content:o,sdf:r,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}}}updateImage(e,i){const n=this.style.getImage(e);if(!n)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=i instanceof HTMLImageElement||t.isImageBitmap(i)?t.exported.getImageData(i):i,{width:a,height:s,data:o}=r;if(void 0===a||void 0===s)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==n.data.width||s!==n.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(i instanceof HTMLImageElement||t.isImageBitmap(i));n.data.replace(o,l),this.style.updateImage(e,n)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)}setFilter(t,e,i={}){return this.style.setFilter(t,e,i),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,i,n={}){return this.style.setPaintProperty(t,e,i,n),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,i,n={}){return this.style.setLayoutProperty(t,e,i,n),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){const t=this._container;t.classList.add("maplibregl-map","mapboxgl-map");const e=this._canvasContainer=a.create("div","maplibregl-canvas-container mapboxgl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=a.create("canvas","maplibregl-canvas mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const i=this._containerDimensions();this._resizeCanvas(i[0],i[1],this.getPixelRatio());const n=this._controlContainer=a.create("div","maplibregl-control-container mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{r[t]=a.create("div",`maplibregl-ctrl-${t} mapboxgl-ctrl-${t}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const t=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=a.create("div","maplibregl-cooperative-gesture-screen",t);let e="Control",i="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(i="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",e="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${i}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",(t=>{t.key===e&&(this._metaPress=!0)})),document.addEventListener("keyup",(t=>{t.key===e&&(this._metaPress=!1)})),this._canvasContainer.addEventListener("wheel",(t=>{this._onCooperativeGesture(t,this._metaPress,1)}),!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(t,e,i){this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=`${t}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);n?(this.painter=new Ki(n,this.transform),t.exported$1.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(t,e,i){return!e&&i<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(e){let i,n=0;const r=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),n=t.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=t.exported.now();this.style.zoomHistory.update(e,i);const n=new t.EvaluationParameters(e,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=n.crossFadingFactor();1===r&&r===this._crossFadingFactor||(a=!0,this._crossFadingFactor=r),this.style.update(n)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-n;r.endQueryEXT(r.TIME_ELAPSED_EXT,i),setTimeout((()=>{const n=r.getQueryObjectEXT(i,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:n}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const i=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:i}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty;return s||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),a.remove(this._canvasContainer),a.remove(this._controlContainer),this._cooperativeGestures&&a.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),t.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=t.exported.frame((e=>{t.PerformanceUtils.frame(e),this._frame=null,this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,i){t.setCacheLimits(e,i)}get version(){return"2.4.0"}},NavigationControl:class{constructor(e){this.options=t.extend({},ar,e),this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new sr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const i=a.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i}_setButtonTitle(t,e){const i=this._map._getUIString(`NavigationControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},cr,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var e;return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==dr?e(dr):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((t=>{dr="denied"!==t.state,e(dr)})):(dr=!!window.navigator.geolocation,e(dr)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,mr=0,pr=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=this._map.getBearing(),a=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(n),a,{geolocateSource:!0})}_updateMarker(e){if(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),n=e.distanceTo(i),r=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&pr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=a.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ur(this._dotElement),this._circleElement=a.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ur({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":mr--,pr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),mr++,mr>1?(t={maximumAge:6e5,timeout:0},pr=!0):(t=this.options.positionOptions,pr=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:tr,LogoControl:er,ScaleControl:class{constructor(e){this.options=t.extend({},fr,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){yr(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,yr(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){a.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=a.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(e){this.options=e,t.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=a.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){a.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(_r),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){const e=document.createDocumentFragment(),i=document.createElement("body");let n;for(i.innerHTML=t;n=i.firstChild,n;)e.appendChild(n);return this.setDOMContent(e)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=a.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=a.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=a.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=or(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const e=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let i=this.options.anchor;const n=br(this.options.offset);if(!i){const t=this._container.offsetWidth,r=this._container.offsetHeight;let a;a=e.y+n.bottom.y<r?["top"]:e.y>this._map.transform.height-r?["bottom"]:[],e.x<t/2?a.push("left"):e.x>this._map.transform.width-t/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}const r=e.add(n[i]).round();a.setTransform(this._container,`${lr[i]} translate(${r.x}px,${r.y}px)`),hr(this._container,i,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(vr);t&&t.focus()}_onClose(){this.remove()}},Marker:ur,Style:ee,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,AJAXError:t.AJAXError,config:t.config,CanvasSource:P,GeoJSONSource:T,ImageSource:I,RasterDEMTileSource:A,RasterTileSource:w,VectorTileSource:x,VideoSource:k,prewarm:function(){$().acquire(H)},clearPrewarmedResources:function(){const t=G;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(H),G=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return U.workerCount},set workerCount(t){U.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",addProtocol(e,i){t.config.REGISTERED_PROTOCOLS[e]=i},removeProtocol(e){delete t.config.REGISTERED_PROTOCOLS[e]}};return Kn.extend(Mr,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics}),Mr})),i}()}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,i),a.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";i.r(n),i.d(n,{default:()=>a});var t=i(5789),e=window.powerbi,r={name:"iconMapV34089C0EB522B416294AA926F71B4FDBB",displayName:"iconMapV3",class:"Visual",apiVersion:"5.10.0",create:e=>{if(t.bF)return new t.bF(e);throw"Visual instance not found"},createModalDialog:(t,e,i)=>{const n=globalThis.dialogRegistry;t in n&&new n[t](e,i)},custom:!0};void 0!==e&&(e.visuals=e.visuals||{},e.visuals.plugins=e.visuals.plugins||{},e.visuals.plugins.iconMapV34089C0EB522B416294AA926F71B4FDBB=r);const a=r})(),iconMapV34089C0EB522B416294AA926F71B4FDBB=n})();