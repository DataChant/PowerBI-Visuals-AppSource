var videoPlayer9439BF571F794C09AE8B97BD2199A94C;(()=>{"use strict";var e={84:(e,t,s)=>{s.r(t),s.d(t,{AlignmentGroup:()=>l,AutoDropdown:()=>m,AutoFlagsSelection:()=>S,Card:()=>r,ColorPicker:()=>d,CompositeSlice:()=>T,Container:()=>V,ContainerItem:()=>x,DatePicker:()=>p,DurationPicker:()=>g,ErrorRangeControl:()=>y,FieldPicker:()=>b,FontControl:()=>B,FontPicker:()=>w,GradientBar:()=>P,ImageUpload:()=>D,ItemDropdown:()=>v,ItemFlagsSelection:()=>f,ListEditor:()=>E,MarginPadding:()=>L,Model:()=>n,NumUpDown:()=>u,ReadOnlyText:()=>k,ShapeMapSelector:()=>F,SimpleSlice:()=>a,Slider:()=>h,TextArea:()=>C,TextInput:()=>M,ToggleSwitch:()=>c});var i=s(827);class o{}class n{}class r extends o{getFormattingCard(e,t,s){return{displayName:s&&this.displayNameKey?s.getDisplayName(this.displayNameKey):this.displayName,description:s&&this.descriptionKey?s.getDisplayName(this.descriptionKey):this.description,groups:[t],uid:e,analyticsPane:this.analyticsPane}}}class a extends o{constructor(e){super(),Object.assign(this,e)}getFormattingSlice(e,t){const s=this.type,i=this.name,o={displayName:t&&this.displayNameKey?t.getDisplayName(this.displayNameKey):this.displayName,description:t&&this.descriptionKey?t.getDisplayName(this.descriptionKey):this.description,uid:e+"-"+i};return Object.assign(Object.assign({},o),{control:{type:s,properties:this.getFormattingComponent(e,t)}})}getFormattingComponent(e,t){return{descriptor:i.B(e,this),value:this.value}}getRevertToDefaultDescriptor(e){return[{objectName:e,propertyName:this.name}]}setPropertiesValues(e,t){var s;let o=null===(s=null==e?void 0:e[t])||void 0===s?void 0:s[this.name];this.value=i.S(this,o,this.value)}}class l extends a{constructor(e){super(e),this.type="AlignmentGroup"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{mode:this.mode,supportsNoSelection:this.supportsNoSelection})}}class c extends a{constructor(e){super(e),this.type="ToggleSwitch"}}class d extends a{constructor(e){super(e),this.type="ColorPicker"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{defaultColor:this.defaultColor,isNoFillItemSupported:this.isNoFillItemSupported})}}class u extends a{constructor(e){super(e),this.type="NumUpDown"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{options:this.options})}}class h extends u{constructor(){super(...arguments),this.type="Slider"}}class p extends a{constructor(e){super(e),this.type="DatePicker"}getFormattingComponent(e,t){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{placeholder:t&&this.placeholderKey?t.getDisplayName(this.placeholderKey):this.placeholder,validators:this.validators})}}class v extends a{constructor(e){super(e),this.type="Dropdown"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{items:this.items})}}class m extends a{constructor(e){super(e),this.type="Dropdown"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{mergeValues:this.mergeValues,filterValues:this.filterValues})}}class g extends a{constructor(e){super(e),this.type="DurationPicker"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{validators:this.validators})}}class y extends a{constructor(e){super(e),this.type="ErrorRangeControl"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{validators:this.validators})}}class b extends a{constructor(e){super(e),this.type="FieldPicker"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{validators:this.validators,allowMultipleValues:this.allowMultipleValues})}}class f extends a{constructor(e){super(e),this.type="FlagsSelection"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{items:this.items})}}class S extends a{constructor(){super(...arguments),this.type="FlagsSelection"}}class M extends a{constructor(e){super(e),this.type="TextInput"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{placeholder:this.placeholder})}}class C extends M{constructor(){super(...arguments),this.type="TextArea"}}class w extends a{constructor(){super(...arguments),this.type="FontPicker"}}class P extends a{constructor(){super(...arguments),this.type="GradientBar"}}class D extends a{constructor(){super(...arguments),this.type="ImageUpload"}}class E extends a{constructor(){super(...arguments),this.type="ListEditor"}}class k extends a{constructor(){super(...arguments),this.type="ReadOnlyText"}}class F extends a{constructor(e){super(e),this.type="ShapeMapSelector"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{isAzMapReferenceSelector:this.isAzMapReferenceSelector})}}class T extends o{constructor(e){super(),Object.assign(this,e)}getFormattingSlice(e,t){const s=this.type,i=this.name,o={displayName:t&&this.displayNameKey?t.getDisplayName(this.displayNameKey):this.displayName,description:t&&this.descriptionKey?t.getDisplayName(this.descriptionKey):this.description,uid:e+"-"+i};return Object.assign(Object.assign({},o),{control:{type:s,properties:this.getFormattingComponent(e)}})}}class B extends T{constructor(e){super(e),this.type="FontControl"}getFormattingComponent(e){var t,s,i;return{fontFamily:this.fontFamily.getFormattingComponent(e),fontSize:this.fontSize.getFormattingComponent(e),bold:null===(t=this.bold)||void 0===t?void 0:t.getFormattingComponent(e),italic:null===(s=this.italic)||void 0===s?void 0:s.getFormattingComponent(e),underline:null===(i=this.underline)||void 0===i?void 0:i.getFormattingComponent(e)}}getRevertToDefaultDescriptor(e){return this.fontFamily.getRevertToDefaultDescriptor(e).concat(this.fontSize.getRevertToDefaultDescriptor(e)).concat(this.bold?this.bold.getRevertToDefaultDescriptor(e):[]).concat(this.italic?this.italic.getRevertToDefaultDescriptor(e):[]).concat(this.underline?this.underline.getRevertToDefaultDescriptor(e):[])}setPropertiesValues(e,t){var s,i,o;this.fontFamily.setPropertiesValues(e,t),this.fontSize.setPropertiesValues(e,t),null===(s=this.bold)||void 0===s||s.setPropertiesValues(e,t),null===(i=this.italic)||void 0===i||i.setPropertiesValues(e,t),null===(o=this.underline)||void 0===o||o.setPropertiesValues(e,t)}}class L extends T{constructor(e){super(e),this.type="MarginPadding"}getFormattingComponent(e){return{left:this.left.getFormattingComponent(e),right:this.right.getFormattingComponent(e),top:this.top.getFormattingComponent(e),bottom:this.bottom.getFormattingComponent(e)}}getRevertToDefaultDescriptor(e){return this.left.getRevertToDefaultDescriptor(e).concat(this.right.getRevertToDefaultDescriptor(e)).concat(this.top.getRevertToDefaultDescriptor(e)).concat(this.bottom.getRevertToDefaultDescriptor(e))}setPropertiesValues(e,t){this.left.setPropertiesValues(e,t),this.right.setPropertiesValues(e,t),this.top.setPropertiesValues(e,t),this.bottom.setPropertiesValues(e,t)}}class V extends o{}class x extends o{}},261:(e,t,s)=>{s.d(t,{Z:()=>i});const i=class{constructor(e){this.localizationManager=e}populateFormattingSettingsModel(e,t){var s,i,o;let n=new e,r=null===(i=null===(s=null==t?void 0:t[0])||void 0===s?void 0:s.metadata)||void 0===i?void 0:i.objects;return r&&(null===(o=n.cards)||void 0===o||o.forEach((e=>{var t,s,i;null===(t=null==e?void 0:e.slices)||void 0===t||t.forEach((t=>{null==t||t.setPropertiesValues(r,e.name)})),null===(i=null===(s=null==e?void 0:e.container)||void 0===s?void 0:s.containerItems)||void 0===i||i.forEach((t=>{var s;null===(s=null==t?void 0:t.slices)||void 0===s||s.forEach((t=>{null==t||t.setPropertiesValues(r,e.name)}))}))}))),n}buildFormattingModel(e){var t;let s={cards:[]};return null===(t=e.cards)||void 0===t||t.forEach((e=>{if(!e)return;const t=e.name,i=e.name+"-group";let o={displayName:void 0,slices:[],uid:i},n=e.getFormattingCard(t,o,this.localizationManager);s.cards.push(n);const r={};if(e.container){const s=e.container,a=i+"-container",l={displayName:this.localizationManager&&s.displayNameKey?this.localizationManager.getDisplayName(s.displayNameKey):s.displayName,description:this.localizationManager&&s.descriptionKey?this.localizationManager.getDisplayName(s.descriptionKey):s.description,containerItems:[],uid:a};s.containerItems.forEach((e=>{const s=e.displayNameKey?e.displayNameKey:e.displayName,i=a+s;let o={displayName:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,slices:[],uid:i};this.buildFormattingSlices(e.slices,t,r,n,o.slices),l.containerItems.push(o)})),o.container=l}e.slices&&this.buildFormattingSlices(e.slices,t,r,n,o.slices),n.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(e)})),s}buildFormattingSlices(e,t,s,i,o){null==e||e.forEach((e=>{let n=null==e?void 0:e.getFormattingSlice(t,this.localizationManager);n&&(void 0===s[e.name]?s[e.name]=0:(s[e.name]++,n.uid=`${n.uid}-${s[e.name]}`),e.topLevelToggle?(n.suppressDisplayName=!0,i.topLevelToggle=n):o.push(n))}))}getRevertToDefaultDescriptor(e){var t,s;const i={};let o=[],n=this.getSlicesRevertToDefaultDescriptor(e.name,e.slices,i),r=[];return null===(s=null===(t=e.container)||void 0===t?void 0:t.containerItems)||void 0===s||s.forEach((t=>{r=r.concat(this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,i))})),o=n.concat(r),o}getSlicesRevertToDefaultDescriptor(e,t,s){let i=[];return null==t||t.forEach((t=>{t&&!s[t.name]&&(s[t.name]=!0,i=i.concat(t.getRevertToDefaultDescriptor(e)))})),i}}},579:(e,t,s)=>{s.r(t),s.d(t,{FormattingSettingsService:()=>o.Z,formattingSettings:()=>i});var i=s(84),o=s(261)},827:(e,t,s)=>{function i(e,t){return{objectName:e,propertyName:t.name,selector:t.selector,altConstantValueSelector:t.altConstantSelector,instanceKind:t.instanceKind}}function o(e,t,s){return null==t||"object"==typeof t&&!t.solid?s:t.solid?{value:null==t?void 0:t.solid.color}:(null==e?void 0:e.items)?e.items.find((e=>e.value==t)):t}s.d(t,{B:()=>i,S:()=>o})},235:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default='\n    <div class="video-container" id="video-container">\n      <div class="playback-animation" id="playback-animation">\n        <svg class="playback-icons">\n          <use class="hidden" href="#play-icon"></use>\n          <use href="#pause"></use>\n        </svg>\n      </div>\n\n      <video controls class="video" id="video" preload="metadata" poster="">\n        <source src="" type="video/mp4"></source>\n      </video>\n\n      <div class="video-controls hidden" id="video-controls">\n        <div class="video-progress">\n          <progress id="progress-bar" value="0" min="0"></progress>\n          <input class="seek" id="seek" value="0" min="0" type="range" step="1">\n          <div class="seek-tooltip" id="seek-tooltip">00:00</div>\n        </div>\n\n        <div class="bottom-controls">\n          <div class="left-controls">\n            <button data-title="Play (k)" id="play">\n              <svg class="playback-icons">\n                <use href="#play-icon"></use>\n                <use class="hidden" href="#pause"></use>\n              </svg>\n            </button>\n\n            <div class="volume-controls">\n              <button data-title="Mute (m)" class="volume-button" id="volume-button">\n                <svg>\n                  <use class="hidden" href="#volume-mute"></use>\n                  <use class="hidden" href="#volume-low"></use>\n                  <use href="#volume-high"></use>\n                </svg>\n              </button>\n\n              <input class="volume" id="volume" value="1"\n              data-mute="0.5" type="range" max="1" min="0" step="0.01">\n            </div>\n\n            <div class="time">\n              <time id="time-elapsed">00:00</time>\n              <span> / </span>\n              <time id="duration">00:00</time>\n            </div>\n          </div>\n\n          <div class="right-controls">\n            <button data-title="PIP (p)" class="pip-button" id="pip-button">\n              <svg>\n                <use href="#pip"></use>\n              </svg>\n            </button>\n            <button data-title="Full screen (f)" class="fullscreen-button" id="fullscreen-button">\n              <svg>\n                <use href="#fullscreen"></use>\n                <use href="#fullscreen-exit" class="hidden"></use>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n<svg style="display: none">\n<defs>\n  <symbol id="pause" viewBox="0 0 24 24">\n    <path d="M14.016 5.016h3.984v13.969h-3.984v-13.969zM6 18.984v-13.969h3.984v13.969h-3.984z"></path>\n  </symbol>\n\n  <symbol id="play-icon" viewBox="0 0 24 24">\n    <path d="M8.016 5.016l10.969 6.984-10.969 6.984v-13.969z"></path>\n  </symbol>\n\n  <symbol id="volume-high" viewBox="0 0 24 24">\n  <path d="M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q1.031 0.516 1.758 1.688t0.727 2.344zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z"></path>\n  </symbol>\n\n  <symbol id="volume-low" viewBox="0 0 24 24">\n  <path d="M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z"></path>\n  </symbol>\n\n  <symbol id="volume-mute" viewBox="0 0 24 24">\n  <path d="M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z"></path>\n  </symbol>\n\n  <symbol id="fullscreen" viewBox="0 0 24 24">\n  <path d="M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z"></path>\n  </symbol>\n\n  <symbol id="fullscreen-exit" viewBox="0 0 24 24">\n  <path d="M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z"></path>\n  </symbol>\n\n  <symbol id="pip" viewBox="0 0 24 24">\n  <path d="M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z"></path>\n  </symbol>\n</defs>\n</svg>\n'},915:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBanner=void 0,t.ErrorBanner=class{container;errorBanner;errorBannerMessage;constructor(e){this.container=e,this.container.classList.add("error-banner-container"),this.container.innerHTML='\n            <div class="error-banner">\n                <h2></h2>\n            </div>\n        ',this.errorBanner=this.container.querySelector(".error-banner"),this.errorBannerMessage=this.container.querySelector(".error-banner h2"),this.hide()}hide(){this.container.classList.add("hidden"),this.setError("")}show(){this.container.classList.remove("hidden")}setError(e){e.length>0?(this.errorBannerMessage.innerText="Error: "+e,this.errorBanner.style.visibility="visible"):(this.errorBannerMessage.innerText="",this.errorBanner.style.visibility="hidden")}}},437:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HashGenerator=void 0;class s{static version="v1";static hashSolt="3728c5eb-4429-43c4-bc9f-9e38dd8f5fe1";static getHashString(e){const t=e.substring(0,8);return s.version+t}static async digestMessage(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map((e=>e.toString(16).padStart(2,"0"))).join("")}static getUTCDate(){const e=new Date;return e.getUTCFullYear()+"-"+(e.getUTCMonth()+1)+"-"+e.getUTCDate()}static async encode(e){const t=e+s.hashSolt+this.getUTCDate(),i=await this.digestMessage(t);return this.getHashString(i)}}t.HashGenerator=s},346:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VideoManager=t.VideoType=t.DisplayMode=void 0;const i=s(550),o=s(437),n=s(915);var r,a;!function(e){e[e.Player=0]="Player",e[e.Error=1]="Error"}(r||(t.DisplayMode=r={})),function(e){e.DirectLink="DirectLink",e.VideoService="VideoService"}(a||(t.VideoType=a={}));const l=[".WEBM",".MPG",".MP2",".MP3",".MPEG",".MPE",".MPV",".OGG",".MP4",".M4P",".M4V",".AVI",".WMV",".MOV",".QT",".FLV",".SWF",".MKV",".AVCHD"],c=["http://","https://","ftp://","ftps://"];class d{host;player;errorBanner;currentURL;currentPass;controller;constructor(e){const t=document.createElement("div");this.player=new i.Player(t),e.appendChild(t);const s=document.createElement("div");this.errorBanner=new n.ErrorBanner(s),e.appendChild(s),this.controller=new AbortController}getTooltipDataItems(){return[{displayName:this.currentURL,value:""}]}switchView(e=r.Player){switch(e){case r.Player:this.errorBanner.hide(),this.player.show();break;case r.Error:this.errorBanner.show(),this.player.hide()}}onError(e){console.log(e),this.errorBanner.setError(e),this.switchView(r.Error)}onSuccess(e){this.switchView(r.Player),this.player.setVideo(e,(()=>this.onError("Can't load the video")))}setDirectLinkVideo(e){for(const t of c)if(e.toLowerCase().startsWith(t.toLowerCase()))return void this.player.setDirectLinkVideo(e,(()=>this.onError("Can't load the video")));this.player.setDirectLinkVideo(`https://${e}`,(()=>this.onError("Can't load the video")))}static getVideoType(e){for(const t of l)if(e.toLowerCase().endsWith(t.toLowerCase()))return a.DirectLink;return a.VideoService}load(e,t=""){if(this.currentURL!==e||this.currentPass!=t)switch(this.currentURL=e,this.currentPass=t,this.player.pause(),d.getVideoType(e)){case a.DirectLink:this.setDirectLinkVideo(e);break;case a.VideoService:o.HashGenerator.encode(e).then((s=>{this.getVideoDetails(e,s,t)}))}}getVideoDetails(e,t,s=""){let i=`https://pbivideoplayer.azurewebsites.net/api/process?id=${encodeURIComponent(e)}&hash=${t}`;""!=s&&(i+="&pass="+s);const o=this.controller.signal;fetch(encodeURI(i),{signal:o}).then((e=>e.json())).then((e=>{e?.status?this.onSuccess(e):this.onError("Can't load the video")})).catch((e=>{this.onError(e)}))}}t.VideoManager=d},550:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;const o=i(s(235));t.Player=class{container;video;videoSource;videoControls;playButton;playbackIcons;timeElapsed;duration;progressBar;seek;seekTooltip;volumeButton;volumeIcons;volumeMute;volumeLow;volumeHigh;volume;playbackAnimation;fullscreenButton;videoContainer;fullscreenIcons;pipButton;initControls(e){this.container=e,this.container.classList.add("player-container"),this.container.innerHTML=o.default,this.video=e.querySelector("#video"),this.videoSource=this.video.querySelector("source"),this.videoControls=e.querySelector("#video-controls"),this.playButton=e.querySelector("#play"),this.playbackIcons=e.querySelectorAll(".playback-icons use"),this.timeElapsed=e.querySelector("#time-elapsed"),this.duration=e.querySelector("#duration"),this.progressBar=e.querySelector("#progress-bar"),this.seek=e.querySelector("#seek"),this.seekTooltip=e.querySelector("#seek-tooltip"),this.volumeButton=e.querySelector("#volume-button"),this.volumeIcons=e.querySelectorAll(".volume-button use"),this.volumeMute=e.querySelector('use[href="#volume-mute"]'),this.volumeLow=e.querySelector('use[href="#volume-low"]'),this.volumeHigh=e.querySelector('use[href="#volume-high"]'),this.volume=e.querySelector("#volume"),this.playbackAnimation=e.querySelector("#playback-animation"),this.fullscreenButton=e.querySelector("#fullscreen-button"),this.videoContainer=e.querySelector("#video-container"),this.fullscreenIcons=this.fullscreenButton?.querySelectorAll("use"),this.pipButton=e.querySelector("#pip-button")}initEventListeners(){!!document.createElement("video").canPlayType&&(this.video.controls=!1,this.videoControls.classList.remove("hidden")),this.video.onerror=()=>console.log("Error loading this video"),this.playButton.addEventListener("click",(()=>this.togglePlay())),this.video.addEventListener("play",(()=>this.updatePlayButton())),this.video.addEventListener("pause",(()=>this.updatePlayButton())),this.video.addEventListener("loadedmetadata",(()=>this.initializeVideo())),this.video.addEventListener("timeupdate",(()=>this.updateTimeElapsed())),this.video.addEventListener("timeupdate",(()=>this.updateProgress())),this.video.addEventListener("volumechange",(()=>this.updateVolumeIcon())),this.video.addEventListener("click",(()=>this.togglePlay())),this.video.addEventListener("click",(()=>this.animatePlayback())),this.video.addEventListener("mouseenter",(()=>this.showControls())),this.video.addEventListener("mouseleave",(()=>this.hideControls())),this.videoControls.addEventListener("mouseenter",(()=>this.showControls())),this.videoControls.addEventListener("mouseleave",(()=>this.hideControls())),this.seek.addEventListener("mousemove",(e=>this.updateSeekTooltip(e))),this.seek.addEventListener("input",(e=>this.skipAhead(e))),this.volume.addEventListener("input",(()=>this.updateVolume())),this.volumeButton.addEventListener("click",(()=>this.toggleMute())),this.fullscreenButton.addEventListener("click",(()=>this.toggleFullScreen())),this.videoContainer.addEventListener("fullscreenchange",(()=>this.updateFullscreenButton())),this.pipButton.addEventListener("click",(()=>this.togglePip())),"pictureInPictureEnabled"in document||this.pipButton.classList.add("hidden"),document.addEventListener("keyup",(()=>this.keyboardShortcuts))}constructor(e){this.initControls(e),this.initEventListeners(),this.hide()}pause(){this.video.pause()}hide(){this.container.classList.add("hidden")}show(){this.container.classList.remove("hidden")}setVideo(e,t){this.videoSource.onerror=()=>{t(),console.log("Error loading this video source")},e.thumbnails.length>0?this.video.poster=e.thumbnails[e.thumbnails.length-1].url:this.video.poster="",e.formats.length>0?(this.videoSource.src=e.formats[e.formats.length-1].url,this.video.load()):this.videoSource.src=""}setDirectLinkVideo(e,t){this.video.poster="",this.videoSource.src=e,console.log("Set direct video",e),this.videoSource.onerror=()=>{t(),console.log("Error loading this video source")},this.video.load()}togglePlay(){this.video.paused||this.video.ended?this.video.play():this.video.pause()}updatePlayButton(){this.playbackIcons.forEach((e=>e.classList.toggle("hidden"))),this.video.paused?this.playButton.setAttribute("data-title","Play (k)"):this.playButton.setAttribute("data-title","Pause (k)")}formatTime(e){if(!e)return{minutes:0,seconds:0};const t=new Date(1e3*e).toISOString().substr(11,8);return{minutes:t.substr(3,2),seconds:t.substr(6,2)}}initializeVideo(){const e=Math.round(this.video.duration);this.seek.setAttribute("max",e.toString()),this.progressBar.setAttribute("max",e.toString());const t=this.formatTime(e);this.duration.innerText=`${t.minutes}:${t.seconds}`,this.duration.setAttribute("datetime",`${t.minutes}m ${t.seconds}s`)}updateTimeElapsed(){const e=this.formatTime(Math.round(this.video.currentTime));this.timeElapsed.innerText=`${e.minutes}:${e.seconds}`,this.timeElapsed.setAttribute("datetime",`${e.minutes}m ${e.seconds}s`)}updateProgress(){this.seek.value=Math.floor(this.video.currentTime).toString(),this.progressBar.value=Math.floor(this.video.currentTime)}updateSeekTooltip(e){const t=Math.round(e.offsetX/e.target.clientWidth*parseInt(e.target.getAttribute("max"),10));this.seek.setAttribute("data-seek",t.toString());const s=this.formatTime(t);this.seekTooltip.textContent=`${s.minutes}:${s.seconds}`;const i=this.video.getBoundingClientRect();this.seekTooltip.style.left=e.pageX-i.left+"px"}skipAhead(e){const t=(s=e.target?.dataset?.seek,/^\d+$/.test(s)?e.target.dataset.seek:e.target.value);var s;this.video.currentTime=t,this.progressBar.value=t,this.seek.value=t}updateVolume(){this.video.muted&&(this.video.muted=!1),this.video.volume=parseFloat(this.volume.value)}updateVolumeIcon(){this.volumeIcons.forEach((e=>{e.classList.add("hidden")})),this.volumeButton.setAttribute("data-title","Mute (m)"),this.video.muted||0===this.video.volume?(this.volumeMute.classList.remove("hidden"),this.volumeButton.setAttribute("data-title","Unmute (m)")):this.video.volume>0&&this.video.volume<=.5?this.volumeLow.classList.remove("hidden"):this.volumeHigh.classList.remove("hidden")}toggleMute(){this.video.muted=!this.video.muted,this.video.muted?(this.volume.setAttribute("data-volume",this.volume.value),this.volume.value="0"):this.volume.value=this.volume.dataset.volume}animatePlayback(){this.playbackAnimation.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(1.3)"}],{duration:500})}toggleFullScreen(){document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement?document.webkitExitFullscreen():this.videoContainer.webkitRequestFullscreen?this.videoContainer.webkitRequestFullscreen():this.videoContainer.requestFullscreen()}updateFullscreenButton(){this.fullscreenIcons.forEach((e=>e.classList.toggle("hidden"))),document.fullscreenElement?this.fullscreenButton.setAttribute("data-title","Exit full screen (f)"):this.fullscreenButton.setAttribute("data-title","Full screen (f)")}async togglePip(){try{this.video!==document.pictureInPictureElement?(this.pipButton.disabled=!0,await this.video.requestPictureInPicture()):await document.exitPictureInPicture()}catch(e){console.error(e)}finally{this.pipButton.disabled=!1}}hideControls(){this.video.paused||this.videoControls.classList.add("hide")}showControls(){this.videoControls.classList.remove("hide")}keyboardShortcuts(e){const{key:t}=e;switch(t){case"k":this.togglePlay(),this.animatePlayback(),this.video.paused?this.showControls():setTimeout((()=>{this.hideControls()}),2e3);break;case"m":this.toggleMute();break;case"f":break;case"p":this.togglePip()}}}},264:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Visual=t.DisplayContentMode=void 0;const i=s(579);s(652);const o=s(346);var n;!function(e){e.Show="Show",e.ShowWithNotification="ShowWithNotification",e.Block="Block",e.BlockUnsupportedEnv="BlockUnsupportedEnv"}(n||(t.DisplayContentMode=n={}));class r{target;formattingSettings;formattingSettingsService;videoManager;hasServicePlans=void 0;notificationType=0;isIconDisplayed=!1;selectionManager;visualHostTooltipService;host;constructor(e){this.formattingSettingsService=new i.FormattingSettingsService,this.target=e.element,this.videoManager=new o.VideoManager(this.target),this.videoManager.switchView(o.DisplayMode.Player),this.host=e.host,this.host.licenseManager.getAvailableServicePlans().then((e=>{this.notificationType=e.isLicenseUnsupportedEnv?1:0,this.hasServicePlans=e.plans&&e.plans.length&&e.plans.some((e=>1==e.state||2==e.state))})).catch((e=>{this.hasServicePlans=void 0,console.log(e)})),this.selectionManager=this.host.createSelectionManager(),this.visualHostTooltipService=this.host.tooltipService,this.handleContextMenu()}handleContextMenu(){this.target.addEventListener("contextmenu",(e=>{this.selectionManager.showContextMenu({},{x:e.clientX,y:e.clientY}),e.preventDefault()}))}handleTooltips(){this.target.addEventListener("mouseover",(e=>{this.visualHostTooltipService.show({coordinates:[e.clientX,e.clientY],isTouchEvent:!1,dataItems:this.videoManager.getTooltipDataItems(),identities:[]})})),this.target.addEventListener("mousemove",(e=>{this.visualHostTooltipService.move({coordinates:[e.clientX,e.clientY],isTouchEvent:!1,dataItems:this.videoManager.getTooltipDataItems(),identities:[]})}))}static isShowContent(e,t,s){return e?t?n.Show:s?n.ShowWithNotification:n.Block:n.BlockUnsupportedEnv}parseVideoURL(e){const t=e[0].toString();return e.length>1&&""!=e[1]?{videoURL:t,pass:e[1].toString()}:{videoURL:t,pass:void 0}}static isTestData(e){return!!["https://www.youtube.com/watch?v=PXqFXG4rzXE","https://vimeo.com/27960168","https://pbicraftstorage.z13.web.core.windows.net/april2023.mp4","https://pbicraftstorage.blob.core.windows.net/video/april2023.mp4","https://pbicraftstorage.blob.core.windows.net/video/Power%20BI%20Update%20-%20April%202023.mp4","https://vimeo.com/612922620","https://www.facebook.com/watch/?v=352349256832372&ref=sharing"].includes(e)}update(e){if(!e.dataViews?.length||!e.dataViews[0]?.table?.rows?.length)return;const t=e.dataViews[0].table.rows;if(t.length<1)return;const{videoURL:s,pass:i}=this.parseVideoURL(t[0]),o=r.isTestData(s),a=r.isShowContent(1!==this.notificationType,this.hasServicePlans,o);switch(console.log("isTestData",o,"videoURL",s,"displayMode",a),a){case n.Show:this.videoManager.load(s,i),this.host.licenseManager.clearLicenseNotification();break;case n.ShowWithNotification:this.videoManager.load(s,i),this.host.licenseManager.notifyLicenseRequired(0);break;case n.Block:this.host.licenseManager.notifyLicenseRequired(2);break;case n.BlockUnsupportedEnv:this.videoManager.onError("This visual is not supported in this enviroment."),this.host.licenseManager.clearLicenseNotification()}}getFormattingModel(){this.formattingSettings}}t.Visual=r},652:(e,t,s)=>{s.r(t)}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,s),n.exports}s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0});const t=s(264);var o=window.powerbi,n={name:"videoPlayer9439BF571F794C09AE8B97BD2199A94C",displayName:"VideoPlayer",class:"Visual",apiVersion:"5.4.0",create:e=>{if(t.Visual)return new t.Visual(e);throw"Visual instance not found"},createModalDialog:(e,t,s)=>{const i=globalThis.dialogRegistry;e in i&&new i[e](t,s)},custom:!0};void 0!==o&&(o.visuals=o.visuals||{},o.visuals.plugins=o.visuals.plugins||{},o.visuals.plugins.videoPlayer9439BF571F794C09AE8B97BD2199A94C=n),e.default=n})(),videoPlayer9439BF571F794C09AE8B97BD2199A94C=i})();