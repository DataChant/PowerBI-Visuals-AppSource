/*! For license information please see visual.js.LICENSE.txt */
var upSetJS61F43BDFCA024B13B6AC5BA73C9427B2;(()=>{"use strict";var e={148:(e,t,n)=>{n.d(t,{e8:()=>l,hx:()=>o,jL:()=>a});var r=n(635);function a(e){return(t,n)=>{if(n.preventDefault(),!t)return;const r=t.elems[0],a=r&&null!=r.s?r.s:{};e.showContextMenu(a,{x:n.clientX,y:n.clientY})}}function o(e,t){return n=>{if(n){const o=n.elems.map(e=>e.s),i=e.getSelectionIds();a=i,(r=o).length===a.length&&r.every((e,t)=>e===a[t])?e.clear().then(()=>{t(null)}):e.select(o).then(()=>{t(n)})}else e.clear().then(()=>{t(null)});var r,a}}const i=250;function l(e,t,n){if(!t.tooltipService.enabled())return[void 0,void 0];const a=(t,a,o)=>{const i=e.getBoundingClientRect(),l=[a.clientX-i.left-e.clientLeft,a.clientY-i.top-e.clientTop],s=t.elems.map(e=>e.s);return{isTouchEvent:!1,coordinates:l,dataItems:[{header:t.name,displayName:n.getDisplayName("Tooltip_Size"),value:t.cardinality.toLocaleString()},...(0,r._R)(t)&&t.degree>1?Array.from(t.sets).map(e=>({displayName:e.name,value:e.cardinality.toLocaleString()})):[],...[].concat(...o.map(e=>function(e,t){if(!e)return[];if("categorical"===e.id){const n=Object.keys(e.value).filter(e=>"toString"!==e).map(t=>e.value[t]);return[{displayName:t.getDisplayName("Addon_Attribute"),value:e.name}].concat(n.map(e=>({displayName:e.label,color:e.color,value:`${e.count.toLocaleString()} (${Math.round(100*e.percentage)}%)`})))}if("boxplot"===e.id){const n=e.value,r=[t.getDisplayName("Addon_Minimum"),t.getDisplayName("Addon_25q"),t.getDisplayName("Addon_Median"),t.getDisplayName("Addon_75q"),t.getDisplayName("Addon_Maximum")],a=[n.min,n.q1,n.median,n.q3,n.max];return[{displayName:t.getDisplayName("Addon_Attribute"),value:e.name}].concat(r.map((e,t)=>({displayName:e,value:a[t].toFixed(2)})))}return[]}(e,n)))],identities:[s]}};let o=!1,l=-1;const s=(e,n,r)=>{if(l>=0&&(clearTimeout(l),l=-1),t.tooltipService.enabled())return e?void(l=self.setTimeout(()=>{const i=a(e,n,r);o=!0,t.tooltipService.show(i)},i)):(o=!1,void t.tooltipService.hide({immediately:!1,isTouchEvent:!1}))};return[s,(e,n,r)=>{if(!o)return s(e,n,r);if(!t.tooltipService.enabled())return;if(!e)return;const i=a(e,n,r);t.tooltipService.move(i)}]}},199:(e,t,n)=>{n.d(t,{SX:()=>h,h0:()=>f,t:()=>m,vx:()=>d});var r=n(674),a=n(635);const{Tn:o,PA:i,sk:l,Cx:s,iB:c}=r.z0,u=(0,a.wG)({sets:[],width:100,height:100});class d extends o{constructor(){super(...arguments),this.visible=!1,this.name="setColors",this.displayName="Set Colors",this.slices=[...Array.from({length:10})].map((e,t)=>new l({name:`setColor${t+1}`,displayName:"Set Color",value:{value:void 0}}))}derive(e,t,n){if(this.visible=t,t){const t=[...e].reverse();t.forEach((e,t)=>{this.slices[t].visible=!0,this.slices[t].displayName=e.name,null==this.slices[t].value.value&&(this.slices[t].value=n.getColor(e.value.source.queryName))});for(let e=t.length;e<this.slices.length;e++)this.slices[e].visible=!1}else this.slices.forEach(e=>e.visible=!1)}toColors(){return this.slices.map(e=>e.value.value)}}class m extends o{constructor(){super(...arguments),this.visible=!1,this.name="attributeColors",this.displayName="Attribute Colors",this.slices=[...Array.from({length:10})].map((e,t)=>new l({name:`attributeColor${t+1}`,displayName:"Attribute Color",value:{value:void 0}}))}derive(e){var t;if(this.visible=e.length>0,this.visible){let n=0;for(const r of e)for(const e of r.categories){if(n>=this.slices.length)break;this.slices[n].visible=!0,this.slices[n].displayName=`${r.displayName} - ${null!==(t=e.label)&&void 0!==t?t:e.value}`,null==this.slices[n].value.value&&(this.slices[n].value={value:e.color}),n++}for(;n<this.slices.length;n++)this.slices[n].visible=!1}else this.slices.forEach(e=>e.visible=!1)}toColors(){return this.slices.map(e=>e.value.value)}}class f extends o{constructor(){super(...arguments),this.theme=new i({name:"theme",displayNameKey:"Theme_Theme_DisplayName",value:{displayNameKey:"Theme_Theme_Light_DisplayName",value:"light"},items:[{displayNameKey:"Theme_Theme_Light_DisplayName",value:"light"},{displayNameKey:"Theme_Theme_IndividualColors_DisplayName",value:f.POWERBI_THEME},{displayNameKey:"Theme_Theme_ColoredSets_DisplayName",value:f.POWERBI_SET_COLORS_THEME},{displayNameKey:"Theme_Theme_SingleColor_DisplayName",value:f.POWERBI_AUTO_THEME},{displayNameKey:"Theme_Theme_Dark_DisplayName",value:"dark"},{displayNameKey:"Theme_Theme_Vega_DisplayName",value:"vega"}]}),this.selectionColor=new l({name:"selectionColor",displayNameKey:"Theme_SelectionColor_DisplayName",value:{value:u.selectionColor}}),this.color=new l({name:"color",displayNameKey:"Theme_Color_DisplayName",value:{value:u.color}}),this.opacity=new c({name:"opacity",displayNameKey:"Theme_Opacity_DisplayName",value:u.opacity}),this.hasSelectionColor=new l({name:"hasSelectionColor",displayNameKey:"Theme_HasSelectionColor_DisplayName",value:{value:u.hasSelectionColor}}),this.hasSelectionOpacity=new c({name:"hasSelectionOpacity",displayNameKey:"Theme_HasSelectionOpacity_DisplayName",value:u.hasSelectionOpacity}),this.textColor=new l({name:"textColor",displayNameKey:"Theme_TextColor_DisplayName",value:{value:u.textColor}}),this.hoverHintColor=new l({name:"hoverHintColor",displayNameKey:"Theme_Hover_Hint_Color_DisplayName",value:{value:u.hoverHintColor}}),this.notMemberColor=new l({name:"notMemberColor",displayNameKey:"Theme_Not_Member_Color_DisplayName",value:{value:u.notMemberColor}}),this.alternatingBackgroundColor=new l({name:"alternatingBackgroundColor",displayNameKey:"Theme_Alternating_Background_Color_DisplayName",value:{value:0==u.alternatingBackgroundColor?void 0:u.alternatingBackgroundColor}}),this.name="theme",this.displayNameKey="Theme_DisplayName",this.slices=[this.theme,this.selectionColor,this.color,this.opacity,this.hasSelectionColor,this.hasSelectionOpacity,this.textColor,this.hoverHintColor,this.notMemberColor,this.alternatingBackgroundColor]}generate(e,t){const n={};this.supportIndividualColors()?Object.assign(n,function(e){return{color:e.base.foreground.value,textColor:e.base.foregroundButton.value,selectionColor:"",opacity:1,hasSelectionOpacity:.4,filled:!0}}(e)):this.theme.value.value===f.POWERBI_AUTO_THEME?Object.assign(n,function(e,t){var n;if(!t.categories||0===t.categories.length)return{};const r=t.categories[0].source,a=e.getColor(null!==(n=r.queryName)&&void 0!==n?n:r.displayName).value;return{color:a,textColor:e.base.foregroundButton.value,selectionColor:a,opacity:1,hasSelectionOpacity:.4,filled:!0}}(e,t)):n.theme=this.theme.value.value;for(const e of[this.selectionColor,this.color,this.hasSelectionColor,this.textColor,this.hoverHintColor,this.notMemberColor,this.alternatingBackgroundColor]){const t=e.value.value;t!==u[e.name]&&(n[e.name]=t)}for(const e of[this.hasSelectionOpacity,this.opacity]){const t=e.value;t!==u[e.name]&&(n[e.name]=t)}return n}supportIndividualColors(){return this.theme.value.value===f.POWERBI_THEME||this.theme.value.value===f.POWERBI_SET_COLORS_THEME}get deriveCombinationColor(){return this.theme.value.value!==f.POWERBI_SET_COLORS_THEME}applyColorPalette(e){e.isHighContrast&&(this.textColor.value=e.foreground,this.color.value=e.background,this.selectionColor.value=e.foregroundSelected)}}f.POWERBI_THEME="powerbi",f.POWERBI_SET_COLORS_THEME="powerbi-set",f.POWERBI_AUTO_THEME="auto";class h extends o{constructor(){super(...arguments),this.fontFamily=new s({name:"fontFamily",displayNameKey:"Fonts_FontFamily_DisplayName",value:"Segoe UI"}),this.chartLabel=new c({name:"chartLabel",displayNameKey:"Fonts_Chartabel_DisplayName",value:12}),this.setLabel=new c({name:"setLabel",displayNameKey:"Fonts_SetLabel_DisplayName",value:12}),this.barLabel=new c({name:"barLabel",displayNameKey:"Fonts_BarLabel_DisplayName",value:7}),this.name="fonts",this.displayNameKey="Fonts_DisplayName",this.slices=[this.fontFamily,this.chartLabel,this.setLabel,this.barLabel]}generate(){return{fontFamily:this.fontFamily.value,fontSizes:{chartLabel:`${this.chartLabel.value}pt`,setLabel:`${this.setLabel.value}pt`,barLabel:`${this.barLabel.value}pt`}}}}},359:(e,t,n)=>{n.d(t,{E:()=>r});class r{constructor(e){this.base=e,this.map=new Map,this.set=new Set}getColor(e){if(this.map.has(e))return this.map.get(e);let t=this.base.getColor(e),n=0;for(;this.set.has(t.value);)t=this.base.getColor(`${e}${n++}`);return this.set.add(t.value),this.map.set(e,t),t}clear(){this.map.clear(),this.set.clear()}}},461:(e,t,n)=>{n.d(t,{Ay:()=>h});var r=n(674),a=n(199);const{Tn:o,PA:i,Kx:l,ks:s,iB:c,jF:u}=r.z0;class d extends o{constructor(){super(...arguments),this.numericScale=new i({name:"numericScale",displayNameKey:"Style_NumericScale_DisplayName",items:[{displayNameKey:"Style_NumericScale_Linear",value:"linear"},{displayNameKey:"Style_NumericScale_Log",value:"log"}],value:{displayNameKey:"Style_NumericScale_Linear",value:"linear"}}),this.setName=new s({name:"setName",displayNameKey:"Style_SetName_DisplayName",placeholder:"The label on the set axis",value:""}),this.setLabelAlignment=new i({name:"setLabelAlignment",displayNameKey:"Style_SetLabelAlignment_DisplayName",items:[{displayName:"Left",value:"left"},{displayName:"Center",value:"center"},{displayName:"Right",value:"right"}],value:{displayName:"Center",value:"center"}}),this.combinationName=new s({name:"combinationName",displayNameKey:"Style_CombinationName_DisplayName",placeholder:"The label on the combination axis",value:""}),this.setNameAxisOffset=new c({name:"setNameAxisOffset",displayNameKey:"Style_SetNameAxisOffset_DisplayName",value:0}),this.combinationNameAxisOffset=new c({name:"combinationNameAxisOffset",displayNameKey:"Style_CombinationNameAxisOffset_DisplayName",value:0}),this.setMaxScale=new c({name:"setMaxScale",displayNameKey:"Style_SetMaxScale_DisplayName",value:void 0}),this.combinationScaleMax=new c({name:"combinationScaleMax",displayNameKey:"Style_CombinationScaleMax_DisplayName",value:void 0}),this.name="style",this.displayNameKey="Style_DisplayName",this.slices=[this.numericScale,this.setName,this.setLabelAlignment,this.combinationName,this.setNameAxisOffset,this.combinationNameAxisOffset,this.setMaxScale,this.combinationScaleMax]}generate(){return{numericScale:this.numericScale.value.value,setName:this.setName.value,setLabelAlignment:this.setLabelAlignment.value.value,combinationName:this.combinationName.value,setNameAxisOffset:this.setNameAxisOffset.value,combinationNameAxisOffset:this.combinationNameAxisOffset.value,setMaxScale:this.setMaxScale.value,combinationMaxScale:this.combinationScaleMax.value}}}class m extends o{constructor(){super(...arguments),this.order=new i({name:"order",displayNameKey:"Sets_Order_DisplayName",items:[{displayNameKey:"Sets_Order_Inherit",value:"inherit"},{displayNameKey:"Sets_Order_Name",value:"name"},{displayNameKey:"Sets_Order_Cardinality",value:"cardinality"},{displayNameKey:"Sets_Order_Cardinality_Desc",value:"cardinality:desc"}],value:{displayNameKey:"Sets_Order_Inherit",value:"inherit"}}),this.limit=new c({name:"limit",displayNameKey:"Sets_Limit",value:10}),this.name="sets",this.displayNameKey="Sets_DisplayName",this.slices=[this.order,this.limit]}generate(){return{limit:this.limit.value,order:this.order.value.value}}}class f extends o{constructor(){super(...arguments),this.mode=new i({name:"mode",displayNameKey:"Combinations_Mode_DisplayName",items:[{displayNameKey:"Combinations_Mode_Intersection",value:"intersection"},{displayNameKey:"Combinations_Mode_Union",value:"union"},{displayNameKey:"Combinations_Mode_DistinctIntersection",value:"distinctIntersection"}],value:{displayNameKey:"Combinations_Mode_Intersection",value:"intersection"}}),this.min=new c({name:"min",displayNameKey:"Combinations_Min",value:1}),this.max=new c({name:"max",displayNameKey:"Combinations_Max",value:5}),this.empty=new u({name:"empty",displayNameKey:"Combinations_Empty",value:!1}),this.limit=new c({name:"limit",displayNameKey:"Combinations_Limit",value:20}),this.order=new i({name:"order",displayNameKey:"Combinations_Order",items:[{displayNameKey:"Combinations_Order_Name",value:"name"},{displayNameKey:"Combinations_Order_Cardinality_Name",value:"cardinality,name"},{displayNameKey:"Combinations_Order_Cardinality_Degree_Name",value:"cardinality,degree,name"},{displayNameKey:"Combinations_Order_Degree_Name",value:"degree,name"},{displayNameKey:"Combinations_Order_Degree_Cardinality_Name",value:"degree,cardinality,name"},{displayNameKey:"Combinations_Order_Group_Name",value:"group,name"},{displayNameKey:"Combinations_Order_Group_Cardinality_Name",value:"group,cardinality,name"},{displayNameKey:"Combinations_Order_Group_Degree_Name",value:"group,degree,name"},{displayNameKey:"Combinations_Order_Group_Degree_Cardinality_Name",value:"group,degree,cardinality,name"}],value:{displayNameKey:"Combinations_Order_Name",value:"name"}}),this.name="combinations",this.displayNameKey="Combinations_DisplayName",this.slices=[this.mode,this.min,this.max,this.empty,this.limit,this.order]}generate(){return{type:this.mode.value.value,min:this.min.value,max:this.max.value,empty:this.empty.value,limit:this.limit.value,order:(e=this.order.value.value,e.includes(",")?e.split(","):e)};var e}}class h extends l{constructor(){super(...arguments),this.sets=new m,this.combinations=new f,this.theme=new a.h0,this.setColors=new a.vx,this.attributeColors=new a.t,this.style=new d,this.fonts=new a.SX,this.cards=[this.sets,this.combinations,this.theme,this.setColors,this.attributeColors,this.style,this.fonts]}}},519:(e,t,n)=>{function r(e){const t=e.source;return Boolean(null!=t.type&&(t.type.integer||t.type.numeric||t.type.duration))}n.d(t,{kB:()=>o,kf:()=>r,tq:()=>a});class a{constructor(e){this.data=e}get displayName(){return this.data.source.displayName}}class o{constructor(e,t,n,r,a){this.data=e;const o=Array.from(new Set(e.values.map(e=>e.toString()))).sort(),i=(e,t)=>{var o;return null!==(o=a[r+e])&&void 0!==o?o:n.colorPalette.getColor(t).value};this.categories=o.map((e,a)=>{const o=r+a;return{value:e,color:i(o,e),index:o,selector:n.createSelectionIdBuilder().withCategory(t,o).createSelectionId().getSelector()}})}get displayName(){return this.data.source.displayName}}o.OBJECT_NAME="attributeColors"},635:(e,t,n)=>{function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}n.d(t,{I5:()=>Nt,Oy:()=>St,XX:()=>Tr,Xo:()=>Mr,YG:()=>Ir,ZV:()=>ft,_R:()=>tt,gO:()=>_t,rH:()=>Ar,wG:()=>Lr});var u,d,m,f,h,p,y,v={},g=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function b(e,t){for(var n in t)e[n]=t[n];return e}function x(e){var t=e.parentNode;t&&t.removeChild(e)}function S(e,t,n){var r,a,o,i={};for(o in t)"key"==o?r=t[o]:"ref"==o?a=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?u.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===i[o]&&(i[o]=e.defaultProps[o]);return N(e,i,r,a,null)}function N(e,t,n,r,a){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++m:a};return null==a&&null!=d.vnode&&d.vnode(o),o}function C(e){return e.children}function w(e,t){this.props=e,this.context=t}function E(e,t){if(null==t)return e.__?E(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?E(e):null}function k(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return k(e)}}function O(e){(!e.__d&&(e.__d=!0)&&f.push(e)&&!A.__r++||p!==d.debounceRendering)&&((p=d.debounceRendering)||h)(A)}function A(){for(var e;A.__r=f.length;)e=f.sort(function(e,t){return e.__v.__b-t.__v.__b}),f=[],e.some(function(e){var t,n,r,a,o,i;e.__d&&(o=(a=(t=e).__v).__e,(i=t.__P)&&(n=[],(r=b({},a)).__v=a.__v+1,z(i,a,r,t.__n,void 0!==i.ownerSVGElement,null!=a.__h?[o]:null,n,null==o?E(a):o,a.__h),F(n,a),a.__e!=o&&k(a)))})}function M(e,t,n,r,a,o,i,l,s,c){var u,d,m,f,h,p,y,_=r&&r.__k||g,b=_.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(f=n.__k[u]=null==(f=t[u])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?N(null,f,null,null,f):Array.isArray(f)?N(C,{children:f},null,null,null):f.__b>0?N(f.type,f.props,f.key,null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(m=_[u])||m&&f.key==m.key&&f.type===m.type)_[u]=void 0;else for(d=0;d<b;d++){if((m=_[d])&&f.key==m.key&&f.type===m.type){_[d]=void 0;break}m=null}z(e,f,m=m||v,a,o,i,l,s,c),h=f.__e,(d=f.ref)&&m.ref!=d&&(y||(y=[]),m.ref&&y.push(m.ref,null,f),y.push(d,f.__c||h,f)),null!=h?(null==p&&(p=h),"function"==typeof f.type&&f.__k===m.__k?f.__d=s=L(f,s,e):s=I(e,f,m,_,h,s),"function"==typeof n.type&&(n.__d=s)):s&&m.__e==s&&s.parentNode!=e&&(s=E(m))}for(n.__e=p,u=b;u--;)null!=_[u]&&("function"==typeof n.type&&null!=_[u].__e&&_[u].__e==n.__d&&(n.__d=E(r,u+1)),R(_[u],_[u]));if(y)for(u=0;u<y.length;u++)K(y[u],y[++u],y[++u])}function L(e,t,n){for(var r,a=e.__k,o=0;a&&o<a.length;o++)(r=a[o])&&(r.__=e,t="function"==typeof r.type?L(r,t,n):I(n,r,r,a,r.__e,t));return t}function T(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some(function(e){T(e,t)}):t.push(e)),t}function I(e,t,n,r,a,o){var i,l,s;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(null==n||a!=o||null==a.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(a),i=null;else{for(l=o,s=0;(l=l.nextSibling)&&s<r.length;s+=2)if(l==a)break e;e.insertBefore(a,o),i=o}return void 0!==i?i:a.nextSibling}function P(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||_.test(t)?n:n+"px"}function j(e,t,n,r,a){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||P(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||P(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?q:D,o):e.removeEventListener(t,o?q:D,o);else if("dangerouslySetInnerHTML"!==t){if(a)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function D(e){this.l[e.type+!1](d.event?d.event(e):e)}function q(e){this.l[e.type+!0](d.event?d.event(e):e)}function z(e,t,n,r,a,o,i,l,s){var c,u,m,f,h,p,y,v,g,_,x,S=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(s=n.__h,l=t.__e=n.__e,t.__h=null,o=[l]),(c=d.__b)&&c(t);try{e:if("function"==typeof S){if(v=t.props,g=(c=S.contextType)&&r[c.__c],_=c?g?g.props.value:c.__:r,n.__c?y=(u=t.__c=n.__c).__=u.__E:("prototype"in S&&S.prototype.render?t.__c=u=new S(v,_):(t.__c=u=new w(v,_),u.constructor=S,u.render=H),g&&g.sub(u),u.props=v,u.state||(u.state={}),u.context=_,u.__n=r,m=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=S.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=b({},u.__s)),b(u.__s,S.getDerivedStateFromProps(v,u.__s))),f=u.props,h=u.state,m)null==S.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==S.getDerivedStateFromProps&&v!==f&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(v,_),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(v,u.__s,_)||t.__v===n.__v){u.props=v,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),u.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),u.__h.length&&i.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(v,u.__s,_),null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(f,h,p)})}u.context=_,u.props=v,u.state=u.__s,(c=d.__r)&&c(t),u.__d=!1,u.__v=t,u.__P=e,c=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(r=b(b({},r),u.getChildContext())),m||null==u.getSnapshotBeforeUpdate||(p=u.getSnapshotBeforeUpdate(f,h)),x=null!=c&&c.type===C&&null==c.key?c.props.children:c,M(e,Array.isArray(x)?x:[x],t,n,r,a,o,i,l,s),u.base=t.__e,t.__h=null,u.__h.length&&i.push(u),y&&(u.__E=u.__=null),u.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=B(n.__e,t,n,r,a,o,i,s);(c=d.diffed)&&c(t)}catch(e){t.__v=null,(s||null!=o)&&(t.__e=l,t.__h=!!s,o[o.indexOf(l)]=null),d.__e(e,t,n)}}function F(e,t){d.__c&&d.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){d.__e(e,t.__v)}})}function B(e,t,n,r,a,o,i,l){var s,c,d,m=n.props,f=t.props,h=t.type,p=0;if("svg"===h&&(a=!0),null!=o)for(;p<o.length;p++)if((s=o[p])&&"setAttribute"in s==!!h&&(h?s.localName===h:3===s.nodeType)){e=s,o[p]=null;break}if(null==e){if(null===h)return document.createTextNode(f);e=a?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,f.is&&f),o=null,l=!1}if(null===h)m===f||l&&e.data===f||(e.data=f);else{if(o=o&&u.call(e.childNodes),c=(m=n.props||v).dangerouslySetInnerHTML,d=f.dangerouslySetInnerHTML,!l){if(null!=o)for(m={},p=0;p<e.attributes.length;p++)m[e.attributes[p].name]=e.attributes[p].value;(d||c)&&(d&&(c&&d.__html==c.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,n,r,a){var o;for(o in n)"children"===o||"key"===o||o in t||j(e,o,null,n[o],r);for(o in t)a&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||j(e,o,t[o],n[o],r)}(e,f,m,a,l),d)t.__k=[];else if(p=t.props.children,M(e,Array.isArray(p)?p:[p],t,n,r,a&&"foreignObject"!==h,o,i,o?o[0]:n.__k&&E(n,0),l),null!=o)for(p=o.length;p--;)null!=o[p]&&x(o[p]);l||("value"in f&&void 0!==(p=f.value)&&(p!==m.value||p!==e.value||"progress"===h&&!p)&&j(e,"value",p,m.value,!1),"checked"in f&&void 0!==(p=f.checked)&&p!==e.checked&&j(e,"checked",p,m.checked,!1))}return e}function K(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){d.__e(e,n)}}function R(e,t,n){var r,a;if(d.unmount&&d.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||K(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){d.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&R(r[a],t,"function"!=typeof e.type);n||null==e.__e||x(e.__e),e.__e=e.__d=void 0}function H(e,t,n){return this.constructor(e,n)}function U(e,t,n){var r,a,o;d.__&&d.__(e,t),a=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],z(t,e=(!r&&n||t).__k=S(C,null,[e]),a||v,v,void 0!==t.ownerSVGElement,!r&&n?[n]:a?null:t.firstChild?u.call(t.childNodes):null,o,!r&&n?n:a?a.__e:t.firstChild,r),F(o,e)}function W(e,t){U(e,t,W)}function V(e,t,n){var r,a,o,i=b({},e.props);for(o in t)"key"==o?r=t[o]:"ref"==o?a=t[o]:i[o]=t[o];return arguments.length>2&&(i.children=arguments.length>3?u.call(arguments,2):n),N(e.type,i,r||e.key,a||e.ref,null)}u=g.slice,d={__e:function(e,t){for(var n,r,a;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),a=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),a=n.__d),a)return n.__E=n}catch(t){e=t}throw e}},m=0,w.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=b({},this.state),"function"==typeof e&&(e=e(b({},n),this.props)),e&&b(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),O(this))},w.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),O(this))},w.prototype.render=C,f=[],h="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,A.__r=0,y=0;var $,G,J,Q=0,X=[],Y=d.__b,Z=d.__r,ee=d.diffed,te=d.__c,ne=d.unmount;function re(e,t){d.__h&&d.__h(G,e,Q||t),Q=0;var n=G.__H||(G.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ae(e){return Q=1,oe(pe,e)}function oe(e,t,n){var r=re($++,2);return r.t=e,r.__c||(r.__=[n?n(t):pe(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=G),r.__}function ie(e,t){var n=re($++,4);!d.__s&&he(n.__H,t)&&(n.__=e,n.__H=t,G.__h.push(n))}function le(e){return Q=5,se(function(){return{current:e}},[])}function se(e,t){var n=re($++,7);return he(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ce(e,t){return Q=8,se(function(){return e},t)}function ue(){var e;for(X.sort(function(e,t){return e.__v.__b-t.__v.__b});e=X.pop();)if(e.__P)try{e.__H.__h.forEach(me),e.__H.__h.forEach(fe),e.__H.__h=[]}catch(t){e.__H.__h=[],d.__e(t,e.__v)}}d.__b=function(e){G=null,Y&&Y(e)},d.__r=function(e){Z&&Z(e),$=0;var t=(G=e.__c).__H;t&&(t.__h.forEach(me),t.__h.forEach(fe),t.__h=[])},d.diffed=function(e){ee&&ee(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==X.push(t)&&J===d.requestAnimationFrame||((J=d.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),de&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);de&&(t=requestAnimationFrame(n))})(ue)),G=null},d.__c=function(e,t){t.some(function(e){try{e.__h.forEach(me),e.__h=e.__h.filter(function(e){return!e.__||fe(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],d.__e(n,e.__v)}}),te&&te(e,t)},d.unmount=function(e){ne&&ne(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{me(e)}catch(e){t=e}}),t&&d.__e(t,n.__v))};var de="function"==typeof requestAnimationFrame;function me(e){var t=G,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),G=t}function fe(e){var t=G;e.__c=e.__(),G=t}function he(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function pe(e,t){return"function"==typeof t?t(e):t}function ye(e,t){for(var n in t)e[n]=t[n];return e}function ve(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function ge(e){this.props=e}(ge.prototype=new w).isPureReactComponent=!0,ge.prototype.shouldComponentUpdate=function(e,t){return ve(this.props,e)||ve(this.state,t)};var _e=d.__b;d.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),_e&&_e(e)};var be="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911,xe=function(e,t){return null==e?null:T(T(e).map(t))},Se={map:xe,forEach:xe,count:function(e){return e?T(e).length:0},only:function(e){var t=T(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:T},Ne=d.__e;d.__e=function(e,t,n){if(e.then)for(var r,a=t;a=a.__;)if((r=a.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);Ne(e,t,n)};var Ce=d.unmount;function we(){this.__u=0,this.t=null,this.__b=null}function Ee(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function ke(){this.u=null,this.o=null}d.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Ce&&Ce(e)},(we.prototype=new w).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var a=Ee(r.__v),o=!1,i=function(){o||(o=!0,n.__R=null,a?a(l):l())};n.__R=i;var l=function(){if(! --r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return e(t,n,r)}),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},s=!0===t.__h;r.__u++||s||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(i,i)},we.prototype.componentWillUnmount=function(){this.t=[]},we.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),t.__c.__H=null),null!=(t=ye({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return e(t,n,r)})),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var a=t.__e&&S(C,null,e.fallback);return a&&(a.__h=null),[S(C,null,t.__e?null:e.children),a]};var Oe=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Ae(e){return this.getChildContext=function(){return e.context},e.children}function Me(e){var t=this,n=e.i;t.componentWillUnmount=function(){U(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),U(S(Ae,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}(ke.prototype=new w).__e=function(e){var t=this,n=Ee(t.__v),r=t.o.get(e);return r[0]++,function(a){var o=function(){t.props.revealOrder?(r.push(a),Oe(t,e,r)):a()};n?n(o):o()}},ke.prototype.render=function(e){this.u=null,this.o=new Map;var t=T(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},ke.prototype.componentDidUpdate=ke.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){Oe(e,n,t)})};var Le="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Te=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ie="undefined"!=typeof document,Pe=function(e){return("undefined"!=typeof Symbol&&"symbol"==o(Symbol())?/fil|che|rad/i:/fil|che|ra/i).test(e)};w.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(w.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var je=d.event;function De(){}function qe(){return this.cancelBubble}function ze(){return this.defaultPrevented}d.event=function(e){return je&&(e=je(e)),e.persist=De,e.isPropagationStopped=qe,e.isDefaultPrevented=ze,e.nativeEvent=e};var Fe,Be={configurable:!0,get:function(){return this.class}},Ke=d.vnode;d.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var a=-1===t.indexOf("-");for(var o in r={},n){var i=n[o];Ie&&"children"===o&&"noscript"===t||"value"===o&&"defaultValue"in n&&null==i||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===i?i="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&!Pe(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(o)?o=o.toLowerCase():a&&Te.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===i&&(i=void 0),r[o]=i)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=T(n.children).forEach(function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)})),"select"==t&&null!=r.defaultValue&&(r.value=T(n.children).forEach(function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value})),e.props=r,n.class!=n.className&&(Be.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Be))}e.$$typeof=Le,Ke&&Ke(e)};var Re=d.__r;d.__r=function(e){Re&&Re(e),Fe=e.__c};var He={ReactCurrentDispatcher:{current:{readContext:function(e){return Fe.__n[e.__c].props.value}}}};function Ue(e){return!!e&&e.$$typeof===Le}var We={useState:ae,useReducer:oe,useEffect:function(e,t){var n=re($++,3);!d.__s&&he(n.__H,t)&&(n.__=e,n.__H=t,G.__H.__h.push(n))},useLayoutEffect:ie,useRef:le,useImperativeHandle:function(e,t,n){Q=6,ie(function(){"function"==typeof e?e(t()):e&&(e.current=t())},null==n?n:n.concat(e))},useMemo:se,useCallback:ce,useContext:function(e){var t=G.context[e.__c],n=re($++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(G)),t.props.value):e.__},useDebugValue:function(e,t){d.useDebugValue&&d.useDebugValue(t?t(e):e)},version:"17.0.2",Children:Se,render:function(e,t,n){return null==t.__k&&(t.textContent=""),U(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return W(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(U(null,e),!0)},createPortal:function(e,t){return S(Me,{__v:e,i:t})},createElement:S,createContext:function(e,t){var n={__c:t="__cC"+y++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(O)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n},createFactory:function(e){return S.bind(null,e)},cloneElement:function(e){return Ue(e)?V.apply(null,arguments):e},createRef:function(){return{current:null}},Fragment:C,isValidElement:Ue,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:w,PureComponent:ge,memo:function(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:ve(this.props,e)}function r(t){return this.shouldComponentUpdate=n,S(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r},forwardRef:function(e){function t(t,n){var r=ye({},t);return delete r.ref,e(r,(n=t.ref||n)&&("object"!=o(n)||"current"in n)?n:null)}return t.$$typeof=be,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t},flushSync:function(e,t){return e(t)},unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:C,Suspense:we,SuspenseList:ke,lazy:function(e){var t,n,r;function a(a){if(t||(t=e()).then(function(e){n=e.default||e},function(e){r=e}),r)throw r;if(!n)throw t;return S(n,a)}return a.displayName="Lazy",a.__f=!0,a},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:He};function Ve(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=n.size,a={setA:r,setB:r,union:r,intersection:r};return function(o){if(o===e)return a;var i=0;o.forEach(function(e){(t&&n.has(t(e))||!t&&n.has(e))&&i++});var l=function(e){return e instanceof Set?e.size:e.length}(o);return{setA:r,setB:l,intersection:i,union:r+l-i}}}function $e(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=Array.isArray(e)?e:Array.from(e),a={setA:r,setB:r,union:r,intersection:r};return function(o){if(o===e)return a;var i=[],l=r.slice();return o.forEach(function(e){t&&n.has(t(e))||!t&&n.has(e)?i.push(e):l.push(e)}),{setA:r,setB:Array.isArray(o)?o:Array.from(o),intersection:i,union:l}}}function Ge(e){return Array.isArray(e.elems)}function Je(e){return"function"==typeof e.overlap}function Qe(e){return null!=e.set}function Xe(e,t,n){if(Je(e))return e.overlap;if(Qe(e)&&e.set.overlap)return e.set.overlap;var r=Ve(Ge(e)?e.elems:e.set.elems,n);return function(n){return n.overlap&&Ge(e)&&Array.isArray(e.elems)?n.overlap(e.elems):n.overlap&&Qe(e)?n.overlap(e.set):r(n.elems)[t]}}function Ye(e,t,n){if(Je(e))return function(){return null};if("intersection"===t){var r=function(e,t){var n=e instanceof Set?Array.from(e):e,r=t?new Set(n.map(t)):e instanceof Set?e:new Set(e);return function(a){if(a===e)return n;var o=[];return a.forEach(function(e){(t&&r.has(t(e))||!t&&r.has(e))&&o.push(e)}),o}}(Ge(e)?e.elems:e.set.elems,n);return function(e){return r(e.elems)}}var a=$e(Ge(e)?e.elems:e.set.elems,n);return function(e){return a(e.elems)[t]}}function Ze(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function et(e){return Ze(e)&&"set"===e.type}function tt(e){var t=e;return Ze(e)&&["composite","union","intersection","distinctIntersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}function nt(e){return et(e)||tt(e)}function rt(e){var t=e;return null!=e&&"string"==typeof t.name&&"string"==typeof t.color&&(Ge(t)||Qe(t)||Je(t))}function at(e,t){return e.name.localeCompare(t.name)}function ot(e,t){return t.cardinality-e.cardinality}function it(e,t){return e.degree-t.degree}function lt(e){return function(t,n){return e.reduce(function(e,r){return 0===e?r(t,n):e},0)}}function st(e){return function(t,n){return-e(t,n)}}function ct(e){return function(t,n){var r=function(e){return e<0?Number.POSITIVE_INFINITY:e},a=r(e.findIndex(function(e){return t.sets.has(e)})),o=r(e.findIndex(function(e){return n.sets.has(e)}));return a-o}}function ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;return n.order&&(r=r.sort(function(e,t){if(!t)return at;var n=Array.isArray(t)?t:[t];return 0===n.length?at:lt(n.map(function(t){switch(t){case"cardinality":case"cardinality:desc":return ot;case"cardinality:asc":return st(ot);case"name:desc":return st(at);case"degree":case"degree:asc":return it;case"degree:desc":return st(it);case"group":case"group:asc":return ct(e);case"group:desc":return st(ct(e));default:return at}}))}(e,n.order))),null!=n.limit?r.slice(0,n.limit):r}var dt={distinctIntersection:" ∩ ",intersection:" ∩ ",union:" ∪ ",composite:","};function mt(e){if(!e)return[255,255,255];var t=e.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i);if(t)return[Number.parseInt(t[1],16),Number.parseInt(t[2],16),Number.parseInt(t[3],16)];var n=e.match(/\(([\d]+)[, ]([\d]+)[, ]([\d]+)\)/i);return n?[Number.parseInt(n[1],10),Number.parseInt(n[2],10),Number.parseInt(n[3],10)]:[255,255,255]}function ft(e){if(1===e.length)return e[0];if(!e.every(function(e){return null==e})){var t=e.map(mt),n=Math.floor(t.reduce(function(e,t){return e+t[0]},0)/t.length),r=Math.floor(t.reduce(function(e,t){return e+t[1]},0)/t.length),a=Math.floor(t.reduce(function(e,t){return e+t[2]},0)/t.length);return"#".concat(n.toString(16)).concat(r.toString(16)).concat(a.toString(16))}}function ht(e,t,n){var r=Array.from(e).sort(function(e,n){return t.get(e)-t.get(n)});return 1===r.length?r[0].name:"(".concat(r.map(function(e){return e.name}).join(n),")")}function pt(e,t,n,r,a){return{type:0===n.size?"composite":e,elems:r,color:a(Array.from(n).map(function(e){return e.color})),sets:n,name:t,cardinality:r.length,degree:n.size}}function yt(e,t,n,r,a,o,i){var l=new Set(e.sets);t.sets.forEach(function(e){return l.add(e)});var s=ht(l,a,dt[o]);if(0===e.cardinality||0===t.cardinality)return pt(o,s,l,[],i);var c=e,u=t;e.cardinality>t.cardinality&&(c=t,u=e);for(var d=new Set,m=n.get(u),f=[],h=c.elems.length,p=0;p<h;p++){var y=c.elems[p],v=r(y);m.has(v)&&(d.add(v),f.push(y))}var g=pt(o,s,l,f,i);return n.set(g,d),g}function vt(e,t,n,r,a,o,i){var l=new Set(e.sets);t.sets.forEach(function(e){return l.add(e)});var s=ht(l,a,dt[o]);if(0===e.cardinality){var c=pt(o,s,l,t.elems,i);return n.set(c,n.get(t)),c}if(0===t.cardinality){var u=pt(o,s,l,e.elems,i);return n.set(u,n.get(e)),u}var d=e,m=t;e.cardinality>t.cardinality&&(d=t,m=e);var f=new Set(n.get(m)),h=n.get(m),p=m.elems.slice();d.elems.forEach(function(e){var t=r(e);h.has(t)||(f.add(t),p.push(e))});var y=pt(o,s,l,p,i);return n.set(y,f),y}function gt(e,t,n,r,a,o){if("number"==typeof t)return{type:"composite",elems:[],color:o?o([]):void 0,sets:new Set,name:"()",cardinality:t,overlap:function(e){return e===this||nt(e)&&e.name===this.name&&e.cardinality===this.cardinality?this.cardinality:0},degree:0};if(Array.isArray(t))return pt(e,"()",new Set,t,o);var i=Array.from(r.values()),l=n.filter(function(e){var t=a(e);return i.every(function(e){return!e.has(t)})});return pt(e,"()",new Set,l,o)}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=void 0===n?"intersection":n,a=t.min,o=void 0===a?0:a,i=t.max,l=void 0===i?Number.POSITIVE_INFINITY:i,s=t.empty,c=void 0!==s&&s,u=t.elems,d=void 0===u?[]:u,m=t.notPartOfAnySet,f=t.toElemKey,h=t.mergeColors,p=void 0===h?ft:h,y=[],v=new Map(e.map(function(e,t){return[e,t]})),g=new Map(e.map(function(e){return[e,f?new Set(e.elems.map(f)):new Set(e.elems)]})),_=f?null:g,b=f?g:null,x="union"===r?vt:yt;function S(t){if(!(t.degree<o||t.degree>l||0===t.cardinality&&!c))if("distinctIntersection"===r){var n=e.filter(function(e){return!t.sets.has(e)}),a=[];if(f){var i=n.map(function(e){return b.get(e)});a=t.elems.filter(function(e){var t=f(e);return i.every(function(e){return!e.has(t)})})}else{var s=n.map(function(e){return _.get(e)});a=t.elems.filter(function(e){return s.every(function(t){return!t.has(e)})})}if(a.length!==t.cardinality){var u=pt(r,t.name,t.sets,a,p);(0!==u.cardinality||c)&&y.push(u)}else y.push(t)}else y.push(t)}function N(e,t,n,a){if(!(t>l))for(var o=e.length,i=0;i<o;i++){for(var s=e[i],u=[],d=i+1;d<o;d++){var m=e[d],f=x(s,m,n,a,v,r,p);S(f),("union"===r||f.cardinality>0||c)&&u.push(f)}u.length>1&&N(u,t+1,n,a)}}o<=0&&S(f?gt(r,m,d,b,f,p):gt(r,m,d,_,function(e){return e},p));var C=e.map(function(e){var t=pt(r,e.name,new Set([e]),e.elems,p);return g.set(t,g.get(e)),S(t),t});return f?N(C,2,b,f):N(C,2,_,function(e){return e}),ut(e,y,t)}function bt(e){return Object.assign({type:"set",cardinality:e.elems.length},e)}function xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if(t.order){var r=function(e){if(!e)return at;switch(e){case"cardinality":case"cardinality:desc":return lt([ot,at]);case"cardinality:asc":return lt([st(ot),at]);case"name:desc":return st(at);default:return at}}(t.order);n=n.slice().sort(r)}return null!=t.limit?n.slice(0,t.limit):n}function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xt(e.map(bt),t)}function Nt(e,t){var n,r,a,o="function"==typeof t?t:function(e){return e.sets},i=null!==(n="function"!=typeof t?t:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})&&void 0!==n?n:{},l=null!==(r=i.type)&&void 0!==r?r:"intersection",s=null!==(a=i.joiner)&&void 0!==a?a:dt[l],u=[],d=new Map,m=e.map(function(e){var t=o(e),n=t.map(function(e){if(d.has(e))return d.get(e);var t={cardinality:0,elems:[],name:e,type:"set"};return u.push(t),d.set(t.name,t),t});if("distinctIntersection"===l){var r,a=c(n);try{for(a.s();!(r=a.n()).done;)r.value.cardinality+=e.cardinality}catch(e){a.e(e)}finally{a.f()}}else if(1===t.length)Object.assign(n[0],{cardinality:e.cardinality},e);else if("intersection"===l){var i,m=c(n);try{for(m.s();!(i=m.n()).done;){var f=i.value;f.cardinality=Math.max(f.cardinality,e.cardinality)}}catch(e){m.e(e)}finally{m.f()}}else if("union"===l){var h,p=c(n);try{for(p.s();!(h=p.n()).done;){var y=h.value;y.cardinality=Math.min(y.cardinality,e.cardinality)}}catch(e){p.e(e)}finally{p.f()}}var v=t.join(s);return Object.assign({type:l,elems:[],name:v},e,{cardinality:e.cardinality,degree:t.length,sets:new Set(n)})}),f=xt(u,{order:i.setOrder});return{sets:f,combinations:ut(f,m,{order:i.combinationOrder})}}function Ct(e){return"".concat(e.name,":").concat(e.type,"#").concat(e.cardinality)}function wt(e){return 0===e.sets.size}function Et(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ct,r={done:null,aKey:"",bKey:"",aIsSet:!1,bIsSet:!1,toKey:n};return e===t?(r.done=e.cardinality,r):0===e.cardinality||0===t.cardinality?(r.done=0,r):(r.aKey=n(e),r.bKey=n(t),r.aKey===r.bKey?(r.done=e.cardinality,r):(r.aIsSet=et(e),r.bIsSet=et(t),!r.aIsSet&&wt(e)||!r.bIsSet&&wt(t)?(r.done=0,r):r))}function kt(e,t){return!(t.bIsSet||!t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.aKey)}function Ot(e,t){return!(!t.bIsSet||t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.bKey)}function At(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct;return e.map(function(e){var n=Array.from(e.sets).map(t).sort();return{key:n.join("&"),s:n,sets:new Set(n),degree:e.degree,cardinality:e.cardinality}})}function Mt(e,t,n){var r=new Set;if(n.aIsSet)r.add(n.aKey);else for(var a=0,o=Array.from(e.sets);a<o.length;a++){var i=o[a];r.add(n.toKey(i))}if(n.bIsSet)r.add(n.bKey);else for(var l=0,s=Array.from(t.sets);l<s.length;l++){var c=s[l];r.add(n.toKey(c))}return Array.from(r).sort().join("&")}function Lt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ct;if(0===e.length)return t;var r=e[0].type;if(e.some(function(e){return e.type!==r}))return t;switch(r){case"union":return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ct,r=new Map(At(e,n).map(function(e){return[e.key,e.cardinality]}));return function(e,a){var o=Et(e,a,n);if(null!=o.done)return o.done;if(o.aIsSet&&!o.bIsSet&&kt(a,o))return e.cardinality;if(!o.aIsSet&&o.bIsSet&&Ot(e,o))return a.cardinality;var i=Mt(e,a,o);return r.has(i)?e.cardinality+a.cardinality-r.get(i):t(e,a)}}(e,t,n);case"intersection":return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ct,r=new Map(At(e,n).map(function(e){return[e.key,e.cardinality]}));return function(e,a){var o=Et(e,a,n);if(null!=o.done)return o.done;if(o.aIsSet&&!o.bIsSet&&kt(a,o))return a.cardinality;if(!o.aIsSet&&o.bIsSet&&Ot(e,o))return e.cardinality;var i=Mt(e,a,o);return r.has(i)?r.get(i):t(e,a)}}(e,t,n);case"distinctIntersection":return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ct,a=new Map,o=c(At(e,r));try{for(o.s();!(n=o.n()).done;){var i,l=n.value,s=c(l.s);try{for(s.s();!(i=s.n()).done;){var u=i.value;a.has(u)?a.get(u).push(l):a.set(u,[l])}}catch(e){s.e(e)}finally{s.f()}}}catch(e){o.e(e)}finally{o.f()}return function(e,n){var o=Et(e,n,r);if(null!=o.done)return o.done;if(!o.aIsSet&&!o.bIsSet)return 0;if(o.aIsSet&&!o.bIsSet)return kt(n,o)?n.cardinality:0;if(!o.aIsSet&&o.bIsSet)return Ot(e,o)?e.cardinality:0;var i=a.get(o.aKey),l=a.get(o.bKey);return i&&l?i.length<l.length?i.reduce(function(e,t){return e+(t.sets.has(o.bKey)?t.cardinality:0)},0):l.reduce(function(e,t){return e+(t.sets.has(o.aKey)?t.cardinality:0)},0):t(e,n)}}(e,t,n)}return t}var Tt=function(e,t,n){var r=e.length+n,a=t/Math.max(1,r),o=t-a*e.length,i=new Map(e.map(function(e,t){return[e,t]})),l=a/(1+n),s=function(e){var t=i.get(e);if(null!=t)return o+a*t};return s.bandwidth=function(){return l},s};function It(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=0;r<e.length-n;r+=n){var a=e[r],o=e[r+1];if(a<o){if(a+t[r]/2>o-t[r+1]/2)return!0}else{var i=a-t[r]/2;if(o+t[r+1]/2>i)return!0}}return!1}function Pt(e,t,n,r,a){var o=e[e.length-1];if(!o.label)for(var i=e.length-2;i>0;--i)if(e[i].label){o=e[i];break}if(o.value<t){var l=n(o.value),s=n(t);if(l<s)l+r(o.value)/2<s-r(t)/2&&e.push({value:t,label:a(t)});else{var c=l-r(o.value)/2;s+r(t)/2<c&&e.push({value:t,label:a(t)})}}return e}function jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e.map(function(e,r){return{value:e,label:1===n||r%n===0?t(e):void 0}})}function Dt(e,t,n,r,a){var o=e.map(function(e){return t(e)}),i=e.map(function(e){return n(e)});return It(o,i)&&It(o,i,2)?null:Pt(jt(e,a),r,t,n,a)}function qt(e){return e.toLocaleString()}function zt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=0;r<=e;r+=t)n.push(r);return n}function Ft(e,t,n,r){if(t<=0)return[];for(var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11,n=Math.max(0,Math.floor(Math.log10(e)-.5)),r=Math.pow(10,n),a=[1,2,5],o=a.map(function(e){return e*r});n>0&&o.unshift(a[a.length-1]*Math.pow(10,n-1)),o.push(a[0]*Math.pow(10,n+1));var i=Math.ceil(e/t);return o.filter(function(t){return t>=i&&t<=e})}(e,t),o=0;o<a.length;o++){var i=Dt(zt(e,a[o]),n,r,e,qt);if(i)return i}return jt([0,e],qt)}var Bt=function(e,t,n){var r=t[1]-t[0],a=e,o=function(e){var n=Math.max(0,Math.min(e,a))/a;return t[0]+n*r};return o.ticks=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if("vertical"===n.orientation){var r=Math.ceil(1.4*n.fontSizeHint);return Ft(e,t+1,o,function(){return r})}var a=n.fontSizeHint/1.4;return Ft(e,t+1,o,function(e){return Math.ceil(qt(e).length*a)})},o.tickFormat=function(){return qt},o};function Kt(e){var t=["","k","M","G"],n=Math.max(0,Math.min(Math.floor(Math.log10(e)/3),t.length-1)),r=Math.round(e/Math.pow(10,3*n-1))/10;return"".concat(r.toLocaleString()).concat(t[n])}function Rt(e,t){for(var n=[],r=Math.pow(10,t),a=1;a<=e;a*=r)n.push(a);return n}function Ht(e,t){for(var n=[],r=1,a=0;r<=e;r*=10,a++){n.push({value:r,label:1===t||a%t===0?Kt(r):void 0});for(var o=r+r;o<10*r&&o<e;o+=r*t)n.push({value:o})}return n}function Ut(e,t,n,r){if(t<=0)return[];for(var a=0,o=[1,2,5];a<o.length;a++){var i=o[a];if(Dt(Rt(e,i),n,r,e,Kt))return Pt(Ht(e,i),e,n,r,Kt)}return jt([0,e],Kt)}var Wt=function(e,t,n){var r=t[1]-t[0],a=e<1?1:Math.log10(e),o=function(e){var n=Math.max(0,Math.min(e,a)),o=n<=1?0:Math.log10(n)/a;return t[0]+o*r};return o.ticks=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if("vertical"===n.orientation){var r=Math.ceil(1.4*n.fontSizeHint);return Ut(e,t+1,o,function(){return r})}var a=n.fontSizeHint/1.4;return Ut(e,t+1,o,function(e){return Math.ceil(Kt(e).length*a)})},o.tickFormat=function(){return Kt},o};function Vt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sortAble,a=n.compress,o=void 0===a?"auto":a;if(0===e.length)return[];var i=e.map(function(e){return t(e)});if("no"===o)return i;r&&i.sort(function(e,t){return e-t});var l=function(e){if(0===e.length)return"";for(var t=[],n=0,r=function(r){return r===n+1?t.push(e[n].toString()):r===n+2&&r<10?t.push("".concat(e[n],",").concat(e[n+1])):t.push("".concat(e[n],"+").concat(r-n-1)),r},a=1;a<e.length;a++){var o=e[a-1]+1;e[a]!==o&&(n=r(a),n=a)}return r(e.length),t.join(",")}(i),s=JSON.stringify(i).length,c=l.length+2;return c<.6*s||s-c>50||"yes"===o&&c<s?l:i}function $t(e,t){return t.color&&(e.color=t.color),e}var Gt={exports:{}};!function(e){var t=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function a(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(n){return a(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,a=t.length;r<a;r++){var i=t.charCodeAt(r);n[2*r]=i>>>8,n[2*r+1]=i%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,a=n.length;r<a;r++)n[r]=256*t[2*r]+t[2*r+1];var i=[];return n.forEach(function(t){i.push(e(t))}),o.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return a(n,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,a,o,i={},l={},s="",c="",u="",d=2,m=3,f=2,h=[],p=0,y=0;for(o=0;o<e.length;o+=1)if(s=e.charAt(o),Object.prototype.hasOwnProperty.call(i,s)||(i[s]=m++,l[s]=!0),c=u+s,Object.prototype.hasOwnProperty.call(i,c))u=c;else{if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)p<<=1,y==t-1?(y=0,h.push(n(p)),p=0):y++;for(a=u.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a>>=1}else{for(a=1,r=0;r<f;r++)p=p<<1|a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a>>=1}0==--d&&(d=Math.pow(2,f),f++),delete l[u]}else for(a=i[u],r=0;r<f;r++)p=p<<1|1&a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a>>=1;0==--d&&(d=Math.pow(2,f),f++),i[c]=m++,u=String(s)}if(""!==u){if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)p<<=1,y==t-1?(y=0,h.push(n(p)),p=0):y++;for(a=u.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a>>=1}else{for(a=1,r=0;r<f;r++)p=p<<1|a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a>>=1}0==--d&&(d=Math.pow(2,f),f++),delete l[u]}else for(a=i[u],r=0;r<f;r++)p=p<<1|1&a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(a=2,r=0;r<f;r++)p=p<<1|1&a,y==t-1?(y=0,h.push(n(p)),p=0):y++,a>>=1;for(;;){if(p<<=1,y==t-1){h.push(n(p));break}y++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var a,o,i,l,s,c,u,d=[],m=4,f=4,h=3,p="",y=[],v={val:r(0),position:n,index:1};for(a=0;a<3;a+=1)d[a]=a;for(i=0,s=Math.pow(2,2),c=1;c!=s;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(l>0?1:0)*c,c<<=1;switch(i){case 0:for(i=0,s=Math.pow(2,8),c=1;c!=s;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(l>0?1:0)*c,c<<=1;u=e(i);break;case 1:for(i=0,s=Math.pow(2,16),c=1;c!=s;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(l>0?1:0)*c,c<<=1;u=e(i);break;case 2:return""}for(d[3]=u,o=u,y.push(u);;){if(v.index>t)return"";for(i=0,s=Math.pow(2,h),c=1;c!=s;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(l>0?1:0)*c,c<<=1;switch(u=i){case 0:for(i=0,s=Math.pow(2,8),c=1;c!=s;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(l>0?1:0)*c,c<<=1;d[f++]=e(i),u=f-1,m--;break;case 1:for(i=0,s=Math.pow(2,16),c=1;c!=s;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(l>0?1:0)*c,c<<=1;d[f++]=e(i),u=f-1,m--;break;case 2:return y.join("")}if(0==m&&(m=Math.pow(2,h),h++),d[u])p=d[u];else{if(u!==f)return null;p=o+o.charAt(0)}y.push(p),d[f++]=o+p.charAt(0),o=p,0==--m&&(m=Math.pow(2,h),h++)}}};return o}();null!=e&&(e.exports=t)}(Gt);var Jt=Gt.exports;function Qt(e){return Array.from(e.classList).find(function(e){return e.startsWith("root-")}).slice(5)}function Xt(e,t){var n,r;return null!==(r=null===(n=e.querySelector("titleTextStyle-".concat(t)))||void 0===n?void 0:n.textContent)&&void 0!==r?r:"UpSetJS"}function Yt(e,t){var n,r;return null!==(r=null===(n=e.querySelector("descTextStyle-".concat(t)))||void 0===n?void 0:n.textContent)&&void 0!==r?r:""}var Zt={},en=[],tn={setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px",description:"16px",title:"24px",valueLabel:"12px",exportLabel:"10px"},nn=[.18,.12,.7],rn=[.6,.4],an={type:"intersection",order:["cardinality:desc","name:asc"]},on=Object.keys(tn),ln=["axisTick","bar","barLabel","chartLabel","dot","legend","title","description","setLabel","set","valueLabel"],sn=["dump","png","share","svg","vega"],cn=[.7,.4],un=[.15,.3],dn={selectionColor:"#ffa500",color:"#000000",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!1},mn={selectionColor:"#ffa500",color:"#cccccc",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"rgba(255, 255, 255, 0.2)",valueTextColor:"#ffffff",strokeColor:"#ffffff",backgroundColor:"#303030",filled:!1},fn={selectionColor:"#4c78a8",color:"#4c78a8",hasSelectionColor:"#c9d6e5",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!0};function hn(e){return"vega"===e?fn:"dark"===e?mn:dn}function pn(e){return We.createElement("style",null,e)}function yn(e){return function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=hn(t.theme);return Object.assign(e,{queryLegend:null!=t.queries&&t.queries.length>0,theme:"light",padding:20,selection:null,title:"",description:"",fontFamily:"sans-serif",queries:en,exportButtons:!0,className:"",fontSizes:tn,classNames:Zt,style:Zt,styles:Zt,toKey:Ct,tooltips:!0,styleFactory:pn},r,t,n,t.fontSizes?{fontSizes:Object.assign({},tn,t.fontSizes)}:Zt)}({barPadding:.3,dotPadding:.7,combinations:an,combinationName:null==e.combinations||(t=e.combinations,Array.isArray(t))||"union"!==e.combinations.type?"Intersection Size":"Union Size",barLabelOffset:2,setNameAxisOffset:"auto",combinationNameAxisOffset:"auto",setName:"Set Size",widthRatios:nn,heightRatios:rn,setLabelAlignment:"center",numericScale:"linear",bandScale:"band",childrenFactories:Zt,setAddons:en,combinationAddons:en,setAddonPadding:1,combinationAddonPadding:1,emptySelection:!0},e);var t}(e)}function vn(e,t){var n=e.cloneNode(!0);return n.style.backgroundColor=hn(e.dataset.theme).backgroundColor,t&&Array.from(n.querySelectorAll(t)).forEach(function(e){return e.remove()}),(new XMLSerializer).serializeToString(n)}function gn(e,t,n){var r=n.createElement("a");r.href=e,r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.download=t,n.body.appendChild(r),r.click(),r.remove()}var _n=["bandScale","numericScale"].concat(["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor","hasSelectionColor","hasSelectionOpacity","opacity","strokeColor","valueTextColor"],["padding","barPadding","dotPadding","widthRatios","heightRatios"],["fontSizes","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","theme","fontFamily","emptySelection","exportButtons","queryLegend"]);function bn(e){var t,n=yn({width:0,height:0,sets:null!==(t=e.sets)&&void 0!==t?t:[],combinations:e.combinations,theme:e.theme}),r={};return _n.forEach(function(t){var a=e[t],o=n[t];if("theme"!==t||"light"===a){if(null!=a&&a!==o)if("fontSizes"===t){var i=!0,l={};on.forEach(function(e){var t=a[e];t!==o[e]&&(l[e]=t,i=!1)}),i||(r[t]=l)}else r[t]=a}else r[t]=a}),r}function xn(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,i=[],l=new Map,s=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({sortAble:!0},n),a=null!==(t=n.toKey)&&void 0!==t?t:Ct,o=new Map(e.sets.map(function(e,t){return[a(e),t]})),i=new Map(e.combinations.map(function(e,t){return[a(e),t]})),l=function(t){if("set"===t.type)return{type:t.type,index:o.get(a(t))};var n=i.get(a(t));return null==n||n<0?Vt(t.elems,e.toElemIndex,r):{type:t.type,index:n}},s=e.sets.map(function(e,t){return{key:a(e),i:t}});return{sets:e.sets.map(function(t){return $t({name:t.name,cardinality:t.cardinality,elems:Vt(t.elems,e.toElemIndex,r)},t)}),combinations:"no"===n.compress?e.combinations.map(function(t){var n=new Set(Array.from(t.sets).map(a));return $t({name:t.name,type:t.type,cardinality:t.cardinality,degree:t.degree,sets:s.filter(function(e){var t=e.key;return n.has(t)}).map(function(e){return e.i}),elems:Vt(t.elems,e.toElemIndex,r)},t)}):void 0,combinationOptions:e.combinationOptions,selection:e.selection?Array.isArray(e.selection)?Vt(e.selection,e.toElemIndex,r):l(e.selection):void 0,queries:e.queries.map(function(t){var n=Qe(t)?l(t.set):Vt(Array.from(t.elems),e.toElemIndex,r);return{name:t.name,color:t.color,set:"string"==typeof n||Array.isArray(n)?void 0:n,elems:"string"==typeof n||Array.isArray(n)?n:void 0}})}}({sets:e.sets,queries:null!==(r=null===(n=e.queries)||void 0===n?void 0:n.filter(function(e){return Ge(e)||Qe(e)}))&&void 0!==r?r:[],toElemIndex:function(e){return l.has(e)?l.get(e):(l.set(e,i.length),i.push(e),i.length-1)},selection:e.selection&&nt(e.selection)?e.selection:void 0,combinations:t.cs.v,combinationOptions:Array.isArray(e.combinations)?{}:e.combinations},{compress:a?"yes":"no"});return function(e,t,n,r,a){return Object.assign({$schema:"https://upset.js.org/schema.1.0.0.json",name:"string"==typeof n.title?n.title:"UpSetJS",description:"string"==typeof n.description?n.description:"",mode:a,author:r,elements:t,attrs:[],props:bn(n)},e)}(s,i,e,void 0,o)}function Sn(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,i=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!==(t=n.toKey)&&void 0!==t?t:Ct,a=new Map(e.sets.map(function(e,t){return[r(e),t]})),o=new Map(e.combinations.map(function(e,t){return[r(e),t]})),i=function(t){if(nt(t)){if("set"===t.type)return{type:t.type,index:a.get(r(t))};var n=o.get(r(t));if(null!=n&&n>=0)return{type:t.type,index:n}}var i=Ve(nt(t)?t.elems:t);return e.sets.map(function(e){return i(e.elems).intersection}).concat(e.combinations.map(function(e){return i(e.elems).intersection}))},l=new Map(e.sets.map(function(e,t){return[r(e),t]})),s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.toElemKey,a=n.what,o=void 0===a?"intersection":a,i=n.compress,l=void 0===i?"auto":i,s=e.concat(t),c=s.map(function(e,t){for(var n=function(e){if(e.overlap)return e.overlap;var t=Ve(e.elems,r);return function(n){return n.overlap?n.overlap(e):t(n.elems)[o]}}(e),a=[],i=t+1;i<s.length;i++)a.push(n(s[i]));return a});if(c.pop(),"no"===l)return c;var u=function(e){if(0===e.length)return"";var t=e.length,n=e.flat();return"".concat(t,";").concat(function(e){if(0===e.length)return"";for(var t=[],n=e[0],r=1,a=1;a<e.length;a++){var o=e[a];o===n?r++:(r>1?t.push("".concat(n,"=").concat(r-1)):0===n?t.push(""):t.push(n.toString()),n=o,r=1)}return r>1?t.push("".concat(n,"=").concat(r)):0===n?t.push(""):t.push(n.toString()),t.join(",")}(n))}(c);if("yes"===l)return u;var d=JSON.stringify(c).length;return u.length+2<.6*d?u:c}(e.sets,e.combinations,n),c="yes"===n.compress;return{sets:c?e.sets.map(function(e){return{n:e.name,cc:e.color,c:e.cardinality}}):e.sets.map(function(e){return $t({name:e.name,cardinality:e.cardinality},e)}),combinations:c?e.combinations.map(function(t){var n,a,o=Array.from(t.sets).map(function(e){return l.get(r(e))}).sort(function(e,t){return e-t}),i={c:t.cardinality,s:o.reduce(function(e,t){return e+Math.pow(2,t)},0)};return t.name!==(n=o.map(function(t){return e.sets[t]}),a=t.type,1===n.length?n[0].name:"(".concat(n.map(function(e){return e.name}).join(dt[a]),")"))&&(i.n=t.name),"intersection"!==t.type&&(i.type=t.type[0]),t.color&&(i.cc=t.color),i}):e.combinations.map(function(e){return $t({name:e.name,cardinality:e.cardinality,type:e.type,sets:Array.from(e.sets).map(function(e){return l.get(r(e))}).sort(function(e,t){return e-t})},e)}),overlaps:s,selection:e.selection?i(e.selection):void 0,queries:e.queries.map(function(t){if(Qe(t)){var n=i(t.set);return Array.isArray(n)?{name:t.name,color:t.color,overlaps:n}:{name:t.name,color:t.color,set:n}}var r=Ve(t.elems),a=e.sets.map(function(e){return r(e.elems).intersection}).concat(e.combinations.map(function(e){return r(e.elems).intersection}));return{name:t.name,color:t.color,overlaps:a}})}}({sets:e.sets,queries:null!==(r=null===(n=e.queries)||void 0===n?void 0:n.filter(function(e){return Ge(e)||Qe(e)}))&&void 0!==r?r:[],selection:e.selection&&nt(e.selection)?e.selection:void 0,combinations:t.cs.v},{compress:a?"yes":"no"});return function(e,t,n,r){return Object.assign({$schema:"https://upset.js.org/schema-static.1.0.0.json",name:"string"==typeof t.title?t.title:"UpSetJS",description:"string"==typeof t.description?t.description:"",mode:r,author:n,props:bn(t)},e)}(i,e,void 0,o)}function Nn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function Cn(e){return"upset-".concat(Math.random().toString(36).slice(4))}function wn(e){return null!=e&&!Array.isArray(e)}function En(e,t){var n=Ve(e,t);return function(e){return n(e.elems).intersection}}function kn(){return-1}function On(e){var t;return Array.isArray(e)?"Array(".concat(e.length,")"):"function"==typeof e?"?":null===(t=e)||void 0===t?void 0:t.name}function An(){return 0}function Mn(e){return null==e?10:e.endsWith("pt")?Math.floor(4/3*Number.parseInt(e,10)):Number.parseInt(e,10)}function Ln(e,t,n,r,a,o,i,l,s,u,d,m,f,h,p){var y,v,g,_=function(e){return"linear"===e?Bt:"log"===e?Wt:e}(r),b="band"===(v=a)?Tt:v,x=function(e){return Array.isArray(e)}(t)?t:_t(e,Object.assign({toElemKey:m},an,t)),S=b(x.map(d),n.cs.w,n.padding),N=x.reduce(function(e,t){return Math.max(e,t.cardinality)},0),C=null!=p?p:N,w=C>N?0:o,E=_(C,[n.cs.h,w],{orientation:"vertical",fontSizeHint:s}),k=function(e){return Math.floor(o/1.4*.7*e.length)},O=function(e){return k(E.tickFormat()(e))},A=e.reduce(function(e,t){return Math.max(e,t.cardinality)},0),M=null!=h?h:A,L=O(M),T=O(C),I=c(u);try{for(I.s();!(g=I.n()).done;){var P=g.value;if(P.scale){var j,D=P.scale.ticks(3),q=P.scale.tickFormat(),z=c(D);try{for(z.s();!(j=z.n()).done;){var F=j.value,B="number"==typeof F?q(F):null!==(y=F.label)&&void 0!==y?y:q(F.value),K=k(B);K>T&&(T=K)}}catch(e){z.e(e)}finally{z.f()}}}}catch(e){I.e(e)}finally{I.f()}var R=M>A?0:L,H=_(M,[n.sets.w,R],{orientation:"horizontal",fontSizeHint:s}),U=e.map(d),W=b(U.slice().reverse(),n.sets.h,n.padding),V=Math.min(W.bandwidth(),S.bandwidth())/2*i,$=Math.max(2,Math.min(W.bandwidth(),S.bandwidth())/2*l);return{id:f||Cn(),r:V,triangleSize:$,sets:{v:e,keys:U,rv:e.slice().reverse(),x:H,xAxisWidth:n.sets.w-R,y:function(e){return W(d(e))},max:M,bandWidth:W.bandwidth(),cy:W.bandwidth()/2+n.cs.h,format:H.tickFormat(),labelOffset:o+9+2},cs:{v:x,keys:x.map(d),x:function(e){return S(d(e))},max:C,y:E,yAxisWidth:n.cs.h-w,cx:S.bandwidth()/2,bandWidth:S.bandwidth(),format:E.tickFormat(),has:function(e,t){var n=d(t);return Array.from(e.sets).some(function(e){return d(e)===n})},labelOffset:T+9+6},toKey:d,toElemKey:m,overlapGuesser:Lt(x,kn,d)}}function Tn(e){var t=e.transform,n=e.styleId,r=e.exportButtons,a=e.exportChart;if(!r)return null;var o=0,i=[];return!0!==r&&!1===r.svg||(o+=26,i.push(We.createElement("g",{key:"svg",className:"exportButton-".concat(n),onClick:a,"data-type":"svg",transform:"translate(-".concat(o,", 0)")},We.createElement("title",null,"Download SVG Image"),We.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),We.createElement("text",{className:"exportTextStyle-".concat(n),x:13},"SVG"))),o+=2),!0!==r&&!1===r.png||(o+=26,i.push(We.createElement("g",{key:"png",className:"exportButton-".concat(n),onClick:a,"data-type":"png",transform:"translate(-".concat(o,", 0)")},We.createElement("title",null,"Download PNG Image"),We.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),We.createElement("text",{className:"exportTextStyle-".concat(n),x:13},"PNG"))),o+=2),!0!==r&&!1===r.vega||(o+=34,i.push(We.createElement("g",{key:"vega",className:"exportButton-".concat(n),onClick:a,"data-type":"vega",transform:"translate(-".concat(o,", 0)")},We.createElement("title",null,"Download VEGA-Lite Specification"),We.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),We.createElement("text",{className:"exportTextStyle-".concat(n),x:17},"VEGA"))),o+=2),!0!==r&&!1===r.dump||(o+=34,i.push(We.createElement("g",{key:"dump",className:"exportButton-".concat(n),onClick:a,"data-type":"dump",transform:"translate(-".concat(o,", 0)")},We.createElement("title",null,"Download UpSet.js JSON Dump"),We.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),We.createElement("text",{className:"exportTextStyle-".concat(n),x:17},"DUMP"))),o+=2),!0!==r&&!1===r.share||(o+=42,i.push(We.createElement("g",{key:"share",className:"exportButton-".concat(n),onClick:a,"data-type":"share",transform:"translate(-".concat(o,", 0)")},We.createElement("title",null,"Open a shareable URL"),We.createElement("rect",{y:-9,width:42,height:11,rx:2,ry:2}),We.createElement("text",{className:"exportTextStyle-".concat(n),x:21},"SHARE"))),o+=2),We.createElement("g",{className:"exportButtons-".concat(n),transform:t},i)}var In=We.memo(function(e){var t=e.queries,n=e.x,r=e.style,a=e.data;return We.createElement("text",{transform:"translate(".concat(n,",4)"),style:r.styles.legend,className:Nn("legendTextStyle-".concat(r.id),r.classNames.legend)},t.map(function(e,t){var n=null;return Qe(e)?n=e.set.cardinality:Ge(e)&&(n=e.elems instanceof Set?e.elems.size:e.elems.length),We.createElement(We.Fragment,{key:e.name},We.createElement("tspan",{className:"fillQ".concat(t,"-").concat(a.id)},"  ⬤ "),We.createElement("tspan",null,e.name,null!=n?": ".concat(a.sets.format(n)):""))}))}),Pn=We.memo(function(e){var t=e.pos,n=e.spacing,r=e.tickSizeInner,a=e.orient,o=e.name,i=e.style,l="top"===a||"left"===a?-1:1;return We.createElement("g",{transform:"translate(0, ".concat(t+.5,")")},o&&We.createElement("text",{x:l*n,dy:"0.32em",className:Nn("axisTextStyle-".concat(i.id),"right"===a?"startText-".concat(i.id):"endText-".concat(i.id),i.classNames.axisTick),style:i.styles.axisTick},o),We.createElement("line",{x2:l*r,className:"axisLine-".concat(i.id)}))}),jn=We.memo(function(e){var t=e.pos,n=e.name,r=e.spacing,a=e.orient,o=e.tickSizeInner,i=e.style,l="top"===a||"left"===a?-1:1;return We.createElement("g",{transform:"translate(".concat(t+.5,", 0)")},n&&We.createElement("text",{y:l*r,dy:"top"===a?"0em":"0.71em",className:Nn("axisTextStyle-".concat(i.id),i.classNames.axisTick),style:i.styles.axisTick},n),We.createElement("line",{y2:l*o,className:"axisLine-".concat(i.id)}))});function Dn(e){var t=e.scale,n=e.orient,r=e.tickSizeInner,a=void 0===r?6:r,o=e.tickSizeOuter,i=void 0===o?6:o,l=e.tickPadding,s=void 0===l?3:l,c=e.size,u=e.start,d=e.style,m=e.transform,f=Math.max(a,0)+s,h=u,p=c,y="top"===n||"left"===n?-1:1,v="left"===n||"right"===n?Pn:jn,g=t.ticks().map(function(e){return"number"==typeof e?{value:e,label:e.toLocaleString()}:e});return We.createElement("g",{transform:m},g.map(function(e){return We.createElement(v,{key:e.value,pos:t(e.value),name:e.label,spacing:f,tickSizeInner:a,orient:n,style:d})}),We.createElement("path",{className:"axisLine-".concat(d.id),d:"left"===n||"right"===n?i?"M".concat(y*i,",").concat(h,"H0.5V").concat(p,"H").concat(y*i):"M0.5,".concat(h,"V").concat(p):i?"M".concat(h,",").concat(y*i,"V0.5H").concat(p,"V").concat(y*i):"M".concat(h,",0.5H").concat(p)}))}var qn=We.memo(function(e){var t=e.width,n=e.text,r=e.dy,a=e.x,o=e.style,i=e.className,s=le(null),c=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ae("string"==typeof n?[n]:[]),2),u=c[0],d=c[1];return ie(function(){d("string"==typeof n?[n]:[])},[n]),ie(function(){if(s.current&&!(s.current.childElementCount>0)&&"string"==typeof n&&"function"==typeof s.current.getComputedTextLength){for(var e=s.current.getComputedTextLength(),r=[],a=t,o=0,i=s.current.getStartPositionOfChar(0);e>a;){i.x=a;var l=s.current.getCharNumAtPosition(i),c=n.lastIndexOf(" ",l);if(c<o)break;r.push(n.slice(o,c+1)),o=c+1,a=s.current.getEndPositionOfChar(c+1).x+t}r.push(n.slice(o)),d(r)}},[s,n,t]),n?We.createElement("tspan",{ref:s,dy:r,style:o,x:a,className:i},u.length>1?u.map(function(e,t){return We.createElement("tspan",{key:e,x:0,dy:t>0?"1.2em":r},e)}):n):null}),zn=We.memo(function(e){var t=e.width,n=e.descriptionWidth,r=void 0===n?t:n,a=e.style;return a.title||a.description?We.createElement("text",null,We.createElement(qn,{text:a.title,width:t,dy:"10px",className:Nn("titleTextStyle-".concat(a.id),a.classNames.title),style:a.styles.title}),We.createElement(qn,{x:0,width:r,dy:a.title?"2em":"10px",text:a.description,className:Nn("descTextStyle-".concat(a.id),a.classNames.description),style:a.styles.description})):null});function Fn(){}function Bn(e){return e?function(t,n){return function(r){return e.call(this,t,r.nativeEvent,n.map(function(e){return e.createOnHandlerData?e.createOnHandlerData(t):null}))}}:Fn}function Kn(e,t){var n=0,r=0;return function(a){var o=0;return"before"===a.position?o=-(n+=a.size+t):(o=e+r+t,r+=a.size+t),o}}function Rn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fill";return t?e?Object.assign(i({},n,t),e):t?i({},n,t):void 0:e}var Hn=We.memo(function(e){var t=e.size,n=e.style,r=e.data,a=Kn(t.sets.w+t.labels.w+t.cs.w,t.sets.addonPadding),o=Kn(t.cs.h+t.sets.h,t.cs.addonPadding),i="auto"===n.cs.offset?r.cs.labelOffset:n.cs.offset,l="auto"===n.sets.offset?r.sets.labelOffset:n.sets.offset;return We.createElement("g",null,We.createElement(zn,{style:n,width:t.cs.x-i-20}),t.cs.h>0&&We.createElement("g",{transform:"translate(".concat(t.cs.x,",").concat(t.cs.y,")"),"data-upset":"csaxis"},We.createElement(Dn,{scale:r.cs.y,orient:"left",size:t.cs.h,start:t.cs.h-r.cs.yAxisWidth,style:n}),We.createElement("line",{x1:0,x2:t.cs.w,y1:t.cs.h+1,y2:t.cs.h+1,className:"axisLine-".concat(n.id)}),We.createElement("text",{className:Nn("cChartTextStyle-".concat(n.id),n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate(".concat(-i,", ").concat(t.cs.h/2,")rotate(-90)")},n.cs.name),t.cs.addons.map(function(e){var t=o(e),r=We.createElement("text",{key:e.name,className:Nn("cChartTextStyle-".concat(n.id),n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate(".concat(-i,", ").concat(t+e.size/2,")rotate(-90)")},e.name);return e.scale?We.createElement(We.Fragment,{key:e.name},We.createElement(Dn,{scale:e.scale,orient:"left",size:e.size,start:0,style:n,transform:"translate(0,".concat(t,")")}),r):r})),t.sets.w>0&&We.createElement("g",{transform:"translate(".concat(t.sets.x,",").concat(t.sets.y,")"),"data-upset":"setaxis"},We.createElement(Dn,{scale:r.sets.x,orient:"bottom",size:t.sets.w,start:t.sets.w-r.sets.xAxisWidth,transform:"translate(0, ".concat(t.sets.h,")"),style:n}),We.createElement("text",{className:Nn("sChartTextStyle-".concat(n.id),n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate(".concat(t.sets.w/2,", ").concat(t.sets.h+l,")")},n.sets.name),t.sets.addons.map(function(e){var r=a(e),o=We.createElement("text",{key:e.name,className:Nn("sChartTextStyle-".concat(n.id),n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate(".concat(r+e.size/2,", ").concat(t.sets.h+l,")")},e.name);return e.scale?We.createElement(We.Fragment,{key:e.name},We.createElement(Dn,{scale:e.scale,orient:"bottom",size:e.size,start:0,transform:"translate(".concat(r,", ").concat(t.sets.h,")"),style:n}),o):o})))}),Un=We.memo(function(e){var t=e.cx,n=e.r,r=e.cy,a=e.name,o=e.className,i=e.style,l=e.fill;return We.createElement("circle",{r:n,cx:t,cy:r,className:o,style:Rn(i,l)},a&&We.createElement("title",null,a))});function Wn(e,t,n){for(var r=[n(e)],a=0;a<un.length&&e>t;a++)e-=t,r.push(n(e));return r}var Vn=We.memo(function(e){var t=e.d,n=e.h,r=e.className,a=e.data,o=e.size,i=e.style,l=e.children,s=Wn(t.cardinality,a.cs.max,a.cs.y),c=Kn(o.cs.h+o.sets.h,o.cs.addonPadding);return We.createElement("g",{transform:"translate(".concat(a.cs.x(t),", 0)"),onMouseEnter:n.onMouseEnter(t,o.cs.addons),onMouseLeave:n.onMouseLeave,onClick:n.onClick(t,o.cs.addons),onContextMenu:n.onContextMenu(t,o.cs.addons),onMouseMove:n.onMouseMove(t,o.cs.addons),className:r,"data-cardinality":t.cardinality},i.tooltips&&We.createElement("title",null,t.name,": ",a.cs.format(t.cardinality)),We.createElement("rect",{y:-o.cs.before,width:a.cs.bandWidth,height:o.sets.h+o.cs.h+o.cs.before+o.cs.after,className:"hoverBar-".concat(i.id)}),o.cs.h>0&&We.createElement(We.Fragment,null,s.map(function(e,n){var r=n>0?Math.floor(a.cs.bandWidth*un[n-1]):0;return We.createElement("rect",{key:n,x:r,y:e,height:o.cs.h-e,width:a.cs.bandWidth-2*r,className:Nn("fillPrimary-".concat(i.id),n<s.length-1&&"fillOverflow".concat(s.length-1-n,"-").concat(i.id),i.classNames.bar),style:Rn(i.styles.bar,t.color)})}),We.createElement("text",{y:s[0]-i.barLabelOffset,x:a.cs.bandWidth/2,style:i.styles.barLabel,className:Nn("cBarTextStyle-".concat(i.id),i.classNames.barLabel)},a.cs.format(t.cardinality))),We.createElement("text",{y:-i.barLabelOffset-o.cs.before,x:a.cs.bandWidth/2,style:i.styles.barLabel,className:Nn("hoverBarTextStyle-".concat(i.id),i.classNames.barLabel)},t.name),a.sets.v.map(function(e,n){return a.cs.has(t,e)?null:We.createElement(Un,{key:a.sets.keys[n],r:a.r,cx:a.cs.cx,cy:a.sets.y(e)+a.sets.cy,name:i.tooltips?t.name:"",style:i.styles.dot,fill:void 0,className:Nn("fillNotMember-".concat(i.id),i.classNames.dot)})}),t.sets.size>1&&We.createElement("line",{x1:a.cs.cx,y1:a.sets.y(a.sets.v.find(function(e){return a.cs.has(t,e)}))+a.sets.cy-(a.r-1),x2:a.cs.cx,y2:a.sets.y(a.sets.rv.find(function(e){return a.cs.has(t,e)}))+a.sets.cy+(a.r-1),style:t.color?{stroke:t.color}:void 0,className:"upsetLine-".concat(a.id)}),a.sets.v.map(function(e,n){var r;return a.cs.has(t,e)?We.createElement(Un,{key:a.sets.keys[n],r:a.r,cx:a.cs.cx,cy:a.sets.y(e)+a.sets.cy,name:i.tooltips?e.name:"",style:i.styles.dot,fill:null!==(r=e.color)&&void 0!==r?r:t.color,className:Nn("fillPrimary-".concat(i.id),i.classNames.dot)}):null}),o.cs.addons.map(function(e){return We.createElement("g",{key:e.name,transform:"translate(0,".concat(c(e),")")},e.render({set:t,width:a.cs.bandWidth,height:e.size,theme:i.theme}))}),l)}),$n=We.memo(function(e){var t=e.d,n=e.i,r=e.h,a=e.className,o=e.size,i=e.data,l=e.style,s=e.children,c=Wn(t.cardinality,i.sets.max,i.sets.x),u=Kn(o.sets.w+o.labels.w+o.cs.w,o.sets.addonPadding),d="center"===l.setLabelAlignment?o.labels.w/2:"left"===l.setLabelAlignment?2:o.labels.w-2;return We.createElement("g",{transform:"translate(0, ".concat(i.sets.y(t),")"),onMouseEnter:r.onMouseEnter(t,o.sets.addons),onMouseLeave:r.onMouseLeave,onClick:r.onClick(t,o.sets.addons),onContextMenu:r.onContextMenu(t,o.sets.addons),onMouseMove:r.onMouseMove(t,o.sets.addons),className:a,"data-cardinality":t.cardinality},l.tooltips&&We.createElement("title",null,t.name,": ",i.sets.format(t.cardinality)),We.createElement("rect",{x:-o.sets.before,width:o.sets.w+o.labels.w+o.cs.w+o.sets.after,height:i.sets.bandWidth,className:"hoverBar-".concat(l.id)}),n%2==1&&We.createElement("rect",{x:o.sets.w,width:o.labels.w+o.cs.w+o.sets.after,height:i.sets.bandWidth,className:"fillAlternating-".concat(l.id)}),o.sets.w>0&&We.createElement(We.Fragment,null,c.map(function(e,n){var r=n>0?Math.floor(i.sets.bandWidth*un[n-1]):0;return We.createElement("rect",{key:n,x:e,y:r,width:o.sets.w-e,height:i.sets.bandWidth-2*r,className:Nn("fillPrimary-".concat(l.id),n<c.length-1&&"fillOverflow".concat(c.length-1-n,"-").concat(l.id),l.classNames.bar),style:Rn(l.styles.bar,t.color)})}),We.createElement("text",{x:c[0],dx:-l.barLabelOffset,y:i.sets.bandWidth/2,style:l.styles.barLabel,className:Nn("sBarTextStyle-".concat(l.id),l.classNames.barLabel)},i.sets.format(t.cardinality))),We.createElement("text",{x:o.sets.w+d,y:i.sets.bandWidth/2,className:Nn("setTextStyle-".concat(l.id),l.classNames.setLabel),style:l.styles.setLabel,clipPath:"url(#clip-".concat(o.id,")")},t.name),o.sets.addons.map(function(e){return We.createElement("g",{key:e.name,transform:"translate(".concat(u(e),",0)")},e.render({set:t,width:e.size,height:i.sets.bandWidth,theme:l.theme}))}),s)}),Gn=We.memo(function(e){var t=e.data,n=e.size,r=e.style,a=e.h,o=e.setChildrenFactory,i=e.combinationChildrenFactory;return We.createElement("g",{className:a.hasClick?"clickAble-".concat(r.id):void 0},We.createElement("g",{transform:"translate(".concat(n.sets.x,",").concat(n.sets.y,")"),"data-upset":"sets"},t.sets.v.map(function(e,i){return We.createElement($n,{key:t.sets.keys[i],d:e,i,h:a,className:a.hasClick||a.hasHover?"interactive-".concat(r.id):void 0,data:t,style:r,size:n},o&&o(e))})),We.createElement("g",{transform:"translate(".concat(n.cs.x,",").concat(n.cs.y,")"),"data-upset":"cs"},t.cs.v.map(function(e,o){return We.createElement(Vn,{key:t.cs.keys[o],d:e,h:a,className:a.hasClick||a.hasHover?"interactive-".concat(r.id):void 0,data:t,style:r,size:n},i&&i(e))})))});function Jn(e){var t=e.data,n=e.size,r=e.style,a=e.elemOverlap,o=e.secondary,i=e.tooltip,l=e.suffix,s=e.transform,c=e.empty,u=e.combinationAddons,d=t.cs.bandWidth,m=n.cs.h+n.sets.h,f=n.cs.h,h=Nn("fill".concat(l),!i&&"pnone-".concat(r.id),r.classNames.bar);return We.createElement("g",{transform:s,"data-upset":o?"cs-q":"cs-s"},t.cs.v.map(function(e,l){var s=t.cs.x(e),p=t.cs.keys[l];if(c&&!o)return We.createElement("rect",{key:p,x:s,y:f,height:0,width:d,className:h,style:Rn(r.styles.bar,r.selectionColor?void 0:e.color)},i&&We.createElement("title",null));var y=a(e);if(0===y)return null;var v=Wn(y,t.cs.max,t.cs.y),g=i&&We.createElement("title",null,"".concat(e.name," ∩ ").concat(i,": ").concat(y)),_=o?We.createElement("path",{key:p,transform:"translate(".concat(s,", ").concat(v[0],")"),d:"M0,-1 l".concat(d,",0 l0,2 l").concat(-d,",0 L-").concat(t.triangleSize,",-").concat(t.triangleSize," L-").concat(t.triangleSize,",").concat(t.triangleSize," Z"),className:h,"data-i":l,"data-cardinality":y,style:Rn(void 0,r.selectionColor?void 0:e.color)},g):v.map(function(n,a){var o=a>0?Math.floor(t.cs.bandWidth*un[a-1]):0;return We.createElement("rect",{key:a,x:s+o,y:n,height:f-n,width:d-2*o,"data-i":a>0?null:l,"data-cardinality":a>0?null:y,className:Nn(h,a<v.length-1&&"fillOverflow".concat(v.length-1-a,"-").concat(r.id)),style:Rn(r.styles.bar,r.selectionColor?void 0:e.color)},g)}),b=Kn(m,n.cs.addonPadding),x=u.map(function(t){var n=b(t),a=t.render({set:e,width:d,height:t.size,theme:r.theme});return a?We.createElement("g",{key:t.name,transform:"translate(".concat(s,",").concat(n,")")},a):null}).filter(Boolean);return 0===x.length?_:We.createElement("g",{key:p},_,x)}))}function Qn(e){var t=e.data,n=e.size,r=e.style,a=e.elemOverlap,o=e.suffix,i=e.secondary,l=e.empty,s=e.tooltip,c=e.setAddons,u=e.transform,d=n.sets.w,m=n.sets.w+n.labels.w+n.cs.w,f=t.sets.bandWidth,h=Nn("fill".concat(o),!s&&" pnone-".concat(r.id),r.classNames.bar);return We.createElement("g",{transform:u,"data-upset":i?"sets-q":"sets-s"},t.sets.v.map(function(e,o){var u=t.sets.y(e),p=t.sets.keys[o];if(l&&!i)return We.createElement("rect",{key:p,x:d,y:u,width:0,height:f,className:h,style:Rn(r.styles.bar,r.selectionColor?void 0:e.color)},r.tooltips&&s&&We.createElement("title",null));var y=a(e);if(0===y)return null;var v=Wn(y,t.sets.max,t.sets.x),g=r.tooltips&&s&&We.createElement("title",null,"".concat(e.name," ∩ ").concat(s,": ").concat(y)),_=i?We.createElement("path",{key:p,transform:"translate(".concat(v[0],", ").concat(u+f,")"),d:"M1,0 l0,".concat(-f," l-2,0 l0,").concat(f," L-").concat(t.triangleSize,",").concat(t.triangleSize," L").concat(t.triangleSize,",").concat(t.triangleSize," Z"),"data-i":o,"data-cardinality":y,className:h,style:Rn(void 0,r.selectionColor?void 0:e.color)},g):v.map(function(n,a){var i=a>0?Math.floor(t.sets.bandWidth*un[a-1]):0;return We.createElement("rect",{key:a,"data-i":a>0?null:o,"data-cardinality":a>0?null:y,x:n,y:u+i,width:d-n,height:f-2*i,className:Nn(h,a<v.length-1&&"fillOverflow".concat(v.length-1-a,"-").concat(r.id)),style:Rn(r.styles.bar,r.selectionColor?void 0:e.color)},g)}),b=Kn(m,n.sets.addonPadding),x=c.map(function(t){var n=b(t),a=t.render({set:e,width:t.size,height:f,theme:r.theme});return a?We.createElement("g",{key:t.name,transform:"translate(".concat(n,",").concat(u,")")},a):null}).filter(Boolean);return 0===x.length?_:We.createElement("g",{key:p},_,x)}))}var Xn=[],Yn=We.memo(function(e){var t=e.size,n=e.data,r=e.style,a=e.hasHover,o=e.secondary,i=e.queries,l=t.sets.addons.some(function(e){return null!=e.renderQuery})||t.cs.addons.some(function(e){return null!=e.renderQuery}),s=se(function(){return i.map(function(e){return Object.assign(Object.assign({},e),{overlap:Xe(e,"intersection",n.toElemKey),elemOverlap:l?Ye(e,"intersection",n.toElemKey):null})})},[i,l,n.toElemKey]);function c(e,t,n,r,a){return Object.assign(Object.assign({},e),{render:function(o){var i=r(o.set);return e.renderQuery?e.renderQuery(Object.assign({query:t,overlap:i,index:n,secondary:a},o)):null}})}return We.createElement("g",{className:a&&!o?"pnone-".concat(r.id):void 0},We.createElement("g",{transform:"translate(".concat(t.sets.x,",").concat(t.sets.y,")")},s.map(function(e,i){return We.createElement(Qn,{key:e.name,data:n,size:t,style:r,elemOverlap:e.overlap,suffix:"Q".concat(i,"-").concat(n.id),secondary:o||i>0,tooltip:a&&!(o||i>0)?void 0:e.name,setAddons:0===t.sets.addons.length?Xn:t.sets.addons.map(function(t,n){return c(t,e,n,e.elemOverlap,o||n>0)})})})),We.createElement("g",{transform:"translate(".concat(t.cs.x,",").concat(t.cs.y,")")},s.map(function(e,i){return We.createElement(Jn,{key:e.name,data:n,size:t,style:r,elemOverlap:e.overlap,suffix:"Q".concat(i,"-").concat(n.id),secondary:o||i>0,tooltip:a&&!(o||i>0)?void 0:e.name,combinationAddons:0===t.cs.addons.length?Xn:t.cs.addons.map(function(t,n){return c(t,e,n,e.elemOverlap,o||n>0)})})})))});function Zn(e){var t=e.data,n=e.size,r=e.style,a=e.selection;if(!a||"set"!==a.type||!t.sets.keys.includes(t.toKey(a)))return null;var o=a;return We.createElement("rect",{y:t.sets.y(o),width:n.labels.w+n.cs.w+n.sets.after,height:t.sets.bandWidth,className:"selectionHint-".concat(r.id)})}function er(e){var t=e.data,n=e.size,r=e.style,a=e.selection,o=t.sets.bandWidth/2,i=t.cs.cx,l=t.r,s=n.sets.h+n.sets.after,c=t.cs.bandWidth;if(!a||"set"===a.type||!t.cs)return null;var u=a,d=t.cs.keys.indexOf(t.toKey(u));return d<0?null:We.createElement("g",{transform:"translate(".concat(n.labels.w+t.cs.x(u),", 0)"),"data-upset":"cs-ss","data-i":d},We.createElement("rect",{width:c,height:s,className:"selectionHint-".concat(r.id)}),u.sets.size>1&&We.createElement("line",{x1:i,y1:t.sets.y(t.sets.v.find(function(e){return t.cs.has(u,e)}))+o-(t.r-1),x2:i,y2:t.sets.y(t.sets.rv.find(function(e){return t.cs.has(u,e)}))+o+(t.r-1),className:"upsetSelectionLine-".concat(t.id),style:Rn(void 0,r.selectionColor?void 0:u.color,"stroke")}),t.sets.v.filter(function(e){return t.cs.has(u,e)}).map(function(e){return We.createElement(Un,{key:t.toKey(e),r:1.1*l,cx:i,cy:t.sets.y(e)+o,name:r.tooltips?e.name:"",className:Nn("fillSelection-".concat(r.id),"pnone-".concat(r.id),r.classNames.dot),style:Rn(r.styles.dot,r.selectionColor?void 0:e.color)})}))}var tr=[];function nr(e){var t=e.size,n=e.data,r=e.style,a=e.selection,o=e.hasHover,i=r.emptySelection,l=function(e,t,n){if(!e)return An;if("function"==typeof e)return e;if(Array.isArray(e))return En(e,n);var r=e;if(r.overlap)return r.overlap.bind(r);var a=null;return function(e){if(e.overlap)return e.overlap(r);var o=t(e,r);return o>=0?o:(a||(a=En(r.elems,n)),a(e))}}(a,n.overlapGuesser,n.toElemKey),s=On(a),c=t.sets.addons.some(function(e){return null!=e.renderSelection})||t.cs.addons.some(function(e){return null!=e.renderSelection}),u=a&&"function"!=typeof a&&c?function(e,t){var n=$e(e,t);return function(e){return n(e.elems).intersection}}(Array.isArray(a)?a:a.elems,n.toElemKey):null;function d(e){return Object.assign(Object.assign({},e),{render:function(t){var n=u?u(t.set):null;return e.renderSelection?e.renderSelection(Object.assign({selection:a,selectionColor:r.selectionColor||t.set.color||"orange",overlap:n},t)):null}})}return We.createElement("g",{className:o?"pnone-".concat(r.id):void 0},(a||i)&&We.createElement(Jn,{data:n,size:t,style:r,transform:"translate(".concat(t.cs.x,",").concat(t.cs.y,")"),empty:i&&!a,elemOverlap:l,suffix:"Selection-".concat(r.id),tooltip:o?void 0:s,combinationAddons:0===t.cs.addons.length?tr:t.cs.addons.map(d)}),(a||i)&&We.createElement(Qn,{data:n,size:t,style:r,transform:"translate(".concat(t.sets.x,",").concat(t.sets.y,")"),empty:i&&!a,elemOverlap:l,suffix:"Selection-".concat(r.id),tooltip:o?void 0:s,setAddons:0===t.sets.addons.length?tr:t.sets.addons.map(d)}),We.createElement("g",{transform:"translate(".concat(t.labels.x,",").concat(t.labels.y,")")},wn(a)&&We.createElement(Zn,{data:n,size:t,style:r,selection:a}),wn(a)&&We.createElement(er,{data:n,size:t,style:r,selection:a})))}function rr(e){return e?"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"font-size",": ").concat(e,";"):""}var ar=We.forwardRef(function(e,t){var n,r=yn(e),a=r.selection,o=void 0===a?null:a,i=r.queries,l=void 0===i?[]:i,s=r.fontSizes,c=se(function(){return r.id?r.id:Cn((r.fontFamily,s.axisTick,s.barLabel,s.chartLabel,s.legend,s.setLabel,s.title,s.exportLabel,s.description,r.textColor,r.hoverHintColor,r.color,r.hasSelectionColor,r.selectionColor,r.notMemberColor,r.alternatingBackgroundColor,r.opacity,r.hasSelectionOpacity))},[r.id,r.fontFamily,s.axisTick,s.barLabel,s.chartLabel,s.legend,s.setLabel,s.title,s.exportLabel,s.description,r.textColor,r.hoverHintColor,r.color,r.hasSelectionColor,r.selectionColor,r.notMemberColor,r.alternatingBackgroundColor,r.opacity,r.hasSelectionOpacity]),u=se(function(){return function(e,t,n,r,a,o,i,l,s,c,u,d,m,f,h){return{theme:e,styles:t,classNames:n,cs:{name:r,offset:a},sets:{name:o,offset:i},emptySelection:u,id:l,barLabelOffset:s,selectionColor:c,title:d,description:m,tooltips:f,setLabelAlignment:h}}(r.theme,r.styles,r.classNames,r.combinationName,r.combinationNameAxisOffset,r.setName,r.setNameAxisOffset,c,r.barLabelOffset,r.selectionColor,r.emptySelection,r.title,r.description,r.tooltips,r.setLabelAlignment)},[r.theme,r.styles,r.classNames,r.barLabelOffset,r.combinationName,r.combinationNameAxisOffset,r.setName,r.setNameAxisOffset,c,r.selectionColor,r.emptySelection,r.title,r.description,r.tooltips,r.setLabelAlignment]),d=se(function(){return function(e,t,n,r,a,o,i,l,s,c,u){var d=i.reduce(function(e,t){return e+("before"===t.position?t.size+c:0)},0),m=i.reduce(function(e,t){return e+("before"!==t.position?t.size+c:0)},0),f=l.reduce(function(e,t){return e+("before"===t.position?t.size+c:0)},0),h=l.reduce(function(e,t){return e+("before"!==t.position?t.size+c:0)},0),p=t-2*n-20-h-f,y=e-2*n-d-m,v=a[0]>1?a[0]:y*a[0],g=a[1]>1?a[1]:y*a[1],_=o[0]>1?o[0]:p*o[0];return{id:s||Cn(),cs:{before:f,after:h,x:d+v+g,y:f,w:y-v-g,h:_,addons:l,addonPadding:u},labels:{x:d+v,y:f+_,w:g,h:p-_},sets:{before:d,after:m,x:d,y:f+_,w:v,h:p-_,addons:i,addonPadding:c},padding:r,legend:{x:e/2},margin:n,w:e,h:t}}(r.width,r.height,r.padding,r.barPadding,r.widthRatios,r.heightRatios,r.setAddons,r.combinationAddons,r.id,r.setAddonPadding,r.combinationAddonPadding)},[r.width,r.height,r.padding,r.barPadding,r.widthRatios,r.heightRatios,r.setAddons,r.combinationAddons,r.id,r.setAddonPadding,r.combinationAddonPadding]),m=se(function(){return Ln(r.sets,r.combinations,d,r.numericScale,r.bandScale,r.barLabelOffset+Mn(s.barLabel),r.dotPadding,r.barPadding,Mn(s.axisTick),r.combinationAddons,r.toKey,r.toElemKey,r.id,r.setMaxScale,r.combinationMaxScale)},[r.sets,r.combinations,d,r.numericScale,r.bandScale,r.barLabelOffset,s.barLabel,r.dotPadding,r.barPadding,s.axisTick,r.combinationAddons,r.toKey,r.toElemKey,r.id,r.setMaxScale,r.combinationMaxScale]),f=function(e,t,n,r){var a=[];t.hasSelectionColor&&a.push("fill: ".concat(t.hasSelectionColor,";"));var o=null!=t.hasSelectionOpacity&&t.hasSelectionOpacity>=0;return o&&a.push("fill-opacity: ".concat(t.hasSelectionOpacity,";")),{p:rr,root:"\n  .root-".concat(e," {\n    ").concat(rr(n,"font-family"),"\n  }\n  "),text:"\n  .titleTextStyle-".concat(e," {\n    fill: ").concat(t.textColor,";\n    ").concat(rr(r.title),"\n  }\n  .descTextStyle-").concat(e," {\n    fill: ").concat(t.textColor,";\n    ").concat(rr(r.description),"\n  }\n\n  .legendTextStyle-").concat(e," {\n    fill: ").concat(t.textColor,";\n    ").concat(rr(r.legend),"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n    pointer-events: none;\n  }\n  "),hasSFill:a.join(" "),hasSStroke:a.join(" ").replace("fill:","stroke:").replace("fill-","stroke-"),fill:"\n  .fillPrimary-".concat(e," { fill: ").concat(t.color,"; fill-opacity: ").concat(t.opacity,"; }\n  .fillOverflow1-").concat(e," { fill-opacity: ").concat(t.opacity*cn[0],"; }\n  .fillOverflow2-").concat(e," { fill-opacity: ").concat(t.opacity*cn[1],"; }\n  ").concat(a.length>0?".root-".concat(e,"[data-selection] .fillPrimary-").concat(e," { ").concat(a.join(" ")," }"):"","\n  ").concat(o?"\n      .root-".concat(e,"[data-selection] .fillOverflow1-").concat(e," { fill-opacity: ").concat(t.opacity*cn[0],"; }\n      .root-").concat(e,"[data-selection] .fillOverflow2-").concat(e," { fill-opacity: ").concat(t.opacity*cn[1],"; }"):"","\n  ").concat(t.selectionColor?".fillSelection-".concat(e," { fill: ").concat(t.selectionColor,"; }"):"","\n  .fillTransparent-").concat(e," { fill: transparent; }\n\n  .selectionHint-").concat(e," {\n    fill: transparent;\n    pointer-events: none;\n    ").concat(rr(t.selectionColor,"stroke"),"\n  }\n  .clickAble-").concat(e," {\n    cursor: pointer;\n  }\n\n  .startText-").concat(e," {\n    text-anchor: start;\n  }\n  .endText-").concat(e," {\n    text-anchor: end;\n  }\n  .pnone-").concat(e," {\n    pointer-events: none;\n  }"),export:"\n  .exportTextStyle-".concat(e," {\n    fill: ").concat(t.textColor,";\n    ").concat(rr(r.exportLabel),"\n  }\n  .exportButtons-").concat(e," {\n    text-anchor: middle;\n  }\n  .exportButton-").concat(e," {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  .exportButton-").concat(e,":hover {\n    opacity: 1;\n  }\n  .exportButton-").concat(e," > rect {\n    fill: none;\n    stroke: ").concat(t.textColor,";\n  }\n  ")}}(c,r,r.fontFamily,s),h=function(e){var t=e.onClick;return se(function(){return{hasClick:null!=t,hasHover:null!=e.onHover,onClick:Bn(t),onMouseEnter:Bn(e.onHover),onContextMenu:Bn(e.onContextMenu),onMouseLeave:e.onHover?function(t){return e.onHover(null,t.nativeEvent,[])}:void 0,onMouseMove:Bn(e.onMouseMove),reset:function(e){return t?t(null,e.nativeEvent,[]):null}}},[t,e.onHover,e.onContextMenu,e.onMouseMove])}(r),p="\n  ".concat(f.root,"\n  ").concat(f.text,"\n\n  .axisTextStyle-").concat(c," {\n    fill: ").concat(r.textColor,";\n    ").concat(f.p(s.axisTick),"\n    text-anchor: middle;\n  }\n  .barTextStyle-").concat(c," {\n    fill: ").concat(r.textColor,";\n    ").concat(f.p(s.barLabel),"\n  }\n  .cBarTextStyle-").concat(c," {\n    fill: ").concat(r.textColor,";\n    ").concat(f.p(s.barLabel),"\n    text-anchor: middle;\n  }\n  .sBarTextStyle-").concat(c," {\n    fill: ").concat(r.textColor,";\n    ").concat(f.p(s.barLabel),"\n    text-anchor: end;\n    dominant-baseline: central;\n  }\n  .hoverBarTextStyle-").concat(c," {\n    ").concat(f.p(s.barLabel),"\n    fill: ").concat(r.hoverHintColor,";\n    display: none;\n    text-anchor: middle;\n  }\n  .setTextStyle-").concat(c," {\n    fill: ").concat(r.textColor,";\n    ").concat(f.p(s.setLabel),"\n    text-anchor: ").concat(function(e){var t;return null!==(t={left:"start",center:"middle",right:"end"}[e])&&void 0!==t?t:"middle"}(r.setLabelAlignment),";\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-").concat(c," {\n    fill: ").concat(r.textColor,";\n    ").concat(f.p(s.chartLabel),"\n    text-anchor: middle;\n  }\n  .sChartTextStyle-").concat(c," {\n    fill: ").concat(r.textColor,";\n    ").concat(f.p(s.chartLabel),"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n  }\n\n  ").concat(f.fill,"\n  .fillNotMember-").concat(c," { fill: ").concat(r.notMemberColor,"; }\n  .fillAlternating-").concat(c," { fill: ").concat(r.alternatingBackgroundColor||"transparent","; }\n\n  .axisLine-").concat(c," {\n    fill: none;\n    stroke: ").concat(r.textColor,";\n  }\n  .hoverBar-").concat(c," {\n    fill: transparent;\n  }\n\n  .interactive-").concat(c,":hover > .hoverBar-").concat(c," {\n    stroke: ").concat(r.hoverHintColor,";\n  }\n  .interactive-").concat(c,":hover > .hoverBarTextStyle-").concat(c," {\n    display: unset;\n  }\n\n  ").concat(f.export,"\n\n  .upsetLine-").concat(m.id," {\n    stroke-width: ").concat(.6*m.r,";\n    stroke: ").concat(r.color,";\n    stroke-opacity: ").concat(r.opacity,";\n  }\n  ").concat(f.hasSStroke?".root-".concat(c,"[data-selection] .upsetLine-").concat(m.id," { ").concat(f.hasSStroke," }"):"","\n\n  .upsetSelectionLine-").concat(m.id," {\n    stroke-width: ").concat(.6*m.r*1.1,";\n    ").concat(f.p(r.selectionColor,"stroke"),"\n    pointer-events: none;\n  }\n\n  ").concat(l.map(function(e,t){return".fillQ".concat(t,"-").concat(m.id," {\n    fill: ").concat(e.color,";\n  }")}).join("\n"),"\n  "),y=ce(function(t){var n=t.currentTarget.closest("svg"),r=t.currentTarget.dataset.type||"png";switch(r){case"vega":!function(e){var t=function(e,t){var n,r,a,o,i,l=null!==(a=e.getComputedStyle||(null===(r=null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.getComputedStyle))&&void 0!==a?a:window.getComputedStyle,s=Qt(e),c=null!=t?t:Xt(e,s),u=Array.from(e.querySelectorAll("[data-upset=sets] [data-cardinality]")).map(function(e){return{name:e.querySelector("text.setTextStyle-".concat(s)).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10)}}).reverse(),d=-Number.parseFloat(e.querySelector(".sBarTextStyle-".concat(s)).getAttribute("dx")),m=l(e.querySelector(".fillPrimary-".concat(s))).fill,f=l(e.querySelector(".fillNotMember-".concat(s))).fill,h=l(e.querySelector("text")).fill,p=e.querySelector(".cChartTextStyle-".concat(s)).textContent,y=e.querySelector(".sChartTextStyle-".concat(s)).textContent,v=Array.from(e.querySelectorAll("[data-upset=cs] [data-cardinality]")).map(function(e){return{name:e.querySelector("text.hoverBarTextStyle-".concat(s)).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10),sets:Array.from(e.querySelectorAll(".fillPrimary-".concat(s," > title"))).map(function(e){return e.textContent})}}),g=function(e){return Number.parseFloat(e.getAttribute("transform").match(/([\d.]+),/)[1])},_=e.querySelector("[data-upset=base]"),b=g(_),x=g(e.querySelector("[data-upset=csaxis]")),S=Number.parseFloat(_.querySelector("g").firstElementChild.children[1].getAttribute("x2")),N=function(e){return Number.parseFloat(e.getAttribute("transform").match(/,([\d.]+)/)[1])}(e.querySelector("[data-upset=setaxis]")),C=Number.parseFloat(e.querySelector("defs rect").getAttribute("width")),w=Number.parseFloat(e.querySelector("defs rect").getAttribute("height")),E=Number.parseFloat(e.querySelector("[data-cardinality] circle.fillPrimary-".concat(s)).getAttribute("r")),k=null!=e.querySelector("[data-upset=sets-s] [data-cardinality]"),O=null!=e.querySelector("[data-upset=sets-q] [data-cardinality]"),A=k||O,M="orange";A&&(Array.from(e.querySelectorAll("[data-upset=sets-".concat(k?"s]":"q]:first-of-type"," [data-cardinality]"))).forEach(function(e){var t=u.length-Number.parseInt(e.dataset.i,10)-1;u[t].selection=Number.parseInt(e.dataset.cardinality,10)}),Array.from(e.querySelectorAll("[data-upset=cs-".concat(k?"s]":"q]:first-of-type"," [data-cardinality]"))).forEach(function(e){var t=Number.parseInt(e.dataset.i,10);v[t].selection=Number.parseInt(e.dataset.cardinality,10)}),M=l(e.querySelector("[data-upset=sets-".concat(k?"s":"q","] [data-cardinality]"))).fill);var L=Number.parseInt(null!==(i=null===(o=e.querySelector("[data-upset=cs-ss]"))||void 0===o?void 0:o.dataset.i)&&void 0!==i?i:"-1",10),T=L>=0?{field:"partOf",oneOf:[1,2]}:{field:"partOf",equal:1};return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:c,description:Yt(e,s),datasets:{sets:u,combinations:v.map(function(e,t){return Object.assign({},e,{partOf:L===t?2:1,nsets:[""]})}).concat(v.map(function(e){return{name:e.name,cardinality:e.cardinality,partOf:0,sets:[""],nsets:u.filter(function(t){return!e.sets.includes(t.name)}).map(function(e){return e.name})}}))},vconcat:[{hconcat:[{mark:"bar",width:x+C-40,height:N},{width:S,height:N,data:{name:"combinations"},transform:[{filter:T}],layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"center",baseline:"bottom",dy:-d},encoding:{text:{field:"cardinality",type:"quantitative"}}},A&&{mark:{type:"bar",fill:M,tooltip:!0},encoding:{y:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null},y:{field:"cardinality",type:"quantitative",axis:{grid:!1},title:p}}}]},{hconcat:[{width:x,height:w,data:{name:"sets"},layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"right",baseline:"middle",dx:-d},encoding:{text:{field:"cardinality",type:"quantitative"}}},A&&{mark:{type:"bar",fill:M,tooltip:!0},encoding:{x:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},x:{field:"cardinality",type:"quantitative",title:y,sort:"descending",axis:{grid:!1}}}},{data:{name:"sets"},width:C,height:w,mark:{type:"text",align:"center",baseline:"middle",fontSize:Number.parseInt(l(e.querySelector(".setTextStyle-".concat(s))).fontSize,10)},encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},text:{field:"name",type:"ordinal"}}},{width:S,height:w,data:{name:"combinations"},transform:[{flatten:["sets"],as:["has_set"]},{flatten:["nsets"],as:["has_not_set"]},{calculate:"datum.has_set+datum.has_not_set",as:"set"}],layer:[{mark:{type:"circle",size:E*E*Math.PI,tooltip:!0},encoding:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[f,m].concat(L>=0?[M]:[])}},y:{field:"set",type:"ordinal",axis:null,sort:null,scale:{domain:u.map(function(e){return e.name})}}}},{mark:"rule",transform:[{filter:T},{calculate:"datum.sets[datum.sets.length -1]",as:"set_end"}],encoding:Object.assign({y:{field:"sets[0]",type:"ordinal",axis:null,sort:null},y2:{field:"set_end"}},L<0?{}:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[m,M]}}})}],encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null}}}]}],config:{padding:b,background:hn(e.dataset.theme).backgroundColor,concat:{spacing:0},view:{stroke:null},bar:{fill:m},circle:{opacity:1},rule:{stroke:m,strokeWidth:Number.parseInt(l(e.querySelector("[data-upset=cs] [data-cardinality] line")).strokeWidth,10)},axis:{labelColor:h,labelFontSize:Number.parseInt(l(e.querySelector(".axisTextStyle-".concat(s))).fontSize,10),titleColor:h,titleFontSize:Number.parseInt(l(e.querySelector(".cChartTextStyle-".concat(s))).fontSize,10)},title:{color:h},text:{fill:h,fontSize:Number.parseInt(l(e.querySelector(".sBarTextStyle-".concat(s))).fontSize,10)}}}}(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).title),n=URL.createObjectURL(new Blob([JSON.stringify(t,null,2)],{type:"application/json"}));gn(n,"".concat(t.title,".json"),e.ownerDocument),URL.revokeObjectURL(n)}(n);break;case"dump":!function(e,t,n,r){var a=xn(t,n,!1,r),o=URL.createObjectURL(new Blob([JSON.stringify(a,null,2)],{type:"application/json"}));gn(o,"".concat(a.name,".json"),e.ownerDocument),URL.revokeObjectURL(o)}(n,e,m);break;case"share":!function(e,t,n){var r=xn(e,t,!0,n);delete r.$schema;var a=Jt.compressToEncodedURIComponent(JSON.stringify(r)),o=new URL("https://upset.js.org/app/embed.html");if(o.searchParams.set("p",a),o.toString().length<4096)return window.open(o.toString(),"_blank"),!0;var i=Sn(e,t,!0,n);delete i.$schema;var l=Jt.compressToEncodedURIComponent(JSON.stringify(i));if(o.searchParams.set("p",l),o.toString().length<4096)return window.open(o.toString(),"_blank"),!0;o.searchParams.delete("p");var s=window.open(o.toString(),"_blank");null==s||s.addEventListener("load",function(){null==s||s.postMessage(r,o.origin)})}(e,m);break;case"svg":case"png":!function(e,t){var n=t.type,r=void 0===n?"png":n,a=t.title,o=t.toRemove,i=new Blob([vn(e,o)],{type:"image/svg+xml;charset=utf-8"}),l=Qt(e),s=null!=a?a:Xt(e,l),c=URL.createObjectURL(i);"svg"===r?(gn(c,"".concat(s,".").concat(r),e.ownerDocument),URL.revokeObjectURL(c),Promise.resolve()):function(e,t){var n=t.ownerDocument.createElement("canvas"),r=t.getBoundingClientRect();n.width=r.width,n.height=r.height;var a=n.getContext("2d"),o=new Image(n.width,n.height);return new Promise(function(t){o.onload=function(){a.drawImage(o,0,0);var e=n.toDataURL("image/png");t(e)},o.src=e})}(c,e).then(function(t){gn(t,"".concat(s,".").concat(r),e.ownerDocument),URL.revokeObjectURL(c)})}(n,{type:r,toRemove:".".concat(t.currentTarget.getAttribute("class"))})}},[m,e]),v=On(o);return We.createElement("svg",{id:r.id,className:Nn("root-".concat(c),r.className),style:r.style,width:r.width,height:r.height,ref:t,viewBox:"0 0 ".concat(r.width," ").concat(r.height),"data-theme":null!==(n=r.theme)&&void 0!==n?n:"light","data-selection":v||void 0},r.styleFactory(p),We.createElement("defs",null,We.createElement("clipPath",{id:"clip-".concat(d.id)},We.createElement("rect",{x:d.sets.w,y:0,width:d.labels.w,height:d.sets.h}))),r.queryLegend&&We.createElement(In,{queries:l,x:d.legend.x,style:u,data:m}),We.createElement(Tn,{transform:"translate(".concat(d.w-2,",").concat(d.h-3,")"),styleId:c,exportButtons:r.exportButtons,exportChart:y}),We.createElement("g",{transform:"translate(".concat(r.padding,",").concat(r.padding,")"),"data-upset":"base"},r.onClick&&We.createElement("rect",{width:d.cs.x,height:d.sets.y,onClick:h.reset,className:"fillTransparent-".concat(c)}),We.createElement(Hn,{size:d,style:u,data:m}),We.createElement(Gn,{size:d,style:u,data:m,h,setChildrenFactory:r.setChildrenFactory,combinationChildrenFactory:r.combinationChildrenFactory}),We.createElement(nr,{size:d,style:u,data:m,hasHover:h.hasHover,selection:o}),We.createElement(Yn,{size:d,style:u,data:m,hasHover:h.hasHover,queries:l,secondary:null!=r.onHover||null!=o})),e.children)});var or=We.memo(We.forwardRef(function(e,t){var n=function(e){var t,n,r,a,o=null!==(t=e.color)&&void 0!==t?t:"#A6A8AB",i=null!==(n=e.secondaryColor)&&void 0!==n?n:"#E1E2E3",l=Object.assign({},e),s=null!==(r=e.background)&&void 0!==r?r:"#F4F4F4";return delete l.color,delete l.secondaryColor,delete l.background,s&&(l.style=Object.assign({background:s},null!==(a=l.style)&&void 0!==a?a:{})),{color:o,secondary:i,rest:l}}(e),r=n.color,a=n.secondary,o=n.rest,i=[10,20,35,60,65,80,90],l=[50,30,15];return We.createElement("svg",Object.assign({viewBox:"0 0 300 200",ref:t},o),i.map(function(e,t){return We.createElement("rect",{key:t,x:85+30*t,y:e,width:20,height:100-e,fill:r})}),l.map(function(e,t){return We.createElement("rect",{key:t,x:e,y:110+30*t,width:75-e,height:20,fill:r})}),i.map(function(e,t){return l.map(function(e,n){var o=n===2-t||3===t&&n>0||4===t&&1!==n||5===t&&n<2||6===t;return We.createElement("circle",{key:"".concat(t,"x").concat(n),cx:85+30*t+10,cy:110+30*n+10,r:10,fill:o?r:a})})}),We.createElement("rect",{x:"182",y:"150",width:"6",height:"30",fill:r}),We.createElement("rect",{x:"212",y:"120",width:"6",height:"60",fill:r}),We.createElement("rect",{x:"242",y:"120",width:"6",height:"30",fill:r}),We.createElement("rect",{x:"272",y:"120",width:"6",height:"60",fill:r}))}));Math.PI,Object.freeze({__proto__:null,widthRatios:function(e){return null==e||Array.isArray(e)&&e.length>=2&&e.every(function(e){return"number"==typeof e})},heightRatios:function(e){return null==e||Array.isArray(e)&&e.length>=1&&e.every(function(e){return"number"==typeof e})},setLabelAlignment:function(e){return null==e||"left"===e||"center"===e||"right"===e},sets:function(e){return Array.isArray(e)&&e.every(et)},combinations:function(e){return null==e||Array.isArray(e)&&e.every(tt)||function(e){var t=e;return null!=e&&(null==t.type||["intersection","union"].includes(t.type))}(e)},selection:function(e){return null==e||Array.isArray(e)||nt(e)},onHover:function(e){return null==e||"function"==typeof e},onClick:function(e){return null==e||"function"==typeof e},onContextMenu:function(e){return null==e||"function"==typeof e},onMouseMove:function(e){return null==e||"function"==typeof e},queries:function(e){return!e||Array.isArray(e)&&e.every(rt)},stringOrFalse:function(e){return null==e||"string"==typeof e||!1===e},setLabelOffsets:function(e){return null==e||Array.isArray(e)&&e.every(function(e){return null})},theme:function(e){return null==e||"light"===e||"dark"===e||"vega"===e},classNames:function(e){return null==e||Object.keys(e).every(function(t){return ln.includes(t)&&"string"==typeof e[t]})},fontSizes:function(e){return null==e||Object.keys(e).every(function(t){return on.includes(t)&&"string"==typeof e[t]})},numericScale:function(e){return null==e||"linear"===e||"log"===e||"function"==typeof e},bandScale:function(e){return null==e||"band"===e||"function"==typeof e},axisOffset:function(e){return null==e||"auto"===e||"number"==typeof e},style:function(e){return null==e||"object"===o(e)},styles:function(e){return null==e||Object.keys(e).every(function(e){return ln.includes(e)})},exportButtons:function(e){return null==e||"boolean"==typeof e||Object.keys(e).every(function(t){return sn.includes(t)&&"boolean"==typeof e[t]})}});var ir=Math.sqrt(2*Math.PI);function lr(e){return Math.exp(-.5*e*e)/ir}function sr(e){var t=e.items.length,n=function(e,t,n){var r=Math.sqrt(function(e,t){return e*t/(t-1)}(t,n));return"number"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(n,-.2)}(e.iqr,e.variance,t);return function(r){var a=0,o=0;for(a=0;a<t;a++)o+=lr((r-e.items[a])/n);return o/n/t}}function cr(e,t,n){var r=t-1,a=function(t){var a=t*r,o=Math.floor(a),i=a-o,l=e[o];return 0===i?l:n(l,e[Math.min(o+1,r)],i)};return{q1:a(.25),median:a(.5),q3:a(.75)}}function ur(e){return cr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,function(e,t,n){return e+n*(t-e)})}function dr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Math.floor((t+3)/2)/2,r=function(t){return.5*(e[Math.floor(t)-1]+e[Math.ceil(t)-1])};return{q1:r(n),median:r((t+1)/2),q3:r(t+1-n)}}var mr={hinges:function(e){return dr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length)},fivenum:dr,type7:ur,quantiles:ur,linear:function(e){return cr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,function(e,t,n){return e+(t-e)*n})},lower:function(e){return cr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,function(e){return e})},higher:function(e){return cr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,function(e,t){return t})},nearest:function(e){return cr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,function(e,t,n){return n<.5?e:t})},midpoint:function(e){return cr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,function(e,t){return.5*(e+t)})}};function fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t,{quantiles:"function"==typeof t.quantiles||null==t.quantiles?t.quantiles:mr[t.quantiles]});return null==n.quantiles&&delete n.quantiles,function(e){var t=a({coef:1.5,eps:.01,quantiles:ur,validAndSorted:!1,whiskersMode:"nearest"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=t.validAndSorted?function(e){return 0===e.length?{min:Number.NaN,max:Number.NaN,missing:0,s:[]}:{min:e[0],max:e[e.length-1],missing:0,s:e}}(e):function(e){for(var t=0,n=e.length,r=e instanceof Float64Array?new Float64Array(n):new Float32Array(n),a=0;a<n;a+=1){var o=e[a];null==o||Number.isNaN(o)||(r[t]=o,t+=1)}var i=n-t;if(0===t)return{min:Number.NaN,max:Number.NaN,missing:i,s:[]};var l=t===n?r:r.subarray(0,t);return l.sort(function(e,t){return e===t?0:e<t?-1:1}),{min:l[0],max:l[l.length-1],missing:i,s:l}}(e),r=n.missing,o=n.s,i=n.min,l=n.max,s={min:Number.NaN,max:Number.NaN,mean:Number.NaN,missing:r,iqr:Number.NaN,count:e.length,whiskerHigh:Number.NaN,whiskerLow:Number.NaN,outlier:[],median:Number.NaN,q1:Number.NaN,q3:Number.NaN,variance:0,items:[],kde:function(){return 0}},c=e.length-r;if(0===c)return s;var u=a(a({min:i,max:l,count:e.length,missing:r,items:o},function(e,t){for(var n=0,r=0;r<t;r++)n+=e[r];n/=t;for(var a=0,o=0;o<t;o++){var i=e[o];a+=(i-n)*(i-n)}return{mean:n,variance:a/=t}}(o,c)),function(e,t,n,r,a){for(var o=a.eps,i=a.quantiles,l=a.coef,s=a.whiskersMode,c=function(e,t){return Math.abs(e-t)<o},u=i(e,t),d=u.median,m=u.q1,f=u.q3,h=f-m,p="number"==typeof l&&l>0,y=p?Math.max(n,m-l*h):n,v=p?Math.min(r,f+l*h):r,g=[],_=0;_<t;_+=1){var b=e[_];if(b>=y||c(b,y)){"nearest"===s&&(y=b);break}0!==g.length&&c(g[g.length-1],b)||g.push(b)}for(var x=[],S=t-1;S>=0;S-=1){var N=e[S];if(N<=v||c(N,v)){"nearest"===s&&(v=N);break}0!==x.length&&c(x[x.length-1],N)||0!==g.length&&c(g[g.length-1],N)||x.push(N)}return{median:d,q1:m,q3:f,iqr:h,outlier:g.concat(x.reverse()),whiskerHigh:v,whiskerLow:y}}(o,c,i,l,t));return a(a({},u),{},{kde:sr(u)})}(e,n)}function hr(e){var t=e[1]-e[0];return function(n){return n*t+e[0]}}function pr(e){var t=e[1]-e[0];return function(n){return(n-e[0])/t}}function yr(e,t){var n=new Map(e.map(function(e){return[e.value,0]}));return t.forEach(function(e){if(null!=e){var t=e.toString();n.has(t)&&n.set(t,n.get(t)+1)}}),n}function vr(e,t,n){var r=function(e){var t=["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],n=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],r=e?t.concat(n):n.concat(t),a=0;return function(){return r[a++%r.length]}}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),a=t.map(function(e){return Object.assign({count:0,acc:0,percentage:0},{value:t="string"==typeof e?e:e.value,label:t.length>0?"".concat(t[0].toUpperCase()).concat(t.slice(1)):t,color:r()},"string"==typeof e?{}:e);var t}),o=yr(a,e),i=n?yr(a,n):null,l=Array.from(o.values()).reduce(function(e,t){return e+t},0),s=0;return a.forEach(function(e){e.acc=s,e.count=o.get(e.value),e.percentage=e.count/l,s+=i?i.get(e.value):e.count}),a}function gr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function _r(e){return Math.round(100*e)/100}var br=function(e){return e.toFixed(2)};function xr(e,t){return"Min: ".concat(t(e.min),", 25% Quantile: ").concat(t(e.q1),", Median: ").concat(t(e.median),", 75% Quantile: ").concat(t(e.q3),", Max: ").concat(t(e.max))}var Sr=function(e){var t=e.theme,n=void 0===t?"light":t,r=e.mode,a=void 0===r?"normal":r,o=e.boxStyle,i=e.lineStyle,l=e.outlierStyle,s=e.margin,c=void 0===s?0:s,u=e.boxPadding,d=void 0===u?.1:u,m=e.outlierRadius,f=void 0===m?3:m,h=e.numberFormat,p=void 0===h?br:h,y=gr(e,["theme","mode","boxStyle","lineStyle","outlierStyle","margin","boxPadding","outlierRadius","numberFormat"]),v=Array.isArray(e.values)?fr(e.values,y):e.values;if(Number.isNaN(v.median))return We.createElement("g",null);var g="vertical"!==e.orient,_=pr([e.min,e.max]),b=hr([0,g?e.width:e.height]),x=function(e){return _r(b(_(e)))},S={max:x(v.max),avg:x(v.mean),med:x(v.median),min:x(v.min),q1:x(v.q1),q3:x(v.q3),wh:x(v.whiskerHigh),wl:x(v.whiskerLow)},N=!1!==e.tooltips&&We.createElement("title",null,xr(v,p)),C=hn(n).notMemberColor,w={box:Object.assign({fill:C},o),line:Object.assign({fill:"none",stroke:"light"===n?"black":"#cccccc"},i),outlier:Object.assign({fill:C},l)};if(g){var E=e.height/2,k=_r(e.height*d)+c,O=e.height-k,A="M".concat(S.wl,",").concat(c," l0,").concat(e.height-2*c," M").concat(S.wl,",").concat(E," L").concat(S.q1,",").concat(E),M="M".concat(S.q3,",").concat(E," L").concat(S.wh,",").concat(E," M").concat(S.wh,",").concat(c," L").concat(S.wh,",").concat(e.height-c),L="M".concat(S.q1,",").concat(k," L").concat(S.q3,",").concat(k," L").concat(S.q3,",").concat(O," L").concat(S.q1,",").concat(O," L").concat(S.q1,",").concat(k," M").concat(S.med,",").concat(k," l0,").concat(O-k),T=We.createElement("path",{d:"".concat(A," ").concat(M," ").concat(L),style:w.line});return"indicator"===a?T:We.createElement("g",null,N,"normal"===a&&We.createElement("rect",{x:S.q1,y:k,width:S.q3-S.q1,height:e.height-2*k,style:w.box}),T,v.outlier.map(function(e){return We.createElement("circle",{key:e,r:f,cy:E,cx:x(e),style:w.outlier},We.createElement("title",null,"$",p(e)))}))}var I=e.width/2,P=_r(e.width*d)+c,j=e.width-P,D="M".concat(c,",").concat(S.wl," l").concat(e.width-2*c,",0 M").concat(I,",").concat(S.wl," L").concat(I,",").concat(S.q1),q="M".concat(I,",").concat(S.q3," L").concat(I,",").concat(S.wh," M").concat(c,",").concat(S.wh," L").concat(e.width-c,",").concat(S.wh),z="M".concat(P,",").concat(S.q1," L").concat(P,",").concat(S.q3," l").concat(j-P,",0 L").concat(j,",").concat(S.q1," L").concat(P,",").concat(S.q1," M").concat(P,",").concat(S.med," l").concat(j-P,",0"),F=We.createElement("path",{d:"".concat(D," ").concat(q," ").concat(z),style:w.line});return"indicator"===a?F:We.createElement("g",null,N,"normal"===a&&We.createElement("rect",{y:S.q1,x:P,height:S.q3-S.q1,width:e.width-2*P,style:w.box}),F,v.outlier.map(function(e){return We.createElement("circle",{key:e,r:f,cx:I,cy:x(e),style:w.outlier},We.createElement("title",null,"$",p(e)))}))},Nr=We.memo(Sr);function Cr(e){return Array.isArray(e.bins)}var wr=function(e){var t,n,r=e.margin,a=void 0===r?0:r,o=e.rectStyle,i=void 0===o?{}:o,l=Cr(e)?e.bins:vr(e.values,e.categories,e.base,"dark"===e.theme),s=pr([0,Cr(e)?e.bins.reduce(function(e,t){return e+t.count},0):null!==(n=null===(t=e.base)||void 0===t?void 0:t.length)&&void 0!==n?n:e.values.length]),c="vertical"!==e.orient,u=hr([0,c?e.width:e.height]),d=function(e){return u(s(e))};return c?We.createElement("g",null,l.map(function(t){return We.createElement("rect",{key:t.value,x:d(t.acc),width:d(t.count),y:a,height:e.height-2*a,style:Object.assign({fill:t.color},i)},!1!==e.tooltips&&We.createElement("title",null,"".concat(t.label,": ").concat(t.count)))})):We.createElement("g",null,l.map(function(t){return We.createElement("rect",{key:t.value,y:d(t.acc),height:d(t.count),x:a,width:e.width-2*a,style:Object.assign({fill:t.color},i)},!1!==e.tooltips&&We.createElement("title",null,"".concat(t.label,": ").concat(t.count)))}))},Er=We.memo(wr),kr="rgba(255,255,255,0.2)",Or="rgba(0,0,0,0.1)";function Ar(e,t,n){return void 0===n&&(n={}),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,a=void 0===r?100:r,o=n.position,i=n.name,l=void 0===i?e.toString():i,s=gr(n,["size","position","name"]),c="function"==typeof e?e:function(t){return t[e]},u=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;if(Array.isArray(t))t.forEach(function(e){var t=c(e);null==t||Number.isNaN(t)||(t<u&&(u=t),t>d&&(d=t))});else{var m=t;u=m.min,d=m.max}var f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",r=pr(e),a=hr(e),o=hr(t),i=function(e){return o(r(e))},l="horizontal"===n?5:7;return i.ticks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return Array(e).fill(0).map(function(t,n){var r=a(n/(e-1));return{value:r,label:r.toLocaleString(void 0,{maximumFractionDigits:2})}})},i.tickFormat=function(){return function(e){return e.toFixed(2)}},i}([u,d],[0,a],s.orient);return{name:l,position:o,size:a,scale:f,createOnHandlerData:function(e){var t=fr(e.elems.map(c),s);return{id:"boxplot",name:l,value:Object.assign(Object.assign(Object.assign({},t),{toString:function(){var e;return xr(this,null!==(e=s.numberFormat)&&void 0!==e?e:br)}}),t)}},render:function(e){var t=e.width,n=e.height,r=e.set,a=e.theme,o=r.elems.map(c);return We.createElement(Nr,Object.assign({values:o,width:t,height:n,min:u,max:d,theme:a},s))},renderSelection:function(e){var t=e.width,n=e.height,r=e.overlap,a=e.selectionColor,o=e.theme;if(null==r||0===r.length)return null;var i=r.map(c);return We.createElement(Nr,Object.assign({values:i,width:t,height:n,min:u,max:d,mode:"box",lineStyle:{stroke:a,strokeWidth:2},outlierStyle:{fill:a},theme:o},s))},renderQuery:function(e){var t=e.width,n=e.height,r=e.overlap,a=e.query,o=e.secondary,i=e.index,l=e.theme;if(null==r||0===r.length)return null;var m=r.map(c);return We.createElement(Nr,Object.assign({values:m,width:t,height:n,min:u,max:d,mode:o?"indicator":"box",margin:o?i+2:0,lineStyle:{stroke:a.color,strokeWidth:o?1:2},outlierStyle:{fill:a.color},theme:l},s))}}}(e,t,n)}function Mr(e,t,n){return void 0===n&&(n={}),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,a=void 0===r?100:r,o=n.position,i=n.name,l=void 0===i?e.toString():i,s=gr(n,["size","position","name"]),c="function"==typeof e?e:function(t){return t[e]},u=[];if(Array.isArray(t)){var d=new Set;t.forEach(function(e){var t=c(e);null!=t&&d.add(t.toString())}),u=Array.from(d).sort()}else u=t.categories;return{name:l,position:o,size:a,createOnHandlerData:function(e){var t=vr(e.elems.map(c),u,void 0,"dark"===s.theme);return t.toString=function(){return this.map(function(e){return"".concat(e.label,": ").concat(e.count)}).join(", ")},{id:"categorical",name:l,value:t}},render:function(e){var t=e.width,n=e.height,r=e.set,a=e.theme,o=r.elems.map(c);return We.createElement(Er,Object.assign({values:o,categories:u,width:t,height:n,theme:a},s))},renderSelection:function(e){var t=e.width,n=e.height,r=e.set,a=e.theme,o=e.overlap,i=e.selectionColor;if(null==o||0===o.length)return null;var l=r.elems.map(c),d=o.map(c);return We.createElement(Er,Object.assign({values:d,base:l,categories:u,width:t,height:n,theme:a,rectStyle:{stroke:i,strokeWidth:2,fill:"light"===a?Or:kr}},s))},renderQuery:function(e){var t=e.width,n=e.height,r=e.overlap,a=e.set,o=e.query,i=e.secondary,l=e.index,d=e.theme;if(null==r||0===r.length)return null;var m=a.elems.map(c),f=r.map(c);return We.createElement(Er,Object.assign({values:f,base:m,categories:u,width:t,height:n,margin:i?l+2:0,rectStyle:{stroke:o.color,fill:"light"===d?Or:kr},theme:d},s))}}}(e,t,n)}function Lr(e){return yn(e)}function Tr(e,t){U(S(ar,t),e)}function Ir(e,t){U(S(or,t),e)}},639:(e,t,n)=>{function r(e,t){return{objectName:e,propertyName:t.name,selector:t.selector,altConstantValueSelector:t.altConstantSelector,instanceKind:t.instanceKind}}function a(e,t,n){return null==t||"object"==typeof t&&!t.solid?n:t.solid?{value:null==t?void 0:t.solid.color}:"Dropdown"===(null==e?void 0:e.type)&&e.items?e.items.find(e=>e.value==t):t}function o(e,t,n){var r;return n&&e[t.toString()+"Key"]?n.getDisplayName(e[t.toString()+"Key"]):null===(r=e[t])||void 0===r?void 0:r.toString()}n.d(t,{De:()=>a,Ld:()=>o,yp:()=>r})},667:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(754),a=n(639);const o=class{constructor(e){this.localizationManager=e}populateFormattingSettingsModel(e,t){var n,a;const o=new e,i=null===(n=null==t?void 0:t.metadata)||void 0===n?void 0:n.objects;return i&&(null===(a=o.cards)||void 0===a||a.forEach(e=>{var t;e instanceof r.St&&(null===(t=e.topLevelSlice)||void 0===t||t.setPropertiesValues(i,e.name));const n=e instanceof r.Tn?[e]:e.groups;null==n||n.forEach(t=>{var n,r,a,o;null===(n=t.topLevelSlice)||void 0===n||n.setPropertiesValues(i,e.name),null===(r=null==t?void 0:t.slices)||void 0===r||r.forEach(t=>{null==t||t.setPropertiesValues(i,e.name)}),null===(o=null===(a=null==t?void 0:t.container)||void 0===a?void 0:a.containerItems)||void 0===o||o.forEach(t=>{var n,r;null===(n=null==t?void 0:t.slices)||void 0===n||n.forEach(t=>{null==t||t.setPropertiesValues(i,e.name)}),null===(r=null==t?void 0:t.groups)||void 0===r||r.forEach(t=>{var n,r;null===(n=null==t?void 0:t.topLevelSlice)||void 0===n||n.setPropertiesValues(i,e.name),null===(r=null==t?void 0:t.slices)||void 0===r||r.forEach(t=>{null==t||t.setPropertiesValues(i,e.name)})})})})})),o}buildFormattingModel(e){const t={cards:[]};return e.cards.filter(({visible:e=!0})=>e).forEach(e=>{var n;const o={displayName:(0,a.Ld)(e,"displayName",this.localizationManager),description:(0,a.Ld)(e,"description",this.localizationManager),disabled:e.disabled,disabledReason:(0,a.Ld)(e,"disabledReason",this.localizationManager),groups:[],uid:e.name+"-card",analyticsPane:e.analyticsPane},i=e.name;this.setTopLevelToggleSliceClone(e,o,i),null===(n=e.onPreProcess)||void 0===n||n.call(e);const l=e instanceof r.Tn,s=l?[e].filter(({visible:e=!0})=>e):e.groups.filter(({visible:e=!0})=>e);null==s||s.forEach(e=>{const t=this.buildCardGroupInstances(e,o,l,i);o.groups.push(t)}),o.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(e),t.cards.push(o)}),t}buildCardGroupInstances(e,t,n,r){const o=e.name+"-group",i={displayName:n?void 0:(0,a.Ld)(e,"displayName",this.localizationManager),description:n?void 0:(0,a.Ld)(e,"description",this.localizationManager),slices:[],uid:o,collapsible:e.collapsible,delaySaveSlices:e.delaySaveSlices,disabled:e.disabled,disabledReason:(0,a.Ld)(e,"disabledReason",this.localizationManager)},l={};if(e.container){const t=i.uid+"-container",n=this.buildContainerGroupInstance(e.container,t,r,l);i.displayName="Apply settings to",i.sliceWithContainer=!1,i.collapsible=!1,i.container=n}return e.slices&&(this.setTopLevelToggleSliceClone(e,null==i.displayName?t:i,r),this.buildFormattingSlices({slices:e.slices,objectName:r,sliceNames:l,formattingSlices:i.slices})),i}buildContainerGroupInstance(e,t,n,r){const o={displayName:(0,a.Ld)(e,"displayName",this.localizationManager),description:(0,a.Ld)(e,"description",this.localizationManager),containerItems:[],uid:t};return e.containerItems.filter(({visible:e=!0})=>e).forEach(e=>{if(!e)return;const i=e.displayNameKey?e.displayNameKey:e.displayName,l=t+i,s={displayName:(0,a.Ld)(e,"displayName",this.localizationManager),slices:[],groups:[],uid:l};e.slices&&this.buildFormattingSlices({slices:e.slices,objectName:n,sliceNames:r,formattingSlices:s.slices}),e.groups&&e.groups.forEach(e=>{const t={displayName:(0,a.Ld)(e,"displayName",this.localizationManager),description:(0,a.Ld)(e,"description",this.localizationManager),slices:[],uid:e.name+"-container-group",collapsible:e.collapsible,delaySaveSlices:e.delaySaveSlices,disabled:e.disabled,disabledReason:(0,a.Ld)(e,"disabledReason",this.localizationManager)};this.setTopLevelToggleSliceClone(e,t,n),this.buildFormattingSlices({slices:e.slices,objectName:n,sliceNames:r,formattingSlices:t.slices}),s.groups.push(t)}),o.containerItems.push(s)}),o}buildFormattingSlices({slices:e,objectName:t,sliceNames:n,formattingSlices:r}){null==e||e.filter(({visible:e=!0})=>e).forEach(e=>{const a=null==e?void 0:e.getFormattingSlice(t,this.localizationManager);a&&(void 0===n[e.name]?n[e.name]=0:(n[e.name]++,a.uid=`${a.uid}-${n[e.name]}`),r.push(a))})}getRevertToDefaultDescriptor(e){var t;const n={},a=[];let o,i=[];e instanceof r.St&&e.topLevelSlice&&a.push(...null===(t=e.topLevelSlice)||void 0===t?void 0:t.getRevertToDefaultDescriptor(e.name));const l=e instanceof r.Tn?[e].filter(({visible:e=!0})=>e):e.groups.filter(({visible:e=!0})=>e);return null==l||l.forEach(t=>{var r,l;o=this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,n,t.topLevelSlice),null===(l=null===(r=t.container)||void 0===r?void 0:r.containerItems)||void 0===l||l.forEach(t=>{var r;i=i.concat(this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,n)),null===(r=t.groups)||void 0===r||r.forEach(t=>{i=i.concat(this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,n))})}),a.push(...o.concat(i))}),a}getSlicesRevertToDefaultDescriptor(e,t,n,r){let a=[];return r&&(n[r.name]=!0,a=a.concat(r.getRevertToDefaultDescriptor(e))),null==t||t.forEach(t=>{t&&!n[t.name]&&(n[t.name]=!0,a=a.concat(t.getRevertToDefaultDescriptor(e)))}),a}setTopLevelToggleSliceClone(e,t,n){if(e.topLevelSlice){const r=e.topLevelSlice.getFormattingSlice(n,this.localizationManager);r.suppressDisplayName=!0,t.topLevelToggle=r}}}},674:(e,t,n)=>{n.d(t,{OZ:()=>a.A,z0:()=>r});var r=n(754),a=n(667)},754:(e,t,n)=>{n.d(t,{Cx:()=>p,Kx:()=>i,PA:()=>f,St:()=>l,Tn:()=>s,iB:()=>m,jF:()=>u,ks:()=>h,sk:()=>d});var r=n(639);class a{}class o extends a{}class i{}class l extends a{}class s extends o{}class c extends a{constructor(e){super(),Object.assign(this,e)}getFormattingSlice(e,t){const n=this.type,a=this.name,o={displayName:(0,r.Ld)(this,"displayName",t),description:(0,r.Ld)(this,"description",t),uid:e+"-"+a};return Object.assign(Object.assign({},o),{control:{type:n,properties:this.getFormattingComponent(e,t)},disabled:this.disabled,disabledReason:(0,r.Ld)(this,"disabledReason",t)})}getFormattingComponent(e,t){let n=this.value;return(null==n?void 0:n.displayNameKey)&&(n={displayName:null==t?void 0:t.getDisplayName(n.displayNameKey),value:n.value}),{descriptor:r.yp(e,this),value:n}}getRevertToDefaultDescriptor(e){return[{objectName:e,propertyName:this.name}]}setPropertiesValues(e,t){var n;const a=null===(n=null==e?void 0:e[t])||void 0===n?void 0:n[this.name];this.value=r.De(this,a,this.value)}}class u extends c{constructor(e){super(e),this.type="ToggleSwitch"}}class d extends c{constructor(e){super(e),this.type="ColorPicker"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{defaultColor:this.defaultColor,isNoFillItemSupported:this.isNoFillItemSupported})}}class m extends c{constructor(e){super(e),this.type="NumUpDown"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{options:this.options})}}class f extends c{constructor(e){super(e),this.type="Dropdown"}getFormattingComponent(e,t){return Object.assign(Object.assign({},super.getFormattingComponent(e,t)),{items:this.getFormattingItems(t,this.items)})}getFormattingItems(e,t){return t.map(t=>Object.assign(Object.assign({},t),{displayName:(0,r.Ld)(t,"displayName",e)}))}setValue(e,t){const n=this.getFormattingItems(t,this.items).find(t=>t.value===e);this.value=n||this.items[0]}}class h extends c{constructor(e){super(e),this.type="TextInput"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{placeholder:this.placeholder})}}class p extends c{constructor(){super(...arguments),this.type="FontPicker"}}},848:(e,t,n)=>{n.d(t,{l:()=>d});var r=n(635),a=n(969),o=n(148),i=n(519),l=n(461),s=n(359),c=n(674);const u=[];class d{constructor(e){this.attributes=[],this.rows=[],this.props={sets:[],width:100,height:100},this.target=e.element,this.localizationManager=e.host.createLocalizationManager(),this.selectionManager=e.host.createSelectionManager(),this.selectionManager=e.host.createSelectionManager(),this.colorPalette=new s.E(e.host.colorPalette),this.host=e.host,this.formattingSettingsService=new c.OZ(this.localizationManager),this.settings=new l.Ay,this.settings.theme.applyColorPalette(e.host.colorPalette),this.renderPlaceholder(),[this.onHover,this.onMouseMove]=(0,o.e8)(this.target,this.host,this.localizationManager),this.onContextMenu=(0,o.jL)(this.selectionManager),this.target.addEventListener("contextmenu",e=>{e.preventDefault(),this.selectionManager.showContextMenu({},{x:e.clientX,y:e.clientY})}),this.setSelection=(0,o.hx)(this.selectionManager,e=>{this.props.selection=e,this.render()}),this.selectionManager.registerOnSelectCallback(e=>{this.props.selection=(0,a.wV)(e,this.rows),this.render()})}getFormattingModel(){this.settings.setColors.derive(this.props.sets,this.settings.theme.supportIndividualColors(),this.colorPalette);const e=this.attributes.filter(e=>e instanceof i.kB);return this.settings.attributeColors.derive(e),this.formattingSettingsService.buildFormattingModel(this.settings)}render(){(0,r.XX)(this.target,this.props)}update(e){try{this.host.eventService.renderingStarted(e),this.renderImpl(e)||this.renderPlaceholder(),this.host.eventService.renderingFinished(e)}catch(t){this.host.eventService.renderingFailed(e,String(t))}}renderPlaceholder(){this.target.textContent="",this.target.style.position="relative",(0,r.YG)(this.target,{width:"100%",height:"100%"})}renderImpl(e){if(!e.dataViews||0===e.dataViews.length)return this.colorPalette.clear(),!1;const t=e.dataViews[0];if(this.settings=this.formattingSettingsService.populateFormattingSettingsModel(l.Ay,t),!t.categorical||!t.categorical.categories)return this.colorPalette.clear(),!1;const n=0===t.categorical.categories.length;if(this.rows=(0,a.G7)(t.categorical,this.host),this.attributes=this.generateAttributes(t),!t.categorical.values)return this.colorPalette.clear(),!1;Boolean(t.metadata.segment)&&requestAnimationFrame(()=>this.host.fetchMoreData());const{sets:r,combinations:o}=this.generateSetsAndCombinations(t);if(0===r.length||0===o.length)return this.colorPalette.clear(),!1;const i=(0,a.Fb)(this.rows,r,o,t.categorical,this.selectionManager,!n&&!0===this.host.hostCapabilities.allowInteractions);return this.props=Object.assign({sets:r,width:e.viewport.width,height:e.viewport.height,combinations:o,selection:i,exportButtons:!1},this.settings.fonts.generate(),this.settings.theme.generate(this.colorPalette,t.categorical),this.settings.style.generate()),0===this.attributes.length?(this.props.setAddons=u,this.props.combinationAddons=u):(this.props.setAddons=this.attributes.map((e,t)=>m(e,t,!1)),this.props.combinationAddons=this.attributes.map((e,t)=>m(e,t,!0))),!n&&this.host.hostCapabilities.allowInteractions&&(this.props.onClick=this.setSelection,this.props.onContextMenu=this.onContextMenu,this.props.onHover=this.onHover,this.props.onMouseMove=this.onMouseMove,this.props.tooltips=!1),this.render(),!0}generateSetsAndCombinations(e){const{rows:t,settings:n}=this;if(0===t.length)return{sets:[],combinations:[]};const r=(0,a.oW)(this.colorPalette,n.theme.supportIndividualColors()?this.settings.setColors.toColors():void 0);return(0,a.kt)(t,e.categorical,this.settings.sets.generate(),r,this.deriveOptions())}deriveOptions(){const e=this.settings.combinations.generate();return e.elems=this.rows,this.settings.theme.deriveCombinationColor||(e.mergeColors=()=>{}),e}generateAttributes(e){var t,n;const r=e.categorical.categories[0];let a=0;const o=this.settings.attributeColors.toColors();return null!==(n=null===(t=e.categorical)||void 0===t?void 0:t.values.filter(e=>{var t,n;return null===(n=null===(t=e.source)||void 0===t?void 0:t.roles)||void 0===n?void 0:n.attributes}).map(e=>{if((0,i.kf)(e))return new i.tq(e);const t=new i.kB(e,r,this.host,a,o);return a+=t.categories.length,t}))&&void 0!==n?n:[]}}function m(e,t,n){return e instanceof i.tq?(0,r.rH)(e=>e.attrs[t],{min:e.data.minLocal,max:e.data.maxLocal},{name:e.displayName,orient:n?"vertical":"horizontal"}):(0,r.Xo)(e=>String(e.attrs[t]),{categories:e.categories},{name:e.displayName,orient:n?"vertical":"horizontal"})}},969:(e,t,n)=>{n.d(t,{Fb:()=>o,G7:()=>i,kt:()=>u,oW:()=>l,wV:()=>a});var r=n(635);function a(e,t){return 0===e.length?null:t.filter(t=>e.some(e=>t===e||t.s&&function(e){return null!=e&&"function"==typeof e.includes}(e)&&e.includes(t.s)))}function o(e,t,n,r,o,i){const l=function(e,t){if(t.values&&0!==t.values.length&&null!=t.values[0].highlights)return t.values[0].highlights.map((t,n)=>null===t?null:e[n]).filter(e=>null!==e)}(e,r);return l?function(e,t,n){if(!e||0===e.length)return;const r=new Set(e),a=t.find(t=>t.cardinality===e.length&&t.elems.every(e=>r.has(e)));if(a)return a;return n.find(t=>t.cardinality===e.length&&t.elems.every(e=>r.has(e)))||e}(l,t,n):i?a(o.getSelectionIds(),e):null}function i(e,t){var n,r,a;const o=null!==(r=null===(n=e.values)||void 0===n?void 0:n.filter(e=>{var t,n;return null===(n=null===(t=e.source)||void 0===t?void 0:t.roles)||void 0===n?void 0:n.attributes}))&&void 0!==r?r:[],i=null===(a=e.values)||void 0===a?void 0:a.find(e=>{var t,n;return null===(n=null===(t=e.source)||void 0===t?void 0:t.roles)||void 0===n?void 0:n.counts});if(!e.categories||0===e.categories.length)return e.values?e.values.map((e,t)=>({v:t,i:t,attrs:o.map(e=>e.values[t]),count:i?i.values[t]:1})):[];const l=e.categories[0];return t.hostCapabilities.allowInteractions?l.values.map((e,n)=>({s:t.createSelectionIdBuilder().withCategory(l,n).createSelectionId(),v:e,cat:l,i:n,attrs:o.map(e=>e.values[n]),count:i?i.values[n]:1})):l.values.map((e,t)=>({v:e,i:t,attrs:o.map(e=>e.values[t]),count:i?i.values[t]:1}))}function l(e,t){return(n,r)=>{var a;if(!t)return;const o=n.source.queryName,i=e.getColor(o).value;return null!==(a=t[r])&&void 0!==a?a:i}}function s(e){return!(!e||String(e).toLowerCase().startsWith("f"))}function c(e,t){const n=(e,t)=>e.name.localeCompare(t.name);return"cardinality:desc"===e.order?t.sort((e,t)=>e.cardinality===t.cardinality?n(e,t):t.cardinality-e.cardinality):"cardinality"===e.order?t.sort((e,t)=>e.cardinality===t.cardinality?n(e,t):e.cardinality-t.cardinality):"name"===e.order?t.sort(n):"inherit"===e.order&&t.sort((e,t)=>e.index-t.index),t.length>e.limit&&t.splice(e.limit,t.length-e.limit),t.reverse(),t}function u(e,t,n,a,o){var i;const l=function(e,t){return(e.values?e.values.filter(e=>{var t,n;return null===(n=null===(t=e.source)||void 0===t?void 0:t.roles)||void 0===n?void 0:n.sets}):[]).map((e,n)=>({value:e,index:n,values:e.values,name:e.source.displayName,color:t(e,n)}))}(t,a);if(null==(null===(i=t.values)||void 0===i?void 0:i.find(e=>{var t,n;return null===(n=null===(t=e.source)||void 0===t?void 0:t.roles)||void 0===n?void 0:n.counts}))){const t=function(e,t,n){return c(n,(0,r.Oy)(t.map(t=>{const n=e.filter((e,n)=>s(t.values[n]));return Object.assign(Object.assign({},t),{elems:n,cardinality:n.reduce((e,t)=>e+t.count,0)})})))}(e,l,n);return 0===t.length?{sets:t,combinations:[]}:{sets:t,combinations:(0,r.gO)(t,o)}}return function(e,t,n,a){var o;const i=null!==(o=a.type)&&void 0!==o?o:"distinctIntersection",{sets:l,combinations:u}=(0,r.I5)(e.map((e,t)=>({index:t,elems:[e],cardinality:e.count})),e=>t.filter(t=>s(t.values[e.index])).map(e=>e.name),{setOrder:n.order,combinationOrder:a.order,type:i}),d=new Map(t.map(e=>[e.name,e])),m=u,f=c(n,l.map(e=>{const t=d.get(e.name);return t&&Object.assign(e,t),"distinctIntersection"===i&&Object.assign(e,{elems:u.filter(t=>t.sets.has(e)).reduce((e,t)=>(e.push(...t.elems),e),[])}),e}));for(const e of u)Object.assign(e,{color:(0,r.ZV)(Array.from(e.sets).map(e=>e.color))});return{sets:f,combinations:m}}(e,l,n,o)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{default:()=>o});var e=n(848),t=window.powerbi,a={name:"upSetJS61F43BDFCA024B13B6AC5BA73C9427B2",displayName:"UpSet Plot",class:"UpSetPlot",apiVersion:"5.11.0",create:t=>{if(e.l)return new e.l(t);throw"Visual instance not found"},createModalDialog:(e,t,n)=>{const r=globalThis.dialogRegistry;e in r&&new r[e](t,n)},custom:!0};void 0!==t&&(t.visuals=t.visuals||{},t.visuals.plugins=t.visuals.plugins||{},t.visuals.plugins.upSetJS61F43BDFCA024B13B6AC5BA73C9427B2=a);const o=a})(),upSetJS61F43BDFCA024B13B6AC5BA73C9427B2=r})();